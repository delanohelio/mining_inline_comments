{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwNjg5ODk1", "number": 6296, "title": "Add auth header define in envvars", "bodyText": "Will def need to document this ;)\nSigned-off-by: Simon Bennetts psiinon@gmail.com", "createdAt": "2020-11-13T16:41:46Z", "url": "https://github.com/zaproxy/zaproxy/pull/6296", "merged": true, "mergeCommit": {"oid": "cd653163b1ff536a076810a9fb7d37302f12ffa5"}, "closed": true, "closedAt": "2020-11-16T16:18:22Z", "author": {"login": "psiinon"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddAyr0AFqTUzMTA5MDczNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABddHZSsAFqTUzMTQ3OTA4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMDkwNzM0", "url": "https://github.com/zaproxy/zaproxy/pull/6296#pullrequestreview-531090734", "createdAt": "2020-11-16T08:36:23Z", "commit": {"oid": "d886e8a7d5625e4dd9e599cbe54311daacc76515"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwODozNjoyM1rOHzsr0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwODozNjoyM1rOHzsr0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk3MTUzNg==", "bodyText": "or empty?", "url": "https://github.com/zaproxy/zaproxy/pull/6296#discussion_r523971536", "createdAt": "2020-11-16T08:36:23Z", "author": {"login": "thc202"}, "path": "zap/src/main/java/org/zaproxy/zap/extension/authentication/HttpSenderAuthHeaderListener.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Zed Attack Proxy (ZAP) and its related class files.\n+ *\n+ * ZAP is an HTTP/HTTPS proxy for assessing web application security.\n+ *\n+ * Copyright 2020 The ZAP Development Team\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.zaproxy.zap.extension.authentication;\n+\n+import org.parosproxy.paros.network.HttpHeader;\n+import org.parosproxy.paros.network.HttpMessage;\n+import org.parosproxy.paros.network.HttpSender;\n+import org.zaproxy.zap.network.HttpSenderListener;\n+\n+class HttpSenderAuthHeaderListener implements HttpSenderListener {\n+\n+    private final String authHeaderValue;\n+    private final String authHeader;\n+    private final String authHeaderSite;\n+\n+    public HttpSenderAuthHeaderListener() {\n+        authHeaderValue = System.getenv(\"ZAP_AUTH_HEADER_VALUE\");\n+        String authHeaderVar = System.getenv(\"ZAP_AUTH_HEADER\");\n+        if (authHeaderVar == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d886e8a7d5625e4dd9e599cbe54311daacc76515"}, "originalPosition": 36}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d886e8a7d5625e4dd9e599cbe54311daacc76515", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/d886e8a7d5625e4dd9e599cbe54311daacc76515", "committedDate": "2020-11-13T16:40:36Z", "message": "Add auth header define in envvars\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}, "afterCommit": {"oid": "dbbd668a3a8abcf9f5279e6f0b0350002cb45c6c", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/dbbd668a3a8abcf9f5279e6f0b0350002cb45c6c", "committedDate": "2020-11-16T12:21:40Z", "message": "Add auth header define in envvars\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2556e722a3d9146519ab3fde0282f1ff40ffa96e", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/2556e722a3d9146519ab3fde0282f1ff40ffa96e", "committedDate": "2020-11-16T12:48:50Z", "message": "Add auth header define in envvars\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dbbd668a3a8abcf9f5279e6f0b0350002cb45c6c", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/dbbd668a3a8abcf9f5279e6f0b0350002cb45c6c", "committedDate": "2020-11-16T12:21:40Z", "message": "Add auth header define in envvars\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}, "afterCommit": {"oid": "2556e722a3d9146519ab3fde0282f1ff40ffa96e", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/2556e722a3d9146519ab3fde0282f1ff40ffa96e", "committedDate": "2020-11-16T12:48:50Z", "message": "Add auth header define in envvars\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMjk4MDc4", "url": "https://github.com/zaproxy/zaproxy/pull/6296#pullrequestreview-531298078", "createdAt": "2020-11-16T13:01:47Z", "commit": {"oid": "2556e722a3d9146519ab3fde0282f1ff40ffa96e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxNDc4NTE3", "url": "https://github.com/zaproxy/zaproxy/pull/6296#pullrequestreview-531478517", "createdAt": "2020-11-16T16:17:25Z", "commit": {"oid": "2556e722a3d9146519ab3fde0282f1ff40ffa96e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNjoxNzoyNVrOH0GSFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNjoxNzoyNVrOH0GSFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDM5MDkzMg==", "bodyText": "Wow, I was not aware we could pass functions as parameters, that's so cool!", "url": "https://github.com/zaproxy/zaproxy/pull/6296#discussion_r524390932", "createdAt": "2020-11-16T16:17:25Z", "author": {"login": "ricekot"}, "path": "zap/src/main/java/org/zaproxy/zap/extension/authentication/HttpSenderAuthHeaderListener.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Zed Attack Proxy (ZAP) and its related class files.\n+ *\n+ * ZAP is an HTTP/HTTPS proxy for assessing web application security.\n+ *\n+ * Copyright 2020 The ZAP Development Team\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.zaproxy.zap.extension.authentication;\n+\n+import java.util.function.Function;\n+import org.parosproxy.paros.network.HttpHeader;\n+import org.parosproxy.paros.network.HttpMessage;\n+import org.parosproxy.paros.network.HttpSender;\n+import org.zaproxy.zap.network.HttpSenderListener;\n+\n+class HttpSenderAuthHeaderListener implements HttpSenderListener {\n+\n+    public static final String ZAP_AUTH_HEADER_VALUE = \"ZAP_AUTH_HEADER_VALUE\";\n+    public static final String ZAP_AUTH_HEADER = \"ZAP_AUTH_HEADER\";\n+    public static final String ZAP_AUTH_HEADER_SITE = \"ZAP_AUTH_HEADER_SITE\";\n+\n+    private final String authHeaderValue;\n+    private final String authHeader;\n+    private final String authHeaderSite;\n+\n+    public HttpSenderAuthHeaderListener(Function<String, String> propertyProvider) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2556e722a3d9146519ab3fde0282f1ff40ffa96e"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxNDc5MDg1", "url": "https://github.com/zaproxy/zaproxy/pull/6296#pullrequestreview-531479085", "createdAt": "2020-11-16T16:18:00Z", "commit": {"oid": "2556e722a3d9146519ab3fde0282f1ff40ffa96e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 154, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}