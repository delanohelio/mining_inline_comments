{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxNzA0Nzkz", "number": 6193, "title": "Add option to not fix the content length", "bodyText": "Fixes #560\nAdds a 'Fix content length' button to both the Manual Req Editor and Break Panel. If enabled (which it is by default) then it will fix the content length header (as now) If disabled it wont.\nWill only appear in the Manual Req Editor for HTTP requests and will be disabled in the Break Panel for non HTTP requests.\nSigned-off-by: Simon Bennetts psiinon@gmail.com", "createdAt": "2020-09-23T11:22:53Z", "url": "https://github.com/zaproxy/zaproxy/pull/6193", "merged": true, "mergeCommit": {"oid": "6cfceb8cf6cee56ff5ee38f81ef9b19e8af72ec7"}, "closed": true, "closedAt": "2020-09-30T14:26:51Z", "author": {"login": "psiinon"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLq-B1AFqTQ5NDU2MjA3NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdN9cocABqjM4MjQ3Mzg1ODI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NTYyMDc0", "url": "https://github.com/zaproxy/zaproxy/pull/6193#pullrequestreview-494562074", "createdAt": "2020-09-23T11:32:42Z", "commit": {"oid": "d628a1a4a7d967891392d67f8b240b30493bce85"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxMTozMjo0MlrOHWnm-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxMTozMjo1OFrOHWnnwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQ3OTY3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            brk.checkBox.fixLength            = Fix content length\n          \n          \n            \n            brk.checkBox.fixLength            = Fix Content Length", "url": "https://github.com/zaproxy/zaproxy/pull/6193#discussion_r493479672", "createdAt": "2020-09-23T11:32:42Z", "author": {"login": "kingthorin"}, "path": "zap/src/main/resources/org/zaproxy/zap/resources/Messages.properties", "diffHunk": "@@ -860,6 +860,7 @@ brk.add.title                     = Add breakpoint\n brk.alwaysOnTop.message\t\t\t  = By default ZAP will remain on top of all other windows when a breakpoint is hit.\\n\\\n Press 'Cancel' to disable this feature.\\n\\\n This option can changed via Tools/Breakpoints\n+brk.checkBox.fixLength            = Fix content length", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d628a1a4a7d967891392d67f8b240b30493bce85"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQ3OTg3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            manReq.checkBox.fixLength      = Fix content length\n          \n          \n            \n            manReq.checkBox.fixLength      = Fix Content Length", "url": "https://github.com/zaproxy/zaproxy/pull/6193#discussion_r493479872", "createdAt": "2020-09-23T11:32:58Z", "author": {"login": "kingthorin"}, "path": "zap/src/main/resources/org/zaproxy/zap/resources/Messages.properties", "diffHunk": "@@ -1958,6 +1959,7 @@ log4j.tools.menu.gc         = Run the Garbage Collector\n \n manReq.name = Manual Request Editor Extension\n manReq.button.send             = Send\n+manReq.checkBox.fixLength      = Fix content length", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d628a1a4a7d967891392d67f8b240b30493bce85"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d628a1a4a7d967891392d67f8b240b30493bce85", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/d628a1a4a7d967891392d67f8b240b30493bce85", "committedDate": "2020-09-23T11:17:51Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}, "afterCommit": {"oid": "d9ae6b8cd57a3a638bd3d81078b236b07975d80f", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/d9ae6b8cd57a3a638bd3d81078b236b07975d80f", "committedDate": "2020-09-23T11:55:08Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NTc3Mzkw", "url": "https://github.com/zaproxy/zaproxy/pull/6193#pullrequestreview-494577390", "createdAt": "2020-09-23T11:54:38Z", "commit": {"oid": "d628a1a4a7d967891392d67f8b240b30493bce85"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxMTo1NDozOFrOHWozSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxMTo1OTo0MlrOHWpFwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQ5OTIxMA==", "bodyText": "setVisible?", "url": "https://github.com/zaproxy/zaproxy/pull/6193#discussion_r493499210", "createdAt": "2020-09-23T11:54:38Z", "author": {"login": "thc202"}, "path": "zap/src/main/java/org/zaproxy/zap/extension/brk/BreakPanel.java", "diffHunk": "@@ -328,6 +343,7 @@ public void run() {\n                                 responsePanel.setEditable(true);\n                                 cl.show(panelContent, RESPONSE_PANEL);\n                             }\n+                            getButtonFixContentLength().setEnabled(msg instanceof HttpMessage);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d628a1a4a7d967891392d67f8b240b30493bce85"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQ5OTI0Ng==", "bodyText": "Needs equivalent in/for the response.", "url": "https://github.com/zaproxy/zaproxy/pull/6193#discussion_r493499246", "createdAt": "2020-09-23T11:54:40Z", "author": {"login": "thc202"}, "path": "zap/src/main/java/org/zaproxy/zap/extension/brk/BreakPanel.java", "diffHunk": "@@ -356,6 +372,12 @@ public void run() {\n \n                             if (isRequest) {\n                                 requestPanel.saveData();\n+                                Message msg = getMessage();\n+                                if (msg instanceof HttpMessage", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d628a1a4a7d967891392d67f8b240b30493bce85"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzUwMzY5Mw==", "bodyText": "Worth verifying that the header is not changed at all.", "url": "https://github.com/zaproxy/zaproxy/pull/6193#discussion_r493503693", "createdAt": "2020-09-23T11:59:26Z", "author": {"login": "thc202"}, "path": "zap/src/test/java/org/zaproxy/zap/extension/httppanel/view/impl/models/http/BodyByteHttpPanelViewModelTest.java", "diffHunk": "@@ -122,7 +122,6 @@ void shouldSetDataIntoBody() {\n         model.setData(otherBodyContent);\n         // Then\n         verify(body).setBody(otherBodyContent);\n-        verify(header).setContentLength(otherBodyContent.length);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9ae6b8cd57a3a638bd3d81078b236b07975d80f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzUwMzkzNw==", "bodyText": "Should use this class.", "url": "https://github.com/zaproxy/zaproxy/pull/6193#discussion_r493503937", "createdAt": "2020-09-23T11:59:42Z", "author": {"login": "thc202"}, "path": "zap/src/main/java/org/zaproxy/zap/extension/brk/BreakPanel.java", "diffHunk": "@@ -509,6 +532,21 @@ public void setButtonMode(int mode) {\n         responseBreakButtons.setButtonMode(mode);\n     }\n \n+    private ZapToggleButton getButtonFixContentLength() {\n+        if (fixContentLength == null) {\n+            fixContentLength =\n+                    new ZapToggleButton(\n+                            DisplayUtils.getScaledIcon(\n+                                    new ImageIcon(\n+                                            HttpPanelSender.class.getResource(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9ae6b8cd57a3a638bd3d81078b236b07975d80f"}, "originalPosition": 83}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d9ae6b8cd57a3a638bd3d81078b236b07975d80f", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/d9ae6b8cd57a3a638bd3d81078b236b07975d80f", "committedDate": "2020-09-23T11:55:08Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}, "afterCommit": {"oid": "5b73830eb988dd50b49a6af23ef83a3f8eac2225", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/5b73830eb988dd50b49a6af23ef83a3f8eac2225", "committedDate": "2020-09-23T12:31:21Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b73830eb988dd50b49a6af23ef83a3f8eac2225", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/5b73830eb988dd50b49a6af23ef83a3f8eac2225", "committedDate": "2020-09-23T12:31:21Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}, "afterCommit": {"oid": "6d9f4afe937d493c67543d3de73389db8f0b7550", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/6d9f4afe937d493c67543d3de73389db8f0b7550", "committedDate": "2020-09-23T12:43:48Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d9f4afe937d493c67543d3de73389db8f0b7550", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/6d9f4afe937d493c67543d3de73389db8f0b7550", "committedDate": "2020-09-23T12:43:48Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}, "afterCommit": {"oid": "cc08a67aef33160fb50ecdd7300435965e85a303", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/cc08a67aef33160fb50ecdd7300435965e85a303", "committedDate": "2020-09-30T09:05:34Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc08a67aef33160fb50ecdd7300435965e85a303", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/cc08a67aef33160fb50ecdd7300435965e85a303", "committedDate": "2020-09-30T09:05:34Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}, "afterCommit": {"oid": "a7274bc7e4f5017f852b99ad57e61476cfb0486f", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/a7274bc7e4f5017f852b99ad57e61476cfb0486f", "committedDate": "2020-09-30T12:34:14Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a7274bc7e4f5017f852b99ad57e61476cfb0486f", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/a7274bc7e4f5017f852b99ad57e61476cfb0486f", "committedDate": "2020-09-30T12:34:14Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}, "afterCommit": {"oid": "96083032ba483c9eb038021d26d6f8075c92e748", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/96083032ba483c9eb038021d26d6f8075c92e748", "committedDate": "2020-09-30T12:35:29Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "96083032ba483c9eb038021d26d6f8075c92e748", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/96083032ba483c9eb038021d26d6f8075c92e748", "committedDate": "2020-09-30T12:35:29Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}, "afterCommit": {"oid": "b6cf16190b3a2349f5e142f047198853bcdc9b57", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/b6cf16190b3a2349f5e142f047198853bcdc9b57", "committedDate": "2020-09-30T12:50:26Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5Mzk1MjIz", "url": "https://github.com/zaproxy/zaproxy/pull/6193#pullrequestreview-499395223", "createdAt": "2020-09-30T12:52:27Z", "commit": {"oid": "b6cf16190b3a2349f5e142f047198853bcdc9b57"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NDMxNTY3", "url": "https://github.com/zaproxy/zaproxy/pull/6193#pullrequestreview-499431567", "createdAt": "2020-09-30T13:30:41Z", "commit": {"oid": "b6cf16190b3a2349f5e142f047198853bcdc9b57"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b6cf16190b3a2349f5e142f047198853bcdc9b57", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/b6cf16190b3a2349f5e142f047198853bcdc9b57", "committedDate": "2020-09-30T12:50:26Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}, "afterCommit": {"oid": "3eeb952dc0af880a22b4304e10b9dc659cb20b2a", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/3eeb952dc0af880a22b4304e10b9dc659cb20b2a", "committedDate": "2020-09-30T14:04:02Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ec14e9b956ca5297eb3061c8c29bb1d78e4039a", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/1ec14e9b956ca5297eb3061c8c29bb1d78e4039a", "committedDate": "2020-09-30T14:13:29Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3eeb952dc0af880a22b4304e10b9dc659cb20b2a", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/3eeb952dc0af880a22b4304e10b9dc659cb20b2a", "committedDate": "2020-09-30T14:04:02Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}, "afterCommit": {"oid": "1ec14e9b956ca5297eb3061c8c29bb1d78e4039a", "author": {"user": {"login": "psiinon", "name": "Simon Bennetts"}}, "url": "https://github.com/zaproxy/zaproxy/commit/1ec14e9b956ca5297eb3061c8c29bb1d78e4039a", "committedDate": "2020-09-30T14:13:29Z", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 214, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}