{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1MjY3NjMw", "number": 3772, "title": "SimpleRetry behaviour differs from the document", "bodyText": "Hi there.\nI thought this retry behaviour differs from the documentation mentioning with a delay of 1 second between each retry.\nActually the delay is gonna be increased exponentially.\nThe is the source code multiplying with 'attemptsNumber'\n\n  \n    \n      micronaut-core/runtime/src/main/java/io/micronaut/retry/intercept/SimpleRetry.java\n    \n    \n         Line 159\n      in\n      f8e0497\n    \n    \n    \n    \n\n        \n          \n           long delay = (long) (getDelay().toMillis() * multiplier) * current; \n        \n    \n  \n\n\nTest code mentions it's exponential\n\n  \n    \n      micronaut-core/runtime/src/test/groovy/io/micronaut/retry/intercept/SimpleRetryInstanceSpec.groovy\n    \n    \n         Line 66\n      in\n      f8e0497\n    \n    \n    \n    \n\n        \n          \n           void \"test retry context next delay is exponential\"() { \n        \n    \n  \n\n\nThanks.", "createdAt": "2020-07-22T17:53:32Z", "url": "https://github.com/micronaut-projects/micronaut-core/pull/3772", "merged": true, "mergeCommit": {"oid": "3c430fffc6be0a6e48e5d60677390ca2352e35ac"}, "closed": true, "closedAt": "2020-07-23T08:23:12Z", "author": {"login": "nator333"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3eoRBgH2gAyNDU1MjY3NjMwOjE0YmU2MGRkMjQxNzU1ZTA3NmNiMGZjYTBkNTU0NjcwODBhYmQ4Yjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3et0fgH2gAyNDU1MjY3NjMwOmQ1NzVkNjdhOTIxYWNkYzFlNjZkNmM5ZGYxZmZjYzgyOTQ0YzFhNDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "14be60dd241755e076cb0fca0d55467080abd8b8", "author": {"user": {"login": "nator333", "name": "Hiro Nakamata"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/14be60dd241755e076cb0fca0d55467080abd8b8", "committedDate": "2020-07-22T17:53:03Z", "message": "SimpleRetry behaviour differs from the document\n\nHi there.\r\nI thought this retry behaviour differs from the documentation mentioning `with a delay of 1 second between each retry`. \r\nActually the delay is gonna increased exponentially.\r\n\r\nThe is the source code multiplying with 'attemptsNumber'\r\nhttps://github.com/micronaut-projects/micronaut-core/blob/f8e0497b7cdb334c04d99ff8d7443571e9b64b27/runtime/src/main/java/io/micronaut/retry/intercept/SimpleRetry.java#L159\r\n\r\nTets code mentions it's exponential\r\nhttps://github.com/micronaut-projects/micronaut-core/blob/f8e0497b7cdb334c04d99ff8d7443571e9b64b27/runtime/src/test/groovy/io/micronaut/retry/intercept/SimpleRetryInstanceSpec.groovy#L66\r\n\r\nThanks."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNTUzNDMx", "url": "https://github.com/micronaut-projects/micronaut-core/pull/3772#pullrequestreview-453553431", "createdAt": "2020-07-22T17:55:04Z", "commit": {"oid": "14be60dd241755e076cb0fca0d55467080abd8b8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNzo1NTowNVrOG1tyeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNzo1NTowNVrOG1tyeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk3NzkxMg==", "bodyText": "Typo in third", "url": "https://github.com/micronaut-projects/micronaut-core/pull/3772#discussion_r458977912", "createdAt": "2020-07-22T17:55:05Z", "author": {"login": "graemerocher"}, "path": "src/main/docs/guide/aop/retry.adoc", "diffHunk": "@@ -4,7 +4,7 @@ With this in mind Micronaut comes with a api:retry.annotation.Retryable[] annota\n \n == Simple Retry\n \n-The simplest form of retry is just to add the `@Retryable` annotation to any type or method. The default behaviour of `@Retryable` is to retry 3 times with a delay of 1 second between each retry.\n+The simplest form of retry is just to add the `@Retryable` annotation to any type or method. The default behaviour of `@Retryable` is to retry 3 times with an exponential delay of 1 second between each retry. (first attempt with 1s delay, second attempt with 2s delay, thrid attempt with 3s delay)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14be60dd241755e076cb0fca0d55467080abd8b8"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d575d67a921acdc1e66d6c9df1ffcc82944c1a44", "author": {"user": {"login": "nator333", "name": "Hiro Nakamata"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/d575d67a921acdc1e66d6c9df1ffcc82944c1a44", "committedDate": "2020-07-22T17:59:07Z", "message": "Fix typo"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2824, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}