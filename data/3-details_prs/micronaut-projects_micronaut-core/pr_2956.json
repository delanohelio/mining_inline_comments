{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNjgzNzky", "number": 2956, "title": "Upgrade netty and add Cookie SameSite attribute support", "bodyText": "", "createdAt": "2020-03-20T18:34:28Z", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956", "merged": true, "mergeCommit": {"oid": "6481ccf1a3f9aff84560b69c8b15259bcfff04d4"}, "closed": true, "closedAt": "2020-03-21T16:25:26Z", "author": {"login": "croudet"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPk633ABqjMxNTA0ODE3MDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcP3Q0rABqjMxNTE4NTM2MDI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5ac87c2da6bfde7fccb0649cc21daf05192583a6", "author": {"user": {"login": "croudet", "name": null}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/5ac87c2da6bfde7fccb0649cc21daf05192583a6", "committedDate": "2020-03-20T18:33:06Z", "message": "Upgrade netty and add Cookie SameSite attribute support"}, "afterCommit": {"oid": "be7994f8cc4fc9056bd44649430ad040193ddfe4", "author": {"user": {"login": "croudet", "name": null}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/be7994f8cc4fc9056bd44649430ad040193ddfe4", "committedDate": "2020-03-20T18:35:31Z", "message": "Upgrade netty and add Cookie SameSite attribute support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be7994f8cc4fc9056bd44649430ad040193ddfe4", "author": {"user": {"login": "croudet", "name": null}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/be7994f8cc4fc9056bd44649430ad040193ddfe4", "committedDate": "2020-03-20T18:35:31Z", "message": "Upgrade netty and add Cookie SameSite attribute support"}, "afterCommit": {"oid": "2f390c12b6c91fd7139896a3f35c988e1a0d4bf1", "author": {"user": {"login": "croudet", "name": null}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/2f390c12b6c91fd7139896a3f35c988e1a0d4bf1", "committedDate": "2020-03-20T18:55:02Z", "message": "Upgrade netty and add Cookie SameSite attribute support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2f390c12b6c91fd7139896a3f35c988e1a0d4bf1", "author": {"user": {"login": "croudet", "name": null}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/2f390c12b6c91fd7139896a3f35c988e1a0d4bf1", "committedDate": "2020-03-20T18:55:02Z", "message": "Upgrade netty and add Cookie SameSite attribute support"}, "afterCommit": {"oid": "6e41eadd9dbc9f432b665ed116b1981603d6dbca", "author": {"user": {"login": "croudet", "name": null}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/6e41eadd9dbc9f432b665ed116b1981603d6dbca", "committedDate": "2020-03-20T19:10:54Z", "message": "Upgrade netty and add Cookie SameSite attribute support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6e41eadd9dbc9f432b665ed116b1981603d6dbca", "author": {"user": {"login": "croudet", "name": null}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/6e41eadd9dbc9f432b665ed116b1981603d6dbca", "committedDate": "2020-03-20T19:10:54Z", "message": "Upgrade netty and add Cookie SameSite attribute support"}, "afterCommit": {"oid": "fc70ac1e06a9ca428e20fc370828902aadbee971", "author": {"user": {"login": "croudet", "name": null}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/fc70ac1e06a9ca428e20fc370828902aadbee971", "committedDate": "2020-03-20T19:40:39Z", "message": "Upgrade netty and add Cookie SameSite attribute support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc70ac1e06a9ca428e20fc370828902aadbee971", "author": {"user": {"login": "croudet", "name": null}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/fc70ac1e06a9ca428e20fc370828902aadbee971", "committedDate": "2020-03-20T19:40:39Z", "message": "Upgrade netty and add Cookie SameSite attribute support"}, "afterCommit": {"oid": "218cb756aed8ec0f966b3a00e0f52c033f383ee5", "author": {"user": {"login": "croudet", "name": null}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/218cb756aed8ec0f966b3a00e0f52c033f383ee5", "committedDate": "2020-03-20T19:58:36Z", "message": "Upgrade netty and add Cookie SameSite attribute support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4OTA4MDU1", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#pullrequestreview-378908055", "createdAt": "2020-03-21T10:20:17Z", "commit": {"oid": "218cb756aed8ec0f966b3a00e0f52c033f383ee5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMVQxMDoyMDoxN1rOF5ovTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMVQxMDoyMzo0N1rOF5owTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDYyMw==", "bodyText": "Maybe prefer Optional<SameSite>", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980623", "createdAt": "2020-03-21T10:20:17Z", "author": {"login": "graemerocher"}, "path": "http/src/main/java/io/micronaut/http/cookie/Cookie.java", "diffHunk": "@@ -78,6 +78,23 @@\n      */\n     long getMaxAge();\n \n+    /**\n+     * Checks to see if this {@link Cookie} can be sent along cross-site requests.\n+     * For more information, please look\n+     * <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">here</a>\n+     * @return The SameSite attribute of the cookie\n+     */\n+    @Nullable SameSite getSameSite();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "218cb756aed8ec0f966b3a00e0f52c033f383ee5"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDY2NA==", "bodyText": "Argument should have @Nullable", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980664", "createdAt": "2020-03-21T10:20:37Z", "author": {"login": "graemerocher"}, "path": "http/src/main/java/io/micronaut/http/cookie/Cookie.java", "diffHunk": "@@ -78,6 +78,23 @@\n      */\n     long getMaxAge();\n \n+    /**\n+     * Checks to see if this {@link Cookie} can be sent along cross-site requests.\n+     * For more information, please look\n+     * <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">here</a>\n+     * @return The SameSite attribute of the cookie\n+     */\n+    @Nullable SameSite getSameSite();\n+\n+    /**\n+     * Determines if this this {@link Cookie} can be sent along cross-site requests.\n+     * For more information, please look\n+     *  <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">here</a>\n+     * @param sameSite SameSite value\n+     * @return This cookie\n+     */\n+    @Nonnull Cookie sameSite(SameSite sameSite);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "218cb756aed8ec0f966b3a00e0f52c033f383ee5"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDcyNA==", "bodyText": "Can you not just use valueOf? https://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html#valueOf(java.lang.Class,%20java.lang.String)", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980724", "createdAt": "2020-03-21T10:21:52Z", "author": {"login": "graemerocher"}, "path": "http/src/main/java/io/micronaut/http/cookie/SameSite.java", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright 2017-2020 original authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.micronaut.http.cookie;\n+\n+/**\n+ * Possible values for the SameSite attribute.\n+ * See <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">changes to RFC6265bis</a>\n+ */\n+public enum SameSite {\n+  Lax,\n+  Strict,\n+  None;\n+\n+  /**\n+   * Return the enum value corresponding to the passed in same-site-flag, using a case insensitive comparison.\n+   *\n+   * @param name value for the SameSite Attribute\n+   * @return enum value for the provided name or null\n+   */\n+  static SameSite of(String name) {\n+      if (name != null) {\n+          for (SameSite each : SameSite.class.getEnumConstants()) {\n+              if (each.name().equalsIgnoreCase(name)) {\n+                  return each;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "218cb756aed8ec0f966b3a00e0f52c033f383ee5"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDc2OQ==", "bodyText": "Also should be a default method that return Optional.empty() to avoid breaking API change", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980769", "createdAt": "2020-03-21T10:22:38Z", "author": {"login": "graemerocher"}, "path": "http/src/main/java/io/micronaut/http/cookie/Cookie.java", "diffHunk": "@@ -78,6 +78,23 @@\n      */\n     long getMaxAge();\n \n+    /**\n+     * Checks to see if this {@link Cookie} can be sent along cross-site requests.\n+     * For more information, please look\n+     * <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">here</a>\n+     * @return The SameSite attribute of the cookie\n+     */\n+    @Nullable SameSite getSameSite();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDYyMw=="}, "originalCommit": {"oid": "218cb756aed8ec0f966b3a00e0f52c033f383ee5"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDgxOA==", "bodyText": "Make it a default no-op method to avoid breaking API change", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980818", "createdAt": "2020-03-21T10:22:57Z", "author": {"login": "graemerocher"}, "path": "http/src/main/java/io/micronaut/http/cookie/Cookie.java", "diffHunk": "@@ -78,6 +78,23 @@\n      */\n     long getMaxAge();\n \n+    /**\n+     * Checks to see if this {@link Cookie} can be sent along cross-site requests.\n+     * For more information, please look\n+     * <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">here</a>\n+     * @return The SameSite attribute of the cookie\n+     */\n+    @Nullable SameSite getSameSite();\n+\n+    /**\n+     * Determines if this this {@link Cookie} can be sent along cross-site requests.\n+     * For more information, please look\n+     *  <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">here</a>\n+     * @param sameSite SameSite value\n+     * @return This cookie\n+     */\n+    @Nonnull Cookie sameSite(SameSite sameSite);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDY2NA=="}, "originalCommit": {"oid": "218cb756aed8ec0f966b3a00e0f52c033f383ee5"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDgzNg==", "bodyText": "Make a default method that returns Optional.empty() to avoid breaking API change", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980836", "createdAt": "2020-03-21T10:23:18Z", "author": {"login": "graemerocher"}, "path": "http/src/main/java/io/micronaut/http/cookie/CookieConfiguration.java", "diffHunk": "@@ -63,4 +63,9 @@\n      * @return The max age to use for the cookie\n      */\n     Optional<TemporalAmount> getCookieMaxAge();\n+\n+    /**\n+     * @return return the SameSite to use for the cookie.\n+     */\n+    Optional<SameSite> getCookieSameSite();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "218cb756aed8ec0f966b3a00e0f52c033f383ee5"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDg0Nw==", "bodyText": "add @author and @since tags", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980847", "createdAt": "2020-03-21T10:23:34Z", "author": {"login": "graemerocher"}, "path": "http/src/main/java/io/micronaut/http/cookie/SameSite.java", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright 2017-2020 original authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.micronaut.http.cookie;\n+\n+/**\n+ * Possible values for the SameSite attribute.\n+ * See <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">changes to RFC6265bis</a>\n+ */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "218cb756aed8ec0f966b3a00e0f52c033f383ee5"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDg3OQ==", "bodyText": "javadoc for each constant please", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980879", "createdAt": "2020-03-21T10:23:47Z", "author": {"login": "graemerocher"}, "path": "http/src/main/java/io/micronaut/http/cookie/SameSite.java", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright 2017-2020 original authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.micronaut.http.cookie;\n+\n+/**\n+ * Possible values for the SameSite attribute.\n+ * See <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">changes to RFC6265bis</a>\n+ */\n+public enum SameSite {\n+  Lax,\n+  Strict,\n+  None;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "218cb756aed8ec0f966b3a00e0f52c033f383ee5"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf711c99149751b1308b6a46d6af65b325e86762", "author": {"user": {"login": "croudet", "name": null}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/bf711c99149751b1308b6a46d6af65b325e86762", "committedDate": "2020-03-21T15:57:44Z", "message": "Upgrade netty and add Cookie SameSite attribute support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "218cb756aed8ec0f966b3a00e0f52c033f383ee5", "author": {"user": {"login": "croudet", "name": null}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/218cb756aed8ec0f966b3a00e0f52c033f383ee5", "committedDate": "2020-03-20T19:58:36Z", "message": "Upgrade netty and add Cookie SameSite attribute support"}, "afterCommit": {"oid": "bf711c99149751b1308b6a46d6af65b325e86762", "author": {"user": {"login": "croudet", "name": null}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/bf711c99149751b1308b6a46d6af65b325e86762", "committedDate": "2020-03-21T15:57:44Z", "message": "Upgrade netty and add Cookie SameSite attribute support"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2902, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}