{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNTQ5Nzk1", "number": 4411, "title": "Issue 4306 - Bean validation should fail if @Valid field is not introspected", "bodyText": "Issue 4306 - Bean validation should fail if @Valid field is not introspected\n\nemit validation failure when @Valid alone is applied to a container of elements where the element type is not @Introspected.\nthis does not address cases with additional constraint(s), since that might still be legal if the element type is supported by those constraints directly (e.g. @Valid @Size(min=1, max=2) List<String> strs), even though something like @Valid @Size(min=1, max=2) List<NotIntrospected> oops might be bogus.", "createdAt": "2020-10-29T20:33:51Z", "url": "https://github.com/micronaut-projects/micronaut-core/pull/4411", "merged": true, "mergeCommit": {"oid": "212bd71cb2699b6ebaf58e917db5ee1a42f60276"}, "closed": true, "closedAt": "2020-10-30T20:07:03Z", "author": {"login": "wetted"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXYOUHgH2gAyNTEyNTQ5Nzk1OmQ1MjE1ZDFiOWI4YjQzYmFkNTE4YzdlMmQzYzFmNTI3NzJlZThhMzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXZRcBAH2gAyNTEyNTQ5Nzk1OjZjMGZiZDhjYWUyZjRmMjkzNDgzYjUyYjlmYjYyYzMzZDkzNDRmN2U=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d5215d1b9b8b43bad518c7e2d3c1f52772ee8a36", "author": {"user": {"login": "wetted", "name": "Dean Wette"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/d5215d1b9b8b43bad518c7e2d3c1f52772ee8a36", "committedDate": "2020-10-29T20:30:51Z", "message": "Issue 4306 - Bean validation should fail if @Valid field is not introspected\n- emit validation failure when @Valid alone is applied to a container of elements where the element type is not @Introspected.\n- this does not address cases with additional constraint(s), since that might still be legal if the element type is supported by those constraints directly (e.g. @Valid @Size(min=1, max=2) List<String> strs), even though something like @Valid @Size(min=1, max=2) List<NotIntrospected> oops might be bogus."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMDkxOTQ5", "url": "https://github.com/micronaut-projects/micronaut-core/pull/4411#pullrequestreview-520091949", "createdAt": "2020-10-29T21:13:15Z", "commit": {"oid": "d5215d1b9b8b43bad518c7e2d3c1f52772ee8a36"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMToxMzoxNVrOHqu70g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMToxMzoxNVrOHqu70g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU3MTIxOA==", "bodyText": "@Valid is not annotated with @Constraint so you can just look for the presence of that annotation instead of comparing the annotation names", "url": "https://github.com/micronaut-projects/micronaut-core/pull/4411#discussion_r514571218", "createdAt": "2020-10-29T21:13:15Z", "author": {"login": "jameskleeh"}, "path": "validation/src/main/java/io/micronaut/validation/validator/DefaultValidator.java", "diffHunk": "@@ -1331,6 +1320,14 @@ public void keyedValue(String nodeName, Object key, Object keyedValue) {\n             @Nullable DefaultPropertyNode container) {\n \n         final BeanIntrospection<Object> beanIntrospection = getBeanIntrospection(propertyValue);\n+        AnnotationMetadata annotationMetadata = cascadeProperty.getAnnotationMetadata();\n+        if (beanIntrospection == null && annotationMetadata.getDeclaredAnnotationNames().equals(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5215d1b9b8b43bad518c7e2d3c1f52772ee8a36"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70622ee7b8b6990eb6c22b710564d9ecbbf4b7c2", "author": {"user": {"login": "wetted", "name": "Dean Wette"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/70622ee7b8b6990eb6c22b710564d9ecbbf4b7c2", "committedDate": "2020-10-29T21:34:54Z", "message": "Issue 4306 - Bean validation should fail if @Valid field is not introspected\n- emit validation failure when @Valid alone is applied to a container of elements where the element type is not @Introspected.\n- this does not address cases with additional constraint(s), since that might still be legal if the element type is supported by those constraints directly (e.g. @Valid @Size(min=1, max=2) List<String> strs), even though something like @Valid @Size(min=1, max=2) List<NotIntrospected> oops might be bogus."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c0fbd8cae2f4f293483b52b9fb62c33d9344f7e", "author": {"user": {"login": "wetted", "name": "Dean Wette"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/6c0fbd8cae2f4f293483b52b9fb62c33d9344f7e", "committedDate": "2020-10-29T21:44:10Z", "message": "Issue 4306 - Bean validation should fail if @Valid field is not introspected\n- emit validation failure when @Valid alone is applied to a container of elements where the element type is not @Introspected.\n- this does not address cases with additional constraint(s), since that might still be legal if the element type is supported by those constraints directly (e.g. @Valid @Size(min=1, max=2) List<String> strs), even though something like @Valid @Size(min=1, max=2) List<NotIntrospected> oops might be bogus."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2744, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}