{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzMjY5Mzgy", "number": 4541, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxNTo1MzowNFrOE6ohTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxNTo1MzowNFrOE6ohTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5OTE2NzQ5OnYy", "diffSide": "LEFT", "path": "graal/src/main/java/io/micronaut/graal/reflect/GraalTypeElementVisitor.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxNTo1MzowNFrOH10hug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxNjowNjowNVrOH11RAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE5NzE3OA==", "bodyText": "Why do you delete this?", "url": "https://github.com/micronaut-projects/micronaut-core/pull/4541#discussion_r526197178", "createdAt": "2020-11-18T15:53:04Z", "author": {"login": "ilopmar"}, "path": "graal/src/main/java/io/micronaut/graal/reflect/GraalTypeElementVisitor.java", "diffHunk": "@@ -261,16 +259,6 @@ private void generateNativeImageProperties(VisitorContext visitorContext) {\n         try {\n             String path = buildNativeImagePath(visitorContext);\n             String reflectFile = path + REFLECTION_CONFIG_JSON;\n-            String propsFile = path + NATIVE_IMAGE_PROPERTIES;\n-\n-            visitorContext.visitMetaInfFile(propsFile).ifPresent(gf -> {\n-                visitorContext.info(\"Writing \" + NATIVE_IMAGE_PROPERTIES + \" file to destination: \" + gf.getName());\n-                try (PrintWriter w = new PrintWriter(gf.openWriter())) {\n-                    w.println(\"Args = -H:ReflectionConfigurationResources=${.}/reflection-config.json\");\n-                } catch (IOException e) {\n-                    visitorContext.fail(\"Error writing \" + NATIVE_IMAGE_PROPERTIES + \": \" + e.getMessage(), null);\n-                }\n-            });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25278118ada32bb2f42bae832f4c7097f4cd119c"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjIwMTY1Nw==", "bodyText": "if the file is named reflect-config.json it is automatically picked up. We were only generating this file to load our inconsistently named reflection-config.json file", "url": "https://github.com/micronaut-projects/micronaut-core/pull/4541#discussion_r526201657", "createdAt": "2020-11-18T15:57:16Z", "author": {"login": "graemerocher"}, "path": "graal/src/main/java/io/micronaut/graal/reflect/GraalTypeElementVisitor.java", "diffHunk": "@@ -261,16 +259,6 @@ private void generateNativeImageProperties(VisitorContext visitorContext) {\n         try {\n             String path = buildNativeImagePath(visitorContext);\n             String reflectFile = path + REFLECTION_CONFIG_JSON;\n-            String propsFile = path + NATIVE_IMAGE_PROPERTIES;\n-\n-            visitorContext.visitMetaInfFile(propsFile).ifPresent(gf -> {\n-                visitorContext.info(\"Writing \" + NATIVE_IMAGE_PROPERTIES + \" file to destination: \" + gf.getName());\n-                try (PrintWriter w = new PrintWriter(gf.openWriter())) {\n-                    w.println(\"Args = -H:ReflectionConfigurationResources=${.}/reflection-config.json\");\n-                } catch (IOException e) {\n-                    visitorContext.fail(\"Error writing \" + NATIVE_IMAGE_PROPERTIES + \": \" + e.getMessage(), null);\n-                }\n-            });", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE5NzE3OA=="}, "originalCommit": {"oid": "25278118ada32bb2f42bae832f4c7097f4cd119c"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjIwNDYwMg==", "bodyText": "You are right. Then I think you can rename REFLECTION_CONFIG_JSON to REFLECT_CONFIG_JSON here https://github.com/micronaut-projects/micronaut-core/pull/4541/files#diff-a6f6eed2d556fc4571d32b10ec2a16d17cb98075c9e1b3ae0395176281cbb061R73\nFor the rest of the changes, everything looks good.", "url": "https://github.com/micronaut-projects/micronaut-core/pull/4541#discussion_r526204602", "createdAt": "2020-11-18T16:00:59Z", "author": {"login": "ilopmar"}, "path": "graal/src/main/java/io/micronaut/graal/reflect/GraalTypeElementVisitor.java", "diffHunk": "@@ -261,16 +259,6 @@ private void generateNativeImageProperties(VisitorContext visitorContext) {\n         try {\n             String path = buildNativeImagePath(visitorContext);\n             String reflectFile = path + REFLECTION_CONFIG_JSON;\n-            String propsFile = path + NATIVE_IMAGE_PROPERTIES;\n-\n-            visitorContext.visitMetaInfFile(propsFile).ifPresent(gf -> {\n-                visitorContext.info(\"Writing \" + NATIVE_IMAGE_PROPERTIES + \" file to destination: \" + gf.getName());\n-                try (PrintWriter w = new PrintWriter(gf.openWriter())) {\n-                    w.println(\"Args = -H:ReflectionConfigurationResources=${.}/reflection-config.json\");\n-                } catch (IOException e) {\n-                    visitorContext.fail(\"Error writing \" + NATIVE_IMAGE_PROPERTIES + \": \" + e.getMessage(), null);\n-                }\n-            });", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE5NzE3OA=="}, "originalCommit": {"oid": "25278118ada32bb2f42bae832f4c7097f4cd119c"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjIwOTI4Mg==", "bodyText": "That is already done", "url": "https://github.com/micronaut-projects/micronaut-core/pull/4541#discussion_r526209282", "createdAt": "2020-11-18T16:06:05Z", "author": {"login": "graemerocher"}, "path": "graal/src/main/java/io/micronaut/graal/reflect/GraalTypeElementVisitor.java", "diffHunk": "@@ -261,16 +259,6 @@ private void generateNativeImageProperties(VisitorContext visitorContext) {\n         try {\n             String path = buildNativeImagePath(visitorContext);\n             String reflectFile = path + REFLECTION_CONFIG_JSON;\n-            String propsFile = path + NATIVE_IMAGE_PROPERTIES;\n-\n-            visitorContext.visitMetaInfFile(propsFile).ifPresent(gf -> {\n-                visitorContext.info(\"Writing \" + NATIVE_IMAGE_PROPERTIES + \" file to destination: \" + gf.getName());\n-                try (PrintWriter w = new PrintWriter(gf.openWriter())) {\n-                    w.println(\"Args = -H:ReflectionConfigurationResources=${.}/reflection-config.json\");\n-                } catch (IOException e) {\n-                    visitorContext.fail(\"Error writing \" + NATIVE_IMAGE_PROPERTIES + \": \" + e.getMessage(), null);\n-                }\n-            });", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE5NzE3OA=="}, "originalCommit": {"oid": "25278118ada32bb2f42bae832f4c7097f4cd119c"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1237, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}