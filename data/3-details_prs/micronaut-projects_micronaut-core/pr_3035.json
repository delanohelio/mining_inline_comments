{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwODQxNzI1", "number": 3035, "title": "Return BadRequest for malformed URI requests.", "bodyText": "Fixes #2606\nThis PR adds a default ExceptionHandler for URISyntax exception and a test to verify the behaviour.\nReproducing the steps in #2606 now results in the following:\n$ curl -v 'http://localhost:8080/<>'\n*   Trying ::1:8080...\n* Connected to localhost (::1) port 8080 (#0)\n> GET /<> HTTP/1.1\n> Host: localhost:8080\n> User-Agent: curl/7.69.1\n> Accept: */*\n> \n* Mark bundle as not supporting multiuse\n< HTTP/1.1 400 Bad Request\n< Content-Type: application/json\n< content-length: 70\n< connection: close\n< \n* Closing connection 0\n{\"message\":\"Malformed URI: Illegal character in path at index 1: /<>\"}", "createdAt": "2020-04-08T13:16:20Z", "url": "https://github.com/micronaut-projects/micronaut-core/pull/3035", "merged": true, "mergeCommit": {"oid": "56d9f16f862df615542a7968c389366d81e1ee96"}, "closed": true, "closedAt": "2020-04-23T05:26:33Z", "author": {"login": "hebafer"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVn2RSAH2gAyNDAwODQxNzI1OmVhYWYyOTcxZTljYzVhMTQ3ZDJjYjAxNDA0MzQ3MWM5YjBjMDFlY2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaTkI7gFqTM5ODcxODk5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "eaaf2971e9cc5a147d2cb014043471c9b0c01ecb", "author": {"user": {"login": "hebafer", "name": "H\u00e9ctor B\u00e1llega"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/eaaf2971e9cc5a147d2cb014043471c9b0c01ecb", "committedDate": "2020-04-08T13:24:04Z", "message": "Added URI syntax handler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd2762d59e23436ca8764266fb694c256b890dea", "author": {"user": {"login": "hebafer", "name": "H\u00e9ctor B\u00e1llega"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/bd2762d59e23436ca8764266fb694c256b890dea", "committedDate": "2020-04-08T13:25:01Z", "message": "Added test to check URI specification"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "398e92c0b2d4fa812ee9102bb7e23bca3e174060", "author": {"user": null}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/398e92c0b2d4fa812ee9102bb7e23bca3e174060", "committedDate": "2020-04-08T12:43:01Z", "message": "Added test to check URI specification"}, "afterCommit": {"oid": "bd2762d59e23436ca8764266fb694c256b890dea", "author": {"user": {"login": "hebafer", "name": "H\u00e9ctor B\u00e1llega"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/bd2762d59e23436ca8764266fb694c256b890dea", "committedDate": "2020-04-08T13:25:01Z", "message": "Added test to check URI specification"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b8a3a88475edbef6cbd845a688de0751eda98d3", "author": {"user": {"login": "hebafer", "name": "H\u00e9ctor B\u00e1llega"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/1b8a3a88475edbef6cbd845a688de0751eda98d3", "committedDate": "2020-04-08T13:43:28Z", "message": "Removed unused imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzQxMTI0", "url": "https://github.com/micronaut-projects/micronaut-core/pull/3035#pullrequestreview-391741124", "createdAt": "2020-04-11T06:29:53Z", "commit": {"oid": "1b8a3a88475edbef6cbd845a688de0751eda98d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQwNjoyOTo1NFrOGEK3DA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQwNjoyOTo1NFrOGEK3DA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAyNTQyMA==", "bodyText": "Since you are not creating beans in this test. You don't need to set spec.name. We typically use spec.name to avoid bean pollution.\nEnvironment.TEST is automatically inferred.\nThus, you could just write EmbeddedServer embeddedServer = ApplicationContext.run(EmbeddedServer)", "url": "https://github.com/micronaut-projects/micronaut-core/pull/3035#discussion_r407025420", "createdAt": "2020-04-11T06:29:54Z", "author": {"login": "sdelamo"}, "path": "test-suite-groovy/src/test/groovy/io/micronaut/docs/server/urisyntax/MalformedUriSpec.groovy", "diffHunk": "@@ -0,0 +1,27 @@\n+package io.micronaut.docs.server.urisyntax\n+\n+import io.micronaut.context.ApplicationContext\n+import io.micronaut.context.env.Environment\n+import io.micronaut.http.HttpStatus\n+import io.micronaut.runtime.server.EmbeddedServer\n+import spock.lang.AutoCleanup\n+import spock.lang.Shared\n+import spock.lang.Specification\n+\n+class MalformedUriSpec extends Specification {\n+\n+    @Shared\n+    @AutoCleanup\n+    EmbeddedServer embeddedServer = ApplicationContext.run(EmbeddedServer, ['spec.name': MalformedUriSpec.simpleName], Environment.TEST);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b8a3a88475edbef6cbd845a688de0751eda98d3"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5eb388eed3382ed89faba1d30f524759f7aa9319", "author": {"user": {"login": "hebafer", "name": "H\u00e9ctor B\u00e1llega"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/5eb388eed3382ed89faba1d30f524759f7aa9319", "committedDate": "2020-04-14T14:01:48Z", "message": "removed spec.name to avoid bean pollution"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NzE4OTk4", "url": "https://github.com/micronaut-projects/micronaut-core/pull/3035#pullrequestreview-398718998", "createdAt": "2020-04-23T02:35:47Z", "commit": {"oid": "5eb388eed3382ed89faba1d30f524759f7aa9319"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2878, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}