{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1NjQ1NjI3", "number": 2900, "title": "Add concept of server filter phase and update filter order", "bodyText": "", "createdAt": "2020-03-09T15:11:40Z", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2900", "merged": true, "mergeCommit": {"oid": "8af30cedc520e2b68f5b3d6aaab93a8d3b52dff2"}, "closed": true, "closedAt": "2020-03-13T03:20:36Z", "author": {"login": "jameskleeh"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMBiVjgH2gAyMzg1NjQ1NjI3OmQ5NmUzYmU3YjQzOWUxYWU3OTUxYjcxZjUxZWQ3ZjU1MjhmNDEwNjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcNHncbgH2gAyMzg1NjQ1NjI3OjI0ZWM3NjkxMGNhZWNmMDViNjQxOWQwNGRjNWFiMGE3ODIzN2Y0ZGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d96e3be7b439e1ae7951b71f51ed7f5528f41063", "author": {"user": {"login": "jameskleeh", "name": "James Kleeh"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/d96e3be7b439e1ae7951b71f51ed7f5528f41063", "committedDate": "2020-03-09T17:40:35Z", "message": "Add concept of server filter phase and update filter order"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b06d2df4d7b20ae5c5a83eb4123292d634ef0797", "author": {"user": {"login": "jameskleeh", "name": "James Kleeh"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/b06d2df4d7b20ae5c5a83eb4123292d634ef0797", "committedDate": "2020-03-09T15:11:02Z", "message": "Add concept of server filter phase and update filter order"}, "afterCommit": {"oid": "d96e3be7b439e1ae7951b71f51ed7f5528f41063", "author": {"user": {"login": "jameskleeh", "name": "James Kleeh"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/d96e3be7b439e1ae7951b71f51ed7f5528f41063", "committedDate": "2020-03-09T17:40:35Z", "message": "Add concept of server filter phase and update filter order"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNzI0MDkx", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2900#pullrequestreview-371724091", "createdAt": "2020-03-10T07:26:04Z", "commit": {"oid": "d96e3be7b439e1ae7951b71f51ed7f5528f41063"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNzoyNjowNVrOF0Dtpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNzoyODoxMFrOF0Dv7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEzMTExMA==", "bodyText": "Is there a reason these are wrapper types instead of just int?", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2900#discussion_r390131110", "createdAt": "2020-03-10T07:26:05Z", "author": {"login": "graemerocher"}, "path": "http/src/main/java/io/micronaut/http/filter/ServerFilterPhase.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright 2017-2020 original authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.micronaut.http.filter;\n+\n+/**\n+ * Represents phases of server filters. Each phase has a range of 1000 under its control.\n+ * There are gaps between phases to account for additions of future phases. Filters\n+ * relying on phases must ensure the order is within the selected phases range. For example\n+ * {@code ServerFilterPhase.TRACING.before() - 500} is considered an invalid usage of the TRACING\n+ * phase because that would place the order at 2251, which is outside of the range of the\n+ * phase (2501-3500).\n+ *\n+ * @author James Kleeh\n+ * @since 2.0.0\n+ */\n+public enum ServerFilterPhase {\n+\n+    FIRST(-1000, -1249, -750),\n+    METRICS(1000, 751, 1250),\n+    TRACING(3000, 2751, 3250),\n+    SESSION(5000, 4751, 5250),\n+    SECURITY(7000, 6751, 7250),\n+    VIEWS(9000, 8751, 9250),\n+    LAST(11000, 10751, 11250);\n+\n+    private final Integer order;\n+    private final Integer before;\n+    private final Integer after;\n+\n+    /**\n+     * @param order The order\n+     * @param before The order to run before\n+     * @param after The order to run after\n+     */\n+    ServerFilterPhase(Integer order, Integer before, Integer after) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96e3be7b439e1ae7951b71f51ed7f5528f41063"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEzMTU3Mg==", "bodyText": "I would rename VIEWS to RENDERING. You may or may not have a view in the rendering phase as it could be rendered to JSON or something", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2900#discussion_r390131572", "createdAt": "2020-03-10T07:27:45Z", "author": {"login": "graemerocher"}, "path": "http/src/main/java/io/micronaut/http/filter/ServerFilterPhase.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright 2017-2020 original authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.micronaut.http.filter;\n+\n+/**\n+ * Represents phases of server filters. Each phase has a range of 1000 under its control.\n+ * There are gaps between phases to account for additions of future phases. Filters\n+ * relying on phases must ensure the order is within the selected phases range. For example\n+ * {@code ServerFilterPhase.TRACING.before() - 500} is considered an invalid usage of the TRACING\n+ * phase because that would place the order at 2251, which is outside of the range of the\n+ * phase (2501-3500).\n+ *\n+ * @author James Kleeh\n+ * @since 2.0.0\n+ */\n+public enum ServerFilterPhase {\n+\n+    FIRST(-1000, -1249, -750),\n+    METRICS(1000, 751, 1250),\n+    TRACING(3000, 2751, 3250),\n+    SESSION(5000, 4751, 5250),\n+    SECURITY(7000, 6751, 7250),\n+    VIEWS(9000, 8751, 9250),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96e3be7b439e1ae7951b71f51ed7f5528f41063"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEzMTY5NA==", "bodyText": "Need javadoc comments for each phase constant and what they mean", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2900#discussion_r390131694", "createdAt": "2020-03-10T07:28:10Z", "author": {"login": "graemerocher"}, "path": "http/src/main/java/io/micronaut/http/filter/ServerFilterPhase.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright 2017-2020 original authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.micronaut.http.filter;\n+\n+/**\n+ * Represents phases of server filters. Each phase has a range of 1000 under its control.\n+ * There are gaps between phases to account for additions of future phases. Filters\n+ * relying on phases must ensure the order is within the selected phases range. For example\n+ * {@code ServerFilterPhase.TRACING.before() - 500} is considered an invalid usage of the TRACING\n+ * phase because that would place the order at 2251, which is outside of the range of the\n+ * phase (2501-3500).\n+ *\n+ * @author James Kleeh\n+ * @since 2.0.0\n+ */\n+public enum ServerFilterPhase {\n+\n+    FIRST(-1000, -1249, -750),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96e3be7b439e1ae7951b71f51ed7f5528f41063"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16e7b2aa9a96b42e395caf0428db7ff04a275356", "author": {"user": {"login": "jameskleeh", "name": "James Kleeh"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/16e7b2aa9a96b42e395caf0428db7ff04a275356", "committedDate": "2020-03-12T15:31:28Z", "message": "Change VIEW to RENDERING. Added more space between phases. Used primitive int"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8d670b780b2ab6f86c2ceec88dc6c70a3e10560", "author": {"user": {"login": "jameskleeh", "name": "James Kleeh"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/a8d670b780b2ab6f86c2ceec88dc6c70a3e10560", "committedDate": "2020-03-12T16:29:19Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24ec76910caecf05b6419d04dc5ab0a78237f4de", "author": {"user": {"login": "jameskleeh", "name": "James Kleeh"}}, "url": "https://github.com/micronaut-projects/micronaut-core/commit/24ec76910caecf05b6419d04dc5ab0a78237f4de", "committedDate": "2020-03-13T03:19:31Z", "message": "Change cors to run after metrics instead of tracing"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2894, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}