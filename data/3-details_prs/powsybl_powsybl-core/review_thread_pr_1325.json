{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNjUxMTgz", "number": 1325, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzo1MDo0OVrOD_-YCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzo1MzowN1rOD_-azw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NDA4ODQwOnYy", "diffSide": "RIGHT", "path": "ucte/ucte-converter/src/main/java/com/powsybl/ucte/converter/UcteImporter.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzo1MDo0OVrOGa9diA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNzoyODowNlrOGbo47A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkyMzE0NA==", "bodyText": "I think this test should be done in the UcteElement::fix method or in the constructor.\n@murgeyseb what do you think?\n@jlabous You should give more information in the error message: with your proposal, if this exception is thrown, I don't know which line is the faulty one so it's impossible to debug/fix it.", "url": "https://github.com/powsybl/powsybl-core/pull/1325#discussion_r430923144", "createdAt": "2020-05-27T07:50:49Z", "author": {"login": "mathbagu"}, "path": "ucte/ucte-converter/src/main/java/com/powsybl/ucte/converter/UcteImporter.java", "diffHunk": "@@ -399,6 +399,9 @@ private static void createLines(UcteNetworkExt ucteNetwork, Network network) {\n         for (UcteLine ucteLine : ucteNetwork.getLines()) {\n             UcteNodeCode nodeCode1 = ucteLine.getId().getNodeCode1();\n             UcteNodeCode nodeCode2 = ucteLine.getId().getNodeCode2();\n+            if (!nodeCode1.getVoltageLevelCode().equals(nodeCode2.getVoltageLevelCode())) {\n+                throw new UcteException(\"Line with two different nominal voltages\");\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1ee3c0945dc53527045e87327efa4ad159b7c96"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkzMDUwOQ==", "bodyText": "Yes it could be done in UcteElement::fix, it is true. And the message should be more explicit.\nBut this method is supposed to fix the issue, not throw exception, but why not.", "url": "https://github.com/powsybl/powsybl-core/pull/1325#discussion_r430930509", "createdAt": "2020-05-27T08:03:37Z", "author": {"login": "murgeyseb"}, "path": "ucte/ucte-converter/src/main/java/com/powsybl/ucte/converter/UcteImporter.java", "diffHunk": "@@ -399,6 +399,9 @@ private static void createLines(UcteNetworkExt ucteNetwork, Network network) {\n         for (UcteLine ucteLine : ucteNetwork.getLines()) {\n             UcteNodeCode nodeCode1 = ucteLine.getId().getNodeCode1();\n             UcteNodeCode nodeCode2 = ucteLine.getId().getNodeCode2();\n+            if (!nodeCode1.getVoltageLevelCode().equals(nodeCode2.getVoltageLevelCode())) {\n+                throw new UcteException(\"Line with two different nominal voltages\");\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkyMzE0NA=="}, "originalCommit": {"oid": "e1ee3c0945dc53527045e87327efa4ad159b7c96"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTYzNDY2OA==", "bodyText": "So maybe we can do the test in the constructor then?", "url": "https://github.com/powsybl/powsybl-core/pull/1325#discussion_r431634668", "createdAt": "2020-05-28T07:28:06Z", "author": {"login": "mathbagu"}, "path": "ucte/ucte-converter/src/main/java/com/powsybl/ucte/converter/UcteImporter.java", "diffHunk": "@@ -399,6 +399,9 @@ private static void createLines(UcteNetworkExt ucteNetwork, Network network) {\n         for (UcteLine ucteLine : ucteNetwork.getLines()) {\n             UcteNodeCode nodeCode1 = ucteLine.getId().getNodeCode1();\n             UcteNodeCode nodeCode2 = ucteLine.getId().getNodeCode2();\n+            if (!nodeCode1.getVoltageLevelCode().equals(nodeCode2.getVoltageLevelCode())) {\n+                throw new UcteException(\"Line with two different nominal voltages\");\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkyMzE0NA=="}, "originalCommit": {"oid": "e1ee3c0945dc53527045e87327efa4ad159b7c96"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NDA5NTUxOnYy", "diffSide": "RIGHT", "path": "ucte/ucte-converter/src/test/resources/differentLinesVoltage.uct", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzo1MzowN1rOGa9icA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzo1MzowN1rOGa9icA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkyNDQwMA==", "bodyText": "Do not copy/paste test cases, but adapt it to the situation.", "url": "https://github.com/powsybl/powsybl-core/pull/1325#discussion_r430924400", "createdAt": "2020-05-27T07:53:07Z", "author": {"login": "mathbagu"}, "path": "ucte/ucte-converter/src/test/resources/differentLinesVoltage.uct", "diffHunk": "@@ -0,0 +1,12 @@\n+##C 2007.05.01\n+Test case for UCTE import issue in PowSyBl core package\n+contact : sebastien.murgey@rte-france.com", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1ee3c0945dc53527045e87327efa4ad159b7c96"}, "originalPosition": 3}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 121, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}