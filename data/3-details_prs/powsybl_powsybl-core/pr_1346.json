{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyOTMxMjc1", "number": 1346, "title": "add optional getter for ratio and phase tap changer", "bodyText": "Signed-off-by: J\u00e9r\u00e9my LABOUS jlabous@silicom.fr\nPlease check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nDoes this PR already have an issue describing the problem ? If so, link to this issue using '#XXX' and skip the rest\nfix #1227", "createdAt": "2020-06-11T08:47:26Z", "url": "https://github.com/powsybl/powsybl-core/pull/1346", "merged": true, "mergeCommit": {"oid": "cd69b068743a00939483888174dd4f35bc81c248"}, "closed": true, "closedAt": "2020-06-19T12:04:17Z", "author": {"login": "jlabous"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqJe3xAH2gAyNDMyOTMxMjc1OjNjYjRlZGY2MmExZjFkOGQwZjFkOGEwMWM0MzQ3NWY5OTc3NTU0ZDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsugXUAH2gAyNDMyOTMxMjc1OmU2NTBlMjJjZWI5MDZmNzY3Y2QwODk1YWJiY2ZjZDVhYTBjMmY3NjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3cb4edf62a1f1d8d0f1d8a01c43475f9977554d5", "author": {"user": {"login": "jlabous", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/3cb4edf62a1f1d8d0f1d8a01c43475f9977554d5", "committedDate": "2020-06-11T07:53:46Z", "message": "add optional getter for ratio and phase tap changer\n\nSigned-off-by: J\u00e9r\u00e9my LABOUS <jlabous@silicom.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MTA2MjY4", "url": "https://github.com/powsybl/powsybl-core/pull/1346#pullrequestreview-429106268", "createdAt": "2020-06-11T16:56:22Z", "commit": {"oid": "3cb4edf62a1f1d8d0f1d8a01c43475f9977554d5"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNjo1NjoyMlrOGimV4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNjo1NjozMFrOGimWMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODkzMjk2Mg==", "bodyText": "This is an API: adding a new method will break existing code that could implement this interface. Please provide a behavior.\nreturn Optional.ofNullable(getPhaseTapChanger());\n\nseems fine in that case.", "url": "https://github.com/powsybl/powsybl-core/pull/1346#discussion_r438932962", "createdAt": "2020-06-11T16:56:22Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/PhaseTapChangerHolder.java", "diffHunk": "@@ -25,4 +27,8 @@\n      */\n     PhaseTapChanger getPhaseTapChanger();\n \n+    /**\n+     * Get the optional ratio tap changer.\n+     */\n+    Optional<PhaseTapChanger> getOptionalPhaseTapChanger();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3cb4edf62a1f1d8d0f1d8a01c43475f9977554d5"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODkzMzA0MQ==", "bodyText": "Same remark here", "url": "https://github.com/powsybl/powsybl-core/pull/1346#discussion_r438933041", "createdAt": "2020-06-11T16:56:30Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/RatioTapChangerHolder.java", "diffHunk": "@@ -25,4 +27,8 @@\n      */\n     RatioTapChanger getRatioTapChanger();\n \n+    /**\n+     * Get the optional ratio tap changer.\n+     */\n+    Optional<RatioTapChanger> getOptionalRatioTapChanger();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3cb4edf62a1f1d8d0f1d8a01c43475f9977554d5"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3388f0caf0744075a586428f17b2319baf746a80", "author": {"user": {"login": "jlabous", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/3388f0caf0744075a586428f17b2319baf746a80", "committedDate": "2020-06-12T15:15:04Z", "message": "take remarks in account\n\nSigned-off-by: J\u00e9r\u00e9my LABOUS <jlabous@silicom.fr>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce2c282638cfd6587bfb102fd4480fdeef7b747d", "author": {"user": {"login": "jlabous", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/ce2c282638cfd6587bfb102fd4480fdeef7b747d", "committedDate": "2020-06-12T15:45:57Z", "message": "improve test coverage and remove useless implementation of method\n\nSigned-off-by: J\u00e9r\u00e9my LABOUS <jlabous@silicom.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMzk5NjYw", "url": "https://github.com/powsybl/powsybl-core/pull/1346#pullrequestreview-430399660", "createdAt": "2020-06-15T07:51:31Z", "commit": {"oid": "3388f0caf0744075a586428f17b2319baf746a80"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNzo1MTozMVrOGjm6HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNzo1MjozN1rOGjm8fA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk5MDgxMg==", "bodyText": "Not sure you should remove this implementation (even if this method has a default implementation with the same behavior), it makes it explicit that you are using the ratioTapChanger field", "url": "https://github.com/powsybl/powsybl-core/pull/1346#discussion_r439990812", "createdAt": "2020-06-15T07:51:31Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ThreeWindingsTransformerImpl.java", "diffHunk": "@@ -139,10 +138,6 @@ public RatioTapChangerImpl getRatioTapChanger() {\n             return ratioTapChanger;\n         }\n \n-        public Optional<RatioTapChanger> getOptionalRatioTapChanger() {\n-            return Optional.ofNullable(ratioTapChanger);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3388f0caf0744075a586428f17b2319baf746a80"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk5MDg5MA==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1346#discussion_r439990890", "createdAt": "2020-06-15T07:51:40Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ThreeWindingsTransformerImpl.java", "diffHunk": "@@ -151,11 +146,6 @@ public PhaseTapChangerImpl getPhaseTapChanger() {\n             return phaseTapChanger;\n         }\n \n-        @Override\n-        public Optional<PhaseTapChanger> getOptionalPhaseTapChanger() {\n-            return Optional.ofNullable(phaseTapChanger);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3388f0caf0744075a586428f17b2319baf746a80"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk5MDk5Ng==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1346#discussion_r439990996", "createdAt": "2020-06-15T07:51:51Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/TwoWindingsTransformerImpl.java", "diffHunk": "@@ -171,11 +170,6 @@ public RatioTapChangerImpl getRatioTapChanger() {\n         return ratioTapChanger;\n     }\n \n-    @Override\n-    public Optional<RatioTapChanger> getOptionalRatioTapChanger() {\n-        return Optional.ofNullable(ratioTapChanger);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3388f0caf0744075a586428f17b2319baf746a80"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk5MTA1OA==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1346#discussion_r439991058", "createdAt": "2020-06-15T07:51:58Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/TwoWindingsTransformerImpl.java", "diffHunk": "@@ -186,11 +180,6 @@ public PhaseTapChangerImpl getPhaseTapChanger() {\n         return phaseTapChanger;\n     }\n \n-    @Override\n-    public Optional<PhaseTapChanger> getOptionalPhaseTapChanger() {\n-        return Optional.ofNullable(phaseTapChanger);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3388f0caf0744075a586428f17b2319baf746a80"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk5MTM0OA==", "bodyText": "You can add an implementation in iidm-impl (even if it is the same behavior) using the field in the impl class rather than the getPhaseTapChanger method", "url": "https://github.com/powsybl/powsybl-core/pull/1346#discussion_r439991348", "createdAt": "2020-06-15T07:52:29Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/PhaseTapChangerHolder.java", "diffHunk": "@@ -30,5 +30,14 @@\n     /**\n      * Get the optional ratio tap changer.\n      */\n-    Optional<PhaseTapChanger> getOptionalPhaseTapChanger();\n+    default Optional<PhaseTapChanger> getOptionalPhaseTapChanger() {\n+        return Optional.ofNullable(getPhaseTapChanger());\n+    }\n+\n+    /**\n+     *  Check if a phase tap changer is present\n+     */\n+    default boolean hasPhaseTapChanger() {\n+        return getPhaseTapChanger() != null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3388f0caf0744075a586428f17b2319baf746a80"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk5MTQyMA==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1346#discussion_r439991420", "createdAt": "2020-06-15T07:52:37Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/RatioTapChangerHolder.java", "diffHunk": "@@ -30,5 +30,14 @@\n     /**\n      * Get the optional ratio tap changer.\n      */\n-    Optional<RatioTapChanger> getOptionalRatioTapChanger();\n+    default Optional<RatioTapChanger> getOptionalRatioTapChanger() {\n+        return Optional.ofNullable(getRatioTapChanger());\n+    }\n+\n+    /**\n+     * Check if a phase tap changer is present\n+     */\n+    default boolean hasRatioTapChanger() {\n+        return getRatioTapChanger() != null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3388f0caf0744075a586428f17b2319baf746a80"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e046c81afe21566911942c3ff3ab914dcc277eb", "author": {"user": {"login": "jlabous", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/4e046c81afe21566911942c3ff3ab914dcc277eb", "committedDate": "2020-06-15T15:58:51Z", "message": "rollback on delete methods\n\nSigned-off-by: J\u00e9r\u00e9my LABOUS <jlabous@silicom.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNTg0MzUw", "url": "https://github.com/powsybl/powsybl-core/pull/1346#pullrequestreview-431584350", "createdAt": "2020-06-16T14:47:53Z", "commit": {"oid": "4e046c81afe21566911942c3ff3ab914dcc277eb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b637d2b88ffb00084efb26c3b9ba346c549b676", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/3b637d2b88ffb00084efb26c3b9ba346c549b676", "committedDate": "2020-06-16T14:48:01Z", "message": "Merge branch 'master' into issue_1227_add_optional_getter_for_ratio_and_phaseTapChanger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e650e22ceb906f767cd0895abbcfcd5aa0c2f762", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/e650e22ceb906f767cd0895abbcfcd5aa0c2f762", "committedDate": "2020-06-19T08:09:44Z", "message": "Merge branch 'master' into issue_1227_add_optional_getter_for_ratio_and_phaseTapChanger"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4326, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}