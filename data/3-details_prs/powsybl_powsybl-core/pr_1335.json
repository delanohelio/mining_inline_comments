{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4NDcxNDc2", "number": 1335, "title": "Refactoring getLines(), getLineStream(), getDanglingLines(), getDanglingLineStream() in Merging View", "bodyText": "Signed-off-by: RALAMBOTIANA MIORA miora.ralambotiana@rte-france.com\nPlease check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n\nDoes this PR already have an issue describing the problem ?\nNo\nWhat kind of change does this PR introduce? (Bug fix, feature, docs update, ...)\nRefactoring\nWhat is the current behavior? (You can also link to an open issue here)\nThe lists returned by  getLines() and getDanglingLines() are read twice (once during the building, once during the using of the list). It is not efficient.\nWhat is the new behavior (if this is a feature change)?\nThe list is only read when used.\nDoes this PR introduce a breaking change or deprecate an API?\nNo", "createdAt": "2020-06-05T14:03:55Z", "url": "https://github.com/powsybl/powsybl-core/pull/1335", "merged": true, "mergeCommit": {"oid": "cbbe08ca448be46c34ffc3f8451618d3c7d93d8d"}, "closed": true, "closedAt": "2020-06-16T08:37:44Z", "author": {"login": "MioRtia"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpMEAkgH2gAyNDI4NDcxNDc2OjVkZGE2MmMyYjAzNjgyMjI5NWIyNjcwNzJjOWNmM2NhMDFiODMxZDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrw8AsgH2gAyNDI4NDcxNDc2OmY2NjcxYzc1MjVhZjlkZDA1ZjgyYTVmNmJkMzc5YzY0ZTczOTVmOGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5dda62c2b036822295b267072c9cf3ca01b831d4", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/5dda62c2b036822295b267072c9cf3ca01b831d4", "committedDate": "2020-06-08T08:20:13Z", "message": "Refactoring getLines(), getLineStream(), getDanglingLines(), getDanglingLineStream() in Merging View\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\ntmp\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5107677b14c4bce8998271e9de491a06a936a140", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/5107677b14c4bce8998271e9de491a06a936a140", "committedDate": "2020-06-05T14:03:14Z", "message": "Refactoring getLines(), getLineStream(), getDanglingLines(), getDanglingLineStream() in Merging View\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "5dda62c2b036822295b267072c9cf3ca01b831d4", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/5dda62c2b036822295b267072c9cf3ca01b831d4", "committedDate": "2020-06-08T08:20:13Z", "message": "Refactoring getLines(), getLineStream(), getDanglingLines(), getDanglingLineStream() in Merging View\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\ntmp\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3OTc1Mzkz", "url": "https://github.com/powsybl/powsybl-core/pull/1335#pullrequestreview-427975393", "createdAt": "2020-06-10T11:52:11Z", "commit": {"oid": "5dda62c2b036822295b267072c9cf3ca01b831d4"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMTo1MjoxMVrOGhxQ9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMTo1Mjo1OFrOGhxSew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA2MzM1MA==", "bodyText": "Is it the optimize way to implement this? Could we simply sum the lineCount of the underlying networks and add the number of mergedLine? I don't know if it's really better, but it avoids to iterate over all the lines", "url": "https://github.com/powsybl/powsybl-core/pull/1335#discussion_r438063350", "createdAt": "2020-06-10T11:52:11Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-mergingview/src/main/java/com/powsybl/iidm/mergingview/MergingView.java", "diffHunk": "@@ -693,17 +693,17 @@ public LineAdder newLine() {\n \n     @Override\n     public Iterable<Line> getLines() {\n-        return Collections.unmodifiableCollection(index.getLines());\n+        return index.getLines();\n     }\n \n     @Override\n     public Stream<Line> getLineStream() {\n-        return index.getLines().stream();\n+        return index.getLineStream();\n     }\n \n     @Override\n     public int getLineCount() {\n-        return index.getLines().size();\n+        return (int) index.getLineStream().count();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5dda62c2b036822295b267072c9cf3ca01b831d4"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA2MzczOQ==", "bodyText": "Same kind of remark: we could sum the danglingLine count, avec remove 2 times the mergedLine. (1 merged Line = 2 danglingLine).", "url": "https://github.com/powsybl/powsybl-core/pull/1335#discussion_r438063739", "createdAt": "2020-06-10T11:52:58Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-mergingview/src/main/java/com/powsybl/iidm/mergingview/MergingView.java", "diffHunk": "@@ -714,17 +714,17 @@ public Line getLine(final String id) {\n     // DanglingLines\n     @Override\n     public Iterable<DanglingLine> getDanglingLines() {\n-        return Collections.unmodifiableCollection(index.getDanglingLines());\n+        return index.getDanglingLines();\n     }\n \n     @Override\n     public Stream<DanglingLine> getDanglingLineStream() {\n-        return index.getDanglingLines().stream();\n+        return index.getDanglingLineStream();\n     }\n \n     @Override\n     public int getDanglingLineCount() {\n-        return index.getDanglingLines().size();\n+        return (int) index.getDanglingLineStream().count();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5dda62c2b036822295b267072c9cf3ca01b831d4"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3OTc3MDE4", "url": "https://github.com/powsybl/powsybl-core/pull/1335#pullrequestreview-427977018", "createdAt": "2020-06-10T11:54:39Z", "commit": {"oid": "5dda62c2b036822295b267072c9cf3ca01b831d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3OTc3NTUz", "url": "https://github.com/powsybl/powsybl-core/pull/1335#pullrequestreview-427977553", "createdAt": "2020-06-10T11:55:29Z", "commit": {"oid": "5dda62c2b036822295b267072c9cf3ca01b831d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6671c7525af9dd05f82a5f6bd379c64e7395f8e", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/f6671c7525af9dd05f82a5f6bd379c64e7395f8e", "committedDate": "2020-06-16T08:25:49Z", "message": "Optimize getLineCount and getDanglingLineCount of MergingView\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4309, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}