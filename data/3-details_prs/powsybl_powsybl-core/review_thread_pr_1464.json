{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyMDE5NDI5", "number": 1464, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwOTowMDo0M1rOEhk8Ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwODowNzowOFrOEiAB_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzNjQzNjgyOnYy", "diffSide": "RIGHT", "path": "cgmes/cgmes-conversion/src/test/java/com/powsybl/cgmes/conversion/extensions/CIMCharacteristicsTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwOTowMDo0M1rOHO9vkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwOTowMDo0M1rOHO9vkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQ1MzcxMg==", "bodyText": "A drawback of using here the expected exception annotation is that it doesn't ensure that the exception is thrown by the call which you expect will throw the exception (if create() throws a PowsyblException the test remains passed)", "url": "https://github.com/powsybl/powsybl-core/pull/1464#discussion_r485453712", "createdAt": "2020-09-09T09:00:43Z", "author": {"login": "flo-dup"}, "path": "cgmes/cgmes-conversion/src/test/java/com/powsybl/cgmes/conversion/extensions/CIMCharacteristicsTest.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.cgmes.conversion.extensions;\n+\n+import com.powsybl.cgmes.conversion.elements.CgmesTopologyKind;\n+import com.powsybl.commons.PowsyblException;\n+import com.powsybl.iidm.network.Network;\n+import com.powsybl.iidm.network.test.EurostagTutorialExample1Factory;\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+\n+/**\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+public class CIMCharacteristicsTest {\n+\n+    @Test\n+    public void test() {\n+        Network network = EurostagTutorialExample1Factory.create();\n+        network.newExtension(CIMCharacteristicsAdder.class)\n+                .setTopologyKind(CgmesTopologyKind.NODE_BREAKER)\n+                .setCimVersion(16)\n+                .add();\n+        CIMCharacteristics extension = network.getExtension(CIMCharacteristics.class);\n+        assertNotNull(extension);\n+        assertEquals(CgmesTopologyKind.NODE_BREAKER, extension.getTopologyKind());\n+        assertEquals(16, extension.getCimVersion());\n+    }\n+\n+    @Test(expected = PowsyblException.class)\n+    public void invalid() {\n+        EurostagTutorialExample1Factory.create().newExtension(CIMCharacteristicsAdder.class).add();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "938fb21ff62e384e0862d43fc8462be4025c5c67"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MDg2MjIzOnYy", "diffSide": "RIGHT", "path": "cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/extensions/CIMCharacteristics.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwODowMzoyNlrOHPn3pA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNDowODo0NlrOHP15mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE0MzkwOA==", "bodyText": "I think that you should call your extension it CimCharacteristics. For CGMES, we in general choose Cgmes instead of CGMES. What do you think ?", "url": "https://github.com/powsybl/powsybl-core/pull/1464#discussion_r486143908", "createdAt": "2020-09-10T08:03:26Z", "author": {"login": "annetill"}, "path": "cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/extensions/CIMCharacteristics.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.cgmes.conversion.extensions;\n+\n+import com.powsybl.cgmes.conversion.elements.CgmesTopologyKind;\n+import com.powsybl.commons.extensions.Extension;\n+import com.powsybl.iidm.network.Network;\n+\n+/**\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+public interface CIMCharacteristics extends Extension<Network> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "938fb21ff62e384e0862d43fc8462be4025c5c67"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM3Mzc4Nw==", "bodyText": "You're right, I will change it", "url": "https://github.com/powsybl/powsybl-core/pull/1464#discussion_r486373787", "createdAt": "2020-09-10T14:08:46Z", "author": {"login": "miovd"}, "path": "cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/extensions/CIMCharacteristics.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.cgmes.conversion.extensions;\n+\n+import com.powsybl.cgmes.conversion.elements.CgmesTopologyKind;\n+import com.powsybl.commons.extensions.Extension;\n+import com.powsybl.iidm.network.Network;\n+\n+/**\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+public interface CIMCharacteristics extends Extension<Network> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE0MzkwOA=="}, "originalCommit": {"oid": "938fb21ff62e384e0862d43fc8462be4025c5c67"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MDg3NTUxOnYy", "diffSide": "RIGHT", "path": "cgmes/cgmes-conversion/src/test/resources/extensions/eurostag_cim_characteristics.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwODowNzowOFrOHPn_6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNDowODowMlrOHP13fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE0NjAyNA==", "bodyText": "The id is the id of what ?", "url": "https://github.com/powsybl/powsybl-core/pull/1464#discussion_r486146024", "createdAt": "2020-09-10T08:07:08Z", "author": {"login": "annetill"}, "path": "cgmes/cgmes-conversion/src/test/resources/extensions/eurostag_cim_characteristics.xml", "diffHunk": "@@ -0,0 +1,45 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<iidm:network xmlns:iidm=\"http://www.powsybl.org/schema/iidm/1_4\" xmlns:cc=\"http://www.powsybl.org/schema/iidm/ext/cim_characteristics/1_0\" id=\"sim1\" caseDate=\"2020-09-08T14:28:13.738+02:00\" forecastDistance=\"0\" sourceFormat=\"test\">\n+    <iidm:substation id=\"P1\" country=\"FR\" tso=\"RTE\" geographicalTags=\"A\">\n+        <iidm:voltageLevel id=\"VLGEN\" nominalV=\"24.0\" topologyKind=\"BUS_BREAKER\">\n+            <iidm:busBreakerTopology>\n+                <iidm:bus id=\"NGEN\"/>\n+            </iidm:busBreakerTopology>\n+            <iidm:generator id=\"GEN\" energySource=\"OTHER\" minP=\"-9999.99\" maxP=\"9999.99\" voltageRegulatorOn=\"true\" targetP=\"607.0\" targetV=\"24.5\" targetQ=\"301.0\" bus=\"NGEN\" connectableBus=\"NGEN\">\n+                <iidm:minMaxReactiveLimits minQ=\"-9999.99\" maxQ=\"9999.99\"/>\n+            </iidm:generator>\n+        </iidm:voltageLevel>\n+        <iidm:voltageLevel id=\"VLHV1\" nominalV=\"380.0\" topologyKind=\"BUS_BREAKER\">\n+            <iidm:busBreakerTopology>\n+                <iidm:bus id=\"NHV1\"/>\n+            </iidm:busBreakerTopology>\n+        </iidm:voltageLevel>\n+        <iidm:twoWindingsTransformer id=\"NGEN_NHV1\" r=\"0.26658461538461536\" x=\"11.104492831516762\" g=\"0.0\" b=\"0.0\" ratedU1=\"24.0\" ratedU2=\"400.0\" bus1=\"NGEN\" connectableBus1=\"NGEN\" voltageLevelId1=\"VLGEN\" bus2=\"NHV1\" connectableBus2=\"NHV1\" voltageLevelId2=\"VLHV1\"/>\n+    </iidm:substation>\n+    <iidm:substation id=\"P2\" country=\"FR\" tso=\"RTE\" geographicalTags=\"B\">\n+        <iidm:voltageLevel id=\"VLHV2\" nominalV=\"380.0\" topologyKind=\"BUS_BREAKER\">\n+            <iidm:busBreakerTopology>\n+                <iidm:bus id=\"NHV2\"/>\n+            </iidm:busBreakerTopology>\n+        </iidm:voltageLevel>\n+        <iidm:voltageLevel id=\"VLLOAD\" nominalV=\"150.0\" topologyKind=\"BUS_BREAKER\">\n+            <iidm:busBreakerTopology>\n+                <iidm:bus id=\"NLOAD\"/>\n+            </iidm:busBreakerTopology>\n+            <iidm:load id=\"LOAD\" loadType=\"UNDEFINED\" p0=\"600.0\" q0=\"200.0\" bus=\"NLOAD\" connectableBus=\"NLOAD\"/>\n+        </iidm:voltageLevel>\n+        <iidm:twoWindingsTransformer id=\"NHV2_NLOAD\" r=\"0.04724999999999999\" x=\"4.049724365620455\" g=\"0.0\" b=\"0.0\" ratedU1=\"400.0\" ratedU2=\"158.0\" bus1=\"NHV2\" connectableBus1=\"NHV2\" voltageLevelId1=\"VLHV2\" bus2=\"NLOAD\" connectableBus2=\"NLOAD\" voltageLevelId2=\"VLLOAD\">\n+            <iidm:ratioTapChanger lowTapPosition=\"0\" tapPosition=\"1\" targetDeadband=\"0.0\" loadTapChangingCapabilities=\"true\" regulating=\"true\" targetV=\"158.0\">\n+                <iidm:terminalRef id=\"NHV2_NLOAD\" side=\"TWO\"/>\n+                <iidm:step r=\"0.0\" x=\"0.0\" g=\"0.0\" b=\"0.0\" rho=\"0.8505666905244191\"/>\n+                <iidm:step r=\"0.0\" x=\"0.0\" g=\"0.0\" b=\"0.0\" rho=\"1.0006666666666666\"/>\n+                <iidm:step r=\"0.0\" x=\"0.0\" g=\"0.0\" b=\"0.0\" rho=\"1.150766642808914\"/>\n+            </iidm:ratioTapChanger>\n+        </iidm:twoWindingsTransformer>\n+    </iidm:substation>\n+    <iidm:line id=\"NHV1_NHV2_1\" r=\"3.0\" x=\"33.0\" g1=\"0.0\" b1=\"1.93E-4\" g2=\"0.0\" b2=\"1.93E-4\" bus1=\"NHV1\" connectableBus1=\"NHV1\" voltageLevelId1=\"VLHV1\" bus2=\"NHV2\" connectableBus2=\"NHV2\" voltageLevelId2=\"VLHV2\"/>\n+    <iidm:line id=\"NHV1_NHV2_2\" r=\"3.0\" x=\"33.0\" g1=\"0.0\" b1=\"1.93E-4\" g2=\"0.0\" b2=\"1.93E-4\" bus1=\"NHV1\" connectableBus1=\"NHV1\" voltageLevelId1=\"VLHV1\" bus2=\"NHV2\" connectableBus2=\"NHV2\" voltageLevelId2=\"VLHV2\"/>\n+    <iidm:extension id=\"sim1\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "938fb21ff62e384e0862d43fc8462be4025c5c67"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM3MzI0Ng==", "bodyText": "Of the network!", "url": "https://github.com/powsybl/powsybl-core/pull/1464#discussion_r486373246", "createdAt": "2020-09-10T14:08:02Z", "author": {"login": "miovd"}, "path": "cgmes/cgmes-conversion/src/test/resources/extensions/eurostag_cim_characteristics.xml", "diffHunk": "@@ -0,0 +1,45 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<iidm:network xmlns:iidm=\"http://www.powsybl.org/schema/iidm/1_4\" xmlns:cc=\"http://www.powsybl.org/schema/iidm/ext/cim_characteristics/1_0\" id=\"sim1\" caseDate=\"2020-09-08T14:28:13.738+02:00\" forecastDistance=\"0\" sourceFormat=\"test\">\n+    <iidm:substation id=\"P1\" country=\"FR\" tso=\"RTE\" geographicalTags=\"A\">\n+        <iidm:voltageLevel id=\"VLGEN\" nominalV=\"24.0\" topologyKind=\"BUS_BREAKER\">\n+            <iidm:busBreakerTopology>\n+                <iidm:bus id=\"NGEN\"/>\n+            </iidm:busBreakerTopology>\n+            <iidm:generator id=\"GEN\" energySource=\"OTHER\" minP=\"-9999.99\" maxP=\"9999.99\" voltageRegulatorOn=\"true\" targetP=\"607.0\" targetV=\"24.5\" targetQ=\"301.0\" bus=\"NGEN\" connectableBus=\"NGEN\">\n+                <iidm:minMaxReactiveLimits minQ=\"-9999.99\" maxQ=\"9999.99\"/>\n+            </iidm:generator>\n+        </iidm:voltageLevel>\n+        <iidm:voltageLevel id=\"VLHV1\" nominalV=\"380.0\" topologyKind=\"BUS_BREAKER\">\n+            <iidm:busBreakerTopology>\n+                <iidm:bus id=\"NHV1\"/>\n+            </iidm:busBreakerTopology>\n+        </iidm:voltageLevel>\n+        <iidm:twoWindingsTransformer id=\"NGEN_NHV1\" r=\"0.26658461538461536\" x=\"11.104492831516762\" g=\"0.0\" b=\"0.0\" ratedU1=\"24.0\" ratedU2=\"400.0\" bus1=\"NGEN\" connectableBus1=\"NGEN\" voltageLevelId1=\"VLGEN\" bus2=\"NHV1\" connectableBus2=\"NHV1\" voltageLevelId2=\"VLHV1\"/>\n+    </iidm:substation>\n+    <iidm:substation id=\"P2\" country=\"FR\" tso=\"RTE\" geographicalTags=\"B\">\n+        <iidm:voltageLevel id=\"VLHV2\" nominalV=\"380.0\" topologyKind=\"BUS_BREAKER\">\n+            <iidm:busBreakerTopology>\n+                <iidm:bus id=\"NHV2\"/>\n+            </iidm:busBreakerTopology>\n+        </iidm:voltageLevel>\n+        <iidm:voltageLevel id=\"VLLOAD\" nominalV=\"150.0\" topologyKind=\"BUS_BREAKER\">\n+            <iidm:busBreakerTopology>\n+                <iidm:bus id=\"NLOAD\"/>\n+            </iidm:busBreakerTopology>\n+            <iidm:load id=\"LOAD\" loadType=\"UNDEFINED\" p0=\"600.0\" q0=\"200.0\" bus=\"NLOAD\" connectableBus=\"NLOAD\"/>\n+        </iidm:voltageLevel>\n+        <iidm:twoWindingsTransformer id=\"NHV2_NLOAD\" r=\"0.04724999999999999\" x=\"4.049724365620455\" g=\"0.0\" b=\"0.0\" ratedU1=\"400.0\" ratedU2=\"158.0\" bus1=\"NHV2\" connectableBus1=\"NHV2\" voltageLevelId1=\"VLHV2\" bus2=\"NLOAD\" connectableBus2=\"NLOAD\" voltageLevelId2=\"VLLOAD\">\n+            <iidm:ratioTapChanger lowTapPosition=\"0\" tapPosition=\"1\" targetDeadband=\"0.0\" loadTapChangingCapabilities=\"true\" regulating=\"true\" targetV=\"158.0\">\n+                <iidm:terminalRef id=\"NHV2_NLOAD\" side=\"TWO\"/>\n+                <iidm:step r=\"0.0\" x=\"0.0\" g=\"0.0\" b=\"0.0\" rho=\"0.8505666905244191\"/>\n+                <iidm:step r=\"0.0\" x=\"0.0\" g=\"0.0\" b=\"0.0\" rho=\"1.0006666666666666\"/>\n+                <iidm:step r=\"0.0\" x=\"0.0\" g=\"0.0\" b=\"0.0\" rho=\"1.150766642808914\"/>\n+            </iidm:ratioTapChanger>\n+        </iidm:twoWindingsTransformer>\n+    </iidm:substation>\n+    <iidm:line id=\"NHV1_NHV2_1\" r=\"3.0\" x=\"33.0\" g1=\"0.0\" b1=\"1.93E-4\" g2=\"0.0\" b2=\"1.93E-4\" bus1=\"NHV1\" connectableBus1=\"NHV1\" voltageLevelId1=\"VLHV1\" bus2=\"NHV2\" connectableBus2=\"NHV2\" voltageLevelId2=\"VLHV2\"/>\n+    <iidm:line id=\"NHV1_NHV2_2\" r=\"3.0\" x=\"33.0\" g1=\"0.0\" b1=\"1.93E-4\" g2=\"0.0\" b2=\"1.93E-4\" bus1=\"NHV1\" connectableBus1=\"NHV1\" voltageLevelId1=\"VLHV1\" bus2=\"NHV2\" connectableBus2=\"NHV2\" voltageLevelId2=\"VLHV2\"/>\n+    <iidm:extension id=\"sim1\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE0NjAyNA=="}, "originalCommit": {"oid": "938fb21ff62e384e0862d43fc8462be4025c5c67"}, "originalPosition": 42}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 31, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}