{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3NDQ5OTIy", "number": 1255, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwODoyOTo1MFrODvdGkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwODozNToxMVrODvdOjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMDg2NDgwOnYy", "diffSide": "RIGHT", "path": "cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/RegulatingControlMappingForGenerators.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwODoyOTo1MFrOGB4tGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwODoyOTo1MFrOGB4tGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDYzMDgxMA==", "bodyText": "I think we should use the new design here to be sure that the extension use the same NetworkFactory (persistent or transient) than the network", "url": "https://github.com/powsybl/powsybl-core/pull/1255#discussion_r404630810", "createdAt": "2020-04-07T08:29:50Z", "author": {"login": "mathbagu"}, "path": "cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/RegulatingControlMappingForGenerators.java", "diffHunk": "@@ -112,7 +113,7 @@ private boolean setRegulatingControlVoltage(String controlId,\n \n         // add qPercent as an extension\n         if (!Double.isNaN(qPercent)) {\n-            CoordinatedReactiveControl coordinatedReactiveControl = new CoordinatedReactiveControl(gen, qPercent);\n+            CoordinatedReactiveControl coordinatedReactiveControl = new CoordinatedReactiveControlImpl(gen, qPercent);\n             gen.addExtension(CoordinatedReactiveControl.class, coordinatedReactiveControl);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "142f4cc89a1427da037127cae8f809350766dfa8"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMDg2NzEwOnYy", "diffSide": "RIGHT", "path": "iidm/iidm-extensions/src/main/java/com/powsybl/iidm/network/extensions/CoordinatedReactiveControl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwODozMDoyM1rOGB4ugw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwODozMDoyM1rOGB4ugw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDYzMTE3MQ==", "bodyText": "I think we should add javadoc to this interface", "url": "https://github.com/powsybl/powsybl-core/pull/1255#discussion_r404631171", "createdAt": "2020-04-07T08:30:23Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-extensions/src/main/java/com/powsybl/iidm/network/extensions/CoordinatedReactiveControl.java", "diffHunk": "@@ -6,42 +6,20 @@\n  */\n package com.powsybl.iidm.network.extensions;\n \n-import com.powsybl.commons.PowsyblException;\n-import com.powsybl.commons.extensions.AbstractExtension;\n+import com.powsybl.commons.extensions.Extension;\n import com.powsybl.iidm.network.Generator;\n \n /**\n- * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ * @author Thomas ADAM <tadam at silicom.fr>\n  */\n-public class CoordinatedReactiveControl extends AbstractExtension<Generator> {\n-\n-    private double qPercent;\n-\n-    public CoordinatedReactiveControl(Generator generator, double qPercent) {\n-        super(generator);\n-        this.qPercent = checkQPercent(qPercent);\n-    }\n+public interface CoordinatedReactiveControl extends Extension<Generator> {\n \n     @Override\n-    public String getName() {\n+    default String getName() {\n         return \"coordinatedReactiveControl\";\n     }\n \n-    public double getQPercent() {\n-        return qPercent;\n-    }\n+    double getQPercent();\n \n-    public void setQPercent(double qPercent) {\n-        this.qPercent = checkQPercent(qPercent);\n-    }\n-\n-    private static double checkQPercent(double qPercent) {\n-        if (Double.isNaN(qPercent)) {\n-            throw new PowsyblException(\"Undefined value for qPercent\");\n-        }\n-        if (qPercent < 0.0 || qPercent > 100.0) {\n-            throw new PowsyblException(\"Unexpected value for qPercent: \" + qPercent);\n-        }\n-        return qPercent;\n-    }\n+    void setQPercent(double qPercent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "142f4cc89a1427da037127cae8f809350766dfa8"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMDg4NTI3OnYy", "diffSide": "RIGHT", "path": "iidm/iidm-extensions/src/test/java/com/powsybl/iidm/network/extensions/CoordinatedReactiveControlXmlTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwODozNToxMVrOGB46Ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwODozNToxMVrOGB46Ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDYzNDEzMQ==", "bodyText": "I think we should use the new design there", "url": "https://github.com/powsybl/powsybl-core/pull/1255#discussion_r404634131", "createdAt": "2020-04-07T08:35:11Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-extensions/src/test/java/com/powsybl/iidm/network/extensions/CoordinatedReactiveControlXmlTest.java", "diffHunk": "@@ -22,25 +22,30 @@\n /**\n  * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n  */\n-public class CoordinatedReactiveControlXmlSerializerTest extends AbstractConverterTest {\n+public class CoordinatedReactiveControlXmlTest extends AbstractConverterTest {\n \n     @Test\n     public void test() throws IOException {\n         Network network = EurostagTutorialExample1Factory.create();\n         network.setCaseDate(DateTime.parse(\"2019-05-27T12:17:02.504+02:00\"));\n         Generator gen = network.getGenerator(\"GEN\");\n+        assertNotNull(gen);\n \n-        CoordinatedReactiveControl control = new CoordinatedReactiveControl(gen, 100.0);\n-        gen.addExtension(CoordinatedReactiveControl.class, control);\n+        CoordinatedReactiveControl coordinatedReactiveControl = new CoordinatedReactiveControlImpl(gen, 100.0);\n+        gen.addExtension(CoordinatedReactiveControl.class, coordinatedReactiveControl);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "142f4cc89a1427da037127cae8f809350766dfa8"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 70, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}