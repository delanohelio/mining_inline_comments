{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3MTMzMDU4", "number": 1360, "title": "Current limits with missing permanent limit are not ignored anymore in CGMES import but fixed with permanent limit equal to lowest TATL", "bodyText": "Signed-off-by: RALAMBOTIANA MIORA miora.ralambotiana@rte-france.com\nPlease check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n\nWhat kind of change does this PR introduce? (Bug fix, feature, docs update, ...)\nBetween bug and feature...\nWhat is the current behavior? (You can also link to an open issue here)\nWhen a current limits set in CGMES does not contain a permanent limit, the whole set is ignored.\nWhat is the new behavior (if this is a feature change)?\nWhen a current limits set in CGMES does not contain a permanent limit, the permanent limit of the set is considered infinite.\nDoes this PR introduce a breaking change or deprecate an API? If yes, check the following:\nNo", "createdAt": "2020-06-19T14:29:18Z", "url": "https://github.com/powsybl/powsybl-core/pull/1360", "merged": true, "mergeCommit": {"oid": "7e15f828fbe5b436e75991608c3a8e552b2e6371"}, "closed": true, "closedAt": "2020-06-24T08:22:23Z", "author": {"login": "MioRtia"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsz7GuAH2gAyNDM3MTMzMDU4OjM2NzJhZjBhYzViMjUwNTdkZjk3ZjVjODdhYzc1M2ZmMjcxNWNiZDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuGm2mAH2gAyNDM3MTMzMDU4OjBhN2ZhNTI0OGM0NWJiOTczNzJhNDM1MTRkZmY5MDMwNWRjY2U4ZDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3672af0ac5b25057df97f5c87ac753ff2715cbd9", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/3672af0ac5b25057df97f5c87ac753ff2715cbd9", "committedDate": "2020-06-19T14:28:28Z", "message": "Current limits with mising permanent limit are not ignored anymore in CGMES import but fixed with infinite permanent limit\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NjYyOTIw", "url": "https://github.com/powsybl/powsybl-core/pull/1360#pullrequestreview-434662920", "createdAt": "2020-06-22T07:23:36Z", "commit": {"oid": "3672af0ac5b25057df97f5c87ac753ff2715cbd9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNzoyMzozNlrOGm0uYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNzoyMzozNlrOGm0uYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM2MjkxMg==", "bodyText": "The PATL seems to be mandatory in CGMES for all transformers and at both ends for a AC line. So I am not sure that it is safe just to replace them by infinite values. What do you think ?", "url": "https://github.com/powsybl/powsybl-core/pull/1360#discussion_r443362912", "createdAt": "2020-06-22T07:23:36Z", "author": {"login": "annetill"}, "path": "cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/CurrentLimitsMapping.java", "diffHunk": "@@ -32,10 +32,12 @@ public CurrentLimitsAdder getCurrentLimitsAdder(String id, Supplier<CurrentLimit\n     void addAll() {\n         for (Map.Entry<String, CurrentLimitsAdder> entry : adders.entrySet()) {\n             if (Double.isNaN(entry.getValue().getPermanentLimit())) {\n-                context.ignored(\"Operational Limit Set of \" + entry.getKey(), \"An operational limit set must at least contain one value for permanent limit.\");\n-            } else {\n-                entry.getValue().add();\n+                context.fixed(\"Operational Limit Set of \" + entry.getKey(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3672af0ac5b25057df97f5c87ac753ff2715cbd9"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NzUxMTU3", "url": "https://github.com/powsybl/powsybl-core/pull/1360#pullrequestreview-434751157", "createdAt": "2020-06-22T09:24:29Z", "commit": {"oid": "3672af0ac5b25057df97f5c87ac753ff2715cbd9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0Nzk1ODcy", "url": "https://github.com/powsybl/powsybl-core/pull/1360#pullrequestreview-434795872", "createdAt": "2020-06-22T10:26:35Z", "commit": {"oid": "3672af0ac5b25057df97f5c87ac753ff2715cbd9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxMDoyNjozNVrOGm61pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxMDoyNjozNVrOGm61pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQ2MzA3OA==", "bodyText": "Are you sure this is a good workaround, specially if the CurrentLimits has TATL: The PATL has to be lesser or equal to the minimal TATL. Putting MAX_VALUE whould lead to never have violations on that equipment. From my point of view, if there are no TATL, we should not add a CurrentLimit for this object, and if there are TATL, we should pick the lowest one.", "url": "https://github.com/powsybl/powsybl-core/pull/1360#discussion_r443463078", "createdAt": "2020-06-22T10:26:35Z", "author": {"login": "mathbagu"}, "path": "cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/CurrentLimitsMapping.java", "diffHunk": "@@ -32,10 +32,12 @@ public CurrentLimitsAdder getCurrentLimitsAdder(String id, Supplier<CurrentLimit\n     void addAll() {\n         for (Map.Entry<String, CurrentLimitsAdder> entry : adders.entrySet()) {\n             if (Double.isNaN(entry.getValue().getPermanentLimit())) {\n-                context.ignored(\"Operational Limit Set of \" + entry.getKey(), \"An operational limit set must at least contain one value for permanent limit.\");\n-            } else {\n-                entry.getValue().add();\n+                context.fixed(\"Operational Limit Set of \" + entry.getKey(),\n+                        \"An operational limit set without permanent limit is considered with infinite limit.\",\n+                        Double.NaN, Double.MAX_VALUE);\n+                entry.getValue().setPermanentLimit(Double.MAX_VALUE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3672af0ac5b25057df97f5c87ac753ff2715cbd9"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0Nzk2OTAy", "url": "https://github.com/powsybl/powsybl-core/pull/1360#pullrequestreview-434796902", "createdAt": "2020-06-22T10:28:02Z", "commit": {"oid": "3672af0ac5b25057df97f5c87ac753ff2715cbd9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f72fb9d2bac8b40f1b64ddb05bfccbe00313a3b9", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/f72fb9d2bac8b40f1b64ddb05bfccbe00313a3b9", "committedDate": "2020-06-23T09:35:42Z", "message": "Taking review into account: default PATL is not infinite but the lowest TATL available\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "353605de4044b221c8d3fa1f4d38868101681c1b", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/353605de4044b221c8d3fa1f4d38868101681c1b", "committedDate": "2020-06-23T14:27:05Z", "message": "Correction\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "845c6de922cb4a383c2e2d1a21694ae1becdfa8b", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/845c6de922cb4a383c2e2d1a21694ae1becdfa8b", "committedDate": "2020-06-23T14:43:59Z", "message": "Add test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1eca50f20dbc52be1928915a967ca637ab8382fb", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/1eca50f20dbc52be1928915a967ca637ab8382fb", "committedDate": "2020-06-23T14:42:28Z", "message": "Add test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "845c6de922cb4a383c2e2d1a21694ae1becdfa8b", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/845c6de922cb4a383c2e2d1a21694ae1becdfa8b", "committedDate": "2020-06-23T14:43:59Z", "message": "Add test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1ODYxMzk3", "url": "https://github.com/powsybl/powsybl-core/pull/1360#pullrequestreview-435861397", "createdAt": "2020-06-23T14:48:22Z", "commit": {"oid": "845c6de922cb4a383c2e2d1a21694ae1becdfa8b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a7fa5248c45bb97372a43514dff90305dcce8d8", "author": {"user": {"login": "mathbagu", "name": "Mathieu BAGUE"}}, "url": "https://github.com/powsybl/powsybl-core/commit/0a7fa5248c45bb97372a43514dff90305dcce8d8", "committedDate": "2020-06-23T14:48:28Z", "message": "Merge branch 'master' into cgmes_permanent_current_limits_missing"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4346, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}