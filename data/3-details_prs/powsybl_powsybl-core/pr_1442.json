{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3MjAxNDgz", "number": 1442, "title": "Add support of events", "bodyText": "Please check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nWhat kind of change does this PR introduce? (Bug fix, feature, docs update, ...)\nFeature\nWhat is the current behavior? (You can also link to an open issue here)\nThe dynamic-simulation does not support events file.\nWhat is the new behavior (if this is a feature change)?\nThe events file can be passed to the command, and loaded. Only groovy is supported yet.", "createdAt": "2020-08-13T07:26:20Z", "url": "https://github.com/powsybl/powsybl-core/pull/1442", "merged": true, "mergeCommit": {"oid": "b72bce7191bda774cab0456758bdd5f35bc50a42"}, "closed": true, "closedAt": "2020-08-18T09:10:50Z", "author": {"login": "marcosmc"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8JXrmgH2gAyNDY3MjAxNDgzOmU1NzRiYzM3NjViNDJhYmY1YjZkMGQ3ZjVkYTM4ZjIxYjc2NjZiZWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdADHtJAH2gAyNDY3MjAxNDgzOjhjZTdiYWRlOWI1OWZkYmNmYTYxNjYwZGQxMWQ5MmJlNjRmNTcxZjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e574bc3765b42abf5b6d0d7f5da38f21b7666beb", "author": {"user": {"login": "marcosmc", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/e574bc3765b42abf5b6d0d7f5da38f21b7666beb", "committedDate": "2020-08-06T05:56:33Z", "message": "Add support of events\n\nSigned-off-by: Marcos de Miguel <demiguelm@aia.es>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb688731ffa4837d823b1028784dc73bda7fff1e", "author": {"user": {"login": "marcosmc", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/fb688731ffa4837d823b1028784dc73bda7fff1e", "committedDate": "2020-08-13T09:53:54Z", "message": "fix coverage\n\nSigned-off-by: Marcos de Miguel <demiguelm@aia.es>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NjEwNzE3", "url": "https://github.com/powsybl/powsybl-core/pull/1442#pullrequestreview-466610717", "createdAt": "2020-08-13T09:49:54Z", "commit": {"oid": "e574bc3765b42abf5b6d0d7f5da38f21b7666beb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwOTo0OTo1NFrOHAEWpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMDowMTozOVrOHAExBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgzMzM4Mw==", "bodyText": "I would rename this class EventModel", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469833383", "createdAt": "2020-08-13T09:49:54Z", "author": {"login": "mathbagu"}, "path": "dynamic-simulation/dynamic-simulation-api/src/main/java/com/powsybl/dynamicsimulation/DynamicEventModel.java", "diffHunk": "@@ -0,0 +1,14 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+\n+package com.powsybl.dynamicsimulation;\n+\n+/**\n+ * @author Marcos de Miguel <demiguelm at aia.es>\n+ */\n+public interface DynamicEventModel {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e574bc3765b42abf5b6d0d7f5da38f21b7666beb"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgzMzYxOA==", "bodyText": "I would rename this class EventModelsSupplier", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469833618", "createdAt": "2020-08-13T09:50:18Z", "author": {"login": "mathbagu"}, "path": "dynamic-simulation/dynamic-simulation-api/src/main/java/com/powsybl/dynamicsimulation/DynamicEventModelsSupplier.java", "diffHunk": "@@ -0,0 +1,20 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+\n+package com.powsybl.dynamicsimulation;\n+\n+import java.util.Collections;\n+\n+/**\n+ * @author Marcos de Miguel <demiguelm at aia.es>\n+ */\n+public interface DynamicEventModelsSupplier extends SimulatorInputSupplier<DynamicEventModel> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e574bc3765b42abf5b6d0d7f5da38f21b7666beb"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgzNDExMA==", "bodyText": "I would rename this class EventModelGroovyExtension", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469834110", "createdAt": "2020-08-13T09:51:13Z", "author": {"login": "mathbagu"}, "path": "dynamic-simulation/dynamic-simulation-dsl/src/main/java/com/powsybl/dynamicsimulation/groovy/DynamicEventModelGroovyExtension.java", "diffHunk": "@@ -0,0 +1,16 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+\n+package com.powsybl.dynamicsimulation.groovy;\n+\n+import com.powsybl.dynamicsimulation.DynamicEventModel;\n+\n+/**\n+ * @author Marcos de Miguel <demiguelm at aia.es>\n+ */\n+public interface DynamicEventModelGroovyExtension extends GroovyExtension<DynamicEventModel> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e574bc3765b42abf5b6d0d7f5da38f21b7666beb"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgzOTk5MQ==", "bodyText": "Rename this constant DYNAMIC_MODELS_FILE", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469839991", "createdAt": "2020-08-13T10:01:24Z", "author": {"login": "mathbagu"}, "path": "dynamic-simulation/dynamic-simulation-tool/src/main/java/com/powsybl/dynamicsimulation/tool/DynamicSimulationTool.java", "diffHunk": "@@ -49,6 +52,7 @@\n \n     private static final String CASE_FILE = \"case-file\";\n     private static final String DYNAMIC_MODEL_FILE = \"dynamic-model-file\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e574bc3765b42abf5b6d0d7f5da38f21b7666beb"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg0MDEzMg==", "bodyText": "Rename this constant EVENT_MODELS_FILE, and the parameter event-models-file to be consistent", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469840132", "createdAt": "2020-08-13T10:01:39Z", "author": {"login": "mathbagu"}, "path": "dynamic-simulation/dynamic-simulation-tool/src/main/java/com/powsybl/dynamicsimulation/tool/DynamicSimulationTool.java", "diffHunk": "@@ -49,6 +52,7 @@\n \n     private static final String CASE_FILE = \"case-file\";\n     private static final String DYNAMIC_MODEL_FILE = \"dynamic-model-file\";\n+    private static final String DYNAMIC_EVENT_MODEL_FILE = \"events-file\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e574bc3765b42abf5b6d0d7f5da38f21b7666beb"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcfa72205d3de4f72eb1366a07b9bac662b2701c", "author": {"user": {"login": "marcosmc", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/dcfa72205d3de4f72eb1366a07b9bac662b2701c", "committedDate": "2020-08-13T10:07:36Z", "message": "Merge branch 'master' into EventsModel\n\nSigned-off-by: Marcos de Miguel <demiguelm@aia.es>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NjI1NTgz", "url": "https://github.com/powsybl/powsybl-core/pull/1442#pullrequestreview-466625583", "createdAt": "2020-08-13T10:11:12Z", "commit": {"oid": "dcfa72205d3de4f72eb1366a07b9bac662b2701c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMDoxMToxM1rOHAFFYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMDoxMToxM1rOHAFFYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg0NTM0NQ==", "bodyText": "@marcosmc could you also rename the variable DYNAMIC_MODEL_FILE into DYNAMIC_MODELS_FILE? I forgot to do it in my PR. Thanks.", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469845345", "createdAt": "2020-08-13T10:11:13Z", "author": {"login": "agnesLeroy"}, "path": "dynamic-simulation/dynamic-simulation-tool/src/main/java/com/powsybl/dynamicsimulation/tool/DynamicSimulationTool.java", "diffHunk": "@@ -49,6 +52,7 @@\n \n     private static final String CASE_FILE = \"case-file\";\n     private static final String DYNAMIC_MODEL_FILE = \"dynamic-models-file\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcfa72205d3de4f72eb1366a07b9bac662b2701c"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NjI2NTI0", "url": "https://github.com/powsybl/powsybl-core/pull/1442#pullrequestreview-466626524", "createdAt": "2020-08-13T10:12:40Z", "commit": {"oid": "dcfa72205d3de4f72eb1366a07b9bac662b2701c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMDoxMjo0MVrOHAFIVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMDoxMjo0MVrOHAFIVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg0NjEwMg==", "bodyText": "@marcosmc could you change also dydSupplier into dynamicModelsSupplier please?", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469846102", "createdAt": "2020-08-13T10:12:41Z", "author": {"login": "agnesLeroy"}, "path": "dynamic-simulation/dynamic-simulation-tool/src/main/java/com/powsybl/dynamicsimulation/tool/DynamicSimulationTool.java", "diffHunk": "@@ -149,7 +164,7 @@ public void run(CommandLine line, ToolRunningContext context) throws Exception {\n             JsonDynamicSimulationParameters.update(params, parametersFile);\n         }\n \n-        DynamicSimulationResult result = runner.run(network, dydSupplier, curvesSupplier, VariantManagerConstants.INITIAL_VARIANT_ID, context.getShortTimeExecutionComputationManager(), params);\n+        DynamicSimulationResult result = runner.run(network, dydSupplier, eventSupplier, curvesSupplier, VariantManagerConstants.INITIAL_VARIANT_ID, context.getShortTimeExecutionComputationManager(), params);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcfa72205d3de4f72eb1366a07b9bac662b2701c"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "446a57c2ba65edf11f3e841d3ceba2e6fc615fff", "author": {"user": {"login": "marcosmc", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/446a57c2ba65edf11f3e841d3ceba2e6fc615fff", "committedDate": "2020-08-13T10:32:56Z", "message": "fix review\n\nSigned-off-by: Marcos de Miguel <demiguelm@aia.es>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NjkzODI3", "url": "https://github.com/powsybl/powsybl-core/pull/1442#pullrequestreview-466693827", "createdAt": "2020-08-13T12:00:36Z", "commit": {"oid": "446a57c2ba65edf11f3e841d3ceba2e6fc615fff"}, "state": "COMMENTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMjowMDozNlrOHAIWcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMjowNjoyMFrOHAIiLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg5ODg2NQ==", "bodyText": "Please rename also dynamicEventModelsSupplier into eventModelsSupplier everywhere.", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469898865", "createdAt": "2020-08-13T12:00:36Z", "author": {"login": "agnesLeroy"}, "path": "dynamic-simulation/dynamic-simulation-api/src/main/java/com/powsybl/dynamicsimulation/DynamicSimulation.java", "diffHunk": "@@ -58,13 +70,21 @@ public Runner(DynamicSimulationProvider provider) {\n             return runAsync(network, dynamicModelsSupplier, DynamicSimulationParameters.load());\n         }\n \n-        public DynamicSimulationResult run(Network network, DynamicModelsSupplier dynamicModelsSupplier, CurvesSupplier curvesSupplier, String workingVariantId, ComputationManager computationManager,\n+        public DynamicSimulationResult run(Network network, DynamicModelsSupplier dynamicModelsSupplier, EventModelsSupplier dynamicEventModelsSupplier, CurvesSupplier curvesSupplier, String workingVariantId, ComputationManager computationManager,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "446a57c2ba65edf11f3e841d3ceba2e6fc615fff"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg5OTI4Ng==", "bodyText": "Please rename also dynamicEventModelsSupplier into eventModelsSupplier here.", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469899286", "createdAt": "2020-08-13T12:01:24Z", "author": {"login": "agnesLeroy"}, "path": "dynamic-simulation/dynamic-simulation-api/src/main/java/com/powsybl/dynamicsimulation/DynamicSimulationProvider.java", "diffHunk": "@@ -18,6 +18,7 @@\n  */\n public interface DynamicSimulationProvider extends Versionable, PlatformConfigNamedProvider {\n \n-    CompletableFuture<DynamicSimulationResult> run(Network network, DynamicModelsSupplier dynamicModelsSupplier, CurvesSupplier curvesSupplier, String workingVariantId, ComputationManager computationManager, DynamicSimulationParameters parameters);\n+    CompletableFuture<DynamicSimulationResult> run(Network network, DynamicModelsSupplier dynamicModelsSupplier, EventModelsSupplier dynamicEventModelsSupplier,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "446a57c2ba65edf11f3e841d3ceba2e6fc615fff"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg5OTUzNQ==", "bodyText": "Please rename also dynamicEventModelsSupplier into eventModelsSupplier here.", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469899535", "createdAt": "2020-08-13T12:01:52Z", "author": {"login": "agnesLeroy"}, "path": "dynamic-simulation/dynamic-simulation-api/src/test/java/com/powsybl/dynamicsimulation/AnotherDynamicSimulationProviderMock.java", "diffHunk": "@@ -27,8 +27,8 @@ public String getVersion() {\n     }\n \n     @Override\n-    public CompletableFuture<DynamicSimulationResult> run(Network network, DynamicModelsSupplier dynamicModelsSupplier, CurvesSupplier curvesSupplier,\n-        String workingVariantId, ComputationManager computationManager, DynamicSimulationParameters parameters) {\n+    public CompletableFuture<DynamicSimulationResult> run(Network network, DynamicModelsSupplier dynamicModelsSupplier, EventModelsSupplier dynamicEventModelsSupplier,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "446a57c2ba65edf11f3e841d3ceba2e6fc615fff"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg5OTYyMw==", "bodyText": "Please rename also dynamicEventModelsSupplier into eventModelsSupplier here.", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469899623", "createdAt": "2020-08-13T12:02:02Z", "author": {"login": "agnesLeroy"}, "path": "dynamic-simulation/dynamic-simulation-api/src/test/java/com/powsybl/dynamicsimulation/DynamicSimulationProviderMock.java", "diffHunk": "@@ -29,8 +29,8 @@ public String getVersion() {\n     }\n \n     @Override\n-    public CompletableFuture<DynamicSimulationResult> run(Network network, DynamicModelsSupplier dynamicModelsSupplier, CurvesSupplier curvesSupplier, String workingVariantId,\n-                                                          ComputationManager computationManager, DynamicSimulationParameters parameters) {\n+    public CompletableFuture<DynamicSimulationResult> run(Network network, DynamicModelsSupplier dynamicModelsSupplier, EventModelsSupplier dynamicEventModelsSupplier, CurvesSupplier curvesSupplier,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "446a57c2ba65edf11f3e841d3ceba2e6fc615fff"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkwMDEwOQ==", "bodyText": "Please rename also DummyDynamicEventModel* into DummyEventModel* (even in the file name).", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469900109", "createdAt": "2020-08-13T12:02:57Z", "author": {"login": "agnesLeroy"}, "path": "dynamic-simulation/dynamic-simulation-dsl/src/test/groovy/com/powsybl/dynamicsimulation/groovy/DummyDynamicEventModelGroovyExtension.groovy", "diffHunk": "@@ -0,0 +1,44 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.dynamicsimulation.groovy\n+\n+import java.util.function.Consumer\n+\n+import com.google.auto.service.AutoService\n+import com.powsybl.dsl.DslException\n+import com.powsybl.dynamicsimulation.EventModel\n+\n+/**\n+ * @author Marcos de Miguel <demiguelm at aia.es>\n+ */\n+@AutoService(EventModelGroovyExtension.class)\n+class DummyDynamicEventModelGroovyExtension implements EventModelGroovyExtension {\n+\n+    static class DummyDynamicEventModelSpec {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "446a57c2ba65edf11f3e841d3ceba2e6fc615fff"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkwMDMyOA==", "bodyText": "Same here, also for dynamicEventModelSpec -> eventModelSpec", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469900328", "createdAt": "2020-08-13T12:03:22Z", "author": {"login": "agnesLeroy"}, "path": "dynamic-simulation/dynamic-simulation-dsl/src/test/groovy/com/powsybl/dynamicsimulation/groovy/DummyDynamicEventModelGroovyExtension.groovy", "diffHunk": "@@ -0,0 +1,44 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.dynamicsimulation.groovy\n+\n+import java.util.function.Consumer\n+\n+import com.google.auto.service.AutoService\n+import com.powsybl.dsl.DslException\n+import com.powsybl.dynamicsimulation.EventModel\n+\n+/**\n+ * @author Marcos de Miguel <demiguelm at aia.es>\n+ */\n+@AutoService(EventModelGroovyExtension.class)\n+class DummyDynamicEventModelGroovyExtension implements EventModelGroovyExtension {\n+\n+    static class DummyDynamicEventModelSpec {\n+        String id\n+        \n+        void id(String id) {\n+            this.id = id\n+        }\n+    }\n+\n+    void load(Binding binding, Consumer<EventModel> consumer) {\n+        binding.dummyDynamicEventModel = { Closure<Void> closure ->\n+            def cloned = closure.clone()\n+\n+            DummyDynamicEventModelSpec dynamicEventModelSpec = new DummyDynamicEventModelSpec()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "446a57c2ba65edf11f3e841d3ceba2e6fc615fff"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkwMDk5MQ==", "bodyText": "Rename also this class -> GroovyEventModelSupplierTest", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469900991", "createdAt": "2020-08-13T12:04:38Z", "author": {"login": "agnesLeroy"}, "path": "dynamic-simulation/dynamic-simulation-dsl/src/test/java/com/powsybl/dynamicsimulation/groovy/GroovyDynamicEventModelSupplierTest.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+\n+package com.powsybl.dynamicsimulation.groovy;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+\n+import java.io.IOException;\n+import java.nio.file.FileSystem;\n+import java.nio.file.Files;\n+import java.util.List;\n+\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import com.google.common.jimfs.Configuration;\n+import com.google.common.jimfs.Jimfs;\n+import com.powsybl.dynamicsimulation.EventModel;\n+import com.powsybl.dynamicsimulation.EventModelsSupplier;\n+import com.powsybl.iidm.network.Network;\n+import com.powsybl.iidm.network.test.EurostagTutorialExample1Factory;\n+\n+/**\n+ * @author Marcos de Miguel <demiguelm at aia.es>\n+ */\n+public class GroovyDynamicEventModelSupplierTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "446a57c2ba65edf11f3e841d3ceba2e6fc615fff"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkwMTE0Mw==", "bodyText": "Rename also the file eventModels.groovy", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469901143", "createdAt": "2020-08-13T12:04:56Z", "author": {"login": "agnesLeroy"}, "path": "dynamic-simulation/dynamic-simulation-dsl/src/test/java/com/powsybl/dynamicsimulation/groovy/GroovyDynamicEventModelSupplierTest.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+\n+package com.powsybl.dynamicsimulation.groovy;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+\n+import java.io.IOException;\n+import java.nio.file.FileSystem;\n+import java.nio.file.Files;\n+import java.util.List;\n+\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import com.google.common.jimfs.Configuration;\n+import com.google.common.jimfs.Jimfs;\n+import com.powsybl.dynamicsimulation.EventModel;\n+import com.powsybl.dynamicsimulation.EventModelsSupplier;\n+import com.powsybl.iidm.network.Network;\n+import com.powsybl.iidm.network.test.EurostagTutorialExample1Factory;\n+\n+/**\n+ * @author Marcos de Miguel <demiguelm at aia.es>\n+ */\n+public class GroovyDynamicEventModelSupplierTest {\n+\n+    private FileSystem fileSystem;\n+\n+    @Before\n+    public void setup() throws IOException {\n+        fileSystem = Jimfs.newFileSystem(Configuration.unix());\n+\n+        Files.copy(getClass().getResourceAsStream(\"/dynamicEventModels.groovy\"), fileSystem.getPath(\"/dynamicEventModels.groovy\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "446a57c2ba65edf11f3e841d3ceba2e6fc615fff"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkwMTYwNw==", "bodyText": "Here also, the naming should be changed. You'll have\nDummyEventModel eventModel1 = (DummyEventModel) eventModels.get(0)", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469901607", "createdAt": "2020-08-13T12:05:51Z", "author": {"login": "agnesLeroy"}, "path": "dynamic-simulation/dynamic-simulation-dsl/src/test/java/com/powsybl/dynamicsimulation/groovy/GroovyDynamicEventModelSupplierTest.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+\n+package com.powsybl.dynamicsimulation.groovy;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+\n+import java.io.IOException;\n+import java.nio.file.FileSystem;\n+import java.nio.file.Files;\n+import java.util.List;\n+\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import com.google.common.jimfs.Configuration;\n+import com.google.common.jimfs.Jimfs;\n+import com.powsybl.dynamicsimulation.EventModel;\n+import com.powsybl.dynamicsimulation.EventModelsSupplier;\n+import com.powsybl.iidm.network.Network;\n+import com.powsybl.iidm.network.test.EurostagTutorialExample1Factory;\n+\n+/**\n+ * @author Marcos de Miguel <demiguelm at aia.es>\n+ */\n+public class GroovyDynamicEventModelSupplierTest {\n+\n+    private FileSystem fileSystem;\n+\n+    @Before\n+    public void setup() throws IOException {\n+        fileSystem = Jimfs.newFileSystem(Configuration.unix());\n+\n+        Files.copy(getClass().getResourceAsStream(\"/dynamicEventModels.groovy\"), fileSystem.getPath(\"/dynamicEventModels.groovy\"));\n+    }\n+\n+    @After\n+    public void tearDown() throws IOException {\n+        fileSystem.close();\n+    }\n+\n+    @Test\n+    public void test() {\n+        Network network = EurostagTutorialExample1Factory.create();\n+\n+        List<EventModelGroovyExtension> extensions = GroovyExtension.find(EventModelGroovyExtension.class, \"dummy\");\n+        assertEquals(1, extensions.size());\n+        assertTrue(extensions.get(0) instanceof EventModelGroovyExtension);\n+\n+        EventModelsSupplier supplier = new GroovyDynamicEventModelsSupplier(fileSystem.getPath(\"/dynamicEventModels.groovy\"), extensions);\n+\n+        List<EventModel> dynamicEventModels = supplier.get(network);\n+        assertEquals(2, dynamicEventModels.size());\n+\n+        assertTrue(dynamicEventModels.get(0) instanceof DummyEventModel);\n+        DummyEventModel dynamicModel1 = (DummyEventModel) dynamicEventModels.get(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "446a57c2ba65edf11f3e841d3ceba2e6fc615fff"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkwMTg2OQ==", "bodyText": "Here it'll be dummyEventModel", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469901869", "createdAt": "2020-08-13T12:06:20Z", "author": {"login": "agnesLeroy"}, "path": "dynamic-simulation/dynamic-simulation-dsl/src/test/resources/dynamicEventModels.groovy", "diffHunk": "@@ -0,0 +1,18 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+\n+import com.powsybl.iidm.network.Line\n+import org.slf4j.Logger\n+import org.slf4j.LoggerFactory\n+\n+Logger logger = LoggerFactory.getLogger(\"com.powsybl.dynamicsimulation.groovy.GroovyDynamicEventModelSupplier\")\n+\n+for (Line line : network.lines) {\n+    dummyDynamicEventModel {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "446a57c2ba65edf11f3e841d3ceba2e6fc615fff"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebcaef120f7f4d239d8850f0e8fa8b4f465bd2a9", "author": {"user": {"login": "marcosmc", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/ebcaef120f7f4d239d8850f0e8fa8b4f465bd2a9", "committedDate": "2020-08-13T12:28:05Z", "message": "fix naming\n\nSigned-off-by: Marcos de Miguel <demiguelm@aia.es>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NzE0NjM3", "url": "https://github.com/powsybl/powsybl-core/pull/1442#pullrequestreview-466714637", "createdAt": "2020-08-13T12:31:01Z", "commit": {"oid": "ebcaef120f7f4d239d8850f0e8fa8b4f465bd2a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMjozMTowMVrOHAJXTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMjozMTowMVrOHAJXTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkxNTQ2OA==", "bodyText": "Here dynamicModel1 and dynamicModel2 should be eventModel1 and eventModel2", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469915468", "createdAt": "2020-08-13T12:31:01Z", "author": {"login": "agnesLeroy"}, "path": "dynamic-simulation/dynamic-simulation-dsl/src/test/java/com/powsybl/dynamicsimulation/groovy/GroovyEventModelSupplierTest.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+\n+package com.powsybl.dynamicsimulation.groovy;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+\n+import java.io.IOException;\n+import java.nio.file.FileSystem;\n+import java.nio.file.Files;\n+import java.util.List;\n+\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import com.google.common.jimfs.Configuration;\n+import com.google.common.jimfs.Jimfs;\n+import com.powsybl.dynamicsimulation.EventModel;\n+import com.powsybl.dynamicsimulation.EventModelsSupplier;\n+import com.powsybl.iidm.network.Network;\n+import com.powsybl.iidm.network.test.EurostagTutorialExample1Factory;\n+\n+/**\n+ * @author Marcos de Miguel <demiguelm at aia.es>\n+ */\n+public class GroovyEventModelSupplierTest {\n+\n+    private FileSystem fileSystem;\n+\n+    @Before\n+    public void setup() throws IOException {\n+        fileSystem = Jimfs.newFileSystem(Configuration.unix());\n+\n+        Files.copy(getClass().getResourceAsStream(\"/eventModels.groovy\"), fileSystem.getPath(\"/eventModels.groovy\"));\n+    }\n+\n+    @After\n+    public void tearDown() throws IOException {\n+        fileSystem.close();\n+    }\n+\n+    @Test\n+    public void test() {\n+        Network network = EurostagTutorialExample1Factory.create();\n+\n+        List<EventModelGroovyExtension> extensions = GroovyExtension.find(EventModelGroovyExtension.class, \"dummy\");\n+        assertEquals(1, extensions.size());\n+        assertTrue(extensions.get(0) instanceof EventModelGroovyExtension);\n+\n+        EventModelsSupplier supplier = new GroovyEventModelsSupplier(fileSystem.getPath(\"/eventModels.groovy\"), extensions);\n+\n+        List<EventModel> eventModels = supplier.get(network);\n+        assertEquals(2, eventModels.size());\n+\n+        assertTrue(eventModels.get(0) instanceof DummyEventModel);\n+        DummyEventModel dynamicModel1 = (DummyEventModel) eventModels.get(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebcaef120f7f4d239d8850f0e8fa8b4f465bd2a9"}, "originalPosition": 62}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NzE2OTkx", "url": "https://github.com/powsybl/powsybl-core/pull/1442#pullrequestreview-466716991", "createdAt": "2020-08-13T12:34:18Z", "commit": {"oid": "ebcaef120f7f4d239d8850f0e8fa8b4f465bd2a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMjozNDoxOFrOHAJeKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMjozNDoxOFrOHAJeKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkxNzIyNw==", "bodyText": "Hum, I'm also thinking createMappingSupplier should be renamed into createDynamicModelsSupplier to be consistent", "url": "https://github.com/powsybl/powsybl-core/pull/1442#discussion_r469917227", "createdAt": "2020-08-13T12:34:18Z", "author": {"login": "agnesLeroy"}, "path": "dynamic-simulation/dynamic-simulation-tool/src/main/java/com/powsybl/dynamicsimulation/tool/DynamicSimulationTool.java", "diffHunk": "@@ -134,8 +143,14 @@ public void run(CommandLine line, ToolRunningContext context) throws Exception {\n \n         DynamicSimulation.Runner runner = DynamicSimulation.find();\n \n-        Path dydFile = context.getFileSystem().getPath(line.getOptionValue(DYNAMIC_MODEL_FILE));\n-        DynamicModelsSupplier dydSupplier = createMappingSupplier(dydFile, runner.getName());\n+        Path dydFile = context.getFileSystem().getPath(line.getOptionValue(DYNAMIC_MODELS_FILE));\n+        DynamicModelsSupplier dynamicModelsSupplier = createMappingSupplier(dydFile, runner.getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebcaef120f7f4d239d8850f0e8fa8b4f465bd2a9"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d39418dd25588d52bd60c87b46ec25a8870d07be", "author": {"user": {"login": "marcosmc", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/d39418dd25588d52bd60c87b46ec25a8870d07be", "committedDate": "2020-08-13T12:35:51Z", "message": "fix test\n\nSigned-off-by: Marcos de Miguel <demiguelm@aia.es>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91761670f19c03149c5356bc536adbf46a2f255b", "author": {"user": {"login": "marcosmc", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/91761670f19c03149c5356bc536adbf46a2f255b", "committedDate": "2020-08-13T12:41:23Z", "message": "fix methods naming\n\nSigned-off-by: Marcos de Miguel <demiguelm@aia.es>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NzI1MjQ4", "url": "https://github.com/powsybl/powsybl-core/pull/1442#pullrequestreview-466725248", "createdAt": "2020-08-13T12:45:39Z", "commit": {"oid": "91761670f19c03149c5356bc536adbf46a2f255b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ce7bade9b59fdbcfa61660dd11d92be64f571f9", "author": {"user": {"login": "mathbagu", "name": "Mathieu BAGUE"}}, "url": "https://github.com/powsybl/powsybl-core/commit/8ce7bade9b59fdbcfa61660dd11d92be64f571f9", "committedDate": "2020-08-18T08:55:22Z", "message": "Merge branch 'master' into EventsModel"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4137, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}