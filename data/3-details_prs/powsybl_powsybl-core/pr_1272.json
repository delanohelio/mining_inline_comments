{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzMDM4NzMz", "number": 1272, "title": "Issue 1206 two windings transformer phase angle clock", "bodyText": "Please check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nDoes this PR already have an issue describing the problem ? If so, link to this issue using '#XXX' and skip the rest\nfix #1206 for TwoWindingstransformers", "createdAt": "2020-04-14T08:19:52Z", "url": "https://github.com/powsybl/powsybl-core/pull/1272", "merged": true, "mergeCommit": {"oid": "8545f97843ce1f22b7337ba2ae5d229cd1f293e6"}, "closed": true, "closedAt": "2020-05-05T13:37:17Z", "author": {"login": "jlabous"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWRBFNgH2gAyNDAzMDM4NzMzOjA1OGRjZmIyZTE2YzNlYzkzNjNiYTgyODhlMTY4ZGJmNDJiZGFiYmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABceToz7gH2gAyNDAzMDM4NzMzOjIwYTJjZmI3MGY3MThkYjk2YTQ0MTRmMTVlNzViMDEzMzkyNWU2N2I=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "058dcfb2e16c3ec9363ba8288e168dbf42bdabbe", "author": {"user": {"login": "jlabous", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/058dcfb2e16c3ec9363ba8288e168dbf42bdabbe", "committedDate": "2020-04-10T13:21:59Z", "message": "implement new extension API on TwoWindingsTransformerPhaseAngleClock\n\nSigned-off-by: J\u00e9r\u00e9my LABOUS <jlabous@silicom.fr>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66f1bef11d9619fca335e4b3ebc8b0381f0ce976", "author": {"user": {"login": "jlabous", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/66f1bef11d9619fca335e4b3ebc8b0381f0ce976", "committedDate": "2020-04-14T08:15:22Z", "message": "fix ambiguous reference in java 8\n\nSigned-off-by: J\u00e9r\u00e9my LABOUS <jlabous@silicom.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTE4NzAy", "url": "https://github.com/powsybl/powsybl-core/pull/1272#pullrequestreview-392918702", "createdAt": "2020-04-14T13:20:31Z", "commit": {"oid": "66f1bef11d9619fca335e4b3ebc8b0381f0ce976"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyMDozMlrOGFOR9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNDozODoyNlrOGFR2lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEzMDAzNg==", "bodyText": "Not necessary to specify type here", "url": "https://github.com/powsybl/powsybl-core/pull/1272#discussion_r408130036", "createdAt": "2020-04-14T13:20:32Z", "author": {"login": "MioRtia"}, "path": "cgmes/cgmes-conversion/src/test/java/com/powsybl/cgmes/conversion/test/network/compare/Comparison.java", "diffHunk": "@@ -448,7 +448,7 @@ private void compareTwoWindingTransformers(TwoWindingsTransformer expected,\n \n         compareRatioTapChanger(expected.getRatioTapChanger(), actual.getRatioTapChanger());\n         comparePhaseTapChanger(expected.getPhaseTapChanger(), actual.getPhaseTapChanger());\n-        comparePhaseAngleClock(expected.getExtension(TwoWindingsTransformerPhaseAngleClock.class), actual.getExtension(TwoWindingsTransformerPhaseAngleClock.class));\n+        comparePhaseAngleClock(expected.<TwoWindingsTransformerPhaseAngleClock>getExtension(TwoWindingsTransformerPhaseAngleClock.class), actual.<TwoWindingsTransformerPhaseAngleClock>getExtension(TwoWindingsTransformerPhaseAngleClock.class));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66f1bef11d9619fca335e4b3ebc8b0381f0ce976"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEzMDA3MA==", "bodyText": "Not necessary to specify type here", "url": "https://github.com/powsybl/powsybl-core/pull/1272#discussion_r408130070", "createdAt": "2020-04-14T13:20:36Z", "author": {"login": "MioRtia"}, "path": "cgmes/cgmes-conversion/src/test/java/com/powsybl/cgmes/conversion/test/network/compare/Comparison.java", "diffHunk": "@@ -470,7 +470,7 @@ private void compareThreeWindingsTransformers(ThreeWindingsTransformer expected,\n         compareLeg(expected.getLeg1(), actual.getLeg1(), expected, actual);\n         compareLeg(expected.getLeg2(), actual.getLeg2(), expected, actual);\n         compareLeg(expected.getLeg3(), actual.getLeg3(), expected, actual);\n-        comparePhaseAngleClock(expected.getExtension(ThreeWindingsTransformerPhaseAngleClock.class), actual.getExtension(ThreeWindingsTransformerPhaseAngleClock.class));\n+        comparePhaseAngleClock(expected.<ThreeWindingsTransformerPhaseAngleClock>getExtension(ThreeWindingsTransformerPhaseAngleClock.class), actual.<ThreeWindingsTransformerPhaseAngleClock>getExtension(ThreeWindingsTransformerPhaseAngleClock.class));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66f1bef11d9619fca335e4b3ebc8b0381f0ce976"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEzOTM3Mw==", "bodyText": "Maybe use a ValidationException:\nthrow new ValidationException(getExtendable(), \"Unexpected value for phaseAngleClock: \" + phaseAngleClock);\nFor the method to remain static, the Extendable can be passed in parameters.", "url": "https://github.com/powsybl/powsybl-core/pull/1272#discussion_r408139373", "createdAt": "2020-04-14T13:33:49Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-extensions/src/main/java/com/powsybl/iidm/network/extensions/TwoWindingsTransformerPhaseAngleClockImpl.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/**\n+ * Copyright (c) 2019, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.iidm.network.extensions;\n+\n+import com.powsybl.commons.PowsyblException;\n+import com.powsybl.commons.extensions.AbstractExtension;\n+import com.powsybl.iidm.network.TwoWindingsTransformer;\n+\n+/**\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public class TwoWindingsTransformerPhaseAngleClockImpl extends AbstractExtension<TwoWindingsTransformer> implements TwoWindingsTransformerPhaseAngleClock {\n+\n+    private int phaseAngleClock;\n+\n+    public TwoWindingsTransformerPhaseAngleClockImpl(TwoWindingsTransformer twt, int phaseAngleClock) {\n+        super(twt);\n+        this.phaseAngleClock = checkPhaseAngleClock(phaseAngleClock);\n+    }\n+\n+    @Override\n+    public int getPhaseAngleClock() {\n+        return phaseAngleClock;\n+    }\n+\n+    @Override\n+    public void setPhaseAngleClock(int phaseAngleClock) {\n+        this.phaseAngleClock = checkPhaseAngleClock(phaseAngleClock);\n+    }\n+\n+    private static int checkPhaseAngleClock(int phaseAngleClock) {\n+        if (phaseAngleClock < 0 || phaseAngleClock > 11) {\n+            throw new PowsyblException(\"Unexpected value for phaseAngleClock: \" + phaseAngleClock);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66f1bef11d9619fca335e4b3ebc8b0381f0ce976"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE4ODIxOQ==", "bodyText": "Don't use addExtension(TwoWindingsTransformerPhaseAngleClock.class, pac) anymore, use the new method", "url": "https://github.com/powsybl/powsybl-core/pull/1272#discussion_r408188219", "createdAt": "2020-04-14T14:37:58Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-extensions/src/test/java/com/powsybl/iidm/network/extensions/TwoWindingsTransformerPhaseAngleClockTest.java", "diffHunk": "@@ -35,10 +35,12 @@ public void setUp() {\n \n     @Test\n     public void testEnd() {\n-        TwoWindingsTransformerPhaseAngleClock pac = new TwoWindingsTransformerPhaseAngleClock(transformer, 11);\n+        TwoWindingsTransformerPhaseAngleClock pac = new TwoWindingsTransformerPhaseAngleClockImpl(transformer, 11);\n         transformer.addExtension(TwoWindingsTransformerPhaseAngleClock.class, pac);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66f1bef11d9619fca335e4b3ebc8b0381f0ce976"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE4ODMwNg==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1272#discussion_r408188306", "createdAt": "2020-04-14T14:38:07Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-extensions/src/test/java/com/powsybl/iidm/network/extensions/TwoWindingsTransformerPhaseAngleClockTest.java", "diffHunk": "@@ -51,15 +53,15 @@ public void testEnd() {\n     public void testError1() {\n         exception.expect(PowsyblException.class);\n         exception.expectMessage(\"Unexpected value for phaseAngleClock: 12\");\n-        TwoWindingsTransformerPhaseAngleClock pac = new TwoWindingsTransformerPhaseAngleClock(transformer, 12);\n+        TwoWindingsTransformerPhaseAngleClock pac = new TwoWindingsTransformerPhaseAngleClockImpl(transformer, 12);\n         transformer.addExtension(TwoWindingsTransformerPhaseAngleClock.class, pac);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66f1bef11d9619fca335e4b3ebc8b0381f0ce976"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE4ODQyMA==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1272#discussion_r408188420", "createdAt": "2020-04-14T14:38:15Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-extensions/src/test/java/com/powsybl/iidm/network/extensions/TwoWindingsTransformerPhaseAngleClockTest.java", "diffHunk": "@@ -51,15 +53,15 @@ public void testEnd() {\n     public void testError1() {\n         exception.expect(PowsyblException.class);\n         exception.expectMessage(\"Unexpected value for phaseAngleClock: 12\");\n-        TwoWindingsTransformerPhaseAngleClock pac = new TwoWindingsTransformerPhaseAngleClock(transformer, 12);\n+        TwoWindingsTransformerPhaseAngleClock pac = new TwoWindingsTransformerPhaseAngleClockImpl(transformer, 12);\n         transformer.addExtension(TwoWindingsTransformerPhaseAngleClock.class, pac);\n     }\n \n     @Test\n     public void testError2() {\n         exception.expect(PowsyblException.class);\n         exception.expectMessage(\"Unexpected value for phaseAngleClock: -1\");\n-        TwoWindingsTransformerPhaseAngleClock pac = new TwoWindingsTransformerPhaseAngleClock(transformer, -1);\n+        TwoWindingsTransformerPhaseAngleClock pac = new TwoWindingsTransformerPhaseAngleClockImpl(transformer, -1);\n         transformer.addExtension(TwoWindingsTransformerPhaseAngleClock.class, pac);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66f1bef11d9619fca335e4b3ebc8b0381f0ce976"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE4ODU2Ng==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1272#discussion_r408188566", "createdAt": "2020-04-14T14:38:26Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-extensions/src/test/java/com/powsybl/iidm/network/extensions/TwoWindingsTransformerPhaseAngleClockXmlSerializerTest.java", "diffHunk": "@@ -30,7 +30,7 @@ public void test() throws IOException {\n         network.setCaseDate(DateTime.parse(\"2019-05-27T12:17:02.504+02:00\"));\n         TwoWindingsTransformer transformer = network.getTwoWindingsTransformer(\"NHV2_NLOAD\");\n \n-        TwoWindingsTransformerPhaseAngleClock pac = new TwoWindingsTransformerPhaseAngleClock(transformer, 3);\n+        TwoWindingsTransformerPhaseAngleClock pac = new TwoWindingsTransformerPhaseAngleClockImpl(transformer, 3);\n         transformer.addExtension(TwoWindingsTransformerPhaseAngleClock.class, pac);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66f1bef11d9619fca335e4b3ebc8b0381f0ce976"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNjEzMzkx", "url": "https://github.com/powsybl/powsybl-core/pull/1272#pullrequestreview-393613391", "createdAt": "2020-04-15T09:37:59Z", "commit": {"oid": "66f1bef11d9619fca335e4b3ebc8b0381f0ce976"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwOTozNzo1OVrOGFxwiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwOTozNzo1OVrOGFxwiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODcxMTMwNQ==", "bodyText": "Should we initialize this parameter to an invalid value, just to be sure the user set it manually?", "url": "https://github.com/powsybl/powsybl-core/pull/1272#discussion_r408711305", "createdAt": "2020-04-15T09:37:59Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-extensions/src/main/java/com/powsybl/iidm/network/extensions/TwoWindingsTransformerPhaseAngleClockAdderImpl.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.iidm.network.extensions;\n+\n+import com.powsybl.commons.extensions.AbstractExtensionAdder;\n+import com.powsybl.iidm.network.TwoWindingsTransformer;\n+\n+/**\n+ * @author J\u00e9r\u00e9my LABOUS <jlabous at silicom.fr>\n+ */\n+public class TwoWindingsTransformerPhaseAngleClockAdderImpl\n+    extends AbstractExtensionAdder<TwoWindingsTransformer, TwoWindingsTransformerPhaseAngleClock>\n+    implements TwoWindingsTransformerPhaseAngleClockAdder {\n+\n+    private int phaseAngleClock;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66f1bef11d9619fca335e4b3ebc8b0381f0ce976"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ea873f6705bafd0001dbbf833222c8a714f7a1a", "author": {"user": {"login": "jlabous", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/9ea873f6705bafd0001dbbf833222c8a714f7a1a", "committedDate": "2020-04-23T12:42:58Z", "message": "take remark in account\n\nSigned-off-by: J\u00e9r\u00e9my LABOUS <jlabous@silicom.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NzU5MDI1", "url": "https://github.com/powsybl/powsybl-core/pull/1272#pullrequestreview-405759025", "createdAt": "2020-05-05T12:56:08Z", "commit": {"oid": "9ea873f6705bafd0001dbbf833222c8a714f7a1a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20a2cfb70f718db96a4414f15e75b0133925e67b", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/20a2cfb70f718db96a4414f15e75b0133925e67b", "committedDate": "2020-05-05T12:56:35Z", "message": "Merge branch 'master' into issue_1206_TwoWindingsTransformerPhaseAngleClock"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4237, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}