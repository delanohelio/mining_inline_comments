{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyNDI4MTIx", "number": 1148, "title": "Fix calculated/merged bus name", "bodyText": "Signed-off-by: Geoffroy Jamgotchian geoffroy.jamgotchian@rte-france.com\nPlease check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nDoes this PR already have an issue describing the problem ? If so, link to this issue using '#XXX' and skip the rest\nNo\nWhat kind of change does this PR introduce? (Bug fix, feature, docs update, ...)\nBug fix\nWhat is the current behavior? (You can also link to an open issue here)\nCalculated buses in node/breaker view and merged buses in bus/breaker view are not named correctly. Calculated/merged bus name is based on voltage level id like their ids but are not based on voltage level name.\nWhat is the new behavior (if this is a feature change)?\nIf voltage level name exists, calculated/merged bus name is derived from it. If voltage level name does not exist, name is set to null.\nDoes this PR introduce a breaking change or deprecate an API? If yes, check the following:\n\n The Breaking Change or Deprecated label has been added\n The migration guide has been updated in the github wiki (What changes might users need to make in their application due to this PR?)\n\nOther information:\n(if any of the questions/checkboxes don't apply, please delete them entirely)", "createdAt": "2020-02-07T14:06:09Z", "url": "https://github.com/powsybl/powsybl-core/pull/1148", "merged": true, "mergeCommit": {"oid": "b171fd06b9c2292abf89fa63c18c5d9e7ca53ccb"}, "closed": true, "closedAt": "2020-02-12T13:06:44Z", "author": {"login": "geofjamg"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcB_1WhAH2gAyMzcyNDI4MTIxOmZiYWU5Yjg4NDY5OWNhOWE3MzYyNWFlNjQyNTI1Y2IxZjA5NGE2NDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDmBxbgFqTM1NzQzNDUzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fbae9b884699ca9a73625ae642525cb1f094a640", "author": {"user": {"login": "geofjamg", "name": "Geoffroy Jamgotchian"}}, "url": "https://github.com/powsybl/powsybl-core/commit/fbae9b884699ca9a73625ae642525cb1f094a640", "committedDate": "2020-02-07T14:02:18Z", "message": "Fix calculated/merged bus name\n\nSigned-off-by: Geoffroy Jamgotchian <geoffroy.jamgotchian@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NjQxMzcx", "url": "https://github.com/powsybl/powsybl-core/pull/1148#pullrequestreview-356641371", "createdAt": "2020-02-11T13:09:32Z", "commit": {"oid": "fbae9b884699ca9a73625ae642525cb1f094a640"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxMzowOTozMlrOFoIRug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxMzowOTozMlrOFoIRug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzYyMjk3MA==", "bodyText": "It seems you increment the busNum twice: the first time to generate the busId, the second time for the busName.\nI think you should use busNum without increment there.", "url": "https://github.com/powsybl/powsybl-core/pull/1148#discussion_r377622970", "createdAt": "2020-02-11T13:09:32Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/BusBreakerVoltageLevel.java", "diffHunk": "@@ -254,7 +254,8 @@ private void updateCache() {\n                     }, encountered);\n                     if (isBusValid(busSet)) {\n                         String mergedBusId = BusBreakerVoltageLevel.this.id + \"_\" + busNum++;\n-                        MergedBus mergedBus = new MergedBus(mergedBusId, busSet);\n+                        String mergedBusName = BusBreakerVoltageLevel.this.name != null ? BusBreakerVoltageLevel.this.name + \"_\" + busNum++ : null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbae9b884699ca9a73625ae642525cb1f094a640"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd2b126a9c5c51a3d8d7451799b61afc0d26f3ca", "author": {"user": {"login": "geofjamg", "name": "Geoffroy Jamgotchian"}}, "url": "https://github.com/powsybl/powsybl-core/commit/bd2b126a9c5c51a3d8d7451799b61afc0d26f3ca", "committedDate": "2020-02-12T08:46:46Z", "message": "Merge branch 'master' into fix_calculated_bus_name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b30af609e84223453576579efd52bbe95058b009", "author": {"user": {"login": "geofjamg", "name": "Geoffroy Jamgotchian"}}, "url": "https://github.com/powsybl/powsybl-core/commit/b30af609e84223453576579efd52bbe95058b009", "committedDate": "2020-02-12T08:53:44Z", "message": "Fix bus id and name index consistency\n\nSigned-off-by: Geoffroy Jamgotchian <geoffroy.jamgotchian@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60f7a988944edc30a183f759a96eb98dbb7e7e18", "author": {"user": {"login": "geofjamg", "name": "Geoffroy Jamgotchian"}}, "url": "https://github.com/powsybl/powsybl-core/commit/60f7a988944edc30a183f759a96eb98dbb7e7e18", "committedDate": "2020-02-12T10:29:57Z", "message": "Fix Sonar issue\n\nSigned-off-by: Geoffroy Jamgotchian <geoffroy.jamgotchian@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70e82fe2b7f005183dd7de307d70cd151e402668", "author": {"user": {"login": "geofjamg", "name": "Geoffroy Jamgotchian"}}, "url": "https://github.com/powsybl/powsybl-core/commit/70e82fe2b7f005183dd7de307d70cd151e402668", "committedDate": "2020-02-12T10:30:18Z", "message": "Merge branch 'master' into fix_calculated_bus_name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3NDM0NTMw", "url": "https://github.com/powsybl/powsybl-core/pull/1148#pullrequestreview-357434530", "createdAt": "2020-02-12T13:06:11Z", "commit": {"oid": "70e82fe2b7f005183dd7de307d70cd151e402668"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4386, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}