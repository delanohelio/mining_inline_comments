{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMDYxNjky", "number": 1235, "title": "Add UndirectedGraph.vertexExists(node) method + NodeBreakerView.getOptionalTerminal(node)", "bodyText": "Signed-off-by: RALAMBOTIANA MIORA miora.ralambotiana@rte-france.com\nPlease check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nDoes this PR already have an issue describing the problem ?\nNo\nWhat kind of change does this PR introduce?\nFeature\nWhat is the current behavior?\nIf a node in NodeBreakerView does not have an attached network component, the methode getTerminal(node) throws an exception.\nWhat is the new behavior (if this is a feature change)?\nThe method getOptionalTerminal now exists and can return an empty Optional if there is no attached network component to a valid node.\nDoes this PR introduce a breaking change or deprecate an API?\nNo\nOther information:\nLinked to #1233", "createdAt": "2020-03-19T15:12:10Z", "url": "https://github.com/powsybl/powsybl-core/pull/1235", "merged": true, "mergeCommit": {"oid": "fe447e0a09feddbc58eb9aeb3db76dec0c1de9ad"}, "closed": true, "closedAt": "2020-03-24T13:01:50Z", "author": {"login": "MioRtia"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQb4qiAFqTM3OTMwNjE1NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQyiKHAFqTM4MDI4NDE3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MzA2MTU1", "url": "https://github.com/powsybl/powsybl-core/pull/1235#pullrequestreview-379306155", "createdAt": "2020-03-23T10:36:09Z", "commit": {"oid": "e77b499e767fab289bf17d408972c01984eae651"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMDozNjowOVrOF5_fNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMDozODowOFrOF5_kPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM1MzMzNA==", "bodyText": "Is it OK to add a convenient public Optional<Terminal> getOptionalTerminal(int node). Returning null could introduce a lot of breaking changes in the client code. I think the optional version is safer.", "url": "https://github.com/powsybl/powsybl-core/pull/1235#discussion_r396353334", "createdAt": "2020-03-23T10:36:09Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/NodeBreakerVoltageLevel.java", "diffHunk": "@@ -590,7 +590,10 @@ public int getNode2(String switchId) {\n \n         @Override\n         public Terminal getTerminal(int node) {\n-            return graph.getVertexObject(node);\n+            if (graph.vertexExists(node)) {\n+                return graph.getVertexObject(node);\n+            }\n+            return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e77b499e767fab289bf17d408972c01984eae651"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM1NDYyMQ==", "bodyText": "I think you should not change the existing code: it's not necessary to extract the checkInvalidVertex in a method, consider duplicate the test here", "url": "https://github.com/powsybl/powsybl-core/pull/1235#discussion_r396354621", "createdAt": "2020-03-23T10:38:08Z", "author": {"login": "mathbagu"}, "path": "math/src/main/java/com/powsybl/math/graph/UndirectedGraphImpl.java", "diffHunk": "@@ -149,6 +159,12 @@ public void addVertexIfNotPresent(int v) {\n         notifyListener();\n     }\n \n+    @Override\n+    public boolean vertexExists(int v) {\n+        checkInvalidVertex(v);\n+        return v < vertices.size() && vertices.get(v) != null;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e77b499e767fab289bf17d408972c01984eae651"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80392304bce2153318ffeae9305441ae54167c23", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/80392304bce2153318ffeae9305441ae54167c23", "committedDate": "2020-03-24T11:54:24Z", "message": "Add UndirectedGraph.vertexExists() method + change NodeBreakerView.getTerminal(node) behaviour\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\nrevert getTerminal and create getOptionalTerminal\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\nrevert\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\ncorrection\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9aa536afae7dafcc232e6059f5f464b24caa2998", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/9aa536afae7dafcc232e6059f5f464b24caa2998", "committedDate": "2020-03-24T11:54:24Z", "message": "add test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\ncorrect test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\nadd test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48f342bccae83e7f8e2e6f438ef012ca30326aff", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/48f342bccae83e7f8e2e6f438ef012ca30326aff", "committedDate": "2020-03-24T11:48:30Z", "message": "add test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "9aa536afae7dafcc232e6059f5f464b24caa2998", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/9aa536afae7dafcc232e6059f5f464b24caa2998", "committedDate": "2020-03-24T11:54:24Z", "message": "add test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\ncorrect test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\nadd test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMjg0MTcx", "url": "https://github.com/powsybl/powsybl-core/pull/1235#pullrequestreview-380284171", "createdAt": "2020-03-24T13:01:26Z", "commit": {"oid": "9aa536afae7dafcc232e6059f5f464b24caa2998"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4484, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}