{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzMzk2ODYy", "number": 1202, "title": "Introduction of non linear shunt compensators", "bodyText": "Please check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nDoes this PR already have an issue describing the problem ?\nfix #900\nfix #87\nDoes this PR introduce a breaking change or deprecate an API?\nYes.\n\n The Breaking Change or Deprecated label has been added\n The migration guide has been updated in the github wiki (What changes might users need to make in their application due to this PR?)\n\nOther information:\nThis PR only deals with the change of API. XIIDM serialization and deserialization will be done in another PR.", "createdAt": "2020-03-04T08:03:33Z", "url": "https://github.com/powsybl/powsybl-core/pull/1202", "merged": true, "mergeCommit": {"oid": "7e9d21f499ea84c4330d7fbde980c0b46890b169"}, "closed": true, "closedAt": "2020-03-24T16:55:01Z", "author": {"login": "MioRtia"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKSZnsABqjMwOTUzOTI5NTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQ1qUqAH2gAyMzgzMzk2ODYyOjA0NTZjNzY2OWI3ODBmZTVkY2EzODAxY2UyZjJhMWU5MDdiYzhlZDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "abf18df67bbdc678db56cf3bd61efed72deb3ee0", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/abf18df67bbdc678db56cf3bd61efed72deb3ee0", "committedDate": "2020-03-04T07:57:37Z", "message": "Change of shunt API, impl and use\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "76ea2726951bf4a2fcee435896d7c345484db9ed", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/76ea2726951bf4a2fcee435896d7c345484db9ed", "committedDate": "2020-03-04T08:11:57Z", "message": "Change of shunt API, impl and use\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a11d5fbe114594a25f5db9608e7d828532ac2ce0", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/a11d5fbe114594a25f5db9608e7d828532ac2ce0", "committedDate": "2020-03-04T08:22:00Z", "message": "check shunt model type before reading it in AMPL\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "dca9f3a06322825a81a2fd240e8d3381273b82de", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/dca9f3a06322825a81a2fd240e8d3381273b82de", "committedDate": "2020-03-04T12:29:55Z", "message": "add tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dca9f3a06322825a81a2fd240e8d3381273b82de", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/dca9f3a06322825a81a2fd240e8d3381273b82de", "committedDate": "2020-03-04T12:29:55Z", "message": "add tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "8a332a111325e8a2762e64978bca3a75f804ba79", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/8a332a111325e8a2762e64978bca3a75f804ba79", "committedDate": "2020-03-04T14:51:13Z", "message": "add tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\nadd tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5Mzk4Mjcz", "url": "https://github.com/powsybl/powsybl-core/pull/1202#pullrequestreview-369398273", "createdAt": "2020-03-05T09:10:47Z", "commit": {"oid": "8a332a111325e8a2762e64978bca3a75f804ba79"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwOToxMDo0N1rOFyLdNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwOToxMjoxNlrOFyLgVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE2MDgyMA==", "bodyText": "Are these two methods really public?", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r388160820", "createdAt": "2020-03-05T09:10:47Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ShuntCompensatorLinearModelImpl.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.iidm.network.impl;\n+\n+import com.powsybl.iidm.network.ShuntCompensatorLinearModel;\n+import com.powsybl.iidm.network.ShuntCompensatorModelType;\n+import com.powsybl.iidm.network.Validable;\n+import com.powsybl.iidm.network.ValidationUtil;\n+\n+/**\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+class ShuntCompensatorLinearModelImpl extends AbstractShuntCompensatorModel implements ShuntCompensatorLinearModel {\n+\n+    private double bPerSection;\n+\n+    private double gPerSection;\n+\n+    private int maximumSectionCount;\n+\n+    ShuntCompensatorLinearModelImpl(double bPerSection, double gPerSection, int maximumSectionCount) {\n+        this.bPerSection = bPerSection;\n+        this.gPerSection = gPerSection;\n+        this.maximumSectionCount = maximumSectionCount;\n+    }\n+\n+    @Override\n+    public double getbPerSection() {\n+        return bPerSection;\n+    }\n+\n+    @Override\n+    public ShuntCompensatorLinearModel setbPerSection(double bPerSection) {\n+        ValidationUtil.checkbPerSection(shuntCompensator, bPerSection);\n+        double oldValue = this.bPerSection;\n+        this.bPerSection = bPerSection;\n+        shuntCompensator.notifyUpdate(\"bPerSection\", oldValue, bPerSection);\n+        return this;\n+    }\n+\n+    @Override\n+    public double getgPerSection() {\n+        return gPerSection;\n+    }\n+\n+    @Override\n+    public ShuntCompensatorLinearModel setgPerSection(double gPerSection) {\n+        double oldValue = this.gPerSection;\n+        this.gPerSection = gPerSection;\n+        shuntCompensator.notifyUpdate(\"gPerSection\", oldValue, gPerSection);\n+        return this;\n+    }\n+\n+    @Override\n+    public int getMaximumSectionCount() {\n+        return maximumSectionCount;\n+    }\n+\n+    @Override\n+    public ShuntCompensatorLinearModel setMaximumSectionCount(int maximumSectionCount) {\n+        ValidationUtil.checkSections(shuntCompensator, shuntCompensator.getCurrentSectionCount(), maximumSectionCount);\n+        int oldValue = this.maximumSectionCount;\n+        this.maximumSectionCount = maximumSectionCount;\n+        shuntCompensator.notifyUpdate(\"maximumSectionCount\", oldValue, maximumSectionCount);\n+        return this;\n+    }\n+\n+    @Override\n+    public ShuntCompensatorModelType getType() {\n+        return ShuntCompensatorModelType.LINEAR;\n+    }\n+\n+    @Override\n+    public void checkCurrentSection(int currentSectionCount) {\n+        checkCurrentSection(shuntCompensator, currentSectionCount);\n+    }\n+\n+    @Override\n+    public void checkCurrentSection(Validable validable, int currentSectionCount) {\n+        ValidationUtil.checkSections(validable, currentSectionCount, maximumSectionCount);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a332a111325e8a2762e64978bca3a75f804ba79"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE2MTYyMA==", "bodyText": "Add the model type in the message", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r388161620", "createdAt": "2020-03-05T09:12:16Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-scripting/src/main/groovy/com/powsybl/iidm/network/scripting/ShuntCompensatorExtension.groovy", "diffHunk": "@@ -0,0 +1,62 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+\n+package com.powsybl.iidm.network.scripting\n+\n+import com.powsybl.commons.PowsyblException\n+import com.powsybl.iidm.network.ShuntCompensator\n+import com.powsybl.iidm.network.ShuntCompensatorLinearModel\n+import com.powsybl.iidm.network.ShuntCompensatorModelType\n+import com.powsybl.iidm.network.ShuntCompensatorNonLinearModel\n+\n+/**\n+ *\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+class ShuntCompensatorExtension {\n+\n+    static double getMaximumB(ShuntCompensator self) {\n+        if (ShuntCompensatorModelType.LINEAR == self.getModelType()) {\n+            // forward bPerSection * maximumSectionCount for linear shunts\n+            return self.getModel(ShuntCompensatorLinearModel.class).getbPerSection() * self.getModel().getMaximumSectionCount()\n+        } else if (ShuntCompensatorModelType.NON_LINEAR == self.getModelType()) {\n+            return self.getModel(ShuntCompensatorNonLinearModel.class).getMaximumB()\n+        }\n+        throw new PowsyblException(\"Unexpected shunt model type\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a332a111325e8a2762e64978bca3a75f804ba79"}, "originalPosition": 29}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8610ee5b8fca5e9dd50240e502d1f944d7ab22d1", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/8610ee5b8fca5e9dd50240e502d1f944d7ab22d1", "committedDate": "2020-03-05T13:11:38Z", "message": "add groovy bindings tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/44ec378cd400bfc7d53bb2b7e2a647b306dda722", "committedDate": "2020-03-05T13:30:56Z", "message": "add test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMTYxOTg4", "url": "https://github.com/powsybl/powsybl-core/pull/1202#pullrequestreview-370161988", "createdAt": "2020-03-06T08:49:22Z", "commit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwODo0OToyMlrOFyxGpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwODo0OToyMlrOFyxGpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODc3NzYzNg==", "bodyText": "I went to the website documentation about shunt compensators to better understand your changes, but it was not enough for me to understand... I guess you have edited that page of the website in a branch to update that doc for the next release: maybe we should discuss it.", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r388777636", "createdAt": "2020-03-06T08:49:22Z", "author": {"login": "agnesLeroy"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/ShuntCompensatorModel.java", "diffHunk": "@@ -0,0 +1,30 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.iidm.network;\n+\n+/**\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+public interface ShuntCompensatorModel {\n+\n+    /**\n+     * Get the maximum number of sections.\n+     */\n+    int getMaximumSectionCount();\n+\n+    /**\n+     * Get the susceptance in S of the section with a given section number if it exists.\n+     * Throw an exception if such a section does not exist.\n+     */\n+    double getB(int sectionNum);\n+\n+    /**\n+     * Get the conductance in S of the section with a given section number if it exists.\n+     * Throw an exception if such a section does not exist.\n+     */\n+    double getG(int sectionNum);\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMTY3OTY4", "url": "https://github.com/powsybl/powsybl-core/pull/1202#pullrequestreview-370167968", "createdAt": "2020-03-06T09:00:00Z", "commit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwOTowMDowMVrOFyxZKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwOTowMDowMVrOFyxZKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODc4MjM3Nw==", "bodyText": "We could imagine having only this model and using it to create either linear or non-linear shunts, or am I wrong?", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r388782377", "createdAt": "2020-03-06T09:00:01Z", "author": {"login": "agnesLeroy"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/ShuntCompensatorNonLinearModel.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.iidm.network;\n+\n+import java.util.Map;\n+import java.util.Optional;\n+\n+/**\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+public interface ShuntCompensatorNonLinearModel extends ShuntCompensatorModel {\n+\n+    interface Section {\n+\n+        /**\n+         * Get the susceptance in S of the section.\n+         */\n+        double getB();\n+\n+        /**\n+         * Get the conductance in S of the section.\n+         */\n+        double getG();\n+    }\n+\n+    /**\n+     * Get the maximum susceptance for a section in S.\n+     */\n+    double getMaximumB();\n+\n+    /**\n+     * Get the maximum conductance for a section in S.\n+     */\n+    double getMaximumG();\n+\n+    /**\n+     * Get an optional of the section associated with a given section number if it exists.\n+     * If such a section does not exist, return an empty optional.\n+     *\n+     */\n+    Optional<Section> getSection(int sectionNum);\n+\n+    /**\n+     * Get all the sections associated with their section number.\n+     */\n+    Map<Integer, Section> getSections();\n+\n+    /**\n+     * For a given section number, add a section with a given susceptance and conductance in S to the model.\n+     * If a section already exists for this section number, respectively replace its susceptance and conductance with the given susceptance and conductance.\n+     */\n+    ShuntCompensatorNonLinearModel addOrReplaceSection(int sectionNum, double b, double g);\n+\n+    /**\n+     * Remove the section associated with a given section number if it exists <b>and</b> the current section count is different of the given section number.\n+     * Else, throw an exception.\n+     */\n+    ShuntCompensatorNonLinearModel removeSection(int sectionNum);\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMjA0OTM2", "url": "https://github.com/powsybl/powsybl-core/pull/1202#pullrequestreview-370204936", "createdAt": "2020-03-06T09:59:26Z", "commit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwOTo1OToyN1rOFyzMRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMDoxOToxN1rOFyzzIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgxMTg0Nw==", "bodyText": "Should the getMaximumSectionCount be on the Shunt API instead of the Model API? Is it specific to a model?", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r388811847", "createdAt": "2020-03-06T09:59:27Z", "author": {"login": "mathbagu"}, "path": "ampl-converter/src/main/java/com/powsybl/ampl/converter/AmplNetworkWriter.java", "diffHunk": "@@ -1336,11 +1340,11 @@ private void writeShunts(AmplExportContext context) throws IOException {\n                 double vb = t.getVoltageLevel().getNominalV();\n                 double zb = vb * vb / AmplConstants.SB;\n                 double b1 = 0;\n-                double b2 = sc.getbPerSection() * sc.getMaximumSectionCount() * zb;\n+                double b2 = sc.getModel(ShuntCompensatorLinearModel.class).getbPerSection() * sc.getModel().getMaximumSectionCount() * zb;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgxMjcyOA==", "bodyText": "Should you add a default behaviour? Or do we decide that the API breaks", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r388812728", "createdAt": "2020-03-06T10:01:13Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/ShuntCompensator.java", "diffHunk": "@@ -53,35 +40,32 @@\n     ShuntCompensator setCurrentSectionCount(int currentSectionCount);\n \n     /**\n-     * Get the susceptance per section in S.\n+     * Get the susceptance for the current section count.\n+     * <p>\n+     * Depends on the working variant.\n+     * @see VariantManager\n      */\n-    double getbPerSection();\n+    double getCurrentB();\n \n     /**\n-     * Set the susceptance per section in S.\n-     *\n-     * @param bPerSection the susceptance per section\n-     * @return the shunt compensator to chain method calls.\n+     * Get the conductance for the current section count.\n+     * <p>\n+     * Depends on the working variant.\n+     * @see VariantManager\n      */\n-    ShuntCompensator setbPerSection(double bPerSection);\n+    double getCurrentG();\n \n     /**\n-     * Get the susceptance for the maximum section count.\n-     *\n-     * @deprecated Use {@link #getbPerSection()} * {@link #getMaximumSectionCount()} instead.\n+     * Get the model type of the shunt compensator (linear or non-linear)\n      */\n-    @Deprecated\n-    default double getMaximumB() {\n-        return getbPerSection() * getMaximumSectionCount();\n-    }\n+    ShuntCompensatorModelType getModelType();\n \n     /**\n-     * Get the susceptance for the current section counts.\n-     * <p>\n-     * Depends on the working variant.\n-     * @see VariantManager\n+     * Get the shunt model.\n      */\n-    double getCurrentB();\n+    ShuntCompensatorModel getModel();\n+\n+    <M extends ShuntCompensatorModel> M getModel(Class<M> modelType);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgxMzMyNw==", "bodyText": "To be discussed: should we design the API like we did for the extension:\nnewModel(ShuntCompensatorLinearModelAdder.class);", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r388813327", "createdAt": "2020-03-06T10:02:28Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/ShuntCompensatorAdder.java", "diffHunk": "@@ -26,9 +26,9 @@\n  */\n public interface ShuntCompensatorAdder extends InjectionAdder<ShuntCompensatorAdder> {\n \n-    ShuntCompensatorAdder setbPerSection(double bPerSection);\n+    ShuntCompensatorLinearModelAdder newLinearModel();\n \n-    ShuntCompensatorAdder setMaximumSectionCount(int maximumSectionCount);\n+    ShuntCompensatorNonLinearModelAdder newNonLinearModel();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgxNDk2NQ==", "bodyText": "I'm not sure about this: the model should be attached to the ShuntCompensator in the constructor, like it's done for tap changer", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r388814965", "createdAt": "2020-03-06T10:05:38Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/AbstractShuntCompensatorModel.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.iidm.network.impl;\n+\n+import com.powsybl.iidm.network.ShuntCompensatorModel;\n+import com.powsybl.iidm.network.Validable;\n+import com.powsybl.iidm.network.ValidationException;\n+\n+import java.util.Objects;\n+\n+/**\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+abstract class AbstractShuntCompensatorModel implements ShuntCompensatorModelHolder {\n+\n+    protected ShuntCompensatorImpl shuntCompensator;\n+\n+    @Override\n+    public void setShuntCompensator(ShuntCompensatorImpl shuntCompensator) {\n+        this.shuntCompensator = Objects.requireNonNull(shuntCompensator);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgxNTM3MA==", "bodyText": "Not private-package, but protected instead?", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r388815370", "createdAt": "2020-03-06T10:06:23Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/AbstractShuntCompensatorModel.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.iidm.network.impl;\n+\n+import com.powsybl.iidm.network.ShuntCompensatorModel;\n+import com.powsybl.iidm.network.Validable;\n+import com.powsybl.iidm.network.ValidationException;\n+\n+import java.util.Objects;\n+\n+/**\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+abstract class AbstractShuntCompensatorModel implements ShuntCompensatorModelHolder {\n+\n+    protected ShuntCompensatorImpl shuntCompensator;\n+\n+    @Override\n+    public void setShuntCompensator(ShuntCompensatorImpl shuntCompensator) {\n+        this.shuntCompensator = Objects.requireNonNull(shuntCompensator);\n+    }\n+\n+    @Override\n+    public ShuntCompensatorModel getModel() {\n+        return this;\n+    }\n+\n+    @Override\n+    public <M extends ShuntCompensatorModel> M getModel(Class<M> modelType) {\n+        if (modelType == null) {\n+            throw new IllegalArgumentException(\"shunt compensator model type is null\");\n+        }\n+        if (modelType.isInstance(this)) {\n+            return modelType.cast(this);\n+        }\n+        throw new ValidationException(shuntCompensator, \"incorrect shunt compensator model type \" +\n+                modelType.getName() + \", expected \" + getClass());\n+    }\n+\n+    void checkCurrentSection(int currentSectionCount) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgxNTQ2Mg==", "bodyText": "Same question there", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r388815462", "createdAt": "2020-03-06T10:06:35Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/AbstractShuntCompensatorModel.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.iidm.network.impl;\n+\n+import com.powsybl.iidm.network.ShuntCompensatorModel;\n+import com.powsybl.iidm.network.Validable;\n+import com.powsybl.iidm.network.ValidationException;\n+\n+import java.util.Objects;\n+\n+/**\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+abstract class AbstractShuntCompensatorModel implements ShuntCompensatorModelHolder {\n+\n+    protected ShuntCompensatorImpl shuntCompensator;\n+\n+    @Override\n+    public void setShuntCompensator(ShuntCompensatorImpl shuntCompensator) {\n+        this.shuntCompensator = Objects.requireNonNull(shuntCompensator);\n+    }\n+\n+    @Override\n+    public ShuntCompensatorModel getModel() {\n+        return this;\n+    }\n+\n+    @Override\n+    public <M extends ShuntCompensatorModel> M getModel(Class<M> modelType) {\n+        if (modelType == null) {\n+            throw new IllegalArgumentException(\"shunt compensator model type is null\");\n+        }\n+        if (modelType.isInstance(this)) {\n+            return modelType.cast(this);\n+        }\n+        throw new ValidationException(shuntCompensator, \"incorrect shunt compensator model type \" +\n+                modelType.getName() + \", expected \" + getClass());\n+    }\n+\n+    void checkCurrentSection(int currentSectionCount) {\n+        checkCurrentSection(shuntCompensator, currentSectionCount);\n+    }\n+\n+    abstract void checkCurrentSection(Validable validable, int currentSectionCount);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgxNjQ2NQ==", "bodyText": "It's strange to not replace the section whereas it's totally allowed later? It's not really important but it's questioning me", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r388816465", "createdAt": "2020-03-06T10:08:32Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ShuntCompensatorAdderImpl.java", "diffHunk": "@@ -46,16 +43,106 @@ protected String getTypeDescription() {\n         return \"Shunt compensator\";\n     }\n \n+    class ShuntCompensatorLinearModelAdderImpl implements ShuntCompensatorLinearModelAdder {\n+\n+        private double bPerSection = Double.NaN;\n+\n+        private double gPerSection = Double.NaN;\n+\n+        private int maximumSectionCount = -1;\n+\n+        @Override\n+        public ShuntCompensatorLinearModelAdder setbPerSection(double bPerSection) {\n+            this.bPerSection = bPerSection;\n+            return this;\n+        }\n+\n+        @Override\n+        public ShuntCompensatorLinearModelAdder setgPerSection(double gPerSection) {\n+            this.gPerSection = gPerSection;\n+            return this;\n+        }\n+\n+        @Override\n+        public ShuntCompensatorLinearModelAdder setMaximumSectionCount(int maximumSectionCount) {\n+            this.maximumSectionCount = maximumSectionCount;\n+            return this;\n+        }\n+\n+        @Override\n+        public ShuntCompensatorAdder add() {\n+            ValidationUtil.checkbPerSection(ShuntCompensatorAdderImpl.this, bPerSection);\n+            ValidationUtil.checkMaximumSectionCount(ShuntCompensatorAdderImpl.this, maximumSectionCount);\n+            model = new ShuntCompensatorLinearModelImpl(bPerSection, gPerSection, maximumSectionCount);\n+            return ShuntCompensatorAdderImpl.this;\n+        }\n+    }\n+\n+    class ShuntCompensatorNonLinearModelAdderImpl implements ShuntCompensatorNonLinearModelAdder {\n+\n+        private final TreeMap<Integer, ShuntCompensatorNonLinearModelImpl.SectionImpl> sections = new TreeMap<>();\n+\n+        class SectionAdderImpl implements SectionAdder {\n+\n+            private int sectionNum = -1;\n+\n+            private double b = Double.NaN;\n+\n+            private double g = Double.NaN;\n+\n+            @Override\n+            public SectionAdder setSectionNum(int sectionNum) {\n+                this.sectionNum = sectionNum;\n+                return this;\n+            }\n+\n+            @Override\n+            public SectionAdder setB(double b) {\n+                this.b = b;\n+                return this;\n+            }\n+\n+            @Override\n+            public SectionAdder setG(double g) {\n+                this.g = g;\n+                return this;\n+            }\n+\n+            @Override\n+            public ShuntCompensatorNonLinearModelAdder endSection() {\n+                ValidationUtil.checkSectionNumber(ShuntCompensatorAdderImpl.this, sectionNum);\n+                if (sections.containsKey(sectionNum)) {\n+                    throw new ValidationException(ShuntCompensatorAdderImpl.this, \"a section is already defined at this number\");\n+                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgxNzk4OQ==", "bodyText": "model.getModel() is really stange design: is the variable name is the good one? The adder set this variable with a model implementation, so I don't understand why the model is able to return a model...\nI think you look to the ReactiveLimitsHolder? The design is a bit different because we instanciate ReactiveLimitsHolderImpl?", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r388817989", "createdAt": "2020-03-06T10:11:40Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ShuntCompensatorAdderImpl.java", "diffHunk": "@@ -92,16 +179,19 @@ public ShuntCompensatorAdder setTargetDeadband(double targetDeadband) {\n     public ShuntCompensatorImpl add() {\n         String id = checkAndGetUniqueId();\n         TerminalExt terminal = checkAndGetTerminal();\n-        ValidationUtil.checkbPerSection(this, bPerSection);\n-        ValidationUtil.checkSections(this, currentSectionCount, maximumSectionCount);\n+        if (model == null) {\n+            throw new ValidationException(this, \"the shunt compensator model has not been defined\");\n+        }\n+        model.getModel(AbstractShuntCompensatorModel.class).checkCurrentSection(this, currentSectionCount);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722"}, "originalPosition": 151}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgyMTc5NA==", "bodyText": "Not sure this method should be available", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r388821794", "createdAt": "2020-03-06T10:19:17Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ShuntCompensatorModelHolder.java", "diffHunk": "@@ -0,0 +1,24 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.iidm.network.impl;\n+\n+import com.powsybl.iidm.network.ShuntCompensatorModel;\n+import com.powsybl.iidm.network.ShuntCompensatorModelType;\n+\n+/**\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+interface ShuntCompensatorModelHolder extends ShuntCompensatorModel {\n+\n+    ShuntCompensatorModelType getType();\n+\n+    ShuntCompensatorModel getModel();\n+\n+    <M extends ShuntCompensatorModel> M getModel(Class<M> modelType);\n+\n+    void setShuntCompensator(ShuntCompensatorImpl shuntCompensator);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44ec378cd400bfc7d53bb2b7e2a647b306dda722", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/44ec378cd400bfc7d53bb2b7e2a647b306dda722", "committedDate": "2020-03-05T13:30:56Z", "message": "add test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "af7c34969f95a60194987b4151658fc812b30518", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/af7c34969f95a60194987b4151658fc812b30518", "committedDate": "2020-03-09T12:24:58Z", "message": "Change shunt impl design + getMaximumSectionCount in Shunt API\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af7c34969f95a60194987b4151658fc812b30518", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/af7c34969f95a60194987b4151658fc812b30518", "committedDate": "2020-03-09T12:24:58Z", "message": "Change shunt impl design + getMaximumSectionCount in Shunt API\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "118e4c8ad20723fa6697076be505b33cbbd06ea7", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/118e4c8ad20723fa6697076be505b33cbbd06ea7", "committedDate": "2020-03-12T09:16:27Z", "message": "Corrections after rebasing master\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MzQ3NTUw", "url": "https://github.com/powsybl/powsybl-core/pull/1202#pullrequestreview-374347550", "createdAt": "2020-03-13T14:32:41Z", "commit": {"oid": "118e4c8ad20723fa6697076be505b33cbbd06ea7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNDozMjo0MVrOF2F7Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNDozMjo0MVrOF2F7Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI2NDUyMw==", "bodyText": "Is it a bad idea to keep the getMaximumB in all shunt model and provide a convenient function?", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r392264523", "createdAt": "2020-03-13T14:32:41Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-scripting/src/main/groovy/com/powsybl/iidm/network/scripting/ShuntCompensatorExtension.groovy", "diffHunk": "@@ -0,0 +1,63 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+\n+package com.powsybl.iidm.network.scripting\n+\n+import com.powsybl.commons.PowsyblException\n+import com.powsybl.iidm.network.ShuntCompensator\n+import com.powsybl.iidm.network.ShuntCompensatorLinearModel\n+import com.powsybl.iidm.network.ShuntCompensatorModelType\n+import com.powsybl.iidm.network.ShuntCompensatorNonLinearModel\n+\n+/**\n+ *\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+class ShuntCompensatorExtension {\n+\n+    static double getMaximumB(ShuntCompensator self) {\n+        if (ShuntCompensatorModelType.LINEAR == self.getModelType()) {\n+            // forward bPerSection * maximumSectionCount for linear shunts\n+            return self.getModel(ShuntCompensatorLinearModel.class).getbPerSection() * self.getModel().getMaximumSectionCount()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "118e4c8ad20723fa6697076be505b33cbbd06ea7"}, "originalPosition": 25}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "118e4c8ad20723fa6697076be505b33cbbd06ea7", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/118e4c8ad20723fa6697076be505b33cbbd06ea7", "committedDate": "2020-03-12T09:16:27Z", "message": "Corrections after rebasing master\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "b120df23e87c27ab0fdc2666d70fbf8b8f9e40ca", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/b120df23e87c27ab0fdc2666d70fbf8b8f9e40ca", "committedDate": "2020-03-18T10:24:11Z", "message": "Corrections after rebasing master\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b120df23e87c27ab0fdc2666d70fbf8b8f9e40ca", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/b120df23e87c27ab0fdc2666d70fbf8b8f9e40ca", "committedDate": "2020-03-18T10:24:11Z", "message": "Corrections after rebasing master\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "de1d1931bd876a25c70addbd168de3f981d97641", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/de1d1931bd876a25c70addbd168de3f981d97641", "committedDate": "2020-03-20T14:21:53Z", "message": "Corrections after rebasing master\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMjU0NzYx", "url": "https://github.com/powsybl/powsybl-core/pull/1202#pullrequestreview-380254761", "createdAt": "2020-03-24T12:20:31Z", "commit": {"oid": "9b23d718b0d949eb8b85443e79d0f16c091948d9"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMjoyMDozMVrOF6tq4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMjoyMTozMlrOF6ts7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEwOTk4NA==", "bodyText": "I think this should be done in the constructor, what do you think?", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r397109984", "createdAt": "2020-03-24T12:20:31Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ShuntCompensatorAdderImpl.java", "diffHunk": "@@ -92,16 +179,22 @@ public ShuntCompensatorAdder setTargetDeadband(double targetDeadband) {\n     public ShuntCompensatorImpl add() {\n         String id = checkAndGetUniqueId();\n         TerminalExt terminal = checkAndGetTerminal();\n-        ValidationUtil.checkbPerSection(this, bPerSection);\n-        ValidationUtil.checkSections(this, currentSectionCount, maximumSectionCount);\n+        if (model == null) {\n+            throw new ValidationException(this, \"the shunt compensator model has not been defined\");\n+        }\n+        ValidationUtil.checkSections(this, currentSectionCount, model.getMaximumSectionCount());\n+        if (!model.containsSection(currentSectionCount)) {\n+            throw new ValidationException(this, \"unexpected section number (\" + currentSectionCount + \"): no existing associated section\");\n+        }\n         ValidationUtil.checkRegulatingTerminal(this, regulatingTerminal, getNetwork());\n         ValidationUtil.checkVoltageControl(this, voltageRegulatorOn, targetV);\n         ValidationUtil.checkTargetDeadband(this, \"shunt compensator\", voltageRegulatorOn, targetDeadband);\n         ShuntCompensatorImpl shunt\n                 = new ShuntCompensatorImpl(getNetwork().getRef(),\n-                id, getName(), isFictitious(), bPerSection, maximumSectionCount,\n+                id, getName(), isFictitious(), model,\n                 currentSectionCount, regulatingTerminal == null ? terminal : regulatingTerminal,\n                 voltageRegulatorOn, targetV, targetDeadband);\n+        model.setShuntCompensator(shunt);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b23d718b0d949eb8b85443e79d0f16c091948d9"}, "originalPosition": 164}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzExMDUxMQ==", "bodyText": "Attach the model this this shunt compensator, like it's done between HvdcLine and HvdcConverterStation", "url": "https://github.com/powsybl/powsybl-core/pull/1202#discussion_r397110511", "createdAt": "2020-03-24T12:21:32Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ShuntCompensatorImpl.java", "diffHunk": "@@ -47,13 +39,12 @@\n     private final TDoubleArrayList targetDeadband;\n \n     ShuntCompensatorImpl(Ref<? extends VariantManagerHolder> network,\n-                         String id, String name, boolean fictitious, double bPerSection, int maximumSectionCount,\n+                         String id, String name, boolean fictitious, ShuntCompensatorModelWrapper model,\n                          int currentSectionCount, TerminalExt regulatingTerminal, boolean voltageRegulatorOn,\n                          double targetV, double targetDeadband) {\n         super(id, name, fictitious);\n         this.network = network;\n-        this.bPerSection = bPerSection;\n-        this.maximumSectionCount = maximumSectionCount;\n+        this.model = model;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b23d718b0d949eb8b85443e79d0f16c091948d9"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbf30b6481790224c96b472ee07fd171ee796d9a", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/bbf30b6481790224c96b472ee07fd171ee796d9a", "committedDate": "2020-03-24T14:01:58Z", "message": "Change of shunt API, impl and use\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\ncheck shunt model type before reading it in AMPL\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\nadd getCurrentG method + minor corrections\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70c4b87c5da6c28fc040a41eb132ee207e27132f", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/70c4b87c5da6c28fc040a41eb132ee207e27132f", "committedDate": "2020-03-24T14:01:58Z", "message": "add tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\nadd tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed5dda4416113475a9a4db3d3c8d9366beba9238", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/ed5dda4416113475a9a4db3d3c8d9366beba9238", "committedDate": "2020-03-24T14:01:58Z", "message": "refactoring\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05494ed8c7d987273e49567a7b694fd1a2b8cbc3", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/05494ed8c7d987273e49567a7b694fd1a2b8cbc3", "committedDate": "2020-03-24T14:01:58Z", "message": "Apply reviewer comments: make checkCurrentSection package-private + explicit error message in groovy bindings\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb2aaef0ee9ffec424baeb30d691464186aa1907", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/fb2aaef0ee9ffec424baeb30d691464186aa1907", "committedDate": "2020-03-24T14:01:58Z", "message": "add groovy bindings tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f82c4d2b49a84dd77e768fd638dae2f8d260a9f9", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/f82c4d2b49a84dd77e768fd638dae2f8d260a9f9", "committedDate": "2020-03-24T14:01:58Z", "message": "add test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50b704bdff26866062c492f27a06aab660d09354", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/50b704bdff26866062c492f27a06aab660d09354", "committedDate": "2020-03-24T14:01:59Z", "message": "Change shunt impl design + getMaximumSectionCount in Shunt API\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c87286313ae579425cc2bbd8eaf6f09ecb54584a", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/c87286313ae579425cc2bbd8eaf6f09ecb54584a", "committedDate": "2020-03-24T14:01:59Z", "message": "Corrections after rebasing master\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4abe6173bdb3bc0e7fe6f9e454dab89d864f51ae", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/4abe6173bdb3bc0e7fe6f9e454dab89d864f51ae", "committedDate": "2020-03-24T14:01:59Z", "message": "Add merging view adapter for shunt models' adders\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ab60196dc4670b79d021216ce9a92c805dd5cbf", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/0ab60196dc4670b79d021216ce9a92c805dd5cbf", "committedDate": "2020-03-24T14:01:59Z", "message": "corrections\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "106bab2829c4a6e770b8ebb4aa60230d7c4bb747", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/106bab2829c4a6e770b8ebb4aa60230d7c4bb747", "committedDate": "2020-03-24T14:01:59Z", "message": "add tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb35f46ec35f9bd5e6ba2238ad830d5988922da9", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/eb35f46ec35f9bd5e6ba2238ad830d5988922da9", "committedDate": "2020-03-24T14:20:45Z", "message": "Attach the model to the shunt in the constructor\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b23d718b0d949eb8b85443e79d0f16c091948d9", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/9b23d718b0d949eb8b85443e79d0f16c091948d9", "committedDate": "2020-03-23T10:23:06Z", "message": "add tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "eb35f46ec35f9bd5e6ba2238ad830d5988922da9", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/eb35f46ec35f9bd5e6ba2238ad830d5988922da9", "committedDate": "2020-03-24T14:20:45Z", "message": "Attach the model to the shunt in the constructor\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNDIyNzE0", "url": "https://github.com/powsybl/powsybl-core/pull/1202#pullrequestreview-380422714", "createdAt": "2020-03-24T15:26:43Z", "commit": {"oid": "eb35f46ec35f9bd5e6ba2238ad830d5988922da9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0456c7669b780fe5dca3801ce2f2a1e907bc8ed8", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/0456c7669b780fe5dca3801ce2f2a1e907bc8ed8", "committedDate": "2020-03-24T16:40:04Z", "message": "Merge branch 'master' into new_shunt_api"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4437, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}