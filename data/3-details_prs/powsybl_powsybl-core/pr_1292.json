{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2NzE2MjI1", "number": 1292, "title": "Check on qPercent is deleted to prevent regression in CGMES import", "bodyText": "Please check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n\nWhat kind of change does this PR introduce? (Bug fix, feature, docs update, ...)\nPrevent regression\nWhat is the current behavior? (You can also link to an open issue here)\nIf qPercent has an invalid value during CGMES import, an exception is thrown.\nWhat is the new behavior (if this is a feature change)?\nIf qPercent has an invalid value during CGMES import, the value is ignored.\nDoes this PR introduce a breaking change or deprecate an API?\nNo\nOther information:\nThis bug was not seen before as some regulating controls went undetected in node/breaker (cf PR #1251 )\n@mathbagu This should be in release 3.3.0 as it prevents a regression in CGMES import", "createdAt": "2020-04-21T14:35:35Z", "url": "https://github.com/powsybl/powsybl-core/pull/1292", "merged": true, "mergeCommit": {"oid": "bcdd7475e8108a6363a95fcba01bdaa912542ad1"}, "closed": true, "closedAt": "2020-04-23T14:43:22Z", "author": {"login": "MioRtia"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZ0sUyAH2gAyNDA2NzE2MjI1OjRhMmQ2MDQyNDZkM2VhY2Q3Mzg0NWMxYjY1NWUwNGZmNTIyZGU2MGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcadaBbgH2gAyNDA2NzE2MjI1OjRjZmYyMDhkNzFlMDRlNGY2ZTYyZjM4OGRlNmRlMjI3Y2NmMWI1MDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4a2d604246d3eacd73845c1b655e04ff522de60d", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/4a2d604246d3eacd73845c1b655e04ff522de60d", "committedDate": "2020-04-21T14:37:40Z", "message": "qPercent is ignored in CGMES import if its value is invalid\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6b217b7cd7799bcf87d2a09f0beb8186814dd073", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/6b217b7cd7799bcf87d2a09f0beb8186814dd073", "committedDate": "2020-04-21T13:52:53Z", "message": "qPercent is ignored in CGMES import if its value is invalid\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "4a2d604246d3eacd73845c1b655e04ff522de60d", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/4a2d604246d3eacd73845c1b655e04ff522de60d", "committedDate": "2020-04-21T14:37:40Z", "message": "qPercent is ignored in CGMES import if its value is invalid\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NDM1NzY3", "url": "https://github.com/powsybl/powsybl-core/pull/1292#pullrequestreview-397435767", "createdAt": "2020-04-21T15:17:15Z", "commit": {"oid": "4a2d604246d3eacd73845c1b655e04ff522de60d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNToxNzoxNVrOGJLZug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNToxNzoxNVrOGJLZug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI3NzE3OA==", "bodyText": "Not sure valueOf is required. I think String.format is able to convert the value to a string", "url": "https://github.com/powsybl/powsybl-core/pull/1292#discussion_r412277178", "createdAt": "2020-04-21T15:17:15Z", "author": {"login": "mathbagu"}, "path": "cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/RegulatingControlMappingForGenerators.java", "diffHunk": "@@ -112,9 +112,13 @@ private boolean setRegulatingControlVoltage(String controlId,\n \n         // add qPercent as an extension\n         if (!Double.isNaN(qPercent)) {\n-            gen.newExtension(CoordinatedReactiveControlAdder.class)\n-                    .withQPercent(qPercent)\n-                    .add();\n+            if (qPercent < 0.0 || qPercent > 100) {\n+                context.ignored(QPERCENT, () -> String.format(\"Unexpected value for qPercent of generator %s: %s\", gen.getId(), String.valueOf(qPercent)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a2d604246d3eacd73845c1b655e04ff522de60d"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3ODY1NzIy", "url": "https://github.com/powsybl/powsybl-core/pull/1292#pullrequestreview-397865722", "createdAt": "2020-04-22T06:01:27Z", "commit": {"oid": "4a2d604246d3eacd73845c1b655e04ff522de60d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85e27253d2778e60765d8309eb7269a90c7bdc60", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/85e27253d2778e60765d8309eb7269a90c7bdc60", "committedDate": "2020-04-22T07:45:12Z", "message": "Apply reviewer's comment: String.valueOf() not necessary\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e2572e9c74808af7d0d09634c87ad717dd7fe467", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/e2572e9c74808af7d0d09634c87ad717dd7fe467", "committedDate": "2020-04-21T15:45:59Z", "message": "Apply reviewer comment: String.valueOf() not necessary\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "85e27253d2778e60765d8309eb7269a90c7bdc60", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/85e27253d2778e60765d8309eb7269a90c7bdc60", "committedDate": "2020-04-22T07:45:12Z", "message": "Apply reviewer's comment: String.valueOf() not necessary\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b439e3bb91b546fd652404db91c0b1e3914cdd43", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/b439e3bb91b546fd652404db91c0b1e3914cdd43", "committedDate": "2020-04-22T08:11:09Z", "message": "Revert check on qPercent in IIDM CoordinatedReactiveControl\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3OTU2MzUx", "url": "https://github.com/powsybl/powsybl-core/pull/1292#pullrequestreview-397956351", "createdAt": "2020-04-22T08:24:22Z", "commit": {"oid": "b439e3bb91b546fd652404db91c0b1e3914cdd43"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "600224f188d6f7d3feda3ac74c25db8455fce3d7", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/600224f188d6f7d3feda3ac74c25db8455fce3d7", "committedDate": "2020-04-22T10:06:04Z", "message": "Apply reviewer's comment: add debug log if invalid percent value\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4MDY0Mzc1", "url": "https://github.com/powsybl/powsybl-core/pull/1292#pullrequestreview-398064375", "createdAt": "2020-04-22T10:42:21Z", "commit": {"oid": "600224f188d6f7d3feda3ac74c25db8455fce3d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4OTIxODU3", "url": "https://github.com/powsybl/powsybl-core/pull/1292#pullrequestreview-398921857", "createdAt": "2020-04-23T09:28:47Z", "commit": {"oid": "600224f188d6f7d3feda3ac74c25db8455fce3d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cff208d71e04e4f6e62f388de6de227ccf1b506", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/4cff208d71e04e4f6e62f388de6de227ccf1b506", "committedDate": "2020-04-23T14:03:47Z", "message": "Merge branch 'master' into cgmes_ignore_invalid_qPercent"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4254, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}