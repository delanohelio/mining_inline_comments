{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzMDc4MTA1", "number": 1488, "title": "Introduce concept of Boundary for DanglingLine and TieLine", "bodyText": "Please check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nDoes this PR already have an issue describing the problem ? If so, link to this issue using '#XXX' and skip the rest\nNo\nWhat kind of change does this PR introduce? (Bug fix, feature, docs update, ...)\nFeature\nWhat is the current behavior? (You can also link to an open issue here)\nOnly xnodeP and xnodeQ exist for TieLine.HalfLine and they are set\nWhat is the new behavior (if this is a feature change)?\nTieLine.HalfLine has xnodeP, xnodeQ, xnodeV and xnodeAngle.\nDanglingLine has a BoundaryPoint object containing p, q, v and angle.\nAll these values are automatically calculated each time the equipment's attributes are changed.\nDoes this PR introduce a breaking change or deprecate an API? If yes, check the following:\nYes. API has changed and behaviour is changed: since some values are now calculated, they can be different than previous values in test cases.\n\n The Breaking Change or Deprecated label has been added\n The migration guide has been updated in the github wiki (What changes might users need to make in their application due to this PR?)\n\nOther information:\nConverters have not been updated in this PR.", "createdAt": "2020-09-25T13:37:28Z", "url": "https://github.com/powsybl/powsybl-core/pull/1488", "merged": true, "mergeCommit": {"oid": "dae514c665606ae64b3aa751b6f78d80bf6a755f"}, "closed": true, "closedAt": "2020-12-03T14:01:24Z", "author": {"login": "MioRtia"}, "timelineItems": {"totalCount": 61, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdP44LugBqjM4NDU2Mjc1NTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdh22--ABqjQwNTYxOTA1MTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe6a03f14be8c8b0b1ddc69718cc8501031d3f8f", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/fe6a03f14be8c8b0b1ddc69718cc8501031d3f8f", "committedDate": "2020-09-29T14:14:13Z", "message": "Forbid to setParent twice for half line\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "eedaa00e85843f5dc0684631c37817fbc5d468e2", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/eedaa00e85843f5dc0684631c37817fbc5d468e2", "committedDate": "2020-10-06T14:01:50Z", "message": "Implementation in memory for new API\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e6a43751956c48947e4e560fee968b5b06e927ba", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/e6a43751956c48947e4e560fee968b5b06e927ba", "committedDate": "2020-10-06T15:05:45Z", "message": "Update serialization\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "16df6056af6d5651e4d2c0fb1ebcf11da689f5b0", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/16df6056af6d5651e4d2c0fb1ebcf11da689f5b0", "committedDate": "2020-10-09T08:07:13Z", "message": "Update serialization\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b6ba27c533267104565fb9795721c678d2e35b11", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/b6ba27c533267104565fb9795721c678d2e35b11", "committedDate": "2020-10-12T09:17:33Z", "message": "Add a warning if tieline values are ignored during XML import\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "cb754900e9bd44cf30cf8451311fc93ac6a6dc2c", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/cb754900e9bd44cf30cf8451311fc93ac6a6dc2c", "committedDate": "2020-10-15T08:07:48Z", "message": "Add a warning if tieline values are ignored during XML import\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "91fb4748493d13db7b1f97e7fa0c0c5057eec0d7", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/91fb4748493d13db7b1f97e7fa0c0c5057eec0d7", "committedDate": "2020-10-15T08:38:36Z", "message": "Refactoring code\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "7d46db3937dcb937305e90a30d044c4d9b20a593", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/7d46db3937dcb937305e90a30d044c4d9b20a593", "committedDate": "2020-10-19T12:06:52Z", "message": "Add tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d46db3937dcb937305e90a30d044c4d9b20a593", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/7d46db3937dcb937305e90a30d044c4d9b20a593", "committedDate": "2020-10-19T12:06:52Z", "message": "Add tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "7d55f397519adcef3175b75ed55f3677e42a1397", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/7d55f397519adcef3175b75ed55f3677e42a1397", "committedDate": "2020-10-19T12:24:01Z", "message": "Add tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NTg2Mzcx", "url": "https://github.com/powsybl/powsybl-core/pull/1488#pullrequestreview-517586371", "createdAt": "2020-10-27T11:10:27Z", "commit": {"oid": "72e7c9ee55cedb05cc15fe1c61103c8bc882d82d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMToxMDoyN1rOHo2zmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMToxMDoyN1rOHo2zmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjYwMzAzMw==", "bodyText": "I am not sure to like BoundaryPoint name choice indeed. We have no Point in IIDM: we have node, bus and terminal. When you do getBoundaryPoint(Branch.Side.ONE).getP() for me you refer to a terminal and it will be clearer to do getHalf1().getBoundaryTerminal().getP().", "url": "https://github.com/powsybl/powsybl-core/pull/1488#discussion_r512603033", "createdAt": "2020-10-27T11:10:27Z", "author": {"login": "annetill"}, "path": "ampl-converter/src/main/java/com/powsybl/ampl/converter/AmplNetworkWriter.java", "diffHunk": "@@ -639,9 +639,9 @@ private void writeLines(AmplExportContext context, TableFormatter formatter) thr\n                         .writeCell(-1) // no ratio tap changer\n                         .writeCell(-1) // no phase tap changer\n                         .writeCell(t1.getP())\n-                        .writeCell(-tl.getHalf1().getXnodeP()) // xnode node flow side 1\n+                        .writeCell(-tl.getBoundaryPoint(Branch.Side.ONE).getP()) // xnode node flow side 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72e7c9ee55cedb05cc15fe1c61103c8bc882d82d"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "72e7c9ee55cedb05cc15fe1c61103c8bc882d82d", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/72e7c9ee55cedb05cc15fe1c61103c8bc882d82d", "committedDate": "2020-10-26T13:58:01Z", "message": "Rename boundary point values of tieline in XIIDM 1.5\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "2917863bca715f4ec4a787d7d24e1104950f0fc6", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/2917863bca715f4ec4a787d7d24e1104950f0fc6", "committedDate": "2020-11-02T08:25:50Z", "message": "Rename boundary point values of tieline in XIIDM 1.5\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2917863bca715f4ec4a787d7d24e1104950f0fc6", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/2917863bca715f4ec4a787d7d24e1104950f0fc6", "committedDate": "2020-11-02T08:25:50Z", "message": "Rename boundary point values of tieline in XIIDM 1.5\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "ee867e1e7cd692766e8a12218db452331d0d4849", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/ee867e1e7cd692766e8a12218db452331d0d4849", "committedDate": "2020-11-02T09:21:40Z", "message": "Rename boundary point values of tieline in XIIDM 1.5\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MDEyMTU3", "url": "https://github.com/powsybl/powsybl-core/pull/1488#pullrequestreview-525012157", "createdAt": "2020-11-06T10:04:03Z", "commit": {"oid": "ee867e1e7cd692766e8a12218db452331d0d4849"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMDowNDowM1rOHunqsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMTowOToyN1rOHup5tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY0NjQ1MA==", "bodyText": "Maybe we can remove the point word and keep getBoundary(Side)? But I agree with @MioRtia, terminal would be confusing for IIDM-fluent people as there is no Terminal object there", "url": "https://github.com/powsybl/powsybl-core/pull/1488#discussion_r518646450", "createdAt": "2020-11-06T10:04:03Z", "author": {"login": "mathbagu"}, "path": "ampl-converter/src/main/java/com/powsybl/ampl/converter/AmplNetworkWriter.java", "diffHunk": "@@ -639,9 +639,9 @@ private void writeLines(AmplExportContext context, TableFormatter formatter) thr\n                         .writeCell(-1) // no ratio tap changer\n                         .writeCell(-1) // no phase tap changer\n                         .writeCell(t1.getP())\n-                        .writeCell(-tl.getHalf1().getXnodeP()) // xnode node flow side 1\n+                        .writeCell(-tl.getBoundaryPoint(Branch.Side.ONE).getP()) // xnode node flow side 1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjYwMzAzMw=="}, "originalCommit": {"oid": "72e7c9ee55cedb05cc15fe1c61103c8bc882d82d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY1NjgxMg==", "bodyText": "I wonder if the sign are OK (same question above): could you confirm it is?", "url": "https://github.com/powsybl/powsybl-core/pull/1488#discussion_r518656812", "createdAt": "2020-11-06T10:23:23Z", "author": {"login": "mathbagu"}, "path": "ampl-converter/src/main/java/com/powsybl/ampl/converter/AmplNetworkWriter.java", "diffHunk": "@@ -665,9 +665,9 @@ private void writeLines(AmplExportContext context, TableFormatter formatter) thr\n                         .writeCell(1f) // constant ratio\n                         .writeCell(-1) // no ratio tap changer\n                         .writeCell(-1) // no phase tap changer\n-                        .writeCell(-tl.getHalf2().getXnodeP()) // xnode node flow side 2\n+                        .writeCell(-tl.getBoundaryPoint(Branch.Side.TWO).getP()) // xnode node flow side 2\n                         .writeCell(t2.getP())\n-                        .writeCell(-tl.getHalf2().getXnodeQ()) // xnode node flow side 2\n+                        .writeCell(-tl.getBoundaryPoint(Branch.Side.TWO).getQ()) // xnode node flow side 2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee867e1e7cd692766e8a12218db452331d0d4849"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY1NzYyNQ==", "bodyText": "Is returning null better?", "url": "https://github.com/powsybl/powsybl-core/pull/1488#discussion_r518657625", "createdAt": "2020-11-06T10:24:53Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/DanglingLine.java", "diffHunk": "@@ -278,4 +278,7 @@ default Generation getGeneration() {\n \n     CurrentLimitsAdder newCurrentLimits();\n \n+    default BoundaryPoint getBoundaryPoint() {\n+        throw new UnsupportedOperationException();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee867e1e7cd692766e8a12218db452331d0d4849"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY1ODAxNw==", "bodyText": "Is returning null better?", "url": "https://github.com/powsybl/powsybl-core/pull/1488#discussion_r518658017", "createdAt": "2020-11-06T10:25:40Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/TieLine.java", "diffHunk": "@@ -289,4 +301,7 @@ default HalfLine setFictitious(boolean fictitious) {\n      */\n     HalfLine getHalf(Side side);\n \n+    default BoundaryPoint getBoundaryPoint(Side side) {\n+        throw new UnsupportedOperationException();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee867e1e7cd692766e8a12218db452331d0d4849"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY3NzI2Mw==", "bodyText": "To make the code simpler to read, add two private methods to get the Voltage and the Angle a bus\nprivate double getV(Bus b) {\n    return bus == null ? Double.NaN : b.getV();\n}\nprivate double getAngle(Bus b) {\n    return bus == null ? Double.NaN : b.getAngle();\n}\n\nand use them everywhere. Maybe these methods could be share with the other implementation", "url": "https://github.com/powsybl/powsybl-core/pull/1488#discussion_r518677263", "createdAt": "2020-11-06T10:59:40Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/DanglingLineBoundaryPointImpl.java", "diffHunk": "@@ -0,0 +1,55 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.iidm.network.impl;\n+\n+import com.powsybl.iidm.network.BoundaryPoint;\n+import com.powsybl.iidm.network.Bus;\n+import com.powsybl.iidm.network.DanglingLine;\n+import com.powsybl.iidm.network.Terminal;\n+import com.powsybl.iidm.network.util.SV;\n+\n+import java.util.Objects;\n+\n+/**\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+class DanglingLineBoundaryPointImpl implements BoundaryPoint {\n+\n+    private final DanglingLine parent;\n+\n+    DanglingLineBoundaryPointImpl(DanglingLine parent) {\n+        this.parent = Objects.requireNonNull(parent);\n+    }\n+\n+    @Override\n+    public double getV() {\n+        Terminal t = parent.getTerminal();\n+        Bus b = t.getBusView().getBus();\n+        return new SV(t.getP(), t.getQ(), b != null ? b.getV() : Double.NaN, b != null ? b.getAngle() : Double.NaN).otherSideU(parent);\n+    }\n+\n+    @Override\n+    public double getAngle() {\n+        Terminal t = parent.getTerminal();\n+        Bus b = t.getBusView().getBus();\n+        return new SV(t.getP(), t.getQ(), b != null ? b.getV() : Double.NaN, b != null ? b.getAngle() : Double.NaN).otherSideA(parent);\n+    }\n+\n+    @Override\n+    public double getP() {\n+        Terminal t = parent.getTerminal();\n+        Bus b = t.getBusView().getBus();\n+        return new SV(t.getP(), t.getQ(), b != null ? b.getV() : Double.NaN, b != null ? b.getAngle() : Double.NaN).otherSideP(parent);\n+    }\n+\n+    @Override\n+    public double getQ() {\n+        Terminal t = parent.getTerminal();\n+        Bus b = t.getBusView().getBus();\n+        return new SV(t.getP(), t.getQ(), b != null ? b.getV() : Double.NaN, b != null ? b.getAngle() : Double.NaN).otherSideQ(parent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee867e1e7cd692766e8a12218db452331d0d4849"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY3Nzk4NA==", "bodyText": "terminalSupplier is a better name", "url": "https://github.com/powsybl/powsybl-core/pull/1488#discussion_r518677984", "createdAt": "2020-11-06T11:00:30Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/TieLineBoundaryPointImpl.java", "diffHunk": "@@ -0,0 +1,59 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.iidm.network.impl;\n+\n+import com.powsybl.iidm.network.BoundaryPoint;\n+import com.powsybl.iidm.network.Bus;\n+import com.powsybl.iidm.network.Terminal;\n+import com.powsybl.iidm.network.TieLine;\n+import com.powsybl.iidm.network.util.SV;\n+\n+import java.util.Objects;\n+import java.util.function.Supplier;\n+\n+/**\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+class TieLineBoundaryPointImpl implements BoundaryPoint {\n+\n+    private final Supplier<Terminal> terminalGetter;\n+\n+    private final TieLine.HalfLine halfLine;\n+\n+    TieLineBoundaryPointImpl(TieLine.HalfLine halfLine, Supplier<Terminal> terminalGetter) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee867e1e7cd692766e8a12218db452331d0d4849"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY4MTY0NQ==", "bodyText": "If values are computed, why do we read/write them? For instance we do not serialize the intensity (Terminal.getI())", "url": "https://github.com/powsybl/powsybl-core/pull/1488#discussion_r518681645", "createdAt": "2020-11-06T11:06:51Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/DanglingLineXml.java", "diffHunk": "@@ -132,4 +161,30 @@ protected void readSubElements(DanglingLine dl, NetworkXmlReaderContext context)\n             }\n         });\n     }\n+\n+    private static void readBoundaryPoint(String dlId, BoundaryPoint boundaryPoint, NetworkXmlReaderContext context) {\n+        XMLStreamReader reader = context.getReader();\n+        double p = XmlUtil.readOptionalDoubleAttribute(reader, \"p\");\n+        double q = XmlUtil.readOptionalDoubleAttribute(reader, \"q\");\n+        double v = XmlUtil.readOptionalDoubleAttribute(reader, \"v\");\n+        double angle = XmlUtil.readOptionalDoubleAttribute(reader, ANGLE);\n+        context.getEndTasks().add(() -> {\n+            checkBoundaryValue(p, boundaryPoint.getP(), \"p\", dlId);\n+            checkBoundaryValue(q, boundaryPoint.getQ(), \"q\", dlId);\n+            checkBoundaryValue(v, boundaryPoint.getV(), \"v\", dlId);\n+            checkBoundaryValue(angle, boundaryPoint.getAngle(), ANGLE, dlId);\n+        });\n+    }\n+\n+    private static void checkBoundaryValue(double imported, double calculated, String name, String dlId) {\n+        if (!Double.isNaN(imported) && imported != calculated) {\n+            LOG.info(\"boundaryPoint.{} of DanglingLine {} is recalculated. Its imported value is not used (imported value = {}; calculated value = {})\", name, dlId, imported, calculated);\n+        }\n+    }\n+\n+    private static boolean hasDefinedBoundaryPoint(DanglingLine dl) {\n+        BoundaryPoint boundaryPoint = dl.getBoundaryPoint();\n+        return !Double.isNaN(boundaryPoint.getP()) || !Double.isNaN(boundaryPoint.getQ()) ||\n+                !Double.isNaN(boundaryPoint.getV()) || !Double.isNaN(boundaryPoint.getAngle());\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee867e1e7cd692766e8a12218db452331d0d4849"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY4MjQ0NA==", "bodyText": "Same question: I would only write xnodeP and xnodeQ to keep compatibilty with old XIIDM version", "url": "https://github.com/powsybl/powsybl-core/pull/1488#discussion_r518682444", "createdAt": "2020-11-06T11:08:20Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/TieLineXml.java", "diffHunk": "@@ -45,8 +56,16 @@ private static void writeHalf(TieLine.HalfLine halfLine, NetworkXmlWriterContext\n         XmlUtil.writeDouble(\"b1_\" + side, halfLine.getB1(), context.getWriter());\n         XmlUtil.writeDouble(\"g2_\" + side, halfLine.getG2(), context.getWriter());\n         XmlUtil.writeDouble(\"b2_\" + side, halfLine.getB2(), context.getWriter());\n-        XmlUtil.writeDouble(\"xnodeP_\" + side, halfLine.getXnodeP(), context.getWriter());\n-        XmlUtil.writeDouble(\"xnodeQ_\" + side, halfLine.getXnodeQ(), context.getWriter());\n+        IidmXmlUtil.runUntilMaximumVersion(IidmXmlVersion.V_1_4, context, () -> {\n+            XmlUtil.writeDouble(\"xnodeP_\" + side, boundaryPoint.getP(), context.getWriter());\n+            XmlUtil.writeDouble(\"xnodeQ_\" + side, boundaryPoint.getQ(), context.getWriter());\n+        });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee867e1e7cd692766e8a12218db452331d0d4849"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY4MzA2MA==", "bodyText": "Why don't use the same type for DanglingLine and TieLines and serialize them as a sub-element?", "url": "https://github.com/powsybl/powsybl-core/pull/1488#discussion_r518683060", "createdAt": "2020-11-06T11:09:27Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-xml-converter/src/main/resources/xsd/iidm_V1_5.xsd", "diffHunk": "@@ -540,8 +547,10 @@\n                 <xs:attribute name=\"g2_1\" use=\"required\" type=\"xs:double\"/>\n                 <xs:attribute name=\"b1_1\" use=\"required\" type=\"xs:double\"/>\n                 <xs:attribute name=\"b2_1\" use=\"required\" type=\"xs:double\"/>\n-                <xs:attribute name=\"xnodeP_1\" use=\"required\" type=\"xs:double\"/>\n-                <xs:attribute name=\"xnodeQ_1\" use=\"required\" type=\"xs:double\"/>\n+                <xs:attribute name=\"boundaryPointP_1\" use=\"optional\" type=\"xs:double\"/>\n+                <xs:attribute name=\"boundaryPointQ_1\" use=\"optional\" type=\"xs:double\"/>\n+                <xs:attribute name=\"boundaryPointV_1\" use=\"optional\" type=\"xs:double\"/>\n+                <xs:attribute name=\"boundaryPointAngle_1\" use=\"optional\" type=\"xs:double\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee867e1e7cd692766e8a12218db452331d0d4849"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b06c98ffbeccefb8b2d4975db962c2669dee8cd", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/6b06c98ffbeccefb8b2d4975db962c2669dee8cd", "committedDate": "2020-11-18T11:17:05Z", "message": "Make IIDM test files in XIIDM 1.5\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c7f5ed87f3320b7cdba023ae7a4bf41d3c0306f", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/8c7f5ed87f3320b7cdba023ae7a4bf41d3c0306f", "committedDate": "2020-11-18T11:17:05Z", "message": "Update with loadDetailRef.xml\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "152cef109fdfc075d090a69dd5a10dd1fb2eb7ca", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/152cef109fdfc075d090a69dd5a10dd1fb2eb7ca", "committedDate": "2020-11-18T14:05:01Z", "message": "Change API to introduce BoundaryPoint\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "949dc0b53e64d4d702604c670b184595c0cc728f", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/949dc0b53e64d4d702604c670b184595c0cc728f", "committedDate": "2020-11-18T14:05:01Z", "message": "Implementation in merging view\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1b7ecaa3a9e6fc1cbff9fcb89e041dc735480b9", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/f1b7ecaa3a9e6fc1cbff9fcb89e041dc735480b9", "committedDate": "2020-11-18T14:05:01Z", "message": "P0/Q0 are not updated anymore when P/Q of mergedline are modified: it is P/Q of BoundaryPoint\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39d5aa8f245ee905eb6433f8b7770ae019e1f2eb", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/39d5aa8f245ee905eb6433f8b7770ae019e1f2eb", "committedDate": "2020-11-18T14:05:29Z", "message": "Modify API\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e5d6801b0fa349ec231eec10801bbca8ba104b3", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/8e5d6801b0fa349ec231eec10801bbca8ba104b3", "committedDate": "2020-11-18T14:05:29Z", "message": "Modify MergingView impl + tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3e869eec175b2cc4ddf40659186d6cc35bb01d2", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/d3e869eec175b2cc4ddf40659186d6cc35bb01d2", "committedDate": "2020-11-18T14:07:00Z", "message": "Implementation in memory for new API\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fcd17649a7d057f2b188f72539a05e7963db8ef", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/4fcd17649a7d057f2b188f72539a05e7963db8ef", "committedDate": "2020-11-18T14:07:00Z", "message": "Update serialization\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56d33641110932533159e7e5105282f85ce3716b", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/56d33641110932533159e7e5105282f85ce3716b", "committedDate": "2020-11-18T14:07:00Z", "message": "Create constants (code smells)\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f10bcce8b25a0654631355918c00c37e59f8c29e", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/f10bcce8b25a0654631355918c00c37e59f8c29e", "committedDate": "2020-11-18T14:07:08Z", "message": "XnodeV and XnodeAngle cannot be set by user but are calculated\nSame for XnodeP and XnodeQ (setters are deprecated)\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18671cc2e258dd0be8f88f20e708875264c55643", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/18671cc2e258dd0be8f88f20e708875264c55643", "committedDate": "2020-11-18T14:07:24Z", "message": "Breaking change: delete setXnodeP/Q\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e88af003b2f71192194c516b73e8da3c4be9aea", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/9e88af003b2f71192194c516b73e8da3c4be9aea", "committedDate": "2020-11-18T14:07:33Z", "message": "Delete setXnodeP/Q + adapt tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81eb6c5b085d8b80f730eb945f01f4ea3da77ca3", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/81eb6c5b085d8b80f730eb945f01f4ea3da77ca3", "committedDate": "2020-11-18T14:07:34Z", "message": "Add warning to ignore incorrect xnodeP/Q\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b873e2ecedebdb217c2f2d6ffa6664a0af3a7f2", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/4b873e2ecedebdb217c2f2d6ffa6664a0af3a7f2", "committedDate": "2020-11-18T14:07:34Z", "message": "Add a warning if tieline values are ignored during XML import\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "792187c8c7b1e61b715b1e6d3b6e0ce7c4ec632c", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/792187c8c7b1e61b715b1e6d3b6e0ce7c4ec632c", "committedDate": "2020-11-18T14:07:42Z", "message": "Refactoring code\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54b6f1981e353c6285f3d72c85b4737fd342413d", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/54b6f1981e353c6285f3d72c85b4737fd342413d", "committedDate": "2020-11-18T14:07:51Z", "message": "Add tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50a22561014fd10c166df1202b630a79ba8aed94", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/50a22561014fd10c166df1202b630a79ba8aed94", "committedDate": "2020-11-18T14:08:03Z", "message": "Use SV to calculate Xnode values\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2cf2b2fd03eb9abad7b77fe83c43b26501f4b35", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/f2cf2b2fd03eb9abad7b77fe83c43b26501f4b35", "committedDate": "2020-11-18T14:08:03Z", "message": "Add danglingLine listener\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eefa97c2ec00cbe2a941760adc80eee72d21c4c", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/9eefa97c2ec00cbe2a941760adc80eee72d21c4c", "committedDate": "2020-11-18T14:08:11Z", "message": "Init boundary/xnodes values when the equipment is created\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e390a0f77180f2501a924ed5f0e9f8cdb03ca7aa", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/e390a0f77180f2501a924ed5f0e9f8cdb03ca7aa", "committedDate": "2020-11-18T14:08:11Z", "message": "Delete setters of DanglingLine's BoundaryPoint\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67a7028995e12a5d52bd2ee6ac1497f72cb7c1f1", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/67a7028995e12a5d52bd2ee6ac1497f72cb7c1f1", "committedDate": "2020-11-18T14:08:11Z", "message": "Create variable (code smell)\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce0bc21e2762a875e7da198684b2a46ddf48432a", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/ce0bc21e2762a875e7da198684b2a46ddf48432a", "committedDate": "2020-11-18T14:08:11Z", "message": "BoundaryValues are calculated \"on the fly\" for dangling lines\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "546abed9f8867221a330187b1604c0335694e1e0", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/546abed9f8867221a330187b1604c0335694e1e0", "committedDate": "2020-11-18T14:10:54Z", "message": "Calculate boundary values \"on the fly\" for tie lines\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fd02a2eec6443ed73531c3d84339aeed77a1468", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/6fd02a2eec6443ed73531c3d84339aeed77a1468", "committedDate": "2020-11-18T14:11:03Z", "message": "Delete useless code\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c95faae9cb90958588d479690549bd7b5639ccb7", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/c95faae9cb90958588d479690549bd7b5639ccb7", "committedDate": "2020-11-18T14:11:16Z", "message": "Refactor SV\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31f2c5d7b67cd5ed956af7c97d7b34fe3f405927", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/31f2c5d7b67cd5ed956af7c97d7b34fe3f405927", "committedDate": "2020-11-18T14:11:28Z", "message": "Delete XnodeValuesComputation\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf0088e4223669e460d3eba9fd5224a36734e48e", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/cf0088e4223669e460d3eba9fd5224a36734e48e", "committedDate": "2020-11-18T14:11:28Z", "message": "Add a test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5206069453ba03b916a206b3cbb0ab707e932a5f", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/5206069453ba03b916a206b3cbb0ab707e932a5f", "committedDate": "2020-11-18T14:11:28Z", "message": "Rename boundary point values of tieline in XIIDM 1.5\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e39e6dface7a4ca3f8b78798abf45c6479521a2", "author": {"user": {"login": "mathbagu", "name": "Mathieu BAGUE"}}, "url": "https://github.com/powsybl/powsybl-core/commit/8e39e6dface7a4ca3f8b78798abf45c6479521a2", "committedDate": "2020-11-18T14:11:28Z", "message": "Fix AmplNetworkWriter implementation for TieLines\nExport AMPL exporter options\n\nSigned-off-by: Mathieu BAGUE <mathieu.bague@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "269814f441e45ea7caa703a9df164d392cc2b61a", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/269814f441e45ea7caa703a9df164d392cc2b61a", "committedDate": "2020-11-18T15:04:43Z", "message": "Correction after rebasing\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7a2ad4ee99029ebe1beb960c5ddca174adc7df20", "author": {"user": {"login": "mathbagu", "name": "Mathieu BAGUE"}}, "url": "https://github.com/powsybl/powsybl-core/commit/7a2ad4ee99029ebe1beb960c5ddca174adc7df20", "committedDate": "2020-11-06T17:31:46Z", "message": "Fix AmplNetworkWriter implementation for TieLines\nExport AMPL exporter options\n\nSigned-off-by: Mathieu BAGUE <mathieu.bague@rte-france.com>"}, "afterCommit": {"oid": "269814f441e45ea7caa703a9df164d392cc2b61a", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/269814f441e45ea7caa703a9df164d392cc2b61a", "committedDate": "2020-11-18T15:04:43Z", "message": "Correction after rebasing\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8330428d700faae4d9610f7c1cc1d29161c79ea", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/b8330428d700faae4d9610f7c1cc1d29161c79ea", "committedDate": "2020-11-18T16:25:02Z", "message": "Rename BoundaryPoint as OtherSide\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbdafe59b03454feb9823d0076dd7fd3c2580b45", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/bbdafe59b03454feb9823d0076dd7fd3c2580b45", "committedDate": "2020-11-19T10:07:30Z", "message": "Reviewer's comment: creating otherSide objects in tieLine in XIIDM\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d91cd193df6cd71a8b2c787fec706fa2bedaf6bb", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/d91cd193df6cd71a8b2c787fec706fa2bedaf6bb", "committedDate": "2020-11-19T10:29:54Z", "message": "Reviewer's comment: variable name and intermediary methods\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0MjgyMjc1", "url": "https://github.com/powsybl/powsybl-core/pull/1488#pullrequestreview-534282275", "createdAt": "2020-11-19T10:33:23Z", "commit": {"oid": "bbdafe59b03454feb9823d0076dd7fd3c2580b45"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ce13df8710e3c2d1f694c3c6b8da0bea7aeefe3", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/7ce13df8710e3c2d1f694c3c6b8da0bea7aeefe3", "committedDate": "2020-11-19T10:45:11Z", "message": "Reviewer's comment: other side's values are not serialized\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f03317670ac300eef29c4235f2bf8dde684bd60", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/2f03317670ac300eef29c4235f2bf8dde684bd60", "committedDate": "2020-11-19T12:31:54Z", "message": "Sonar: delete useless constants\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0058f9f60c26c53de9ba9ff09537051b25620583", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/0058f9f60c26c53de9ba9ff09537051b25620583", "committedDate": "2020-11-19T12:39:32Z", "message": "Rename OtherSide as Boundary\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63d1e6e19b613759444c69de786f5f6d755b291e", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/63d1e6e19b613759444c69de786f5f6d755b291e", "committedDate": "2020-11-20T15:03:04Z", "message": "Correct sign of xnodeP/Q\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "63d1e6e19b613759444c69de786f5f6d755b291e", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/63d1e6e19b613759444c69de786f5f6d755b291e", "committedDate": "2020-11-20T15:03:04Z", "message": "Correct sign of xnodeP/Q\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}, "afterCommit": {"oid": "0058f9f60c26c53de9ba9ff09537051b25620583", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/0058f9f60c26c53de9ba9ff09537051b25620583", "committedDate": "2020-11-19T12:39:32Z", "message": "Rename OtherSide as Boundary\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MzIxMTQ4", "url": "https://github.com/powsybl/powsybl-core/pull/1488#pullrequestreview-536321148", "createdAt": "2020-11-23T10:03:03Z", "commit": {"oid": "0058f9f60c26c53de9ba9ff09537051b25620583"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bfb2ce834e54b80d002945e905138952a46d930", "author": {"user": {"login": "annetill", "name": "Anne Tilloy"}}, "url": "https://github.com/powsybl/powsybl-core/commit/0bfb2ce834e54b80d002945e905138952a46d930", "committedDate": "2020-11-23T11:16:08Z", "message": "Re-organize SV class.\n\nSigned-off-by: Anne Tilloy <anne.tilloy@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8362a4a4d12ad7d1f49ecba4f594e2af4cf49699", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/8362a4a4d12ad7d1f49ecba4f594e2af4cf49699", "committedDate": "2020-11-23T11:32:25Z", "message": "Revert \"Correct sign of xnodeP/Q\"\n\nThis reverts commit 63d1e6e\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NDk4NjE2", "url": "https://github.com/powsybl/powsybl-core/pull/1488#pullrequestreview-536498616", "createdAt": "2020-11-23T14:02:25Z", "commit": {"oid": "8362a4a4d12ad7d1f49ecba4f594e2af4cf49699"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MzE4NTY2", "url": "https://github.com/powsybl/powsybl-core/pull/1488#pullrequestreview-537318566", "createdAt": "2020-11-24T09:53:11Z", "commit": {"oid": "0bfb2ce834e54b80d002945e905138952a46d930"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwOTo1MzoxMlrOH42h7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwOTo1MzoxMlrOH42h7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM3NTcyNg==", "bodyText": "maybe use rho instead of ratio", "url": "https://github.com/powsybl/powsybl-core/pull/1488#discussion_r529375726", "createdAt": "2020-11-24T09:53:12Z", "author": {"login": "marqueslanauja"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/SV.java", "diffHunk": "@@ -72,28 +84,49 @@ public double getA() {\n         return a;\n     }\n \n-    public SV otherSide(double r, double x, double g, double b, double ratio) {\n-        Complex z = new Complex(r, x); // z=r+jx\n-        Complex y = new Complex(g, b); // y=g+jb\n-        Complex s1 = new Complex(p, q); // s1=p1+jq1\n-        Complex u1 = ComplexUtils.polar2Complex(u, Math.toRadians(a));\n-        Complex v1 = u1.divide(Math.sqrt(3f)); // v1=u1/sqrt(3)\n-\n+    private Complex computeU2(Complex y1, Complex y2, Complex z, double ratio) {\n         Complex v1p = v1.multiply(ratio); // v1p=v1*rho\n-        Complex i1 = s1.divide(v1.multiply(3)).conjugate(); // i1=conj(s1/(3*v1))\n         Complex i1p = i1.divide(ratio); // i1p=i1/rho", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0bfb2ce834e54b80d002945e905138952a46d930"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MzIzNjI2", "url": "https://github.com/powsybl/powsybl-core/pull/1488#pullrequestreview-537323626", "createdAt": "2020-11-24T09:58:30Z", "commit": {"oid": "0bfb2ce834e54b80d002945e905138952a46d930"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwOTo1ODozMFrOH428sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwOTo1ODozMFrOH428sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM4MjU3OQ==", "bodyText": "Maybe change ratio by rho in all the class", "url": "https://github.com/powsybl/powsybl-core/pull/1488#discussion_r529382579", "createdAt": "2020-11-24T09:58:30Z", "author": {"login": "marqueslanauja"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/SV.java", "diffHunk": "@@ -72,28 +84,49 @@ public double getA() {\n         return a;\n     }\n \n-    public SV otherSide(double r, double x, double g, double b, double ratio) {\n-        Complex z = new Complex(r, x); // z=r+jx\n-        Complex y = new Complex(g, b); // y=g+jb\n-        Complex s1 = new Complex(p, q); // s1=p1+jq1\n-        Complex u1 = ComplexUtils.polar2Complex(u, Math.toRadians(a));\n-        Complex v1 = u1.divide(Math.sqrt(3f)); // v1=u1/sqrt(3)\n-\n+    private Complex computeU2(Complex y1, Complex y2, Complex z, double ratio) {\n         Complex v1p = v1.multiply(ratio); // v1p=v1*rho\n-        Complex i1 = s1.divide(v1.multiply(3)).conjugate(); // i1=conj(s1/(3*v1))\n         Complex i1p = i1.divide(ratio); // i1p=i1/rho\n-        Complex i2 = i1p.subtract(y.multiply(v1p)); // i2=i1p-y*v1p\n-        Complex v2 = v1p.subtract(z.multiply(i2)); // v2=v1p-z*i2\n+\n+        Complex i2p = i1p.subtract(y1.multiply(v1p)); // i2p=i1p-y1*v1p\n+        Complex v2 = v1p.subtract(z.multiply(i2p)); // v2p=v1p-z*i2\n+        Complex i2 = i2p.subtract(y2.multiply(v2)); // i2=i2p-y2*v2\n         Complex s2 = v2.multiply(3).multiply(i2.conjugate()); // s2=3*v2*conj(i2)\n+        return v2.multiply(Math.sqrt(3f));\n+    }\n \n-        Complex u2 = v2.multiply(Math.sqrt(3f));\n+    private Complex computeU2(Complex y, Complex z, double ratio) {\n+        return computeU2(y, new Complex(0, 0), z, ratio);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0bfb2ce834e54b80d002945e905138952a46d930"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0004823226e62138f081fa21d3e0fc8b5ab159e7", "author": {"user": {"login": "annetill", "name": "Anne Tilloy"}}, "url": "https://github.com/powsybl/powsybl-core/commit/0004823226e62138f081fa21d3e0fc8b5ab159e7", "committedDate": "2020-11-24T13:30:01Z", "message": "Rename after review.\n\nSigned-off-by: Anne Tilloy <anne.tilloy@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4Mzc4MDIw", "url": "https://github.com/powsybl/powsybl-core/pull/1488#pullrequestreview-538378020", "createdAt": "2020-11-25T10:56:46Z", "commit": {"oid": "0004823226e62138f081fa21d3e0fc8b5ab159e7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "756b7e46c4fdc3940d49d3cdd7fe5fab242f80c9", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/756b7e46c4fdc3940d49d3cdd7fe5fab242f80c9", "committedDate": "2020-12-01T09:26:20Z", "message": "Merge branch 'evolution_xiidm/1.5' into boundary_point\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\n# Conflicts:\n#\tiidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/DanglingLineImpl.java\n#\tiidm/iidm-xml-converter/src/main/resources/xsd/iidm_V1_5.xsd\n#\tiidm/iidm-xml-converter/src/test/resources/V1_5/danglingLine.xml\n#\tiidm/iidm-xml-converter/src/test/resources/V1_5/tieline.xml\n#\tiidm/iidm-xml-converter/src/test/resources/V1_5/tielineWithAliases.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3aa4f76bf6af97e649e560c75fd6b30df73a52be", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/3aa4f76bf6af97e649e560c75fd6b30df73a52be", "committedDate": "2020-12-01T09:49:09Z", "message": "Corrections tests following merge\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\n# Conflicts:\n#\tiidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/DanglingLineImpl.java\n#\tiidm/iidm-xml-converter/src/main/resources/xsd/iidm_V1_5.xsd\n#\tiidm/iidm-xml-converter/src/test/resources/V1_5/danglingLine.xml\n#\tiidm/iidm-xml-converter/src/test/resources/V1_5/tieline.xml\n#\tiidm/iidm-xml-converter/src/test/resources/V1_5/tielineWithAliases.xml"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3298179633a5d049528a77a4ebbc2e36f584615", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/b3298179633a5d049528a77a4ebbc2e36f584615", "committedDate": "2020-12-01T09:47:46Z", "message": "Merge branch 'evolution_xiidm/1.5' into boundary_point\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\n# Conflicts:\n#\tiidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/DanglingLineImpl.java\n#\tiidm/iidm-xml-converter/src/main/resources/xsd/iidm_V1_5.xsd\n#\tiidm/iidm-xml-converter/src/test/resources/V1_5/danglingLine.xml\n#\tiidm/iidm-xml-converter/src/test/resources/V1_5/tieline.xml\n#\tiidm/iidm-xml-converter/src/test/resources/V1_5/tielineWithAliases.xml"}, "afterCommit": {"oid": "3aa4f76bf6af97e649e560c75fd6b30df73a52be", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/3aa4f76bf6af97e649e560c75fd6b30df73a52be", "committedDate": "2020-12-01T09:49:09Z", "message": "Corrections tests following merge\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\n# Conflicts:\n#\tiidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/DanglingLineImpl.java\n#\tiidm/iidm-xml-converter/src/main/resources/xsd/iidm_V1_5.xsd\n#\tiidm/iidm-xml-converter/src/test/resources/V1_5/danglingLine.xml\n#\tiidm/iidm-xml-converter/src/test/resources/V1_5/tieline.xml\n#\tiidm/iidm-xml-converter/src/test/resources/V1_5/tielineWithAliases.xml"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4206, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}