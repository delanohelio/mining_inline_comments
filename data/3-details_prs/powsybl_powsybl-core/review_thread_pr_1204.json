{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzNjE2NDQ1", "number": 1204, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNToyMDowNlrODlFeNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNToyMDoyMlrODlFekA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMjEzNTU3OnYy", "diffSide": "RIGHT", "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/PhaseTapChangerImpl.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNToyMDowNlrOFxxfEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNjoyMTo1OFrOFx0Iug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzczNTMxNA==", "bodyText": "This seems to imply that the target deadband should always be set before using setRegulating. Should we propose a function to set the PST as regulating, together with the definition of the target deadband?", "url": "https://github.com/powsybl/powsybl-core/pull/1204#discussion_r387735314", "createdAt": "2020-03-04T15:20:06Z", "author": {"login": "agnesLeroy"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/PhaseTapChangerImpl.java", "diffHunk": "@@ -58,6 +58,7 @@ protected NetworkImpl getNetwork() {\n     @Override\n     public PhaseTapChangerImpl setRegulating(boolean regulating) {\n         ValidationUtil.checkPhaseTapChangerRegulation(parent, getRegulationMode(), getRegulationValue(), regulating, getRegulationTerminal(), getNetwork());\n+        ValidationUtil.checkTargetDeadband(parent, type, regulating, getTargetDeadband());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14ecb08a18f6e810a2d19a6e0782d98d58141068"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc2MDg4MA==", "bodyText": "It is the same principle as regulationValue, regulationMode and regulationTerminal: targetDeadband must be defined before setting regulation status to true. To do otherwise, a method with all these parameters should be implemented since they are all dependent on each other and it increases risks of confusion when using the API. The pattern setAttribute(attribute) has been chosen to be user-friendly even if the drawback is to be careful of the set order.", "url": "https://github.com/powsybl/powsybl-core/pull/1204#discussion_r387760880", "createdAt": "2020-03-04T15:56:00Z", "author": {"login": "miovd"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/PhaseTapChangerImpl.java", "diffHunk": "@@ -58,6 +58,7 @@ protected NetworkImpl getNetwork() {\n     @Override\n     public PhaseTapChangerImpl setRegulating(boolean regulating) {\n         ValidationUtil.checkPhaseTapChangerRegulation(parent, getRegulationMode(), getRegulationValue(), regulating, getRegulationTerminal(), getNetwork());\n+        ValidationUtil.checkTargetDeadband(parent, type, regulating, getTargetDeadband());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzczNTMxNA=="}, "originalCommit": {"oid": "14ecb08a18f6e810a2d19a6e0782d98d58141068"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc3ODc0Ng==", "bodyText": "I am adding some tests to check the exception is thrown if setters are not called in the right order.", "url": "https://github.com/powsybl/powsybl-core/pull/1204#discussion_r387778746", "createdAt": "2020-03-04T16:21:58Z", "author": {"login": "miovd"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/PhaseTapChangerImpl.java", "diffHunk": "@@ -58,6 +58,7 @@ protected NetworkImpl getNetwork() {\n     @Override\n     public PhaseTapChangerImpl setRegulating(boolean regulating) {\n         ValidationUtil.checkPhaseTapChangerRegulation(parent, getRegulationMode(), getRegulationValue(), regulating, getRegulationTerminal(), getNetwork());\n+        ValidationUtil.checkTargetDeadband(parent, type, regulating, getTargetDeadband());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzczNTMxNA=="}, "originalCommit": {"oid": "14ecb08a18f6e810a2d19a6e0782d98d58141068"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMjEzNjQ4OnYy", "diffSide": "RIGHT", "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/RatioTapChangerImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNToyMDoyMlrOFxxfww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNToyMDoyMlrOFxxfww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzczNTQ5MQ==", "bodyText": "Same comment", "url": "https://github.com/powsybl/powsybl-core/pull/1204#discussion_r387735491", "createdAt": "2020-03-04T15:20:22Z", "author": {"login": "agnesLeroy"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/RatioTapChangerImpl.java", "diffHunk": "@@ -57,6 +57,7 @@ protected NetworkImpl getNetwork() {\n     @Override\n     public RatioTapChangerImpl setRegulating(boolean regulating) {\n         ValidationUtil.checkRatioTapChangerRegulation(parent, regulating, regulationTerminal, getTargetV(), getNetwork());\n+        ValidationUtil.checkTargetDeadband(parent, type, regulating, getTargetDeadband());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14ecb08a18f6e810a2d19a6e0782d98d58141068"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 91, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}