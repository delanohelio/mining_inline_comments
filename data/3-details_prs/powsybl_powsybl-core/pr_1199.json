{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyODQzNTY4", "number": 1199, "title": "Add apparent power attribute (ratedS) on transformers in IIDM", "bodyText": "Please check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nDoes this PR already have an issue describing the problem ? If so, link to this issue using '#XXX' and skip the rest\nfix #1144\nWhat kind of change does this PR introduce? (Bug fix, feature, docs update, ...)\nFeature\nOther information:", "createdAt": "2020-03-03T09:44:02Z", "url": "https://github.com/powsybl/powsybl-core/pull/1199", "merged": true, "mergeCommit": {"oid": "12d202c22ec187ef7a2c45783a8cae86ec54564f"}, "closed": true, "closedAt": "2020-03-05T09:18:43Z", "author": {"login": "tadam50"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKCH04gFqTM2Nzk2NTQ1Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKnbHBAH2gAyMzgyODQzNTY4OjkzODcyNmQ4ZDk5ZjAyZWI3NTNlZjg0NWI0ODRmYTVlOThhYjc3Y2U=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3OTY1NDU3", "url": "https://github.com/powsybl/powsybl-core/pull/1199#pullrequestreview-367965457", "createdAt": "2020-03-03T13:13:41Z", "commit": {"oid": "dab02a432f79bd0bcd1061be38143a9c2530b585"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f100f790ce58e6f0790873afca0892f0e9dadfd2", "author": {"user": {"login": "tadam50", "name": "Thomas ADAM"}}, "url": "https://github.com/powsybl/powsybl-core/commit/f100f790ce58e6f0790873afca0892f0e9dadfd2", "committedDate": "2020-03-03T16:21:34Z", "message": "Taking into account PR remarks : move ratedS from ThreeWindingsTransformer to Leg\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>"}, "afterCommit": {"oid": "3de7474dd42d2d3dd01a4f0f910b006624e5c70c", "author": {"user": {"login": "tadam50", "name": "Thomas ADAM"}}, "url": "https://github.com/powsybl/powsybl-core/commit/3de7474dd42d2d3dd01a4f0f910b006624e5c70c", "committedDate": "2020-03-04T08:10:55Z", "message": "Taking into account PR remarks : move ratedS from ThreeWindingsTransformer to Leg\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee331c4b6b2738d86d89cf20febc203779734f3e", "author": {"user": {"login": "tadam50", "name": "Thomas ADAM"}}, "url": "https://github.com/powsybl/powsybl-core/commit/ee331c4b6b2738d86d89cf20febc203779734f3e", "committedDate": "2020-03-04T08:10:38Z", "message": "Add RatedS into ThreeWindingsTransformer & TwoWindingsTransformer\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c98b6a25d0f5ace9825670686d83a465bbced9ad", "author": {"user": {"login": "tadam50", "name": "Thomas ADAM"}}, "url": "https://github.com/powsybl/powsybl-core/commit/c98b6a25d0f5ace9825670686d83a465bbced9ad", "committedDate": "2020-03-04T08:10:47Z", "message": "Add management of RatedS into ThreeWindingsTransformerXML & TwoWindingsTransformerXML\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3de7474dd42d2d3dd01a4f0f910b006624e5c70c", "author": {"user": {"login": "tadam50", "name": "Thomas ADAM"}}, "url": "https://github.com/powsybl/powsybl-core/commit/3de7474dd42d2d3dd01a4f0f910b006624e5c70c", "committedDate": "2020-03-04T08:10:55Z", "message": "Taking into account PR remarks : move ratedS from ThreeWindingsTransformer to Leg\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cb02ff02503027f336776cae3b1cff54505bda4", "author": {"user": {"login": "tadam50", "name": "Thomas ADAM"}}, "url": "https://github.com/powsybl/powsybl-core/commit/2cb02ff02503027f336776cae3b1cff54505bda4", "committedDate": "2020-03-04T09:10:33Z", "message": "SonarCloud Code Analysis : fix code smell\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTk5Nzg0", "url": "https://github.com/powsybl/powsybl-core/pull/1199#pullrequestreview-368599784", "createdAt": "2020-03-04T08:59:20Z", "commit": {"oid": "3de7474dd42d2d3dd01a4f0f910b006624e5c70c"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwOTowMzowNVrOFxk30g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwOToxMDoxNlrOFxlF-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUyODY1OA==", "bodyText": "Add default implementation", "url": "https://github.com/powsybl/powsybl-core/pull/1199#discussion_r387528658", "createdAt": "2020-03-04T09:03:05Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/TwoWindingsTransformerAdder.java", "diffHunk": "@@ -24,6 +24,8 @@\n \n     TwoWindingsTransformerAdder setRatedU2(double ratedU2);\n \n+    TwoWindingsTransformerAdder setRatedS(double ratedS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3de7474dd42d2d3dd01a4f0f910b006624e5c70c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUzMjI4Mg==", "bodyText": "Rather than using a custom interface, you can use DoubleConsumer here and delete RatedSConsumer", "url": "https://github.com/powsybl/powsybl-core/pull/1199#discussion_r387532282", "createdAt": "2020-03-04T09:10:16Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/AbstractTransformerXml.java", "diffHunk": "@@ -246,4 +250,19 @@ private static void readSteps(NetworkXmlReaderContext context, StepConsumer cons\n         double rho = XmlUtil.readDoubleAttribute(context.getReader(), \"rho\");\n         consumer.accept(r, x, g, b, rho);\n     }\n+\n+    protected static void readRatedS(String name, NetworkXmlReaderContext context, RatedSConsumer consumer) {\n+        double ratedS = XmlUtil.readOptionalDoubleAttribute(context.getReader(), name);\n+        consumer.accept(ratedS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3de7474dd42d2d3dd01a4f0f910b006624e5c70c"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "befce96fabbb5e2f5509645a5f5a86fb78f9504d", "author": {"user": {"login": "tadam50", "name": "Thomas ADAM"}}, "url": "https://github.com/powsybl/powsybl-core/commit/befce96fabbb5e2f5509645a5f5a86fb78f9504d", "committedDate": "2020-03-04T10:51:33Z", "message": "Taking into account PR remarks : add default implementation & using DoubleConsumer\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NzIwMzg2", "url": "https://github.com/powsybl/powsybl-core/pull/1199#pullrequestreview-368720386", "createdAt": "2020-03-04T12:01:18Z", "commit": {"oid": "befce96fabbb5e2f5509645a5f5a86fb78f9504d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MzY5NDEy", "url": "https://github.com/powsybl/powsybl-core/pull/1199#pullrequestreview-369369412", "createdAt": "2020-03-05T08:24:00Z", "commit": {"oid": "befce96fabbb5e2f5509645a5f5a86fb78f9504d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwODoyNDowMVrOFyKEzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwODoyNzozMFrOFyKKkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEzODE4OA==", "bodyText": "Maybe we should put ratedS close to ratedU?", "url": "https://github.com/powsybl/powsybl-core/pull/1199#discussion_r388138188", "createdAt": "2020-03-05T08:24:01Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ThreeWindingsTransformerAdderImpl.java", "diffHunk": "@@ -137,15 +146,15 @@ public ThreeWindingsTransformerAdderImpl add() {\n             if (legNumber == 1) {\n                 voltageLevel1 = checkAndGetVoltageLevel();\n                 terminal1 = checkAndGetTerminal();\n-                leg1 = new LegImpl(r, x, g, b, ratedU, legNumber);\n+                leg1 = new LegImpl(r, x, g, b, ratedU, legNumber, ratedS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "befce96fabbb5e2f5509645a5f5a86fb78f9504d"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEzOTY2Ng==", "bodyText": "Seems useless to set ratedS to NaN.", "url": "https://github.com/powsybl/powsybl-core/pull/1199#discussion_r388139666", "createdAt": "2020-03-05T08:27:30Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-tck/src/test/java/com/powsybl/iidm/network/tck/AbstractThreeWindingsTransformerTest.java", "diffHunk": "@@ -408,6 +416,17 @@ public void invalidPhaseStepArgumentB() {\n             0.0, 0.0, Double.NaN);\n     }\n \n+    @Test\n+    public void invalidRatedS() {\n+        ThreeWindingsTransformer transformer = createThreeWindingsTransformer();\n+        ThreeWindingsTransformer.Leg leg1 = transformer.getLeg1();\n+        leg1.setRatedS(Double.NaN);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "befce96fabbb5e2f5509645a5f5a86fb78f9504d"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "938726d8d99f02eb753ef845b484fa5e98ab77ce", "author": {"user": {"login": "tadam50", "name": "Thomas ADAM"}}, "url": "https://github.com/powsybl/powsybl-core/commit/938726d8d99f02eb753ef845b484fa5e98ab77ce", "committedDate": "2020-03-05T08:41:14Z", "message": "Taking into account PR remarks : clean code\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4427, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}