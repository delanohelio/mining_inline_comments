{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MjM0OTg5", "number": 1258, "title": "Fix SynchronousComponent buses filtering", "bodyText": "Signed-off-by: Thomas ADAM tadam@silicom.fr\nPlease check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nDoes this PR already have an issue describing the problem ? If so, link to this issue using '#XXX' and skip the rest\nNo\nWhat kind of change does this PR introduce? (Bug fix, feature, docs update, ...)\nBug fix\nWhat is the current behavior? (You can also link to an open issue here)\nThe class ConnectedComponentImpl do not improve/override to super class ComponentImpl\nInto synchronous component the bus filter used is the same as connected component\nWhat is the new behavior (if this is a feature change)?\nAdd new abstract method into ComponentImpl in order to define the filtering lambda in getBuses() & getBusStream\nAdd a new class SynchronousComponentImpl as ConnectedComponentImpl\nDoes this PR introduce a breaking change or deprecate an API? If yes, check the following:\n\n The Breaking Change or Deprecated label has been added\n The migration guide has been updated in the github wiki (What changes might users need to make in their application due to this PR?)\n\nOther information:\n(if any of the questions/checkboxes don't apply, please delete them entirely)", "createdAt": "2020-04-03T15:19:41Z", "url": "https://github.com/powsybl/powsybl-core/pull/1258", "merged": true, "mergeCommit": {"oid": "0ff33c9d439eaa411d4277c36b4b6e16e372fbb1"}, "closed": true, "closedAt": "2020-04-07T14:48:10Z", "author": {"login": "tadam50"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcUCZJtgH2gAyMzk4MjM0OTg5OjI3ODFhNDA4MzZiNGE0Yzg5N2M3NTg5ZDBjYjM2MGMzZjk2ODNmODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVT6zZgH2gAyMzk4MjM0OTg5Ojk0MGNhMzRkZjJkZTBjMDZhMGUyZTVmYTlkODYzYmQ4NWFkM2Q0MDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2781a40836b4a4c897c7589d0cb360c3f9683f80", "author": {"user": {"login": "tadam50", "name": "Thomas ADAM"}}, "url": "https://github.com/powsybl/powsybl-core/commit/2781a40836b4a4c897c7589d0cb360c3f9683f80", "committedDate": "2020-04-03T15:11:51Z", "message": "Fix SynchronousComponent buses filtering\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25b0c4c445b8ec65912d99ebfcd7228319291466", "author": {"user": {"login": "tadam50", "name": "Thomas ADAM"}}, "url": "https://github.com/powsybl/powsybl-core/commit/25b0c4c445b8ec65912d99ebfcd7228319291466", "committedDate": "2020-04-03T15:45:05Z", "message": "Increase code coverage\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NDA5NDMw", "url": "https://github.com/powsybl/powsybl-core/pull/1258#pullrequestreview-388409430", "createdAt": "2020-04-06T16:17:43Z", "commit": {"oid": "25b0c4c445b8ec65912d99ebfcd7228319291466"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4OTAyMDI1", "url": "https://github.com/powsybl/powsybl-core/pull/1258#pullrequestreview-388902025", "createdAt": "2020-04-07T08:36:40Z", "commit": {"oid": "25b0c4c445b8ec65912d99ebfcd7228319291466"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwODozNjo0MFrOGB49gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwODozNjo0MFrOGB49gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDYzNTAxMA==", "bodyText": "We should rename this method to give it a better name like getBusFilter() or getBusPredicate()", "url": "https://github.com/powsybl/powsybl-core/pull/1258#discussion_r404635010", "createdAt": "2020-04-07T08:36:40Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/AbstractComponentImpl.java", "diffHunk": "@@ -44,11 +46,15 @@ public int getSize() {\n \n     @Override\n     public Iterable<Bus> getBuses() {\n-        return Iterables.filter(networkRef.get().getBusView().getBuses(), bus -> bus.getConnectedComponent() == ComponentImpl.this);\n+        return StreamSupport.stream(networkRef.get().getBusView().getBuses().spliterator(), false)\n+                            .filter(filterOnThis())\n+                            .collect(Collectors.toList());\n     }\n \n     @Override\n     public Stream<Bus> getBusStream() {\n-        return networkRef.get().getBusView().getBusStream().filter(bus -> bus.getConnectedComponent() == ComponentImpl.this);\n+        return networkRef.get().getBusView().getBusStream().filter(filterOnThis());\n     }\n+\n+    protected abstract Predicate<Bus> filterOnThis();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25b0c4c445b8ec65912d99ebfcd7228319291466"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MDYxNDM0", "url": "https://github.com/powsybl/powsybl-core/pull/1258#pullrequestreview-389061434", "createdAt": "2020-04-07T12:23:52Z", "commit": {"oid": "25b0c4c445b8ec65912d99ebfcd7228319291466"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bec3739355a1092bf74610852aee7717f5e40fa4", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/bec3739355a1092bf74610852aee7717f5e40fa4", "committedDate": "2020-04-07T13:05:42Z", "message": "rename filterOnthis as getBusPredicate\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MTU1MTY3", "url": "https://github.com/powsybl/powsybl-core/pull/1258#pullrequestreview-389155167", "createdAt": "2020-04-07T14:10:49Z", "commit": {"oid": "bec3739355a1092bf74610852aee7717f5e40fa4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "940ca34df2de0c06a0e2e5fa9d863bd85ad3d406", "author": {"user": {"login": "mathbagu", "name": "Mathieu BAGUE"}}, "url": "https://github.com/powsybl/powsybl-core/commit/940ca34df2de0c06a0e2e5fa9d863bd85ad3d406", "committedDate": "2020-04-07T14:10:55Z", "message": "Merge branch 'master' into fix_synchronousComponent_computation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4214, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}