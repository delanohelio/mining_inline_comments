{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4NzEwNzA4", "number": 1474, "reviewThreads": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMjowNDoyM1rOEk8RuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwOTo0ODo0MFrOEoASew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3MTcxNzY5OnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityComputation.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMjowNDoyM1rOHUKUrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMTo0ODoxOVrOHVMA1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkwMjcwMw==", "bodyText": "Maybe since we're breaking the API this would be an opportunity to rename SensitivityComputation into SensitivityAnalysis everywhere, since this is the standard name for it in English it seems?", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r490902703", "createdAt": "2020-09-18T12:04:23Z", "author": {"login": "agnesLeroy"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityComputation.java", "diffHunk": "@@ -1,53 +1,266 @@\n-/**\n+/*\n  * Copyright (c) 2018, RTE (http://www.rte-france.com)\n  * This Source Code Form is subject to the terms of the Mozilla Public\n  * License, v. 2.0. If a copy of the MPL was not distributed with this\n  * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n  */\n package com.powsybl.sensitivity;\n \n+import com.google.common.base.Suppliers;\n+import com.powsybl.commons.PowsyblException;\n import com.powsybl.commons.Versionable;\n+import com.powsybl.commons.config.PlatformConfig;\n+import com.powsybl.commons.util.ServiceLoaderCache;\n+import com.powsybl.computation.ComputationManager;\n+import com.powsybl.computation.DefaultComputationManagerConfig;\n import com.powsybl.contingency.ContingenciesProvider;\n+import com.powsybl.iidm.network.Network;\n \n+import java.util.List;\n+import java.util.Objects;\n import java.util.concurrent.CompletableFuture;\n+import java.util.function.Supplier;\n+import java.util.stream.Collectors;\n \n /**\n- * Sensitivity computation interface\n+ * Sensitivity computation main API. It is a utility class (so with only static methods) used as an entry point for running\n+ * a sensitivity computation allowing to choose either a specific implementation or just to rely on default one.\n  *\n- * <p>\n- *     Sensitivity computation is used to assess the impact of a small modification\n- *     of a network variables on the value of network functions.\n- *     This computation can be assimilated to a partial derivative computed on a given\n- *     network state and on that state modified based on a list of contingencies, if specified.\n- * </p>\n- * <p>\n- *     PTDFs used in Flowbased methodology for example are sensitivity computation\n- *     results. The sensitivity variables are the GSK shift and the sensitivity function\n- *     are the monitored lines/transformers flows.\n- * </p>\n- * @author Sebastien Murgey {@literal <sebastien.murgey at rte-france.com>}\n+ * @author Joris Mancini {@literal <joris.mancini at rte-france.com>}\n  */\n-public interface SensitivityComputation extends Versionable {\n+public final class SensitivityComputation {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82055da70d0828ac22877208054f2abe56fc5351"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTk3ODk2NA==", "bodyText": "Indeed, I did rename all the files and comments.", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r491978964", "createdAt": "2020-09-21T11:48:19Z", "author": {"login": "TheMaskedTurtle"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityComputation.java", "diffHunk": "@@ -1,53 +1,266 @@\n-/**\n+/*\n  * Copyright (c) 2018, RTE (http://www.rte-france.com)\n  * This Source Code Form is subject to the terms of the Mozilla Public\n  * License, v. 2.0. If a copy of the MPL was not distributed with this\n  * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n  */\n package com.powsybl.sensitivity;\n \n+import com.google.common.base.Suppliers;\n+import com.powsybl.commons.PowsyblException;\n import com.powsybl.commons.Versionable;\n+import com.powsybl.commons.config.PlatformConfig;\n+import com.powsybl.commons.util.ServiceLoaderCache;\n+import com.powsybl.computation.ComputationManager;\n+import com.powsybl.computation.DefaultComputationManagerConfig;\n import com.powsybl.contingency.ContingenciesProvider;\n+import com.powsybl.iidm.network.Network;\n \n+import java.util.List;\n+import java.util.Objects;\n import java.util.concurrent.CompletableFuture;\n+import java.util.function.Supplier;\n+import java.util.stream.Collectors;\n \n /**\n- * Sensitivity computation interface\n+ * Sensitivity computation main API. It is a utility class (so with only static methods) used as an entry point for running\n+ * a sensitivity computation allowing to choose either a specific implementation or just to rely on default one.\n  *\n- * <p>\n- *     Sensitivity computation is used to assess the impact of a small modification\n- *     of a network variables on the value of network functions.\n- *     This computation can be assimilated to a partial derivative computed on a given\n- *     network state and on that state modified based on a list of contingencies, if specified.\n- * </p>\n- * <p>\n- *     PTDFs used in Flowbased methodology for example are sensitivity computation\n- *     results. The sensitivity variables are the GSK shift and the sensitivity function\n- *     are the monitored lines/transformers flows.\n- * </p>\n- * @author Sebastien Murgey {@literal <sebastien.murgey at rte-france.com>}\n+ * @author Joris Mancini {@literal <joris.mancini at rte-france.com>}\n  */\n-public interface SensitivityComputation extends Versionable {\n+public final class SensitivityComputation {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkwMjcwMw=="}, "originalCommit": {"oid": "82055da70d0828ac22877208054f2abe56fc5351"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3MTc2MDI3OnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityComputationProvider.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMjoxNzo1OFrOHUKuZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMTo0ODoyN1rOHVMBRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkwOTI4Ng==", "bodyText": "Here the copyright should be 2020", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r490909286", "createdAt": "2020-09-18T12:17:58Z", "author": {"login": "agnesLeroy"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityComputationProvider.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Copyright (c) 2018, RTE (http://www.rte-france.com)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82055da70d0828ac22877208054f2abe56fc5351"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTk3OTA3OA==", "bodyText": "done", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r491979078", "createdAt": "2020-09-21T11:48:27Z", "author": {"login": "TheMaskedTurtle"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityComputationProvider.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Copyright (c) 2018, RTE (http://www.rte-france.com)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkwOTI4Ng=="}, "originalCommit": {"oid": "82055da70d0828ac22877208054f2abe56fc5351"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3MTg4MjM0OnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/SensitivityComputationTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMjo1NDowMFrOHUL4Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMTo0ODozMlrOHVMBnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkyODIxOQ==", "bodyText": "Here the copyright should be 2020", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r490928219", "createdAt": "2020-09-18T12:54:00Z", "author": {"login": "agnesLeroy"}, "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/SensitivityComputationTest.java", "diffHunk": "@@ -0,0 +1,145 @@\n+/*\n+ * Copyright (c) 2018, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82055da70d0828ac22877208054f2abe56fc5351"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTk3OTE2NA==", "bodyText": "done", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r491979164", "createdAt": "2020-09-21T11:48:32Z", "author": {"login": "TheMaskedTurtle"}, "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/SensitivityComputationTest.java", "diffHunk": "@@ -0,0 +1,145 @@\n+/*\n+ * Copyright (c) 2018, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkyODIxOQ=="}, "originalCommit": {"oid": "82055da70d0828ac22877208054f2abe56fc5351"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3MTg4MzE3OnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/mocks/AnotherSensitivityComputationProviderMock.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMjo1NDoxNVrOHUL44A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMTo0ODozN1rOHVMB6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkyODM1Mg==", "bodyText": "Here the copyright should be 2020", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r490928352", "createdAt": "2020-09-18T12:54:15Z", "author": {"login": "agnesLeroy"}, "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/mocks/AnotherSensitivityComputationProviderMock.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ * Copyright (c) 2018, RTE (http://www.rte-france.com)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82055da70d0828ac22877208054f2abe56fc5351"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTk3OTI0Mw==", "bodyText": "done", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r491979243", "createdAt": "2020-09-21T11:48:37Z", "author": {"login": "TheMaskedTurtle"}, "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/mocks/AnotherSensitivityComputationProviderMock.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ * Copyright (c) 2018, RTE (http://www.rte-france.com)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkyODM1Mg=="}, "originalCommit": {"oid": "82055da70d0828ac22877208054f2abe56fc5351"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3MTg4MzY0OnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/mocks/SensitivityComputationProviderMock.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMjo1NDoyMVrOHUL5Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMTo0ODo0MlrOHVMCPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkyODQyMg==", "bodyText": "Here the copyright should be 2020", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r490928422", "createdAt": "2020-09-18T12:54:21Z", "author": {"login": "agnesLeroy"}, "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/mocks/SensitivityComputationProviderMock.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ * Copyright (c) 2018, RTE (http://www.rte-france.com)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82055da70d0828ac22877208054f2abe56fc5351"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTk3OTMyNg==", "bodyText": "done", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r491979326", "createdAt": "2020-09-21T11:48:42Z", "author": {"login": "TheMaskedTurtle"}, "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/mocks/SensitivityComputationProviderMock.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ * Copyright (c) 2018, RTE (http://www.rte-france.com)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkyODQyMg=="}, "originalCommit": {"oid": "82055da70d0828ac22877208054f2abe56fc5351"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDEwNDY2OnYy", "diffSide": "RIGHT", "path": "loadflow/loadflow-api/src/main/java/com/powsybl/loadflow/LoadFlow.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDozNzowN1rOHXeGEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNToyNDozOFrOHXgTew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3MjM3MQ==", "bodyText": "I think you should not change this line: in the first implementation of the new loadflow API, we used the default property key instead of default-impl-name. I think changing this could be considered as a regression.\n@MioRtia what do you think? I don't remember if the default property could be forgotten...", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494372371", "createdAt": "2020-09-24T14:37:07Z", "author": {"login": "mathbagu"}, "path": "loadflow/loadflow-api/src/main/java/com/powsybl/loadflow/LoadFlow.java", "diffHunk": "@@ -96,7 +96,7 @@ public String getVersion() {\n      */\n     public static Runner find(String name) {\n         return new Runner(PlatformConfigNamedProvider.Finder\n-                .findBackwardsCompatible(name, \"load-flow\", LoadFlowProvider.class,\n+                .find(name, \"load-flow\", LoadFlowProvider.class,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQwODU3MQ==", "bodyText": "findBackwardsCompatible method is declared as deprecated but indeed it might be necessary to ensure compatibility with old load flow configurations, I can go back to this method.", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494408571", "createdAt": "2020-09-24T15:24:38Z", "author": {"login": "TheMaskedTurtle"}, "path": "loadflow/loadflow-api/src/main/java/com/powsybl/loadflow/LoadFlow.java", "diffHunk": "@@ -96,7 +96,7 @@ public String getVersion() {\n      */\n     public static Runner find(String name) {\n         return new Runner(PlatformConfigNamedProvider.Finder\n-                .findBackwardsCompatible(name, \"load-flow\", LoadFlowProvider.class,\n+                .find(name, \"load-flow\", LoadFlowProvider.class,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3MjM3MQ=="}, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDExMzIzOnYy", "diffSide": "RIGHT", "path": "sensitivity-api/pom.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDozODo1N1rOHXeLmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNToyOToxOFrOHXghqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3Mzc4Ng==", "bodyText": "Question: should we also change the name of the module? If yes, don't forget to change the name of the automatic module. If we do it, we probably also have to change the name of the packages... For FARAO, it could have a huge impact", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494373786", "createdAt": "2020-09-24T14:38:57Z", "author": {"login": "mathbagu"}, "path": "sensitivity-api/pom.xml", "diffHunk": "@@ -19,8 +19,8 @@\n     </parent>\n \n     <artifactId>powsybl-sensitivity-api</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQxMjIwMA==", "bodyText": "What do you mean by automatic module ?\n\n\nThen should I do as @murgeyseb suggested with a parent pom module named powsybl-sensitivity-analysis that contained a jar module powsybl-sensitivity-analaysis-api on the same model as for security analysis ?\n\n\nWhat would be the huge impact according to you ? Actually after sensi refactoring on FARAO side there are only two entry points of powsybl sensitivity module so adaptation will be easy", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494412200", "createdAt": "2020-09-24T15:29:18Z", "author": {"login": "TheMaskedTurtle"}, "path": "sensitivity-api/pom.xml", "diffHunk": "@@ -19,8 +19,8 @@\n     </parent>\n \n     <artifactId>powsybl-sensitivity-api</artifactId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3Mzc4Ng=="}, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDExNzA5OnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysis.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDozOTo0MlrOHXeN9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDozOTo0MlrOHXeN9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3NDM5MA==", "bodyText": "typo: on the default one", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494374390", "createdAt": "2020-09-24T14:39:42Z", "author": {"login": "mathbagu"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysis.java", "diffHunk": "@@ -0,0 +1,217 @@\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.sensitivity;\n+\n+import com.powsybl.commons.PowsyblException;\n+import com.powsybl.commons.Versionable;\n+import com.powsybl.commons.config.PlatformConfig;\n+import com.powsybl.commons.config.PlatformConfigNamedProvider;\n+import com.powsybl.computation.ComputationManager;\n+import com.powsybl.computation.DefaultComputationManagerConfig;\n+import com.powsybl.contingency.ContingenciesProvider;\n+import com.powsybl.iidm.network.Network;\n+\n+import java.util.Objects;\n+import java.util.concurrent.CompletableFuture;\n+\n+/**\n+ * Sensitivity analysis main API. It is a utility class (so with only static methods) used as an entry point for running\n+ * a sensitivity analysis allowing to choose either a specific implementation or just to rely on default one.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDE0MDUwOnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysis.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDo0NDoyN1rOHXeccw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDo0NDoyN1rOHXeccw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3ODA5OQ==", "bodyText": "I think it's not necessary to distinguish analysis with and without contingencies. Maybe it's sufficient to accept null for ContingencyProvider.\nDepending on what we decide, you can simply move this code in the runAsync method with all the parameters.", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494378099", "createdAt": "2020-09-24T14:44:27Z", "author": {"login": "mathbagu"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysis.java", "diffHunk": "@@ -0,0 +1,217 @@\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.sensitivity;\n+\n+import com.powsybl.commons.PowsyblException;\n+import com.powsybl.commons.Versionable;\n+import com.powsybl.commons.config.PlatformConfig;\n+import com.powsybl.commons.config.PlatformConfigNamedProvider;\n+import com.powsybl.computation.ComputationManager;\n+import com.powsybl.computation.DefaultComputationManagerConfig;\n+import com.powsybl.contingency.ContingenciesProvider;\n+import com.powsybl.iidm.network.Network;\n+\n+import java.util.Objects;\n+import java.util.concurrent.CompletableFuture;\n+\n+/**\n+ * Sensitivity analysis main API. It is a utility class (so with only static methods) used as an entry point for running\n+ * a sensitivity analysis allowing to choose either a specific implementation or just to rely on default one.\n+ *\n+ * @author Joris Mancini {@literal <joris.mancini at rte-france.com>}\n+ */\n+public final class SensitivityAnalysis {\n+\n+    private SensitivityAnalysis() {\n+        throw new AssertionError(\"Utility class should not been instantiated\");\n+    }\n+\n+    /**\n+     * A sensitivity analysis runner is responsible for providing convenient methods on top of {@link SensitivityAnalysisProvider}:\n+     * several variants of synchronous and asynchronous run with default parameters.\n+     */\n+    public static final class Runner implements Versionable {\n+\n+        private final SensitivityAnalysisProvider provider;\n+\n+        private Runner(SensitivityAnalysisProvider provider) {\n+            this.provider = Objects.requireNonNull(provider);\n+        }\n+\n+        private void checkInputs(Network network,\n+                                 String workingStateId,\n+                                 SensitivityFactorsProvider factorsProvider,\n+                                 ContingenciesProvider contingenciesProvider,\n+                                 SensitivityAnalysisParameters parameters,\n+                                 ComputationManager computationManager) {\n+            checkInputs(network, workingStateId, factorsProvider, parameters, computationManager);\n+            Objects.requireNonNull(contingenciesProvider, \"Contingencies provider should not be null\");\n+        }\n+\n+        private void checkInputs(Network network,\n+                                 String workingStateId,\n+                                 SensitivityFactorsProvider factorsProvider,\n+                                 SensitivityAnalysisParameters parameters,\n+                                 ComputationManager computationManager) {\n+            Objects.requireNonNull(network, \"Network should not be null\");\n+            Objects.requireNonNull(workingStateId, \"Parameters should not be null\");\n+            Objects.requireNonNull(factorsProvider, \"Sensitivity factors provider should not be null\");\n+            Objects.requireNonNull(parameters, \"Sensitivity analysis parameters should not be null\");\n+            Objects.requireNonNull(computationManager, \"Computation manager should not be null\");\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDE1MDI3OnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysis.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDo0NjoyOFrOHXeiiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDo0NjoyOFrOHXeiiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3OTY1Nw==", "bodyText": "I would prefer call the async method instead of the provider.run() method.", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494379657", "createdAt": "2020-09-24T14:46:28Z", "author": {"login": "mathbagu"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysis.java", "diffHunk": "@@ -0,0 +1,217 @@\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.sensitivity;\n+\n+import com.powsybl.commons.PowsyblException;\n+import com.powsybl.commons.Versionable;\n+import com.powsybl.commons.config.PlatformConfig;\n+import com.powsybl.commons.config.PlatformConfigNamedProvider;\n+import com.powsybl.computation.ComputationManager;\n+import com.powsybl.computation.DefaultComputationManagerConfig;\n+import com.powsybl.contingency.ContingenciesProvider;\n+import com.powsybl.iidm.network.Network;\n+\n+import java.util.Objects;\n+import java.util.concurrent.CompletableFuture;\n+\n+/**\n+ * Sensitivity analysis main API. It is a utility class (so with only static methods) used as an entry point for running\n+ * a sensitivity analysis allowing to choose either a specific implementation or just to rely on default one.\n+ *\n+ * @author Joris Mancini {@literal <joris.mancini at rte-france.com>}\n+ */\n+public final class SensitivityAnalysis {\n+\n+    private SensitivityAnalysis() {\n+        throw new AssertionError(\"Utility class should not been instantiated\");\n+    }\n+\n+    /**\n+     * A sensitivity analysis runner is responsible for providing convenient methods on top of {@link SensitivityAnalysisProvider}:\n+     * several variants of synchronous and asynchronous run with default parameters.\n+     */\n+    public static final class Runner implements Versionable {\n+\n+        private final SensitivityAnalysisProvider provider;\n+\n+        private Runner(SensitivityAnalysisProvider provider) {\n+            this.provider = Objects.requireNonNull(provider);\n+        }\n+\n+        private void checkInputs(Network network,\n+                                 String workingStateId,\n+                                 SensitivityFactorsProvider factorsProvider,\n+                                 ContingenciesProvider contingenciesProvider,\n+                                 SensitivityAnalysisParameters parameters,\n+                                 ComputationManager computationManager) {\n+            checkInputs(network, workingStateId, factorsProvider, parameters, computationManager);\n+            Objects.requireNonNull(contingenciesProvider, \"Contingencies provider should not be null\");\n+        }\n+\n+        private void checkInputs(Network network,\n+                                 String workingStateId,\n+                                 SensitivityFactorsProvider factorsProvider,\n+                                 SensitivityAnalysisParameters parameters,\n+                                 ComputationManager computationManager) {\n+            Objects.requireNonNull(network, \"Network should not be null\");\n+            Objects.requireNonNull(workingStateId, \"Parameters should not be null\");\n+            Objects.requireNonNull(factorsProvider, \"Sensitivity factors provider should not be null\");\n+            Objects.requireNonNull(parameters, \"Sensitivity analysis parameters should not be null\");\n+            Objects.requireNonNull(computationManager, \"Computation manager should not be null\");\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      String workingStateId,\n+                                                                      SensitivityFactorsProvider factorsProvider,\n+                                                                      ContingenciesProvider contingenciesProvider,\n+                                                                      SensitivityAnalysisParameters parameters,\n+                                                                      ComputationManager computationManager) {\n+            checkInputs(network, workingStateId, factorsProvider, contingenciesProvider, parameters, computationManager);\n+            return provider.run(network, workingStateId, factorsProvider, contingenciesProvider, parameters, computationManager);\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      String workingStateId,\n+                                                                      SensitivityFactorsProvider factorsProvider,\n+                                                                      ContingenciesProvider contingenciesProvider,\n+                                                                      SensitivityAnalysisParameters parameters) {\n+            return runAsync(network, workingStateId, factorsProvider, contingenciesProvider, parameters, DefaultComputationManagerConfig.load().createLongTimeExecutionComputationManager());\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      SensitivityFactorsProvider factorsProvider,\n+                                                                      ContingenciesProvider contingenciesProvider,\n+                                                                      SensitivityAnalysisParameters parameters) {\n+            return runAsync(network, network.getVariantManager().getWorkingVariantId(), factorsProvider, contingenciesProvider, parameters);\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      SensitivityFactorsProvider factorsProvider,\n+                                                                      ContingenciesProvider contingenciesProvider) {\n+            return runAsync(network, factorsProvider, contingenciesProvider, SensitivityAnalysisParameters.load());\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      String workingStateId,\n+                                                                      SensitivityFactorsProvider factorsProvider,\n+                                                                      SensitivityAnalysisParameters parameters,\n+                                                                      ComputationManager computationManager) {\n+            checkInputs(network, workingStateId, factorsProvider, parameters, computationManager);\n+            return provider.run(network, workingStateId, factorsProvider, parameters, computationManager);\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      String workingStateId,\n+                                                                      SensitivityFactorsProvider factorsProvider,\n+                                                                      SensitivityAnalysisParameters parameters) {\n+            return runAsync(network, workingStateId, factorsProvider, parameters, DefaultComputationManagerConfig.load().createLongTimeExecutionComputationManager());\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      SensitivityFactorsProvider factorsProvider,\n+                                                                      SensitivityAnalysisParameters parameters) {\n+            return runAsync(network, network.getVariantManager().getWorkingVariantId(), factorsProvider, parameters);\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      SensitivityFactorsProvider factorsProvider) {\n+            return runAsync(network, factorsProvider, SensitivityAnalysisParameters.load());\n+        }\n+\n+        public SensitivityAnalysisResults run(Network network,\n+                                              String workingStateId,\n+                                              SensitivityFactorsProvider factorsProvider,\n+                                              ContingenciesProvider contingenciesProvider,\n+                                              SensitivityAnalysisParameters parameters,\n+                                              ComputationManager computationManager) {\n+            checkInputs(network, workingStateId, factorsProvider, contingenciesProvider, parameters, computationManager);\n+            return provider.run(network, workingStateId, factorsProvider, contingenciesProvider, parameters, computationManager).join();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 132}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDE2MDUyOnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysis.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDo0ODoyNVrOHXeoxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDo0ODoyNVrOHXeoxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM4MTI1NQ==", "bodyText": "I think you should add static method to hide the usage of the runner class, like it's done in the LoadFlow or DynamicSimulation classes. To avoid too many methods, we could only consider some of them.", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494381255", "createdAt": "2020-09-24T14:48:25Z", "author": {"login": "mathbagu"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysis.java", "diffHunk": "@@ -0,0 +1,217 @@\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.sensitivity;\n+\n+import com.powsybl.commons.PowsyblException;\n+import com.powsybl.commons.Versionable;\n+import com.powsybl.commons.config.PlatformConfig;\n+import com.powsybl.commons.config.PlatformConfigNamedProvider;\n+import com.powsybl.computation.ComputationManager;\n+import com.powsybl.computation.DefaultComputationManagerConfig;\n+import com.powsybl.contingency.ContingenciesProvider;\n+import com.powsybl.iidm.network.Network;\n+\n+import java.util.Objects;\n+import java.util.concurrent.CompletableFuture;\n+\n+/**\n+ * Sensitivity analysis main API. It is a utility class (so with only static methods) used as an entry point for running\n+ * a sensitivity analysis allowing to choose either a specific implementation or just to rely on default one.\n+ *\n+ * @author Joris Mancini {@literal <joris.mancini at rte-france.com>}\n+ */\n+public final class SensitivityAnalysis {\n+\n+    private SensitivityAnalysis() {\n+        throw new AssertionError(\"Utility class should not been instantiated\");\n+    }\n+\n+    /**\n+     * A sensitivity analysis runner is responsible for providing convenient methods on top of {@link SensitivityAnalysisProvider}:\n+     * several variants of synchronous and asynchronous run with default parameters.\n+     */\n+    public static final class Runner implements Versionable {\n+\n+        private final SensitivityAnalysisProvider provider;\n+\n+        private Runner(SensitivityAnalysisProvider provider) {\n+            this.provider = Objects.requireNonNull(provider);\n+        }\n+\n+        private void checkInputs(Network network,\n+                                 String workingStateId,\n+                                 SensitivityFactorsProvider factorsProvider,\n+                                 ContingenciesProvider contingenciesProvider,\n+                                 SensitivityAnalysisParameters parameters,\n+                                 ComputationManager computationManager) {\n+            checkInputs(network, workingStateId, factorsProvider, parameters, computationManager);\n+            Objects.requireNonNull(contingenciesProvider, \"Contingencies provider should not be null\");\n+        }\n+\n+        private void checkInputs(Network network,\n+                                 String workingStateId,\n+                                 SensitivityFactorsProvider factorsProvider,\n+                                 SensitivityAnalysisParameters parameters,\n+                                 ComputationManager computationManager) {\n+            Objects.requireNonNull(network, \"Network should not be null\");\n+            Objects.requireNonNull(workingStateId, \"Parameters should not be null\");\n+            Objects.requireNonNull(factorsProvider, \"Sensitivity factors provider should not be null\");\n+            Objects.requireNonNull(parameters, \"Sensitivity analysis parameters should not be null\");\n+            Objects.requireNonNull(computationManager, \"Computation manager should not be null\");\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      String workingStateId,\n+                                                                      SensitivityFactorsProvider factorsProvider,\n+                                                                      ContingenciesProvider contingenciesProvider,\n+                                                                      SensitivityAnalysisParameters parameters,\n+                                                                      ComputationManager computationManager) {\n+            checkInputs(network, workingStateId, factorsProvider, contingenciesProvider, parameters, computationManager);\n+            return provider.run(network, workingStateId, factorsProvider, contingenciesProvider, parameters, computationManager);\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      String workingStateId,\n+                                                                      SensitivityFactorsProvider factorsProvider,\n+                                                                      ContingenciesProvider contingenciesProvider,\n+                                                                      SensitivityAnalysisParameters parameters) {\n+            return runAsync(network, workingStateId, factorsProvider, contingenciesProvider, parameters, DefaultComputationManagerConfig.load().createLongTimeExecutionComputationManager());\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      SensitivityFactorsProvider factorsProvider,\n+                                                                      ContingenciesProvider contingenciesProvider,\n+                                                                      SensitivityAnalysisParameters parameters) {\n+            return runAsync(network, network.getVariantManager().getWorkingVariantId(), factorsProvider, contingenciesProvider, parameters);\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      SensitivityFactorsProvider factorsProvider,\n+                                                                      ContingenciesProvider contingenciesProvider) {\n+            return runAsync(network, factorsProvider, contingenciesProvider, SensitivityAnalysisParameters.load());\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      String workingStateId,\n+                                                                      SensitivityFactorsProvider factorsProvider,\n+                                                                      SensitivityAnalysisParameters parameters,\n+                                                                      ComputationManager computationManager) {\n+            checkInputs(network, workingStateId, factorsProvider, parameters, computationManager);\n+            return provider.run(network, workingStateId, factorsProvider, parameters, computationManager);\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      String workingStateId,\n+                                                                      SensitivityFactorsProvider factorsProvider,\n+                                                                      SensitivityAnalysisParameters parameters) {\n+            return runAsync(network, workingStateId, factorsProvider, parameters, DefaultComputationManagerConfig.load().createLongTimeExecutionComputationManager());\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      SensitivityFactorsProvider factorsProvider,\n+                                                                      SensitivityAnalysisParameters parameters) {\n+            return runAsync(network, network.getVariantManager().getWorkingVariantId(), factorsProvider, parameters);\n+        }\n+\n+        public CompletableFuture<SensitivityAnalysisResults> runAsync(Network network,\n+                                                                      SensitivityFactorsProvider factorsProvider) {\n+            return runAsync(network, factorsProvider, SensitivityAnalysisParameters.load());\n+        }\n+\n+        public SensitivityAnalysisResults run(Network network,\n+                                              String workingStateId,\n+                                              SensitivityFactorsProvider factorsProvider,\n+                                              ContingenciesProvider contingenciesProvider,\n+                                              SensitivityAnalysisParameters parameters,\n+                                              ComputationManager computationManager) {\n+            checkInputs(network, workingStateId, factorsProvider, contingenciesProvider, parameters, computationManager);\n+            return provider.run(network, workingStateId, factorsProvider, contingenciesProvider, parameters, computationManager).join();\n+        }\n+\n+        public SensitivityAnalysisResults run(Network network,\n+                                              String workingStateId,\n+                                              SensitivityFactorsProvider factorsProvider,\n+                                              ContingenciesProvider contingenciesProvider,\n+                                              SensitivityAnalysisParameters parameters) {\n+            return run(network, workingStateId, factorsProvider, contingenciesProvider, parameters, DefaultComputationManagerConfig.load().createLongTimeExecutionComputationManager());\n+        }\n+\n+        public SensitivityAnalysisResults run(Network network,\n+                                              SensitivityFactorsProvider factorsProvider,\n+                                              ContingenciesProvider contingenciesProvider,\n+                                              SensitivityAnalysisParameters parameters) {\n+            return run(network, network.getVariantManager().getWorkingVariantId(), factorsProvider, contingenciesProvider, parameters);\n+        }\n+\n+        public SensitivityAnalysisResults run(Network network,\n+                                              SensitivityFactorsProvider factorsProvider,\n+                                              ContingenciesProvider contingenciesProvider) {\n+            return run(network, factorsProvider, contingenciesProvider, SensitivityAnalysisParameters.load());\n+        }\n+\n+        public SensitivityAnalysisResults run(Network network,\n+                                              String workingStateId,\n+                                              SensitivityFactorsProvider factorsProvider,\n+                                              SensitivityAnalysisParameters parameters,\n+                                              ComputationManager computationManager) {\n+            checkInputs(network, workingStateId, factorsProvider, parameters, computationManager);\n+            return provider.run(network, workingStateId, factorsProvider, parameters, computationManager).join();\n+        }\n+\n+        public SensitivityAnalysisResults run(Network network,\n+                                              String workingStateId,\n+                                              SensitivityFactorsProvider factorsProvider,\n+                                              SensitivityAnalysisParameters parameters) {\n+            return run(network, workingStateId, factorsProvider, parameters, DefaultComputationManagerConfig.load().createLongTimeExecutionComputationManager());\n+        }\n+\n+        public SensitivityAnalysisResults run(Network network,\n+                                              SensitivityFactorsProvider factorsProvider,\n+                                              SensitivityAnalysisParameters parameters) {\n+            return run(network, network.getVariantManager().getWorkingVariantId(), factorsProvider, parameters);\n+        }\n+\n+        public SensitivityAnalysisResults run(Network network,\n+                                              SensitivityFactorsProvider factorsProvider) {\n+            return run(network, factorsProvider, SensitivityAnalysisParameters.load());\n+        }\n+\n+        @Override\n+        public String getName() {\n+            return provider.getName();\n+        }\n+\n+        @Override\n+        public String getVersion() {\n+            return provider.getVersion();\n+        }\n+    }\n+\n+    /**\n+     * Get a runner for sensitivity analysis implementation named {@code name}. In the case of a null {@code name}, default\n+     * implementation is used.\n+     *\n+     * @param name name of the sensitivity analysis implementation, null if we want to use default one\n+     * @return a runner for sensitivity analysis implementation named {@code name}\n+     */\n+    public static Runner find(String name) {\n+        return new Runner(PlatformConfigNamedProvider.Finder\n+                .find(name, \"sensitivity-analysis\", SensitivityAnalysisProvider.class,\n+                        PlatformConfig.defaultConfig()));\n+    }\n+\n+    /**\n+     * Get a runner for default sensitivity analysis implementation.\n+     *\n+     * @throws PowsyblException in case we cannot find a default implementation\n+     * @return a runner for default sensitivity analysis implementation\n+     */\n+    public static Runner find() {\n+        return find(null);\n+    }\n+\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 217}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDE4NjI5OnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysisProvider.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDo1Mzo0MFrOHXe45w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNTozNjo1M1rOHXg3sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM4NTM4Mw==", "bodyText": "I think this interface should only have one method. ContingencyProvider could be nullable. It could also be managed by the runner and null value can be replaced by an empty contingency list like it's done here", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494385383", "createdAt": "2020-09-24T14:53:40Z", "author": {"login": "mathbagu"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysisProvider.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.sensitivity;\n+\n+import com.powsybl.commons.Versionable;\n+import com.powsybl.commons.config.PlatformConfigNamedProvider;\n+import com.powsybl.computation.ComputationManager;\n+import com.powsybl.contingency.ContingenciesProvider;\n+import com.powsybl.contingency.EmptyContingencyListProvider;\n+import com.powsybl.iidm.network.Network;\n+\n+import java.util.concurrent.CompletableFuture;\n+\n+/**\n+ * Sensitivity analysis provider\n+ *\n+ * <p>\n+ *     Sensitivity analysis is used to assess the impact of a small modification\n+ *     of a network variables on the value of network functions.\n+ *     This analysis can be assimilated to a partial derivative computed on a given\n+ *     network state and on that state modified based on a list of contingencies, if specified.\n+ * </p>\n+ * <p>\n+ *     PTDFs used in Flowbased methodology for example are sensitivity analysis\n+ *     results. The sensitivity variables are the GSK shift and the sensitivity function\n+ *     are the monitored lines/transformers flows.\n+ * </p>\n+ * @author Sebastien Murgey {@literal <sebastien.murgey at rte-france.com>}\n+ */\n+public interface SensitivityAnalysisProvider extends Versionable, PlatformConfigNamedProvider {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQxNzg0Mw==", "bodyText": "I thought it could be useful to have both if on implementation side only a simple sensi is implemented and not the systematic one, or only systematic and not simple. But I agree it would make the API a lot easier if there was only method in the interface....\nIf you still think it's not that useful I will change", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494417843", "createdAt": "2020-09-24T15:36:53Z", "author": {"login": "TheMaskedTurtle"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysisProvider.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.sensitivity;\n+\n+import com.powsybl.commons.Versionable;\n+import com.powsybl.commons.config.PlatformConfigNamedProvider;\n+import com.powsybl.computation.ComputationManager;\n+import com.powsybl.contingency.ContingenciesProvider;\n+import com.powsybl.contingency.EmptyContingencyListProvider;\n+import com.powsybl.iidm.network.Network;\n+\n+import java.util.concurrent.CompletableFuture;\n+\n+/**\n+ * Sensitivity analysis provider\n+ *\n+ * <p>\n+ *     Sensitivity analysis is used to assess the impact of a small modification\n+ *     of a network variables on the value of network functions.\n+ *     This analysis can be assimilated to a partial derivative computed on a given\n+ *     network state and on that state modified based on a list of contingencies, if specified.\n+ * </p>\n+ * <p>\n+ *     PTDFs used in Flowbased methodology for example are sensitivity analysis\n+ *     results. The sensitivity variables are the GSK shift and the sensitivity function\n+ *     are the monitored lines/transformers flows.\n+ * </p>\n+ * @author Sebastien Murgey {@literal <sebastien.murgey at rte-france.com>}\n+ */\n+public interface SensitivityAnalysisProvider extends Versionable, PlatformConfigNamedProvider {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM4NTM4Mw=="}, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDE5OTU1OnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysisResults.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDo1NjoyOVrOHXfBYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNTo1Njo0NlrOHXhvvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM4NzU1Mw==", "bodyText": "I think for the loadflow and dynamic simulation, we use Result instead of Results", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494387553", "createdAt": "2020-09-24T14:56:29Z", "author": {"login": "mathbagu"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysisResults.java", "diffHunk": "@@ -35,7 +35,7 @@\n  * @author Sebastien Murgey {@literal <sebastien.murgey at rte-france.com>}\n  * @see SensitivityValue\n  */\n-public class SensitivityComputationResults {\n+public class SensitivityAnalysisResults {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQzMjE4OA==", "bodyText": "Alright", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494432188", "createdAt": "2020-09-24T15:56:46Z", "author": {"login": "TheMaskedTurtle"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysisResults.java", "diffHunk": "@@ -35,7 +35,7 @@\n  * @author Sebastien Murgey {@literal <sebastien.murgey at rte-france.com>}\n  * @see SensitivityValue\n  */\n-public class SensitivityComputationResults {\n+public class SensitivityAnalysisResults {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM4NzU1Mw=="}, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDIwMjA4OnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysisTool.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDo1NzowNFrOHXfDIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNTo1NjoyN1rOHXhutQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM4ODAwMg==", "bodyText": "Arguable: the copyright date should be 2018 or 2018-2020", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494388002", "createdAt": "2020-09-24T14:57:04Z", "author": {"login": "mathbagu"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysisTool.java", "diffHunk": "@@ -1,5 +1,5 @@\n-/**\n- * Copyright (c) 2018, RTE (http://www.rte-france.com)\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQzMTkyNQ==", "bodyText": "Changed to 2018-2020", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494431925", "createdAt": "2020-09-24T15:56:27Z", "author": {"login": "TheMaskedTurtle"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysisTool.java", "diffHunk": "@@ -1,5 +1,5 @@\n-/**\n- * Copyright (c) 2018, RTE (http://www.rte-france.com)\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM4ODAwMg=="}, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDIwODczOnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysisTool.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDo1ODoyN1rOHXfHVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDo1ODoyN1rOHXfHVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM4OTA3Ng==", "bodyText": "With the new expected static methods in the SensitivityAnalysis class, the call to the find method has to be removed.", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494389076", "createdAt": "2020-09-24T14:58:27Z", "author": {"login": "mathbagu"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysisTool.java", "diffHunk": "@@ -135,37 +135,35 @@ public void run(CommandLine line, ToolRunningContext context) throws Exception {\n         if (network == null) {\n             throw new PowsyblException(\"Case '\" + caseFile + \"' not found\");\n         }\n-        SensitivityComputation sensitivityComputation = defaultConfig.newFactoryImpl(SensitivityComputationFactory.class).create(network, context.getShortTimeExecutionComputationManager(), 0);\n \n-        SensitivityComputationParameters params = SensitivityComputationParameters.load();\n+        SensitivityAnalysisParameters params = SensitivityAnalysisParameters.load();\n \n         if (line.hasOption(PARAMETERS_FILE)) {\n             Path parametersFile = context.getFileSystem().getPath(line.getOptionValue(PARAMETERS_FILE));\n-            JsonSensitivityComputationParameters.update(params, parametersFile);\n+            JsonSensitivityAnalysisParameters.update(params, parametersFile);\n         }\n-        String workingStateId = network.getVariantManager().getWorkingVariantId();\n         SensitivityFactorsProviderFactory factorsProviderFactory = defaultConfig.newFactoryImpl(SensitivityFactorsProviderFactory.class);\n         SensitivityFactorsProvider factorsProvider = factorsProviderFactory.create(sensitivityFactorsFile);\n \n-        SensitivityComputationResults result;\n+        SensitivityAnalysisResults result;\n         if (line.hasOption(CONTINGENCIES_FILE_OPTION)) {\n             ContingenciesProviderFactory contingenciesProviderFactory = defaultConfig.newFactoryImpl(ContingenciesProviderFactory.class);\n             ContingenciesProvider contingenciesProvider = contingenciesProviderFactory.create(context.getFileSystem().getPath(line.getOptionValue(CONTINGENCIES_FILE_OPTION)));\n-            result = sensitivityComputation.run(factorsProvider, contingenciesProvider, workingStateId, params).join();\n+            result = SensitivityAnalysis.find().run(network, factorsProvider, contingenciesProvider, params);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 93}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDIxNDk0OnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysisTool.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDo1OTo0NVrOHXfLaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDo1OTo0NVrOHXfLaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM5MDEyMQ==", "bodyText": "From my point of view, this code could be simpler: by default, create an EmptyContingencyList, and if the option is used, load the contingency list. The rest of the code is common.\nFrom my point of view, we could consider that the API always have a NotNullable contingencyList then?", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494390121", "createdAt": "2020-09-24T14:59:45Z", "author": {"login": "mathbagu"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/SensitivityAnalysisTool.java", "diffHunk": "@@ -135,37 +135,35 @@ public void run(CommandLine line, ToolRunningContext context) throws Exception {\n         if (network == null) {\n             throw new PowsyblException(\"Case '\" + caseFile + \"' not found\");\n         }\n-        SensitivityComputation sensitivityComputation = defaultConfig.newFactoryImpl(SensitivityComputationFactory.class).create(network, context.getShortTimeExecutionComputationManager(), 0);\n \n-        SensitivityComputationParameters params = SensitivityComputationParameters.load();\n+        SensitivityAnalysisParameters params = SensitivityAnalysisParameters.load();\n \n         if (line.hasOption(PARAMETERS_FILE)) {\n             Path parametersFile = context.getFileSystem().getPath(line.getOptionValue(PARAMETERS_FILE));\n-            JsonSensitivityComputationParameters.update(params, parametersFile);\n+            JsonSensitivityAnalysisParameters.update(params, parametersFile);\n         }\n-        String workingStateId = network.getVariantManager().getWorkingVariantId();\n         SensitivityFactorsProviderFactory factorsProviderFactory = defaultConfig.newFactoryImpl(SensitivityFactorsProviderFactory.class);\n         SensitivityFactorsProvider factorsProvider = factorsProviderFactory.create(sensitivityFactorsFile);\n \n-        SensitivityComputationResults result;\n+        SensitivityAnalysisResults result;\n         if (line.hasOption(CONTINGENCIES_FILE_OPTION)) {\n             ContingenciesProviderFactory contingenciesProviderFactory = defaultConfig.newFactoryImpl(ContingenciesProviderFactory.class);\n             ContingenciesProvider contingenciesProvider = contingenciesProviderFactory.create(context.getFileSystem().getPath(line.getOptionValue(CONTINGENCIES_FILE_OPTION)));\n-            result = sensitivityComputation.run(factorsProvider, contingenciesProvider, workingStateId, params).join();\n+            result = SensitivityAnalysis.find().run(network, factorsProvider, contingenciesProvider, params);\n         } else {\n-            result = sensitivityComputation.run(factorsProvider, workingStateId, params).join();\n+            result = SensitivityAnalysis.find().run(network, factorsProvider, params);\n         }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 97}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDIyMjY2OnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/json/SensitivityAnalysisParametersSerializer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNTowMToxNVrOHXfQKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwNzo0NzoyM1rOHX4usA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM5MTMzOQ==", "bodyText": "Question: should we make this constructor public?", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494391339", "createdAt": "2020-09-24T15:01:15Z", "author": {"login": "mathbagu"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/json/SensitivityAnalysisParametersSerializer.java", "diffHunk": "@@ -11,32 +11,32 @@\n import com.fasterxml.jackson.databind.ser.std.StdSerializer;\n import com.powsybl.commons.json.JsonUtil;\n import com.powsybl.loadflow.json.JsonLoadFlowParameters;\n-import com.powsybl.sensitivity.SensitivityComputationParameters;\n+import com.powsybl.sensitivity.SensitivityAnalysisParameters;\n \n import java.io.IOException;\n \n /**\n- * Json serializer for sensitivity computation parameters\n+ * Json serializer for sensitivity analysis parameters\n  *\n  * @author Sebastien Murgey <sebastien.murgey at rte-france.com>\n  */\n-public class SensitivityComputationParametersSerializer extends StdSerializer<SensitivityComputationParameters> {\n+public class SensitivityAnalysisParametersSerializer extends StdSerializer<SensitivityAnalysisParameters> {\n \n-    SensitivityComputationParametersSerializer() {\n-        super(SensitivityComputationParameters.class);\n+    SensitivityAnalysisParametersSerializer() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDgwODc1Mg==", "bodyText": "In the use, it is more supposed to be added to the SensitivityAnalysisParametersJsonModule. I think there is no \"security\" issue by making it public but I am not sure it will ever be used.", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494808752", "createdAt": "2020-09-25T07:47:23Z", "author": {"login": "TheMaskedTurtle"}, "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/json/SensitivityAnalysisParametersSerializer.java", "diffHunk": "@@ -11,32 +11,32 @@\n import com.fasterxml.jackson.databind.ser.std.StdSerializer;\n import com.powsybl.commons.json.JsonUtil;\n import com.powsybl.loadflow.json.JsonLoadFlowParameters;\n-import com.powsybl.sensitivity.SensitivityComputationParameters;\n+import com.powsybl.sensitivity.SensitivityAnalysisParameters;\n \n import java.io.IOException;\n \n /**\n- * Json serializer for sensitivity computation parameters\n+ * Json serializer for sensitivity analysis parameters\n  *\n  * @author Sebastien Murgey <sebastien.murgey at rte-france.com>\n  */\n-public class SensitivityComputationParametersSerializer extends StdSerializer<SensitivityComputationParameters> {\n+public class SensitivityAnalysisParametersSerializer extends StdSerializer<SensitivityAnalysisParameters> {\n \n-    SensitivityComputationParametersSerializer() {\n-        super(SensitivityComputationParameters.class);\n+    SensitivityAnalysisParametersSerializer() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM5MTMzOQ=="}, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDIyODUzOnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/SensitivityAnalysisTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNTowMjozNFrOHXfT5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNTo0MjowNVrOHXhGIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM5MjI5Mw==", "bodyText": "Is this comment useful (3 times)", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494392293", "createdAt": "2020-09-24T15:02:34Z", "author": {"login": "mathbagu"}, "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/SensitivityAnalysisTest.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.sensitivity;\n+\n+import com.powsybl.computation.ComputationManager;\n+import com.powsybl.contingency.ContingenciesProvider;\n+import com.powsybl.iidm.network.Network;\n+import com.powsybl.iidm.network.VariantManager;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.mockito.Mockito;\n+\n+import java.util.concurrent.CompletableFuture;\n+import java.util.concurrent.ExecutionException;\n+\n+import static org.junit.Assert.*;\n+\n+/**\n+ * @author Joris Mancini {@literal <joris.mancini at rte-france.com>}\n+ */\n+public class SensitivityAnalysisTest {\n+\n+    private static final String DEFAULT_PROVIDER_NAME = \"SensitivityAnalysisMock\";\n+\n+    private Network network;\n+    private ComputationManager computationManager;\n+    private SensitivityFactorsProvider sensitivityFactorsProvider;\n+    private ContingenciesProvider contingenciesProvider;\n+\n+    @Before\n+    public void setUp() {\n+        network = Mockito.mock(Network.class);\n+        VariantManager variantManager = Mockito.mock(VariantManager.class);\n+        Mockito.when(network.getVariantManager()).thenReturn(variantManager);\n+        Mockito.when(variantManager.getWorkingVariantId()).thenReturn(\"v\");\n+        computationManager = Mockito.mock(ComputationManager.class);\n+        sensitivityFactorsProvider = Mockito.mock(SensitivityFactorsProvider.class);\n+        contingenciesProvider = Mockito.mock(ContingenciesProvider.class);\n+    }\n+\n+    @Test\n+    public void testDefaultProvider() {\n+        SensitivityAnalysis.Runner defaultSensitivityAnalysisRunner = SensitivityAnalysis.find();\n+        assertEquals(DEFAULT_PROVIDER_NAME, defaultSensitivityAnalysisRunner.getName());\n+        SensitivityAnalysisResults results = defaultSensitivityAnalysisRunner.run(network, sensitivityFactorsProvider, contingenciesProvider);\n+        assertNotNull(results);\n+        assertTrue(results.isOk());\n+        assertEquals(\"1.0\", defaultSensitivityAnalysisRunner.getVersion());\n+    }\n+\n+    @Test\n+    public void testAsyncNamedProvider() throws InterruptedException, ExecutionException {\n+        // named provider", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQyMTUzOA==", "bodyText": "Not really", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494421538", "createdAt": "2020-09-24T15:42:05Z", "author": {"login": "TheMaskedTurtle"}, "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/SensitivityAnalysisTest.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.sensitivity;\n+\n+import com.powsybl.computation.ComputationManager;\n+import com.powsybl.contingency.ContingenciesProvider;\n+import com.powsybl.iidm.network.Network;\n+import com.powsybl.iidm.network.VariantManager;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.mockito.Mockito;\n+\n+import java.util.concurrent.CompletableFuture;\n+import java.util.concurrent.ExecutionException;\n+\n+import static org.junit.Assert.*;\n+\n+/**\n+ * @author Joris Mancini {@literal <joris.mancini at rte-france.com>}\n+ */\n+public class SensitivityAnalysisTest {\n+\n+    private static final String DEFAULT_PROVIDER_NAME = \"SensitivityAnalysisMock\";\n+\n+    private Network network;\n+    private ComputationManager computationManager;\n+    private SensitivityFactorsProvider sensitivityFactorsProvider;\n+    private ContingenciesProvider contingenciesProvider;\n+\n+    @Before\n+    public void setUp() {\n+        network = Mockito.mock(Network.class);\n+        VariantManager variantManager = Mockito.mock(VariantManager.class);\n+        Mockito.when(network.getVariantManager()).thenReturn(variantManager);\n+        Mockito.when(variantManager.getWorkingVariantId()).thenReturn(\"v\");\n+        computationManager = Mockito.mock(ComputationManager.class);\n+        sensitivityFactorsProvider = Mockito.mock(SensitivityFactorsProvider.class);\n+        contingenciesProvider = Mockito.mock(ContingenciesProvider.class);\n+    }\n+\n+    @Test\n+    public void testDefaultProvider() {\n+        SensitivityAnalysis.Runner defaultSensitivityAnalysisRunner = SensitivityAnalysis.find();\n+        assertEquals(DEFAULT_PROVIDER_NAME, defaultSensitivityAnalysisRunner.getName());\n+        SensitivityAnalysisResults results = defaultSensitivityAnalysisRunner.run(network, sensitivityFactorsProvider, contingenciesProvider);\n+        assertNotNull(results);\n+        assertTrue(results.isOk());\n+        assertEquals(\"1.0\", defaultSensitivityAnalysisRunner.getVersion());\n+    }\n+\n+    @Test\n+    public void testAsyncNamedProvider() throws InterruptedException, ExecutionException {\n+        // named provider", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM5MjI5Mw=="}, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDIzMjg2OnYy", "diffSide": "RIGHT", "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/mocks/AnotherSensitivityAnalysisProviderMock.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNTowMzozNlrOHXfWuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwNzo0NDo1OVrOHX4p6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM5MzAxNg==", "bodyText": "Do you forget the @AutoService?", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494393016", "createdAt": "2020-09-24T15:03:36Z", "author": {"login": "mathbagu"}, "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/mocks/AnotherSensitivityAnalysisProviderMock.java", "diffHunk": "@@ -0,0 +1,55 @@\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.sensitivity.mocks;\n+\n+import com.powsybl.computation.ComputationManager;\n+import com.powsybl.contingency.ContingenciesProvider;\n+import com.powsybl.iidm.network.Network;\n+import com.powsybl.sensitivity.SensitivityAnalysisParameters;\n+import com.powsybl.sensitivity.SensitivityAnalysisProvider;\n+import com.powsybl.sensitivity.SensitivityAnalysisResults;\n+import com.powsybl.sensitivity.SensitivityFactorsProvider;\n+\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.concurrent.CompletableFuture;\n+\n+/**\n+ * @author Joris Mancini {@literal <joris.mancini at rte-france.com>}\n+ */\n+public class AnotherSensitivityAnalysisProviderMock implements SensitivityAnalysisProvider {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQyMzIwMA==", "bodyText": "Yes !", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494423200", "createdAt": "2020-09-24T15:44:31Z", "author": {"login": "TheMaskedTurtle"}, "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/mocks/AnotherSensitivityAnalysisProviderMock.java", "diffHunk": "@@ -0,0 +1,55 @@\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.sensitivity.mocks;\n+\n+import com.powsybl.computation.ComputationManager;\n+import com.powsybl.contingency.ContingenciesProvider;\n+import com.powsybl.iidm.network.Network;\n+import com.powsybl.sensitivity.SensitivityAnalysisParameters;\n+import com.powsybl.sensitivity.SensitivityAnalysisProvider;\n+import com.powsybl.sensitivity.SensitivityAnalysisResults;\n+import com.powsybl.sensitivity.SensitivityFactorsProvider;\n+\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.concurrent.CompletableFuture;\n+\n+/**\n+ * @author Joris Mancini {@literal <joris.mancini at rte-france.com>}\n+ */\n+public class AnotherSensitivityAnalysisProviderMock implements SensitivityAnalysisProvider {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM5MzAxNg=="}, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDgwNzUzMA==", "bodyText": "I actually deleted this class, it was not used in the tests anymore", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r494807530", "createdAt": "2020-09-25T07:44:59Z", "author": {"login": "TheMaskedTurtle"}, "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/mocks/AnotherSensitivityAnalysisProviderMock.java", "diffHunk": "@@ -0,0 +1,55 @@\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.sensitivity.mocks;\n+\n+import com.powsybl.computation.ComputationManager;\n+import com.powsybl.contingency.ContingenciesProvider;\n+import com.powsybl.iidm.network.Network;\n+import com.powsybl.sensitivity.SensitivityAnalysisParameters;\n+import com.powsybl.sensitivity.SensitivityAnalysisProvider;\n+import com.powsybl.sensitivity.SensitivityAnalysisResults;\n+import com.powsybl.sensitivity.SensitivityFactorsProvider;\n+\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.concurrent.CompletableFuture;\n+\n+/**\n+ * @author Joris Mancini {@literal <joris.mancini at rte-france.com>}\n+ */\n+public class AnotherSensitivityAnalysisProviderMock implements SensitivityAnalysisProvider {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM5MzAxNg=="}, "originalCommit": {"oid": "e22366b8098c7b13ab685daffe602621903b93af"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwMzgxNjA3OnYy", "diffSide": "RIGHT", "path": "sensitivity-analysis-api/src/main/java/com/powsybl/sensitivity/analysis/json/SensitivityAnalysisParametersJsonModule.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwOTo0NDo0NFrOHY2NoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxMToyNTo1NlrOHY5awA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgxNjA5Nw==", "bodyText": "Should the copyright be 2020? Or is it a moved file?", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r495816097", "createdAt": "2020-09-28T09:44:44Z", "author": {"login": "miovd"}, "path": "sensitivity-analysis-api/src/main/java/com/powsybl/sensitivity/analysis/json/SensitivityAnalysisParametersJsonModule.java", "diffHunk": "@@ -0,0 +1,23 @@\n+/**\n+ * Copyright (c) 2018, RTE (http://www.rte-france.com)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8470c442acd7c38b680b909ae7b44c26e528ad6"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg2ODYwOA==", "bodyText": "It is a moved file (renamed but moved)", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r495868608", "createdAt": "2020-09-28T11:25:56Z", "author": {"login": "murgeyseb"}, "path": "sensitivity-analysis-api/src/main/java/com/powsybl/sensitivity/analysis/json/SensitivityAnalysisParametersJsonModule.java", "diffHunk": "@@ -0,0 +1,23 @@\n+/**\n+ * Copyright (c) 2018, RTE (http://www.rte-france.com)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgxNjA5Nw=="}, "originalCommit": {"oid": "c8470c442acd7c38b680b909ae7b44c26e528ad6"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwMzgzMjI3OnYy", "diffSide": "RIGHT", "path": "sensitivity-analysis-api/src/test/java/com/powsybl/sensitivity/analysis/converter/SensitivityAnalysisResultExportersTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwOTo0ODo0MFrOHY2XKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxMToyNjowMlrOHY5a_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgxODUzNw==", "bodyText": "Same question", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r495818537", "createdAt": "2020-09-28T09:48:40Z", "author": {"login": "miovd"}, "path": "sensitivity-analysis-api/src/test/java/com/powsybl/sensitivity/analysis/converter/SensitivityAnalysisResultExportersTest.java", "diffHunk": "@@ -0,0 +1,45 @@\n+/**\n+ * Copyright (c) 2018, RTE (http://www.rte-france.com)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8470c442acd7c38b680b909ae7b44c26e528ad6"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg2ODY2OA==", "bodyText": "It is a moved file (renamed but moved)", "url": "https://github.com/powsybl/powsybl-core/pull/1474#discussion_r495868668", "createdAt": "2020-09-28T11:26:02Z", "author": {"login": "murgeyseb"}, "path": "sensitivity-analysis-api/src/test/java/com/powsybl/sensitivity/analysis/converter/SensitivityAnalysisResultExportersTest.java", "diffHunk": "@@ -0,0 +1,45 @@\n+/**\n+ * Copyright (c) 2018, RTE (http://www.rte-france.com)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgxODUzNw=="}, "originalCommit": {"oid": "c8470c442acd7c38b680b909ae7b44c26e528ad6"}, "originalPosition": 2}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 41, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}