{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3NDQ5OTIy", "number": 1255, "title": "Migration IIDM extensions to new extension API on CoordinatedReactiveControl", "bodyText": "Signed-off-by: Thomas ADAM tadam@silicom.fr\nPlease check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nDoes this PR already have an issue describing the problem ? If so, link to this issue using '#XXX' and skip the rest\nPart of '#1206'\nDoes this PR introduce a breaking change or deprecate an API? If yes, check the following:\n\n The Breaking Change or Deprecated label has been added\n The migration guide has been updated in the github wiki (What changes might users need to make in their application due to this PR?)\n\nOther information:\n(if any of the questions/checkboxes don't apply, please delete them entirely)", "createdAt": "2020-04-02T09:07:52Z", "url": "https://github.com/powsybl/powsybl-core/pull/1255", "merged": true, "mergeCommit": {"oid": "b4d3929a0781bc026a9708137ddfe0ef62601cea"}, "closed": true, "closedAt": "2020-04-08T07:56:42Z", "author": {"login": "tadam50"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcToeUrAH2gAyMzk3NDQ5OTIyOjUzNjdkMmUzZDY1M2MxNjU3YTEzNTdhMDgwNzdmZThmZGYyMjAxZDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVi-UcAH2gAyMzk3NDQ5OTIyOjgxYjZjMjA5MDMyYzUyOGExM2E0ZWU5YTFkYWJiNzc1MzE4MDhhMTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5367d2e3d653c1657a1357a08077fe8fdf2201d0", "author": {"user": {"login": "tadam50", "name": "Thomas ADAM"}}, "url": "https://github.com/powsybl/powsybl-core/commit/5367d2e3d653c1657a1357a08077fe8fdf2201d0", "committedDate": "2020-04-02T08:59:58Z", "message": "To implementation new Extension API on CoordinatedReactiveControl\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>\nSigned-off-by: tadam <tadam@silicom.fr>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "142f4cc89a1427da037127cae8f809350766dfa8", "author": {"user": {"login": "tadam50", "name": "Thomas ADAM"}}, "url": "https://github.com/powsybl/powsybl-core/commit/142f4cc89a1427da037127cae8f809350766dfa8", "committedDate": "2020-04-02T09:17:27Z", "message": "Increase code coverage\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3MjQxNDg4", "url": "https://github.com/powsybl/powsybl-core/pull/1255#pullrequestreview-387241488", "createdAt": "2020-04-03T13:12:18Z", "commit": {"oid": "142f4cc89a1427da037127cae8f809350766dfa8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4MzU0NTY1", "url": "https://github.com/powsybl/powsybl-core/pull/1255#pullrequestreview-388354565", "createdAt": "2020-04-06T15:18:00Z", "commit": {"oid": "142f4cc89a1427da037127cae8f809350766dfa8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4ODk2NzY2", "url": "https://github.com/powsybl/powsybl-core/pull/1255#pullrequestreview-388896766", "createdAt": "2020-04-07T08:29:50Z", "commit": {"oid": "142f4cc89a1427da037127cae8f809350766dfa8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwODoyOTo1MFrOGB4tGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwODozNToxMVrOGB46Ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDYzMDgxMA==", "bodyText": "I think we should use the new design here to be sure that the extension use the same NetworkFactory (persistent or transient) than the network", "url": "https://github.com/powsybl/powsybl-core/pull/1255#discussion_r404630810", "createdAt": "2020-04-07T08:29:50Z", "author": {"login": "mathbagu"}, "path": "cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/RegulatingControlMappingForGenerators.java", "diffHunk": "@@ -112,7 +113,7 @@ private boolean setRegulatingControlVoltage(String controlId,\n \n         // add qPercent as an extension\n         if (!Double.isNaN(qPercent)) {\n-            CoordinatedReactiveControl coordinatedReactiveControl = new CoordinatedReactiveControl(gen, qPercent);\n+            CoordinatedReactiveControl coordinatedReactiveControl = new CoordinatedReactiveControlImpl(gen, qPercent);\n             gen.addExtension(CoordinatedReactiveControl.class, coordinatedReactiveControl);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "142f4cc89a1427da037127cae8f809350766dfa8"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDYzMTE3MQ==", "bodyText": "I think we should add javadoc to this interface", "url": "https://github.com/powsybl/powsybl-core/pull/1255#discussion_r404631171", "createdAt": "2020-04-07T08:30:23Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-extensions/src/main/java/com/powsybl/iidm/network/extensions/CoordinatedReactiveControl.java", "diffHunk": "@@ -6,42 +6,20 @@\n  */\n package com.powsybl.iidm.network.extensions;\n \n-import com.powsybl.commons.PowsyblException;\n-import com.powsybl.commons.extensions.AbstractExtension;\n+import com.powsybl.commons.extensions.Extension;\n import com.powsybl.iidm.network.Generator;\n \n /**\n- * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ * @author Thomas ADAM <tadam at silicom.fr>\n  */\n-public class CoordinatedReactiveControl extends AbstractExtension<Generator> {\n-\n-    private double qPercent;\n-\n-    public CoordinatedReactiveControl(Generator generator, double qPercent) {\n-        super(generator);\n-        this.qPercent = checkQPercent(qPercent);\n-    }\n+public interface CoordinatedReactiveControl extends Extension<Generator> {\n \n     @Override\n-    public String getName() {\n+    default String getName() {\n         return \"coordinatedReactiveControl\";\n     }\n \n-    public double getQPercent() {\n-        return qPercent;\n-    }\n+    double getQPercent();\n \n-    public void setQPercent(double qPercent) {\n-        this.qPercent = checkQPercent(qPercent);\n-    }\n-\n-    private static double checkQPercent(double qPercent) {\n-        if (Double.isNaN(qPercent)) {\n-            throw new PowsyblException(\"Undefined value for qPercent\");\n-        }\n-        if (qPercent < 0.0 || qPercent > 100.0) {\n-            throw new PowsyblException(\"Unexpected value for qPercent: \" + qPercent);\n-        }\n-        return qPercent;\n-    }\n+    void setQPercent(double qPercent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "142f4cc89a1427da037127cae8f809350766dfa8"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDYzNDEzMQ==", "bodyText": "I think we should use the new design there", "url": "https://github.com/powsybl/powsybl-core/pull/1255#discussion_r404634131", "createdAt": "2020-04-07T08:35:11Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-extensions/src/test/java/com/powsybl/iidm/network/extensions/CoordinatedReactiveControlXmlTest.java", "diffHunk": "@@ -22,25 +22,30 @@\n /**\n  * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n  */\n-public class CoordinatedReactiveControlXmlSerializerTest extends AbstractConverterTest {\n+public class CoordinatedReactiveControlXmlTest extends AbstractConverterTest {\n \n     @Test\n     public void test() throws IOException {\n         Network network = EurostagTutorialExample1Factory.create();\n         network.setCaseDate(DateTime.parse(\"2019-05-27T12:17:02.504+02:00\"));\n         Generator gen = network.getGenerator(\"GEN\");\n+        assertNotNull(gen);\n \n-        CoordinatedReactiveControl control = new CoordinatedReactiveControl(gen, 100.0);\n-        gen.addExtension(CoordinatedReactiveControl.class, control);\n+        CoordinatedReactiveControl coordinatedReactiveControl = new CoordinatedReactiveControlImpl(gen, 100.0);\n+        gen.addExtension(CoordinatedReactiveControl.class, coordinatedReactiveControl);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "142f4cc89a1427da037127cae8f809350766dfa8"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4ade17f06006d140ed5e1d2fac34774fd6d0171", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/a4ade17f06006d140ed5e1d2fac34774fd6d0171", "committedDate": "2020-04-07T13:40:49Z", "message": "use new mecanism for CoordinatedReactiveControl use\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e00f6f56896de01d8835b55a3878bb101af93a1d", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/e00f6f56896de01d8835b55a3878bb101af93a1d", "committedDate": "2020-04-07T13:51:39Z", "message": "Add javadoc\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NzIxNjU0", "url": "https://github.com/powsybl/powsybl-core/pull/1255#pullrequestreview-389721654", "createdAt": "2020-04-08T07:36:42Z", "commit": {"oid": "e00f6f56896de01d8835b55a3878bb101af93a1d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81b6c209032c528a13a4ee9a1dabb77531808a14", "author": {"user": {"login": "mathbagu", "name": "Mathieu BAGUE"}}, "url": "https://github.com/powsybl/powsybl-core/commit/81b6c209032c528a13a4ee9a1dabb77531808a14", "committedDate": "2020-04-08T07:43:20Z", "message": "Merge branch 'master' into issue_1206_CoordinatedReactiveControl"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4212, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}