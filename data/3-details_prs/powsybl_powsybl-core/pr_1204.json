{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzNjE2NDQ1", "number": 1204, "title": "Fix bug: check target deadband when setting regulation status to prevent inconsistent data", "bodyText": "Signed-off-by: RALAMBOTIANA MIORA miora.ralambotiana@rte-france.com\nPlease check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n\nDoes this PR already have an issue describing the problem ?\nNo\nWhat kind of change does this PR introduce?\nBug fix\nWhat is the current behavior?\ntarget deadband is checked when setting target deadband and in adders but not when setting regulation status which can lead to inconsistent data (regulation status set to true but undefined target deadband).\nWhat is the new behavior (if this is a feature change)?\ntarget deadband is now checked when setting regulation status\nDoes this PR introduce a breaking change or deprecate an API? If yes, check the following:\nNo, it follows the breaking change of #958", "createdAt": "2020-03-04T15:00:11Z", "url": "https://github.com/powsybl/powsybl-core/pull/1204", "merged": true, "mergeCommit": {"oid": "fb5a20d917d9648b8c000022cd77191b68f35c1e"}, "closed": true, "closedAt": "2020-03-05T13:07:13Z", "author": {"login": "MioRtia"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKYNuJAH2gAyMzgzNjE2NDQ1OjE0ZWNiMDhhMThmNmU4MTBhMmQxOWE2ZTA3ODJkOThkNTgxNDEwNjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKrOUcgFqTM2OTU1MTE2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "14ecb08a18f6e810a2d19a6e0782d98d58141068", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/14ecb08a18f6e810a2d19a6e0782d98d58141068", "committedDate": "2020-03-04T14:58:02Z", "message": "Fix bug: check target deadband when setting regulation status to prevent inconsistent data\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4ODY3NTMw", "url": "https://github.com/powsybl/powsybl-core/pull/1204#pullrequestreview-368867530", "createdAt": "2020-03-04T15:20:06Z", "commit": {"oid": "14ecb08a18f6e810a2d19a6e0782d98d58141068"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNToyMDowNlrOFxxfEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNToyMDowNlrOFxxfEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzczNTMxNA==", "bodyText": "This seems to imply that the target deadband should always be set before using setRegulating. Should we propose a function to set the PST as regulating, together with the definition of the target deadband?", "url": "https://github.com/powsybl/powsybl-core/pull/1204#discussion_r387735314", "createdAt": "2020-03-04T15:20:06Z", "author": {"login": "agnesLeroy"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/PhaseTapChangerImpl.java", "diffHunk": "@@ -58,6 +58,7 @@ protected NetworkImpl getNetwork() {\n     @Override\n     public PhaseTapChangerImpl setRegulating(boolean regulating) {\n         ValidationUtil.checkPhaseTapChangerRegulation(parent, getRegulationMode(), getRegulationValue(), regulating, getRegulationTerminal(), getNetwork());\n+        ValidationUtil.checkTargetDeadband(parent, type, regulating, getTargetDeadband());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14ecb08a18f6e810a2d19a6e0782d98d58141068"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4ODY3Nzcw", "url": "https://github.com/powsybl/powsybl-core/pull/1204#pullrequestreview-368867770", "createdAt": "2020-03-04T15:20:22Z", "commit": {"oid": "14ecb08a18f6e810a2d19a6e0782d98d58141068"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNToyMDoyMlrOFxxfww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNToyMDoyMlrOFxxfww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzczNTQ5MQ==", "bodyText": "Same comment", "url": "https://github.com/powsybl/powsybl-core/pull/1204#discussion_r387735491", "createdAt": "2020-03-04T15:20:22Z", "author": {"login": "agnesLeroy"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/RatioTapChangerImpl.java", "diffHunk": "@@ -57,6 +57,7 @@ protected NetworkImpl getNetwork() {\n     @Override\n     public RatioTapChangerImpl setRegulating(boolean regulating) {\n         ValidationUtil.checkRatioTapChangerRegulation(parent, regulating, regulationTerminal, getTargetV(), getNetwork());\n+        ValidationUtil.checkTargetDeadband(parent, type, regulating, getTargetDeadband());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14ecb08a18f6e810a2d19a6e0782d98d58141068"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19fc7b89e2a8debfa65e1fd2a5a414e299b60663", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/19fc7b89e2a8debfa65e1fd2a5a414e299b60663", "committedDate": "2020-03-04T16:25:28Z", "message": "refactoring\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f159ced23f11618640239164055281d88b32b395", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/f159ced23f11618640239164055281d88b32b395", "committedDate": "2020-03-04T16:25:36Z", "message": "add tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5Mzc1OTI0", "url": "https://github.com/powsybl/powsybl-core/pull/1204#pullrequestreview-369375924", "createdAt": "2020-03-05T08:35:39Z", "commit": {"oid": "f159ced23f11618640239164055281d88b32b395"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c60a90d1b1e8b031f8dc87ebd766a91de66d060d", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/c60a90d1b1e8b031f8dc87ebd766a91de66d060d", "committedDate": "2020-03-05T09:19:59Z", "message": "Merge branch 'master' into bug_targetDeadband"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NTUxMTYy", "url": "https://github.com/powsybl/powsybl-core/pull/1204#pullrequestreview-369551162", "createdAt": "2020-03-05T13:06:53Z", "commit": {"oid": "c60a90d1b1e8b031f8dc87ebd766a91de66d060d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4440, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}