{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4NTI4MTE3", "number": 1337, "title": "Add an option to sort equipments in IIDM XML export", "bodyText": "Signed-off-by: Geoffroy Jamgotchian geoffroy.jamgotchian@rte-france.com\nPlease check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nDoes this PR already have an issue describing the problem ? If so, link to this issue using '#XXX' and skip the rest\nNo\nWhat kind of change does this PR introduce? (Bug fix, feature, docs update, ...)\nfeature\nWhat is the current behavior? (You can also link to an open issue here)\nIn XIIDM export, equipments are written using order in IIDM model.\nWhat is the new behavior (if this is a feature change)?\nAn option has been added to sorted equipment using their id to facilitate XIIDM comparison.\nDoes this PR introduce a breaking change or deprecate an API? If yes, check the following:\n\n The Breaking Change or Deprecated label has been added\n The migration guide has been updated in the github wiki (What changes might users need to make in their application due to this PR?)\n\nOther information:\n(if any of the questions/checkboxes don't apply, please delete them entirely)", "createdAt": "2020-06-05T15:26:29Z", "url": "https://github.com/powsybl/powsybl-core/pull/1337", "merged": true, "mergeCommit": {"oid": "2bc816e2bad750e3cc185db1de70c1e4ef5dd6fb"}, "closed": true, "closedAt": "2020-08-24T13:13:17Z", "author": {"login": "geofjamg"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoUU9jgH2gAyNDI4NTI4MTE3OjVlYzY2ZDEwNDkzYTQxODZkMzI4NmVlMWY0ZWNiMjc5YTM3YTc1OGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCCAsTgH2gAyNDI4NTI4MTE3OjE3YmM2NGUzNTEzODJjMmRhYTRjOGJhOWQyODg0YTM4NjJlYmEwNWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5ec66d10493a4186d3286ee1f4ecb279a37a758c", "author": {"user": {"login": "geofjamg", "name": "Geoffroy Jamgotchian"}}, "url": "https://github.com/powsybl/powsybl-core/commit/5ec66d10493a4186d3286ee1f4ecb279a37a758c", "committedDate": "2020-06-05T15:24:03Z", "message": "Add an option to sort equipments in IIDM XML export\n\nSigned-off-by: Geoffroy Jamgotchian <geoffroy.jamgotchian@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae679bcc0a803ca3232c5c0369a9e9ceaeea13d9", "author": {"user": {"login": "geofjamg", "name": "Geoffroy Jamgotchian"}}, "url": "https://github.com/powsybl/powsybl-core/commit/ae679bcc0a803ca3232c5c0369a9e9ceaeea13d9", "committedDate": "2020-06-08T21:11:37Z", "message": "Merge branch 'master' into xml_sorted"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2OTIwMDc4", "url": "https://github.com/powsybl/powsybl-core/pull/1337#pullrequestreview-426920078", "createdAt": "2020-06-09T08:47:52Z", "commit": {"oid": "5ec66d10493a4186d3286ee1f4ecb279a37a758c"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwODo0Nzo1MlrOGg_Dfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwOTowNDo1N1rOGg_1bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI0MDcwMg==", "bodyText": "Don't know if we should change the signature of this deprecated method? I think we can either delete it directly or not change it and make it call writeCurrentLimits(index, limits, writer, IidmXmlConstants.CURRENT_IIDM_XML_VERSION, new ExportOptions());", "url": "https://github.com/powsybl/powsybl-core/pull/1337#discussion_r437240702", "createdAt": "2020-06-09T08:47:52Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/AbstractConnectableXml.java", "diffHunk": "@@ -162,26 +164,29 @@ public static void readCurrentLimits(Integer index, Supplier<CurrentLimitsAdder>\n     }\n \n     /**\n-     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, IidmXmlVersion)} instead.\n+     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, IidmXmlVersion, ExportOptions)} instead.\n      */\n     @Deprecated\n-    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer) throws XMLStreamException {\n-        writeCurrentLimits(index, limits, writer, IidmXmlConstants.CURRENT_IIDM_XML_VERSION);\n+    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, ExportOptions exportOptions) throws XMLStreamException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ec66d10493a4186d3286ee1f4ecb279a37a758c"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI0MDgzNQ==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1337#discussion_r437240835", "createdAt": "2020-06-09T08:48:03Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/AbstractConnectableXml.java", "diffHunk": "@@ -162,26 +164,29 @@ public static void readCurrentLimits(Integer index, Supplier<CurrentLimitsAdder>\n     }\n \n     /**\n-     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, IidmXmlVersion)} instead.\n+     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, IidmXmlVersion, ExportOptions)} instead.\n      */\n     @Deprecated\n-    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer) throws XMLStreamException {\n-        writeCurrentLimits(index, limits, writer, IidmXmlConstants.CURRENT_IIDM_XML_VERSION);\n+    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, ExportOptions exportOptions) throws XMLStreamException {\n+        writeCurrentLimits(index, limits, writer, IidmXmlConstants.CURRENT_IIDM_XML_VERSION, exportOptions);\n     }\n \n     /**\n-     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, String, IidmXmlVersion)} instead.\n+     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, String, IidmXmlVersion, ExportOptions)} instead.\n      */\n     @Deprecated\n-    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, String nsUri) throws XMLStreamException {\n-        writeCurrentLimits(index, limits, writer, nsUri, IidmXmlConstants.CURRENT_IIDM_XML_VERSION);\n+    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, String nsUri,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ec66d10493a4186d3286ee1f4ecb279a37a758c"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI0Mzc0MQ==", "bodyText": "Should we keep the previous signature writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, IidmXmlVersion) as deprecated? It can be used in extensions outside iidm-xml-converter)", "url": "https://github.com/powsybl/powsybl-core/pull/1337#discussion_r437243741", "createdAt": "2020-06-09T08:52:37Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/AbstractConnectableXml.java", "diffHunk": "@@ -162,26 +164,29 @@ public static void readCurrentLimits(Integer index, Supplier<CurrentLimitsAdder>\n     }\n \n     /**\n-     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, IidmXmlVersion)} instead.\n+     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, IidmXmlVersion, ExportOptions)} instead.\n      */\n     @Deprecated\n-    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer) throws XMLStreamException {\n-        writeCurrentLimits(index, limits, writer, IidmXmlConstants.CURRENT_IIDM_XML_VERSION);\n+    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, ExportOptions exportOptions) throws XMLStreamException {\n+        writeCurrentLimits(index, limits, writer, IidmXmlConstants.CURRENT_IIDM_XML_VERSION, exportOptions);\n     }\n \n     /**\n-     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, String, IidmXmlVersion)} instead.\n+     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, String, IidmXmlVersion, ExportOptions)} instead.\n      */\n     @Deprecated\n-    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, String nsUri) throws XMLStreamException {\n-        writeCurrentLimits(index, limits, writer, nsUri, IidmXmlConstants.CURRENT_IIDM_XML_VERSION);\n+    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, String nsUri,\n+                                          ExportOptions exportOptions) throws XMLStreamException {\n+        writeCurrentLimits(index, limits, writer, nsUri, IidmXmlConstants.CURRENT_IIDM_XML_VERSION, exportOptions);\n     }\n \n-    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, IidmXmlVersion version) throws XMLStreamException {\n-        writeCurrentLimits(index, limits, writer, version.getNamespaceURI(), version);\n+    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, IidmXmlVersion version,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ec66d10493a4186d3286ee1f4ecb279a37a758c"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI0Mzg2NQ==", "bodyText": "Same question", "url": "https://github.com/powsybl/powsybl-core/pull/1337#discussion_r437243865", "createdAt": "2020-06-09T08:52:49Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/AbstractConnectableXml.java", "diffHunk": "@@ -162,26 +164,29 @@ public static void readCurrentLimits(Integer index, Supplier<CurrentLimitsAdder>\n     }\n \n     /**\n-     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, IidmXmlVersion)} instead.\n+     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, IidmXmlVersion, ExportOptions)} instead.\n      */\n     @Deprecated\n-    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer) throws XMLStreamException {\n-        writeCurrentLimits(index, limits, writer, IidmXmlConstants.CURRENT_IIDM_XML_VERSION);\n+    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, ExportOptions exportOptions) throws XMLStreamException {\n+        writeCurrentLimits(index, limits, writer, IidmXmlConstants.CURRENT_IIDM_XML_VERSION, exportOptions);\n     }\n \n     /**\n-     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, String, IidmXmlVersion)} instead.\n+     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, String, IidmXmlVersion, ExportOptions)} instead.\n      */\n     @Deprecated\n-    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, String nsUri) throws XMLStreamException {\n-        writeCurrentLimits(index, limits, writer, nsUri, IidmXmlConstants.CURRENT_IIDM_XML_VERSION);\n+    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, String nsUri,\n+                                          ExportOptions exportOptions) throws XMLStreamException {\n+        writeCurrentLimits(index, limits, writer, nsUri, IidmXmlConstants.CURRENT_IIDM_XML_VERSION, exportOptions);\n     }\n \n-    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, IidmXmlVersion version) throws XMLStreamException {\n-        writeCurrentLimits(index, limits, writer, version.getNamespaceURI(), version);\n+    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, IidmXmlVersion version,\n+                                          ExportOptions exportOptions) throws XMLStreamException {\n+        writeCurrentLimits(index, limits, writer, version.getNamespaceURI(), version, exportOptions);\n     }\n \n-    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, String nsUri, IidmXmlVersion version) throws XMLStreamException {\n+    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, String nsUri, IidmXmlVersion version,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ec66d10493a4186d3286ee1f4ecb279a37a758c"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI0NTcwMg==", "bodyText": "Maybe add some javadoc? It is rather intuitive but I'd rather have public util methods well documentated here (particularly specifying by what are the extensions sorted, here by their names).", "url": "https://github.com/powsybl/powsybl-core/pull/1337#discussion_r437245702", "createdAt": "2020-06-09T08:55:29Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/util/IidmXmlUtil.java", "diffHunk": "@@ -177,6 +186,49 @@ public static void writeIntAttributeUntilMaximumVersion(String attributeName, in\n         }\n     }\n \n+    public static Iterable<? extends Extension<? extends Identifiable<?>>> sortedExtensions(Iterable<? extends Extension<? extends Identifiable<?>>> extensions, ExportOptions exportOptions) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ec66d10493a4186d3286ee1f4ecb279a37a758c"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI0NTk1MA==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1337#discussion_r437245950", "createdAt": "2020-06-09T08:55:48Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/util/IidmXmlUtil.java", "diffHunk": "@@ -177,6 +186,49 @@ public static void writeIntAttributeUntilMaximumVersion(String attributeName, in\n         }\n     }\n \n+    public static Iterable<? extends Extension<? extends Identifiable<?>>> sortedExtensions(Iterable<? extends Extension<? extends Identifiable<?>>> extensions, ExportOptions exportOptions) {\n+        Objects.requireNonNull(exportOptions);\n+        Objects.requireNonNull(exportOptions);\n+        return exportOptions.isSorted() ? StreamSupport.stream(extensions.spliterator(), false)\n+                                                       .sorted(Comparator.comparing(Extension::getName))\n+                                                       .collect(Collectors.toList())\n+                : extensions;\n+    }\n+\n+    public static <T extends Identifiable> Iterable<T> sorted(Iterable<T> identifiables, ExportOptions exportOptions) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ec66d10493a4186d3286ee1f4ecb279a37a758c"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI0NjAzNw==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1337#discussion_r437246037", "createdAt": "2020-06-09T08:55:56Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/util/IidmXmlUtil.java", "diffHunk": "@@ -177,6 +186,49 @@ public static void writeIntAttributeUntilMaximumVersion(String attributeName, in\n         }\n     }\n \n+    public static Iterable<? extends Extension<? extends Identifiable<?>>> sortedExtensions(Iterable<? extends Extension<? extends Identifiable<?>>> extensions, ExportOptions exportOptions) {\n+        Objects.requireNonNull(exportOptions);\n+        Objects.requireNonNull(exportOptions);\n+        return exportOptions.isSorted() ? StreamSupport.stream(extensions.spliterator(), false)\n+                                                       .sorted(Comparator.comparing(Extension::getName))\n+                                                       .collect(Collectors.toList())\n+                : extensions;\n+    }\n+\n+    public static <T extends Identifiable> Iterable<T> sorted(Iterable<T> identifiables, ExportOptions exportOptions) {\n+        Objects.requireNonNull(identifiables);\n+        Objects.requireNonNull(exportOptions);\n+        return exportOptions.isSorted() ? StreamSupport.stream(identifiables.spliterator(), false)\n+                                                       .sorted(Comparator.comparing(Identifiable::getId))\n+                                                       .collect(Collectors.toList())\n+                                        : identifiables;\n+    }\n+\n+    public static Iterable<CurrentLimits.TemporaryLimit> sortedTemporaryLimits(Iterable<CurrentLimits.TemporaryLimit> temporaryLimits, ExportOptions exportOptions) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ec66d10493a4186d3286ee1f4ecb279a37a758c"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI0NjE0MQ==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1337#discussion_r437246141", "createdAt": "2020-06-09T08:56:05Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/util/IidmXmlUtil.java", "diffHunk": "@@ -177,6 +186,49 @@ public static void writeIntAttributeUntilMaximumVersion(String attributeName, in\n         }\n     }\n \n+    public static Iterable<? extends Extension<? extends Identifiable<?>>> sortedExtensions(Iterable<? extends Extension<? extends Identifiable<?>>> extensions, ExportOptions exportOptions) {\n+        Objects.requireNonNull(exportOptions);\n+        Objects.requireNonNull(exportOptions);\n+        return exportOptions.isSorted() ? StreamSupport.stream(extensions.spliterator(), false)\n+                                                       .sorted(Comparator.comparing(Extension::getName))\n+                                                       .collect(Collectors.toList())\n+                : extensions;\n+    }\n+\n+    public static <T extends Identifiable> Iterable<T> sorted(Iterable<T> identifiables, ExportOptions exportOptions) {\n+        Objects.requireNonNull(identifiables);\n+        Objects.requireNonNull(exportOptions);\n+        return exportOptions.isSorted() ? StreamSupport.stream(identifiables.spliterator(), false)\n+                                                       .sorted(Comparator.comparing(Identifiable::getId))\n+                                                       .collect(Collectors.toList())\n+                                        : identifiables;\n+    }\n+\n+    public static Iterable<CurrentLimits.TemporaryLimit> sortedTemporaryLimits(Iterable<CurrentLimits.TemporaryLimit> temporaryLimits, ExportOptions exportOptions) {\n+        Objects.requireNonNull(temporaryLimits);\n+        Objects.requireNonNull(exportOptions);\n+        return exportOptions.isSorted() ? StreamSupport.stream(temporaryLimits.spliterator(), false)\n+                                                       .sorted(Comparator.comparing(CurrentLimits.TemporaryLimit::getName))\n+                                                       .collect(Collectors.toList())\n+                                        : temporaryLimits;\n+    }\n+\n+    public static Iterable<VoltageLevel.NodeBreakerView.InternalConnection> sortedInternalConnections(Iterable<VoltageLevel.NodeBreakerView.InternalConnection> internalConnections, ExportOptions exportOptions) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ec66d10493a4186d3286ee1f4ecb279a37a758c"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI1MzQ4Ng==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1337#discussion_r437253486", "createdAt": "2020-06-09T09:04:57Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/util/IidmXmlUtil.java", "diffHunk": "@@ -177,6 +186,49 @@ public static void writeIntAttributeUntilMaximumVersion(String attributeName, in\n         }\n     }\n \n+    public static Iterable<? extends Extension<? extends Identifiable<?>>> sortedExtensions(Iterable<? extends Extension<? extends Identifiable<?>>> extensions, ExportOptions exportOptions) {\n+        Objects.requireNonNull(exportOptions);\n+        Objects.requireNonNull(exportOptions);\n+        return exportOptions.isSorted() ? StreamSupport.stream(extensions.spliterator(), false)\n+                                                       .sorted(Comparator.comparing(Extension::getName))\n+                                                       .collect(Collectors.toList())\n+                : extensions;\n+    }\n+\n+    public static <T extends Identifiable> Iterable<T> sorted(Iterable<T> identifiables, ExportOptions exportOptions) {\n+        Objects.requireNonNull(identifiables);\n+        Objects.requireNonNull(exportOptions);\n+        return exportOptions.isSorted() ? StreamSupport.stream(identifiables.spliterator(), false)\n+                                                       .sorted(Comparator.comparing(Identifiable::getId))\n+                                                       .collect(Collectors.toList())\n+                                        : identifiables;\n+    }\n+\n+    public static Iterable<CurrentLimits.TemporaryLimit> sortedTemporaryLimits(Iterable<CurrentLimits.TemporaryLimit> temporaryLimits, ExportOptions exportOptions) {\n+        Objects.requireNonNull(temporaryLimits);\n+        Objects.requireNonNull(exportOptions);\n+        return exportOptions.isSorted() ? StreamSupport.stream(temporaryLimits.spliterator(), false)\n+                                                       .sorted(Comparator.comparing(CurrentLimits.TemporaryLimit::getName))\n+                                                       .collect(Collectors.toList())\n+                                        : temporaryLimits;\n+    }\n+\n+    public static Iterable<VoltageLevel.NodeBreakerView.InternalConnection> sortedInternalConnections(Iterable<VoltageLevel.NodeBreakerView.InternalConnection> internalConnections, ExportOptions exportOptions) {\n+        Objects.requireNonNull(internalConnections);\n+        Objects.requireNonNull(exportOptions);\n+        return exportOptions.isSorted() ? StreamSupport.stream(internalConnections.spliterator(), false)\n+                                                       .sorted(Comparator.comparing(VoltageLevel.NodeBreakerView.InternalConnection::getNode1)\n+                                                                         .thenComparing(VoltageLevel.NodeBreakerView.InternalConnection::getNode2))\n+                                                       .collect(Collectors.toList())\n+                : internalConnections;\n+    }\n+\n+    public static <T extends Identifiable<T>> Stream<T> sorted(Stream<T> stream, ExportOptions exportOptions) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ec66d10493a4186d3286ee1f4ecb279a37a758c"}, "originalPosition": 64}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c2c002c3f406c2cc420ac897261c93bd9286eb9", "author": {"user": {"login": "geofjamg", "name": "Geoffroy Jamgotchian"}}, "url": "https://github.com/powsybl/powsybl-core/commit/0c2c002c3f406c2cc420ac897261c93bd9286eb9", "committedDate": "2020-08-04T07:19:15Z", "message": "Merge branch 'master' into xml_sorted\n\n# Conflicts:\n#\tiidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/NetworkXml.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b1c10ea0d20acdb1fb65f437a4df43a01aa5599", "author": {"user": {"login": "geofjamg", "name": "Geoffroy Jamgotchian"}}, "url": "https://github.com/powsybl/powsybl-core/commit/2b1c10ea0d20acdb1fb65f437a4df43a01aa5599", "committedDate": "2020-08-04T07:23:41Z", "message": "Fix merge\n\nSigned-off-by: Geoffroy Jamgotchian <geoffroy.jamgotchian@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82214c9456c3242b8382b449ec16fd1106cce8af", "author": {"user": {"login": "geofjamg", "name": "Geoffroy Jamgotchian"}}, "url": "https://github.com/powsybl/powsybl-core/commit/82214c9456c3242b8382b449ec16fd1106cce8af", "committedDate": "2020-08-04T08:05:51Z", "message": "Review changes\n\nSigned-off-by: Geoffroy Jamgotchian <geoffroy.jamgotchian@rte-france.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4MzAzNjM2", "url": "https://github.com/powsybl/powsybl-core/pull/1337#pullrequestreview-468303636", "createdAt": "2020-08-17T09:22:55Z", "commit": {"oid": "82214c9456c3242b8382b449ec16fd1106cce8af"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwOToyMjo1NlrOHBhC_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwOToyMjo1NlrOHBhC_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM1MjA2MQ==", "bodyText": "Please add the @Deprecated tag", "url": "https://github.com/powsybl/powsybl-core/pull/1337#discussion_r471352061", "createdAt": "2020-08-17T09:22:56Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/AbstractConnectableXml.java", "diffHunk": "@@ -162,26 +164,27 @@ public static void readCurrentLimits(Integer index, Supplier<CurrentLimitsAdder>\n     }\n \n     /**\n-     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, IidmXmlVersion)} instead.\n+     * @deprecated Use {@link #writeCurrentLimits(Integer, CurrentLimits, XMLStreamWriter, IidmXmlVersion, ExportOptions)} instead.\n      */\n-    @Deprecated\n-    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer) throws XMLStreamException {\n-        writeCurrentLimits(index, limits, writer, IidmXmlConstants.CURRENT_IIDM_XML_VERSION);\n+    public static void writeCurrentLimits(Integer index, CurrentLimits limits, XMLStreamWriter writer, IidmXmlVersion version) throws XMLStreamException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82214c9456c3242b8382b449ec16fd1106cce8af"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37356adcd087cbddd8752b868dee37691d1cc254", "author": {"user": {"login": "geofjamg", "name": "Geoffroy Jamgotchian"}}, "url": "https://github.com/powsybl/powsybl-core/commit/37356adcd087cbddd8752b868dee37691d1cc254", "committedDate": "2020-08-24T12:45:16Z", "message": "Add missing deprecated\n\nSigned-off-by: Geoffroy Jamgotchian <geoffroy.jamgotchian@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17bc64e351382c2daa4c8ba9d2884a3862eba05a", "author": {"user": {"login": "geofjamg", "name": "Geoffroy Jamgotchian"}}, "url": "https://github.com/powsybl/powsybl-core/commit/17bc64e351382c2daa4c8ba9d2884a3862eba05a", "committedDate": "2020-08-24T12:45:39Z", "message": "Merge branch 'master' into xml_sorted"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4314, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}