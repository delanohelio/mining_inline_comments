{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2ODA0ODEx", "number": 1495, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxMjo0NjozMlrOEpzPkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxMjo0NjozMlrOEpzPkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMjY2NjQwOnYy", "diffSide": "RIGHT", "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ThreeWindingsTransformerAdderImpl.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxMjo0NjozMlrOHbsQIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwNzo1MTozMlrOHc6GAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc5ODYyNw==", "bodyText": "Maybe also specify the voltage level in which the leg is?", "url": "https://github.com/powsybl/powsybl-core/pull/1495#discussion_r498798627", "createdAt": "2020-10-02T12:46:32Z", "author": {"login": "miovd"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ThreeWindingsTransformerAdderImpl.java", "diffHunk": "@@ -161,7 +161,7 @@ public ThreeWindingsTransformerAdderImpl add() {\n \n         @Override\n         public String getMessageHeader() {\n-            return String.format(\"3 windings transformer leg%d: \", legNumber);\n+            return String.format(\"3 windings transformer leg%d in substation %s: \", legNumber, substation.getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a85a0486eee9bdf1fb14182c7b583abf720bf583"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkxOTgwMw==", "bodyText": "I think that an error could also be thrown if there is no voltage level or it is invalid, so we should take into account that in the message header, complicating things in excess. I thought that adding the substation was enough to quickly find the transformer with the problem.", "url": "https://github.com/powsybl/powsybl-core/pull/1495#discussion_r498919803", "createdAt": "2020-10-02T16:17:51Z", "author": {"login": "zamarrenolm"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ThreeWindingsTransformerAdderImpl.java", "diffHunk": "@@ -161,7 +161,7 @@ public ThreeWindingsTransformerAdderImpl add() {\n \n         @Override\n         public String getMessageHeader() {\n-            return String.format(\"3 windings transformer leg%d: \", legNumber);\n+            return String.format(\"3 windings transformer leg%d in substation %s: \", legNumber, substation.getId());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc5ODYyNw=="}, "originalCommit": {"oid": "a85a0486eee9bdf1fb14182c7b583abf720bf583"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTM5Njk2MA==", "bodyText": "You cannot have access to the voltage level from here because the leg is not yet attached to a VoltageLevel. From my point of view the message will be strange and confusing. What if we print the ID of the 3WT instead?", "url": "https://github.com/powsybl/powsybl-core/pull/1495#discussion_r499396960", "createdAt": "2020-10-05T07:39:17Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ThreeWindingsTransformerAdderImpl.java", "diffHunk": "@@ -161,7 +161,7 @@ public ThreeWindingsTransformerAdderImpl add() {\n \n         @Override\n         public String getMessageHeader() {\n-            return String.format(\"3 windings transformer leg%d: \", legNumber);\n+            return String.format(\"3 windings transformer leg%d in substation %s: \", legNumber, substation.getId());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc5ODYyNw=="}, "originalCommit": {"oid": "a85a0486eee9bdf1fb14182c7b583abf720bf583"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU3NTExMQ==", "bodyText": "@mathbagu The id of the transformer may also have not been set yet. The user is allowed to first build and add the legs and then set the id and name of the transformer. A currently valid way of building a three winding transformer is:\ntx = substation.newThreeWindingsTransformer()\n    .newLeg1()\n        .setRatedU(ratedU1)\n        .setR(r1).setX(x1).setG(g1).setB(b1)\n        .setConnectableBus(bus380.getId())\n        .setBus(bus380.getId())\n        .setVoltageLevel(vl380.getId())\n    .add()\n    .newLeg2()\n        ...\n    .add()\n    .newLeg3()\n        ...\n    .add()\n    .setId(txId)\n    .setName(txName)\n.add();\n\nSo the only data item that is present in all possible situations is the substation. When I built the message I found it was enough to locate a transformer where the error has been reported.", "url": "https://github.com/powsybl/powsybl-core/pull/1495#discussion_r499575111", "createdAt": "2020-10-05T12:53:10Z", "author": {"login": "zamarrenolm"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ThreeWindingsTransformerAdderImpl.java", "diffHunk": "@@ -161,7 +161,7 @@ public ThreeWindingsTransformerAdderImpl add() {\n \n         @Override\n         public String getMessageHeader() {\n-            return String.format(\"3 windings transformer leg%d: \", legNumber);\n+            return String.format(\"3 windings transformer leg%d in substation %s: \", legNumber, substation.getId());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc5ODYyNw=="}, "originalCommit": {"oid": "a85a0486eee9bdf1fb14182c7b583abf720bf583"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDA3Mzk4NA==", "bodyText": "Okay, thank you for your reply, in this case, it is okay for me.", "url": "https://github.com/powsybl/powsybl-core/pull/1495#discussion_r500073984", "createdAt": "2020-10-06T07:51:32Z", "author": {"login": "miovd"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ThreeWindingsTransformerAdderImpl.java", "diffHunk": "@@ -161,7 +161,7 @@ public ThreeWindingsTransformerAdderImpl add() {\n \n         @Override\n         public String getMessageHeader() {\n-            return String.format(\"3 windings transformer leg%d: \", legNumber);\n+            return String.format(\"3 windings transformer leg%d in substation %s: \", legNumber, substation.getId());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc5ODYyNw=="}, "originalCommit": {"oid": "a85a0486eee9bdf1fb14182c7b583abf720bf583"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4879, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}