{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2ODUyMzc4", "number": 1391, "title": "Change Tap Changers checks", "bodyText": "Signed-off-by: J\u00e9r\u00e9my LABOUS jlabous@silicom.fr\nPlease check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nDoes this PR already have an issue describing the problem ? If so, link to this issue using '#XXX' and skip the rest\nfix #1368", "createdAt": "2020-07-09T13:14:05Z", "url": "https://github.com/powsybl/powsybl-core/pull/1391", "merged": true, "mergeCommit": {"oid": "0588e2207c7ef4d73592250039bd7519edb1149c"}, "closed": true, "closedAt": "2020-07-16T15:56:42Z", "author": {"login": "jlabous"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczO0whgH2gAyNDQ2ODUyMzc4OjA2YjFlOWViZTk1NmQzZmVlYTc0NjI4ODhlMmJlNjYzNzZhZDgxOWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1g-n_AH2gAyNDQ2ODUyMzc4OmMwZGJiZjIxNmI1MmNhYTllOTYwMjAxODIxOTJlZTlmYzRmNmNjZjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e", "author": {"user": {"login": "jlabous", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/06b1e9ebe956d3feea7462888e2be66376ad819e", "committedDate": "2020-07-09T13:12:31Z", "message": "Change Tap Changers checks\n\nSigned-off-by: J\u00e9r\u00e9my LABOUS <jlabous@silicom.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4OTA3ODMy", "url": "https://github.com/powsybl/powsybl-core/pull/1391#pullrequestreview-448907832", "createdAt": "2020-07-15T12:34:35Z", "commit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "state": "COMMENTED", "comments": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMjozNDozNVrOGx7_7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMzoyMjo1OVrOGx93wA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAxNjQyOQ==", "bodyText": "In this case, do:\nalpha1 = twt.getOptionalPhaseTapChanger().map(ptc -> Math.toRadians(ptc.getCurrentStep().getAlpha())).orElse(0f);", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455016429", "createdAt": "2020-07-15T12:34:35Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/BranchData.java", "diffHunk": "@@ -193,7 +193,7 @@ public BranchData(TwoWindingsTransformer twt, int phaseAngleClock, double epsilo\n         u2 = bus2 != null ? bus2.getV() : Double.NaN;\n         theta1 = bus1 != null ? Math.toRadians(bus1.getAngle()) : Double.NaN;\n         theta2 = bus2 != null ? Math.toRadians(bus2.getAngle()) : Double.NaN;\n-        alpha1 = twt.getPhaseTapChanger() != null ? Math.toRadians(twt.getPhaseTapChanger().getCurrentStep().getAlpha()) : 0f;\n+        alpha1 = twt.hasPhaseTapChanger() ? Math.toRadians(twt.getPhaseTapChanger().getCurrentStep().getAlpha()) : 0f;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAxNjgwMA==", "bodyText": "Same remark: use getOptionalRatioTapChanger()", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455016800", "createdAt": "2020-07-15T12:35:09Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/BranchData.java", "diffHunk": "@@ -244,46 +244,46 @@ private double getValue(double initialValue, double rtcStepValue, double ptcStep\n \n     private double getR(TwoWindingsTransformer twt) {\n         return getValue(twt.getR(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAxNjg1Ng==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455016856", "createdAt": "2020-07-15T12:35:15Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/BranchData.java", "diffHunk": "@@ -244,46 +244,46 @@ private double getValue(double initialValue, double rtcStepValue, double ptcStep\n \n     private double getR(TwoWindingsTransformer twt) {\n         return getValue(twt.getR(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAxNjkzMw==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455016933", "createdAt": "2020-07-15T12:35:22Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/BranchData.java", "diffHunk": "@@ -244,46 +244,46 @@ private double getValue(double initialValue, double rtcStepValue, double ptcStep\n \n     private double getR(TwoWindingsTransformer twt) {\n         return getValue(twt.getR(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);\n     }\n \n     private double getX(TwoWindingsTransformer twt) {\n         return getValue(twt.getX(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getX() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getX() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getX() : 0,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAxNjk5MA==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455016990", "createdAt": "2020-07-15T12:35:30Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/BranchData.java", "diffHunk": "@@ -244,46 +244,46 @@ private double getValue(double initialValue, double rtcStepValue, double ptcStep\n \n     private double getR(TwoWindingsTransformer twt) {\n         return getValue(twt.getR(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);\n     }\n \n     private double getX(TwoWindingsTransformer twt) {\n         return getValue(twt.getX(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getX() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getX() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getX() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getX() : 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA0MjI0Nw==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455042247", "createdAt": "2020-07-15T13:16:15Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/BranchData.java", "diffHunk": "@@ -244,46 +244,46 @@ private double getValue(double initialValue, double rtcStepValue, double ptcStep\n \n     private double getR(TwoWindingsTransformer twt) {\n         return getValue(twt.getR(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);\n     }\n \n     private double getX(TwoWindingsTransformer twt) {\n         return getValue(twt.getX(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getX() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getX() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getX() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getX() : 0);\n     }\n \n     private double getG1(TwoWindingsTransformer twt, boolean twtSplitShuntAdmittance) {\n         return getValue(twtSplitShuntAdmittance ? twt.getG() / 2 : twt.getG(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getG() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getG() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getG() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getG() : 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA0MjMxMA==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455042310", "createdAt": "2020-07-15T13:16:21Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/BranchData.java", "diffHunk": "@@ -244,46 +244,46 @@ private double getValue(double initialValue, double rtcStepValue, double ptcStep\n \n     private double getR(TwoWindingsTransformer twt) {\n         return getValue(twt.getR(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);\n     }\n \n     private double getX(TwoWindingsTransformer twt) {\n         return getValue(twt.getX(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getX() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getX() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getX() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getX() : 0);\n     }\n \n     private double getG1(TwoWindingsTransformer twt, boolean twtSplitShuntAdmittance) {\n         return getValue(twtSplitShuntAdmittance ? twt.getG() / 2 : twt.getG(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getG() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getG() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getG() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getG() : 0);\n     }\n \n     private double getB1(TwoWindingsTransformer twt, boolean twtSplitShuntAdmittance) {\n         return getValue(twtSplitShuntAdmittance ? twt.getB() / 2 : twt.getB(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getB() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getB() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getB() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getB() : 0);\n     }\n \n     private double getG2(TwoWindingsTransformer twt, boolean twtSplitShuntAdmittance) {\n         return getValue(twtSplitShuntAdmittance ? twt.getG() / 2 : 0,\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getG() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getG() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getG() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getG() : 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA0MjM2NQ==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455042365", "createdAt": "2020-07-15T13:16:27Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/BranchData.java", "diffHunk": "@@ -244,46 +244,46 @@ private double getValue(double initialValue, double rtcStepValue, double ptcStep\n \n     private double getR(TwoWindingsTransformer twt) {\n         return getValue(twt.getR(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);\n     }\n \n     private double getX(TwoWindingsTransformer twt) {\n         return getValue(twt.getX(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getX() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getX() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getX() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getX() : 0);\n     }\n \n     private double getG1(TwoWindingsTransformer twt, boolean twtSplitShuntAdmittance) {\n         return getValue(twtSplitShuntAdmittance ? twt.getG() / 2 : twt.getG(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getG() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getG() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getG() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getG() : 0);\n     }\n \n     private double getB1(TwoWindingsTransformer twt, boolean twtSplitShuntAdmittance) {\n         return getValue(twtSplitShuntAdmittance ? twt.getB() / 2 : twt.getB(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getB() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getB() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getB() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getB() : 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA0MjQ1OA==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455042458", "createdAt": "2020-07-15T13:16:38Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/BranchData.java", "diffHunk": "@@ -244,46 +244,46 @@ private double getValue(double initialValue, double rtcStepValue, double ptcStep\n \n     private double getR(TwoWindingsTransformer twt) {\n         return getValue(twt.getR(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getR() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getR() : 0);\n     }\n \n     private double getX(TwoWindingsTransformer twt) {\n         return getValue(twt.getX(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getX() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getX() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getX() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getX() : 0);\n     }\n \n     private double getG1(TwoWindingsTransformer twt, boolean twtSplitShuntAdmittance) {\n         return getValue(twtSplitShuntAdmittance ? twt.getG() / 2 : twt.getG(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getG() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getG() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getG() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getG() : 0);\n     }\n \n     private double getB1(TwoWindingsTransformer twt, boolean twtSplitShuntAdmittance) {\n         return getValue(twtSplitShuntAdmittance ? twt.getB() / 2 : twt.getB(),\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getB() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getB() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getB() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getB() : 0);\n     }\n \n     private double getG2(TwoWindingsTransformer twt, boolean twtSplitShuntAdmittance) {\n         return getValue(twtSplitShuntAdmittance ? twt.getG() / 2 : 0,\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getG() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getG() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getG() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getG() : 0);\n     }\n \n     private double getB2(TwoWindingsTransformer twt, boolean twtSplitShuntAdmittance) {\n         return getValue(twtSplitShuntAdmittance ? twt.getB() / 2 : 0,\n-                        twt.getRatioTapChanger() != null ? twt.getRatioTapChanger().getCurrentStep().getB() : 0,\n-                        twt.getPhaseTapChanger() != null ? twt.getPhaseTapChanger().getCurrentStep().getB() : 0);\n+                        twt.hasRatioTapChanger() ? twt.getRatioTapChanger().getCurrentStep().getB() : 0,\n+                        twt.hasPhaseTapChanger() ? twt.getPhaseTapChanger().getCurrentStep().getB() : 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA0NDE4OQ==", "bodyText": "You can refactor it:\nreturn twt.getRatedU2() / twt.getRatedU1() * twt.getOptionalRatioTapChanger().map(rtc -> rtc.getCurrentStep().getRho()).orElse(1);", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455044189", "createdAt": "2020-07-15T13:19:03Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/SV.java", "diffHunk": "@@ -22,39 +22,39 @@\n \n     public static double getRatio(TwoWindingsTransformer twt) {\n         double rho = twt.getRatedU2() / twt.getRatedU1();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             rho *= twt.getRatioTapChanger().getCurrentStep().getRho();\n         }\n         return rho;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA0NDMwNw==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455044307", "createdAt": "2020-07-15T13:19:13Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/SV.java", "diffHunk": "@@ -22,39 +22,39 @@\n \n     public static double getRatio(TwoWindingsTransformer twt) {\n         double rho = twt.getRatedU2() / twt.getRatedU1();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             rho *= twt.getRatioTapChanger().getCurrentStep().getRho();\n         }\n         return rho;\n     }\n \n     public static double getR(TwoWindingsTransformer twt) {\n         double r = twt.getR();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             r *= 1 + twt.getRatioTapChanger().getCurrentStep().getR() / 100;\n         }\n         return r;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA0NDUwNw==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455044507", "createdAt": "2020-07-15T13:19:27Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/SV.java", "diffHunk": "@@ -22,39 +22,39 @@\n \n     public static double getRatio(TwoWindingsTransformer twt) {\n         double rho = twt.getRatedU2() / twt.getRatedU1();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             rho *= twt.getRatioTapChanger().getCurrentStep().getRho();\n         }\n         return rho;\n     }\n \n     public static double getR(TwoWindingsTransformer twt) {\n         double r = twt.getR();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             r *= 1 + twt.getRatioTapChanger().getCurrentStep().getR() / 100;\n         }\n         return r;\n     }\n \n     public static double getX(TwoWindingsTransformer twt) {\n         double x = twt.getX();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             x *= 1 + twt.getRatioTapChanger().getCurrentStep().getX() / 100;\n         }\n         return x;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA0NDY4Mw==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455044683", "createdAt": "2020-07-15T13:19:39Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/SV.java", "diffHunk": "@@ -22,39 +22,39 @@\n \n     public static double getRatio(TwoWindingsTransformer twt) {\n         double rho = twt.getRatedU2() / twt.getRatedU1();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             rho *= twt.getRatioTapChanger().getCurrentStep().getRho();\n         }\n         return rho;\n     }\n \n     public static double getR(TwoWindingsTransformer twt) {\n         double r = twt.getR();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             r *= 1 + twt.getRatioTapChanger().getCurrentStep().getR() / 100;\n         }\n         return r;\n     }\n \n     public static double getX(TwoWindingsTransformer twt) {\n         double x = twt.getX();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             x *= 1 + twt.getRatioTapChanger().getCurrentStep().getX() / 100;\n         }\n         return x;\n     }\n \n     public static double getG(TwoWindingsTransformer twt) {\n         double g = twt.getG();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             g *= 1 + twt.getRatioTapChanger().getCurrentStep().getG() / 100;\n         }\n         return g;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA0NDgwMA==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455044800", "createdAt": "2020-07-15T13:19:49Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/SV.java", "diffHunk": "@@ -22,39 +22,39 @@\n \n     public static double getRatio(TwoWindingsTransformer twt) {\n         double rho = twt.getRatedU2() / twt.getRatedU1();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             rho *= twt.getRatioTapChanger().getCurrentStep().getRho();\n         }\n         return rho;\n     }\n \n     public static double getR(TwoWindingsTransformer twt) {\n         double r = twt.getR();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             r *= 1 + twt.getRatioTapChanger().getCurrentStep().getR() / 100;\n         }\n         return r;\n     }\n \n     public static double getX(TwoWindingsTransformer twt) {\n         double x = twt.getX();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             x *= 1 + twt.getRatioTapChanger().getCurrentStep().getX() / 100;\n         }\n         return x;\n     }\n \n     public static double getG(TwoWindingsTransformer twt) {\n         double g = twt.getG();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             g *= 1 + twt.getRatioTapChanger().getCurrentStep().getG() / 100;\n         }\n         return g;\n     }\n \n     public static double getB(TwoWindingsTransformer twt) {\n         double b = twt.getB();\n-        if (twt.getRatioTapChanger() != null) {\n+        if (twt.hasRatioTapChanger()) {\n             b *= 1 + twt.getRatioTapChanger().getCurrentStep().getB() / 100;\n         }\n         return b;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA0NTMxNQ==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455045315", "createdAt": "2020-07-15T13:20:27Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/TwtData.java", "diffHunk": "@@ -361,17 +361,17 @@ private static double getTheta(Leg leg) {\n \n     private static double rho(Leg leg, double ratedU0) {\n         double rho = ratedU0 / leg.getRatedU();\n-        if (leg.getRatioTapChanger() != null) {\n+        if (leg.hasRatioTapChanger()) {\n             rho *= leg.getRatioTapChanger().getCurrentStep().getRho();\n         }\n-        if (leg.getPhaseTapChanger() != null) {\n+        if (leg.hasPhaseTapChanger()) {\n             rho *= leg.getPhaseTapChanger().getCurrentStep().getRho();\n         }\n         return rho;\n     }\n \n     private static double alpha(Leg leg) {\n-        return leg.getPhaseTapChanger() != null ? Math.toRadians(leg.getPhaseTapChanger().getCurrentStep().getAlpha()) : 0f;\n+        return leg.hasPhaseTapChanger() ? Math.toRadians(leg.getPhaseTapChanger().getCurrentStep().getAlpha()) : 0f;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA0NTQ5Mg==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455045492", "createdAt": "2020-07-15T13:20:41Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/util/TwtData.java", "diffHunk": "@@ -380,38 +380,38 @@ private static double getValue(double initialValue, double rtcStepValue, double\n \n     private static double getR(Leg leg) {\n         return getValue(leg.getR(),\n-            leg.getRatioTapChanger() != null ? leg.getRatioTapChanger().getCurrentStep().getR() : 0,\n-            leg.getPhaseTapChanger() != null ? leg.getPhaseTapChanger().getCurrentStep().getR() : 0);\n+            leg.hasRatioTapChanger() ? leg.getRatioTapChanger().getCurrentStep().getR() : 0,\n+            leg.hasPhaseTapChanger() ? leg.getPhaseTapChanger().getCurrentStep().getR() : 0);\n     }\n \n     private static double getX(Leg leg) {\n         return getValue(leg.getX(),\n-            leg.getRatioTapChanger() != null ? leg.getRatioTapChanger().getCurrentStep().getX() : 0,\n-            leg.getPhaseTapChanger() != null ? leg.getPhaseTapChanger().getCurrentStep().getX() : 0);\n+            leg.hasRatioTapChanger() ? leg.getRatioTapChanger().getCurrentStep().getX() : 0,\n+            leg.hasPhaseTapChanger() ? leg.getPhaseTapChanger().getCurrentStep().getX() : 0);\n     }\n \n     private static double getG1(Leg leg, boolean twtSplitShuntAdmittance) {\n         return getValue(twtSplitShuntAdmittance ? leg.getG() / 2 : leg.getG(),\n-            leg.getRatioTapChanger() != null ? leg.getRatioTapChanger().getCurrentStep().getG() : 0,\n-            leg.getPhaseTapChanger() != null ? leg.getPhaseTapChanger().getCurrentStep().getG() : 0);\n+            leg.hasRatioTapChanger() ? leg.getRatioTapChanger().getCurrentStep().getG() : 0,\n+            leg.hasPhaseTapChanger() ? leg.getPhaseTapChanger().getCurrentStep().getG() : 0);\n     }\n \n     private static double getB1(Leg leg, boolean twtSplitShuntAdmittance) {\n         return getValue(twtSplitShuntAdmittance ? leg.getB() / 2 : leg.getB(),\n-            leg.getRatioTapChanger() != null ? leg.getRatioTapChanger().getCurrentStep().getB() : 0,\n-            leg.getPhaseTapChanger() != null ? leg.getPhaseTapChanger().getCurrentStep().getB() : 0);\n+            leg.hasRatioTapChanger() ? leg.getRatioTapChanger().getCurrentStep().getB() : 0,\n+            leg.hasPhaseTapChanger() ? leg.getPhaseTapChanger().getCurrentStep().getB() : 0);\n     }\n \n     private static double getG2(Leg leg, boolean twtSplitShuntAdmittance) {\n         return getValue(twtSplitShuntAdmittance ? leg.getG() / 2 : 0.0,\n-            leg.getRatioTapChanger() != null ? leg.getRatioTapChanger().getCurrentStep().getG() : 0,\n-            leg.getPhaseTapChanger() != null ? leg.getPhaseTapChanger().getCurrentStep().getG() : 0);\n+            leg.hasRatioTapChanger() ? leg.getRatioTapChanger().getCurrentStep().getG() : 0,\n+            leg.hasPhaseTapChanger() ? leg.getPhaseTapChanger().getCurrentStep().getG() : 0);\n     }\n \n     private static double getB2(Leg leg, boolean twtSplitShuntAdmittance) {\n         return getValue(twtSplitShuntAdmittance ? leg.getB() / 2 : 0.0,\n-            leg.getRatioTapChanger() != null ? leg.getRatioTapChanger().getCurrentStep().getB() : 0,\n-            leg.getPhaseTapChanger() != null ? leg.getPhaseTapChanger().getCurrentStep().getB() : 0);\n+            leg.hasRatioTapChanger() ? leg.getRatioTapChanger().getCurrentStep().getB() : 0,\n+            leg.hasPhaseTapChanger() ? leg.getPhaseTapChanger().getCurrentStep().getB() : 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA0NzEwNA==", "bodyText": "You can do:\nUctePhaseRegulation uctePhaseRegulation = twoWindingsTransformer.getOptionalRatioTapChanger().map(rtc -> convertRatioTapChanger(twoWindingsTransformer)).orElse(null);\nSame for UcteAngleRegulation", "url": "https://github.com/powsybl/powsybl-core/pull/1391#discussion_r455047104", "createdAt": "2020-07-15T13:22:59Z", "author": {"login": "MioRtia"}, "path": "ucte/ucte-converter/src/main/java/com/powsybl/ucte/converter/UcteExporter.java", "diffHunk": "@@ -592,13 +592,13 @@ private static void convertTwoWindingsTransformer(UcteNetwork ucteNetwork, TwoWi\n      * @param twoWindingsTransformer The TwoWindingTransformer we want to convert\n      */\n     private static void convertRegulation(UcteNetwork ucteNetwork, UcteElementId ucteElementId, TwoWindingsTransformer twoWindingsTransformer) {\n-        if (twoWindingsTransformer.getRatioTapChanger() != null || twoWindingsTransformer.getPhaseTapChanger() != null) {\n+        if (twoWindingsTransformer.hasRatioTapChanger() || twoWindingsTransformer.hasPhaseTapChanger()) {\n             UctePhaseRegulation uctePhaseRegulation = null;\n             UcteAngleRegulation ucteAngleRegulation = null;\n-            if (twoWindingsTransformer.getRatioTapChanger() != null) {\n+            if (twoWindingsTransformer.hasRatioTapChanger()) {\n                 uctePhaseRegulation = convertRatioTapChanger(twoWindingsTransformer);\n             }\n-            if (twoWindingsTransformer.getPhaseTapChanger() != null) {\n+            if (twoWindingsTransformer.hasPhaseTapChanger()) {\n                 ucteAngleRegulation = convertPhaseTapChanger(twoWindingsTransformer);\n             }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b1e9ebe956d3feea7462888e2be66376ad819e"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1493f2abbf5588f17c7d490a2f141333a6f7c720", "author": {"user": {"login": "jlabous", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/1493f2abbf5588f17c7d490a2f141333a6f7c720", "committedDate": "2020-07-15T15:17:03Z", "message": "take remarks in account\n\nSigned-off-by: J\u00e9r\u00e9my LABOUS <jlabous@silicom.fr>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ca15b1e02bce899de393ad1c7becee744c41c2b", "author": {"user": {"login": "jlabous", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/0ca15b1e02bce899de393ad1c7becee744c41c2b", "committedDate": "2020-07-16T07:46:49Z", "message": "add missing correction on ucteExporter\n\nSigned-off-by: J\u00e9r\u00e9my LABOUS <jlabous@silicom.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5OTYzNzM5", "url": "https://github.com/powsybl/powsybl-core/pull/1391#pullrequestreview-449963739", "createdAt": "2020-07-16T15:29:21Z", "commit": {"oid": "0ca15b1e02bce899de393ad1c7becee744c41c2b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0dbbf216b52caa9e96020182192ee9fc4f6ccf5", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/c0dbbf216b52caa9e96020182192ee9fc4f6ccf5", "committedDate": "2020-07-16T15:29:26Z", "message": "Merge branch 'master' into issue_1368_change_tapChanger_checks"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4124, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}