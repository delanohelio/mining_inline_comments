{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNzA5MzUz", "number": 1319, "title": "Addition of an alias system on Identifiables in IIDM", "bodyText": "This PR is a proposal and a Work In Progress\n\nPlease check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nDoes this PR already have an issue describing the problem ? If so, link to this issue using '#XXX' and skip the rest\nNo\nWhat kind of change does this PR introduce? (Bug fix, feature, docs update, ...)\nFeature\nWhat is the current behavior? (You can also link to an open issue here)\nCurrently, there is only one way to reference an Identifiable: its ID.\nHowever, in some context it may be interesting to attach \"secondary\" IDs to the network devices and efficiently retrieve the device based on this new ID using the network API.\nAn example of such a need may be the usage of UCTE files. There are actually two ways to refer to network devices in UCTE files:\n\nnode from / node to / order code triplet (the one chosen by PowSyBl)\nnode from / node to / element name (used by some countries)\n\nWhat is the new behavior (if this is a feature change)?\nThis PR proposes the addition of an alias mechanism on all IIDM Identifiable. The alias can be seen as secondary IDs and has similar rules:\n\nAliases must be unique in the network\nAliases must be different from any ID of the network\nNetwork API has a method that allow searching an Identifiable based on an alias\n\nOpen questions on my side:\n\nWhat if the triplet node from / node to / element name is not unique in the UCTE file ? Do we catch the exception ? Do we allow multiple identifiables referenced by an alias ?\nWould it better to replace the Exception thrown in default implementation by \"do nothing\" implementation, to avoid UCTE import crash using incomplete IIDM implementation ?\n\nDoes this PR introduce a breaking change or deprecate an API? If yes, check the following:\nNo\n\n The Breaking Change or Deprecated label has been added\n The migration guide has been updated in the github wiki (What changes might users need to make in their application due to this PR?)\n\nOther information:\n(if any of the questions/checkboxes don't apply, please delete them entirely)", "createdAt": "2020-05-22T04:36:47Z", "url": "https://github.com/powsybl/powsybl-core/pull/1319", "merged": true, "mergeCommit": {"oid": "909f66271f0f4c87b6b1644c0c53c15c23343919"}, "closed": true, "closedAt": "2020-07-17T11:01:54Z", "author": {"login": "murgeyseb"}, "timelineItems": {"totalCount": 41, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjqyKTABqjMzNjMyMTU0NDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1wK4mAH2gAyNDIxNzA5MzUzOjJjMTNjNjM1MTRkODA0ZjYzYWZhNTUxNGEwNTlhMzM1OWFiMzVlNjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "27777513a07691ac28dcd94b012d6754d796b90c", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/27777513a07691ac28dcd94b012d6754d796b90c", "committedDate": "2020-05-21T18:25:21Z", "message": "First version of IIDM aliases addition"}, "afterCommit": {"oid": "10407b9a8bb1a451d5612ca1ef96946695037980", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/10407b9a8bb1a451d5612ca1ef96946695037980", "committedDate": "2020-05-22T04:43:52Z", "message": "First version of IIDM aliases addition\n\nSigned-off-by: S\u00e9bastien Murgey <sebastien.murgey@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTQ0NDYy", "url": "https://github.com/powsybl/powsybl-core/pull/1319#pullrequestreview-418944462", "createdAt": "2020-05-27T07:57:15Z", "commit": {"oid": "2b49777ba791b911e76d984078a3094c523f9134"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzo1NzoxNVrOGa9sKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwODoxMzoyMFrOGa-PtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkyNjg5MQ==", "bodyText": "@MioRtia do you confirm that we decided recently (2 or 3 weeks ago) to change the strategy for the default implementation of new methods to throw less exceptions?\nIf it's the case I propose:\n\ngetAliases -> return an empty set\naddAlias -> silently ignore\nremoveAlias -> silently ignore\nhasAliases -> return false", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r430926891", "createdAt": "2020-05-27T07:57:15Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/Identifiable.java", "diffHunk": "@@ -41,6 +38,35 @@ default String getName() {\n         return getNameOrId();\n     }\n \n+    /**\n+     * Get the aliases of the object.\n+     */\n+    default Set<String> getAliases() {\n+        throw new UnsupportedOperationException();\n+    }\n+\n+    /**\n+     * Add an alias to the object. Aliases must be unique in associated Network, and different\n+     * from any identifiable ID.\n+     */\n+    default void addAlias(String alias) {\n+        throw new UnsupportedOperationException();\n+    }\n+\n+    /**\n+     * Remove an alias of the object.\n+     */\n+    default void removeAlias(String alias) {\n+        throw new UnsupportedOperationException();\n+    }\n+\n+    /**\n+     * Return true if identifiable has aliases.\n+     */\n+    default boolean hasAliases() {\n+        throw new UnsupportedOperationException();\n+    }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b49777ba791b911e76d984078a3094c523f9134"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkyODU0Ng==", "bodyText": "Do we really need this method: what is the risk to change the behavior of the getIdentifiable(String id) if we consider aliases like unique IDs. At the end, all the user code would use this new method, don't they?", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r430928546", "createdAt": "2020-05-27T08:00:02Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/Network.java", "diffHunk": "@@ -661,12 +661,22 @@ default HvdcLine getHvdcLine(HvdcConverterStation converterStation) {\n     HvdcLineAdder newHvdcLine();\n \n     /**\n-     * Get a equipment.\n+     * Get an equipment by its ID.\n      *\n      * @param id the id of the equipment\n      */\n     Identifiable<?> getIdentifiable(String id);\n \n+    /**\n+     * Get an equipment by its ID or eventually an alias.\n+     *\n+     * @param idOrAlias the id or an alias of the equipment\n+     * @param searchInAlias if true then searches in the alias and the IDs. If false, searches only by ID.\n+     */\n+    default Identifiable<?> getIdentifiable(String idOrAlias, boolean searchInAlias) {\n+        throw new UnsupportedOperationException();\n+    }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b49777ba791b911e76d984078a3094c523f9134"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkyOTg3MA==", "bodyText": "From my point of view, we should automatically add the ids of the half line when a TieLine is created, not only in the merge function. Is there a risk to do it automatically in the add() method of the TieLineAdder?", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r430929870", "createdAt": "2020-05-27T08:02:28Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/NetworkImpl.java", "diffHunk": "@@ -1101,13 +1111,15 @@ private void replaceDanglingLineByLine(List<MergedLine> lines, Multimap<Boundary\n             l.getTerminal1().setP(mergedLine.p1).setQ(mergedLine.q1);\n             l.getTerminal2().setP(mergedLine.p2).setQ(mergedLine.q2);\n             mergedLine.properties.forEach((key, val) -> l.setProperty(key.toString(), val.toString()));\n+            mergedLine.aliases.forEach(l::addAlias);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b49777ba791b911e76d984078a3094c523f9134"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkzMjU3MA==", "bodyText": "You should test if the object that already exists in the map is not the same than the obj argument, and silently ignore it. You could be possible to write something like this:\naddAlias(obj, \"alias\"); // works because \"alias\" is not used\naddAlias(obj, \"alias\"); // works because \"alias\" is already an alias of obj\naddAlias(obj2, \"alias\"); // fails because \"alias\" is already an alias of obj, and obj != obj2", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r430932570", "createdAt": "2020-05-27T08:07:21Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/NetworkIndex.java", "diffHunk": "@@ -50,14 +53,53 @@ void checkAndAdd(Identifiable<?> obj) {\n         all.add(obj);\n     }\n \n+    void addAlias(Identifiable<?> obj, String alias) {\n+        if (objectsById.containsKey(alias)) {\n+            Identifiable<?> aliasConflict = objectsById.get(alias);\n+            String message = String.format(\"Object (%s) with alias '%s' cannot be created because alias already refers to object (%s) with ID '%s'\",\n+                    obj.getClass(),\n+                    alias,\n+                    aliasConflict.getClass(),\n+                    aliasConflict.getId());\n+            throw new PowsyblException(message);\n+        } else if (idByAlias.containsKey(alias)) {\n+            Identifiable<?> aliasConflict = objectsById.get(idByAlias.get(alias));\n+            String message = String.format(\"Object (%s) with alias '%s' cannot be created because alias already refers to object (%s) with ID '%s'\",\n+                    obj.getClass(),\n+                    alias,\n+                    aliasConflict.getClass(),\n+                    aliasConflict.getId());\n+            throw new PowsyblException(message);\n+        }\n+        idByAlias.put(alias, obj.getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b49777ba791b911e76d984078a3094c523f9134"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkzMzgxMA==", "bodyText": "Remove this test: a for loop on an empty list is OK", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r430933810", "createdAt": "2020-05-27T08:09:29Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/AliasesXml.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.iidm.xml;\n+\n+import com.powsybl.iidm.network.Identifiable;\n+\n+import javax.xml.stream.XMLStreamException;\n+\n+/**\n+ * @author Sebastien Murgey <sebastien.murgey at rte-france.com>\n+ */\n+public final class AliasesXml {\n+\n+    static final String ALIAS = \"alias\";\n+\n+    public static void write(Identifiable<?> identifiable, NetworkXmlWriterContext context) throws XMLStreamException {\n+        if (identifiable.hasAliases()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b49777ba791b911e76d984078a3094c523f9134"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkzNDc2NQ==", "bodyText": "Impostor! \ud83e\udd23", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r430934765", "createdAt": "2020-05-27T08:11:09Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-xml-converter/src/test/java/com/powsybl/iidm/xml/TieLineWithAliasesXmlTest.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/**\n+ * Copyright (c) 2019, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+\n+package com.powsybl.iidm.xml;\n+\n+import org.junit.Test;\n+\n+import java.io.IOException;\n+\n+/**\n+ * @author Mathieu Bague <mathieu.bague@rte-france.com>\n+ */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b49777ba791b911e76d984078a3094c523f9134"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkzNTk4OQ==", "bodyText": "Is really what you want? Maybe the elementName should be an alias, maybe \"VL1 VL2 order\" should be another one.\nMaybe it could be nice to create a function for that", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r430935989", "createdAt": "2020-05-27T08:13:20Z", "author": {"login": "mathbagu"}, "path": "ucte/ucte-converter/src/main/java/com/powsybl/ucte/converter/UcteImporter.java", "diffHunk": "@@ -258,6 +258,9 @@ private static void createDanglingLine(UcteLine ucteLine, boolean connected,\n                 .setQ0(q0)\n                 .setUcteXnodeCode(xnode.getCode().toString())\n                 .add();\n+        if (ucteLine.getElementName() != null && !ucteLine.getElementName().isEmpty()) {\n+            dl.addAlias(String.format(\"%s %s %s\", ucteLine.getId().getNodeCode1().toString(), ucteLine.getId().getNodeCode2().toString(), ucteLine.getElementName()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b49777ba791b911e76d984078a3094c523f9134"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2fd8541647d4f45963ce99412d587caf6e98bdf7", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/2fd8541647d4f45963ce99412d587caf6e98bdf7", "committedDate": "2020-06-16T07:25:07Z", "message": "Remove research only by ID, and fix Ucte alias creation script to avoid duplicated aliases.\n\nSigned-off-by: S\u00e9bastien MURGEY <sebastien.murgey@rte-france.com>"}, "afterCommit": {"oid": "10de9299bad16a575d3546c7723058962386d0f7", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/10de9299bad16a575d3546c7723058962386d0f7", "committedDate": "2020-06-30T15:08:34Z", "message": "Some fixes after rebase\n\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1645bcd979eeff82197e98eeba786547e9f3e439", "author": {"user": {"login": "mathbagu", "name": "Mathieu BAGUE"}}, "url": "https://github.com/powsybl/powsybl-core/commit/1645bcd979eeff82197e98eeba786547e9f3e439", "committedDate": "2020-06-30T15:18:09Z", "message": "Prepare XIIDM files for IIDM v1.3 (#1312)\n\n* Prepare XIIDM files for IIDM v1.3\r\n\r\nSigned-off-by: Mathieu BAGUE <mathieu.bague@rte-france.com>\r\n\r\n* Fix sonar issue\r\n\r\nSigned-off-by: Mathieu BAGUE <mathieu.bague@rte-france.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b51ad139b5ace53d8669e9db1f3f6d6ddbc4fbf", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/0b51ad139b5ace53d8669e9db1f3f6d6ddbc4fbf", "committedDate": "2020-06-30T15:18:09Z", "message": "Adapt tests of voltagePerReactivePowerControl, matpower converter and psse converter to XIIDM 1.3 (#1353)\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f08dd0278eb8c3a81851aef347e0f4068b344bc", "author": {"user": {"login": "zamarrenolm", "name": "Luma"}}, "url": "https://github.com/powsybl/powsybl-core/commit/2f08dd0278eb8c3a81851aef347e0f4068b344bc", "committedDate": "2020-06-30T15:18:09Z", "message": "cgmes model returns all terminals for a given conducting equipment (#1347)\n\nSigned-off-by: Luma <zamarrenolm@aia.es>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2ea6093e702c79de6b5b1e0cc606e85e8d3d20c", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/c2ea6093e702c79de6b5b1e0cc606e85e8d3d20c", "committedDate": "2020-06-30T15:18:09Z", "message": "Redesign IIDM shunt compensator allowing non linear shunts + updated conversions + updated serialization (#1322)\n\n* Change Shunt API/impl\r\n* Correct json parameters files\r\n* Change XML serialisation for shunts\r\n* Change importers\r\n* Correct IEEE converter tests\r\n* Correct groovy binding\r\n* Correct matpower tests\r\n* Correct merging view tests\r\n* Correct psse converter tests\r\n* Change methods name in Shunt API\r\n* Update sectionCount attribute in XIIDM\r\n* Delete methods for shunts using the concept of sectionIndex\r\n* Replace currentSectionCount parameters/fields by sectionCount\r\n* Rename currentSectionCount parameter\r\n* If the g is undefined in non linear shunt model adder, g per section is considered equal to 0 (g = g of last section)\r\n\r\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10ffdc8cceebc72dc3f49d9b31710c5671f07f19", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/10ffdc8cceebc72dc3f49d9b31710c5671f07f19", "committedDate": "2020-06-30T15:18:09Z", "message": "Add hasTemporaryLimits() to CurrentLimitsAdder + correct CGMES conversion (#1372)\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab920673f4b65b630ba305a18fa744ebb0816be4", "author": {"user": {"login": "mathbagu", "name": "Mathieu BAGUE"}}, "url": "https://github.com/powsybl/powsybl-core/commit/ab920673f4b65b630ba305a18fa744ebb0816be4", "committedDate": "2020-06-30T15:18:09Z", "message": "Fix sonar bugs: \"Don't use fail() inside a try-catch catching an AssertionError.\" (#1370)\n\nSigned-off-by: Mathieu BAGUE <mathieu.bague@rte-france.com>\r\n\r\nCo-authored-by: MioRtia <miora.ralambotiana@rte-france.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21af21418db69dd7f47471a5c49919db118b97fd", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/21af21418db69dd7f47471a5c49919db118b97fd", "committedDate": "2020-06-30T15:18:09Z", "message": "First version of IIDM aliases addition\n\nSigned-off-by: S\u00e9bastien Murgey <sebastien.murgey@gmail.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d03e0f667f3ee1e62b2021fe766083a9d9e02dd", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/6d03e0f667f3ee1e62b2021fe766083a9d9e02dd", "committedDate": "2020-06-30T15:18:09Z", "message": "Fix UCTE impoter TieLine creation that was lacking <DanglingLines ID as alias too\n\nSigned-off-by: S\u00e9bastien Murgey <sebastien.murgey@gmail.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf669ce1ba598fe0149a51a75488350c00d18bd9", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/bf669ce1ba598fe0149a51a75488350c00d18bd9", "committedDate": "2020-06-30T15:18:09Z", "message": "Fix IIDM XML export\n\nSigned-off-by: S\u00e9bastien Murgey <sebastien.murgey@gmail.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55a6fce77c2d54ed87c8737951eb92d917a10982", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/55a6fce77c2d54ed87c8737951eb92d917a10982", "committedDate": "2020-06-30T15:18:09Z", "message": "Add tests\n\nSigned-off-by: S\u00e9bastien Murgey <sebastien.murgey@gmail.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "996cd2a21c5eb2bd0b5beecf2796cb76e6347495", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/996cd2a21c5eb2bd0b5beecf2796cb76e6347495", "committedDate": "2020-06-30T15:18:09Z", "message": "Change default implementation of aliases management methods\n\nSigned-off-by: S\u00e9bastien MURGEY <sebastien.murgey@rte-france.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d67448b3733e6ae66fd954c6099df7afe6e92d28", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/d67448b3733e6ae66fd954c6099df7afe6e92d28", "committedDate": "2020-06-30T15:18:10Z", "message": "Adapt addAlias behaviour after review\n\nSigned-off-by: S\u00e9bastien MURGEY <sebastien.murgey@rte-france.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eebaad271415f0191a6e41ed72d690d4e784df9a", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/eebaad271415f0191a6e41ed72d690d4e784df9a", "committedDate": "2020-06-30T15:18:10Z", "message": "Fixes after review\n\nSigned-off-by: S\u00e9bastien MURGEY <sebastien.murgey@rte-france.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a07003e0eb1f1c7a4521afa34ce1baf386231483", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/a07003e0eb1f1c7a4521afa34ce1baf386231483", "committedDate": "2020-06-30T15:18:10Z", "message": "Refactor UCTE alias creation in UcteImporter\n\nSigned-off-by: S\u00e9bastien MURGEY <sebastien.murgey@rte-france.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3d5d8b23759366a5b366fca82c1d6dcced095eb", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/b3d5d8b23759366a5b366fca82c1d6dcced095eb", "committedDate": "2020-06-30T15:18:10Z", "message": "Fix check style\n\nSigned-off-by: S\u00e9bastien MURGEY <sebastien.murgey@rte-france.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90f85c4a84e5a7881ef191a82fe5c0d1b6851444", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/90f85c4a84e5a7881ef191a82fe5c0d1b6851444", "committedDate": "2020-06-30T15:18:10Z", "message": "Remove aliases creation from UcteImporter and migrate it in a utility package\n\nSigned-off-by: S\u00e9bastien MURGEY <sebastien.murgey@rte-france.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1f099f8fc3e330331d51434e44281fb1b9156f6", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/b1f099f8fc3e330331d51434e44281fb1b9156f6", "committedDate": "2020-06-30T15:18:10Z", "message": "Change default behaviour to change in aliases by default\n\nSigned-off-by: S\u00e9bastien MURGEY <sebastien.murgey@rte-france.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fa473a2370f7d2a188ac064de0e5e4d3e5ed681", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/6fa473a2370f7d2a188ac064de0e5e4d3e5ed681", "committedDate": "2020-06-30T15:18:10Z", "message": "Remove research only by ID, and fix Ucte alias creation script to avoid duplicated aliases.\n\nSigned-off-by: S\u00e9bastien MURGEY <sebastien.murgey@rte-france.com>\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05e95ee5c2636602fa5385cd6c5e3dc2bbaf6b4f", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/05e95ee5c2636602fa5385cd6c5e3dc2bbaf6b4f", "committedDate": "2020-06-30T15:18:10Z", "message": "Some fixes after rebase\n\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "10de9299bad16a575d3546c7723058962386d0f7", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/10de9299bad16a575d3546c7723058962386d0f7", "committedDate": "2020-06-30T15:08:34Z", "message": "Some fixes after rebase\n\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}, "afterCommit": {"oid": "05e95ee5c2636602fa5385cd6c5e3dc2bbaf6b4f", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/05e95ee5c2636602fa5385cd6c5e3dc2bbaf6b4f", "committedDate": "2020-06-30T15:18:10Z", "message": "Some fixes after rebase\n\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ac04dd93098c9b97fcfbc0c9bd2f1f20d62433a", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/1ac04dd93098c9b97fcfbc0c9bd2f1f20d62433a", "committedDate": "2020-06-30T15:19:55Z", "message": "Merge branch 'master' into aliasesAddition"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzMDEzMzE1", "url": "https://github.com/powsybl/powsybl-core/pull/1319#pullrequestreview-443013315", "createdAt": "2020-07-06T12:02:54Z", "commit": {"oid": "1ac04dd93098c9b97fcfbc0c9bd2f1f20d62433a"}, "state": "COMMENTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxMjowMjo1NVrOGtUamw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxMjo1MToxN1rOGtV65g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE3MzU5NQ==", "bodyText": "There is a small typo here\n\nor ana alias", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r450173595", "createdAt": "2020-07-06T12:02:55Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/Network.java", "diffHunk": "@@ -261,7 +261,7 @@ static PrettyNetworkFactory with(String name) {\n     /**\n      * Get a substation voltage level.\n      *\n-     * @param id the id of the substation voltage level\n+     * @param id the id or ana alias of the substation voltage level", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac04dd93098c9b97fcfbc0c9bd2f1f20d62433a"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE3NDAyOA==", "bodyText": "Is there a reason why you choose a TreeSet instead of a HashSet. Does the order important for you? Maybe for the XML round trip?", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r450174028", "createdAt": "2020-07-06T12:03:52Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/AbstractIdentifiable.java", "diffHunk": "@@ -24,6 +24,8 @@\n \n     protected boolean fictitious = false;\n \n+    protected Set<String> aliases = new TreeSet<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac04dd93098c9b97fcfbc0c9bd2f1f20d62433a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5MzAyMQ==", "bodyText": "Should we change the mergeability check to consider also aliases?", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r450193021", "createdAt": "2020-07-06T12:41:41Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/NetworkImpl.java", "diffHunk": "@@ -966,6 +966,11 @@ private void mergeDanglingLines(List<MergedLine> lines, DanglingLine dl1, Dangli\n         if (dl1 != null) {\n             MergedLine l = new MergedLine();\n             l.id = dl1.getId().compareTo(dl2.getId()) < 0 ? dl1.getId() + \" + \" + dl2.getId() : dl2.getId() + \" + \" + dl1.getId();\n+            l.aliases = new HashSet<>();\n+            l.aliases.add(dl1.getId());\n+            l.aliases.add(dl2.getId());\n+            l.aliases.addAll(dl1.getAliases());\n+            l.aliases.addAll(dl2.getAliases());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac04dd93098c9b97fcfbc0c9bd2f1f20d62433a"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5NDUyMQ==", "bodyText": "It's not efficient: you search for the object 3 times. If the map is huge, it could lead to bad performance issue.", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r450194521", "createdAt": "2020-07-06T12:44:34Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/NetworkIndex.java", "diffHunk": "@@ -50,14 +53,54 @@ void checkAndAdd(Identifiable<?> obj) {\n         all.add(obj);\n     }\n \n-    Identifiable get(String id) {\n+    boolean addAlias(Identifiable<?> obj, String alias) {\n+        if (objectsById.containsKey(alias)) {\n+            if (objectsById.get(alias).equals(obj)) {\n+                // Silently ignore affecting the objects id to its own aliases\n+                return false;\n+            }\n+            Identifiable<?> aliasConflict = objectsById.get(alias);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac04dd93098c9b97fcfbc0c9bd2f1f20d62433a"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5NDcwMA==", "bodyText": "Same kind of remark there", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r450194700", "createdAt": "2020-07-06T12:44:55Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/NetworkIndex.java", "diffHunk": "@@ -50,14 +53,54 @@ void checkAndAdd(Identifiable<?> obj) {\n         all.add(obj);\n     }\n \n-    Identifiable get(String id) {\n+    boolean addAlias(Identifiable<?> obj, String alias) {\n+        if (objectsById.containsKey(alias)) {\n+            if (objectsById.get(alias).equals(obj)) {\n+                // Silently ignore affecting the objects id to its own aliases\n+                return false;\n+            }\n+            Identifiable<?> aliasConflict = objectsById.get(alias);\n+            String message = String.format(\"Object (%s) with alias '%s' cannot be created because alias already refers to object (%s) with ID '%s'\",\n+                    obj.getClass(),\n+                    alias,\n+                    aliasConflict.getClass(),\n+                    aliasConflict.getId());\n+            throw new PowsyblException(message);\n+        } else if (idByAlias.containsKey(alias)) {\n+            if (objectsById.get(idByAlias.get(alias)).equals(obj)) {\n+                // Silently ignore affecting the same alias twice to an object\n+                return false;\n+            }\n+            Identifiable<?> aliasConflict = objectsById.get(idByAlias.get(alias));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac04dd93098c9b97fcfbc0c9bd2f1f20d62433a"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5NTU4NA==", "bodyText": "Performance: you are searching for the same object multiple times.", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r450195584", "createdAt": "2020-07-06T12:46:33Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/NetworkIndex.java", "diffHunk": "@@ -50,14 +53,54 @@ void checkAndAdd(Identifiable<?> obj) {\n         all.add(obj);\n     }\n \n-    Identifiable get(String id) {\n+    boolean addAlias(Identifiable<?> obj, String alias) {\n+        if (objectsById.containsKey(alias)) {\n+            if (objectsById.get(alias).equals(obj)) {\n+                // Silently ignore affecting the objects id to its own aliases\n+                return false;\n+            }\n+            Identifiable<?> aliasConflict = objectsById.get(alias);\n+            String message = String.format(\"Object (%s) with alias '%s' cannot be created because alias already refers to object (%s) with ID '%s'\",\n+                    obj.getClass(),\n+                    alias,\n+                    aliasConflict.getClass(),\n+                    aliasConflict.getId());\n+            throw new PowsyblException(message);\n+        } else if (idByAlias.containsKey(alias)) {\n+            if (objectsById.get(idByAlias.get(alias)).equals(obj)) {\n+                // Silently ignore affecting the same alias twice to an object\n+                return false;\n+            }\n+            Identifiable<?> aliasConflict = objectsById.get(idByAlias.get(alias));\n+            String message = String.format(\"Object (%s) with alias '%s' cannot be created because alias already refers to object (%s) with ID '%s'\",\n+                    obj.getClass(),\n+                    alias,\n+                    aliasConflict.getClass(),\n+                    aliasConflict.getId());\n+            throw new PowsyblException(message);\n+        }\n+        idByAlias.put(alias, obj.getId());\n+        return true;\n+    }\n+\n+    public <I extends Identifiable<I>> void removeAlias(Identifiable<?> obj, String alias) {\n+        if (!idByAlias.containsKey(alias)) {\n+            throw new PowsyblException(String.format(\"No alias '%s' found in the network\", alias));\n+        } else if (!idByAlias.get(alias).equals(obj.getId())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac04dd93098c9b97fcfbc0c9bd2f1f20d62433a"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5NjU4Nw==", "bodyText": "That means it's not possible to use the ID of an object as one of its alias. I know it doesn't make any sense, but if it's allowed by the code, does it work properly?", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r450196587", "createdAt": "2020-07-06T12:48:19Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/NetworkIndex.java", "diffHunk": "@@ -50,14 +53,54 @@ void checkAndAdd(Identifiable<?> obj) {\n         all.add(obj);\n     }\n \n-    Identifiable get(String id) {\n+    boolean addAlias(Identifiable<?> obj, String alias) {\n+        if (objectsById.containsKey(alias)) {\n+            if (objectsById.get(alias).equals(obj)) {\n+                // Silently ignore affecting the objects id to its own aliases\n+                return false;\n+            }\n+            Identifiable<?> aliasConflict = objectsById.get(alias);\n+            String message = String.format(\"Object (%s) with alias '%s' cannot be created because alias already refers to object (%s) with ID '%s'\",\n+                    obj.getClass(),\n+                    alias,\n+                    aliasConflict.getClass(),\n+                    aliasConflict.getId());\n+            throw new PowsyblException(message);\n+        } else if (idByAlias.containsKey(alias)) {\n+            if (objectsById.get(idByAlias.get(alias)).equals(obj)) {\n+                // Silently ignore affecting the same alias twice to an object\n+                return false;\n+            }\n+            Identifiable<?> aliasConflict = objectsById.get(idByAlias.get(alias));\n+            String message = String.format(\"Object (%s) with alias '%s' cannot be created because alias already refers to object (%s) with ID '%s'\",\n+                    obj.getClass(),\n+                    alias,\n+                    aliasConflict.getClass(),\n+                    aliasConflict.getId());\n+            throw new PowsyblException(message);\n+        }\n+        idByAlias.put(alias, obj.getId());\n+        return true;\n+    }\n+\n+    public <I extends Identifiable<I>> void removeAlias(Identifiable<?> obj, String alias) {\n+        if (!idByAlias.containsKey(alias)) {\n+            throw new PowsyblException(String.format(\"No alias '%s' found in the network\", alias));\n+        } else if (!idByAlias.get(alias).equals(obj.getId())) {\n+            throw new PowsyblException(String.format(\"Alias '%s' do not correspond to object '%s'\", alias, obj.getId()));\n+        } else {\n+            idByAlias.remove(alias);\n+        }\n+    }\n+\n+    Identifiable get(String idOrAlias) {\n+        String id = idByAlias.getOrDefault(idOrAlias, idOrAlias);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac04dd93098c9b97fcfbc0c9bd2f1f20d62433a"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5NzI2Mg==", "bodyText": "Could you please add a test where you try to add as an alias the ID of an identifiable, and ensure you can get the object.", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r450197262", "createdAt": "2020-07-06T12:49:34Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-impl/src/test/java/com/powsybl/iidm/network/impl/AliasesTest.java", "diffHunk": "@@ -0,0 +1,92 @@\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.iidm.network.impl;\n+\n+import com.powsybl.commons.PowsyblException;\n+import com.powsybl.iidm.network.Generator;\n+import com.powsybl.iidm.network.Load;\n+import com.powsybl.iidm.network.Network;\n+import com.powsybl.iidm.network.test.NetworkTest1Factory;\n+import org.junit.Test;\n+\n+import static org.junit.Assert.*;\n+\n+/**\n+ * @author Sebastien Murgey <sebastien.murgey at rte-france.com>\n+ */\n+public class AliasesTest {\n+    @Test\n+    public void canAddAliases() {\n+        Network network = NetworkTest1Factory.create();\n+        Load load = network.getLoad(\"load1\");\n+        assertTrue(load.getAliases().isEmpty());\n+        load.addAlias(\"Load alias\");\n+\n+        assertEquals(1, load.getAliases().size());\n+        assertTrue(load.getAliases().contains(\"Load alias\"));\n+        assertNotNull(network.getLoad(\"Load alias\"));\n+        assertEquals(network.getLoad(\"Load alias\"), load);\n+    }\n+\n+    @Test\n+    public void canRemoveAliases() {\n+        Network network = NetworkTest1Factory.create();\n+        Load load = network.getLoad(\"load1\");\n+        assertTrue(load.getAliases().isEmpty());\n+        load.addAlias(\"Load alias\");\n+\n+        assertEquals(1, load.getAliases().size());\n+        assertTrue(load.getAliases().contains(\"Load alias\"));\n+\n+        load.removeAlias(\"Load alias\");\n+        assertTrue(load.getAliases().isEmpty());\n+    }\n+\n+    @Test\n+    public void silentlyIgnoreAffectingObjectsIdAsAlias() {\n+        Network network = NetworkTest1Factory.create();\n+        Load load = network.getLoad(\"load1\");\n+        assertTrue(load.getAliases().isEmpty());\n+        load.addAlias(\"load1\");\n+        assertTrue(load.getAliases().isEmpty());\n+    }\n+\n+    @Test\n+    public void silentlyIgnoreAffectingTwiceSameIdToAnObject() {\n+        Network network = NetworkTest1Factory.create();\n+        Load load = network.getLoad(\"load1\");\n+        assertTrue(load.getAliases().isEmpty());\n+        load.addAlias(\"Load alias\");\n+        load.addAlias(\"Load alias\");\n+\n+        assertEquals(1, load.getAliases().size());\n+        assertTrue(load.getAliases().contains(\"Load alias\"));\n+    }\n+\n+    @Test(expected = PowsyblException.class)\n+    public void failWhenDuplicatedAlias() {\n+        Network network = NetworkTest1Factory.create();\n+        Load load = network.getLoad(\"load1\");\n+        Generator generator = network.getGenerator(\"generator1\");\n+        load.addAlias(\"Alias\");\n+        generator.addAlias(\"Alias\");\n+    }\n+\n+    @Test(expected = PowsyblException.class)\n+    public void failWhenAliasEqualToAnId() {\n+        Network network = NetworkTest1Factory.create();\n+        Generator generator = network.getGenerator(\"generator1\");\n+        generator.addAlias(\"load1\");\n+    }\n+\n+    @Test(expected = PowsyblException.class)\n+    public void failWhenRemovingNonExistingAlias() {\n+        Network network = NetworkTest1Factory.create();\n+        Load load = network.getLoad(\"load1\");\n+        load.removeAlias(\"Load alias\");\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac04dd93098c9b97fcfbc0c9bd2f1f20d62433a"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5ODA0NA==", "bodyText": "Both are redundant?", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r450198044", "createdAt": "2020-07-06T12:50:55Z", "author": {"login": "mathbagu"}, "path": "iidm/iidm-xml-converter/src/test/java/com/powsybl/iidm/xml/TieLineWithAliasesXmlTest.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/*\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+\n+package com.powsybl.iidm.xml;\n+\n+import org.junit.Test;\n+\n+import java.io.IOException;\n+\n+/**\n+ * @author Sebastien Murgey <sebastien.murgey@rte-france.com>\n+ */\n+public class TieLineWithAliasesXmlTest extends AbstractXmlConverterTest {\n+\n+    @Test\n+    public void test() throws IOException {\n+        roundTripVersionedXmlTest(\"tielineWithAliases.xml\", IidmXmlConstants.CURRENT_IIDM_XML_VERSION);\n+\n+        // Tests for backward compatibility\n+        roundTripVersionedXmlFromMinToCurrentVersionTest(\"tielineWithAliases.xml\", IidmXmlVersion.V_1_3);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac04dd93098c9b97fcfbc0c9bd2f1f20d62433a"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5ODI0Ng==", "bodyText": "Add an empty line", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r450198246", "createdAt": "2020-07-06T12:51:17Z", "author": {"login": "mathbagu"}, "path": "ucte/ucte-util/pom.xml", "diffHunk": "@@ -0,0 +1,52 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>com.powsybl</groupId>\n+        <artifactId>powsybl-ucte</artifactId>\n+        <version>3.5.0-SNAPSHOT</version>\n+    </parent>\n+\n+    <artifactId>powsybl-ucte-util</artifactId>\n+    <name>UCTE utilities</name>\n+    <description>Utility classes for UCTE formatted network and files</description>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>${project.groupId}</groupId>\n+            <artifactId>powsybl-iidm-api</artifactId>\n+            <version>${project.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>${project.groupId}</groupId>\n+            <artifactId>powsybl-ucte-network</artifactId>\n+            <version>${project.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>${project.groupId}</groupId>\n+            <artifactId>powsybl-config-test</artifactId>\n+            <version>${project.version}</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>${project.groupId}</groupId>\n+            <artifactId>powsybl-iidm-impl</artifactId>\n+            <version>${project.version}</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>${project.groupId}</groupId>\n+            <artifactId>powsybl-ucte-converter</artifactId>\n+            <version>${project.version}</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>junit</groupId>\n+            <artifactId>junit</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+    </dependencies>\n+</project>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac04dd93098c9b97fcfbc0c9bd2f1f20d62433a"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "295260068fdbabdab5d9339954860f1ad51067b0", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/295260068fdbabdab5d9339954860f1ad51067b0", "committedDate": "2020-07-07T08:00:53Z", "message": "Take into account remarks from review\n\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e321e298553b5bf17e790aa9187844a25b6a166f", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/e321e298553b5bf17e790aa9187844a25b6a166f", "committedDate": "2020-07-10T06:49:22Z", "message": "Merge branch 'master' into aliasesAddition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ed7eb525819fd7e22ea60ab93135e0c250c4126", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/8ed7eb525819fd7e22ea60ab93135e0c250c4126", "committedDate": "2020-07-10T08:03:40Z", "message": "Merge branch 'master' into aliasesAddition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8f7711aa38d718072bc178efc7492b628ca97b5", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/c8f7711aa38d718072bc178efc7492b628ca97b5", "committedDate": "2020-07-10T08:59:16Z", "message": "Add aliases in check mergeability check\n\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83c1f2d58e407b30b4ff9aeed152179bcc4570cf", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/83c1f2d58e407b30b4ff9aeed152179bcc4570cf", "committedDate": "2020-07-16T07:50:33Z", "message": "Merge branch 'master' into aliasesAddition"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NjA1OTE0", "url": "https://github.com/powsybl/powsybl-core/pull/1319#pullrequestreview-449605914", "createdAt": "2020-07-16T07:55:32Z", "commit": {"oid": "83c1f2d58e407b30b4ff9aeed152179bcc4570cf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5OTcxMDU3", "url": "https://github.com/powsybl/powsybl-core/pull/1319#pullrequestreview-449971057", "createdAt": "2020-07-16T15:37:12Z", "commit": {"oid": "83c1f2d58e407b30b4ff9aeed152179bcc4570cf"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNTozNzoxMlrOGywwZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNTo1OToyMVrOGyxtDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTg4MDgwNw==", "bodyText": "I think you should return an unmodifable copy", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r455880807", "createdAt": "2020-07-16T15:37:12Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/AbstractIdentifiable.java", "diffHunk": "@@ -51,6 +53,29 @@ public String getNameOrId() {\n         return name != null ? name : id;\n     }\n \n+    @Override\n+    public Set<String> getAliases() {\n+        return aliases;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83c1f2d58e407b30b4ff9aeed152179bcc4570cf"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTg5NjMzMg==", "bodyText": "Same remark", "url": "https://github.com/powsybl/powsybl-core/pull/1319#discussion_r455896332", "createdAt": "2020-07-16T15:59:21Z", "author": {"login": "MioRtia"}, "path": "iidm/iidm-impl/src/test/java/com/powsybl/iidm/network/impl/VariantManagerImplTest.java", "diffHunk": "@@ -58,6 +60,11 @@ public String getNameOrId() {\n             return id;\n         }\n \n+        @Override\n+        public Set<String> getAliases() {\n+            return aliases;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83c1f2d58e407b30b4ff9aeed152179bcc4570cf"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7a8e478d79c1ce3449e0e1763ec552fdc6b3c4a", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/a7a8e478d79c1ce3449e0e1763ec552fdc6b3c4a", "committedDate": "2020-07-17T07:53:31Z", "message": "Fix Shunt aliases handling\n\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91a5682b2e597bb6fa6f50e431c250f21e4c569a", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/91a5682b2e597bb6fa6f50e431c250f21e4c569a", "committedDate": "2020-07-17T07:53:50Z", "message": "Merge remote-tracking branch 'origin/aliasesAddition' into aliasesAddition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8b1f4658615db03be66b9cd34d6a955511da9d7", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/e8b1f4658615db03be66b9cd34d6a955511da9d7", "committedDate": "2020-07-17T07:54:58Z", "message": "Merge branch 'master' into aliasesAddition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a287a2e073ad173354a1d0a163371b275bdf1ef", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/8a287a2e073ad173354a1d0a163371b275bdf1ef", "committedDate": "2020-07-17T07:58:47Z", "message": "Merge branch 'master' into aliasesAddition"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNDU3NTk2", "url": "https://github.com/powsybl/powsybl-core/pull/1319#pullrequestreview-450457596", "createdAt": "2020-07-17T08:09:48Z", "commit": {"oid": "8a287a2e073ad173354a1d0a163371b275bdf1ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58300149f6565566ccd50ec55d339171b823fd67", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/58300149f6565566ccd50ec55d339171b823fd67", "committedDate": "2020-07-17T08:10:54Z", "message": "Fixes some code smells\n\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e4c179d46158408e0eeaee677619df8983f674e", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/1e4c179d46158408e0eeaee677619df8983f674e", "committedDate": "2020-07-17T08:11:03Z", "message": "Merge remote-tracking branch 'origin/aliasesAddition' into aliasesAddition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d731048f19ff0a71a15aa0b06f81484492c21a8", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/0d731048f19ff0a71a15aa0b06f81484492c21a8", "committedDate": "2020-07-17T09:07:48Z", "message": "Partial revert of code smell fixes\n\nSigned-off-by: Sebastien Murgey <sebastien.murgey@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c13c63514d804f63afa5514a059a3359ab35e68", "author": {"user": {"login": "murgeyseb", "name": "S\u00e9bastien Murgey"}}, "url": "https://github.com/powsybl/powsybl-core/commit/2c13c63514d804f63afa5514a059a3359ab35e68", "committedDate": "2020-07-17T09:11:24Z", "message": "Merge branch 'master' into aliasesAddition"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4275, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}