{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2ODg5Mjc2", "number": 1542, "title": "CgmesOnDataSource.exists(): check that we have an EQ profile", "bodyText": "Signed-off-by: Jon Harper jon.harper87@gmail.com\nPlease check if the PR fulfills these requirements (please use '[x]' to check the checkboxes, or submit the PR and then click the checkboxes)\n\n The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nDoes this PR already have an issue describing the problem ? If so, link to this issue using '#XXX' and skip the rest\nNO\nWhat kind of change does this PR introduce? (Bug fix, feature, docs update, ...)\nBug FIx\nWhat is the current behavior? (You can also link to an open issue here)\nFindImporter returns the CgmesImport for a zip containing partial cgmes data (no EQ profile)\nWhat is the new behavior (if this is a feature change)?\nFindImporter returns null for a zip containing partial cgmes data (no EQ profile)\nDoes this PR introduce a breaking change or deprecate an API? If yes, check the following:\nNO\nOther information:\n(if any of the questions/checkboxes don't apply, please delete them entirely)", "createdAt": "2020-11-06T17:39:44Z", "url": "https://github.com/powsybl/powsybl-core/pull/1542", "merged": true, "mergeCommit": {"oid": "8efff28023439791d1ce797b81d5a15545b60158"}, "closed": true, "closedAt": "2020-11-16T10:30:16Z", "author": {"login": "jonenst"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZ6mewABqjM5NjgyNjU4MDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddCN00gH2gAyNTE2ODg5Mjc2OmNkY2UzMzhhYTA3ZjVhOTZlOWE2MGExYmI3YjNmZWEyMTVlNjFhNWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "276305ebde143562c85ef5893c9681cf1314f0de", "author": {"user": {"login": "jonenst", "name": "Jon Harper"}}, "url": "https://github.com/powsybl/powsybl-core/commit/276305ebde143562c85ef5893c9681cf1314f0de", "committedDate": "2020-11-06T17:37:16Z", "message": "CgmesOnDataSource.exists(): check that we have an EQ profile\n\nSigned-off-by: Jon Harper <jon.harper87@gmail.com>"}, "afterCommit": {"oid": "ddc28d518138603484910c4d81d01b246afb1e77", "author": {"user": {"login": "jonenst", "name": "Jon Harper"}}, "url": "https://github.com/powsybl/powsybl-core/commit/ddc28d518138603484910c4d81d01b246afb1e77", "committedDate": "2020-11-06T17:41:37Z", "message": "CgmesOnDataSource.exists(): check that we have an EQ profile\n\nSigned-off-by: Jon Harper <jon.harper87@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75fb9a47d80d9b19ccae5c6ce4d54c241f303882", "author": {"user": {"login": "jonenst", "name": "Jon Harper"}}, "url": "https://github.com/powsybl/powsybl-core/commit/75fb9a47d80d9b19ccae5c6ce4d54c241f303882", "committedDate": "2020-11-06T18:13:06Z", "message": "CgmesOnDataSource.exists(): check that we have an EQ profile\n\nSigned-off-by: Jon Harper <jon.harper87@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ddc28d518138603484910c4d81d01b246afb1e77", "author": {"user": {"login": "jonenst", "name": "Jon Harper"}}, "url": "https://github.com/powsybl/powsybl-core/commit/ddc28d518138603484910c4d81d01b246afb1e77", "committedDate": "2020-11-06T17:41:37Z", "message": "CgmesOnDataSource.exists(): check that we have an EQ profile\n\nSigned-off-by: Jon Harper <jon.harper87@gmail.com>"}, "afterCommit": {"oid": "75fb9a47d80d9b19ccae5c6ce4d54c241f303882", "author": {"user": {"login": "jonenst", "name": "Jon Harper"}}, "url": "https://github.com/powsybl/powsybl-core/commit/75fb9a47d80d9b19ccae5c6ce4d54c241f303882", "committedDate": "2020-11-06T18:13:06Z", "message": "CgmesOnDataSource.exists(): check that we have an EQ profile\n\nSigned-off-by: Jon Harper <jon.harper87@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0708ef9f746c31a748133e765ab778ec81f45a0", "author": {"user": {"login": "jonenst", "name": "Jon Harper"}}, "url": "https://github.com/powsybl/powsybl-core/commit/c0708ef9f746c31a748133e765ab778ec81f45a0", "committedDate": "2020-11-09T11:27:10Z", "message": "CgmesOnDataSource, Add tests for previous logic of exists()\n\nSigned-off-by: Jon Harper <jon.harper87@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "19f9bf8805dc02135799cb85e9ee7e2cd8ac6e74", "author": {"user": {"login": "jonenst", "name": "Jon Harper"}}, "url": "https://github.com/powsybl/powsybl-core/commit/19f9bf8805dc02135799cb85e9ee7e2cd8ac6e74", "committedDate": "2020-11-09T07:27:10Z", "message": "CgmesOnDataSource, Add tests for previous logic of exists()\n\nSigned-off-by: Jon Harper <jon.harper87@gmail.com>"}, "afterCommit": {"oid": "c0708ef9f746c31a748133e765ab778ec81f45a0", "author": {"user": {"login": "jonenst", "name": "Jon Harper"}}, "url": "https://github.com/powsybl/powsybl-core/commit/c0708ef9f746c31a748133e765ab778ec81f45a0", "committedDate": "2020-11-09T11:27:10Z", "message": "CgmesOnDataSource, Add tests for previous logic of exists()\n\nSigned-off-by: Jon Harper <jon.harper87@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "800e2d56aaac3e47e906405c43f694696aea928d", "author": {"user": {"login": "zamarrenolm", "name": "Luma"}}, "url": "https://github.com/powsybl/powsybl-core/commit/800e2d56aaac3e47e906405c43f694696aea928d", "committedDate": "2020-11-10T12:10:42Z", "message": "Merge branch 'master' into fixcgmespartialimport"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43831fb0f14416d3e7c12a6093eb49559570d4d7", "author": {"user": {"login": "zamarrenolm", "name": "Luma"}}, "url": "https://github.com/powsybl/powsybl-core/commit/43831fb0f14416d3e7c12a6093eb49559570d4d7", "committedDate": "2020-11-10T15:02:27Z", "message": "fix names of files in test\n\nSigned-off-by: Luma <zamarrenolm@aia.es>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "850c44b8af993bdc3432ab8b5fac29213b2932cd", "author": {"user": {"login": "zamarrenolm", "name": "Luma"}}, "url": "https://github.com/powsybl/powsybl-core/commit/850c44b8af993bdc3432ab8b5fac29213b2932cd", "committedDate": "2020-11-10T15:39:54Z", "message": "increase coverage; uniform filename convention for test resources\n\nSigned-off-by: Luma <zamarrenolm@aia.es>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85f37d3246487729564557da6368c002ac42a449", "author": {"user": {"login": "zamarrenolm", "name": "Luma"}}, "url": "https://github.com/powsybl/powsybl-core/commit/85f37d3246487729564557da6368c002ac42a449", "committedDate": "2020-11-10T15:44:02Z", "message": "fix style\n\nSigned-off-by: Luma <zamarrenolm@aia.es>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MzU4OTY1", "url": "https://github.com/powsybl/powsybl-core/pull/1542#pullrequestreview-527358965", "createdAt": "2020-11-10T16:04:54Z", "commit": {"oid": "85f37d3246487729564557da6368c002ac42a449"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMTM0MjE1", "url": "https://github.com/powsybl/powsybl-core/pull/1542#pullrequestreview-531134215", "createdAt": "2020-11-16T09:13:52Z", "commit": {"oid": "85f37d3246487729564557da6368c002ac42a449"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwOToxMzo1MlrOHzutcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwOToxMzo1MlrOHzutcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDAwNDcyMw==", "bodyText": "These methods can be static", "url": "https://github.com/powsybl/powsybl-core/pull/1542#discussion_r524004723", "createdAt": "2020-11-16T09:13:52Z", "author": {"login": "MioRtia"}, "path": "cgmes/cgmes-model/src/test/java/com/powsybl/cgmes/model/CgmesOnDataSourceTest.java", "diffHunk": "@@ -0,0 +1,79 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.cgmes.model;\n+\n+import org.junit.Test;\n+\n+import com.powsybl.commons.datasource.ReadOnlyDataSource;\n+import com.powsybl.commons.datasource.ResourceDataSource;\n+import com.powsybl.commons.datasource.ResourceSet;\n+\n+import static org.junit.Assert.*;\n+\n+/**\n+ * @author Jon Harper <jon.harper at rte-france.com>\n+ */\n+public class CgmesOnDataSourceTest {\n+\n+    private void doTestExists(String filename, String cimVersion, boolean expectedExists) {\n+        ReadOnlyDataSource dataSource = new ResourceDataSource(\"incomplete\",\n+                new ResourceSet(\"/\", filename));\n+        CgmesOnDataSource cgmesOnDataSource = new CgmesOnDataSource(dataSource);\n+        boolean exists = \"14\".equals(cimVersion) ? cgmesOnDataSource.existsCim14() : cgmesOnDataSource.exists();\n+        assertEquals(expectedExists, exists);\n+    }\n+\n+    private void doTestExistsEmpty(String profile, String cimVersion, boolean expectedExists) {\n+        String filename = \"empty_cim\" + cimVersion + \"_\" + profile + \".xml\";\n+        doTestExists(filename, cimVersion, expectedExists);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85f37d3246487729564557da6368c002ac42a449"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ae2c315d38826ab703f8f477f83ee27991c5a36", "author": {"user": {"login": "mathbagu", "name": "Mathieu BAGUE"}}, "url": "https://github.com/powsybl/powsybl-core/commit/5ae2c315d38826ab703f8f477f83ee27991c5a36", "committedDate": "2020-11-16T09:58:11Z", "message": "Review fixes\n\nSigned-off-by: Mathieu BAGUE <mathieu.bague@rte-france.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "542be112952825cc2955e780849e0f7d3e5d2b90", "author": {"user": {"login": "MioRtia", "name": null}}, "url": "https://github.com/powsybl/powsybl-core/commit/542be112952825cc2955e780849e0f7d3e5d2b90", "committedDate": "2020-11-16T10:00:33Z", "message": "Merge branch 'master' into fixcgmespartialimport"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdce338aa07f5a96e9a60a1bb7b3fea215e61a5c", "author": {"user": {"login": "mathbagu", "name": "Mathieu BAGUE"}}, "url": "https://github.com/powsybl/powsybl-core/commit/cdce338aa07f5a96e9a60a1bb7b3fea215e61a5c", "committedDate": "2020-11-16T10:15:57Z", "message": "Merge branch 'master' into fixcgmespartialimport"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4074, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}