{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyODk1NTIz", "number": 961, "title": "Paranoids review endpoint", "bodyText": "I confirm that this contribution is made under the terms of the license found in the root directory of this repository's source tree and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-05-04T11:31:47Z", "url": "https://github.com/AthenZ/athenz/pull/961", "merged": true, "mergeCommit": {"oid": "d9fcbb2c46bf86ffabe9a3eb709cfde1d0107f67"}, "closed": true, "closedAt": "2020-05-05T15:55:35Z", "author": {"login": "OferLevi85"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcd-HehAFqTQwNDkxNjc5OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABceWMkZgFqTQwNTkyNjUwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0OTE2Nzk4", "url": "https://github.com/AthenZ/athenz/pull/961#pullrequestreview-404916798", "createdAt": "2020-05-04T11:52:10Z", "commit": {"oid": "60e238a883b3d21182412d472c81fb62b5df93a0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxMTo1MjoxMFrOGP89gA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxMTo1MjoxMFrOGP89gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTM4MDYwOA==", "bodyText": "Not sure if this is the correct way to authorize the users. If it isn't let me know and I'll do the necessary changes.", "url": "https://github.com/AthenZ/athenz/pull/961#discussion_r419380608", "createdAt": "2020-05-04T11:52:10Z", "author": {"login": "OferLevi85"}, "path": "core/zms/src/main/rdl/Role.rdli", "diffHunk": "@@ -103,6 +103,19 @@ resource Membership GET \"/domain/{domainName}/role/{roleName}/member/{memberName\n     }\n }\n \n+//Get members with overdue review\n+resource DomainRoleMembers GET \"/domain/{domainName}/overdue\" (name=GetOverdueReview) {\n+    DomainName domainName; //name of the domain\n+    authorize (\"access\", \"sys.auth:overdue-review\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60e238a883b3d21182412d472c81fb62b5df93a0"}, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60e238a883b3d21182412d472c81fb62b5df93a0", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/60e238a883b3d21182412d472c81fb62b5df93a0", "committedDate": "2020-05-04T11:28:37Z", "message": "Add Overdue Review Endpoint for paranoids\nAdded ZMS endpoint: GET \"/domain/{domainName}/overdue\"\nOnly users with \"access\" action to \"sys.auth:overdue-review\" will be able to query the endpoint"}, "afterCommit": {"oid": "5521bfc49bfee94e258305ba5b9b851aab6dd5f0", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/5521bfc49bfee94e258305ba5b9b851aab6dd5f0", "committedDate": "2020-05-04T17:01:57Z", "message": "Add Overdue Review Endpoint for paranoids\nAdded ZMS endpoint: GET \"/domain/{domainName}/overdue\"\nOnly users with \"access\" action to \"sys.auth:overdue-review\" will be able to query the endpoint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NDcyNDk1", "url": "https://github.com/AthenZ/athenz/pull/961#pullrequestreview-405472495", "createdAt": "2020-05-05T03:21:57Z", "commit": {"oid": "5521bfc49bfee94e258305ba5b9b851aab6dd5f0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMzoyMTo1N1rOGQZODw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMzoyMTo1N1rOGQZODw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTg0MzU5OQ==", "bodyText": "we don't need authorize here as any domain admin should be able to get the list of members that need to be reviewed. so let's just make it authenticate.", "url": "https://github.com/AthenZ/athenz/pull/961#discussion_r419843599", "createdAt": "2020-05-05T03:21:57Z", "author": {"login": "havetisyan"}, "path": "core/zms/src/main/rdl/Role.rdli", "diffHunk": "@@ -103,6 +103,19 @@ resource Membership GET \"/domain/{domainName}/role/{roleName}/member/{memberName\n     }\n }\n \n+//Get members with overdue review\n+resource DomainRoleMembers GET \"/domain/{domainName}/overdue\" (name=GetOverdueReview) {\n+    DomainName domainName; //name of the domain\n+    authorize (\"access\", \"sys.auth:overdue-review\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTM4MDYwOA=="}, "originalCommit": {"oid": "60e238a883b3d21182412d472c81fb62b5df93a0"}, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5521bfc49bfee94e258305ba5b9b851aab6dd5f0", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/5521bfc49bfee94e258305ba5b9b851aab6dd5f0", "committedDate": "2020-05-04T17:01:57Z", "message": "Add Overdue Review Endpoint for paranoids\nAdded ZMS endpoint: GET \"/domain/{domainName}/overdue\"\nOnly users with \"access\" action to \"sys.auth:overdue-review\" will be able to query the endpoint"}, "afterCommit": {"oid": "de4704e62315cb19c35ce20e06fb735142e06f2b", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/de4704e62315cb19c35ce20e06fb735142e06f2b", "committedDate": "2020-05-05T08:22:53Z", "message": "Add Overdue Review Endpoint for paranoids\nAdded ZMS endpoint: GET \"/domain/{domainName}/overdue\"\nFixed review reminder tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e451be926e7028f9e32bf454f80206f9b10c023", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/4e451be926e7028f9e32bf454f80206f9b10c023", "committedDate": "2020-05-05T10:50:49Z", "message": "Add Overdue Review Endpoint for paranoids\n- Added ZMS endpoint: GET \"/domain/{domainName}/overdue\"\n- Fixed review reminder tests\n- Fixed Review Reminder Notification (remove expiration from missed locations)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "de4704e62315cb19c35ce20e06fb735142e06f2b", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/de4704e62315cb19c35ce20e06fb735142e06f2b", "committedDate": "2020-05-05T08:22:53Z", "message": "Add Overdue Review Endpoint for paranoids\nAdded ZMS endpoint: GET \"/domain/{domainName}/overdue\"\nFixed review reminder tests"}, "afterCommit": {"oid": "4e451be926e7028f9e32bf454f80206f9b10c023", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/4e451be926e7028f9e32bf454f80206f9b10c023", "committedDate": "2020-05-05T10:50:49Z", "message": "Add Overdue Review Endpoint for paranoids\n- Added ZMS endpoint: GET \"/domain/{domainName}/overdue\"\n- Fixed review reminder tests\n- Fixed Review Reminder Notification (remove expiration from missed locations)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1OTI2NTAz", "url": "https://github.com/AthenZ/athenz/pull/961#pullrequestreview-405926503", "createdAt": "2020-05-05T15:55:27Z", "commit": {"oid": "4e451be926e7028f9e32bf454f80206f9b10c023"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3107, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}