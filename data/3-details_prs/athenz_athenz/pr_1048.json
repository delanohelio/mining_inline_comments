{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUyNTIxNjgy", "number": 1048, "title": "Moved ChangeLogStore factories and implementors to Server Common", "bodyText": "I confirm that this contribution is made under the terms of the license found in the root directory of this repository's source tree and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-07-19T11:54:00Z", "url": "https://github.com/AthenZ/athenz/pull/1048", "merged": true, "mergeCommit": {"oid": "332919cdac7c15b6eeac69fb48f0515771ab76d4"}, "closed": true, "closedAt": "2020-07-20T19:36:34Z", "author": {"login": "OferLevi85"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2bvhQAFqTQ1MTEyNTExMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc20v2JgFqTQ1MTc5NjYyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTI1MTEy", "url": "https://github.com/AthenZ/athenz/pull/1048#pullrequestreview-451125112", "createdAt": "2020-07-19T11:57:20Z", "commit": {"oid": "3a2e9cf4bb66d928de9e84a59e801358554f4d67"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMTo1NzoyMFrOGzu8mQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMTo1NzoyMFrOGzu8mQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5OTczNw==", "bodyText": "If region isn't specified, I'm taking it from the instance metadata as in AWSObjectStoreFactory", "url": "https://github.com/AthenZ/athenz/pull/1048#discussion_r456899737", "createdAt": "2020-07-19T11:57:20Z", "author": {"login": "OferLevi85"}, "path": "libs/java/server_common/src/main/java/com/yahoo/athenz/common/server/store/impl/S3ChangeLogStore.java", "diffHunk": "@@ -72,6 +80,13 @@ public S3ChangeLogStore(CloudStore cloudStore) {\n         jsonMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n     }\n \n+    void initAwsRegion() {\n+        awsRegion = System.getProperty(ZTS_PROP_AWS_REGION_NAME);\n+        if (StringUtil.isEmpty(awsRegion)) {\n+            awsRegion = EC2MetadataUtils.getEC2InstanceRegion();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a2e9cf4bb66d928de9e84a59e801358554f4d67"}, "originalPosition": 114}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "443b74aeb3faf9a0c6ad402259ba58b1bba5929d", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/443b74aeb3faf9a0c6ad402259ba58b1bba5929d", "committedDate": "2020-07-19T12:25:07Z", "message": "Moved ChangeLogStore factories and implementors to Server Common"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a2e9cf4bb66d928de9e84a59e801358554f4d67", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/3a2e9cf4bb66d928de9e84a59e801358554f4d67", "committedDate": "2020-07-19T11:51:16Z", "message": "Refactor - CloudStore moved back to ZTS. ChangeLog will build S3Client on its own"}, "afterCommit": {"oid": "40229e71da3bbf248dbfd4a691b456bffb777b8a", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/40229e71da3bbf248dbfd4a691b456bffb777b8a", "committedDate": "2020-07-19T12:25:07Z", "message": "Refactor - CloudStore moved back to ZTS. ChangeLog will build S3Client on its own"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbaa06439f3fdc4f1ac78b255c28bbddafa0bea3", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/fbaa06439f3fdc4f1ac78b255c28bbddafa0bea3", "committedDate": "2020-07-20T09:21:41Z", "message": "Refactor - CloudStore moved back to ZTS. ChangeLog will build S3Client on its own"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "40229e71da3bbf248dbfd4a691b456bffb777b8a", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/40229e71da3bbf248dbfd4a691b456bffb777b8a", "committedDate": "2020-07-19T12:25:07Z", "message": "Refactor - CloudStore moved back to ZTS. ChangeLog will build S3Client on its own"}, "afterCommit": {"oid": "fbaa06439f3fdc4f1ac78b255c28bbddafa0bea3", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/fbaa06439f3fdc4f1ac78b255c28bbddafa0bea3", "committedDate": "2020-07-20T09:21:41Z", "message": "Refactor - CloudStore moved back to ZTS. ChangeLog will build S3Client on its own"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNzk2NjIy", "url": "https://github.com/AthenZ/athenz/pull/1048#pullrequestreview-451796622", "createdAt": "2020-07-20T17:05:19Z", "commit": {"oid": "fbaa06439f3fdc4f1ac78b255c28bbddafa0bea3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3015, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}