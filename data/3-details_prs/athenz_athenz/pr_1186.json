{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxMjA3NDU5", "number": 1186, "title": "zms-cli role tags", "bodyText": "I confirm that this contribution is made under the terms of the license found in the root directory of this repository's source tree and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-11-15T14:55:34Z", "url": "https://github.com/AthenZ/athenz/pull/1186", "merged": true, "mergeCommit": {"oid": "53a32d105cb22b818cf8f4df20bed2817cf59f24"}, "closed": true, "closedAt": "2020-11-15T17:48:45Z", "author": {"login": "dvirguttman"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdcxqrqgBqjM5OTc0ODU3MTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdc0F7NgFqTUzMDgxOTk5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3013a1c6e2549e8b8a3b17fcaf11fd1f41edaa1d", "author": {"user": null}, "url": "https://github.com/AthenZ/athenz/commit/3013a1c6e2549e8b8a3b17fcaf11fd1f41edaa1d", "committedDate": "2020-11-15T14:54:44Z", "message": "zms-cli role tags"}, "afterCommit": {"oid": "e1a15f43123747392d9fc6a8fdc24afea4846d07", "author": {"user": null}, "url": "https://github.com/AthenZ/athenz/commit/e1a15f43123747392d9fc6a8fdc24afea4846d07", "committedDate": "2020-11-15T14:58:53Z", "message": "zms-cli role tags"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwODA2NzIx", "url": "https://github.com/AthenZ/athenz/pull/1186#pullrequestreview-530806721", "createdAt": "2020-11-15T15:01:54Z", "commit": {"oid": "e1a15f43123747392d9fc6a8fdc24afea4846d07"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQxNTowMTo1NFrOHzgacA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQxNTowMTo1NFrOHzgacA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3MDQ4MA==", "bodyText": "I noticed that I had a mistake in the previous schema..\nsecondary index should be key+value not index per column (btree)\nAlso, role_id fk shouldn't be index but constraint only..", "url": "https://github.com/AthenZ/athenz/pull/1186#discussion_r523770480", "createdAt": "2020-11-15T15:01:54Z", "author": {"login": "dvirguttman"}, "path": "servers/zms/schema/updates/update-20201109.sql", "diffHunk": "@@ -3,9 +3,7 @@ CREATE TABLE IF NOT EXISTS `zms_server`.`role_tags` (\n   `key` VARCHAR(64) NOT NULL,\n   `value` VARCHAR(64) NOT NULL,\n   PRIMARY KEY (`role_id`, `key`, `value`),\n-  INDEX `fk_role_tag_role_idx` (`role_id` ASC),\n-  INDEX `tag_key_sec_idx` (`key` ASC),\n-  INDEX `tag_value_sec_idx` (`value` ASC),\n+  INDEX `tag_key_val_sec_idx` (`key` ASC, `value` ASC),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1a15f43123747392d9fc6a8fdc24afea4846d07"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fb1c1cec305a8a26e12224cc67e487f0be062a5", "author": {"user": null}, "url": "https://github.com/AthenZ/athenz/commit/0fb1c1cec305a8a26e12224cc67e487f0be062a5", "committedDate": "2020-11-15T15:46:54Z", "message": "zms-cli role tags"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e1a15f43123747392d9fc6a8fdc24afea4846d07", "author": {"user": null}, "url": "https://github.com/AthenZ/athenz/commit/e1a15f43123747392d9fc6a8fdc24afea4846d07", "committedDate": "2020-11-15T14:58:53Z", "message": "zms-cli role tags"}, "afterCommit": {"oid": "0fb1c1cec305a8a26e12224cc67e487f0be062a5", "author": {"user": null}, "url": "https://github.com/AthenZ/athenz/commit/0fb1c1cec305a8a26e12224cc67e487f0be062a5", "committedDate": "2020-11-15T15:46:54Z", "message": "zms-cli role tags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb8e6884be73572dd9cfba68a599a4a9137d288a", "author": {"user": null}, "url": "https://github.com/AthenZ/athenz/commit/eb8e6884be73572dd9cfba68a599a4a9137d288a", "committedDate": "2020-11-15T17:16:38Z", "message": "add and delete role tags"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwODE5OTk4", "url": "https://github.com/AthenZ/athenz/pull/1186#pullrequestreview-530819998", "createdAt": "2020-11-15T17:48:39Z", "commit": {"oid": "eb8e6884be73572dd9cfba68a599a4a9137d288a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2870, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}