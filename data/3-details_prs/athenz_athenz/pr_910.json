{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5OTU2OTI1", "number": 910, "title": "Implement Unrefreshed Certificates Notification", "bodyText": "I confirm that this contribution is made under the terms of the license found in the root directory of this repository's source tree and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-03-17T16:53:56Z", "url": "https://github.com/AthenZ/athenz/pull/910", "merged": true, "mergeCommit": {"oid": "e9d22525a461eeaaa7b781b7adfa87d36fef0718"}, "closed": true, "closedAt": "2020-03-18T23:18:58Z", "author": {"login": "OferLevi85"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOmGzrgBqjMxMzgzMjQ0MzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcO_xS0gFqTM3NzMwMjIzOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2de41745d8339d40fd96b77ab5089205404e9c28", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/2de41745d8339d40fd96b77ab5089205404e9c28", "committedDate": "2020-03-17T16:52:47Z", "message": "Implement Unrefreshed Certificates Notification"}, "afterCommit": {"oid": "117a13d8b3cfcf7d8adf4af7b7d63a5a735a76b7", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/117a13d8b3cfcf7d8adf4af7b7d63a5a735a76b7", "committedDate": "2020-03-17T17:24:24Z", "message": "Implement Unrefreshed Certificates Notification"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "117a13d8b3cfcf7d8adf4af7b7d63a5a735a76b7", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/117a13d8b3cfcf7d8adf4af7b7d63a5a735a76b7", "committedDate": "2020-03-17T17:24:24Z", "message": "Implement Unrefreshed Certificates Notification"}, "afterCommit": {"oid": "ba9bce6219f9fa940e9bed69b13449c42d4ee221", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/ba9bce6219f9fa940e9bed69b13449c42d4ee221", "committedDate": "2020-03-17T17:30:33Z", "message": "Implement Unrefreshed Certificates Notification"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ba9bce6219f9fa940e9bed69b13449c42d4ee221", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/ba9bce6219f9fa940e9bed69b13449c42d4ee221", "committedDate": "2020-03-17T17:30:33Z", "message": "Implement Unrefreshed Certificates Notification"}, "afterCommit": {"oid": "0428cfcb6bfe9dd4cb4dbea0ada305854191d916", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/0428cfcb6bfe9dd4cb4dbea0ada305854191d916", "committedDate": "2020-03-17T22:29:55Z", "message": "Implement Unrefreshed Certificates Notification"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daac3ca0d4ab1436ced508fd7ff4720460af8d59", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/daac3ca0d4ab1436ced508fd7ff4720460af8d59", "committedDate": "2020-03-18T09:38:36Z", "message": "Implement Unrefreshed Certificates Notification"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0428cfcb6bfe9dd4cb4dbea0ada305854191d916", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/0428cfcb6bfe9dd4cb4dbea0ada305854191d916", "committedDate": "2020-03-17T22:29:55Z", "message": "Implement Unrefreshed Certificates Notification"}, "afterCommit": {"oid": "daac3ca0d4ab1436ced508fd7ff4720460af8d59", "author": {"user": {"login": "OferLevi85", "name": "Ofer Levi"}}, "url": "https://github.com/AthenZ/athenz/commit/daac3ca0d4ab1436ced508fd7ff4720460af8d59", "committedDate": "2020-03-18T09:38:36Z", "message": "Implement Unrefreshed Certificates Notification"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2Nzg5NDU1", "url": "https://github.com/AthenZ/athenz/pull/910#pullrequestreview-376789455", "createdAt": "2020-03-18T11:48:59Z", "commit": {"oid": "daac3ca0d4ab1436ced508fd7ff4720460af8d59"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMTo0ODo1OVrOF4Bcrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMTo0ODo1OVrOF4Bcrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI4ODMwMg==", "bodyText": "As you can see, I have added the new notification in a similar manner to the other notifications. I have noticed that the EmailNotificationService requires similar refactoring to the NotificationManager (separating the notification specific logic from this class) but it will increase this pull request complexity substantially.\nI have decided it is best to leave it as-is for now. I can refactor this class after this pull request is merged or on a later date that might be more suitable (maybe when we start working on adding Yamas notifications).", "url": "https://github.com/AthenZ/athenz/pull/910#discussion_r394288302", "createdAt": "2020-03-18T11:48:59Z", "author": {"login": "OferLevi85"}, "path": "libs/java/server_common/src/main/java/com/yahoo/athenz/common/server/notification/impl/EmailNotificationService.java", "diffHunk": "@@ -161,6 +167,9 @@ String getBody(String type, Map<String, String> details) {\n             case NOTIFICATION_TYPE_PRINCIPAL_EXPIRY_REMINDER:\n                 body = getPrincipalExpiryBody(details);\n                 break;\n+            case NOTIFICATION_TYPE_UNREFRESHED_CERTS:\n+                body = getUnrefreshedCertsBody(details);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "daac3ca0d4ab1436ced508fd7ff4720460af8d59"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MzAyMjM4", "url": "https://github.com/AthenZ/athenz/pull/910#pullrequestreview-377302238", "createdAt": "2020-03-18T23:18:53Z", "commit": {"oid": "daac3ca0d4ab1436ced508fd7ff4720460af8d59"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3072, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}