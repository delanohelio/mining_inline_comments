{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzNjgxNTc4", "number": 1076, "title": "use embedded mysql server for unit tests", "bodyText": "I confirm that this contribution is made under the terms of the license found in the root directory of this repository's source tree and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-08-05T22:40:21Z", "url": "https://github.com/AthenZ/athenz/pull/1076", "merged": true, "mergeCommit": {"oid": "a3aa9515ae8a57935989d08fecf738aa83c961d9"}, "closed": true, "closedAt": "2020-08-06T16:54:10Z", "author": {"login": "havetisyan"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8DH5qgH2gAyNDYzNjgxNTc4OjlkOTUyMGUwYjc5ZTUzZGI4NzViM2Q4MDk5OGU4YWQ2Njc2ZGIwNmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8RwfEgFqTQ2MjY0MzMwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9d9520e0b79e53db875b3d80998e8ad6676db06a", "author": {"user": null}, "url": "https://github.com/AthenZ/athenz/commit/9d9520e0b79e53db875b3d80998e8ad6676db06a", "committedDate": "2020-08-05T22:39:53Z", "message": "use embedded mysql server for unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc9e190215ba71021da01acda50d6ad344745570", "author": {"user": null}, "url": "https://github.com/AthenZ/athenz/commit/fc9e190215ba71021da01acda50d6ad344745570", "committedDate": "2020-08-05T23:13:53Z", "message": "adding schema copy for now in the resources folder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7060ed0fb16ee3c6dfb8935981667d63a0b32bad", "author": {"user": null}, "url": "https://github.com/AthenZ/athenz/commit/7060ed0fb16ee3c6dfb8935981667d63a0b32bad", "committedDate": "2020-08-06T00:12:16Z", "message": "notify on the day of expiry as well"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNjExNjUz", "url": "https://github.com/AthenZ/athenz/pull/1076#pullrequestreview-462611653", "createdAt": "2020-08-06T15:08:04Z", "commit": {"oid": "7060ed0fb16ee3c6dfb8935981667d63a0b32bad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNTowODowNFrOG83z0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNTowODowNFrOG83z0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQ4MjEzMA==", "bodyText": "I assumed that this was removed because it is already covered in testProcessExpiredPendingMembers.\nBut in testProcessExpiredPendingMembers there's no assertions. The test just runs processExpiredPendingMembers and doesn't verify that the members were expired", "url": "https://github.com/AthenZ/athenz/pull/1076#discussion_r466482130", "createdAt": "2020-08-06T15:08:04Z", "author": {"login": "OferLevi85"}, "path": "servers/zms/src/test/java/com/yahoo/athenz/zms/DBServiceTest.java", "diffHunk": "@@ -5170,15 +5190,6 @@ public void testGetExpiredPendingDomainRoleMembers() {\n         Role role = zms.dbService.getRole(domainName, roleName, false, false, true);\n         assertEquals(role.getRoleMembers().size(), 4);\n \n-        // now let's expire our entries\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7060ed0fb16ee3c6dfb8935981667d63a0b32bad"}, "originalPosition": 1241}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNjIzNTU1", "url": "https://github.com/AthenZ/athenz/pull/1076#pullrequestreview-462623555", "createdAt": "2020-08-06T15:21:07Z", "commit": {"oid": "7060ed0fb16ee3c6dfb8935981667d63a0b32bad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNToyMTowOFrOG84Wow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNToyMTowOFrOG84Wow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQ5MTA0Mw==", "bodyText": "Is this file different from the original zms_server.sql? If it isn't that means we will need to remember updating this file whenever we update the original.\nCan we reference the original file instead of copying it to the test directory?", "url": "https://github.com/AthenZ/athenz/pull/1076#discussion_r466491043", "createdAt": "2020-08-06T15:21:08Z", "author": {"login": "OferLevi85"}, "path": "servers/zms/src/test/resources/schema/zms_server.sql", "diffHunk": "@@ -0,0 +1,357 @@\n+-- MySQL Script generated by MySQL Workbench\n+-- Tue Jun 30 12:33:10 2020\n+-- Model: New Model    Version: 1.0\n+-- MySQL Workbench Forward Engineering", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7060ed0fb16ee3c6dfb8935981667d63a0b32bad"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNjQzMzAy", "url": "https://github.com/AthenZ/athenz/pull/1076#pullrequestreview-462643302", "createdAt": "2020-08-06T15:42:53Z", "commit": {"oid": "7060ed0fb16ee3c6dfb8935981667d63a0b32bad"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3041, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}