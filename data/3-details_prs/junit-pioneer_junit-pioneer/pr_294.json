{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2OTg3MzQz", "number": 294, "title": "Added variables to ReportEntry", "bodyText": "Refer to test method arguments with numbers between curly braces, starting with {0}.\nSigned-off-by: Mihaly Verhas misi.verhas@gmail.com\n\nI hereby agree to the terms of the JUnit Pioneer Contributor License Agreement.", "createdAt": "2020-07-09T17:09:02Z", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294", "merged": true, "mergeCommit": {"oid": "be539f8b499350c6a5322ede426f1b4af24e364d"}, "closed": true, "closedAt": "2020-09-26T09:28:54Z", "author": {"login": "Michael1993"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczSL99gH2gAyNDQ2OTg3MzQzOjcwODFhNGMwNDVlM2RlNzkwMDdmMGYwOWZjNTVhZDExOGFiOTBjZDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMm08igH2gAyNDQ2OTg3MzQzOjZhZmNiNmNjODVlODQ4NWNiZDk1OGVjOTc3ZWZkZWMxODIxYTdiMjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7081a4c045e3de79007f0f09fc55ad118ab90cd9", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/7081a4c045e3de79007f0f09fc55ad118ab90cd9", "committedDate": "2020-07-09T17:07:35Z", "message": "Added variables to ReportEntry\nRefer to test method arguments with numbers between curly braces, starting with {0}.\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "714be7ce2964c863252e239b500383723a100243", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/714be7ce2964c863252e239b500383723a100243", "committedDate": "2020-07-14T20:44:03Z", "message": "Added new tests, documentation and exception for variable in key\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6658f321bd6f5e15c80567274ac3d67225b3dd3e", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/6658f321bd6f5e15c80567274ac3d67225b3dd3e", "committedDate": "2020-07-14T20:47:13Z", "message": "Merge branch 'master' of https://github.com/junit-pioneer/junit-pioneer into issue/179-report-entry-improvement\n\n\u0001 Conflicts:\n\u0001\tsrc/test/java/org/junitpioneer/jupiter/ReportEntryExtensionTests.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NzMxODcw", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294#pullrequestreview-448731870", "createdAt": "2020-07-15T08:20:32Z", "commit": {"oid": "714be7ce2964c863252e239b500383723a100243"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwODoyMDozMlrOGxzeWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwODoyMDozMlrOGxzeWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg3Njc2MQ==", "bodyText": "Including the numbers?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294#discussion_r454876761", "createdAt": "2020-07-15T08:20:32Z", "author": {"login": "Bukama"}, "path": "docs/report-entries.adoc", "diffHunk": "@@ -110,4 +110,31 @@ The extension will publish your report entry if the test fails.\n ON_ABORTED::\n The extension will publish your report entry if the test was aborted (for example because of an https://junit.org/junit5/docs/current/user-guide/#writing-tests-assumptions[Assumption]).\n \n-Entries will always be published after the test finished.\n\\ No newline at end of file\n+Entries will always be published after the test finished.\n+\n+=== Publishing test parameters\n+\n+You can access `@ParameterizedTest` parameter values and publish them with the `@ReportEntry` annotation.\n+Add a number (starting from zero) between curly braces to reference the parameter with that index.\n+For example, if you have a `@ParameterizedTest` like the following:\n+\n+[source, java]\n+----\n+@ParameterizedTest\n+@MethodSource(\"params\")\n+@ReportEntry(\"{1} - {0}\")\n+void test(String line, int number) {\n+    // YOUR TEST CODE HERE\n+}\n+\n+Stream<Arguments> params() {\n+    return Stream.of(\n+            Arguments.of(\"Hello\", 1),\n+            Arguments.of(\"World\", 2);\n+    );\n+}\n+\n+----\n+Then the extension will publish `{1} - Hello` and `{2} - World`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "714be7ce2964c863252e239b500383723a100243"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72e74af37c4bcf3924916bd3b124d2b2dc8d9471", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/72e74af37c4bcf3924916bd3b124d2b2dc8d9471", "committedDate": "2020-07-15T08:37:58Z", "message": "Changed tests - now they need Pioneer assertion updates.\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bec4ceade4a3a16055070a1114d7af7c3a7f6b2e", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/bec4ceade4a3a16055070a1114d7af7c3a7f6b2e", "committedDate": "2020-07-15T08:43:08Z", "message": "Fixed a mistake in documentation\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dccf86090cda246d3876550dd57d5f5be483403e", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/dccf86090cda246d3876550dd57d5f5be483403e", "committedDate": "2020-07-15T08:51:19Z", "message": "Remove unused import\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65c6f9fcc5e3d4d5561fe122e33d961c98911010", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/65c6f9fcc5e3d4d5561fe122e33d961c98911010", "committedDate": "2020-07-17T13:36:27Z", "message": "WIP commit\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTIyNTQy", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294#pullrequestreview-451122542", "createdAt": "2020-07-19T11:23:17Z", "commit": {"oid": "dccf86090cda246d3876550dd57d5f5be483403e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMToyMzoxN1rOGzuu1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMTozNDoyN1rOGzuy9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5NjIxNQ==", "bodyText": "I would add an hint like \"Inside the report entry the parameter values can be reported in any order\".\nQuestion from my side: Can they be reported multiple times, e.g. {1} - {1} - {0} - {0}, ?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294#discussion_r456896215", "createdAt": "2020-07-19T11:23:17Z", "author": {"login": "Bukama"}, "path": "docs/report-entries.adoc", "diffHunk": "@@ -110,4 +110,31 @@ The extension will publish your report entry if the test fails.\n ON_ABORTED::\n The extension will publish your report entry if the test was aborted (for example because of an https://junit.org/junit5/docs/current/user-guide/#writing-tests-assumptions[Assumption]).\n \n-Entries will always be published after the test finished.\n\\ No newline at end of file\n+Entries will always be published after the test finished.\n+\n+=== Publishing test parameters\n+\n+You can access `@ParameterizedTest` parameter values and publish them with the `@ReportEntry` annotation.\n+Add a number (starting from zero) between curly braces to reference the parameter with that index.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dccf86090cda246d3876550dd57d5f5be483403e"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5NjY5OA==", "bodyText": "This seems that this message only works if the method has one parameter less than the ReportEntry? What if there are multiple missing?  This misconfiguration should also be mentioned in the docs, as the error messages is only clear (to me) when knowing the  context.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294#discussion_r456896698", "createdAt": "2020-07-19T11:28:19Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/ReportEntryExtension.java", "diffHunk": "@@ -16,26 +16,62 @@\n import static org.junitpioneer.jupiter.ReportEntry.PublishCondition.ON_FAILURE;\n import static org.junitpioneer.jupiter.ReportEntry.PublishCondition.ON_SUCCESS;\n \n+import java.lang.reflect.Method;\n import java.util.Arrays;\n+import java.util.List;\n import java.util.Optional;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n import java.util.stream.Stream;\n \n import org.junit.jupiter.api.extension.BeforeEachCallback;\n import org.junit.jupiter.api.extension.ExtensionConfigurationException;\n import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.jupiter.api.extension.InvocationInterceptor;\n+import org.junit.jupiter.api.extension.ReflectiveInvocationContext;\n import org.junit.jupiter.api.extension.TestWatcher;\n \n-class ReportEntryExtension implements TestWatcher, BeforeEachCallback {\n+class ReportEntryExtension implements TestWatcher, BeforeEachCallback, InvocationInterceptor {\n+\n+\tprivate static final ExtensionContext.Namespace NAMESPACE = ExtensionContext.Namespace\n+\t\t\t.create(ReportEntryExtension.class);\n+\n+\tprivate static final String KEY = \"ReportEntry\";\n \n \t@Override\n \tpublic void beforeEach(ExtensionContext context) {\n-\t\tfindAnnotations(context).forEach(ReportEntryExtension::verifyKeyValueAreNotBlank);\n+\t\tfindAnnotations(context).forEach(entry -> verifyReportEntry(context, entry));\n \t}\n \n \tprivate Stream<ReportEntry> findAnnotations(ExtensionContext context) {\n \t\treturn PioneerAnnotationUtils.findAllEnclosingRepeatableAnnotations(context, ReportEntry.class);\n \t}\n \n+\tprivate static void verifyReportEntry(ExtensionContext context, ReportEntry entry) {\n+\t\tverifyParameterCount(context, entry);\n+\t\tverifyKeyValueAreNotBlank(entry);\n+\t\tverifyKeyNotParameterized(entry);\n+\t}\n+\n+\tprivate static void verifyKeyNotParameterized(ReportEntry entry) {\n+\t\tif (entry.key().matches(\".*\\\\{([0-9])+}.*\")) {\n+\t\t\tString message = \"Report entry can not have variables in the key: { key=\\\"%s\\\" value=\\\"%s\\\" }\";\n+\t\t\tthrow new ExtensionConfigurationException(format(message, entry.key(), entry.value()));\n+\t\t}\n+\t}\n+\n+\tprivate static void verifyParameterCount(ExtensionContext context, ReportEntry entry) {\n+\t\tMatcher matcher = Pattern.compile(\"\\\\{([0-9])+}\").matcher(entry.value());\n+\t\tint variableCount = 0;\n+\t\twhile (matcher.find())\n+\t\t\tvariableCount++;\n+\n+\t\tif (context.getRequiredTestMethod().getParameterCount() < variableCount) {\n+\t\t\tString message = \"Report entry contains unresolved variable(s): { key=\\\"%s\\\" value=\\\"%s\\\" }\";\n+\t\t\tthrow new ExtensionConfigurationException(format(message, entry.key(), entry.value()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dccf86090cda246d3876550dd57d5f5be483403e"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5Njk3NQ==", "bodyText": "Shouldn't there be a start of line and end of line symbol in the regEx?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294#discussion_r456896975", "createdAt": "2020-07-19T11:31:12Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/ReportEntryExtension.java", "diffHunk": "@@ -60,16 +96,35 @@ public void testAborted(ExtensionContext context, Throwable cause) {\n \n \t@Override\n \tpublic void testFailed(ExtensionContext context, Throwable cause) {\n-\t\tpublishOnConditions(context, ALWAYS, ON_FAILURE);\n+\t\tif (!(cause instanceof ExtensionConfigurationException)) {\n+\t\t\tpublishOnConditions(context, ALWAYS, ON_FAILURE);\n+\t\t}\n \t}\n \n \tprivate void publishOnConditions(ExtensionContext context, ReportEntry.PublishCondition... conditions) {\n \t\tfindAnnotations(context)\n \t\t\t\t.filter(entry -> Arrays.asList(conditions).contains(entry.when()))\n-\t\t\t\t// we filter for empty keys/values because this is called if the test failed -\n-\t\t\t\t// even if it's due to bad extension configuration (but we don't publish for those)\n-\t\t\t\t.filter(entry -> !entry.key().isEmpty() && !entry.value().isEmpty())\n-\t\t\t\t.forEach(entry -> context.publishReportEntry(entry.key(), entry.value()));\n+\t\t\t\t.forEach(entry -> context.publishReportEntry(entry.key(), parseVariables(entry.value(), context)));\n+\t}\n+\n+\tprivate String parseVariables(String value, ExtensionContext context) {\n+\t\tif (!value.matches(\".*\\\\{.*}.*\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dccf86090cda246d3876550dd57d5f5be483403e"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5NzI2OA==", "bodyText": "I don't understand the regex. The \\\\ means you check for \\ (first backslash is to escape second baskslash), but why even check for a baskslash? Then inside the curly braces you check for any character which may or may not be there (there can be no character between the curly braces). But I think (look below in line 117) you search for numeric (interger) values. So why you don't check for them inside the regex?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294#discussion_r456897268", "createdAt": "2020-07-19T11:34:27Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/ReportEntryExtension.java", "diffHunk": "@@ -60,16 +96,35 @@ public void testAborted(ExtensionContext context, Throwable cause) {\n \n \t@Override\n \tpublic void testFailed(ExtensionContext context, Throwable cause) {\n-\t\tpublishOnConditions(context, ALWAYS, ON_FAILURE);\n+\t\tif (!(cause instanceof ExtensionConfigurationException)) {\n+\t\t\tpublishOnConditions(context, ALWAYS, ON_FAILURE);\n+\t\t}\n \t}\n \n \tprivate void publishOnConditions(ExtensionContext context, ReportEntry.PublishCondition... conditions) {\n \t\tfindAnnotations(context)\n \t\t\t\t.filter(entry -> Arrays.asList(conditions).contains(entry.when()))\n-\t\t\t\t// we filter for empty keys/values because this is called if the test failed -\n-\t\t\t\t// even if it's due to bad extension configuration (but we don't publish for those)\n-\t\t\t\t.filter(entry -> !entry.key().isEmpty() && !entry.value().isEmpty())\n-\t\t\t\t.forEach(entry -> context.publishReportEntry(entry.key(), entry.value()));\n+\t\t\t\t.forEach(entry -> context.publishReportEntry(entry.key(), parseVariables(entry.value(), context)));\n+\t}\n+\n+\tprivate String parseVariables(String value, ExtensionContext context) {\n+\t\tif (!value.matches(\".*\\\\{.*}.*\"))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5Njk3NQ=="}, "originalCommit": {"oid": "dccf86090cda246d3876550dd57d5f5be483403e"}, "originalPosition": 86}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19939552d9f7854e6150889685425907f7358890", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/19939552d9f7854e6150889685425907f7358890", "committedDate": "2020-07-19T21:58:23Z", "message": "Incorporate code review feedback\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bf381e45ea72a9a371c50f9ff29c8627e1da5cb", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/8bf381e45ea72a9a371c50f9ff29c8627e1da5cb", "committedDate": "2020-07-19T22:06:33Z", "message": "Remove unnecessary parentheses from regex\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNTM2MDAz", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294#pullrequestreview-451536003", "createdAt": "2020-07-20T11:52:43Z", "commit": {"oid": "8bf381e45ea72a9a371c50f9ff29c8627e1da5cb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "690ddcc1cf53d65acad1e60cc4f08582fad9a537", "author": {"user": {"login": "nipafx", "name": "Nicolai Parlog"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/690ddcc1cf53d65acad1e60cc4f08582fad9a537", "committedDate": "2020-07-28T20:31:33Z", "message": "Small edits"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTc2Mjk3", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294#pullrequestreview-456976297", "createdAt": "2020-07-28T20:12:37Z", "commit": {"oid": "8bf381e45ea72a9a371c50f9ff29c8627e1da5cb"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDoxMjozN1rOG4dAkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDoxMzo0MlrOG4dECQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0ODcyMw==", "bodyText": "Can you mention and link to the format you're using here? (Is it String::format or MessageFormat?)", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294#discussion_r461848723", "createdAt": "2020-07-28T20:12:37Z", "author": {"login": "nipafx"}, "path": "docs/report-entries.adoc", "diffHunk": "@@ -110,4 +110,32 @@ The extension will publish your report entry if the test fails.\n ON_ABORTED::\n The extension will publish your report entry if the test was aborted (for example because of an https://junit.org/junit5/docs/current/user-guide/#writing-tests-assumptions[Assumption]).\n \n-Entries will always be published after the test finished.\n\\ No newline at end of file\n+Entries will always be published after the test finished.\n+\n+=== Publishing test parameters\n+\n+You can access `@ParameterizedTest` parameter values and publish them with the `@ReportEntry` annotation.\n+Add a number (starting from zero) between curly braces to reference the parameter with that index.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bf381e45ea72a9a371c50f9ff29c8627e1da5cb"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0OTIwMQ==", "bodyText": "For small parameter sets, @CsvSource is more succinct and easier to read. Can you switch to it?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294#discussion_r461849201", "createdAt": "2020-07-28T20:13:12Z", "author": {"login": "nipafx"}, "path": "docs/report-entries.adoc", "diffHunk": "@@ -110,4 +110,32 @@ The extension will publish your report entry if the test fails.\n ON_ABORTED::\n The extension will publish your report entry if the test was aborted (for example because of an https://junit.org/junit5/docs/current/user-guide/#writing-tests-assumptions[Assumption]).\n \n-Entries will always be published after the test finished.\n\\ No newline at end of file\n+Entries will always be published after the test finished.\n+\n+=== Publishing test parameters\n+\n+You can access `@ParameterizedTest` parameter values and publish them with the `@ReportEntry` annotation.\n+Add a number (starting from zero) between curly braces to reference the parameter with that index.\n+Inside the report entry, the parameters can be referenced in any order and multiple times.\n+For example, if you have a `@ParameterizedTest` like the following:\n+\n+[source, java]\n+----\n+@ParameterizedTest\n+@MethodSource(\"params\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bf381e45ea72a9a371c50f9ff29c8627e1da5cb"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0OTYwOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Then the extension will publish `21 - Hello - 21` and `42 - World - 42`.\n          \n          \n            \n            Then the extension will publish `\"21 - Hello - 21\"` and `\"42 - World - 42\"`.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294#discussion_r461849609", "createdAt": "2020-07-28T20:13:42Z", "author": {"login": "nipafx"}, "path": "docs/report-entries.adoc", "diffHunk": "@@ -110,4 +110,32 @@ The extension will publish your report entry if the test fails.\n ON_ABORTED::\n The extension will publish your report entry if the test was aborted (for example because of an https://junit.org/junit5/docs/current/user-guide/#writing-tests-assumptions[Assumption]).\n \n-Entries will always be published after the test finished.\n\\ No newline at end of file\n+Entries will always be published after the test finished.\n+\n+=== Publishing test parameters\n+\n+You can access `@ParameterizedTest` parameter values and publish them with the `@ReportEntry` annotation.\n+Add a number (starting from zero) between curly braces to reference the parameter with that index.\n+Inside the report entry, the parameters can be referenced in any order and multiple times.\n+For example, if you have a `@ParameterizedTest` like the following:\n+\n+[source, java]\n+----\n+@ParameterizedTest\n+@MethodSource(\"params\")\n+@ReportEntry(\"{1} - {0} - {1}\")\n+void test(String line, int number) {\n+    // YOUR TEST CODE HERE\n+}\n+\n+Stream<Arguments> params() {\n+    return Stream.of(\n+            Arguments.of(\"Hello\", 21),\n+            Arguments.of(\"World\", 42);\n+    );\n+}\n+\n+----\n+Then the extension will publish `21 - Hello - 21` and `42 - World - 42`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bf381e45ea72a9a371c50f9ff29c8627e1da5cb"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTkwNzQ0", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294#pullrequestreview-456990744", "createdAt": "2020-07-28T20:34:56Z", "commit": {"oid": "690ddcc1cf53d65acad1e60cc4f08582fad9a537"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDozNDo1N1rOG4dztA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDozNDo1N1rOG4dztA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg2MTgxMg==", "bodyText": "Maybe extract matches(\".*\\\\{[0-9]+}.*\") into a method?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/294#discussion_r461861812", "createdAt": "2020-07-28T20:34:57Z", "author": {"login": "nipafx"}, "path": "src/main/java/org/junitpioneer/jupiter/ReportEntryExtension.java", "diffHunk": "@@ -16,33 +16,78 @@\n import static org.junitpioneer.jupiter.ReportEntry.PublishCondition.ON_FAILURE;\n import static org.junitpioneer.jupiter.ReportEntry.PublishCondition.ON_SUCCESS;\n \n+import java.lang.reflect.Method;\n import java.util.Arrays;\n+import java.util.List;\n import java.util.Optional;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n import java.util.stream.Stream;\n \n import org.junit.jupiter.api.extension.BeforeEachCallback;\n import org.junit.jupiter.api.extension.ExtensionConfigurationException;\n import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.jupiter.api.extension.InvocationInterceptor;\n+import org.junit.jupiter.api.extension.ReflectiveInvocationContext;\n import org.junit.jupiter.api.extension.TestWatcher;\n \n-class ReportEntryExtension implements TestWatcher, BeforeEachCallback {\n+class ReportEntryExtension implements TestWatcher, BeforeEachCallback, InvocationInterceptor {\n+\n+\tprivate static final ExtensionContext.Namespace NAMESPACE = ExtensionContext.Namespace\n+\t\t\t.create(ReportEntryExtension.class);\n+\n+\tprivate static final String KEY = \"ReportEntry\";\n \n \t@Override\n \tpublic void beforeEach(ExtensionContext context) {\n-\t\tfindAnnotations(context).forEach(ReportEntryExtension::verifyKeyValueAreNotBlank);\n+\t\tfindAnnotations(context).forEach(entry -> verifyReportEntry(context, entry));\n \t}\n \n \tprivate Stream<ReportEntry> findAnnotations(ExtensionContext context) {\n \t\treturn PioneerAnnotationUtils.findAllEnclosingRepeatableAnnotations(context, ReportEntry.class);\n \t}\n \n+\tprivate static void verifyReportEntry(ExtensionContext context, ReportEntry entry) {\n+\t\tverifyParameterCount(context, entry);\n+\t\tverifyKeyValueAreNotBlank(entry);\n+\t\tverifyKeyNotParameterized(entry);\n+\t}\n+\n+\tprivate static void verifyParameterCount(ExtensionContext context, ReportEntry entry) {\n+\t\tboolean valueReferencesNumberedParameter = entry.value().matches(\".*\\\\{[0-9]+}.*\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ddcc1cf53d65acad1e60cc4f08582fad9a537"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe17c3cc4be4c5b739dfb600b510d4b373d7c24c", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/fe17c3cc4be4c5b739dfb600b510d4b373d7c24c", "committedDate": "2020-07-29T12:42:41Z", "message": "Small changes following feedback\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4af654b97a678767f310282682063c6bf1aecf5", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/e4af654b97a678767f310282682063c6bf1aecf5", "committedDate": "2020-08-05T12:40:55Z", "message": "Merge branch 'master' into issue/179-report-entry-improvement\n\n# Conflicts:\n#\tREADME.md\n#\tdocs/report-entries.adoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "736ff8f2103d9644d94d47997a73b2c2b0be4fc3", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/736ff8f2103d9644d94d47997a73b2c2b0be4fc3", "committedDate": "2020-08-05T21:49:50Z", "message": "Fix tests\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6afcb6cc85e8485cbd958ec977efdec1821a7b20", "author": {"user": {"login": "nipafx", "name": "Nicolai Parlog"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/6afcb6cc85e8485cbd958ec977efdec1821a7b20", "committedDate": "2020-09-26T09:18:33Z", "message": "Mention `MessageFormat`"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3803, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}