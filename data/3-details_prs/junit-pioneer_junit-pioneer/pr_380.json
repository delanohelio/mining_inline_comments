{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyNjM0MzE1", "number": 380, "title": "IssueProcessor integration tests.", "bodyText": "Closes #375\nPR checklist\nThe following checklist shall help the PR's author, the reviewers and maintainers to ensure the quality of this project.\nIt is based on our contributors guidelines, especially the \"writing code\" section.\nIt shall help to check for completion of the listed points.\nIf a point does not apply to the given PR's changes, the corresponding entry can be simply marked as done.\nDocumentation (general)\n\n There is documentation (Javadoc and site documentation; added or updated)\n There is implementation information to describe why a non-obvious source code / solution got implemented\n Site documentation has its own .adoc file in the docs folder, e.g. docs/report-entries.adoc\n Only one sentence per line (especially in .adoc files)\n Javadoc uses formal style, while sites documentation may use informal style\n\nDocumentation (new extension)\n\n The docs/docs-nav.yml navigation has an entry for the new extension\n The package-info.java contains information about the new extension\n\nCode\n\n Code adheres to code style, naming conventions etc.\n Successful tests cover all changes\n There are checks which validate correct / false usage / configuration of a functionality and there are tests to verify those checks\n Tests use AssertJ or our own PioneerAssert (which are based on AssertJ)\n\nContributing\n\n A prepared commit message exists\n The list of contributions inside README.md mentions the new contribution (real name optional)\n\n\nI hereby agree to the terms of the JUnit Pioneer Contributor License Agreement.", "createdAt": "2020-12-04T16:16:17Z", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/380", "merged": true, "mergeCommit": {"oid": "b337e2da75a955f7ce639a284fdf61ff529e326b"}, "closed": true, "closedAt": "2020-12-22T19:07:36Z", "author": {"login": "Michael1993"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdi6IhqAH2gAyNTMyNjM0MzE1OjhlZDg5NGQzNzI2OWE3N2IxMjZkOWYzNzhlMWZjZjhjYTRjYTgwMWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdovZKtAH2gAyNTMyNjM0MzE1OmIzODkwYTI0ZmQ3Y2RiNTlkYjE5NjYyZGNkY2I5MjgwZTlmMTIwYzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8ed894d37269a77b126d9f378e1fcf8ca4ca801c", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/8ed894d37269a77b126d9f378e1fcf8ca4ca801c", "committedDate": "2020-12-04T16:14:28Z", "message": "Baseline for IssueProcessor integration tests.\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0592087c7d298e171d8fe8c2078e23579c99886", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/e0592087c7d298e171d8fe8c2078e23579c99886", "committedDate": "2020-12-04T16:20:49Z", "message": "Update tests\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7bf429388efc350fcf0f73ff18ae005dd5c7fdd", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/b7bf429388efc350fcf0f73ff18ae005dd5c7fdd", "committedDate": "2020-12-04T16:25:13Z", "message": "Fix code smells\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1MTQ3MDM3", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/380#pullrequestreview-545147037", "createdAt": "2020-12-04T17:16:01Z", "commit": {"oid": "b7bf429388efc350fcf0f73ff18ae005dd5c7fdd"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNzoxNjowMlrOH_aLew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNzoyOTo0M1rOH_asxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI1MTI1OQ==", "bodyText": "Hmm. We define the report key in all extensions etc. with a string and not by the name of a class. Don't know if I like this change", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/380#discussion_r536251259", "createdAt": "2020-12-04T17:16:02Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionExecutionListener.java", "diffHunk": "@@ -37,7 +36,7 @@\n  */\n public class IssueExtensionExecutionListener implements TestExecutionListener {\n \n-\tpublic static final String REPORT_ENTRY_KEY = \"Issue\";\n+\tpublic static final String REPORT_ENTRY_KEY = IssueExtensionExecutionListener.class.toString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7bf429388efc350fcf0f73ff18ae005dd5c7fdd"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI1MjA0NA==", "bodyText": "No correct Javadoc ;)", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/380#discussion_r536252044", "createdAt": "2020-12-04T17:17:23Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueProcessorFactory.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ServiceLoader;\n+\n+import org.junitpioneer.jupiter.IssueProcessor;\n+\n+// Ensures we get the same instance of StoringIssueProcessor in the integration tests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7bf429388efc350fcf0f73ff18ae005dd5c7fdd"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI1NjA1NA==", "bodyText": "Do you want to use the new key here?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/380#discussion_r536256054", "createdAt": "2020-12-04T17:24:05Z", "author": {"login": "Bukama"}, "path": "src/test/java/org/junitpioneer/jupiter/issue/IssueExtensionIntegrationTests.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.assertj.core.api.Assertions.fail;\n+\n+import java.util.List;\n+\n+import org.junit.jupiter.api.Disabled;\n+import org.junit.jupiter.api.DisplayName;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.TestReporter;\n+import org.junit.platform.engine.discovery.DiscoverySelectors;\n+import org.junit.platform.launcher.core.LauncherDiscoveryRequestBuilder;\n+import org.junit.platform.launcher.core.LauncherFactory;\n+import org.junitpioneer.jupiter.Issue;\n+import org.junitpioneer.jupiter.IssueTestSuite;\n+import org.opentest4j.TestAbortedException;\n+\n+/**\n+ * Mary Elizabeth Fyre: Do Not Stand at My Grave and Weep is in the public domain.\n+ */\n+public class IssueExtensionIntegrationTests {\n+\n+\tprivate final StoringIssueProcessor issueProcessor = (StoringIssueProcessor) IssueProcessorFactory\n+\t\t\t.getIssueProcessors()\n+\t\t\t.iterator()\n+\t\t\t.next();\n+\n+\t@Test\n+\tvoid testIssueCases() {\n+\t\tLauncherFactory\n+\t\t\t\t.create()\n+\t\t\t\t.execute(LauncherDiscoveryRequestBuilder\n+\t\t\t\t\t\t.request()\n+\t\t\t\t\t\t.selectors(DiscoverySelectors.selectClass(IssueIntegrationCases.class))\n+\t\t\t\t\t\t.build());\n+\n+\t\tList<IssueTestSuite> issueTestSuites = issueProcessor.issueTestSuites();\n+\n+\t\tassertThat(issueTestSuites).isNotEmpty();\n+\t}\n+\n+\tstatic class IssueIntegrationCases {\n+\n+\t\t@Test\n+\t\t@Issue(\"Do not stand at my grave and weep. I am not there. I do not sleep.\")\n+\t\tvoid successfulTest() {\n+\t\t}\n+\n+\t\t@Test\n+\t\t@Issue(\"I am a thousand winds that blow. I am the diamond glints on snow.\")\n+\t\tvoid failingTest() {\n+\t\t\tfail(\"supposed to fail\");\n+\t\t}\n+\n+\t\t@Test\n+\t\t@Issue(\"I am the sunlight on ripened grain. I am the gentle autumn rain.\")\n+\t\tvoid abortedTest() {\n+\t\t\tthrow new TestAbortedException();\n+\t\t}\n+\n+\t\t@Test\n+\t\t@Disabled(\"skipped\")\n+\t\t@Issue(\"When you awaken in the morning's hush, I am the swift uplifting rush\")\n+\t\tvoid skippedTest() {\n+\t\t}\n+\n+\t\t@Test\n+\t\t@Issue(\"Of quiet birds in circled flight. I am the soft stars that shine at night.\")\n+\t\tvoid publishingTest(TestReporter reporter) {\n+\t\t\treporter.publishEntry(\"Issue\", \"reporting test\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7bf429388efc350fcf0f73ff18ae005dd5c7fdd"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI1ODgwNg==", "bodyText": "What does this?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/380#discussion_r536258806", "createdAt": "2020-12-04T17:28:18Z", "author": {"login": "Bukama"}, "path": "src/test/java/org/junitpioneer/jupiter/issue/IssueExtensionIntegrationTests.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.assertj.core.api.Assertions.fail;\n+\n+import java.util.List;\n+\n+import org.junit.jupiter.api.Disabled;\n+import org.junit.jupiter.api.DisplayName;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.TestReporter;\n+import org.junit.platform.engine.discovery.DiscoverySelectors;\n+import org.junit.platform.launcher.core.LauncherDiscoveryRequestBuilder;\n+import org.junit.platform.launcher.core.LauncherFactory;\n+import org.junitpioneer.jupiter.Issue;\n+import org.junitpioneer.jupiter.IssueTestSuite;\n+import org.opentest4j.TestAbortedException;\n+\n+/**\n+ * Mary Elizabeth Fyre: Do Not Stand at My Grave and Weep is in the public domain.\n+ */\n+public class IssueExtensionIntegrationTests {\n+\n+\tprivate final StoringIssueProcessor issueProcessor = (StoringIssueProcessor) IssueProcessorFactory\n+\t\t\t.getIssueProcessors()\n+\t\t\t.iterator()\n+\t\t\t.next();\n+\n+\t@Test\n+\tvoid testIssueCases() {\n+\t\tLauncherFactory\n+\t\t\t\t.create()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7bf429388efc350fcf0f73ff18ae005dd5c7fdd"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI1OTc4Mg==", "bodyText": "So you try to convert every IssueProcessoir which is found into a StoringIssueProcessor?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/380#discussion_r536259782", "createdAt": "2020-12-04T17:29:43Z", "author": {"login": "Bukama"}, "path": "src/test/java/org/junitpioneer/jupiter/issue/IssueExtensionIntegrationTests.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.assertj.core.api.Assertions.fail;\n+\n+import java.util.List;\n+\n+import org.junit.jupiter.api.Disabled;\n+import org.junit.jupiter.api.DisplayName;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.TestReporter;\n+import org.junit.platform.engine.discovery.DiscoverySelectors;\n+import org.junit.platform.launcher.core.LauncherDiscoveryRequestBuilder;\n+import org.junit.platform.launcher.core.LauncherFactory;\n+import org.junitpioneer.jupiter.Issue;\n+import org.junitpioneer.jupiter.IssueTestSuite;\n+import org.opentest4j.TestAbortedException;\n+\n+/**\n+ * Mary Elizabeth Fyre: Do Not Stand at My Grave and Weep is in the public domain.\n+ */\n+public class IssueExtensionIntegrationTests {\n+\n+\tprivate final StoringIssueProcessor issueProcessor = (StoringIssueProcessor) IssueProcessorFactory", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7bf429388efc350fcf0f73ff18ae005dd5c7fdd"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "043becd62bc5d5d9c5d996262826b2fdd3c54eb4", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/043becd62bc5d5d9c5d996262826b2fdd3c54eb4", "committedDate": "2020-12-05T09:42:27Z", "message": "Address review comments\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NjE0MDU4", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/380#pullrequestreview-545614058", "createdAt": "2020-12-05T17:40:37Z", "commit": {"oid": "043becd62bc5d5d9c5d996262826b2fdd3c54eb4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e653dca3d74779139a21d8d05757553ea98cc692", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/e653dca3d74779139a21d8d05757553ea98cc692", "committedDate": "2020-12-14T19:57:09Z", "message": "Update tests with actual assertions\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ad413dd6b83089c756e877001c529de20933f36", "author": {"user": {"login": "Michael1993", "name": "Mih\u00e1ly Verh\u00e1s"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/8ad413dd6b83089c756e877001c529de20933f36", "committedDate": "2020-12-15T11:16:49Z", "message": "Rename factory to registry to better convey function\n\nSigned-off-by: Mihaly Verhas <misi.verhas@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNzMzNTAx", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/380#pullrequestreview-552733501", "createdAt": "2020-12-15T18:10:25Z", "commit": {"oid": "8ad413dd6b83089c756e877001c529de20933f36"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3Mjg3NDEy", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/380#pullrequestreview-557287412", "createdAt": "2020-12-22T18:38:06Z", "commit": {"oid": "8ad413dd6b83089c756e877001c529de20933f36"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxODozODowNlrOIKFJ0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxODo1MDo0MVrOIKFfmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ0MTEwNg==", "bodyText": "This key is used by IssueExtension to publish report entries. Why would it use the key of the \"target\" of the message. If \"Issue\" is too general, let's stick to \"Issue extension\" (or \"IssueExtension\"`).", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/380#discussion_r547441106", "createdAt": "2020-12-22T18:38:06Z", "author": {"login": "nipafx"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionExecutionListener.java", "diffHunk": "@@ -37,7 +36,7 @@\n  */\n public class IssueExtensionExecutionListener implements TestExecutionListener {\n \n-\tpublic static final String REPORT_ENTRY_KEY = \"Issue\";\n+\tpublic static final String REPORT_ENTRY_KEY = \"IssueExtensionExecutionListener\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ad413dd6b83089c756e877001c529de20933f36"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ0NjY4Mw==", "bodyText": "I don't like how these purely test-related problem bleeds into the production code.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/380#discussion_r547446683", "createdAt": "2020-12-22T18:50:41Z", "author": {"login": "nipafx"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionExecutionListener.java", "diffHunk": "@@ -88,7 +87,7 @@ public void testPlanExecutionFinished(TestPlan testPlan) {\n \t\t\treturn;\n \n \t\tList<IssueTestSuite> issueTestSuites = createIssueTestSuites();\n-\t\tfor (IssueProcessor issueProcessor : ServiceLoader.load(IssueProcessor.class)) {\n+\t\tfor (IssueProcessor issueProcessor : IssueProcessorRegistry.getIssueProcessors()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ad413dd6b83089c756e877001c529de20933f36"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4eb1b71b357656643a38d8dc0a642558ba5d7fea", "author": {"user": {"login": "nipafx", "name": "Nicolai Parlog"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/4eb1b71b357656643a38d8dc0a642558ba5d7fea", "committedDate": "2020-12-22T18:57:27Z", "message": "Remove `IssueProcessorRegistry`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa83c45ece824d8d645a704563f68c6fe146f926", "author": {"user": {"login": "nipafx", "name": "Nicolai Parlog"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/aa83c45ece824d8d645a704563f68c6fe146f926", "committedDate": "2020-12-22T18:57:56Z", "message": "Change report entry key"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3890a24fd7cdb59db19662dcdcb9280e9f120c2", "author": {"user": {"login": "nipafx", "name": "Nicolai Parlog"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/b3890a24fd7cdb59db19662dcdcb9280e9f120c2", "committedDate": "2020-12-22T19:07:14Z", "message": "Fix typo"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3689, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}