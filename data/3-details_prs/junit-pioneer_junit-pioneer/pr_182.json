{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2ODAyMDY3", "number": 182, "title": "Stopwatch extension (#38 / #182)", "bodyText": "Implementing a stopwatch extension as discussed in #38 and #99.\nSuggested commit message\nImplement the stopwatch extension (#38 / #182)\n\nThis simple stopwatch extension measures the elapsed time of \neach test (which is executed with the extension) and publishes\nthe the result as a ReportEntry.\n\ncloses: #38\nPR: #182\n\ncloses #38\nI hereby agree to the terms of the JUnit Pioneer Contributor License Agreement.", "createdAt": "2020-03-11T16:42:40Z", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182", "merged": true, "mergeCommit": {"oid": "925b2bc1c9dd5ed79abe1bed8335ee61cd3dfab7"}, "closed": true, "closedAt": "2020-12-07T18:33:58Z", "author": {"login": "Bukama"}, "timelineItems": {"totalCount": 52, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMrPdxgFqTM3MzAxMDgzNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdjySMxgFqTU0NTk3NTI1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMDEwODM1", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#pullrequestreview-373010835", "createdAt": "2020-03-11T18:15:58Z", "commit": {"oid": "9d0b0db3f874f5ab0b700eff255b119d7a262d0e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxODoxNTo1OFrOF1DLiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxODoxNTo1OFrOF1DLiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE3MDk1Mw==", "bodyText": "I'm sorry to bother you with this but wouldn't this get overwritten if I run two test files with the @Stopwatch annotation?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#discussion_r391170953", "createdAt": "2020-03-11T18:15:58Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/StopwatchExtension.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import org.junit.jupiter.api.extension.AfterAllCallback;\n+import org.junit.jupiter.api.extension.AfterTestExecutionCallback;\n+import org.junit.jupiter.api.extension.BeforeAllCallback;\n+import org.junit.jupiter.api.extension.BeforeTestExecutionCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.jupiter.api.extension.ExtensionContext.Namespace;\n+import org.junitpioneer.jupiter.enumerations.TestunitEnum;\n+\n+import java.time.Clock;\n+\n+import static java.lang.System.currentTimeMillis;\n+import static org.junitpioneer.jupiter.Utils.annotationPresentOnTestClass;\n+\n+/**\n+ * The StopwatchExtension implements callback methods for the {@code @Stopwatch} annotation.\n+ */\n+class StopwatchExtension\n+\t\timplements BeforeAllCallback, BeforeTestExecutionCallback, AfterTestExecutionCallback, AfterAllCallback {\n+\tprivate final Clock clock = Clock.systemUTC();\n+\tprivate static final Namespace NAMESPACE = Namespace.create(StopwatchExtension.class);\n+\n+\t@Override\n+\tpublic void beforeAll(ExtensionContext context) {\n+\t\tif (annotationPresentOnTestClass(context, Stopwatch.class)) {\n+\t\t\tstoreNowAsLaunchTime(context, TestunitEnum.CLASS);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void beforeTestExecution(ExtensionContext context) {\n+\t\tif (annotationPresentOnTestClass(context, Stopwatch.class)) {\n+\t\t\tstoreNowAsLaunchTime(context, TestunitEnum.TEST);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void afterTestExecution(ExtensionContext context) {\n+\t\tif (annotationPresentOnTestClass(context, Stopwatch.class)) {\n+\t\t\tcalculateAndReportElapsedTime(context, TestunitEnum.TEST);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void afterAll(ExtensionContext context) {\n+\t\tif (annotationPresentOnTestClass(context, Stopwatch.class)) {\n+\t\t\tcalculateAndReportElapsedTime(context, TestunitEnum.CLASS);\n+\t\t}\n+\t}\n+\n+\t/**\n+\t * Stores the current time for the given testunit in the execution context.\n+\t *\n+\t * @param context Extension context of the class\n+\t * @param unit Testobject for which the time should be stored\n+\t */\n+\tvoid storeNowAsLaunchTime(ExtensionContext context, TestunitEnum unit) {\n+\t\tcontext.getStore(NAMESPACE).put(unit, clock.instant().toEpochMilli());\n+\t}\n+\n+\t/**\n+\t * Loads the stored time for the given testunit from the execution context.\n+\t *\n+\t * @param context Extension context of the class\n+\t * @param unit Testobject for which the time should be stored\n+\t */\n+\tlong loadLaunchTime(ExtensionContext context, TestunitEnum unit) {\n+\t\treturn context.getStore(NAMESPACE).get(unit, long.class);\n+\t}\n+\n+\t/**\n+\t * Calculates the elapsed time for the testunit and publishs it to the execution context.\n+\t *\n+\t * @param context Extension context of the class\n+\t * @param unit Testunit for which the time should be calculated and published\n+\t */\n+\tvoid calculateAndReportElapsedTime(ExtensionContext context, TestunitEnum unit) {\n+\t\tlong launchTime = loadLaunchTime(context, unit);\n+\t\tlong elapsedTime = currentTimeMillis() - launchTime;\n+\n+\t\tString message = String.format(\"%s '%s' took %d ms.\", unit.name(), context.getDisplayName(), elapsedTime);\n+\t\tcontext.publishReportEntry(\"stopwatch\", message);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d0b0db3f874f5ab0b700eff255b119d7a262d0e"}, "originalPosition": 93}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58ae7cbdb9c47058b75d3cfc3f907f9009a23646", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/58ae7cbdb9c47058b75d3cfc3f907f9009a23646", "committedDate": "2020-03-31T17:15:56Z", "message": "Failing to write test for StopwatchExtension"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "049891a957342b155472ae01e9d7f18aee253dbd", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/049891a957342b155472ae01e9d7f18aee253dbd", "committedDate": "2020-03-31T17:15:56Z", "message": "Move isAnnotatedOnClassLevel To Utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8e771677a06579d14f3d3af798fc1f30ec7fee3", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/f8e771677a06579d14f3d3af798fc1f30ec7fee3", "committedDate": "2020-03-31T17:15:56Z", "message": "Fix unneeded throws"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00e8c8a190ce6df16851e73d71fb5dfff0859c5d", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/00e8c8a190ce6df16851e73d71fb5dfff0859c5d", "committedDate": "2020-03-31T17:15:56Z", "message": "Failing to write tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c1b50aa5eda4461821d09885fee47255e91b561", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/8c1b50aa5eda4461821d09885fee47255e91b561", "committedDate": "2020-03-31T17:15:56Z", "message": "spotlessJavaApply"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e63817630a3a92ad910bedae7af3ace98c13275a", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/e63817630a3a92ad910bedae7af3ace98c13275a", "committedDate": "2020-03-31T17:15:56Z", "message": "Extract enumeration and publish extenstion class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df9fb287eec85e5de95615f2f118fdb2f4e20138", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/df9fb287eec85e5de95615f2f118fdb2f4e20138", "committedDate": "2020-03-31T17:15:56Z", "message": "Create StopwatchExtensionTests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3c181552c8194c07916f4781ebde0b1449183bf", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/b3c181552c8194c07916f4781ebde0b1449183bf", "committedDate": "2020-03-31T17:15:56Z", "message": "spotlessApply and package-info.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eeec76911a81eae6e73ea746419ffff22f50b7ed", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/eeec76911a81eae6e73ea746419ffff22f50b7ed", "committedDate": "2020-03-31T17:16:14Z", "message": "Add documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6fd0c27dbac99173a949d48c3228971413d066ad", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/6fd0c27dbac99173a949d48c3228971413d066ad", "committedDate": "2020-03-29T14:04:56Z", "message": "Merge branch 'master' into stopwatch\n\n# Conflicts:\n#\tdocs/docs-nav.yml"}, "afterCommit": {"oid": "eeec76911a81eae6e73ea746419ffff22f50b7ed", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/eeec76911a81eae6e73ea746419ffff22f50b7ed", "committedDate": "2020-03-31T17:16:14Z", "message": "Add documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba3d391a3362d676c517072c1487c2862fa19f15", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/ba3d391a3362d676c517072c1487c2862fa19f15", "committedDate": "2020-03-31T18:50:43Z", "message": "Failing to write test for StopwatchExtension"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "593f7caa4a18201695a6ae7374a9a85fd5969082", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/593f7caa4a18201695a6ae7374a9a85fd5969082", "committedDate": "2020-03-31T18:50:43Z", "message": "Move isAnnotatedOnClassLevel To Utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6fc16553997fb50b968bef9adb2a71ca73284be", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/d6fc16553997fb50b968bef9adb2a71ca73284be", "committedDate": "2020-03-31T18:50:43Z", "message": "Fix unneeded throws"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e1805f8302db5508237a23b68e8e93987e23484", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/0e1805f8302db5508237a23b68e8e93987e23484", "committedDate": "2020-03-31T18:50:43Z", "message": "Failing to write tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb8a17084ac9c03d5c38594573be39dbf178eba0", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/eb8a17084ac9c03d5c38594573be39dbf178eba0", "committedDate": "2020-03-31T18:50:43Z", "message": "spotlessJavaApply"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6e10ddbba1218ae785dc46fc5720ef8f0ed612d", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/d6e10ddbba1218ae785dc46fc5720ef8f0ed612d", "committedDate": "2020-03-31T18:50:43Z", "message": "Extract enumeration and publish extenstion class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f3e6bf7d5d57d92bb16eef8cf33c113eb87fe27", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/8f3e6bf7d5d57d92bb16eef8cf33c113eb87fe27", "committedDate": "2020-03-31T18:50:43Z", "message": "Create StopwatchExtensionTests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6666f6d7c1442726da8d6d829b515da48a272f0", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/c6666f6d7c1442726da8d6d829b515da48a272f0", "committedDate": "2020-03-31T18:50:43Z", "message": "spotlessApply and package-info.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c55121f99663000e9fff2616170f551c462d56f7", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/c55121f99663000e9fff2616170f551c462d56f7", "committedDate": "2020-03-31T18:50:43Z", "message": "Add documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bdfea1e4186671eed0526639539f68ba3458527", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/5bdfea1e4186671eed0526639539f68ba3458527", "committedDate": "2020-04-06T16:36:46Z", "message": "Merge remote-tracking branch 'origin/stopwatch' into stopwatch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be2ab4649cfb83dd22933c8889cb76dec704c581", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/be2ab4649cfb83dd22933c8889cb76dec704c581", "committedDate": "2020-04-09T18:15:00Z", "message": "Merge branch 'master' into stopwatch\n\n# Conflicts:\n#\tsrc/main/java/org/junitpioneer/jupiter/Utils.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5fa0e20698462fcf4039320bc68ba1881d80b84", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/a5fa0e20698462fcf4039320bc68ba1881d80b84", "committedDate": "2020-04-09T18:46:58Z", "message": "Apply PioneerAnnotationUtils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5b00bf293627ec429fd166b280600b41135b6c2", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/c5b00bf293627ec429fd166b280600b41135b6c2", "committedDate": "2020-04-25T06:31:22Z", "message": "Merge branch 'master' into stopwatch\n\n# Conflicts:\n#\tsrc/test/java/org/junitpioneer/AbstractPioneerTestEngineTests.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c56e00ead2ca1ffe9992158efa7024a3eb571afe", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/c56e00ead2ca1ffe9992158efa7024a3eb571afe", "committedDate": "2020-04-26T14:46:54Z", "message": "Apply new TestKitEngine"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4edde75c9b0a5456c78b18d5a65406723e6aac8", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/f4edde75c9b0a5456c78b18d5a65406723e6aac8", "committedDate": "2020-04-26T14:49:38Z", "message": "Update docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7168975e310131d2096bb74d5842040c0b685ee", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/a7168975e310131d2096bb74d5842040c0b685ee", "committedDate": "2020-04-26T14:50:31Z", "message": "Update package-info.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTQ4ODc5", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#pullrequestreview-404548879", "createdAt": "2020-05-02T18:10:30Z", "commit": {"oid": "a7168975e310131d2096bb74d5842040c0b685ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72b64e646060f4dd3861a2803fa351e31d177893", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/72b64e646060f4dd3861a2803fa351e31d177893", "committedDate": "2020-06-21T09:19:39Z", "message": "Merge branch 'master' into stopwatch\n\n# Conflicts:\n#\tdocs/docs-nav.yml\n#\tsrc/main/java/org/junitpioneer/jupiter/package-info.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee10046cf3602476d2008d9ff98ad1734032d232", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/ee10046cf3602476d2008d9ff98ad1734032d232", "committedDate": "2020-06-21T09:24:26Z", "message": "Merge branch 'master' into stopwatch\n\n# Conflicts:\n#\tsrc/main/java/org/junitpioneer/jupiter/package-info.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52fb68cf4482336ddda6a1c274f94dc0fdb1b977", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/52fb68cf4482336ddda6a1c274f94dc0fdb1b977", "committedDate": "2020-07-02T16:50:18Z", "message": "Merge branch 'master' into stopwatch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80971222536d9b50d39f667dd26919928c389e6c", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/80971222536d9b50d39f667dd26919928c389e6c", "committedDate": "2020-07-20T11:10:47Z", "message": "Merge branch 'master' into stopwatch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c6798cf38e49bf4119abd2b88f3f1f1f976ae2d", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/9c6798cf38e49bf4119abd2b88f3f1f1f976ae2d", "committedDate": "2020-07-20T11:22:20Z", "message": "How to access ReportEntries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a448e77aa8d4cbca1f3f506ef46c285cdc918f1", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/2a448e77aa8d4cbca1f3f506ef46c285cdc918f1", "committedDate": "2020-07-20T12:20:45Z", "message": "Checking the value of the ReportEntry again"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNTY2Mjc2", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#pullrequestreview-451566276", "createdAt": "2020-07-20T12:38:29Z", "commit": {"oid": "2a448e77aa8d4cbca1f3f506ef46c285cdc918f1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMjozODoyOVrOG0KEpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMjozODoyOVrOG0KEpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzM0NDE2Nw==", "bodyText": "I honestly think either this check is unnecessary or should throw an ExtensionConfigurationException.\nThis extension can be invoked by two things:\n\nAdding the @Stopwatch annotation (which has @ExtendWith(StopwatchExtension.class))\nAdding @ExtendWith(StopwatchExtension.class) to your test class\n\nIf the explicit registration is not considered bad configuration then this check is unnecessary.\nIf the explicit registration is considered bad configuration then this check should be the other way around, i.e.:\nif (!PioneerAnnotationUtils.isAnyAnnotationPresent(context, Stopwatch.class) {\n    throw new ExtensionConfigurationException(/* Meaningful message */);\n}\nstoreNowAsLaunchTime(context);", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#discussion_r457344167", "createdAt": "2020-07-20T12:38:29Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/StopwatchExtension.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import static java.lang.System.currentTimeMillis;\n+\n+import java.time.Clock;\n+\n+import org.junit.jupiter.api.extension.AfterTestExecutionCallback;\n+import org.junit.jupiter.api.extension.BeforeTestExecutionCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.jupiter.api.extension.ExtensionContext.Namespace;\n+\n+/**\n+ * The StopwatchExtension implements callback methods for the {@code @Stopwatch} annotation.\n+ */\n+class StopwatchExtension implements BeforeTestExecutionCallback, AfterTestExecutionCallback {\n+\n+\tprivate final Clock clock = Clock.systemUTC();\n+\tprivate static final Namespace NAMESPACE = Namespace.create(StopwatchExtension.class);\n+\n+\t@Override\n+\tpublic void beforeTestExecution(ExtensionContext context) {\n+\t\tif (PioneerAnnotationUtils.isAnyAnnotationPresent(context, Stopwatch.class)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a448e77aa8d4cbca1f3f506ef46c285cdc918f1"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNTY2NTk5", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#pullrequestreview-451566599", "createdAt": "2020-07-20T12:38:57Z", "commit": {"oid": "2a448e77aa8d4cbca1f3f506ef46c285cdc918f1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMjozODo1N1rOG0KF2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMjozODo1N1rOG0KF2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzM0NDQ3NA==", "bodyText": "The same thing here - unnecessary or the other way around.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#discussion_r457344474", "createdAt": "2020-07-20T12:38:57Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/StopwatchExtension.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import static java.lang.System.currentTimeMillis;\n+\n+import java.time.Clock;\n+\n+import org.junit.jupiter.api.extension.AfterTestExecutionCallback;\n+import org.junit.jupiter.api.extension.BeforeTestExecutionCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.jupiter.api.extension.ExtensionContext.Namespace;\n+\n+/**\n+ * The StopwatchExtension implements callback methods for the {@code @Stopwatch} annotation.\n+ */\n+class StopwatchExtension implements BeforeTestExecutionCallback, AfterTestExecutionCallback {\n+\n+\tprivate final Clock clock = Clock.systemUTC();\n+\tprivate static final Namespace NAMESPACE = Namespace.create(StopwatchExtension.class);\n+\n+\t@Override\n+\tpublic void beforeTestExecution(ExtensionContext context) {\n+\t\tif (PioneerAnnotationUtils.isAnyAnnotationPresent(context, Stopwatch.class)) {\n+\t\t\tstoreNowAsLaunchTime(context);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void afterTestExecution(ExtensionContext context) {\n+\t\tif (PioneerAnnotationUtils.isAnyAnnotationPresent(context, Stopwatch.class)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a448e77aa8d4cbca1f3f506ef46c285cdc918f1"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4dde9e3b1e8f8d1f7f45243b7207d8d763a58fd", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/f4dde9e3b1e8f8d1f7f45243b7207d8d763a58fd", "committedDate": "2020-07-20T13:06:02Z", "message": "Remove unnecessary check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f00569909518064fbfff3e20984c6c0921c2b99", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/2f00569909518064fbfff3e20984c6c0921c2b99", "committedDate": "2020-07-31T17:34:43Z", "message": "Merge branch 'master' into stopwatch\n\n# Conflicts:\n#\tsrc/main/java/org/junitpioneer/jupiter/package-info.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbba97a81fa5218b12c366ae5ab2ecaa6f5cbf0f", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/cbba97a81fa5218b12c366ae5ab2ecaa6f5cbf0f", "committedDate": "2020-08-08T06:44:53Z", "message": "Merge branch 'master' into stopwatch\n\n# Conflicts:\n#\tdocs/docs-nav.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f64da9e0ded3b49db496bdce3788cc056abf4f4", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/8f64da9e0ded3b49db496bdce3788cc056abf4f4", "committedDate": "2020-08-08T06:46:07Z", "message": "Update docs to match new style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7f3d09fe2719e001df3d92756b2cb0d614a1fac", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/c7f3d09fe2719e001df3d92756b2cb0d614a1fac", "committedDate": "2020-09-26T12:59:18Z", "message": "Merge branch 'master' into stopwatch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c01402d781f5876aec95b41ff85b5221cf081ff8", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/c01402d781f5876aec95b41ff85b5221cf081ff8", "committedDate": "2020-10-03T08:00:34Z", "message": "Merge branch 'master' into stopwatch\n\n# Conflicts:\n#\tdocs/docs-nav.yml\n#\tsrc/main/java/org/junitpioneer/jupiter/package-info.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df3856d4f021f4c0517eabcbbf0e8054121e1882", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/df3856d4f021f4c0517eabcbbf0e8054121e1882", "committedDate": "2020-10-03T08:28:47Z", "message": "Fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37a50818309fa20cafbac41b6b6b416af624f68b", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/37a50818309fa20cafbac41b6b6b416af624f68b", "committedDate": "2020-10-06T19:25:51Z", "message": "Merge branch 'master' into stopwatch"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NjM5NTE5", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#pullrequestreview-494639519", "createdAt": "2020-09-23T13:08:02Z", "commit": {"oid": "8f64da9e0ded3b49db496bdce3788cc056abf4f4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxMzowODowMlrOHWs-CQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQxMDowNzo1OVrOH_yUNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzU2NzQ5Nw==", "bodyText": "I recommend linking the relevant part (about TestReporter) of the JUnit User Guide.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#discussion_r493567497", "createdAt": "2020-09-23T13:08:02Z", "author": {"login": "Michael1993"}, "path": "docs/stopwatch.adoc", "diffHunk": "@@ -0,0 +1,22 @@\n+:page-title: Stopwatch\n+:page-description: Extends JUnit Jupiter with `@Stopwatch`to measure elapsed time of a test method\n+\n+== Introduction\n+\n+Test shall be fast.\n+To get a feeling how fast or slow a specific test the `@Stopwatch` annotation can be used.\n+It will measure elapsed time and pass the result to the test reporter, which will publish it.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f64da9e0ded3b49db496bdce3788cc056abf4f4"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzU3MDE1Mw==", "bodyText": "Typo in classs", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#discussion_r493570153", "createdAt": "2020-09-23T13:10:39Z", "author": {"login": "Michael1993"}, "path": "src/test/java/org/junitpioneer/jupiter/StopwatchExtensionTests.java", "diffHunk": "@@ -0,0 +1,164 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import static java.util.stream.Collectors.toList;\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+import org.junit.jupiter.api.DisplayName;\n+import org.junit.jupiter.api.Test;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junitpioneer.testkit.ExecutionResults;\n+import org.junitpioneer.testkit.PioneerTestKit;\n+import org.junitpioneer.testkit.assertion.PioneerAssert;\n+\n+@DisplayName(\"Stopwatch extension \")\n+public class StopwatchExtensionTests {\n+\n+\t@DisplayName(\"should be executed with annotation on class level and report an entry for test method\")\n+\t@Test\n+\tvoid runClassLevelAnnotationTest() {\n+\n+\t\tExecutionResults results = PioneerTestKit\n+\t\t\t\t.executeTestClass(StopwatchExtensionTests.ClassLevelAnnotationTest.class);\n+\n+\t\tPioneerAssert.assertThat(results).hasNumberOfReportEntries(1);\n+\n+\t\tString methodName = \"stopwatchExtensionShouldBeExecutedWithAnnotationOnClassLevel\";\n+\t\tassertStringStartWithUnitAndContainsName(results, methodName);\n+\n+\t}\n+\n+\t@DisplayName(\"should be executed with annotation on class level and test method and report an entry for test method\")\n+\t@Test\n+\tvoid runClassAndMethodLevelAnnotationTest() {\n+\t\tString methodName = \"stopwatchExtensionShouldBeExecutedWithAnnotationOnClassAndMethodLevel\";\n+\n+\t\tExecutionResults results = PioneerTestKit\n+\t\t\t\t.executeTestClass(StopwatchExtensionTests.ClassAndMethodLevelAnnotationTest.class);\n+\t\tPioneerAssert.assertThat(results).hasNumberOfReportEntries(1);\n+\n+\t\tassertStringStartWithUnitAndContainsName(results, methodName);\n+\t}\n+\n+\t@DisplayName(\"should be executed with annotation on test method and report an entry for test method\")\n+\t@Test\n+\tvoid runMethodLevelAnnotationTest() {\n+\t\tString methodName = \"stopwatchExtensionShouldBeExecutedOnWithAnnotationOnMethodLevel\";\n+\n+\t\tExecutionResults results = PioneerTestKit\n+\t\t\t\t.executeTestMethod(StopwatchExtensionTests.MethodLevelAnnotationTest.class, methodName);\n+\t\tPioneerAssert.assertThat(results).hasNumberOfReportEntries(1);\n+\n+\t\tassertStringStartWithUnitAndContainsName(results, methodName);\n+\t}\n+\n+\t@DisplayName(\"should not be executed and therefore no entry should be published\")\n+\t@Test\n+\tvoid runAnnotationTest() {\n+\t\tString methodName = \"stopwatchExtensionShouldNotBeExecuted\";\n+\n+\t\tExecutionResults results = PioneerTestKit\n+\t\t\t\t.executeTestMethod(StopwatchExtensionTests.MethodLevelAnnotationTest.class, methodName);\n+\t\tPioneerAssert.assertThat(results).hasNumberOfReportEntries(0);\n+\n+\t}\n+\n+\tprivate void assertStringStartWithUnitAndContainsName(ExecutionResults results, String name) {\n+\n+\t\tMap<String, String> reportEntry = firstReportEntry(results);\n+\n+\t\tassertThat(reportEntry).hasSize(1);\n+\n+\t\tString result = reportEntry.get(\"stopwatch\");\n+\t\tassertThat(result).isNotNull();\n+\n+\t\tString startsWith = String.format(\"Execution of '%s()' took [\", name);\n+\n+\t\tassertThat(result).startsWith(startsWith);\n+\t\tassertThat(result).endsWith(\"] ms.\");\n+\t}\n+\n+\t/**\n+\t * Retrieves the first published ReportEntry.\n+\t * The possibility to retrieve the ReportEntries of a test execution was removed during\n+\t * the improvement of the PioneerAssertions.\n+\t *\n+\t * @param results Results of the test execution\n+\t * @return The first ReportEntry\n+\t */\n+\tprivate Map<String, String> firstReportEntry(ExecutionResults results) {\n+\t\tList<Map<String, String>> reportEntries = results\n+\t\t\t\t.allEvents()\n+\t\t\t\t.reportingEntryPublished()\n+\t\t\t\t.stream()\n+\t\t\t\t.map(event -> event.getPayload(org.junit.platform.engine.reporting.ReportEntry.class))\n+\t\t\t\t.filter(Optional::isPresent)\n+\t\t\t\t.map(Optional::get)\n+\t\t\t\t.map(ReportEntry::getKeyValuePairs)\n+\t\t\t\t.collect(toList());\n+\n+\t\treturn reportEntries.get(0);\n+\t}\n+\n+\t/**\n+\t * Inner test class for testing the class level annotation.\n+\t */\n+\t@Stopwatch\n+\tstatic class ClassLevelAnnotationTest {\n+\n+\t\t@Test\n+\t\tvoid stopwatchExtensionShouldBeExecutedWithAnnotationOnClassLevel() {\n+\t\t}\n+\n+\t}\n+\n+\t/**\n+\t * Inner test class for testing the method level annotation.\n+\t */\n+\tstatic class MethodLevelAnnotationTest {\n+\n+\t\t@Stopwatch\n+\t\t@Test\n+\t\tvoid stopwatchExtensionShouldBeExecutedOnWithAnnotationOnMethodLevel() {\n+\t\t}\n+\n+\t}\n+\n+\t/**\n+\t * Inner test class for testing the class level annotation.\n+\t */\n+\t@Stopwatch\n+\tstatic class ClassAndMethodLevelAnnotationTest {\n+\n+\t\t@Stopwatch\n+\t\t@Test\n+\t\tvoid stopwatchExtensionShouldBeExecutedWithAnnotationOnClassAndMethodLevel() {\n+\t\t}\n+\n+\t}\n+\n+\t/**\n+\t * Inner test class for testing a not annotated method / classs annotation.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f64da9e0ded3b49db496bdce3788cc056abf4f4"}, "originalPosition": 154}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjYwMzQwMw==", "bodyText": "Just \"Stopwatch\"? Perhaps the title should be a bit more verbose?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#discussion_r536603403", "createdAt": "2020-12-05T09:31:06Z", "author": {"login": "Michael1993"}, "path": "docs/docs-nav.yml", "diffHunk": "@@ -20,6 +20,8 @@\n         url: /docs/retrying-test/\n       - title: \"Standard Input and Output\"\n         url: /docs/standard-input-output/\n+      - title: \"Stopwatch\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37a50818309fa20cafbac41b6b6b416af624f68b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjYwNzMwMg==", "bodyText": "You use clock.instant().toEpochMilli() earlier but currentTimeMillis() here. Any particular reason these are not in sync? Should they be in sync?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#discussion_r536607302", "createdAt": "2020-12-05T09:34:15Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/StopwatchExtension.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import static java.lang.System.currentTimeMillis;\n+\n+import java.time.Clock;\n+\n+import org.junit.jupiter.api.extension.AfterTestExecutionCallback;\n+import org.junit.jupiter.api.extension.BeforeTestExecutionCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.jupiter.api.extension.ExtensionContext.Namespace;\n+\n+/**\n+ * The StopwatchExtension implements callback methods for the {@code @Stopwatch} annotation.\n+ */\n+class StopwatchExtension implements BeforeTestExecutionCallback, AfterTestExecutionCallback {\n+\n+\tprivate final Clock clock = Clock.systemUTC();\n+\tprivate static final Namespace NAMESPACE = Namespace.create(StopwatchExtension.class);\n+\n+\t@Override\n+\tpublic void beforeTestExecution(ExtensionContext context) {\n+\t\tstoreNowAsLaunchTime(context);\n+\t}\n+\n+\t@Override\n+\tpublic void afterTestExecution(ExtensionContext context) {\n+\t\tcalculateAndReportElapsedTime(context);\n+\t}\n+\n+\t/**\n+\t * Stores the current time for the method in the execution context.\n+\t *\n+\t * @param context Extension context of the class\n+\t */\n+\tvoid storeNowAsLaunchTime(ExtensionContext context) {\n+\t\tcontext.getStore(NAMESPACE).put(context.getUniqueId(), clock.instant().toEpochMilli());\n+\t}\n+\n+\t/**\n+\t * Loads the stored time for method from the execution context.\n+\t *\n+\t * @param context Extension context of the class\n+\t */\n+\tlong loadLaunchTime(ExtensionContext context) {\n+\t\treturn context.getStore(NAMESPACE).get(context.getUniqueId(), long.class);\n+\t}\n+\n+\t/**\n+\t * Calculates the elapsed time method and publishes it to the execution context.\n+\t *\n+\t * @param context Extension context of the class\n+\t */\n+\tvoid calculateAndReportElapsedTime(ExtensionContext context) {\n+\t\tlong launchTime = loadLaunchTime(context);\n+\t\tlong elapsedTime = currentTimeMillis() - launchTime;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37a50818309fa20cafbac41b6b6b416af624f68b"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjYwODg1MQ==", "bodyText": "Please extract the key to a constant - I'd also prefer if the key were \"StopwatchExtension\", but that is more or less a matter of taste.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#discussion_r536608851", "createdAt": "2020-12-05T09:35:28Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/StopwatchExtension.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import static java.lang.System.currentTimeMillis;\n+\n+import java.time.Clock;\n+\n+import org.junit.jupiter.api.extension.AfterTestExecutionCallback;\n+import org.junit.jupiter.api.extension.BeforeTestExecutionCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.jupiter.api.extension.ExtensionContext.Namespace;\n+\n+/**\n+ * The StopwatchExtension implements callback methods for the {@code @Stopwatch} annotation.\n+ */\n+class StopwatchExtension implements BeforeTestExecutionCallback, AfterTestExecutionCallback {\n+\n+\tprivate final Clock clock = Clock.systemUTC();\n+\tprivate static final Namespace NAMESPACE = Namespace.create(StopwatchExtension.class);\n+\n+\t@Override\n+\tpublic void beforeTestExecution(ExtensionContext context) {\n+\t\tstoreNowAsLaunchTime(context);\n+\t}\n+\n+\t@Override\n+\tpublic void afterTestExecution(ExtensionContext context) {\n+\t\tcalculateAndReportElapsedTime(context);\n+\t}\n+\n+\t/**\n+\t * Stores the current time for the method in the execution context.\n+\t *\n+\t * @param context Extension context of the class\n+\t */\n+\tvoid storeNowAsLaunchTime(ExtensionContext context) {\n+\t\tcontext.getStore(NAMESPACE).put(context.getUniqueId(), clock.instant().toEpochMilli());\n+\t}\n+\n+\t/**\n+\t * Loads the stored time for method from the execution context.\n+\t *\n+\t * @param context Extension context of the class\n+\t */\n+\tlong loadLaunchTime(ExtensionContext context) {\n+\t\treturn context.getStore(NAMESPACE).get(context.getUniqueId(), long.class);\n+\t}\n+\n+\t/**\n+\t * Calculates the elapsed time method and publishes it to the execution context.\n+\t *\n+\t * @param context Extension context of the class\n+\t */\n+\tvoid calculateAndReportElapsedTime(ExtensionContext context) {\n+\t\tlong launchTime = loadLaunchTime(context);\n+\t\tlong elapsedTime = currentTimeMillis() - launchTime;\n+\n+\t\tString message = String.format(\"Execution of '%s' took [%d] ms.\", context.getDisplayName(), elapsedTime);\n+\t\tcontext.publishReportEntry(\"stopwatch\", message);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37a50818309fa20cafbac41b6b6b416af624f68b"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjY0NjcwOQ==", "bodyText": "Since you only assert a single report entry, you could use the new and shiny andThen(Consumer<Map.Entry<String,String>>) method. Something like this:\nassertThat(results).hasNumberOfReportEntries(1).andThen(entry -> {\n\tassertThat(entry.getKey()).isEqualTo(\"stopwatch\");\n\tassertThat(entry.getValue()).matches(format(\"Execution of '%s\\\\(\\\\)' took \\\\[[0-9]*\\\\] ms.\", methodName));\n});", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#discussion_r536646709", "createdAt": "2020-12-05T10:07:59Z", "author": {"login": "Michael1993"}, "path": "src/test/java/org/junitpioneer/jupiter/StopwatchExtensionTests.java", "diffHunk": "@@ -0,0 +1,164 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import static java.util.stream.Collectors.toList;\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+import org.junit.jupiter.api.DisplayName;\n+import org.junit.jupiter.api.Test;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junitpioneer.testkit.ExecutionResults;\n+import org.junitpioneer.testkit.PioneerTestKit;\n+import org.junitpioneer.testkit.assertion.PioneerAssert;\n+\n+@DisplayName(\"Stopwatch extension \")\n+public class StopwatchExtensionTests {\n+\n+\t@DisplayName(\"should be executed with annotation on class level and report an entry for test method\")\n+\t@Test\n+\tvoid runClassLevelAnnotationTest() {\n+\n+\t\tExecutionResults results = PioneerTestKit\n+\t\t\t\t.executeTestClass(StopwatchExtensionTests.ClassLevelAnnotationTest.class);\n+\n+\t\tPioneerAssert.assertThat(results).hasNumberOfReportEntries(1);\n+\n+\t\tString methodName = \"stopwatchExtensionShouldBeExecutedWithAnnotationOnClassLevel\";\n+\t\tassertStringStartWithUnitAndContainsName(results, methodName);\n+\n+\t}\n+\n+\t@DisplayName(\"should be executed with annotation on class level and test method and report an entry for test method\")\n+\t@Test\n+\tvoid runClassAndMethodLevelAnnotationTest() {\n+\t\tString methodName = \"stopwatchExtensionShouldBeExecutedWithAnnotationOnClassAndMethodLevel\";\n+\n+\t\tExecutionResults results = PioneerTestKit\n+\t\t\t\t.executeTestClass(StopwatchExtensionTests.ClassAndMethodLevelAnnotationTest.class);\n+\t\tPioneerAssert.assertThat(results).hasNumberOfReportEntries(1);\n+\n+\t\tassertStringStartWithUnitAndContainsName(results, methodName);\n+\t}\n+\n+\t@DisplayName(\"should be executed with annotation on test method and report an entry for test method\")\n+\t@Test\n+\tvoid runMethodLevelAnnotationTest() {\n+\t\tString methodName = \"stopwatchExtensionShouldBeExecutedOnWithAnnotationOnMethodLevel\";\n+\n+\t\tExecutionResults results = PioneerTestKit\n+\t\t\t\t.executeTestMethod(StopwatchExtensionTests.MethodLevelAnnotationTest.class, methodName);\n+\t\tPioneerAssert.assertThat(results).hasNumberOfReportEntries(1);\n+\n+\t\tassertStringStartWithUnitAndContainsName(results, methodName);\n+\t}\n+\n+\t@DisplayName(\"should not be executed and therefore no entry should be published\")\n+\t@Test\n+\tvoid runAnnotationTest() {\n+\t\tString methodName = \"stopwatchExtensionShouldNotBeExecuted\";\n+\n+\t\tExecutionResults results = PioneerTestKit\n+\t\t\t\t.executeTestMethod(StopwatchExtensionTests.NonAnnotationTest.class, methodName);\n+\t\tPioneerAssert.assertThat(results).hasNumberOfReportEntries(0);\n+\n+\t}\n+\n+\tprivate void assertStringStartWithUnitAndContainsName(ExecutionResults results, String name) {\n+\n+\t\tMap<String, String> reportEntry = firstReportEntry(results);\n+\n+\t\tassertThat(reportEntry).hasSize(1);\n+\n+\t\tString result = reportEntry.get(\"stopwatch\");\n+\t\tassertThat(result).isNotNull();\n+\n+\t\tString startsWith = String.format(\"Execution of '%s()' took [\", name);\n+\n+\t\tassertThat(result).startsWith(startsWith);\n+\t\tassertThat(result).endsWith(\"] ms.\");\n+\t}\n+\n+\t/**\n+\t * Retrieves the first published ReportEntry.\n+\t * The possibility to retrieve the ReportEntries of a test execution was removed during\n+\t * the improvement of the PioneerAssertions.\n+\t *\n+\t * @param results Results of the test execution\n+\t * @return The first ReportEntry\n+\t */\n+\tprivate Map<String, String> firstReportEntry(ExecutionResults results) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37a50818309fa20cafbac41b6b6b416af624f68b"}, "originalPosition": 102}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6ed9c8364b1abd57ee9ff6c7e0ca2fcc5ac00df", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/f6ed9c8364b1abd57ee9ff6c7e0ca2fcc5ac00df", "committedDate": "2020-12-05T17:51:08Z", "message": "Gradle-bat"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bed3258962333c33ad4ce1514c43774a8fcf4756", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/bed3258962333c33ad4ce1514c43774a8fcf4756", "committedDate": "2020-12-05T17:51:33Z", "message": "Merge branch 'master' into stopwatch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2430da9d648695e671ab5706a7e9ebe8538e6661", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/2430da9d648695e671ab5706a7e9ebe8538e6661", "committedDate": "2020-12-05T18:08:09Z", "message": "Apply review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1125c2c5b7a98fb9c828535bca3f0b7d65da9e7", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/c1125c2c5b7a98fb9c828535bca3f0b7d65da9e7", "committedDate": "2020-12-05T18:13:32Z", "message": "Apply review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6d875df9ceed34e5f96525fb237bceb39064833", "author": {"user": {"login": "Bukama", "name": "Matthias B\u00fcnger"}}, "url": "https://github.com/junit-pioneer/junit-pioneer/commit/c6d875df9ceed34e5f96525fb237bceb39064833", "committedDate": "2020-12-06T08:53:56Z", "message": "Apply review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1OTc0ODc5", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#pullrequestreview-545974879", "createdAt": "2020-12-07T09:39:17Z", "commit": {"oid": "c6d875df9ceed34e5f96525fb237bceb39064833"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwOTozOToxN1rOIAd6BQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwOTozOToxN1rOIAd6BQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzM2MDkwMQ==", "bodyText": "Hm, I'm not sure if this does what you think it does. Shouldn't it be: url[`text`] instead of `url[text]`?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#discussion_r537360901", "createdAt": "2020-12-07T09:39:17Z", "author": {"login": "Michael1993"}, "path": "docs/stopwatch.adoc", "diffHunk": "@@ -0,0 +1,22 @@\n+:page-title: Measuring time with a Stopwatch\n+:page-description: Extends JUnit Jupiter with `@Stopwatch` to measure elapsed time of a test method\n+\n+== Introduction\n+\n+Test shall be fast.\n+To get a feeling how fast or slow a specific test is, the `@Stopwatch` annotation can be used.\n+It will measure elapsed time and pass the result to the `https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/TestReporter.html[TestReporter]`, which will publish it.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6d875df9ceed34e5f96525fb237bceb39064833"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1OTc1MjUx", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/182#pullrequestreview-545975251", "createdAt": "2020-12-07T09:39:43Z", "commit": {"oid": "c6d875df9ceed34e5f96525fb237bceb39064833"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3711, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}