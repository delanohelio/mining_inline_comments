{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1OTAyOTcx", "number": 361, "reviewThreads": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzoyOTozN1rOEvUHLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOTo0NzowOVrOE3Ywlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDQ4MDQ3OnYy", "diffSide": "RIGHT", "path": "src/main/resources/META-INF/services/org.junit.platform.launcher.TestExecutionListener", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzoyOTozN1rOHkOY-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwNzozODowNlrOHkupzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc0NjU1NQ==", "bodyText": "You could also add the provides with directive to our module-info.java. Would that work?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507746555", "createdAt": "2020-10-19T13:29:37Z", "author": {"login": "Michael1993"}, "path": "src/main/resources/META-INF/services/org.junit.platform.launcher.TestExecutionListener", "diffHunk": "@@ -0,0 +1 @@\n+org.junitpioneer.jupiter.issue.IssueExtensionListener", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3NTE0OQ==", "bodyText": "I have to read that up when I find some time.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r508275149", "createdAt": "2020-10-20T07:38:06Z", "author": {"login": "Bukama"}, "path": "src/main/resources/META-INF/services/org.junit.platform.launcher.TestExecutionListener", "diffHunk": "@@ -0,0 +1 @@\n+org.junitpioneer.jupiter.issue.IssueExtensionListener", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc0NjU1NQ=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDUwNjA4OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueProcessor.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzozNTowMlrOHkOohA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxOToxNDoxNlrOHy7w5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1MDUzMg==", "bodyText": "Why a List? A Map<String, IssuedTestCase> would make more sense to me. (issue id to tests & results).", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507750532", "createdAt": "2020-10-19T13:35:02Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueProcessor.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.List;\n+\n+/**\n+ * This interfaces offers a method to process the results of `@Issue` annotated test cases.\n+ */\n+public interface IssueProcessor {\n+\n+\t/**\n+\t * Processes results of `@Issue` annotated test cases, called {@link IssuedTestCase}.\n+\t *\n+\t * @param allResults List of tests with their unique name, issueId and execution results.\n+\t */\n+\tvoid processTestResults(List<IssuedTestCase> allResults);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MzcyNw==", "bodyText": "Why make it more complex? All information are in the IssuedTestCase and a List is easier than a Map I think.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r508273727", "createdAt": "2020-10-20T07:35:34Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueProcessor.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.List;\n+\n+/**\n+ * This interfaces offers a method to process the results of `@Issue` annotated test cases.\n+ */\n+public interface IssueProcessor {\n+\n+\t/**\n+\t * Processes results of `@Issue` annotated test cases, called {@link IssuedTestCase}.\n+\t *\n+\t * @param allResults List of tests with their unique name, issueId and execution results.\n+\t */\n+\tvoid processTestResults(List<IssuedTestCase> allResults);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1MDUzMg=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgxNTM3OQ==", "bodyText": "I'd prefer to pass on more structured information. What about a list of these:\npublic record TestedIssue(String issueId, List<IssueTestCase>) { }\npublic record IssueTestCase(String testId, Status result) { }\nBut obviously not as records. \ud83d\ude0a", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r520815379", "createdAt": "2020-11-10T19:19:46Z", "author": {"login": "nipafx"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueProcessor.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.List;\n+\n+/**\n+ * This interfaces offers a method to process the results of `@Issue` annotated test cases.\n+ */\n+public interface IssueProcessor {\n+\n+\t/**\n+\t * Processes results of `@Issue` annotated test cases, called {@link IssuedTestCase}.\n+\t *\n+\t * @param allResults List of tests with their unique name, issueId and execution results.\n+\t */\n+\tvoid processTestResults(List<IssuedTestCase> allResults);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1MDUzMg=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgxNzE3Mw==", "bodyText": "I also think that gathering these information in separate maps is a bit iffy. I prefer richer data structures - maybe a Map<TestId, TestedIssueBuilder>?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r520817173", "createdAt": "2020-11-10T19:22:58Z", "author": {"login": "nipafx"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueProcessor.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.List;\n+\n+/**\n+ * This interfaces offers a method to process the results of `@Issue` annotated test cases.\n+ */\n+public interface IssueProcessor {\n+\n+\t/**\n+\t * Processes results of `@Issue` annotated test cases, called {@link IssuedTestCase}.\n+\t *\n+\t * @param allResults List of tests with their unique name, issueId and execution results.\n+\t */\n+\tvoid processTestResults(List<IssuedTestCase> allResults);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1MDUzMg=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzE3MDAyMA==", "bodyText": "I'd prefer to pass on more structured information. What about a list of these:\npublic record TestedIssue(String issueId, List<IssueTestCase>) { }\npublic record IssueTestCase(String testId, Status result) { }\n\n\nChanged\n\nI also think that gathering these information in separate maps is a bit iffy. I prefer richer data structures - maybe a Map<TestId, TestedIssueBuilder>?\n\nI don't understand what you mean with TestedIssueBuilder", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r523170020", "createdAt": "2020-11-13T19:14:16Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueProcessor.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.List;\n+\n+/**\n+ * This interfaces offers a method to process the results of `@Issue` annotated test cases.\n+ */\n+public interface IssueProcessor {\n+\n+\t/**\n+\t * Processes results of `@Issue` annotated test cases, called {@link IssuedTestCase}.\n+\t *\n+\t * @param allResults List of tests with their unique name, issueId and execution results.\n+\t */\n+\tvoid processTestResults(List<IssuedTestCase> allResults);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1MDUzMg=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDUyNjM2OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzozOToyMlrOHkO1IA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxOToxMzowNFrOHy7uxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1Mzc2MA==", "bodyText": "You only call this once, no? Why not invoke ServiceLoader directly?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507753760", "createdAt": "2020-10-19T13:39:22Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {\n+\n+\tstatic final String KEY_ISSUE = \"Issue\";\n+\n+\t// Cache with all tests that belong to an issue <issueId, List<UniqueIdentifier>>\n+\tprivate final ConcurrentHashMap<String, List<String>> issueTestsCache = new ConcurrentHashMap<>();\n+\n+\t// Cache with tests results of test cases <UniqueIdentifier, result>\n+\tprivate final ConcurrentHashMap<String, String> testStatusCache = new ConcurrentHashMap<>();\n+\n+\t// Package private by purpose for testing\n+\tList<IssuedTestCase> allIssuedTests = new ArrayList<>();\n+\n+\t@Override\n+\tpublic void reportingEntryPublished(TestIdentifier testIdentifier, ReportEntry entry) {\n+\t\tString testId = testIdentifier.getUniqueId();\n+\n+\t\t// Check if the report entry is an issue id\n+\t\tMap<String, String> entryKeyValues = entry.getKeyValuePairs();\n+\t\tif (entryKeyValues.containsKey(KEY_ISSUE)) {\n+\t\t\tString issueId = entryKeyValues.get(KEY_ISSUE);\n+\n+\t\t\t// Store that the current test belongs to annotated issue\n+\t\t\tissueTestsCache.putIfAbsent(issueId, new ArrayList<>());\n+\t\t\tissueTestsCache.get(issueId).add(testId);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void executionFinished(TestIdentifier testIdentifier, TestExecutionResult testExecutionResult) {\n+\t\tif (testIdentifier.isTest()) {\n+\t\t\t// Store test result in cache\n+\t\t\ttestStatusCache.put(testIdentifier.getUniqueId(), testExecutionResult.getStatus().toString());\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void testPlanExecutionFinished(TestPlan testPlan) {\n+\t\t// Retrieve all tests, which are annotated with @Issue, and their result.\n+\t\tfor (Map.Entry<String, List<String>> entry : issueTestsCache.entrySet()) {\n+\t\t\tString issueId = entry.getKey();\n+\t\t\tList<String> allTests = entry.getValue();\n+\n+\t\t\tallTests.forEach(testID -> {\n+\t\t\t\tString status = testStatusCache.getOrDefault(testID, \"UNKNOWN\");\n+\n+\t\t\t\tallIssuedTests.add(new IssuedTestCase(testID, issueId, status));\n+\t\t\t});\n+\t\t}\n+\n+\t\t// Pass results to all IssueProcessors\n+\t\tIterator<IssueProcessor> processors = IssueProcessorProvider.getInstance().providers();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MjA3Ng==", "bodyText": "The ServiceLoader tutorial I worked with showed it that way, to encapsulate the retrieval of the ServiceLoader.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r508272076", "createdAt": "2020-10-20T07:32:42Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {\n+\n+\tstatic final String KEY_ISSUE = \"Issue\";\n+\n+\t// Cache with all tests that belong to an issue <issueId, List<UniqueIdentifier>>\n+\tprivate final ConcurrentHashMap<String, List<String>> issueTestsCache = new ConcurrentHashMap<>();\n+\n+\t// Cache with tests results of test cases <UniqueIdentifier, result>\n+\tprivate final ConcurrentHashMap<String, String> testStatusCache = new ConcurrentHashMap<>();\n+\n+\t// Package private by purpose for testing\n+\tList<IssuedTestCase> allIssuedTests = new ArrayList<>();\n+\n+\t@Override\n+\tpublic void reportingEntryPublished(TestIdentifier testIdentifier, ReportEntry entry) {\n+\t\tString testId = testIdentifier.getUniqueId();\n+\n+\t\t// Check if the report entry is an issue id\n+\t\tMap<String, String> entryKeyValues = entry.getKeyValuePairs();\n+\t\tif (entryKeyValues.containsKey(KEY_ISSUE)) {\n+\t\t\tString issueId = entryKeyValues.get(KEY_ISSUE);\n+\n+\t\t\t// Store that the current test belongs to annotated issue\n+\t\t\tissueTestsCache.putIfAbsent(issueId, new ArrayList<>());\n+\t\t\tissueTestsCache.get(issueId).add(testId);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void executionFinished(TestIdentifier testIdentifier, TestExecutionResult testExecutionResult) {\n+\t\tif (testIdentifier.isTest()) {\n+\t\t\t// Store test result in cache\n+\t\t\ttestStatusCache.put(testIdentifier.getUniqueId(), testExecutionResult.getStatus().toString());\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void testPlanExecutionFinished(TestPlan testPlan) {\n+\t\t// Retrieve all tests, which are annotated with @Issue, and their result.\n+\t\tfor (Map.Entry<String, List<String>> entry : issueTestsCache.entrySet()) {\n+\t\t\tString issueId = entry.getKey();\n+\t\t\tList<String> allTests = entry.getValue();\n+\n+\t\t\tallTests.forEach(testID -> {\n+\t\t\t\tString status = testStatusCache.getOrDefault(testID, \"UNKNOWN\");\n+\n+\t\t\t\tallIssuedTests.add(new IssuedTestCase(testID, issueId, status));\n+\t\t\t});\n+\t\t}\n+\n+\t\t// Pass results to all IssueProcessors\n+\t\tIterator<IssueProcessor> processors = IssueProcessorProvider.getInstance().providers();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1Mzc2MA=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzE2OTQ3OQ==", "bodyText": "Changed", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r523169479", "createdAt": "2020-11-13T19:13:04Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {\n+\n+\tstatic final String KEY_ISSUE = \"Issue\";\n+\n+\t// Cache with all tests that belong to an issue <issueId, List<UniqueIdentifier>>\n+\tprivate final ConcurrentHashMap<String, List<String>> issueTestsCache = new ConcurrentHashMap<>();\n+\n+\t// Cache with tests results of test cases <UniqueIdentifier, result>\n+\tprivate final ConcurrentHashMap<String, String> testStatusCache = new ConcurrentHashMap<>();\n+\n+\t// Package private by purpose for testing\n+\tList<IssuedTestCase> allIssuedTests = new ArrayList<>();\n+\n+\t@Override\n+\tpublic void reportingEntryPublished(TestIdentifier testIdentifier, ReportEntry entry) {\n+\t\tString testId = testIdentifier.getUniqueId();\n+\n+\t\t// Check if the report entry is an issue id\n+\t\tMap<String, String> entryKeyValues = entry.getKeyValuePairs();\n+\t\tif (entryKeyValues.containsKey(KEY_ISSUE)) {\n+\t\t\tString issueId = entryKeyValues.get(KEY_ISSUE);\n+\n+\t\t\t// Store that the current test belongs to annotated issue\n+\t\t\tissueTestsCache.putIfAbsent(issueId, new ArrayList<>());\n+\t\t\tissueTestsCache.get(issueId).add(testId);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void executionFinished(TestIdentifier testIdentifier, TestExecutionResult testExecutionResult) {\n+\t\tif (testIdentifier.isTest()) {\n+\t\t\t// Store test result in cache\n+\t\t\ttestStatusCache.put(testIdentifier.getUniqueId(), testExecutionResult.getStatus().toString());\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void testPlanExecutionFinished(TestPlan testPlan) {\n+\t\t// Retrieve all tests, which are annotated with @Issue, and their result.\n+\t\tfor (Map.Entry<String, List<String>> entry : issueTestsCache.entrySet()) {\n+\t\t\tString issueId = entry.getKey();\n+\t\t\tList<String> allTests = entry.getValue();\n+\n+\t\t\tallTests.forEach(testID -> {\n+\t\t\t\tString status = testStatusCache.getOrDefault(testID, \"UNKNOWN\");\n+\n+\t\t\t\tallIssuedTests.add(new IssuedTestCase(testID, issueId, status));\n+\t\t\t});\n+\t\t}\n+\n+\t\t// Pass results to all IssueProcessors\n+\t\tIterator<IssueProcessor> processors = IssueProcessorProvider.getInstance().providers();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1Mzc2MA=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDUzOTk4OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo0MjowNFrOHkO9Nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo0MjowNFrOHkO9Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1NTgzMQ==", "bodyText": "It's not a cache.\n\n\"...a cache [...] stores data so that future requests for that data can be served faster\"", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507755831", "createdAt": "2020-10-19T13:42:04Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {\n+\n+\tstatic final String KEY_ISSUE = \"Issue\";\n+\n+\t// Cache with all tests that belong to an issue <issueId, List<UniqueIdentifier>>\n+\tprivate final ConcurrentHashMap<String, List<String>> issueTestsCache = new ConcurrentHashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDU0MTA3OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo0MjoxOVrOHkO93Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo0MjoxOVrOHkO93Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1NTk5Nw==", "bodyText": "Also not a cache.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507755997", "createdAt": "2020-10-19T13:42:19Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {\n+\n+\tstatic final String KEY_ISSUE = \"Issue\";\n+\n+\t// Cache with all tests that belong to an issue <issueId, List<UniqueIdentifier>>\n+\tprivate final ConcurrentHashMap<String, List<String>> issueTestsCache = new ConcurrentHashMap<>();\n+\n+\t// Cache with tests results of test cases <UniqueIdentifier, result>\n+\tprivate final ConcurrentHashMap<String, String> testStatusCache = new ConcurrentHashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDU0OTgyOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo0NDoxMVrOHkPDTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwNzoyNToxMlrOHkuMPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1NzM5MA==", "bodyText": "Could you verify the behaviour with a private implementation of IssueProcessor? Then this could be just a local variable.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507757390", "createdAt": "2020-10-19T13:44:11Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {\n+\n+\tstatic final String KEY_ISSUE = \"Issue\";\n+\n+\t// Cache with all tests that belong to an issue <issueId, List<UniqueIdentifier>>\n+\tprivate final ConcurrentHashMap<String, List<String>> issueTestsCache = new ConcurrentHashMap<>();\n+\n+\t// Cache with tests results of test cases <UniqueIdentifier, result>\n+\tprivate final ConcurrentHashMap<String, String> testStatusCache = new ConcurrentHashMap<>();\n+\n+\t// Package private by purpose for testing\n+\tList<IssuedTestCase> allIssuedTests = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI2NzU4Mg==", "bodyText": "Then I would add code just for testing in a productive code base, which is bad coding. Package private variables, methods, etc. are best practices for testable code.\nI know that you don't like that (see your comment above about package private method), but I keep this coding style fully minded. I had this discussions for years at my work. I tested my methods and had almost no errors in my code, while colleagues had uncountable amount of errors, because they uses private methods and then claimed, that they could not test their code.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r508267582", "createdAt": "2020-10-20T07:25:12Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {\n+\n+\tstatic final String KEY_ISSUE = \"Issue\";\n+\n+\t// Cache with all tests that belong to an issue <issueId, List<UniqueIdentifier>>\n+\tprivate final ConcurrentHashMap<String, List<String>> issueTestsCache = new ConcurrentHashMap<>();\n+\n+\t// Cache with tests results of test cases <UniqueIdentifier, result>\n+\tprivate final ConcurrentHashMap<String, String> testStatusCache = new ConcurrentHashMap<>();\n+\n+\t// Package private by purpose for testing\n+\tList<IssuedTestCase> allIssuedTests = new ArrayList<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1NzM5MA=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDU2MTU4OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/IssueExtension.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo0NjozMVrOHkPKYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo0NjozMVrOHkPKYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1OTIwMw==", "bodyText": "1.) The Extension is package-private so it can only be invoked via the Issue annotation.\n2.) readIssueIdFromAnnotation throws an exception if the annotation is somehow still not present.\nChecking it in an if (basically the 3rd check) seems like overkill at this point. Worse, I think we should throw an exception if the annotation is missing but the if statement prevents that.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507759203", "createdAt": "2020-10-19T13:46:31Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/IssueExtension.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import org.junit.jupiter.api.extension.BeforeEachCallback;\n+import org.junit.jupiter.api.extension.ExtensionConfigurationException;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.platform.commons.support.AnnotationSupport;\n+\n+/**\n+ * This class implements the functionality for the {@code @Issue} annotation.\n+ *\n+ * @see Issue\n+ */\n+class IssueExtension implements BeforeEachCallback {\n+\n+\tstatic final String KEY = \"Issue\";\n+\n+\t@Override\n+\tpublic void beforeEach(ExtensionContext context) {\n+\t\t//noinspection unchecked\n+\t\tif (PioneerAnnotationUtils.isAnyAnnotationPresent(context, Issue.class)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDU2NDk3OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/IssueExtension.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo0NzoxM1rOHkPMlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwNzoxMjozMlrOHktvjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1OTc2NA==", "bodyText": "Why is this package-private? Could this be private?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507759764", "createdAt": "2020-10-19T13:47:13Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/IssueExtension.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import org.junit.jupiter.api.extension.BeforeEachCallback;\n+import org.junit.jupiter.api.extension.ExtensionConfigurationException;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.platform.commons.support.AnnotationSupport;\n+\n+/**\n+ * This class implements the functionality for the {@code @Issue} annotation.\n+ *\n+ * @see Issue\n+ */\n+class IssueExtension implements BeforeEachCallback {\n+\n+\tstatic final String KEY = \"Issue\";\n+\n+\t@Override\n+\tpublic void beforeEach(ExtensionContext context) {\n+\t\t//noinspection unchecked\n+\t\tif (PioneerAnnotationUtils.isAnyAnnotationPresent(context, Issue.class)) {\n+\t\t\tString issueId = readIssueIdFromAnnotation(context);\n+\t\t\tcontext.publishReportEntry(KEY, issueId);\n+\t\t}\n+\t}\n+\n+\t/**\n+\t * Reads the {@code @Issue} value from the annotation.\n+\t * @param context The Extensions context\n+\t * @return The read value\n+\t */\n+\tString readIssueIdFromAnnotation(ExtensionContext context) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI2MDIzNg==", "bodyText": "Same question, with same answer as in every PR.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r508260236", "createdAt": "2020-10-20T07:12:32Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/IssueExtension.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import org.junit.jupiter.api.extension.BeforeEachCallback;\n+import org.junit.jupiter.api.extension.ExtensionConfigurationException;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.platform.commons.support.AnnotationSupport;\n+\n+/**\n+ * This class implements the functionality for the {@code @Issue} annotation.\n+ *\n+ * @see Issue\n+ */\n+class IssueExtension implements BeforeEachCallback {\n+\n+\tstatic final String KEY = \"Issue\";\n+\n+\t@Override\n+\tpublic void beforeEach(ExtensionContext context) {\n+\t\t//noinspection unchecked\n+\t\tif (PioneerAnnotationUtils.isAnyAnnotationPresent(context, Issue.class)) {\n+\t\t\tString issueId = readIssueIdFromAnnotation(context);\n+\t\t\tcontext.publishReportEntry(KEY, issueId);\n+\t\t}\n+\t}\n+\n+\t/**\n+\t * Reads the {@code @Issue} value from the annotation.\n+\t * @param context The Extensions context\n+\t * @return The read value\n+\t */\n+\tString readIssueIdFromAnnotation(ExtensionContext context) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1OTc2NA=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDU3OTc0OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo1MDozMFrOHkPV6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwNzoxNjoxOFrOHkt36Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc2MjE1Mw==", "bodyText": "The extension makes the assumption that people won't publish report entries with the key \"Issue\". I do not like that.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507762153", "createdAt": "2020-10-19T13:50:30Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {\n+\n+\tstatic final String KEY_ISSUE = \"Issue\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI2MjM3Nw==", "bodyText": "I could change it to org.junit-pioneer.issue, but then you still argue, that people want to publish other report entries with this key. Same with every generated value, like an UUID.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r508262377", "createdAt": "2020-10-20T07:16:18Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {\n+\n+\tstatic final String KEY_ISSUE = \"Issue\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc2MjE1Mw=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDU4MTQ2OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/IssueExtension.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo1MDo1M1rOHkPW_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxODozNDowN1rOHwp_Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc2MjQyOA==", "bodyText": "Maybe the extension (as a whole) could be simpler if this class implemented the TestWatcher interface? Not quite sure.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507762428", "createdAt": "2020-10-19T13:50:53Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/IssueExtension.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import org.junit.jupiter.api.extension.BeforeEachCallback;\n+import org.junit.jupiter.api.extension.ExtensionConfigurationException;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.platform.commons.support.AnnotationSupport;\n+\n+/**\n+ * This class implements the functionality for the {@code @Issue} annotation.\n+ *\n+ * @see Issue\n+ */\n+class IssueExtension implements BeforeEachCallback {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI1ODY4OQ==", "bodyText": "I don't think so, because (when I understand it correctly) the TestWatcher has a callback for each of the result, but the extension only needs to publish the annotations value.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r508258689", "createdAt": "2020-10-20T07:09:42Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/IssueExtension.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import org.junit.jupiter.api.extension.BeforeEachCallback;\n+import org.junit.jupiter.api.extension.ExtensionConfigurationException;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.platform.commons.support.AnnotationSupport;\n+\n+/**\n+ * This class implements the functionality for the {@code @Issue} annotation.\n+ *\n+ * @see Issue\n+ */\n+class IssueExtension implements BeforeEachCallback {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc2MjQyOA=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc4MTYxMQ==", "bodyText": "I think it would be very interesting to gather more information that just the test's name, e.g. whether it failed and if so with what exception. But we can leave that for later. Changing the extension point shouldn't matter to the outside world.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r520781611", "createdAt": "2020-11-10T18:34:07Z", "author": {"login": "nipafx"}, "path": "src/main/java/org/junitpioneer/jupiter/IssueExtension.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import org.junit.jupiter.api.extension.BeforeEachCallback;\n+import org.junit.jupiter.api.extension.ExtensionConfigurationException;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.platform.commons.support.AnnotationSupport;\n+\n+/**\n+ * This class implements the functionality for the {@code @Issue} annotation.\n+ *\n+ * @see Issue\n+ */\n+class IssueExtension implements BeforeEachCallback {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc2MjQyOA=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDU5MTY1OnYy", "diffSide": "RIGHT", "path": "docs/issue.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo1MzowOFrOHkPdgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo1MzowOFrOHkPdgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc2NDA5OA==", "bodyText": "I thought we write it as Java, not JAVA? \ud83e\udd14", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507764098", "createdAt": "2020-10-19T13:53:08Z", "author": {"login": "Michael1993"}, "path": "docs/issue.adoc", "diffHunk": "@@ -0,0 +1,59 @@\n+:page-title: Issue Information\n+:page-description: Extends JUnit Jupiter with `@Issue` to publish issue information.\n+\n+== Introduction\n+\n+The main reason developer write tests is to ensure the functionality of a requirement or to avoid technical problems.\n+The `@Issue` annotation allows marking tests with a String, referencing a related issue (like a requirement, or a bugfix) of an issue-tracker (like JIRA or Redmine).\n+\n+It's a JUnit Jupiter extension for showing that tests exist to cover a specific issue.\n+\n+== Usage\n+\n+The extension is divided into two parts:\n+First there is an annotation to mark that a test belongs to a specific issue.\n+The second part of the extension is an API interface to process the results, as JUnit Pioneer does not know what a user wants to do with the results, e.g. generating a report, sending mails or mark the CI-build as failed.\n+\n+=== Annotating a test\n+\n+To show that a test related to an issue just add the annotation and provide a value, e.g. a JIRA issue id, like in the following example:\n+\n+[source,java]\n+----\n+@Issue(\"REQ-123\")\n+@Test\n+void test() {\n+\t// One of the tests for the issue with the id \"REQ-123\"\n+}\n+----\n+\n+The `@Issue` annotation can be used on the method level only.\n+This is done on purpose, so that the test class can contain tests which cover the professional requirements but also tests which only exist to ensure technical functionality / implementation details.\n+\n+The `@Issue` annotation can only be used once per method.\n+This is done on purpose too, because a test case should only cover exactly one aspect of a method.\n+\n+=== IssueProcessor API\n+\n+Pioneer tracks the results of tests which are annotated with the `@Issue` annotation, using an https://junit.org/junit5/docs/current/user-guide/#launcher-api-listeners-custom[ExectionListener].\n+After all tests are executed their unique names, results, and the annotated value (called `issueID`) are provided through the `IssueProcessor` API.\n+\n+To use the information published this way, a service implementation of the `IssueProcessor` interface must be provided by the user.\n+\n+The following snippet shows a simple implementation of the interface which just prints out the received values:\n+\n+[source,java]\n+----\n+public class SimpleProcessor implements IssueProcessor {\n+\n+\t@Override public void processTestResults(\n+\t\t\tList<IssuedTestCase> allResults) {\n+\t\tfor(IssuedTestCase test : allResults) {\n+\t\t\tSystem.out.println(test);\n+\t\t}\n+\t}\n+}\n+----\n+\n+NOTE: The implementing class must be registered to the JAVA ecosystem as a service.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDYxMDYxOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/IssueExtension.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo1Njo1MFrOHkPprg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOTowNDoxNVrOHwrgzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc2NzIxNA==", "bodyText": "Is this not a duplicate?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507767214", "createdAt": "2020-10-19T13:56:50Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/IssueExtension.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import org.junit.jupiter.api.extension.BeforeEachCallback;\n+import org.junit.jupiter.api.extension.ExtensionConfigurationException;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.platform.commons.support.AnnotationSupport;\n+\n+/**\n+ * This class implements the functionality for the {@code @Issue} annotation.\n+ *\n+ * @see Issue\n+ */\n+class IssueExtension implements BeforeEachCallback {\n+\n+\tstatic final String KEY = \"Issue\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgwNjYwNw==", "bodyText": "Yes, I removed the duplication.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r520806607", "createdAt": "2020-11-10T19:04:15Z", "author": {"login": "nipafx"}, "path": "src/main/java/org/junitpioneer/jupiter/IssueExtension.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import org.junit.jupiter.api.extension.BeforeEachCallback;\n+import org.junit.jupiter.api.extension.ExtensionConfigurationException;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.junit.platform.commons.support.AnnotationSupport;\n+\n+/**\n+ * This class implements the functionality for the {@code @Issue} annotation.\n+ *\n+ * @see Issue\n+ */\n+class IssueExtension implements BeforeEachCallback {\n+\n+\tstatic final String KEY = \"Issue\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc2NzIxNA=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDYzNzEwOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNDowMTowM1rOHkP6Ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwNzoyNzoyOFrOHkuRSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc3MTM5NA==", "bodyText": "Why just the status? You could store all the information you get from JUnit, nicely encapsulated in a TestExecutionResult object...", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507771394", "createdAt": "2020-10-19T14:01:03Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {\n+\n+\tstatic final String KEY_ISSUE = \"Issue\";\n+\n+\t// Cache with all tests that belong to an issue <issueId, List<UniqueIdentifier>>\n+\tprivate final ConcurrentHashMap<String, List<String>> issueTestsCache = new ConcurrentHashMap<>();\n+\n+\t// Cache with tests results of test cases <UniqueIdentifier, result>\n+\tprivate final ConcurrentHashMap<String, String> testStatusCache = new ConcurrentHashMap<>();\n+\n+\t// Package private by purpose for testing\n+\tList<IssuedTestCase> allIssuedTests = new ArrayList<>();\n+\n+\t@Override\n+\tpublic void reportingEntryPublished(TestIdentifier testIdentifier, ReportEntry entry) {\n+\t\tString testId = testIdentifier.getUniqueId();\n+\n+\t\t// Check if the report entry is an issue id\n+\t\tMap<String, String> entryKeyValues = entry.getKeyValuePairs();\n+\t\tif (entryKeyValues.containsKey(KEY_ISSUE)) {\n+\t\t\tString issueId = entryKeyValues.get(KEY_ISSUE);\n+\n+\t\t\t// Store that the current test belongs to annotated issue\n+\t\t\tissueTestsCache.putIfAbsent(issueId, new ArrayList<>());\n+\t\t\tissueTestsCache.get(issueId).add(testId);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void executionFinished(TestIdentifier testIdentifier, TestExecutionResult testExecutionResult) {\n+\t\tif (testIdentifier.isTest()) {\n+\t\t\t// Store test result in cache\n+\t\t\ttestStatusCache.put(testIdentifier.getUniqueId(), testExecutionResult.getStatus().toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI2ODg3NA==", "bodyText": "The TestExecutionResult only contains the status and maybe a Throwable, but the extension only cares about the status.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r508268874", "createdAt": "2020-10-20T07:27:28Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {\n+\n+\tstatic final String KEY_ISSUE = \"Issue\";\n+\n+\t// Cache with all tests that belong to an issue <issueId, List<UniqueIdentifier>>\n+\tprivate final ConcurrentHashMap<String, List<String>> issueTestsCache = new ConcurrentHashMap<>();\n+\n+\t// Cache with tests results of test cases <UniqueIdentifier, result>\n+\tprivate final ConcurrentHashMap<String, String> testStatusCache = new ConcurrentHashMap<>();\n+\n+\t// Package private by purpose for testing\n+\tList<IssuedTestCase> allIssuedTests = new ArrayList<>();\n+\n+\t@Override\n+\tpublic void reportingEntryPublished(TestIdentifier testIdentifier, ReportEntry entry) {\n+\t\tString testId = testIdentifier.getUniqueId();\n+\n+\t\t// Check if the report entry is an issue id\n+\t\tMap<String, String> entryKeyValues = entry.getKeyValuePairs();\n+\t\tif (entryKeyValues.containsKey(KEY_ISSUE)) {\n+\t\t\tString issueId = entryKeyValues.get(KEY_ISSUE);\n+\n+\t\t\t// Store that the current test belongs to annotated issue\n+\t\t\tissueTestsCache.putIfAbsent(issueId, new ArrayList<>());\n+\t\t\tissueTestsCache.get(issueId).add(testId);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void executionFinished(TestIdentifier testIdentifier, TestExecutionResult testExecutionResult) {\n+\t\tif (testIdentifier.isTest()) {\n+\t\t\t// Store test result in cache\n+\t\t\ttestStatusCache.put(testIdentifier.getUniqueId(), testExecutionResult.getStatus().toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc3MTM5NA=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDY1MDAwOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNDowMzo1MFrOHkQCig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwNzoyOTo0N1rOHkuWzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc3MzU3OA==", "bodyText": "You store things in a Map and then convert the Map into a List.\n1.) Why not just pass the Map to the IssueProcessors?\n2.) Why not create the List directly?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507773578", "createdAt": "2020-10-19T14:03:50Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {\n+\n+\tstatic final String KEY_ISSUE = \"Issue\";\n+\n+\t// Cache with all tests that belong to an issue <issueId, List<UniqueIdentifier>>\n+\tprivate final ConcurrentHashMap<String, List<String>> issueTestsCache = new ConcurrentHashMap<>();\n+\n+\t// Cache with tests results of test cases <UniqueIdentifier, result>\n+\tprivate final ConcurrentHashMap<String, String> testStatusCache = new ConcurrentHashMap<>();\n+\n+\t// Package private by purpose for testing\n+\tList<IssuedTestCase> allIssuedTests = new ArrayList<>();\n+\n+\t@Override\n+\tpublic void reportingEntryPublished(TestIdentifier testIdentifier, ReportEntry entry) {\n+\t\tString testId = testIdentifier.getUniqueId();\n+\n+\t\t// Check if the report entry is an issue id\n+\t\tMap<String, String> entryKeyValues = entry.getKeyValuePairs();\n+\t\tif (entryKeyValues.containsKey(KEY_ISSUE)) {\n+\t\t\tString issueId = entryKeyValues.get(KEY_ISSUE);\n+\n+\t\t\t// Store that the current test belongs to annotated issue\n+\t\t\tissueTestsCache.putIfAbsent(issueId, new ArrayList<>());\n+\t\t\tissueTestsCache.get(issueId).add(testId);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void executionFinished(TestIdentifier testIdentifier, TestExecutionResult testExecutionResult) {\n+\t\tif (testIdentifier.isTest()) {\n+\t\t\t// Store test result in cache\n+\t\t\ttestStatusCache.put(testIdentifier.getUniqueId(), testExecutionResult.getStatus().toString());\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void testPlanExecutionFinished(TestPlan testPlan) {\n+\t\t// Retrieve all tests, which are annotated with @Issue, and their result.\n+\t\tfor (Map.Entry<String, List<String>> entry : issueTestsCache.entrySet()) {\n+\t\t\tString issueId = entry.getKey();\n+\t\t\tList<String> allTests = entry.getValue();\n+\n+\t\t\tallTests.forEach(testID -> {\n+\t\t\t\tString status = testStatusCache.getOrDefault(testID, \"UNKNOWN\");\n+\n+\t\t\t\tallIssuedTests.add(new IssuedTestCase(testID, issueId, status));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MDI4Nw==", "bodyText": "Because I combine the entries of two different Maps into a single List.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r508270287", "createdAt": "2020-10-20T07:29:47Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {\n+\n+\tstatic final String KEY_ISSUE = \"Issue\";\n+\n+\t// Cache with all tests that belong to an issue <issueId, List<UniqueIdentifier>>\n+\tprivate final ConcurrentHashMap<String, List<String>> issueTestsCache = new ConcurrentHashMap<>();\n+\n+\t// Cache with tests results of test cases <UniqueIdentifier, result>\n+\tprivate final ConcurrentHashMap<String, String> testStatusCache = new ConcurrentHashMap<>();\n+\n+\t// Package private by purpose for testing\n+\tList<IssuedTestCase> allIssuedTests = new ArrayList<>();\n+\n+\t@Override\n+\tpublic void reportingEntryPublished(TestIdentifier testIdentifier, ReportEntry entry) {\n+\t\tString testId = testIdentifier.getUniqueId();\n+\n+\t\t// Check if the report entry is an issue id\n+\t\tMap<String, String> entryKeyValues = entry.getKeyValuePairs();\n+\t\tif (entryKeyValues.containsKey(KEY_ISSUE)) {\n+\t\t\tString issueId = entryKeyValues.get(KEY_ISSUE);\n+\n+\t\t\t// Store that the current test belongs to annotated issue\n+\t\t\tissueTestsCache.putIfAbsent(issueId, new ArrayList<>());\n+\t\t\tissueTestsCache.get(issueId).add(testId);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void executionFinished(TestIdentifier testIdentifier, TestExecutionResult testExecutionResult) {\n+\t\tif (testIdentifier.isTest()) {\n+\t\t\t// Store test result in cache\n+\t\t\ttestStatusCache.put(testIdentifier.getUniqueId(), testExecutionResult.getStatus().toString());\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void testPlanExecutionFinished(TestPlan testPlan) {\n+\t\t// Retrieve all tests, which are annotated with @Issue, and their result.\n+\t\tfor (Map.Entry<String, List<String>> entry : issueTestsCache.entrySet()) {\n+\t\t\tString issueId = entry.getKey();\n+\t\t\tList<String> allTests = entry.getValue();\n+\n+\t\t\tallTests.forEach(testID -> {\n+\t\t\t\tString status = testStatusCache.getOrDefault(testID, \"UNKNOWN\");\n+\n+\t\t\t\tallIssuedTests.add(new IssuedTestCase(testID, issueId, status));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc3MzU3OA=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDY2NDgyOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/issue/IssuedTestCase.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNDowNjoxM1rOHkQMNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOTozMDozMVrOHwsbOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc3NjA1NA==", "bodyText": "I think the fields should be only (if you agree with my other comments):\nprivate final String uniqueName;\nprivate final TestExecutionResult result;", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507776054", "createdAt": "2020-10-19T14:06:13Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssuedTestCase.java", "diffHunk": "@@ -0,0 +1,68 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+/**\n+ * Represents the execution result of test method, which is annotated with {@link org.junitpioneer.jupiter.Issue}.\n+ *\n+ * In future java this could be a record.\n+ */\n+public final class IssuedTestCase {\n+\n+\tprivate final String uniqueName;\n+\tprivate final String issueId;\n+\tprivate final String result;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3NDczMA==", "bodyText": "I don't agree :D", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r508274730", "createdAt": "2020-10-20T07:37:20Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssuedTestCase.java", "diffHunk": "@@ -0,0 +1,68 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+/**\n+ * Represents the execution result of test method, which is annotated with {@link org.junitpioneer.jupiter.Issue}.\n+ *\n+ * In future java this could be a record.\n+ */\n+public final class IssuedTestCase {\n+\n+\tprivate final String uniqueName;\n+\tprivate final String issueId;\n+\tprivate final String result;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc3NjA1NA=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgyMTU2Mw==", "bodyText": "I wanted to recommend TestExecutionResult as well, but it doesn't know the test's id, so we have to store that ourselves anyway. Instead of referencing it, we can just repack the information we need into our own class - see my proposal for IssueTestCase above.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r520821563", "createdAt": "2020-11-10T19:30:31Z", "author": {"login": "nipafx"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssuedTestCase.java", "diffHunk": "@@ -0,0 +1,68 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+/**\n+ * Represents the execution result of test method, which is annotated with {@link org.junitpioneer.jupiter.Issue}.\n+ *\n+ * In future java this could be a record.\n+ */\n+public final class IssuedTestCase {\n+\n+\tprivate final String uniqueName;\n+\tprivate final String issueId;\n+\tprivate final String result;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc3NjA1NA=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDY3MjA0OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueProcessorProvider.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNDowNzowOFrOHkQQ6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxOToxNDoyNFrOHy7xKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc3NzI1OA==", "bodyText": "A singleton? Why?!", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507777258", "createdAt": "2020-10-19T14:07:08Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueProcessorProvider.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.Iterator;\n+import java.util.ServiceLoader;\n+\n+/**\n+ * Provider for implementations of the {@link IssueProcessor} interface.\n+ */\n+public class IssueProcessorProvider {\n+\n+\tprivate static IssueProcessorProvider provider;\n+\tprivate ServiceLoader<IssueProcessor> loader;\n+\n+\tprivate IssueProcessorProvider() {\n+\t\tloader = ServiceLoader.load(IssueProcessor.class);\n+\t}\n+\n+\t/**\n+\t * Retrieve an instance of the IssueProcessorProvider.\n+\t *\n+\t * @return Instance of IssueProcessorProvider\n+\t */\n+\tpublic static IssueProcessorProvider getInstance() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3NDA2Mw==", "bodyText": "The tutorial I worked with showed it that way.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r508274063", "createdAt": "2020-10-20T07:36:12Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueProcessorProvider.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.Iterator;\n+import java.util.ServiceLoader;\n+\n+/**\n+ * Provider for implementations of the {@link IssueProcessor} interface.\n+ */\n+public class IssueProcessorProvider {\n+\n+\tprivate static IssueProcessorProvider provider;\n+\tprivate ServiceLoader<IssueProcessor> loader;\n+\n+\tprivate IssueProcessorProvider() {\n+\t\tloader = ServiceLoader.load(IssueProcessor.class);\n+\t}\n+\n+\t/**\n+\t * Retrieve an instance of the IssueProcessorProvider.\n+\t *\n+\t * @return Instance of IssueProcessorProvider\n+\t */\n+\tpublic static IssueProcessorProvider getInstance() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc3NzI1OA=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzE3MDA5MQ==", "bodyText": "Changed", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r523170091", "createdAt": "2020-11-13T19:14:24Z", "author": {"login": "Bukama"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueProcessorProvider.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.Iterator;\n+import java.util.ServiceLoader;\n+\n+/**\n+ * Provider for implementations of the {@link IssueProcessor} interface.\n+ */\n+public class IssueProcessorProvider {\n+\n+\tprivate static IssueProcessorProvider provider;\n+\tprivate ServiceLoader<IssueProcessor> loader;\n+\n+\tprivate IssueProcessorProvider() {\n+\t\tloader = ServiceLoader.load(IssueProcessor.class);\n+\t}\n+\n+\t/**\n+\t * Retrieve an instance of the IssueProcessorProvider.\n+\t *\n+\t * @return Instance of IssueProcessorProvider\n+\t */\n+\tpublic static IssueProcessorProvider getInstance() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc3NzI1OA=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDY5Njk2OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueProcessorProvider.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNDoxMTozM1rOHkQhAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOToyNToyNVrOHwsPnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc4MTM3Ng==", "bodyText": "If you insist on this class being necessary, I suggest abandoning the singleton pattern:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tpublic Iterator<IssueProcessor> providers() {\n          \n          \n            \n            \t\treturn loader.iterator();\n          \n          \n            \n            \tpublic static Iterator<IssueProcessor> providers() {\n          \n          \n            \n            \t\treturn ServiceLoader.load(IssueProcessor.class).iterator();", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r507781376", "createdAt": "2020-10-19T14:11:33Z", "author": {"login": "Michael1993"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueProcessorProvider.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.Iterator;\n+import java.util.ServiceLoader;\n+\n+/**\n+ * Provider for implementations of the {@link IssueProcessor} interface.\n+ */\n+public class IssueProcessorProvider {\n+\n+\tprivate static IssueProcessorProvider provider;\n+\tprivate ServiceLoader<IssueProcessor> loader;\n+\n+\tprivate IssueProcessorProvider() {\n+\t\tloader = ServiceLoader.load(IssueProcessor.class);\n+\t}\n+\n+\t/**\n+\t * Retrieve an instance of the IssueProcessorProvider.\n+\t *\n+\t * @return Instance of IssueProcessorProvider\n+\t */\n+\tpublic static IssueProcessorProvider getInstance() {\n+\t\tif (null == provider) {\n+\t\t\tprovider = new IssueProcessorProvider();\n+\t\t}\n+\n+\t\treturn provider;\n+\t}\n+\n+\t/**\n+\t * Provides all registered service providers.\n+\t *\n+\t * @return All known {@link IssueProcessor}s\n+\t */\n+\tpublic Iterator<IssueProcessor> providers() {\n+\t\treturn loader.iterator();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgxODU5MQ==", "bodyText": "I don't see the use for this class either. It just seems to be a wrapper around ServiceLoader.load(IssueProcessor.class). No reason not to call that directly wherever you need it.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r520818591", "createdAt": "2020-11-10T19:25:25Z", "author": {"login": "nipafx"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueProcessorProvider.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.Iterator;\n+import java.util.ServiceLoader;\n+\n+/**\n+ * Provider for implementations of the {@link IssueProcessor} interface.\n+ */\n+public class IssueProcessorProvider {\n+\n+\tprivate static IssueProcessorProvider provider;\n+\tprivate ServiceLoader<IssueProcessor> loader;\n+\n+\tprivate IssueProcessorProvider() {\n+\t\tloader = ServiceLoader.load(IssueProcessor.class);\n+\t}\n+\n+\t/**\n+\t * Retrieve an instance of the IssueProcessorProvider.\n+\t *\n+\t * @return Instance of IssueProcessorProvider\n+\t */\n+\tpublic static IssueProcessorProvider getInstance() {\n+\t\tif (null == provider) {\n+\t\t\tprovider = new IssueProcessorProvider();\n+\t\t}\n+\n+\t\treturn provider;\n+\t}\n+\n+\t/**\n+\t * Provides all registered service providers.\n+\t *\n+\t * @return All known {@link IssueProcessor}s\n+\t */\n+\tpublic Iterator<IssueProcessor> providers() {\n+\t\treturn loader.iterator();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc4MTM3Ng=="}, "originalCommit": {"oid": "e0157e4087c177cf1976e523307889f198828d6b"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NDczOTcxOnYy", "diffSide": "LEFT", "path": "build.gradle.kts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxODoxMTozN1rOHwpNBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOTowNjowN1rOHwrknw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc2ODc3Mw==", "bodyText": "@sormuras Is there any reason to not have junit-platform-launcher as a run-time dependency?", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r520768773", "createdAt": "2020-11-10T18:11:37Z", "author": {"login": "nipafx"}, "path": "build.gradle.kts", "diffHunk": "@@ -42,9 +42,9 @@ dependencies {\n \timplementation(group = \"org.junit.jupiter\", name = \"junit-jupiter-api\")\n \timplementation(group = \"org.junit.jupiter\", name = \"junit-jupiter-params\")\n \timplementation(group = \"org.junit.platform\", name = \"junit-platform-commons\")\n+\timplementation(group = \"org.junit.platform\", name = \"junit-platform-launcher\")\n \n \ttestImplementation(group = \"org.junit.jupiter\", name = \"junit-jupiter-engine\")\n-\ttestImplementation(group = \"org.junit.platform\", name = \"junit-platform-launcher\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce008f350668d7cb1a31b4158068b9f2e1ee845b"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgwNzU4Mw==", "bodyText": "sormuras popped into the stream and answered this with a riddle three before eventually letting us know that there's no problem with this.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r520807583", "createdAt": "2020-11-10T19:06:07Z", "author": {"login": "nipafx"}, "path": "build.gradle.kts", "diffHunk": "@@ -42,9 +42,9 @@ dependencies {\n \timplementation(group = \"org.junit.jupiter\", name = \"junit-jupiter-api\")\n \timplementation(group = \"org.junit.jupiter\", name = \"junit-jupiter-params\")\n \timplementation(group = \"org.junit.platform\", name = \"junit-platform-commons\")\n+\timplementation(group = \"org.junit.platform\", name = \"junit-platform-launcher\")\n \n \ttestImplementation(group = \"org.junit.jupiter\", name = \"junit-jupiter-engine\")\n-\ttestImplementation(group = \"org.junit.platform\", name = \"junit-platform-launcher\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc2ODc3Mw=="}, "originalCommit": {"oid": "ce008f350668d7cb1a31b4158068b9f2e1ee845b"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NDk2NzU3OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOTowMzoyMFrOHwreaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOTowMzoyMFrOHwreaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgwNTk5NQ==", "bodyText": "This extension isn't stateless. As far as I'm aware, Jupiter doesn't guarantee it will use the same instance for the entire test run (although I couldn't verify that in the user guide). I wanted to propose to use the store to store and retrieve all necessary information, but I just see that TestExecutionListeners don't have access to that (makes sense, because TestExecutionListener doesn't know anything about Jupiter, which is where the store lives).", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r520805995", "createdAt": "2020-11-10T19:03:20Z", "author": {"login": "nipafx"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {\n+\n+\tstatic final String KEY_ISSUE = \"Issue\";\n+\n+\t// Storage with all tests that belong to an issue <issueId, List<UniqueIdentifier>>\n+\tprivate final ConcurrentHashMap<String, List<String>> issueTestsStorage = new ConcurrentHashMap<>();\n+\n+\t// Storage with tests results of test cases <UniqueIdentifier, result>\n+\tprivate final ConcurrentHashMap<String, String> testStatusStorage = new ConcurrentHashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce008f350668d7cb1a31b4158068b9f2e1ee845b"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NTExMTM5OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOTo0MjozOFrOHws2pA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOTo0MjozOFrOHws2pA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgyODU4MA==", "bodyText": "I think we should include Execution in the name, e.g. IssueExtensionExecutionListener.", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r520828580", "createdAt": "2020-11-10T19:42:38Z", "author": {"login": "nipafx"}, "path": "src/main/java/org/junitpioneer/jupiter/issue/IssueExtensionListener.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter.issue;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+import org.junit.platform.engine.TestExecutionResult;\n+import org.junit.platform.engine.reporting.ReportEntry;\n+import org.junit.platform.launcher.TestExecutionListener;\n+import org.junit.platform.launcher.TestIdentifier;\n+import org.junit.platform.launcher.TestPlan;\n+\n+/**\n+ * <p>This listener collects the names and results of all tests, which are annotated with the {@link org.junitpioneer.jupiter.Issue} annotation.\n+ * After all tests are finished the results are provided to an {@link IssueProcessor} for further processing.</p>\n+ */\n+public class IssueExtensionListener implements TestExecutionListener {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce008f350668d7cb1a31b4158068b9f2e1ee845b"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NTEyNzkwOnYy", "diffSide": "RIGHT", "path": "src/main/module/module-info.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOTo0NzowOVrOHwtA8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOTo0NzowOVrOHwtA8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgzMTIxOA==", "bodyText": "This needs to be here for services to work on the module path:\n\tprovides org.junit.platform.launcher.TestExecutionListener\n\t\t\twith org.junitpioneer.jupiter.issue.IssueExtensionListener;\n\n(I wanted to propose a change, but I can't propose one at the end of the file, which is where this should go.)", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/361#discussion_r520831218", "createdAt": "2020-11-10T19:47:09Z", "author": {"login": "nipafx"}, "path": "src/main/module/module-info.java", "diffHunk": "@@ -2,6 +2,7 @@\n \trequires org.junit.jupiter.api;\n \trequires org.junit.jupiter.params;\n \trequires org.junit.platform.commons;\n+\trequires org.junit.platform.launcher;\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce008f350668d7cb1a31b4158068b9f2e1ee845b"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4147, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}