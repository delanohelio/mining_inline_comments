{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3Mjk2ODA4", "number": 1444, "title": "Show fields error after at least once focus has lost", "bodyText": "Description\nLEARNER-7780\n\nHide error on first-time input by the user on registration fields\nshow error once the field has lost the focus", "createdAt": "2020-07-27T17:20:18Z", "url": "https://github.com/edx/edx-app-android/pull/1444", "merged": true, "mergeCommit": {"oid": "4225d670e64f217d4c8af9e25c384942ae29d7af"}, "closed": true, "closedAt": "2020-08-04T15:36:49Z", "author": {"login": "omerhabib26"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6CvswAFqTQ1ODU5MzEzNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7oEKnABqjM2MjA3MDQwOTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NTkzMTM3", "url": "https://github.com/edx/edx-app-android/pull/1444#pullrequestreview-458593137", "createdAt": "2020-07-30T17:04:03Z", "commit": {"oid": "f6076d386d0e55397a8380ec31741058bc69e5e6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNzowNDowM1rOG5sAbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNzowNDowM1rOG5sAbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE0MzAyMQ==", "bodyText": "I think the following lines of code will cover the story requirement\n        // Add text change listener\n        mEditText.addTextChangedListener(new TextWatcher() {\n            @Override\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\n            }\n\n            @Override\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\n                // Clear Error from the field\n                if (mErrorTextView.getVisibility() == View.VISIBLE) {\n                    mErrorTextView.setText(null);\n                    mErrorTextView.setVisibility(View.GONE);\n                    mTextInputLayout.setContentDescription(null);\n                }\n            }\n\n            @Override\n            public void afterTextChanged(Editable s) {\n            }\n        });\n\n        mEditText.setOnFocusChangeListener((v, hasFocus) -> {\n            if (!hasFocus) {\n                isValidInput();\n            }\n        });", "url": "https://github.com/edx/edx-app-android/pull/1444#discussion_r463143021", "createdAt": "2020-07-30T17:04:03Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/registration/view/RegistrationEditTextView.java", "diffHunk": "@@ -92,13 +93,23 @@ public void onTextChanged(CharSequence s, int start, int before, int count) {\n                     isChangedByUser = true;\n                     return;\n                 }\n-                isValidInput();\n+                // Don't show the error until view has lost the focus at least once\n+                if (hasFocusLost) {\n+                    isValidInput();\n+                }\n             }\n \n             @Override\n             public void afterTextChanged(Editable s) {\n             }\n         });\n+\n+        mEditText.setOnFocusChangeListener((v, hasFocus) -> {\n+            if (!hasFocus) {\n+                isValidInput();\n+                hasFocusLost = true;\n+            }\n+        });\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6076d386d0e55397a8380ec31741058bc69e5e6"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwODMyMzk5", "url": "https://github.com/edx/edx-app-android/pull/1444#pullrequestreview-460832399", "createdAt": "2020-08-04T13:52:31Z", "commit": {"oid": "9a91cbb14e65c75a47caa40a775b873454e9bf43"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMzo1MjozMlrOG7hXOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMzo1MjozMlrOG7hXOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA2NTc4NQ==", "bodyText": "AutoComplete not showing error on focus out, to solve this issue we need to make the method call isValidInput();", "url": "https://github.com/edx/edx-app-android/pull/1444#discussion_r465065785", "createdAt": "2020-08-04T13:52:32Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/registration/view/RegistrationSelectView.java", "diffHunk": "@@ -87,8 +91,10 @@ public void afterTextChanged(Editable s) {\n         mInputView.setOnFocusChangeListener(new View.OnFocusChangeListener() {\n             @Override\n             public void onFocusChange(View v, boolean hasFocus) {\n-                if(hasFocus){\n+                if (hasFocus) {\n                     mInputView.showDropDown();\n+                } else {\n+                    hasFocusLost = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a91cbb14e65c75a47caa40a775b873454e9bf43"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9a3f9cd977e85a9756593132501a25a935b3822", "author": {"user": {"login": "omerhabib26", "name": "Omer Habib"}}, "url": "https://github.com/edx/edx-app-android/commit/c9a3f9cd977e85a9756593132501a25a935b3822", "committedDate": "2020-08-04T15:07:54Z", "message": "Show fields error after at least once focus has lost\n- LEARNER-7780\n- Highlight error once focus has lost on first time input\n- after once follow the previous flow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9a91cbb14e65c75a47caa40a775b873454e9bf43", "author": {"user": {"login": "omerhabib26", "name": "Omer Habib"}}, "url": "https://github.com/edx/edx-app-android/commit/9a91cbb14e65c75a47caa40a775b873454e9bf43", "committedDate": "2020-08-04T10:40:58Z", "message": "AutoCompleteTextView error highlight update on focus change"}, "afterCommit": {"oid": "c9a3f9cd977e85a9756593132501a25a935b3822", "author": {"user": {"login": "omerhabib26", "name": "Omer Habib"}}, "url": "https://github.com/edx/edx-app-android/commit/c9a3f9cd977e85a9756593132501a25a935b3822", "committedDate": "2020-08-04T15:07:54Z", "message": "Show fields error after at least once focus has lost\n- LEARNER-7780\n- Highlight error once focus has lost on first time input\n- after once follow the previous flow"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4210, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}