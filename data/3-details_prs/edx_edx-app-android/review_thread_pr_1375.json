{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4MjQxMzMz", "number": 1375, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwODowMDo0NFrODlUnMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwODoxMDo0NFrODlUw-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNDYxNjE3OnYy", "diffSide": "RIGHT", "path": "OpenEdXMobile/gradle_scripts/AndroidHelper.gradle", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwODowMDo0NFrOFyJgcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMTo0NToxOVrOFyQeGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyODg4Mg==", "bodyText": "We should avoid the package_name hard coding.", "url": "https://github.com/edx/edx-app-android/pull/1375#discussion_r388128882", "createdAt": "2020-03-05T08:00:44Z", "author": {"login": "farhan"}, "path": "OpenEdXMobile/gradle_scripts/AndroidHelper.gradle", "diffHunk": "@@ -0,0 +1,117 @@\n+import groovy.json.JsonBuilder\n+\n+class AndroidHelper {\n+\n+    static def saveProcessedConfig(project, config) {\n+        def path = project.file(\"assets/config\")\n+        path.mkdirs()\n+        def jsonWriter = new FileWriter(path.absolutePath + \"/config.json\")\n+        def builder = new JsonBuilder(config)\n+        jsonWriter.withWriter {\n+            builder.writeTo(it)\n+        }\n+    }\n+\n+    static def saveGoogleServiceJson(project, firebaseConfig) {\n+        def googleServiceJsonPath = project.projectDir.toString() + \"/google-services.json\"\n+        new FileWriter(googleServiceJsonPath).withWriter {\n+            getGoogleServicesContent(firebaseConfig).writeTo(it)\n+        }\n+    }\n+\n+    static def getGoogleServicesContent(firebaseConfig) {\n+        if (checkRequiredFields(firebaseConfig)) {\n+            def jsonBuilder = new JsonBuilder()\n+            def projectNumber = firebaseConfig.get(\"PROJECT_NUMBER\")\n+            def projectId = firebaseConfig.get(\"PROJECT_ID\")\n+            def oauthClientId = firebaseConfig.get(\"OAUTH_CLIENT_ID\")\n+            def currentKey = firebaseConfig.get(\"CURRENT_KEY\")\n+            def otherPlatformOauthClientId = firebaseConfig.get(\"OTHER_PLATFORM_OAUTH_CLIENT_ID\")\n+            def appStoreId = firebaseConfig.get(\"APP_STORE_ID\")\n+            // construct the google-services.json fields\n+            jsonBuilder {\n+                project_info {\n+                    project_number projectNumber\n+                    firebase_url \"https://$projectId\" + \".firebaseio.com\"\n+                    project_id projectId\n+                    storage_bucket projectId + \".appspot.com\"\n+                }\n+                client([{\n+                            client_info {\n+                                \"mobilesdk_app_id\" \"1:$projectNumber:android:c04089bb49270266\"\n+                                \"android_client_info\" {\n+                                    \"package_name\" \"org.edx.mobile\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f835b9f7da808418f5ffe06fa479e8ce418693fa"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI0Mjk3MQ==", "bodyText": "done.", "url": "https://github.com/edx/edx-app-android/pull/1375#discussion_r388242971", "createdAt": "2020-03-05T11:45:19Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/gradle_scripts/AndroidHelper.gradle", "diffHunk": "@@ -0,0 +1,117 @@\n+import groovy.json.JsonBuilder\n+\n+class AndroidHelper {\n+\n+    static def saveProcessedConfig(project, config) {\n+        def path = project.file(\"assets/config\")\n+        path.mkdirs()\n+        def jsonWriter = new FileWriter(path.absolutePath + \"/config.json\")\n+        def builder = new JsonBuilder(config)\n+        jsonWriter.withWriter {\n+            builder.writeTo(it)\n+        }\n+    }\n+\n+    static def saveGoogleServiceJson(project, firebaseConfig) {\n+        def googleServiceJsonPath = project.projectDir.toString() + \"/google-services.json\"\n+        new FileWriter(googleServiceJsonPath).withWriter {\n+            getGoogleServicesContent(firebaseConfig).writeTo(it)\n+        }\n+    }\n+\n+    static def getGoogleServicesContent(firebaseConfig) {\n+        if (checkRequiredFields(firebaseConfig)) {\n+            def jsonBuilder = new JsonBuilder()\n+            def projectNumber = firebaseConfig.get(\"PROJECT_NUMBER\")\n+            def projectId = firebaseConfig.get(\"PROJECT_ID\")\n+            def oauthClientId = firebaseConfig.get(\"OAUTH_CLIENT_ID\")\n+            def currentKey = firebaseConfig.get(\"CURRENT_KEY\")\n+            def otherPlatformOauthClientId = firebaseConfig.get(\"OTHER_PLATFORM_OAUTH_CLIENT_ID\")\n+            def appStoreId = firebaseConfig.get(\"APP_STORE_ID\")\n+            // construct the google-services.json fields\n+            jsonBuilder {\n+                project_info {\n+                    project_number projectNumber\n+                    firebase_url \"https://$projectId\" + \".firebaseio.com\"\n+                    project_id projectId\n+                    storage_bucket projectId + \".appspot.com\"\n+                }\n+                client([{\n+                            client_info {\n+                                \"mobilesdk_app_id\" \"1:$projectNumber:android:c04089bb49270266\"\n+                                \"android_client_info\" {\n+                                    \"package_name\" \"org.edx.mobile\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyODg4Mg=="}, "originalCommit": {"oid": "f835b9f7da808418f5ffe06fa479e8ce418693fa"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNDYxOTE0OnYy", "diffSide": "RIGHT", "path": "OpenEdXMobile/gradle_scripts/AndroidHelper.gradle", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwODowMTo1MFrOFyJiOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMTo0NToyNlrOFyQeRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyOTMzNg==", "bodyText": "We should avoid the mobilesdk_app_id value hard coding", "url": "https://github.com/edx/edx-app-android/pull/1375#discussion_r388129336", "createdAt": "2020-03-05T08:01:50Z", "author": {"login": "farhan"}, "path": "OpenEdXMobile/gradle_scripts/AndroidHelper.gradle", "diffHunk": "@@ -0,0 +1,117 @@\n+import groovy.json.JsonBuilder\n+\n+class AndroidHelper {\n+\n+    static def saveProcessedConfig(project, config) {\n+        def path = project.file(\"assets/config\")\n+        path.mkdirs()\n+        def jsonWriter = new FileWriter(path.absolutePath + \"/config.json\")\n+        def builder = new JsonBuilder(config)\n+        jsonWriter.withWriter {\n+            builder.writeTo(it)\n+        }\n+    }\n+\n+    static def saveGoogleServiceJson(project, firebaseConfig) {\n+        def googleServiceJsonPath = project.projectDir.toString() + \"/google-services.json\"\n+        new FileWriter(googleServiceJsonPath).withWriter {\n+            getGoogleServicesContent(firebaseConfig).writeTo(it)\n+        }\n+    }\n+\n+    static def getGoogleServicesContent(firebaseConfig) {\n+        if (checkRequiredFields(firebaseConfig)) {\n+            def jsonBuilder = new JsonBuilder()\n+            def projectNumber = firebaseConfig.get(\"PROJECT_NUMBER\")\n+            def projectId = firebaseConfig.get(\"PROJECT_ID\")\n+            def oauthClientId = firebaseConfig.get(\"OAUTH_CLIENT_ID\")\n+            def currentKey = firebaseConfig.get(\"CURRENT_KEY\")\n+            def otherPlatformOauthClientId = firebaseConfig.get(\"OTHER_PLATFORM_OAUTH_CLIENT_ID\")\n+            def appStoreId = firebaseConfig.get(\"APP_STORE_ID\")\n+            // construct the google-services.json fields\n+            jsonBuilder {\n+                project_info {\n+                    project_number projectNumber\n+                    firebase_url \"https://$projectId\" + \".firebaseio.com\"\n+                    project_id projectId\n+                    storage_bucket projectId + \".appspot.com\"\n+                }\n+                client([{\n+                            client_info {\n+                                \"mobilesdk_app_id\" \"1:$projectNumber:android:c04089bb49270266\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f835b9f7da808418f5ffe06fa479e8ce418693fa"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI0MzAxMg==", "bodyText": "done.", "url": "https://github.com/edx/edx-app-android/pull/1375#discussion_r388243012", "createdAt": "2020-03-05T11:45:26Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/gradle_scripts/AndroidHelper.gradle", "diffHunk": "@@ -0,0 +1,117 @@\n+import groovy.json.JsonBuilder\n+\n+class AndroidHelper {\n+\n+    static def saveProcessedConfig(project, config) {\n+        def path = project.file(\"assets/config\")\n+        path.mkdirs()\n+        def jsonWriter = new FileWriter(path.absolutePath + \"/config.json\")\n+        def builder = new JsonBuilder(config)\n+        jsonWriter.withWriter {\n+            builder.writeTo(it)\n+        }\n+    }\n+\n+    static def saveGoogleServiceJson(project, firebaseConfig) {\n+        def googleServiceJsonPath = project.projectDir.toString() + \"/google-services.json\"\n+        new FileWriter(googleServiceJsonPath).withWriter {\n+            getGoogleServicesContent(firebaseConfig).writeTo(it)\n+        }\n+    }\n+\n+    static def getGoogleServicesContent(firebaseConfig) {\n+        if (checkRequiredFields(firebaseConfig)) {\n+            def jsonBuilder = new JsonBuilder()\n+            def projectNumber = firebaseConfig.get(\"PROJECT_NUMBER\")\n+            def projectId = firebaseConfig.get(\"PROJECT_ID\")\n+            def oauthClientId = firebaseConfig.get(\"OAUTH_CLIENT_ID\")\n+            def currentKey = firebaseConfig.get(\"CURRENT_KEY\")\n+            def otherPlatformOauthClientId = firebaseConfig.get(\"OTHER_PLATFORM_OAUTH_CLIENT_ID\")\n+            def appStoreId = firebaseConfig.get(\"APP_STORE_ID\")\n+            // construct the google-services.json fields\n+            jsonBuilder {\n+                project_info {\n+                    project_number projectNumber\n+                    firebase_url \"https://$projectId\" + \".firebaseio.com\"\n+                    project_id projectId\n+                    storage_bucket projectId + \".appspot.com\"\n+                }\n+                client([{\n+                            client_info {\n+                                \"mobilesdk_app_id\" \"1:$projectNumber:android:c04089bb49270266\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyOTMzNg=="}, "originalCommit": {"oid": "f835b9f7da808418f5ffe06fa479e8ce418693fa"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNDY0MTIzOnYy", "diffSide": "RIGHT", "path": "OpenEdXMobile/gradle_scripts/AndroidHelper.gradle", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwODoxMDo0NFrOFyJvyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMTo0NTozMlrOFyQeZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEzMjgxMA==", "bodyText": "Let's put the minimum possible values required for our features.\nTry avoiding the info specially iOS-specific info and check if we can minimize the fields.", "url": "https://github.com/edx/edx-app-android/pull/1375#discussion_r388132810", "createdAt": "2020-03-05T08:10:44Z", "author": {"login": "farhan"}, "path": "OpenEdXMobile/gradle_scripts/AndroidHelper.gradle", "diffHunk": "@@ -0,0 +1,117 @@\n+import groovy.json.JsonBuilder\n+\n+class AndroidHelper {\n+\n+    static def saveProcessedConfig(project, config) {\n+        def path = project.file(\"assets/config\")\n+        path.mkdirs()\n+        def jsonWriter = new FileWriter(path.absolutePath + \"/config.json\")\n+        def builder = new JsonBuilder(config)\n+        jsonWriter.withWriter {\n+            builder.writeTo(it)\n+        }\n+    }\n+\n+    static def saveGoogleServiceJson(project, firebaseConfig) {\n+        def googleServiceJsonPath = project.projectDir.toString() + \"/google-services.json\"\n+        new FileWriter(googleServiceJsonPath).withWriter {\n+            getGoogleServicesContent(firebaseConfig).writeTo(it)\n+        }\n+    }\n+\n+    static def getGoogleServicesContent(firebaseConfig) {\n+        if (checkRequiredFields(firebaseConfig)) {\n+            def jsonBuilder = new JsonBuilder()\n+            def projectNumber = firebaseConfig.get(\"PROJECT_NUMBER\")\n+            def projectId = firebaseConfig.get(\"PROJECT_ID\")\n+            def oauthClientId = firebaseConfig.get(\"OAUTH_CLIENT_ID\")\n+            def currentKey = firebaseConfig.get(\"CURRENT_KEY\")\n+            def otherPlatformOauthClientId = firebaseConfig.get(\"OTHER_PLATFORM_OAUTH_CLIENT_ID\")\n+            def appStoreId = firebaseConfig.get(\"APP_STORE_ID\")\n+            // construct the google-services.json fields\n+            jsonBuilder {\n+                project_info {\n+                    project_number projectNumber\n+                    firebase_url \"https://$projectId\" + \".firebaseio.com\"\n+                    project_id projectId\n+                    storage_bucket projectId + \".appspot.com\"\n+                }\n+                client([{\n+                            client_info {\n+                                \"mobilesdk_app_id\" \"1:$projectNumber:android:c04089bb49270266\"\n+                                \"android_client_info\" {\n+                                    \"package_name\" \"org.edx.mobile\"\n+                                }\n+                            }\n+                            oauth_client([\n+                                    {\n+                                        \"client_id\" oauthClientId\n+                                        \"client_type\" 3\n+                                    }\n+                            ])\n+                            api_key(\n+                                    [{\n+                                         \"current_key\" currentKey\n+                                     }])\n+                            services {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f835b9f7da808418f5ffe06fa479e8ce418693fa"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI0MzA0NA==", "bodyText": "We can remove the code to create the services field for the google-services.json, otherwise produce some issues while emitting the analytics event.", "url": "https://github.com/edx/edx-app-android/pull/1375#discussion_r388243044", "createdAt": "2020-03-05T11:45:32Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/gradle_scripts/AndroidHelper.gradle", "diffHunk": "@@ -0,0 +1,117 @@\n+import groovy.json.JsonBuilder\n+\n+class AndroidHelper {\n+\n+    static def saveProcessedConfig(project, config) {\n+        def path = project.file(\"assets/config\")\n+        path.mkdirs()\n+        def jsonWriter = new FileWriter(path.absolutePath + \"/config.json\")\n+        def builder = new JsonBuilder(config)\n+        jsonWriter.withWriter {\n+            builder.writeTo(it)\n+        }\n+    }\n+\n+    static def saveGoogleServiceJson(project, firebaseConfig) {\n+        def googleServiceJsonPath = project.projectDir.toString() + \"/google-services.json\"\n+        new FileWriter(googleServiceJsonPath).withWriter {\n+            getGoogleServicesContent(firebaseConfig).writeTo(it)\n+        }\n+    }\n+\n+    static def getGoogleServicesContent(firebaseConfig) {\n+        if (checkRequiredFields(firebaseConfig)) {\n+            def jsonBuilder = new JsonBuilder()\n+            def projectNumber = firebaseConfig.get(\"PROJECT_NUMBER\")\n+            def projectId = firebaseConfig.get(\"PROJECT_ID\")\n+            def oauthClientId = firebaseConfig.get(\"OAUTH_CLIENT_ID\")\n+            def currentKey = firebaseConfig.get(\"CURRENT_KEY\")\n+            def otherPlatformOauthClientId = firebaseConfig.get(\"OTHER_PLATFORM_OAUTH_CLIENT_ID\")\n+            def appStoreId = firebaseConfig.get(\"APP_STORE_ID\")\n+            // construct the google-services.json fields\n+            jsonBuilder {\n+                project_info {\n+                    project_number projectNumber\n+                    firebase_url \"https://$projectId\" + \".firebaseio.com\"\n+                    project_id projectId\n+                    storage_bucket projectId + \".appspot.com\"\n+                }\n+                client([{\n+                            client_info {\n+                                \"mobilesdk_app_id\" \"1:$projectNumber:android:c04089bb49270266\"\n+                                \"android_client_info\" {\n+                                    \"package_name\" \"org.edx.mobile\"\n+                                }\n+                            }\n+                            oauth_client([\n+                                    {\n+                                        \"client_id\" oauthClientId\n+                                        \"client_type\" 3\n+                                    }\n+                            ])\n+                            api_key(\n+                                    [{\n+                                         \"current_key\" currentKey\n+                                     }])\n+                            services {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEzMjgxMA=="}, "originalCommit": {"oid": "f835b9f7da808418f5ffe06fa479e8ce418693fa"}, "originalPosition": 56}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 494, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}