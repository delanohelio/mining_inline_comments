{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNDAxNDQy", "number": 1385, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMTozNzoxNVrODp1dXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxMDo0NDoyN1rODteifQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MTk0MDc5OnYy", "diffSide": "RIGHT", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/services/CourseManager.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMTozNzoxNlrOF5QV2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMTozNzoxNlrOF5QV2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU4MDg4OA==", "bodyText": "We are duplicating the functionality of this function. It should be removed and the following should be used.\n\n  \n    \n      edx-app-android/OpenEdXMobile/src/main/java/org/edx/mobile/course/CourseAPI.java\n    \n    \n        Lines 118 to 131\n      in\n      c897ba3\n    \n    \n    \n    \n\n        \n          \n               /** \n        \n\n        \n          \n                * @param courseId The course ID. \n        \n\n        \n          \n                * @return The course identified by the provided ID if available from the cache, null if no \n        \n\n        \n          \n                *         course is found. \n        \n\n        \n          \n                */ \n        \n\n        \n          \n               @Nullable \n        \n\n        \n          \n               public EnrolledCoursesResponse getCourseById(@NonNull final String courseId) throws Exception { \n        \n\n        \n          \n                   for (EnrolledCoursesResponse r : executeStrict(getEnrolledCoursesFromCache())) { \n        \n\n        \n          \n                       if (r.getCourse().getId().equals(courseId)) { \n        \n\n        \n          \n                           return r; \n        \n\n        \n          \n                       } \n        \n\n        \n          \n                   } \n        \n\n        \n          \n                   return null; \n        \n\n        \n          \n               }", "url": "https://github.com/edx/edx-app-android/pull/1385#discussion_r395580888", "createdAt": "2020-03-20T11:37:16Z", "author": {"login": "farhan"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/services/CourseManager.java", "diffHunk": "@@ -134,4 +139,26 @@ public boolean apply(CourseComponent courseComponent) {\n             }\n         });\n     }\n+\n+    /**\n+     * Obtain the enrolled courses data from app level cache and then find the specified course.\n+     *\n+     * @param courseId    Id of the course.\n+     * @return Searched out the course. In case course is not present in\n+     * app level cache it will return false.\n+     */\n+    public Boolean getEnrolledCourseByIdFromAppLevelCache(@NonNull final String courseId) {\n+        try {\n+            List<EnrolledCoursesResponse> enrolledCoursesResponse =\n+                    executeStrict(courseApi.getEnrolledCoursesFromCache());\n+            for (EnrolledCoursesResponse course : enrolledCoursesResponse) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92cd5c289e290b9232c41a0acb4a73df11b7eae4"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MTk0NjkwOnYy", "diffSide": "RIGHT", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/services/CourseManager.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMTozOTo0NVrOF5QZ1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMTozOTo0NVrOF5QZ1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU4MTkwOQ==", "bodyText": "Function doc is not properly indented.\nPro Tip: Use \"Option + Command + L\" short cut key.\nAlso content of the comment needs to be improved", "url": "https://github.com/edx/edx-app-android/pull/1385#discussion_r395581909", "createdAt": "2020-03-20T11:39:45Z", "author": {"login": "farhan"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/services/CourseManager.java", "diffHunk": "@@ -134,4 +139,26 @@ public boolean apply(CourseComponent courseComponent) {\n             }\n         });\n     }\n+\n+    /**\n+     * Obtain the enrolled courses data from app level cache and then find the specified course.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92cd5c289e290b9232c41a0acb4a73df11b7eae4"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5MDEyODYxOnYy", "diffSide": "RIGHT", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/util/links/DefaultActionListener.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxMDo0NDoyN1rOF-6_0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxMDo0NDoyN1rOF-6_0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTUyMjY0MQ==", "bodyText": "it's better to check if the course is already enrolled before the service call of course enrollment and move to the course dashboard without calling an extra service.", "url": "https://github.com/edx/edx-app-android/pull/1385#discussion_r401522641", "createdAt": "2020-04-01T10:44:27Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/util/links/DefaultActionListener.java", "diffHunk": "@@ -162,7 +162,10 @@ public void onClickEnroll(@NonNull final String courseId, final boolean emailOpt\n                     protected void onResponse(@NonNull final ResponseBody responseBody) {\n                         super.onResponse(responseBody);\n                         logger.debug(\"Enrollment successful: \" + courseId);\n-                        Toast.makeText(activity, activity.getString(R.string.you_are_now_enrolled), Toast.LENGTH_SHORT).show();\n+                        Toast.makeText(activity, activity.getString(\n+                                courseApi.isCourseEnrolled(courseId) ?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba7ae5cf8491adec68e08e8e38099706b1f43d7e"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 500, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}