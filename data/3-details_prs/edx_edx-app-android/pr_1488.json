{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwOTE1OTU5", "number": 1488, "title": "Implement Analytics events for PLS work", "bodyText": "Description\nLEARNER-8001\n\nAdded 3 events as follow:\n\nPLS Banner Viewed\nPLS Shift Button Tapped\nPLS Shift Dates", "createdAt": "2020-12-02T10:31:35Z", "url": "https://github.com/edx/edx-app-android/pull/1488", "merged": true, "mergeCommit": {"oid": "aeaf571339a92faca16094de6c404747d8332ee9"}, "closed": true, "closedAt": "2020-12-08T09:03:23Z", "author": {"login": "omerhabib26"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiMrCoABqjQwNjE3OTI3ODQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkFf3BABqjQwODM0MzE0OTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "97a1151764be2755698f4f0be9891d4d54b369e8", "author": {"user": {"login": "omerhabib26", "name": "Omer Habib"}}, "url": "https://github.com/edx/edx-app-android/commit/97a1151764be2755698f4f0be9891d4d54b369e8", "committedDate": "2020-12-02T10:27:37Z", "message": "Implement Analytics events for PLS work\n- LEARNER-8001\n- Added 3 events as follow:\n  - PLS Banner Viewed\n  - PLS Shift Button Tapped\n  - PLS Shift Dates"}, "afterCommit": {"oid": "1c89003222e7ce422988da88d63528f46be9bad9", "author": {"user": {"login": "omerhabib26", "name": "Omer Habib"}}, "url": "https://github.com/edx/edx-app-android/commit/1c89003222e7ce422988da88d63528f46be9bad9", "committedDate": "2020-12-02T11:15:48Z", "message": "Implement Analytics events for PLS work\n- LEARNER-8001\n- Added 3 events as follow:\n  - PLS Banner Viewed\n  - PLS Shift Button Tapped\n  - PLS Shift Dates"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "012eb2b90dd627431c0e60cf3f071d58f7663562", "author": {"user": {"login": "farhan-arshad-dev", "name": "Farhan Arshad"}}, "url": "https://github.com/edx/edx-app-android/commit/012eb2b90dd627431c0e60cf3f071d58f7663562", "committedDate": "2020-12-04T11:37:00Z", "message": "Use segment destination middleware for Firebase integration (#1483)\n\n- LEARNER-8034"}, "afterCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942", "author": {"user": {"login": "omerhabib26", "name": "Omer Habib"}}, "url": "https://github.com/edx/edx-app-android/commit/01fb143f99acdffd1bd41c245bca5045608a5942", "committedDate": "2020-12-04T12:08:00Z", "message": "Implement Analytics events for PLS work\n- LEARNER-8001\n- Added 3 events as follow:\n  - PLS Banner Viewed\n  - PLS Shift Button Tapped\n  - PLS Shift Dates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NzExMjE0", "url": "https://github.com/edx/edx-app-android/pull/1488#pullrequestreview-544711214", "createdAt": "2020-12-04T07:27:53Z", "commit": {"oid": "1c89003222e7ce422988da88d63528f46be9bad9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNzoyNzo1NFrOH_EHPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMDo0NzowN1rOIAguEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg4OTcyNQ==", "bodyText": "IMO Track the PLS Course Dates Banner appearance is more suitable here.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r535889725", "createdAt": "2020-12-04T07:27:54Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -434,6 +434,39 @@ void trackBulkDownloadSwitchOn(@NonNull String courseId, int totalDownloadableVi\n     void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String connectionState,\n                                           @NonNull String playMedium);\n \n+    /**\n+     * Track the PLS Course Dates Banner", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c89003222e7ce422988da88d63528f46be9bad9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkyNTc0NA==", "bodyText": "The screen name to track -> The screen name where banner appears.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r535925744", "createdAt": "2020-12-04T08:38:36Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -434,6 +434,39 @@ void trackBulkDownloadSwitchOn(@NonNull String courseId, int totalDownloadableVi\n     void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String connectionState,\n                                           @NonNull String playMedium);\n \n+    /**\n+     * Track the PLS Course Dates Banner\n+     *\n+     * @param biValue    biValue of course date banner type\n+     * @param courseId   course id of the course we are viewing\n+     * @param courseMode course mode of the course we are viewing\n+     * @param screenName The screen name to track", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c89003222e7ce422988da88d63528f46be9bad9"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkyNjk5NA==", "bodyText": "IMO Track the PLS Course Dates Shift Dates Button Tapped.  -> Track the Shift Dates button tapped on PLS Course Dates Banner", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r535926994", "createdAt": "2020-12-04T08:40:48Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -434,6 +434,39 @@ void trackBulkDownloadSwitchOn(@NonNull String courseId, int totalDownloadableVi\n     void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String connectionState,\n                                           @NonNull String playMedium);\n \n+    /**\n+     * Track the PLS Course Dates Banner\n+     *\n+     * @param biValue    biValue of course date banner type\n+     * @param courseId   course id of the course we are viewing\n+     * @param courseMode course mode of the course we are viewing\n+     * @param screenName The screen name to track\n+     * @param bannerType Type of course date banner\n+     */\n+    void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String courseMode,\n+                                   @NonNull String screenName, @NonNull String bannerType);\n+\n+    /**\n+     * Track the PLS Course Dates Shift Dates Button Tapped", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c89003222e7ce422988da88d63528f46be9bad9"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkyNzM0OA==", "bodyText": "same.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r535927348", "createdAt": "2020-12-04T08:41:22Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -434,6 +434,39 @@ void trackBulkDownloadSwitchOn(@NonNull String courseId, int totalDownloadableVi\n     void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String connectionState,\n                                           @NonNull String playMedium);\n \n+    /**\n+     * Track the PLS Course Dates Banner\n+     *\n+     * @param biValue    biValue of course date banner type\n+     * @param courseId   course id of the course we are viewing\n+     * @param courseMode course mode of the course we are viewing\n+     * @param screenName The screen name to track\n+     * @param bannerType Type of course date banner\n+     */\n+    void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String courseMode,\n+                                   @NonNull String screenName, @NonNull String bannerType);\n+\n+    /**\n+     * Track the PLS Course Dates Shift Dates Button Tapped\n+     *\n+     * @param courseId   course id of the course we are viewing\n+     * @param courseMode course mode of the course we are viewing\n+     * @param screenName The screen name to track", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c89003222e7ce422988da88d63528f46be9bad9"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkyNzk2MA==", "bodyText": "I think trackPLSShiftButtonTapped is enough.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r535927960", "createdAt": "2020-12-04T08:42:19Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -434,6 +434,39 @@ void trackBulkDownloadSwitchOn(@NonNull String courseId, int totalDownloadableVi\n     void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String connectionState,\n                                           @NonNull String playMedium);\n \n+    /**\n+     * Track the PLS Course Dates Banner\n+     *\n+     * @param biValue    biValue of course date banner type\n+     * @param courseId   course id of the course we are viewing\n+     * @param courseMode course mode of the course we are viewing\n+     * @param screenName The screen name to track\n+     * @param bannerType Type of course date banner\n+     */\n+    void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String courseMode,\n+                                   @NonNull String screenName, @NonNull String bannerType);\n+\n+    /**\n+     * Track the PLS Course Dates Shift Dates Button Tapped\n+     *\n+     * @param courseId   course id of the course we are viewing\n+     * @param courseMode course mode of the course we are viewing\n+     * @param screenName The screen name to track\n+     */\n+    void trackPLSCourseDatesShiftButtonTapped(@NonNull String courseId, @NonNull String courseMode,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c89003222e7ce422988da88d63528f46be9bad9"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkyOTgyMg==", "bodyText": "IMO Track the PLS Course Dates Shift response -> Track that PLS Course Dates Shifted successfully or not.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r535929822", "createdAt": "2020-12-04T08:45:12Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -434,6 +434,39 @@ void trackBulkDownloadSwitchOn(@NonNull String courseId, int totalDownloadableVi\n     void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String connectionState,\n                                           @NonNull String playMedium);\n \n+    /**\n+     * Track the PLS Course Dates Banner\n+     *\n+     * @param biValue    biValue of course date banner type\n+     * @param courseId   course id of the course we are viewing\n+     * @param courseMode course mode of the course we are viewing\n+     * @param screenName The screen name to track\n+     * @param bannerType Type of course date banner\n+     */\n+    void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String courseMode,\n+                                   @NonNull String screenName, @NonNull String bannerType);\n+\n+    /**\n+     * Track the PLS Course Dates Shift Dates Button Tapped\n+     *\n+     * @param courseId   course id of the course we are viewing\n+     * @param courseMode course mode of the course we are viewing\n+     * @param screenName The screen name to track\n+     */\n+    void trackPLSCourseDatesShiftButtonTapped(@NonNull String courseId, @NonNull String courseMode,\n+                                              @NonNull String screenName);\n+\n+    /**\n+     * Track the PLS Course Dates Shift response", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c89003222e7ce422988da88d63528f46be9bad9"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkyOTkwNQ==", "bodyText": "same.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r535929905", "createdAt": "2020-12-04T08:45:19Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -434,6 +434,39 @@ void trackBulkDownloadSwitchOn(@NonNull String courseId, int totalDownloadableVi\n     void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String connectionState,\n                                           @NonNull String playMedium);\n \n+    /**\n+     * Track the PLS Course Dates Banner\n+     *\n+     * @param biValue    biValue of course date banner type\n+     * @param courseId   course id of the course we are viewing\n+     * @param courseMode course mode of the course we are viewing\n+     * @param screenName The screen name to track\n+     * @param bannerType Type of course date banner\n+     */\n+    void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String courseMode,\n+                                   @NonNull String screenName, @NonNull String bannerType);\n+\n+    /**\n+     * Track the PLS Course Dates Shift Dates Button Tapped\n+     *\n+     * @param courseId   course id of the course we are viewing\n+     * @param courseMode course mode of the course we are viewing\n+     * @param screenName The screen name to track\n+     */\n+    void trackPLSCourseDatesShiftButtonTapped(@NonNull String courseId, @NonNull String courseMode,\n+                                              @NonNull String screenName);\n+\n+    /**\n+     * Track the PLS Course Dates Shift response\n+     *\n+     * @param courseId   course id of the course we are viewing\n+     * @param courseMode course mode of the course we are viewing\n+     * @param screenName The screen name to track\n+     * @param isSuccess  Does the shifted successful or not", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c89003222e7ce422988da88d63528f46be9bad9"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkzNjIzNQ==", "bodyText": "The decided screen name are {course_dashboard | dates_screen | assignments_screen}", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r535936235", "createdAt": "2020-12-04T08:55:10Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -635,6 +682,7 @@ void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String\n         String COURSE_DATES = \"Course Dates\";\n         String SECTION_OUTLINE = \"Section Outline\";\n         String UNIT_DETAIL = \"Unit Detail\";\n+        String COURSE_UNIT_ASSIGNMENT = \"Course Assignment\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c89003222e7ce422988da88d63528f46be9bad9"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA1ODQzOQ==", "bodyText": "IMO enrolmentMode is more suitable here.\n* @param enrolmentMode enrolment mode of the course where banner appears.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r536058439", "createdAt": "2020-12-04T12:17:20Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -434,6 +434,39 @@ void trackBulkDownloadSwitchOn(@NonNull String courseId, int totalDownloadableVi\n     void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String connectionState,\n                                           @NonNull String playMedium);\n \n+    /**\n+     * Track the PLS Course Dates Banner\n+     *\n+     * @param biValue    biValue of course date banner type\n+     * @param courseId   course id of the course we are viewing\n+     * @param courseMode course mode of the course we are viewing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA1OTc5MQ==", "bodyText": "no need to add @NonNull with  boolean isSuccess.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r536059791", "createdAt": "2020-12-04T12:19:50Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/AnalyticsRegistry.java", "diffHunk": "@@ -439,4 +439,29 @@ public void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull\n             service.trackCastDeviceConnectionChanged(eventName, connectionState, playMedium);\n         }\n     }\n+\n+    @Override\n+    public void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId,\n+                                          @NonNull String courseMode, @NonNull String screenName,\n+                                          @NonNull String bannerType) {\n+        for (Analytics service : services) {\n+            service.trackPLSCourseDatesBanner(biValue, courseId, courseMode, screenName, bannerType);\n+        }\n+    }\n+\n+    @Override\n+    public void trackPLSCourseDatesShiftButtonTapped(@NonNull String courseId, @NonNull String courseMode,\n+                                                     @NonNull String screenName) {\n+        for (Analytics service : services) {\n+            service.trackPLSCourseDatesShiftButtonTapped(courseId, courseMode, screenName);\n+        }\n+    }\n+\n+    @Override\n+    public void trackPLSCourseDatesShift(@NonNull String courseId, @NonNull String courseMode,\n+                                         @NonNull String screenName, @NonNull boolean isSuccess) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI5NDEzNQ==", "bodyText": "category: course_dates is missing.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r537294135", "createdAt": "2020-12-07T07:50:06Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/FirebaseAnalytics.java", "diffHunk": "@@ -621,4 +621,34 @@ public void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull\n         }\n         logFirebaseEvent(event.getName(), event.getBundle());\n     }\n+\n+    @Override\n+    public void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String courseMode, @NonNull String screenName, @NonNull String bannerType) {\n+        final FirebaseEvent event = new FirebaseEvent(Events.PLS_BANNER_VIEWED, biValue);\n+        event.putCourseId(courseId);\n+        event.putString(Keys.MODE, courseMode);\n+        event.putString(Keys.SCREEN_NAME, screenName);\n+        event.putString(Keys.BANNER_TYPE, bannerType);\n+        logFirebaseEvent(event.getName(), event.getBundle());\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI5ODMwOQ==", "bodyText": "same category: course_dates is missing.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r537298309", "createdAt": "2020-12-07T07:58:06Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/FirebaseAnalytics.java", "diffHunk": "@@ -621,4 +621,34 @@ public void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull\n         }\n         logFirebaseEvent(event.getName(), event.getBundle());\n     }\n+\n+    @Override\n+    public void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String courseMode, @NonNull String screenName, @NonNull String bannerType) {\n+        final FirebaseEvent event = new FirebaseEvent(Events.PLS_BANNER_VIEWED, biValue);\n+        event.putCourseId(courseId);\n+        event.putString(Keys.MODE, courseMode);\n+        event.putString(Keys.SCREEN_NAME, screenName);\n+        event.putString(Keys.BANNER_TYPE, bannerType);\n+        logFirebaseEvent(event.getName(), event.getBundle());\n+    }\n+\n+    @Override\n+    public void trackPLSCourseDatesShiftButtonTapped(@NonNull String courseId, @NonNull String courseMode, @NonNull String screenName) {\n+        final FirebaseEvent event = new FirebaseEvent(Events.PLS_SHIFT_DATES_BUTTON_TAPPED);\n+        event.putCourseId(courseId);\n+        event.putString(Keys.MODE, courseMode);\n+        event.putString(Keys.SCREEN_NAME, screenName);\n+        event.putString(Keys.CATEGORY, Values.COURSE_DATES);\n+        logFirebaseEvent(event.getName(), event.getBundle());\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzMwNDIwNw==", "bodyText": "same category: course_dates is missing.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r537304207", "createdAt": "2020-12-07T08:09:29Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/FirebaseAnalytics.java", "diffHunk": "@@ -621,4 +621,34 @@ public void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull\n         }\n         logFirebaseEvent(event.getName(), event.getBundle());\n     }\n+\n+    @Override\n+    public void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String courseMode, @NonNull String screenName, @NonNull String bannerType) {\n+        final FirebaseEvent event = new FirebaseEvent(Events.PLS_BANNER_VIEWED, biValue);\n+        event.putCourseId(courseId);\n+        event.putString(Keys.MODE, courseMode);\n+        event.putString(Keys.SCREEN_NAME, screenName);\n+        event.putString(Keys.BANNER_TYPE, bannerType);\n+        logFirebaseEvent(event.getName(), event.getBundle());\n+    }\n+\n+    @Override\n+    public void trackPLSCourseDatesShiftButtonTapped(@NonNull String courseId, @NonNull String courseMode, @NonNull String screenName) {\n+        final FirebaseEvent event = new FirebaseEvent(Events.PLS_SHIFT_DATES_BUTTON_TAPPED);\n+        event.putCourseId(courseId);\n+        event.putString(Keys.MODE, courseMode);\n+        event.putString(Keys.SCREEN_NAME, screenName);\n+        event.putString(Keys.CATEGORY, Values.COURSE_DATES);\n+        logFirebaseEvent(event.getName(), event.getBundle());\n+    }\n+\n+    @Override\n+    public void trackPLSCourseDatesShift(@NonNull String courseId, @NonNull String courseMode, @NonNull String screenName, @NonNull boolean isSuccess) {\n+        final FirebaseEvent event = new FirebaseEvent(Events.PLS_SHIFT_DATES);\n+        event.putCourseId(courseId);\n+        event.putString(Keys.MODE, courseMode);\n+        event.putString(Keys.SCREEN_NAME, screenName);\n+        event.putBoolean(Keys.SUCCESS, isSuccess);\n+        logFirebaseEvent(event.getName(), event.getBundle());\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzMwNTU5OQ==", "bodyText": "aEvent.properties.putValue(Keys.CATEGORY, \"course_dates\");\n\nis missing.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r537305599", "createdAt": "2020-12-07T08:12:08Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/SegmentAnalytics.java", "diffHunk": "@@ -894,4 +894,35 @@ public void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull\n         }\n         trackSegmentEvent(eventName, aEvent.properties);\n     }\n+\n+    @Override\n+    public void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String courseMode, @NonNull String screenName, @NonNull String bannerType) {\n+        final SegmentEvent aEvent = new SegmentEvent();\n+        aEvent.properties.putValue(Keys.NAME, biValue);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzMwNTc0Mw==", "bodyText": "aEvent.properties.putValue(Keys.CATEGORY, \"course_dates\");\n\nis missing.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r537305743", "createdAt": "2020-12-07T08:12:20Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/SegmentAnalytics.java", "diffHunk": "@@ -894,4 +894,35 @@ public void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull\n         }\n         trackSegmentEvent(eventName, aEvent.properties);\n     }\n+\n+    @Override\n+    public void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String courseMode, @NonNull String screenName, @NonNull String bannerType) {\n+        final SegmentEvent aEvent = new SegmentEvent();\n+        aEvent.properties.putValue(Keys.NAME, biValue);\n+        aEvent.data.putValue(Keys.COURSE_ID, courseId);\n+        aEvent.data.putValue(Keys.MODE, courseMode);\n+        aEvent.data.putValue(Keys.SCREEN_NAME, screenName);\n+        aEvent.data.putValue(Keys.BANNER_TYPE, bannerType);\n+        trackSegmentEvent(Events.PLS_BANNER_VIEWED, aEvent.properties);\n+    }\n+\n+    @Override\n+    public void trackPLSCourseDatesShiftButtonTapped(@NonNull String courseId, @NonNull String courseMode, @NonNull String screenName) {\n+        final SegmentEvent aEvent = new SegmentEvent();\n+        aEvent.properties.putValue(Keys.CATEGORY, Values.COURSE_DATES);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzMwNTgxMw==", "bodyText": "aEvent.properties.putValue(Keys.CATEGORY, \"course_dates\");\n\nis missing.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r537305813", "createdAt": "2020-12-07T08:12:27Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/SegmentAnalytics.java", "diffHunk": "@@ -894,4 +894,35 @@ public void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull\n         }\n         trackSegmentEvent(eventName, aEvent.properties);\n     }\n+\n+    @Override\n+    public void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String courseMode, @NonNull String screenName, @NonNull String bannerType) {\n+        final SegmentEvent aEvent = new SegmentEvent();\n+        aEvent.properties.putValue(Keys.NAME, biValue);\n+        aEvent.data.putValue(Keys.COURSE_ID, courseId);\n+        aEvent.data.putValue(Keys.MODE, courseMode);\n+        aEvent.data.putValue(Keys.SCREEN_NAME, screenName);\n+        aEvent.data.putValue(Keys.BANNER_TYPE, bannerType);\n+        trackSegmentEvent(Events.PLS_BANNER_VIEWED, aEvent.properties);\n+    }\n+\n+    @Override\n+    public void trackPLSCourseDatesShiftButtonTapped(@NonNull String courseId, @NonNull String courseMode, @NonNull String screenName) {\n+        final SegmentEvent aEvent = new SegmentEvent();\n+        aEvent.properties.putValue(Keys.CATEGORY, Values.COURSE_DATES);\n+        aEvent.data.putValue(Keys.COURSE_ID, courseId);\n+        aEvent.data.putValue(Keys.MODE, courseMode);\n+        aEvent.data.putValue(Keys.SCREEN_NAME, screenName);\n+        trackSegmentEvent(Events.PLS_SHIFT_DATES_BUTTON_TAPPED, aEvent.properties);\n+    }\n+\n+    @Override\n+    public void trackPLSCourseDatesShift(@NonNull String courseId, @NonNull String courseMode, @NonNull String screenName, @NonNull boolean isSuccess) {\n+        final SegmentEvent aEvent = new SegmentEvent();\n+        aEvent.data.putValue(Keys.COURSE_ID, courseId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzMyMjc3Mg==", "bodyText": "We can use the following statment instated of adding a parameter for cours_id.\n            minifiedUnit.setCourseId(courseData.getCourse().getId());", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r537322772", "createdAt": "2020-12-07T08:41:19Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/adapters/CourseUnitPagerAdapter.java", "diffHunk": "@@ -114,7 +114,8 @@ else if (isCourseUnitVideo(minifiedUnit)) {\n                 minifiedUnit.getType() != BlockType.PROBLEM) {\n             unitFragment = CourseUnitEmptyFragment.newInstance(minifiedUnit);\n         } else if (minifiedUnit instanceof HtmlBlockModel) {\n-            unitFragment = CourseUnitWebViewFragment.newInstance((HtmlBlockModel) minifiedUnit);\n+            unitFragment = CourseUnitWebViewFragment.newInstance((HtmlBlockModel) minifiedUnit,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzM5MTAyNw==", "bodyText": "better to use putString.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r537391027", "createdAt": "2020-12-07T10:23:14Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/CourseUnitWebViewFragment.java", "diffHunk": "@@ -49,11 +50,14 @@\n     private CourseDateViewModel courseDateViewModel;\n     private PreLoadingListener preloadingListener;\n     private boolean isPageLoading = false;\n+    private String courseId = \"\", courseMode = \"\";\n \n-    public static CourseUnitWebViewFragment newInstance(HtmlBlockModel unit) {\n+    public static CourseUnitWebViewFragment newInstance(HtmlBlockModel unit, String courseId, String courseMode) {\n         CourseUnitWebViewFragment fragment = new CourseUnitWebViewFragment();\n         Bundle args = new Bundle();\n         args.putSerializable(Router.EXTRA_COURSE_UNIT, unit);\n+        args.putSerializable(Router.EXTRA_COURSE_ID, courseId);\n+        args.putSerializable(Router.EXTRA_COURSE_MODE, courseMode);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzM5NzE3Mg==", "bodyText": "remove courseId after getting data from the unit.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r537397172", "createdAt": "2020-12-07T10:32:27Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/CourseUnitWebViewFragment.java", "diffHunk": "@@ -49,11 +50,14 @@\n     private CourseDateViewModel courseDateViewModel;\n     private PreLoadingListener preloadingListener;\n     private boolean isPageLoading = false;\n+    private String courseId = \"\", courseMode = \"\";\n \n-    public static CourseUnitWebViewFragment newInstance(HtmlBlockModel unit) {\n+    public static CourseUnitWebViewFragment newInstance(HtmlBlockModel unit, String courseId, String courseMode) {\n         CourseUnitWebViewFragment fragment = new CourseUnitWebViewFragment();\n         Bundle args = new Bundle();\n         args.putSerializable(Router.EXTRA_COURSE_UNIT, unit);\n+        args.putSerializable(Router.EXTRA_COURSE_ID, courseId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQwNjk5NA==", "bodyText": "Make a separate method to initialize the courseData.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r537406994", "createdAt": "2020-12-07T10:47:07Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/test/java/org/edx/mobile/view/CourseUnitWebViewFragmentTest.java", "diffHunk": "@@ -28,14 +28,15 @@\n import static org.junit.Assert.assertTrue;\n \n public class CourseUnitWebViewFragmentTest extends UiTest {\n+\n+    EnrolledCoursesResponse courseData;\n     /**\n      * Method for iterating through the mock course response data, and\n      * returning the first video block leaf.\n      *\n      * @return The first {@link HtmlBlockModel} leaf in the mock course data\n      */\n     private HtmlBlockModel getHtmlUnit() throws CourseContentNotValidException {\n-        EnrolledCoursesResponse courseData;\n         try {\n             courseData = executeStrict(courseAPI.getEnrolledCourses()).get(0);\n         } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MzAxODAw", "url": "https://github.com/edx/edx-app-android/pull/1488#pullrequestreview-546301800", "createdAt": "2020-12-07T16:11:55Z", "commit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjoxMTo1NVrOIAuZog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjoxMTo1NVrOIAuZog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYzMTEzOA==", "bodyText": "Replace with the following code otherwise triger tap analytics on setting up the banner instated of button click.\nbutton.setOnClickListener { v ->\n                    clickListener.onClick(v)\n                    analyticsRegistry.trackPLSCourseDatesShiftButtonTapped(courseID, courseMode, screenName)\n                }", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r537631138", "createdAt": "2020-12-07T16:11:55Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/util/CourseDateUtil.kt", "diffHunk": "@@ -8,39 +8,62 @@ import android.widget.TextView\n import org.edx.mobile.R\n import org.edx.mobile.model.course.CourseBannerInfoModel\n import org.edx.mobile.model.course.CourseBannerType\n+import org.edx.mobile.module.analytics.Analytics\n+import org.edx.mobile.module.analytics.AnalyticsRegistry\n \n /**\n  * Utils class to populate the CourseDates banner view\n  */\n object CourseDateUtil {\n \n-    fun setupCourseDatesBanner(view: View, courseBannerInfoModel: CourseBannerInfoModel, clickListener: View.OnClickListener) {\n+    fun setupCourseDatesBanner(view: View, courseID: String, courseMode: String, screenName: String,\n+                               analyticsRegistry: AnalyticsRegistry, courseBannerInfoModel: CourseBannerInfoModel,\n+                               clickListener: View.OnClickListener) {\n         val context = view.context as Context\n         val textView = view.findViewById(R.id.banner_info) as TextView\n         val button = view.findViewById(R.id.btn_shift_dates) as Button\n         var buttonText = \"\"\n+        var bannerType = \"\"\n+        var biValue = \"\"\n         // Currently we are only handling RESET_DATES case,\n         // TODO UPGRADE_TO_GRADED & UPGRADE_TO_RESET will be enable once we are allowed to do payment through mobile\n         when (courseBannerInfoModel.datesBannerInfo.getCourseBannerType()) {\n-            CourseBannerType.UPGRADE_TO_GRADED -> textView.text = context.getText(R.string.course_dates_banner_upgrade_to_graded)\n-            CourseBannerType.UPGRADE_TO_RESET -> textView.text = context.getText(R.string.course_dates_banner_upgrade_to_reset)\n+            CourseBannerType.UPGRADE_TO_GRADED -> {\n+                textView.text = context.getText(R.string.course_dates_banner_upgrade_to_graded)\n+                biValue = Analytics.Values.COURSE_DATES_BANNER_UPGRADE_TO_PARTICIPATE\n+                bannerType = Analytics.Values.PLS_BANNER_TYPE_UPGRADE_TO_PARTICIPATE\n+            }\n+            CourseBannerType.UPGRADE_TO_RESET -> {\n+                textView.text = context.getText(R.string.course_dates_banner_upgrade_to_reset)\n+                biValue = Analytics.Values.COURSE_DATES_BANNER_UPGRADE_TO_SHIFT\n+                bannerType = Analytics.Values.PLS_BANNER_TYPE_UPGRADE_TO_SHIFT\n+            }\n             CourseBannerType.RESET_DATES -> {\n                 textView.text = context.getText(R.string.course_dates_banner_reset_date)\n                 buttonText = context.getString(R.string.course_dates_banner_reset_date_button)\n+                biValue = Analytics.Values.COURSE_DATES_BANNER_SHIFT_DATES\n+                bannerType = Analytics.Values.PLS_BANNER_TYPE_SHIFT_DATES\n+            }\n+            CourseBannerType.INFO_BANNER -> {\n+                textView.text = context.getText(R.string.course_dates_info_banner)\n+                biValue = Analytics.Values.COURSE_DATES_BANNER_INFO\n+                bannerType = Analytics.Values.PLS_BANNER_TYPE_INFO\n             }\n-            CourseBannerType.INFO_BANNER -> textView.text = context.getText(R.string.course_dates_info_banner)\n             CourseBannerType.BLANK -> view.visibility = View.GONE\n         }\n \n         if (!TextUtils.isEmpty(textView.text)) {\n             if (!TextUtils.isEmpty(buttonText)) {\n                 button.text = buttonText\n                 button.visibility = View.VISIBLE\n-                button.setOnClickListener(clickListener)\n+                button.setOnClickListener(clickListener).also {\n+                    analyticsRegistry.trackPLSCourseDatesShiftButtonTapped(courseID, courseMode, screenName)\n+                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2Nzc3NTIx", "url": "https://github.com/edx/edx-app-android/pull/1488#pullrequestreview-546777521", "createdAt": "2020-12-08T06:24:44Z", "commit": {"oid": "f02c64d4c77452b99e5e374360c2913969787f4e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwNjoyNDo0NFrOIBI-ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwNjoyOTo0NFrOIBJGUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA2NjU3MA==", "bodyText": "why we need to add this boolean.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538066570", "createdAt": "2020-12-08T06:24:44Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/CourseOutlineFragment.java", "diffHunk": "@@ -187,6 +189,7 @@ public void onRefresh() {\n                 // Hide the progress bar as swipe layout has its own progress indicator\n                 loadingIndicator.setVisibility(View.GONE);\n                 errorNotification.hideError();\n+                canFetchBannerInfo = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f02c64d4c77452b99e5e374360c2913969787f4e"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA2ODU2MQ==", "bodyText": "IMO this approach is more appropriate as all the parameters are already available to post the event instated of post-event individual for each screen.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538068561", "createdAt": "2020-12-08T06:29:44Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/util/CourseDateUtil.kt", "diffHunk": "@@ -8,39 +8,62 @@ import android.widget.TextView\n import org.edx.mobile.R\n import org.edx.mobile.model.course.CourseBannerInfoModel\n import org.edx.mobile.model.course.CourseBannerType\n+import org.edx.mobile.module.analytics.Analytics\n+import org.edx.mobile.module.analytics.AnalyticsRegistry\n \n /**\n  * Utils class to populate the CourseDates banner view\n  */\n object CourseDateUtil {\n \n-    fun setupCourseDatesBanner(view: View, courseBannerInfoModel: CourseBannerInfoModel, clickListener: View.OnClickListener) {\n+    fun setupCourseDatesBanner(view: View, courseID: String, courseMode: String, screenName: String,\n+                               analyticsRegistry: AnalyticsRegistry, courseBannerInfoModel: CourseBannerInfoModel,\n+                               clickListener: View.OnClickListener) {\n         val context = view.context as Context\n         val textView = view.findViewById(R.id.banner_info) as TextView\n         val button = view.findViewById(R.id.btn_shift_dates) as Button\n         var buttonText = \"\"\n+        var bannerType = \"\"\n+        var biValue = \"\"\n         // Currently we are only handling RESET_DATES case,\n         // TODO UPGRADE_TO_GRADED & UPGRADE_TO_RESET will be enable once we are allowed to do payment through mobile\n         when (courseBannerInfoModel.datesBannerInfo.getCourseBannerType()) {\n-            CourseBannerType.UPGRADE_TO_GRADED -> textView.text = context.getText(R.string.course_dates_banner_upgrade_to_graded)\n-            CourseBannerType.UPGRADE_TO_RESET -> textView.text = context.getText(R.string.course_dates_banner_upgrade_to_reset)\n+            CourseBannerType.UPGRADE_TO_GRADED -> {\n+                textView.text = context.getText(R.string.course_dates_banner_upgrade_to_graded)\n+                biValue = Analytics.Values.COURSE_DATES_BANNER_UPGRADE_TO_PARTICIPATE\n+                bannerType = Analytics.Values.PLS_BANNER_TYPE_UPGRADE_TO_PARTICIPATE\n+            }\n+            CourseBannerType.UPGRADE_TO_RESET -> {\n+                textView.text = context.getText(R.string.course_dates_banner_upgrade_to_reset)\n+                biValue = Analytics.Values.COURSE_DATES_BANNER_UPGRADE_TO_SHIFT\n+                bannerType = Analytics.Values.PLS_BANNER_TYPE_UPGRADE_TO_SHIFT\n+            }\n             CourseBannerType.RESET_DATES -> {\n                 textView.text = context.getText(R.string.course_dates_banner_reset_date)\n                 buttonText = context.getString(R.string.course_dates_banner_reset_date_button)\n+                biValue = Analytics.Values.COURSE_DATES_BANNER_SHIFT_DATES\n+                bannerType = Analytics.Values.PLS_BANNER_TYPE_SHIFT_DATES\n+            }\n+            CourseBannerType.INFO_BANNER -> {\n+                textView.text = context.getText(R.string.course_dates_info_banner)\n+                biValue = Analytics.Values.COURSE_DATES_BANNER_INFO\n+                bannerType = Analytics.Values.PLS_BANNER_TYPE_INFO\n             }\n-            CourseBannerType.INFO_BANNER -> textView.text = context.getText(R.string.course_dates_info_banner)\n             CourseBannerType.BLANK -> view.visibility = View.GONE\n         }\n \n         if (!TextUtils.isEmpty(textView.text)) {\n             if (!TextUtils.isEmpty(buttonText)) {\n                 button.text = buttonText\n                 button.visibility = View.VISIBLE\n-                button.setOnClickListener(clickListener)\n+                button.setOnClickListener(clickListener).also {\n+                    analyticsRegistry.trackPLSCourseDatesShiftButtonTapped(courseID, courseMode, screenName)\n+                }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYzMTEzOA=="}, "originalCommit": {"oid": "01fb143f99acdffd1bd41c245bca5045608a5942"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2Nzc5Njc0", "url": "https://github.com/edx/edx-app-android/pull/1488#pullrequestreview-546779674", "createdAt": "2020-12-08T06:29:55Z", "commit": {"oid": "f02c64d4c77452b99e5e374360c2913969787f4e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwNjoyOTo1NVrOIBJGkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwNjo0MDoxN1rOIBJXWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA2ODYyNw==", "bodyText": "better to move this event post statment into setupCourseDatesBanner as all the parameters required by this statement are already there.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538068627", "createdAt": "2020-12-08T06:29:55Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/CourseDatesPageFragment.kt", "diffHunk": "@@ -151,17 +151,21 @@ class CourseDatesPageFragment : OfflineSupportBaseFragment() {\n             binding.banner.containerLayout.visibility = View.GONE\n             return\n         }\n-        CourseDateUtil.setupCourseDatesBanner(view = binding.banner.root, courseID = courseId,\n-                courseMode = courseMode, screenName = Analytics.Screens.COURSE_DATES,\n+        CourseDateUtil.setupCourseDatesBanner(view = binding.banner.root, courseId = courseId,\n+                enrollmentMode = enrollmentMode, screenName = Analytics.Screens.PLS_COURSE_DATES,\n                 analyticsRegistry = environment.analyticsRegistry, courseBannerInfoModel = courseBannerInfo,\n-                clickListener = View.OnClickListener { viewModel.resetCourseDatesBanner(courseId) })\n+                clickListener = View.OnClickListener {\n+                    viewModel.resetCourseDatesBanner(courseId)\n+                    environment.analyticsRegistry.trackPLSShiftButtonTapped(courseId, enrollmentMode,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f02c64d4c77452b99e5e374360c2913969787f4e"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA2ODY2OA==", "bodyText": "same.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538068668", "createdAt": "2020-12-08T06:30:00Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/CourseDatesPageFragment.kt", "diffHunk": "@@ -151,17 +151,21 @@ class CourseDatesPageFragment : OfflineSupportBaseFragment() {\n             binding.banner.containerLayout.visibility = View.GONE\n             return\n         }\n-        CourseDateUtil.setupCourseDatesBanner(view = binding.banner.root, courseID = courseId,\n-                courseMode = courseMode, screenName = Analytics.Screens.COURSE_DATES,\n+        CourseDateUtil.setupCourseDatesBanner(view = binding.banner.root, courseId = courseId,\n+                enrollmentMode = enrollmentMode, screenName = Analytics.Screens.PLS_COURSE_DATES,\n                 analyticsRegistry = environment.analyticsRegistry, courseBannerInfoModel = courseBannerInfo,\n-                clickListener = View.OnClickListener { viewModel.resetCourseDatesBanner(courseId) })\n+                clickListener = View.OnClickListener {\n+                    viewModel.resetCourseDatesBanner(courseId)\n+                    environment.analyticsRegistry.trackPLSShiftButtonTapped(courseId, enrollmentMode,\n+                            Analytics.Screens.PLS_COURSE_DATES)\n+                })\n     }\n \n     private fun showShiftDateSnackBar(isSuccess: Boolean) {\n         val snackbarErrorNotification = SnackbarErrorNotification(binding.root)\n         snackbarErrorNotification.showError(\n                 if (isSuccess) R.string.assessment_shift_dates_success_msg else R.string.course_dates_reset_unsuccessful,\n                 null, 0, SnackbarErrorNotification.COURSE_DATE_MESSAGE_DURATION, null)\n-        environment.analyticsRegistry.trackPLSCourseDatesShift(courseId, courseMode, Analytics.Screens.COURSE_DATES, isSuccess)\n+        environment.analyticsRegistry.trackPLSCourseDatesShift(courseId, enrollmentMode, Analytics.Screens.PLS_COURSE_DATES, isSuccess)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f02c64d4c77452b99e5e374360c2913969787f4e"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA2ODc1MQ==", "bodyText": "Deserve doc-string.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538068751", "createdAt": "2020-12-08T06:30:15Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/CourseOutlineFragment.java", "diffHunk": "@@ -109,6 +109,8 @@\n     private EnrolledCoursesResponse courseData;\n     private String courseComponentId;\n     private boolean isVideoMode;\n+    // Flag to check if the course dates banner API is called or not\n+    private boolean canFetchBannerInfo = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f02c64d4c77452b99e5e374360c2913969787f4e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA2OTA1Mg==", "bodyText": "same.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538069052", "createdAt": "2020-12-08T06:30:58Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/CourseUnitWebViewFragment.java", "diffHunk": "@@ -134,9 +132,13 @@ private void initInfoBanner(CourseBannerInfoModel courseBannerInfo) {\n             infoBanner.setVisibility(View.GONE);\n             return;\n         }\n-        CourseDateUtil.INSTANCE.setupCourseDatesBanner(infoBanner, courseId, courseMode,\n-                Analytics.Screens.COURSE_UNIT_ASSIGNMENT, environment.getAnalyticsRegistry(), courseBannerInfo,\n-                v -> courseDateViewModel.resetCourseDatesBanner(unit.getCourseId()));\n+        CourseDateUtil.INSTANCE.setupCourseDatesBanner(infoBanner, unit.getCourseId(), enrollmentMode,\n+                Analytics.Screens.PLS_COURSE_UNIT_ASSIGNMENT, environment.getAnalyticsRegistry(), courseBannerInfo,\n+                v -> {\n+                    courseDateViewModel.resetCourseDatesBanner(unit.getCourseId());\n+                    environment.getAnalyticsRegistry().trackPLSShiftButtonTapped(unit.getCourseId(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f02c64d4c77452b99e5e374360c2913969787f4e"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA2OTc1NA==", "bodyText": "* Method for iterating through the mocked course data, and return the first video block leaf.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538069754", "createdAt": "2020-12-08T06:32:36Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/test/java/org/edx/mobile/view/CourseUnitWebViewFragmentTest.java", "diffHunk": "@@ -30,18 +30,25 @@\n public class CourseUnitWebViewFragmentTest extends UiTest {\n \n     EnrolledCoursesResponse courseData;\n+\n     /**\n-     * Method for iterating through the mock course response data, and\n-     * returning the first video block leaf.\n-     *\n-     * @return The first {@link HtmlBlockModel} leaf in the mock course data\n+     * Method to initialize Course Data from API\n      */\n-    private HtmlBlockModel getHtmlUnit() throws CourseContentNotValidException {\n+    private void initializeCourseData(){\n         try {\n             courseData = executeStrict(courseAPI.getEnrolledCourses()).get(0);\n         } catch (Exception e) {\n             throw new RuntimeException(e);\n         }\n+    }\n+\n+    /**\n+     * Method for iterating through the mock course response data, and\n+     * returning the first video block leaf.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f02c64d4c77452b99e5e374360c2913969787f4e"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA3MDIxNg==", "bodyText": "I think it can be any block, not just the video block", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538070216", "createdAt": "2020-12-08T06:33:47Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/test/java/org/edx/mobile/view/CourseUnitWebViewFragmentTest.java", "diffHunk": "@@ -30,18 +30,25 @@\n public class CourseUnitWebViewFragmentTest extends UiTest {\n \n     EnrolledCoursesResponse courseData;\n+\n     /**\n-     * Method for iterating through the mock course response data, and\n-     * returning the first video block leaf.\n-     *\n-     * @return The first {@link HtmlBlockModel} leaf in the mock course data\n+     * Method to initialize Course Data from API\n      */\n-    private HtmlBlockModel getHtmlUnit() throws CourseContentNotValidException {\n+    private void initializeCourseData(){\n         try {\n             courseData = executeStrict(courseAPI.getEnrolledCourses()).get(0);\n         } catch (Exception e) {\n             throw new RuntimeException(e);\n         }\n+    }\n+\n+    /**\n+     * Method for iterating through the mock course response data, and\n+     * returning the first video block leaf.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA2OTc1NA=="}, "originalCommit": {"oid": "f02c64d4c77452b99e5e374360c2913969787f4e"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA3MTY3NQ==", "bodyText": "IMO course id of the course we are viewing -> course id of the course where banner appear.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538071675", "createdAt": "2020-12-08T06:37:14Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -434,6 +434,39 @@ void trackBulkDownloadSwitchOn(@NonNull String courseId, int totalDownloadableVi\n     void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String connectionState,\n                                           @NonNull String playMedium);\n \n+    /**\n+     * Track the PLS Course Dates Banner appearance\n+     *\n+     * @param biValue        biValue of course date banner type\n+     * @param courseId       course id of the course we are viewing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f02c64d4c77452b99e5e374360c2913969787f4e"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA3MTc3Mw==", "bodyText": "IMO course id of the course we are viewing -> course id of the course where banner appear.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538071773", "createdAt": "2020-12-08T06:37:30Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -434,6 +434,39 @@ void trackBulkDownloadSwitchOn(@NonNull String courseId, int totalDownloadableVi\n     void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String connectionState,\n                                           @NonNull String playMedium);\n \n+    /**\n+     * Track the PLS Course Dates Banner appearance\n+     *\n+     * @param biValue        biValue of course date banner type\n+     * @param courseId       course id of the course we are viewing\n+     * @param enrollmentMode enrollment mode of the course where banner appears\n+     * @param screenName     The screen name where banner appears\n+     * @param bannerType     Type of course date banner\n+     */\n+    void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String enrollmentMode,\n+                                   @NonNull String screenName, @NonNull String bannerType);\n+\n+    /**\n+     * Track the Shift Dates button tapped on PLS Course Dates Banner\n+     *\n+     * @param courseId       course id of the course we are viewing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f02c64d4c77452b99e5e374360c2913969787f4e"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA3MjkyMg==", "bodyText": "IMO course id of the course we are viewing -> course id of the course where banner appear.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538072922", "createdAt": "2020-12-08T06:40:17Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -434,6 +434,39 @@ void trackBulkDownloadSwitchOn(@NonNull String courseId, int totalDownloadableVi\n     void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String connectionState,\n                                           @NonNull String playMedium);\n \n+    /**\n+     * Track the PLS Course Dates Banner appearance\n+     *\n+     * @param biValue        biValue of course date banner type\n+     * @param courseId       course id of the course we are viewing\n+     * @param enrollmentMode enrollment mode of the course where banner appears\n+     * @param screenName     The screen name where banner appears\n+     * @param bannerType     Type of course date banner\n+     */\n+    void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String enrollmentMode,\n+                                   @NonNull String screenName, @NonNull String bannerType);\n+\n+    /**\n+     * Track the Shift Dates button tapped on PLS Course Dates Banner\n+     *\n+     * @param courseId       course id of the course we are viewing\n+     * @param enrollmentMode enrollment mode of the course where button will be tapped\n+     * @param screenName     The screen name on which button will be tapped\n+     */\n+    void trackPLSShiftButtonTapped(@NonNull String courseId, @NonNull String enrollmentMode,\n+                                   @NonNull String screenName);\n+\n+    /**\n+     * Track that PLS Course Dates Shifted successfully or not\n+     *\n+     * @param courseId       course id of the course we are viewing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f02c64d4c77452b99e5e374360c2913969787f4e"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2ODEzNTEy", "url": "https://github.com/edx/edx-app-android/pull/1488#pullrequestreview-546813512", "createdAt": "2020-12-08T07:33:05Z", "commit": {"oid": "f106dbb31a134d4d297f2f41dfef3c5603cc7280"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwNzozMzowNlrOIBK68A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwNzozNjo0N1rOIBLDFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA5ODQxNg==", "bodyText": "appear  -> appears", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538098416", "createdAt": "2020-12-08T07:33:06Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -434,6 +434,39 @@ void trackBulkDownloadSwitchOn(@NonNull String courseId, int totalDownloadableVi\n     void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String connectionState,\n                                           @NonNull String playMedium);\n \n+    /**\n+     * Track the PLS Course Dates Banner appearance\n+     *\n+     * @param biValue        biValue of course date banner type\n+     * @param courseId       course id of the course where banner appear", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f106dbb31a134d4d297f2f41dfef3c5603cc7280"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA5ODQ3NA==", "bodyText": "appear  -> appears", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538098474", "createdAt": "2020-12-08T07:33:12Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -434,6 +434,39 @@ void trackBulkDownloadSwitchOn(@NonNull String courseId, int totalDownloadableVi\n     void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String connectionState,\n                                           @NonNull String playMedium);\n \n+    /**\n+     * Track the PLS Course Dates Banner appearance\n+     *\n+     * @param biValue        biValue of course date banner type\n+     * @param courseId       course id of the course where banner appear\n+     * @param enrollmentMode enrollment mode of the course where banner appears\n+     * @param screenName     The screen name where banner appears\n+     * @param bannerType     Type of course date banner\n+     */\n+    void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String enrollmentMode,\n+                                   @NonNull String screenName, @NonNull String bannerType);\n+\n+    /**\n+     * Track the Shift Dates button tapped on PLS Course Dates Banner\n+     *\n+     * @param courseId       course id of the course where banner appear", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f106dbb31a134d4d297f2f41dfef3c5603cc7280"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA5ODUyNw==", "bodyText": "appear  -> appears", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538098527", "createdAt": "2020-12-08T07:33:16Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/analytics/Analytics.java", "diffHunk": "@@ -434,6 +434,39 @@ void trackBulkDownloadSwitchOn(@NonNull String courseId, int totalDownloadableVi\n     void trackCastDeviceConnectionChanged(@NonNull String eventName, @NonNull String connectionState,\n                                           @NonNull String playMedium);\n \n+    /**\n+     * Track the PLS Course Dates Banner appearance\n+     *\n+     * @param biValue        biValue of course date banner type\n+     * @param courseId       course id of the course where banner appear\n+     * @param enrollmentMode enrollment mode of the course where banner appears\n+     * @param screenName     The screen name where banner appears\n+     * @param bannerType     Type of course date banner\n+     */\n+    void trackPLSCourseDatesBanner(@NonNull String biValue, @NonNull String courseId, @NonNull String enrollmentMode,\n+                                   @NonNull String screenName, @NonNull String bannerType);\n+\n+    /**\n+     * Track the Shift Dates button tapped on PLS Course Dates Banner\n+     *\n+     * @param courseId       course id of the course where banner appear\n+     * @param enrollmentMode enrollment mode of the course where button will be tapped\n+     * @param screenName     The screen name on which button will be tapped\n+     */\n+    void trackPLSShiftButtonTapped(@NonNull String courseId, @NonNull String enrollmentMode,\n+                                   @NonNull String screenName);\n+\n+    /**\n+     * Track that PLS Course Dates Shifted successfully or not\n+     *\n+     * @param courseId       course id of the course where banner appear", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f106dbb31a134d4d297f2f41dfef3c5603cc7280"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODEwMDUwMg==", "bodyText": "update doc-string accordingly.", "url": "https://github.com/edx/edx-app-android/pull/1488#discussion_r538100502", "createdAt": "2020-12-08T07:36:47Z", "author": {"login": "farhan-arshad-dev"}, "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/CourseOutlineFragment.java", "diffHunk": "@@ -651,7 +653,7 @@ public void onDestroyActionMode(ActionMode mode) {\n     /**\n      * Load data to the adapter\n      */\n-    private void loadData(@NonNull CourseComponent courseComponent) {\n+    private void loadData(@NonNull CourseComponent courseComponent, boolean isServerCall) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f106dbb31a134d4d297f2f41dfef3c5603cc7280"}, "originalPosition": 63}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5656d3a5091f40f2e81995e6ce9b4a4a709b38e", "author": {"user": {"login": "omerhabib26", "name": "Omer Habib"}}, "url": "https://github.com/edx/edx-app-android/commit/c5656d3a5091f40f2e81995e6ce9b4a4a709b38e", "committedDate": "2020-12-08T08:02:36Z", "message": "Implement Analytics events for PLS work\n- LEARNER-8001\n- Added 3 events as follow:\n  - PLS Banner Viewed\n  - PLS Shift Button Tapped\n  - PLS Shift Dates\n- Refactor CourseDateBannerInfo API Call"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f106dbb31a134d4d297f2f41dfef3c5603cc7280", "author": {"user": {"login": "omerhabib26", "name": "Omer Habib"}}, "url": "https://github.com/edx/edx-app-android/commit/f106dbb31a134d4d297f2f41dfef3c5603cc7280", "committedDate": "2020-12-08T07:19:00Z", "message": "Address PR comments"}, "afterCommit": {"oid": "c5656d3a5091f40f2e81995e6ce9b4a4a709b38e", "author": {"user": {"login": "omerhabib26", "name": "Omer Habib"}}, "url": "https://github.com/edx/edx-app-android/commit/c5656d3a5091f40f2e81995e6ce9b4a4a709b38e", "committedDate": "2020-12-08T08:02:36Z", "message": "Implement Analytics events for PLS work\n- LEARNER-8001\n- Added 3 events as follow:\n  - PLS Banner Viewed\n  - PLS Shift Button Tapped\n  - PLS Shift Dates\n- Refactor CourseDateBannerInfo API Call"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4268, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}