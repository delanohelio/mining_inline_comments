{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMDk4OTI3", "number": 3722, "title": "Fast forward boulder deconstruction", "bodyText": "(all types of) boulder(s) still need to deconstruct ~35% more when visibly it has already reached the stage of emptyness.\nthis pull fast forwards the deconstruction once it has reached that point.\nnotable:\n\nstatic wall extends the boulder class, but it cannot be constructed. (previous.getClass() == Boulder.class failed)\n0.35 is just my Log.info(progress) guess where i compared it visually, the sweet spot may lie slightly higher or lower.\n\nold:\n\nnew:", "createdAt": "2020-12-02T15:32:31Z", "url": "https://github.com/Anuken/Mindustry/pull/3722", "merged": true, "mergeCommit": {"oid": "d4bee41103749a949c2842c1d85cf3ed3859b68d"}, "closed": true, "closedAt": "2020-12-02T17:58:59Z", "author": {"login": "Quezler"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiQPxTAH2gAyNTMxMDk4OTI3OjY2NGNkNmEzYTBkYzUzODZmMmQ3ODg3ZGU2NmJiMmJmZGNhYzY2ZWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdisVXMgFqTU0NDU2MzY0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "664cd6a3a0dc5386f2d7887de66bb2bfdcac66ee", "author": {"user": {"login": "Quezler", "name": "Patrick 'Quezler' Mounier"}}, "url": "https://github.com/Anuken/Mindustry/commit/664cd6a3a0dc5386f2d7887de66bb2bfdcac66ee", "committedDate": "2020-12-02T15:26:22Z", "message": "Update ConstructBlock.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4c3664cc686b7eb1cf1f885f47050abba76495f", "author": {"user": {"login": "Quezler", "name": "Patrick 'Quezler' Mounier"}}, "url": "https://github.com/Anuken/Mindustry/commit/e4c3664cc686b7eb1cf1f885f47050abba76495f", "committedDate": "2020-12-02T15:36:07Z", "message": "Update ConstructBlock.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMDEzNzMx", "url": "https://github.com/Anuken/Mindustry/pull/3722#pullrequestreview-543013731", "createdAt": "2020-12-02T16:27:17Z", "commit": {"oid": "e4c3664cc686b7eb1cf1f885f47050abba76495f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjoyNzoxN1rOH9jW2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjoyNzoxN1rOH9jW2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMwNDQ3Mg==", "bodyText": "Instead of hardcoding it for boulders, the number should be a special property that is 0 for normal blocks.", "url": "https://github.com/Anuken/Mindustry/pull/3722#discussion_r534304472", "createdAt": "2020-12-02T16:27:17Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/world/blocks/ConstructBlock.java", "diffHunk": "@@ -288,6 +289,9 @@ public void deconstruct(Unit builder, @Nullable Building core, float amount){\n             }\n \n             progress = Mathf.clamp(progress - amount);\n+            \n+            // fast forward boulder deconstruction when visually already gone\n+            if(progress <= 0.35f && previous instanceof Boulder) progress = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4c3664cc686b7eb1cf1f885f47050abba76495f"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea96bf26754c1b7a9b2e463631b627d4b2b6ee40", "author": {"user": {"login": "Quezler", "name": "Patrick 'Quezler' Mounier"}}, "url": "https://github.com/Anuken/Mindustry/commit/ea96bf26754c1b7a9b2e463631b627d4b2b6ee40", "committedDate": "2020-12-02T16:58:58Z", "message": "Update Block.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3eac8cb6adce100117347fe66d84101e48d2c5ab", "author": {"user": {"login": "Quezler", "name": "Patrick 'Quezler' Mounier"}}, "url": "https://github.com/Anuken/Mindustry/commit/3eac8cb6adce100117347fe66d84101e48d2c5ab", "committedDate": "2020-12-02T16:59:20Z", "message": "Update Boulder.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "435f15a450d6d840d516b07e2f6d64d220a2f884", "author": {"user": {"login": "Quezler", "name": "Patrick 'Quezler' Mounier"}}, "url": "https://github.com/Anuken/Mindustry/commit/435f15a450d6d840d516b07e2f6d64d220a2f884", "committedDate": "2020-12-02T17:00:50Z", "message": "Update ConstructBlock.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "129f21e3a946f8d98159c0bb5f56aff4fb7c7a50", "author": {"user": {"login": "Quezler", "name": "Patrick 'Quezler' Mounier"}}, "url": "https://github.com/Anuken/Mindustry/commit/129f21e3a946f8d98159c0bb5f56aff4fb7c7a50", "committedDate": "2020-12-02T17:01:40Z", "message": "Update Boulder.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMDg5Nzcw", "url": "https://github.com/Anuken/Mindustry/pull/3722#pullrequestreview-543089770", "createdAt": "2020-12-02T17:48:02Z", "commit": {"oid": "129f21e3a946f8d98159c0bb5f56aff4fb7c7a50"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNzo0ODowMlrOH9m7MA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNzo0ODowMlrOH9m7MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM2MjkyOA==", "bodyText": "I believe it's possible for previous to be null, so check that just in case.", "url": "https://github.com/Anuken/Mindustry/pull/3722#discussion_r534362928", "createdAt": "2020-12-02T17:48:02Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/world/blocks/ConstructBlock.java", "diffHunk": "@@ -289,7 +289,7 @@ public void deconstruct(Unit builder, @Nullable Building core, float amount){\n \n             progress = Mathf.clamp(progress - amount);\n \n-            if(progress <= 0 || state.rules.infiniteResources){\n+            if(progress <= previous.deconstructThreshold || state.rules.infiniteResources){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "129f21e3a946f8d98159c0bb5f56aff4fb7c7a50"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e586c440325ed131590f8bc7a1964b94e545999", "author": {"user": {"login": "Quezler", "name": "Patrick 'Quezler' Mounier"}}, "url": "https://github.com/Anuken/Mindustry/commit/2e586c440325ed131590f8bc7a1964b94e545999", "committedDate": "2020-12-02T17:54:46Z", "message": "Update ConstructBlock.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NTYzNjQy", "url": "https://github.com/Anuken/Mindustry/pull/3722#pullrequestreview-544563642", "createdAt": "2020-12-04T00:09:48Z", "commit": {"oid": "2e586c440325ed131590f8bc7a1964b94e545999"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMDowOTo0OFrOH-66Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMDowOTo0OFrOH-66Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTczODk2Mg==", "bodyText": "Whitespace in the wrong place?", "url": "https://github.com/Anuken/Mindustry/pull/3722#discussion_r535738962", "createdAt": "2020-12-04T00:09:48Z", "author": {"login": "genNAowl"}, "path": "core/src/mindustry/world/Block.java", "diffHunk": "@@ -126,7 +126,7 @@\n     public BlockGroup group = BlockGroup.none;\n     /** List of block flags. Used for AI indexing. */\n     public EnumSet<BlockFlag> flags = EnumSet.of();\n-    /** Targeting priority of this block, as seen by enemies.*/\n+    /** Targeting priority of this block, as seen by enemies .*/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e586c440325ed131590f8bc7a1964b94e545999"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2390, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}