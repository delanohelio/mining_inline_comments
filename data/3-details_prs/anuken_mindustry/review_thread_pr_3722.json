{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMDk4OTI3", "number": 3722, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjoyNzoxN1rOE_s73g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMDowOTo0OFrOFAjubw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MjMxOTY2OnYy", "diffSide": "RIGHT", "path": "core/src/mindustry/world/blocks/ConstructBlock.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjoyNzoxN1rOH9jW2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjozNzoxNFrOH9j1Tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMwNDQ3Mg==", "bodyText": "Instead of hardcoding it for boulders, the number should be a special property that is 0 for normal blocks.", "url": "https://github.com/Anuken/Mindustry/pull/3722#discussion_r534304472", "createdAt": "2020-12-02T16:27:17Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/world/blocks/ConstructBlock.java", "diffHunk": "@@ -288,6 +289,9 @@ public void deconstruct(Unit builder, @Nullable Building core, float amount){\n             }\n \n             progress = Mathf.clamp(progress - amount);\n+            \n+            // fast forward boulder deconstruction when visually already gone\n+            if(progress <= 0.35f && previous instanceof Boulder) progress = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4c3664cc686b7eb1cf1f885f47050abba76495f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMwODIyNw==", "bodyText": "ok, I'll change it within the hour \ud83d\udc4d", "url": "https://github.com/Anuken/Mindustry/pull/3722#discussion_r534308227", "createdAt": "2020-12-02T16:31:53Z", "author": {"login": "Quezler"}, "path": "core/src/mindustry/world/blocks/ConstructBlock.java", "diffHunk": "@@ -288,6 +289,9 @@ public void deconstruct(Unit builder, @Nullable Building core, float amount){\n             }\n \n             progress = Mathf.clamp(progress - amount);\n+            \n+            // fast forward boulder deconstruction when visually already gone\n+            if(progress <= 0.35f && previous instanceof Boulder) progress = 0;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMwNDQ3Mg=="}, "originalCommit": {"oid": "e4c3664cc686b7eb1cf1f885f47050abba76495f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMxMDIyNA==", "bodyText": "any name suggestions?\n\ndeconstructionFinishesAt\ndeconstructTrigger\ndemolishThreshold\n\nthey just don't sound quite right \ud83e\udd14", "url": "https://github.com/Anuken/Mindustry/pull/3722#discussion_r534310224", "createdAt": "2020-12-02T16:34:28Z", "author": {"login": "Quezler"}, "path": "core/src/mindustry/world/blocks/ConstructBlock.java", "diffHunk": "@@ -288,6 +289,9 @@ public void deconstruct(Unit builder, @Nullable Building core, float amount){\n             }\n \n             progress = Mathf.clamp(progress - amount);\n+            \n+            // fast forward boulder deconstruction when visually already gone\n+            if(progress <= 0.35f && previous instanceof Boulder) progress = 0;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMwNDQ3Mg=="}, "originalCommit": {"oid": "e4c3664cc686b7eb1cf1f885f47050abba76495f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMxMjI3MQ==", "bodyText": "deconstructThreshold seems appropriate", "url": "https://github.com/Anuken/Mindustry/pull/3722#discussion_r534312271", "createdAt": "2020-12-02T16:37:14Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/world/blocks/ConstructBlock.java", "diffHunk": "@@ -288,6 +289,9 @@ public void deconstruct(Unit builder, @Nullable Building core, float amount){\n             }\n \n             progress = Mathf.clamp(progress - amount);\n+            \n+            // fast forward boulder deconstruction when visually already gone\n+            if(progress <= 0.35f && previous instanceof Boulder) progress = 0;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMwNDQ3Mg=="}, "originalCommit": {"oid": "e4c3664cc686b7eb1cf1f885f47050abba76495f"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MjY4ODg0OnYy", "diffSide": "RIGHT", "path": "core/src/mindustry/world/blocks/ConstructBlock.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNzo0ODowMlrOH9m7MA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNzo0ODowMlrOH9m7MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM2MjkyOA==", "bodyText": "I believe it's possible for previous to be null, so check that just in case.", "url": "https://github.com/Anuken/Mindustry/pull/3722#discussion_r534362928", "createdAt": "2020-12-02T17:48:02Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/world/blocks/ConstructBlock.java", "diffHunk": "@@ -289,7 +289,7 @@ public void deconstruct(Unit builder, @Nullable Building core, float amount){\n \n             progress = Mathf.clamp(progress - amount);\n \n-            if(progress <= 0 || state.rules.infiniteResources){\n+            if(progress <= previous.deconstructThreshold || state.rules.infiniteResources){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "129f21e3a946f8d98159c0bb5f56aff4fb7c7a50"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MTI5NjQ3OnYy", "diffSide": "RIGHT", "path": "core/src/mindustry/world/Block.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMDowOTo0OFrOH-66Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNzo1NjozMVrOH_E7eQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTczODk2Mg==", "bodyText": "Whitespace in the wrong place?", "url": "https://github.com/Anuken/Mindustry/pull/3722#discussion_r535738962", "createdAt": "2020-12-04T00:09:48Z", "author": {"login": "genNAowl"}, "path": "core/src/mindustry/world/Block.java", "diffHunk": "@@ -126,7 +126,7 @@\n     public BlockGroup group = BlockGroup.none;\n     /** List of block flags. Used for AI indexing. */\n     public EnumSet<BlockFlag> flags = EnumSet.of();\n-    /** Targeting priority of this block, as seen by enemies.*/\n+    /** Targeting priority of this block, as seen by enemies .*/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e586c440325ed131590f8bc7a1964b94e545999"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkwMzA5Nw==", "bodyText": "whoops", "url": "https://github.com/Anuken/Mindustry/pull/3722#discussion_r535903097", "createdAt": "2020-12-04T07:56:31Z", "author": {"login": "Quezler"}, "path": "core/src/mindustry/world/Block.java", "diffHunk": "@@ -126,7 +126,7 @@\n     public BlockGroup group = BlockGroup.none;\n     /** List of block flags. Used for AI indexing. */\n     public EnumSet<BlockFlag> flags = EnumSet.of();\n-    /** Targeting priority of this block, as seen by enemies.*/\n+    /** Targeting priority of this block, as seen by enemies .*/", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTczODk2Mg=="}, "originalCommit": {"oid": "2e586c440325ed131590f8bc7a1964b94e545999"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4431, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}