{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1NjI5ODA3", "number": 3267, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMToxNjozMFrOE1Zmsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxODo0NToyNlrOFH5SSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0NDI5NDkwOnYy", "diffSide": "RIGHT", "path": "core/src/mindustry/ui/SearchBar.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMToxNjozMFrOHtp_mA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMToxNjozMFrOHtp_mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzYzNTk5Mg==", "bodyText": "Anuke hate spaces \ud83d\udc40\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Cons<String>[] rebuild = new Cons[] {null};\n          \n          \n            \n                    Table[] pane = new Table[] {null};\n          \n          \n            \n                    Cons<String>[] rebuild = new Cons[]{null};\n          \n          \n            \n                    Table[] pane = new Table[]{null};", "url": "https://github.com/Anuken/Mindustry/pull/3267#discussion_r517635992", "createdAt": "2020-11-04T21:16:30Z", "author": {"login": "summetdev"}, "path": "core/src/mindustry/ui/SearchBar.java", "diffHunk": "@@ -0,0 +1,49 @@\n+package mindustry.ui;\n+\n+import arc.func.*;\n+import arc.scene.ui.layout.*;\n+import arc.struct.*;\n+import mindustry.gen.*;\n+\n+public class SearchBar{\n+    public static <T> Table add(Table parent, Seq<T> list, Func<String, String> queryf,\n+            Func<T, String> namef, Cons2<Table, T> itemf){\n+        Cons<String>[] rebuild = new Cons[] {null};\n+        Table[] pane = new Table[] {null};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60fe768e56c9a90c9ec892178d8e2c709e7fc879"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMTkzODkzOnYy", "diffSide": "RIGHT", "path": "core/src/mindustry/ui/dialogs/ModsDialog.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODoxODo1NFrOIItq8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODoyMjo1MFrOIItyPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAwNzc5NA==", "bodyText": "The display name already has colors stripped.", "url": "https://github.com/Anuken/Mindustry/pull/3267#discussion_r546007794", "createdAt": "2020-12-18T18:18:54Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/ui/dialogs/ModsDialog.java", "diffHunk": "@@ -136,14 +139,12 @@ void setup(){\n         cont.row();\n \n         if(!mods.list().isEmpty()){\n-            cont.pane(table -> {\n-                table.margin(10f).top();\n-\n-                boolean anyDisabled = false;\n-                for(LoadedMod mod : mods.list()){\n-\n-                    if(!mod.enabled() && !anyDisabled && mods.list().size > 0){\n-                        anyDisabled = true;\n+            boolean[] anyDisabled = {false};\n+            SearchBar.add(cont, mods.list(),\n+                mod -> Strings.stripColors(mod.meta.displayName()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "587c7a1ca58ef4572eb865ccae6da12b638a019d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAwOTY2MA==", "bodyText": "yes its an old pr", "url": "https://github.com/Anuken/Mindustry/pull/3267#discussion_r546009660", "createdAt": "2020-12-18T18:22:50Z", "author": {"login": "DeltaNedas"}, "path": "core/src/mindustry/ui/dialogs/ModsDialog.java", "diffHunk": "@@ -136,14 +139,12 @@ void setup(){\n         cont.row();\n \n         if(!mods.list().isEmpty()){\n-            cont.pane(table -> {\n-                table.margin(10f).top();\n-\n-                boolean anyDisabled = false;\n-                for(LoadedMod mod : mods.list()){\n-\n-                    if(!mod.enabled() && !anyDisabled && mods.list().size > 0){\n-                        anyDisabled = true;\n+            boolean[] anyDisabled = {false};\n+            SearchBar.add(cont, mods.list(),\n+                mod -> Strings.stripColors(mod.meta.displayName()),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAwNzc5NA=="}, "originalCommit": {"oid": "587c7a1ca58ef4572eb865ccae6da12b638a019d"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMTk0MDc4OnYy", "diffSide": "RIGHT", "path": "core/src/mindustry/ui/dialogs/ModsDialog.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODoxOTozNlrOIItsJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODoyMzoxMFrOIIty8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAwODEwMg==", "bodyText": "This is very hacky and will break without an obvious cause if any relevant layout is changed.", "url": "https://github.com/Anuken/Mindustry/pull/3267#discussion_r546008102", "createdAt": "2020-12-18T18:19:36Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/ui/dialogs/ModsDialog.java", "diffHunk": "@@ -217,20 +218,19 @@ void setup(){\n                                 }).size(50f);\n                             }\n                         }).growX().right().padRight(-8f).padTop(-8f);\n-\n-\n                     }, Styles.clearPartialt, () -> showMod(mod)).size(w, h).growX().pad(4f);\n                     table.row();\n-                }\n-            });\n+                }).margin(10f).top();\n \n+                if(mobile && !Core.graphics.isPortrait()){\n+                    //hide search bar on mobile, takes up too much space\n+                    cont.getCells().get(2).get().clear();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "587c7a1ca58ef4572eb865ccae6da12b638a019d"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAwOTg0Mw==", "bodyText": "ok ill add a cons for search bar table", "url": "https://github.com/Anuken/Mindustry/pull/3267#discussion_r546009843", "createdAt": "2020-12-18T18:23:10Z", "author": {"login": "DeltaNedas"}, "path": "core/src/mindustry/ui/dialogs/ModsDialog.java", "diffHunk": "@@ -217,20 +218,19 @@ void setup(){\n                                 }).size(50f);\n                             }\n                         }).growX().right().padRight(-8f).padTop(-8f);\n-\n-\n                     }, Styles.clearPartialt, () -> showMod(mod)).size(w, h).growX().pad(4f);\n                     table.row();\n-                }\n-            });\n+                }).margin(10f).top();\n \n+                if(mobile && !Core.graphics.isPortrait()){\n+                    //hide search bar on mobile, takes up too much space\n+                    cont.getCells().get(2).get().clear();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAwODEwMg=="}, "originalCommit": {"oid": "587c7a1ca58ef4572eb865ccae6da12b638a019d"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNTQ5NjM2OnYy", "diffSide": "RIGHT", "path": "core/src/mindustry/ui/dialogs/ModsDialog.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQwMToxNTo1NVrOIJJobg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxODo0NDoyM1rOIJiOVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQ2NTkwMg==", "bodyText": "probably should happen on desktop too", "url": "https://github.com/Anuken/Mindustry/pull/3267#discussion_r546465902", "createdAt": "2020-12-21T01:15:55Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/ui/dialogs/ModsDialog.java", "diffHunk": "@@ -30,6 +30,9 @@ public ModsDialog(){\n         buttons.button(\"@mods.guide\", Icon.link, () -> Core.app.openURI(modGuideURL)).size(210, 64f);\n \n         shown(this::setup);\n+        if(mobile){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0e3dc7fc7adcc5d5092e0609812cd2df4271d03"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY5MzgwMA==", "bodyText": "but desktop is always landscape", "url": "https://github.com/Anuken/Mindustry/pull/3267#discussion_r546693800", "createdAt": "2020-12-21T13:03:23Z", "author": {"login": "DeltaNedas"}, "path": "core/src/mindustry/ui/dialogs/ModsDialog.java", "diffHunk": "@@ -30,6 +30,9 @@ public ModsDialog(){\n         buttons.button(\"@mods.guide\", Icon.link, () -> Core.app.openURI(modGuideURL)).size(210, 64f);\n \n         shown(this::setup);\n+        if(mobile){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQ2NTkwMg=="}, "originalCommit": {"oid": "c0e3dc7fc7adcc5d5092e0609812cd2df4271d03"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njg2ODgyMQ==", "bodyText": "right, mistook it for portrait", "url": "https://github.com/Anuken/Mindustry/pull/3267#discussion_r546868821", "createdAt": "2020-12-21T18:44:23Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/ui/dialogs/ModsDialog.java", "diffHunk": "@@ -30,6 +30,9 @@ public ModsDialog(){\n         buttons.button(\"@mods.guide\", Icon.link, () -> Core.app.openURI(modGuideURL)).size(210, 64f);\n \n         shown(this::setup);\n+        if(mobile){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQ2NTkwMg=="}, "originalCommit": {"oid": "c0e3dc7fc7adcc5d5092e0609812cd2df4271d03"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzODIyOTIyOnYy", "diffSide": "RIGHT", "path": "core/src/mindustry/ui/SearchBar.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxODo0NToyNlrOIJiQQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxODo0NToyNlrOIJiQQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njg2OTMxMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Cons<String>[] rebuild = new Cons[]{null};\n          \n          \n            \n                    Table[] pane = new Table[]{null};\n          \n          \n            \n                    Cons<String>[] rebuild = {null};\n          \n          \n            \n                    Table[] pane = {null};", "url": "https://github.com/Anuken/Mindustry/pull/3267#discussion_r546869313", "createdAt": "2020-12-21T18:45:26Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/ui/SearchBar.java", "diffHunk": "@@ -0,0 +1,57 @@\n+package mindustry.ui;\n+\n+import arc.func.*;\n+import arc.scene.ui.layout.*;\n+import arc.struct.*;\n+import mindustry.gen.*;\n+\n+public class SearchBar{\n+    public static <T> Table add(Table parent, Seq<T> list, Func<String, String> queryf,\n+            Func<T, String> namef, Cons2<Table, T> itemc, Cons<Cell<Table>> barc){\n+        Cons<String>[] rebuild = new Cons[]{null};\n+        Table[] pane = new Table[]{null};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0e3dc7fc7adcc5d5092e0609812cd2df4271d03"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4438, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}