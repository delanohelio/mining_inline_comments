{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxMjA1NTQ1", "number": 4004, "title": "raw strings for SurfaceShaders ", "bodyText": "This small pr allows Shaders.SurfaceShaders to be constructed with two Strings containing the raw shader code for modding purposes.\nMainly to turn this*\nvar water = new Shader(readString(\"shaders/screenspace.vert\"), readString(\"shaders/myWater.frag\"));\nShaders.water = extend(Shaders.SurfaceShader, \"water\", {\n\tsetVertexAttribute(name, size, type, normalize, stride, buffer) {\n\t\twater.setVertexAttribute(name, size, type, normalize, stride, buffer);\n\t},\n\tenableVertexAttribute(location){\n\t\twater.enableVertexAttribute(location);\n\t},\n\tdisableVertexAttribute(name){\n\t\twater.disableVertexAttribute(name);\n\t},\n\tfetchUniformLocation(name, pedantic) {\n\t\treturn water.fetchUniformLocation(name,pedantic);\n\t},\n\tgetAttributeLocation(name){\n\t\treturn water.getAttributeLocation(name);\n\t},\n\tgetAttributes(){\n\t\treturn water.getAttributes();\n\t},\n\tgetUniforms(){\n\t\treturn water.getUniforms();\n\t},\n\tgetAttributeSize(name){\n\t\treturn water.getAttributeSize(name);\n\t},\n\tbind(){\n\t\twater.bind();\n\t},\n\thasUniform(name) {\n\t\treturn water.hasUniform(name);\n\t},\n\tgetUniformType(name) {\n\t\treturn water.getUniformType(name);\n\t},\n\tgetUniformLocation(name) {\n\t\treturn water.getUniformLocation(name);\n\t},\n\tgetUniformSize(name) {\n\t\treturn water.getUniformSize(name);\n\t},\n\tdispose() {\n\t\twater.dispose();\n\t\tthis.super$dispose();\n\t},\n\tisDisposed() {\n\t\treturn water.isDisposed();\n\t}\n});\ninto\nShaders.water = new Shaders.SurfaceShader(readString(\"shaders/screenspace.vert\"), readString(\"shaders/myWater.frag\"));\nOtherwise, no new functionality is added.\n*The workaround code doesn't function fully either, as shaders are sometimes unbinding incorrectly.", "createdAt": "2020-12-16T14:30:08Z", "url": "https://github.com/Anuken/Mindustry/pull/4004", "merged": true, "mergeCommit": {"oid": "9a88426ff75e38b9d691d2b2201228d79629aec6"}, "closed": true, "closedAt": "2020-12-17T00:39:09Z", "author": {"login": "Xeloboyo"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmvoMiAH2gAyNTQxMjA1NTQ1OjczN2Y1NTRhMmIzMWY2MTU1OTk0YTNlNjlmODNjODhlNThiNDdkNWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmworfAH2gAyNTQxMjA1NTQ1OjBjNzk5NzUwZDhkNmE3ZTM0MDIzNGFhZGUyNDUyYTRkYmU1ZTNmMzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "737f554a2b31f6155994a3e69f83c88e58b47d5f", "author": {"user": {"login": "Xeloboyo", "name": "Xelo"}}, "url": "https://github.com/Anuken/Mindustry/commit/737f554a2b31f6155994a3e69f83c88e58b47d5f", "committedDate": "2020-12-16T14:15:48Z", "message": "SurfaceShaders thing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNzYwNDYy", "url": "https://github.com/Anuken/Mindustry/pull/4004#pullrequestreview-553760462", "createdAt": "2020-12-16T14:49:28Z", "commit": {"oid": "737f554a2b31f6155994a3e69f83c88e58b47d5f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNDo0OToyOVrOIHJBWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNDo1MDo0OVrOIHJGzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDM1ODc0Ng==", "bodyText": "use * imports", "url": "https://github.com/Anuken/Mindustry/pull/4004#discussion_r544358746", "createdAt": "2020-12-16T14:49:29Z", "author": {"login": "summetdev"}, "path": "core/src/mindustry/graphics/Shaders.java", "diffHunk": "@@ -1,6 +1,7 @@\n package mindustry.graphics;\n \n import arc.*;\n+import arc.files.Fi;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "737f554a2b31f6155994a3e69f83c88e58b47d5f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDM2MDE0Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        super(getShaderFi(\"screenspace.vert\"), getShaderFi(frag+\".frag\"));\n          \n          \n            \n                        super(getShaderFi(\"screenspace.vert\"), getShaderFi(frag + \".frag\"));", "url": "https://github.com/Anuken/Mindustry/pull/4004#discussion_r544360143", "createdAt": "2020-12-16T14:50:49Z", "author": {"login": "summetdev"}, "path": "core/src/mindustry/graphics/Shaders.java", "diffHunk": "@@ -225,11 +226,18 @@ public void apply(){\n         }\n     }\n \n-    public static class SurfaceShader extends LoadShader{\n-\n+    public static class SurfaceShader extends Shader{\n         public SurfaceShader(String frag){\n-            super(frag, \"screenspace\");\n+            super(getShaderFi(\"screenspace.vert\"), getShaderFi(frag+\".frag\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "737f554a2b31f6155994a3e69f83c88e58b47d5f"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18100e1aeec255205674aa808698ae9216936dca", "author": {"user": {"login": "Xeloboyo", "name": "Xelo"}}, "url": "https://github.com/Anuken/Mindustry/commit/18100e1aeec255205674aa808698ae9216936dca", "committedDate": "2020-12-16T15:23:49Z", "message": "Update core/src/mindustry/graphics/Shaders.java\r\n\r\nspacing fix\n\nCo-authored-by: Antsiferov Andrew <summet.dev@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1aee45d3ce5f88c739609c6a4c3c8191cd4b1edf", "author": {"user": {"login": "Xeloboyo", "name": "Xelo"}}, "url": "https://github.com/Anuken/Mindustry/commit/1aee45d3ce5f88c739609c6a4c3c8191cd4b1edf", "committedDate": "2020-12-16T15:25:57Z", "message": "star import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c799750d8d6a7e340234aade2452a4dbe5e3f31", "author": {"user": {"login": "Xeloboyo", "name": "Xelo"}}, "url": "https://github.com/Anuken/Mindustry/commit/0c799750d8d6a7e340234aade2452a4dbe5e3f31", "committedDate": "2020-12-16T15:26:14Z", "message": "Merge branch 'master' of https://github.com/Xeloboyo/Mindustry"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2265, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}