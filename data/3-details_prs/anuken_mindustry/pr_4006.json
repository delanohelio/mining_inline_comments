{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxMzA5MDI3", "number": 4006, "title": "allow mods to set zoom limits", "bodyText": "added Vars.renderer.{minZoom,maxZoom}.\nshould be set to old limits by default, need to check.\nwhen testing, minZoom is the limit for zooming out, maxZoom for zooming in", "createdAt": "2020-12-16T16:59:59Z", "url": "https://github.com/Anuken/Mindustry/pull/4006", "merged": true, "mergeCommit": {"oid": "74a7dc5eb9c772dd4d7b8405d615770882698207"}, "closed": true, "closedAt": "2020-12-16T21:41:09Z", "author": {"login": "DeltaNedas"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmxWZRAH2gAyNTQxMzA5MDI3OjlkN2Q2MDIxODFkNmY1Y2Y0MTBjZmQ2YjVjMWNjNWQyOTI4NDIxY2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdm1x7wAH2gAyNTQxMzA5MDI3OjAyMDViZmY4N2U2YWZmZjZjYTk4OGEwMjg3NmQ0YWRkZGE0NmExNjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9d7d602181d6f5cf410cfd6b5c1cc5d2928421ce", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/9d7d602181d6f5cf410cfd6b5c1cc5d2928421ce", "committedDate": "2020-12-16T16:16:10Z", "message": "allow mods to set zoom limits"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzODk2ODI0", "url": "https://github.com/Anuken/Mindustry/pull/4006#pullrequestreview-553896824", "createdAt": "2020-12-16T17:02:21Z", "commit": {"oid": "9d7d602181d6f5cf410cfd6b5c1cc5d2928421ce"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNzowMjoyMlrOIHPoNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNzowMjoyMlrOIHPoNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ2Njk5OA==", "bodyText": "Where did the Math.round go?", "url": "https://github.com/Anuken/Mindustry/pull/4006#discussion_r544466998", "createdAt": "2020-12-16T17:02:22Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/core/Renderer.java", "diffHunk": "@@ -302,16 +304,19 @@ public void scaleCamera(float amount){\n     }\n \n     public void clampScale(){\n-        float s = Scl.scl(1f);\n-        targetscale = Mathf.clamp(targetscale, minScale(), Math.round(s * 6));\n+        targetscale = Mathf.clamp(targetscale, minScale(), maxScale());\n     }\n \n     public float getDisplayScale(){\n         return camerascale;\n     }\n \n     public float minScale(){\n-        return Scl.scl(1.5f);\n+        return Scl.scl(minZoom);\n+    }\n+\n+    public float maxScale(){\n+        return Scl.scl(maxZoom);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d7d602181d6f5cf410cfd6b5c1cc5d2928421ce"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af46b6fc970e8960beb56067c622837e026ecdb5", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/af46b6fc970e8960beb56067c622837e026ecdb5", "committedDate": "2020-12-16T17:21:18Z", "message": "rounding"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzOTYzMDA3", "url": "https://github.com/Anuken/Mindustry/pull/4006#pullrequestreview-553963007", "createdAt": "2020-12-16T18:20:45Z", "commit": {"oid": "af46b6fc970e8960beb56067c622837e026ecdb5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODoyMDo0NVrOIHS9FQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODoyMDo0NVrOIHS9FQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUyMTQ5Mw==", "bodyText": "minScale wasn't rounded before.", "url": "https://github.com/Anuken/Mindustry/pull/4006#discussion_r544521493", "createdAt": "2020-12-16T18:20:45Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/core/Renderer.java", "diffHunk": "@@ -302,16 +304,19 @@ public void scaleCamera(float amount){\n     }\n \n     public void clampScale(){\n-        float s = Scl.scl(1f);\n-        targetscale = Mathf.clamp(targetscale, minScale(), Math.round(s * 6));\n+        targetscale = Mathf.clamp(targetscale, minScale(), maxScale());\n     }\n \n     public float getDisplayScale(){\n         return camerascale;\n     }\n \n     public float minScale(){\n-        return Scl.scl(1.5f);\n+        return Math.round(Scl.scl(minZoom));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af46b6fc970e8960beb56067c622837e026ecdb5"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27e6cf57493ce507e238d34b6005051e349d367a", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/27e6cf57493ce507e238d34b6005051e349d367a", "committedDate": "2020-12-16T18:31:36Z", "message": "dont round min"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzOTc2Mjc3", "url": "https://github.com/Anuken/Mindustry/pull/4006#pullrequestreview-553976277", "createdAt": "2020-12-16T18:37:45Z", "commit": {"oid": "27e6cf57493ce507e238d34b6005051e349d367a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODozNzo0NVrOIHTpLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODozNzo0NVrOIHTpLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUzMjc4Mg==", "bodyText": "hold up, why is this 1.5*6 instead of 6", "url": "https://github.com/Anuken/Mindustry/pull/4006#discussion_r544532782", "createdAt": "2020-12-16T18:37:45Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/core/Renderer.java", "diffHunk": "@@ -30,6 +30,8 @@\n     public @Nullable Bloom bloom;\n     public FrameBuffer effectBuffer = new FrameBuffer();\n     public float laserOpacity = 1f;\n+    /** minZoom = zooming out, maxZoom = zooming in */\n+    public float minZoom = 1.5f, maxZoom = 1.5f * 6;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27e6cf57493ce507e238d34b6005051e349d367a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0205bff87e6afff6ca988a02876d4addda46a164", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/0205bff87e6afff6ca988a02876d4addda46a164", "committedDate": "2020-12-16T21:25:52Z", "message": "zoom 1.5 -> 1"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2267, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}