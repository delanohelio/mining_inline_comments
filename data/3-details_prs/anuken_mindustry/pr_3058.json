{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3OTk3MTI5", "number": 3058, "title": "v5 Javelin Movement Lightning Ability", "bodyText": "The attack of the \"Flarelins\"", "createdAt": "2020-10-22T04:06:27Z", "url": "https://github.com/Anuken/Mindustry/pull/3058", "merged": true, "mergeCommit": {"oid": "968d94904a7ba1ad3f8e7483ab027324621d60d5"}, "closed": true, "closedAt": "2020-10-30T13:40:22Z", "author": {"login": "MEEPofFaith"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdU4UI0AH2gAyNTA3OTk3MTI5OjQzZDFmMzYzZTU2Y2Q2NDAyNmYxN2JjMjFlZTJhNDMyNTVmNzY3YjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXKDh8AH2gAyNTA3OTk3MTI5OmExNGFlMWJkZjhkMTY3NjIxODQwNTg2YzFjNTJjZWQxNzdkM2M4YjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "43d1f363e56cd64026f17bc21ee2a43255f767b2", "author": {"user": {"login": "MEEPofFaith", "name": "Matthew Peng"}}, "url": "https://github.com/Anuken/Mindustry/commit/43d1f363e56cd64026f17bc21ee2a43255f767b2", "committedDate": "2020-10-22T02:12:24Z", "message": "Lightning Ability"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2dd234d96029f871fa5130b1024a61608b901d34", "author": {"user": {"login": "MEEPofFaith", "name": "Matthew Peng"}}, "url": "https://github.com/Anuken/Mindustry/commit/2dd234d96029f871fa5130b1024a61608b901d34", "committedDate": "2020-10-22T02:32:29Z", "message": "oopeth"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bd07866d8bdcd427fdd684f502d7b49914506c8", "author": {"user": {"login": "MEEPofFaith", "name": "Matthew Peng"}}, "url": "https://github.com/Anuken/Mindustry/commit/0bd07866d8bdcd427fdd684f502d7b49914506c8", "committedDate": "2020-10-22T02:51:32Z", "message": "m hm"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50410be90a971b0089b7ba07b503ab33f731b6a0", "author": {"user": {"login": "MEEPofFaith", "name": "Matthew Peng"}}, "url": "https://github.com/Anuken/Mindustry/commit/50410be90a971b0089b7ba07b503ab33f731b6a0", "committedDate": "2020-10-22T04:33:57Z", "message": "Define color instead of based on team"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed2825b0d9c49d023b73b0f1ccd0506a9f25a30f", "author": {"user": {"login": "MEEPofFaith", "name": "Matthew Peng"}}, "url": "https://github.com/Anuken/Mindustry/commit/ed2825b0d9c49d023b73b0f1ccd0506a9f25a30f", "committedDate": "2020-10-22T04:37:52Z", "message": "doot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7b6013d8d704337fcfef2c819801827726e38f8", "author": {"user": {"login": "MEEPofFaith", "name": "Matthew Peng"}}, "url": "https://github.com/Anuken/Mindustry/commit/e7b6013d8d704337fcfef2c819801827726e38f8", "committedDate": "2020-10-22T04:39:55Z", "message": "doot"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MzY0NTM2", "url": "https://github.com/Anuken/Mindustry/pull/3058#pullrequestreview-514364536", "createdAt": "2020-10-22T05:13:54Z", "commit": {"oid": "e7b6013d8d704337fcfef2c819801827726e38f8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwNToxNTowNVrOHmQ4Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwNToxNTowNVrOHmQ4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTg4NDQ2Nw==", "bodyText": "Is this constructor really needed?", "url": "https://github.com/Anuken/Mindustry/pull/3058#discussion_r509884467", "createdAt": "2020-10-22T05:15:05Z", "author": {"login": "summetdev"}, "path": "core/src/mindustry/entities/abilities/MovementLightningAbility.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package mindustry.entities.abilities;\n+\n+import arc.graphics.*;\n+import arc.math.*;\n+import arc.util.*;\n+import arc.audio.*;\n+import mindustry.content.*;\n+import mindustry.entities.*;\n+import mindustry.gen.*;\n+\n+public class MovementLightningAbility extends Ability{\n+    public float damage = 35f, reload = 0.15f;\n+    public int length = 12;\n+    public float minSpeed = 0.8f, maxSpeed = 1.2f;\n+    public Effect shootEffect = Fx.sparkShoot;\n+    public Sound shootSound = Sounds.spark;\n+    public Color color = Color.valueOf(\"a9d8ff\");\n+    \n+    MovementLightningAbility(){}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e7b6013d8d704337fcfef2c819801827726e38f8"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da3c11a20120982be081072b31089c70e4fc13da", "author": {"user": {"login": "MEEPofFaith", "name": "Matthew Peng"}}, "url": "https://github.com/Anuken/Mindustry/commit/da3c11a20120982be081072b31089c70e4fc13da", "committedDate": "2020-10-22T06:14:54Z", "message": "Comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0NzE1MTUy", "url": "https://github.com/Anuken/Mindustry/pull/3058#pullrequestreview-514715152", "createdAt": "2020-10-22T13:18:32Z", "commit": {"oid": "da3c11a20120982be081072b31089c70e4fc13da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxMzoxODozMlrOHmhUtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxMzoxODozMlrOHmhUtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDE1MzkxMA==", "bodyText": "Yes, I can see that the variable is called \"shootEffect\", you don't need to write \"Shoot effect\" above it. Either add more descriptive comments (\"effect created at unit position when shooting\"), or don't add anything. Same for the sound.", "url": "https://github.com/Anuken/Mindustry/pull/3058#discussion_r510153910", "createdAt": "2020-10-22T13:18:32Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/entities/abilities/MovementLightningAbility.java", "diffHunk": "@@ -0,0 +1,47 @@\n+package mindustry.entities.abilities;\n+\n+import arc.graphics.*;\n+import arc.math.*;\n+import arc.util.*;\n+import arc.audio.*;\n+import mindustry.content.*;\n+import mindustry.entities.*;\n+import mindustry.gen.*;\n+\n+public class MovementLightningAbility extends Ability{\n+    //Lightning damage\n+    public float damage = 35f;\n+    //Ticks between firing\n+    public float reload = 15f;\n+    //Length of lightning\n+    public int length = 12;\n+    //Speeds for when to start lightninging and when to stop getting faster\n+    public float minSpeed = 0.8f, maxSpeed = 1.2f;\n+    //Shoot effect\n+    public Effect shootEffect = Fx.sparkShoot;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da3c11a20120982be081072b31089c70e4fc13da"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5203d17910840c911eb9ae10b2793fcac41b10bf", "author": {"user": {"login": "MEEPofFaith", "name": "Matthew Peng"}}, "url": "https://github.com/Anuken/Mindustry/commit/5203d17910840c911eb9ae10b2793fcac41b10bf", "committedDate": "2020-10-22T22:18:12Z", "message": "Comment stuff"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MTc0NjQ2", "url": "https://github.com/Anuken/Mindustry/pull/3058#pullrequestreview-519174646", "createdAt": "2020-10-28T23:58:38Z", "commit": {"oid": "5203d17910840c911eb9ae10b2793fcac41b10bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMzo1ODozOFrOHqBwGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMzo1ODozOFrOHqBwGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzgzMDkzNw==", "bodyText": "This isn't correct. \"Ticks between firing\" is not what reload is. For example, if reload = 15, this will happen every frame, because scl = 1 (at max sped) and 15/10 > 1.", "url": "https://github.com/Anuken/Mindustry/pull/3058#discussion_r513830937", "createdAt": "2020-10-28T23:58:38Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/entities/abilities/MovementLightningAbility.java", "diffHunk": "@@ -0,0 +1,46 @@\n+package mindustry.entities.abilities;\n+\n+import arc.graphics.*;\n+import arc.math.*;\n+import arc.util.*;\n+import arc.audio.*;\n+import mindustry.content.*;\n+import mindustry.entities.*;\n+import mindustry.gen.*;\n+\n+public class MovementLightningAbility extends Ability{\n+    //Lightning damage\n+    public float damage = 35f;\n+    //Ticks between firing\n+    public float reload = 15f;\n+    //Length of the lightning\n+    public int length = 12;\n+    //Speeds for when to start lightninging and when to stop getting faster\n+    public float minSpeed = 0.8f, maxSpeed = 1.2f;\n+    //Lightning Color\n+    public Color color = Color.valueOf(\"a9d8ff\");\n+    \n+    public Effect shootEffect = Fx.sparkShoot;\n+    public Sound shootSound = Sounds.spark;\n+    \n+    MovementLightningAbility(){}\n+    \n+    public MovementLightningAbility(float damage, int length, float reload, float minSpeed, float maxSpeed, Color color){\n+        this.damage = damage;\n+        this.length = length;\n+        this.reload = reload;\n+        this.minSpeed = minSpeed;\n+        this.maxSpeed = maxSpeed;\n+        this.color = color;\n+    }\n+    \n+    @Override\n+    public void update(Unit unit){\n+        float scl = Mathf.clamp((unit.vel().len() - minSpeed) / (maxSpeed - minSpeed));\n+        if(Mathf.chance(Time.delta * (reload/10 * scl))){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5203d17910840c911eb9ae10b2793fcac41b10bf"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a14ae1bdf8d167621840586c1c52ced177d3c8b5", "author": {"user": {"login": "MEEPofFaith", "name": "Matthew Peng"}}, "url": "https://github.com/Anuken/Mindustry/commit/a14ae1bdf8d167621840586c1c52ced177d3c8b5", "committedDate": "2020-10-29T04:00:24Z", "message": "Lightning chance fix."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2443, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}