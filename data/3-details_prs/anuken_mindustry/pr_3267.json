{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1NjI5ODA3", "number": 3267, "title": "SearchBar class - add search bars to mods", "bodyText": "lets go\nnot sure if only remote servers is good or if i should add it to local and global too", "createdAt": "2020-11-04T20:44:05Z", "url": "https://github.com/Anuken/Mindustry/pull/3267", "merged": true, "mergeCommit": {"oid": "8e4b35eb0707a3755d76b3af512e6709001b987e"}, "closed": true, "closedAt": "2020-12-26T16:22:11Z", "author": {"login": "DeltaNedas"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGRKMVAH2gAyNTE1NjI5ODA3OmM3OGI1ZjNmODcwZjljZTU0MmIzMGE1YTg4MDhmNjBhZTYwMDJmODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdp3qF0gH2gAyNTE1NjI5ODA3OjZiY2M2ZGI5NjE1NTgxYTQwOWY4ZDZkZTNlOGIxMzJmYTQ4MGRhNDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c78b5f3f870f9ce542b30a5a8808f60ae6002f87", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/c78b5f3f870f9ce542b30a5a8808f60ae6002f87", "committedDate": "2020-09-06T16:40:18Z", "message": "Create SearchBar and make ModsDialog use it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8af14e10dca6bc39bb1eda8c41e871e29c4816e1", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/8af14e10dca6bc39bb1eda8c41e871e29c4816e1", "committedDate": "2020-11-04T19:47:53Z", "message": "Merge branch 'master' of https://github.com/Anuken/Mindustry into search"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60fe768e56c9a90c9ec892178d8e2c709e7fc879", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/60fe768e56c9a90c9ec892178d8e2c709e7fc879", "committedDate": "2020-11-04T20:36:06Z", "message": "add search bar to servers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzNzM5OTgw", "url": "https://github.com/Anuken/Mindustry/pull/3267#pullrequestreview-523739980", "createdAt": "2020-11-04T21:14:37Z", "commit": {"oid": "60fe768e56c9a90c9ec892178d8e2c709e7fc879"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMToxNjozMFrOHtp_mA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMToxNjozMFrOHtp_mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzYzNTk5Mg==", "bodyText": "Anuke hate spaces \ud83d\udc40\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Cons<String>[] rebuild = new Cons[] {null};\n          \n          \n            \n                    Table[] pane = new Table[] {null};\n          \n          \n            \n                    Cons<String>[] rebuild = new Cons[]{null};\n          \n          \n            \n                    Table[] pane = new Table[]{null};", "url": "https://github.com/Anuken/Mindustry/pull/3267#discussion_r517635992", "createdAt": "2020-11-04T21:16:30Z", "author": {"login": "summetdev"}, "path": "core/src/mindustry/ui/SearchBar.java", "diffHunk": "@@ -0,0 +1,49 @@\n+package mindustry.ui;\n+\n+import arc.func.*;\n+import arc.scene.ui.layout.*;\n+import arc.struct.*;\n+import mindustry.gen.*;\n+\n+public class SearchBar{\n+    public static <T> Table add(Table parent, Seq<T> list, Func<String, String> queryf,\n+            Func<T, String> namef, Cons2<Table, T> itemf){\n+        Cons<String>[] rebuild = new Cons[] {null};\n+        Table[] pane = new Table[] {null};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60fe768e56c9a90c9ec892178d8e2c709e7fc879"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27c0988623f850e3871477e1ee756a14786479d2", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/27c0988623f850e3871477e1ee756a14786479d2", "committedDate": "2020-11-04T22:02:36Z", "message": "Update core/src/mindustry/ui/SearchBar.java\n\nCo-authored-by: Antsiferov Andrew <summet.dev@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bfdc1545939e0a98e5d25f08661bc57c6c26151", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/2bfdc1545939e0a98e5d25f08661bc57c6c26151", "committedDate": "2020-11-04T22:03:59Z", "message": "a"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8824f54ca559eefae4a02e9181f96162ea7023d", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/e8824f54ca559eefae4a02e9181f96162ea7023d", "committedDate": "2020-11-16T08:37:12Z", "message": "Merge branch 'master' into search"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89b59fa8c2b19f6f83e904a159808a4944efa3c1", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/89b59fa8c2b19f6f83e904a159808a4944efa3c1", "committedDate": "2020-12-11T14:55:28Z", "message": "Merge branch 'master' of https://github.com/Anuken/Mindustry into search"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfb1298e845102044e78b35fe838b58187569b7a", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/dfb1298e845102044e78b35fe838b58187569b7a", "committedDate": "2020-12-11T15:10:04Z", "message": "fix mods menu not rowing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6c13dbbc1da9a11ecf2c1c4935b92ac48917b34", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/f6c13dbbc1da9a11ecf2c1c4935b92ac48917b34", "committedDate": "2020-12-11T16:33:47Z", "message": "remove search bar for remote servers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7854cb6d24b5405a7ff56d703757a2fe83bcb07d", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/7854cb6d24b5405a7ff56d703757a2fe83bcb07d", "committedDate": "2020-12-18T16:46:56Z", "message": "h"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "587c7a1ca58ef4572eb865ccae6da12b638a019d", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/587c7a1ca58ef4572eb865ccae6da12b638a019d", "committedDate": "2020-12-18T17:44:31Z", "message": "hide searchbar on landscape mobile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NzExNTgw", "url": "https://github.com/Anuken/Mindustry/pull/3267#pullrequestreview-555711580", "createdAt": "2020-12-18T18:18:54Z", "commit": {"oid": "587c7a1ca58ef4572eb865ccae6da12b638a019d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODoxODo1NFrOIItq8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODoxOTozNlrOIItsJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAwNzc5NA==", "bodyText": "The display name already has colors stripped.", "url": "https://github.com/Anuken/Mindustry/pull/3267#discussion_r546007794", "createdAt": "2020-12-18T18:18:54Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/ui/dialogs/ModsDialog.java", "diffHunk": "@@ -136,14 +139,12 @@ void setup(){\n         cont.row();\n \n         if(!mods.list().isEmpty()){\n-            cont.pane(table -> {\n-                table.margin(10f).top();\n-\n-                boolean anyDisabled = false;\n-                for(LoadedMod mod : mods.list()){\n-\n-                    if(!mod.enabled() && !anyDisabled && mods.list().size > 0){\n-                        anyDisabled = true;\n+            boolean[] anyDisabled = {false};\n+            SearchBar.add(cont, mods.list(),\n+                mod -> Strings.stripColors(mod.meta.displayName()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "587c7a1ca58ef4572eb865ccae6da12b638a019d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAwODEwMg==", "bodyText": "This is very hacky and will break without an obvious cause if any relevant layout is changed.", "url": "https://github.com/Anuken/Mindustry/pull/3267#discussion_r546008102", "createdAt": "2020-12-18T18:19:36Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/ui/dialogs/ModsDialog.java", "diffHunk": "@@ -217,20 +218,19 @@ void setup(){\n                                 }).size(50f);\n                             }\n                         }).growX().right().padRight(-8f).padTop(-8f);\n-\n-\n                     }, Styles.clearPartialt, () -> showMod(mod)).size(w, h).growX().pad(4f);\n                     table.row();\n-                }\n-            });\n+                }).margin(10f).top();\n \n+                if(mobile && !Core.graphics.isPortrait()){\n+                    //hide search bar on mobile, takes up too much space\n+                    cont.getCells().get(2).get().clear();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "587c7a1ca58ef4572eb865ccae6da12b638a019d"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0e3dc7fc7adcc5d5092e0609812cd2df4271d03", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/c0e3dc7fc7adcc5d5092e0609812cd2df4271d03", "committedDate": "2020-12-18T19:23:07Z", "message": "anukes feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NzczNzYx", "url": "https://github.com/Anuken/Mindustry/pull/3267#pullrequestreview-555773761", "createdAt": "2020-12-18T19:51:53Z", "commit": {"oid": "c0e3dc7fc7adcc5d5092e0609812cd2df4271d03"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MDg0MTM4", "url": "https://github.com/Anuken/Mindustry/pull/3267#pullrequestreview-556084138", "createdAt": "2020-12-21T01:15:55Z", "commit": {"oid": "c0e3dc7fc7adcc5d5092e0609812cd2df4271d03"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQwMToxNTo1NVrOIJJobg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQwMToxNTo1NVrOIJJobg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQ2NTkwMg==", "bodyText": "probably should happen on desktop too", "url": "https://github.com/Anuken/Mindustry/pull/3267#discussion_r546465902", "createdAt": "2020-12-21T01:15:55Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/ui/dialogs/ModsDialog.java", "diffHunk": "@@ -30,6 +30,9 @@ public ModsDialog(){\n         buttons.button(\"@mods.guide\", Icon.link, () -> Core.app.openURI(modGuideURL)).size(210, 64f);\n \n         shown(this::setup);\n+        if(mobile){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0e3dc7fc7adcc5d5092e0609812cd2df4271d03"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NTg5NDcy", "url": "https://github.com/Anuken/Mindustry/pull/3267#pullrequestreview-556589472", "createdAt": "2020-12-21T18:45:26Z", "commit": {"oid": "c0e3dc7fc7adcc5d5092e0609812cd2df4271d03"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxODo0NToyNlrOIJiQQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxODo0NToyNlrOIJiQQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njg2OTMxMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Cons<String>[] rebuild = new Cons[]{null};\n          \n          \n            \n                    Table[] pane = new Table[]{null};\n          \n          \n            \n                    Cons<String>[] rebuild = {null};\n          \n          \n            \n                    Table[] pane = {null};", "url": "https://github.com/Anuken/Mindustry/pull/3267#discussion_r546869313", "createdAt": "2020-12-21T18:45:26Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/ui/SearchBar.java", "diffHunk": "@@ -0,0 +1,57 @@\n+package mindustry.ui;\n+\n+import arc.func.*;\n+import arc.scene.ui.layout.*;\n+import arc.struct.*;\n+import mindustry.gen.*;\n+\n+public class SearchBar{\n+    public static <T> Table add(Table parent, Seq<T> list, Func<String, String> queryf,\n+            Func<T, String> namef, Cons2<Table, T> itemc, Cons<Cell<Table>> barc){\n+        Cons<String>[] rebuild = new Cons[]{null};\n+        Table[] pane = new Table[]{null};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0e3dc7fc7adcc5d5092e0609812cd2df4271d03"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b4ab9e72b659d255a96085ad32c3dd8e8d9681e", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/0b4ab9e72b659d255a96085ad32c3dd8e8d9681e", "committedDate": "2020-12-22T18:16:01Z", "message": "Update core/src/mindustry/ui/SearchBar.java\n\nCo-authored-by: Anuken <arnukren@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bcc6db9615581a409f8d6de3e8b132fa480da45", "author": {"user": {"login": "DeltaNedas", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/6bcc6db9615581a409f8d6de3e8b132fa480da45", "committedDate": "2020-12-26T07:18:53Z", "message": "java dumb"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2397, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}