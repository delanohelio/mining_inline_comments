{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2NjgyMzMx", "number": 3041, "title": "Admin chat.", "bodyText": "Preview:\n\nI'm not sure about #FF4000, so suggest your colors.\nP.S: Now it's not <Admin> but <A>. (Thanks to @Quezler)", "createdAt": "2020-10-20T10:40:55Z", "url": "https://github.com/Anuken/Mindustry/pull/3041", "merged": true, "mergeCommit": {"oid": "e68d28ef51dd1da9037ecd36be85c85da3f87484"}, "closed": true, "closedAt": "2020-10-20T13:10:19Z", "author": {"login": "summetdev"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUWSKMAH2gAyNTA2NjgyMzMxOmQzZTI2YzdjMTY2NzIzZjcyNmFmYjg2MzJkZjQyNTMwNTYxNjM4N2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUXlFzgH2gAyNTA2NjgyMzMxOmZmYjk0NTc2YWM2ZTc0OWFmNTU0NGNmZmUzYmE1YjgwMWEzM2QzYTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d3e26c7c166723f726afb8632df425305616387f", "author": {"user": {"login": "summetdev", "name": "Andrew Antsiferov"}}, "url": "https://github.com/Anuken/Mindustry/commit/d3e26c7c166723f726afb8632df425305616387f", "committedDate": "2020-10-20T10:33:28Z", "message": "Admin chat command"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyNTcxMDEx", "url": "https://github.com/Anuken/Mindustry/pull/3041#pullrequestreview-512571011", "createdAt": "2020-10-20T10:42:16Z", "commit": {"oid": "d3e26c7c166723f726afb8632df425305616387f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89fca49b91681b6969fa273ac98c89583211742d", "author": {"user": {"login": "summetdev", "name": "Andrew Antsiferov"}}, "url": "https://github.com/Anuken/Mindustry/commit/89fca49b91681b6969fa273ac98c89583211742d", "committedDate": "2020-10-20T10:51:21Z", "message": "Put admin color to Pal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f95aa035d76f21e5b862de921dceed5701fde79", "author": {"user": {"login": "summetdev", "name": "Andrew Antsiferov"}}, "url": "https://github.com/Anuken/Mindustry/commit/9f95aa035d76f21e5b862de921dceed5701fde79", "committedDate": "2020-10-20T10:56:09Z", "message": "Indents"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c1c0f95574c474a651b3d38f00d96412f15fc94", "author": {"user": {"login": "summetdev", "name": "Andrew Antsiferov"}}, "url": "https://github.com/Anuken/Mindustry/commit/0c1c0f95574c474a651b3d38f00d96412f15fc94", "committedDate": "2020-10-20T10:56:53Z", "message": "Admin -> A"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyNjI5NTA3", "url": "https://github.com/Anuken/Mindustry/pull/3041#pullrequestreview-512629507", "createdAt": "2020-10-20T12:02:08Z", "commit": {"oid": "0c1c0f95574c474a651b3d38f00d96412f15fc94"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMjowMjowOVrOHk412Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMjowMjowOVrOHk412Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQ0MjA3Mw==", "bodyText": "this would be identical to how teamchat does it:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        Groups.player.each(Player::admin, a -> a.sendMessage(args[0], player, \"[\" + Pal.adminChat + \"]<A>\" + NetClient.colorizeName(player.id, player.name)));\n          \n          \n            \n                        Groups.player.each(Player::admin, a -> a.sendMessage(args[0], player, \"[#\" + Pal.adminChat.toString() + \"]<A>\" + NetClient.colorizeName(player.id, player.name)));", "url": "https://github.com/Anuken/Mindustry/pull/3041#discussion_r508442073", "createdAt": "2020-10-20T12:02:09Z", "author": {"login": "Quezler"}, "path": "core/src/mindustry/core/NetServer.java", "diffHunk": "@@ -299,6 +300,15 @@ private void registerCommands(){\n             }\n         });\n \n+        clientCommands.<Player>register(\"a\", \"<message...>\", \"Send a message only to admins.\", (args, player) -> {\n+            if(!player.admin){\n+                player.sendMessage(\"[scarlet]You must be admin to use this command.\");\n+                return;\n+            }\n+\t\t\t\n+            Groups.player.each(Player::admin, a -> a.sendMessage(args[0], player, \"[\" + Pal.adminChat + \"]<A>\" + NetClient.colorizeName(player.id, player.name)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c1c0f95574c474a651b3d38f00d96412f15fc94"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffb94576ac6e749af5544cffe3ba5b801a33d3a7", "author": {"user": {"login": "summetdev", "name": "Andrew Antsiferov"}}, "url": "https://github.com/Anuken/Mindustry/commit/ffb94576ac6e749af5544cffe3ba5b801a33d3a7", "committedDate": "2020-10-20T12:04:03Z", "message": "Better colors\n\nCo-authored-by: Patrick 'Quezler' Mounier <Quezler@me.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2441, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}