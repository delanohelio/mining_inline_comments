{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0NTE1NDgy", "number": 1570, "title": "Add \"pardon\" command for votekicks", "bodyText": "Allows admins to \"pardon\" a votekick ban, useful for when a player gets unfairly votekicked and has to wait 60 minutes, but he can instead be pardoned and join right away.", "createdAt": "2020-02-12T20:27:07Z", "url": "https://github.com/Anuken/Mindustry/pull/1570", "merged": true, "mergeCommit": {"oid": "8e9dabb350626700fb40172b083da852a3966785"}, "closed": true, "closedAt": "2020-03-02T18:37:04Z", "author": {"login": "fuzzbuck"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDsURMgH2gAyMzc0NTE1NDgyOjAxZmExMjIzZDk2ZDI2NTU2NzlkNWQxMmFmMDQ3MjY4ZTFkMjA0Yzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJyCzdgH2gAyMzc0NTE1NDgyOjJiYjc5Y2Y5OWY2ZDZkYTU5NGZjN2RlZmNlN2NiNjlkYWViMzc0MDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "01fa1223d96d2655679d5d12af047268e1d204c9", "author": {"user": {"login": "fuzzbuck", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/01fa1223d96d2655679d5d12af047268e1d204c9", "committedDate": "2020-02-12T20:25:49Z", "message": "Add \"pardon\" command\n\nAllows players who have been incorrectly votekicked to join again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83886867ae73f415ff25fdd828a54d48f9e70fe1", "author": {"user": {"login": "fuzzbuck", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/83886867ae73f415ff25fdd828a54d48f9e70fe1", "committedDate": "2020-02-12T20:29:44Z", "message": "isn't hasn't"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3Nzg0MDAw", "url": "https://github.com/Anuken/Mindustry/pull/1570#pullrequestreview-357784000", "createdAt": "2020-02-12T21:01:32Z", "commit": {"oid": "83886867ae73f415ff25fdd828a54d48f9e70fe1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMTowMTozMlrOFo-auw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMTowMTozOFrOFo-a8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUxMDAxMQ==", "bodyText": "Use getInfoOptional; getInfo will always create an info if it does not exist, and may never return null.", "url": "https://github.com/Anuken/Mindustry/pull/1570#discussion_r378510011", "createdAt": "2020-02-12T21:01:32Z", "author": {"login": "Anuken"}, "path": "server/src/mindustry/server/ServerControl.java", "diffHunk": "@@ -659,6 +659,16 @@ private void registerCommands(){\n                 err(\"That IP/ID is not banned!\");\n             }\n         });\n+        \n+        handler.register(\"pardon\", \"<ID>\", \"Pardons a votekicked player by ID and allows them to join again.\", arg -> {\n+            PlayerInfo info = netServer.admins.getInfo(arg[0]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83886867ae73f415ff25fdd828a54d48f9e70fe1"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUxMDA2NA==", "bodyText": "extra space", "url": "https://github.com/Anuken/Mindustry/pull/1570#discussion_r378510064", "createdAt": "2020-02-12T21:01:38Z", "author": {"login": "Anuken"}, "path": "server/src/mindustry/server/ServerControl.java", "diffHunk": "@@ -659,6 +659,16 @@ private void registerCommands(){\n                 err(\"That IP/ID is not banned!\");\n             }\n         });\n+        \n+        handler.register(\"pardon\", \"<ID>\", \"Pardons a votekicked player by ID and allows them to join again.\", arg -> {\n+            PlayerInfo info = netServer.admins.getInfo(arg[0]);\n+            if(info != null){\n+                info.lastKicked = 0;\n+                info(\"Pardoned player: {0}\", info.lastName);\n+            } else{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83886867ae73f415ff25fdd828a54d48f9e70fe1"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7176e66578221f097f5cb00820b74a61da067b4", "author": {"user": {"login": "fuzzbuck", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/f7176e66578221f097f5cb00820b74a61da067b4", "committedDate": "2020-02-12T21:08:26Z", "message": "getInfoOptional & space"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87808dc8078aa2eeda228d72f680064ddf950fb5", "author": {"user": {"login": "fuzzbuck", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/87808dc8078aa2eeda228d72f680064ddf950fb5", "committedDate": "2020-02-12T21:25:15Z", "message": "pardon me\n\nno pun intended"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MDY1Nzcw", "url": "https://github.com/Anuken/Mindustry/pull/1570#pullrequestreview-359065770", "createdAt": "2020-02-14T16:31:06Z", "commit": {"oid": "87808dc8078aa2eeda228d72f680064ddf950fb5"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MTEwNjg0", "url": "https://github.com/Anuken/Mindustry/pull/1570#pullrequestreview-367110684", "createdAt": "2020-03-02T10:57:29Z", "commit": {"oid": "87808dc8078aa2eeda228d72f680064ddf950fb5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MzExMjY1", "url": "https://github.com/Anuken/Mindustry/pull/1570#pullrequestreview-367311265", "createdAt": "2020-03-02T15:55:03Z", "commit": {"oid": "87808dc8078aa2eeda228d72f680064ddf950fb5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNTo1NTowM1rOFwk1ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNTo1NTowM1rOFwk1ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQ3OTUyMw==", "bodyText": "Might be more accurate to say \"That ID can't be found\" instead.", "url": "https://github.com/Anuken/Mindustry/pull/1570#discussion_r386479523", "createdAt": "2020-03-02T15:55:03Z", "author": {"login": "Anuken"}, "path": "server/src/mindustry/server/ServerControl.java", "diffHunk": "@@ -666,7 +666,7 @@ private void registerCommands(){\n             if(info != null){\n                 info.lastKicked = 0;\n                 info(\"Pardoned player: {0}\", info.lastName);\n-            } else{\n+            }else{\n                 err(\"That ID hasn't been votekicked!\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87808dc8078aa2eeda228d72f680064ddf950fb5"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bb79cf99f6d6da594fc7defce7cb69daeb37405", "author": {"user": {"login": "fuzzbuck", "name": null}}, "url": "https://github.com/Anuken/Mindustry/commit/2bb79cf99f6d6da594fc7defce7cb69daeb37405", "committedDate": "2020-03-02T18:29:43Z", "message": "Update ServerControl.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2153, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}