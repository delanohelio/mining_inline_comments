{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NTk2OTkw", "number": 3869, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMjoyNjoxMVrOFCoGiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNzoyMzoyMVrOFG0YBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Mjk4NTA0OnYy", "diffSide": "RIGHT", "path": "core/src/mindustry/ui/fragments/ChatFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMjoyNjoxMVrOIB5EKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMjoyNjoxMVrOIB5EKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODg1NDQ0MA==", "bodyText": "Whitespace", "url": "https://github.com/Anuken/Mindustry/pull/3869#discussion_r538854440", "createdAt": "2020-12-08T22:26:11Z", "author": {"login": "skykatik"}, "path": "core/src/mindustry/ui/fragments/ChatFragment.java", "diffHunk": "@@ -216,14 +228,25 @@ public void hide(){\n     }\n \n     public void updateChat(){\n-        chatfield.setText(history.get(historyPos));\n-        chatfield.setCursorPosition(chatfield.getText().length());\n+        chatfield.setText(mode.normalizedPrefix() + history.get(historyPos));\n+        updateCursor();\n+    }\n+\n+    public void nextMode(){\n+        mode = mode.next();\n+        chatfield.setText(mode.normalizedPrefix() + chatfield.getText().substring(mode.prev().normalizedPrefix().length()));\n+        updateCursor();\n     }\n \n     public void clearChatInput(){\n         historyPos = 0;\n         history.set(0, \"\");\n-        chatfield.setText(\"\");\n+        chatfield.setText(mode.normalizedPrefix());\n+        updateCursor();\n+    }\n+\n+    public void updateCursor() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d756361485a8b538cbc542968aa7c18a6f2f6d98"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNjkzNzQ3OnYy", "diffSide": "RIGHT", "path": "core/src/mindustry/input/Binding.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNzoyMzowMFrOIIAUhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMjo0OToxMVrOIK5-oA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI2NDc3NQ==", "bodyText": "Tab is already used for the player list.", "url": "https://github.com/Anuken/Mindustry/pull/3869#discussion_r545264775", "createdAt": "2020-12-17T17:23:00Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/input/Binding.java", "diffHunk": "@@ -69,6 +69,7 @@\n     chat_history_prev(KeyCode.up),\n     chat_history_next(KeyCode.down),\n     chat_scroll(new Axis(KeyCode.scroll)),\n+    chat_mode(KeyCode.tab),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "419d64e6f7ac75a4f5a921f5fccd9f9066837341"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI3NjI3Mw==", "bodyText": "Player list isn't displayed by Tab when chat is open.\nWhat would be better key then? \ud83d\udc40", "url": "https://github.com/Anuken/Mindustry/pull/3869#discussion_r545276273", "createdAt": "2020-12-17T17:38:49Z", "author": {"login": "summetdev"}, "path": "core/src/mindustry/input/Binding.java", "diffHunk": "@@ -69,6 +69,7 @@\n     chat_history_prev(KeyCode.up),\n     chat_history_next(KeyCode.down),\n     chat_scroll(new Axis(KeyCode.scroll)),\n+    chat_mode(KeyCode.tab),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI2NDc3NQ=="}, "originalCommit": {"oid": "419d64e6f7ac75a4f5a921f5fccd9f9066837341"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODMwNjU5Mg==", "bodyText": "m.b. Ctrl + Tab", "url": "https://github.com/Anuken/Mindustry/pull/3869#discussion_r548306592", "createdAt": "2020-12-23T22:49:11Z", "author": {"login": "Remint32"}, "path": "core/src/mindustry/input/Binding.java", "diffHunk": "@@ -69,6 +69,7 @@\n     chat_history_prev(KeyCode.up),\n     chat_history_next(KeyCode.down),\n     chat_scroll(new Axis(KeyCode.scroll)),\n+    chat_mode(KeyCode.tab),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI2NDc3NQ=="}, "originalCommit": {"oid": "419d64e6f7ac75a4f5a921f5fccd9f9066837341"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNjkzODk1OnYy", "diffSide": "RIGHT", "path": "core/src/mindustry/ui/fragments/ChatFragment.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNzoyMzoyMVrOIIAVfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMDoxNDo1M1rOIKzePQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI2NTAyMQ==", "bodyText": "Catching exceptions like these is just bad style; you should validate it instead.", "url": "https://github.com/Anuken/Mindustry/pull/3869#discussion_r545265021", "createdAt": "2020-12-17T17:23:21Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/ui/fragments/ChatFragment.java", "diffHunk": "@@ -216,14 +222,35 @@ public void hide(){\n     }\n \n     public void updateChat(){\n-        chatfield.setText(history.get(historyPos));\n-        chatfield.setCursorPosition(chatfield.getText().length());\n+        chatfield.setText(mode.normalizedPrefix() + history.get(historyPos));\n+        updateCursor();\n+    }\n+\n+    public void nextMode(){\n+        ChatMode prev = mode;\n+\n+        do{\n+            mode = mode.next();\n+        }while(!mode.isValid());\n+\n+        try{\n+            chatfield.setText(mode.normalizedPrefix() + chatfield.getText().substring(prev.normalizedPrefix().length()));\n+        }catch(IndexOutOfBoundsException e){ // in case the player removed a prefix", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "419d64e6f7ac75a4f5a921f5fccd9f9066837341"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODE5OTk5Nw==", "bodyText": "Resolved.", "url": "https://github.com/Anuken/Mindustry/pull/3869#discussion_r548199997", "createdAt": "2020-12-23T20:14:53Z", "author": {"login": "summetdev"}, "path": "core/src/mindustry/ui/fragments/ChatFragment.java", "diffHunk": "@@ -216,14 +222,35 @@ public void hide(){\n     }\n \n     public void updateChat(){\n-        chatfield.setText(history.get(historyPos));\n-        chatfield.setCursorPosition(chatfield.getText().length());\n+        chatfield.setText(mode.normalizedPrefix() + history.get(historyPos));\n+        updateCursor();\n+    }\n+\n+    public void nextMode(){\n+        ChatMode prev = mode;\n+\n+        do{\n+            mode = mode.next();\n+        }while(!mode.isValid());\n+\n+        try{\n+            chatfield.setText(mode.normalizedPrefix() + chatfield.getText().substring(prev.normalizedPrefix().length()));\n+        }catch(IndexOutOfBoundsException e){ // in case the player removed a prefix", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI2NTAyMQ=="}, "originalCommit": {"oid": "419d64e6f7ac75a4f5a921f5fccd9f9066837341"}, "originalPosition": 53}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4544, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}