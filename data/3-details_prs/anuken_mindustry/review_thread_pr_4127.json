{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1Njc1NjIz", "number": 4127, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQxNDo1MDozMVrOFJQuYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQxNjo0OToxN1rOFJRPhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1MjU1NTIwOnYy", "diffSide": "RIGHT", "path": "core/src/mindustry/world/blocks/experimental/BlockLoader.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQxNDo1MDozMVrOILkVkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQxNjozNjozMVrOILk3Dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAwMDU5Mg==", "bodyText": "Instead of checking for consValid(), you should take efficiency into account. 50% power should mean 50% unload speed.", "url": "https://github.com/Anuken/Mindustry/pull/4127#discussion_r549000592", "createdAt": "2020-12-26T14:50:31Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/world/blocks/experimental/BlockLoader.java", "diffHunk": "@@ -99,7 +100,7 @@ public void updateTile(){\n \n                 //load up items\n                 if(payload.block().hasItems && items.any()){\n-                    if(timer(timerLoad, loadTime)){\n+                    if(consValid() && timer(timerLoad, loadTime)){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d6446aebabeb28b3b7c26ce644657658eac4400c"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAwOTE2Ng==", "bodyText": "did a hacky math, at least it should work.", "url": "https://github.com/Anuken/Mindustry/pull/4127#discussion_r549009166", "createdAt": "2020-12-26T16:36:31Z", "author": {"login": "sk7725"}, "path": "core/src/mindustry/world/blocks/experimental/BlockLoader.java", "diffHunk": "@@ -99,7 +100,7 @@ public void updateTile(){\n \n                 //load up items\n                 if(payload.block().hasItems && items.any()){\n-                    if(timer(timerLoad, loadTime)){\n+                    if(consValid() && timer(timerLoad, loadTime)){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAwMDU5Mg=="}, "originalCommit": {"oid": "d6446aebabeb28b3b7c26ce644657658eac4400c"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1MjY0MDA0OnYy", "diffSide": "RIGHT", "path": "core/src/mindustry/world/blocks/experimental/BlockLoader.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQxNjo0OToxN1rOILk7Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yN1QwMToyMTozMlrOILnXfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAxMDIzMA==", "bodyText": "consValid() check seems redundant when you're already checking for efficiency.", "url": "https://github.com/Anuken/Mindustry/pull/4127#discussion_r549010230", "createdAt": "2020-12-26T16:49:17Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/world/blocks/experimental/BlockLoader.java", "diffHunk": "@@ -99,7 +100,7 @@ public void updateTile(){\n \n                 //load up items\n                 if(payload.block().hasItems && items.any()){\n-                    if(timer(timerLoad, loadTime)){\n+                    if(consValid() && efficiency() > 0.01f && timer(timerLoad, loadTime / efficiency())){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dde6aca9fcb98a15b2be855912033c617cf2eade"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTA0NTk4NA==", "bodyText": "enabled check, or is the enabled also already counted in the efficiency()?\nLet me try it and see.", "url": "https://github.com/Anuken/Mindustry/pull/4127#discussion_r549045984", "createdAt": "2020-12-27T00:21:27Z", "author": {"login": "sk7725"}, "path": "core/src/mindustry/world/blocks/experimental/BlockLoader.java", "diffHunk": "@@ -99,7 +100,7 @@ public void updateTile(){\n \n                 //load up items\n                 if(payload.block().hasItems && items.any()){\n-                    if(timer(timerLoad, loadTime)){\n+                    if(consValid() && efficiency() > 0.01f && timer(timerLoad, loadTime / efficiency())){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAxMDIzMA=="}, "originalCommit": {"oid": "dde6aca9fcb98a15b2be855912033c617cf2eade"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTA1MDIzOQ==", "bodyText": "it works", "url": "https://github.com/Anuken/Mindustry/pull/4127#discussion_r549050239", "createdAt": "2020-12-27T01:21:32Z", "author": {"login": "sk7725"}, "path": "core/src/mindustry/world/blocks/experimental/BlockLoader.java", "diffHunk": "@@ -99,7 +100,7 @@ public void updateTile(){\n \n                 //load up items\n                 if(payload.block().hasItems && items.any()){\n-                    if(timer(timerLoad, loadTime)){\n+                    if(consValid() && efficiency() > 0.01f && timer(timerLoad, loadTime / efficiency())){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAxMDIzMA=="}, "originalCommit": {"oid": "dde6aca9fcb98a15b2be855912033c617cf2eade"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4536, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}