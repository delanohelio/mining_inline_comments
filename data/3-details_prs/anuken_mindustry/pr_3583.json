{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3MzIwMzMz", "number": 3583, "title": "automatic reconnect", "bodyText": "this pull request will allow servers to request clients to automatically reconnect when kicked with the right reason.\n\nprimary use case: not losing players when updating server sided java (plugins / mods / minigames / etc)\n\nthe last ip & port are these just for ease of use, since its buried way deep within arc. \u26cf\ufe0f\nthe ping task has no repeatCount since i did not see a clean solution to close the loadfrag afterwards. (e.g. i++)\nhaven't tested what happens if you get kicked on connect with this message.\nbundle entry server.kicked.serverRestarting doesn't show anymore.\nnot very practical for BeControl since the version changes.\nexample usage for in minigames or custom commands:", "createdAt": "2020-11-25T09:53:25Z", "url": "https://github.com/Anuken/Mindustry/pull/3583", "merged": true, "mergeCommit": {"oid": "084d7e8355a9470073394b6d8043d9860c1e029a"}, "closed": true, "closedAt": "2020-11-25T16:14:04Z", "author": {"login": "Quezler"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdf7GyZAH2gAyNTI3MzIwMzMzOjY0MmI4NzdhYjBmZDM4MTUwYTViMDUzZmQ5YzNiMGMzOWI0YWQ5ZTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgApargH2gAyNTI3MzIwMzMzOmYyNmIzMzU4ZWY5NTczMWI0ZDg5YmNiYmNiYjA1OTAzNjViMmI3ZmU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "642b877ab0fd38150a5b053fd9c3b0c39b4ad9e3", "author": {"user": {"login": "Quezler", "name": "Patrick 'Quezler' Mounier"}}, "url": "https://github.com/Anuken/Mindustry/commit/642b877ab0fd38150a5b053fd9c3b0c39b4ad9e3", "committedDate": "2020-11-25T09:40:42Z", "message": "Update JoinDialog.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5e06cca54d0a253f2fc5175e56359bf8e30df14", "author": {"user": {"login": "Quezler", "name": "Patrick 'Quezler' Mounier"}}, "url": "https://github.com/Anuken/Mindustry/commit/f5e06cca54d0a253f2fc5175e56359bf8e30df14", "committedDate": "2020-11-25T09:41:41Z", "message": "Update NetClient.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b002d8b4469f01fceaf55f8ccd7e32cc935f4404", "author": {"user": {"login": "Quezler", "name": "Patrick 'Quezler' Mounier"}}, "url": "https://github.com/Anuken/Mindustry/commit/b002d8b4469f01fceaf55f8ccd7e32cc935f4404", "committedDate": "2020-11-25T09:42:13Z", "message": "Update bundle.properties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTA2MjQ5", "url": "https://github.com/Anuken/Mindustry/pull/3583#pullrequestreview-538506249", "createdAt": "2020-11-25T13:44:09Z", "commit": {"oid": "b002d8b4469f01fceaf55f8ccd7e32cc935f4404"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMzo0NDowOVrOH50CBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMzo0NDowOVrOH50CBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM4MzM2Nw==", "bodyText": "maybe use ping = ... here? As this is unnecessary", "url": "https://github.com/Anuken/Mindustry/pull/3583#discussion_r530383367", "createdAt": "2020-11-25T13:44:09Z", "author": {"login": "summetdev"}, "path": "core/src/mindustry/ui/dialogs/JoinDialog.java", "diffHunk": "@@ -445,13 +450,29 @@ public void connect(String ip, int port){\n             logic.reset();\n             net.reset();\n             Vars.netClient.beginConnecting();\n-            net.connect(ip, port, () -> {\n+            net.connect(lastIp = ip, lastPort = port, () -> {\n                 hide();\n                 add.hide();\n             });\n         });\n     }\n \n+    public void reconnect(){\n+        ui.loadfrag.show(\"@reconnecting\");\n+\n+        this.ping = Timer.schedule(() -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b002d8b4469f01fceaf55f8ccd7e32cc935f4404"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff20928becee5d2c76954a4527659f023b2e4bed", "author": {"user": {"login": "Quezler", "name": "Patrick 'Quezler' Mounier"}}, "url": "https://github.com/Anuken/Mindustry/commit/ff20928becee5d2c76954a4527659f023b2e4bed", "committedDate": "2020-11-25T15:49:36Z", "message": "Anukify reconnect logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d6390a76a975eae281876045d616ce32c4b3af9", "author": {"user": {"login": "Quezler", "name": "Patrick 'Quezler' Mounier"}}, "url": "https://github.com/Anuken/Mindustry/commit/3d6390a76a975eae281876045d616ce32c4b3af9", "committedDate": "2020-11-25T15:51:57Z", "message": "Set the ping to null when canceling manually as well"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NjQ5NzE4", "url": "https://github.com/Anuken/Mindustry/pull/3583#pullrequestreview-538649718", "createdAt": "2020-11-25T16:07:36Z", "commit": {"oid": "3d6390a76a975eae281876045d616ce32c4b3af9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNjowNzozNlrOH56VJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNjowNzozNlrOH56VJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQ4NjU2NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(lastIp.isEmpty()) return;\n          \n          \n            \n                    if(lastIp == null || lastIp.isEmpty()) return;", "url": "https://github.com/Anuken/Mindustry/pull/3583#discussion_r530486564", "createdAt": "2020-11-25T16:07:36Z", "author": {"login": "Anuken"}, "path": "core/src/mindustry/ui/dialogs/JoinDialog.java", "diffHunk": "@@ -445,13 +450,34 @@ public void connect(String ip, int port){\n             logic.reset();\n             net.reset();\n             Vars.netClient.beginConnecting();\n-            net.connect(ip, port, () -> {\n+            net.connect(lastIp = ip, lastPort = port, () -> {\n                 hide();\n                 add.hide();\n             });\n         });\n     }\n \n+    public void reconnect(){\n+        if(lastIp.isEmpty()) return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d6390a76a975eae281876045d616ce32c4b3af9"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f26b3358ef95731b4d89bcbbcbb0590365b2b7fe", "author": {"user": {"login": "Quezler", "name": "Patrick 'Quezler' Mounier"}}, "url": "https://github.com/Anuken/Mindustry/commit/f26b3358ef95731b4d89bcbbcbb0590365b2b7fe", "committedDate": "2020-11-25T16:08:03Z", "message": "Update core/src/mindustry/ui/dialogs/JoinDialog.java\n\nCo-authored-by: Anuken <arnukren@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2360, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}