{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2ODQ4Njc3", "number": 2238, "title": "Federated admin changes", "bodyText": "", "createdAt": "2020-01-24T13:58:00Z", "url": "https://github.com/gchq/Gaffer/pull/2238", "merged": true, "mergeCommit": {"oid": "142c1d4ecca00bcf07f83a13342419958cc4ad01"}, "closed": true, "closedAt": "2020-01-27T13:38:24Z", "author": {"login": "GCHQDev404"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb83vZYAH2gAyMzY2ODQ4Njc3OmY5OTdkY2U2MTYzMGQ4OGE1NjYxN2VjZWVlNTJjYzhjNGJmZjI0MjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-clTLgFqTM0ODY1MjM2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f997dce61630d88a56617eceee52cc8c4bff2420", "author": {"user": {"login": "GCHQDev404", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/f997dce61630d88a56617eceee52cc8c4bff2420", "committedDate": "2020-01-22T15:46:56Z", "message": "Gh 2223 federated admin override (#2231)\n\n* Typo\r\n\r\n* gh-2223 FederatedAdminIT tests\r\n\r\n* gh-2223 Admin Override for RemoveGraph and GetAllGraphIds\r\n\r\n* gh-2223 Admin override for RemoveGraph uses predicate\r\n\r\n* gh-2223 FederatedAdminIT tests for a NonAdmin user requesting admin override.\r\n\r\n* gh-2223 change to gaffer.store.admin.auth and renaming\r\n\r\n* gh-2223 checkstyle\r\n\r\n* gh-2223 remove graph admin param added.\r\n\r\n* gh-2223 refinements and package protected methods in FederatedGraphStorage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1495fb380d84ef8d2ff1abf9caa7dbe0d93357be", "author": {"user": {"login": "GCHQDev404", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/1495fb380d84ef8d2ff1abf9caa7dbe0d93357be", "committedDate": "2020-01-23T10:14:27Z", "message": "Gh 2225 federated get all graph info (#2232)\n\n* Typo\r\n\r\n* gh-2223 FederatedAdminIT tests\r\n\r\n* gh-2223 Admin Override for RemoveGraph and GetAllGraphIds\r\n\r\n* gh-2223 Admin override for RemoveGraph uses predicate\r\n\r\n* gh-2223 FederatedAdminIT tests for a NonAdmin user requesting admin override.\r\n\r\n* gh-2223 change to gaffer.store.admin.auth and renaming\r\n\r\n* gh-2225 Federated GetAllGraphInfo\r\n\r\n* gh-2225 FederatedGetAllGraphInfoHandler has AdminAll and User usage.\r\n\r\n* gh-2223 checkstyle\r\n\r\n* gh-2225 checkstyle\r\n\r\n* gh-2225 GetGraphInfo can be filtered by graphIds\r\n\r\n* gh-2223 remove graph admin param added.\r\n\r\n* gh-2225 getAllGraphsAndAuths isAdmin param\r\n\r\n* gh-2223 refinements and package protected methods in FederatedGraphStorage\r\n\r\n* gh-2225 refinements and package protected methods in FederatedGraphStorage\r\n\r\n* Apply suggestions from code review\r\n\r\nCo-Authored-By: d47853 <d47853@users.noreply.github.com>\r\n\r\n* gh-2225 PR changes GetGraphInfo returns FederatedAccess not string.\r\n\r\nCo-authored-by: d47853 <d47853@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5992bf4ce30562017210a21660d96171447b923", "author": {"user": {"login": "GCHQDev404", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/a5992bf4ce30562017210a21660d96171447b923", "committedDate": "2020-01-24T13:36:08Z", "message": "Gh 2226 fedated change graph access (#2233)\n\n* Typo\r\n\r\n* gh-2223 FederatedAdminIT tests\r\n\r\n* gh-2223 Admin Override for RemoveGraph and GetAllGraphIds\r\n\r\n* gh-2223 Admin override for RemoveGraph uses predicate\r\n\r\n* gh-2223 FederatedAdminIT tests for a NonAdmin user requesting admin override.\r\n\r\n* gh-2223 change to gaffer.store.admin.auth and renaming\r\n\r\n* gh-2225 Federated GetAllGraphInfo\r\n\r\n* gh-2225 FederatedGetAllGraphInfoHandler has AdminAll and User usage.\r\n\r\n* gh-2223 checkstyle\r\n\r\n* gh-2225 checkstyle\r\n\r\n* gh-2225 GetGraphInfo can be filtered by graphIds\r\n\r\n* gh-2223 remove graph admin param added.\r\n\r\n* gh-2225 getAllGraphsAndAuths isAdmin param\r\n\r\n* gh-2226 Federated ChangeGraphAccess\r\n\r\n* gh-2223 refinements and package protected methods in FederatedGraphStorage\r\n\r\n* gh-2225 refinements and package protected methods in FederatedGraphStorage\r\n\r\n* gh-2226 refinements and package protected methods in FederatedGraphStorage\r\n\r\n* Apply suggestions from code review\r\n\r\nCo-Authored-By: d47853 <d47853@users.noreply.github.com>\r\n\r\n* gh-2225 PR changes GetGraphInfo returns FederatedAccess not string.\r\n\r\n* gh-2226 comments\r\n\r\n* gh-2226 tidy up builder and PR change\r\n\r\nCo-authored-by: d47853 <d47853@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f603a6fea6eabdb4209da31b790820bc68b1230d", "author": {"user": {"login": "GCHQDev404", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/f603a6fea6eabdb4209da31b790820bc68b1230d", "committedDate": "2020-01-24T13:42:49Z", "message": "Gh 2227 federated remove graph add limitation for visibility (#2234)\n\n* Typo\r\n\r\n* gh-2223 FederatedAdminIT tests\r\n\r\n* gh-2223 Admin Override for RemoveGraph and GetAllGraphIds\r\n\r\n* gh-2223 Admin override for RemoveGraph uses predicate\r\n\r\n* gh-2223 FederatedAdminIT tests for a NonAdmin user requesting admin override.\r\n\r\n* gh-2223 change to gaffer.store.admin.auth and renaming\r\n\r\n* gh-2225 Federated GetAllGraphInfo\r\n\r\n* gh-2225 FederatedGetAllGraphInfoHandler has AdminAll and User usage.\r\n\r\n* gh-2223 checkstyle\r\n\r\n* gh-2225 checkstyle\r\n\r\n* gh-2225 GetGraphInfo can be filtered by graphIds\r\n\r\n* gh-2223 remove graph admin param added.\r\n\r\n* gh-2225 getAllGraphsAndAuths isAdmin param\r\n\r\n* gh-2226 Federated ChangeGraphAccess\r\n\r\n* gh-2227 Federated Remove Graph works only for AdminUsers and AddingUser not users with visibility.\r\n\r\n* gh-2223 refinements and package protected methods in FederatedGraphStorage\r\n\r\n* gh-2225 refinements and package protected methods in FederatedGraphStorage\r\n\r\n* gh-2226 refinements and package protected methods in FederatedGraphStorage\r\n\r\n* gh-2227 refinements and package protected methods\r\n\r\n* Apply suggestions from code review\r\n\r\nCo-Authored-By: d47853 <d47853@users.noreply.github.com>\r\n\r\n* gh-2225 PR changes GetGraphInfo returns FederatedAccess not string.\r\n\r\n* gh-2226 comments\r\n\r\n* gh-2227 removing package private\r\n\r\n* gh-2227 removing FederatedAccess unused toString\r\n\r\nCo-authored-by: d47853 <d47853@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea4a976788e5ad3d4ca1b6e112007ad20ae87371", "author": {"user": {"login": "GCHQDev404", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/ea4a976788e5ad3d4ca1b6e112007ad20ae87371", "committedDate": "2020-01-24T13:54:16Z", "message": "Gh 2225 improvements (#2235)\n\n* Typo\r\n\r\n* gh-2223 FederatedAdminIT tests\r\n\r\n* gh-2223 Admin Override for RemoveGraph and GetAllGraphIds\r\n\r\n* gh-2223 Admin override for RemoveGraph uses predicate\r\n\r\n* gh-2223 FederatedAdminIT tests for a NonAdmin user requesting admin override.\r\n\r\n* gh-2223 change to gaffer.store.admin.auth and renaming\r\n\r\n* gh-2225 Federated GetAllGraphInfo\r\n\r\n* gh-2225 FederatedGetAllGraphInfoHandler has AdminAll and User usage.\r\n\r\n* gh-2223 checkstyle\r\n\r\n* gh-2225 checkstyle\r\n\r\n* gh-2225 GetGraphInfo can be filtered by graphIds\r\n\r\n* gh-2223 remove graph admin param added.\r\n\r\n* gh-2225 getAllGraphsAndAuths isAdmin param\r\n\r\n* gh-2226 Federated ChangeGraphAccess\r\n\r\n* gh-2227 Federated Remove Graph works only for AdminUsers and AddingUser not users with visibility.\r\n\r\n* gh-2223 refinements and package protected methods in FederatedGraphStorage\r\n\r\n* gh-2225 refinements and package protected methods in FederatedGraphStorage\r\n\r\n* gh-2226 refinements and package protected methods in FederatedGraphStorage\r\n\r\n* gh-2227 refinements and package protected methods\r\n\r\n* Apply suggestions from code review\r\n\r\nCo-Authored-By: d47853 <d47853@users.noreply.github.com>\r\n\r\n* gh-2225 PR changes GetGraphInfo returns FederatedAccess not string.\r\n\r\n* gh-2226 comments\r\n\r\n* gh-2227 removing package private\r\n\r\n* gh-2227 removing FederatedAccess unused toString\r\n\r\n* gh-2225 improvements\r\n\r\nCo-authored-by: d47853 <d47853@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37adbb6c1ea266f596cb8690234c5f8995a46f90", "author": {"user": {"login": "GCHQDev404", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/37adbb6c1ea266f596cb8690234c5f8995a46f90", "committedDate": "2020-01-24T13:56:18Z", "message": "Merge remote-tracking branch 'origin/develop' into federated-admin-changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MDAwNjIx", "url": "https://github.com/gchq/Gaffer/pull/2238#pullrequestreview-348000621", "createdAt": "2020-01-24T14:46:16Z", "commit": {"oid": "37adbb6c1ea266f596cb8690234c5f8995a46f90"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxNDo0NjoxNlrOFhf6hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxNDo0Njo1N1rOFhf7-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDY3MDIxNA==", "bodyText": "Can you restore the modifiers for these?", "url": "https://github.com/gchq/Gaffer/pull/2238#discussion_r370670214", "createdAt": "2020-01-24T14:46:16Z", "author": {"login": "d47853"}, "path": "store-implementation/federated-store/src/main/java/uk/gov/gchq/gaffer/federatedstore/FederatedAccess.java", "diffHunk": "@@ -87,7 +87,7 @@ public String getAddingUserId() {\n         return addingUserId;\n     }\n \n-    public void setAddingUserId(final String creatorUserId) {\n+    void setAddingUserId(final String creatorUserId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37adbb6c1ea266f596cb8690234c5f8995a46f90"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDY3MDU4NA==", "bodyText": "Can you set these back to public", "url": "https://github.com/gchq/Gaffer/pull/2238#discussion_r370670584", "createdAt": "2020-01-24T14:46:57Z", "author": {"login": "d47853"}, "path": "store-implementation/federated-store/src/main/java/uk/gov/gchq/gaffer/federatedstore/FederatedGraphStorage.java", "diffHunk": "@@ -82,7 +85,7 @@ protected void startCacheServiceLoader() throws StorageException {\n      * @throws StorageException if unable to put arguments into storage\n      * @see #put(GraphSerialisable, FederatedAccess)\n      */\n-    public void put(final Collection<GraphSerialisable> graphs, final FederatedAccess access) throws StorageException {\n+    protected void put(final Collection<GraphSerialisable> graphs, final FederatedAccess access) throws StorageException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37adbb6c1ea266f596cb8690234c5f8995a46f90"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f979bb2fa81f45a4a7b2b237ca28fc03b164f92", "author": {"user": {"login": "GCHQDev404", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/0f979bb2fa81f45a4a7b2b237ca28fc03b164f92", "committedDate": "2020-01-24T15:46:10Z", "message": "PR changes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "472b625bbdf59c5d95c878dab66bbc4d59db075f", "author": {"user": {"login": "GCHQDev404", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/472b625bbdf59c5d95c878dab66bbc4d59db075f", "committedDate": "2020-01-24T15:01:04Z", "message": "PR changes"}, "afterCommit": {"oid": "0f979bb2fa81f45a4a7b2b237ca28fc03b164f92", "author": {"user": {"login": "GCHQDev404", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/0f979bb2fa81f45a4a7b2b237ca28fc03b164f92", "committedDate": "2020-01-24T15:46:10Z", "message": "PR changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NTUyOTIy", "url": "https://github.com/gchq/Gaffer/pull/2238#pullrequestreview-348552922", "createdAt": "2020-01-27T10:14:12Z", "commit": {"oid": "0f979bb2fa81f45a4a7b2b237ca28fc03b164f92"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMDoxNDoxMlrOFh9gLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMDoxNDoxMlrOFh9gLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTE1NDk4OA==", "bodyText": "Do you need the other fields here?", "url": "https://github.com/gchq/Gaffer/pull/2238#discussion_r371154988", "createdAt": "2020-01-27T10:14:12Z", "author": {"login": "d47853"}, "path": "store-implementation/federated-store/src/main/java/uk/gov/gchq/gaffer/federatedstore/operation/ChangeGraphAccess.java", "diffHunk": "@@ -0,0 +1,169 @@\n+/*\n+ * Copyright 2020 Crown Copyright\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package uk.gov.gchq.gaffer.federatedstore.operation;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.annotation.JsonInclude.Include;\n+import com.fasterxml.jackson.annotation.JsonPropertyOrder;\n+import com.fasterxml.jackson.core.type.TypeReference;\n+import com.google.common.collect.Sets;\n+import org.apache.commons.lang3.exception.CloneFailedException;\n+\n+import uk.gov.gchq.gaffer.commonutil.Required;\n+import uk.gov.gchq.gaffer.federatedstore.FederatedGraphStorage;\n+import uk.gov.gchq.gaffer.operation.io.Output;\n+import uk.gov.gchq.gaffer.operation.serialisation.TypeReferenceImpl;\n+import uk.gov.gchq.koryphe.Since;\n+import uk.gov.gchq.koryphe.Summary;\n+\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import static uk.gov.gchq.gaffer.federatedstore.FederatedStoreConstants.KEY_OPERATION_OPTIONS_GRAPH_IDS;\n+\n+\n+@JsonPropertyOrder(value = {\"class\", \"graphId\"}, alphabetic = true)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f979bb2fa81f45a4a7b2b237ca28fc03b164f92"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d31f421eaa3d833d66af23e4d0b10c0988e595af", "author": {"user": {"login": "GCHQDev404", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/d31f421eaa3d833d66af23e4d0b10c0988e595af", "committedDate": "2020-01-27T12:59:06Z", "message": "Update ChangeGraphAccess.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NjUyMzY1", "url": "https://github.com/gchq/Gaffer/pull/2238#pullrequestreview-348652365", "createdAt": "2020-01-27T13:16:19Z", "commit": {"oid": "d31f421eaa3d833d66af23e4d0b10c0988e595af"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1836, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}