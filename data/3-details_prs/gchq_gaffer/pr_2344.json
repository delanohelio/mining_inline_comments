{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzNzY2Nzkx", "number": 2344, "title": "gh-2335 Adding github workflow to automate koryphe version update.", "bodyText": "", "createdAt": "2020-11-19T08:26:10Z", "url": "https://github.com/gchq/Gaffer/pull/2344", "merged": true, "mergeCommit": {"oid": "44b9f5a2e22160a3c9516b02a6ca0a218fac9cb1"}, "closed": true, "closedAt": "2020-12-01T12:51:12Z", "author": {"login": "m29827"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdd00q9AH2gAyNTIzNzY2NzkxOjk5Y2E3ZWI4MjFlYzcxN2Y3ZTk0Y2Y1ZDNhYWU5M2I1ZjE5MjljMGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdh49M0AH2gAyNTIzNzY2NzkxOjVlZjdmODA1Y2I5OTVlNmFlZjIzNTRiNzFlNWI0ODYzZGEzMTdjOTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "99ca7eb821ec717f7e94cf5d3aae93b5f1929c0c", "author": {"user": {"login": "m29827", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/99ca7eb821ec717f7e94cf5d3aae93b5f1929c0c", "committedDate": "2020-11-18T21:13:38Z", "message": "gh-2335 Adding github workflow to automate koryphe version update."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0MjA0NDkz", "url": "https://github.com/gchq/Gaffer/pull/2344#pullrequestreview-534204493", "createdAt": "2020-11-19T09:00:47Z", "commit": {"oid": "99ca7eb821ec717f7e94cf5d3aae93b5f1929c0c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwOTowMDo0N1rOH2S7IQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwOTowMDo0N1rOH2S7IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjY5NTIwMQ==", "bodyText": "Could make the pull request afterwards?", "url": "https://github.com/gchq/Gaffer/pull/2344#discussion_r526695201", "createdAt": "2020-11-19T09:00:47Z", "author": {"login": "d47853"}, "path": ".github/workflows/update-koryphe-version.yaml", "diffHunk": "@@ -0,0 +1,33 @@\n+name: Update Korpyhe Version\n+on:\n+  workflow_dispatch:\n+    inputs:\n+      version:\n+        description: 'Korpyhe Version'\n+        required: true\n+\n+jobs:\n+  update-koryphe-version:\n+    runs-on: ubuntu-latest\n+    env:\n+      MAVEN_OPTS: -Dmaven.wagon.http.retryHandler.count=3 -Dmaven.wagon.httpconnectionManager.ttlSeconds=25\n+    steps:\n+\n+      - name: Checkout develop\n+        uses: actions/checkout@v2\n+        with:\n+          ref: develop\n+          token: ${{ secrets.ADMIN_GITHUB_TOKEN }}\n+\n+      - name: Set up Github credentials\n+        run: |\n+          git config user.name Gaffer\n+          git config user.email github-actions@github.com\n+\n+      - name: Set up JDK 1.8\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: 1.8\n+\n+      - name: Update Korpyhe Version", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99ca7eb821ec717f7e94cf5d3aae93b5f1929c0c"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74d6054ac9f35ebfef32e01b0b93d3861b4ebfbe", "author": {"user": {"login": "m29827", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/74d6054ac9f35ebfef32e01b0b93d3861b4ebfbe", "committedDate": "2020-11-19T10:55:22Z", "message": "gh-2335 Automating PR creation and parameterising update branch name."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3NjI4NjU4", "url": "https://github.com/gchq/Gaffer/pull/2344#pullrequestreview-537628658", "createdAt": "2020-11-24T15:28:14Z", "commit": {"oid": "74d6054ac9f35ebfef32e01b0b93d3861b4ebfbe"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNToyODoxNFrOH5GXpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNToyODoxNFrOH5GXpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTYzNTIzOA==", "bodyText": "Don't think admin token would be required for this. You could use the default one:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      github_token: ${{ secrets.ADMIN_GITHUB_TOKEN }}\n          \n          \n            \n                      github_token: ${{ secrets.GITHUB_TOKEN }}", "url": "https://github.com/gchq/Gaffer/pull/2344#discussion_r529635238", "createdAt": "2020-11-24T15:28:14Z", "author": {"login": "d47853"}, "path": ".github/workflows/update-koryphe-version.yaml", "diffHunk": "@@ -0,0 +1,42 @@\n+name: Update Korpyhe Version\n+on:\n+  workflow_dispatch:\n+    inputs:\n+      version:\n+        description: 'Korpyhe Version'\n+        required: true\n+\n+jobs:\n+  update-koryphe-version:\n+    runs-on: ubuntu-latest\n+    env:\n+      MAVEN_OPTS: -Dmaven.wagon.http.retryHandler.count=3 -Dmaven.wagon.httpconnectionManager.ttlSeconds=25\n+      VERSION_UPDATE_BRANCH: update-koryphe-version-${{ github.event.inputs.version }}\n+    steps:\n+\n+      - name: Checkout develop\n+        uses: actions/checkout@v2\n+        with:\n+          ref: develop\n+          token: ${{ secrets.ADMIN_GITHUB_TOKEN }}\n+\n+      - name: Set up Github credentials\n+        run: |\n+          git config user.name Gaffer\n+          git config user.email github-actions@github.com\n+\n+      - name: Set up JDK 1.8\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: 1.8\n+\n+      - name: Update Korpyhe Version\n+        run: ./cd/updateKorypheVersion.sh ${{ github.event.inputs.version }}\n+\n+      - name: Submit PR\n+        if: ${{ success() }}\n+        uses: repo-sync/pull-request@v2\n+        with:\n+          source_branch: ${{ env.VERSION_UPDATE_BRANCH }}\n+          destination_branch: develop\n+          github_token: ${{ secrets.ADMIN_GITHUB_TOKEN }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74d6054ac9f35ebfef32e01b0b93d3861b4ebfbe"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0d0d99a46fe179ca73212f49124dbd8923e9015", "author": {"user": {"login": "m29827", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/e0d0d99a46fe179ca73212f49124dbd8923e9015", "committedDate": "2020-11-24T17:02:03Z", "message": "Switch to use the default GITHUB_TOKEN\n\nCo-authored-by: d47853 <d47853@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5ODcwNzU2", "url": "https://github.com/gchq/Gaffer/pull/2344#pullrequestreview-539870756", "createdAt": "2020-11-27T10:30:40Z", "commit": {"oid": "e0d0d99a46fe179ca73212f49124dbd8923e9015"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffa4ed6b3ed7e400f36e3a87acc70f0f872fc061", "author": {"user": {"login": "d47853", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/ffa4ed6b3ed7e400f36e3a87acc70f0f872fc061", "committedDate": "2020-11-30T10:12:19Z", "message": "Merge branch 'develop' into gh-2335-automate-korpyhe-version-updates-on-release"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ef7f805cb995e6aef2354b71e5b4863da317c96", "author": {"user": {"login": "d47853", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/5ef7f805cb995e6aef2354b71e5b4863da317c96", "committedDate": "2020-12-01T12:18:16Z", "message": "Merge branch 'develop' into gh-2335-automate-korpyhe-version-updates-on-release"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1810, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}