{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMTE4NTI0", "number": 2261, "title": "Gh 2249 accumulo upgrade to 1.9.3", "bodyText": "Hi - I've made the changes for Accumulo 1.9.3:\n\nI've added new tests for the rfilereaderrdd package in JUnit5 to help increase the coverage and to manage any changes in behaviour after upgrading\nAlso refactored some of the existing tests and upgraded to JUnit5 to use some of the newer features\nI fixed the compiler errors RFileReaderIterator caused by updating the Accumulo version to 1.9.3\nI ran the integration tests locally against a MiniAccumulo cluster I ran locally and all passed\nI also updated the README how to set up integration tests on a local cluster to help future developers/users\n\nI can add more tests and increase the coverage in the modules that consume the Accumulo dependency? - I wasn't sure how far to go with it so thought I'd raise the pull request anyway and see what you think - I'm don't mind writing more.\nAlso let me know of any other recommendations/changes you require for this or if you run any additional Accumulo tests of your own that picks something?\nCheers", "createdAt": "2020-03-19T16:49:25Z", "url": "https://github.com/gchq/Gaffer/pull/2261", "merged": true, "mergeCommit": {"oid": "c8660f2c872fbfd1b019b203a1e4d3fb2c0fedcb"}, "closed": true, "closedAt": "2020-03-30T12:50:25Z", "author": {"login": "macenturalxl1"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMmXUPAH2gAyMzkxMTE4NTI0OmEyZGU3ZDMyYzFkZjAyODA1NDZiOTE4MWFiMjg1NDAwYmUyNjY4NGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSt9knAFqTM4MzgxODg2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a2de7d32c1df0280546b9181ab285400be26684a", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/a2de7d32c1df0280546b9181ab285400be26684a", "committedDate": "2020-03-11T12:35:02Z", "message": "Added JUnit5 tests to increase coverage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cca2be001c1e5ffa522394939ca705bb5288bd92", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/cca2be001c1e5ffa522394939ca705bb5288bd92", "committedDate": "2020-03-11T12:35:15Z", "message": "Added JUnit5 tests to increase coverage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6574b9103ebefcacef37beeaba9eedf9a70487a3", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/6574b9103ebefcacef37beeaba9eedf9a70487a3", "committedDate": "2020-03-13T10:38:58Z", "message": "Fixed warnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00d06dd61499d33ba68fcd06084c5a89b3b65a8b", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/00d06dd61499d33ba68fcd06084c5a89b3b65a8b", "committedDate": "2020-03-18T17:14:32Z", "message": "Updated the accumulo-store README how to set scan auths"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cd469dc5bca549ee49a618e89a6c413e62baa9e", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/6cd469dc5bca549ee49a618e89a6c413e62baa9e", "committedDate": "2020-03-18T17:54:53Z", "message": "Further updated to accumulo-store README"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3fe7cfb9e9c2af3a71f523dbd83e3275f5e3c55", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/f3fe7cfb9e9c2af3a71f523dbd83e3275f5e3c55", "committedDate": "2020-03-19T11:12:53Z", "message": "Moved junit5 module dependencies to top level pom"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9de3b6993e6b1c23767c587c69ecf153e5c6c572", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/9de3b6993e6b1c23767c587c69ecf153e5c6c572", "committedDate": "2020-03-19T16:15:08Z", "message": "Organised imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "745620c0664b3024f21652c6de477d47c10ed4c1", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/745620c0664b3024f21652c6de477d47c10ed4c1", "committedDate": "2020-03-19T16:23:06Z", "message": "Temp change - allow branch build on Travis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ea24ca466ca3724f090898a4a998f440e55b43b", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/5ea24ca466ca3724f090898a4a998f440e55b43b", "committedDate": "2020-03-19T16:30:10Z", "message": "Revert temp change for Travis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49ada9221cf6ccf18c2ec6c3303e399d49b03f2e", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/49ada9221cf6ccf18c2ec6c3303e399d49b03f2e", "committedDate": "2020-03-20T10:13:43Z", "message": "Fixed Checkstyle errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4Mzg2ODA0", "url": "https://github.com/gchq/Gaffer/pull/2261#pullrequestreview-378386804", "createdAt": "2020-03-20T10:56:28Z", "commit": {"oid": "49ada9221cf6ccf18c2ec6c3303e399d49b03f2e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMDo1NjoyOFrOF5PNTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMDo1NjoyOFrOF5PNTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU2MjMxOQ==", "bodyText": "Is the display name correct for the test? I see no reference to RTEs in the test body.", "url": "https://github.com/gchq/Gaffer/pull/2261#discussion_r395562319", "createdAt": "2020-03-20T10:56:28Z", "author": {"login": "t11947"}, "path": "library/spark/spark-accumulo-library/src/test/java/uk/gov/gchq/gaffer/sparkaccumulo/operation/rfilereaderrdd/RFileReaderIteratorTest.java", "diffHunk": "@@ -0,0 +1,109 @@\n+/*\n+ * Copyright 2018-2020 Crown Copyright\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package uk.gov.gchq.gaffer.sparkaccumulo.operation.rfilereaderrdd;\n+\n+import org.apache.hadoop.conf.Configuration;\n+import org.apache.spark.Partition;\n+import org.apache.spark.TaskContext;\n+import org.junit.jupiter.api.DisplayName;\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertThrows;\n+import static org.mockito.Mockito.mock;\n+\n+public class RFileReaderIteratorTest {\n+\n+    @Test\n+    @DisplayName(\"Init RFileReaderIterator with invalid AccumuloTablet file throws RunTimeException\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49ada9221cf6ccf18c2ec6c3303e399d49b03f2e"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56a5bb201e08a247c62a8b0246e674c7ed3bb82d", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/56a5bb201e08a247c62a8b0246e674c7ed3bb82d", "committedDate": "2020-03-23T09:34:13Z", "message": "Renamed test display name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NDIzNzE0", "url": "https://github.com/gchq/Gaffer/pull/2261#pullrequestreview-379423714", "createdAt": "2020-03-23T13:24:52Z", "commit": {"oid": "56a5bb201e08a247c62a8b0246e674c7ed3bb82d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cca8d3fbd9d0ffc3169a359a212a9c3afde74076", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/cca8d3fbd9d0ffc3169a359a212a9c3afde74076", "committedDate": "2020-03-24T16:07:03Z", "message": "Downgraded JUnit5 tests to 4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61681b374130082c666e610ec29248848c4b671f", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/61681b374130082c666e610ec29248848c4b671f", "committedDate": "2020-03-24T16:20:39Z", "message": "Fixed checkstyle formatting errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfdfdca18f922cec6d1d88baf0c4a56a3c38b764", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/dfdfdca18f922cec6d1d88baf0c4a56a3c38b764", "committedDate": "2020-03-24T18:08:48Z", "message": "Additional checkstyle format fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51968b37a683cb71e2a31a117b84e1dc891ff6ee", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/51968b37a683cb71e2a31a117b84e1dc891ff6ee", "committedDate": "2020-03-27T11:16:34Z", "message": "Reverted UpdateTableIteratorTable to fix surefire"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNjc5MDk0", "url": "https://github.com/gchq/Gaffer/pull/2261#pullrequestreview-383679094", "createdAt": "2020-03-30T09:29:28Z", "commit": {"oid": "51968b37a683cb71e2a31a117b84e1dc891ff6ee"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwOToyOToyOFrOF9hJlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwOToyOToyOFrOF9hJlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA1MDU4Mg==", "bodyText": "Any new files you create (this one, RFileReaderIteratorTest.java and AccumuloTabletTest.java should have just the current year in the copyright. For example\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Copyright 2016-2020 Crown Copyright\n          \n          \n            \n            # Copyright 2020 Crown Copyright", "url": "https://github.com/gchq/Gaffer/pull/2261#discussion_r400050582", "createdAt": "2020-03-30T09:29:28Z", "author": {"login": "d47853"}, "path": "store-implementation/accumulo-store/src/test/resources/empty-store.properties", "diffHunk": "@@ -0,0 +1,15 @@\n+#\n+# Copyright 2016-2020 Crown Copyright", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51968b37a683cb71e2a31a117b84e1dc891ff6ee"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "159b113e159f3d0d9a08b5f358232806470e700b", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/159b113e159f3d0d9a08b5f358232806470e700b", "committedDate": "2020-03-30T10:32:51Z", "message": "Amended copyright message for new files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebd4c98ab3f54b612a1a4b55e0771886e61490f7", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/ebd4c98ab3f54b612a1a4b55e0771886e61490f7", "committedDate": "2020-03-30T10:43:15Z", "message": "Checkstyle fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNzU4MjM3", "url": "https://github.com/gchq/Gaffer/pull/2261#pullrequestreview-383758237", "createdAt": "2020-03-30T11:22:21Z", "commit": {"oid": "ebd4c98ab3f54b612a1a4b55e0771886e61490f7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3617b140e401af3345fd3605e153d7ed534f02b9", "author": {"user": {"login": "macenturalxl1", "name": null}}, "url": "https://github.com/gchq/Gaffer/commit/3617b140e401af3345fd3605e153d7ed534f02b9", "committedDate": "2020-03-30T12:06:28Z", "message": "Merge branch 'develop' of github.com:gchq/Gaffer into gh-2249-AccumuloUpgradeTo1_9_3"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzODE4ODYw", "url": "https://github.com/gchq/Gaffer/pull/2261#pullrequestreview-383818860", "createdAt": "2020-03-30T12:49:42Z", "commit": {"oid": "3617b140e401af3345fd3605e153d7ed534f02b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1854, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}