{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxMTQzNDQw", "number": 1096, "title": "Class to represent errors in Maven artifact", "bodyText": "Fixes #1093\n\nIntroducing ArtifactProblem class\nLinkageCheckerRule to use the class.\n\nOnce this PR is merged, I'll raise another PR to for DependencyGraphBuilder to use ArtifactProblem class.", "createdAt": "2020-01-09T20:26:58Z", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096", "merged": true, "mergeCommit": {"oid": "279bac93914eb5c6ed109fd60f4121a2e416aa19"}, "closed": true, "closedAt": "2020-01-10T16:49:48Z", "author": {"login": "suztomo"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4v7PcAH2gAyMzYxMTQzNDQwOjhmNDk0YjVmZGFkZjNkMjJiMjBjZDlhY2ZiNDM2NDY0YjNjYjU5ZDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb5BVyfgFqTM0MTI4NTg5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8f494b5fdadf3d22b20cd9acfb436464b3cb59d7", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/8f494b5fdadf3d22b20cd9acfb436464b3cb59d7", "committedDate": "2020-01-09T20:24:56Z", "message": "Fixes #1093"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d94ec864095947aa4cafc19d79aa8f2701880611", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/d94ec864095947aa4cafc19d79aa8f2701880611", "committedDate": "2020-01-09T20:32:38Z", "message": "Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "300430846a4078f6055fb8480b74e46967571db2", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/300430846a4078f6055fb8480b74e46967571db2", "committedDate": "2020-01-09T20:34:13Z", "message": "Removed unnecessary code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/1fd3e17a7b7a52e7da3b12e506101880f55dbd42", "committedDate": "2020-01-09T20:39:28Z", "message": "javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwODAwMTU5", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#pullrequestreview-340800159", "createdAt": "2020-01-09T20:40:09Z", "commit": {"oid": "300430846a4078f6055fb8480b74e46967571db2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQyMDo0MDowOVrOFcCwaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQyMDo0MToyNlrOFcCyZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk0OTYwOA==", "bodyText": "Now these formatting the problem is ArtifactProblem's responsibility.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r364949608", "createdAt": "2020-01-09T20:40:09Z", "author": {"login": "suztomo"}, "path": "enforcer-rules/src/main/java/com/google/cloud/tools/dependencies/enforcer/LinkageCheckerRule.java", "diffHunk": "@@ -358,17 +353,6 @@ public void execute(@Nonnull EnforcerRuleHelper helper) throws EnforcerRuleExcep\n     }\n   }\n \n-  private static String findPaths(DependencyNode root, Artifact artifact) {\n-    ImmutableList<List<DependencyNode>> dependencyPaths = findArtifactPaths(root, artifact);\n-\n-    ImmutableList<String> paths =\n-        dependencyPaths.stream()\n-            .map(path -> Joiner.on(\" > \").join(path))\n-            .collect(toImmutableList());\n-    // Joining one or more paths from root to the artifact\n-    return Joiner.on(\"\\n\").join(paths);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "300430846a4078f6055fb8480b74e46967571db2"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk1MDExNw==", "bodyText": "This is warn because having a unresolvable Maven artifact should not cause the build failure as long as there is no linkage errors.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r364950117", "createdAt": "2020-01-09T20:41:26Z", "author": {"login": "suztomo"}, "path": "enforcer-rules/src/main/java/com/google/cloud/tools/dependencies/enforcer/LinkageCheckerRule.java", "diffHunk": "@@ -225,6 +228,11 @@ public void execute(@Nonnull EnforcerRuleHelper helper) throws EnforcerRuleExcep\n       }\n     } catch (ExpressionEvaluationException ex) {\n       throw new EnforcerRuleException(\"Unable to lookup an expression \" + ex.getMessage(), ex);\n+    } finally {\n+      // Always show artifact problems. But these should not be the cause of failing the rule.\n+      for (ArtifactProblem problem : artifactProblems) {\n+        logger.warn(problem.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "300430846a4078f6055fb8480b74e46967571db2"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwODM4NDQy", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#pullrequestreview-340838442", "createdAt": "2020-01-09T21:53:01Z", "commit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQyMTo1MzowMVrOFcEfFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQyMTo1ODo0MVrOFcEn8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3Nzk0Mw==", "bodyText": "Should this be a subclass instead? That is, should there be subclasses for different types of artifact problems? Using a type object feels not very object oriented.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r364977943", "createdAt": "2020-01-09T21:53:01Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/dependencies/ArtifactProblem.java", "diffHunk": "@@ -0,0 +1,126 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.cloud.tools.opensource.dependencies;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.List;\n+import javax.annotation.Nullable;\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+/** Problem in a Maven artifact. */\n+public final class ArtifactProblem {\n+\n+  /** The Maven artifact that has the problem. */\n+  private final Artifact artifact;\n+\n+  /** The type of the problem in the artifact. */\n+  private final Type type;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3ODE4NA==", "bodyText": "Should SymbolProblem (or whatever it's called) and ArtifactProblem have  a common superclass?", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r364978184", "createdAt": "2020-01-09T21:53:40Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/dependencies/ArtifactProblem.java", "diffHunk": "@@ -0,0 +1,126 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.cloud.tools.opensource.dependencies;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.List;\n+import javax.annotation.Nullable;\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+/** Problem in a Maven artifact. */\n+public final class ArtifactProblem {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3ODcxMw==", "bodyText": "This sentence doesn't quite work.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r364978713", "createdAt": "2020-01-09T21:54:59Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/dependencies/ArtifactProblem.java", "diffHunk": "@@ -0,0 +1,126 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.cloud.tools.opensource.dependencies;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.List;\n+import javax.annotation.Nullable;\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+/** Problem in a Maven artifact. */\n+public final class ArtifactProblem {\n+\n+  /** The Maven artifact that has the problem. */\n+  private final Artifact artifact;\n+\n+  /** The type of the problem in the artifact. */\n+  private final Type type;\n+\n+  /**\n+   * The dependency path to the artifact from the root of the dependency tree. An empty list if the\n+   * path is unknown.\n+   */\n+  private final ImmutableList<DependencyNode> dependencyPath;\n+\n+  /**\n+   * The list of invalid class files if type is {@link Type#INVALID_CLASS_FILE}; otherwise an empty\n+   * list.\n+   */\n+  private final ImmutableList<String> classFileNames;\n+\n+  /**\n+   * Returns the problem describing the artifact at the leaf of {@code dependencyPath} is not\n+   * resolvable by Maven.\n+   */\n+  public static ArtifactProblem unresolvableArtifact(List<DependencyNode> dependencyPath) {\n+    checkNotNull(dependencyPath);\n+    checkArgument(dependencyPath.size() > 0, \"dependencyPath should not be empty\");\n+\n+    DependencyNode lastElement = dependencyPath.get(dependencyPath.size() - 1);\n+    return new ArtifactProblem(\n+        Type.UNRESOLVABLE_ARTIFACT, lastElement.getArtifact(), dependencyPath, ImmutableList.of());\n+  }\n+\n+  /**\n+   * Returns the problem describing the artifact is not resolvable by Maven. This method is used", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3ODg4NA==", "bodyText": "This sounds like a run on sentence.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r364978884", "createdAt": "2020-01-09T21:55:27Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/dependencies/ArtifactProblem.java", "diffHunk": "@@ -0,0 +1,126 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.cloud.tools.opensource.dependencies;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.List;\n+import javax.annotation.Nullable;\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+/** Problem in a Maven artifact. */\n+public final class ArtifactProblem {\n+\n+  /** The Maven artifact that has the problem. */\n+  private final Artifact artifact;\n+\n+  /** The type of the problem in the artifact. */\n+  private final Type type;\n+\n+  /**\n+   * The dependency path to the artifact from the root of the dependency tree. An empty list if the\n+   * path is unknown.\n+   */\n+  private final ImmutableList<DependencyNode> dependencyPath;\n+\n+  /**\n+   * The list of invalid class files if type is {@link Type#INVALID_CLASS_FILE}; otherwise an empty\n+   * list.\n+   */\n+  private final ImmutableList<String> classFileNames;\n+\n+  /**\n+   * Returns the problem describing the artifact at the leaf of {@code dependencyPath} is not", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3OTIyNw==", "bodyText": "All these static methods could be constructors in subclasses.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r364979227", "createdAt": "2020-01-09T21:56:20Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/dependencies/ArtifactProblem.java", "diffHunk": "@@ -0,0 +1,126 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.cloud.tools.opensource.dependencies;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.List;\n+import javax.annotation.Nullable;\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+/** Problem in a Maven artifact. */\n+public final class ArtifactProblem {\n+\n+  /** The Maven artifact that has the problem. */\n+  private final Artifact artifact;\n+\n+  /** The type of the problem in the artifact. */\n+  private final Type type;\n+\n+  /**\n+   * The dependency path to the artifact from the root of the dependency tree. An empty list if the\n+   * path is unknown.\n+   */\n+  private final ImmutableList<DependencyNode> dependencyPath;\n+\n+  /**\n+   * The list of invalid class files if type is {@link Type#INVALID_CLASS_FILE}; otherwise an empty\n+   * list.\n+   */\n+  private final ImmutableList<String> classFileNames;\n+\n+  /**\n+   * Returns the problem describing the artifact at the leaf of {@code dependencyPath} is not\n+   * resolvable by Maven.\n+   */\n+  public static ArtifactProblem unresolvableArtifact(List<DependencyNode> dependencyPath) {\n+    checkNotNull(dependencyPath);\n+    checkArgument(dependencyPath.size() > 0, \"dependencyPath should not be empty\");\n+\n+    DependencyNode lastElement = dependencyPath.get(dependencyPath.size() - 1);\n+    return new ArtifactProblem(\n+        Type.UNRESOLVABLE_ARTIFACT, lastElement.getArtifact(), dependencyPath, ImmutableList.of());\n+  }\n+\n+  /**\n+   * Returns the problem describing the artifact is not resolvable by Maven. This method is used\n+   * when the dependency path to the artifact in the dependency tree is unknown.\n+   */\n+  public static ArtifactProblem unresolvableArtifactUnknownDependencyPath(Artifact artifact) {\n+    return new ArtifactProblem(\n+        Type.UNRESOLVABLE_ARTIFACT, artifact, ImmutableList.of(), ImmutableList.of());\n+  }\n+\n+  /** Returns the problems describing the artifact contains invalid class files. */\n+  public static ArtifactProblem invalidClassFileInArtifact(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3OTU4NA==", "bodyText": "This switch strongly suggests this class really does need multiple subclasses.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r364979584", "createdAt": "2020-01-09T21:57:08Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/dependencies/ArtifactProblem.java", "diffHunk": "@@ -0,0 +1,126 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.cloud.tools.opensource.dependencies;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.List;\n+import javax.annotation.Nullable;\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+/** Problem in a Maven artifact. */\n+public final class ArtifactProblem {\n+\n+  /** The Maven artifact that has the problem. */\n+  private final Artifact artifact;\n+\n+  /** The type of the problem in the artifact. */\n+  private final Type type;\n+\n+  /**\n+   * The dependency path to the artifact from the root of the dependency tree. An empty list if the\n+   * path is unknown.\n+   */\n+  private final ImmutableList<DependencyNode> dependencyPath;\n+\n+  /**\n+   * The list of invalid class files if type is {@link Type#INVALID_CLASS_FILE}; otherwise an empty\n+   * list.\n+   */\n+  private final ImmutableList<String> classFileNames;\n+\n+  /**\n+   * Returns the problem describing the artifact at the leaf of {@code dependencyPath} is not\n+   * resolvable by Maven.\n+   */\n+  public static ArtifactProblem unresolvableArtifact(List<DependencyNode> dependencyPath) {\n+    checkNotNull(dependencyPath);\n+    checkArgument(dependencyPath.size() > 0, \"dependencyPath should not be empty\");\n+\n+    DependencyNode lastElement = dependencyPath.get(dependencyPath.size() - 1);\n+    return new ArtifactProblem(\n+        Type.UNRESOLVABLE_ARTIFACT, lastElement.getArtifact(), dependencyPath, ImmutableList.of());\n+  }\n+\n+  /**\n+   * Returns the problem describing the artifact is not resolvable by Maven. This method is used\n+   * when the dependency path to the artifact in the dependency tree is unknown.\n+   */\n+  public static ArtifactProblem unresolvableArtifactUnknownDependencyPath(Artifact artifact) {\n+    return new ArtifactProblem(\n+        Type.UNRESOLVABLE_ARTIFACT, artifact, ImmutableList.of(), ImmutableList.of());\n+  }\n+\n+  /** Returns the problems describing the artifact contains invalid class files. */\n+  public static ArtifactProblem invalidClassFileInArtifact(\n+      List<DependencyNode> dependencyPath, List<String> classFileNames) {\n+    checkNotNull(dependencyPath);\n+    checkArgument(!dependencyPath.isEmpty(), \"dependencyPath should not be empty\");\n+\n+    DependencyNode lastElement = dependencyPath.get(dependencyPath.size() - 1);\n+    return new ArtifactProblem(\n+        Type.INVALID_CLASS_FILE, lastElement.getArtifact(), dependencyPath, classFileNames);\n+  }\n+\n+  private ArtifactProblem(\n+      Type type,\n+      Artifact artifact,\n+      @Nullable List<DependencyNode> dependencyPath,\n+      List<String> classFileNames) {\n+    this.type = checkNotNull(type);\n+    this.artifact = checkNotNull(artifact);\n+    this.dependencyPath = ImmutableList.copyOf(dependencyPath);\n+    this.classFileNames = ImmutableList.copyOf(classFileNames);\n+  }\n+\n+  private enum Type {\n+    /** When the JAR file of the artifact contains invalid class files. */\n+    INVALID_CLASS_FILE,\n+    /** When the artifact is unresolvable. */\n+    UNRESOLVABLE_ARTIFACT,\n+  }\n+\n+  @Override\n+  public String toString() {\n+    switch (type) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk4MDIxMA==", "bodyText": "make this a comment in the code", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r364980210", "createdAt": "2020-01-09T21:58:41Z", "author": {"login": "elharo"}, "path": "enforcer-rules/src/main/java/com/google/cloud/tools/dependencies/enforcer/LinkageCheckerRule.java", "diffHunk": "@@ -225,6 +228,11 @@ public void execute(@Nonnull EnforcerRuleHelper helper) throws EnforcerRuleExcep\n       }\n     } catch (ExpressionEvaluationException ex) {\n       throw new EnforcerRuleException(\"Unable to lookup an expression \" + ex.getMessage(), ex);\n+    } finally {\n+      // Always show artifact problems. But these should not be the cause of failing the rule.\n+      for (ArtifactProblem problem : artifactProblems) {\n+        logger.warn(problem.toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk1MDExNw=="}, "originalCommit": {"oid": "300430846a4078f6055fb8480b74e46967571db2"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b6640a7020c1b1fca1f2e6e2f0a105486188bea", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/5b6640a7020c1b1fca1f2e6e2f0a105486188bea", "committedDate": "2020-01-09T23:31:11Z", "message": "Errors as subclasses"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4453555cdb989f2358428fa3f684f6e6054c6a73", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/4453555cdb989f2358428fa3f684f6e6054c6a73", "committedDate": "2020-01-10T01:43:02Z", "message": "Fixed test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb4993ffef141839aa90a20d5731e9e36d960049", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/cb4993ffef141839aa90a20d5731e9e36d960049", "committedDate": "2020-01-10T01:45:52Z", "message": "javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "508df8a965efebf7165d745f25b734c7ba1a915c", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/508df8a965efebf7165d745f25b734c7ba1a915c", "committedDate": "2020-01-10T01:48:14Z", "message": "Fixed test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "028b702ce33de85b8bf74fbccdce4ce207e31893", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/028b702ce33de85b8bf74fbccdce4ce207e31893", "committedDate": "2020-01-10T01:50:16Z", "message": "final artifactProblems"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc71a3bbdf7be731a883df7f9dfe41c906dc3d29", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/bc71a3bbdf7be731a883df7f9dfe41c906dc3d29", "committedDate": "2020-01-10T01:57:23Z", "message": "comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11db7c6763f9258435f50179b99f3251fbf5777c", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/11db7c6763f9258435f50179b99f3251fbf5777c", "committedDate": "2020-01-10T02:00:41Z", "message": "Should not -> cannot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba4f2162e17db76278bde1613c4ca932542a98cf", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/ba4f2162e17db76278bde1613c4ca932542a98cf", "committedDate": "2020-01-10T02:31:13Z", "message": "One line after copyright"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwODY5Mzcy", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#pullrequestreview-340869372", "createdAt": "2020-01-09T23:01:42Z", "commit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQyMzowMTo0MlrOFcF-Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQyMzoyMTowNVrOFcGTzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAwMjMzOA==", "bodyText": "No, I don't see advantage to have a common superclass for SymbolProblem and ArtifactProblem. They do not share any property. They are not handled in a container class (Set or Map) together.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r365002338", "createdAt": "2020-01-09T23:01:42Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/dependencies/ArtifactProblem.java", "diffHunk": "@@ -0,0 +1,126 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.cloud.tools.opensource.dependencies;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.List;\n+import javax.annotation.Nullable;\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+/** Problem in a Maven artifact. */\n+public final class ArtifactProblem {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3ODE4NA=="}, "originalCommit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAwMjQyNQ==", "bodyText": "Great idea. Removed the type in favor of class hierarchy.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r365002425", "createdAt": "2020-01-09T23:01:59Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/dependencies/ArtifactProblem.java", "diffHunk": "@@ -0,0 +1,126 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.cloud.tools.opensource.dependencies;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.List;\n+import javax.annotation.Nullable;\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+/** Problem in a Maven artifact. */\n+public final class ArtifactProblem {\n+\n+  /** The Maven artifact that has the problem. */\n+  private final Artifact artifact;\n+\n+  /** The type of the problem in the artifact. */\n+  private final Type type;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3Nzk0Mw=="}, "originalCommit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAwNjg4Mg==", "bodyText": "Fixed in UnresolvableArtifactProblem.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r365006882", "createdAt": "2020-01-09T23:17:40Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/dependencies/ArtifactProblem.java", "diffHunk": "@@ -0,0 +1,126 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.cloud.tools.opensource.dependencies;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.List;\n+import javax.annotation.Nullable;\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+/** Problem in a Maven artifact. */\n+public final class ArtifactProblem {\n+\n+  /** The Maven artifact that has the problem. */\n+  private final Artifact artifact;\n+\n+  /** The type of the problem in the artifact. */\n+  private final Type type;\n+\n+  /**\n+   * The dependency path to the artifact from the root of the dependency tree. An empty list if the\n+   * path is unknown.\n+   */\n+  private final ImmutableList<DependencyNode> dependencyPath;\n+\n+  /**\n+   * The list of invalid class files if type is {@link Type#INVALID_CLASS_FILE}; otherwise an empty\n+   * list.\n+   */\n+  private final ImmutableList<String> classFileNames;\n+\n+  /**\n+   * Returns the problem describing the artifact at the leaf of {@code dependencyPath} is not", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3ODg4NA=="}, "originalCommit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAwNjk3NQ==", "bodyText": "Updated in UnresolvableArtifactProblem.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r365006975", "createdAt": "2020-01-09T23:17:57Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/dependencies/ArtifactProblem.java", "diffHunk": "@@ -0,0 +1,126 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.cloud.tools.opensource.dependencies;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.List;\n+import javax.annotation.Nullable;\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+/** Problem in a Maven artifact. */\n+public final class ArtifactProblem {\n+\n+  /** The Maven artifact that has the problem. */\n+  private final Artifact artifact;\n+\n+  /** The type of the problem in the artifact. */\n+  private final Type type;\n+\n+  /**\n+   * The dependency path to the artifact from the root of the dependency tree. An empty list if the\n+   * path is unknown.\n+   */\n+  private final ImmutableList<DependencyNode> dependencyPath;\n+\n+  /**\n+   * The list of invalid class files if type is {@link Type#INVALID_CLASS_FILE}; otherwise an empty\n+   * list.\n+   */\n+  private final ImmutableList<String> classFileNames;\n+\n+  /**\n+   * Returns the problem describing the artifact at the leaf of {@code dependencyPath} is not\n+   * resolvable by Maven.\n+   */\n+  public static ArtifactProblem unresolvableArtifact(List<DependencyNode> dependencyPath) {\n+    checkNotNull(dependencyPath);\n+    checkArgument(dependencyPath.size() > 0, \"dependencyPath should not be empty\");\n+\n+    DependencyNode lastElement = dependencyPath.get(dependencyPath.size() - 1);\n+    return new ArtifactProblem(\n+        Type.UNRESOLVABLE_ARTIFACT, lastElement.getArtifact(), dependencyPath, ImmutableList.of());\n+  }\n+\n+  /**\n+   * Returns the problem describing the artifact is not resolvable by Maven. This method is used", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3ODcxMw=="}, "originalCommit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAwNzAxMw==", "bodyText": "They are now subclasses.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r365007013", "createdAt": "2020-01-09T23:18:07Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/dependencies/ArtifactProblem.java", "diffHunk": "@@ -0,0 +1,126 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.cloud.tools.opensource.dependencies;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.List;\n+import javax.annotation.Nullable;\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+/** Problem in a Maven artifact. */\n+public final class ArtifactProblem {\n+\n+  /** The Maven artifact that has the problem. */\n+  private final Artifact artifact;\n+\n+  /** The type of the problem in the artifact. */\n+  private final Type type;\n+\n+  /**\n+   * The dependency path to the artifact from the root of the dependency tree. An empty list if the\n+   * path is unknown.\n+   */\n+  private final ImmutableList<DependencyNode> dependencyPath;\n+\n+  /**\n+   * The list of invalid class files if type is {@link Type#INVALID_CLASS_FILE}; otherwise an empty\n+   * list.\n+   */\n+  private final ImmutableList<String> classFileNames;\n+\n+  /**\n+   * Returns the problem describing the artifact at the leaf of {@code dependencyPath} is not\n+   * resolvable by Maven.\n+   */\n+  public static ArtifactProblem unresolvableArtifact(List<DependencyNode> dependencyPath) {\n+    checkNotNull(dependencyPath);\n+    checkArgument(dependencyPath.size() > 0, \"dependencyPath should not be empty\");\n+\n+    DependencyNode lastElement = dependencyPath.get(dependencyPath.size() - 1);\n+    return new ArtifactProblem(\n+        Type.UNRESOLVABLE_ARTIFACT, lastElement.getArtifact(), dependencyPath, ImmutableList.of());\n+  }\n+\n+  /**\n+   * Returns the problem describing the artifact is not resolvable by Maven. This method is used\n+   * when the dependency path to the artifact in the dependency tree is unknown.\n+   */\n+  public static ArtifactProblem unresolvableArtifactUnknownDependencyPath(Artifact artifact) {\n+    return new ArtifactProblem(\n+        Type.UNRESOLVABLE_ARTIFACT, artifact, ImmutableList.of(), ImmutableList.of());\n+  }\n+\n+  /** Returns the problems describing the artifact contains invalid class files. */\n+  public static ArtifactProblem invalidClassFileInArtifact(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3OTIyNw=="}, "originalCommit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAwNzI4OQ==", "bodyText": "The Type enum is removed in favor of InvalidClassFileProblem and UnresolvableArtifactProblem. They don't have switch statement.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r365007289", "createdAt": "2020-01-09T23:19:04Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/dependencies/ArtifactProblem.java", "diffHunk": "@@ -0,0 +1,126 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.cloud.tools.opensource.dependencies;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.List;\n+import javax.annotation.Nullable;\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+/** Problem in a Maven artifact. */\n+public final class ArtifactProblem {\n+\n+  /** The Maven artifact that has the problem. */\n+  private final Artifact artifact;\n+\n+  /** The type of the problem in the artifact. */\n+  private final Type type;\n+\n+  /**\n+   * The dependency path to the artifact from the root of the dependency tree. An empty list if the\n+   * path is unknown.\n+   */\n+  private final ImmutableList<DependencyNode> dependencyPath;\n+\n+  /**\n+   * The list of invalid class files if type is {@link Type#INVALID_CLASS_FILE}; otherwise an empty\n+   * list.\n+   */\n+  private final ImmutableList<String> classFileNames;\n+\n+  /**\n+   * Returns the problem describing the artifact at the leaf of {@code dependencyPath} is not\n+   * resolvable by Maven.\n+   */\n+  public static ArtifactProblem unresolvableArtifact(List<DependencyNode> dependencyPath) {\n+    checkNotNull(dependencyPath);\n+    checkArgument(dependencyPath.size() > 0, \"dependencyPath should not be empty\");\n+\n+    DependencyNode lastElement = dependencyPath.get(dependencyPath.size() - 1);\n+    return new ArtifactProblem(\n+        Type.UNRESOLVABLE_ARTIFACT, lastElement.getArtifact(), dependencyPath, ImmutableList.of());\n+  }\n+\n+  /**\n+   * Returns the problem describing the artifact is not resolvable by Maven. This method is used\n+   * when the dependency path to the artifact in the dependency tree is unknown.\n+   */\n+  public static ArtifactProblem unresolvableArtifactUnknownDependencyPath(Artifact artifact) {\n+    return new ArtifactProblem(\n+        Type.UNRESOLVABLE_ARTIFACT, artifact, ImmutableList.of(), ImmutableList.of());\n+  }\n+\n+  /** Returns the problems describing the artifact contains invalid class files. */\n+  public static ArtifactProblem invalidClassFileInArtifact(\n+      List<DependencyNode> dependencyPath, List<String> classFileNames) {\n+    checkNotNull(dependencyPath);\n+    checkArgument(!dependencyPath.isEmpty(), \"dependencyPath should not be empty\");\n+\n+    DependencyNode lastElement = dependencyPath.get(dependencyPath.size() - 1);\n+    return new ArtifactProblem(\n+        Type.INVALID_CLASS_FILE, lastElement.getArtifact(), dependencyPath, classFileNames);\n+  }\n+\n+  private ArtifactProblem(\n+      Type type,\n+      Artifact artifact,\n+      @Nullable List<DependencyNode> dependencyPath,\n+      List<String> classFileNames) {\n+    this.type = checkNotNull(type);\n+    this.artifact = checkNotNull(artifact);\n+    this.dependencyPath = ImmutableList.copyOf(dependencyPath);\n+    this.classFileNames = ImmutableList.copyOf(classFileNames);\n+  }\n+\n+  private enum Type {\n+    /** When the JAR file of the artifact contains invalid class files. */\n+    INVALID_CLASS_FILE,\n+    /** When the artifact is unresolvable. */\n+    UNRESOLVABLE_ARTIFACT,\n+  }\n+\n+  @Override\n+  public String toString() {\n+    switch (type) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3OTU4NA=="}, "originalCommit": {"oid": "1fd3e17a7b7a52e7da3b12e506101880f55dbd42"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAwNzgyMw==", "bodyText": "Moved.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#discussion_r365007823", "createdAt": "2020-01-09T23:21:05Z", "author": {"login": "suztomo"}, "path": "enforcer-rules/src/main/java/com/google/cloud/tools/dependencies/enforcer/LinkageCheckerRule.java", "diffHunk": "@@ -225,6 +228,11 @@ public void execute(@Nonnull EnforcerRuleHelper helper) throws EnforcerRuleExcep\n       }\n     } catch (ExpressionEvaluationException ex) {\n       throw new EnforcerRuleException(\"Unable to lookup an expression \" + ex.getMessage(), ex);\n+    } finally {\n+      // Always show artifact problems. But these should not be the cause of failing the rule.\n+      for (ArtifactProblem problem : artifactProblems) {\n+        logger.warn(problem.toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk1MDExNw=="}, "originalCommit": {"oid": "300430846a4078f6055fb8480b74e46967571db2"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMjg1ODk4", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1096#pullrequestreview-341285898", "createdAt": "2020-01-10T16:42:19Z", "commit": {"oid": "ba4f2162e17db76278bde1613c4ca932542a98cf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1255, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}