{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNTk3NzIx", "number": 1308, "title": "ClassPathEntry to replace java.nio.file.Path", "bodyText": "ClassPathEntry is an interface.\n\nFor bare JAR file, we use JarClassPathElement.\nFor Maven artifacts, we use ArtifactClassPathElement.\n\n@elharo The redundancy is now removed. Does this direction look good to you? If we're comfortable with the class hierarchy and their fields, I'll create toString, equals, and corresponding tests.", "createdAt": "2020-03-23T19:33:12Z", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1308", "merged": true, "mergeCommit": {"oid": "3ab72951961d57d19c10811777f6e9062996969e"}, "closed": true, "closedAt": "2020-03-25T17:39:59Z", "author": {"login": "suztomo"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQjfQIgH2gAyMzkyNTk3NzIxOmE0NGM3YjY0MzMyZTUyZGIxZTFlOGQyOGM1OGQzOTg0OTQ2NDIwODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRK2U1gH2gAyMzkyNTk3NzIxOjI3N2MyZjk3OWExN2NiOWQ3NGU1Mjc4YWJlZWU0Y2UzYmU5OWQzYmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a44c7b64332e52db1e1e8d28c58d398494642082", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/a44c7b64332e52db1e1e8d28c58d398494642082", "committedDate": "2020-03-23T19:29:41Z", "message": "ClassPathElement"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NzY0OTgz", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1308#pullrequestreview-379764983", "createdAt": "2020-03-23T19:40:49Z", "commit": {"oid": "a44c7b64332e52db1e1e8d28c58d398494642082"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxOTo0MDo0OVrOF6VQQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxOTo0MDo0OVrOF6VQQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjcwOTk1NA==", "bodyText": "This is where the ClassPathElement instances are used.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1308#discussion_r396709954", "createdAt": "2020-03-23T19:40:49Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/LinkageCheckClassPath.java", "diffHunk": "@@ -53,8 +52,11 @@\n    *\n    * @param paths list of absolute paths for the elements in the class path\n    */\n-  LinkageCheckClassPath(List<Path> paths) {\n-    super(paths.stream().map(Path::toString).collect(Collectors.joining(File.pathSeparator)));\n+  LinkageCheckClassPath(List<ClassPathElement> paths) {\n+    super(\n+        paths.stream()\n+            .map(ClassPathElement::getClassPath)\n+            .collect(Collectors.joining(File.pathSeparator)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a44c7b64332e52db1e1e8d28c58d398494642082"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9111f4a745d04c637b5eb4adf486b933c0fd0cfc", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/9111f4a745d04c637b5eb4adf486b933c0fd0cfc", "committedDate": "2020-03-23T19:53:43Z", "message": "getArtifact"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "276c07f050b5f549e3274362b3f294f100c02fa9", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/276c07f050b5f549e3274362b3f294f100c02fa9", "committedDate": "2020-03-23T19:54:37Z", "message": "checkNotNull(artifact.file)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5ODM3MzU1", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1308#pullrequestreview-379837355", "createdAt": "2020-03-23T21:30:27Z", "commit": {"oid": "276c07f050b5f549e3274362b3f294f100c02fa9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QyMTozMDoyN1rOF6Y13g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QyMTozMDoyN1rOF6Y13g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc2ODczNA==", "bodyText": "Oracle's docs call these entries, not elements:\nhttps://docs.oracle.com/javase/8/docs/technotes/tools/windows/classpath.html", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1308#discussion_r396768734", "createdAt": "2020-03-23T21:30:27Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ClassPathElement.java", "diffHunk": "@@ -0,0 +1,24 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "276c07f050b5f549e3274362b3f294f100c02fa9"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3547a03e8fa95fe7d1edd1adeb58aa48c6f0dd2a", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/3547a03e8fa95fe7d1edd1adeb58aa48c6f0dd2a", "committedDate": "2020-03-24T01:47:33Z", "message": "ClassPathEntry"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNDMyMTY0", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1308#pullrequestreview-380432164", "createdAt": "2020-03-24T15:36:05Z", "commit": {"oid": "3547a03e8fa95fe7d1edd1adeb58aa48c6f0dd2a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNTozNjowNVrOF62JUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNTozNjowNVrOF62JUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzI0ODg0OA==", "bodyText": "This is a path as a string, not a class path. A path looks like \"/usr/lib/classes/foo.jar\"\nA classpath is a semicolon or colon separated list of paths.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1308#discussion_r397248848", "createdAt": "2020-03-24T15:36:05Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/JarClassPathEntry.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import java.nio.file.Path;\n+import java.util.Objects;\n+\n+/** JAR file entry in a class path. */\n+class JarClassPathEntry implements ClassPathEntry {\n+  private Path jar;\n+\n+  JarClassPathEntry(Path jar) {\n+    this.jar = jar;\n+  }\n+\n+  @Override\n+  public String getClassPath() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3547a03e8fa95fe7d1edd1adeb58aa48c6f0dd2a"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNDM3MDE2", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1308#pullrequestreview-380437016", "createdAt": "2020-03-24T15:41:04Z", "commit": {"oid": "3547a03e8fa95fe7d1edd1adeb58aa48c6f0dd2a"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNTo0MTowNFrOF62YMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNTo0MjoxNFrOF62b_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzI1MjY1Nw==", "bodyText": "Should we be able to use this type exclusively? If we have to do any casting or reflection to determine the real type, the design is incomplete.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1308#discussion_r397252657", "createdAt": "2020-03-24T15:41:04Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ClassPathEntry.java", "diffHunk": "@@ -0,0 +1,24 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+/** An entry in Java class path. */\n+interface ClassPathEntry {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3547a03e8fa95fe7d1edd1adeb58aa48c6f0dd2a"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzI1MzYyOQ==", "bodyText": "Why interface instead of abstract class? Abstract classes are more powerful and much more changeable. E.g. you can add methods to one without breaking all subclasses.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1308#discussion_r397253629", "createdAt": "2020-03-24T15:42:14Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ClassPathEntry.java", "diffHunk": "@@ -0,0 +1,24 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+/** An entry in Java class path. */\n+interface ClassPathEntry {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3547a03e8fa95fe7d1edd1adeb58aa48c6f0dd2a"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcd8253354d1e70118ea0882a03c251778a3e854", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/dcd8253354d1e70118ea0882a03c251778a3e854", "committedDate": "2020-03-24T16:35:45Z", "message": "Removed interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92a896970e73f657e946ef81e43b85dac1563026", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/92a896970e73f657e946ef81e43b85dac1563026", "committedDate": "2020-03-24T16:58:39Z", "message": "getArtifact for ClassPathEntry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d887a9f20cf9300d8df8971f897e1a0affd8c59", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/3d887a9f20cf9300d8df8971f897e1a0affd8c59", "committedDate": "2020-03-24T20:46:05Z", "message": "One class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6979fd3daeb669b85f2c55ba5770b8d35971220", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/b6979fd3daeb669b85f2c55ba5770b8d35971220", "committedDate": "2020-03-24T20:50:11Z", "message": "Format"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNzAwMzk0", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1308#pullrequestreview-380700394", "createdAt": "2020-03-24T21:12:34Z", "commit": {"oid": "b6979fd3daeb669b85f2c55ba5770b8d35971220"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQyMToxMjozNFrOF7DSfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQyMToxMjozNFrOF7DSfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ2NDE4OA==", "bodyText": "for --> with", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1308#discussion_r397464188", "createdAt": "2020-03-24T21:12:34Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ClassPathEntry.java", "diffHunk": "@@ -0,0 +1,84 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+import java.nio.file.Path;\n+import java.util.Objects;\n+import org.eclipse.aether.artifact.Artifact;\n+\n+/** An entry in a class path. */\n+final class ClassPathEntry {\n+\n+  private Path jar;\n+  private Artifact artifact;\n+\n+  /** An entry for a JAR file without association with a Maven artifact. */\n+  ClassPathEntry(Path jar) {\n+    this.jar = checkNotNull(jar);\n+  }\n+\n+  /** An entry for a Maven artifact. */\n+  ClassPathEntry(Artifact artifact) {\n+    checkNotNull(artifact.getFile());\n+    this.artifact = artifact;\n+  }\n+\n+  /** Returns the path of the entry. */\n+  String getPath() {\n+    if (artifact != null) {\n+      return artifact.getFile().toString();\n+    } else {\n+      return jar.toString();\n+    }\n+  }\n+\n+  /**\n+   * Returns Maven artifact associated for the JAR file. If the JAR file does not have an artifact,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6979fd3daeb669b85f2c55ba5770b8d35971220"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "277c2f979a17cb9d74e5278abeee4ce3be99d3ba", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/277c2f979a17cb9d74e5278abeee4ce3be99d3ba", "committedDate": "2020-03-25T17:21:11Z", "message": "Applied review"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 303, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}