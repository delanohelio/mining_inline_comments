{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3MzM5Nzk2", "number": 1287, "title": "Linkage Checker to use exclusion XML file for default special cases", "bodyText": "Fixes #1272\nFixes #1288", "createdAt": "2020-03-12T16:23:29Z", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287", "merged": true, "mergeCommit": {"oid": "9b3e54d9c943032fe65fd6b8d9ea2a04745a0c76"}, "closed": true, "closedAt": "2020-03-17T18:24:14Z", "author": {"login": "suztomo"}, "timelineItems": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcM-CNXAH2gAyMzg3MzM5Nzk2OjhhYmU2MWNjYTRiOTdjZDdkNDZhZDM3MGNmN2M5NGUwZmQzODBiOTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOlA6DAH2gAyMzg3MzM5Nzk2OmMxZDJmY2E4MzRiMzZmZjA1ZGY4NWYxYWM4OTllNDcwNjYxNjQ4YWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8abe61cca4b97cd7d46ad370cf7c94e0fd380b99", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/8abe61cca4b97cd7d46ad370cf7c94e0fd380b99", "committedDate": "2020-03-12T16:09:42Z", "message": "Test passes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a3d88c3e1e567facd4451f77b51ffdf8901072e", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/9a3d88c3e1e567facd4451f77b51ffdf8901072e", "committedDate": "2020-03-12T16:22:36Z", "message": "Parse URL"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczNzA5MzE2", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#pullrequestreview-373709316", "createdAt": "2020-03-12T16:25:26Z", "commit": {"oid": "9a3d88c3e1e567facd4451f77b51ffdf8901072e"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxNjoyNToyNlrOF1l2Tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxNjoyNzowOVrOF1l7GQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTczODk1OQ==", "bodyText": "linkage-checker-exclusion-default.xml is a file in a JAR file when running as enforcer rule. So picking up URL rather than Path.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391738959", "createdAt": "2020-03-12T16:25:26Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileParser.java", "diffHunk": "@@ -69,13 +70,29 @@\n   static ImmutableList<LinkageErrorMatcher> parse(Path exclusionFile)\n       throws SAXException, IOException, VerifierConfigurationException {\n \n+    InputSource inputSource = new InputSource(Files.newInputStream(exclusionFile));\n+    inputSource.setSystemId(exclusionFile.toUri().toString());\n+\n+    return parse(inputSource);\n+  }\n+\n+  static ImmutableList<LinkageErrorMatcher> parse(URL exclusionFile)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a3d88c3e1e567facd4451f77b51ffdf8901072e"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTczOTYyNw==", "bodyText": "This method is non-static because exclusionMatchers field is an instance variable.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391739627", "createdAt": "2020-03-12T16:26:20Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/LinkageChecker.java", "diffHunk": "@@ -186,39 +196,38 @@ private LinkageChecker(\n \n     // Filter classes in whitelist\n     SetMultimap<SymbolProblem, ClassFile> filteredMap =\n-        Multimaps.filterEntries(problemToClass.build(), LinkageChecker::problemFilter);\n+        Multimaps.filterEntries(problemToClass.build(), this::problemFilter);\n     return ImmutableSetMultimap.copyOf(filteredMap);\n   }\n \n+  private static ImmutableList<LinkageErrorMatcher> readExclusionMatchers() throws IOException {\n+    ImmutableList.Builder<LinkageErrorMatcher> exclusionMatchers = ImmutableList.builder();\n+\n+    try {\n+      URL defaultRuleUrl = ClassLoader.getSystemResource(\"linkage-checker-exclusion-default.xml\");\n+      ImmutableList<LinkageErrorMatcher> defaultMatchers =\n+          ExclusionFileParser.parse(defaultRuleUrl);\n+      exclusionMatchers.addAll(defaultMatchers);\n+    } catch (SAXException | VerifierConfigurationException ex) {\n+      throw new IOException(\"Could not read default exclusion rule\", ex);\n+    }\n+\n+    return exclusionMatchers.build();\n+  }\n+\n   /**\n    * Returns true if the linkage error {@code entry} should be reported. False if it should be\n    * suppressed.\n    */\n-  private static boolean problemFilter(Map.Entry<SymbolProblem, ClassFile> entry) {\n-    ClassFile classFile = entry.getValue();\n+  private boolean problemFilter(Map.Entry<SymbolProblem, ClassFile> entry) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a3d88c3e1e567facd4451f77b51ffdf8901072e"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc0MDE4NQ==", "bodyText": "These Java logic is replaced with the XML file linkage-checker-exclusion-default.xml below.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391740185", "createdAt": "2020-03-12T16:27:09Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/LinkageChecker.java", "diffHunk": "@@ -186,39 +196,38 @@ private LinkageChecker(\n \n     // Filter classes in whitelist\n     SetMultimap<SymbolProblem, ClassFile> filteredMap =\n-        Multimaps.filterEntries(problemToClass.build(), LinkageChecker::problemFilter);\n+        Multimaps.filterEntries(problemToClass.build(), this::problemFilter);\n     return ImmutableSetMultimap.copyOf(filteredMap);\n   }\n \n+  private static ImmutableList<LinkageErrorMatcher> readExclusionMatchers() throws IOException {\n+    ImmutableList.Builder<LinkageErrorMatcher> exclusionMatchers = ImmutableList.builder();\n+\n+    try {\n+      URL defaultRuleUrl = ClassLoader.getSystemResource(\"linkage-checker-exclusion-default.xml\");\n+      ImmutableList<LinkageErrorMatcher> defaultMatchers =\n+          ExclusionFileParser.parse(defaultRuleUrl);\n+      exclusionMatchers.addAll(defaultMatchers);\n+    } catch (SAXException | VerifierConfigurationException ex) {\n+      throw new IOException(\"Could not read default exclusion rule\", ex);\n+    }\n+\n+    return exclusionMatchers.build();\n+  }\n+\n   /**\n    * Returns true if the linkage error {@code entry} should be reported. False if it should be\n    * suppressed.\n    */\n-  private static boolean problemFilter(Map.Entry<SymbolProblem, ClassFile> entry) {\n-    ClassFile classFile = entry.getValue();\n+  private boolean problemFilter(Map.Entry<SymbolProblem, ClassFile> entry) {\n+    ClassFile sourceClass = entry.getValue();\n     SymbolProblem symbolProblem = entry.getKey();\n-    String sourceClassName = classFile.getBinaryName();\n-    if (SOURCE_CLASSES_TO_SUPPRESS.contains(sourceClassName)) {\n-      return false;\n-    }\n-\n-    // GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that only exists in\n-    // special JDK. https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929\n-    String problematicClassName = symbolProblem.getSymbol().getClassBinaryName();\n-    if (problematicClassName.startsWith(\"jdk.vm.ci\")\n-        && (sourceClassName.startsWith(\"com.oracle.svm\")\n-            || sourceClassName.startsWith(\"com.oracle.graal\")\n-            || sourceClassName.startsWith(\"org.graalvm\"))) {\n-      return false;\n-    }\n \n-    // Mockito's MockMethodDispatcher uses special class loader to load MockMethodDispatcher.raw\n-    // https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/407\n-    if (problematicClassName.equals(\"org.mockito.internal.creation.bytebuddy.MockMethodDispatcher\")\n-        && sourceClassName.startsWith(\"org.mockito.internal.creation.bytebuddy\")) {\n-      return false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a3d88c3e1e567facd4451f77b51ffdf8901072e"}, "originalPosition": 113}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/a307b484bac633a92458ed8cf2d3aab12956d81c", "committedDate": "2020-03-12T16:52:21Z", "message": "Using LinkageChecker's class loader"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczNzk4NjM0", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#pullrequestreview-373798634", "createdAt": "2020-03-12T18:22:51Z", "commit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxODoyMjo1MVrOF1qLnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxODoyNjo0NVrOF1qTpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgwOTk0OQ==", "bodyText": "List feels wrong here, as if it's exposing implementation details. Would it make sense to have a single object that contains a list, rather than a bunch of matchers? See comment below.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391809949", "createdAt": "2020-03-12T18:22:51Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/LinkageChecker.java", "diffHunk": "@@ -99,18 +106,21 @@ public static LinkageChecker create(Bom bom) throws IOException {\n \n   @VisibleForTesting\n   LinkageChecker cloneWith(SymbolReferenceMaps newSymbolMaps) {\n-    return new LinkageChecker(classDumper, jars, newSymbolMaps, classReferenceGraph);\n+    return new LinkageChecker(\n+        classDumper, jars, newSymbolMaps, classReferenceGraph, exclusionMatchers);\n   }\n \n   private LinkageChecker(\n       ClassDumper classDumper,\n       List<Path> jars,\n       SymbolReferenceMaps symbolReferenceMaps,\n-      ClassReferenceGraph classReferenceGraph) {\n+      ClassReferenceGraph classReferenceGraph,\n+      ImmutableList<LinkageErrorMatcher> exclusionMatchers) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxMDgwMw==", "bodyText": "This list iteration logic could become part of an ExcludedErrors class. Then it becomes simply\nreturn excludedErrors.contains(symbolProblem, sourceClass)", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391810803", "createdAt": "2020-03-12T18:24:28Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/LinkageChecker.java", "diffHunk": "@@ -186,39 +196,41 @@ private LinkageChecker(\n \n     // Filter classes in whitelist\n     SetMultimap<SymbolProblem, ClassFile> filteredMap =\n-        Multimaps.filterEntries(problemToClass.build(), LinkageChecker::problemFilter);\n+        Multimaps.filterEntries(problemToClass.build(), this::problemFilter);\n     return ImmutableSetMultimap.copyOf(filteredMap);\n   }\n \n+  private static ImmutableList<LinkageErrorMatcher> readExclusionMatchers() throws IOException {\n+    ImmutableList.Builder<LinkageErrorMatcher> exclusionMatchers = ImmutableList.builder();\n+\n+    try {\n+      URL defaultRuleUrl =\n+          LinkageChecker.class\n+              .getClassLoader()\n+              .getResource(\"linkage-checker-exclusion-default.xml\");\n+      ImmutableList<LinkageErrorMatcher> defaultMatchers =\n+          ExclusionFileParser.parse(defaultRuleUrl);\n+      exclusionMatchers.addAll(defaultMatchers);\n+    } catch (SAXException | VerifierConfigurationException ex) {\n+      throw new IOException(\"Could not read default exclusion rule\", ex);\n+    }\n+\n+    return exclusionMatchers.build();\n+  }\n+\n   /**\n    * Returns true if the linkage error {@code entry} should be reported. False if it should be\n    * suppressed.\n    */\n-  private static boolean problemFilter(Map.Entry<SymbolProblem, ClassFile> entry) {\n-    ClassFile classFile = entry.getValue();\n+  private boolean problemFilter(Map.Entry<SymbolProblem, ClassFile> entry) {\n+    ClassFile sourceClass = entry.getValue();\n     SymbolProblem symbolProblem = entry.getKey();\n-    String sourceClassName = classFile.getBinaryName();\n-    if (SOURCE_CLASSES_TO_SUPPRESS.contains(sourceClassName)) {\n-      return false;\n-    }\n-\n-    // GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that only exists in\n-    // special JDK. https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929\n-    String problematicClassName = symbolProblem.getSymbol().getClassBinaryName();\n-    if (problematicClassName.startsWith(\"jdk.vm.ci\")\n-        && (sourceClassName.startsWith(\"com.oracle.svm\")\n-            || sourceClassName.startsWith(\"com.oracle.graal\")\n-            || sourceClassName.startsWith(\"org.graalvm\"))) {\n-      return false;\n-    }\n \n-    // Mockito's MockMethodDispatcher uses special class loader to load MockMethodDispatcher.raw\n-    // https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/407\n-    if (problematicClassName.equals(\"org.mockito.internal.creation.bytebuddy.MockMethodDispatcher\")\n-        && sourceClassName.startsWith(\"org.mockito.internal.creation.bytebuddy\")) {\n-      return false;\n+    for (LinkageErrorMatcher matcher : exclusionMatchers) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "originalPosition": 117}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxMTEyOA==", "bodyText": "Expand comment to explain why this is not a problem.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391811128", "createdAt": "2020-03-12T18:25:05Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/resources/linkage-checker-exclusion-default.xml", "diffHunk": "@@ -0,0 +1,50 @@\n+<LinkageCheckerFilter>\n+  <!-- reactor-core's Traces catches Throwable to detect classes available in\n+    Java 9+.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/816 -->\n+  <LinkageError>\n+    <Source>\n+      <Package name=\"reactor.core.publisher.Traces\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that\n+    only exists in special JDK.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929 -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxMjAwNg==", "bodyText": "The comment should explain why we don't care about this. In fact this doesn't need to be a comment. It can be another element, and include full HTML markup (if that's useful).", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391812006", "createdAt": "2020-03-12T18:26:45Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/resources/linkage-checker-exclusion-default.xml", "diffHunk": "@@ -0,0 +1,50 @@\n+<LinkageCheckerFilter>\n+  <!-- reactor-core's Traces catches Throwable to detect classes available in\n+    Java 9+.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/816 -->\n+  <LinkageError>\n+    <Source>\n+      <Package name=\"reactor.core.publisher.Traces\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that\n+    only exists in special JDK.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929 -->\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"com.oracle.svm\" />\n+    </Source>\n+  </LinkageError>\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"com.oracle.graal\" />\n+    </Source>\n+  </LinkageError>\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"org.graalvm\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- Mockito's MockMethodDispatcher uses special class loader to load", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b6361cc6cd842895e5a90e641a08b74d524f0bb", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/1b6361cc6cd842895e5a90e641a08b74d524f0bb", "committedDate": "2020-03-12T19:17:35Z", "message": "ExcludedErrors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0dd32902567a816c831e4da84ef7e3edcbc4cf5", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/a0dd32902567a816c831e4da84ef7e3edcbc4cf5", "committedDate": "2020-03-12T19:25:36Z", "message": "ExcludedErrorsTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d21eb2c6ff24f7022144dc1a065b4388c58cdd2", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/2d21eb2c6ff24f7022144dc1a065b4388c58cdd2", "committedDate": "2020-03-12T19:26:35Z", "message": "revert unwanted change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04e696141ddec6d2632da1a7c60e09f3aa634da3", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/04e696141ddec6d2632da1a7c60e09f3aa634da3", "committedDate": "2020-03-12T19:27:35Z", "message": "2020"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczODIyNzIy", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#pullrequestreview-373822722", "createdAt": "2020-03-12T18:58:36Z", "commit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxODo1ODozN1rOF1rWUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxOToxNTo1MVrOF1r3pA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgyOTA3NA==", "bodyText": "Nice idea. Changed to ExcludedErrors.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391829074", "createdAt": "2020-03-12T18:58:37Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/LinkageChecker.java", "diffHunk": "@@ -99,18 +106,21 @@ public static LinkageChecker create(Bom bom) throws IOException {\n \n   @VisibleForTesting\n   LinkageChecker cloneWith(SymbolReferenceMaps newSymbolMaps) {\n-    return new LinkageChecker(classDumper, jars, newSymbolMaps, classReferenceGraph);\n+    return new LinkageChecker(\n+        classDumper, jars, newSymbolMaps, classReferenceGraph, exclusionMatchers);\n   }\n \n   private LinkageChecker(\n       ClassDumper classDumper,\n       List<Path> jars,\n       SymbolReferenceMaps symbolReferenceMaps,\n-      ClassReferenceGraph classReferenceGraph) {\n+      ClassReferenceGraph classReferenceGraph,\n+      ImmutableList<LinkageErrorMatcher> exclusionMatchers) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgwOTk0OQ=="}, "originalCommit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgyOTI1NA==", "bodyText": "Moved to ExcludedErrors.contains.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391829254", "createdAt": "2020-03-12T18:58:56Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/LinkageChecker.java", "diffHunk": "@@ -186,39 +196,41 @@ private LinkageChecker(\n \n     // Filter classes in whitelist\n     SetMultimap<SymbolProblem, ClassFile> filteredMap =\n-        Multimaps.filterEntries(problemToClass.build(), LinkageChecker::problemFilter);\n+        Multimaps.filterEntries(problemToClass.build(), this::problemFilter);\n     return ImmutableSetMultimap.copyOf(filteredMap);\n   }\n \n+  private static ImmutableList<LinkageErrorMatcher> readExclusionMatchers() throws IOException {\n+    ImmutableList.Builder<LinkageErrorMatcher> exclusionMatchers = ImmutableList.builder();\n+\n+    try {\n+      URL defaultRuleUrl =\n+          LinkageChecker.class\n+              .getClassLoader()\n+              .getResource(\"linkage-checker-exclusion-default.xml\");\n+      ImmutableList<LinkageErrorMatcher> defaultMatchers =\n+          ExclusionFileParser.parse(defaultRuleUrl);\n+      exclusionMatchers.addAll(defaultMatchers);\n+    } catch (SAXException | VerifierConfigurationException ex) {\n+      throw new IOException(\"Could not read default exclusion rule\", ex);\n+    }\n+\n+    return exclusionMatchers.build();\n+  }\n+\n   /**\n    * Returns true if the linkage error {@code entry} should be reported. False if it should be\n    * suppressed.\n    */\n-  private static boolean problemFilter(Map.Entry<SymbolProblem, ClassFile> entry) {\n-    ClassFile classFile = entry.getValue();\n+  private boolean problemFilter(Map.Entry<SymbolProblem, ClassFile> entry) {\n+    ClassFile sourceClass = entry.getValue();\n     SymbolProblem symbolProblem = entry.getKey();\n-    String sourceClassName = classFile.getBinaryName();\n-    if (SOURCE_CLASSES_TO_SUPPRESS.contains(sourceClassName)) {\n-      return false;\n-    }\n-\n-    // GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that only exists in\n-    // special JDK. https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929\n-    String problematicClassName = symbolProblem.getSymbol().getClassBinaryName();\n-    if (problematicClassName.startsWith(\"jdk.vm.ci\")\n-        && (sourceClassName.startsWith(\"com.oracle.svm\")\n-            || sourceClassName.startsWith(\"com.oracle.graal\")\n-            || sourceClassName.startsWith(\"org.graalvm\"))) {\n-      return false;\n-    }\n \n-    // Mockito's MockMethodDispatcher uses special class loader to load MockMethodDispatcher.raw\n-    // https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/407\n-    if (problematicClassName.equals(\"org.mockito.internal.creation.bytebuddy.MockMethodDispatcher\")\n-        && sourceClassName.startsWith(\"org.mockito.internal.creation.bytebuddy\")) {\n-      return false;\n+    for (LinkageErrorMatcher matcher : exclusionMatchers) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxMDgwMw=="}, "originalCommit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "originalPosition": 117}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgzMzgwMQ==", "bodyText": "Added explanation. It's not \"why this is not a problem\" but \"why Linkage Checker reports false positives\".", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391833801", "createdAt": "2020-03-12T19:08:10Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/resources/linkage-checker-exclusion-default.xml", "diffHunk": "@@ -0,0 +1,50 @@\n+<LinkageCheckerFilter>\n+  <!-- reactor-core's Traces catches Throwable to detect classes available in\n+    Java 9+.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/816 -->\n+  <LinkageError>\n+    <Source>\n+      <Package name=\"reactor.core.publisher.Traces\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that\n+    only exists in special JDK.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929 -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxMTEyOA=="}, "originalCommit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgzNzYwNA==", "bodyText": "Added explanation why the errors are false positives.\nI just thought about adding <reason> element that would enable HTML markup. However it does not help users because the exclusion rules are for errors that won't be shown to users, nor in an HTML renderer. If you still think <reason> element helpful, feel free to file an issue. I'll check that later.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391837604", "createdAt": "2020-03-12T19:15:51Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/resources/linkage-checker-exclusion-default.xml", "diffHunk": "@@ -0,0 +1,50 @@\n+<LinkageCheckerFilter>\n+  <!-- reactor-core's Traces catches Throwable to detect classes available in\n+    Java 9+.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/816 -->\n+  <LinkageError>\n+    <Source>\n+      <Package name=\"reactor.core.publisher.Traces\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that\n+    only exists in special JDK.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929 -->\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"com.oracle.svm\" />\n+    </Source>\n+  </LinkageError>\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"com.oracle.graal\" />\n+    </Source>\n+  </LinkageError>\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"org.graalvm\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- Mockito's MockMethodDispatcher uses special class loader to load", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxMjAwNg=="}, "originalCommit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczODUxMjA4", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#pullrequestreview-373851208", "createdAt": "2020-03-12T19:44:59Z", "commit": {"oid": "04e696141ddec6d2632da1a7c60e09f3aa634da3"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxOTo0NDo1OVrOF1suiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxOTo0ODo1MVrOF1s1gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTg1MTY1Ng==", "bodyText": "The benefit of using elements and being flexible in what's allowed is that it enables people to fill needs we didn't plan for. It's the eXtensible part of XML.  We don't show these today. Tomorrow, who knows? It didn't occur to me when you designed this format that we might want documentation like this, bit now I can see the need.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391851656", "createdAt": "2020-03-12T19:44:59Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/resources/linkage-checker-exclusion-default.xml", "diffHunk": "@@ -0,0 +1,50 @@\n+<LinkageCheckerFilter>\n+  <!-- reactor-core's Traces catches Throwable to detect classes available in\n+    Java 9+.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/816 -->\n+  <LinkageError>\n+    <Source>\n+      <Package name=\"reactor.core.publisher.Traces\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that\n+    only exists in special JDK.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929 -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxMTEyOA=="}, "originalCommit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTg1MjMyOA==", "bodyText": "There's no reason not to summarize the relevant parts of #407 here. I think there's more content there than in this file.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391852328", "createdAt": "2020-03-12T19:46:22Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/resources/linkage-checker-exclusion-default.xml", "diffHunk": "@@ -0,0 +1,53 @@\n+<LinkageCheckerFilter>\n+  <!-- reactor-core's Traces catches Throwable to detect classes available in\n+    Java 9+. As Linkage Checker targets Java 8, it ignores these errors to avoid\n+    false positives.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/816 -->\n+  <LinkageError>\n+    <Source>\n+      <Package name=\"reactor.core.publisher.Traces\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that\n+    only exists in special JDK. As Linkage Checker does not use GraalVM, it\n+    ignores the errors to avoid false positives.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929 -->\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"com.oracle.svm\" />\n+    </Source>\n+  </LinkageError>\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"com.oracle.graal\" />\n+    </Source>\n+  </LinkageError>\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"org.graalvm\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- Mockito's MockMethodDispatcher uses special class loader to load\n+    MockMethodDispatcher.raw. As Linkage Checker does not use the class loader,\n+    it ignores the missing class errors to avoid false positives.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/407 -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04e696141ddec6d2632da1a7c60e09f3aa634da3"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTg1MzQ0MA==", "bodyText": "Also, I'm not sure this is correct. The reason is not that \"As Linkage Checker does not use GraalVM, it ignores the errors to avoid false positives.\" Even if we did use GraalVM, I suspect this would happen. What we need here is an answer to the question of why do we consider this a false positive, and that answer is that the code is only invoked when running in a GraalVM that does have those classes.  In a non-Graal VM it's unreachable.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391853440", "createdAt": "2020-03-12T19:48:51Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/resources/linkage-checker-exclusion-default.xml", "diffHunk": "@@ -0,0 +1,50 @@\n+<LinkageCheckerFilter>\n+  <!-- reactor-core's Traces catches Throwable to detect classes available in\n+    Java 9+.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/816 -->\n+  <LinkageError>\n+    <Source>\n+      <Package name=\"reactor.core.publisher.Traces\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that\n+    only exists in special JDK.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929 -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxMTEyOA=="}, "originalCommit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b409b60f76e7ac3baa826df074f0ab85ac917fa0", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/b409b60f76e7ac3baa826df074f0ab85ac917fa0", "committedDate": "2020-03-12T20:48:22Z", "message": "Updating comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40cfa20836b02ab8ba9194ced0a4ec0d0c602330", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/40cfa20836b02ab8ba9194ced0a4ec0d0c602330", "committedDate": "2020-03-12T20:49:51Z", "message": "updating comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczODg1NDU4", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#pullrequestreview-373885458", "createdAt": "2020-03-12T20:40:45Z", "commit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQyMDo0MDo0NlrOF1umKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQyMDo1MDozMlrOF1u3Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTg4MjI4Mw==", "bodyText": "Created an issue: #1288 (not in this PR)\n\nEven if we did use GraalVM, I suspect this would happen.\n\nIf we use Java runtime that provides JVMCI Java Compiler Interface (JVMCI), this missing classes won't happen.\n\nthe code is only invoked when running in a GraalVM\n\nUpdated so.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391882283", "createdAt": "2020-03-12T20:40:46Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/resources/linkage-checker-exclusion-default.xml", "diffHunk": "@@ -0,0 +1,50 @@\n+<LinkageCheckerFilter>\n+  <!-- reactor-core's Traces catches Throwable to detect classes available in\n+    Java 9+.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/816 -->\n+  <LinkageError>\n+    <Source>\n+      <Package name=\"reactor.core.publisher.Traces\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that\n+    only exists in special JDK.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929 -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxMTEyOA=="}, "originalCommit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTg4Mjk1MQ==", "bodyText": "Created #1288", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391882951", "createdAt": "2020-03-12T20:42:12Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/resources/linkage-checker-exclusion-default.xml", "diffHunk": "@@ -0,0 +1,50 @@\n+<LinkageCheckerFilter>\n+  <!-- reactor-core's Traces catches Throwable to detect classes available in\n+    Java 9+.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/816 -->\n+  <LinkageError>\n+    <Source>\n+      <Package name=\"reactor.core.publisher.Traces\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that\n+    only exists in special JDK.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929 -->\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"com.oracle.svm\" />\n+    </Source>\n+  </LinkageError>\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"com.oracle.graal\" />\n+    </Source>\n+  </LinkageError>\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"org.graalvm\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- Mockito's MockMethodDispatcher uses special class loader to load", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxMjAwNg=="}, "originalCommit": {"oid": "a307b484bac633a92458ed8cf2d3aab12956d81c"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTg4NjY3NA==", "bodyText": "Added the raw file is in the mockito JAR.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r391886674", "createdAt": "2020-03-12T20:50:32Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/resources/linkage-checker-exclusion-default.xml", "diffHunk": "@@ -0,0 +1,53 @@\n+<LinkageCheckerFilter>\n+  <!-- reactor-core's Traces catches Throwable to detect classes available in\n+    Java 9+. As Linkage Checker targets Java 8, it ignores these errors to avoid\n+    false positives.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/816 -->\n+  <LinkageError>\n+    <Source>\n+      <Package name=\"reactor.core.publisher.Traces\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that\n+    only exists in special JDK. As Linkage Checker does not use GraalVM, it\n+    ignores the errors to avoid false positives.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929 -->\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"com.oracle.svm\" />\n+    </Source>\n+  </LinkageError>\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"com.oracle.graal\" />\n+    </Source>\n+  </LinkageError>\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"org.graalvm\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- Mockito's MockMethodDispatcher uses special class loader to load\n+    MockMethodDispatcher.raw. As Linkage Checker does not use the class loader,\n+    it ignores the missing class errors to avoid false positives.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/407 -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTg1MjMyOA=="}, "originalCommit": {"oid": "04e696141ddec6d2632da1a7c60e09f3aa634da3"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MzkxNzcw", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#pullrequestreview-374391770", "createdAt": "2020-03-13T15:25:22Z", "commit": {"oid": "40cfa20836b02ab8ba9194ced0a4ec0d0c602330"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNToyNToyM1rOF2H7pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNToyNToyM1rOF2H7pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI5NzM4Mw==", "bodyText": "delete the sentence beginning \"As long as\"", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r392297383", "createdAt": "2020-03-13T15:25:23Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/resources/linkage-checker-exclusion-default.xml", "diffHunk": "@@ -0,0 +1,55 @@\n+<LinkageCheckerFilter>\n+  <!-- reactor-core's Traces catches Throwable to detect classes available in\n+    Java 9+. As Linkage Checker targets Java 8, it ignores these errors to avoid\n+    false positives.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/816 -->\n+  <LinkageError>\n+    <Source>\n+      <Package name=\"reactor.core.publisher.Traces\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that\n+    only exists in special JDK. These missing classes are false positives, because\n+    the code is only invoked when running in a GraalVM.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929 -->\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"com.oracle.svm\" />\n+    </Source>\n+  </LinkageError>\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"com.oracle.graal\" />\n+    </Source>\n+  </LinkageError>\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"org.graalvm\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- Mockito's MockMethodDispatcher uses special class loader to load\n+    MockMethodDispatcher.raw. The class file with \"raw\" suffix is in mockito-core JAR file.\n+    As long as developers use Mockito through a normal usage, there should not be", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40cfa20836b02ab8ba9194ced0a4ec0d0c602330"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MzkzNDA0", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#pullrequestreview-374393404", "createdAt": "2020-03-13T15:27:25Z", "commit": {"oid": "40cfa20836b02ab8ba9194ced0a4ec0d0c602330"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "403d08e11f5d229639d17b0399c82b335b068ffa", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/403d08e11f5d229639d17b0399c82b335b068ffa", "committedDate": "2020-03-13T15:33:20Z", "message": "Merge remote-tracking branch 'origin/master' into i1272"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dcee799d41f21394eb1bddc5880c00546ec8c97", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/8dcee799d41f21394eb1bddc5880c00546ec8c97", "committedDate": "2020-03-13T15:36:01Z", "message": "Applied review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NDAwNTc2", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#pullrequestreview-374400576", "createdAt": "2020-03-13T15:36:30Z", "commit": {"oid": "40cfa20836b02ab8ba9194ced0a4ec0d0c602330"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNTozNjozMVrOF2IWHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNTozNjozMVrOF2IWHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjMwNDE1Nw==", "bodyText": "Deleted.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#discussion_r392304157", "createdAt": "2020-03-13T15:36:31Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/resources/linkage-checker-exclusion-default.xml", "diffHunk": "@@ -0,0 +1,55 @@\n+<LinkageCheckerFilter>\n+  <!-- reactor-core's Traces catches Throwable to detect classes available in\n+    Java 9+. As Linkage Checker targets Java 8, it ignores these errors to avoid\n+    false positives.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/816 -->\n+  <LinkageError>\n+    <Source>\n+      <Package name=\"reactor.core.publisher.Traces\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- GraalVM-related libraries depend on Java Compiler Interface (JVMCI) that\n+    only exists in special JDK. These missing classes are false positives, because\n+    the code is only invoked when running in a GraalVM.\n+    https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/929 -->\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"com.oracle.svm\" />\n+    </Source>\n+  </LinkageError>\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"com.oracle.graal\" />\n+    </Source>\n+  </LinkageError>\n+  <LinkageError>\n+    <Target>\n+      <Package name=\"jdk.vm.ci\" />\n+    </Target>\n+    <Source>\n+      <Package name=\"org.graalvm\" />\n+    </Source>\n+  </LinkageError>\n+\n+  <!-- Mockito's MockMethodDispatcher uses special class loader to load\n+    MockMethodDispatcher.raw. The class file with \"raw\" suffix is in mockito-core JAR file.\n+    As long as developers use Mockito through a normal usage, there should not be", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI5NzM4Mw=="}, "originalCommit": {"oid": "40cfa20836b02ab8ba9194ced0a4ec0d0c602330"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5b2cb64cba0c62d4b96f07ddf906abf983064f5", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/d5b2cb64cba0c62d4b96f07ddf906abf983064f5", "committedDate": "2020-03-16T14:59:42Z", "message": "Merge remote-tracking branch 'origin/master' into i1272"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d39d02bbef3a53c1e957079080211dcf80f1bcc", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/7d39d02bbef3a53c1e957079080211dcf80f1bcc", "committedDate": "2020-03-16T15:20:04Z", "message": "Reason element in schema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18f2c5cf1a4d5d56a38a4774d233d4106d33d079", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/18f2c5cf1a4d5d56a38a4774d233d4106d33d079", "committedDate": "2020-03-16T15:21:49Z", "message": "Using Reason element in default rule"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58d1cc4a6943b66cd8da730a63f46bc873e34837", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/58d1cc4a6943b66cd8da730a63f46bc873e34837", "committedDate": "2020-03-16T15:22:18Z", "message": "format"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NjQyNzk3", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1287#pullrequestreview-375642797", "createdAt": "2020-03-16T23:11:02Z", "commit": {"oid": "58d1cc4a6943b66cd8da730a63f46bc873e34837"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "707d64b0aca31cca41492d562901bc005dbde69f", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/707d64b0aca31cca41492d562901bc005dbde69f", "committedDate": "2020-03-17T15:24:17Z", "message": "Merge branch 'master' into i1272"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1d2fca834b36ff05df85f1ac899e470661648af", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/c1d2fca834b36ff05df85f1ac899e470661648af", "committedDate": "2020-03-17T16:08:30Z", "message": "Merge branch 'master' into i1272"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 291, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}