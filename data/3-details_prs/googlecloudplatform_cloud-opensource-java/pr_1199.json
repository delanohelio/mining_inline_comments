{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyNTg2MzA0", "number": 1199, "title": "Adding artifact problem test to ensure it has correct dependency path", "bodyText": "This is a test that asserts my comment in #1195 (review)", "createdAt": "2020-02-07T20:25:06Z", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199", "merged": true, "mergeCommit": {"oid": "5f8c58f5f5929af8838420b3fd76d9aa3c7112fc"}, "closed": true, "closedAt": "2020-02-07T21:02:51Z", "author": {"login": "suztomo"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcCFORtgH2gAyMzcyNTg2MzA0Ojg3OWQyNTlhODVmYTk3NmE3ODI2Zjg2OTMyN2E3ZWI0MThmNTQxMDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcCFuZYAFqTM1NTQzMDQ0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "879d259a85fa976a7826f869327a7eb418f54102", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/879d259a85fa976a7826f869327a7eb418f54102", "committedDate": "2020-02-07T20:19:03Z", "message": "Added assertion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2749e574895fbbc914d69e5121b0225d7fd97c5c", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/2749e574895fbbc914d69e5121b0225d7fd97c5c", "committedDate": "2020-02-07T20:23:53Z", "message": "DependencyGraphBuilderTest for unavailable artifacts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abfc2c10e04ede04dda27e744438f979415be877", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/abfc2c10e04ede04dda27e744438f979415be877", "committedDate": "2020-02-07T20:25:25Z", "message": "minimum diff"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NDE2NTYz", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199#pullrequestreview-355416563", "createdAt": "2020-02-07T20:26:00Z", "commit": {"oid": "abfc2c10e04ede04dda27e744438f979415be877"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMDoyNjowMFrOFnJSpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMDoyNjoxNVrOFnJS-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU5MTAxNA==", "bodyText": "Line width was exceeding 100 chars.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199#discussion_r376591014", "createdAt": "2020-02-07T20:26:00Z", "author": {"login": "suztomo"}, "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/dependencies/DependencyGraphBuilderTest.java", "diffHunk": "@@ -47,7 +48,9 @@\n   @Test\n   public void testGetTransitiveDependencies() throws RepositoryException {\n     DependencyGraph graph =\n-        dependencyGraphBuilder.buildGraph(new Dependency(datastore, \"compile\")).getDependencyGraph();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abfc2c10e04ede04dda27e744438f979415be877"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU5MTAzNQ==", "bodyText": "Line width was exceeding 100 chars.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199#discussion_r376591035", "createdAt": "2020-02-07T20:26:05Z", "author": {"login": "suztomo"}, "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/dependencies/DependencyGraphBuilderTest.java", "diffHunk": "@@ -60,7 +63,9 @@ public void testGetTransitiveDependencies() throws RepositoryException {\n   @Test\n   public void testGetCompleteDependencies() throws RepositoryException {\n     DependencyGraph graph =\n-        dependencyGraphBuilder.buildCompleteGraph(new Dependency(datastore, \"compile\")).getDependencyGraph();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abfc2c10e04ede04dda27e744438f979415be877"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU5MTA5Nw==", "bodyText": "Line width was exceeding 100 chars.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199#discussion_r376591097", "createdAt": "2020-02-07T20:26:15Z", "author": {"login": "suztomo"}, "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/dependencies/DependencyGraphBuilderTest.java", "diffHunk": "@@ -190,7 +222,8 @@ public void testConfigureAdditionalMavenRepositories_addingGoogleAndroidReposito\n     Artifact artifact = new DefaultArtifact(\"androidx.lifecycle:lifecycle-common-java8:2.0.0\");\n \n     // This should not raise an exception\n-    DependencyGraphResult graph = graphBuilder.buildCompleteGraph(new Dependency(artifact, \"compile\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abfc2c10e04ede04dda27e744438f979415be877"}, "originalPosition": 68}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NDIzODM1", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199#pullrequestreview-355423835", "createdAt": "2020-02-07T20:40:36Z", "commit": {"oid": "abfc2c10e04ede04dda27e744438f979415be877"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMDo0MDozNlrOFnJqNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMDo0MDozNlrOFnJqNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU5NzA0NQ==", "bodyText": "can we test this without converting it to a string?", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199#discussion_r376597045", "createdAt": "2020-02-07T20:40:36Z", "author": {"login": "elharo"}, "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/dependencies/DependencyGraphBuilderTest.java", "diffHunk": "@@ -178,6 +183,33 @@ public void testGetDirectDependencies_respectExclusions() throws RepositoryExcep\n     }\n   }\n \n+  @Test\n+  public void testGetStaticLinkageCheckDependencyGraph_artifactProblems()\n+      throws RepositoryException {\n+    // In the full dependency tree of hibernate-core, xerces-impl:2.6.2 and xml-apis:2.6.2 are not\n+    // available in Maven Central.\n+    Artifact hibernateCore = new DefaultArtifact(\"org.hibernate:hibernate-core:jar:3.5.1-Final\");\n+\n+    DependencyGraphResult result =\n+        dependencyGraphBuilder.getStaticLinkageCheckDependencyGraph(\n+            ImmutableList.of(hibernateCore));\n+\n+    ImmutableList<UnresolvableArtifactProblem> artifactProblems = result.getArtifactProblems();\n+\n+    Truth.assertThat(artifactProblems).hasSize(2);\n+    UnresolvableArtifactProblem firstProblem = artifactProblems.get(0);\n+    assertEquals(\"xerces:xerces-impl:jar:2.6.2\", firstProblem.getArtifact().toString());\n+\n+    assertEquals(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abfc2c10e04ede04dda27e744438f979415be877"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NDMwNDQ4", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199#pullrequestreview-355430448", "createdAt": "2020-02-07T20:54:02Z", "commit": {"oid": "abfc2c10e04ede04dda27e744438f979415be877"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMDo1NDowM1rOFnJ_pQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMDo1NDowM1rOFnJ_pQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYwMjUzMw==", "bodyText": "Maybe not worth it then.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199#discussion_r376602533", "createdAt": "2020-02-07T20:54:03Z", "author": {"login": "elharo"}, "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/dependencies/DependencyGraphBuilderTest.java", "diffHunk": "@@ -178,6 +183,33 @@ public void testGetDirectDependencies_respectExclusions() throws RepositoryExcep\n     }\n   }\n \n+  @Test\n+  public void testGetStaticLinkageCheckDependencyGraph_artifactProblems()\n+      throws RepositoryException {\n+    // In the full dependency tree of hibernate-core, xerces-impl:2.6.2 and xml-apis:2.6.2 are not\n+    // available in Maven Central.\n+    Artifact hibernateCore = new DefaultArtifact(\"org.hibernate:hibernate-core:jar:3.5.1-Final\");\n+\n+    DependencyGraphResult result =\n+        dependencyGraphBuilder.getStaticLinkageCheckDependencyGraph(\n+            ImmutableList.of(hibernateCore));\n+\n+    ImmutableList<UnresolvableArtifactProblem> artifactProblems = result.getArtifactProblems();\n+\n+    Truth.assertThat(artifactProblems).hasSize(2);\n+    UnresolvableArtifactProblem firstProblem = artifactProblems.get(0);\n+    assertEquals(\"xerces:xerces-impl:jar:2.6.2\", firstProblem.getArtifact().toString());\n+\n+    assertEquals(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU5NzA0NQ=="}, "originalCommit": {"oid": "abfc2c10e04ede04dda27e744438f979415be877"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 458, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}