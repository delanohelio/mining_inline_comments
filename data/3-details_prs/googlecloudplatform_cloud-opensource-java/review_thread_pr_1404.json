{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MDk2MTc0", "number": 1404, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNjoyNDo1MVrOD8jjOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxOTozMzowMlrOD8nuJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODIzNjA4OnYy", "diffSide": "RIGHT", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/FixedSizeClassPathRepository.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNjoyNDo1MVrOGVkVMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNzozNjo0NFrOGVnLRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI2ODUzMQ==", "bodyText": "This locates a class file in a class path. Not in a class path entry. This FixedSizeClassPathRepository operates on a class path.\nDo you see this description is inaccurate?", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1404#discussion_r425268531", "createdAt": "2020-05-14T16:24:51Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/FixedSizeClassPathRepository.java", "diffHunk": "@@ -52,14 +52,15 @@\n    *\r\n    * <p>While class name and class file name are the same in most cases, sometimes classes are not\r\n    * placed in the root of a JAR file to support a framework-specific JAR structure. For example,\r\n-   * Spring Boot Gradle Java plugin places class files under \"BOOT-INF/classes\". To load such\r\n+   * the Spring Boot Gradle Java plugin places class files under \"BOOT-INF/classes\". To load such\r\n    * classes by class name, this mapping keeps track of the special location once they are loaded.\r\n    *\r\n    * <ul>\r\n    *   <li>Key: class name (value from {@link JavaClass#getClassName()}) which has a special class\r\n    *       file name different from its class name. Example: {@code com.google.Foo}\r\n    *   <li>Value: the special class file name as in {@link JavaClass#getFileName()}, a path that\r\n-   *       locates a class file in a class path. Example: {@code BOOT-INF.classes.com.google.Foo}\r\n+   *       locates a class file in a class path entry.\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d029fa87100046e388f888b8ac8413d96ea320d6"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI3NjEzMA==", "bodyText": "A class file name such as BOOT-INF.classes.com.google.Foo does not tell us which jar the file is in. It only tells us where in this jar the file will be. Or am I misunderstanding the special class file name?", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1404#discussion_r425276130", "createdAt": "2020-05-14T16:35:14Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/FixedSizeClassPathRepository.java", "diffHunk": "@@ -52,14 +52,15 @@\n    *\r\n    * <p>While class name and class file name are the same in most cases, sometimes classes are not\r\n    * placed in the root of a JAR file to support a framework-specific JAR structure. For example,\r\n-   * Spring Boot Gradle Java plugin places class files under \"BOOT-INF/classes\". To load such\r\n+   * the Spring Boot Gradle Java plugin places class files under \"BOOT-INF/classes\". To load such\r\n    * classes by class name, this mapping keeps track of the special location once they are loaded.\r\n    *\r\n    * <ul>\r\n    *   <li>Key: class name (value from {@link JavaClass#getClassName()}) which has a special class\r\n    *       file name different from its class name. Example: {@code com.google.Foo}\r\n    *   <li>Value: the special class file name as in {@link JavaClass#getFileName()}, a path that\r\n-   *       locates a class file in a class path. Example: {@code BOOT-INF.classes.com.google.Foo}\r\n+   *       locates a class file in a class path entry.\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI2ODUzMQ=="}, "originalCommit": {"oid": "d029fa87100046e388f888b8ac8413d96ea320d6"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMwOTY3Mg==", "bodyText": "A class file name such as BOOT-INF.classes.com.google.Foo does not tell us which jar the file is in\n\nCorrect. No specific JAR file. That's why this is a path to locate a class file in a class path, not a JAR file.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1404#discussion_r425309672", "createdAt": "2020-05-14T17:27:39Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/FixedSizeClassPathRepository.java", "diffHunk": "@@ -52,14 +52,15 @@\n    *\r\n    * <p>While class name and class file name are the same in most cases, sometimes classes are not\r\n    * placed in the root of a JAR file to support a framework-specific JAR structure. For example,\r\n-   * Spring Boot Gradle Java plugin places class files under \"BOOT-INF/classes\". To load such\r\n+   * the Spring Boot Gradle Java plugin places class files under \"BOOT-INF/classes\". To load such\r\n    * classes by class name, this mapping keeps track of the special location once they are loaded.\r\n    *\r\n    * <ul>\r\n    *   <li>Key: class name (value from {@link JavaClass#getClassName()}) which has a special class\r\n    *       file name different from its class name. Example: {@code com.google.Foo}\r\n    *   <li>Value: the special class file name as in {@link JavaClass#getFileName()}, a path that\r\n-   *       locates a class file in a class path. Example: {@code BOOT-INF.classes.com.google.Foo}\r\n+   *       locates a class file in a class path entry.\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI2ODUzMQ=="}, "originalCommit": {"oid": "d029fa87100046e388f888b8ac8413d96ea320d6"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMxNTE0MQ==", "bodyText": "I think I see where you're coming from, but I don't think as written this is correct. For instance, there can be multiple files with the same name in the class path. There can be only one of these in a class path entry. Perhaps we need to get rid of the notion of this as \"locating\" something. That's not what it does.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1404#discussion_r425315141", "createdAt": "2020-05-14T17:36:44Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/FixedSizeClassPathRepository.java", "diffHunk": "@@ -52,14 +52,15 @@\n    *\r\n    * <p>While class name and class file name are the same in most cases, sometimes classes are not\r\n    * placed in the root of a JAR file to support a framework-specific JAR structure. For example,\r\n-   * Spring Boot Gradle Java plugin places class files under \"BOOT-INF/classes\". To load such\r\n+   * the Spring Boot Gradle Java plugin places class files under \"BOOT-INF/classes\". To load such\r\n    * classes by class name, this mapping keeps track of the special location once they are loaded.\r\n    *\r\n    * <ul>\r\n    *   <li>Key: class name (value from {@link JavaClass#getClassName()}) which has a special class\r\n    *       file name different from its class name. Example: {@code com.google.Foo}\r\n    *   <li>Value: the special class file name as in {@link JavaClass#getFileName()}, a path that\r\n-   *       locates a class file in a class path. Example: {@code BOOT-INF.classes.com.google.Foo}\r\n+   *       locates a class file in a class path entry.\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI2ODUzMQ=="}, "originalCommit": {"oid": "d029fa87100046e388f888b8ac8413d96ea320d6"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODc3ODAwOnYy", "diffSide": "RIGHT", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/FixedSizeClassPathRepository.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo0OToyNlrOGVp0Aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo0OToyNlrOGVp0Aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1ODMzOQ==", "bodyText": "This is nice. Placing getOrDefault here is simplifying other places.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1404#discussion_r425358339", "createdAt": "2020-05-14T18:49:26Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/FixedSizeClassPathRepository.java", "diffHunk": "@@ -114,11 +119,9 @@ public void clear() {\n   }\r\n \r\n   /**\r\n-   * Returns the special location for {@code className}. Null if no special location is known.\r\n-   *\r\n-   * @see #classFileNames\r\n+   * Returns the file name for the class.\r\n    */\r\n-  String getSpecialLocation(String className) {\r\n-    return classFileNames.get(className);\r\n+  String getFileName(String className) {\r\n+    return classFileNames.getOrDefault(className, className);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ca383a3b058fc9b11be80546dcaf571a053729f"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODkxOTQyOnYy", "diffSide": "RIGHT", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/FixedSizeClassPathRepository.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxOTozMzowMlrOGVrOoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxOTozMzowMlrOGVrOoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM4MTUzNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * A few tools relocate classes into different directories within the JAR and use a special\n          \n          \n            \n               * <p>A few tools relocate classes into different directories within the JAR and use a special\n          \n      \n    \n    \n  \n\nI like the clear explanation of the difference.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1404#discussion_r425381536", "createdAt": "2020-05-14T19:33:02Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/FixedSizeClassPathRepository.java", "diffHunk": "@@ -48,18 +48,23 @@\n   private final Cache<String, JavaClass> loadedClass;\r\n \r\n   /**\r\n-   * Mapping from class names to special class file locations.\r\n+   * Mapping from class names to file names.\r\n    *\r\n-   * <p>While class name and class file name are the same in most cases, sometimes classes are not\r\n-   * placed in the root of a JAR file to support a framework-specific JAR structure. For example,\r\n-   * Spring Boot Gradle Java plugin places class files under \"BOOT-INF/classes\". To load such\r\n-   * classes by class name, this mapping keeps track of the special location once they are loaded.\r\n+   * <p>Class names are the fully package qualified names found in Java source code such as\r\n+   * {@code com.google.Foo}. The byte code of this class is normally found in a JAR at the path\r\n+   * com/google/Foo.class. In this case {@code com.google.Foo} is also the file name.\r\n+   * \r\n+   * A few tools relocate classes into different directories within the JAR and use a special\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ca383a3b058fc9b11be80546dcaf571a053729f"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2757, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}