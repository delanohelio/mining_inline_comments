{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NDUwNzY2", "number": 1480, "title": "Serializer for dependency graph", "bodyText": "", "createdAt": "2020-06-16T20:30:37Z", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480", "merged": true, "mergeCommit": {"oid": "17a3b0bbfd3d3304237179ac1066353bc51dfb15"}, "closed": true, "closedAt": "2020-06-22T21:59:50Z", "author": {"login": "ian-lavallee"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrmEMeAH2gAyNDM1NDUwNzY2OjdiNDU2MGQ3MTlhZGI5MzRlYjVhOTM2YTQ3ZmE2MmNlMjk1YmNlYTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABct30-dgFqTQzNTI5MDY5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7b4560d719adb934eb5a936a47fa62ce295bcea7", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/7b4560d719adb934eb5a936a47fa62ce295bcea7", "committedDate": "2020-06-15T19:45:48Z", "message": "dependencyTree txt added to reference in chat"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cacb103e5df4c00428ab30d375d3c2808797938a", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/cacb103e5df4c00428ab30d375d3c2808797938a", "committedDate": "2020-06-16T15:13:21Z", "message": "Basic serializer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cec3a8aae26eabdc863e02ac0f98c50d2935354", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/2cec3a8aae26eabdc863e02ac0f98c50d2935354", "committedDate": "2020-06-16T15:30:12Z", "message": "close to complete tree serializer but line beginnings not correct"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbb4490628350249b197f8c7c500e2c5dc3010fc", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/cbb4490628350249b197f8c7c500e2c5dc3010fc", "committedDate": "2020-06-16T19:34:16Z", "message": "cleaning code and adding scope to labels and tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c261b1cc3e2a7bb9598376a4a0799ca13384fb4", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/0c261b1cc3e2a7bb9598376a4a0799ca13384fb4", "committedDate": "2020-06-16T19:48:24Z", "message": "scope added to tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb7da5056a9b4a27c2a007ccb0c6cdc50d4a9c1f", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/cb7da5056a9b4a27c2a007ccb0c6cdc50d4a9c1f", "committedDate": "2020-06-16T19:56:12Z", "message": "clean up code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1962a0c78427c209624febf0935179c267e1b7f7", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/1962a0c78427c209624febf0935179c267e1b7f7", "committedDate": "2020-06-16T20:29:27Z", "message": "test changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5dbccaf5ea210f0cf2a0252839b50f83df463a4", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/f5dbccaf5ea210f0cf2a0252839b50f83df463a4", "committedDate": "2020-06-16T21:32:23Z", "message": "meeting changes implemented"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14d0938cff93d0692eba180624d6ea9cc52d0eb1", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/14d0938cff93d0692eba180624d6ea9cc52d0eb1", "committedDate": "2020-06-16T21:54:56Z", "message": "added optional dependency message and test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbc0a3d959248d0a32cec0aaa91bc83efca87c6f", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/bbc0a3d959248d0a32cec0aaa91bc83efca87c6f", "committedDate": "2020-06-16T21:58:33Z", "message": "rename duplicateArtifact method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cd0919d50afc2d8416d9bcbf28af6d775848bb0", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/1cd0919d50afc2d8416d9bcbf28af6d775848bb0", "committedDate": "2020-06-16T22:56:19Z", "message": "Merge branch 'master' into SerializeDependencyGraph"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c44e7bc698586283234487442747423f331ec7f", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/3c44e7bc698586283234487442747423f331ec7f", "committedDate": "2020-06-17T14:28:54Z", "message": "Merge branch 'master' into SerializeDependencyGraph"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNjQwMTA1", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#pullrequestreview-433640105", "createdAt": "2020-06-18T20:55:05Z", "commit": {"oid": "3c44e7bc698586283234487442747423f331ec7f"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMDo1NTowNVrOGl_4RQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMDo1OTowMFrOGl__yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ5NzA5Mw==", "bodyText": "2.6", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#discussion_r442497093", "createdAt": "2020-06-18T20:55:05Z", "author": {"login": "elharo"}, "path": "verboseTree-maven-plugin/pom.xml", "diffHunk": "@@ -70,6 +70,13 @@\n       <version>3.6.3</version>\n       <scope>test</scope>\n     </dependency>\n+    <dependency>\n+      <groupId>commons-io</groupId>\n+      <artifactId>commons-io</artifactId>\n+      <version>2.2</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c44e7bc698586283234487442747423f331ec7f"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ5NzUxMg==", "bodyText": "can these be final?", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#discussion_r442497512", "createdAt": "2020-06-18T20:55:56Z", "author": {"login": "elharo"}, "path": "verboseTree-maven-plugin/src/main/java/org/apache/maven/dependency/graph/SerializeGraph.java", "diffHunk": "@@ -0,0 +1,118 @@\n+/*\n+ *  Copyright 2020 Google LLC.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\n+ */\n+\n+package org.apache.maven.dependency.graph;\n+\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+import java.util.HashSet;\n+import java.util.IdentityHashMap;\n+import java.util.Map;\n+import java.util.Set;\n+\n+public class SerializeGraph\n+{\n+    // will be injected eventually\n+    private String outputType;\n+\n+    private Map<DependencyNode, Boolean> visitedNodes;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c44e7bc698586283234487442747423f331ec7f"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ5NzkxNQ==", "bodyText": "ArtifactString --> CoordinateString", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#discussion_r442497915", "createdAt": "2020-06-18T20:56:46Z", "author": {"login": "elharo"}, "path": "verboseTree-maven-plugin/src/main/java/org/apache/maven/dependency/graph/SerializeGraph.java", "diffHunk": "@@ -0,0 +1,118 @@\n+/*\n+ *  Copyright 2020 Google LLC.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\n+ */\n+\n+package org.apache.maven.dependency.graph;\n+\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+import java.util.HashSet;\n+import java.util.IdentityHashMap;\n+import java.util.Map;\n+import java.util.Set;\n+\n+public class SerializeGraph\n+{\n+    // will be injected eventually\n+    private String outputType;\n+\n+    private Map<DependencyNode, Boolean> visitedNodes;\n+    private Set<String> artifactSet;\n+    private StringBuilder builder;\n+\n+    public SerializeGraph()\n+    {\n+        visitedNodes = new IdentityHashMap<DependencyNode, Boolean>( 512 );\n+        artifactSet = new HashSet<String>();\n+        builder = new StringBuilder();\n+    }\n+\n+    public String serialize( DependencyNode root )\n+    {\n+        return dfs( root, \"\" ).toString();\n+    }\n+\n+    private static void appendDependency( StringBuilder builder, DependencyNode node )\n+    {\n+        String scope = node.getDependency().getScope();\n+        builder.append( getArtifactString( node.getArtifact() ) );\n+\n+        if ( scope != null && !scope.isEmpty() )\n+        {\n+            builder.append( \":\" ).append( scope );\n+        }\n+    }\n+\n+    private static String getArtifactString( Artifact artifact )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c44e7bc698586283234487442747423f331ec7f"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ5ODU0Nw==", "bodyText": "I would tend not to statically import this, but up to you.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#discussion_r442498547", "createdAt": "2020-06-18T20:58:04Z", "author": {"login": "elharo"}, "path": "verboseTree-maven-plugin/src/test/java/org/apache/maven/dependency/graph/SerializeGraphTest.java", "diffHunk": "@@ -0,0 +1,220 @@\n+/*\n+ *  Copyright 2020 Google LLC.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\n+ */\n+\n+package org.apache.maven.dependency.graph;\n+\n+import org.apache.maven.plugin.testing.AbstractMojoTestCase;\n+import org.eclipse.aether.artifact.DefaultArtifact;\n+import org.eclipse.aether.graph.DefaultDependencyNode;\n+import org.eclipse.aether.graph.Dependency;\n+import org.eclipse.aether.graph.DependencyNode;\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.Arrays;\n+\n+import static org.apache.commons.io.FileUtils.readFileToString;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c44e7bc698586283234487442747423f331ec7f"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ5OTAxOA==", "bodyText": "where is this file used?", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#discussion_r442499018", "createdAt": "2020-06-18T20:59:00Z", "author": {"login": "elharo"}, "path": "verboseTree-maven-plugin/tree.txt", "diffHunk": "@@ -0,0 +1,61 @@\n+[INFO] Scanning for projects...", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c44e7bc698586283234487442747423f331ec7f"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0MDM5Mjk0", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#pullrequestreview-434039294", "createdAt": "2020-06-19T12:32:14Z", "commit": {"oid": "3c44e7bc698586283234487442747423f331ec7f"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ca26a92ea5377eb231d9736dfb8eb1a025dc2b3", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/4ca26a92ea5377eb231d9736dfb8eb1a025dc2b3", "committedDate": "2020-06-22T15:31:41Z", "message": "PR comment changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f92d9e9f850687831c8004f6932a26c1140324e", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/5f92d9e9f850687831c8004f6932a26c1140324e", "committedDate": "2020-06-22T15:40:45Z", "message": "Merge branch 'master' into SerializeDependencyGraph"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MDUxNTIz", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#pullrequestreview-435051523", "createdAt": "2020-06-22T15:44:37Z", "commit": {"oid": "5f92d9e9f850687831c8004f6932a26c1140324e"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNTo0NDozOFrOGnGh0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNTo0ODoxMFrOGnGrDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY1NDYxMA==", "bodyText": "Please add Javadoc comment explaining purpose of the overall class.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#discussion_r443654610", "createdAt": "2020-06-22T15:44:38Z", "author": {"login": "bimargulies-google"}, "path": "verboseTree-maven-plugin/src/main/java/org/apache/maven/dependency/graph/SerializeGraph.java", "diffHunk": "@@ -0,0 +1,118 @@\n+/*\n+ *  Copyright 2020 Google LLC.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\n+ */\n+\n+package org.apache.maven.dependency.graph;\n+\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+import java.util.HashSet;\n+import java.util.IdentityHashMap;\n+import java.util.Map;\n+import java.util.Set;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f92d9e9f850687831c8004f6932a26c1140324e"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY1NjUxMA==", "bodyText": "Do you need classifier in here?", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#discussion_r443656510", "createdAt": "2020-06-22T15:47:30Z", "author": {"login": "bimargulies-google"}, "path": "verboseTree-maven-plugin/src/main/java/org/apache/maven/dependency/graph/SerializeGraph.java", "diffHunk": "@@ -0,0 +1,118 @@\n+/*\n+ *  Copyright 2020 Google LLC.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\n+ */\n+\n+package org.apache.maven.dependency.graph;\n+\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+import java.util.HashSet;\n+import java.util.IdentityHashMap;\n+import java.util.Map;\n+import java.util.Set;\n+\n+public class SerializeGraph\n+{\n+    // will be injected eventually\n+    private String outputType;\n+\n+    private final Map<DependencyNode, Boolean> visitedNodes;\n+    private final Set<String> artifactSet;\n+    private StringBuilder builder;\n+\n+    public SerializeGraph()\n+    {\n+        visitedNodes = new IdentityHashMap<DependencyNode, Boolean>( 512 );\n+        artifactSet = new HashSet<String>();\n+        builder = new StringBuilder();\n+    }\n+\n+    public String serialize( DependencyNode root )\n+    {\n+        return dfs( root, \"\" ).toString();\n+    }\n+\n+    private static void appendDependency( StringBuilder builder, DependencyNode node )\n+    {\n+        String scope = node.getDependency().getScope();\n+        builder.append( getCoordinateString( node.getArtifact() ) );\n+\n+        if ( scope != null && !scope.isEmpty() )\n+        {\n+            builder.append( \":\" ).append( scope );\n+        }\n+    }\n+\n+    private static String getCoordinateString( Artifact artifact )\n+    {\n+        return artifact.getGroupId() + \":\" + artifact.getArtifactId() + \":\" +\n+                artifact.getExtension() + \":\" + artifact.getVersion();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f92d9e9f850687831c8004f6932a26c1140324e"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY1Njk3NQ==", "bodyText": "Nit. put period after cycle and at the end of the other sentences in this section.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#discussion_r443656975", "createdAt": "2020-06-22T15:48:10Z", "author": {"login": "bimargulies-google"}, "path": "verboseTree-maven-plugin/src/main/java/org/apache/maven/dependency/graph/SerializeGraph.java", "diffHunk": "@@ -0,0 +1,118 @@\n+/*\n+ *  Copyright 2020 Google LLC.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\n+ */\n+\n+package org.apache.maven.dependency.graph;\n+\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+import java.util.HashSet;\n+import java.util.IdentityHashMap;\n+import java.util.Map;\n+import java.util.Set;\n+\n+public class SerializeGraph\n+{\n+    // will be injected eventually\n+    private String outputType;\n+\n+    private final Map<DependencyNode, Boolean> visitedNodes;\n+    private final Set<String> artifactSet;\n+    private StringBuilder builder;\n+\n+    public SerializeGraph()\n+    {\n+        visitedNodes = new IdentityHashMap<DependencyNode, Boolean>( 512 );\n+        artifactSet = new HashSet<String>();\n+        builder = new StringBuilder();\n+    }\n+\n+    public String serialize( DependencyNode root )\n+    {\n+        return dfs( root, \"\" ).toString();\n+    }\n+\n+    private static void appendDependency( StringBuilder builder, DependencyNode node )\n+    {\n+        String scope = node.getDependency().getScope();\n+        builder.append( getCoordinateString( node.getArtifact() ) );\n+\n+        if ( scope != null && !scope.isEmpty() )\n+        {\n+            builder.append( \":\" ).append( scope );\n+        }\n+    }\n+\n+    private static String getCoordinateString( Artifact artifact )\n+    {\n+        return artifact.getGroupId() + \":\" + artifact.getArtifactId() + \":\" +\n+                artifact.getExtension() + \":\" + artifact.getVersion();\n+    }\n+\n+    private boolean isDuplicateArtifact( Artifact artifact )\n+    {\n+        String coordinateString = getCoordinateString( artifact );\n+        return artifactSet.contains( coordinateString );\n+    }\n+\n+    public StringBuilder dfs( DependencyNode node, String start )\n+    {\n+        builder.append( start );\n+        appendDependency( builder, node );\n+\n+        if ( visitedNodes.containsKey( node ) )\n+        {\n+            builder.append( \" (Omitted due to cycle)\" ).append( System.lineSeparator() );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f92d9e9f850687831c8004f6932a26c1140324e"}, "originalPosition": 79}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15286b791be633fe49ee8d601ba2df12da5d2229", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/15286b791be633fe49ee8d601ba2df12da5d2229", "committedDate": "2020-06-22T16:25:12Z", "message": "more PR comment changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb253dfca57a0c7812322e6d4e6eb99be86733ae", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/cb253dfca57a0c7812322e6d4e6eb99be86733ae", "committedDate": "2020-06-22T16:25:23Z", "message": "Merge branch 'SerializeDependencyGraph' of https://github.com/GoogleCloudPlatform/cloud-opensource-java into SerializeDependencyGraph"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31b44e660c908ab720e49b2fdd21da9443073d82", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/31b44e660c908ab720e49b2fdd21da9443073d82", "committedDate": "2020-06-22T18:02:52Z", "message": "Scope and version conflict logic added and code cleaned up a bit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MTU3MjQw", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#pullrequestreview-435157240", "createdAt": "2020-06-22T18:03:22Z", "commit": {"oid": "cb253dfca57a0c7812322e6d4e6eb99be86733ae"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxODowMzoyMlrOGnLeNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxODowMzoyMlrOGnLeNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzczNTYwNg==", "bodyText": "nit: Maven -Dverbose syntax looks like (com.google.auto.value:auto-value-annotations:jar:1.7.2:compile - omitted for duplicate). We probably want to be consistent?", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#discussion_r443735606", "createdAt": "2020-06-22T18:03:22Z", "author": {"login": "stephaniewang526"}, "path": "verboseTree-maven-plugin/src/main/java/org/apache/maven/dependency/graph/SerializeGraph.java", "diffHunk": "@@ -0,0 +1,122 @@\n+/*\n+ *  Copyright 2020 Google LLC.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\n+ */\n+\n+package org.apache.maven.dependency.graph;\n+\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+import java.util.HashSet;\n+import java.util.IdentityHashMap;\n+import java.util.Map;\n+import java.util.Set;\n+\n+/**\n+ * Class to parse dependency graph and output in text format for end user to review\n+ *\n+ */\n+public class SerializeGraph\n+{\n+    // will be injected eventually\n+    private String outputType;\n+\n+    private final Map<DependencyNode, Boolean> visitedNodes;\n+    private final Set<String> artifactSet;\n+    private StringBuilder builder;\n+\n+    public SerializeGraph()\n+    {\n+        visitedNodes = new IdentityHashMap<DependencyNode, Boolean>( 512 );\n+        artifactSet = new HashSet<String>();\n+        builder = new StringBuilder();\n+    }\n+\n+    public String serialize( DependencyNode root )\n+    {\n+        return dfs( root, \"\" ).toString();\n+    }\n+\n+    private static void appendDependency( StringBuilder builder, DependencyNode node )\n+    {\n+        String scope = node.getDependency().getScope();\n+        builder.append( getCoordinateString( node.getArtifact() ) );\n+\n+        if ( scope != null && !scope.isEmpty() )\n+        {\n+            builder.append( \":\" ).append( scope );\n+        }\n+    }\n+\n+    private static String getCoordinateString( Artifact artifact )\n+    {\n+        return artifact.getGroupId() + \":\" + artifact.getArtifactId() + \":\" +\n+                artifact.getExtension() + \":\" + artifact.getVersion();\n+    }\n+\n+    private boolean isDuplicateArtifact( Artifact artifact )\n+    {\n+        String coordinateString = getCoordinateString( artifact );\n+        return artifactSet.contains( coordinateString );\n+    }\n+\n+    public StringBuilder dfs( DependencyNode node, String start )\n+    {\n+        builder.append( start );\n+        appendDependency( builder, node );\n+\n+        if ( visitedNodes.containsKey( node ) )\n+        {\n+            builder.append( \" (Omitted due to cycle.)\" ).append( System.lineSeparator() );\n+        }\n+        else if ( isDuplicateArtifact( node.getArtifact() ) )\n+        {\n+            builder.append( \" (Omitted due to duplicate artifact.)\" ).append( System.lineSeparator() );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb253dfca57a0c7812322e6d4e6eb99be86733ae"}, "originalPosition": 87}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MTU4NTc0", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#pullrequestreview-435158574", "createdAt": "2020-06-22T18:05:16Z", "commit": {"oid": "cb253dfca57a0c7812322e6d4e6eb99be86733ae"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxODowNToxNlrOGnLiVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxODowNToxNlrOGnLiVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzczNjY2MQ==", "bodyText": "Checking hardcoded string tends to be not future-proof -- as soon as those strings change, your logic will break. Is there any other way for you to tell where the dependency is? If not, can you make this logic more dynamic?", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#discussion_r443736661", "createdAt": "2020-06-22T18:05:16Z", "author": {"login": "stephaniewang526"}, "path": "verboseTree-maven-plugin/src/main/java/org/apache/maven/dependency/graph/SerializeGraph.java", "diffHunk": "@@ -0,0 +1,122 @@\n+/*\n+ *  Copyright 2020 Google LLC.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\n+ */\n+\n+package org.apache.maven.dependency.graph;\n+\n+import org.eclipse.aether.artifact.Artifact;\n+import org.eclipse.aether.graph.DependencyNode;\n+\n+import java.util.HashSet;\n+import java.util.IdentityHashMap;\n+import java.util.Map;\n+import java.util.Set;\n+\n+/**\n+ * Class to parse dependency graph and output in text format for end user to review\n+ *\n+ */\n+public class SerializeGraph\n+{\n+    // will be injected eventually\n+    private String outputType;\n+\n+    private final Map<DependencyNode, Boolean> visitedNodes;\n+    private final Set<String> artifactSet;\n+    private StringBuilder builder;\n+\n+    public SerializeGraph()\n+    {\n+        visitedNodes = new IdentityHashMap<DependencyNode, Boolean>( 512 );\n+        artifactSet = new HashSet<String>();\n+        builder = new StringBuilder();\n+    }\n+\n+    public String serialize( DependencyNode root )\n+    {\n+        return dfs( root, \"\" ).toString();\n+    }\n+\n+    private static void appendDependency( StringBuilder builder, DependencyNode node )\n+    {\n+        String scope = node.getDependency().getScope();\n+        builder.append( getCoordinateString( node.getArtifact() ) );\n+\n+        if ( scope != null && !scope.isEmpty() )\n+        {\n+            builder.append( \":\" ).append( scope );\n+        }\n+    }\n+\n+    private static String getCoordinateString( Artifact artifact )\n+    {\n+        return artifact.getGroupId() + \":\" + artifact.getArtifactId() + \":\" +\n+                artifact.getExtension() + \":\" + artifact.getVersion();\n+    }\n+\n+    private boolean isDuplicateArtifact( Artifact artifact )\n+    {\n+        String coordinateString = getCoordinateString( artifact );\n+        return artifactSet.contains( coordinateString );\n+    }\n+\n+    public StringBuilder dfs( DependencyNode node, String start )\n+    {\n+        builder.append( start );\n+        appendDependency( builder, node );\n+\n+        if ( visitedNodes.containsKey( node ) )\n+        {\n+            builder.append( \" (Omitted due to cycle.)\" ).append( System.lineSeparator() );\n+        }\n+        else if ( isDuplicateArtifact( node.getArtifact() ) )\n+        {\n+            builder.append( \" (Omitted due to duplicate artifact.)\" ).append( System.lineSeparator() );\n+        }\n+        else if ( node.getDependency().isOptional() )\n+        {\n+            builder.append( \" (Omitted due to optional dependency.)\" ).append( System.lineSeparator() );\n+        }\n+        else\n+        {\n+            artifactSet.add( getCoordinateString( node.getArtifact() ) );\n+            builder.append( System.lineSeparator() );\n+            visitedNodes.put( node, true );\n+\n+            for ( int i = 0; i < node.getChildren().size(); i++ )\n+            {\n+                if ( start.endsWith( \"+- \" ) )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb253dfca57a0c7812322e6d4e6eb99be86733ae"}, "originalPosition": 101}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "228c433a2923e7d8e654491e0ac5a4a2be8cc6b9", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/228c433a2923e7d8e654491e0ac5a4a2be8cc6b9", "committedDate": "2020-06-22T19:57:13Z", "message": "change formatting of output text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "974ca1604d7859a13d9fef6b9b8145511e350c36", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/974ca1604d7859a13d9fef6b9b8145511e350c36", "committedDate": "2020-06-22T20:00:09Z", "message": "more minor formatting changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d62357cf0fcf701254500af972917c603feefe96", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/d62357cf0fcf701254500af972917c603feefe96", "committedDate": "2020-06-22T20:03:33Z", "message": "moved hardcoded strings to variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1da52ab13c23b43d5ee3088eae3efe2d632be07", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/c1da52ab13c23b43d5ee3088eae3efe2d632be07", "committedDate": "2020-06-22T20:04:24Z", "message": "Merge branch 'master' into SerializeDependencyGraph"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bd8e09bb24d590f53131aa9b4a38d518111255d", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/4bd8e09bb24d590f53131aa9b4a38d518111255d", "committedDate": "2020-06-22T21:32:15Z", "message": "changes from meeting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36418095b7932428c2a55b9c7e538299abcb797c", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/36418095b7932428c2a55b9c7e538299abcb797c", "committedDate": "2020-06-22T21:32:29Z", "message": "Merge branch 'master' into SerializeDependencyGraph"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07ad7227439f7c7ce3fc73de24fe8dd3bb3e38e0", "author": {"user": {"login": "ian-lavallee", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/07ad7227439f7c7ce3fc73de24fe8dd3bb3e38e0", "committedDate": "2020-06-22T21:32:54Z", "message": "Merge branch 'SerializeDependencyGraph' of https://github.com/GoogleCloudPlatform/cloud-opensource-java into SerializeDependencyGraph"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MjkwNjkw", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1480#pullrequestreview-435290690", "createdAt": "2020-06-22T21:35:19Z", "commit": {"oid": "07ad7227439f7c7ce3fc73de24fe8dd3bb3e38e0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 214, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}