{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1ODE0NTU5", "number": 1322, "title": "Add test for listFileNames", "bodyText": "@suztomo This helps us explore alternate implementations of this functionality", "createdAt": "2020-03-30T18:13:00Z", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1322", "merged": true, "mergeCommit": {"oid": "f416ffdb6596808040cd26e1a98717ea0e7def0f"}, "closed": true, "closedAt": "2020-04-01T11:49:57Z", "author": {"login": "elharo"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSygDbgH2gAyMzk1ODE0NTU5OjZiYjE3YzliZDFhZWYzZTZiN2I3Y2VhYjIwODg5NGRhNDU0YWQ4MTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTKz9jgH2gAyMzk1ODE0NTU5OmZhNDE4NzkyMDE4NzI1MjU2MTc0NDY0MGI0NGE0NmNkYzhkNjUxYTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6bb17c9bd1aef3e6b7b7ceab208894da454ad812", "author": {"user": {"login": "elharo", "name": "Elliotte Rusty Harold"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/6bb17c9bd1aef3e6b7b7ceab208894da454ad812", "committedDate": "2020-03-30T18:06:59Z", "message": "test listFileNames"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd187157ac460a48d494a551efdcaeafcce98480", "author": {"user": {"login": "elharo", "name": "Elliotte Rusty Harold"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/dd187157ac460a48d494a551efdcaeafcce98480", "committedDate": "2020-03-30T18:11:50Z", "message": "test listFileNames"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MTIzOTU3", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1322#pullrequestreview-384123957", "createdAt": "2020-03-30T18:32:51Z", "commit": {"oid": "dd187157ac460a48d494a551efdcaeafcce98480"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxODozMjo1MVrOF926Jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxODozMjo1MVrOF926Jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQwNzA3OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Artifact artifact = resolveArtifact(\"com.google.truth.extensions:truth-java8-extension:1.0.1\");\n          \n          \n            \n                Artifact artifact = LinkageCheckerTest.resolvePaths(\"com.google.truth.extensions:truth-java8-extension:1.0.1\").get(0).getArtifact();\n          \n      \n    \n    \n  \n\nThis does almost same thing, although resolveArtifact does not fetch (unnecessary) dependencies.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1322#discussion_r400407079", "createdAt": "2020-03-30T18:32:51Z", "author": {"login": "suztomo"}, "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/classpath/ClassPathEntryTest.java", "diffHunk": "@@ -78,6 +86,38 @@ public void testToStringArtifact() {\n     assertEquals(\"com.google:foo:0.0.1\", entry.toString());\n   }\n \n+  @Test\n+  public void testListFileNames() throws IOException, ArtifactResolutionException {\n+    \n+    // copy into the local repository so we can read the jar file\n+    Artifact artifact = resolveArtifact(\"com.google.truth.extensions:truth-java8-extension:1.0.1\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd187157ac460a48d494a551efdcaeafcce98480"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MTI3OTY4", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1322#pullrequestreview-384127968", "createdAt": "2020-03-30T18:38:25Z", "commit": {"oid": "dd187157ac460a48d494a551efdcaeafcce98480"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxODozODoyNVrOF93Gng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxODozOTo0MlrOF93Jrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQxMDI3MA==", "bodyText": "You may want to add some inner classes.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1322#discussion_r400410270", "createdAt": "2020-03-30T18:38:25Z", "author": {"login": "suztomo"}, "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/classpath/ClassPathEntryTest.java", "diffHunk": "@@ -78,6 +86,38 @@ public void testToStringArtifact() {\n     assertEquals(\"com.google:foo:0.0.1\", entry.toString());\n   }\n \n+  @Test\n+  public void testListFileNames() throws IOException, ArtifactResolutionException {\n+    \n+    // copy into the local repository so we can read the jar file\n+    Artifact artifact = resolveArtifact(\"com.google.truth.extensions:truth-java8-extension:1.0.1\");\n+    \n+    ClassPathEntry entry = new ClassPathEntry(artifact);\n+    ImmutableSet<String> classFileNames = entry.listClassFileNames();\n+    Truth.assertThat(classFileNames).containsExactly(\n+        \"com.google.common.truth.IntStreamSubject\",\n+        \"com.google.common.truth.LongStreamSubject\",\n+        \"com.google.common.truth.OptionalDoubleSubject\",\n+        \"com.google.common.truth.OptionalSubject\",\n+        \"com.google.common.truth.OptionalIntSubject\",\n+        \"com.google.common.truth.OptionalLongSubject\",\n+        \"com.google.common.truth.PathSubject\",\n+        \"com.google.common.truth.Truth8\",\n+        \"com.google.common.truth.StreamSubject\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd187157ac460a48d494a551efdcaeafcce98480"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQxMTA1NA==", "bodyText": "Or, you can just use one of the JAR files in test/resources/testdata. This idea does not require (unnecessary) network connections.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1322#discussion_r400411054", "createdAt": "2020-03-30T18:39:42Z", "author": {"login": "suztomo"}, "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/classpath/ClassPathEntryTest.java", "diffHunk": "@@ -78,6 +86,38 @@ public void testToStringArtifact() {\n     assertEquals(\"com.google:foo:0.0.1\", entry.toString());\n   }\n \n+  @Test\n+  public void testListFileNames() throws IOException, ArtifactResolutionException {\n+    \n+    // copy into the local repository so we can read the jar file\n+    Artifact artifact = resolveArtifact(\"com.google.truth.extensions:truth-java8-extension:1.0.1\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQwNzA3OQ=="}, "originalCommit": {"oid": "dd187157ac460a48d494a551efdcaeafcce98480"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c78e21da1324c090d69c599085633a02bf3e277", "author": {"user": {"login": "elharo", "name": "Elliotte Rusty Harold"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/3c78e21da1324c090d69c599085633a02bf3e277", "committedDate": "2020-03-30T18:59:54Z", "message": "Merge branch 'master' into jar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08e6f503162d1a9dacce69e59acd8387902934a8", "author": {"user": {"login": "elharo", "name": "Elliotte Rusty Harold"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/08e6f503162d1a9dacce69e59acd8387902934a8", "committedDate": "2020-03-31T18:38:34Z", "message": "test for inner classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa4187920187252561744640b44a46cdc8d651a4", "author": {"user": {"login": "elharo", "name": "Elliotte Rusty Harold"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/fa4187920187252561744640b44a46cdc8d651a4", "committedDate": "2020-03-31T22:26:27Z", "message": "Merge branch 'master' into jar"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 325, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}