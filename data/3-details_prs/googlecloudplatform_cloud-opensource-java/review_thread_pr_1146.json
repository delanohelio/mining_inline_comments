{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NDYzMzU4", "number": 1146, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxODowOTowOFrODaQ5VA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxODowOTowOFrODaQ5VA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4ODY2Mzg4OnYy", "diffSide": "RIGHT", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ClassDumper.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxODowOTowOFrOFhHvDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxOToxNzowMVrOFhJrdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI3NDA2Mw==", "bodyText": "Is a ClassNotFoundException usually caused by a corrupted jar file? Or is that just a normal version conflict where the version of the jar we have is not the one that was expected?", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1146#discussion_r370274063", "createdAt": "2020-01-23T18:09:08Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ClassDumper.java", "diffHunk": "@@ -398,8 +398,8 @@ Path findClassLocation(String className) {\n       try {\n         JavaClass javaClass = classRepository.loadClass(classFileName);\n         javaClasses.add(javaClass);\n-      } catch (ClassNotFoundException ex) {\n-        // We couldn't find the class in the jar file where we found it.\n+      } catch (ClassNotFoundException | ClassFormatException ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "256298fd46c23248d12d26820782a0feaaad264d"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI3NTg3Mg==", "bodyText": "ClassNotFoundException was also caused by a corrupted JAR file as in\nhttps://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1090/files", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1146#discussion_r370275872", "createdAt": "2020-01-23T18:13:11Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ClassDumper.java", "diffHunk": "@@ -398,8 +398,8 @@ Path findClassLocation(String className) {\n       try {\n         JavaClass javaClass = classRepository.loadClass(classFileName);\n         javaClasses.add(javaClass);\n-      } catch (ClassNotFoundException ex) {\n-        // We couldn't find the class in the jar file where we found it.\n+      } catch (ClassNotFoundException | ClassFormatException ex) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI3NDA2Mw=="}, "originalCommit": {"oid": "256298fd46c23248d12d26820782a0feaaad264d"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI4MzM2OA==", "bodyText": "Yes, I'm just wondering if there are causes that are not corrupt jar files, and whether we're properly reporting them if so? It's weird that #1090 used ClassNotFoundException instead of ClassFormatException. How certain is it that that that was the right fix?", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1146#discussion_r370283368", "createdAt": "2020-01-23T18:29:04Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ClassDumper.java", "diffHunk": "@@ -398,8 +398,8 @@ Path findClassLocation(String className) {\n       try {\n         JavaClass javaClass = classRepository.loadClass(classFileName);\n         javaClasses.add(javaClass);\n-      } catch (ClassNotFoundException ex) {\n-        // We couldn't find the class in the jar file where we found it.\n+      } catch (ClassNotFoundException | ClassFormatException ex) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI3NDA2Mw=="}, "originalCommit": {"oid": "256298fd46c23248d12d26820782a0feaaad264d"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI5NDE2MQ==", "bodyText": "In the kinesis-client problem (#1090), JAR index contained a file starting with \".\", which was weird. BCEL threw ClassNotFoundException because it cannot find such file in the JAR. So the fix was to catch ClassNotFoundException. I see the fix was reasonable.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1146#discussion_r370294161", "createdAt": "2020-01-23T18:51:55Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ClassDumper.java", "diffHunk": "@@ -398,8 +398,8 @@ Path findClassLocation(String className) {\n       try {\n         JavaClass javaClass = classRepository.loadClass(classFileName);\n         javaClasses.add(javaClass);\n-      } catch (ClassNotFoundException ex) {\n-        // We couldn't find the class in the jar file where we found it.\n+      } catch (ClassNotFoundException | ClassFormatException ex) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI3NDA2Mw=="}, "originalCommit": {"oid": "256298fd46c23248d12d26820782a0feaaad264d"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMwMDUwNA==", "bodyText": "Was it really a corrupt jar file or was BCEL buggy here?\nI don't think all ClassNotFoundExceptions indicate corrupt jar files, even if that particular one does.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1146#discussion_r370300504", "createdAt": "2020-01-23T19:05:37Z", "author": {"login": "elharo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ClassDumper.java", "diffHunk": "@@ -398,8 +398,8 @@ Path findClassLocation(String className) {\n       try {\n         JavaClass javaClass = classRepository.loadClass(classFileName);\n         javaClasses.add(javaClass);\n-      } catch (ClassNotFoundException ex) {\n-        // We couldn't find the class in the jar file where we found it.\n+      } catch (ClassNotFoundException | ClassFormatException ex) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI3NDA2Mw=="}, "originalCommit": {"oid": "256298fd46c23248d12d26820782a0feaaad264d"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMwNTkwOQ==", "bodyText": "As discussed, javap also show \"class not found\" for the kinesis JAR.\nsuztomo@suxtomo24:~$ javap -cp /usr/local/google/home/suztomo/.m2/repository/com/amazonaws/amazon-kinesis-client/1.13.0/amazon-kinesis-client-1.13.0.jar '.unison.com.e007f77498fd27177e2ea931a06dcf50.unison.tmp/amazonaws/services/kinesis/multilang/messages/CheckpointMessage'\nError: class not found: .unison.com.e007f77498fd27177e2ea931a06dcf50.unison.tmp/amazonaws/services/kinesis/multilang/messages/CheckpointMessage", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1146#discussion_r370305909", "createdAt": "2020-01-23T19:17:01Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ClassDumper.java", "diffHunk": "@@ -398,8 +398,8 @@ Path findClassLocation(String className) {\n       try {\n         JavaClass javaClass = classRepository.loadClass(classFileName);\n         javaClasses.add(javaClass);\n-      } catch (ClassNotFoundException ex) {\n-        // We couldn't find the class in the jar file where we found it.\n+      } catch (ClassNotFoundException | ClassFormatException ex) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI3NDA2Mw=="}, "originalCommit": {"oid": "256298fd46c23248d12d26820782a0feaaad264d"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2882, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}