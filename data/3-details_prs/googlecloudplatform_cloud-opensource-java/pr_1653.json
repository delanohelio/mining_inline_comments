{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3NDYwMTE4", "number": 1653, "title": "The Gradle plugin to use dependencies module through Maven local", "bodyText": "Starts on #1651", "createdAt": "2020-09-15T17:55:45Z", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1653", "merged": true, "mergeCommit": {"oid": "5942c5785ad89470a2ad8cf5609095a3d5c12bac"}, "closed": true, "closedAt": "2020-09-16T14:00:17Z", "author": {"login": "suztomo"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJLk8sAH2gAyNDg3NDYwMTE4OjlmOGY1NTQ5YWUxZGEyYzVjZDE1NjAxNzU2NjEzZmU2NzQzNmE0NmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJcQTPAH2gAyNDg3NDYwMTE4OmY2MTQzMWI4YzYxOWJjZDY3ODZiODNhMzQ3OGIxNDc2MjUzZGExOTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9f8f5549ae1da2c5cd15601756613fe67436a46d", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/9f8f5549ae1da2c5cd15601756613fe67436a46d", "committedDate": "2020-09-15T17:51:52Z", "message": "Fixes #1651"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cf147d31916e527c35dc2d655e85e580800c72f", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/5cf147d31916e527c35dc2d655e85e580800c72f", "committedDate": "2020-09-15T17:53:42Z", "message": "Removing old Gradle plugin's RELEASING.mdd"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "473c8a8835b8c9dc9be3d5ba434c63ad4c6aa774", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/473c8a8835b8c9dc9be3d5ba434c63ad4c6aa774", "committedDate": "2020-09-15T17:55:14Z", "message": "Merge remote-tracking branch 'origin/master' into gradle_version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5408442bfca7ca8c1e59d09f9f309dccb58af3c8", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/5408442bfca7ca8c1e59d09f9f309dccb58af3c8", "committedDate": "2020-09-15T18:00:48Z", "message": "doc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTMxMTIw", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1653#pullrequestreview-488931120", "createdAt": "2020-09-15T17:57:32Z", "commit": {"oid": "473c8a8835b8c9dc9be3d5ba434c63ad4c6aa774"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNzo1NzozM1rOHSNpng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNzo1ODoxNVrOHSNrIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg2MDA2Mg==", "bodyText": "Sed's -i takes an empty string to perform in-place change without creating a backup file.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1653#discussion_r488860062", "createdAt": "2020-09-15T17:57:33Z", "author": {"login": "suztomo"}, "path": "scripts/prepare_release.sh", "diffHunk": "@@ -76,23 +76,25 @@ if [[ \"${SUFFIX}\" = \"bom\" ]]; then\n   cd boms/cloud-oss-bom\n fi\n \n-if [[ \"${SUFFIX}\" = \"gradle\" ]]; then\n-  cd gradle-plugin\n-  # Changes the version for release and creates the commits/tags.\n-  echo | ./gradlew release -Prelease.releaseVersion=${VERSION} \\\n-      -Prelease.newVersion=${NEXT_SNAPSHOT}\n-else\n-  # Updates the pom.xml with the version to release.\n-  mvn versions:set versions:commit -DnewVersion=${VERSION} -DgenerateBackupPoms=false\n-  # Tags a new commit for this release.\n-  git commit -am \"preparing release ${VERSION}-${SUFFIX}\"\n-  git tag v${VERSION}-${SUFFIX}\n-  mvn versions:set versions:commit -DnewVersion=${NEXT_SNAPSHOT} -DgenerateBackupPoms=false\n-\n-  # Commits this next snapshot version.\n-  git commit -am \"${NEXT_SNAPSHOT}\"\n+# Updates the pom.xml with the version to release.\n+mvn versions:set versions:commit -DnewVersion=${VERSION} -DgenerateBackupPoms=false\n+\n+if [[ \"${SUFFIX}\" = \"dependencies\" ]]; then\n+  sed -i \"\" \"s/version = .*/version = ${VERSION}/\" gradle-plugin/gradle.properties", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "473c8a8835b8c9dc9be3d5ba434c63ad4c6aa774"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg2MDQ0OQ==", "bodyText": "The gradle plugin's version and its dependencies module will have the same version.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1653#discussion_r488860449", "createdAt": "2020-09-15T17:58:15Z", "author": {"login": "suztomo"}, "path": "gradle-plugin/gradle.properties", "diffHunk": "@@ -1 +1,2 @@\n-version = 1.0.2-SNAPSHOT\n+# scripts/prepare_release.sh maintains this value.\n+version = 1.5.3-SNAPSHOT", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "473c8a8835b8c9dc9be3d5ba434c63ad4c6aa774"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTM5NzA2", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1653#pullrequestreview-488939706", "createdAt": "2020-09-15T18:09:34Z", "commit": {"oid": "5408442bfca7ca8c1e59d09f9f309dccb58af3c8"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTYyOTA5", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1653#pullrequestreview-488962909", "createdAt": "2020-09-15T18:42:43Z", "commit": {"oid": "5408442bfca7ca8c1e59d09f9f309dccb58af3c8"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0efc6febcc05cfca43c577c5bb14ea6aff1849b3", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/0efc6febcc05cfca43c577c5bb14ea6aff1849b3", "committedDate": "2020-09-15T18:54:18Z", "message": "install in Circle CI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "604b1aa37e0fa96ca06537ca1055ee79e5d22ee2", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/604b1aa37e0fa96ca06537ca1055ee79e5d22ee2", "committedDate": "2020-09-15T19:37:15Z", "message": "Instruction to build Maven projects first"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5MDMyODUy", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1653#pullrequestreview-489032852", "createdAt": "2020-09-15T20:09:40Z", "commit": {"oid": "604b1aa37e0fa96ca06537ca1055ee79e5d22ee2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMDowOTo0MFrOHSSwHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMDoxMDo1N1rOHSSy0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk0MzY0Nw==", "bodyText": "the local Maven repository", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1653#discussion_r488943647", "createdAt": "2020-09-15T20:09:40Z", "author": {"login": "elharo"}, "path": "gradle-plugin/README.md", "diffHunk": "@@ -4,7 +4,14 @@ For usage of this plugin, see the documentation.\n \n # Build Instruction\n \n+This Gradle project depends on the `dependencies` module through the Maven local repository.\n+\n ```\n+# At the root of the cloud-opensource-java project, first install the Maven projects to Maven local", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "604b1aa37e0fa96ca06537ca1055ee79e5d22ee2"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk0NDMzNg==", "bodyText": "indent four spaces for code", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1653#discussion_r488944336", "createdAt": "2020-09-15T20:10:57Z", "author": {"login": "elharo"}, "path": "gradle-plugin/README.md", "diffHunk": "@@ -4,7 +4,14 @@ For usage of this plugin, see the documentation.\n \n # Build Instruction\n \n+This Gradle project depends on the `dependencies` module through the Maven local repository.\n+\n ```\n+# At the root of the cloud-opensource-java project, first install the Maven projects to Maven local\n+# repository.\n+$ mvn install", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "604b1aa37e0fa96ca06537ca1055ee79e5d22ee2"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3c3f6a0ef9ef95386540c2f12ea8c34b5728fa0", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/e3c3f6a0ef9ef95386540c2f12ea8c34b5728fa0", "committedDate": "2020-09-15T20:38:51Z", "message": "the Maven local repository"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d5509339aec0f3228f29270eaa9ef15cb80bfac", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/1d5509339aec0f3228f29270eaa9ef15cb80bfac", "committedDate": "2020-09-15T20:41:46Z", "message": "Indent code block"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c76cc2782580c1173350e5d749d0552aa468f26b", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/c76cc2782580c1173350e5d749d0552aa468f26b", "committedDate": "2020-09-15T20:44:15Z", "message": "3-space"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93c689482c70b2414573574b8809b70eb8f672d4", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/93c689482c70b2414573574b8809b70eb8f672d4", "committedDate": "2020-09-15T20:59:16Z", "message": "Gradle plugin release script needs to install Maven projects"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5MDU0NTM4", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1653#pullrequestreview-489054538", "createdAt": "2020-09-15T20:41:58Z", "commit": {"oid": "604b1aa37e0fa96ca06537ca1055ee79e5d22ee2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMDo0MTo1OFrOHSTyWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMDo0MjowMlrOHSTygQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk2MDYwMw==", "bodyText": "Done with 3-space indentation (as in boms/cloud-oss-bom/RELEASING.md; 4-space didn't work in GitHub's markdown viewer.)", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1653#discussion_r488960603", "createdAt": "2020-09-15T20:41:58Z", "author": {"login": "suztomo"}, "path": "gradle-plugin/README.md", "diffHunk": "@@ -4,7 +4,14 @@ For usage of this plugin, see the documentation.\n \n # Build Instruction\n \n+This Gradle project depends on the `dependencies` module through the Maven local repository.\n+\n ```\n+# At the root of the cloud-opensource-java project, first install the Maven projects to Maven local\n+# repository.\n+$ mvn install", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk0NDMzNg=="}, "originalCommit": {"oid": "604b1aa37e0fa96ca06537ca1055ee79e5d22ee2"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk2MDY0MQ==", "bodyText": "Updated", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1653#discussion_r488960641", "createdAt": "2020-09-15T20:42:02Z", "author": {"login": "suztomo"}, "path": "gradle-plugin/README.md", "diffHunk": "@@ -4,7 +4,14 @@ For usage of this plugin, see the documentation.\n \n # Build Instruction\n \n+This Gradle project depends on the `dependencies` module through the Maven local repository.\n+\n ```\n+# At the root of the cloud-opensource-java project, first install the Maven projects to Maven local", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk0MzY0Nw=="}, "originalCommit": {"oid": "604b1aa37e0fa96ca06537ca1055ee79e5d22ee2"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NTYzNjcz", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1653#pullrequestreview-489563673", "createdAt": "2020-09-16T12:17:54Z", "commit": {"oid": "93c689482c70b2414573574b8809b70eb8f672d4"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMjoxNzo1NFrOHSuDfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMjoxNzo1NFrOHSuDfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTM5MDk3Mg==", "bodyText": "the local Maven", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1653#discussion_r489390972", "createdAt": "2020-09-16T12:17:54Z", "author": {"login": "elharo"}, "path": "gradle-plugin/README.md", "diffHunk": "@@ -4,24 +4,35 @@ For usage of this plugin, see the documentation.\n \n # Build Instruction\n \n-```\n-$ cd gradle-plugin\n-$ ./gradlew build publishToMavenLocal\n-```\n+This Gradle project depends on the `dependencies` module through the Maven local repository.\n \n-This command installs the Linkage Checker Gradle plugin in Maven local repository.\n+At the root of the cloud-opensource-java project, first install the Maven projects to the local\n+Maven repository:\n+\n+   ```\n+   $ mvn install\n+   ```\n+\n+Then build this Gradle project:\n \n-```\n-suztomo-macbookpro44% ls ~/.m2/repository/com/google/cloud/tools/linkage-checker-gradle-plugin/0.1.0-SNAPSHOT/\n-linkage-checker-gradle-plugin-0.1.0-SNAPSHOT.jar\n-linkage-checker-gradle-plugin-0.1.0-SNAPSHOT.pom\n-```\n+   ```\n+   $ cd gradle-plugin\n+   $ ./gradlew build publishToMavenLocal\n+   ```\n+\n+This command installs the Linkage Checker Gradle plugin in Maven local repository.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "93c689482c70b2414573574b8809b70eb8f672d4"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f61431b8c619bcd6786b83a3478b1476253da192", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/f61431b8c619bcd6786b83a3478b1476253da192", "committedDate": "2020-09-16T13:17:42Z", "message": "the local Maven repository"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 126, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}