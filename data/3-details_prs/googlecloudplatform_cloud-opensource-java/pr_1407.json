{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NTY5MjM1", "number": 1407, "title": "abstract equals and hashCode", "bodyText": "@suztomo I noticed a subtle issue here where two instances of different subclasses could theoretically compare equal. This prevents that by making equals and hashCode abstract in the superclass.", "createdAt": "2020-05-18T15:16:49Z", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1407", "merged": true, "mergeCommit": {"oid": "35587792184416632fea4f750bd7725374fc3a70"}, "closed": true, "closedAt": "2020-05-18T21:56:09Z", "author": {"login": "elharo"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcihZ-ogH2gAyNDE5NTY5MjM1OmRiNjc1M2Q0ZDQ0NWEyZDNmZmVhMjQ0ZWY4NjJjN2JiZGVjZTcxZDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcimZkvAH2gAyNDE5NTY5MjM1OjMxZTgwYTU3ZDNmZTFkZmZjY2NkYmE1MWM4MjQ0ZDFlZWRhNTY2Mjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "db6753d4d445a2d3ffea244ef862c7bbdece71d6", "author": {"user": {"login": "elharo", "name": "Elliotte Rusty Harold"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/db6753d4d445a2d3ffea244ef862c7bbdece71d6", "committedDate": "2020-05-18T15:14:45Z", "message": "abstract equals and hashCode"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzMwMTg1", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1407#pullrequestreview-413730185", "createdAt": "2020-05-18T15:57:40Z", "commit": {"oid": "db6753d4d445a2d3ffea244ef862c7bbdece71d6"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNjowMDoxMVrOGW9uUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNjowNDoyM1rOGW945g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjczMzEzNw==", "bodyText": "Checking the equality of class name here is more clear than super.equals. Nice.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1407#discussion_r426733137", "createdAt": "2020-05-18T16:00:11Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/MethodSymbol.java", "diffHunk": "@@ -65,18 +65,16 @@ public boolean equals(Object other) {\n     if (other == null || getClass() != other.getClass()) {\n       return false;\n     }\n-    if (!super.equals(other)) {\n-      return false;\n-    }\n     MethodSymbol that = (MethodSymbol) other;\n     return isInterfaceMethod == that.isInterfaceMethod\n         && name.equals(that.name)\n-        && descriptor.equals(that.descriptor);\n+        && descriptor.equals(that.descriptor)\n+        && this.getClassBinaryName().equals(that.getClassBinaryName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db6753d4d445a2d3ffea244ef862c7bbdece71d6"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjczNTg0Ng==", "bodyText": "two instances of different subclasses could theoretically compare equal.\n\nDoesn't this if statement prevent that?", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1407#discussion_r426735846", "createdAt": "2020-05-18T16:04:23Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/Symbol.java", "diffHunk": "@@ -47,21 +46,10 @@ String getClassBinaryName() {\n   }\n \n   @Override\n-  public boolean equals(Object other) {\n-    if (this == other) {\n-      return true;\n-    }\n-    if (other == null || getClass() != other.getClass()) {\n-      return false;\n-    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db6753d4d445a2d3ffea244ef862c7bbdece71d6"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzODM4NzQ3", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1407#pullrequestreview-413838747", "createdAt": "2020-05-18T18:29:40Z", "commit": {"oid": "db6753d4d445a2d3ffea244ef862c7bbdece71d6"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxODoyOTo0MFrOGXC3Hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxODoyOTo0MFrOGXC3Hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgxNzMxMA==", "bodyText": "It still means subclasses can be created with additional data that is not considered in an equality comparison.\n\nI'm not sure this change is an improvement on that. Even with this PR, a subclass can declare an additional data that's not considered in equality comparison.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1407#discussion_r426817310", "createdAt": "2020-05-18T18:29:40Z", "author": {"login": "suztomo"}, "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/Symbol.java", "diffHunk": "@@ -47,21 +46,10 @@ String getClassBinaryName() {\n   }\n \n   @Override\n-  public boolean equals(Object other) {\n-    if (this == other) {\n-      return true;\n-    }\n-    if (other == null || getClass() != other.getClass()) {\n-      return false;\n-    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjczNTg0Ng=="}, "originalCommit": {"oid": "db6753d4d445a2d3ffea244ef862c7bbdece71d6"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f82483065c1918a342cbc3ef196ca46878d2a0d4", "author": {"user": {"login": "elharo", "name": "Elliotte Rusty Harold"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/f82483065c1918a342cbc3ef196ca46878d2a0d4", "committedDate": "2020-05-18T20:05:17Z", "message": "Merge branch 'master' into equals"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31e80a57d3fe1dffcccdba51c8244d1eeda56628", "author": {"user": {"login": "elharo", "name": "Elliotte Rusty Harold"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/31e80a57d3fe1dffcccdba51c8244d1eeda56628", "committedDate": "2020-05-18T21:03:50Z", "message": "Merge branch 'master' into equals"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 409, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}