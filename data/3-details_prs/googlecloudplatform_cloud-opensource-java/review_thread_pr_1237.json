{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3OTIxODAw", "number": 1237, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxOTowMzozMVrODhpKmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxOTowMzozMVrODhpKmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NjA0MDU3OnYy", "diffSide": "RIGHT", "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/dependencies/DependencyTreeFormatterTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxOTowMzozMVrOFsfeGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxOTowMzozMVrOFsfeGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjE5NzI3Mw==", "bodyText": "This test was failing before this fix. DependencyTreeFormatter was ignoring scopes and optional flags (https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1237/files#diff-e825ccadbd98c809005839481296b814L84), while it was relying on equality of DependencyPath to find parent-child relationship from a Multimap.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1237#discussion_r382197273", "createdAt": "2020-02-20T19:03:31Z", "author": {"login": "suztomo"}, "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/dependencies/DependencyTreeFormatterTest.java", "diffHunk": "@@ -73,4 +73,24 @@ public void testDependencyTree() {\n         \"The dependency should be output as tree with indentation\",\n         expectedTreeOutput, actualTreeOutput);\n   }\n+\n+  @Test\n+  public void testDependencyTree_scopeAndOptionalFlag() {\n+    List<DependencyPath> dependencyPathList = new ArrayList<>();\n+\n+    DependencyPath path1 = new DependencyPath();\n+    path1.add(new Dependency(new DefaultArtifact(\"io.grpc:grpc-auth:jar:1.15.0\"), \"compile\", true));\n+    dependencyPathList.add(path1);\n+\n+    DependencyPath path2 = new DependencyPath();\n+    path2.add(new Dependency(new DefaultArtifact(\"io.grpc:grpc-auth:jar:1.15.0\"), \"compile\", true));\n+    path2.add(\n+        new Dependency(new DefaultArtifact(\"io.grpc:grpc-core:jar:1.15.0\"), \"provided\", false));\n+    dependencyPathList.add(path2);\n+\n+    String actualTreeOutput = DependencyTreeFormatter.formatDependencyPaths(dependencyPathList);\n+    String expectedTreeOutput =\n+        \"  io.grpc:grpc-auth:jar:1.15.0\\n\" + \"    io.grpc:grpc-core:jar:1.15.0\\n\";\n+    Assert.assertEquals(expectedTreeOutput, actualTreeOutput);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2220be660270a4c9c7b96e2ab05346800e93dd2a"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2824, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}