{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxODcyNjQx", "number": 1857, "title": "LinkageCheckerRuleTest for Java 11", "bodyText": "Fixes #1856 .\n(This PR does not fix the failing integration test enforcer-rules/src/it yet.)", "createdAt": "2020-12-03T15:34:15Z", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1857", "merged": true, "mergeCommit": {"oid": "fa6c1b7cee42df71afe15df84d1c77786c90ed05"}, "closed": true, "closedAt": "2020-12-03T18:06:03Z", "author": {"login": "suztomo"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdik8YsAH2gAyNTMxODcyNjQxOjI4MTdjN2M2N2I3MTVlZmU0NDAyYzRhNmZjNjdmNDNhYjhiNzM1NTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiljKIgFqTU0NDEyODk1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2817c7c67b715efe4402c4a6fc67f43ab8b73557", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/2817c7c67b715efe4402c4a6fc67f43ab8b73557", "committedDate": "2020-12-03T15:33:12Z", "message": "LinkageCheckerRuleTest for Java 11"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MTI1Mzc0", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1857#pullrequestreview-544125374", "createdAt": "2020-12-03T16:10:59Z", "commit": {"oid": "2817c7c67b715efe4402c4a6fc67f43ab8b73557"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNjoxMDo1OVrOH-kfug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNjoxMTo1N1rOH-ki9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM3MTcwNg==", "bodyText": "error --> errors", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1857#discussion_r535371706", "createdAt": "2020-12-03T16:10:59Z", "author": {"login": "elharo"}, "path": "enforcer-rules/src/test/java/com/google/cloud/tools/dependencies/enforcer/LinkageCheckerRuleTest.java", "diffHunk": "@@ -234,7 +234,14 @@ public void testExecute_shouldFailForBadProject() throws RepositoryException {\n       verify(mockLog, times(1)).error(errorMessageCaptor.capture());\n \n       String errorMessage = errorMessageCaptor.getValue();\n-      Truth.assertThat(errorMessage).startsWith(\"Linkage Checker rule found 112 errors:\");\n+\n+      // Java 11 removed javax.activation package. Therefore the number of expected error differs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2817c7c67b715efe4402c4a6fc67f43ab8b73557"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM3MjUzMw==", "bodyText": "Java 1.7 is likely more like 112 than 117 but it could be something different entirely.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1857#discussion_r535372533", "createdAt": "2020-12-03T16:11:57Z", "author": {"login": "elharo"}, "path": "enforcer-rules/src/test/java/com/google/cloud/tools/dependencies/enforcer/LinkageCheckerRuleTest.java", "diffHunk": "@@ -234,7 +234,14 @@ public void testExecute_shouldFailForBadProject() throws RepositoryException {\n       verify(mockLog, times(1)).error(errorMessageCaptor.capture());\n \n       String errorMessage = errorMessageCaptor.getValue();\n-      Truth.assertThat(errorMessage).startsWith(\"Linkage Checker rule found 112 errors:\");\n+\n+      // Java 11 removed javax.activation package. Therefore the number of expected error differs\n+      // between Java 8 and Java 11.\n+      // https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/1856\n+      int expectedErrorCount = System.getProperty(\"java.version\").startsWith(\"1.8.\") ? 112 : 117;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2817c7c67b715efe4402c4a6fc67f43ab8b73557"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0338d8d9f8c60a94e639dc072921263e288c79f8", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/0338d8d9f8c60a94e639dc072921263e288c79f8", "committedDate": "2020-12-03T16:13:48Z", "message": "plural errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MTI4OTU2", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1857#pullrequestreview-544128956", "createdAt": "2020-12-03T16:14:25Z", "commit": {"oid": "2817c7c67b715efe4402c4a6fc67f43ab8b73557"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNjoxNDoyNVrOH-kq3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNjoxNDoyN1rOH-krAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM3NDU1Ng==", "bodyText": "Fixed. (this and other 2 places)", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1857#discussion_r535374556", "createdAt": "2020-12-03T16:14:25Z", "author": {"login": "suztomo"}, "path": "enforcer-rules/src/test/java/com/google/cloud/tools/dependencies/enforcer/LinkageCheckerRuleTest.java", "diffHunk": "@@ -234,7 +234,14 @@ public void testExecute_shouldFailForBadProject() throws RepositoryException {\n       verify(mockLog, times(1)).error(errorMessageCaptor.capture());\n \n       String errorMessage = errorMessageCaptor.getValue();\n-      Truth.assertThat(errorMessage).startsWith(\"Linkage Checker rule found 112 errors:\");\n+\n+      // Java 11 removed javax.activation package. Therefore the number of expected error differs", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM3MTcwNg=="}, "originalCommit": {"oid": "2817c7c67b715efe4402c4a6fc67f43ab8b73557"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM3NDU5Mg==", "bodyText": "This repository does not support Java 7.\nhttps://github.com/GoogleCloudPlatform/cloud-opensource-java#requirements\nWriting this comment, I noticed we don't limit the JDKs to LTS...", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1857#discussion_r535374592", "createdAt": "2020-12-03T16:14:27Z", "author": {"login": "suztomo"}, "path": "enforcer-rules/src/test/java/com/google/cloud/tools/dependencies/enforcer/LinkageCheckerRuleTest.java", "diffHunk": "@@ -234,7 +234,14 @@ public void testExecute_shouldFailForBadProject() throws RepositoryException {\n       verify(mockLog, times(1)).error(errorMessageCaptor.capture());\n \n       String errorMessage = errorMessageCaptor.getValue();\n-      Truth.assertThat(errorMessage).startsWith(\"Linkage Checker rule found 112 errors:\");\n+\n+      // Java 11 removed javax.activation package. Therefore the number of expected error differs\n+      // between Java 8 and Java 11.\n+      // https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/1856\n+      int expectedErrorCount = System.getProperty(\"java.version\").startsWith(\"1.8.\") ? 112 : 117;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM3MjUzMw=="}, "originalCommit": {"oid": "2817c7c67b715efe4402c4a6fc67f43ab8b73557"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1306, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}