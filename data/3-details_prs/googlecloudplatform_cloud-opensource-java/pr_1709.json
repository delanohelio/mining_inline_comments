{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNTk3NzEy", "number": 1709, "title": "Dashboard: all pie charts to take care of largeArcFlag", "bodyText": "Fixes #1697 (This issue contains the problematic screenshot for the left-most pie chart).\n\nThe strange pie chart in the Linkage Checker error count was caused by largeArcFlag.\nCreated pieChartSvg macro that takes care of the flag and applied it to the 4 pie charts.\n\nThe screeshot of the fixed version:", "createdAt": "2020-10-14T19:41:12Z", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1709", "merged": true, "mergeCommit": {"oid": "571df34e8582f8cdc49761d216b05a525a0bcd3a"}, "closed": true, "closedAt": "2020-10-15T18:50:45Z", "author": {"login": "suztomo"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSifZIAH2gAyNTAzNTk3NzEyOjIwMWI2YjFkZjllNTgxYjA0YjJmN2QyNzdlMzQ4OGYwODllZmQwYzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSwcy3AH2gAyNTAzNTk3NzEyOjE0NGIxYjJlYmUxYTFiMjg2OGIzMDBlOWY5ZTk3ZjYwMDdiNTllYTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "201b6b1df9e581b04b2f7d277e3488f089efd0c4", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/201b6b1df9e581b04b2f7d277e3488f089efd0c4", "committedDate": "2020-10-14T19:38:56Z", "message": "Fixed #1697"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4Njg4ODk0", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1709#pullrequestreview-508688894", "createdAt": "2020-10-14T20:07:03Z", "commit": {"oid": "201b6b1df9e581b04b2f7d277e3488f089efd0c4"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMDowNzowM1rOHhjLtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMDowODo0MlrOHhjPXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0MTQ5Mw==", "bodyText": "The indentation was incorrect.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1709#discussion_r504941493", "createdAt": "2020-10-14T20:07:03Z", "author": {"login": "suztomo"}, "path": "dashboard/src/main/resources/templates/index.ftl", "diffHunk": "@@ -69,71 +69,41 @@\n            ${localUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n            ${plural(localUpperBoundsErrorCount, \"does not\", \"do not\")} pick the\n            latest versions of all artifacts in their own dependency tree.\n-        </td>\n-        <td>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(globalUpperBoundsErrorCount, \"does not\", \"do not\")} select the\n-           most recent version of all artifacts in the BOM.</td>\n-        <td>${convergenceErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(convergenceErrorCount, \"fails\", \"fail\")} to converge.\n-        </td>\n-      </tr>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "201b6b1df9e581b04b2f7d277e3488f089efd0c4"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0MjA3Mg==", "bodyText": "The right-half of 2 pie charts have largeArcFlag already.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1709#discussion_r504942072", "createdAt": "2020-10-14T20:08:02Z", "author": {"login": "suztomo"}, "path": "dashboard/src/main/resources/templates/index.ftl", "diffHunk": "@@ -69,71 +69,41 @@\n            ${localUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n            ${plural(localUpperBoundsErrorCount, \"does not\", \"do not\")} pick the\n            latest versions of all artifacts in their own dependency tree.\n-        </td>\n-        <td>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(globalUpperBoundsErrorCount, \"does not\", \"do not\")} select the\n-           most recent version of all artifacts in the BOM.</td>\n-        <td>${convergenceErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(convergenceErrorCount, \"fails\", \"fail\")} to converge.\n-        </td>\n-      </tr>\n-      <tr>\n-        <td class='pie'>    \n-          <#assign linkageRatio = linkageErrorCount / totalArtifacts >\n-          <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, linkageRatio)>\n-          <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, linkageRatio)>\n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>${linkageErrorCount} out of ${totalArtifacts} artifacts have linkage errors.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 0 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-       </td>\n-\n-       <td class='pie'>    \n-        <#assign ratio = localUpperBoundsErrorCount / totalArtifacts >\n-        <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, ratio)>\n-        <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, ratio)>\n-        \n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>{localUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(localUpperBoundsErrorCount, \"does not\", \"do not\")} pick the\n-           latest versions of all artifacts in their own dependency tree.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 0 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-        </td>\n-      \n-       <td class='pie'>    \n-        <#assign ratio = globalUpperBoundsErrorCount / totalArtifacts >\n-        <#assign largeArcFlag = \"0\">\n-        <#if ratio gt 0.5>\n-          <#assign largeArcFlag = \"1\">\n-        </#if>\n-        <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, ratio)>\n-        <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, ratio)>\n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts\n-                 have global upper bounds errors.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 ${largeArcFlag} 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "201b6b1df9e581b04b2f7d277e3488f089efd0c4"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0MjE1OA==", "bodyText": "The right-half of 2 pie charts have largeArcFlag already.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1709#discussion_r504942158", "createdAt": "2020-10-14T20:08:10Z", "author": {"login": "suztomo"}, "path": "dashboard/src/main/resources/templates/index.ftl", "diffHunk": "@@ -69,71 +69,41 @@\n            ${localUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n            ${plural(localUpperBoundsErrorCount, \"does not\", \"do not\")} pick the\n            latest versions of all artifacts in their own dependency tree.\n-        </td>\n-        <td>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(globalUpperBoundsErrorCount, \"does not\", \"do not\")} select the\n-           most recent version of all artifacts in the BOM.</td>\n-        <td>${convergenceErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(convergenceErrorCount, \"fails\", \"fail\")} to converge.\n-        </td>\n-      </tr>\n-      <tr>\n-        <td class='pie'>    \n-          <#assign linkageRatio = linkageErrorCount / totalArtifacts >\n-          <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, linkageRatio)>\n-          <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, linkageRatio)>\n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>${linkageErrorCount} out of ${totalArtifacts} artifacts have linkage errors.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 0 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-       </td>\n-\n-       <td class='pie'>    \n-        <#assign ratio = localUpperBoundsErrorCount / totalArtifacts >\n-        <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, ratio)>\n-        <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, ratio)>\n-        \n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>{localUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(localUpperBoundsErrorCount, \"does not\", \"do not\")} pick the\n-           latest versions of all artifacts in their own dependency tree.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 0 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-        </td>\n-      \n-       <td class='pie'>    \n-        <#assign ratio = globalUpperBoundsErrorCount / totalArtifacts >\n-        <#assign largeArcFlag = \"0\">\n-        <#if ratio gt 0.5>\n-          <#assign largeArcFlag = \"1\">\n-        </#if>\n-        <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, ratio)>\n-        <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, ratio)>\n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts\n-                 have global upper bounds errors.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 ${largeArcFlag} 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-       </td>\n-        \n-       <td class='pie'>    \n-          <#assign ratio = convergenceErrorCount / totalArtifacts >\n-          <#assign largeArcFlag = \"0\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "201b6b1df9e581b04b2f7d277e3488f089efd0c4"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0MjQyOQ==", "bodyText": "This function call didn't work well if it's embed in a string. So I extracted it as a variable.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1709#discussion_r504942429", "createdAt": "2020-10-14T20:08:42Z", "author": {"login": "suztomo"}, "path": "dashboard/src/main/resources/templates/index.ftl", "diffHunk": "@@ -69,71 +69,41 @@\n            ${localUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n            ${plural(localUpperBoundsErrorCount, \"does not\", \"do not\")} pick the\n            latest versions of all artifacts in their own dependency tree.\n-        </td>\n-        <td>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(globalUpperBoundsErrorCount, \"does not\", \"do not\")} select the\n-           most recent version of all artifacts in the BOM.</td>\n-        <td>${convergenceErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(convergenceErrorCount, \"fails\", \"fail\")} to converge.\n-        </td>\n-      </tr>\n-      <tr>\n-        <td class='pie'>    \n-          <#assign linkageRatio = linkageErrorCount / totalArtifacts >\n-          <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, linkageRatio)>\n-          <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, linkageRatio)>\n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>${linkageErrorCount} out of ${totalArtifacts} artifacts have linkage errors.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 0 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-       </td>\n-\n-       <td class='pie'>    \n-        <#assign ratio = localUpperBoundsErrorCount / totalArtifacts >\n-        <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, ratio)>\n-        <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, ratio)>\n-        \n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>{localUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(localUpperBoundsErrorCount, \"does not\", \"do not\")} pick the\n-           latest versions of all artifacts in their own dependency tree.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 0 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-        </td>\n-      \n-       <td class='pie'>    \n-        <#assign ratio = globalUpperBoundsErrorCount / totalArtifacts >\n-        <#assign largeArcFlag = \"0\">\n-        <#if ratio gt 0.5>\n-          <#assign largeArcFlag = \"1\">\n-        </#if>\n-        <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, ratio)>\n-        <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, ratio)>\n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts\n-                 have global upper bounds errors.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 ${largeArcFlag} 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-       </td>\n-        \n-       <td class='pie'>    \n-          <#assign ratio = convergenceErrorCount / totalArtifacts >\n-          <#assign largeArcFlag = \"0\">\n-          <#if ratio gt 0.5>\n-            <#assign largeArcFlag = \"1\">\n-          </#if>\n-          <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, ratio)>\n-          <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, ratio)>\n-          \n-            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-              <desc>${convergenceErrorCount} out of ${totalArtifacts} artifacts \n-              ${plural(convergenceErrorCount, \"fails\", \"fail\")} to converge.</desc>\n-              <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-              <path d=\"M100,100 v -100 A100,100 0 ${largeArcFlag} 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-            </svg>\n+          </td>\n+          <td>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts\n+             ${plural(globalUpperBoundsErrorCount, \"does not\", \"do not\")} select the\n+             most recent version of all artifacts in the BOM.</td>\n+          <td>${convergenceErrorCount} out of ${totalArtifacts} artifacts\n+             ${plural(convergenceErrorCount, \"fails\", \"fail\")} to converge.\n+          </td>\n+        </tr>\n+        <tr>\n+          <td class='pie'>\n+            <@pieChartSvg\n+                description=\"${linkageErrorCount} out of ${totalArtifacts} artifacts have linkage\n+                    errors.\"\n+                ratio=linkageErrorCount / totalArtifacts />\n+          </td>\n+          <td class='pie'>\n+            <#assign doesNot=plural(localUpperBoundsErrorCount, \"does not\", \"do not\")>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "201b6b1df9e581b04b2f7d277e3488f089efd0c4"}, "originalPosition": 85}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MjQxMzEy", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1709#pullrequestreview-509241312", "createdAt": "2020-10-15T10:35:43Z", "commit": {"oid": "201b6b1df9e581b04b2f7d277e3488f089efd0c4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "144b1b2ebe1a1b2868b300e9f9e97f6007b59ea2", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/144b1b2ebe1a1b2868b300e9f9e97f6007b59ea2", "committedDate": "2020-10-15T11:54:46Z", "message": "Merge branch 'master' into arc"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1320, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}