{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwMzcxMjAy", "number": 1178, "title": "Linkage Monitor not to show stacktrace when it finds new errors", "bodyText": "Fixes #1168\nExample (manually creating new linkage error at google-http-java-client):\nsuztomo-macbookpro44:google-http-java-client suztomo$ java -jar ~/cloud-opensource-java/linkage-monitor/target/linkage-monitor-1.1.4-SNAPSHOT-all-deps.jar  com.google.cloud:libraries-bom\nSLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\".\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nFeb 03, 2020 10:08:11 AM com.google.cloud.tools.dependencies.linkagemonitor.LinkageMonitor run\nINFO: BOM Coordinates: com.google.cloud:libraries-bom:3.5.0-SNAPSHOT\nFeb 03, 2020 10:09:59 AM com.google.cloud.tools.dependencies.linkagemonitor.LinkageMonitor run\nSEVERE: Newly introduced problems:\nClass com.bea.jvm.ClassPreProcessor is not found\n  referenced from org.aspectj.weaver.loadtime.JRockitAgent (aspectjweaver-1.9.5.jar)\nClass com.bea.jvm.JVMFactory is not found\n  referenced from org.aspectj.weaver.loadtime.JRockitAgent (aspectjweaver-1.9.5.jar)\nClass com.bea.jvm.JVM is not found\n  referenced from org.aspectj.weaver.loadtime.JRockitAgent (aspectjweaver-1.9.5.jar)\nClass com.bea.jvm.ClassLibrary is not found\n  referenced from org.aspectj.weaver.loadtime.JRockitAgent (aspectjweaver-1.9.5.jar)\n\naspectjweaver-1.9.5.jar is at:\n  com.google.http-client:google-http-client-protobuf:1.34.2-SNAPSHOT (compile) / org.aspectj:aspectjweaver:1.9.5 (compile)\n\nFeb 03, 2020 10:09:59 AM com.google.cloud.tools.dependencies.linkagemonitor.LinkageMonitor main\nSEVERE: Found 4 new linkage errors\nsuztomo-macbookpro44:google-http-java-client suztomo$ \nsuztomo-macbookpro44:google-http-java-client suztomo$ echo $?\n1", "createdAt": "2020-02-03T15:15:57Z", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1178", "merged": true, "mergeCommit": {"oid": "0068c4397c43447ccda1449b9f355a71bde7c67c"}, "closed": true, "closedAt": "2020-02-03T17:00:04Z", "author": {"login": "suztomo"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcAtyZ-AH2gAyMzcwMzcxMjAyOmY1YWEyZjhjN2NlZDZkMjI4ZmI5Yzc0ZDI4NGViYThhYjE3YzQ5Mzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcAv22iAFqTM1MjQwNDUyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f5aa2f8c7ced6d228fb9c74d284eba8ab17c4939", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/f5aa2f8c7ced6d228fb9c74d284eba8ab17c4939", "committedDate": "2020-02-03T14:26:52Z", "message": "Exit 1 at main"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMzQzOTU3", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1178#pullrequestreview-352343957", "createdAt": "2020-02-03T15:34:07Z", "commit": {"oid": "f5aa2f8c7ced6d228fb9c74d284eba8ab17c4939"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNTozNDowN1rOFk1lAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNTozNDowN1rOFk1lAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDE3MDg4MQ==", "bodyText": "This fixes the immediate issue. Looking at this now though, I don't think this should be an exception at all. It is not an exceptional or unexpected condition, anymore than a compiler noticing a syntax error would be. We might want to change this to a return value as a list of linkage errors or some such thing.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1178#discussion_r374170881", "createdAt": "2020-02-03T15:34:07Z", "author": {"login": "elharo"}, "path": "linkage-monitor/src/main/java/com/google/cloud/tools/dependencies/linkagemonitor/LinkageMonitor.java", "diffHunk": "@@ -93,7 +93,12 @@ public static void main(String[] arguments)\n     String bomCoordinates = arguments[0];\n     List<String> coordinatesElements = Splitter.on(':').splitToList(bomCoordinates);\n \n-    new LinkageMonitor().run(coordinatesElements.get(0), coordinatesElements.get(1));\n+    try {\n+      new LinkageMonitor().run(coordinatesElements.get(0), coordinatesElements.get(1));\n+    } catch (LinkageMonitorException ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5aa2f8c7ced6d228fb9c74d284eba8ab17c4939"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76a506567878c6f8445468e74fed652ff5b2b2a8", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/76a506567878c6f8445468e74fed652ff5b2b2a8", "committedDate": "2020-02-03T16:04:20Z", "message": "LinkageMonitor.run to return new problems"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4b034f5f313c2cc5510aa815adca3c388fb35f0", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/f4b034f5f313c2cc5510aa815adca3c388fb35f0", "committedDate": "2020-02-03T16:05:33Z", "message": "Removed LinkageMonitorException"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMzY5Njgw", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1178#pullrequestreview-352369680", "createdAt": "2020-02-03T16:06:11Z", "commit": {"oid": "f5aa2f8c7ced6d228fb9c74d284eba8ab17c4939"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNjowNjoxMVrOFk2xmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNjowNzowOVrOFk2zzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDE5MDQ4OA==", "bodyText": "Updated LinkageMonitor.run to return new problems.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1178#discussion_r374190488", "createdAt": "2020-02-03T16:06:11Z", "author": {"login": "suztomo"}, "path": "linkage-monitor/src/main/java/com/google/cloud/tools/dependencies/linkagemonitor/LinkageMonitor.java", "diffHunk": "@@ -93,7 +93,12 @@ public static void main(String[] arguments)\n     String bomCoordinates = arguments[0];\n     List<String> coordinatesElements = Splitter.on(':').splitToList(bomCoordinates);\n \n-    new LinkageMonitor().run(coordinatesElements.get(0), coordinatesElements.get(1));\n+    try {\n+      new LinkageMonitor().run(coordinatesElements.get(0), coordinatesElements.get(1));\n+    } catch (LinkageMonitorException ex) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDE3MDg4MQ=="}, "originalCommit": {"oid": "f5aa2f8c7ced6d228fb9c74d284eba8ab17c4939"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDE5MTA1NA==", "bodyText": "Now LinkageMonitorException is unused.", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1178#discussion_r374191054", "createdAt": "2020-02-03T16:07:09Z", "author": {"login": "suztomo"}, "path": "linkage-monitor/src/main/java/com/google/cloud/tools/dependencies/linkagemonitor/LinkageMonitor.java", "diffHunk": "@@ -82,8 +82,7 @@\n       findLocalArtifacts(repositorySystem, session, Paths.get(\".\").toAbsolutePath());\n \n   public static void main(String[] arguments)\n-      throws RepositoryException, IOException, LinkageMonitorException, MavenRepositoryException,\n-          ModelBuildingException {\n+      throws RepositoryException, IOException, MavenRepositoryException, ModelBuildingException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4b034f5f313c2cc5510aa815adca3c388fb35f0"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9f339437acb4b6131580dafdaa94539b0dab0ba", "author": {"user": {"login": "suztomo", "name": "Tomo Suzuki"}}, "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/f9f339437acb4b6131580dafdaa94539b0dab0ba", "committedDate": "2020-02-03T16:41:53Z", "message": "Merge remote-tracking branch 'origin/master' into linkagemonitor_exit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNDA0NTIy", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1178#pullrequestreview-352404522", "createdAt": "2020-02-03T16:51:32Z", "commit": {"oid": "f9f339437acb4b6131580dafdaa94539b0dab0ba"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 443, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}