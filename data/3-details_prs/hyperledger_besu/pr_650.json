{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4NDY2MTEx", "number": 650, "title": "Expand NodeKeys into Network Discovery", "bodyText": "PR description\nThis extends PR #618 by updating the classes involved in network discovery to accept a NodeKey, rather than KeyPair.\nFixed Issue(s)\nN/A", "createdAt": "2020-04-04T04:20:42Z", "url": "https://github.com/hyperledger/besu/pull/650", "merged": true, "mergeCommit": {"oid": "b06697135ba979de786f266dc20f598fa2cd6b42"}, "closed": true, "closedAt": "2020-04-07T05:17:41Z", "author": {"login": "rain-on"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcT3NaGAH2gAyMzk4NDY2MTExOmQyYmMzNTBkYWE3NDZjNWEwZGU0YjdmNmI5NDgwZTdjNjU2NDhlNGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVMRe_gFqTM4ODc4OTE2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d2bc350daa746c5a0de4b7f6b9480e7c65648e4c", "author": {"user": null}, "url": "https://github.com/hyperledger/besu/commit/d2bc350daa746c5a0de4b7f6b9480e7c65648e4c", "committedDate": "2020-04-03T02:10:04Z", "message": "Move IBFT To using cryptoOps\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4bb5f08a63ccbfb603a62e6d7969936a4f56275", "author": {"user": null}, "url": "https://github.com/hyperledger/besu/commit/a4bb5f08a63ccbfb603a62e6d7969936a4f56275", "committedDate": "2020-04-03T02:32:02Z", "message": "cleaning up the test code\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15cc340442ebf38cd877f9455e46a3f769a140f2", "author": {"user": null}, "url": "https://github.com/hyperledger/besu/commit/15cc340442ebf38cd877f9455e46a3f769a140f2", "committedDate": "2020-04-03T03:15:57Z", "message": "post review\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a1bff23f69fba291574c2a749a4493660782233", "author": {"user": null}, "url": "https://github.com/hyperledger/besu/commit/7a1bff23f69fba291574c2a749a4493660782233", "committedDate": "2020-04-03T05:32:48Z", "message": "Reworked ibftquery testing\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27fa94e2d47ac8002fd2a2584b39fb8492457514", "author": {"user": null}, "url": "https://github.com/hyperledger/besu/commit/27fa94e2d47ac8002fd2a2584b39fb8492457514", "committedDate": "2020-04-03T05:41:14Z", "message": "fix spotless\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3476f5d9fc4e43875131a4b0c9234709043a0690", "author": {"user": {"login": "lucassaldanha", "name": "Lucas Saldanha"}}, "url": "https://github.com/hyperledger/besu/commit/3476f5d9fc4e43875131a4b0c9234709043a0690", "committedDate": "2020-04-03T08:32:27Z", "message": "More renames\n\nAnd merge master\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4d87571370cbb7191a2152203a7ec3756a1a13b", "author": {"user": null}, "url": "https://github.com/hyperledger/besu/commit/e4d87571370cbb7191a2152203a7ec3756a1a13b", "committedDate": "2020-04-03T20:26:45Z", "message": "Merge remote-tracking branch 'upstream/master' into crypto_ops\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ad72c2fa0b726dedbf32afb856fb3c4c0907211", "author": {"user": null}, "url": "https://github.com/hyperledger/besu/commit/9ad72c2fa0b726dedbf32afb856fb3c4c0907211", "committedDate": "2020-04-03T20:29:14Z", "message": "fix spotless\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a90c9ffd58adfacf1bf6e28192dbcd466b8de4a", "author": {"user": null}, "url": "https://github.com/hyperledger/besu/commit/2a90c9ffd58adfacf1bf6e28192dbcd466b8de4a", "committedDate": "2020-04-03T20:32:19Z", "message": "rename to getNodeKey\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fe289314134b6deacb5940a24c7478477820435", "author": {"user": null}, "url": "https://github.com/hyperledger/besu/commit/8fe289314134b6deacb5940a24c7478477820435", "committedDate": "2020-04-04T04:14:41Z", "message": "Making Disovery not use KeyPair\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33a932a9cf5aabe3a7522029832013ed94093e56", "author": {"user": {"login": "rain-on", "name": "Trent Mohay"}}, "url": "https://github.com/hyperledger/besu/commit/33a932a9cf5aabe3a7522029832013ed94093e56", "committedDate": "2020-04-07T03:29:07Z", "message": "Merge branch 'master' into disco_crypto"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NzYwOTY0", "url": "https://github.com/hyperledger/besu/pull/650#pullrequestreview-388760964", "createdAt": "2020-04-07T03:33:44Z", "commit": {"oid": "33a932a9cf5aabe3a7522029832013ed94093e56"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwMzozMzo0NVrOGBxqow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwMzozMzo0NVrOGBxqow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUxNTQ5MQ==", "bodyText": "nit: cryptoOps should be nodeKey in exception message.", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404515491", "createdAt": "2020-04-07T03:33:45Z", "author": {"login": "usmansaleem"}, "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/discovery/PeerDiscoveryAgent.java", "diffHunk": "@@ -84,13 +84,13 @@\n   protected final Subscribers<PeerBondedObserver> peerBondedObservers = Subscribers.create();\n \n   public PeerDiscoveryAgent(\n-      final SECP256K1.KeyPair keyPair,\n+      final NodeKey nodeKey,\n       final DiscoveryConfiguration config,\n       final PeerPermissions peerPermissions,\n       final NatService natService,\n       final MetricsSystem metricsSystem) {\n     this.metricsSystem = metricsSystem;\n-    checkArgument(keyPair != null, \"keypair cannot be null\");\n+    checkArgument(nodeKey != null, \"cryptoOps cannot be null\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33a932a9cf5aabe3a7522029832013ed94093e56"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NzYxMzgz", "url": "https://github.com/hyperledger/besu/pull/650#pullrequestreview-388761383", "createdAt": "2020-04-07T03:35:23Z", "commit": {"oid": "33a932a9cf5aabe3a7522029832013ed94093e56"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwMzozNToyM1rOGBxsPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwMzozNToyM1rOGBxsPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUxNTkwMA==", "bodyText": "does the description meant to be NodeKey instead of KeyPair?", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404515900", "createdAt": "2020-04-07T03:35:23Z", "author": {"login": "usmansaleem"}, "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/discovery/internal/PeerDiscoveryController.java", "diffHunk": "@@ -692,7 +691,7 @@ public PeerDiscoveryController build() {\n     }\n \n     private void validate() {\n-      validateRequiredDependency(keypair, \"KeyPair\");\n+      validateRequiredDependency(nodeKey, \"KeyPair\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33a932a9cf5aabe3a7522029832013ed94093e56"}, "originalPosition": 74}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NzYyMzEx", "url": "https://github.com/hyperledger/besu/pull/650#pullrequestreview-388762311", "createdAt": "2020-04-07T03:39:17Z", "commit": {"oid": "33a932a9cf5aabe3a7522029832013ed94093e56"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47ad51d9b4a726fab9d41375922b9ebb8a254a1a", "author": {"user": null}, "url": "https://github.com/hyperledger/besu/commit/47ad51d9b4a726fab9d41375922b9ebb8a254a1a", "committedDate": "2020-04-07T04:11:21Z", "message": "clean up from review\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4Nzc1MjYw", "url": "https://github.com/hyperledger/besu/pull/650#pullrequestreview-388775260", "createdAt": "2020-04-07T04:28:52Z", "commit": {"oid": "47ad51d9b4a726fab9d41375922b9ebb8a254a1a"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwNDoyODo1MlrOGBybpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwNDozMjowOFrOGByeqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUyODAzNg==", "bodyText": "nit: Think we mention that is the node key so \"The node key through...", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404528036", "createdAt": "2020-04-07T04:28:52Z", "author": {"login": "jframe"}, "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/network/DefaultP2PNetwork.java", "diffHunk": "@@ -145,7 +146,7 @@\n    *\n    * @param localNode A representation of the local node\n    * @param peerDiscoveryAgent The agent responsible for discovering peers on the network.\n-   * @param keyPair This node's keypair.\n+   * @param nodeKey The key through which cryptographic operations can be performed", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47ad51d9b4a726fab9d41375922b9ebb8a254a1a"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUyODgwOQ==", "bodyText": "rlpx changes are coming in another PR?", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404528809", "createdAt": "2020-04-07T04:32:08Z", "author": {"login": "jframe"}, "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/network/DefaultP2PNetwork.java", "diffHunk": "@@ -442,7 +443,12 @@ private void validate() {\n     private PeerDiscoveryAgent createDiscoveryAgent() {\n \n       return new VertxPeerDiscoveryAgent(\n-          vertx, keyPair, config.getDiscovery(), peerPermissions, natService, metricsSystem);\n+          vertx,\n+          new BouncyCastleNodeKey(keyPair),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47ad51d9b4a726fab9d41375922b9ebb8a254a1a"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffab8c9035a40addd4e11db6671fcb43aa368e5b", "author": {"user": null}, "url": "https://github.com/hyperledger/besu/commit/ffab8c9035a40addd4e11db6671fcb43aa368e5b", "committedDate": "2020-04-07T04:44:37Z", "message": "following jframe review\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4Nzg5MTYz", "url": "https://github.com/hyperledger/besu/pull/650#pullrequestreview-388789163", "createdAt": "2020-04-07T05:16:27Z", "commit": {"oid": "ffab8c9035a40addd4e11db6671fcb43aa368e5b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1675, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}