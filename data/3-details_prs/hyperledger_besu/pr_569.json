{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzMzE1NTg4", "number": 569, "title": "remove unnecessary persist", "bodyText": "Signed-off-by: Ratan Rai Sur ratan.r.sur@gmail.com\nPR description\nIn the process of fixing the pruning bug, I believe I found an unnecessary persist.\nAs I read it, it still does persist on every block, here:\n\n  \n    \n      besu/ethereum/core/src/main/java/org/hyperledger/besu/ethereum/mainnet/AbstractBlockProcessor.java\n    \n    \n         Line 165\n      in\n      9fa9c85\n    \n    \n    \n    \n\n        \n          \n           worldState.persist();", "createdAt": "2020-03-25T00:06:49Z", "url": "https://github.com/hyperledger/besu/pull/569", "merged": true, "mergeCommit": {"oid": "136aa5306ead90798e2365077f1d11a92a385163"}, "closed": true, "closedAt": "2020-04-27T14:39:04Z", "author": {"login": "RatanRSur"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQ7yOsAH2gAyMzkzMzE1NTg4OjVkNjVlMDZkMGE0M2E0ZjlkYjU3NDM4MWFlN2QwYTNmYTY1ZGMxZDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcbvxpOAFqTQwMDk4MTg3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5d65e06d0a43a4f9db574381ae7d0a3fa65dc1d7", "author": {"user": {"login": "RatanRSur", "name": "Ratan (Rai) Sur"}}, "url": "https://github.com/hyperledger/besu/commit/5d65e06d0a43a4f9db574381ae7d0a3fa65dc1d7", "committedDate": "2020-03-24T23:48:08Z", "message": "remove unnecessary persist\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNTMzODY4", "url": "https://github.com/hyperledger/besu/pull/569#pullrequestreview-390533868", "createdAt": "2020-04-09T06:57:13Z", "commit": {"oid": "5d65e06d0a43a4f9db574381ae7d0a3fa65dc1d7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwNjo1NzoxNFrOGDL4uQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwNjo1NzoxNFrOGDL4uQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTk5MzY1Nw==", "bodyText": "Current behaviour for Mainnet block importer being persisting the state on every block imported.\nAny thoughts on the potential impact this PR might have? ...is the state still persisted on each block imported (perhaps done elsewhere), or is the persist performed less frequently, if so at what cadence?", "url": "https://github.com/hyperledger/besu/pull/569#discussion_r405993657", "createdAt": "2020-04-09T06:57:14Z", "author": {"login": "CjHare"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/mainnet/MainnetBlockImporter.java", "diffHunk": "@@ -46,20 +45,13 @@ public synchronized boolean importBlock(\n         blockValidator.validateAndProcessBlock(\n             context, block, headerValidationMode, ommerValidationMode);\n \n-    outputs.ifPresent(processingOutputs -> persistState(processingOutputs, block, context));\n+    outputs.ifPresent(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d65e06d0a43a4f9db574381ae7d0a3fa65dc1d7"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bd6bfa5607ff1868f162972affffed1abcb4b537", "author": {"user": {"login": "RatanRSur", "name": "Ratan (Rai) Sur"}}, "url": "https://github.com/hyperledger/besu/commit/bd6bfa5607ff1868f162972affffed1abcb4b537", "committedDate": "2020-04-16T19:57:47Z", "message": "Revert \"Merge branch 'master' into remove-unnecessary-persist\"\n\nThis reverts commit 7e5a584a9ed3ad141d49086befe31f5c7c9d5a78, reversing\nchanges made to 5d65e06d0a43a4f9db574381ae7d0a3fa65dc1d7."}, "afterCommit": {"oid": "cc3ea2915bad210940dc098bf2f9724b7f32cb7c", "author": {"user": {"login": "RatanRSur", "name": "Ratan (Rai) Sur"}}, "url": "https://github.com/hyperledger/besu/commit/cc3ea2915bad210940dc098bf2f9724b7f32cb7c", "committedDate": "2020-04-16T20:00:14Z", "message": "Revert \"Merge branch 'master' into remove-unnecessary-persist\"\n\nThis reverts commit 7e5a584a9ed3ad141d49086befe31f5c7c9d5a78, reversing\nchanges made to 5d65e06d0a43a4f9db574381ae7d0a3fa65dc1d7.\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21d749cce9b6cff0a9e81ae728cdeb4ca2e6637e", "author": {"user": {"login": "RatanRSur", "name": "Ratan (Rai) Sur"}}, "url": "https://github.com/hyperledger/besu/commit/21d749cce9b6cff0a9e81ae728cdeb4ca2e6637e", "committedDate": "2020-04-24T17:18:18Z", "message": "Merge remote-tracking branch 'upstream' into remove-unnecessary-persist"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc3ea2915bad210940dc098bf2f9724b7f32cb7c", "author": {"user": {"login": "RatanRSur", "name": "Ratan (Rai) Sur"}}, "url": "https://github.com/hyperledger/besu/commit/cc3ea2915bad210940dc098bf2f9724b7f32cb7c", "committedDate": "2020-04-16T20:00:14Z", "message": "Revert \"Merge branch 'master' into remove-unnecessary-persist\"\n\nThis reverts commit 7e5a584a9ed3ad141d49086befe31f5c7c9d5a78, reversing\nchanges made to 5d65e06d0a43a4f9db574381ae7d0a3fa65dc1d7.\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>"}, "afterCommit": {"oid": "21d749cce9b6cff0a9e81ae728cdeb4ca2e6637e", "author": {"user": {"login": "RatanRSur", "name": "Ratan (Rai) Sur"}}, "url": "https://github.com/hyperledger/besu/commit/21d749cce9b6cff0a9e81ae728cdeb4ca2e6637e", "committedDate": "2020-04-24T17:18:18Z", "message": "Merge remote-tracking branch 'upstream' into remove-unnecessary-persist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f07f6d46c4ec1e85d3561bbe8920440f2ee29f82", "author": {"user": {"login": "RatanRSur", "name": "Ratan (Rai) Sur"}}, "url": "https://github.com/hyperledger/besu/commit/f07f6d46c4ec1e85d3561bbe8920440f2ee29f82", "committedDate": "2020-04-27T14:01:07Z", "message": "Merge remote-tracking branch 'upstream' into remove-unnecessary-persist"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwOTgxODcx", "url": "https://github.com/hyperledger/besu/pull/569#pullrequestreview-400981871", "createdAt": "2020-04-27T14:01:48Z", "commit": {"oid": "21d749cce9b6cff0a9e81ae728cdeb4ca2e6637e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1845, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}