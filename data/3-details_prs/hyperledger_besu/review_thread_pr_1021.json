{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2NjUzMzgy", "number": 1021, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxNToxODo0MFrOEByt1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxNToyMDozN1rOEByxTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwMzE0OTY2OnYy", "diffSide": "RIGHT", "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/worldstate/MarkSweepPruner.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxNToxODo0MFrOGd2qLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxNTo1MToxMlrOGd4Qvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk1NzQyMQ==", "bodyText": "Cumulative or per marking run?  Worth adding some verbiage to the help text to make it clear.", "url": "https://github.com/hyperledger/besu/pull/1021#discussion_r433957421", "createdAt": "2020-06-02T15:18:40Z", "author": {"login": "shemnon"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/worldstate/MarkSweepPruner.java", "diffHunk": "@@ -94,6 +97,13 @@ public MarkSweepPruner(\n             BesuMetricCategory.PRUNER,\n             \"sweep_operations_total\",\n             \"Total number of sweep operations performed\");\n+\n+    markStopwatch = Stopwatch.createUnstarted();\n+    metricsSystem.createLongGauge(\n+        BesuMetricCategory.PRUNER,\n+        \"mark_time_duration\",\n+        \"Total number of seconds spent marking the state trie\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f4fb1d55b1d7faa32edc5585dc952bcb7e25e9c"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk4MzY3OA==", "bodyText": "resolved", "url": "https://github.com/hyperledger/besu/pull/1021#discussion_r433983678", "createdAt": "2020-06-02T15:51:12Z", "author": {"login": "RatanRSur"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/worldstate/MarkSweepPruner.java", "diffHunk": "@@ -94,6 +97,13 @@ public MarkSweepPruner(\n             BesuMetricCategory.PRUNER,\n             \"sweep_operations_total\",\n             \"Total number of sweep operations performed\");\n+\n+    markStopwatch = Stopwatch.createUnstarted();\n+    metricsSystem.createLongGauge(\n+        BesuMetricCategory.PRUNER,\n+        \"mark_time_duration\",\n+        \"Total number of seconds spent marking the state trie\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk1NzQyMQ=="}, "originalCommit": {"oid": "1f4fb1d55b1d7faa32edc5585dc952bcb7e25e9c"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwMzE1ODUyOnYy", "diffSide": "RIGHT", "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/worldstate/MarkSweepPruner.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxNToyMDozN1rOGd2vvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxNToyMTozOFrOGd2yjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk1ODg0NQ==", "bodyText": "Is MarkSweepPruner a singleton for the life of the java process?  Counters can handle multiple counters, gauges will throw an exception when the second gauge is created.", "url": "https://github.com/hyperledger/besu/pull/1021#discussion_r433958845", "createdAt": "2020-06-02T15:20:37Z", "author": {"login": "shemnon"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/worldstate/MarkSweepPruner.java", "diffHunk": "@@ -94,6 +97,13 @@ public MarkSweepPruner(\n             BesuMetricCategory.PRUNER,\n             \"sweep_operations_total\",\n             \"Total number of sweep operations performed\");\n+\n+    markStopwatch = Stopwatch.createUnstarted();\n+    metricsSystem.createLongGauge(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f4fb1d55b1d7faa32edc5585dc952bcb7e25e9c"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk1OTU2Ng==", "bodyText": "Yup, it's a singleton", "url": "https://github.com/hyperledger/besu/pull/1021#discussion_r433959566", "createdAt": "2020-06-02T15:21:38Z", "author": {"login": "RatanRSur"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/worldstate/MarkSweepPruner.java", "diffHunk": "@@ -94,6 +97,13 @@ public MarkSweepPruner(\n             BesuMetricCategory.PRUNER,\n             \"sweep_operations_total\",\n             \"Total number of sweep operations performed\");\n+\n+    markStopwatch = Stopwatch.createUnstarted();\n+    metricsSystem.createLongGauge(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk1ODg0NQ=="}, "originalCommit": {"oid": "1f4fb1d55b1d7faa32edc5585dc952bcb7e25e9c"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 904, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}