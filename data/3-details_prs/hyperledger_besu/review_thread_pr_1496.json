{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwNDMzNTcz", "number": 1496, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMzozODoxOFrOEyK4gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMzozODoxOFrOEyK4gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMDQyNTYyOnYy", "diffSide": "RIGHT", "path": "ethereum/permissioning/src/main/java/org/hyperledger/besu/ethereum/permissioning/NodeSmartContractV2PermissioningController.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMzozODoxOFrOHoqRSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwMzowMTowM1rOHr0-GA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM5NzY0MQ==", "bodyText": "I don't think this is what we want. The data will likely be stored as one of these:\n\nString representation of the ipv4 or ipv6\nDNS name\n\nTo make this call, we need to encode the string as solidity does. We can probably just get the string representation of the IP and let web3j do the work (like we do for the enode).", "url": "https://github.com/hyperledger/besu/pull/1496#discussion_r512397641", "createdAt": "2020-10-27T03:38:18Z", "author": {"login": "lucassaldanha"}, "path": "ethereum/permissioning/src/main/java/org/hyperledger/besu/ethereum/permissioning/NodeSmartContractV2PermissioningController.java", "diffHunk": "@@ -64,14 +64,14 @@ private boolean isPermitted(final EnodeURL enode) {\n   private Bytes createPayload(final EnodeURL enodeUrl) {\n     try {\n       final String hexNodeIdString = enodeUrl.getNodeId().toUnprefixedHexString();\n-      final byte[] ip = encodeIp(enodeUrl.getIp());\n+      final String hexIpString = encodeIp(enodeUrl.getIp());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71190183af1f40219840da4bc8e3457b4e675829"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzgyMTI5Nw==", "bodyText": "yep changed to just the string of the host name. Now we don't need the encodeIp method at all", "url": "https://github.com/hyperledger/besu/pull/1496#discussion_r513821297", "createdAt": "2020-10-28T23:28:44Z", "author": {"login": "macfarla"}, "path": "ethereum/permissioning/src/main/java/org/hyperledger/besu/ethereum/permissioning/NodeSmartContractV2PermissioningController.java", "diffHunk": "@@ -64,14 +64,14 @@ private boolean isPermitted(final EnodeURL enode) {\n   private Bytes createPayload(final EnodeURL enodeUrl) {\n     try {\n       final String hexNodeIdString = enodeUrl.getNodeId().toUnprefixedHexString();\n-      final byte[] ip = encodeIp(enodeUrl.getIp());\n+      final String hexIpString = encodeIp(enodeUrl.getIp());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM5NzY0MQ=="}, "originalCommit": {"oid": "71190183af1f40219840da4bc8e3457b4e675829"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY2NjYzOA==", "bodyText": "Yep, it is probably better if we remove the encodeIp method and rename hexIpString variable to something like address.", "url": "https://github.com/hyperledger/besu/pull/1496#discussion_r515666638", "createdAt": "2020-11-01T20:15:29Z", "author": {"login": "lucassaldanha"}, "path": "ethereum/permissioning/src/main/java/org/hyperledger/besu/ethereum/permissioning/NodeSmartContractV2PermissioningController.java", "diffHunk": "@@ -64,14 +64,14 @@ private boolean isPermitted(final EnodeURL enode) {\n   private Bytes createPayload(final EnodeURL enodeUrl) {\n     try {\n       final String hexNodeIdString = enodeUrl.getNodeId().toUnprefixedHexString();\n-      final byte[] ip = encodeIp(enodeUrl.getIp());\n+      final String hexIpString = encodeIp(enodeUrl.getIp());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM5NzY0MQ=="}, "originalCommit": {"oid": "71190183af1f40219840da4bc8e3457b4e675829"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTcxODY4MA==", "bodyText": "done", "url": "https://github.com/hyperledger/besu/pull/1496#discussion_r515718680", "createdAt": "2020-11-02T03:01:03Z", "author": {"login": "macfarla"}, "path": "ethereum/permissioning/src/main/java/org/hyperledger/besu/ethereum/permissioning/NodeSmartContractV2PermissioningController.java", "diffHunk": "@@ -64,14 +64,14 @@ private boolean isPermitted(final EnodeURL enode) {\n   private Bytes createPayload(final EnodeURL enodeUrl) {\n     try {\n       final String hexNodeIdString = enodeUrl.getNodeId().toUnprefixedHexString();\n-      final byte[] ip = encodeIp(enodeUrl.getIp());\n+      final String hexIpString = encodeIp(enodeUrl.getIp());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM5NzY0MQ=="}, "originalCommit": {"oid": "71190183af1f40219840da4bc8e3457b4e675829"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1301, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}