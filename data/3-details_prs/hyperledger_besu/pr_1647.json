{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwNjc1OTQy", "number": 1647, "title": "prevent Besu starting in GoQuorum mode on Mainnet", "bodyText": "Signed-off-by: Sally MacFarlane sally.macfarlane@consensys.net\nPrevent Besu starting in GoQuorum mode on Mainnet. Check chainId in genesis and network CLI option\nChangelog\n\n I thought about the changelog and included a changelog update if required.", "createdAt": "2020-12-02T01:21:38Z", "url": "https://github.com/hyperledger/besu/pull/1647", "merged": true, "mergeCommit": {"oid": "809b801add61103024ccbbc22ce590c7a2c0aac0"}, "closed": true, "closedAt": "2020-12-02T07:58:34Z", "author": {"login": "macfarla"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiEHEUAH2gAyNTMwNjc1OTQyOjc4NGQ4YTk2OThlMjBlMmJiNzA3NDEzY2U2NWM5MzI2NjZmYmE2ZGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiHeBJgFqTU0MjUwMzk4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "784d8a9698e20e2bb707413ce65c932666fba6da", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/784d8a9698e20e2bb707413ce65c932666fba6da", "committedDate": "2020-12-02T01:18:00Z", "message": "prevent mainnet + goquorum\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f86d120c1565518377cba92243645c8c5bd33fb", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/0f86d120c1565518377cba92243645c8c5bd33fb", "committedDate": "2020-12-02T02:24:51Z", "message": "Merge branch 'master' of https://github.com/hyperledger/besu into no-gq-privacy-mainnet"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyNDU0Mzgz", "url": "https://github.com/hyperledger/besu/pull/1647#pullrequestreview-542454383", "createdAt": "2020-12-02T02:37:27Z", "commit": {"oid": "784d8a9698e20e2bb707413ce65c932666fba6da"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwMjozNzoyOFrOH9IBnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwMjo0MTo1NlrOH9IHLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1NjY3MQ==", "bodyText": "what needs to happen if it is not present?", "url": "https://github.com/hyperledger/besu/pull/1647#discussion_r533856671", "createdAt": "2020-12-02T02:37:28Z", "author": {"login": "pinges"}, "path": "besu/src/main/java/org/hyperledger/besu/cli/BesuCommand.java", "diffHunk": "@@ -1404,6 +1404,16 @@ private void validateGoQuorumCompatibilityModeParam() {\n         throw new IllegalStateException(\n             \"GoQuorum compatibility mode (enabled) can only be used if genesis file has 'isQuorum' flag set to true.\");\n       }\n+      genesisConfigOptions\n+          .getChainId()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "784d8a9698e20e2bb707413ce65c932666fba6da"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1ODA5Mg==", "bodyText": "Could you use the valid quorum genesis file here with chainId 1?", "url": "https://github.com/hyperledger/besu/pull/1647#discussion_r533858092", "createdAt": "2020-12-02T02:41:56Z", "author": {"login": "pinges"}, "path": "besu/src/test/java/org/hyperledger/besu/cli/BesuCommandTest.java", "diffHunk": "@@ -3963,4 +3972,31 @@ public void quorumInteropEnabledSucceedsWithGasPriceSetToZero() throws IOExcepti\n         \"0\");\n     assertThat(commandErrorOutput.toString()).isEmpty();\n   }\n+\n+  @Test\n+  public void quorumInteropEnabledFailsWithMainnetDefaultNetwork() throws IOException {\n+    final Path genesisFile = createFakeGenesisFile(INVALID_GENESIS_QUORUM_INTEROP_ENABLED_MAINNET);\n+    parseCommand(\n+        \"--goquorum-compatibility-enabled\",\n+        \"--genesis-file\",\n+        genesisFile.toString(),\n+        \"--min-gas-price\",\n+        \"0\");\n+    assertThat(commandErrorOutput.toString())\n+        .contains(\"GoQuorum compatibility mode (enabled) cannot be used on Mainnet\");\n+  }\n+\n+  @Test\n+  public void quorumInteropEnabledFailsWithMainnetChainId() throws IOException {\n+    final Path genesisFile =\n+        createFakeGenesisFile(INVALID_GENESIS_QUORUM_INTEROP_ENABLED_MAINNET.put(\"chainId\", \"1\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "784d8a9698e20e2bb707413ce65c932666fba6da"}, "originalPosition": 75}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85ebd2398e946312e2d289fbc08e8d608560266c", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/85ebd2398e946312e2d289fbc08e8d608560266c", "committedDate": "2020-12-02T03:25:20Z", "message": "refactor\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "056b2da1b2e05810a56d5565cc64239ba6b6cc0e", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/056b2da1b2e05810a56d5565cc64239ba6b6cc0e", "committedDate": "2020-12-02T03:28:29Z", "message": "changelog\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyNTAzOTgx", "url": "https://github.com/hyperledger/besu/pull/1647#pullrequestreview-542503981", "createdAt": "2020-12-02T05:12:47Z", "commit": {"oid": "056b2da1b2e05810a56d5565cc64239ba6b6cc0e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2147, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}