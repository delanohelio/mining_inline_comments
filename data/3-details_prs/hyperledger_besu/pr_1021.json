{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2NjUzMzgy", "number": 1021, "title": "Add gauge to time mark duration", "bodyText": "This is required to do performance monitoring/improvement of mark duration", "createdAt": "2020-06-02T15:17:17Z", "url": "https://github.com/hyperledger/besu/pull/1021", "merged": true, "mergeCommit": {"oid": "091ab9725eef81dcbb1ce03fe04b8c3786ae85b0"}, "closed": true, "closedAt": "2020-06-03T16:37:53Z", "author": {"login": "RatanRSur"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnWZqMAH2gAyNDI2NjUzMzgyOjFmNGZiMWQ1NWIxZDdmYWEzMmVkYzU1ODVkYzk1MmJjYjdlMjVlOWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnruFbgH2gAyNDI2NjUzMzgyOjA2NjlmMjgzOGU4ZWQzODlhNjI0NWJiMDE4ZDkyNDkwNDI1MTM1YTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1f4fb1d55b1d7faa32edc5585dc952bcb7e25e9c", "author": {"user": {"login": "RatanRSur", "name": "Ratan (Rai) Sur"}}, "url": "https://github.com/hyperledger/besu/commit/1f4fb1d55b1d7faa32edc5585dc952bcb7e25e9c", "committedDate": "2020-06-02T15:15:04Z", "message": "add gauge\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNzg1MTk4", "url": "https://github.com/hyperledger/besu/pull/1021#pullrequestreview-422785198", "createdAt": "2020-06-02T15:18:40Z", "commit": {"oid": "1f4fb1d55b1d7faa32edc5585dc952bcb7e25e9c"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxNToxODo0MFrOGd2qLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxNToyMDozN1rOGd2vvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk1NzQyMQ==", "bodyText": "Cumulative or per marking run?  Worth adding some verbiage to the help text to make it clear.", "url": "https://github.com/hyperledger/besu/pull/1021#discussion_r433957421", "createdAt": "2020-06-02T15:18:40Z", "author": {"login": "shemnon"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/worldstate/MarkSweepPruner.java", "diffHunk": "@@ -94,6 +97,13 @@ public MarkSweepPruner(\n             BesuMetricCategory.PRUNER,\n             \"sweep_operations_total\",\n             \"Total number of sweep operations performed\");\n+\n+    markStopwatch = Stopwatch.createUnstarted();\n+    metricsSystem.createLongGauge(\n+        BesuMetricCategory.PRUNER,\n+        \"mark_time_duration\",\n+        \"Total number of seconds spent marking the state trie\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f4fb1d55b1d7faa32edc5585dc952bcb7e25e9c"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk1ODg0NQ==", "bodyText": "Is MarkSweepPruner a singleton for the life of the java process?  Counters can handle multiple counters, gauges will throw an exception when the second gauge is created.", "url": "https://github.com/hyperledger/besu/pull/1021#discussion_r433958845", "createdAt": "2020-06-02T15:20:37Z", "author": {"login": "shemnon"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/worldstate/MarkSweepPruner.java", "diffHunk": "@@ -94,6 +97,13 @@ public MarkSweepPruner(\n             BesuMetricCategory.PRUNER,\n             \"sweep_operations_total\",\n             \"Total number of sweep operations performed\");\n+\n+    markStopwatch = Stopwatch.createUnstarted();\n+    metricsSystem.createLongGauge(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f4fb1d55b1d7faa32edc5585dc952bcb7e25e9c"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "368471e423310d9721aeb6f5eb480ac6c4c60bf4", "author": {"user": {"login": "RatanRSur", "name": "Ratan (Rai) Sur"}}, "url": "https://github.com/hyperledger/besu/commit/368471e423310d9721aeb6f5eb480ac6c4c60bf4", "committedDate": "2020-06-02T15:22:54Z", "message": "clarify\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28c646c753283a87b0a2d6130d7ad5af0048873d", "author": {"user": {"login": "RatanRSur", "name": "Ratan (Rai) Sur"}}, "url": "https://github.com/hyperledger/besu/commit/28c646c753283a87b0a2d6130d7ad5af0048873d", "committedDate": "2020-06-02T15:53:15Z", "message": "Merge branch 'master' into pruner-time-gauge"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyODU1MjQ4", "url": "https://github.com/hyperledger/besu/pull/1021#pullrequestreview-422855248", "createdAt": "2020-06-02T16:30:15Z", "commit": {"oid": "28c646c753283a87b0a2d6130d7ad5af0048873d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2179f430f9cd476462ffaaccc6423c2999bc477", "author": {"user": {"login": "RatanRSur", "name": "Ratan (Rai) Sur"}}, "url": "https://github.com/hyperledger/besu/commit/b2179f430f9cd476462ffaaccc6423c2999bc477", "committedDate": "2020-06-02T18:52:29Z", "message": "Merge branch 'master' into pruner-time-gauge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0669f2838e8ed389a6245bb018d92490425135a8", "author": {"user": {"login": "RatanRSur", "name": "Ratan (Rai) Sur"}}, "url": "https://github.com/hyperledger/besu/commit/0669f2838e8ed389a6245bb018d92490425135a8", "committedDate": "2020-06-03T16:05:23Z", "message": "Merge branch 'master' into pruner-time-gauge"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1554, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}