{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyMTU3OTA1", "number": 1730, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwNjo1MDo1OVrOFHCqVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwNjo1MDo1OVrOFHCqVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyOTI3OTU3OnYy", "diffSide": "RIGHT", "path": "ethereum/api/src/main/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/EthEstimateGas.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwNjo1MDo1OVrOIIVLHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMTo0MzoxNlrOIIfspw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNjQyOA==", "bodyText": "Revert reason may not be present.  Try something like\njsonRpcError.setData(resultTrx.getRevertReason().map(Bytes::toHexString()).orElse(null));", "url": "https://github.com/hyperledger/besu/pull/1730#discussion_r545606428", "createdAt": "2020-12-18T06:50:59Z", "author": {"login": "shemnon"}, "path": "ethereum/api/src/main/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/EthEstimateGas.java", "diffHunk": "@@ -151,6 +151,7 @@ private JsonRpcErrorResponse errorResponse(\n       final TransactionProcessingResult resultTrx = result.getResult();\n       if (resultTrx != null && resultTrx.getRevertReason().isPresent()) {\n         jsonRpcError = JsonRpcError.REVERT_ERROR;\n+        jsonRpcError.setData(resultTrx.getRevertReason().get().toHexString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e061bf00c51750c0ed5c3639d3c7510419906f90"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc3ODg1NQ==", "bodyText": "It's checked up there on the line 152 (resultTrx.getRevertReason().isPresent())", "url": "https://github.com/hyperledger/besu/pull/1730#discussion_r545778855", "createdAt": "2020-12-18T11:43:16Z", "author": {"login": "VladLupashevskyi"}, "path": "ethereum/api/src/main/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/EthEstimateGas.java", "diffHunk": "@@ -151,6 +151,7 @@ private JsonRpcErrorResponse errorResponse(\n       final TransactionProcessingResult resultTrx = result.getResult();\n       if (resultTrx != null && resultTrx.getRevertReason().isPresent()) {\n         jsonRpcError = JsonRpcError.REVERT_ERROR;\n+        jsonRpcError.setData(resultTrx.getRevertReason().get().toHexString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNjQyOA=="}, "originalCommit": {"oid": "e061bf00c51750c0ed5c3639d3c7510419906f90"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1286, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}