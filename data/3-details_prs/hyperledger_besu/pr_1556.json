{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5OTY4OTk5", "number": 1556, "title": "Merge CallParameter and JsonCallParameter classes", "bodyText": "Signed-off-by: Karim TAAM karim.t2am@gmail.com\n\n\nPR description\nRemove and clean this part of code in the JsonCallParameter class\nfrom != null ? Address.fromHexString(from) : null,\nto != null ? Address.fromHexString(to) : null,\ngasLimit != null ? Long.decode(gasLimit) : -1,\ngasPrice != null ? Wei.fromHexString(gasPrice) : null,\ngasPremium != null ? Wei.fromHexString(gasPremium) : null,\nfeeCap != null ? Wei.fromHexString(feeCap) : null,\nvalue != null ? Wei.fromHexString(value) : null,\npayload != null ? Bytes.fromHexString(payload) : null);\nTest performed\n\nTest with eth_call and eth_estimateGas\nUpdate unit tests\n\nChangelog\n\n I thought about the changelog and included a changelog update if required.", "createdAt": "2020-11-12T15:36:43Z", "url": "https://github.com/hyperledger/besu/pull/1556", "merged": true, "mergeCommit": {"oid": "9bc90442d28ce937325c674b3c8be7ca67d741e7"}, "closed": true, "closedAt": "2020-11-17T15:11:57Z", "author": {"login": "matkt"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdb0OsNAH2gAyNTE5OTY4OTk5OjU1NzBlODI3YWMxY2RkZTc3MmQyYzFkYzI3MzZlYzdlNTE2ZDhiYzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddZs1NAH2gAyNTE5OTY4OTk5OmQ5MmViZGFlZjJkMzBhN2VhODc0NGE1Y2QwMjdmYzY2NDI4M2VhNDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5570e827ac1cdde772d2c1dc2736ec7e516d8bc6", "author": {"user": {"login": "matkt", "name": null}}, "url": "https://github.com/hyperledger/besu/commit/5570e827ac1cdde772d2c1dc2736ec7e516d8bc6", "committedDate": "2020-11-12T15:24:18Z", "message": "clean JsonCallParameter class\n\nSigned-off-by: Karim TAAM <karim.t2am@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "000bff0f5b50c597830e45fb656df8b2ce4cf58b", "author": {"user": {"login": "matkt", "name": null}}, "url": "https://github.com/hyperledger/besu/commit/000bff0f5b50c597830e45fb656df8b2ce4cf58b", "committedDate": "2020-11-12T16:27:07Z", "message": "fix test failed\n\nSigned-off-by: Karim TAAM <karim.t2am@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84ef2446a45fad3d989ae1f798bf833ff6ec283f", "author": {"user": {"login": "matkt", "name": null}}, "url": "https://github.com/hyperledger/besu/commit/84ef2446a45fad3d989ae1f798bf833ff6ec283f", "committedDate": "2020-11-12T16:29:43Z", "message": "Merge branch 'master' into feature/fix_invalid_call_params"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5NTAzMDg5", "url": "https://github.com/hyperledger/besu/pull/1556#pullrequestreview-529503089", "createdAt": "2020-11-12T21:15:37Z", "commit": {"oid": "84ef2446a45fad3d989ae1f798bf833ff6ec283f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQyMToxNTozN1rOHyOphg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQyMToxNTozN1rOHyOphg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjQzMDg1NA==", "bodyText": "Why can't we just use the CallParameter with all of these annotations? Why do we need a separate JsonCallParameter class?", "url": "https://github.com/hyperledger/besu/pull/1556#discussion_r522430854", "createdAt": "2020-11-12T21:15:37Z", "author": {"login": "RatanRSur"}, "path": "ethereum/api/src/main/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/parameters/JsonCallParameter.java", "diffHunk": "@@ -15,44 +15,36 @@\n package org.hyperledger.besu.ethereum.api.jsonrpc.internal.parameters;\n \n import org.hyperledger.besu.ethereum.core.Address;\n+import org.hyperledger.besu.ethereum.core.Gas;\n import org.hyperledger.besu.ethereum.core.Wei;\n import org.hyperledger.besu.ethereum.transaction.CallParameter;\n \n+import java.util.Optional;\n+\n import com.fasterxml.jackson.annotation.JsonCreator;\n import com.fasterxml.jackson.annotation.JsonProperty;\n-import com.google.common.annotations.VisibleForTesting;\n+import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n import org.apache.tuweni.bytes.Bytes;\n \n public class JsonCallParameter extends CallParameter {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84ef2446a45fad3d989ae1f798bf833ff6ec283f"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMDU0NjE0", "url": "https://github.com/hyperledger/besu/pull/1556#pullrequestreview-530054614", "createdAt": "2020-11-13T13:20:26Z", "commit": {"oid": "84ef2446a45fad3d989ae1f798bf833ff6ec283f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxMzoyMDoyNlrOHyuCtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxMzoyNDo0OVrOHyuMGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk0NTIwNw==", "bodyText": "I'd rename this to HexStringDeserializer", "url": "https://github.com/hyperledger/besu/pull/1556#discussion_r522945207", "createdAt": "2020-11-13T13:20:26Z", "author": {"login": "RatanRSur"}, "path": "ethereum/api/src/main/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/parameters/BytesDeserializer.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ *\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+package org.hyperledger.besu.ethereum.api.jsonrpc.internal.parameters;\n+\n+import java.io.IOException;\n+\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.deser.std.StdDeserializer;\n+import org.apache.tuweni.bytes.Bytes;\n+\n+public class BytesDeserializer extends StdDeserializer<Bytes> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84ef2446a45fad3d989ae1f798bf833ff6ec283f"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk0NzYxMA==", "bodyText": "I can only easily imagine the simulator taking more parameters than a call parameter in the rpc since the simulator would need to know at least as much info as a normal call to do its job. Even if that happens eventually, that person will be empowered to split it in whichever way works for them.\nI don't think that other classes in the package not using JsonProperty annotations need block us from adding it. If it keeps the data model cleaner that's a plus. Also, if \"it hasn't been done before\" becomes a justification for things then many people can come across the same problem with the same solution and discard it because \"it hasn't been done before\", thus preventing others from seeing it has been done before.", "url": "https://github.com/hyperledger/besu/pull/1556#discussion_r522947610", "createdAt": "2020-11-13T13:24:49Z", "author": {"login": "RatanRSur"}, "path": "ethereum/api/src/main/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/parameters/JsonCallParameter.java", "diffHunk": "@@ -15,44 +15,36 @@\n package org.hyperledger.besu.ethereum.api.jsonrpc.internal.parameters;\n \n import org.hyperledger.besu.ethereum.core.Address;\n+import org.hyperledger.besu.ethereum.core.Gas;\n import org.hyperledger.besu.ethereum.core.Wei;\n import org.hyperledger.besu.ethereum.transaction.CallParameter;\n \n+import java.util.Optional;\n+\n import com.fasterxml.jackson.annotation.JsonCreator;\n import com.fasterxml.jackson.annotation.JsonProperty;\n-import com.google.common.annotations.VisibleForTesting;\n+import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n import org.apache.tuweni.bytes.Bytes;\n \n public class JsonCallParameter extends CallParameter {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjQzMDg1NA=="}, "originalCommit": {"oid": "84ef2446a45fad3d989ae1f798bf833ff6ec283f"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "693b9a42cd965e3783e77c3f6078c399bab451de", "author": {"user": {"login": "matkt", "name": null}}, "url": "https://github.com/hyperledger/besu/commit/693b9a42cd965e3783e77c3f6078c399bab451de", "committedDate": "2020-11-13T15:08:17Z", "message": "merge CallParameter and JsonCallParameter\n\nSigned-off-by: Karim TAAM <karim.t2am@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de3fb45111b6e65fd898e9e592eea0c95d70a55a", "author": {"user": {"login": "matkt", "name": null}}, "url": "https://github.com/hyperledger/besu/commit/de3fb45111b6e65fd898e9e592eea0c95d70a55a", "committedDate": "2020-11-13T15:09:19Z", "message": "Merge branch 'feature/fix_invalid_call_params' with master\n\nSigned-off-by: Karim TAAM <karim.t2am@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b3b3e864cee6822374feb49b68aa9e66fab1dab", "author": {"user": {"login": "matkt", "name": null}}, "url": "https://github.com/hyperledger/besu/commit/1b3b3e864cee6822374feb49b68aa9e66fab1dab", "committedDate": "2020-11-13T15:09:32Z", "message": "Merge branch 'master' into feature/fix_invalid_call_params"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0be5ea61559068ea4730327f82c73c9314ede1a8", "author": {"user": {"login": "matkt", "name": null}}, "url": "https://github.com/hyperledger/besu/commit/0be5ea61559068ea4730327f82c73c9314ede1a8", "committedDate": "2020-11-13T15:11:41Z", "message": "clean code\n\nSigned-off-by: Karim TAAM <karim.t2am@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a420b6e6e39531f235b3018097ba832d853813d6", "author": {"user": {"login": "matkt", "name": null}}, "url": "https://github.com/hyperledger/besu/commit/a420b6e6e39531f235b3018097ba832d853813d6", "committedDate": "2020-11-13T15:14:10Z", "message": "Merge branch 'master' into feature/fix_invalid_call_params\n\nSigned-off-by: Karim TAAM <karim.t2am@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxODY4NzEx", "url": "https://github.com/hyperledger/besu/pull/1556#pullrequestreview-531868711", "createdAt": "2020-11-16T22:58:19Z", "commit": {"oid": "a420b6e6e39531f235b3018097ba832d853813d6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70fd86a5d04a8b7678fb20d1502f76dfd92ec411", "author": {"user": {"login": "matkt", "name": null}}, "url": "https://github.com/hyperledger/besu/commit/70fd86a5d04a8b7678fb20d1502f76dfd92ec411", "committedDate": "2020-11-17T13:11:06Z", "message": "Merge branch 'master' into feature/fix_invalid_call_params"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d92ebdaef2d30a7ea8744a5cd027fc664283ea48", "author": {"user": {"login": "matkt", "name": null}}, "url": "https://github.com/hyperledger/besu/commit/d92ebdaef2d30a7ea8744a5cd027fc664283ea48", "committedDate": "2020-11-17T13:37:38Z", "message": "Merge branch 'master' into feature/fix_invalid_call_params"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2084, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}