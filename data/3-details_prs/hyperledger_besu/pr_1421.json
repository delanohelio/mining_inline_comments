{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4ODM4OTA3", "number": 1421, "title": "[ECIP-1099] Implement ECIP 1099: Calibrate Epoch Duration", "bodyText": "PR description\nThis PR introduces code to implement ECIP 1099: Calbrate Epoch Duration https://ecips.ethereumclassic.org/ECIPs/ecip-1099\n\nCreated new genesis config ecip1099Block to define the block that epoch length change activation should be activated for Ethereum Classic Networks.\nImplement code to build function that calculates epoch.\n\nFixed Issue(s)\n\n\nChangelog\n\n I thought about the changelog and included a changelog update if required.", "createdAt": "2020-10-06T21:13:47Z", "url": "https://github.com/hyperledger/besu/pull/1421", "merged": true, "mergeCommit": {"oid": "787871a13ad1572186a5d4a53c183b3eddcfa3f2"}, "closed": true, "closedAt": "2020-10-09T16:29:54Z", "author": {"login": "edwardmack"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNucGzgH2gAyNDk4ODM4OTA3OjM0OWU3NTMzZjQ1OGQzNWU4YjQ1N2I5ZjE4NGJkMjBkMDg1NjgyZjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQ4sv1gFqTUwNTgyMTY3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "349e7533f458d35e8b457b9f184bd20d085682f9", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/349e7533f458d35e8b457b9f184bd20d085682f9", "committedDate": "2020-09-29T20:44:35Z", "message": "Add genesis config parameter ecip1099Block\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f70f8380e6b6bdd548a6ef316fc3779f3fa3bf30", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/f70f8380e6b6bdd548a6ef316fc3779f3fa3bf30", "committedDate": "2020-10-04T16:52:04Z", "message": "add stub for epoch activation config\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ba86700b1593ef7513b79926210165a8efddb35", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/9ba86700b1593ef7513b79926210165a8efddb35", "committedDate": "2020-10-05T14:31:29Z", "message": "add stubs for EtcBesuControllerBuilder\n\nthat will handle ECIP 1099 Colibrate Epoch Duration functionality\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22973df5f7518cc36df66356c18d5a80e2d56af3", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/22973df5f7518cc36df66356c18d5a80e2d56af3", "committedDate": "2020-10-05T20:43:20Z", "message": "introduce EtcHashMinerExecutor\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cae912285991a08456b34ca800bf4f819b2cf304", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/cae912285991a08456b34ca800bf4f819b2cf304", "committedDate": "2020-10-05T22:21:30Z", "message": "implement EtcHashMinerExecutor\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "413019ae63806ba788d670aa238d6a20213e696a", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/413019ae63806ba788d670aa238d6a20213e696a", "committedDate": "2020-10-06T19:35:29Z", "message": "remove ecip1099 genesis config option\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "524bfa8fa6d42a4c9d6dced494fde203d5a57b65", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/524bfa8fa6d42a4c9d6dced494fde203d5a57b65", "committedDate": "2020-10-06T19:47:46Z", "message": "apply spotless to code\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e58f103172ff1152057a162f8668035409624144", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/e58f103172ff1152057a162f8668035409624144", "committedDate": "2020-10-06T20:33:50Z", "message": "add test for Etc Hash epoch calculation\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15c7ba42e68dcb3e98bb20ef09cfde1a4d433345", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/15c7ba42e68dcb3e98bb20ef09cfde1a4d433345", "committedDate": "2020-10-06T20:41:45Z", "message": "cleanup comments, apply spotless\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8595873ea12c43eecd538c193da40822b1bceab", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/a8595873ea12c43eecd538c193da40822b1bceab", "committedDate": "2020-10-06T20:58:28Z", "message": "make needed variables final\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a68a212aea4617daffa84494fae603dd82f2fbb", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/1a68a212aea4617daffa84494fae603dd82f2fbb", "committedDate": "2020-10-06T21:16:05Z", "message": "update changelog\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a53f9d1c881b0712e680ff7218ba90d6849aca2", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/7a53f9d1c881b0712e680ff7218ba90d6849aca2", "committedDate": "2020-10-06T21:18:16Z", "message": "Merge branch 'master' into ed/ecip_1099"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMzgyODUz", "url": "https://github.com/hyperledger/besu/pull/1421#pullrequestreview-503382853", "createdAt": "2020-10-06T21:46:55Z", "commit": {"oid": "7a53f9d1c881b0712e680ff7218ba90d6849aca2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQyMTo0Njo1NVrOHdbHFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQyMTo0Njo1NVrOHdbHFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDYxNDkzNQ==", "bodyText": "This is atypical form for activated forks.  I would have expected \"ecip1099Block\": 2520000 instead of a nested construct.  It's the same algorithm with different parameters, not a new algorithm.", "url": "https://github.com/hyperledger/besu/pull/1421#discussion_r500614935", "createdAt": "2020-10-06T21:46:55Z", "author": {"login": "shemnon"}, "path": "config/src/main/resources/mordor.json", "diffHunk": "@@ -5,7 +5,9 @@\n     \"aghartaBlock\": 301243,\n     \"phoenixBlock\": 999983,\n     \"ecip1017EraRounds\": 2000000,\n-    \"ethash\": {}\n+    \"etchash\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a53f9d1c881b0712e680ff7218ba90d6849aca2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6235ce29205debd82b5f251b1fb4d08e8f3d9ee8", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/6235ce29205debd82b5f251b1fb4d08e8f3d9ee8", "committedDate": "2020-10-07T23:48:48Z", "message": "refactor code to add epochCalculator to EthHash\n\nAs suggested in comment removed EtcHash series of classes to keep\nexisting controller.\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "760f80a9d2d430a5dea7dc0b1f78567da6f3b632", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/760f80a9d2d430a5dea7dc0b1f78567da6f3b632", "committedDate": "2020-10-08T00:02:19Z", "message": "Merge branch 'master' into ed/ecip_1099"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "665d591053b5f62f435b582e7651fe762350a63e", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/665d591053b5f62f435b582e7651fe762350a63e", "committedDate": "2020-10-08T00:06:59Z", "message": "Merge branch 'master' into ed/ecip_1099"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a94b15f09d25cceff7721e6761cf15cdccdfa3f4", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/a94b15f09d25cceff7721e6761cf15cdccdfa3f4", "committedDate": "2020-10-08T00:41:28Z", "message": "use gas limit calculator\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77889ccc1d04647887843426ee09b24220073fbe", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/77889ccc1d04647887843426ee09b24220073fbe", "committedDate": "2020-10-08T00:49:35Z", "message": "fix imports\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f43c2df423dfdb5ee03b0ec360556f023db23e6c", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/f43c2df423dfdb5ee03b0ec360556f023db23e6c", "committedDate": "2020-10-08T00:52:37Z", "message": "run spotless apply\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e2bb676d2ba37985a4800825b11041c042c822c", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/6e2bb676d2ba37985a4800825b11041c042c822c", "committedDate": "2020-10-08T01:02:06Z", "message": "fix imports\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f86ab55884c6b3628142624fe7a85983a71124d", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/4f86ab55884c6b3628142624fe7a85983a71124d", "committedDate": "2020-10-08T01:13:21Z", "message": "fix comments\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7539202c1d690309d45665b91f4440b452272b27", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/7539202c1d690309d45665b91f4440b452272b27", "committedDate": "2020-10-08T13:57:42Z", "message": "Merge branch 'master' into ed/ecip_1099"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b72ee992557a920c5d61a99a406afa312cdfda76", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/b72ee992557a920c5d61a99a406afa312cdfda76", "committedDate": "2020-10-08T15:06:01Z", "message": "Merge branch 'master' into ed/ecip_1099"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1616d36a6607c1ca400e3485d559bbac720c08f5", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/1616d36a6607c1ca400e3485d559bbac720c08f5", "committedDate": "2020-10-08T17:30:55Z", "message": "Merge branch 'master' into ed/ecip_1099"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NDgxMjIy", "url": "https://github.com/hyperledger/besu/pull/1421#pullrequestreview-505481222", "createdAt": "2020-10-09T08:49:11Z", "commit": {"oid": "1616d36a6607c1ca400e3485d559bbac720c08f5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwODo0OToxMlrOHfA4Tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwOTowNjoxMVrOHfBecA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI4MjMxOQ==", "bodyText": "How about putting  epochLength (or something like that) in place of a just to make it easier to read", "url": "https://github.com/hyperledger/besu/pull/1421#discussion_r502282319", "createdAt": "2020-10-09T08:49:12Z", "author": {"login": "matkt"}, "path": "config/src/main/java/org/hyperledger/besu/config/EthashConfigOptions.java", "diffHunk": "@@ -35,9 +35,14 @@ public OptionalLong getFixedDifficulty() {\n     return JsonUtil.getLong(ethashConfigRoot, \"fixeddifficulty\");\n   }\n \n+  public OptionalLong getEpochLengthActivationBlock() {\n+    return JsonUtil.getLong(ethashConfigRoot, \"epochlengthactivation\");\n+  }\n+\n   Map<String, Object> asMap() {\n     final ImmutableMap.Builder<String, Object> builder = ImmutableMap.builder();\n     getFixedDifficulty().ifPresent(l -> builder.put(\"fixeddifficulty\", l));\n+    getEpochLengthActivationBlock().ifPresent(a -> builder.put(\"epochlengthactivation\", a));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1616d36a6607c1ca400e3485d559bbac720c08f5"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI5MjA4MA==", "bodyText": "I think we also need to add this ecip here in the code  (in the asMap method) \n  \n    \n      besu/config/src/main/java/org/hyperledger/besu/config/JsonGenesisConfigOptions.java\n    \n    \n         Line 336\n      in\n      1616d36\n    \n    \n    \n    \n\n        \n          \n           getEcip1017EraRounds().ifPresent(l -> builder.put(\"ecip1017EraRounds\", l));", "url": "https://github.com/hyperledger/besu/pull/1421#discussion_r502292080", "createdAt": "2020-10-09T09:06:11Z", "author": {"login": "matkt"}, "path": "config/src/main/java/org/hyperledger/besu/config/JsonGenesisConfigOptions.java", "diffHunk": "@@ -274,6 +275,11 @@ public OptionalLong getPhoenixBlockNumber() {\n     return getOptionalLong(\"phoenixblock\");\n   }\n \n+  @Override\n+  public OptionalLong getEcip1099BlockNumber() {\n+    return getOptionalLong(\"ecip1099block\");\n+  }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1616d36a6607c1ca400e3485d559bbac720c08f5"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "104f9a384b30a6317e5c0d0324362d74c1dabb29", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/104f9a384b30a6317e5c0d0324362d74c1dabb29", "committedDate": "2020-10-09T14:50:57Z", "message": "Merge branch 'master' into ed/ecip_1099"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bde851fcd5715d01834234fbd3956d84f8265fac", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/bde851fcd5715d01834234fbd3956d84f8265fac", "committedDate": "2020-10-09T15:10:11Z", "message": "add ecip1099Block option to asMap method\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1ODE4OTc1", "url": "https://github.com/hyperledger/besu/pull/1421#pullrequestreview-505818975", "createdAt": "2020-10-09T16:19:40Z", "commit": {"oid": "bde851fcd5715d01834234fbd3956d84f8265fac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1ODIwNjE4", "url": "https://github.com/hyperledger/besu/pull/1421#pullrequestreview-505820618", "createdAt": "2020-10-09T16:22:03Z", "commit": {"oid": "bde851fcd5715d01834234fbd3956d84f8265fac"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNjoyMjowM1rOHfQo0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNjoyMjowM1rOHfQo0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjU0MDQ5OA==", "bodyText": "This will need to go into a new 20.10.0-RC2 section.  RC1 has shipped.", "url": "https://github.com/hyperledger/besu/pull/1421#discussion_r502540498", "createdAt": "2020-10-09T16:22:03Z", "author": {"login": "shemnon"}, "path": "CHANGELOG.md", "diffHunk": "@@ -34,6 +34,7 @@ Hyperledger Besu is moving its versioning scheme to [CalVer](https://calver.org/\n * Added support for multi-tenancy when using the early access feature of [onchain privacy group management](https://besu.hyperledger.org/en/stable/Concepts/Privacy/Onchain-PrivacyGroups/) \n * Fixed memory leak in eth/65 subprotocol behavior. It is now enabled by default. [\\#1420](https://github.com/hyperledger/besu/pull/1420), [#1348](https://github.com/hyperledger/besu/pull/1348), [#1321](https://github.com/hyperledger/besu/pull/1321)\n * Added `--privacy-flexible-groups-enabled` as an alternative for `--privacy-onchain-groups-enabled` CLI option\n+* Added support for ECIP-1099: Calibrate Epoch Duration. [\\#1421](https://github.com/hyperledger/besu/pull/1421)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bde851fcd5715d01834234fbd3956d84f8265fac"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1ODIxNjcx", "url": "https://github.com/hyperledger/besu/pull/1421#pullrequestreview-505821671", "createdAt": "2020-10-09T16:23:35Z", "commit": {"oid": "bde851fcd5715d01834234fbd3956d84f8265fac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2183, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}