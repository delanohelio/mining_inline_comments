{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2Njk5NzQw", "number": 904, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMzo0MToxNFrOD7p-RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMzo0MjoxOFrOD7qANg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzODgwMjYwOnYy", "diffSide": "RIGHT", "path": "ethereum/eth/src/main/java/org/hyperledger/besu/ethereum/eth/transactions/PendingTransactions.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMzo0MToxNFrOGUHKMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMzo1MDo1M1rOGUHnrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzc0MjAwMA==", "bodyText": "I think it would be better to use optional rather than putting a null. What do you think ?", "url": "https://github.com/hyperledger/besu/pull/904#discussion_r423742000", "createdAt": "2020-05-12T13:41:14Z", "author": {"login": "matkt"}, "path": "ethereum/eth/src/main/java/org/hyperledger/besu/ethereum/eth/transactions/PendingTransactions.java", "diffHunk": "@@ -435,4 +442,20 @@ public Instant getAddedToPoolAt() {\n \n     TransactionSelectionResult evaluateTransaction(final Transaction transaction);\n   }\n+\n+  public enum TransactionAddedStatus {\n+    ALREADY_KNOWN(TransactionInvalidReason.TRANSACTION_ALREADY_KNOWN),\n+    REJECTED_UNDERPRICED_REPLACEMENT(TransactionInvalidReason.TRANSACTION_REPLACEMENT_UNDERPRICED),\n+    ADDED(null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0313259e8bddb64dd46abde9c4028fa8ff5ef1d9"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzc0OTU1MA==", "bodyText": "Done.", "url": "https://github.com/hyperledger/besu/pull/904#discussion_r423749550", "createdAt": "2020-05-12T13:50:53Z", "author": {"login": "abdelhamidbakhta"}, "path": "ethereum/eth/src/main/java/org/hyperledger/besu/ethereum/eth/transactions/PendingTransactions.java", "diffHunk": "@@ -435,4 +442,20 @@ public Instant getAddedToPoolAt() {\n \n     TransactionSelectionResult evaluateTransaction(final Transaction transaction);\n   }\n+\n+  public enum TransactionAddedStatus {\n+    ALREADY_KNOWN(TransactionInvalidReason.TRANSACTION_ALREADY_KNOWN),\n+    REJECTED_UNDERPRICED_REPLACEMENT(TransactionInvalidReason.TRANSACTION_REPLACEMENT_UNDERPRICED),\n+    ADDED(null);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzc0MjAwMA=="}, "originalCommit": {"oid": "0313259e8bddb64dd46abde9c4028fa8ff5ef1d9"}, "originalPosition": 101}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzODgwNzU4OnYy", "diffSide": "RIGHT", "path": "ethereum/eth/src/main/java/org/hyperledger/besu/ethereum/eth/transactions/PendingTransactions.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMzo0MjoxOFrOGUHNQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMzo0NDoyNVrOGUHTsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzc0Mjc4Ng==", "bodyText": "We can use a variable to avoid doing the equals twice", "url": "https://github.com/hyperledger/besu/pull/904#discussion_r423742786", "createdAt": "2020-05-12T13:42:18Z", "author": {"login": "matkt"}, "path": "ethereum/eth/src/main/java/org/hyperledger/besu/ethereum/eth/transactions/PendingTransactions.java", "diffHunk": "@@ -130,11 +134,11 @@ public void evictOldTransactions() {\n   public boolean addRemoteTransaction(final Transaction transaction) {\n     final TransactionInfo transactionInfo =\n         new TransactionInfo(transaction, false, clock.instant());\n-    final boolean transactionAdded = addTransaction(transactionInfo);\n-    if (transactionAdded) {\n+    final TransactionAddedStatus transactionAddedStatus = addTransaction(transactionInfo);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0313259e8bddb64dd46abde9c4028fa8ff5ef1d9"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzc0NDQzNA==", "bodyText": "Done.", "url": "https://github.com/hyperledger/besu/pull/904#discussion_r423744434", "createdAt": "2020-05-12T13:44:25Z", "author": {"login": "abdelhamidbakhta"}, "path": "ethereum/eth/src/main/java/org/hyperledger/besu/ethereum/eth/transactions/PendingTransactions.java", "diffHunk": "@@ -130,11 +134,11 @@ public void evictOldTransactions() {\n   public boolean addRemoteTransaction(final Transaction transaction) {\n     final TransactionInfo transactionInfo =\n         new TransactionInfo(transaction, false, clock.instant());\n-    final boolean transactionAdded = addTransaction(transactionInfo);\n-    if (transactionAdded) {\n+    final TransactionAddedStatus transactionAddedStatus = addTransaction(transactionInfo);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzc0Mjc4Ng=="}, "originalCommit": {"oid": "0313259e8bddb64dd46abde9c4028fa8ff5ef1d9"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 991, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}