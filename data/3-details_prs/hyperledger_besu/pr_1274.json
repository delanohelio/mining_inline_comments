{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyNDM5NDY2", "number": 1274, "title": "[877] Updated multi-tenancy privacy to check onchain groups.", "bodyText": "Signed-off-by: Mark Terry mark.terry@consensys.net\n\n\nPR description\nUpdated the multi-tenancy privacy group validation to check onchain privacy groups.\nFixed Issue(s)\nFixes #877", "createdAt": "2020-08-03T23:09:42Z", "url": "https://github.com/hyperledger/besu/pull/1274", "merged": true, "mergeCommit": {"oid": "d97c6bae9c3ae8667ad33e009a8f45044057cb10"}, "closed": true, "closedAt": "2020-08-05T05:03:23Z", "author": {"login": "mark-terry"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7aVVfgH2gAyNDYyNDM5NDY2Ojg3ZmE4ZmNhMWFhMmI3ZjFhZDQ4MzFhYWU2ODE5Nzk2OTkzN2FjOTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7t6eqgH2gAyNDYyNDM5NDY2OmM0MWVhMDI3MGE2ZDYwYTc5NGI3MGVjZjBjNjY1YjFjOTJlZDQ2ZTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "87fa8fca1aa2b7f1ad4831aae68197969937ac91", "author": {"user": {"login": "mark-terry", "name": null}}, "url": "https://github.com/hyperledger/besu/commit/87fa8fca1aa2b7f1ad4831aae68197969937ac91", "committedDate": "2020-08-03T23:08:27Z", "message": "[877] Updated multi-tenancy privacy to check onchain groups.\n\nSigned-off-by: Mark Terry <mark.terry@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c4fc100b406bccfe322988af46a433b912847b6", "author": {"user": {"login": "mark-terry", "name": null}}, "url": "https://github.com/hyperledger/besu/commit/1c4fc100b406bccfe322988af46a433b912847b6", "committedDate": "2020-08-03T23:18:59Z", "message": "Merge branch 'master' into 877"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNDI2ODI5", "url": "https://github.com/hyperledger/besu/pull/1274#pullrequestreview-460426829", "createdAt": "2020-08-04T00:53:20Z", "commit": {"oid": "1c4fc100b406bccfe322988af46a433b912847b6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMDo1MzoyMFrOG7NUyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMDo1MzoyMFrOG7NUyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDczNzQ4Mg==", "bodyText": "Need to review whether these checks should be in this class at all.", "url": "https://github.com/hyperledger/besu/pull/1274#discussion_r464737482", "createdAt": "2020-08-04T00:53:20Z", "author": {"login": "mark-terry"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/privacy/DefaultPrivacyController.java", "diffHunk": "@@ -515,4 +516,22 @@ public void verifyPrivacyGroupContainsEnclavePublicKey(\n       final String privacyGroupId, final String enclavePublicKey) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c4fc100b406bccfe322988af46a433b912847b6"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNDM4Nzgw", "url": "https://github.com/hyperledger/besu/pull/1274#pullrequestreview-460438780", "createdAt": "2020-08-04T01:34:25Z", "commit": {"oid": "1c4fc100b406bccfe322988af46a433b912847b6"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMTozNDoyNVrOG7N-Jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMTozNjowMlrOG7N_zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc0ODA3MQ==", "bodyText": "would be good to have some unit tests for this class", "url": "https://github.com/hyperledger/besu/pull/1274#discussion_r464748071", "createdAt": "2020-08-04T01:34:25Z", "author": {"login": "macfarla"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/privacy/OnchainPrivacyGroupContract.java", "diffHunk": "@@ -0,0 +1,115 @@\n+/*\n+ * Copyright ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ *\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+package org.hyperledger.besu.ethereum.privacy;\n+\n+import static org.hyperledger.besu.ethereum.privacy.group.OnChainGroupManagement.GET_PARTICIPANTS_METHOD_SIGNATURE;\n+import static org.hyperledger.besu.ethereum.privacy.group.OnChainGroupManagement.GET_VERSION_METHOD_SIGNATURE;\n+\n+import org.hyperledger.besu.enclave.types.PrivacyGroup;\n+import org.hyperledger.besu.ethereum.core.Address;\n+import org.hyperledger.besu.ethereum.core.Hash;\n+import org.hyperledger.besu.ethereum.core.Wei;\n+import org.hyperledger.besu.ethereum.privacy.PrivateTransactionProcessor.Result;\n+import org.hyperledger.besu.ethereum.rlp.RLP;\n+import org.hyperledger.besu.ethereum.rlp.RLPInput;\n+import org.hyperledger.besu.ethereum.transaction.CallParameter;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Optional;\n+\n+import org.apache.tuweni.bytes.Bytes;\n+import org.apache.tuweni.bytes.Bytes32;\n+import org.apache.tuweni.units.bigints.UInt256;\n+\n+/*\n+ This contract is an abstraction on top of the privacy group management smart contract.\n+ TODO: there are a few places on OnChainPrivacyPrecompiledContract that we could use this class instead of a transaction simulator there.\n+*/\n+public class OnchainPrivacyGroupContract {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c4fc100b406bccfe322988af46a433b912847b6"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc0ODQ5NA==", "bodyText": "should these signatures just be in this class?", "url": "https://github.com/hyperledger/besu/pull/1274#discussion_r464748494", "createdAt": "2020-08-04T01:36:02Z", "author": {"login": "macfarla"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/privacy/OnchainPrivacyGroupContract.java", "diffHunk": "@@ -0,0 +1,115 @@\n+/*\n+ * Copyright ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ *\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+package org.hyperledger.besu.ethereum.privacy;\n+\n+import static org.hyperledger.besu.ethereum.privacy.group.OnChainGroupManagement.GET_PARTICIPANTS_METHOD_SIGNATURE;\n+import static org.hyperledger.besu.ethereum.privacy.group.OnChainGroupManagement.GET_VERSION_METHOD_SIGNATURE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c4fc100b406bccfe322988af46a433b912847b6"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNDkzMTA3", "url": "https://github.com/hyperledger/besu/pull/1274#pullrequestreview-460493107", "createdAt": "2020-08-04T04:48:59Z", "commit": {"oid": "1c4fc100b406bccfe322988af46a433b912847b6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c41ea0270a6d60a794b70ecf0c665b1c92ed46e5", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/c41ea0270a6d60a794b70ecf0c665b1c92ed46e5", "committedDate": "2020-08-04T21:57:13Z", "message": "Merge branch 'master' into 877"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1459, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}