{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwNTk1ODQw", "number": 1645, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwOTo0MTo1OFrOFAtrhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwOTo0MTo1OFrOFAtrhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MjkyNzQxOnYy", "diffSide": "RIGHT", "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/core/TransactionReceipt.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwOTo0MTo1OFrOH_IzEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxMzowNDoxN1rOH_QBdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTk2NjQ4Mw==", "bodyText": "Isn't there a better way to check the error type like a getCode() ? Because a simple modification of the message can lead to a change in behavior", "url": "https://github.com/hyperledger/besu/pull/1645#discussion_r535966483", "createdAt": "2020-12-04T09:41:58Z", "author": {"login": "matkt"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/core/TransactionReceipt.java", "diffHunk": "@@ -179,7 +212,18 @@ public static TransactionReceipt readFrom(final RLPInput input) {\n    */\n   public static TransactionReceipt readFrom(\n       final RLPInput input, final boolean revertReasonAllowed) {\n-    input.enterList();\n+    TransactionType transactionType = TransactionType.FRONTIER;\n+    try {\n+      input.enterList();\n+    } catch (RLPException rlpe) {\n+      if (rlpe.getMessage().contains(\"Expected current item to be a list\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3370fbc5a7a04e6830412d1398afb800c1338d82"}, "originalPosition": 114}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA4NDg1NA==", "bodyText": "You're right, it's brittle as is. I'll change it.", "url": "https://github.com/hyperledger/besu/pull/1645#discussion_r536084854", "createdAt": "2020-12-04T13:04:17Z", "author": {"login": "RatanRSur"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/core/TransactionReceipt.java", "diffHunk": "@@ -179,7 +212,18 @@ public static TransactionReceipt readFrom(final RLPInput input) {\n    */\n   public static TransactionReceipt readFrom(\n       final RLPInput input, final boolean revertReasonAllowed) {\n-    input.enterList();\n+    TransactionType transactionType = TransactionType.FRONTIER;\n+    try {\n+      input.enterList();\n+    } catch (RLPException rlpe) {\n+      if (rlpe.getMessage().contains(\"Expected current item to be a list\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTk2NjQ4Mw=="}, "originalCommit": {"oid": "3370fbc5a7a04e6830412d1398afb800c1338d82"}, "originalPosition": 114}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1382, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}