{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1MjQ2ODc2", "number": 1005, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxODoxMDo1NFrOEA_Weg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxODoxMDo1NFrOEA_Weg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NDczNDAyOnYy", "diffSide": "RIGHT", "path": "ethereum/eth/src/main/java/org/hyperledger/besu/ethereum/eth/manager/ForkIdManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxODoxMDo1NFrOGcnIGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxODoyMzo0OFrOGcniQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY1NDM2Mg==", "bodyText": "Is this code comment still accurate if you delete the second part?", "url": "https://github.com/hyperledger/besu/pull/1005#discussion_r432654362", "createdAt": "2020-05-29T18:10:54Z", "author": {"login": "atoulme"}, "path": "ethereum/eth/src/main/java/org/hyperledger/besu/ethereum/eth/manager/ForkIdManager.java", "diffHunk": "@@ -121,50 +73,40 @@ public static ForkId readFrom(final RLPInput in) {\n    * @return boolean (peer valid (true) or invalid (false))\n    */\n   boolean peerCheck(final ForkId forkId) {\n-    return forkIDCheckers.stream().anyMatch(checker -> checker.check(forkId));\n-  }\n-\n-  private static ForkIDChecker eip2124(\n-      final Blockchain blockchain,\n-      final long forkNext,\n-      final List<ForkId> forkAndHashList,\n-      final long highestKnownFork) {\n-    return forkId -> {\n-      if (forkId == null) {\n-        return true; // Another method must be used to validate (i.e. genesis hash)\n-      }\n-      // Run the fork checksum validation rule set:\n-      //   1. If local and remote FORK_CSUM matches, connect.\n-      //        The two nodes are in the same fork state currently. They might know\n-      //        of differing future forks, but that's not relevant until the fork\n-      //        triggers (might be postponed, nodes might be updated to match).\n-      //   2. If the remote FORK_CSUM is a subset of the local past forks and the\n-      //      remote FORK_NEXT matches with the locally following fork block number,\n-      //      connect.\n-      //        Remote node is currently syncing. It might eventually diverge from\n-      //        us, but at this current point in time we don't have enough information.\n-      //   3. If the remote FORK_CSUM is a superset of the local past forks and can\n-      //      be completed with locally known future forks, connect.\n-      //        Local node is currently syncing. It might eventually diverge from\n-      //        the remote, but at this current point in time we don't have enough\n-      //        information.\n-      //   4. Reject in all other cases.\n-      if (isHashKnown(forkId.getHash(), forkAndHashList)) {\n-        if (blockchain.getChainHeadBlockNumber() < forkNext) {\n-          return true;\n+    if (forkId == null) {\n+      return true; // Another method must be used to validate (i.e. genesis hash)\n+    }\n+    // Run the fork checksum validation rule set:\n+    //   1. If local and remote FORK_CSUM matches, connect.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28bcfa9120634bfb143475ade393c88612870b9b"}, "originalPosition": 142}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY2MTA1Nw==", "bodyText": "This is a full clean revert.  We can address stuff like this in another PR.", "url": "https://github.com/hyperledger/besu/pull/1005#discussion_r432661057", "createdAt": "2020-05-29T18:23:48Z", "author": {"login": "shemnon"}, "path": "ethereum/eth/src/main/java/org/hyperledger/besu/ethereum/eth/manager/ForkIdManager.java", "diffHunk": "@@ -121,50 +73,40 @@ public static ForkId readFrom(final RLPInput in) {\n    * @return boolean (peer valid (true) or invalid (false))\n    */\n   boolean peerCheck(final ForkId forkId) {\n-    return forkIDCheckers.stream().anyMatch(checker -> checker.check(forkId));\n-  }\n-\n-  private static ForkIDChecker eip2124(\n-      final Blockchain blockchain,\n-      final long forkNext,\n-      final List<ForkId> forkAndHashList,\n-      final long highestKnownFork) {\n-    return forkId -> {\n-      if (forkId == null) {\n-        return true; // Another method must be used to validate (i.e. genesis hash)\n-      }\n-      // Run the fork checksum validation rule set:\n-      //   1. If local and remote FORK_CSUM matches, connect.\n-      //        The two nodes are in the same fork state currently. They might know\n-      //        of differing future forks, but that's not relevant until the fork\n-      //        triggers (might be postponed, nodes might be updated to match).\n-      //   2. If the remote FORK_CSUM is a subset of the local past forks and the\n-      //      remote FORK_NEXT matches with the locally following fork block number,\n-      //      connect.\n-      //        Remote node is currently syncing. It might eventually diverge from\n-      //        us, but at this current point in time we don't have enough information.\n-      //   3. If the remote FORK_CSUM is a superset of the local past forks and can\n-      //      be completed with locally known future forks, connect.\n-      //        Local node is currently syncing. It might eventually diverge from\n-      //        the remote, but at this current point in time we don't have enough\n-      //        information.\n-      //   4. Reject in all other cases.\n-      if (isHashKnown(forkId.getHash(), forkAndHashList)) {\n-        if (blockchain.getChainHeadBlockNumber() < forkNext) {\n-          return true;\n+    if (forkId == null) {\n+      return true; // Another method must be used to validate (i.e. genesis hash)\n+    }\n+    // Run the fork checksum validation rule set:\n+    //   1. If local and remote FORK_CSUM matches, connect.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY1NDM2Mg=="}, "originalCommit": {"oid": "28bcfa9120634bfb143475ade393c88612870b9b"}, "originalPosition": 142}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 899, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}