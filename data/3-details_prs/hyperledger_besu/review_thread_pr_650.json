{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4NDY2MTEx", "number": 650, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwMzozMzo0NVrODvYkAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwNDozMjowOFrODvZGjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMDEyMDk3OnYy", "diffSide": "RIGHT", "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/discovery/PeerDiscoveryAgent.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwMzozMzo0NVrOGBxqow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwNDowMDowMVrOGByBjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUxNTQ5MQ==", "bodyText": "nit: cryptoOps should be nodeKey in exception message.", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404515491", "createdAt": "2020-04-07T03:33:45Z", "author": {"login": "usmansaleem"}, "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/discovery/PeerDiscoveryAgent.java", "diffHunk": "@@ -84,13 +84,13 @@\n   protected final Subscribers<PeerBondedObserver> peerBondedObservers = Subscribers.create();\n \n   public PeerDiscoveryAgent(\n-      final SECP256K1.KeyPair keyPair,\n+      final NodeKey nodeKey,\n       final DiscoveryConfiguration config,\n       final PeerPermissions peerPermissions,\n       final NatService natService,\n       final MetricsSystem metricsSystem) {\n     this.metricsSystem = metricsSystem;\n-    checkArgument(keyPair != null, \"keypair cannot be null\");\n+    checkArgument(nodeKey != null, \"cryptoOps cannot be null\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33a932a9cf5aabe3a7522029832013ed94093e56"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUyMTM1OA==", "bodyText": "done", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404521358", "createdAt": "2020-04-07T04:00:01Z", "author": {"login": "rain-on"}, "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/discovery/PeerDiscoveryAgent.java", "diffHunk": "@@ -84,13 +84,13 @@\n   protected final Subscribers<PeerBondedObserver> peerBondedObservers = Subscribers.create();\n \n   public PeerDiscoveryAgent(\n-      final SECP256K1.KeyPair keyPair,\n+      final NodeKey nodeKey,\n       final DiscoveryConfiguration config,\n       final PeerPermissions peerPermissions,\n       final NatService natService,\n       final MetricsSystem metricsSystem) {\n     this.metricsSystem = metricsSystem;\n-    checkArgument(keyPair != null, \"keypair cannot be null\");\n+    checkArgument(nodeKey != null, \"cryptoOps cannot be null\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUxNTQ5MQ=="}, "originalCommit": {"oid": "33a932a9cf5aabe3a7522029832013ed94093e56"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMDEyMzc2OnYy", "diffSide": "RIGHT", "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/discovery/internal/PeerDiscoveryController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwMzozNToyM1rOGBxsPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwNDowMDozMlrOGByB5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUxNTkwMA==", "bodyText": "does the description meant to be NodeKey instead of KeyPair?", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404515900", "createdAt": "2020-04-07T03:35:23Z", "author": {"login": "usmansaleem"}, "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/discovery/internal/PeerDiscoveryController.java", "diffHunk": "@@ -692,7 +691,7 @@ public PeerDiscoveryController build() {\n     }\n \n     private void validate() {\n-      validateRequiredDependency(keypair, \"KeyPair\");\n+      validateRequiredDependency(nodeKey, \"KeyPair\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33a932a9cf5aabe3a7522029832013ed94093e56"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUyMTQ0NQ==", "bodyText": "nodeKey - oops.", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404521445", "createdAt": "2020-04-07T04:00:32Z", "author": {"login": "rain-on"}, "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/discovery/internal/PeerDiscoveryController.java", "diffHunk": "@@ -692,7 +691,7 @@ public PeerDiscoveryController build() {\n     }\n \n     private void validate() {\n-      validateRequiredDependency(keypair, \"KeyPair\");\n+      validateRequiredDependency(nodeKey, \"KeyPair\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUxNTkwMA=="}, "originalCommit": {"oid": "33a932a9cf5aabe3a7522029832013ed94093e56"}, "originalPosition": 74}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMDIwNDU0OnYy", "diffSide": "RIGHT", "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/network/DefaultP2PNetwork.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwNDoyODo1MlrOGBybpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwNDoyODo1MlrOGBybpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUyODAzNg==", "bodyText": "nit: Think we mention that is the node key so \"The node key through...", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404528036", "createdAt": "2020-04-07T04:28:52Z", "author": {"login": "jframe"}, "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/network/DefaultP2PNetwork.java", "diffHunk": "@@ -145,7 +146,7 @@\n    *\n    * @param localNode A representation of the local node\n    * @param peerDiscoveryAgent The agent responsible for discovering peers on the network.\n-   * @param keyPair This node's keypair.\n+   * @param nodeKey The key through which cryptographic operations can be performed", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47ad51d9b4a726fab9d41375922b9ebb8a254a1a"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMDIwOTQxOnYy", "diffSide": "RIGHT", "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/network/DefaultP2PNetwork.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwNDozMjowOFrOGByeqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwNDo0NDoxNVrOGByp8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUyODgwOQ==", "bodyText": "rlpx changes are coming in another PR?", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404528809", "createdAt": "2020-04-07T04:32:08Z", "author": {"login": "jframe"}, "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/network/DefaultP2PNetwork.java", "diffHunk": "@@ -442,7 +443,12 @@ private void validate() {\n     private PeerDiscoveryAgent createDiscoveryAgent() {\n \n       return new VertxPeerDiscoveryAgent(\n-          vertx, keyPair, config.getDiscovery(), peerPermissions, natService, metricsSystem);\n+          vertx,\n+          new BouncyCastleNodeKey(keyPair),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47ad51d9b4a726fab9d41375922b9ebb8a254a1a"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUzMTY5Ng==", "bodyText": "yes", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404531696", "createdAt": "2020-04-07T04:44:15Z", "author": {"login": "rain-on"}, "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/network/DefaultP2PNetwork.java", "diffHunk": "@@ -442,7 +443,12 @@ private void validate() {\n     private PeerDiscoveryAgent createDiscoveryAgent() {\n \n       return new VertxPeerDiscoveryAgent(\n-          vertx, keyPair, config.getDiscovery(), peerPermissions, natService, metricsSystem);\n+          vertx,\n+          new BouncyCastleNodeKey(keyPair),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUyODgwOQ=="}, "originalCommit": {"oid": "47ad51d9b4a726fab9d41375922b9ebb8a254a1a"}, "originalPosition": 52}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1028, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}