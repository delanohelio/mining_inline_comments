{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyODE5NTgy", "number": 1732, "title": "Add BlockHash to WorldStateArchive query", "bodyText": "Bonsai tries will require storing state by block hash rather than by\nstate root.  To accommodate both forest mode and bonsai mode all state\nqueries will pass in both the block hash and state root.  This also\npermits parallel forest/bonsai modes for private state with bonsai\npublic state.\nSigned-off-by: Danno Ferrin danno.ferrin@gmail.com\nChangelog\n\n I thought about the changelog and included a changelog update if required.", "createdAt": "2020-12-18T23:00:22Z", "url": "https://github.com/hyperledger/besu/pull/1732", "merged": true, "mergeCommit": {"oid": "fdc1c2d4bb7e02f82a7206ef177ad52db25b6b02"}, "closed": true, "closedAt": "2021-01-05T17:35:18Z", "author": {"login": "shemnon"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdngUVJgH2gAyNTQyODE5NTgyOjdkNmQzMWJkYzdjYzI5YzdjMTFhYWJjNTVhMTMzODcyN2I3YmMyOTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdtOPNvgH2gAyNTQyODE5NTgyOjEzNzUyYzdhMDFkYWYyNmFiZTFhOTMzMzA4Yjc3M2Y3Yzk5YWQ3Mzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7d6d31bdc7cc29c7c11aabc55a1338727b7bc295", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/7d6d31bdc7cc29c7c11aabc55a1338727b7bc295", "committedDate": "2020-12-18T22:59:27Z", "message": "Add BlockHash to WorldStateArchive query\n\nBonsai tries will require storing state by block hash rather than by\nstate root.  To accommodate both forest mode and bonsai mode all state\nqueries will pass in both the block hash and state root.  This also\npermits parallel forest/bonsai modes for private state with bonsai\npublic state.\n\nSigned-off-by: Danno Ferrin <danno.ferrin@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec828caa0fa6a09b78e7dc6676d89c9b4c887962", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/ec828caa0fa6a09b78e7dc6676d89c9b4c887962", "committedDate": "2020-12-18T23:05:38Z", "message": "bonsai archive\n\nSigned-off-by: Danno Ferrin <danno.ferrin@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32e47ad33eac6beb2ade7e39aeb38e3cd41374fd", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/32e47ad33eac6beb2ade7e39aeb38e3cd41374fd", "committedDate": "2020-12-18T23:11:50Z", "message": "extend to isWorldStateAvailable\n\nSigned-off-by: Danno Ferrin <danno.ferrin@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09ebcd84b10ed0274ce8699944a73e17dd2a2a41", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/09ebcd84b10ed0274ce8699944a73e17dd2a2a41", "committedDate": "2021-01-05T06:58:07Z", "message": "Merge branch 'master' into stateByBlockHash"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxNjE4NTY2", "url": "https://github.com/hyperledger/besu/pull/1732#pullrequestreview-561618566", "createdAt": "2021-01-05T09:05:58Z", "commit": {"oid": "09ebcd84b10ed0274ce8699944a73e17dd2a2a41"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwOTowNTo1OVrOIOPQ2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwOTowNjowOVrOIOPROg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTgwMTA0OA==", "bodyText": "missing final for the blockHash field", "url": "https://github.com/hyperledger/besu/pull/1732#discussion_r551801048", "createdAt": "2021-01-05T09:05:59Z", "author": {"login": "matkt"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/worldstate/WorldStateArchive.java", "diffHunk": "@@ -30,11 +30,11 @@\n public interface WorldStateArchive {\n   Hash EMPTY_ROOT_HASH = Hash.wrap(MerklePatriciaTrie.EMPTY_TRIE_NODE_HASH);\n \n-  Optional<WorldState> get(final Hash rootHash);\n+  Optional<WorldState> get(final Hash rootHash, Hash blockHash);\n \n-  boolean isWorldStateAvailable(final Hash rootHash);\n+  boolean isWorldStateAvailable(final Hash rootHash, Hash blockHash);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09ebcd84b10ed0274ce8699944a73e17dd2a2a41"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTgwMTA3OQ==", "bodyText": "missing final for the blockHash field", "url": "https://github.com/hyperledger/besu/pull/1732#discussion_r551801079", "createdAt": "2021-01-05T09:06:03Z", "author": {"login": "matkt"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/worldstate/WorldStateArchive.java", "diffHunk": "@@ -30,11 +30,11 @@\n public interface WorldStateArchive {\n   Hash EMPTY_ROOT_HASH = Hash.wrap(MerklePatriciaTrie.EMPTY_TRIE_NODE_HASH);\n \n-  Optional<WorldState> get(final Hash rootHash);\n+  Optional<WorldState> get(final Hash rootHash, Hash blockHash);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09ebcd84b10ed0274ce8699944a73e17dd2a2a41"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTgwMTE0Ng==", "bodyText": "missing final for the blockHash field", "url": "https://github.com/hyperledger/besu/pull/1732#discussion_r551801146", "createdAt": "2021-01-05T09:06:09Z", "author": {"login": "matkt"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/worldstate/WorldStateArchive.java", "diffHunk": "@@ -30,11 +30,11 @@\n public interface WorldStateArchive {\n   Hash EMPTY_ROOT_HASH = Hash.wrap(MerklePatriciaTrie.EMPTY_TRIE_NODE_HASH);\n \n-  Optional<WorldState> get(final Hash rootHash);\n+  Optional<WorldState> get(final Hash rootHash, Hash blockHash);\n \n-  boolean isWorldStateAvailable(final Hash rootHash);\n+  boolean isWorldStateAvailable(final Hash rootHash, Hash blockHash);\n \n-  Optional<MutableWorldState> getMutable(final Hash rootHash);\n+  Optional<MutableWorldState> getMutable(final Hash rootHash, Hash blockHash);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09ebcd84b10ed0274ce8699944a73e17dd2a2a41"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a38a175daf29ce03a5ea9c5a4eff767b409a1b1", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/3a38a175daf29ce03a5ea9c5a4eff767b409a1b1", "committedDate": "2021-01-05T17:11:11Z", "message": "Merge branch 'master' of github.com:hyperledger/besu into stateByBlockHash\n\nSigned-off-by: Danno Ferrin <danno.ferrin@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f549d6e14ca55776e0fdf24cfce0b034dca0dd84", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/f549d6e14ca55776e0fdf24cfce0b034dca0dd84", "committedDate": "2021-01-05T17:16:25Z", "message": "remove finals from interface\n\nSigned-off-by: Danno Ferrin <danno.ferrin@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ffb07e89cd4134027c0ef3e1090359c77be5948", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/3ffb07e89cd4134027c0ef3e1090359c77be5948", "committedDate": "2021-01-05T17:18:14Z", "message": "Merge branch 'master' into stateByBlockHash"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13752c7a01daf26abe1a933308b773f7c99ad738", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/13752c7a01daf26abe1a933308b773f7c99ad738", "committedDate": "2021-01-05T17:19:07Z", "message": "Merge remote-tracking branch 'origin/stateByBlockHash' into stateByBlockHash\nSigned-off-by: Danno Ferrin <danno.ferrin@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2020, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}