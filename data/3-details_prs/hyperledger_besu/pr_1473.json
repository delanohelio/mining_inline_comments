{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1OTY4OTE3", "number": 1473, "title": "Remove restriction about base fee on eth_sendRawTransaction", "bodyText": "PR description\nThe current implementation rejects transaction if the gas price is below the chain head base fee. We should remove this restriction on the RPC endpoint. If we implement a restriction it should be on the P2P layer rather than the RPC interface.\nFixed Issue(s)\n#1472\nSigned-off-by: Abdelhamid Bakhta abdelhamid.bakhta@consensys.net", "createdAt": "2020-10-19T13:30:45Z", "url": "https://github.com/hyperledger/besu/pull/1473", "merged": true, "mergeCommit": {"oid": "2374f3b704ac24191b6e615c19057474041c4fad"}, "closed": true, "closedAt": "2020-10-19T16:47:33Z", "author": {"login": "abdelhamidbakhta"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUENQMgH2gAyNTA1OTY4OTE3OjNiOTc4Nzk4NmM3YjZlZTljMzZiOTFmNDIxYThjOWUzMTNhNjc5ZWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUGwkWAH2gAyNTA1OTY4OTE3OmMwODQ1ZGI5N2UwNTM5NzVkZmQ3N2Q2NDdlMWFiNmYxNzVkZGVhYTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3b9787986c7b6ee9c36b91f421a8c9e313a679eb", "author": {"user": {"login": "abdelhamidbakhta", "name": "Abdelhamid Bakhta"}}, "url": "https://github.com/hyperledger/besu/commit/3b9787986c7b6ee9c36b91f421a8c9e313a679eb", "committedDate": "2020-10-19T13:29:49Z", "message": "Remove restriction about base fee on eth_sendRawTransaction\n\nSigned-off-by: Abdelhamid Bakhta <abdelhamid.bakhta@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfea4357c83bdf3f9995d8fd0fc2c8cd4f725363", "author": {"user": {"login": "abdelhamidbakhta", "name": "Abdelhamid Bakhta"}}, "url": "https://github.com/hyperledger/besu/commit/dfea4357c83bdf3f9995d8fd0fc2c8cd4f725363", "committedDate": "2020-10-19T14:53:08Z", "message": "Merge remote-tracking branch 'upstream/master' into 1472"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExODk4NDQx", "url": "https://github.com/hyperledger/besu/pull/1473#pullrequestreview-511898441", "createdAt": "2020-10-19T15:38:21Z", "commit": {"oid": "dfea4357c83bdf3f9995d8fd0fc2c8cd4f725363"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNTozODoyMVrOHkU43Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNTozODoyMVrOHkU43Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg1MzAyMQ==", "bodyText": "We can reject local frontier transactions whose gas price is too low? Why do we do that?", "url": "https://github.com/hyperledger/besu/pull/1473#discussion_r507853021", "createdAt": "2020-10-19T15:38:21Z", "author": {"login": "RatanRSur"}, "path": "ethereum/eth/src/main/java/org/hyperledger/besu/ethereum/eth/transactions/TransactionPool.java", "diffHunk": "@@ -160,14 +160,16 @@ public boolean addTransactionHash(final Hash transactionHash) {\n \n   public ValidationResult<TransactionInvalidReason> addLocalTransaction(\n       final Transaction transaction) {\n-    final Wei transactionGasPrice = minTransactionGasPrice(transaction);\n-    if (transactionGasPrice.compareTo(minTransactionGasPrice) < 0) {\n-      return ValidationResult.invalid(TransactionInvalidReason.GAS_PRICE_TOO_LOW);\n-    }\n-\n-    if (!configuration.getTxFeeCap().isZero()\n-        && transactionGasPrice.compareTo(configuration.getTxFeeCap()) > 0) {\n-      return ValidationResult.invalid(TransactionInvalidReason.TX_FEECAP_EXCEEDED);\n+    if (transaction.isFrontierTransaction()\n+        && (!ExperimentalEIPs.eip1559Enabled || this.eip1559.isEmpty())) {\n+      final Wei transactionGasPrice = minTransactionGasPrice(transaction);\n+      if (transactionGasPrice.compareTo(minTransactionGasPrice) < 0) {\n+        return ValidationResult.invalid(TransactionInvalidReason.GAS_PRICE_TOO_LOW);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfea4357c83bdf3f9995d8fd0fc2c8cd4f725363"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExOTAzOTI1", "url": "https://github.com/hyperledger/besu/pull/1473#pullrequestreview-511903925", "createdAt": "2020-10-19T15:43:57Z", "commit": {"oid": "dfea4357c83bdf3f9995d8fd0fc2c8cd4f725363"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0845db97e053975dfd77d647e1ab6f175ddeaa3", "author": {"user": {"login": "abdelhamidbakhta", "name": "Abdelhamid Bakhta"}}, "url": "https://github.com/hyperledger/besu/commit/c0845db97e053975dfd77d647e1ab6f175ddeaa3", "committedDate": "2020-10-19T16:28:12Z", "message": "Merge remote-tracking branch 'upstream/master' into 1472"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2213, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}