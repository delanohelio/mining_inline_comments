{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2NDA3NTM5", "number": 753, "title": "Added private filter acceptance tests", "bodyText": "PR description\n\u2022 Acceptance tests for private filters\n\u2022 Changing the type returned by PrivGetLogsTransaction (returning the list of logs now)", "createdAt": "2020-04-21T02:55:19Z", "url": "https://github.com/hyperledger/besu/pull/753", "merged": true, "mergeCommit": {"oid": "6f05bdccfccbe9b8faec2a80efac72ceb495aa0a"}, "closed": true, "closedAt": "2020-04-22T00:23:34Z", "author": {"login": "lucassaldanha"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZupZHAFqTM5NzAzMTUwMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZ8TWtAH2gAyNDA2NDA3NTM5OjgyNGFkZWViYWI0MjAzM2MzMDBlMjEyYzg3MWQzY2QxNDRkYTY4OGI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MDMxNTAz", "url": "https://github.com/hyperledger/besu/pull/753#pullrequestreview-397031503", "createdAt": "2020-04-21T06:46:38Z", "commit": {"oid": "6db71f1fcfc75a238d4179db79728a20528c30c9"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNjo0NjozOFrOGI1Sjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNjo0OTowMVrOGI1Xmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkxNDg5NQ==", "bodyText": "We should think about this again. Is it OK that we are NOT returning all the information that we have in the PrivateTransactionReceipts? E.g. the logs do not contain the privateFrom and privateFor/privacyGroupID.\nAND I'm not sure about the TransactionIndex that is contained in our results/logs, because they are not the index of the PMT, but they contain 0 for the first PMT of the privacy group in the block, 1 for the second PMT and so on.", "url": "https://github.com/hyperledger/besu/pull/753#discussion_r411914895", "createdAt": "2020-04-21T06:46:38Z", "author": {"login": "pinges"}, "path": "acceptance-tests/dsl/src/main/java/org/hyperledger/besu/tests/acceptance/dsl/transaction/privacy/PrivacyRequestFactory.java", "diffHunk": "@@ -395,6 +397,40 @@ public PrivxCreatePrivacyGroupResponse privxCreatePrivacyGroup(\n         \"priv_getLogs\", Arrays.asList(privacyGroupId, filterParameter), web3jService, EthLog.class);\n   }\n \n+  public Request<?, EthFilter> privNewFilter(\n+      final String privacyGroupId, final LogFilterJsonParameter filterParameter) {\n+    return new Request<>(\n+        \"priv_newFilter\",\n+        Arrays.asList(privacyGroupId, filterParameter),\n+        web3jService,\n+        EthFilter.class);\n+  }\n+\n+  public Request<?, EthUninstallFilter> privUninstallFilter(\n+      final String privacyGroupId, final String filterId) {\n+    return new Request<>(\n+        \"priv_uninstallFilter\",\n+        Arrays.asList(privacyGroupId, filterId),\n+        web3jService,\n+        EthUninstallFilter.class);\n+  }\n+\n+  public Request<?, EthLog> privGetFilterLogs(final String privacyGroupId, final String filterId) {\n+\n+    return new Request<>(\n+        \"priv_getFilterLogs\", Arrays.asList(privacyGroupId, filterId), web3jService, EthLog.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6db71f1fcfc75a238d4179db79728a20528c30c9"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkxNTI0NQ==", "bodyText": "s.a.", "url": "https://github.com/hyperledger/besu/pull/753#discussion_r411915245", "createdAt": "2020-04-21T06:47:20Z", "author": {"login": "pinges"}, "path": "acceptance-tests/dsl/src/main/java/org/hyperledger/besu/tests/acceptance/dsl/transaction/privacy/PrivacyRequestFactory.java", "diffHunk": "@@ -395,6 +397,40 @@ public PrivxCreatePrivacyGroupResponse privxCreatePrivacyGroup(\n         \"priv_getLogs\", Arrays.asList(privacyGroupId, filterParameter), web3jService, EthLog.class);\n   }\n \n+  public Request<?, EthFilter> privNewFilter(\n+      final String privacyGroupId, final LogFilterJsonParameter filterParameter) {\n+    return new Request<>(\n+        \"priv_newFilter\",\n+        Arrays.asList(privacyGroupId, filterParameter),\n+        web3jService,\n+        EthFilter.class);\n+  }\n+\n+  public Request<?, EthUninstallFilter> privUninstallFilter(\n+      final String privacyGroupId, final String filterId) {\n+    return new Request<>(\n+        \"priv_uninstallFilter\",\n+        Arrays.asList(privacyGroupId, filterId),\n+        web3jService,\n+        EthUninstallFilter.class);\n+  }\n+\n+  public Request<?, EthLog> privGetFilterLogs(final String privacyGroupId, final String filterId) {\n+\n+    return new Request<>(\n+        \"priv_getFilterLogs\", Arrays.asList(privacyGroupId, filterId), web3jService, EthLog.class);\n+  }\n+\n+  public Request<?, EthLog> privGetFilterChanges(\n+      final String privacyGroupId, final String filterId) {\n+\n+    return new Request<>(\n+        \"priv_getFilterChanges\",\n+        Arrays.asList(privacyGroupId, filterId),\n+        web3jService,\n+        EthLog.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6db71f1fcfc75a238d4179db79728a20528c30c9"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkxNTc3MQ==", "bodyText": "s.a.", "url": "https://github.com/hyperledger/besu/pull/753#discussion_r411915771", "createdAt": "2020-04-21T06:48:20Z", "author": {"login": "pinges"}, "path": "acceptance-tests/dsl/src/main/java/org/hyperledger/besu/tests/acceptance/dsl/transaction/privacy/filter/PrivGetFilterChangesTransaction.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * Copyright ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ *\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+package org.hyperledger.besu.tests.acceptance.dsl.transaction.privacy.filter;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import org.hyperledger.besu.tests.acceptance.dsl.transaction.NodeRequests;\n+import org.hyperledger.besu.tests.acceptance.dsl.transaction.Transaction;\n+\n+import java.io.IOException;\n+import java.util.List;\n+\n+import org.web3j.protocol.core.methods.response.EthLog;\n+import org.web3j.protocol.core.methods.response.EthLog.LogResult;\n+\n+@SuppressWarnings(\"rawtypes\")\n+public class PrivGetFilterChangesTransaction implements Transaction<List<LogResult>> {\n+\n+  private final String privacyGroupId;\n+  private final String filterId;\n+\n+  public PrivGetFilterChangesTransaction(final String privacyGroupId, final String filterId) {\n+    this.privacyGroupId = privacyGroupId;\n+    this.filterId = filterId;\n+  }\n+\n+  @Override\n+  public List<LogResult> execute(final NodeRequests node) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6db71f1fcfc75a238d4179db79728a20528c30c9"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkxNjE4Nw==", "bodyText": "s.a.", "url": "https://github.com/hyperledger/besu/pull/753#discussion_r411916187", "createdAt": "2020-04-21T06:49:01Z", "author": {"login": "pinges"}, "path": "acceptance-tests/dsl/src/main/java/org/hyperledger/besu/tests/acceptance/dsl/transaction/privacy/filter/PrivGetFilterLogsTransaction.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * Copyright ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ *\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+package org.hyperledger.besu.tests.acceptance.dsl.transaction.privacy.filter;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import org.hyperledger.besu.tests.acceptance.dsl.transaction.NodeRequests;\n+import org.hyperledger.besu.tests.acceptance.dsl.transaction.Transaction;\n+\n+import java.io.IOException;\n+import java.util.List;\n+\n+import org.web3j.protocol.core.methods.response.EthLog;\n+import org.web3j.protocol.core.methods.response.EthLog.LogResult;\n+\n+@SuppressWarnings(\"rawtypes\")\n+public class PrivGetFilterLogsTransaction implements Transaction<List<LogResult>> {\n+\n+  private final String privacyGroupId;\n+  private final String filterId;\n+\n+  public PrivGetFilterLogsTransaction(final String privacyGroupId, final String filterId) {\n+    this.privacyGroupId = privacyGroupId;\n+    this.filterId = filterId;\n+  }\n+\n+  @Override\n+  public List<LogResult> execute(final NodeRequests node) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6db71f1fcfc75a238d4179db79728a20528c30c9"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34aa069c65aee35b9addce5c7e6e46bbc3be593e", "author": {"user": {"login": "lucassaldanha", "name": "Lucas Saldanha"}}, "url": "https://github.com/hyperledger/besu/commit/34aa069c65aee35b9addce5c7e6e46bbc3be593e", "committedDate": "2020-04-21T09:53:08Z", "message": "Added private filter acceptance tests\n\nSigned-off-by: Lucas Saldanha <lucas.saldanha@consensys.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6db71f1fcfc75a238d4179db79728a20528c30c9", "author": {"user": {"login": "lucassaldanha", "name": "Lucas Saldanha"}}, "url": "https://github.com/hyperledger/besu/commit/6db71f1fcfc75a238d4179db79728a20528c30c9", "committedDate": "2020-04-21T02:53:17Z", "message": "Added private filter acceptance tests\n\nSigned-off-by: Lucas Saldanha <lucas.saldanha@consensys.net>"}, "afterCommit": {"oid": "34aa069c65aee35b9addce5c7e6e46bbc3be593e", "author": {"user": {"login": "lucassaldanha", "name": "Lucas Saldanha"}}, "url": "https://github.com/hyperledger/besu/commit/34aa069c65aee35b9addce5c7e6e46bbc3be593e", "committedDate": "2020-04-21T09:53:08Z", "message": "Added private filter acceptance tests\n\nSigned-off-by: Lucas Saldanha <lucas.saldanha@consensys.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NzQ0ODIw", "url": "https://github.com/hyperledger/besu/pull/753#pullrequestreview-397744820", "createdAt": "2020-04-21T23:29:26Z", "commit": {"oid": "34aa069c65aee35b9addce5c7e6e46bbc3be593e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "824adeebab42033c300e212c871d3cd144da688b", "author": {"user": {"login": "pinges", "name": "Stefan Pingel"}}, "url": "https://github.com/hyperledger/besu/commit/824adeebab42033c300e212c871d3cd144da688b", "committedDate": "2020-04-21T23:29:38Z", "message": "Merge branch 'master' into priv_filters_at"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1579, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}