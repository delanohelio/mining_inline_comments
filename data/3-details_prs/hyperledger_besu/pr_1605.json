{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2OTc3NzMy", "number": 1605, "title": "transaction RLP encode/decode handle GoQuorum private tx", "bodyText": "first pass of modifying transaction RLP encode/decode to handle GoQuorum private tx value\nPotentially we want to subclass the Transaction instead of modifying it directly. Needs tests added also.\nSigned-off-by: Sally MacFarlane sally.macfarlane@consensys.net\nChangelog\n\n I thought about the changelog and included a changelog update if required.", "createdAt": "2020-11-25T02:12:27Z", "url": "https://github.com/hyperledger/besu/pull/1605", "merged": true, "mergeCommit": {"oid": "67efaa914519271f1c1ddc9679bfb5d51b4f8515"}, "closed": true, "closedAt": "2020-12-02T02:10:20Z", "author": {"login": "macfarla"}, "timelineItems": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdf0p_cgH2gAyNTI2OTc3NzMyOjgyY2JjY2Y0NzgxODc5YWQ1MzRhZTRkM2YwN2IyOTRhNWY1ODMwMGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiEWERgH2gAyNTI2OTc3NzMyOjM4NzcyYTkyMzVkNDBlZmNmYmIyNmJkZTFjNmQ2MTM4NzQwNjAwNmI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "82cbccf4781879ad534ae4d3f07b294a5f58300c", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/82cbccf4781879ad534ae4d3f07b294a5f58300c", "committedDate": "2020-11-25T02:09:49Z", "message": "first pass of modifying transaction RLP encode/decode to handle GoQuorum private tx value\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe62f5fa27a760453290faa2717d6ff7cd9fc623", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/fe62f5fa27a760453290faa2717d6ff7cd9fc623", "committedDate": "2020-11-25T02:16:59Z", "message": "removed import\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1e1337ff010c34c14aa0fc5d7cdfa530b093ae1", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/c1e1337ff010c34c14aa0fc5d7cdfa530b093ae1", "committedDate": "2020-11-25T02:22:30Z", "message": "removed debug\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8d3ea003780fa0da645342be6ae1680ce9f22d8", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/e8d3ea003780fa0da645342be6ae1680ce9f22d8", "committedDate": "2020-11-25T02:38:28Z", "message": "hack to make test pass\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a686b53461e99937420e9d7a758fab2e76edef3f", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/a686b53461e99937420e9d7a758fab2e76edef3f", "committedDate": "2020-11-25T02:38:36Z", "message": "javadoc\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e73d782eb2bc968aaa5668f74d3aa217a53a0ed1", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/e73d782eb2bc968aaa5668f74d3aa217a53a0ed1", "committedDate": "2020-11-25T02:40:34Z", "message": "formatting\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd9b79996fb0c1a5c5fad44f06d7d3ff9cc1455e", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/bd9b79996fb0c1a5c5fad44f06d7d3ff9cc1455e", "committedDate": "2020-11-25T03:37:49Z", "message": "formatting\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45b4bebf38d17e773e0137131366f290327652bb", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/45b4bebf38d17e773e0137131366f290327652bb", "committedDate": "2020-11-25T03:44:33Z", "message": "formatting\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4OTM1Mjcw", "url": "https://github.com/hyperledger/besu/pull/1605#pullrequestreview-538935270", "createdAt": "2020-11-26T01:24:51Z", "commit": {"oid": "45b4bebf38d17e773e0137131366f290327652bb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwMToyNDo1MVrOH6IrFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwMToyNDo1MVrOH6IrFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDcyMTU1OQ==", "bodyText": "Is it because of the privateFrom/privateFor?", "url": "https://github.com/hyperledger/besu/pull/1605#discussion_r530721559", "createdAt": "2020-11-26T01:24:51Z", "author": {"login": "lucassaldanha"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/core/encoding/TransactionRLPDecoder.java", "diffHunk": "@@ -47,6 +49,19 @@ static Transaction decodeTransaction(final RLPInput input) {\n   static TransactionRLPDecoder frontierDecoder() {\n     return input -> {\n       input.enterList();\n+      // TODO clean this up - not sure why but the GoQuorum private tx has extra nesting", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45b4bebf38d17e773e0137131366f290327652bb"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d83ca91208e6fc82edaa87ed6840029a2d4176bf", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/d83ca91208e6fc82edaa87ed6840029a2d4176bf", "committedDate": "2020-11-26T02:23:17Z", "message": "added static flag to be read by TransactionRLPDecoder so that we can still allow chainId=1\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "349e9ce85eaaccd5fe3dbbbd9cfbdbe7a68c08fa", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/349e9ce85eaaccd5fe3dbbbd9cfbdbe7a68c08fa", "committedDate": "2020-11-26T02:23:37Z", "message": "Merge branch 'master' of https://github.com/hyperledger/besu into quorum-rlp-decoder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b510438453f367e51c843abc4fef8c3c2af6256", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/2b510438453f367e51c843abc4fef8c3c2af6256", "committedDate": "2020-11-26T03:49:48Z", "message": "moved v to Transaction\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e715569d2a5190bdd32bc26342eebd71d4cdeb34", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/e715569d2a5190bdd32bc26342eebd71d4cdeb34", "committedDate": "2020-11-26T03:53:35Z", "message": "moved v to Transaction\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b790421e25b902cc48f78b5ed901dd636fad6c12", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/b790421e25b902cc48f78b5ed901dd636fad6c12", "committedDate": "2020-11-26T04:05:39Z", "message": "javadoc\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1844277b81bc7ba078c40005832e05ad7b498c7c", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/1844277b81bc7ba078c40005832e05ad7b498c7c", "committedDate": "2020-11-27T02:43:06Z", "message": "Merge branch 'master' of https://github.com/hyperledger/besu into quorum-rlp-decoder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9ccf0ab29b4bdf747ede4e1feac1c797b0a20fc", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/e9ccf0ab29b4bdf747ede4e1feac1c797b0a20fc", "committedDate": "2020-11-29T23:50:22Z", "message": "Merge branch 'master' of https://github.com/hyperledger/besu into quorum-rlp-decoder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "176cdfaad353a4741bdf790beafba149645af3ea", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/176cdfaad353a4741bdf790beafba149645af3ea", "committedDate": "2020-11-30T03:23:35Z", "message": "javadoc\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ba8b0ea6b1f9547b0db7de85558ab59c246c96d", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/6ba8b0ea6b1f9547b0db7de85558ab59c246c96d", "committedDate": "2020-11-30T03:26:12Z", "message": "fix RLP input in GoQuorum test to not have extra list nesting\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a34b3b501974f5c465a427e2c8e57b3a8ae4216", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/7a34b3b501974f5c465a427e2c8e57b3a8ae4216", "committedDate": "2020-11-30T03:34:34Z", "message": "undoing unnecessary changes\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "444dac514eb1ce3074093ecdea7d9ca4e4978f8b", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/444dac514eb1ce3074093ecdea7d9ca4e4978f8b", "committedDate": "2020-11-30T23:55:52Z", "message": "Merge branch 'master' of https://github.com/hyperledger/besu into quorum-rlp-decoder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d3898886b436966e670064696bb262e6f5c4ef3", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/4d3898886b436966e670064696bb262e6f5c4ef3", "committedDate": "2020-12-01T01:24:35Z", "message": "comments\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef4f748919bac66499581dae5494132f7506de28", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/ef4f748919bac66499581dae5494132f7506de28", "committedDate": "2020-12-01T01:28:35Z", "message": "comments\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxNDIzNjQ2", "url": "https://github.com/hyperledger/besu/pull/1605#pullrequestreview-541423646", "createdAt": "2020-12-01T01:31:32Z", "commit": {"oid": "ef4f748919bac66499581dae5494132f7506de28"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwMTozMTozMlrOH8Ulpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwMTozODo1MFrOH8Uuxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAxMzkyNg==", "bodyText": "Do we need to enforce that only one of these is set?", "url": "https://github.com/hyperledger/besu/pull/1605#discussion_r533013926", "createdAt": "2020-12-01T01:31:32Z", "author": {"login": "RatanRSur"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/core/Transaction.java", "diffHunk": "@@ -121,7 +129,8 @@ public Transaction(\n       final SECP256K1.Signature signature,\n       final Bytes payload,\n       final Address sender,\n-      final Optional<BigInteger> chainId) {\n+      final Optional<BigInteger> chainId,\n+      final Optional<BigInteger> v) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef4f748919bac66499581dae5494132f7506de28"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAxNjI2Mw==", "bodyText": "Is MAX supposed to be smaller than MIN here?", "url": "https://github.com/hyperledger/besu/pull/1605#discussion_r533016263", "createdAt": "2020-12-01T01:38:50Z", "author": {"login": "RatanRSur"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/core/Transaction.java", "diffHunk": "@@ -45,6 +45,9 @@\n \n   public static final BigInteger REPLAY_PROTECTED_V_BASE = BigInteger.valueOf(35);\n \n+  public static final BigInteger GO_QUORUM_PRIVATE_TRANSACTION_V_VALUE_MAX = BigInteger.valueOf(37);\n+  public static final BigInteger GO_QUORUM_PRIVATE_TRANSACTION_V_VALUE_MIN = BigInteger.valueOf(38);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef4f748919bac66499581dae5494132f7506de28"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fde472c9fea7ecb4d31762c60e7f84a748307edc", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/fde472c9fea7ecb4d31762c60e7f84a748307edc", "committedDate": "2020-12-01T02:17:09Z", "message": "ensure chainId and v not both provided and add v to hashCode\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eec0e6835033d407a2382dc128071e98d85ee935", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/eec0e6835033d407a2382dc128071e98d85ee935", "committedDate": "2020-12-01T02:38:26Z", "message": "max/min\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b21e5ac2bc2eb38d71476afcba4258fd6bf69be", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/0b21e5ac2bc2eb38d71476afcba4258fd6bf69be", "committedDate": "2020-12-01T02:47:58Z", "message": "string format\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxOTAzNDE1", "url": "https://github.com/hyperledger/besu/pull/1605#pullrequestreview-541903415", "createdAt": "2020-12-01T13:41:45Z", "commit": {"oid": "0b21e5ac2bc2eb38d71476afcba4258fd6bf69be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56048f0b1210ff2919926f0ce1eb96339123cc67", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/56048f0b1210ff2919926f0ce1eb96339123cc67", "committedDate": "2020-12-01T18:48:29Z", "message": "fixed recId calculation\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d25858b44b06a18b82fe190c60de633da5267c79", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/d25858b44b06a18b82fe190c60de633da5267c79", "committedDate": "2020-12-01T18:49:38Z", "message": "removed dupe\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "616d264d5513e671dfc41a464a39cc11c62810c9", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/616d264d5513e671dfc41a464a39cc11c62810c9", "committedDate": "2020-12-01T18:50:29Z", "message": "Merge branch 'master' of https://github.com/hyperledger/besu into quorum-rlp-decoder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf8620db11d9f7315f093a4e91ff6346d493acbb", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/cf8620db11d9f7315f093a4e91ff6346d493acbb", "committedDate": "2020-12-01T22:46:07Z", "message": "Merge branch 'master' of https://github.com/hyperledger/besu into quorum-rlp-decoder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38772a9235d40efcfbb26bde1c6d61387406006b", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/hyperledger/besu/commit/38772a9235d40efcfbb26bde1c6d61387406006b", "committedDate": "2020-12-02T01:34:23Z", "message": "Merge branch 'master' of https://github.com/hyperledger/besu into quorum-rlp-decoder"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2125, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}