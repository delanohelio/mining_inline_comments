{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMDAxMDU2", "number": 805, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwODowNzowOVrOD379Pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwODoxODowNFrOD38Lig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5OTgwNjA3OnYy", "diffSide": "RIGHT", "path": "besu/src/test/resources/everything_config.toml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwODowNzowOVrOGOeV8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwODo0Nzo0NFrOGOfxlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzgzMDM4Ng==", "bodyText": "the ratio should not be 0.8 in this conf?", "url": "https://github.com/hyperledger/besu/pull/805#discussion_r417830386", "createdAt": "2020-04-30T08:07:09Z", "author": {"login": "matkt"}, "path": "besu/src/test/resources/everything_config.toml", "diffHunk": "@@ -101,6 +101,7 @@ miner-stratum-enabled=false\n miner-coinbase=\"0x0000000000000000000000000000000000000002\"\n miner-extra-data=\"0x444F4E27542050414E4943202120484F444C2C20484F444C2C20484F444C2021\"\n min-gas-price=1\n+min-block-occupancy-ratio=0.7", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37823ba33b6a1a8c31c27aae8270c06f20c36e66"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg1MTUwMQ==", "bodyText": "Usually we don't use the default value so that we are sure the config file is correctly loaded", "url": "https://github.com/hyperledger/besu/pull/805#discussion_r417851501", "createdAt": "2020-04-30T08:43:50Z", "author": {"login": "abdelhamidbakhta"}, "path": "besu/src/test/resources/everything_config.toml", "diffHunk": "@@ -101,6 +101,7 @@ miner-stratum-enabled=false\n miner-coinbase=\"0x0000000000000000000000000000000000000002\"\n miner-extra-data=\"0x444F4E27542050414E4943202120484F444C2C20484F444C2C20484F444C2021\"\n min-gas-price=1\n+min-block-occupancy-ratio=0.7", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzgzMDM4Ng=="}, "originalCommit": {"oid": "37823ba33b6a1a8c31c27aae8270c06f20c36e66"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg1Mzg0NA==", "bodyText": "Ok", "url": "https://github.com/hyperledger/besu/pull/805#discussion_r417853844", "createdAt": "2020-04-30T08:47:44Z", "author": {"login": "matkt"}, "path": "besu/src/test/resources/everything_config.toml", "diffHunk": "@@ -101,6 +101,7 @@ miner-stratum-enabled=false\n miner-coinbase=\"0x0000000000000000000000000000000000000002\"\n miner-extra-data=\"0x444F4E27542050414E4943202120484F444C2C20484F444C2C20484F444C2021\"\n min-gas-price=1\n+min-block-occupancy-ratio=0.7", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzgzMDM4Ng=="}, "originalCommit": {"oid": "37823ba33b6a1a8c31c27aae8270c06f20c36e66"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5OTgxODAxOnYy", "diffSide": "RIGHT", "path": "ethereum/blockcreation/src/main/java/org/hyperledger/besu/ethereum/blockcreation/AbstractBlockCreator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwODoxMDo1NlrOGOedcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwODo0NToxN1rOGOfr7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzgzMjMwNQ==", "bodyText": "How can we be sure that this block + 1 will always exist?", "url": "https://github.com/hyperledger/besu/pull/805#discussion_r417832305", "createdAt": "2020-04-30T08:10:56Z", "author": {"login": "matkt"}, "path": "ethereum/blockcreation/src/main/java/org/hyperledger/besu/ethereum/blockcreation/AbstractBlockCreator.java", "diffHunk": "@@ -92,8 +96,10 @@ public AbstractBlockCreator(\n     this.protocolSchedule = protocolSchedule;\n     this.gasLimitCalculator = gasLimitCalculator;\n     this.minTransactionGasPrice = minTransactionGasPrice;\n+    this.minBlockOccupancyRatio = minBlockOccupancyRatio;\n     this.miningBeneficiary = miningBeneficiary;\n     this.parentHeader = parentHeader;\n+    this.protocolSpec = protocolSchedule.getByBlockNumber(parentHeader.getNumber() + 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37823ba33b6a1a8c31c27aae8270c06f20c36e66"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg1MjM5Nw==", "bodyText": "Block + 1 does not have to exist. You can retrieve any procotol spec for any blocks whether or not they exist", "url": "https://github.com/hyperledger/besu/pull/805#discussion_r417852397", "createdAt": "2020-04-30T08:45:17Z", "author": {"login": "abdelhamidbakhta"}, "path": "ethereum/blockcreation/src/main/java/org/hyperledger/besu/ethereum/blockcreation/AbstractBlockCreator.java", "diffHunk": "@@ -92,8 +96,10 @@ public AbstractBlockCreator(\n     this.protocolSchedule = protocolSchedule;\n     this.gasLimitCalculator = gasLimitCalculator;\n     this.minTransactionGasPrice = minTransactionGasPrice;\n+    this.minBlockOccupancyRatio = minBlockOccupancyRatio;\n     this.miningBeneficiary = miningBeneficiary;\n     this.parentHeader = parentHeader;\n+    this.protocolSpec = protocolSchedule.getByBlockNumber(parentHeader.getNumber() + 1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzgzMjMwNQ=="}, "originalCommit": {"oid": "37823ba33b6a1a8c31c27aae8270c06f20c36e66"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5OTg0MjY2OnYy", "diffSide": "RIGHT", "path": "ethereum/retesteth/src/main/java/org/hyperledger/besu/ethereum/retesteth/methods/TestMineBlocks.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwODoxODowNFrOGOetKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwODo0NjowMFrOGOftng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzgzNjMzMA==", "bodyText": "Is the ratio at 0 normal in this case?", "url": "https://github.com/hyperledger/besu/pull/805#discussion_r417836330", "createdAt": "2020-04-30T08:18:04Z", "author": {"login": "matkt"}, "path": "ethereum/retesteth/src/main/java/org/hyperledger/besu/ethereum/retesteth/methods/TestMineBlocks.java", "diffHunk": "@@ -72,6 +72,7 @@ private boolean mineNewBlock() {\n             Functions.identity(),\n             context.getEthHashSolver(),\n             Wei.ZERO,\n+            0.0,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37823ba33b6a1a8c31c27aae8270c06f20c36e66"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg1MjgzMA==", "bodyText": "Yeah all parameters are neutral for this test. Setting it to 0 avoids some unexpected behaviour here", "url": "https://github.com/hyperledger/besu/pull/805#discussion_r417852830", "createdAt": "2020-04-30T08:46:00Z", "author": {"login": "abdelhamidbakhta"}, "path": "ethereum/retesteth/src/main/java/org/hyperledger/besu/ethereum/retesteth/methods/TestMineBlocks.java", "diffHunk": "@@ -72,6 +72,7 @@ private boolean mineNewBlock() {\n             Functions.identity(),\n             context.getEthHashSolver(),\n             Wei.ZERO,\n+            0.0,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzgzNjMzMA=="}, "originalCommit": {"oid": "37823ba33b6a1a8c31c27aae8270c06f20c36e66"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 960, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}