{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzMzE1NTg4", "number": 569, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwNjo1NzoxNFrODwRzGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwNjo1NzoxNFrODwRzGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxOTQ5ODUwOnYy", "diffSide": "RIGHT", "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/mainnet/MainnetBlockImporter.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwNjo1NzoxNFrOGDL4uQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMzozMjoyNFrOGFkj3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTk5MzY1Nw==", "bodyText": "Current behaviour for Mainnet block importer being persisting the state on every block imported.\nAny thoughts on the potential impact this PR might have? ...is the state still persisted on each block imported (perhaps done elsewhere), or is the persist performed less frequently, if so at what cadence?", "url": "https://github.com/hyperledger/besu/pull/569#discussion_r405993657", "createdAt": "2020-04-09T06:57:14Z", "author": {"login": "CjHare"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/mainnet/MainnetBlockImporter.java", "diffHunk": "@@ -46,20 +45,13 @@ public synchronized boolean importBlock(\n         blockValidator.validateAndProcessBlock(\n             context, block, headerValidationMode, ommerValidationMode);\n \n-    outputs.ifPresent(processingOutputs -> persistState(processingOutputs, block, context));\n+    outputs.ifPresent(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d65e06d0a43a4f9db574381ae7d0a3fa65dc1d7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3MTYzNQ==", "bodyText": "As I read it, it still does persist on every block, here:\n\n  \n    \n      besu/ethereum/core/src/main/java/org/hyperledger/besu/ethereum/mainnet/AbstractBlockProcessor.java\n    \n    \n         Line 165\n      in\n      9fa9c85\n    \n    \n    \n    \n\n        \n          \n           worldState.persist(); \n        \n    \n  \n\n\nI'm also going to manually test this for sure since it's such a core change. Just haven't gotten around to it.", "url": "https://github.com/hyperledger/besu/pull/569#discussion_r408171635", "createdAt": "2020-04-14T14:16:37Z", "author": {"login": "RatanRSur"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/mainnet/MainnetBlockImporter.java", "diffHunk": "@@ -46,20 +45,13 @@ public synchronized boolean importBlock(\n         blockValidator.validateAndProcessBlock(\n             context, block, headerValidationMode, ommerValidationMode);\n \n-    outputs.ifPresent(processingOutputs -> persistState(processingOutputs, block, context));\n+    outputs.ifPresent(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTk5MzY1Nw=="}, "originalCommit": {"oid": "5d65e06d0a43a4f9db574381ae7d0a3fa65dc1d7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ5NTA2OA==", "bodyText": "Sounds like a plan \ud83d\udc4d", "url": "https://github.com/hyperledger/besu/pull/569#discussion_r408495068", "createdAt": "2020-04-14T23:32:24Z", "author": {"login": "CjHare"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/mainnet/MainnetBlockImporter.java", "diffHunk": "@@ -46,20 +45,13 @@ public synchronized boolean importBlock(\n         blockValidator.validateAndProcessBlock(\n             context, block, headerValidationMode, ommerValidationMode);\n \n-    outputs.ifPresent(processingOutputs -> persistState(processingOutputs, block, context));\n+    outputs.ifPresent(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTk5MzY1Nw=="}, "originalCommit": {"oid": "5d65e06d0a43a4f9db574381ae7d0a3fa65dc1d7"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1162, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}