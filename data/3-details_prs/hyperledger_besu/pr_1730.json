{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyMTU3OTA1", "number": 1730, "title": "Add revert reason to eth_estimateGas RPC call error", "bodyText": "PR description\nHere I added revert reason to the data field of eth_estimateGas rpc error.\nThe error looks as shown here:\n{\n    \"code\": -32000,\n    \"message\": \"Execution reverted\",\n    \"data\": \"0x08c379a0...\"\n}\n\nFixed Issue(s)\nfixes #1207\nChangelog\n\n I thought about the changelog and included a changelog update if required.", "createdAt": "2020-12-17T22:00:47Z", "url": "https://github.com/hyperledger/besu/pull/1730", "merged": true, "mergeCommit": {"oid": "0905d1b23388d3c4384d1364c7c916598c88412a"}, "closed": true, "closedAt": "2020-12-18T21:05:19Z", "author": {"login": "VladLupashevskyi"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnK7pcgBqjQxMjcyNDI3ODY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdndWhsAFqTU1NTc2MjI5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c0b437afb045020282a1cbfbc03f1b4c5fad8785", "author": {"user": {"login": "VladLupashevskyi", "name": "Vladyslav Lupashevskyi"}}, "url": "https://github.com/hyperledger/besu/commit/c0b437afb045020282a1cbfbc03f1b4c5fad8785", "committedDate": "2020-12-17T21:52:53Z", "message": "Add revert reason to eth_estimateGas RPC call error"}, "afterCommit": {"oid": "c34d55a4ef279057656cbddb0d37530bce708a86", "author": {"user": {"login": "VladLupashevskyi", "name": "Vladyslav Lupashevskyi"}}, "url": "https://github.com/hyperledger/besu/commit/c34d55a4ef279057656cbddb0d37530bce708a86", "committedDate": "2020-12-17T22:01:43Z", "message": "Add revert reason to eth_estimateGas RPC call error\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c10497805a5db45895b2334ebd826d7bf64e4c35", "author": {"user": {"login": "VladLupashevskyi", "name": "Vladyslav Lupashevskyi"}}, "url": "https://github.com/hyperledger/besu/commit/c10497805a5db45895b2334ebd826d7bf64e4c35", "committedDate": "2020-12-17T22:09:19Z", "message": "Update CHANGELOG.md\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>"}, "afterCommit": {"oid": "6558049b0417e5a26f440cdb2358070282742053", "author": {"user": {"login": "VladLupashevskyi", "name": "Vladyslav Lupashevskyi"}}, "url": "https://github.com/hyperledger/besu/commit/6558049b0417e5a26f440cdb2358070282742053", "committedDate": "2020-12-17T22:15:11Z", "message": "Update CHANGELOG.md\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6558049b0417e5a26f440cdb2358070282742053", "author": {"user": {"login": "VladLupashevskyi", "name": "Vladyslav Lupashevskyi"}}, "url": "https://github.com/hyperledger/besu/commit/6558049b0417e5a26f440cdb2358070282742053", "committedDate": "2020-12-17T22:15:11Z", "message": "Update CHANGELOG.md\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>"}, "afterCommit": {"oid": "e061bf00c51750c0ed5c3639d3c7510419906f90", "author": {"user": {"login": "VladLupashevskyi", "name": "Vladyslav Lupashevskyi"}}, "url": "https://github.com/hyperledger/besu/commit/e061bf00c51750c0ed5c3639d3c7510419906f90", "committedDate": "2020-12-18T00:22:10Z", "message": "Update CHANGELOG.md\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MjA3NjU0", "url": "https://github.com/hyperledger/besu/pull/1730#pullrequestreview-555207654", "createdAt": "2020-12-18T06:50:59Z", "commit": {"oid": "e061bf00c51750c0ed5c3639d3c7510419906f90"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwNjo1MDo1OVrOIIVLHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwNjo1MDo1OVrOIIVLHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNjQyOA==", "bodyText": "Revert reason may not be present.  Try something like\njsonRpcError.setData(resultTrx.getRevertReason().map(Bytes::toHexString()).orElse(null));", "url": "https://github.com/hyperledger/besu/pull/1730#discussion_r545606428", "createdAt": "2020-12-18T06:50:59Z", "author": {"login": "shemnon"}, "path": "ethereum/api/src/main/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/EthEstimateGas.java", "diffHunk": "@@ -151,6 +151,7 @@ private JsonRpcErrorResponse errorResponse(\n       final TransactionProcessingResult resultTrx = result.getResult();\n       if (resultTrx != null && resultTrx.getRevertReason().isPresent()) {\n         jsonRpcError = JsonRpcError.REVERT_ERROR;\n+        jsonRpcError.setData(resultTrx.getRevertReason().get().toHexString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e061bf00c51750c0ed5c3639d3c7510419906f90"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "349eff01c2a4a425f24d9c8ae4383164b1597001", "author": {"user": {"login": "VladLupashevskyi", "name": "Vladyslav Lupashevskyi"}}, "url": "https://github.com/hyperledger/besu/commit/349eff01c2a4a425f24d9c8ae4383164b1597001", "committedDate": "2020-12-18T18:50:46Z", "message": "Add tests for eth_estimateGas revert"}, "afterCommit": {"oid": "61d742808e9fa820665ed37e021d7c2fdc55eab6", "author": {"user": {"login": "VladLupashevskyi", "name": "Vladyslav Lupashevskyi"}}, "url": "https://github.com/hyperledger/besu/commit/61d742808e9fa820665ed37e021d7c2fdc55eab6", "committedDate": "2020-12-18T18:52:25Z", "message": "Add tests for eth_estimateGas revert\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21f65b4510cb2b6a5bc3423dba9c9a2331bae3b9", "author": {"user": {"login": "VladLupashevskyi", "name": "Vladyslav Lupashevskyi"}}, "url": "https://github.com/hyperledger/besu/commit/21f65b4510cb2b6a5bc3423dba9c9a2331bae3b9", "committedDate": "2020-12-18T18:54:21Z", "message": "Add revert reason to eth_estimateGas RPC call error\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ffdb7b86ed7a7a3866eb81ff932a086b7b956b3", "author": {"user": {"login": "VladLupashevskyi", "name": "Vladyslav Lupashevskyi"}}, "url": "https://github.com/hyperledger/besu/commit/1ffdb7b86ed7a7a3866eb81ff932a086b7b956b3", "committedDate": "2020-12-18T18:54:41Z", "message": "Update CHANGELOG.md\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eeacd97d202a96795c5cbd29ffe177d91c2717d", "author": {"user": {"login": "VladLupashevskyi", "name": "Vladyslav Lupashevskyi"}}, "url": "https://github.com/hyperledger/besu/commit/9eeacd97d202a96795c5cbd29ffe177d91c2717d", "committedDate": "2020-12-18T18:54:42Z", "message": "Add tests for eth_estimateGas revert\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "61d742808e9fa820665ed37e021d7c2fdc55eab6", "author": {"user": {"login": "VladLupashevskyi", "name": "Vladyslav Lupashevskyi"}}, "url": "https://github.com/hyperledger/besu/commit/61d742808e9fa820665ed37e021d7c2fdc55eab6", "committedDate": "2020-12-18T18:52:25Z", "message": "Add tests for eth_estimateGas revert\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>"}, "afterCommit": {"oid": "9eeacd97d202a96795c5cbd29ffe177d91c2717d", "author": {"user": {"login": "VladLupashevskyi", "name": "Vladyslav Lupashevskyi"}}, "url": "https://github.com/hyperledger/besu/commit/9eeacd97d202a96795c5cbd29ffe177d91c2717d", "committedDate": "2020-12-18T18:54:42Z", "message": "Add tests for eth_estimateGas revert\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NzYyMjk4", "url": "https://github.com/hyperledger/besu/pull/1730#pullrequestreview-555762298", "createdAt": "2020-12-18T19:32:08Z", "commit": {"oid": "9eeacd97d202a96795c5cbd29ffe177d91c2717d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2017, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}