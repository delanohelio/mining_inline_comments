{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxMTY2NzQ3", "number": 1057, "title": "Add 0x check for Address, Bytes, and Bytes32 in GraphQl requests", "bodyText": "Status\nREADY\nPR Description\nProduce error response if any of Address, Bytes or Bytes32 values\ninside GraphQl requests are not prefixed with 0x as defined by the spec.\nFix old tests that used values that are not prefixed with 0x and add\nadditional tests to confirm Address, Bytes and Bytes32 values will be\nrejected if not prefixed with 0x.\nSigned-off-by: Mak Muftic mak@nodefactory.io\nFixed Issue(s)\nfixes #811", "createdAt": "2020-06-08T14:09:15Z", "url": "https://github.com/hyperledger/besu/pull/1057", "merged": true, "mergeCommit": {"oid": "ba491c7ee08975346ae749fc3912b581b78421c2"}, "closed": true, "closedAt": "2020-07-06T16:13:37Z", "author": {"login": "MakMuftic"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpP1S9AH2gAyNDMxMTY2NzQ3OjY3YjZmYWZkMjM5NGY0OTYyNzNjOGM2NjYyYjEzNmM0YmVkYjc5ZWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxQe0hgH2gAyNDMxMTY2NzQ3OmFhNDE0MzNhYjAwNDRjMDQ4MTljZDEwOWQxMjQwM2YyZWU5ZGMwYTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "67b6fafd2394f496273c8c6662b136c4bedb79ed", "author": {"user": {"login": "MakMuftic", "name": "mace"}}, "url": "https://github.com/hyperledger/besu/commit/67b6fafd2394f496273c8c6662b136c4bedb79ed", "committedDate": "2020-06-08T12:43:46Z", "message": "Add 0x check for Address, Bytes, and Bytes32 in GraphQl requests\n\nProduce error response if any of Address, Bytes or Bytes values\ninside GraphQl requests are not prefixed with 0x as defined by the spec.\n\nFix old tests that used values that are not prefixed with 0x and add\nadditional tests to confirm Address, Bytes and Bytes32 values will be\nrejected if not prefixed with 0x.\n\nSigned-off-by: Mak Muftic <mak@nodefactory.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MzMxNjAy", "url": "https://github.com/hyperledger/besu/pull/1057#pullrequestreview-426331602", "createdAt": "2020-06-08T15:00:20Z", "commit": {"oid": "67b6fafd2394f496273c8c6662b136c4bedb79ed"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNTowMDoyMFrOGgitTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNTowMDoyMFrOGgitTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc3NjI3MQ==", "bodyText": "Just for the sake of keeping things logically co-located, I'd like to see this functionality in Quantity.java which has a lot of utility methods related to this. Maybe a static method like Quantity.isValid(String string)?", "url": "https://github.com/hyperledger/besu/pull/1057#discussion_r436776271", "createdAt": "2020-06-08T15:00:20Z", "author": {"login": "RatanRSur"}, "path": "ethereum/api/src/main/java/org/hyperledger/besu/ethereum/api/graphql/internal/Scalars.java", "diffHunk": "@@ -55,8 +55,13 @@ public Address parseLiteral(final Object input) throws CoercingParseLiteralExcep\n           if (!(input instanceof StringValue)) {\n             throw new CoercingParseLiteralException(\"Value is not any Address : '\" + input + \"'\");\n           }\n+          String inputValue = ((StringValue) input).getValue();\n+          if (!inputValue.startsWith(\"0x\")) {\n+            throw new CoercingParseLiteralException(\n+                \"Address value '\" + inputValue + \"' is not prefixed with 0x\");\n+          }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67b6fafd2394f496273c8c6662b136c4bedb79ed"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f0e4e0e509a130113f53b0aa76c9877e771602c", "author": {"user": {"login": "MakMuftic", "name": "mace"}}, "url": "https://github.com/hyperledger/besu/commit/5f0e4e0e509a130113f53b0aa76c9877e771602c", "committedDate": "2020-06-09T08:54:34Z", "message": "Move hex check to Quantity class\n\nSigned-off-by: Mak Muftic <mak@nodefactory.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNDgwODM4", "url": "https://github.com/hyperledger/besu/pull/1057#pullrequestreview-432480838", "createdAt": "2020-06-17T14:48:28Z", "commit": {"oid": "5f0e4e0e509a130113f53b0aa76c9877e771602c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89a629ab5c79280e4ddb605ddc59ee14a4efe8c6", "author": {"user": {"login": "MakMuftic", "name": "mace"}}, "url": "https://github.com/hyperledger/besu/commit/89a629ab5c79280e4ddb605ddc59ee14a4efe8c6", "committedDate": "2020-06-18T08:48:18Z", "message": "Merge branch 'master' into require-0x-prefix-bytes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80e2c1088dd29bc22b5e6571ff193ab84b25fbe4", "author": {"user": {"login": "MakMuftic", "name": "mace"}}, "url": "https://github.com/hyperledger/besu/commit/80e2c1088dd29bc22b5e6571ff193ab84b25fbe4", "committedDate": "2020-06-18T11:06:47Z", "message": "Fix tests with appropriate error messages\n\nSigned-off-by: Mak Muftic <mak@nodefactory.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95fa72acb6b4517501f81c80002aae867dd1fa31", "author": {"user": {"login": "MakMuftic", "name": "mace"}}, "url": "https://github.com/hyperledger/besu/commit/95fa72acb6b4517501f81c80002aae867dd1fa31", "committedDate": "2020-06-30T07:49:30Z", "message": "Merge branch 'master' into require-0x-prefix-bytes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99ff600062849e368a91d501896bc5a409d7b36f", "author": {"user": {"login": "MakMuftic", "name": "mace"}}, "url": "https://github.com/hyperledger/besu/commit/99ff600062849e368a91d501896bc5a409d7b36f", "committedDate": "2020-07-01T09:10:01Z", "message": "Merge branch 'master' into require-0x-prefix-bytes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4004c4deaf96b0486763bb909b06fba8d31f4eac", "author": {"user": {"login": "MakMuftic", "name": "mace"}}, "url": "https://github.com/hyperledger/besu/commit/4004c4deaf96b0486763bb909b06fba8d31f4eac", "committedDate": "2020-07-02T07:39:07Z", "message": "Merge branch 'master' into require-0x-prefix-bytes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa41433ab0044c04819cd109d12403f2ee9dc0a3", "author": {"user": {"login": "MakMuftic", "name": "mace"}}, "url": "https://github.com/hyperledger/besu/commit/aa41433ab0044c04819cd109d12403f2ee9dc0a3", "committedDate": "2020-07-03T10:00:31Z", "message": "Merge branch 'master' into require-0x-prefix-bytes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1484, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}