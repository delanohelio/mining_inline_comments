{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5NTA1NTU4", "number": 1426, "title": "[Issue 549] Update JSON-RPC over HTTP error responses to return 200 status code ", "bodyText": "PR description\n\nUpdated returned HTTP status code to 200 for JSON-RPC error\nUpdated tests related to the modified HTTP status code\n\nFixed Issue(s)\nWas #1305, Fixes #549\nChangelog\n\n I thought about the changelog and included a changelog update if required.", "createdAt": "2020-10-07T20:42:17Z", "url": "https://github.com/hyperledger/besu/pull/1426", "merged": true, "mergeCommit": {"oid": "3ba84cc9013bf7a8ec728fea05ef1a478b7295f8"}, "closed": true, "closedAt": "2020-10-08T04:28:24Z", "author": {"login": "shemnon"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-cOErAH2gAyNDk5NTA1NTU4OjUxY2FjODk4Yzk1ZGZkOGQ5ZjBhYjQ1MTBmZDg4YjI1NzAxNDgzMDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQZdOHAH2gAyNDk5NTA1NTU4OjZiZjQyOTljYWVhZDExZDgwMjM4ZGUyNzk5Y2Q0OTUzZTAxNjM0NGE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "51cac898c95dfd8d9f0ab4510fd88b2570148305", "author": {"user": {"login": "gabrieledm", "name": "Gabriele Del Monte"}}, "url": "https://github.com/hyperledger/besu/commit/51cac898c95dfd8d9f0ab4510fd88b2570148305", "committedDate": "2020-08-13T09:02:06Z", "message": "Added method 'statusCodeFromError' to extract HttpResponseStatus from JsonRpcError\n\nSigned-off-by: gabrieledm <gabriele.delmonte90@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cb76f68a7693a9135a187a79a92f033eafc8b7c", "author": {"user": {"login": "gabrieledm", "name": "Gabriele Del Monte"}}, "url": "https://github.com/hyperledger/besu/commit/6cb76f68a7693a9135a187a79a92f033eafc8b7c", "committedDate": "2020-08-13T09:04:55Z", "message": "Updated test files according with modifications for returned HTTP status code\n\nSigned-off-by: gabrieledm <gabriele.delmonte90@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e604c70e4a9895c3a92c48de7076f11c0c7a8d4", "author": {"user": {"login": "gabrieledm", "name": "Gabriele Del Monte"}}, "url": "https://github.com/hyperledger/besu/commit/9e604c70e4a9895c3a92c48de7076f11c0c7a8d4", "committedDate": "2020-08-13T09:59:15Z", "message": "Removed commented line of code\n\nSigned-off-by: gabrieledm <gabriele.delmonte90@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97b541bcd2f4e6dc4f290924f1f8bd12d39711c0", "author": {"user": {"login": "gabrieledm", "name": "Gabriele Del Monte"}}, "url": "https://github.com/hyperledger/besu/commit/97b541bcd2f4e6dc4f290924f1f8bd12d39711c0", "committedDate": "2020-08-13T15:48:32Z", "message": "Merge branch 'master' of github.com:hyperledger/besu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5331cf88616140be987c7e776ceb9e8c27d626ba", "author": {"user": {"login": "gabrieledm", "name": "Gabriele Del Monte"}}, "url": "https://github.com/hyperledger/besu/commit/5331cf88616140be987c7e776ceb9e8c27d626ba", "committedDate": "2020-08-13T17:21:32Z", "message": "Removed wildcard imports\n\nSigned-off-by: gabrieledm <gabriele.delmonte90@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b9831201ef8f93e1e658fe7f6c3bcf56ec4a7fa", "author": {"user": {"login": "gabrieledm", "name": "Gabriele Del Monte"}}, "url": "https://github.com/hyperledger/besu/commit/5b9831201ef8f93e1e658fe7f6c3bcf56ec4a7fa", "committedDate": "2020-08-17T13:59:42Z", "message": "Merge branch 'master' of github.com:hyperledger/besu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1d7201175f15efc1523161f8ddee7130c80ce85", "author": {"user": {"login": "gabrieledm", "name": "Gabriele Del Monte"}}, "url": "https://github.com/hyperledger/besu/commit/c1d7201175f15efc1523161f8ddee7130c80ce85", "committedDate": "2020-08-17T15:55:24Z", "message": "test: Updated acceptance tests according to fix of issue 549\n\nSigned-off-by: gabrieledm <gabriele.delmonte90@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9981e9315da164735c1b3416a8662f25e25bc563", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/9981e9315da164735c1b3416a8662f25e25bc563", "committedDate": "2020-10-07T17:16:27Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03238c08d63301c6d9f5cd5d6d7c119decedeefa", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/03238c08d63301c6d9f5cd5d6d7c119decedeefa", "committedDate": "2020-10-07T20:37:58Z", "message": "disable broken acceptance tests\n\nThe Web3J library is out of conformance for how JSON-RPC is supposed to\nbehave.  Since this PR is to bring Besu into conformance this breakage\nis unfortunately expected.\n\nSigned-off-by: Danno Ferrin <danno.ferrin@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21ec0ea3b5d9467cc3777ed2e202cf51736e67b5", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/21ec0ea3b5d9467cc3777ed2e202cf51736e67b5", "committedDate": "2020-10-07T20:43:32Z", "message": "Merge branch 'master' into gabrieledm/master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MzI3ODU0", "url": "https://github.com/hyperledger/besu/pull/1426#pullrequestreview-504327854", "createdAt": "2020-10-07T23:07:35Z", "commit": {"oid": "21ec0ea3b5d9467cc3777ed2e202cf51736e67b5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98992c059abcd9635655f6d7808c62f4a6960a78", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/98992c059abcd9635655f6d7808c62f4a6960a78", "committedDate": "2020-10-08T00:14:39Z", "message": "changelog\n\nSigned-off-by: Danno Ferrin <danno.ferrin@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MzU1MjU4", "url": "https://github.com/hyperledger/besu/pull/1426#pullrequestreview-504355258", "createdAt": "2020-10-08T00:30:26Z", "commit": {"oid": "98992c059abcd9635655f6d7808c62f4a6960a78"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwMDozMDoyNlrOHeKDrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwMDozMToxOFrOHeKEcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM4NDEwOQ==", "bodyText": "Suggestion: In Besu version 20.10, properly formatted requests that have valid parameters (count and content) will return a HTTP Status 200 OK, with an error field if an error occurred.  For example, requesting an account that does not exist in the chain, or a block by hash that Besu does not have, will now return HTTP 200 OK responses.  Unparsable requests, improperly formatted requests, or requests with invalid parameters will continue to return HTTP 400 Bad Request.", "url": "https://github.com/hyperledger/besu/pull/1426#discussion_r501384109", "createdAt": "2020-10-08T00:30:26Z", "author": {"login": "macfarla"}, "path": "CHANGELOG.md", "diffHunk": "@@ -1,5 +1,17 @@\n # Changelog\n \n+## 20.10 Breaking Changes\n+\n+When upgrading to 20.10, ensure you've taken into account the following breaking changes.\n+\n+## JSON-RPC HTTP Error Codes For Valid Calls\n+\n+Prior versions of Besu would set the HTTP Status 400 Bad Request for JSON-RPC requests that completed in an error, regardless of the kind of error.  These responses could include a complete JSON-RPC response with an error field.\n+\n+In Besu version 20.10 properly formatted requests that have valid parameters (count and content) that otherwise would result in an error will return a HTTP Status 200 OK a JSON-RPC response with an error field will be returned.  For example, requesting an account that does not exist in the chain or a block by hash that Besu does not have will now return HTTP 200 OK responses.  Unparsable requests, improperly formatted requests, or requests with invalid parameters will continue to return HTTP 400 Bad Request.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98992c059abcd9635655f6d7808c62f4a6960a78"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM4NDMwNQ==", "bodyText": "Suggestion: This was done to bring us more in line with the behavior of other Ethereum Clients.  Some community projects, such as Web3J, will be providing compatible releases in the near future.", "url": "https://github.com/hyperledger/besu/pull/1426#discussion_r501384305", "createdAt": "2020-10-08T00:31:18Z", "author": {"login": "macfarla"}, "path": "CHANGELOG.md", "diffHunk": "@@ -1,5 +1,17 @@\n # Changelog\n \n+## 20.10 Breaking Changes\n+\n+When upgrading to 20.10, ensure you've taken into account the following breaking changes.\n+\n+## JSON-RPC HTTP Error Codes For Valid Calls\n+\n+Prior versions of Besu would set the HTTP Status 400 Bad Request for JSON-RPC requests that completed in an error, regardless of the kind of error.  These responses could include a complete JSON-RPC response with an error field.\n+\n+In Besu version 20.10 properly formatted requests that have valid parameters (count and content) that otherwise would result in an error will return a HTTP Status 200 OK a JSON-RPC response with an error field will be returned.  For example, requesting an account that does not exist in the chain or a block by hash that Besu does not have will now return HTTP 200 OK responses.  Unparsable requests, improperly formatted requests, or requests with invalid parameters will continue to return HTTP 400 Bad Request.\n+\n+This was done to bring us more in line with the behavior of other Ethereum Clients.  Some community project, such as Web3J versions prior to 4.6.x, will be providing compatible releases in the near future.  ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98992c059abcd9635655f6d7808c62f4a6960a78"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a929477a1b0298d3799397664a1034aee89aa5d5", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/a929477a1b0298d3799397664a1034aee89aa5d5", "committedDate": "2020-10-08T03:16:21Z", "message": "rewordings\n\nSigned-off-by: Danno Ferrin <danno.ferrin@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7d1449eb11f63a7a90204fb9870c1ceec3c1989", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/b7d1449eb11f63a7a90204fb9870c1ceec3c1989", "committedDate": "2020-10-08T03:16:42Z", "message": "Merge branch 'master' into gabrieledm/master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd93edf97d5142789fdb11e9d4a6a836c72ba122", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/dd93edf97d5142789fdb11e9d4a6a836c72ba122", "committedDate": "2020-10-08T03:37:25Z", "message": "rewordings\n\nSigned-off-by: Danno Ferrin <danno.ferrin@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4220c94392da7f9dfbd5929ab968bf227c3bbacd", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/4220c94392da7f9dfbd5929ab968bf227c3bbacd", "committedDate": "2020-10-08T03:37:43Z", "message": "Merge remote-tracking branch 'origin/gabrieledm/master' into gabrieledm/master\nSigned-off-by: Danno Ferrin <danno.ferrin@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bf4299caead11d80238de2799cd4953e016344a", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/6bf4299caead11d80238de2799cd4953e016344a", "committedDate": "2020-10-08T03:59:34Z", "message": "new PR# and new ignore\n\nSigned-off-by: Danno Ferrin <danno.ferrin@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2194, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}