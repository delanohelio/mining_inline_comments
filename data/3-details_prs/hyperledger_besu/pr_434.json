{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxNTI0OTI4", "number": 434, "title": "Implement Phoenix EVM and Protocol Upgrades", "bodyText": "PR description\nThis PR implements EVM and Protocol upgrades as outlined in ECIP 1088 https://ecips.ethereumclassic.org/ECIPs/ecip-1088\nFixed Issue(s)", "createdAt": "2020-02-28T18:12:25Z", "url": "https://github.com/hyperledger/besu/pull/434", "merged": true, "mergeCommit": {"oid": "c955f67da606be8a56866fad7c34ddbba8529ada"}, "closed": true, "closedAt": "2020-03-09T13:45:54Z", "author": {"login": "edwardmack"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIznA_gH2gAyMzgxNTI0OTI4OmQ1ZTVjMzUxOTFiZjE3Mjg0NWZhNTRjYzlkYTBiNWI2ZDY0OTNmN2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcL973jgH2gAyMzgxNTI0OTI4OjA4MWMzNWVhMzk0NTZiZGU5YjE3MWYwYTgyYjZkYWZjMDY2NjRjODU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d5e5c35191bf172845fa54cc9da0b5b6d6493f7a", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/d5e5c35191bf172845fa54cc9da0b5b6d6493f7a", "committedDate": "2020-02-28T17:45:15Z", "message": "remove code related to aztlan fork.\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5d8e9b9d5fa0c3a3da46e4cb8b40b6eaee6d974", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/a5d8e9b9d5fa0c3a3da46e4cb8b40b6eaee6d974", "committedDate": "2020-02-28T17:59:13Z", "message": "added genesis config option for Phoenix block\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aef8bbd2d3be135918c3f0fc48916b91cb37e944", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/aef8bbd2d3be135918c3f0fc48916b91cb37e944", "committedDate": "2020-02-28T18:08:16Z", "message": "implement phoenix protocol spec definition\n\nImplement Phoenix EVM and protocol upgrades as per ECIP-1088\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88f68b508cc58e990f1d3d0f059ce30a7dd715cb", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/88f68b508cc58e990f1d3d0f059ce30a7dd715cb", "committedDate": "2020-03-03T15:03:21Z", "message": "Merge branch 'master' into ed/etc_phoenix_update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49e112c4a0ac46003b1c9b9f24cb7ce8ec5162fa", "author": {"user": {"login": "q9f", "name": "Afr Schoe"}}, "url": "https://github.com/hyperledger/besu/commit/49e112c4a0ac46003b1c9b9f24cb7ce8ec5162fa", "committedDate": "2020-03-03T16:43:58Z", "message": " p2p/config: update mordor classic discovery nodes (#29)\n\nSigned-off-by: /raw PONG _GHMoaCXLT <58883403+q9f@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "489c359cd49ad87053b5eebc6bb7423e1e4d728e", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/489c359cd49ad87053b5eebc6bb7423e1e4d728e", "committedDate": "2020-03-03T17:30:41Z", "message": "Merge branch 'master' into ed/etc_phoenix_update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b06f5a04f304cf165e24a2fa28b6790200b33a6b", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/b06f5a04f304cf165e24a2fa28b6790200b33a6b", "committedDate": "2020-03-05T15:58:51Z", "message": "Merge branch 'master' into ed/etc_phoenix_update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d75e8b0b3ca7ecfff423ed4509e1e24f596097f", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/8d75e8b0b3ca7ecfff423ed4509e1e24f596097f", "committedDate": "2020-03-05T22:17:59Z", "message": "Merge branch 'master' into ed/etc_phoenix_update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDQ1ODE5", "url": "https://github.com/hyperledger/besu/pull/434#pullrequestreview-370045819", "createdAt": "2020-03-06T02:23:15Z", "commit": {"oid": "8d75e8b0b3ca7ecfff423ed4509e1e24f596097f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDQwMDk1", "url": "https://github.com/hyperledger/besu/pull/434#pullrequestreview-370040095", "createdAt": "2020-03-06T02:02:49Z", "commit": {"oid": "8d75e8b0b3ca7ecfff423ed4509e1e24f596097f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMjowMjo0OVrOFyq8ZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMjowMjo0OVrOFyq8ZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY3NjcwOQ==", "bodyText": "This appears to be identical to the definition already inherited from Atlantis. Am I missing something, should something have changed or is this just not required?", "url": "https://github.com/hyperledger/besu/pull/434#discussion_r388676709", "createdAt": "2020-03-06T02:02:49Z", "author": {"login": "ajsutton"}, "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/mainnet/ClassicProtocolSpecs.java", "diffHunk": "@@ -149,19 +149,29 @@\n         .name(\"Agharta\");\n   }\n \n-  public static ProtocolSpecBuilder<Void> aztlanDefinition(\n+  public static ProtocolSpecBuilder<Void> phoenixDefinition(\n       final Optional<BigInteger> chainId,\n       final OptionalInt configContractSizeLimit,\n       final OptionalInt configStackSizeLimit,\n       final boolean enableRevertReason) {\n+    final int contractSizeLimit =\n+        configContractSizeLimit.orElse(MainnetProtocolSpecs.SPURIOUS_DRAGON_CONTRACT_SIZE_LIMIT);\n     return aghartaDefinition(\n             chainId, configContractSizeLimit, configStackSizeLimit, enableRevertReason)\n-        .gasCalculator(AztlanGasCalculator::new)\n+        .gasCalculator(IstanbulGasCalculator::new)\n         .evmBuilder(\n             gasCalculator ->\n-                MainnetEvmRegistries.aztlan(gasCalculator, chainId.orElse(BigInteger.ZERO)))\n+                MainnetEvmRegistries.istanbul(gasCalculator, chainId.orElse(BigInteger.ZERO)))\n         .precompileContractRegistryBuilder(MainnetPrecompiledContractRegistries::istanbul)\n-        .name(\"Aztlan\");\n+        .contractCreationProcessorBuilder(\n+            (gasCalculator, evm) ->\n+                new MainnetContractCreationProcessor(\n+                    gasCalculator,\n+                    evm,\n+                    true,\n+                    Collections.singletonList(MaxCodeSizeRule.of(contractSizeLimit)),\n+                    1))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d75e8b0b3ca7ecfff423ed4509e1e24f596097f"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDQ4OTI3", "url": "https://github.com/hyperledger/besu/pull/434#pullrequestreview-370048927", "createdAt": "2020-03-06T02:34:26Z", "commit": {"oid": "8d75e8b0b3ca7ecfff423ed4509e1e24f596097f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed2c3b822ae040a6dd63152190ffdec7f37aaaca", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/ed2c3b822ae040a6dd63152190ffdec7f37aaaca", "committedDate": "2020-03-06T14:33:55Z", "message": "Merge branch 'master' into ed/etc_phoenix_update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4803ebf98a0d908326384888bab640d26ec6320", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/c4803ebf98a0d908326384888bab640d26ec6320", "committedDate": "2020-03-06T14:56:27Z", "message": "remove unnecessary contractCreationProcessorBuilder\n\nremove unnecessary contractCreationProcessorBuilder from Phoenix\nClassicProtocolSpec.\n\nSigned-off-by: Edward Mack <ed@edwardmack.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwODU2NjQ3", "url": "https://github.com/hyperledger/besu/pull/434#pullrequestreview-370856647", "createdAt": "2020-03-08T20:43:26Z", "commit": {"oid": "c4803ebf98a0d908326384888bab640d26ec6320"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "081c35ea39456bde9b171f0a82b6dafc06664c85", "author": {"user": {"login": "edwardmack", "name": "Edward Mack"}}, "url": "https://github.com/hyperledger/besu/commit/081c35ea39456bde9b171f0a82b6dafc06664c85", "committedDate": "2020-03-09T13:28:51Z", "message": "Merge branch 'master' into ed/etc_phoenix_update"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1817, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}