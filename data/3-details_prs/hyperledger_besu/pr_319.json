{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1OTk5Njgz", "number": 319, "title": "Fix debug logging shadowed by parameter", "bodyText": "Signed-off-by: Antoine Toulme antoine@lunar-ocean.com\n\n\nPR description\nFixed Issue(s)\nThis fixes an issue when logging an error at the debug level while trying to sync Besu against a Quorum node.\nWe have a configuration issue that causes Quorum and Besu to be unable to exchange chain head. However while debugging the issue, we saw that Besu did not log the error reported during the communication.\nThis is because LOG.debug is here called with multiple parameters, therefore using the string interpolation route, instead of logging the error as an exception as the last parameter.\nThis PR makes it clearer that if an error is reported, it will be logged separately, making it easier for us to diagnose the issue.\nThere is no functional impact associated with this PR.", "createdAt": "2020-01-22T18:26:52Z", "url": "https://github.com/hyperledger/besu/pull/319", "merged": true, "mergeCommit": {"oid": "6060a79d6618fbeebf6e5e1da7e9f788a213598a"}, "closed": true, "closedAt": "2020-01-28T15:47:24Z", "author": {"login": "atoulme"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb88mUygFqTM0NjkxMjE2OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-zHTRAH2gAyMzY1OTk5NjgzOjQ2YjRjZDc4MGEyZWUxN2QxNGZlYjZiMWU5ZWJkNzlkMGI3NmNmMjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2OTEyMTY4", "url": "https://github.com/hyperledger/besu/pull/319#pullrequestreview-346912168", "createdAt": "2020-01-22T21:22:56Z", "commit": {"oid": "b075b3c10f3b03e5448face7290afbfa12095074"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMToyMjo1NlrOFgrclQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMToyMjo1NlrOFgrclQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgxMDU4MQ==", "bodyText": "Personally I'd just use:\nLOG.debug(\"Failed to retrieve chain head information. Disconnecting \" + peer, error);\n\nthe cost of string concatenation doesn't matter for this fairly rare case and then everything is together and nice and simple.", "url": "https://github.com/hyperledger/besu/pull/319#discussion_r369810581", "createdAt": "2020-01-22T21:22:56Z", "author": {"login": "ajsutton"}, "path": "ethereum/eth/src/main/java/org/hyperledger/besu/ethereum/eth/sync/ChainHeadTracker.java", "diffHunk": "@@ -83,8 +83,10 @@ public void onPeerConnected(final EthPeer peer) {\n                 peer.chainState().update(chainHeadHeader);\n                 trailingPeerLimiter.enforceTrailingPeerLimit();\n               } else {\n-                LOG.debug(\n-                    \"Failed to retrieve chain head information.  Disconnecting {}. \", peer, error);\n+                LOG.debug(\"Failed to retrieve chain head information.  Disconnecting {}. \", peer);\n+                if (error != null) {\n+                  LOG.debug(\"Error reporting while retrieving chain head information\", error);\n+                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b075b3c10f3b03e5448face7290afbfa12095074"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3MDY4ODk5", "url": "https://github.com/hyperledger/besu/pull/319#pullrequestreview-347068899", "createdAt": "2020-01-23T05:38:56Z", "commit": {"oid": "b075b3c10f3b03e5448face7290afbfa12095074"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8584c5c1200ce3d6710955f83d9000af4150fe9", "author": {"user": {"login": "atoulme", "name": "Antoine Toulme"}}, "url": "https://github.com/hyperledger/besu/commit/a8584c5c1200ce3d6710955f83d9000af4150fe9", "committedDate": "2020-01-24T06:29:02Z", "message": "Fix debug logging shadowed by parameter\n\nSigned-off-by: Antoine Toulme <antoine@lunar-ocean.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b075b3c10f3b03e5448face7290afbfa12095074", "author": {"user": {"login": "atoulme", "name": "Antoine Toulme"}}, "url": "https://github.com/hyperledger/besu/commit/b075b3c10f3b03e5448face7290afbfa12095074", "committedDate": "2020-01-22T18:24:02Z", "message": "Fix debug logging shadowed by parameter\n\nSigned-off-by: Antoine Toulme <antoine@lunar-ocean.com>"}, "afterCommit": {"oid": "a8584c5c1200ce3d6710955f83d9000af4150fe9", "author": {"user": {"login": "atoulme", "name": "Antoine Toulme"}}, "url": "https://github.com/hyperledger/besu/commit/a8584c5c1200ce3d6710955f83d9000af4150fe9", "committedDate": "2020-01-24T06:29:02Z", "message": "Fix debug logging shadowed by parameter\n\nSigned-off-by: Antoine Toulme <antoine@lunar-ocean.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MDgyNTE5", "url": "https://github.com/hyperledger/besu/pull/319#pullrequestreview-348082519", "createdAt": "2020-01-24T16:44:44Z", "commit": {"oid": "a8584c5c1200ce3d6710955f83d9000af4150fe9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0eebddbb034b3bea2ba98db16da08f46d6e6665c", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/0eebddbb034b3bea2ba98db16da08f46d6e6665c", "committedDate": "2020-01-24T16:44:55Z", "message": "Merge branch 'master' into fix_debug_logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98458c2a689f90369dd65a97a0e65744663b9110", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/98458c2a689f90369dd65a97a0e65744663b9110", "committedDate": "2020-01-27T18:13:55Z", "message": "Merge branch 'master' into fix_debug_logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46b4cd780a2ee17d14feb6b1e9ebd79d0b76cf28", "author": {"user": {"login": "shemnon", "name": "Danno Ferrin"}}, "url": "https://github.com/hyperledger/besu/commit/46b4cd780a2ee17d14feb6b1e9ebd79d0b76cf28", "committedDate": "2020-01-28T15:31:22Z", "message": "Merge branch 'master' into fix_debug_logging"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1884, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}