{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNDgxNzcz", "number": 1160, "title": "Edit ingest management troubleshooting docs", "bodyText": "Please answer all questions flagged for reviewers.\nSummary of changes:\n\nEdit to conform to Elastic style guidelines\nBreak walls of text into easy-to-scan list\nUse attributes for product names\n\nOoof. The diff is hard to follow. It's probably best to review the preview: https://stack-docs_1160.docs-preview.app.elstc.co/guide/en/ingest-management/master/ingest-management-troubleshooting.html", "createdAt": "2020-06-12T05:59:13Z", "url": "https://github.com/elastic/stack-docs/pull/1160", "merged": true, "mergeCommit": {"oid": "eca8ae771149725d7a9d15aaf48d66a5f68c9618"}, "closed": true, "closedAt": "2020-06-15T15:03:08Z", "author": {"login": "dedemorton"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqn7IPgH2gAyNDMzNDgxNzczOjkxMjhkZTg5NTI2ODFmODZjMmVmYjAxOGYzODRlZDM2ZTQ5OGM3ZDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrhr2FgH2gAyNDMzNDgxNzczOjYwNTIzODlmNTM1N2JkYzc0Y2MwZGEyOGM0MzkxODFkZmZlNzg3Y2E=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9128de8952681f86c2efb018f384ed36e498c7d2", "author": {"user": {"login": "dedemorton", "name": "DeDe Morton"}}, "url": "https://github.com/elastic/stack-docs/commit/9128de8952681f86c2efb018f384ed36e498c7d2", "committedDate": "2020-06-12T19:21:47Z", "message": "[DOCS] Edit ingest management troubleshooting docs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d74e1d2604c8b1acf7c1b936fb543a4423c2dff7", "author": {"user": {"login": "dedemorton", "name": "DeDe Morton"}}, "url": "https://github.com/elastic/stack-docs/commit/d74e1d2604c8b1acf7c1b936fb543a4423c2dff7", "committedDate": "2020-06-12T06:35:16Z", "message": "Add more edits"}, "afterCommit": {"oid": "9128de8952681f86c2efb018f384ed36e498c7d2", "author": {"user": {"login": "dedemorton", "name": "DeDe Morton"}}, "url": "https://github.com/elastic/stack-docs/commit/9128de8952681f86c2efb018f384ed36e498c7d2", "committedDate": "2020-06-12T19:21:47Z", "message": "[DOCS] Edit ingest management troubleshooting docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMDY0MTYy", "url": "https://github.com/elastic/stack-docs/pull/1160#pullrequestreview-430064162", "createdAt": "2020-06-12T22:15:40Z", "commit": {"oid": "9128de8952681f86c2efb018f384ed36e498c7d2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjoxNTo0MFrOGjS6Xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjoxNTo0MFrOGjS6Xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MzE5OA==", "bodyText": "I was trying so hard to be Elastic and put some humor in, I'm ok if you want to leave it out tho. Minimal sad panda tho.  About the command, its the same command ./elastic-agent run that is listed above we can re-cite it (or put it to a variable if its going to be repeated more) but that detail is up to you.", "url": "https://github.com/elastic/stack-docs/pull/1160#discussion_r439663198", "createdAt": "2020-06-12T22:15:40Z", "author": {"login": "EricDavisX"}, "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -78,81 +192,125 @@ elastic-agent.exe run\n \n [float]\n [[where-are-the-agent-logs]]\n-== I need to find the logs when {agent} starts up\n+== Where does {agent} store logs after startup?\n \n-When started successfully, the logs are in the folder where the {agent} was started, in a sub-directory `data/logs/metricbeat`.\n-If that path of logs does not exist, it indicates the agent did not successfully run {metricbeat}, which is a higher level problem to triage.\n+When started successfully, {metricbeat} logs are stored in\n+`data/logs/metricbeat` under the folder where {agent} was started. If that log\n+path does not exist, the agent was unable to start {metricbeat}, which is a\n+higher level problem to triage.\n \n [float]\n [[what-is-my-agent-config]]\n-== I need to know the configuration used in the running {agent}\n+== What configuration is the {agent} running?\n \n-You can inspect the files in the folder from where you ran {agent}. The `elastic-agent.yml` file will have an uncommented citation if it is in '{fleet}' mode:\n+To find the configuration file, inspect the `elastic-agent.yml` file in the\n+folder where you ran {agent}. If you're running the agent in {fleet} mode, this\n+file contains the following citation:\n+\n+[source,yaml]\n+----\n Management: mode: \"fleet\"\n+----\n+\n+The `action_store.yml` contains the entire, unencrypted configuration:\n \n-The `action_store.yml` has the whole configuration, unencrypted. Look for 'outputs:hosts' section with elasticsearch location. This file will also have the current versions of the packages in use by the current configuration. The version of the {agent} is in the download folder / zip.\n+* To see the {es} location, look at `outputs:hosts`.\n+* To see the {agent} version, look at the download folder and zip filenames.\n+\n+This file also shows the version of all packages used by the current\n+configuration.\n \n [float]\n [[where-is-the-data-agent-is-sending]]\n-== I'm not sure {ingest-manager} app is showing the data my {agent} is sending\n+== Why can't I see the data {agent} is sending?\n \n-I think I have {agent} set up and running and there are no errors on the agent logs and I still don't see data in {kib}. The recommended way to assess this is to go straight to {es} data queries, or maybe just use {kib} Discover app. Look for any data in the index your {agent} is sending to (metrics-* for example) and see if the name.host of your host machine shows. If not, then perhaps the data is getting trapped / blocked in the network or isn't sent off of the {agent} host correctly in the first place due to some Firewall or security reason. While it should be redundant, it is all the same potentially helpful to install the stand-alone Metricbeat (see the Elastic docs for information) to see if that works to send data into ES, which would indicate a bug or problem in the {agent} side.\n+If {elastic-agent} is set up and running, but you don't see data in {kib}:\n \n-[float]\n-[[i-deleted-my-agent]]\n-== I deleted {agent} in the {fleet} {ingest-manager} app how can I get it back?\n+//REVIEWERS: Is there a better command that we should recommend to users here?\n+//I think it's good to show an actual command because we could have a newbie\n+//reading this topic.\n \n-Its ok, we got your back!  The data is still in {es}. And get the {agent} back in the UI, you will need only to stop, then re-enroll the {agent} on the host and run it again.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9128de8952681f86c2efb018f384ed36e498c7d2"}, "originalPosition": 261}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMDY0NTUw", "url": "https://github.com/elastic/stack-docs/pull/1160#pullrequestreview-430064550", "createdAt": "2020-06-12T22:16:52Z", "commit": {"oid": "9128de8952681f86c2efb018f384ed36e498c7d2"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjoxNjo1MlrOGjS7pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjoxOTo1OVrOGjS-sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MzUyNg==", "bodyText": "actually a known issue in the product is that kibana is showing an error when an agent is shut down, tho it is not really an 'error' state.  we may not want to explicitly say this as it can confuse users?  The start up option they need to do to get it back is on the host tho.  as noted above.", "url": "https://github.com/elastic/stack-docs/pull/1160#discussion_r439663526", "createdAt": "2020-06-12T22:16:52Z", "author": {"login": "EricDavisX"}, "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -78,81 +192,125 @@ elastic-agent.exe run\n \n [float]\n [[where-are-the-agent-logs]]\n-== I need to find the logs when {agent} starts up\n+== Where does {agent} store logs after startup?\n \n-When started successfully, the logs are in the folder where the {agent} was started, in a sub-directory `data/logs/metricbeat`.\n-If that path of logs does not exist, it indicates the agent did not successfully run {metricbeat}, which is a higher level problem to triage.\n+When started successfully, {metricbeat} logs are stored in\n+`data/logs/metricbeat` under the folder where {agent} was started. If that log\n+path does not exist, the agent was unable to start {metricbeat}, which is a\n+higher level problem to triage.\n \n [float]\n [[what-is-my-agent-config]]\n-== I need to know the configuration used in the running {agent}\n+== What configuration is the {agent} running?\n \n-You can inspect the files in the folder from where you ran {agent}. The `elastic-agent.yml` file will have an uncommented citation if it is in '{fleet}' mode:\n+To find the configuration file, inspect the `elastic-agent.yml` file in the\n+folder where you ran {agent}. If you're running the agent in {fleet} mode, this\n+file contains the following citation:\n+\n+[source,yaml]\n+----\n Management: mode: \"fleet\"\n+----\n+\n+The `action_store.yml` contains the entire, unencrypted configuration:\n \n-The `action_store.yml` has the whole configuration, unencrypted. Look for 'outputs:hosts' section with elasticsearch location. This file will also have the current versions of the packages in use by the current configuration. The version of the {agent} is in the download folder / zip.\n+* To see the {es} location, look at `outputs:hosts`.\n+* To see the {agent} version, look at the download folder and zip filenames.\n+\n+This file also shows the version of all packages used by the current\n+configuration.\n \n [float]\n [[where-is-the-data-agent-is-sending]]\n-== I'm not sure {ingest-manager} app is showing the data my {agent} is sending\n+== Why can't I see the data {agent} is sending?\n \n-I think I have {agent} set up and running and there are no errors on the agent logs and I still don't see data in {kib}. The recommended way to assess this is to go straight to {es} data queries, or maybe just use {kib} Discover app. Look for any data in the index your {agent} is sending to (metrics-* for example) and see if the name.host of your host machine shows. If not, then perhaps the data is getting trapped / blocked in the network or isn't sent off of the {agent} host correctly in the first place due to some Firewall or security reason. While it should be redundant, it is all the same potentially helpful to install the stand-alone Metricbeat (see the Elastic docs for information) to see if that works to send data into ES, which would indicate a bug or problem in the {agent} side.\n+If {elastic-agent} is set up and running, but you don't see data in {kib}:\n \n-[float]\n-[[i-deleted-my-agent]]\n-== I deleted {agent} in the {fleet} {ingest-manager} app how can I get it back?\n+//REVIEWERS: Is there a better command that we should recommend to users here?\n+//I think it's good to show an actual command because we could have a newbie\n+//reading this topic.\n \n-Its ok, we got your back!  The data is still in {es}. And get the {agent} back in the UI, you will need only to stop, then re-enroll the {agent} on the host and run it again.\n+. Make sure there are no errors in {kib}. If there are errors, resolve them.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9128de8952681f86c2efb018f384ed36e498c7d2"}, "originalPosition": 262}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2NDMwNA==", "bodyText": "specifically the user needs to have 'superuser' privilege.  which is a little hectic, and only for the Alpha release (we hope).", "url": "https://github.com/elastic/stack-docs/pull/1160#discussion_r439664304", "createdAt": "2020-06-12T22:19:59Z", "author": {"login": "EricDavisX"}, "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,72 +4,186 @@\n \n experimental[]\n \n-//TODO: Do a technical edit of this content.\n-\n This early release of {ingest-management} is experimental. We invite you to\n install and test these capabilities **in a test environment**. You might run\n into problems and need to modify your setup to get this feature running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback[here]. Your feedback is very valuable to us.\n+We have collected the most common known problems and frequently asked questions\n+here. If your question isn't answered here, please review open issues in the\n+following GitHub repositories:\n+\n+* https://github.com/elastic/kibana/issues[{kib}]\n+* https://github.com/elastic/beats/issuess[{beats}]\n+* https://github.com/elastic/package-registry/issues[{package-registry}]\n+\n+Contact us https://ela.st/ingest-manager-feedback[here]. Your feedback is very\n+valuable to us.\n+\n+//REVIEWERS: Using \"here\" for link text is strongly discouraged because it's\n+//bad for SEO. What text should we provide instead? \n+\n+// REVIEWERS: Do you think it's worthwhile to separate the jump list into two \n+// sections? We could create separate topics with a jump list at the top, but\n+// then users can't search the page. In general, presenting a list of more than\n+// 8 options makes the info harder for users to process. \n+\n+**Common problems:**\n+\n+* <<ingest-manager-not-in-kibana>>\n+* <<ingest-management-setup-fails>>\n+* <<ingest-manager-app-crashes>>\n+* <<agent-enrollment-timeout>>\n+\n+**Frequently asked questions:**\n+\n+* <<enrolled-agent-not-showing-up>>\n+* <<where-are-the-agent-logs>>\n+* <<what-is-my-agent-config>>\n+* <<where-is-the-data-agent-is-sending>>\n+* <<i-deleted-my-agent>>\n+* <<i-need-to-stop-agent>>\n+* <<i-rebooted-my-host>>\n+* <<what-is-the-endpoint-package>>\n \n [float]\n-[[ingest-manager-not-in-cloud-kibana]]\n-== The {ingest-manager} app is not listed in my {kib} cloud navigation list\n+[[ingest-manager-not-in-kibana]]\n+== The {ingest-manager} app is not listed in the {kib} side navigation\n+\n+In 7.8, the {ingest-manager} app is experimental. You must enable the app to\n+see it in {kib}.\n+\n+//REVIEWERS: I don't want to have separate sections for cloud vs self-managed\n+//because we are working on a widget for switching between instructions for\n+//the two. Also I think it's more confusing to users if we have two sections\n+//that cover the same content. \n+\n+//TODO: Add platform tabs when the tabbed panel widget is stable (possibly after\n+// 7.8)\n+\n+**To enable {ingest-manager} on cloud:**\n+\n+. Go to your deployment in the user console.\n+\n+. Under the deployment name in the side navigation, click **Edit**.\n+\n+. In the {kib} section, expand **User setting overrides** and enter the\n+following setting:\n++\n+[source,yaml]\n+----\n+xpack.ingestManager.enabled: true\n+----\n+\n+. Click **Save**.\n+\n+{kib} will restart automatically. When {kib} is available, refresh the browser\n+to see the {ingest-manager} app in the navigation menu.\n+\n+**To enable {ingest-manager} on a self-managed cluster:**\n+\n+//REVIEWERS: Can't on-premise also mean cloud? I've seen self-managed used, too\n+//so I've used that here. \n \n-In 7.8, the {ingest-manager} app is in Alpha state and as such is only shown when specifically enabled in the start up or cloud 'override' options. To enable {ingest-manager} on cloud, go to your deployment in the user console. Click on the 'edit' link directly beneath the deployment name. Then click on 'user setting overrides' underneath the {kib} heading. Here you must enter the following x-pack option and click the save button at the bottom:\n+. In the {es} configuration file, `config/elasticsearch.yml`, set the following\n+security settings to enable security and API keys:\n++\n+[source,yaml]\n+----\n+xpack.security.enabled: true\n+xpack.security.authc.api_key.enabled: true\n+----\n \n+. In the {kib} configuration file, `config/kibana.yml`, enable {ingest-manager}\n+and specify user credentials:\n++\n [source,yaml]\n ----\n xpack.ingestManager.enabled: true\n+xpack.ingestManager.fleet.tlsCheckDisabled: true <1>\n+xpack.security.enabled: true\n+elasticsearch.username: \"elastic\" <2>\n+elasticsearch.password: \"abc123iUnbRftkABC123\"\n ----\n+<1> This setting is not required if you configure TLS checking.\n+<2> Specify a user who is authorized to use {ingest-manager} ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9128de8952681f86c2efb018f384ed36e498c7d2"}, "originalPosition": 111}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMDc5NDM2", "url": "https://github.com/elastic/stack-docs/pull/1160#pullrequestreview-430079436", "createdAt": "2020-06-12T23:13:05Z", "commit": {"oid": "9128de8952681f86c2efb018f384ed36e498c7d2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMzoxMzowNVrOGjTs1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMzoxMzowNVrOGjTs1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY3NjExOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <2> Specify a user who is authorized to use {ingest-manager} \n          \n          \n            \n            <2> Specify a user who is authorized to use {ingest-manager}.", "url": "https://github.com/elastic/stack-docs/pull/1160#discussion_r439676118", "createdAt": "2020-06-12T23:13:05Z", "author": {"login": "dedemorton"}, "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,72 +4,186 @@\n \n experimental[]\n \n-//TODO: Do a technical edit of this content.\n-\n This early release of {ingest-management} is experimental. We invite you to\n install and test these capabilities **in a test environment**. You might run\n into problems and need to modify your setup to get this feature running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback[here]. Your feedback is very valuable to us.\n+We have collected the most common known problems and frequently asked questions\n+here. If your question isn't answered here, please review open issues in the\n+following GitHub repositories:\n+\n+* https://github.com/elastic/kibana/issues[{kib}]\n+* https://github.com/elastic/beats/issuess[{beats}]\n+* https://github.com/elastic/package-registry/issues[{package-registry}]\n+\n+Contact us https://ela.st/ingest-manager-feedback[here]. Your feedback is very\n+valuable to us.\n+\n+//REVIEWERS: Using \"here\" for link text is strongly discouraged because it's\n+//bad for SEO. What text should we provide instead? \n+\n+// REVIEWERS: Do you think it's worthwhile to separate the jump list into two \n+// sections? We could create separate topics with a jump list at the top, but\n+// then users can't search the page. In general, presenting a list of more than\n+// 8 options makes the info harder for users to process. \n+\n+**Common problems:**\n+\n+* <<ingest-manager-not-in-kibana>>\n+* <<ingest-management-setup-fails>>\n+* <<ingest-manager-app-crashes>>\n+* <<agent-enrollment-timeout>>\n+\n+**Frequently asked questions:**\n+\n+* <<enrolled-agent-not-showing-up>>\n+* <<where-are-the-agent-logs>>\n+* <<what-is-my-agent-config>>\n+* <<where-is-the-data-agent-is-sending>>\n+* <<i-deleted-my-agent>>\n+* <<i-need-to-stop-agent>>\n+* <<i-rebooted-my-host>>\n+* <<what-is-the-endpoint-package>>\n \n [float]\n-[[ingest-manager-not-in-cloud-kibana]]\n-== The {ingest-manager} app is not listed in my {kib} cloud navigation list\n+[[ingest-manager-not-in-kibana]]\n+== The {ingest-manager} app is not listed in the {kib} side navigation\n+\n+In 7.8, the {ingest-manager} app is experimental. You must enable the app to\n+see it in {kib}.\n+\n+//REVIEWERS: I don't want to have separate sections for cloud vs self-managed\n+//because we are working on a widget for switching between instructions for\n+//the two. Also I think it's more confusing to users if we have two sections\n+//that cover the same content. \n+\n+//TODO: Add platform tabs when the tabbed panel widget is stable (possibly after\n+// 7.8)\n+\n+**To enable {ingest-manager} on cloud:**\n+\n+. Go to your deployment in the user console.\n+\n+. Under the deployment name in the side navigation, click **Edit**.\n+\n+. In the {kib} section, expand **User setting overrides** and enter the\n+following setting:\n++\n+[source,yaml]\n+----\n+xpack.ingestManager.enabled: true\n+----\n+\n+. Click **Save**.\n+\n+{kib} will restart automatically. When {kib} is available, refresh the browser\n+to see the {ingest-manager} app in the navigation menu.\n+\n+**To enable {ingest-manager} on a self-managed cluster:**\n+\n+//REVIEWERS: Can't on-premise also mean cloud? I've seen self-managed used, too\n+//so I've used that here. \n \n-In 7.8, the {ingest-manager} app is in Alpha state and as such is only shown when specifically enabled in the start up or cloud 'override' options. To enable {ingest-manager} on cloud, go to your deployment in the user console. Click on the 'edit' link directly beneath the deployment name. Then click on 'user setting overrides' underneath the {kib} heading. Here you must enter the following x-pack option and click the save button at the bottom:\n+. In the {es} configuration file, `config/elasticsearch.yml`, set the following\n+security settings to enable security and API keys:\n++\n+[source,yaml]\n+----\n+xpack.security.enabled: true\n+xpack.security.authc.api_key.enabled: true\n+----\n \n+. In the {kib} configuration file, `config/kibana.yml`, enable {ingest-manager}\n+and specify user credentials:\n++\n [source,yaml]\n ----\n xpack.ingestManager.enabled: true\n+xpack.ingestManager.fleet.tlsCheckDisabled: true <1>\n+xpack.security.enabled: true\n+elasticsearch.username: \"elastic\" <2>\n+elasticsearch.password: \"abc123iUnbRftkABC123\"\n ----\n+<1> This setting is not required if you configure TLS checking.\n+<2> Specify a user who is authorized to use {ingest-manager} ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9128de8952681f86c2efb018f384ed36e498c7d2"}, "originalPosition": 111}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2897caf6554fd65ab84128e643fc625f66386b7", "author": {"user": {"login": "dedemorton", "name": "DeDe Morton"}}, "url": "https://github.com/elastic/stack-docs/commit/e2897caf6554fd65ab84128e643fc625f66386b7", "committedDate": "2020-06-12T23:13:16Z", "message": "Update docs/en/ingest-management/troubleshooting.asciidoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMDgwNjEy", "url": "https://github.com/elastic/stack-docs/pull/1160#pullrequestreview-430080612", "createdAt": "2020-06-12T23:18:29Z", "commit": {"oid": "e2897caf6554fd65ab84128e643fc625f66386b7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMzoxODoyOVrOGjTwuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMzoxODoyOVrOGjTwuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY3NzExMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            . Make sure there are no errors in {kib}. If there are errors, resolve them.", "url": "https://github.com/elastic/stack-docs/pull/1160#discussion_r439677112", "createdAt": "2020-06-12T23:18:29Z", "author": {"login": "dedemorton"}, "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -78,81 +192,125 @@ elastic-agent.exe run\n \n [float]\n [[where-are-the-agent-logs]]\n-== I need to find the logs when {agent} starts up\n+== Where does {agent} store logs after startup?\n \n-When started successfully, the logs are in the folder where the {agent} was started, in a sub-directory `data/logs/metricbeat`.\n-If that path of logs does not exist, it indicates the agent did not successfully run {metricbeat}, which is a higher level problem to triage.\n+When started successfully, {metricbeat} logs are stored in\n+`data/logs/metricbeat` under the folder where {agent} was started. If that log\n+path does not exist, the agent was unable to start {metricbeat}, which is a\n+higher level problem to triage.\n \n [float]\n [[what-is-my-agent-config]]\n-== I need to know the configuration used in the running {agent}\n+== What configuration is the {agent} running?\n \n-You can inspect the files in the folder from where you ran {agent}. The `elastic-agent.yml` file will have an uncommented citation if it is in '{fleet}' mode:\n+To find the configuration file, inspect the `elastic-agent.yml` file in the\n+folder where you ran {agent}. If you're running the agent in {fleet} mode, this\n+file contains the following citation:\n+\n+[source,yaml]\n+----\n Management: mode: \"fleet\"\n+----\n+\n+The `action_store.yml` contains the entire, unencrypted configuration:\n \n-The `action_store.yml` has the whole configuration, unencrypted. Look for 'outputs:hosts' section with elasticsearch location. This file will also have the current versions of the packages in use by the current configuration. The version of the {agent} is in the download folder / zip.\n+* To see the {es} location, look at `outputs:hosts`.\n+* To see the {agent} version, look at the download folder and zip filenames.\n+\n+This file also shows the version of all packages used by the current\n+configuration.\n \n [float]\n [[where-is-the-data-agent-is-sending]]\n-== I'm not sure {ingest-manager} app is showing the data my {agent} is sending\n+== Why can't I see the data {agent} is sending?\n \n-I think I have {agent} set up and running and there are no errors on the agent logs and I still don't see data in {kib}. The recommended way to assess this is to go straight to {es} data queries, or maybe just use {kib} Discover app. Look for any data in the index your {agent} is sending to (metrics-* for example) and see if the name.host of your host machine shows. If not, then perhaps the data is getting trapped / blocked in the network or isn't sent off of the {agent} host correctly in the first place due to some Firewall or security reason. While it should be redundant, it is all the same potentially helpful to install the stand-alone Metricbeat (see the Elastic docs for information) to see if that works to send data into ES, which would indicate a bug or problem in the {agent} side.\n+If {elastic-agent} is set up and running, but you don't see data in {kib}:\n \n-[float]\n-[[i-deleted-my-agent]]\n-== I deleted {agent} in the {fleet} {ingest-manager} app how can I get it back?\n+//REVIEWERS: Is there a better command that we should recommend to users here?\n+//I think it's good to show an actual command because we could have a newbie\n+//reading this topic.\n \n-Its ok, we got your back!  The data is still in {es}. And get the {agent} back in the UI, you will need only to stop, then re-enroll the {agent} on the host and run it again.\n+. Make sure there are no errors in {kib}. If there are errors, resolve them.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2897caf6554fd65ab84128e643fc625f66386b7"}, "originalPosition": 262}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "994e8a7a5c0ebe4b6a2b414f18e16be006379f0f", "author": {"user": {"login": "dedemorton", "name": "DeDe Morton"}}, "url": "https://github.com/elastic/stack-docs/commit/994e8a7a5c0ebe4b6a2b414f18e16be006379f0f", "committedDate": "2020-06-12T23:18:38Z", "message": "Update docs/en/ingest-management/troubleshooting.asciidoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMDgwOTgx", "url": "https://github.com/elastic/stack-docs/pull/1160#pullrequestreview-430080981", "createdAt": "2020-06-12T23:20:14Z", "commit": {"oid": "994e8a7a5c0ebe4b6a2b414f18e16be006379f0f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMzoyMDoxNFrOGjTyCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMzoyMDoxNFrOGjTyCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY3NzQ0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            //REVIEWERS: Is there a better command that we should recommend to users here?\n          \n          \n            \n            //I think it's good to show an actual command because we could have a newbie\n          \n          \n            \n            //reading this topic.", "url": "https://github.com/elastic/stack-docs/pull/1160#discussion_r439677448", "createdAt": "2020-06-12T23:20:14Z", "author": {"login": "dedemorton"}, "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -78,81 +192,124 @@ elastic-agent.exe run\n \n [float]\n [[where-are-the-agent-logs]]\n-== I need to find the logs when {agent} starts up\n+== Where does {agent} store logs after startup?\n \n-When started successfully, the logs are in the folder where the {agent} was started, in a sub-directory `data/logs/metricbeat`.\n-If that path of logs does not exist, it indicates the agent did not successfully run {metricbeat}, which is a higher level problem to triage.\n+When started successfully, {metricbeat} logs are stored in\n+`data/logs/metricbeat` under the folder where {agent} was started. If that log\n+path does not exist, the agent was unable to start {metricbeat}, which is a\n+higher level problem to triage.\n \n [float]\n [[what-is-my-agent-config]]\n-== I need to know the configuration used in the running {agent}\n+== What configuration is the {agent} running?\n \n-You can inspect the files in the folder from where you ran {agent}. The `elastic-agent.yml` file will have an uncommented citation if it is in '{fleet}' mode:\n+To find the configuration file, inspect the `elastic-agent.yml` file in the\n+folder where you ran {agent}. If you're running the agent in {fleet} mode, this\n+file contains the following citation:\n+\n+[source,yaml]\n+----\n Management: mode: \"fleet\"\n+----\n+\n+The `action_store.yml` contains the entire, unencrypted configuration:\n \n-The `action_store.yml` has the whole configuration, unencrypted. Look for 'outputs:hosts' section with elasticsearch location. This file will also have the current versions of the packages in use by the current configuration. The version of the {agent} is in the download folder / zip.\n+* To see the {es} location, look at `outputs:hosts`.\n+* To see the {agent} version, look at the download folder and zip filenames.\n+\n+This file also shows the version of all packages used by the current\n+configuration.\n \n [float]\n [[where-is-the-data-agent-is-sending]]\n-== I'm not sure {ingest-manager} app is showing the data my {agent} is sending\n+== Why can't I see the data {agent} is sending?\n \n-I think I have {agent} set up and running and there are no errors on the agent logs and I still don't see data in {kib}. The recommended way to assess this is to go straight to {es} data queries, or maybe just use {kib} Discover app. Look for any data in the index your {agent} is sending to (metrics-* for example) and see if the name.host of your host machine shows. If not, then perhaps the data is getting trapped / blocked in the network or isn't sent off of the {agent} host correctly in the first place due to some Firewall or security reason. While it should be redundant, it is all the same potentially helpful to install the stand-alone Metricbeat (see the Elastic docs for information) to see if that works to send data into ES, which would indicate a bug or problem in the {agent} side.\n+If {elastic-agent} is set up and running, but you don't see data in {kib}:\n \n-[float]\n-[[i-deleted-my-agent]]\n-== I deleted {agent} in the {fleet} {ingest-manager} app how can I get it back?\n+//REVIEWERS: Is there a better command that we should recommend to users here?\n+//I think it's good to show an actual command because we could have a newbie\n+//reading this topic.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "994e8a7a5c0ebe4b6a2b414f18e16be006379f0f"}, "originalPosition": 259}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "030abdab881e7c1e1361cd2f2b74040bdd7043d4", "author": {"user": {"login": "dedemorton", "name": "DeDe Morton"}}, "url": "https://github.com/elastic/stack-docs/commit/030abdab881e7c1e1361cd2f2b74040bdd7043d4", "committedDate": "2020-06-12T23:21:00Z", "message": "Remove reviewer note"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNzA0MzQ2", "url": "https://github.com/elastic/stack-docs/pull/1160#pullrequestreview-430704346", "createdAt": "2020-06-15T14:34:51Z", "commit": {"oid": "030abdab881e7c1e1361cd2f2b74040bdd7043d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDozNDo1MVrOGj0-NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDozNDo1MVrOGj0-NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyMTIzNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            // REVIEWERS: Do you think it's worthwhile to separate the jump list into two \n          \n          \n            \n            // sections? We could create separate topics with a jump list at the top, but\n          \n          \n            \n            // then users can't search the page. In general, presenting a list of more than\n          \n          \n            \n            // 8 options makes the info harder for users to process.", "url": "https://github.com/elastic/stack-docs/pull/1160#discussion_r440221237", "createdAt": "2020-06-15T14:34:51Z", "author": {"login": "dedemorton"}, "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,72 +4,186 @@\n \n experimental[]\n \n-//TODO: Do a technical edit of this content.\n-\n This early release of {ingest-management} is experimental. We invite you to\n install and test these capabilities **in a test environment**. You might run\n into problems and need to modify your setup to get this feature running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback[here]. Your feedback is very valuable to us.\n+We have collected the most common known problems and frequently asked questions\n+here. If your question isn't answered here, please review open issues in the\n+following GitHub repositories:\n+\n+* https://github.com/elastic/kibana/issues[{kib}]\n+* https://github.com/elastic/beats/issuess[{beats}]\n+* https://github.com/elastic/package-registry/issues[{package-registry}]\n+\n+Contact us https://ela.st/ingest-manager-feedback[here]. Your feedback is very\n+valuable to us.\n+\n+//REVIEWERS: Using \"here\" for link text is strongly discouraged because it's\n+//bad for SEO. What text should we provide instead? \n+\n+// REVIEWERS: Do you think it's worthwhile to separate the jump list into two \n+// sections? We could create separate topics with a jump list at the top, but\n+// then users can't search the page. In general, presenting a list of more than\n+// 8 options makes the info harder for users to process. \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "030abdab881e7c1e1361cd2f2b74040bdd7043d4"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d510c9b57fa830a695820010ede02391e1b1f255", "author": {"user": {"login": "dedemorton", "name": "DeDe Morton"}}, "url": "https://github.com/elastic/stack-docs/commit/d510c9b57fa830a695820010ede02391e1b1f255", "committedDate": "2020-06-15T14:35:05Z", "message": "Remove reviewer comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNzA1MTYy", "url": "https://github.com/elastic/stack-docs/pull/1160#pullrequestreview-430705162", "createdAt": "2020-06-15T14:35:40Z", "commit": {"oid": "d510c9b57fa830a695820010ede02391e1b1f255"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDozNTo0MFrOGj1Akg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDozNTo0MFrOGj1Akg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyMTg0Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Contact us https://ela.st/ingest-manager-feedback[here]. Your feedback is very\n          \n          \n            \n            Contact us in the https://ela.st/ingest-manager-feedback[discuss forum]. Your feedback is very", "url": "https://github.com/elastic/stack-docs/pull/1160#discussion_r440221842", "createdAt": "2020-06-15T14:35:40Z", "author": {"login": "dedemorton"}, "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,72 +4,181 @@\n \n experimental[]\n \n-//TODO: Do a technical edit of this content.\n-\n This early release of {ingest-management} is experimental. We invite you to\n install and test these capabilities **in a test environment**. You might run\n into problems and need to modify your setup to get this feature running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback[here]. Your feedback is very valuable to us.\n+We have collected the most common known problems and frequently asked questions\n+here. If your question isn't answered here, please review open issues in the\n+following GitHub repositories:\n+\n+* https://github.com/elastic/kibana/issues[{kib}]\n+* https://github.com/elastic/beats/issuess[{beats}]\n+* https://github.com/elastic/package-registry/issues[{package-registry}]\n+\n+Contact us https://ela.st/ingest-manager-feedback[here]. Your feedback is very", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d510c9b57fa830a695820010ede02391e1b1f255"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "964c6274e61519b6f94a2780f5019695b9dad1b5", "author": {"user": {"login": "dedemorton", "name": "DeDe Morton"}}, "url": "https://github.com/elastic/stack-docs/commit/964c6274e61519b6f94a2780f5019695b9dad1b5", "committedDate": "2020-06-15T14:35:53Z", "message": "Change here link"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNzA1NzQ5", "url": "https://github.com/elastic/stack-docs/pull/1160#pullrequestreview-430705749", "createdAt": "2020-06-15T14:36:20Z", "commit": {"oid": "964c6274e61519b6f94a2780f5019695b9dad1b5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDozNjoyMFrOGj1Cmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDozNjoyMFrOGj1Cmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyMjM2Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            //REVIEWERS: Using \"here\" for link text is strongly discouraged because it's\n          \n          \n            \n            //bad for SEO. What text should we provide instead?", "url": "https://github.com/elastic/stack-docs/pull/1160#discussion_r440222362", "createdAt": "2020-06-15T14:36:20Z", "author": {"login": "dedemorton"}, "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,72 +4,181 @@\n \n experimental[]\n \n-//TODO: Do a technical edit of this content.\n-\n This early release of {ingest-management} is experimental. We invite you to\n install and test these capabilities **in a test environment**. You might run\n into problems and need to modify your setup to get this feature running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback[here]. Your feedback is very valuable to us.\n+We have collected the most common known problems and frequently asked questions\n+here. If your question isn't answered here, please review open issues in the\n+following GitHub repositories:\n+\n+* https://github.com/elastic/kibana/issues[{kib}]\n+* https://github.com/elastic/beats/issuess[{beats}]\n+* https://github.com/elastic/package-registry/issues[{package-registry}]\n+\n+Contact us in the https://ela.st/ingest-manager-feedback[discuss forum]. Your feedback is very\n+valuable to us.\n+\n+//REVIEWERS: Using \"here\" for link text is strongly discouraged because it's\n+//bad for SEO. What text should we provide instead? ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "964c6274e61519b6f94a2780f5019695b9dad1b5"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNzA2NDkw", "url": "https://github.com/elastic/stack-docs/pull/1160#pullrequestreview-430706490", "createdAt": "2020-06-15T14:37:05Z", "commit": {"oid": "964c6274e61519b6f94a2780f5019695b9dad1b5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDozNzowNVrOGj1Erg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDozNzowNVrOGj1Erg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyMjg5NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            //REVIEWERS: I don't want to have separate sections for cloud vs self-managed\n          \n          \n            \n            //because we are working on a widget for switching between instructions for\n          \n          \n            \n            //the two. Also I think it's more confusing to users if we have two sections\n          \n          \n            \n            //that cover the same content.", "url": "https://github.com/elastic/stack-docs/pull/1160#discussion_r440222894", "createdAt": "2020-06-15T14:37:05Z", "author": {"login": "dedemorton"}, "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,72 +4,181 @@\n \n experimental[]\n \n-//TODO: Do a technical edit of this content.\n-\n This early release of {ingest-management} is experimental. We invite you to\n install and test these capabilities **in a test environment**. You might run\n into problems and need to modify your setup to get this feature running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback[here]. Your feedback is very valuable to us.\n+We have collected the most common known problems and frequently asked questions\n+here. If your question isn't answered here, please review open issues in the\n+following GitHub repositories:\n+\n+* https://github.com/elastic/kibana/issues[{kib}]\n+* https://github.com/elastic/beats/issuess[{beats}]\n+* https://github.com/elastic/package-registry/issues[{package-registry}]\n+\n+Contact us in the https://ela.st/ingest-manager-feedback[discuss forum]. Your feedback is very\n+valuable to us.\n+\n+//REVIEWERS: Using \"here\" for link text is strongly discouraged because it's\n+//bad for SEO. What text should we provide instead? \n+\n+**Common problems:**\n+\n+* <<ingest-manager-not-in-kibana>>\n+* <<ingest-management-setup-fails>>\n+* <<ingest-manager-app-crashes>>\n+* <<agent-enrollment-timeout>>\n+\n+**Frequently asked questions:**\n+\n+* <<enrolled-agent-not-showing-up>>\n+* <<where-are-the-agent-logs>>\n+* <<what-is-my-agent-config>>\n+* <<where-is-the-data-agent-is-sending>>\n+* <<i-deleted-my-agent>>\n+* <<i-need-to-stop-agent>>\n+* <<i-rebooted-my-host>>\n+* <<what-is-the-endpoint-package>>\n \n [float]\n-[[ingest-manager-not-in-cloud-kibana]]\n-== The {ingest-manager} app is not listed in my {kib} cloud navigation list\n+[[ingest-manager-not-in-kibana]]\n+== The {ingest-manager} app is not listed in the {kib} side navigation\n+\n+In 7.8, the {ingest-manager} app is experimental. You must enable the app to\n+see it in {kib}.\n+\n+//REVIEWERS: I don't want to have separate sections for cloud vs self-managed\n+//because we are working on a widget for switching between instructions for\n+//the two. Also I think it's more confusing to users if we have two sections\n+//that cover the same content. \n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "964c6274e61519b6f94a2780f5019695b9dad1b5"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNzA3MDEz", "url": "https://github.com/elastic/stack-docs/pull/1160#pullrequestreview-430707013", "createdAt": "2020-06-15T14:37:40Z", "commit": {"oid": "964c6274e61519b6f94a2780f5019695b9dad1b5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDozNzo0MFrOGj1GOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDozNzo0MFrOGj1GOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyMzI4OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            //REVIEWERS: Can't on-premise also mean cloud? I've seen self-managed used, too\n          \n          \n            \n            //so I've used that here.", "url": "https://github.com/elastic/stack-docs/pull/1160#discussion_r440223289", "createdAt": "2020-06-15T14:37:40Z", "author": {"login": "dedemorton"}, "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,72 +4,181 @@\n \n experimental[]\n \n-//TODO: Do a technical edit of this content.\n-\n This early release of {ingest-management} is experimental. We invite you to\n install and test these capabilities **in a test environment**. You might run\n into problems and need to modify your setup to get this feature running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback[here]. Your feedback is very valuable to us.\n+We have collected the most common known problems and frequently asked questions\n+here. If your question isn't answered here, please review open issues in the\n+following GitHub repositories:\n+\n+* https://github.com/elastic/kibana/issues[{kib}]\n+* https://github.com/elastic/beats/issuess[{beats}]\n+* https://github.com/elastic/package-registry/issues[{package-registry}]\n+\n+Contact us in the https://ela.st/ingest-manager-feedback[discuss forum]. Your feedback is very\n+valuable to us.\n+\n+//REVIEWERS: Using \"here\" for link text is strongly discouraged because it's\n+//bad for SEO. What text should we provide instead? \n+\n+**Common problems:**\n+\n+* <<ingest-manager-not-in-kibana>>\n+* <<ingest-management-setup-fails>>\n+* <<ingest-manager-app-crashes>>\n+* <<agent-enrollment-timeout>>\n+\n+**Frequently asked questions:**\n+\n+* <<enrolled-agent-not-showing-up>>\n+* <<where-are-the-agent-logs>>\n+* <<what-is-my-agent-config>>\n+* <<where-is-the-data-agent-is-sending>>\n+* <<i-deleted-my-agent>>\n+* <<i-need-to-stop-agent>>\n+* <<i-rebooted-my-host>>\n+* <<what-is-the-endpoint-package>>\n \n [float]\n-[[ingest-manager-not-in-cloud-kibana]]\n-== The {ingest-manager} app is not listed in my {kib} cloud navigation list\n+[[ingest-manager-not-in-kibana]]\n+== The {ingest-manager} app is not listed in the {kib} side navigation\n+\n+In 7.8, the {ingest-manager} app is experimental. You must enable the app to\n+see it in {kib}.\n+\n+//REVIEWERS: I don't want to have separate sections for cloud vs self-managed\n+//because we are working on a widget for switching between instructions for\n+//the two. Also I think it's more confusing to users if we have two sections\n+//that cover the same content. \n \n-In 7.8, the {ingest-manager} app is in Alpha state and as such is only shown when specifically enabled in the start up or cloud 'override' options. To enable {ingest-manager} on cloud, go to your deployment in the user console. Click on the 'edit' link directly beneath the deployment name. Then click on 'user setting overrides' underneath the {kib} heading. Here you must enter the following x-pack option and click the save button at the bottom:\n+//TODO: Add platform tabs when the tabbed panel widget is stable (possibly after\n+// 7.8)\n \n+**To enable {ingest-manager} on cloud:**\n+\n+. Go to your deployment in the user console.\n+\n+. Under the deployment name in the side navigation, click **Edit**.\n+\n+. In the {kib} section, expand **User setting overrides** and enter the\n+following setting:\n++\n [source,yaml]\n ----\n xpack.ingestManager.enabled: true\n ----\n \n-This will restart {kib} automatically and when done, you can refresh the browser and see the app in the left hand navigation.\n+. Click **Save**.\n+\n+{kib} will restart automatically. When {kib} is available, refresh the browser\n+to see the {ingest-manager} app in the navigation menu.\n+\n+**To enable {ingest-manager} on a self-managed cluster:**\n+\n+//REVIEWERS: Can't on-premise also mean cloud? I've seen self-managed used, too\n+//so I've used that here. \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "964c6274e61519b6f94a2780f5019695b9dad1b5"}, "originalPosition": 85}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNzA3OTIz", "url": "https://github.com/elastic/stack-docs/pull/1160#pullrequestreview-430707923", "createdAt": "2020-06-15T14:38:35Z", "commit": {"oid": "964c6274e61519b6f94a2780f5019695b9dad1b5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDozODozNVrOGj1JCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDozODozNVrOGj1JCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyNDAxMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            //REVIEWERS: Do we want to show the kill command. Not sure...if we do, which\n          \n          \n            \n            //kill command should we show?  kill -9? kill SIGTERM?", "url": "https://github.com/elastic/stack-docs/pull/1160#discussion_r440224010", "createdAt": "2020-06-15T14:38:35Z", "author": {"login": "dedemorton"}, "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -78,81 +187,121 @@ elastic-agent.exe run\n \n [float]\n [[where-are-the-agent-logs]]\n-== I need to find the logs when {agent} starts up\n+== Where does {agent} store logs after startup?\n \n-When started successfully, the logs are in the folder where the {agent} was started, in a sub-directory `data/logs/metricbeat`.\n-If that path of logs does not exist, it indicates the agent did not successfully run {metricbeat}, which is a higher level problem to triage.\n+When started successfully, {metricbeat} logs are stored in\n+`data/logs/metricbeat` under the folder where {agent} was started. If that log\n+path does not exist, the agent was unable to start {metricbeat}, which is a\n+higher level problem to triage.\n \n [float]\n [[what-is-my-agent-config]]\n-== I need to know the configuration used in the running {agent}\n+== What configuration is the {agent} running?\n \n-You can inspect the files in the folder from where you ran {agent}. The `elastic-agent.yml` file will have an uncommented citation if it is in '{fleet}' mode:\n+To find the configuration file, inspect the `elastic-agent.yml` file in the\n+folder where you ran {agent}. If you're running the agent in {fleet} mode, this\n+file contains the following citation:\n+\n+[source,yaml]\n+----\n Management: mode: \"fleet\"\n+----\n+\n+The `action_store.yml` contains the entire, unencrypted configuration:\n \n-The `action_store.yml` has the whole configuration, unencrypted. Look for 'outputs:hosts' section with elasticsearch location. This file will also have the current versions of the packages in use by the current configuration. The version of the {agent} is in the download folder / zip.\n+* To see the {es} location, look at `outputs:hosts`.\n+* To see the {agent} version, look at the download folder and zip filenames.\n+\n+This file also shows the version of all packages used by the current\n+configuration.\n \n [float]\n [[where-is-the-data-agent-is-sending]]\n-== I'm not sure {ingest-manager} app is showing the data my {agent} is sending\n+== Why can't I see the data {agent} is sending?\n \n-I think I have {agent} set up and running and there are no errors on the agent logs and I still don't see data in {kib}. The recommended way to assess this is to go straight to {es} data queries, or maybe just use {kib} Discover app. Look for any data in the index your {agent} is sending to (metrics-* for example) and see if the name.host of your host machine shows. If not, then perhaps the data is getting trapped / blocked in the network or isn't sent off of the {agent} host correctly in the first place due to some Firewall or security reason. While it should be redundant, it is all the same potentially helpful to install the stand-alone Metricbeat (see the Elastic docs for information) to see if that works to send data into ES, which would indicate a bug or problem in the {agent} side.\n+If {elastic-agent} is set up and running, but you don't see data in {kib}:\n \n-[float]\n-[[i-deleted-my-agent]]\n-== I deleted {agent} in the {fleet} {ingest-manager} app how can I get it back?\n \n-Its ok, we got your back!  The data is still in {es}. And get the {agent} back in the UI, you will need only to stop, then re-enroll the {agent} on the host and run it again.\n \n-[float]\n-[[i-need-to-stop-agent]]\n-== I need to stop {agent} and all processes running on my host\n+. Go to **Management > Dev Tools** in {kib}, and in the Console, search your\n+index for data. For example:\n++\n+[source,console]\n+----\n+GET metrics-*/_search\n+----\n++\n+Or if you prefer, go to the **Discover** app.\n \n-To stop the {agent} and relating executables running on my hosts is as easy as stopping the {agent} process. If you installed it as a service on Windows you will need to manage that, as well. After that, if needed, on Windows you can use Task Manager and shut down {agent} which will kill it and the sub-processes it created ({beats}). On Linux / macOS you can kill the `elastic-agent` process running, look with a `ps | grep elastic-agent` call to get the id to kill.\n+. Look at the data that {elastic-agent} has sent and see if the `name.host`\n+field contains your host machine name.\n \n-[float]\n-[[i-rebooted-my-host]]\n-== I needed to reboot my host, how do I restart {agent}?\n+If you don't see data for your host, it's possible that the data is blocked\n+in the network, or that a firewall or security problem is preventing the {agent}\n+from sending the data.\n+\n+Although it's redundant to install stand-alone {metricbeat}, you might want to\n+try installing it to see if it's able to send data successfully to {es}. For\n+more information, see\n+{metricbeat-ref}/metricbeat-getting-started.html[Get started with {metricbeat}].\n \n-If you installed {agent} on Windows as a service with powershell, the agent should still be running after a reboot of the host. On macOS and Linux you will need to start the agent again from the command line each time as noted in the prior Agent start up steps. Adding support to install as a service on all supported systems will be done in a future release. To achieve this in the meantime, you can add the start command to a user's start up profile.\n+If {metricbeat} is able to send data to {es}, there is possibly a bug or\n+problem with {agent}, and you should report it.\n \n [float]\n-[[what-is-the-endpoint-package]]\n-== The {ingest-manager} app shows an Integration called 'Endpoint', what is it?\n+[[i-deleted-my-agent]]\n+== How do I restore an {agent} that I deleted from {fleet}?\n \n-In 7.8, the Endpoint Integration is non-functional. It cannot be used yet. It exists as an artifact of the current feature development, please watch for announcements during coming release cycles. As a teaser, Endpoint is the integration that will allow the Elastic Security app to have a dedicated executable running like a beat to protect the host and allow responses to security concerns that are found. It will be managed by {agent} as other beats are.\n+It's ok, we've got your back! The data is still in {es}. To add {agent}\n+to {fleet} again, stop the agent, re-enroll the {agent} on the host, then run\n+{agent}.\n \n [float]\n-[[ingest-manager-not-in-on-prem-kibana]]\n-== The {ingest-manager} app is not listed in my {kib} on-premises navigation list.\n+[[i-need-to-stop-agent]]\n+== How do I stop {agent} and all processes running on my host?\n \n-In 7.8, the {ingest-manager} app is in Alpha state and as such is only shown when specifically enabled in the start up config. To do this you must modify both the {es} and {kib} configs as well as adhering to all 'security enabled' requirements, like modifying the default elastic user password, see below for details:\n+To stop {agent} and its related executables, stop the {agent} process.\n \n-For {es}, file `config/elasticsearch.yml` you must set these startup options:\n+On Windows, if you installed the agent as a service, stop the service. If\n+necessary, use Task Manager on Windows to stop {agent}. This will kill the\n+{agent} process and any sub-processes it created (such as {beats}).\n \n-[source,yaml]\n+On Linux or macOS, run the following command to get the ID of the\n+`elastic-agent` process:\n+\n+[source,shell]\n ----\n-xpack.security.enabled: true\n-xpack.security.authc.api_key.enabled: true\n+ps | grep elastic-agent\n ----\n \n-For {kib} `config/kibana.yml` you must set these start up options (the exception is tlsCheckDisabled which is not required if configure TLS checking)\n+Then kill the process.\n \n-[source,yaml]\n-----\n-xpack.ingestManager.enabled: true\n-xpack.ingestManager.fleet.tlsCheckDisabled: true\n-xpack.security.enabled: true\n-elasticsearch.username: \"elastic\"\n-elasticsearch.password: \"abc123iUnbRftkABC123\"\n-----\n+//REVIEWERS: Do we want to show the kill command. Not sure...if we do, which\n+//kill command should we show?  kill -9? kill SIGTERM?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "964c6274e61519b6f94a2780f5019695b9dad1b5"}, "originalPosition": 336}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6052389f5357bdc74cc0da28c439181dffe787ca", "author": {"user": {"login": "dedemorton", "name": "DeDe Morton"}}, "url": "https://github.com/elastic/stack-docs/commit/6052389f5357bdc74cc0da28c439181dffe787ca", "committedDate": "2020-06-15T14:39:35Z", "message": "Remove remaining REVIEWER notes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4774, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}