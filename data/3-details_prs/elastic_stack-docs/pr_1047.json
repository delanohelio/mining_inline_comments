{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0Mzk1NzMz", "number": 1047, "title": "[DOCS] Update snapshot retention details", "bodyText": "This PR updates the \"Model snapshots\" page with details about how long snapshots are retained. It also includes minor improvements to other sections of that page.\nRelated to elastic/elasticsearch#52150\nPreview: http://stack-docs_1047.docs-preview.app.elstc.co/guide/en/machine-learning/master/ml-model-snapshots.html", "createdAt": "2020-05-07T00:16:29Z", "url": "https://github.com/elastic/stack-docs/pull/1047", "merged": true, "mergeCommit": {"oid": "5baaa859e4e64120ff2017c2deb96c077ad6334a"}, "closed": true, "closedAt": "2020-05-13T16:16:44Z", "author": {"login": "lcawl"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcex7LmAH2gAyNDE0Mzk1NzMzOmJiM2U1ZGZmZmQ5NTliYzBmMzA0NTY2M2FlZTA2MTFlMzA0OTg3N2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcg6usIgFqTQxMTA1MTY0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bb3e5dfffd959bc0f3045663aee0611e3049877c", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/stack-docs/commit/bb3e5dfffd959bc0f3045663aee0611e3049877c", "committedDate": "2020-05-07T00:13:48Z", "message": "[DOCS] Update snapshot retention details"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MDc0MDUx", "url": "https://github.com/elastic/stack-docs/pull/1047#pullrequestreview-407074051", "createdAt": "2020-05-07T00:25:42Z", "commit": {"oid": "bb3e5dfffd959bc0f3045663aee0611e3049877c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMDoyNTo0MlrOGRqD2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMDoyNTo0MlrOGRqD2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE2ODA5MA==", "bodyText": "Do we need to cover how age is calculated here too? For example:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            each day, old snapshots are automatically deleted. By default, if there are\n          \n          \n            \n            each day, old snapshots are automatically deleted. The age of each snapshot is calculated relative to the timestamp of the most recent snapshot. By default, if there are", "url": "https://github.com/elastic/stack-docs/pull/1047#discussion_r421168090", "createdAt": "2020-05-07T00:25:42Z", "author": {"login": "lcawl"}, "path": "docs/en/stack/ml/anomaly-detection/model-snapshots.asciidoc", "diffHunk": "@@ -8,21 +8,28 @@ accomplished by generating models of your data.\n \n To ensure resilience in the event of a system failure, snapshots of the {ml}\n model for each {anomaly-job} are saved to an internal index within the {es}\n-cluster. By default, snapshots are captured approximately every 3 to 4 hours and \n-retained for one day (twenty-four hours). The amount of time necessary to\n-save these snapshots is proportional to the size of the model in memory.\n+cluster. The amount of time necessary to save these snapshots is proportional to\n+the size of the model in memory. By default, snapshots are captured\n+approximately every 3 to 4 hours. You can change this interval\n+(`background_persist_interval`) when you create or update a job.\n \n-You can use the {ref}/ml-update-job.html[update {anomaly-jobs} API] to change\n-the interval (`background_persist_interval`) and retention\n-(`model_snapshot_retention_days`) of these snapshots.\n+To reduce the number of snapshots consuming space on your cluster, at the end of\n+each day, old snapshots are automatically deleted. By default, if there are", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb3e5dfffd959bc0f3045663aee0611e3049877c"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MDc0MzU5", "url": "https://github.com/elastic/stack-docs/pull/1047#pullrequestreview-407074359", "createdAt": "2020-05-07T00:26:38Z", "commit": {"oid": "bb3e5dfffd959bc0f3045663aee0611e3049877c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMDoyNjozOFrOGRqFCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMDoyNjozOFrOGRqFCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE2ODM5NA==", "bodyText": "Likewise, incorporating relative age:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            snapshots over one day old, only the first snapshot for each day is retained.\n          \n          \n            \n            snapshots over one day older than the most recent snapshot, only the first snapshot for each day is retained.", "url": "https://github.com/elastic/stack-docs/pull/1047#discussion_r421168394", "createdAt": "2020-05-07T00:26:38Z", "author": {"login": "lcawl"}, "path": "docs/en/stack/ml/anomaly-detection/model-snapshots.asciidoc", "diffHunk": "@@ -8,21 +8,28 @@ accomplished by generating models of your data.\n \n To ensure resilience in the event of a system failure, snapshots of the {ml}\n model for each {anomaly-job} are saved to an internal index within the {es}\n-cluster. By default, snapshots are captured approximately every 3 to 4 hours and \n-retained for one day (twenty-four hours). The amount of time necessary to\n-save these snapshots is proportional to the size of the model in memory.\n+cluster. The amount of time necessary to save these snapshots is proportional to\n+the size of the model in memory. By default, snapshots are captured\n+approximately every 3 to 4 hours. You can change this interval\n+(`background_persist_interval`) when you create or update a job.\n \n-You can use the {ref}/ml-update-job.html[update {anomaly-jobs} API] to change\n-the interval (`background_persist_interval`) and retention\n-(`model_snapshot_retention_days`) of these snapshots.\n+To reduce the number of snapshots consuming space on your cluster, at the end of\n+each day, old snapshots are automatically deleted. By default, if there are\n+snapshots over one day old, only the first snapshot for each day is retained.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb3e5dfffd959bc0f3045663aee0611e3049877c"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2beee2bd5ddda40bc5a0fb8fd89cf96b26ee418c", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/stack-docs/commit/2beee2bd5ddda40bc5a0fb8fd89cf96b26ee418c", "committedDate": "2020-05-07T17:01:01Z", "message": "Update docs/en/stack/ml/anomaly-detection/model-snapshots.asciidoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3542bec9fb9661033ca8a88ae487825c98a04d0c", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/stack-docs/commit/3542bec9fb9661033ca8a88ae487825c98a04d0c", "committedDate": "2020-05-07T17:01:20Z", "message": "Update docs/en/stack/ml/anomaly-detection/model-snapshots.asciidoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "740549325d6a0da18d101bb5840cc263cf9b0734", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/stack-docs/commit/740549325d6a0da18d101bb5840cc263cf9b0734", "committedDate": "2020-05-07T17:09:31Z", "message": "[DOCS] More edits"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4MTQ4MzY5", "url": "https://github.com/elastic/stack-docs/pull/1047#pullrequestreview-408148369", "createdAt": "2020-05-08T10:30:37Z", "commit": {"oid": "740549325d6a0da18d101bb5840cc263cf9b0734"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxMDozMDozN1rOGShEfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxMDozMDozN1rOGShEfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjA2OTM3Mw==", "bodyText": "Should we link to the APIs where the users can change the interval?", "url": "https://github.com/elastic/stack-docs/pull/1047#discussion_r422069373", "createdAt": "2020-05-08T10:30:37Z", "author": {"login": "szabosteve"}, "path": "docs/en/stack/ml/anomaly-detection/model-snapshots.asciidoc", "diffHunk": "@@ -8,21 +8,30 @@ accomplished by generating models of your data.\n \n To ensure resilience in the event of a system failure, snapshots of the {ml}\n model for each {anomaly-job} are saved to an internal index within the {es}\n-cluster. By default, snapshots are captured approximately every 3 to 4 hours and \n-retained for one day (twenty-four hours). The amount of time necessary to\n-save these snapshots is proportional to the size of the model in memory.\n+cluster. The amount of time necessary to save these snapshots is proportional to\n+the size of the model in memory. By default, snapshots are captured\n+approximately every 3 to 4 hours. You can change this interval\n+(`background_persist_interval`) when you create or update a job.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "740549325d6a0da18d101bb5840cc263cf9b0734"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13d47ddd644295e805fa76d8e479cef81d9c2ee8", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/stack-docs/commit/13d47ddd644295e805fa76d8e479cef81d9c2ee8", "committedDate": "2020-05-08T16:43:48Z", "message": "[DOCS] Adds API links"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMDUxNjQ3", "url": "https://github.com/elastic/stack-docs/pull/1047#pullrequestreview-411051647", "createdAt": "2020-05-13T15:37:09Z", "commit": {"oid": "13d47ddd644295e805fa76d8e479cef81d9c2ee8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4828, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}