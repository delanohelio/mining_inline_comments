{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxNjgxNDgw", "number": 842, "title": "[DOCS] Adds screenshots to regression example", "bodyText": "This PR adds Kibana screenshots to the data frame analytics regression example (https://www.elastic.co/guide/en/machine-learning/7.6/flightdata-regression.html).\nPreview: http://stack-docs_842.docs-preview.app.elstc.co/guide/en/machine-learning/master/flightdata-regression.html", "createdAt": "2020-02-06T02:48:41Z", "url": "https://github.com/elastic/stack-docs/pull/842", "merged": true, "mergeCommit": {"oid": "2c8479683883c2ab70d671b23bdd835df26380b2"}, "closed": true, "closedAt": "2020-02-07T17:06:28Z", "author": {"login": "lcawl"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBhkO7gH2gAyMzcxNjgxNDgwOjQzNWYyZjg3NjIxMjI1NjAwNzE3ZDdkNjIxYzUwODE0OGFiMGFmOTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcCCJDpAH2gAyMzcxNjgxNDgwOjQwZGQ0NDQ0MWQ5Mzc1NWZiNWY1NjliZDMwZjI4MGM4YTliOTk2N2U=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "435f2f87621225600717d7d621c508148ab0af96", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/stack-docs/commit/435f2f87621225600717d7d621c508148ab0af96", "committedDate": "2020-02-06T02:46:27Z", "message": "[DOCS] Adds screeshots to regression example"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "910499067a198a67d1cefb2df34778bee880e376", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/stack-docs/commit/910499067a198a67d1cefb2df34778bee880e376", "committedDate": "2020-02-06T21:25:14Z", "message": "[DOCS] Scales image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3cf95ee4f86506c174900b081e2929a57c612266", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/stack-docs/commit/3cf95ee4f86506c174900b081e2929a57c612266", "committedDate": "2020-02-06T21:44:00Z", "message": "[DOCS] More image manipulations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "966d02940a6c749a81ac3a3e7053e4961d77d5e5", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/stack-docs/commit/966d02940a6c749a81ac3a3e7053e4961d77d5e5", "committedDate": "2020-02-06T23:34:22Z", "message": "[DOCS] Merges view and evaluate sections"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "effeb08d3061a270bafd8981d52ddc2fb657a3ec", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/stack-docs/commit/effeb08d3061a270bafd8981d52ddc2fb657a3ec", "committedDate": "2020-02-07T03:06:27Z", "message": "[DOCS] Re-adds the evaluation section"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MjM5Mjc4", "url": "https://github.com/elastic/stack-docs/pull/842#pullrequestreview-355239278", "createdAt": "2020-02-07T15:33:32Z", "commit": {"oid": "effeb08d3061a270bafd8981d52ddc2fb657a3ec"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxNTozMzozMlrOFnA87Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxNTo0NTozM1rOFnBXDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ1NDM4MQ==", "bodyText": "missing \"are\" in \"... and field that analyzed\"", "url": "https://github.com/elastic/stack-docs/pull/842#discussion_r376454381", "createdAt": "2020-02-07T15:33:32Z", "author": {"login": "dimitris-athanasiou"}, "path": "docs/en/stack/ml/df-analytics/flightdata-regression.asciidoc", "diffHunk": "@@ -116,74 +141,72 @@ PUT _ml/data_frame/analytics/model-flight-delays\n     }\n   },\n   \"dest\": {\n-    \"index\": \"df-flight-delays\"  <3>\n+    \"index\": \"df-flight-delays\"\n   },\n   \"analysis\": {\n     \"regression\": {\n-      \"dependent_variable\": \"FlightDelayMin\",  <4>\n-      \"training_percent\": 90  <5>\n+      \"dependent_variable\": \"FlightDelayMin\",\n+      \"training_percent\": 90\n     }\n   },\n   \"analyzed_fields\": {\n     \"includes\": [],\n-    \"excludes\": [    <6>\n+    \"excludes\": [\n       \"Cancelled\",\n       \"FlightDelay\",\n       \"FlightDelayType\"\n     ]\n   },\n-  \"model_memory_limit\": \"100mb\" <7>\n+  \"model_memory_limit\": \"100mb\"\n }\n --------------------------------------------------\n // TEST[skip:setup kibana sample data]\n \n-<1> The source index to analyze.\n-<2> This query removes erroneous data from the analysis to improve its quality.\n-<3> The index that will contain the results of the analysis; it will consist of \n-a copy of the source index data where each document is annotated with the \n-results.\n-<4> Specifies the continuous variable we want to predict with the {reganalysis}.\n-<5> Specifies the approximate proportion of data that is used for training. In \n-this example we randomly select 90% of the source data for training.\n-<6> Specifies fields to be excluded from the analysis. It is recommended to \n-exclude fields that either contain erroneous data or describe the \n-`dependent_variable`.\n-<7> Specifies a memory limit for the job. If the job requires more than this \n-amount of memory, it fails to start. This makes it possible to prevent job \n-execution if the available memory on the node is limited.\n+<1> This optional query removes erroneous data from the analysis to improve its\n+quality.\n+====\n --\n \n-. Start the job.\n+. Start the job in {kib} or use the\n+{ref}/start-dfanalytics.html[start {dfanalytics-jobs}] API.\n +\n --\n-Use the {ref}/start-dfanalytics.html[start {dfanalytics-jobs}] API to start the \n-job. It will stop automatically when the analysis is complete.\n+The job takes a few minutes to run. Runtime depends on the local hardware and \n+also on the number of documents and fields that analyzed. The more fields and ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "effeb08d3061a270bafd8981d52ddc2fb657a3ec"}, "originalPosition": 123}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ2MDg2OQ==", "bodyText": "This works just fine! Only one suggestion below", "url": "https://github.com/elastic/stack-docs/pull/842#discussion_r376460869", "createdAt": "2020-02-07T15:45:09Z", "author": {"login": "dimitris-athanasiou"}, "path": "docs/en/stack/ml/df-analytics/flightdata-regression.asciidoc", "diffHunk": "@@ -246,33 +282,46 @@ The snippet below shows a part of a document with the annotated results:\n           \"DestRegion\" : \"UK\",\n           \"OriginAirportID\" : \"LHR\",\n           \"DestCityName\" : \"London\",\n-          \"FlightDelayMin\" : 66,      <1>\n+          \"FlightDelayMin\" : 66,\n           \"ml\" : {\n-            \"FlightDelayMin_prediction\" : 62.527,   <2>\n-            \"is_training\" : false   <3>\n+            \"FlightDelayMin_prediction\" : 62.527,\n+            \"is_training\" : false\n           }\n           ...\n ----\n-\n-<1> The `dependent_variable` with the ground truth value. This is what we are \n-trying to predict with the {reganalysis}.\n-<2> The prediction. The field name is suffixed with `_prediction`.\n-<3> Indicates that this document was not used in the training set.\n+====\n \n \n [[flightdata-regression-evaluate]]\n-==== Evaluating results\n-\n-The results can be evaluated for documents which contain both the ground truth \n-field and the prediction. In the example below, `FlightDelayMins` contains the \n-ground truth and the prediction is stored as `ml.FlightDelayMin_prediction`.\n-\n-. Use the {dfanalytics} evaluate API to evaluate the results.\n-+\n---\n-First, we want to know the training error that represents how well the model \n-performed on the training dataset:\n-\n+==== Evaluating {regression} results\n+\n+Though you can look at individual results and compare the predicted value\n+(`ml.FlightDelayMin_prediction`) to the actual value (`FlightDelayMins`), you\n+typically need to evaluate the success of the {regression} model as a whole.\n+\n+{kib} provides _training error_ metrics, which represent how well the model\n+performed on the training dataset. It also provides _generalization error_\n+metrics, which represent how well the model performed on testing data.\n+\n+For more information about the interpreting the evaluation metrics, see\n+<<ml-dfanalytics-regression-evaluation>>.\n+\n+////\n+TBD: Can we provide tips for what are good MSE or R-squared values? For example:\n+A MSE of zero means that the models predicts the dependent variable with", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "effeb08d3061a270bafd8981d52ddc2fb657a3ec"}, "originalPosition": 271}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ2MTA3MA==", "bodyText": "\"can be predicted from the feature variables\" -> \"can be explained by the feature variables\"", "url": "https://github.com/elastic/stack-docs/pull/842#discussion_r376461070", "createdAt": "2020-02-07T15:45:33Z", "author": {"login": "dimitris-athanasiou"}, "path": "docs/en/stack/ml/df-analytics/flightdata-regression.asciidoc", "diffHunk": "@@ -246,33 +282,46 @@ The snippet below shows a part of a document with the annotated results:\n           \"DestRegion\" : \"UK\",\n           \"OriginAirportID\" : \"LHR\",\n           \"DestCityName\" : \"London\",\n-          \"FlightDelayMin\" : 66,      <1>\n+          \"FlightDelayMin\" : 66,\n           \"ml\" : {\n-            \"FlightDelayMin_prediction\" : 62.527,   <2>\n-            \"is_training\" : false   <3>\n+            \"FlightDelayMin_prediction\" : 62.527,\n+            \"is_training\" : false\n           }\n           ...\n ----\n-\n-<1> The `dependent_variable` with the ground truth value. This is what we are \n-trying to predict with the {reganalysis}.\n-<2> The prediction. The field name is suffixed with `_prediction`.\n-<3> Indicates that this document was not used in the training set.\n+====\n \n \n [[flightdata-regression-evaluate]]\n-==== Evaluating results\n-\n-The results can be evaluated for documents which contain both the ground truth \n-field and the prediction. In the example below, `FlightDelayMins` contains the \n-ground truth and the prediction is stored as `ml.FlightDelayMin_prediction`.\n-\n-. Use the {dfanalytics} evaluate API to evaluate the results.\n-+\n---\n-First, we want to know the training error that represents how well the model \n-performed on the training dataset:\n-\n+==== Evaluating {regression} results\n+\n+Though you can look at individual results and compare the predicted value\n+(`ml.FlightDelayMin_prediction`) to the actual value (`FlightDelayMins`), you\n+typically need to evaluate the success of the {regression} model as a whole.\n+\n+{kib} provides _training error_ metrics, which represent how well the model\n+performed on the training dataset. It also provides _generalization error_\n+metrics, which represent how well the model performed on testing data.\n+\n+For more information about the interpreting the evaluation metrics, see\n+<<ml-dfanalytics-regression-evaluation>>.\n+\n+////\n+TBD: Can we provide tips for what are good MSE or R-squared values? For example:\n+A MSE of zero means that the models predicts the dependent variable with\n+perfect accuracy. This is the ideal, but is typically not possible. Likewise, an\n+R-squared value of 1 indicates that all of the variance in the dependent variable\n+can be predicted from the feature variables. Typically, you compare the MSE and", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "effeb08d3061a270bafd8981d52ddc2fb657a3ec"}, "originalPosition": 274}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21fe499327c018447ce4bcf3bef1b7ccc8ec56a7", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/stack-docs/commit/21fe499327c018447ce4bcf3bef1b7ccc8ec56a7", "committedDate": "2020-02-07T16:34:37Z", "message": "[DOCS] Addresses feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40dd44441d93755fb5f569bd30f280c8a9b9967e", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/stack-docs/commit/40dd44441d93755fb5f569bd30f280c8a9b9967e", "committedDate": "2020-02-07T16:43:38Z", "message": "[DOCS] Terminology fix"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4950, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}