{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1NjQ1NjE3", "number": 1471, "title": "[DOCS] Reviews anomaly detection limitations", "bodyText": "Overview\nThis PR:\n\narranges the anomaly detection related limitations into four groups (and adds a short explanation about them to the intro):\n\nPlatform\nConfiguration\nOperation\nUI\n\n\ncomments out Jobs close on the datafeed end date as the described behavior is not a limitation. (This information will be published in the AD feature documentation in a separate PR, then removed from this piece.)\nremoves the following limitations:\n\nJobs must be stopped before updates (changed in 6.3)\nDate nanoseconds data types are not supported (changed in 7.7)\n\n\namends the following limitations:\n\nSecurity integration\nAnomaly Explorer and Single Metric Viewer omissions and limitations\nJobs created in Kibana use model plot config and pre-aggregated data.\n\n\n\n(This PR does not remove Machine learning objects do not belong to Kibana spaces due to backporting considerations. That limitation will be modified in another PR.)\nPreview\nAD limitations", "createdAt": "2020-11-23T11:01:41Z", "url": "https://github.com/elastic/stack-docs/pull/1471", "merged": true, "mergeCommit": {"oid": "34fc8978c46d42a8802d1016db33ae57ec848ba8"}, "closed": true, "closedAt": "2020-11-26T10:35:31Z", "author": {"login": "szabosteve"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeaa3DAH2gAyNTI1NjQ1NjE3OmMwMjcxNmMwM2JlODIyMDM5YzliOTY5OWNiYjZlODBkMDU3ZDY5NjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgQNbzAH2gAyNTI1NjQ1NjE3Ojc2ZDc4NWQ3OGQwNTg5OTQ4NjQwODVjMTQwMmI1MWMyOThmNmQ4OWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c02716c03be822039c9b9699cbb6e80d057d6960", "author": {"user": {"login": "szabosteve", "name": "Istv\u00e1n Zolt\u00e1n Szab\u00f3"}}, "url": "https://github.com/elastic/stack-docs/commit/c02716c03be822039c9b9699cbb6e80d057d6960", "committedDate": "2020-11-20T17:01:50Z", "message": "[DOCS] Orders AD limitations into groups."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "407a4e1e15742387322457450793f242a8eb78fc", "author": {"user": {"login": "szabosteve", "name": "Istv\u00e1n Zolt\u00e1n Szab\u00f3"}}, "url": "https://github.com/elastic/stack-docs/commit/407a4e1e15742387322457450793f242a8eb78fc", "committedDate": "2020-11-23T10:12:37Z", "message": "[DOCS] Orders AD limitations into four groups."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4402501c23d52c2256968b93d6c7b06eb0e216f8", "author": {"user": {"login": "szabosteve", "name": "Istv\u00e1n Zolt\u00e1n Szab\u00f3"}}, "url": "https://github.com/elastic/stack-docs/commit/4402501c23d52c2256968b93d6c7b06eb0e216f8", "committedDate": "2020-11-23T11:02:00Z", "message": "[DOCS] Removes and amends limitations."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NzcyNDc0", "url": "https://github.com/elastic/stack-docs/pull/1471#pullrequestreview-536772474", "createdAt": "2020-11-23T19:15:43Z", "commit": {"oid": "4402501c23d52c2256968b93d6c7b06eb0e216f8"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4Mzc4MTQ5", "url": "https://github.com/elastic/stack-docs/pull/1471#pullrequestreview-538378149", "createdAt": "2020-11-25T10:56:56Z", "commit": {"oid": "4402501c23d52c2256968b93d6c7b06eb0e216f8"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDo1Njo1NlrOH5t8tA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMTowNTowN1rOH5uRRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MzcwMA==", "bodyText": "Typo - send needs to be sending (or omit the word are).", "url": "https://github.com/elastic/stack-docs/pull/1471#discussion_r530283700", "createdAt": "2020-11-25T10:56:56Z", "author": {"login": "peteharverson"}, "path": "docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc", "diffHunk": "@@ -7,80 +7,116 @@\n ++++\n \n The following limitations and known problems apply to the {version} release of \n-the Elastic {ml-features}:\n+the Elastic {ml-features}. The limitations are grouped into four categories:\n \n-[float]\n+* <<ad-platform-limitations>> are related to the platform that hosts the {ml} \n+  feature of the {stack}.\n+* <<ad-config-limitations>> apply to the configuration process of the \n+  {anomaly-jobs}.\n+* <<ad-operational-limitations>> affect the behavior of the {anomaly-jobs} that \n+  are running.\n+* <<ad-ui-limitations>> only apply to {anomaly-jobs} managed via the user \n+  interface.\n+\n+\n+[discrete]\n+[[ad-platform-limitations]]\n+== Platform limitations\n+\n+[discrete]\n [[ml-limitations-sse]]\n-== CPUs must support SSE4.2\n+=== CPUs must support SSE4.2\n \n {ml-cap} uses Streaming SIMD Extensions (SSE) 4.2 instructions, so it works only\n-on machines whose CPUs https://en.wikipedia.org/wiki/SSE4#Supporting_CPUs[support]\n-SSE4.2. If you run {es} on older hardware you must disable {ml} by setting\n-`xpack.ml.enabled` to `false`. See\n-{ref}/ml-settings.html[{ml-cap} settings in {es}].\n+on machines whose CPUs \n+https://en.wikipedia.org/wiki/SSE4#Supporting_CPUs[support] SSE4.2. If you run \n+{es} on older hardware you must disable {ml} by setting `xpack.ml.enabled` to \n+`false`. See {ref}/ml-settings.html[{ml-cap} settings in {es}].\n \n-[float]\n-== Categorization uses English dictionary words\n-//See x-pack-elasticsearch/#3021\n-Categorization identifies static parts of unstructured logs and groups similar\n-messages together. The default categorization tokenizer assumes English language\n-log messages. For other languages you must define a different\n-`categorization_analyzer` for your job. For more information, see\n-<<ml-configuring-categories>>.\n \n-Additionally, a dictionary used to influence the categorization process contains\n-only English words. This means categorization might work better in English than\n-in other languages. The ability to customize the dictionary will be added in a\n-future release.\n+[discrete]\n+[[ml-scheduling-priority]]\n+=== CPU scheduling improvements apply to Linux and MacOS only\n \n-[float]\n-== Pop-ups must be enabled in browsers\n-//See x-pack-elasticsearch/#844\n+When there are many {ml} jobs running at the same time and there are \n+insufficient CPU resources, the JVM performance must be prioritized so search \n+and indexing latency remain acceptable. To that end, when CPU is constrained on \n+Linux and MacOS environments, the CPU scheduling priority of native analysis \n+processes is reduced to favor the {es} JVM. This improvement does not apply to \n+Windows environments.\n \n-The {ml-features} in {kib} use pop-ups. You must configure your\n-web browser so that it does not block pop-up windows or create an\n-exception for your {kib} URL.\n \n-[float]\n-== Anomaly Explorer omissions and limitations\n-//See x-pack-elasticsearch/#844 and x-pack-kibana/#1461\n+[discrete]\n+[[ad-config-limitations]]\n+== Configuration limitations\n \n-In {kib}, Anomaly Explorer charts are not displayed for anomalies\n-that were due to categorization, `time_of_day` functions, or `time_of_week`\n-functions. Those particular results do not display well as time series\n-charts.\n \n-The charts are also not displayed for detectors that use script fields. In that\n-case, the original source data cannot be easily searched because it has been\n-somewhat transformed by the script.\n+[discrete]\n+=== Terms aggregation size affects data analysis\n+//See x-pack-elasticsearch/#601\n \n-The Anomaly Explorer charts can also look odd in circumstances where there\n-is very little data to plot. For example, if there is only one data point, it is\n-represented as a single dot. If there are only two data points, they are joined\n-by a line.\n+By default, the `terms` aggregation returns the buckets for the top ten terms.\n+You can change this default behavior by setting the `size` parameter.\n \n-[float]\n-== Jobs close on the {dfeed} end date\n-//See x-pack-elasticsearch/#1037\n+If you are send pre-aggregated data to a job for analysis, you must ensure", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4402501c23d52c2256968b93d6c7b06eb0e216f8"}, "originalPosition": 97}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4ODk2Nw==", "bodyText": "Maybe just me, but it isn't clear to me if after updating roles the datafeed runs with the new permissions or the original permissions.  the datafeed subsequently runs with the new permissions and datafeed continues to run with the permissions that were associated with the original roles appear to contradict each other.", "url": "https://github.com/elastic/stack-docs/pull/1471#discussion_r530288967", "createdAt": "2020-11-25T11:05:07Z", "author": {"login": "peteharverson"}, "path": "docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc", "diffHunk": "@@ -106,89 +142,155 @@ For more information about `missing_field_count`,\n see the {ref}/ml-get-job-stats.html[get {anomaly-job} statistics API].\n \n \n-[float]\n-== Terms aggregation size affects data analysis\n-//See x-pack-elasticsearch/#601\n+[discrete]\n+=== Security integration\n \n-By default, the `terms` aggregation returns the buckets for the top ten terms.\n-You can change this default behavior by setting the `size` parameter.\n+When the {es} {security-features} are enabled, a {dfeed} stores the roles of the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4402501c23d52c2256968b93d6c7b06eb0e216f8"}, "originalPosition": 202}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2c8ab8c932c1848c3958baf141a5e4222f544e3", "author": {"user": {"login": "szabosteve", "name": "Istv\u00e1n Zolt\u00e1n Szab\u00f3"}}, "url": "https://github.com/elastic/stack-docs/commit/c2c8ab8c932c1848c3958baf141a5e4222f544e3", "committedDate": "2020-11-25T11:42:11Z", "message": "[DOCS] Changes section title."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db03f0454fcf07d7e7ad68c59e31b96910c1c404", "author": {"user": {"login": "szabosteve", "name": "Istv\u00e1n Zolt\u00e1n Szab\u00f3"}}, "url": "https://github.com/elastic/stack-docs/commit/db03f0454fcf07d7e7ad68c59e31b96910c1c404", "committedDate": "2020-11-25T12:58:58Z", "message": "[DOCS] Changes text about roles and permissions."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTMxNDU4", "url": "https://github.com/elastic/stack-docs/pull/1471#pullrequestreview-538531458", "createdAt": "2020-11-25T14:12:18Z", "commit": {"oid": "db03f0454fcf07d7e7ad68c59e31b96910c1c404"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NzYxOTcx", "url": "https://github.com/elastic/stack-docs/pull/1471#pullrequestreview-538761971", "createdAt": "2020-11-25T18:35:15Z", "commit": {"oid": "db03f0454fcf07d7e7ad68c59e31b96910c1c404"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxODozNToxNVrOH5_rvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxODozNToxNVrOH5_rvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDU3NDI2OQ==", "bodyText": "Suggest we create two forecast limitations... 1) forecast operational limitations and 2) Unsupported forecast configuration options.\nMove over_field_name and the unsupported functions over to configuration and leave the operational limitations mostly untouched otherwise.", "url": "https://github.com/elastic/stack-docs/pull/1471#discussion_r530574269", "createdAt": "2020-11-25T18:35:15Z", "author": {"login": "sophiec20"}, "path": "docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc", "diffHunk": "@@ -106,89 +141,154 @@ For more information about `missing_field_count`,\n see the {ref}/ml-get-job-stats.html[get {anomaly-job} statistics API].\n \n \n-[float]\n-== Terms aggregation size affects data analysis\n-//See x-pack-elasticsearch/#601\n+[discrete]\n+=== Security integration\n \n-By default, the `terms` aggregation returns the buckets for the top ten terms.\n-You can change this default behavior by setting the `size` parameter.\n+When the {es} {security-features} are enabled, a {dfeed} stores the roles of the \n+user who created or updated the {dfeed} **at that time**. This means that if the \n+roles the user has are changed after they create or update a {dfeed} then the \n+{dfeed} continues to run without change. However, if instead the permissions \n+associated with the roles that are stored with the {dfeed} are changed then this \n+affects the {dfeed}. For more information, see <<ml-datafeeds>>.\n \n-If you are send pre-aggregated data to a job for analysis, you must ensure\n-that the `size` is configured correctly. Otherwise, some data might not be\n-analyzed.\n \n-[float]\n-== Fields named \"by\", \"count\", or \"over\" cannot be used to split data\n-//See x-pack-elasticsearch/#858\n+[discrete]\n+[[ml-result-size-limitations]]\n+=== Job and {dfeed} APIs have a maximum search size\n+//https://github.com/elastic/elasticsearch/issues/34864\n \n-You cannot use the following field names in the `by_field_name` or\n-`over_field_name` properties in a job: `by`; `count`; `over`. This limitation\n-also applies to those properties when you create advanced jobs in {kib}.\n+In 6.6 and later releases, the {ref}/ml-get-job.html[get jobs API] and the\n+{ref}/ml-get-job-stats.html[get job statistics API] return a maximum of 10,000\n+jobs. Likewise, the {ref}/ml-get-datafeed.html[get {dfeeds} API] and the\n+{ref}/ml-get-datafeed-stats.html[get {dfeed} statistics API] return a maximum of\n+10,000 {dfeeds}.\n+\n+\n+[discrete]\n+[[ml-forecast-limitations]]\n+=== Forecast limitations", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db03f0454fcf07d7e7ad68c59e31b96910c1c404"}, "originalPosition": 232}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a09b6375ac4f0cb416fe5bd7583ba4951e79893", "author": {"user": {"login": "szabosteve", "name": "Istv\u00e1n Zolt\u00e1n Szab\u00f3"}}, "url": "https://github.com/elastic/stack-docs/commit/6a09b6375ac4f0cb416fe5bd7583ba4951e79893", "committedDate": "2020-11-26T09:56:43Z", "message": "[DOCS] Splits forecast limitation into two limitation items."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fa73c3cf5274f0d51e2e6eea160e5c894c06f68", "author": {"user": {"login": "szabosteve", "name": "Istv\u00e1n Zolt\u00e1n Szab\u00f3"}}, "url": "https://github.com/elastic/stack-docs/commit/6fa73c3cf5274f0d51e2e6eea160e5c894c06f68", "committedDate": "2020-11-26T10:12:13Z", "message": "[DOCS] Fixes link."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76d785d78d058994864085c1402b51c298f6d89a", "author": {"user": {"login": "szabosteve", "name": "Istv\u00e1n Zolt\u00e1n Szab\u00f3"}}, "url": "https://github.com/elastic/stack-docs/commit/76d785d78d058994864085c1402b51c298f6d89a", "committedDate": "2020-11-26T10:15:58Z", "message": "[DOCS] Modifies limitation reference."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4583, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}