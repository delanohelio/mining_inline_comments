{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMDQxNDkz", "number": 3198, "title": "[RW-4429][risk=no] Add age type options in CB age wizard", "bodyText": "Adds radio buttons with three age type options to search by: current age, age at consent and age at CDR date.\nLoads counts for all ages and age types so we can calculate the current count as the user changes the age slider\nBoth changes are behind the enableCBAgeTypeOptions feature flag (enabled only in local env)\n\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n I have run and tested this change locally\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers", "createdAt": "2020-02-27T19:53:17Z", "url": "https://github.com/all-of-us/workbench/pull/3198", "merged": true, "mergeCommit": {"oid": "d505c381af31ecf7d87c54e0528024a22e59013f"}, "closed": true, "closedAt": "2020-02-27T20:48:17Z", "author": {"login": "dolbeew"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIcPdLAH2gAyMzgxMDQxNDkzOjk5MGFiYjE5NGI2NDEwY2RjYzQyZDk5ZDE2ODA0MDcwZmY4OTkwZjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIhjNUAFqTM2NTk4MzUwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "990abb194b6410cdcc42d99d16804070ff8990f9", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/990abb194b6410cdcc42d99d16804070ff8990f9", "committedDate": "2020-02-27T14:31:42Z", "message": "RW-4429 switch to new age endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcdc5ffeddc84ebf18960e3b258b991f19467d64", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/bcdc5ffeddc84ebf18960e3b258b991f19467d64", "committedDate": "2020-02-27T14:31:42Z", "message": "RW-4429 add age type radio buttons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a49d17233e73099158fe00b8ff9bb4c25eefbf8", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/7a49d17233e73099158fe00b8ff9bb4c25eefbf8", "committedDate": "2020-02-27T14:31:42Z", "message": "RW-4429 use new endpoint to get age counts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "096a629628d16f06727a20806868c7c3c2da236a", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/096a629628d16f06727a20806868c7c3c2da236a", "committedDate": "2020-02-27T14:31:42Z", "message": "RW-4429 center slider count when editing an item"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f694c2f53fd95f69817dc0f1f2812f8cfd456a82", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/f694c2f53fd95f69817dc0f1f2812f8cfd456a82", "committedDate": "2020-02-27T15:40:30Z", "message": "RW-4429 set age type as attribute names in search requests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eaaf262e2340757ccd11f9c719adce941762a821", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/eaaf262e2340757ccd11f9c719adce941762a821", "committedDate": "2020-02-27T17:07:33Z", "message": "changing dob to date from timestamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fa630a0b87f374be5952331b44bba06e33a0773", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/0fa630a0b87f374be5952331b44bba06e33a0773", "committedDate": "2020-02-27T19:41:04Z", "message": "RW-4429 add feature flag for age type options"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4032c78e05799730a3e2fc33f801aa5e25371453", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/4032c78e05799730a3e2fc33f801aa5e25371453", "committedDate": "2020-02-27T20:06:01Z", "message": "RW-4429 fix failing tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1OTY3Mjcw", "url": "https://github.com/all-of-us/workbench/pull/3198#pullrequestreview-365967270", "createdAt": "2020-02-27T20:15:02Z", "commit": {"oid": "4032c78e05799730a3e2fc33f801aa5e25371453"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QyMDoxNTowMlrOFvfwLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QyMDoxNjowNVrOFvfyEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM0NzYyOA==", "bodyText": "Why do we need this?", "url": "https://github.com/all-of-us/workbench/pull/3198#discussion_r385347628", "createdAt": "2020-02-27T20:15:02Z", "author": {"login": "freemabd"}, "path": "api/src/main/java/org/pmiops/workbench/api/ConfigController.java", "diffHunk": "@@ -34,7 +34,7 @@\n             .unsafeAllowSelfBypass(config.access.unsafeAllowSelfBypass)\n             .enableNewAccountCreation(config.featureFlags.enableNewAccountCreation)\n             .requireInvitationKey(config.access.requireInvitationKey)\n-            .requireInstitutionalVerification(\n-                config.featureFlags.requireInstitutionalVerification));\n+            .requireInstitutionalVerification(config.featureFlags.requireInstitutionalVerification)\n+            .enableCBAgeTypeOptions(config.featureFlags.enableCBAgeTypeOptions));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4032c78e05799730a3e2fc33f801aa5e25371453"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM0Nzk2Nw==", "bodyText": "Why do we need this?", "url": "https://github.com/all-of-us/workbench/pull/3198#discussion_r385347967", "createdAt": "2020-02-27T20:15:47Z", "author": {"login": "freemabd"}, "path": "api/src/main/resources/workbench.yaml", "diffHunk": "@@ -2483,6 +2483,10 @@ definitions:\n         description: >\n           Feature flag for verifying the institutional affiliation of new users by validating their\n           contact emails.\n+      enableCBAgeTypeOptions:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4032c78e05799730a3e2fc33f801aa5e25371453"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM0ODExMg==", "bodyText": "Why do we need this?", "url": "https://github.com/all-of-us/workbench/pull/3198#discussion_r385348112", "createdAt": "2020-02-27T20:16:05Z", "author": {"login": "freemabd"}, "path": "common-api/src/main/java/org/pmiops/workbench/config/WorkbenchConfig.java", "diffHunk": "@@ -237,6 +237,8 @@ public String freeTierBillingAccountName() {\n     // enforced by pattern-matching the user's contact email against the institution's\n     // set of whitelisted email domains or addresses\n     public boolean requireInstitutionalVerification;\n+    // Flag to indicate whether to use the new age type options in cohort builder age wizard\n+    public boolean enableCBAgeTypeOptions;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4032c78e05799730a3e2fc33f801aa5e25371453"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1OTgzNTA5", "url": "https://github.com/all-of-us/workbench/pull/3198#pullrequestreview-365983509", "createdAt": "2020-02-27T20:42:48Z", "commit": {"oid": "4032c78e05799730a3e2fc33f801aa5e25371453"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3399, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}