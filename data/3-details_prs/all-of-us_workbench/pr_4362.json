{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMTI1MjAx", "number": 4362, "title": "[RW-6010][risk = no] remove more vestiges of old svc", "bodyText": "Remove dead config option and all functions for dealing with QueryParameterValue objects in the upload pipeline. Should have been part of #4355\n@calbach FYI\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally\n I have run the E2E tests on ths change against my local UI + API server with yarn test-local\n If this includes a UI change, I have taken screen recordings or screenshots of the new behavior and notified the PO and UX designer\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-12-06T02:07:56Z", "url": "https://github.com/all-of-us/workbench/pull/4362", "merged": true, "mergeCommit": {"oid": "46f5e30fcad2fecc6a8e1a803327daaad58fe132"}, "closed": true, "closedAt": "2020-12-08T01:56:17Z", "author": {"login": "jaycarlton"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdj355SAFqTU0NjI5NTQzOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdj-e_egFqTU0NjYzNzUxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2Mjk1NDM5", "url": "https://github.com/all-of-us/workbench/pull/4362#pullrequestreview-546295439", "createdAt": "2020-12-07T16:05:24Z", "commit": {"oid": "47e5d83435ddcd3357c19771d9c61836063da2fe"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjowNToyNVrOIAuFCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjowODo1MVrOIAuQUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYyNTg2Nw==", "bodyText": "When was uploadMethod last used in the code?  Please ensure that there is at least one release between that merge and this one.", "url": "https://github.com/all-of-us/workbench/pull/4362#discussion_r537625867", "createdAt": "2020-12-07T16:05:25Z", "author": {"login": "jmthibault79"}, "path": "api/config/config_local.json", "diffHunk": "@@ -123,7 +123,6 @@\n   },\n   \"reporting\": {\n     \"dataset\": \"reporting_local\",\n-    \"maxRowsPerInsert\": 200,\n-    \"uploadMethod\": \"STREAMING\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47e5d83435ddcd3357c19771d9c61836063da2fe"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYyODc1Mw==", "bodyText": "Should this use the maxRowsPerInsert config value?", "url": "https://github.com/all-of-us/workbench/pull/4362#discussion_r537628753", "createdAt": "2020-12-07T16:08:51Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/reporting/insertion/InsertAllRequestPayloadTransformer.java", "diffHunk": "@@ -27,11 +28,19 @@\n  * @code{ InsertAllRequestPayloadTransformer<ReportingUser> userTransformer =\n  *     UserColumnValueExtractor::values; }\n  */\n+@FunctionalInterface\n public interface InsertAllRequestPayloadTransformer<MODEL_T>\n     extends BigQueryInsertionPayloadTransformer<MODEL_T> {\n   String INSERT_ID_CHARS = \"abcdefghijklmnopqrstuvwxyz\";\n   int INSERT_ID_LENGTH = 16;\n+  int MAX_ROWS_PER_INSERT_ALL_REQUEST = 1000;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47e5d83435ddcd3357c19771d9c61836063da2fe"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "47e5d83435ddcd3357c19771d9c61836063da2fe", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/47e5d83435ddcd3357c19771d9c61836063da2fe", "committedDate": "2020-12-06T02:04:19Z", "message": "remove support for QueryParameterValues from ColumnValueExractor iface"}, "afterCommit": {"oid": "abc71296181b9e8a6d13df96fc3c59bdacd5c04b", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/abc71296181b9e8a6d13df96fc3c59bdacd5c04b", "committedDate": "2020-12-07T19:18:53Z", "message": "revised changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NDg4NzY3", "url": "https://github.com/all-of-us/workbench/pull/4362#pullrequestreview-546488767", "createdAt": "2020-12-07T19:58:22Z", "commit": {"oid": "abc71296181b9e8a6d13df96fc3c59bdacd5c04b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxOTo1ODoyMlrOIA4LIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxOTo1ODoyMlrOIA4LIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzc5MTI2Nw==", "bodyText": "This does not seem to be used anywhere?", "url": "https://github.com/all-of-us/workbench/pull/4362#discussion_r537791267", "createdAt": "2020-12-07T19:58:22Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/reporting/insertion/InsertAllRequestPayloadTransformer.java", "diffHunk": "@@ -27,11 +28,19 @@\n  * @code{ InsertAllRequestPayloadTransformer<ReportingUser> userTransformer =\n  *     UserColumnValueExtractor::values; }\n  */\n+@FunctionalInterface\n public interface InsertAllRequestPayloadTransformer<MODEL_T>\n     extends BigQueryInsertionPayloadTransformer<MODEL_T> {\n   String INSERT_ID_CHARS = \"abcdefghijklmnopqrstuvwxyz\";\n   int INSERT_ID_LENGTH = 16;\n+  int MAX_ROWS_PER_INSERT_ALL_REQUEST = 1000;\n \n+  default List<InsertAllRequest> buildBatchedRequests(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abc71296181b9e8a6d13df96fc3c59bdacd5c04b"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30c993c859cdecc014de0ff54aaa3227aee6a5bd", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/30c993c859cdecc014de0ff54aaa3227aee6a5bd", "committedDate": "2020-12-07T20:18:56Z", "message": "revised changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e245305fda5f45b6cfcc42c6ce095807bdab2e83", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/e245305fda5f45b6cfcc42c6ce095807bdab2e83", "committedDate": "2020-12-07T20:21:59Z", "message": "resotre other-branch changes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "abc71296181b9e8a6d13df96fc3c59bdacd5c04b", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/abc71296181b9e8a6d13df96fc3c59bdacd5c04b", "committedDate": "2020-12-07T19:18:53Z", "message": "revised changes"}, "afterCommit": {"oid": "e245305fda5f45b6cfcc42c6ce095807bdab2e83", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/e245305fda5f45b6cfcc42c6ce095807bdab2e83", "committedDate": "2020-12-07T20:21:59Z", "message": "resotre other-branch changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "397217da209749f7980a47d8d1d0091212f5d174", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/397217da209749f7980a47d8d1d0091212f5d174", "committedDate": "2020-12-07T21:23:46Z", "message": "spotless"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NjM3NTE4", "url": "https://github.com/all-of-us/workbench/pull/4362#pullrequestreview-546637518", "createdAt": "2020-12-07T23:52:33Z", "commit": {"oid": "397217da209749f7980a47d8d1d0091212f5d174"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3719, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}