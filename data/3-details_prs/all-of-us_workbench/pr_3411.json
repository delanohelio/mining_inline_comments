{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzODcyNDk3", "number": 3411, "title": "[RW-4564][risk=no] Replace tutorial videos on homepage", "bodyText": "Use new YouTube videos embedded on homepage\nAdd carousel-style scroll to quick tour/video list (used same functionality as recent resources list)\n\n\nTagging @blrubenstein to get someone with more UI experience and partly because we (briefly) discussed how to fix the broken test.\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally", "createdAt": "2020-04-15T16:44:47Z", "url": "https://github.com/all-of-us/workbench/pull/3411", "merged": true, "mergeCommit": {"oid": "b0966dd221e8c1d08227506c7d3f9ebcb82bc10b"}, "closed": true, "closedAt": "2020-04-17T02:37:09Z", "author": {"login": "dolbeew"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX7-3GAFqTM5NDAwNjQwOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYUZorABqjMyNDIwOTUxNjM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MDA2NDA4", "url": "https://github.com/all-of-us/workbench/pull/3411#pullrequestreview-394006408", "createdAt": "2020-04-15T17:57:23Z", "commit": {"oid": "9239a9d46b7170dc50d648f5130922d2e2f2ce8f"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNzo1NzoyM1rOGGFLhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNzo1ODoyM1rOGGFNyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAyOTUwOA==", "bodyText": "Lots of magic numbers here.", "url": "https://github.com/all-of-us/workbench/pull/3411#discussion_r409029508", "createdAt": "2020-04-15T17:57:23Z", "author": {"login": "jaycarlton"}, "path": "ui/src/app/pages/homepage/homepage.tsx", "diffHunk": "@@ -231,28 +236,38 @@ export const Homepage = withUserProfile()(class extends React.Component<Props, S\n     });\n   }\n \n-  openVideo(videoLink: string): void {\n-    this.setState({videoOpen: true, videoLink: videoLink});\n+  openVideo(videoId: string): void {\n+    this.setState({videoOpen: true, videoId: videoId});\n   }\n \n \n   render() {\n     const {betaAccessGranted, videoOpen, accessTasksLoaded, accessTasksRemaining,\n       eraCommonsError, eraCommonsLinked, eraCommonsLoading, firstVisitTraining,\n-      trainingCompleted, quickTour, videoLink, twoFactorAuthCompleted,\n-      dataUserCodeOfConductCompleted\n+      trainingCompleted, quickTour, videoId, twoFactorAuthCompleted,\n+      dataUserCodeOfConductCompleted, quickTourResourceOffset\n     } = this.state;\n+    const limit = this.quickTourResourcesDiv ? Math.floor(this.quickTourResourcesDiv.offsetWidth * 0.97 / 276) : 5;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9239a9d46b7170dc50d648f5130922d2e2f2ce8f"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAzMDA5MQ==", "bodyText": "Out of curiosity, why are the video titles hard-coded with random characters? I wonder if there's a more straightforward way to store this mapping, outside of code (like in an environment config file).", "url": "https://github.com/all-of-us/workbench/pull/3411#discussion_r409030091", "createdAt": "2020-04-15T17:58:23Z", "author": {"login": "jaycarlton"}, "path": "ui/src/app/pages/homepage/homepage.tsx", "diffHunk": "@@ -231,28 +236,38 @@ export const Homepage = withUserProfile()(class extends React.Component<Props, S\n     });\n   }\n \n-  openVideo(videoLink: string): void {\n-    this.setState({videoOpen: true, videoLink: videoLink});\n+  openVideo(videoId: string): void {\n+    this.setState({videoOpen: true, videoId: videoId});\n   }\n \n \n   render() {\n     const {betaAccessGranted, videoOpen, accessTasksLoaded, accessTasksRemaining,\n       eraCommonsError, eraCommonsLinked, eraCommonsLoading, firstVisitTraining,\n-      trainingCompleted, quickTour, videoLink, twoFactorAuthCompleted,\n-      dataUserCodeOfConductCompleted\n+      trainingCompleted, quickTour, videoId, twoFactorAuthCompleted,\n+      dataUserCodeOfConductCompleted, quickTourResourceOffset\n     } = this.state;\n+    const limit = this.quickTourResourcesDiv ? Math.floor(this.quickTourResourcesDiv.offsetWidth * 0.97 / 276) : 5;\n \n     const quickTourResources = [\n       {\n         src: '/assets/images/QT-thumbnail.svg',\n         onClick: () => this.setState({quickTour: true})\n       }, {\n-        src: '/assets/images/cohorts-thumbnail.png',\n-        onClick: () => this.openVideo('/assets/videos/Workbench Tutorial - Cohorts.mp4')\n+        src: '/assets/images/intro-workbench.png',\n+        onClick: () => this.openVideo('nqnOvOpnRLE')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9239a9d46b7170dc50d648f5130922d2e2f2ce8f"}, "originalPosition": 80}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MDI2ODY1", "url": "https://github.com/all-of-us/workbench/pull/3411#pullrequestreview-394026865", "createdAt": "2020-04-15T18:25:58Z", "commit": {"oid": "9239a9d46b7170dc50d648f5130922d2e2f2ce8f"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxODoyNTo1OFrOGGGLtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxODozNDowNVrOGGGeTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA0NTk0MA==", "bodyText": "Sorry, meant to add a comment with some context before pushing. Will add one shortly.", "url": "https://github.com/all-of-us/workbench/pull/3411#discussion_r409045940", "createdAt": "2020-04-15T18:25:58Z", "author": {"login": "dolbeew"}, "path": "ui/src/app/pages/homepage/homepage.tsx", "diffHunk": "@@ -231,28 +236,38 @@ export const Homepage = withUserProfile()(class extends React.Component<Props, S\n     });\n   }\n \n-  openVideo(videoLink: string): void {\n-    this.setState({videoOpen: true, videoLink: videoLink});\n+  openVideo(videoId: string): void {\n+    this.setState({videoOpen: true, videoId: videoId});\n   }\n \n \n   render() {\n     const {betaAccessGranted, videoOpen, accessTasksLoaded, accessTasksRemaining,\n       eraCommonsError, eraCommonsLinked, eraCommonsLoading, firstVisitTraining,\n-      trainingCompleted, quickTour, videoLink, twoFactorAuthCompleted,\n-      dataUserCodeOfConductCompleted\n+      trainingCompleted, quickTour, videoId, twoFactorAuthCompleted,\n+      dataUserCodeOfConductCompleted, quickTourResourceOffset\n     } = this.state;\n+    const limit = this.quickTourResourcesDiv ? Math.floor(this.quickTourResourcesDiv.offsetWidth * 0.97 / 276) : 5;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAyOTUwOA=="}, "originalCommit": {"oid": "9239a9d46b7170dc50d648f5130922d2e2f2ce8f"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA1MDcwMA==", "bodyText": "Those are the YouTube video ids that get inserted into the src url of the iframe. Yeah, not sure the best way to do it but didn't want to change too much since I'm not usually in these components.", "url": "https://github.com/all-of-us/workbench/pull/3411#discussion_r409050700", "createdAt": "2020-04-15T18:34:05Z", "author": {"login": "dolbeew"}, "path": "ui/src/app/pages/homepage/homepage.tsx", "diffHunk": "@@ -231,28 +236,38 @@ export const Homepage = withUserProfile()(class extends React.Component<Props, S\n     });\n   }\n \n-  openVideo(videoLink: string): void {\n-    this.setState({videoOpen: true, videoLink: videoLink});\n+  openVideo(videoId: string): void {\n+    this.setState({videoOpen: true, videoId: videoId});\n   }\n \n \n   render() {\n     const {betaAccessGranted, videoOpen, accessTasksLoaded, accessTasksRemaining,\n       eraCommonsError, eraCommonsLinked, eraCommonsLoading, firstVisitTraining,\n-      trainingCompleted, quickTour, videoLink, twoFactorAuthCompleted,\n-      dataUserCodeOfConductCompleted\n+      trainingCompleted, quickTour, videoId, twoFactorAuthCompleted,\n+      dataUserCodeOfConductCompleted, quickTourResourceOffset\n     } = this.state;\n+    const limit = this.quickTourResourcesDiv ? Math.floor(this.quickTourResourcesDiv.offsetWidth * 0.97 / 276) : 5;\n \n     const quickTourResources = [\n       {\n         src: '/assets/images/QT-thumbnail.svg',\n         onClick: () => this.setState({quickTour: true})\n       }, {\n-        src: '/assets/images/cohorts-thumbnail.png',\n-        onClick: () => this.openVideo('/assets/videos/Workbench Tutorial - Cohorts.mp4')\n+        src: '/assets/images/intro-workbench.png',\n+        onClick: () => this.openVideo('nqnOvOpnRLE')", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAzMDA5MQ=="}, "originalCommit": {"oid": "9239a9d46b7170dc50d648f5130922d2e2f2ce8f"}, "originalPosition": 80}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0NzM1OTUz", "url": "https://github.com/all-of-us/workbench/pull/3411#pullrequestreview-394735953", "createdAt": "2020-04-16T15:14:01Z", "commit": {"oid": "9239a9d46b7170dc50d648f5130922d2e2f2ce8f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNToxNDowMVrOGGqRhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNToxNDowMVrOGGqRhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYzNzI1NQ==", "bodyText": "I would personally set the id to a constant above, and then put that exact comment about YouTube video ids above it (literally I'd just copy word for word)", "url": "https://github.com/all-of-us/workbench/pull/3411#discussion_r409637255", "createdAt": "2020-04-16T15:14:01Z", "author": {"login": "s-rubenstein"}, "path": "ui/src/app/pages/homepage/homepage.tsx", "diffHunk": "@@ -231,28 +236,38 @@ export const Homepage = withUserProfile()(class extends React.Component<Props, S\n     });\n   }\n \n-  openVideo(videoLink: string): void {\n-    this.setState({videoOpen: true, videoLink: videoLink});\n+  openVideo(videoId: string): void {\n+    this.setState({videoOpen: true, videoId: videoId});\n   }\n \n \n   render() {\n     const {betaAccessGranted, videoOpen, accessTasksLoaded, accessTasksRemaining,\n       eraCommonsError, eraCommonsLinked, eraCommonsLoading, firstVisitTraining,\n-      trainingCompleted, quickTour, videoLink, twoFactorAuthCompleted,\n-      dataUserCodeOfConductCompleted\n+      trainingCompleted, quickTour, videoId, twoFactorAuthCompleted,\n+      dataUserCodeOfConductCompleted, quickTourResourceOffset\n     } = this.state;\n+    const limit = this.quickTourResourcesDiv ? Math.floor(this.quickTourResourcesDiv.offsetWidth * 0.97 / 276) : 5;\n \n     const quickTourResources = [\n       {\n         src: '/assets/images/QT-thumbnail.svg',\n         onClick: () => this.setState({quickTour: true})\n       }, {\n-        src: '/assets/images/cohorts-thumbnail.png',\n-        onClick: () => this.openVideo('/assets/videos/Workbench Tutorial - Cohorts.mp4')\n+        src: '/assets/images/intro-workbench.png',\n+        onClick: () => this.openVideo('nqnOvOpnRLE')", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAzMDA5MQ=="}, "originalCommit": {"oid": "9239a9d46b7170dc50d648f5130922d2e2f2ce8f"}, "originalPosition": 80}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b472f334ee83135129973054c0e49de65b0f1120", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/b472f334ee83135129973054c0e49de65b0f1120", "committedDate": "2020-04-16T21:52:10Z", "message": "RW-4564 use embedded youtube videos on homepage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "794cc8b8f3f0b028efb0580127fa63f061fab240", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/794cc8b8f3f0b028efb0580127fa63f061fab240", "committedDate": "2020-04-16T21:52:10Z", "message": "RW-4564 use new thumbnails for video links"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3cfb0cde44f274afa06721f0bd394b8fbc8e012", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/c3cfb0cde44f274afa06721f0bd394b8fbc8e012", "committedDate": "2020-04-16T21:52:10Z", "message": "RW-4564 add horizontal scroll to video list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23a0fee3e31b9bb70e52f1f226a1310f947c9e0a", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/23a0fee3e31b9bb70e52f1f226a1310f947c9e0a", "committedDate": "2020-04-16T21:52:10Z", "message": "RW-4564 mock element width to fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc1abb33d0f54fe0d514d8f2b70d00456b91beae", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/dc1abb33d0f54fe0d514d8f2b70d00456b91beae", "committedDate": "2020-04-16T22:25:56Z", "message": "RW-4564 pr feedback"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9239a9d46b7170dc50d648f5130922d2e2f2ce8f", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/9239a9d46b7170dc50d648f5130922d2e2f2ce8f", "committedDate": "2020-04-15T16:03:51Z", "message": "RW-4564 mock element width to fix test"}, "afterCommit": {"oid": "dc1abb33d0f54fe0d514d8f2b70d00456b91beae", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/dc1abb33d0f54fe0d514d8f2b70d00456b91beae", "committedDate": "2020-04-16T22:25:56Z", "message": "RW-4564 pr feedback"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3180, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}