{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNzI1ODk3", "number": 3281, "title": "Puppeteer logs dir not exists", "bodyText": "Fixed an issue with fs. existsSync usage - method fails to create dir recursively. Error thrown when logs dir not exists.\nAlso removed home-spec.ts flaky test Homepage is the landing page after Sign In because it fails intermittently. It's not a good UI test to check network api calls.", "createdAt": "2020-03-20T20:24:55Z", "url": "https://github.com/all-of-us/workbench/pull/3281", "merged": true, "mergeCommit": {"oid": "24923dda019959f5efc982487f61407ed34b8aa6"}, "closed": true, "closedAt": "2020-03-20T20:51:48Z", "author": {"login": "aweng98"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPl-RVgH2gAyMzkxNzI1ODk3OjMyYzM3ODliYTdiNjM5NWU1NWM4MzdhZWNmYmMwNTY5MmI3NmY1MjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPmvrcgH2gAyMzkxNzI1ODk3OmQ1Mjg1ODU3YTIzZjNhNGYyOWViY2I0NTg0ZTk0ODEyMDY3NjY2YTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "32c3789ba7b6395e55c837aecfbc05692b76f524", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/32c3789ba7b6395e55c837aecfbc05692b76f524", "committedDate": "2020-03-20T19:49:27Z", "message": "not ignore logs dir"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fe1488bf844439ecbf351e9275d307c25da0ff6", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/0fe1488bf844439ecbf351e9275d307c25da0ff6", "committedDate": "2020-03-20T20:20:39Z", "message": "add fs-extra"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4Nzk2Mjc2", "url": "https://github.com/all-of-us/workbench/pull/3281#pullrequestreview-378796276", "createdAt": "2020-03-20T20:36:25Z", "commit": {"oid": "0fe1488bf844439ecbf351e9275d307c25da0ff6"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDozNjoyNVrOF5idyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDozOTo1MVrOF5ijPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg3NzgzNA==", "bodyText": "nit: maybe name it SCREENSHOT_DIR.", "url": "https://github.com/all-of-us/workbench/pull/3281#discussion_r395877834", "createdAt": "2020-03-20T20:36:25Z", "author": {"login": "jaycarlton"}, "path": "e2e/app/base-page.ts", "diffHunk": "@@ -228,9 +228,7 @@ export default abstract class BasePage {\n    */\n   async takeScreenshot(fileName: string) {\n     const dir = 'logs/screenshot';\n-    if (!fs.existsSync(dir)) {\n-      fs.mkdirSync(dir);\n-    }\n+    await fse.ensureDir(dir);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fe1488bf844439ecbf351e9275d307c25da0ff6"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg3ODY4NA==", "bodyText": "nit: maybe specify GoogleLoginPageNotFound to distinguish from the case of an unrecognized user.", "url": "https://github.com/all-of-us/workbench/pull/3281#discussion_r395878684", "createdAt": "2020-03-20T20:38:33Z", "author": {"login": "jaycarlton"}, "path": "e2e/app/google-login.ts", "diffHunk": "@@ -91,11 +91,13 @@ export default class GoogleLoginPage extends BasePage {\n    */\n   async load(): Promise<void> {\n     const url = configs.uiBaseUrl + configs.loginUrlPath;\n-    await this.page.goto(url, {waitUntil: ['networkidle0', 'domcontentloaded'], timeout: 30000}).catch((err) => {\n+    try {\n+      await this.page.goto(url, {waitUntil: ['networkidle0', 'domcontentloaded'], timeout: 30000});\n+    } catch (err) {\n       console.error('Google login page not found. ' + err);\n-      this.takeScreenshot('GoogleLoginNotFound');\n+      await this.takeScreenshot('GoogleLoginNotFound');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fe1488bf844439ecbf351e9275d307c25da0ff6"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg3OTIyOA==", "bodyText": "nit: Maybe wrap this into a higher-level function like this.navigate(url).\nThe timeout seems a little generous. to my untrained eye, especially for the login page.", "url": "https://github.com/all-of-us/workbench/pull/3281#discussion_r395879228", "createdAt": "2020-03-20T20:39:51Z", "author": {"login": "jaycarlton"}, "path": "e2e/app/google-login.ts", "diffHunk": "@@ -91,11 +91,13 @@ export default class GoogleLoginPage extends BasePage {\n    */\n   async load(): Promise<void> {\n     const url = configs.uiBaseUrl + configs.loginUrlPath;\n-    await this.page.goto(url, {waitUntil: ['networkidle0', 'domcontentloaded'], timeout: 30000}).catch((err) => {\n+    try {\n+      await this.page.goto(url, {waitUntil: ['networkidle0', 'domcontentloaded'], timeout: 30000});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fe1488bf844439ecbf351e9275d307c25da0ff6"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5285857a23f3a4f29ebcb4584e94812067666a3", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/d5285857a23f3a4f29ebcb4584e94812067666a3", "committedDate": "2020-03-20T20:43:25Z", "message": "PR feedback"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3266, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}