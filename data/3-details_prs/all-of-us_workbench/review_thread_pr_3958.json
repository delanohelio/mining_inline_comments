{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4MTQ2Mjgz", "number": 3958, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMToyNjowMlrOEi7vhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMTozNTowNVrOEi70aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MDY1ODYwOnYy", "diffSide": "RIGHT", "path": "e2e/app/component/share-modal.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMToyNjowMlrOHRBMqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTowMzozM1rOHRZXZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwNzQ2NA==", "bodyText": "Do we need console message?", "url": "https://github.com/all-of-us/workbench/pull/3958#discussion_r487607464", "createdAt": "2020-09-14T01:26:02Z", "author": {"login": "NehaBroad"}, "path": "e2e/app/component/share-modal.ts", "diffHunk": "@@ -25,6 +25,7 @@ export default class ShareModal extends Modal {\n     await ownerOpt.click();\n \n     await this.clickButton(LinkText.Save, {waitForClose: true});\n+    console.log(`Shared workspace to user ${username} with role ${level}`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "809099eb89e7d81c102125359f4846a4e313303f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAwMzQzMQ==", "bodyText": "It's really helpful when trying to understand what happens since there are no manual test plans for automated tests.", "url": "https://github.com/all-of-us/workbench/pull/3958#discussion_r488003431", "createdAt": "2020-09-14T15:03:33Z", "author": {"login": "aweng98"}, "path": "e2e/app/component/share-modal.ts", "diffHunk": "@@ -25,6 +25,7 @@ export default class ShareModal extends Modal {\n     await ownerOpt.click();\n \n     await this.clickButton(LinkText.Save, {waitForClose: true});\n+    console.log(`Shared workspace to user ${username} with role ${level}`);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwNzQ2NA=="}, "originalCommit": {"oid": "809099eb89e7d81c102125359f4846a4e313303f"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MDY1OTMxOnYy", "diffSide": "RIGHT", "path": "e2e/app/page/notebook-page.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMToyNjozMlrOHRBNCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTowNDoyNFrOHRZZwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwNzU2Mg==", "bodyText": "nit: page/text-labels", "url": "https://github.com/all-of-us/workbench/pull/3958#discussion_r487607562", "createdAt": "2020-09-14T01:26:32Z", "author": {"login": "NehaBroad"}, "path": "e2e/app/page/notebook-page.ts", "diffHunk": "@@ -1,11 +1,12 @@\n+import * as fs from 'fs';\n import {Frame, Page} from 'puppeteer';\n import {getPropValue} from 'utils/element-utils';\n import {waitWhileLoading} from 'utils/test-utils';\n import {waitForDocumentTitle} from 'utils/waits-utils';\n+import {ResourceCard} from '../text-labels';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "809099eb89e7d81c102125359f4846a4e313303f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAwNDAzMw==", "bodyText": "Fixed", "url": "https://github.com/all-of-us/workbench/pull/3958#discussion_r488004033", "createdAt": "2020-09-14T15:04:24Z", "author": {"login": "aweng98"}, "path": "e2e/app/page/notebook-page.ts", "diffHunk": "@@ -1,11 +1,12 @@\n+import * as fs from 'fs';\n import {Frame, Page} from 'puppeteer';\n import {getPropValue} from 'utils/element-utils';\n import {waitWhileLoading} from 'utils/test-utils';\n import {waitForDocumentTitle} from 'utils/waits-utils';\n+import {ResourceCard} from '../text-labels';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwNzU2Mg=="}, "originalCommit": {"oid": "809099eb89e7d81c102125359f4846a4e313303f"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MDY2MTIxOnYy", "diffSide": "RIGHT", "path": "e2e/app/page/workspace-analysis-page.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMToyODowMlrOHRBOIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNToxMDo1OFrOHRZwgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwNzg0MA==", "bodyText": "Question: resourceCard is resource card list?", "url": "https://github.com/all-of-us/workbench/pull/3958#discussion_r487607840", "createdAt": "2020-09-14T01:28:02Z", "author": {"login": "NehaBroad"}, "path": "e2e/app/page/workspace-analysis-page.ts", "diffHunk": "@@ -128,7 +110,7 @@ export default class WorkspaceAnalysisPage extends WorkspaceBase {\n    */\n   async duplicateNotebook(notebookName: string): Promise<string> {\n     const resourceCard = new DataResourceCard(this.page);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "809099eb89e7d81c102125359f4846a4e313303f"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAwOTg1OQ==", "bodyText": "DataResourceCard is one card.", "url": "https://github.com/all-of-us/workbench/pull/3958#discussion_r488009859", "createdAt": "2020-09-14T15:10:58Z", "author": {"login": "aweng98"}, "path": "e2e/app/page/workspace-analysis-page.ts", "diffHunk": "@@ -128,7 +110,7 @@ export default class WorkspaceAnalysisPage extends WorkspaceBase {\n    */\n   async duplicateNotebook(notebookName: string): Promise<string> {\n     const resourceCard = new DataResourceCard(this.page);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwNzg0MA=="}, "originalCommit": {"oid": "809099eb89e7d81c102125359f4846a4e313303f"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MDY2MzU3OnYy", "diffSide": "RIGHT", "path": "e2e/app/page/workspace-analysis-page.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMToyOTo0MFrOHRBPcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMToyOTo0MFrOHRBPcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwODE3OQ==", "bodyText": "There can also be a utils method that takes in this.page , resource name and card type.\nconst resourceCard = new DataResourceCard(this.page); can move in that util method", "url": "https://github.com/all-of-us/workbench/pull/3958#discussion_r487608179", "createdAt": "2020-09-14T01:29:40Z", "author": {"login": "NehaBroad"}, "path": "e2e/app/page/workspace-analysis-page.ts", "diffHunk": "@@ -143,7 +125,7 @@ export default class WorkspaceAnalysisPage extends WorkspaceBase {\n   async copyNotebookToWorkspace(notebookName: string, destinationWorkspace: string, destinationNotebookName?: string): Promise<void> {\n     // Open Copy modal.s\n     const resourceCard = new DataResourceCard(this.page);\n-    const notebookCard = await resourceCard.findCard(notebookName, CardType.Notebook);\n+    const notebookCard = await resourceCard.findCard(notebookName, ResourceCard.Notebook);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "809099eb89e7d81c102125359f4846a4e313303f"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MDY2NDM3OnYy", "diffSide": "RIGHT", "path": "e2e/app/page/workspace-base.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMTozMDowOVrOHRBP4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNToxMjoxMVrOHRZ0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwODI4OQ==", "bodyText": "nit: app/component", "url": "https://github.com/all-of-us/workbench/pull/3958#discussion_r487608289", "createdAt": "2020-09-14T01:30:09Z", "author": {"login": "NehaBroad"}, "path": "e2e/app/page/workspace-base.ts", "diffHunk": "@@ -4,6 +4,9 @@ import {ElementType} from 'app/xpath-options';\n import {Page} from 'puppeteer';\n import {waitWhileLoading} from 'utils/test-utils';\n import {waitForAttributeEquality} from 'utils/waits-utils';\n+import DataResourceCard from '../component/data-resource-card';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "809099eb89e7d81c102125359f4846a4e313303f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAxMDgwNA==", "bodyText": "Fixed.", "url": "https://github.com/all-of-us/workbench/pull/3958#discussion_r488010804", "createdAt": "2020-09-14T15:12:11Z", "author": {"login": "aweng98"}, "path": "e2e/app/page/workspace-base.ts", "diffHunk": "@@ -4,6 +4,9 @@ import {ElementType} from 'app/xpath-options';\n import {Page} from 'puppeteer';\n import {waitWhileLoading} from 'utils/test-utils';\n import {waitForAttributeEquality} from 'utils/waits-utils';\n+import DataResourceCard from '../component/data-resource-card';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwODI4OQ=="}, "originalCommit": {"oid": "809099eb89e7d81c102125359f4846a4e313303f"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MDY2NTIyOnYy", "diffSide": "RIGHT", "path": "e2e/app/page/workspace-base.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMTozMDo1MVrOHRBQXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjoyMToxN1rOHRc4IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwODQxMw==", "bodyText": "nit: indent for readability", "url": "https://github.com/all-of-us/workbench/pull/3958#discussion_r487608413", "createdAt": "2020-09-14T01:30:51Z", "author": {"login": "NehaBroad"}, "path": "e2e/app/page/workspace-base.ts", "diffHunk": "@@ -94,5 +97,48 @@ export default abstract class WorkspaceBase extends AuthenticatedPage {\n     return waitForAttributeEquality(this.page, {xpath: selector}, 'aria-selected', 'true');\n   }\n \n+  /**\n+   * Delete ConceptSet, Dataset or Cohort thru Ellipsis menu located inside the resource card.\n+   * @param {string} resourceName\n+   * @param {ResourceCard} resourceType\n+   */\n+  async deleteResource(resourceName: string, resourceType: ResourceCard): Promise<string[]> {\n+    const resourceCard = new DataResourceCard(this.page);\n+    const card = await resourceCard.findCard(resourceName, resourceType);\n+    if (!card) {\n+      throw new Error(`Failed to find ${resourceType} card \"${resourceName}\"`);\n+    }\n+\n+    await card.clickEllipsisAction(EllipsisMenuAction.Delete, {waitForNav: false});\n+\n+    const modal = new Modal(this.page);\n+    await modal.waitForLoad();\n+    const modalTextContent = await modal.getTextContent();\n+\n+    let link;\n+    switch (resourceType) {\n+    case ResourceCard.Cohort:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "809099eb89e7d81c102125359f4846a4e313303f"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA2MDk2MQ==", "bodyText": "Fixed.", "url": "https://github.com/all-of-us/workbench/pull/3958#discussion_r488060961", "createdAt": "2020-09-14T16:21:17Z", "author": {"login": "aweng98"}, "path": "e2e/app/page/workspace-base.ts", "diffHunk": "@@ -94,5 +97,48 @@ export default abstract class WorkspaceBase extends AuthenticatedPage {\n     return waitForAttributeEquality(this.page, {xpath: selector}, 'aria-selected', 'true');\n   }\n \n+  /**\n+   * Delete ConceptSet, Dataset or Cohort thru Ellipsis menu located inside the resource card.\n+   * @param {string} resourceName\n+   * @param {ResourceCard} resourceType\n+   */\n+  async deleteResource(resourceName: string, resourceType: ResourceCard): Promise<string[]> {\n+    const resourceCard = new DataResourceCard(this.page);\n+    const card = await resourceCard.findCard(resourceName, resourceType);\n+    if (!card) {\n+      throw new Error(`Failed to find ${resourceType} card \"${resourceName}\"`);\n+    }\n+\n+    await card.clickEllipsisAction(EllipsisMenuAction.Delete, {waitForNav: false});\n+\n+    const modal = new Modal(this.page);\n+    await modal.waitForLoad();\n+    const modalTextContent = await modal.getTextContent();\n+\n+    let link;\n+    switch (resourceType) {\n+    case ResourceCard.Cohort:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwODQxMw=="}, "originalCommit": {"oid": "809099eb89e7d81c102125359f4846a4e313303f"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MDY3MTEyOnYy", "diffSide": "RIGHT", "path": "e2e/app/page/workspace-base.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMTozNTowNVrOHRBTog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjoyNDo0M1rOHRdAjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwOTI1MA==", "bodyText": "Question: If we delete a concept Set or Cohort that is being used in existing dataSet ,there will be another Modal with warning text , is that covered?", "url": "https://github.com/all-of-us/workbench/pull/3958#discussion_r487609250", "createdAt": "2020-09-14T01:35:05Z", "author": {"login": "NehaBroad"}, "path": "e2e/app/page/workspace-base.ts", "diffHunk": "@@ -94,5 +97,48 @@ export default abstract class WorkspaceBase extends AuthenticatedPage {\n     return waitForAttributeEquality(this.page, {xpath: selector}, 'aria-selected', 'true');\n   }\n \n+  /**\n+   * Delete ConceptSet, Dataset or Cohort thru Ellipsis menu located inside the resource card.\n+   * @param {string} resourceName\n+   * @param {ResourceCard} resourceType\n+   */\n+  async deleteResource(resourceName: string, resourceType: ResourceCard): Promise<string[]> {\n+    const resourceCard = new DataResourceCard(this.page);\n+    const card = await resourceCard.findCard(resourceName, resourceType);\n+    if (!card) {\n+      throw new Error(`Failed to find ${resourceType} card \"${resourceName}\"`);\n+    }\n+\n+    await card.clickEllipsisAction(EllipsisMenuAction.Delete, {waitForNav: false});\n+\n+    const modal = new Modal(this.page);\n+    await modal.waitForLoad();\n+    const modalTextContent = await modal.getTextContent();\n+\n+    let link;\n+    switch (resourceType) {\n+    case ResourceCard.Cohort:\n+      link = LinkText.DeleteCohort;\n+      break;\n+    case ResourceCard.ConceptSet:\n+      link = LinkText.DeleteConceptSet;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "809099eb89e7d81c102125359f4846a4e313303f"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA2MzExOQ==", "bodyText": "Currently it's covered. I created a new ticket to track work. RW-5589", "url": "https://github.com/all-of-us/workbench/pull/3958#discussion_r488063119", "createdAt": "2020-09-14T16:24:43Z", "author": {"login": "aweng98"}, "path": "e2e/app/page/workspace-base.ts", "diffHunk": "@@ -94,5 +97,48 @@ export default abstract class WorkspaceBase extends AuthenticatedPage {\n     return waitForAttributeEquality(this.page, {xpath: selector}, 'aria-selected', 'true');\n   }\n \n+  /**\n+   * Delete ConceptSet, Dataset or Cohort thru Ellipsis menu located inside the resource card.\n+   * @param {string} resourceName\n+   * @param {ResourceCard} resourceType\n+   */\n+  async deleteResource(resourceName: string, resourceType: ResourceCard): Promise<string[]> {\n+    const resourceCard = new DataResourceCard(this.page);\n+    const card = await resourceCard.findCard(resourceName, resourceType);\n+    if (!card) {\n+      throw new Error(`Failed to find ${resourceType} card \"${resourceName}\"`);\n+    }\n+\n+    await card.clickEllipsisAction(EllipsisMenuAction.Delete, {waitForNav: false});\n+\n+    const modal = new Modal(this.page);\n+    await modal.waitForLoad();\n+    const modalTextContent = await modal.getTextContent();\n+\n+    let link;\n+    switch (resourceType) {\n+    case ResourceCard.Cohort:\n+      link = LinkText.DeleteCohort;\n+      break;\n+    case ResourceCard.ConceptSet:\n+      link = LinkText.DeleteConceptSet;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwOTI1MA=="}, "originalCommit": {"oid": "809099eb89e7d81c102125359f4846a4e313303f"}, "originalPosition": 38}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2391, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}