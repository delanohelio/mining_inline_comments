{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2OTY2NzM0", "number": 4191, "title": "[risk=no] Guard against race condition preventing navbar rendering", "bodyText": "Fix bug introduced in #4186 - if cdrVersionListResponse was not yet available, the navbar wouldn't render.\nWorkspace About may have this same problem, so I also fixed that.\n\nif workspace was not yet available, the navbar wouldn't render.\n\nDescription:\n\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally\n I have run the E2E tests on ths change against my local UI + API server with yarn test-local\n If this includes a UI change, I have taken screen recordings or screenshots of the new behavior and notified the PO and UX designer\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-10-20T17:11:01Z", "url": "https://github.com/all-of-us/workbench/pull/4191", "merged": true, "mergeCommit": {"oid": "4b7106a83d83c887b55176a9e6424512b5cb9679"}, "closed": true, "closedAt": "2020-10-20T17:53:41Z", "author": {"login": "jmthibault79"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUb5u4gH2gAyNTA2OTY2NzM0OjMyMjZhM2VkMmVjYmQ4NzRhMDg2OWRkZjFiMDgzNmUyYjYyYmUyNzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUcQ7QgFqTUxMjk3MzI5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3226a3ed2ecbd874a0869ddf1b0836e2b62be275", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/3226a3ed2ecbd874a0869ddf1b0836e2b62be275", "committedDate": "2020-10-20T17:06:13Z", "message": "Guard against race condition where sometimes cdrVersionListResponse is not yet available"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyOTU5NTQy", "url": "https://github.com/all-of-us/workbench/pull/4191#pullrequestreview-512959542", "createdAt": "2020-10-20T17:14:41Z", "commit": {"oid": "3226a3ed2ecbd874a0869ddf1b0836e2b62be275"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxNzoxNDo0MVrOHlIrZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxNzoxNDo0MVrOHlIrZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODcwMTU0Mw==", "bodyText": "Hm.. this shouldn't be possible. withCdrVersions() doesn't render the wrapped component until cdrVersionListResponse is available. I would expect that to work the same for functional components as well, but perhaps I'm missing something.", "url": "https://github.com/all-of-us/workbench/pull/4191#discussion_r508701543", "createdAt": "2020-10-20T17:14:41Z", "author": {"login": "calbach"}, "path": "ui/src/app/pages/workspace/workspace-about.tsx", "diffHunk": "@@ -240,7 +240,7 @@ export const WorkspaceAbout = fp.flow(withUserProfile(), withUrlParams(), withCd\n           <div style={styles.infoBox} data-test-id='cdrVersion'>\n             <div style={styles.infoBoxHeader}>Dataset</div>\n             <div style={{fontSize: '0.5rem'}}>\n-              {workspace ? getCdrVersion(workspace, cdrVersionListResponse).name : 'Loading...'}\n+              {(workspace && cdrVersionListResponse) ? getCdrVersion(workspace, cdrVersionListResponse).name : 'Loading...'}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3226a3ed2ecbd874a0869ddf1b0836e2b62be275"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7d43cdc4d9f6125186912939adca1547ceaf897", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/f7d43cdc4d9f6125186912939adca1547ceaf897", "committedDate": "2020-10-20T17:22:04Z", "message": "should only need to check for the existence of the workspace"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyOTczMjk3", "url": "https://github.com/all-of-us/workbench/pull/4191#pullrequestreview-512973297", "createdAt": "2020-10-20T17:31:33Z", "commit": {"oid": "f7d43cdc4d9f6125186912939adca1547ceaf897"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3998, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}