{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwNjM1MTk5", "number": 3366, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNDo0NjozM1rODwBt2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNTowMjoxN1rODwCKZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNjg2MzYwOnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNDo0NjozM1rOGCytgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxOTowNzo0MlrOGC9EGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU4MTE4NA==", "bodyText": "Shouldn't this error message say at most 500 characters? Since workspace table column rp_other_purpose_details is varchar(500)?", "url": "https://github.com/all-of-us/workbench/pull/3366#discussion_r405581184", "createdAt": "2020-04-08T14:46:33Z", "author": {"login": "freemabd"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -1102,19 +1135,25 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n             <TooltipTrigger content={\n               errors && <ul>\n                 {errors.name && <div>{errors.name}</div>}\n-                {errors.billingAccountName && <div>You must select a billing account</div>}\n-                {errors.primaryPurpose && <div>You must choose at least one primary research\n+                {errors.billingAccountName && <div>\n+                  You must select a billing account</div>}\n+                {errors.primaryPurpose && <div> You must choose at least one primary research\n                   purpose (Question 1)</div>}\n-                {errors.anticipatedFindings && <div>Answer for <i>What are the anticipated findings\n+                {errors.otherPrimaryPurpose && <div> Other primary purpose should be of atleast 500 characters</div>}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15ba2bf879776b97199eea76244faff32ed60946"}, "originalPosition": 149}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTc1MDgwOQ==", "bodyText": "yes yeah i'll change it for all the relevant fields", "url": "https://github.com/all-of-us/workbench/pull/3366#discussion_r405750809", "createdAt": "2020-04-08T19:07:42Z", "author": {"login": "NehaBroad"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -1102,19 +1135,25 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n             <TooltipTrigger content={\n               errors && <ul>\n                 {errors.name && <div>{errors.name}</div>}\n-                {errors.billingAccountName && <div>You must select a billing account</div>}\n-                {errors.primaryPurpose && <div>You must choose at least one primary research\n+                {errors.billingAccountName && <div>\n+                  You must select a billing account</div>}\n+                {errors.primaryPurpose && <div> You must choose at least one primary research\n                   purpose (Question 1)</div>}\n-                {errors.anticipatedFindings && <div>Answer for <i>What are the anticipated findings\n+                {errors.otherPrimaryPurpose && <div> Other primary purpose should be of atleast 500 characters</div>}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU4MTE4NA=="}, "originalCommit": {"oid": "15ba2bf879776b97199eea76244faff32ed60946"}, "originalPosition": 149}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNjg2OTE5OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNDo0Nzo0NlrOGCyxAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNDo0Nzo0NlrOGCyxAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU4MjA4MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            {errors.diseaseOfFocus && <div> You must specify a disease of focus and it should be atleast 80 characters</div>}\n          \n          \n            \n                            {errors.diseaseOfFocus && <div> You must specify a disease of focus and it should be at most 80 characters</div>}", "url": "https://github.com/all-of-us/workbench/pull/3366#discussion_r405582080", "createdAt": "2020-04-08T14:47:46Z", "author": {"login": "freemabd"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -1102,19 +1135,25 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n             <TooltipTrigger content={\n               errors && <ul>\n                 {errors.name && <div>{errors.name}</div>}\n-                {errors.billingAccountName && <div>You must select a billing account</div>}\n-                {errors.primaryPurpose && <div>You must choose at least one primary research\n+                {errors.billingAccountName && <div>\n+                  You must select a billing account</div>}\n+                {errors.primaryPurpose && <div> You must choose at least one primary research\n                   purpose (Question 1)</div>}\n-                {errors.anticipatedFindings && <div>Answer for <i>What are the anticipated findings\n+                {errors.otherPrimaryPurpose && <div> Other primary purpose should be of atleast 500 characters</div>}\n+                {errors.anticipatedFindings && <div> Answer for <i>What are the anticipated findings\n                   from the study? (Question # 2.1)</i> cannot be empty</div>}\n-                {errors.scientificApproach && <div>Answer for <i>What are the scientific\n+                {errors.scientificApproach && <div> Answer for <i>What are the scientific\n                   approaches you plan to use for your study (Question # 2.2)</i> cannot be empty</div>}\n-                {errors.intendedStudy && <div>Answer for<i>What are the specific\n-                  scientific question(s) you intend to study (Question # 2.3)</i> cannot be empty</div>}\n-                {errors.specificPopulation && <div>You must specify a population of study</div>}\n-                {errors.diseaseOfFocus && <div>You must specify a disease of focus</div>}\n-                {errors.researchOutcoming && <div>You must specify the outcome of the research</div>}\n-                {errors.disseminate && <div>You must specific how you plan to disseminate your research findings</div>}\n+                {errors.intendedStudy && <div> Answer for<i>What are the specific scientific question(s) you intend to study\n+                  (Question # 2.3)</i> cannot be empty</div>}\n+                {errors.specificPopulation && <div> You must specify a population of study</div>}\n+                {errors.diseaseOfFocus && <div> You must specify a disease of focus and it should be atleast 80 characters</div>}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15ba2bf879776b97199eea76244faff32ed60946"}, "originalPosition": 164}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNjg3MDg0OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNDo0ODowNlrOGCyyCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNDo0ODowNlrOGCyyCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU4MjM0NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                              Specific Population Other text should be of atleast 100 characters</div>}\n          \n          \n            \n                              Specific Population Other text should be of at most 100 characters</div>}", "url": "https://github.com/all-of-us/workbench/pull/3366#discussion_r405582344", "createdAt": "2020-04-08T14:48:06Z", "author": {"login": "freemabd"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -1102,19 +1135,25 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n             <TooltipTrigger content={\n               errors && <ul>\n                 {errors.name && <div>{errors.name}</div>}\n-                {errors.billingAccountName && <div>You must select a billing account</div>}\n-                {errors.primaryPurpose && <div>You must choose at least one primary research\n+                {errors.billingAccountName && <div>\n+                  You must select a billing account</div>}\n+                {errors.primaryPurpose && <div> You must choose at least one primary research\n                   purpose (Question 1)</div>}\n-                {errors.anticipatedFindings && <div>Answer for <i>What are the anticipated findings\n+                {errors.otherPrimaryPurpose && <div> Other primary purpose should be of atleast 500 characters</div>}\n+                {errors.anticipatedFindings && <div> Answer for <i>What are the anticipated findings\n                   from the study? (Question # 2.1)</i> cannot be empty</div>}\n-                {errors.scientificApproach && <div>Answer for <i>What are the scientific\n+                {errors.scientificApproach && <div> Answer for <i>What are the scientific\n                   approaches you plan to use for your study (Question # 2.2)</i> cannot be empty</div>}\n-                {errors.intendedStudy && <div>Answer for<i>What are the specific\n-                  scientific question(s) you intend to study (Question # 2.3)</i> cannot be empty</div>}\n-                {errors.specificPopulation && <div>You must specify a population of study</div>}\n-                {errors.diseaseOfFocus && <div>You must specify a disease of focus</div>}\n-                {errors.researchOutcoming && <div>You must specify the outcome of the research</div>}\n-                {errors.disseminate && <div>You must specific how you plan to disseminate your research findings</div>}\n+                {errors.intendedStudy && <div> Answer for<i>What are the specific scientific question(s) you intend to study\n+                  (Question # 2.3)</i> cannot be empty</div>}\n+                {errors.specificPopulation && <div> You must specify a population of study</div>}\n+                {errors.diseaseOfFocus && <div> You must specify a disease of focus and it should be atleast 80 characters</div>}\n+                {errors.researchOutcoming && <div> You must specify the outcome of the research</div>}\n+                {errors.disseminate && <div> You must specific how you plan to disseminate your research findings</div>}\n+                {errors.otherDisseminateResearchFindings && <div>\n+                  Disseminate Research Findings Other text should be of atleast 100 characters</div>}\n+                {errors.otherSpecificPopulation && <div>\n+                  Specific Population Other text should be of atleast 100 characters</div>}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15ba2bf879776b97199eea76244faff32ed60946"}, "originalPosition": 170}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNjkzNjY4OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNTowMjoxN1rOGCzcLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxODo1OToxMFrOGC8xfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU5MzEzMw==", "bodyText": "Should it be >= 500?", "url": "https://github.com/all-of-us/workbench/pull/3366#discussion_r405593133", "createdAt": "2020-04-08T15:02:17Z", "author": {"login": "freemabd"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -560,6 +564,12 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n           rp.methodsDevelopment || rp.otherPurpose || rp.populationHealth || rp.socialBehavioral;\n     }\n \n+    get isOtherPrimaryPurposeValid() {\n+      const rp = this.state.workspace.researchPurpose;\n+      return !rp.otherPurpose ||\n+          (rp.otherPurposeDetails && rp.otherPurposeDetails.length <= 500);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15ba2bf879776b97199eea76244faff32ed60946"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTc0NjA0Ng==", "bodyText": "Its valid as long as its within 500", "url": "https://github.com/all-of-us/workbench/pull/3366#discussion_r405746046", "createdAt": "2020-04-08T18:59:10Z", "author": {"login": "NehaBroad"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -560,6 +564,12 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n           rp.methodsDevelopment || rp.otherPurpose || rp.populationHealth || rp.socialBehavioral;\n     }\n \n+    get isOtherPrimaryPurposeValid() {\n+      const rp = this.state.workspace.researchPurpose;\n+      return !rp.otherPurpose ||\n+          (rp.otherPurposeDetails && rp.otherPurposeDetails.length <= 500);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU5MzEzMw=="}, "originalCommit": {"oid": "15ba2bf879776b97199eea76244faff32ed60946"}, "originalPosition": 38}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3140, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}