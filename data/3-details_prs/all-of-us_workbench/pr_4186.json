{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2MTE2NjE0", "number": 4186, "title": "[risk=low][RW-5720] Display CDR Version name string in Workspace navbar", "bodyText": "Description:\nAlso added a cdrVersion() function to utils and updated Workspace About to remove a state variable\n\n\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally\n I have run the E2E tests on ths change against my local UI + API server with yarn test-local\n If this includes a UI change, I have taken screen recordings or screenshots of the new behavior and notified the PO and UX designer\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-10-19T16:37:42Z", "url": "https://github.com/all-of-us/workbench/pull/4186", "merged": true, "mergeCommit": {"oid": "da8ae7c498a5ffca909f194384b2a61bc5be4db2"}, "closed": true, "closedAt": "2020-10-20T14:19:47Z", "author": {"login": "jmthibault79"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUFE6sgH2gAyNTA2MTE2NjE0OmYyZGYxM2I5MTIzNWM4MWZmOTM0NzlhM2MxMzZmMzgyYTQxNWQ1N2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUZT4oAFqTUxMjc1NDM4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f2df13b91235c81ff93479a3c136f382a415d57e", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/f2df13b91235c81ff93479a3c136f382a415d57e", "committedDate": "2020-10-19T14:30:37Z", "message": "cdrVersion() function gets the full CdrVersion object based on the current workspace's ID"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fce4e05b40a4dbf2ac33851dfa8fa4adc41a5e2f", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/fce4e05b40a4dbf2ac33851dfa8fa4adc41a5e2f", "committedDate": "2020-10-19T16:35:18Z", "message": "style update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExOTU0NjU4", "url": "https://github.com/all-of-us/workbench/pull/4186#pullrequestreview-511954658", "createdAt": "2020-10-19T16:39:45Z", "commit": {"oid": "fce4e05b40a4dbf2ac33851dfa8fa4adc41a5e2f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjozOTo0NVrOHkXjPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjozOTo0NVrOHkXjPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5NjYzOA==", "bodyText": "no changes to any of these - just formatting", "url": "https://github.com/all-of-us/workbench/pull/4186#discussion_r507896638", "createdAt": "2020-10-19T16:39:45Z", "author": {"login": "jmthibault79"}, "path": "ui/src/app/pages/workspace/workspace-nav-bar.tsx", "diffHunk": "@@ -2,35 +2,58 @@ import {Component, Input} from '@angular/core';\n \n import {Clickable} from 'app/components/buttons';\n import colors from 'app/styles/colors';\n-import {reactStyles, ReactWrapperBase, withCurrentWorkspace, withUrlParams} from 'app/utils';\n+import {\n+  cdrVersion,\n+  reactStyles,\n+  ReactWrapperBase,\n+  withCdrVersions,\n+  withCurrentWorkspace,\n+  withUrlParams\n+} from 'app/utils';\n import {NavStore} from 'app/utils/navigation';\n \n import {serverConfigStore} from 'app/utils/navigation';\n import * as fp from 'lodash/fp';\n import * as React from 'react';\n \n-\n const styles = reactStyles({\n   container: {\n-    display: 'flex', alignItems: 'center', backgroundColor: colors.secondary,\n-    fontWeight: 500, color: 'white', textTransform: 'uppercase',\n-    height: 60, paddingRight: 16,\n+    display: 'flex',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fce4e05b40a4dbf2ac33851dfa8fa4adc41a5e2f"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4c95a445e669b5acfbdd8e4abdff3fc6b4e3449", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/c4c95a445e669b5acfbdd8e4abdff3fc6b4e3449", "committedDate": "2020-10-19T17:16:07Z", "message": "test fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd6ddead7795a5f8a4bb3463f4f9ad34791792e5", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/fd6ddead7795a5f8a4bb3463f4f9ad34791792e5", "committedDate": "2020-10-19T17:35:39Z", "message": "add tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb6901368577f8e42cc2c2a04fb1e67adb232308", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/eb6901368577f8e42cc2c2a04fb1e67adb232308", "committedDate": "2020-10-19T17:36:57Z", "message": "lint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMDUxNTQ1", "url": "https://github.com/all-of-us/workbench/pull/4186#pullrequestreview-512051545", "createdAt": "2020-10-19T18:33:57Z", "commit": {"oid": "eb6901368577f8e42cc2c2a04fb1e67adb232308"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODozMzo1N1rOHkcdzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODozNjoxOFrOHkcjNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk3NzE2NQ==", "bodyText": "is checking for the workspace sufficient here? What if cdrVersionListResponse is still loading?", "url": "https://github.com/all-of-us/workbench/pull/4186#discussion_r507977165", "createdAt": "2020-10-19T18:33:57Z", "author": {"login": "ericsong"}, "path": "ui/src/app/pages/workspace/workspace-about.tsx", "diffHunk": "@@ -244,7 +239,7 @@ export const WorkspaceAbout = fp.flow(withUserProfile(), withUrlParams(), withCd\n           </h3>\n           <div style={styles.infoBox} data-test-id='cdrVersion'>\n             <div style={styles.infoBoxHeader}>Dataset</div>\n-            <div style={{fontSize: '0.5rem'}}>{cdrVersion ? cdrVersion.name : 'Loading...'}</div>\n+            <div style={{fontSize: '0.5rem'}}>{workspace ? cdrVersion(workspace, cdrVersionListResponse).name : 'Loading...'}</div>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb6901368577f8e42cc2c2a04fb1e67adb232308"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk3ODA3Mg==", "bodyText": "do we need this check for a workspace if we're already doing that in the parent component before rendering this?", "url": "https://github.com/all-of-us/workbench/pull/4186#discussion_r507978072", "createdAt": "2020-10-19T18:35:27Z", "author": {"login": "ericsong"}, "path": "ui/src/app/pages/workspace/workspace-nav-bar.tsx", "diffHunk": "@@ -81,6 +104,9 @@ export const WorkspaceNavBarReact = fp.flow(\n     {activeTabIndex > 0 && navSeparator}\n     {fp.map(tab => navTab(tab, restrictTab(props.workspace, tab)), tabs)}\n     <div style={{flexGrow: 1}}/>\n+    {workspace && <div data-test-id='cdr-version' style={{textTransform: 'none'}}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb6901368577f8e42cc2c2a04fb1e67adb232308"}, "originalPosition": 88}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk3ODU1MA==", "bodyText": "can you add a verb to the function? I wasn't really sure what it did until I found the definition.", "url": "https://github.com/all-of-us/workbench/pull/4186#discussion_r507978550", "createdAt": "2020-10-19T18:36:18Z", "author": {"login": "ericsong"}, "path": "ui/src/app/utils/index.tsx", "diffHunk": "@@ -627,3 +630,7 @@ export function validateInputForMySQL(searchString: string): Array<string> {\n   }\n   return Array.from(inputErrors);\n }\n+\n+export function cdrVersion(workspace: Workspace, cdrs: CdrVersionListResponse): CdrVersion {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb6901368577f8e42cc2c2a04fb1e67adb232308"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc28451cc9c9fca9308e7256fa07296e524d5db9", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/cc28451cc9c9fca9308e7256fa07296e524d5db9", "committedDate": "2020-10-19T19:27:05Z", "message": "rename cdrVersion() to getCdrVersion()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyNzU0Mzgy", "url": "https://github.com/all-of-us/workbench/pull/4186#pullrequestreview-512754382", "createdAt": "2020-10-20T14:05:04Z", "commit": {"oid": "cc28451cc9c9fca9308e7256fa07296e524d5db9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3990, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}