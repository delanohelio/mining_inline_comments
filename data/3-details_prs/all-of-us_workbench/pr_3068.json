{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5MzQwMzk0", "number": 3068, "title": "[RW-4284][risk=no] Inactive Billing status banner", "bodyText": "This adds a banner for users viewing a workspace with inactive billing.\nThe banner\n\nI had to refactor the existing status banner a bit to reuse it. Some styling changes were made along the way.\nOriginal\n\nNew\n\nAnother big change was using ReactDOM.createPortal to allow the banner to be rendered from any component. Previously it would render to the top right corner of its parent component so it wouldn't go to the correct position unless the parent fit the entire page.\nTIL\n\nReactDOM.createPortal allow you to render components anywhere in the DOM. https://reactjs.org/docs/portals.html\nOur method of passing in props through withCurrentWorkspace withUserProfile etc, pass in the props AFTER the component has already been constructed and rendered. Thus, any state that relies on it must be checked in componentDidUpdate and not in the initial constructor.\n\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-01-30T23:32:13Z", "url": "https://github.com/all-of-us/workbench/pull/3068", "merged": true, "mergeCommit": {"oid": "d4b907fb1f05ac464f8f9e80e51d2eb651e2c61d"}, "closed": true, "closedAt": "2020-01-31T20:57:29Z", "author": {"login": "ericsong"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_jLq9gH2gAyMzY5MzQwMzk0OmE5OGI3YThhNjcwNDE3MWNmMjI4NmRlMjQxM2JjYjJjY2YzZDY4ZWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_1UBqAH2gAyMzY5MzQwMzk0OjgyZmQwZDY0NjViMmFhZDI1ZmYzMjBiYzQwMDIwMmU2MGViYTc4YWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a98b7a8a6704171cf2286de2413bcb2ccf3d68ef", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/all-of-us/workbench/commit/a98b7a8a6704171cf2286de2413bcb2ccf3d68ef", "committedDate": "2020-01-30T23:31:35Z", "message": "[RW-4284][risk=no] Inactive Billing status banner (#3063)\n\n* refactor status alert banner to work from any component\r\n\r\n* lot of UI treatment on status banner\r\n\r\n* feature complete\r\n\r\n* extract component\r\n\r\n* lint\r\n\r\n* remove unused prop\r\n\r\n* lint\r\n\r\n* use breadcrumb not workspace nav bar\r\n\r\n* use tag selector\r\n\r\n* lint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1734eed908370dc2f4a94665b857cf6f92a8910a", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/all-of-us/workbench/commit/1734eed908370dc2f4a94665b857cf6f92a8910a", "committedDate": "2020-01-30T23:55:05Z", "message": "fix bug where banner persisted when leaveing workspace"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNzAzMjE5", "url": "https://github.com/all-of-us/workbench/pull/3068#pullrequestreview-351703219", "createdAt": "2020-01-31T18:48:01Z", "commit": {"oid": "1734eed908370dc2f4a94665b857cf6f92a8910a"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxODo0ODowMVrOFkUh3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQyMDowMzozNFrOFkWggg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzYyOTQwNw==", "bodyText": "Extraneous", "url": "https://github.com/all-of-us/workbench/pull/3068#discussion_r373629407", "createdAt": "2020-01-31T18:48:01Z", "author": {"login": "als364"}, "path": "ui/src/app/components/breadcrumb.tsx", "diffHunk": "@@ -174,26 +193,33 @@ export const Breadcrumb = fp.flow(\n     }\n \n     render() {\n-      return <div style={{\n-        marginLeft: '3.25rem',\n-        display: 'inline-block',\n-      }}>\n-        {this.first().map(({label, url}, i) => {\n-          return <React.Fragment key={i}>\n-            <BreadcrumbLink href={url} style={styles.firstLink}>\n-              {label}\n+      console.log(this.props.workspace);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1734eed908370dc2f4a94665b857cf6f92a8910a"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY2MTgyNg==", "bodyText": "ooh neat. Is the ability to pass elements around built into React or is this something new you brought in?", "url": "https://github.com/all-of-us/workbench/pull/3068#discussion_r373661826", "createdAt": "2020-01-31T20:03:34Z", "author": {"login": "als364"}, "path": "ui/src/app/components/status-alert-banner.tsx", "diffHunk": "@@ -18,17 +19,14 @@ const styles = reactStyles({\n     position: 'absolute',\n     top: '0',\n     right: '0',\n-    zIndex: 1,\n+    zIndex: 101,\n   }\n });\n \n-\n-\n export interface Props {\n-  statusAlertId: number;\n   title: string;\n   message: string;\n-  link: string;\n+  footer: JSX.Element;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1734eed908370dc2f4a94665b857cf6f92a8910a"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82fd0d6465b2aad25ff320bc400202e60eba78ac", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/all-of-us/workbench/commit/82fd0d6465b2aad25ff320bc400202e60eba78ac", "committedDate": "2020-01-31T20:39:00Z", "message": "remove console log"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3774, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}