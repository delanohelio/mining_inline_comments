{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5NjY1MTQ1", "number": 3486, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxODoyNzowNVrOD21WCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxODoyNzowNVrOD21WCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4ODIzNjg4OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/pmiops/workbench/db/dao/UserServiceImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxODoyNzowNlrOGMxn6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxODoyNzowNlrOGMxn6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjA0OTEzMA==", "bodyText": "comparing Integer to int involves unboxing, and thus a potential NPE", "url": "https://github.com/all-of-us/workbench/pull/3486#discussion_r416049130", "createdAt": "2020-04-27T18:27:06Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/db/dao/UserServiceImpl.java", "diffHunk": "@@ -237,10 +237,16 @@ private void addToRegisteredTierGroupIdempotent(DbUser user) {\n   }\n \n   private boolean shouldUserBeRegistered(DbUser user) {\n-    boolean dataUseAgreementCompliant =\n-        user.getDataUseAgreementCompletionTime() != null\n-            || user.getDataUseAgreementBypassTime() != null\n-            || !configProvider.get().access.enableDataUseAgreement;\n+    boolean dataUseAgreementCompliant = false;\n+    if (user.getDataUseAgreementBypassTime() != null\n+        || !configProvider.get().access.enableDataUseAgreement) {\n+      // Data use agreement version may be ignored, since it's bypassed on the user or env level.\n+      dataUseAgreementCompliant = true;\n+    } else if (user.getDataUseAgreementSignedVersion() != null\n+        && user.getDataUseAgreementSignedVersion() == getCurrentDuccVersion()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72cffd42d0249d6faee0c013ae7156be12677441"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2819, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}