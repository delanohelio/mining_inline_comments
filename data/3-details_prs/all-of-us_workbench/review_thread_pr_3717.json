{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNzc0MTM3", "number": 3717, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMDozNTo1M1rOEJQjPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMDozNzoyOVrOEJQk5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MTQzODA3OnYy", "diffSide": "RIGHT", "path": "api/tools/src/main/java/org/pmiops/workbench/tools/institutions/Researcher.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMDozNTo1M1rOGpt99w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQxNDoyMzo1NFrOGp9zQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjM5Nzk0Mw==", "bodyText": "\"Multispecialty Group Practice\" was already an approved \"Other\" ... checking up on \"Non-tenure track researcher\" as well", "url": "https://github.com/all-of-us/workbench/pull/3717#discussion_r446397943", "createdAt": "2020-06-26T20:35:53Z", "author": {"login": "jmthibault79"}, "path": "api/tools/src/main/java/org/pmiops/workbench/tools/institutions/Researcher.java", "diffHunk": "@@ -60,15 +60,22 @@\n           .build();\n \n   private Researcher(final String[] userLine) {\n-    this.firstName = userLine[0].trim();\n-    this.lastName = userLine[1].trim();\n-    this.contactEmail = userLine[2].trim();\n-    this.userName = userLine[3].trim();\n-    this.institutionalRole = parseInstitutionalRole(userLine[4].trim());\n-    this.institutionalRoleOther = parseInstitutionalRoleOther(userLine[4].trim());\n-    this.institutionDisplayName = parseInstitutionDisplayName(userLine[5].trim());\n-    this.duaSigned = userLine[6].trim();\n-    this.redCapComplete = userLine[7].trim();\n+    this.firstName = clean(userLine[0]);\n+    this.lastName = clean(userLine[1]);\n+    this.contactEmail = clean(userLine[2]);\n+    this.userName = clean(userLine[3]);\n+    this.institutionalRole = parseInstitutionalRole(clean(userLine[4]));\n+    this.institutionalRoleOther = parseInstitutionalRoleOther(clean(userLine[4]));\n+    this.institutionDisplayName = parseInstitutionDisplayName(clean(userLine[5]));\n+    this.duaSigned = clean(userLine[6]);\n+    this.redCapComplete = clean(userLine[7]);\n+  }\n+\n+  // special case a few Other roles\n+\n+  private boolean isPreApprovedOtherRole(String rawRole) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1a666ce59481042277bbc493f8915e5bf1d397f"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY1NzM0Nw==", "bodyText": "(update: confirmed)", "url": "https://github.com/all-of-us/workbench/pull/3717#discussion_r446657347", "createdAt": "2020-06-28T14:23:54Z", "author": {"login": "jmthibault79"}, "path": "api/tools/src/main/java/org/pmiops/workbench/tools/institutions/Researcher.java", "diffHunk": "@@ -60,15 +60,22 @@\n           .build();\n \n   private Researcher(final String[] userLine) {\n-    this.firstName = userLine[0].trim();\n-    this.lastName = userLine[1].trim();\n-    this.contactEmail = userLine[2].trim();\n-    this.userName = userLine[3].trim();\n-    this.institutionalRole = parseInstitutionalRole(userLine[4].trim());\n-    this.institutionalRoleOther = parseInstitutionalRoleOther(userLine[4].trim());\n-    this.institutionDisplayName = parseInstitutionDisplayName(userLine[5].trim());\n-    this.duaSigned = userLine[6].trim();\n-    this.redCapComplete = userLine[7].trim();\n+    this.firstName = clean(userLine[0]);\n+    this.lastName = clean(userLine[1]);\n+    this.contactEmail = clean(userLine[2]);\n+    this.userName = clean(userLine[3]);\n+    this.institutionalRole = parseInstitutionalRole(clean(userLine[4]));\n+    this.institutionalRoleOther = parseInstitutionalRoleOther(clean(userLine[4]));\n+    this.institutionDisplayName = parseInstitutionDisplayName(clean(userLine[5]));\n+    this.duaSigned = clean(userLine[6]);\n+    this.redCapComplete = clean(userLine[7]);\n+  }\n+\n+  // special case a few Other roles\n+\n+  private boolean isPreApprovedOtherRole(String rawRole) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjM5Nzk0Mw=="}, "originalCommit": {"oid": "c1a666ce59481042277bbc493f8915e5bf1d397f"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MTQ0MDM5OnYy", "diffSide": "RIGHT", "path": "api/tools/src/main/java/org/pmiops/workbench/tools/institutions/Researcher.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMDozNjo0NlrOGpt_Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMDozNjo0NlrOGpt_Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjM5ODI5MA==", "bodyText": "the description for this (see line 47, or original CAPS doc) includes Data Analyst", "url": "https://github.com/all-of-us/workbench/pull/3717#discussion_r446398290", "createdAt": "2020-06-26T20:36:46Z", "author": {"login": "jmthibault79"}, "path": "api/tools/src/main/java/org/pmiops/workbench/tools/institutions/Researcher.java", "diffHunk": "@@ -104,9 +115,12 @@ private InstitutionalRole parseInstitutionalRole(final String rawRole) {\n       return InstitutionalRole.TRAINEE;\n     }\n \n-    // special case one particular user\n-    // hopefully we will not need to add many such cases like this\n-    if (rawRole.equals(\"Multispecialty Group Practice\")) {\n+    if (rawRole.startsWith(\"Data Analyst\")) {\n+      return InstitutionalRole.PROJECT_PERSONNEL;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1a666ce59481042277bbc493f8915e5bf1d397f"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MTQ0MjI5OnYy", "diffSide": "RIGHT", "path": "api/tools/src/main/java/org/pmiops/workbench/tools/institutions/UserToAffiliate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMDozNzoyOVrOGpuAdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMDozNzoyOVrOGpuAdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjM5ODU4Mw==", "bodyText": "not sure why this started with this particular input", "url": "https://github.com/all-of-us/workbench/pull/3717#discussion_r446398583", "createdAt": "2020-06-26T20:37:29Z", "author": {"login": "jmthibault79"}, "path": "api/tools/src/main/java/org/pmiops/workbench/tools/institutions/UserToAffiliate.java", "diffHunk": "@@ -22,6 +22,11 @@\n   String contactEmail;\n   String userName;\n \n+  // sometimes the CSVReader retains double quotes so we remove them manually", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1a666ce59481042277bbc493f8915e5bf1d397f"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2587, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}