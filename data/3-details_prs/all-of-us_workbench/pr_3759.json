{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2NDA1ODk1", "number": 3759, "title": "[RW-5240][risk=no] Puppeteer Workspace Edit test", "bodyText": "Editing Workspace test.", "createdAt": "2020-07-08T18:14:18Z", "url": "https://github.com/all-of-us/workbench/pull/3759", "merged": true, "mergeCommit": {"oid": "4d59121ebc403bcabb7b0a140c129b0a5a51e897"}, "closed": true, "closedAt": "2020-07-08T21:33:16Z", "author": {"login": "aweng98"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcy_fSEgH2gAyNDQ2NDA1ODk1OjQ4NjUzNGEzZDQ5M2Y3MGFlMTkzYTFkYmY0Yjg5NTMwZTUwMmU1ZTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczA6g8AFqTQ0NTA5MjIyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "486534a3d493f70ae193a1dbf4b89530e502e5e1", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/486534a3d493f70ae193a1dbf4b89530e502e5e1", "committedDate": "2020-07-08T19:20:29Z", "message": "Workspace About page test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49884e63e598bf436254b3e1b117f7cc2b8d14b6", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/49884e63e598bf436254b3e1b117f7cc2b8d14b6", "committedDate": "2020-07-08T19:03:57Z", "message": "update date check"}, "afterCommit": {"oid": "486534a3d493f70ae193a1dbf4b89530e502e5e1", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/486534a3d493f70ae193a1dbf4b89530e502e5e1", "committedDate": "2020-07-08T19:20:29Z", "message": "Workspace About page test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "905bd93069bb981acf0f9fd0b5ec2597c2e0b41d", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/905bd93069bb981acf0f9fd0b5ec2597c2e0b41d", "committedDate": "2020-07-08T19:44:18Z", "message": "revert README and package.json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11f109a097b33d89bbb5ac1eca83aea1f3f6de07", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/11f109a097b33d89bbb5ac1eca83aea1f3f6de07", "committedDate": "2020-07-08T19:48:48Z", "message": "test comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MDkyMjIz", "url": "https://github.com/all-of-us/workbench/pull/3759#pullrequestreview-445092223", "createdAt": "2020-07-08T20:08:22Z", "commit": {"oid": "11f109a097b33d89bbb5ac1eca83aea1f3f6de07"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMDowODoyMlrOGu3fFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMDo1ODoxMFrOGu4-6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc5Njc1Ng==", "bodyText": "why double await ?", "url": "https://github.com/all-of-us/workbench/pull/3759#discussion_r451796756", "createdAt": "2020-07-08T20:08:22Z", "author": {"login": "jmthibault79"}, "path": "e2e/app/page/workspace-about-page.ts", "diffHunk": "@@ -69,4 +69,26 @@ export default class WorkspaceAboutPage extends AuthenticatedPage{\n     await modal.waitUntilVisible();\n     return modal;\n   }\n+\n+  async getCdrVersion(): Promise<string> {\n+    const cdrVerXpath = '//*[@data-test-id=\"cdrVersion\"]';\n+    const cdr = await this.page.waitForXPath(cdrVerXpath, {visible: true});\n+    const cdrValue = await (await cdr.getProperty('innerText')).jsonValue();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11f109a097b33d89bbb5ac1eca83aea1f3f6de07"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc5NzUyMw==", "bodyText": "so we're defaulting to Headless if this value is missing.  is that what we want?", "url": "https://github.com/all-of-us/workbench/pull/3759#discussion_r451797523", "createdAt": "2020-07-08T20:10:01Z", "author": {"login": "jmthibault79"}, "path": "e2e/jest-puppeteer.config.js", "diffHunk": "@@ -5,7 +5,7 @@\n \n const fp = require('lodash/fp');\n const puppeteer = require('puppeteer');\n-const isHeadless = process.env.HEADLESS !== 'false';\n+const isHeadless = (process.env.HEADLESS || 'true') === 'true';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11f109a097b33d89bbb5ac1eca83aea1f3f6de07"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgyMTI5MA==", "bodyText": "how does this work?", "url": "https://github.com/all-of-us/workbench/pull/3759#discussion_r451821290", "createdAt": "2020-07-08T20:58:10Z", "author": {"login": "jmthibault79"}, "path": "e2e/tests/workspace/workspace-edit.spec.ts", "diffHunk": "@@ -0,0 +1,73 @@\n+import DataPage, {TabLabelAlias} from 'app/page/data-page';\n+import WorkspacesPage from 'app/page/workspaces-page';\n+import {EllipsisMenuAction} from 'app/text-labels';\n+import * as testData from 'resources/data/workspace-data';\n+import {findWorkspace, performActions, signIn} from 'utils/test-utils';\n+import WorkspaceAboutPage from 'app/page/workspace-about-page';\n+\n+\n+describe('Editing workspace thru workspace card ellipsis menu', () => {\n+\n+  beforeEach(async () => {\n+    await signIn(page);\n+  });\n+\n+  /**\n+   * Test:\n+   * - Find an existing workspace. Create a new workspace if none exists.\n+   * - Edit workspace: changing Question 2 answers.\n+   * - Verify landing in DATA tab.\n+   * - Verify Workspace Information in ABOUT tab.\n+   */\n+  test('User as OWNER can edit workspace', async () => {\n+    const workspaceCard = await findWorkspace(page);\n+    await (workspaceCard.getEllipsis()).clickAction(EllipsisMenuAction.Edit);\n+\n+    const workspacesPage = new WorkspacesPage(page);\n+    // Change question #2 answer\n+    await performActions(page, testData.defaultAnswersResearchPurposeSummary);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11f109a097b33d89bbb5ac1eca83aea1f3f6de07"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4691, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}