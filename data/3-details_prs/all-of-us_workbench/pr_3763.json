{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2NTE5NjQ1", "number": 3763, "title": "[no ticket][risk=no] Puppeteer enable rename dataset test code", "bodyText": "Bug https://precisionmedicineinitiative.atlassian.net/browse/RW-5079 fixed.", "createdAt": "2020-07-08T22:36:09Z", "url": "https://github.com/all-of-us/workbench/pull/3763", "merged": true, "mergeCommit": {"oid": "542340e19df5a9cbd30297716238e4ac0f897863"}, "closed": true, "closedAt": "2020-07-09T14:23:56Z", "author": {"login": "aweng98"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczCLoWAH2gAyNDQ2NTE5NjQ1OjIxYmM0NDEzMzY5M2JhMjFjZGQyZDA1YjU1MTJjNWE4ODlmMWFiNTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczPpDNAFqTQ0NTY1MzY5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "21bc44133693ba21cdd2d05b5512c5a889f1ab50", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/21bc44133693ba21cdd2d05b5512c5a889f1ab50", "committedDate": "2020-07-08T22:28:44Z", "message": "enable rename dataset code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4730eabf3d770bedd7abd8e4013e570ade84186", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/a4730eabf3d770bedd7abd8e4013e570ade84186", "committedDate": "2020-07-09T01:57:23Z", "message": "clear function fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ab8bb813228f4d831549a68f022721aa03d970d", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/3ab8bb813228f4d831549a68f022721aa03d970d", "committedDate": "2020-07-09T02:03:07Z", "message": "fix format"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTkwNjYy", "url": "https://github.com/all-of-us/workbench/pull/3763#pullrequestreview-445590662", "createdAt": "2020-07-09T13:00:02Z", "commit": {"oid": "3ab8bb813228f4d831549a68f022721aa03d970d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzowMDowM1rOGvQA5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzowMTozOFrOGvQEpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE5ODYzMQ==", "bodyText": "While running dataset-create.spec to make sure it runs okay, I observed clear() func acts flaky. Old value in text input was not always cleared before type new text.\nMy fix is to add one retry.", "url": "https://github.com/all-of-us/workbench/pull/3763#discussion_r452198631", "createdAt": "2020-07-09T13:00:03Z", "author": {"login": "aweng98"}, "path": "e2e/app/element/base-element.ts", "diffHunk": "@@ -151,10 +151,33 @@ export default class BaseElement extends Container {\n       });\n   }\n \n-  async type(text: string, options?: { delay: number }): Promise<this> {\n-    await this.focus();\n-    await this.clear();\n-    await this.asElementHandle().then((handle: ElementHandle) => handle.type(text, options));\n+  /**\n+   * Clear existing value in textbox then type new text value.\n+   * @param {string} The texts string.\n+   * @param options The typing options.\n+   */\n+  async type(textValue: string, options?: { delay: number }): Promise<this> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ab8bb813228f4d831549a68f022721aa03d970d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE5OTU4OA==", "bodyText": "clearText alternative: injecting page function.", "url": "https://github.com/all-of-us/workbench/pull/3763#discussion_r452199588", "createdAt": "2020-07-09T13:01:38Z", "author": {"login": "aweng98"}, "path": "e2e/app/element/base-element.ts", "diffHunk": "@@ -177,12 +200,26 @@ export default class BaseElement extends Container {\n   }\n \n   /**\n-   * Clear value in textbox or textarea.\n+   * Clear value in textbox.\n    */\n-  async clear(): Promise<void> {\n+  async clear(options: ClickOptions = { clickCount: 3 }): Promise<void> {\n     const elemt = await this.asElementHandle();\n-    await elemt.click({ clickCount: 3 });\n-    await elemt.press('Backspace');\n+    await elemt.focus();\n+    await elemt.click(options);\n+    await this.page.keyboard.press('Backspace');\n+  }\n+\n+  async clearTextInput(): Promise<void> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ab8bb813228f4d831549a68f022721aa03d970d"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NjUzNjk5", "url": "https://github.com/all-of-us/workbench/pull/3763#pullrequestreview-445653699", "createdAt": "2020-07-09T14:09:38Z", "commit": {"oid": "3ab8bb813228f4d831549a68f022721aa03d970d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4696, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}