{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwMTk2Mjk3", "number": 4284, "title": "[no ticket][risk=no] domain count fix", "bodyText": "fixing domain counts", "createdAt": "2020-11-12T22:29:00Z", "url": "https://github.com/all-of-us/workbench/pull/4284", "merged": true, "mergeCommit": {"oid": "e79938a881f6eedddd44d1cbb64cd9b63b5c426e"}, "closed": true, "closedAt": "2020-11-13T14:43:44Z", "author": {"login": "freemabd"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdb38j1gH2gAyNTIwMTk2Mjk3OmI1YTY1NTYzYTA4ZTMzNDE5NzE0NmRmMTIwM2ZkMTIwZTliZmVmODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdcH2eUgFqTUzMDA5NTUwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b5a65563a08e334197146df1203fd120e9bfef88", "author": {"user": {"login": "jscherdin", "name": "Jon Scherdin"}}, "url": "https://github.com/all-of-us/workbench/commit/b5a65563a08e334197146df1203fd120e9bfef88", "committedDate": "2020-11-12T19:44:07Z", "message": "fixing code to add rank1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a78b63dc4cbac3d23709983cbec030372559fa1", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/0a78b63dc4cbac3d23709983cbec030372559fa1", "committedDate": "2020-11-12T22:26:25Z", "message": "fix problems"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "029bdfaa5410952cd62ec9b69d0a04ffda5cd05e", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/029bdfaa5410952cd62ec9b69d0a04ffda5cd05e", "committedDate": "2020-11-12T22:27:06Z", "message": "Merge branch 'freemabd/domain-count-fix' of https://github.com/all-of-us/workbench into freemabd/domain-count-fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5NjcxMTQ0", "url": "https://github.com/all-of-us/workbench/pull/4284#pullrequestreview-529671144", "createdAt": "2020-11-13T03:02:30Z", "commit": {"oid": "029bdfaa5410952cd62ec9b69d0a04ffda5cd05e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwMzowMjozMFrOHyX0xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwMzowMjozMFrOHyX0xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjU4MTE5MQ==", "bodyText": "shouldn't this be \"isSelectable\"?", "url": "https://github.com/all-of-us/workbench/pull/4284#discussion_r522581191", "createdAt": "2020-11-13T03:02:30Z", "author": {"login": "jscherdin"}, "path": "api/src/main/java/org/pmiops/workbench/cdr/dao/CBCriteriaDao.java", "diffHunk": "@@ -166,7 +166,7 @@\n \n   @Query(\n       value =\n-          \"select c from DbCriteria c where domainId=:domain and match(fullText, concat('+[', :domain, '_rank1]')) > 0 order by c.count desc, c.name asc\")\n+          \"select c from DbCriteria c where domainId=:domain and selectable = 1 and match(fullText, concat('+[', :domain, '_rank1]')) > 0 order by c.count desc, c.name asc\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "029bdfaa5410952cd62ec9b69d0a04ffda5cd05e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMDk1NTA3", "url": "https://github.com/all-of-us/workbench/pull/4284#pullrequestreview-530095507", "createdAt": "2020-11-13T14:15:49Z", "commit": {"oid": "029bdfaa5410952cd62ec9b69d0a04ffda5cd05e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxNDoxNTo0OVrOHyv78Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxNDoxNTo0OVrOHyv78Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk3NjI0MQ==", "bodyText": "Ok. the switching back and forth between native sql and jpql confused me", "url": "https://github.com/all-of-us/workbench/pull/4284#discussion_r522976241", "createdAt": "2020-11-13T14:15:49Z", "author": {"login": "jscherdin"}, "path": "api/src/main/java/org/pmiops/workbench/cdr/dao/CBCriteriaDao.java", "diffHunk": "@@ -166,7 +166,7 @@\n \n   @Query(\n       value =\n-          \"select c from DbCriteria c where domainId=:domain and match(fullText, concat('+[', :domain, '_rank1]')) > 0 order by c.count desc, c.name asc\")\n+          \"select c from DbCriteria c where domainId=:domain and selectable = 1 and match(fullText, concat('+[', :domain, '_rank1]')) > 0 order by c.count desc, c.name asc\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjU4MTE5MQ=="}, "originalCommit": {"oid": "029bdfaa5410952cd62ec9b69d0a04ffda5cd05e"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3868, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}