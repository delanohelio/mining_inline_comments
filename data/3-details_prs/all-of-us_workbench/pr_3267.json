{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNDgyOTQz", "number": 3267, "title": "[risk=no][no ticket] System metadata and pre-run warning", "bodyText": "Since this script is intended to be used only on input files from trusted sources, there's no screening in place to determine that a command won't be destructive (and of course, with local aliases, all bets are really off). Still, in case some joker tries to put in a tool with the name rf and the version flag -rf /, we want to hedge our bets. As such, the tool now prints out all the commands to be run in a list and asks for confirmation before continuing.\nAdditoinally, we now capture:\n\nusername\nhostname\nos\ntimestamp\nshell\n\nAgain, the intention is for this to be used internally, and users have the option of deleting stuff they don't want included before sharing. I.e. this tool isn't sending any sensitive info anywhere except a local file.\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-03-18T14:51:45Z", "url": "https://github.com/all-of-us/workbench/pull/3267", "merged": true, "mergeCommit": {"oid": "7bf922f96ded94ad61906d7c25313bcdfcd4d951"}, "closed": true, "closedAt": "2020-03-20T18:54:22Z", "author": {"login": "jaycarlton"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOpxfNgH2gAyMzkwNDgyOTQzOmNlMTdlNzlkZGI2MGExNGM4OTdjZjIzZTJhNDkxNjAzMjkwYTJjMmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPhRAFgFqTM3ODUyMzc3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ce17e79ddb60a14c897cf23e2a491603290a2c2e", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/ce17e79ddb60a14c897cf23e2a491603290a2c2e", "committedDate": "2020-03-17T21:41:11Z", "message": "capture metadata"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ee96aab58e095ec6344e299e92340e5c1a59137", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/9ee96aab58e095ec6344e299e92340e5c1a59137", "committedDate": "2020-03-17T21:56:55Z", "message": "capture metadata and give user a chance to abort if unsafe command provided"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a547b4243a23d3f25263626a04ca4cb8326a49d", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/9a547b4243a23d3f25263626a04ca4cb8326a49d", "committedDate": "2020-03-18T11:58:49Z", "message": "const"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MDE5NDgx", "url": "https://github.com/all-of-us/workbench/pull/3267#pullrequestreview-377019481", "createdAt": "2020-03-18T16:12:17Z", "commit": {"oid": "9a547b4243a23d3f25263626a04ca4cb8326a49d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNjoxMjoxN1rOF4McKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNjoxMjoxN1rOF4McKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQ2ODM5Mw==", "bodyText": "so this is the option to be used for introducing a new yaml file to AoU ?", "url": "https://github.com/all-of-us/workbench/pull/3267#discussion_r394468393", "createdAt": "2020-03-18T16:12:17Z", "author": {"login": "NehaBroad"}, "path": "ops/ruby/devops-toolkit/devops.rb", "diffHunk": "@@ -26,6 +26,7 @@ def parse_options\n     parser.on('-s', '--source-uri [SOURCE-URI]', String, 'URI or fully qualified name for source asset')\n     parser.on('-u', '--source-env [SOURCE-ENV]', String, 'Short name for source Environment (lowercase), for example \"staging\".')\n     parser.on('-d', '--dry-run', 'Execute a dry run of the task')\n+    parser.on('-i', '--input-tools-file [INPUT-TOOLS-FILE]', String, 'Input YAML file for tools')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a547b4243a23d3f25263626a04ca4cb8326a49d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb596d198c42f2d74cc86c698840d3856df07ba8", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/fb596d198c42f2d74cc86c698840d3856df07ba8", "committedDate": "2020-03-18T20:51:42Z", "message": "docs & alphabetize"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTIyMjkw", "url": "https://github.com/all-of-us/workbench/pull/3267#pullrequestreview-378522290", "createdAt": "2020-03-20T14:18:39Z", "commit": {"oid": "fb596d198c42f2d74cc86c698840d3856df07ba8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDoxODozOVrOF5Vkyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDoxODozOVrOF5Vkyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY2NjYzNA==", "bodyText": "nice!", "url": "https://github.com/all-of-us/workbench/pull/3267#discussion_r395666634", "createdAt": "2020-03-20T14:18:39Z", "author": {"login": "NehaBroad"}, "path": "ops/ruby/devops-toolkit/README.md", "diffHunk": "@@ -67,6 +67,42 @@ To use it, do\n bundle install\n ```\n \n+## Tasks", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb596d198c42f2d74cc86c698840d3856df07ba8"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTIzNzcz", "url": "https://github.com/all-of-us/workbench/pull/3267#pullrequestreview-378523773", "createdAt": "2020-03-20T14:20:23Z", "commit": {"oid": "fb596d198c42f2d74cc86c698840d3856df07ba8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3491, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}