{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MjY0NDIy", "number": 3867, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNDoyMToyMFrOEWpqdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxNToxODo0OVrOEXQrzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTg2NzQyOnYy", "diffSide": "RIGHT", "path": "ui/src/app/cohort-search/modifier-page/modifier-page-modal.component.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNDoyMToyMFrOG-BBQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNDoyMToyMFrOG-BBQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY4MTYwMg==", "bodyText": "I just rename the old modifier-page to modifier-page-modal.component.tsx", "url": "https://github.com/all-of-us/workbench/pull/3867#discussion_r467681602", "createdAt": "2020-08-10T04:21:20Z", "author": {"login": "NehaBroad"}, "path": "ui/src/app/cohort-search/modifier-page/modifier-page-modal.component.tsx", "diffHunk": "@@ -0,0 +1,568 @@\n+import * as fp from 'lodash/fp';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f84e37750c1d18688200528e92f2ffbb70a43f4d"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDI1MjcyOnYy", "diffSide": "RIGHT", "path": "ui/src/app/cohort-search/selection-list/selection-list.component.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjo1NDoyMFrOG-XLqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMzoyNzoyOFrOG_hQSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA0NDcxNA==", "bodyText": "We'll need a condition on this button since Physical Measurements and Demographics don't get modifiers.\nAlso, the mocks show this at the bottom of the list container. Maybe use something like position: absolute; bottom: 0; on the button, may also need to set position: relative on the parent div to work.\nI know the mocks don't really show hover styles, but the current hover style looks too dark:\n\nMaybe a slight change in text and/or border color on hover like we do with the Calculate button for modifiers and attributes.", "url": "https://github.com/all-of-us/workbench/pull/3867#discussion_r468044714", "createdAt": "2020-08-10T16:54:20Z", "author": {"login": "dolbeew"}, "path": "ui/src/app/cohort-search/selection-list/selection-list.component.tsx", "diffHunk": "@@ -335,22 +356,42 @@ export const SelectionList = withCurrentCohortCriteria()(class extends React.Com\n     </React.Fragment> ;\n   }\n \n+  applyModifier(modifiers) {\n+    if (modifiers) {\n+      const modifierButtonText = '(' + modifiers.length + ')  MODIFIERS APPLIED';\n+      this.setState({showModifiersSlide: false, modifierButtonText: modifierButtonText});\n+    } else {\n+      this.setState({showModifiersSlide: false, modifierButtonText: 'APPLY MODIFIERS'});\n+    }\n+\n+  }\n+\n   render() {\n     const {back, criteria} = this.props;\n+    const {modifierButtonText, showModifiersSlide} = this.state;\n     return <div>\n-      <div style={{paddingTop: '0.5rem'}}>\n-        {criteria && <div style={styles.selectionContainer}>\n+        {!showModifiersSlide && criteria &&  <React.Fragment>\n+          <h3 style={{...styles.sectionTitle, marginTop: 0}}>Add selected criteria to cohort</h3>\n+        <div style={{paddingTop: '0.5rem'}}>\n+          <div style={styles.selectionContainer}>\n           {this.renderCriteria()}\n-        </div>}\n-      </div>\n-      <FlexRowWrap style={{flexDirection: 'row-reverse', marginTop: '2rem'}}>\n+          <div style = {{padding: '1rem 0 1.2rem 1.2rem'}}>\n+        <Button style={{backgroundColor: colors.white, border: '0.1rem solid' + colors.accent, color: colors.accent}}\n+                onClick = {() => this.setState({showModifiersSlide: true})}>\n+        {modifierButtonText}\n+        </Button>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11700cc0303cce9e45d6bde897d23f2251fcab69"}, "originalPosition": 106}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTI1ODMxNQ==", "bodyText": "Done, please do let me know if the new highlight color works", "url": "https://github.com/all-of-us/workbench/pull/3867#discussion_r469258315", "createdAt": "2020-08-12T13:27:28Z", "author": {"login": "NehaBroad"}, "path": "ui/src/app/cohort-search/selection-list/selection-list.component.tsx", "diffHunk": "@@ -335,22 +356,42 @@ export const SelectionList = withCurrentCohortCriteria()(class extends React.Com\n     </React.Fragment> ;\n   }\n \n+  applyModifier(modifiers) {\n+    if (modifiers) {\n+      const modifierButtonText = '(' + modifiers.length + ')  MODIFIERS APPLIED';\n+      this.setState({showModifiersSlide: false, modifierButtonText: modifierButtonText});\n+    } else {\n+      this.setState({showModifiersSlide: false, modifierButtonText: 'APPLY MODIFIERS'});\n+    }\n+\n+  }\n+\n   render() {\n     const {back, criteria} = this.props;\n+    const {modifierButtonText, showModifiersSlide} = this.state;\n     return <div>\n-      <div style={{paddingTop: '0.5rem'}}>\n-        {criteria && <div style={styles.selectionContainer}>\n+        {!showModifiersSlide && criteria &&  <React.Fragment>\n+          <h3 style={{...styles.sectionTitle, marginTop: 0}}>Add selected criteria to cohort</h3>\n+        <div style={{paddingTop: '0.5rem'}}>\n+          <div style={styles.selectionContainer}>\n           {this.renderCriteria()}\n-        </div>}\n-      </div>\n-      <FlexRowWrap style={{flexDirection: 'row-reverse', marginTop: '2rem'}}>\n+          <div style = {{padding: '1rem 0 1.2rem 1.2rem'}}>\n+        <Button style={{backgroundColor: colors.white, border: '0.1rem solid' + colors.accent, color: colors.accent}}\n+                onClick = {() => this.setState({showModifiersSlide: true})}>\n+        {modifierButtonText}\n+        </Button>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA0NDcxNA=="}, "originalCommit": {"oid": "11700cc0303cce9e45d6bde897d23f2251fcab69"}, "originalPosition": 106}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDg4OTAwOnYy", "diffSide": "RIGHT", "path": "ui/src/app/cohort-search/selection-list/selection-list.component.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxOTo1MzoyOFrOG-dS4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMzozMDowNVrOG_hXfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE0NDg2NA==", "bodyText": "My first instinct was to say we need to move ModifierPage to HelpSidebar like we have the attributes component, but I think it might be better if we move attributes here instead. That would make all the flipping back and forth between views simpler and also clean up the sidebar template a little.\nI can include moving the attributes in RW-5114 after this merges, or we can just do a separate ticket if needed.", "url": "https://github.com/all-of-us/workbench/pull/3867#discussion_r468144864", "createdAt": "2020-08-10T19:53:28Z", "author": {"login": "dolbeew"}, "path": "ui/src/app/cohort-search/selection-list/selection-list.component.tsx", "diffHunk": "@@ -335,22 +356,42 @@ export const SelectionList = withCurrentCohortCriteria()(class extends React.Com\n     </React.Fragment> ;\n   }\n \n+  applyModifier(modifiers) {\n+    if (modifiers) {\n+      const modifierButtonText = '(' + modifiers.length + ')  MODIFIERS APPLIED';\n+      this.setState({showModifiersSlide: false, modifierButtonText: modifierButtonText});\n+    } else {\n+      this.setState({showModifiersSlide: false, modifierButtonText: 'APPLY MODIFIERS'});\n+    }\n+\n+  }\n+\n   render() {\n     const {back, criteria} = this.props;\n+    const {modifierButtonText, showModifiersSlide} = this.state;\n     return <div>\n-      <div style={{paddingTop: '0.5rem'}}>\n-        {criteria && <div style={styles.selectionContainer}>\n+        {!showModifiersSlide && criteria &&  <React.Fragment>\n+          <h3 style={{...styles.sectionTitle, marginTop: 0}}>Add selected criteria to cohort</h3>\n+        <div style={{paddingTop: '0.5rem'}}>\n+          <div style={styles.selectionContainer}>\n           {this.renderCriteria()}\n-        </div>}\n-      </div>\n-      <FlexRowWrap style={{flexDirection: 'row-reverse', marginTop: '2rem'}}>\n+          <div style = {{padding: '1rem 0 1.2rem 1.2rem'}}>\n+        <Button style={{backgroundColor: colors.white, border: '0.1rem solid' + colors.accent, color: colors.accent}}\n+                onClick = {() => this.setState({showModifiersSlide: true})}>\n+        {modifierButtonText}\n+        </Button>\n+        </div>\n+        </div></div>\n+        </React.Fragment>}\n+        {showModifiersSlide && <ModifierPage selections={criteria} applyModifiers={(modifier) => this.applyModifier(modifier)}/>}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11700cc0303cce9e45d6bde897d23f2251fcab69"}, "originalPosition": 110}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTI2MDE1Nw==", "bodyText": "Lets chat about this offline, i have few questions", "url": "https://github.com/all-of-us/workbench/pull/3867#discussion_r469260157", "createdAt": "2020-08-12T13:30:05Z", "author": {"login": "NehaBroad"}, "path": "ui/src/app/cohort-search/selection-list/selection-list.component.tsx", "diffHunk": "@@ -335,22 +356,42 @@ export const SelectionList = withCurrentCohortCriteria()(class extends React.Com\n     </React.Fragment> ;\n   }\n \n+  applyModifier(modifiers) {\n+    if (modifiers) {\n+      const modifierButtonText = '(' + modifiers.length + ')  MODIFIERS APPLIED';\n+      this.setState({showModifiersSlide: false, modifierButtonText: modifierButtonText});\n+    } else {\n+      this.setState({showModifiersSlide: false, modifierButtonText: 'APPLY MODIFIERS'});\n+    }\n+\n+  }\n+\n   render() {\n     const {back, criteria} = this.props;\n+    const {modifierButtonText, showModifiersSlide} = this.state;\n     return <div>\n-      <div style={{paddingTop: '0.5rem'}}>\n-        {criteria && <div style={styles.selectionContainer}>\n+        {!showModifiersSlide && criteria &&  <React.Fragment>\n+          <h3 style={{...styles.sectionTitle, marginTop: 0}}>Add selected criteria to cohort</h3>\n+        <div style={{paddingTop: '0.5rem'}}>\n+          <div style={styles.selectionContainer}>\n           {this.renderCriteria()}\n-        </div>}\n-      </div>\n-      <FlexRowWrap style={{flexDirection: 'row-reverse', marginTop: '2rem'}}>\n+          <div style = {{padding: '1rem 0 1.2rem 1.2rem'}}>\n+        <Button style={{backgroundColor: colors.white, border: '0.1rem solid' + colors.accent, color: colors.accent}}\n+                onClick = {() => this.setState({showModifiersSlide: true})}>\n+        {modifierButtonText}\n+        </Button>\n+        </div>\n+        </div></div>\n+        </React.Fragment>}\n+        {showModifiersSlide && <ModifierPage selections={criteria} applyModifiers={(modifier) => this.applyModifier(modifier)}/>}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE0NDg2NA=="}, "originalCommit": {"oid": "11700cc0303cce9e45d6bde897d23f2251fcab69"}, "originalPosition": 110}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDkxMTE2OnYy", "diffSide": "RIGHT", "path": "ui/src/app/cohort-search/modifier-page/modifier-page.component.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMDowMDoxNFrOG-dgiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwMjozOTo1N1rOG_59fQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE0ODM2MA==", "bodyText": "Remove if no longer needed", "url": "https://github.com/all-of-us/workbench/pull/3867#discussion_r468148360", "createdAt": "2020-08-10T20:00:14Z", "author": {"login": "dolbeew"}, "path": "ui/src/app/cohort-search/modifier-page/modifier-page.component.tsx", "diffHunk": "@@ -309,20 +287,21 @@ export const ModifierPage = withCurrentWorkspace()(\n       }\n       this.setState({formState});\n       this.getExisting();\n+        // this.setState({searchContext: this.props.cohortContext});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11700cc0303cce9e45d6bde897d23f2251fcab69"}, "originalPosition": 112}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTY2MzEwMQ==", "bodyText": "Done", "url": "https://github.com/all-of-us/workbench/pull/3867#discussion_r469663101", "createdAt": "2020-08-13T02:39:57Z", "author": {"login": "NehaBroad"}, "path": "ui/src/app/cohort-search/modifier-page/modifier-page.component.tsx", "diffHunk": "@@ -309,20 +287,21 @@ export const ModifierPage = withCurrentWorkspace()(\n       }\n       this.setState({formState});\n       this.getExisting();\n+        // this.setState({searchContext: this.props.cohortContext});", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE0ODM2MA=="}, "originalCommit": {"oid": "11700cc0303cce9e45d6bde897d23f2251fcab69"}, "originalPosition": 112}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNTIzMDAzOnYy", "diffSide": "RIGHT", "path": "ui/src/app/cohort-search/attributes-page-v2/attributes-page-v2.component.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMTozMzoxNVrOG-gkUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMTozMzoxNVrOG-gkUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE5ODQ4MQ==", "bodyText": "Nice reusable component", "url": "https://github.com/all-of-us/workbench/pull/3867#discussion_r468198481", "createdAt": "2020-08-10T21:33:15Z", "author": {"login": "dolbeew"}, "path": "ui/src/app/cohort-search/attributes-page-v2/attributes-page-v2.component.tsx", "diffHunk": "@@ -126,6 +126,24 @@ const styles = reactStyles({\n   },\n });\n \n+export const CalculateFooter = (props) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11700cc0303cce9e45d6bde897d23f2251fcab69"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyODI2MDYyOnYy", "diffSide": "RIGHT", "path": "ui/src/app/cohort-search/selection-list/selection-list.component.tsx", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxNToxODo0OVrOG-842w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMzoyODo1M1rOG_hUJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY2MjQ5MQ==", "bodyText": "I think we can simplify the conditions here, something like:\n{!showModifiersSlide\n  ? criteria && <React.Fragment>\n      // selection list template\n    </React.Fragment>\n    <FlexRowWrap>\n      // save & back buttons\n    </FlexRowWrap>\n  : <ModifierPage />\n}", "url": "https://github.com/all-of-us/workbench/pull/3867#discussion_r468662491", "createdAt": "2020-08-11T15:18:49Z", "author": {"login": "dolbeew"}, "path": "ui/src/app/cohort-search/selection-list/selection-list.component.tsx", "diffHunk": "@@ -335,22 +356,42 @@ export const SelectionList = withCurrentCohortCriteria()(class extends React.Com\n     </React.Fragment> ;\n   }\n \n+  applyModifier(modifiers) {\n+    if (modifiers) {\n+      const modifierButtonText = '(' + modifiers.length + ')  MODIFIERS APPLIED';\n+      this.setState({showModifiersSlide: false, modifierButtonText: modifierButtonText});\n+    } else {\n+      this.setState({showModifiersSlide: false, modifierButtonText: 'APPLY MODIFIERS'});\n+    }\n+\n+  }\n+\n   render() {\n     const {back, criteria} = this.props;\n+    const {modifierButtonText, showModifiersSlide} = this.state;\n     return <div>\n-      <div style={{paddingTop: '0.5rem'}}>\n-        {criteria && <div style={styles.selectionContainer}>\n+        {!showModifiersSlide && criteria &&  <React.Fragment>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11700cc0303cce9e45d6bde897d23f2251fcab69"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY5ODgxOQ==", "bodyText": "Also, do we need to include criteria in the condition? I haven't tested this, but seems like it would always be true if we're already in the selection-list.", "url": "https://github.com/all-of-us/workbench/pull/3867#discussion_r468698819", "createdAt": "2020-08-11T16:11:24Z", "author": {"login": "dolbeew"}, "path": "ui/src/app/cohort-search/selection-list/selection-list.component.tsx", "diffHunk": "@@ -335,22 +356,42 @@ export const SelectionList = withCurrentCohortCriteria()(class extends React.Com\n     </React.Fragment> ;\n   }\n \n+  applyModifier(modifiers) {\n+    if (modifiers) {\n+      const modifierButtonText = '(' + modifiers.length + ')  MODIFIERS APPLIED';\n+      this.setState({showModifiersSlide: false, modifierButtonText: modifierButtonText});\n+    } else {\n+      this.setState({showModifiersSlide: false, modifierButtonText: 'APPLY MODIFIERS'});\n+    }\n+\n+  }\n+\n   render() {\n     const {back, criteria} = this.props;\n+    const {modifierButtonText, showModifiersSlide} = this.state;\n     return <div>\n-      <div style={{paddingTop: '0.5rem'}}>\n-        {criteria && <div style={styles.selectionContainer}>\n+        {!showModifiersSlide && criteria &&  <React.Fragment>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY2MjQ5MQ=="}, "originalCommit": {"oid": "11700cc0303cce9e45d6bde897d23f2251fcab69"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTI1OTMwMw==", "bodyText": "Done.", "url": "https://github.com/all-of-us/workbench/pull/3867#discussion_r469259303", "createdAt": "2020-08-12T13:28:53Z", "author": {"login": "NehaBroad"}, "path": "ui/src/app/cohort-search/selection-list/selection-list.component.tsx", "diffHunk": "@@ -335,22 +356,42 @@ export const SelectionList = withCurrentCohortCriteria()(class extends React.Com\n     </React.Fragment> ;\n   }\n \n+  applyModifier(modifiers) {\n+    if (modifiers) {\n+      const modifierButtonText = '(' + modifiers.length + ')  MODIFIERS APPLIED';\n+      this.setState({showModifiersSlide: false, modifierButtonText: modifierButtonText});\n+    } else {\n+      this.setState({showModifiersSlide: false, modifierButtonText: 'APPLY MODIFIERS'});\n+    }\n+\n+  }\n+\n   render() {\n     const {back, criteria} = this.props;\n+    const {modifierButtonText, showModifiersSlide} = this.state;\n     return <div>\n-      <div style={{paddingTop: '0.5rem'}}>\n-        {criteria && <div style={styles.selectionContainer}>\n+        {!showModifiersSlide && criteria &&  <React.Fragment>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY2MjQ5MQ=="}, "originalCommit": {"oid": "11700cc0303cce9e45d6bde897d23f2251fcab69"}, "originalPosition": 94}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2516, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}