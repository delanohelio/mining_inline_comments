{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwNDQyNzA3", "number": 3898, "title": "[RW-5358][risk=no] Tool to update sex at birth in existing reviews.", "bodyText": "UpdateReviewDemographics is a tool that will backfill sex at birth in existing reviews across each env.\nTo Run: ./project.rb update-review-demographics --project all-of-us-workbench-test --dry-run true\n\nproject the project to run the updates\ndry-run (optional) if true will output what data will get updated", "createdAt": "2020-08-19T20:37:57Z", "url": "https://github.com/all-of-us/workbench/pull/3898", "merged": true, "mergeCommit": {"oid": "48e8259d3f06beac641babb94b3711c62247b7a1"}, "closed": true, "closedAt": "2020-08-24T18:14:53Z", "author": {"login": "freemabd"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAh5ekgBqjM2NzI1NDY4MTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCFoVgAFqTQ3MzY4NjExMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc961c46db61bd63b500c6f3d07a8686febcd449", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/fc961c46db61bd63b500c6f3d07a8686febcd449", "committedDate": "2020-08-19T20:37:21Z", "message": "RW-5358 finished tool for updating reviews."}, "afterCommit": {"oid": "3d592ee9a8d466c84b5af1d16b09b08086af3a78", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/3d592ee9a8d466c84b5af1d16b09b08086af3a78", "committedDate": "2020-08-19T20:46:36Z", "message": "RW-5358 finished tool for updating reviews."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxODQwOTQ5", "url": "https://github.com/all-of-us/workbench/pull/3898#pullrequestreview-471840949", "createdAt": "2020-08-20T17:37:17Z", "commit": {"oid": "3d592ee9a8d466c84b5af1d16b09b08086af3a78"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNzozNzoxN1rOHEMbBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNzozNzoxN1rOHEMbBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE1OTg3OA==", "bodyText": "nit: bulkUpdateSexAtBirthByParticipantId or bulkUpdateSexAtBirthByParticipantAndCohortReviewId?", "url": "https://github.com/all-of-us/workbench/pull/3898#discussion_r474159878", "createdAt": "2020-08-20T17:37:17Z", "author": {"login": "NehaBroad"}, "path": "api/src/main/java/org/pmiops/workbench/db/dao/ParticipantCohortStatusDao.java", "diffHunk": "@@ -33,9 +34,25 @@\n   void bulkCopyByCohortReview(\n       @Param(\"fromCrId\") long fromCohortReviewId, @Param(\"toCrId\") long toCohortReviewId);\n \n+  @Modifying\n+  @Query(\n+      value =\n+          \"UPDATE participant_cohort_status\"\n+              + \" SET sex_at_birth_concept_id = :conceptId\"\n+              + \" WHERE participant_id in (:personIds)\"\n+              + \" AND cohort_review_id = :cohortReviewId\",\n+      nativeQuery = true)\n+  @Transactional\n+  int bulkUpdateSexAtBirthByParticipantId(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d592ee9a8d466c84b5af1d16b09b08086af3a78"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "027f9c0e8a48da505f0b9b0f8d8d75a0d715e496", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/027f9c0e8a48da505f0b9b0f8d8d75a0d715e496", "committedDate": "2020-08-21T16:07:58Z", "message": "RW-5358 adding config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9e8fa8987b9367f432a78cb6c4d3da76c2023b2", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/c9e8fa8987b9367f432a78cb6c4d3da76c2023b2", "committedDate": "2020-08-21T16:07:58Z", "message": "RW-5358 stubbing out"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6d53436511ec67f8806ba743a2b70b823f71386", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/f6d53436511ec67f8806ba743a2b70b823f71386", "committedDate": "2020-08-21T16:07:58Z", "message": "RW-5358 stubbing out"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1af60e391472d8c4ecdf6091180f1c070172d7ab", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/1af60e391472d8c4ecdf6091180f1c070172d7ab", "committedDate": "2020-08-21T16:07:58Z", "message": "RW-5358 adding update code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b07a89de849d3ef9e02717fea9693f5bd31efba", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/4b07a89de849d3ef9e02717fea9693f5bd31efba", "committedDate": "2020-08-21T16:07:58Z", "message": "RW-5358 finished tool for updating reviews."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0424b4274bb003754e5dd3906f84ffd576dbcb08", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/0424b4274bb003754e5dd3906f84ffd576dbcb08", "committedDate": "2020-08-21T16:07:58Z", "message": "RW-5358 finished tool for updating reviews."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d592ee9a8d466c84b5af1d16b09b08086af3a78", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/3d592ee9a8d466c84b5af1d16b09b08086af3a78", "committedDate": "2020-08-19T20:46:36Z", "message": "RW-5358 finished tool for updating reviews."}, "afterCommit": {"oid": "0424b4274bb003754e5dd3906f84ffd576dbcb08", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/0424b4274bb003754e5dd3906f84ffd576dbcb08", "committedDate": "2020-08-21T16:07:58Z", "message": "RW-5358 finished tool for updating reviews."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d065dff48132ffa27d98b0b41e0175af8e80a39", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/3d065dff48132ffa27d98b0b41e0175af8e80a39", "committedDate": "2020-08-21T16:10:48Z", "message": "RW-5358 renamed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNjg2MTEz", "url": "https://github.com/all-of-us/workbench/pull/3898#pullrequestreview-473686113", "createdAt": "2020-08-24T16:58:40Z", "commit": {"oid": "3d065dff48132ffa27d98b0b41e0175af8e80a39"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4295, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}