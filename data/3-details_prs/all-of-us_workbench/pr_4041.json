{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwNjA5NDIy", "number": 4041, "title": "[no ticket][risk=no] Puppeteer Delete workspace", "bodyText": "Clean up test generated data: Delete cloned workspaces in workspace-clone.spec.ts test.\nworkspace-delete.spec.ts is obsolete.", "createdAt": "2020-09-21T23:21:52Z", "url": "https://github.com/all-of-us/workbench/pull/4041", "merged": true, "mergeCommit": {"oid": "93f94c4a890553a68810c161fe3fbbdd6e97f253"}, "closed": true, "closedAt": "2020-09-22T20:49:51Z", "author": {"login": "aweng98"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLL3hQAH2gAyNDkwNjA5NDIyOmZjZmYyMjEyYzI0NzAwZjExOGMzZGRhYWM3NjIyNGNjMDgxZmVlYmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLeUPqAFqTQ5MzgzNTIyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fcff2212c24700f118c3ddaac76224cc081feebe", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/fcff2212c24700f118c3ddaac76224cc081feebe", "committedDate": "2020-09-21T23:20:00Z", "message": "delete workspace test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64cbfc4e8df4b92583043f64a61b4fa29773f407", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/64cbfc4e8df4b92583043f64a61b4fa29773f407", "committedDate": "2020-09-21T23:24:43Z", "message": "rename dismissWorkspaceModal function"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMDQ1NjUx", "url": "https://github.com/all-of-us/workbench/pull/4041#pullrequestreview-493045651", "createdAt": "2020-09-21T23:23:10Z", "commit": {"oid": "fcff2212c24700f118c3ddaac76224cc081feebe"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQyMzoyMzoxMFrOHVluEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQyMzoyMzo1M1rOHVlu8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQwMDE0Nw==", "bodyText": "selectWorkspaceAction moved to workspace-base.", "url": "https://github.com/all-of-us/workbench/pull/4041#discussion_r492400147", "createdAt": "2020-09-21T23:23:10Z", "author": {"login": "aweng98"}, "path": "e2e/app/page/workspace-data-page.ts", "diffHunk": "@@ -45,11 +44,6 @@ export default class WorkspaceDataPage extends WorkspaceBase {\n     ]);\n   }\n \n-  async selectWorkspaceAction(action: EllipsisMenuAction): Promise<void> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcff2212c24700f118c3ddaac76224cc081feebe"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQwMDM3MQ==", "bodyText": "deleteWorkspaceModal moved to workspace-base and renamed to dismissDeleteWorkspaceModal.", "url": "https://github.com/all-of-us/workbench/pull/4041#discussion_r492400371", "createdAt": "2020-09-21T23:23:53Z", "author": {"login": "aweng98"}, "path": "e2e/app/page/workspaces-page.ts", "diffHunk": "@@ -157,18 +156,6 @@ export default class WorkspacesPage extends WorkspaceEditPage {\n     return notebookPage.goAnalysisPage();\n   }\n \n-  /**\n-   * Click DELETE WORKSPACE button in delete workspace Confirmation dialog.\n-   * @return {string} Dialog textContent.\n-   */\n-  async deleteWorkspaceModal(): Promise<string[]> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcff2212c24700f118c3ddaac76224cc081feebe"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1e15435a4e61afdcf24c6cdd4aa404955e1319e", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/f1e15435a4e61afdcf24c6cdd4aa404955e1319e", "committedDate": "2020-09-22T14:01:50Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bcd84cdbb9104370bceebfe6ebbbb68c7569178", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/2bcd84cdbb9104370bceebfe6ebbbb68c7569178", "committedDate": "2020-09-22T15:39:20Z", "message": "SKIP CI update comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzODA2NTk1", "url": "https://github.com/all-of-us/workbench/pull/4041#pullrequestreview-493806595", "createdAt": "2020-09-22T20:07:27Z", "commit": {"oid": "2bcd84cdbb9104370bceebfe6ebbbb68c7569178"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMDowNzoyN1rOHWKeeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMDowNzoyN1rOHWKeeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAwMjM2MA==", "bodyText": "nit: remove console.log before merging", "url": "https://github.com/all-of-us/workbench/pull/4041#discussion_r493002360", "createdAt": "2020-09-22T20:07:27Z", "author": {"login": "gjuggler"}, "path": "e2e/app/page/workspace-base.ts", "diffHunk": "@@ -212,5 +213,37 @@ export default abstract class WorkspaceBase extends AuthenticatedPage {\n     return modalTextContents;\n   }\n \n+  /**\n+   * Select Workspace action dropdown menu option.\n+   * @param {EllipsisMenuAction} menuOption\n+   * @param opts\n+   */\n+  async selectWorkspaceAction(menuOption: EllipsisMenuAction, opts?: { waitForNav: false }): Promise<void> {\n+    const ellipsisMenu = new EllipsisMenu(this.page, './/*[@data-test-id=\"workspace-menu-button\"]');\n+    return ellipsisMenu.clickAction(menuOption, opts);\n+  }\n+\n+  /**\n+   * Delete workspace via Workspace action menu \"Delete\" option.\n+   */\n+  async deleteWorkspace(): Promise<string[]> {\n+    await this.selectWorkspaceAction(EllipsisMenuAction.Delete, { waitForNav: false });\n+    // Handle Delete Confirmation modal\n+    return this.dismissDeleteWorkspaceModal();\n+  }\n+\n+\n+  /**\n+   * Dismss Delete Workspace Confirmation modal by click a button.\n+   * @return {LinkText} clickButtonText Button to click.\n+   */\n+  async dismissDeleteWorkspaceModal(clickButtonText: LinkText = LinkText.DeleteWorkspace): Promise<string[]> {\n+    const modal = new Modal(this.page);\n+    const contentText = await modal.getTextContent();\n+    await modal.clickButton(clickButtonText, {waitForClose: true});\n+    await waitWhileLoading(this.page);\n+    console.log(`Dismiss Delete Workspace modal by click ${clickButtonText} button`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2bcd84cdbb9104370bceebfe6ebbbb68c7569178"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "689aff700f6d38e0dc40bc7b9be9981513c56e9c", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/689aff700f6d38e0dc40bc7b9be9981513c56e9c", "committedDate": "2020-09-22T20:49:17Z", "message": "PR feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzODM1MjIy", "url": "https://github.com/all-of-us/workbench/pull/4041#pullrequestreview-493835222", "createdAt": "2020-09-22T20:48:59Z", "commit": {"oid": "2bcd84cdbb9104370bceebfe6ebbbb68c7569178"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMDo0ODo1OVrOHWL1mQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMDo0ODo1OVrOHWL1mQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAyNDY2NQ==", "bodyText": "Done", "url": "https://github.com/all-of-us/workbench/pull/4041#discussion_r493024665", "createdAt": "2020-09-22T20:48:59Z", "author": {"login": "aweng98"}, "path": "e2e/app/page/workspace-base.ts", "diffHunk": "@@ -212,5 +213,37 @@ export default abstract class WorkspaceBase extends AuthenticatedPage {\n     return modalTextContents;\n   }\n \n+  /**\n+   * Select Workspace action dropdown menu option.\n+   * @param {EllipsisMenuAction} menuOption\n+   * @param opts\n+   */\n+  async selectWorkspaceAction(menuOption: EllipsisMenuAction, opts?: { waitForNav: false }): Promise<void> {\n+    const ellipsisMenu = new EllipsisMenu(this.page, './/*[@data-test-id=\"workspace-menu-button\"]');\n+    return ellipsisMenu.clickAction(menuOption, opts);\n+  }\n+\n+  /**\n+   * Delete workspace via Workspace action menu \"Delete\" option.\n+   */\n+  async deleteWorkspace(): Promise<string[]> {\n+    await this.selectWorkspaceAction(EllipsisMenuAction.Delete, { waitForNav: false });\n+    // Handle Delete Confirmation modal\n+    return this.dismissDeleteWorkspaceModal();\n+  }\n+\n+\n+  /**\n+   * Dismss Delete Workspace Confirmation modal by click a button.\n+   * @return {LinkText} clickButtonText Button to click.\n+   */\n+  async dismissDeleteWorkspaceModal(clickButtonText: LinkText = LinkText.DeleteWorkspace): Promise<string[]> {\n+    const modal = new Modal(this.page);\n+    const contentText = await modal.getTextContent();\n+    await modal.clickButton(clickButtonText, {waitForClose: true});\n+    await waitWhileLoading(this.page);\n+    console.log(`Dismiss Delete Workspace modal by click ${clickButtonText} button`);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAwMjM2MA=="}, "originalCommit": {"oid": "2bcd84cdbb9104370bceebfe6ebbbb68c7569178"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4074, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}