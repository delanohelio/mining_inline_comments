{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0MzQ5NDg5", "number": 3012, "title": "[RISK=NO][No ticket]Add default value to creation_Time", "bodyText": "This PR will add default values 'Jan 1 1970' TO user column creation_time and last_modified_time.\nIn order for this to reflect on test i will rollback changes for existing 115 as well as remove the entry from databasechangelog in just this case", "createdAt": "2020-01-17T22:50:30Z", "url": "https://github.com/all-of-us/workbench/pull/3012", "merged": true, "mergeCommit": {"oid": "8b6666a3b094aafac587daa3db5dc709565ee77b"}, "closed": true, "closedAt": "2020-01-18T16:31:19Z", "author": {"login": "NehaBroad"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb7WVmfAH2gAyMzY0MzQ5NDg5OjY0MDMzZjU5ZDVmYjk4NDA4YTMzNGNhZGRjN2VhNWNmMmYwZGJhYTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb7l6hOAFqTM0NDk1MDc3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "64033f59d5fb98408a334caddc7ea5cf2f0dbaa7", "author": {"user": {"login": "NehaBroad", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/64033f59d5fb98408a334caddc7ea5cf2f0dbaa7", "committedDate": "2020-01-17T22:17:58Z", "message": "Add default value to creation_Time"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0ODg2NTQx", "url": "https://github.com/all-of-us/workbench/pull/3012#pullrequestreview-344886541", "createdAt": "2020-01-17T23:02:50Z", "commit": {"oid": "64033f59d5fb98408a334caddc7ea5cf2f0dbaa7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMzowMjo1MFrOFfHZ_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMzowMjo1MFrOFfHZ_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODE3MTUxOA==", "bodyText": "Has this already been run? If so, do we know it's safe to change it? We don't want to lose the ability to keep all the environments in lockstep.\nIn general, if I'm looking at the history of a liquibase xml file, I only ever expect to see changes when a new step is added, and the individual step xmls should only have one commit, right?", "url": "https://github.com/all-of-us/workbench/pull/3012#discussion_r368171518", "createdAt": "2020-01-17T23:02:50Z", "author": {"login": "jaycarlton"}, "path": "api/db/changelog/db.changelog-115-addColumn-user-create-modified.xml", "diffHunk": "@@ -6,18 +6,12 @@\n                     http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd\">\n   <changeSet author=\"nsaxena\" id=\"db.changelog-115-addColumn-user-create-modified\">\n     <addColumn tableName=\"user\">\n-      <column name=\"creation_time\" type=\"datetime\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64033f59d5fb98408a334caddc7ea5cf2f0dbaa7"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7630753f3ab897c2f84f8b8bd3d2acca99fe005", "author": {"user": {"login": "NehaBroad", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/d7630753f3ab897c2f84f8b8bd3d2acca99fe005", "committedDate": "2020-01-17T23:02:50Z", "message": "Conflict resolve"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0OTE4Njcw", "url": "https://github.com/all-of-us/workbench/pull/3012#pullrequestreview-344918670", "createdAt": "2020-01-18T02:11:14Z", "commit": {"oid": "d7630753f3ab897c2f84f8b8bd3d2acca99fe005"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQwMjoxMToxNFrOFfJFtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQwMjoxMToxNFrOFfJFtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODE5OTA5NQ==", "bodyText": "I believe the tag we want to use is valueDate https://www.liquibase.org/documentation/column.html\nThat will set the column value when the migration is run. I believe defaultValueDate will set the default value in MySQL which we shouldn't need since we should be setting it to the current timestamp on object creation (in our Java code).", "url": "https://github.com/all-of-us/workbench/pull/3012#discussion_r368199095", "createdAt": "2020-01-18T02:11:14Z", "author": {"login": "ericsong"}, "path": "api/db/changelog/db.changelog-115-addColumn-user-create-modified.xml", "diffHunk": "@@ -6,15 +6,12 @@\n                     http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd\">\n   <changeSet author=\"nsaxena\" id=\"db.changelog-115-addColumn-user-create-modified\">\n     <addColumn tableName=\"user\">\n-      <column name=\"creation_time\" type=\"datetime\">\n-        <constraints nullable=\"true\" />\n+      <column name=\"creation_time\" type=\"datetime\" defaultValueDate=\"1970-01-01 00:00:00\">\n+        <constraints nullable=\"false\" />\n       </column>\n-      <column name=\"last_modified_time\" type=\"datetime\" defaultValueDate=\"CURRENT_TIMESTAMP\">\n-        <constraints nullable=\"false\"/>\n+      <column name=\"last_modified_time\" type=\"datetime\" defaultValueDate=\"1970-01-01 00:00:00\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7630753f3ab897c2f84f8b8bd3d2acca99fe005"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7c7ed09877ad85ea2c45c682008616edf3f351f", "author": {"user": {"login": "NehaBroad", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/f7c7ed09877ad85ea2c45c682008616edf3f351f", "committedDate": "2020-01-18T16:12:43Z", "message": "change changesheet name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0OTUwNzc0", "url": "https://github.com/all-of-us/workbench/pull/3012#pullrequestreview-344950774", "createdAt": "2020-01-18T16:26:52Z", "commit": {"oid": "f7c7ed09877ad85ea2c45c682008616edf3f351f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3686, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}