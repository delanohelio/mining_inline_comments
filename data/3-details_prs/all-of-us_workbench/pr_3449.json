{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3MzI5MjM3", "number": 3449, "title": "[RW-4722][Risk=no] Remove default selections from workspace-edit page", "bodyText": "Description:\nThis changes the default selection of review requested and specific populations from no to nothing. It also adds error messaging when those aren't selected. From there, I cleaned up a bunch of stuff on the page. (screenshots where applicable)\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-04-22T14:30:23Z", "url": "https://github.com/all-of-us/workbench/pull/3449", "merged": true, "mergeCommit": {"oid": "2e0db75c4a334bf1d3305ae3a4cbc4f8af0dc9ee"}, "closed": true, "closedAt": "2020-04-22T20:05:04Z", "author": {"login": "s-rubenstein"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaJLZ9gH2gAyNDA3MzI5MjM3OjVmZWNhNzQzMTU0ZTZkNjhjMjViMWMxMzFmNjQ0N2ExNDQ2MjE5NTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaNB6VAH2gAyNDA3MzI5MjM3OmQ1NzIxMjkzYTM2OTc1YzY5OTExYTg5ZjY2MDg4NTM1MzJmMmY4NmM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5feca743154e6d68c25b1c131f6447a144621950", "author": {"user": {"login": "s-rubenstein", "name": "Sky Rubenstein"}}, "url": "https://github.com/all-of-us/workbench/commit/5feca743154e6d68c25b1c131f6447a144621950", "committedDate": "2020-04-22T14:29:43Z", "message": "[RW-4722][Risk=no] Remove default selections from workspace-edit page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fa17d0320799f71a519d695a95969e2e54b8e18", "author": {"user": {"login": "s-rubenstein", "name": "Sky Rubenstein"}}, "url": "https://github.com/all-of-us/workbench/commit/1fa17d0320799f71a519d695a95969e2e54b8e18", "committedDate": "2020-04-22T15:18:01Z", "message": "Fix tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4MzE0OTU0", "url": "https://github.com/all-of-us/workbench/pull/3449#pullrequestreview-398314954", "createdAt": "2020-04-22T15:33:02Z", "commit": {"oid": "1fa17d0320799f71a519d695a95969e2e54b8e18"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNTozMzowMlrOGJ82jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNTozNTowOFrOGJ89YA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA4NzM3NQ==", "bodyText": "There was weird spacing here, because it was including all the whitespace at the start of each line. This fixes that.", "url": "https://github.com/all-of-us/workbench/pull/3449#discussion_r413087375", "createdAt": "2020-04-22T15:33:02Z", "author": {"login": "s-rubenstein"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -504,9 +504,8 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n       if (rp.label === 'Other') {\n         children = <TextArea value={this.state.workspace.researchPurpose.otherDisseminateResearchFindings}\n                              onChange={v => this.updateOtherDisseminateResearch(v)}\n-                             placeholder='Specify the name of the forum (journal, scientific\n-                             conference, blog etc.) through which you will disseminate your\n-                             findings, if available.'\n+                             placeholder={'Specify the name of the forum (journal, scientific conference, blog etc.)' +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fa17d0320799f71a519d695a95969e2e54b8e18"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA4ODA0OQ==", "bodyText": "I noticed previously that this error would show up if other wasn't selected, if isSpecificPopulationValid was false (e.g., nothing was yet selected). This fixes that.", "url": "https://github.com/all-of-us/workbench/pull/3449#discussion_r413088049", "createdAt": "2020-04-22T15:33:49Z", "author": {"login": "s-rubenstein"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -604,9 +603,12 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n \n     get isOtherSpecificPopulationValid() {\n       const researchPurpose = this.state.workspace.researchPurpose;\n-      return this.isSpecificPopulationValid && (\n-          !fp.includes(SpecificPopulationEnum.OTHER, researchPurpose.populationDetails) ||\n-          (researchPurpose.otherPopulationDetails && researchPurpose.otherPopulationDetails.length <= 100));\n+      // Avoids null pointers. We don't want to show this error message if nothing is selected yet.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fa17d0320799f71a519d695a95969e2e54b8e18"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA4ODY5NQ==", "bodyText": "We had inconsistent numbering here, so I removed the number symbols where it wasn't consistent.", "url": "https://github.com/all-of-us/workbench/pull/3449#discussion_r413088695", "createdAt": "2020-04-22T15:34:36Z", "author": {"login": "s-rubenstein"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -1173,21 +1181,23 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n                   You must select a billing account</div>}\n                 {errors.primaryPurpose && <div> You must choose at least one primary research\n                   purpose (Question 1)</div>}\n+                {errors.diseaseOfFocus && <div> You must specify a disease of focus and it should be at most 80 characters</div>}\n                 {errors.otherPrimaryPurpose && <div> Other primary purpose should be of at most 500 characters</div>}\n                 {errors.anticipatedFindings && <div> Answer for <i>What are the anticipated findings\n-                  from the study? (Question # 2.1)</i> cannot be empty</div>}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fa17d0320799f71a519d695a95969e2e54b8e18"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA4OTEyMA==", "bodyText": "Added (Question 3) and (Question 4) per Karthik's request, to have consistency with labeling there.", "url": "https://github.com/all-of-us/workbench/pull/3449#discussion_r413089120", "createdAt": "2020-04-22T15:35:08Z", "author": {"login": "s-rubenstein"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -1173,21 +1181,23 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n                   You must select a billing account</div>}\n                 {errors.primaryPurpose && <div> You must choose at least one primary research\n                   purpose (Question 1)</div>}\n+                {errors.diseaseOfFocus && <div> You must specify a disease of focus and it should be at most 80 characters</div>}\n                 {errors.otherPrimaryPurpose && <div> Other primary purpose should be of at most 500 characters</div>}\n                 {errors.anticipatedFindings && <div> Answer for <i>What are the anticipated findings\n-                  from the study? (Question # 2.1)</i> cannot be empty</div>}\n+                  from the study? (Question 2.1)</i> cannot be empty</div>}\n                 {errors.scientificApproach && <div> Answer for <i>What are the scientific\n-                  approaches you plan to use for your study (Question # 2.2)</i> cannot be empty</div>}\n+                  approaches you plan to use for your study (Question 2.2)</i> cannot be empty</div>}\n                 {errors.intendedStudy && <div> Answer for<i>What are the specific scientific question(s) you intend to study\n-                  (Question # 2.3)</i> cannot be empty</div>}\n-                {errors.specificPopulation && <div> You must specify a population of study</div>}\n-                {errors.diseaseOfFocus && <div> You must specify a disease of focus and it should be at most 80 characters</div>}\n-                {errors.researchOutcoming && <div> You must specify the outcome of the research</div>}\n-                {errors.disseminate && <div> You must specific how you plan to disseminate your research findings</div>}\n+                  (Question 2.3)</i> cannot be empty</div>}\n+                {errors.disseminate && <div> You must specific how you plan to disseminate your research findings (Question 3)</div>}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fa17d0320799f71a519d695a95969e2e54b8e18"}, "originalPosition": 119}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8866d0606acfb8d203c348264cbe90aaeec810b", "author": {"user": {"login": "s-rubenstein", "name": "Sky Rubenstein"}}, "url": "https://github.com/all-of-us/workbench/commit/c8866d0606acfb8d203c348264cbe90aaeec810b", "committedDate": "2020-04-22T15:36:40Z", "message": "Fix state variables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc1d0d77cc40d5259d0bc06281270debe23f91c0", "author": {"user": {"login": "s-rubenstein", "name": "Sky Rubenstein"}}, "url": "https://github.com/all-of-us/workbench/commit/cc1d0d77cc40d5259d0bc06281270debe23f91c0", "committedDate": "2020-04-22T15:56:13Z", "message": "Update error messages"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NDE0ODgz", "url": "https://github.com/all-of-us/workbench/pull/3449#pullrequestreview-398414883", "createdAt": "2020-04-22T17:27:16Z", "commit": {"oid": "cc1d0d77cc40d5259d0bc06281270debe23f91c0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNzoyNzoxNlrOGKCNaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNzoyNzoxNlrOGKCNaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE3NTE0NQ==", "bodyText": "can we keep this and change true to false? just to be sure that neither yes nor NO is selected by default?", "url": "https://github.com/all-of-us/workbench/pull/3449#discussion_r413175145", "createdAt": "2020-04-22T17:27:16Z", "author": {"login": "NehaBroad"}, "path": "ui/src/app/pages/workspace/workspace-edit.spec.tsx", "diffHunk": "@@ -78,9 +78,6 @@ describe('WorkspaceEdit', () => {\n     // Ensure the 'drug development' checkbox is not checked when creating.\n     expect(wrapper.find('[data-test-id=\"researchPurpose-checkbox\"]').first().prop('checked'))\n       .toEqual(false);\n-\n-    expect(wrapper.find('[data-test-id=\"specific-population-no\"]').first().prop('checked'))\n-      .toEqual(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc1d0d77cc40d5259d0bc06281270debe23f91c0"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NDE2NTc5", "url": "https://github.com/all-of-us/workbench/pull/3449#pullrequestreview-398416579", "createdAt": "2020-04-22T17:29:17Z", "commit": {"oid": "cc1d0d77cc40d5259d0bc06281270debe23f91c0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5721293a36975c69911a89f6608853532f2f86c", "author": {"user": {"login": "s-rubenstein", "name": "Sky Rubenstein"}}, "url": "https://github.com/all-of-us/workbench/commit/d5721293a36975c69911a89f6608853532f2f86c", "committedDate": "2020-04-22T18:58:58Z", "message": "Add back check"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3224, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}