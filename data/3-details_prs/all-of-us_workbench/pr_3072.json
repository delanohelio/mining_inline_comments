{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5ODMxNDg5", "number": 3072, "title": "[RW-4132][risk=moderate] Integrate with Zendesk for workspace review requests", "bodyText": "Note: this pulls in a new 3p Java library (ZD unofficial client library)\nIntegrates using an unauthenticated Zendesk client via client lib. See Readme.md for details.\nOn create/clone, if review is requested files a Zendesk request\nZendesk request ticket contains both formatted workspace description (similar to edit/about pages) as well as a raw JSON view of the research purpose, in the event that we fail to update the ticket formatter when making changes to the workspace model.\n\nManually tested this in the sandbox env.\nFuture work:\n\nThe Zendesk comment API supports HTML comments. A future version could integrate an HTML templating library to render a more readable view.\nA path for setting up an authenticated client is described in the readme, if we wanted to do subsequent ticket updates later.\n\nSample ticket output:\n[Workspace name]\nv5 Legit Workspace\n\n[Workspace ID]\naou-rw-local1-94faadfb/v5legitworkspace\n\n[Review requester]\nCH Albach (calbach@fake-research-aou.org, null)\n\n[Primary purpose of project]\n- Disease focused research: cancerophobia\n- Genetic Research\n- Drug/Therapeutics Development Research\n- For-Profit Purpose\n- Educational Purpose\n- Other Purpose: QA\n\n[Provide the reason for choosing All of Us data for your investigation]\nI would like to leverage the diversity of the data.\n\n[What are the specific scientific question(s) you intend to study]\nWhether X can affect Y.\n\n[What are your anticipated findings from this study]\nHuge scientific breakthroughs.\n\n[Population area(s) of focus]\nACCESS_TO_CARE, RACE_ETHNICITY, SEX, GEOGRAPHY\n\n[Raw research purpose JSON]\n{\n...\n}", "createdAt": "2020-02-01T01:05:32Z", "url": "https://github.com/all-of-us/workbench/pull/3072", "merged": true, "mergeCommit": {"oid": "62b7aece7f45051e3ea399d8077830da5b8f1de5"}, "closed": true, "closedAt": "2020-02-03T23:12:20Z", "author": {"login": "calbach"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcAulWtgFqTM1MjMzMzM1OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcAy0F3AH2gAyMzY5ODMxNDg5OmFmYzY4MjY3MmJiZTRhOTNiZDhlNzdlZDZmNGI3ODBjY2UyMTQzYzY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMzMzMzU4", "url": "https://github.com/all-of-us/workbench/pull/3072#pullrequestreview-352333358", "createdAt": "2020-02-03T15:20:57Z", "commit": {"oid": "dcee80587012473a25abb7d44bcb64bea89cb2a4"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNToyMDo1N1rOFk1FGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNToyMDo1N1rOFk1FGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDE2MjcxMg==", "bodyText": "Typo here. Seems like it would be difficult to type with one's wings.", "url": "https://github.com/all-of-us/workbench/pull/3072#discussion_r374162712", "createdAt": "2020-02-03T15:20:57Z", "author": {"login": "als364"}, "path": "api/src/test/java/org/pmiops/workbench/zendesk/ZendeskRequestsTest.java", "diffHunk": "@@ -0,0 +1,115 @@\n+package org.pmiops.workbench.zendesk;\n+\n+import static com.google.common.truth.Truth.assertThat;\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import com.google.common.collect.ImmutableList;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.pmiops.workbench.db.model.DbUser;\n+import org.pmiops.workbench.model.ResearchPurpose;\n+import org.pmiops.workbench.model.SpecificPopulationEnum;\n+import org.pmiops.workbench.model.Workspace;\n+\n+public class ZendeskRequestsTest {\n+  private DbUser user;\n+\n+  @Before\n+  public void setUp() {\n+    user = new DbUser();\n+    user.setGivenName(\"Falco\");\n+    user.setFamilyName(\"Lombardi\");\n+    user.setUsername(\"flaco@fake-research-aou.org\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcee80587012473a25abb7d44bcb64bea89cb2a4"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99440e7b0292f736989ec6b11f31b061c1ba002e", "author": {"user": {"login": "calbach", "name": "CH Albach"}}, "url": "https://github.com/all-of-us/workbench/commit/99440e7b0292f736989ec6b11f31b061c1ba002e", "committedDate": "2020-02-03T19:34:01Z", "message": "reduce api-local-test memory limit"}, "afterCommit": {"oid": "200e82a81d94f73b917b3e270d200f4e568a82e8", "author": {"user": {"login": "calbach", "name": "CH Albach"}}, "url": "https://github.com/all-of-us/workbench/commit/200e82a81d94f73b917b3e270d200f4e568a82e8", "committedDate": "2020-02-03T19:09:51Z", "message": "snyk pt3"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "200e82a81d94f73b917b3e270d200f4e568a82e8", "author": {"user": {"login": "calbach", "name": "CH Albach"}}, "url": "https://github.com/all-of-us/workbench/commit/200e82a81d94f73b917b3e270d200f4e568a82e8", "committedDate": "2020-02-03T19:09:51Z", "message": "snyk pt3"}, "afterCommit": {"oid": "7b2e21e8f72d649784f5ae575f9260ff7eb5a2a6", "author": {"user": {"login": "calbach", "name": "CH Albach"}}, "url": "https://github.com/all-of-us/workbench/commit/7b2e21e8f72d649784f5ae575f9260ff7eb5a2a6", "committedDate": "2020-02-03T19:46:05Z", "message": "snyk pt3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cfcd78c0994de197104c9e9c494181fed59c1fb", "author": {"user": {"login": "calbach", "name": "CH Albach"}}, "url": "https://github.com/all-of-us/workbench/commit/4cfcd78c0994de197104c9e9c494181fed59c1fb", "committedDate": "2020-02-03T20:14:19Z", "message": "Integrate with Zendesk for workspace review requests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62915848b17005416683ddac8333a8ca33fe6a11", "author": {"user": {"login": "calbach", "name": "CH Albach"}}, "url": "https://github.com/all-of-us/workbench/commit/62915848b17005416683ddac8333a8ca33fe6a11", "committedDate": "2020-02-03T20:14:19Z", "message": "Test fixes, security fix attempt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1b9b2c9a7c4a9f03fb5eafbfb1bfe8ef96a9d9e", "author": {"user": {"login": "calbach", "name": "CH Albach"}}, "url": "https://github.com/all-of-us/workbench/commit/e1b9b2c9a7c4a9f03fb5eafbfb1bfe8ef96a9d9e", "committedDate": "2020-02-03T20:14:19Z", "message": "Snyk fix 2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c975eee3dcf553b4753ff979786c4658c44cca90", "author": {"user": {"login": "calbach", "name": "CH Albach"}}, "url": "https://github.com/all-of-us/workbench/commit/c975eee3dcf553b4753ff979786c4658c44cca90", "committedDate": "2020-02-03T20:14:19Z", "message": "snyk pt3"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b2e21e8f72d649784f5ae575f9260ff7eb5a2a6", "author": {"user": {"login": "calbach", "name": "CH Albach"}}, "url": "https://github.com/all-of-us/workbench/commit/7b2e21e8f72d649784f5ae575f9260ff7eb5a2a6", "committedDate": "2020-02-03T19:46:05Z", "message": "snyk pt3"}, "afterCommit": {"oid": "c975eee3dcf553b4753ff979786c4658c44cca90", "author": {"user": {"login": "calbach", "name": "CH Albach"}}, "url": "https://github.com/all-of-us/workbench/commit/c975eee3dcf553b4753ff979786c4658c44cca90", "committedDate": "2020-02-03T20:14:19Z", "message": "snyk pt3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afc682672bbe4a93bd8e77ed6f4b780cce2143c6", "author": {"user": {"login": "calbach", "name": "CH Albach"}}, "url": "https://github.com/all-of-us/workbench/commit/afc682672bbe4a93bd8e77ed6f4b780cce2143c6", "committedDate": "2020-02-03T20:18:14Z", "message": "Update the ZD sandbox hosts"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3783, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}