{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0NzM5Njg1", "number": 3554, "title": "[RW-4908][risk=no] More aggressively clear ?workbenchAccessTasks=true", "bodyText": "This PR attempts to clean up some of our user registration navigation endpoints, to clear out the ?workbenchAccessTasks=true query param if it has ever been set. Some users encountered this issue when walking through registration, where the \"access tasks\" dashboard never went away.\nUnfortunately, the way the registration tasks component is loaded & shown as part of the homepage components makes the fix here quite ugly. (I'd attempted to motivate these two components to be entirely different routes during its original implementation, but didn't succeed.)\nWhile walking through the registration flow, I also noticed that DUCC uses browser.back() instead of navigating to the homepage component. I think the latter is more appropriate, and also would have fixed the issue in RW-4908.\nI'm not 100% sure this PR is even worth merging \u2013\u00a0it could provide us defense in depth against RW-4908 regressions, but it may be introducing too much add'l complexity.\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n[NO SORRY] This PR includes appropriate unit tests\n I have run and tested this change locally\n[NO] I have run the E2E tests on ths change against my local UI + API server with yarn test-local", "createdAt": "2020-05-07T14:55:14Z", "url": "https://github.com/all-of-us/workbench/pull/3554", "merged": true, "mergeCommit": {"oid": "3f019c7245781032062f26423d72c6e668adedf1"}, "closed": true, "closedAt": "2020-05-27T13:20:39Z", "author": {"login": "gjuggler"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABce_Fa6gFqTQwNzU5MjM2Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABci6PgIABqjMzNTM1MzE4OTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NTkyMzYy", "url": "https://github.com/all-of-us/workbench/pull/3554#pullrequestreview-407592362", "createdAt": "2020-05-07T15:33:42Z", "commit": {"oid": "5fba84123c8aa758c3449b4a24f55dca0c8aa980"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNTozMzo0MlrOGSEUGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNTozMzo0MlrOGSEUGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU5ODIzMw==", "bodyText": "Does navigate(['']); window.location.reload() work or does that revert the url to include the search again?", "url": "https://github.com/all-of-us/workbench/pull/3554#discussion_r421598233", "createdAt": "2020-05-07T15:33:42Z", "author": {"login": "als364"}, "path": "ui/src/app/pages/homepage/registration-dashboard.tsx", "diffHunk": "@@ -398,7 +398,15 @@ export class RegistrationDashboard extends React.Component<RegistrationDashboard\n              data-test-id='success-message'>\n           You successfully completed all the required steps to access the Researcher Workbench.\n           <Button style={{marginLeft: '0.5rem'}}\n-                  onClick={() => window.location.reload()}>Get Started</Button>\n+                  onClick={() => {\n+                    // Quirk / hack note: the goal here is to send the user to the homepage once they've completed\n+                    // all access modules. Normally we would just navigate(['']) to do this. However, because\n+                    // of the way this dashboard is rendered *within* the homepage component, a call to\n+                    // navigate is not enough to trigger the normal homepage to load. As a workaround, we", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fba84123c8aa758c3449b4a24f55dca0c8aa980"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5MjkwODMw", "url": "https://github.com/all-of-us/workbench/pull/3554#pullrequestreview-409290830", "createdAt": "2020-05-11T15:37:37Z", "commit": {"oid": "5fba84123c8aa758c3449b4a24f55dca0c8aa980"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "185325fb536341a965c3eae34aec4c512120606c", "author": {"user": {"login": "gjuggler", "name": "Greg Jordan"}}, "url": "https://github.com/all-of-us/workbench/commit/185325fb536341a965c3eae34aec4c512120606c", "committedDate": "2020-05-19T20:09:48Z", "message": "User registration completion: redirect to homepage instead of using browser-based hooks."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb5b92baeeeb878bc5395b3d6c40251e2a948cba", "author": {"user": {"login": "gjuggler", "name": "Greg Jordan"}}, "url": "https://github.com/all-of-us/workbench/commit/eb5b92baeeeb878bc5395b3d6c40251e2a948cba", "committedDate": "2020-05-19T20:09:48Z", "message": "Use hacky window.location workarounds because a navigate call doesn't work."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f0a98c8ec7d8f50d86b06d927c86c68b99f4e2f", "author": {"user": {"login": "gjuggler", "name": "Greg Jordan"}}, "url": "https://github.com/all-of-us/workbench/commit/6f0a98c8ec7d8f50d86b06d927c86c68b99f4e2f", "committedDate": "2020-05-19T20:09:49Z", "message": "Fix call to navigate."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5fba84123c8aa758c3449b4a24f55dca0c8aa980", "author": {"user": {"login": "gjuggler", "name": "Greg Jordan"}}, "url": "https://github.com/all-of-us/workbench/commit/5fba84123c8aa758c3449b4a24f55dca0c8aa980", "committedDate": "2020-05-06T18:28:34Z", "message": "Use hacky window.location workarounds because a navigate call doesn't work."}, "afterCommit": {"oid": "6f0a98c8ec7d8f50d86b06d927c86c68b99f4e2f", "author": {"user": {"login": "gjuggler", "name": "Greg Jordan"}}, "url": "https://github.com/all-of-us/workbench/commit/6f0a98c8ec7d8f50d86b06d927c86c68b99f4e2f", "committedDate": "2020-05-19T20:09:49Z", "message": "Fix call to navigate."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4978, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}