{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyNDE0ODc3", "number": 3848, "title": "[RW-5341][risk=low] Optionally include demographics in metrics export", "bodyText": "There is active work to move to a nightly reporting pipeline. For now though, this script is still being run manually to generate metrics. There is a high priority request for this information - however I do not wish to make it part of the standard export, since the nature of the data is sensitive.", "createdAt": "2020-08-03T21:51:08Z", "url": "https://github.com/all-of-us/workbench/pull/3848", "merged": true, "mergeCommit": {"oid": "bef38e527d83688dcd711e967a90e4881824cc51"}, "closed": true, "closedAt": "2020-08-07T00:32:58Z", "author": {"login": "calbach"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7ZLZEgH2gAyNDYyNDE0ODc3OjBhNWRlMTRiNDc4NzJmNmUyM2ZhMThmNmRlZmFlODBkNDM2ODFiMmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8JkBpAH2gAyNDYyNDE0ODc3OjE4MDdmZDlkOGQ5YjE2M2I5ODFlYmU1OTlkZjQzYmUxZDMzODU1MWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0a5de14b47872f6e23fa18f6defae80d43681b2e", "author": {"user": {"login": "calbach", "name": "CH Albach"}}, "url": "https://github.com/all-of-us/workbench/commit/0a5de14b47872f6e23fa18f6defae80d43681b2e", "committedDate": "2020-08-03T21:47:41Z", "message": "Optionally include demographics in metrics export"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMTExNjM5", "url": "https://github.com/all-of-us/workbench/pull/3848#pullrequestreview-462111639", "createdAt": "2020-08-06T00:35:14Z", "commit": {"oid": "0a5de14b47872f6e23fa18f6defae80d43681b2e"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMDozNToxNVrOG8fLKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMDozNjoyMlrOG8fMZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA3ODUwNw==", "bodyText": "nit: the rest of the multi value columns are separated with a newline as well", "url": "https://github.com/all-of-us/workbench/pull/3848#discussion_r466078507", "createdAt": "2020-08-06T00:35:15Z", "author": {"login": "ericsong"}, "path": "api/tools/src/main/java/org/pmiops/workbench/tools/ExportWorkspaceData.java", "diffHunk": "@@ -269,6 +297,39 @@ private WorkspaceExportRow toWorkspaceExportRow(DbUser user) {\n             .map(dateFormat::format)\n             .orElse(\"\"));\n     row.setCreatorRegistrationState(user.getDataAccessLevelEnum().toString());\n+    row.setDegrees(\n+        Optional.ofNullable(user.getDegreesEnum()).orElse(ImmutableList.of()).stream()\n+            .map(Degree::toString)\n+            .collect(Collectors.joining(\",\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a5de14b47872f6e23fa18f6defae80d43681b2e"}, "originalPosition": 154}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA3ODgyMQ==", "bodyText": "nit: i think you can just move this object into the conditional and drop the null check", "url": "https://github.com/all-of-us/workbench/pull/3848#discussion_r466078821", "createdAt": "2020-08-06T00:36:22Z", "author": {"login": "ericsong"}, "path": "api/tools/src/main/java/org/pmiops/workbench/tools/ExportWorkspaceData.java", "diffHunk": "@@ -269,6 +297,39 @@ private WorkspaceExportRow toWorkspaceExportRow(DbUser user) {\n             .map(dateFormat::format)\n             .orElse(\"\"));\n     row.setCreatorRegistrationState(user.getDataAccessLevelEnum().toString());\n+    row.setDegrees(\n+        Optional.ofNullable(user.getDegreesEnum()).orElse(ImmutableList.of()).stream()\n+            .map(Degree::toString)\n+            .collect(Collectors.joining(\",\")));\n+    DbDemographicSurvey demo = user.getDemographicSurvey();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a5de14b47872f6e23fa18f6defae80d43681b2e"}, "originalPosition": 155}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1807fd9d8d9b163b981ebe599df43be1d338551f", "author": {"user": {"login": "calbach", "name": "CH Albach"}}, "url": "https://github.com/all-of-us/workbench/commit/1807fd9d8d9b163b981ebe599df43be1d338551f", "committedDate": "2020-08-06T06:10:02Z", "message": "newlines"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4529, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}