{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0MTE5NTI5", "number": 3924, "title": "[risk=no][RW-4362] Remove classes and fields relating to the pre-verification institutional affiliation", "bodyText": "Description:\n\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally\n I have run the E2E tests on ths change against my local UI + API server with yarn test:local\n If this includes a UI change, I have taken screen recordings or screenshots of the new behavior and notified the PO and UX designer\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-08-26T19:51:50Z", "url": "https://github.com/all-of-us/workbench/pull/3924", "merged": true, "mergeCommit": {"oid": "6a17de75f343e0d74d40e275f0faecad76ea8613"}, "closed": true, "closedAt": "2020-08-27T18:58:08Z", "author": {"login": "jmthibault79"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCxLiXAH2gAyNDc0MTE5NTI5OmRmNmI5MjkyNDdkZjdiNTFlOTU3OTY0YjdkZjA5OWU2ZmUwNjFiNzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDDXN8gFqTQ3NjkwOTUwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "df6b929247df7b51e957964b7df099e6fe061b75", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/df6b929247df7b51e957964b7df099e6fe061b75", "committedDate": "2020-08-26T19:43:02Z", "message": "Remove old-style inst-affile references from ProfileTargetProperty and ProfileAuditorTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f63b4fa4e6d8f9edf8311aa8ee567accdb35cc2a", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/f63b4fa4e6d8f9edf8311aa8ee567accdb35cc2a", "committedDate": "2020-08-26T19:43:25Z", "message": "rm deprecated institutional-affiliation structures"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "631958188442540493202b79ba4cef45088da9a6", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/631958188442540493202b79ba4cef45088da9a6", "committedDate": "2020-08-26T19:43:26Z", "message": "rm DbInstitutionalAffiliation and InstitutionalAffiliationMapper"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac599b3ba2024f9c707b5a51a1100a19dc709a87", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/ac599b3ba2024f9c707b5a51a1100a19dc709a87", "committedDate": "2020-08-26T19:43:26Z", "message": "rm missing fields from DbStorageEnums and DemographicSurveyEnum"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "260d4ccfb79469bef6b032cf6a0ad08b93144404", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/260d4ccfb79469bef6b032cf6a0ad08b93144404", "committedDate": "2020-08-26T19:44:17Z", "message": "update ProfileService to remove old-inst-affil references"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "603b07a5de19b4eb2434ad537b4c928bd94589cc", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/603b07a5de19b4eb2434ad537b4c928bd94589cc", "committedDate": "2020-08-26T19:44:53Z", "message": "rm old-inst tests from ProfileControllerTest and ProfileServiceTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "035730e7bc9c78826c8212f2c6603d187c46fc55", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/035730e7bc9c78826c8212f2c6603d187c46fc55", "committedDate": "2020-08-26T22:06:02Z", "message": "rm old-inst from account-creation-options.tsx"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2MTM5OTAw", "url": "https://github.com/all-of-us/workbench/pull/3924#pullrequestreview-476139900", "createdAt": "2020-08-26T23:46:30Z", "commit": {"oid": "035730e7bc9c78826c8212f2c6603d187c46fc55"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo0NjozMVrOHHkalw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo0NjozMVrOHHkalw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzY5ODcxMQ==", "bodyText": "@jaycarlton just to confirm: we're free to alter these, right?  nothing depends on these names?", "url": "https://github.com/all-of-us/workbench/pull/3924#discussion_r477698711", "createdAt": "2020-08-26T23:46:31Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/actionaudit/targetproperties/ProfileTargetProperty.kt", "diffHunk": "@@ -17,8 +17,7 @@ constructor(override val propertyName: String, override val extractor: (Profile)\n     DISABLED(\"disabled\", { it.disabled?.toString() }),\n     ABOUT_YOU(\"about_you\", Profile::getAboutYou),\n     AREA_OF_RESEARCH(\"area_of_research\", Profile::getAreaOfResearch),\n-    INSTITUTIONAL_AFFILIATIONS(\"institutional_affiliations\",\n-            { it.institutionalAffiliations?.joinToString(\", \") }),\n+    AFFILIATION(\"affiliation\", { it.verifiedInstitutionalAffiliation?.toString() }),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "035730e7bc9c78826c8212f2c6603d187c46fc55"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2MTQxMTcy", "url": "https://github.com/all-of-us/workbench/pull/3924#pullrequestreview-476141172", "createdAt": "2020-08-26T23:47:07Z", "commit": {"oid": "035730e7bc9c78826c8212f2c6603d187c46fc55"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo0NzowN1rOHHkeWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo0NzowN1rOHHkeWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzY5OTY3Mg==", "bodyText": "Waiting at least one release cycle before deleting this table", "url": "https://github.com/all-of-us/workbench/pull/3924#discussion_r477699672", "createdAt": "2020-08-26T23:47:07Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/db/model/DbInstitutionalAffiliation.java", "diffHunk": "@@ -1,103 +0,0 @@\n-package org.pmiops.workbench.db.model;\n-\n-import javax.persistence.Column;\n-import javax.persistence.Entity;\n-import javax.persistence.GeneratedValue;\n-import javax.persistence.GenerationType;\n-import javax.persistence.Id;\n-import javax.persistence.JoinColumn;\n-import javax.persistence.ManyToOne;\n-import javax.persistence.Table;\n-import javax.persistence.Transient;\n-import org.pmiops.workbench.model.NonAcademicAffiliation;\n-\n-// Deprecated because it refers to old-style Institutional Affiliations, to be deleted in RW-4362\n-// The new-style equivalent is DbVerifiedInstitutionalAffiliation\n-@Deprecated\n-@Entity\n-@Table(name = \"institutional_affiliation\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "035730e7bc9c78826c8212f2c6603d187c46fc55"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2MTQ0MDM5", "url": "https://github.com/all-of-us/workbench/pull/3924#pullrequestreview-476144039", "createdAt": "2020-08-26T23:48:33Z", "commit": {"oid": "035730e7bc9c78826c8212f2c6603d187c46fc55"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo0ODozM1rOHHkmrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo0ODozM1rOHHkmrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzcwMTgwNw==", "bodyText": "Surprised to see this here - I thought we collected all of these in DbStorageEnums", "url": "https://github.com/all-of-us/workbench/pull/3924#discussion_r477701807", "createdAt": "2020-08-26T23:48:33Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/db/model/DemographicSurveyEnum.java", "diffHunk": "@@ -77,35 +74,6 @@\n           .put(Disability.FALSE, (short) 2)\n           .build();\n \n-  private static final BiMap<IndustryRole, Short> CLIENT_TO_STORAGE_INDUSTRY_ROLE =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "035730e7bc9c78826c8212f2c6603d187c46fc55"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2MTQ3MTg5", "url": "https://github.com/all-of-us/workbench/pull/3924#pullrequestreview-476147189", "createdAt": "2020-08-26T23:50:08Z", "commit": {"oid": "035730e7bc9c78826c8212f2c6603d187c46fc55"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo1MDowOFrOHHkwGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo1MDowOFrOHHkwGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzcwNDIxNw==", "bodyText": "none of these are applicable to the Verified version", "url": "https://github.com/all-of-us/workbench/pull/3924#discussion_r477704217", "createdAt": "2020-08-26T23:50:08Z", "author": {"login": "jmthibault79"}, "path": "api/src/test/java/org/pmiops/workbench/api/ProfileControllerTest.java", "diffHunk": "@@ -582,104 +579,6 @@ public void testMe_userBeforeNotLoggedInSuccess() {\n         false);\n   }\n \n-  @Deprecated // to be removed in RW-4362", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "035730e7bc9c78826c8212f2c6603d187c46fc55"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2MTQ5Mjc0", "url": "https://github.com/all-of-us/workbench/pull/3924#pullrequestreview-476149274", "createdAt": "2020-08-26T23:51:09Z", "commit": {"oid": "035730e7bc9c78826c8212f2c6603d187c46fc55"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo1MTowOVrOHHk2ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo1MTowOVrOHHk2ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzcwNTg2Ng==", "bodyText": "components referencing these were removed on a previous sweep", "url": "https://github.com/all-of-us/workbench/pull/3924#discussion_r477705866", "createdAt": "2020-08-26T23:51:09Z", "author": {"login": "jmthibault79"}, "path": "ui/src/app/pages/login/account-creation/account-creation-options.tsx", "diffHunk": "@@ -28,43 +24,6 @@ export const AccountCreationOptions = {\n     {label: 'B.S.', value: Degree.BS},\n     {label: 'B.S.N.', value: Degree.BSN},\n   ],\n-  // BEGIN roles and affiliations for old (pre-verification) institutional affiliation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "035730e7bc9c78826c8212f2c6603d187c46fc55"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0b3c92292d0c272a88a4f44a199eceb8d9ba447", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/c0b3c92292d0c272a88a4f44a199eceb8d9ba447", "committedDate": "2020-08-27T14:51:48Z", "message": "restore old INSTITUTIONAL_AFFILIATIONS and deprecate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2OTA5NTA1", "url": "https://github.com/all-of-us/workbench/pull/3924#pullrequestreview-476909505", "createdAt": "2020-08-27T16:54:05Z", "commit": {"oid": "c0b3c92292d0c272a88a4f44a199eceb8d9ba447"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4360, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}