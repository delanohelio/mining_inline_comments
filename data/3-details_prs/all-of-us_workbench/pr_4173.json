{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0MzE2Njk0", "number": 4173, "title": "[RW-5753][risk=no] Address flaky Puppeteer Cohort tests", "bodyText": "Failure occurred when waiting for calculated Group or Total Count took longer than 10 seconds. Fix issue by Increase timeout to 60 seconds.", "createdAt": "2020-10-15T19:07:59Z", "url": "https://github.com/all-of-us/workbench/pull/4173", "merged": true, "mergeCommit": {"oid": "75514f92fcc5bed3a697babf75ec87bde1568bb2"}, "closed": true, "closedAt": "2020-10-16T15:15:26Z", "author": {"login": "aweng98"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdS2xp_gBqjM4ODMxOTExOTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTHihFABqjM4ODY3ODQ1NDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "793e046ce753df74537abee5f3e5c99527a649fb", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/793e046ce753df74537abee5f3e5c99527a649fb", "committedDate": "2020-10-15T18:54:33Z", "message": "bigger timeout waiting for cohort count"}, "afterCommit": {"oid": "4d81d6c3f419a6065b3252c30c81593863cacc0a", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/4d81d6c3f419a6065b3252c30c81593863cacc0a", "committedDate": "2020-10-15T19:16:02Z", "message": "bigger timeout waiting for cohort count"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNDc4MjI1", "url": "https://github.com/all-of-us/workbench/pull/4173#pullrequestreview-510478225", "createdAt": "2020-10-16T13:37:53Z", "commit": {"oid": "4d81d6c3f419a6065b3252c30c81593863cacc0a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzozNzo1M1rOHi-InA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzozNzo1M1rOHi-InA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQzMTY0NA==", "bodyText": "Question: Why was waitForText removed?", "url": "https://github.com/all-of-us/workbench/pull/4173#discussion_r506431644", "createdAt": "2020-10-16T13:37:53Z", "author": {"login": "NehaBroad"}, "path": "e2e/tests/cohorts/cohorts-create.spec.ts", "diffHunk": "@@ -46,14 +46,13 @@ describe('User can create new Cohorts', () => {\n     const group1Count = await group1.includePhysicalMeasurement(PhysicalMeasurementsCriteria.BMI, 30);\n \n     // Checking Group 1 Count. should match Group 1 participants count.\n-    await waitForText(page, group1Count, {xpath: group1.getGroupCountXpath()});\n-    const group1CountInt = Number(group1Count.replace(/,/g, ''));\n+    const group1CountInt = Number((await group1.getGroupCount()).replace(/,/g, ''));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d81d6c3f419a6065b3252c30c81593863cacc0a"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNDc5Nzc3", "url": "https://github.com/all-of-us/workbench/pull/4173#pullrequestreview-510479777", "createdAt": "2020-10-16T13:39:29Z", "commit": {"oid": "4d81d6c3f419a6065b3252c30c81593863cacc0a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzozOToyOVrOHi-OuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzozOToyOVrOHi-OuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQzMzIwOA==", "bodyText": "Since timeOut is an optional argument should there be a check to see if it exist before using it.", "url": "https://github.com/all-of-us/workbench/pull/4173#discussion_r506433208", "createdAt": "2020-10-16T13:39:29Z", "author": {"login": "NehaBroad"}, "path": "e2e/utils/waits-utils.ts", "diffHunk": "@@ -225,15 +225,16 @@ export async function waitForNumberElements(page: Page,\n  */\n export async function waitForText(page: Page,\n                                   textSubstr: string,\n-                                  selector: {xpath?: string, css?: string} = {css: 'body'}): Promise<boolean> {\n+                                  selector: {xpath?: string, css?: string} = {css: 'body'},\n+                                  timeOut?: number): Promise<boolean> {\n   if (selector.css !== undefined) {\n     try {\n          // wait for visible then compare texts\n       await page.waitForSelector(selector.css, {visible: true});\n       const jsHandle = await page.waitForFunction((css, expText) => {\n         const element = document.querySelector(css);\n         return element && element.textContent.includes(expText);\n-      }, {}, selector.css, textSubstr);\n+      }, {timeout: timeOut}, selector.css, textSubstr);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d81d6c3f419a6065b3252c30c81593863cacc0a"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be689961da06d06eef2ece1ec53dde65268a11ba", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/be689961da06d06eef2ece1ec53dde65268a11ba", "committedDate": "2020-10-16T14:22:16Z", "message": "bigger timeout waiting for cohort count"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNTM1NTUy", "url": "https://github.com/all-of-us/workbench/pull/4173#pullrequestreview-510535552", "createdAt": "2020-10-16T14:40:19Z", "commit": {"oid": "4d81d6c3f419a6065b3252c30c81593863cacc0a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8199421a1546d84088abc819fe161f6ec23f3750", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/8199421a1546d84088abc819fe161f6ec23f3750", "committedDate": "2020-10-16T14:48:26Z", "message": "remove empty lines"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4d81d6c3f419a6065b3252c30c81593863cacc0a", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/4d81d6c3f419a6065b3252c30c81593863cacc0a", "committedDate": "2020-10-15T19:16:02Z", "message": "bigger timeout waiting for cohort count"}, "afterCommit": {"oid": "8199421a1546d84088abc819fe161f6ec23f3750", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/8199421a1546d84088abc819fe161f6ec23f3750", "committedDate": "2020-10-16T14:48:26Z", "message": "remove empty lines"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3969, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}