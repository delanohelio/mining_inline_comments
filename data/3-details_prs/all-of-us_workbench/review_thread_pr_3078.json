{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwNDkzMDA4", "number": 3078, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMDowNTowNFrODcwkWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMDowNTowNFrODcwkWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxNDgyNDU3OnYy", "diffSide": "RIGHT", "path": ".circleci/config.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMDowNTowNFrOFk-PtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMDowODoyNVrOFk-VnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMxMjg4NQ==", "bodyText": "SGTM. I wonder if we could write a test suite that allocates more and more memory so we can figure out what the practical limit is.\nIf it's sounding like we need to move to a higher plan, another data point indicating that is queuing for a build after several folks have merged a PR.", "url": "https://github.com/all-of-us/workbench/pull/3078#discussion_r374312885", "createdAt": "2020-02-03T20:05:04Z", "author": {"login": "jaycarlton"}, "path": ".circleci/config.yml", "diffHunk": "@@ -68,7 +68,14 @@ jobs:\n           - MYSQL_PASSWORD=ubuntu\n     working_directory: ~/workbench\n     environment:\n-      JAVA_TOOL_OPTIONS: -Xmx2g\n+      # Drop to ~1.5G; the local API server starts two Java processes (the API\n+      # server and the cron emulator). The default machine has 4GB, so we want\n+      # the Java memory limit to be below half of that: other things on the\n+      # machine need memory as well. Using 2G here manifested in 137 errors.\n+      # If this limit proves to be too low, an alternative would be to use a\n+      # larger resource class:\n+      #   https://circleci.com/docs/2.0/configuration-reference/#resource_class\n+      JAVA_TOOL_OPTIONS: -Xmx1536m", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53b0d348f5765c90c883315c9e2ad75b83f18815"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMxNDM5Nw==", "bodyText": "This doesn't require a plan upgrade, we can use these larger machines today if we wanted. It just uses more credits / cost more if we use a larger machine. Given what our server is doing, even 1G seems like it should be fine, but we can increase if there's an actual need to do so.", "url": "https://github.com/all-of-us/workbench/pull/3078#discussion_r374314397", "createdAt": "2020-02-03T20:08:25Z", "author": {"login": "calbach"}, "path": ".circleci/config.yml", "diffHunk": "@@ -68,7 +68,14 @@ jobs:\n           - MYSQL_PASSWORD=ubuntu\n     working_directory: ~/workbench\n     environment:\n-      JAVA_TOOL_OPTIONS: -Xmx2g\n+      # Drop to ~1.5G; the local API server starts two Java processes (the API\n+      # server and the cron emulator). The default machine has 4GB, so we want\n+      # the Java memory limit to be below half of that: other things on the\n+      # machine need memory as well. Using 2G here manifested in 137 errors.\n+      # If this limit proves to be too low, an alternative would be to use a\n+      # larger resource class:\n+      #   https://circleci.com/docs/2.0/configuration-reference/#resource_class\n+      JAVA_TOOL_OPTIONS: -Xmx1536m", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMxMjg4NQ=="}, "originalCommit": {"oid": "53b0d348f5765c90c883315c9e2ad75b83f18815"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3552, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}