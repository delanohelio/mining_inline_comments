{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NTM3MjMx", "number": 3132, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxOTozNjoxOFrODf_u2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMjowMzoyNFrODgB83Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0ODc2NjMzOnYy", "diffSide": "RIGHT", "path": "e2e/app/elements/button.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxOTozNjoxOFrOFqBftA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxOTozNjoxOFrOFqBftA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTYwOTAxMg==", "bodyText": "file rename.", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379609012", "createdAt": "2020-02-14T19:36:18Z", "author": {"login": "aweng98"}, "path": "e2e/app/elements/button.ts", "diffHunk": "@@ -1,5 +1,5 @@\n import {Page} from 'puppeteer';\n-import * as elementHandler from '../../driver/element-handler';\n+import * as elementHandler from '../../driver/elementHandle-util';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0ODc2NzAyOnYy", "diffSide": "RIGHT", "path": "e2e/app/google-login.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxOTozNjozM1rOFqBgGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxOTozNjozM1rOFqBgGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTYwOTExMg==", "bodyText": "file move.", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379609112", "createdAt": "2020-02-14T19:36:33Z", "author": {"login": "aweng98"}, "path": "e2e/app/google-login.ts", "diffHunk": "@@ -1,7 +1,7 @@\n-import {ElementHandle, Page} from 'puppeteer';\n-import {waitForNavigation} from '../services/page-wait';\n+import { ElementHandle, Page } from 'puppeteer';\n+import { waitForNavigation } from '../services/page-wait';\n \n-const configs = require('../config/config');\n+const configs = require('../resources/config');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0ODc2ODY5OnYy", "diffSide": "LEFT", "path": "e2e/app/workspace-element.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxOTozNzoyMFrOFqBhOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxOTozNzoyMFrOFqBhOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTYwOTQwMw==", "bodyText": "renamed class name to ComponentWebElement", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379609403", "createdAt": "2020-02-14T19:37:20Z", "author": {"login": "aweng98"}, "path": "e2e/app/workspace-element.ts", "diffHunk": "@@ -23,32 +24,3 @@ exports.SELT_XPATH_QUESTION4 = `//*[starts-with(normalize-space(.), \"4. What are\n // request a review Yes or No radiobutton\n exports.SELT_XPATH_YES = `//*[label[contains(normalize-space(.),\"Would you like to request a review of your research purpose\")]]/following-sibling::*/input[@type=\"radio\"][following-sibling::label[1]/text()=\"Yes\"]`;\n exports.SELT_XPATH_NO = `//*[label[contains(normalize-space(.),\"Would you like to request a review of your research purpose\")]]/following-sibling::*/input[@type=\"radio\"][following-sibling::label[1]/text()=\"No\"]`;\n-\n-export default class ProjectPurposeQuestion extends Widget {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0ODc3MTQyOnYy", "diffSide": "RIGHT", "path": "e2e/app/workspace-page.ts", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxOTozODoyMlrOFqBi1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMjo0MToyNlrOFqFpuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTYwOTgxNQ==", "bodyText": "bunch of methods rename to make shorter", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379609815", "createdAt": "2020-02-14T19:38:22Z", "author": {"login": "aweng98"}, "path": "e2e/app/workspace-page.ts", "diffHunk": "@@ -44,62 +52,62 @@ export default class Workspaces extends authenticatedpage {\n     return await this.puppeteerPage.waitFor(selectors.dataSet, { visible: true });\n   }\n \n-  public element_question1_forProfitPurpose(): ProjectPurposeQuestion {\n-    return new ProjectPurposeQuestion(this.puppeteerPage, 'For-Profit Purpose');\n+  public question1ForProfit(): ComponentWebElement {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2MjAyMQ==", "bodyText": "How come all of these function names are prefixed with question1?", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379662021", "createdAt": "2020-02-14T21:53:08Z", "author": {"login": "als364"}, "path": "e2e/app/workspace-page.ts", "diffHunk": "@@ -44,62 +52,62 @@ export default class Workspaces extends authenticatedpage {\n     return await this.puppeteerPage.waitFor(selectors.dataSet, { visible: true });\n   }\n \n-  public element_question1_forProfitPurpose(): ProjectPurposeQuestion {\n-    return new ProjectPurposeQuestion(this.puppeteerPage, 'For-Profit Purpose');\n+  public question1ForProfit(): ComponentWebElement {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTYwOTgxNQ=="}, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY3NzExMg==", "bodyText": "for grouping get-element functions. too many elements on page. naming convention probably will change in future.", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379677112", "createdAt": "2020-02-14T22:41:26Z", "author": {"login": "aweng98"}, "path": "e2e/app/workspace-page.ts", "diffHunk": "@@ -44,62 +52,62 @@ export default class Workspaces extends authenticatedpage {\n     return await this.puppeteerPage.waitFor(selectors.dataSet, { visible: true });\n   }\n \n-  public element_question1_forProfitPurpose(): ProjectPurposeQuestion {\n-    return new ProjectPurposeQuestion(this.puppeteerPage, 'For-Profit Purpose');\n+  public question1ForProfit(): ComponentWebElement {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTYwOTgxNQ=="}, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0OTEwNDQ3OnYy", "diffSide": "RIGHT", "path": "e2e/app/mixin/authenticatedpage.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMTo1MjowMlrOFqEtNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMjozNzo1NlrOFqFmEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2MTYyMQ==", "bodyText": "nit: space between closing paren and curly brace", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379661621", "createdAt": "2020-02-14T21:52:02Z", "author": {"login": "als364"}, "path": "e2e/app/mixin/authenticatedpage.ts", "diffHunk": "@@ -43,17 +43,23 @@ export default abstract class AuthenticatedPage extends BasePage {\n   protected async waitForSpinner() {\n     // wait maximum 1 second for either spinner to show up\n     const selectr1 = '.spinner, svg';\n-    const found = await this.puppeteerPage.waitFor((selector) => {\n+    const spinner = await this.puppeteerPage.waitFor((selector) => {\n       return document.querySelectorAll(selector).length > 0\n     }, {timeout: 1000}, selectr1);\n+    const f = await spinner.jsonValue();\n \n     // wait maximum 60 seconds for spinner disappear if spinner existed\n     const selectr2 = 'svg[style*=\"spin\"], .spinner:empty';\n-    if (found) {\n+\n+    if (f) {\n       await this.puppeteerPage.waitFor((selector) => {\n         return document.querySelectorAll(selector).length === 0\n       }, {timeout: 60000}, selectr2);\n     }\n+    // final 1 second wait for page render to finish\n+    if (f){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY3NjE3Ng==", "bodyText": "fixed", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379676176", "createdAt": "2020-02-14T22:37:56Z", "author": {"login": "aweng98"}, "path": "e2e/app/mixin/authenticatedpage.ts", "diffHunk": "@@ -43,17 +43,23 @@ export default abstract class AuthenticatedPage extends BasePage {\n   protected async waitForSpinner() {\n     // wait maximum 1 second for either spinner to show up\n     const selectr1 = '.spinner, svg';\n-    const found = await this.puppeteerPage.waitFor((selector) => {\n+    const spinner = await this.puppeteerPage.waitFor((selector) => {\n       return document.querySelectorAll(selector).length > 0\n     }, {timeout: 1000}, selectr1);\n+    const f = await spinner.jsonValue();\n \n     // wait maximum 60 seconds for spinner disappear if spinner existed\n     const selectr2 = 'svg[style*=\"spin\"], .spinner:empty';\n-    if (found) {\n+\n+    if (f) {\n       await this.puppeteerPage.waitFor((selector) => {\n         return document.querySelectorAll(selector).length === 0\n       }, {timeout: 60000}, selectr2);\n     }\n+    // final 1 second wait for page render to finish\n+    if (f){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2MTYyMQ=="}, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0OTEwNTA2OnYy", "diffSide": "RIGHT", "path": "e2e/app/mixin/authenticatedpage.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMTo1MjoyMVrOFqEtoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMjozNzo0NVrOFqFl1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2MTcyOQ==", "bodyText": "nit: could this be named something like spinnerValue instead of a single-character name?", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379661729", "createdAt": "2020-02-14T21:52:21Z", "author": {"login": "als364"}, "path": "e2e/app/mixin/authenticatedpage.ts", "diffHunk": "@@ -43,17 +43,23 @@ export default abstract class AuthenticatedPage extends BasePage {\n   protected async waitForSpinner() {\n     // wait maximum 1 second for either spinner to show up\n     const selectr1 = '.spinner, svg';\n-    const found = await this.puppeteerPage.waitFor((selector) => {\n+    const spinner = await this.puppeteerPage.waitFor((selector) => {\n       return document.querySelectorAll(selector).length > 0\n     }, {timeout: 1000}, selectr1);\n+    const f = await spinner.jsonValue();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY3NjExOQ==", "bodyText": "renamed to jValue.", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379676119", "createdAt": "2020-02-14T22:37:45Z", "author": {"login": "aweng98"}, "path": "e2e/app/mixin/authenticatedpage.ts", "diffHunk": "@@ -43,17 +43,23 @@ export default abstract class AuthenticatedPage extends BasePage {\n   protected async waitForSpinner() {\n     // wait maximum 1 second for either spinner to show up\n     const selectr1 = '.spinner, svg';\n-    const found = await this.puppeteerPage.waitFor((selector) => {\n+    const spinner = await this.puppeteerPage.waitFor((selector) => {\n       return document.querySelectorAll(selector).length > 0\n     }, {timeout: 1000}, selectr1);\n+    const f = await spinner.jsonValue();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2MTcyOQ=="}, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0OTEyNTEyOnYy", "diffSide": "RIGHT", "path": "e2e/driver/AouElement.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMjowMTowNlrOFqE5hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMjozNzozM1rOFqFlog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NDc3NQ==", "bodyText": "Does this still debug statement still need to be there?", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379664775", "createdAt": "2020-02-14T22:01:06Z", "author": {"login": "als364"}, "path": "e2e/driver/AouElement.ts", "diffHunk": "@@ -1,75 +1,115 @@\n-import {ClickOptions, ElementHandle, Page} from 'puppeteer';\n+import { ElementHandle, Page } from 'puppeteer';\n \n export default class AouElement {\n+\n   public eHandle: ElementHandle;\n \n   constructor(handle: ElementHandle) {\n     this.eHandle = handle;\n   }\n \n-  public async getProperty(property: string): Promise<unknown> {\n-    return await (await this.eHandle.getProperty(property)).jsonValue();\n-  }\n-\n-   /**\n-    * Cannot get attribute directly from a ElementHandle.\n-    * If the attribute have property counterparts, use getProperty function.\n-    */\n-  public async getAttribute(page: Page) {\n-    return await page.evaluate(link => link.getAttribute('href'), this.eHandle,);\n+  public async getProp(property: string): Promise<unknown> {\n+    const prop = await this.eHandle.getProperty(property);\n+    console.log(`getProp(${property}) function: ${await prop.jsonValue()}`);\n+    return await prop.jsonValue();\n   }\n \n   /**\n-   * Get the element attribute value.\n-   * @param {Page} page\n-   * @param {ElementHandle} element\n-   * @param {string} attribute\n+   * Get attribute directly from a ElementHandle.\n+   * If the attribute have property counterparts, use getProperty function.\n    */\n-  public async getAttributeAlternative(page: Page, element: ElementHandle, attribute: string) {\n-    const handle = await page.evaluateHandle( (elem, attr) => {\n-      return elem.getAttribute(attr);\n-    }, element, attribute);\n-    return await handle.jsonValue();\n+  public async getAttr(attr: string): Promise<unknown> {\n+    const atr = await this.eHandle.getAttribute(attr);\n+    console.log(`getAttr(${attr}) function: ${atr}`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY3NjA2Ng==", "bodyText": "I need to see logged info for now until common functions are working consistently. eventually console.log will be all removed.", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379676066", "createdAt": "2020-02-14T22:37:33Z", "author": {"login": "aweng98"}, "path": "e2e/driver/AouElement.ts", "diffHunk": "@@ -1,75 +1,115 @@\n-import {ClickOptions, ElementHandle, Page} from 'puppeteer';\n+import { ElementHandle, Page } from 'puppeteer';\n \n export default class AouElement {\n+\n   public eHandle: ElementHandle;\n \n   constructor(handle: ElementHandle) {\n     this.eHandle = handle;\n   }\n \n-  public async getProperty(property: string): Promise<unknown> {\n-    return await (await this.eHandle.getProperty(property)).jsonValue();\n-  }\n-\n-   /**\n-    * Cannot get attribute directly from a ElementHandle.\n-    * If the attribute have property counterparts, use getProperty function.\n-    */\n-  public async getAttribute(page: Page) {\n-    return await page.evaluate(link => link.getAttribute('href'), this.eHandle,);\n+  public async getProp(property: string): Promise<unknown> {\n+    const prop = await this.eHandle.getProperty(property);\n+    console.log(`getProp(${property}) function: ${await prop.jsonValue()}`);\n+    return await prop.jsonValue();\n   }\n \n   /**\n-   * Get the element attribute value.\n-   * @param {Page} page\n-   * @param {ElementHandle} element\n-   * @param {string} attribute\n+   * Get attribute directly from a ElementHandle.\n+   * If the attribute have property counterparts, use getProperty function.\n    */\n-  public async getAttributeAlternative(page: Page, element: ElementHandle, attribute: string) {\n-    const handle = await page.evaluateHandle( (elem, attr) => {\n-      return elem.getAttribute(attr);\n-    }, element, attribute);\n-    return await handle.jsonValue();\n+  public async getAttr(attr: string): Promise<unknown> {\n+    const atr = await this.eHandle.getAttribute(attr);\n+    console.log(`getAttr(${attr}) function: ${atr}`);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NDc3NQ=="}, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0OTEyNTIyOnYy", "diffSide": "RIGHT", "path": "e2e/driver/AouElement.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMjowMTowOFrOFqE5kQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMjowMTowOFrOFqE5kQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NDc4NQ==", "bodyText": "Does this still debug statement still need to be there?", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379664785", "createdAt": "2020-02-14T22:01:08Z", "author": {"login": "als364"}, "path": "e2e/driver/AouElement.ts", "diffHunk": "@@ -1,75 +1,115 @@\n-import {ClickOptions, ElementHandle, Page} from 'puppeteer';\n+import { ElementHandle, Page } from 'puppeteer';\n \n export default class AouElement {\n+\n   public eHandle: ElementHandle;\n \n   constructor(handle: ElementHandle) {\n     this.eHandle = handle;\n   }\n \n-  public async getProperty(property: string): Promise<unknown> {\n-    return await (await this.eHandle.getProperty(property)).jsonValue();\n-  }\n-\n-   /**\n-    * Cannot get attribute directly from a ElementHandle.\n-    * If the attribute have property counterparts, use getProperty function.\n-    */\n-  public async getAttribute(page: Page) {\n-    return await page.evaluate(link => link.getAttribute('href'), this.eHandle,);\n+  public async getProp(property: string): Promise<unknown> {\n+    const prop = await this.eHandle.getProperty(property);\n+    console.log(`getProp(${property}) function: ${await prop.jsonValue()}`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0OTEyOTgxOnYy", "diffSide": "RIGHT", "path": "e2e/driver/AouElement.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMjowMzoxOVrOFqE8dQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMjowMzoxOVrOFqE8dQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NTUyNQ==", "bodyText": "Does this still debug statement still need to be there?", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379665525", "createdAt": "2020-02-14T22:03:19Z", "author": {"login": "als364"}, "path": "e2e/driver/AouElement.ts", "diffHunk": "@@ -1,75 +1,115 @@\n-import {ClickOptions, ElementHandle, Page} from 'puppeteer';\n+import { ElementHandle, Page } from 'puppeteer';\n \n export default class AouElement {\n+\n   public eHandle: ElementHandle;\n \n   constructor(handle: ElementHandle) {\n     this.eHandle = handle;\n   }\n \n-  public async getProperty(property: string): Promise<unknown> {\n-    return await (await this.eHandle.getProperty(property)).jsonValue();\n-  }\n-\n-   /**\n-    * Cannot get attribute directly from a ElementHandle.\n-    * If the attribute have property counterparts, use getProperty function.\n-    */\n-  public async getAttribute(page: Page) {\n-    return await page.evaluate(link => link.getAttribute('href'), this.eHandle,);\n+  public async getProp(property: string): Promise<unknown> {\n+    const prop = await this.eHandle.getProperty(property);\n+    console.log(`getProp(${property}) function: ${await prop.jsonValue()}`);\n+    return await prop.jsonValue();\n   }\n \n   /**\n-   * Get the element attribute value.\n-   * @param {Page} page\n-   * @param {ElementHandle} element\n-   * @param {string} attribute\n+   * Get attribute directly from a ElementHandle.\n+   * If the attribute have property counterparts, use getProperty function.\n    */\n-  public async getAttributeAlternative(page: Page, element: ElementHandle, attribute: string) {\n-    const handle = await page.evaluateHandle( (elem, attr) => {\n-      return elem.getAttribute(attr);\n-    }, element, attribute);\n-    return await handle.jsonValue();\n+  public async getAttr(attr: string): Promise<unknown> {\n+    const atr = await this.eHandle.getAttribute(attr);\n+    console.log(`getAttr(${attr}) function: ${atr}`);\n+    return atr;\n   }\n \n-  public async click(options?: ClickOptions) {\n-    return (await this.eHandle.click(options));\n+  public async click() {\n+    await this.eHandle.asElement().click();\n   }\n \n-  public async isVisible() {\n+  public async focus() {\n+    return Promise.all([\n+      this.eHandle.focus(),\n+      this.eHandle.hover()\n+    ]);\n+  }\n+\n+  public async isVisible(): Promise<boolean> {\n     return (await this.eHandle.asElement().boxModel() !== null);\n   }\n \n-  public async exists() {\n+  public async exists(): Promise<boolean> {\n     return (await this.eHandle.asElement() !== null);\n   }\n \n   public async isCheckbox() {\n-    return (await this.getProperty('type') === 'checkbox')\n+    return (await this.getProp('type') === 'checkbox')\n+  }\n+\n+  public async isButton() {\n+    return (await this.getProp('type') === 'button')\n   }\n \n   public async check() {\n-    if (!!this.isChecked()) {\n-      this.click();\n+    const cValue = await this.isChecked();\n+    if (!cValue) {\n+      console.log('going to check the checkbox');\n+      await this.click();\n     }\n   }\n \n   public async unCheck() {\n-    if (this.isChecked()) {\n-      this.click();\n+    const cValue = await this.isChecked();\n+    if (cValue) {\n+      console.log('going to uncheck the checkbox');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 94}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0OTEyOTg5OnYy", "diffSide": "RIGHT", "path": "e2e/driver/AouElement.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMjowMzoyNFrOFqE8gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMjowMzoyNFrOFqE8gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NTUzNw==", "bodyText": "Does this still debug statement still need to be there?", "url": "https://github.com/all-of-us/workbench/pull/3132#discussion_r379665537", "createdAt": "2020-02-14T22:03:24Z", "author": {"login": "als364"}, "path": "e2e/driver/AouElement.ts", "diffHunk": "@@ -1,75 +1,115 @@\n-import {ClickOptions, ElementHandle, Page} from 'puppeteer';\n+import { ElementHandle, Page } from 'puppeteer';\n \n export default class AouElement {\n+\n   public eHandle: ElementHandle;\n \n   constructor(handle: ElementHandle) {\n     this.eHandle = handle;\n   }\n \n-  public async getProperty(property: string): Promise<unknown> {\n-    return await (await this.eHandle.getProperty(property)).jsonValue();\n-  }\n-\n-   /**\n-    * Cannot get attribute directly from a ElementHandle.\n-    * If the attribute have property counterparts, use getProperty function.\n-    */\n-  public async getAttribute(page: Page) {\n-    return await page.evaluate(link => link.getAttribute('href'), this.eHandle,);\n+  public async getProp(property: string): Promise<unknown> {\n+    const prop = await this.eHandle.getProperty(property);\n+    console.log(`getProp(${property}) function: ${await prop.jsonValue()}`);\n+    return await prop.jsonValue();\n   }\n \n   /**\n-   * Get the element attribute value.\n-   * @param {Page} page\n-   * @param {ElementHandle} element\n-   * @param {string} attribute\n+   * Get attribute directly from a ElementHandle.\n+   * If the attribute have property counterparts, use getProperty function.\n    */\n-  public async getAttributeAlternative(page: Page, element: ElementHandle, attribute: string) {\n-    const handle = await page.evaluateHandle( (elem, attr) => {\n-      return elem.getAttribute(attr);\n-    }, element, attribute);\n-    return await handle.jsonValue();\n+  public async getAttr(attr: string): Promise<unknown> {\n+    const atr = await this.eHandle.getAttribute(attr);\n+    console.log(`getAttr(${attr}) function: ${atr}`);\n+    return atr;\n   }\n \n-  public async click(options?: ClickOptions) {\n-    return (await this.eHandle.click(options));\n+  public async click() {\n+    await this.eHandle.asElement().click();\n   }\n \n-  public async isVisible() {\n+  public async focus() {\n+    return Promise.all([\n+      this.eHandle.focus(),\n+      this.eHandle.hover()\n+    ]);\n+  }\n+\n+  public async isVisible(): Promise<boolean> {\n     return (await this.eHandle.asElement().boxModel() !== null);\n   }\n \n-  public async exists() {\n+  public async exists(): Promise<boolean> {\n     return (await this.eHandle.asElement() !== null);\n   }\n \n   public async isCheckbox() {\n-    return (await this.getProperty('type') === 'checkbox')\n+    return (await this.getProp('type') === 'checkbox')\n+  }\n+\n+  public async isButton() {\n+    return (await this.getProp('type') === 'button')\n   }\n \n   public async check() {\n-    if (!!this.isChecked()) {\n-      this.click();\n+    const cValue = await this.isChecked();\n+    if (!cValue) {\n+      console.log('going to check the checkbox');\n+      await this.click();\n     }\n   }\n \n   public async unCheck() {\n-    if (this.isChecked()) {\n-      this.click();\n+    const cValue = await this.isChecked();\n+    if (cValue) {\n+      console.log('going to uncheck the checkbox');\n+      await this.click();\n     }\n   }\n \n-  public async isDisabled() {\n-    return await this.getProperty('disabled');\n+  public async isDisabled(): Promise<boolean> {\n+    return await this.getProp('disabled') === true;\n+  }\n+\n+  public async isReadOnly(): Promise<boolean> {\n+    return await this.getProp('readOnly') === true;\n+  }\n+\n+  public async value(): Promise<string> {\n+    const p = await this.getProp('value');\n+    if (typeof p === 'undefined') { return p; } else { return ''; }\n+  }\n+\n+  public async isChecked(): Promise<boolean> {\n+    const checkedProp = await this.getProp('checked');\n+    console.log('isChecked function returned: ' + checkedProp);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dacabff376b82a2c1dbc417549d35293a49670c6"}, "originalPosition": 116}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3336, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}