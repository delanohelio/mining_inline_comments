{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwNjI5NjE5", "number": 3499, "title": "[RW-4868][risk=no] Improve Workspace definition, fix some test issues, and add descriptions", "bodyText": "When debugging #3465 I ran into a number of issues with nearly matching field names  across Workspace, DbWorkspace, and FirecloudWorkspace that were driving me batty. I've got a spreadsheet going now (and those of  you who  know  me know that I wield it like a kudgel when it  comes to getting medieval on an object model).\nI also discovered the example property/annotation, which will help with Swagger UI for nontrivial definitions and parameters, in addition to clarifying things for our own UI and backend developers.\n\nLearnings:\n\nUsing test strings that look like the real thing can help navigate a complex class\nThere's no easy way to work with these classes in their present state. At least, there's certainly no pleasant way.\nI really miss my mapper code from RW-4803. I won't have to wait long, hopefully.\nWhen stubbing lots of related classes, it's easay to violate relational constraints and field equality. This is nearly impossible tot get right today with Workspace, DbWorkspace, and FirecloudWorkspace.\nNone of this is documented in any kind of thorough, accessible, up-to-date way.\n\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-04-29T10:40:00Z", "url": "https://github.com/all-of-us/workbench/pull/3499", "merged": true, "mergeCommit": {"oid": "3aec75ea3657ec37a2b472f40a73610c034eb6cd"}, "closed": true, "closedAt": "2020-05-01T19:20:20Z", "author": {"login": "jaycarlton"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccJNYBgH2gAyNDEwNjI5NjE5OjU1ZWE0MmJiZmU0YTIyNzg2ZTczNWIzNzY5MTQ4ZDZmOGZkNTdkNDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcdGuP_AFqTQwNDM0OTU2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "55ea42bbfe4a22786e735b3769148d6f8fd57d42", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/55ea42bbfe4a22786e735b3769148d6f8fd57d42", "committedDate": "2020-04-28T19:39:43Z", "message": "populate more reqired stuff for test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2a8eb965b04d3cc3c166fc2b707f0e569902c64", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/e2a8eb965b04d3cc3c166fc2b707f0e569902c64", "committedDate": "2020-04-28T21:24:43Z", "message": "fixup test and add required attribute to workspace fields"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cb0ab797ff239f8b1c48618b6114e37efc899e7", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/2cb0ab797ff239f8b1c48618b6114e37efc899e7", "committedDate": "2020-04-29T10:34:08Z", "message": "don't set  with workspace's ID"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c0463f648170d6b74836eb58d956470651bc5dc", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/4c0463f648170d6b74836eb58d956470651bc5dc", "committedDate": "2020-04-29T12:46:57Z", "message": "fixup a name vs firecloud name mismatch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de78ec24cc6ee942b32c871b281a1a5f33d26da9", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/de78ec24cc6ee942b32c871b281a1a5f33d26da9", "committedDate": "2020-04-29T12:52:43Z", "message": "write build results to a file and consume that in CircleCI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08fdb11d9aa2c50fecec7536ebd183f6f50136fc", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/08fdb11d9aa2c50fecec7536ebd183f6f50136fc", "committedDate": "2020-04-29T14:38:24Z", "message": "Merge branch 'jaycarlton/circleUnitTests' into jaycarlton/fullWorkspaceStub"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9130a7f2c322ef8baa37960376729193c0d1c2dc", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/9130a7f2c322ef8baa37960376729193c0d1c2dc", "committedDate": "2020-04-29T15:37:27Z", "message": "provide missing etag"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b69eae1d7406c05b1886c40619c0f13db98ea480", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/b69eae1d7406c05b1886c40619c0f13db98ea480", "committedDate": "2020-04-29T17:32:31Z", "message": "Merge branch 'master' into jaycarlton/fullWorkspaceStub"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c94f73e5aa4c7e390b5f48719a76fdc880468aa", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/0c94f73e5aa4c7e390b5f48719a76fdc880468aa", "committedDate": "2020-04-30T14:05:03Z", "message": "Merge branch 'master' into jaycarlton/fullWorkspaceStub"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4424c5d7ff04fd8b43a6a3fb638ff66362e1a7f2", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/4424c5d7ff04fd8b43a6a3fb638ff66362e1a7f2", "committedDate": "2020-04-30T14:45:20Z", "message": "api test fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abf40f153c6e8553195eaf741d878238458e0084", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/abf40f153c6e8553195eaf741d878238458e0084", "committedDate": "2020-04-30T14:57:11Z", "message": "more required props"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "944bea25c04f692458360e4b445247879229a498", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/944bea25c04f692458360e4b445247879229a498", "committedDate": "2020-04-30T16:11:44Z", "message": "sotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68640889ad244b7639cb80f224ef03e62883fb7b", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/68640889ad244b7639cb80f224ef03e62883fb7b", "committedDate": "2020-04-30T16:16:51Z", "message": "save typescript changes for later"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04b53bfc805aa5764bc12faec058891504156565", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/04b53bfc805aa5764bc12faec058891504156565", "committedDate": "2020-04-30T18:12:25Z", "message": "Merge branch 'master' into jaycarlton/fullWorkspaceStub"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MzE2NTE1", "url": "https://github.com/all-of-us/workbench/pull/3499#pullrequestreview-404316515", "createdAt": "2020-05-01T18:17:57Z", "commit": {"oid": "04b53bfc805aa5764bc12faec058891504156565"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MzQ5NTYw", "url": "https://github.com/all-of-us/workbench/pull/3499#pullrequestreview-404349560", "createdAt": "2020-05-01T19:19:50Z", "commit": {"oid": "04b53bfc805aa5764bc12faec058891504156565"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxOToxOTo1MFrOGPTLuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxOToxOTo1MFrOGPTLuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY5NjEyMQ==", "bodyText": "There's still a bit of a fib happening here, because the workspace model passed in to createWorkspace has fewer fields set than the model used by other methods. I'll make this clearer in the next PR.", "url": "https://github.com/all-of-us/workbench/pull/3499#discussion_r418696121", "createdAt": "2020-05-01T19:19:50Z", "author": {"login": "jaycarlton"}, "path": "api/src/test/java/org/pmiops/workbench/utils/TestMockFactory.java", "diffHunk": "@@ -42,16 +46,22 @@ public Workspace createWorkspace(String workspaceNameSpace, String workspaceName\n     ResearchOutcomeEnumsList.add(ResearchOutcomeEnum.IMPROVED_RISK_ASSESMENT);\n \n     return new Workspace()\n-        .id(\"1\")\n+        .id(WORKSPACE_FIRECLOUD_NAME)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04b53bfc805aa5764bc12faec058891504156565"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4912, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}