{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxMTk2MDgx", "number": 3901, "title": "[RW-4969][risk=medium] Enable contact email update in user admin page", "bodyText": "Description:\n\n\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally\n I have run the E2E tests on ths change against my local UI + API server with yarn test:local\n If this includes a UI change, I have taken screen recordings or screenshots of the new behavior and notified the PO and UX designer\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-08-20T19:25:54Z", "url": "https://github.com/all-of-us/workbench/pull/3901", "merged": true, "mergeCommit": {"oid": "d68ae69aa14c6aa8690ded296cd4c0f7b49ef973"}, "closed": true, "closedAt": "2020-08-21T18:08:57Z", "author": {"login": "jmthibault79"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAy2GlgH2gAyNDcxMTk2MDgxOjQ1ODg3OGU3ZDllZWJmZDZkZjYxOWVhYzZlOWE4MjczZDM3ZjhlNDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBIcoCAH2gAyNDcxMTk2MDgxOjg5N2E2MzE0MWU4NzYwZTIzYWIwZGIxM2I0ZDAyZWNmNGY5MTRmYjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "458878e7d9eebfd6df619eac6e9a8273d37f8e42", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/458878e7d9eebfd6df619eac6e9a8273d37f8e42", "committedDate": "2020-08-20T16:31:35Z", "message": "fix check email validation logic: displayed error on initial load"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3220c94cdfe2abc30c87bfc1988d80d69a56d8c", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/b3220c94cdfe2abc30c87bfc1988d80d69a56d8c", "committedDate": "2020-08-20T16:31:35Z", "message": "Don't hide institutional role on initial load"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4d87fff7cf425ef4d1106250310bd012f76c77a", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/b4d87fff7cf425ef4d1106250310bd012f76c77a", "committedDate": "2020-08-20T16:31:35Z", "message": "Allow contact email update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "273abdef90c8805e6281273f411363d6b7e8afd6", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/273abdef90c8805e6281273f411363d6b7e8afd6", "committedDate": "2020-08-20T16:31:36Z", "message": "Use onChange instead of onBlur"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec6d5c3505f00aac4201f07677c222c6fe180a7f", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/ec6d5c3505f00aac4201f07677c222c6fe180a7f", "committedDate": "2020-08-20T19:03:48Z", "message": "restore comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxOTM3MTM5", "url": "https://github.com/all-of-us/workbench/pull/3901#pullrequestreview-471937139", "createdAt": "2020-08-20T19:50:09Z", "commit": {"oid": "ec6d5c3505f00aac4201f07677c222c6fe180a7f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxOTo1MDowOVrOHEQ_dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxOTo1MDowOVrOHEQ_dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIzNDc0Mg==", "bodyText": "bulk renaming", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474234742", "createdAt": "2020-08-20T19:50:09Z", "author": {"login": "jmthibault79"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -107,8 +109,8 @@ interface Props {\n }\n \n interface State {\n-  checkEmailError: string;\n-  checkEmailResponse: CheckEmailResponse;\n+  validateEmailError: string;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec6d5c3505f00aac4201f07677c222c6fe180a7f"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxOTM3NzY2", "url": "https://github.com/all-of-us/workbench/pull/3901#pullrequestreview-471937766", "createdAt": "2020-08-20T19:51:04Z", "commit": {"oid": "ec6d5c3505f00aac4201f07677c222c6fe180a7f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxOTo1MTowNFrOHERBTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxOTo1MTowNFrOHERBTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIzNTIxMw==", "bodyText": "moved from setVerifiedInstitutionOnProfile() to apply to all callers", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474235213", "createdAt": "2020-08-20T19:51:04Z", "author": {"login": "jmthibault79"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -154,20 +156,21 @@ const AdminUser = withUrlParams()(class extends React.Component<Props, State> {\n     }\n   }\n \n-  async checkEmail() {\n+  async validateEmail() {\n     const {\n       updatedProfile: {\n         contactEmail,\n         verifiedInstitutionalAffiliation: {institutionShortName}\n       }\n     } = this.state;\n \n+    await this.setState({loading: true});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec6d5c3505f00aac4201f07677c222c6fe180a7f"}, "originalPosition": 57}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxOTM4MzMw", "url": "https://github.com/all-of-us/workbench/pull/3901#pullrequestreview-471938330", "createdAt": "2020-08-20T19:51:56Z", "commit": {"oid": "ec6d5c3505f00aac4201f07677c222c6fe180a7f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxOTo1MTo1N1rOHERDJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxOTo1MTo1N1rOHERDJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIzNTY4NA==", "bodyText": "undefined if it has not.  Used immediately below.", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474235684", "createdAt": "2020-08-20T19:51:57Z", "author": {"login": "jmthibault79"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -282,11 +289,44 @@ const AdminUser = withUrlParams()(class extends React.Component<Props, State> {\n     });\n   }\n \n+  // returns the updated profile value only if it has changed", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec6d5c3505f00aac4201f07677c222c6fe180a7f"}, "originalPosition": 130}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxOTM5MTQ1", "url": "https://github.com/all-of-us/workbench/pull/3901#pullrequestreview-471939145", "createdAt": "2020-08-20T19:53:17Z", "commit": {"oid": "ec6d5c3505f00aac4201f07677c222c6fe180a7f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxOTo1MzoxN1rOHERFbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxOTo1MzoxN1rOHERFbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIzNjI2OA==", "bodyText": "username and accessBypassRequests are required.  Only include others if they have changed (and are implemented in this PR)", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474236268", "createdAt": "2020-08-20T19:53:17Z", "author": {"login": "jmthibault79"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -282,11 +289,44 @@ const AdminUser = withUrlParams()(class extends React.Component<Props, State> {\n     });\n   }\n \n+  // returns the updated profile value only if it has changed\n+  updatedProfileValue(attribute: string) {\n+    const oldValue = fp.get(['oldProfile' , attribute], this.state);\n+    const updatedValue = fp.get(['updatedProfile' , attribute], this.state);\n+    if (!fp.isEqual(oldValue, updatedValue)) {\n+      return updatedValue;\n+    }\n+  }\n+\n+  updateAccountProperties() {\n+    const {updatedProfile} = this.state;\n+    const {username} = updatedProfile;\n+    const request: AccountPropertyUpdate = {\n+      username,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec6d5c3505f00aac4201f07677c222c6fe180a7f"}, "originalPosition": 143}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c7fcca54b68a081f0dddc50d1b36949ed26fc75", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/6c7fcca54b68a081f0dddc50d1b36949ed26fc75", "committedDate": "2020-08-20T19:58:43Z", "message": "Deprecate and stop using updateVerifiedInstitutionalAffiliation()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNTE3OTMx", "url": "https://github.com/all-of-us/workbench/pull/3901#pullrequestreview-472517931", "createdAt": "2020-08-21T14:05:10Z", "commit": {"oid": "6c7fcca54b68a081f0dddc50d1b36949ed26fc75"}, "state": "COMMENTED", "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxNDowNToxMFrOHEukMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxNDoxOTo0NFrOHEvH4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDcxOTI4Mg==", "bodyText": "I tend to expect  symbols starting with a verb to be a function, not a value. I would have expected emailValidationErrorMessage or similar  here.", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474719282", "createdAt": "2020-08-21T14:05:10Z", "author": {"login": "jaycarlton"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -107,8 +109,8 @@ interface Props {\n }\n \n interface State {\n-  checkEmailError: string;\n-  checkEmailResponse: CheckEmailResponse;\n+  validateEmailError: string;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIzNDc0Mg=="}, "originalCommit": {"oid": "ec6d5c3505f00aac4201f07677c222c6fe180a7f"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDcxOTczMQ==", "bodyText": "nit: we shouldn't need to ask the user to refresh the page. Can't  we just re-render or re-fetch  ourselves?", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474719731", "createdAt": "2020-08-21T14:05:59Z", "author": {"login": "jaycarlton"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -177,15 +180,16 @@ const AdminUser = withUrlParams()(class extends React.Component<Props, State> {\n     try {\n       const result = await validateEmail(contactEmail, institutionShortName, this.aborter);\n       this.setState({\n-        checkEmailError: '',\n-        checkEmailResponse: result\n+        validateEmailError: '',\n+        validateEmailResponse: result\n       });\n     } catch (e) {\n       this.setState({\n-        checkEmailError: 'Error validating user email against institution - please refresh page and try again',\n-        checkEmailResponse: null,\n+        validateEmailError: 'Error validating user email against institution - please refresh page and try again',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c7fcca54b68a081f0dddc50d1b36949ed26fc75"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDcyMDY5NA==", "bodyText": "I  really don't like  intentionally returning undefined. null would be less bad, and an idempotent treatment of the profile that does nothing if there are no changes (e.g. using React's vdom diff stuff) would be best.\nIt  sounds like there's no direct analog of Optional from Java, but I did find this  nifty  article on the options you do have for null  safety.", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474720694", "createdAt": "2020-08-21T14:07:40Z", "author": {"login": "jaycarlton"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -282,11 +289,44 @@ const AdminUser = withUrlParams()(class extends React.Component<Props, State> {\n     });\n   }\n \n+  // returns the updated profile value only if it has changed", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIzNTY4NA=="}, "originalCommit": {"oid": "ec6d5c3505f00aac4201f07677c222c6fe180a7f"}, "originalPosition": 130}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDcyMzk3Nw==", "bodyText": "nit: I've been preferring  the curried form of the fp calls, e.g. fp.get(['oldProfile' , attribute])(this.state);. It's a nice reminder that I'm creating a function first and then calling it. I don't know  that we have a standard  for this  though.  @petesantos do you have a preference?", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474723977", "createdAt": "2020-08-21T14:12:12Z", "author": {"login": "jaycarlton"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -273,20 +280,44 @@ const AdminUser = withUrlParams()(class extends React.Component<Props, State> {\n     ));\n   }\n \n-  updateVerifiedInstitutionalAffiliation() {\n+  // returns the updated profile value only if it has changed\n+  updatedProfileValue(attribute: string) {\n+    const oldValue = fp.get(['oldProfile' , attribute], this.state);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c7fcca54b68a081f0dddc50d1b36949ed26fc75"}, "originalPosition": 133}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDcyNDY4OA==", "bodyText": "I believe typescript has  methods to mark these as required and the others as optional (e.g. string?).", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474724688", "createdAt": "2020-08-21T14:13:25Z", "author": {"login": "jaycarlton"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -282,11 +289,44 @@ const AdminUser = withUrlParams()(class extends React.Component<Props, State> {\n     });\n   }\n \n+  // returns the updated profile value only if it has changed\n+  updatedProfileValue(attribute: string) {\n+    const oldValue = fp.get(['oldProfile' , attribute], this.state);\n+    const updatedValue = fp.get(['updatedProfile' , attribute], this.state);\n+    if (!fp.isEqual(oldValue, updatedValue)) {\n+      return updatedValue;\n+    }\n+  }\n+\n+  updateAccountProperties() {\n+    const {updatedProfile} = this.state;\n+    const {username} = updatedProfile;\n+    const request: AccountPropertyUpdate = {\n+      username,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIzNjI2OA=="}, "originalCommit": {"oid": "ec6d5c3505f00aac4201f07677c222c6fe180a7f"}, "originalPosition": 143}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDcyNTEwMg==", "bodyText": "Please type this and give an appropriate default value (like 0.0).", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474725102", "createdAt": "2020-08-21T14:14:05Z", "author": {"login": "jaycarlton"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -273,20 +280,44 @@ const AdminUser = withUrlParams()(class extends React.Component<Props, State> {\n     ));\n   }\n \n-  updateVerifiedInstitutionalAffiliation() {\n+  // returns the updated profile value only if it has changed\n+  updatedProfileValue(attribute: string) {\n+    const oldValue = fp.get(['oldProfile' , attribute], this.state);\n+    const updatedValue = fp.get(['updatedProfile' , attribute], this.state);\n+    if (!fp.isEqual(oldValue, updatedValue)) {\n+      return updatedValue;\n+    }\n+  }\n+\n+  updateAccountProperties() {\n     const {updatedProfile} = this.state;\n-    const {userId, verifiedInstitutionalAffiliation} = updatedProfile;\n+    const {username} = updatedProfile;\n+    const request: AccountPropertyUpdate = {\n+      username,\n+      freeCreditsLimit: undefined, // coming soon: RW-4956", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c7fcca54b68a081f0dddc50d1b36949ed26fc75"}, "originalPosition": 146}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDcyNTY0Ng==", "bodyText": "Make  sure to test  the layout with various  combinations of these errors  present at once.", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474725646", "createdAt": "2020-08-21T14:14:58Z", "author": {"login": "jaycarlton"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -353,7 +384,7 @@ const AdminUser = withUrlParams()(class extends React.Component<Props, State> {\n           color: colors.primary\n         }}\n     >\n-      {checkEmailError && <div>{checkEmailError}</div>}\n+      {validateEmailError && <div>{validateEmailError}</div>}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c7fcca54b68a081f0dddc50d1b36949ed26fc75"}, "originalPosition": 194}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDcyNjAzMQ==", "bodyText": "You can just do onClick={this.updateAccountProperties}.", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474726031", "createdAt": "2020-08-21T14:15:36Z", "author": {"login": "jaycarlton"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -415,7 +446,7 @@ const AdminUser = withUrlParams()(class extends React.Component<Props, State> {\n             <Button\n                 type='primary'\n                 disabled={this.isSaveDisabled(errors)}\n-                onClick={() => this.updateVerifiedInstitutionalAffiliation()}\n+                onClick={() => this.updateAccountProperties()}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c7fcca54b68a081f0dddc50d1b36949ed26fc75"}, "originalPosition": 203}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDcyNjM5MQ==", "bodyText": "I don't think you need the arrow expression here. Just put onChange={this.setContactEmail}.", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474726391", "createdAt": "2020-08-21T14:16:14Z", "author": {"login": "jaycarlton"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -461,11 +492,11 @@ const AdminUser = withUrlParams()(class extends React.Component<Props, State> {\n             />\n             <TextInputWithLabel\n                 labelText={'Contact email'}\n-                placeholder={updatedProfile.contactEmail}\n+                value={updatedProfile.contactEmail}\n                 inputId={'contactEmail'}\n-                disabled={true}\n                 inputStyle={{...styles.textInput, ...styles.backgroundColorDark}}\n                 containerStyle={styles.textInputContainer}\n+                onChange={email => this.setContactEmail(email)}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c7fcca54b68a081f0dddc50d1b36949ed26fc75"}, "originalPosition": 217}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDcyNzEzMA==", "bodyText": "I would have probably made this a function component like EmailValidationMessage so it could be called like <EmailValidationMessage/>.", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474727130", "createdAt": "2020-08-21T14:17:30Z", "author": {"login": "jaycarlton"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -224,10 +228,10 @@ const AdminUser = withUrlParams()(class extends React.Component<Props, State> {\n     return fp.isEqual(oldProfile, updatedProfile) || errors;\n   }\n \n-  renderCheckEmailResponse() {\n-    const {checkEmailResponse, updatedProfile, verifiedInstitutionOptions} = this.state;\n+  renderValidateEmailResponse() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c7fcca54b68a081f0dddc50d1b36949ed26fc75"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDcyODQxOQ==", "bodyText": "nit: I'd prefer a single state value to determine whether to show this and what to show so you don't have this logic cluttering up your main render function.", "url": "https://github.com/all-of-us/workbench/pull/3901#discussion_r474728419", "createdAt": "2020-08-21T14:19:44Z", "author": {"login": "jaycarlton"}, "path": "ui/src/app/pages/admin/admin-user.tsx", "diffHunk": "@@ -497,10 +528,8 @@ const AdminUser = withUrlParams()(class extends React.Component<Props, State> {\n                 }\n                 dataTestId={'verifiedInstitution'}\n             />}\n-            {checkEmailResponse && !checkEmailResponse.isValidMember && this.renderCheckEmailResponse()}\n+            {validateEmailResponse && !validateEmailResponse.isValidMember && this.renderValidateEmailResponse()}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c7fcca54b68a081f0dddc50d1b36949ed26fc75"}, "originalPosition": 226}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84ca6d8c239dc0cfd2d9691d2acfb1d8474d3a38", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/84ca6d8c239dc0cfd2d9691d2acfb1d8474d3a38", "committedDate": "2020-08-21T14:25:48Z", "message": "Confirm that a user cannot update their own contact email via updateAccountProperties()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48e378b266ff1e243ee27a72a62ef86246e8b4cb", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/48e378b266ff1e243ee27a72a62ef86246e8b4cb", "committedDate": "2020-08-21T15:25:59Z", "message": "rename validateEmailError and validateEmailResponse"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3cc3bee332797f034aa477fa4e61868adc6243af", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/3cc3bee332797f034aa477fa4e61868adc6243af", "committedDate": "2020-08-21T15:58:00Z", "message": "Set unused members of AccountPropertyUpdate to null explicitly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "705297d740132a2086ce34196b387891c3b93ed7", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/705297d740132a2086ce34196b387891c3b93ed7", "committedDate": "2020-08-21T15:59:57Z", "message": "replace function calls with functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35980098950b2ef3c4919ae60baf48abc7b7ba1b", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/35980098950b2ef3c4919ae60baf48abc7b7ba1b", "committedDate": "2020-08-21T16:39:43Z", "message": "revert prev chg"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNjU4MTc2", "url": "https://github.com/all-of-us/workbench/pull/3901#pullrequestreview-472658176", "createdAt": "2020-08-21T17:15:51Z", "commit": {"oid": "35980098950b2ef3c4919ae60baf48abc7b7ba1b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "897a63141e8760e23ab0db13b4d02ecf4f914fb0", "author": {"user": {"login": "jmthibault79", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/897a63141e8760e23ab0db13b4d02ecf4f914fb0", "committedDate": "2020-08-21T17:41:40Z", "message": "functional component EmailValidationErrorMessage"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4301, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}