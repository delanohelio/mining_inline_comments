{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxNDQ3OTk5", "number": 3801, "title": "[RW-5264, RW-5266][risk=no] Reporting PoC payload objects and service", "bodyText": "Initial classes and services for reporting. Highlights:\n\nA ReportingService class responsible for gathering the information and building a payload for BigQuery\nValue classes (generated for convenience in Swagger) for the columns we need. Currently just researcher adn workspce tables (2-3 columns each)\na method to capture a timestamp to use as a partition key (potentially)\nendpoint for kicking off the upload, to serve as cron target\nunit test class\n\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally\n I have run the E2E tests on ths change against my local UI + API server with yarn test:local\n If this includes a UI change, I have taken screen recordings or screenshots of the new behavior and notified the PO and UX designer\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-07-17T20:42:46Z", "url": "https://github.com/all-of-us/workbench/pull/3801", "merged": true, "mergeCommit": {"oid": "3360f5c93c37119e42e078715dcec83f64d8a6ff"}, "closed": true, "closedAt": "2020-07-20T19:46:08Z", "author": {"login": "jaycarlton"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1m3KngH2gAyNDUxNDQ3OTk5OjJhMmE3OWVmMDkyODBiYzRhMzNhYzQ3ZGRjZTEyZGM1NjgyZTcwM2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc20tIUgFqTQ1MTc5NDYwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2a2a79ef09280bc4a33ac47ddce12dc5682e703f", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/2a2a79ef09280bc4a33ac47ddce12dc5682e703f", "committedDate": "2020-07-16T22:20:43Z", "message": "first working test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d70a84897ef66c824ead6562f7557a7a591110cb", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/d70a84897ef66c824ead6562f7557a7a591110cb", "committedDate": "2020-07-17T13:58:50Z", "message": "workspace stuff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b73d04e4cfd685358db42f549b294a2b6b8aa41", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/2b73d04e4cfd685358db42f549b294a2b6b8aa41", "committedDate": "2020-07-17T19:11:46Z", "message": " Merge branch 'master' into jaycarlton/RW-5199"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee16d5d774d28a852aa0de023e67512ea5ae1776", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/ee16d5d774d28a852aa0de023e67512ea5ae1776", "committedDate": "2020-07-17T20:36:00Z", "message": "progress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56e9aa692b060e84f8a8c2943013feec33c06191", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/56e9aa692b060e84f8a8c2943013feec33c06191", "committedDate": "2020-07-17T20:38:23Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e17eefd8c860898fcfe2538021a81ee9592809f", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/6e17eefd8c860898fcfe2538021a81ee9592809f", "committedDate": "2020-07-20T14:46:54Z", "message": "Merge branch 'master' into jaycarlton/RW-5199"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8cabb2775ec6871681a9dbbe72764bdfac54738", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/c8cabb2775ec6871681a9dbbe72764bdfac54738", "committedDate": "2020-07-20T15:01:44Z", "message": "use long timestamp b/c joda-time is obsolete and we don't want to change the codegen config just yet"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNzAyODc4", "url": "https://github.com/all-of-us/workbench/pull/3801#pullrequestreview-451702878", "createdAt": "2020-07-20T15:13:12Z", "commit": {"oid": "c8cabb2775ec6871681a9dbbe72764bdfac54738"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxNToxMzoxMlrOG0SXEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxNToxNzoxNlrOG0SnMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQ3OTk1NQ==", "bodyText": "Please clarify whether this includes the domain", "url": "https://github.com/all-of-us/workbench/pull/3801#discussion_r457479955", "createdAt": "2020-07-20T15:13:12Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/resources/workbench-api.yaml", "diffHunk": "@@ -7711,3 +7729,60 @@ definitions:\n         description: Datetime at creation of this user's accont\n         type: string\n         format: date-time\n+  ReportingResearcher:\n+    description: >\n+      Payload for the researcher table in the BigQuery reporting dataset.\n+    type: object\n+    properties:\n+      username:\n+        description: Username (GSuite)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8cabb2775ec6871681a9dbbe72764bdfac54738"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQ4MjI3Ng==", "bodyText": "Which elements are required for each of these structures?  We can add that in a required section.", "url": "https://github.com/all-of-us/workbench/pull/3801#discussion_r457482276", "createdAt": "2020-07-20T15:15:26Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/resources/workbench-api.yaml", "diffHunk": "@@ -7711,3 +7729,60 @@ definitions:\n         description: Datetime at creation of this user's accont\n         type: string\n         format: date-time\n+  ReportingResearcher:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8cabb2775ec6871681a9dbbe72764bdfac54738"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQ4NDA4Mw==", "bodyText": "these are both public in the impl", "url": "https://github.com/all-of-us/workbench/pull/3801#discussion_r457484083", "createdAt": "2020-07-20T15:17:16Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/reporting/ReportingService.java", "diffHunk": "@@ -0,0 +1,11 @@\n+package org.pmiops.workbench.reporting;\n+\n+import com.google.common.annotations.VisibleForTesting;\n+import org.pmiops.workbench.model.ReportingSnapshot;\n+\n+public interface ReportingService {\n+  @VisibleForTesting\n+  ReportingSnapshot getSnapshot();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8cabb2775ec6871681a9dbbe72764bdfac54738"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acd65a51eb5b6c875077f759cf6a4d841612bbb0", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/acd65a51eb5b6c875077f759cf6a4d841612bbb0", "committedDate": "2020-07-20T15:47:25Z", "message": "fixes & linting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNzk0NjA0", "url": "https://github.com/all-of-us/workbench/pull/3801#pullrequestreview-451794604", "createdAt": "2020-07-20T17:02:21Z", "commit": {"oid": "acd65a51eb5b6c875077f759cf6a4d841612bbb0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4468, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}