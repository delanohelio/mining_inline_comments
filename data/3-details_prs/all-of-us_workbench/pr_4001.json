{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2ODIwNDUw", "number": 4001, "title": "[no ticket][risk=no] Puppeteer: Generic function for rename resource", "bodyText": "Generic Data resource rename function to replace different rename functions for Dataset, Notebook, Cohort, Cohort Review and Concept Set resources.", "createdAt": "2020-09-14T19:00:41Z", "url": "https://github.com/all-of-us/workbench/pull/4001", "merged": true, "mergeCommit": {"oid": "ff61cc2c7e73f1eee11e8fdddd1361843b600e4e"}, "closed": true, "closedAt": "2020-09-14T21:16:32Z", "author": {"login": "aweng98"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdI3vjegH2gAyNDg2ODIwNDUwOjY0YjIwYTkzMGI2NWJmZmZiOGE4ODIzZThlNGNmZGQzNmQyOThmNGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdI5OsWAH2gAyNDg2ODIwNDUwOjc1MmI5MzFkZGIzZmJjMzEyYjFkNTY5Y2Q5YzY2MWNiMTM5ODU2MDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "64b20a930b65bfffb8a8823e8e4cfdd36d298f4e", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/64b20a930b65bfffb8a8823e8e4cfdd36d298f4e", "committedDate": "2020-09-14T18:45:21Z", "message": "generic function for rename resource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97d1909d6c0f7381db35948f44b59b392291a876", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/97d1909d6c0f7381db35948f44b59b392291a876", "committedDate": "2020-09-14T19:06:58Z", "message": "additional refactor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MDY2MDQy", "url": "https://github.com/all-of-us/workbench/pull/4001#pullrequestreview-488066042", "createdAt": "2020-09-14T19:11:46Z", "commit": {"oid": "97d1909d6c0f7381db35948f44b59b392291a876"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxOToxMTo0NlrOHRi_Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxOToxMjozMVrOHRjA-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODE2MTA3NQ==", "bodyText": "Why return the new name if we're passing it in to begin with?", "url": "https://github.com/all-of-us/workbench/pull/4001#discussion_r488161075", "createdAt": "2020-09-14T19:11:46Z", "author": {"login": "jaycarlton"}, "path": "e2e/app/page/workspace-base.ts", "diffHunk": "@@ -141,4 +146,69 @@ export default abstract class WorkspaceBase extends AuthenticatedPage {\n     return modalTextContent;\n   }\n \n+  /**\n+   * Rename Notebook, Concept Set, Dataset or Cohorts thru the Ellipsis menu located inside the Dataset Resource card.\n+   * @param {string} resourceName\n+   * @param {string} newResourceName", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97d1909d6c0f7381db35948f44b59b392291a876"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODE2MTUzMA==", "bodyText": "can this just be a map?", "url": "https://github.com/all-of-us/workbench/pull/4001#discussion_r488161530", "createdAt": "2020-09-14T19:12:31Z", "author": {"login": "jaycarlton"}, "path": "e2e/app/page/workspace-base.ts", "diffHunk": "@@ -141,4 +146,69 @@ export default abstract class WorkspaceBase extends AuthenticatedPage {\n     return modalTextContent;\n   }\n \n+  /**\n+   * Rename Notebook, Concept Set, Dataset or Cohorts thru the Ellipsis menu located inside the Dataset Resource card.\n+   * @param {string} resourceName\n+   * @param {string} newResourceName\n+   */\n+  async renameResource(resourceName: string, newResourceName: string, resourceType: ResourceCard): Promise<string[]> {\n+    // Find the Data resource card that match the resource name.\n+    const resourceCard = new DataResourceCard(this.page);\n+    const card = await resourceCard.findCard(resourceName, resourceType);\n+    if (!card) {\n+      throw new Error(`Failed to find ${resourceType} card \"${resourceName}\"`);\n+    }\n+\n+    let menuLink: EllipsisMenuAction;\n+    switch (resourceType) {\n+      case ResourceCard.Dataset:\n+        menuLink = EllipsisMenuAction.RenameDataset;\n+        break;\n+      default:\n+        menuLink = EllipsisMenuAction.Rename;\n+        break;\n+    }\n+    await card.clickEllipsisAction(menuLink, {waitForNav: false});\n+\n+    const modal = new Modal(this.page);\n+    await modal.waitForLoad();\n+\n+    const modalTextContents = await modal.getTextContent();\n+\n+    // Type new name.\n+    const newNameTextbox = new Textbox(this.page, `${modal.getXpath()}//*[@id=\"new-name\"]`);\n+    await newNameTextbox.type(newResourceName);\n+\n+    // Type description.\n+    const descriptionTextarea = await Textarea.findByName(this.page, {containsText: 'Description:'}, modal);\n+    await descriptionTextarea.type(`Puppeteer automation test. Rename ${resourceName}.`);\n+\n+    let buttonLink;\n+    switch (resourceType) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97d1909d6c0f7381db35948f44b59b392291a876"}, "originalPosition": 79}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "752b931ddb3fbc312b1d569cd9c661cb13985608", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/752b931ddb3fbc312b1d569cd9c661cb13985608", "committedDate": "2020-09-14T20:29:16Z", "message": "delete notebook fix"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4221, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}