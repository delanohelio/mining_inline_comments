{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyNzg5NzQy", "number": 3387, "title": "[RW-4749][risk=no] Add Google Analytics for Registration pages", "bodyText": "Add Google Analytics for events on registration pages.\nEvents based off the Registration tab of the workbench analytics doc\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n I have run and tested this change locally", "createdAt": "2020-04-13T19:05:17Z", "url": "https://github.com/all-of-us/workbench/pull/3387", "merged": true, "mergeCommit": {"oid": "efff40677baf96f29b9b2d8923c94bbbd4b4e9b8"}, "closed": true, "closedAt": "2020-04-15T16:46:06Z", "author": {"login": "dolbeew"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXYKZUgFqTM5MjUxODE5OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX6kslgBqjMyMzYyNjYyMzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNTE4MTk5", "url": "https://github.com/all-of-us/workbench/pull/3387#pullrequestreview-392518199", "createdAt": "2020-04-14T00:05:27Z", "commit": {"oid": "3dd42c6aa01be486991225b868d3c6244be4a673"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwMDowNToyN1rOGE5c8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwMDoxNDozMVrOGE5nSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzc4ODc4Ng==", "bodyText": "\ud83e\udd86", "url": "https://github.com/all-of-us/workbench/pull/3387#discussion_r407788786", "createdAt": "2020-04-14T00:05:27Z", "author": {"login": "calbach"}, "path": "ui/src/app/pages/homepage/registration-dashboard.tsx", "diffHunk": "@@ -137,7 +141,10 @@ export const getRegistrationTasks = () => serverConfigStore.getValue() ? ([\n     completionTimestamp: (profile: Profile) => {\n       return profile.dataUseAgreementCompletionTime || profile.dataUseAgreementBypassTime;\n     },\n-    onClick: () => navigate(['data-code-of-conduct'])\n+    onClick: () => {\n+      AnalyticsTracker.Registration.EnterDUCC();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3dd42c6aa01be486991225b868d3c6244be4a673"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzc5MDU5Nw==", "bodyText": "nit: For separation of responsibilities, I'd probably put this in the onSubmit callback below - since the createAccount method has no direct relationship to the demographics survey as a step", "url": "https://github.com/all-of-us/workbench/pull/3387#discussion_r407790597", "createdAt": "2020-04-14T00:11:48Z", "author": {"login": "calbach"}, "path": "ui/src/app/pages/login/account-creation/account-creation-survey.tsx", "diffHunk": "@@ -35,6 +37,7 @@ export class AccountCreationSurvey extends React.Component<AccountCreationSurvey\n     const {invitationKey, termsOfServiceVersion, onComplete} = this.props;\n \n     try {\n+      AnalyticsTracker.Registration.DemographicSurvey();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3dd42c6aa01be486991225b868d3c6244be4a673"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzc5MTQzMw==", "bodyText": "You can view this page from the profile as well. Does it make sense this bump this up to a higher level callback in the registration flow instead? Since the metric is registration specific", "url": "https://github.com/all-of-us/workbench/pull/3387#discussion_r407791433", "createdAt": "2020-04-14T00:14:31Z", "author": {"login": "calbach"}, "path": "ui/src/app/pages/profile/data-user-code-of-conduct.tsx", "diffHunk": "@@ -231,6 +232,7 @@ export const DataUserCodeOfConduct = withUserProfile()(\n                       data-test-id={'submit-ducc-button'}\n                       disabled={errors || submitting}\n                       onClick={() => {\n+                        AnalyticsTracker.Registration.AcceptDUCC();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3dd42c6aa01be486991225b868d3c6244be4a673"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "75a0a8c78aa8168417352765d1d75e515971c755", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/75a0a8c78aa8168417352765d1d75e515971c755", "committedDate": "2020-04-14T18:41:22Z", "message": "RW-4749 pr feedback"}, "afterCommit": {"oid": "7f024e8176d46bce731f1f82d816595f6ff3a5ab", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/7f024e8176d46bce731f1f82d816595f6ff3a5ab", "committedDate": "2020-04-14T18:47:05Z", "message": "RW-4749 pr feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMjEwNzYz", "url": "https://github.com/all-of-us/workbench/pull/3387#pullrequestreview-393210763", "createdAt": "2020-04-14T18:59:57Z", "commit": {"oid": "7f024e8176d46bce731f1f82d816595f6ff3a5ab"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxODo1OTo1N1rOGFcrYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxODo1OTo1N1rOGFcrYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM2NTkyMQ==", "bodyText": "OK, maybe just leave a comment for now. I think the flow from the profile page may still be a bit in flux so I don't know how well this models the desired end state, or if we should consider that behavior a bug; @als364 probably knows the state of this.", "url": "https://github.com/all-of-us/workbench/pull/3387#discussion_r408365921", "createdAt": "2020-04-14T18:59:57Z", "author": {"login": "calbach"}, "path": "ui/src/app/pages/profile/data-user-code-of-conduct.tsx", "diffHunk": "@@ -231,6 +232,7 @@ export const DataUserCodeOfConduct = withUserProfile()(\n                       data-test-id={'submit-ducc-button'}\n                       disabled={errors || submitting}\n                       onClick={() => {\n+                        AnalyticsTracker.Registration.AcceptDUCC();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzc5MTQzMw=="}, "originalCommit": {"oid": "3dd42c6aa01be486991225b868d3c6244be4a673"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a28fc27fa3fd3e96836d58c6858dc9f4a5377b2f", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/a28fc27fa3fd3e96836d58c6858dc9f4a5377b2f", "committedDate": "2020-04-15T16:20:21Z", "message": "RW-4749 add google analytics for registration events"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6845038475bb008a6e22c9dd1bf1191b6acc81fd", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/6845038475bb008a6e22c9dd1bf1191b6acc81fd", "committedDate": "2020-04-15T16:20:21Z", "message": "RW-4749 pr feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4fb0d0b1d514dd29d6382df1944bda339eafd92", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/e4fb0d0b1d514dd29d6382df1944bda339eafd92", "committedDate": "2020-04-15T16:20:21Z", "message": "RW-4749 add comment at DUCC accept event"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7f024e8176d46bce731f1f82d816595f6ff3a5ab", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/7f024e8176d46bce731f1f82d816595f6ff3a5ab", "committedDate": "2020-04-14T18:47:05Z", "message": "RW-4749 pr feedback"}, "afterCommit": {"oid": "e4fb0d0b1d514dd29d6382df1944bda339eafd92", "author": {"user": null}, "url": "https://github.com/all-of-us/workbench/commit/e4fb0d0b1d514dd29d6382df1944bda339eafd92", "committedDate": "2020-04-15T16:20:21Z", "message": "RW-4749 add comment at DUCC accept event"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3155, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}