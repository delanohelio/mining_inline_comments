{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5NzYyMzU0", "number": 3895, "title": "[no ticket][risk=no] Run puppeteer tests in staging", "bodyText": "Updates and changes to allow Puppeteer tests run in staging env.\nci test results against staging: https://app.circleci.com/pipelines/github/all-of-us/workbench/3085/workflows/ab7f5488-44a0-4de0-b52f-d0f1f2e8070c/jobs/94631", "createdAt": "2020-08-18T21:43:53Z", "url": "https://github.com/all-of-us/workbench/pull/3895", "merged": true, "mergeCommit": {"oid": "810db01217d30d18a0911e444c8ac04033a739da"}, "closed": true, "closedAt": "2020-08-21T14:20:26Z", "author": {"login": "aweng98"}, "timelineItems": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAiUwqgBqjM2NzI2MzkzNjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdA8P6NgH2gAyNDY5NzYyMzU0OjM3NmFlMThjY2E0Yzg3OTM1MDc3MDE2NjZkYTc2YTY3ZTk3YWZmMjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f9f6f791bc88b8456de68d563431d9447ddcfd1e", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/f9f6f791bc88b8456de68d563431d9447ddcfd1e", "committedDate": "2020-08-19T14:19:38Z", "message": "fix broken test"}, "afterCommit": {"oid": "e7263d1d7ad67f62251e028bcf22deff2b9dc87e", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/e7263d1d7ad67f62251e028bcf22deff2b9dc87e", "committedDate": "2020-08-19T21:16:21Z", "message": "enable tests in staging"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e7263d1d7ad67f62251e028bcf22deff2b9dc87e", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/e7263d1d7ad67f62251e028bcf22deff2b9dc87e", "committedDate": "2020-08-19T21:16:21Z", "message": "enable tests in staging"}, "afterCommit": {"oid": "bb6cd670e47830912face667bf3e7adf4d613977", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/bb6cd670e47830912face667bf3e7adf4d613977", "committedDate": "2020-08-19T22:16:22Z", "message": "rebase master branch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b50b1fd97b35c5dda6e71056a046c8402c8776fb", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/b50b1fd97b35c5dda6e71056a046c8402c8776fb", "committedDate": "2020-08-20T03:15:58Z", "message": "run tests in staging"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d888fc83130c19101d8ce099434d6a8366376e2", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/7d888fc83130c19101d8ce099434d6a8366376e2", "committedDate": "2020-08-20T03:13:55Z", "message": "more"}, "afterCommit": {"oid": "b50b1fd97b35c5dda6e71056a046c8402c8776fb", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/b50b1fd97b35c5dda6e71056a046c8402c8776fb", "committedDate": "2020-08-20T03:15:58Z", "message": "run tests in staging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13e2ef3d5653b06e5f6fbb427db755674c6724ea", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/13e2ef3d5653b06e5f6fbb427db755674c6724ea", "committedDate": "2020-08-20T03:49:05Z", "message": "rever pickWorkspace"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMDg5MjQ1", "url": "https://github.com/all-of-us/workbench/pull/3895#pullrequestreview-471089245", "createdAt": "2020-08-20T02:42:02Z", "commit": {"oid": "d4ae2e44b29a13e3733fd6f762af10b49e4eb45f"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwMjo0MjowMlrOHDndhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwMzoxODowMlrOHDoA2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU1NDMwOQ==", "bodyText": "Homepage isn't always the landing page after login. For example, a user could have entered workspace url directly.", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r473554309", "createdAt": "2020-08-20T02:42:02Z", "author": {"login": "aweng98"}, "path": "e2e/app/page/google-login.ts", "diffHunk": "@@ -132,17 +131,17 @@ export default class GoogleLoginPage {\n     // Sometimes, user is prompted with \"Enter Recovery Email\" page. Handle the page if found.\n     const recoverEmailXpath = '//input[@type=\"email\" and @aria-label=\"Enter recovery email address\"]';\n     await Promise.race([\n-      waitForDocumentTitle(this.page, 'Homepage'),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4ae2e44b29a13e3733fd6f762af10b49e4eb45f"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU2MzM1NA==", "bodyText": "It is not enabled in staging workflow because the automation script that delete workspaces and billing projects are not working in staging.", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r473563354", "createdAt": "2020-08-20T03:18:02Z", "author": {"login": "aweng98"}, "path": ".circleci/config.yml", "diffHunk": "@@ -659,6 +691,11 @@ workflows:\n             - api-deps-check\n             - api-integration-test\n             - ui-unit-test\n+      # Not ready\n+      # - puppeteer-e2e-test-staging:\n+          # filters: *filter_only_release_tags\n+          # requires:\n+            # - deploy-staging", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b50b1fd97b35c5dda6e71056a046c8402c8776fb"}, "originalPosition": 85}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMTM5NzE4", "url": "https://github.com/all-of-us/workbench/pull/3895#pullrequestreview-471139718", "createdAt": "2020-08-20T03:54:22Z", "commit": {"oid": "13e2ef3d5653b06e5f6fbb427db755674c6724ea"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwMzo1NDoyM1rOHDojdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwMzo1NDoyM1rOHDojdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3MjIxNQ==", "bodyText": "Reminder to myself: Remove this call in workflow before merge to master branch.", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r473572215", "createdAt": "2020-08-20T03:54:23Z", "author": {"login": "aweng98"}, "path": ".circleci/config.yml", "diffHunk": "@@ -625,6 +654,9 @@ workflows:\n           requires:\n             - api-deploy-to-test\n             - ui-deploy-to-test\n+      - puppeteer-e2e-test-staging", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13e2ef3d5653b06e5f6fbb427db755674c6724ea"}, "originalPosition": 71}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c68ed5badd8cd4e5867e4a5ec8085ff0dc71be42", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/c68ed5badd8cd4e5867e4a5ec8085ff0dc71be42", "committedDate": "2020-08-20T15:16:48Z", "message": "circleci config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/52d70262fcd8e1eba3f0a22c1374c0dcd22cca68", "committedDate": "2020-08-20T15:50:05Z", "message": "circleci config change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxODM1NDU1", "url": "https://github.com/all-of-us/workbench/pull/3895#pullrequestreview-471835455", "createdAt": "2020-08-20T17:29:48Z", "commit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNzoyOTo0OFrOHEMKlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODowOTozNlrOHENfXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE1NTY2OA==", "bodyText": "what do these changes have to do with running the tests in staging?", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r474155668", "createdAt": "2020-08-20T17:29:48Z", "author": {"login": "als364"}, "path": "e2e/app/element/select.ts", "diffHunk": "@@ -23,18 +23,26 @@ export default class Select extends BaseElement {\n     super(page, xpath);\n   }\n \n-  async selectOption(optionValue: string): Promise<string> {\n+  async selectOption(value: string): Promise<string> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE3NzM3Mg==", "bodyText": "What do these changes have to do with running tests in staging?", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r474177372", "createdAt": "2020-08-20T18:09:36Z", "author": {"login": "als364"}, "path": "e2e/app/page/workspace-edit-page.ts", "diffHunk": "@@ -245,6 +245,13 @@ export default class WorkspaceEditPage extends AuthenticatedPage {\n     }\n   }\n \n+  /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxODY5NTY3", "url": "https://github.com/all-of-us/workbench/pull/3895#pullrequestreview-471869567", "createdAt": "2020-08-20T18:18:27Z", "commit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODoxODoyN1rOHENx4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODoyNzowM1rOHEOEmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4MjExMw==", "bodyText": "The original way of finding select option is relying on the value. however, values are different for the Dataset on test and staging. see screenshots below. I had to change it to use displayed texts instead of value.\ntest env.\n\nstaging env.", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r474182113", "createdAt": "2020-08-20T18:18:27Z", "author": {"login": "aweng98"}, "path": "e2e/app/element/select.ts", "diffHunk": "@@ -23,18 +23,26 @@ export default class Select extends BaseElement {\n     super(page, xpath);\n   }\n \n-  async selectOption(optionValue: string): Promise<string> {\n+  async selectOption(value: string): Promise<string> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE1NTY2OA=="}, "originalCommit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4MzU4OA==", "bodyText": "result of changes in Select class.", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r474183588", "createdAt": "2020-08-20T18:21:00Z", "author": {"login": "aweng98"}, "path": "e2e/app/page/workspace-edit-page.ts", "diffHunk": "@@ -245,6 +245,13 @@ export default class WorkspaceEditPage extends AuthenticatedPage {\n     }\n   }\n \n+  /**", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE3NzM3Mg=="}, "originalCommit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NDU2Ng==", "bodyText": "In staging, there is a enabled UI feature flag which is disabled in test.\nUI behaviors are different as result. I had to modify this test so it works in both env.", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r474184566", "createdAt": "2020-08-20T18:22:52Z", "author": {"login": "aweng98"}, "path": "e2e/tests/cohorts/cohorts-rename.spec.ts", "diffHunk": "@@ -43,24 +43,27 @@ describe('User can create, modify, rename and delete Cohort', () => {\n     const minAge = 21;\n     const maxAge = 95;\n     const group1 = cohortBuildPage.findIncludeParticipantsGroup('Group 1');\n-    const group1Count = await group1.includeAge(minAge, maxAge);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NjkwNA==", "bodyText": "Changes here also for running test consistently in both env. In test env, all existing workspaces were created using Synthetic Dataset 3. In staging env, most of existing workspaces were created on Synthetic Dataset 1. Reusing Synthetic Dataset 1 workspaces are causing problems. So the solution is modify the test code - create new workspaces.", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r474186904", "createdAt": "2020-08-20T18:27:03Z", "author": {"login": "aweng98"}, "path": "e2e/tests/conceptsets/conceptset-edit.spec.ts", "diffHunk": "@@ -98,28 +95,14 @@ describe('Editing and Copying Concept Sets', () => {\n   /**\n    * Test:\n    * - Copy Concept Set from one workspace to another workspace.\n-   * Note: Use existing workspaces and Concept Set when possible. Otherwise create new workspaces and Concept Sets.\n    */\n   test('Copy Concept Set to another workspace', async () => {\n-    // Find all workspaces.\n-    const workspaceCard = new WorkspaceCard(page);\n-    const allWorkspaces = await workspaceCard.getWorkspaceMatchAccessLevel(WorkspaceAccessLevel.Owner);\n-\n-    // Need two workspaces.\n-    let workspace1: WorkspaceCard;\n-    let workspace2: WorkspaceCard;\n-\n-    if (allWorkspaces.length > 1) {\n-      workspace1 = allWorkspaces[0];\n-      workspace2 = allWorkspaces[1];\n-    } else {\n-      // Don't have two. Create two new workspaces.\n-      workspace1 = await findWorkspace(page, true);\n-      workspace2 = await findWorkspace(page, true);\n-    }\n-\n-    // Note: workspace1 is the Copy to workspace. workspace2 is the Copy from workspace.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxODc4MzI0", "url": "https://github.com/all-of-us/workbench/pull/3895#pullrequestreview-471878324", "createdAt": "2020-08-20T18:30:47Z", "commit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODozMDo0N1rOHEOM3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODozMDo0N1rOHEOM3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4OTAyMQ==", "bodyText": "unrelated change. while running and inspecting test code, I realized 3 lines of code can be rewritten in one line.", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r474189021", "createdAt": "2020-08-20T18:30:47Z", "author": {"login": "aweng98"}, "path": "e2e/tests/conceptsets/conceptset-edit.spec.ts", "diffHunk": "@@ -26,9 +25,7 @@ describe('Editing and Copying Concept Sets', () => {\n    */\n   test('Add to existing Concept Set in same workspace', async () => {\n     // Create a workspace\n-    const workspaceCard = await findWorkspace(page, true);\n-    const workspaceName = await workspaceCard.getWorkspaceName();\n-    await workspaceCard.clickWorkspaceName();\n+    const workspaceName = await findWorkspace(page, true).then(card => card.clickWorkspaceName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxODc5MDk0", "url": "https://github.com/all-of-us/workbench/pull/3895#pullrequestreview-471879094", "createdAt": "2020-08-20T18:31:51Z", "commit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODozMTo1MVrOHEOPIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODozMTo1MVrOHEOPIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4OTYwMA==", "bodyText": "Avoid finding and using Synthetic Dataset 1 workspaces.", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r474189600", "createdAt": "2020-08-20T18:31:51Z", "author": {"login": "aweng98"}, "path": "e2e/tests/workspace/workspace-edit.spec.ts", "diffHunk": "@@ -20,10 +20,17 @@ describe('Editing workspace thru workspace card ellipsis menu', () => {\n    * - Verify Workspace Information in ABOUT tab.\n    */\n   test('User as OWNER can edit workspace', async () => {\n-    const workspaceCard = await findWorkspace(page);\n+    const workspaceCard = await findWorkspace(page, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxOTM5OTI2", "url": "https://github.com/all-of-us/workbench/pull/3895#pullrequestreview-471939926", "createdAt": "2020-08-20T19:54:29Z", "commit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxOTo1NDoyOVrOHERH1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxOTo1NDoyOVrOHERH1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIzNjg4NQ==", "bodyText": "what flag is it? is it possible to condition the behavior of this test on the feature flag? how come these changes work on both staging and test?", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r474236885", "createdAt": "2020-08-20T19:54:29Z", "author": {"login": "als364"}, "path": "e2e/tests/cohorts/cohorts-rename.spec.ts", "diffHunk": "@@ -43,24 +43,27 @@ describe('User can create, modify, rename and delete Cohort', () => {\n     const minAge = 21;\n     const maxAge = 95;\n     const group1 = cohortBuildPage.findIncludeParticipantsGroup('Group 1');\n-    const group1Count = await group1.includeAge(minAge, maxAge);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NDU2Ng=="}, "originalCommit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxOTczMDk0", "url": "https://github.com/all-of-us/workbench/pull/3895#pullrequestreview-471973094", "createdAt": "2020-08-20T20:46:07Z", "commit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMDAwNDI0", "url": "https://github.com/all-of-us/workbench/pull/3895#pullrequestreview-472000424", "createdAt": "2020-08-20T21:31:33Z", "commit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQyMTozMTozNFrOHEUAnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQyMTozMzo0OFrOHEUElQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDI4NDE4OA==", "bodyText": "Our test environment is called \"test\"", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r474284188", "createdAt": "2020-08-20T21:31:34Z", "author": {"login": "calbach"}, "path": ".circleci/config.yml", "diffHunk": "@@ -205,12 +205,25 @@ commands:\n \n   run_e2e_test:\n     description: \"Run puppeteer e2e integration tests\"\n+    parameters:\n+      env_name:\n+        description: The target environment for run Puppeteer tests. Must be one of \"dev\", \"staging\".\n+        default: \"dev\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDI4NTA1NA==", "bodyText": "Would prefer a consistent naming convention for these, e.g.\nPUPPETEER_USER_STAGING\nPUPPETEER_USER_TEST", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r474285054", "createdAt": "2020-08-20T21:33:29Z", "author": {"login": "calbach"}, "path": ".circleci/config.yml", "diffHunk": "@@ -205,12 +205,25 @@ commands:\n \n   run_e2e_test:\n     description: \"Run puppeteer e2e integration tests\"\n+    parameters:\n+      env_name:\n+        description: The target environment for run Puppeteer tests. Must be one of \"dev\", \"staging\".\n+        default: \"dev\"\n+        type: enum\n+        enum: [\"dev\", \"staging\"]\n     steps:\n       - install_e2e_dependencies\n       - run:\n-          name: Update Puppeteer test environment variables\n+          name: Update test user email env variable\n+          command: |\n+            case << parameters.env_name >> in\n+              staging) echo 'export USER_NAME=$PUPPETEER_TEST_USER_STAGING' >> $BASH_ENV ;;\n+              dev) echo 'export USER_NAME=$PUPPETEER_TEST_USER' >> $BASH_ENV ;;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDI4NTIwNQ==", "bodyText": "dev -> test", "url": "https://github.com/all-of-us/workbench/pull/3895#discussion_r474285205", "createdAt": "2020-08-20T21:33:48Z", "author": {"login": "calbach"}, "path": ".circleci/config.yml", "diffHunk": "@@ -565,21 +579,29 @@ jobs:\n       - manage_api_cache:\n           save: true\n \n-  # Run Puppeteer e2e UI tests on deployed \"test\" environment.\n+  # Run Puppeteer e2e UI tests on deployed \"test\" or \"staging\" environment.\n   puppeteer-e2e-test:\n+    parameters:\n+      env_name:\n+        description: The target environment for run Puppeteer tests. Must be one of \"dev\", \"staging\".\n+        default: \"dev\"\n+        type: enum\n+        enum: [\"dev\", \"staging\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52d70262fcd8e1eba3f0a22c1374c0dcd22cca68"}, "originalPosition": 57}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb9679a90bca08786c88a4186cff3711e2c21e74", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/fb9679a90bca08786c88a4186cff3711e2c21e74", "committedDate": "2020-08-20T23:39:11Z", "message": "PR feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e494ddb2e774f8e0db40f04f7c390857fe95e529", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/e494ddb2e774f8e0db40f04f7c390857fe95e529", "committedDate": "2020-08-21T00:14:54Z", "message": "minor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bfaf8ac597dfd63a7330615d7ed88a114735418", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/3bfaf8ac597dfd63a7330615d7ed88a114735418", "committedDate": "2020-08-21T01:10:54Z", "message": "enum value: local"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdcb08334274e20ac03002156a058599dad94563", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/fdcb08334274e20ac03002156a058599dad94563", "committedDate": "2020-08-21T02:04:19Z", "message": "test env"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ebe39fd1bd17c87ad5bf45be28c3ad3baa39910", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/2ebe39fd1bd17c87ad5bf45be28c3ad3baa39910", "committedDate": "2020-08-21T02:05:47Z", "message": "test env"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "114358b84b9360aa9f16b85f7dd49a23d2aaab27", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/114358b84b9360aa9f16b85f7dd49a23d2aaab27", "committedDate": "2020-08-21T02:27:16Z", "message": "revert test change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ec51d73f1c1f7acdd7e70154704f8a7b823be9f", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/6ec51d73f1c1f7acdd7e70154704f8a7b823be9f", "committedDate": "2020-08-21T02:54:58Z", "message": "ci testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98bae7c827cead9472f74d27a37883fecae6836e", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/98bae7c827cead9472f74d27a37883fecae6836e", "committedDate": "2020-08-21T03:22:31Z", "message": "ci testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae5bdcc8e244d5e8e7052242c36c59a35a753474", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/ae5bdcc8e244d5e8e7052242c36c59a35a753474", "committedDate": "2020-08-21T03:23:16Z", "message": "ci testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "376ae18cca4c8793507701666da76a67e97aff20", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/376ae18cca4c8793507701666da76a67e97aff20", "committedDate": "2020-08-21T03:28:55Z", "message": "revert"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4293, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}