{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg0MTA1NTkx", "number": 3988, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNzoxOTo1MVrOEiN4jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNzoyMDoyOFrOEiN5gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MzE0NTEwOnYy", "diffSide": "RIGHT", "path": "api/genomics/wdl/RandomizeVcf/Dockerfile", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNzoxOTo1MVrOHP-HAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNzoyNjo0NVrOHP-W4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUwODI5MA==", "bodyText": "We can probably get rid of most of these comments as they're related to Circle", "url": "https://github.com/all-of-us/workbench/pull/3988#discussion_r486508290", "createdAt": "2020-09-10T17:19:51Z", "author": {"login": "ericsong"}, "path": "api/genomics/wdl/RandomizeVcf/Dockerfile", "diffHunk": "@@ -0,0 +1,39 @@\n+# To build and deploy, from this directory:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19783d8d4c0d17d5affec988952fcc6486a36678"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUxMjM1NA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/all-of-us/workbench/pull/3988#discussion_r486512354", "createdAt": "2020-09-10T17:26:45Z", "author": {"login": "als364"}, "path": "api/genomics/wdl/RandomizeVcf/Dockerfile", "diffHunk": "@@ -0,0 +1,39 @@\n+# To build and deploy, from this directory:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUwODI5MA=="}, "originalCommit": {"oid": "19783d8d4c0d17d5affec988952fcc6486a36678"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MzE0NzUzOnYy", "diffSide": "RIGHT", "path": "api/genomics/wdl/IngestSyntheticVcfWf.wdl", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNzoyMDoyOFrOHP-Ihg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNzoyODowN1rOHP-Z0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUwODY3OA==", "bodyText": "should we specify CPU as well?", "url": "https://github.com/all-of-us/workbench/pull/3988#discussion_r486508678", "createdAt": "2020-09-10T17:20:28Z", "author": {"login": "ericsong"}, "path": "api/genomics/wdl/IngestSyntheticVcfWf.wdl", "diffHunk": "@@ -0,0 +1,84 @@\n+version 1.0\n+\n+workflow IngestSyntheticVcfWf {\n+  input {\n+    File base_vcf\n+    File base_vcf_index\n+    File file_of_sample_names\n+    String output_file\n+  }\n+\n+  call CountSamples {\n+    input:\n+      file_of_sample_names = file_of_sample_names\n+  }\n+\n+  call RandomizeVcf {\n+    input:\n+      base_vcf = base_vcf,\n+      base_vcf_index = base_vcf_index,\n+      file_of_sample_names = file_of_sample_names,\n+      number_of_samples = CountSamples.number_of_samples,\n+      output_file = output_file\n+  }\n+\n+  output {\n+    File randomized_vcf = RandomizeVcf.randomized_vcf\n+  }\n+}\n+\n+task CountSamples {\n+  input {\n+    File file_of_sample_names\n+  }\n+\n+  command <<<\n+    set -euo pipefail\n+\n+    cat ~{file_of_sample_names} | wc -l\n+  >>>\n+\n+  runtime {\n+    memory: \"1 GiB\"\n+    disks: \"local-disk 1 HDD\"\n+    docker: \"ubuntu:latest\"\n+    preemptible: 3\n+  }\n+\n+  output {\n+    Int number_of_samples = read_int(stdout())\n+  }\n+}\n+\n+task RandomizeVcf {\n+  input {\n+    File base_vcf\n+    File base_vcf_index\n+    File file_of_sample_names\n+    Int number_of_samples\n+    String output_file\n+  }\n+\n+  Int disk_size = ceil(2 * number_of_samples * size(base_vcf, \"GB\"))\n+\n+  command <<<\n+    set -euo pipefail\n+\n+    /workbench/api/project.rb randomize-vcf \\\n+    --vcf ~{base_vcf} \\\n+    --sample-names-file ~{file_of_sample_names} \\\n+    --output $(pwd)/~{output_file}\n+\n+  >>>\n+\n+  runtime {\n+    memory: \"4 GiB\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19783d8d4c0d17d5affec988952fcc6486a36678"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUxMjMyMQ==", "bodyText": "Yeah, probably should", "url": "https://github.com/all-of-us/workbench/pull/3988#discussion_r486512321", "createdAt": "2020-09-10T17:26:41Z", "author": {"login": "als364"}, "path": "api/genomics/wdl/IngestSyntheticVcfWf.wdl", "diffHunk": "@@ -0,0 +1,84 @@\n+version 1.0\n+\n+workflow IngestSyntheticVcfWf {\n+  input {\n+    File base_vcf\n+    File base_vcf_index\n+    File file_of_sample_names\n+    String output_file\n+  }\n+\n+  call CountSamples {\n+    input:\n+      file_of_sample_names = file_of_sample_names\n+  }\n+\n+  call RandomizeVcf {\n+    input:\n+      base_vcf = base_vcf,\n+      base_vcf_index = base_vcf_index,\n+      file_of_sample_names = file_of_sample_names,\n+      number_of_samples = CountSamples.number_of_samples,\n+      output_file = output_file\n+  }\n+\n+  output {\n+    File randomized_vcf = RandomizeVcf.randomized_vcf\n+  }\n+}\n+\n+task CountSamples {\n+  input {\n+    File file_of_sample_names\n+  }\n+\n+  command <<<\n+    set -euo pipefail\n+\n+    cat ~{file_of_sample_names} | wc -l\n+  >>>\n+\n+  runtime {\n+    memory: \"1 GiB\"\n+    disks: \"local-disk 1 HDD\"\n+    docker: \"ubuntu:latest\"\n+    preemptible: 3\n+  }\n+\n+  output {\n+    Int number_of_samples = read_int(stdout())\n+  }\n+}\n+\n+task RandomizeVcf {\n+  input {\n+    File base_vcf\n+    File base_vcf_index\n+    File file_of_sample_names\n+    Int number_of_samples\n+    String output_file\n+  }\n+\n+  Int disk_size = ceil(2 * number_of_samples * size(base_vcf, \"GB\"))\n+\n+  command <<<\n+    set -euo pipefail\n+\n+    /workbench/api/project.rb randomize-vcf \\\n+    --vcf ~{base_vcf} \\\n+    --sample-names-file ~{file_of_sample_names} \\\n+    --output $(pwd)/~{output_file}\n+\n+  >>>\n+\n+  runtime {\n+    memory: \"4 GiB\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUwODY3OA=="}, "originalCommit": {"oid": "19783d8d4c0d17d5affec988952fcc6486a36678"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUxMzEwNQ==", "bodyText": "Actually, yeah, I'll just turn this into an n2-standard-2", "url": "https://github.com/all-of-us/workbench/pull/3988#discussion_r486513105", "createdAt": "2020-09-10T17:28:07Z", "author": {"login": "als364"}, "path": "api/genomics/wdl/IngestSyntheticVcfWf.wdl", "diffHunk": "@@ -0,0 +1,84 @@\n+version 1.0\n+\n+workflow IngestSyntheticVcfWf {\n+  input {\n+    File base_vcf\n+    File base_vcf_index\n+    File file_of_sample_names\n+    String output_file\n+  }\n+\n+  call CountSamples {\n+    input:\n+      file_of_sample_names = file_of_sample_names\n+  }\n+\n+  call RandomizeVcf {\n+    input:\n+      base_vcf = base_vcf,\n+      base_vcf_index = base_vcf_index,\n+      file_of_sample_names = file_of_sample_names,\n+      number_of_samples = CountSamples.number_of_samples,\n+      output_file = output_file\n+  }\n+\n+  output {\n+    File randomized_vcf = RandomizeVcf.randomized_vcf\n+  }\n+}\n+\n+task CountSamples {\n+  input {\n+    File file_of_sample_names\n+  }\n+\n+  command <<<\n+    set -euo pipefail\n+\n+    cat ~{file_of_sample_names} | wc -l\n+  >>>\n+\n+  runtime {\n+    memory: \"1 GiB\"\n+    disks: \"local-disk 1 HDD\"\n+    docker: \"ubuntu:latest\"\n+    preemptible: 3\n+  }\n+\n+  output {\n+    Int number_of_samples = read_int(stdout())\n+  }\n+}\n+\n+task RandomizeVcf {\n+  input {\n+    File base_vcf\n+    File base_vcf_index\n+    File file_of_sample_names\n+    Int number_of_samples\n+    String output_file\n+  }\n+\n+  Int disk_size = ceil(2 * number_of_samples * size(base_vcf, \"GB\"))\n+\n+  command <<<\n+    set -euo pipefail\n+\n+    /workbench/api/project.rb randomize-vcf \\\n+    --vcf ~{base_vcf} \\\n+    --sample-names-file ~{file_of_sample_names} \\\n+    --output $(pwd)/~{output_file}\n+\n+  >>>\n+\n+  runtime {\n+    memory: \"4 GiB\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUwODY3OA=="}, "originalCommit": {"oid": "19783d8d4c0d17d5affec988952fcc6486a36678"}, "originalPosition": 75}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4052, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}