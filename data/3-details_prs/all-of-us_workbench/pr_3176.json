{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5MDI0MjA2", "number": 3176, "title": "[RW-4484][RW-4485][risk=no] Account creation bugfixes", "bodyText": "This PR fixes a couple issues with account creation that Eric uncovered:\n\nWhen switching between steps, the window scroll position remains unchanged. It should scroll to the top of each new step.\n\nThe solution here was to add a componentDidUpdate method in sign-in.tsx, which resets the scroll position whenever a new step is reached.\n\nSwitching back and forth from account-creation to demographic survey appeared to clear out some existing data entry.\n\nWe do seem to be correctly persisting the Profile object between account creation steps, but the demographic survey component was missing some logic to auto-populate checkboxes with existing profile data. I added some unit tests to demonstrate the new behavior.\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally", "createdAt": "2020-02-24T14:36:55Z", "url": "https://github.com/all-of-us/workbench/pull/3176", "merged": true, "mergeCommit": {"oid": "e8dcfcf6e0405f428e05f1b823c653522e992f41"}, "closed": true, "closedAt": "2020-02-25T19:40:37Z", "author": {"login": "gjuggler"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGi50MgH2gAyMzc5MDI0MjA2OjI4ZDg1NjM1NzA3YmU3YmZmNzcyM2NjZTJmMjZjMmJiOWExN2FhM2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcH3Ny-AH2gAyMzc5MDI0MjA2OmUyY2FiYmY4MDdjY2NiNWYzMWY5YjViMjViMzIxMzQ1NzE5ODQ4Yzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "28d85635707be7bff7723cce2f26c2bb9a17aa3f", "author": {"user": {"login": "gjuggler", "name": "Greg Jordan"}}, "url": "https://github.com/all-of-us/workbench/commit/28d85635707be7bff7723cce2f26c2bb9a17aa3f", "committedDate": "2020-02-21T17:09:33Z", "message": "Fix a couple sign-in bugs and add regression tests for account-creation-survey."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e7e5a4d8a2c57a5fc4d28411982bc50e5d799bf", "author": {"user": {"login": "gjuggler", "name": "Greg Jordan"}}, "url": "https://github.com/all-of-us/workbench/commit/2e7e5a4d8a2c57a5fc4d28411982bc50e5d799bf", "committedDate": "2020-02-24T13:36:09Z", "message": "Add test case for demographic survey component."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9284534a4f5c5a3d3839705b289faf29684b39b", "author": {"user": {"login": "gjuggler", "name": "Greg Jordan"}}, "url": "https://github.com/all-of-us/workbench/commit/a9284534a4f5c5a3d3839705b289faf29684b39b", "committedDate": "2020-02-24T13:41:41Z", "message": "Undo change to sign-in landing page (used for local testing)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48b4f2347f58809e14c0305de15679d5172c2ae2", "author": {"user": {"login": "gjuggler", "name": "Greg Jordan"}}, "url": "https://github.com/all-of-us/workbench/commit/48b4f2347f58809e14c0305de15679d5172c2ae2", "committedDate": "2020-02-24T14:38:38Z", "message": "Undo another change made for local testing... eek"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42a0f8fb3b163b2fdcbde41e65bdef451f2a63e2", "author": {"user": {"login": "gjuggler", "name": "Greg Jordan"}}, "url": "https://github.com/all-of-us/workbench/commit/42a0f8fb3b163b2fdcbde41e65bdef451f2a63e2", "committedDate": "2020-02-24T14:39:04Z", "message": "Formatting fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1b6edf7df83c7717a0c316dab3aad0c4e9b3873", "author": {"user": {"login": "gjuggler", "name": "Greg Jordan"}}, "url": "https://github.com/all-of-us/workbench/commit/b1b6edf7df83c7717a0c316dab3aad0c4e9b3873", "committedDate": "2020-02-24T14:40:05Z", "message": "Test cleanup."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1259f46ead10626560145de71d4416f4b6a98ee8", "author": {"user": {"login": "gjuggler", "name": "Greg Jordan"}}, "url": "https://github.com/all-of-us/workbench/commit/1259f46ead10626560145de71d4416f4b6a98ee8", "committedDate": "2020-02-24T14:52:49Z", "message": "One more test fix."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0Mzc4Mzg1", "url": "https://github.com/all-of-us/workbench/pull/3176#pullrequestreview-364378385", "createdAt": "2020-02-25T19:14:52Z", "commit": {"oid": "1259f46ead10626560145de71d4416f4b6a98ee8"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxOToxNDo1MlrOFuRw1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxOToxNDo1MlrOFuRw1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA2OTg0NQ==", "bodyText": "nit: I believe we use dash? casing for most of our HTML id/class names.", "url": "https://github.com/all-of-us/workbench/pull/3176#discussion_r384069845", "createdAt": "2020-02-25T19:14:52Z", "author": {"login": "ericsong"}, "path": "ui/src/app/pages/login/account-creation/account-creation-survey.tsx", "diffHunk": "@@ -131,30 +135,31 @@ export class AccountCreationSurvey extends React.Component<AccountCreationSurvey\n       <Section header='Race'>\n         <FlexColumn style={styles.checkboxAreaContainer}>\n           {AccountCreationOptions.race.map((race) => {\n-            return this.createOptionCheckbox(race.label, 'race', race.value, race.value.toString());\n+            return this.createOptionCheckbox('race', race);\n           })}\n         </FlexColumn>\n       </Section>\n \n       {/*Ethnicity section*/}\n-      <DropDownSection header='Ethnicity' options={AccountCreationOptions.ethnicity}\n+      <DropDownSection data-test-id='dropdown-ethnicity'\n+                       header='Ethnicity' options={AccountCreationOptions.ethnicity}\n                        value={demographicSurvey.ethnicity}\n                        onChange={(e) => this.updateDemographicAttribute('ethnicity', e)}/>\n       <Section header='Do you identify as lesbian, gay, bisexual, transgender, queer (LGBTQ),\n or another sexual and/or gender minority?'>\n         <FlexColumn>\n           <FlexRow style={{alignItems: 'baseline'}}>\n-            <RadioButton onChange={\n+            <RadioButton data-test-id='radio-lgbtq-yes' id='identifiesAsLgbtqYes' onChange={", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1259f46ead10626560145de71d4416f4b6a98ee8"}, "originalPosition": 63}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2cabbf807cccb5f31f9b5b25b321345719848c7", "author": {"user": {"login": "gjuggler", "name": "Greg Jordan"}}, "url": "https://github.com/all-of-us/workbench/commit/e2cabbf807cccb5f31f9b5b25b321345719848c7", "committedDate": "2020-02-25T19:23:24Z", "message": "lowerCamel to kebab-case for element IDs"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3636, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}