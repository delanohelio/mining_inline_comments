{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxMjIyMDM4", "number": 4048, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMjoxNDo1OVrOEmSIyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwMTowNjo1NVrOEm1jkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4NTc4NTA3OnYy", "diffSide": "RIGHT", "path": "e2e/app/page/cohort-search-page.ts", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMjoxNDo1OVrOHWOOpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwNDoxOToyNFrOHXJJEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzA2Mzg0NA==", "bodyText": "I expect this will address the flaky behavior in Cohort tests. Not removing 1 second sleep for now to see if flaky still happens.", "url": "https://github.com/all-of-us/workbench/pull/4048#discussion_r493063844", "createdAt": "2020-09-22T22:14:59Z", "author": {"login": "aweng98"}, "path": "e2e/app/page/cohort-search-page.ts", "diffHunk": "@@ -107,6 +107,7 @@ export default class CohortSearchPage extends AuthenticatedPage {\n \n     const link = await this.waitForPhysicalMeasurementCriteriaLink(criteriaName);\n     await link.click();\n+    await waitWhileLoading(this.page);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5956bb9b63be3a0358411a69541b75cf0b54e93f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzYzNjY3OA==", "bodyText": "Just curious how adding this here would fix the flakiness? The error seems to happen several steps later in the test.", "url": "https://github.com/all-of-us/workbench/pull/4048#discussion_r493636678", "createdAt": "2020-09-23T14:25:31Z", "author": {"login": "dolbeew"}, "path": "e2e/app/page/cohort-search-page.ts", "diffHunk": "@@ -107,6 +107,7 @@ export default class CohortSearchPage extends AuthenticatedPage {\n \n     const link = await this.waitForPhysicalMeasurementCriteriaLink(criteriaName);\n     await link.click();\n+    await waitWhileLoading(this.page);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzA2Mzg0NA=="}, "originalCommit": {"oid": "5956bb9b63be3a0358411a69541b75cf0b54e93f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzkwMDA5OA==", "bodyText": "Ah, yes, you're right.\nI did see spinner spinning while watching test playback so I think waitWhileLoading is still needed.", "url": "https://github.com/all-of-us/workbench/pull/4048#discussion_r493900098", "createdAt": "2020-09-23T21:15:43Z", "author": {"login": "aweng98"}, "path": "e2e/app/page/cohort-search-page.ts", "diffHunk": "@@ -107,6 +107,7 @@ export default class CohortSearchPage extends AuthenticatedPage {\n \n     const link = await this.waitForPhysicalMeasurementCriteriaLink(criteriaName);\n     await link.click();\n+    await waitWhileLoading(this.page);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzA2Mzg0NA=="}, "originalCommit": {"oid": "5956bb9b63be3a0358411a69541b75cf0b54e93f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDAyOTA3Mw==", "bodyText": "Sounds good, thanks.", "url": "https://github.com/all-of-us/workbench/pull/4048#discussion_r494029073", "createdAt": "2020-09-24T04:19:24Z", "author": {"login": "dolbeew"}, "path": "e2e/app/page/cohort-search-page.ts", "diffHunk": "@@ -107,6 +107,7 @@ export default class CohortSearchPage extends AuthenticatedPage {\n \n     const link = await this.waitForPhysicalMeasurementCriteriaLink(criteriaName);\n     await link.click();\n+    await waitWhileLoading(this.page);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzA2Mzg0NA=="}, "originalCommit": {"oid": "5956bb9b63be3a0358411a69541b75cf0b54e93f"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5MTU3ODc0OnYy", "diffSide": "RIGHT", "path": "e2e/app/xpath-builders.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwMTowMToxNFrOHXGKRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwMTowMToxNFrOHXGKRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzk4MDIzMQ==", "bodyText": "Fix a bug in selector when only nodeLevel was specified.\ne.g. const selectMenu = await SelectMenu.findByName(this.page, {ancestorLevel: 0}, this);", "url": "https://github.com/all-of-us/workbench/pull/4048#discussion_r493980231", "createdAt": "2020-09-24T01:01:14Z", "author": {"login": "aweng98"}, "path": "e2e/app/xpath-builders.ts", "diffHunk": "@@ -62,7 +62,7 @@ export function buildXPath(xOpts: XPathOptions, container?: Container): string {\n     selector = `${textExpr}//${type}`;\n     break;\n   case ElementType.Dropdown:\n-    selector = `${textExpr}//*[contains(concat(\" \", normalize-space(@class)),\" p-dropdown\")]`;\n+    selector = `${textExpr}${nodeLevel}//*[contains(concat(\" \", normalize-space(@class), \" \"), \" p-dropdown \")]`;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "136232e8ac7c657f84062d000357439e336e0565"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5MTU4ODAzOnYy", "diffSide": "RIGHT", "path": "e2e/app/page/create-account-page.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwMTowNjo1NVrOHXGPgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwMTowNjo1NVrOHXGPgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzk4MTU3MA==", "bodyText": "Update because I changed Dropdown in xpath-builders.ts.", "url": "https://github.com/all-of-us/workbench/pull/4048#discussion_r493981570", "createdAt": "2020-09-24T01:06:55Z", "author": {"login": "aweng98"}, "path": "e2e/app/page/create-account-page.ts", "diffHunk": "@@ -66,12 +66,12 @@ export const FieldSelector = {\n   },\n   InstitutionSelect: {\n     textOption: {\n-      type:ElementType.Dropdown, name:'Select your institution', ancestorLevel:2\n+      type:ElementType.Dropdown, name:'Select your institution', ancestorLevel:1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "136232e8ac7c657f84062d000357439e336e0565"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3945, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}