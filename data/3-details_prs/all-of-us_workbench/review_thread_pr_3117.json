{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczODg1ODg5", "number": 3117, "reviewThreads": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNTo1NTo1NVrODfO6gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMzoyNTowOFrODfu2-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDc2ODAyOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/pmiops/workbench/workspaceadmin/WorkspaceAdminController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNTo1NTo1NVrOFo0OTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMjoxMDoyMFrOFplVvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM0Mjk4OQ==", "bodyText": "style nit: I'd prefer a construction like\nworkspaceMaybe.map(this::getDetailsResponse).orElse(ResponseEntity.status(HttpStatus.NOT_FOUND).build())\nover an explicit ifPresent() / get() pair", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378342989", "createdAt": "2020-02-12T15:55:55Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/workspaceadmin/WorkspaceAdminController.java", "diffHunk": "@@ -0,0 +1,102 @@\n+package org.pmiops.workbench.workspaceadmin;\n+\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+import org.pmiops.workbench.annotations.AuthorityRequired;\n+import org.pmiops.workbench.api.WorkspaceAdminApiDelegate;\n+import org.pmiops.workbench.db.model.DbWorkspace;\n+import org.pmiops.workbench.firecloud.FireCloudService;\n+import org.pmiops.workbench.firecloud.model.FirecloudWorkspace;\n+import org.pmiops.workbench.model.AdminFederatedWorkspaceDetailsResponse;\n+import org.pmiops.workbench.model.AdminWorkspaceCloudStorageCounts;\n+import org.pmiops.workbench.model.AdminWorkspaceObjectsCounts;\n+import org.pmiops.workbench.model.AdminWorkspaceResources;\n+import org.pmiops.workbench.model.Authority;\n+import org.pmiops.workbench.model.ClusterStatus;\n+import org.pmiops.workbench.model.ListClusterResponse;\n+import org.pmiops.workbench.model.UserRole;\n+import org.pmiops.workbench.notebooks.LeonardoNotebooksClient;\n+import org.pmiops.workbench.utils.WorkspaceMapper;\n+import org.pmiops.workbench.workspaces.WorkspaceService;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+@RestController\n+public class WorkspaceAdminController implements WorkspaceAdminApiDelegate {\n+  private final FireCloudService fireCloudService;\n+  private final LeonardoNotebooksClient leonardoNotebooksClient;\n+  private final WorkspaceAdminService workspaceAdminService;\n+  private final WorkspaceMapper workspaceMapper;\n+  private final WorkspaceService workspaceService;\n+\n+  @Autowired\n+  public WorkspaceAdminController(\n+      FireCloudService fireCloudService,\n+      LeonardoNotebooksClient leonardoNotebooksClient,\n+      WorkspaceAdminService workspaceAdminService,\n+      WorkspaceMapper workspaceMapper,\n+      WorkspaceService workspaceService) {\n+    this.fireCloudService = fireCloudService;\n+    this.leonardoNotebooksClient = leonardoNotebooksClient;\n+    this.workspaceAdminService = workspaceAdminService;\n+    this.workspaceMapper = workspaceMapper;\n+    this.workspaceService = workspaceService;\n+  }\n+\n+  @Override\n+  @AuthorityRequired({Authority.WORKSPACES_VIEW})\n+  public ResponseEntity<AdminFederatedWorkspaceDetailsResponse> getFederatedWorkspaceDetails(\n+      String workspaceNamespace) {\n+    Optional<DbWorkspace> workspaceMaybe =\n+        workspaceAdminService.getFirstWorkspaceByNamespace(workspaceNamespace);\n+    if (workspaceMaybe.isPresent()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE0NzcwOA==", "bodyText": "map doesn't like that one would be parameterized and the other wouldn't.", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r379147708", "createdAt": "2020-02-13T22:10:20Z", "author": {"login": "als364"}, "path": "api/src/main/java/org/pmiops/workbench/workspaceadmin/WorkspaceAdminController.java", "diffHunk": "@@ -0,0 +1,102 @@\n+package org.pmiops.workbench.workspaceadmin;\n+\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+import org.pmiops.workbench.annotations.AuthorityRequired;\n+import org.pmiops.workbench.api.WorkspaceAdminApiDelegate;\n+import org.pmiops.workbench.db.model.DbWorkspace;\n+import org.pmiops.workbench.firecloud.FireCloudService;\n+import org.pmiops.workbench.firecloud.model.FirecloudWorkspace;\n+import org.pmiops.workbench.model.AdminFederatedWorkspaceDetailsResponse;\n+import org.pmiops.workbench.model.AdminWorkspaceCloudStorageCounts;\n+import org.pmiops.workbench.model.AdminWorkspaceObjectsCounts;\n+import org.pmiops.workbench.model.AdminWorkspaceResources;\n+import org.pmiops.workbench.model.Authority;\n+import org.pmiops.workbench.model.ClusterStatus;\n+import org.pmiops.workbench.model.ListClusterResponse;\n+import org.pmiops.workbench.model.UserRole;\n+import org.pmiops.workbench.notebooks.LeonardoNotebooksClient;\n+import org.pmiops.workbench.utils.WorkspaceMapper;\n+import org.pmiops.workbench.workspaces.WorkspaceService;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+@RestController\n+public class WorkspaceAdminController implements WorkspaceAdminApiDelegate {\n+  private final FireCloudService fireCloudService;\n+  private final LeonardoNotebooksClient leonardoNotebooksClient;\n+  private final WorkspaceAdminService workspaceAdminService;\n+  private final WorkspaceMapper workspaceMapper;\n+  private final WorkspaceService workspaceService;\n+\n+  @Autowired\n+  public WorkspaceAdminController(\n+      FireCloudService fireCloudService,\n+      LeonardoNotebooksClient leonardoNotebooksClient,\n+      WorkspaceAdminService workspaceAdminService,\n+      WorkspaceMapper workspaceMapper,\n+      WorkspaceService workspaceService) {\n+    this.fireCloudService = fireCloudService;\n+    this.leonardoNotebooksClient = leonardoNotebooksClient;\n+    this.workspaceAdminService = workspaceAdminService;\n+    this.workspaceMapper = workspaceMapper;\n+    this.workspaceService = workspaceService;\n+  }\n+\n+  @Override\n+  @AuthorityRequired({Authority.WORKSPACES_VIEW})\n+  public ResponseEntity<AdminFederatedWorkspaceDetailsResponse> getFederatedWorkspaceDetails(\n+      String workspaceNamespace) {\n+    Optional<DbWorkspace> workspaceMaybe =\n+        workspaceAdminService.getFirstWorkspaceByNamespace(workspaceNamespace);\n+    if (workspaceMaybe.isPresent()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM0Mjk4OQ=="}, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDgxMTk3OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/pmiops/workbench/workspaceadmin/WorkspaceAdminService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjowNjoyMVrOFo0qkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjowNjoyMVrOFo0qkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1MDIyNQ==", "bodyText": "I don't love that we have DB objects and IDs in this interface, but looking at other Workspace code I think that is too big a hill to climb for today.  This fits our current state of the world.", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378350225", "createdAt": "2020-02-12T16:06:21Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/workspaceadmin/WorkspaceAdminService.java", "diffHunk": "@@ -0,0 +1,15 @@\n+package org.pmiops.workbench.workspaceadmin;\n+\n+import java.util.Optional;\n+import org.pmiops.workbench.db.model.DbWorkspace;\n+import org.pmiops.workbench.model.AdminWorkspaceCloudStorageCounts;\n+import org.pmiops.workbench.model.AdminWorkspaceObjectsCounts;\n+\n+public interface WorkspaceAdminService {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDgyNDk3OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/pmiops/workbench/workspaceadmin/WorkspaceAdminServiceImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjowOTo0MFrOFo0zJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMToxMTo0MlrOFo-ssA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1MjQyMQ==", "bodyText": "can get the stream count() directly here if switching to long is acceptable", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378352421", "createdAt": "2020-02-12T16:09:40Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/workspaceadmin/WorkspaceAdminServiceImpl.java", "diffHunk": "@@ -0,0 +1,96 @@\n+package org.pmiops.workbench.workspaceadmin;\n+\n+import com.google.cloud.storage.BlobInfo;\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+import org.pmiops.workbench.db.dao.CohortDao;\n+import org.pmiops.workbench.db.dao.ConceptSetDao;\n+import org.pmiops.workbench.db.dao.DataSetDao;\n+import org.pmiops.workbench.db.dao.WorkspaceDao;\n+import org.pmiops.workbench.db.model.DbWorkspace;\n+import org.pmiops.workbench.firecloud.FireCloudService;\n+import org.pmiops.workbench.google.CloudStorageService;\n+import org.pmiops.workbench.model.AdminWorkspaceCloudStorageCounts;\n+import org.pmiops.workbench.model.AdminWorkspaceObjectsCounts;\n+import org.pmiops.workbench.notebooks.NotebooksService;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Service;\n+\n+@Service\n+public class WorkspaceAdminServiceImpl implements WorkspaceAdminService {\n+  private final CloudStorageService cloudStorageService;\n+  private final CohortDao cohortDao;\n+  private final ConceptSetDao conceptSetDao;\n+  private final DataSetDao dataSetDao;\n+  private final FireCloudService fireCloudService;\n+  private final NotebooksService notebooksService;\n+  private final WorkspaceDao workspaceDao;\n+\n+  @Autowired\n+  public WorkspaceAdminServiceImpl(\n+      CloudStorageService cloudStorageService,\n+      CohortDao cohortDao,\n+      ConceptSetDao conceptSetDao,\n+      DataSetDao dataSetDao,\n+      FireCloudService fireCloudService,\n+      NotebooksService notebooksService,\n+      WorkspaceDao workspaceDao) {\n+    this.cloudStorageService = cloudStorageService;\n+    this.cohortDao = cohortDao;\n+    this.conceptSetDao = conceptSetDao;\n+    this.dataSetDao = dataSetDao;\n+    this.fireCloudService = fireCloudService;\n+    this.notebooksService = notebooksService;\n+    this.workspaceDao = workspaceDao;\n+  }\n+\n+  @Override\n+  public Optional<DbWorkspace> getFirstWorkspaceByNamespace(String workspaceNamespace) {\n+    return workspaceDao.findFirstByWorkspaceNamespaceOrderByFirecloudNameAsc(workspaceNamespace);\n+  }\n+\n+  @Override\n+  public AdminWorkspaceObjectsCounts getAdminWorkspaceObjects(long workspaceId) {\n+    int cohortCount = cohortDao.countByWorkspaceId(workspaceId);\n+    int conceptSetCount = conceptSetDao.countByWorkspaceId(workspaceId);\n+    int dataSetCount = dataSetDao.countByWorkspaceId(workspaceId);\n+    return new AdminWorkspaceObjectsCounts()\n+        .cohortCount(cohortCount)\n+        .conceptSetCount(conceptSetCount)\n+        .datasetCount(dataSetCount);\n+  }\n+\n+  @Override\n+  public AdminWorkspaceCloudStorageCounts getAdminWorkspaceCloudStorageCounts(\n+      String workspaceNamespace, String workspaceName) {\n+    String bucketName =\n+        fireCloudService\n+            .getWorkspace(workspaceNamespace, workspaceName)\n+            .getWorkspace()\n+            .getBucketName();\n+\n+    int notebookFilesCount =\n+        notebooksService.getNotebooks(workspaceNamespace, workspaceName).size();\n+    int nonNotebookFilesCount = getNonNotebookFileCount(bucketName);\n+    long storageSizeBytes = getStorageSizeBytes(bucketName);\n+\n+    return new AdminWorkspaceCloudStorageCounts()\n+        .notebookFileCount(notebookFilesCount)\n+        .nonNotebookFileCount(nonNotebookFilesCount)\n+        .storageBytesUsed(storageSizeBytes);\n+  }\n+\n+  private int getNonNotebookFileCount(String bucketName) {\n+    return cloudStorageService\n+        .getBlobListForPrefix(bucketName, NotebooksService.NOTEBOOKS_WORKSPACE_DIRECTORY).stream()\n+        .filter(blob -> !NotebooksService.NOTEBOOK_PATTERN.matcher(blob.getName()).matches())\n+        .collect(Collectors.toList())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUxNDYwOA==", "bodyText": "considered it. it makes it a bit ugly in other ways.", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378514608", "createdAt": "2020-02-12T21:11:42Z", "author": {"login": "als364"}, "path": "api/src/main/java/org/pmiops/workbench/workspaceadmin/WorkspaceAdminServiceImpl.java", "diffHunk": "@@ -0,0 +1,96 @@\n+package org.pmiops.workbench.workspaceadmin;\n+\n+import com.google.cloud.storage.BlobInfo;\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+import org.pmiops.workbench.db.dao.CohortDao;\n+import org.pmiops.workbench.db.dao.ConceptSetDao;\n+import org.pmiops.workbench.db.dao.DataSetDao;\n+import org.pmiops.workbench.db.dao.WorkspaceDao;\n+import org.pmiops.workbench.db.model.DbWorkspace;\n+import org.pmiops.workbench.firecloud.FireCloudService;\n+import org.pmiops.workbench.google.CloudStorageService;\n+import org.pmiops.workbench.model.AdminWorkspaceCloudStorageCounts;\n+import org.pmiops.workbench.model.AdminWorkspaceObjectsCounts;\n+import org.pmiops.workbench.notebooks.NotebooksService;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Service;\n+\n+@Service\n+public class WorkspaceAdminServiceImpl implements WorkspaceAdminService {\n+  private final CloudStorageService cloudStorageService;\n+  private final CohortDao cohortDao;\n+  private final ConceptSetDao conceptSetDao;\n+  private final DataSetDao dataSetDao;\n+  private final FireCloudService fireCloudService;\n+  private final NotebooksService notebooksService;\n+  private final WorkspaceDao workspaceDao;\n+\n+  @Autowired\n+  public WorkspaceAdminServiceImpl(\n+      CloudStorageService cloudStorageService,\n+      CohortDao cohortDao,\n+      ConceptSetDao conceptSetDao,\n+      DataSetDao dataSetDao,\n+      FireCloudService fireCloudService,\n+      NotebooksService notebooksService,\n+      WorkspaceDao workspaceDao) {\n+    this.cloudStorageService = cloudStorageService;\n+    this.cohortDao = cohortDao;\n+    this.conceptSetDao = conceptSetDao;\n+    this.dataSetDao = dataSetDao;\n+    this.fireCloudService = fireCloudService;\n+    this.notebooksService = notebooksService;\n+    this.workspaceDao = workspaceDao;\n+  }\n+\n+  @Override\n+  public Optional<DbWorkspace> getFirstWorkspaceByNamespace(String workspaceNamespace) {\n+    return workspaceDao.findFirstByWorkspaceNamespaceOrderByFirecloudNameAsc(workspaceNamespace);\n+  }\n+\n+  @Override\n+  public AdminWorkspaceObjectsCounts getAdminWorkspaceObjects(long workspaceId) {\n+    int cohortCount = cohortDao.countByWorkspaceId(workspaceId);\n+    int conceptSetCount = conceptSetDao.countByWorkspaceId(workspaceId);\n+    int dataSetCount = dataSetDao.countByWorkspaceId(workspaceId);\n+    return new AdminWorkspaceObjectsCounts()\n+        .cohortCount(cohortCount)\n+        .conceptSetCount(conceptSetCount)\n+        .datasetCount(dataSetCount);\n+  }\n+\n+  @Override\n+  public AdminWorkspaceCloudStorageCounts getAdminWorkspaceCloudStorageCounts(\n+      String workspaceNamespace, String workspaceName) {\n+    String bucketName =\n+        fireCloudService\n+            .getWorkspace(workspaceNamespace, workspaceName)\n+            .getWorkspace()\n+            .getBucketName();\n+\n+    int notebookFilesCount =\n+        notebooksService.getNotebooks(workspaceNamespace, workspaceName).size();\n+    int nonNotebookFilesCount = getNonNotebookFileCount(bucketName);\n+    long storageSizeBytes = getStorageSizeBytes(bucketName);\n+\n+    return new AdminWorkspaceCloudStorageCounts()\n+        .notebookFileCount(notebookFilesCount)\n+        .nonNotebookFileCount(nonNotebookFilesCount)\n+        .storageBytesUsed(storageSizeBytes);\n+  }\n+\n+  private int getNonNotebookFileCount(String bucketName) {\n+    return cloudStorageService\n+        .getBlobListForPrefix(bucketName, NotebooksService.NOTEBOOKS_WORKSPACE_DIRECTORY).stream()\n+        .filter(blob -> !NotebooksService.NOTEBOOK_PATTERN.matcher(blob.getName()).matches())\n+        .collect(Collectors.toList())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1MjQyMQ=="}, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 87}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDgzOTk1OnYy", "diffSide": "RIGHT", "path": "api/src/main/resources/workbench.yaml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjoxMzoxNlrOFo08ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMjoyNzo0OVrOFplyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1NDgyNg==", "bodyText": "Can you add an entry describing this authority to the comment above?\nRe: naming, I'm pretty OK with WORKSPACES_VIEW though it still doesn't feel like we've nailed it. Spitballing some other options, definitely feel free to ignore:\n\nVIEW_ALL_WORKSPACES\nWORKSPACE_ADMIN_VIEW\nWORKSPACE_VIEW_ALL\nWORKSPACE_ADMIN_VIEWER", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378354826", "createdAt": "2020-02-12T16:13:16Z", "author": {"login": "gjuggler"}, "path": "api/src/main/resources/workbench.yaml", "diffHunk": "@@ -2555,7 +2575,8 @@ definitions:\n       FEATURED_WORKSPACE_ADMIN,\n       COMMUNICATIONS_ADMIN,\n       SECURITY_ADMIN,\n-      INSTITUTION_ADMIN\n+      INSTITUTION_ADMIN,\n+      WORKSPACES_VIEW", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUxNDc1Mw==", "bodyText": "Thought we nixed ADMIN in authorities going forward.", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378514753", "createdAt": "2020-02-12T21:12:00Z", "author": {"login": "als364"}, "path": "api/src/main/resources/workbench.yaml", "diffHunk": "@@ -2555,7 +2575,8 @@ definitions:\n       FEATURED_WORKSPACE_ADMIN,\n       COMMUNICATIONS_ADMIN,\n       SECURITY_ADMIN,\n-      INSTITUTION_ADMIN\n+      INSTITUTION_ADMIN,\n+      WORKSPACES_VIEW", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1NDgyNg=="}, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE1NDk5Mw==", "bodyText": "Yeah, good point \u2013\u00a0ignore my 2nd and 4th ideas then :)\nFor clarity: renaming the authority is optional. But adding a comment to the list above the enum is blocking. (It may also be a good idea to add a note to that comment, clarifying that we want to not use ADMIN in any future authority names!)", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r379154993", "createdAt": "2020-02-13T22:27:49Z", "author": {"login": "gjuggler"}, "path": "api/src/main/resources/workbench.yaml", "diffHunk": "@@ -2555,7 +2575,8 @@ definitions:\n       FEATURED_WORKSPACE_ADMIN,\n       COMMUNICATIONS_ADMIN,\n       SECURITY_ADMIN,\n-      INSTITUTION_ADMIN\n+      INSTITUTION_ADMIN,\n+      WORKSPACES_VIEW", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1NDgyNg=="}, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDg0MTE2OnYy", "diffSide": "RIGHT", "path": "ui/src/app/components/side-nav.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjoxMzozMlrOFo09Sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMjowNjowOFrOFplO2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1NTAxOA==", "bodyText": "was this a bug?", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378355018", "createdAt": "2020-02-12T16:13:32Z", "author": {"login": "jmthibault79"}, "path": "ui/src/app/components/side-nav.tsx", "diffHunk": "@@ -328,19 +330,27 @@ export class SideNav extends React.Component<SideNavProps, SideNavState> {\n       {\n         profile.authorities.includes(Authority.ACCESSCONTROLADMIN) && this.state.showAdminOptions && <SideNavItem\n           content={'User Admin'}\n-          onToggleSideNav={() => this.props.onToggleSideNav}\n+          onToggleSideNav={() => this.props.onToggleSideNav()}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE0NTk0NA==", "bodyText": "Yep.", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r379145944", "createdAt": "2020-02-13T22:06:08Z", "author": {"login": "als364"}, "path": "ui/src/app/components/side-nav.tsx", "diffHunk": "@@ -328,19 +330,27 @@ export class SideNav extends React.Component<SideNavProps, SideNavState> {\n       {\n         profile.authorities.includes(Authority.ACCESSCONTROLADMIN) && this.state.showAdminOptions && <SideNavItem\n           content={'User Admin'}\n-          onToggleSideNav={() => this.props.onToggleSideNav}\n+          onToggleSideNav={() => this.props.onToggleSideNav()}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1NTAxOA=="}, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDg0NTA2OnYy", "diffSide": "RIGHT", "path": "api/src/main/resources/workbench.yaml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjoxNDozM1rOFo0_ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMToxMjoyN1rOFo-uLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1NTY1MQ==", "bodyText": "Naming nit: I'm not in love with the \"federated\" interstitial word there. I think the clarity of naming wouldn't be meaningfully affected if you dropped it. \u2013\u00a0AdminWorkspaceDetailsResponse.", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378355651", "createdAt": "2020-02-12T16:14:33Z", "author": {"login": "gjuggler"}, "path": "api/src/main/resources/workbench.yaml", "diffHunk": "@@ -4320,3 +4343,52 @@ definitions:\n         type: \"array\"\n         items:\n           $ref: \"#/definitions/Institution\"\n+\n+  AdminFederatedWorkspaceDetailsResponse:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUxNDk4OA==", "bodyText": "I guess if you read the function instead of just looking at the name it's clear that it's pulling information from different places.", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378514988", "createdAt": "2020-02-12T21:12:27Z", "author": {"login": "als364"}, "path": "api/src/main/resources/workbench.yaml", "diffHunk": "@@ -4320,3 +4343,52 @@ definitions:\n         type: \"array\"\n         items:\n           $ref: \"#/definitions/Institution\"\n+\n+  AdminFederatedWorkspaceDetailsResponse:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1NTY1MQ=="}, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDg2MzQ2OnYy", "diffSide": "RIGHT", "path": "ui/src/app/components/side-nav.tsx", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjoxODo0MVrOFo1K8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMzowNzoxOVrOFpmqeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1ODUxMw==", "bodyText": "Wow \u2013\u00a0does Swagger-codegen really just collapse tokens like this? Bummer.", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378358513", "createdAt": "2020-02-12T16:18:41Z", "author": {"login": "gjuggler"}, "path": "ui/src/app/components/side-nav.tsx", "diffHunk": "@@ -316,7 +317,8 @@ export class SideNav extends React.Component<SideNavProps, SideNavState> {\n       />\n       {\n         (profile.authorities.includes(Authority.ACCESSCONTROLADMIN)\n-          || profile.authorities.includes(Authority.COMMUNICATIONSADMIN)) && <SideNavItem\n+          || profile.authorities.includes(Authority.COMMUNICATIONSADMIN)\n+          || profile.authorities.includes(Authority.WORKSPACESVIEW)) && <SideNavItem", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUxNTIxMw==", "bodyText": "what do you mean?", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378515213", "createdAt": "2020-02-12T21:12:52Z", "author": {"login": "als364"}, "path": "ui/src/app/components/side-nav.tsx", "diffHunk": "@@ -316,7 +317,8 @@ export class SideNav extends React.Component<SideNavProps, SideNavState> {\n       />\n       {\n         (profile.authorities.includes(Authority.ACCESSCONTROLADMIN)\n-          || profile.authorities.includes(Authority.COMMUNICATIONSADMIN)) && <SideNavItem\n+          || profile.authorities.includes(Authority.COMMUNICATIONSADMIN)\n+          || profile.authorities.includes(Authority.WORKSPACESVIEW)) && <SideNavItem", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1ODUxMw=="}, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE1NTM4Nw==", "bodyText": "Yeah, I was just commenting on the way WORKSPACES_VIEW becomes WORKSPACESVIEW in our UI code. I hadn't realized that before, and it's sad. No action here!", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r379155387", "createdAt": "2020-02-13T22:28:44Z", "author": {"login": "gjuggler"}, "path": "ui/src/app/components/side-nav.tsx", "diffHunk": "@@ -316,7 +317,8 @@ export class SideNav extends React.Component<SideNavProps, SideNavState> {\n       />\n       {\n         (profile.authorities.includes(Authority.ACCESSCONTROLADMIN)\n-          || profile.authorities.includes(Authority.COMMUNICATIONSADMIN)) && <SideNavItem\n+          || profile.authorities.includes(Authority.COMMUNICATIONSADMIN)\n+          || profile.authorities.includes(Authority.WORKSPACESVIEW)) && <SideNavItem", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1ODUxMw=="}, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE2OTQwMQ==", "bodyText": "I'm guessing WORKSPACES_VIEW -> WORKSPACESVIEW.  I was quite surprised to see that the first time I did.  But it looks like all the UI does this.", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r379169401", "createdAt": "2020-02-13T23:07:19Z", "author": {"login": "jmthibault79"}, "path": "ui/src/app/components/side-nav.tsx", "diffHunk": "@@ -316,7 +317,8 @@ export class SideNav extends React.Component<SideNavProps, SideNavState> {\n       />\n       {\n         (profile.authorities.includes(Authority.ACCESSCONTROLADMIN)\n-          || profile.authorities.includes(Authority.COMMUNICATIONSADMIN)) && <SideNavItem\n+          || profile.authorities.includes(Authority.COMMUNICATIONSADMIN)\n+          || profile.authorities.includes(Authority.WORKSPACESVIEW)) && <SideNavItem", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1ODUxMw=="}, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDg2OTc2OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/admin/admin-workspace.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjoyMDoyMlrOFo1PEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMToxMzoyM1rOFo-wAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1OTU2OQ==", "bodyText": "nit: best practice is to use reactStyles({ ... }) for better type-safety. See code for details.", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378359569", "createdAt": "2020-02-12T16:20:22Z", "author": {"login": "gjuggler"}, "path": "ui/src/app/pages/admin/admin-workspace.tsx", "diffHunk": "@@ -0,0 +1,301 @@\n+import * as React from 'react';\n+\n+import {Component} from '@angular/core';\n+\n+import {Button, Clickable} from 'app/components/buttons';\n+import {FlexColumn, FlexRow} from 'app/components/flex';\n+import {ClrIcon} from 'app/components/icons';\n+import {TextInput} from 'app/components/inputs';\n+import {workspaceAdminApi} from 'app/services/swagger-fetch-clients';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase} from 'app/utils';\n+import {\n+  getSelectedPopulations,\n+  getSelectedResearchPurposeItems\n+} from 'app/utils/research-purpose';\n+\n+import {\n+  AdminWorkspaceResources,\n+  UserRole,\n+  Workspace\n+} from 'generated/fetch';\n+\n+\n+const styles = {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUxNTQ1Nw==", "bodyText": "whoops! an instance in which insufficient copy/paste bites me.", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378515457", "createdAt": "2020-02-12T21:13:23Z", "author": {"login": "als364"}, "path": "ui/src/app/pages/admin/admin-workspace.tsx", "diffHunk": "@@ -0,0 +1,301 @@\n+import * as React from 'react';\n+\n+import {Component} from '@angular/core';\n+\n+import {Button, Clickable} from 'app/components/buttons';\n+import {FlexColumn, FlexRow} from 'app/components/flex';\n+import {ClrIcon} from 'app/components/icons';\n+import {TextInput} from 'app/components/inputs';\n+import {workspaceAdminApi} from 'app/services/swagger-fetch-clients';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase} from 'app/utils';\n+import {\n+  getSelectedPopulations,\n+  getSelectedResearchPurposeItems\n+} from 'app/utils/research-purpose';\n+\n+import {\n+  AdminWorkspaceResources,\n+  UserRole,\n+  Workspace\n+} from 'generated/fetch';\n+\n+\n+const styles = {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1OTU2OQ=="}, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDg3ODI4OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/admin/admin-workspace.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjoyMjoyOVrOFo1UfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMToxNjowNFrOFo-00A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM2MDk1Nw==", "bodyText": "How important is it to create a deep-but-empty object here? IMO it might save a bit of maintenance over time to leave this null to start and not have to worry about deep-constructing the object. (But I guess that's a trade-off against the cost of doing qualified indexing in the render section... totally fine if you ended up concluding that was more important.)", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378360957", "createdAt": "2020-02-12T16:22:29Z", "author": {"login": "gjuggler"}, "path": "ui/src/app/pages/admin/admin-workspace.tsx", "diffHunk": "@@ -0,0 +1,301 @@\n+import * as React from 'react';\n+\n+import {Component} from '@angular/core';\n+\n+import {Button, Clickable} from 'app/components/buttons';\n+import {FlexColumn, FlexRow} from 'app/components/flex';\n+import {ClrIcon} from 'app/components/icons';\n+import {TextInput} from 'app/components/inputs';\n+import {workspaceAdminApi} from 'app/services/swagger-fetch-clients';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase} from 'app/utils';\n+import {\n+  getSelectedPopulations,\n+  getSelectedResearchPurposeItems\n+} from 'app/utils/research-purpose';\n+\n+import {\n+  AdminWorkspaceResources,\n+  UserRole,\n+  Workspace\n+} from 'generated/fetch';\n+\n+\n+const styles = {\n+  fixedWidthWithMargin: {\n+    width: '10rem',\n+    marginRight: '1rem'\n+  },\n+  dropdownIcon: {\n+    marginRight: '1rem',\n+    transform: 'rotate(180deg)',\n+    transition: 'transform 0.5s',\n+    color: colors.primary\n+  },\n+  dropdownIconOpen: {\n+    transform: 'rotate(0deg)',\n+  }\n+};\n+\n+const FlexColumnWithRightMargin = ({style = {}, children}) => {\n+  return <FlexColumn style={{...styles.fixedWidthWithMargin, ...style}}>\n+    {...children}\n+  </FlexColumn>;\n+};\n+\n+const LabelWithPrimaryColor = ({style = {}, children}) => {\n+  return <label style={{color: colors.primary, ...style}}>\n+    {...children}\n+  </label>;\n+};\n+\n+interface State {\n+  googleProject: string;\n+  workspace: Workspace;\n+  collaborators: Array<UserRole>;\n+  resources: AdminWorkspaceResources;\n+  detailsOpen: boolean;\n+}\n+\n+export class AdminWorkspace extends React.Component<{}, State> {\n+  constructor(props) {\n+    super(props);\n+\n+    this.state = {\n+      googleProject: '',\n+      workspace: null,\n+      collaborators: [],\n+      resources: {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUxNjY4OA==", "bodyText": "Probably not that important; in fact, it might end up cleaner overall if I leave it out.", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378516688", "createdAt": "2020-02-12T21:16:04Z", "author": {"login": "als364"}, "path": "ui/src/app/pages/admin/admin-workspace.tsx", "diffHunk": "@@ -0,0 +1,301 @@\n+import * as React from 'react';\n+\n+import {Component} from '@angular/core';\n+\n+import {Button, Clickable} from 'app/components/buttons';\n+import {FlexColumn, FlexRow} from 'app/components/flex';\n+import {ClrIcon} from 'app/components/icons';\n+import {TextInput} from 'app/components/inputs';\n+import {workspaceAdminApi} from 'app/services/swagger-fetch-clients';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase} from 'app/utils';\n+import {\n+  getSelectedPopulations,\n+  getSelectedResearchPurposeItems\n+} from 'app/utils/research-purpose';\n+\n+import {\n+  AdminWorkspaceResources,\n+  UserRole,\n+  Workspace\n+} from 'generated/fetch';\n+\n+\n+const styles = {\n+  fixedWidthWithMargin: {\n+    width: '10rem',\n+    marginRight: '1rem'\n+  },\n+  dropdownIcon: {\n+    marginRight: '1rem',\n+    transform: 'rotate(180deg)',\n+    transition: 'transform 0.5s',\n+    color: colors.primary\n+  },\n+  dropdownIconOpen: {\n+    transform: 'rotate(0deg)',\n+  }\n+};\n+\n+const FlexColumnWithRightMargin = ({style = {}, children}) => {\n+  return <FlexColumn style={{...styles.fixedWidthWithMargin, ...style}}>\n+    {...children}\n+  </FlexColumn>;\n+};\n+\n+const LabelWithPrimaryColor = ({style = {}, children}) => {\n+  return <label style={{color: colors.primary, ...style}}>\n+    {...children}\n+  </label>;\n+};\n+\n+interface State {\n+  googleProject: string;\n+  workspace: Workspace;\n+  collaborators: Array<UserRole>;\n+  resources: AdminWorkspaceResources;\n+  detailsOpen: boolean;\n+}\n+\n+export class AdminWorkspace extends React.Component<{}, State> {\n+  constructor(props) {\n+    super(props);\n+\n+    this.state = {\n+      googleProject: '',\n+      workspace: null,\n+      collaborators: [],\n+      resources: {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM2MDk1Nw=="}, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 68}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDg4Mjg4OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/admin/admin-workspace.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjoyMzoyOVrOFo1XaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjoyMzoyOVrOFo1XaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM2MTcwNQ==", "bodyText": "[opt nit] This is trivial enough and only used in one place, it's probably safe to do the setState inline.", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378361705", "createdAt": "2020-02-12T16:23:29Z", "author": {"login": "gjuggler"}, "path": "ui/src/app/pages/admin/admin-workspace.tsx", "diffHunk": "@@ -0,0 +1,301 @@\n+import * as React from 'react';\n+\n+import {Component} from '@angular/core';\n+\n+import {Button, Clickable} from 'app/components/buttons';\n+import {FlexColumn, FlexRow} from 'app/components/flex';\n+import {ClrIcon} from 'app/components/icons';\n+import {TextInput} from 'app/components/inputs';\n+import {workspaceAdminApi} from 'app/services/swagger-fetch-clients';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase} from 'app/utils';\n+import {\n+  getSelectedPopulations,\n+  getSelectedResearchPurposeItems\n+} from 'app/utils/research-purpose';\n+\n+import {\n+  AdminWorkspaceResources,\n+  UserRole,\n+  Workspace\n+} from 'generated/fetch';\n+\n+\n+const styles = {\n+  fixedWidthWithMargin: {\n+    width: '10rem',\n+    marginRight: '1rem'\n+  },\n+  dropdownIcon: {\n+    marginRight: '1rem',\n+    transform: 'rotate(180deg)',\n+    transition: 'transform 0.5s',\n+    color: colors.primary\n+  },\n+  dropdownIconOpen: {\n+    transform: 'rotate(0deg)',\n+  }\n+};\n+\n+const FlexColumnWithRightMargin = ({style = {}, children}) => {\n+  return <FlexColumn style={{...styles.fixedWidthWithMargin, ...style}}>\n+    {...children}\n+  </FlexColumn>;\n+};\n+\n+const LabelWithPrimaryColor = ({style = {}, children}) => {\n+  return <label style={{color: colors.primary, ...style}}>\n+    {...children}\n+  </label>;\n+};\n+\n+interface State {\n+  googleProject: string;\n+  workspace: Workspace;\n+  collaborators: Array<UserRole>;\n+  resources: AdminWorkspaceResources;\n+  detailsOpen: boolean;\n+}\n+\n+export class AdminWorkspace extends React.Component<{}, State> {\n+  constructor(props) {\n+    super(props);\n+\n+    this.state = {\n+      googleProject: '',\n+      workspace: null,\n+      collaborators: [],\n+      resources: {\n+        workspaceObjects: {\n+          cohortCount: 0,\n+          conceptSetCount: 0,\n+          datasetCount: 0\n+        },\n+        cloudStorage: {\n+          notebookFileCount: 0,\n+          nonNotebookFileCount: 0,\n+          storageBytesUsed: 0\n+        },\n+        clusters: []\n+      },\n+      detailsOpen: false\n+    };\n+  }\n+\n+  updateProject(newProject: string) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 85}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDg5MTY2OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/admin/admin-workspace.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjoyNTo0MVrOFo1c4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjoyNTo0MVrOFo1c4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM2MzEwNg==", "bodyText": "I like these", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378363106", "createdAt": "2020-02-12T16:25:41Z", "author": {"login": "jmthibault79"}, "path": "ui/src/app/pages/admin/admin-workspace.tsx", "diffHunk": "@@ -0,0 +1,301 @@\n+import * as React from 'react';\n+\n+import {Component} from '@angular/core';\n+\n+import {Button, Clickable} from 'app/components/buttons';\n+import {FlexColumn, FlexRow} from 'app/components/flex';\n+import {ClrIcon} from 'app/components/icons';\n+import {TextInput} from 'app/components/inputs';\n+import {workspaceAdminApi} from 'app/services/swagger-fetch-clients';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase} from 'app/utils';\n+import {\n+  getSelectedPopulations,\n+  getSelectedResearchPurposeItems\n+} from 'app/utils/research-purpose';\n+\n+import {\n+  AdminWorkspaceResources,\n+  UserRole,\n+  Workspace\n+} from 'generated/fetch';\n+\n+\n+const styles = {\n+  fixedWidthWithMargin: {\n+    width: '10rem',\n+    marginRight: '1rem'\n+  },\n+  dropdownIcon: {\n+    marginRight: '1rem',\n+    transform: 'rotate(180deg)',\n+    transition: 'transform 0.5s',\n+    color: colors.primary\n+  },\n+  dropdownIconOpen: {\n+    transform: 'rotate(0deg)',\n+  }\n+};\n+\n+const FlexColumnWithRightMargin = ({style = {}, children}) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDkwODE2OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/admin/admin-workspace.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjoyOTo1NFrOFo1nQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjoyOTo1NFrOFo1nQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM2NTc2Mg==", "bodyText": "This is already pretty great, but how about a function like this: workspaceInfoField(labelText, divContents)", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378365762", "createdAt": "2020-02-12T16:29:54Z", "author": {"login": "jmthibault79"}, "path": "ui/src/app/pages/admin/admin-workspace.tsx", "diffHunk": "@@ -0,0 +1,301 @@\n+import * as React from 'react';\n+\n+import {Component} from '@angular/core';\n+\n+import {Button, Clickable} from 'app/components/buttons';\n+import {FlexColumn, FlexRow} from 'app/components/flex';\n+import {ClrIcon} from 'app/components/icons';\n+import {TextInput} from 'app/components/inputs';\n+import {workspaceAdminApi} from 'app/services/swagger-fetch-clients';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase} from 'app/utils';\n+import {\n+  getSelectedPopulations,\n+  getSelectedResearchPurposeItems\n+} from 'app/utils/research-purpose';\n+\n+import {\n+  AdminWorkspaceResources,\n+  UserRole,\n+  Workspace\n+} from 'generated/fetch';\n+\n+\n+const styles = {\n+  fixedWidthWithMargin: {\n+    width: '10rem',\n+    marginRight: '1rem'\n+  },\n+  dropdownIcon: {\n+    marginRight: '1rem',\n+    transform: 'rotate(180deg)',\n+    transition: 'transform 0.5s',\n+    color: colors.primary\n+  },\n+  dropdownIconOpen: {\n+    transform: 'rotate(0deg)',\n+  }\n+};\n+\n+const FlexColumnWithRightMargin = ({style = {}, children}) => {\n+  return <FlexColumn style={{...styles.fixedWidthWithMargin, ...style}}>\n+    {...children}\n+  </FlexColumn>;\n+};\n+\n+const LabelWithPrimaryColor = ({style = {}, children}) => {\n+  return <label style={{color: colors.primary, ...style}}>\n+    {...children}\n+  </label>;\n+};\n+\n+interface State {\n+  googleProject: string;\n+  workspace: Workspace;\n+  collaborators: Array<UserRole>;\n+  resources: AdminWorkspaceResources;\n+  detailsOpen: boolean;\n+}\n+\n+export class AdminWorkspace extends React.Component<{}, State> {\n+  constructor(props) {\n+    super(props);\n+\n+    this.state = {\n+      googleProject: '',\n+      workspace: null,\n+      collaborators: [],\n+      resources: {\n+        workspaceObjects: {\n+          cohortCount: 0,\n+          conceptSetCount: 0,\n+          datasetCount: 0\n+        },\n+        cloudStorage: {\n+          notebookFileCount: 0,\n+          nonNotebookFileCount: 0,\n+          storageBytesUsed: 0\n+        },\n+        clusters: []\n+      },\n+      detailsOpen: false\n+    };\n+  }\n+\n+  updateProject(newProject: string) {\n+    this.setState({googleProject: newProject});\n+  }\n+\n+  getFederatedWorkspaceInformation() {\n+    workspaceAdminApi().getFederatedWorkspaceDetails(this.state.googleProject).then(\n+      response => {\n+        this.setState({\n+          workspace: response.workspace,\n+          collaborators: response.collaborators,\n+          resources: response.resources\n+        });\n+      }\n+    ).catch(error => {\n+      console.error(error);\n+    });\n+  }\n+\n+  maybeGetFederatedWorkspaceInformation(event) {\n+    if (event.key === 'Enter') {\n+      return this.getFederatedWorkspaceInformation();\n+    }\n+  }\n+\n+  render() {\n+    const {workspace, collaborators, resources, detailsOpen} = this.state;\n+    return <div>\n+      <h2>Manage Workspaces</h2>\n+      <FlexRow style={{justifyContent: 'flex-start', alignItems: 'center'}}>\n+        <label style={{marginRight: '1rem'}}>Google Project ID</label>\n+        <TextInput\n+            style={styles.fixedWidthWithMargin}\n+            onChange={value => this.updateProject(value)}\n+            onKeyDown={event => this.maybeGetFederatedWorkspaceInformation(event)}\n+        />\n+        <Button\n+            style={{height: '1.5rem'}}\n+            onClick={() => this.getFederatedWorkspaceInformation()}\n+        >\n+          Search\n+        </Button>\n+      </FlexRow>\n+      {\n+        workspace && <FlexColumn>\n+          <h3>Workspace Admin Actions</h3>\n+          <FlexRow style={{justifyContent: 'space-between'}}>\n+            <Button>Shut down all VMs</Button>\n+            <Button>Disable workspace</Button>\n+            <Button>Disable all collaborators</Button>\n+            <Button>Exclude from public directory</Button>\n+            <Button>Log administrative comment</Button>\n+            <Button>Publish workspace</Button>\n+          </FlexRow>\n+        </FlexColumn>\n+      }\n+      {workspace && (resources.workspaceObjects || resources.cloudStorage) &&\n+        <FlexColumn style={{flex: '1 0 auto'}}>\n+          <h3>Basic Information</h3>\n+          <FlexRow>\n+            <FlexColumnWithRightMargin>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 144}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDkwOTg0OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/admin/admin-workspace.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjozMDoyMVrOFo1oZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjozMDoyMVrOFo1oZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM2NjA1Mg==", "bodyText": "[Hobby-horse of mine, but ultimately optional] IMO console.error should be banned from our frontend code :) Can you add a simple loadingError state variable and display? It doesn't need to be sophisticated.\nAlternatively, we can ignore on the understanding that (1) this isn't really end-user-facing and (2) we're tracking https://precisionmedicineinitiative.atlassian.net/browse/RW-4392 and https://precisionmedicineinitiative.atlassian.net/browse/RW-4406 to improve this across the Workbench.", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378366052", "createdAt": "2020-02-12T16:30:21Z", "author": {"login": "gjuggler"}, "path": "ui/src/app/pages/admin/admin-workspace.tsx", "diffHunk": "@@ -0,0 +1,301 @@\n+import * as React from 'react';\n+\n+import {Component} from '@angular/core';\n+\n+import {Button, Clickable} from 'app/components/buttons';\n+import {FlexColumn, FlexRow} from 'app/components/flex';\n+import {ClrIcon} from 'app/components/icons';\n+import {TextInput} from 'app/components/inputs';\n+import {workspaceAdminApi} from 'app/services/swagger-fetch-clients';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase} from 'app/utils';\n+import {\n+  getSelectedPopulations,\n+  getSelectedResearchPurposeItems\n+} from 'app/utils/research-purpose';\n+\n+import {\n+  AdminWorkspaceResources,\n+  UserRole,\n+  Workspace\n+} from 'generated/fetch';\n+\n+\n+const styles = {\n+  fixedWidthWithMargin: {\n+    width: '10rem',\n+    marginRight: '1rem'\n+  },\n+  dropdownIcon: {\n+    marginRight: '1rem',\n+    transform: 'rotate(180deg)',\n+    transition: 'transform 0.5s',\n+    color: colors.primary\n+  },\n+  dropdownIconOpen: {\n+    transform: 'rotate(0deg)',\n+  }\n+};\n+\n+const FlexColumnWithRightMargin = ({style = {}, children}) => {\n+  return <FlexColumn style={{...styles.fixedWidthWithMargin, ...style}}>\n+    {...children}\n+  </FlexColumn>;\n+};\n+\n+const LabelWithPrimaryColor = ({style = {}, children}) => {\n+  return <label style={{color: colors.primary, ...style}}>\n+    {...children}\n+  </label>;\n+};\n+\n+interface State {\n+  googleProject: string;\n+  workspace: Workspace;\n+  collaborators: Array<UserRole>;\n+  resources: AdminWorkspaceResources;\n+  detailsOpen: boolean;\n+}\n+\n+export class AdminWorkspace extends React.Component<{}, State> {\n+  constructor(props) {\n+    super(props);\n+\n+    this.state = {\n+      googleProject: '',\n+      workspace: null,\n+      collaborators: [],\n+      resources: {\n+        workspaceObjects: {\n+          cohortCount: 0,\n+          conceptSetCount: 0,\n+          datasetCount: 0\n+        },\n+        cloudStorage: {\n+          notebookFileCount: 0,\n+          nonNotebookFileCount: 0,\n+          storageBytesUsed: 0\n+        },\n+        clusters: []\n+      },\n+      detailsOpen: false\n+    };\n+  }\n+\n+  updateProject(newProject: string) {\n+    this.setState({googleProject: newProject});\n+  }\n+\n+  getFederatedWorkspaceInformation() {\n+    workspaceAdminApi().getFederatedWorkspaceDetails(this.state.googleProject).then(\n+      response => {\n+        this.setState({\n+          workspace: response.workspace,\n+          collaborators: response.collaborators,\n+          resources: response.resources\n+        });\n+      }\n+    ).catch(error => {\n+      console.error(error);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 99}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDkyMDA4OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/admin/admin-workspace.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjozMjo1N1rOFo1vFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjozMjo1N1rOFo1vFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM2Nzc2Nw==", "bodyText": "[nit] Would it be possible to shorten this name? It distracts a bit from the markup since it's used a lot. Some ideas:\n\nFlexWithMargin\nAdminFlexColumn\nAdminFlex", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378367767", "createdAt": "2020-02-12T16:32:57Z", "author": {"login": "gjuggler"}, "path": "ui/src/app/pages/admin/admin-workspace.tsx", "diffHunk": "@@ -0,0 +1,301 @@\n+import * as React from 'react';\n+\n+import {Component} from '@angular/core';\n+\n+import {Button, Clickable} from 'app/components/buttons';\n+import {FlexColumn, FlexRow} from 'app/components/flex';\n+import {ClrIcon} from 'app/components/icons';\n+import {TextInput} from 'app/components/inputs';\n+import {workspaceAdminApi} from 'app/services/swagger-fetch-clients';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase} from 'app/utils';\n+import {\n+  getSelectedPopulations,\n+  getSelectedResearchPurposeItems\n+} from 'app/utils/research-purpose';\n+\n+import {\n+  AdminWorkspaceResources,\n+  UserRole,\n+  Workspace\n+} from 'generated/fetch';\n+\n+\n+const styles = {\n+  fixedWidthWithMargin: {\n+    width: '10rem',\n+    marginRight: '1rem'\n+  },\n+  dropdownIcon: {\n+    marginRight: '1rem',\n+    transform: 'rotate(180deg)',\n+    transition: 'transform 0.5s',\n+    color: colors.primary\n+  },\n+  dropdownIconOpen: {\n+    transform: 'rotate(0deg)',\n+  }\n+};\n+\n+const FlexColumnWithRightMargin = ({style = {}, children}) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDk1MzQwOnYy", "diffSide": "RIGHT", "path": "ui/src/app/utils/research-purpose.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjo0MDo1NlrOFo2D_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMToxNjo0N1rOFo-2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM3MzExNw==", "bodyText": "hooray for reuse!\nWould it make sense to have the parameters be ResearchPurpose instead, since that is all these functions need?", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378373117", "createdAt": "2020-02-12T16:40:56Z", "author": {"login": "jmthibault79"}, "path": "ui/src/app/utils/research-purpose.ts", "diffHunk": "@@ -0,0 +1,26 @@\n+import {ResearchPurposeItems, SpecificPopulationItems} from 'app/pages/workspace/workspace-edit';\n+import {SpecificPopulationEnum, Workspace} from 'generated/fetch';\n+\n+export function getSelectedResearchPurposeItems(workspace: Workspace) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUxNzA0Ng==", "bodyText": "probably yeah", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r378517046", "createdAt": "2020-02-12T21:16:47Z", "author": {"login": "als364"}, "path": "ui/src/app/utils/research-purpose.ts", "diffHunk": "@@ -0,0 +1,26 @@\n+import {ResearchPurposeItems, SpecificPopulationItems} from 'app/pages/workspace/workspace-edit';\n+import {SpecificPopulationEnum, Workspace} from 'generated/fetch';\n+\n+export function getSelectedResearchPurposeItems(workspace: Workspace) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM3MzExNw=="}, "originalCommit": {"oid": "e08f465be337ef7ff50a6979b3a748bedf00db2d"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0NjAwMTAyOnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/admin/admin-workspace.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMzoyNDozOVrOFpnAkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMzoyNDozOVrOFpnAkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE3NTA1Ng==", "bodyText": "const styles = reactStyles({", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r379175056", "createdAt": "2020-02-13T23:24:39Z", "author": {"login": "jmthibault79"}, "path": "ui/src/app/pages/admin/admin-workspace.tsx", "diffHunk": "@@ -0,0 +1,310 @@\n+import * as React from 'react';\n+\n+import {Component} from '@angular/core';\n+\n+import {Button, Clickable} from 'app/components/buttons';\n+import {FlexColumn, FlexRow} from 'app/components/flex';\n+import {ClrIcon} from 'app/components/icons';\n+import {TextInput} from 'app/components/inputs';\n+import {workspaceAdminApi} from 'app/services/swagger-fetch-clients';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase} from 'app/utils';\n+import {\n+  getSelectedPopulations,\n+  getSelectedResearchPurposeItems\n+} from 'app/utils/research-purpose';\n+\n+import {\n+  AdminWorkspaceResources,\n+  UserRole,\n+  Workspace\n+} from 'generated/fetch';\n+\n+\n+const reactStyles = {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1a753f94f2451af70f53b10d7aa7e5c09b1c4ee"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0NjAwMTg3OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/admin/admin-workspace.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMzoyNTowOFrOFpnBMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMzoyNTowOFrOFpnBMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE3NTIxNw==", "bodyText": "nice", "url": "https://github.com/all-of-us/workbench/pull/3117#discussion_r379175217", "createdAt": "2020-02-13T23:25:08Z", "author": {"login": "jmthibault79"}, "path": "ui/src/app/pages/admin/admin-workspace.tsx", "diffHunk": "@@ -0,0 +1,310 @@\n+import * as React from 'react';\n+\n+import {Component} from '@angular/core';\n+\n+import {Button, Clickable} from 'app/components/buttons';\n+import {FlexColumn, FlexRow} from 'app/components/flex';\n+import {ClrIcon} from 'app/components/icons';\n+import {TextInput} from 'app/components/inputs';\n+import {workspaceAdminApi} from 'app/services/swagger-fetch-clients';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase} from 'app/utils';\n+import {\n+  getSelectedPopulations,\n+  getSelectedResearchPurposeItems\n+} from 'app/utils/research-purpose';\n+\n+import {\n+  AdminWorkspaceResources,\n+  UserRole,\n+  Workspace\n+} from 'generated/fetch';\n+\n+\n+const reactStyles = {\n+  fixedWidthWithMargin: {\n+    width: '10rem',\n+    marginRight: '1rem'\n+  },\n+  dropdownIcon: {\n+    marginRight: '1rem',\n+    transform: 'rotate(180deg)',\n+    transition: 'transform 0.5s',\n+    color: colors.primary\n+  },\n+  dropdownIconOpen: {\n+    transform: 'rotate(0deg)',\n+  }\n+};\n+\n+const FlexWithMargin = ({style = {}, children}) => {\n+  return <FlexColumn style={{...reactStyles.fixedWidthWithMargin, ...style}}>\n+    {...children}\n+  </FlexColumn>;\n+};\n+\n+const PurpleLabel = ({style = {}, children}) => {\n+  return <label style={{color: colors.primary, ...style}}>\n+    {...children}\n+  </label>;\n+};\n+\n+interface State {\n+  googleProject: string;\n+  workspace: Workspace;\n+  collaborators: Array<UserRole>;\n+  resources: AdminWorkspaceResources;\n+  detailsOpen: boolean;\n+}\n+\n+export class AdminWorkspace extends React.Component<{}, State> {\n+  constructor(props) {\n+    super(props);\n+\n+    this.state = {\n+      googleProject: '',\n+      workspace: null,\n+      collaborators: [],\n+      resources: {},\n+      detailsOpen: false\n+    };\n+  }\n+\n+  getFederatedWorkspaceInformation() {\n+    workspaceAdminApi().getFederatedWorkspaceDetails(this.state.googleProject).then(\n+      response => {\n+        this.setState({\n+          workspace: response.workspace,\n+          collaborators: response.collaborators,\n+          resources: response.resources\n+        });\n+      }\n+    );\n+  }\n+\n+  maybeGetFederatedWorkspaceInformation(event) {\n+    if (event.key === 'Enter') {\n+      return this.getFederatedWorkspaceInformation();\n+    }\n+  }\n+\n+  workspaceInfoField(labelText, divContents, widthMultiplier = 1) {\n+    const width = 10 * (widthMultiplier - 1) + 9;\n+    const widthString = width + 'rem';\n+    return <FlexWithMargin style={{width: widthString}}>\n+      <PurpleLabel>{labelText}</PurpleLabel>\n+      <div style={{wordWrap: 'break-word'}}>{divContents}</div>\n+    </FlexWithMargin>\n+  }\n+\n+  render() {\n+    const {workspace, collaborators, resources, detailsOpen} = this.state;\n+    return <div>\n+      <h2>Manage Workspaces</h2>\n+      <FlexRow style={{justifyContent: 'flex-start', alignItems: 'center'}}>\n+        <label style={{marginRight: '1rem'}}>Google Project ID</label>\n+        <TextInput\n+            style={reactStyles.fixedWidthWithMargin}\n+            onChange={value => this.setState({googleProject: value})}\n+            onKeyDown={event => this.maybeGetFederatedWorkspaceInformation(event)}\n+        />\n+        <Button\n+            style={{height: '1.5rem'}}\n+            onClick={() => this.getFederatedWorkspaceInformation()}\n+        >\n+          Search\n+        </Button>\n+      </FlexRow>\n+      {\n+        workspace && <FlexColumn>\n+          <h3>Workspace Admin Actions</h3>\n+          <FlexRow style={{justifyContent: 'space-between'}}>\n+            <Button>Shut down all VMs</Button>\n+            <Button>Disable workspace</Button>\n+            <Button>Disable all collaborators</Button>\n+            <Button>Exclude from public directory</Button>\n+            <Button>Log administrative comment</Button>\n+            <Button>Publish workspace</Button>\n+          </FlexRow>\n+        </FlexColumn>\n+      }\n+      {workspace && (resources.workspaceObjects || resources.cloudStorage) &&\n+        <FlexColumn style={{flex: '1 0 auto'}}>\n+          <h3>Basic Information</h3>\n+          <FlexRow>\n+            {this.workspaceInfoField('Workspace Name', workspace.name)}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1a753f94f2451af70f53b10d7aa7e5c09b1c4ee"}, "originalPosition": 135}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3313, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}