{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3MTE3NjIx", "number": 3691, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNToyODoyMFrOEHJ6zQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNzowMjowMlrOEHLrrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1OTM3OTk3OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNToyODoyMVrOGmYzvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNToyODoyMVrOGmYzvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjkwNTUzMg==", "bodyText": "nit: in title case this should be Disease of Focus", "url": "https://github.com/all-of-us/workbench/pull/3691#discussion_r442905532", "createdAt": "2020-06-19T15:28:21Z", "author": {"login": "als364"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -876,38 +880,35 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n           populationDetails.includes(SpecificPopulationEnum.OTHER)) {\n         values = {...values, otherPopulationDetails};\n         constraints['otherPopulationDetails'] = {\n-          presence: {\n-            allowEmpty: false\n-          },\n           length: {\n-            maximum: 100\n+            minimum: 1,\n+            maximum: 100,\n+            ...lengthMessages('Specific Population Other')\n           }\n         };\n       }\n       if (diseaseFocusedResearch) {\n         values = {...values, diseaseOfFocus};\n         constraints['diseaseOfFocus'] = {\n-          presence: {\n-            allowEmpty: false\n-          },\n           length: {\n-            maximum: 80\n+            minimum: 1,\n+            maximum: 80,\n+            ...lengthMessages('Disease Of Focus')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1c60c6710a1b100ed7335af3b526fdaeb1670bf"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1OTM4MDgwOnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNToyODozN1rOGmY0Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNToyODozN1rOGmY0Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjkwNTY3NQ==", "bodyText": "nit: this should probably be something clearer like Other specific populations", "url": "https://github.com/all-of-us/workbench/pull/3691#discussion_r442905675", "createdAt": "2020-06-19T15:28:37Z", "author": {"login": "als364"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -876,38 +880,35 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n           populationDetails.includes(SpecificPopulationEnum.OTHER)) {\n         values = {...values, otherPopulationDetails};\n         constraints['otherPopulationDetails'] = {\n-          presence: {\n-            allowEmpty: false\n-          },\n           length: {\n-            maximum: 100\n+            minimum: 1,\n+            maximum: 100,\n+            ...lengthMessages('Specific Population Other')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1c60c6710a1b100ed7335af3b526fdaeb1670bf"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1OTM4MjExOnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNToyOTowMlrOGmY1IQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNToyOTowMlrOGmY1IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjkwNTg4OQ==", "bodyText": "nit: this should probably be something like Other methods of disseminating research findings", "url": "https://github.com/all-of-us/workbench/pull/3691#discussion_r442905889", "createdAt": "2020-06-19T15:29:02Z", "author": {"login": "als364"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -876,38 +880,35 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n           populationDetails.includes(SpecificPopulationEnum.OTHER)) {\n         values = {...values, otherPopulationDetails};\n         constraints['otherPopulationDetails'] = {\n-          presence: {\n-            allowEmpty: false\n-          },\n           length: {\n-            maximum: 100\n+            minimum: 1,\n+            maximum: 100,\n+            ...lengthMessages('Specific Population Other')\n           }\n         };\n       }\n       if (diseaseFocusedResearch) {\n         values = {...values, diseaseOfFocus};\n         constraints['diseaseOfFocus'] = {\n-          presence: {\n-            allowEmpty: false\n-          },\n           length: {\n-            maximum: 80\n+            minimum: 1,\n+            maximum: 80,\n+            ...lengthMessages('Disease Of Focus')\n           }\n         };\n       }\n       if (disseminateResearchFindingList &&\n           disseminateResearchFindingList.includes(DisseminateResearchEnum.OTHER)) {\n         values = {...values, otherDisseminateResearchFindings};\n         constraints['otherDisseminateResearchFindings'] = {\n-          presence: {\n-            allowEmpty: false\n-          },\n           length: {\n-            maximum: 100\n+            minimum: 1,\n+            maximum: 100,\n+            ...lengthMessages('Disseminate Research Findings Other')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1c60c6710a1b100ed7335af3b526fdaeb1670bf"}, "originalPosition": 81}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1OTY1NzY4OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNjo1NzozMVrOGmbhkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNjo1NzozMVrOGmbhkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjk1MDAzNQ==", "bodyText": "nit: this comment is now annotating the wrong block. Move the helper function above it?", "url": "https://github.com/all-of-us/workbench/pull/3691#discussion_r442950035", "createdAt": "2020-06-19T16:57:31Z", "author": {"login": "gjuggler"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -839,30 +839,38 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n       // TODO: This validation spec should include error messages which get", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a83ef1a33b65c610f4f6d45a815b83d44421221"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1OTY2ODk0OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNzowMjowMlrOGmbpTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNzowMjowMlrOGmbpTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjk1MjAxNQ==", "bodyText": "To help future maintainers, please add a comment up here indicating why these constraints can be left without a prefix string \u2013\u00a0e.g. \"because it requires HTML formatting, the prefix string is omitted here and included in the React template below\".", "url": "https://github.com/all-of-us/workbench/pull/3691#discussion_r442952015", "createdAt": "2020-06-19T17:02:02Z", "author": {"login": "gjuggler"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -839,30 +839,38 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n       // TODO: This validation spec should include error messages which get\n       // surfaced directly. Currently these constraints are entirely separate\n       // from the user facing error strings we render.\n+      const lengthMessages = (prefix = '') => ({\n+        tooShort: `${prefix} cannot be blank`,\n+        tooLong: `${prefix} cannot exceed %{count} characters`\n+      });\n+\n       const constraints: object = {\n         name: {\n-          length: { minimum: 1, maximum: 80 }\n+          length: { minimum: 1, maximum: 80, ...lengthMessages('Name')}\n         },\n         billingAccountName: { presence: true },\n-        intendedStudy: { length: { minimum: 1, maximum: 1000 } },\n+        intendedStudy: { length: { minimum: 1, maximum: 1000, ...lengthMessages() } },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a83ef1a33b65c610f4f6d45a815b83d44421221"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2547, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}