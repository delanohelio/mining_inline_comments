{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwMDQ2NTk1", "number": 2977, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNzo0NDoyNlrODWnqAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxODoxNjowOVrODWoKEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MDQ0OTkyOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/pmiops/workbench/db/model/DbDemographicSurvey.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNzo0NDoyNlrOFbesNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxOToyNTo1OVrOFbhYIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM1ODcxMQ==", "bodyText": "why reorder these?  I would expect the order to match the accessors below", "url": "https://github.com/all-of-us/workbench/pull/2977#discussion_r364358711", "createdAt": "2020-01-08T17:44:26Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/db/model/DbDemographicSurvey.java", "diffHunk": "@@ -19,18 +19,22 @@\n import org.pmiops.workbench.model.Ethnicity;\n import org.pmiops.workbench.model.Gender;\n import org.pmiops.workbench.model.Race;\n+import org.pmiops.workbench.model.SexAtBirth;\n+import org.pmiops.workbench.model.SexualOrientation;\n \n @Entity\n @Table(name = \"demographic_survey\")\n public class DbDemographicSurvey {\n-  private long id;\n-  private List<Short> race;\n+  private Short disability;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abeee3097a91fd7bf626f921e058c2396a6921b6"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwMjcyMg==", "bodyText": "I made them alphabetical. I can update the accessors to follow, but I think that will make things easier to find.", "url": "https://github.com/all-of-us/workbench/pull/2977#discussion_r364402722", "createdAt": "2020-01-08T19:25:59Z", "author": {"login": "s-rubenstein"}, "path": "api/src/main/java/org/pmiops/workbench/db/model/DbDemographicSurvey.java", "diffHunk": "@@ -19,18 +19,22 @@\n import org.pmiops.workbench.model.Ethnicity;\n import org.pmiops.workbench.model.Gender;\n import org.pmiops.workbench.model.Race;\n+import org.pmiops.workbench.model.SexAtBirth;\n+import org.pmiops.workbench.model.SexualOrientation;\n \n @Entity\n @Table(name = \"demographic_survey\")\n public class DbDemographicSurvey {\n-  private long id;\n-  private List<Short> race;\n+  private Short disability;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM1ODcxMQ=="}, "originalCommit": {"oid": "abeee3097a91fd7bf626f921e058c2396a6921b6"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MDQ1MjMyOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/pmiops/workbench/db/model/DbDemographicSurvey.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNzo0NToyM1rOFbetyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNzo1MjoxNlrOFbe5eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM1OTExMg==", "bodyText": "Can replace with .map(DemographicSurveyEnum::sexualOrientationFromStorage)", "url": "https://github.com/all-of-us/workbench/pull/2977#discussion_r364359112", "createdAt": "2020-01-08T17:45:23Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/db/model/DbDemographicSurvey.java", "diffHunk": "@@ -94,6 +98,74 @@ public void setRaceEnum(List<Race> raceList) {\n             .collect(Collectors.toList());\n   }\n \n+  @ElementCollection(fetch = FetchType.LAZY)\n+  @CollectionTable(\n+      name = \"demographic_survey_sexual_orientation\",\n+      joinColumns = @JoinColumn(name = \"demographic_survey_id\"))\n+  @Column(name = \"sexual_orientation\")\n+  public List<Short> getSexualOrientation() {\n+    return sexualOrientation;\n+  }\n+\n+  public void setSexualOrientation(List<Short> sexualOrientation) {\n+    this.sexualOrientation = sexualOrientation;\n+  }\n+\n+  @Transient\n+  public List<SexualOrientation> getSexualOrientationEnum() {\n+    if (sexualOrientation == null) return null;\n+    return this.sexualOrientation.stream()\n+        .map(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abeee3097a91fd7bf626f921e058c2396a6921b6"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM2MjEwNg==", "bodyText": "same comments for sexAtBirth", "url": "https://github.com/all-of-us/workbench/pull/2977#discussion_r364362106", "createdAt": "2020-01-08T17:52:16Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/db/model/DbDemographicSurvey.java", "diffHunk": "@@ -94,6 +98,74 @@ public void setRaceEnum(List<Race> raceList) {\n             .collect(Collectors.toList());\n   }\n \n+  @ElementCollection(fetch = FetchType.LAZY)\n+  @CollectionTable(\n+      name = \"demographic_survey_sexual_orientation\",\n+      joinColumns = @JoinColumn(name = \"demographic_survey_id\"))\n+  @Column(name = \"sexual_orientation\")\n+  public List<Short> getSexualOrientation() {\n+    return sexualOrientation;\n+  }\n+\n+  public void setSexualOrientation(List<Short> sexualOrientation) {\n+    this.sexualOrientation = sexualOrientation;\n+  }\n+\n+  @Transient\n+  public List<SexualOrientation> getSexualOrientationEnum() {\n+    if (sexualOrientation == null) return null;\n+    return this.sexualOrientation.stream()\n+        .map(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM1OTExMg=="}, "originalCommit": {"oid": "abeee3097a91fd7bf626f921e058c2396a6921b6"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MDQ1MzE4OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/pmiops/workbench/db/model/DbDemographicSurvey.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNzo0NTo0MVrOFbeuXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNzo0NTo0MVrOFbeuXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM1OTI2Mg==", "bodyText": "Can replace with .map(DemographicSurveyEnum::sexualOrientationToStorage)", "url": "https://github.com/all-of-us/workbench/pull/2977#discussion_r364359262", "createdAt": "2020-01-08T17:45:41Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/db/model/DbDemographicSurvey.java", "diffHunk": "@@ -94,6 +98,74 @@ public void setRaceEnum(List<Race> raceList) {\n             .collect(Collectors.toList());\n   }\n \n+  @ElementCollection(fetch = FetchType.LAZY)\n+  @CollectionTable(\n+      name = \"demographic_survey_sexual_orientation\",\n+      joinColumns = @JoinColumn(name = \"demographic_survey_id\"))\n+  @Column(name = \"sexual_orientation\")\n+  public List<Short> getSexualOrientation() {\n+    return sexualOrientation;\n+  }\n+\n+  public void setSexualOrientation(List<Short> sexualOrientation) {\n+    this.sexualOrientation = sexualOrientation;\n+  }\n+\n+  @Transient\n+  public List<SexualOrientation> getSexualOrientationEnum() {\n+    if (sexualOrientation == null) return null;\n+    return this.sexualOrientation.stream()\n+        .map(\n+            (sexualOrientationObject) -> {\n+              return DemographicSurveyEnum.sexualOrientationFromStorage(sexualOrientationObject);\n+            })\n+        .collect(Collectors.toList());\n+  }\n+\n+  public void setSexualOrientationEnum(List<SexualOrientation> sexualOrientationList) {\n+    this.sexualOrientation =\n+        sexualOrientationList.stream()\n+            .map(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abeee3097a91fd7bf626f921e058c2396a6921b6"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MDUzMjAxOnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/login/account-creation/account-creation-survey.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxODoxNjowOVrOFbfgmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQyMjozMzozNVrOFbl5vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM3MjEyMw==", "bodyText": "Do we want to update this to Gender Identity ?", "url": "https://github.com/all-of-us/workbench/pull/2977#discussion_r364372123", "createdAt": "2020-01-08T18:16:09Z", "author": {"login": "jmthibault79"}, "path": "ui/src/app/pages/login/account-creation/account-creation-survey.tsx", "diffHunk": "@@ -143,37 +147,59 @@ export class AccountCreationSurvey extends React.Component<AccountCreationSurvey\n       </Section>\n \n       {/*Ethnicity section*/}\n-      <DropDownSection header='2. Ethnicity' options={AccountCreationOptions.Ethnicity}\n+      <DropDownSection header='2. Ethnicity' options={AccountCreationOptions.ethnicity}\n                        value={demographicSurvey.ethnicity}\n                        onChange={(e) => this.updateDemographicAttribute('ethnicity', e)}/>\n \n       {/*Gender section*/}\n       <Section header='3. Gender'>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abeee3097a91fd7bf626f921e058c2396a6921b6"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ3Njg2Mg==", "bodyText": "That's a text change. It sounds like there may be a lot of text changes on these pages, so may want to wait until those conversations are finished.", "url": "https://github.com/all-of-us/workbench/pull/2977#discussion_r364476862", "createdAt": "2020-01-08T22:33:35Z", "author": {"login": "s-rubenstein"}, "path": "ui/src/app/pages/login/account-creation/account-creation-survey.tsx", "diffHunk": "@@ -143,37 +147,59 @@ export class AccountCreationSurvey extends React.Component<AccountCreationSurvey\n       </Section>\n \n       {/*Ethnicity section*/}\n-      <DropDownSection header='2. Ethnicity' options={AccountCreationOptions.Ethnicity}\n+      <DropDownSection header='2. Ethnicity' options={AccountCreationOptions.ethnicity}\n                        value={demographicSurvey.ethnicity}\n                        onChange={(e) => this.updateDemographicAttribute('ethnicity', e)}/>\n \n       {/*Gender section*/}\n       <Section header='3. Gender'>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM3MjEyMw=="}, "originalCommit": {"oid": "abeee3097a91fd7bf626f921e058c2396a6921b6"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3572, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}