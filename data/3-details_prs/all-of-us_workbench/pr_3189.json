{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwMzM0ODg3", "number": 3189, "title": "[RW-4488][risk=no] Add workspace-specific routes for WS admin page", "bodyText": "See the Jira ticket for a bit more context. We want to be able to have URLs of the form\nhttp://researchallofus.org/admin/workspaces/aou-rw-0a95bc0e\nthat will land on the admin page for that given workspace.\nIt was a pretty straightforward task to split the view into a search & detail component. Down the line, we can expand the search component to actually search through workspaces & show a summary table before someone digs into any of the detailed pages.\nScreenshots:\n\n\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n I have run and tested this change locally", "createdAt": "2020-02-26T15:05:21Z", "url": "https://github.com/all-of-us/workbench/pull/3189", "merged": true, "mergeCommit": {"oid": "668747cd324a32eb135bb0d4d62c634e555d5d85"}, "closed": true, "closedAt": "2020-02-26T19:50:34Z", "author": {"login": "gjuggler"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIIE0lgH2gAyMzgwMzM0ODg3OjA5MDkyZmQ1ODgzNjg4YTFjZTY3MDZhYzBlNzIzNzRmZDU1ZDg4NzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcILt3oAFqTM2NTE3MDc0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "09092fd5883688a1ce6706ac0e72374fd55d8876", "author": {"user": {"login": "gjuggler", "name": "Greg Jordan"}}, "url": "https://github.com/all-of-us/workbench/commit/09092fd5883688a1ce6706ac0e72374fd55d8876", "committedDate": "2020-02-26T15:01:59Z", "message": "Split workspace-admin into search & detail components."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MTE4MzM2", "url": "https://github.com/all-of-us/workbench/pull/3189#pullrequestreview-365118336", "createdAt": "2020-02-26T17:59:29Z", "commit": {"oid": "09092fd5883688a1ce6706ac0e72374fd55d8876"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNzo1OToyOVrOFu2GIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxODoxMDozNVrOFu2c9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY2NTEyMg==", "bodyText": "Going direct to this component does mean that a second workspace can't be searched from this page. Probably fine for this use case though.", "url": "https://github.com/all-of-us/workbench/pull/3189#discussion_r384665122", "createdAt": "2020-02-26T17:59:29Z", "author": {"login": "als364"}, "path": "ui/src/app/app-routing.module.ts", "diffHunk": "@@ -287,9 +288,13 @@ const routes: Routes = [\n         component: AdminBannerComponent,\n         data: {title: 'Create Banner'}\n       }, {\n-        path: 'admin/workspace',\n+        path: 'admin/workspaces',\n+        component: AdminWorkspaceSearchComponent,\n+        data: { title: 'Workspace Admin'},\n+      }, {\n+        path: 'admin/workspaces/:workspaceNamespace',\n         component: AdminWorkspaceComponent,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09092fd5883688a1ce6706ac0e72374fd55d8876"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3MDg2NA==", "bodyText": "This I object to more than the above comment. Navigating away from the search bar means that you have to go back in order to search a second thing. I would strongly prefer to keep the search bar and do something with state that forces a fetch of the workspace information when the router is sent to admin/workspaces/{namespace}.", "url": "https://github.com/all-of-us/workbench/pull/3189#discussion_r384670864", "createdAt": "2020-02-26T18:10:24Z", "author": {"login": "als364"}, "path": "ui/src/app/pages/admin/admin-workspace-search.tsx", "diffHunk": "@@ -0,0 +1,62 @@\n+import {Component} from '@angular/core';\n+import {Button} from 'app/components/buttons';\n+import {FlexRow} from 'app/components/flex';\n+import {TextInput} from 'app/components/inputs';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase, UrlParamsProps, withUrlParams} from 'app/utils';\n+import {navigate} from 'app/utils/navigation';\n+import * as React from 'react';\n+\n+interface State {\n+  workspaceNamespace: string;\n+}\n+\n+class AdminWorkspaceSearchImpl extends React.Component<UrlParamsProps, State> {\n+  constructor(props) {\n+    super(props);\n+\n+    this.state = {\n+      workspaceNamespace: '',\n+    };\n+  }\n+\n+  navigateToWorkspace() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09092fd5883688a1ce6706ac0e72374fd55d8876"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3MDk2Nw==", "bodyText": "ty for keeping the enter-to-search though.", "url": "https://github.com/all-of-us/workbench/pull/3189#discussion_r384670967", "createdAt": "2020-02-26T18:10:35Z", "author": {"login": "als364"}, "path": "ui/src/app/pages/admin/admin-workspace-search.tsx", "diffHunk": "@@ -0,0 +1,62 @@\n+import {Component} from '@angular/core';\n+import {Button} from 'app/components/buttons';\n+import {FlexRow} from 'app/components/flex';\n+import {TextInput} from 'app/components/inputs';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase, UrlParamsProps, withUrlParams} from 'app/utils';\n+import {navigate} from 'app/utils/navigation';\n+import * as React from 'react';\n+\n+interface State {\n+  workspaceNamespace: string;\n+}\n+\n+class AdminWorkspaceSearchImpl extends React.Component<UrlParamsProps, State> {\n+  constructor(props) {\n+    super(props);\n+\n+    this.state = {\n+      workspaceNamespace: '',\n+    };\n+  }\n+\n+  navigateToWorkspace() {\n+    navigate(['/admin/workspaces/' + this.state.workspaceNamespace]);\n+  }\n+\n+  render() {\n+    return <FlexRow style={{justifyContent: 'flex-start', alignItems: 'center', marginTop: '1rem'}}>\n+        <label style={{color: colors.primary, marginRight: '1rem'}}>Workspace namespace</label>\n+        <TextInput\n+            style={{\n+              width: '10rem',\n+              marginRight: '1rem'\n+            }}\n+            onChange={value => this.setState({workspaceNamespace: value})}\n+            onKeyDown={(event: KeyboardEvent) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09092fd5883688a1ce6706ac0e72374fd55d8876"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MTcwNzQ2", "url": "https://github.com/all-of-us/workbench/pull/3189#pullrequestreview-365170746", "createdAt": "2020-02-26T19:16:32Z", "commit": {"oid": "09092fd5883688a1ce6706ac0e72374fd55d8876"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3385, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}