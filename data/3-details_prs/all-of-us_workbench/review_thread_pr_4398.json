{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2OTgxNjMz", "number": 4398, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNTo1MTo1NFrOFEDF8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNTo1MTo1NFrOFEDF8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5Nzg5Mjk5OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/pmiops/workbench/cohortbuilder/SearchGroupItemQueryBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNTo1MTo1NFrOID-xEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNjo0NTo1MFrOIEA_nA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA0NTAwOQ==", "bodyText": "Question why is is in wrapped in if condition !parents.isEmpty()", "url": "https://github.com/all-of-us/workbench/pull/4398#discussion_r541045009", "createdAt": "2020-12-11T15:51:54Z", "author": {"login": "NehaBroad"}, "path": "api/src/main/java/org/pmiops/workbench/cohortbuilder/SearchGroupItemQueryBuilder.java", "diffHunk": "@@ -631,6 +647,9 @@ private static void addParamValueAndFormat(\n               .collect(Collectors.toList());\n \n       if (!parents.isEmpty() || Domain.DRUG.toString().equals(domain)) {\n+        String domainParam =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdfb5fb5c74e8bc43d2afdeb8a62801f84f73b65"}, "originalPosition": 99}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA4MTUwMA==", "bodyText": "if we only have child nodes.. then the sql is simple\nis_standard = ? and concept_id in (?)\nif we have parents.. we have to lookup all parent and child nodes\nis_standard = ? and concept_id in (\n select distinct c.concept_id\n        from `project.dataset.cb_criteria` c\n        join (select cast(cr.id AS string) as id\n          from `project.dataset.cb_criteria` cr\n          where (domain_id = ?\n            and is_standard = ?\n            and concept_id in (?)\n            and is_selectable = 1 )) a\n        on (c.path like concat('%.', a.id, '.%') or c.path like concat('%.', a.id) or c.path like concat(a.id, '.%'))\n)\n\nFor Drugs we always have to lookup parent and child nodes.", "url": "https://github.com/all-of-us/workbench/pull/4398#discussion_r541081500", "createdAt": "2020-12-11T16:45:50Z", "author": {"login": "freemabd"}, "path": "api/src/main/java/org/pmiops/workbench/cohortbuilder/SearchGroupItemQueryBuilder.java", "diffHunk": "@@ -631,6 +647,9 @@ private static void addParamValueAndFormat(\n               .collect(Collectors.toList());\n \n       if (!parents.isEmpty() || Domain.DRUG.toString().equals(domain)) {\n+        String domainParam =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA0NTAwOQ=="}, "originalCommit": {"oid": "bdfb5fb5c74e8bc43d2afdeb8a62801f84f73b65"}, "originalPosition": 99}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3659, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}