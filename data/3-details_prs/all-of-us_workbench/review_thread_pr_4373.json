{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0MDYyOTA1", "number": 4373, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwMTo1Nzo1N1rOFCFMyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNToyMToxN1rOFLwTEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NzI2NjY2OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/pmiops/workbench/db/dao/WorkspaceDao.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwMTo1Nzo1N1rOIBDUHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwMTo1Nzo1N1rOIBDUHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzk3Mzc5MQ==", "bodyText": "I was using left outer join elsewhere, but this may be the same difference.", "url": "https://github.com/all-of-us/workbench/pull/4373#discussion_r537973791", "createdAt": "2020-12-08T01:57:57Z", "author": {"login": "jaycarlton"}, "path": "api/src/main/java/org/pmiops/workbench/db/dao/WorkspaceDao.java", "diffHunk": "@@ -122,8 +122,10 @@ default void updateBillingStatus(long workspaceId, BillingStatus status) {\n           + \"  w.scientificApproach AS rpScientificApproach,\\n\"\n           + \"  w.socialBehavioral AS rpSocialBehavioral,\\n\"\n           + \"  w.timeRequested AS rpTimeRequested,\\n\"\n-          + \"  w.workspaceId\\n\"\n+          + \"  w.workspaceId,\\n\"\n+          + \"  ft.cost as freeTierBillingUsage\\n\"\n           + \"FROM DbWorkspace w\\n\"\n+          + \"LEFT JOIN w.freeTierUsage ft\\n\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e47437d6e4c6a5f64084ffc3445c1e9c9602ab0a"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NzI2OTc2OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/pmiops/workbench/db/dao/projection/ProjectedReportingWorkspace.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwMTo1OToxOVrOIBDWEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwMTo1OToxOVrOIBDWEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzk3NDI4OQ==", "bodyText": "These classes are deprecated in favor of direct queries and RowMappers, but go ahead and use them since you're outrunning me.", "url": "https://github.com/all-of-us/workbench/pull/4373#discussion_r537974289", "createdAt": "2020-12-08T01:59:19Z", "author": {"login": "jaycarlton"}, "path": "api/src/main/java/org/pmiops/workbench/db/dao/projection/ProjectedReportingWorkspace.java", "diffHunk": "@@ -72,4 +72,6 @@\n   Timestamp getRpTimeRequested();\n \n   Long getWorkspaceId();\n+\n+  Double getFreeTierBillingUsage();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e47437d6e4c6a5f64084ffc3445c1e9c9602ab0a"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3ODY5MTkxOnYy", "diffSide": "RIGHT", "path": "api/reporting/schemas/input/descriptions/workspace_free_tier_usage.yaml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNToxOTo0OVrOIPGm-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QwMDoyNDoyM1rOIPaZeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjcwNzgzNQ==", "bodyText": "nit: add units, \"in USD\"", "url": "https://github.com/all-of-us/workbench/pull/4373#discussion_r552707835", "createdAt": "2021-01-06T15:19:49Z", "author": {"login": "gjuggler"}, "path": "api/reporting/schemas/input/descriptions/workspace_free_tier_usage.yaml", "diffHunk": "@@ -0,0 +1,7 @@\n+workspace_free_tier_usage:\n+  user_id: |\n+    ID of the user whose free tier quota was billed for this workspace.\n+  workspace_id: |\n+    ID of the workspace associated with this free tier cost.\n+  cost: |\n+    Free tier usage cost for this workspace.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41adae004bcf11cb582f9355d8471414aa433f79"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzAzMjA1OA==", "bodyText": "Done", "url": "https://github.com/all-of-us/workbench/pull/4373#discussion_r553032058", "createdAt": "2021-01-07T00:24:23Z", "author": {"login": "calbach"}, "path": "api/reporting/schemas/input/descriptions/workspace_free_tier_usage.yaml", "diffHunk": "@@ -0,0 +1,7 @@\n+workspace_free_tier_usage:\n+  user_id: |\n+    ID of the user whose free tier quota was billed for this workspace.\n+  workspace_id: |\n+    ID of the workspace associated with this free tier cost.\n+  cost: |\n+    Free tier usage cost for this workspace.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjcwNzgzNQ=="}, "originalCommit": {"oid": "41adae004bcf11cb582f9355d8471414aa433f79"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3ODY5OTY4OnYy", "diffSide": "RIGHT", "path": "api/reporting/schemas/input/descriptions/workspace.yaml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNToyMToxN1rOIPGsRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QwMDoyNDoyOVrOIPaZlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjcwOTE4OQ==", "bodyText": "This seems related to the old approach of joining it into the workspace table \u2013 remove?", "url": "https://github.com/all-of-us/workbench/pull/4373#discussion_r552709189", "createdAt": "2021-01-06T15:21:17Z", "author": {"login": "gjuggler"}, "path": "api/reporting/schemas/input/descriptions/workspace.yaml", "diffHunk": "@@ -14,6 +14,9 @@ workspace:\n       User ID of user who initially created this workspace.\n   disseminate_research_other: |\n       Description of user-defined research dissemination option.\n+  free_tier_billing_usage: |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41adae004bcf11cb582f9355d8471414aa433f79"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzAzMjA4NQ==", "bodyText": "Thanks, reverted", "url": "https://github.com/all-of-us/workbench/pull/4373#discussion_r553032085", "createdAt": "2021-01-07T00:24:29Z", "author": {"login": "calbach"}, "path": "api/reporting/schemas/input/descriptions/workspace.yaml", "diffHunk": "@@ -14,6 +14,9 @@ workspace:\n       User ID of user who initially created this workspace.\n   disseminate_research_other: |\n       Description of user-defined research dissemination option.\n+  free_tier_billing_usage: |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjcwOTE4OQ=="}, "originalCommit": {"oid": "41adae004bcf11cb582f9355d8471414aa433f79"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3631, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}