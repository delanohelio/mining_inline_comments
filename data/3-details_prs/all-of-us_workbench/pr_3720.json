{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxNDc4OTE5", "number": 3720, "title": "[RW-4825][risk=low] Enhanced data on Egress Alert", "bodyText": "Add more information on users and workspace associated with an OpsGenie egress alert.\nPutting some more metadata on the users and workspaces in the workspaces admin endpoint. This gives information about\nthe cluster\nthe user running it\nthe workspace's age\ncollaborators\nThere's a focus on human-centric details for the first responder to use, since most of the responses to the egress alerts going forward will benefit from information about the actual users and institutions.\nSome refactoring to make this data more available.\nExtracted from original PR at #3482\nPart 1: #3620\nPart 2: #3703\nPart 3: this PR\n\nPR checklist\n\n[x ] This PR meets the Acceptance Criteria in the JIRA story\n[x ] The JIRA story has been moved to Dev Review\n[ x] This PR includes appropriate unit tests\n I have run and tested this change locally\n I have run the E2E tests on ths change against my local UI + API server with yarn test-local\n If this includes a UI change, I have taken screen recordings or screenshots of the new behavior and notified the PO and UX designer\n[x ] If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-06-29T15:08:42Z", "url": "https://github.com/all-of-us/workbench/pull/3720", "merged": true, "mergeCommit": {"oid": "be7ab6fda189072a6fcba73714180c84b93fb02e"}, "closed": true, "closedAt": "2020-06-29T20:35:46Z", "author": {"login": "jaycarlton"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvE1C8gH2gAyNDQxNDc4OTE5OjMyYTU2YzRhNzFmODc4Yzc2OTYwZDI5MzgzYTU3NGU0ZGFmNWZkNWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwGPgigFqTQzOTQzODYyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "32a56c4a71f878c76960d29383a574e4daf5fd5d", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/32a56c4a71f878c76960d29383a574e4daf5fd5d", "committedDate": "2020-06-26T15:18:05Z", "message": "egress alert beautification"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ac71797cb33a3f80a43394ca4b5898817eb2410", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/1ac71797cb33a3f80a43394ca4b5898817eb2410", "committedDate": "2020-06-26T15:54:19Z", "message": "test fixup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97d8739648f4db6ccc9e6df0d8338b3ee8dee307", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/97d8739648f4db6ccc9e6df0d8338b3ee8dee307", "committedDate": "2020-06-29T15:10:52Z", "message": "spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3cfec08785416bd1fbc8165b69d1439b7336d00", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/d3cfec08785416bd1fbc8165b69d1439b7336d00", "committedDate": "2020-06-29T16:45:48Z", "message": "remove outdated verify's"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NDEzODYy", "url": "https://github.com/all-of-us/workbench/pull/3720#pullrequestreview-439413862", "createdAt": "2020-06-29T18:53:07Z", "commit": {"oid": "d3cfec08785416bd1fbc8165b69d1439b7336d00"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxODo1MzowN1rOGqd43w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxODo1NDo0OFrOGqd8cQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE4MzA3MQ==", "bodyText": "this looks extraneous", "url": "https://github.com/all-of-us/workbench/pull/3720#discussion_r447183071", "createdAt": "2020-06-29T18:53:07Z", "author": {"login": "jmthibault79"}, "path": "api/src/test/java/org/pmiops/workbench/api/ProfileControllerTest.java", "diffHunk": "@@ -806,6 +797,8 @@ public void updateVerifiedInstitutionalAffiliation_noSuchInstitution() {\n     createAccountRequest.getProfile().setVerifiedInstitutionalAffiliation(original);\n     createUser();\n \n+    final Profile profile = profileController.getMe().getBody();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3cfec08785416bd1fbc8165b69d1439b7336d00"}, "originalPosition": 208}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE4MzU1MQ==", "bodyText": "accident?", "url": "https://github.com/all-of-us/workbench/pull/3720#discussion_r447183551", "createdAt": "2020-06-29T18:54:00Z", "author": {"login": "jmthibault79"}, "path": "api/src/test/java/org/pmiops/workbench/api/ProfileControllerTest.java", "diffHunk": "@@ -1181,17 +1174,6 @@ public void testSyncEraCommons() {\n     assertThat(userDao.findUserByUsername(PRIMARY_EMAIL).getEraCommonsCompletionTime()).isNotNull();\n   }\n \n-  @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3cfec08785416bd1fbc8165b69d1439b7336d00"}, "originalPosition": 340}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE4Mzk4NQ==", "bodyText": "this does not seem to be used", "url": "https://github.com/all-of-us/workbench/pull/3720#discussion_r447183985", "createdAt": "2020-06-29T18:54:48Z", "author": {"login": "jmthibault79"}, "path": "api/src/test/java/org/pmiops/workbench/db/dao/UserServiceTest.java", "diffHunk": "@@ -61,6 +63,8 @@\n   private static final long TIMESTAMP_SECS = START_INSTANT.getEpochSecond();\n   private static final FakeClock PROVIDED_CLOCK = new FakeClock(START_INSTANT);\n   private static final int CLOCK_INCREMENT_MILLIS = 1000;\n+  private static final AccessBypassRequest ACCESS_BYPASS_REQUEST =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3cfec08785416bd1fbc8165b69d1439b7336d00"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "566daf82c183224e806a12465d1d05e06da5d476", "author": {"user": {"login": "jaycarlton", "name": "Jay Carlton"}}, "url": "https://github.com/all-of-us/workbench/commit/566daf82c183224e806a12465d1d05e06da5d476", "committedDate": "2020-06-29T19:13:23Z", "message": "PR fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NDM4NjI4", "url": "https://github.com/all-of-us/workbench/pull/3720#pullrequestreview-439438628", "createdAt": "2020-06-29T19:30:49Z", "commit": {"oid": "d3cfec08785416bd1fbc8165b69d1439b7336d00"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4633, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}