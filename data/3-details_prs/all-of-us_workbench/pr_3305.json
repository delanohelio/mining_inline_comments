{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0MzkzMjg0", "number": 3305, "title": "[no ticket][risk=no] Refactoring Home page tests", "bodyText": "Combine steps from Workspace cards have same ui size and Check Workspace card on Home page into one test.\nReworked code logic.\nFAIL  tests/home/home-page.spec.ts (188.854s)\n  Home page ui tests\n    \u2715 Workspace cards have same ui size (117910ms)\n    \u2713 Click on See All Workspace link (23277ms)\n    \u2713 Click on Create New Workspace link (19764ms)\n    \u2713 Check Create New Workspace link on Home page (13836ms)\n    \u2713 Check Workspace card on Home page (13752ms)\n\n  \u25cf Home page ui tests \u203a Workspace cards have same ui size\n\n    expect(received).toBeGreaterThan(expected)\n\n    Matcher error: received value must be a number or bigint\n\n    Received has value: undefined\n\n      47 |       }\n      48 |     }\n    > 49 |     expect(height).toBeGreaterThan(1);\n         |                    ^\n      50 |     expect(width).toBeGreaterThan(1);\n      51 |   });\n      52 | \n\n      at tests/home/home-page.spec.ts:49:20\n      at fulfilled (node_modules/tslib/tslib.js:110:62)", "createdAt": "2020-03-26T20:05:27Z", "url": "https://github.com/all-of-us/workbench/pull/3305", "merged": true, "mergeCommit": {"oid": "15ebf8349af56af503c240caebc5fae694f5937e"}, "closed": true, "closedAt": "2020-03-27T00:24:54Z", "author": {"login": "aweng98"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRhwEdAH2gAyMzk0MzkzMjg0OjYyOWY3ZmQwMTQzMThiZWJkYzc5ZWQ2ZDgwMGViMjc1M2Q4Y2I0ODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRlYgbgFqTM4MjUwNTA0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "629f7fd014318bebdc79ed6d800eb2753d8cb481", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/629f7fd014318bebdc79ed6d800eb2753d8cb481", "committedDate": "2020-03-26T20:02:10Z", "message": "refactor Home page tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMzc1MTE2", "url": "https://github.com/all-of-us/workbench/pull/3305#pullrequestreview-382375116", "createdAt": "2020-03-26T20:07:19Z", "commit": {"oid": "629f7fd014318bebdc79ed6d800eb2753d8cb481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMDowNzoxOVrOF8YZgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMDowNzoxOVrOF8YZgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg1ODYyNg==", "bodyText": "relocated steps from 'Check Workspace card on Home page' to this test. Change doesn't affect test coverage or code logic.", "url": "https://github.com/all-of-us/workbench/pull/3305#discussion_r398858626", "createdAt": "2020-03-26T20:07:19Z", "author": {"login": "aweng98"}, "path": "e2e/tests/home/home-page.spec.ts", "diffHunk": "@@ -38,19 +37,34 @@ describe('Home page ui tests', () => {\n       const cardElem = new BaseElement(page, card.asElementHandle());\n       expect(await cardElem.isVisible()).toBe(true);\n       const size = await cardElem.getSize();\n-      if (width === undefined) {\n+      expect(size).toBeTruthy();\n+      expect(size.height).toBeGreaterThan(1);\n+      expect(size.width).toBeGreaterThan(1);\n+\n+      if (width === undefined || height === undefined) {\n         width = size.width; // Initialize width and height with first card element's size, compare with rest cards\n         height = size.height;\n       } else {\n         expect(size.height).toEqual(height);\n         expect(size.width).toEqual(width);\n       }\n+\n+      // check workspace name has characters\n+      const cardName = await card.getResourceCardName();\n+      expect(cardName).toMatch(new RegExp(/^[a-zA-Z]+/));\n+\n+      // check ellipsis icon existed\n+      expect(await card.getEllipsisIcon()).toBeTruthy();\n+\n+      // Assumption: test user is workspace Owner.\n+      // Check ellipsis popup has right option values\n+      const links = await card.getPopupLinkTextsArray();\n+      expect(links).toEqual(expect.arrayContaining(['Share', 'Edit', 'Duplicate', 'Delete']));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "629f7fd014318bebdc79ed6d800eb2753d8cb481"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMzgxMjUx", "url": "https://github.com/all-of-us/workbench/pull/3305#pullrequestreview-382381251", "createdAt": "2020-03-26T20:15:31Z", "commit": {"oid": "629f7fd014318bebdc79ed6d800eb2753d8cb481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMDoxNTozMlrOF8YrgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMDoxNTozMlrOF8YrgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg2MzIzMg==", "bodyText": "fail test early if size isn't as expected. e.g. if size is undefined.", "url": "https://github.com/all-of-us/workbench/pull/3305#discussion_r398863232", "createdAt": "2020-03-26T20:15:32Z", "author": {"login": "aweng98"}, "path": "e2e/tests/home/home-page.spec.ts", "diffHunk": "@@ -38,19 +37,34 @@ describe('Home page ui tests', () => {\n       const cardElem = new BaseElement(page, card.asElementHandle());\n       expect(await cardElem.isVisible()).toBe(true);\n       const size = await cardElem.getSize();\n-      if (width === undefined) {\n+      expect(size).toBeTruthy();\n+      expect(size.height).toBeGreaterThan(1);\n+      expect(size.width).toBeGreaterThan(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "629f7fd014318bebdc79ed6d800eb2753d8cb481"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNTA1MDQ5", "url": "https://github.com/all-of-us/workbench/pull/3305#pullrequestreview-382505049", "createdAt": "2020-03-27T00:16:03Z", "commit": {"oid": "629f7fd014318bebdc79ed6d800eb2753d8cb481"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3297, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}