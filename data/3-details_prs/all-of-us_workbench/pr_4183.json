{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1MDY2OTI5", "number": 4183, "title": "[RW-5761][risk=no] Workbench long sign-in time sometimes is causing Puppeteer tests to fail randomly", "bodyText": "Capture screenshot when test fails in beforeEach.\nIncrease wait timeout from 30 seconds to 60 seconds for signed-in indicator.", "createdAt": "2020-10-16T19:42:03Z", "url": "https://github.com/all-of-us/workbench/pull/4183", "merged": true, "mergeCommit": {"oid": "999370f92a7f34421ca574e4edffc801fa091316"}, "closed": true, "closedAt": "2020-10-16T22:00:15Z", "author": {"login": "aweng98"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTLtURgH2gAyNTA1MDY2OTI5OjkzNmFhNjk2MDlhYjQxZmY5ZGM0MmY0ODRjYWRhZGFlYzdjNWU4YTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTNm2mAFqTUxMDgxODI2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "936aa69609ab41ff9dc42f484cadadaec7c5e8a6", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/936aa69609ab41ff9dc42f484cadadaec7c5e8a6", "committedDate": "2020-10-16T19:40:15Z", "message": "handle hook_failure event"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0140dbdbe9d3acbe2b01aae316769298b8f0db4", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/f0140dbdbe9d3acbe2b01aae316769298b8f0db4", "committedDate": "2020-10-16T20:00:35Z", "message": "wait app-signed-in 60 seconds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c72dc2e968cb368855188983e1e84c3bb4e4e024", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/c72dc2e968cb368855188983e1e84c3bb4e4e024", "committedDate": "2020-10-16T20:11:36Z", "message": "logs path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e19465359736c77e5a98a4883865ea43cde11732", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/e19465359736c77e5a98a4883865ea43cde11732", "committedDate": "2020-10-16T20:13:33Z", "message": "unchange config.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e00d07fa1902470dcbb2cca433216582b62249d0", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/e00d07fa1902470dcbb2cca433216582b62249d0", "committedDate": "2020-10-16T21:15:46Z", "message": "[SKIP CI] unchange jest-circus.setup.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fe54c2e137d53e118c898711350fa499af93ed8", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/2fe54c2e137d53e118c898711350fa499af93ed8", "committedDate": "2020-10-16T21:24:40Z", "message": "fail profile-page.spec.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5d799f80b23aacdf6d93788905ec28579f9b74e", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/b5d799f80b23aacdf6d93788905ec28579f9b74e", "committedDate": "2020-10-16T21:25:01Z", "message": "no retry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d3e03befeafba281078f93c5f4512a0a15914a7", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/8d3e03befeafba281078f93c5f4512a0a15914a7", "committedDate": "2020-10-16T21:38:03Z", "message": "revert"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwODA1MTU3", "url": "https://github.com/all-of-us/workbench/pull/4183#pullrequestreview-510805157", "createdAt": "2020-10-16T21:21:02Z", "commit": {"oid": "e00d07fa1902470dcbb2cca433216582b62249d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMToyMTowMlrOHjQIfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMToyMTowMlrOHjQIfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjcyNjUyNA==", "bodyText": "When issue first happened in CircleCI, there were no screenshot taken. Without screenshot, it was hard to determine what happened. After some digging, issue was because it occurred inside beforeEach.\nbeforeEach(async () => {\n    await signIn(page);\n  });\n\nAdding case 'hook_failure' solved problem.", "url": "https://github.com/all-of-us/workbench/pull/4183#discussion_r506726524", "createdAt": "2020-10-16T21:21:02Z", "author": {"login": "aweng98"}, "path": "e2e/puppeteer-custom-environment.ts", "diffHunk": "@@ -16,24 +16,29 @@ class PuppeteerCustomEnvironment extends PuppeteerEnvironment {\n \n   // Take a screenshot right after failure\n   async handleTestEvent(event, state) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e00d07fa1902470dcbb2cca433216582b62249d0"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwODE4MjY3", "url": "https://github.com/all-of-us/workbench/pull/4183#pullrequestreview-510818267", "createdAt": "2020-10-16T21:53:00Z", "commit": {"oid": "8d3e03befeafba281078f93c5f4512a0a15914a7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3984, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}