{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMTg0OTEw", "number": 3276, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxNToxNVrODp6Hiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxOTowMTo1OFrODrW07w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjcwNDExOnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxNToxNVrOF5X6vQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNjoxNDowOVrOF5aQyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTcwNTAyMQ==", "bodyText": "a little confused by this line. researchPurposeCategoriesSelected takes in a research purpose right? How are we able to pass in the state object here?", "url": "https://github.com/all-of-us/workbench/pull/3276#discussion_r395705021", "createdAt": "2020-03-20T15:15:15Z", "author": {"login": "ericsong"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -564,6 +574,15 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n       return researchPurpose.researchOutcomeList && researchPurpose.researchOutcomeList.length !== 0 ;\n     }\n \n+    updatePrimaryPurpose(cateogry, value) {\n+      this.updateResearchPurpose(cateogry, value);\n+      if (!value && !this.researchPurposeCategoriesSelected(this.state)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386dfdd7a2e37c3c9b3349c4bb45ddb6f71a32d0"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc0MzQzNA==", "bodyText": "you are right not  sure what happened here but i meant to send this .state.workspace.researchPurpose", "url": "https://github.com/all-of-us/workbench/pull/3276#discussion_r395743434", "createdAt": "2020-03-20T16:14:09Z", "author": {"login": "NehaBroad"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -564,6 +574,15 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n       return researchPurpose.researchOutcomeList && researchPurpose.researchOutcomeList.length !== 0 ;\n     }\n \n+    updatePrimaryPurpose(cateogry, value) {\n+      this.updateResearchPurpose(cateogry, value);\n+      if (!value && !this.researchPurposeCategoriesSelected(this.state)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTcwNTAyMQ=="}, "originalCommit": {"oid": "386dfdd7a2e37c3c9b3349c4bb45ddb6f71a32d0"}, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjcwNTcyOnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxNTozOFrOF5X7vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxNTozOFrOF5X7vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTcwNTI3OQ==", "bodyText": "can we add type signatures? I think it would help clear up a question I had below", "url": "https://github.com/all-of-us/workbench/pull/3276#discussion_r395705279", "createdAt": "2020-03-20T15:15:38Z", "author": {"login": "ericsong"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -354,9 +354,14 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n         return false;\n       }\n       const rp = this.props.workspace.researchPurpose;\n-      return rp.ancestry || rp.controlSet ||\n-          rp.diseaseFocusedResearch || rp.ethics || rp.drugDevelopment ||\n-          rp.methodsDevelopment || rp.populationHealth || rp.socialBehavioral;\n+      return this.researchPurposeCategoriesSelected(rp);\n+    }\n+\n+    researchPurposeCategoriesSelected(researchPurpose) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386dfdd7a2e37c3c9b3349c4bb45ddb6f71a32d0"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjcwNjkxOnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxNTo1NlrOF5X8hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxNTo1NlrOF5X8hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTcwNTQ3OA==", "bodyText": "type signature", "url": "https://github.com/all-of-us/workbench/pull/3276#discussion_r395705478", "createdAt": "2020-03-20T15:15:56Z", "author": {"login": "ericsong"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -398,12 +403,26 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n       </div>;\n     }\n \n+    onResearchPurposeChange(checked) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386dfdd7a2e37c3c9b3349c4bb45ddb6f71a32d0"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjcwNzA4OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxNTo1OVrOF5X8qA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxNTo1OVrOF5X8qA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTcwNTUxMg==", "bodyText": "type signature", "url": "https://github.com/all-of-us/workbench/pull/3276#discussion_r395705512", "createdAt": "2020-03-20T15:15:59Z", "author": {"login": "ericsong"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -398,12 +403,26 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n       </div>;\n     }\n \n+    onResearchPurposeChange(checked) {\n+      // If Checkbox is selected expand the research purpose categories\n+      if (checked) {\n+        this.setState({showResearchPurpose: true, selectResearchPurpose: true});\n+        return;\n+      }\n+      this.setState({selectResearchPurpose: false});\n+    }\n+\n+    get researchPurposeCheck() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386dfdd7a2e37c3c9b3349c4bb45ddb6f71a32d0"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjcxMjU1OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxNzoyMFrOF5YAQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxNzoyMFrOF5YAQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTcwNjQzMw==", "bodyText": "nit: I like  new lines for new properties, easier to read IMO", "url": "https://github.com/all-of-us/workbench/pull/3276#discussion_r395706433", "createdAt": "2020-03-20T15:17:20Z", "author": {"login": "ericsong"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -854,26 +873,35 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n           <FlexRow>\n             <FlexColumn>\n               <FlexColumn  style={styles.researchPurposeRow}>\n+                <FlexRow>\n                 <CheckBox\n                   data-test-id='researchPurpose-checkbox'\n-                  style={{...styles.checkboxStyle, marginLeft: '0.6rem'}}\n-                  label={this.researchPurposeLabel}\n-                  labelStyle={styles.shortDescription}\n-                  checked={this.primaryPurposeIsSelected}\n-                  onChange={v => this.setState({\n-                    selectResearchPurpose: v,\n-                    showResearchPurpose: !this.state.showResearchPurpose})}/>\n-                  {this.state.showResearchPurpose && <FlexColumn>\n+                  manageOwnState={false}\n+                  style={{...styles.checkboxStyle, marginLeft: '0.6rem', marginTop: '0.1rem'}}\n+                  checked={this.researchPurposeCheck}\n+                  onChange={v => this.onResearchPurposeChange(v)}/>\n+                  <div style={{...styles.shortDescription, marginLeft: '-0.5rem'}}>\n+                    <button style={{...styles.shortDescription, border: 'none'}} data-test-id='research-purpose-button'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386dfdd7a2e37c3c9b3349c4bb45ddb6f71a32d0"}, "originalPosition": 108}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjcxNzUxOnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxODoyM1rOF5YDKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxODoyM1rOF5YDKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTcwNzE3Ng==", "bodyText": "nit:  you could combine this with the tag above and use a ternary operator within the className", "url": "https://github.com/all-of-us/workbench/pull/3276#discussion_r395707176", "createdAt": "2020-03-20T15:18:23Z", "author": {"login": "ericsong"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -854,26 +873,35 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n           <FlexRow>\n             <FlexColumn>\n               <FlexColumn  style={styles.researchPurposeRow}>\n+                <FlexRow>\n                 <CheckBox\n                   data-test-id='researchPurpose-checkbox'\n-                  style={{...styles.checkboxStyle, marginLeft: '0.6rem'}}\n-                  label={this.researchPurposeLabel}\n-                  labelStyle={styles.shortDescription}\n-                  checked={this.primaryPurposeIsSelected}\n-                  onChange={v => this.setState({\n-                    selectResearchPurpose: v,\n-                    showResearchPurpose: !this.state.showResearchPurpose})}/>\n-                  {this.state.showResearchPurpose && <FlexColumn>\n+                  manageOwnState={false}\n+                  style={{...styles.checkboxStyle, marginLeft: '0.6rem', marginTop: '0.1rem'}}\n+                  checked={this.researchPurposeCheck}\n+                  onChange={v => this.onResearchPurposeChange(v)}/>\n+                  <div style={{...styles.shortDescription, marginLeft: '-0.5rem'}}>\n+                    <button style={{...styles.shortDescription, border: 'none'}} data-test-id='research-purpose-button'\n+                            onClick={() => this.setState({showResearchPurpose: !this.state.showResearchPurpose})}>\n+                      Research purpose\n+                      {!this.state.showResearchPurpose &&\n+                      <i className='pi pi-angle-right' style={{verticalAlign: 'middle'}}></i>}\n+                      {this.state.showResearchPurpose &&\n+                      <i className='pi pi-angle-down' style={{verticalAlign: 'middle'}}></i>}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386dfdd7a2e37c3c9b3349c4bb45ddb6f71a32d0"}, "originalPosition": 114}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2Nzg5MzU5OnYy", "diffSide": "RIGHT", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxOTowMTo1OFrOF7qDVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxOTowMTo1OFrOF7qDVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODA5OTI4Nw==", "bodyText": "nit: I would prefer to use else here instead of using a return statement above. I thought this was a bug when I was reading through", "url": "https://github.com/all-of-us/workbench/pull/3276#discussion_r398099287", "createdAt": "2020-03-25T19:01:58Z", "author": {"login": "ericsong"}, "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -398,12 +404,30 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n       </div>;\n     }\n \n+    onResearchPurposeChange(checked: boolean) {\n+      // If Checkbox is selected expand the research purpose categories\n+      if (checked) {\n+        this.setState({showResearchPurpose: true, selectResearchPurpose: true});\n+        return;\n+      }\n+      this.setState({selectResearchPurpose: false});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1dff3f230e943710a1d19e41caca25d1b2aa909"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3034, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}