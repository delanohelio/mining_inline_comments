{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczNDA4NjQ1", "number": 3916, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo0NTo0M1rOEcqQig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMToxNDoxNlrOEcwCZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4NDg3OTQ2OnYy", "diffSide": "RIGHT", "path": "api/config/cdr_versions_local.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo0NTo0M1rOHHUxPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo0NTo0M1rOHHUxPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ0MjM2Nw==", "bodyText": "nit: maybe \"Synthetic Dataset v1 (with microarray)\"", "url": "https://github.com/all-of-us/workbench/pull/3916#discussion_r477442367", "createdAt": "2020-08-26T16:45:43Z", "author": {"login": "calbach"}, "path": "api/config/cdr_versions_local.json", "diffHunk": "@@ -24,5 +24,19 @@\n     \"numParticipants\": 946237,\n     \"cdrDbName\": \"cdr\",\n     \"elasticIndexBaseName\": \"cdr\"\n+  },\n+  {\n+    \"cdrVersionId\": 3,\n+    \"isDefault\": false,\n+    \"name\": \"Synthetic Dataset v1.1\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd318e099857f1b89961e3d45486829384503bef"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4NDg4MDU0OnYy", "diffSide": "RIGHT", "path": "api/config/cdr_versions_local.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo0NjowMFrOHHUyAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo0NjowMFrOHHUyAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ0MjU2Mg==", "bodyText": "nit: 2020\n(this doesn't really matter)", "url": "https://github.com/all-of-us/workbench/pull/3916#discussion_r477442562", "createdAt": "2020-08-26T16:46:00Z", "author": {"login": "calbach"}, "path": "api/config/cdr_versions_local.json", "diffHunk": "@@ -24,5 +24,19 @@\n     \"numParticipants\": 946237,\n     \"cdrDbName\": \"cdr\",\n     \"elasticIndexBaseName\": \"cdr\"\n+  },\n+  {\n+    \"cdrVersionId\": 3,\n+    \"isDefault\": false,\n+    \"name\": \"Synthetic Dataset v1.1\",\n+    \"dataAccessLevel\": 1,\n+    \"bigqueryProject\": \"fc-aou-cdr-synth-test\",\n+    \"bigqueryDataset\": \"SR2019q4r3\",\n+    \"microarrayBigqueryDataset\": \"microarray_data\",\n+    \"creationTime\": \"2019-08-26 00:09:51Z\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd318e099857f1b89961e3d45486829384503bef"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4NDkxNDk5OnYy", "diffSide": "RIGHT", "path": "api/src/main/resources/workbench-api.yaml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo1NDo1OFrOHHVIMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMDozNDozM1rOHHcusQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ0ODI0MA==", "bodyText": "Now that I'm looking at this, the client won't really be able to do much with it (they don't know the BQ project). The only thing the client needs to use this for is to make a determination as to which features should be shown in a given workspace.\nWDYT about changing this to be a boolean hasMicroarrayData?", "url": "https://github.com/all-of-us/workbench/pull/3916#discussion_r477448240", "createdAt": "2020-08-26T16:54:58Z", "author": {"login": "calbach"}, "path": "api/src/main/resources/workbench-api.yaml", "diffHunk": "@@ -3604,6 +3604,8 @@ definitions:\n         \"$ref\": \"#/definitions/DataAccessLevel\"\n       archivalStatus:\n         \"$ref\": \"#/definitions/ArchivalStatus\"\n+      microarrayBigqueryDataset:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd318e099857f1b89961e3d45486829384503bef"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU3Mjc4NQ==", "bodyText": "sounds good. I'll just make the change for the API model", "url": "https://github.com/all-of-us/workbench/pull/3916#discussion_r477572785", "createdAt": "2020-08-26T20:34:33Z", "author": {"login": "ericsong"}, "path": "api/src/main/resources/workbench-api.yaml", "diffHunk": "@@ -3604,6 +3604,8 @@ definitions:\n         \"$ref\": \"#/definitions/DataAccessLevel\"\n       archivalStatus:\n         \"$ref\": \"#/definitions/ArchivalStatus\"\n+      microarrayBigqueryDataset:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ0ODI0MA=="}, "originalCommit": {"oid": "bd318e099857f1b89961e3d45486829384503bef"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4NDkxOTE4OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/pmiops/workbench/cdr/CdrVersionMapper.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo1NTo1N1rOHHVKqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo1NTo1N1rOHHVKqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ0ODg3Mg==", "bodyText": "Also - nice, thanks for adding the mapper", "url": "https://github.com/all-of-us/workbench/pull/3916#discussion_r477448872", "createdAt": "2020-08-26T16:55:57Z", "author": {"login": "calbach"}, "path": "api/src/main/java/org/pmiops/workbench/cdr/CdrVersionMapper.java", "diffHunk": "@@ -0,0 +1,18 @@\n+package org.pmiops.workbench.cdr;\n+\n+import org.mapstruct.Mapper;\n+import org.mapstruct.Mapping;\n+import org.pmiops.workbench.db.model.DbCdrVersion;\n+import org.pmiops.workbench.model.CdrVersion;\n+import org.pmiops.workbench.utils.mappers.CommonMappers;\n+import org.pmiops.workbench.utils.mappers.MapStructConfig;\n+\n+@Mapper(\n+    config = MapStructConfig.class,\n+    uses = {CommonMappers.class})\n+public interface CdrVersionMapper {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd318e099857f1b89961e3d45486829384503bef"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4NTgyNjMwOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/pmiops/workbench/cdr/CdrVersionMapper.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMToxNDoxNlrOHHd-Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMToxNDoxNlrOHHd-Ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU5MzE3OQ==", "bodyText": "nit: null or empty might be slightly less error-prone. I'm worried about someone putting microarrayBigQueryDataset: \"\" in the JSON.", "url": "https://github.com/all-of-us/workbench/pull/3916#discussion_r477593179", "createdAt": "2020-08-26T21:14:16Z", "author": {"login": "calbach"}, "path": "api/src/main/java/org/pmiops/workbench/cdr/CdrVersionMapper.java", "diffHunk": "@@ -0,0 +1,23 @@\n+package org.pmiops.workbench.cdr;\n+\n+import org.mapstruct.Mapper;\n+import org.mapstruct.Mapping;\n+import org.pmiops.workbench.db.model.DbCdrVersion;\n+import org.pmiops.workbench.model.CdrVersion;\n+import org.pmiops.workbench.utils.mappers.CommonMappers;\n+import org.pmiops.workbench.utils.mappers.MapStructConfig;\n+\n+@Mapper(\n+    config = MapStructConfig.class,\n+    uses = {CommonMappers.class})\n+public interface CdrVersionMapper {\n+\n+  @Mapping(source = \"microarrayBigqueryDataset\", target = \"hasMicroarrayData\")\n+  @Mapping(source = \"dataAccessLevelEnum\", target = \"dataAccessLevel\")\n+  @Mapping(source = \"archivalStatusEnum\", target = \"archivalStatus\")\n+  CdrVersion dbModelToClient(DbCdrVersion db);\n+\n+  default boolean isNonNull(String s) {\n+    return s != null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b253938b1589acd098f37e46a5fc4c06735466be"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2331, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}