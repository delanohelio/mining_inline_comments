{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwNDMwNjgx", "number": 3193, "title": "[RW-4358][Risk=no] Srubenst/workspace about description change", "bodyText": "Description:\nThis changes the workspace about page to the new format (in line with workspace edit).\nAttached are the screenshots:\n\n\n\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-02-26T18:13:30Z", "url": "https://github.com/all-of-us/workbench/pull/3193", "merged": true, "mergeCommit": {"oid": "8720ec463eb28aab0c33d1026fcb5aa99356c5ea"}, "closed": true, "closedAt": "2020-02-26T21:15:14Z", "author": {"login": "s-rubenstein"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIKwzbAH2gAyMzgwNDMwNjgxOjg4YjkzZWZlNTBhYmJmNGViNDg0YzRiYmQ4N2NjYjFmZDI4M2JkZWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcINRV1gH2gAyMzgwNDMwNjgxOjBjYzY4ZjNjMzBkNmYwZTAzMjQwMTlhODczZDdmZGU0YmM5Yjg1NWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "88b93efe50abbf4eb484c4bbd87ccb1fd283bdea", "author": {"user": {"login": "s-rubenstein", "name": "Sky Rubenstein"}}, "url": "https://github.com/all-of-us/workbench/commit/88b93efe50abbf4eb484c4bbd87ccb1fd283bdea", "committedDate": "2020-02-26T18:09:50Z", "message": "[RW-4358][Risk=no] Changes to workspace about page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94a8c6d717d6ce0cef4d6da8c95f9730de0e6de9", "author": {"user": {"login": "s-rubenstein", "name": "Sky Rubenstein"}}, "url": "https://github.com/all-of-us/workbench/commit/94a8c6d717d6ce0cef4d6da8c95f9730de0e6de9", "committedDate": "2020-02-26T18:11:51Z", "message": "Small fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4b6f793dc4aa139c0c967bc71201f518c85a4a9", "author": {"user": {"login": "s-rubenstein", "name": "Sky Rubenstein"}}, "url": "https://github.com/all-of-us/workbench/commit/f4b6f793dc4aa139c0c967bc71201f518c85a4a9", "committedDate": "2020-02-26T18:26:30Z", "message": "Fix tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MTQ2Njkx", "url": "https://github.com/all-of-us/workbench/pull/3193#pullrequestreview-365146691", "createdAt": "2020-02-26T18:41:37Z", "commit": {"oid": "f4b6f793dc4aa139c0c967bc71201f518c85a4a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxODo0MTozN1rOFu3fLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxODo0MTozN1rOFu3fLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY4NzkxNg==", "bodyText": "nit: we can move this\nconst categories = SpecificPopulationItems.filter(specificPopulationItem => specificPopulationItem\nMulti-line suggestions are here!\nYou can now suggest code changes to multiple lines. Learn more.\nwe can move this to the workspace-edit-text.tsx\n  const categories = SpecificPopulationItems.filter(specificPopulationItem => specificPopulationItem\n\n.subCategory.filter(item => researchPurpose.populationDetails.includes(item.shortName)).length > 0);\ncategories.forEach(category => category.subCategory = category.subCategory\n.filter(subCategoryItem => researchPurpose.populationDetails.includes(subCategoryItem.shortName)));\nto the workspace-edit-text.tsx ?", "url": "https://github.com/all-of-us/workbench/pull/3193#discussion_r384687916", "createdAt": "2020-02-26T18:41:37Z", "author": {"login": "NehaBroad"}, "path": "ui/src/app/pages/workspace/research-purpose.tsx", "diffHunk": "@@ -41,51 +56,83 @@ export const ResearchPurpose = withCurrentWorkspace()(\n       };\n     }\n \n-    getSelectedPopulationsSlice(left: boolean) {\n-      const populations = getSelectedPopulations(this.props.workspace.researchPurpose);\n-      const populationsHalfLen = sliceByHalfLength(populations);\n-      if (left) {\n-        return populations.slice(0, populationsHalfLen);\n-      } else {\n-        return populations.slice(populationsHalfLen);\n-      }\n+    // TODO: Move this to an abstract function and also change the admin workspace to use it\n+    getSelectedPopulationsOfInterest() {\n+      const researchPurpose = this.props.workspace.researchPurpose;\n+      const categories = SpecificPopulationItems.filter(specificPopulationItem => specificPopulationItem", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4b6f793dc4aa139c0c967bc71201f518c85a4a9"}, "originalPosition": 69}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MTQ3MDM5", "url": "https://github.com/all-of-us/workbench/pull/3193#pullrequestreview-365147039", "createdAt": "2020-02-26T18:42:10Z", "commit": {"oid": "f4b6f793dc4aa139c0c967bc71201f518c85a4a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxODo0MjoxMFrOFu3gPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxODo0MjoxMFrOFu3gPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY4ODE4OQ==", "bodyText": "extract this to its own style", "url": "https://github.com/all-of-us/workbench/pull/3193#discussion_r384688189", "createdAt": "2020-02-26T18:42:10Z", "author": {"login": "NehaBroad"}, "path": "ui/src/app/pages/workspace/research-purpose.tsx", "diffHunk": "@@ -41,51 +56,83 @@ export const ResearchPurpose = withCurrentWorkspace()(\n       };\n     }\n \n-    getSelectedPopulationsSlice(left: boolean) {\n-      const populations = getSelectedPopulations(this.props.workspace.researchPurpose);\n-      const populationsHalfLen = sliceByHalfLength(populations);\n-      if (left) {\n-        return populations.slice(0, populationsHalfLen);\n-      } else {\n-        return populations.slice(populationsHalfLen);\n-      }\n+    // TODO: Move this to an abstract function and also change the admin workspace to use it\n+    getSelectedPopulationsOfInterest() {\n+      const researchPurpose = this.props.workspace.researchPurpose;\n+      const categories = SpecificPopulationItems.filter(specificPopulationItem => specificPopulationItem\n+        .subCategory.filter(item => researchPurpose.populationDetails.includes(item.shortName)).length > 0);\n+      categories.forEach(category => category.subCategory = category.subCategory\n+        .filter(subCategoryItem => researchPurpose.populationDetails.includes(subCategoryItem.shortName)));\n+      return categories;\n     }\n \n     render() {\n       const {workspace} = this.props;\n       const {workspacePermissions} = this.state;\n       const selectedResearchPurposeItems = getSelectedResearchPurposeItems(this.props.workspace.researchPurpose);\n-      const rpItemsHalfLen = sliceByHalfLength(selectedResearchPurposeItems);\n+      const selectedPopulationsOfInterest = this.getSelectedPopulationsOfInterest();\n       return <FadeBox>\n-        <div style={styles.mainHeader}>Research Purpose\n+        <div style={styles.mainHeader}>Primary purpose of project\n           <Clickable disabled={!workspacePermissions.canWrite}\n+                     style={{display: 'flex', alignItems: 'center'}}\n                      data-test-id='edit-workspace'\n                      onClick={() => navigate(\n                        ['workspaces',  workspace.namespace, workspace.id, 'edit'])}>\n             <EditComponentReact enableHoverEffect={true}\n                                 disabled={!workspacePermissions.canWrite}\n-                                style={{marginTop: '0.1rem'}}/>\n+                                style={{marginTop: '0.1rem', height: 22,\n+                                  width: 22,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4b6f793dc4aa139c0c967bc71201f518c85a4a9"}, "originalPosition": 94}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MTQ5NTAz", "url": "https://github.com/all-of-us/workbench/pull/3193#pullrequestreview-365149503", "createdAt": "2020-02-26T18:45:52Z", "commit": {"oid": "f4b6f793dc4aa139c0c967bc71201f518c85a4a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxODo0NTo1MlrOFu3n-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxODo0NTo1MlrOFu3n-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY5MDE2OQ==", "bodyText": "nit: It will be good to have comments to identify what section the divs are displaying(intended study or anticipated finding) --- Ignore i thought each section  of research purpose have more than 1 div.", "url": "https://github.com/all-of-us/workbench/pull/3193#discussion_r384690169", "createdAt": "2020-02-26T18:45:52Z", "author": {"login": "NehaBroad"}, "path": "ui/src/app/pages/workspace/research-purpose.tsx", "diffHunk": "@@ -41,51 +56,83 @@ export const ResearchPurpose = withCurrentWorkspace()(\n       };\n     }\n \n-    getSelectedPopulationsSlice(left: boolean) {\n-      const populations = getSelectedPopulations(this.props.workspace.researchPurpose);\n-      const populationsHalfLen = sliceByHalfLength(populations);\n-      if (left) {\n-        return populations.slice(0, populationsHalfLen);\n-      } else {\n-        return populations.slice(populationsHalfLen);\n-      }\n+    // TODO: Move this to an abstract function and also change the admin workspace to use it\n+    getSelectedPopulationsOfInterest() {\n+      const researchPurpose = this.props.workspace.researchPurpose;\n+      const categories = SpecificPopulationItems.filter(specificPopulationItem => specificPopulationItem\n+        .subCategory.filter(item => researchPurpose.populationDetails.includes(item.shortName)).length > 0);\n+      categories.forEach(category => category.subCategory = category.subCategory\n+        .filter(subCategoryItem => researchPurpose.populationDetails.includes(subCategoryItem.shortName)));\n+      return categories;\n     }\n \n     render() {\n       const {workspace} = this.props;\n       const {workspacePermissions} = this.state;\n       const selectedResearchPurposeItems = getSelectedResearchPurposeItems(this.props.workspace.researchPurpose);\n-      const rpItemsHalfLen = sliceByHalfLength(selectedResearchPurposeItems);\n+      const selectedPopulationsOfInterest = this.getSelectedPopulationsOfInterest();\n       return <FadeBox>\n-        <div style={styles.mainHeader}>Research Purpose\n+        <div style={styles.mainHeader}>Primary purpose of project\n           <Clickable disabled={!workspacePermissions.canWrite}\n+                     style={{display: 'flex', alignItems: 'center'}}\n                      data-test-id='edit-workspace'\n                      onClick={() => navigate(\n                        ['workspaces',  workspace.namespace, workspace.id, 'edit'])}>\n             <EditComponentReact enableHoverEffect={true}\n                                 disabled={!workspacePermissions.canWrite}\n-                                style={{marginTop: '0.1rem'}}/>\n+                                style={{marginTop: '0.1rem', height: 22,\n+                                  width: 22,\n+                                  fill: colors.light,\n+                                  backgroundColor: colors.accent,\n+                                  cursor: 'pointer',\n+                                  padding: '5px',\n+                                  borderRadius: '23px'}}/>\n           </Clickable>\n         </div>\n-        <div style={styles.sectionText}>{ResearchPurposeDescription}</div>\n-        <div style={styles.sectionHeader}>Primary purpose of the project</div>\n-        <TwoColPaddedTable header={false} style={{marginTop: '0.3rem'}}\n-                           contentLeft={selectedResearchPurposeItems.slice(0, rpItemsHalfLen)}\n-                           contentRight={selectedResearchPurposeItems.slice(rpItemsHalfLen)}/>\n-        <div style={styles.sectionHeader}>\n-          Reason for choosing <i>All of Us</i> data for your investigation</div>\n-        <div style={styles.sectionText}>{workspace.researchPurpose.reasonForAllOfUs}</div>\n-        <div style={styles.sectionHeader}>Area of intended study</div>\n-        <div style={styles.sectionText}>{workspace.researchPurpose.intendedStudy}</div>\n-        <div style={styles.sectionHeader}>Anticipated findings from this study</div>\n-        <div style={styles.sectionText}>{workspace.researchPurpose.anticipatedFindings}</div>\n-        {workspace.researchPurpose.population && <div style={{marginBottom: '1rem'}}>\n-          <div style={styles.sectionHeader}>Population area(s) of focus</div>\n-          <TwoColPaddedTable header={false} style={{marginTop: '0.3rem'}}\n-                             contentLeft={this.getSelectedPopulationsSlice(true)}\n-                             contentRight={this.getSelectedPopulationsSlice(false)}/>\n+        <div style={styles.sectionContentContainer}>\n+          {selectedResearchPurposeItems.map((selectedResearchPurposeItem, i) => <div key={i}>\n+            <div style={{marginTop: '1rem'}}>{selectedResearchPurposeItem}</div>\n+          </div>)}\n+        </div>\n+        <div style={styles.sectionHeader}>Summary of research purpose</div>\n+        <div style={styles.sectionContentContainer}>\n+          <div style={styles.sectionSubHeader}>{researchPurposeQuestions[2].header}</div>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4b6f793dc4aa139c0c967bc71201f518c85a4a9"}, "originalPosition": 126}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba921c4ac596af9a63dad0aff72da5b08c99e415", "author": {"user": {"login": "s-rubenstein", "name": "Sky Rubenstein"}}, "url": "https://github.com/all-of-us/workbench/commit/ba921c4ac596af9a63dad0aff72da5b08c99e415", "committedDate": "2020-02-26T19:21:27Z", "message": "Fixed the bit about populations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c65176dd3c0dd7d7cfa2bf72a7d4dfe22185d694", "author": {"user": {"login": "s-rubenstein", "name": "Sky Rubenstein"}}, "url": "https://github.com/all-of-us/workbench/commit/c65176dd3c0dd7d7cfa2bf72a7d4dfe22185d694", "committedDate": "2020-02-26T20:03:21Z", "message": "Fixed lint issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "689d28291217a094cb52b5ac20a413eb80254493", "author": {"user": {"login": "s-rubenstein", "name": "Sky Rubenstein"}}, "url": "https://github.com/all-of-us/workbench/commit/689d28291217a094cb52b5ac20a413eb80254493", "committedDate": "2020-02-26T20:54:18Z", "message": "PR Feedback to separate sections"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MjM3ODEz", "url": "https://github.com/all-of-us/workbench/pull/3193#pullrequestreview-365237813", "createdAt": "2020-02-26T21:00:07Z", "commit": {"oid": "689d28291217a094cb52b5ac20a413eb80254493"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cc68f3c30d6f0e0324019a873d7fde4bc9b855e", "author": {"user": {"login": "s-rubenstein", "name": "Sky Rubenstein"}}, "url": "https://github.com/all-of-us/workbench/commit/0cc68f3c30d6f0e0324019a873d7fde4bc9b855e", "committedDate": "2020-02-26T21:05:11Z", "message": "add keys"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3391, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}