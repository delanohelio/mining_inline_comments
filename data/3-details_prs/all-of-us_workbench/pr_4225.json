{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNDcwNzYy", "number": 4225, "title": "[no ticket][risk=no] dataset query efficiency", "bodyText": "Make dataset queries faster", "createdAt": "2020-10-29T18:19:27Z", "url": "https://github.com/all-of-us/workbench/pull/4225", "merged": true, "mergeCommit": {"oid": "ec5e7ea399ee1a9166cf9b428ff46dafec295a05"}, "closed": true, "closedAt": "2020-10-29T19:30:17Z", "author": {"login": "freemabd"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXWU1tAH2gAyNTEyNDcwNzYyOmFkOTRkZmRiODZiOTkxOWJkODdjOTJmM2MwYzE5NDc4ZjVlODIxZGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXW7kOAH2gAyNTEyNDcwNzYyOjVmN2U5OTVjZWRlZjIwYmY5ZDU0NmY4Nzc5MzM0NmJhNzU3Y2FlNWQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ad94dfdb86b9919bd87c92f3c0c19478f5e821df", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/ad94dfdb86b9919bd87c92f3c0c19478f5e821df", "committedDate": "2020-10-29T18:18:10Z", "message": "making queries faster"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5OTU0NTM1", "url": "https://github.com/all-of-us/workbench/pull/4225#pullrequestreview-519954535", "createdAt": "2020-10-29T18:22:38Z", "commit": {"oid": "ad94dfdb86b9919bd87c92f3c0c19478f5e821df"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxODoyMjozOFrOHqpAoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxODoyMjozOFrOHqpAoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ3NDE0NQ==", "bodyText": "All of your SQL ends with \\n. I would probably replace that with a \"space\"", "url": "https://github.com/all-of-us/workbench/pull/4225#discussion_r514474145", "createdAt": "2020-10-29T18:22:38Z", "author": {"login": "jscherdin"}, "path": "api/src/main/java/org/pmiops/workbench/cohortbuilder/SearchGroupItemQueryBuilder.java", "diffHunk": "@@ -76,7 +76,7 @@\n       \"is_standard = %s and concept_id in (select distinct c.concept_id\\n\"\n           + \"from `${projectId}.${dataSetId}.cb_criteria` c\\n\"\n           + \"join (${childLookup}) a\\n\"\n-          + \"on (c.path like concat('%%.', a.id, '.%%') or c.path like concat('%%.', a.id) or c.path like concat(a.id, '.%%') or c.path = a.id)\\n\"\n+          + \"on (c.path like concat('%%.', a.id, '.%%') or c.path like concat('%%.', a.id))\\n\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad94dfdb86b9919bd87c92f3c0c19478f5e821df"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5OTcxMjc3", "url": "https://github.com/all-of-us/workbench/pull/4225#pullrequestreview-519971277", "createdAt": "2020-10-29T18:44:10Z", "commit": {"oid": "ad94dfdb86b9919bd87c92f3c0c19478f5e821df"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f7e995cedef20bf9d546f87793346ba757cae5d", "author": {"user": {"login": "freemabd", "name": "Brian Freeman"}}, "url": "https://github.com/all-of-us/workbench/commit/5f7e995cedef20bf9d546f87793346ba757cae5d", "committedDate": "2020-10-29T19:00:28Z", "message": "fixing tests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3786, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}