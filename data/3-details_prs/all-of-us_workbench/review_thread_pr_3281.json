{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNzI1ODk3", "number": 3281, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDozNjoyNVrODqAeRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDozOTo1MVrODqAhow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1Mzc0NTM1OnYy", "diffSide": "RIGHT", "path": "e2e/app/base-page.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDozNjoyNVrOF5idyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDozNjoyNVrOF5idyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg3NzgzNA==", "bodyText": "nit: maybe name it SCREENSHOT_DIR.", "url": "https://github.com/all-of-us/workbench/pull/3281#discussion_r395877834", "createdAt": "2020-03-20T20:36:25Z", "author": {"login": "jaycarlton"}, "path": "e2e/app/base-page.ts", "diffHunk": "@@ -228,9 +228,7 @@ export default abstract class BasePage {\n    */\n   async takeScreenshot(fileName: string) {\n     const dir = 'logs/screenshot';\n-    if (!fs.existsSync(dir)) {\n-      fs.mkdirSync(dir);\n-    }\n+    await fse.ensureDir(dir);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fe1488bf844439ecbf351e9275d307c25da0ff6"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1Mzc1MDU3OnYy", "diffSide": "RIGHT", "path": "e2e/app/google-login.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDozODozM1rOF5ihHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDozODozM1rOF5ihHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg3ODY4NA==", "bodyText": "nit: maybe specify GoogleLoginPageNotFound to distinguish from the case of an unrecognized user.", "url": "https://github.com/all-of-us/workbench/pull/3281#discussion_r395878684", "createdAt": "2020-03-20T20:38:33Z", "author": {"login": "jaycarlton"}, "path": "e2e/app/google-login.ts", "diffHunk": "@@ -91,11 +91,13 @@ export default class GoogleLoginPage extends BasePage {\n    */\n   async load(): Promise<void> {\n     const url = configs.uiBaseUrl + configs.loginUrlPath;\n-    await this.page.goto(url, {waitUntil: ['networkidle0', 'domcontentloaded'], timeout: 30000}).catch((err) => {\n+    try {\n+      await this.page.goto(url, {waitUntil: ['networkidle0', 'domcontentloaded'], timeout: 30000});\n+    } catch (err) {\n       console.error('Google login page not found. ' + err);\n-      this.takeScreenshot('GoogleLoginNotFound');\n+      await this.takeScreenshot('GoogleLoginNotFound');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fe1488bf844439ecbf351e9275d307c25da0ff6"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1Mzc1Mzk1OnYy", "diffSide": "RIGHT", "path": "e2e/app/google-login.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDozOTo1MVrOF5ijPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDozOTo1MVrOF5ijPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg3OTIyOA==", "bodyText": "nit: Maybe wrap this into a higher-level function like this.navigate(url).\nThe timeout seems a little generous. to my untrained eye, especially for the login page.", "url": "https://github.com/all-of-us/workbench/pull/3281#discussion_r395879228", "createdAt": "2020-03-20T20:39:51Z", "author": {"login": "jaycarlton"}, "path": "e2e/app/google-login.ts", "diffHunk": "@@ -91,11 +91,13 @@ export default class GoogleLoginPage extends BasePage {\n    */\n   async load(): Promise<void> {\n     const url = configs.uiBaseUrl + configs.loginUrlPath;\n-    await this.page.goto(url, {waitUntil: ['networkidle0', 'domcontentloaded'], timeout: 30000}).catch((err) => {\n+    try {\n+      await this.page.goto(url, {waitUntil: ['networkidle0', 'domcontentloaded'], timeout: 30000});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fe1488bf844439ecbf351e9275d307c25da0ff6"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3042, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}