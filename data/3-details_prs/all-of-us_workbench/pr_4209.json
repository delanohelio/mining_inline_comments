{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMjQwNjMx", "number": 4209, "title": "[noTicket] Fix :Update/Save Survey Concept Set using the new criteria search", "bodyText": "Pass survey Name information to concept-survey-add-modal and\nAlso update concept-set-details page to display type of Survey\n\n\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally\n I have run the E2E tests on ths change against my local UI + API server with yarn test-local\n If this includes a UI change, I have taken screen recordings or screenshots of the new behavior and notified the PO and UX designer\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-10-26T18:56:43Z", "url": "https://github.com/all-of-us/workbench/pull/4209", "merged": true, "mergeCommit": {"oid": "1e19ac6193927d42e623fa84c736d782b853ea28"}, "closed": true, "closedAt": "2020-10-27T02:36:59Z", "author": {"login": "NehaBroad"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWZCiXAH2gAyNTEwMjQwNjMxOmQ0NmRhYzk5ZTc5MDlhM2M3MTllMTU1YTE4ZTc2NmE3ODRiMWEwM2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWfRtPAH2gAyNTEwMjQwNjMxOjMwZjkxYzI0ZjUxY2Q2Y2VhZWFjYjBkNjk4MGUwM2E2ZjUyYjEyZjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d46dac99e7909a3c719e155a18e766a784b1a03e", "author": {"user": {"login": "NehaBroad", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/d46dac99e7909a3c719e155a18e766a784b1a03e", "committedDate": "2020-10-26T18:53:58Z", "message": "Save survey"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MTI2MDM1", "url": "https://github.com/all-of-us/workbench/pull/4209#pullrequestreview-517126035", "createdAt": "2020-10-26T19:54:39Z", "commit": {"oid": "d46dac99e7909a3c719e155a18e766a784b1a03e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQyMDowMzo1N1rOHogTOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQyMDowOTowOFrOHogdrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjIzNDI5OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                <div style={{marginLeft: '2rem'}} data-test-id='concept-set-domain'>\n          \n          \n            \n                                <div style={{marginLeft: '2rem', textTransform: 'capitalize'}} data-test-id='concept-set-domain'>", "url": "https://github.com/all-of-us/workbench/pull/4209#discussion_r512234298", "createdAt": "2020-10-26T20:03:57Z", "author": {"login": "dolbeew"}, "path": "ui/src/app/pages/data/concept/concept-set-details.tsx", "diffHunk": "@@ -339,8 +348,7 @@ export const ConceptSetDetails = fp.flow(withUrlParams(), withCurrentWorkspace()\n                       Participant Count: {!!conceptSet.participantCount ? conceptSet.participantCount.toLocaleString() : ''}\n                     </div>\n                     <div style={{marginLeft: '2rem'}} data-test-id='concept-set-domain'>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d46dac99e7909a3c719e155a18e766a784b1a03e"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjIzNjk3Mw==", "bodyText": "Can you add a space on either side of '-' and capitalize the survey name?\nSeems that fp.capitalize only affects the first word of a string, might be better to use textTransform: 'capitalize' on the div.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          ? fp.capitalize(conceptSet.domain.toString() + '-' + conceptSet.survey) :\n          \n          \n            \n                          fp.capitalize(conceptSet.domain.toString()) ;\n          \n          \n            \n                          ? conceptSet.domain.toString() + ' - ' + conceptSet.survey\n          \n          \n            \n                          : conceptSet.domain.toString() ;", "url": "https://github.com/all-of-us/workbench/pull/4209#discussion_r512236973", "createdAt": "2020-10-26T20:09:08Z", "author": {"login": "dolbeew"}, "path": "ui/src/app/pages/data/concept/concept-set-details.tsx", "diffHunk": "@@ -264,6 +264,15 @@ export const ConceptSetDetails = fp.flow(withUrlParams(), withCurrentWorkspace()\n       navigateByUrl('workspaces/' + workspace.namespace + '/' + workspace.id + '/data/concepts' + queryParams);\n     }\n \n+    get displayDomainName() {\n+      const {conceptSet} = this.state;\n+      return conceptSet.domain === Domain.PHYSICALMEASUREMENT\n+          ? 'Physical Measurements' :\n+          conceptSet.domain === Domain.SURVEY\n+              ? fp.capitalize(conceptSet.domain.toString() + '-' + conceptSet.survey) :\n+              fp.capitalize(conceptSet.domain.toString()) ;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d46dac99e7909a3c719e155a18e766a784b1a03e"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3f2adae09d82d24c1efea87ad0944a9665b80e6", "author": {"user": {"login": "NehaBroad", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/f3f2adae09d82d24c1efea87ad0944a9665b80e6", "committedDate": "2020-10-26T20:39:37Z", "message": "PR Comment: Use textTransform"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MTY5NzA4", "url": "https://github.com/all-of-us/workbench/pull/4209#pullrequestreview-517169708", "createdAt": "2020-10-26T20:57:30Z", "commit": {"oid": "f3f2adae09d82d24c1efea87ad0944a9665b80e6"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQyMDo1NzozMVrOHoiFEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQyMDo1NzozMVrOHoiFEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjI2MzQ0Mw==", "bodyText": "Sorry, I must have had my local changes different from the suggestions I made. I think we need both to get the survey name display to match other domains.\n\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          ? conceptSet.domain.toString() + ' - ' + conceptSet.survey : conceptSet.domain.toString() ;\n          \n          \n            \n                        ? fp.capitalize(conceptSet.domain.toString() + ' - ' + conceptSet.survey) :\n          \n          \n            \n                        fp.capitalize(conceptSet.domain.toString()) ;", "url": "https://github.com/all-of-us/workbench/pull/4209#discussion_r512263443", "createdAt": "2020-10-26T20:57:31Z", "author": {"login": "dolbeew"}, "path": "ui/src/app/pages/data/concept/concept-set-details.tsx", "diffHunk": "@@ -264,6 +264,14 @@ export const ConceptSetDetails = fp.flow(withUrlParams(), withCurrentWorkspace()\n       navigateByUrl('workspaces/' + workspace.namespace + '/' + workspace.id + '/data/concepts' + queryParams);\n     }\n \n+    get displayDomainName() {\n+      const {conceptSet} = this.state;\n+      return conceptSet.domain === Domain.PHYSICALMEASUREMENT\n+          ? 'Physical Measurements' :\n+          conceptSet.domain === Domain.SURVEY\n+              ? conceptSet.domain.toString() + ' - ' + conceptSet.survey : conceptSet.domain.toString() ;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3f2adae09d82d24c1efea87ad0944a9665b80e6"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dfca1603c8878fd9e27758b1cfc128bbbbb3724", "author": {"user": {"login": "NehaBroad", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/8dfca1603c8878fd9e27758b1cfc128bbbbb3724", "committedDate": "2020-10-27T00:41:08Z", "message": "PR Comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30f91c24f51cd6ceaeacb0d6980e03a6f52b12f1", "author": {"user": {"login": "NehaBroad", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/30f91c24f51cd6ceaeacb0d6980e03a6f52b12f1", "committedDate": "2020-10-27T02:09:58Z", "message": "Easier to read"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4025, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}