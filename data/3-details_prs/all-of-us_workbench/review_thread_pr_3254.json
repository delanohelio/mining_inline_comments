{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4MzI2MDEw", "number": 3254, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDo1NjoxNFrODoDuSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNjozOTo0OFrODpMP1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzMwNjM1OnYy", "diffSide": "RIGHT", "path": ".circleci/config.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDo1NjoxNFrOF2aDKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDo1NjoxNFrOF2aDKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5NDIxOA==", "bodyText": "The logs folder is going to be created in a follow-up PR for test results and screenshots.", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r392594218", "createdAt": "2020-03-14T14:56:14Z", "author": {"login": "aweng98"}, "path": ".circleci/config.yml", "diffHunk": "@@ -257,7 +257,52 @@ jobs:\n           root: .\n           paths:\n             - ui\n-\n+  \n+  puppeteer-e2e-test:\n+    docker:\n+      - image: circleci/node:12.16.1\n+    working_directory: ~/workbench\n+    steps:\n+      - checkout\n+      - run:\n+          name: Fetch Submodules\n+          command: git submodule update --init --recursive\n+      - restore_cache:\n+          keys:\n+          - ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n+          - ui-cache-\n+      - run: \n+          working_directory: ~/workbench/e2e\n+          command: yarn cache clean && yarn install --verbose --frozen-lockfile\n+      - save_cache:\n+          paths:\n+            - ~/.cache/yarn\n+          key: ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n+      - run:\n+          working_directory: ~/workbench/e2e\n+          name: Install Headless Chrome dependencies\n+          command: |\n+            sudo apt-get install -yq \\\n+              gconf-service libasound2 libatk1.0-0 libatk-bridge2.0-0 libc6 libcairo2 libcups2 libdbus-1-3 \\\n+              libexpat1 libfontconfig1 libgcc1 libgconf-2-4 libgdk-pixbuf2.0-0 libglib2.0-0 libgtk-3-0 libnspr4 \\\n+              libpango-1.0-0 libpangocairo-1.0-0 libstdc++6 libx11-6 libx11-xcb1 libxcb1 libxcomposite1 libxcursor1 \\\n+              libxdamage1 libxext6 libxfixes3 libxi6 libxrandr2 libxrender1 libxss1 libxtst6 ca-certificates \\\n+              fonts-liberation libappindicator1 libnss3 lsb-release xdg-utils wget\n+      - run:\n+          name: Update environment variables\n+          command: |\n+            echo 'export USER_NAME=$PUPPETEER_TEST_USER' >> $BASH_ENV\n+            echo 'export PASSWORD=$PUPPETEER_TEST_USER_PASSWORD' >> $BASH_ENV\n+            echo 'export INVITATION_KEY=$PUPPETEER_TEST_REGISTRATION_KEY' >> $BASH_ENV\n+            echo 'export CONTACT_EMAIL=hermione.owner@quality.firecloud.org' >> $BASH_ENV\n+            source $BASH_ENV\n+      - run:\n+          name: Run e2e tests (Puppeteer and Jest)\n+          working_directory: ~/workbench/e2e\n+          command: yarn --silent test:ci\n+      - store_artifacts:\n+          path: e2e/logs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b730913b60fcf1de6470354d777fedffd1e745e1"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzMwNjgwOnYy", "diffSide": "RIGHT", "path": ".circleci/config.yml", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDo1Njo1NFrOF2aDZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNDoxMTowNFrOF4GuRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5NDI3OQ==", "bodyText": "Remove this line. Uncomment line #414 - 419 before PR merge.", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r392594279", "createdAt": "2020-03-14T14:56:54Z", "author": {"login": "aweng98"}, "path": ".circleci/config.yml", "diffHunk": "@@ -356,6 +401,7 @@ workflows:\n       - ui-build-test\n       - api-bigquery-test\n       - api-integration-test\n+      - puppeteer-e2e-test # to test Puppeteer tests start and run. To be removed before PR merge.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b730913b60fcf1de6470354d777fedffd1e745e1"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc1MDg2MA==", "bodyText": "More thoughts about this line: If it is run for every commit, I can get more runs to find out, isolate any test that could be flaky.", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r393750860", "createdAt": "2020-03-17T15:10:15Z", "author": {"login": "aweng98"}, "path": ".circleci/config.yml", "diffHunk": "@@ -356,6 +401,7 @@ workflows:\n       - ui-build-test\n       - api-bigquery-test\n       - api-integration-test\n+      - puppeteer-e2e-test # to test Puppeteer tests start and run. To be removed before PR merge.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5NDI3OQ=="}, "originalCommit": {"oid": "b730913b60fcf1de6470354d777fedffd1e745e1"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk2MjA3OQ==", "bodyText": "Would prefer we don't do that, this will generate noise on unrelated PRs.", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r393962079", "createdAt": "2020-03-17T20:51:09Z", "author": {"login": "calbach"}, "path": ".circleci/config.yml", "diffHunk": "@@ -356,6 +401,7 @@ workflows:\n       - ui-build-test\n       - api-bigquery-test\n       - api-integration-test\n+      - puppeteer-e2e-test # to test Puppeteer tests start and run. To be removed before PR merge.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5NDI3OQ=="}, "originalCommit": {"oid": "b730913b60fcf1de6470354d777fedffd1e745e1"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM3NDcyNw==", "bodyText": "\ud83d\udc4dline removed.", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r394374727", "createdAt": "2020-03-18T14:11:04Z", "author": {"login": "aweng98"}, "path": ".circleci/config.yml", "diffHunk": "@@ -356,6 +401,7 @@ workflows:\n       - ui-build-test\n       - api-bigquery-test\n       - api-integration-test\n+      - puppeteer-e2e-test # to test Puppeteer tests start and run. To be removed before PR merge.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5NDI3OQ=="}, "originalCommit": {"oid": "b730913b60fcf1de6470354d777fedffd1e745e1"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNzUxMTAxOnYy", "diffSide": "RIGHT", "path": ".circleci/config.yml", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxODo0MzoxOVrOF3BXrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNjozNzowOFrOF4NfoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzIzODQ0Ng==", "bodyText": "Can we bake some of these into the dockerfile? This seems like it would be a large amount of files to install every time.", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r393238446", "createdAt": "2020-03-16T18:43:19Z", "author": {"login": "s-rubenstein"}, "path": ".circleci/config.yml", "diffHunk": "@@ -257,7 +257,52 @@ jobs:\n           root: .\n           paths:\n             - ui\n-\n+  \n+  puppeteer-e2e-test:\n+    docker:\n+      - image: circleci/node:12.16.1\n+    working_directory: ~/workbench\n+    steps:\n+      - checkout\n+      - run:\n+          name: Fetch Submodules\n+          command: git submodule update --init --recursive\n+      - restore_cache:\n+          keys:\n+          - ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n+          - ui-cache-\n+      - run: \n+          working_directory: ~/workbench/e2e\n+          command: yarn cache clean && yarn install --verbose --frozen-lockfile\n+      - save_cache:\n+          paths:\n+            - ~/.cache/yarn\n+          key: ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n+      - run:\n+          working_directory: ~/workbench/e2e\n+          name: Install Headless Chrome dependencies\n+          command: |\n+            sudo apt-get install -yq \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b730913b60fcf1de6470354d777fedffd1e745e1"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk1ODM0MA==", "bodyText": "I'd be surprised if there isn't a prebuilt Circle image which has these. Try circleci/node:12.16.1-browsers", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r393958340", "createdAt": "2020-03-17T20:44:28Z", "author": {"login": "calbach"}, "path": ".circleci/config.yml", "diffHunk": "@@ -257,7 +257,52 @@ jobs:\n           root: .\n           paths:\n             - ui\n-\n+  \n+  puppeteer-e2e-test:\n+    docker:\n+      - image: circleci/node:12.16.1\n+    working_directory: ~/workbench\n+    steps:\n+      - checkout\n+      - run:\n+          name: Fetch Submodules\n+          command: git submodule update --init --recursive\n+      - restore_cache:\n+          keys:\n+          - ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n+          - ui-cache-\n+      - run: \n+          working_directory: ~/workbench/e2e\n+          command: yarn cache clean && yarn install --verbose --frozen-lockfile\n+      - save_cache:\n+          paths:\n+            - ~/.cache/yarn\n+          key: ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n+      - run:\n+          working_directory: ~/workbench/e2e\n+          name: Install Headless Chrome dependencies\n+          command: |\n+            sudo apt-get install -yq \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzIzODQ0Ng=="}, "originalCommit": {"oid": "b730913b60fcf1de6470354d777fedffd1e745e1"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM4MjM3OA==", "bodyText": "I saw node:<version>-browsers image too. I chose not to use it because image installs Firefox and Chrome/chromedriver. Test run in Chromium headless. So installed files are not exactly what test need and provided more than what test need. No preference from me as long as image works.  Do folks still prefer node:<version>-browsers?\nSo I tried circleci/node:13.10.1-browsers image and test ran in headless mode so I think it is okay to use that a node:<version>-browswer image.", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r394382378", "createdAt": "2020-03-18T14:21:14Z", "author": {"login": "aweng98"}, "path": ".circleci/config.yml", "diffHunk": "@@ -257,7 +257,52 @@ jobs:\n           root: .\n           paths:\n             - ui\n-\n+  \n+  puppeteer-e2e-test:\n+    docker:\n+      - image: circleci/node:12.16.1\n+    working_directory: ~/workbench\n+    steps:\n+      - checkout\n+      - run:\n+          name: Fetch Submodules\n+          command: git submodule update --init --recursive\n+      - restore_cache:\n+          keys:\n+          - ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n+          - ui-cache-\n+      - run: \n+          working_directory: ~/workbench/e2e\n+          command: yarn cache clean && yarn install --verbose --frozen-lockfile\n+      - save_cache:\n+          paths:\n+            - ~/.cache/yarn\n+          key: ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n+      - run:\n+          working_directory: ~/workbench/e2e\n+          name: Install Headless Chrome dependencies\n+          command: |\n+            sudo apt-get install -yq \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzIzODQ0Ng=="}, "originalCommit": {"oid": "b730913b60fcf1de6470354d777fedffd1e745e1"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQ4NTY2NA==", "bodyText": "Thanks, this is good. We just don't want to maintain this long list of package installs if we can avoid it. Image size of prebuilt Circle images is not really a concern since Circle automatically caches them all.", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r394485664", "createdAt": "2020-03-18T16:37:08Z", "author": {"login": "calbach"}, "path": ".circleci/config.yml", "diffHunk": "@@ -257,7 +257,52 @@ jobs:\n           root: .\n           paths:\n             - ui\n-\n+  \n+  puppeteer-e2e-test:\n+    docker:\n+      - image: circleci/node:12.16.1\n+    working_directory: ~/workbench\n+    steps:\n+      - checkout\n+      - run:\n+          name: Fetch Submodules\n+          command: git submodule update --init --recursive\n+      - restore_cache:\n+          keys:\n+          - ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n+          - ui-cache-\n+      - run: \n+          working_directory: ~/workbench/e2e\n+          command: yarn cache clean && yarn install --verbose --frozen-lockfile\n+      - save_cache:\n+          paths:\n+            - ~/.cache/yarn\n+          key: ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n+      - run:\n+          working_directory: ~/workbench/e2e\n+          name: Install Headless Chrome dependencies\n+          command: |\n+            sudo apt-get install -yq \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzIzODQ0Ng=="}, "originalCommit": {"oid": "b730913b60fcf1de6470354d777fedffd1e745e1"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNzUxMzc0OnYy", "diffSide": "RIGHT", "path": ".circleci/config.yml", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxODo0NDoxNVrOF3BZeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxOToyMToxMVrOF3qp_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzIzODkwNA==", "bodyText": "Could you add the puppeteer tests to the staging deploy job as well? We should probably block releases on this?", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r393238904", "createdAt": "2020-03-16T18:44:15Z", "author": {"login": "s-rubenstein"}, "path": ".circleci/config.yml", "diffHunk": "@@ -398,6 +450,7 @@ workflows:\n             - api-deps-check\n             - api-integration-test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b730913b60fcf1de6470354d777fedffd1e745e1"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzcyMTc1NQ==", "bodyText": "Could you add the puppeteer tests to the staging deploy job as well? We should probably block releases on this?\n\nThis sounds like the right approach on the surface (at least until we can run these tests hermetically pre-merge, which would provide a strong guarantee that \"any merged code passes our e2e tests\"). We should probably let this burn in for awhile before potentially disrupting our release process. This sounds like a good point to discuss in the design doc (@aweng98 can you add a link to the design from RW-4139?) and potentially discuss at tomorrow's eng sync.", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r393721755", "createdAt": "2020-03-17T14:30:24Z", "author": {"login": "gjuggler"}, "path": ".circleci/config.yml", "diffHunk": "@@ -398,6 +450,7 @@ workflows:\n             - api-deps-check\n             - api-integration-test", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzIzODkwNA=="}, "originalCommit": {"oid": "b730913b60fcf1de6470354d777fedffd1e745e1"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzkxNDg3Ng==", "bodyText": "My recommendation is take some time to learn more about tests, test framework and Puppeteer. Let's keep it simple and non-disruptive. Only enable this job for test-deploying and non-blocking deploy and releases.", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r393914876", "createdAt": "2020-03-17T19:21:11Z", "author": {"login": "aweng98"}, "path": ".circleci/config.yml", "diffHunk": "@@ -398,6 +450,7 @@ workflows:\n             - api-deps-check\n             - api-integration-test", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzIzODkwNA=="}, "originalCommit": {"oid": "b730913b60fcf1de6470354d777fedffd1e745e1"}, "originalPosition": 77}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MTk2Mjc2OnYy", "diffSide": "RIGHT", "path": ".circleci/config.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMDo1MjoyMlrOF3tmCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNDoxMDoxMFrOF4Grlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk2MzAxNw==", "bodyText": "This doesn't seem like it needs to be configurable via an env var.", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r393963017", "createdAt": "2020-03-17T20:52:22Z", "author": {"login": "calbach"}, "path": ".circleci/config.yml", "diffHunk": "@@ -257,7 +257,54 @@ jobs:\n           root: .\n           paths:\n             - ui\n-\n+  \n+  puppeteer-e2e-test:\n+    docker:\n+      - image: circleci/node:12.16.1\n+        environment:\n+          NODE_ENV: development\n+    working_directory: ~/workbench\n+    steps:\n+      - checkout\n+      - run:\n+          name: Fetch Submodules\n+          command: git submodule update --init --recursive\n+      - restore_cache:\n+          keys:\n+          - ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n+          - ui-cache-\n+      - run: \n+          working_directory: ~/workbench/e2e\n+          command: yarn cache clean && yarn install --verbose --frozen-lockfile\n+      - save_cache:\n+          paths:\n+            - ~/.cache/yarn\n+          key: ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n+      - run:\n+          working_directory: ~/workbench/e2e\n+          name: Install Headless Chrome dependencies\n+          command: |\n+            sudo apt-get install -yq \\\n+              gconf-service libasound2 libatk1.0-0 libatk-bridge2.0-0 libc6 libcairo2 libcups2 libdbus-1-3 \\\n+              libexpat1 libfontconfig1 libgcc1 libgconf-2-4 libgdk-pixbuf2.0-0 libglib2.0-0 libgtk-3-0 libnspr4 \\\n+              libpango-1.0-0 libpangocairo-1.0-0 libstdc++6 libx11-6 libx11-xcb1 libxcb1 libxcomposite1 libxcursor1 \\\n+              libxdamage1 libxext6 libxfixes3 libxi6 libxrandr2 libxrender1 libxss1 libxtst6 ca-certificates \\\n+              fonts-liberation libappindicator1 libnss3 lsb-release xdg-utils wget\n+      - run:\n+          name: Update environment variables\n+          command: |\n+            echo 'export USER_NAME=$PUPPETEER_TEST_USER' >> $BASH_ENV\n+            echo 'export PASSWORD=$PUPPETEER_TEST_USER_PASSWORD' >> $BASH_ENV\n+            echo 'export INVITATION_KEY=$PUPPETEER_TEST_REGISTRATION_KEY' >> $BASH_ENV\n+            echo 'export CONTACT_EMAIL=hermione.owner@quality.firecloud.org' >> $BASH_ENV", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d3e7f5d760a51d1258bd198a9a2221d524603e0"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM3NDAzOQ==", "bodyText": "right. it's not a \"secret\" value. I'll remove it here and refactor in next PR.", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r394374039", "createdAt": "2020-03-18T14:10:10Z", "author": {"login": "aweng98"}, "path": ".circleci/config.yml", "diffHunk": "@@ -257,7 +257,54 @@ jobs:\n           root: .\n           paths:\n             - ui\n-\n+  \n+  puppeteer-e2e-test:\n+    docker:\n+      - image: circleci/node:12.16.1\n+        environment:\n+          NODE_ENV: development\n+    working_directory: ~/workbench\n+    steps:\n+      - checkout\n+      - run:\n+          name: Fetch Submodules\n+          command: git submodule update --init --recursive\n+      - restore_cache:\n+          keys:\n+          - ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n+          - ui-cache-\n+      - run: \n+          working_directory: ~/workbench/e2e\n+          command: yarn cache clean && yarn install --verbose --frozen-lockfile\n+      - save_cache:\n+          paths:\n+            - ~/.cache/yarn\n+          key: ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n+      - run:\n+          working_directory: ~/workbench/e2e\n+          name: Install Headless Chrome dependencies\n+          command: |\n+            sudo apt-get install -yq \\\n+              gconf-service libasound2 libatk1.0-0 libatk-bridge2.0-0 libc6 libcairo2 libcups2 libdbus-1-3 \\\n+              libexpat1 libfontconfig1 libgcc1 libgconf-2-4 libgdk-pixbuf2.0-0 libglib2.0-0 libgtk-3-0 libnspr4 \\\n+              libpango-1.0-0 libpangocairo-1.0-0 libstdc++6 libx11-6 libx11-xcb1 libxcb1 libxcomposite1 libxcursor1 \\\n+              libxdamage1 libxext6 libxfixes3 libxi6 libxrandr2 libxrender1 libxss1 libxtst6 ca-certificates \\\n+              fonts-liberation libappindicator1 libnss3 lsb-release xdg-utils wget\n+      - run:\n+          name: Update environment variables\n+          command: |\n+            echo 'export USER_NAME=$PUPPETEER_TEST_USER' >> $BASH_ENV\n+            echo 'export PASSWORD=$PUPPETEER_TEST_USER_PASSWORD' >> $BASH_ENV\n+            echo 'export INVITATION_KEY=$PUPPETEER_TEST_REGISTRATION_KEY' >> $BASH_ENV\n+            echo 'export CONTACT_EMAIL=hermione.owner@quality.firecloud.org' >> $BASH_ENV", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk2MzAxNw=="}, "originalCommit": {"oid": "3d3e7f5d760a51d1258bd198a9a2221d524603e0"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NDg2MzM2OnYy", "diffSide": "RIGHT", "path": ".circleci/config.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNToyNzoyNlrOF4KUoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxODo1MTowOVrOF4Sllw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQzMzY5Nw==", "bodyText": "Can you add a comment here describing this workflow a bit (e.g. \"Runs the suite of Puppeteer end-to-end QA tests, pointed at the test Workbench environment.\") and possibly add a cross-link to the relevant Jira ticket or design doc?", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r394433697", "createdAt": "2020-03-18T15:27:26Z", "author": {"login": "gjuggler"}, "path": ".circleci/config.yml", "diffHunk": "@@ -257,7 +257,44 @@ jobs:\n           root: .\n           paths:\n             - ui\n-\n+  \n+  puppeteer-e2e-test:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "019922c7f18c9cee91b9bbaeb508e63934796739"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU2OTExMQ==", "bodyText": "That's easy. doing so doesn't over-comment code, right? I do have a comment at line #405 in workflows section, although not worded same.", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r394569111", "createdAt": "2020-03-18T18:51:09Z", "author": {"login": "aweng98"}, "path": ".circleci/config.yml", "diffHunk": "@@ -257,7 +257,44 @@ jobs:\n           root: .\n           paths:\n             - ui\n-\n+  \n+  puppeteer-e2e-test:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQzMzY5Nw=="}, "originalCommit": {"oid": "019922c7f18c9cee91b9bbaeb508e63934796739"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NTE4ODY5OnYy", "diffSide": "RIGHT", "path": ".circleci/config.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNjozOTo0OFrOF4NmwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNjozOTo0OFrOF4NmwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQ4NzQ4OQ==", "bodyText": "Please name this key differently here and below:\ne.g.\n- e2e-cache-{{ checksum ... }}\n- e2e-cache-\n\nThis is not caching the same thing as the above UI tests", "url": "https://github.com/all-of-us/workbench/pull/3254#discussion_r394487489", "createdAt": "2020-03-18T16:39:48Z", "author": {"login": "calbach"}, "path": ".circleci/config.yml", "diffHunk": "@@ -257,7 +257,52 @@ jobs:\n           root: .\n           paths:\n             - ui\n-\n+  \n+  puppeteer-e2e-test:\n+    docker:\n+      - image: circleci/node:12.16.1\n+    working_directory: ~/workbench\n+    steps:\n+      - checkout\n+      - run:\n+          name: Fetch Submodules\n+          command: git submodule update --init --recursive\n+      - restore_cache:\n+          keys:\n+          - ui-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b730913b60fcf1de6470354d777fedffd1e745e1"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3236, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}