{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4NTk4NzA1", "number": 3585, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzo1MToxNlrOD84U4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzo1MzoxMVrOD84YRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MTY0MDAxOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/pmiops/workbench/db/model/DbInstitution.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzo1MToxNlrOGWFvJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzo1MToxNlrOGWFvJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTgxNTg0Ng==", "bodyText": "Removed the claim of NotNull - this is safer", "url": "https://github.com/all-of-us/workbench/pull/3585#discussion_r425815846", "createdAt": "2020-05-15T13:51:16Z", "author": {"login": "jmthibault79"}, "path": "api/src/main/java/org/pmiops/workbench/db/model/DbInstitution.java", "diffHunk": "@@ -110,10 +112,11 @@ public DbInstitution setOrganizationTypeOtherText(String organizationTypeOtherTe\n    *\n    * @param emailDomains the new collection of domains for this Institution\n    */\n-  public DbInstitution setEmailDomains(\n-      @NotNull final Collection<DbInstitutionEmailDomain> emailDomains) {\n+  public DbInstitution setEmailDomains(final Collection<DbInstitutionEmailDomain> emailDomains) {\n     final Set<DbInstitutionEmailDomain> attachedDomains =\n-        emailDomains.stream()\n+        Optional.ofNullable(emailDomains)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb311b0a1600a0e988257959517ac73201fbb7e4"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MTY0MjExOnYy", "diffSide": "RIGHT", "path": "api/tools/src/main/java/org/pmiops/workbench/tools/LoadInstitutions.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzo1MTo0OFrOGWFwZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzo1MTo0OFrOGWFwZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTgxNjE2Nw==", "bodyText": "part of the @Transactional hack", "url": "https://github.com/all-of-us/workbench/pull/3585#discussion_r425816167", "createdAt": "2020-05-15T13:51:48Z", "author": {"login": "jmthibault79"}, "path": "api/tools/src/main/java/org/pmiops/workbench/tools/LoadInstitutions.java", "diffHunk": "@@ -28,6 +28,7 @@\n   InstitutionUserInstructionsMapperImpl.class,\n   PublicInstitutionDetailsMapperImpl.class,\n })\n+@EnableTransactionManagement", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb311b0a1600a0e988257959517ac73201fbb7e4"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MTY0ODcxOnYy", "diffSide": "LEFT", "path": "api/tools/src/main/java/org/pmiops/workbench/tools/LoadInstitutions.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzo1MzoxMVrOGWF0Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzo1MzoxMVrOGWF0Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTgxNzE2Mw==", "bodyText": "No longer necessary after #3567", "url": "https://github.com/all-of-us/workbench/pull/3585#discussion_r425817163", "createdAt": "2020-05-15T13:53:11Z", "author": {"login": "jmthibault79"}, "path": "api/tools/src/main/java/org/pmiops/workbench/tools/LoadInstitutions.java", "diffHunk": "@@ -59,22 +60,18 @@ public CommandLineRunner run(InstitutionService institutionService) {\n         Institution[] institutions = mapper.readValue(reader, Institution[].class);\n \n         for (Institution institution : institutions) {\n-          Optional<Institution> institutionMaybe =\n+          Optional<Institution> fetchedInstitutionMaybe =\n               institutionService.getInstitution(institution.getShortName());\n-          if (institutionMaybe.isPresent()) {\n-            log.info(\"Skipping... Entry already exists for \" + institution.getShortName());\n-            Institution fetchedInstitution = institutionMaybe.get();\n-            fetchedInstitution.getEmailDomains().sort(Comparator.naturalOrder());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb311b0a1600a0e988257959517ac73201fbb7e4"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2674, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}