{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1NDQ0OTQz", "number": 3017, "title": "[RW-2695][risk=moderate] AoU workspace owners are now billing project owners instead of users", "bodyText": "Description:\nWe are increasing the scope of the AoU workspace owner (also the Firecloud project owner) to grant the owner role on the corresponding billing project. This grant takes place on new workspace creation as well as workspace sharing. Ownership is removed if a user is removed as an owner from a billing project.\nThis PR also adds a project.rb command which will backfill all existing workspace owners as billing project owners. This is an adaptation of the backfill billing project users script. The most notable changes are\n\nGranting \"owner\" instead of \"user\"\nNot skipping over workspace creators\n\nRunning the dry-run version of the script on stable results in 468 calls\nINFO: [DRY RUN] Would have... added 468 users as billing project owners\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-01-21T18:20:33Z", "url": "https://github.com/all-of-us/workbench/pull/3017", "merged": true, "mergeCommit": {"oid": "9f383336c32b06fd06992a72f4573631fd5a6b11"}, "closed": true, "closedAt": "2020-01-21T22:21:56Z", "author": {"login": "ericsong"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8kOV7AH2gAyMzY1NDQ0OTQzOjZjN2IyZmYwZWU4NjMyYTIwNzc2MTAxZTI4OWMxYTkzMWU0YjMyOWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8oaZMgH2gAyMzY1NDQ0OTQzOjM0MTBjZTIxOTZlMGM5NDY3YThmMTYwNjBiOTBmYmQxMDBhYzFjNDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6c7b2ff0ee8632a20776101e289c1a931e4b329a", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/all-of-us/workbench/commit/6c7b2ff0ee8632a20776101e289c1a931e4b329a", "committedDate": "2020-01-21T17:02:38Z", "message": "add/remove owners instead of user orle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e0747303b3b0ee9b8f468a358613c37ffaf4fd6", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/all-of-us/workbench/commit/0e0747303b3b0ee9b8f468a358613c37ffaf4fd6", "committedDate": "2020-01-21T18:11:24Z", "message": "bring back and modify backfill script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b08070208ee7421ba8066b831f4c2d0c0cc956c3", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/all-of-us/workbench/commit/b08070208ee7421ba8066b831f4c2d0c0cc956c3", "committedDate": "2020-01-21T18:28:19Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "765553e76e0f158b5815c33447d6e4b15eccc74e", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/all-of-us/workbench/commit/765553e76e0f158b5815c33447d6e4b15eccc74e", "committedDate": "2020-01-21T20:21:29Z", "message": "PROTOTYPE - overwrite backfill to check billing project member roles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db53c8a086adb71c40be32d0f587bdadb740cd52", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/all-of-us/workbench/commit/db53c8a086adb71c40be32d0f587bdadb740cd52", "committedDate": "2020-01-21T20:21:39Z", "message": "Revert \"PROTOTYPE - overwrite backfill to check billing project member roles\"\n\nThis reverts commit 765553e76e0f158b5815c33447d6e4b15eccc74e."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "517e2b2f05474c94fcb3367a135a2e497e35a230", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/all-of-us/workbench/commit/517e2b2f05474c94fcb3367a135a2e497e35a230", "committedDate": "2020-01-21T20:26:57Z", "message": "remove owners as users before adding as owners"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MTg3MzEw", "url": "https://github.com/all-of-us/workbench/pull/3017#pullrequestreview-346187310", "createdAt": "2020-01-21T21:00:02Z", "commit": {"oid": "517e2b2f05474c94fcb3367a135a2e497e35a230"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMTowMDowMlrOFgIn6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMTowMDowMlrOFgIn6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI0MDA0MA==", "bodyText": "s/users/owners/", "url": "https://github.com/all-of-us/workbench/pull/3017#discussion_r369240040", "createdAt": "2020-01-21T21:00:02Z", "author": {"login": "calbach"}, "path": "api/build.gradle", "diffHunk": "@@ -740,6 +740,16 @@ task loadDataDictionary(type: JavaExec) {\n   }\n }\n \n+// See project.rb command: backfill-billing-project-users", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "517e2b2f05474c94fcb3367a135a2e497e35a230"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3410ce2196e0c9467a8f16060b90fbd100ac1c40", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/all-of-us/workbench/commit/3410ce2196e0c9467a8f16060b90fbd100ac1c40", "committedDate": "2020-01-21T21:55:25Z", "message": "user -> owners"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3701, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}