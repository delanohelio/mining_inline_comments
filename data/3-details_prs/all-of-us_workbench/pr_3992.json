{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1MTUzNDc5", "number": 3992, "title": "[RW-5477][RW-5479][risk=np=o] Workflow for creating synthetic microarray data on Cromwell", "bodyText": "Description:\nTested on ~100 sample set with 4 partitions and 5 batch size\nPerf testing on a single batch of n=10\nn1-standard-1 (1 cpu 4Gb RAM) => 68m\nn1-standard-2 (2 cpu 8Gb RAM) => 45m\nFor 100,000 samples which would be 10,000 instances with a batch size of n=10, Google Cloud Pricing calculator estimates...\n\n$113.33 if we use n1-standard-1\n$263.33 if we use n1-standard-2\n\n\nPR checklist\n\n This PR meets the Acceptance Criteria in the JIRA story\n The JIRA story has been moved to Dev Review\n This PR includes appropriate unit tests\n I have run and tested this change locally\n I have run the E2E tests on ths change against my local UI + API server with yarn test:local\n If this includes a UI change, I have taken screen recordings or screenshots of the new behavior and notified the PO and UX designer\n If this includes an API change, I have updated the appropriate Swagger definitions and notified API consumers\n If this includes a new feature flag, I have created and linked new JIRA tickets to (a) turn on the feature flag and (b) remove it later", "createdAt": "2020-09-11T14:48:31Z", "url": "https://github.com/all-of-us/workbench/pull/3992", "merged": true, "mergeCommit": {"oid": "61049245bb161b53a9977079d98de108140000fd"}, "closed": true, "closedAt": "2020-09-14T14:17:38Z", "author": {"login": "ericsong"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdH2fydAH2gAyNDg1MTUzNDc5OjE4ZjU3ZDhmNGY4NGI4NWYzZDUyZGI2NDQ5OWVmZjc5MWFhZTYyODQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdH6EbRAH2gAyNDg1MTUzNDc5OjBiZTU1NDVlOThhM2M1YjAxYWJhYzU2NThiNzhlOTQwYjA4ZDJlOWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "18f57d8f4f84b85f3d52db64499eff791aae6284", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/all-of-us/workbench/commit/18f57d8f4f84b85f3d52db64499eff791aae6284", "committedDate": "2020-09-11T14:44:18Z", "message": "add ArrayIngest and combined steps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eeefb644fdb5463a01631d3acea9c9cce394e908", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/all-of-us/workbench/commit/eeefb644fdb5463a01631d3acea9c9cce394e908", "committedDate": "2020-09-11T14:48:17Z", "message": "rename chunk to batch"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2OTc5OTA2", "url": "https://github.com/all-of-us/workbench/pull/3992#pullrequestreview-486979906", "createdAt": "2020-09-11T17:09:50Z", "commit": {"oid": "eeefb644fdb5463a01631d3acea9c9cce394e908"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNzowOTo1MFrOHQm-vA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNzowOTo1MFrOHQm-vA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzE3NzkxNg==", "bodyText": "If there's an actual limit of 4,000 on this please include that in the comment even if it should be set to 10 for actual runs", "url": "https://github.com/all-of-us/workbench/pull/3992#discussion_r487177916", "createdAt": "2020-09-11T17:09:50Z", "author": {"login": "als364"}, "path": "api/genomics/wdl/IngestSyntheticVcfWf.wdl", "diffHunk": "@@ -2,40 +2,92 @@ version 1.0\n \n workflow IngestSyntheticVcfWf {\n   input {\n-    File base_vcf\n+    File base_vcf # Sample VCF file that the randomization will be based on\n     File base_vcf_index\n-    File file_of_sample_names\n-    String output_file\n+    File sample_names # Newline separated list of names \n+    Int num_partitions # sample_names will be evenly split across this #\n+    String output_bucket # Bucket that will contain the generated TSV data\n+    File probe_info_file\n+\n+    Int batch_size # Should be set to 10 for actual runs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eeefb644fdb5463a01631d3acea9c9cce394e908"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "749d83d8b8513913b7bad988237dff62b53a4a94", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/all-of-us/workbench/commit/749d83d8b8513913b7bad988237dff62b53a4a94", "committedDate": "2020-09-11T18:48:17Z", "message": "decrease runtime specs to ones matching n1-standard-1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0be5545e98a3c5b01abac5658b78e940b08d2e9c", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/all-of-us/workbench/commit/0be5545e98a3c5b01abac5658b78e940b08d2e9c", "committedDate": "2020-09-11T18:54:02Z", "message": "add comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4205, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}