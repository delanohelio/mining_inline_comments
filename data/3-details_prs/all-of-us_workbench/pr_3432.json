{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MzA5MDkw", "number": 3432, "title": "[RW-4784][risk=no] Puppeteer project reorganizing dir structures", "bodyText": "Files and directory reorganization.\nMoved out common functions to its own file. takeScreenshot, savePageToFile, makeString, etc.", "createdAt": "2020-04-17T19:44:49Z", "url": "https://github.com/all-of-us/workbench/pull/3432", "merged": true, "mergeCommit": {"oid": "f86fb2ec2e7a87e4b3fabd98e46c247376e97b03"}, "closed": true, "closedAt": "2020-04-23T17:12:32Z", "author": {"login": "aweng98"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcY4PRpABqjMyNDc4OTA3MjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcagFImgFqTM5OTMwNzAxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4da882e88385756a0cf8f0459e61b0312ef2459", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/d4da882e88385756a0cf8f0459e61b0312ef2459", "committedDate": "2020-04-18T16:08:54Z", "message": "saving"}, "afterCommit": {"oid": "ce3c1ba2d9634705160e8e978f36fddd99541d53", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/ce3c1ba2d9634705160e8e978f36fddd99541d53", "committedDate": "2020-04-18T16:11:05Z", "message": "reorg dir\n\ncircieci: increase no output timeout\n\nundo change in circleci\n\nsaving"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2dd013c5498baa26ac1a59a3f28b1cec3cfa4045", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/2dd013c5498baa26ac1a59a3f28b1cec3cfa4045", "committedDate": "2020-04-18T16:52:54Z", "message": "save-file-utils.ts"}, "afterCommit": {"oid": "1556c555465a4fbede5d9bc89c31a108a67f7021", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/1556c555465a4fbede5d9bc89c31a108a67f7021", "committedDate": "2020-04-18T16:53:54Z", "message": "reorg dir\n\ncircieci: increase no output timeout\n\nundo change in circleci\n\nsaving\n\nsave-file-utils.ts"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1556c555465a4fbede5d9bc89c31a108a67f7021", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/1556c555465a4fbede5d9bc89c31a108a67f7021", "committedDate": "2020-04-18T16:53:54Z", "message": "reorg dir\n\ncircieci: increase no output timeout\n\nundo change in circleci\n\nsaving\n\nsave-file-utils.ts"}, "afterCommit": {"oid": "6a40e9b556964cace02e80fe3ab9d4901d6f989e", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/6a40e9b556964cace02e80fe3ab9d4901d6f989e", "committedDate": "2020-04-18T16:58:50Z", "message": "rebase"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MzMwMjYy", "url": "https://github.com/all-of-us/workbench/pull/3432#pullrequestreview-397330262", "createdAt": "2020-04-21T13:29:34Z", "commit": {"oid": "6a40e9b556964cace02e80fe3ab9d4901d6f989e"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMzoyOTozNFrOGJFyBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNDo0MzoyNlrOGJJmVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjE4NTA5NQ==", "bodyText": "nice", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r412185095", "createdAt": "2020-04-21T13:29:34Z", "author": {"login": "jmthibault79"}, "path": "e2e/app/page/workspaces-page.ts", "diffHunk": "@@ -119,7 +120,7 @@ export default class WorkspacesPage extends WorkspaceEditPage {\n    * @return {string} new workspace name\n    */\n   async fillOutWorkspaceName(): Promise<string> {\n-    const newWorkspaceName = `aoutest-${Math.floor(Math.random() * 1000)}-${Math.floor(Date.now() / 1000)}`;\n+    const newWorkspaceName = makeWorkspaceName();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a40e9b556964cace02e80fe3ab9d4901d6f989e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI0MTg4MQ==", "bodyText": "should this also move to utils?", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r412241881", "createdAt": "2020-04-21T14:36:43Z", "author": {"login": "jmthibault79"}, "path": "e2e/tests/app.ts", "diffHunk": "@@ -1,5 +1,5 @@\n import {Page} from 'puppeteer';\n-import GoogleLoginPage from 'app/google-login';\n+import GoogleLoginPage from 'app/page/google-login';\n \n \n export const signIn = async (page: Page) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a40e9b556964cace02e80fe3ab9d4901d6f989e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI0NzYzOA==", "bodyText": "WorkspaceCard extends BaseElement.  Is it a Component or an Element?", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r412247638", "createdAt": "2020-04-21T14:43:26Z", "author": {"login": "jmthibault79"}, "path": "e2e/app/component/workspace-card.ts", "diffHunk": "@@ -1,7 +1,7 @@\n import {ElementHandle, Page} from 'puppeteer';\n import {WorkspaceAccessLevel} from 'app/page-identifiers';\n-import BaseElement from 'app/aou-elements/base-element';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a40e9b556964cace02e80fe3ab9d4901d6f989e"}, "originalPosition": 3}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "844bda8e729569ec381379815c7540505d7a6738", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/844bda8e729569ec381379815c7540505d7a6738", "committedDate": "2020-04-23T02:24:23Z", "message": "pr feedback"}, "afterCommit": {"oid": "62ec482e63129d5bd2bfaf0bd0e9a94f685aef89", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/62ec482e63129d5bd2bfaf0bd0e9a94f685aef89", "committedDate": "2020-04-23T02:25:54Z", "message": "refactor and cleanup code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a21b28813f18b7265b18b477b6f39ca76e59cae", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/6a21b28813f18b7265b18b477b6f39ca76e59cae", "committedDate": "2020-04-23T02:26:57Z", "message": "refactor and cleanup code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05f6ae3dade2df6ecef4240d3558aabe3c840a1d", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/05f6ae3dade2df6ecef4240d3558aabe3c840a1d", "committedDate": "2020-04-23T03:47:34Z", "message": "pr feedback"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "62ec482e63129d5bd2bfaf0bd0e9a94f685aef89", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/62ec482e63129d5bd2bfaf0bd0e9a94f685aef89", "committedDate": "2020-04-23T02:25:54Z", "message": "refactor and cleanup code"}, "afterCommit": {"oid": "05f6ae3dade2df6ecef4240d3558aabe3c840a1d", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/05f6ae3dade2df6ecef4240d3558aabe3c840a1d", "committedDate": "2020-04-23T03:47:34Z", "message": "pr feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NzE2ODM1", "url": "https://github.com/all-of-us/workbench/pull/3432#pullrequestreview-398716835", "createdAt": "2020-04-23T02:28:38Z", "commit": {"oid": "62ec482e63129d5bd2bfaf0bd0e9a94f685aef89"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMjoyODozOFrOGKTxPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMzo0OToyNVrOGKVTcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ2Mjg0NA==", "bodyText": "\ud83d\udc4d  It should be a Component. I refactored code.", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413462844", "createdAt": "2020-04-23T02:28:38Z", "author": {"login": "aweng98"}, "path": "e2e/app/component/workspace-card.ts", "diffHunk": "@@ -1,7 +1,7 @@\n import {ElementHandle, Page} from 'puppeteer';\n import {WorkspaceAccessLevel} from 'app/page-identifiers';\n-import BaseElement from 'app/aou-elements/base-element';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI0NzYzOA=="}, "originalCommit": {"oid": "6a40e9b556964cace02e80fe3ab9d4901d6f989e"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ2ODAxMQ==", "bodyText": "not sure where to put it. for now, it is utils/app-utils.ts.", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413468011", "createdAt": "2020-04-23T02:45:05Z", "author": {"login": "aweng98"}, "path": "e2e/tests/app.ts", "diffHunk": "@@ -1,5 +1,5 @@\n import {Page} from 'puppeteer';\n-import GoogleLoginPage from 'app/google-login';\n+import GoogleLoginPage from 'app/page/google-login';\n \n \n export const signIn = async (page: Page) => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI0MTg4MQ=="}, "originalCommit": {"oid": "6a40e9b556964cace02e80fe3ab9d4901d6f989e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ4Nzk4Nw==", "bodyText": "@calbach FYI, I got the textarea paste function to work finally.", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413487987", "createdAt": "2020-04-23T03:49:25Z", "author": {"login": "aweng98"}, "path": "e2e/app/element/base-element.ts", "diffHunk": "@@ -257,4 +257,29 @@ export default class BaseElement {\n     return this.page.evaluate( elem => elem.click(), this.element );\n   }\n \n+  /**\n+   * @param {!<string} key\n+   * @param (string|number) value\n+   * @return {!Promise}\n+   */\n+  async setAttribute(key: string, value: string) {\n+    return await this.element.evaluate((element, k, v) => {\n+      element.setAttribute(k, v);\n+    }, key, value);\n+  }\n+\n+  /**\n+   * Paste texts instead type one char at a time.\n+   * @param text\n+   */\n+  async paste(text: string) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05f6ae3dade2df6ecef4240d3558aabe3c840a1d"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7d35a63193dfa4b6bcc6fa2443eed7d57f4e8e0", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/f7d35a63193dfa4b6bcc6fa2443eed7d57f4e8e0", "committedDate": "2020-04-23T14:25:39Z", "message": "PR feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/f3e5711cc6fe4412229a88c6f3750de5dad997cf", "committedDate": "2020-04-23T14:47:42Z", "message": "PR feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MjE5MTYw", "url": "https://github.com/all-of-us/workbench/pull/3432#pullrequestreview-399219160", "createdAt": "2020-04-23T15:31:04Z", "commit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNTozMTowNVrOGKuXSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNTo0NTozOFrOGKvFNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg5ODU2OQ==", "bodyText": "what does this change do?", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413898569", "createdAt": "2020-04-23T15:31:05Z", "author": {"login": "jmthibault79"}, "path": "e2e/app/page/workspace-edit-page.ts", "diffHunk": "@@ -223,7 +223,7 @@ export const FIELD = {\n       type: 'radiobutton',\n       textOption: {textContains: LABEL_ALIAS.YES_FOCUS_ON_UNDERREPRESENTED_POPULATION}\n     },\n-    noOnUnderrepresentedPopulationRadiobutton: {\n+    noUnderrepresentedPopulationRadiobutton: {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg5OTM4OQ==", "bodyText": "is this correct?", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413899389", "createdAt": "2020-04-23T15:32:00Z", "author": {"login": "jmthibault79"}, "path": "e2e/tests/home/home-page.spec.ts", "diffHunk": "@@ -39,7 +39,7 @@ describe('Home page ui tests', () => {\n       expect(cardName).toMatch(new RegExp(/^[a-zA-Z]+/));\n \n       // check Workspace Action menu for listed actions\n-      const ellipsis = await card.getEllipsis();\n+      const ellipsis = card.getEllipsis();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg5OTcwMA==", "bodyText": "please explain these 2 changes", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413899700", "createdAt": "2020-04-23T15:32:28Z", "author": {"login": "jmthibault79"}, "path": "e2e/tests/user/registration-ui.spec.ts", "diffHunk": "@@ -72,6 +72,7 @@ describe('User registration tests:', () => {\n     await (await createAccountPage.getTermsOfUseCheckbox()).check();\n     const agreementPageButton = await createAccountPage.getNextButton();\n     await agreementPageButton.clickWithEval();\n+    await agreementPageButton.dispose();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzkwMDU2OA==", "bodyText": "also these 3 changes", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413900568", "createdAt": "2020-04-23T15:33:29Z", "author": {"login": "jmthibault79"}, "path": "e2e/tests/user/registration.spec.ts", "diffHunk": "@@ -20,18 +20,21 @@ describe('User registration tests:', () => {\n     let nextButton = await createAccountPage.getNextButton();\n     await nextButton.waitUntilEnabled();\n     await nextButton.click();\n+    await nextButton.dispose();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzkwODcyNg==", "bodyText": "this can use the new SELECTOR instead", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413908726", "createdAt": "2020-04-23T15:43:35Z", "author": {"login": "jmthibault79"}, "path": "e2e/app/component/workspace-card.ts", "diffHunk": "@@ -41,46 +45,58 @@ export default class WorkspaceCard extends BaseElement {\n   }\n \n   static async findCard(page: Page, workspaceName: string): Promise<WorkspaceCard | null> {\n-    const selector = `.//*[@data-test-id=\"workspace-card-name\" and text()=\"${workspaceName}\"]`;\n+    const selector = `.//*[@data-test-id=\"workspace-card-name\" and normalize-space(text())=\"${workspaceName}\"]`;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzkwOTMyNw==", "bodyText": "why this change?", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413909327", "createdAt": "2020-04-23T15:44:19Z", "author": {"login": "jmthibault79"}, "path": "e2e/app/component/workspace-card.ts", "diffHunk": "@@ -41,46 +45,58 @@ export default class WorkspaceCard extends BaseElement {\n   }\n \n   static async findCard(page: Page, workspaceName: string): Promise<WorkspaceCard | null> {\n-    const selector = `.//*[@data-test-id=\"workspace-card-name\" and text()=\"${workspaceName}\"]`;\n+    const selector = `.//*[@data-test-id=\"workspace-card-name\" and normalize-space(text())=\"${workspaceName}\"]`;\n     const allCards = await this.getAllCards(page);\n     for (const card of allCards) {\n-      const children = await card.asElementHandle().$x(selector);\n+      const handle = card.asElementHandle();\n+      const children = await handle.$x(selector);\n       if (children.length > 0) {\n         return card; // matched workspace name, found the Workspace card.\n       }\n-      await card.dispose(); // not it, dispose the ElementHandle.\n+      await handle.dispose(); // not it, dispose the ElementHandle.\n     }\n     return null; // not found\n   }\n \n \n-  constructor(page: Page) {\n-    super(page);\n+  constructor(private readonly page: Page) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzkxMDMyNQ==", "bodyText": "use SELECTOR", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413910325", "createdAt": "2020-04-23T15:45:38Z", "author": {"login": "jmthibault79"}, "path": "e2e/app/component/workspace-card.ts", "diffHunk": "@@ -41,46 +45,58 @@ export default class WorkspaceCard extends BaseElement {\n   }\n \n   static async findCard(page: Page, workspaceName: string): Promise<WorkspaceCard | null> {\n-    const selector = `.//*[@data-test-id=\"workspace-card-name\" and text()=\"${workspaceName}\"]`;\n+    const selector = `.//*[@data-test-id=\"workspace-card-name\" and normalize-space(text())=\"${workspaceName}\"]`;\n     const allCards = await this.getAllCards(page);\n     for (const card of allCards) {\n-      const children = await card.asElementHandle().$x(selector);\n+      const handle = card.asElementHandle();\n+      const children = await handle.$x(selector);\n       if (children.length > 0) {\n         return card; // matched workspace name, found the Workspace card.\n       }\n-      await card.dispose(); // not it, dispose the ElementHandle.\n+      await handle.dispose(); // not it, dispose the ElementHandle.\n     }\n     return null; // not found\n   }\n \n \n-  constructor(page: Page) {\n-    super(page);\n+  constructor(private readonly page: Page) {\n+\n+  }\n+\n+  async findCard(workspaceName: string): Promise<WorkspaceCard | null> {\n+    const selector = `.//*[@data-test-id=\"workspace-card-name\" and normalize-space(text())=\"${workspaceName}\"]`;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "originalPosition": 70}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "975c018a897ee01258d423e72b1f887d4c511b9c", "author": {"user": {"login": "aweng98", "name": null}}, "url": "https://github.com/all-of-us/workbench/commit/975c018a897ee01258d423e72b1f887d4c511b9c", "committedDate": "2020-04-23T16:37:37Z", "message": "PR feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MjU5MTE4", "url": "https://github.com/all-of-us/workbench/pull/3432#pullrequestreview-399259118", "createdAt": "2020-04-23T16:13:38Z", "commit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNjoxMzozOFrOGKwckA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNjozMTo1MFrOGKxTJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzkzMjY4OA==", "bodyText": "\ud83d\udc4dDone", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413932688", "createdAt": "2020-04-23T16:13:38Z", "author": {"login": "aweng98"}, "path": "e2e/app/component/workspace-card.ts", "diffHunk": "@@ -41,46 +45,58 @@ export default class WorkspaceCard extends BaseElement {\n   }\n \n   static async findCard(page: Page, workspaceName: string): Promise<WorkspaceCard | null> {\n-    const selector = `.//*[@data-test-id=\"workspace-card-name\" and text()=\"${workspaceName}\"]`;\n+    const selector = `.//*[@data-test-id=\"workspace-card-name\" and normalize-space(text())=\"${workspaceName}\"]`;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzkwODcyNg=="}, "originalCommit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzkzMzMzMw==", "bodyText": "Because class is no longer extends BaseElement.", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413933333", "createdAt": "2020-04-23T16:14:29Z", "author": {"login": "aweng98"}, "path": "e2e/app/component/workspace-card.ts", "diffHunk": "@@ -41,46 +45,58 @@ export default class WorkspaceCard extends BaseElement {\n   }\n \n   static async findCard(page: Page, workspaceName: string): Promise<WorkspaceCard | null> {\n-    const selector = `.//*[@data-test-id=\"workspace-card-name\" and text()=\"${workspaceName}\"]`;\n+    const selector = `.//*[@data-test-id=\"workspace-card-name\" and normalize-space(text())=\"${workspaceName}\"]`;\n     const allCards = await this.getAllCards(page);\n     for (const card of allCards) {\n-      const children = await card.asElementHandle().$x(selector);\n+      const handle = card.asElementHandle();\n+      const children = await handle.$x(selector);\n       if (children.length > 0) {\n         return card; // matched workspace name, found the Workspace card.\n       }\n-      await card.dispose(); // not it, dispose the ElementHandle.\n+      await handle.dispose(); // not it, dispose the ElementHandle.\n     }\n     return null; // not found\n   }\n \n \n-  constructor(page: Page) {\n-    super(page);\n+  constructor(private readonly page: Page) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzkwOTMyNw=="}, "originalCommit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzkzMzc4OQ==", "bodyText": "Done", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413933789", "createdAt": "2020-04-23T16:15:05Z", "author": {"login": "aweng98"}, "path": "e2e/app/component/workspace-card.ts", "diffHunk": "@@ -41,46 +45,58 @@ export default class WorkspaceCard extends BaseElement {\n   }\n \n   static async findCard(page: Page, workspaceName: string): Promise<WorkspaceCard | null> {\n-    const selector = `.//*[@data-test-id=\"workspace-card-name\" and text()=\"${workspaceName}\"]`;\n+    const selector = `.//*[@data-test-id=\"workspace-card-name\" and normalize-space(text())=\"${workspaceName}\"]`;\n     const allCards = await this.getAllCards(page);\n     for (const card of allCards) {\n-      const children = await card.asElementHandle().$x(selector);\n+      const handle = card.asElementHandle();\n+      const children = await handle.$x(selector);\n       if (children.length > 0) {\n         return card; // matched workspace name, found the Workspace card.\n       }\n-      await card.dispose(); // not it, dispose the ElementHandle.\n+      await handle.dispose(); // not it, dispose the ElementHandle.\n     }\n     return null; // not found\n   }\n \n \n-  constructor(page: Page) {\n-    super(page);\n+  constructor(private readonly page: Page) {\n+\n+  }\n+\n+  async findCard(workspaceName: string): Promise<WorkspaceCard | null> {\n+    const selector = `.//*[@data-test-id=\"workspace-card-name\" and normalize-space(text())=\"${workspaceName}\"]`;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzkxMDMyNQ=="}, "originalCommit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzkzNDYzNA==", "bodyText": "typo. ui text string does not contain on word.", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413934634", "createdAt": "2020-04-23T16:16:12Z", "author": {"login": "aweng98"}, "path": "e2e/app/page/workspace-edit-page.ts", "diffHunk": "@@ -223,7 +223,7 @@ export const FIELD = {\n       type: 'radiobutton',\n       textOption: {textContains: LABEL_ALIAS.YES_FOCUS_ON_UNDERREPRESENTED_POPULATION}\n     },\n-    noOnUnderrepresentedPopulationRadiobutton: {\n+    noUnderrepresentedPopulationRadiobutton: {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg5ODU2OQ=="}, "originalCommit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzkzODY2MQ==", "bodyText": "yes, correct.  It's non-asynchronous method.", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413938661", "createdAt": "2020-04-23T16:21:31Z", "author": {"login": "aweng98"}, "path": "e2e/tests/home/home-page.spec.ts", "diffHunk": "@@ -39,7 +39,7 @@ describe('Home page ui tests', () => {\n       expect(cardName).toMatch(new RegExp(/^[a-zA-Z]+/));\n \n       // check Workspace Action menu for listed actions\n-      const ellipsis = await card.getEllipsis();\n+      const ellipsis = card.getEllipsis();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg5OTM4OQ=="}, "originalCommit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk0NjY2MA==", "bodyText": "dispose(): change the object to unusable explicitly instead implicitly relying on Puppeteer tool to do the same job.", "url": "https://github.com/all-of-us/workbench/pull/3432#discussion_r413946660", "createdAt": "2020-04-23T16:31:50Z", "author": {"login": "aweng98"}, "path": "e2e/tests/user/registration-ui.spec.ts", "diffHunk": "@@ -72,6 +72,7 @@ describe('User registration tests:', () => {\n     await (await createAccountPage.getTermsOfUseCheckbox()).check();\n     const agreementPageButton = await createAccountPage.getNextButton();\n     await agreementPageButton.clickWithEval();\n+    await agreementPageButton.dispose();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg5OTcwMA=="}, "originalCommit": {"oid": "f3e5711cc6fe4412229a88c6f3750de5dad997cf"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MzA3MDE2", "url": "https://github.com/all-of-us/workbench/pull/3432#pullrequestreview-399307016", "createdAt": "2020-04-23T17:10:41Z", "commit": {"oid": "975c018a897ee01258d423e72b1f887d4c511b9c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3204, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}