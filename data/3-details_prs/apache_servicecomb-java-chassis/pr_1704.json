{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxMzE1ODY1", "number": 1704, "title": "[SCB-1863] toke the revision when pull from kie", "bodyText": "Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Make sure there is a JIRA issue filed for the change (usually before you start working on it).  Trivial changes like typos do not require a JIRA issue.  Your pull request should address just this issue, without pulling in other changes.\n Each commit in the pull request should have a meaningful subject line and body.\n Format the pull request title like [SCB-XXX] Fixes bug in ApproximateQuantiles, where you replace SCB-XXX with the appropriate JIRA issue.\n Write a pull request description that is detailed enough to understand what the pull request does, how, and why.\n Run mvn clean install -Pit to make sure basic checks pass. A more thorough check will be performed on your pull request automatically.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.", "createdAt": "2020-04-09T09:33:37Z", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1704", "merged": true, "mergeCommit": {"oid": "7e68121d40f49a6d32ee3ca2c8ec4814201b4fe7"}, "closed": true, "closedAt": "2020-05-08T00:47:35Z", "author": {"login": "GuoYL123"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXE9h3ABqjMyMjU2OTEyNTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcanZ4mgFqTM5OTU4NjMwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c5a4932c1f8127d609ea7f807731b6ba40f9d8f1", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/c5a4932c1f8127d609ea7f807731b6ba40f9d8f1", "committedDate": "2020-04-09T09:30:14Z", "message": "[SCB-1861] toke the revision when pull from kie/ timeout too short"}, "afterCommit": {"oid": "20aafe3efaa9b84ced6127ccb2f5599be7cd3bf1", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/20aafe3efaa9b84ced6127ccb2f5599be7cd3bf1", "committedDate": "2020-04-13T01:51:20Z", "message": "[SCB-1861] toke the revision when pull from kie"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f755f5120668129b9d3ed77f3bb4cfc78af5a0d", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/5f755f5120668129b9d3ed77f3bb4cfc78af5a0d", "committedDate": "2020-04-22T01:26:25Z", "message": "[SCB-1861] toke the revision when pull from kie"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "20aafe3efaa9b84ced6127ccb2f5599be7cd3bf1", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/20aafe3efaa9b84ced6127ccb2f5599be7cd3bf1", "committedDate": "2020-04-13T01:51:20Z", "message": "[SCB-1861] toke the revision when pull from kie"}, "afterCommit": {"oid": "5f755f5120668129b9d3ed77f3bb4cfc78af5a0d", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/5f755f5120668129b9d3ed77f3bb4cfc78af5a0d", "committedDate": "2020-04-22T01:26:25Z", "message": "[SCB-1861] toke the revision when pull from kie"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5NTgyNTUy", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1704#pullrequestreview-399582552", "createdAt": "2020-04-24T01:29:13Z", "commit": {"oid": "5f755f5120668129b9d3ed77f3bb4cfc78af5a0d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwMToyOToxM1rOGLCk9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwMToyOToxM1rOGLCk9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDIyOTc1MA==", "bodyText": "revision is a static member, it is not good.", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1704#discussion_r414229750", "createdAt": "2020-04-24T01:29:13Z", "author": {"login": "liubao68"}, "path": "dynamic-config/config-kie/src/main/java/org/apache/servicecomb/config/kie/client/KieClient.java", "diffHunk": "@@ -115,8 +117,8 @@ void refreshConfig(CountDownLatch latch) {\n       String path = \"/v1/\"\n           + KieConfig.INSTANCE.getDomainName()\n           + \"/kie/kv?label=app:\"\n-          + KieConfig.INSTANCE.getAppName();\n-\n+          + KieConfig.INSTANCE.getAppName()\n+          + \"&revision=\" + revision;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f755f5120668129b9d3ed77f3bb4cfc78af5a0d"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5NTg2MzA5", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1704#pullrequestreview-399586309", "createdAt": "2020-04-24T01:42:40Z", "commit": {"oid": "5f755f5120668129b9d3ed77f3bb4cfc78af5a0d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwMTo0Mjo0MVrOGLCz8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwMTo0Mjo0MVrOGLCz8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDIzMzU4Nw==", "bodyText": "IS_FIRST_PULL  revision  is better to use instance property, not static. When KieClient has only one instance, instance property is better. When KieClient has many instances(not possible), static is not good eitheir.", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1704#discussion_r414233587", "createdAt": "2020-04-24T01:42:41Z", "author": {"login": "liubao68"}, "path": "dynamic-config/config-kie/src/main/java/org/apache/servicecomb/config/kie/client/KieClient.java", "diffHunk": "@@ -57,6 +57,8 @@\n \n   private static final int LONG_POLLING_WAIT_TIME_IN_SECONDS = 30;\n \n+  private static String revision = \"0\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f755f5120668129b9d3ed77f3bb4cfc78af5a0d"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4516, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}