{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNTQ2NDk3", "number": 1865, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNzowMTo0OFrOEK_FEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNzowNjoxMVrOEK_KKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5OTU0NzA3OnYy", "diffSide": "RIGHT", "path": "providers/provider-pojo/src/main/java/org/apache/servicecomb/provider/pojo/definition/PojoConsumerMeta.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNzowMTo0OFrOGsWKdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNzowMTo0OFrOGsWKdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE1MzY1NA==", "bodyText": "Method to be key of HashMap is too expensive\nshould change HashMap to IdentityHashMap", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1865#discussion_r449153654", "createdAt": "2020-07-02T17:01:48Z", "author": {"login": "wujimin"}, "path": "providers/provider-pojo/src/main/java/org/apache/servicecomb/provider/pojo/definition/PojoConsumerMeta.java", "diffHunk": "@@ -33,7 +34,7 @@\n \n   private SchemaMeta schemaMeta;\n \n-  private Map<String, PojoConsumerOperationMeta> operationMetas = new HashMap<>();\n+  private Map<Method, PojoConsumerOperationMeta> operationMetas = new HashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b206430be2269b223006a7309c64b2da5f6b4c4"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5OTU1MTE3OnYy", "diffSide": "RIGHT", "path": "swagger/swagger-invocation/invocation-core/src/main/java/org/apache/servicecomb/swagger/engine/SwaggerConsumer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNzowMzoxNVrOGsWNKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNzowMzoxNVrOGsWNKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE1NDM0Ng==", "bodyText": "IdentityHashMap", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1865#discussion_r449154346", "createdAt": "2020-07-02T17:03:15Z", "author": {"login": "wujimin"}, "path": "swagger/swagger-invocation/invocation-core/src/main/java/org/apache/servicecomb/swagger/engine/SwaggerConsumer.java", "diffHunk": "@@ -16,14 +16,15 @@\n  */\n package org.apache.servicecomb.swagger.engine;\n \n+import java.lang.reflect.Method;\n import java.util.HashMap;\n import java.util.Map;\n \n public class SwaggerConsumer {\n   private Class<?> consumerIntf;\n \n   // key is consumer method name\n-  private Map<String, SwaggerConsumerOperation> operations = new HashMap<>();\n+  private Map<Method, SwaggerConsumerOperation> operations = new HashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b206430be2269b223006a7309c64b2da5f6b4c4"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5OTU2MDExOnYy", "diffSide": "RIGHT", "path": "swagger/swagger-invocation/invocation-core/src/main/java/org/apache/servicecomb/swagger/engine/SwaggerConsumer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNzowNjoxMVrOGsWTIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxMTowMDo1M1rOGtStBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE1NTg3Mw==", "bodyText": "can still keep findOperation(String consumerMethodName), and mark as VisiableForTest\nthis makes test easier", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1865#discussion_r449155873", "createdAt": "2020-07-02T17:06:11Z", "author": {"login": "wujimin"}, "path": "swagger/swagger-invocation/invocation-core/src/main/java/org/apache/servicecomb/swagger/engine/SwaggerConsumer.java", "diffHunk": "@@ -34,14 +35,14 @@ public void setConsumerIntf(Class<?> consumerIntf) {\n   }\n \n   public void addOperation(SwaggerConsumerOperation op) {\n-    operations.put(op.getSchemaOperationId(), op);\n+    operations.put(op.getConsumerMethod(), op);\n   }\n \n-  public SwaggerConsumerOperation findOperation(String consumerMethodName) {\n-    return operations.get(consumerMethodName);\n+  public SwaggerConsumerOperation findOperation(Method consumerMethod) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b206430be2269b223006a7309c64b2da5f6b4c4"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE0NTU0MQ==", "bodyText": "Done. Please review it.", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1865#discussion_r450145541", "createdAt": "2020-07-06T11:00:53Z", "author": {"login": "yhs0092"}, "path": "swagger/swagger-invocation/invocation-core/src/main/java/org/apache/servicecomb/swagger/engine/SwaggerConsumer.java", "diffHunk": "@@ -34,14 +35,14 @@ public void setConsumerIntf(Class<?> consumerIntf) {\n   }\n \n   public void addOperation(SwaggerConsumerOperation op) {\n-    operations.put(op.getSchemaOperationId(), op);\n+    operations.put(op.getConsumerMethod(), op);\n   }\n \n-  public SwaggerConsumerOperation findOperation(String consumerMethodName) {\n-    return operations.get(consumerMethodName);\n+  public SwaggerConsumerOperation findOperation(Method consumerMethod) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE1NTg3Mw=="}, "originalCommit": {"oid": "5b206430be2269b223006a7309c64b2da5f6b4c4"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1287, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}