{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1NDM1NTU5", "number": 1800, "title": "[SCB-1961] add rest server codec filter", "bodyText": "", "createdAt": "2020-05-30T08:36:15Z", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1800", "merged": true, "mergeCommit": {"oid": "5507eec39888b5eedf0f4452dcdb6574787a7db8"}, "closed": true, "closedAt": "2020-05-30T13:02:29Z", "author": {"login": "wujimin"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcmTbY5gFqTQyMTM5MTQ3NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmTnoGgBqjMzODk1NjkwNzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzkxNDc1", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1800#pullrequestreview-421391475", "createdAt": "2020-05-30T09:13:19Z", "commit": {"oid": "c993403303c36de476bc30112b489e387e335699"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwOToxMzoxOVrOGcxktQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwOToxMzoxOVrOGcxktQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgyNTUyNQ==", "bodyText": "encodeHeader name is not good. It's do not do any encoding.", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1800#discussion_r432825525", "createdAt": "2020-05-30T09:13:19Z", "author": {"login": "liubao68"}, "path": "common/common-rest/src/main/java/org/apache/servicecomb/common/rest/AbstractRestInvocation.java", "diffHunk": "@@ -268,16 +268,8 @@ protected void sendResponseQuietly(Response response) {\n \n   @SuppressWarnings(\"deprecation\")\n   protected void sendResponse(Response response) {\n-    if (response.getHeaders().getHeaderMap() != null) {\n-      for (Entry<String, List<Object>> entry : response.getHeaders().getHeaderMap().entrySet()) {\n-        for (Object value : entry.getValue()) {\n-          if (!entry.getKey().equalsIgnoreCase(HttpHeaders.CONTENT_LENGTH)\n-              && !entry.getKey().equalsIgnoreCase(\"Transfer-Encoding\")) {\n-            responseEx.addHeader(entry.getKey(), String.valueOf(value));\n-          }\n-        }\n-      }\n-    }\n+    RestServerCodecFilter.encodeHeader(response.getHeaders().getHeaderMap(), responseEx);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c993403303c36de476bc30112b489e387e335699"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzkxNTg5", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1800#pullrequestreview-421391589", "createdAt": "2020-05-30T09:15:59Z", "commit": {"oid": "c993403303c36de476bc30112b489e387e335699"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3491e35f6e24d90e33db9c7ef22205658ac3351", "author": {"user": {"login": "wujimin", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/c3491e35f6e24d90e33db9c7ef22205658ac3351", "committedDate": "2020-05-30T09:26:28Z", "message": "[SCB-1961] add rest server codec filter"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c993403303c36de476bc30112b489e387e335699", "author": {"user": {"login": "wujimin", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/c993403303c36de476bc30112b489e387e335699", "committedDate": "2020-05-30T08:20:13Z", "message": "[SCB-1961] add rest server codec filter"}, "afterCommit": {"oid": "c3491e35f6e24d90e33db9c7ef22205658ac3351", "author": {"user": {"login": "wujimin", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/c3491e35f6e24d90e33db9c7ef22205658ac3351", "committedDate": "2020-05-30T09:26:28Z", "message": "[SCB-1961] add rest server codec filter"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4430, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}