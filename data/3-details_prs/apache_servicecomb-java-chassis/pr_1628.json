{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2NjQzMzA3", "number": 1628, "title": "[SCB-1796] support client outlog", "bodyText": "Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Make sure there is a JIRA issue filed for the change (usually before you start working on it).  Trivial changes like typos do not require a JIRA issue.  Your pull request should address just this issue, without pulling in other changes.\n Each commit in the pull request should have a meaningful subject line and body.\n Format the pull request title like [SCB-XXX] Fixes bug in ApproximateQuantiles, where you replace SCB-XXX with the appropriate JIRA issue.\n Write a pull request description that is detailed enough to understand what the pull request does, how, and why.\n Run mvn clean install -Pit to make sure basic checks pass. A more thorough check will be performed on your pull request automatically.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.", "createdAt": "2020-03-11T11:49:54Z", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1628", "merged": true, "mergeCommit": {"oid": "034b7cc95ab95f2b4b9d136fc786d4b1f59ebb34"}, "closed": true, "closedAt": "2020-03-20T07:55:49Z", "author": {"login": "heyile"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMmrD6ABqjMxMTg2NzYyOTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPWf4kgBqjMxNDc4MTY2MDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "95df93adce2c5ee232082c9bfca06f42c008e457", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/95df93adce2c5ee232082c9bfca06f42c008e457", "committedDate": "2020-03-11T11:48:00Z", "message": "[SCB-1796] support client outlog: add client transport info"}, "afterCommit": {"oid": "00b989b476eb98df7f30229c299620bc7006ad29", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/00b989b476eb98df7f30229c299620bc7006ad29", "committedDate": "2020-03-11T12:56:11Z", "message": "[SCB-1796] support client outlog: add client transport info"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "00b989b476eb98df7f30229c299620bc7006ad29", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/00b989b476eb98df7f30229c299620bc7006ad29", "committedDate": "2020-03-11T12:56:11Z", "message": "[SCB-1796] support client outlog: add client transport info"}, "afterCommit": {"oid": "c1ded79b5f7666b0dc902727817a0f5a11a7dcdd", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/c1ded79b5f7666b0dc902727817a0f5a11a7dcdd", "committedDate": "2020-03-11T14:33:58Z", "message": "[SCB-1796] support client outlog: add client transport info"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c1ded79b5f7666b0dc902727817a0f5a11a7dcdd", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/c1ded79b5f7666b0dc902727817a0f5a11a7dcdd", "committedDate": "2020-03-11T14:33:58Z", "message": "[SCB-1796] support client outlog: add client transport info"}, "afterCommit": {"oid": "390a9b61f613a7dda8399ad263103af0e6e78315", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/390a9b61f613a7dda8399ad263103af0e6e78315", "committedDate": "2020-03-16T11:41:48Z", "message": "[SCB-1796] support client outlog: add client transport info"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "390a9b61f613a7dda8399ad263103af0e6e78315", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/390a9b61f613a7dda8399ad263103af0e6e78315", "committedDate": "2020-03-16T11:41:48Z", "message": "[SCB-1796] support client outlog: add client transport info"}, "afterCommit": {"oid": "f3459f5f9ce216ecaa4d2e89b94152c828ba4bc6", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/f3459f5f9ce216ecaa4d2e89b94152c828ba4bc6", "committedDate": "2020-03-17T13:50:09Z", "message": "[SCB-1793] use @RequestHeader(value =\"xxx\") : add ut"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f3459f5f9ce216ecaa4d2e89b94152c828ba4bc6", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/f3459f5f9ce216ecaa4d2e89b94152c828ba4bc6", "committedDate": "2020-03-17T13:50:09Z", "message": "[SCB-1793] use @RequestHeader(value =\"xxx\") : add ut"}, "afterCommit": {"oid": "62b72298c23a81bb70d6ffb3f49e5da34182814f", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/62b72298c23a81bb70d6ffb3f49e5da34182814f", "committedDate": "2020-03-17T13:54:18Z", "message": "[SCB-1796]  add ut"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NTE4NTAy", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1628#pullrequestreview-376518502", "createdAt": "2020-03-18T02:05:58Z", "commit": {"oid": "62b72298c23a81bb70d6ffb3f49e5da34182814f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMjowNTo1OFrOF3z_fA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMjowNTo1OFrOF3z_fA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA2NzgzNg==", "bodyText": "It's better to create a module common-access-log in common folder. Because the dependency is core <- common <- foundation. Foundation can not dependent on common.", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1628#discussion_r394067836", "createdAt": "2020-03-18T02:05:58Z", "author": {"login": "liubao68"}, "path": "foundations/foundation-log/pom.xml", "diffHunk": "@@ -0,0 +1,41 @@\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~     http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>foundations</artifactId>\n+    <groupId>org.apache.servicecomb</groupId>\n+    <version>2.0.1-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <artifactId>foundation-log</artifactId>\n+  <name>Java Chassis::Foundations::Log</name>\n+\n+  <dependencies>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62b72298c23a81bb70d6ffb3f49e5da34182814f"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NTE5NDQ4", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1628#pullrequestreview-376519448", "createdAt": "2020-03-18T02:09:30Z", "commit": {"oid": "62b72298c23a81bb70d6ffb3f49e5da34182814f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMjowOTozMFrOF30Ctw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMjowOTozMFrOF30Ctw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA2ODY2Mw==", "bodyText": "servervicomb.request.log  or servicecomb.accesslog.request is better, see 'https://sling.apache.org/documentation/development/client-request-logging.html' for reference.", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1628#discussion_r394068663", "createdAt": "2020-03-18T02:09:30Z", "author": {"login": "liubao68"}, "path": "foundations/foundation-log/src/main/java/org/apache/servicecomb/foundation/log/LogConfig.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.servicecomb.foundation.log;\n+\n+import com.netflix.config.DynamicPropertyFactory;\n+\n+public class LogConfig {\n+\n+    private static final String SERVER_BASE = \"servicecomb.accesslog.\";\n+\n+    private static final String CLIENT_BASE = \"servicecomb.outlog.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62b72298c23a81bb70d6ffb3f49e5da34182814f"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NTIwMTY5", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1628#pullrequestreview-376520169", "createdAt": "2020-03-18T02:11:59Z", "commit": {"oid": "62b72298c23a81bb70d6ffb3f49e5da34182814f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMjoxMjowMFrOF30FDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMjoxMjowMFrOF30FDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA2OTI2Mw==", "bodyText": "Server access log and request log can both called AccessLog. Log is a general name may be confusing with any application trace. I'd prefer using AccessLogItem. And 'servicecomb.assesslog.request` as the configuration.", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1628#discussion_r394069263", "createdAt": "2020-03-18T02:12:00Z", "author": {"login": "liubao68"}, "path": "foundations/foundation-log/src/main/java/org/apache/servicecomb/foundation/log/core/element/LogItem.java", "diffHunk": "@@ -15,17 +15,22 @@\n  * limitations under the License.\n  */\n \n-package org.apache.servicecomb.transport.rest.vertx.accesslog.element;\n+package org.apache.servicecomb.foundation.log.core.element;\n \n-import org.apache.servicecomb.transport.rest.vertx.accesslog.AccessLogParam;\n+import org.apache.servicecomb.core.event.InvocationFinishEvent;\n+import org.apache.servicecomb.core.event.ServerAccessLogEvent;\n \n /*\n  * Access log item represents the items supported in access log printing.\n  * It generate the segment of access log according to {@link AccessLogParam}\n  */\n-public interface AccessLogItem<T> {\n+public interface LogItem<T> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62b72298c23a81bb70d6ffb3f49e5da34182814f"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "62b72298c23a81bb70d6ffb3f49e5da34182814f", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/62b72298c23a81bb70d6ffb3f49e5da34182814f", "committedDate": "2020-03-17T13:54:18Z", "message": "[SCB-1796]  add ut"}, "afterCommit": {"oid": "258191bdd003a5b5596cdc9fdafc0ff3fb70c367", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/258191bdd003a5b5596cdc9fdafc0ff3fb70c367", "committedDate": "2020-03-19T13:48:57Z", "message": "[SCB-1796] support request log : modify as review and support log4j"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "258191bdd003a5b5596cdc9fdafc0ff3fb70c367", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/258191bdd003a5b5596cdc9fdafc0ff3fb70c367", "committedDate": "2020-03-19T13:48:57Z", "message": "[SCB-1796] support request log : modify as review and support log4j"}, "afterCommit": {"oid": "d0d5907e912e9013bd047dce78d860e1444d9038", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/d0d5907e912e9013bd047dce78d860e1444d9038", "committedDate": "2020-03-19T13:55:59Z", "message": "[SCB-1796] support request log : modify as review and support log4j"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0d5907e912e9013bd047dce78d860e1444d9038", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/d0d5907e912e9013bd047dce78d860e1444d9038", "committedDate": "2020-03-19T13:55:59Z", "message": "[SCB-1796] support request log : modify as review and support log4j"}, "afterCommit": {"oid": "c7209da0626f1a2512ad778d13457ddab201e87f", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/c7209da0626f1a2512ad778d13457ddab201e87f", "committedDate": "2020-03-19T14:17:09Z", "message": "[SCB-1796] support request log : modify as review and support log4j"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a27b5e6e977099d119a5ffd275072af1197f222", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/4a27b5e6e977099d119a5ffd275072af1197f222", "committedDate": "2020-03-20T01:29:03Z", "message": "[SCB-1796] support client outlog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64bc8abeb2d9221fc144bade8e2200c187ee4713", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/64bc8abeb2d9221fc144bade8e2200c187ee4713", "committedDate": "2020-03-20T01:29:03Z", "message": "[SCB-1796] support client outlog: add client transport info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d274ed856c1b675ec383d7e2305ff2571df81708", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/d274ed856c1b675ec383d7e2305ff2571df81708", "committedDate": "2020-03-20T01:29:03Z", "message": "[SCB-1796]  add ut"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c7209da0626f1a2512ad778d13457ddab201e87f", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/c7209da0626f1a2512ad778d13457ddab201e87f", "committedDate": "2020-03-19T14:17:09Z", "message": "[SCB-1796] support request log : modify as review and support log4j"}, "afterCommit": {"oid": "4c696f4425ff68912b3171eb5c05db16e75a1123", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/4c696f4425ff68912b3171eb5c05db16e75a1123", "committedDate": "2020-03-20T01:29:04Z", "message": "[SCB-1796] support request log : modify as review and support log4j"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0eb2cef1f65002835ec099ba0ee1403f14dee235", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/0eb2cef1f65002835ec099ba0ee1403f14dee235", "committedDate": "2020-03-20T01:47:28Z", "message": "[SCB-1796] support request log : modify as review and support log4j"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4c696f4425ff68912b3171eb5c05db16e75a1123", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/4c696f4425ff68912b3171eb5c05db16e75a1123", "committedDate": "2020-03-20T01:29:04Z", "message": "[SCB-1796] support request log : modify as review and support log4j"}, "afterCommit": {"oid": "0eb2cef1f65002835ec099ba0ee1403f14dee235", "author": {"user": {"login": "heyile", "name": null}}, "url": "https://github.com/apache/servicecomb-java-chassis/commit/0eb2cef1f65002835ec099ba0ee1403f14dee235", "committedDate": "2020-03-20T01:47:28Z", "message": "[SCB-1796] support request log : modify as review and support log4j"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4482, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}