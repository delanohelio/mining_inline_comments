{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1NDM1NTU5", "number": 1800, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwOToxMzoxOVrOEBGKgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwOToxMzoxOVrOEBGKgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NTg1MDI1OnYy", "diffSide": "RIGHT", "path": "common/common-rest/src/main/java/org/apache/servicecomb/common/rest/AbstractRestInvocation.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwOToxMzoxOVrOGcxktQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxMToxMzoxNlrOGcyBdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgyNTUyNQ==", "bodyText": "encodeHeader name is not good. It's do not do any encoding.", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1800#discussion_r432825525", "createdAt": "2020-05-30T09:13:19Z", "author": {"login": "liubao68"}, "path": "common/common-rest/src/main/java/org/apache/servicecomb/common/rest/AbstractRestInvocation.java", "diffHunk": "@@ -268,16 +268,8 @@ protected void sendResponseQuietly(Response response) {\n \n   @SuppressWarnings(\"deprecation\")\n   protected void sendResponse(Response response) {\n-    if (response.getHeaders().getHeaderMap() != null) {\n-      for (Entry<String, List<Object>> entry : response.getHeaders().getHeaderMap().entrySet()) {\n-        for (Object value : entry.getValue()) {\n-          if (!entry.getKey().equalsIgnoreCase(HttpHeaders.CONTENT_LENGTH)\n-              && !entry.getKey().equalsIgnoreCase(\"Transfer-Encoding\")) {\n-            responseEx.addHeader(entry.getKey(), String.valueOf(value));\n-          }\n-        }\n-      }\n-    }\n+    RestServerCodecFilter.encodeHeader(response.getHeaders().getHeaderMap(), responseEx);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c993403303c36de476bc30112b489e387e335699"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgzMjg4NQ==", "bodyText": "done", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1800#discussion_r432832885", "createdAt": "2020-05-30T11:13:16Z", "author": {"login": "wujimin"}, "path": "common/common-rest/src/main/java/org/apache/servicecomb/common/rest/AbstractRestInvocation.java", "diffHunk": "@@ -268,16 +268,8 @@ protected void sendResponseQuietly(Response response) {\n \n   @SuppressWarnings(\"deprecation\")\n   protected void sendResponse(Response response) {\n-    if (response.getHeaders().getHeaderMap() != null) {\n-      for (Entry<String, List<Object>> entry : response.getHeaders().getHeaderMap().entrySet()) {\n-        for (Object value : entry.getValue()) {\n-          if (!entry.getKey().equalsIgnoreCase(HttpHeaders.CONTENT_LENGTH)\n-              && !entry.getKey().equalsIgnoreCase(\"Transfer-Encoding\")) {\n-            responseEx.addHeader(entry.getKey(), String.valueOf(value));\n-          }\n-        }\n-      }\n-    }\n+    RestServerCodecFilter.encodeHeader(response.getHeaders().getHeaderMap(), responseEx);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgyNTUyNQ=="}, "originalCommit": {"oid": "c993403303c36de476bc30112b489e387e335699"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1269, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}