{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxMDc2MDk1", "number": 3042, "title": "Don't try to infer type argument for a method invocation returned by a lambda (Fixes #3036)", "bodyText": "These require Java 8 type argument inference, #979.\nFixes #3036.", "createdAt": "2020-01-09T17:32:00Z", "url": "https://github.com/typetools/checker-framework/pull/3042", "merged": true, "mergeCommit": {"oid": "46dd528147840ccffdf9d750a120e334a0796d53"}, "closed": true, "closedAt": "2020-01-14T19:35:02Z", "author": {"login": "smillst"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4tWlWgH2gAyMzYxMDc2MDk1OmRmNTkxN2Y4MzU0Y2U5YjI0ZmY0NjlhZDgwZWY3YjAzNTg1MjMyY2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6VES1AH2gAyMzYxMDc2MDk1OmNkN2M5YjNjMzgyMGFiMjJiMmUwZGNhNWEzMmVhNGY1NzAxMTI1NTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "df5917f8354ce9b24ff469ad80ef7b03585232cb", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/df5917f8354ce9b24ff469ad80ef7b03585232cb", "committedDate": "2020-01-09T17:25:05Z", "message": "Suppress lambda warning."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be664be42c61bc6088efe794c148ce2eeea9f32b", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/be664be42c61bc6088efe794c148ce2eeea9f32b", "committedDate": "2020-01-09T17:26:00Z", "message": "Fix comment."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e04e59c212794d8e03bdd77177181ce71f315bd", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/7e04e59c212794d8e03bdd77177181ce71f315bd", "committedDate": "2020-01-09T17:29:54Z", "message": "Different fix."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNDc0Njc4", "url": "https://github.com/typetools/checker-framework/pull/3042#pullrequestreview-341474678", "createdAt": "2020-01-10T23:33:48Z", "commit": {"oid": "7e04e59c212794d8e03bdd77177181ce71f315bd"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMzozMzo0OVrOFcilFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMzozNDoyN1rOFcilig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ3MDk5Ng==", "bodyText": "A comment about the first case would be good in the documentation below.", "url": "https://github.com/typetools/checker-framework/pull/3042#discussion_r365470996", "createdAt": "2020-01-10T23:33:49Z", "author": {"login": "wmdietl"}, "path": "framework/src/main/java/org/checkerframework/framework/util/typeinference/DefaultTypeArgumentInference.java", "diffHunk": "@@ -135,7 +136,12 @@ public DefaultTypeArgumentInference(AnnotatedTypeFactory typeFactory) {\n \n         final Set<TypeVariable> targets = TypeArgInferenceUtil.methodTypeToTargets(methodType);\n \n-        if (assignedTo == null && TreeUtils.getAssignmentContext(pathToExpression) != null) {\n+        if ((pathToExpression.getParentPath() != null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e04e59c212794d8e03bdd77177181ce71f315bd"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ3MTExNA==", "bodyText": "I'm wondering whether using TreeUtils.enclosingMethodOrLambda and then checking for LAMBDA_EXPRESSION would be a bit shorter.", "url": "https://github.com/typetools/checker-framework/pull/3042#discussion_r365471114", "createdAt": "2020-01-10T23:34:27Z", "author": {"login": "wmdietl"}, "path": "framework/src/main/java/org/checkerframework/framework/util/typeinference/DefaultTypeArgumentInference.java", "diffHunk": "@@ -135,7 +136,12 @@ public DefaultTypeArgumentInference(AnnotatedTypeFactory typeFactory) {\n \n         final Set<TypeVariable> targets = TypeArgInferenceUtil.methodTypeToTargets(methodType);\n \n-        if (assignedTo == null && TreeUtils.getAssignmentContext(pathToExpression) != null) {\n+        if ((pathToExpression.getParentPath() != null\n+                        && pathToExpression.getParentPath().getLeaf() != null\n+                        && pathToExpression.getParentPath().getLeaf().getKind()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e04e59c212794d8e03bdd77177181ce71f315bd"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee9fae77643a9fbe7fd2c152e0fdf6539aaeb18d", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/ee9fae77643a9fbe7fd2c152e0fdf6539aaeb18d", "committedDate": "2020-01-10T23:49:36Z", "message": "Add comment."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNDc5MjY0", "url": "https://github.com/typetools/checker-framework/pull/3042#pullrequestreview-341479264", "createdAt": "2020-01-10T23:54:37Z", "commit": {"oid": "ee9fae77643a9fbe7fd2c152e0fdf6539aaeb18d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a180476b3508913f606b4e94ba54359c7dd77679", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/a180476b3508913f606b4e94ba54359c7dd77679", "committedDate": "2020-01-14T18:11:43Z", "message": "Merge branch 'master' into issue3036"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd7c9b3c3820ab22b2e0dca5a32ea4f570112555", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/cd7c9b3c3820ab22b2e0dca5a32ea4f570112555", "committedDate": "2020-01-14T18:15:14Z", "message": "Use util method."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3036, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}