{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0NjM1Nzcz", "number": 3337, "title": "Aliasing: test constructor declarations", "bodyText": "The Aliasing checker gives a \"unique.leaked\" error when the super() class of a @unique annotated class is @MaybeAliased. This is useful for subclasses whose unique objects can leak into parent class methods. Classes that don't inherit from other classes, inherit from Object class as default which is @MaybeAliased according to the Aliasing Checker, hence, their constructors give a redundant \"unique.leaked\" error. The solution is to annotate the Object class as @unique in the annotated JDK (https://github.com/typetools/jdk). This would prevent @unique parent classes to leak their objects in the super() function.\nThis PR should be merged along with the annotated JDK pull request.\n(typetools/jdk#52)", "createdAt": "2020-05-28T17:41:12Z", "url": "https://github.com/typetools/checker-framework/pull/3337", "merged": true, "mergeCommit": {"oid": "eb6c470de1c45e500167c33ebeed66727d3f14d9"}, "closed": true, "closedAt": "2020-07-01T14:56:30Z", "author": {"login": "aditya3434"}, "timelineItems": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcln5LhAH2gAyNDI0NjM1NzczOmZkNTM2YzRkZTc1NWRjMWM1M2FkYmNhOWFkMmI2ODRlOWIzOWEwNTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwYVqnAFqTQ0MDE5NDg2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fd536c4de755dc1c53adbca9ad2b684e9b39a055", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/fd536c4de755dc1c53adbca9ad2b684e9b39a055", "committedDate": "2020-05-28T06:30:02Z", "message": "Fix for feature request #3313 in Aliasing Checker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60354d3223c28321300e69e286014808322c7229", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/60354d3223c28321300e69e286014808322c7229", "committedDate": "2020-05-28T06:47:37Z", "message": "FIx for leak in constructor in Aliasing Checker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7794ac9d44dc5a829da591a2598f4739b301981d", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/7794ac9d44dc5a829da591a2598f4739b301981d", "committedDate": "2020-05-28T16:23:41Z", "message": "Fix for unique.leaked warning on constructors (Feature request #3313) using .astub files, with test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "579d38555ffc4880dba9c18d537b255b1bb23306", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/579d38555ffc4880dba9c18d537b255b1bb23306", "committedDate": "2020-05-28T18:30:40Z", "message": "Adding new line at end of file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNzQ4MzU2", "url": "https://github.com/typetools/checker-framework/pull/3337#pullrequestreview-423748356", "createdAt": "2020-06-03T16:51:27Z", "commit": {"oid": "579d38555ffc4880dba9c18d537b255b1bb23306"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNjo1MToyN1rOGek1gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNjo1MToyN1rOGek1gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcxMzk4NQ==", "bodyText": "Why is this annotation being added in a jdk.astub file rather than in the annotated JDK, https://github.com/typetools/jdk?", "url": "https://github.com/typetools/checker-framework/pull/3337#discussion_r434713985", "createdAt": "2020-06-03T16:51:27Z", "author": {"login": "mernst"}, "path": "framework/src/main/java/org/checkerframework/common/aliasing/jdk.astub", "diffHunk": "@@ -0,0 +1,7 @@\n+import org.checkerframework.common.aliasing.qual.*;\n+\n+package java.lang;\n+\n+class Object {\n+    @Unique Object();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "579d38555ffc4880dba9c18d537b255b1bb23306"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b2cd51eb983c99b6e8ab2521544e95608150497", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/8b2cd51eb983c99b6e8ab2521544e95608150497", "committedDate": "2020-06-03T16:53:57Z", "message": "Merge ../checker-framework-branch-master into 3313-leak-in-constructor-error-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22462e0c3106a97353ababcbcb9c547d061f9809", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/22462e0c3106a97353ababcbcb9c547d061f9809", "committedDate": "2020-06-05T10:48:41Z", "message": "Fix for feature request #3313 in Aliasing Checker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "017082b1f6ac5598dfe80fad535acccebde22901", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/017082b1f6ac5598dfe80fad535acccebde22901", "committedDate": "2020-06-05T10:48:41Z", "message": "Revert \"Fix for feature request #3313 in Aliasing Checker\"\n\nThis reverts commit fd536c4de755dc1c53adbca9ad2b684e9b39a055."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NjczNjk4", "url": "https://github.com/typetools/checker-framework/pull/3337#pullrequestreview-425673698", "createdAt": "2020-06-05T23:07:43Z", "commit": {"oid": "8b2cd51eb983c99b6e8ab2521544e95608150497"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQyMzowNzo0M1rOGf_nBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQyMzowODo1M1rOGf_n5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjIwMTIyMA==", "bodyText": "How about adding a top-level class around these two classes that has the same name as the file?", "url": "https://github.com/typetools/checker-framework/pull/3337#discussion_r436201220", "createdAt": "2020-06-05T23:07:43Z", "author": {"login": "wmdietl"}, "path": "framework/tests/aliasing/UniqueConstructorTest.java", "diffHunk": "@@ -0,0 +1,16 @@\n+import org.checkerframework.common.aliasing.qual.Unique;\n+\n+class ParentUniqueClass {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b2cd51eb983c99b6e8ab2521544e95608150497"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjIwMTQ0NQ==", "bodyText": "Can you add another subclass that does raise an error?", "url": "https://github.com/typetools/checker-framework/pull/3337#discussion_r436201445", "createdAt": "2020-06-05T23:08:53Z", "author": {"login": "wmdietl"}, "path": "framework/tests/aliasing/UniqueConstructorTest.java", "diffHunk": "@@ -0,0 +1,16 @@\n+import org.checkerframework.common.aliasing.qual.Unique;\n+\n+class ParentUniqueClass {\n+\n+    // No need for @SuppressWarnings()\n+    @Unique ParentUniqueClass() {\n+        // Doesn't raise unique.leaked error since it's a parent class (top of heirarchy)\n+    }\n+}\n+\n+class ChildUniqueClass extends ParentUniqueClass {\n+\n+    @Unique ChildUniqueClass() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b2cd51eb983c99b6e8ab2521544e95608150497"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e97e1a75d968ba21746cdcbfa46de854c61bf4be", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/e97e1a75d968ba21746cdcbfa46de854c61bf4be", "committedDate": "2020-06-06T08:24:33Z", "message": "Modifying test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dd57dc8552f224f6f0f793bf09aa8774287563d", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/8dd57dc8552f224f6f0f793bf09aa8774287563d", "committedDate": "2020-06-06T08:34:17Z", "message": "Merge branch 'master' into 3313-leak-in-constructor-error-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf8e5aeca18ce97dad46fef86b74cc2e4643f377", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/cf8e5aeca18ce97dad46fef86b74cc2e4643f377", "committedDate": "2020-06-06T08:38:45Z", "message": "Modifying test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9186500184273bb508da6a5cc8558621a8754aa", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/d9186500184273bb508da6a5cc8558621a8754aa", "committedDate": "2020-06-08T14:02:16Z", "message": "Deleting jdk.astub file in Aliasing Checker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97ff12d4b6dbfbfcb62d7d52815f1c90ea6900b9", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/97ff12d4b6dbfbfcb62d7d52815f1c90ea6900b9", "committedDate": "2020-06-11T07:53:26Z", "message": "Fix for feature request #3313 in Aliasing Checker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "629a1a971c44ee9e2b268854f3767b91b28c2da0", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/629a1a971c44ee9e2b268854f3767b91b28c2da0", "committedDate": "2020-06-11T07:53:26Z", "message": "Revert \"Fix for feature request #3313 in Aliasing Checker\"\n\nThis reverts commit fd536c4de755dc1c53adbca9ad2b684e9b39a055."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwOTc5MTgx", "url": "https://github.com/typetools/checker-framework/pull/3337#pullrequestreview-430979181", "createdAt": "2020-06-15T20:43:56Z", "commit": {"oid": "d9186500184273bb508da6a5cc8558621a8754aa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQyMDo0Mzo1NlrOGkCD8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQyMDo0NTozMVrOGkCG3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQzNTY5Ng==", "bodyText": "We had discussed earlier having one top-level class. You reverted that and again have multiple top-level classes.", "url": "https://github.com/typetools/checker-framework/pull/3337#discussion_r440435696", "createdAt": "2020-06-15T20:43:56Z", "author": {"login": "wmdietl"}, "path": "framework/tests/aliasing/UniqueConstructorTest.java", "diffHunk": "@@ -0,0 +1,24 @@\n+import org.checkerframework.common.aliasing.qual.Unique;\n+\n+public class UniqueConstructorTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9186500184273bb508da6a5cc8558621a8754aa"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQzNTk4OQ==", "bodyText": "That comment should be combined with the one in the body, where you give the reason why no warning is required.", "url": "https://github.com/typetools/checker-framework/pull/3337#discussion_r440435989", "createdAt": "2020-06-15T20:44:32Z", "author": {"login": "wmdietl"}, "path": "framework/tests/aliasing/UniqueConstructorTest.java", "diffHunk": "@@ -0,0 +1,24 @@\n+import org.checkerframework.common.aliasing.qual.Unique;\n+\n+public class UniqueConstructorTest {\n+    // No need for @SuppressWarnings()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9186500184273bb508da6a5cc8558621a8754aa"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQzNjEyNg==", "bodyText": "What does top parent class mean?", "url": "https://github.com/typetools/checker-framework/pull/3337#discussion_r440436126", "createdAt": "2020-06-15T20:44:51Z", "author": {"login": "wmdietl"}, "path": "framework/tests/aliasing/UniqueConstructorTest.java", "diffHunk": "@@ -0,0 +1,24 @@\n+import org.checkerframework.common.aliasing.qual.Unique;\n+\n+public class UniqueConstructorTest {\n+    // No need for @SuppressWarnings()\n+    @Unique UniqueConstructorTest() {\n+        // Doesn't raise unique.leaked error since it's a top parent class (@Unique Object subclass", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9186500184273bb508da6a5cc8558621a8754aa"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQzNjQ0Nw==", "bodyText": "non-unique", "url": "https://github.com/typetools/checker-framework/pull/3337#discussion_r440436447", "createdAt": "2020-06-15T20:45:31Z", "author": {"login": "wmdietl"}, "path": "framework/tests/aliasing/UniqueConstructorTest.java", "diffHunk": "@@ -0,0 +1,24 @@\n+import org.checkerframework.common.aliasing.qual.Unique;\n+\n+public class UniqueConstructorTest {\n+    // No need for @SuppressWarnings()\n+    @Unique UniqueConstructorTest() {\n+        // Doesn't raise unique.leaked error since it's a top parent class (@Unique Object subclass\n+        // by default)\n+    }\n+}\n+\n+class ParentClass extends UniqueConstructorTest {\n+\n+    ParentClass() {\n+        // Doesn't raise unique.leaked error since it's a non unique class with a unique parent", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9186500184273bb508da6a5cc8558621a8754aa"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b0fd9c4ff6ff8b42a429673499d05c4c382093d", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/9b0fd9c4ff6ff8b42a429673499d05c4c382093d", "committedDate": "2020-06-16T11:13:26Z", "message": "Modifying test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25b602a276a6d40e8510aeab62e952b6a1c2b44e", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/25b602a276a6d40e8510aeab62e952b6a1c2b44e", "committedDate": "2020-06-16T11:49:22Z", "message": "Merge remote-tracking branch 'upstream/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cacacc1b082ec120e89a84e166be6e11968dfd3b", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/cacacc1b082ec120e89a84e166be6e11968dfd3b", "committedDate": "2020-06-16T12:20:47Z", "message": "Merge branch 'master' into 3313-leak-in-constructor-error-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb424fd817490cc389323adf5d721d39b0ad8533", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/eb424fd817490cc389323adf5d721d39b0ad8533", "committedDate": "2020-06-17T16:20:58Z", "message": "Fix for feature request #3313 in Aliasing Checker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3240948aa8891c016b04e627e15f0505cfaf18f", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/c3240948aa8891c016b04e627e15f0505cfaf18f", "committedDate": "2020-06-17T16:20:58Z", "message": "Revert \"Fix for feature request #3313 in Aliasing Checker\"\n\nThis reverts commit fd536c4de755dc1c53adbca9ad2b684e9b39a055."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "941cab0d71c66e682d99347b2604d104331d34b8", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/941cab0d71c66e682d99347b2604d104331d34b8", "committedDate": "2020-06-17T16:20:58Z", "message": "Fix for feature request #3313 in Aliasing Checker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d71f60820a8e44e21b9f1cc542cb798958006dc3", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/d71f60820a8e44e21b9f1cc542cb798958006dc3", "committedDate": "2020-06-17T16:20:58Z", "message": "Revert \"Fix for feature request #3313 in Aliasing Checker\"\n\nThis reverts commit fd536c4de755dc1c53adbca9ad2b684e9b39a055."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53a6c12b02f9cbde8742bf4e1f69f2139eed1b94", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/53a6c12b02f9cbde8742bf4e1f69f2139eed1b94", "committedDate": "2020-06-19T16:01:19Z", "message": "Merge remote-tracking branch 'upstream/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21f91a837a3205595898903782b9973fcbbf82dd", "author": {"user": {"login": "wmdietl", "name": "Werner Dietl"}}, "url": "https://github.com/typetools/checker-framework/commit/21f91a837a3205595898903782b9973fcbbf82dd", "committedDate": "2020-06-23T18:21:57Z", "message": "Fix comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MDg5MTQy", "url": "https://github.com/typetools/checker-framework/pull/3337#pullrequestreview-436089142", "createdAt": "2020-06-23T19:27:33Z", "commit": {"oid": "21f91a837a3205595898903782b9973fcbbf82dd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c692aec6b185961d76041db1a659a7342a74614c", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/c692aec6b185961d76041db1a659a7342a74614c", "committedDate": "2020-06-24T20:54:51Z", "message": "Merge ../checker-framework-branch-master into 3313-leak-in-constructor-error-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bfe4454601a203c236f0940f442830f26cf0977", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/4bfe4454601a203c236f0940f442830f26cf0977", "committedDate": "2020-06-26T12:35:52Z", "message": "Merge remote-tracking branch 'upstream/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b431cb47345898536df0a580e60f8342b3f4bc4", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/7b431cb47345898536df0a580e60f8342b3f4bc4", "committedDate": "2020-06-26T15:01:27Z", "message": "Merge remote-tracking branch 'upstream/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "995522cebe09329be8ef87e8a027767ba35061fd", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/995522cebe09329be8ef87e8a027767ba35061fd", "committedDate": "2020-06-26T15:02:53Z", "message": "Merge branch 'master' into 3313-leak-in-constructor-error-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5abefa5b196671a1ed17dc4affa1a3aa3f8673c8", "author": {"user": {"login": "aditya3434", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/5abefa5b196671a1ed17dc4affa1a3aa3f8673c8", "committedDate": "2020-06-26T15:06:04Z", "message": "Merge branch '3313-leak-in-constructor-error-fix' of https://github.com/aditya3434/checker-framework into 3313-leak-in-constructor-error-fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMTk0ODY1", "url": "https://github.com/typetools/checker-framework/pull/3337#pullrequestreview-440194865", "createdAt": "2020-06-30T16:35:50Z", "commit": {"oid": "5abefa5b196671a1ed17dc4affa1a3aa3f8673c8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2802, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}