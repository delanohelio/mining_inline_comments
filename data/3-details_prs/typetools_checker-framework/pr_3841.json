{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExNzIzODU0", "number": 3841, "title": "Fix for #3287", "bodyText": "This is a work-in-progress PR to correct #3287.\nThe old override checking code first traversed the direct class inheritance chain to check overrides, then iterated over the direct supertypes (i.e., base class and directly declared interfaces).  This left a hole when a method was inherited from either:\n\nAn interface extended (possibly transitively) by a directly implemented interface, where the directly-implemented interface did not contain its own override; or\nAn interface implemented by a class which did not provide its own override of the relevant method.\n\nBasically, a method m defined in U and overridden in class or interface T wasn't correctly checked for overrides unless T and U were both class types with T <: U, or if U was an interface, if class T directly implemented U or interface T directly extended U.\nThe fix was to replace the traversal code (originally from 2012) with a use of comparatively newer helper functions that already correctly handle transitive inheritance along all relevant paths.\nThis fix appears functionally complete, but requires a bit more cleanup. I will remove the \"WIP\" and update the PR when it is actually ready for review.", "createdAt": "2020-10-28T17:38:12Z", "url": "https://github.com/typetools/checker-framework/pull/3841", "merged": true, "mergeCommit": {"oid": "d7149190dc06ab63c71af0bb7a07cf13db18b6b4"}, "closed": true, "closedAt": "2020-11-04T21:53:24Z", "author": {"login": "csgordon"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnfBXwgH2gAyNTExNzIzODU0OjFjMzYzMzVjZTFiZDMwMzlhODlkNjI4NTE2ZjAzNmZmZTRiMzI0NDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZTmAVgH2gAyNTExNzIzODU0OjQ1NDQ1YmZkYWNhMWRkYTI0NTExMDVmNmY4OTU4YWE0MmRhNmFlZjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1c36335ce1bd3039a89d628516f036ffe4b32448", "author": {"user": {"login": "csgordon", "name": "Colin S. Gordon"}}, "url": "https://github.com/typetools/checker-framework/commit/1c36335ce1bd3039a89d628516f036ffe4b32448", "committedDate": "2020-06-03T01:17:41Z", "message": "add test reproducing typetools/checker-framework#3287 and some variants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec82c45de325a1086b1228453c27dce17eaf402f", "author": {"user": {"login": "csgordon", "name": "Colin S. Gordon"}}, "url": "https://github.com/typetools/checker-framework/commit/ec82c45de325a1086b1228453c27dce17eaf402f", "committedDate": "2020-06-03T01:59:11Z", "message": "fix test for typetools/checker-framework#3287 to require errors, not warnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a6afb48a58212a9ecf4fde3e2690dca9add1b08", "author": {"user": {"login": "csgordon", "name": "Colin S. Gordon"}}, "url": "https://github.com/typetools/checker-framework/commit/0a6afb48a58212a9ecf4fde3e2690dca9add1b08", "committedDate": "2020-06-03T15:27:14Z", "message": "update test for typetools/checker-framework#3287 to check for an additional manifestation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d0bedae3072693af589526b939467dbd891c9c2", "author": {"user": {"login": "csgordon", "name": "Colin S. Gordon"}}, "url": "https://github.com/typetools/checker-framework/commit/6d0bedae3072693af589526b939467dbd891c9c2", "committedDate": "2020-10-06T00:07:23Z", "message": "partial fix, broke what should have been dead code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82a4311e98208087373a8b728bb09e5f60c7b62c", "author": {"user": {"login": "csgordon", "name": "Colin S. Gordon"}}, "url": "https://github.com/typetools/checker-framework/commit/82a4311e98208087373a8b728bb09e5f60c7b62c", "committedDate": "2020-10-27T18:38:39Z", "message": "Likely fix for typetools/checker-framework#3287.\n\nCleaned up the override checking code significantly, offloading some work to existing utility methods in the process."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23c6458b9e45b301b655e618157f88108c1b8745", "author": {"user": {"login": "csgordon", "name": "Colin S. Gordon"}}, "url": "https://github.com/typetools/checker-framework/commit/23c6458b9e45b301b655e618157f88108c1b8745", "committedDate": "2020-10-27T18:59:15Z", "message": "Merge branch 'master' of github.com:typetools/checker-framework into master\n\nMerge upstream into fix for typetools/checker-framework#3287"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30f45a4ca21661e5a6e5f06c70867499e21275a5", "author": {"user": {"login": "csgordon", "name": "Colin S. Gordon"}}, "url": "https://github.com/typetools/checker-framework/commit/30f45a4ca21661e5a6e5f06c70867499e21275a5", "committedDate": "2020-10-27T19:23:51Z", "message": "Remove variable that is now unused"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "033fc652bedb2787f1dfa3c36594e7f6d2b94a90", "author": {"user": {"login": "csgordon", "name": "Colin S. Gordon"}}, "url": "https://github.com/typetools/checker-framework/commit/033fc652bedb2787f1dfa3c36594e7f6d2b94a90", "committedDate": "2020-10-28T18:07:51Z", "message": "better document the usage of GuiEffectTypeFactory#findInheritedEffectRange"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "534747c54a3128e0ba19e5a59c7f580c8bae6f2e", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/534747c54a3128e0ba19e5a59c7f580c8bae6f2e", "committedDate": "2020-10-29T21:30:59Z", "message": "Document why nested class is not static"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4100cd3dff80d3174e93b53704abceb1ddf0b5a4", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/4100cd3dff80d3174e93b53704abceb1ddf0b5a4", "committedDate": "2020-10-30T00:45:09Z", "message": "Merge ../checker-framework-branch-master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "321d8d36080d5f8ce268ee4182949061510bb701", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/321d8d36080d5f8ce268ee4182949061510bb701", "committedDate": "2020-10-30T03:14:14Z", "message": "Merge branch 'master' of github.com:typetools/checker-framework"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a29903a52b1843d730fdf727a4039ecbdcf12184", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/a29903a52b1843d730fdf727a4039ecbdcf12184", "committedDate": "2020-10-30T03:20:06Z", "message": "Punctuation in comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "981d25194621856266b8d59bc50e406e4d3fcd9b", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/981d25194621856266b8d59bc50e406e4d3fcd9b", "committedDate": "2020-10-30T03:23:21Z", "message": "Merge ../checker-framework-branch-master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMzUyOTUw", "url": "https://github.com/typetools/checker-framework/pull/3841#pullrequestreview-520352950", "createdAt": "2020-10-30T03:22:03Z", "commit": {"oid": "a29903a52b1843d730fdf727a4039ecbdcf12184"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMzoyMjowM1rOHq7L0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMzoyMjoxMFrOHq7MJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDc3MTkyMA==", "bodyText": "Should \"inheriting from\" be \"overriding\"?", "url": "https://github.com/typetools/checker-framework/pull/3841#discussion_r514771920", "createdAt": "2020-10-30T03:22:03Z", "author": {"login": "mernst"}, "path": "checker/src/main/java/org/checkerframework/checker/guieffect/GuiEffectTypeFactory.java", "diffHunk": "@@ -548,7 +519,7 @@ public AnnotatedTypeMirror getAnnotatedType(Tree tree) {\n         // We don't need to issue warnings for inheriting from poly and a concrete effect.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a29903a52b1843d730fdf727a4039ecbdcf12184"}, "originalPosition": 229}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDc3MjAwNw==", "bodyText": "As a minor comment, I think the above 3 variables would be better named *Overridden rather than *Override, since they contain a method of the given effect that is overridden.", "url": "https://github.com/typetools/checker-framework/pull/3841#discussion_r514772007", "createdAt": "2020-10-30T03:22:10Z", "author": {"login": "mernst"}, "path": "checker/src/main/java/org/checkerframework/checker/guieffect/GuiEffectTypeFactory.java", "diffHunk": "@@ -420,126 +441,76 @@ public AnnotatedTypeMirror getAnnotatedType(Tree tree) {\n         ExecutableElement polyOverride = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a29903a52b1843d730fdf727a4039ecbdcf12184"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45445bfdaca1dda2451105f6f8958aa42da6aef0", "author": {"user": {"login": "csgordon", "name": "Colin S. Gordon"}}, "url": "https://github.com/typetools/checker-framework/commit/45445bfdaca1dda2451105f6f8958aa42da6aef0", "committedDate": "2020-11-04T20:15:03Z", "message": "address some minor style feedback from Mike"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2473, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}