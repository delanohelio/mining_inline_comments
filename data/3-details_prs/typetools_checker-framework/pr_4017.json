{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5MDI3Nzc5", "number": 4017, "title": "Improve AnnotationFileParser diagnostics", "bodyText": "", "createdAt": "2020-12-13T21:55:06Z", "url": "https://github.com/typetools/checker-framework/pull/4017", "merged": true, "mergeCommit": {"oid": "e0cec71fb0636efadf749051c17d5a04d39ca4b1"}, "closed": true, "closedAt": "2020-12-15T20:15:21Z", "author": {"login": "mernst"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdl1_lPgH2gAyNTM5MDI3Nzc5OjJmNTlkOWVkN2M5ZTllN2JkMjY0MjI0ZTJkMDAwNWE2NWE5MTQzM2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmgKwUAFqTU1MjgzMjU1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2f59d9ed7c9e9e7bd264224e2d0005a65a91433e", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/2f59d9ed7c9e9e7bd264224e2d0005a65a91433e", "committedDate": "2020-12-13T19:06:51Z", "message": "AnnotationFileParser diagnostics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f5b793663ba7f96f0c92c152c5b6e286a39de02", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/3f5b793663ba7f96f0c92c152c5b6e286a39de02", "committedDate": "2020-12-14T17:10:56Z", "message": "Merge ../checker-framework-branch-master into AnnotationFileParser-diagnostics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ed282e454df73d4a5936a556313636c65782af6", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/0ed282e454df73d4a5936a556313636c65782af6", "committedDate": "2020-12-14T17:12:16Z", "message": "If only one message, put it on the first line"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxODE0NTk2", "url": "https://github.com/typetools/checker-framework/pull/4017#pullrequestreview-551814596", "createdAt": "2020-12-14T19:16:42Z", "commit": {"oid": "0ed282e454df73d4a5936a556313636c65782af6"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxOToxNjo0MlrOIFh5fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxOToxNzo1MVrOIFh-HA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjY2OTE4Mg==", "bodyText": "I don't understand why this is disabled.", "url": "https://github.com/typetools/checker-framework/pull/4017#discussion_r542669182", "createdAt": "2020-12-14T19:16:42Z", "author": {"login": "smillst"}, "path": "framework/src/main/java/org/checkerframework/framework/stub/AnnotationFileParser.java", "diffHunk": "@@ -1315,6 +1330,14 @@ private void recordDeclAnnotation(\n                     // `annoMirror` is applicable to `elt`\n                     annos.add(annoMirror);\n                 }\n+            } else {\n+                // TODO: Warn about what file it was found in.\n+                if (false) {\n+                    stubWarnNotFound(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ed282e454df73d4a5936a556313636c65782af6"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjY3MDM2NA==", "bodyText": "The field filename can be used for this.  Maybe all AnnotationFileParser warnings should report the filename?", "url": "https://github.com/typetools/checker-framework/pull/4017#discussion_r542670364", "createdAt": "2020-12-14T19:17:51Z", "author": {"login": "smillst"}, "path": "framework/src/main/java/org/checkerframework/framework/stub/AnnotationFileParser.java", "diffHunk": "@@ -1284,7 +1298,8 @@ private void annotate(AnnotatedTypeMirror type, List<AnnotationExpr> annotations\n             if (annoMirror != null) {\n                 type.replaceAnnotation(annoMirror);\n             } else {\n-                stubWarnNotFound(\"Unknown annotation: \" + annotation);\n+                // TODO: Be more specific: In what file?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ed282e454df73d4a5936a556313636c65782af6"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ead4b3c74e5c7ebe74bc43253954883e133a1dd", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/9ead4b3c74e5c7ebe74bc43253954883e133a1dd", "committedDate": "2020-12-14T19:26:33Z", "message": "Give filename in messages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a7a898466ff37aa4ce08fa109728f3cbda35dc6", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/2a7a898466ff37aa4ce08fa109728f3cbda35dc6", "committedDate": "2020-12-14T19:32:07Z", "message": "Update expected output (wrongly, with filesystem-specific path)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxODI4OTYy", "url": "https://github.com/typetools/checker-framework/pull/4017#pullrequestreview-551828962", "createdAt": "2020-12-14T19:35:47Z", "commit": {"oid": "2a7a898466ff37aa4ce08fa109728f3cbda35dc6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxOTozNTo0OFrOIFjMxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxOTozNTo0OFrOIFjMxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjY5MDUwMQ==", "bodyText": "@smillst Do you know offhand how to write this test so it will pass on all file systems?  (One way would be to add a flag, used only for debugging, that disables this output.)", "url": "https://github.com/typetools/checker-framework/pull/4017#discussion_r542690501", "createdAt": "2020-12-14T19:35:48Z", "author": {"login": "mernst"}, "path": "checker/jtreg/stubs/issue2059/AnnoNotFound.out", "diffHunk": "@@ -1,2 +1,2 @@\n-- compiler.warn.proc.messager: AnnotationFileParser: Unknown annotation: @Nullable\n+- compiler.warn.proc.messager: AnnotationFileParser: Unknown annotation @Nullable in /home/mernst/research/types/checker-framework-fork-mernst-branch-AnnotationFileParser-diagnostics/checker/jtreg/stubs/issue2059/AnnoNotFound.astub", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a7a898466ff37aa4ce08fa109728f3cbda35dc6"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd4f0c131063bbad1c0c8e49dba92eb1a8ddc0b6", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/cd4f0c131063bbad1c0c8e49dba92eb1a8ddc0b6", "committedDate": "2020-12-14T20:39:07Z", "message": "Don't output file name if -Anomsgtext is passed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46b7c7a1cfe40b29c83deac22148ea1a42c0ed28", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/46b7c7a1cfe40b29c83deac22148ea1a42c0ed28", "committedDate": "2020-12-15T03:54:13Z", "message": "Give file name and line number in error messages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fc61a815902bf7b37f12ef5e2861ad15a27d0d1", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/3fc61a815902bf7b37f12ef5e2861ad15a27d0d1", "committedDate": "2020-12-15T04:42:14Z", "message": "Merge ../checker-framework-branch-master into AnnotationFileParser-diagnostics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa57a5478b8b098805f6d7ca6e86f0f58d685ff9", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/fa57a5478b8b098805f6d7ca6e86f0f58d685ff9", "committedDate": "2020-12-15T05:11:19Z", "message": "Fix jtreg tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89537ee3c56daf62693db4c7dda053b8f538ce19", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/89537ee3c56daf62693db4c7dda053b8f538ce19", "committedDate": "2020-12-15T05:16:15Z", "message": "Update AnnotationFileParser warnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a34ecc758d1f7338fb5f9dd33c81669950083cbb", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/a34ecc758d1f7338fb5f9dd33c81669950083cbb", "committedDate": "2020-12-15T13:54:03Z", "message": "Add Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8216f2336f2f7c7f17c1724ecbcd101aed62d16c", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/8216f2336f2f7c7f17c1724ecbcd101aed62d16c", "committedDate": "2020-12-15T14:46:38Z", "message": "Test ouput"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b84d40d559df1cec8ae07ec3c03e699bc93275f", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/3b84d40d559df1cec8ae07ec3c03e699bc93275f", "committedDate": "2020-12-15T15:04:27Z", "message": "Don't show absolute path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12ec9aa033550f53ad5834762bbb794f0b458859", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/12ec9aa033550f53ad5834762bbb794f0b458859", "committedDate": "2020-12-15T15:32:33Z", "message": "Merge ../checker-framework-fork-mernst-branch-jtreg-missing into AnnotationFileParser-diagnostics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e7cce9461aed838550088f99a3baf2722661851", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/4e7cce9461aed838550088f99a3baf2722661851", "committedDate": "2020-12-15T16:21:36Z", "message": "Make output deterministic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8f2267ed7acd1c0ac4078df4068f8c611e5d764", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/c8f2267ed7acd1c0ac4078df4068f8c611e5d764", "committedDate": "2020-12-15T16:31:16Z", "message": "Merge ../checker-framework-branch-master into AnnotationFileParser-diagnostics"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyODMyNTUx", "url": "https://github.com/typetools/checker-framework/pull/4017#pullrequestreview-552832551", "createdAt": "2020-12-15T20:15:04Z", "commit": {"oid": "c8f2267ed7acd1c0ac4078df4068f8c611e5d764"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2453, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}