{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNjc5NTg3", "number": 3368, "title": "Refactor private method in TypeFromTreeVisitor", "bodyText": "It was easier to refactor the method than document its previous behavior.", "createdAt": "2020-06-10T20:22:32Z", "url": "https://github.com/typetools/checker-framework/pull/3368", "merged": true, "mergeCommit": {"oid": "3a73d0259384a41c8512344946f124c9a10c8e39"}, "closed": true, "closedAt": "2020-06-16T15:46:52Z", "author": {"login": "smillst"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcp_gnIgH2gAyNDMyNjc5NTg3OmQyMTc1MDkxOTBhOTQ4Y2Y4MmU0ZGI5YzhjMDA1NmUyNGVhODMzMzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrjw-mAH2gAyNDMyNjc5NTg3OmIzMGVmYzBlMDU4YzdmMzFkZmJhN2FmM2VlZGZlNzhhMDc1ZGFmNjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d217509190a948cf82e4db9c8c0056e24ea83337", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/d217509190a948cf82e4db9c8c0056e24ea83337", "committedDate": "2020-06-10T20:16:37Z", "message": "Remove comment that is no longer true."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "643097e0f5a64b5021e03914f4f314bb2bcead4a", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/643097e0f5a64b5021e03914f4f314bb2bcead4a", "committedDate": "2020-06-11T19:42:12Z", "message": "Clean up the code so it is easier to document."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6eb2ac1b6f5b182b53db4cab0b4f3faec65e0701", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/6eb2ac1b6f5b182b53db4cab0b4f3faec65e0701", "committedDate": "2020-06-11T20:52:50Z", "message": "Fix javadoc."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NDAzODU0", "url": "https://github.com/typetools/checker-framework/pull/3368#pullrequestreview-429403854", "createdAt": "2020-06-12T01:24:11Z", "commit": {"oid": "6eb2ac1b6f5b182b53db4cab0b4f3faec65e0701"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMToyNDoxMVrOGi0IBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMToyNDoxMVrOGi0IBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1ODc5MQ==", "bodyText": "Inlining the call to asUse() sounds like a good simplification, but it would be good to document that change in behavior. At the moment it sounds like type is returned directly.\nMaybe also the method name getTypeVariable*Use*FromDeclaration could highlight that.", "url": "https://github.com/typetools/checker-framework/pull/3368#discussion_r439158791", "createdAt": "2020-06-12T01:24:11Z", "author": {"login": "wmdietl"}, "path": "framework/src/main/java/org/checkerframework/framework/type/TypeFromTypeTreeVisitor.java", "diffHunk": "@@ -243,68 +244,56 @@ public AnnotatedTypeMirror visitWildcard(WildcardTree node, AnnotatedTypeFactory\n     }\n \n     /**\n-     * Returns an AnnotatedTypeMirror for uses of type variables with annotations written explicitly\n-     * on the type parameter declaration and/or its upper bound.\n+     * If a tree is can be found for the declaration of the type variable {@code type}, then a\n+     * {@link AnnotatedTypeVariable} is returned with explicit annotations from the type variables\n+     * declared bounds. If a tree cannot be found, then {@code type} is returned.\n      *\n-     * <p>Note for type variable uses in method signatures, explicit annotations on the declaration\n-     * are added by {@link TypeFromMemberVisitor#typeVarAnnotator}.\n+     * @param type type variable used to find declaration tree\n+     * @param f annotated type factory\n+     * @return the AnnotatedTypeVariable from the declaration of {@code type} or {@code type} if no", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6eb2ac1b6f5b182b53db4cab0b4f3faec65e0701"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NDA0MDY5", "url": "https://github.com/typetools/checker-framework/pull/3368#pullrequestreview-429404069", "createdAt": "2020-06-12T01:24:58Z", "commit": {"oid": "6eb2ac1b6f5b182b53db4cab0b4f3faec65e0701"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMToyNDo1OFrOGi0Iyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMToyNDo1OFrOGi0Iyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1ODk4Ng==", "bodyText": "Could the return type be AnnotatedTypeVariable?", "url": "https://github.com/typetools/checker-framework/pull/3368#discussion_r439158986", "createdAt": "2020-06-12T01:24:58Z", "author": {"login": "wmdietl"}, "path": "framework/src/main/java/org/checkerframework/framework/type/TypeFromTypeTreeVisitor.java", "diffHunk": "@@ -243,68 +244,56 @@ public AnnotatedTypeMirror visitWildcard(WildcardTree node, AnnotatedTypeFactory\n     }\n \n     /**\n-     * Returns an AnnotatedTypeMirror for uses of type variables with annotations written explicitly\n-     * on the type parameter declaration and/or its upper bound.\n+     * If a tree is can be found for the declaration of the type variable {@code type}, then a\n+     * {@link AnnotatedTypeVariable} is returned with explicit annotations from the type variables\n+     * declared bounds. If a tree cannot be found, then {@code type} is returned.\n      *\n-     * <p>Note for type variable uses in method signatures, explicit annotations on the declaration\n-     * are added by {@link TypeFromMemberVisitor#typeVarAnnotator}.\n+     * @param type type variable used to find declaration tree\n+     * @param f annotated type factory\n+     * @return the AnnotatedTypeVariable from the declaration of {@code type} or {@code type} if no\n+     *     tree is found.\n      */\n-    private AnnotatedTypeMirror forTypeVariable(AnnotatedTypeMirror type, AnnotatedTypeFactory f) {\n-        if (type.getKind() != TypeKind.TYPEVAR) {\n-            throw new BugInCF(\n-                    \"TypeFromTree.forTypeVariable: should only be called on type variables\");\n-        }\n-        TypeVariable typeVar = (TypeVariable) type.getUnderlyingType();\n+    private AnnotatedTypeMirror getTypeVariableFromDeclaration(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6eb2ac1b6f5b182b53db4cab0b4f3faec65e0701"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b30efc0e058c7f31dfba7af3eedfe78a075daf65", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/b30efc0e058c7f31dfba7af3eedfe78a075daf65", "committedDate": "2020-06-15T17:05:00Z", "message": "Tweaks."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2828, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}