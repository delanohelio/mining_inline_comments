{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzOTU2ODY1", "number": 3332, "title": "Add Annotation File Utilities as an included build.", "bodyText": "Before this change it was possible to use dependencies of AFU without specifying them in the build files.", "createdAt": "2020-05-27T16:02:16Z", "url": "https://github.com/typetools/checker-framework/pull/3332", "merged": true, "mergeCommit": {"oid": "684bc02116c591578701fdc6e490ed52473fcc7e"}, "closed": true, "closedAt": "2020-05-29T21:06:34Z", "author": {"login": "smillst"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclKXaNAH2gAyNDIzOTU2ODY1OmQ1ZDZjMzBmMmRiMDI2YjliYjFkN2IwNDM3NGE5NWU3YWYyYjlhYjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmFnHJgH2gAyNDIzOTU2ODY1OmExMmVmZjk0MGFiMTc3YTRmYjg0MDE0MTExY2QwOTRlYjFlM2UwZmY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d5d6c30f2db026b9bb1d7b04374a95e7af2b9ab9", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/d5d6c30f2db026b9bb1d7b04374a95e7af2b9ab9", "committedDate": "2020-05-26T20:05:54Z", "message": "Use AFU in local Maven repo."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d36247f25382a858105d5b11d5a1154c30fd7a20", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/d36247f25382a858105d5b11d5a1154c30fd7a20", "committedDate": "2020-05-26T21:34:24Z", "message": "Add Guava dependency."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14c5af9ed7d20d5e4cf58c4a9bc5bbfdf27400ff", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/14c5af9ed7d20d5e4cf58c4a9bc5bbfdf27400ff", "committedDate": "2020-05-27T16:39:33Z", "message": "Merge remote-tracking branch 'origin/master' into maven"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9a2ecdebda2564b596ba5dd9707264a2da04294", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/a9a2ecdebda2564b596ba5dd9707264a2da04294", "committedDate": "2020-05-27T16:50:19Z", "message": "Fix dependencies."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4ad474f127adf76a4b0b7ff51a59896f17f1fb4", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/f4ad474f127adf76a4b0b7ff51a59896f17f1fb4", "committedDate": "2020-05-27T20:04:24Z", "message": "Don't require installing AFU to local repository."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fa264708b95411b1455317c448ec6adee8ea7cb", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/7fa264708b95411b1455317c448ec6adee8ea7cb", "committedDate": "2020-05-27T20:12:52Z", "message": "AFU version number doesn't matter."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNDk0NDYy", "url": "https://github.com/typetools/checker-framework/pull/3332#pullrequestreview-420494462", "createdAt": "2020-05-28T21:09:59Z", "commit": {"oid": "7fa264708b95411b1455317c448ec6adee8ea7cb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMTowOTo1OVrOGcG1Pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMTowOTo1OVrOGcG1Pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEyNTI0Nw==", "bodyText": "spacing", "url": "https://github.com/typetools/checker-framework/pull/3332#discussion_r432125247", "createdAt": "2020-05-28T21:09:59Z", "author": {"login": "smillst"}, "path": "settings.gradle", "diffHunk": "@@ -6,4 +6,10 @@ include 'framework'\n include 'checker-qual'\n include 'checker-qual-android'\n include 'framework-test'\n-\n+includeBuild ('../annotation-tools/annotation-file-utilities'){\n+    if(!file('../annotation-tools/annotation-file-utilities').exists()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fa264708b95411b1455317c448ec6adee8ea7cb"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNDk0NzE5", "url": "https://github.com/typetools/checker-framework/pull/3332#pullrequestreview-420494719", "createdAt": "2020-05-28T21:10:23Z", "commit": {"oid": "7fa264708b95411b1455317c448ec6adee8ea7cb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c15e004556506a474bd81b1574a3ce8e2fd85f6c", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/c15e004556506a474bd81b1574a3ce8e2fd85f6c", "committedDate": "2020-05-28T21:42:15Z", "message": "Fix spacing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNTEyMTgw", "url": "https://github.com/typetools/checker-framework/pull/3332#pullrequestreview-420512180", "createdAt": "2020-05-28T21:39:33Z", "commit": {"oid": "7fa264708b95411b1455317c448ec6adee8ea7cb"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMTozOTozNFrOGcHsuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMTozOTozNFrOGcHsuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEzOTQ0OQ==", "bodyText": "This seems to be a bug in how the annotated version of Guava was made.  I don't understand it yet.\nIn the meanwhile, can you try the workaround used in AFU, which is to add a dependency on error_prone_annotations?", "url": "https://github.com/typetools/checker-framework/pull/3332#discussion_r432139449", "createdAt": "2020-05-28T21:39:34Z", "author": {"login": "mernst"}, "path": "framework/build.gradle", "diffHunk": "@@ -25,12 +25,24 @@ dependencies {\n     implementation project(':dataflow')\n     implementation project(':javacutil')\n     implementation files(\"${stubparserJar}\")\n-    implementation files(\"${afuJar}\")\n+    // AFU is an \"includedBuild\" imported in checker-framework/settings.gradle, so the version number doesn't matter.\n+    // https://docs.gradle.org/current/userguide/composite_builds.html#settings_defined_composite\n+    implementation('org.checkerframework:annotation-file-utilities:*') {\n+        exclude group: 'com.google', module: 'javac'\n+    }\n     implementation project(':checker-qual')\n-    // As of 2019/12/16, the version of reflection-util in the Annotation\n-    // File Utilities takes priority over this version, in the fat jar\n-    // file. :-( So update it and re-build it locally when updating this.\n     implementation 'org.plumelib:reflection-util:0.2.2'\n+    implementation 'org.plumelib:plume-util:1.1.4'\n+\n+    // TODO: The annotated version of Guava gives an error:\n+    // org.checkerframework.annotatedlib/guava/.../guava-28.2-jre.jar(/com/google/common/collect/ImmutableCollection.class):\n+    // warning: Cannot find annotation method 'value()' in type 'DoNotMock': class file for com.google.errorprone.annotations.DoNotMock not found", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fa264708b95411b1455317c448ec6adee8ea7cb"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a088ef6f956c2e8aa999573fea3c5865c42341a1", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/a088ef6f956c2e8aa999573fea3c5865c42341a1", "committedDate": "2020-05-29T16:55:02Z", "message": "Merge remote-tracking branch 'origin/master' into maven"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a12eff940ab177a4fb84014111cd094eb1e3e0ff", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/a12eff940ab177a4fb84014111cd094eb1e3e0ff", "committedDate": "2020-05-29T17:07:27Z", "message": "Fix Guava dependendency."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2792, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}