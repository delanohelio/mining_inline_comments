{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyMTc1NTYz", "number": 3967, "title": "Define method createWholeProgramInference", "bodyText": "", "createdAt": "2020-12-03T23:04:41Z", "url": "https://github.com/typetools/checker-framework/pull/3967", "merged": true, "mergeCommit": {"oid": "ffb57eb6a3f0e6c504507336e42f08e94ce24cd5"}, "closed": true, "closedAt": "2020-12-04T19:32:52Z", "author": {"login": "mernst"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdh9Z0ogH2gAyNTMyMTc1NTYzOmRkMDBkODVjMjM2ZjI2MDIzMTIwN2UxM2M5MzRjYWFhMjA2MzI3ZmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdi7_OVgH2gAyNTMyMTc1NTYzOjE1ZTI4Y2MwZWY2MzZmNzA0ZWFhNDgwYTcyZjJkMzg5OWRjNmQ0YzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dd00d85c236f260231207e13c934caaa206327fb", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/dd00d85c236f260231207e13c934caaa206327fb", "committedDate": "2020-12-01T17:29:09Z", "message": "Reduce differences against upstream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac32256de0aa9f5f96b577db6c16f11cbdae1f0a", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/ac32256de0aa9f5f96b577db6c16f11cbdae1f0a", "committedDate": "2020-12-01T21:20:28Z", "message": "Merge branch 'master' of github.com:typetools/checker-framework"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ea50f27ee7f99636ab5ac371b4f0896a72a5ba0", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/8ea50f27ee7f99636ab5ac371b4f0896a72a5ba0", "committedDate": "2020-12-01T22:21:49Z", "message": "Merge branch 'master' of github.com:typetools/checker-framework"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a39cd271f79ba2e9cf4bc5e4a7f948165c30c335", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/a39cd271f79ba2e9cf4bc5e4a7f948165c30c335", "committedDate": "2020-12-01T23:40:39Z", "message": "Merge branch 'master' of github.com:typetools/checker-framework"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3297300b35ce8a3286b1ac95c3d959da6204eedd", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/3297300b35ce8a3286b1ac95c3d959da6204eedd", "committedDate": "2020-12-03T01:59:10Z", "message": "Merge branch 'master' of github.com:mernst/checker-framework"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5675628b4e254d6b9744186c5f320851b2301670", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/5675628b4e254d6b9744186c5f320851b2301670", "committedDate": "2020-12-03T13:54:10Z", "message": "Merge branch 'master' of github.com:mernst/checker-framework"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5aa247f0035863f7900d9dac320d8689e7296acc", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/5aa247f0035863f7900d9dac320d8689e7296acc", "committedDate": "2020-12-03T19:48:45Z", "message": "Merge branch 'master' of github.com:mernst/checker-framework"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00e15a8c367585700667b7bdd75be73d97014077", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/00e15a8c367585700667b7bdd75be73d97014077", "committedDate": "2020-12-03T20:21:11Z", "message": "Define WholeProgramInferenceScenes.updateAnnotationSetInScene()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cda68f965eceeb6abb6b8d08844a8a0c33dc2f9", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/6cda68f965eceeb6abb6b8d08844a8a0c33dc2f9", "committedDate": "2020-12-03T20:22:46Z", "message": "Define method createWholeProgramInference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0672f46114248d1ee7260f0879107553e18cd60c", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/0672f46114248d1ee7260f0879107553e18cd60c", "committedDate": "2020-12-03T20:26:55Z", "message": "Merge ../checker-framework-fork-mernst-branch-updateAnnotationSetInScene into createWholeProgramInference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e93724cb9af59252c1d3487f720eefdb19734e8", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/3e93724cb9af59252c1d3487f720eefdb19734e8", "committedDate": "2020-12-03T22:18:53Z", "message": "Add Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da5f248b16d079bd0c1d768207ea3e8420283df6", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/da5f248b16d079bd0c1d768207ea3e8420283df6", "committedDate": "2020-12-03T23:06:54Z", "message": "Merge ../checker-framework-branch-master into createWholeProgramInference"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1MTU3MzQ5", "url": "https://github.com/typetools/checker-framework/pull/3967#pullrequestreview-545157349", "createdAt": "2020-12-04T17:29:30Z", "commit": {"oid": "da5f248b16d079bd0c1d768207ea3e8420283df6"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNzoyOTozMVrOH_asLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNzozMzozOFrOH_a21w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI1OTYyOQ==", "bodyText": "Should the AnnotatedTypeFactory parameter be removed?", "url": "https://github.com/typetools/checker-framework/pull/3967#discussion_r536259629", "createdAt": "2020-12-04T17:29:31Z", "author": {"login": "smillst"}, "path": "framework/src/main/java/org/checkerframework/common/wholeprograminference/WholeProgramInference.java", "diffHunk": "@@ -151,6 +135,18 @@ void updateFromLocalAssignment(\n     void updateFromFieldAssignment(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da5f248b16d079bd0c1d768207ea3e8420283df6"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI2MDM3Mg==", "bodyText": "I don't think you need to pass the type factory anymore.", "url": "https://github.com/typetools/checker-framework/pull/3967#discussion_r536260372", "createdAt": "2020-12-04T17:30:36Z", "author": {"login": "smillst"}, "path": "framework/src/main/java/org/checkerframework/common/wholeprograminference/WholeProgramInferenceScenes.java", "diffHunk": "@@ -256,22 +281,27 @@ public void updateFromLocalAssignment(\n                     // https://github.com/typetools/checker-framework/issues/682\n                     continue;\n                 }\n-                AnnotatedTypeMirror paramATM = atf.getAnnotatedType(vt);\n-                AnnotatedTypeMirror argATM = atf.getAnnotatedType(rhsTree);\n+                AnnotatedTypeMirror paramATM = atypeFactory.getAnnotatedType(vt);\n+                AnnotatedTypeMirror argATM = atypeFactory.getAnnotatedType(rhsTree);\n                 VariableElement ve = TreeUtils.elementFromDeclaration(vt);\n                 AField param =\n                         method.vivifyAndAddTypeMirrorToParameter(\n                                 i, argATM.getUnderlyingType(), ve.getSimpleName());\n                 updateAnnotationSetInScene(\n-                        param.type, TypeUseLocation.PARAMETER, argATM, paramATM, atf, jaifPath);\n+                        param.type,\n+                        TypeUseLocation.PARAMETER,\n+                        argATM,\n+                        paramATM,\n+                        atypeFactory,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da5f248b16d079bd0c1d768207ea3e8420283df6"}, "originalPosition": 193}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI2MDc4NA==", "bodyText": "Should this type factory be removed?", "url": "https://github.com/typetools/checker-framework/pull/3967#discussion_r536260784", "createdAt": "2020-12-04T17:31:13Z", "author": {"login": "smillst"}, "path": "framework/src/main/java/org/checkerframework/common/wholeprograminference/WholeProgramInferenceScenes.java", "diffHunk": "@@ -256,22 +281,27 @@ public void updateFromLocalAssignment(\n                     // https://github.com/typetools/checker-framework/issues/682\n                     continue;\n                 }\n-                AnnotatedTypeMirror paramATM = atf.getAnnotatedType(vt);\n-                AnnotatedTypeMirror argATM = atf.getAnnotatedType(rhsTree);\n+                AnnotatedTypeMirror paramATM = atypeFactory.getAnnotatedType(vt);\n+                AnnotatedTypeMirror argATM = atypeFactory.getAnnotatedType(rhsTree);\n                 VariableElement ve = TreeUtils.elementFromDeclaration(vt);\n                 AField param =\n                         method.vivifyAndAddTypeMirrorToParameter(\n                                 i, argATM.getUnderlyingType(), ve.getSimpleName());\n                 updateAnnotationSetInScene(\n-                        param.type, TypeUseLocation.PARAMETER, argATM, paramATM, atf, jaifPath);\n+                        param.type,\n+                        TypeUseLocation.PARAMETER,\n+                        argATM,\n+                        paramATM,\n+                        atypeFactory,\n+                        jaifPath);\n                 break;\n             }\n         }\n     }\n \n     @Override\n     public void updateFromFieldAssignment(\n-            Node lhs, Node rhs, ClassTree classTree, AnnotatedTypeFactory atf) {\n+            Node lhs, Node rhs, ClassTree classTree, AnnotatedTypeFactory atypeFactory) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da5f248b16d079bd0c1d768207ea3e8420283df6"}, "originalPosition": 203}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI2MjM1OQ==", "bodyText": "This method creates the WholeProgramInference. getWholeProgramInference returns it.  Also, I think this method should be protected.", "url": "https://github.com/typetools/checker-framework/pull/3967#discussion_r536262359", "createdAt": "2020-12-04T17:33:38Z", "author": {"login": "smillst"}, "path": "framework/src/main/java/org/checkerframework/framework/type/AnnotatedTypeFactory.java", "diffHunk": "@@ -4520,4 +4518,13 @@ public boolean containsSameByClass(\n         }\n         return null;\n     }\n+\n+    /**\n+     * Returns a WholeProgramInference for use by this type factory.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da5f248b16d079bd0c1d768207ea3e8420283df6"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15e28cc0ef636f704eaa480a72f2d3899dc6d4c2", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/15e28cc0ef636f704eaa480a72f2d3899dc6d4c2", "committedDate": "2020-12-04T18:24:07Z", "message": "Remove AnnotatedTypeFactory argument"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2420, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}