{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyNDEzMzcx", "number": 3252, "title": "Fixes #3217: Lambdas: use erased type.", "bodyText": "Fixes #3217", "createdAt": "2020-04-12T23:13:20Z", "url": "https://github.com/typetools/checker-framework/pull/3252", "merged": true, "mergeCommit": {"oid": "e38f8959233fd7b840424b27402c86537ac4f1b6"}, "closed": true, "closedAt": "2020-04-30T21:31:37Z", "author": {"login": "smillst"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXCqRDgH2gAyNDAyNDEzMzcxOjc1ZDgxNjVlZWUxMGJmODJmMTllMTIxNDJhYjRiYWNiNzlkZGVhNTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcceKynAH2gAyNDAyNDEzMzcxOmU2OWFlOGRjY2YyYzc4ZjZmYzE0NTNmODY4ZjgyMzcyODQ2ZDU0NGI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "75d8165eee10bf82f19e12142ab4bacb79ddea53", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/75d8165eee10bf82f19e12142ab4bacb79ddea53", "committedDate": "2020-04-12T23:12:19Z", "message": "Use erased type."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MDQ4NzMy", "url": "https://github.com/typetools/checker-framework/pull/3252#pullrequestreview-396048732", "createdAt": "2020-04-19T18:35:50Z", "commit": {"oid": "75d8165eee10bf82f19e12142ab4bacb79ddea53"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxODozNTo1MVrOGH7QnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxODozNTo1MVrOGH7QnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk2NDEyNA==", "bodyText": "Could you update the comment to explain why the erased type is enough?\nCould you add a test case that uses generic types and make sure that this doesn't introduce false negatives? E.g. have a method that accepts a List<String> and pass something that is a List<@Nullable String>. If this only compares the List part, it will ignore the mismatch in the type arguments.\nIf this isn't a concern, please document why.", "url": "https://github.com/typetools/checker-framework/pull/3252#discussion_r410964124", "createdAt": "2020-04-19T18:35:51Z", "author": {"login": "wmdietl"}, "path": "framework/src/main/java/org/checkerframework/framework/type/TypeFromMemberVisitor.java", "diffHunk": "@@ -100,7 +101,8 @@ private static AnnotatedTypeMirror inferLambdaParamAnnotations(\n             AnnotatedExecutableType functionType = f.getFunctionTypeFromTree(lambdaDecl);\n             AnnotatedTypeMirror funcTypeParam = functionType.getParameterTypes().get(index);\n             if (TreeUtils.isImplicitlyTypedLambda(declaredInTree)) {\n-                if (f.types.isSubtype(funcTypeParam.actualType, lambdaParam.actualType)) {\n+                if (TypesUtils.isErasedSubtype(\n+                        funcTypeParam.actualType, lambdaParam.actualType, f.types)) {\n                     // The Java types should be exactly the same, but because invocation type", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75d8165eee10bf82f19e12142ab4bacb79ddea53"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2074ffc97cffe072314573ba6ca29b94f6e45b5", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/f2074ffc97cffe072314573ba6ca29b94f6e45b5", "committedDate": "2020-04-29T20:01:19Z", "message": "Merge branch 'master' into issue3217"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e69ae8dccf2c78f6fc1453f868f82372846d544b", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/e69ae8dccf2c78f6fc1453f868f82372846d544b", "committedDate": "2020-04-29T20:04:54Z", "message": "Update comment."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2953, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}