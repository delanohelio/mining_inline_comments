{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3NDkzMDg0", "number": 3882, "title": "Make an implicit behavior explicit", "bodyText": "I don't know whether this optimization is worthwhile.\n(The documentation changes are probably worthwhile even if the optimization is not.)", "createdAt": "2020-11-09T05:54:51Z", "url": "https://github.com/typetools/checker-framework/pull/3882", "merged": true, "mergeCommit": {"oid": "b68dd2c7e35efea9ef78ab0d67fd2238356a3a66"}, "closed": true, "closedAt": "2020-11-12T20:38:21Z", "author": {"login": "mernst"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdap-hiAH2gAyNTE3NDkzMDg0Ojg3ZmFjZWRmNjRkYWE2ZjE2MDM2M2QzZTI2OTE5OWQwNmI3YmU3Yjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdb2nK_gH2gAyNTE3NDkzMDg0OjIwYTFlM2M0ZTdmMTAwNmI5ZDVjY2QxOGMzMDc1MTE5NTQ3MTY4NGM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "87facedf64daa6f160363d3e269199d06b7be7b8", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/87facedf64daa6f160363d3e269199d06b7be7b8", "committedDate": "2020-11-09T00:53:40Z", "message": "Make an implicit behavior explicit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9dd0199690f79a3a11238a25fe110ade8a9fb65c", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/9dd0199690f79a3a11238a25fe110ade8a9fb65c", "committedDate": "2020-11-09T05:50:29Z", "message": "Add Javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NTUzMjkx", "url": "https://github.com/typetools/checker-framework/pull/3882#pullrequestreview-526553291", "createdAt": "2020-11-09T18:52:24Z", "commit": {"oid": "9dd0199690f79a3a11238a25fe110ade8a9fb65c"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxODo1MjoyNFrOHv8wmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxODo1NDo0OVrOHv82gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA0MDYwMQ==", "bodyText": "This method operates on AnnotatedTypeMirrors, so instead of, if both annotations this should be if neither annotated type has a primary annotation.", "url": "https://github.com/typetools/checker-framework/pull/3882#discussion_r520040601", "createdAt": "2020-11-09T18:52:24Z", "author": {"login": "smillst"}, "path": "framework/src/main/java/org/checkerframework/framework/type/DefaultTypeHierarchy.java", "diffHunk": "@@ -215,10 +215,12 @@ protected boolean isPrimarySubtype(AnnotatedTypeMirror subtype, AnnotatedTypeMir\n     /**\n      * Compare the primary annotations of {@code subtype} and {@code supertype}.\n      *\n+     * @param subtype the type that might be a subtype\n+     * @param supertype the type that might be a supertype\n      * @param annosCanBeEmtpy indicates that annotations may be missing from the typemirror\n      * @return true if the primary annotation on subtype {@literal <:} primary annotation on\n-     *     supertype for the current top or both annotations are null. False is returned if one\n-     *     annotation is null and the other is not.\n+     *     supertype for the current top. Returns true if both annotations are null. Returns false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dd0199690f79a3a11238a25fe110ade8a9fb65c"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA0MjExMw==", "bodyText": "Without this change, if only one of the annotations is null,  qualifierHierarchy.isSubtype(subtypeAnno, supertypeAnno); would throw an exception.  But the Javadoc says that false should be returned in that case, so I think this is a good change.", "url": "https://github.com/typetools/checker-framework/pull/3882#discussion_r520042113", "createdAt": "2020-11-09T18:54:49Z", "author": {"login": "smillst"}, "path": "framework/src/main/java/org/checkerframework/framework/type/DefaultTypeHierarchy.java", "diffHunk": "@@ -247,8 +249,13 @@ protected boolean isAnnoSubtype(\n             @Nullable AnnotationMirror subtypeAnno,\n             @Nullable AnnotationMirror supertypeAnno,\n             boolean annosCanBeEmtpy) {\n-        if (annosCanBeEmtpy && subtypeAnno == null && supertypeAnno == null) {\n-            return true;\n+        if (annosCanBeEmtpy) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dd0199690f79a3a11238a25fe110ade8a9fb65c"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15f9ffbbaf72835294e4f2d019eaa48b98ba90a6", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/15f9ffbbaf72835294e4f2d019eaa48b98ba90a6", "committedDate": "2020-11-09T18:58:46Z", "message": "Tweak wording"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5254d570586b4ea9d3c688ae35c2fda475eb9c3f", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/5254d570586b4ea9d3c688ae35c2fda475eb9c3f", "committedDate": "2020-11-12T17:42:07Z", "message": "Remove methods."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d81b041dd55bf4509821811a387403c01de69a44", "author": {"user": {"login": "smillst", "name": "Suzanne Millstein"}}, "url": "https://github.com/typetools/checker-framework/commit/d81b041dd55bf4509821811a387403c01de69a44", "committedDate": "2020-11-12T17:42:20Z", "message": "Merge remote-tracking branch 'origin/master' into defaulttypehierarchy-optimization"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MzM2Nzg0", "url": "https://github.com/typetools/checker-framework/pull/3882#pullrequestreview-529336784", "createdAt": "2020-11-12T17:44:42Z", "commit": {"oid": "d81b041dd55bf4509821811a387403c01de69a44"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNzo0NDo0MlrOHyGbzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNzo0NDo0MlrOHyGbzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI5NjI3MQ==", "bodyText": "Both this method and isAnnoSubtype either called with annosCanBeEmtpy = false or the code checked that the annotations were nonnull before calling them.  So I just deleted these methods.", "url": "https://github.com/typetools/checker-framework/pull/3882#discussion_r522296271", "createdAt": "2020-11-12T17:44:42Z", "author": {"login": "smillst"}, "path": "framework/src/main/java/org/checkerframework/framework/type/DefaultTypeHierarchy.java", "diffHunk": "@@ -209,80 +208,18 @@ protected String defaultErrorMessage(\n      *     supertype for the current top.\n      */\n     protected boolean isPrimarySubtype(AnnotatedTypeMirror subtype, AnnotatedTypeMirror supertype) {\n-        return isPrimarySubtype(subtype, supertype, false);\n-    }\n-\n-    /**\n-     * Compare the primary annotations of {@code subtype} and {@code supertype}.\n-     *\n-     * @param annosCanBeEmtpy indicates that annotations may be missing from the typemirror\n-     * @return true if the primary annotation on subtype {@literal <:} primary annotation on\n-     *     supertype for the current top or both annotations are null. False is returned if one\n-     *     annotation is null and the other is not.\n-     */\n-    protected boolean isPrimarySubtype(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d81b041dd55bf4509821811a387403c01de69a44"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20a1e3c4e7f1006b9d5ccd18c30751195471684c", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/20a1e3c4e7f1006b9d5ccd18c30751195471684c", "committedDate": "2020-11-12T18:10:51Z", "message": "Add Javadoc"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2500, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}