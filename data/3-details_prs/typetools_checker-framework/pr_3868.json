{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3MDE3MzAz", "number": 3868, "title": "Infer method declaration annotations", "bodyText": "", "createdAt": "2020-11-06T22:54:21Z", "url": "https://github.com/typetools/checker-framework/pull/3868", "merged": true, "mergeCommit": {"oid": "91d61333ade3692071cd9fefc392118868a6083d"}, "closed": true, "closedAt": "2020-11-09T18:52:44Z", "author": {"login": "mernst"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZVR3qAH2gAyNTE3MDE3MzAzOjNhOTU0N2QxYTkxM2M3OGQ0MWEyMjVkOWQ5Nzg1YWVkMjY5N2I4ODQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABda5aDrgH2gAyNTE3MDE3MzAzOjBjY2E5ZTY4NDRiZjNjYWRlY2VhZGYyZTM3YjAzMmY5M2ZkZjEwNmQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3a9547d1a913c78d41a225d9d9785aed2697b884", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/3a9547d1a913c78d41a225d9d9785aed2697b884", "committedDate": "2020-11-04T22:12:52Z", "message": "Infer method declaration annotations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f79cc97b43b484daae881d14269f87f0990cb84c", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/f79cc97b43b484daae881d14269f87f0990cb84c", "committedDate": "2020-11-04T22:45:16Z", "message": "Add field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4ac4f1a4d25ed6a6eb80ad8e676310cfe4c0f11", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/e4ac4f1a4d25ed6a6eb80ad8e676310cfe4c0f11", "committedDate": "2020-11-06T18:04:50Z", "message": "Merge ../checker-framework-branch-master into infer-method-declaration-annotations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64c43affbf3d08cb91d1b0ca57ac6a775f54dff1", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/64c43affbf3d08cb91d1b0ca57ac6a775f54dff1", "committedDate": "2020-11-06T21:56:51Z", "message": "Merge ../checker-framework-branch-master into infer-method-declaration-annotations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NTMzNDA3", "url": "https://github.com/typetools/checker-framework/pull/3868#pullrequestreview-526533407", "createdAt": "2020-11-09T18:25:43Z", "commit": {"oid": "64c43affbf3d08cb91d1b0ca57ac6a775f54dff1"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxODoyNTo0M1rOHv70aA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxODoyNjozMVrOHv72LQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAyNTE5Mg==", "bodyText": "This should be removed or commented out.", "url": "https://github.com/typetools/checker-framework/pull/3868#discussion_r520025192", "createdAt": "2020-11-09T18:25:43Z", "author": {"login": "smillst"}, "path": "checker/src/main/java/org/checkerframework/checker/formatter/FormatterVisitor.java", "diffHunk": "@@ -126,6 +127,15 @@ public Void visitMethodInvocation(MethodInvocationTree node, Void p) {\n                         break;\n                 }\n             }\n+\n+            // Support -Ainfer command-line argument\n+            WholeProgramInference wpi = atypeFactory.getWholeProgramInference();\n+            if (wpi != null && forwardsArguments(node, enclosingMethod)) {\n+                System.out.printf(\"forwardsArguments: %s %s%n\", node, enclosingMethod);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c43affbf3d08cb91d1b0ca57ac6a775f54dff1"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAyNTY0NQ==", "bodyText": "This should probably be remove/commented out.", "url": "https://github.com/typetools/checker-framework/pull/3868#discussion_r520025645", "createdAt": "2020-11-09T18:26:31Z", "author": {"login": "smillst"}, "path": "framework/src/main/java/org/checkerframework/common/wholeprograminference/WholeProgramInferenceScenes.java", "diffHunk": "@@ -440,6 +441,27 @@ public void updateFromReturn(\n         }\n     }\n \n+    @Override\n+    public void addMethodDeclarationAnnotation(ExecutableElement methodElt, AnnotationMirror anno) {\n+\n+        // do not infer types for code that isn't presented as source\n+        if (!ElementUtils.isElementFromSourceCode(methodElt)) {\n+            return;\n+        }\n+\n+        String className = getEnclosingClassName(methodElt);\n+        String jaifPath = storage.getJaifPath(className);\n+        AClass clazz =\n+                storage.getAClass(className, jaifPath, ((MethodSymbol) methodElt).enclClass());\n+        AMethod method = clazz.methods.getVivify(JVMNames.getJVMMethodSignature(methodElt));\n+\n+        scenelib.annotations.Annotation sceneAnno =\n+                AnnotationConverter.annotationMirrorToAnnotation(anno);\n+        method.tlAnnotationsHere.add(sceneAnno);\n+        System.out.printf(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c43affbf3d08cb91d1b0ca57ac6a775f54dff1"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2aeeed73d4687f216dd346df05314ad178e25c72", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/2aeeed73d4687f216dd346df05314ad178e25c72", "committedDate": "2020-11-09T18:50:31Z", "message": "Remove debugging output"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cca9e6844bf3cadeceadf2e37b032f93fdf106d", "author": {"user": {"login": "mernst", "name": "Michael Ernst"}}, "url": "https://github.com/typetools/checker-framework/commit/0cca9e6844bf3cadeceadf2e37b032f93fdf106d", "committedDate": "2020-11-09T18:52:19Z", "message": "Tweak comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2491, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}