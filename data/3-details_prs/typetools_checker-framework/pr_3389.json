{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2MDQzOTc1", "number": 3389, "title": "Handle while true (Fixes #3249)", "bodyText": "This PR fixes both issue #3249 and issue #1727, by adapting the CFG in the following way:\nIf the loop condition is checked to be a constant true (according to the same logic in javac flow analysis), then the loop condition does not have an else-branch, i.e. the block holding the loop condition is directly followed by the one holding the loop entry, instead of followed by a conditional block.\nFixes #1727 and Fixes #3249`", "createdAt": "2020-06-17T19:13:11Z", "url": "https://github.com/typetools/checker-framework/pull/3389", "merged": true, "mergeCommit": {"oid": "c5f2eb888002a53b9c3c1902cffde42e21aad9c9"}, "closed": true, "closedAt": "2020-06-30T15:33:16Z", "author": {"login": "d367wang"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsMlzTAH2gAyNDM2MDQzOTc1OjMzZWMyZGIxYWZiYmYwYzFlN2ZjMjRhY2IxNDkxYmRhMWE0YjQwNWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwXbpuAFqTQ0MDEzODEzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "33ec2db1afbbf0c1e7fc24acb1491bda1a4b405e", "author": {"user": {"login": "d367wang", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/33ec2db1afbbf0c1e7fc24acb1491bda1a4b405e", "committedDate": "2020-06-17T16:38:54Z", "message": "adapt while(true) logic"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyODc3NTc4", "url": "https://github.com/typetools/checker-framework/pull/3389#pullrequestreview-432877578", "createdAt": "2020-06-18T01:20:54Z", "commit": {"oid": "33ec2db1afbbf0c1e7fc24acb1491bda1a4b405e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2OTY3NDMz", "url": "https://github.com/typetools/checker-framework/pull/3389#pullrequestreview-436967433", "createdAt": "2020-06-24T20:06:00Z", "commit": {"oid": "33ec2db1afbbf0c1e7fc24acb1491bda1a4b405e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQyMDowNjowMFrOGohQUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQyMDoxMDoxMVrOGohYhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE0MTA3NA==", "bodyText": "true is a literal not a constant. So this should say Determine whether loop condition is the boolean literal \"true\",.   You've used constant instead of literal in other places in this pull request.  Please change all uses.", "url": "https://github.com/typetools/checker-framework/pull/3389#discussion_r445141074", "createdAt": "2020-06-24T20:06:00Z", "author": {"login": "smillst"}, "path": "dataflow/src/main/java/org/checkerframework/dataflow/cfg/CFGBuilder.java", "diffHunk": "@@ -4913,15 +4915,30 @@ public Node visitWhileLoop(WhileLoopTree tree, Void p) {\n             // Condition\n             addLabelForNextNode(conditionStart);\n             assert tree.getCondition() != null;\n+            // Determine whether loop condition is a constant true, according to the compiler logic.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33ec2db1afbbf0c1e7fc24acb1491bda1a4b405e"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE0MzE3NQ==", "bodyText": "This method works for any tree, even if that tree is not a loop condition.  We might find uses for this method outside of this class, would you please move it to TreeUtils and rename it to isLiteralTrue.", "url": "https://github.com/typetools/checker-framework/pull/3389#discussion_r445143175", "createdAt": "2020-06-24T20:10:11Z", "author": {"login": "smillst"}, "path": "dataflow/src/main/java/org/checkerframework/dataflow/cfg/CFGBuilder.java", "diffHunk": "@@ -4985,6 +5002,35 @@ public Node visitOther(Tree tree, Void p) {\n         }\n     }\n \n+    /**\n+     * Determine whether loop condition {@link JCTree} is a constant true, according to the compiler", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33ec2db1afbbf0c1e7fc24acb1491bda1a4b405e"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a196f0af63569a9b25427411977ef34073dfe15", "author": {"user": {"login": "d367wang", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/7a196f0af63569a9b25427411977ef34073dfe15", "committedDate": "2020-06-27T22:50:23Z", "message": "improve comment; create isExprConstTrue in TreeUtils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88fd853b1cfe3d5e534a29d8ed5dbb5db9969d57", "author": {"user": {"login": "d367wang", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/88fd853b1cfe3d5e534a29d8ed5dbb5db9969d57", "committedDate": "2020-06-27T22:52:15Z", "message": "Merge branch 'master' of https://github.com/typetools/checker-framework into issue-3249"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "394a78b3f1bff9600a2371390a297e7fa4581883", "author": {"user": {"login": "d367wang", "name": null}}, "url": "https://github.com/typetools/checker-framework/commit/394a78b3f1bff9600a2371390a297e7fa4581883", "committedDate": "2020-06-28T00:05:40Z", "message": "edit Javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMTM4MTMx", "url": "https://github.com/typetools/checker-framework/pull/3389#pullrequestreview-440138131", "createdAt": "2020-06-30T15:32:28Z", "commit": {"oid": "394a78b3f1bff9600a2371390a297e7fa4581883"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2845, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}