{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1NzMwMDcy", "number": 592, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNDoyOTo1M1rOE8Pbag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjoyMTozM1rOE8SzQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjAyNzk0OnYy", "diffSide": "RIGHT", "path": "ui/main/src/app/app.component.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNDoyOTo1M1rOH4P4cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjo1MzowM1rOH4Wl3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc0MjUxMg==", "bodyText": "Need to skip(5) instead of skip(4) as there is one more step", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528742512", "createdAt": "2020-11-23T14:29:53Z", "author": {"login": "freddidierRTE"}, "path": "ui/main/src/app/app.component.ts", "diffHunk": "@@ -119,6 +119,7 @@ export class AppComponent implements OnInit {\n             this.userService.loadUserWithPerimetersData(),\n             this.entitiesService.loadAllEntitiesData(),\n             this.processesService.loadAllProcesses(),\n+            this.processesService.loadProcessGroups(),\n             this.processesService.areTranslationsLoaded(),\n             this.cardService.initSubscription)\n             .pipe(skip(4)) // Need to wait for all initialization to complete before loading main components of the application", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg1MjQ0Ng==", "bodyText": "Done", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528852446", "createdAt": "2020-11-23T16:53:03Z", "author": {"login": "vlo-rte"}, "path": "ui/main/src/app/app.component.ts", "diffHunk": "@@ -119,6 +119,7 @@ export class AppComponent implements OnInit {\n             this.userService.loadUserWithPerimetersData(),\n             this.entitiesService.loadAllEntitiesData(),\n             this.processesService.loadAllProcesses(),\n+            this.processesService.loadProcessGroups(),\n             this.processesService.areTranslationsLoaded(),\n             this.cardService.initSubscription)\n             .pipe(skip(4)) // Need to wait for all initialization to complete before loading main components of the application", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc0MjUxMg=="}, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjIwOTIwOnYy", "diffSide": "RIGHT", "path": "ui/main/src/app/components/navbar/navbar.component.html", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNTowODoyN1rOH4Rojg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMjo0MDo1NVrOH4_B_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc3MTIxNA==", "bodyText": "Add a parameter in web-ui.json to hide/show the menu", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528771214", "createdAt": "2020-11-23T15:08:27Z", "author": {"login": "freddidierRTE"}, "path": "ui/main/src/app/components/navbar/navbar.component.html", "diffHunk": "@@ -102,6 +102,16 @@\n                     translate\n             >menu.settings</a>\n           </div>\n+\n+          <div class=\"dropdown-item\" [class.active]=\"currentPath && 'feedconfiguration' === currentPath[1]\">\n+            <a\n+                    class=\"nav-link opfab-menu-link text-decoration-none\"\n+                    routerLink=\"/feedconfiguration\"\n+                    routerLinkActive #rla=\"routerLinkActive\"\n+                    translate\n+            >menu.feedConfiguration</a>\n+          </div>\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTUxNTAwNA==", "bodyText": "Done", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r529515004", "createdAt": "2020-11-24T12:40:55Z", "author": {"login": "vlo-rte"}, "path": "ui/main/src/app/components/navbar/navbar.component.html", "diffHunk": "@@ -102,6 +102,16 @@\n                     translate\n             >menu.settings</a>\n           </div>\n+\n+          <div class=\"dropdown-item\" [class.active]=\"currentPath && 'feedconfiguration' === currentPath[1]\">\n+            <a\n+                    class=\"nav-link opfab-menu-link text-decoration-none\"\n+                    routerLink=\"/feedconfiguration\"\n+                    routerLinkActive #rla=\"routerLinkActive\"\n+                    translate\n+            >menu.feedConfiguration</a>\n+          </div>\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc3MTIxNA=="}, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjIzMTcwOnYy", "diffSide": "RIGHT", "path": "ui/main/src/app/services/processes.service.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNToxMzoxMFrOH4R2cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjo1NDo0MFrOH4WqNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc3NDc3MA==", "bodyText": "In log , 'An error occurred when loading processGroup'", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528774770", "createdAt": "2020-11-23T15:13:10Z", "author": {"login": "freddidierRTE"}, "path": "ui/main/src/app/services/processes.service.ts", "diffHunk": "@@ -88,6 +91,22 @@ export class ProcessesService {\n                 ));\n     }\n \n+    public loadProcessGroups(): Observable<any> {\n+        return this.queryProcessGroups()\n+            .pipe(\n+                map(processGroupsFile => {\n+                        if (!!processGroupsFile) {\n+                            this.processGroups = processGroupsFile.groups;\n+\n+                            for (const language in processGroupsFile.locale)\n+                                 this.translateService.setTranslation(language, processGroupsFile.locale[language], true);\n+\n+                            console.log(new Date().toISOString(), 'List of process groups loaded');\n+                        }\n+                    }, (error) => console.error(new Date().toISOString(), 'an error occurred', error)\n+                ));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg1MzU1Ng==", "bodyText": "Done", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528853556", "createdAt": "2020-11-23T16:54:40Z", "author": {"login": "vlo-rte"}, "path": "ui/main/src/app/services/processes.service.ts", "diffHunk": "@@ -88,6 +91,22 @@ export class ProcessesService {\n                 ));\n     }\n \n+    public loadProcessGroups(): Observable<any> {\n+        return this.queryProcessGroups()\n+            .pipe(\n+                map(processGroupsFile => {\n+                        if (!!processGroupsFile) {\n+                            this.processGroups = processGroupsFile.groups;\n+\n+                            for (const language in processGroupsFile.locale)\n+                                 this.translateService.setTranslation(language, processGroupsFile.locale[language], true);\n+\n+                            console.log(new Date().toISOString(), 'List of process groups loaded');\n+                        }\n+                    }, (error) => console.error(new Date().toISOString(), 'an error occurred', error)\n+                ));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc3NDc3MA=="}, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjI2OTYyOnYy", "diffSide": "RIGHT", "path": "ui/main/src/app/modules/settings/settings.module.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNToyMToyNlrOH4SOYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjo1NjozNFrOH4Wvaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4MDg5Ng==", "bodyText": "Why adding this export ? it seems not used in the new dev", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528780896", "createdAt": "2020-11-23T15:21:26Z", "author": {"login": "freddidierRTE"}, "path": "ui/main/src/app/modules/settings/settings.module.ts", "diffHunk": "@@ -31,6 +31,9 @@ import { CheckboxSettingComponent } from './components/settings/checkbox-setting\n         , MultiSettingsComponent\n         , TypeAheadSettingsComponent\n         , CheckboxSettingComponent],\n+    exports: [\n+        CheckboxSettingComponent\n+    ],", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg1NDg5MQ==", "bodyText": "Done. Export deleted.", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528854891", "createdAt": "2020-11-23T16:56:34Z", "author": {"login": "vlo-rte"}, "path": "ui/main/src/app/modules/settings/settings.module.ts", "diffHunk": "@@ -31,6 +31,9 @@ import { CheckboxSettingComponent } from './components/settings/checkbox-setting\n         , MultiSettingsComponent\n         , TypeAheadSettingsComponent\n         , CheckboxSettingComponent],\n+    exports: [\n+        CheckboxSettingComponent\n+    ],", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4MDg5Ng=="}, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjI5Mjk3OnYy", "diffSide": "RIGHT", "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNToyNjoyMVrOH4Sc8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjo1OToyMVrOH4W3Kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4NDYyNw==", "bodyText": "Not used --> to remove", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528784627", "createdAt": "2020-11-23T15:26:21Z", "author": {"login": "freddidierRTE"}, "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.ts", "diffHunk": "@@ -0,0 +1,216 @@\n+/* Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * See AUTHORS.txt\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ * SPDX-License-Identifier: MPL-2.0\n+ * This file is part of the OperatorFabric project.\n+ */\n+\n+import {Component, OnDestroy, OnInit} from '@angular/core';\n+import { Store } from '@ngrx/store';\n+import { AppState } from '@ofStore/index';\n+import { UserService } from '@ofServices/user.service';\n+import { Process } from '@ofModel/processes.model';\n+import { NgbModal } from '@ng-bootstrap/ng-bootstrap';\n+import { NgbModalRef } from '@ng-bootstrap/ng-bootstrap/modal/modal-ref';\n+import { UserWithPerimeters } from '@ofModel/userWithPerimeters.model';\n+import { ProcessesService } from '@ofServices/processes.service';\n+import { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\n+import { TranslateService } from '@ngx-translate/core';\n+import {SettingsService} from '@ofServices/settings.service';\n+import {Subject} from 'rxjs';\n+\n+\n+class Message {\n+    text: string;\n+    display: boolean;\n+}\n+\n+function getI18nPrefixFromProcess(process: Process): string {\n+    return process.id + '.' + process.version + '.';\n+}\n+\n+@Component({\n+    selector: 'of-feedconfiguration',\n+    templateUrl: './feedconfiguration.component.html',\n+    styleUrls: ['./feedconfiguration.component.scss']\n+})\n+\n+export class FeedconfigurationComponent implements OnInit, OnDestroy {\n+    feedConfigurationForm: FormGroup;\n+\n+    processesDefinition: Process[];\n+    processGroups: {idGroup: string, processes: string[]}[];\n+    processesWithoutGroup: string[];\n+    currentUserWithPerimeters: UserWithPerimeters;\n+    processesStatesLabels: Map<string, { processLabel: string,\n+                                           states:\n+                                               { stateLabel: string,\n+                                                 stateControlIndex: number\n+                                               }[]\n+                                         }>;\n+    preparedListOfProcessesStates: { processId: string,\n+                                     stateId: string }[];\n+\n+    modalRef: NgbModalRef;\n+\n+    public displaySendResultOk = false;\n+    public displaySendResultError = false;\n+    messageAfterSavingSettings: string;\n+\n+    unsubscribe$: Subject<void> = new Subject<void>();\n+\n+    constructor(private formBuilder: FormBuilder,\n+                private store: Store<AppState>,\n+                private userService: UserService,\n+                private processesService: ProcessesService,\n+                private modalService: NgbModal,\n+                private translateService: TranslateService,\n+                private settingsService: SettingsService,\n+    ) {\n+        this.processesDefinition = this.processesService.getAllProcesses();\n+        this.processGroups = this.processesService.getProcessGroups();\n+        this.currentUserWithPerimeters = this.userService.getCurrentUserWithPerimeters();\n+        this.feedConfigurationForm = this.formBuilder.group({\n+            processesStates: new FormArray([])\n+        });\n+        this.processesStatesLabels = new Map<string, {processLabel: string,\n+                                                        states:\n+                                                            { stateLabel: string,\n+                                                              stateControlIndex: number\n+                                                            }[]\n+                                                       }> ();\n+        this.preparedListOfProcessesStates = [];\n+        this.processesWithoutGroup = [];\n+\n+        this.computePreparedListOfProcessesStatesAndProcessesStatesLabels();\n+        this.makeProcessesWithoutGroup();\n+        this.addCheckboxesInFormArray();\n+    }\n+\n+    get processesStatesFormArray() {\n+        return this.feedConfigurationForm.controls.processesStates as FormArray;\n+    }\n+\n+    private findInProcessGroups(processIdToFind: string): boolean {\n+        for (const processGroup of this.processGroups.values()) {\n+            if (processGroup.processes.includes(processIdToFind))\n+                return true;\n+        }\n+        return false;\n+    }\n+\n+    private makeProcessesWithoutGroup() {\n+        this.processesDefinition.forEach(process => {\n+            if (! this.findInProcessGroups(process.id))\n+                this.processesWithoutGroup.push(process.id);\n+        });\n+    }\n+\n+    private addCheckboxesInFormArray() {\n+\n+        const processesStatesNotNotified = ((!! this.currentUserWithPerimeters.processesStatesNotNotified) ?\n+                                               this.currentUserWithPerimeters.processesStatesNotNotified :\n+                                               null);\n+\n+        this.processesDefinition.forEach(process => {\n+            for (const key in process.states) {\n+                const notNotifiedStatesForThisProcess = ((!! processesStatesNotNotified) ? processesStatesNotNotified[process.id] : null);\n+\n+                let isChecked = true;\n+                if ((!! notNotifiedStatesForThisProcess) && (notNotifiedStatesForThisProcess.includes(key)))\n+                    isChecked = false;\n+                this.processesStatesFormArray.push(new FormControl(isChecked));\n+            }\n+        });\n+    }\n+\n+    private computePreparedListOfProcessesStatesAndProcessesStatesLabels() {\n+        if (this.processesDefinition) {\n+            let stateControlIndex = 0;\n+\n+            for (const process of this.processesDefinition) {\n+\n+                const statesArray: { stateLabel: string, stateControlIndex: number }[]\n+                    = new Array<{stateLabel: string, stateControlIndex: number}>();\n+\n+                let processLabel = process.id;\n+                if (!!process.name)\n+                    this.translateService.get(getI18nPrefixFromProcess(process) + process.name)\n+                        .subscribe(result => processLabel = result);\n+\n+                for (const key in process.states) {\n+                    const value = process.states[key];\n+\n+                    let stateLabel = key;\n+                    if (!!value.name)\n+                        this.translateService.get(getI18nPrefixFromProcess(process) + value.name)\n+                            .subscribe(result => stateLabel = result);\n+\n+                    statesArray.push({stateLabel: stateLabel, stateControlIndex: stateControlIndex});\n+                    this.preparedListOfProcessesStates.push({\n+                        processId: process.id,\n+                        stateId: key});\n+                    stateControlIndex++;\n+                }\n+                this.processesStatesLabels.set(process.id, {processLabel: processLabel,\n+                                                              states: statesArray});\n+            }\n+        }\n+    }\n+\n+    ngOnInit() {\n+    }\n+\n+    ngOnDestroy() {\n+        this.unsubscribe$.next();\n+        this.unsubscribe$.complete();\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 169}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg1Njg3NA==", "bodyText": "Done. Removed.", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528856874", "createdAt": "2020-11-23T16:59:21Z", "author": {"login": "vlo-rte"}, "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.ts", "diffHunk": "@@ -0,0 +1,216 @@\n+/* Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * See AUTHORS.txt\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ * SPDX-License-Identifier: MPL-2.0\n+ * This file is part of the OperatorFabric project.\n+ */\n+\n+import {Component, OnDestroy, OnInit} from '@angular/core';\n+import { Store } from '@ngrx/store';\n+import { AppState } from '@ofStore/index';\n+import { UserService } from '@ofServices/user.service';\n+import { Process } from '@ofModel/processes.model';\n+import { NgbModal } from '@ng-bootstrap/ng-bootstrap';\n+import { NgbModalRef } from '@ng-bootstrap/ng-bootstrap/modal/modal-ref';\n+import { UserWithPerimeters } from '@ofModel/userWithPerimeters.model';\n+import { ProcessesService } from '@ofServices/processes.service';\n+import { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\n+import { TranslateService } from '@ngx-translate/core';\n+import {SettingsService} from '@ofServices/settings.service';\n+import {Subject} from 'rxjs';\n+\n+\n+class Message {\n+    text: string;\n+    display: boolean;\n+}\n+\n+function getI18nPrefixFromProcess(process: Process): string {\n+    return process.id + '.' + process.version + '.';\n+}\n+\n+@Component({\n+    selector: 'of-feedconfiguration',\n+    templateUrl: './feedconfiguration.component.html',\n+    styleUrls: ['./feedconfiguration.component.scss']\n+})\n+\n+export class FeedconfigurationComponent implements OnInit, OnDestroy {\n+    feedConfigurationForm: FormGroup;\n+\n+    processesDefinition: Process[];\n+    processGroups: {idGroup: string, processes: string[]}[];\n+    processesWithoutGroup: string[];\n+    currentUserWithPerimeters: UserWithPerimeters;\n+    processesStatesLabels: Map<string, { processLabel: string,\n+                                           states:\n+                                               { stateLabel: string,\n+                                                 stateControlIndex: number\n+                                               }[]\n+                                         }>;\n+    preparedListOfProcessesStates: { processId: string,\n+                                     stateId: string }[];\n+\n+    modalRef: NgbModalRef;\n+\n+    public displaySendResultOk = false;\n+    public displaySendResultError = false;\n+    messageAfterSavingSettings: string;\n+\n+    unsubscribe$: Subject<void> = new Subject<void>();\n+\n+    constructor(private formBuilder: FormBuilder,\n+                private store: Store<AppState>,\n+                private userService: UserService,\n+                private processesService: ProcessesService,\n+                private modalService: NgbModal,\n+                private translateService: TranslateService,\n+                private settingsService: SettingsService,\n+    ) {\n+        this.processesDefinition = this.processesService.getAllProcesses();\n+        this.processGroups = this.processesService.getProcessGroups();\n+        this.currentUserWithPerimeters = this.userService.getCurrentUserWithPerimeters();\n+        this.feedConfigurationForm = this.formBuilder.group({\n+            processesStates: new FormArray([])\n+        });\n+        this.processesStatesLabels = new Map<string, {processLabel: string,\n+                                                        states:\n+                                                            { stateLabel: string,\n+                                                              stateControlIndex: number\n+                                                            }[]\n+                                                       }> ();\n+        this.preparedListOfProcessesStates = [];\n+        this.processesWithoutGroup = [];\n+\n+        this.computePreparedListOfProcessesStatesAndProcessesStatesLabels();\n+        this.makeProcessesWithoutGroup();\n+        this.addCheckboxesInFormArray();\n+    }\n+\n+    get processesStatesFormArray() {\n+        return this.feedConfigurationForm.controls.processesStates as FormArray;\n+    }\n+\n+    private findInProcessGroups(processIdToFind: string): boolean {\n+        for (const processGroup of this.processGroups.values()) {\n+            if (processGroup.processes.includes(processIdToFind))\n+                return true;\n+        }\n+        return false;\n+    }\n+\n+    private makeProcessesWithoutGroup() {\n+        this.processesDefinition.forEach(process => {\n+            if (! this.findInProcessGroups(process.id))\n+                this.processesWithoutGroup.push(process.id);\n+        });\n+    }\n+\n+    private addCheckboxesInFormArray() {\n+\n+        const processesStatesNotNotified = ((!! this.currentUserWithPerimeters.processesStatesNotNotified) ?\n+                                               this.currentUserWithPerimeters.processesStatesNotNotified :\n+                                               null);\n+\n+        this.processesDefinition.forEach(process => {\n+            for (const key in process.states) {\n+                const notNotifiedStatesForThisProcess = ((!! processesStatesNotNotified) ? processesStatesNotNotified[process.id] : null);\n+\n+                let isChecked = true;\n+                if ((!! notNotifiedStatesForThisProcess) && (notNotifiedStatesForThisProcess.includes(key)))\n+                    isChecked = false;\n+                this.processesStatesFormArray.push(new FormControl(isChecked));\n+            }\n+        });\n+    }\n+\n+    private computePreparedListOfProcessesStatesAndProcessesStatesLabels() {\n+        if (this.processesDefinition) {\n+            let stateControlIndex = 0;\n+\n+            for (const process of this.processesDefinition) {\n+\n+                const statesArray: { stateLabel: string, stateControlIndex: number }[]\n+                    = new Array<{stateLabel: string, stateControlIndex: number}>();\n+\n+                let processLabel = process.id;\n+                if (!!process.name)\n+                    this.translateService.get(getI18nPrefixFromProcess(process) + process.name)\n+                        .subscribe(result => processLabel = result);\n+\n+                for (const key in process.states) {\n+                    const value = process.states[key];\n+\n+                    let stateLabel = key;\n+                    if (!!value.name)\n+                        this.translateService.get(getI18nPrefixFromProcess(process) + value.name)\n+                            .subscribe(result => stateLabel = result);\n+\n+                    statesArray.push({stateLabel: stateLabel, stateControlIndex: stateControlIndex});\n+                    this.preparedListOfProcessesStates.push({\n+                        processId: process.id,\n+                        stateId: key});\n+                    stateControlIndex++;\n+                }\n+                this.processesStatesLabels.set(process.id, {processLabel: processLabel,\n+                                                              states: statesArray});\n+            }\n+        }\n+    }\n+\n+    ngOnInit() {\n+    }\n+\n+    ngOnDestroy() {\n+        this.unsubscribe$.next();\n+        this.unsubscribe$.complete();\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4NDYyNw=="}, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 169}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjM5MTQ2OnYy", "diffSide": "RIGHT", "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.scss", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNTo0NTo0N1rOH4TYsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNzowMTowNlrOH4W8Kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc5OTkyMA==", "bodyText": ".modal-body{\nbackground-color: var(--opfab-bgcolor);\ncolor: var(--opfab-textcolor);\n}\n.modal-header{\nbackground-color: var(--opfab-bgcolor);\ncolor: var(--opfab-textcolor);\n}", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528799920", "createdAt": "2020-11-23T15:45:47Z", "author": {"login": "freddidierRTE"}, "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.scss", "diffHunk": "@@ -0,0 +1,19 @@\n+/* Copyright (c) 2018-2020, RTE (http://www.rte-france.com)\n+ * See AUTHORS.txt\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ * SPDX-License-Identifier: MPL-2.0\n+ * This file is part of the OperatorFabric project.\n+ */\n+\n+.modal-body{\n+  background-color: var(--opfab-lightcard-detail-bgcolor);\n+  color: var(--opfab-lightcard-detail-textcolor);\n+}\n+\n+\n+.modal-header{\n+  background-color: var(--opfab-lightcard-detail-bgcolor);\n+  color: var(--opfab-lightcard-detail-textcolor);\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg1ODE1NA==", "bodyText": "Done.", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528858154", "createdAt": "2020-11-23T17:01:06Z", "author": {"login": "vlo-rte"}, "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.scss", "diffHunk": "@@ -0,0 +1,19 @@\n+/* Copyright (c) 2018-2020, RTE (http://www.rte-france.com)\n+ * See AUTHORS.txt\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ * SPDX-License-Identifier: MPL-2.0\n+ * This file is part of the OperatorFabric project.\n+ */\n+\n+.modal-body{\n+  background-color: var(--opfab-lightcard-detail-bgcolor);\n+  color: var(--opfab-lightcard-detail-textcolor);\n+}\n+\n+\n+.modal-header{\n+  background-color: var(--opfab-lightcard-detail-bgcolor);\n+  color: var(--opfab-lightcard-detail-textcolor);\n+}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc5OTkyMA=="}, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjQzOTI5OnYy", "diffSide": "RIGHT", "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.module.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNTo1NTo0MVrOH4T1mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNzowMjoxN1rOH4W_Rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgwNzMyMw==", "bodyText": "This import seems not usefull", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528807323", "createdAt": "2020-11-23T15:55:41Z", "author": {"login": "freddidierRTE"}, "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.module.ts", "diffHunk": "@@ -0,0 +1,31 @@\n+/* Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * See AUTHORS.txt\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ * SPDX-License-Identifier: MPL-2.0\n+ * This file is part of the OperatorFabric project.\n+ */\n+\n+import {NgModule} from '@angular/core';\n+import {CommonModule} from '@angular/common';\n+import {FeedconfigurationRoutingModule} from './feedconfiguration-routing.module';\n+import {FeedconfigurationComponent} from './feedconfiguration.component';\n+import {FormsModule, ReactiveFormsModule} from '@angular/forms';\n+import {TranslateModule} from '@ngx-translate/core';\n+import {SettingsModule} from '../settings/settings.module';\n+\n+\n+@NgModule({\n+    declarations: [FeedconfigurationComponent],\n+    imports: [\n+        CommonModule,\n+        FormsModule,\n+        ReactiveFormsModule,\n+        TranslateModule,\n+        FeedconfigurationRoutingModule,\n+        SettingsModule\n+    ]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg1ODk1MQ==", "bodyText": "Done. Import removed.", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528858951", "createdAt": "2020-11-23T17:02:17Z", "author": {"login": "vlo-rte"}, "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.module.ts", "diffHunk": "@@ -0,0 +1,31 @@\n+/* Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * See AUTHORS.txt\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ * SPDX-License-Identifier: MPL-2.0\n+ * This file is part of the OperatorFabric project.\n+ */\n+\n+import {NgModule} from '@angular/core';\n+import {CommonModule} from '@angular/common';\n+import {FeedconfigurationRoutingModule} from './feedconfiguration-routing.module';\n+import {FeedconfigurationComponent} from './feedconfiguration.component';\n+import {FormsModule, ReactiveFormsModule} from '@angular/forms';\n+import {TranslateModule} from '@ngx-translate/core';\n+import {SettingsModule} from '../settings/settings.module';\n+\n+\n+@NgModule({\n+    declarations: [FeedconfigurationComponent],\n+    imports: [\n+        CommonModule,\n+        FormsModule,\n+        ReactiveFormsModule,\n+        TranslateModule,\n+        FeedconfigurationRoutingModule,\n+        SettingsModule\n+    ]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgwNzMyMw=="}, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjUyMTcwOnYy", "diffSide": "RIGHT", "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjowOToxNlrOH4UqmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMToyMzowNlrOH48WfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgyMDg4OA==", "bodyText": "this.addCheckboxesInFormArray() should be call i guess in the ngOnInit method . There is actually a bug when you change screen and return after to this screen , the checkbox selected and saved are not checked anymore", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528820888", "createdAt": "2020-11-23T16:09:16Z", "author": {"login": "freddidierRTE"}, "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.ts", "diffHunk": "@@ -0,0 +1,216 @@\n+/* Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * See AUTHORS.txt\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ * SPDX-License-Identifier: MPL-2.0\n+ * This file is part of the OperatorFabric project.\n+ */\n+\n+import {Component, OnDestroy, OnInit} from '@angular/core';\n+import { Store } from '@ngrx/store';\n+import { AppState } from '@ofStore/index';\n+import { UserService } from '@ofServices/user.service';\n+import { Process } from '@ofModel/processes.model';\n+import { NgbModal } from '@ng-bootstrap/ng-bootstrap';\n+import { NgbModalRef } from '@ng-bootstrap/ng-bootstrap/modal/modal-ref';\n+import { UserWithPerimeters } from '@ofModel/userWithPerimeters.model';\n+import { ProcessesService } from '@ofServices/processes.service';\n+import { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\n+import { TranslateService } from '@ngx-translate/core';\n+import {SettingsService} from '@ofServices/settings.service';\n+import {Subject} from 'rxjs';\n+\n+\n+class Message {\n+    text: string;\n+    display: boolean;\n+}\n+\n+function getI18nPrefixFromProcess(process: Process): string {\n+    return process.id + '.' + process.version + '.';\n+}\n+\n+@Component({\n+    selector: 'of-feedconfiguration',\n+    templateUrl: './feedconfiguration.component.html',\n+    styleUrls: ['./feedconfiguration.component.scss']\n+})\n+\n+export class FeedconfigurationComponent implements OnInit, OnDestroy {\n+    feedConfigurationForm: FormGroup;\n+\n+    processesDefinition: Process[];\n+    processGroups: {idGroup: string, processes: string[]}[];\n+    processesWithoutGroup: string[];\n+    currentUserWithPerimeters: UserWithPerimeters;\n+    processesStatesLabels: Map<string, { processLabel: string,\n+                                           states:\n+                                               { stateLabel: string,\n+                                                 stateControlIndex: number\n+                                               }[]\n+                                         }>;\n+    preparedListOfProcessesStates: { processId: string,\n+                                     stateId: string }[];\n+\n+    modalRef: NgbModalRef;\n+\n+    public displaySendResultOk = false;\n+    public displaySendResultError = false;\n+    messageAfterSavingSettings: string;\n+\n+    unsubscribe$: Subject<void> = new Subject<void>();\n+\n+    constructor(private formBuilder: FormBuilder,\n+                private store: Store<AppState>,\n+                private userService: UserService,\n+                private processesService: ProcessesService,\n+                private modalService: NgbModal,\n+                private translateService: TranslateService,\n+                private settingsService: SettingsService,\n+    ) {\n+        this.processesDefinition = this.processesService.getAllProcesses();\n+        this.processGroups = this.processesService.getProcessGroups();\n+        this.currentUserWithPerimeters = this.userService.getCurrentUserWithPerimeters();\n+        this.feedConfigurationForm = this.formBuilder.group({\n+            processesStates: new FormArray([])\n+        });\n+        this.processesStatesLabels = new Map<string, {processLabel: string,\n+                                                        states:\n+                                                            { stateLabel: string,\n+                                                              stateControlIndex: number\n+                                                            }[]\n+                                                       }> ();\n+        this.preparedListOfProcessesStates = [];\n+        this.processesWithoutGroup = [];\n+\n+        this.computePreparedListOfProcessesStatesAndProcessesStatesLabels();\n+        this.makeProcessesWithoutGroup();\n+        this.addCheckboxesInFormArray();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQ3MTEwMQ==", "bodyText": "Done.", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r529471101", "createdAt": "2020-11-24T11:23:06Z", "author": {"login": "vlo-rte"}, "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.ts", "diffHunk": "@@ -0,0 +1,216 @@\n+/* Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * See AUTHORS.txt\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ * SPDX-License-Identifier: MPL-2.0\n+ * This file is part of the OperatorFabric project.\n+ */\n+\n+import {Component, OnDestroy, OnInit} from '@angular/core';\n+import { Store } from '@ngrx/store';\n+import { AppState } from '@ofStore/index';\n+import { UserService } from '@ofServices/user.service';\n+import { Process } from '@ofModel/processes.model';\n+import { NgbModal } from '@ng-bootstrap/ng-bootstrap';\n+import { NgbModalRef } from '@ng-bootstrap/ng-bootstrap/modal/modal-ref';\n+import { UserWithPerimeters } from '@ofModel/userWithPerimeters.model';\n+import { ProcessesService } from '@ofServices/processes.service';\n+import { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\n+import { TranslateService } from '@ngx-translate/core';\n+import {SettingsService} from '@ofServices/settings.service';\n+import {Subject} from 'rxjs';\n+\n+\n+class Message {\n+    text: string;\n+    display: boolean;\n+}\n+\n+function getI18nPrefixFromProcess(process: Process): string {\n+    return process.id + '.' + process.version + '.';\n+}\n+\n+@Component({\n+    selector: 'of-feedconfiguration',\n+    templateUrl: './feedconfiguration.component.html',\n+    styleUrls: ['./feedconfiguration.component.scss']\n+})\n+\n+export class FeedconfigurationComponent implements OnInit, OnDestroy {\n+    feedConfigurationForm: FormGroup;\n+\n+    processesDefinition: Process[];\n+    processGroups: {idGroup: string, processes: string[]}[];\n+    processesWithoutGroup: string[];\n+    currentUserWithPerimeters: UserWithPerimeters;\n+    processesStatesLabels: Map<string, { processLabel: string,\n+                                           states:\n+                                               { stateLabel: string,\n+                                                 stateControlIndex: number\n+                                               }[]\n+                                         }>;\n+    preparedListOfProcessesStates: { processId: string,\n+                                     stateId: string }[];\n+\n+    modalRef: NgbModalRef;\n+\n+    public displaySendResultOk = false;\n+    public displaySendResultError = false;\n+    messageAfterSavingSettings: string;\n+\n+    unsubscribe$: Subject<void> = new Subject<void>();\n+\n+    constructor(private formBuilder: FormBuilder,\n+                private store: Store<AppState>,\n+                private userService: UserService,\n+                private processesService: ProcessesService,\n+                private modalService: NgbModal,\n+                private translateService: TranslateService,\n+                private settingsService: SettingsService,\n+    ) {\n+        this.processesDefinition = this.processesService.getAllProcesses();\n+        this.processGroups = this.processesService.getProcessGroups();\n+        this.currentUserWithPerimeters = this.userService.getCurrentUserWithPerimeters();\n+        this.feedConfigurationForm = this.formBuilder.group({\n+            processesStates: new FormArray([])\n+        });\n+        this.processesStatesLabels = new Map<string, {processLabel: string,\n+                                                        states:\n+                                                            { stateLabel: string,\n+                                                              stateControlIndex: number\n+                                                            }[]\n+                                                       }> ();\n+        this.preparedListOfProcessesStates = [];\n+        this.processesWithoutGroup = [];\n+\n+        this.computePreparedListOfProcessesStatesAndProcessesStatesLabels();\n+        this.makeProcessesWithoutGroup();\n+        this.addCheckboxesInFormArray();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgyMDg4OA=="}, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 89}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjU3ODM4OnYy", "diffSide": "RIGHT", "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjoyMTowOVrOH4VM2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNzowNjo0OFrOH4XK3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgyOTY1Ng==", "bodyText": "Put inside the FeedconfigurationComponent", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528829656", "createdAt": "2020-11-23T16:21:09Z", "author": {"login": "freddidierRTE"}, "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.ts", "diffHunk": "@@ -0,0 +1,216 @@\n+/* Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * See AUTHORS.txt\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ * SPDX-License-Identifier: MPL-2.0\n+ * This file is part of the OperatorFabric project.\n+ */\n+\n+import {Component, OnDestroy, OnInit} from '@angular/core';\n+import { Store } from '@ngrx/store';\n+import { AppState } from '@ofStore/index';\n+import { UserService } from '@ofServices/user.service';\n+import { Process } from '@ofModel/processes.model';\n+import { NgbModal } from '@ng-bootstrap/ng-bootstrap';\n+import { NgbModalRef } from '@ng-bootstrap/ng-bootstrap/modal/modal-ref';\n+import { UserWithPerimeters } from '@ofModel/userWithPerimeters.model';\n+import { ProcessesService } from '@ofServices/processes.service';\n+import { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\n+import { TranslateService } from '@ngx-translate/core';\n+import {SettingsService} from '@ofServices/settings.service';\n+import {Subject} from 'rxjs';\n+\n+\n+class Message {\n+    text: string;\n+    display: boolean;\n+}\n+\n+function getI18nPrefixFromProcess(process: Process): string {\n+    return process.id + '.' + process.version + '.';\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg2MTkxNg==", "bodyText": "Done.", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528861916", "createdAt": "2020-11-23T17:06:48Z", "author": {"login": "vlo-rte"}, "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.ts", "diffHunk": "@@ -0,0 +1,216 @@\n+/* Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * See AUTHORS.txt\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ * SPDX-License-Identifier: MPL-2.0\n+ * This file is part of the OperatorFabric project.\n+ */\n+\n+import {Component, OnDestroy, OnInit} from '@angular/core';\n+import { Store } from '@ngrx/store';\n+import { AppState } from '@ofStore/index';\n+import { UserService } from '@ofServices/user.service';\n+import { Process } from '@ofModel/processes.model';\n+import { NgbModal } from '@ng-bootstrap/ng-bootstrap';\n+import { NgbModalRef } from '@ng-bootstrap/ng-bootstrap/modal/modal-ref';\n+import { UserWithPerimeters } from '@ofModel/userWithPerimeters.model';\n+import { ProcessesService } from '@ofServices/processes.service';\n+import { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\n+import { TranslateService } from '@ngx-translate/core';\n+import {SettingsService} from '@ofServices/settings.service';\n+import {Subject} from 'rxjs';\n+\n+\n+class Message {\n+    text: string;\n+    display: boolean;\n+}\n+\n+function getI18nPrefixFromProcess(process: Process): string {\n+    return process.id + '.' + process.version + '.';\n+}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgyOTY1Ng=="}, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjU4MDQ4OnYy", "diffSide": "RIGHT", "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjoyMTozM1rOH4VOJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNzowODowMVrOH4XN0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgyOTk5MA==", "bodyText": "Not used --> to remove", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528829990", "createdAt": "2020-11-23T16:21:33Z", "author": {"login": "freddidierRTE"}, "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.ts", "diffHunk": "@@ -0,0 +1,216 @@\n+/* Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * See AUTHORS.txt\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ * SPDX-License-Identifier: MPL-2.0\n+ * This file is part of the OperatorFabric project.\n+ */\n+\n+import {Component, OnDestroy, OnInit} from '@angular/core';\n+import { Store } from '@ngrx/store';\n+import { AppState } from '@ofStore/index';\n+import { UserService } from '@ofServices/user.service';\n+import { Process } from '@ofModel/processes.model';\n+import { NgbModal } from '@ng-bootstrap/ng-bootstrap';\n+import { NgbModalRef } from '@ng-bootstrap/ng-bootstrap/modal/modal-ref';\n+import { UserWithPerimeters } from '@ofModel/userWithPerimeters.model';\n+import { ProcessesService } from '@ofServices/processes.service';\n+import { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\n+import { TranslateService } from '@ngx-translate/core';\n+import {SettingsService} from '@ofServices/settings.service';\n+import {Subject} from 'rxjs';\n+\n+\n+class Message {\n+    text: string;\n+    display: boolean;\n+}\n+\n+function getI18nPrefixFromProcess(process: Process): string {\n+    return process.id + '.' + process.version + '.';\n+}\n+\n+@Component({\n+    selector: 'of-feedconfiguration',\n+    templateUrl: './feedconfiguration.component.html',\n+    styleUrls: ['./feedconfiguration.component.scss']\n+})\n+\n+export class FeedconfigurationComponent implements OnInit, OnDestroy {\n+    feedConfigurationForm: FormGroup;\n+\n+    processesDefinition: Process[];\n+    processGroups: {idGroup: string, processes: string[]}[];\n+    processesWithoutGroup: string[];\n+    currentUserWithPerimeters: UserWithPerimeters;\n+    processesStatesLabels: Map<string, { processLabel: string,\n+                                           states:\n+                                               { stateLabel: string,\n+                                                 stateControlIndex: number\n+                                               }[]\n+                                         }>;\n+    preparedListOfProcessesStates: { processId: string,\n+                                     stateId: string }[];\n+\n+    modalRef: NgbModalRef;\n+\n+    public displaySendResultOk = false;\n+    public displaySendResultError = false;\n+    messageAfterSavingSettings: string;\n+\n+    unsubscribe$: Subject<void> = new Subject<void>();\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg2MjY3NA==", "bodyText": "Done.", "url": "https://github.com/opfab/operatorfabric-core/pull/592#discussion_r528862674", "createdAt": "2020-11-23T17:08:01Z", "author": {"login": "vlo-rte"}, "path": "ui/main/src/app/modules/feedconfiguration/feedconfiguration.component.ts", "diffHunk": "@@ -0,0 +1,216 @@\n+/* Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * See AUTHORS.txt\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ * SPDX-License-Identifier: MPL-2.0\n+ * This file is part of the OperatorFabric project.\n+ */\n+\n+import {Component, OnDestroy, OnInit} from '@angular/core';\n+import { Store } from '@ngrx/store';\n+import { AppState } from '@ofStore/index';\n+import { UserService } from '@ofServices/user.service';\n+import { Process } from '@ofModel/processes.model';\n+import { NgbModal } from '@ng-bootstrap/ng-bootstrap';\n+import { NgbModalRef } from '@ng-bootstrap/ng-bootstrap/modal/modal-ref';\n+import { UserWithPerimeters } from '@ofModel/userWithPerimeters.model';\n+import { ProcessesService } from '@ofServices/processes.service';\n+import { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\n+import { TranslateService } from '@ngx-translate/core';\n+import {SettingsService} from '@ofServices/settings.service';\n+import {Subject} from 'rxjs';\n+\n+\n+class Message {\n+    text: string;\n+    display: boolean;\n+}\n+\n+function getI18nPrefixFromProcess(process: Process): string {\n+    return process.id + '.' + process.version + '.';\n+}\n+\n+@Component({\n+    selector: 'of-feedconfiguration',\n+    templateUrl: './feedconfiguration.component.html',\n+    styleUrls: ['./feedconfiguration.component.scss']\n+})\n+\n+export class FeedconfigurationComponent implements OnInit, OnDestroy {\n+    feedConfigurationForm: FormGroup;\n+\n+    processesDefinition: Process[];\n+    processGroups: {idGroup: string, processes: string[]}[];\n+    processesWithoutGroup: string[];\n+    currentUserWithPerimeters: UserWithPerimeters;\n+    processesStatesLabels: Map<string, { processLabel: string,\n+                                           states:\n+                                               { stateLabel: string,\n+                                                 stateControlIndex: number\n+                                               }[]\n+                                         }>;\n+    preparedListOfProcessesStates: { processId: string,\n+                                     stateId: string }[];\n+\n+    modalRef: NgbModalRef;\n+\n+    public displaySendResultOk = false;\n+    public displaySendResultError = false;\n+    messageAfterSavingSettings: string;\n+\n+    unsubscribe$: Subject<void> = new Subject<void>();\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgyOTk5MA=="}, "originalCommit": {"oid": "cce70ebcd28a26f0758718b0f0afa17daefa0155"}, "originalPosition": 63}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 948, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}