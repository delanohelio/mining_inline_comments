{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMDk4NTY5", "number": 196, "title": "Oc 549", "bodyText": "The commit message follows our guidelines\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features)\n\nThis PR fixes OC-549. Now instead of an HTTP 200, a 404 is returned when a non-existing bundle is requested.", "createdAt": "2020-02-10T12:07:04Z", "url": "https://github.com/opfab/operatorfabric-core/pull/196", "merged": true, "mergeCommit": {"oid": "5d97562f91f482772deff1693706dd92c1b1c544"}, "closed": true, "closedAt": "2020-02-12T09:34:42Z", "author": {"login": "JeroenGommans"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcC6aOQAH2gAyMzczMDk4NTY5OmJkZTZkYjYyNzFjODg2ZDQ1YzFhYWFiNTA3NWM3MWYzZmYwYjZlN2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDUU0pAFqTM1NjgwMzA5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bde6db6271c886d45c1aaab5075c71f3ff0b6e7c", "author": {"user": {"login": "JeroenGommans", "name": "Jeroen Gommans"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/bde6db6271c886d45c1aaab5075c71f3ff0b6e7c", "committedDate": "2020-02-10T10:17:04Z", "message": "[OC-549] Return 404 when a non existing bundle is requested\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65ca009377d458f4829455e6adf85335e365e746", "author": {"user": {"login": "JeroenGommans", "name": "Jeroen Gommans"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/65ca009377d458f4829455e6adf85335e365e746", "committedDate": "2020-02-10T11:59:14Z", "message": "Merge branch 'master' into OC-549"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f9fc77681610fe37fe87d887704ffee8fb5a83f", "author": {"user": {"login": "JeroenGommans", "name": "Jeroen Gommans"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/3f9fc77681610fe37fe87d887704ffee8fb5a83f", "committedDate": "2020-02-10T12:04:25Z", "message": "[OC-549] Added release note\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27d2c94682014404c49a1c9d367f4b895d75beca", "author": {"user": {"login": "JeroenGommans", "name": "Jeroen Gommans"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/27d2c94682014404c49a1c9d367f4b895d75beca", "committedDate": "2020-02-10T12:49:14Z", "message": "[OC-549] Re-added unit test. Removed erronous unit-test\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d520d76ec4fa8f885558526e278919d36119ec9", "author": {"user": {"login": "JeroenGommans", "name": "Jeroen Gommans"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/8d520d76ec4fa8f885558526e278919d36119ec9", "committedDate": "2020-02-10T13:08:24Z", "message": "Moved OC-549 test case\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "261655a6a40168e8e69b2337e402aa321998c433", "author": {"user": {"login": "freddidierRTE", "name": null}}, "url": "https://github.com/opfab/operatorfabric-core/commit/261655a6a40168e8e69b2337e402aa321998c433", "committedDate": "2020-02-11T07:20:54Z", "message": "OC 663 - 555 : Resolution of translation and infinite loop problems"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7b0c364267287ae88bfde7b0d285ee3208ed12b", "author": {"user": {"login": "AlexGuironnetRTE", "name": "Alexandra Guironnet"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/c7b0c364267287ae88bfde7b0d285ee3208ed12b", "committedDate": "2020-02-11T12:53:52Z", "message": "Merge pull request #194 from opfab/OC-663\n\nOC-663 Partial resolution of translation problem"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6e0ffc8773794d52257ca7f61c1d9810d79025a", "author": {"user": {"login": "AlexGuironnetRTE", "name": "Alexandra Guironnet"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/f6e0ffc8773794d52257ca7f61c1d9810d79025a", "committedDate": "2020-02-11T14:01:57Z", "message": "[OC-700] Skip sonar for external PRs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f86b5d8d0c8f248f68a025db591ce0f4402e3f11", "author": {"user": {"login": "AlexGuironnetRTE", "name": "Alexandra Guironnet"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/f86b5d8d0c8f248f68a025db591ce0f4402e3f11", "committedDate": "2020-02-11T14:28:51Z", "message": "Merge pull request #197 from opfab/OC-700\n\n[OC-700] Skip sonar for external PRs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "025a5a09d35622cbff27b4dc90d0a11e680b4572", "author": {"user": {"login": "JeroenGommans", "name": "Jeroen Gommans"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/025a5a09d35622cbff27b4dc90d0a11e680b4572", "committedDate": "2020-02-11T15:12:31Z", "message": "[OC-549] Return 404 when a non existing bundle is requested\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60dbcc8d42fcaf132e3216bea39e33d54372f505", "author": {"user": {"login": "JeroenGommans", "name": "Jeroen Gommans"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/60dbcc8d42fcaf132e3216bea39e33d54372f505", "committedDate": "2020-02-11T15:12:31Z", "message": "[OC-549] Added release note\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b88ea745a86007b6676f61423354e2acda519ad", "author": {"user": {"login": "JeroenGommans", "name": "Jeroen Gommans"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/8b88ea745a86007b6676f61423354e2acda519ad", "committedDate": "2020-02-11T15:12:31Z", "message": "[OC-549] Re-added unit test. Removed erronous unit-test\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9718a2af88c9a1eaf5adc4d629170a31c7322b89", "author": {"user": {"login": "JeroenGommans", "name": "Jeroen Gommans"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/9718a2af88c9a1eaf5adc4d629170a31c7322b89", "committedDate": "2020-02-11T15:12:31Z", "message": "Moved OC-549 test case\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "782ebef5d50e51fbf2248c396451861fc3b56e62", "author": {"user": {"login": "JeroenGommans", "name": "Jeroen Gommans"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/782ebef5d50e51fbf2248c396451861fc3b56e62", "committedDate": "2020-02-11T15:13:00Z", "message": "Rebase"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2ODAzMDky", "url": "https://github.com/opfab/operatorfabric-core/pull/196#pullrequestreview-356803092", "createdAt": "2020-02-11T16:27:39Z", "commit": {"oid": "782ebef5d50e51fbf2248c396451861fc3b56e62"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNjoyNzozOVrOFoP4uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNjoyNzozOVrOFoP4uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc0NzY0Mw==", "bodyText": "Everything looks good, and I do get the 404 status when requesting a third that doesn't exist, but not the message?\nHere's what I get if I do a GET on http://localhost:2100/third/DoesntExist using PostMan:\n{\n    \"timestamp\": \"2020-02-11T16:07:52.565+0000\",\n    \"status\": 404,\n    \"error\": \"Not Found\",\n    \"message\": \"Not Found\",\n    \"path\": \"/third/DoesntExist\"\n}\n\nI can't figure out what that is... If I try another similar method and do a GET on : http://localhost:2103/users/doesntexist/settings\nI do get the correct message:\n{\n    \"status\": \"NOT_FOUND\",\n    \"message\": \"User setting for user doesntexist not found\"\n}\n\nI've compared the two but can't find the difference ?", "url": "https://github.com/opfab/operatorfabric-core/pull/196#discussion_r377747643", "createdAt": "2020-02-11T16:27:39Z", "author": {"login": "AlexGuironnetRTE"}, "path": "services/core/thirds/src/main/java/org/lfenergy/operatorfabric/thirds/controllers/ThirdsController.java", "diffHunk": "@@ -90,7 +90,14 @@ public ThirdsController(ThirdsService service) {\n \n     @Override\n     public Third getThird(HttpServletRequest request, HttpServletResponse response, @PathVariable String thirdName, String apiVersion) {\n-        return service.fetch(thirdName, apiVersion);\n+        Third third = service.fetch(thirdName, apiVersion);\n+        if (third == null) {\n+            throw new ApiErrorException(ApiError.builder()\n+                    .status(HttpStatus.NOT_FOUND)\n+                    .message(String.format(\"Third with name %s was not found\", thirdName))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "782ebef5d50e51fbf2248c396451861fc3b56e62"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1198, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}