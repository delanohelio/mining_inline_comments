{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2OTU4Mzc5", "number": 471, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwOTozODoxOVrOEjgg_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwOTo0MDo1NVrOEjglwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NjY4MzUxOnYy", "diffSide": "RIGHT", "path": "ui/main/src/app/modules/cards/components/detail/detail.component.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwOTozODoxOVrOHR5WnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwOTozODoxOVrOHR5WnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUyNzUxNw==", "bodyText": "EntityColor const never used --> to remove", "url": "https://github.com/opfab/operatorfabric-core/pull/471#discussion_r488527517", "createdAt": "2020-09-15T09:38:19Z", "author": {"login": "freddidierRTE"}, "path": "ui/main/src/app/modules/cards/components/detail/detail.component.ts", "diffHunk": "@@ -69,12 +77,20 @@ const enum ResponseMsgColor {\n     GREEN = 'alert-success',\n     RED = 'alert-danger'\n }\n+const enum EntityMsgColor {\n+    GREEN = 'green',\n+    YELLOW = 'yellow'\n+}\n+const enum EntityColor {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9738a7f78228db766af4ab40e3326b3a981c91e7"}, "originalPosition": 77}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NjY4NDgwOnYy", "diffSide": "RIGHT", "path": "ui/main/src/app/modules/cards/components/detail/detail.component.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwOTozODo0MFrOHR5XZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwOTozODo0MFrOHR5XZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUyNzcxNw==", "bodyText": "entityMessge never used --> to remove", "url": "https://github.com/opfab/operatorfabric-core/pull/471#discussion_r488527717", "createdAt": "2020-09-15T09:38:40Z", "author": {"login": "freddidierRTE"}, "path": "ui/main/src/app/modules/cards/components/detail/detail.component.ts", "diffHunk": "@@ -85,20 +101,25 @@ export class DetailComponent implements OnChanges, OnInit, OnDestroy, AfterViewC\n     public active = false;\n     unsubscribe$: Subject<void> = new Subject<void>();\n     readonly hrefsOfCssLink = new Array<SafeResourceUrl>();\n+    private _listEntitiesToRespond = new Array<EntityMessage>();\n     private _htmlContent: SafeHtml;\n     private _userContext: UserContext;\n     private _lastCards$: Observable<LightCard[]>;\n     private _responseData: Response;\n     private _hasPrivilegeToRespond = false;\n     private _acknowledgementAllowed: boolean;\n-    lttdExpiredIsTrue:boolean;\n-    message: Message = {display: false, text: undefined, color: undefined};\n+    lttdExpiredIsTrue: boolean;\n+    message: Message = { display: false, text: undefined, color: undefined };\n+    entityMessge: EntityMessage = { name: undefined, color: EntityMsgColor.YELLOW };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9738a7f78228db766af4ab40e3326b3a981c91e7"}, "originalPosition": 107}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NjY5MDExOnYy", "diffSide": "RIGHT", "path": "ui/main/src/app/modules/cards/components/detail/detail.component.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwOTozOTo1OVrOHR5avg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNzo0MTowMVrOHSNDuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUyODU3NA==", "bodyText": "You introduce here a regression , you must keep method isButtonActivated instead instead of  isArchivePageType", "url": "https://github.com/opfab/operatorfabric-core/pull/471#discussion_r488528574", "createdAt": "2020-09-15T09:39:59Z", "author": {"login": "freddidierRTE"}, "path": "ui/main/src/app/modules/cards/components/detail/detail.component.ts", "diffHunk": "@@ -182,19 +203,18 @@ export class DetailComponent implements OnChanges, OnInit, OnDestroy, AfterViewC\n         this.tchekLttdExpired();\n     }\n \n-    tchekLttdExpired():void {\n-        this.lttdExpiredIsTrue =  (this.card.lttd != null && Math.floor((this.card.lttd - new Date().getTime()) / 1000) <= 0);\n+    tchekLttdExpired(): void {\n+        this.lttdExpiredIsTrue = (this.card.lttd != null && Math.floor((this.card.lttd - new Date().getTime()) / 1000) <= 0);\n     }\n \n     get i18nPrefix() {\n         return `${this.card.process}.${this.card.processVersion}.`;\n     }\n \n-    get isButtonsActivated() {\n-        return !((this._appService.pageType === PageType.ARCHIVE) || (this._appService.pageType === PageType.CALENDAR));\n+    get isArchivePageType() {\n+        return this._appService.pageType === PageType.ARCHIVE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9738a7f78228db766af4ab40e3326b3a981c91e7"}, "originalPosition": 141}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg1MDM2MQ==", "bodyText": "?", "url": "https://github.com/opfab/operatorfabric-core/pull/471#discussion_r488850361", "createdAt": "2020-09-15T17:41:01Z", "author": {"login": "taoufikbermaki"}, "path": "ui/main/src/app/modules/cards/components/detail/detail.component.ts", "diffHunk": "@@ -182,19 +203,18 @@ export class DetailComponent implements OnChanges, OnInit, OnDestroy, AfterViewC\n         this.tchekLttdExpired();\n     }\n \n-    tchekLttdExpired():void {\n-        this.lttdExpiredIsTrue =  (this.card.lttd != null && Math.floor((this.card.lttd - new Date().getTime()) / 1000) <= 0);\n+    tchekLttdExpired(): void {\n+        this.lttdExpiredIsTrue = (this.card.lttd != null && Math.floor((this.card.lttd - new Date().getTime()) / 1000) <= 0);\n     }\n \n     get i18nPrefix() {\n         return `${this.card.process}.${this.card.processVersion}.`;\n     }\n \n-    get isButtonsActivated() {\n-        return !((this._appService.pageType === PageType.ARCHIVE) || (this._appService.pageType === PageType.CALENDAR));\n+    get isArchivePageType() {\n+        return this._appService.pageType === PageType.ARCHIVE;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUyODU3NA=="}, "originalCommit": {"oid": "9738a7f78228db766af4ab40e3326b3a981c91e7"}, "originalPosition": 141}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NjY5NTY4OnYy", "diffSide": "RIGHT", "path": "ui/main/src/app/modules/cards/components/detail/detail.component.html", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwOTo0MDo1NVrOHR5eJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNzo0MTowNlrOHSND7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUyOTQ0NQ==", "bodyText": "You introduce here a regression , you must keep isButtonsActivated instead of isArchivePageType", "url": "https://github.com/opfab/operatorfabric-core/pull/471#discussion_r488529445", "createdAt": "2020-09-15T09:40:55Z", "author": {"login": "freddidierRTE"}, "path": "ui/main/src/app/modules/cards/components/detail/detail.component.html", "diffHunk": "@@ -9,21 +9,33 @@\n \n \n <link *ngFor=\"let cssUrl of hrefsOfCssLink\" [href]=\"cssUrl\" rel=\"stylesheet\" type=\"text/css\">\n+<div class=\"my-3\">\n+  <table>\n+    <tr>\n+      <td> <span class=\"h4\" translate>response.answers</span> : </td>\n+      <td *ngFor=\"let entity of listEntitiesToRespond; let isLast = last\"\n+        [ngStyle]=\"{'color': entity.color,'border-right': (!isLast) ? '3px solid white':'','width': '150px','font-size': '20px','text-align': 'center'}\">\n+        {{entity.name}}\n+      </td>\n+    </tr>\n+  </table>\n+</div>\n <div id=\"div-card-template\" [hidden]=\"!active\" [innerHtml]=\"htmlContent\"></div>\n \n+\n <div class=\"my-3\">\n-  <div id='div-detail-msg' *ngIf='message.display' class=\"alert alert-dismissible fade show text-center {{message.color}}\"\n-      role=\"alert\" translate>\n+  <div id='div-detail-msg' *ngIf='message.display'\n+    class=\"alert alert-dismissible fade show text-center {{message.color}}\" role=\"alert\" translate>\n     {{message.text}}\n     <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"message.display = false\">\n       <span aria-hidden=\"true\">&times;</span>\n     </button>\n   </div>\n \n-  <div id='div-detail-btn' *ngIf=\"isButtonsActivated\" class=\"mb-3\">\n-    <button class=\"btn mr-3 {{btnColor}}\" style=\"float: right;\" *ngIf='responseDataExists'\n-      translate [translateParams]=\"responseDataParameters\" [disabled]='lttdExpiredIsTrue || !isActionEnabled'\n-            (click)='submitResponse()'>{{btnText}}</button>\n+  <div id='div-detail-btn' *ngIf=\"!isArchivePageType\" class=\"mb-3\">\n+    <button class=\"btn mr-3 {{btnColor}}\" style=\"float: right;\" *ngIf='responseDataExists' translate\n+      [translateParams]=\"responseDataParameters\" [disabled]='lttdExpiredIsTrue || !isActionEnabled'\n+      (click)='submitResponse()'>{{btnText}}</button>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9738a7f78228db766af4ab40e3326b3a981c91e7"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg1MDQxMw==", "bodyText": "?", "url": "https://github.com/opfab/operatorfabric-core/pull/471#discussion_r488850413", "createdAt": "2020-09-15T17:41:06Z", "author": {"login": "taoufikbermaki"}, "path": "ui/main/src/app/modules/cards/components/detail/detail.component.html", "diffHunk": "@@ -9,21 +9,33 @@\n \n \n <link *ngFor=\"let cssUrl of hrefsOfCssLink\" [href]=\"cssUrl\" rel=\"stylesheet\" type=\"text/css\">\n+<div class=\"my-3\">\n+  <table>\n+    <tr>\n+      <td> <span class=\"h4\" translate>response.answers</span> : </td>\n+      <td *ngFor=\"let entity of listEntitiesToRespond; let isLast = last\"\n+        [ngStyle]=\"{'color': entity.color,'border-right': (!isLast) ? '3px solid white':'','width': '150px','font-size': '20px','text-align': 'center'}\">\n+        {{entity.name}}\n+      </td>\n+    </tr>\n+  </table>\n+</div>\n <div id=\"div-card-template\" [hidden]=\"!active\" [innerHtml]=\"htmlContent\"></div>\n \n+\n <div class=\"my-3\">\n-  <div id='div-detail-msg' *ngIf='message.display' class=\"alert alert-dismissible fade show text-center {{message.color}}\"\n-      role=\"alert\" translate>\n+  <div id='div-detail-msg' *ngIf='message.display'\n+    class=\"alert alert-dismissible fade show text-center {{message.color}}\" role=\"alert\" translate>\n     {{message.text}}\n     <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"message.display = false\">\n       <span aria-hidden=\"true\">&times;</span>\n     </button>\n   </div>\n \n-  <div id='div-detail-btn' *ngIf=\"isButtonsActivated\" class=\"mb-3\">\n-    <button class=\"btn mr-3 {{btnColor}}\" style=\"float: right;\" *ngIf='responseDataExists'\n-      translate [translateParams]=\"responseDataParameters\" [disabled]='lttdExpiredIsTrue || !isActionEnabled'\n-            (click)='submitResponse()'>{{btnText}}</button>\n+  <div id='div-detail-btn' *ngIf=\"!isArchivePageType\" class=\"mb-3\">\n+    <button class=\"btn mr-3 {{btnColor}}\" style=\"float: right;\" *ngIf='responseDataExists' translate\n+      [translateParams]=\"responseDataParameters\" [disabled]='lttdExpiredIsTrue || !isActionEnabled'\n+      (click)='submitResponse()'>{{btnText}}</button>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUyOTQ0NQ=="}, "originalCommit": {"oid": "9738a7f78228db766af4ab40e3326b3a981c91e7"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 970, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}