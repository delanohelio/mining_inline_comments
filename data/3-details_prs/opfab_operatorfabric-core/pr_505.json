{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3Njc0Nzg0", "number": 505, "title": "[OC-1117] Remove template and css arrays in bundle defintion", "bodyText": "", "createdAt": "2020-10-05T08:09:25Z", "url": "https://github.com/opfab/operatorfabric-core/pull/505", "merged": true, "mergeCommit": {"oid": "dda571c72fe8db79f42b98892e14376e430c4b76"}, "closed": true, "closedAt": "2020-10-09T11:09:48Z", "author": {"login": "quinarygio"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPhg2jgFqTUwMTg4ODQzNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQyJ9GgBqjM4NTkxMDk4OTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxODg4NDM1", "url": "https://github.com/opfab/operatorfabric-core/pull/505#pullrequestreview-501888435", "createdAt": "2020-10-05T09:44:46Z", "commit": {"oid": "e98f74d62720ec386f531235cab3c675a5f550f4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQwOTo0NDo0NlrOHcVaVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDoyNTo0OVrOHcW2Lw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ3Mjk4MA==", "bodyText": "More explicit in the name of the method\nProposal of name :   doesFileNameContainsIllegalValuesForReadAccess()", "url": "https://github.com/opfab/operatorfabric-core/pull/505#discussion_r499472980", "createdAt": "2020-10-05T09:44:46Z", "author": {"login": "freddidierRTE"}, "path": "tools/generic/utilities/src/main/java/org/lfenergy/operatorfabric/utilities/SecurityUtils.java", "diffHunk": "@@ -0,0 +1,25 @@\n+/* Copyright (c) 2018-2020, RTE (http://www.rte-france.com)\n+ * See AUTHORS.txt\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ * SPDX-License-Identifier: MPL-2.0\n+ * This file is part of the OperatorFabric project.\n+ */\n+\n+\n+\n+package org.lfenergy.operatorfabric.utilities;\n+\n+import java.util.regex.Pattern;\n+\n+public class SecurityUtils {\n+\n+    public final static String FILENAME_ILLEGAL_VALUES = \"^\\\\\\\\|^/|^\\\\.\\\\.\\\\\\\\|^\\\\.\\\\./|^~\\\\\\\\|^~/\";\n+\n+    public static boolean checkFilename(String filename) {\n+        Pattern pattern = Pattern.compile(FILENAME_ILLEGAL_VALUES);\n+        return !pattern.matcher(filename).find();\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e98f74d62720ec386f531235cab3c675a5f550f4"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ5NjQ5NQ==", "bodyText": "You shall test locale and version parameters to not contains forbidden characters", "url": "https://github.com/opfab/operatorfabric-core/pull/505#discussion_r499496495", "createdAt": "2020-10-05T10:25:49Z", "author": {"login": "freddidierRTE"}, "path": "services/core/businessconfig/src/main/java/org/lfenergy/operatorfabric/businessconfig/services/ProcessesService.java", "diffHunk": "@@ -202,11 +203,17 @@ public Resource fetchResource(String processId, ResourceTypeEnum type, String ve\n \n         if (process == null)\n             throw new FileNotFoundException(\"Unknown version (\" + finalVersion + \") for \" + processId);\n-        validateResourceParameters(processId, type, name, finalVersion, locale);\n+\n+        if (type.isLocalized() && locale == null)\n+            throw new FileNotFoundException(\"Unable to determine resource for undefined locale\");\n+\n         String finalName;\n         if (type == ResourceTypeEnum.I18N) {\n             finalName = locale;\n         } else {\n+            if (!SecurityUtils.checkFilename(name)) {\n+                throw new FileNotFoundException(\"Filename contains forbidden characters\");\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e98f74d62720ec386f531235cab3c675a5f550f4"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e98f74d62720ec386f531235cab3c675a5f550f4", "author": {"user": {"login": "quinarygio", "name": "Giovanni Ferrari"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/e98f74d62720ec386f531235cab3c675a5f550f4", "committedDate": "2020-10-05T07:45:07Z", "message": "[OC-1117] Remove unused test file\n\nSigned-off-by: Giovanni Ferrari <giovanni.ferrari@acotel-group.com>"}, "afterCommit": {"oid": "44cae05ed8761be9a6548fea234dce852df2cf5c", "author": {"user": {"login": "quinarygio", "name": "Giovanni Ferrari"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/44cae05ed8761be9a6548fea234dce852df2cf5c", "committedDate": "2020-10-09T07:06:43Z", "message": "[OC-1117] Remove template and css arrays in bundle defintion.\n\nSigned-off-by: Giovanni Ferrari <giovanni.ferrari@acotel-group.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35d93c13e7c247887f4af295f88392734876bce6", "author": {"user": {"login": "quinarygio", "name": "Giovanni Ferrari"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/35d93c13e7c247887f4af295f88392734876bce6", "committedDate": "2020-10-09T08:45:07Z", "message": "[OC-1117] Remove template and css arrays in bundle defintion.\n\nSigned-off-by: Giovanni Ferrari <giovanni.ferrari@acotel-group.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44cae05ed8761be9a6548fea234dce852df2cf5c", "author": {"user": {"login": "quinarygio", "name": "Giovanni Ferrari"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/44cae05ed8761be9a6548fea234dce852df2cf5c", "committedDate": "2020-10-09T07:06:43Z", "message": "[OC-1117] Remove template and css arrays in bundle defintion.\n\nSigned-off-by: Giovanni Ferrari <giovanni.ferrari@acotel-group.com>"}, "afterCommit": {"oid": "35d93c13e7c247887f4af295f88392734876bce6", "author": {"user": {"login": "quinarygio", "name": "Giovanni Ferrari"}}, "url": "https://github.com/opfab/operatorfabric-core/commit/35d93c13e7c247887f4af295f88392734876bce6", "committedDate": "2020-10-09T08:45:07Z", "message": "[OC-1117] Remove template and css arrays in bundle defintion.\n\nSigned-off-by: Giovanni Ferrari <giovanni.ferrari@acotel-group.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1278, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}