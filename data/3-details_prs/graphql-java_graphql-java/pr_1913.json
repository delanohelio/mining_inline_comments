{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMTI4NzU0", "number": 1913, "title": "Make the graphql-java Asserts truly lazy and hence more efficient", "bodyText": "This means all asserts will be encouraged to be efficient by default.\nIt not longer possible to write an accidental slow one even if you do\nassertTrue(b, String.format(\"%s\", someExpensiveMethod())\n\nbecause it wont compile.\nit must now be\nassertTrue(b, () -> String.format(\"%s\", someExpensiveMethod())\n\nI have commented on the actually changed files that matter.\nThis is technically not a breaking API change because it was marked as @internal.  However its likely people have used it - well that's what @internal is there to warn people about.  Soz but we reserve the right with a reason nad this is one of those reasons.\nSee #1876 for the original problem - this takes it much further", "createdAt": "2020-05-21T03:29:58Z", "url": "https://github.com/graphql-java/graphql-java/pull/1913", "merged": true, "mergeCommit": {"oid": "2acb557474ca73cec95e07dddf3af54d3ce41722"}, "closed": true, "closedAt": "2020-05-21T07:35:42Z", "author": {"login": "bbakerman"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaQxJ2gH2gAyNDIxMTI4NzU0OjhkMDZiNTA1ODgzMGJmYzE2Y2QwNjhkNTgwMTgxZjhmZmI3YTgxMTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjYQpQAH2gAyNDIxMTI4NzU0OmQ1MzU5ZjRkMTliNTI0ZDFjZDZjZGE2NmJjMGY5Yzg3YWE2MGZlYzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8d06b5058830bfc16cd068d580181f8ffb7a8119", "author": {"user": null}, "url": "https://github.com/graphql-java/graphql-java/commit/8d06b5058830bfc16cd068d580181f8ffb7a8119", "committedDate": "2020-04-22T23:20:17Z", "message": " Add lazy assertTrue function for performance improvement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c69e656dbd8fd810e8e6fcc5bbec9348cf47bdbc", "author": {"user": {"login": "bbakerman", "name": "Brad Baker"}}, "url": "https://github.com/graphql-java/graphql-java/commit/c69e656dbd8fd810e8e6fcc5bbec9348cf47bdbc", "committedDate": "2020-05-21T00:35:45Z", "message": "Merge branch 'lazyAssert' of https://github.com/klee97/graphql-java into klee97-lazyAssert"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5b087b024d5c9d6884932e5a6ad8eb6b1238379", "author": {"user": {"login": "bbakerman", "name": "Brad Baker"}}, "url": "https://github.com/graphql-java/graphql-java/commit/f5b087b024d5c9d6884932e5a6ad8eb6b1238379", "committedDate": "2020-05-21T03:25:00Z", "message": "This is a revamp of klee97's PR about lazy asserts.\n\nIt takes it much further and makes them ALL lazy in their message retrieval and encourages efficient asserts\nby not providing the string.format rope with which to hang yourself.\n\nWe now require that a supplier be provided to asserts that want messages to be thrown"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1ODU1OTUy", "url": "https://github.com/graphql-java/graphql-java/pull/1913#pullrequestreview-415855952", "createdAt": "2020-05-21T03:31:15Z", "commit": {"oid": "f5b087b024d5c9d6884932e5a6ad8eb6b1238379"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwMzozMToxNVrOGYlDQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwMzozMToxNVrOGYlDQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQyNjA1MA==", "bodyText": "This is the KEY file changed and its test.\nThe others are all knock on effects", "url": "https://github.com/graphql-java/graphql-java/pull/1913#discussion_r428426050", "createdAt": "2020-05-21T03:31:15Z", "author": {"login": "bbakerman"}, "path": "src/main/java/graphql/Assert.java", "diffHunk": "@@ -1,25 +1,26 @@\n package graphql;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5b087b024d5c9d6884932e5a6ad8eb6b1238379"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1ODU2MDU2", "url": "https://github.com/graphql-java/graphql-java/pull/1913#pullrequestreview-415856056", "createdAt": "2020-05-21T03:31:40Z", "commit": {"oid": "f5b087b024d5c9d6884932e5a6ad8eb6b1238379"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwMzozMTo0MFrOGYlDlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwMzozMTo0MFrOGYlDlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQyNjEzNA==", "bodyText": "The above was missing but present for assertTrue so I made it", "url": "https://github.com/graphql-java/graphql-java/pull/1913#discussion_r428426134", "createdAt": "2020-05-21T03:31:40Z", "author": {"login": "bbakerman"}, "path": "src/main/java/graphql/Assert.java", "diffHunk": "@@ -83,11 +84,18 @@ public static void assertTrue(boolean condition) {\n         throw new AssertException(\"condition expected to be true\");\n     }\n \n-    public static void assertFalse(boolean condition, String format, Object... args) {\n+    public static void assertFalse(boolean condition, Supplier<String> msg) {\n         if (!condition) {\n             return;\n         }\n-        throw new AssertException(format(format, args));\n+        throw new AssertException(msg.get());\n+    }\n+\n+    public static void assertFalse(boolean condition) {\n+        if (!condition) {\n+            return;\n+        }\n+        throw new AssertException(\"condition expected to be false\");\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5b087b024d5c9d6884932e5a6ad8eb6b1238379"}, "originalPosition": 86}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1ODg1NjQ1", "url": "https://github.com/graphql-java/graphql-java/pull/1913#pullrequestreview-415885645", "createdAt": "2020-05-21T05:23:09Z", "commit": {"oid": "f5b087b024d5c9d6884932e5a6ad8eb6b1238379"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d8cf32a32184720c634685888dfde9932069a55", "author": {"user": {"login": "bbakerman", "name": "Brad Baker"}}, "url": "https://github.com/graphql-java/graphql-java/commit/0d8cf32a32184720c634685888dfde9932069a55", "committedDate": "2020-05-21T06:36:42Z", "message": "Merge remote-tracking branch 'origin/master' into klee97-lazyAssert\n\n# Conflicts:\n#\tsrc/main/java/graphql/ExecutionInput.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5359f4d19b524d1cd6cda66bc0f9c87aa60fec5", "author": {"user": {"login": "bbakerman", "name": "Brad Baker"}}, "url": "https://github.com/graphql-java/graphql-java/commit/d5359f4d19b524d1cd6cda66bc0f9c87aa60fec5", "committedDate": "2020-05-21T07:09:20Z", "message": "Fixed up asserts"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4455, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}