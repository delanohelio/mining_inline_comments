{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4MDgyMzkx", "number": 694, "title": "Move consumer.close() to a try-catch block in AbstractKafkaBasedConnectorTask", "bodyText": "The AbstractKafkaBasedConnectorTask calls consumer.close() in the finally block\nwithout checking for exceptions. If consumer.close() throws an exception, it can result\nin the remaining cleanup to be ignored. This can have major repercussions for scenarios\nin partition-managed, where the lock is not released. So we should encapsulate the\nconsumer.close() in a try-catch block to prevent this.", "createdAt": "2020-03-14T00:35:55Z", "url": "https://github.com/linkedin/brooklin/pull/694", "merged": true, "mergeCommit": {"oid": "73a0fef4521047456309f50a1ae554bce433e2e9"}, "closed": true, "closedAt": "2020-03-16T18:11:10Z", "author": {"login": "somandal"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNZz16gH2gAyMzg4MDgyMzkxOmU1Y2JkYzNjZTQzNzZhZGU1NTYzYzU1ZWNkNTJjYWQ1ZTQwYzVkYzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOSJ1HgFqTM3NTQ2ODM2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e5cbdc3ce4376ade5563c55ecd52cad5e40c5dc6", "author": {"user": {"login": "somandal", "name": "Sonam Mandal"}}, "url": "https://github.com/linkedin/brooklin/commit/e5cbdc3ce4376ade5563c55ecd52cad5e40c5dc6", "committedDate": "2020-03-14T00:31:21Z", "message": "Move consumer.close() to a try-catch block in AbstractKafkaBasedConnectorTask to ensure postShutdownHook gets called"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5338fff0e9f73d35db22660948d0d9370caa61d2", "author": {"user": {"login": "somandal", "name": "Sonam Mandal"}}, "url": "https://github.com/linkedin/brooklin/commit/5338fff0e9f73d35db22660948d0d9370caa61d2", "committedDate": "2020-03-14T01:34:25Z", "message": "Fix up test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0Njg3NTM4", "url": "https://github.com/linkedin/brooklin/pull/694#pullrequestreview-374687538", "createdAt": "2020-03-14T01:42:15Z", "commit": {"oid": "5338fff0e9f73d35db22660948d0d9370caa61d2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NjkzNzA0", "url": "https://github.com/linkedin/brooklin/pull/694#pullrequestreview-374693704", "createdAt": "2020-03-14T03:19:39Z", "commit": {"oid": "5338fff0e9f73d35db22660948d0d9370caa61d2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwMzoxOTozOVrOF2XeYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwMzoxOTozOVrOF2XeYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU1MjAzMw==", "bodyText": "should we have retries for this?", "url": "https://github.com/linkedin/brooklin/pull/694#discussion_r392552033", "createdAt": "2020-03-14T03:19:39Z", "author": {"login": "gauravrkulkarni"}, "path": "datastream-kafka-connector/src/main/java/com/linkedin/datastream/connectors/kafka/AbstractKafkaBasedConnectorTask.java", "diffHunk": "@@ -352,7 +352,11 @@ public void run() {\n     } finally {\n       _stoppedLatch.countDown();\n       if (null != _consumer) {\n-        _consumer.close();\n+        try {\n+          _consumer.close();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5338fff0e9f73d35db22660948d0d9370caa61d2"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NDY4MzY5", "url": "https://github.com/linkedin/brooklin/pull/694#pullrequestreview-375468369", "createdAt": "2020-03-16T18:10:03Z", "commit": {"oid": "5338fff0e9f73d35db22660948d0d9370caa61d2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 397, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}