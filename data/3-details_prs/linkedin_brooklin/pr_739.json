{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0MzI4MTYw", "number": 739, "title": "Passing Kafka headers to downstream systems via ProducerRecord", "bodyText": "This is a follow up pull request for #737. We're passing headers to downstream systems by setting them in BrooklinEnvelope first, then passing to the ProducerRecord constructor in translate() method.", "createdAt": "2020-08-07T00:34:27Z", "url": "https://github.com/linkedin/brooklin/pull/739", "merged": true, "mergeCommit": {"oid": "516067675e6ef7eaaa66144f5f22c38267e57563"}, "closed": true, "closedAt": "2020-08-07T20:09:45Z", "author": {"login": "jzakaryan"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8ZKXMgH2gAyNDY0MzI4MTYwOmJmNWM0Nzk0NzhhZDMxMzliODBiZWQwYTAzYWRhYzZmNzJjOGQxNTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8ouo6gFqTQ2MzUxOTE3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bf5c479478ad3139b80bed0a03adac6f72c8d151", "author": {"user": {"login": "jzakaryan", "name": "Jhora Zakaryan"}}, "url": "https://github.com/linkedin/brooklin/commit/bf5c479478ad3139b80bed0a03adac6f72c8d151", "committedDate": "2020-08-07T00:20:29Z", "message": "Passed headers to BrooklinEnvelope so that they can be assigned in the ProducerRecord downstream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d421b60471e7b60099c36fa72e526cde4a7d02a", "author": {"user": {"login": "jzakaryan", "name": "Jhora Zakaryan"}}, "url": "https://github.com/linkedin/brooklin/commit/2d421b60471e7b60099c36fa72e526cde4a7d02a", "committedDate": "2020-08-07T00:20:29Z", "message": "Passed headers to the ProducerRecord"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNDU0OTM1", "url": "https://github.com/linkedin/brooklin/pull/739#pullrequestreview-463454935", "createdAt": "2020-08-07T16:43:20Z", "commit": {"oid": "2d421b60471e7b60099c36fa72e526cde4a7d02a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNTE5MTc4", "url": "https://github.com/linkedin/brooklin/pull/739#pullrequestreview-463519178", "createdAt": "2020-08-07T18:28:31Z", "commit": {"oid": "2d421b60471e7b60099c36fa72e526cde4a7d02a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODoyODozMVrOG9jzPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODoyODozMVrOG9jzPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIwMjg3OA==", "bodyText": "We need to do the same in KafkaConnectorTask.translate()", "url": "https://github.com/linkedin/brooklin/pull/739#discussion_r467202878", "createdAt": "2020-08-07T18:28:31Z", "author": {"login": "ahmedahamid"}, "path": "datastream-kafka-connector/src/main/java/com/linkedin/datastream/connectors/kafka/mirrormaker/KafkaMirrorMakerConnectorTask.java", "diffHunk": "@@ -241,7 +241,8 @@ protected DatastreamProducerRecord translate(ConsumerRecord<?, ?> fromKafka, Ins\n     String offsetStr = String.valueOf(offset);\n     metadata.put(KAFKA_ORIGIN_OFFSET, offsetStr);\n     metadata.put(BrooklinEnvelopeMetadataConstants.EVENT_TIMESTAMP, String.valueOf(eventsSourceTimestamp));\n-    BrooklinEnvelope envelope = new BrooklinEnvelope(fromKafka.key(), fromKafka.value(), null, metadata);\n+    BrooklinEnvelope envelope = new BrooklinEnvelope(fromKafka.key(), fromKafka.value(), null,\n+        fromKafka.headers(), metadata);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d421b60471e7b60099c36fa72e526cde4a7d02a"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 905, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}