{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MjQ1NDQy", "number": 789, "title": "KOGITO-2348: Scenario fails if DMN model imports another one", "bodyText": "JIRA: https://issues.redhat.com/browse/KOGITO-2348\nReported case fails with this execption: Could not locate required dependency while importing DMN for namespace ...\nThe cause is: Duplicated DMN files are imported in the working memory, this because original DMN files are copied inside /target/ folder. This leads to incorrectly evaluate if statement in ImportDMNResolverUtil:44.\nTo resolve the issue, I filtered out any DMN and PMML files inside /target/ folder.\nPlease not, provided reproducer is not complete (Should the driver be suspended? decision doesn't consider has strict rules imported data), then I provided a working one in the ticket as attachment.\nChanges provided in drools-wb PR resolve another use case (importing of DMNType inside an imported DMN Model).\nReferenced Pull Requests:\n\nkiegroup/drools-wb#1428\n#789\n\nCase \"Canada\" is successful: Canada is part of the counties defined in imported GeneralRules.dmn\n\nCase \"Italy\" fails: Italy is NOT part of the counties defined in imported GeneralRules.dmn\n\nPlease make sure that your PR meets the following requirements:\n\n You have read the contributors guide\n Pull Request title is properly formatted: KOGITO-XYZ Subject\n Pull Request title contains the target branch if not targeting master: [0.9.x] KOGITO-XYZ Subject\n Pull Request contains link to the JIRA issue\n Pull Request contains link to any dependent or related Pull Request\n Pull Request contains description of the issue\n Pull Request does not include fixes for issues other than the main ticket", "createdAt": "2020-09-28T15:54:38Z", "url": "https://github.com/kiegroup/kogito-runtimes/pull/789", "merged": true, "mergeCommit": {"oid": "b5cb54d1928ba9d62e2f35a6d7a977e4bae98674"}, "closed": true, "closedAt": "2020-10-15T18:58:37Z", "author": {"login": "yesamer"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLvMQwAH2gAyNDk0MjQ1NDQyOmQ4ZmU4ZjkwMWFjZDFmNDZhYWEzYWIxNDJkZDllMzUyZWRmOWY4NGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdScWxMgFqTUwODI5MjU0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d8fe8f901acd1f46aaa3ab142dd9e352edf9f84c", "author": {"user": {"login": "yesamer", "name": "Yeser Amer"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/d8fe8f901acd1f46aaa3ab142dd9e352edf9f84c", "committedDate": "2020-09-23T16:29:20Z", "message": "KOGITO-2348: Filtering out resources under target/ folder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d18add990d503334db372c78b752ad031971a24c", "author": {"user": {"login": "yesamer", "name": "Yeser Amer"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/d18add990d503334db372c78b752ad031971a24c", "committedDate": "2020-09-28T15:51:08Z", "message": "KOGITO-2348: Filtering out resources under target/ folder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2137507cd9727a7855417ca863b6458b8eb241e", "author": {"user": {"login": "yesamer", "name": "Yeser Amer"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/f2137507cd9727a7855417ca863b6458b8eb241e", "committedDate": "2020-09-28T15:52:48Z", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-2348"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d364f41fd3249a6b08d3a89bf5ec2d956d61e5e", "author": {"user": {"login": "yesamer", "name": "Yeser Amer"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/9d364f41fd3249a6b08d3a89bf5ec2d956d61e5e", "committedDate": "2020-10-01T11:00:16Z", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-2348"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMDQwNjUw", "url": "https://github.com/kiegroup/kogito-runtimes/pull/789#pullrequestreview-501040650", "createdAt": "2020-10-02T10:57:13Z", "commit": {"oid": "d18add990d503334db372c78b752ad031971a24c"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a0e61d8e1a66001bd660935e70801a08b352ed2", "author": {"user": {"login": "yesamer", "name": "Yeser Amer"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/8a0e61d8e1a66001bd660935e70801a08b352ed2", "committedDate": "2020-10-06T07:54:20Z", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-2348"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "863f51d471d43c345aeba284559b884e73ef4e86", "author": {"user": {"login": "yesamer", "name": "Yeser Amer"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/863f51d471d43c345aeba284559b884e73ef4e86", "committedDate": "2020-10-06T12:58:01Z", "message": "KOGITO-2348: Test case with Imported DMN"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c904f2de8ffcd7e105be54027808e7dc0997652c", "author": {"user": {"login": "yesamer", "name": "Yeser Amer"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/c904f2de8ffcd7e105be54027808e7dc0997652c", "committedDate": "2020-10-06T12:59:19Z", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-2348"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNTQ0OTQy", "url": "https://github.com/kiegroup/kogito-runtimes/pull/789#pullrequestreview-503544942", "createdAt": "2020-10-07T05:56:17Z", "commit": {"oid": "c904f2de8ffcd7e105be54027808e7dc0997652c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNzQzOTA3", "url": "https://github.com/kiegroup/kogito-runtimes/pull/789#pullrequestreview-503743907", "createdAt": "2020-10-07T10:35:10Z", "commit": {"oid": "c904f2de8ffcd7e105be54027808e7dc0997652c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxMDozNToxMVrOHdtDIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxMDozNToxMVrOHdtDIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDkwODgzNA==", "bodyText": "Wouldn't moving the String#contains and String#endsWith to the beginning of the return statement optimize the evaluation of &&? e.g. Based on https://rules.sonarsource.com/java/tag/performance/RSPEC-3725 the Files methods have poor performance, so in theory it's a waste to invoke it on target-located files when those are filtered out in the end anyway.\nI would actually reverse the order as is now, filter out any path containing target, get just paths with given extension and only the check the file.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/789#discussion_r500908834", "createdAt": "2020-10-07T10:35:11Z", "author": {"login": "jstastny-cz"}, "path": "drools/kogito-scenario-simulation/src/main/java/org/kogito/scenariosimulation/runner/KogitoDMNScenarioRunnerHelper.java", "diffHunk": "@@ -133,4 +133,8 @@ private DMNRuntime initDmnRuntime() {\n         }\n     }\n \n+    private boolean filterResource(Path path, String extension) {\n+        return Files.isRegularFile(path) && path.toString().endsWith(extension) && !path.toString().contains(\"/target/\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c904f2de8ffcd7e105be54027808e7dc0997652c"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20a2a4622f4d5cf712c5d7bed33e16a73d2c86f0", "author": {"user": {"login": "yesamer", "name": "Yeser Amer"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/20a2a4622f4d5cf712c5d7bed33e16a73d2c86f0", "committedDate": "2020-10-07T11:56:55Z", "message": "KOGITO-2348: Changes required during code review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84a9d3cd9e4bd78eddf411c7774c55beb2570928", "author": {"user": {"login": "yesamer", "name": "Yeser Amer"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/84a9d3cd9e4bd78eddf411c7774c55beb2570928", "committedDate": "2020-10-07T11:57:48Z", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-2348"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzODM1Nzgy", "url": "https://github.com/kiegroup/kogito-runtimes/pull/789#pullrequestreview-503835782", "createdAt": "2020-10-07T12:42:59Z", "commit": {"oid": "84a9d3cd9e4bd78eddf411c7774c55beb2570928"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f53fb20dc62c7e5281b5628f5d93310e5e720fbd", "author": {"user": {"login": "yesamer", "name": "Yeser Amer"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/f53fb20dc62c7e5281b5628f5d93310e5e720fbd", "committedDate": "2020-10-09T13:05:40Z", "message": "KOGITO-2348: Updated Scesim test case - now it's compatible with BC."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10ad297065182e1f955bb424f67bd6ef367fd826", "author": {"user": {"login": "yesamer", "name": "Yeser Amer"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/10ad297065182e1f955bb424f67bd6ef367fd826", "committedDate": "2020-10-09T13:06:05Z", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-2348"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MjkyNTQ0", "url": "https://github.com/kiegroup/kogito-runtimes/pull/789#pullrequestreview-508292544", "createdAt": "2020-10-14T12:30:06Z", "commit": {"oid": "10ad297065182e1f955bb424f67bd6ef367fd826"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3982, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}