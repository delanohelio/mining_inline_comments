{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExNDk0MDM2", "number": 855, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMTo0MDo1NlrOEzQlVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMTo0MTo1NlrOEzQmgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMTg0NTM1OnYy", "diffSide": "RIGHT", "path": "kogito-codegen/src/main/resources/class-templates/DecisionRestResourceTemplate.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMTo0MDo1NlrOHqX6bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjo0MDo1OFrOHqZ7NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE5NDAyOA==", "bodyText": "I think you should swap these two lines and avoid to add Metadata to rest.DMNResult. This object is sent back to user and it should not contain other/external data\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    org.kie.kogito.dmn.rest.DMNResult result = new org.kie.kogito.dmn.rest.DMNResult(\"$modelNamespace$\", \"$modelName$\", decision.evaluateAll(DMNJSONUtils.ctx(decision, $inputData$)));\n          \n          \n            \n                    enrichResponseHeaders(result);\n          \n          \n            \n                    enrichResponseHeaders(result);\n          \n          \n            \n                    org.kie.kogito.dmn.rest.DMNResult result = new org.kie.kogito.dmn.rest.DMNResult(\"$modelNamespace$\", \"$modelName$\", decision.evaluateAll(DMNJSONUtils.ctx(decision, $inputData$)));", "url": "https://github.com/kiegroup/kogito-runtimes/pull/855#discussion_r514194028", "createdAt": "2020-10-29T11:40:56Z", "author": {"login": "danielezonca"}, "path": "kogito-codegen/src/main/resources/class-templates/DecisionRestResourceTemplate.java", "diffHunk": "@@ -39,11 +33,12 @@\n     @io.swagger.v3.oas.annotations.responses.ApiResponse(content = @io.swagger.v3.oas.annotations.media.Content(mediaType = \"application/json\",schema = @io.swagger.v3.oas.annotations.media.Schema(ref = \"/dmnDefinitions.json#/definitions/OutputSet1\")))\n     public $outputType$ dmn($inputType$ variables) {\n         org.kie.kogito.decision.DecisionModel decision = application.decisionModels().getDecisionModel(\"$modelNamespace$\", \"$modelName$\");\n-        OutputSet outputSet = (OutputSet)StronglyTypedUtils.convertToOutputSet(variables, OutputSet.class);\n+        OutputSet outputSet = (OutputSet) StronglyTypedUtils.convertToOutputSet(variables, OutputSet.class);\n         org.kie.kogito.dmn.rest.DMNResult result = new org.kie.kogito.dmn.rest.DMNResult(\"$modelNamespace$\", \"$modelName$\", decision.evaluateAll(DMNJSONUtils.ctx(decision, $inputData$)));\n+        enrichResponseHeaders(result);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c94a3747b28b68e9de1c9b92f7f4c0d952a4b34"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIwNTkxNQ==", "bodyText": "I like this as it would imply no modification to DMNResult implementations required \ud83d\udc4d\nOn other hand this just go to highlight there is no clear strategy for \"metadata\" handling on Kogito design", "url": "https://github.com/kiegroup/kogito-runtimes/pull/855#discussion_r514205915", "createdAt": "2020-10-29T12:03:14Z", "author": {"login": "tarilabs"}, "path": "kogito-codegen/src/main/resources/class-templates/DecisionRestResourceTemplate.java", "diffHunk": "@@ -39,11 +33,12 @@\n     @io.swagger.v3.oas.annotations.responses.ApiResponse(content = @io.swagger.v3.oas.annotations.media.Content(mediaType = \"application/json\",schema = @io.swagger.v3.oas.annotations.media.Schema(ref = \"/dmnDefinitions.json#/definitions/OutputSet1\")))\n     public $outputType$ dmn($inputType$ variables) {\n         org.kie.kogito.decision.DecisionModel decision = application.decisionModels().getDecisionModel(\"$modelNamespace$\", \"$modelName$\");\n-        OutputSet outputSet = (OutputSet)StronglyTypedUtils.convertToOutputSet(variables, OutputSet.class);\n+        OutputSet outputSet = (OutputSet) StronglyTypedUtils.convertToOutputSet(variables, OutputSet.class);\n         org.kie.kogito.dmn.rest.DMNResult result = new org.kie.kogito.dmn.rest.DMNResult(\"$modelNamespace$\", \"$modelName$\", decision.evaluateAll(DMNJSONUtils.ctx(decision, $inputData$)));\n+        enrichResponseHeaders(result);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE5NDAyOA=="}, "originalCommit": {"oid": "5c94a3747b28b68e9de1c9b92f7f4c0d952a4b34"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIyNjk5Ng==", "bodyText": "I removed that now...no need for it anymore with the latest changes \ud83d\udc4d", "url": "https://github.com/kiegroup/kogito-runtimes/pull/855#discussion_r514226996", "createdAt": "2020-10-29T12:40:58Z", "author": {"login": "kostola"}, "path": "kogito-codegen/src/main/resources/class-templates/DecisionRestResourceTemplate.java", "diffHunk": "@@ -39,11 +33,12 @@\n     @io.swagger.v3.oas.annotations.responses.ApiResponse(content = @io.swagger.v3.oas.annotations.media.Content(mediaType = \"application/json\",schema = @io.swagger.v3.oas.annotations.media.Schema(ref = \"/dmnDefinitions.json#/definitions/OutputSet1\")))\n     public $outputType$ dmn($inputType$ variables) {\n         org.kie.kogito.decision.DecisionModel decision = application.decisionModels().getDecisionModel(\"$modelNamespace$\", \"$modelName$\");\n-        OutputSet outputSet = (OutputSet)StronglyTypedUtils.convertToOutputSet(variables, OutputSet.class);\n+        OutputSet outputSet = (OutputSet) StronglyTypedUtils.convertToOutputSet(variables, OutputSet.class);\n         org.kie.kogito.dmn.rest.DMNResult result = new org.kie.kogito.dmn.rest.DMNResult(\"$modelNamespace$\", \"$modelName$\", decision.evaluateAll(DMNJSONUtils.ctx(decision, $inputData$)));\n+        enrichResponseHeaders(result);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE5NDAyOA=="}, "originalCommit": {"oid": "5c94a3747b28b68e9de1c9b92f7f4c0d952a4b34"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMTg0ODM1OnYy", "diffSide": "RIGHT", "path": "kogito-codegen/src/main/resources/class-templates/DecisionRestResourceTemplate.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMTo0MTo1NlrOHqX8Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjo0MToyMVrOHqZ8EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE5NDUzMA==", "bodyText": "Why return a value that is not used?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private DMNResult enrichResponseHeaders(DMNResult result) {\n          \n          \n            \n                private void enrichResponseHeaders(DMNResult result) {", "url": "https://github.com/kiegroup/kogito-runtimes/pull/855#discussion_r514194530", "createdAt": "2020-10-29T11:41:56Z", "author": {"login": "danielezonca"}, "path": "kogito-codegen/src/main/resources/class-templates/DecisionRestResourceTemplate.java", "diffHunk": "@@ -102,11 +94,18 @@ private Object extractSingletonDSIfSucceded(DMNResult result) {\n             throw new DMNEvaluationErrorException(result);\n         }\n     }\n-    \n-    private void enrichResponseHeaders(DMNResult result) {\n-        if (!result.getMessages().isEmpty()) {\n+\n+    private DMNResult enrichResponseHeaders(DMNResult result) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c94a3747b28b68e9de1c9b92f7f4c0d952a4b34"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIyNzIxNg==", "bodyText": "It was a leftover from previous changes. Fixed now \ud83d\udc4d", "url": "https://github.com/kiegroup/kogito-runtimes/pull/855#discussion_r514227216", "createdAt": "2020-10-29T12:41:21Z", "author": {"login": "kostola"}, "path": "kogito-codegen/src/main/resources/class-templates/DecisionRestResourceTemplate.java", "diffHunk": "@@ -102,11 +94,18 @@ private Object extractSingletonDSIfSucceded(DMNResult result) {\n             throw new DMNEvaluationErrorException(result);\n         }\n     }\n-    \n-    private void enrichResponseHeaders(DMNResult result) {\n-        if (!result.getMessages().isEmpty()) {\n+\n+    private DMNResult enrichResponseHeaders(DMNResult result) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE5NDUzMA=="}, "originalCommit": {"oid": "5c94a3747b28b68e9de1c9b92f7f4c0d952a4b34"}, "originalPosition": 80}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4661, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}