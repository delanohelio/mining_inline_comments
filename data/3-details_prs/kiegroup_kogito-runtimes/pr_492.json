{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MTA5Njk5", "number": 492, "title": "KOGITO-1895 Setup CI Build against Drools SNAPSHOT", "bodyText": "https://issues.redhat.com/browse/KOGITO-1895\nAdd a Jenkinsfile to set-up a periodic build for Drools snapshot", "createdAt": "2020-05-06T13:50:36Z", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492", "merged": true, "mergeCommit": {"oid": "93f13127508f913ad39f1d9c282c2421c8f0d9d6"}, "closed": true, "closedAt": "2020-05-14T06:15:57Z", "author": {"login": "evacchi"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceo8x4AH2gAyNDE0MTA5Njk5OmM1MmMxMTQ0NDI2MTc2Y2Y3OGE0YmFjMGRmYTc2YjU1NjJkMWEyMzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgkKbhAH2gAyNDE0MTA5Njk5OjhkMjAzOGI5NDU3MzYwNWVlN2ExZGI5YjNmZWY5OGI0ZWQ0NThkMzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c52c1144426176cf78a4bac0dfa76b5562d1a234", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/c52c1144426176cf78a4bac0dfa76b5562d1a234", "committedDate": "2020-05-06T13:46:24Z", "message": "KOGITO-1895 Setup CI Build against Drools SNAPSHOT"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NjY0Nzkx", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#pullrequestreview-406664791", "createdAt": "2020-05-06T14:24:01Z", "commit": {"oid": "c52c1144426176cf78a4bac0dfa76b5562d1a234"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NjY3MjEx", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#pullrequestreview-406667211", "createdAt": "2020-05-06T14:26:28Z", "commit": {"oid": "c52c1144426176cf78a4bac0dfa76b5562d1a234"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNDoyNjoyOFrOGRVsyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNDoyNjoyOFrOGRVsyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgzNDUwNA==", "bodyText": "just noticed ... we could put that as environment var (between options and stages part)\nenvironment {\n    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=7.37.0-SNAPSHOT\"\n}\n\nand then modify the command:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)\n          \n          \n            \n                                    maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n          \n      \n    \n    \n  \n\nNote the double quotes instead of single quote\nthat would avoid to repeat each time the correct version", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r420834504", "createdAt": "2020-05-06T14:26:28Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,50 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c52c1144426176cf78a4bac0dfa76b5562d1a234"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NzEwMzUy", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#pullrequestreview-406710352", "createdAt": "2020-05-06T15:08:41Z", "commit": {"oid": "c52c1144426176cf78a4bac0dfa76b5562d1a234"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNTowODo0MVrOGRXwLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNToxMjozNVrOGRX7lA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg2ODE0MQ==", "bodyText": "@evacchi also add the post-build notifications, see https://github.com/kiegroup/kogito-runtimes/blob/master/Jenkinsfile.deploy#L56", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r420868141", "createdAt": "2020-05-06T15:08:41Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,50 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        always {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c52c1144426176cf78a4bac0dfa76b5562d1a234"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg3MTA2MA==", "bodyText": "That should do, otherwise, you could look into https://www.mojohaus.org/versions-maven-plugin/examples/advancing-dependency-versions.html\nuse-latest-snapshots seems that could do the trick to keep the job always up-to-date.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r420871060", "createdAt": "2020-05-06T15:12:35Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,50 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgzNDUwNA=="}, "originalCommit": {"oid": "c52c1144426176cf78a4bac0dfa76b5562d1a234"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f5563bb06341be1519b51e65c132938cf29f138", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/4f5563bb06341be1519b51e65c132938cf29f138", "committedDate": "2020-05-08T10:42:20Z", "message": "use 'mvn versions:display-property-updates' to get latest version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/8c15ef901279a1bff9a956d437f3ef3e97a08fd1", "committedDate": "2020-05-08T10:43:32Z", "message": "postbuild"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4ODc2NjI1", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#pullrequestreview-408876625", "createdAt": "2020-05-11T05:53:56Z", "commit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNTo1Mzo1NlrOGTNdfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNTo1Nzo1NlrOGTNi_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5NjY2OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n          \n          \n            \n                        emailext body: 'Kogito daily Drools #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422796669", "createdAt": "2020-05-11T05:53:56Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        failure {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5NjczMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                 subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',\n          \n          \n            \n                                 subject: 'Kogito daily Drools #${BRANCH_NAME}',", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422796730", "createdAt": "2020-05-11T05:54:06Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        failure {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n+                    'Please look here: ${BUILD_URL} ',\n+                     subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5Njc3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n          \n          \n            \n                        emailext body: 'Kogito daily Drools #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422796776", "createdAt": "2020-05-11T05:54:15Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        failure {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n+                    'Please look here: ${BUILD_URL} ',\n+                     subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',\n+                     to: env.KOGITO_CI_EMAIL_TO\n+        }\n+        unstable {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5NjgyMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                 subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',\n          \n          \n            \n                                 subject: 'Kogito daily Drools #${BRANCH_NAME}',", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422796820", "createdAt": "2020-05-11T05:54:23Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        failure {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n+                    'Please look here: ${BUILD_URL} ',\n+                     subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',\n+                     to: env.KOGITO_CI_EMAIL_TO\n+        }\n+        unstable {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n+                     'Please look here: ${BUILD_URL} ',\n+                     subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5NzcyOA==", "bodyText": "because the Jenkins file is in kogito-runtimes, it will automatically checkout kogito-runtimes already, see https://github.com/kiegroup/kogito-runtimes/blob/master/Jenkinsfile.deploy#L27.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422797728", "createdAt": "2020-05-11T05:57:00Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5Nzc2OQ==", "bodyText": "missing kogito-apps?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422797769", "createdAt": "2020-05-11T05:57:09Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5ODA3Nw==", "bodyText": "this is nice, I would just suggest merging with Build kogito_runtimes stage", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422798077", "createdAt": "2020-05-11T05:57:56Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4OTg1ODk0", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#pullrequestreview-408985894", "createdAt": "2020-05-11T08:58:14Z", "commit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwODo1ODoxNFrOGTTG4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwODo1ODoxNFrOGTTG4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg4OTE4NQ==", "bodyText": "This should be put under stages parent, not here ...", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422889185", "createdAt": "2020-05-11T08:58:14Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c812f3809f8b31ba94ce8325760c0254da687db", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/8c812f3809f8b31ba94ce8325760c0254da687db", "committedDate": "2020-05-11T13:26:33Z", "message": "Update Jenkinsfile.drools\n\nCo-authored-by: Cristiano Nicolai <cristiano.nicolai@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "331e6e310847df6a198853b823c0abe744074566", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/331e6e310847df6a198853b823c0abe744074566", "committedDate": "2020-05-11T13:26:55Z", "message": "Update Jenkinsfile.drools\n\nCo-authored-by: Cristiano Nicolai <cristiano.nicolai@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf49fa4ee467bfee4f769529e09d8cf21b8663ac", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/cf49fa4ee467bfee4f769529e09d8cf21b8663ac", "committedDate": "2020-05-11T13:27:03Z", "message": "Update Jenkinsfile.drools\n\nCo-authored-by: Cristiano Nicolai <cristiano.nicolai@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a04ef72d9c3bb1435da3619bd9a9467cad33f54", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/3a04ef72d9c3bb1435da3619bd9a9467cad33f54", "committedDate": "2020-05-11T13:28:18Z", "message": "Update Jenkinsfile.drools\n\nCo-authored-by: Cristiano Nicolai <cristiano.nicolai@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b4336f2114e2712c96e0e21e375d484501963fa", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/9b4336f2114e2712c96e0e21e375d484501963fa", "committedDate": "2020-05-11T13:40:25Z", "message": "fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5MTk0Njc5", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#pullrequestreview-409194679", "createdAt": "2020-05-11T13:54:40Z", "commit": {"oid": "9b4336f2114e2712c96e0e21e375d484501963fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMzo1NDo0MFrOGTdVXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMzo1NDo0MFrOGTdVXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA1NjczNQ==", "bodyText": "This is no PR check or ?\nwe should not have the CHANGE_* vars here", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423056735", "createdAt": "2020-05-11T13:54:40Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,92 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    environment {\n+        // query mvn to get the latest version\n+        DROOLS_VERSION = \"\"\"${sh (\n+            script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+            returnStdout: true).trim()}\"\"\"\n+        MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+            }\n+        }\n+        stage('build sh script') {\n+            steps {\n+                script {\n+                    mailer.buildLogScriptPR()\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                script {\n+                    maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                }\n+            }\n+        }\n+        stage('Build kogito-apps') {\n+            steps {\n+                dir(\"kogito-apps\") {\n+                    script {\n+                        githubscm.checkoutIfExists('kogito-apps', \"$CHANGE_AUTHOR\", \"$CHANGE_BRANCH\", 'kiegroup', \"$CHANGE_TARGET\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b4336f2114e2712c96e0e21e375d484501963fa"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33da37897f59e12beef59a9fddf2f88769b7da6d", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/33da37897f59e12beef59a9fddf2f88769b7da6d", "committedDate": "2020-05-11T14:48:33Z", "message": "use alt checkout syntax"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NzYyNzgw", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#pullrequestreview-409762780", "createdAt": "2020-05-12T07:19:37Z", "commit": {"oid": "33da37897f59e12beef59a9fddf2f88769b7da6d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNzoxOTozN1rOGT5Q9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNzoyMDozNVrOGT5TAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzUxNDM1Ng==", "bodyText": "we dont need this step. the email notification on zulip should be enough.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423514356", "createdAt": "2020-05-12T07:19:37Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,96 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    triggers {\n+        cron ('H 10 * * *')\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    environment {\n+        KOGITO_CI_EMAIL_TO = credentials('KOGITO_CI_EMAIL_TO')\n+        // query mvn to get the latest version\n+        DROOLS_VERSION = \"\"\"${sh (\n+            script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+            returnStdout: true).trim()}\"\"\"\n+        MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+            }\n+        }\n+        stage('build sh script') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33da37897f59e12beef59a9fddf2f88769b7da6d"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzUxNDg4MA==", "bodyText": "@evacchi I mentioning removing this step because there is no point on doing sh 'printenv', I believe that was only for debugging.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423514880", "createdAt": "2020-05-12T07:20:35Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,96 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    triggers {\n+        cron ('H 10 * * *')\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    environment {\n+        KOGITO_CI_EMAIL_TO = credentials('KOGITO_CI_EMAIL_TO')\n+        // query mvn to get the latest version\n+        DROOLS_VERSION = \"\"\"${sh (\n+            script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+            returnStdout: true).trim()}\"\"\"\n+        MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33da37897f59e12beef59a9fddf2f88769b7da6d"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5ODM2MzI2", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#pullrequestreview-409836326", "createdAt": "2020-05-12T08:55:33Z", "commit": {"oid": "33da37897f59e12beef59a9fddf2f88769b7da6d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwODo1NTozM1rOGT82aA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwODo1NTozM1rOGT82aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzU3MzA5Ng==", "bodyText": "checkout should be outside the dir, else the folder might not exists", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423573096", "createdAt": "2020-05-12T08:55:33Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,96 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    triggers {\n+        cron ('H 10 * * *')\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    environment {\n+        KOGITO_CI_EMAIL_TO = credentials('KOGITO_CI_EMAIL_TO')\n+        // query mvn to get the latest version\n+        DROOLS_VERSION = \"\"\"${sh (\n+            script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+            returnStdout: true).trim()}\"\"\"\n+        MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+            }\n+        }\n+        stage('build sh script') {\n+            steps {\n+                script {\n+                    mailer.buildLogScriptPR()\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                script {\n+                    maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                }\n+            }\n+        }\n+        stage('Build kogito-apps') {\n+            steps {\n+                dir(\"kogito-apps\") {\n+                    script {\n+                        checkout([$class: 'GitSCM', branches: [[name: env.BRANCH_NAME]], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-apps.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-apps']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-apps.git']]])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33da37897f59e12beef59a9fddf2f88769b7da6d"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d2038b94573605ee7a1db9b3fef98b4ed458d38", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/8d2038b94573605ee7a1db9b3fef98b4ed458d38", "committedDate": "2020-05-12T13:19:38Z", "message": "fixes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3464, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}