{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MTA5Njk5", "number": 492, "reviewThreads": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNDoyNjoyOFrOD519JQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwODo1NTozM1rOD7jluw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxOTc5NDI5OnYy", "diffSide": "RIGHT", "path": "Jenkinsfile.drools", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNDoyNjoyOFrOGRVsyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQwOTo1MTozM1rOGSgGBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgzNDUwNA==", "bodyText": "just noticed ... we could put that as environment var (between options and stages part)\nenvironment {\n    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=7.37.0-SNAPSHOT\"\n}\n\nand then modify the command:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)\n          \n          \n            \n                                    maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n          \n      \n    \n    \n  \n\nNote the double quotes instead of single quote\nthat would avoid to repeat each time the correct version", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r420834504", "createdAt": "2020-05-06T14:26:28Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,50 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c52c1144426176cf78a4bac0dfa76b5562d1a234"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg3MTA2MA==", "bodyText": "That should do, otherwise, you could look into https://www.mojohaus.org/versions-maven-plugin/examples/advancing-dependency-versions.html\nuse-latest-snapshots seems that could do the trick to keep the job always up-to-date.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r420871060", "createdAt": "2020-05-06T15:12:35Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,50 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgzNDUwNA=="}, "originalCommit": {"oid": "c52c1144426176cf78a4bac0dfa76b5562d1a234"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjA1MzM4MQ==", "bodyText": "@cristianonicolai", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422053381", "createdAt": "2020-05-08T09:51:33Z", "author": {"login": "evacchi"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,50 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgzNDUwNA=="}, "originalCommit": {"oid": "c52c1144426176cf78a4bac0dfa76b5562d1a234"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMDAwMjY2OnYy", "diffSide": "RIGHT", "path": "Jenkinsfile.drools", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNTowODo0MVrOGRXwLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNTowODo0MVrOGRXwLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg2ODE0MQ==", "bodyText": "@evacchi also add the post-build notifications, see https://github.com/kiegroup/kogito-runtimes/blob/master/Jenkinsfile.deploy#L56", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r420868141", "createdAt": "2020-05-06T15:08:41Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,50 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        always {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c52c1144426176cf78a4bac0dfa76b5562d1a234"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMjg3MTY5OnYy", "diffSide": "RIGHT", "path": "Jenkinsfile.drools", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNTo1Mzo1NlrOGTNdfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNTo1Mzo1NlrOGTNdfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5NjY2OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n          \n          \n            \n                        emailext body: 'Kogito daily Drools #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422796669", "createdAt": "2020-05-11T05:53:56Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        failure {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMjg3MjE0OnYy", "diffSide": "RIGHT", "path": "Jenkinsfile.drools", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNTo1NDowNlrOGTNdug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNTo1NDowNlrOGTNdug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5NjczMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                 subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',\n          \n          \n            \n                                 subject: 'Kogito daily Drools #${BRANCH_NAME}',", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422796730", "createdAt": "2020-05-11T05:54:06Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        failure {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n+                    'Please look here: ${BUILD_URL} ',\n+                     subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMjg3MjQzOnYy", "diffSide": "RIGHT", "path": "Jenkinsfile.drools", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNTo1NDoxNVrOGTNd6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNTo1NDoxNVrOGTNd6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5Njc3Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n          \n          \n            \n                        emailext body: 'Kogito daily Drools #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422796776", "createdAt": "2020-05-11T05:54:15Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        failure {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n+                    'Please look here: ${BUILD_URL} ',\n+                     subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',\n+                     to: env.KOGITO_CI_EMAIL_TO\n+        }\n+        unstable {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMjg3MjcwOnYy", "diffSide": "RIGHT", "path": "Jenkinsfile.drools", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNTo1NDoyM1rOGTNeFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNTo1NDoyM1rOGTNeFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5NjgyMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                 subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',\n          \n          \n            \n                                 subject: 'Kogito daily Drools #${BRANCH_NAME}',", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422796820", "createdAt": "2020-05-11T05:54:23Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        failure {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n+                    'Please look here: ${BUILD_URL} ',\n+                     subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',\n+                     to: env.KOGITO_CI_EMAIL_TO\n+        }\n+        unstable {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n+                     'Please look here: ${BUILD_URL} ',\n+                     subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMjg3OTMzOnYy", "diffSide": "RIGHT", "path": "Jenkinsfile.drools", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNTo1NzowMFrOGTNhoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNTo1NzowMFrOGTNhoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5NzcyOA==", "bodyText": "because the Jenkins file is in kogito-runtimes, it will automatically checkout kogito-runtimes already, see https://github.com/kiegroup/kogito-runtimes/blob/master/Jenkinsfile.deploy#L27.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422797728", "createdAt": "2020-05-11T05:57:00Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMjg3OTU4OnYy", "diffSide": "RIGHT", "path": "Jenkinsfile.drools", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNTo1NzowOVrOGTNhyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMzoyNzozMlrOGTcMdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5Nzc2OQ==", "bodyText": "missing kogito-apps?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422797769", "createdAt": "2020-05-11T05:57:09Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg4OTM3MQ==", "bodyText": "do we need to test kogito-apps against drools ?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422889371", "createdAt": "2020-05-11T08:58:32Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5Nzc2OQ=="}, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg5NTk4NQ==", "bodyText": "probably not, but I would keep for the sake of consistency across builds.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422895985", "createdAt": "2020-05-11T09:09:30Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5Nzc2OQ=="}, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAzODA2OQ==", "bodyText": "ok that was intended, but I will bring it back -- it's daily after all", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423038069", "createdAt": "2020-05-11T13:27:32Z", "author": {"login": "evacchi"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5Nzc2OQ=="}, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMjg4MTg4OnYy", "diffSide": "RIGHT", "path": "Jenkinsfile.drools", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNTo1Nzo1NlrOGTNi_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMzozNTo0N1rOGTciSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5ODA3Nw==", "bodyText": "this is nice, I would just suggest merging with Build kogito_runtimes stage", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422798077", "createdAt": "2020-05-11T05:57:56Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg4ODY4OA==", "bodyText": "This can be done in environment in fact. See https://www.jenkins.io/doc/book/pipeline/jenkinsfile/#setting-environment-variables-dynamically", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422888688", "createdAt": "2020-05-11T08:57:28Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5ODA3Nw=="}, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA0MzY1OA==", "bodyText": "@cristianonicolai I think I'd rather keep it in the first stage so that it's easier to read. But we can move it...", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423043658", "createdAt": "2020-05-11T13:35:47Z", "author": {"login": "evacchi"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5ODA3Nw=="}, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzQ4NzExOnYy", "diffSide": "RIGHT", "path": "Jenkinsfile.drools", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwODo1ODoxNFrOGTTG4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMzo0ODoyMVrOGTdEJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg4OTE4NQ==", "bodyText": "This should be put under stages parent, not here ...", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422889185", "createdAt": "2020-05-11T08:58:14Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA0NDI5NQ==", "bodyText": "you mean right under stages {} ?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423044295", "createdAt": "2020-05-11T13:36:44Z", "author": {"login": "evacchi"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg4OTE4NQ=="}, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA0NzIxMQ==", "bodyText": "it should be look better now (it's under pipelines, like the main Jenkinsfile)", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423047211", "createdAt": "2020-05-11T13:40:55Z", "author": {"login": "evacchi"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg4OTE4NQ=="}, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA1MjMyNA==", "bodyText": "yeah I meant under pipeline ...", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423052324", "createdAt": "2020-05-11T13:48:21Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg4OTE4NQ=="}, "originalCommit": {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNDU0Njk2OnYy", "diffSide": "RIGHT", "path": "Jenkinsfile.drools", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMzo1NDo0MFrOGTdVXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNDo0OToyMFrOGTftxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA1NjczNQ==", "bodyText": "This is no PR check or ?\nwe should not have the CHANGE_* vars here", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423056735", "createdAt": "2020-05-11T13:54:40Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,92 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    environment {\n+        // query mvn to get the latest version\n+        DROOLS_VERSION = \"\"\"${sh (\n+            script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+            returnStdout: true).trim()}\"\"\"\n+        MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+            }\n+        }\n+        stage('build sh script') {\n+            steps {\n+                script {\n+                    mailer.buildLogScriptPR()\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                script {\n+                    maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                }\n+            }\n+        }\n+        stage('Build kogito-apps') {\n+            steps {\n+                dir(\"kogito-apps\") {\n+                    script {\n+                        githubscm.checkoutIfExists('kogito-apps', \"$CHANGE_AUTHOR\", \"$CHANGE_BRANCH\", 'kiegroup', \"$CHANGE_TARGET\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b4336f2114e2712c96e0e21e375d484501963fa"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA5NTc1MA==", "bodyText": "pushed change", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423095750", "createdAt": "2020-05-11T14:49:20Z", "author": {"login": "evacchi"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,92 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    environment {\n+        // query mvn to get the latest version\n+        DROOLS_VERSION = \"\"\"${sh (\n+            script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+            returnStdout: true).trim()}\"\"\"\n+        MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+            }\n+        }\n+        stage('build sh script') {\n+            steps {\n+                script {\n+                    mailer.buildLogScriptPR()\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                script {\n+                    maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                }\n+            }\n+        }\n+        stage('Build kogito-apps') {\n+            steps {\n+                dir(\"kogito-apps\") {\n+                    script {\n+                        githubscm.checkoutIfExists('kogito-apps', \"$CHANGE_AUTHOR\", \"$CHANGE_BRANCH\", 'kiegroup', \"$CHANGE_TARGET\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA1NjczNQ=="}, "originalCommit": {"oid": "9b4336f2114e2712c96e0e21e375d484501963fa"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNzM5NTkwOnYy", "diffSide": "RIGHT", "path": "Jenkinsfile.drools", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNzoxOTozN1rOGT5Q9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNzoxOTozN1rOGT5Q9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzUxNDM1Ng==", "bodyText": "we dont need this step. the email notification on zulip should be enough.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423514356", "createdAt": "2020-05-12T07:19:37Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,96 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    triggers {\n+        cron ('H 10 * * *')\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    environment {\n+        KOGITO_CI_EMAIL_TO = credentials('KOGITO_CI_EMAIL_TO')\n+        // query mvn to get the latest version\n+        DROOLS_VERSION = \"\"\"${sh (\n+            script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+            returnStdout: true).trim()}\"\"\"\n+        MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+            }\n+        }\n+        stage('build sh script') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33da37897f59e12beef59a9fddf2f88769b7da6d"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNzM5OTAwOnYy", "diffSide": "RIGHT", "path": "Jenkinsfile.drools", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNzoyMDozNVrOGT5TAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwODo1ODoxNFrOGT89Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzUxNDg4MA==", "bodyText": "@evacchi I mentioning removing this step because there is no point on doing sh 'printenv', I believe that was only for debugging.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423514880", "createdAt": "2020-05-12T07:20:35Z", "author": {"login": "cristianonicolai"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,96 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    triggers {\n+        cron ('H 10 * * *')\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    environment {\n+        KOGITO_CI_EMAIL_TO = credentials('KOGITO_CI_EMAIL_TO')\n+        // query mvn to get the latest version\n+        DROOLS_VERSION = \"\"\"${sh (\n+            script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+            returnStdout: true).trim()}\"\"\"\n+        MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33da37897f59e12beef59a9fddf2f88769b7da6d"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzU3NDg2Ng==", "bodyText": "oh ok", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423574866", "createdAt": "2020-05-12T08:58:14Z", "author": {"login": "evacchi"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,96 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    triggers {\n+        cron ('H 10 * * *')\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    environment {\n+        KOGITO_CI_EMAIL_TO = credentials('KOGITO_CI_EMAIL_TO')\n+        // query mvn to get the latest version\n+        DROOLS_VERSION = \"\"\"${sh (\n+            script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+            returnStdout: true).trim()}\"\"\"\n+        MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzUxNDg4MA=="}, "originalCommit": {"oid": "33da37897f59e12beef59a9fddf2f88769b7da6d"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNzc1Njc1OnYy", "diffSide": "RIGHT", "path": "Jenkinsfile.drools", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwODo1NTozM1rOGT82aA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwODo1NTozM1rOGT82aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzU3MzA5Ng==", "bodyText": "checkout should be outside the dir, else the folder might not exists", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423573096", "createdAt": "2020-05-12T08:55:33Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,96 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    triggers {\n+        cron ('H 10 * * *')\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    environment {\n+        KOGITO_CI_EMAIL_TO = credentials('KOGITO_CI_EMAIL_TO')\n+        // query mvn to get the latest version\n+        DROOLS_VERSION = \"\"\"${sh (\n+            script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+            returnStdout: true).trim()}\"\"\"\n+        MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+            }\n+        }\n+        stage('build sh script') {\n+            steps {\n+                script {\n+                    mailer.buildLogScriptPR()\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                script {\n+                    maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                }\n+            }\n+        }\n+        stage('Build kogito-apps') {\n+            steps {\n+                dir(\"kogito-apps\") {\n+                    script {\n+                        checkout([$class: 'GitSCM', branches: [[name: env.BRANCH_NAME]], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-apps.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-apps']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-apps.git']]])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33da37897f59e12beef59a9fddf2f88769b7da6d"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 90, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}