{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2NTkyODMw", "number": 870, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNzowODozMFrOE7J8Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNzowODozMFrOE7J8Rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNDY0MzI2OnYy", "diffSide": "RIGHT", "path": "jbpm/jbpm-bpmn2/src/main/java/org/jbpm/bpmn2/xml/CallActivityHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNzowODozMFrOH2o23w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMToxMzo0OVrOH25vjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA1NDU1OQ==", "bodyText": "I assume this was added just to distinguish between assigning a constant and copying the value of the parent process variable to the subprocess model.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/870#discussion_r527054559", "createdAt": "2020-11-19T17:08:30Z", "author": {"login": "MarianMacik"}, "path": "jbpm/jbpm-bpmn2/src/main/java/org/jbpm/bpmn2/xml/CallActivityHandler.java", "diffHunk": "@@ -189,30 +192,31 @@ protected void readDataInputAssociation(org.w3c.dom.Node xmlNode, SubProcessNode\n \t\t\t}\n \t\t\tsubProcessNode.addInMapping(dataInputs.get(to), from, transformation);\n         } else {\n-            // targetRef\n-            String to = subNode.getTextContent();            \n-            // assignment\n-            subNode = subNode.getNextSibling();\n-            if (subNode != null) {\n-                org.w3c.dom.Node subSubNode = subNode.getFirstChild();\n-                NodeList nl = subSubNode.getChildNodes();\n-                if (nl.getLength() > 1) {\n-                    // not supported ?\n-                    subProcessNode.addInMapping(dataInputs.get(to), subSubNode.getTextContent());\n-                    return;\n-                } else if (nl.getLength() == 0) {\n-                    return;\n-                }\n-                Object result = null;\n-                Object from = nl.item(0);\n-                if (from instanceof Text) {\n-                    result = ((Text) from).getTextContent();\n-                } else {\n-                    result = nl.item(0);\n-                }\n-                subProcessNode.addInMapping(dataInputs.get(to), result.toString());\n-                \n-            }\n+\t\t\t// targetRef\n+\t\t\tString to = subNode.getTextContent();\n+\t\t\t// assignment\n+\t\t\tsubNode = subNode.getNextSibling();\n+\t\t\tif (subNode != null) {\n+\t\t\t\torg.w3c.dom.Node subSubNode = subNode.getFirstChild();\n+\t\t\t\tNodeList nl = subSubNode.getChildNodes();\n+\t\t\t\tif (nl.getLength() > 1) {\n+\t\t\t\t\t// not supported ?\n+\t\t\t\t\tsubProcessNode.addInAssociation(\n+\t\t\t\t\t\t\tnew DataAssociation(subSubNode.getTextContent(), dataInputs.get(to), singletonList(new Assignment(null, subSubNode.getTextContent(), to)), null));\n+\t\t\t\t\treturn;\n+\t\t\t\t} else if (nl.getLength() == 0) {\n+\t\t\t\t\treturn;\n+\t\t\t\t}\n+\t\t\t\tObject result = null;\n+\t\t\t\tObject from = nl.item(0);\n+\t\t\t\tif (from instanceof Text) {\n+\t\t\t\t\tresult = ((Text) from).getTextContent();\n+\t\t\t\t} else {\n+\t\t\t\t\tresult = nl.item(0);\n+\t\t\t\t}\n+\t\t\t\tsubProcessNode.addInAssociation(\n+\t\t\t\t\t\tnew DataAssociation(result.toString(), dataInputs.get(to), singletonList(new Assignment(null, result.toString(), to)), null));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fc8f09162a37dd7086f7939c89ea13757a87ccc"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzMzMTIxNQ==", "bodyText": "@MarianMacik correct.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/870#discussion_r527331215", "createdAt": "2020-11-20T01:13:49Z", "author": {"login": "cristianonicolai"}, "path": "jbpm/jbpm-bpmn2/src/main/java/org/jbpm/bpmn2/xml/CallActivityHandler.java", "diffHunk": "@@ -189,30 +192,31 @@ protected void readDataInputAssociation(org.w3c.dom.Node xmlNode, SubProcessNode\n \t\t\t}\n \t\t\tsubProcessNode.addInMapping(dataInputs.get(to), from, transformation);\n         } else {\n-            // targetRef\n-            String to = subNode.getTextContent();            \n-            // assignment\n-            subNode = subNode.getNextSibling();\n-            if (subNode != null) {\n-                org.w3c.dom.Node subSubNode = subNode.getFirstChild();\n-                NodeList nl = subSubNode.getChildNodes();\n-                if (nl.getLength() > 1) {\n-                    // not supported ?\n-                    subProcessNode.addInMapping(dataInputs.get(to), subSubNode.getTextContent());\n-                    return;\n-                } else if (nl.getLength() == 0) {\n-                    return;\n-                }\n-                Object result = null;\n-                Object from = nl.item(0);\n-                if (from instanceof Text) {\n-                    result = ((Text) from).getTextContent();\n-                } else {\n-                    result = nl.item(0);\n-                }\n-                subProcessNode.addInMapping(dataInputs.get(to), result.toString());\n-                \n-            }\n+\t\t\t// targetRef\n+\t\t\tString to = subNode.getTextContent();\n+\t\t\t// assignment\n+\t\t\tsubNode = subNode.getNextSibling();\n+\t\t\tif (subNode != null) {\n+\t\t\t\torg.w3c.dom.Node subSubNode = subNode.getFirstChild();\n+\t\t\t\tNodeList nl = subSubNode.getChildNodes();\n+\t\t\t\tif (nl.getLength() > 1) {\n+\t\t\t\t\t// not supported ?\n+\t\t\t\t\tsubProcessNode.addInAssociation(\n+\t\t\t\t\t\t\tnew DataAssociation(subSubNode.getTextContent(), dataInputs.get(to), singletonList(new Assignment(null, subSubNode.getTextContent(), to)), null));\n+\t\t\t\t\treturn;\n+\t\t\t\t} else if (nl.getLength() == 0) {\n+\t\t\t\t\treturn;\n+\t\t\t\t}\n+\t\t\t\tObject result = null;\n+\t\t\t\tObject from = nl.item(0);\n+\t\t\t\tif (from instanceof Text) {\n+\t\t\t\t\tresult = ((Text) from).getTextContent();\n+\t\t\t\t} else {\n+\t\t\t\t\tresult = nl.item(0);\n+\t\t\t\t}\n+\t\t\t\tsubProcessNode.addInAssociation(\n+\t\t\t\t\t\tnew DataAssociation(result.toString(), dataInputs.get(to), singletonList(new Assignment(null, result.toString(), to)), null));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA1NDU1OQ=="}, "originalCommit": {"oid": "5fc8f09162a37dd7086f7939c89ea13757a87ccc"}, "originalPosition": 75}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4678, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}