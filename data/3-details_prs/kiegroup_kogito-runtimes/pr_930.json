{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1ODMzMDg5", "number": 930, "title": "[KOGITO-3969] Reviewed ApplicationGenerator.logger usage + removed dead code", "bodyText": "https://issues.redhat.com/browse/KOGITO-3969\nDetails:\n\nApplicationGenerator.logger now is a private field and each class has its own logger (to prevent misleading logging messages from a different package)\nRemoved ApplicationGenerator.log method (a debug method that logs generated content) and moved the logic to GeneratedFile constructor: now if debug is enabled, all generated classes are logged with also type and relativePath\nRemoved unused private fields in ConfigGenerator\nRemoved unused hasRuleUnits field from ApplicationGeneator and updated all the existing usages (all in tests)", "createdAt": "2020-12-10T10:32:38Z", "url": "https://github.com/kiegroup/kogito-runtimes/pull/930", "merged": true, "mergeCommit": {"oid": "d342bd481099734e9370d1ddac0f3386e652abed"}, "closed": true, "closedAt": "2020-12-11T12:32:25Z", "author": {"login": "danielezonca"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkwwQwAH2gAyNTM1ODMzMDg5OjY3NDAyMzFmNjVmNWZmYjhiODFhYjdkNWViYmFiZWYwZTIxMTE5Njk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlF0MVAFqTU0OTk5ODQ2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6740231f65f5ffb8b81ab7d5ebbabef0e2111969", "author": {"user": {"login": "danielezonca", "name": "Daniele Zonca"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/6740231f65f5ffb8b81ab7d5ebbabef0e2111969", "committedDate": "2020-12-10T10:26:40Z", "message": "[KOGITO-3969] Reviewed ApplicationGenerator.logger usage + removed dead code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5MDYzMjYy", "url": "https://github.com/kiegroup/kogito-runtimes/pull/930#pullrequestreview-549063262", "createdAt": "2020-12-10T10:37:18Z", "commit": {"oid": "6740231f65f5ffb8b81ab7d5ebbabef0e2111969"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxMDozNzoxOFrOIDCmtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxMDozNzoxOFrOIDCmtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA1OTMxNg==", "bodyText": "I know that you did it to avoid repetition but I don't love that we are now logging within the constructor of this class, because now it will probably log stuff that we may not really care about (eg resources)\nOTOH: I never loved this logging; this stuff is dumped to disk sooner or later, so  it's much easier to read it from a file, rather than displayed on the console log.\nSo I am ok with the change, although it feels a bit strange (to me).", "url": "https://github.com/kiegroup/kogito-runtimes/pull/930#discussion_r540059316", "createdAt": "2020-12-10T10:37:18Z", "author": {"login": "evacchi"}, "path": "kogito-codegen/src/main/java/org/kie/kogito/codegen/prediction/PredictionCodegen.java", "diffHunk": "@@ -234,6 +233,6 @@ private void addModels(final List<KiePMMLModel> kiepmmlModels, final PMMLResourc\n \n \n     private void storeFile(GeneratedFile.Type type, String path, String source) {\n-        generatedFiles.add(new GeneratedFile(type, path, log(source).getBytes(StandardCharsets.UTF_8)));\n+        generatedFiles.add(new GeneratedFile(type, path, source));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6740231f65f5ffb8b81ab7d5ebbabef0e2111969"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5MDYzMzI5", "url": "https://github.com/kiegroup/kogito-runtimes/pull/930#pullrequestreview-549063329", "createdAt": "2020-12-10T10:37:22Z", "commit": {"oid": "6740231f65f5ffb8b81ab7d5ebbabef0e2111969"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48e49362639bb7c3a1450dc58b73a4e9f3aa5d21", "author": {"user": {"login": "danielezonca", "name": "Daniele Zonca"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/48e49362639bb7c3a1450dc58b73a4e9f3aa5d21", "committedDate": "2020-12-10T13:19:45Z", "message": "[KOGITO-3969] Move logging to ApplicationGenerator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5OTY4MzU1", "url": "https://github.com/kiegroup/kogito-runtimes/pull/930#pullrequestreview-549968355", "createdAt": "2020-12-11T10:16:43Z", "commit": {"oid": "48e49362639bb7c3a1450dc58b73a4e9f3aa5d21"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMDoxNjo0NFrOIDyMrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMDoxODoxNlrOIDyQgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDgzOTA4Nw==", "bodyText": "could we put the logger as LOGGER ?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/930#discussion_r540839087", "createdAt": "2020-12-11T10:16:44Z", "author": {"login": "radtriste"}, "path": "kogito-codegen/src/main/java/org/kie/kogito/codegen/ApplicationGenerator.java", "diffHunk": "@@ -41,7 +40,7 @@\n \n public class ApplicationGenerator {\n \n-    public static final Logger logger = LoggerFactory.getLogger(ApplicationGenerator.class);\n+    private static final Logger logger = LoggerFactory.getLogger(ApplicationGenerator.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48e49362639bb7c3a1450dc58b73a4e9f3aa5d21"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDgzOTYwMg==", "bodyText": "could we rename as LOGGER ?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/930#discussion_r540839602", "createdAt": "2020-12-11T10:17:32Z", "author": {"login": "radtriste"}, "path": "kogito-codegen/src/main/java/org/kie/kogito/codegen/decision/DecisionCodegen.java", "diffHunk": "@@ -222,25 +220,25 @@ private void generateStronglyTypedInput(DMNModel model) {\n             DMNTypeSafeTypeGenerator generator = new DMNTypeSafeTypeGenerator(model, index, factory).withJacksonAnnotation();\n             boolean useMPAnnotations = isMPAnnotationsPresent();\n             if (useMPAnnotations) {\n-                logger.debug(\"useMPAnnotations\");\n+                LOG.debug(\"useMPAnnotations\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48e49362639bb7c3a1450dc58b73a4e9f3aa5d21"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDgzOTgzMw==", "bodyText": "LOGGER", "url": "https://github.com/kiegroup/kogito-runtimes/pull/930#discussion_r540839833", "createdAt": "2020-12-11T10:17:51Z", "author": {"login": "radtriste"}, "path": "kogito-codegen/src/main/java/org/kie/kogito/codegen/rules/DeclaredTypeCodegen.java", "diffHunk": "@@ -46,12 +46,15 @@\n import org.kie.kogito.codegen.KogitoPackageSources;\n import org.kie.kogito.codegen.di.DependencyInjectionAnnotator;\n import org.kie.kogito.codegen.rules.config.RuleConfigGenerator;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n \n import static java.util.stream.Collectors.toList;\n-import static org.kie.kogito.codegen.ApplicationGenerator.logger;\n \n public class DeclaredTypeCodegen extends AbstractGenerator {\n \n+    private static final Logger logger = LoggerFactory.getLogger(DeclaredTypeCodegen.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48e49362639bb7c3a1450dc58b73a4e9f3aa5d21"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg0MDA2Nw==", "bodyText": "LOGGER", "url": "https://github.com/kiegroup/kogito-runtimes/pull/930#discussion_r540840067", "createdAt": "2020-12-11T10:18:16Z", "author": {"login": "radtriste"}, "path": "kogito-codegen/src/main/java/org/kie/kogito/codegen/rules/IncrementalRuleCodegen.java", "diffHunk": "@@ -80,16 +80,18 @@\n import org.kie.kogito.rules.RuleUnitConfig;\n import org.kie.kogito.rules.units.AssignableChecker;\n import org.kie.kogito.rules.units.ReflectiveRuleUnitDescription;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n \n import static java.util.stream.Collectors.toList;\n \n import static com.github.javaparser.StaticJavaParser.parse;\n import static org.drools.compiler.kie.builder.impl.KieBuilderImpl.setDefaultsforEmptyKieModule;\n-import static org.kie.kogito.codegen.ApplicationGenerator.log;\n-import static org.kie.kogito.codegen.ApplicationGenerator.logger;\n \n public class IncrementalRuleCodegen extends AbstractGenerator {\n \n+    private static final Logger logger = LoggerFactory.getLogger(IncrementalRuleCodegen.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48e49362639bb7c3a1450dc58b73a4e9f3aa5d21"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fefe1e88c6a56c46a2969fc70307a270bbd65b17", "author": {"user": {"login": "danielezonca", "name": "Daniele Zonca"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/fefe1e88c6a56c46a2969fc70307a270bbd65b17", "committedDate": "2020-12-11T10:28:50Z", "message": "Merge remote-tracking branch 'upstream/master' into KOGITO-3969"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d65fd9f9c9570e16d5a9a2a48bf4fec835988037", "author": {"user": {"login": "danielezonca", "name": "Daniele Zonca"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/d65fd9f9c9570e16d5a9a2a48bf4fec835988037", "committedDate": "2020-12-11T10:32:43Z", "message": "Renamed logger -> LOGGER"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5OTk4NDYx", "url": "https://github.com/kiegroup/kogito-runtimes/pull/930#pullrequestreview-549998461", "createdAt": "2020-12-11T10:58:59Z", "commit": {"oid": "d65fd9f9c9570e16d5a9a2a48bf4fec835988037"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3901, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}