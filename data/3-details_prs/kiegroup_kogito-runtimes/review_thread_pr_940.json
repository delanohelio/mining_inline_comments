{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQwOTkzNTYw", "number": 940, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNjowMzo1N1rOFWQLPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNjowMzo1N1rOFWQLPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzU4ODc4MDE1OnYy", "diffSide": "RIGHT", "path": ".jenkins/dsl/jobs.groovy", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNjowMzo1N1rOIfJ0Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wNFQxNTozODoxMlrOIf5xsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTUzNzU3MQ==", "bodyText": "Should this be createPRJob so that it has a GitHub trigger? But, it should also have a different trigger phrase for BDD tests.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/940#discussion_r569537571", "createdAt": "2021-02-03T16:03:57Z", "author": {"login": "Kevin-Mok"}, "path": ".jenkins/dsl/jobs.groovy", "diffHunk": "@@ -0,0 +1,223 @@\n+import org.kie.jenkins.jobdsl.templates.KogitoJobTemplate\n+import org.kie.jenkins.jobdsl.KogitoConstants\n+import org.kie.jenkins.jobdsl.Utils\n+import org.kie.jenkins.jobdsl.KogitoJobType\n+\n+boolean isMainBranch() {\n+    return \"${GIT_BRANCH}\" == \"${GIT_MAIN_BRANCH}\"\n+}\n+\n+def getDefaultJobParams() {\n+    return [\n+        job: [\n+            name: 'kogito-runtimes'\n+        ],\n+        git: [\n+            author: \"${GIT_AUTHOR_NAME}\",\n+            branch: \"${GIT_BRANCH}\",\n+            repository: 'kogito-runtimes',\n+            credentials: \"${GIT_AUTHOR_CREDENTIALS_ID}\",\n+            token_credentials: \"${GIT_AUTHOR_TOKEN_CREDENTIALS_ID}\"\n+        ]\n+    ]\n+}\n+\n+def getJobParams(String jobName, String jobFolder, String jenkinsfileName, String jobDescription = '') {\n+    def jobParams = getDefaultJobParams()\n+    jobParams.job.name = jobName\n+    jobParams.job.folder = jobFolder\n+    jobParams.jenkinsfile = jenkinsfileName\n+    if (jobDescription) {\n+        jobParams.job.description = jobDescription\n+    }\n+    return jobParams\n+}\n+\n+def bddRuntimesPrFolder = \"${KogitoConstants.KOGITO_DSL_PULLREQUEST_FOLDER}/${KogitoConstants.KOGITO_DSL_RUNTIMES_BDD_FOLDER}\"\n+def nightlyBranchFolder = \"${KogitoConstants.KOGITO_DSL_NIGHTLY_FOLDER}/${JOB_BRANCH_FOLDER}\"\n+def releaseBranchFolder = \"${KogitoConstants.KOGITO_DSL_RELEASE_FOLDER}/${JOB_BRANCH_FOLDER}\"\n+\n+if (isMainBranch()) {\n+    folder(KogitoConstants.KOGITO_DSL_PULLREQUEST_FOLDER)\n+\n+    setupPrJob(KogitoConstants.KOGITO_DSL_PULLREQUEST_FOLDER)\n+\n+    setupDroolsJob(nightlyBranchFolder)\n+    setupQuarkusJob(nightlyBranchFolder)\n+\n+    // For BDD runtimes PR job\n+    folder(bddRuntimesPrFolder)\n+\n+    setupDeployJob(bddRuntimesPrFolder, KogitoJobType.PR)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c93af70d20f7c8c12b70ac29fa8791031589210"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MDMyMzM3Nw==", "bodyText": "The PR job with GH trigger is created in kogito-pipelines. Here we are just providing the deploy job to that pullrequest/kogito-runtimes.bdd so it can call the deploy job with correct setup.\nSee https://rhba-jenkins.rhev-ci-vms.eng.rdu2.redhat.com/job/custom/job/tradisso/job/dsl_test/job/pullrequest/job/kogito-runtimes.bdd/ for example", "url": "https://github.com/kiegroup/kogito-runtimes/pull/940#discussion_r570323377", "createdAt": "2021-02-04T15:38:12Z", "author": {"login": "radtriste"}, "path": ".jenkins/dsl/jobs.groovy", "diffHunk": "@@ -0,0 +1,223 @@\n+import org.kie.jenkins.jobdsl.templates.KogitoJobTemplate\n+import org.kie.jenkins.jobdsl.KogitoConstants\n+import org.kie.jenkins.jobdsl.Utils\n+import org.kie.jenkins.jobdsl.KogitoJobType\n+\n+boolean isMainBranch() {\n+    return \"${GIT_BRANCH}\" == \"${GIT_MAIN_BRANCH}\"\n+}\n+\n+def getDefaultJobParams() {\n+    return [\n+        job: [\n+            name: 'kogito-runtimes'\n+        ],\n+        git: [\n+            author: \"${GIT_AUTHOR_NAME}\",\n+            branch: \"${GIT_BRANCH}\",\n+            repository: 'kogito-runtimes',\n+            credentials: \"${GIT_AUTHOR_CREDENTIALS_ID}\",\n+            token_credentials: \"${GIT_AUTHOR_TOKEN_CREDENTIALS_ID}\"\n+        ]\n+    ]\n+}\n+\n+def getJobParams(String jobName, String jobFolder, String jenkinsfileName, String jobDescription = '') {\n+    def jobParams = getDefaultJobParams()\n+    jobParams.job.name = jobName\n+    jobParams.job.folder = jobFolder\n+    jobParams.jenkinsfile = jenkinsfileName\n+    if (jobDescription) {\n+        jobParams.job.description = jobDescription\n+    }\n+    return jobParams\n+}\n+\n+def bddRuntimesPrFolder = \"${KogitoConstants.KOGITO_DSL_PULLREQUEST_FOLDER}/${KogitoConstants.KOGITO_DSL_RUNTIMES_BDD_FOLDER}\"\n+def nightlyBranchFolder = \"${KogitoConstants.KOGITO_DSL_NIGHTLY_FOLDER}/${JOB_BRANCH_FOLDER}\"\n+def releaseBranchFolder = \"${KogitoConstants.KOGITO_DSL_RELEASE_FOLDER}/${JOB_BRANCH_FOLDER}\"\n+\n+if (isMainBranch()) {\n+    folder(KogitoConstants.KOGITO_DSL_PULLREQUEST_FOLDER)\n+\n+    setupPrJob(KogitoConstants.KOGITO_DSL_PULLREQUEST_FOLDER)\n+\n+    setupDroolsJob(nightlyBranchFolder)\n+    setupQuarkusJob(nightlyBranchFolder)\n+\n+    // For BDD runtimes PR job\n+    folder(bddRuntimesPrFolder)\n+\n+    setupDeployJob(bddRuntimesPrFolder, KogitoJobType.PR)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTUzNzU3MQ=="}, "originalCommit": {"oid": "9c93af70d20f7c8c12b70ac29fa8791031589210"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4736, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}