{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2MTIxMDI1", "number": 692, "title": "KOGITO-3009 Consolidate Docker image tests to use kogito-test-utils", "bodyText": "", "createdAt": "2020-08-11T13:55:36Z", "url": "https://github.com/kiegroup/kogito-runtimes/pull/692", "merged": true, "mergeCommit": {"oid": "2dcdb8e8b99a7ee0247c4c9cb0a7064d36e3f817"}, "closed": true, "closedAt": "2020-08-18T03:32:49Z", "author": {"login": "cristianonicolai"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-F9ChgFqTQ2NTYzNTU3NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-e6LUgFqTQ2NjcwMDE3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NjM1NTc1", "url": "https://github.com/kiegroup/kogito-runtimes/pull/692#pullrequestreview-465635575", "createdAt": "2020-08-12T06:53:36Z", "commit": {"oid": "a5d0a47060ac9f9ee650da96d75880c0b0b129b6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjo1MzozNlrOG_UHig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNzowNDo1N1rOG_UbmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA0MzA4Mg==", "bodyText": "I named it KogitoKafkaContainer on purpose to distinguish from the one provided by testcontainers. If both are called the same, final user could have doubts about which one to use.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/692#discussion_r469043082", "createdAt": "2020-08-12T06:53:36Z", "author": {"login": "Sgitario"}, "path": "kogito-test-utils/src/main/java/org/kie/kogito/testcontainers/KafkaContainer.java", "diffHunk": "@@ -18,26 +18,24 @@\n import org.kie.kogito.resources.TestResource;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n-import org.testcontainers.containers.KafkaContainer;\n import org.testcontainers.containers.output.Slf4jLogConsumer;\n \n /**\n  * Kafka Container for Kogito examples.\n  */\n-public class KogitoKafkaContainer extends KafkaContainer implements TestResource {\n+public class KafkaContainer extends org.testcontainers.containers.KafkaContainer implements TestResource {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5d0a47060ac9f9ee650da96d75880c0b0b129b6"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA0NjczNw==", "bodyText": "There is an issue here. If the container is disabled by configuration, the start will be called, but the inner container won't be started.\nA possible solution to this could be:\n\nMake the start method \"final\" in ConditionalQuarkusTestResource and ConditionalSpringBootTestResource, so we won't allow to override it.\nAdd a new method preStart in ConditionalQuarkusTestResource and ConditionalSpringBootTestResource which is executed always when the test resource is enabled.\nThe new preStart method could return the map and the start method could join the maps.\n\nWhat do you think?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/692#discussion_r469046737", "createdAt": "2020-08-12T07:01:39Z", "author": {"login": "Sgitario"}, "path": "kogito-test-utils/src/main/java/org/kie/kogito/testcontainers/quarkus/KeycloakQuarkusTestResource.java", "diffHunk": "@@ -40,12 +57,21 @@ protected String getKogitoPropertyValue() {\n         return String.format(\"http://localhost:%s/auth/realms/kogito\", getTestResource().getMappedPort());\n     }\n \n+    @Override\n+    public Map<String, String> start() {\n+        final Map<String, String> start = super.start();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5d0a47060ac9f9ee650da96d75880c0b0b129b6"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA0ODIxNg==", "bodyText": "I was following the approach of having the arguments \"container.image.[COMPONENT].version\" (see this PR to consolidate the one in Infinispan).\nI don't mind to use either \"version.org.[COMPONENT]\" or \"container.image.[COMPONENT].version\" but let's use the same approach.\nIf you prefer using \"version.org.[COMPONENT]\", I would need to make some changes in some PRs (as it implies changes also in kogito-apps and kogito-examples).", "url": "https://github.com/kiegroup/kogito-runtimes/pull/692#discussion_r469048216", "createdAt": "2020-08-12T07:04:57Z", "author": {"login": "Sgitario"}, "path": "pom.xml", "diffHunk": "@@ -154,8 +154,7 @@\n \n     <!-- container images for testing -->\n     <container.image.infinispan>quay.io/infinispan/server:${version.org.infinispan.image}</container.image.infinispan>\n-    <container.image.keycloak.version>8.0.1</container.image.keycloak.version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5d0a47060ac9f9ee650da96d75880c0b0b129b6"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a5d0a47060ac9f9ee650da96d75880c0b0b129b6", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/a5d0a47060ac9f9ee650da96d75880c0b0b129b6", "committedDate": "2020-08-11T13:54:59Z", "message": "KOGITO-3009 Consolidate Docker image tests to use kogito-test-utils"}, "afterCommit": {"oid": "2038fcc91158e571d9cd6a47c2ed7724d045cc8f", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/2038fcc91158e571d9cd6a47c2ed7724d045cc8f", "committedDate": "2020-08-13T11:39:57Z", "message": "KOGITO-3009 Consolidate Docker image tests to use kogito-test-utils"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2038fcc91158e571d9cd6a47c2ed7724d045cc8f", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/2038fcc91158e571d9cd6a47c2ed7724d045cc8f", "committedDate": "2020-08-13T11:39:57Z", "message": "KOGITO-3009 Consolidate Docker image tests to use kogito-test-utils"}, "afterCommit": {"oid": "3e95ab1eead8b3db43ed675f6512d498800d53d0", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/3e95ab1eead8b3db43ed675f6512d498800d53d0", "committedDate": "2020-08-13T11:41:25Z", "message": "KOGITO-3009 Consolidate Docker image tests to use kogito-test-utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5cf4c9f50ef97c3d8edda8c34270519f70d68ef", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/b5cf4c9f50ef97c3d8edda8c34270519f70d68ef", "committedDate": "2020-08-13T11:43:33Z", "message": "KOGITO-3009 Consolidate Docker image tests to use kogito-test-utils"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e95ab1eead8b3db43ed675f6512d498800d53d0", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/3e95ab1eead8b3db43ed675f6512d498800d53d0", "committedDate": "2020-08-13T11:41:25Z", "message": "KOGITO-3009 Consolidate Docker image tests to use kogito-test-utils"}, "afterCommit": {"oid": "b5cf4c9f50ef97c3d8edda8c34270519f70d68ef", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/b5cf4c9f50ef97c3d8edda8c34270519f70d68ef", "committedDate": "2020-08-13T11:43:33Z", "message": "KOGITO-3009 Consolidate Docker image tests to use kogito-test-utils"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NzAwMTc4", "url": "https://github.com/kiegroup/kogito-runtimes/pull/692#pullrequestreview-466700178", "createdAt": "2020-08-13T12:10:06Z", "commit": {"oid": "b5cf4c9f50ef97c3d8edda8c34270519f70d68ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4104, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}