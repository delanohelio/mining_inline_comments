{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4NjE3MDc2", "number": 510, "title": "[KOGITO-2125] Implement decision tracing addon for Spring Boot", "bodyText": "", "createdAt": "2020-05-15T14:14:03Z", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510", "merged": true, "mergeCommit": {"oid": "57165165f392991bd92b9fb8f638a2a943e42041"}, "closed": true, "closedAt": "2020-05-27T15:12:58Z", "author": {"login": "kostola"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchje-zAFqTQxMjcwMDk2MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABclWseNAFqTQxOTA2MDI1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNzAwOTYx", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#pullrequestreview-412700961", "createdAt": "2020-05-15T14:31:00Z", "commit": {"oid": "a70bfe3b65c503333708954412c7d6de6d888efc"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxNDozMTowMVrOGWHVQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxNTowNTo1OFrOGWIvWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTg0MTk4Ng==", "bodyText": "Do you really need to import this BOM here? I think it should be better to import it inside tracing-decision-springboot-addon", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#discussion_r425841986", "createdAt": "2020-05-15T14:31:01Z", "author": {"login": "danielezonca"}, "path": "addons/pom.xml", "diffHunk": "@@ -37,6 +37,13 @@\n         <type>pom</type>\n         <scope>import</scope>\n       </dependency>\n+      <dependency>\n+        <groupId>org.springframework.boot</groupId>\n+        <artifactId>spring-boot-dependencies</artifactId>\n+        <version>${version.springboot}</version>\n+        <type>pom</type>\n+        <scope>import</scope>\n+      </dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a70bfe3b65c503333708954412c7d6de6d888efc"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTg0MzE4MA==", "bodyText": "I think it is better to remove this localhost:9092 default. It is almost impossible that Kafka is going to run on the same machine and I prefer to fail fast if this value has not been provided :)", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#discussion_r425843180", "createdAt": "2020-05-15T14:32:57Z", "author": {"login": "danielezonca"}, "path": "addons/tracing/tracing-decision-springboot-addon/src/main/java/org/kie/kogito/tracing/decision/KogitoDecisionTracingConfiguration.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.tracing.decision;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.apache.kafka.clients.admin.AdminClientConfig;\n+import org.apache.kafka.clients.admin.NewTopic;\n+import org.apache.kafka.clients.producer.ProducerConfig;\n+import org.apache.kafka.common.serialization.StringSerializer;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.context.annotation.Bean;\n+import org.springframework.context.annotation.Configuration;\n+import org.springframework.context.event.ApplicationEventMulticaster;\n+import org.springframework.context.event.SimpleApplicationEventMulticaster;\n+import org.springframework.core.task.SimpleAsyncTaskExecutor;\n+import org.springframework.kafka.core.DefaultKafkaProducerFactory;\n+import org.springframework.kafka.core.KafkaAdmin;\n+import org.springframework.kafka.core.KafkaTemplate;\n+import org.springframework.kafka.core.ProducerFactory;\n+\n+@Configuration\n+public class KogitoDecisionTracingConfiguration {\n+\n+    @Value(value = \"${kogito.addon.tracing.decision.kafka.bootstrapAddress:localhost:9092}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a70bfe3b65c503333708954412c7d6de6d888efc"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTg0ODU0Mw==", "bodyText": "Are you sure about that? I don't see any \"Kogito\" specific filter or similar so I expect this will receive all messages, from Kogito or not", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#discussion_r425848543", "createdAt": "2020-05-15T14:41:12Z", "author": {"login": "danielezonca"}, "path": "addons/tracing/tracing-decision-springboot-addon/src/main/java/org/kie/kogito/tracing/decision/KogitoDecisionTracingConfiguration.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.tracing.decision;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.apache.kafka.clients.admin.AdminClientConfig;\n+import org.apache.kafka.clients.admin.NewTopic;\n+import org.apache.kafka.clients.producer.ProducerConfig;\n+import org.apache.kafka.common.serialization.StringSerializer;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.context.annotation.Bean;\n+import org.springframework.context.annotation.Configuration;\n+import org.springframework.context.event.ApplicationEventMulticaster;\n+import org.springframework.context.event.SimpleApplicationEventMulticaster;\n+import org.springframework.core.task.SimpleAsyncTaskExecutor;\n+import org.springframework.kafka.core.DefaultKafkaProducerFactory;\n+import org.springframework.kafka.core.KafkaAdmin;\n+import org.springframework.kafka.core.KafkaTemplate;\n+import org.springframework.kafka.core.ProducerFactory;\n+\n+@Configuration\n+public class KogitoDecisionTracingConfiguration {\n+\n+    @Value(value = \"${kogito.addon.tracing.decision.kafka.bootstrapAddress:localhost:9092}\")\n+    private String kafkaBootstrapAddress;\n+\n+    @Value(value = \"${kogito.addon.tracing.decision.kafka.topic:kogito-tracing-decision}\")\n+    private String kafkaTopic;\n+\n+    /**\n+     * Defining a {@link KafkaAdmin} bean allows to automatically add topic to the broker via {@link NewTopic} beans\n+     */\n+    @Bean\n+    public KafkaAdmin kafkaAdmin() {\n+        Map<String, Object> configs = new HashMap<>();\n+        configs.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaBootstrapAddress);\n+        return new KafkaAdmin(configs);\n+    }\n+\n+    /**\n+     * {@link NewTopic} bean to create the addon Kafka topic (if the topic already exists this is ignored)\n+     */\n+    @Bean\n+    public NewTopic topic() {\n+        return new NewTopic(kafkaTopic, 1, (short) 1);\n+    }\n+\n+    /**\n+     * Configure producers\n+     */\n+    @Bean\n+    public ProducerFactory<String, String> producerFactory() {\n+        Map<String, Object> configProps = new HashMap<>();\n+        configProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaBootstrapAddress);\n+        configProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n+        configProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n+        return new DefaultKafkaProducerFactory<>(configProps);\n+    }\n+\n+    /**\n+     * Configure {@link KafkaTemplate} object used by producers to send messages\n+     */\n+    @Bean\n+    public KafkaTemplate<String, String> kafkaTemplate() {\n+        return new KafkaTemplate<>(producerFactory());\n+    }\n+\n+    /**\n+     * Configure asynchronous event management.\n+     * Events sent by {@link KogitoDecisionTracingListener} will be handled by {@link KogitoDecisionTracingCollector}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a70bfe3b65c503333708954412c7d6de6d888efc"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTg1MDA1Mw==", "bodyText": "What about KogitoTracingEvaluateEvent name?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#discussion_r425850053", "createdAt": "2020-05-15T14:43:24Z", "author": {"login": "danielezonca"}, "path": "addons/tracing/tracing-decision-springboot-addon/src/main/java/org/kie/kogito/tracing/decision/event/ApplicationEvaluateEvent.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.tracing.decision.event;\n+\n+import org.springframework.context.ApplicationEvent;\n+\n+public class ApplicationEvaluateEvent extends ApplicationEvent {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a70bfe3b65c503333708954412c7d6de6d888efc"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTg2NTA1MA==", "bodyText": "Is there any reason for using a specific name?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#discussion_r425865050", "createdAt": "2020-05-15T15:05:58Z", "author": {"login": "danielezonca"}, "path": "addons/tracing/tracing-decision-springboot-addon/src/main/java/org/kie/kogito/tracing/decision/KogitoDecisionTracingConfiguration.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.tracing.decision;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.apache.kafka.clients.admin.AdminClientConfig;\n+import org.apache.kafka.clients.admin.NewTopic;\n+import org.apache.kafka.clients.producer.ProducerConfig;\n+import org.apache.kafka.common.serialization.StringSerializer;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.context.annotation.Bean;\n+import org.springframework.context.annotation.Configuration;\n+import org.springframework.context.event.ApplicationEventMulticaster;\n+import org.springframework.context.event.SimpleApplicationEventMulticaster;\n+import org.springframework.core.task.SimpleAsyncTaskExecutor;\n+import org.springframework.kafka.core.DefaultKafkaProducerFactory;\n+import org.springframework.kafka.core.KafkaAdmin;\n+import org.springframework.kafka.core.KafkaTemplate;\n+import org.springframework.kafka.core.ProducerFactory;\n+\n+@Configuration\n+public class KogitoDecisionTracingConfiguration {\n+\n+    @Value(value = \"${kogito.addon.tracing.decision.kafka.bootstrapAddress:localhost:9092}\")\n+    private String kafkaBootstrapAddress;\n+\n+    @Value(value = \"${kogito.addon.tracing.decision.kafka.topic:kogito-tracing-decision}\")\n+    private String kafkaTopic;\n+\n+    /**\n+     * Defining a {@link KafkaAdmin} bean allows to automatically add topic to the broker via {@link NewTopic} beans\n+     */\n+    @Bean\n+    public KafkaAdmin kafkaAdmin() {\n+        Map<String, Object> configs = new HashMap<>();\n+        configs.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaBootstrapAddress);\n+        return new KafkaAdmin(configs);\n+    }\n+\n+    /**\n+     * {@link NewTopic} bean to create the addon Kafka topic (if the topic already exists this is ignored)\n+     */\n+    @Bean\n+    public NewTopic topic() {\n+        return new NewTopic(kafkaTopic, 1, (short) 1);\n+    }\n+\n+    /**\n+     * Configure producers\n+     */\n+    @Bean\n+    public ProducerFactory<String, String> producerFactory() {\n+        Map<String, Object> configProps = new HashMap<>();\n+        configProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaBootstrapAddress);\n+        configProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n+        configProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n+        return new DefaultKafkaProducerFactory<>(configProps);\n+    }\n+\n+    /**\n+     * Configure {@link KafkaTemplate} object used by producers to send messages\n+     */\n+    @Bean\n+    public KafkaTemplate<String, String> kafkaTemplate() {\n+        return new KafkaTemplate<>(producerFactory());\n+    }\n+\n+    /**\n+     * Configure asynchronous event management.\n+     * Events sent by {@link KogitoDecisionTracingListener} will be handled by {@link KogitoDecisionTracingCollector}\n+     * without blocking the request handling thread.\n+     */\n+    @Bean(name = \"applicationEventMulticaster\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a70bfe3b65c503333708954412c7d6de6d888efc"}, "originalPosition": 89}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a70bfe3b65c503333708954412c7d6de6d888efc", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/a70bfe3b65c503333708954412c7d6de6d888efc", "committedDate": "2020-05-15T13:59:20Z", "message": "[KOGITO-2125] Add tests"}, "afterCommit": {"oid": "9506b3d1ca49161373d7c634c34b238e69ed476e", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/9506b3d1ca49161373d7c634c34b238e69ed476e", "committedDate": "2020-05-18T10:04:41Z", "message": "[KOGITO-2125] Easier event configuration and usage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNTg1NjUx", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#pullrequestreview-413585651", "createdAt": "2020-05-18T13:19:38Z", "commit": {"oid": "26cf1b91ce6c6aad99ef24b148f718a02d106a14"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzoxOTozOFrOGW2y1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzoyMTo0MlrOGW243g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYxOTYwNA==", "bodyText": "Can you please move these values to config? If we want to provide create-topic-if-not-exists we should let user decide number of partitions and replications.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#discussion_r426619604", "createdAt": "2020-05-18T13:19:38Z", "author": {"login": "danielezonca"}, "path": "addons/tracing/tracing-decision-springboot-addon/src/main/java/org/kie/kogito/tracing/decision/KogitoDecisionTracingConfiguration.java", "diffHunk": "@@ -0,0 +1,88 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.tracing.decision;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.apache.kafka.clients.admin.AdminClientConfig;\n+import org.apache.kafka.clients.admin.NewTopic;\n+import org.apache.kafka.clients.producer.ProducerConfig;\n+import org.apache.kafka.common.serialization.StringSerializer;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.context.annotation.Bean;\n+import org.springframework.context.annotation.Configuration;\n+import org.springframework.kafka.core.DefaultKafkaProducerFactory;\n+import org.springframework.kafka.core.KafkaAdmin;\n+import org.springframework.kafka.core.KafkaTemplate;\n+import org.springframework.kafka.core.ProducerFactory;\n+import org.springframework.scheduling.annotation.EnableAsync;\n+\n+@Configuration\n+@EnableAsync\n+public class KogitoDecisionTracingConfiguration {\n+\n+    private final String kafkaBootstrapAddress;\n+    private final String kafkaTopic;\n+\n+    public KogitoDecisionTracingConfiguration(\n+            @Value(value = \"${kogito.addon.tracing.decision.kafka.bootstrapAddress}\") String kafkaBootstrapAddress,\n+            @Value(value = \"${kogito.addon.tracing.decision.kafka.topic:kogito-tracing-decision}\") String kafkaTopic\n+    ) {\n+        this.kafkaBootstrapAddress = kafkaBootstrapAddress;\n+        this.kafkaTopic = kafkaTopic;\n+    }\n+\n+    /**\n+     * Defining a {@link KafkaAdmin} bean allows to automatically add topic to the broker via {@link NewTopic} beans\n+     */\n+    @Bean\n+    public KafkaAdmin kafkaAdmin() {\n+        Map<String, Object> configs = new HashMap<>();\n+        configs.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaBootstrapAddress);\n+        return new KafkaAdmin(configs);\n+    }\n+\n+    /**\n+     * {@link NewTopic} bean to create the addon Kafka topic (if the topic already exists this is ignored)\n+     */\n+    @Bean\n+    public NewTopic newTopic() {\n+        return new NewTopic(kafkaTopic, 1, (short) 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26cf1b91ce6c6aad99ef24b148f718a02d106a14"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyMTE1MA==", "bodyText": "We should not care too much of sonarcloud metrics :)\nThis class is not testing any real business logic but just the impl. I +1 to remove it :)", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#discussion_r426621150", "createdAt": "2020-05-18T13:21:42Z", "author": {"login": "danielezonca"}, "path": "addons/tracing/tracing-decision-springboot-addon/src/test/java/org/kie/kogito/tracing/decision/KogitoDecisionTracingConfigurationTest.java", "diffHunk": "@@ -0,0 +1,70 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.tracing.decision;\n+\n+import org.apache.kafka.clients.admin.AdminClientConfig;\n+import org.apache.kafka.clients.admin.NewTopic;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+import org.springframework.kafka.core.KafkaAdmin;\n+import org.springframework.kafka.core.KafkaTemplate;\n+import org.springframework.kafka.core.ProducerFactory;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+\n+public class KogitoDecisionTracingConfigurationTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26cf1b91ce6c6aad99ef24b148f718a02d106a14"}, "originalPosition": 30}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "26cf1b91ce6c6aad99ef24b148f718a02d106a14", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/26cf1b91ce6c6aad99ef24b148f718a02d106a14", "committedDate": "2020-05-18T13:06:01Z", "message": "[KOGITO-2125] Remove unneeded dependencies"}, "afterCommit": {"oid": "bdd1e4ef31eeae3991fc32fb27d5d25854615af2", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/bdd1e4ef31eeae3991fc32fb27d5d25854615af2", "committedDate": "2020-05-18T13:39:41Z", "message": "[KOGITO-2125] Implement decision tracing addon for Spring Boot"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bdd1e4ef31eeae3991fc32fb27d5d25854615af2", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/bdd1e4ef31eeae3991fc32fb27d5d25854615af2", "committedDate": "2020-05-18T13:39:41Z", "message": "[KOGITO-2125] Implement decision tracing addon for Spring Boot"}, "afterCommit": {"oid": "0a9a7b23de6b16354f9389e991622000cf3a3398", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/0a9a7b23de6b16354f9389e991622000cf3a3398", "committedDate": "2020-05-18T13:41:35Z", "message": "[KOGITO-2125] Implement decision tracing addon for Spring Boot"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNjA3MTYx", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#pullrequestreview-413607161", "createdAt": "2020-05-18T13:43:49Z", "commit": {"oid": "0a9a7b23de6b16354f9389e991622000cf3a3398"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NDcxNjQ3", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#pullrequestreview-414471647", "createdAt": "2020-05-19T13:57:45Z", "commit": {"oid": "33ca6821144ab66405cad2eb334fddf425a0a9ea"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "33ca6821144ab66405cad2eb334fddf425a0a9ea", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/33ca6821144ab66405cad2eb334fddf425a0a9ea", "committedDate": "2020-05-19T08:40:19Z", "message": "[KOGITO-2125] Fix JaCoCo error on multiple classes with same FQCN in different modules"}, "afterCommit": {"oid": "60180fbe22a334d4d245225d320279fa04a75b96", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/60180fbe22a334d4d245225d320279fa04a75b96", "committedDate": "2020-05-20T10:09:31Z", "message": "[KOGITO-2125] Fix JaCoCo error on multiple classes with same FQCN in different modules"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60180fbe22a334d4d245225d320279fa04a75b96", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/60180fbe22a334d4d245225d320279fa04a75b96", "committedDate": "2020-05-20T10:09:31Z", "message": "[KOGITO-2125] Fix JaCoCo error on multiple classes with same FQCN in different modules"}, "afterCommit": {"oid": "cb467f2b4ee207077019931ba485f6d7acd6c540", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/cb467f2b4ee207077019931ba485f6d7acd6c540", "committedDate": "2020-05-25T12:48:35Z", "message": "[KOGITO-2125] Fix JaCoCo error on multiple classes with same FQCN in different modules"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NzIwNDkw", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#pullrequestreview-417720490", "createdAt": "2020-05-25T13:44:26Z", "commit": {"oid": "cb467f2b4ee207077019931ba485f6d7acd6c540"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMzo0NDoyNlrOGaBnxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMzo0NToxM1rOGaBpJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTk0MjcyNg==", "bodyText": "Not sure the formatting is correct here, can you check it, please? It is difficult to read.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#discussion_r429942726", "createdAt": "2020-05-25T13:44:26Z", "author": {"login": "MarianMacik"}, "path": "addons/tracing/tracing-decision-springboot-addon/src/main/java/org/kie/kogito/tracing/decision/SpringBootDecisionTracingCollector.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.tracing.decision;\n+\n+import org.kie.kogito.tracing.decision.event.EvaluateEvent;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.context.event.EventListener;\n+import org.springframework.kafka.core.KafkaTemplate;\n+import org.springframework.scheduling.annotation.Async;\n+import org.springframework.stereotype.Component;\n+\n+@Component\n+public class SpringBootDecisionTracingCollector {\n+\n+    private final DecisionTracingCollector collector;\n+\n+    @Autowired\n+    public SpringBootDecisionTracingCollector(\n+            KafkaTemplate<String, String> template,\n+            @Value(value = \"${kogito.addon.tracing.decision.kafka.topic.name:kogito-tracing-decision}\") String kafkaTopicName\n+    ) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb467f2b4ee207077019931ba485f6d7acd6c540"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTk0MzA3Nw==", "bodyText": "Probably same here, I think that ) should be on the line before, but maybe I am wrong.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#discussion_r429943077", "createdAt": "2020-05-25T13:45:13Z", "author": {"login": "MarianMacik"}, "path": "addons/tracing/tracing-decision-springboot-addon/src/main/java/org/kie/kogito/tracing/decision/SpringBootDecisionTracingConfiguration.java", "diffHunk": "@@ -0,0 +1,94 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.tracing.decision;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.apache.kafka.clients.admin.AdminClientConfig;\n+import org.apache.kafka.clients.admin.NewTopic;\n+import org.apache.kafka.clients.producer.ProducerConfig;\n+import org.apache.kafka.common.serialization.StringSerializer;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.context.annotation.Bean;\n+import org.springframework.context.annotation.Configuration;\n+import org.springframework.kafka.core.DefaultKafkaProducerFactory;\n+import org.springframework.kafka.core.KafkaAdmin;\n+import org.springframework.kafka.core.KafkaTemplate;\n+import org.springframework.kafka.core.ProducerFactory;\n+import org.springframework.scheduling.annotation.EnableAsync;\n+\n+@Configuration\n+@EnableAsync\n+public class SpringBootDecisionTracingConfiguration {\n+\n+    private final String kafkaBootstrapAddress;\n+    private final String kafkaTopicName;\n+    private final int kafkaTopicPartitions;\n+    private final short kafkaTopicReplicationFactor;\n+\n+    public SpringBootDecisionTracingConfiguration(\n+            @Value(value = \"${kogito.addon.tracing.decision.kafka.bootstrapAddress}\") String kafkaBootstrapAddress,\n+            @Value(value = \"${kogito.addon.tracing.decision.kafka.topic.name:kogito-tracing-decision}\") String kafkaTopicName,\n+            @Value(value = \"${kogito.addon.tracing.decision.kafka.topic.partitions:1}\") int kafkaTopicPartitions,\n+            @Value(value = \"${kogito.addon.tracing.decision.kafka.topic.replicationFactor:1}\") short kafkaTopicReplicationFactor\n+    ) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb467f2b4ee207077019931ba485f6d7acd6c540"}, "originalPosition": 49}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cb467f2b4ee207077019931ba485f6d7acd6c540", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/cb467f2b4ee207077019931ba485f6d7acd6c540", "committedDate": "2020-05-25T12:48:35Z", "message": "[KOGITO-2125] Fix JaCoCo error on multiple classes with same FQCN in different modules"}, "afterCommit": {"oid": "acd0f696d96c17938f4692ef948d33ff4f9b46bf", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/acd0f696d96c17938f4692ef948d33ff4f9b46bf", "committedDate": "2020-05-26T09:21:39Z", "message": "[KOGITO-2125] Fix JaCoCo error on multiple classes with same FQCN in different modules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "432a61b5ebe5848e88972849b9ee11fb65fda47a", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/432a61b5ebe5848e88972849b9ee11fb65fda47a", "committedDate": "2020-05-27T09:41:29Z", "message": "[KOGITO-2125] Implement decision tracing addon for Spring Boot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c03e674bd100058fa0be65ceeba0faca1c335cb7", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/c03e674bd100058fa0be65ceeba0faca1c335cb7", "committedDate": "2020-05-27T09:41:29Z", "message": "[KOGITO-2125] Refactor decision tracing addon detection in codegen to use a class from common module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a6fe06b4d621de981373c82e42b9dff432249b7", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/3a6fe06b4d621de981373c82e42b9dff432249b7", "committedDate": "2020-05-27T09:41:29Z", "message": "[KOGITO-2125] Fix JaCoCo error on multiple classes with same FQCN in different modules"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "acd0f696d96c17938f4692ef948d33ff4f9b46bf", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/acd0f696d96c17938f4692ef948d33ff4f9b46bf", "committedDate": "2020-05-26T09:21:39Z", "message": "[KOGITO-2125] Fix JaCoCo error on multiple classes with same FQCN in different modules"}, "afterCommit": {"oid": "3a6fe06b4d621de981373c82e42b9dff432249b7", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/3a6fe06b4d621de981373c82e42b9dff432249b7", "committedDate": "2020-05-27T09:41:29Z", "message": "[KOGITO-2125] Fix JaCoCo error on multiple classes with same FQCN in different modules"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MDYwMjU2", "url": "https://github.com/kiegroup/kogito-runtimes/pull/510#pullrequestreview-419060256", "createdAt": "2020-05-27T10:27:46Z", "commit": {"oid": "3a6fe06b4d621de981373c82e42b9dff432249b7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3498, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}