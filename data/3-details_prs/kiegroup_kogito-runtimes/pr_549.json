{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxMjg1OTU1", "number": 549, "title": "[KOGITO-2074] rework Kogito code generation for scaffolding", "bodyText": "(edit by @evacchi)\nAdd an integration test for scaffolding using Maven. The integration test simulates the following command:\nmvn compile org.kie.kogito:kogito-maven-plugin:generateModel  -Dkogito.codegen.sources.directory=src/main/java        \n\nthe result is that part of the code generation procedure produces code in src/main/java instead of the usual target/generated-sources/kogito.\nThis works as usual with Spring, currently conflicts with the Quarkus kogito extension. So in case of Quarkus, if you want to use scaffolding, you currently have to use the Kogito Maven plug-in, instead of the Kogito Quarkus extension.\nThis is temporary: the feature is not complete, and the code that is being generated will change (the programmatic API is not final yet and will change).", "createdAt": "2020-06-08T17:21:35Z", "url": "https://github.com/kiegroup/kogito-runtimes/pull/549", "merged": true, "mergeCommit": {"oid": "2f2721d311e55e2af6f1a7d926b997e536791c92"}, "closed": true, "closedAt": "2020-06-11T10:14:30Z", "author": {"login": "mariofusco"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcp56wygH2gAyNDMxMjg1OTU1OjVkOWNhOWFkZDU5NmJhYzBkZDAyYjk3OWY2ZTNiNjJlMWQ5MDZlM2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqJ-KsgH2gAyNDMxMjg1OTU1OjAxNWVhZTdmNzM3MTc3ZGYzZmRiZmVmMmU0ZjA3NzhhOWVjNzlmOTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5d9ca9add596bac0dd02b979f6e3b62e1d906e3f", "author": {"user": {"login": "mariofusco", "name": "Mario Fusco"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/5d9ca9add596bac0dd02b979f6e3b62e1d906e3f", "committedDate": "2020-06-10T13:45:45Z", "message": "[KOGITO-2074] rework Kogito code generation for scaffolding"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29419e8fd5e3f1885512d3784233acabc4c10109", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/29419e8fd5e3f1885512d3784233acabc4c10109", "committedDate": "2020-06-10T13:45:45Z", "message": "wip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b7639489d899086a0a2ce16372f9cc4f58e900f", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/6b7639489d899086a0a2ce16372f9cc4f58e900f", "committedDate": "2020-06-10T13:45:45Z", "message": "rm prop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebe34db62d8340c9483db09cb3502e5cb5e14adc", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/ebe34db62d8340c9483db09cb3502e5cb5e14adc", "committedDate": "2020-06-10T13:45:45Z", "message": "fix pom"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "098ef9610ad517d093e96c3023211f99b0e0d2cf", "author": {"user": {"login": "mariofusco", "name": "Mario Fusco"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/098ef9610ad517d093e96c3023211f99b0e0d2cf", "committedDate": "2020-06-10T12:14:28Z", "message": "Merge pull request #2 from evacchi/mf-k2074\n\nfix pom"}, "afterCommit": {"oid": "ebe34db62d8340c9483db09cb3502e5cb5e14adc", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/ebe34db62d8340c9483db09cb3502e5cb5e14adc", "committedDate": "2020-06-10T13:45:45Z", "message": "fix pom"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4Mzg5MjIy", "url": "https://github.com/kiegroup/kogito-runtimes/pull/549#pullrequestreview-428389222", "createdAt": "2020-06-10T20:07:14Z", "commit": {"oid": "ebe34db62d8340c9483db09cb3502e5cb5e14adc"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMDowNzoxNVrOGiEhLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMDozMDoyMlrOGiFOEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM3ODc5OA==", "bodyText": "What is the reason to use invoker here? To run Maven with different properties/goals?\nAlso for springboot integration tests which are already there (done as #515) I don't see different properties, just custom settings.xml, what is it for?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/549#discussion_r438378798", "createdAt": "2020-06-10T20:07:15Z", "author": {"login": "MarianMacik"}, "path": "integration-tests/integration-tests-kogito-plugin/pom.xml", "diffHunk": "@@ -0,0 +1,41 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests</artifactId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <artifactId>integration-tests-kogito-plugin</artifactId>\n+  \n+  <dependencies>\n+  <dependency> <!-- make this IT module to depend on the plugin for Maven reactor build intention -->\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>kogito-maven-plugin</artifactId>\n+    <version>${project.version}</version>\n+  </dependency>\n+  </dependencies>\n+  \n+  <build>\n+    <plugins>\n+      <plugin>\n+        <artifactId>maven-invoker-plugin</artifactId>\n+        <configuration>\n+          <streamLogs>true</streamLogs>\n+          <cloneProjectsTo>${project.build.directory}/it</cloneProjectsTo>\n+          <settingsFile>src/it/settings.xml</settingsFile>\n+          <localRepositoryPath>${project.build.directory}/local-repo</localRepositoryPath>\n+          <postBuildHookScript>verify</postBuildHookScript> <!-- no extension required -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebe34db62d8340c9483db09cb3502e5cb5e14adc"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM4MzkyMA==", "bodyText": "Where is this property specified?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/549#discussion_r438383920", "createdAt": "2020-06-10T20:17:52Z", "author": {"login": "MarianMacik"}, "path": "integration-tests/integration-tests-kogito-plugin/src/it/settings.xml", "diffHunk": "@@ -0,0 +1,37 @@\n+<settings xmlns=\"http://maven.apache.org/SETTINGS/1.0.0\"\n+  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+  xsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.0.0\n+                      https://maven.apache.org/xsd/settings-1.0.0.xsd\">\n+    <profiles>\n+        <profile>\n+        <id>it-repo</id>\n+        <activation>\n+            <activeByDefault>true</activeByDefault>\n+        </activation>\n+        <repositories>\n+            <repository>\n+            <id>local.central</id>\n+            <url>@localRepositoryUrl@</url>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebe34db62d8340c9483db09cb3502e5cb5e14adc"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM4OTA3NA==", "bodyText": "Shouldn't we call this generatedCustomizableSourcesDir to be in line with GenerateModelMojo?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/549#discussion_r438389074", "createdAt": "2020-06-10T20:28:01Z", "author": {"login": "MarianMacik"}, "path": "kogito-quarkus-extension/deployment/src/main/java/org/kie/kogito/quarkus/deployment/KogitoAssetsProcessor.java", "diffHunk": "@@ -70,9 +70,9 @@\n \n public class KogitoAssetsProcessor {\n \n-    private static final String generatedResourcesDir = System.getProperty(\"kogito.codegen.sources.directory\", \"target/generated-resources/kogito\");\n-    private static final String generatedSourcesDir = System.getProperty(\"kogito.codegen.resources.directory\", \"target/generated-sources/kogito/\");\n-    private static final String generatedRestSourcesDir = System.getProperty(\"kogito.codegen.rest.directory\", \"target/generated-sources/kogito/\");\n+    private static final String generatedResourcesDir = System.getProperty(\"kogito.codegen.resources.directory\", \"target/generated-resources/kogito\");\n+    private static final String generatedSourcesDir = \"target/generated-sources/kogito/\";\n+    private static final String generatedRestSourcesDir = System.getProperty(\"kogito.codegen.sources.directory\", \"target/generated-sources/kogito/\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebe34db62d8340c9483db09cb3502e5cb5e14adc"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM5MDI4OA==", "bodyText": "Don't we want to add this as another parameter to GenerateModelMojo?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/549#discussion_r438390288", "createdAt": "2020-06-10T20:30:22Z", "author": {"login": "MarianMacik"}, "path": "kogito-quarkus-extension/deployment/src/main/java/org/kie/kogito/quarkus/deployment/KogitoAssetsProcessor.java", "diffHunk": "@@ -70,9 +70,9 @@\n \n public class KogitoAssetsProcessor {\n \n-    private static final String generatedResourcesDir = System.getProperty(\"kogito.codegen.sources.directory\", \"target/generated-resources/kogito\");\n-    private static final String generatedSourcesDir = System.getProperty(\"kogito.codegen.resources.directory\", \"target/generated-sources/kogito/\");\n-    private static final String generatedRestSourcesDir = System.getProperty(\"kogito.codegen.rest.directory\", \"target/generated-sources/kogito/\");\n+    private static final String generatedResourcesDir = System.getProperty(\"kogito.codegen.resources.directory\", \"target/generated-resources/kogito\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebe34db62d8340c9483db09cb3502e5cb5e14adc"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a19125f6814ace805401bc60ae70396d92c650c7", "author": {"user": {"login": "mariofusco", "name": "Mario Fusco"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/a19125f6814ace805401bc60ae70396d92c650c7", "committedDate": "2020-06-11T07:23:05Z", "message": "[KOGITO-2074] prevent jacoco inspection on generated Application class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "015eae7f737177df3fdbfef2e4f0778a9ec79f93", "author": {"user": {"login": "mariofusco", "name": "Mario Fusco"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/015eae7f737177df3fdbfef2e4f0778a9ec79f93", "committedDate": "2020-06-11T08:27:57Z", "message": "[KOGITO-2074] prevent jacoco inspection on generated Application class"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3543, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}