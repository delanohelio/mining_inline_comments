{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxOTIyNTk4", "number": 439, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMjo1ODo0MVrODxogqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzowODo0MFrODxowYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMzcwNTM2OnYy", "diffSide": "RIGHT", "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/ServerlessWorkflowParser.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMjo1ODo0MVrOGFNYew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNDo1OTo1OVrOGFS81A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODExNTMyMw==", "bodyText": "Please fix the formatting in the whole file, especially for if and for commands.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/439#discussion_r408115323", "createdAt": "2020-04-14T12:58:41Z", "author": {"login": "MarianMacik"}, "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/ServerlessWorkflowParser.java", "diffHunk": "@@ -199,28 +216,64 @@ public Process parseWorkFlow(Reader workflowFile) throws JsonProcessingException\n                     factory.connect(callActivityNode.getId(), workflowEndNodes.get(state.getName()).getId(), callActivityNode.getId() + \"_\" + workflowEndNodes.get(state.getName()).getId(), process);\n                 }\n \n-                nameToNodeId.put(state.getName(), callActivityNode.getId());\n+                Map<String, Long> startEndMap = new HashMap<>();\n+                startEndMap.put(NODETOID_START, callActivityNode.getId());\n+                startEndMap.put(NODETOID_END, callActivityNode.getId());\n+                nameToNodeId.put(state.getName(), startEndMap);\n             }\n \n             if(state.getType().equals(Type.SWITCH)) {\n                 SwitchState switchState = (SwitchState) state;\n \n-                Split splitNode = factory.xorSplitNode(idCounter.getAndIncrement(), switchState.getName(), process);\n+                Split splitNode = factory.splitNode(idCounter.getAndIncrement(), switchState.getName(), Split.TYPE_XOR, process);\n \n                 if(state.getStart() != null) {\n                     factory.connect(workflowStartNode.getId(), splitNode.getId(), workflowStartNode.getId() + \"_\" + splitNode.getId(), process);\n                 }\n                 // switch states cannot be end states\n-                nameToNodeId.put(state.getName(), splitNode.getId());\n+\n+                Map<String, Long> startEndMap = new HashMap<>();\n+                startEndMap.put(NODETOID_START, splitNode.getId());\n+                startEndMap.put(NODETOID_END, splitNode.getId());\n+                nameToNodeId.put(state.getName(), startEndMap);\n+            }\n+\n+            if(state.getType().equals(Type.PARALLEL)) {\n+                ParallelState parallelState = (ParallelState) state;\n+\n+                Split parallelSplit = factory.splitNode(idCounter.getAndIncrement(), parallelState.getName() + NODE_START_NAME, Split.TYPE_AND, process);\n+                Join parallelJoin = factory.joinNode(idCounter.getAndIncrement(), parallelState.getName() + NODE_END_NAME, Join.TYPE_AND, process);\n+\n+                for(Branch branch : parallelState.getBranches()) {\n+                    SubflowState subflowState = (SubflowState) branch.getStates().get(0);\n+                    SubProcessNode callActivityNode = factory.callActivity(idCounter.getAndIncrement(), subflowState.getName(), subflowState.getWorkflowId(), subflowState.isWaitForCompletion(), process);\n+\n+                    factory.connect(parallelSplit.getId(), callActivityNode.getId(), parallelSplit.getId() + \"_\" + callActivityNode.getId(), process);\n+                    factory.connect(callActivityNode.getId(), parallelJoin.getId(), callActivityNode.getId() + \"_\" + parallelJoin.getId(), process);\n+\n+                }\n+\n+                if(state.getStart() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea7f39e4962df245c6108ea06a56517e98f2ad53"}, "originalPosition": 149}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODIwNjU0OA==", "bodyText": "fixed - thanks!", "url": "https://github.com/kiegroup/kogito-runtimes/pull/439#discussion_r408206548", "createdAt": "2020-04-14T14:59:59Z", "author": {"login": "tsurdilo"}, "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/ServerlessWorkflowParser.java", "diffHunk": "@@ -199,28 +216,64 @@ public Process parseWorkFlow(Reader workflowFile) throws JsonProcessingException\n                     factory.connect(callActivityNode.getId(), workflowEndNodes.get(state.getName()).getId(), callActivityNode.getId() + \"_\" + workflowEndNodes.get(state.getName()).getId(), process);\n                 }\n \n-                nameToNodeId.put(state.getName(), callActivityNode.getId());\n+                Map<String, Long> startEndMap = new HashMap<>();\n+                startEndMap.put(NODETOID_START, callActivityNode.getId());\n+                startEndMap.put(NODETOID_END, callActivityNode.getId());\n+                nameToNodeId.put(state.getName(), startEndMap);\n             }\n \n             if(state.getType().equals(Type.SWITCH)) {\n                 SwitchState switchState = (SwitchState) state;\n \n-                Split splitNode = factory.xorSplitNode(idCounter.getAndIncrement(), switchState.getName(), process);\n+                Split splitNode = factory.splitNode(idCounter.getAndIncrement(), switchState.getName(), Split.TYPE_XOR, process);\n \n                 if(state.getStart() != null) {\n                     factory.connect(workflowStartNode.getId(), splitNode.getId(), workflowStartNode.getId() + \"_\" + splitNode.getId(), process);\n                 }\n                 // switch states cannot be end states\n-                nameToNodeId.put(state.getName(), splitNode.getId());\n+\n+                Map<String, Long> startEndMap = new HashMap<>();\n+                startEndMap.put(NODETOID_START, splitNode.getId());\n+                startEndMap.put(NODETOID_END, splitNode.getId());\n+                nameToNodeId.put(state.getName(), startEndMap);\n+            }\n+\n+            if(state.getType().equals(Type.PARALLEL)) {\n+                ParallelState parallelState = (ParallelState) state;\n+\n+                Split parallelSplit = factory.splitNode(idCounter.getAndIncrement(), parallelState.getName() + NODE_START_NAME, Split.TYPE_AND, process);\n+                Join parallelJoin = factory.joinNode(idCounter.getAndIncrement(), parallelState.getName() + NODE_END_NAME, Join.TYPE_AND, process);\n+\n+                for(Branch branch : parallelState.getBranches()) {\n+                    SubflowState subflowState = (SubflowState) branch.getStates().get(0);\n+                    SubProcessNode callActivityNode = factory.callActivity(idCounter.getAndIncrement(), subflowState.getName(), subflowState.getWorkflowId(), subflowState.isWaitForCompletion(), process);\n+\n+                    factory.connect(parallelSplit.getId(), callActivityNode.getId(), parallelSplit.getId() + \"_\" + callActivityNode.getId(), process);\n+                    factory.connect(callActivityNode.getId(), parallelJoin.getId(), callActivityNode.getId() + \"_\" + parallelJoin.getId(), process);\n+\n+                }\n+\n+                if(state.getStart() != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODExNTMyMw=="}, "originalCommit": {"oid": "ea7f39e4962df245c6108ea06a56517e98f2ad53"}, "originalPosition": 149}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMzcyMTMyOnYy", "diffSide": "RIGHT", "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/core/ServerlessWorkflowFactory.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzowMjo0MVrOGFNipw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNTowMDowNlrOGFS9Pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODExNzkyNw==", "bodyText": "Probably would be better to omit it as if the value of the DEFAULT_WORKFLOW_VAR is changed, this comment becomes misleading.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/439#discussion_r408117927", "createdAt": "2020-04-14T13:02:41Z", "author": {"login": "MarianMacik"}, "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/core/ServerlessWorkflowFactory.java", "diffHunk": "@@ -174,6 +175,20 @@ public SubProcessNode callActivity(long id, String name, String calledId, boolea\n         subProcessNode.setName(name);\n         subProcessNode.setProcessId(calledId);\n         subProcessNode.setWaitForCompletion(waitForCompletion);\n+        subProcessNode.setIndependent(true);\n+\n+        VariableScope variableScope = new VariableScope();\n+        subProcessNode.addContext(variableScope);\n+        subProcessNode.setDefaultContext(variableScope);\n+\n+        Map<String, String> inputOtuputTypes = new HashMap<>();\n+        inputOtuputTypes.put(DEFAULT_WORKFLOW_VAR, JSON_NODE);\n+        subProcessNode.setMetaData(\"BPMN.InputTypes\", inputOtuputTypes);\n+        subProcessNode.setMetaData(\"BPMN.OutputTypes\", inputOtuputTypes);\n+\n+        // parent and sub processes have process var \"workflowdata\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea7f39e4962df245c6108ea06a56517e98f2ad53"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODIwNjY1NA==", "bodyText": "good point - fixed", "url": "https://github.com/kiegroup/kogito-runtimes/pull/439#discussion_r408206654", "createdAt": "2020-04-14T15:00:06Z", "author": {"login": "tsurdilo"}, "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/core/ServerlessWorkflowFactory.java", "diffHunk": "@@ -174,6 +175,20 @@ public SubProcessNode callActivity(long id, String name, String calledId, boolea\n         subProcessNode.setName(name);\n         subProcessNode.setProcessId(calledId);\n         subProcessNode.setWaitForCompletion(waitForCompletion);\n+        subProcessNode.setIndependent(true);\n+\n+        VariableScope variableScope = new VariableScope();\n+        subProcessNode.addContext(variableScope);\n+        subProcessNode.setDefaultContext(variableScope);\n+\n+        Map<String, String> inputOtuputTypes = new HashMap<>();\n+        inputOtuputTypes.put(DEFAULT_WORKFLOW_VAR, JSON_NODE);\n+        subProcessNode.setMetaData(\"BPMN.InputTypes\", inputOtuputTypes);\n+        subProcessNode.setMetaData(\"BPMN.OutputTypes\", inputOtuputTypes);\n+\n+        // parent and sub processes have process var \"workflowdata\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODExNzkyNw=="}, "originalCommit": {"oid": "ea7f39e4962df245c6108ea06a56517e98f2ad53"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMzcyNTI2OnYy", "diffSide": "RIGHT", "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/core/ServerlessWorkflowFactory.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzowMzo0MlrOGFNlNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNTowMDoxN1rOGFS93Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODExODU4MA==", "bodyText": "Why do we need this here? Can we just put here a link to the documentation or name of the class where this is specified? This quickly can become obsolete once the code is changed.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/439#discussion_r408118580", "createdAt": "2020-04-14T13:03:42Z", "author": {"login": "MarianMacik"}, "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/core/ServerlessWorkflowFactory.java", "diffHunk": "@@ -269,23 +284,45 @@ public CompositeContextNode subProcessNode(long id, String name, NodeContainer n\n         subProcessNode.addContext(variableScope);\n         subProcessNode.setDefaultContext(variableScope);\n         subProcessNode.setAutoComplete(true);\n-\n         nodeContainer.addNode(subProcessNode);\n \n         return subProcessNode;\n     }\n \n-    public Split xorSplitNode(long id, String name, NodeContainer nodeContainer) {\n+\n+    public Split splitNode(long id, String name, int type, NodeContainer nodeContainer) {\n+        // 0 = TYPE_UNDEFINED\n+        // 1 = TYPE_AND\n+        // 2 = TYPE_XOR\n+        // 3 = TYPE_OR\n+        // 4 = TYPE_XAND", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea7f39e4962df245c6108ea06a56517e98f2ad53"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODIwNjgxMw==", "bodyText": "removed. thanks!", "url": "https://github.com/kiegroup/kogito-runtimes/pull/439#discussion_r408206813", "createdAt": "2020-04-14T15:00:17Z", "author": {"login": "tsurdilo"}, "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/core/ServerlessWorkflowFactory.java", "diffHunk": "@@ -269,23 +284,45 @@ public CompositeContextNode subProcessNode(long id, String name, NodeContainer n\n         subProcessNode.addContext(variableScope);\n         subProcessNode.setDefaultContext(variableScope);\n         subProcessNode.setAutoComplete(true);\n-\n         nodeContainer.addNode(subProcessNode);\n \n         return subProcessNode;\n     }\n \n-    public Split xorSplitNode(long id, String name, NodeContainer nodeContainer) {\n+\n+    public Split splitNode(long id, String name, int type, NodeContainer nodeContainer) {\n+        // 0 = TYPE_UNDEFINED\n+        // 1 = TYPE_AND\n+        // 2 = TYPE_XOR\n+        // 3 = TYPE_OR\n+        // 4 = TYPE_XAND", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODExODU4MA=="}, "originalCommit": {"oid": "ea7f39e4962df245c6108ea06a56517e98f2ad53"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMzcyNTc5OnYy", "diffSide": "RIGHT", "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/core/ServerlessWorkflowFactory.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzowMzo1MVrOGFNlgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNTowMDoyM1rOGFS-Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODExODY1OA==", "bodyText": "Same here.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/439#discussion_r408118658", "createdAt": "2020-04-14T13:03:51Z", "author": {"login": "MarianMacik"}, "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/core/ServerlessWorkflowFactory.java", "diffHunk": "@@ -269,23 +284,45 @@ public CompositeContextNode subProcessNode(long id, String name, NodeContainer n\n         subProcessNode.addContext(variableScope);\n         subProcessNode.setDefaultContext(variableScope);\n         subProcessNode.setAutoComplete(true);\n-\n         nodeContainer.addNode(subProcessNode);\n \n         return subProcessNode;\n     }\n \n-    public Split xorSplitNode(long id, String name, NodeContainer nodeContainer) {\n+\n+    public Split splitNode(long id, String name, int type, NodeContainer nodeContainer) {\n+        // 0 = TYPE_UNDEFINED\n+        // 1 = TYPE_AND\n+        // 2 = TYPE_XOR\n+        // 3 = TYPE_OR\n+        // 4 = TYPE_XAND\n         Split split = new Split();\n         split.setId(id);\n         split.setName(name);\n-        split.setType(2);\n-        split.setMetaData(\"UniqueId\", Long.toString(id));\n+        split.setType(type);\n+        split.setMetaData(UNIQUE_ID_PARAM, Long.toString(id));\n \n         nodeContainer.addNode(split);\n         return split;\n     }\n \n+    public Join joinNode(long id, String name, int type, NodeContainer nodeContainer) {\n+        // 0 = TYPE_UNDEFINED\n+        // 1 = TYPE_AND\n+        // 2 = TYPE_XOR\n+        // 3 = TYPE_DISCRIMINATOR\n+        // 4 = TYPE_N_OF_M\n+        // 5 = TYPE_OR", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea7f39e4962df245c6108ea06a56517e98f2ad53"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODIwNjg5OA==", "bodyText": "removed - thanks!", "url": "https://github.com/kiegroup/kogito-runtimes/pull/439#discussion_r408206898", "createdAt": "2020-04-14T15:00:23Z", "author": {"login": "tsurdilo"}, "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/core/ServerlessWorkflowFactory.java", "diffHunk": "@@ -269,23 +284,45 @@ public CompositeContextNode subProcessNode(long id, String name, NodeContainer n\n         subProcessNode.addContext(variableScope);\n         subProcessNode.setDefaultContext(variableScope);\n         subProcessNode.setAutoComplete(true);\n-\n         nodeContainer.addNode(subProcessNode);\n \n         return subProcessNode;\n     }\n \n-    public Split xorSplitNode(long id, String name, NodeContainer nodeContainer) {\n+\n+    public Split splitNode(long id, String name, int type, NodeContainer nodeContainer) {\n+        // 0 = TYPE_UNDEFINED\n+        // 1 = TYPE_AND\n+        // 2 = TYPE_XOR\n+        // 3 = TYPE_OR\n+        // 4 = TYPE_XAND\n         Split split = new Split();\n         split.setId(id);\n         split.setName(name);\n-        split.setType(2);\n-        split.setMetaData(\"UniqueId\", Long.toString(id));\n+        split.setType(type);\n+        split.setMetaData(UNIQUE_ID_PARAM, Long.toString(id));\n \n         nodeContainer.addNode(split);\n         return split;\n     }\n \n+    public Join joinNode(long id, String name, int type, NodeContainer nodeContainer) {\n+        // 0 = TYPE_UNDEFINED\n+        // 1 = TYPE_AND\n+        // 2 = TYPE_XOR\n+        // 3 = TYPE_DISCRIMINATOR\n+        // 4 = TYPE_N_OF_M\n+        // 5 = TYPE_OR", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODExODY1OA=="}, "originalCommit": {"oid": "ea7f39e4962df245c6108ea06a56517e98f2ad53"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMzc0NTYzOnYy", "diffSide": "RIGHT", "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/util/ServerlessWorkflowUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzowODo0MFrOGFNx8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNTowMDozNlrOGFS-8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEyMTg0Mw==", "bodyText": "Can you please format this better and probably include a reason why it is not supported, i.e. just a subset of parallel states is supported etc.?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/439#discussion_r408121843", "createdAt": "2020-04-14T13:08:40Z", "author": {"login": "MarianMacik"}, "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/util/ServerlessWorkflowUtils.java", "diffHunk": "@@ -89,14 +92,39 @@ public static boolean includesSupportedStates(Workflow workflow) {\n                     && !state.getType().equals(DefaultState.Type.DELAY)\n                     && !state.getType().equals(DefaultState.Type.SUBFLOW)\n                     && !state.getType().equals(DefaultState.Type.RELAY)\n-                    && !state.getType().equals(DefaultState.Type.SWITCH)) {\n+                    && !state.getType().equals(DefaultState.Type.SWITCH)\n+                    && !state.getType().equals(DefaultState.Type.PARALLEL)) {\n                 return false;\n             }\n+\n+            if(state.getType().equals(DefaultState.Type.PARALLEL)) {\n+                if(!supportedParallelState((ParallelState) state)) {\n+                    LOGGER.warn(\"unsupported parallel state\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea7f39e4962df245c6108ea06a56517e98f2ad53"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODIwNzA4OA==", "bodyText": "formatted and updated logger warn message. thanks", "url": "https://github.com/kiegroup/kogito-runtimes/pull/439#discussion_r408207088", "createdAt": "2020-04-14T15:00:36Z", "author": {"login": "tsurdilo"}, "path": "jbpm/jbpm-serverless-workflow/src/main/java/org/jbpm/serverless/workflow/parser/util/ServerlessWorkflowUtils.java", "diffHunk": "@@ -89,14 +92,39 @@ public static boolean includesSupportedStates(Workflow workflow) {\n                     && !state.getType().equals(DefaultState.Type.DELAY)\n                     && !state.getType().equals(DefaultState.Type.SUBFLOW)\n                     && !state.getType().equals(DefaultState.Type.RELAY)\n-                    && !state.getType().equals(DefaultState.Type.SWITCH)) {\n+                    && !state.getType().equals(DefaultState.Type.SWITCH)\n+                    && !state.getType().equals(DefaultState.Type.PARALLEL)) {\n                 return false;\n             }\n+\n+            if(state.getType().equals(DefaultState.Type.PARALLEL)) {\n+                if(!supportedParallelState((ParallelState) state)) {\n+                    LOGGER.warn(\"unsupported parallel state\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEyMTg0Mw=="}, "originalCommit": {"oid": "ea7f39e4962df245c6108ea06a56517e98f2ad53"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 227, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}