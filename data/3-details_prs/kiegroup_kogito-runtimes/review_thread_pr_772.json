{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3OTc4Njk3", "number": 772, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxMjowODoyN1rOEpylWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxMjowODoyN1rOEpylWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMjU1ODMyOnYy", "diffSide": "RIGHT", "path": "addons/explainability/explainability-springboot-addon/src/main/java/org/kie/kogito/explainability/SpringBootExplainableResource.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxMjowODoyN1rOHbrMHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxMzo0NTowMFrOHbuN1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc4MTIxNA==", "bodyText": "Can you review this change? Now the method returns directly the result in case of success while it returns a ResponseEntity<Object> in case of failure. I would suggest to always return a ResponseEntity<Object>", "url": "https://github.com/kiegroup/kogito-runtimes/pull/772#discussion_r498781214", "createdAt": "2020-10-02T12:08:27Z", "author": {"login": "danielezonca"}, "path": "addons/explainability/explainability-springboot-addon/src/main/java/org/kie/kogito/explainability/SpringBootExplainableResource.java", "diffHunk": "@@ -45,11 +46,12 @@ public SpringBootExplainableResource(Application application) {\n         this.application = application;\n     }\n \n-    @PostMapping(produces = MediaType.APPLICATION_JSON_VALUE,\n-            consumes = MediaType.APPLICATION_JSON_VALUE)\n-    public ResponseEntity<Object> predict(List<PredictInput> inputs) {\n+    @POST\n+    @Consumes(MediaType.APPLICATION_JSON)\n+    @Produces(MediaType.APPLICATION_JSON)\n+    public Object predict(@RequestBody List<PredictInput> inputs) {\n         try {\n-            return ResponseEntity.ok(explainabilityService.processRequest(application, inputs));\n+            return explainabilityService.processRequest(application, inputs);\n         } catch (Exception e) {\n             LOGGER.warn(\"An Exception occurred processing the predict request\", e);\n             return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c27f555c0de1b053b6deb483213a8030514899f"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODgxMzEzNw==", "bodyText": "I would suggest to always return a ResponseEntity<Object>\n\nThis was the original implementation before my changes.\nUnfortunately it was different from the Quarkus version, causing the /predict endpoint to return two different responses depending on the underlying framework.\nI made these changes because the Explainability Service expects the output as returned by the Quarkus addon and was breaking in the integration tests trying to parse this one.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/772#discussion_r498813137", "createdAt": "2020-10-02T13:14:35Z", "author": {"login": "kostola"}, "path": "addons/explainability/explainability-springboot-addon/src/main/java/org/kie/kogito/explainability/SpringBootExplainableResource.java", "diffHunk": "@@ -45,11 +46,12 @@ public SpringBootExplainableResource(Application application) {\n         this.application = application;\n     }\n \n-    @PostMapping(produces = MediaType.APPLICATION_JSON_VALUE,\n-            consumes = MediaType.APPLICATION_JSON_VALUE)\n-    public ResponseEntity<Object> predict(List<PredictInput> inputs) {\n+    @POST\n+    @Consumes(MediaType.APPLICATION_JSON)\n+    @Produces(MediaType.APPLICATION_JSON)\n+    public Object predict(@RequestBody List<PredictInput> inputs) {\n         try {\n-            return ResponseEntity.ok(explainabilityService.processRequest(application, inputs));\n+            return explainabilityService.processRequest(application, inputs);\n         } catch (Exception e) {\n             LOGGER.warn(\"An Exception occurred processing the predict request\", e);\n             return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getMessage());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc4MTIxNA=="}, "originalCommit": {"oid": "3c27f555c0de1b053b6deb483213a8030514899f"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODgzMDgwNg==", "bodyText": "@danielezonca I refactored this class to use only javax.ws.rs.* classes and now it's completely equivalent to the Quarkus version.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/772#discussion_r498830806", "createdAt": "2020-10-02T13:45:00Z", "author": {"login": "kostola"}, "path": "addons/explainability/explainability-springboot-addon/src/main/java/org/kie/kogito/explainability/SpringBootExplainableResource.java", "diffHunk": "@@ -45,11 +46,12 @@ public SpringBootExplainableResource(Application application) {\n         this.application = application;\n     }\n \n-    @PostMapping(produces = MediaType.APPLICATION_JSON_VALUE,\n-            consumes = MediaType.APPLICATION_JSON_VALUE)\n-    public ResponseEntity<Object> predict(List<PredictInput> inputs) {\n+    @POST\n+    @Consumes(MediaType.APPLICATION_JSON)\n+    @Produces(MediaType.APPLICATION_JSON)\n+    public Object predict(@RequestBody List<PredictInput> inputs) {\n         try {\n-            return ResponseEntity.ok(explainabilityService.processRequest(application, inputs));\n+            return explainabilityService.processRequest(application, inputs);\n         } catch (Exception e) {\n             LOGGER.warn(\"An Exception occurred processing the predict request\", e);\n             return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getMessage());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc4MTIxNA=="}, "originalCommit": {"oid": "3c27f555c0de1b053b6deb483213a8030514899f"}, "originalPosition": 53}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4783, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}