{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4MzYyNjIx", "number": 880, "title": "KOGITO-3819 Ensure same Process instance is returned in Processes.fin\u2026", "bodyText": "\u2026dProcessById\nhttps://issues.redhat.com/browse/KOGITO-3819", "createdAt": "2020-11-10T09:52:34Z", "url": "https://github.com/kiegroup/kogito-runtimes/pull/880", "merged": true, "mergeCommit": {"oid": "2dcff79b1101ad4b79c4b63af0e3ee5e710319c9"}, "closed": true, "closedAt": "2020-11-18T15:39:52Z", "author": {"login": "cristianonicolai"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbGROTAH2gAyNTE4MzYyNjIxOjliNjI1MzY0NzkzZDNiOGM0YmZhYmFkNGJiYzdlY2RmYWM5Y2EyMWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddsff6AFqTUzMzM1MzkwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9b625364793d3b8c4bfabad4bbc7ecdfac9ca21f", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/9b625364793d3b8c4bfabad4bbc7ecdfac9ca21f", "committedDate": "2020-11-10T09:51:26Z", "message": "KOGITO-3819 Ensure same Process instance is returned in Processes.findProcessById"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNjMzNTc5", "url": "https://github.com/kiegroup/kogito-runtimes/pull/880#pullrequestreview-532633579", "createdAt": "2020-11-17T17:47:05Z", "commit": {"oid": "9b625364793d3b8c4bfabad4bbc7ecdfac9ca21f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNzo0NzowNVrOH1Bf9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNzo0NzowNVrOH1Bf9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM2MTE0Mw==", "bodyText": "just a question, keeping all  Processes in-memory and never removing them, could bring issues? I mean because it has references to all processInstances for example, right?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/880#discussion_r525361143", "createdAt": "2020-11-17T17:47:05Z", "author": {"login": "tiagodolphine"}, "path": "kogito-codegen/src/main/resources/class-templates/ProcessContainerTemplate.java", "diffHunk": "@@ -3,14 +3,16 @@\n public class Processes implements org.kie.kogito.process.Processes {\n \n     private final Application application;\n+    private java.util.Map<String, org.kie.kogito.process.Process<? extends org.kie.kogito.Model>> mappedProcesses = new java.util.concurrent.ConcurrentHashMap<>();\n \n     public Processes(Application application) {\n         this.application = application;\n     }\n \n     public org.kie.kogito.process.Process<? extends org.kie.kogito.Model> processById(String processId) {\n-        if (\"$ProcessId\".equals(processId))\n-            return new $ProcessClassName$(application).configure();\n+        if (\"$ProcessId\".equals(processId)) {\n+            return mappedProcesses.computeIfAbsent(\"$ProcessId\", k -> new $ProcessClassName$(application).configure());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b625364793d3b8c4bfabad4bbc7ecdfac9ca21f"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzMjE1MDY2", "url": "https://github.com/kiegroup/kogito-runtimes/pull/880#pullrequestreview-533215066", "createdAt": "2020-11-18T08:44:06Z", "commit": {"oid": "9b625364793d3b8c4bfabad4bbc7ecdfac9ca21f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzMzUzOTAx", "url": "https://github.com/kiegroup/kogito-runtimes/pull/880#pullrequestreview-533353901", "createdAt": "2020-11-18T11:31:16Z", "commit": {"oid": "9b625364793d3b8c4bfabad4bbc7ecdfac9ca21f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3841, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}