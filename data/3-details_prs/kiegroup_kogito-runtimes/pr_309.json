{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0MzgyNjEy", "number": 309, "title": "KOGITO-1145 - Business relevant process variables support", "bodyText": "", "createdAt": "2020-02-12T15:48:40Z", "url": "https://github.com/kiegroup/kogito-runtimes/pull/309", "merged": true, "mergeCommit": {"oid": "b475152e10bb5c12feda39abb30f0ebdfdf49358"}, "closed": true, "closedAt": "2020-02-16T16:47:29Z", "author": {"login": "mswiderski"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDwMYGgFqTM1Nzg5MjY2OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcE5dqXAFqTM1OTQwNjcxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3ODkyNjY4", "url": "https://github.com/kiegroup/kogito-runtimes/pull/309#pullrequestreview-357892668", "createdAt": "2020-02-13T00:56:49Z", "commit": {"oid": "c9bba9ac13df779a9654303e4a924d00a6b3e762"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwMDo1Njo0OVrOFpDz8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwMDo1Njo0OVrOFpDz8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU5ODM4Nw==", "bodyText": "@mswiderski is the intention that we support \"custom tags\"? Im asking that because if not, I would suggest us to have a enum to define these values, avoiding potential mistakes and making it easy for developers to know the possible values.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/309#discussion_r378598387", "createdAt": "2020-02-13T00:56:49Z", "author": {"login": "cristianonicolai"}, "path": "api/kogito-internal/src/main/java/org/kie/internal/kogito/codegen/VariableInfo.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.internal.kogito.codegen;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+@Retention(RetentionPolicy.RUNTIME)\n+@Target({ElementType.FIELD})\n+public @interface VariableInfo {\n+   /**\n+    * Variable tags assigned to given property of the model\n+    */\n+   String tags() default \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9bba9ac13df779a9654303e4a924d00a6b3e762"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3ODk0MDE2", "url": "https://github.com/kiegroup/kogito-runtimes/pull/309#pullrequestreview-357894016", "createdAt": "2020-02-13T01:01:04Z", "commit": {"oid": "c9bba9ac13df779a9654303e4a924d00a6b3e762"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwMTowMTowNVrOFpD4IQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwMTowMTowNVrOFpD4IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU5OTQ1Nw==", "bodyText": "@mswiderski if we add an enum, I would suggest calling this simply business then add a comment with the explanation, just to shorten it.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/309#discussion_r378599457", "createdAt": "2020-02-13T01:01:05Z", "author": {"login": "cristianonicolai"}, "path": "api/kogito-services/src/main/java/org/kie/kogito/services/event/impl/ProcessInstanceEventBatch.java", "diffHunk": "@@ -37,10 +40,14 @@\n import org.kie.kogito.event.EventBatch;\n import org.kie.kogito.services.event.ProcessInstanceDataEvent;\n import org.kie.kogito.services.event.UserTaskInstanceDataEvent;\n+import org.kie.kogito.services.event.VariableInstanceDataEvent;\n \n \n public class ProcessInstanceEventBatch implements EventBatch {\n     \n+    public static final String BUSINESS_RELEVANT = \"business-relevant\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9bba9ac13df779a9654303e4a924d00a6b3e762"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3ODk0Njg3", "url": "https://github.com/kiegroup/kogito-runtimes/pull/309#pullrequestreview-357894687", "createdAt": "2020-02-13T01:03:16Z", "commit": {"oid": "c9bba9ac13df779a9654303e4a924d00a6b3e762"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwMTowMzoxNlrOFpD6Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwMTowMzoxNlrOFpD6Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU5OTk4Nw==", "bodyText": "@mswiderski I couldn't get the default behaviour for variables. Would that be tracked? Should we make that configurable, so for instance if we want to enable audit for all variables changes we wouldnt need to mark all variables with this tag?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/309#discussion_r378599987", "createdAt": "2020-02-13T01:03:16Z", "author": {"login": "cristianonicolai"}, "path": "api/kogito-services/src/main/java/org/kie/kogito/services/event/impl/ProcessInstanceEventBatch.java", "diffHunk": "@@ -90,6 +98,12 @@ public void append(Object rawEvent) {\n                 if (workItem instanceof HumanTaskWorkItem && workItemTransitionEvent.isTransitioned()) {\n                     userTaskInstances.putIfAbsent(workItem.getId(), createUserTask(workItemTransitionEvent));                    \n                 }\n+            } else if (event instanceof ProcessVariableChangedEvent) {\n+                ProcessVariableChangedEvent variableChangedEvent = (ProcessVariableChangedEvent) event;\n+                \n+                if (variableChangedEvent.hasTag(BUSINESS_RELEVANT) || variableChangedEvent.hasTag(TRACKED)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9bba9ac13df779a9654303e4a924d00a6b3e762"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MDg2OTky", "url": "https://github.com/kiegroup/kogito-runtimes/pull/309#pullrequestreview-358086992", "createdAt": "2020-02-13T09:59:48Z", "commit": {"oid": "c9bba9ac13df779a9654303e4a924d00a6b3e762"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwOTo1OTo0OVrOFpNl6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwOTo1OTo0OVrOFpNl6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODc1ODYzMg==", "bodyText": "@ricardozanini FYI, new topic for runtimes", "url": "https://github.com/kiegroup/kogito-runtimes/pull/309#discussion_r378758632", "createdAt": "2020-02-13T09:59:49Z", "author": {"login": "cristianonicolai"}, "path": "addons/events/kogito-events-reactive-messaging-addon/src/main/java/org/kie/kogito/events/rm/ReactiveMessagingEventPublisher.java", "diffHunk": "@@ -39,6 +39,7 @@\n public class ReactiveMessagingEventPublisher implements EventPublisher {\n     private static final String PI_TOPIC_NAME = \"kogito-processinstances-events\";\n     private static final String UI_TOPIC_NAME = \"kogito-usertaskinstances-events\";\n+    private static final String VI_TOPIC_NAME = \"kogito-variables-events\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9bba9ac13df779a9654303e4a924d00a6b3e762"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9bba9ac13df779a9654303e4a924d00a6b3e762", "author": {"user": {"login": "mswiderski", "name": "Maciej Swiderski"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/c9bba9ac13df779a9654303e4a924d00a6b3e762", "committedDate": "2020-02-12T15:47:49Z", "message": "KOGITO-1145 - Business relevant process variables support"}, "afterCommit": {"oid": "38793d8dda914231f52fb660846f30a6dbfb5257", "author": {"user": {"login": "mswiderski", "name": "Maciej Swiderski"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/38793d8dda914231f52fb660846f30a6dbfb5257", "committedDate": "2020-02-13T11:24:41Z", "message": "KOGITO-1145 - Business relevant process variables support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "38793d8dda914231f52fb660846f30a6dbfb5257", "author": {"user": {"login": "mswiderski", "name": "Maciej Swiderski"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/38793d8dda914231f52fb660846f30a6dbfb5257", "committedDate": "2020-02-13T11:24:41Z", "message": "KOGITO-1145 - Business relevant process variables support"}, "afterCommit": {"oid": "68eb6e6cedd9a30127af52aeea18ef6596512521", "author": {"user": {"login": "mswiderski", "name": "Maciej Swiderski"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/68eb6e6cedd9a30127af52aeea18ef6596512521", "committedDate": "2020-02-13T12:05:31Z", "message": "KOGITO-1145 - Business relevant process variables support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "68eb6e6cedd9a30127af52aeea18ef6596512521", "author": {"user": {"login": "mswiderski", "name": "Maciej Swiderski"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/68eb6e6cedd9a30127af52aeea18ef6596512521", "committedDate": "2020-02-13T12:05:31Z", "message": "KOGITO-1145 - Business relevant process variables support"}, "afterCommit": {"oid": "cf4b0045ccca09827cd76de184ec796ace92d310", "author": {"user": {"login": "mswiderski", "name": "Maciej Swiderski"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/cf4b0045ccca09827cd76de184ec796ace92d310", "committedDate": "2020-02-13T15:38:38Z", "message": "KOGITO-1145 - Business relevant process variables support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NDM1MDM2", "url": "https://github.com/kiegroup/kogito-runtimes/pull/309#pullrequestreview-358435036", "createdAt": "2020-02-13T18:03:46Z", "commit": {"oid": "cf4b0045ccca09827cd76de184ec796ace92d310"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxODowMzo0NlrOFpeA3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxODowMzo0NlrOFpeA3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTAyNzY3OA==", "bodyText": "In case of multiple tags for the same variable, the idea is to serialize them in an array? Otherwise, maybe it is worth making String[] tags() instead of a single String, WDYT?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/309#discussion_r379027678", "createdAt": "2020-02-13T18:03:46Z", "author": {"login": "tiagodolphine"}, "path": "api/kogito-internal/src/main/java/org/kie/internal/kogito/codegen/VariableInfo.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.internal.kogito.codegen;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+@Retention(RetentionPolicy.RUNTIME)\n+@Target({ElementType.FIELD})\n+public @interface VariableInfo {\n+   /**\n+    * Variable tags assigned to given property of the model\n+    */\n+   String tags() default \"\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU5ODM4Nw=="}, "originalCommit": {"oid": "c9bba9ac13df779a9654303e4a924d00a6b3e762"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa2751f5caa04be4cdeeaf26961ef3544c23cb97", "author": {"user": {"login": "mswiderski", "name": "Maciej Swiderski"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/fa2751f5caa04be4cdeeaf26961ef3544c23cb97", "committedDate": "2020-02-14T07:44:22Z", "message": "KOGITO-1145 - Business relevant process variables support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cf4b0045ccca09827cd76de184ec796ace92d310", "author": {"user": {"login": "mswiderski", "name": "Maciej Swiderski"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/cf4b0045ccca09827cd76de184ec796ace92d310", "committedDate": "2020-02-13T15:38:38Z", "message": "KOGITO-1145 - Business relevant process variables support"}, "afterCommit": {"oid": "fa2751f5caa04be4cdeeaf26961ef3544c23cb97", "author": {"user": {"login": "mswiderski", "name": "Maciej Swiderski"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/fa2751f5caa04be4cdeeaf26961ef3544c23cb97", "committedDate": "2020-02-14T07:44:22Z", "message": "KOGITO-1145 - Business relevant process variables support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4OTQyNDE3", "url": "https://github.com/kiegroup/kogito-runtimes/pull/309#pullrequestreview-358942417", "createdAt": "2020-02-14T13:35:08Z", "commit": {"oid": "fa2751f5caa04be4cdeeaf26961ef3544c23cb97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NDA2NzE1", "url": "https://github.com/kiegroup/kogito-runtimes/pull/309#pullrequestreview-359406715", "createdAt": "2020-02-16T14:18:46Z", "commit": {"oid": "fa2751f5caa04be4cdeeaf26961ef3544c23cb97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3721, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}