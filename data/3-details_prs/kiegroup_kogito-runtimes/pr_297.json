{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4NTUzNDM5", "number": 297, "title": "KOGITO-888: Use properties to configure rules", "bodyText": "add support for config properties in application.conf\nkogito.rules.\"my.rule.Unit\".event-processing-type = [CLOUD | STREAM] # default = CLOUD\nkogito.rules.\"my.rule.Unit\".clock-type\" = [REALTIME | PSEUDO] # default = REALTIME\nkogito.rules.\"my.rule.Unit\".sessions-pool = [>1] # default = null", "createdAt": "2020-01-29T13:21:43Z", "url": "https://github.com/kiegroup/kogito-runtimes/pull/297", "merged": true, "mergeCommit": {"oid": "df34e2dbbe8c44c014f7a612eccff54a1ab33ad7"}, "closed": true, "closedAt": "2020-02-05T15:32:06Z", "author": {"login": "evacchi"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_CrMkgH2gAyMzY4NTUzNDM5OmI1ZmY5MDE1MTdlZTUzNjlhNTkyYWNjMzFmMzZhMjYyYWYxMzVkNTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBWysEgH2gAyMzY4NTUzNDM5OmFjMGY3ZTQ2NThhNDY2MGIyMjQ2MmUzZjViMGY2MWFlNTQ0MjQxOWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b5ff901517ee5369a592acc31f36a262af135d55", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/b5ff901517ee5369a592acc31f36a262af135d55", "committedDate": "2020-01-29T09:39:09Z", "message": "KOGITO-888: Use properties to configure rules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "723c4d41f88bf75d3f3728c9d3425c8b87a968e2", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/723c4d41f88bf75d3f3728c9d3425c8b87a968e2", "committedDate": "2020-01-29T10:49:23Z", "message": "parse config with test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72e851d9d86675a62a9844c28e3e394407323dcb", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/72e851d9d86675a62a9844c28e3e394407323dcb", "committedDate": "2020-01-29T13:34:06Z", "message": "remove fields from StaticRuleConfig"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "235e076977e2b42cc20d810f04db9988e9e88801", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/235e076977e2b42cc20d810f04db9988e9e88801", "committedDate": "2020-01-30T08:16:54Z", "message": "handle I/O error in Maven plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96fa127697bfffde45ed04fe84704bbceb62b3e5", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/96fa127697bfffde45ed04fe84704bbceb62b3e5", "committedDate": "2020-01-30T09:32:35Z", "message": "use build context"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzMDUzMTE0", "url": "https://github.com/kiegroup/kogito-runtimes/pull/297#pullrequestreview-353053114", "createdAt": "2020-02-04T15:11:51Z", "commit": {"oid": "96fa127697bfffde45ed04fe84704bbceb62b3e5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxNToxMTo1MVrOFlXp9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxNToxMTo1MVrOFlXp9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDcyOTIwNw==", "bodyText": "You should get the config from the map and override this is it is present.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/297#discussion_r374729207", "createdAt": "2020-02-04T15:11:51Z", "author": {"login": "mariofusco"}, "path": "kogito-codegen/src/main/java/org/kie/kogito/codegen/rules/IncrementalRuleCodegen.java", "diffHunk": "@@ -295,31 +308,26 @@ public ApplicationSection section() {\n         return generatedFiles;\n     }\n \n-    private void addUnitConfToKieModule( RuleUnitDescription ruleUnitDescription ) {\n+    private void addUnitConfToKieModule(RuleUnitDescription ruleUnitDescription) {\n         KieBaseModel unitKieBaseModel = kieModuleModel.newKieBaseModel(ruleUnit2KieBaseName(ruleUnitDescription.getCanonicalName()));\n         unitKieBaseModel.setEventProcessingMode(org.kie.api.conf.EventProcessingOption.CLOUD);\n         unitKieBaseModel.addPackage(ruleUnitDescription.getPackageName());\n \n-        // fixme config should go in the description as well\n-        Class<?> ruleUnit = ruleUnitDescription.getRuleUnitClass();\n-        if (ruleUnit != null) {\n-            SessionsPool sessionsPoolAnn = ruleUnit.getAnnotation(SessionsPool.class);\n-            if (sessionsPoolAnn != null && sessionsPoolAnn.value() > 0) {\n-                unitKieBaseModel.setSessionsPool(SessionsPoolOption.get(sessionsPoolAnn.value()));\n-            }\n-            EventProcessing eventAnn = ruleUnit.getAnnotation(EventProcessing.class);\n-            if (eventAnn != null && eventAnn.value() == EventProcessing.Type.STREAM) {\n-                unitKieBaseModel.setEventProcessingMode(EventProcessingOption.STREAM);\n-            }\n+        RuleUnitConfig config = ruleUnitDescription.getConfig();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96fa127697bfffde45ed04fe84704bbceb62b3e5"}, "originalPosition": 94}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac0f7e4658a4660b22462e3f5b0f61ae5442419b", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/ac0f7e4658a4660b22462e3f5b0f61ae5442419b", "committedDate": "2020-02-05T14:13:17Z", "message": "support merging configs"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3699, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}