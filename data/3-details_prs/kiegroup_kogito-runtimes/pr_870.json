{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2NTkyODMw", "number": 870, "title": "KOGITO-3604 - Assign constant value to sub process model", "bodyText": "Depends on #880", "createdAt": "2020-11-06T08:37:09Z", "url": "https://github.com/kiegroup/kogito-runtimes/pull/870", "merged": true, "mergeCommit": {"oid": "4fe3d087a7d31c5941738cf8fa62963070909922"}, "closed": true, "closedAt": "2020-11-24T12:19:34Z", "author": {"login": "cristianonicolai"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABda3spugFqTUyNjQ1NjA4Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfh0yogBqjQwMzA3Mjc4NjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NDU2MDgy", "url": "https://github.com/kiegroup/kogito-runtimes/pull/870#pullrequestreview-526456082", "createdAt": "2020-11-09T16:52:49Z", "commit": {"oid": "63f1eb3b02a0c3204251a3366f7dc172e24a8bad"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "63f1eb3b02a0c3204251a3366f7dc172e24a8bad", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/63f1eb3b02a0c3204251a3366f7dc172e24a8bad", "committedDate": "2020-11-06T08:35:50Z", "message": "KOGITO-3604 - Assign constant value to sub process model"}, "afterCommit": {"oid": "c635bcc28effe9dec362c05ba5df76ac5bd7e293", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/c635bcc28effe9dec362c05ba5df76ac5bd7e293", "committedDate": "2020-11-10T08:37:57Z", "message": "KOGITO-3604 - Assign constant value to sub process model"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c635bcc28effe9dec362c05ba5df76ac5bd7e293", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/c635bcc28effe9dec362c05ba5df76ac5bd7e293", "committedDate": "2020-11-10T08:37:57Z", "message": "KOGITO-3604 - Assign constant value to sub process model"}, "afterCommit": {"oid": "c1b5136d7a435009cbf6dffec9dea91401ea7e7d", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/c1b5136d7a435009cbf6dffec9dea91401ea7e7d", "committedDate": "2020-11-10T08:44:35Z", "message": "KOGITO-3604 - Assign constant value to sub process model"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c1b5136d7a435009cbf6dffec9dea91401ea7e7d", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/c1b5136d7a435009cbf6dffec9dea91401ea7e7d", "committedDate": "2020-11-10T08:44:35Z", "message": "KOGITO-3604 - Assign constant value to sub process model"}, "afterCommit": {"oid": "5fc8f09162a37dd7086f7939c89ea13757a87ccc", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/5fc8f09162a37dd7086f7939c89ea13757a87ccc", "committedDate": "2020-11-10T10:45:22Z", "message": "KOGITO-3604 - Assign constant value to sub process model"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NjY1NzUw", "url": "https://github.com/kiegroup/kogito-runtimes/pull/870#pullrequestreview-534665750", "createdAt": "2020-11-19T17:08:30Z", "commit": {"oid": "5fc8f09162a37dd7086f7939c89ea13757a87ccc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNzowODozMFrOH2o23w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNzowODozMFrOH2o23w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA1NDU1OQ==", "bodyText": "I assume this was added just to distinguish between assigning a constant and copying the value of the parent process variable to the subprocess model.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/870#discussion_r527054559", "createdAt": "2020-11-19T17:08:30Z", "author": {"login": "MarianMacik"}, "path": "jbpm/jbpm-bpmn2/src/main/java/org/jbpm/bpmn2/xml/CallActivityHandler.java", "diffHunk": "@@ -189,30 +192,31 @@ protected void readDataInputAssociation(org.w3c.dom.Node xmlNode, SubProcessNode\n \t\t\t}\n \t\t\tsubProcessNode.addInMapping(dataInputs.get(to), from, transformation);\n         } else {\n-            // targetRef\n-            String to = subNode.getTextContent();            \n-            // assignment\n-            subNode = subNode.getNextSibling();\n-            if (subNode != null) {\n-                org.w3c.dom.Node subSubNode = subNode.getFirstChild();\n-                NodeList nl = subSubNode.getChildNodes();\n-                if (nl.getLength() > 1) {\n-                    // not supported ?\n-                    subProcessNode.addInMapping(dataInputs.get(to), subSubNode.getTextContent());\n-                    return;\n-                } else if (nl.getLength() == 0) {\n-                    return;\n-                }\n-                Object result = null;\n-                Object from = nl.item(0);\n-                if (from instanceof Text) {\n-                    result = ((Text) from).getTextContent();\n-                } else {\n-                    result = nl.item(0);\n-                }\n-                subProcessNode.addInMapping(dataInputs.get(to), result.toString());\n-                \n-            }\n+\t\t\t// targetRef\n+\t\t\tString to = subNode.getTextContent();\n+\t\t\t// assignment\n+\t\t\tsubNode = subNode.getNextSibling();\n+\t\t\tif (subNode != null) {\n+\t\t\t\torg.w3c.dom.Node subSubNode = subNode.getFirstChild();\n+\t\t\t\tNodeList nl = subSubNode.getChildNodes();\n+\t\t\t\tif (nl.getLength() > 1) {\n+\t\t\t\t\t// not supported ?\n+\t\t\t\t\tsubProcessNode.addInAssociation(\n+\t\t\t\t\t\t\tnew DataAssociation(subSubNode.getTextContent(), dataInputs.get(to), singletonList(new Assignment(null, subSubNode.getTextContent(), to)), null));\n+\t\t\t\t\treturn;\n+\t\t\t\t} else if (nl.getLength() == 0) {\n+\t\t\t\t\treturn;\n+\t\t\t\t}\n+\t\t\t\tObject result = null;\n+\t\t\t\tObject from = nl.item(0);\n+\t\t\t\tif (from instanceof Text) {\n+\t\t\t\t\tresult = ((Text) from).getTextContent();\n+\t\t\t\t} else {\n+\t\t\t\t\tresult = nl.item(0);\n+\t\t\t\t}\n+\t\t\t\tsubProcessNode.addInAssociation(\n+\t\t\t\t\t\tnew DataAssociation(result.toString(), dataInputs.get(to), singletonList(new Assignment(null, result.toString(), to)), null));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fc8f09162a37dd7086f7939c89ea13757a87ccc"}, "originalPosition": 75}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NjY1ODc3", "url": "https://github.com/kiegroup/kogito-runtimes/pull/870#pullrequestreview-534665877", "createdAt": "2020-11-19T17:08:38Z", "commit": {"oid": "5fc8f09162a37dd7086f7939c89ea13757a87ccc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5fc8f09162a37dd7086f7939c89ea13757a87ccc", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/5fc8f09162a37dd7086f7939c89ea13757a87ccc", "committedDate": "2020-11-10T10:45:22Z", "message": "KOGITO-3604 - Assign constant value to sub process model"}, "afterCommit": {"oid": "929c5d30c0ff900c7ac3378f36b6149a5940017c", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/929c5d30c0ff900c7ac3378f36b6149a5940017c", "committedDate": "2020-11-20T01:14:27Z", "message": "KOGITO-3604 - Assign constant value to sub process model"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6648f0b79eff67404933881602cd1c6f140b0693", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/6648f0b79eff67404933881602cd1c6f140b0693", "committedDate": "2020-11-24T04:13:08Z", "message": "KOGITO-3604 - Assign constant value to sub process model"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "929c5d30c0ff900c7ac3378f36b6149a5940017c", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/929c5d30c0ff900c7ac3378f36b6149a5940017c", "committedDate": "2020-11-20T01:14:27Z", "message": "KOGITO-3604 - Assign constant value to sub process model"}, "afterCommit": {"oid": "6648f0b79eff67404933881602cd1c6f140b0693", "author": {"user": {"login": "cristianonicolai", "name": "Cristiano Nicolai"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/6648f0b79eff67404933881602cd1c6f140b0693", "committedDate": "2020-11-24T04:13:08Z", "message": "KOGITO-3604 - Assign constant value to sub process model"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3833, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}