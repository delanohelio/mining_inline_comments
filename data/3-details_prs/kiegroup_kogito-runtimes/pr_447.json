{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzODIzMzM3", "number": 447, "title": "[KOGITO-1869] Assign unique id to DMN evaluations", "bodyText": "In this PR I enhanced DmnDecisionModel to inject a new UUID into the DMNMetadata (in a predefined field) right before the calls to evaluateAll and evaluateDecisionService of the underlying  DMNRuntime.", "createdAt": "2020-04-15T15:14:49Z", "url": "https://github.com/kiegroup/kogito-runtimes/pull/447", "merged": true, "mergeCommit": {"oid": "0eb10249fbc1f3dc1f67b16a211899ed3fc8e19f"}, "closed": true, "closedAt": "2020-04-21T08:01:47Z", "author": {"login": "kostola"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX7NkzAFqTM5Mzk2ODM5OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZfrrKgH2gAyNDAzODIzMzM3OjlkMTZlMDRjZmU2N2M0YTJlODEwZmVjNTQ3YjgyZmI2YzA5ODRkMTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzOTY4Mzk5", "url": "https://github.com/kiegroup/kogito-runtimes/pull/447#pullrequestreview-393968399", "createdAt": "2020-04-15T17:05:34Z", "commit": {"oid": "f61533e2d3aad20699f6ed999aa95f3445c694fd"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzOTg3Mzg3", "url": "https://github.com/kiegroup/kogito-runtimes/pull/447#pullrequestreview-393987387", "createdAt": "2020-04-15T17:31:14Z", "commit": {"oid": "f61533e2d3aad20699f6ed999aa95f3445c694fd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNzozMToxNFrOGGEOaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNzozMToxNFrOGGEOaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAxMzg2NA==", "bodyText": "Can you please wrap the UUID in a ExecutionIDProvider interface or similar so that we can change ID logic in a single place? You can add this object to the constructor. This logic will become more complex when we will extend tracing to processes and rules because we want to have end to end tracing and this ID needs to be stable for the whole execution.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/447#discussion_r409013864", "createdAt": "2020-04-15T17:31:14Z", "author": {"login": "danielezonca"}, "path": "drools/kogito-dmn/src/main/java/org/kie/kogito/dmn/DmnDecisionModel.java", "diffHunk": "@@ -25,11 +27,17 @@ public DMNContext newContext(Map<String, Object> variables) {\n \n     @Override\n     public DMNResult evaluateAll(DMNContext context) {\n-        return dmnRuntime.evaluateAll(dmnRuntime.getModel(namespace, name), context);\n+        return dmnRuntime.evaluateAll(dmnRuntime.getModel(namespace, name), injectEvaluationId(context));\n     }\n \n     @Override\n     public DMNResult evaluateDecisionService(DMNContext context, String decisionServiceName) {\n-        return dmnRuntime.evaluateDecisionService(dmnRuntime.getModel(namespace, name), context, decisionServiceName);\n+        return dmnRuntime.evaluateDecisionService(dmnRuntime.getModel(namespace, name), injectEvaluationId(context), decisionServiceName);\n+    }\n+\n+    private static DMNContext injectEvaluationId(DMNContext context) {\n+        context.getMetadata().set(EVALUATION_ID_KEY, UUID.randomUUID().toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f61533e2d3aad20699f6ed999aa95f3445c694fd"}, "originalPosition": 31}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "837dd8c37310d5d33458312f885e3a9a245303d5", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/837dd8c37310d5d33458312f885e3a9a245303d5", "committedDate": "2020-04-17T13:55:46Z", "message": "[KOGITO-1869] Add ExecutionIdSupplier and use it for DMN execution id generation"}, "afterCommit": {"oid": "acc7e5a18502673faa0e09ce641bb0b0400b8445", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/acc7e5a18502673faa0e09ce641bb0b0400b8445", "committedDate": "2020-04-17T14:12:47Z", "message": "[KOGITO-1869] Add ExecutionIdSupplier and use it for DMN execution id generation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NDkxODcx", "url": "https://github.com/kiegroup/kogito-runtimes/pull/447#pullrequestreview-395491871", "createdAt": "2020-04-17T14:14:47Z", "commit": {"oid": "acc7e5a18502673faa0e09ce641bb0b0400b8445"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MjE1MDcw", "url": "https://github.com/kiegroup/kogito-runtimes/pull/447#pullrequestreview-396215070", "createdAt": "2020-04-20T07:48:27Z", "commit": {"oid": "e4c82976198ec0725932e7f4d7c40ac81346be7c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e4c82976198ec0725932e7f4d7c40ac81346be7c", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/e4c82976198ec0725932e7f4d7c40ac81346be7c", "committedDate": "2020-04-17T14:26:28Z", "message": "[KOGITO-1869] ExecutionIdSupplier is now optional in DmnDecisionModel"}, "afterCommit": {"oid": "f0bd410ed31fe39541a9d71680e9e54a0888280f", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/f0bd410ed31fe39541a9d71680e9e54a0888280f", "committedDate": "2020-04-20T08:26:28Z", "message": "[KOGITO-1869] Add DecisionExecutionIdUtilsTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MzQ5MzMw", "url": "https://github.com/kiegroup/kogito-runtimes/pull/447#pullrequestreview-396349330", "createdAt": "2020-04-20T10:58:59Z", "commit": {"oid": "f0bd410ed31fe39541a9d71680e9e54a0888280f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMDo1ODo1OVrOGIO3aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMDo1ODo1OVrOGIO3aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI4NTM1NQ==", "bodyText": "Sorry, no. This shall be parametrised in some way, we cannot enforce all users to be impacted by this UUID, especially considering then also Trusty will need to plug their own supplied (for instance, process execution ID).", "url": "https://github.com/kiegroup/kogito-runtimes/pull/447#discussion_r411285355", "createdAt": "2020-04-20T10:58:59Z", "author": {"login": "tarilabs"}, "path": "kogito-codegen/src/main/resources/class-templates/DMNApplicationClassDeclTemplate.java", "diffHunk": "@@ -8,7 +8,7 @@ public void init(org.kie.kogito.Application app) {\n     }\n \n     public org.kie.kogito.decision.DecisionModel getDecisionModel(java.lang.String namespace, java.lang.String name) {\n-        return new org.kie.kogito.dmn.DmnDecisionModel(dmnRuntime, namespace, name);\n+        return new org.kie.kogito.dmn.DmnDecisionModel(dmnRuntime, namespace, name, new org.kie.kogito.dmn.DmnExecutionIdSupplier());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0bd410ed31fe39541a9d71680e9e54a0888280f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee64e945b7d0e26bdfacd8a8c4184776fc4740bb", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/ee64e945b7d0e26bdfacd8a8c4184776fc4740bb", "committedDate": "2020-04-20T13:03:59Z", "message": "[KOGITO-1869] DmnDecisionModel injects evaluation id"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "242ce11dae5937b4140be30eb08c139d4ab3511f", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/242ce11dae5937b4140be30eb08c139d4ab3511f", "committedDate": "2020-04-20T13:03:59Z", "message": "[KOGITO-1869] Add ExecutionIdSupplier and use it for DMN execution id generation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee76095384debbae24ae8b4c798a5bc58a400f97", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/ee76095384debbae24ae8b4c798a5bc58a400f97", "committedDate": "2020-04-20T13:03:59Z", "message": "[KOGITO-1869] ExecutionIdSupplier is now optional in DmnDecisionModel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9410b8af8c4a9fe2f01580a66d58d704a370a3e2", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/9410b8af8c4a9fe2f01580a66d58d704a370a3e2", "committedDate": "2020-04-20T13:03:59Z", "message": "[KOGITO-1869] Add DecisionExecutionIdUtilsTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "241ff049ccc9b8fed0f2b0120ee7d9722136c731", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/241ff049ccc9b8fed0f2b0120ee7d9722136c731", "committedDate": "2020-04-20T13:03:59Z", "message": "[KOGITO-1869] Revert DMNApplicationClassDeclTemplate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f0bd410ed31fe39541a9d71680e9e54a0888280f", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/f0bd410ed31fe39541a9d71680e9e54a0888280f", "committedDate": "2020-04-20T08:26:28Z", "message": "[KOGITO-1869] Add DecisionExecutionIdUtilsTest"}, "afterCommit": {"oid": "241ff049ccc9b8fed0f2b0120ee7d9722136c731", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/241ff049ccc9b8fed0f2b0120ee7d9722136c731", "committedDate": "2020-04-20T13:03:59Z", "message": "[KOGITO-1869] Revert DMNApplicationClassDeclTemplate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NDM3Mzgz", "url": "https://github.com/kiegroup/kogito-runtimes/pull/447#pullrequestreview-396437383", "createdAt": "2020-04-20T13:10:49Z", "commit": {"oid": "241ff049ccc9b8fed0f2b0120ee7d9722136c731"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMzoxMDo0OVrOGITqqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMzoxMTowNlrOGITrXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM2NDAwOQ==", "bodyText": "missing license header.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/447#discussion_r411364009", "createdAt": "2020-04-20T13:10:49Z", "author": {"login": "tarilabs"}, "path": "api/kogito-api/src/main/java/org/kie/kogito/ExecutionIdSupplier.java", "diffHunk": "@@ -0,0 +1,11 @@\n+package org.kie.kogito;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "241ff049ccc9b8fed0f2b0120ee7d9722136c731"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM2NDA2NA==", "bodyText": "missing license header.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/447#discussion_r411364064", "createdAt": "2020-04-20T13:10:54Z", "author": {"login": "tarilabs"}, "path": "api/kogito-api/src/main/java/org/kie/kogito/decision/DecisionExecutionIdUtils.java", "diffHunk": "@@ -0,0 +1,25 @@\n+package org.kie.kogito.decision;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "241ff049ccc9b8fed0f2b0120ee7d9722136c731"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM2NDExNA==", "bodyText": "missing license header.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/447#discussion_r411364114", "createdAt": "2020-04-20T13:10:59Z", "author": {"login": "tarilabs"}, "path": "api/kogito-api/src/test/java/org/kie/kogito/decision/DecisionExecutionIdUtilsTest.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package org.kie.kogito.decision;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "241ff049ccc9b8fed0f2b0120ee7d9722136c731"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM2NDE5MA==", "bodyText": "missing license header.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/447#discussion_r411364190", "createdAt": "2020-04-20T13:11:06Z", "author": {"login": "tarilabs"}, "path": "drools/kogito-dmn/src/main/java/org/kie/kogito/dmn/DmnExecutionIdSupplier.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package org.kie.kogito.dmn;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "241ff049ccc9b8fed0f2b0120ee7d9722136c731"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d16e04cfe67c4a2e810fec547b82fb6c0984d15", "author": {"user": {"login": "kostola", "name": "Alessandro Costa"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/9d16e04cfe67c4a2e810fec547b82fb6c0984d15", "committedDate": "2020-04-20T14:08:57Z", "message": "[KOGITO-1869] Add missing license headers"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3642, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}