{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3NjUyMTQ0", "number": 656, "title": "[KOGITO-2893] Detach Business Key from ID", "bodyText": "Fix: https://issues.redhat.com/browse/KOGITO-2893\nBusiness Key\n\nBusiness Key is kept as is but when provided it will be used as the ID.\nIDs will always be generated upon resource creation.\n\nRest API\n\nUse PUT instead of POST when data is submitted using the id. i.e. resource updates\nWhen a resource is created a 201 status code will be returned including a Location header with the url to the resource. This affects\n\nProcess instances created (custom or generated ID)\nNew Task instantiation (for adhoc tasks)\n\n\nWhen a resource is not found a NotFoundException is thrown instead of returning 204 No Content\n\nBonus\n\nUpdates were only updating the internal variables (legacyProcessInstance), not the variables model.\nUse random port for SpringBoot tests\n\nSigned-off-by: ruromero rromerom@redhat.com", "createdAt": "2020-07-28T08:36:53Z", "url": "https://github.com/kiegroup/kogito-runtimes/pull/656", "merged": true, "mergeCommit": {"oid": "fe552d11daa130fed0b3f7f8eb982b97f5d2ac7f"}, "closed": true, "closedAt": "2020-08-27T11:33:53Z", "author": {"login": "ruromero"}, "timelineItems": {"totalCount": 33, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5Xr5qABqjM1OTQ3ODI0MjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdC-ucyAFqTQ3NjYyNjg1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "de5302f136cf319e276c927ef35ba30d248919dd", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/de5302f136cf319e276c927ef35ba30d248919dd", "committedDate": "2020-07-28T08:35:31Z", "message": "[KOGITO-2893] Add businessKey to model and Get request\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "30409395fb6355ea0b7b446023fb4be8b3afd62d", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/30409395fb6355ea0b7b446023fb4be8b3afd62d", "committedDate": "2020-07-28T14:55:12Z", "message": "[KOGITO-2893] Add businessKey to model and Get request\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "30409395fb6355ea0b7b446023fb4be8b3afd62d", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/30409395fb6355ea0b7b446023fb4be8b3afd62d", "committedDate": "2020-07-28T14:55:12Z", "message": "[KOGITO-2893] Add businessKey to model and Get request\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "04ef9e3a1cbaff867435e3c11dc52209b008296d", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/04ef9e3a1cbaff867435e3c11dc52209b008296d", "committedDate": "2020-07-29T18:02:35Z", "message": "[KOGITO-2893] Use key as ID and update using PUT\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04ef9e3a1cbaff867435e3c11dc52209b008296d", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/04ef9e3a1cbaff867435e3c11dc52209b008296d", "committedDate": "2020-07-29T18:02:35Z", "message": "[KOGITO-2893] Use key as ID and update using PUT\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "7ca42e36c7bf931cd3d5cae1196fc442690b5dd5", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/7ca42e36c7bf931cd3d5cae1196fc442690b5dd5", "committedDate": "2020-07-29T18:05:35Z", "message": "[KOGITO-2893] Use key as ID and update using PUT\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ca42e36c7bf931cd3d5cae1196fc442690b5dd5", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/7ca42e36c7bf931cd3d5cae1196fc442690b5dd5", "committedDate": "2020-07-29T18:05:35Z", "message": "[KOGITO-2893] Use key as ID and update using PUT\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "4decf806587c619fb671ccd99e3fd245d5f682c7", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/4decf806587c619fb671ccd99e3fd245d5f682c7", "committedDate": "2020-07-29T18:07:58Z", "message": "[KOGITO-2893] Use key as ID and update using PUT\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4decf806587c619fb671ccd99e3fd245d5f682c7", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/4decf806587c619fb671ccd99e3fd245d5f682c7", "committedDate": "2020-07-29T18:07:58Z", "message": "[KOGITO-2893] Use key as ID and update using PUT\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "e29c47ecae236e8db0aef137120c4aaae8684693", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/e29c47ecae236e8db0aef137120c4aaae8684693", "committedDate": "2020-07-29T21:11:18Z", "message": "[KOGITO-2893] Use key as ID and update using PUT\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MzEzNTYy", "url": "https://github.com/kiegroup/kogito-runtimes/pull/656#pullrequestreview-458313562", "createdAt": "2020-07-30T11:28:05Z", "commit": {"oid": "4decf806587c619fb671ccd99e3fd245d5f682c7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMToyOTowNVrOG5fGfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMToyOTowNVrOG5fGfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkzMTU4MQ==", "bodyText": "In general, I agree the PUT method should be used to update the resource, in his case the variables, so it should not be a POST as it was, but on the other hand, creating a new resource using a PUT is not proper behavior, what about creating the resource in the POST method but sending the ID inside the body (the resource with the ID) or one other position would be the same as it is here with the ID on the path but using a POST instead of a PUT just to create and let the PUT exclusively to do the update operation. WDYT?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/656#discussion_r462931581", "createdAt": "2020-07-30T11:29:05Z", "author": {"login": "tiagodolphine"}, "path": "kogito-codegen/src/main/resources/class-templates/ReactiveRestResourceTemplate.java", "diffHunk": "@@ -104,18 +98,20 @@\n         });\n     }\n     \n-    @POST()\n+    @PUT()\n     @Path(\"/{id}\")\n     @Consumes(MediaType.APPLICATION_JSON)\n     @Produces(MediaType.APPLICATION_JSON)\n-    public CompletionStage<$Type$Output> updateModel_$name$(@PathParam(\"id\") String id, $Type$ resource) {\n+    public CompletionStage<$Type$Output> createOrUpdateModel_$name$(@Context HttpHeaders httpHeaders,\n+                                                                    @PathParam(\"id\") String id,\n+                                                                    $Type$ resource) {\n         return CompletableFuture.supplyAsync(() -> {\n             return org.kie.kogito.services.uow.UnitOfWorkExecutor.executeInUnitOfWork(application.unitOfWorkManager(), () -> {\n                 ProcessInstance<$Type$> pi = process.instances()\n                         .findById(id)\n                         .orElse(null);\n                 if (pi == null) {\n-                    return null;\n+                    return createProcessInstance(httpHeaders, id, resource);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e29c47ecae236e8db0aef137120c4aaae8684693"}, "originalPosition": 92}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01e599b65cb880af96043d741e7caf1752ac4f99", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/01e599b65cb880af96043d741e7caf1752ac4f99", "committedDate": "2020-07-30T20:50:32Z", "message": "[KOGITO-2893] Return 201 created and throw 404 Exceptions\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "295babb35385e7780fce201434498a7541b67980", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/295babb35385e7780fce201434498a7541b67980", "committedDate": "2020-07-30T21:02:52Z", "message": "[KOGITO-2893] Return 201 created and throw 404 Exceptions\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d23111b9f988462c12a312c496167e6f5c1e4fe", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/7d23111b9f988462c12a312c496167e6f5c1e4fe", "committedDate": "2020-07-31T11:04:45Z", "message": "[KOGITO-2893] align archetype tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "bc4a1c0d04dbf4224da41fec59d18a767e18c2cf", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/bc4a1c0d04dbf4224da41fec59d18a767e18c2cf", "committedDate": "2020-08-05T09:46:08Z", "message": "[KOGITO-2893] Fix affected tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bc4a1c0d04dbf4224da41fec59d18a767e18c2cf", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/bc4a1c0d04dbf4224da41fec59d18a767e18c2cf", "committedDate": "2020-08-05T09:46:08Z", "message": "[KOGITO-2893] Fix affected tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "ed186ec7a7ff012b13648e5bdfbf529c0f9d4dc4", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/ed186ec7a7ff012b13648e5bdfbf529c0f9d4dc4", "committedDate": "2020-08-05T10:03:21Z", "message": "[KOGITO-2893] Fix affected tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ed186ec7a7ff012b13648e5bdfbf529c0f9d4dc4", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/ed186ec7a7ff012b13648e5bdfbf529c0f9d4dc4", "committedDate": "2020-08-05T10:03:21Z", "message": "[KOGITO-2893] Fix affected tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "43afb07f73dd60f7d30b937c7800d1e1601b2263", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/43afb07f73dd60f7d30b937c7800d1e1601b2263", "committedDate": "2020-08-05T14:09:58Z", "message": "[KOGITO-2893] Fix affected tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43afb07f73dd60f7d30b937c7800d1e1601b2263", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/43afb07f73dd60f7d30b937c7800d1e1601b2263", "committedDate": "2020-08-05T14:09:58Z", "message": "[KOGITO-2893] Fix affected tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "ad8f38f07c5fae3d8e30c7265024b647e11af886", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/ad8f38f07c5fae3d8e30c7265024b647e11af886", "committedDate": "2020-08-10T16:13:21Z", "message": "[KOGITO-2893] Fix affected tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ad8f38f07c5fae3d8e30c7265024b647e11af886", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/ad8f38f07c5fae3d8e30c7265024b647e11af886", "committedDate": "2020-08-10T16:13:21Z", "message": "[KOGITO-2893] Fix affected tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "f3196ce44e54639e960a39490a1d1a6b11dda21b", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/f3196ce44e54639e960a39490a1d1a6b11dda21b", "committedDate": "2020-08-10T19:44:12Z", "message": "[KOGITO-2893] Fix affected tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f3196ce44e54639e960a39490a1d1a6b11dda21b", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/f3196ce44e54639e960a39490a1d1a6b11dda21b", "committedDate": "2020-08-10T19:44:12Z", "message": "[KOGITO-2893] Fix affected tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "cb94e77e14e4562894cd00e198965500c0d6363b", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/cb94e77e14e4562894cd00e198965500c0d6363b", "committedDate": "2020-08-10T20:48:25Z", "message": "[KOGITO-2893] Fix affected tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cb94e77e14e4562894cd00e198965500c0d6363b", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/cb94e77e14e4562894cd00e198965500c0d6363b", "committedDate": "2020-08-10T20:48:25Z", "message": "[KOGITO-2893] Fix affected tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "e3eafb459ce8eecde18810fe75d4eff5c048b7b9", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/e3eafb459ce8eecde18810fe75d4eff5c048b7b9", "committedDate": "2020-08-11T06:46:53Z", "message": "[KOGITO-2893] Fix affected tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e3eafb459ce8eecde18810fe75d4eff5c048b7b9", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/e3eafb459ce8eecde18810fe75d4eff5c048b7b9", "committedDate": "2020-08-11T06:46:53Z", "message": "[KOGITO-2893] Fix affected tests\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "6664d4508f4cf6c3458a768fa4b0e9e18a490190", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/6664d4508f4cf6c3458a768fa4b0e9e18a490190", "committedDate": "2020-08-11T15:20:33Z", "message": "[KOGITO-2893] Detach BusinessKey from ID and align status codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6664d4508f4cf6c3458a768fa4b0e9e18a490190", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/6664d4508f4cf6c3458a768fa4b0e9e18a490190", "committedDate": "2020-08-11T15:20:33Z", "message": "[KOGITO-2893] Detach BusinessKey from ID and align status codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "4090eb3b3899dd77e1b319eacd8fdda3d3f1482f", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/4090eb3b3899dd77e1b319eacd8fdda3d3f1482f", "committedDate": "2020-08-12T13:07:36Z", "message": "[KOGITO-2893] Detach BusinessKey from ID and align status codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4090eb3b3899dd77e1b319eacd8fdda3d3f1482f", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/4090eb3b3899dd77e1b319eacd8fdda3d3f1482f", "committedDate": "2020-08-12T13:07:36Z", "message": "[KOGITO-2893] Detach BusinessKey from ID and align status codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "c3f587c832ec1068f926984aaf8c1c3c0631a8d3", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/c3f587c832ec1068f926984aaf8c1c3c0631a8d3", "committedDate": "2020-08-12T15:39:50Z", "message": "[KOGITO-2893] Detach BusinessKey from ID and align status codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c3f587c832ec1068f926984aaf8c1c3c0631a8d3", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/c3f587c832ec1068f926984aaf8c1c3c0631a8d3", "committedDate": "2020-08-12T15:39:50Z", "message": "[KOGITO-2893] Detach BusinessKey from ID and align status codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "25a81f0d2f468941645ef19a14478e02050c8a31", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/25a81f0d2f468941645ef19a14478e02050c8a31", "committedDate": "2020-08-12T16:33:10Z", "message": "[KOGITO-2893] Detach BusinessKey from ID and align status codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "25a81f0d2f468941645ef19a14478e02050c8a31", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/25a81f0d2f468941645ef19a14478e02050c8a31", "committedDate": "2020-08-12T16:33:10Z", "message": "[KOGITO-2893] Detach BusinessKey from ID and align status codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "3655bf59a1745c087bcf8c8d68c665537aae2576", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/3655bf59a1745c087bcf8c8d68c665537aae2576", "committedDate": "2020-08-12T17:05:51Z", "message": "[KOGITO-2893] Detach BusinessKey from ID and align status codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3655bf59a1745c087bcf8c8d68c665537aae2576", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/3655bf59a1745c087bcf8c8d68c665537aae2576", "committedDate": "2020-08-12T17:05:51Z", "message": "[KOGITO-2893] Detach BusinessKey from ID and align status codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "4534a2857fb5ea10306667ae454eefe1749d61e9", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/4534a2857fb5ea10306667ae454eefe1749d61e9", "committedDate": "2020-08-12T17:07:06Z", "message": "[KOGITO-2893] Detach BusinessKey from ID and align status codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4534a2857fb5ea10306667ae454eefe1749d61e9", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/4534a2857fb5ea10306667ae454eefe1749d61e9", "committedDate": "2020-08-12T17:07:06Z", "message": "[KOGITO-2893] Detach BusinessKey from ID and align status codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "0e2f86f48bb03ebedbe8e5a840624330f1aa2c8b", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/0e2f86f48bb03ebedbe8e5a840624330f1aa2c8b", "committedDate": "2020-08-12T17:13:23Z", "message": "[KOGITO-2893] Detach BusinessKey from ID and align status codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MjEwOTUw", "url": "https://github.com/kiegroup/kogito-runtimes/pull/656#pullrequestreview-466210950", "createdAt": "2020-08-12T19:30:25Z", "commit": {"oid": "0e2f86f48bb03ebedbe8e5a840624330f1aa2c8b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxOTozMDoyNVrOG_vdpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxOTozMDoyNVrOG_vdpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ5MTExMA==", "bodyText": "Is it necessary to update the documentation regarding this modification? probably for the other points as well where the REST APIs are being changed, maybe create a JIRA for it, WDYT?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/656#discussion_r469491110", "createdAt": "2020-08-12T19:30:25Z", "author": {"login": "tiagodolphine"}, "path": "kogito-codegen/src/main/resources/class-templates/RestResourceUserTaskTemplate.java", "diffHunk": "@@ -25,18 +25,15 @@\n                                       pi.workItems().stream().filter(wi -> wi.getName().equals(\"$taskName$\"))\n                                         .findFirst();\n                               if (task.isPresent()) {\n-                                  return Response.ok(pi.variables().toOutput())\n-                                                 .header(\"Link\", \"</\" + id + \"/$taskName$/\" + task.get().getId() +\n-                                                                 \">; rel='instance'\")\n-                                                 .build();\n+                                  return Response.created(uriInfo.getAbsolutePathBuilder().path(task.get().getId()).build()).build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e2f86f48bb03ebedbe8e5a840624330f1aa2c8b"}, "originalPosition": 28}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "41459b2535abc182d6d3da2a0ffefe7b955aa928", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/41459b2535abc182d6d3da2a0ffefe7b955aa928", "committedDate": "2020-08-13T11:55:45Z", "message": "[KOGITO-2893] Return entity when created\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "a7a3f120007d293a5a21a25e74e344af7bd5f467", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/a7a3f120007d293a5a21a25e74e344af7bd5f467", "committedDate": "2020-08-13T11:57:02Z", "message": "[KOGITO-2893] Return entity when created\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a7a3f120007d293a5a21a25e74e344af7bd5f467", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/a7a3f120007d293a5a21a25e74e344af7bd5f467", "committedDate": "2020-08-13T11:57:02Z", "message": "[KOGITO-2893] Return entity when created\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "5b7b39f1c7fe8fc51436c6d6eb8572c7473655aa", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/5b7b39f1c7fe8fc51436c6d6eb8572c7473655aa", "committedDate": "2020-08-13T12:48:45Z", "message": "[KOGITO-2893] Return entity when created\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2ODEyNjQ4", "url": "https://github.com/kiegroup/kogito-runtimes/pull/656#pullrequestreview-466812648", "createdAt": "2020-08-13T14:23:55Z", "commit": {"oid": "5b7b39f1c7fe8fc51436c6d6eb8572c7473655aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNDoyMzo1NlrOHAN8lQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNDoyMzo1NlrOHAN8lQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTk5MDU0OQ==", "bodyText": "Is seems the same changes are missing on the Spring templates, like SpringRestResourceTemplate.java", "url": "https://github.com/kiegroup/kogito-runtimes/pull/656#discussion_r469990549", "createdAt": "2020-08-13T14:23:56Z", "author": {"login": "tiagodolphine"}, "path": "kogito-codegen/src/main/resources/class-templates/RestResourceTemplate.java", "diffHunk": "@@ -35,54 +40,56 @@\n import org.kie.kogito.auth.IdentityProvider;\n import org.jbpm.process.instance.impl.humantask.HumanTaskTransition;\n \n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n @Path(\"/$name$\")\n public class $Type$Resource {\n \n     Process<$Type$> process;\n \n     Application application;\n \n-    @POST()\n+    @POST\n     @Produces(MediaType.APPLICATION_JSON)\n     @Consumes(MediaType.APPLICATION_JSON)\n-    public $Type$Output createResource_$name$(@Context HttpHeaders httpHeaders,\n+    public Response createResource_$name$(@Context HttpHeaders httpHeaders,\n+                                              @Context UriInfo uriInfo,\n                                               @QueryParam(\"businessKey\") String businessKey,\n                                               $Type$Input resource) {\n         return UnitOfWorkExecutor.executeInUnitOfWork(application.unitOfWorkManager(), () -> {\n             $Type$Input inputModel = resource != null ? resource : new $Type$Input();\n             ProcessInstance<$Type$> pi = process.createInstance(businessKey, inputModel.toModel());\n             String startFromNode = httpHeaders.getHeaderString(\"X-KOGITO-StartFromNode\");\n+\n             if (startFromNode != null) {\n                 pi.startFrom(startFromNode);\n             } else {\n                 pi.start();\n             }\n-            return pi.checkError().variables().toOutput();\n+            UriBuilder uriBuilder = uriInfo.getAbsolutePathBuilder().path(pi.id());\n+            return Response.created(uriBuilder.build())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b7b39f1c7fe8fc51436c6d6eb8572c7473655aa"}, "originalPosition": 58}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "553adb59457edd566b7f2a08c840caad26fbed14", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/553adb59457edd566b7f2a08c840caad26fbed14", "committedDate": "2020-08-13T20:50:46Z", "message": "[KOGITO-2893] Fix missing checkError\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "b63be2dba92ddb5bd6c3d7ee9c8c2139f8fc41cf", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/b63be2dba92ddb5bd6c3d7ee9c8c2139f8fc41cf", "committedDate": "2020-08-19T09:06:39Z", "message": "[KOGITO-2893] Fix missing checkError\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b63be2dba92ddb5bd6c3d7ee9c8c2139f8fc41cf", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/b63be2dba92ddb5bd6c3d7ee9c8c2139f8fc41cf", "committedDate": "2020-08-19T09:06:39Z", "message": "[KOGITO-2893] Fix missing checkError\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "f6ada4e142e3bd8c7a925bc02bde93e1da25e5a0", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/f6ada4e142e3bd8c7a925bc02bde93e1da25e5a0", "committedDate": "2020-08-19T09:17:18Z", "message": "[KOGITO-2893] Detach business key from ID and updated response codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f6ada4e142e3bd8c7a925bc02bde93e1da25e5a0", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/f6ada4e142e3bd8c7a925bc02bde93e1da25e5a0", "committedDate": "2020-08-19T09:17:18Z", "message": "[KOGITO-2893] Detach business key from ID and updated response codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "c8948393d598d24806a8767a20fc1644e691126f", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/c8948393d598d24806a8767a20fc1644e691126f", "committedDate": "2020-08-24T10:51:25Z", "message": "[KOGITO-2893] Detach business key from ID and updated response codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c8948393d598d24806a8767a20fc1644e691126f", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/c8948393d598d24806a8767a20fc1644e691126f", "committedDate": "2020-08-24T10:51:25Z", "message": "[KOGITO-2893] Detach business key from ID and updated response codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "f02f669c87eb5c925a9d0fc4a9594ec819f16f53", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/f02f669c87eb5c925a9d0fc4a9594ec819f16f53", "committedDate": "2020-08-24T13:43:27Z", "message": "[KOGITO-2893] Detach business key from ID and updated response codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f923b123cde215080b46d9a302ae40307fdd4033", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/f923b123cde215080b46d9a302ae40307fdd4033", "committedDate": "2020-08-26T13:38:10Z", "message": "[KOGITO-2893] Detach business key from ID and updated response codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f02f669c87eb5c925a9d0fc4a9594ec819f16f53", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/f02f669c87eb5c925a9d0fc4a9594ec819f16f53", "committedDate": "2020-08-24T13:43:27Z", "message": "[KOGITO-2893] Detach business key from ID and updated response codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}, "afterCommit": {"oid": "f923b123cde215080b46d9a302ae40307fdd4033", "author": {"user": {"login": "ruromero", "name": "Ruben Romero Montes"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/f923b123cde215080b46d9a302ae40307fdd4033", "committedDate": "2020-08-26T13:38:10Z", "message": "[KOGITO-2893] Detach business key from ID and updated response codes\n\nSigned-off-by: ruromero <rromerom@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2MjkyMzY4", "url": "https://github.com/kiegroup/kogito-runtimes/pull/656#pullrequestreview-476292368", "createdAt": "2020-08-27T01:16:00Z", "commit": {"oid": "f923b123cde215080b46d9a302ae40307fdd4033"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NjI2ODU0", "url": "https://github.com/kiegroup/kogito-runtimes/pull/656#pullrequestreview-476626854", "createdAt": "2020-08-27T11:29:56Z", "commit": {"oid": "f923b123cde215080b46d9a302ae40307fdd4033"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4079, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}