{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczMTIyNDIw", "number": 723, "title": "[KOGITO-2758] Refactor publisher-consumer code", "bodyText": "Moving most of the code to constant classes. Since we cannot use reflection at runtime, Im relying on Function to execute conditional object creation.\nResult of code generation is:\nFor consumer\n@javax.enterprise.context.ApplicationScoped()\npublic class TravelersMessageConsumer_3 {\n@javax.inject.Inject()\n@javax.inject.Named(\"Travelers\")\nProcess<TravelersModel> process;\n\n@javax.inject.Inject()\nApplication application;\n\n@org.eclipse.microprofile.config.inject.ConfigProperty(name = \"kogito.messaging.as-cloudevents\")\nOptional<Boolean> useCloudEvents = Optional.of(true);\n\nEventConsumerFactory eventConsumerFactory = new DefaultEventConsumerFactory();\n\n@javax.annotation.PostConstruct()\npublic void configure() {\n}\n\n@org.eclipse.microprofile.reactive.messaging.Incoming(\"travellers\")\npublic void consume(String payload) {\n    eventConsumerFactory.get(event -> {\n        TravelersModel model = new TravelersModel();\n        model.setTraveller(event);\n        return model;\n    }, org.acme.travel.Traveller.class, TravelersMessageDataEvent_3.class, useCloudEvents).consume(application, process, payload, \"travellers\");\n}\n\n}\nfor producer\n@javax.enterprise.context.ApplicationScoped()\npublic class TravelersMessageProducer_7 {\n@javax.inject.Inject()\n@org.eclipse.microprofile.reactive.messaging.Channel(\"processedtravellers\")\norg.eclipse.microprofile.reactive.messaging.Emitter<String> emitter;\n\n@org.eclipse.microprofile.config.inject.ConfigProperty(name = \"kogito.messaging.as-cloudevents\")\nOptional<Boolean> useCloudEvents = Optional.of(true);\n\nEventMarshaller marshaller = new DefaultEventMarshaller();\n\n@javax.annotation.PostConstruct()\npublic void configure() {\n}\n\npublic void produce(ProcessInstance pi, org.acme.travel.Traveller eventData) {\n    emitter.send(this.marshall(pi, eventData));\n}\n\nprivate String marshall(ProcessInstance pi, org.acme.travel.Traveller eventData) {\n    return marshaller.marshall(eventData, e -> new TravelersMessageDataEvent_7(\"\", e, pi.getId(), pi.getParentProcessInstanceId(), pi.getRootProcessInstanceId(), pi.getProcessId(), pi.getRootProcessId(), String.valueOf(pi.getState()), pi.getReferenceId()), useCloudEvents);\n}\n\n}", "createdAt": "2020-08-25T11:03:20Z", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723", "merged": true, "mergeCommit": {"oid": "17dfac92c4d33d4107245f0b86ede40d43b629fc"}, "closed": true, "closedAt": "2020-09-08T10:12:19Z", "author": {"login": "fjtirado"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCVO7qABqjM2ODk1NTQ3NDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGiYIvgBqjM3MzcwMDM0Mjc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bf9d9c10a39fd5395f830f401f9cb97b4878a074", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/bf9d9c10a39fd5395f830f401f9cb97b4878a074", "committedDate": "2020-08-25T10:55:47Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "f2f78e5268369e0f2fe752c9e79e5a0f45cf04b5", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/f2f78e5268369e0f2fe752c9e79e5a0f45cf04b5", "committedDate": "2020-08-25T11:09:13Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f2f78e5268369e0f2fe752c9e79e5a0f45cf04b5", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/f2f78e5268369e0f2fe752c9e79e5a0f45cf04b5", "committedDate": "2020-08-25T11:09:13Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "b5f257ffb14952389de0e5588bd5f318fb7c7f9b", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/b5f257ffb14952389de0e5588bd5f318fb7c7f9b", "committedDate": "2020-08-25T11:09:59Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NDYwMjQ0", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#pullrequestreview-474460244", "createdAt": "2020-08-25T13:05:33Z", "commit": {"oid": "b5f257ffb14952389de0e5588bd5f318fb7c7f9b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMzowNTozM1rOHGXI9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMzowNTozM1rOHGXI9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQzMjYyOQ==", "bodyText": "Removing this won't affect JSON unmarshal/marshal in runtime?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#discussion_r476432629", "createdAt": "2020-08-25T13:05:33Z", "author": {"login": "ricardozanini"}, "path": "api/kogito-services/src/main/java/org/kie/kogito/services/event/AbstractProcessDataEvent.java", "diffHunk": "@@ -78,7 +107,11 @@ public String getKogitoReferenceId() {\n         return this.kogitoReferenceId;\n     }\n \n-    public void setKogitoReferenceId(String kogitoReferenceId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5f257ffb14952389de0e5588bd5f318fb7c7f9b"}, "originalPosition": 54}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5f257ffb14952389de0e5588bd5f318fb7c7f9b", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/b5f257ffb14952389de0e5588bd5f318fb7c7f9b", "committedDate": "2020-08-25T11:09:59Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "e8f4e4deb2933a295e24aa80ea6b727d1d2420b9", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/e8f4e4deb2933a295e24aa80ea6b727d1d2420b9", "committedDate": "2020-08-26T19:40:22Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e8f4e4deb2933a295e24aa80ea6b727d1d2420b9", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/e8f4e4deb2933a295e24aa80ea6b727d1d2420b9", "committedDate": "2020-08-26T19:40:22Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "125c4430eac68828a5b5e7bfbc55e1758d889c9f", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/125c4430eac68828a5b5e7bfbc55e1758d889c9f", "committedDate": "2020-08-27T08:05:31Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "125c4430eac68828a5b5e7bfbc55e1758d889c9f", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/125c4430eac68828a5b5e7bfbc55e1758d889c9f", "committedDate": "2020-08-27T08:05:31Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "92ed59429287feba58856a7c8bdad6a5c388cc3c", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/92ed59429287feba58856a7c8bdad6a5c388cc3c", "committedDate": "2020-08-27T08:06:14Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "92ed59429287feba58856a7c8bdad6a5c388cc3c", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/92ed59429287feba58856a7c8bdad6a5c388cc3c", "committedDate": "2020-08-27T08:06:14Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "990f5d7247ab859bc50f4a54e506f51864c5703a", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/990f5d7247ab859bc50f4a54e506f51864c5703a", "committedDate": "2020-08-27T09:37:32Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "990f5d7247ab859bc50f4a54e506f51864c5703a", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/990f5d7247ab859bc50f4a54e506f51864c5703a", "committedDate": "2020-08-27T09:37:32Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "39fbf643f743b537e5f31e9257665a8165145600", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/39fbf643f743b537e5f31e9257665a8165145600", "committedDate": "2020-08-27T09:43:09Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39fbf643f743b537e5f31e9257665a8165145600", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/39fbf643f743b537e5f31e9257665a8165145600", "committedDate": "2020-08-27T09:43:09Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "dce1c3c84ca0fe1038d62922acb567ce49040848", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/dce1c3c84ca0fe1038d62922acb567ce49040848", "committedDate": "2020-08-27T10:31:59Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dce1c3c84ca0fe1038d62922acb567ce49040848", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/dce1c3c84ca0fe1038d62922acb567ce49040848", "committedDate": "2020-08-27T10:31:59Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "4127716c48b2936f51c0f549773e864c3f30e5de", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/4127716c48b2936f51c0f549773e864c3f30e5de", "committedDate": "2020-08-27T10:33:22Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4127716c48b2936f51c0f549773e864c3f30e5de", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/4127716c48b2936f51c0f549773e864c3f30e5de", "committedDate": "2020-08-27T10:33:22Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "42cc1818c27541c433164314f68fd3b8e1f2a472", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/42cc1818c27541c433164314f68fd3b8e1f2a472", "committedDate": "2020-08-27T11:55:24Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "42cc1818c27541c433164314f68fd3b8e1f2a472", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/42cc1818c27541c433164314f68fd3b8e1f2a472", "committedDate": "2020-08-27T11:55:24Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "4fec3ab2859ab7b48c07573b8b8f93ce79234907", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/4fec3ab2859ab7b48c07573b8b8f93ce79234907", "committedDate": "2020-08-27T12:38:47Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4fec3ab2859ab7b48c07573b8b8f93ce79234907", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/4fec3ab2859ab7b48c07573b8b8f93ce79234907", "committedDate": "2020-08-27T12:38:47Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "a7ed0b2cc6930c763ab70bc678607b9f53358740", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/a7ed0b2cc6930c763ab70bc678607b9f53358740", "committedDate": "2020-08-27T13:32:32Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2ODA2MDYz", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#pullrequestreview-476806063", "createdAt": "2020-08-27T14:56:31Z", "commit": {"oid": "e322853996669dbb7cb4935f2357a065b8d540d1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e322853996669dbb7cb4935f2357a065b8d540d1", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/e322853996669dbb7cb4935f2357a065b8d540d1", "committedDate": "2020-08-27T13:42:13Z", "message": "[KOGITO-2758] Partially amending\nI think update method (if needed, which I'm not really sure) makes more\nsense as default implementation in model interface, this way generated\ncode is lighter"}, "afterCommit": {"oid": "671b9c37fc4953b94e9cc206626bab70a8c22e1d", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/671b9c37fc4953b94e9cc206626bab70a8c22e1d", "committedDate": "2020-08-27T15:09:23Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "671b9c37fc4953b94e9cc206626bab70a8c22e1d", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/671b9c37fc4953b94e9cc206626bab70a8c22e1d", "committedDate": "2020-08-27T15:09:23Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "2744cdfb4b10c0997cdaff2e6a1b06265ac4690f", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/2744cdfb4b10c0997cdaff2e6a1b06265ac4690f", "committedDate": "2020-08-27T15:15:49Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MDgxMjE4", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#pullrequestreview-477081218", "createdAt": "2020-08-27T21:06:26Z", "commit": {"oid": "2744cdfb4b10c0997cdaff2e6a1b06265ac4690f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QyMTowNjoyNlrOHIhQ4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QyMTowNjoyNlrOHIhQ4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY5NTY1MA==", "bodyText": "Is this a typo? \ud83e\udd14", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#discussion_r478695650", "createdAt": "2020-08-27T21:06:26Z", "author": {"login": "ricardozanini"}, "path": "kogito-codegen/src/main/resources/class-templates/events/CloudEventsMessageProducerTemplate.java", "diffHunk": "@@ -38,33 +32,18 @@ public void produce(ProcessInstance pi, $Type$ eventData) {\n         } else {\n         }\n     }\n-\n+    \n+\u00a1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2744cdfb4b10c0997cdaff2e6a1b06265ac4690f"}, "originalPosition": 42}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2744cdfb4b10c0997cdaff2e6a1b06265ac4690f", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/2744cdfb4b10c0997cdaff2e6a1b06265ac4690f", "committedDate": "2020-08-27T15:15:49Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "5cd1805613afef8b89080935ffda9ffd3b2ee5c3", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/5cd1805613afef8b89080935ffda9ffd3b2ee5c3", "committedDate": "2020-08-28T08:41:14Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5cd1805613afef8b89080935ffda9ffd3b2ee5c3", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/5cd1805613afef8b89080935ffda9ffd3b2ee5c3", "committedDate": "2020-08-28T08:41:14Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5", "committedDate": "2020-08-28T14:45:08Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5Mzc2MDAx", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#pullrequestreview-479376001", "createdAt": "2020-09-01T03:30:06Z", "commit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5"}, "state": "COMMENTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQwMzozMDowN1rOHKbvOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQwMzo0NDo0MlrOHKc83A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDcwMjI2Nw==", "bodyText": "@fjtirado so why add setKogitoStartFromNode then? shouldnt we keep consistency?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#discussion_r480702267", "createdAt": "2020-09-01T03:30:07Z", "author": {"login": "cristianonicolai"}, "path": "api/kogito-services/src/main/java/org/kie/kogito/services/event/AbstractProcessDataEvent.java", "diffHunk": "@@ -78,7 +107,11 @@ public String getKogitoReferenceId() {\n         return this.kogitoReferenceId;\n     }\n \n-    public void setKogitoReferenceId(String kogitoReferenceId) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQzMjYyOQ=="}, "originalCommit": {"oid": "b5f257ffb14952389de0e5588bd5f318fb7c7f9b"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDcwMzk1Mw==", "bodyText": "please review code formatting in this class", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#discussion_r480703953", "createdAt": "2020-09-01T03:31:27Z", "author": {"login": "cristianonicolai"}, "path": "integration-tests/integration-tests-quarkus/src/main/java/org/acme/travels/Traveller.java", "diffHunk": "@@ -21,21 +21,24 @@\n \tprivate String lastName;\n \tprivate String email;\n \tprivate String nationality;\n-\tprivate Address address;\n+    private Address address;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDcwNTM3Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public CloudEventConsumer(Function<D, M> function,\n          \n          \n            \n                                          Class<T> cloudEventClass) {\n          \n          \n            \n                public CloudEventConsumer(Function<D, M> function, Class<T> cloudEventClass) {", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#discussion_r480705377", "createdAt": "2020-09-01T03:32:24Z", "author": {"login": "cristianonicolai"}, "path": "jbpm/jbpm-flow/src/main/java/org/kie/kogito/event/impl/CloudEventConsumer.java", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.kogito.event.impl;\n+\n+import java.util.function.Function;\n+\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import org.kie.kogito.Application;\n+import org.kie.kogito.Model;\n+import org.kie.kogito.process.Process;\n+import org.kie.kogito.process.ProcessInstance;\n+import org.kie.kogito.process.impl.Sig;\n+import org.kie.kogito.services.event.AbstractProcessDataEvent;\n+import org.kie.kogito.services.event.EventConsumer;\n+import org.kie.kogito.services.uow.UnitOfWorkExecutor;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class CloudEventConsumer<D, M extends Model, T extends AbstractProcessDataEvent<D>>\n+                               implements EventConsumer<M> {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(CloudEventConsumer.class);\n+\n+    private Function<D, M> function;\n+    private Class<T> cloudEventClass;\n+\n+    public CloudEventConsumer(Function<D, M> function,\n+                              Class<T> cloudEventClass) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDcwNTcyNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void\n          \n          \n            \n                    consume(Application application, Process<M> process, String payload, String trigger) {\n          \n          \n            \n                public void consume(Application application, Process<M> process, String payload, String trigger) {", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#discussion_r480705726", "createdAt": "2020-09-01T03:32:37Z", "author": {"login": "cristianonicolai"}, "path": "jbpm/jbpm-flow/src/main/java/org/kie/kogito/event/impl/CloudEventConsumer.java", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.kogito.event.impl;\n+\n+import java.util.function.Function;\n+\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import org.kie.kogito.Application;\n+import org.kie.kogito.Model;\n+import org.kie.kogito.process.Process;\n+import org.kie.kogito.process.ProcessInstance;\n+import org.kie.kogito.process.impl.Sig;\n+import org.kie.kogito.services.event.AbstractProcessDataEvent;\n+import org.kie.kogito.services.event.EventConsumer;\n+import org.kie.kogito.services.uow.UnitOfWorkExecutor;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class CloudEventConsumer<D, M extends Model, T extends AbstractProcessDataEvent<D>>\n+                               implements EventConsumer<M> {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(CloudEventConsumer.class);\n+\n+    private Function<D, M> function;\n+    private Class<T> cloudEventClass;\n+\n+    public CloudEventConsumer(Function<D, M> function,\n+                              Class<T> cloudEventClass) {\n+        this.function = function;\n+        this.cloudEventClass = cloudEventClass;\n+    }\n+\n+    @Override\n+    public void\n+        consume(Application application, Process<M> process, String payload, String trigger) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDcwNzIzNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                logger\n          \n          \n            \n                                    .debug(\n          \n          \n            \n                                        \"Received message without reference id, staring new process instance with trigger '{}'\",\n          \n          \n            \n                                        trigger);\n          \n          \n            \n                                logger.debug(\"Received message without reference id, staring new process instance with trigger '{}'\",\n          \n          \n            \n                                                     trigger);", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#discussion_r480707234", "createdAt": "2020-09-01T03:33:43Z", "author": {"login": "cristianonicolai"}, "path": "jbpm/jbpm-flow/src/main/java/org/kie/kogito/event/impl/CloudEventConsumer.java", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.kogito.event.impl;\n+\n+import java.util.function.Function;\n+\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import org.kie.kogito.Application;\n+import org.kie.kogito.Model;\n+import org.kie.kogito.process.Process;\n+import org.kie.kogito.process.ProcessInstance;\n+import org.kie.kogito.process.impl.Sig;\n+import org.kie.kogito.services.event.AbstractProcessDataEvent;\n+import org.kie.kogito.services.event.EventConsumer;\n+import org.kie.kogito.services.uow.UnitOfWorkExecutor;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class CloudEventConsumer<D, M extends Model, T extends AbstractProcessDataEvent<D>>\n+                               implements EventConsumer<M> {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(CloudEventConsumer.class);\n+\n+    private Function<D, M> function;\n+    private Class<T> cloudEventClass;\n+\n+    public CloudEventConsumer(Function<D, M> function,\n+                              Class<T> cloudEventClass) {\n+        this.function = function;\n+        this.cloudEventClass = cloudEventClass;\n+    }\n+\n+    @Override\n+    public void\n+        consume(Application application, Process<M> process, String payload, String trigger) {\n+        try {\n+            T cloudEvent = EventUtils.readEvent(payload, cloudEventClass);\n+            M model = function.apply(cloudEvent.getData());\n+            UnitOfWorkExecutor.executeInUnitOfWork(application.unitOfWorkManager(), () -> {\n+                if (cloudEvent.getKogitoReferenceId() != null) {\n+                    logger\n+                        .debug(\n+                            \"Received message with reference id '{}' going to use it to send signal '{}'\",\n+                            cloudEvent.getKogitoReferenceId(),\n+                            trigger);\n+                    process\n+                        .instances()\n+                        .findById(cloudEvent.getKogitoReferenceId())\n+                        .ifPresent(\n+                            pi -> pi\n+                                .send(\n+                                    Sig\n+                                        .of(\n+                                            \"Message-\" + trigger,\n+                                            cloudEvent.getData(),\n+                                            cloudEvent.getKogitoProcessinstanceId())));\n+                } else {\n+                    logger\n+                        .debug(\n+                            \"Received message without reference id, staring new process instance with trigger '{}'\",\n+                            trigger);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDcxMDA4NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                ProcessInstance<M> pi =\n          \n          \n            \n                                        process.createInstance(model);\n          \n          \n            \n                                ProcessInstance<M> pi = process.createInstance(model);", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#discussion_r480710084", "createdAt": "2020-09-01T03:35:45Z", "author": {"login": "cristianonicolai"}, "path": "jbpm/jbpm-flow/src/main/java/org/kie/kogito/event/impl/CloudEventConsumer.java", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.kogito.event.impl;\n+\n+import java.util.function.Function;\n+\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import org.kie.kogito.Application;\n+import org.kie.kogito.Model;\n+import org.kie.kogito.process.Process;\n+import org.kie.kogito.process.ProcessInstance;\n+import org.kie.kogito.process.impl.Sig;\n+import org.kie.kogito.services.event.AbstractProcessDataEvent;\n+import org.kie.kogito.services.event.EventConsumer;\n+import org.kie.kogito.services.uow.UnitOfWorkExecutor;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class CloudEventConsumer<D, M extends Model, T extends AbstractProcessDataEvent<D>>\n+                               implements EventConsumer<M> {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(CloudEventConsumer.class);\n+\n+    private Function<D, M> function;\n+    private Class<T> cloudEventClass;\n+\n+    public CloudEventConsumer(Function<D, M> function,\n+                              Class<T> cloudEventClass) {\n+        this.function = function;\n+        this.cloudEventClass = cloudEventClass;\n+    }\n+\n+    @Override\n+    public void\n+        consume(Application application, Process<M> process, String payload, String trigger) {\n+        try {\n+            T cloudEvent = EventUtils.readEvent(payload, cloudEventClass);\n+            M model = function.apply(cloudEvent.getData());\n+            UnitOfWorkExecutor.executeInUnitOfWork(application.unitOfWorkManager(), () -> {\n+                if (cloudEvent.getKogitoReferenceId() != null) {\n+                    logger\n+                        .debug(\n+                            \"Received message with reference id '{}' going to use it to send signal '{}'\",\n+                            cloudEvent.getKogitoReferenceId(),\n+                            trigger);\n+                    process\n+                        .instances()\n+                        .findById(cloudEvent.getKogitoReferenceId())\n+                        .ifPresent(\n+                            pi -> pi\n+                                .send(\n+                                    Sig\n+                                        .of(\n+                                            \"Message-\" + trigger,\n+                                            cloudEvent.getData(),\n+                                            cloudEvent.getKogitoProcessinstanceId())));\n+                } else {\n+                    logger\n+                        .debug(\n+                            \"Received message without reference id, staring new process instance with trigger '{}'\",\n+                            trigger);\n+                    ProcessInstance<M> pi =\n+                            process.createInstance(model);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDcxMDg5Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public DataEventConsumer(Function<D, M> function,\n          \n          \n            \n                                         Class<D> dataEventClass) {\n          \n          \n            \n                public DataEventConsumer(Function<D, M> function, Class<D> dataEventClass) {", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#discussion_r480710892", "createdAt": "2020-09-01T03:36:20Z", "author": {"login": "cristianonicolai"}, "path": "jbpm/jbpm-flow/src/main/java/org/kie/kogito/event/impl/DataEventConsumer.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.kogito.event.impl;\n+\n+import java.util.function.Function;\n+\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import org.kie.kogito.Application;\n+import org.kie.kogito.Model;\n+import org.kie.kogito.process.Process;\n+import org.kie.kogito.process.ProcessInstance;\n+import org.kie.kogito.services.event.EventConsumer;\n+import org.kie.kogito.services.uow.UnitOfWorkExecutor;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class DataEventConsumer<M extends Model, D> implements EventConsumer<M> {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(DataEventConsumer.class);\n+\n+    private Function<D, M> function;\n+    private Class<D> dataEventClass;\n+\n+    public DataEventConsumer(Function<D, M> function,\n+                             Class<D> dataEventClass) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDcxMTQzMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            logger\n          \n          \n            \n                                .debug(\n          \n          \n            \n                            logger .debug(", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#discussion_r480711431", "createdAt": "2020-09-01T03:36:45Z", "author": {"login": "cristianonicolai"}, "path": "jbpm/jbpm-flow/src/main/java/org/kie/kogito/event/impl/DataEventConsumer.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.kogito.event.impl;\n+\n+import java.util.function.Function;\n+\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import org.kie.kogito.Application;\n+import org.kie.kogito.Model;\n+import org.kie.kogito.process.Process;\n+import org.kie.kogito.process.ProcessInstance;\n+import org.kie.kogito.services.event.EventConsumer;\n+import org.kie.kogito.services.uow.UnitOfWorkExecutor;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class DataEventConsumer<M extends Model, D> implements EventConsumer<M> {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(DataEventConsumer.class);\n+\n+    private Function<D, M> function;\n+    private Class<D> dataEventClass;\n+\n+    public DataEventConsumer(Function<D, M> function,\n+                             Class<D> dataEventClass) {\n+        this.function = function;\n+        this.dataEventClass = dataEventClass;\n+    }\n+\n+    @Override\n+    public void consume(Application application, Process<M> process, String payload, String trigger) {\n+        try {\n+            D eventData = EventUtils.readEvent(payload, dataEventClass);\n+            M model = function.apply(eventData);\n+            UnitOfWorkExecutor.executeInUnitOfWork(application.unitOfWorkManager(), () -> {\n+                logger\n+                    .debug(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDcxMjc1Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public <T, P extends AbstractProcessDataEvent<T>> String\n          \n          \n            \n                    marshall(T dataEvent, Function<T, P> cloudFunction, Optional<Boolean> isCloudEvent) {\n          \n          \n            \n                public <T, P extends AbstractProcessDataEvent<T>> String marshall(T dataEvent, Function<T, P> cloudFunction, Optional<Boolean> isCloudEvent) {", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#discussion_r480712752", "createdAt": "2020-09-01T03:37:45Z", "author": {"login": "cristianonicolai"}, "path": "jbpm/jbpm-flow/src/main/java/org/kie/kogito/event/impl/DefaultEventMarshaller.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.kogito.event.impl;\n+\n+import java.util.Optional;\n+import java.util.function.Function;\n+\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import org.kie.kogito.services.event.AbstractProcessDataEvent;\n+import org.kie.kogito.services.event.EventMarshaller;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+\n+public class DefaultEventMarshaller implements EventMarshaller {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(DefaultEventMarshaller.class);\n+\n+    @Override\n+    public <T, P extends AbstractProcessDataEvent<T>> String\n+        marshall(T dataEvent, Function<T, P> cloudFunction, Optional<Boolean> isCloudEvent) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDcyMjE0MA==", "bodyText": "@fjtirado this is resolved at compile time right, so why dont we inject a DefaultEventMarshaller or CloudEventMarshaller depending on that so we dont need to check at runtime? Instead we would have to concrete classes. Wouldnt that make things easier in the code we have to maintain?", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#discussion_r480722140", "createdAt": "2020-09-01T03:44:42Z", "author": {"login": "cristianonicolai"}, "path": "kogito-codegen/src/main/resources/class-templates/MessageProducerTemplate.java", "diffHunk": "@@ -1,29 +1,21 @@\n package com.myspace.demo;\n \n \n-import com.fasterxml.jackson.databind.ObjectMapper;\n-import com.fasterxml.jackson.databind.util.StdDateFormat;\n-import org.kie.api.runtime.process.ProcessInstance;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n \n+import org.kie.api.runtime.process.ProcessInstance;\n+import org.kie.kogito.services.event.EventMarshaller;\n+import org.kie.kogito.event.impl.DefaultEventMarshaller;\n import java.util.Optional;\n-import java.util.TimeZone;\n \n public class MessageProducer {\n \n     Object emitter;\n \n     Optional<Boolean> useCloudEvents = Optional.of(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5NTUwMzky", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#pullrequestreview-479550392", "createdAt": "2020-09-01T09:17:23Z", "commit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNDc3Mjkz", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#pullrequestreview-482477293", "createdAt": "2020-09-04T08:51:47Z", "commit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5", "committedDate": "2020-08-28T14:45:08Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "c2c91e2a2e460bedd34d8f56fe05fb1dc4d62e8e", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/c2c91e2a2e460bedd34d8f56fe05fb1dc4d62e8e", "committedDate": "2020-09-07T08:42:27Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2c91e2a2e460bedd34d8f56fe05fb1dc4d62e8e", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/c2c91e2a2e460bedd34d8f56fe05fb1dc4d62e8e", "committedDate": "2020-09-07T08:42:27Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "3b2d074b4ed602d7f45f036a73eaace3be6d25a5", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/3b2d074b4ed602d7f45f036a73eaace3be6d25a5", "committedDate": "2020-09-07T08:46:10Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNTExOTk0", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#pullrequestreview-483511994", "createdAt": "2020-09-07T12:19:36Z", "commit": {"oid": "3b2d074b4ed602d7f45f036a73eaace3be6d25a5"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMjoxOTozNlrOHN9QmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMjoxOTozNlrOHN9QmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDM5NzIwOQ==", "bodyText": "yep, you're right. Although I feel that is something that could be defined at compile time, but that's another story.", "url": "https://github.com/kiegroup/kogito-runtimes/pull/723#discussion_r484397209", "createdAt": "2020-09-07T12:19:36Z", "author": {"login": "cristianonicolai"}, "path": "kogito-codegen/src/main/resources/class-templates/MessageProducerTemplate.java", "diffHunk": "@@ -1,29 +1,21 @@\n package com.myspace.demo;\n \n \n-import com.fasterxml.jackson.databind.ObjectMapper;\n-import com.fasterxml.jackson.databind.util.StdDateFormat;\n-import org.kie.api.runtime.process.ProcessInstance;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n \n+import org.kie.api.runtime.process.ProcessInstance;\n+import org.kie.kogito.services.event.EventMarshaller;\n+import org.kie.kogito.event.impl.DefaultEventMarshaller;\n import java.util.Optional;\n-import java.util.TimeZone;\n \n public class MessageProducer {\n \n     Object emitter;\n \n     Optional<Boolean> useCloudEvents = Optional.of(true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDcyMjE0MA=="}, "originalCommit": {"oid": "a5d98c05a6d42ea103fdd1813a5c2140d4cce8d5"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "294078feee23c1227dc04db62c4c37f541352d3f", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/294078feee23c1227dc04db62c4c37f541352d3f", "committedDate": "2020-09-07T12:43:45Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b2d074b4ed602d7f45f036a73eaace3be6d25a5", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/3b2d074b4ed602d7f45f036a73eaace3be6d25a5", "committedDate": "2020-09-07T08:46:10Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}, "afterCommit": {"oid": "294078feee23c1227dc04db62c4c37f541352d3f", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/294078feee23c1227dc04db62c4c37f541352d3f", "committedDate": "2020-09-07T12:43:45Z", "message": "[KOGITO-2758] Refactory publisher-consumer code\n\nMoving most of the code to \"constant classes."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4141, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}