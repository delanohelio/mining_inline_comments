{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5MDE0Mjcz", "number": 660, "title": "KOGITO-2911 Refactor Codegen for \"RuleUnits\" class in Application.java ", "bodyText": "follow up to #657\nmust merge with: kiegroup/kogito-examples#350\n\nthis mimicks the work done for Application.java and Processes.java but for RuleUnits.java\nRuleUnits is now a factory in non-DI contexts (i.e. kogito-codegen)\notherwise it collects and provides all the RuleUnit beans and it can be injected with @Inject/@Autowire RuleUnits\n\nThe change is that currently RuleUnits is always a factory; i.e. it always returns new beans. While in DI contexts, it should delegate generation to the DI container.\nThis PR also makes less necessary ProjectModel/ProjectRuntime, which are currently always being used to construct rule units. This PR makes every RuleUnit class self-contained, it no longer requires an external generated factory, unless it is a SessionRuleUnit, i.e. a RuleUnit that mimicks the old Session behavior. Follow up to clean up: https://issues.redhat.com/browse/KOGITO-2929\nA minor API change is also introduced; RuleUnit has now an id() method that returns a String representing the fully qualified name of the rule unit; in case the rule unit is a SessionRuleUnit  then ID is the name of the KieSession. This is required so that the generated RuleUnits class can cache and return the bean instances (on CDI/Spring), as it is currently done for processes.", "createdAt": "2020-07-30T09:29:34Z", "url": "https://github.com/kiegroup/kogito-runtimes/pull/660", "merged": true, "mergeCommit": {"oid": "2b6686d56bd3d4640c9921d0143317bd928cc967"}, "closed": true, "closedAt": "2020-09-23T14:44:20Z", "author": {"login": "evacchi"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6Aln1gBqjM2MDQxNzY2OTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJCJ1FAH2gAyNDU5MDE0MjczOjIzNzM5YzIzZjM2ZjRkYWUwYzE3MTU2ZTkzNTM5OTNlNWQ5YWI5MDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe6a1ac75948af00e64eb7c3cc4e3097a5256d07", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/fe6a1ac75948af00e64eb7c3cc4e3097a5256d07", "committedDate": "2020-07-30T14:30:04Z", "message": "experimental! move rulebase/session config back to template"}, "afterCommit": {"oid": "9032a8eaa55c1c05021e0a7452b55440ae72318a", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/9032a8eaa55c1c05021e0a7452b55440ae72318a", "committedDate": "2020-07-30T14:34:40Z", "message": "experimental! move rulebase/session config back to template"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9032a8eaa55c1c05021e0a7452b55440ae72318a", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/9032a8eaa55c1c05021e0a7452b55440ae72318a", "committedDate": "2020-07-30T14:34:40Z", "message": "experimental! move rulebase/session config back to template"}, "afterCommit": {"oid": "b3577b67d895f53457be8887816a6b1ff17218d4", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/b3577b67d895f53457be8887816a6b1ff17218d4", "committedDate": "2020-08-03T08:02:17Z", "message": "KOGITO-2911 Refactor Codegen for \"RuleUnits\" class in Application.java"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3577b67d895f53457be8887816a6b1ff17218d4", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/b3577b67d895f53457be8887816a6b1ff17218d4", "committedDate": "2020-08-03T08:02:17Z", "message": "KOGITO-2911 Refactor Codegen for \"RuleUnits\" class in Application.java"}, "afterCommit": {"oid": "30cfbabcbdee90362d9b6350fe3c54967b77e5ad", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/30cfbabcbdee90362d9b6350fe3c54967b77e5ad", "committedDate": "2020-08-03T08:57:55Z", "message": "KOGITO-2911 Refactor Codegen for \"RuleUnits\" class in Application.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3499315ff01ca8d2247479a17195e2b50cb0df7a", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/3499315ff01ca8d2247479a17195e2b50cb0df7a", "committedDate": "2020-09-01T07:52:33Z", "message": "KOGITO-2911 Refactor Codegen for \"RuleUnits\" class in Application.java"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "30cfbabcbdee90362d9b6350fe3c54967b77e5ad", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/30cfbabcbdee90362d9b6350fe3c54967b77e5ad", "committedDate": "2020-08-03T08:57:55Z", "message": "KOGITO-2911 Refactor Codegen for \"RuleUnits\" class in Application.java"}, "afterCommit": {"oid": "3499315ff01ca8d2247479a17195e2b50cb0df7a", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/3499315ff01ca8d2247479a17195e2b50cb0df7a", "committedDate": "2020-09-01T07:52:33Z", "message": "KOGITO-2911 Refactor Codegen for \"RuleUnits\" class in Application.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41cb386211a5bfb315ba6df883d37abc60304d1c", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/41cb386211a5bfb315ba6df883d37abc60304d1c", "committedDate": "2020-09-02T08:44:31Z", "message": "missing imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNjExMzA0", "url": "https://github.com/kiegroup/kogito-runtimes/pull/660#pullrequestreview-482611304", "createdAt": "2020-09-04T12:30:45Z", "commit": {"oid": "41cb386211a5bfb315ba6df883d37abc60304d1c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxMjozMDo0NlrOHNLs0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxMjozMDo0NlrOHNLs0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzU4NTIzMw==", "bodyText": "Possibly use constant org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.DEFAULT_PACKAGE", "url": "https://github.com/kiegroup/kogito-runtimes/pull/660#discussion_r483585233", "createdAt": "2020-09-04T12:30:46Z", "author": {"login": "mariofusco"}, "path": "kogito-codegen/src/main/java/org/kie/kogito/codegen/rules/IncrementalRuleCodegen.java", "diffHunk": "@@ -206,7 +206,7 @@ private static ResourceType typeOf(FileSystemResource r) {\n     private boolean hotReloadMode = false;\n     private AddonsConfig addonsConfig = AddonsConfig.DEFAULT;\n     private boolean useRestServices = true;\n-    private String packageName;\n+    private String packageName = \"defaultpkg\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41cb386211a5bfb315ba6df883d37abc60304d1c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNjEzMTc2", "url": "https://github.com/kiegroup/kogito-runtimes/pull/660#pullrequestreview-482613176", "createdAt": "2020-09-04T12:33:47Z", "commit": {"oid": "41cb386211a5bfb315ba6df883d37abc60304d1c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23739c23f36f4dae0c17156e9353993e5d9ab907", "author": {"user": {"login": "evacchi", "name": "Edoardo Vacchi"}}, "url": "https://github.com/kiegroup/kogito-runtimes/commit/23739c23f36f4dae0c17156e9353993e5d9ab907", "committedDate": "2020-09-15T06:53:06Z", "message": "use defaultpkg constant"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4085, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}