{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxNjU2NDUx", "number": 501, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMDo1MjozMFrODdiDNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMDo1MjozMFrODdiDNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMjkzMTc1OnYy", "diffSide": "RIGHT", "path": "kork-swagger/kork-swagger.gradle", "isResolved": false, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMDo1MjozMFrOFmMMKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxOTowNjo1NVrOFoVa_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU4OTkzMA==", "bodyText": "I don't love needing to pull in groovy as a dependency just to exclude a groovy class from model building...open to suggestions for a better way of doing this.  (I think it needs to be api as if this isn't on the classpath of the consuming service at runtime I think it will fail if it looks at the list of excluded types and finds an undefined class.)\nOne other thought I had was to define a bean of type List<Class> excludedSwaggerClasses() here that's empty, and leave it to services to override that bean with anything they want to exclude...given that we'd probably want this in almost all services (as they almost all have groovy) that seemed more verbose, but definitely open to thoughts on that.", "url": "https://github.com/spinnaker/kork/pull/501#discussion_r375589930", "createdAt": "2020-02-06T00:52:30Z", "author": {"login": "ezimanyi"}, "path": "kork-swagger/kork-swagger.gradle", "diffHunk": "@@ -6,4 +6,5 @@ dependencies {\n   api \"org.springframework.boot:spring-boot-autoconfigure\"\n   api \"io.springfox:springfox-swagger2\"\n   api \"io.springfox:springfox-swagger-ui\"\n+  api \"org.codehaus.groovy:groovy-all\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fef6188c664c3e830d048aa5b455ee0c583114aa"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE2NDgwNQ==", "bodyText": "I'm fairly certain we can change this to implementation - at least at that point we're not forcing groovy as a dependency on everything else that uses this module.", "url": "https://github.com/spinnaker/kork/pull/501#discussion_r376164805", "createdAt": "2020-02-07T00:56:30Z", "author": {"login": "robzienert"}, "path": "kork-swagger/kork-swagger.gradle", "diffHunk": "@@ -6,4 +6,5 @@ dependencies {\n   api \"org.springframework.boot:spring-boot-autoconfigure\"\n   api \"io.springfox:springfox-swagger2\"\n   api \"io.springfox:springfox-swagger-ui\"\n+  api \"org.codehaus.groovy:groovy-all\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU4OTkzMA=="}, "originalCommit": {"oid": "fef6188c664c3e830d048aa5b455ee0c583114aa"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI4NTIzMw==", "bodyText": "Good call, let me quickly test that and will update the PR if it works.", "url": "https://github.com/spinnaker/kork/pull/501#discussion_r377285233", "createdAt": "2020-02-10T20:00:22Z", "author": {"login": "ezimanyi"}, "path": "kork-swagger/kork-swagger.gradle", "diffHunk": "@@ -6,4 +6,5 @@ dependencies {\n   api \"org.springframework.boot:spring-boot-autoconfigure\"\n   api \"io.springfox:springfox-swagger2\"\n   api \"io.springfox:springfox-swagger-ui\"\n+  api \"org.codehaus.groovy:groovy-all\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU4OTkzMA=="}, "originalCommit": {"oid": "fef6188c664c3e830d048aa5b455ee0c583114aa"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzMwMzM2MQ==", "bodyText": "If this doesn't work, I'd be happy to volunteer being the grunt that converts gate's controllers to Java.\ned: Are there other services that actually use the swagger stuff?", "url": "https://github.com/spinnaker/kork/pull/501#discussion_r377303361", "createdAt": "2020-02-10T20:39:39Z", "author": {"login": "robzienert"}, "path": "kork-swagger/kork-swagger.gradle", "diffHunk": "@@ -6,4 +6,5 @@ dependencies {\n   api \"org.springframework.boot:spring-boot-autoconfigure\"\n   api \"io.springfox:springfox-swagger2\"\n   api \"io.springfox:springfox-swagger-ui\"\n+  api \"org.codehaus.groovy:groovy-all\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU4OTkzMA=="}, "originalCommit": {"oid": "fef6188c664c3e830d048aa5b455ee0c583114aa"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzcyMDk0Mg==", "bodyText": "I just tested and it does indeed work using an implementation dependency though unfortunately (which I probably already knew at some point) that does mean we're still pulling Groovy into the runtime classpath of any consuming services.  It's not on the compile classpath (which is the difference from api) so at least these services won't be able to directly call groovy code.", "url": "https://github.com/spinnaker/kork/pull/501#discussion_r377720942", "createdAt": "2020-02-11T15:47:33Z", "author": {"login": "ezimanyi"}, "path": "kork-swagger/kork-swagger.gradle", "diffHunk": "@@ -6,4 +6,5 @@ dependencies {\n   api \"org.springframework.boot:spring-boot-autoconfigure\"\n   api \"io.springfox:springfox-swagger2\"\n   api \"io.springfox:springfox-swagger-ui\"\n+  api \"org.codehaus.groovy:groovy-all\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU4OTkzMA=="}, "originalCommit": {"oid": "fef6188c664c3e830d048aa5b455ee0c583114aa"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzcyMjA0NQ==", "bodyText": "I noticed this in front50 in particular as 90% of the startup time was this swagger generation; looks like clouddriver also uses it, probably others too.\nLet me know if you think this is reasonable as implementation even though it will put groovy on the runtime classpath of java-only dependencies.", "url": "https://github.com/spinnaker/kork/pull/501#discussion_r377722045", "createdAt": "2020-02-11T15:49:12Z", "author": {"login": "ezimanyi"}, "path": "kork-swagger/kork-swagger.gradle", "diffHunk": "@@ -6,4 +6,5 @@ dependencies {\n   api \"org.springframework.boot:spring-boot-autoconfigure\"\n   api \"io.springfox:springfox-swagger2\"\n   api \"io.springfox:springfox-swagger-ui\"\n+  api \"org.codehaus.groovy:groovy-all\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU4OTkzMA=="}, "originalCommit": {"oid": "fef6188c664c3e830d048aa5b455ee0c583114aa"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzgzODMzNQ==", "bodyText": "I think that's reasonable. We can improve the swagger experience now and then once Groovy is removed from our controllers, we'll be able to remove this dep. I've updated the TOC board to include this task: https://github.com/orgs/spinnaker/projects/6\nThis specific refactor was something I was targeting as next for me to take from the TOC project board anyway.", "url": "https://github.com/spinnaker/kork/pull/501#discussion_r377838335", "createdAt": "2020-02-11T19:06:55Z", "author": {"login": "robzienert"}, "path": "kork-swagger/kork-swagger.gradle", "diffHunk": "@@ -6,4 +6,5 @@ dependencies {\n   api \"org.springframework.boot:spring-boot-autoconfigure\"\n   api \"io.springfox:springfox-swagger2\"\n   api \"io.springfox:springfox-swagger-ui\"\n+  api \"org.codehaus.groovy:groovy-all\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU4OTkzMA=="}, "originalCommit": {"oid": "fef6188c664c3e830d048aa5b455ee0c583114aa"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3567, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}