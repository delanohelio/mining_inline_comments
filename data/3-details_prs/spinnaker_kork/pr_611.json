{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0NjI0MzQ2", "number": 611, "title": "fix(plugins): consider request params while building ok http client", "bodyText": "Adding supplied request params to the URL.", "createdAt": "2020-04-16T19:07:27Z", "url": "https://github.com/spinnaker/kork/pull/611", "merged": true, "mergeCommit": {"oid": "588a170e4684d668606e6f8158371cd7f4c2aa03"}, "closed": true, "closedAt": "2020-04-16T21:26:51Z", "author": {"login": "srekapalli"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYRfhigH2gAyNDA0NjI0MzQ2OjUzOWUwYTBmODA5OTcxM2Y3YjI4NDQ0NjRiNGM4NTQzZjVjNzRiYmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYSHjEAH2gAyNDA0NjI0MzQ2OjI3MzE5OTViMmU2MzAwZTlkMTUxYTY2YWY4YWVhZWZjMjg0NmU2YzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "539e0a0f8099713f7b2844464b4c8543f5c74bbb", "author": {"user": {"login": "srekapalli", "name": "Sairam Rekapalli"}}, "url": "https://github.com/spinnaker/kork/commit/539e0a0f8099713f7b2844464b4c8543f5c74bbb", "committedDate": "2020-04-16T19:03:05Z", "message": "fix(plugins): consider request params while building ok http client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3abd21867544f574f95b479123855b42428017a5", "author": {"user": {"login": "srekapalli", "name": "Sairam Rekapalli"}}, "url": "https://github.com/spinnaker/kork/commit/3abd21867544f574f95b479123855b42428017a5", "committedDate": "2020-04-16T19:12:35Z", "message": "Merge branch 'master' into http_client_sdk_fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0OTQxODA1", "url": "https://github.com/spinnaker/kork/pull/611#pullrequestreview-394941805", "createdAt": "2020-04-16T19:37:22Z", "commit": {"oid": "3abd21867544f574f95b479123855b42428017a5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxOTozNzoyMlrOGG0Vqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxOTozNzoyMlrOGG0Vqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgwMjE1NQ==", "bodyText": "Opinionated nit:\nrequest.queryParams.forEach { httpUrlBuilder.addQueryParameter(it.key, it.value) }", "url": "https://github.com/spinnaker/kork/pull/611#discussion_r409802155", "createdAt": "2020-04-16T19:37:22Z", "author": {"login": "jonsie"}, "path": "kork-plugins/src/main/kotlin/com/netflix/spinnaker/kork/plugins/sdk/httpclient/Ok3HttpClient.kt", "diffHunk": "@@ -93,11 +94,18 @@ class Ok3HttpClient(\n     }\n   }\n \n-  private fun requestBuilder(request: Request): okhttp3.Request.Builder =\n-    okhttp3.Request.Builder()\n+  private fun requestBuilder(request: Request): okhttp3.Request.Builder {\n+    val url = (baseUrl + request.path).replace(\"//\", \"/\")\n+    val httpUrlBuilder = HttpUrl.parse(url)?.newBuilder()\n+      ?: throw IntegrationException(\"Unable to parse url '$baseUrl'\")\n+    for (param in request.queryParams) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3abd21867544f574f95b479123855b42428017a5"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0OTQxOTU2", "url": "https://github.com/spinnaker/kork/pull/611#pullrequestreview-394941956", "createdAt": "2020-04-16T19:37:35Z", "commit": {"oid": "3abd21867544f574f95b479123855b42428017a5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2731995b2e6300e9d151a66af8aeaefc2846e6c3", "author": {"user": {"login": "srekapalli", "name": "Sairam Rekapalli"}}, "url": "https://github.com/spinnaker/kork/commit/2731995b2e6300e9d151a66af8aeaefc2846e6c3", "committedDate": "2020-04-16T19:46:48Z", "message": "fix(plugins): consider request params"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1500, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}