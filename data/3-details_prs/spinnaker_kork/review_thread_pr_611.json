{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0NjI0MzQ2", "number": 611, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxOTozNzoyMlrODypa0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxOTozNzoyMlrODypa0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NDM0MDAzOnYy", "diffSide": "RIGHT", "path": "kork-plugins/src/main/kotlin/com/netflix/spinnaker/kork/plugins/sdk/httpclient/Ok3HttpClient.kt", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxOTozNzoyMlrOGG0Vqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxOTozNzoyMlrOGG0Vqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgwMjE1NQ==", "bodyText": "Opinionated nit:\nrequest.queryParams.forEach { httpUrlBuilder.addQueryParameter(it.key, it.value) }", "url": "https://github.com/spinnaker/kork/pull/611#discussion_r409802155", "createdAt": "2020-04-16T19:37:22Z", "author": {"login": "jonsie"}, "path": "kork-plugins/src/main/kotlin/com/netflix/spinnaker/kork/plugins/sdk/httpclient/Ok3HttpClient.kt", "diffHunk": "@@ -93,11 +94,18 @@ class Ok3HttpClient(\n     }\n   }\n \n-  private fun requestBuilder(request: Request): okhttp3.Request.Builder =\n-    okhttp3.Request.Builder()\n+  private fun requestBuilder(request: Request): okhttp3.Request.Builder {\n+    val url = (baseUrl + request.path).replace(\"//\", \"/\")\n+    val httpUrlBuilder = HttpUrl.parse(url)?.newBuilder()\n+      ?: throw IntegrationException(\"Unable to parse url '$baseUrl'\")\n+    for (param in request.queryParams) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3abd21867544f574f95b479123855b42428017a5"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3520, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}