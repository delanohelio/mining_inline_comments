{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3MjE2NDQ2", "number": 11394, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxOTo1MzoyM1rODnmnbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxOTo1MzoyM1rODnmnbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyODUzNzQzOnYy", "diffSide": "RIGHT", "path": "flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/util/RecordEmitter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxOTo1MzoyM1rOF1s95Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQyMDo0Njo1OVrOF1uxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTg1NTU4OQ==", "bodyText": "This wouldn't be necessary if the thread was interrupted when the fetcher terminates. Once we confirm that this change has the intended effect, let's merge it and cherry-pick into the relevant release branches. I will take a look at improving the thread management in the fetcher as a follow-up.", "url": "https://github.com/apache/flink/pull/11394#discussion_r391855589", "createdAt": "2020-03-12T19:53:23Z", "author": {"login": "tweise"}, "path": "flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/util/RecordEmitter.java", "diffHunk": "@@ -205,6 +205,10 @@ protected void emitRecords() {\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n+\t\t\t\tif (!running) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56935c039fb7635784bcc76c9d5320c01dc28f25"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTg4NTEwNA==", "bodyText": "There is no connection between this thread and the task thread. Interrupts on the task thread by Flink won't interrupt the fetcher thread. This change is sufficient to stop it.\nGenerally, it would be smart if Flink itself interrupted not the thread but the thread group of the Flink task. Since all spawned threads are by default in the parent thread group this would automatically interrupt all of them.", "url": "https://github.com/apache/flink/pull/11394#discussion_r391885104", "createdAt": "2020-03-12T20:46:59Z", "author": {"login": "mxm"}, "path": "flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/util/RecordEmitter.java", "diffHunk": "@@ -205,6 +205,10 @@ protected void emitRecords() {\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n+\t\t\t\tif (!running) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTg1NTU4OQ=="}, "originalCommit": {"oid": "56935c039fb7635784bcc76c9d5320c01dc28f25"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 772, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}