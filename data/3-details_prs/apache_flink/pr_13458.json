{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxMjQ4MTcy", "number": 13458, "title": "FLINK-18851 [runtime] Add checkpoint type to checkpoint history entries in Web UI", "bodyText": "What is the purpose of the change\nAdd checkpoint type to checkpoint history entries in Web UI\nBrief change log\nAdd checkpoint type to checkpoint history entries in Web UI\nVerifying this change\n(Please pick either of the following options)\nThis change is already covered by existing tests, such as (please describe tests).\nAlso, we can deploy Flink job with savepoint or checkpoint enable, then you should be able to see checkpoint Type in the flink history tab.\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): no\nThe public API, i.e., is any changed class annotated with @Public(Evolving): no\nThe serializers: don't know\nThe runtime per-record code paths (performance sensitive):  no\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper:  no\nThe S3 file system connector:  no\n\nDocumentation\n\nDoes this pull request introduce a new feature?  no\nIf yes, how is the feature documented? not applicable", "createdAt": "2020-09-22T23:39:41Z", "url": "https://github.com/apache/flink/pull/13458", "merged": true, "mergeCommit": {"oid": "b2a342c6a6ef154ed3c1a44826ce2be14e538386"}, "closed": true, "closedAt": "2020-10-29T18:04:25Z", "author": {"login": "gm7y8"}, "timelineItems": {"totalCount": 37, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLuyUmAFqTQ5NDc4OTMxMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXQ4mmABqjM5MzU5NDg3NjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0Nzg5MzEz", "url": "https://github.com/apache/flink/pull/13458#pullrequestreview-494789313", "createdAt": "2020-09-23T15:32:19Z", "commit": {"oid": "5922cdb5a2b87889a53f95a4f7902e6dc7f5b63a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNTozMjoyMFrOHW0awA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNTozOTo0N1rOHW0vvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzY4OTUzNg==", "bodyText": "We might want to stick to CheckpointType here instead of String", "url": "https://github.com/apache/flink/pull/13458#discussion_r493689536", "createdAt": "2020-09-23T15:32:20Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -113,6 +114,9 @@\n \t@JsonProperty(FIELD_NAME_NUM_ACK_SUBTASKS)\n \tprivate final int numAckSubtasks;\n \n+\t@JsonProperty(FIELD_NAME_CHECK_POINT_TYPE)\n+\tprivate final String checkPointType;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5922cdb5a2b87889a53f95a4f7902e6dc7f5b63a"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzY5MjA2Mg==", "bodyText": "\"checkpoint\" is one word. Hence, we should name variables, classes, and other literals like accordingly, i.e. FIELD_NAME_CHECKPOINT_TYPE, \"checkpoint_type\", or checkpointType.", "url": "https://github.com/apache/flink/pull/13458#discussion_r493692062", "createdAt": "2020-09-23T15:35:46Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -83,6 +82,8 @@\n \n \tpublic static final String FIELD_NAME_TASKS = \"tasks\";\n \n+\tpublic static final String FIELD_NAME_CHECK_POINT_TYPE = \"check_point_type\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5922cdb5a2b87889a53f95a4f7902e6dc7f5b63a"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzY5NDkwOQ==", "bodyText": "The introduced code format does not comply with Flink's checkstyle format. Ideally, code changes shouldn't be accompanied with format changes.", "url": "https://github.com/apache/flink/pull/13458#discussion_r493694909", "createdAt": "2020-09-23T15:39:47Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -18,6 +18,14 @@\n \n package org.apache.flink.runtime.rest.messages.checkpoints;\n \n+import java.util.Collection;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5922cdb5a2b87889a53f95a4f7902e6dc7f5b63a"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5922cdb5a2b87889a53f95a4f7902e6dc7f5b63a", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/5922cdb5a2b87889a53f95a4f7902e6dc7f5b63a", "committedDate": "2020-09-22T23:36:03Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "3c652c2799b0c14340b1fcb4376fbab0bb9dce99", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/3c652c2799b0c14340b1fcb4376fbab0bb9dce99", "committedDate": "2020-09-24T05:54:23Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c652c2799b0c14340b1fcb4376fbab0bb9dce99", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/3c652c2799b0c14340b1fcb4376fbab0bb9dce99", "committedDate": "2020-09-24T05:54:23Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "696d6f860eba866eaa55dc2d8bf30dfaadc9a9d4", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/696d6f860eba866eaa55dc2d8bf30dfaadc9a9d4", "committedDate": "2020-09-24T05:59:43Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MjY4NDcy", "url": "https://github.com/apache/flink/pull/13458#pullrequestreview-495268472", "createdAt": "2020-09-24T06:55:08Z", "commit": {"oid": "696d6f860eba866eaa55dc2d8bf30dfaadc9a9d4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwNjo1NTowOFrOHXMMPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwNzowMDoyNVrOHXMW9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA3OTAzNw==", "bodyText": "The imports are still not compliant with the CheckStyle format defined for Flink. Please use Flink's CheckStyle format definition to fix the formatting.", "url": "https://github.com/apache/flink/pull/13458#discussion_r494079037", "createdAt": "2020-09-24T06:55:08Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -18,32 +18,22 @@\n \n package org.apache.flink.runtime.rest.messages.checkpoints;\n \n-import org.apache.flink.runtime.checkpoint.AbstractCheckpointStats;\n-import org.apache.flink.runtime.checkpoint.CheckpointStatsStatus;\n-import org.apache.flink.runtime.checkpoint.CompletedCheckpointStats;\n-import org.apache.flink.runtime.checkpoint.FailedCheckpointStats;\n-import org.apache.flink.runtime.checkpoint.PendingCheckpointStats;\n-import org.apache.flink.runtime.checkpoint.TaskStateStats;\n+import org.apache.flink.runtime.checkpoint.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "696d6f860eba866eaa55dc2d8bf30dfaadc9a9d4"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA4MTI4Nw==", "bodyText": "There's a compilation error after the parameter type changed to the CheckpointType enum.", "url": "https://github.com/apache/flink/pull/13458#discussion_r494081287", "createdAt": "2020-09-24T06:59:27Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/test/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointingStatisticsTest.java", "diffHunk": "@@ -82,6 +82,7 @@ protected CheckpointingStatistics getTestResponseInstance() throws Exception {\n \t\t\t0L,\n \t\t\t10,\n \t\t\t10,\n+\t\t\t \"Checkpoint\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "696d6f860eba866eaa55dc2d8bf30dfaadc9a9d4"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA4MTMzMA==", "bodyText": "There's a compilation error after the parameter type changed to the CheckpointType enum.", "url": "https://github.com/apache/flink/pull/13458#discussion_r494081330", "createdAt": "2020-09-24T06:59:32Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/test/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointingStatisticsTest.java", "diffHunk": "@@ -97,6 +98,7 @@ protected CheckpointingStatistics getTestResponseInstance() throws Exception {\n \t\t\t0L,\n \t\t\t9,\n \t\t\t9,\n+\t\t\t\"Savepoint\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "696d6f860eba866eaa55dc2d8bf30dfaadc9a9d4"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA4MTM3Mg==", "bodyText": "There's a compilation error after the parameter type changed to the CheckpointType enum.", "url": "https://github.com/apache/flink/pull/13458#discussion_r494081372", "createdAt": "2020-09-24T06:59:38Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/test/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointingStatisticsTest.java", "diffHunk": "@@ -112,6 +114,7 @@ protected CheckpointingStatistics getTestResponseInstance() throws Exception {\n \t\t\t0L,\n \t\t\t11,\n \t\t\t9,\n+\t\t\t\"Checkpoint\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "696d6f860eba866eaa55dc2d8bf30dfaadc9a9d4"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA4MTQ4Mg==", "bodyText": "There's a compilation error after the parameter type changed to the CheckpointType enum.", "url": "https://github.com/apache/flink/pull/13458#discussion_r494081482", "createdAt": "2020-09-24T06:59:52Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/test/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointingStatisticsTest.java", "diffHunk": "@@ -133,6 +136,7 @@ protected CheckpointingStatistics getTestResponseInstance() throws Exception {\n \t\t\t0L,\n \t\t\t10,\n \t\t\t10,\n+\t\t\t\"Checkpoint\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "696d6f860eba866eaa55dc2d8bf30dfaadc9a9d4"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA4MTc4Mg==", "bodyText": "The imports are still not compliant with the CheckStyle format defined for Flink. Please use Flink's CheckStyle format definition to fix the formatting.", "url": "https://github.com/apache/flink/pull/13458#discussion_r494081782", "createdAt": "2020-09-24T07:00:25Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/test/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointingStatisticsTest.java", "diffHunk": "@@ -18,15 +18,15 @@\n \n package org.apache.flink.runtime.rest.messages.checkpoints;\n \n-import org.apache.flink.runtime.checkpoint.CheckpointStatsStatus;\n-import org.apache.flink.runtime.jobgraph.JobVertexID;\n-import org.apache.flink.runtime.rest.messages.RestResponseMarshallingTestBase;\n-\n import java.util.Arrays;\n import java.util.Collections;\n import java.util.HashMap;\n import java.util.Map;\n \n+import org.apache.flink.runtime.checkpoint.CheckpointStatsStatus;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "696d6f860eba866eaa55dc2d8bf30dfaadc9a9d4"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "696d6f860eba866eaa55dc2d8bf30dfaadc9a9d4", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/696d6f860eba866eaa55dc2d8bf30dfaadc9a9d4", "committedDate": "2020-09-24T05:59:43Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "43dc692c9d9fedfbe139f3c376486071980551d1", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/43dc692c9d9fedfbe139f3c376486071980551d1", "committedDate": "2020-09-24T07:03:37Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43dc692c9d9fedfbe139f3c376486071980551d1", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/43dc692c9d9fedfbe139f3c376486071980551d1", "committedDate": "2020-09-24T07:03:37Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "3d01dcedec177c94551b815dd4104c1aaed80ba1", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/3d01dcedec177c94551b815dd4104c1aaed80ba1", "committedDate": "2020-09-24T08:41:10Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d01dcedec177c94551b815dd4104c1aaed80ba1", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/3d01dcedec177c94551b815dd4104c1aaed80ba1", "committedDate": "2020-09-24T08:41:10Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/a4a62da3ce0c44afc17969e7e58c73ce227b4358", "committedDate": "2020-09-24T09:33:07Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NTk4OTc4", "url": "https://github.com/apache/flink/pull/13458#pullrequestreview-495598978", "createdAt": "2020-09-24T13:55:21Z", "commit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxMzo1NToyMVrOHXcGIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxMzo1OTo1MFrOHXcWNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDMzOTYxNw==", "bodyText": "You shouldn't edit this file manually. Instead, you can run org.apache.flink.runtime.rest.compatibility.RestAPIStabilityTest#testDispatcherRestAPIStability with -Dgenerate-rest-snapshot to generate the file from sources and commit it. That's going to be easier and less error-prone than editing the file manually. It will also make org.apache.flink.runtime.rest.compatibility.RestAPIStabilityTest to succeed (as it is not right now) again after an API change. :-)", "url": "https://github.com/apache/flink/pull/13458#discussion_r494339617", "createdAt": "2020-09-24T13:55:21Z", "author": {"login": "XComp"}, "path": "flink-runtime-web/src/test/resources/rest_api_v1.snapshot", "diffHunk": "@@ -1254,6 +1263,9 @@\n         \"num_acknowledged_subtasks\" : {\n           \"type\" : \"integer\"\n         },\n+        \"check_point_type\" : {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0MDAyNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tprivate final CheckpointType checkPointType;\n          \n          \n            \n            \tprivate final CheckpointType checkpointType;", "url": "https://github.com/apache/flink/pull/13458#discussion_r494340027", "createdAt": "2020-09-24T13:55:50Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -113,23 +116,27 @@\n \t@JsonProperty(FIELD_NAME_NUM_ACK_SUBTASKS)\n \tprivate final int numAckSubtasks;\n \n+\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE)\n+\tprivate final CheckpointType checkPointType;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0MDc2MQ==", "bodyText": "Formatting changed. Please revert the format change and only commit code changes.", "url": "https://github.com/apache/flink/pull/13458#discussion_r494340761", "createdAt": "2020-09-24T13:56:45Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -113,23 +116,27 @@\n \t@JsonProperty(FIELD_NAME_NUM_ACK_SUBTASKS)\n \tprivate final int numAckSubtasks;\n \n+\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE)\n+\tprivate final CheckpointType checkPointType;\n+\n \t@JsonProperty(FIELD_NAME_TASKS)\n \t@JsonSerialize(keyUsing = JobVertexIDKeySerializer.class)\n \tprivate final Map<JobVertexID, TaskCheckpointStatistics> checkpointStatisticsPerTask;\n \n \t@JsonCreator\n \tprivate CheckpointStatistics(\n-\t\t\t@JsonProperty(FIELD_NAME_ID) long id,\n-\t\t\t@JsonProperty(FIELD_NAME_STATUS) CheckpointStatsStatus status,\n-\t\t\t@JsonProperty(FIELD_NAME_IS_SAVEPOINT) boolean savepoint,\n-\t\t\t@JsonProperty(FIELD_NAME_TRIGGER_TIMESTAMP) long triggerTimestamp,\n-\t\t\t@JsonProperty(FIELD_NAME_LATEST_ACK_TIMESTAMP) long latestAckTimestamp,\n-\t\t\t@JsonProperty(FIELD_NAME_STATE_SIZE) long stateSize,\n-\t\t\t@JsonProperty(FIELD_NAME_DURATION) long duration,\n-\t\t\t@JsonProperty(FIELD_NAME_ALIGNMENT_BUFFERED) long alignmentBuffered,\n-\t\t\t@JsonProperty(FIELD_NAME_NUM_SUBTASKS) int numSubtasks,\n-\t\t\t@JsonProperty(FIELD_NAME_NUM_ACK_SUBTASKS) int numAckSubtasks,\n-\t\t\t@JsonDeserialize(keyUsing = JobVertexIDKeyDeserializer.class) @JsonProperty(FIELD_NAME_TASKS) Map<JobVertexID, TaskCheckpointStatistics> checkpointStatisticsPerTask) {\n+\t\t@JsonProperty(FIELD_NAME_ID) long id,\n+\t\t@JsonProperty(FIELD_NAME_STATUS) CheckpointStatsStatus status,\n+\t\t@JsonProperty(FIELD_NAME_IS_SAVEPOINT) boolean savepoint,\n+\t\t@JsonProperty(FIELD_NAME_TRIGGER_TIMESTAMP) long triggerTimestamp,\n+\t\t@JsonProperty(FIELD_NAME_LATEST_ACK_TIMESTAMP) long latestAckTimestamp,\n+\t\t@JsonProperty(FIELD_NAME_STATE_SIZE) long stateSize,\n+\t\t@JsonProperty(FIELD_NAME_DURATION) long duration,\n+\t\t@JsonProperty(FIELD_NAME_ALIGNMENT_BUFFERED) long alignmentBuffered,\n+\t\t@JsonProperty(FIELD_NAME_NUM_SUBTASKS) int numSubtasks,\n+\t\t@JsonProperty(FIELD_NAME_NUM_ACK_SUBTASKS) int numAckSubtasks,\n+\t\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE) CheckpointType checkPointType,\n+\t\t@JsonDeserialize(keyUsing = JobVertexIDKeyDeserializer.class) @JsonProperty(FIELD_NAME_TASKS) Map<JobVertexID, TaskCheckpointStatistics> checkpointStatisticsPerTask) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0MDkzOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE) CheckpointType checkPointType,\n          \n          \n            \n            \t\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE) CheckpointType checkpointType,", "url": "https://github.com/apache/flink/pull/13458#discussion_r494340938", "createdAt": "2020-09-24T13:56:57Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -113,23 +116,27 @@\n \t@JsonProperty(FIELD_NAME_NUM_ACK_SUBTASKS)\n \tprivate final int numAckSubtasks;\n \n+\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE)\n+\tprivate final CheckpointType checkPointType;\n+\n \t@JsonProperty(FIELD_NAME_TASKS)\n \t@JsonSerialize(keyUsing = JobVertexIDKeySerializer.class)\n \tprivate final Map<JobVertexID, TaskCheckpointStatistics> checkpointStatisticsPerTask;\n \n \t@JsonCreator\n \tprivate CheckpointStatistics(\n-\t\t\t@JsonProperty(FIELD_NAME_ID) long id,\n-\t\t\t@JsonProperty(FIELD_NAME_STATUS) CheckpointStatsStatus status,\n-\t\t\t@JsonProperty(FIELD_NAME_IS_SAVEPOINT) boolean savepoint,\n-\t\t\t@JsonProperty(FIELD_NAME_TRIGGER_TIMESTAMP) long triggerTimestamp,\n-\t\t\t@JsonProperty(FIELD_NAME_LATEST_ACK_TIMESTAMP) long latestAckTimestamp,\n-\t\t\t@JsonProperty(FIELD_NAME_STATE_SIZE) long stateSize,\n-\t\t\t@JsonProperty(FIELD_NAME_DURATION) long duration,\n-\t\t\t@JsonProperty(FIELD_NAME_ALIGNMENT_BUFFERED) long alignmentBuffered,\n-\t\t\t@JsonProperty(FIELD_NAME_NUM_SUBTASKS) int numSubtasks,\n-\t\t\t@JsonProperty(FIELD_NAME_NUM_ACK_SUBTASKS) int numAckSubtasks,\n-\t\t\t@JsonDeserialize(keyUsing = JobVertexIDKeyDeserializer.class) @JsonProperty(FIELD_NAME_TASKS) Map<JobVertexID, TaskCheckpointStatistics> checkpointStatisticsPerTask) {\n+\t\t@JsonProperty(FIELD_NAME_ID) long id,\n+\t\t@JsonProperty(FIELD_NAME_STATUS) CheckpointStatsStatus status,\n+\t\t@JsonProperty(FIELD_NAME_IS_SAVEPOINT) boolean savepoint,\n+\t\t@JsonProperty(FIELD_NAME_TRIGGER_TIMESTAMP) long triggerTimestamp,\n+\t\t@JsonProperty(FIELD_NAME_LATEST_ACK_TIMESTAMP) long latestAckTimestamp,\n+\t\t@JsonProperty(FIELD_NAME_STATE_SIZE) long stateSize,\n+\t\t@JsonProperty(FIELD_NAME_DURATION) long duration,\n+\t\t@JsonProperty(FIELD_NAME_ALIGNMENT_BUFFERED) long alignmentBuffered,\n+\t\t@JsonProperty(FIELD_NAME_NUM_SUBTASKS) int numSubtasks,\n+\t\t@JsonProperty(FIELD_NAME_NUM_ACK_SUBTASKS) int numAckSubtasks,\n+\t\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE) CheckpointType checkPointType,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0MTE3Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tthis.checkPointType = checkPointType;\n          \n          \n            \n            \t\tthis.checkpointType = checkpointType;", "url": "https://github.com/apache/flink/pull/13458#discussion_r494341173", "createdAt": "2020-09-24T13:57:15Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -140,6 +147,7 @@ private CheckpointStatistics(\n \t\tthis.alignmentBuffered = alignmentBuffered;\n \t\tthis.numSubtasks = numSubtasks;\n \t\tthis.numAckSubtasks = numAckSubtasks;\n+\t\tthis.checkPointType = checkPointType;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0MTQ4OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tpublic CheckpointType getCheckPointType() {\n          \n          \n            \n            \t\treturn checkPointType;\n          \n          \n            \n            \tpublic CheckpointType getCheckpointType() {\n          \n          \n            \n            \t\treturn checkpointType;", "url": "https://github.com/apache/flink/pull/13458#discussion_r494341488", "createdAt": "2020-09-24T13:57:41Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -179,6 +187,10 @@ public int getNumAckSubtasks() {\n \t\treturn numAckSubtasks;\n \t}\n \n+\tpublic CheckpointType getCheckPointType() {\n+\t\treturn checkPointType;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0MTY3NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tObjects.equals(checkPointType, that.checkPointType) &&\n          \n          \n            \n            \t\t\tObjects.equals(checkPointType, that.checkpointType) &&", "url": "https://github.com/apache/flink/pull/13458#discussion_r494341675", "createdAt": "2020-09-24T13:57:56Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -203,12 +215,13 @@ public boolean equals(Object o) {\n \t\t\tnumSubtasks == that.numSubtasks &&\n \t\t\tnumAckSubtasks == that.numAckSubtasks &&\n \t\t\tstatus == that.status &&\n+\t\t\tObjects.equals(checkPointType, that.checkPointType) &&", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0MTg4MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\treturn Objects.hash(id, status, savepoint, triggerTimestamp, latestAckTimestamp, stateSize, duration, alignmentBuffered, numSubtasks, numAckSubtasks, checkPointType, checkpointStatisticsPerTask);\n          \n          \n            \n            \t\treturn Objects.hash(id, status, savepoint, triggerTimestamp, latestAckTimestamp, stateSize, duration, alignmentBuffered, numSubtasks, numAckSubtasks, checkpointType, checkpointStatisticsPerTask);", "url": "https://github.com/apache/flink/pull/13458#discussion_r494341880", "createdAt": "2020-09-24T13:58:12Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -203,12 +215,13 @@ public boolean equals(Object o) {\n \t\t\tnumSubtasks == that.numSubtasks &&\n \t\t\tnumAckSubtasks == that.numAckSubtasks &&\n \t\t\tstatus == that.status &&\n+\t\t\tObjects.equals(checkPointType, that.checkPointType) &&\n \t\t\tObjects.equals(checkpointStatisticsPerTask, that.checkpointStatisticsPerTask);\n \t}\n \n \t@Override\n \tpublic int hashCode() {\n-\t\treturn Objects.hash(id, status, savepoint, triggerTimestamp, latestAckTimestamp, stateSize, duration, alignmentBuffered, numSubtasks, numAckSubtasks, checkpointStatisticsPerTask);\n+\t\treturn Objects.hash(id, status, savepoint, triggerTimestamp, latestAckTimestamp, stateSize, duration, alignmentBuffered, numSubtasks, numAckSubtasks, checkPointType, checkpointStatisticsPerTask);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0MjIzMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE) CheckpointType checkPointType,\n          \n          \n            \n            \t\t\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE) CheckpointType checkpointType,", "url": "https://github.com/apache/flink/pull/13458#discussion_r494342231", "createdAt": "2020-09-24T13:58:35Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -330,6 +346,7 @@ public CompletedCheckpointStatistics(\n \t\t\t@JsonProperty(FIELD_NAME_ALIGNMENT_BUFFERED) long alignmentBuffered,\n \t\t\t@JsonProperty(FIELD_NAME_NUM_SUBTASKS) int numSubtasks,\n \t\t\t@JsonProperty(FIELD_NAME_NUM_ACK_SUBTASKS) int numAckSubtasks,\n+\t\t\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE) CheckpointType checkPointType,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "originalPosition": 129}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0MjU1MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE) CheckpointType checkPointType,\n          \n          \n            \n            \t\t\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE) CheckpointType checkpointType,", "url": "https://github.com/apache/flink/pull/13458#discussion_r494342550", "createdAt": "2020-09-24T13:58:50Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -409,6 +427,7 @@ public FailedCheckpointStatistics(\n \t\t\t@JsonProperty(FIELD_NAME_ALIGNMENT_BUFFERED) long alignmentBuffered,\n \t\t\t@JsonProperty(FIELD_NAME_NUM_SUBTASKS) int numSubtasks,\n \t\t\t@JsonProperty(FIELD_NAME_NUM_ACK_SUBTASKS) int numAckSubtasks,\n+\t\t\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE) CheckpointType checkPointType,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "originalPosition": 145}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0MjgxNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\tcheckPointType,\n          \n          \n            \n            \t\t\t\tcheckpointType,", "url": "https://github.com/apache/flink/pull/13458#discussion_r494342817", "createdAt": "2020-09-24T13:59:04Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -423,6 +442,7 @@ public FailedCheckpointStatistics(\n \t\t\t\talignmentBuffered,\n \t\t\t\tnumSubtasks,\n \t\t\t\tnumAckSubtasks,\n+\t\t\t\tcheckPointType,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "originalPosition": 153}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0MzA0OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE) CheckpointType checkPointType,\n          \n          \n            \n            \t\t\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE) CheckpointType checkpointType,", "url": "https://github.com/apache/flink/pull/13458#discussion_r494343049", "createdAt": "2020-09-24T13:59:16Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -477,6 +497,7 @@ public PendingCheckpointStatistics(\n \t\t\t@JsonProperty(FIELD_NAME_ALIGNMENT_BUFFERED) long alignmentBuffered,\n \t\t\t@JsonProperty(FIELD_NAME_NUM_SUBTASKS) int numSubtasks,\n \t\t\t@JsonProperty(FIELD_NAME_NUM_ACK_SUBTASKS) int numAckSubtasks,\n+\t\t\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE) CheckpointType checkPointType,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "originalPosition": 161}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0MzI3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\tcheckPointType,\n          \n          \n            \n            \t\t\t\tcheckpointType,", "url": "https://github.com/apache/flink/pull/13458#discussion_r494343272", "createdAt": "2020-09-24T13:59:28Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -489,6 +510,7 @@ public PendingCheckpointStatistics(\n \t\t\t\talignmentBuffered,\n \t\t\t\tnumSubtasks,\n \t\t\t\tnumAckSubtasks,\n+\t\t\t\tcheckPointType,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "originalPosition": 169}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0MzczNQ==", "bodyText": "Are those accidentally added?", "url": "https://github.com/apache/flink/pull/13458#discussion_r494343735", "createdAt": "2020-09-24T13:59:50Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/test/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointingStatisticsTest.java", "diffHunk": "@@ -27,6 +28,8 @@\n import java.util.HashMap;\n import java.util.Map;\n \n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a4a62da3ce0c44afc17969e7e58c73ce227b4358", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/a4a62da3ce0c44afc17969e7e58c73ce227b4358", "committedDate": "2020-09-24T09:33:07Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "4a195c669087c56b55b9b43b32e6b6dd7e8bab9a", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/4a195c669087c56b55b9b43b32e6b6dd7e8bab9a", "committedDate": "2020-09-24T18:23:47Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4a195c669087c56b55b9b43b32e6b6dd7e8bab9a", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/4a195c669087c56b55b9b43b32e6b6dd7e8bab9a", "committedDate": "2020-09-24T18:23:47Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "a0ecc93483203cb019f279955cc466d2a6944fc3", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/a0ecc93483203cb019f279955cc466d2a6944fc3", "committedDate": "2020-09-24T23:03:57Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2MTU2NDM1", "url": "https://github.com/apache/flink/pull/13458#pullrequestreview-496156435", "createdAt": "2020-09-25T06:58:35Z", "commit": {"oid": "a0ecc93483203cb019f279955cc466d2a6944fc3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwNjo1ODozNlrOHX3WAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwNzowMDoxNVrOHX3ZIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDc4NjA0OA==", "bodyText": "May you remove this change as it is non-functional as well. This usually is introduced when opening the file with editors that remove the last \\n automatically like vi.", "url": "https://github.com/apache/flink/pull/13458#discussion_r494786048", "createdAt": "2020-09-25T06:58:36Z", "author": {"login": "XComp"}, "path": "flink-runtime-web/src/test/resources/rest_api_v1.snapshot", "diffHunk": "@@ -3082,4 +3098,4 @@\n       }\n     }\n   } ]\n-}\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0ecc93483203cb019f279955cc466d2a6944fc3"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDc4Njg0OA==", "bodyText": "Please fix the formatting here.", "url": "https://github.com/apache/flink/pull/13458#discussion_r494786848", "createdAt": "2020-09-25T07:00:15Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -113,23 +116,27 @@\n \t@JsonProperty(FIELD_NAME_NUM_ACK_SUBTASKS)\n \tprivate final int numAckSubtasks;\n \n+\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE)\n+\tprivate final CheckpointType checkpointType;\n+\n \t@JsonProperty(FIELD_NAME_TASKS)\n \t@JsonSerialize(keyUsing = JobVertexIDKeySerializer.class)\n \tprivate final Map<JobVertexID, TaskCheckpointStatistics> checkpointStatisticsPerTask;\n \n \t@JsonCreator\n \tprivate CheckpointStatistics(\n-\t\t\t@JsonProperty(FIELD_NAME_ID) long id,\n-\t\t\t@JsonProperty(FIELD_NAME_STATUS) CheckpointStatsStatus status,\n-\t\t\t@JsonProperty(FIELD_NAME_IS_SAVEPOINT) boolean savepoint,\n-\t\t\t@JsonProperty(FIELD_NAME_TRIGGER_TIMESTAMP) long triggerTimestamp,\n-\t\t\t@JsonProperty(FIELD_NAME_LATEST_ACK_TIMESTAMP) long latestAckTimestamp,\n-\t\t\t@JsonProperty(FIELD_NAME_STATE_SIZE) long stateSize,\n-\t\t\t@JsonProperty(FIELD_NAME_DURATION) long duration,\n-\t\t\t@JsonProperty(FIELD_NAME_ALIGNMENT_BUFFERED) long alignmentBuffered,\n-\t\t\t@JsonProperty(FIELD_NAME_NUM_SUBTASKS) int numSubtasks,\n-\t\t\t@JsonProperty(FIELD_NAME_NUM_ACK_SUBTASKS) int numAckSubtasks,\n-\t\t\t@JsonDeserialize(keyUsing = JobVertexIDKeyDeserializer.class) @JsonProperty(FIELD_NAME_TASKS) Map<JobVertexID, TaskCheckpointStatistics> checkpointStatisticsPerTask) {\n+\t\t@JsonProperty(FIELD_NAME_ID) long id,\n+\t\t@JsonProperty(FIELD_NAME_STATUS) CheckpointStatsStatus status,\n+\t\t@JsonProperty(FIELD_NAME_IS_SAVEPOINT) boolean savepoint,\n+\t\t@JsonProperty(FIELD_NAME_TRIGGER_TIMESTAMP) long triggerTimestamp,\n+\t\t@JsonProperty(FIELD_NAME_LATEST_ACK_TIMESTAMP) long latestAckTimestamp,\n+\t\t@JsonProperty(FIELD_NAME_STATE_SIZE) long stateSize,\n+\t\t@JsonProperty(FIELD_NAME_DURATION) long duration,\n+\t\t@JsonProperty(FIELD_NAME_ALIGNMENT_BUFFERED) long alignmentBuffered,\n+\t\t@JsonProperty(FIELD_NAME_NUM_SUBTASKS) int numSubtasks,\n+\t\t@JsonProperty(FIELD_NAME_NUM_ACK_SUBTASKS) int numAckSubtasks,\n+\t\t@JsonProperty(FIELD_NAME_CHECKPOINT_TYPE) CheckpointType checkpointType,\n+\t\t@JsonDeserialize(keyUsing = JobVertexIDKeyDeserializer.class) @JsonProperty(FIELD_NAME_TASKS) Map<JobVertexID, TaskCheckpointStatistics> checkpointStatisticsPerTask) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0ecc93483203cb019f279955cc466d2a6944fc3"}, "originalPosition": 52}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a0ecc93483203cb019f279955cc466d2a6944fc3", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/a0ecc93483203cb019f279955cc466d2a6944fc3", "committedDate": "2020-09-24T23:03:57Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "3340d3b1f62c8cfe9e9b30fee877a4728d4b0837", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/3340d3b1f62c8cfe9e9b30fee877a4728d4b0837", "committedDate": "2020-09-26T08:37:50Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3340d3b1f62c8cfe9e9b30fee877a4728d4b0837", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/3340d3b1f62c8cfe9e9b30fee877a4728d4b0837", "committedDate": "2020-09-26T08:37:50Z", "message": "FLINK-18851 Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "1b59c5c3c61d9ea667f3e722bb54788d1d687cec", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/1b59c5c3c61d9ea667f3e722bb54788d1d687cec", "committedDate": "2020-09-28T17:24:39Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history entries in Web UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNTQ2NDYw", "url": "https://github.com/apache/flink/pull/13458#pullrequestreview-500546460", "createdAt": "2020-10-01T16:59:43Z", "commit": {"oid": "1b59c5c3c61d9ea667f3e722bb54788d1d687cec"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNjo1OTo0M1rOHbTVWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNzowMzo0NVrOHbTeOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM5MDM2MA==", "bodyText": "is this related to this PR?\nalso the next similar change in this file?\nit does not look related to checkpointing, then it should be addressed at least in a separate hotfix commit or better in another PR/Jira issue.", "url": "https://github.com/apache/flink/pull/13458#discussion_r498390360", "createdAt": "2020-10-01T16:59:43Z", "author": {"login": "azagrebin"}, "path": "flink-runtime-web/src/test/resources/rest_api_v1.snapshot", "diffHunk": "@@ -557,7 +557,7 @@\n               },\n               \"status\" : {\n                 \"type\" : \"string\",\n-                \"enum\" : [ \"CREATED\", \"RUNNING\", \"FAILING\", \"FAILED\", \"CANCELLING\", \"CANCELED\", \"FINISHED\", \"RESTARTING\", \"SUSPENDED\", \"RECONCILING\" ]\n+                \"enum\" : [ \"INITIALIZING\", \"CREATED\", \"RUNNING\", \"FAILING\", \"FAILED\", \"CANCELLING\", \"CANCELED\", \"FINISHED\", \"RESTARTING\", \"SUSPENDED\", \"RECONCILING\" ]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b59c5c3c61d9ea667f3e722bb54788d1d687cec"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM5MjYzMw==", "bodyText": "this change also looks unrelated.\nit looks like a minor code style fix which we usually do not do to preserve git history.\nif we do the code style fixes then it is usually either\n\nmassively in files which have a lot of code style violation in separate commit\nor close to related changes", "url": "https://github.com/apache/flink/pull/13458#discussion_r498392633", "createdAt": "2020-10-01T17:03:45Z", "author": {"login": "azagrebin"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -229,8 +242,8 @@ public static CheckpointStatistics generateCheckpointStatistics(AbstractCheckpoi\n \t\t\t\tcheckpointStatisticsPerTask.put(\n \t\t\t\t\ttaskStateStat.getJobVertexId(),\n \t\t\t\t\tnew TaskCheckpointStatistics(\n-\t\t\t\t\t\t\tcheckpointStats.getCheckpointId(),\n-\t\t\t\t\t\t\tcheckpointStats.getStatus(),\n+\t\t\t\t\t\tcheckpointStats.getCheckpointId(),\n+\t\t\t\t\t\tcheckpointStats.getStatus(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b59c5c3c61d9ea667f3e722bb54788d1d687cec"}, "originalPosition": 76}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1b59c5c3c61d9ea667f3e722bb54788d1d687cec", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/1b59c5c3c61d9ea667f3e722bb54788d1d687cec", "committedDate": "2020-09-28T17:24:39Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "4802a892eab82ce4a5f8f09cc4d7fb005438db5b", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/4802a892eab82ce4a5f8f09cc4d7fb005438db5b", "committedDate": "2020-10-06T01:37:30Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history entries in Web UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4802a892eab82ce4a5f8f09cc4d7fb005438db5b", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/4802a892eab82ce4a5f8f09cc4d7fb005438db5b", "committedDate": "2020-10-06T01:37:30Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "1fbc4813c7759c2211f62dadf78de4b5369ec758", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/1fbc4813c7759c2211f62dadf78de4b5369ec758", "committedDate": "2020-10-06T01:39:33Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history entries in Web UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1fbc4813c7759c2211f62dadf78de4b5369ec758", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/1fbc4813c7759c2211f62dadf78de4b5369ec758", "committedDate": "2020-10-06T01:39:33Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "3a9c127acf7d5615f5a32c7af35f8611b93cd6ab", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/3a9c127acf7d5615f5a32c7af35f8611b93cd6ab", "committedDate": "2020-10-06T01:43:44Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history entries in Web UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a9c127acf7d5615f5a32c7af35f8611b93cd6ab", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/3a9c127acf7d5615f5a32c7af35f8611b93cd6ab", "committedDate": "2020-10-06T01:43:44Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "7311b0d12d19a645391ea0359a9aa6318806363b", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/7311b0d12d19a645391ea0359a9aa6318806363b", "committedDate": "2020-10-20T09:04:37Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history entries in Web UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7311b0d12d19a645391ea0359a9aa6318806363b", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/7311b0d12d19a645391ea0359a9aa6318806363b", "committedDate": "2020-10-20T09:04:37Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "27a402fc470e5477853792048d882bff45f8745f", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/27a402fc470e5477853792048d882bff45f8745f", "committedDate": "2020-10-20T09:07:50Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history entries in Web UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "27a402fc470e5477853792048d882bff45f8745f", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/27a402fc470e5477853792048d882bff45f8745f", "committedDate": "2020-10-20T09:07:50Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history entries in Web UI"}, "afterCommit": {"oid": "0b8e369aa5c8c4e4a8c370b4b848c0f197fcdb9d", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/0b8e369aa5c8c4e4a8c370b4b848c0f197fcdb9d", "committedDate": "2020-10-20T09:41:28Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0b8e369aa5c8c4e4a8c370b4b848c0f197fcdb9d", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/0b8e369aa5c8c4e4a8c370b4b848c0f197fcdb9d", "committedDate": "2020-10-20T09:41:28Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}, "afterCommit": {"oid": "79714f02f700aebe4a65dff017deba6dc9d911d9", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/79714f02f700aebe4a65dff017deba6dc9d911d9", "committedDate": "2020-10-21T07:49:27Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNzE3NTQ2", "url": "https://github.com/apache/flink/pull/13458#pullrequestreview-513717546", "createdAt": "2020-10-21T13:58:37Z", "commit": {"oid": "79714f02f700aebe4a65dff017deba6dc9d911d9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxMzo1ODozN1rOHlt4Gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDowMDoxN1rOHlt9kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMxMTAwMw==", "bodyText": "Why did you add the state_backend here? It looks like it's not needed? \ud83e\udd14", "url": "https://github.com/apache/flink/pull/13458#discussion_r509311003", "createdAt": "2020-10-21T13:58:37Z", "author": {"login": "XComp"}, "path": "flink-runtime-web/web-dashboard/src/app/interfaces/job-checkpoint.ts", "diffHunk": "@@ -114,6 +115,8 @@ export interface CheckPointConfigInterface {\n     enabled: boolean;\n     delete_on_cancellation: boolean;\n   };\n+  state_backend: string;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79714f02f700aebe4a65dff017deba6dc9d911d9"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMxMjQwMg==", "bodyText": "I forgot to mention in the other review: It's always good to call Preconditions.checkNotNull on nullable parameters. See other status as an example.", "url": "https://github.com/apache/flink/pull/13458#discussion_r509312402", "createdAt": "2020-10-21T14:00:17Z", "author": {"login": "XComp"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/checkpoints/CheckpointStatistics.java", "diffHunk": "@@ -154,6 +161,7 @@ private CheckpointStatistics(\n \t\tthis.persistedData = persistedData;\n \t\tthis.numSubtasks = numSubtasks;\n \t\tthis.numAckSubtasks = numAckSubtasks;\n+\t\tthis.checkpointType = checkpointType;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79714f02f700aebe4a65dff017deba6dc9d911d9"}, "originalPosition": 39}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "79714f02f700aebe4a65dff017deba6dc9d911d9", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/79714f02f700aebe4a65dff017deba6dc9d911d9", "committedDate": "2020-10-21T07:49:27Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}, "afterCommit": {"oid": "9bc87ad6b2a8cbad2f226c483c74f1fa1523b70e", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/9bc87ad6b2a8cbad2f226c483c74f1fa1523b70e", "committedDate": "2020-10-22T05:55:45Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0NDQ2MTY2", "url": "https://github.com/apache/flink/pull/13458#pullrequestreview-514446166", "createdAt": "2020-10-22T07:47:14Z", "commit": {"oid": "9bc87ad6b2a8cbad2f226c483c74f1fa1523b70e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwNzo0NzoxNFrOHmUz2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwNzo0NzoxNFrOHmUz2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTk0ODg4OA==", "bodyText": "Hi @gm7y8\nit would be better to move this calculation into the typescript file as a getter, and binding the getter here, since the calculation is a little too complex for the template file", "url": "https://github.com/apache/flink/pull/13458#discussion_r509948888", "createdAt": "2020-10-22T07:47:14Z", "author": {"login": "vthinkxie"}, "path": "flink-runtime-web/web-dashboard/src/app/pages/job/checkpoints/detail/job-checkpoints-detail.component.html", "diffHunk": "@@ -21,6 +21,8 @@\n     <strong>Path:</strong> {{checkPointDetail?.external_path || '-'}}\n     <nz-divider nzType=\"vertical\"></nz-divider>\n     <strong>Discarded:</strong> {{checkPointDetail?.discarded || '-'}}\n+    <nz-divider nzType=\"vertical\"></nz-divider>\n+    <strong>Checkpoint Type:</strong> {{checkPointDetail?.checkpoint_type === \"CHECKPOINT\" ? (checkPointConfig?.unaligned_checkpoints ? 'unaligned checkpoint' : 'aligned checkpoint') : (checkPointDetail?.checkpoint_type === \"SYNC_SAVEPOINT\" ? 'savepoint on cancel' : 'savepoint')|| '-'}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9bc87ad6b2a8cbad2f226c483c74f1fa1523b70e"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9bc87ad6b2a8cbad2f226c483c74f1fa1523b70e", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/9bc87ad6b2a8cbad2f226c483c74f1fa1523b70e", "committedDate": "2020-10-22T05:55:45Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}, "afterCommit": {"oid": "9c8c867b1ba1f9a236534718c4d4e0371b3cc5a3", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/9c8c867b1ba1f9a236534718c4d4e0371b3cc5a3", "committedDate": "2020-10-23T06:53:14Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NDAwMTAz", "url": "https://github.com/apache/flink/pull/13458#pullrequestreview-515400103", "createdAt": "2020-10-23T07:13:43Z", "commit": {"oid": "9c8c867b1ba1f9a236534718c4d4e0371b3cc5a3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNzoxMzo0M1rOHnBeJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNzoxMzo0M1rOHnBeJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY4MDYxMg==", "bodyText": "it would be better to checkPointType as a value other than a function here\nthen move the calculation to line 65", "url": "https://github.com/apache/flink/pull/13458#discussion_r510680612", "createdAt": "2020-10-23T07:13:43Z", "author": {"login": "vthinkxie"}, "path": "flink-runtime-web/web-dashboard/src/app/pages/job/checkpoints/detail/job-checkpoints-detail.component.ts", "diffHunk": "@@ -80,5 +83,25 @@ export class JobCheckpointsDetailComponent implements OnInit {\n       this.cdr.markForCheck();\n       this.refresh();\n     });\n+    this.jobService.loadCheckpointConfig(this.jobDetail.jid).subscribe(config => {\n+      this.checkPointConfig = config;\n+      this.cdr.markForCheck();\n+    });\n+  }\n+\n+  checkPointType(){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c8c867b1ba1f9a236534718c4d4e0371b3cc5a3"}, "originalPosition": 36}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c8c867b1ba1f9a236534718c4d4e0371b3cc5a3", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/9c8c867b1ba1f9a236534718c4d4e0371b3cc5a3", "committedDate": "2020-10-23T06:53:14Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}, "afterCommit": {"oid": "e18067714e5c3f75ed860f97f7c86ddedc719130", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/e18067714e5c3f75ed860f97f7c86ddedc719130", "committedDate": "2020-10-23T09:57:50Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3Mjk4MTE2", "url": "https://github.com/apache/flink/pull/13458#pullrequestreview-517298116", "createdAt": "2020-10-27T02:08:39Z", "commit": {"oid": "e18067714e5c3f75ed860f97f7c86ddedc719130"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMjowODozOVrOHoozPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMjowODozOVrOHoozPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM3MzU2Ng==", "bodyText": "Hi @gm7y8\ncould you try to replace the refresh function with the codes below\n  refresh() {\n    this.isLoading = true;\n    if (this.jobDetail && this.jobDetail.jid) {\n      forkJoin([\n        this.jobService.loadCheckpointConfig(this.jobDetail.jid),\n        this.jobService.loadCheckpointDetails(this.jobDetail.jid, this.checkPoint.id)\n      ]).subscribe(\n        ([config, detail]) => {\n          this.checkPointConfig = config;\n          this.checkPointDetail = detail;\n          if (this.checkPointDetail.checkpoint_type === 'CHECKPOINT') {\n            if (this.checkPointConfig.unaligned_checkpoints) {\n              this.checkPointType = 'unaligned checkpoint';\n            } else {\n              this.checkPointType = 'aligned checkpoint';\n            }\n          } else if (this.checkPointDetail.checkpoint_type === 'SYNC_SAVEPOINT') {\n            this.checkPointType = 'savepoint on cancel';\n          } else if (this.checkPointDetail.checkpoint_type === 'SAVEPOINT') {\n            this.checkPointType = 'savepoint';\n          } else {\n            this.checkPointType = '-';\n          }\n          this.isLoading = false;\n          this.cdr.markForCheck();\n        },\n        () => {\n          this.isLoading = false;\n          this.cdr.markForCheck();\n        }\n      );\n    }\n  }", "url": "https://github.com/apache/flink/pull/13458#discussion_r512373566", "createdAt": "2020-10-27T02:08:39Z", "author": {"login": "vthinkxie"}, "path": "flink-runtime-web/web-dashboard/src/app/pages/job/checkpoints/detail/job-checkpoints-detail.component.ts", "diffHunk": "@@ -57,9 +60,23 @@ export class JobCheckpointsDetailComponent implements OnInit {\n   refresh() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e18067714e5c3f75ed860f97f7c86ddedc719130"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3Mjk4MzE3", "url": "https://github.com/apache/flink/pull/13458#pullrequestreview-517298317", "createdAt": "2020-10-27T02:09:18Z", "commit": {"oid": "e18067714e5c3f75ed860f97f7c86ddedc719130"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMjowOToxOFrOHooz8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMjowOToxOFrOHooz8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM3Mzc0Nw==", "bodyText": "these new lines could be removed after refactoring refresh func", "url": "https://github.com/apache/flink/pull/13458#discussion_r512373747", "createdAt": "2020-10-27T02:09:18Z", "author": {"login": "vthinkxie"}, "path": "flink-runtime-web/web-dashboard/src/app/pages/job/checkpoints/detail/job-checkpoints-detail.component.ts", "diffHunk": "@@ -80,5 +97,9 @@ export class JobCheckpointsDetailComponent implements OnInit {\n       this.cdr.markForCheck();\n       this.refresh();\n     });\n+    this.jobService.loadCheckpointConfig(this.jobDetail.jid).subscribe(config => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e18067714e5c3f75ed860f97f7c86ddedc719130"}, "originalPosition": 54}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e18067714e5c3f75ed860f97f7c86ddedc719130", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/e18067714e5c3f75ed860f97f7c86ddedc719130", "committedDate": "2020-10-23T09:57:50Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}, "afterCommit": {"oid": "93c3a5078e391e0db0686f815b316ad0d7893976", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/93c3a5078e391e0db0686f815b316ad0d7893976", "committedDate": "2020-10-28T05:10:08Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "93c3a5078e391e0db0686f815b316ad0d7893976", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/93c3a5078e391e0db0686f815b316ad0d7893976", "committedDate": "2020-10-28T05:10:08Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}, "afterCommit": {"oid": "3676c7e7a4729c494e12e82f4df4f2617ef29b5d", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/3676c7e7a4729c494e12e82f4df4f2617ef29b5d", "committedDate": "2020-10-28T05:11:57Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3676c7e7a4729c494e12e82f4df4f2617ef29b5d", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/3676c7e7a4729c494e12e82f4df4f2617ef29b5d", "committedDate": "2020-10-28T05:11:57Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}, "afterCommit": {"oid": "c416edd7f8696bcf2ed6b77d0238ae7312282a51", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/c416edd7f8696bcf2ed6b77d0238ae7312282a51", "committedDate": "2020-10-28T08:02:00Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4NTY5NjUw", "url": "https://github.com/apache/flink/pull/13458#pullrequestreview-518569650", "createdAt": "2020-10-28T11:38:01Z", "commit": {"oid": "c416edd7f8696bcf2ed6b77d0238ae7312282a51"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMTozODowMVrOHpl5Kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMTozODowMVrOHpl5Kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM3NDUwNg==", "bodyText": "There are two extra spaces in each line, the others look good to me", "url": "https://github.com/apache/flink/pull/13458#discussion_r513374506", "createdAt": "2020-10-28T11:38:01Z", "author": {"login": "vthinkxie"}, "path": "flink-runtime-web/web-dashboard/src/app/pages/job/checkpoints/detail/job-checkpoints-detail.component.ts", "diffHunk": "@@ -55,21 +59,38 @@ export class JobCheckpointsDetailComponent implements OnInit {\n   }\n \n   refresh() {\n-    this.isLoading = true;\n-    if (this.jobDetail && this.jobDetail.jid) {\n-      this.jobService.loadCheckpointDetails(this.jobDetail.jid, this.checkPoint.id).subscribe(\n-        data => {\n-          this.checkPointDetail = data;\n-          this.isLoading = false;\n-          this.cdr.markForCheck();\n-        },\n-        () => {\n-          this.isLoading = false;\n-          this.cdr.markForCheck();\n-        }\n-      );\n+      this.isLoading = true;\n+      if (this.jobDetail && this.jobDetail.jid) {\n+        forkJoin([\n+          this.jobService.loadCheckpointConfig(this.jobDetail.jid),\n+          this.jobService.loadCheckpointDetails(this.jobDetail.jid, this.checkPoint.id)\n+        ]).subscribe(\n+          ([config, detail]) => {\n+            this.checkPointConfig = config;\n+            this.checkPointDetail = detail;\n+            if (this.checkPointDetail.checkpoint_type === 'CHECKPOINT') {\n+              if (this.checkPointConfig.unaligned_checkpoints) {\n+                this.checkPointType = 'unaligned checkpoint';\n+              } else {\n+                this.checkPointType = 'aligned checkpoint';\n+              }\n+            } else if (this.checkPointDetail.checkpoint_type === 'SYNC_SAVEPOINT') {\n+              this.checkPointType = 'savepoint on cancel';\n+            } else if (this.checkPointDetail.checkpoint_type === 'SAVEPOINT') {\n+              this.checkPointType = 'savepoint';\n+            } else {\n+              this.checkPointType = '-';\n+            }\n+            this.isLoading = false;\n+            this.cdr.markForCheck();\n+          },\n+          () => {\n+            this.isLoading = false;\n+            this.cdr.markForCheck();\n+          }\n+        );\n+      }\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c416edd7f8696bcf2ed6b77d0238ae7312282a51"}, "originalPosition": 76}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c416edd7f8696bcf2ed6b77d0238ae7312282a51", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/c416edd7f8696bcf2ed6b77d0238ae7312282a51", "committedDate": "2020-10-28T08:02:00Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}, "afterCommit": {"oid": "54cffd6abfe4c145604aa99e1208bec64b68271b", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/54cffd6abfe4c145604aa99e1208bec64b68271b", "committedDate": "2020-10-28T17:30:55Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "54cffd6abfe4c145604aa99e1208bec64b68271b", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/54cffd6abfe4c145604aa99e1208bec64b68271b", "committedDate": "2020-10-28T17:30:55Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}, "afterCommit": {"oid": "0ac3b69443cb5d30ad8c8e45d94e16af20f0bb7c", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/0ac3b69443cb5d30ad8c8e45d94e16af20f0bb7c", "committedDate": "2020-10-28T17:34:43Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9630210f329afea61fe0fdcff3ece6e67b710121", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/9630210f329afea61fe0fdcff3ece6e67b710121", "committedDate": "2020-10-29T11:56:46Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ac3b69443cb5d30ad8c8e45d94e16af20f0bb7c", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/0ac3b69443cb5d30ad8c8e45d94e16af20f0bb7c", "committedDate": "2020-10-28T17:34:43Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}, "afterCommit": {"oid": "9630210f329afea61fe0fdcff3ece6e67b710121", "author": {"user": {"login": "gm7y8", "name": "gkrishna"}}, "url": "https://github.com/apache/flink/commit/9630210f329afea61fe0fdcff3ece6e67b710121", "committedDate": "2020-10-29T11:56:46Z", "message": "[FLINK-18851][runtime-web] Add checkpoint type to checkpoint history"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4203, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}