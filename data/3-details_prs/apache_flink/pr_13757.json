{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4NzM0MDI4", "number": 13757, "title": "[FLINK-18117][e2e] Add debugging information for hadoop startup", "bodyText": "What is the purpose of the change\nThis adds some non-invasive environment debugging to understand why the namenode can not allocate the http port inside a docker container.\nI was not able to reproduce the failing e2e test.", "createdAt": "2020-10-23T05:47:46Z", "url": "https://github.com/apache/flink/pull/13757", "merged": true, "mergeCommit": {"oid": "067f60ff01d76eece394a7779f5180251af2f17d"}, "closed": true, "closedAt": "2020-10-23T13:19:06Z", "author": {"login": "rmetzger"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVP97oAH2gAyNTA4NzM0MDI4OmIyY2M5NjM4YTlkOTE5ZTkyNGE0YTY3YjhkMTVlNjhlNGRhZDUzMGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVWb7uABqjM5MTM5MDEyNDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b2cc9638a9d919e924a4a67b8d15e68e4dad530d", "author": {"user": {"login": "rmetzger", "name": "Robert Metzger"}}, "url": "https://github.com/apache/flink/commit/b2cc9638a9d919e924a4a67b8d15e68e4dad530d", "committedDate": "2020-10-23T05:45:52Z", "message": "[FLINK-18117][e2e] Add debugging information for hadoop startup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NjA4NDc5", "url": "https://github.com/apache/flink/pull/13757#pullrequestreview-515608479", "createdAt": "2020-10-23T12:13:36Z", "commit": {"oid": "b2cc9638a9d919e924a4a67b8d15e68e4dad530d"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxMjoxMzozNlrOHnLOVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxMjoxNzo1M1rOHnLX3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg0MDQwNQ==", "bodyText": "Are you sure that you want to use sudo -E sudo #...? I couldn't test it quickly but it looks strange.", "url": "https://github.com/apache/flink/pull/13757#discussion_r510840405", "createdAt": "2020-10-23T12:13:36Z", "author": {"login": "XComp"}, "path": "flink-end-to-end-tests/test-scripts/docker-hadoop-secure-cluster/bootstrap.sh", "diffHunk": "@@ -92,7 +92,12 @@ if [ \"$1\" == \"--help\" -o \"$1\" == \"-h\" ]; then\n     exit 0\n elif [ \"$1\" == \"master\" ]; then\n     yes| sudo -E -u hdfs $HADOOP_PREFIX/bin/hdfs namenode -format\n-\n+    sudo -E sudo netstat -tulpn >> /var/log/hadoop/debugging.out\n+    echo \"--------------------\" >> /var/log/hadoop/debugging.out\n+    sudo -E sudo ps -aux >> /var/log/hadoop/debugging.out\n+    echo \"--------------------\" >> /var/log/hadoop/debugging.out\n+    sudo -E sudo jps -v >> /var/log/hadoop/debugging.out", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2cc9638a9d919e924a4a67b8d15e68e4dad530d"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg0Mjg0Ng==", "bodyText": "Just as a side-note: I usually added also -e as a parameter getting \"extended\" output. Not sure whether it helps in that case but it's just nice to read for someone who knows German: netstat -tulpen \ud83d\ude04", "url": "https://github.com/apache/flink/pull/13757#discussion_r510842846", "createdAt": "2020-10-23T12:17:53Z", "author": {"login": "XComp"}, "path": "flink-end-to-end-tests/test-scripts/docker-hadoop-secure-cluster/bootstrap.sh", "diffHunk": "@@ -92,7 +92,12 @@ if [ \"$1\" == \"--help\" -o \"$1\" == \"-h\" ]; then\n     exit 0\n elif [ \"$1\" == \"master\" ]; then\n     yes| sudo -E -u hdfs $HADOOP_PREFIX/bin/hdfs namenode -format\n-\n+    sudo -E sudo netstat -tulpn >> /var/log/hadoop/debugging.out", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2cc9638a9d919e924a4a67b8d15e68e4dad530d"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6748cff26f3619285e65213570e61027f8d01796", "author": {"user": {"login": "rmetzger", "name": "Robert Metzger"}}, "url": "https://github.com/apache/flink/commit/6748cff26f3619285e65213570e61027f8d01796", "committedDate": "2020-10-23T13:17:51Z", "message": "fixup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98ac3ee1dc2f037aec3cfb9cb55906926b466851", "author": {"user": {"login": "rmetzger", "name": "Robert Metzger"}}, "url": "https://github.com/apache/flink/commit/98ac3ee1dc2f037aec3cfb9cb55906926b466851", "committedDate": "2020-10-23T13:16:51Z", "message": "fixup"}, "afterCommit": {"oid": "6748cff26f3619285e65213570e61027f8d01796", "author": {"user": {"login": "rmetzger", "name": "Robert Metzger"}}, "url": "https://github.com/apache/flink/commit/6748cff26f3619285e65213570e61027f8d01796", "committedDate": "2020-10-23T13:17:51Z", "message": "fixup"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3069, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}