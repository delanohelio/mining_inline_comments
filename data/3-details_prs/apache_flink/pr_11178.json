{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4Mzc4ODg1", "number": 11178, "title": "[hotfix] Stabilize python tests", "bodyText": "These are some examples of failing python tests:\n\nhttps://dev.azure.com/rmetzger/Flink/_build/results?buildId=5408&view=logs&j=dee070b7-d526-572b-39a4-ac3b24b600ee&t=b950229e-d858-5111-b60e-d71ec3d8da1d\ufffd\nhttps://dev.azure.com/rmetzger/Flink/_build/results?buildId=5409&view=logs&j=dee070b7-d526-572b-39a4-ac3b24b600ee&t=b950229e-d858-5111-b60e-d71ec3d8da1d\nhttps://dev.azure.com/rmetzger/Flink/_build/results?buildId=5410&view=results\nhttps://dev.azure.com/rmetzger/Flink/_build/results?buildId=5404&view=logs&j=dee070b7-d526-572b-39a4-ac3b24b600ee&t=b950229e-d858-5111-b60e-d71ec3d8da1d\n\nThey all have connection timeout errors:\nINFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 13:04 min\n[INFO] Finished at: 2020-02-21T12:23:36+00:00\n[INFO] Final Memory: 265M/4463M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal on project flink-connector-elasticsearch7_2.11: Could not resolve dependencies for project org.apache.flink:flink-connector-elasticsearch7_2.11:jar:1.11-SNAPSHOT: Failed to collect dependencies at org.elasticsearch.client:elasticsearch-rest-high-level-client:jar:7.5.1 -> org.elasticsearch:elasticsearch:jar:7.5.1 -> org.apache.lucene:lucene-core:jar:8.3.0: Failed to read artifact descriptor for org.apache.lucene:lucene-core:jar:8.3.0: Could not transfer artifact org.apache.lucene:lucene-solr-grandparent:pom:8.3.0 from/to google-maven-central (https://maven-central-eu.storage-download.googleapis.com/maven2/): GET request of: org/apache/lucene/lucene-solr-grandparent/8.3.0/lucene-solr-grandparent-8.3.0.pom from google-maven-central failed: Connection reset -> [Help 1]\n\nThis hotfix introduces two mitigations:\na) we fail the build if maven fails\nb) we use a cache for the python build, so that we don't have to excessively use the mirror", "createdAt": "2020-02-21T16:57:45Z", "url": "https://github.com/apache/flink/pull/11178", "merged": true, "mergeCommit": {"oid": "24c9f2b0b89c21a292c745623ade837724d7cf75"}, "closed": true, "closedAt": "2020-02-22T08:35:43Z", "author": {"login": "rmetzger"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGjZqSAFqTM2MjgwMjc2MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGomqyABqjMwNjIyNjk1MTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyODAyNzYx", "url": "https://github.com/apache/flink/pull/11178#pullrequestreview-362802761", "createdAt": "2020-02-21T17:43:38Z", "commit": {"oid": "b2e002eb9b0f340f4efd6e79b22c19d9b588993f"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxNzo0MzozOFrOFs_LrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxNzo0Mzo1MFrOFs_MEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjcxNjg0NQ==", "bodyText": "let's move this below the error check", "url": "https://github.com/apache/flink/pull/11178#discussion_r382716845", "createdAt": "2020-02-21T17:43:38Z", "author": {"login": "zentol"}, "path": "tools/azure_controller.sh", "diffHunk": "@@ -173,6 +173,13 @@ elif [ $STAGE != \"$STAGE_CLEANUP\" ]; then\n         PY_MVN=\"$PY_MVN -Drat.skip=true\"\n         ${PY_MVN}\n         echo \"Done compiling ... \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2e002eb9b0f340f4efd6e79b22c19d9b588993f"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjcxNjk0Nw==", "bodyText": "add an empty line?", "url": "https://github.com/apache/flink/pull/11178#discussion_r382716947", "createdAt": "2020-02-21T17:43:50Z", "author": {"login": "zentol"}, "path": "tools/azure-pipelines/jobs-template.yml", "diffHunk": "@@ -98,10 +98,15 @@ jobs:\n       path: $(CACHE_FLINK_DIR)\n       artifact: FlinkCompileCacheDir-${{parameters.stage_name}}\n \n-  # recreate \"build-target\" symlink for python tests\n-  - script: |\n-      ln -snf $(CACHE_FLINK_DIR)/flink-dist/target/flink-*-SNAPSHOT-bin/flink-*-SNAPSHOT $(CACHE_FLINK_DIR)/build-target\n-    displayName: Recreate 'build-target' symlink\n+  # only for the python stage (which runs a full mvn install), download the cache\n+  - task: Cache@2\n+    condition: eq(variables['module'], 'python')\n+    inputs:\n+      key: $(CACHE_KEY)\n+      restoreKeys: $(CACHE_FALLBACK_KEY)\n+      path: $(MAVEN_CACHE_FOLDER)\n+    continueOnError: true # continue the build even if the cache fails.\n+    displayName: Cache Maven local repo\n   # Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2e002eb9b0f340f4efd6e79b22c19d9b588993f"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e4b742577824a69966ee284b055495bbc17644a", "author": {"user": {"login": "rmetzger", "name": "Robert Metzger"}}, "url": "https://github.com/apache/flink/commit/5e4b742577824a69966ee284b055495bbc17644a", "committedDate": "2020-02-21T23:46:54Z", "message": "[hotfix] Stabilize python tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b2e002eb9b0f340f4efd6e79b22c19d9b588993f", "author": {"user": {"login": "rmetzger", "name": "Robert Metzger"}}, "url": "https://github.com/apache/flink/commit/b2e002eb9b0f340f4efd6e79b22c19d9b588993f", "committedDate": "2020-02-21T16:54:21Z", "message": "[hotfix] Stabilize python tests"}, "afterCommit": {"oid": "5e4b742577824a69966ee284b055495bbc17644a", "author": {"user": {"login": "rmetzger", "name": "Robert Metzger"}}, "url": "https://github.com/apache/flink/commit/5e4b742577824a69966ee284b055495bbc17644a", "committedDate": "2020-02-21T23:46:54Z", "message": "[hotfix] Stabilize python tests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4922, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}