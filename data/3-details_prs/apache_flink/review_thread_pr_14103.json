{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyNTA2MDMy", "number": 14103, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDowNTozOFrOE9JyRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwODoyMzozOFrOE9hiSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyNTU4OTE3OnYy", "diffSide": "RIGHT", "path": "docs/_includes/generated/pipeline_configuration.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDowNTozOFrOH5r72A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDowNTozOFrOH5r72A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI1MDcxMg==", "bodyText": "nit: change this to The job name used for printing and logging.", "url": "https://github.com/apache/flink/pull/14103#discussion_r530250712", "createdAt": "2020-11-25T10:05:38Z", "author": {"login": "twalthr"}, "path": "docs/_includes/generated/pipeline_configuration.html", "diffHunk": "@@ -86,6 +86,12 @@\n             <td>Integer</td>\n             <td>The program-wide maximum parallelism used for operators which haven't specified a maximum parallelism. The maximum parallelism specifies the upper limit for dynamic scaling and the number of key groups used for partitioned state.</td>\n         </tr>\n+        <tr>\n+            <td><h5>pipeline.name</h5></td>\n+            <td style=\"word-wrap: break-word;\">(none)</td>\n+            <td>String</td>\n+            <td>The name to display for the job.</td>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "938cbb403a01e6d31cbc605a49f9baf7b3b9bf31"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyNTY1NjYyOnYy", "diffSide": "RIGHT", "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/environment/StreamExecutionEnvironment.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDoyMDo1MFrOH5sjRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDoyMDo1MFrOH5sjRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI2MDgwNA==", "bodyText": "Update StreamExecutionEnvironment#configure as well.", "url": "https://github.com/apache/flink/pull/14103#discussion_r530260804", "createdAt": "2020-11-25T10:20:50Z", "author": {"login": "twalthr"}, "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/environment/StreamExecutionEnvironment.java", "diffHunk": "@@ -1778,7 +1778,7 @@ private StateBackend loadStateBackend(ReadableConfig configuration, ClassLoader\n \t * @throws Exception which occurs during job execution.\n \t */\n \tpublic JobExecutionResult execute() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "938cbb403a01e6d31cbc605a49f9baf7b3b9bf31"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyNTY4OTc2OnYy", "diffSide": "RIGHT", "path": "flink-streaming-java/src/test/java/org/apache/flink/streaming/api/StreamExecutionEnvironmentTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDoyODo0OFrOH5s3aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDoyODo0OFrOH5s3aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI2NTk2Mw==", "bodyText": "nit: simplify the test here and below to just use env.fromElements(1, 2, 3).print()", "url": "https://github.com/apache/flink/pull/14103#discussion_r530265963", "createdAt": "2020-11-25T10:28:48Z", "author": {"login": "twalthr"}, "path": "flink-streaming-java/src/test/java/org/apache/flink/streaming/api/StreamExecutionEnvironmentTest.java", "diffHunk": "@@ -269,6 +271,27 @@ public void testGetStreamGraph() {\n \t\t}\n \t}\n \n+\t@Test\n+\tpublic void testDefaultJobName() {\n+\t\tStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n+\n+\t\tenv.fromCollection(new DummySplittableIterator<>(), BasicTypeInfo.INT_TYPE_INFO).addSink(new DiscardingSink<>());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "938cbb403a01e6d31cbc605a49f9baf7b3b9bf31"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyNjIwNzYwOnYy", "diffSide": "RIGHT", "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/environment/StreamExecutionEnvironment.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMjo0NDowM1rOH5xwmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwMjo1NTowN1rOH6KHng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM0NjEzNg==", "bodyText": "Can't we just put the default name in the pipeline option? That way, it will also be rendered in the documentation.", "url": "https://github.com/apache/flink/pull/14103#discussion_r530346136", "createdAt": "2020-11-25T12:44:03Z", "author": {"login": "aljoscha"}, "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/environment/StreamExecutionEnvironment.java", "diffHunk": "@@ -2330,4 +2330,8 @@ public void registerCachedFile(String filePath, String name, boolean executable)\n \t\t}\n \t\treturn (T) resolvedTypeInfo;\n \t}\n+\n+\tprivate String getJobName() {\n+\t\treturn configuration.getString(PipelineOptions.NAME, DEFAULT_JOB_NAME);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "938cbb403a01e6d31cbc605a49f9baf7b3b9bf31"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM2NTA2Ng==", "bodyText": "Are pipeline options also used in ExecutionEnvironment? The PR doesn't update this class but maybe it should? In that case Flink Streaming Job would be wrong.", "url": "https://github.com/apache/flink/pull/14103#discussion_r530365066", "createdAt": "2020-11-25T13:14:41Z", "author": {"login": "twalthr"}, "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/environment/StreamExecutionEnvironment.java", "diffHunk": "@@ -2330,4 +2330,8 @@ public void registerCachedFile(String filePath, String name, boolean executable)\n \t\t}\n \t\treturn (T) resolvedTypeInfo;\n \t}\n+\n+\tprivate String getJobName() {\n+\t\treturn configuration.getString(PipelineOptions.NAME, DEFAULT_JOB_NAME);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM0NjEzNg=="}, "originalCommit": {"oid": "938cbb403a01e6d31cbc605a49f9baf7b3b9bf31"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDczNDczNg==", "bodyText": "Thanks all for the suggestions. @twalthr, I have checked that the pipeline options are also used in ExecutionEnvironment. I also don't notice that before, I will update it. The default name of ExecutionEnvironment is \"Flink Java Job at \" + Calendar.getInstance().getTime(), so the NAME option has no default value.", "url": "https://github.com/apache/flink/pull/14103#discussion_r530734736", "createdAt": "2020-11-26T02:14:09Z", "author": {"login": "godfreyhe"}, "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/environment/StreamExecutionEnvironment.java", "diffHunk": "@@ -2330,4 +2330,8 @@ public void registerCachedFile(String filePath, String name, boolean executable)\n \t\t}\n \t\treturn (T) resolvedTypeInfo;\n \t}\n+\n+\tprivate String getJobName() {\n+\t\treturn configuration.getString(PipelineOptions.NAME, DEFAULT_JOB_NAME);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM0NjEzNg=="}, "originalCommit": {"oid": "938cbb403a01e6d31cbc605a49f9baf7b3b9bf31"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0NTI0Ng==", "bodyText": "TableEnvironment also uses a different default name for the SQL query, e.g. insert-into_<sink-names>. So I think no default value makes more sense, that the default value is defined by different environment.", "url": "https://github.com/apache/flink/pull/14103#discussion_r530745246", "createdAt": "2020-11-26T02:55:07Z", "author": {"login": "wuchong"}, "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/environment/StreamExecutionEnvironment.java", "diffHunk": "@@ -2330,4 +2330,8 @@ public void registerCachedFile(String filePath, String name, boolean executable)\n \t\t}\n \t\treturn (T) resolvedTypeInfo;\n \t}\n+\n+\tprivate String getJobName() {\n+\t\treturn configuration.getString(PipelineOptions.NAME, DEFAULT_JOB_NAME);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM0NjEzNg=="}, "originalCommit": {"oid": "938cbb403a01e6d31cbc605a49f9baf7b3b9bf31"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyOTQ4MDQzOnYy", "diffSide": "RIGHT", "path": "flink-java/src/main/java/org/apache/flink/api/java/ExecutionEnvironment.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwODoyMzozOFrOH6QS7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwODoyMzozOFrOH6QS7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg0NjQ0Ng==", "bodyText": "This method must not be public and thus part of the API. You can call createProgramPlan().getJobName for testing.", "url": "https://github.com/apache/flink/pull/14103#discussion_r530846446", "createdAt": "2020-11-26T08:23:38Z", "author": {"login": "twalthr"}, "path": "flink-java/src/main/java/org/apache/flink/api/java/ExecutionEnvironment.java", "diffHunk": "@@ -1122,12 +1125,14 @@ void registerDataSink(DataSink<?> sink) {\n \t}\n \n \t/**\n-\t * Gets a default job name, based on the timestamp when this method is invoked.\n+\t * Gets the job name. If user defined job name is not found in the configuration,\n+\t * the default name based on the timestamp when this method is invoked will return.\n \t *\n-\t * @return A default job name.\n+\t * @return A job name.\n \t */\n-\tprivate static String getDefaultName() {\n-\t\treturn \"Flink Java Job at \" + Calendar.getInstance().getTime();\n+\t@VisibleForTesting", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cda47b16b8fa216fefb5399249026c2a54e907ed"}, "originalPosition": 66}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4796, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}