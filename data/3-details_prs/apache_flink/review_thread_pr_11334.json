{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0ODkyOTU3", "number": 11334, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxNjowMTowOVrODl2UDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwOToyNDo1OVrODzofdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMDEzNzc1OnYy", "diffSide": "RIGHT", "path": "flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/CliTableauResultViewTest.java", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxNjowMTowOVrOFy9-SQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwNzowNDoxNFrOFzM-pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk4ODQ4OQ==", "bodyText": "Looks like we can not use UTF-8 length too...", "url": "https://github.com/apache/flink/pull/11334#discussion_r388988489", "createdAt": "2020-03-06T16:01:09Z", "author": {"login": "JingsongLi"}, "path": "flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/CliTableauResultViewTest.java", "diffHunk": "@@ -167,8 +177,9 @@ public void testBatchResult() {\n \t\t\t\t\"|   false | -2147483648 |  9223372036854775807 |                     (NULL) |    12345.06789 |    2020-03-01 18:39:14.123 |\\n\" +\n \t\t\t\t\"|    true |         100 | -9223372036854775808 |                 abcdefg111 |         (NULL) | 2020-03-01 18:39:14.123456 |\\n\" +\n \t\t\t\t\"|  (NULL) |          -1 |                   -1 | abcdefghijklmnopqrstuvwxyz |   -12345.06789 |                     (NULL) |\\n\" +\n+\t\t\t\t\"|  (NULL) |          -1 |                   -1 |         \u8fd9\u662f\u4e00\u6bb5\u4e2d\u6587 |   -12345.06789 |      2020-03-04 18:39:14.0 |\\n\"\t+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3872cefa8859725fa3f51e0e73698e5d1e086e3b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTAwNzY0MQ==", "bodyText": "Hi, Jingsongli,\nHere's right,  the String  '         \u8fd9\u662f\u4e00\u6bb5\u4e2d\u6587 '  has same length with 'abcdefghijklmnopqrstuvwxyz' and shows well  when print in terminal.\nYou can see the final view if you using  sql-client .", "url": "https://github.com/apache/flink/pull/11334#discussion_r389007641", "createdAt": "2020-03-06T16:33:50Z", "author": {"login": "leonardBang"}, "path": "flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/CliTableauResultViewTest.java", "diffHunk": "@@ -167,8 +177,9 @@ public void testBatchResult() {\n \t\t\t\t\"|   false | -2147483648 |  9223372036854775807 |                     (NULL) |    12345.06789 |    2020-03-01 18:39:14.123 |\\n\" +\n \t\t\t\t\"|    true |         100 | -9223372036854775808 |                 abcdefg111 |         (NULL) | 2020-03-01 18:39:14.123456 |\\n\" +\n \t\t\t\t\"|  (NULL) |          -1 |                   -1 | abcdefghijklmnopqrstuvwxyz |   -12345.06789 |                     (NULL) |\\n\" +\n+\t\t\t\t\"|  (NULL) |          -1 |                   -1 |         \u8fd9\u662f\u4e00\u6bb5\u4e2d\u6587 |   -12345.06789 |      2020-03-04 18:39:14.0 |\\n\"\t+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk4ODQ4OQ=="}, "originalCommit": {"oid": "3872cefa8859725fa3f51e0e73698e5d1e086e3b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyMDc1Mg==", "bodyText": "You sure about this? It doesn't look right when I print out the string via System.out.println in IDE", "url": "https://github.com/apache/flink/pull/11334#discussion_r389220752", "createdAt": "2020-03-07T02:46:04Z", "author": {"login": "KurtYoung"}, "path": "flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/CliTableauResultViewTest.java", "diffHunk": "@@ -167,8 +177,9 @@ public void testBatchResult() {\n \t\t\t\t\"|   false | -2147483648 |  9223372036854775807 |                     (NULL) |    12345.06789 |    2020-03-01 18:39:14.123 |\\n\" +\n \t\t\t\t\"|    true |         100 | -9223372036854775808 |                 abcdefg111 |         (NULL) | 2020-03-01 18:39:14.123456 |\\n\" +\n \t\t\t\t\"|  (NULL) |          -1 |                   -1 | abcdefghijklmnopqrstuvwxyz |   -12345.06789 |                     (NULL) |\\n\" +\n+\t\t\t\t\"|  (NULL) |          -1 |                   -1 |         \u8fd9\u662f\u4e00\u6bb5\u4e2d\u6587 |   -12345.06789 |      2020-03-04 18:39:14.0 |\\n\"\t+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk4ODQ4OQ=="}, "originalCommit": {"oid": "3872cefa8859725fa3f51e0e73698e5d1e086e3b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyMjA0NQ==", "bodyText": "It also doesn't seem right when I executed this test in my terminal by command line.", "url": "https://github.com/apache/flink/pull/11334#discussion_r389222045", "createdAt": "2020-03-07T03:04:51Z", "author": {"login": "KurtYoung"}, "path": "flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/CliTableauResultViewTest.java", "diffHunk": "@@ -167,8 +177,9 @@ public void testBatchResult() {\n \t\t\t\t\"|   false | -2147483648 |  9223372036854775807 |                     (NULL) |    12345.06789 |    2020-03-01 18:39:14.123 |\\n\" +\n \t\t\t\t\"|    true |         100 | -9223372036854775808 |                 abcdefg111 |         (NULL) | 2020-03-01 18:39:14.123456 |\\n\" +\n \t\t\t\t\"|  (NULL) |          -1 |                   -1 | abcdefghijklmnopqrstuvwxyz |   -12345.06789 |                     (NULL) |\\n\" +\n+\t\t\t\t\"|  (NULL) |          -1 |                   -1 |         \u8fd9\u662f\u4e00\u6bb5\u4e2d\u6587 |   -12345.06789 |      2020-03-04 18:39:14.0 |\\n\"\t+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk4ODQ4OQ=="}, "originalCommit": {"oid": "3872cefa8859725fa3f51e0e73698e5d1e086e3b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyMjY3NQ==", "bodyText": "I think Jingsong is right, we can't use String.getBytes().length here. For example, the result of \"\u8fd9\u662f\u4e00\u6bb5\u4e2d\u6587\".getBytes().length() is 18, but if we want the display correct, it should be 12.", "url": "https://github.com/apache/flink/pull/11334#discussion_r389222675", "createdAt": "2020-03-07T03:14:49Z", "author": {"login": "KurtYoung"}, "path": "flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/CliTableauResultViewTest.java", "diffHunk": "@@ -167,8 +177,9 @@ public void testBatchResult() {\n \t\t\t\t\"|   false | -2147483648 |  9223372036854775807 |                     (NULL) |    12345.06789 |    2020-03-01 18:39:14.123 |\\n\" +\n \t\t\t\t\"|    true |         100 | -9223372036854775808 |                 abcdefg111 |         (NULL) | 2020-03-01 18:39:14.123456 |\\n\" +\n \t\t\t\t\"|  (NULL) |          -1 |                   -1 | abcdefghijklmnopqrstuvwxyz |   -12345.06789 |                     (NULL) |\\n\" +\n+\t\t\t\t\"|  (NULL) |          -1 |                   -1 |         \u8fd9\u662f\u4e00\u6bb5\u4e2d\u6587 |   -12345.06789 |      2020-03-04 18:39:14.0 |\\n\"\t+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk4ODQ4OQ=="}, "originalCommit": {"oid": "3872cefa8859725fa3f51e0e73698e5d1e086e3b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIzMjc1Mg==", "bodyText": "The problem is that UTF-8 char's display width is different with UTF-8 char's bytes length. \"\u8fd9\u662f\u4e00\u6bb5\u4e2d\u6587\".getBytes().length() will return 18 because length of Chinese char is 3 in UTF-8 unicode\uff0chere we can use GBK unicode which Chinese char's length is 2.\nBut GBK is not common enough than UTF-8.", "url": "https://github.com/apache/flink/pull/11334#discussion_r389232752", "createdAt": "2020-03-07T06:26:29Z", "author": {"login": "leonardBang"}, "path": "flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/CliTableauResultViewTest.java", "diffHunk": "@@ -167,8 +177,9 @@ public void testBatchResult() {\n \t\t\t\t\"|   false | -2147483648 |  9223372036854775807 |                     (NULL) |    12345.06789 |    2020-03-01 18:39:14.123 |\\n\" +\n \t\t\t\t\"|    true |         100 | -9223372036854775808 |                 abcdefg111 |         (NULL) | 2020-03-01 18:39:14.123456 |\\n\" +\n \t\t\t\t\"|  (NULL) |          -1 |                   -1 | abcdefghijklmnopqrstuvwxyz |   -12345.06789 |                     (NULL) |\\n\" +\n+\t\t\t\t\"|  (NULL) |          -1 |                   -1 |         \u8fd9\u662f\u4e00\u6bb5\u4e2d\u6587 |   -12345.06789 |      2020-03-04 18:39:14.0 |\\n\"\t+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk4ODQ4OQ=="}, "originalCommit": {"oid": "3872cefa8859725fa3f51e0e73698e5d1e086e3b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIzMjk5Mw==", "bodyText": "Using GBK works well with Chinese,\n\nmy concern is other language like Japanese/Korean have same problem.", "url": "https://github.com/apache/flink/pull/11334#discussion_r389232993", "createdAt": "2020-03-07T06:33:13Z", "author": {"login": "leonardBang"}, "path": "flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/CliTableauResultViewTest.java", "diffHunk": "@@ -167,8 +177,9 @@ public void testBatchResult() {\n \t\t\t\t\"|   false | -2147483648 |  9223372036854775807 |                     (NULL) |    12345.06789 |    2020-03-01 18:39:14.123 |\\n\" +\n \t\t\t\t\"|    true |         100 | -9223372036854775808 |                 abcdefg111 |         (NULL) | 2020-03-01 18:39:14.123456 |\\n\" +\n \t\t\t\t\"|  (NULL) |          -1 |                   -1 | abcdefghijklmnopqrstuvwxyz |   -12345.06789 |                     (NULL) |\\n\" +\n+\t\t\t\t\"|  (NULL) |          -1 |                   -1 |         \u8fd9\u662f\u4e00\u6bb5\u4e2d\u6587 |   -12345.06789 |      2020-03-04 18:39:14.0 |\\n\"\t+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk4ODQ4OQ=="}, "originalCommit": {"oid": "3872cefa8859725fa3f51e0e73698e5d1e086e3b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIzNDM0Mg==", "bodyText": "It seems this is a full width / half width character issue, but not necessarily an encoding problem.", "url": "https://github.com/apache/flink/pull/11334#discussion_r389234342", "createdAt": "2020-03-07T07:04:14Z", "author": {"login": "KurtYoung"}, "path": "flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/CliTableauResultViewTest.java", "diffHunk": "@@ -167,8 +177,9 @@ public void testBatchResult() {\n \t\t\t\t\"|   false | -2147483648 |  9223372036854775807 |                     (NULL) |    12345.06789 |    2020-03-01 18:39:14.123 |\\n\" +\n \t\t\t\t\"|    true |         100 | -9223372036854775808 |                 abcdefg111 |         (NULL) | 2020-03-01 18:39:14.123456 |\\n\" +\n \t\t\t\t\"|  (NULL) |          -1 |                   -1 | abcdefghijklmnopqrstuvwxyz |   -12345.06789 |                     (NULL) |\\n\" +\n+\t\t\t\t\"|  (NULL) |          -1 |                   -1 |         \u8fd9\u662f\u4e00\u6bb5\u4e2d\u6587 |   -12345.06789 |      2020-03-04 18:39:14.0 |\\n\"\t+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk4ODQ4OQ=="}, "originalCommit": {"oid": "3872cefa8859725fa3f51e0e73698e5d1e086e3b"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNzMxODI0OnYy", "diffSide": "RIGHT", "path": "flink-table/flink-sql-client/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwMzoxOTo1NVrOF0AR3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwMzoxOTo1NVrOF0AR3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA3NDg0NA==", "bodyText": "We should also shade this jar into flink-sql-client jar?\nIf yes, then please also update the license files", "url": "https://github.com/apache/flink/pull/11334#discussion_r390074844", "createdAt": "2020-03-10T03:19:55Z", "author": {"login": "KurtYoung"}, "path": "flink-table/flink-sql-client/pom.xml", "diffHunk": "@@ -109,6 +109,13 @@ under the License.\n \t\t\t<version>3.9.0</version>\n \t\t</dependency>\n \n+\t\t<!-- Tools to Unify display format for different languages -->\n+\t\t<dependency>\n+\t\t\t<groupId>com.ibm.icu</groupId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbef90ead12cfccbb50a04b1f59d809df9b7fc40"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNzMyMjQ0OnYy", "diffSide": "RIGHT", "path": "flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/cli/CliTableauResultView.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwMzoyMjo0OVrOF0AUZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwMzoyMjo0OVrOF0AUZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA3NTQ5NA==", "bodyText": "use COLUMN_TRUNCATED_FLAG.length() instead?", "url": "https://github.com/apache/flink/pull/11334#discussion_r390075494", "createdAt": "2020-03-10T03:22:49Z", "author": {"login": "KurtYoung"}, "path": "flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/cli/CliTableauResultView.java", "diffHunk": "@@ -60,9 +61,9 @@\n \tprivate static final int NULL_COLUMN_WIDTH = CliStrings.NULL_COLUMN.length();\n \tprivate static final int MAX_COLUMN_WIDTH = 30;\n \tprivate static final int DEFAULT_COLUMN_WIDTH = 20;\n+\tprivate static final int COLUMN_TRUNCATED_FLAG_WIDTH = 3;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbef90ead12cfccbb50a04b1f59d809df9b7fc40"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNzMyNjk0OnYy", "diffSide": "RIGHT", "path": "flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/cli/CliTableauResultView.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwMzoyNTo1OVrOF0AXKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwMzoyNTo1OVrOF0AXKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA3NjIwMg==", "bodyText": "int displayWidth = getStringDisplayWidth(col)  would be more clear and accurate", "url": "https://github.com/apache/flink/pull/11334#discussion_r390076202", "createdAt": "2020-03-10T03:25:59Z", "author": {"login": "KurtYoung"}, "path": "flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/cli/CliTableauResultView.java", "diffHunk": "@@ -276,13 +277,13 @@ private void printSingleRow(int[] colWidths, String[] cols) {\n \t\tsb.append(\"|\");\n \t\tint idx = 0;\n \t\tfor (String col : cols) {\n-\t\t\tbyte[] colBytes = getUTF8Bytes(col);\n \t\t\tsb.append(\" \");\n-\t\t\tif (colBytes.length <= colWidths[idx]) {\n-\t\t\t\tsb.append(StringUtils.repeat(' ', colWidths[idx] - colBytes.length));\n+\t\t\tint colWidth = getStringWidth(col);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbef90ead12cfccbb50a04b1f59d809df9b7fc40"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNzMyODU1OnYy", "diffSide": "RIGHT", "path": "flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/cli/CliTableauResultView.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwMzoyNzowMVrOF0AYEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwMzozOTo1NVrOF0Ai2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA3NjQzNA==", "bodyText": "getFixedString => truncateString?", "url": "https://github.com/apache/flink/pull/11334#discussion_r390076434", "createdAt": "2020-03-10T03:27:01Z", "author": {"login": "KurtYoung"}, "path": "flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/cli/CliTableauResultView.java", "diffHunk": "@@ -276,13 +277,13 @@ private void printSingleRow(int[] colWidths, String[] cols) {\n \t\tsb.append(\"|\");\n \t\tint idx = 0;\n \t\tfor (String col : cols) {\n-\t\t\tbyte[] colBytes = getUTF8Bytes(col);\n \t\t\tsb.append(\" \");\n-\t\t\tif (colBytes.length <= colWidths[idx]) {\n-\t\t\t\tsb.append(StringUtils.repeat(' ', colWidths[idx] - colBytes.length));\n+\t\t\tint colWidth = getStringWidth(col);\n+\t\t\tif (colWidth <= colWidths[idx]) {\n+\t\t\t\tsb.append(StringUtils.repeat(' ', colWidths[idx] - colWidth));\n \t\t\t\tsb.append(col);\n \t\t\t} else {\n-\t\t\t\tsb.append(subMaxString(col, colWidths[idx]));\n+\t\t\t\tsb.append(getFixedString(col, colWidths[idx]));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbef90ead12cfccbb50a04b1f59d809df9b7fc40"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA3OTE5Mw==", "bodyText": "and second parameter can be replaced with colWidths[idx] - COLUMN_TRUNCATED_FLAG_WIDTH as targetLength", "url": "https://github.com/apache/flink/pull/11334#discussion_r390079193", "createdAt": "2020-03-10T03:39:55Z", "author": {"login": "KurtYoung"}, "path": "flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/cli/CliTableauResultView.java", "diffHunk": "@@ -276,13 +277,13 @@ private void printSingleRow(int[] colWidths, String[] cols) {\n \t\tsb.append(\"|\");\n \t\tint idx = 0;\n \t\tfor (String col : cols) {\n-\t\t\tbyte[] colBytes = getUTF8Bytes(col);\n \t\t\tsb.append(\" \");\n-\t\t\tif (colBytes.length <= colWidths[idx]) {\n-\t\t\t\tsb.append(StringUtils.repeat(' ', colWidths[idx] - colBytes.length));\n+\t\t\tint colWidth = getStringWidth(col);\n+\t\t\tif (colWidth <= colWidths[idx]) {\n+\t\t\t\tsb.append(StringUtils.repeat(' ', colWidths[idx] - colWidth));\n \t\t\t\tsb.append(col);\n \t\t\t} else {\n-\t\t\t\tsb.append(subMaxString(col, colWidths[idx]));\n+\t\t\t\tsb.append(getFixedString(col, colWidths[idx]));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA3NjQzNA=="}, "originalCommit": {"oid": "dbef90ead12cfccbb50a04b1f59d809df9b7fc40"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNzM0NzIzOnYy", "diffSide": "RIGHT", "path": "flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/cli/CliUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwMzo0MDo0MFrOF0Ajfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwMzo0MDo0MFrOF0Ajfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA3OTM1OQ==", "bodyText": "please add unit tests for both newly added methods.", "url": "https://github.com/apache/flink/pull/11334#discussion_r390079359", "createdAt": "2020-03-10T03:40:40Z", "author": {"login": "KurtYoung"}, "path": "flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/cli/CliUtils.java", "diffHunk": "@@ -111,4 +113,33 @@ public static void normalizeColumn(AttributedStringBuilder sb, String col, int m\n \t\t}\n \t\treturn typesAsString;\n \t}\n+\n+\tpublic static int getStringWidth(String str) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbef90ead12cfccbb50a04b1f59d809df9b7fc40"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNzM0NzgxOnYy", "diffSide": "RIGHT", "path": "flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/CliTableauResultViewTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwMzo0MTowMFrOF0Aj0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNDo1OTo1OFrOF064BQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA3OTQ0MA==", "bodyText": "what's this?", "url": "https://github.com/apache/flink/pull/11334#discussion_r390079440", "createdAt": "2020-03-10T03:41:00Z", "author": {"login": "KurtYoung"}, "path": "flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/CliTableauResultViewTest.java", "diffHunk": "@@ -156,19 +176,21 @@ public void testBatchResult() {\n \n \t\tview.displayBatchResults();\n \t\tview.close();\n-\n+\t\t// note: about", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbef90ead12cfccbb50a04b1f59d809df9b7fc40"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAzNDg4NQ==", "bodyText": "unused note, I'll clear it.\nThanks for your review,  I\u2019ll address soon.", "url": "https://github.com/apache/flink/pull/11334#discussion_r391034885", "createdAt": "2020-03-11T14:59:58Z", "author": {"login": "leonardBang"}, "path": "flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/CliTableauResultViewTest.java", "diffHunk": "@@ -156,19 +176,21 @@ public void testBatchResult() {\n \n \t\tview.displayBatchResults();\n \t\tview.close();\n-\n+\t\t// note: about", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA3OTQ0MA=="}, "originalCommit": {"oid": "dbef90ead12cfccbb50a04b1f59d809df9b7fc40"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyOTQyNDIxOnYy", "diffSide": "RIGHT", "path": "flink-table/flink-sql-client/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwMTo0NTo1OVrOF11Hiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwNTowNToyMlrOF13vEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk4OTEzMQ==", "bodyText": "revert this", "url": "https://github.com/apache/flink/pull/11334#discussion_r391989131", "createdAt": "2020-03-13T01:45:59Z", "author": {"login": "KurtYoung"}, "path": "flink-table/flink-sql-client/pom.xml", "diffHunk": "@@ -7,7 +7,9 @@ regarding copyright ownership.  The ASF licenses this file\n to you under the Apache License, Version 2.0 (the\n \"License\"); you may not use this file except in compliance\n with the License.  You may obtain a copy of the License at\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71e99474dc27f501c2c512e80761edd2057c00d0"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAzMjAxOA==", "bodyText": "ok, I just want to unify the format because the license header is different with other pom.xml", "url": "https://github.com/apache/flink/pull/11334#discussion_r392032018", "createdAt": "2020-03-13T05:05:22Z", "author": {"login": "leonardBang"}, "path": "flink-table/flink-sql-client/pom.xml", "diffHunk": "@@ -7,7 +7,9 @@ regarding copyright ownership.  The ASF licenses this file\n to you under the Apache License, Version 2.0 (the\n \"License\"); you may not use this file except in compliance\n with the License.  You may obtain a copy of the License at\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk4OTEzMQ=="}, "originalCommit": {"oid": "71e99474dc27f501c2c512e80761edd2057c00d0"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NDY3MzgzOnYy", "diffSide": "RIGHT", "path": "flink-table/flink-sql-client/src/main/resources/META-INF/NOTICE", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwOToyNDo1OVrOGILX7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwMTo1Njo0M1rOGIu_YQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIyODE0Mw==", "bodyText": "@KurtYoung @leonardBang I don't think icu is a BSD license. Could you please fix this, or revert the changes.", "url": "https://github.com/apache/flink/pull/11334#discussion_r411228143", "createdAt": "2020-04-20T09:24:59Z", "author": {"login": "aljoscha"}, "path": "flink-table/flink-sql-client/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -9,3 +9,4 @@ See bundled license files for details.\n \n - org.jline:jline-terminal:3.9.0\n - org.jline:jline-reader:3.9.0\n+- com.ibm.icu:icu4j:65.1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3dea1922d35f3a023fd1f70e8dfe5a13fb3f14a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2NTYzMw==", "bodyText": "@aljoscha Thanks for your feedback, you're wright that icu is not a pure BSD license, I hesitate to import it at the beginning, but decided to add it after references hive https://github.com/apache/hive/blob/master/binary-package-licenses/com.ibm.icu.icu4j-LICENSE", "url": "https://github.com/apache/flink/pull/11334#discussion_r411265633", "createdAt": "2020-04-20T10:24:00Z", "author": {"login": "leonardBang"}, "path": "flink-table/flink-sql-client/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -9,3 +9,4 @@ See bundled license files for details.\n \n - org.jline:jline-terminal:3.9.0\n - org.jline:jline-reader:3.9.0\n+- com.ibm.icu:icu4j:65.1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIyODE0Mw=="}, "originalCommit": {"oid": "b3dea1922d35f3a023fd1f70e8dfe5a13fb3f14a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMyMzk2NA==", "bodyText": "And camel using it too ,apache/camel@83ae6d4", "url": "https://github.com/apache/flink/pull/11334#discussion_r411323964", "createdAt": "2020-04-20T12:07:05Z", "author": {"login": "leonardBang"}, "path": "flink-table/flink-sql-client/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -9,3 +9,4 @@ See bundled license files for details.\n \n - org.jline:jline-terminal:3.9.0\n - org.jline:jline-reader:3.9.0\n+- com.ibm.icu:icu4j:65.1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIyODE0Mw=="}, "originalCommit": {"oid": "b3dea1922d35f3a023fd1f70e8dfe5a13fb3f14a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM0Nzg1Nw==", "bodyText": "I checked https://www.apache.org/legal/resolved.html, and ICU is in category A, isn't is sufficient?", "url": "https://github.com/apache/flink/pull/11334#discussion_r411347857", "createdAt": "2020-04-20T12:46:18Z", "author": {"login": "KurtYoung"}, "path": "flink-table/flink-sql-client/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -9,3 +9,4 @@ See bundled license files for details.\n \n - org.jline:jline-terminal:3.9.0\n - org.jline:jline-reader:3.9.0\n+- com.ibm.icu:icu4j:65.1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIyODE0Mw=="}, "originalCommit": {"oid": "b3dea1922d35f3a023fd1f70e8dfe5a13fb3f14a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ5MzQ1NQ==", "bodyText": "The license is ok to add, yes. But in this list it's listed under the BSD licenses. Icu is not licensed under a BSD license. See for example \n  \n    \n      flink/flink-dist/src/main/resources/META-INF/NOTICE\n    \n    \n         Line 20\n      in\n      4035f03\n    \n    \n    \n    \n\n        \n          \n           - commons-collections:commons-collections:3.2.2 \n        \n    \n  \n\n, which has many different blocks for different licenses.", "url": "https://github.com/apache/flink/pull/11334#discussion_r411493455", "createdAt": "2020-04-20T15:55:29Z", "author": {"login": "aljoscha"}, "path": "flink-table/flink-sql-client/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -9,3 +9,4 @@ See bundled license files for details.\n \n - org.jline:jline-terminal:3.9.0\n - org.jline:jline-reader:3.9.0\n+- com.ibm.icu:icu4j:65.1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIyODE0Mw=="}, "originalCommit": {"oid": "b3dea1922d35f3a023fd1f70e8dfe5a13fb3f14a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTgxMTY4MQ==", "bodyText": "I see what you mean, thanks", "url": "https://github.com/apache/flink/pull/11334#discussion_r411811681", "createdAt": "2020-04-21T01:56:43Z", "author": {"login": "KurtYoung"}, "path": "flink-table/flink-sql-client/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -9,3 +9,4 @@ See bundled license files for details.\n \n - org.jline:jline-terminal:3.9.0\n - org.jline:jline-reader:3.9.0\n+- com.ibm.icu:icu4j:65.1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIyODE0Mw=="}, "originalCommit": {"oid": "b3dea1922d35f3a023fd1f70e8dfe5a13fb3f14a"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 874, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}