{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyMjU0ODcw", "number": 13473, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwODowMzo1MlrOEn93hQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwOTozNjowNVrOEod2ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwMzQzNTU3OnYy", "diffSide": "RIGHT", "path": "flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionAttemptID.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwODowMzo1MlrOHYypsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwODowMzo1MlrOHYypsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTc1Nzc0NQ==", "bodyText": "need to check not null", "url": "https://github.com/apache/flink/pull/13473#discussion_r495757745", "createdAt": "2020-09-28T08:03:52Z", "author": {"login": "zhuzhurk"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionAttemptID.java", "diffHunk": "@@ -33,31 +36,46 @@\n \n \tprivate static final long serialVersionUID = -1169683445778281344L;\n \n+\tprivate final JobID jobId;\n \tprivate final ExecutionVertexID executionVertexId;\n \tprivate final int attemptNumber;\n \n \t/**\n \t * Get a random execution attempt id.\n \t */\n \tpublic ExecutionAttemptID() {\n-\t\tthis(new ExecutionVertexID(new JobVertexID(), 0), 0);\n+\t\tthis(new JobID(), new ExecutionVertexID(new JobVertexID(), 0), 0);\n \t}\n \n-\tpublic ExecutionAttemptID(ExecutionVertexID executionVertexId, int attemptNumber) {\n+\tpublic ExecutionAttemptID(JobID jobId, ExecutionVertexID executionVertexId, int attemptNumber) {\n \t\tPreconditions.checkState(attemptNumber >= 0);\n+\t\tthis.jobId = jobId;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d871e6519ed5b33b63cf34bf7454649ae19aced8"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwODY3NTk0OnYy", "diffSide": "RIGHT", "path": "flink-runtime/src/test/java/org/apache/flink/runtime/executiongraph/ExecutionGraphConstructionTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwOTozNjowNVrOHZkwnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwOTozNjowNVrOHZkwnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjU3ODcxNw==", "bodyText": "I don't see a need for an explicit catch block", "url": "https://github.com/apache/flink/pull/13473#discussion_r496578717", "createdAt": "2020-09-29T09:36:05Z", "author": {"login": "zentol"}, "path": "flink-runtime/src/test/java/org/apache/flink/runtime/executiongraph/ExecutionGraphConstructionTest.java", "diffHunk": "@@ -61,6 +66,36 @@ private ExecutionGraph createExecutionGraph() throws Exception {\n \t\treturn TestingExecutionGraphBuilder.newBuilder().build();\n \t}\n \n+\t@Test\n+\tpublic void testExecutionAttemptIdInTwoIdenticalJobsIsNotSame() throws Exception {\n+\t\tJobVertex v1 = new JobVertex(\"vertex1\");\n+\t\tJobVertex v2 = new JobVertex(\"vertex2\");\n+\t\tJobVertex v3 = new JobVertex(\"vertex3\");\n+\n+\t\tv1.setParallelism(5);\n+\t\tv2.setParallelism(7);\n+\t\tv3.setParallelism(2);\n+\n+\t\tv1.setInvokableClass(AbstractInvokable.class);\n+\t\tv2.setInvokableClass(AbstractInvokable.class);\n+\t\tv3.setInvokableClass(AbstractInvokable.class);\n+\n+\t\tList<JobVertex> ordered = new ArrayList<>(Arrays.asList(v1, v2, v3));\n+\n+\t\tExecutionGraph eg1 = createExecutionGraph();\n+\t\tExecutionGraph eg2 = createExecutionGraph();\n+\t\ttry {\n+\t\t\teg1.attachJobGraph(ordered);\n+\t\t\teg2.attachJobGraph(ordered);\n+\t\t}\n+\t\tcatch (JobException e) {\n+\t\t\te.printStackTrace();\n+\t\t\tfail(\"Job failed with exception: \" + e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef6232c564a071236900274c014325dcb24c9e97"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 181, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}