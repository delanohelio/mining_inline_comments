{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0MjUwNDA5", "number": 14468, "title": "[FLINK-20552][connectors/jdbc] JdbcDynamicTableSink doesn't sink buff\u2026", "bodyText": "What is the purpose of the change\nThis pull request make the jdbc dynamic table flush the data in buffer to table when checkpoint.\nBrief change log\n\nWrap the JdbcBatchingOutputFormat to GenericJdbcSinkFunction, make flush method can be called when snapshot.\n\nVerifying this change\nThis change added tests and can be verified as follows:\n\nAdded a unit tests for the data in buffer is flushed to database when snapshot.\n\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (yes), I add flink-streaming-java test-jar to test.\nThe public API, i.e., is any changed class annotated with @Public(Evolving): (no)\nThe serializers: (no)\nThe runtime per-record code paths (performance sensitive): (no )\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: (no)\nThe S3 file system connector: (no)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (no)", "createdAt": "2020-12-22T17:05:51Z", "url": "https://github.com/apache/flink/pull/14468", "merged": true, "mergeCommit": {"oid": "21a08ea5696c92505f85f3cba0e47e32d7c1e21d"}, "closed": true, "closedAt": "2020-12-25T02:15:47Z", "author": {"login": "meijies"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdpN4XqAFqTU1ODM3MDAxNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdpPG2HgBqjQxNDY3NjA0ODc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MzcwMDE0", "url": "https://github.com/apache/flink/pull/14468#pullrequestreview-558370014", "createdAt": "2020-12-24T06:34:02Z", "commit": {"oid": "d2b4d901d51c87824302397aa6059fc255ce57f9"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwNjozNDowMlrOILAl1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwNjozODoxM1rOILAp_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQxNDkzNA==", "bodyText": "Rename to testFlushBufferWhenCheckpoint to make the test purpose more explicitly.", "url": "https://github.com/apache/flink/pull/14468#discussion_r548414934", "createdAt": "2020-12-24T06:34:02Z", "author": {"login": "wuchong"}, "path": "flink-connectors/flink-connector-jdbc/src/test/java/org/apache/flink/connector/jdbc/table/JdbcDynamicTableSinkITCase.java", "diffHunk": "@@ -316,4 +338,39 @@ public void testReadingFromChangelogSource() throws Exception {\n \t\t\tRow.of(\"user4\", \"Tina\", \"tina@gmail.com\", new BigDecimal(\"11.30\"), new BigDecimal(\"22.60\"))\n \t\t}, DB_URL, USER_TABLE, new String[]{\"user_id\", \"user_name\", \"email\", \"balance\", \"balance2\"});\n \t}\n+\n+\t@Test\n+\tpublic void testCheckpoint() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2b4d901d51c87824302397aa6059fc255ce57f9"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQxNTk5OA==", "bodyText": "Move this after comment <!-- test dependencies --> .", "url": "https://github.com/apache/flink/pull/14468#discussion_r548415998", "createdAt": "2020-12-24T06:38:13Z", "author": {"login": "wuchong"}, "path": "flink-connectors/flink-connector-jdbc/pom.xml", "diffHunk": "@@ -109,6 +109,14 @@ under the License.\n \n \t\t<!-- Postgres test dependencies -->\n \n+\t\t<dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2b4d901d51c87824302397aa6059fc255ce57f9"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4Mzc3MDM3", "url": "https://github.com/apache/flink/pull/14468#pullrequestreview-558377037", "createdAt": "2020-12-24T06:59:14Z", "commit": {"oid": "8b758a6aa9c3f9e5f7a053096816f186f7d39ee0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da6a0ddddc1b4a1ca4cf31cfe869c7e121185c21", "author": {"user": {"login": "meijies", "name": "Jeremy Mei(\u6885\u6770)"}}, "url": "https://github.com/apache/flink/commit/da6a0ddddc1b4a1ca4cf31cfe869c7e121185c21", "committedDate": "2020-12-24T08:02:01Z", "message": "[FLINK-20552][jdbc] JdbcDynamicTableSink doesn't sink buffered data on checkpoint\n\nThis closes #14387"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8b758a6aa9c3f9e5f7a053096816f186f7d39ee0", "author": {"user": {"login": "meijies", "name": "Jeremy Mei(\u6885\u6770)"}}, "url": "https://github.com/apache/flink/commit/8b758a6aa9c3f9e5f7a053096816f186f7d39ee0", "committedDate": "2020-12-24T06:55:30Z", "message": "fix review"}, "afterCommit": {"oid": "da6a0ddddc1b4a1ca4cf31cfe869c7e121185c21", "author": {"user": {"login": "meijies", "name": "Jeremy Mei(\u6885\u6770)"}}, "url": "https://github.com/apache/flink/commit/da6a0ddddc1b4a1ca4cf31cfe869c7e121185c21", "committedDate": "2020-12-24T08:02:01Z", "message": "[FLINK-20552][jdbc] JdbcDynamicTableSink doesn't sink buffered data on checkpoint\n\nThis closes #14387"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3373, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}