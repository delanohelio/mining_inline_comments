{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3ODE5ODY3", "number": 11162, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMzowNTowNFrODkQkSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMzowODoxOVrODkQolQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MzQ2NzYxOnYy", "diffSide": "RIGHT", "path": "flink-connectors/flink-connector-elasticsearch-base/pom.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMzowNTowNFrOFwewfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMzoxMzo0M1rOFwfAmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM3OTkwMQ==", "bodyText": "Just a question. Why not the newest 5.x version?", "url": "https://github.com/apache/flink/pull/11162#discussion_r386379901", "createdAt": "2020-03-02T13:05:04Z", "author": {"login": "dawidwys"}, "path": "flink-connectors/flink-connector-elasticsearch-base/pom.xml", "diffHunk": "@@ -37,7 +37,7 @@ under the License.\n \n \t<!-- Allow users to pass custom connector versions -->\n \t<properties>\n-\t\t<elasticsearch.version>5.1.2</elasticsearch.version>\n+\t\t<elasticsearch.version>5.3.3</elasticsearch.version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60e92ee0c012f278d1820b0c9f5061864afdf15c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM4NDAyNQ==", "bodyText": "5.3 is the lowest version that has the cgroups issue fixed. 5.3.3 is the highest version in the 5.3.x family.\nI wanted to pick the lowest possible 5.x release to be compatible with as many 5.3+ releases as possible.", "url": "https://github.com/apache/flink/pull/11162#discussion_r386384025", "createdAt": "2020-03-02T13:13:43Z", "author": {"login": "rmetzger"}, "path": "flink-connectors/flink-connector-elasticsearch-base/pom.xml", "diffHunk": "@@ -37,7 +37,7 @@ under the License.\n \n \t<!-- Allow users to pass custom connector versions -->\n \t<properties>\n-\t\t<elasticsearch.version>5.1.2</elasticsearch.version>\n+\t\t<elasticsearch.version>5.3.3</elasticsearch.version>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM3OTkwMQ=="}, "originalCommit": {"oid": "60e92ee0c012f278d1820b0c9f5061864afdf15c"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MzQ3ODYxOnYy", "diffSide": "RIGHT", "path": "flink-connectors/flink-connector-elasticsearch-base/src/main/java/org/apache/flink/streaming/connectors/elasticsearch/ElasticsearchSinkBase.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMzowODoxOVrOFwe2wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMzoxNDoyM1rOFwfB0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM4MTUwNg==", "bodyText": "I am fine with how it is now. Did you consider just dropping the types of failed requests we do not know, though?\nAnyway none of those should happen as we only ever send ActionRequests.", "url": "https://github.com/apache/flink/pull/11162#discussion_r386381506", "createdAt": "2020-03-02T13:08:19Z", "author": {"login": "dawidwys"}, "path": "flink-connectors/flink-connector-elasticsearch-base/src/main/java/org/apache/flink/streaming/connectors/elasticsearch/ElasticsearchSinkBase.java", "diffHunk": "@@ -407,10 +410,19 @@ public void afterBulk(long executionId, BulkRequest request, BulkResponse respon\n \t\t\t\t\t\t\tLOG.error(\"Failed Elasticsearch item request: {}\", itemResponse.getFailureMessage(), failure);\n \n \t\t\t\t\t\t\trestStatus = itemResponse.getFailure().getStatus();\n+\t\t\t\t\t\t\tactionRequest = request.requests().get(i);\n \t\t\t\t\t\t\tif (restStatus == null) {\n-\t\t\t\t\t\t\t\tfailureHandler.onFailure(request.requests().get(i), failure, -1, failureRequestIndexer);\n+\t\t\t\t\t\t\t\tif (actionRequest instanceof ActionRequest) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60e92ee0c012f278d1820b0c9f5061864afdf15c"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM4NDMzNw==", "bodyText": "As you say, it should never happen. But if it does, it'll be a lot easier to debug, because there's an exception.", "url": "https://github.com/apache/flink/pull/11162#discussion_r386384337", "createdAt": "2020-03-02T13:14:23Z", "author": {"login": "rmetzger"}, "path": "flink-connectors/flink-connector-elasticsearch-base/src/main/java/org/apache/flink/streaming/connectors/elasticsearch/ElasticsearchSinkBase.java", "diffHunk": "@@ -407,10 +410,19 @@ public void afterBulk(long executionId, BulkRequest request, BulkResponse respon\n \t\t\t\t\t\t\tLOG.error(\"Failed Elasticsearch item request: {}\", itemResponse.getFailureMessage(), failure);\n \n \t\t\t\t\t\t\trestStatus = itemResponse.getFailure().getStatus();\n+\t\t\t\t\t\t\tactionRequest = request.requests().get(i);\n \t\t\t\t\t\t\tif (restStatus == null) {\n-\t\t\t\t\t\t\t\tfailureHandler.onFailure(request.requests().get(i), failure, -1, failureRequestIndexer);\n+\t\t\t\t\t\t\t\tif (actionRequest instanceof ActionRequest) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM4MTUwNg=="}, "originalCommit": {"oid": "60e92ee0c012f278d1820b0c9f5061864afdf15c"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 977, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}