{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzNDY2NTcz", "number": 13866, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwODo0ODoxOVrOE0SA2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwODo0ODozOFrOE0SBXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzMjU2NTM4OnYy", "diffSide": "LEFT", "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/runtime/tasks/StreamTask.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwODo0ODoxOVrOHr6-lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwOToxNTo0MVrOHr748g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgxNzExMA==", "bodyText": "Good catch. I was wondering if there is any downside to putting data into buffers before initializing state. Could it be that buffers are processed before state is initialized?", "url": "https://github.com/apache/flink/pull/13866#discussion_r515817110", "createdAt": "2020-11-02T08:48:19Z", "author": {"login": "AHeise"}, "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/runtime/tasks/StreamTask.java", "diffHunk": "@@ -502,9 +502,9 @@ protected void beforeInvoke() throws Exception {\n \t\t\t// both the following operations are protected by the lock\n \t\t\t// so that we avoid race conditions in the case that initializeState()\n \t\t\t// registers a timer, that fires before the open() is called.\n-\t\t\toperatorChain.initializeStateAndOpenOperators(createStreamTaskStateInitializer());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd18c31dd83d9cbaa5601f2fdc6f94ebc76627f7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgzMjA1MA==", "bodyText": "I don't think there are any issues with that, operators are kind of level above on ResultPartitions (and therefore should be initialized later).", "url": "https://github.com/apache/flink/pull/13866#discussion_r515832050", "createdAt": "2020-11-02T09:15:41Z", "author": {"login": "rkhachatryan"}, "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/runtime/tasks/StreamTask.java", "diffHunk": "@@ -502,9 +502,9 @@ protected void beforeInvoke() throws Exception {\n \t\t\t// both the following operations are protected by the lock\n \t\t\t// so that we avoid race conditions in the case that initializeState()\n \t\t\t// registers a timer, that fires before the open() is called.\n-\t\t\toperatorChain.initializeStateAndOpenOperators(createStreamTaskStateInitializer());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgxNzExMA=="}, "originalCommit": {"oid": "cd18c31dd83d9cbaa5601f2fdc6f94ebc76627f7"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzMjU2NjY4OnYy", "diffSide": "RIGHT", "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/runtime/tasks/StreamTask.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwODo0ODozOFrOHr6_SQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwOToxMjo0MlrOHr7yNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgxNzI4OQ==", "bodyText": "Could you please fix commit msg and PR title (\"before\")?", "url": "https://github.com/apache/flink/pull/13866#discussion_r515817289", "createdAt": "2020-11-02T08:48:38Z", "author": {"login": "AHeise"}, "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/runtime/tasks/StreamTask.java", "diffHunk": "@@ -502,9 +502,9 @@ protected void beforeInvoke() throws Exception {\n \t\t\t// both the following operations are protected by the lock", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd18c31dd83d9cbaa5601f2fdc6f94ebc76627f7"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgzMDMyNg==", "bodyText": "Done)", "url": "https://github.com/apache/flink/pull/13866#discussion_r515830326", "createdAt": "2020-11-02T09:12:42Z", "author": {"login": "rkhachatryan"}, "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/runtime/tasks/StreamTask.java", "diffHunk": "@@ -502,9 +502,9 @@ protected void beforeInvoke() throws Exception {\n \t\t\t// both the following operations are protected by the lock", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgxNzI4OQ=="}, "originalCommit": {"oid": "cd18c31dd83d9cbaa5601f2fdc6f94ebc76627f7"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 6, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}