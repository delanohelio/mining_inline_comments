{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2OTQ3MTYx", "number": 12715, "title": "[FLINK-18361] Support username and password options for new Elasticse\u2026", "bodyText": "\u2026arch connector\nCo-authored-by: zhisheng17 zhisheng2018@gmail.com\nWhat is the purpose of the change\nSupport username and password options for new Elasticsearch connector.\nNote that this PR tries to align the behavior with #11822 , so I add @zhisheng17 as co-auther.\nBrief change log\n\nAdd username and password option to new ES DynamicTableSink.\nIf both username and password configured, add a UsernamePasswordCredentials to RestClientBuilder.\n\nVerifying this change\nThis change added tests and can be verified as follows:\n\nElasticsearch7DynamicSinkTest#testAuthConfig\nElasticsearch7DynamicSinkFactoryTest#validateWrongCredential\nElasticsearch6DynamicSinkTest#testAuthConfig\nElasticsearch6DynamicSinkFactoryTest#validateWrongCredential\n\nAs the authentication logic we used is documented in ES official doc. I think Flink does not need to check it in an e2e test or integration test. However, I'll manually test it and record in this PR\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): no\nThe public API, i.e., is any changed class annotated with @Public(Evolving): no\nThe serializers: no\nThe runtime per-record code paths (performance sensitive): no\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: no\nThe S3 file system connector: no\n\nDocumentation\n\nDoes this pull request introduce a new feature? yes\nIf yes, how is the feature documented? docs", "createdAt": "2020-06-19T07:47:09Z", "url": "https://github.com/apache/flink/pull/12715", "merged": true, "mergeCommit": {"oid": "ee653778689023ddfdf007d5bde1daad8fbbc081"}, "closed": true, "closedAt": "2020-07-10T08:41:09Z", "author": {"login": "KarmaGYZ"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsuXGigBqjM0NjEzOTc4MjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczbTsXABqjM1MzIyMzUxMDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a4c399810f91fb65b6a343ba9ee49e224205c68c", "author": {"user": {"login": "KarmaGYZ", "name": "Yangze Guo"}}, "url": "https://github.com/apache/flink/commit/a4c399810f91fb65b6a343ba9ee49e224205c68c", "committedDate": "2020-06-19T07:25:19Z", "message": "[FLINK-18361] Support username and password options for new Elasticsearch connector\n\nCo-authored-by: zhisheng17 <zhisheng2018@gmail.com>"}, "afterCommit": {"oid": "918b6858ef34c185689fc79e7dd87a181a2d5488", "author": {"user": {"login": "KarmaGYZ", "name": "Yangze Guo"}}, "url": "https://github.com/apache/flink/commit/918b6858ef34c185689fc79e7dd87a181a2d5488", "committedDate": "2020-06-19T07:59:16Z", "message": "[FLINK-18361] Support username and password options for new Elasticsearch connector\n\nCo-authored-by: zhisheng17 <zhisheng2018@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "918b6858ef34c185689fc79e7dd87a181a2d5488", "author": {"user": {"login": "KarmaGYZ", "name": "Yangze Guo"}}, "url": "https://github.com/apache/flink/commit/918b6858ef34c185689fc79e7dd87a181a2d5488", "committedDate": "2020-06-19T07:59:16Z", "message": "[FLINK-18361] Support username and password options for new Elasticsearch connector\n\nCo-authored-by: zhisheng17 <zhisheng2018@gmail.com>"}, "afterCommit": {"oid": "201deb2601ce8c517d2fe6123dcded52df8d5432", "author": {"user": {"login": "KarmaGYZ", "name": "Yangze Guo"}}, "url": "https://github.com/apache/flink/commit/201deb2601ce8c517d2fe6123dcded52df8d5432", "committedDate": "2020-06-19T08:54:31Z", "message": "[FLINK-18361] Support username and password options for new Elasticsearch connector\n\nCo-authored-by: zhisheng17 <zhisheng2018@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NDcyMTcx", "url": "https://github.com/apache/flink/pull/12715#pullrequestreview-445472171", "createdAt": "2020-07-09T10:04:43Z", "commit": {"oid": "201deb2601ce8c517d2fe6123dcded52df8d5432"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMDowNDo0M1rOGvKerA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMDowNDo0M1rOGvKerA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEwNzk0OA==", "bodyText": "What do you think about adding more explanation about ES authentication here? I guess not all the users know the auth feature of Elasticsearch. For example:\nElasticsearch doesn't pre-bundled security feature, but you can enable it by following the [guideline](https://www.elastic.co/guide/en/elasticsearch/reference/7.x/configuring-security.html) to secure an Elasticsearch cluster.", "url": "https://github.com/apache/flink/pull/12715#discussion_r452107948", "createdAt": "2020-07-09T10:04:43Z", "author": {"login": "wuchong"}, "path": "docs/dev/table/connectors/elasticsearch.md", "diffHunk": "@@ -126,6 +126,20 @@ Connector Options\n       <td>String</td>\n       <td>Delimiter for composite keys (\"_\" by default), e.g., \"$\" would result in IDs \"KEY1$KEY2$KEY3\".\"</td>\n     </tr>\n+    <tr>\n+      <td><h5>username</h5></td>\n+      <td>optional</td>\n+      <td style=\"word-wrap: break-word;\">(none)</td>\n+      <td>String</td>\n+      <td>Username used to connect to Elasticsearch instance.</td>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "201deb2601ce8c517d2fe6123dcded52df8d5432"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "201deb2601ce8c517d2fe6123dcded52df8d5432", "author": {"user": {"login": "KarmaGYZ", "name": "Yangze Guo"}}, "url": "https://github.com/apache/flink/commit/201deb2601ce8c517d2fe6123dcded52df8d5432", "committedDate": "2020-06-19T08:54:31Z", "message": "[FLINK-18361] Support username and password options for new Elasticsearch connector\n\nCo-authored-by: zhisheng17 <zhisheng2018@gmail.com>"}, "afterCommit": {"oid": "53207becc1f51cca448d4cd624f26b92d114a531", "author": {"user": {"login": "KarmaGYZ", "name": "Yangze Guo"}}, "url": "https://github.com/apache/flink/commit/53207becc1f51cca448d4cd624f26b92d114a531", "committedDate": "2020-07-09T10:38:06Z", "message": "[FLINK-18361] Support username and password options for new Elasticsearch connector\n\nCo-authored-by: zhisheng17 <zhisheng2018@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTYzMzg4", "url": "https://github.com/apache/flink/pull/12715#pullrequestreview-445563388", "createdAt": "2020-07-09T12:23:15Z", "commit": {"oid": "53207becc1f51cca448d4cd624f26b92d114a531"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a6a95dc81aeb5adf24761c99bbbb59fa0f68497", "author": {"user": {"login": "KarmaGYZ", "name": "Yangze Guo"}}, "url": "https://github.com/apache/flink/commit/6a6a95dc81aeb5adf24761c99bbbb59fa0f68497", "committedDate": "2020-07-10T03:44:42Z", "message": "[FLINK-18361] Support username and password options for new Elasticsearch connector\n\nCo-authored-by: zhisheng17 <zhisheng2018@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "53207becc1f51cca448d4cd624f26b92d114a531", "author": {"user": {"login": "KarmaGYZ", "name": "Yangze Guo"}}, "url": "https://github.com/apache/flink/commit/53207becc1f51cca448d4cd624f26b92d114a531", "committedDate": "2020-07-09T10:38:06Z", "message": "[FLINK-18361] Support username and password options for new Elasticsearch connector\n\nCo-authored-by: zhisheng17 <zhisheng2018@gmail.com>"}, "afterCommit": {"oid": "6a6a95dc81aeb5adf24761c99bbbb59fa0f68497", "author": {"user": {"login": "KarmaGYZ", "name": "Yangze Guo"}}, "url": "https://github.com/apache/flink/commit/6a6a95dc81aeb5adf24761c99bbbb59fa0f68497", "committedDate": "2020-07-10T03:44:42Z", "message": "[FLINK-18361] Support username and password options for new Elasticsearch connector\n\nCo-authored-by: zhisheng17 <zhisheng2018@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3216, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}