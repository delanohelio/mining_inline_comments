{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzODE4MTAw", "number": 13872, "title": "[FLINK-19873][Formats/json]Skip DDL change events for Canal data", "bodyText": "What is the purpose of the change\nSkip DDL change events for Canal data\nBrief change log\nSkip DDL change events for Canal data\nVerifying this change\nThis change is already covered by existing tests\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (no)\nThe public API, i.e., is any changed class annotated with @Public(Evolving): (no)\nThe serializers: (no)\nThe runtime per-record code paths (performance sensitive): (no)\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: (no)\nThe S3 file system connector: (no)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (no)", "createdAt": "2020-11-02T06:17:05Z", "url": "https://github.com/apache/flink/pull/13872", "merged": true, "mergeCommit": {"oid": "25701e1a0291f331f2192c12c80a09d8c23ffb14"}, "closed": true, "closedAt": "2020-11-04T02:13:54Z", "author": {"login": "pyscala"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYl42YAFqTUyMTcwNjY4OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdY0X6aABqjM5NTE1MzU4NTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxNzA2Njg5", "url": "https://github.com/apache/flink/pull/13872#pullrequestreview-521706689", "createdAt": "2020-11-02T15:00:00Z", "commit": {"oid": "3d5c8594e0371b5d2aab6a58677ac40d1f2892a3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNTowMDowMFrOHsIAqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNTowMDowMFrOHsIAqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAzMDYzNQ==", "bodyText": "Please add a real DDL message, rather than changing a DELETE message into CREATE.", "url": "https://github.com/apache/flink/pull/13872#discussion_r516030635", "createdAt": "2020-11-02T15:00:00Z", "author": {"login": "wuchong"}, "path": "flink-formats/flink-json/src/test/resources/canal-data.txt", "diffHunk": "@@ -5,6 +5,6 @@\n {\"data\":[{\"id\":\"111\",\"name\":\"scooter\",\"description\":\"Big 2-wheel scooter \",\"weight\":\"5.18\"}],\"database\":\"inventory\",\"es\":1589373555000,\"id\":7,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":null,\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373555457,\"type\":\"INSERT\"}\n {\"data\":[{\"id\":\"110\",\"name\":\"jacket\",\"description\":\"new water resistent white wind breaker\",\"weight\":\"0.5\"}],\"database\":\"inventory\",\"es\":1589373558000,\"id\":8,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":[{\"description\":\"water resistent white wind breaker\",\"weight\":\"0.2\"}],\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373558230,\"type\":\"UPDATE\"}\n {\"data\":[{\"id\":\"111\",\"name\":\"scooter\",\"description\":\"Big 2-wheel scooter \",\"weight\":\"5.17\"}],\"database\":\"inventory\",\"es\":1589373560000,\"id\":9,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":[{\"weight\":\"5.18\"}],\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373560798,\"type\":\"UPDATE\"}\n-{\"data\":[{\"id\":\"111\",\"name\":\"scooter\",\"description\":\"Big 2-wheel scooter \",\"weight\":\"5.17\"}],\"database\":\"inventory\",\"es\":1589373563000,\"id\":10,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":null,\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373563798,\"type\":\"DELETE\"}\n+{\"data\":[{\"id\":\"111\",\"name\":\"scooter\",\"description\":\"Big 2-wheel scooter \",\"weight\":\"5.17\"}],\"database\":\"inventory\",\"es\":1589373563000,\"id\":10,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":null,\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373563798,\"type\":\"CREATE\"}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d5c8594e0371b5d2aab6a58677ac40d1f2892a3"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxNzA3Njcy", "url": "https://github.com/apache/flink/pull/13872#pullrequestreview-521707672", "createdAt": "2020-11-02T15:00:59Z", "commit": {"oid": "3d5c8594e0371b5d2aab6a58677ac40d1f2892a3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNTowMDo1OVrOHsIDZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNTowMDo1OVrOHsIDZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAzMTMzMg==", "bodyText": "Please add a comment what is an CREATE message, and why we just ignore it.", "url": "https://github.com/apache/flink/pull/13872#discussion_r516031332", "createdAt": "2020-11-02T15:00:59Z", "author": {"login": "wuchong"}, "path": "flink-formats/flink-json/src/main/java/org/apache/flink/formats/json/canal/CanalJsonDeserializationSchema.java", "diffHunk": "@@ -223,6 +224,8 @@ public void deserialize(byte[] message, Collector<RowData> out) throws IOExcepti\n \t\t\t\t\tinsert.setRowKind(RowKind.DELETE);\n \t\t\t\t\tout.collect(insert);\n \t\t\t\t}\n+\t\t\t} else if (OP_CREATE.equals(type)){\n+\t\t\t\treturn;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d5c8594e0371b5d2aab6a58677ac40d1f2892a3"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjQ2MDcz", "url": "https://github.com/apache/flink/pull/13872#pullrequestreview-522246073", "createdAt": "2020-11-03T07:50:26Z", "commit": {"oid": "930d5939c60d927f8f3c121c6c3adb817eada365"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "273f932c618f74665aeaaa83641e17a4e298c3f0", "author": {"user": {"login": "pyscala", "name": "fangliang"}}, "url": "https://github.com/apache/flink/commit/273f932c618f74665aeaaa83641e17a4e298c3f0", "committedDate": "2020-11-03T07:52:08Z", "message": "[FLINK-19873][canal-json] Skip DDL change events for Canal data\n\nThis closes #13872"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "930d5939c60d927f8f3c121c6c3adb817eada365", "author": {"user": {"login": "pyscala", "name": "fangliang"}}, "url": "https://github.com/apache/flink/commit/930d5939c60d927f8f3c121c6c3adb817eada365", "committedDate": "2020-11-03T03:32:25Z", "message": "bug fix"}, "afterCommit": {"oid": "273f932c618f74665aeaaa83641e17a4e298c3f0", "author": {"user": {"login": "pyscala", "name": "fangliang"}}, "url": "https://github.com/apache/flink/commit/273f932c618f74665aeaaa83641e17a4e298c3f0", "committedDate": "2020-11-03T07:52:08Z", "message": "[FLINK-19873][canal-json] Skip DDL change events for Canal data\n\nThis closes #13872"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4650, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}