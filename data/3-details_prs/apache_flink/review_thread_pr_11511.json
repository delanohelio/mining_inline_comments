{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNTgwNDc1", "number": 11511, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMjo1NTozMlrODr6BzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMjo1NzozMlrODr6DHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzY2MDkyOnYy", "diffSide": "RIGHT", "path": "flink-table/flink-table-planner-blink/src/test/scala/org/apache/flink/table/api/TableEnvironmentITCase.scala", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMjo1NTozMlrOF8hgWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMjo1NTozMlrOF8hgWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTAwNzgzMw==", "bodyText": "Can this reproduce by expression test?", "url": "https://github.com/apache/flink/pull/11511#discussion_r399007833", "createdAt": "2020-03-27T02:55:32Z", "author": {"login": "JingsongLi"}, "path": "flink-table/flink-table-planner-blink/src/test/scala/org/apache/flink/table/api/TableEnvironmentITCase.scala", "diffHunk": "@@ -273,6 +276,18 @@ class TableEnvironmentITCase(tableEnvName: String, isStreaming: Boolean) {\n     tableEnv.execute(\"insert dest2\")\n   }\n \n+  @Test\n+  def testCompareDecimalColWithNull(): Unit = {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8d83deb718fc09cf49e63ffefddf2ce5de444ed"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzY2NDMwOnYy", "diffSide": "RIGHT", "path": "flink-table/flink-table-planner-blink/src/main/scala/org/apache/flink/table/planner/codegen/GenerateUtils.scala", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMjo1NzozMlrOF8hiaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMzowOToxN1rOF8htxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTAwODM2Mw==", "bodyText": "Just generateLiteral?", "url": "https://github.com/apache/flink/pull/11511#discussion_r399008363", "createdAt": "2020-03-27T02:57:32Z", "author": {"login": "JingsongLi"}, "path": "flink-table/flink-table-planner-blink/src/main/scala/org/apache/flink/table/planner/codegen/GenerateUtils.scala", "diffHunk": "@@ -346,7 +346,11 @@ object GenerateUtils {\n         ctx.addReusableMember(fieldDecimal)\n         val value = Decimal.fromBigDecimal(\n           literalValue.asInstanceOf[JBigDecimal], precision, scale)\n-        generateNonNullLiteral(literalType, fieldTerm, value)\n+        if (value == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8d83deb718fc09cf49e63ffefddf2ce5de444ed"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTAxMDQ2OA==", "bodyText": "That won't work because we expect a decimal literal to be a BigDecimal. But now the value has been casted to a Decimal .", "url": "https://github.com/apache/flink/pull/11511#discussion_r399010468", "createdAt": "2020-03-27T03:05:37Z", "author": {"login": "lirui-apache"}, "path": "flink-table/flink-table-planner-blink/src/main/scala/org/apache/flink/table/planner/codegen/GenerateUtils.scala", "diffHunk": "@@ -346,7 +346,11 @@ object GenerateUtils {\n         ctx.addReusableMember(fieldDecimal)\n         val value = Decimal.fromBigDecimal(\n           literalValue.asInstanceOf[JBigDecimal], precision, scale)\n-        generateNonNullLiteral(literalType, fieldTerm, value)\n+        if (value == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTAwODM2Mw=="}, "originalCommit": {"oid": "e8d83deb718fc09cf49e63ffefddf2ce5de444ed"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTAxMTI3MQ==", "bodyText": "So we should improve generateLiteral, and I think maybe this is risk in it too.", "url": "https://github.com/apache/flink/pull/11511#discussion_r399011271", "createdAt": "2020-03-27T03:09:17Z", "author": {"login": "JingsongLi"}, "path": "flink-table/flink-table-planner-blink/src/main/scala/org/apache/flink/table/planner/codegen/GenerateUtils.scala", "diffHunk": "@@ -346,7 +346,11 @@ object GenerateUtils {\n         ctx.addReusableMember(fieldDecimal)\n         val value = Decimal.fromBigDecimal(\n           literalValue.asInstanceOf[JBigDecimal], precision, scale)\n-        generateNonNullLiteral(literalType, fieldTerm, value)\n+        if (value == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTAwODM2Mw=="}, "originalCommit": {"oid": "e8d83deb718fc09cf49e63ffefddf2ce5de444ed"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 704, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}