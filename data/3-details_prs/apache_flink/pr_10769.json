{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MzA3NjUy", "number": 10769, "title": "[FLINK-15479]Override explainSource method for JDBCTableSource", "bodyText": "What is the purpose of the change\nOverride explainSource method for JDBCTableSource.\nBrief change log\nAdd explainSource for JDBCTableSource.\nVerifying this change\n(Please pick either of the following options)\nThis change is a trivial work without any test coverage.\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (no)\nThe public API, i.e., is any changed class annotated with @Public(Evolving): (no)\nThe serializers: (no)\nThe runtime per-record code paths (performance sensitive): (no)\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: ( no)\nThe S3 file system connector: ( no)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (no)\nIf yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)", "createdAt": "2020-01-05T14:43:16Z", "url": "https://github.com/apache/flink/pull/10769", "merged": true, "mergeCommit": {"oid": "7ccc5b3c1ec25bd028ca3cd5fddf2eb141ba64fa"}, "closed": true, "closedAt": "2020-01-19T03:51:57Z", "author": {"login": "wangxlong"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb3YmjqAH2gAyMzU5MzA3NjUyOjdmZTllN2U0ZTRiNTNmODM5NjU2ZmRiMmIxYTEwNzllYzRkZTViNjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb7vrkJgFqTM0NDk3NTE2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7fe9e7e4e4b53f839656fdb2b1a1079ec4de5b68", "author": {"user": {"login": "wangxlong", "name": null}}, "url": "https://github.com/apache/flink/commit/7fe9e7e4e4b53f839656fdb2b1a1079ec4de5b68", "committedDate": "2020-01-05T14:40:36Z", "message": "[FLINK-15479]override explainSource method for JDBCTableSource"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NDU4MTg4", "url": "https://github.com/apache/flink/pull/10769#pullrequestreview-338458188", "createdAt": "2020-01-06T03:49:55Z", "commit": {"oid": "7fe9e7e4e4b53f839656fdb2b1a1079ec4de5b68"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78085a61e23ddd68f8546fb73ce6f639d98f6e42", "author": {"user": {"login": "wangxlong", "name": null}}, "url": "https://github.com/apache/flink/commit/78085a61e23ddd68f8546fb73ce6f639d98f6e42", "committedDate": "2020-01-06T07:43:51Z", "message": "[FLINK-15479]add jdbc project push down test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f9c59090ca6b17d95441dd5d1b4c86be6c01bbf", "author": {"user": {"login": "wangxlong", "name": null}}, "url": "https://github.com/apache/flink/commit/9f9c59090ca6b17d95441dd5d1b4c86be6c01bbf", "committedDate": "2020-01-06T11:30:17Z", "message": "[FLINK-15479]fix code style fail"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5ODAzNDA2", "url": "https://github.com/apache/flink/pull/10769#pullrequestreview-339803406", "createdAt": "2020-01-08T11:28:07Z", "commit": {"oid": "9f9c59090ca6b17d95441dd5d1b4c86be6c01bbf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxMToyODowN1rOFbUHrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxMToyODowN1rOFbUHrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDE4NTUxOA==", "bodyText": "I think we should add an integreation test to verify the JDBC source can work when project is pushed down.", "url": "https://github.com/apache/flink/pull/10769#discussion_r364185518", "createdAt": "2020-01-08T11:28:07Z", "author": {"login": "wuchong"}, "path": "flink-connectors/flink-jdbc/src/test/java/org/apache/flink/api/java/io/jdbc/JDBCTableSourceSinkFactoryTest.java", "diffHunk": "@@ -182,6 +184,12 @@ public void testJDBCWithFilter() {\n \t\tassertEquals(projectedFields.get(\"aaa\"), DataTypes.INT());\n \t\tassertNull(projectedFields.get(\"bbb\"));\n \t\tassertEquals(projectedFields.get(\"ccc\"), DataTypes.DOUBLE());\n+\n+\t\t// test jdbc table source description\n+\t\tList<String> fieldNames = ((RowType) actual.getProducedDataType().getLogicalType()).getFieldNames();\n+\t\tString expectedSourceDescription = actual.getClass().getSimpleName()\n+\t\t\t+ \"(\" + String.join(\", \", fieldNames.stream().toArray(String[]::new)) + \")\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9c59090ca6b17d95441dd5d1b4c86be6c01bbf"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea00615b2fcd2ad6fe9a1c03f9ba334fc23e8ddf", "author": {"user": {"login": "wangxlong", "name": null}}, "url": "https://github.com/apache/flink/commit/ea00615b2fcd2ad6fe9a1c03f9ba334fc23e8ddf", "committedDate": "2020-01-09T02:35:13Z", "message": "[FLINK-15479]Add integration test for JDBCTableSource"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMjcyODcy", "url": "https://github.com/apache/flink/pull/10769#pullrequestreview-342272872", "createdAt": "2020-01-14T03:22:52Z", "commit": {"oid": "ea00615b2fcd2ad6fe9a1c03f9ba334fc23e8ddf"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwMzoyMjo1MlrOFdLOjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwMzoyMjo1MlrOFdLOjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjEzNjk3Mg==", "bodyText": "remove empty line.", "url": "https://github.com/apache/flink/pull/10769#discussion_r366136972", "createdAt": "2020-01-14T03:22:52Z", "author": {"login": "wuchong"}, "path": "flink-connectors/flink-jdbc/src/test/java/org/apache/flink/api/java/io/jdbc/JDBCTableSourceITCase.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.flink.api.java.io.jdbc;\n+\n+import org.apache.flink.streaming.api.datastream.DataStream;\n+import org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\n+import org.apache.flink.table.api.Table;\n+import org.apache.flink.table.api.java.StreamTableEnvironment;\n+import org.apache.flink.table.runtime.utils.StreamITCase;\n+import org.apache.flink.types.Row;\n+\n+import org.junit.Test;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+/**\n+ * IT case for {@link JDBCTableSource}.\n+ */\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea00615b2fcd2ad6fe9a1c03f9ba334fc23e8ddf"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14cb254f332468bbb4e8eafc8b1304ee91ec700d", "author": {"user": {"login": "wangxlong", "name": null}}, "url": "https://github.com/apache/flink/commit/14cb254f332468bbb4e8eafc8b1304ee91ec700d", "committedDate": "2020-01-14T09:42:32Z", "message": "[FLINK-15479][CONNECTOR-JDBC]use blink planner and ddl in JDBCTableSourceITCase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86a1280f8f7bda8de006c3da514dbf28a18818d4", "author": {"user": {"login": "wangxlong", "name": null}}, "url": "https://github.com/apache/flink/commit/86a1280f8f7bda8de006c3da514dbf28a18818d4", "committedDate": "2020-01-14T09:45:17Z", "message": "[FLINK-15479][CONNECTOR-JDBC]delete useless import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e1d0a854d224d253d452ef4188ad4ff65045b39", "author": {"user": {"login": "wangxlong", "name": null}}, "url": "https://github.com/apache/flink/commit/4e1d0a854d224d253d452ef4188ad4ff65045b39", "committedDate": "2020-01-14T11:35:58Z", "message": "[FLINK-15479][CONNECTOR-JDBC]fix checkstyle failed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNTE5OTEw", "url": "https://github.com/apache/flink/pull/10769#pullrequestreview-342519910", "createdAt": "2020-01-14T13:12:52Z", "commit": {"oid": "4e1d0a854d224d253d452ef4188ad4ff65045b39"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxMzoxMjo1M1rOFdW96g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxMzoxNDoxMVrOFdXAOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjMyOTMyMg==", "bodyText": "Please use @BeforeClass instead of static code block.", "url": "https://github.com/apache/flink/pull/10769#discussion_r366329322", "createdAt": "2020-01-14T13:12:53Z", "author": {"login": "wuchong"}, "path": "flink-connectors/flink-jdbc/src/test/java/org/apache/flink/api/java/io/jdbc/JDBCTableSourceITCase.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.flink.api.java.io.jdbc;\n+\n+import org.apache.flink.streaming.api.datastream.DataStream;\n+import org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\n+import org.apache.flink.table.api.EnvironmentSettings;\n+import org.apache.flink.table.api.Table;\n+import org.apache.flink.table.api.java.StreamTableEnvironment;\n+import org.apache.flink.table.runtime.utils.StreamITCase;\n+import org.apache.flink.types.Row;\n+\n+import org.junit.Test;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+/**\n+ * IT case for {@link JDBCTableSource}.\n+ */\n+public class JDBCTableSourceITCase extends JDBCTestBase {\n+\n+\tprivate static final StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n+\tprivate static final EnvironmentSettings bsSettings = EnvironmentSettings.newInstance().useBlinkPlanner().inStreamingMode().build();\n+\tprivate static final StreamTableEnvironment tEnv = StreamTableEnvironment.create(env, bsSettings);\n+\n+\tstatic final String TABLE_SOURCE_SQL = \"CREATE TABLE books (\" +\n+\t\t\" id int, \" +\n+\t\t\" title varchar, \" +\n+\t\t\" author varchar, \" +\n+\t\t\" price double, \" +\n+\t\t\" qty int \" +\n+\t\t\") with (\" +\n+\t\t\" 'connector.type' = 'jdbc', \" +\n+\t\t\" 'connector.url' = 'jdbc:derby:memory:ebookshop', \" +\n+\t\t\" 'connector.table' = 'books', \" +\n+\t\t\" 'connector.driver' = 'org.apache.derby.jdbc.EmbeddedDriver' \" +\n+\t\t\")\";\n+\n+\tstatic {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e1d0a854d224d253d452ef4188ad4ff65045b39"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjMyOTkxNQ==", "bodyText": "Can we set the scope only for test?", "url": "https://github.com/apache/flink/pull/10769#discussion_r366329915", "createdAt": "2020-01-14T13:14:11Z", "author": {"login": "wuchong"}, "path": "flink-connectors/flink-jdbc/pom.xml", "diffHunk": "@@ -54,6 +54,14 @@ under the License.\n \t\t\t<optional>true</optional>\n \t\t</dependency>\n \n+\t\t<dependency>\n+\t\t\t<groupId>org.apache.flink</groupId>\n+\t\t\t<artifactId>flink-table-planner-blink_${scala.binary.version}</artifactId>\n+\t\t\t<version>${project.version}</version>\n+\t\t\t<scope>provided</scope>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e1d0a854d224d253d452ef4188ad4ff65045b39"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d5e177e31e0509178ac60e795178b529d04a273", "author": {"user": {"login": "wangxlong", "name": null}}, "url": "https://github.com/apache/flink/commit/7d5e177e31e0509178ac60e795178b529d04a273", "committedDate": "2020-01-14T14:31:07Z", "message": "[FLINK-15479][CONNECTOR-JDBC] change static block to beforeclass"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0OTc1MTY4", "url": "https://github.com/apache/flink/pull/10769#pullrequestreview-344975168", "createdAt": "2020-01-19T03:49:35Z", "commit": {"oid": "7d5e177e31e0509178ac60e795178b529d04a273"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4939, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}