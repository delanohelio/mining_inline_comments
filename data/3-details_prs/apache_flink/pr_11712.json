{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyNDg3NTIy", "number": 11712, "title": "[FLINK-17067][FLINK-17098][table] Refactor some interfaces of CatalogManager", "bodyText": "What is the purpose of the change\nThis PR refactor some interfaces of CatalogManager:\n\nCatalogManager#createTemporaryTable should provide [IF NOT EXISTS] semantic. The reason is discussed in FLINK-17067\nCatalogManager#createTable, createTemporaryTable should use ObjectIdentifier as its argument. The reason is discussed in FLINK-17098\n\nBrief change log\n\nbdb37a5 changes  CatalogManager#createTemporaryTable with semantic [IF NOT EXISTS] instead of [OR REPLACE]\n3d10020 changes argument of CatalogManager#createTable and createTemporaryTable by ObjectIdentifier instead of UnresolvedIdentifier\n\nVerifying this change\nThis change is already covered by existing tests\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (yes / no)\nThe public API, i.e., is any changed class annotated with @Public(Evolving): (yes / no)\nThe serializers: (yes / no / don't know)\nThe runtime per-record code paths (performance sensitive): (yes / no / don't know)\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (yes / no / don't know)\nThe S3 file system connector: (yes / no / don't know)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (yes / no)\nIf yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)", "createdAt": "2020-04-13T05:54:29Z", "url": "https://github.com/apache/flink/pull/11712", "merged": true, "mergeCommit": {"oid": "7280f98b78598f45699bd565432a8e3f89ba0608"}, "closed": true, "closedAt": "2020-04-14T01:25:35Z", "author": {"login": "docete"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXGfFBgH2gAyNDAyNDg3NTIyOjNkMTAwMjA0YTNhOWRkNWM4MDM2Mzc1OWMyYjgwZTc4ZTQ4NmMxYWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXL2MAgFqTM5MjA1ODI5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3d100204a3a9dd5c80363759c2b80e78e486c1af", "author": {"user": {"login": "docete", "name": "Zhenghua Gao"}}, "url": "https://github.com/apache/flink/commit/3d100204a3a9dd5c80363759c2b80e78e486c1af", "committedDate": "2020-04-13T03:39:43Z", "message": "[FLINK-17098][table] CatalogManager#dropTemporaryTable and dropTemporaryView should use ObjectIdentifier as its argument"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdb37a516fba1683dd7c925b6fa1d619dd7fa1fd", "author": {"user": {"login": "docete", "name": "Zhenghua Gao"}}, "url": "https://github.com/apache/flink/commit/bdb37a516fba1683dd7c925b6fa1d619dd7fa1fd", "committedDate": "2020-04-13T05:43:27Z", "message": "[FLINK-17067][table] CatalogManager#createTable and createTemporaryTable should provide consistent semantics"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMDU2NTYy", "url": "https://github.com/apache/flink/pull/11712#pullrequestreview-392056562", "createdAt": "2020-04-13T09:50:17Z", "commit": {"oid": "bdb37a516fba1683dd7c925b6fa1d619dd7fa1fd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QwOTo1MDoxN1rOGEiD3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QwOTo1MDoxN1rOGEiD3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQwNTUzMw==", "bodyText": "Minor: add test for false ignore?", "url": "https://github.com/apache/flink/pull/11712#discussion_r407405533", "createdAt": "2020-04-13T09:50:17Z", "author": {"login": "JingsongLi"}, "path": "flink-table/flink-table-planner/src/test/java/org/apache/flink/table/catalog/CatalogManagerTest.java", "diffHunk": "@@ -102,19 +102,20 @@ public void testRegisterCatalogWithExistingName() throws Exception {\n \t}\n \n \t@Test\n-\tpublic void testReplaceTemporaryTable() throws Exception {\n+\tpublic void testIgnoreTemporaryTableExists() throws Exception {\n \t\tObjectIdentifier tempIdentifier = ObjectIdentifier.of(\n \t\t\tBUILTIN_CATALOG_NAME,\n \t\t\tBUILTIN_DEFAULT_DATABASE_NAME,\n \t\t\t\"temp\");\n \t\tCatalogManager manager = root()\n \t\t\t.builtin(\n \t\t\t\tdatabase(BUILTIN_DEFAULT_DATABASE_NAME))\n-\t\t\t.temporaryTable(tempIdentifier)\n \t\t\t.build();\n \n \t\tCatalogTest.TestTable table = new CatalogTest.TestTable();\n \t\tmanager.createTemporaryTable(table, tempIdentifier, true);\n+\t\tCatalogTest.TestTable anotherTable = new CatalogTest.TestTable();\n+\t\tmanager.createTemporaryTable(anotherTable, tempIdentifier, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdb37a516fba1683dd7c925b6fa1d619dd7fa1fd"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMDU4Mjkw", "url": "https://github.com/apache/flink/pull/11712#pullrequestreview-392058290", "createdAt": "2020-04-13T09:54:29Z", "commit": {"oid": "bdb37a516fba1683dd7c925b6fa1d619dd7fa1fd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2086, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}