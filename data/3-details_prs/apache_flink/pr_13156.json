{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4MzE2MjIx", "number": 13156, "title": "[FLINK-18949][python] Support Streaming File Sink for Python DataStream API", "bodyText": "What is the purpose of the change\nThis pull request supports StreamingFileSink on Python DataStream API. Row-encoded Formats is only supported in this PR, i.e., Bulk-encoded Formats are not supported.\nBrief change log\n\nAdd StreamingFileSink on Python API.\nAdd Row-encoded Formats related APIs.\n\nVerifying this change\nThis change added tests and can be verified as follows:\n\nAdded test_stream_file_sink integration tests in test_data_stream\n\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (no)\nThe public API, i.e., is any changed class annotated with @Public(Evolving): (no)\nThe serializers: (no)\nThe runtime per-record code paths (performance sensitive): (no)\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: (no)\nThe S3 file system connector: (no)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (yes)\nIf yes, how is the feature documented? (PythonDocs)", "createdAt": "2020-08-15T13:16:19Z", "url": "https://github.com/apache/flink/pull/13156", "merged": true, "mergeCommit": {"oid": "46e04daa565854e78c3bbc9b2da23c7cddaf3d5e"}, "closed": true, "closedAt": "2020-08-18T07:46:48Z", "author": {"login": "hequn8128"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc_9e1cAFqTQ2ODk0Njc5OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAAkOQABqjM2NjQ2ODgyNTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4OTQ2Nzk4", "url": "https://github.com/apache/flink/pull/13156#pullrequestreview-468946798", "createdAt": "2020-08-18T02:20:35Z", "commit": {"oid": "2ee1d96a5033c05e21ddd43004784e63a3fd8c61"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMjoyMDozNlrOHCA9gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMjoyMDozNlrOHCA9gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg3NDk0NQ==", "bodyText": "For extensibility, it would be better to support passing a fully-qualified class name of user defined java encoder. In the future, we can provide such a common util for this series of constructors that uses either can pass a string or a java object.", "url": "https://github.com/apache/flink/pull/13156#discussion_r471874945", "createdAt": "2020-08-18T02:20:36Z", "author": {"login": "shuiqiangchen"}, "path": "flink-python/pyflink/common/serialization.py", "diffHunk": "@@ -365,3 +365,27 @@ def __init__(self, record_class: str = None, avro_schema_string: str = None):\n             j_serialization_schema = JAvroRowSerializationSchema(avro_schema_string)\n \n         super(AvroRowSerializationSchema, self).__init__(j_serialization_schema)\n+\n+\n+class Encoder(object):\n+    \"\"\"\n+    A `Encoder` is used by the streaming file sink to perform the actual writing\n+    of the incoming elements to the files in a bucket.\n+    \"\"\"\n+\n+    def __init__(self, j_encoder):\n+        self.j_encoder = j_encoder", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ee1d96a5033c05e21ddd43004784e63a3fd8c61"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ee1d96a5033c05e21ddd43004784e63a3fd8c61", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/2ee1d96a5033c05e21ddd43004784e63a3fd8c61", "committedDate": "2020-08-15T13:10:53Z", "message": "[FLINK-18949][python] Support Streaming File Sink for Python DataStream API"}, "afterCommit": {"oid": "5f32c5179e7dd108a51bdc261187966b1017b662", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/5f32c5179e7dd108a51bdc261187966b1017b662", "committedDate": "2020-08-18T02:43:43Z", "message": "Update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4OTU1NDk0", "url": "https://github.com/apache/flink/pull/13156#pullrequestreview-468955494", "createdAt": "2020-08-18T02:50:29Z", "commit": {"oid": "5f32c5179e7dd108a51bdc261187966b1017b662"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5190973a36f1dd5002922e1c17dede4f08f786e8", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/5190973a36f1dd5002922e1c17dede4f08f786e8", "committedDate": "2020-08-18T05:49:14Z", "message": "[FLINK-18949][python] Support Streaming File Sink for Python DataStream API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa6e899b08f75c99871c23d5b129af36bb655830", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/fa6e899b08f75c99871c23d5b129af36bb655830", "committedDate": "2020-08-18T05:54:54Z", "message": "Update"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5f32c5179e7dd108a51bdc261187966b1017b662", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/5f32c5179e7dd108a51bdc261187966b1017b662", "committedDate": "2020-08-18T02:43:43Z", "message": "Update"}, "afterCommit": {"oid": "fa6e899b08f75c99871c23d5b129af36bb655830", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/fa6e899b08f75c99871c23d5b129af36bb655830", "committedDate": "2020-08-18T05:54:54Z", "message": "Update"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4888, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}