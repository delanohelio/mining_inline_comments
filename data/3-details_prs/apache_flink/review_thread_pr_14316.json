{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzNDIzNjk4", "number": 14316, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwOTowMDozMFrOFBqxPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMzo0MzoxM1rOFCV_SQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3MjkzNjMxOnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-json/src/main/java/org/apache/flink/formats/json/JsonRowDataDeserializationSchema.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwOTowMDozMFrOIAcU0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjo0NjoyOFrOIAwCCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzMzNDk5NQ==", "bodyText": "I think this is a little hack. This can't handle nested types. Would be better fix this in org.apache.flink.formats.json.JsonToRowDataConverters#wrapIntoNullableConverter. And call JsonToRowDataConverters#createConverter in the constructor.", "url": "https://github.com/apache/flink/pull/14316#discussion_r537334995", "createdAt": "2020-12-07T09:00:30Z", "author": {"login": "wuchong"}, "path": "flink-formats/flink-json/src/main/java/org/apache/flink/formats/json/JsonRowDataDeserializationSchema.java", "diffHunk": "@@ -101,6 +102,9 @@ public JsonRowDataDeserializationSchema(\n \tpublic RowData deserialize(byte[] message) throws IOException {\n \t\ttry {\n \t\t\tfinal JsonNode root = objectMapper.readTree(message);\n+\t\t\tif (root instanceof MissingNode) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2ba16cf998b31ec52c2bf0ebd1be8d539aafb98"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzY1Nzg2NA==", "bodyText": "Thanks for your suggestion,i'll update it", "url": "https://github.com/apache/flink/pull/14316#discussion_r537657864", "createdAt": "2020-12-07T16:46:28Z", "author": {"login": "zhuxiaoshang"}, "path": "flink-formats/flink-json/src/main/java/org/apache/flink/formats/json/JsonRowDataDeserializationSchema.java", "diffHunk": "@@ -101,6 +102,9 @@ public JsonRowDataDeserializationSchema(\n \tpublic RowData deserialize(byte[] message) throws IOException {\n \t\ttry {\n \t\t\tfinal JsonNode root = objectMapper.readTree(message);\n+\t\t\tif (root instanceof MissingNode) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzMzNDk5NQ=="}, "originalCommit": {"oid": "b2ba16cf998b31ec52c2bf0ebd1be8d539aafb98"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4MDAxNzM3OnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-json/src/main/java/org/apache/flink/formats/json/JsonToRowDataConverters.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMzo0MzoxM1rOIBcUMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMzo0MzoxM1rOIBcUMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODM4MzQxMQ==", "bodyText": "Would be better to use jsonNode.isMissingNode() here.", "url": "https://github.com/apache/flink/pull/14316#discussion_r538383411", "createdAt": "2020-12-08T13:43:13Z", "author": {"login": "wuchong"}, "path": "flink-formats/flink-json/src/main/java/org/apache/flink/formats/json/JsonToRowDataConverters.java", "diffHunk": "@@ -368,7 +369,7 @@ private Object convertField(\n \tprivate JsonToRowDataConverter wrapIntoNullableConverter(\n \t\tJsonToRowDataConverter converter) {\n \t\treturn jsonNode -> {\n-\t\t\tif (jsonNode == null || jsonNode.isNull()) {\n+\t\t\tif (jsonNode == null || jsonNode.isNull() || jsonNode instanceof MissingNode) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fae69d73f9811547cf17e4e7308b09b00903543"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4701, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}