{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MDk4OTQx", "number": 11628, "title": "[FLINK-14504][rest] Add Cluster DataSet REST API", "bodyText": "Adds the REST API for managing cluster partitions. The collection of all cluster partitions belonging to a single data set is referred to as a \"Cluster DataSet\".\nThe API allows the user to list and delete partitions. The handlers are relatively straight-forward and pretty much just forward calls to the RM (which forwards them to the Tracker), at most converting some data-structures.\nAs a prerequisite we no longer filter incomplete data sets in PartitionTracker#listDataSets.\nWe don't have a mechanism to ensure that either all partitions of a data set are registered or the remaining partitions are released at some point.\nIn these cases the user has to step in, but without being able to list incomplete partitions there's nothing that can be done.\nTo differentiate between complete/incomplete partitions we expose the number of currently registered partitions.\nThis count is only determined when the listing is requested for performance and complexity reasons.", "createdAt": "2020-04-03T10:43:09Z", "url": "https://github.com/apache/flink/pull/11628", "merged": true, "mergeCommit": {"oid": "5da6ce8e59dd4e1de7a1820095c3ae814372f647"}, "closed": true, "closedAt": "2020-04-14T10:13:44Z", "author": {"login": "zentol"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVUuwmAFqTM4OTIxMjQ5NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXfr7rgBqjMyMzAxNzI1MzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MjEyNDk1", "url": "https://github.com/apache/flink/pull/11628#pullrequestreview-389212495", "createdAt": "2020-04-07T15:07:40Z", "commit": {"oid": "44066c510cd12ae93baf839652b1bb2b43cc8cab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNTowNzo0MFrOGCIM3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNTowNzo0MFrOGCIM3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg4NDcwMg==", "bodyText": "Maybe add marshalling tests (see RestRequestMarshallingTestBase)", "url": "https://github.com/apache/flink/pull/11628#discussion_r404884702", "createdAt": "2020-04-07T15:07:40Z", "author": {"login": "GJL"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/dataset/ClusterDataSetEntry.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.flink.runtime.rest.messages.dataset;\n+\n+import org.apache.flink.runtime.jobgraph.IntermediateDataSetID;\n+\n+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonCreator;\n+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonIgnore;\n+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonProperty;\n+\n+/**\n+ * The entry for a single cluster data set.\n+ *\n+ * @see ClusterDataSetListResponseBody\n+ */\n+class ClusterDataSetEntry {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44066c510cd12ae93baf839652b1bb2b43cc8cab"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MjEyODI0", "url": "https://github.com/apache/flink/pull/11628#pullrequestreview-389212824", "createdAt": "2020-04-07T15:08:01Z", "commit": {"oid": "44066c510cd12ae93baf839652b1bb2b43cc8cab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNTowODowMVrOGCIN2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNTowODowMVrOGCIN2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg4NDk1NQ==", "bodyText": "Can you add a real Javadoc?", "url": "https://github.com/apache/flink/pull/11628#discussion_r404884955", "createdAt": "2020-04-07T15:08:01Z", "author": {"login": "GJL"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/dataset/ClusterDataSetIdPathParameter.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.flink.runtime.rest.messages.dataset;\n+\n+import org.apache.flink.runtime.jobgraph.IntermediateDataSetID;\n+import org.apache.flink.runtime.rest.messages.ConversionException;\n+import org.apache.flink.runtime.rest.messages.MessagePathParameter;\n+import org.apache.flink.util.AbstractID;\n+import org.apache.flink.util.StringUtils;\n+\n+/**\n+ * TODO: Add javadoc.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44066c510cd12ae93baf839652b1bb2b43cc8cab"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MjE2ODI1", "url": "https://github.com/apache/flink/pull/11628#pullrequestreview-389216825", "createdAt": "2020-04-07T15:12:05Z", "commit": {"oid": "44066c510cd12ae93baf839652b1bb2b43cc8cab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNToxMjowNVrOGCIabQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNToxMjowNVrOGCIabQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg4ODE3Mw==", "bodyText": "Isn't this the same as the next line?", "url": "https://github.com/apache/flink/pull/11628#discussion_r404888173", "createdAt": "2020-04-07T15:12:05Z", "author": {"login": "GJL"}, "path": "flink-runtime/src/test/java/org/apache/flink/runtime/rest/messages/dataset/ClusterDataSetListResponseBodyTest.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.flink.runtime.rest.messages.dataset;\n+\n+import org.apache.flink.runtime.io.network.partition.DataSetMetaInfo;\n+import org.apache.flink.runtime.jobgraph.IntermediateDataSetID;\n+import org.apache.flink.runtime.rest.messages.RestResponseMarshallingTestBase;\n+import org.apache.flink.util.AbstractID;\n+import org.apache.flink.util.StringUtils;\n+\n+import org.junit.Test;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.collection.IsCollectionWithSize.hasSize;\n+import static org.junit.Assert.assertEquals;\n+\n+/**\n+ * Tests for {@link ClusterDataSetListResponseBody}.\n+ */\n+public class ClusterDataSetListResponseBodyTest extends RestResponseMarshallingTestBase<ClusterDataSetListResponseBody> {\n+\n+\t@Test\n+\tpublic void testFrom() {\n+\t\tfinal Map<IntermediateDataSetID, DataSetMetaInfo> originalDataSets = new HashMap<>();\n+\t\toriginalDataSets.put(new IntermediateDataSetID(), DataSetMetaInfo.withNumRegisteredPartitions(1, 2));\n+\t\toriginalDataSets.put(new IntermediateDataSetID(), DataSetMetaInfo.withNumRegisteredPartitions(2, 2));\n+\n+\t\tList<ClusterDataSetEntry> convertedDataSets = ClusterDataSetListResponseBody.from(originalDataSets).getDataSets();\n+\t\tassertThat(convertedDataSets, hasSize(2));\n+\t\tfor (ClusterDataSetEntry convertedDataSet : convertedDataSets) {\n+\t\t\tIntermediateDataSetID id = new IntermediateDataSetID(new AbstractID(StringUtils.hexStringToByte(convertedDataSet.getDataSetId())));\n+\n+\t\t\tDataSetMetaInfo dataSetMetaInfo = originalDataSets.get(id);\n+\n+\t\t\tassertThat(convertedDataSet.isComplete(), is(dataSetMetaInfo.getNumRegisteredPartitions().orElse(0) == dataSetMetaInfo.getNumTotalPartitions()));\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tprotected Class<ClusterDataSetListResponseBody> getTestResponseClass() {\n+\t\treturn ClusterDataSetListResponseBody.class;\n+\t}\n+\n+\t@Override\n+\tprotected ClusterDataSetListResponseBody getTestResponseInstance() throws Exception {\n+\t\tfinal Map<IntermediateDataSetID, DataSetMetaInfo> dataSets = new HashMap<>();\n+\t\tdataSets.put(new IntermediateDataSetID(), DataSetMetaInfo.withNumRegisteredPartitions(1, 2));\n+\t\treturn ClusterDataSetListResponseBody.from(dataSets);\n+\t}\n+\n+\t@Override\n+\tprotected void assertOriginalEqualsToUnmarshalled(ClusterDataSetListResponseBody expected, ClusterDataSetListResponseBody actual) {\n+\t\tfinal List<ClusterDataSetEntry> expectedDataSets = expected.getDataSets();\n+\t\tfinal List<ClusterDataSetEntry> actualDataSets = actual.getDataSets();\n+\t\tassertEquals(expectedDataSets.size(), actualDataSets.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44066c510cd12ae93baf839652b1bb2b43cc8cab"}, "originalPosition": 75}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NzI4Mjkx", "url": "https://github.com/apache/flink/pull/11628#pullrequestreview-389728291", "createdAt": "2020-04-08T07:46:49Z", "commit": {"oid": "e071af4be0adcd11c4faf92c7b9eb32af4cf68a5"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwNzo0Njo0OVrOGCi9kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwODozNTozOFrOGCkvkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTMyMzE1Mg==", "bodyText": "commit message has a typo: just happened to only by used by TaskExecutor related handlers.", "url": "https://github.com/apache/flink/pull/11628#discussion_r405323152", "createdAt": "2020-04-08T07:46:49Z", "author": {"login": "GJL"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/handler/resourcemanager/AbstractResourceManagerHandler.java", "diffHunk": "@@ -16,7 +16,7 @@\n  * limitations under the License.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e071af4be0adcd11c4faf92c7b9eb32af4cf68a5"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTM1MDIzNw==", "bodyText": "What naming convention are we following for JSON fields? So far we have:\n\nsnake_case\nkebab-case\ncamelCase", "url": "https://github.com/apache/flink/pull/11628#discussion_r405350237", "createdAt": "2020-04-08T08:32:13Z", "author": {"login": "GJL"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/dataset/ClusterDataSetEntry.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.flink.runtime.rest.messages.dataset;\n+\n+import org.apache.flink.runtime.jobgraph.IntermediateDataSetID;\n+\n+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonCreator;\n+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonIgnore;\n+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonProperty;\n+\n+/**\n+ * The entry for a single cluster data set.\n+ *\n+ * @see ClusterDataSetListResponseBody\n+ */\n+class ClusterDataSetEntry {\n+\tprivate static final String FIELD_NAME_DATA_SET_ID = \"id\";\n+\tprivate static final String FIELD_NAME_COMPLETE = \"isComplete\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44066c510cd12ae93baf839652b1bb2b43cc8cab"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTM1MjMzNw==", "bodyText": "It seems we are listing data sets and not partitions. Maybe ClusterDataSetListHandler would be a better name.\nI also wanted to ask if we are no longer implementing the Public Interface as described in the FLIP: https://cwiki.apache.org/confluence/display/FLINK/FLIP-67%3A+Cluster+partitions+lifecycle", "url": "https://github.com/apache/flink/pull/11628#discussion_r405352337", "createdAt": "2020-04-08T08:35:38Z", "author": {"login": "GJL"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/rest/handler/dataset/ClusterDataSetPartitionListHandler.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.flink.runtime.rest.handler.dataset;\n+\n+import org.apache.flink.api.common.time.Time;\n+import org.apache.flink.runtime.resourcemanager.ResourceManagerGateway;\n+import org.apache.flink.runtime.rest.handler.HandlerRequest;\n+import org.apache.flink.runtime.rest.handler.RestHandlerException;\n+import org.apache.flink.runtime.rest.handler.resourcemanager.AbstractResourceManagerHandler;\n+import org.apache.flink.runtime.rest.messages.EmptyMessageParameters;\n+import org.apache.flink.runtime.rest.messages.EmptyRequestBody;\n+import org.apache.flink.runtime.rest.messages.dataset.ClusterDataSetListHeaders;\n+import org.apache.flink.runtime.rest.messages.dataset.ClusterDataSetListResponseBody;\n+import org.apache.flink.runtime.webmonitor.RestfulGateway;\n+import org.apache.flink.runtime.webmonitor.retriever.GatewayRetriever;\n+\n+import javax.annotation.Nonnull;\n+\n+import java.util.Map;\n+import java.util.concurrent.CompletableFuture;\n+\n+/**\n+ * Handler for {@link ClusterDataSetListHeaders}.\n+ */\n+public class ClusterDataSetPartitionListHandler extends AbstractResourceManagerHandler<RestfulGateway, EmptyRequestBody, ClusterDataSetListResponseBody, EmptyMessageParameters> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44066c510cd12ae93baf839652b1bb2b43cc8cab"}, "originalPosition": 40}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44066c510cd12ae93baf839652b1bb2b43cc8cab", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/44066c510cd12ae93baf839652b1bb2b43cc8cab", "committedDate": "2020-04-03T10:27:32Z", "message": "[FLINK-14504][rest] Add Cluster DataSet REST API"}, "afterCommit": {"oid": "af45e70138c247e8a3ff2fe2d1b1f82e8905f61f", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/af45e70138c247e8a3ff2fe2d1b1f82e8905f61f", "committedDate": "2020-04-08T10:01:34Z", "message": "Rename list handler"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNTc5NjEz", "url": "https://github.com/apache/flink/pull/11628#pullrequestreview-390579613", "createdAt": "2020-04-09T08:13:02Z", "commit": {"oid": "a03a672c3fe931e9f4d0c67ea171db7e46a79070"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwODoxMzowMlrOGDON8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwODoxNjoxMlrOGDOVNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjAzMTg1Nw==", "bodyText": "Currently, if this value is absent, we always convert it to 0 for the user. Moreover, numRegisteredPartitions must be greater than 0 if  numRegisteredPartitions is passed from outside. Can you explain why an Optional<Integer> is needed? Why not directly return 0 if numRegisteredPartitions is unknown?", "url": "https://github.com/apache/flink/pull/11628#discussion_r406031857", "createdAt": "2020-04-09T08:13:02Z", "author": {"login": "GJL"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/io/network/partition/DataSetMetaInfo.java", "diffHunk": "@@ -17,18 +17,42 @@\n \n package org.apache.flink.runtime.io.network.partition;\n \n+import org.apache.flink.annotation.VisibleForTesting;\n+import org.apache.flink.util.Preconditions;\n+\n+import java.util.Optional;\n+\n /**\n  * Container for meta-data of a data set.\n  */\n public final class DataSetMetaInfo {\n+\tprivate static final int UNKNOWN = -1;\n \n+\tprivate final int numRegisteredPartitions;\n \tprivate final int numTotalPartitions;\n \n-\tpublic DataSetMetaInfo(int numTotalPartitions) {\n+\tprivate DataSetMetaInfo(int numRegisteredPartitions, int numTotalPartitions) {\n+\t\tthis.numRegisteredPartitions = numRegisteredPartitions;\n \t\tthis.numTotalPartitions = numTotalPartitions;\n \t}\n \n+\tpublic Optional<Integer> getNumRegisteredPartitions() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a03a672c3fe931e9f4d0c67ea171db7e46a79070"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjAzMzcxOQ==", "bodyText": "Maybe use matchers from the same package\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import static org.hamcrest.CoreMatchers.is;\n          \n          \n            \n            import static org.hamcrest.MatcherAssert.assertThat;\n          \n          \n            \n            import static org.hamcrest.collection.IsCollectionWithSize.hasSize;\n          \n          \n            \n            import static org.hamcrest.MatcherAssert.assertThat;\n          \n          \n            \n            import static org.hamcrest.Matchers.hasSize;\n          \n          \n            \n            import static org.hamcrest.Matchers.is;", "url": "https://github.com/apache/flink/pull/11628#discussion_r406033719", "createdAt": "2020-04-09T08:16:12Z", "author": {"login": "GJL"}, "path": "flink-runtime/src/test/java/org/apache/flink/runtime/rest/messages/dataset/ClusterDataSetListResponseBodyTest.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.flink.runtime.rest.messages.dataset;\n+\n+import org.apache.flink.runtime.io.network.partition.DataSetMetaInfo;\n+import org.apache.flink.runtime.jobgraph.IntermediateDataSetID;\n+import org.apache.flink.runtime.rest.messages.RestResponseMarshallingTestBase;\n+import org.apache.flink.util.AbstractID;\n+import org.apache.flink.util.StringUtils;\n+\n+import org.junit.Test;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.collection.IsCollectionWithSize.hasSize;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a03a672c3fe931e9f4d0c67ea171db7e46a79070"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96ef850bcf5c2d7fd006dc17728fe4232aeddead", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/96ef850bcf5c2d7fd006dc17728fe4232aeddead", "committedDate": "2020-04-14T08:41:37Z", "message": "[FLINK-14504][rest] Rename AbstractTaskManagerHandler\n\nThe name was misleading since the handler only interacts with the ResourceManager, and just happened to only be used by TaskExecutor-related handlers."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e07c9f31842913bb72a7016de8b53e47fcfe176", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/1e07c9f31842913bb72a7016de8b53e47fcfe176", "committedDate": "2020-04-14T08:41:37Z", "message": "[FLINK-14504][runtime] List incomplete data sets\n\nWe don't have a mechanism to ensure that either all partitions of a data set are registered or the remaining partitions are released at some point.\nIn these cases the user has to step in, but without being able to list incomplete partitions there's nothing that can be done.\nThis commit relaxes the filtering, and introduces an additional optional count for the number of currently registered partitions.\nThis count is only determined when the listing is requested for performance and complexity reasons."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4ddb90b777c6fd5114be645c94c746925759324", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/b4ddb90b777c6fd5114be645c94c746925759324", "committedDate": "2020-04-14T08:41:37Z", "message": "[FLINK-14504][runtime] Introduce ClusterPartitionManager interface"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "02a51d0359150d40fdba9041254d318e55c00ae5", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/02a51d0359150d40fdba9041254d318e55c00ae5", "committedDate": "2020-04-09T08:41:47Z", "message": "imports"}, "afterCommit": {"oid": "741035b0246d8dac0c017deaa08bcb01bff21a5d", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/741035b0246d8dac0c017deaa08bcb01bff21a5d", "committedDate": "2020-04-14T08:41:38Z", "message": "[FLINK-14504][rest] Add Cluster DataSet REST API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d71751b713e1dab880521ea6afc949a8b18b90e6", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/d71751b713e1dab880521ea6afc949a8b18b90e6", "committedDate": "2020-04-14T09:01:09Z", "message": "[FLINK-14504][rest] Add Cluster DataSet REST API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "741035b0246d8dac0c017deaa08bcb01bff21a5d", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/741035b0246d8dac0c017deaa08bcb01bff21a5d", "committedDate": "2020-04-14T08:41:38Z", "message": "[FLINK-14504][rest] Add Cluster DataSet REST API"}, "afterCommit": {"oid": "d71751b713e1dab880521ea6afc949a8b18b90e6", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/d71751b713e1dab880521ea6afc949a8b18b90e6", "committedDate": "2020-04-14T09:01:09Z", "message": "[FLINK-14504][rest] Add Cluster DataSet REST API"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2289, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}