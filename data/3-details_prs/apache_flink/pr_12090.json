{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MzY4NjY3", "number": 12090, "title": "[FLINK-17622][connectors / jdbc] Remove useless switch for decimal in PostgresCatalog", "bodyText": "What is the purpose of the change\nThis pull request remove 2 useless constants and switch clauses in the PostgresCatalog class.\nBrief change log\nThe decimal fields are returned as numeric by the Postgres JDBC driver. The code to verify this fact are introduced in the pull request #11900.\nVerifying this change\nThis change is a trivial rework / code cleanup without any test coverage.\nHowever serial type is auto-incremented: you can write a value into it but if you try to autogenerate a value you get duplicate values until you find a value that is not already in use. However Flink does not keep track of the original field type so there's no way to warn the user that is not using this field correctly (he/she should use DEFAULT or not specify any value for such columns).\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): no\nThe public API, i.e., is any changed class annotated with @Public(Evolving): no\nThe serializers: no\nThe runtime per-record code paths (performance sensitive): no\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: no\nThe S3 file system connector: no\n\nDocumentation\n\nDoes this pull request introduce a new feature? no\nIf yes, how is the feature documented? not documented", "createdAt": "2020-05-11T21:53:29Z", "url": "https://github.com/apache/flink/pull/12090", "merged": true, "mergeCommit": {"oid": "d7fc0d0620eae583ac71352e884e38affcc9f9e9"}, "closed": true, "closedAt": "2020-05-20T11:53:36Z", "author": {"login": "fpompermaier"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchxuxSgBqjMzNDMzMjYwMjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjDNpPgFqTQxNTAzMDkzOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46e40339d114c04bdefa7d296f79193c6156c165", "author": {"user": {"login": "fpompermaier", "name": "Flavio Pompermaier"}}, "url": "https://github.com/apache/flink/commit/46e40339d114c04bdefa7d296f79193c6156c165", "committedDate": "2020-05-11T21:47:12Z", "message": "[FLINK-17622][connectors / jdbc] Remove useless switch for decimal in PostresCatalog"}, "afterCommit": {"oid": "571fa7b8465f82b73e1d1b78fb765fda4ec3a338", "author": {"user": {"login": "fpompermaier", "name": "Flavio Pompermaier"}}, "url": "https://github.com/apache/flink/commit/571fa7b8465f82b73e1d1b78fb765fda4ec3a338", "committedDate": "2020-05-16T07:41:41Z", "message": "[FLINK-17622][connectors / jdbc] Remove useless switch for decimal in PostgresCatalog"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MTU4Nzg3", "url": "https://github.com/apache/flink/pull/12090#pullrequestreview-414158787", "createdAt": "2020-05-19T07:09:56Z", "commit": {"oid": "571fa7b8465f82b73e1d1b78fb765fda4ec3a338"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwNzowOTo1NlrOGXSsQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwNzowOTo1NlrOGXSsQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzA3NjY3NQ==", "bodyText": "The note looks strange after we removed decimal switch, how about remove this note or list all alias :\n\n// Postgres jdbc driver maps several alias to real type, we use real type rather than alias.\n// smallint <=> int2\n// integer <=> int4\n// int <=> int4\n// bigint <=> int8\n// float <=> float8\n// boolean <=> bool\n// decimal <=> numeric", "url": "https://github.com/apache/flink/pull/12090#discussion_r427076675", "createdAt": "2020-05-19T07:09:56Z", "author": {"login": "leonardBang"}, "path": "flink-connectors/flink-connector-jdbc/src/main/java/org/apache/flink/connector/jdbc/catalog/PostgresCatalog.java", "diffHunk": "@@ -258,6 +256,8 @@ private DataType fromJDBCType(ResultSetMetaData metadata, int colIndex) throws S\n \t\tint precision = metadata.getPrecision(colIndex);\n \t\tint scale = metadata.getScale(colIndex);\n \n+\t\t// pg types that gets replaced by jdbc driver:\n+\t    // - decimal => numeric", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "571fa7b8465f82b73e1d1b78fb765fda4ec3a338"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6f506b50b8728300915c3353e606a807ac1c0c5", "author": {"user": {"login": "fpompermaier", "name": "Flavio Pompermaier"}}, "url": "https://github.com/apache/flink/commit/c6f506b50b8728300915c3353e606a807ac1c0c5", "committedDate": "2020-05-19T12:20:28Z", "message": "[FLINK-17622][connectors / jdbc] Remove useless switch for decimal in\nPostgresCatalog"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "571fa7b8465f82b73e1d1b78fb765fda4ec3a338", "author": {"user": {"login": "fpompermaier", "name": "Flavio Pompermaier"}}, "url": "https://github.com/apache/flink/commit/571fa7b8465f82b73e1d1b78fb765fda4ec3a338", "committedDate": "2020-05-16T07:41:41Z", "message": "[FLINK-17622][connectors / jdbc] Remove useless switch for decimal in PostgresCatalog"}, "afterCommit": {"oid": "c6f506b50b8728300915c3353e606a807ac1c0c5", "author": {"user": {"login": "fpompermaier", "name": "Flavio Pompermaier"}}, "url": "https://github.com/apache/flink/commit/c6f506b50b8728300915c3353e606a807ac1c0c5", "committedDate": "2020-05-19T12:20:28Z", "message": "[FLINK-17622][connectors / jdbc] Remove useless switch for decimal in\nPostgresCatalog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29252f270a654406deb02ed0f0e552605c476b68", "author": {"user": {"login": "wuchong", "name": "Jark Wu"}}, "url": "https://github.com/apache/flink/commit/29252f270a654406deb02ed0f0e552605c476b68", "committedDate": "2020-05-20T06:35:02Z", "message": "add reference to postgres jdbc type definition"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1MDMwOTM4", "url": "https://github.com/apache/flink/pull/12090#pullrequestreview-415030938", "createdAt": "2020-05-20T06:38:03Z", "commit": {"oid": "29252f270a654406deb02ed0f0e552605c476b68"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4300, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}