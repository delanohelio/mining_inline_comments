{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1ODA1NzA3", "number": 13685, "title": "[FLINK-19702][hive] Avoid using HiveConf::hiveSiteURL", "bodyText": "What is the purpose of the change\nAvoid using HiveConf::hiveSiteURL when creating HiveConf for HiveCatalog.\nBrief change log\n\nCall HiveConf::addResource to add user-specified hive conf file.\nUpdate test to verify previous usage, i.e. local FS file, still works\n\nVerifying this change\nUpdated test\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): no\nThe public API, i.e., is any changed class annotated with @Public(Evolving): no\nThe serializers: no\nThe runtime per-record code paths (performance sensitive): no\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: no\nThe S3 file system connector: no\n\nDocumentation\n\nDoes this pull request introduce a new feature? no\nIf yes, how is the feature documented? NA", "createdAt": "2020-10-19T08:53:25Z", "url": "https://github.com/apache/flink/pull/13685", "merged": true, "mergeCommit": {"oid": "28e937a3d9a5ef507bd90d9512b5ea6ab4cee37d"}, "closed": true, "closedAt": "2020-10-29T08:12:30Z", "author": {"login": "lirui-apache"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWn-yjgBqjM5MjU2MDQxODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXMJ7gAFqTUxOTM2NDk5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ac115809457dcf47c3c60d1f098d9c5817044497", "author": {"user": {"login": "lirui-apache", "name": "Rui Li"}}, "url": "https://github.com/apache/flink/commit/ac115809457dcf47c3c60d1f098d9c5817044497", "committedDate": "2020-10-19T08:49:15Z", "message": "[FLINK-19702][hive] Avoid using HiveConf::hiveSiteURL"}, "afterCommit": {"oid": "3d45d334af2088324327734d65e9cbe599a533c4", "author": {"user": {"login": "lirui-apache", "name": "Rui Li"}}, "url": "https://github.com/apache/flink/commit/3d45d334af2088324327734d65e9cbe599a533c4", "committedDate": "2020-10-27T11:56:28Z", "message": "[FLINK-19702][hive] Avoid using HiveConf::hiveSiteURL"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4Mjk5Mzcw", "url": "https://github.com/apache/flink/pull/13685#pullrequestreview-518299370", "createdAt": "2020-10-28T03:28:59Z", "commit": {"oid": "3d45d334af2088324327734d65e9cbe599a533c4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMzoyODo1OVrOHpYs1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMzoyODo1OVrOHpYs1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE1ODM1Ng==", "bodyText": "Maybe you should use new File(..).toURI()", "url": "https://github.com/apache/flink/pull/13685#discussion_r513158356", "createdAt": "2020-10-28T03:28:59Z", "author": {"login": "JingsongLi"}, "path": "flink-connectors/flink-connector-hive/src/main/java/org/apache/flink/table/catalog/hive/HiveCatalog.java", "diffHunk": "@@ -214,7 +202,19 @@ private static HiveConf createHiveConf(@Nullable String hiveConfDir, @Nullable S\n \t\t} else {\n \t\t\thadoopConf = getHadoopConfiguration(hadoopConfDir);\n \t\t}\n-\t\treturn new HiveConf(hadoopConf == null ? new Configuration() : hadoopConf, HiveConf.class);\n+\t\tHiveConf hiveConf = new HiveConf(hadoopConf == null ? new Configuration() : hadoopConf, HiveConf.class);\n+\n+\t\tLOG.info(\"Setting hive conf dir as {}\", hiveConfDir);\n+\n+\t\tif (hiveConfDir != null) {\n+\t\t\tPath hiveSite = new Path(hiveConfDir, \"hive-site.xml\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d45d334af2088324327734d65e9cbe599a533c4"}, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d45d334af2088324327734d65e9cbe599a533c4", "author": {"user": {"login": "lirui-apache", "name": "Rui Li"}}, "url": "https://github.com/apache/flink/commit/3d45d334af2088324327734d65e9cbe599a533c4", "committedDate": "2020-10-27T11:56:28Z", "message": "[FLINK-19702][hive] Avoid using HiveConf::hiveSiteURL"}, "afterCommit": {"oid": "b49b477343603ef7568ec9c1de8c59807d85d232", "author": {"user": {"login": "lirui-apache", "name": "Rui Li"}}, "url": "https://github.com/apache/flink/commit/b49b477343603ef7568ec9c1de8c59807d85d232", "committedDate": "2020-10-28T13:30:26Z", "message": "add input stream as resource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "380912d40fc1213d88483eab06b3c2fb39284d42", "author": {"user": {"login": "lirui-apache", "name": "Rui Li"}}, "url": "https://github.com/apache/flink/commit/380912d40fc1213d88483eab06b3c2fb39284d42", "committedDate": "2020-10-29T03:36:08Z", "message": "[FLINK-19702][hive] Avoid using HiveConf::hiveSiteURL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70d18351b010c737c4dad8562a810fb50851f932", "author": {"user": {"login": "lirui-apache", "name": "Rui Li"}}, "url": "https://github.com/apache/flink/commit/70d18351b010c737c4dad8562a810fb50851f932", "committedDate": "2020-10-29T03:36:08Z", "message": "add input stream as resource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c973d952e126afd81b88646af666713e30835f0", "author": {"user": {"login": "lirui-apache", "name": "Rui Li"}}, "url": "https://github.com/apache/flink/commit/5c973d952e126afd81b88646af666713e30835f0", "committedDate": "2020-10-29T03:36:08Z", "message": "add test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b49b477343603ef7568ec9c1de8c59807d85d232", "author": {"user": {"login": "lirui-apache", "name": "Rui Li"}}, "url": "https://github.com/apache/flink/commit/b49b477343603ef7568ec9c1de8c59807d85d232", "committedDate": "2020-10-28T13:30:26Z", "message": "add input stream as resource"}, "afterCommit": {"oid": "5c973d952e126afd81b88646af666713e30835f0", "author": {"user": {"login": "lirui-apache", "name": "Rui Li"}}, "url": "https://github.com/apache/flink/commit/5c973d952e126afd81b88646af666713e30835f0", "committedDate": "2020-10-29T03:36:08Z", "message": "add test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MzY0OTky", "url": "https://github.com/apache/flink/pull/13685#pullrequestreview-519364992", "createdAt": "2020-10-29T06:27:12Z", "commit": {"oid": "5c973d952e126afd81b88646af666713e30835f0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2883, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}