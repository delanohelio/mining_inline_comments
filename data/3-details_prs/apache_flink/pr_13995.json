{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3NjE1ODk4", "number": 13995, "title": "[FLINK-20055] [runtime/config] - hide sensitive datadog API key from logs", "bodyText": "What is the purpose of the change\nAdd new entry to list of SENSITIVE configuration parameters, so that the Datadog API key is not leaked into logs.\nBrief change log\n\nadded metrics.reporter.dghttp.apikey to list of sensitive keys\n\nVerifying this change\nThis change added a new test and can be verified by starting a Flink cluster with config key metrics.reporter.dghttp.apikey: XYZ and observing in the log file that the sensitive value is not printed.\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): no\nThe public API, i.e., is any changed class annotated with @Public(Evolving): no\nThe serializers: no\nThe runtime per-record code paths (performance sensitive): no\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: no\nThe S3 file system connector: no\n\nDocumentation\n\nDoes this pull request introduce a new feature? no\nIf yes, how is the feature documented? not applicable", "createdAt": "2020-11-09T09:24:16Z", "url": "https://github.com/apache/flink/pull/13995", "merged": true, "mergeCommit": {"oid": "de527fdeec3887f6148ef3dfe7b2a024ec292522"}, "closed": true, "closedAt": "2020-12-02T22:47:39Z", "author": {"login": "florianakos"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdawv0-gH2gAyNTE3NjE1ODk4OjAyYTQ1ZjE3NTNiNWI3ZTE4NDBhYjI3ZDdhOWUzMzg4YzQ5ODNiMjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiWigsAH2gAyNTE3NjE1ODk4OjZjZjMzYTE0NDNhMjUwZDVhODg5OTBkYjUzM2ZlMTFhNGFhOTU3ZWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "02a45f1753b5b7e1840ab27d7a9e3388c4983b21", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/02a45f1753b5b7e1840ab27d7a9e3388c4983b21", "committedDate": "2020-11-09T08:46:57Z", "message": "FLINK-20055 - add datadog apikey config to array of sensitive keys"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55c50af073469fc4ef4d7f94f9ba661ce81f3196", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/55c50af073469fc4ef4d7f94f9ba661ce81f3196", "committedDate": "2020-11-09T08:50:42Z", "message": "FLINK-20055 - add test to verify dd api key is treated sensitive"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68fb2d03e2b4181ca4dc5be564dbdfdc58f0ab54", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/68fb2d03e2b4181ca4dc5be564dbdfdc58f0ab54", "committedDate": "2020-11-09T09:15:26Z", "message": "FLINK-20055 - fix whitespace"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwODQ5ODA5", "url": "https://github.com/apache/flink/pull/13995#pullrequestreview-540849809", "createdAt": "2020-11-30T12:10:48Z", "commit": {"oid": "68fb2d03e2b4181ca4dc5be564dbdfdc58f0ab54"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMjoxMDo0OFrOH74XIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMjoxMDo0OFrOH74XIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU1MTQ1Nw==", "bodyText": "This is too specific. The dghttp infix is arbitrary; users are free to use any value here.\napikey on it's own should be sufficient.", "url": "https://github.com/apache/flink/pull/13995#discussion_r532551457", "createdAt": "2020-11-30T12:10:48Z", "author": {"login": "zentol"}, "path": "flink-core/src/main/java/org/apache/flink/configuration/GlobalConfiguration.java", "diffHunk": "@@ -44,7 +44,8 @@\n \tpublic static final String FLINK_CONF_FILENAME = \"flink-conf.yaml\";\n \n \t// the keys whose values should be hidden\n-\tprivate static final String[] SENSITIVE_KEYS = new String[] {\"password\", \"secret\", \"fs.azure.account.key\"};\n+\tprivate static final String[] SENSITIVE_KEYS = new String[] {\"password\", \"secret\",\n+\t\t\"fs.azure.account.key\", \"metrics.reporter.dghttp.apikey\"};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68fb2d03e2b4181ca4dc5be564dbdfdc58f0ab54"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3536c698c6b9d80c3f959f5e5bc9c4e98fcb6671", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/3536c698c6b9d80c3f959f5e5bc9c4e98fcb6671", "committedDate": "2020-12-01T11:46:06Z", "message": "FLINK-20055 - change the new key to be just 'apikey'"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a6d24de26290ef0489c758e667281b0b96ad9ea1", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/a6d24de26290ef0489c758e667281b0b96ad9ea1", "committedDate": "2020-12-01T11:44:19Z", "message": "FLINK-20055 - add test to verify dd api key is treated sensitive"}, "afterCommit": {"oid": "3536c698c6b9d80c3f959f5e5bc9c4e98fcb6671", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/3536c698c6b9d80c3f959f5e5bc9c4e98fcb6671", "committedDate": "2020-12-01T11:46:06Z", "message": "FLINK-20055 - change the new key to be just 'apikey'"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMzAwOTU0", "url": "https://github.com/apache/flink/pull/13995#pullrequestreview-543300954", "createdAt": "2020-12-02T22:46:11Z", "commit": {"oid": "3536c698c6b9d80c3f959f5e5bc9c4e98fcb6671"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMjo0NjoxMVrOH9xUlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMjo0NjoxMVrOH9xUlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDUzMzI3MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tprivate static final String[] SENSITIVE_KEYS = new String[] {\"password\", \"secret\",\n          \n          \n            \n            \t\t\"fs.azure.account.key\", \"apikey\"};\n          \n          \n            \n            \tprivate static final String[] SENSITIVE_KEYS = new String[] {\"password\", \"secret\", \"fs.azure.account.key\", \"apikey\"};", "url": "https://github.com/apache/flink/pull/13995#discussion_r534533271", "createdAt": "2020-12-02T22:46:11Z", "author": {"login": "zentol"}, "path": "flink-core/src/main/java/org/apache/flink/configuration/GlobalConfiguration.java", "diffHunk": "@@ -44,7 +44,8 @@\n \tpublic static final String FLINK_CONF_FILENAME = \"flink-conf.yaml\";\n \n \t// the keys whose values should be hidden\n-\tprivate static final String[] SENSITIVE_KEYS = new String[] {\"password\", \"secret\", \"fs.azure.account.key\"};\n+\tprivate static final String[] SENSITIVE_KEYS = new String[] {\"password\", \"secret\",\n+\t\t\"fs.azure.account.key\", \"apikey\"};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3536c698c6b9d80c3f959f5e5bc9c4e98fcb6671"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cf33a1443a250d5a88990db533fe11a4aa957ee", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/6cf33a1443a250d5a88990db533fe11a4aa957ee", "committedDate": "2020-12-02T22:46:16Z", "message": "Update flink-core/src/main/java/org/apache/flink/configuration/GlobalConfiguration.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4530, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}