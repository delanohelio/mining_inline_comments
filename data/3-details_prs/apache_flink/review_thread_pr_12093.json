{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2NTM1MzMx", "number": 12093, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMjowODoyMlrOD7nrfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMjowODoyMlrOD7nrfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzODQyNjg1OnYy", "diffSide": "RIGHT", "path": "flink-connectors/flink-connector-rabbitmq/src/main/java/org/apache/flink/streaming/connectors/rabbitmq/RMQSource.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMjowODoyMlrOGUDcwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMjoyMzoyMlrOGUD-Ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY4MTIxNg==", "bodyText": "Is it ok that we now only \"break\" out of the loop after the autoAck handling?", "url": "https://github.com/apache/flink/pull/12093#discussion_r423681216", "createdAt": "2020-05-12T12:08:22Z", "author": {"login": "aljoscha"}, "path": "flink-connectors/flink-connector-rabbitmq/src/main/java/org/apache/flink/streaming/connectors/rabbitmq/RMQSource.java", "diffHunk": "@@ -235,11 +230,44 @@ public void run(SourceContext<OUT> ctx) throws Exception {\n \t\t\t\t\tsessionIds.add(deliveryTag);\n \t\t\t\t}\n \n-\t\t\t\tctx.collect(result);\n+\t\t\t\tschema.deserialize(delivery.getBody(), collector);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5c512da6104551adc64ef96643aaa185910c83e"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY4NDQ2Mw==", "bodyText": "It is the same behaviour change as we did in Kafka. That we \"try\" to checkpoint the last element. Before as you are saying it was not checkpointed. Still the chances that it will actually be checkpointed are rather slim. Commiting of this acks happen on checkpoint. So the checkpoint would've to be triggered between breaking out of the loop and finishing the source task.\nThat said I think there should be no to minor implications of this change.", "url": "https://github.com/apache/flink/pull/12093#discussion_r423684463", "createdAt": "2020-05-12T12:14:22Z", "author": {"login": "dawidwys"}, "path": "flink-connectors/flink-connector-rabbitmq/src/main/java/org/apache/flink/streaming/connectors/rabbitmq/RMQSource.java", "diffHunk": "@@ -235,11 +230,44 @@ public void run(SourceContext<OUT> ctx) throws Exception {\n \t\t\t\t\tsessionIds.add(deliveryTag);\n \t\t\t\t}\n \n-\t\t\t\tctx.collect(result);\n+\t\t\t\tschema.deserialize(delivery.getBody(), collector);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY4MTIxNg=="}, "originalCommit": {"oid": "d5c512da6104551adc64ef96643aaa185910c83e"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY4OTc0Nw==", "bodyText": "Ok, thanks for the reminder!", "url": "https://github.com/apache/flink/pull/12093#discussion_r423689747", "createdAt": "2020-05-12T12:23:22Z", "author": {"login": "aljoscha"}, "path": "flink-connectors/flink-connector-rabbitmq/src/main/java/org/apache/flink/streaming/connectors/rabbitmq/RMQSource.java", "diffHunk": "@@ -235,11 +230,44 @@ public void run(SourceContext<OUT> ctx) throws Exception {\n \t\t\t\t\tsessionIds.add(deliveryTag);\n \t\t\t\t}\n \n-\t\t\t\tctx.collect(result);\n+\t\t\t\tschema.deserialize(delivery.getBody(), collector);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY4MTIxNg=="}, "originalCommit": {"oid": "d5c512da6104551adc64ef96643aaa185910c83e"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1412, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}