{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NDY3NzIy", "number": 14018, "title": "[FLINK-20077] Fix creating a view with MATCH_RECOGNIZE clause", "bodyText": "What is the purpose of the change\nFixes a bug in Calcite that made it impossible to register a view containing a MATCH_RECOGNIZE clause.\nVerifying this change\nAdded a test: SqlToOperationConverterTest#testCreateViewWithMatchRecognize\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (yes / no)\nThe public API, i.e., is any changed class annotated with @Public(Evolving): (yes / no)\nThe serializers: (yes / no / don't know)\nThe runtime per-record code paths (performance sensitive): (yes / no / don't know)\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: (yes / no / don't know)\nThe S3 file system connector: (yes / no / don't know)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (yes / no)\nIf yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)", "createdAt": "2020-11-10T12:52:17Z", "url": "https://github.com/apache/flink/pull/14018", "merged": true, "mergeCommit": {"oid": "530c1f0b73306a49abd40ada15ac34b9d92fa30c"}, "closed": true, "closedAt": "2020-11-12T12:52:02Z", "author": {"login": "dawidwys"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbI3ZEABqjM5Nzg3NTYwMzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbuGERgBqjM5ODczNTk3NzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0c2ccecefad7556e9a070c06ea8b2cee6a96fb57", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/0c2ccecefad7556e9a070c06ea8b2cee6a96fb57", "committedDate": "2020-11-10T12:49:01Z", "message": "[FLINK-20077] Fix creating a view with MATCH_RECOGNIZE clause"}, "afterCommit": {"oid": "5f58ebe5cc0c1167788b75f3114905e1fcdb6135", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/5f58ebe5cc0c1167788b75f3114905e1fcdb6135", "committedDate": "2020-11-10T12:52:39Z", "message": "[FLINK-20077] Fix creating a view with MATCH_RECOGNIZE clause"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5f58ebe5cc0c1167788b75f3114905e1fcdb6135", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/5f58ebe5cc0c1167788b75f3114905e1fcdb6135", "committedDate": "2020-11-10T12:52:39Z", "message": "[FLINK-20077] Fix creating a view with MATCH_RECOGNIZE clause"}, "afterCommit": {"oid": "f6c45469fe9aca6fb112eac4d08b5f5b2548a0c1", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/f6c45469fe9aca6fb112eac4d08b5f5b2548a0c1", "committedDate": "2020-11-10T12:53:22Z", "message": "[FLINK-20077] Fix creating a view with MATCH_RECOGNIZE clause"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MjIzNjE0", "url": "https://github.com/apache/flink/pull/14018#pullrequestreview-528223614", "createdAt": "2020-11-11T14:31:33Z", "commit": {"oid": "f6c45469fe9aca6fb112eac4d08b5f5b2548a0c1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNDozMTozM1rOHxPm0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNDozMTozM1rOHxPm0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM5Nzk3MQ==", "bodyText": "nit: use values instead of datagen, datagen is not intended for testing as far as I know", "url": "https://github.com/apache/flink/pull/14018#discussion_r521397971", "createdAt": "2020-11-11T14:31:33Z", "author": {"login": "twalthr"}, "path": "flink-table/flink-table-planner-blink/src/test/java/org/apache/flink/table/planner/operations/SqlToOperationConverterTest.java", "diffHunk": "@@ -1153,6 +1155,45 @@ public void testAlterTableDropConstraint() throws Exception {\n \t\tparse(\"alter table tb1 drop constraint ct2\", SqlDialect.DEFAULT);\n \t}\n \n+\t@Test\n+\tpublic void testCreateViewWithMatchRecognize() {\n+\t\tMap<String, String> prop = new HashMap<>();\n+\t\tprop.put(\"connector\", \"datagen\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6c45469fe9aca6fb112eac4d08b5f5b2548a0c1"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2108247a3ebffc61ded28fae1322c78263e5fe6", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/d2108247a3ebffc61ded28fae1322c78263e5fe6", "committedDate": "2020-11-12T08:14:17Z", "message": "[FLINK-20077] Fix creating a view with MATCH_RECOGNIZE clause"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f6c45469fe9aca6fb112eac4d08b5f5b2548a0c1", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/f6c45469fe9aca6fb112eac4d08b5f5b2548a0c1", "committedDate": "2020-11-10T12:53:22Z", "message": "[FLINK-20077] Fix creating a view with MATCH_RECOGNIZE clause"}, "afterCommit": {"oid": "d2108247a3ebffc61ded28fae1322c78263e5fe6", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/d2108247a3ebffc61ded28fae1322c78263e5fe6", "committedDate": "2020-11-12T08:14:17Z", "message": "[FLINK-20077] Fix creating a view with MATCH_RECOGNIZE clause"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4583, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}