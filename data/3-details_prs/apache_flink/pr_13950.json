{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2MTUyMTEx", "number": 13950, "title": "[FLINK-19699][e2e] Improve error reporting for failing Prometheus test.", "bodyText": "What is the purpose of the change\nThe prometheus e2e test might get killed by the oom killer. This adds more infrastructure for generally logging received signals in the test, and collecting the kernel messages at the end of the e2e tests.", "createdAt": "2020-11-05T15:38:05Z", "url": "https://github.com/apache/flink/pull/13950", "merged": true, "mergeCommit": {"oid": "43701398fc9b3fe8161d1e9fb583c3aeb16a9356"}, "closed": true, "closedAt": "2020-11-06T11:59:48Z", "author": {"login": "rmetzger"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZfvo5AH2gAyNTE2MTUyMTExOjU0YjZjMzE0OGE4MWU3MDBhZWMyMzNjYjMzYTM0ZWMzNjZlYTk4MDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZkplqgFqTUyNDQxOTY3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "54b6c3148a81e700aec233cb33a34ec366ea9805", "author": {"user": {"login": "rmetzger", "name": "Robert Metzger"}}, "url": "https://github.com/apache/flink/commit/54b6c3148a81e700aec233cb33a34ec366ea9805", "committedDate": "2020-11-05T10:24:26Z", "message": "[FLINK-19699] Log signals received by running tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "916e5b7a425dbd5b95046e39283a7da7313b5b5a", "author": {"user": {"login": "rmetzger", "name": "Robert Metzger"}}, "url": "https://github.com/apache/flink/commit/916e5b7a425dbd5b95046e39283a7da7313b5b5a", "committedDate": "2020-11-05T10:24:26Z", "message": "[FLINK-19699][e2e] Collect dmesg output after tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NDExNDI4", "url": "https://github.com/apache/flink/pull/13950#pullrequestreview-524411428", "createdAt": "2020-11-05T15:59:04Z", "commit": {"oid": "916e5b7a425dbd5b95046e39283a7da7313b5b5a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxNTo1OTowNFrOHuKM0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxNTo1OTowNFrOHuKM0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE2MzY2NA==", "bodyText": "does this work on java 11?\nGuess it does since we use the same thing already in flink-runtime.", "url": "https://github.com/apache/flink/pull/13950#discussion_r518163664", "createdAt": "2020-11-05T15:59:04Z", "author": {"login": "zentol"}, "path": "flink-test-utils-parent/flink-test-utils-junit/src/main/java/org/apache/flink/util/TestSignalHandler.java", "diffHunk": "@@ -0,0 +1,84 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.flink.util;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import sun.misc.Signal;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "916e5b7a425dbd5b95046e39283a7da7313b5b5a"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NDEzNDAx", "url": "https://github.com/apache/flink/pull/13950#pullrequestreview-524413401", "createdAt": "2020-11-05T16:00:57Z", "commit": {"oid": "916e5b7a425dbd5b95046e39283a7da7313b5b5a"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NDE5MDU5", "url": "https://github.com/apache/flink/pull/13950#pullrequestreview-524419059", "createdAt": "2020-11-05T16:06:42Z", "commit": {"oid": "54b6c3148a81e700aec233cb33a34ec366ea9805"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxNjowNjo0M1rOHuKixg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxNjowNjo0M1rOHuKixg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE2OTI4Ng==", "bodyText": "I'm wondering whether this reduction makes sense. Couldn't we just move the existing SignalHandler to flink-runtime to flinkcore, and register it in the test logger with....well no we can't because flink-test-utils-junit doesn't depend on flink-core, and everything else uses flink-test-utils-junit as a test dependency. So there is quite literally no place to put it.\nWell that's annoying \ud83d\udca2", "url": "https://github.com/apache/flink/pull/13950#discussion_r518169286", "createdAt": "2020-11-05T16:06:43Z", "author": {"login": "zentol"}, "path": "flink-test-utils-parent/flink-test-utils-junit/src/main/java/org/apache/flink/util/TestSignalHandler.java", "diffHunk": "@@ -0,0 +1,84 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.flink.util;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import sun.misc.Signal;\n+\n+/**\n+ * This signal handler / signal logger is based on Apache Hadoop's org.apache.hadoop.util.SignalLogger.\n+ *\n+ * <p>This is a reduced version of {@link org.apache.flink.runtime.util.SignalHandler}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54b6c3148a81e700aec233cb33a34ec366ea9805"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NDE5Njc2", "url": "https://github.com/apache/flink/pull/13950#pullrequestreview-524419676", "createdAt": "2020-11-05T16:07:21Z", "commit": {"oid": "916e5b7a425dbd5b95046e39283a7da7313b5b5a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4421, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}