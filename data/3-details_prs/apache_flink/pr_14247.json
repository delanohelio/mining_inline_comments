{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4NTAzMjY1", "number": 14247, "title": "[FLINK-20175][bp-1.11] Avro Confluent Registry SQL format does not support adding nullable columns", "bodyText": "What is the purpose of the change\n\nBackports the fix for nullable columns in Avro format. efc12ca\nBackports the nested record names f570d04\n\nVerifying this change\nAdded test: testAddingOptionalField\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (yes / no)\nThe public API, i.e., is any changed class annotated with @Public(Evolving): (yes / no)\nThe serializers: (yes / no / don't know)\nThe runtime per-record code paths (performance sensitive): (yes / no / don't know)\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: (yes / no / don't know)\nThe S3 file system connector: (yes / no / don't know)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (yes / no)\nIf yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)", "createdAt": "2020-11-27T09:41:21Z", "url": "https://github.com/apache/flink/pull/14247", "merged": true, "mergeCommit": {"oid": "d2f24e8177f05fd41c8804f2bb962a1a7500b095"}, "closed": true, "closedAt": "2020-11-29T19:45:51Z", "author": {"login": "dawidwys"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgkcsSAFqTUzOTg0MTI0NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgnqLpgBqjQwNDYxNjQ2NTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5ODQxMjQ0", "url": "https://github.com/apache/flink/pull/14247#pullrequestreview-539841244", "createdAt": "2020-11-27T09:49:31Z", "commit": {"oid": "ab64e8547b2c75071536ea06594cca07c4a14bb2"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwOTo0OTozMlrOH63rFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwOTo0OTozMlrOH63rFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ5MTYwNg==", "bodyText": "Use DataType directly. We should not advertise TableSchema anymore.", "url": "https://github.com/apache/flink/pull/14247#discussion_r531491606", "createdAt": "2020-11-27T09:49:32Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/formats/avro/typeutils/AvroSchemaConverterTest.java", "diffHunk": "@@ -54,6 +64,44 @@ public void testAvroSchemaConversion() {\n \t\tvalidateUserSchema(AvroSchemaConverter.convertToTypeInfo(schema));\n \t}\n \n+\t@Test\n+\tpublic void testAddingOptionalField() throws IOException {\n+\t\tSchema oldSchema = SchemaBuilder.record(\"record\")\n+\t\t\t.fields()\n+\t\t\t.requiredLong(\"category_id\")\n+\t\t\t.optionalString(\"name\")\n+\t\t\t.endRecord();\n+\n+\t\tSchema newSchema = AvroSchemaConverter.convertToSchema(\n+\t\t\tTableSchema.builder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab64e8547b2c75071536ea06594cca07c4a14bb2"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70cf3a3d81f9d5499e5008c5c5eca93a4cdb0c7b", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/70cf3a3d81f9d5499e5008c5c5eca93a4cdb0c7b", "committedDate": "2020-11-27T13:35:00Z", "message": "[FLINK-20175] Avro Confluent Registry SQL format does not support adding nullable columns"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab64e8547b2c75071536ea06594cca07c4a14bb2", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/ab64e8547b2c75071536ea06594cca07c4a14bb2", "committedDate": "2020-11-26T18:17:35Z", "message": "[FLINK-20175] Avro Confluent Registry SQL format does not support adding nullable columns"}, "afterCommit": {"oid": "70cf3a3d81f9d5499e5008c5c5eca93a4cdb0c7b", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/70cf3a3d81f9d5499e5008c5c5eca93a4cdb0c7b", "committedDate": "2020-11-27T13:35:00Z", "message": "[FLINK-20175] Avro Confluent Registry SQL format does not support adding nullable columns"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3741, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}