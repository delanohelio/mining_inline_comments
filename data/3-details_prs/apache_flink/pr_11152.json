{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NjE2NTU5", "number": 11152, "title": "[FLINK-16182][table-api] Remove check against null types as a result of an input type inference", "bodyText": "What is the purpose of the change\nIt removes invalid check for null types as a result of an input type inference. Moreover it always fail for inferring output type based on surrounding info.\nVerifying this change\nThe behaviour in chained calls will be tested as part of FLINK-16033\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (yes / no)\nThe public API, i.e., is any changed class annotated with @Public(Evolving): (yes / no)\nThe serializers: (yes / no / don't know)\nThe runtime per-record code paths (performance sensitive): (yes / no / don't know)\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (yes / no / don't know)\nThe S3 file system connector: (yes / no / don't know)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (yes / no)\nIf yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)", "createdAt": "2020-02-20T08:25:58Z", "url": "https://github.com/apache/flink/pull/11152", "merged": true, "mergeCommit": {"oid": "333e374883666f0f55fe23faa0f7db07dfe14b4a"}, "closed": true, "closedAt": "2020-02-20T17:49:44Z", "author": {"login": "dawidwys"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGH0YvgBqjMwNTUwNDk5ODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGIc4igBqjMwNTUyMTM2NDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "41abc8492f8aec24518b9ff7cad8272ee2b35523", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/41abc8492f8aec24518b9ff7cad8272ee2b35523", "committedDate": "2020-02-20T08:23:14Z", "message": "[FLINK-16182][table-api] Remove check against null types as a result of an input type inference"}, "afterCommit": {"oid": "147d272c470f8ac6b5cf2d64fe5d84dbcd403191", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/147d272c470f8ac6b5cf2d64fe5d84dbcd403191", "committedDate": "2020-02-20T09:36:00Z", "message": "[FLINK-16182][table-api] Remove check against null types as a result of an input type inference"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "147d272c470f8ac6b5cf2d64fe5d84dbcd403191", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/147d272c470f8ac6b5cf2d64fe5d84dbcd403191", "committedDate": "2020-02-20T09:36:00Z", "message": "[FLINK-16182][table-api] Remove check against null types as a result of an input type inference"}, "afterCommit": {"oid": "5da37af7c352cd2735a9f96930ebcb517a008c82", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/5da37af7c352cd2735a9f96930ebcb517a008c82", "committedDate": "2020-02-20T09:36:28Z", "message": "[FLINK-16182][table-api] Remove check against null types as a result of an input type inference when deriving output type based on surrounding info."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5da37af7c352cd2735a9f96930ebcb517a008c82", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/5da37af7c352cd2735a9f96930ebcb517a008c82", "committedDate": "2020-02-20T09:36:28Z", "message": "[FLINK-16182][table-api] Remove check against null types as a result of an input type inference when deriving output type based on surrounding info."}, "afterCommit": {"oid": "49654f6f62ab81b913b70771ddddac7e2cf4c1f5", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/49654f6f62ab81b913b70771ddddac7e2cf4c1f5", "committedDate": "2020-02-20T09:39:41Z", "message": "[FLINK-16182][table-api] Remove check against null types as a result of an input type inference when deriving output type based on surrounding info."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNzU4NDU2", "url": "https://github.com/apache/flink/pull/11152#pullrequestreview-361758456", "createdAt": "2020-02-20T09:44:16Z", "commit": {"oid": "49654f6f62ab81b913b70771ddddac7e2cf4c1f5"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTo0NDoxNlrOFsMi5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTo0NzozN1rOFsMqWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg4NzIwNg==", "bodyText": "nit: I think we can even make this private. I wouldn't copy the JavaDoc then.", "url": "https://github.com/apache/flink/pull/11152#discussion_r381887206", "createdAt": "2020-02-20T09:44:16Z", "author": {"login": "twalthr"}, "path": "flink-table/flink-table-common/src/main/java/org/apache/flink/table/types/inference/TypeInferenceUtil.java", "diffHunk": "@@ -99,6 +99,20 @@ public static AdaptedCallContext adaptArguments(\n \t\t\tTypeInference typeInference,\n \t\t\tCallContext callContext,\n \t\t\t@Nullable DataType outputType) {\n+\t\treturn adaptArguments(typeInference, callContext, outputType, true);\n+\t}\n+\n+\t/**\n+\t * Adapts the call's argument if necessary.\n+\t *\n+\t * <p>This includes casts that need to be inserted, reordering of arguments (*), or insertion of default\n+\t * values (*) where (*) is future work.\n+\t */\n+\tpublic static AdaptedCallContext adaptArguments(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49654f6f62ab81b913b70771ddddac7e2cf4c1f5"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg4OTExMg==", "bodyText": "nit: allowUnknownInputTypes instead?", "url": "https://github.com/apache/flink/pull/11152#discussion_r381889112", "createdAt": "2020-02-20T09:47:37Z", "author": {"login": "twalthr"}, "path": "flink-table/flink-table-common/src/main/java/org/apache/flink/table/types/inference/TypeInferenceUtil.java", "diffHunk": "@@ -99,6 +99,20 @@ public static AdaptedCallContext adaptArguments(\n \t\t\tTypeInference typeInference,\n \t\t\tCallContext callContext,\n \t\t\t@Nullable DataType outputType) {\n+\t\treturn adaptArguments(typeInference, callContext, outputType, true);\n+\t}\n+\n+\t/**\n+\t * Adapts the call's argument if necessary.\n+\t *\n+\t * <p>This includes casts that need to be inserted, reordering of arguments (*), or insertion of default\n+\t * values (*) where (*) is future work.\n+\t */\n+\tpublic static AdaptedCallContext adaptArguments(\n+\t\t\tTypeInference typeInference,\n+\t\t\tCallContext callContext,\n+\t\t\t@Nullable DataType outputType,\n+\t\t\tboolean checkNoUnknownInputTypes) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49654f6f62ab81b913b70771ddddac7e2cf4c1f5"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19a39aed2dfccdf83fd6494ef95fa066df25033a", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/19a39aed2dfccdf83fd6494ef95fa066df25033a", "committedDate": "2020-02-20T10:20:16Z", "message": "[FLINK-16182][table-api] Remove check against null types as a result of an input type inference when deriving output type based on surrounding info."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49654f6f62ab81b913b70771ddddac7e2cf4c1f5", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/49654f6f62ab81b913b70771ddddac7e2cf4c1f5", "committedDate": "2020-02-20T09:39:41Z", "message": "[FLINK-16182][table-api] Remove check against null types as a result of an input type inference when deriving output type based on surrounding info."}, "afterCommit": {"oid": "19a39aed2dfccdf83fd6494ef95fa066df25033a", "author": {"user": {"login": "dawidwys", "name": "Dawid Wysakowicz"}}, "url": "https://github.com/apache/flink/commit/19a39aed2dfccdf83fd6494ef95fa066df25033a", "committedDate": "2020-02-20T10:20:16Z", "message": "[FLINK-16182][table-api] Remove check against null types as a result of an input type inference when deriving output type based on surrounding info."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4855, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}