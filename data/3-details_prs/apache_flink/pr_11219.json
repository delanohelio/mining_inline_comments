{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwMDIxNDMy", "number": 11219, "title": "[FLINK-16257][network] Remove useless ResultPartitionID from AddCredit message", "bodyText": "What is the purpose of the change\nThe ResultPartitionID in AddCredit message is never used on upstream side, so we can remove it to cleanup the codes. There would have another two benefits to do so:\n\nReduce the total message size from previous 52 bytes to 20 bytes.\nDecouple the dependency with InputChannel#getPartitionId.\n\nBrief change log\n\nRemove ResultPartitionID from AddCredit message\n\nVerifying this change\nThis change is a trivial rework / code cleanup without any test coverage.\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (yes / no)\nThe public API, i.e., is any changed class annotated with @Public(Evolving): (yes / no)\nThe serializers: (yes / no / don't know)\nThe runtime per-record code paths (performance sensitive): (yes / no / don't know)\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: (yes / no / don't know)\nThe S3 file system connector: (yes / no / don't know)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (yes / no)\nIf yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)", "createdAt": "2020-02-26T05:48:50Z", "url": "https://github.com/apache/flink/pull/11219", "merged": true, "mergeCommit": {"oid": "d19d7479c3b3a53a5db30ef9342030043dc8ef84"}, "closed": true, "closedAt": "2020-02-27T15:03:26Z", "author": {"login": "zhijiangW"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcH_mfmgH2gAyMzgwMDIxNDMyOmE4Y2YwMTlkYTI2YWVjOGUzYTE4MTZlZjgyYjg1YzhjYWE0MzA0MWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIar9AgFqTM2NTY0OTA3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a8cf019da26aec8e3a1816ef82b85c8caa43041c", "author": {"user": {"login": "zhijiangW", "name": "zhijiang"}}, "url": "https://github.com/apache/flink/commit/a8cf019da26aec8e3a1816ef82b85c8caa43041c", "committedDate": "2020-02-26T05:09:37Z", "message": "[FLINK-16257][network] Remove useless ResultPartitionID from AddCredit message\n\nThe ResultPartitionID in AddCredit message is never used on upstream side, so we can remove it to cleanup the codes.\nThere would have another two benefits to do so:\n\n1. Reduce the total message size from previous 52 bytes to 20 bytes.\n2. Decouple the dependency with InputChannel#getPartitionId."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75bddc5732f99c88a183b683660a85202ac8c5cb", "author": {"user": {"login": "zhijiangW", "name": "zhijiang"}}, "url": "https://github.com/apache/flink/commit/75bddc5732f99c88a183b683660a85202ac8c5cb", "committedDate": "2020-02-26T05:42:05Z", "message": "[hotfix][network] Cleanup the unused method from SingleInputGate\n\nThe method SingleInputGate#getConsumedResultId is never used, so remove it to cleanup the codes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NjQ3NzIw", "url": "https://github.com/apache/flink/pull/11219#pullrequestreview-365647720", "createdAt": "2020-02-27T12:40:47Z", "commit": {"oid": "75bddc5732f99c88a183b683660a85202ac8c5cb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMjo0MDo0OFrOFvQtOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMjo0MDo0OFrOFvQtOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwMTExNA==", "bodyText": "nit: replace numbers with constants Integer.BYTES and Long.BYTES?", "url": "https://github.com/apache/flink/pull/11219#discussion_r385101114", "createdAt": "2020-02-27T12:40:48Z", "author": {"login": "rkhachatryan"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/io/network/netty/NettyMessage.java", "diffHunk": "@@ -666,10 +663,7 @@ ByteBuf write(ByteBufAllocator allocator) throws IOException {\n \t\t\tByteBuf result = null;\n \n \t\t\ttry {\n-\t\t\t\tresult = allocateBuffer(allocator, ID, 16 + 16 + 4 + 16);\n-\n-\t\t\t\tpartitionId.getPartitionId().writeTo(result);\n-\t\t\t\tpartitionId.getProducerId().writeTo(result);\n+\t\t\t\tresult = allocateBuffer(allocator, ID, 4 + 16);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75bddc5732f99c88a183b683660a85202ac8c5cb"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NjQ5MDc5", "url": "https://github.com/apache/flink/pull/11219#pullrequestreview-365649079", "createdAt": "2020-02-27T12:43:01Z", "commit": {"oid": "75bddc5732f99c88a183b683660a85202ac8c5cb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3212, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}