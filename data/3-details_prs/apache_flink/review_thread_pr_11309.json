{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzNTI5Mjg0", "number": 11309, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMzo1NTowMVrODlDWtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMzo1NzowNlrODlDZ9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMTc4ODY5OnYy", "diffSide": "LEFT", "path": "flink-end-to-end-tests/run-nightly-tests.sh", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMzo1NTowMVrOFxuHkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwODoyNjo0MFrOFyKJHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4MDE0Ng==", "bodyText": "I would refrain from excluding this test until we have a confirmation that this is indeed java 11 related and some numbers of how reliably it fails.", "url": "https://github.com/apache/flink/pull/11309#discussion_r387680146", "createdAt": "2020-03-04T13:55:01Z", "author": {"login": "zentol"}, "path": "flink-end-to-end-tests/run-nightly-tests.sh", "diffHunk": "@@ -187,8 +186,6 @@ run_test \"TPC-DS end-to-end test (Blink planner)\" \"$END_TO_END_DIR/test-scripts/\n \n run_test \"Heavy deployment end-to-end test\" \"$END_TO_END_DIR/test-scripts/test_heavy_deployment.sh\" \"skip_check_exceptions\"\n \n-run_test \"ConnectedComponents iterations with high parallelism end-to-end test\" \"$END_TO_END_DIR/test-scripts/test_high_parallelism_iterations.sh 25\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51918c217b36034a388528e56a0fa6cc1be69ad2"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY5MDg4NA==", "bodyText": "I can not remember having seen this failure on jdk8 ... In the last 48 hours, I have changed my policy to creating tickets for each test failure I see.\nHow many successful executions on master is proof enough that the test is stable on jdk8? (I propose 10)\nHow long should I keep the JIRA ticket open until we believe it is a jdk11 only issue? (I propose a week)\nIf we are not excluding this test for the JDK11 build, we won't have e2e coverage for jdk11 for everything that comes after.", "url": "https://github.com/apache/flink/pull/11309#discussion_r387690884", "createdAt": "2020-03-04T14:13:10Z", "author": {"login": "rmetzger"}, "path": "flink-end-to-end-tests/run-nightly-tests.sh", "diffHunk": "@@ -187,8 +186,6 @@ run_test \"TPC-DS end-to-end test (Blink planner)\" \"$END_TO_END_DIR/test-scripts/\n \n run_test \"Heavy deployment end-to-end test\" \"$END_TO_END_DIR/test-scripts/test_heavy_deployment.sh\" \"skip_check_exceptions\"\n \n-run_test \"ConnectedComponents iterations with high parallelism end-to-end test\" \"$END_TO_END_DIR/test-scripts/test_high_parallelism_iterations.sh 25\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4MDE0Ng=="}, "originalCommit": {"oid": "51918c217b36034a388528e56a0fa6cc1be69ad2"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg0MjE5Mg==", "bodyText": "This test has always been incredibly flaky, that's why I advise against rash calls.\nTrivial solution for preventing other tests from running in case of failures is to move it to the end of the script.", "url": "https://github.com/apache/flink/pull/11309#discussion_r387842192", "createdAt": "2020-03-04T18:09:38Z", "author": {"login": "zentol"}, "path": "flink-end-to-end-tests/run-nightly-tests.sh", "diffHunk": "@@ -187,8 +186,6 @@ run_test \"TPC-DS end-to-end test (Blink planner)\" \"$END_TO_END_DIR/test-scripts/\n \n run_test \"Heavy deployment end-to-end test\" \"$END_TO_END_DIR/test-scripts/test_heavy_deployment.sh\" \"skip_check_exceptions\"\n \n-run_test \"ConnectedComponents iterations with high parallelism end-to-end test\" \"$END_TO_END_DIR/test-scripts/test_high_parallelism_iterations.sh 25\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4MDE0Ng=="}, "originalCommit": {"oid": "51918c217b36034a388528e56a0fa6cc1be69ad2"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg0MjU0OA==", "bodyText": "naturally if you can show that it is reproducible on java 11 then we can of course disable it.", "url": "https://github.com/apache/flink/pull/11309#discussion_r387842548", "createdAt": "2020-03-04T18:10:17Z", "author": {"login": "zentol"}, "path": "flink-end-to-end-tests/run-nightly-tests.sh", "diffHunk": "@@ -187,8 +186,6 @@ run_test \"TPC-DS end-to-end test (Blink planner)\" \"$END_TO_END_DIR/test-scripts/\n \n run_test \"Heavy deployment end-to-end test\" \"$END_TO_END_DIR/test-scripts/test_heavy_deployment.sh\" \"skip_check_exceptions\"\n \n-run_test \"ConnectedComponents iterations with high parallelism end-to-end test\" \"$END_TO_END_DIR/test-scripts/test_high_parallelism_iterations.sh 25\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4MDE0Ng=="}, "originalCommit": {"oid": "51918c217b36034a388528e56a0fa6cc1be69ad2"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEzOTI5NA==", "bodyText": "Looks like I am able to fix the test on JDK11: https://issues.apache.org/jira/browse/FLINK-16417", "url": "https://github.com/apache/flink/pull/11309#discussion_r388139294", "createdAt": "2020-03-05T08:26:40Z", "author": {"login": "rmetzger"}, "path": "flink-end-to-end-tests/run-nightly-tests.sh", "diffHunk": "@@ -187,8 +186,6 @@ run_test \"TPC-DS end-to-end test (Blink planner)\" \"$END_TO_END_DIR/test-scripts/\n \n run_test \"Heavy deployment end-to-end test\" \"$END_TO_END_DIR/test-scripts/test_heavy_deployment.sh\" \"skip_check_exceptions\"\n \n-run_test \"ConnectedComponents iterations with high parallelism end-to-end test\" \"$END_TO_END_DIR/test-scripts/test_high_parallelism_iterations.sh 25\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4MDE0Ng=="}, "originalCommit": {"oid": "51918c217b36034a388528e56a0fa6cc1be69ad2"}, "originalPosition": 70}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMTc5NzAzOnYy", "diffSide": "RIGHT", "path": "tools/azure-pipelines/jobs-template.yml", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMzo1NzowNlrOFxuMdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxODowNzozMVrOFx37_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4MTM5OQ==", "bodyText": "should be a separate commit, and possibly even JIRA.", "url": "https://github.com/apache/flink/pull/11309#discussion_r387681399", "createdAt": "2020-03-04T13:57:06Z", "author": {"login": "zentol"}, "path": "tools/azure-pipelines/jobs-template.yml", "diffHunk": "@@ -161,6 +161,6 @@ jobs:\n     # TODO remove pre-commit tests script by adding the tests to the nightly script\n #    - script: FLINK_DIR=build-target ./flink-end-to-end-tests/run-pre-commit-tests.sh\n #      displayName: Test - precommit \n-    - script: FLINK_DIR=`pwd`/build-target flink-end-to-end-tests/run-nightly-tests.sh\n+    - script: ${{parameters.environment}} FLINK_DIR=`pwd`/build-target flink-end-to-end-tests/run-nightly-tests.sh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51918c217b36034a388528e56a0fa6cc1be69ad2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY5MTcwMQ==", "bodyText": "Why?\nWhat this does is passing the PROFILE variable to the script. This is necessary for deciding whether we are in a jdk11 setting or not. ... I see a clear relationship to the title of the JIRA I'm working on.", "url": "https://github.com/apache/flink/pull/11309#discussion_r387691701", "createdAt": "2020-03-04T14:14:33Z", "author": {"login": "rmetzger"}, "path": "tools/azure-pipelines/jobs-template.yml", "diffHunk": "@@ -161,6 +161,6 @@ jobs:\n     # TODO remove pre-commit tests script by adding the tests to the nightly script\n #    - script: FLINK_DIR=build-target ./flink-end-to-end-tests/run-pre-commit-tests.sh\n #      displayName: Test - precommit \n-    - script: FLINK_DIR=`pwd`/build-target flink-end-to-end-tests/run-nightly-tests.sh\n+    - script: ${{parameters.environment}} FLINK_DIR=`pwd`/build-target flink-end-to-end-tests/run-nightly-tests.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4MTM5OQ=="}, "originalCommit": {"oid": "51918c217b36034a388528e56a0fa6cc1be69ad2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg0MTAyMQ==", "bodyText": "because the script was already relying on this being set for the avro schema registry. This fixes a bug, it's not an improvement.", "url": "https://github.com/apache/flink/pull/11309#discussion_r387841021", "createdAt": "2020-03-04T18:07:31Z", "author": {"login": "zentol"}, "path": "tools/azure-pipelines/jobs-template.yml", "diffHunk": "@@ -161,6 +161,6 @@ jobs:\n     # TODO remove pre-commit tests script by adding the tests to the nightly script\n #    - script: FLINK_DIR=build-target ./flink-end-to-end-tests/run-pre-commit-tests.sh\n #      displayName: Test - precommit \n-    - script: FLINK_DIR=`pwd`/build-target flink-end-to-end-tests/run-nightly-tests.sh\n+    - script: ${{parameters.environment}} FLINK_DIR=`pwd`/build-target flink-end-to-end-tests/run-nightly-tests.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4MTM5OQ=="}, "originalCommit": {"oid": "51918c217b36034a388528e56a0fa6cc1be69ad2"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 861, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}