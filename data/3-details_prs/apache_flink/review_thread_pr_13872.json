{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzODE4MTAw", "number": 13872, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNTowMDowMFrOE0afow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNTowMDo1OVrOE0ahUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzMzk1NDkxOnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-json/src/test/resources/canal-data.txt", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNTowMDowMFrOHsIAqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMzozNToyM1rOHsfRcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAzMDYzNQ==", "bodyText": "Please add a real DDL message, rather than changing a DELETE message into CREATE.", "url": "https://github.com/apache/flink/pull/13872#discussion_r516030635", "createdAt": "2020-11-02T15:00:00Z", "author": {"login": "wuchong"}, "path": "flink-formats/flink-json/src/test/resources/canal-data.txt", "diffHunk": "@@ -5,6 +5,6 @@\n {\"data\":[{\"id\":\"111\",\"name\":\"scooter\",\"description\":\"Big 2-wheel scooter \",\"weight\":\"5.18\"}],\"database\":\"inventory\",\"es\":1589373555000,\"id\":7,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":null,\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373555457,\"type\":\"INSERT\"}\n {\"data\":[{\"id\":\"110\",\"name\":\"jacket\",\"description\":\"new water resistent white wind breaker\",\"weight\":\"0.5\"}],\"database\":\"inventory\",\"es\":1589373558000,\"id\":8,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":[{\"description\":\"water resistent white wind breaker\",\"weight\":\"0.2\"}],\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373558230,\"type\":\"UPDATE\"}\n {\"data\":[{\"id\":\"111\",\"name\":\"scooter\",\"description\":\"Big 2-wheel scooter \",\"weight\":\"5.17\"}],\"database\":\"inventory\",\"es\":1589373560000,\"id\":9,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":[{\"weight\":\"5.18\"}],\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373560798,\"type\":\"UPDATE\"}\n-{\"data\":[{\"id\":\"111\",\"name\":\"scooter\",\"description\":\"Big 2-wheel scooter \",\"weight\":\"5.17\"}],\"database\":\"inventory\",\"es\":1589373563000,\"id\":10,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":null,\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373563798,\"type\":\"DELETE\"}\n+{\"data\":[{\"id\":\"111\",\"name\":\"scooter\",\"description\":\"Big 2-wheel scooter \",\"weight\":\"5.17\"}],\"database\":\"inventory\",\"es\":1589373563000,\"id\":10,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":null,\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373563798,\"type\":\"CREATE\"}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d5c8594e0371b5d2aab6a58677ac40d1f2892a3"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQxMTc2MQ==", "bodyText": "done", "url": "https://github.com/apache/flink/pull/13872#discussion_r516411761", "createdAt": "2020-11-03T03:35:23Z", "author": {"login": "pyscala"}, "path": "flink-formats/flink-json/src/test/resources/canal-data.txt", "diffHunk": "@@ -5,6 +5,6 @@\n {\"data\":[{\"id\":\"111\",\"name\":\"scooter\",\"description\":\"Big 2-wheel scooter \",\"weight\":\"5.18\"}],\"database\":\"inventory\",\"es\":1589373555000,\"id\":7,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":null,\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373555457,\"type\":\"INSERT\"}\n {\"data\":[{\"id\":\"110\",\"name\":\"jacket\",\"description\":\"new water resistent white wind breaker\",\"weight\":\"0.5\"}],\"database\":\"inventory\",\"es\":1589373558000,\"id\":8,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":[{\"description\":\"water resistent white wind breaker\",\"weight\":\"0.2\"}],\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373558230,\"type\":\"UPDATE\"}\n {\"data\":[{\"id\":\"111\",\"name\":\"scooter\",\"description\":\"Big 2-wheel scooter \",\"weight\":\"5.17\"}],\"database\":\"inventory\",\"es\":1589373560000,\"id\":9,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":[{\"weight\":\"5.18\"}],\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373560798,\"type\":\"UPDATE\"}\n-{\"data\":[{\"id\":\"111\",\"name\":\"scooter\",\"description\":\"Big 2-wheel scooter \",\"weight\":\"5.17\"}],\"database\":\"inventory\",\"es\":1589373563000,\"id\":10,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":null,\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373563798,\"type\":\"DELETE\"}\n+{\"data\":[{\"id\":\"111\",\"name\":\"scooter\",\"description\":\"Big 2-wheel scooter \",\"weight\":\"5.17\"}],\"database\":\"inventory\",\"es\":1589373563000,\"id\":10,\"isDdl\":false,\"mysqlType\":{\"id\":\"INTEGER\",\"name\":\"VARCHAR(255)\",\"description\":\"VARCHAR(512)\",\"weight\":\"FLOAT\"},\"old\":null,\"pkNames\":[\"id\"],\"sql\":\"\",\"sqlType\":{\"id\":4,\"name\":12,\"description\":12,\"weight\":7},\"table\":\"products2\",\"ts\":1589373563798,\"type\":\"CREATE\"}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAzMDYzNQ=="}, "originalCommit": {"oid": "3d5c8594e0371b5d2aab6a58677ac40d1f2892a3"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzMzk1OTIyOnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-json/src/main/java/org/apache/flink/formats/json/canal/CanalJsonDeserializationSchema.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNTowMDo1OVrOHsIDZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMzozNToxNVrOHsfRVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAzMTMzMg==", "bodyText": "Please add a comment what is an CREATE message, and why we just ignore it.", "url": "https://github.com/apache/flink/pull/13872#discussion_r516031332", "createdAt": "2020-11-02T15:00:59Z", "author": {"login": "wuchong"}, "path": "flink-formats/flink-json/src/main/java/org/apache/flink/formats/json/canal/CanalJsonDeserializationSchema.java", "diffHunk": "@@ -223,6 +224,8 @@ public void deserialize(byte[] message, Collector<RowData> out) throws IOExcepti\n \t\t\t\t\tinsert.setRowKind(RowKind.DELETE);\n \t\t\t\t\tout.collect(insert);\n \t\t\t\t}\n+\t\t\t} else if (OP_CREATE.equals(type)){\n+\t\t\t\treturn;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d5c8594e0371b5d2aab6a58677ac40d1f2892a3"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQxMTczNA==", "bodyText": "done", "url": "https://github.com/apache/flink/pull/13872#discussion_r516411734", "createdAt": "2020-11-03T03:35:15Z", "author": {"login": "pyscala"}, "path": "flink-formats/flink-json/src/main/java/org/apache/flink/formats/json/canal/CanalJsonDeserializationSchema.java", "diffHunk": "@@ -223,6 +224,8 @@ public void deserialize(byte[] message, Collector<RowData> out) throws IOExcepti\n \t\t\t\t\tinsert.setRowKind(RowKind.DELETE);\n \t\t\t\t\tout.collect(insert);\n \t\t\t\t}\n+\t\t\t} else if (OP_CREATE.equals(type)){\n+\t\t\t\treturn;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAzMTMzMg=="}, "originalCommit": {"oid": "3d5c8594e0371b5d2aab6a58677ac40d1f2892a3"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4890, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}