{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMDA3ODg0", "number": 12244, "title": "[FLINK-17258][network] Fix couple of ITCases that were failing with enabled unaligned checkpoints", "bodyText": "Please take a look at the individual commit messages. First commit is from another PR FLINK-17780.\nVerifying this change\nThis PR fixes test failures with enabled unaligned checkpoints by default.\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (yes / no)\nThe public API, i.e., is any changed class annotated with @Public(Evolving): (yes / no)\nThe serializers: (yes / no / don't know)\nThe runtime per-record code paths (performance sensitive): (yes / no / don't know)\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: (yes / no / don't know)\nThe S3 file system connector: (yes / no / don't know)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (yes / no)\nIf yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)", "createdAt": "2020-05-19T09:54:32Z", "url": "https://github.com/apache/flink/pull/12244", "merged": true, "mergeCommit": {"oid": "463dc8b9cab99d6d5df07ec0e593843885e3ac72"}, "closed": true, "closedAt": "2020-05-21T17:37:15Z", "author": {"login": "pnowojski"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjJV_mABqjMzNTY1NTE2NTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjKQmkgBqjMzNTY4NTM0MTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3dcc9233af810b8be408665c0083fab404a2dea5", "author": {"user": {"login": "pnowojski", "name": "Piotr Nowojski"}}, "url": "https://github.com/apache/flink/commit/3dcc9233af810b8be408665c0083fab404a2dea5", "committedDate": "2020-05-19T09:46:21Z", "message": "[FLINK-17258][hotfix][network] Unify checkpoint id logging with CheckpointCoordinator"}, "afterCommit": {"oid": "7fa2068a283b9471384248c1bf301e3d406b5f48", "author": {"user": {"login": "pnowojski", "name": "Piotr Nowojski"}}, "url": "https://github.com/apache/flink/commit/7fa2068a283b9471384248c1bf301e3d406b5f48", "committedDate": "2020-05-20T13:46:03Z", "message": "[FLINK-17258][hotfix][network] Unify checkpoint id logging with CheckpointCoordinator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1Mzc2OTA5", "url": "https://github.com/apache/flink/pull/12244#pullrequestreview-415376909", "createdAt": "2020-05-20T14:10:42Z", "commit": {"oid": "7fa2068a283b9471384248c1bf301e3d406b5f48"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNDoxMDo0MlrOGYNuZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNDoxMDo0MlrOGYNuZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA0Mzg3OQ==", "bodyText": "nit: I guess it was extracted to disable unaligned checkpoints, but then CLI argument was used; so this variable can be inlined back.", "url": "https://github.com/apache/flink/pull/12244#discussion_r428043879", "createdAt": "2020-05-20T14:10:42Z", "author": {"login": "rkhachatryan"}, "path": "flink-tests/src/test/java/org/apache/flink/test/classloading/ClassLoaderITCase.java", "diffHunk": "@@ -300,7 +300,8 @@ public void testCheckpointingCustomKvStateJobWithCustomClassLoader() throws IOEx\n \t */\n \t@Test\n \tpublic void testDisposeSavepointWithCustomKvState() throws Exception {\n-\t\tClusterClient<?> clusterClient = new MiniClusterClient(new Configuration(), miniClusterResource.getMiniCluster());\n+\t\tConfiguration configuration = new Configuration();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fa2068a283b9471384248c1bf301e3d406b5f48"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "691fb2144e910e75f8fa5bac6e28d65ff1c347c6", "author": {"user": {"login": "pnowojski", "name": "Piotr Nowojski"}}, "url": "https://github.com/apache/flink/commit/691fb2144e910e75f8fa5bac6e28d65ff1c347c6", "committedDate": "2020-05-20T14:50:18Z", "message": "[FLINK-17258][network][test] Run ClassLoaderITCase#testDisposeSavepointWithCustomKvState without unaligned checkpoints\n\nThis test needs many concurent checkpoint & savepoints and this is currently not supported with unaligned checkpoints."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d16eece130935b14d48825289ae72a12dac2ac5", "author": {"user": {"login": "pnowojski", "name": "Piotr Nowojski"}}, "url": "https://github.com/apache/flink/commit/2d16eece130935b14d48825289ae72a12dac2ac5", "committedDate": "2020-05-20T14:50:18Z", "message": "[FLINK-17258][sql][test] Fix AggregateITCase.testPruneUselessAggCall missing sorted\n\nThe result of this query doesn't guarantee any ordering. This brakes with enabled unaligned checkpoints."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0d2042ea348654430863ccb51084c30714d8a47", "author": {"user": {"login": "pnowojski", "name": "Piotr Nowojski"}}, "url": "https://github.com/apache/flink/commit/d0d2042ea348654430863ccb51084c30714d8a47", "committedDate": "2020-05-20T14:50:18Z", "message": "[FLINK-17258][hotfix][network] Unify checkpoint id logging with CheckpointCoordinator"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7fa2068a283b9471384248c1bf301e3d406b5f48", "author": {"user": {"login": "pnowojski", "name": "Piotr Nowojski"}}, "url": "https://github.com/apache/flink/commit/7fa2068a283b9471384248c1bf301e3d406b5f48", "committedDate": "2020-05-20T13:46:03Z", "message": "[FLINK-17258][hotfix][network] Unify checkpoint id logging with CheckpointCoordinator"}, "afterCommit": {"oid": "d0d2042ea348654430863ccb51084c30714d8a47", "author": {"user": {"login": "pnowojski", "name": "Piotr Nowojski"}}, "url": "https://github.com/apache/flink/commit/d0d2042ea348654430863ccb51084c30714d8a47", "committedDate": "2020-05-20T14:50:18Z", "message": "[FLINK-17258][hotfix][network] Unify checkpoint id logging with CheckpointCoordinator"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4607, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}