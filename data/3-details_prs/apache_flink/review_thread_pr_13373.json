{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1MDQwNzMy", "number": 13373, "reviewThreads": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMjo1ODozMVrOEiiIHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzoyODozMlrOEi_vug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NjQ2MTc0OnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/table/runtime/batch/AvroTypesITCase.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMjo1ODozMVrOHQdybQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzo0NTo1M1rOHQfgrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAyNzMwOQ==", "bodyText": "Had to drop the logical types, because the BatchTableEnvironment fails if we have a java.time.Instant in the input DataSet. We extract BasicTypeInfo.INSTANT_TYPE_INFO for it, which is translated to TIMESTAMP_WITH_LOCAL_TIME_ZONE which fails in legacy planner.\nAfter the upgrade to avro 1.10 one of the fields of the User class is of type java.time.Instant, previously it was joda's DateTime.", "url": "https://github.com/apache/flink/pull/13373#discussion_r487027309", "createdAt": "2020-09-11T12:58:31Z", "author": {"login": "dawidwys"}, "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/table/runtime/batch/AvroTypesITCase.java", "diffHunk": "@@ -58,7 +55,7 @@\n @RunWith(Parameterized.class)\n public class AvroTypesITCase extends TableProgramsClusterTestBase {\n \n-\tprivate static final User USER_1 = User.newBuilder()\n+\tprivate static final SimpleUser USER_1 = SimpleUser.newBuilder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df666257b536825e8cb4e3497349079e9a35c51e"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA1NDE5OQ==", "bodyText": "Thanks for the explanation.", "url": "https://github.com/apache/flink/pull/13373#discussion_r487054199", "createdAt": "2020-09-11T13:43:56Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/table/runtime/batch/AvroTypesITCase.java", "diffHunk": "@@ -58,7 +55,7 @@\n @RunWith(Parameterized.class)\n public class AvroTypesITCase extends TableProgramsClusterTestBase {\n \n-\tprivate static final User USER_1 = User.newBuilder()\n+\tprivate static final SimpleUser USER_1 = SimpleUser.newBuilder()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAyNzMwOQ=="}, "originalCommit": {"oid": "df666257b536825e8cb4e3497349079e9a35c51e"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA1NTUzNA==", "bodyText": "But it would still be nice to test all types for Avro but maybe to the new Blink planner. Could we add least have a separate commit for this class? Then we can revert the changes because after FLIP-136 this test should definitely work again, no? Or does it work already today?", "url": "https://github.com/apache/flink/pull/13373#discussion_r487055534", "createdAt": "2020-09-11T13:45:53Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/table/runtime/batch/AvroTypesITCase.java", "diffHunk": "@@ -58,7 +55,7 @@\n @RunWith(Parameterized.class)\n public class AvroTypesITCase extends TableProgramsClusterTestBase {\n \n-\tprivate static final User USER_1 = User.newBuilder()\n+\tprivate static final SimpleUser USER_1 = SimpleUser.newBuilder()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAyNzMwOQ=="}, "originalCommit": {"oid": "df666257b536825e8cb4e3497349079e9a35c51e"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NjQ3Mjk5OnYy", "diffSide": "RIGHT", "path": "flink-core/src/main/java/org/apache/flink/api/java/typeutils/runtime/PojoComparator.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzowMTo1NVrOHQd5qQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzoxMzo0MFrOHQeT4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAyOTE2MQ==", "bodyText": "wouldn't it be easier (and also more performant) to simply make the field accessible in the constructor of the comparator? Going through all methods for every field access is not very beautiful.", "url": "https://github.com/apache/flink/pull/13373#discussion_r487029161", "createdAt": "2020-09-11T13:01:55Z", "author": {"login": "twalthr"}, "path": "flink-core/src/main/java/org/apache/flink/api/java/typeutils/runtime/PojoComparator.java", "diffHunk": "@@ -176,14 +181,25 @@ public void getFlatComparator(List<TypeComparator> flatComparators) {\n \t */\n \tpublic final Object accessField(Field field, Object object) {\n \t\ttry {\n-\t\t\tobject = field.get(object);\n+\t\t\tif (field.isAccessible()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed7fa522fc930a22eee7e51e87dc778ad6ad3b71"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAzNTg3Mg==", "bodyText": "It would. I changed it.", "url": "https://github.com/apache/flink/pull/13373#discussion_r487035872", "createdAt": "2020-09-11T13:13:40Z", "author": {"login": "dawidwys"}, "path": "flink-core/src/main/java/org/apache/flink/api/java/typeutils/runtime/PojoComparator.java", "diffHunk": "@@ -176,14 +181,25 @@ public void getFlatComparator(List<TypeComparator> flatComparators) {\n \t */\n \tpublic final Object accessField(Field field, Object object) {\n \t\ttry {\n-\t\t\tobject = field.get(object);\n+\t\t\tif (field.isAccessible()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAyOTE2MQ=="}, "originalCommit": {"oid": "ed7fa522fc930a22eee7e51e87dc778ad6ad3b71"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NjQ5MTcxOnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzowNzoyOFrOHQeFdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzoxNzo0MlrOHQedSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAzMjE4MA==", "bodyText": "we can simply access the member field instead of passing it through the methods, no?", "url": "https://github.com/apache/flink/pull/13373#discussion_r487032180", "createdAt": "2020-09-11T13:07:28Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java", "diffHunk": "@@ -218,7 +231,7 @@ private Object convertAvroType(Schema schema, TypeInformation<?> info, Object ob\n \t\tswitch (schema.getType()) {\n \t\t\tcase RECORD:\n \t\t\t\tif (object instanceof IndexedRecord) {\n-\t\t\t\t\treturn convertAvroRecordToRow(schema, (RowTypeInfo) info, (IndexedRecord) object);\n+\t\t\t\t\treturn convertAvroRecordToRow(schema, (RowTypeInfo) info, (IndexedRecord) object, jodaConverter);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20cabf7afcac656efb5b959fa8c1a33b76c44fb1"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAzODI4Mw==", "bodyText": "Right in this class we can. I was too fast to follow the same scheme as in the AvroRowDataDeserializationSchema were we have runtime converters instead of member methods.", "url": "https://github.com/apache/flink/pull/13373#discussion_r487038283", "createdAt": "2020-09-11T13:17:42Z", "author": {"login": "dawidwys"}, "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java", "diffHunk": "@@ -218,7 +231,7 @@ private Object convertAvroType(Schema schema, TypeInformation<?> info, Object ob\n \t\tswitch (schema.getType()) {\n \t\t\tcase RECORD:\n \t\t\t\tif (object instanceof IndexedRecord) {\n-\t\t\t\t\treturn convertAvroRecordToRow(schema, (RowTypeInfo) info, (IndexedRecord) object);\n+\t\t\t\t\treturn convertAvroRecordToRow(schema, (RowTypeInfo) info, (IndexedRecord) object, jodaConverter);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAzMjE4MA=="}, "originalCommit": {"oid": "20cabf7afcac656efb5b959fa8c1a33b76c44fb1"}, "originalPosition": 86}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NjUwMTk4OnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroToRowDataConverters.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzoxMDoxMFrOHQeL5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzoxMDoxMFrOHQeL5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAzMzgzMQ==", "bodyText": "We can simply access JodaConverter where needed as a singleton? I would not pollute this methods.", "url": "https://github.com/apache/flink/pull/13373#discussion_r487033831", "createdAt": "2020-09-11T13:10:10Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroToRowDataConverters.java", "diffHunk": "@@ -101,7 +106,7 @@ private static AvroToRowDataConverter createNullableConverter(LogicalType type)\n \t/**\n \t * Creates a runtime converter which assuming input object is not null.\n \t */\n-\tprivate static AvroToRowDataConverter createConverter(LogicalType type) {\n+\tprivate static AvroToRowDataConverter createConverter(LogicalType type, @Nullable JodaConverter jodaConverter) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20cabf7afcac656efb5b959fa8c1a33b76c44fb1"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NjU4MjE1OnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzozMTo0MVrOHQe-Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzozMTo0MVrOHQe-Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA0NjY5MQ==", "bodyText": "maybe to much optimization but should we just do the long arithmetic ourselves here and below? We are creating a lot of objects for the hot path.", "url": "https://github.com/apache/flink/pull/13373#discussion_r487046691", "createdAt": "2020-09-11T13:31:41Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java", "diffHunk": "@@ -340,10 +357,22 @@ private Time convertToTime(Object object, @Nullable JodaConverter jodaConverter)\n \t\treturn new Time(millis - LOCAL_TZ.getOffset(millis));\n \t}\n \n-\tprivate Timestamp convertToTimestamp(Object object) {\n+\tprivate Timestamp convertToTimestamp(Object object, @Nullable JodaConverter jodaConverter, boolean isMicros) {\n \t\tfinal long millis;\n \t\tif (object instanceof Long) {\n-\t\t\tmillis = (Long) object;\n+\t\t\tif (isMicros) {\n+\t\t\t\tlong micros = (Long) object;\n+\t\t\t\tInstant instant = Instant.ofEpochSecond(0)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9038509a993f32233b4406cd6f6ca713258622c5"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NjYwNzk2OnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/typeutils/AvroSchemaConverter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzozODo1NlrOHQfOnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxODoxMDoyNlrOHQo3DA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA1MDkxMQ==", "bodyText": "Shouldn't this be a SQL type like the others? Is this method actually used?", "url": "https://github.com/apache/flink/pull/13373#discussion_r487050911", "createdAt": "2020-09-11T13:38:56Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/typeutils/AvroSchemaConverter.java", "diffHunk": "@@ -272,11 +276,14 @@ private static DataType convertToDataType(Schema schema) {\n \t\t\t\treturn DataTypes.TIMESTAMP(3)\n \t\t\t\t\t\t.bridgedTo(java.sql.Timestamp.class)\n \t\t\t\t\t\t.notNull();\n-\t\t\t}\n-\t\t\tif (schema.getLogicalType() == LogicalTypes.timestampMicros()) {\n+\t\t\t} else if (schema.getLogicalType() == LogicalTypes.timestampMicros()) {\n \t\t\t\treturn DataTypes.TIMESTAMP(6)\n \t\t\t\t\t\t.bridgedTo(java.sql.Timestamp.class)\n \t\t\t\t\t\t.notNull();\n+\t\t\t} else if (schema.getLogicalType() == LogicalTypes.timeMicros()) {\n+\t\t\t\treturn DataTypes.TIME(6)\n+\t\t\t\t\t.bridgedTo(LocalTime.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9038509a993f32233b4406cd6f6ca713258622c5"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzIwODcxNg==", "bodyText": "Actually, those should be the default conversion classes from java.time. I changed that. It is not used, at least for now. We might need that later e.g. in schema-registry where we will need to convert schema retrieved from schema-registry to a SQL schema.\nIt was added as a  complementary method to org.apache.flink.formats.avro.typeutils.AvroSchemaConverter#convertToSchema(org.apache.flink.table.types.logical.LogicalType)", "url": "https://github.com/apache/flink/pull/13373#discussion_r487208716", "createdAt": "2020-09-11T18:10:26Z", "author": {"login": "dawidwys"}, "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/typeutils/AvroSchemaConverter.java", "diffHunk": "@@ -272,11 +276,14 @@ private static DataType convertToDataType(Schema schema) {\n \t\t\t\treturn DataTypes.TIMESTAMP(3)\n \t\t\t\t\t\t.bridgedTo(java.sql.Timestamp.class)\n \t\t\t\t\t\t.notNull();\n-\t\t\t}\n-\t\t\tif (schema.getLogicalType() == LogicalTypes.timestampMicros()) {\n+\t\t\t} else if (schema.getLogicalType() == LogicalTypes.timestampMicros()) {\n \t\t\t\treturn DataTypes.TIMESTAMP(6)\n \t\t\t\t\t\t.bridgedTo(java.sql.Timestamp.class)\n \t\t\t\t\t\t.notNull();\n+\t\t\t} else if (schema.getLogicalType() == LogicalTypes.timeMicros()) {\n+\t\t\t\treturn DataTypes.TIME(6)\n+\t\t\t\t\t.bridgedTo(LocalTime.class)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA1MDkxMQ=="}, "originalCommit": {"oid": "9038509a993f32233b4406cd6f6ca713258622c5"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NjYxODg0OnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/formats/avro/typeutils/AvroSchemaConverterTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzo0MTozMVrOHQfVJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzo0MTozMVrOHQfVJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA1MjU4MQ==", "bodyText": "same question as above why is this not sql.Time?", "url": "https://github.com/apache/flink/pull/13373#discussion_r487052581", "createdAt": "2020-09-11T13:41:31Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/formats/avro/typeutils/AvroSchemaConverterTest.java", "diffHunk": "@@ -193,7 +193,7 @@ private void validateUserSchema(DataType actual) {\n \t\t\t\tDataTypes.FIELD(\"type_bytes\", DataTypes.ARRAY(DataTypes.TINYINT().bridgedTo(Byte.class)).notNull()),\n \t\t\t\tDataTypes.FIELD(\"type_date\", DataTypes.DATE().bridgedTo(java.sql.Date.class).notNull()),\n \t\t\t\tDataTypes.FIELD(\"type_time_millis\", DataTypes.TIME().bridgedTo(java.sql.Time.class).notNull()),\n-\t\t\t\tDataTypes.FIELD(\"type_time_micros\", DataTypes.INT().notNull()),\n+\t\t\t\tDataTypes.FIELD(\"type_time_micros\", DataTypes.TIME(6).notNull()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9038509a993f32233b4406cd6f6ca713258622c5"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NjY4NTcyOnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-sql-avro/pom.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzo1NzozNVrOHQf-Qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzo1NzozNVrOHQf-Qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA2MzEwNg==", "bodyText": "We have a shading pattern in Flink like:\norg.apache.flink.elasticsearch6.shaded.org.apache.commons", "url": "https://github.com/apache/flink/pull/13373#discussion_r487063106", "createdAt": "2020-09-11T13:57:35Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-sql-avro/pom.xml", "diffHunk": "@@ -0,0 +1,85 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\t\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n+\t\n+\t<modelVersion>4.0.0</modelVersion>\n+\n+\t<parent>\n+\t\t<groupId>org.apache.flink</groupId>\n+\t\t<artifactId>flink-formats</artifactId>\n+\t\t<version>1.12-SNAPSHOT</version>\n+\t\t<relativePath>..</relativePath>\n+\t</parent>\n+\n+\t<artifactId>flink-sql-avro</artifactId>\n+\t<name>Flink : Formats : SQL Avro</name>\n+\n+\t<packaging>jar</packaging>\n+\n+\t<dependencies>\n+\t\t<dependency>\n+\t\t\t<groupId>org.apache.flink</groupId>\n+\t\t\t<artifactId>flink-avro</artifactId>\n+\t\t\t<version>${project.version}</version>\n+\t\t</dependency>\n+\t</dependencies>\n+\n+\t<build>\n+\t\t<plugins>\n+\t\t\t<plugin>\n+\t\t\t\t<groupId>org.apache.maven.plugins</groupId>\n+\t\t\t\t<artifactId>maven-shade-plugin</artifactId>\n+\t\t\t\t<executions>\n+\t\t\t\t\t<execution>\n+\t\t\t\t\t\t<id>shade-flink</id>\n+\t\t\t\t\t\t<phase>package</phase>\n+\t\t\t\t\t\t<goals>\n+\t\t\t\t\t\t\t<goal>shade</goal>\n+\t\t\t\t\t\t</goals>\n+\t\t\t\t\t\t<configuration>\n+\t\t\t\t\t\t\t<shadeTestJar>false</shadeTestJar>\n+\t\t\t\t\t\t\t<artifactSet>\n+\t\t\t\t\t\t\t\t<includes>\n+\t\t\t\t\t\t\t\t\t<include>org.apache.flink:flink-avro</include>\n+\t\t\t\t\t\t\t\t\t<include>org.apache.avro:avro</include>\n+\t\t\t\t\t\t\t\t\t<include>com.fasterxml.jackson.core:jackson-core</include>\n+\t\t\t\t\t\t\t\t\t<include>com.fasterxml.jackson.core:jackson-databind</include>\n+\t\t\t\t\t\t\t\t\t<include>com.fasterxml.jackson.core:jackson-annotations</include>\n+\t\t\t\t\t\t\t\t\t<include>org.apache.commons:commons-compress</include>\n+\t\t\t\t\t\t\t\t</includes>\n+\t\t\t\t\t\t\t</artifactSet>\n+\t\t\t\t\t\t\t<relocations>\n+\t\t\t\t\t\t\t\t<relocation>\n+\t\t\t\t\t\t\t\t\t<pattern>com.fasterxml.jackson</pattern>\n+\t\t\t\t\t\t\t\t\t<shadedPattern>org.apache.flink.com.fasterxml.jackson</shadedPattern>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cb9ec4b5e8daf8f4333acb2a8c09a8f2b1cfdb8"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NjY5ODIwOnYy", "diffSide": "RIGHT", "path": "flink-formats/pom.xml", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNDowMDo0MVrOHQgGAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzo1OTo0NVrOHRIM4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA2NTA5MA==", "bodyText": "Pleas also update https://flink.apache.org/downloads.html (Optional components)\nAnd https://ci.apache.org/projects/flink/flink-docs-release-1.11/dev/table/connectors/formats/avro.html (the Download link and the mentioning of Hadoop \ud83d\ude14).", "url": "https://github.com/apache/flink/pull/13373#discussion_r487065090", "createdAt": "2020-09-11T14:00:41Z", "author": {"login": "twalthr"}, "path": "flink-formats/pom.xml", "diffHunk": "@@ -81,6 +81,7 @@ under the License.\n \t\t\t<modules>\n \t\t\t\t<module>flink-sql-orc</module>\n \t\t\t\t<module>flink-sql-parquet</module>\n+\t\t\t\t<module>flink-sql-avro</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cb9ec4b5e8daf8f4333acb2a8c09a8f2b1cfdb8"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA2NTg5Mw==", "bodyText": "The org.apache.flink.tests.util.kafka.SQLClientKafkaITCase should not need to download the dependencies anymore.", "url": "https://github.com/apache/flink/pull/13373#discussion_r487065893", "createdAt": "2020-09-11T14:02:03Z", "author": {"login": "twalthr"}, "path": "flink-formats/pom.xml", "diffHunk": "@@ -81,6 +81,7 @@ under the License.\n \t\t\t<modules>\n \t\t\t\t<module>flink-sql-orc</module>\n \t\t\t\t<module>flink-sql-parquet</module>\n+\t\t\t\t<module>flink-sql-avro</module>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA2NTA5MA=="}, "originalCommit": {"oid": "2cb9ec4b5e8daf8f4333acb2a8c09a8f2b1cfdb8"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzcyMjIwOQ==", "bodyText": "BTW, I will open a PR for flink-web, once I merge this PR.", "url": "https://github.com/apache/flink/pull/13373#discussion_r487722209", "createdAt": "2020-09-14T07:59:45Z", "author": {"login": "dawidwys"}, "path": "flink-formats/pom.xml", "diffHunk": "@@ -81,6 +81,7 @@ under the License.\n \t\t\t<modules>\n \t\t\t\t<module>flink-sql-orc</module>\n \t\t\t\t<module>flink-sql-parquet</module>\n+\t\t\t\t<module>flink-sql-avro</module>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA2NTA5MA=="}, "originalCommit": {"oid": "2cb9ec4b5e8daf8f4333acb2a8c09a8f2b1cfdb8"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MTI0NzM0OnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/typeutils/AvroSchemaConverter.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzowODoxMVrOHRGgSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODoyODozMVrOHRJNkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzY5NDQwOA==", "bodyText": "Actually, this should be DataTypes.BYTES() which would also match to Avro's BYTES type.", "url": "https://github.com/apache/flink/pull/13373#discussion_r487694408", "createdAt": "2020-09-14T07:08:11Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/typeutils/AvroSchemaConverter.java", "diffHunk": "@@ -255,28 +257,24 @@ private static DataType convertToDataType(Schema schema) {\n \t\t\t\t\t\tdecimalType.getScale())\n \t\t\t\t\t\t.notNull();\n \t\t\t}\n-\t\t\treturn DataTypes.ARRAY(DataTypes.TINYINT().bridgedTo(Byte.class))\n-\t\t\t\t\t.notNull();\n+\t\t\treturn DataTypes.ARRAY(DataTypes.TINYINT()).notNull();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cac5bf3b0420f10b9480c8e1e8e0b00884612ee7"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzcyMzI3OA==", "bodyText": "or is Avro using Byte[] instead of byte[]", "url": "https://github.com/apache/flink/pull/13373#discussion_r487723278", "createdAt": "2020-09-14T08:01:31Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/typeutils/AvroSchemaConverter.java", "diffHunk": "@@ -255,28 +257,24 @@ private static DataType convertToDataType(Schema schema) {\n \t\t\t\t\t\tdecimalType.getScale())\n \t\t\t\t\t\t.notNull();\n \t\t\t}\n-\t\t\treturn DataTypes.ARRAY(DataTypes.TINYINT().bridgedTo(Byte.class))\n-\t\t\t\t\t.notNull();\n+\t\t\treturn DataTypes.ARRAY(DataTypes.TINYINT()).notNull();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzY5NDQwOA=="}, "originalCommit": {"oid": "cac5bf3b0420f10b9480c8e1e8e0b00884612ee7"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzczODc2OQ==", "bodyText": "Avro uses ByteBuffer, therefore we do a conversion there. I will change it to DataTypes.BYTES().", "url": "https://github.com/apache/flink/pull/13373#discussion_r487738769", "createdAt": "2020-09-14T08:28:31Z", "author": {"login": "dawidwys"}, "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/typeutils/AvroSchemaConverter.java", "diffHunk": "@@ -255,28 +257,24 @@ private static DataType convertToDataType(Schema schema) {\n \t\t\t\t\t\tdecimalType.getScale())\n \t\t\t\t\t\t.notNull();\n \t\t\t}\n-\t\t\treturn DataTypes.ARRAY(DataTypes.TINYINT().bridgedTo(Byte.class))\n-\t\t\t\t\t.notNull();\n+\t\t\treturn DataTypes.ARRAY(DataTypes.TINYINT()).notNull();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzY5NDQwOA=="}, "originalCommit": {"oid": "cac5bf3b0420f10b9480c8e1e8e0b00884612ee7"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MTI2MzA2OnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzoxMzowNlrOHRGpaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzoxMzowNlrOHRGpaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzY5Njc0Nw==", "bodyText": "nit: private?", "url": "https://github.com/apache/flink/pull/13373#discussion_r487696747", "createdAt": "2020-09-14T07:13:06Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java", "diffHunk": "@@ -75,12 +75,11 @@\n  */\n @PublicEvolving\n public class AvroRowDeserializationSchema extends AbstractDeserializationSchema<Row> {\n-\n \t/**\n \t * Used for time conversions into SQL types.\n \t */\n \tprivate static final TimeZone LOCAL_TZ = TimeZone.getDefault();\n-\n+\tpublic static final long MICROS_PER_SECOND = 1_000_000L;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a639495f2bc3cef6fedf52492e546ebeb6306be5"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MTMwNTMzOnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/table/runtime/batch/AvroTypesITCase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzoyNTo0OVrOHRHCqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzoyNTo0OVrOHRHCqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzcwMzIxMQ==", "bodyText": "can we add a TODO here, because actually the record should pass the Table API unmodified, but this will come with FLUP-136", "url": "https://github.com/apache/flink/pull/13373#discussion_r487703211", "createdAt": "2020-09-14T07:25:49Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/table/runtime/batch/AvroTypesITCase.java", "diffHunk": "@@ -147,24 +150,26 @@ public AvroTypesITCase(\n \n \t@Test\n \tpublic void testAvroToRow() throws Exception {\n-\t\tExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();\n+\t\tStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n \t\tenv.getConfig().registerTypeWithKryoSerializer(LocalDate.class, AvroKryoSerializerUtils.JodaLocalDateSerializer.class);\n \t\tenv.getConfig().registerTypeWithKryoSerializer(LocalTime.class, AvroKryoSerializerUtils.JodaLocalTimeSerializer.class);\n-\t\tBatchTableEnvironment tEnv = BatchTableEnvironment.create(env, config());\n+\t\tStreamTableEnvironment tEnv = StreamTableEnvironment.create(env, EnvironmentSettings.newInstance().useBlinkPlanner().build());\n \n-\t\tTable t = tEnv.fromDataSet(testData(env));\n+\t\tTable t = tEnv.fromDataStream(testData(env));\n \t\tTable result = t.select($(\"*\"));\n \n-\t\tList<Row> results = tEnv.toDataSet(result, Row.class).collect();\n+\t\tIterable<Row> users = () -> DataStreamUtils.collect(tEnv.toAppendStream(result, Row.class));\n+\t\tList<Row> results = StreamSupport\n+\t\t\t.stream(users.spliterator(), false)\n+\t\t\t.collect(Collectors.toList());\n \t\tString expected =\n \t\t\t\"black,null,Whatever,[true],[hello],true,java.nio.HeapByteBuffer[pos=0 lim=10 cap=10],\" +\n \t\t\t\"2014-03-01,java.nio.HeapByteBuffer[pos=0 lim=2 cap=2],[7, -48],0.0,GREEN,\" +\n \t\t\t\"[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],42,{},null,null,null,123456,\" +\n \t\t\t\"12:12:12.000,123456,2014-03-01T12:12:12.321Z,null\\n\" +\n \t\t\t\"blue,null,Charlie,[],[],false,java.nio.HeapByteBuffer[pos=0 lim=10 cap=10],2014-03-01,\" +\n \t\t\t\"java.nio.HeapByteBuffer[pos=0 lim=2 cap=2],[7, -48],1.337,RED,null,1337,{},\" +\n-\t\t\t\"{\\\"num\\\": 42, \\\"street\\\": \\\"Bakerstreet\\\", \\\"city\\\": \\\"Berlin\\\", \\\"state\\\": \" +\n-\t\t\t\"\\\"Berlin\\\", \\\"zip\\\": \\\"12049\\\"},null,null,123456,12:12:12.000,123456,\" +\n+\t\t\t\"Berlin,42,Berlin,Bakerstreet,12049,null,null,123456,12:12:12.000,123456,\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0122e0683100ca2e8e1190b940cdd3a7166a19d"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MTMwODcyOnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/table/runtime/batch/AvroTypesITCase.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzoyNjo0OFrOHRHEnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwOToxNDozN1rOHRK7iA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzcwMzcwOQ==", "bodyText": "These should not be necessary in our tests, right?", "url": "https://github.com/apache/flink/pull/13373#discussion_r487703709", "createdAt": "2020-09-14T07:26:48Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/table/runtime/batch/AvroTypesITCase.java", "diffHunk": "@@ -147,24 +150,26 @@ public AvroTypesITCase(\n \n \t@Test\n \tpublic void testAvroToRow() throws Exception {\n-\t\tExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();\n+\t\tStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n \t\tenv.getConfig().registerTypeWithKryoSerializer(LocalDate.class, AvroKryoSerializerUtils.JodaLocalDateSerializer.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0122e0683100ca2e8e1190b940cdd3a7166a19d"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc0ODkyNg==", "bodyText": "We do need those in a0122e0 as we still use the joda time in this commit. We can remove them, (and we do in the next commit).\nThe default Kryo serialization does not work well.", "url": "https://github.com/apache/flink/pull/13373#discussion_r487748926", "createdAt": "2020-09-14T08:45:06Z", "author": {"login": "dawidwys"}, "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/table/runtime/batch/AvroTypesITCase.java", "diffHunk": "@@ -147,24 +150,26 @@ public AvroTypesITCase(\n \n \t@Test\n \tpublic void testAvroToRow() throws Exception {\n-\t\tExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();\n+\t\tStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n \t\tenv.getConfig().registerTypeWithKryoSerializer(LocalDate.class, AvroKryoSerializerUtils.JodaLocalDateSerializer.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzcwMzcwOQ=="}, "originalCommit": {"oid": "a0122e0683100ca2e8e1190b940cdd3a7166a19d"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc2NjkyMA==", "bodyText": "BTW, after the comment, I removed the JodaLocalDateSerializer and JodaLocalTimeSerializer classes in 453d02c as they are no longer used.", "url": "https://github.com/apache/flink/pull/13373#discussion_r487766920", "createdAt": "2020-09-14T09:14:37Z", "author": {"login": "dawidwys"}, "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/table/runtime/batch/AvroTypesITCase.java", "diffHunk": "@@ -147,24 +150,26 @@ public AvroTypesITCase(\n \n \t@Test\n \tpublic void testAvroToRow() throws Exception {\n-\t\tExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();\n+\t\tStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n \t\tenv.getConfig().registerTypeWithKryoSerializer(LocalDate.class, AvroKryoSerializerUtils.JodaLocalDateSerializer.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzcwMzcwOQ=="}, "originalCommit": {"oid": "a0122e0683100ca2e8e1190b940cdd3a7166a19d"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MTMxNDUwOnYy", "diffSide": "RIGHT", "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/table/runtime/batch/AvroTypesITCase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzoyODozMlrOHRHH-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzoyODozMlrOHRHH-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzcwNDU2OQ==", "bodyText": "nit: We recently added a CollectionUtils.iterableToList maybe this is easier to read than the StreamSupport class.", "url": "https://github.com/apache/flink/pull/13373#discussion_r487704569", "createdAt": "2020-09-14T07:28:32Z", "author": {"login": "twalthr"}, "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/table/runtime/batch/AvroTypesITCase.java", "diffHunk": "@@ -147,24 +150,26 @@ public AvroTypesITCase(\n \n \t@Test\n \tpublic void testAvroToRow() throws Exception {\n-\t\tExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();\n+\t\tStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n \t\tenv.getConfig().registerTypeWithKryoSerializer(LocalDate.class, AvroKryoSerializerUtils.JodaLocalDateSerializer.class);\n \t\tenv.getConfig().registerTypeWithKryoSerializer(LocalTime.class, AvroKryoSerializerUtils.JodaLocalTimeSerializer.class);\n-\t\tBatchTableEnvironment tEnv = BatchTableEnvironment.create(env, config());\n+\t\tStreamTableEnvironment tEnv = StreamTableEnvironment.create(env, EnvironmentSettings.newInstance().useBlinkPlanner().build());\n \n-\t\tTable t = tEnv.fromDataSet(testData(env));\n+\t\tTable t = tEnv.fromDataStream(testData(env));\n \t\tTable result = t.select($(\"*\"));\n \n-\t\tList<Row> results = tEnv.toDataSet(result, Row.class).collect();\n+\t\tIterable<Row> users = () -> DataStreamUtils.collect(tEnv.toAppendStream(result, Row.class));\n+\t\tList<Row> results = StreamSupport", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0122e0683100ca2e8e1190b940cdd3a7166a19d"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 267, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}