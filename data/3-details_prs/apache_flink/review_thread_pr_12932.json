{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUyNDU1NDY2", "number": 12932, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMjoyNjo0OVrOEQmUwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMjoyODo1N1rOEQmXvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1ODQwNTc3OnYy", "diffSide": "RIGHT", "path": "flink-runtime/src/main/java/org/apache/flink/runtime/concurrent/FutureUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMjoyNjo1MFrOG01izg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMjoyNjo1MFrOG01izg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA1NjM5OA==", "bodyText": "missing @Nullable", "url": "https://github.com/apache/flink/pull/12932#discussion_r458056398", "createdAt": "2020-07-21T12:26:50Z", "author": {"login": "zentol"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/concurrent/FutureUtils.java", "diffHunk": "@@ -439,10 +453,30 @@ public RetryException(Throwable cause) {\n \t\tlong timeout,\n \t\tTimeUnit timeUnit,\n \t\tExecutor timeoutFailExecutor) {\n+\t\treturn orTimeout(future, timeout, timeUnit, timeoutFailExecutor, null);\n+\t}\n+\n+\t/**\n+\t * Times the given future out after the timeout.\n+\t *\n+\t * @param future to time out\n+\t * @param timeout after which the given future is timed out\n+\t * @param timeUnit time unit of the timeout\n+\t * @param timeoutFailExecutor executor that will complete the future exceptionally after the timeout is reached\n+\t * @param timeoutMsg timeout message for exception\n+\t * @param <T> type of the given future\n+\t * @return The timeout enriched future\n+\t */\n+\tpublic static <T> CompletableFuture<T> orTimeout(\n+\t\tCompletableFuture<T> future,\n+\t\tlong timeout,\n+\t\tTimeUnit timeUnit,\n+\t\tExecutor timeoutFailExecutor,\n+\t\tString timeoutMsg) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f53c211684c08a543b06c56ac5b40f5d02247a80"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1ODQxMzQzOnYy", "diffSide": "RIGHT", "path": "flink-runtime/src/main/java/org/apache/flink/runtime/concurrent/FutureUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMjoyODo1N1rOG01njQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMjoyODo1N1rOG01njQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA1NzYxMw==", "bodyText": "this distinction isn't necessary; new TimeoutException(timeoutMsg) will work in any case.", "url": "https://github.com/apache/flink/pull/12932#discussion_r458057613", "createdAt": "2020-07-21T12:28:57Z", "author": {"login": "zentol"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/concurrent/FutureUtils.java", "diffHunk": "@@ -1026,14 +1060,16 @@ public void onComplete(Throwable failure, U success) {\n \tprivate static final class Timeout implements Runnable {\n \n \t\tprivate final CompletableFuture<?> future;\n+\t\tprivate final String timeoutMsg;\n \n-\t\tprivate Timeout(CompletableFuture<?> future) {\n+\t\tprivate Timeout(CompletableFuture<?> future, @Nullable String timeoutMsg) {\n \t\t\tthis.future = checkNotNull(future);\n+\t\t\tthis.timeoutMsg = timeoutMsg;\n \t\t}\n \n \t\t@Override\n \t\tpublic void run() {\n-\t\t\tfuture.completeExceptionally(new TimeoutException());\n+\t\t\tfuture.completeExceptionally(null == timeoutMsg ? new TimeoutException() : new TimeoutException(timeoutMsg));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f53c211684c08a543b06c56ac5b40f5d02247a80"}, "originalPosition": 70}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4965, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}