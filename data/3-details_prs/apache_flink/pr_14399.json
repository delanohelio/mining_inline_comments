{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQwOTU3OTUx", "number": 14399, "title": "[FLINK-17827] [scala-shell] scala-shell.sh should fail early if no mo\u2026", "bodyText": "\u2026de is specified, or have default logging settings\n\nWhat is the purpose of the change\nTry to avoid the exception that log4j.properties and logback.xml are set wrongly when illegal mode or no mode is specified when running Flink Scala shell using start-scala-shell.sh\nBrief change log\n\nAdded an additional if-else branch to set the default log4j.properties and logback.xml when  illegal mode or no mode is provided.\n\nVerifying this change\nThis change is a trivial rework / code cleanup without any test coverage.\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): no\nThe public API, i.e., is any changed class annotated with @Public(Evolving): no\nThe serializers: no\nThe runtime per-record code paths (performance sensitive): no\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: no\nThe S3 file system connector: no\n\nDocumentation\n\nDoes this pull request introduce a new feature? no\nIf yes, how is the feature documented? not applicable", "createdAt": "2020-12-16T07:30:36Z", "url": "https://github.com/apache/flink/pull/14399", "merged": true, "mergeCommit": {"oid": "507e7c57af0d2c5ca5f6ff7e918355a6399bcc7e"}, "closed": true, "closedAt": "2021-01-04T12:07:22Z", "author": {"login": "paul8263"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmpqXCAH2gAyNTQwOTU3OTUxOmI3NzY2ODY1N2YzNjRkODc5OTk1NTZlZTc0NmU1ZDk5NWI3OTQ0M2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABds1J-ZAH2gAyNTQwOTU3OTUxOmVhODVhNGZjNmJjOGIwMzZmNDM0ZTVhZWVkYmYwNGEwNjJmOWE3OTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b77668657f364d87999556ee746e5d995b79443f", "author": {"user": {"login": "paul8263", "name": null}}, "url": "https://github.com/apache/flink/commit/b77668657f364d87999556ee746e5d995b79443f", "committedDate": "2020-12-16T07:18:44Z", "message": "[FLINK-17827] [scala-shell] scala-shell.sh should fail early if no mode is specified, or have default logging settings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5OTk3NDM1", "url": "https://github.com/apache/flink/pull/14399#pullrequestreview-559997435", "createdAt": "2020-12-30T10:47:16Z", "commit": {"oid": "b77668657f364d87999556ee746e5d995b79443f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQxMDo0NzoxNlrOIMpk2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQxMDo0NzoxNlrOIMpk2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDEzNTAwMw==", "bodyText": "maybe we could simplify this further:\nif yarn {\n  use the session files\nelse {\n  use default files\n}", "url": "https://github.com/apache/flink/pull/14399#discussion_r550135003", "createdAt": "2020-12-30T10:47:16Z", "author": {"login": "zentol"}, "path": "flink-scala-shell/start-script/start-scala-shell.sh", "diffHunk": "@@ -86,11 +86,15 @@ if [[ ($MODE = \"local\") || ($MODE = \"remote\") ]]\n then\n     LOG4J_CONFIG=log4j.properties\n     LOGBACK_CONFIG=logback.xml\n-elif [[ $1 = \"yarn\" ]]\n+elif [[ $MODE = \"yarn\" ]]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b77668657f364d87999556ee746e5d995b79443f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d12faf957a2e129df5a32031e9a88e09f7b6ec7", "author": {"user": {"login": "paul8263", "name": null}}, "url": "https://github.com/apache/flink/commit/5d12faf957a2e129df5a32031e9a88e09f7b6ec7", "committedDate": "2020-12-31T07:27:36Z", "message": "[FLINK-17827] [scala-shell] scala-shell.sh should fail early if no mode is specified, or have default logging settings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwOTc5Nzk2", "url": "https://github.com/apache/flink/pull/14399#pullrequestreview-560979796", "createdAt": "2021-01-04T12:04:49Z", "commit": {"oid": "5d12faf957a2e129df5a32031e9a88e09f7b6ec7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQxMjowNDo0OVrOINvUog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQxMjowNDo0OVrOINvUog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTI3NzczMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tLOG4J_CONFIG=log4j-session.properties\n          \n          \n            \n                LOG4J_CONFIG=log4j-session.properties", "url": "https://github.com/apache/flink/pull/14399#discussion_r551277730", "createdAt": "2021-01-04T12:04:49Z", "author": {"login": "zentol"}, "path": "flink-scala-shell/start-script/start-scala-shell.sh", "diffHunk": "@@ -82,15 +82,15 @@ fi\n MODE=$1\n LOG=$FLINK_LOG_DIR/flink-$FLINK_IDENT_STRING-scala-shell-$MODE-$HOSTNAME.log\n \n-if [[ ($MODE = \"local\") || ($MODE = \"remote\") ]]\n+if [[ $MODE = \"yarn\" ]]\n then\n-    LOG4J_CONFIG=log4j.properties\n-    LOGBACK_CONFIG=logback.xml\n-elif [[ $1 = \"yarn\" ]]\n-then\n-    LOG4J_CONFIG=log4j-session.properties\n+\tLOG4J_CONFIG=log4j-session.properties", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d12faf957a2e129df5a32031e9a88e09f7b6ec7"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwOTc5OTA0", "url": "https://github.com/apache/flink/pull/14399#pullrequestreview-560979904", "createdAt": "2021-01-04T12:05:01Z", "commit": {"oid": "5d12faf957a2e129df5a32031e9a88e09f7b6ec7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQxMjowNTowMVrOINvU7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQxMjowNTowMVrOINvU7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTI3NzgwNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tLOG4J_CONFIG=log4j.properties\n          \n          \n            \n                LOG4J_CONFIG=log4j.properties", "url": "https://github.com/apache/flink/pull/14399#discussion_r551277806", "createdAt": "2021-01-04T12:05:01Z", "author": {"login": "zentol"}, "path": "flink-scala-shell/start-script/start-scala-shell.sh", "diffHunk": "@@ -82,15 +82,15 @@ fi\n MODE=$1\n LOG=$FLINK_LOG_DIR/flink-$FLINK_IDENT_STRING-scala-shell-$MODE-$HOSTNAME.log\n \n-if [[ ($MODE = \"local\") || ($MODE = \"remote\") ]]\n+if [[ $MODE = \"yarn\" ]]\n then\n-    LOG4J_CONFIG=log4j.properties\n-    LOGBACK_CONFIG=logback.xml\n-elif [[ $1 = \"yarn\" ]]\n-then\n-    LOG4J_CONFIG=log4j-session.properties\n+\tLOG4J_CONFIG=log4j-session.properties\n     LOGBACK_CONFIG=logback-session.xml\n     FLINK_CLASSPATH=$FLINK_CLASSPATH:$HADOOP_CLASSPATH:$HADOOP_CONF_DIR:$YARN_CONF_DIR\n+else\n+\t# Set the default log config when MODE is something other than yarn. eg: local, remote or other invalid mode.\n+\tLOG4J_CONFIG=log4j.properties", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d12faf957a2e129df5a32031e9a88e09f7b6ec7"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91e6817de4241e28ed3fce17a737d651db577921", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/91e6817de4241e28ed3fce17a737d651db577921", "committedDate": "2021-01-04T12:05:04Z", "message": "Update flink-scala-shell/start-script/start-scala-shell.sh"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26dc9b99a572a9c5d8db86cc829cf36fae3cd027", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/26dc9b99a572a9c5d8db86cc829cf36fae3cd027", "committedDate": "2021-01-04T12:05:17Z", "message": "Update flink-scala-shell/start-script/start-scala-shell.sh"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwOTgwMjgz", "url": "https://github.com/apache/flink/pull/14399#pullrequestreview-560980283", "createdAt": "2021-01-04T12:05:43Z", "commit": {"oid": "26dc9b99a572a9c5d8db86cc829cf36fae3cd027"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQxMjowNTo0M1rOINvWEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQxMjowNTo0M1rOINvWEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTI3ODA5OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t# Set the default log config when MODE is something other than yarn. eg: local, remote or other invalid mode.\n          \n          \n            \n                # Set the default log config when MODE is something other than yarn. eg: local, remote or other invalid mode.", "url": "https://github.com/apache/flink/pull/14399#discussion_r551278098", "createdAt": "2021-01-04T12:05:43Z", "author": {"login": "zentol"}, "path": "flink-scala-shell/start-script/start-scala-shell.sh", "diffHunk": "@@ -82,15 +82,15 @@ fi\n MODE=$1\n LOG=$FLINK_LOG_DIR/flink-$FLINK_IDENT_STRING-scala-shell-$MODE-$HOSTNAME.log\n \n-if [[ ($MODE = \"local\") || ($MODE = \"remote\") ]]\n-then\n-    LOG4J_CONFIG=log4j.properties\n-    LOGBACK_CONFIG=logback.xml\n-elif [[ $1 = \"yarn\" ]]\n+if [[ $MODE = \"yarn\" ]]\n then\n     LOG4J_CONFIG=log4j-session.properties\n     LOGBACK_CONFIG=logback-session.xml\n     FLINK_CLASSPATH=$FLINK_CLASSPATH:$HADOOP_CLASSPATH:$HADOOP_CONF_DIR:$YARN_CONF_DIR\n+else\n+\t# Set the default log config when MODE is something other than yarn. eg: local, remote or other invalid mode.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26dc9b99a572a9c5d8db86cc829cf36fae3cd027"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea85a4fc6bc8b036f434e5aeedbf04a062f9a793", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/ea85a4fc6bc8b036f434e5aeedbf04a062f9a793", "committedDate": "2021-01-04T12:05:46Z", "message": "Update flink-scala-shell/start-script/start-scala-shell.sh"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3631, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}