{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNjU3ODkx", "number": 13642, "title": "[task][hotfix] Remove PipelinedSubpartition.addBufferConsumer method", "bodyText": "What is the purpose of the change\nRemove duplicated PipelinedSubpartition.addBufferConsumer method and use PipelinedSubpartition.add() instead.\nVerifying this change\nThis change is a trivial rework without any test coverage.\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): no\nThe public API, i.e., is any changed class annotated with @Public(Evolving): no\nThe serializers: no\nThe runtime per-record code paths (performance sensitive): no\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: no\nThe S3 file system connector: no\n\nDocumentation\n\nDoes this pull request introduce a new feature? no\nIf yes, how is the feature documented? no", "createdAt": "2020-10-14T21:16:38Z", "url": "https://github.com/apache/flink/pull/13642", "merged": true, "mergeCommit": {"oid": "6974e22703a7f46651ec1e7fa3f42de2dacf42e1"}, "closed": true, "closedAt": "2020-10-21T07:34:29Z", "author": {"login": "rkhachatryan"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSukPCgFqTUwOTIwMDEzOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSxnr1AFqTUwOTM2NjYyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MjAwMTM4", "url": "https://github.com/apache/flink/pull/13642#pullrequestreview-509200138", "createdAt": "2020-10-15T09:42:27Z", "commit": {"oid": "04f8d715a9a672b0d832e9b9e067294376eae211"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwOTo0MjoyN1rOHh_eyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwOTo0MjoyN1rOHh_eyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQwNTEyOA==", "bodyText": "IOException? (org.apache.flink.runtime.checkpoint.channel.ChannelStateChunkReader#readChunk already can handle IOException).", "url": "https://github.com/apache/flink/pull/13642#discussion_r505405128", "createdAt": "2020-10-15T09:42:27Z", "author": {"login": "pnowojski"}, "path": "flink-runtime/src/main/java/org/apache/flink/runtime/checkpoint/channel/RecoveredChannelStateHandler.java", "diffHunk": "@@ -101,7 +101,10 @@ private RecoveredInputChannel getChannel(InputChannelInfo info) {\n \tpublic void recover(ResultSubpartitionInfo subpartitionInfo, Tuple2<BufferBuilder, BufferConsumer> bufferBuilderAndConsumer) {\n \t\tbufferBuilderAndConsumer.f0.finish();\n \t\tif (bufferBuilderAndConsumer.f1.isDataAvailable()) {\n-\t\t\tgetSubpartition(subpartitionInfo).addBufferConsumer(bufferBuilderAndConsumer.f1);\n+\t\t\tboolean added = getSubpartition(subpartitionInfo).add(bufferBuilderAndConsumer.f1);\n+\t\t\tif (!added) {\n+\t\t\t\tthrow new RuntimeException(\"Buffer consumer couldn't be added to ResultSubpartition\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04f8d715a9a672b0d832e9b9e067294376eae211"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a808e97a4bd54c56e3b3eeb52d2c73b45366a34", "author": {"user": {"login": "rkhachatryan", "name": "Roman"}}, "url": "https://github.com/apache/flink/commit/0a808e97a4bd54c56e3b3eeb52d2c73b45366a34", "committedDate": "2020-10-15T10:00:52Z", "message": "[task][hotfix] Remove PipelinedSubpartition.addBufferConsumer method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04f8d715a9a672b0d832e9b9e067294376eae211", "author": {"user": {"login": "rkhachatryan", "name": "Roman"}}, "url": "https://github.com/apache/flink/commit/04f8d715a9a672b0d832e9b9e067294376eae211", "committedDate": "2020-10-14T12:03:43Z", "message": "[task][hotfix] Remove PipelinedSubpartition.addBufferConsumer method"}, "afterCommit": {"oid": "0a808e97a4bd54c56e3b3eeb52d2c73b45366a34", "author": {"user": {"login": "rkhachatryan", "name": "Roman"}}, "url": "https://github.com/apache/flink/commit/0a808e97a4bd54c56e3b3eeb52d2c73b45366a34", "committedDate": "2020-10-15T10:00:52Z", "message": "[task][hotfix] Remove PipelinedSubpartition.addBufferConsumer method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MzY2NjI1", "url": "https://github.com/apache/flink/pull/13642#pullrequestreview-509366625", "createdAt": "2020-10-15T13:16:34Z", "commit": {"oid": "0a808e97a4bd54c56e3b3eeb52d2c73b45366a34"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3278, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}