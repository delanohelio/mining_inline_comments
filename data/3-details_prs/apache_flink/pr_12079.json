{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MDAzMjk4", "number": 12079, "title": "[FLINK-17609][python] Execute the script directly when user specified\u2026", "bodyText": "What is the purpose of the change\nThis pull request change the constructPythonCommands in PythonDriver to directly construct the execution command with the user specified script when user applies the \"-py\" option and specifies the entry point script file path, rather than run as a module.\nBrief change log\n\nchange the entryPointModule to be nullable in PythonDriverOptions.\ndelete the code section which will get the module name of entry point script when it is specified in PythonDriverOptionsParserFactory.\nno need to add -m option when entry point script is specified in constructPythonCommand()\n\nVerifying this change\nThis change is already covered by existing tests, such as test cases in PythonDriverTest:\n\ntestConstructCommandsWithEntryPointModule\ntestConstructCommandsWithEntryPointScript\n\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): ( no)\nThe public API, i.e., is any changed class annotated with @Public(Evolving): ( no)\nThe serializers: ( no )\nThe runtime per-record code paths (performance sensitive): ( no )\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: ( no )\nThe S3 file system connector: ( no )\n\nDocumentation\n\nDoes this pull request introduce a new feature? ( no)", "createdAt": "2020-05-11T10:10:09Z", "url": "https://github.com/apache/flink/pull/12079", "merged": true, "mergeCommit": {"oid": "89d46fac30cdf8b86ae9709bf86f4d9d42802014"}, "closed": true, "closedAt": "2020-05-12T08:28:37Z", "author": {"login": "shuiqiangchen"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgb6fbgFqTQwOTY3MzM1Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgf-8YAFqTQwOTgxMzMzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NjczMzU2", "url": "https://github.com/apache/flink/pull/12079#pullrequestreview-409673356", "createdAt": "2020-05-12T03:27:41Z", "commit": {"oid": "d62193d21d9c4bf67fc7a3517adb08531211a38a"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMzoyNzo0MlrOGT0vig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMzoyODowMlrOGT0v0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ0MDI2Ng==", "bodyText": "Mark as Nullable", "url": "https://github.com/apache/flink/pull/12079#discussion_r423440266", "createdAt": "2020-05-12T03:27:42Z", "author": {"login": "dianfu"}, "path": "flink-python/src/main/java/org/apache/flink/client/python/PythonDriverOptions.java", "diffHunk": "@@ -40,7 +40,6 @@\n \t@Nonnull\n \tprivate List<String> programArgs;\n \n-\t@Nonnull", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d62193d21d9c4bf67fc7a3517adb08531211a38a"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ0MDMzOA==", "bodyText": "Mark as Nullable", "url": "https://github.com/apache/flink/pull/12079#discussion_r423440338", "createdAt": "2020-05-12T03:28:02Z", "author": {"login": "dianfu"}, "path": "flink-python/src/main/java/org/apache/flink/client/python/PythonDriverOptions.java", "diffHunk": "@@ -58,7 +57,7 @@ String getEntryPointModule() {\n \t\tString entryPointModule,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d62193d21d9c4bf67fc7a3517adb08531211a38a"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfe3576178e73bb6c606ef9de00ac4225d8830e2", "author": {"user": {"login": "shuiqiangchen", "name": "Shuiqiang Chen"}}, "url": "https://github.com/apache/flink/commit/cfe3576178e73bb6c606ef9de00ac4225d8830e2", "committedDate": "2020-05-12T03:49:00Z", "message": "[FLINK-17609][python] Execute the script directly when user specified the entry script with \"-py\" rather than run as module."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d62193d21d9c4bf67fc7a3517adb08531211a38a", "author": {"user": {"login": "shuiqiangchen", "name": "Shuiqiang Chen"}}, "url": "https://github.com/apache/flink/commit/d62193d21d9c4bf67fc7a3517adb08531211a38a", "committedDate": "2020-05-11T09:51:43Z", "message": "[FLINK-17609][python] Execute the script directly when user specified the entry script with \"-py\" rather than run as module."}, "afterCommit": {"oid": "cfe3576178e73bb6c606ef9de00ac4225d8830e2", "author": {"user": {"login": "shuiqiangchen", "name": "Shuiqiang Chen"}}, "url": "https://github.com/apache/flink/commit/cfe3576178e73bb6c606ef9de00ac4225d8830e2", "committedDate": "2020-05-12T03:49:00Z", "message": "[FLINK-17609][python] Execute the script directly when user specified the entry script with \"-py\" rather than run as module."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5ODEzMzMz", "url": "https://github.com/apache/flink/pull/12079#pullrequestreview-409813333", "createdAt": "2020-05-12T08:27:28Z", "commit": {"oid": "cfe3576178e73bb6c606ef9de00ac4225d8830e2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4288, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}