{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3OTcxMjM1", "number": 12153, "title": "[FLINK-16966][metrics][infuxdb] Convert InfluxDB reporter to plugin", "bodyText": "What is the purpose of the change\nConvert InfluxDB reporter to plugin,Set SPI configuration for reporter\nBrief change log\n(for example:)\n\nThe TaskInfo is stored in the blob store on job creation time as a persistent artifact\nDeployments RPC transmits only the blob storage reference\nTaskManagers retrieve the TaskInfo from the blob cache\n\nVerifying this change\n(Please pick either of the following options)\nThis change is a trivial rework / code cleanup without any test coverage.\n(or)\nThis change is already covered by existing tests, such as (please describe tests).\n(or)\nThis change added tests and can be verified as follows:\n(example:)\n\nAdded integration tests for end-to-end deployment with large payloads (100MB)\nExtended integration test for recovery after master (JobManager) failure\nAdded test that validates that TaskInfo is transferred only once across recoveries\nManually verified the change by running a 4 node cluser with 2 JobManagers and 4 TaskManagers, a stateful streaming program, and killing one JobManager and two TaskManagers during the execution, verifying that recovery happens correctly.\n\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (yes / no)\nThe public API, i.e., is any changed class annotated with @Public(Evolving): (yes / no)\nThe serializers: (yes / no / don't know)\nThe runtime per-record code paths (performance sensitive): (yes / no / don't know)\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: (yes / no / don't know)\nThe S3 file system connector: (yes / no / don't know)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (yes / no)\nIf yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)", "createdAt": "2020-05-14T12:43:54Z", "url": "https://github.com/apache/flink/pull/12153", "merged": true, "mergeCommit": {"oid": "fab8bf73e99a44663e1af631c19393f0dd571ce7"}, "closed": true, "closedAt": "2020-05-17T12:51:47Z", "author": {"login": "complone"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchM1q8AH2gAyNDE3OTcxMjM1OjE2OWVkNGZhZWRmYmNkOTYyMTNlZTE3Y2UxOWQ1ZjE5YmI2YWFmYzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABciGs05AH2gAyNDE3OTcxMjM1OmExNmE3MTFiNzJjMzkzN2I5YzZhOTExYmQ3ZjQyMGQ5NDc2YzZkMWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "169ed4faedfbcd96213ee17ce19d5f19bb6aafc1", "author": {"user": {"login": "complone", "name": "windWheel"}}, "url": "https://github.com/apache/flink/commit/169ed4faedfbcd96213ee17ce19d5f19bb6aafc1", "committedDate": "2020-05-14T12:43:04Z", "message": "[FLINK-16966][metrics][infuxdb] Convert InfluxDB reporter to plugin"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMDk1MDI5", "url": "https://github.com/apache/flink/pull/12153#pullrequestreview-412095029", "createdAt": "2020-05-14T18:53:58Z", "commit": {"oid": "169ed4faedfbcd96213ee17ce19d5f19bb6aafc1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo1Mzo1OFrOGVp9wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo1Mzo1OFrOGVp9wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM2MDgzNA==", "bodyText": "This file is missing the apache license header.", "url": "https://github.com/apache/flink/pull/12153#discussion_r425360834", "createdAt": "2020-05-14T18:53:58Z", "author": {"login": "zentol"}, "path": "flink-metrics/flink-metrics-influxdb/src/main/java/org/apache/flink/metrics/influxdb/InfluxdbReporterFactory.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package org.apache.flink.metrics.influxdb;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "169ed4faedfbcd96213ee17ce19d5f19bb6aafc1"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMzMwNTM5", "url": "https://github.com/apache/flink/pull/12153#pullrequestreview-412330539", "createdAt": "2020-05-15T03:55:15Z", "commit": {"oid": "169ed4faedfbcd96213ee17ce19d5f19bb6aafc1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMzo1NToxNVrOGV1pag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMzo1NToxNVrOGV1pag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU1MjIzNA==", "bodyText": "This class miss a javadoc and should not pass during checkstyle.", "url": "https://github.com/apache/flink/pull/12153#discussion_r425552234", "createdAt": "2020-05-15T03:55:15Z", "author": {"login": "Myasuka"}, "path": "flink-metrics/flink-metrics-influxdb/src/main/java/org/apache/flink/metrics/influxdb/InfluxdbReporterFactory.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package org.apache.flink.metrics.influxdb;\n+\n+import org.apache.flink.metrics.reporter.MetricReporter;\n+import org.apache.flink.metrics.reporter.MetricReporterFactory;\n+\n+import java.util.Properties;\n+\n+public class InfluxdbReporterFactory implements MetricReporterFactory {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "169ed4faedfbcd96213ee17ce19d5f19bb6aafc1"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "670bf0c510cee2e656e3ca9633f9da66506746b0", "author": {"user": {"login": "complone", "name": "windWheel"}}, "url": "https://github.com/apache/flink/commit/670bf0c510cee2e656e3ca9633f9da66506746b0", "committedDate": "2020-05-15T21:28:41Z", "message": "[FLINK-16966][metrics][infuxdb] add apache license"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b510abaf4a26157ede091ab9434ff4b59265efc", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/2b510abaf4a26157ede091ab9434ff4b59265efc", "committedDate": "2020-05-17T08:04:31Z", "message": "Update InfluxdbReporterFactory.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d401b48ac512abc446a99d4eb782b29c7807732e", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/d401b48ac512abc446a99d4eb782b29c7807732e", "committedDate": "2020-05-17T08:05:21Z", "message": "Update metrics.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb0474bf40108f7c479e40b373b26a98ab64daa5", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/bb0474bf40108f7c479e40b373b26a98ab64daa5", "committedDate": "2020-05-17T08:05:51Z", "message": "Update metrics.zh.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a16a711b72c3937b9c6a911bd7f420d9476c6d1c", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/a16a711b72c3937b9c6a911bd7f420d9476c6d1c", "committedDate": "2020-05-17T08:07:54Z", "message": "remove relocations"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4045, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}