{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1ODkxNDkx", "number": 11817, "title": "[FLINK-17257][yarn][test] Fix AbstractYarnClusterTest not compiling with hadoop 2.10.", "bodyText": "What is the purpose of the change\nIn AbstractYarnClusterTest, we create ApplicationReport with the static method ApplicationReport.newInstance, which is annotated as private and unstable. This method is no longer compatible in Hadoop 2.10.\nAs a workaround, we can create ApplicationReport with its default constructor and set only the fields that we need.\nVerifying this change\nThis is a pure testing change which does not affect the production codes. Manually tested with Hadoop 2.4, 2.8, 2.10 and 3.2.\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (no)\nThe public API, i.e., is any changed class annotated with @Public(Evolving): (no)\nThe serializers: (no)\nThe runtime per-record code paths (performance sensitive): (no)\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: (no)\nThe S3 file system connector: (no)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (no)\nIf yes, how is the feature documented? (not applicable)", "createdAt": "2020-04-20T07:55:54Z", "url": "https://github.com/apache/flink/pull/11817", "merged": true, "mergeCommit": {"oid": "fe78c9b41333996c80c6ef8a65d1351a6d24af7e"}, "closed": true, "closedAt": "2020-04-20T13:11:08Z", "author": {"login": "xintongsong"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZaOaoAH2gAyNDA1ODkxNDkxOjE5ZTRhYTRhYjc5NzRhZGI1Yjc3MWFmNGE5YTUxMTI3YzcxZTBiYjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZcvC5gFqTM5NjMzOTMyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "19e4aa4ab7974adb5b771af4a9a51127c71e0bb4", "author": {"user": {"login": "xintongsong", "name": "Xintong Song"}}, "url": "https://github.com/apache/flink/commit/19e4aa4ab7974adb5b771af4a9a51127c71e0bb4", "committedDate": "2020-04-20T07:47:28Z", "message": "[FLINK-17257][yarn][test] Fix AbstractYarnClusterTest not compiling with hadoop 2.10."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MjM0ODg3", "url": "https://github.com/apache/flink/pull/11817#pullrequestreview-396234887", "createdAt": "2020-04-20T08:17:30Z", "commit": {"oid": "19e4aa4ab7974adb5b771af4a9a51127c71e0bb4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwODoxNzozMFrOGIIpBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwODoxNzozMFrOGIIpBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTE4MzM2Nw==", "bodyText": "Seems Records.newRecord(...) is still private and unstable. Is there a stable approach to create ApplicationReport?", "url": "https://github.com/apache/flink/pull/11817#discussion_r411183367", "createdAt": "2020-04-20T08:17:30Z", "author": {"login": "zhuzhurk"}, "path": "flink-yarn/src/test/java/org/apache/flink/yarn/AbstractYarnClusterTest.java", "diffHunk": "@@ -82,26 +83,21 @@ private ApplicationReport createApplicationReport(\n \t\tApplicationId applicationId,\n \t\tYarnApplicationState yarnApplicationState,\n \t\tFinalApplicationStatus finalApplicationStatus) {\n-\t\treturn ApplicationReport.newInstance(\n-\t\t\tapplicationId,\n-\t\t\tApplicationAttemptId.newInstance(applicationId, 0),\n-\t\t\t\"user\",\n-\t\t\t\"queue\",\n-\t\t\t\"name\",\n-\t\t\t\"localhost\",\n-\t\t\t42,\n-\t\t\tnull,\n-\t\t\tyarnApplicationState,\n-\t\t\tnull,\n-\t\t\tnull,\n-\t\t\t1L,\n-\t\t\t2L,\n-\t\t\tfinalApplicationStatus,\n-\t\t\tnull,\n-\t\t\tnull,\n-\t\t\t1.0f,\n-\t\t\tnull,\n-\t\t\tnull);\n+\n+\t\tApplicationReport applicationReport = Records.newRecord(ApplicationReport.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19e4aa4ab7974adb5b771af4a9a51127c71e0bb4"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MzM5MzIy", "url": "https://github.com/apache/flink/pull/11817#pullrequestreview-396339322", "createdAt": "2020-04-20T10:42:55Z", "commit": {"oid": "19e4aa4ab7974adb5b771af4a9a51127c71e0bb4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1920, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}