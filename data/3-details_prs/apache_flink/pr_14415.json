{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyMDA3MTM2", "number": 14415, "title": "[FLINK-19880][formats] Fix JsonRowFormatFactory's support for the format.ignore-parse-errors property.", "bodyText": "What is the purpose of the change\nThis pull request fixed JsonRowFormatFactory support for the format.ignore-parse-errors property, so that data that does not conform to the json specification can be automatically ignored.\nBrief change log\n\nAdd JsonValidator.FORMAT_IGNORE_PARSE_ERRORS property to the JsonRowFormatFactory#supportedFormatProperties method\n\nVerifying this change\nThis change is already covered by existing tests, the JsonRowFormatFactoryTest.\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (no)\nThe public API, i.e., is any changed class annotated with @Public(Evolving): (no)\nThe serializers: (no)\nThe runtime per-record code paths (performance sensitive): (no)\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: (no)\nThe S3 file system connector: (no)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (no)\nIf yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)", "createdAt": "2020-12-17T17:13:54Z", "url": "https://github.com/apache/flink/pull/14415", "merged": true, "mergeCommit": {"oid": "fc660274a5c7b4cdea00335cac87bdf5d421db92"}, "closed": true, "closedAt": "2020-12-18T14:35:52Z", "author": {"login": "cxiiiiiii"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnOfdhgBqjQxMjc4Mjg5MzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnUvutgFqTU1NTMzMDU3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "054c57cbbcab6c640bac4681fc9e17c7971d9b7d", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/054c57cbbcab6c640bac4681fc9e17c7971d9b7d", "committedDate": "2020-12-17T16:54:13Z", "message": "[FLINK-19880][formats] Fix JsonRowFormatFactory's support for the format.ignore-parse-errors property."}, "afterCommit": {"oid": "91b26c741c5cc1b578123830c6981e5e3fca9767", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/91b26c741c5cc1b578123830c6981e5e3fca9767", "committedDate": "2020-12-18T02:12:45Z", "message": "[FLINK-19880][formats] Fix JsonRowFormatFactory's support for the format.ignore-parse-errors property."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "91b26c741c5cc1b578123830c6981e5e3fca9767", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/91b26c741c5cc1b578123830c6981e5e3fca9767", "committedDate": "2020-12-18T02:12:45Z", "message": "[FLINK-19880][formats] Fix JsonRowFormatFactory's support for the format.ignore-parse-errors property."}, "afterCommit": {"oid": "bd5a9d8b6b779c3a0148b93740c4da40adae1d4a", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/bd5a9d8b6b779c3a0148b93740c4da40adae1d4a", "committedDate": "2020-12-18T07:12:34Z", "message": "[FLINK-19880][formats] Fix JsonRowFormatFactory's support for the format.ignore-parse-errors property."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MjIzOTgw", "url": "https://github.com/apache/flink/pull/14415#pullrequestreview-555223980", "createdAt": "2020-12-18T07:32:38Z", "commit": {"oid": "bd5a9d8b6b779c3a0148b93740c4da40adae1d4a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwNzozMjozOFrOIIWDMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwNzozMzowMVrOIIWDww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYyMDc4NA==", "bodyText": "We don't need to extract a method if this method is only be invoked in one place.", "url": "https://github.com/apache/flink/pull/14415#discussion_r545620784", "createdAt": "2020-12-18T07:32:38Z", "author": {"login": "wuchong"}, "path": "flink-formats/flink-json/src/test/java/org/apache/flink/formats/json/JsonRowFormatFactoryTest.java", "diffHunk": "@@ -128,6 +152,14 @@ private void testSchemaDeserializationSchema(Map<String, String> properties) {\n \t\tassertEquals(expected2, actual2);\n \t}\n \n+\tprivate void testSchemaDeserializationSchemaIgnoreParseErrors(Map<String, String> properties) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd5a9d8b6b779c3a0148b93740c4da40adae1d4a"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYyMDkzMQ==", "bodyText": "I think testSchemaIgnoreParseErrors() is enough to cover the bug. We can't permute all possible combination of configurations.", "url": "https://github.com/apache/flink/pull/14415#discussion_r545620931", "createdAt": "2020-12-18T07:33:01Z", "author": {"login": "wuchong"}, "path": "flink-formats/flink-json/src/test/java/org/apache/flink/formats/json/JsonRowFormatFactoryTest.java", "diffHunk": "@@ -91,6 +103,18 @@ public void testJsonSchema() {\n \t\ttestJsonSchemaDeserializationSchema(properties);\n \t}\n \n+\t@Test\n+\tpublic void testJsonSchemaIgnoreParseErrors() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd5a9d8b6b779c3a0148b93740c4da40adae1d4a"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36db2ebd1064da1519149192e4c3983dba987bb1", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/36db2ebd1064da1519149192e4c3983dba987bb1", "committedDate": "2020-12-18T08:15:19Z", "message": "[FLINK-19880][formats] Fix JsonRowFormatFactory's support for the format.ignore-parse-errors property."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bd5a9d8b6b779c3a0148b93740c4da40adae1d4a", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/bd5a9d8b6b779c3a0148b93740c4da40adae1d4a", "committedDate": "2020-12-18T07:12:34Z", "message": "[FLINK-19880][formats] Fix JsonRowFormatFactory's support for the format.ignore-parse-errors property."}, "afterCommit": {"oid": "36db2ebd1064da1519149192e4c3983dba987bb1", "author": {"user": null}, "url": "https://github.com/apache/flink/commit/36db2ebd1064da1519149192e4c3983dba987bb1", "committedDate": "2020-12-18T08:15:19Z", "message": "[FLINK-19880][formats] Fix JsonRowFormatFactory's support for the format.ignore-parse-errors property."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MzMwNTc2", "url": "https://github.com/apache/flink/pull/14415#pullrequestreview-555330576", "createdAt": "2020-12-18T09:30:31Z", "commit": {"oid": "36db2ebd1064da1519149192e4c3983dba987bb1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3670, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}