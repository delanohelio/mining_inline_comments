{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxNDEzODEx", "number": 11256, "title": "[FLINK-16342][metrics][datadog] Remove mocking", "bodyText": "introduce timestamp factory instead of relying on static method\nintroduce static package-private non-final flag for skipping api validation\n\nThe api key validation skip can be implemented in a nicer way once we ported the reporter to use factories/plugins, but for now this has to do.\nAnd it's still better than throwing PowerMock at it.", "createdAt": "2020-02-28T14:18:17Z", "url": "https://github.com/apache/flink/pull/11256", "merged": true, "mergeCommit": {"oid": "8e12742bb24361802a3e0b357db0a11f515be016"}, "closed": true, "closedAt": "2020-02-29T08:17:16Z", "author": {"login": "zentol"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIx8fnAFqTM2NjQ5NTkxNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJACzqABqjMwODQ1NDYxMjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NDk1OTE1", "url": "https://github.com/apache/flink/pull/11256#pullrequestreview-366495915", "createdAt": "2020-02-28T15:48:42Z", "commit": {"oid": "68d419a8e3a2738bda013ef0e2888f9eae7c3031"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxNTo0ODo0MlrOFv5mmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxNTo0ODo0MlrOFv5mmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc3MTE2Mw==", "bodyText": "shall we add a comment to mention that this option is for testing?", "url": "https://github.com/apache/flink/pull/11256#discussion_r385771163", "createdAt": "2020-02-28T15:48:42Z", "author": {"login": "tisonkun"}, "path": "flink-metrics/flink-metrics-datadog/src/main/java/org/apache/flink/metrics/datadog/DatadogHttpClient.java", "diffHunk": "@@ -48,6 +48,8 @@\n \tprivate static final int TIMEOUT = 3;\n \tprivate static final ObjectMapper MAPPER = new ObjectMapper();\n \n+\tstatic boolean skipApiKeyValidation = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68d419a8e3a2738bda013ef0e2888f9eae7c3031"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NTQwNzcx", "url": "https://github.com/apache/flink/pull/11256#pullrequestreview-366540771", "createdAt": "2020-02-28T16:51:09Z", "commit": {"oid": "c908cd4786275b8734d79d42ab9f26dc4c1f78f2"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxNjo1MTowOVrOFv7uwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxNjo1MTowOVrOFv7uwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTgwNjAxNg==", "bodyText": "What about introducing a constructor DatadogHttpClient(dgApiKey, dgProxyHost, dgProxyPort, boolean validateApiKey) instead of this static field? It is also not perfect but I think it is a bit better than having this static field.", "url": "https://github.com/apache/flink/pull/11256#discussion_r385806016", "createdAt": "2020-02-28T16:51:09Z", "author": {"login": "tillrohrmann"}, "path": "flink-metrics/flink-metrics-datadog/src/main/java/org/apache/flink/metrics/datadog/DatadogHttpClient.java", "diffHunk": "@@ -48,6 +48,8 @@\n \tprivate static final int TIMEOUT = 3;\n \tprivate static final ObjectMapper MAPPER = new ObjectMapper();\n \n+\tstatic boolean skipApiKeyValidation = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc3MTE2Mw=="}, "originalCommit": {"oid": "68d419a8e3a2738bda013ef0e2888f9eae7c3031"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e0b01fdb98ebf6e953b2b2433d9e0fb949dc4a4", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/7e0b01fdb98ebf6e953b2b2433d9e0fb949dc4a4", "committedDate": "2020-02-29T08:14:17Z", "message": "[FLINK-16342][metrics][datadog] Remove mocking\n\n- introduce timestamp factory instead of relying on static method\n- introduce static package-private non-final flag for skipping api validation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1691f7d4b7591336d2808dc78a15ea33bec5d054", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/1691f7d4b7591336d2808dc78a15ea33bec5d054", "committedDate": "2020-02-28T22:46:01Z", "message": "+"}, "afterCommit": {"oid": "7e0b01fdb98ebf6e953b2b2433d9e0fb949dc4a4", "author": {"user": {"login": "zentol", "name": "Chesnay Schepler"}}, "url": "https://github.com/apache/flink/commit/7e0b01fdb98ebf6e953b2b2433d9e0fb949dc4a4", "committedDate": "2020-02-29T08:14:17Z", "message": "[FLINK-16342][metrics][datadog] Remove mocking\n\n- introduce timestamp factory instead of relying on static method\n- introduce static package-private non-final flag for skipping api validation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3316, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}