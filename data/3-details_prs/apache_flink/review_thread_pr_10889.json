{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0MjE0MDU5", "number": 10889, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNDozMDoxN1rODZOlkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQwOToyNTozMFrODZbGXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3Nzc5OTg1OnYy", "diffSide": "RIGHT", "path": "flink-filesystems/flink-s3-fs-presto/src/main/resources/META-INF/NOTICE", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNDozMDoxN1rOFfgHAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQwODozMDowM1rOFfxriw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU3NjI1Ng==", "bodyText": "I guess this is not the same as \"Creative Commons CC0 1.0 Universal Public Domain Dedication License\" and cannot be bundled?", "url": "https://github.com/apache/flink/pull/10889#discussion_r368576256", "createdAt": "2020-01-20T14:30:17Z", "author": {"login": "AHeise"}, "path": "flink-filesystems/flink-s3-fs-presto/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -57,3 +57,8 @@ This project bundles the following dependencies under BSD License (https://opens\n See bundled license files for details.\n \n - org.codehaus.woodstox:stax2-api:3.1.4 (https://github.com/FasterXML/stax2-api/tree/stax2-api-3.1.4)\n+\n+This project bundles the following dependencies under the CDDL 1.1 license.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "966745cdadf667b21fe7e33af854f7261eb94b50"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU4MjE4Mg==", "bodyText": "It is the Common Development and Distribution License and can be bundled.", "url": "https://github.com/apache/flink/pull/10889#discussion_r368582182", "createdAt": "2020-01-20T14:41:54Z", "author": {"login": "zentol"}, "path": "flink-filesystems/flink-s3-fs-presto/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -57,3 +57,8 @@ This project bundles the following dependencies under BSD License (https://opens\n See bundled license files for details.\n \n - org.codehaus.woodstox:stax2-api:3.1.4 (https://github.com/FasterXML/stax2-api/tree/stax2-api-3.1.4)\n+\n+This project bundles the following dependencies under the CDDL 1.1 license.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU3NjI1Ng=="}, "originalCommit": {"oid": "966745cdadf667b21fe7e33af854f7261eb94b50"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODYzMTg0Ng==", "bodyText": "Is it okay to bundle two different versions of the same license? (1.0 and 1.1)", "url": "https://github.com/apache/flink/pull/10889#discussion_r368631846", "createdAt": "2020-01-20T16:20:56Z", "author": {"login": "AHeise"}, "path": "flink-filesystems/flink-s3-fs-presto/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -57,3 +57,8 @@ This project bundles the following dependencies under BSD License (https://opens\n See bundled license files for details.\n \n - org.codehaus.woodstox:stax2-api:3.1.4 (https://github.com/FasterXML/stax2-api/tree/stax2-api-3.1.4)\n+\n+This project bundles the following dependencies under the CDDL 1.1 license.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU3NjI1Ng=="}, "originalCommit": {"oid": "966745cdadf667b21fe7e33af854f7261eb94b50"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODcyMjk4NQ==", "bodyText": "yes", "url": "https://github.com/apache/flink/pull/10889#discussion_r368722985", "createdAt": "2020-01-20T20:56:01Z", "author": {"login": "zentol"}, "path": "flink-filesystems/flink-s3-fs-presto/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -57,3 +57,8 @@ This project bundles the following dependencies under BSD License (https://opens\n See bundled license files for details.\n \n - org.codehaus.woodstox:stax2-api:3.1.4 (https://github.com/FasterXML/stax2-api/tree/stax2-api-3.1.4)\n+\n+This project bundles the following dependencies under the CDDL 1.1 license.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU3NjI1Ng=="}, "originalCommit": {"oid": "966745cdadf667b21fe7e33af854f7261eb94b50"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODg2MTA4Nw==", "bodyText": "Sorry to reiterate about that again but it feels as if the two are different.\nCreative Commons CC0 1.0 Universal Public Domain Dedication License is abbreviated CC0 and I haven't found a 1.1 version.\nCommon Development and Distribution License seems to be Oracle-specific.\nI'd keep them separate for now and we can revise later.", "url": "https://github.com/apache/flink/pull/10889#discussion_r368861087", "createdAt": "2020-01-21T08:21:55Z", "author": {"login": "AHeise"}, "path": "flink-filesystems/flink-s3-fs-presto/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -57,3 +57,8 @@ This project bundles the following dependencies under BSD License (https://opens\n See bundled license files for details.\n \n - org.codehaus.woodstox:stax2-api:3.1.4 (https://github.com/FasterXML/stax2-api/tree/stax2-api-3.1.4)\n+\n+This project bundles the following dependencies under the CDDL 1.1 license.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU3NjI1Ng=="}, "originalCommit": {"oid": "966745cdadf667b21fe7e33af854f7261eb94b50"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODg2NDEzOQ==", "bodyText": "Of course the CC0 and CDDL are different licenses. They have different names. What made you think they are the same?", "url": "https://github.com/apache/flink/pull/10889#discussion_r368864139", "createdAt": "2020-01-21T08:30:03Z", "author": {"login": "zentol"}, "path": "flink-filesystems/flink-s3-fs-presto/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -57,3 +57,8 @@ This project bundles the following dependencies under BSD License (https://opens\n See bundled license files for details.\n \n - org.codehaus.woodstox:stax2-api:3.1.4 (https://github.com/FasterXML/stax2-api/tree/stax2-api-3.1.4)\n+\n+This project bundles the following dependencies under the CDDL 1.1 license.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU3NjI1Ng=="}, "originalCommit": {"oid": "966745cdadf667b21fe7e33af854f7261eb94b50"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3Nzg0ODM3OnYy", "diffSide": "RIGHT", "path": "flink-filesystems/flink-s3-fs-presto/src/main/resources/META-INF/NOTICE", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNDo0NDo0NFrOFfgj_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNDo0NDo0NFrOFfgj_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU4MzY3OA==", "bodyText": "given that this depends on javax.activation I would think that we need to bundle both.\nWe had an issue in the past when we only had one in yarn: https://issues.apache.org/jira/browse/FLINK-15008", "url": "https://github.com/apache/flink/pull/10889#discussion_r368583678", "createdAt": "2020-01-20T14:44:44Z", "author": {"login": "zentol"}, "path": "flink-filesystems/flink-s3-fs-presto/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -57,3 +57,8 @@ This project bundles the following dependencies under BSD License (https://opens\n See bundled license files for details.\n \n - org.codehaus.woodstox:stax2-api:3.1.4 (https://github.com/FasterXML/stax2-api/tree/stax2-api-3.1.4)\n+\n+This project bundles the following dependencies under the CDDL 1.1 license.\n+See bundled license files for details.\n+\n+- javax.xml.bind:jaxb-api:2.3.1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "966745cdadf667b21fe7e33af854f7261eb94b50"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3Nzg1MDY3OnYy", "diffSide": "RIGHT", "path": "flink-filesystems/flink-s3-fs-presto/src/main/resources/META-INF/NOTICE", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNDo0NTozMFrOFfglaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNjoyMzo1OVrOFfjl9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU4NDA0MA==", "bodyText": "somethings missing here ;)\nyou need to include these two files under resources/META-INF/licenses.", "url": "https://github.com/apache/flink/pull/10889#discussion_r368584040", "createdAt": "2020-01-20T14:45:30Z", "author": {"login": "zentol"}, "path": "flink-filesystems/flink-s3-fs-presto/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -57,3 +57,8 @@ This project bundles the following dependencies under BSD License (https://opens\n See bundled license files for details.\n \n - org.codehaus.woodstox:stax2-api:3.1.4 (https://github.com/FasterXML/stax2-api/tree/stax2-api-3.1.4)\n+\n+This project bundles the following dependencies under the CDDL 1.1 license.\n+See bundled license files for details.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "966745cdadf667b21fe7e33af854f7261eb94b50"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODYzMzMzNQ==", "bodyText": "I already suspected that, but was not able to find them (in plain sight...).", "url": "https://github.com/apache/flink/pull/10889#discussion_r368633335", "createdAt": "2020-01-20T16:23:59Z", "author": {"login": "AHeise"}, "path": "flink-filesystems/flink-s3-fs-presto/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -57,3 +57,8 @@ This project bundles the following dependencies under BSD License (https://opens\n See bundled license files for details.\n \n - org.codehaus.woodstox:stax2-api:3.1.4 (https://github.com/FasterXML/stax2-api/tree/stax2-api-3.1.4)\n+\n+This project bundles the following dependencies under the CDDL 1.1 license.\n+See bundled license files for details.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU4NDA0MA=="}, "originalCommit": {"oid": "966745cdadf667b21fe7e33af854f7261eb94b50"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3OTc0ODA1OnYy", "diffSide": "RIGHT", "path": "flink-core/src/main/java/org/apache/flink/core/plugin/PluginLoader.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQwODo1MTo0MlrOFfyOnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQwOToyMjoyNVrOFfzGrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODg3MzExOQ==", "bodyText": "Shouldn't we propagate/handle some errors?", "url": "https://github.com/apache/flink/pull/10889#discussion_r368873119", "createdAt": "2020-01-21T08:51:42Z", "author": {"login": "pnowojski"}, "path": "flink-core/src/main/java/org/apache/flink/core/plugin/PluginLoader.java", "diffHunk": "@@ -182,5 +184,16 @@ private boolean isAllowedFlinkClass(final String name) {\n \t\tprivate boolean isAllowedFlinkResource(final String name) {\n \t\t\treturn Arrays.stream(allowedResourcePrefixes).anyMatch(name::startsWith);\n \t\t}\n+\n+\t\tstatic {\n+\t\t\tClassLoader platformLoader = null;\n+\t\t\ttry {\n+\t\t\t\tplatformLoader = (ClassLoader) ClassLoader.class\n+\t\t\t\t\t.getMethod(\"getPlatformClassLoader\")\n+\t\t\t\t\t.invoke(null);\n+\t\t\t} catch (Exception e) {\n+\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "afa1419d99ea2bf395d623f24798b7505f0c6a45"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODg4NzA2Ng==", "bodyText": "This will always fail on Java 8, so not sure what to handle here. I also looked into detecting the Java version and do only specific stuff, but everything is more fragile than just trying.", "url": "https://github.com/apache/flink/pull/10889#discussion_r368887066", "createdAt": "2020-01-21T09:21:32Z", "author": {"login": "AHeise"}, "path": "flink-core/src/main/java/org/apache/flink/core/plugin/PluginLoader.java", "diffHunk": "@@ -182,5 +184,16 @@ private boolean isAllowedFlinkClass(final String name) {\n \t\tprivate boolean isAllowedFlinkResource(final String name) {\n \t\t\treturn Arrays.stream(allowedResourcePrefixes).anyMatch(name::startsWith);\n \t\t}\n+\n+\t\tstatic {\n+\t\t\tClassLoader platformLoader = null;\n+\t\t\ttry {\n+\t\t\t\tplatformLoader = (ClassLoader) ClassLoader.class\n+\t\t\t\t\t.getMethod(\"getPlatformClassLoader\")\n+\t\t\t\t\t.invoke(null);\n+\t\t\t} catch (Exception e) {\n+\t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODg3MzExOQ=="}, "originalCommit": {"oid": "afa1419d99ea2bf395d623f24798b7505f0c6a45"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODg4NzQ3MQ==", "bodyText": "We could make it more differentiated and just swallow NoSuchMethodException though.", "url": "https://github.com/apache/flink/pull/10889#discussion_r368887471", "createdAt": "2020-01-21T09:22:25Z", "author": {"login": "AHeise"}, "path": "flink-core/src/main/java/org/apache/flink/core/plugin/PluginLoader.java", "diffHunk": "@@ -182,5 +184,16 @@ private boolean isAllowedFlinkClass(final String name) {\n \t\tprivate boolean isAllowedFlinkResource(final String name) {\n \t\t\treturn Arrays.stream(allowedResourcePrefixes).anyMatch(name::startsWith);\n \t\t}\n+\n+\t\tstatic {\n+\t\t\tClassLoader platformLoader = null;\n+\t\t\ttry {\n+\t\t\t\tplatformLoader = (ClassLoader) ClassLoader.class\n+\t\t\t\t\t.getMethod(\"getPlatformClassLoader\")\n+\t\t\t\t\t.invoke(null);\n+\t\t\t} catch (Exception e) {\n+\t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODg3MzExOQ=="}, "originalCommit": {"oid": "afa1419d99ea2bf395d623f24798b7505f0c6a45"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3OTg0OTg5OnYy", "diffSide": "RIGHT", "path": "flink-core/src/main/java/org/apache/flink/core/plugin/PluginLoader.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQwOToyNTozMFrOFfzMbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxMTo0Njo1M1rOFf3P9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODg4ODk0MQ==", "bodyText": "@pnowojski What do you think of the exception handling now? Do you have any reliable way to detect if we are on Java9+?", "url": "https://github.com/apache/flink/pull/10889#discussion_r368888941", "createdAt": "2020-01-21T09:25:30Z", "author": {"login": "AHeise"}, "path": "flink-core/src/main/java/org/apache/flink/core/plugin/PluginLoader.java", "diffHunk": "@@ -182,5 +184,20 @@ private boolean isAllowedFlinkClass(final String name) {\n \t\tprivate boolean isAllowedFlinkResource(final String name) {\n \t\t\treturn Arrays.stream(allowedResourcePrefixes).anyMatch(name::startsWith);\n \t\t}\n+\n+\t\tstatic {\n+\t\t\tClassLoader platformLoader = null;\n+\t\t\ttry {\n+\t\t\t\tplatformLoader = (ClassLoader) ClassLoader.class\n+\t\t\t\t\t.getMethod(\"getPlatformClassLoader\")\n+\t\t\t\t\t.invoke(null);\n+\t\t\t} catch (NoSuchMethodException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5efc5d29f49884fe98d8d7540384463fdfda58ee"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODg5NTYxMw==", "bodyText": "Maybe this?\nhttps://www.journaldev.com/20930/check-java-version#can-we-check-java-version-programmatically\nbut I'm also kind of fine with as it is.", "url": "https://github.com/apache/flink/pull/10889#discussion_r368895613", "createdAt": "2020-01-21T09:39:11Z", "author": {"login": "pnowojski"}, "path": "flink-core/src/main/java/org/apache/flink/core/plugin/PluginLoader.java", "diffHunk": "@@ -182,5 +184,20 @@ private boolean isAllowedFlinkClass(final String name) {\n \t\tprivate boolean isAllowedFlinkResource(final String name) {\n \t\t\treturn Arrays.stream(allowedResourcePrefixes).anyMatch(name::startsWith);\n \t\t}\n+\n+\t\tstatic {\n+\t\t\tClassLoader platformLoader = null;\n+\t\t\ttry {\n+\t\t\t\tplatformLoader = (ClassLoader) ClassLoader.class\n+\t\t\t\t\t.getMethod(\"getPlatformClassLoader\")\n+\t\t\t\t\t.invoke(null);\n+\t\t\t} catch (NoSuchMethodException e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODg4ODk0MQ=="}, "originalCommit": {"oid": "5efc5d29f49884fe98d8d7540384463fdfda58ee"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODk1NTM4MA==", "bodyText": "There's no good way to check for java versions on Java 8; Runtime.Version was added in Java 9.", "url": "https://github.com/apache/flink/pull/10889#discussion_r368955380", "createdAt": "2020-01-21T11:46:53Z", "author": {"login": "zentol"}, "path": "flink-core/src/main/java/org/apache/flink/core/plugin/PluginLoader.java", "diffHunk": "@@ -182,5 +184,20 @@ private boolean isAllowedFlinkClass(final String name) {\n \t\tprivate boolean isAllowedFlinkResource(final String name) {\n \t\t\treturn Arrays.stream(allowedResourcePrefixes).anyMatch(name::startsWith);\n \t\t}\n+\n+\t\tstatic {\n+\t\t\tClassLoader platformLoader = null;\n+\t\t\ttry {\n+\t\t\t\tplatformLoader = (ClassLoader) ClassLoader.class\n+\t\t\t\t\t.getMethod(\"getPlatformClassLoader\")\n+\t\t\t\t\t.invoke(null);\n+\t\t\t} catch (NoSuchMethodException e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODg4ODk0MQ=="}, "originalCommit": {"oid": "5efc5d29f49884fe98d8d7540384463fdfda58ee"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1240, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}