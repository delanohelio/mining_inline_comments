{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyOTMyODU1", "number": 13859, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxNjozMzoyOVrOE1vV5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxNjozMzoyOVrOE1vV5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0Nzg1NjM4OnYy", "diffSide": "RIGHT", "path": "flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxNjozMzoyOVrOHuLxUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxNjozNzo1NlrOHuL95A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE4OTM5Mw==", "bodyText": "This is a busy waiting loop, right? Maybe we can add a pause.", "url": "https://github.com/apache/flink/pull/13859#discussion_r518189393", "createdAt": "2020-11-05T16:33:29Z", "author": {"login": "tillrohrmann"}, "path": "flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTest.java", "diffHunk": "@@ -962,30 +952,23 @@ public void testSlotRequestTimeoutWhenNoSlotOffering() throws Exception {\n \n \t\t\tjobMasterGateway.registerTaskManager(taskExecutorGateway.getAddress(), taskManagerUnresolvedLocation, testingTimeout).get();\n \n-\t\t\t// wait for the slot request timeout\n-\t\t\tfinal SlotRequest slotRequest = blockingQueue.take();\n+\t\t\t// wait for the job to restart, due to the slot request timing out\n+\t\t\twhile (jobMasterGateway.requestJob(testingTimeout).join().getStatusTimestamp(JobStatus.RESTARTING) <= 0) {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30a05a4fe4a92077162d823bc115413141fdeb57"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE5MjYxMg==", "bodyText": "You might also use CommonTestUtils.waitUntilCondition.", "url": "https://github.com/apache/flink/pull/13859#discussion_r518192612", "createdAt": "2020-11-05T16:37:56Z", "author": {"login": "tillrohrmann"}, "path": "flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTest.java", "diffHunk": "@@ -962,30 +952,23 @@ public void testSlotRequestTimeoutWhenNoSlotOffering() throws Exception {\n \n \t\t\tjobMasterGateway.registerTaskManager(taskExecutorGateway.getAddress(), taskManagerUnresolvedLocation, testingTimeout).get();\n \n-\t\t\t// wait for the slot request timeout\n-\t\t\tfinal SlotRequest slotRequest = blockingQueue.take();\n+\t\t\t// wait for the job to restart, due to the slot request timing out\n+\t\t\twhile (jobMasterGateway.requestJob(testingTimeout).join().getStatusTimestamp(JobStatus.RESTARTING) <= 0) {}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE4OTM5Mw=="}, "originalCommit": {"oid": "30a05a4fe4a92077162d823bc115413141fdeb57"}, "originalPosition": 40}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4995, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}