{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNTgwNDc1", "number": 11511, "title": "[FLINK-16771][table-planner-blink] NPE when filtering by decimal column", "bodyText": "What is the purpose of the change\nFix NPE when comparing decimal column with null values.\nBrief change log\n\nFix GenerateUtils::generateLiteral for decimal type\nAdd test case\n\nVerifying this change\nAdded test case\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): no\nThe public API, i.e., is any changed class annotated with @Public(Evolving): no\nThe serializers: no\nThe runtime per-record code paths (performance sensitive): no\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: no\nThe S3 file system connector: no\n\nDocumentation\n\nDoes this pull request introduce a new feature? no\nIf yes, how is the feature documented? NA", "createdAt": "2020-03-25T13:14:40Z", "url": "https://github.com/apache/flink/pull/11511", "merged": true, "mergeCommit": {"oid": "3c0d5ff29ffd045f055f724642534699abddbcae"}, "closed": true, "closedAt": "2020-04-14T07:47:21Z", "author": {"login": "lirui-apache"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRnsl-AFqTM4MjU1MDU0Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXeoeTAFqTM5MjY4MDIzOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNTUwNTQz", "url": "https://github.com/apache/flink/pull/11511#pullrequestreview-382550543", "createdAt": "2020-03-27T02:55:32Z", "commit": {"oid": "e8d83deb718fc09cf49e63ffefddf2ce5de444ed"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMjo1NTozMlrOF8hgWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMjo1NzozMlrOF8hiaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTAwNzgzMw==", "bodyText": "Can this reproduce by expression test?", "url": "https://github.com/apache/flink/pull/11511#discussion_r399007833", "createdAt": "2020-03-27T02:55:32Z", "author": {"login": "JingsongLi"}, "path": "flink-table/flink-table-planner-blink/src/test/scala/org/apache/flink/table/api/TableEnvironmentITCase.scala", "diffHunk": "@@ -273,6 +276,18 @@ class TableEnvironmentITCase(tableEnvName: String, isStreaming: Boolean) {\n     tableEnv.execute(\"insert dest2\")\n   }\n \n+  @Test\n+  def testCompareDecimalColWithNull(): Unit = {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8d83deb718fc09cf49e63ffefddf2ce5de444ed"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTAwODM2Mw==", "bodyText": "Just generateLiteral?", "url": "https://github.com/apache/flink/pull/11511#discussion_r399008363", "createdAt": "2020-03-27T02:57:32Z", "author": {"login": "JingsongLi"}, "path": "flink-table/flink-table-planner-blink/src/main/scala/org/apache/flink/table/planner/codegen/GenerateUtils.scala", "diffHunk": "@@ -346,7 +346,11 @@ object GenerateUtils {\n         ctx.addReusableMember(fieldDecimal)\n         val value = Decimal.fromBigDecimal(\n           literalValue.asInstanceOf[JBigDecimal], precision, scale)\n-        generateNonNullLiteral(literalType, fieldTerm, value)\n+        if (value == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8d83deb718fc09cf49e63ffefddf2ce5de444ed"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f0907a91598b9cb7e4e7492ee891fcdae9d8fd8", "author": {"user": {"login": "lirui-apache", "name": "Rui Li"}}, "url": "https://github.com/apache/flink/commit/8f0907a91598b9cb7e4e7492ee891fcdae9d8fd8", "committedDate": "2020-04-10T10:18:16Z", "message": "[FLINK-16771][table-planner-blink] NPE when filtering by decimal column"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f28c034ca66bf8142bcfd220aefdb96487c2d9fe", "author": {"user": {"login": "lirui-apache", "name": "Rui Li"}}, "url": "https://github.com/apache/flink/commit/f28c034ca66bf8142bcfd220aefdb96487c2d9fe", "committedDate": "2020-04-10T10:18:16Z", "message": "address comment"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c970291a42206873cfe230fc976332073931844", "author": {"user": {"login": "lirui-apache", "name": "Rui Li"}}, "url": "https://github.com/apache/flink/commit/7c970291a42206873cfe230fc976332073931844", "committedDate": "2020-03-27T08:45:05Z", "message": "address comment"}, "afterCommit": {"oid": "f28c034ca66bf8142bcfd220aefdb96487c2d9fe", "author": {"user": {"login": "lirui-apache", "name": "Rui Li"}}, "url": "https://github.com/apache/flink/commit/f28c034ca66bf8142bcfd220aefdb96487c2d9fe", "committedDate": "2020-04-10T10:18:16Z", "message": "address comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNjgwMjM4", "url": "https://github.com/apache/flink/pull/11511#pullrequestreview-392680238", "createdAt": "2020-04-14T07:47:42Z", "commit": {"oid": "f28c034ca66bf8142bcfd220aefdb96487c2d9fe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2529, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}