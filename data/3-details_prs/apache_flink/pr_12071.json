{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1OTA2MDgz", "number": 12071, "title": "[FLINK-17416][e2e][k8s] Use fixed v1.16.9 because fabric8 kubernetes-client could not work with higher version under jdk 8u252", "bodyText": "What is the purpose of the change\nUse fixed v1.16.9 because fabric8 kubernetes-client could not work with higher version under jdk 8u252.\n\nFor jdk 8u252, the fabric8 kubernetes-client could only work on kubernetes v1.16 and lower versions.\nFor other jdk versions(e.g. 8u242, jdk11), i am not aware of the same issues. It seems that native K8s integration works well. The user in the ML have solved the problem after upgrading to jdk11.\n\nBrief change log\n\nUpdate kubernetes version of minikube\nEnable K8s related tests\n\nVerifying this change\n\nCovered by existing tests\n\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (yes / no)\nThe public API, i.e., is any changed class annotated with @Public(Evolving): (yes / no)\nThe serializers: (yes / no / don't know)\nThe runtime per-record code paths (performance sensitive): (yes / no / don't know)\nAnything that affects deployment or recovery: JobManager (and its components), Checkpointing, Kubernetes/Yarn/Mesos, ZooKeeper: (yes / no / don't know)\nThe S3 file system connector: (yes / no / don't know)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (yes / no)\nIf yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)", "createdAt": "2020-05-11T06:55:14Z", "url": "https://github.com/apache/flink/pull/12071", "merged": true, "mergeCommit": {"oid": "bbf9d955164f14040f891b47fb6cf3d1476009e3"}, "closed": true, "closedAt": "2020-05-11T12:13:50Z", "author": {"login": "wangyang0918"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgHA4_AH2gAyNDE1OTA2MDgzOjVhM2U2MWU2OTk1YmNiMWM1ZDAzMWQ0NDBiOTI0ZDI2ODI2ODYzYmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgKXsDgFqTQwODkxNjEwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5a3e61e6995bcb1c5d031d440b924d26826863bb", "author": {"user": {"login": "wangyang0918", "name": "Yang Wang"}}, "url": "https://github.com/apache/flink/commit/5a3e61e6995bcb1c5d031d440b924d26826863bb", "committedDate": "2020-05-11T03:21:58Z", "message": "[FLINK-17416][e2e][k8s] Use fixed v1.16.9 because fabric8 kubernetes-client could not work with higher version under jdk 8u252"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "818dd9bd7f24ee7c28afa187190fc3784dde0d35", "author": {"user": {"login": "wangyang0918", "name": "Yang Wang"}}, "url": "https://github.com/apache/flink/commit/818dd9bd7f24ee7c28afa187190fc3784dde0d35", "committedDate": "2020-05-11T03:22:10Z", "message": "[FLINK-17416][e2e][k8s] Enable k8s related tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4OTE1OTIy", "url": "https://github.com/apache/flink/pull/12071#pullrequestreview-408915922", "createdAt": "2020-05-11T07:16:18Z", "commit": {"oid": "818dd9bd7f24ee7c28afa187190fc3784dde0d35"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4OTE2MTAy", "url": "https://github.com/apache/flink/pull/12071#pullrequestreview-408916102", "createdAt": "2020-05-11T07:16:35Z", "commit": {"oid": "818dd9bd7f24ee7c28afa187190fc3784dde0d35"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNzoxNjozNVrOGTPiVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNzoxNjozNVrOGTPiVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjgzMDY3OQ==", "bodyText": "which k8s version is the e2e test usually using?", "url": "https://github.com/apache/flink/pull/12071#discussion_r422830679", "createdAt": "2020-05-11T07:16:35Z", "author": {"login": "rmetzger"}, "path": "flink-end-to-end-tests/test-scripts/common_kubernetes.sh", "diffHunk": "@@ -75,7 +75,8 @@ function start_kubernetes_if_not_running {\n         # here.\n         # Similarly, the kubelets are marking themself as \"low disk space\",\n         # causing Flink to avoid this node (again, failing the test)\n-        sudo CHANGE_MINIKUBE_NONE_USER=true minikube start --vm-driver=none \\\n+        # Use fixed version v1.16.9 because fabric8 kubernetes-client could not work with higher version under jdk 8u252\n+        sudo CHANGE_MINIKUBE_NONE_USER=true minikube start --kubernetes-version v1.16.9 --vm-driver=none \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "818dd9bd7f24ee7c28afa187190fc3784dde0d35"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4257, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}