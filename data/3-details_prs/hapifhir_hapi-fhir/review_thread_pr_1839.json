{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NzcwNDQ0", "number": 1839, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQyMDowODozMFrOD7BJ9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNDo1NzoyMVrOD7RsEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMjExNTEwOnYy", "diffSide": "RIGHT", "path": "hapi-fhir-docs/src/main/resources/ca/uhn/hapi/fhir/changelog/4_3_0/1838-add-today-date-option.yaml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQyMDowODozMFrOGTHKWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQyMDowODozMFrOGTHKWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY5MzQ2Ng==", "bodyText": "Presumably we'll merge post 5.0.0 - Can you put this in a new directory called 5_1_0", "url": "https://github.com/hapifhir/hapi-fhir/pull/1839#discussion_r422693466", "createdAt": "2020-05-10T20:08:30Z", "author": {"login": "jamesagnew"}, "path": "hapi-fhir-docs/src/main/resources/ca/uhn/hapi/fhir/changelog/4_3_0/1838-add-today-date-option.yaml", "diffHunk": "@@ -0,0 +1,7 @@\n+---", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25298cb6cbfba9eb8155cd82882ba176b5340a45"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNDgyMzg0OnYy", "diffSide": "RIGHT", "path": "hapi-fhir-base/src/main/java/ca/uhn/fhir/model/primitive/BaseDateTimeDt.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNDo1NzoyMVrOGTgEvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNDo1NzoyMVrOGTgEvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzEwMTYzMA==", "bodyText": "I have a small concern/question here, as %today could be wrong if we rely on new Date(). Consider this scenario:\nIt is 2020-05-11T07:51:00-0700 in Vancouver.\nIt is 2020-05-12T00:50:00+1000 in Melbourne.\nA request coming in from a client in Melbourne using %today would expect it to resolve to the ordinal 20200512, but with current implementation, it would resolve to 20200511 if the server is in Vancouver I think. However there is no easy way to know tz on these requests. Perhaps modify the documentation to indicate that %today is for server date? If i'm mistaken and this is already spelled out, thats fine.", "url": "https://github.com/hapifhir/hapi-fhir/pull/1839#discussion_r423101630", "createdAt": "2020-05-11T14:57:21Z", "author": {"login": "tadgh"}, "path": "hapi-fhir-base/src/main/java/ca/uhn/fhir/model/primitive/BaseDateTimeDt.java", "diffHunk": "@@ -638,6 +639,9 @@ public void setValueAsString(String theValue) throws DataFormatException {\n \n \t\tif (NOW_DATE_CONSTANT.equalsIgnoreCase(theValue)) {\n \t\t\tsuper.setValueAsString(ourXmlDateTimeFormat.format(new Date()));\n+\t\t} else if (TODAY_DATE_CONSTANT.equalsIgnoreCase(theValue)) {\n+\t\t\tsuper.setValueAsString(ourXmlDateTimeFormat.format(new Date()));\n+\t\t\tsetPrecision(TemporalPrecisionEnum.DAY);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "711afd48bee5c0b0be8f50e13323d801c4ce94c5"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1964, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}