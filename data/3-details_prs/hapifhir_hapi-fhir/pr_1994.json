{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1NzQ0MzIw", "number": 1994, "title": "Fix mssql errors", "bodyText": "", "createdAt": "2020-07-23T14:24:41Z", "url": "https://github.com/hapifhir/hapi-fhir/pull/1994", "merged": true, "mergeCommit": {"oid": "4e66cb675298a2cbb33d18baa040b04cbcc48153"}, "closed": true, "closedAt": "2020-07-24T15:26:24Z", "author": {"login": "michelgleeson"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3dUwTAH2gAyNDU1NzQ0MzIwOmYyODUzMTgxODUxOWFkMmY0M2FhMGNiMjY5NzQ4NWJiOTY2MTRkODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc4EisCgH2gAyNDU1NzQ0MzIwOmI2N2YzMGEwM2JhNzI1ZTBmMjQ5ZTAyOGQ4ZDViNTM5YjhjMTdkNjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f28531818519ad2f43aa0cb2697485bb96614d87", "author": {"user": {"login": "migleeson", "name": null}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/f28531818519ad2f43aa0cb2697485bb96614d87", "committedDate": "2020-07-22T16:21:50Z", "message": "Add mssql to drop FK constraints when column is dropped"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f1d46dc68de5cae853c8d114adb83f4267f4b46", "author": {"user": {"login": "migleeson", "name": null}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/6f1d46dc68de5cae853c8d114adb83f4267f4b46", "committedDate": "2020-07-22T16:21:58Z", "message": "modify add index logic to behave like the other jdbc databases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92312537a600b1dc431d6f4625a743fb09a84205", "author": {"user": {"login": "migleeson", "name": null}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/92312537a600b1dc431d6f4625a743fb09a84205", "committedDate": "2020-07-22T16:22:08Z", "message": "Modify drop index syntax for mssql"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MTg3MDk2", "url": "https://github.com/hapifhir/hapi-fhir/pull/1994#pullrequestreview-454187096", "createdAt": "2020-07-23T14:26:56Z", "commit": {"oid": "92312537a600b1dc431d6f4625a743fb09a84205"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDoyNjo1NlrOG2NGuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDoyNjo1NlrOG2NGuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ5MTAwMw==", "bodyText": "The old drop index statement mixed with the new method to create unique indexes removes the fact that we also create a unique constraint on the column too", "url": "https://github.com/hapifhir/hapi-fhir/pull/1994#discussion_r459491003", "createdAt": "2020-07-23T14:26:56Z", "author": {"login": "michelgleeson"}, "path": "hapi-fhir-jpaserver-migrate/src/main/java/ca/uhn/fhir/jpa/migrate/taskdef/DropIndexTask.java", "diffHunk": "@@ -117,7 +117,7 @@ protected void generateHashCode(HashCodeBuilder theBuilder) {\n \t\t\t\tcase DERBY_EMBEDDED:\n \t\t\t\tcase ORACLE_12C:\n \t\t\t\tcase MSSQL_2012:\n-\t\t\t\t\tsql.add(\"alter table \" + theTableName + \" drop constraint \" + theIndexName);\n+\t\t\t\t\tsql.add(\"drop index \" + theIndexName + \" on \" + theTableName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92312537a600b1dc431d6f4625a743fb09a84205"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MjEyNTAy", "url": "https://github.com/hapifhir/hapi-fhir/pull/1994#pullrequestreview-454212502", "createdAt": "2020-07-23T14:48:05Z", "commit": {"oid": "92312537a600b1dc431d6f4625a743fb09a84205"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b435d6052a1b773e4a996ef2c6c924701b3b949", "author": {"user": {"login": "migleeson", "name": null}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/7b435d6052a1b773e4a996ef2c6c924701b3b949", "committedDate": "2020-07-23T16:16:11Z", "message": "changelog for mssql changers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b67f30a03ba725e0f249e028d8d5b539b8c17d61", "author": {"user": {"login": "migleeson", "name": null}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/b67f30a03ba725e0f249e028d8d5b539b8c17d61", "committedDate": "2020-07-24T14:03:21Z", "message": "fix oracle and derby default"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3830, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}