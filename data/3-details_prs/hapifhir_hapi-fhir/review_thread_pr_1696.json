{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwMDc5MjU1", "number": 1696, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNDozNjoyOFrODcpzCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNDozNzo1OVrODcp1EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzcxNTI5OnYy", "diffSide": "LEFT", "path": "hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/dao/data/ITermValueSetConceptDesignationDao.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNDozNjoyOFrOFkzeXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNTo0MzoxN1rOFk160Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEzNjQxMg==", "bodyText": "I'm curious why you got rid of this query. Don't we still need it to populate designations in an expansion?", "url": "https://github.com/hapifhir/hapi-fhir/pull/1696#discussion_r374136412", "createdAt": "2020-02-03T14:36:28Z", "author": {"login": "dmuylwyk"}, "path": "hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/dao/data/ITermValueSetConceptDesignationDao.java", "diffHunk": "@@ -37,6 +35,4 @@\n \t@Modifying\n \tvoid deleteByTermValueSetId(@Param(\"pid\") Long theValueSetId);\n \n-\t@Query(\"SELECT vscd FROM TermValueSetConceptDesignation vscd WHERE vscd.myConcept.myId = :pid\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b0eb1feef8adad69ea26b5fb2e97e5951b8e8fa"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDE3NjQ2NQ==", "bodyText": "That query was not used at all, I only deleted it because IJ flagged it as an unused method", "url": "https://github.com/hapifhir/hapi-fhir/pull/1696#discussion_r374176465", "createdAt": "2020-02-03T15:43:17Z", "author": {"login": "jamesagnew"}, "path": "hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/dao/data/ITermValueSetConceptDesignationDao.java", "diffHunk": "@@ -37,6 +35,4 @@\n \t@Modifying\n \tvoid deleteByTermValueSetId(@Param(\"pid\") Long theValueSetId);\n \n-\t@Query(\"SELECT vscd FROM TermValueSetConceptDesignation vscd WHERE vscd.myConcept.myId = :pid\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEzNjQxMg=="}, "originalCommit": {"oid": "4b0eb1feef8adad69ea26b5fb2e97e5951b8e8fa"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzcyMDQ4OnYy", "diffSide": "LEFT", "path": "hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/entity/TermValueSetConceptDesignation.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNDozNzo1OVrOFkzhow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNDozNzo1OVrOFkzhow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEzNzI1MQ==", "bodyText": "Yep, this index was definitely wrong. We eventually need indexes on designation.language and designation.use to support the designation in parameter of the $expand operation; however, we definitely do not need an index on designation.value. Glad this came to light.", "url": "https://github.com/hapifhir/hapi-fhir/pull/1696#discussion_r374137251", "createdAt": "2020-02-03T14:37:59Z", "author": {"login": "dmuylwyk"}, "path": "hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/entity/TermValueSetConceptDesignation.java", "diffHunk": "@@ -33,9 +33,7 @@\n import static org.apache.commons.lang3.StringUtils.left;\n import static org.apache.commons.lang3.StringUtils.length;\n \n-@Table(name = \"TRM_VALUESET_C_DESIGNATION\", indexes = {\n-\t@Index(name = \"IDX_VALUESET_C_DSGNTN_VAL\", columnList = \"VAL\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b0eb1feef8adad69ea26b5fb2e97e5951b8e8fa"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1993, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}