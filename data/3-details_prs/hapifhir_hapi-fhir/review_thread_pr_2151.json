{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNDkzNzE2", "number": 2151, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMTozNjoyOFrOE1Z9VQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMTozNjoyOFrOE1Z9VQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0NDM1Mjg1OnYy", "diffSide": "RIGHT", "path": "hapi-fhir-jpaserver-migrate/src/main/java/ca/uhn/fhir/jpa/migrate/tasks/HapiFhirJpaMigrationTasks.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMTozNjoyOFrOHtqjXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMjowNToxMVrOHtrWzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzY0NTE1MA==", "bodyText": "I'm going to fix this myself in another branch I have open so you don't need to address this comment but I'll comment here:\nBetter to use the value instead of the constant in the migration task, so that if the constant changes, the migration checker test will catch it.\nAlso, for the lines below, it's better to not reuse old index names, that's risky if the delete fails for any reason.", "url": "https://github.com/hapifhir/hapi-fhir/pull/2151#discussion_r517645150", "createdAt": "2020-11-04T21:36:28Z", "author": {"login": "jamesagnew"}, "path": "hapi-fhir-jpaserver-migrate/src/main/java/ca/uhn/fhir/jpa/migrate/tasks/HapiFhirJpaMigrationTasks.java", "diffHunk": "@@ -157,6 +158,12 @@ protected void init510() {\n \t\ttrmValueSet.addColumn(\"20200923.2\", \"VER\").nullable().type(ColumnTypeEnum.STRING, TermValueSet.MAX_VER_LENGTH);\n \t\ttrmValueSet.dropIndex(\"20200923.3\", \"IDX_VALUESET_URL\");\n \t\ttrmValueSet.addIndex(\"20200923.4\", \"IDX_VALUESET_URL\").unique(true).withColumns(\"URL\", \"VER\");\n+\n+\t\t//Term ValueSet Component add system version\n+\t\tBuilder.BuilderWithTableName trmValueSetComp = version.onTable(\"TRM_VALUESET_CONCEPT\");\n+\t\ttrmValueSetComp.addColumn(\"20201028.1\", \"SYSTEM_VER\").nullable().type(ColumnTypeEnum.STRING, TermCodeSystemVersion.MAX_VERSION_LENGTH);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "628bf6528f7795aeaa764028d477cf56ec6188ae"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzY1ODMxNw==", "bodyText": "Ah OK, good to know. I will keep this in mind for next time.", "url": "https://github.com/hapifhir/hapi-fhir/pull/2151#discussion_r517658317", "createdAt": "2020-11-04T22:05:11Z", "author": {"login": "IanMMarshall"}, "path": "hapi-fhir-jpaserver-migrate/src/main/java/ca/uhn/fhir/jpa/migrate/tasks/HapiFhirJpaMigrationTasks.java", "diffHunk": "@@ -157,6 +158,12 @@ protected void init510() {\n \t\ttrmValueSet.addColumn(\"20200923.2\", \"VER\").nullable().type(ColumnTypeEnum.STRING, TermValueSet.MAX_VER_LENGTH);\n \t\ttrmValueSet.dropIndex(\"20200923.3\", \"IDX_VALUESET_URL\");\n \t\ttrmValueSet.addIndex(\"20200923.4\", \"IDX_VALUESET_URL\").unique(true).withColumns(\"URL\", \"VER\");\n+\n+\t\t//Term ValueSet Component add system version\n+\t\tBuilder.BuilderWithTableName trmValueSetComp = version.onTable(\"TRM_VALUESET_CONCEPT\");\n+\t\ttrmValueSetComp.addColumn(\"20201028.1\", \"SYSTEM_VER\").nullable().type(ColumnTypeEnum.STRING, TermCodeSystemVersion.MAX_VERSION_LENGTH);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzY0NTE1MA=="}, "originalCommit": {"oid": "628bf6528f7795aeaa764028d477cf56ec6188ae"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1826, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}