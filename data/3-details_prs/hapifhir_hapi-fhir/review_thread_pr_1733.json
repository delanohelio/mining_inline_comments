{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMTc0NDgw", "number": 1733, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQwMjowMDozN1rODkDejA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQwMjowMDozN1rODkDejA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MTMyMzAwOnYy", "diffSide": "LEFT", "path": "hapi-fhir-base/src/main/java/ca/uhn/fhir/parser/json/jackson/JacksonWriter.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQwMjowMDozN1rOFwL0mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxODoyMTo0MlrOF3opCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA2OTY1OQ==", "bodyText": "Rather than removing LinkedList, I would suggest using a Stack like the GsonWriter uses. This is necessary in order for endBlock() to work properly if called twice in a row", "url": "https://github.com/hapifhir/hapi-fhir/pull/1733#discussion_r386069659", "createdAt": "2020-03-01T02:00:37Z", "author": {"login": "bdenton"}, "path": "hapi-fhir-base/src/main/java/ca/uhn/fhir/parser/json/jackson/JacksonWriter.java", "diffHunk": "@@ -21,7 +19,6 @@\n     }\n \n     private BlockType blockType = BlockType.NONE;\n-    private final List<BlockType> blocks = new LinkedList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "850cf23ba3d954ee64531cdd4bc40d252bcb6746"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE0MTA4MQ==", "bodyText": "All tests are passing without having this stack- Truthfully I don't actually see where endBlock() is actually called either, other than in tests. What is its purpose?", "url": "https://github.com/hapifhir/hapi-fhir/pull/1733#discussion_r386141081", "createdAt": "2020-03-01T21:10:11Z", "author": {"login": "jamesagnew"}, "path": "hapi-fhir-base/src/main/java/ca/uhn/fhir/parser/json/jackson/JacksonWriter.java", "diffHunk": "@@ -21,7 +19,6 @@\n     }\n \n     private BlockType blockType = BlockType.NONE;\n-    private final List<BlockType> blocks = new LinkedList<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA2OTY1OQ=="}, "originalCommit": {"oid": "850cf23ba3d954ee64531cdd4bc40d252bcb6746"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYyNzg1Ng==", "bodyText": "When it was written, there were a couple of places in the Json serialization process where the closing of nested arrays & objects was unclear... could need to close a nested array or the surrounding object. Rather than adding logic to JsonParser to keep track of what needed closing, seemed to make more sense to have the JsonLikeWriter keep track", "url": "https://github.com/hapifhir/hapi-fhir/pull/1733#discussion_r386627856", "createdAt": "2020-03-02T20:20:32Z", "author": {"login": "bdenton"}, "path": "hapi-fhir-base/src/main/java/ca/uhn/fhir/parser/json/jackson/JacksonWriter.java", "diffHunk": "@@ -21,7 +19,6 @@\n     }\n \n     private BlockType blockType = BlockType.NONE;\n-    private final List<BlockType> blocks = new LinkedList<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA2OTY1OQ=="}, "originalCommit": {"oid": "850cf23ba3d954ee64531cdd4bc40d252bcb6746"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg4MTg2Ng==", "bodyText": "hmm, i wonder if they were refactored out as a part of other fixes. The good news is that they don't seem to be present any more.", "url": "https://github.com/hapifhir/hapi-fhir/pull/1733#discussion_r393881866", "createdAt": "2020-03-17T18:21:42Z", "author": {"login": "jamesagnew"}, "path": "hapi-fhir-base/src/main/java/ca/uhn/fhir/parser/json/jackson/JacksonWriter.java", "diffHunk": "@@ -21,7 +19,6 @@\n     }\n \n     private BlockType blockType = BlockType.NONE;\n-    private final List<BlockType> blocks = new LinkedList<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA2OTY1OQ=="}, "originalCommit": {"oid": "850cf23ba3d954ee64531cdd4bc40d252bcb6746"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1913, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}