{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM3NDMxMzQ4", "number": 2236, "title": "Add support for unregistering components in the IResourceProviderFactory", "bodyText": "Closes #2235", "createdAt": "2020-12-11T21:32:02Z", "url": "https://github.com/hapifhir/hapi-fhir/pull/2236", "merged": true, "mergeCommit": {"oid": "8f0d69653ae680bb995b989ccb6fdb1a5389191f"}, "closed": true, "closedAt": "2020-12-15T20:04:16Z", "author": {"login": "nvg-smile"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlO1T4AH2gAyNTM3NDMxMzQ4OjllZjNmOTA3NzNjMjhmN2M5MzM1ZDMzNTY2MDQ2NTJiN2EzY2ViN2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdme-DIgH2gAyNTM3NDMxMzQ4OmNkOGFkOWVjMjQ0MDYxNDI2MGYxZTJjMGY0NjkzM2JlNDVlYjU1NGE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9ef3f90773c28f7c9335d3356604652b7a3ceb7e", "author": {"user": {"login": "nvg-smile", "name": "Nick Goupinets"}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/9ef3f90773c28f7c9335d3356604652b7a3ceb7e", "committedDate": "2020-12-11T21:29:20Z", "message": "Initial implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNjQzNDcz", "url": "https://github.com/hapifhir/hapi-fhir/pull/2236#pullrequestreview-550643473", "createdAt": "2020-12-11T23:28:15Z", "commit": {"oid": "9ef3f90773c28f7c9335d3356604652b7a3ceb7e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQyMzoyODoxNVrOIEVAXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQyMzoyODoxNVrOIEVAXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQwOTM3Mw==", "bodyText": "This change looks good, but I have one overall question/comment that I'm adding here for no particular reason.\nYou have a bunch of these MDM Providers for various versions of FHIR. This is a pattern that is used in HAPI FHIR a lot, but we're using it less these days as it's very often possible to create a generic provider that handles all versions of FHIR. See BaseJpaSystemProviderDstu2Plus for an example, which supplies the $mark-all-resources-for-reindexing operation to all versions of FHIR.\nThis approach wasn't possible for a long time which is why it's uncommon in HAPI FHIR, but for anything newer I always try to at least question whether what I'm doing could be written in a cross-version way.\nCan these providers work this way?", "url": "https://github.com/hapifhir/hapi-fhir/pull/2236#discussion_r541409373", "createdAt": "2020-12-11T23:28:15Z", "author": {"login": "jamesagnew"}, "path": "hapi-fhir-server-mdm/src/main/java/ca/uhn/fhir/mdm/provider/MdmProviderLoader.java", "diffHunk": "@@ -45,17 +47,30 @@\n \t@Autowired\n \tprivate IMdmSubmitSvc myMdmSubmitSvc;\n \n+\tprivate BaseMdmProvider myMdmProvider;\n+\n \tpublic void loadProvider() {\n \t\tswitch (myFhirContext.getVersion().getVersion()) {\n \t\t\tcase DSTU3:\n-\t\t\t\tmyResourceProviderFactory.addSupplier(() -> new MdmProviderDstu3(myFhirContext, myMdmControllerSvc, myMdmMatchFinderSvc, myMdmExpungeSvc, myMdmSubmitSvc));\n+\t\t\t\tmyResourceProviderFactory.addSupplier(() -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ef3f90773c28f7c9335d3356604652b7a3ceb7e"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d41eb2c1357a4b5fe80cf89c6a47bcca329ca0e1", "author": {"user": {"login": "nvg-smile", "name": "Nick Goupinets"}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/d41eb2c1357a4b5fe80cf89c6a47bcca329ca0e1", "committedDate": "2020-12-14T02:01:06Z", "message": "Generic provider PoC"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8f50690f21bad8eb76d62297762326869ac1f15", "author": {"user": {"login": "nvg-smile", "name": "Nick Goupinets"}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/d8f50690f21bad8eb76d62297762326869ac1f15", "committedDate": "2020-12-14T22:50:11Z", "message": "Refactored provider to use BundleBuilder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0d9b155b6a9e5536c70e7e13d900937c3f61557", "author": {"user": {"login": "nvg-smile", "name": "Nick Goupinets"}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/e0d9b155b6a9e5536c70e7e13d900937c3f61557", "committedDate": "2020-12-15T00:51:30Z", "message": "Removed version-specific MDM providers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdbcb4a3b59df2e4d55a49c3154e558ce854536c", "author": {"user": {"login": "nvg-smile", "name": "Nick Goupinets"}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/cdbcb4a3b59df2e4d55a49c3154e558ce854536c", "committedDate": "2020-12-15T15:18:41Z", "message": "Addressed code review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a77f27886d5313671b1f61eacbfd19ea48b50dfe", "author": {"user": {"login": "nvg-smile", "name": "Nick Goupinets"}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/a77f27886d5313671b1f61eacbfd19ea48b50dfe", "committedDate": "2020-12-15T15:40:55Z", "message": "Merge branch 'revert-2223-revert-2177-gg_20201105-remove-person-references' into 2235_Add_support_for_unregistering_components_in_the_IResourceProviderFactory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1320b1729fb4dde8278a9d0b10c1d657d1733abb", "author": {"user": {"login": "nvg-smile", "name": "Nick Goupinets"}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/1320b1729fb4dde8278a9d0b10c1d657d1733abb", "committedDate": "2020-12-15T15:42:18Z", "message": "Merge branch 'revert-2223-revert-2177-gg_20201105-remove-person-references' into 2235_Add_support_for_unregistering_components_in_the_IResourceProviderFactory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3476b6825a402eb8dc10ec5f9aea04c7568fd3b3", "author": {"user": {"login": "nvg-smile", "name": "Nick Goupinets"}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/3476b6825a402eb8dc10ec5f9aea04c7568fd3b3", "committedDate": "2020-12-15T16:07:01Z", "message": "Fixed after merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd8ad9ec2440614260f1e2c0f46933be45eb554a", "author": {"user": {"login": "nvg-smile", "name": "Nick Goupinets"}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/cd8ad9ec2440614260f1e2c0f46933be45eb554a", "committedDate": "2020-12-15T18:51:17Z", "message": "Fixed docs"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3816, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}