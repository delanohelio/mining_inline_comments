{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwMDc5MjU1", "number": 1696, "title": "Drop unnecessary index", "bodyText": "", "createdAt": "2020-02-03T00:57:50Z", "url": "https://github.com/hapifhir/hapi-fhir/pull/1696", "merged": true, "mergeCommit": {"oid": "709aeb4ae8f7635a9c2ff4ea3606d66549b73d28"}, "closed": true, "closedAt": "2020-02-03T15:29:40Z", "author": {"login": "jamesagnew"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcAiMfjAH2gAyMzcwMDc5MjU1OmEzYjM5NTdlNjM2ZjI0ZDMyYjA3MjBjOTc5NDRiZTMxYTBjYWI0NDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcAt98QAFqTM1MjI5ODM2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a3b3957e636f24d32b0720c97944be31a0cab447", "author": {"user": {"login": "jamesagnew", "name": "James Agnew"}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/a3b3957e636f24d32b0720c97944be31a0cab447", "committedDate": "2020-02-03T00:56:30Z", "message": "Drop unnecessary index"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b0eb1feef8adad69ea26b5fb2e97e5951b8e8fa", "author": {"user": {"login": "jamesagnew", "name": "James Agnew"}}, "url": "https://github.com/hapifhir/hapi-fhir/commit/4b0eb1feef8adad69ea26b5fb2e97e5951b8e8fa", "committedDate": "2020-02-03T10:27:28Z", "message": "Merge branch 'master' into ja_20200202_remove_unneeded_index"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMjk4MzY5", "url": "https://github.com/hapifhir/hapi-fhir/pull/1696#pullrequestreview-352298369", "createdAt": "2020-02-03T14:36:28Z", "commit": {"oid": "4b0eb1feef8adad69ea26b5fb2e97e5951b8e8fa"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNDozNjoyOFrOFkzeXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNDozNzo1OVrOFkzhow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEzNjQxMg==", "bodyText": "I'm curious why you got rid of this query. Don't we still need it to populate designations in an expansion?", "url": "https://github.com/hapifhir/hapi-fhir/pull/1696#discussion_r374136412", "createdAt": "2020-02-03T14:36:28Z", "author": {"login": "dmuylwyk"}, "path": "hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/dao/data/ITermValueSetConceptDesignationDao.java", "diffHunk": "@@ -37,6 +35,4 @@\n \t@Modifying\n \tvoid deleteByTermValueSetId(@Param(\"pid\") Long theValueSetId);\n \n-\t@Query(\"SELECT vscd FROM TermValueSetConceptDesignation vscd WHERE vscd.myConcept.myId = :pid\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b0eb1feef8adad69ea26b5fb2e97e5951b8e8fa"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEzNzI1MQ==", "bodyText": "Yep, this index was definitely wrong. We eventually need indexes on designation.language and designation.use to support the designation in parameter of the $expand operation; however, we definitely do not need an index on designation.value. Glad this came to light.", "url": "https://github.com/hapifhir/hapi-fhir/pull/1696#discussion_r374137251", "createdAt": "2020-02-03T14:37:59Z", "author": {"login": "dmuylwyk"}, "path": "hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/entity/TermValueSetConceptDesignation.java", "diffHunk": "@@ -33,9 +33,7 @@\n import static org.apache.commons.lang3.StringUtils.left;\n import static org.apache.commons.lang3.StringUtils.length;\n \n-@Table(name = \"TRM_VALUESET_C_DESIGNATION\", indexes = {\n-\t@Index(name = \"IDX_VALUESET_C_DSGNTN_VAL\", columnList = \"VAL\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b0eb1feef8adad69ea26b5fb2e97e5951b8e8fa"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4112, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}