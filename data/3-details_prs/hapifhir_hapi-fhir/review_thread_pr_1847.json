{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MjEyNTEx", "number": 1847, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMDo0MDoxOFrOD8pELQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMDo0NjozM1rOD8pLqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0OTEzOTY1OnYy", "diffSide": "RIGHT", "path": "hapi-fhir-jpaserver-migrate/src/main/java/ca/uhn/fhir/jpa/migrate/tasks/HapiFhirJpaMigrationTasks.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMDo0MDoxOFrOGVtZNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMTowMjo0NVrOGVuGvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQxNzAxNQ==", "bodyText": "This might be higher than the length limit.  James has a test that enforces this so hopefully that test will catch it.  I forget what the length limit is.", "url": "https://github.com/hapifhir/hapi-fhir/pull/1847#discussion_r425417015", "createdAt": "2020-05-14T20:40:18Z", "author": {"login": "fil512"}, "path": "hapi-fhir-jpaserver-migrate/src/main/java/ca/uhn/fhir/jpa/migrate/tasks/HapiFhirJpaMigrationTasks.java", "diffHunk": "@@ -122,7 +124,17 @@ private void init430() {\n \t\tversion.addNop(\"20200420.42\");\n \t}\n \n-\tprotected void init500() { // 20200218 - present\n+\n+\tprivate void init501() { //20200520 - present\n+\t\tBuilder version = forVersion(VersionEnum.V5_0_1);\n+\n+\t\tBuilder.BuilderWithTableName spidxDate = version.onTable(\"HFJ_SPIDX_DATE\");\n+\t\tspidxDate.addIndex(\"20200520.1\", \"IDX_SP_DATE_HASH_LOW\").unique(false).withColumns(\"HASH_IDENTITY\", \"SP_VALUE_LOW\");\n+\t\tspidxDate.addIndex(\"20200520.2\", \"IDX_SP_DATE_ORD_DATE_HASH\").unique(false).withColumns(\"HASH_IDENTITY\", \"SP_VALUE_LOW_DATE_ORDINAL\", \"SP_VALUE_HIGH_DATE_ORDINAL\");\n+\t\tspidxDate.addIndex(\"20200520.3\", \"IDX_SP_DATE_ORD_DATE_HASH_LOW\").unique(false).withColumns(\"HASH_IDENTITY\", \"SP_VALUE_LOW_DATE_ORDINAL\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "269c3f2b04525905c06bdfa4a04ebd6e8da185d4"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQyODY2OQ==", "bodyText": "James just got back to us.  The max length is 30.  This one has length 29 so we're good.", "url": "https://github.com/hapifhir/hapi-fhir/pull/1847#discussion_r425428669", "createdAt": "2020-05-14T21:02:45Z", "author": {"login": "fil512"}, "path": "hapi-fhir-jpaserver-migrate/src/main/java/ca/uhn/fhir/jpa/migrate/tasks/HapiFhirJpaMigrationTasks.java", "diffHunk": "@@ -122,7 +124,17 @@ private void init430() {\n \t\tversion.addNop(\"20200420.42\");\n \t}\n \n-\tprotected void init500() { // 20200218 - present\n+\n+\tprivate void init501() { //20200520 - present\n+\t\tBuilder version = forVersion(VersionEnum.V5_0_1);\n+\n+\t\tBuilder.BuilderWithTableName spidxDate = version.onTable(\"HFJ_SPIDX_DATE\");\n+\t\tspidxDate.addIndex(\"20200520.1\", \"IDX_SP_DATE_HASH_LOW\").unique(false).withColumns(\"HASH_IDENTITY\", \"SP_VALUE_LOW\");\n+\t\tspidxDate.addIndex(\"20200520.2\", \"IDX_SP_DATE_ORD_DATE_HASH\").unique(false).withColumns(\"HASH_IDENTITY\", \"SP_VALUE_LOW_DATE_ORDINAL\", \"SP_VALUE_HIGH_DATE_ORDINAL\");\n+\t\tspidxDate.addIndex(\"20200520.3\", \"IDX_SP_DATE_ORD_DATE_HASH_LOW\").unique(false).withColumns(\"HASH_IDENTITY\", \"SP_VALUE_LOW_DATE_ORDINAL\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQxNzAxNQ=="}, "originalCommit": {"oid": "269c3f2b04525905c06bdfa4a04ebd6e8da185d4"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0OTE1ODgwOnYy", "diffSide": "RIGHT", "path": "hapi-fhir-jpaserver-migrate/src/main/java/ca/uhn/fhir/jpa/migrate/tasks/HapiFhirJpaMigrationTasks.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMDo0NjozM1rOGVtlTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMToxOTo0N1rOGVuneQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQyMDEwOQ==", "bodyText": "Shouldn't this be 20200514.1?", "url": "https://github.com/hapifhir/hapi-fhir/pull/1847#discussion_r425420109", "createdAt": "2020-05-14T20:46:33Z", "author": {"login": "fil512"}, "path": "hapi-fhir-jpaserver-migrate/src/main/java/ca/uhn/fhir/jpa/migrate/tasks/HapiFhirJpaMigrationTasks.java", "diffHunk": "@@ -122,7 +124,17 @@ private void init430() {\n \t\tversion.addNop(\"20200420.42\");\n \t}\n \n-\tprotected void init500() { // 20200218 - present\n+\n+\tprivate void init501() { //20200520 - present\n+\t\tBuilder version = forVersion(VersionEnum.V5_0_1);\n+\n+\t\tBuilder.BuilderWithTableName spidxDate = version.onTable(\"HFJ_SPIDX_DATE\");\n+\t\tspidxDate.addIndex(\"20200520.1\", \"IDX_SP_DATE_HASH_LOW\").unique(false).withColumns(\"HASH_IDENTITY\", \"SP_VALUE_LOW\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "269c3f2b04525905c06bdfa4a04ebd6e8da185d4"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQzNzA0OQ==", "bodyText": "Heh, here's why I thought it was May 20th:", "url": "https://github.com/hapifhir/hapi-fhir/pull/1847#discussion_r425437049", "createdAt": "2020-05-14T21:19:47Z", "author": {"login": "tadgh"}, "path": "hapi-fhir-jpaserver-migrate/src/main/java/ca/uhn/fhir/jpa/migrate/tasks/HapiFhirJpaMigrationTasks.java", "diffHunk": "@@ -122,7 +124,17 @@ private void init430() {\n \t\tversion.addNop(\"20200420.42\");\n \t}\n \n-\tprotected void init500() { // 20200218 - present\n+\n+\tprivate void init501() { //20200520 - present\n+\t\tBuilder version = forVersion(VersionEnum.V5_0_1);\n+\n+\t\tBuilder.BuilderWithTableName spidxDate = version.onTable(\"HFJ_SPIDX_DATE\");\n+\t\tspidxDate.addIndex(\"20200520.1\", \"IDX_SP_DATE_HASH_LOW\").unique(false).withColumns(\"HASH_IDENTITY\", \"SP_VALUE_LOW\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQyMDEwOQ=="}, "originalCommit": {"oid": "269c3f2b04525905c06bdfa4a04ebd6e8da185d4"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1978, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}