{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3ODI0OTg3", "number": 2141, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoxNzoxNlrOEwdptg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoxNzoxNlrOEwdptg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MjUyOTE4OnYy", "diffSide": "RIGHT", "path": "hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/packages/PackageInstallerSvcImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoxNzoxNlrOHmDCag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMTozMjoyNVrOHmGtYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY1NzcwNg==", "bodyText": "You should probably deal with the null case here (and maybe also rename that \"my\" variable since it's not a field) - I'm not actually sure what would happen here in the case of something that didn't have a URL or an identifier, but it's probably safe to just not upload it in that case.", "url": "https://github.com/hapifhir/hapi-fhir/pull/2141#discussion_r509657706", "createdAt": "2020-10-21T20:17:16Z", "author": {"login": "jamesagnew"}, "path": "hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/packages/PackageInstallerSvcImpl.java", "diffHunk": "@@ -412,6 +419,22 @@ private String extractUniqueUrlFromMetadataResource(IBaseResource resource) {\n \t\treturn (String) asPrimitiveType.getValue();\n \t}\n \n+\tprivate TokenParam extractIdentifierFromOtherResourceTypes(IBaseResource resource) {\n+\t\tFhirTerser terser = myFhirContext.newTerser();\n+\t\tIdentifier myIdentifier = (Identifier) terser.getSingleValueOrNull(resource, \"identifier\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "756432e61ac60b3ee2e3924a92838f4a0d5b3350"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTcxNzg1OQ==", "bodyText": "Good point. I have changed this to throw an UnsupportedOperationException if the resource has no identifier and added a corresponding JUnit test for this case.", "url": "https://github.com/hapifhir/hapi-fhir/pull/2141#discussion_r509717859", "createdAt": "2020-10-21T21:32:25Z", "author": {"login": "IanMMarshall"}, "path": "hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/packages/PackageInstallerSvcImpl.java", "diffHunk": "@@ -412,6 +419,22 @@ private String extractUniqueUrlFromMetadataResource(IBaseResource resource) {\n \t\treturn (String) asPrimitiveType.getValue();\n \t}\n \n+\tprivate TokenParam extractIdentifierFromOtherResourceTypes(IBaseResource resource) {\n+\t\tFhirTerser terser = myFhirContext.newTerser();\n+\t\tIdentifier myIdentifier = (Identifier) terser.getSingleValueOrNull(resource, \"identifier\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY1NzcwNg=="}, "originalCommit": {"oid": "756432e61ac60b3ee2e3924a92838f4a0d5b3350"}, "originalPosition": 38}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1817, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}