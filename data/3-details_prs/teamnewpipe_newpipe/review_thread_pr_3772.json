{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNzE5MDU2", "number": 3772, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMTo0Nzo1OVrOEEeLiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxMTo0NDo1OVrOEEpeww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMTI0MjM1OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMTo0Nzo1OVrOGiHdrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMjoxNjoyM1rOGiIIVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQyNzA1NQ==", "bodyText": "Move this call up and thus remove this otherwise pointless function. You probably also shouldn't depend on stuff in GigaGet (also because we want to remove GigaGet in the future). Not sure if we have any util like this in NewPipe, or even have a copy to clipboard feature anywhere in NewPipe.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#discussion_r438427055", "createdAt": "2020-06-10T21:47:59Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -1422,4 +1428,8 @@ private void updateProgressInfo(@NonNull final StreamInfo info) {\n                     animateView(detailPositionView, false, 500);\n                 });\n     }\n+\n+    private void copyTitleText() {\n+        Utility.copyToClipboard(getContext(), videoTitleTextView.getText().toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5375396d27ec72baf448dc7733f2e5c32a2b38b"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQyODI5NQ==", "bodyText": "We have copy to clipboard when we long press comments #3053", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#discussion_r438428295", "createdAt": "2020-06-10T21:51:04Z", "author": {"login": "B0pol"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -1422,4 +1428,8 @@ private void updateProgressInfo(@NonNull final StreamInfo info) {\n                     animateView(detailPositionView, false, 500);\n                 });\n     }\n+\n+    private void copyTitleText() {\n+        Utility.copyToClipboard(getContext(), videoTitleTextView.getText().toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQyNzA1NQ=="}, "originalCommit": {"oid": "b5375396d27ec72baf448dc7733f2e5c32a2b38b"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQzMDI2MQ==", "bodyText": "In that case, could you move the code starting at https://github.com/TeamNewPipe/NewPipe/blob/dev/app/src/main/java/org/schabi/newpipe/info_list/holder/CommentsMiniInfoItemHolder.java#L133 to a separate function in the most appropriate util class in NewPipe (I guess ShareUtils, though it isn't really sharing) and use that here as well?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#discussion_r438430261", "createdAt": "2020-06-10T21:55:58Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -1422,4 +1428,8 @@ private void updateProgressInfo(@NonNull final StreamInfo info) {\n                     animateView(detailPositionView, false, 500);\n                 });\n     }\n+\n+    private void copyTitleText() {\n+        Utility.copyToClipboard(getContext(), videoTitleTextView.getText().toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQyNzA1NQ=="}, "originalCommit": {"oid": "b5375396d27ec72baf448dc7733f2e5c32a2b38b"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQzNDQzOQ==", "bodyText": "It isn't really sharing, but then open in browser isn't too. I think the ShareUtils name is a good fit, since it contains functions to export pieces of information outside of the app in order to interact with it differently (i.e. sharing to a different app/platform/usage method)", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#discussion_r438434439", "createdAt": "2020-06-10T22:06:44Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -1422,4 +1428,8 @@ private void updateProgressInfo(@NonNull final StreamInfo info) {\n                     animateView(detailPositionView, false, 500);\n                 });\n     }\n+\n+    private void copyTitleText() {\n+        Utility.copyToClipboard(getContext(), videoTitleTextView.getText().toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQyNzA1NQ=="}, "originalCommit": {"oid": "b5375396d27ec72baf448dc7733f2e5c32a2b38b"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQzNzk3Mg==", "bodyText": "Ok I added copyToClipboard() to ShareUtils, which is now called for copying comments and for copying the video title", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#discussion_r438437972", "createdAt": "2020-06-10T22:16:23Z", "author": {"login": "adinilfeld"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -1422,4 +1428,8 @@ private void updateProgressInfo(@NonNull final StreamInfo info) {\n                     animateView(detailPositionView, false, 500);\n                 });\n     }\n+\n+    private void copyTitleText() {\n+        Utility.copyToClipboard(getContext(), videoTitleTextView.getText().toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQyNzA1NQ=="}, "originalCommit": {"oid": "b5375396d27ec72baf448dc7733f2e5c32a2b38b"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMzA4MTcxOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxMTo0MDoyN1rOGiZhew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxMTo0MDoyN1rOGiZhew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODcyMjkzOQ==", "bodyText": "I don't think this line is needed, as setOnLongClickListener already makes the view long clickable: https://developer.android.com/reference/android/view/View#setOnLongClickListener(android.view.View.OnLongClickListener)", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#discussion_r438722939", "createdAt": "2020-06-11T11:40:27Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -583,6 +585,9 @@ protected void initViews(final View rootView, final Bundle savedInstanceState) {\n     protected void initListeners() {\n         super.initListeners();\n \n+        videoTitleRoot.setLongClickable(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "267e114354ba2d1ee210cfa2d3526665b5470469"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMzA4NjMzOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/info_list/holder/CommentsMiniInfoItemHolder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxMTo0MjowOFrOGiZkhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNzoyNDoxMlrOGinSNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODcyMzcxNg==", "bodyText": "Even though this is unrelated from your changes, could you invert the two branches of the if, while also removing the ! ?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (!AndroidTvUtils.isTv(itemBuilder.getContext())) {\n          \n          \n            \n                            ClipboardManager clipboardManager = (ClipboardManager) itemBuilder.getContext()\n          \n          \n            \n                                    .getSystemService(Context.CLIPBOARD_SERVICE);\n          \n          \n            \n                            clipboardManager.setPrimaryClip(ClipData.newPlainText(null, commentText));\n          \n          \n            \n                            Toast.makeText(itemBuilder.getContext(), R.string.msg_copied, Toast.LENGTH_SHORT)\n          \n          \n            \n                                    .show();\n          \n          \n            \n                            ShareUtils.copyToClipboard(itemBuilder.getContext(), commentText);\n          \n          \n            \n                        } else {\n          \n          \n            \n                            openCommentAuthor(item);\n          \n          \n            \n                        }\n          \n          \n            \n                        if (AndroidTvUtils.isTv(itemBuilder.getContext())) {\n          \n          \n            \n                            openCommentAuthor(item);\n          \n          \n            \n                        } else {\n          \n          \n            \n                            ShareUtils.copyToClipboard(itemBuilder.getContext(), commentText);\n          \n          \n            \n                        }", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#discussion_r438723716", "createdAt": "2020-06-11T11:42:08Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/info_list/holder/CommentsMiniInfoItemHolder.java", "diffHunk": "@@ -130,11 +127,7 @@ public void updateFromItem(final InfoItem infoItem,\n \n         itemView.setOnLongClickListener(view -> {\n             if (!AndroidTvUtils.isTv(itemBuilder.getContext())) {\n-                ClipboardManager clipboardManager = (ClipboardManager) itemBuilder.getContext()\n-                        .getSystemService(Context.CLIPBOARD_SERVICE);\n-                clipboardManager.setPrimaryClip(ClipData.newPlainText(null, commentText));\n-                Toast.makeText(itemBuilder.getContext(), R.string.msg_copied, Toast.LENGTH_SHORT)\n-                        .show();\n+                ShareUtils.copyToClipboard(itemBuilder.getContext(), commentText);\n             } else {\n                 openCommentAuthor(item);\n             }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "267e114354ba2d1ee210cfa2d3526665b5470469"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0ODQwNQ==", "bodyText": "I made that code, the logic behind it was that non-TV is more common", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#discussion_r438948405", "createdAt": "2020-06-11T17:24:12Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/info_list/holder/CommentsMiniInfoItemHolder.java", "diffHunk": "@@ -130,11 +127,7 @@ public void updateFromItem(final InfoItem infoItem,\n \n         itemView.setOnLongClickListener(view -> {\n             if (!AndroidTvUtils.isTv(itemBuilder.getContext())) {\n-                ClipboardManager clipboardManager = (ClipboardManager) itemBuilder.getContext()\n-                        .getSystemService(Context.CLIPBOARD_SERVICE);\n-                clipboardManager.setPrimaryClip(ClipData.newPlainText(null, commentText));\n-                Toast.makeText(itemBuilder.getContext(), R.string.msg_copied, Toast.LENGTH_SHORT)\n-                        .show();\n+                ShareUtils.copyToClipboard(itemBuilder.getContext(), commentText);\n             } else {\n                 openCommentAuthor(item);\n             }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODcyMzcxNg=="}, "originalCommit": {"oid": "267e114354ba2d1ee210cfa2d3526665b5470469"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMzA5Mzc5OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/util/ShareUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxMTo0NDo1OVrOGiZpUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxMTo0NDo1OVrOGiZpUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODcyNDk0NA==", "bodyText": "This variable could be final", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#discussion_r438724944", "createdAt": "2020-06-11T11:44:59Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/util/ShareUtils.java", "diffHunk": "@@ -78,4 +81,27 @@ public static void shareUrl(final Context context, final String subject, final S\n         context.startActivity(Intent.createChooser(\n                 intent, context.getString(R.string.share_dialog_title)));\n     }\n+\n+    /**\n+     * Copy the text to clipboard, and indicate to the user whether the operation was completed\n+     * successfully using a Toast.\n+     *\n+     * @param context the context to use\n+     * @param text    the text to copy\n+     */\n+    public static void copyToClipboard(final Context context, final String text) {\n+        ClipboardManager clipboardManager =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "267e114354ba2d1ee210cfa2d3526665b5470469"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3205, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}