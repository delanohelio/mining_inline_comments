{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1MzI3NDE1", "number": 4272, "title": "Small fixes of issues with old devices support, brightness, etc", "bodyText": "What is it?\n\n Bug fix (user facing)\n\nDescription of the changes in your PR\nSome very small issues were fixed by this PR.\n\nI don't like this thing https://github.com/TeamNewPipe/NewPipe/compare/dev...avently:small-fixes2?expand=1#diff-20e0b2ce67b307277c153b396fb79660R355  but making the height anything but wrap content makes red dot in progress bar misaligned on Android 4.4, see #4245. With default height progress bar has smaller touchable area but looks ok on old devices too.\nthis thing https://github.com/TeamNewPipe/NewPipe/compare/dev...avently:small-fixes2?expand=1#diff-57eb59a31e38fed8f965fb4a544e3b9fR540 prevents freeze on 4.4. Looks like some devices have even less available size for storing bundle data than Google recommends, see #4230. Anyway, this is how it should work and I'm fine with it\nbrightness will be saved in the place where it changes.\n\nFixes the following issue(s)\ncloses #4271\ncloses #4253\ncloses #4245\ncloses #4230\ncloses #4277\ncloses #4143\ncloses #4294\ncloses #4292\ncloses #4322\nTesting apk\nfind the testing apk somewhere in this page because it's changes often\nAgreement\n\n I carefully read the contribution guidelines and agree to them.", "createdAt": "2020-09-11T18:10:59Z", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4272", "merged": true, "mergeCommit": {"oid": "541eb70b9c40e30b9f29a6098bfe8fbbd2313d95"}, "closed": true, "closedAt": "2020-09-27T13:31:04Z", "author": {"login": "avently"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdH5MNnAH2gAyNDg1MzI3NDE1Ojg4M2U0ZmNkN2MyODI3ZWE1ZmM3Nzg0NDdiZWQ5NjY4NDJhYTFhMGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdM-kwHgFqTQ5NzA3OTc3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "883e4fcd7c2827ea5fc778447bed966842aa1a0e", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/883e4fcd7c2827ea5fc778447bed966842aa1a0e", "committedDate": "2020-09-11T17:52:38Z", "message": "Small fixes of issues with old devices support, brightness, etc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "011cc7d3376f14d4f92e3bac9ef5bf2c8483b789", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/011cc7d3376f14d4f92e3bac9ef5bf2c8483b789", "committedDate": "2020-09-13T23:46:00Z", "message": "Android 11 initial support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d38615ea8453a712e487e4ab9409ac7ecf73a34", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/6d38615ea8453a712e487e4ab9409ac7ecf73a34", "committedDate": "2020-09-14T08:30:41Z", "message": "Android 11: transparent navigation and status bars"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "150e156d26162063304dcf8ba361598f749cb697", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/150e156d26162063304dcf8ba361598f749cb697", "committedDate": "2020-09-15T11:43:43Z", "message": "Reimagined player positioning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5312c1341c9cf3a6edd350955a2b8a63ad09a0b", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/a5312c1341c9cf3a6edd350955a2b8a63ad09a0b", "committedDate": "2020-09-15T16:50:46Z", "message": "Perfect shadow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ada0ae2c7e67a965031b3cf3ae2b91536d046b6", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/5ada0ae2c7e67a965031b3cf3ae2b91536d046b6", "committedDate": "2020-09-15T19:10:38Z", "message": "Hiding controls when orientation changes to landscape"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1e4ef9e8e8b0efdc494774a4e26f8de30ea7c1c", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/a1e4ef9e8e8b0efdc494774a4e26f8de30ea7c1c", "committedDate": "2020-09-16T01:49:26Z", "message": "Fix for multiple listeners of insets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9be812330dd80e0901ccc9a16fe99f06dd7f737", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/c9be812330dd80e0901ccc9a16fe99f06dd7f737", "committedDate": "2020-09-16T20:41:49Z", "message": "Fix for untouchable area"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92e13dafe534eb40b0c8309cca15d943f1095852", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/92e13dafe534eb40b0c8309cca15d943f1095852", "committedDate": "2020-09-17T16:01:20Z", "message": "Correct exit from fullscreen in case of error or close from notification,"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "886a949a0021e722d4702aebfb216c57a4154a60", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/886a949a0021e722d4702aebfb216c57a4154a60", "committedDate": "2020-09-17T19:30:03Z", "message": "Enable/disable video after screen on/off regardless of background playback setting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxOTk2NzUy", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4272#pullrequestreview-491996752", "createdAt": "2020-09-19T12:50:39Z", "commit": {"oid": "886a949a0021e722d4702aebfb216c57a4154a60"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOVQxMjo1MDo0MFrOHUqC4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOVQxMzowODo0MVrOHUqdTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQyMjQzMw==", "bodyText": "Add another parenthesis here before searchForAutogenerated and userPreferredLanguage, in order to make it more clear that the &&s are referred to only the two items to the left and to the right.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4272#discussion_r491422433", "createdAt": "2020-09-19T12:50:40Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/player/VideoPlayer.java", "diffHunk": "@@ -359,8 +363,8 @@ private void buildCaptionMenu(final List<String> availableLanguages) {\n             if (userPreferredLanguage != null && (captionLanguage.equals(userPreferredLanguage)\n                     || searchForAutogenerated && captionLanguage.startsWith(userPreferredLanguage)\n                     || userPreferredLanguage.contains(\"(\") && captionLanguage.startsWith(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "886a949a0021e722d4702aebfb216c57a4154a60"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQyOTE5Nw==", "bodyText": "Could you better explain in which way this overrides a method? At first I interpreted it as a Java-language override, but it is not and you meant override in the sense of overwrite, so please change this to \"Override Google's behaviour\"", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4272#discussion_r491429197", "createdAt": "2020-09-19T13:08:41Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/views/CustomCollapsingToolbarLayout.java", "diffHunk": "@@ -0,0 +1,36 @@\n+package org.schabi.newpipe.views;\n+\n+import android.content.Context;\n+import android.util.AttributeSet;\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.core.view.ViewCompat;\n+import com.google.android.material.appbar.CollapsingToolbarLayout;\n+\n+public class CustomCollapsingToolbarLayout extends CollapsingToolbarLayout {\n+    public CustomCollapsingToolbarLayout(@NonNull final Context context) {\n+        super(context);\n+        overrideListener();\n+    }\n+\n+    public CustomCollapsingToolbarLayout(@NonNull final Context context,\n+                                         @Nullable final AttributeSet attrs) {\n+        super(context, attrs);\n+        overrideListener();\n+    }\n+\n+    public CustomCollapsingToolbarLayout(@NonNull final Context context,\n+                                         @Nullable final AttributeSet attrs,\n+                                         final int defStyleAttr) {\n+        super(context, attrs, defStyleAttr);\n+        overrideListener();\n+    }\n+\n+    /**\n+     * CollapsingToolbarLayout overrides our logic with fitsSystemWindows and ruins the layout.\n+     * Override Google's method", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "886a949a0021e722d4702aebfb216c57a4154a60"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f41549ccf17fb12e8c38de5a5d049291159ceead", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/f41549ccf17fb12e8c38de5a5d049291159ceead", "committedDate": "2020-09-19T14:21:01Z", "message": "Added a comment and excluded automatic switch of orientation on tablets and Android TVs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "518eb97e3ab299f91e3f247582e9c4fa5de319d6", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/518eb97e3ab299f91e3f247582e9c4fa5de319d6", "committedDate": "2020-09-19T19:52:59Z", "message": "Variable width for caption button and hiding system UI after popup close"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3add24b8aa40d9029a1387ae2197afc2f8adedb8", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/3add24b8aa40d9029a1387ae2197afc2f8adedb8", "committedDate": "2020-09-25T23:42:26Z", "message": "Merged 'dev' branch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df9823988ef3c386a5c4d3c4b18946937ba42276", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/df9823988ef3c386a5c4d3c4b18946937ba42276", "committedDate": "2020-09-27T01:11:38Z", "message": "Changes for tablets and device's orientation behavior\n- the app will not rotate the screen to portrait after video completes, it will just exit from fullscreen mode\n- ability to rotate the orientation via fullscreen button from landscape to portrait when device has locked orientation in landscape\n- ability to enter/exit to/from fullscreen on tablets with unlocked global orientation in portrait mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0fc9fda711346b3cbc0f79ddfbbc50933de02d5", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/d0fc9fda711346b3cbc0f79ddfbbc50933de02d5", "committedDate": "2020-09-27T01:25:06Z", "message": "Fixed player's ZOOM mode for KitKat devices"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a0c2c40bd6fa6e5f77fd9ee317ba8ebb881aba8", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/9a0c2c40bd6fa6e5f77fd9ee317ba8ebb881aba8", "committedDate": "2020-09-27T03:39:42Z", "message": "Refactoring and made the player returning from landscape & fullscreen on vertical video to portrait after clicking on fullscreen button"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDU2NTU0", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4272#pullrequestreview-497056554", "createdAt": "2020-09-27T06:49:31Z", "commit": {"oid": "9a0c2c40bd6fa6e5f77fd9ee317ba8ebb881aba8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QwNjo0OTozMlrOHYlMLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QwNjo0OTozMlrOHYlMLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUzNzE5OA==", "bodyText": "Is that line needed to remember something or was it just commented out, because it did not help?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4272#discussion_r495537198", "createdAt": "2020-09-27T06:49:32Z", "author": {"login": "TobiGr"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -1927,21 +1946,29 @@ public void onFullscreenStateChanged(final boolean fullscreen) {\n         }\n         scrollToTop();\n \n-        addVideoPlayerView();\n+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {\n+            addVideoPlayerView();\n+        } else {\n+            // KitKat needs a delay before addVideoPlayerView call or it reports wrong height in\n+            // activity.getWindow().getDecorView().getHeight()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a0c2c40bd6fa6e5f77fd9ee317ba8ebb881aba8"}, "originalPosition": 154}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "609bf64856574100bffba6e1e7313498986d1632", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/609bf64856574100bffba6e1e7313498986d1632", "committedDate": "2020-09-27T12:04:20Z", "message": "Merged 'dev' branch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e53e5ca20e9b1494f07878e549bc66b3eedcd472", "author": {"user": {"login": "avently", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/e53e5ca20e9b1494f07878e549bc66b3eedcd472", "committedDate": "2020-09-27T12:50:21Z", "message": "Disabled nested scrolling of queue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDc5Nzc4", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4272#pullrequestreview-497079778", "createdAt": "2020-09-27T12:58:35Z", "commit": {"oid": "e53e5ca20e9b1494f07878e549bc66b3eedcd472"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4116, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}