{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5OTg2ODM2", "number": 3243, "title": "Show radio icon as uploader avatar in Youtube mixes ", "bodyText": "I carefully read the contribution guidelines and agree to them.\n\nShows \"100+ videos\" when the stream count of a playlist is ListExtractor.ITEM_COUNT_MORE_THAN_100 and shows \"\u221e videos\" when the stream count of a playlist is ListExtractor.ITEM_COUNT_INFINITE.\nUses the global utils.Localization.localizeStreamCount() function everywhere, i.e. in PlaylistFragment, PlaylistInfoItem and ChannelMiniInfoItem to correctly localize the item count (before it was not used in Playlist-related classes).\nNow only does as described in the title. As discussed below using YouTube's logo is too risky, so we are using a radio icon instead.\nDepends on TeamNewPipe/NewPipeExtractor#280 @XiangRongLin", "createdAt": "2020-03-17T17:51:08Z", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3243", "merged": true, "mergeCommit": {"oid": "79189dcc83dba8a55bf232a283a6b95b749b520b"}, "closed": true, "closedAt": "2020-12-14T18:29:13Z", "author": {"login": "Stypox"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOosLqgBqjMxMzg5MzIxMDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmJ9ECABqjQxMTA3MDQ4OTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8734abfde2f94764be7c61132c29462790eec0b2", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/8734abfde2f94764be7c61132c29462790eec0b2", "committedDate": "2020-03-17T17:41:44Z", "message": "Add support for MORE_THAN_100_ITEMS in playlists"}, "afterCommit": {"oid": "0341e6a70128e592c2d1586700ca423b4eab0a36", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/0341e6a70128e592c2d1586700ca423b4eab0a36", "committedDate": "2020-03-17T20:22:11Z", "message": "Add support for INFINITE_ and MORE_THAN_100_ITEMS in playlists"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTIyODAy", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3243#pullrequestreview-378522802", "createdAt": "2020-03-20T14:19:15Z", "commit": {"oid": "0341e6a70128e592c2d1586700ca423b4eab0a36"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDoxOToxNVrOF5VmUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDoxOToxNVrOF5VmUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY2NzAyNg==", "bodyText": "I would prefer a switch case here", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3243#discussion_r395667026", "createdAt": "2020-03-20T14:19:15Z", "author": {"login": "XiangRongLin"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/list/playlist/PlaylistFragment.java", "diffHunk": "@@ -284,8 +285,15 @@ public void handleResult(@NonNull final PlaylistInfo result) {\n \n         imageLoader.displayImage(result.getUploaderAvatarUrl(), headerUploaderAvatar,\n                 ImageDisplayConstants.DISPLAY_AVATAR_OPTIONS);\n-        headerStreamCount.setText(getResources().getQuantityString(R.plurals.videos,\n-                (int) result.getStreamCount(), (int) result.getStreamCount()));\n+\n+        int streamCount = (int) result.getStreamCount();\n+        if (streamCount == PlaylistExtractor.MORE_THAN_100_ITEMS) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0341e6a70128e592c2d1586700ca423b4eab0a36"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0341e6a70128e592c2d1586700ca423b4eab0a36", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/0341e6a70128e592c2d1586700ca423b4eab0a36", "committedDate": "2020-03-17T20:22:11Z", "message": "Add support for INFINITE_ and MORE_THAN_100_ITEMS in playlists"}, "afterCommit": {"oid": "9411b8e38590e5f9b429bdbd28e1ecf36afdcf06", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/9411b8e38590e5f9b429bdbd28e1ecf36afdcf06", "committedDate": "2020-03-20T19:57:56Z", "message": "Detect ITEM_COUNT_* in localizeStreamCount()\n\nITEM_COUNT_INFINITE and ITEM_COUNT_MORE_THAN_100.\nUse localizeStreamCount in PlaylistFragment and PlaylistItemHolder"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NzgxMDg0", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3243#pullrequestreview-378781084", "createdAt": "2020-03-20T20:08:22Z", "commit": {"oid": "9411b8e38590e5f9b429bdbd28e1ecf36afdcf06"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDowODoyMlrOF5hwRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDowOTowMVrOF5hxVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2NjE4MA==", "bodyText": "Here it should say just the count like in my PR. So e.g. \"100+\" instead of \"100+ videos\".", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3243#discussion_r395866180", "createdAt": "2020-03-20T20:08:22Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/info_list/holder/PlaylistMiniInfoItemHolder.java", "diffHunk": "@@ -36,7 +37,8 @@ public void updateFromItem(final InfoItem infoItem, final HistoryRecordManager h\n         final PlaylistInfoItem item = (PlaylistInfoItem) infoItem;\n \n         itemTitleView.setText(item.getName());\n-        itemStreamCountView.setText(String.valueOf(item.getStreamCount()));\n+        itemStreamCountView.setText(Localization.localizeStreamCount(itemStreamCountView.getContext(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9411b8e38590e5f9b429bdbd28e1ecf36afdcf06"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2NjQ1Mg==", "bodyText": "Why are you casting to int?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3243#discussion_r395866452", "createdAt": "2020-03-20T20:09:01Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/util/Localization.java", "diffHunk": "@@ -145,7 +148,14 @@ public static String localizeViewCount(Context context, long viewCount) {\n     }\n \n     public static String localizeStreamCount(Context context, long streamCount) {\n-        return getQuantity(context, R.plurals.videos, R.string.no_videos, streamCount, localizeNumber(context, streamCount));\n+        switch ((int) streamCount) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9411b8e38590e5f9b429bdbd28e1ecf36afdcf06"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4ODIwNjQ4", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3243#pullrequestreview-378820648", "createdAt": "2020-03-20T21:24:44Z", "commit": {"oid": "9f7bc2b1b9f8bc2fc519a740c1cb584ae97de280"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MDQyNDQ3", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3243#pullrequestreview-379042447", "createdAt": "2020-03-22T20:07:53Z", "commit": {"oid": "48f17ffdc197ae611c2ad9579e8c5394fd834051"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMDowNzo1NFrOF5yLsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMDowNzo1NFrOF5yLsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjEzNTM0NA==", "bodyText": "I think checking whether the uploader name is \"YouTube\" and the uploaderUrl is empty seems to be better here", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3243#discussion_r396135344", "createdAt": "2020-03-22T20:07:54Z", "author": {"login": "TobiGr"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/list/playlist/PlaylistFragment.java", "diffHunk": "@@ -282,10 +284,21 @@ public void handleResult(@NonNull final PlaylistInfo result) {\n \n         playlistCtrl.setVisibility(View.VISIBLE);\n \n-        imageLoader.displayImage(result.getUploaderAvatarUrl(), headerUploaderAvatar,\n-                ImageDisplayConstants.DISPLAY_AVATAR_OPTIONS);\n-        headerStreamCount.setText(getResources().getQuantityString(R.plurals.videos,\n-                (int) result.getStreamCount(), (int) result.getStreamCount()));\n+        String avatarUrl = result.getUploaderAvatarUrl();\n+        if (avatarUrl.contains(\"upload.wikimedia.org\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48f17ffdc197ae611c2ad9579e8c5394fd834051"}, "originalPosition": 58}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "652a7de3ff74fd6231c364c194e48f9d42a51284", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/652a7de3ff74fd6231c364c194e48f9d42a51284", "committedDate": "2020-03-24T20:07:07Z", "message": "Do not make radio icon circular in mix playlists"}, "afterCommit": {"oid": "1a278bf2af5932b9d8e5bb18fa63fa8a436e3a6c", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/1a278bf2af5932b9d8e5bb18fa63fa8a436e3a6c", "committedDate": "2020-04-10T20:36:24Z", "message": "Show radio instead of Youtube logo in mixes\n\nYouTube mixes have YouTube as a creator, though YouTube's logo is not safe to use as it is a trademark (better safe than sorry)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "503ebbab51975c7a106db79681ba3d6f6a5ba678", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/503ebbab51975c7a106db79681ba3d6f6a5ba678", "committedDate": "2020-04-10T20:43:48Z", "message": "Fix checkstyle issues and a rebase oversight"}, "afterCommit": {"oid": "623f7ad5d335eb1d621b90cb9fce892b3d67d900", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/623f7ad5d335eb1d621b90cb9fce892b3d67d900", "committedDate": "2020-05-21T13:00:39Z", "message": "Show radio instead of Youtube logo in mixes\n\nYouTube mixes have YouTube as a creator, though YouTube's logo is not safe to use as it is a trademark (better safe than sorry)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "623f7ad5d335eb1d621b90cb9fce892b3d67d900", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/623f7ad5d335eb1d621b90cb9fce892b3d67d900", "committedDate": "2020-05-21T13:00:39Z", "message": "Show radio instead of Youtube logo in mixes\n\nYouTube mixes have YouTube as a creator, though YouTube's logo is not safe to use as it is a trademark (better safe than sorry)"}, "afterCommit": {"oid": "18a2057e59f0d2143e1c1a391016bf789dd7a101", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/18a2057e59f0d2143e1c1a391016bf789dd7a101", "committedDate": "2020-05-21T13:08:09Z", "message": "Show radio instead of Youtube logo in mixes\n\nYouTube mixes have YouTube as a creator, though YouTube's logo is not safe to use as it is a trademark (better safe than sorry)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "18a2057e59f0d2143e1c1a391016bf789dd7a101", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/18a2057e59f0d2143e1c1a391016bf789dd7a101", "committedDate": "2020-05-21T13:08:09Z", "message": "Show radio instead of Youtube logo in mixes\n\nYouTube mixes have YouTube as a creator, though YouTube's logo is not safe to use as it is a trademark (better safe than sorry)"}, "afterCommit": {"oid": "c2895500df9cb348e093b13482baaa526db1d0cc", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/c2895500df9cb348e093b13482baaa526db1d0cc", "committedDate": "2020-05-21T13:09:18Z", "message": "Show radio instead of Youtube logo in mixes\n\nYouTube mixes have YouTube as a creator, though YouTube's logo is not safe to use as it is a trademark (better safe than sorry)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2895500df9cb348e093b13482baaa526db1d0cc", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/c2895500df9cb348e093b13482baaa526db1d0cc", "committedDate": "2020-05-21T13:09:18Z", "message": "Show radio instead of Youtube logo in mixes\n\nYouTube mixes have YouTube as a creator, though YouTube's logo is not safe to use as it is a trademark (better safe than sorry)"}, "afterCommit": {"oid": "a18ebf6600da0c5d7cd5d6fc840ac0db4920c02d", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/a18ebf6600da0c5d7cd5d6fc840ac0db4920c02d", "committedDate": "2020-12-14T17:29:51Z", "message": "Show radio instead of Youtube logo in mixes\n\nYouTube mixes have YouTube as a creator, though YouTube's logo is not safe to use as it is a trademark (better safe than sorry)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2210330b6d70f08b194065accaef2a067b639fb", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/c2210330b6d70f08b194065accaef2a067b639fb", "committedDate": "2020-12-14T18:22:00Z", "message": "Show radio instead of Youtube logo in mixes\n\nYouTube mixes have YouTube as a creator, though YouTube's logo is not safe to use as it is a trademark (better safe than sorry)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a18ebf6600da0c5d7cd5d6fc840ac0db4920c02d", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/a18ebf6600da0c5d7cd5d6fc840ac0db4920c02d", "committedDate": "2020-12-14T17:29:51Z", "message": "Show radio instead of Youtube logo in mixes\n\nYouTube mixes have YouTube as a creator, though YouTube's logo is not safe to use as it is a trademark (better safe than sorry)"}, "afterCommit": {"oid": "3ec079b20201e535cd33869957c225ef73be21f7", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/3ec079b20201e535cd33869957c225ef73be21f7", "committedDate": "2020-12-14T17:50:00Z", "message": "Show radio instead of Youtube logo in mixes\n\nYouTube mixes have YouTube as a creator, though YouTube's logo is not safe to use as it is a trademark (better safe than sorry)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3ec079b20201e535cd33869957c225ef73be21f7", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/3ec079b20201e535cd33869957c225ef73be21f7", "committedDate": "2020-12-14T17:50:00Z", "message": "Show radio instead of Youtube logo in mixes\n\nYouTube mixes have YouTube as a creator, though YouTube's logo is not safe to use as it is a trademark (better safe than sorry)"}, "afterCommit": {"oid": "c2210330b6d70f08b194065accaef2a067b639fb", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/c2210330b6d70f08b194065accaef2a067b639fb", "committedDate": "2020-12-14T18:22:00Z", "message": "Show radio instead of Youtube logo in mixes\n\nYouTube mixes have YouTube as a creator, though YouTube's logo is not safe to use as it is a trademark (better safe than sorry)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4044, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}