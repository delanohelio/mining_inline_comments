{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2NzAxNTc1", "number": 5310, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQwODoxMDoyOFrOFJ-lhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQwOTo0MTo1OVrOFKdZ6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2MDA2OTE5OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/fragments/list/playlist/PlaylistFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQwODoxMDoyOFrOIMiVag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQwODoxMDoyOFrOIMiVag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDAxNjM2Mg==", "bodyText": "You could provide this as a method in KoreUtil so if the logic for when to show the kodi entry is centralized and not copied over 3 places.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5310#discussion_r550016362", "createdAt": "2020-12-30T08:10:28Z", "author": {"login": "XiangRongLin"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/list/playlist/PlaylistFragment.java", "diffHunk": "@@ -174,6 +176,12 @@ protected void showStreamDialog(final StreamInfoItem item) {\n                     StreamDialogEntry.share\n             ));\n         }\n+        final boolean enableKodiEntry = KoreUtil.isServiceSupportedByKore(item.getServiceId())\n+                && PreferenceManager.getDefaultSharedPreferences(context)\n+                .getBoolean(context.getString(R.string.show_play_with_kodi_key), false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83faf119a90ac1adb02d62fee2ec31d54f18e669"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2MDM2MTYyOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/util/StreamDialogEntry.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQwOToxNDowNFrOIMlUhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQwOToxNDowNFrOIMlUhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDA2NTI4NA==", "bodyText": "Call this \"play_with_kody\" to stay consistent", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5310#discussion_r550065284", "createdAt": "2020-12-30T09:14:04Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/util/StreamDialogEntry.java", "diffHunk": "@@ -70,6 +71,15 @@\n         }\n     }),\n \n+    play_on_kodi(R.string.play_with_kodi_title, (fragment, item) -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83faf119a90ac1adb02d62fee2ec31d54f18e669"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2NTExODUxOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/util/KoreUtil.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQwOTo0MTo1OVrOINPMoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMlQxOToyNTowM1rOINZCGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc1MTM5Mw==", "bodyText": "This method can be also used in other places, e.g. in the player, can't it?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5310#discussion_r550751393", "createdAt": "2021-01-01T09:41:59Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/util/KoreUtil.java", "diffHunk": "@@ -16,6 +18,12 @@ public static boolean isServiceSupportedByKore(final int serviceId) {\n                 || serviceId == ServiceList.SoundCloud.getServiceId());\n     }\n \n+    public static boolean shouldShowPlayWithKodi(final Context context, final StreamInfoItem item) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48a5107296c4f62fa762dafe4e999337f2b23e62"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc2NDIwNA==", "bodyText": "Do you mean places like this one?\n\n  \n    \n      NewPipe/app/src/main/java/org/schabi/newpipe/player/VideoPlayerImpl.java\n    \n    \n        Lines 934 to 937\n      in\n      8fe1a76\n    \n    \n    \n    \n\n        \n          \n           final boolean showKodiButton = playQueue != null && playQueue.getItem() != null \n        \n\n        \n          \n                   && KoreUtil.isServiceSupportedByKore(playQueue.getItem().getServiceId()) \n        \n\n        \n          \n                   && PreferenceManager.getDefaultSharedPreferences(context) \n        \n\n        \n          \n                   .getBoolean(context.getString(R.string.show_play_with_kodi_key), false); \n        \n    \n  \n\n\nIt should be used here, too.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5310#discussion_r550764204", "createdAt": "2021-01-01T12:31:38Z", "author": {"login": "TobiGr"}, "path": "app/src/main/java/org/schabi/newpipe/util/KoreUtil.java", "diffHunk": "@@ -16,6 +18,12 @@ public static boolean isServiceSupportedByKore(final int serviceId) {\n                 || serviceId == ServiceList.SoundCloud.getServiceId());\n     }\n \n+    public static boolean shouldShowPlayWithKodi(final Context context, final StreamInfoItem item) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc1MTM5Mw=="}, "originalCommit": {"oid": "48a5107296c4f62fa762dafe4e999337f2b23e62"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDgyOTY2OQ==", "bodyText": "this seems like a reasonable place to use the new method, but i couldn't find a way to get a StreamInfoItem from a playQueue. any suggestions?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5310#discussion_r550829669", "createdAt": "2021-01-02T01:39:03Z", "author": {"login": "khimaros"}, "path": "app/src/main/java/org/schabi/newpipe/util/KoreUtil.java", "diffHunk": "@@ -16,6 +18,12 @@ public static boolean isServiceSupportedByKore(final int serviceId) {\n                 || serviceId == ServiceList.SoundCloud.getServiceId());\n     }\n \n+    public static boolean shouldShowPlayWithKodi(final Context context, final StreamInfoItem item) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc1MTM5Mw=="}, "originalCommit": {"oid": "48a5107296c4f62fa762dafe4e999337f2b23e62"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDg1Njg4OA==", "bodyText": "@khimaros Instead of passing in a StreamInfoItem you can pass in the service id, since that is the thing you actually need. Otherwise those items should have a common superclass, that would work too, but just passing the id is preferred.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5310#discussion_r550856888", "createdAt": "2021-01-02T08:02:36Z", "author": {"login": "XiangRongLin"}, "path": "app/src/main/java/org/schabi/newpipe/util/KoreUtil.java", "diffHunk": "@@ -16,6 +18,12 @@ public static boolean isServiceSupportedByKore(final int serviceId) {\n                 || serviceId == ServiceList.SoundCloud.getServiceId());\n     }\n \n+    public static boolean shouldShowPlayWithKodi(final Context context, final StreamInfoItem item) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc1MTM5Mw=="}, "originalCommit": {"oid": "48a5107296c4f62fa762dafe4e999337f2b23e62"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDkxMjUzNw==", "bodyText": "that works, thanks!", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5310#discussion_r550912537", "createdAt": "2021-01-02T19:25:03Z", "author": {"login": "khimaros"}, "path": "app/src/main/java/org/schabi/newpipe/util/KoreUtil.java", "diffHunk": "@@ -16,6 +18,12 @@ public static boolean isServiceSupportedByKore(final int serviceId) {\n                 || serviceId == ServiceList.SoundCloud.getServiceId());\n     }\n \n+    public static boolean shouldShowPlayWithKodi(final Context context, final StreamInfoItem item) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc1MTM5Mw=="}, "originalCommit": {"oid": "48a5107296c4f62fa762dafe4e999337f2b23e62"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2955, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}