{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0NTE5Mzkz", "number": 3278, "title": "Fix url parsing from shared content", "bodyText": "What is it?\n\n Bug fix\n Feature\n\nLong description of the changes in your PR\nFix bug where urls from shared content were not being completed returned.\nIt happened when the app tried to find urls from the shared content and the url ended with one of the incorrectly considered \"invalid\" characters (e.g. _).\nThis is a pretty old issue, surprised that no one bumped into it in 3 years (!!!).\nFixes the following issue(s)\n\nFixes #3277\nTesting APK\nfix-url-parsing-share.apk.zip", "createdAt": "2020-03-27T02:41:44Z", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3278", "merged": true, "mergeCommit": {"oid": "d051df959974ee3dfadf47ad708e27be8c23818b"}, "closed": true, "closedAt": "2020-03-28T17:15:27Z", "author": {"login": "mauriciocolli"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSDREugFqTM4MzMwMjkyMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSIgidAFqTM4MzMzMDk2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzAyOTIy", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3278#pullrequestreview-383302922", "createdAt": "2020-03-28T10:52:39Z", "commit": {"oid": "eb5769b77f3d867f922d0d91663953171c5d8194"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxMDo1Mjo0MFrOF9Imng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxMDo1Mjo0MFrOF9Imng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY0ODQxNA==", "bodyText": "Hm. This needs some license in this case. Seems to be Apache 2.0.\nDid you change anything or did you just copied the patterns to get the private stuff?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3278#discussion_r399648414", "createdAt": "2020-03-28T10:52:40Z", "author": {"login": "TobiGr"}, "path": "app/src/main/java/org/schabi/newpipe/util/UrlFinder.kt", "diffHunk": "@@ -0,0 +1,85 @@\n+package org.schabi.newpipe.util\n+\n+import java.util.regex.Pattern\n+\n+class UrlFinder {\n+    companion object {\n+        /**\n+         * @return the first url found in the input, null otherwise.\n+         */\n+        @JvmStatic\n+        fun firstUrlFromInput(input: String?): String? {\n+            if (input.isNullOrEmpty()) {\n+                return null\n+            }\n+\n+            val matcher = WEB_URL_WITH_PROTOCOL.matcher(input)\n+\n+            if (matcher.find()) {\n+                return matcher.group()\n+            }\n+\n+            return null\n+        }\n+\n+        /*\n+         * !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n+         * Patterns below are copied from PatternsCompat", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb5769b77f3d867f922d0d91663953171c5d8194"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f133bbf499afd15629be62a887ec3f2ad1ad01d6", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/f133bbf499afd15629be62a887ec3f2ad1ad01d6", "committedDate": "2020-03-28T17:06:09Z", "message": "Introduce a proper way to find urls in a string input"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dc28989c884c599648a22a7692ab43e8d9cb0b1", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/4dc28989c884c599648a22a7692ab43e8d9cb0b1", "committedDate": "2020-03-28T17:06:11Z", "message": "Fix bug when searching for urls from shared content"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb5769b77f3d867f922d0d91663953171c5d8194", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/eb5769b77f3d867f922d0d91663953171c5d8194", "committedDate": "2020-03-27T02:18:14Z", "message": "Fix bug when searching for urls from shared content"}, "afterCommit": {"oid": "4dc28989c884c599648a22a7692ab43e8d9cb0b1", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/4dc28989c884c599648a22a7692ab43e8d9cb0b1", "committedDate": "2020-03-28T17:06:11Z", "message": "Fix bug when searching for urls from shared content"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzMwOTY2", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3278#pullrequestreview-383330966", "createdAt": "2020-03-28T17:11:30Z", "commit": {"oid": "4dc28989c884c599648a22a7692ab43e8d9cb0b1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4175, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}