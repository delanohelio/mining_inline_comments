{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2NDQ2ODI4", "number": 4814, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxMDoyNzozNlrOFHjM5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxMDo0MTowOVrOFHjR9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNDYxMDk0OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/fragments/MainFragment.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxMDoyNzozNlrOIJC86g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMjo0NTowOVrOIJ58rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM1NjQ1OA==", "bodyText": "Why are you setting binding = null here and not in onDestroyView like all other fragments?\n(unrelated to this PR, just a note for the future) pagerAdapter should be set to null here, as LeakCanary reports it as leaking.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4814#discussion_r546356458", "createdAt": "2020-12-20T10:27:36Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/MainFragment.java", "diffHunk": "@@ -120,8 +117,9 @@ public void onResume() {\n     public void onDestroy() {\n         super.onDestroy();\n         tabsManager.unsetSavedTabsListener();\n-        if (viewPager != null) {\n-            viewPager.setAdapter(null);\n+        if (binding != null) {\n+            binding.pager.setAdapter(null);\n+            binding = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d6831fd61c52c3bc1b8e0a99a1d44e9618c6acf"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI1MDEzNw==", "bodyText": "Because the pager adapter is being set to null in that method, and the onDestroyView method is called before onDestroy: https://developer.android.com/guide/fragments/lifecycle.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4814#discussion_r547250137", "createdAt": "2020-12-22T12:28:22Z", "author": {"login": "Isira-Seneviratne"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/MainFragment.java", "diffHunk": "@@ -120,8 +117,9 @@ public void onResume() {\n     public void onDestroy() {\n         super.onDestroy();\n         tabsManager.unsetSavedTabsListener();\n-        if (viewPager != null) {\n-            viewPager.setAdapter(null);\n+        if (binding != null) {\n+            binding.pager.setAdapter(null);\n+            binding = null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM1NjQ1OA=="}, "originalCommit": {"oid": "2d6831fd61c52c3bc1b8e0a99a1d44e9618c6acf"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI1MzgwMQ==", "bodyText": "That logic should be in onDestroyView, since the view gets re-created all the time.\nonDestroy happens when the fragment is killed, what does that mean?\nonDestroyView is called everytime whilst onDestroy isn't.\nYou should move it to onDestroyView", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4814#discussion_r547253801", "createdAt": "2020-12-22T12:36:52Z", "author": {"login": "FunkyMuse"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/MainFragment.java", "diffHunk": "@@ -120,8 +117,9 @@ public void onResume() {\n     public void onDestroy() {\n         super.onDestroy();\n         tabsManager.unsetSavedTabsListener();\n-        if (viewPager != null) {\n-            viewPager.setAdapter(null);\n+        if (binding != null) {\n+            binding.pager.setAdapter(null);\n+            binding = null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM1NjQ1OA=="}, "originalCommit": {"oid": "2d6831fd61c52c3bc1b8e0a99a1d44e9618c6acf"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI1NzUxOA==", "bodyText": "Okay.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4814#discussion_r547257518", "createdAt": "2020-12-22T12:45:09Z", "author": {"login": "Isira-Seneviratne"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/MainFragment.java", "diffHunk": "@@ -120,8 +117,9 @@ public void onResume() {\n     public void onDestroy() {\n         super.onDestroy();\n         tabsManager.unsetSavedTabsListener();\n-        if (viewPager != null) {\n-            viewPager.setAdapter(null);\n+        if (binding != null) {\n+            binding.pager.setAdapter(null);\n+            binding = null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM1NjQ1OA=="}, "originalCommit": {"oid": "2d6831fd61c52c3bc1b8e0a99a1d44e9618c6acf"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNDYyMTczOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/local/feed/FeedFragment.kt", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxMDozODo0MFrOIJDCBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMzoyNDowNFrOIJ7C7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM1Nzc2NQ==", "bodyText": "Can't you just make them lateinit to prevent having to use asserting getters? Though I have little experience in Kotlin, so I may be wrong ;-)", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4814#discussion_r546357765", "createdAt": "2020-12-20T10:38:40Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/local/feed/FeedFragment.kt", "diffHunk": "@@ -57,6 +49,12 @@ import org.schabi.newpipe.util.Localization\n import java.util.Calendar\n \n class FeedFragment : BaseListFragment<FeedState, Unit>() {\n+    private var _feedBinding: FragmentFeedBinding? = null\n+    private val feedBinding get() = _feedBinding!!", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d6831fd61c52c3bc1b8e0a99a1d44e9618c6acf"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI1MDUyOA==", "bodyText": "lateinit variables can't have null assigned to them, and the variable needs to be set to null to allow the binding to be garbage collected: https://developer.android.com/topic/libraries/view-binding#fragments.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4814#discussion_r547250528", "createdAt": "2020-12-22T12:29:18Z", "author": {"login": "Isira-Seneviratne"}, "path": "app/src/main/java/org/schabi/newpipe/local/feed/FeedFragment.kt", "diffHunk": "@@ -57,6 +49,12 @@ import org.schabi.newpipe.util.Localization\n import java.util.Calendar\n \n class FeedFragment : BaseListFragment<FeedState, Unit>() {\n+    private var _feedBinding: FragmentFeedBinding? = null\n+    private val feedBinding get() = _feedBinding!!", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM1Nzc2NQ=="}, "originalCommit": {"oid": "2d6831fd61c52c3bc1b8e0a99a1d44e9618c6acf"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI3NTUwMg==", "bodyText": "Ok, I see", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4814#discussion_r547275502", "createdAt": "2020-12-22T13:24:04Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/local/feed/FeedFragment.kt", "diffHunk": "@@ -57,6 +49,12 @@ import org.schabi.newpipe.util.Localization\n import java.util.Calendar\n \n class FeedFragment : BaseListFragment<FeedState, Unit>() {\n+    private var _feedBinding: FragmentFeedBinding? = null\n+    private val feedBinding get() = _feedBinding!!", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM1Nzc2NQ=="}, "originalCommit": {"oid": "2d6831fd61c52c3bc1b8e0a99a1d44e9618c6acf"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNDYyMzEzOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/local/feed/FeedFragment.kt", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxMDo0MDowNVrOIJDCow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMjozMDoyNVrOIJ5jPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM1NzkyMw==", "bodyText": "Why are you not using feedBinding.loadingProgressText. here and below?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4814#discussion_r546357923", "createdAt": "2020-12-20T10:40:05Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/local/feed/FeedFragment.kt", "diffHunk": "@@ -237,33 +243,34 @@ class FeedFragment : BaseListFragment<FeedState, Unit>() {\n             progressState.maxProgress == -1\n \n         if (!isIndeterminate) {\n-            loading_progress_text.text = \"${progressState.currentProgress}/${progressState.maxProgress}\"\n+            feedBinding.loadingProgressText.text = \"${progressState.currentProgress}/${progressState.maxProgress}\"\n         } else if (progressState.progressMessage > 0) {\n-            loading_progress_text?.setText(progressState.progressMessage)\n+            _feedBinding?.loadingProgressText?.setText(progressState.progressMessage)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d6831fd61c52c3bc1b8e0a99a1d44e9618c6acf"}, "originalPosition": 160}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI1MTAwNQ==", "bodyText": "I was getting a NullPointerException when using the non-null feedBinding property.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4814#discussion_r547251005", "createdAt": "2020-12-22T12:30:25Z", "author": {"login": "Isira-Seneviratne"}, "path": "app/src/main/java/org/schabi/newpipe/local/feed/FeedFragment.kt", "diffHunk": "@@ -237,33 +243,34 @@ class FeedFragment : BaseListFragment<FeedState, Unit>() {\n             progressState.maxProgress == -1\n \n         if (!isIndeterminate) {\n-            loading_progress_text.text = \"${progressState.currentProgress}/${progressState.maxProgress}\"\n+            feedBinding.loadingProgressText.text = \"${progressState.currentProgress}/${progressState.maxProgress}\"\n         } else if (progressState.progressMessage > 0) {\n-            loading_progress_text?.setText(progressState.progressMessage)\n+            _feedBinding?.loadingProgressText?.setText(progressState.progressMessage)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM1NzkyMw=="}, "originalCommit": {"oid": "2d6831fd61c52c3bc1b8e0a99a1d44e9618c6acf"}, "originalPosition": 160}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNDYyMzg5OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/local/subscription/SubscriptionFragment.kt", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxMDo0MTowOVrOIJDDDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxMDo0MTowOVrOIJDDDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM1ODAzMA==", "bodyText": "Also here and in other places", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4814#discussion_r546358030", "createdAt": "2020-12-20T10:41:09Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/local/subscription/SubscriptionFragment.kt", "diffHunk": "@@ -70,6 +70,9 @@ import kotlin.math.floor\n import kotlin.math.max\n \n class SubscriptionFragment : BaseStateFragment<SubscriptionState>() {\n+    private var _binding: FragmentSubscriptionBinding? = null\n+    private val binding get() = _binding!!", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d6831fd61c52c3bc1b8e0a99a1d44e9618c6acf"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2985, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}