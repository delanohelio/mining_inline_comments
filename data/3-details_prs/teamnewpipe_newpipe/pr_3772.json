{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNzE5MDU2", "number": 3772, "title": "Copy video title", "bodyText": "What is it?\n\n Bug fix (user facing)\n Feature (user facing)\n Code base improvement (dev facing)\n Meta improvement to the project (dev facing)\n\nDescription of the changes in your PR\n\n\nAllows user to long-press on the video title in the detail screen to copy it to the clipboard\nBrief \"Copied to clipboard\" toast appears\n\nFixes the following issue(s)\n\ncloses #3768\nTesting apk\n\napp-debug.apk.zip\nAgreement\n\n I carefully read the contribution guidelines and agree to them.", "createdAt": "2020-06-10T21:44:25Z", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772", "merged": true, "mergeCommit": {"oid": "9ef7688f9e9879c54a6f8dcd2bc01676fac1680c"}, "closed": true, "closedAt": "2020-06-13T14:38:15Z", "author": {"login": "adinilfeld"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqASfhAH2gAyNDMyNzE5MDU2OmUzNGY2NjZiNzBmNDlhODlmNWIzYjg5ZGZmODQ1MTMyMzNlNTE5ZGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcq4dvOAFqTQzMDE0MzU3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e34f666b70f49a89f5b3b89dff84513233e519de", "author": {"user": {"login": "adinilfeld", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/e34f666b70f49a89f5b3b89dff84513233e519de", "committedDate": "2020-06-10T21:11:06Z", "message": "set an OnLongClickListener"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5375396d27ec72baf448dc7733f2e5c32a2b38b", "author": {"user": {"login": "adinilfeld", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/b5375396d27ec72baf448dc7733f2e5c32a2b38b", "committedDate": "2020-06-10T21:17:43Z", "message": "allowed user to copy video title to clipboard (from detail screen)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NDUyMjA0", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#pullrequestreview-428452204", "createdAt": "2020-06-10T21:47:59Z", "commit": {"oid": "b5375396d27ec72baf448dc7733f2e5c32a2b38b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMTo0Nzo1OVrOGiHdrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMTo0Nzo1OVrOGiHdrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQyNzA1NQ==", "bodyText": "Move this call up and thus remove this otherwise pointless function. You probably also shouldn't depend on stuff in GigaGet (also because we want to remove GigaGet in the future). Not sure if we have any util like this in NewPipe, or even have a copy to clipboard feature anywhere in NewPipe.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#discussion_r438427055", "createdAt": "2020-06-10T21:47:59Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -1422,4 +1428,8 @@ private void updateProgressInfo(@NonNull final StreamInfo info) {\n                     animateView(detailPositionView, false, 500);\n                 });\n     }\n+\n+    private void copyTitleText() {\n+        Utility.copyToClipboard(getContext(), videoTitleTextView.getText().toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5375396d27ec72baf448dc7733f2e5c32a2b38b"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "267e114354ba2d1ee210cfa2d3526665b5470469", "author": {"user": {"login": "adinilfeld", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/267e114354ba2d1ee210cfa2d3526665b5470469", "committedDate": "2020-06-10T22:14:08Z", "message": "added a copyToClipboard method to ShareUtils, and modified CommentsMiniInfoItemHolder and VideoDetailFragment to use the new method."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4ODI4Mzcx", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#pullrequestreview-428828371", "createdAt": "2020-06-11T11:40:27Z", "commit": {"oid": "267e114354ba2d1ee210cfa2d3526665b5470469"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxMTo0MDoyN1rOGiZhew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxMTo0MjowOFrOGiZkhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODcyMjkzOQ==", "bodyText": "I don't think this line is needed, as setOnLongClickListener already makes the view long clickable: https://developer.android.com/reference/android/view/View#setOnLongClickListener(android.view.View.OnLongClickListener)", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#discussion_r438722939", "createdAt": "2020-06-11T11:40:27Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -583,6 +585,9 @@ protected void initViews(final View rootView, final Bundle savedInstanceState) {\n     protected void initListeners() {\n         super.initListeners();\n \n+        videoTitleRoot.setLongClickable(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "267e114354ba2d1ee210cfa2d3526665b5470469"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODcyMzcxNg==", "bodyText": "Even though this is unrelated from your changes, could you invert the two branches of the if, while also removing the ! ?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (!AndroidTvUtils.isTv(itemBuilder.getContext())) {\n          \n          \n            \n                            ClipboardManager clipboardManager = (ClipboardManager) itemBuilder.getContext()\n          \n          \n            \n                                    .getSystemService(Context.CLIPBOARD_SERVICE);\n          \n          \n            \n                            clipboardManager.setPrimaryClip(ClipData.newPlainText(null, commentText));\n          \n          \n            \n                            Toast.makeText(itemBuilder.getContext(), R.string.msg_copied, Toast.LENGTH_SHORT)\n          \n          \n            \n                                    .show();\n          \n          \n            \n                            ShareUtils.copyToClipboard(itemBuilder.getContext(), commentText);\n          \n          \n            \n                        } else {\n          \n          \n            \n                            openCommentAuthor(item);\n          \n          \n            \n                        }\n          \n          \n            \n                        if (AndroidTvUtils.isTv(itemBuilder.getContext())) {\n          \n          \n            \n                            openCommentAuthor(item);\n          \n          \n            \n                        } else {\n          \n          \n            \n                            ShareUtils.copyToClipboard(itemBuilder.getContext(), commentText);\n          \n          \n            \n                        }", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#discussion_r438723716", "createdAt": "2020-06-11T11:42:08Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/info_list/holder/CommentsMiniInfoItemHolder.java", "diffHunk": "@@ -130,11 +127,7 @@ public void updateFromItem(final InfoItem infoItem,\n \n         itemView.setOnLongClickListener(view -> {\n             if (!AndroidTvUtils.isTv(itemBuilder.getContext())) {\n-                ClipboardManager clipboardManager = (ClipboardManager) itemBuilder.getContext()\n-                        .getSystemService(Context.CLIPBOARD_SERVICE);\n-                clipboardManager.setPrimaryClip(ClipData.newPlainText(null, commentText));\n-                Toast.makeText(itemBuilder.getContext(), R.string.msg_copied, Toast.LENGTH_SHORT)\n-                        .show();\n+                ShareUtils.copyToClipboard(itemBuilder.getContext(), commentText);\n             } else {\n                 openCommentAuthor(item);\n             }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "267e114354ba2d1ee210cfa2d3526665b5470469"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4ODMxMDQ5", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#pullrequestreview-428831049", "createdAt": "2020-06-11T11:44:59Z", "commit": {"oid": "267e114354ba2d1ee210cfa2d3526665b5470469"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxMTo0NDo1OVrOGiZpUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxMTo0NDo1OVrOGiZpUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODcyNDk0NA==", "bodyText": "This variable could be final", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#discussion_r438724944", "createdAt": "2020-06-11T11:44:59Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/util/ShareUtils.java", "diffHunk": "@@ -78,4 +81,27 @@ public static void shareUrl(final Context context, final String subject, final S\n         context.startActivity(Intent.createChooser(\n                 intent, context.getString(R.string.share_dialog_title)));\n     }\n+\n+    /**\n+     * Copy the text to clipboard, and indicate to the user whether the operation was completed\n+     * successfully using a Toast.\n+     *\n+     * @param context the context to use\n+     * @param text    the text to copy\n+     */\n+    public static void copyToClipboard(final Context context, final String text) {\n+        ClipboardManager clipboardManager =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "267e114354ba2d1ee210cfa2d3526665b5470469"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d29e66092ed363266211455a78948508fc22e77", "author": {"user": {"login": "adinilfeld", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/0d29e66092ed363266211455a78948508fc22e77", "committedDate": "2020-06-11T16:33:05Z", "message": "removed unnecessary setLongClickable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59e0c10c4299742f99bee43a478aca36393a57f1", "author": {"user": {"login": "adinilfeld", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/59e0c10c4299742f99bee43a478aca36393a57f1", "committedDate": "2020-06-11T16:36:05Z", "message": "inverted if-else statement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17d1346a8a2fc31e0d35f991194c7097fe2b0c22", "author": {"user": {"login": "adinilfeld", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/17d1346a8a2fc31e0d35f991194c7097fe2b0c22", "committedDate": "2020-06-11T16:36:57Z", "message": "made ClipboardManager final"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MTI3MjI0", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#pullrequestreview-429127224", "createdAt": "2020-06-11T17:25:11Z", "commit": {"oid": "17d1346a8a2fc31e0d35f991194c7097fe2b0c22"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMTQwMTk0", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#pullrequestreview-430140194", "createdAt": "2020-06-13T13:39:53Z", "commit": {"oid": "17d1346a8a2fc31e0d35f991194c7097fe2b0c22"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMTQzNTc1", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3772#pullrequestreview-430143575", "createdAt": "2020-06-13T14:38:05Z", "commit": {"oid": "17d1346a8a2fc31e0d35f991194c7097fe2b0c22"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4169, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}