{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxODQwOTk4", "number": 3160, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMDoxNzo1OVrODkaLfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMDo1MTo0MFrODkz7Dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NTA0MjU0OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/settings/VideoAudioSettingsFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMDoxNzo1OVrOFwt0ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMDoxNzo1OVrOFwt0ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYyNjY2MA==", "bodyText": "Add a newline here:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    final ListPreference durations = (ListPreference) findPreference(getString(R.string.seek_duration_key));\n          \n          \n            \n            \n          \n          \n            \n                    final ListPreference durations = (ListPreference) findPreference(getString(R.string.seek_duration_key));", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3160#discussion_r386626660", "createdAt": "2020-03-02T20:17:59Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/settings/VideoAudioSettingsFragment.java", "diffHunk": "@@ -58,10 +46,59 @@ public void onCreate(@Nullable Bundle savedInstanceState) {\n                             .show();\n \n                 }\n+            } else if (s.equals(getString(R.string.use_inexact_seek_key))) {\n+                updateSeekOptions();\n             }\n         };\n     }\n \n+    /**\n+     * Update fast-forward/-rewind seek duration options according to language and inexact seek setting.\n+     * Exoplayer can't seek 5 seconds in audio when using inexact seek.\n+     */\n+    private void updateSeekOptions() {\n+        //initializing R.array.seek_duration_description to display the translation of seconds\n+        final Resources res = getResources();\n+        final String[] durationsValues = res.getStringArray(R.array.seek_duration_value);\n+        final List<String> displayedDurationValues = new LinkedList<>();\n+        final List<String> displayedDescriptionValues = new LinkedList<>();\n+        int currentDurationValue;\n+        final boolean inexactSeek = getPreferenceManager().getSharedPreferences()\n+            .getBoolean(res.getString(R.string.use_inexact_seek_key), false);\n+\n+        for (String durationsValue : durationsValues) {\n+            currentDurationValue =\n+                Integer.parseInt(durationsValue) / (int) DateUtils.SECOND_IN_MILLIS;\n+            if (inexactSeek && currentDurationValue % 10 == 5) {\n+                continue;\n+            }\n+            try {\n+                displayedDurationValues.add(durationsValue);\n+                displayedDescriptionValues.add(String.format(\n+                    res.getQuantityString(R.plurals.dynamic_seek_duration_description,\n+                        currentDurationValue),\n+                    currentDurationValue));\n+            } catch (Resources.NotFoundException ignored) {\n+                //if this happens, the translation is missing, and the english string will be displayed instead\n+            }\n+        }\n+        final ListPreference durations = (ListPreference) findPreference(getString(R.string.seek_duration_key));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a077c46958e3f550309b45bd0a257e763586071"}, "originalPosition": 81}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NTA1NTU1OnYy", "diffSide": "RIGHT", "path": "app/src/main/res/values/strings.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMDoyMjoxNVrOFwt8Sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMDoyOTozMVrOFwuKvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYyODY4Mg==", "bodyText": "Shouldn't this have a %s indicating where the \"X seconds\" string should be inserted? For English it is ok for this to be at the end, but for other languages this could be different.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3160#discussion_r386628682", "createdAt": "2020-03-02T20:22:15Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -593,6 +593,7 @@\n     <string name=\"app_language_title\">App language</string>\n     <string name=\"systems_language\">System default</string>\n     <string name=\"dynamic_seek_duration_description\">%s seconds</string>\n+    <string name=\"new_seek_duration_toast\">Due to ExoPlayer contraints the seek duration was set to</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a077c46958e3f550309b45bd0a257e763586071"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYzMjM4Mg==", "bodyText": "Good point, didn't think of other languages having a different arrangement", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3160#discussion_r386632382", "createdAt": "2020-03-02T20:29:31Z", "author": {"login": "XiangRongLin"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -593,6 +593,7 @@\n     <string name=\"app_language_title\">App language</string>\n     <string name=\"systems_language\">System default</string>\n     <string name=\"dynamic_seek_duration_description\">%s seconds</string>\n+    <string name=\"new_seek_duration_toast\">Due to ExoPlayer contraints the seek duration was set to</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYyODY4Mg=="}, "originalCommit": {"oid": "8a077c46958e3f550309b45bd0a257e763586071"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5OTA1NTU4OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/settings/VideoAudioSettingsFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxOTo0Nzo0NlrOFxUFrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxOTo0Nzo0NlrOFxUFrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI1MzY3OQ==", "bodyText": "Even though this is not relative to this PR, I think this line should be before the try-catch, since it can't throw an exception, and for a moment it led me to thinking that for missing translations the value would not be added.\nAlso note the added newline.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        try {\n          \n          \n            \n                            displayedDurationValues.add(durationsValue);\n          \n          \n            \n            \n          \n          \n            \n                        displayedDurationValues.add(durationsValue);\n          \n          \n            \n                        try {", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3160#discussion_r387253679", "createdAt": "2020-03-03T19:47:46Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/settings/VideoAudioSettingsFragment.java", "diffHunk": "@@ -58,10 +46,58 @@ public void onCreate(@Nullable Bundle savedInstanceState) {\n                             .show();\n \n                 }\n+            } else if (s.equals(getString(R.string.use_inexact_seek_key))) {\n+                updateSeekOptions();\n             }\n         };\n     }\n \n+    /**\n+     * Update fast-forward/-rewind seek duration options according to language and inexact seek setting.\n+     * Exoplayer can't seek 5 seconds in audio when using inexact seek.\n+     */\n+    private void updateSeekOptions() {\n+        //initializing R.array.seek_duration_description to display the translation of seconds\n+        final Resources res = getResources();\n+        final String[] durationsValues = res.getStringArray(R.array.seek_duration_value);\n+        final List<String> displayedDurationValues = new LinkedList<>();\n+        final List<String> displayedDescriptionValues = new LinkedList<>();\n+        int currentDurationValue;\n+        final boolean inexactSeek = getPreferenceManager().getSharedPreferences()\n+            .getBoolean(res.getString(R.string.use_inexact_seek_key), false);\n+\n+        for (String durationsValue : durationsValues) {\n+            currentDurationValue =\n+                Integer.parseInt(durationsValue) / (int) DateUtils.SECOND_IN_MILLIS;\n+            if (inexactSeek && currentDurationValue % 10 == 5) {\n+                continue;\n+            }\n+            try {\n+                displayedDurationValues.add(durationsValue);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efb67b0fd4e98fe5e99b6d323a4d8686bc6c06f7"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5OTI2MDMxOnYy", "diffSide": "RIGHT", "path": "app/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMDo1MTo0MFrOFxWD5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMDo1MTo0MFrOFxWD5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI4NTk4OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"new_seek_duration_toast\">Due to ExoPlayer contraints the seek duration was set to %d seconds</string>\n          \n          \n            \n                <string name=\"new_seek_duration_toast\">Due to ExoPlayer constraints the seek duration was set to %d seconds</string>", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3160#discussion_r387285988", "createdAt": "2020-03-03T20:51:40Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -593,6 +593,7 @@\n     <string name=\"app_language_title\">App language</string>\n     <string name=\"systems_language\">System default</string>\n     <string name=\"dynamic_seek_duration_description\">%s seconds</string>\n+    <string name=\"new_seek_duration_toast\">Due to ExoPlayer contraints the seek duration was set to %d seconds</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7ef7a18ac764f53c7b2a748af43a34a252abe90"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3308, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}