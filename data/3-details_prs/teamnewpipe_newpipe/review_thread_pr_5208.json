{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxOTQ3NDE3", "number": 5208, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNzowMTo0NVrOFGzw4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNzowMjowMlrOFGzxcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNjgzODczOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/ReCaptchaActivity.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNzowMTo0NVrOIH_a4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOTo1MDowN1rOIIGJgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI1MDAxNw==", "bodyText": "The method should be renamed.\nFor me a getter should only get a value and not modify it in between. If you only read the line above final String url = getUrlFromIntent(); and not the implementation itself, it could cause confusion down the line", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5208#discussion_r545250017", "createdAt": "2020-12-17T17:01:45Z", "author": {"login": "XiangRongLin"}, "path": "app/src/main/java/org/schabi/newpipe/ReCaptchaActivity.java", "diffHunk": "@@ -155,6 +150,16 @@ public boolean onOptionsItemSelected(final MenuItem item) {\n         }\n     }\n \n+    private String getUrlFromIntent() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb1eb3176de1d9504a4b4a7897f5b1a71fbb21d5"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI4MTg1MA==", "bodyText": "Ok, I will change the signature and add a test for it", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5208#discussion_r545281850", "createdAt": "2020-12-17T17:46:58Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/ReCaptchaActivity.java", "diffHunk": "@@ -155,6 +150,16 @@ public boolean onOptionsItemSelected(final MenuItem item) {\n         }\n     }\n \n+    private String getUrlFromIntent() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI1MDAxNw=="}, "originalCommit": {"oid": "fb1eb3176de1d9504a4b4a7897f5b1a71fbb21d5"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MDI1Nw==", "bodyText": "Something like resolveUrlFromIntent would be ok or any other verb that fits", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5208#discussion_r545360257", "createdAt": "2020-12-17T19:50:07Z", "author": {"login": "XiangRongLin"}, "path": "app/src/main/java/org/schabi/newpipe/ReCaptchaActivity.java", "diffHunk": "@@ -155,6 +150,16 @@ public boolean onOptionsItemSelected(final MenuItem item) {\n         }\n     }\n \n+    private String getUrlFromIntent() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI1MDAxNw=="}, "originalCommit": {"oid": "fb1eb3176de1d9504a4b4a7897f5b1a71fbb21d5"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNjg0MDE2OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/ReCaptchaActivity.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNzowMjowMlrOIH_btA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNzo0NjowNFrOIIBUSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI1MDIyOA==", "bodyText": "This looks like it would break urls like www.host.com/?pbj=1&otherparam=2 by turning it to www.host.com/otherparam=2", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5208#discussion_r545250228", "createdAt": "2020-12-17T17:02:02Z", "author": {"login": "XiangRongLin"}, "path": "app/src/main/java/org/schabi/newpipe/ReCaptchaActivity.java", "diffHunk": "@@ -155,6 +150,16 @@ public boolean onOptionsItemSelected(final MenuItem item) {\n         }\n     }\n \n+    private String getUrlFromIntent() {\n+        final String url = getIntent().getStringExtra(RECAPTCHA_URL_EXTRA);\n+        if (url == null || url.isEmpty()) {\n+            return YT_URL; // YouTube is the most likely service to have thrown a recaptcha\n+        } else {\n+            // remove \"pbj=1\" parameter from YouYube urls, as it makes the page JSON and not HTML\n+            return url.replace(\"&pbj=1\", \"\").replace(\"?pbj=1&\", \"\").replace(\"?pbj=1\", \"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb1eb3176de1d9504a4b4a7897f5b1a71fbb21d5"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI4MTA5Nw==", "bodyText": "Oh, I accidentally left an additional ? in there", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5208#discussion_r545281097", "createdAt": "2020-12-17T17:46:04Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/ReCaptchaActivity.java", "diffHunk": "@@ -155,6 +150,16 @@ public boolean onOptionsItemSelected(final MenuItem item) {\n         }\n     }\n \n+    private String getUrlFromIntent() {\n+        final String url = getIntent().getStringExtra(RECAPTCHA_URL_EXTRA);\n+        if (url == null || url.isEmpty()) {\n+            return YT_URL; // YouTube is the most likely service to have thrown a recaptcha\n+        } else {\n+            // remove \"pbj=1\" parameter from YouYube urls, as it makes the page JSON and not HTML\n+            return url.replace(\"&pbj=1\", \"\").replace(\"?pbj=1&\", \"\").replace(\"?pbj=1\", \"\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI1MDIyOA=="}, "originalCommit": {"oid": "fb1eb3176de1d9504a4b4a7897f5b1a71fbb21d5"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2931, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}