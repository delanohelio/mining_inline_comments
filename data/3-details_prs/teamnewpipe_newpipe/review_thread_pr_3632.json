{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxOTQ5NzIx", "number": 3632, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxNzoyMDoyOVrOEDLeIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxMzowNjo1OVrOEsYaYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNzY5MTIyOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/util/ThemeHelper.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxNzoyMDoyOVrOGgEvwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxOTowNDo1NFrOGgFL2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4NTM3Ng==", "bodyText": "The name of this method is irritating. What about\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private static boolean getDeviceTheme(final Context context) {\n          \n          \n            \n                private static boolean isDeviceNightModeEnabled(final Context context) {", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r436285376", "createdAt": "2020-06-06T17:20:29Z", "author": {"login": "TobiGr"}, "path": "app/src/main/java/org/schabi/newpipe/util/ThemeHelper.java", "diffHunk": "@@ -231,4 +269,28 @@ private static String getSelectedThemeString(final Context context) {\n         return PreferenceManager.getDefaultSharedPreferences(context)\n                 .getString(themeKey, defaultTheme);\n     }\n+\n+    /**\n+     * Get the device theme\n+     * <p>\n+     * It will return true if the device's theme is dark, false otherwise.\n+     * <p>\n+     * From https://developer.android.com/guide/topics/ui/look-and-feel/darktheme#java\n+     *\n+     * @param context the context to use\n+     * @return true: dark theme, false: light or unknown\n+     */\n+    private static boolean getDeviceTheme(final Context context) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "145b6b0bdde86e37ba860256d749cbb0d199b0a0"}, "originalPosition": 150}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI5MjU2OA==", "bodyText": "isDeviceDarkThemeEnabled", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r436292568", "createdAt": "2020-06-06T19:04:54Z", "author": {"login": "B0pol"}, "path": "app/src/main/java/org/schabi/newpipe/util/ThemeHelper.java", "diffHunk": "@@ -231,4 +269,28 @@ private static String getSelectedThemeString(final Context context) {\n         return PreferenceManager.getDefaultSharedPreferences(context)\n                 .getString(themeKey, defaultTheme);\n     }\n+\n+    /**\n+     * Get the device theme\n+     * <p>\n+     * It will return true if the device's theme is dark, false otherwise.\n+     * <p>\n+     * From https://developer.android.com/guide/topics/ui/look-and-feel/darktheme#java\n+     *\n+     * @param context the context to use\n+     * @return true: dark theme, false: light or unknown\n+     */\n+    private static boolean getDeviceTheme(final Context context) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4NTM3Ng=="}, "originalCommit": {"oid": "145b6b0bdde86e37ba860256d749cbb0d199b0a0"}, "originalPosition": 150}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNzY5MjkyOnYy", "diffSide": "RIGHT", "path": "app/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxNzoyMzowN1rOGgEwmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMjoxNDoxM1rOGnmW6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4NTU5NQ==", "bodyText": "To be honest, when testing the APK, I did not know what the two settings were supposed to change.\nWe need to make clear that the dark or black theme is used when the night mode is enabled, light theme otherwise. However, I have no idea how to put that in a few words.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r436285595", "createdAt": "2020-06-06T17:23:07Z", "author": {"login": "TobiGr"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -66,6 +66,8 @@\n     <string name=\"light_theme_title\">Light</string>\n     <string name=\"dark_theme_title\">Dark</string>\n     <string name=\"black_theme_title\">Black</string>\n+    <string name=\"device_dark_theme_title\">Device theme (Dark)</string>\n+    <string name=\"device_black_theme_title\">Device theme (Black)</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "145b6b0bdde86e37ba860256d749cbb0d199b0a0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI5MjY5NA==", "bodyText": "I don't know neither. I've only seen this way when there is dark black and light theme, but I agree it's not ideal", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r436292694", "createdAt": "2020-06-06T19:06:35Z", "author": {"login": "B0pol"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -66,6 +66,8 @@\n     <string name=\"light_theme_title\">Light</string>\n     <string name=\"dark_theme_title\">Dark</string>\n     <string name=\"black_theme_title\">Black</string>\n+    <string name=\"device_dark_theme_title\">Device theme (Dark)</string>\n+    <string name=\"device_black_theme_title\">Device theme (Black)</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4NTU5NQ=="}, "originalCommit": {"oid": "145b6b0bdde86e37ba860256d749cbb0d199b0a0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI5MzI2MQ==", "bodyText": "@Stypox @wb9688 @Poolitzer @opusforlife2 what do you think about that? ^", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r436293261", "createdAt": "2020-06-06T19:13:54Z", "author": {"login": "B0pol"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -66,6 +66,8 @@\n     <string name=\"light_theme_title\">Light</string>\n     <string name=\"dark_theme_title\">Dark</string>\n     <string name=\"black_theme_title\">Black</string>\n+    <string name=\"device_dark_theme_title\">Device theme (Dark)</string>\n+    <string name=\"device_black_theme_title\">Device theme (Black)</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4NTU5NQ=="}, "originalCommit": {"oid": "145b6b0bdde86e37ba860256d749cbb0d199b0a0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI5NjkwNQ==", "bodyText": "I've seen on various apps: Use/Follow system/device theme.\nSo you could go with: Follow system theme (dark/black).\nAlternatively, the \"follow system theme\" option could be a separate toggle which works only with Dark and Black radio buttons. FairEmail uses such a toggle.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r436296905", "createdAt": "2020-06-06T20:06:06Z", "author": {"login": "opusforlife2"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -66,6 +66,8 @@\n     <string name=\"light_theme_title\">Light</string>\n     <string name=\"dark_theme_title\">Dark</string>\n     <string name=\"black_theme_title\">Black</string>\n+    <string name=\"device_dark_theme_title\">Device theme (Dark)</string>\n+    <string name=\"device_black_theme_title\">Device theme (Black)</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4NTU5NQ=="}, "originalCommit": {"oid": "145b6b0bdde86e37ba860256d749cbb0d199b0a0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI5OTY1OA==", "bodyText": "I really like the idea of the separated toggle.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r436299658", "createdAt": "2020-06-06T20:50:44Z", "author": {"login": "B0pol"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -66,6 +66,8 @@\n     <string name=\"light_theme_title\">Light</string>\n     <string name=\"dark_theme_title\">Dark</string>\n     <string name=\"black_theme_title\">Black</string>\n+    <string name=\"device_dark_theme_title\">Device theme (Dark)</string>\n+    <string name=\"device_black_theme_title\">Device theme (Black)</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4NTU5NQ=="}, "originalCommit": {"oid": "145b6b0bdde86e37ba860256d749cbb0d199b0a0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMxMDE3MA==", "bodyText": "I like how GitHubs android app does it:", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r436310170", "createdAt": "2020-06-07T00:02:08Z", "author": {"login": "Poolitzer"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -66,6 +66,8 @@\n     <string name=\"light_theme_title\">Light</string>\n     <string name=\"dark_theme_title\">Dark</string>\n     <string name=\"black_theme_title\">Black</string>\n+    <string name=\"device_dark_theme_title\">Device theme (Dark)</string>\n+    <string name=\"device_black_theme_title\">Device theme (Black)</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4NTU5NQ=="}, "originalCommit": {"oid": "145b6b0bdde86e37ba860256d749cbb0d199b0a0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE3MDAxOQ==", "bodyText": "GitHub only has light and dark theme, there is no black theme", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r438170019", "createdAt": "2020-06-10T14:32:46Z", "author": {"login": "B0pol"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -66,6 +66,8 @@\n     <string name=\"light_theme_title\">Light</string>\n     <string name=\"dark_theme_title\">Dark</string>\n     <string name=\"black_theme_title\">Black</string>\n+    <string name=\"device_dark_theme_title\">Device theme (Dark)</string>\n+    <string name=\"device_black_theme_title\">Device theme (Black)</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4NTU5NQ=="}, "originalCommit": {"oid": "145b6b0bdde86e37ba860256d749cbb0d199b0a0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODI0ODY4MA==", "bodyText": "Follow system theme (dark/black)\n\nThis looks good to me", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r438248680", "createdAt": "2020-06-10T16:16:35Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -66,6 +66,8 @@\n     <string name=\"light_theme_title\">Light</string>\n     <string name=\"dark_theme_title\">Dark</string>\n     <string name=\"black_theme_title\">Black</string>\n+    <string name=\"device_dark_theme_title\">Device theme (Dark)</string>\n+    <string name=\"device_black_theme_title\">Device theme (Black)</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4NTU5NQ=="}, "originalCommit": {"oid": "145b6b0bdde86e37ba860256d749cbb0d199b0a0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE3NjEwNg==", "bodyText": "I also prefer \"Follow system theme (dark/black)\"", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r444176106", "createdAt": "2020-06-23T12:14:13Z", "author": {"login": "wb9688"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -66,6 +66,8 @@\n     <string name=\"light_theme_title\">Light</string>\n     <string name=\"dark_theme_title\">Dark</string>\n     <string name=\"black_theme_title\">Black</string>\n+    <string name=\"device_dark_theme_title\">Device theme (Dark)</string>\n+    <string name=\"device_black_theme_title\">Device theme (Black)</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4NTU5NQ=="}, "originalCommit": {"oid": "145b6b0bdde86e37ba860256d749cbb0d199b0a0"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNzY5ODAyOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/util/ThemeHelper.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxNzozMjo0M1rOGgEzNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxNzozMjo0M1rOGgEzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4NjI2Mw==", "bodyText": "Why are these two lines necessary?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r436286263", "createdAt": "2020-06-06T17:32:43Z", "author": {"login": "TobiGr"}, "path": "app/src/main/java/org/schabi/newpipe/util/ThemeHelper.java", "diffHunk": "@@ -139,6 +150,18 @@ public static int getThemeForService(final Context context, final int serviceId)\n             defaultTheme = R.style.BlackTheme;\n         } else if (selectedTheme.equals(darkTheme)) {\n             defaultTheme = R.style.DarkTheme;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "145b6b0bdde86e37ba860256d749cbb0d199b0a0"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MzQyMTk5OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/util/ThemeHelper.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQxMzozMjo0OFrOGp9c-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQxMzozMjo0OFrOGp9c-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY1MTY0Mg==", "bodyText": "final", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r446651642", "createdAt": "2020-06-28T13:32:48Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/util/ThemeHelper.java", "diffHunk": "@@ -231,4 +265,28 @@ private static String getSelectedThemeString(final Context context) {\n         return PreferenceManager.getDefaultSharedPreferences(context)\n                 .getString(themeKey, defaultTheme);\n     }\n+\n+    /**\n+     * Get the device theme\n+     * <p>\n+     * It will return true if the device's theme is dark, false otherwise.\n+     * <p>\n+     * From https://developer.android.com/guide/topics/ui/look-and-feel/darktheme#java\n+     *\n+     * @param context the context to use\n+     * @return true: dark theme, false: light or unknown\n+     */\n+    private static boolean isDeviceDarkThemeEnabled(final Context context) {\n+        int deviceTheme = context.getResources().getConfiguration().uiMode", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "755bc4c49da7db85227115b4c53a6c2b4e3430a5"}, "originalPosition": 152}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0OTcyNzE4OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/util/ThemeHelper.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxMzowNjoxOFrOHfnZcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxMzowNjoxOFrOHfnZcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjkxMzM5Mw==", "bodyText": "Invert this if", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r502913393", "createdAt": "2020-10-11T13:06:18Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/util/ThemeHelper.java", "diffHunk": "@@ -141,8 +150,19 @@ public static int getThemeForService(final Context context, final int serviceId)\n             defaultTheme = R.style.LightTheme;\n         } else if (selectedTheme.equals(blackTheme)) {\n             defaultTheme = R.style.BlackTheme;\n-        } else if (selectedTheme.equals(darkTheme)) {\n-            defaultTheme = R.style.DarkTheme;\n+        } else if (selectedTheme.equals(automaticDeviceTheme)) {\n+\n+            if (!isDeviceDarkThemeEnabled(context)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6cc619ea87d01f095540bb76d36a7cca5d13027"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0OTcyNzY4OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/util/ThemeHelper.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxMzowNzowMFrOHfnZtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxMzowNzowMFrOHfnZtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjkxMzQ2Mw==", "bodyText": "Also here", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3632#discussion_r502913463", "createdAt": "2020-10-11T13:07:00Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/util/ThemeHelper.java", "diffHunk": "@@ -191,6 +212,18 @@ public static int getSettingsThemeStyle(final Context context) {\n             return R.style.BlackSettingsTheme;\n         } else if (selectedTheme.equals(darkTheme)) {\n             return R.style.DarkSettingsTheme;\n+        } else if (selectedTheme.equals(automaticDeviceTheme)) {\n+            if (!isDeviceDarkThemeEnabled(context)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6cc619ea87d01f095540bb76d36a7cca5d13027"}, "originalPosition": 117}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3196, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}