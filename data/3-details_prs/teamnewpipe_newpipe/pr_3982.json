{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3Njc2MjM0", "number": 3982, "title": "Fix ACRA bug reports not containing stack trace", "bodyText": "What is it?\n\n Bug fix (user facing)\n Feature (user facing)\n Code base improvement (dev facing)\n Meta improvement to the project (dev facing)\n\nDescription of the changes in your PR\nThis PR fixes blank reports not containing the stack trace (as seen in #3930). This was caused by MultiDex.install not being called before ACRA initialization, so ACRA could not load some of its classes and failed to initialize the stack trace collector (among others). See ACRA/acra#619 and ACRA wiki.\nThis PR also contains two other improvements to ACRA's initialization code:\n\nSkip ACRA initialization if the current process ends with :acra (i.e. is created by ACRA): https://github.com/ACRA/acra/wiki/Troubleshooting-Guide#applicationoncreate\nRemove deprecated calls to set the ReportSender class in the configuration: setReportSenderFactoryClasses() is deprecated, now extensions (ReportSenderFactory is an extension) should be registered using @AutoService. This commit adds two compile-time dependencies and only fixes a deprecation, so it can be skipped if needed. See https://github.com/ACRA/acra/wiki/Custom-Extensions#by-annotation\n\nI think this should be merged as soon as possible, as otherwise it is not possible debug APKs by giving them to people, as there would be no stack trace in case of errors.\nIt took me ages to find the root cause of this \ud83d\ude29\nTesting apk\nThis apk crashes every time a video is opened, use that to check if ACRA correctly catches the unhandled exception.\napp-debug.zip\nAgreement\n\n I carefully read the contribution guidelines and agree to them.", "createdAt": "2020-07-28T09:15:51Z", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3982", "merged": true, "mergeCommit": {"oid": "f290b2bf5a59403cc4b5c6f690a9f143e5d48154"}, "closed": true, "closedAt": "2020-07-29T15:58:53Z", "author": {"login": "Stypox"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5Sby6gH2gAyNDU3Njc2MjM0OjFiOWY1OTg5ZWZmZjY1MWMzYTk5ZWFjZmFjYWIyMDE1Y2M3NWE1YTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5tA0JgFqTQ1NzY1NDI0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1b9f5989efff651c3a99eacfacab2015cc75a5a4", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/1b9f5989efff651c3a99eacfacab2015cc75a5a4", "committedDate": "2020-07-28T08:48:25Z", "message": "Fix empty stacktrace in bug report\n\nACRA has to be initialized after MultiDex\nhttps://github.com/ACRA/acra/issues/619\nhttps://github.com/ACRA/acra/wiki/Troubleshooting-Guide#legacy-multidex"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21d1f69d6d7697c1eae6b4b0d5f0a441ec857de7", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/21d1f69d6d7697c1eae6b4b0d5f0a441ec857de7", "committedDate": "2020-07-28T08:48:54Z", "message": "Do not init ACRA if inside its own process\n\nhttps://github.com/ACRA/acra/wiki/Troubleshooting-Guide#applicationoncreate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2NDYyMjcy", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3982#pullrequestreview-456462272", "createdAt": "2020-07-28T09:30:17Z", "commit": {"oid": "a955612d2ed2c99a0ed213c3a076b113d314065c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MjY0ODAy", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3982#pullrequestreview-457264802", "createdAt": "2020-07-29T07:33:17Z", "commit": {"oid": "a955612d2ed2c99a0ed213c3a076b113d314065c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNzozMzoxN1rOG4sK7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNzozMzoxN1rOG4sK7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA5NzEzNQ==", "bodyText": "Could you move this up to the other com.google dependencies? And could you put the version in ext instead? That's what we do if we depend on multiple parts of the same library that thus needs the same version. And why depend on a RC?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3982#discussion_r462097135", "createdAt": "2020-07-29T07:33:17Z", "author": {"login": "wb9688"}, "path": "app/build.gradle", "diffHunk": "@@ -201,6 +201,8 @@ dependencies {\n     implementation \"com.nononsenseapps:filepicker:4.2.1\"\n \n     implementation \"ch.acra:acra-core:5.5.0\"\n+    compileOnly \"com.google.auto.service:auto-service-annotations:1.0-rc7\"\n+    kapt \"com.google.auto.service:auto-service:1.0-rc7\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a955612d2ed2c99a0ed213c3a076b113d314065c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04e7d13043fc53473f0e8218ce2c7d0fc0cd6058", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/04e7d13043fc53473f0e8218ce2c7d0fc0cd6058", "committedDate": "2020-07-29T08:56:33Z", "message": "Remove deprecated calls to set Sender class to ACRA\n\nsetReportSenderFactoryClasses() is deprecated, now extensions (ReportSenderFactory is an extension) should be registered using AutoService: https://github.com/ACRA/acra/wiki/Custom-Extensions#by-annotation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a955612d2ed2c99a0ed213c3a076b113d314065c", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/a955612d2ed2c99a0ed213c3a076b113d314065c", "committedDate": "2020-07-28T09:02:01Z", "message": "Remove deprecated calls to set Sender class to ACRA\n\nsetReportSenderFactoryClasses() is deprecated, now extensions (ReportSenderFactory is an extension) should be registered using AutoService: https://github.com/ACRA/acra/wiki/Custom-Extensions#by-annotation"}, "afterCommit": {"oid": "04e7d13043fc53473f0e8218ce2c7d0fc0cd6058", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/04e7d13043fc53473f0e8218ce2c7d0fc0cd6058", "committedDate": "2020-07-29T08:56:33Z", "message": "Remove deprecated calls to set Sender class to ACRA\n\nsetReportSenderFactoryClasses() is deprecated, now extensions (ReportSenderFactory is an extension) should be registered using AutoService: https://github.com/ACRA/acra/wiki/Custom-Extensions#by-annotation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3NjU0MjQ2", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3982#pullrequestreview-457654246", "createdAt": "2020-07-29T15:46:24Z", "commit": {"oid": "04e7d13043fc53473f0e8218ce2c7d0fc0cd6058"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4103, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}