{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5MDk5OTUw", "number": 3371, "title": "Add ability to hide played items in a feed", "bodyText": "What is it?\n\n Bug fix\n Feature\n Code base improvement\n Meta improvement to the project\n\nDescription of the changes in your PR\n\nLet the user hide played items inside of a feed.\nUse components from the new Groupie list library for displaying the feed list.\n\nThis allows for easier development of lists, and will make it easier to seamlessly update the list in the future (e.g. without blocking the view of the user with the loading progress).\n\n\n\n\nFixes #3611\nTesting apk\nThe APK can be found by going to the \"Checks\" tab below the title and then on \"artifacts\" on the right.", "createdAt": "2020-04-05T14:16:23Z", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371", "merged": true, "mergeCommit": {"oid": "be676ad93cc94e8534fa5ce7cbedb218de4fa990"}, "closed": true, "closedAt": "2021-06-18T07:18:48Z", "author": {"login": "mauriciocolli"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcUrG0aAFqTM4NzgyNTc2Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABeh37arAFqTY4NzEwMTc4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3ODI1NzY3", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#pullrequestreview-387825767", "createdAt": "2020-04-05T14:37:56Z", "commit": {"oid": "aede87e3af260bc3a95b58ed7cad3c02464b4711"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxNDozNzo1NlrOGBAisA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxNDozNzo1NlrOGBAisA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzcxMDY0MA==", "bodyText": "Hmm\u2026 we don't have a linter for Kotlin. For Java we enforce a newline.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r403710640", "createdAt": "2020-04-05T14:37:56Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/database/stream/StreamWithState.kt", "diffHunk": "@@ -0,0 +1,17 @@\n+package org.schabi.newpipe.database.stream\n+\n+import androidx.room.ColumnInfo\n+import androidx.room.Embedded\n+import org.schabi.newpipe.database.stream.model.StreamEntity\n+import org.schabi.newpipe.database.stream.model.StreamStateEntity\n+\n+data class StreamWithState(\n+        @Embedded\n+        val stream: StreamEntity,\n+\n+        @ColumnInfo(name = StreamStateEntity.STREAM_PROGRESS_TIME)\n+        val stateProgressTime: Long?,\n+\n+        @ColumnInfo(name = \"is_stream_in_history\")\n+        val isInHistory: Boolean = false\n+)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aede87e3af260bc3a95b58ed7cad3c02464b4711"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aede87e3af260bc3a95b58ed7cad3c02464b4711", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/aede87e3af260bc3a95b58ed7cad3c02464b4711", "committedDate": "2020-04-05T14:11:03Z", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list."}, "afterCommit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/e79ca8a32c32388e8952d209787b3c87e96219bd", "committedDate": "2020-04-09T16:27:15Z", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNTUwOTUw", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#pullrequestreview-393550950", "createdAt": "2020-04-15T08:14:28Z", "commit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwODoxNDoyOFrOGFuspw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwODoyNzo0MFrOGFvLJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2MTE1OQ==", "bodyText": "\"Seen\" would be use up less space making the thumbnail more visible. Also, while \"in history\" could be interpreted as \"this was already encountered\", \"seen\" better conveys the meaning that \"the video was opened in the player before. At first I thought about \"watched\", but that means more \"this video was watched thoroughly\".\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"item_in_history\">In History</string>\n          \n          \n            \n                <string name=\"item_in_history\">Seen</string>", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r408661159", "createdAt": "2020-04-15T08:14:28Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -192,6 +192,7 @@\n     <string name=\"delete_search_history_alert\">Delete entire search history?</string>\n     <string name=\"search_history_deleted\">Search history deleted.</string>\n     <string name=\"help\">Help</string>\n+    <string name=\"item_in_history\">In History</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2MjAzOQ==", "bodyText": "Maybe this could be simplified to:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    val shouldUseGridLayout = shouldUseGridLayout()\n          \n          \n            \n                    groupAdapter.spanCount = if (shouldUseGridLayout) getGridSpanCount() else 1\n          \n          \n            \n                    groupAdapter.spanCount = if (shouldUseGridLayout()) getGridSpanCount() else 1", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r408662039", "createdAt": "2020-04-15T08:16:03Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/local/feed/FeedFragment.kt", "diffHunk": "@@ -69,8 +89,20 @@ class FeedFragment : BaseListFragment<FeedState, Unit>() {\n     override fun onViewCreated(rootView: View, savedInstanceState: Bundle?) {\n         super.onViewCreated(rootView, savedInstanceState)\n \n-        viewModel = ViewModelProviders.of(this, FeedViewModel.Factory(requireContext(), groupId)).get(FeedViewModel::class.java)\n+        viewModel = ViewModelProviders\n+                .of(this, FeedViewModel.Factory(requireContext(), groupId, showPlayedItems))\n+                .get(FeedViewModel::class.java)\n         viewModel.stateLiveData.observe(viewLifecycleOwner, Observer { it?.let(::handleResult) })\n+\n+        val shouldUseGridLayout = shouldUseGridLayout()\n+        groupAdapter.spanCount = if (shouldUseGridLayout) getGridSpanCount() else 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2NTc1NA==", "bodyText": "Maybe move these two function to the ThemeHelper utils class?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r408665754", "createdAt": "2020-04-15T08:22:15Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/local/feed/FeedFragment.kt", "diffHunk": "@@ -311,6 +410,33 @@ class FeedFragment : BaseListFragment<FeedState, Unit>() {\n         return true\n     }\n \n+    ///////////////////////////////////////////////////////////////////////////\n+    // Grid Mode\n+    ///////////////////////////////////////////////////////////////////////////\n+\n+    // TODO: Move these out of this class, as it can be reused", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd"}, "originalPosition": 248}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2ODk2NA==", "bodyText": "Just a question: why ia a FrameLayout being used here, thus encapsulating the below TextView?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r408668964", "createdAt": "2020-04-15T08:27:40Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/layout/list_stream_item.xml", "diffHunk": "@@ -23,6 +23,37 @@\n         android:src=\"@drawable/dummy_thumbnail\"\n         tools:ignore=\"RtlHardcoded\"/>\n \n+    <FrameLayout", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/e79ca8a32c32388e8952d209787b3c87e96219bd", "committedDate": "2020-04-09T16:27:15Z", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list."}, "afterCommit": {"oid": "e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7", "committedDate": "2020-06-27T13:09:27Z", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NzIzMTQ2", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#pullrequestreview-438723146", "createdAt": "2020-06-27T20:33:05Z", "commit": {"oid": "e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QyMDozMzowNVrOGp4Jxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QyMDozNDo1NFrOGp4KKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU2NDgwNg==", "bodyText": "I'd prefer the shadow to be more transparent, something like this:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    android:endColor=\"#B2000000\"\n          \n          \n            \n                    android:startColor=\"#E6000000\"/>\n          \n          \n            \n                    android:endColor=\"#6C000000\"\n          \n          \n            \n                    android:startColor=\"#A0000000\"/>\n          \n      \n    \n    \n  \n\nAlso, what about making the color different based on the theme? Imo the black shadow looks a little bit strange in the white theme, but maybe it's just an impression.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r446564806", "createdAt": "2020-06-27T20:33:05Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/drawable/item_in_history_indicator_background.xml", "diffHunk": "@@ -0,0 +1,7 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<shape xmlns:android=\"http://schemas.android.com/apk/res/android\">\n+    <gradient\n+        android:angle=\"-90\"\n+        android:endColor=\"#B2000000\"\n+        android:startColor=\"#E6000000\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU2NDkwNA==", "bodyText": "Is this a good idea? In theory the ellipsize should never be triggered, but even if it is I'd prefer marquee\n(also below)", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r446564904", "createdAt": "2020-06-27T20:34:54Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/layout/list_stream_grid_item.xml", "diffHunk": "@@ -21,6 +21,32 @@\n         android:src=\"@drawable/dummy_thumbnail\"\n         tools:ignore=\"RtlHardcoded\"/>\n \n+    <TextView\n+        android:id=\"@+id/itemInHistoryIndicatorView\"\n+        android:layout_width=\"wrap_content\"\n+        android:layout_height=\"wrap_content\"\n+        android:layout_alignStart=\"@id/itemThumbnailView\"\n+        android:layout_alignTop=\"@id/itemThumbnailView\"\n+        android:layout_alignEnd=\"@id/itemThumbnailView\"\n+        android:layout_alignBottom=\"@id/itemThumbnailView\"\n+        android:layout_gravity=\"top|left\"\n+        android:background=\"@drawable/item_in_history_indicator_background\"\n+        android:ellipsize=\"end\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7", "committedDate": "2020-06-27T13:09:27Z", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list."}, "afterCommit": {"oid": "9e4030928b443e5e42c81cfefa393aece9c7c77b", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/9e4030928b443e5e42c81cfefa393aece9c7c77b", "committedDate": "2021-03-17T15:05:44Z", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9e4030928b443e5e42c81cfefa393aece9c7c77b", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/9e4030928b443e5e42c81cfefa393aece9c7c77b", "committedDate": "2021-03-17T15:05:44Z", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list."}, "afterCommit": {"oid": "b8794f7967b9e67ed70f14c2e5f0ce4cf7e5ceb1", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/b8794f7967b9e67ed70f14c2e5f0ce4cf7e5ceb1", "committedDate": "2021-03-18T08:23:00Z", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b8794f7967b9e67ed70f14c2e5f0ce4cf7e5ceb1", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/b8794f7967b9e67ed70f14c2e5f0ce4cf7e5ceb1", "committedDate": "2021-03-18T08:23:00Z", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list."}, "afterCommit": {"oid": "f515686e996f6665613b9e25233bbe1f3882678c", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/f515686e996f6665613b9e25233bbe1f3882678c", "committedDate": "2021-03-26T10:35:54Z", "message": "Remove IN HISTORY label on stream info items"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f515686e996f6665613b9e25233bbe1f3882678c", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/f515686e996f6665613b9e25233bbe1f3882678c", "committedDate": "2021-03-26T10:35:54Z", "message": "Remove IN HISTORY label on stream info items"}, "afterCommit": {"oid": "cc9402dceb239fdd391ae1d626af1143e76b311e", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/cc9402dceb239fdd391ae1d626af1143e76b311e", "committedDate": "2021-06-07T06:27:46Z", "message": "Remove IN HISTORY label on stream info items"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b0a3559f79b569d448d8c1e64658bd58e2c231d0", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/b0a3559f79b569d448d8c1e64658bd58e2c231d0", "committedDate": "2021-06-07T07:43:08Z", "message": "Consider stream state valid also if >1/4 of video was watched"}, "afterCommit": {"oid": "06be78bd63743edb783414b3391ccade1148f1dd", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/06be78bd63743edb783414b3391ccade1148f1dd", "committedDate": "2021-06-07T07:48:00Z", "message": "Consider stream state valid also if >1/4 of video was watched"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "06be78bd63743edb783414b3391ccade1148f1dd", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/06be78bd63743edb783414b3391ccade1148f1dd", "committedDate": "2021-06-07T07:48:00Z", "message": "Consider stream state valid also if >1/4 of video was watched"}, "afterCommit": {"oid": "22a9cd31b29d8c3a8e2fe57b1b34f690e5a7ee9f", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/22a9cd31b29d8c3a8e2fe57b1b34f690e5a7ee9f", "committedDate": "2021-06-07T07:56:52Z", "message": "Consider stream state valid also if >1/4 of video was watched"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e846f69e38c6f66bdbbab05200ca56d39f4edb94", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/e846f69e38c6f66bdbbab05200ca56d39f4edb94", "committedDate": "2021-06-09T13:53:51Z", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "360f5ac6f79cf07955364a163f16cea06d1ce183", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/360f5ac6f79cf07955364a163f16cea06d1ce183", "committedDate": "2021-06-09T13:53:51Z", "message": "Save playback state even if stream is finished and add isFinished()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e58feadba9e38b54f871568f2fa7f3e3dd3eaca7", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/e58feadba9e38b54f871568f2fa7f3e3dd3eaca7", "committedDate": "2021-06-09T13:53:51Z", "message": "Remove IN HISTORY label on stream info items"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0113ad5e1490c483622dc7f4870ec2e18f9b8077", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/0113ad5e1490c483622dc7f4870ec2e18f9b8077", "committedDate": "2021-06-09T13:53:51Z", "message": "Correctly save stream progress at the end of a video"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "22a9cd31b29d8c3a8e2fe57b1b34f690e5a7ee9f", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/22a9cd31b29d8c3a8e2fe57b1b34f690e5a7ee9f", "committedDate": "2021-06-07T07:56:52Z", "message": "Consider stream state valid also if >1/4 of video was watched"}, "afterCommit": {"oid": "60e44f39cd51c5d3fa3c73aaedcf294571e2cccf", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/60e44f39cd51c5d3fa3c73aaedcf294571e2cccf", "committedDate": "2021-06-09T13:53:51Z", "message": "Consider stream state valid also if >1/4 of video was watched"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60b5de33e9a951a6ba5f8274a1dd111ecf8f4499", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/60b5de33e9a951a6ba5f8274a1dd111ecf8f4499", "committedDate": "2021-06-09T14:15:04Z", "message": "Fix long press menu in feed"}, "afterCommit": {"oid": "faa93ca4841b8e523499ace4e025ec44d768c811", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/faa93ca4841b8e523499ace4e025ec44d768c811", "committedDate": "2021-06-09T14:21:09Z", "message": "Fix long press menu in feed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjgxMjE0NjUy", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#pullrequestreview-681214652", "createdAt": "2021-06-10T20:12:59Z", "commit": {"oid": "faa93ca4841b8e523499ace4e025ec44d768c811"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0xMFQyMDoxMjo1OVrOJraEwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0xMFQyMDoyOTo1NVrOJrau2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0OTQ5NTc0NQ==", "bodyText": "That inline comments can be moved into the JDoc", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r649495745", "createdAt": "2021-06-10T20:12:59Z", "author": {"login": "TobiGr"}, "path": "app/src/main/java/org/schabi/newpipe/database/stream/model/StreamStateEntity.java", "diffHunk": "@@ -25,26 +23,28 @@\n     // This additional field is required for the SQL query because 'stream_id' is used\n     // for some other joins already\n     public static final String JOIN_STREAM_ID_ALIAS = \"stream_id_alias\";\n-    public static final String STREAM_PROGRESS_TIME = \"progress_time\";\n+    public static final String STREAM_PROGRESS_MILLIS = \"progress_time\";\n \n     /**\n      * Playback state will not be saved, if playback time is less than this threshold.\n      */\n-    private static final int PLAYBACK_SAVE_THRESHOLD_START_SECONDS = 5;\n+    private static final long PLAYBACK_SAVE_THRESHOLD_START_MILLISECONDS = 5000; // 5000ms = 5s\n+\n     /**\n-     * Playback state will not be saved, if time left is less than this threshold.\n+     * @see #isFinished(long)\n+     * @see org.schabi.newpipe.database.feed.dao.FeedDAO#getLiveOrNotPlayedStreams()\n      */\n-    private static final int PLAYBACK_SAVE_THRESHOLD_END_SECONDS = 10;\n+    public static final long PLAYBACK_FINISHED_END_MILLISECONDS = 60000; // 60000ms = 60s", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faa93ca4841b8e523499ace4e025ec44d768c811"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0OTUwNjUyMQ==", "bodyText": "Does this change require a Migration?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r649506521", "createdAt": "2021-06-10T20:29:55Z", "author": {"login": "TobiGr"}, "path": "app/src/main/java/org/schabi/newpipe/database/stream/model/StreamStateEntity.java", "diffHunk": "@@ -25,26 +23,28 @@\n     // This additional field is required for the SQL query because 'stream_id' is used\n     // for some other joins already\n     public static final String JOIN_STREAM_ID_ALIAS = \"stream_id_alias\";\n-    public static final String STREAM_PROGRESS_TIME = \"progress_time\";\n+    public static final String STREAM_PROGRESS_MILLIS = \"progress_time\";\n \n     /**\n      * Playback state will not be saved, if playback time is less than this threshold.\n      */\n-    private static final int PLAYBACK_SAVE_THRESHOLD_START_SECONDS = 5;\n+    private static final long PLAYBACK_SAVE_THRESHOLD_START_MILLISECONDS = 5000; // 5000ms = 5s\n+\n     /**\n-     * Playback state will not be saved, if time left is less than this threshold.\n+     * @see #isFinished(long)\n+     * @see org.schabi.newpipe.database.feed.dao.FeedDAO#getLiveOrNotPlayedStreams()\n      */\n-    private static final int PLAYBACK_SAVE_THRESHOLD_END_SECONDS = 10;\n+    public static final long PLAYBACK_FINISHED_END_MILLISECONDS = 60000; // 60000ms = 60s\n \n     @ColumnInfo(name = JOIN_STREAM_ID)\n     private long streamUid;\n \n-    @ColumnInfo(name = STREAM_PROGRESS_TIME)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faa93ca4841b8e523499ace4e025ec44d768c811"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2142f05a88f2848586debcf1501cb71dd4abc522", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/2142f05a88f2848586debcf1501cb71dd4abc522", "committedDate": "2021-06-14T17:01:01Z", "message": "Fix hiding finished streams in groups; new stream state validity condition\n\nConsider stream state valid also if >1/4 of video was watched"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4698d07323c2dc0e1c2b4cbbafafa4783548f07f", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/4698d07323c2dc0e1c2b4cbbafafa4783548f07f", "committedDate": "2021-06-14T17:02:57Z", "message": "Do not hide feed buttons (show/hide & help) behind three-dots menu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7145b117cccbf286de8006b4559e4fdd5dd1599b", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/7145b117cccbf286de8006b4559e4fdd5dd1599b", "committedDate": "2021-06-14T17:02:57Z", "message": "Fix long press menu in feed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdb6679d2d8eada1a28cb2ab5c6547b15e39538a", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/fdb6679d2d8eada1a28cb2ab5c6547b15e39538a", "committedDate": "2021-06-15T12:17:40Z", "message": "Make list stream item ConstraintLayouts and use chain"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32df4d39a4b37603d891936817dd6ea0d0df61c5", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/32df4d39a4b37603d891936817dd6ea0d0df61c5", "committedDate": "2021-06-15T16:40:25Z", "message": "Reshow feed if grid/list view mode changed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "faa93ca4841b8e523499ace4e025ec44d768c811", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/faa93ca4841b8e523499ace4e025ec44d768c811", "committedDate": "2021-06-09T14:21:09Z", "message": "Fix long press menu in feed"}, "afterCommit": {"oid": "32df4d39a4b37603d891936817dd6ea0d0df61c5", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/32df4d39a4b37603d891936817dd6ea0d0df61c5", "committedDate": "2021-06-15T16:40:25Z", "message": "Reshow feed if grid/list view mode changed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njg3MTAxNzg0", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#pullrequestreview-687101784", "createdAt": "2021-06-18T07:17:34Z", "commit": {"oid": "32df4d39a4b37603d891936817dd6ea0d0df61c5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4137, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}