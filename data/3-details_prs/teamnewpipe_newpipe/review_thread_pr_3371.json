{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5MDk5OTUw", "number": 3371, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxNDozNzo1NlrODu4heg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0xMFQyMDoyOTo1NVrOGJHEBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNDg3MTYyOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/database/stream/StreamWithState.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxNDozNzo1NlrOGBAisA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxNDozNzo1NlrOGBAisA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzcxMDY0MA==", "bodyText": "Hmm\u2026 we don't have a linter for Kotlin. For Java we enforce a newline.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r403710640", "createdAt": "2020-04-05T14:37:56Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/database/stream/StreamWithState.kt", "diffHunk": "@@ -0,0 +1,17 @@\n+package org.schabi.newpipe.database.stream\n+\n+import androidx.room.ColumnInfo\n+import androidx.room.Embedded\n+import org.schabi.newpipe.database.stream.model.StreamEntity\n+import org.schabi.newpipe.database.stream.model.StreamStateEntity\n+\n+data class StreamWithState(\n+        @Embedded\n+        val stream: StreamEntity,\n+\n+        @ColumnInfo(name = StreamStateEntity.STREAM_PROGRESS_TIME)\n+        val stateProgressTime: Long?,\n+\n+        @ColumnInfo(name = \"is_stream_in_history\")\n+        val isInHistory: Boolean = false\n+)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aede87e3af260bc3a95b58ed7cad3c02464b4711"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNzE2NzYwOnYy", "diffSide": "RIGHT", "path": "app/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwODoxNDoyOFrOGFuspw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QxNzoxNTo1NlrOGp3Dqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2MTE1OQ==", "bodyText": "\"Seen\" would be use up less space making the thumbnail more visible. Also, while \"in history\" could be interpreted as \"this was already encountered\", \"seen\" better conveys the meaning that \"the video was opened in the player before. At first I thought about \"watched\", but that means more \"this video was watched thoroughly\".\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"item_in_history\">In History</string>\n          \n          \n            \n                <string name=\"item_in_history\">Seen</string>", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r408661159", "createdAt": "2020-04-15T08:14:28Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -192,6 +192,7 @@\n     <string name=\"delete_search_history_alert\">Delete entire search history?</string>\n     <string name=\"search_history_deleted\">Search history deleted.</string>\n     <string name=\"help\">Help</string>\n+    <string name=\"item_in_history\">In History</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyNzA4Ng==", "bodyText": "\"Seen\" looks strange to me, maybe because I never seen an app that uses this term for that. I still think \"In History\" better represents what actually is being checked.\n@TobiGr @wb9688: What do you think?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r446527086", "createdAt": "2020-06-27T13:31:09Z", "author": {"login": "mauriciocolli"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -192,6 +192,7 @@\n     <string name=\"delete_search_history_alert\">Delete entire search history?</string>\n     <string name=\"search_history_deleted\">Search history deleted.</string>\n     <string name=\"help\">Help</string>\n+    <string name=\"item_in_history\">In History</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2MTE1OQ=="}, "originalCommit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU0Njg1OA==", "bodyText": "I agree that \"Seen\" is weird, and I prefer e.g. \"In History\".", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r446546858", "createdAt": "2020-06-27T17:15:56Z", "author": {"login": "wb9688"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -192,6 +192,7 @@\n     <string name=\"delete_search_history_alert\">Delete entire search history?</string>\n     <string name=\"search_history_deleted\">Search history deleted.</string>\n     <string name=\"help\">Help</string>\n+    <string name=\"item_in_history\">In History</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2MTE1OQ=="}, "originalCommit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNzE3MjgzOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/local/feed/FeedFragment.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwODoxNjowM1rOGFuwFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwODoxNjowM1rOGFuwFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2MjAzOQ==", "bodyText": "Maybe this could be simplified to:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    val shouldUseGridLayout = shouldUseGridLayout()\n          \n          \n            \n                    groupAdapter.spanCount = if (shouldUseGridLayout) getGridSpanCount() else 1\n          \n          \n            \n                    groupAdapter.spanCount = if (shouldUseGridLayout()) getGridSpanCount() else 1", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r408662039", "createdAt": "2020-04-15T08:16:03Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/local/feed/FeedFragment.kt", "diffHunk": "@@ -69,8 +89,20 @@ class FeedFragment : BaseListFragment<FeedState, Unit>() {\n     override fun onViewCreated(rootView: View, savedInstanceState: Bundle?) {\n         super.onViewCreated(rootView, savedInstanceState)\n \n-        viewModel = ViewModelProviders.of(this, FeedViewModel.Factory(requireContext(), groupId)).get(FeedViewModel::class.java)\n+        viewModel = ViewModelProviders\n+                .of(this, FeedViewModel.Factory(requireContext(), groupId, showPlayedItems))\n+                .get(FeedViewModel::class.java)\n         viewModel.stateLiveData.observe(viewLifecycleOwner, Observer { it?.let(::handleResult) })\n+\n+        val shouldUseGridLayout = shouldUseGridLayout()\n+        groupAdapter.spanCount = if (shouldUseGridLayout) getGridSpanCount() else 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd"}, "originalPosition": 84}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNzE5NTg3OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/local/feed/FeedFragment.kt", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwODoyMjoxNVrOGFu-mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QxMzoxMToxMlrOGp1v6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2NTc1NA==", "bodyText": "Maybe move these two function to the ThemeHelper utils class?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r408665754", "createdAt": "2020-04-15T08:22:15Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/local/feed/FeedFragment.kt", "diffHunk": "@@ -311,6 +410,33 @@ class FeedFragment : BaseListFragment<FeedState, Unit>() {\n         return true\n     }\n \n+    ///////////////////////////////////////////////////////////////////////////\n+    // Grid Mode\n+    ///////////////////////////////////////////////////////////////////////////\n+\n+    // TODO: Move these out of this class, as it can be reused", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd"}, "originalPosition": 248}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyNTQxOQ==", "bodyText": "I'll leave it for another pull request.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r446525419", "createdAt": "2020-06-27T13:11:12Z", "author": {"login": "mauriciocolli"}, "path": "app/src/main/java/org/schabi/newpipe/local/feed/FeedFragment.kt", "diffHunk": "@@ -311,6 +410,33 @@ class FeedFragment : BaseListFragment<FeedState, Unit>() {\n         return true\n     }\n \n+    ///////////////////////////////////////////////////////////////////////////\n+    // Grid Mode\n+    ///////////////////////////////////////////////////////////////////////////\n+\n+    // TODO: Move these out of this class, as it can be reused", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2NTc1NA=="}, "originalCommit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd"}, "originalPosition": 248}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNzIxNTU4OnYy", "diffSide": "RIGHT", "path": "app/src/main/res/layout/list_stream_item.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwODoyNzo0MFrOGFvLJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QxMzoxMTo0MFrOGp1wDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2ODk2NA==", "bodyText": "Just a question: why ia a FrameLayout being used here, thus encapsulating the below TextView?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r408668964", "createdAt": "2020-04-15T08:27:40Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/layout/list_stream_item.xml", "diffHunk": "@@ -23,6 +23,37 @@\n         android:src=\"@drawable/dummy_thumbnail\"\n         tools:ignore=\"RtlHardcoded\"/>\n \n+    <FrameLayout", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyNTQ1Mg==", "bodyText": "I think I was testing something back then. Removed it.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r446525452", "createdAt": "2020-06-27T13:11:40Z", "author": {"login": "mauriciocolli"}, "path": "app/src/main/res/layout/list_stream_item.xml", "diffHunk": "@@ -23,6 +23,37 @@\n         android:src=\"@drawable/dummy_thumbnail\"\n         tools:ignore=\"RtlHardcoded\"/>\n \n+    <FrameLayout", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2ODk2NA=="}, "originalCommit": {"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MjcwNzUxOnYy", "diffSide": "RIGHT", "path": "app/src/main/res/drawable/item_in_history_indicator_background.xml", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QyMDozMzowNVrOGp4Jxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwOToxMzozN1rOGp7zZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU2NDgwNg==", "bodyText": "I'd prefer the shadow to be more transparent, something like this:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    android:endColor=\"#B2000000\"\n          \n          \n            \n                    android:startColor=\"#E6000000\"/>\n          \n          \n            \n                    android:endColor=\"#6C000000\"\n          \n          \n            \n                    android:startColor=\"#A0000000\"/>\n          \n      \n    \n    \n  \n\nAlso, what about making the color different based on the theme? Imo the black shadow looks a little bit strange in the white theme, but maybe it's just an impression.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r446564806", "createdAt": "2020-06-27T20:33:05Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/drawable/item_in_history_indicator_background.xml", "diffHunk": "@@ -0,0 +1,7 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<shape xmlns:android=\"http://schemas.android.com/apk/res/android\">\n+    <gradient\n+        android:angle=\"-90\"\n+        android:endColor=\"#B2000000\"\n+        android:startColor=\"#E6000000\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU3NjI5Ng==", "bodyText": "I'd prefer the shadow to be more transparent\n\nIMO, that much more transparency makes it hard to read when the thumbnail doesn't use darker colors.\nBut I do like to see the thumbnail a little better...\nWhat about making the gradient a little lighter towards the end, what do you say on a 90% \u2192 40% gradient instead of the current 90% \u2192 70%?\n\nAlso, what about making the color different based on the theme?\n\nB&W or some other color?\n\nImo the black shadow looks a little bit strange in the white theme, but maybe it's just an impression.\n\nTo me it isn't much different/stranger than any other dark thumbnail.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r446576296", "createdAt": "2020-06-27T22:57:09Z", "author": {"login": "mauriciocolli"}, "path": "app/src/main/res/drawable/item_in_history_indicator_background.xml", "diffHunk": "@@ -0,0 +1,7 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<shape xmlns:android=\"http://schemas.android.com/apk/res/android\">\n+    <gradient\n+        android:angle=\"-90\"\n+        android:endColor=\"#B2000000\"\n+        android:startColor=\"#E6000000\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU2NDgwNg=="}, "originalCommit": {"oid": "e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjYyNDYxMw==", "bodyText": "B&W or some other color?\n\nI was thinking about B&W, but then you are right, there is actually no need for this.\nSo, let's use a 90% \u2192 40% black shadow, it seems the best option.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r446624613", "createdAt": "2020-06-28T09:13:37Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/drawable/item_in_history_indicator_background.xml", "diffHunk": "@@ -0,0 +1,7 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<shape xmlns:android=\"http://schemas.android.com/apk/res/android\">\n+    <gradient\n+        android:angle=\"-90\"\n+        android:endColor=\"#B2000000\"\n+        android:startColor=\"#E6000000\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU2NDgwNg=="}, "originalCommit": {"oid": "e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MjcwODMzOnYy", "diffSide": "RIGHT", "path": "app/src/main/res/layout/list_stream_grid_item.xml", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QyMDozNDo1NFrOGp4KKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwOToxNzoxMVrOGp702Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU2NDkwNA==", "bodyText": "Is this a good idea? In theory the ellipsize should never be triggered, but even if it is I'd prefer marquee\n(also below)", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r446564904", "createdAt": "2020-06-27T20:34:54Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/layout/list_stream_grid_item.xml", "diffHunk": "@@ -21,6 +21,32 @@\n         android:src=\"@drawable/dummy_thumbnail\"\n         tools:ignore=\"RtlHardcoded\"/>\n \n+    <TextView\n+        android:id=\"@+id/itemInHistoryIndicatorView\"\n+        android:layout_width=\"wrap_content\"\n+        android:layout_height=\"wrap_content\"\n+        android:layout_alignStart=\"@id/itemThumbnailView\"\n+        android:layout_alignTop=\"@id/itemThumbnailView\"\n+        android:layout_alignEnd=\"@id/itemThumbnailView\"\n+        android:layout_alignBottom=\"@id/itemThumbnailView\"\n+        android:layout_gravity=\"top|left\"\n+        android:background=\"@drawable/item_in_history_indicator_background\"\n+        android:ellipsize=\"end\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU3NjM2MQ==", "bodyText": "I think if it was just one view or even a list that you can select an element it'd be fine with the marquee, but with this much items, I don't think so. What about the users that use the bigger fonts and have a bunch of items that are already played, wouldn't that be too distracting?\nI think that's why the marquee effect is designed to only start when the item is actually selected (otherwise you have to call setSelected(true) manually).\nMaybe an auto-sizing text view would work better here, even though we won't be able adapt all sizes, most of them will be fine with that. It'd also work better on the mini version of the stream item.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r446576361", "createdAt": "2020-06-27T22:57:57Z", "author": {"login": "mauriciocolli"}, "path": "app/src/main/res/layout/list_stream_grid_item.xml", "diffHunk": "@@ -21,6 +21,32 @@\n         android:src=\"@drawable/dummy_thumbnail\"\n         tools:ignore=\"RtlHardcoded\"/>\n \n+    <TextView\n+        android:id=\"@+id/itemInHistoryIndicatorView\"\n+        android:layout_width=\"wrap_content\"\n+        android:layout_height=\"wrap_content\"\n+        android:layout_alignStart=\"@id/itemThumbnailView\"\n+        android:layout_alignTop=\"@id/itemThumbnailView\"\n+        android:layout_alignEnd=\"@id/itemThumbnailView\"\n+        android:layout_alignBottom=\"@id/itemThumbnailView\"\n+        android:layout_gravity=\"top|left\"\n+        android:background=\"@drawable/item_in_history_indicator_background\"\n+        android:ellipsize=\"end\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU2NDkwNA=="}, "originalCommit": {"oid": "e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjYyNDk4NQ==", "bodyText": "What about using marquee, but never calling setSelected(true) on it, so that the IN HISTORY text fades at the end instead of showing three points? Anyway, if this would look too strange, I'm ok with not changing anything, since \"in theory the ellipsize should never be triggered\"", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r446624985", "createdAt": "2020-06-28T09:17:11Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/layout/list_stream_grid_item.xml", "diffHunk": "@@ -21,6 +21,32 @@\n         android:src=\"@drawable/dummy_thumbnail\"\n         tools:ignore=\"RtlHardcoded\"/>\n \n+    <TextView\n+        android:id=\"@+id/itemInHistoryIndicatorView\"\n+        android:layout_width=\"wrap_content\"\n+        android:layout_height=\"wrap_content\"\n+        android:layout_alignStart=\"@id/itemThumbnailView\"\n+        android:layout_alignTop=\"@id/itemThumbnailView\"\n+        android:layout_alignEnd=\"@id/itemThumbnailView\"\n+        android:layout_alignBottom=\"@id/itemThumbnailView\"\n+        android:layout_gravity=\"top|left\"\n+        android:background=\"@drawable/item_in_history_indicator_background\"\n+        android:ellipsize=\"end\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU2NDkwNA=="}, "originalCommit": {"oid": "e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkNDEyMTk5MTI0OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/database/stream/model/StreamStateEntity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0xMFQyMDoxMjo1OVrOJraEwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0xMFQyMDoxMjo1OVrOJraEwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0OTQ5NTc0NQ==", "bodyText": "That inline comments can be moved into the JDoc", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r649495745", "createdAt": "2021-06-10T20:12:59Z", "author": {"login": "TobiGr"}, "path": "app/src/main/java/org/schabi/newpipe/database/stream/model/StreamStateEntity.java", "diffHunk": "@@ -25,26 +23,28 @@\n     // This additional field is required for the SQL query because 'stream_id' is used\n     // for some other joins already\n     public static final String JOIN_STREAM_ID_ALIAS = \"stream_id_alias\";\n-    public static final String STREAM_PROGRESS_TIME = \"progress_time\";\n+    public static final String STREAM_PROGRESS_MILLIS = \"progress_time\";\n \n     /**\n      * Playback state will not be saved, if playback time is less than this threshold.\n      */\n-    private static final int PLAYBACK_SAVE_THRESHOLD_START_SECONDS = 5;\n+    private static final long PLAYBACK_SAVE_THRESHOLD_START_MILLISECONDS = 5000; // 5000ms = 5s\n+\n     /**\n-     * Playback state will not be saved, if time left is less than this threshold.\n+     * @see #isFinished(long)\n+     * @see org.schabi.newpipe.database.feed.dao.FeedDAO#getLiveOrNotPlayedStreams()\n      */\n-    private static final int PLAYBACK_SAVE_THRESHOLD_END_SECONDS = 10;\n+    public static final long PLAYBACK_FINISHED_END_MILLISECONDS = 60000; // 60000ms = 60s", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faa93ca4841b8e523499ace4e025ec44d768c811"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkNDEyMjA2MDg2OnYy", "diffSide": "LEFT", "path": "app/src/main/java/org/schabi/newpipe/database/stream/model/StreamStateEntity.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0xMFQyMDoyOTo1NVrOJrau2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0xMVQxMTo0Mzo0NlrOJrzdYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0OTUwNjUyMQ==", "bodyText": "Does this change require a Migration?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r649506521", "createdAt": "2021-06-10T20:29:55Z", "author": {"login": "TobiGr"}, "path": "app/src/main/java/org/schabi/newpipe/database/stream/model/StreamStateEntity.java", "diffHunk": "@@ -25,26 +23,28 @@\n     // This additional field is required for the SQL query because 'stream_id' is used\n     // for some other joins already\n     public static final String JOIN_STREAM_ID_ALIAS = \"stream_id_alias\";\n-    public static final String STREAM_PROGRESS_TIME = \"progress_time\";\n+    public static final String STREAM_PROGRESS_MILLIS = \"progress_time\";\n \n     /**\n      * Playback state will not be saved, if playback time is less than this threshold.\n      */\n-    private static final int PLAYBACK_SAVE_THRESHOLD_START_SECONDS = 5;\n+    private static final long PLAYBACK_SAVE_THRESHOLD_START_MILLISECONDS = 5000; // 5000ms = 5s\n+\n     /**\n-     * Playback state will not be saved, if time left is less than this threshold.\n+     * @see #isFinished(long)\n+     * @see org.schabi.newpipe.database.feed.dao.FeedDAO#getLiveOrNotPlayedStreams()\n      */\n-    private static final int PLAYBACK_SAVE_THRESHOLD_END_SECONDS = 10;\n+    public static final long PLAYBACK_FINISHED_END_MILLISECONDS = 60000; // 60000ms = 60s\n \n     @ColumnInfo(name = JOIN_STREAM_ID)\n     private long streamUid;\n \n-    @ColumnInfo(name = STREAM_PROGRESS_TIME)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faa93ca4841b8e523499ace4e025ec44d768c811"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0OTkxMTY0OA==", "bodyText": "No, I just changed the name of the variable, not its content", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r649911648", "createdAt": "2021-06-11T11:43:46Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/database/stream/model/StreamStateEntity.java", "diffHunk": "@@ -25,26 +23,28 @@\n     // This additional field is required for the SQL query because 'stream_id' is used\n     // for some other joins already\n     public static final String JOIN_STREAM_ID_ALIAS = \"stream_id_alias\";\n-    public static final String STREAM_PROGRESS_TIME = \"progress_time\";\n+    public static final String STREAM_PROGRESS_MILLIS = \"progress_time\";\n \n     /**\n      * Playback state will not be saved, if playback time is less than this threshold.\n      */\n-    private static final int PLAYBACK_SAVE_THRESHOLD_START_SECONDS = 5;\n+    private static final long PLAYBACK_SAVE_THRESHOLD_START_MILLISECONDS = 5000; // 5000ms = 5s\n+\n     /**\n-     * Playback state will not be saved, if time left is less than this threshold.\n+     * @see #isFinished(long)\n+     * @see org.schabi.newpipe.database.feed.dao.FeedDAO#getLiveOrNotPlayedStreams()\n      */\n-    private static final int PLAYBACK_SAVE_THRESHOLD_END_SECONDS = 10;\n+    public static final long PLAYBACK_FINISHED_END_MILLISECONDS = 60000; // 60000ms = 60s\n \n     @ColumnInfo(name = JOIN_STREAM_ID)\n     private long streamUid;\n \n-    @ColumnInfo(name = STREAM_PROGRESS_TIME)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0OTUwNjUyMQ=="}, "originalCommit": {"oid": "faa93ca4841b8e523499ace4e025ec44d768c811"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3129, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}