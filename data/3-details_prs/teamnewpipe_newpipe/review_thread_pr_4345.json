{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0NDQ2MTky", "number": 4345, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNTozOTo1MVrOEoYI2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNTo0ODoyNlrOEoYPxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNzczOTc5OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/local/dialog/PlaylistAppendDialog.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNTozOTo1MVrOHZbq7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNTozOTo1MVrOHZbq7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQyOTgwNA==", "bodyText": "Maybe use different names here, like onPlaylistFound", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4345#discussion_r496429804", "createdAt": "2020-09-29T05:39:51Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/local/dialog/PlaylistAppendDialog.java", "diffHunk": "@@ -38,6 +40,27 @@\n \n     private CompositeDisposable playlistDisposables = new CompositeDisposable();\n \n+    public static Disposable checkPlaylists(\n+            final Context context, final Invoker onSuccess, final Invoker onFailed", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a7a83cb9a66924cf0829f706007b5552bff3c89"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNzc0NjAwOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/local/dialog/PlaylistAppendDialog.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNTo0Mjo0NVrOHZbuZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNTo0Mjo0NVrOHZbuZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQzMDY5NQ==", "bodyText": "You can just use a Runnable instead", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4345#discussion_r496430695", "createdAt": "2020-09-29T05:42:45Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/local/dialog/PlaylistAppendDialog.java", "diffHunk": "@@ -38,6 +40,27 @@\n \n     private CompositeDisposable playlistDisposables = new CompositeDisposable();\n \n+    public static Disposable checkPlaylists(\n+            final Context context, final Invoker onSuccess, final Invoker onFailed\n+    ) {\n+        final LocalPlaylistManager playlistManager =\n+                new LocalPlaylistManager(NewPipeDatabase.getInstance(context));\n+\n+        return playlistManager.hasPlaylists()\n+                .observeOn(AndroidSchedulers.mainThread())\n+                .subscribe(hasPlaylists -> {\n+                    if (hasPlaylists) {\n+                        onSuccess.invoke();\n+                    } else {\n+                        onFailed.invoke();\n+                    }\n+                });\n+    }\n+\n+    public interface Invoker {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a7a83cb9a66924cf0829f706007b5552bff3c89"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNzc1MTI2OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/local/playlist/LocalPlaylistManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNTo0NToyMVrOHZbxbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxMTowOTozOVrOHZoBww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQzMTQ2OA==", "bodyText": "Should't this return a Single? Is it impossible for the database getCount to return a Single? I might be wrong", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4345#discussion_r496431468", "createdAt": "2020-09-29T05:45:21Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/local/playlist/LocalPlaylistManager.java", "diffHunk": "@@ -126,4 +126,10 @@ public String getPlaylistThumbnail(final long playlistId) {\n                 }).subscribeOn(Schedulers.io());\n     }\n \n+    public Maybe<Boolean> hasPlaylists() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a7a83cb9a66924cf0829f706007b5552bff3c89"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjYzMjI1OQ==", "bodyText": "I've tried Single (.single(0L) on Flowable) but the subscribe-block won't be called (I logged it).", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4345#discussion_r496632259", "createdAt": "2020-09-29T11:09:39Z", "author": {"login": "vkay94"}, "path": "app/src/main/java/org/schabi/newpipe/local/playlist/LocalPlaylistManager.java", "diffHunk": "@@ -126,4 +126,10 @@ public String getPlaylistThumbnail(final long playlistId) {\n                 }).subscribeOn(Schedulers.io());\n     }\n \n+    public Maybe<Boolean> hasPlaylists() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQzMTQ2OA=="}, "originalCommit": {"oid": "6a7a83cb9a66924cf0829f706007b5552bff3c89"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNzc1NzUwOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/schabi/newpipe/util/StreamDialogEntry.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNTo0ODoyNlrOHZb08Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxMTo0Njo0NlrOHZpOgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQzMjM2OQ==", "bodyText": "Maybe extract this code to a function so that it can be reused above", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4345#discussion_r496432369", "createdAt": "2020-09-29T05:48:26Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/util/StreamDialogEntry.java", "diffHunk": "@@ -40,8 +41,14 @@\n \n     append_playlist(R.string.append_playlist, (fragment, item) -> {\n         if (fragment.getFragmentManager() != null) {\n-            PlaylistAppendDialog.fromStreamInfoItems(Collections.singletonList(item))\n-                    .show(fragment.getFragmentManager(), \"StreamDialogEntry@append_playlist\");\n+            final PlaylistAppendDialog d = PlaylistAppendDialog\n+                    .fromStreamInfoItems(Collections.singletonList(item));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a7a83cb9a66924cf0829f706007b5552bff3c89"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjYzODQ4Mw==", "bodyText": "I'm not sure what you mean by \"extract\" in this context. Probably a wrapper for the check- and show-logic? Something like one signature:\nstatic Disposable safeShow(context, fm, tag, <input>)\nwhere input is either StreamInfo or List<StreamInfoItem> or List<PlayQueueItem> (by overriding).", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4345#discussion_r496638483", "createdAt": "2020-09-29T11:21:19Z", "author": {"login": "vkay94"}, "path": "app/src/main/java/org/schabi/newpipe/util/StreamDialogEntry.java", "diffHunk": "@@ -40,8 +41,14 @@\n \n     append_playlist(R.string.append_playlist, (fragment, item) -> {\n         if (fragment.getFragmentManager() != null) {\n-            PlaylistAppendDialog.fromStreamInfoItems(Collections.singletonList(item))\n-                    .show(fragment.getFragmentManager(), \"StreamDialogEntry@append_playlist\");\n+            final PlaylistAppendDialog d = PlaylistAppendDialog\n+                    .fromStreamInfoItems(Collections.singletonList(item));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQzMjM2OQ=="}, "originalCommit": {"oid": "6a7a83cb9a66924cf0829f706007b5552bff3c89"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjY1MTkwNA==", "bodyText": "Oh, sorry, since the two blocks of code actually do different things you can ignore this suggestion", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4345#discussion_r496651904", "createdAt": "2020-09-29T11:46:46Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/util/StreamDialogEntry.java", "diffHunk": "@@ -40,8 +41,14 @@\n \n     append_playlist(R.string.append_playlist, (fragment, item) -> {\n         if (fragment.getFragmentManager() != null) {\n-            PlaylistAppendDialog.fromStreamInfoItems(Collections.singletonList(item))\n-                    .show(fragment.getFragmentManager(), \"StreamDialogEntry@append_playlist\");\n+            final PlaylistAppendDialog d = PlaylistAppendDialog\n+                    .fromStreamInfoItems(Collections.singletonList(item));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQzMjM2OQ=="}, "originalCommit": {"oid": "6a7a83cb9a66924cf0829f706007b5552bff3c89"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3090, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}