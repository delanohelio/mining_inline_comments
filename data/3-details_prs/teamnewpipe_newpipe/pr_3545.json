{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MjczNTM1", "number": 3545, "title": " Fix Kodi button showing up with unsupported services", "bodyText": "What is it?\n\n Bug fix (user facing)\n Feature (user facing)\n Code base improvement (dev facing)\n Meta improvement to the project (dev facing)\n\nDescription of the changes in your PR\nThis PR disables the share to Kodi button when the current service is not supported (see the Kore  AndroidManifest.xml). Supported services are Youtube and Soundcloud. From that manifest I could also deduce that replacing https with http is not needed anymore.\nFixes the following issue(s)\n\nfixes #1166\ncloses #1930\n\nTesting apk\nI tested if the urls correctly matched Kore's manifest, by installing the app (even without connecting it to anything) and sharing urls. Before this fix sharing MediaCCC urls would have generated an error (thus leading to a \"Missing Kore app, install it?\" dialog), so this method of testing is good.\napp-debug.zip\nAgreement\n\n I carefully read the contribution guidelines and agree to them.", "createdAt": "2020-05-06T18:54:18Z", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3545", "merged": true, "mergeCommit": {"oid": "b990f30a09b85ed2ec2df2ceb3784d72cd680f81"}, "closed": true, "closedAt": "2020-05-07T19:44:10Z", "author": {"login": "Stypox"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcetXkggBqjMzMDk4NTUwMDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfCon7gFqTQwNzc4MDM1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ec61ec8d3898e63be4833f18fe433ed9c0a519f2", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/ec61ec8d3898e63be4833f18fe433ed9c0a519f2", "committedDate": "2020-05-06T18:40:44Z", "message": "Fix Kodi button showing up in unsupported services"}, "afterCommit": {"oid": "6d604d347c9e8e26f601324f462425bf7d6a9aed", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/6d604d347c9e8e26f601324f462425bf7d6a9aed", "committedDate": "2020-05-06T18:55:04Z", "message": "Fix Kodi button showing up in unsupported services"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ca6cfd6374159b50ccc4716bf8d3ba15891014d", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/9ca6cfd6374159b50ccc4716bf8d3ba15891014d", "committedDate": "2020-05-06T18:55:53Z", "message": "Fix Kodi button showing up in unsupported services"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d604d347c9e8e26f601324f462425bf7d6a9aed", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/6d604d347c9e8e26f601324f462425bf7d6a9aed", "committedDate": "2020-05-06T18:55:04Z", "message": "Fix Kodi button showing up in unsupported services"}, "afterCommit": {"oid": "9ca6cfd6374159b50ccc4716bf8d3ba15891014d", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/9ca6cfd6374159b50ccc4716bf8d3ba15891014d", "committedDate": "2020-05-06T18:55:53Z", "message": "Fix Kodi button showing up in unsupported services"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2OTUzMDg1", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3545#pullrequestreview-406953085", "createdAt": "2020-05-06T20:14:59Z", "commit": {"oid": "9ca6cfd6374159b50ccc4716bf8d3ba15891014d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NTk4MzMz", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3545#pullrequestreview-407598333", "createdAt": "2020-05-07T15:40:10Z", "commit": {"oid": "a5a814164c6b0ad4780f67e22afce8affaa12283"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNTo0MDoxMVrOGSEmbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNTo0MDo1MlrOGSEoYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYwMjkyNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                NavigationHelper.playWithKore(activity, Uri.parse(currentInfo.getUrl()));\n          \n          \n            \n                                NavigationHelper.playWithKore(activity, Uri.parse(url));", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3545#discussion_r421602926", "createdAt": "2020-05-07T15:40:11Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -665,8 +666,7 @@ public boolean onOptionsItemSelected(final MenuItem item) {\n                 return true;\n             case R.id.action_play_with_kodi:\n                 try {\n-                    NavigationHelper.playWithKore(activity, Uri.parse(\n-                            url.replace(\"https\", \"http\")));\n+                    NavigationHelper.playWithKore(activity, Uri.parse(currentInfo.getUrl()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5a814164c6b0ad4780f67e22afce8affaa12283"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYwMzQyNg==", "bodyText": "final", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3545#discussion_r421603426", "createdAt": "2020-05-07T15:40:52Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/player/MainVideoPlayer.java", "diffHunk": "@@ -712,6 +709,13 @@ public void onShuffleClicked() {\n         protected void onMetadataChanged(@NonNull final MediaSourceTag tag) {\n             super.onMetadataChanged(tag);\n \n+            // show kodi button if it supports the current service and it is enabled in settings\n+            boolean showKodiButton =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5a814164c6b0ad4780f67e22afce8affaa12283"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c711322d416d0c6ccda53873f82d2379fd99771", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/5c711322d416d0c6ccda53873f82d2379fd99771", "committedDate": "2020-05-07T19:11:34Z", "message": "In player hide kodi button if service unsupported"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a5a814164c6b0ad4780f67e22afce8affaa12283", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/a5a814164c6b0ad4780f67e22afce8affaa12283", "committedDate": "2020-05-07T07:12:12Z", "message": "Hide kodi button if service unsupported in player"}, "afterCommit": {"oid": "5c711322d416d0c6ccda53873f82d2379fd99771", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/5c711322d416d0c6ccda53873f82d2379fd99771", "committedDate": "2020-05-07T19:11:34Z", "message": "In player hide kodi button if service unsupported"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NzcyNTE2", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3545#pullrequestreview-407772516", "createdAt": "2020-05-07T19:29:50Z", "commit": {"oid": "5c711322d416d0c6ccda53873f82d2379fd99771"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NzgwMzU5", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3545#pullrequestreview-407780359", "createdAt": "2020-05-07T19:41:55Z", "commit": {"oid": "5c711322d416d0c6ccda53873f82d2379fd99771"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4161, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}