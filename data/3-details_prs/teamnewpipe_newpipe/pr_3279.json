{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0NTI0NzM1", "number": 3279, "title": "Handle content not available exception more comprehensively", "bodyText": "What is it?\n\n Bug fix\n Feature\n\nLong description of the changes in your PR\nSome fragments were not handling these types of exceptions.\nWe should improve the display of ContentNotAvailableException exceptions in the future by showing more specific details, like not found.\nFor now, a \"Content unavailable\" is better than a crash.\nRelates to the following issue(s)\n\n#3277", "createdAt": "2020-03-27T03:05:59Z", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3279", "merged": true, "mergeCommit": {"oid": "7c72f17fada8fe3512d287e405b161f53c1e783d"}, "closed": true, "closedAt": "2020-03-28T18:10:44Z", "author": {"login": "mauriciocolli"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSC-1vAFqTM4MzMwMjE1NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSJWsRgFqTM4MzMzNTkyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzAyMTU0", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3279#pullrequestreview-383302154", "createdAt": "2020-03-28T10:39:44Z", "commit": {"oid": "3fbc85fb09adc24084f7cefc202c73d7da23b542"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxMDo0MDo1N1rOF9Ii4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxMDo0MDo1N1rOF9Ii4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY0NzQ1OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    int errorId = exception instanceof YoutubeStreamExtractor.DecryptException\n          \n          \n            \n                            ? R.string.youtube_signature_decryption_error\n          \n          \n            \n                            : exception instanceof ParsingException\n          \n          \n            \n                            ? R.string.parsing_error\n          \n          \n            \n                            : R.string.general_error;\n          \n          \n            \n                    onUnrecoverableError(exception,\n          \n          \n            \n                            UserAction.REQUESTED_STREAM,\n          \n          \n            \n                            NewPipe.getNameOfService(serviceId),\n          \n          \n            \n                            url,\n          \n          \n            \n                            errorId);\n          \n          \n            \n                    int errorId = exception instanceof YoutubeStreamExtractor.DecryptException\n          \n          \n            \n                            ? R.string.youtube_signature_decryption_error\n          \n          \n            \n                            : exception instanceof ParsingException\n          \n          \n            \n                            ? R.string.parsing_error\n          \n          \n            \n                            : R.string.general_error;\n          \n          \n            \n            \n          \n          \n            \n                    onUnrecoverableError(exception,\n          \n          \n            \n                            UserAction.REQUESTED_STREAM,\n          \n          \n            \n                            NewPipe.getNameOfService(serviceId),\n          \n          \n            \n                            url,\n          \n          \n            \n                            errorId);", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3279#discussion_r399647458", "createdAt": "2020-03-28T10:40:57Z", "author": {"login": "TobiGr"}, "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -1220,20 +1219,16 @@ public void openDownloadDialog() {\n     protected boolean onError(Throwable exception) {\n         if (super.onError(exception)) return true;\n \n-        else if (exception instanceof ContentNotAvailableException) {\n-            showError(getString(R.string.content_not_available), false);\n-        } else {\n-            int errorId = exception instanceof YoutubeStreamExtractor.DecryptException\n-                    ? R.string.youtube_signature_decryption_error\n-                    : exception instanceof ParsingException\n-                    ? R.string.parsing_error\n-                    : R.string.general_error;\n-            onUnrecoverableError(exception,\n-                    UserAction.REQUESTED_STREAM,\n-                    NewPipe.getNameOfService(serviceId),\n-                    url,\n-                    errorId);\n-        }\n+        int errorId = exception instanceof YoutubeStreamExtractor.DecryptException\n+                ? R.string.youtube_signature_decryption_error\n+                : exception instanceof ParsingException\n+                ? R.string.parsing_error\n+                : R.string.general_error;\n+        onUnrecoverableError(exception,\n+                UserAction.REQUESTED_STREAM,\n+                NewPipe.getNameOfService(serviceId),\n+                url,\n+                errorId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3fbc85fb09adc24084f7cefc202c73d7da23b542"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4cabe23e3f6cadf0e2cee6887319b3959c8ea28", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/b4cabe23e3f6cadf0e2cee6887319b3959c8ea28", "committedDate": "2020-03-28T17:54:52Z", "message": "Handle content not available exception more comprehensively"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3fbc85fb09adc24084f7cefc202c73d7da23b542", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/3fbc85fb09adc24084f7cefc202c73d7da23b542", "committedDate": "2020-03-27T02:58:01Z", "message": "Handle content not available exception more comprehensively"}, "afterCommit": {"oid": "b4cabe23e3f6cadf0e2cee6887319b3959c8ea28", "author": {"user": {"login": "mauriciocolli", "name": "Mauricio Colli"}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/b4cabe23e3f6cadf0e2cee6887319b3959c8ea28", "committedDate": "2020-03-28T17:54:52Z", "message": "Handle content not available exception more comprehensively"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzM1OTI0", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3279#pullrequestreview-383335924", "createdAt": "2020-03-28T18:10:39Z", "commit": {"oid": "b4cabe23e3f6cadf0e2cee6887319b3959c8ea28"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4176, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}