{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5ODY1MDIz", "number": 4652, "title": "Convert notification actions to a custom preference", "bodyText": "What is it?\n\n Codebase improvement (dev facing)\n\nDescription of the changes in your PR\n\n\nConvert NotificationSettingsFragment into a custom Preference\n\nextract scale switch out of this\n\n\nCreate \"standard\" preference with scale switch and custom preference above\n\nFixes the following issue(s)\n\n\ncloses  #4646\n\nAPK testing\napp-debug.zip (updated with Stypox suggestions)\nSite notes\n\nPreference.onDetached() seems to equivalent to Fragment.onPause() for the purpose of saving the preference and recreating the notification.\nFrom the doc on the 4 constructors of Preference, only modifying the one that i did should be enogh (I think).\n\nDue diligence\n\n I read the contribution guidelines.", "createdAt": "2020-10-26T08:29:19Z", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4652", "merged": true, "mergeCommit": {"oid": "008eb5ba4a3d578726dbeaf89f56630863955cf8"}, "closed": true, "closedAt": "2020-10-31T10:58:35Z", "author": {"login": "XiangRongLin"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWQFmZAH2gAyNTA5ODY1MDIzOmY4YjBmYzVmZmNlNjhiYmUyMGI3M2RiNWMyYjJiZGM4YWQwYTU1NTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdX4xnLAFqTUyMTEyODcyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f8b0fc5ffce68bbe20b73db5c2b2bdc8ad0a5554", "author": {"user": {"login": "XiangRongLin", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/f8b0fc5ffce68bbe20b73db5c2b2bdc8ad0a5554", "committedDate": "2020-10-26T08:28:10Z", "message": "Convert notification actions to a custom preference"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MDY0NTEy", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4652#pullrequestreview-517064512", "createdAt": "2020-10-26T18:29:16Z", "commit": {"oid": "f8b0fc5ffce68bbe20b73db5c2b2bdc8ad0a5554"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxODozMDo1NlrOHodDZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxODo0MDozNVrOHodbdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE4MTA5Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    <org.schabi.newpipe.settings.custom.NotificationActionsPreference></org.schabi.newpipe.settings.custom.NotificationActionsPreference>\n          \n          \n            \n                    <org.schabi.newpipe.settings.custom.NotificationActionsPreference />", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4652#discussion_r512181092", "createdAt": "2020-10-26T18:30:56Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/xml/notification_settings.xml", "diffHunk": "@@ -0,0 +1,21 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<PreferenceScreen xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+        android:title=\"@string/settings_category_notification_title\">\n+\n+    <PreferenceCategory>\n+        <SwitchPreferenceCompat\n+                android:defaultValue=\"false\"\n+                android:key=\"@string/scale_to_square_image_in_notifications_key\"\n+                android:summary=\"@string/notification_scale_to_square_image_summary\"\n+                android:title=\"@string/notification_scale_to_square_image_title\"\n+                app:iconSpaceReserved=\"false\" />\n+\n+    </PreferenceCategory>\n+\n+    <PreferenceCategory>\n+        <org.schabi.newpipe.settings.custom.NotificationActionsPreference></org.schabi.newpipe.settings.custom.NotificationActionsPreference>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8b0fc5ffce68bbe20b73db5c2b2bdc8ad0a5554"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE4MjgzMg==", "bodyText": "Why change package?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4652#discussion_r512182832", "createdAt": "2020-10-26T18:33:46Z", "author": {"login": "Stypox"}, "path": "app/src/main/java/org/schabi/newpipe/settings/custom/NotificationActionsPreference.java", "diffHunk": "@@ -1,10 +1,10 @@\n-package org.schabi.newpipe.settings;\n+package org.schabi.newpipe.settings.custom;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8b0fc5ffce68bbe20b73db5c2b2bdc8ad0a5554"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE4NDg1OA==", "bodyText": "I think you should remove the ScrollView above here, since it is already integrated in the PreferenceFragment and it creates strange issues with scroll bars. Also be sure to use wrap_content on the root layout's height, otherwise the view can be scrolled more than needed.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4652#discussion_r512184858", "createdAt": "2020-10-26T18:36:56Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/layout/settings_notification.xml", "diffHunk": "@@ -8,71 +8,11 @@\n         android:layout_width=\"match_parent\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8b0fc5ffce68bbe20b73db5c2b2bdc8ad0a5554"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE4NzI1NA==", "bodyText": "Maybe remove PreferenceCategories or put everything in a single one: now there is some strange spacing above and below the normal preference, so try to play around with this until the layout looks good", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4652#discussion_r512187254", "createdAt": "2020-10-26T18:40:35Z", "author": {"login": "Stypox"}, "path": "app/src/main/res/xml/notification_settings.xml", "diffHunk": "@@ -0,0 +1,21 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<PreferenceScreen xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+        android:title=\"@string/settings_category_notification_title\">\n+\n+    <PreferenceCategory>\n+        <SwitchPreferenceCompat\n+                android:defaultValue=\"false\"\n+                android:key=\"@string/scale_to_square_image_in_notifications_key\"\n+                android:summary=\"@string/notification_scale_to_square_image_summary\"\n+                android:title=\"@string/notification_scale_to_square_image_title\"\n+                app:iconSpaceReserved=\"false\" />\n+\n+    </PreferenceCategory>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8b0fc5ffce68bbe20b73db5c2b2bdc8ad0a5554"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "764d08872f87b4cee1075ef7513a76121efa14b1", "author": {"user": {"login": "XiangRongLin", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/764d08872f87b4cee1075ef7513a76121efa14b1", "committedDate": "2020-10-27T07:28:16Z", "message": "Apply Stypox's suggestions\n\nsquash me"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMDYyODE0", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4652#pullrequestreview-521062814", "createdAt": "2020-10-30T22:09:37Z", "commit": {"oid": "764d08872f87b4cee1075ef7513a76121efa14b1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTI4NzIz", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4652#pullrequestreview-521128723", "createdAt": "2020-10-31T10:26:22Z", "commit": {"oid": "764d08872f87b4cee1075ef7513a76121efa14b1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4071, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}