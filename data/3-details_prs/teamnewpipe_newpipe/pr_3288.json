{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1MDkwODA3", "number": 3288, "title": "Save and restore playback parameters into/from preferences", "bodyText": "What is it?\n\n Feature\n\nLong description of the changes in your PR\n\nPlayback parameters are speed, pitch and skip silence\nSave playback parameters into shared preferences whenever they are set\nRetrieve playback parameters from shared preferences when starting any player\nRemove playback parameters from being passed from one player to another through intents. Instead they can be retrieved from the shared preferences.\n\nFixes the following issue(s)\n\nsolves #735\n\nTesting apk\napp-debug.zip\nAgreement\n\n I carefully read the contribution guidelines and agree to them.\n\nNote\nI noticed that changing the playback parameters while the video is paused gets ignored. At first I thought i broke something, until I noticed that it was like this before too.", "createdAt": "2020-03-28T12:40:45Z", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3288", "merged": true, "mergeCommit": {"oid": "65cd9751d87044ffaa96a27eed945098cefcf546"}, "closed": true, "closedAt": "2020-04-08T19:38:54Z", "author": {"login": "XiangRongLin"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSLH4agFqTM4MzM0NTgwOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVoArTAFqTM4OTk3OTc5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzQ1ODA5", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3288#pullrequestreview-383345809", "createdAt": "2020-03-28T20:14:17Z", "commit": {"oid": "494fa7d45ebffe5e7ff71a3897e4da51259d2839"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "494fa7d45ebffe5e7ff71a3897e4da51259d2839", "author": {"user": {"login": "XiangRongLin", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/494fa7d45ebffe5e7ff71a3897e4da51259d2839", "committedDate": "2020-03-28T12:30:38Z", "message": "Save and restore playback parameters into/from preferences\n\nPlayback parameters are speed, pitch and skip silence.\nRemove parameters being passed on as intent to the player, since the parameters can be restored from the preferences instead."}, "afterCommit": {"oid": "8f514bb1cb403cfbf06a2f935d78a2b618a56123", "author": {"user": {"login": "XiangRongLin", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/8f514bb1cb403cfbf06a2f935d78a2b618a56123", "committedDate": "2020-03-29T08:17:22Z", "message": "Save and restore playback parameters into/from preferences\n\nPlayback parameters are speed, pitch and skip silence.\nRemove parameters being passed on as intent to the player, since the parameters can be restored from the preferences instead."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8f514bb1cb403cfbf06a2f935d78a2b618a56123", "author": {"user": {"login": "XiangRongLin", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/8f514bb1cb403cfbf06a2f935d78a2b618a56123", "committedDate": "2020-03-29T08:17:22Z", "message": "Save and restore playback parameters into/from preferences\n\nPlayback parameters are speed, pitch and skip silence.\nRemove parameters being passed on as intent to the player, since the parameters can be restored from the preferences instead."}, "afterCommit": {"oid": "6bfa6be22d2663d41ede7e404fbe5d5f6f3e38cf", "author": {"user": {"login": "XiangRongLin", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/6bfa6be22d2663d41ede7e404fbe5d5f6f3e38cf", "committedDate": "2020-03-29T08:25:38Z", "message": "Save and restore playback parameters into/from preferences\n\nPlayback parameters are speed, pitch and skip silence.\nRemove parameters being passed on as intent to the player, since the parameters can be restored from the preferences instead."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzg2NTUw", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3288#pullrequestreview-383386550", "createdAt": "2020-03-29T08:35:03Z", "commit": {"oid": "6bfa6be22d2663d41ede7e404fbe5d5f6f3e38cf"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQwODozNTowM1rOF9Pu5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQwODozNToxOVrOF9PvAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc2NTIyMQ==", "bodyText": "Could be final.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3288#discussion_r399765221", "createdAt": "2020-03-29T08:35:03Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/player/BasePlayer.java", "diffHunk": "@@ -272,11 +266,12 @@ public void handleIntent(Intent intent) {\n             return;\n         }\n \n+        PlaybackParameters savedParameters = retrievePlaybackParametersFromPreferences();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6bfa6be22d2663d41ede7e404fbe5d5f6f3e38cf"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc2NTI1MQ==", "bodyText": "Could also all be final.", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3288#discussion_r399765251", "createdAt": "2020-03-29T08:35:19Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/player/BasePlayer.java", "diffHunk": "@@ -312,6 +307,19 @@ public void handleIntent(Intent intent) {\n                 /*playOnInit=*/!intent.getBooleanExtra(START_PAUSED, false), isMuted);\n     }\n \n+    private PlaybackParameters retrievePlaybackParametersFromPreferences() {\n+        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);\n+\n+        float speed = preferences\n+            .getFloat(context.getString(R.string.playback_speed_key), getPlaybackSpeed());\n+        float pitch = preferences.getFloat(context.getString(R.string.playback_pitch_key),\n+            getPlaybackPitch());\n+        boolean skipSilence = preferences\n+            .getBoolean(context.getString(R.string.playback_skip_silence_key),\n+                getPlaybackSkipSilence());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6bfa6be22d2663d41ede7e404fbe5d5f6f3e38cf"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzg5MzQy", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3288#pullrequestreview-383389342", "createdAt": "2020-03-29T09:12:17Z", "commit": {"oid": "10147e0e7782aa60d1d6de74ee9f1b0860fedb68"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQwOToxMjoxN1rOF9P98A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQwOToxMjoxN1rOF9P98A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc2OTA3Mg==", "bodyText": "Couldn't this be final as well?", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3288#discussion_r399769072", "createdAt": "2020-03-29T09:12:17Z", "author": {"login": "wb9688"}, "path": "app/src/main/java/org/schabi/newpipe/player/BasePlayer.java", "diffHunk": "@@ -312,6 +307,19 @@ public void handleIntent(Intent intent) {\n                 /*playOnInit=*/!intent.getBooleanExtra(START_PAUSED, false), isMuted);\n     }\n \n+    private PlaybackParameters retrievePlaybackParametersFromPreferences() {\n+        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10147e0e7782aa60d1d6de74ee9f1b0860fedb68"}, "originalPosition": 35}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "10147e0e7782aa60d1d6de74ee9f1b0860fedb68", "author": {"user": {"login": "XiangRongLin", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/10147e0e7782aa60d1d6de74ee9f1b0860fedb68", "committedDate": "2020-03-29T08:45:24Z", "message": "Make variable final if possible"}, "afterCommit": {"oid": "1e4f1d0ff05bdade6751d9087914dcfda47c681d", "author": {"user": {"login": "XiangRongLin", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/1e4f1d0ff05bdade6751d9087914dcfda47c681d", "committedDate": "2020-03-29T09:10:08Z", "message": "Save and restore playback parameters into/from preferences\n\nPlayback parameters are speed, pitch and skip silence.\nRemove parameters being passed on as intent to the player, since the parameters can be restored from the preferences instead."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzk3MDgz", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3288#pullrequestreview-383397083", "createdAt": "2020-03-29T10:49:15Z", "commit": {"oid": "1e4f1d0ff05bdade6751d9087914dcfda47c681d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3855e488cb78959dbf6327ff187fda8867e42b43", "author": {"user": {"login": "XiangRongLin", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/3855e488cb78959dbf6327ff187fda8867e42b43", "committedDate": "2020-04-05T15:46:49Z", "message": "Save and restore playback parameters into/from preferences\n\nPlayback parameters are speed, pitch and skip silence.\nRemove parameters being passed on as intent to the player, since the parameters can be restored from the preferences instead.\n\n# Conflicts:\n#\tapp/src/main/java/org/schabi/newpipe/player/BasePlayer.java"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1e4f1d0ff05bdade6751d9087914dcfda47c681d", "author": {"user": {"login": "XiangRongLin", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/1e4f1d0ff05bdade6751d9087914dcfda47c681d", "committedDate": "2020-03-29T09:10:08Z", "message": "Save and restore playback parameters into/from preferences\n\nPlayback parameters are speed, pitch and skip silence.\nRemove parameters being passed on as intent to the player, since the parameters can be restored from the preferences instead."}, "afterCommit": {"oid": "3855e488cb78959dbf6327ff187fda8867e42b43", "author": {"user": {"login": "XiangRongLin", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipe/commit/3855e488cb78959dbf6327ff187fda8867e42b43", "committedDate": "2020-04-05T15:46:49Z", "message": "Save and restore playback parameters into/from preferences\n\nPlayback parameters are speed, pitch and skip silence.\nRemove parameters being passed on as intent to the player, since the parameters can be restored from the preferences instead.\n\n# Conflicts:\n#\tapp/src/main/java/org/schabi/newpipe/player/BasePlayer.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5OTc5Nzkx", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3288#pullrequestreview-389979791", "createdAt": "2020-04-08T13:35:26Z", "commit": {"oid": "3855e488cb78959dbf6327ff187fda8867e42b43"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4179, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}