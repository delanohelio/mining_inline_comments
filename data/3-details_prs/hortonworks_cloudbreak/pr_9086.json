{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyNTE3NDk3", "number": 9086, "title": "CB-8904 Check CM version when filtering images for upgrade", "bodyText": "Upgrade with lock components hasn't filtered images by Cloudera Manager build number.\nIn this commit an additional check has been added. Also the filtering for CM and stack\nversion has been refactored into smaller classes.\nSee detailed description in the commit message.", "createdAt": "2020-09-24T15:11:41Z", "url": "https://github.com/hortonworks/cloudbreak/pull/9086", "merged": true, "mergeCommit": {"oid": "bb4161a6b51eda3f6e23fa8f4b14c72e5556c9dd"}, "closed": true, "closedAt": "2020-09-28T12:23:57Z", "author": {"login": "lacikaaa"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMYbWHgFqTQ5NjU3NTA0Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNRemyABqjM4MTM5MjA5Mzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NTc1MDQ2", "url": "https://github.com/hortonworks/cloudbreak/pull/9086#pullrequestreview-496575046", "createdAt": "2020-09-25T16:31:54Z", "commit": {"oid": "d4905eddf9d38b415f9513f052526e8f306ec6f5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNjozMTo1NFrOHYKrRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNjozMTo1NFrOHYKrRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTEwMjc4OA==", "bodyText": "The name should indicate that it doesn't check the CDH parcel.", "url": "https://github.com/hortonworks/cloudbreak/pull/9086#discussion_r495102788", "createdAt": "2020-09-25T16:31:54Z", "author": {"login": "keyki"}, "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/upgrade/image/locked/ParcelMatcher.java", "diffHunk": "@@ -0,0 +1,58 @@\n+package com.sequenceiq.cloudbreak.service.upgrade.image.locked;\n+\n+import java.util.Map;\n+import java.util.Map.Entry;\n+import java.util.Optional;\n+import java.util.function.Predicate;\n+import java.util.stream.Collectors;\n+\n+import javax.inject.Inject;\n+\n+import org.springframework.stereotype.Component;\n+\n+import com.sequenceiq.cloudbreak.cloud.model.ClouderaManagerProduct;\n+import com.sequenceiq.cloudbreak.cloud.model.catalog.Image;\n+import com.sequenceiq.cloudbreak.cloud.model.component.StackType;\n+import com.sequenceiq.cloudbreak.service.image.PreWarmParcelParser;\n+\n+@Component\n+public class ParcelMatcher {\n+\n+    @Inject\n+    private PreWarmParcelParser preWarmParcelParser;\n+\n+    // Only compares the versions of the activated parcels\n+    public boolean isMatchingParcels(Image image, Map<String, String> activatedParcels) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4905eddf9d38b415f9513f052526e8f306ec6f5"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NTc5NjI2", "url": "https://github.com/hortonworks/cloudbreak/pull/9086#pullrequestreview-496579626", "createdAt": "2020-09-25T16:39:00Z", "commit": {"oid": "d4905eddf9d38b415f9513f052526e8f306ec6f5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5feec82f876a561eaa348655e8d0a6b6c470f62f", "author": {"user": {"login": "lacikaaa", "name": "Mihaly Laszlo Molnar"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/5feec82f876a561eaa348655e8d0a6b6c470f62f", "committedDate": "2020-09-28T10:59:28Z", "message": "CB-8904 Check CM version when filtering images for upgrade\n\nUpgrade with lock components hasn't filtered images by Cloudera Manager build number.\nIn this commit an additional check has been added. Also the filtering for CM and stack\nversion has been refactored into smaller classes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4905eddf9d38b415f9513f052526e8f306ec6f5", "author": {"user": {"login": "lacikaaa", "name": "Mihaly Laszlo Molnar"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/d4905eddf9d38b415f9513f052526e8f306ec6f5", "committedDate": "2020-09-24T15:10:14Z", "message": "CB-8904 Check CM version when filtering images for upgrade\n\nUpgrade with lock components hasn't filtered images by Cloudera Manager build number.\nIn this commit an additional check has been added. Also the filtering for CM and stack\nversion has been refactored into smaller classes."}, "afterCommit": {"oid": "5feec82f876a561eaa348655e8d0a6b6c470f62f", "author": {"user": {"login": "lacikaaa", "name": "Mihaly Laszlo Molnar"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/5feec82f876a561eaa348655e8d0a6b6c470f62f", "committedDate": "2020-09-28T10:59:28Z", "message": "CB-8904 Check CM version when filtering images for upgrade\n\nUpgrade with lock components hasn't filtered images by Cloudera Manager build number.\nIn this commit an additional check has been added. Also the filtering for CM and stack\nversion has been refactored into smaller classes."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2248, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}