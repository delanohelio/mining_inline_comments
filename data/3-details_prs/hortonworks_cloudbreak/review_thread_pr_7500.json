{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0ODQ5NDQ0", "number": 7500, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QxODowOTozMlrODmCyHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QxODoxNTowOVrODmCzDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMjE4MDc2OnYy", "diffSide": "RIGHT", "path": "datalake/src/main/java/com/sequenceiq/datalake/settings/SdxRepairSettings.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QxODowOTozMlrOFzRDQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QxODowOTozMlrOFzRDQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMwMTA1OA==", "bodyText": "I think this statement shall be in the else clause of the if above, otherwise settings.hostGroupNames might get overwritten (with null or whatever is passed in request.getHostGroupNames()) even if a single host group was to be repaired. Alternatively, the statement can be also moved before the if, whichever approach you prefer. \ud83d\ude04", "url": "https://github.com/hortonworks/cloudbreak/pull/7500#discussion_r389301058", "createdAt": "2020-03-07T18:09:32Z", "author": {"login": "lajosrodek"}, "path": "datalake/src/main/java/com/sequenceiq/datalake/settings/SdxRepairSettings.java", "diffHunk": "@@ -0,0 +1,36 @@\n+package com.sequenceiq.datalake.settings;\n+\n+import java.util.List;\n+\n+import javax.ws.rs.BadRequestException;\n+\n+import org.apache.commons.collections.CollectionUtils;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.logging.log4j.util.Strings;\n+\n+import com.sequenceiq.sdx.api.model.SdxRepairRequest;\n+\n+public class SdxRepairSettings {\n+\n+    private List<String> hostGroupNames;\n+\n+    private SdxRepairSettings() {\n+    }\n+\n+    public static SdxRepairSettings from(SdxRepairRequest request) {\n+        if (StringUtils.isNotBlank(request.getHostGroupName()) && CollectionUtils.isNotEmpty(request.getHostGroupNames())) {\n+            throw new BadRequestException(\"Please send only one hostGroupName in the 'hostGroupName' field \" +\n+                    \"or multiple hostGroups in the 'hostGroupNames' fields\");\n+        }\n+        SdxRepairSettings settings = new SdxRepairSettings();\n+        if (Strings.isNotEmpty(request.getHostGroupName())) {\n+            settings.hostGroupNames = List.of(request.getHostGroupName());\n+        }\n+        settings.hostGroupNames = request.getHostGroupNames();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "504f5a0649bfe5e692c50bd7a4d38c9ae922cabf"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMjE4MzE4OnYy", "diffSide": "RIGHT", "path": "datalake/src/main/java/com/sequenceiq/datalake/service/sdx/SdxRepairService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QxODoxNTowOVrOFzREfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QxODoxNTowOVrOFzREfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMwMTM3Mg==", "bodyText": "Minor: rename repairRequest to repairSettings. Similarly in the other two changes below.", "url": "https://github.com/hortonworks/cloudbreak/pull/7500#discussion_r389301372", "createdAt": "2020-03-07T18:15:09Z", "author": {"login": "lajosrodek"}, "path": "datalake/src/main/java/com/sequenceiq/datalake/service/sdx/SdxRepairService.java", "diffHunk": "@@ -76,15 +75,15 @@ public FlowIdentifier triggerRepairByName(String userCrn, String clusterName, Sd\n         return sdxReactorFlowManager.triggerSdxRepairFlow(cluster.getId(), clusterRepairRequest);\n     }\n \n-    public void startSdxRepair(Long id, SdxRepairRequest repairRequest) {\n+    public void startSdxRepair(Long id, SdxRepairSettings repairRequest) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "504f5a0649bfe5e692c50bd7a4d38c9ae922cabf"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2736, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}