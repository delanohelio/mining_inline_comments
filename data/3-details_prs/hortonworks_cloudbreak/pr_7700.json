{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2MzgxMzk4", "number": 7700, "title": "CB-6376 azure_instance_msi missing from backup configuration for FreeIPA", "bodyText": "This adds the azure_instance_msi to the pillar that was missing.\nCloses #CB-6376", "createdAt": "2020-03-31T14:38:55Z", "url": "https://github.com/hortonworks/cloudbreak/pull/7700", "merged": true, "mergeCommit": {"oid": "52140a1fb4a39fec07b7961b25c794a8a791cb42"}, "closed": true, "closedAt": "2020-03-31T17:56:32Z", "author": {"login": "wonderslug"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTECoKAH2gAyMzk2MzgxMzk4OjcxNjMxYmU3N2JlMzljNjcxNjdlMDQwOWIwMDkzZDA2YTVhMDFlZGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTFDO7AFqTM4NDg2NDU4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "71631be77be39c67167e0409b0093d06a5a01edc", "author": {"user": {"login": "wonderslug", "name": "Brian Towles"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/71631be77be39c67167e0409b0093d06a5a01edc", "committedDate": "2020-03-31T14:33:08Z", "message": "CB-6376 azure_instance_msi missing from backup configuration for FreeIPA\n\nThis adds the azure_instance_msi to the pillar that was missing."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0ODM2OTYw", "url": "https://github.com/hortonworks/cloudbreak/pull/7700#pullrequestreview-384836960", "createdAt": "2020-03-31T15:14:56Z", "commit": {"oid": "71631be77be39c67167e0409b0093d06a5a01edc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0ODY0NTgw", "url": "https://github.com/hortonworks/cloudbreak/pull/7700#pullrequestreview-384864580", "createdAt": "2020-03-31T15:43:38Z", "commit": {"oid": "71631be77be39c67167e0409b0093d06a5a01edc"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNTo0MzozOFrOF-cMag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNTo0MzozOFrOF-cMag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTAxNzk2Mg==", "bodyText": "Yes, this fixes it (tested with cross-subscription setup).\nOne note though: in the freeipa_backup.sh command /usr/local/bin/azcopy login --identity --identity-resource-id [azure-msi] will report auth ok even if azure-msi is \"\". It might make sense to add a log line what the used msi was. I know it can be read in the config file but could help clarity.", "url": "https://github.com/hortonworks/cloudbreak/pull/7700#discussion_r401017962", "createdAt": "2020-03-31T15:43:38Z", "author": {"login": "gergopapi2"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/config/FreeIpaBackupConfigView.java", "diffHunk": "@@ -75,6 +75,7 @@ public String getAzureInstanceMsi() {\n         map.put(\"hourly_enabled\", this.hourlyEnabled);\n         map.put(\"initial_full_enabled\", this.initialFullEnabled);\n         map.put(\"platform\", ObjectUtils.defaultIfNull(this.platform, EMPTY_CONFIG_DEFAULT));\n+        map.put(\"azure_instance_msi\", ObjectUtils.defaultIfNull(this.azureInstanceMsi, EMPTY_CONFIG_DEFAULT));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71631be77be39c67167e0409b0093d06a5a01edc"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2394, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}