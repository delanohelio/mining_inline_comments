{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0NDczOTE3", "number": 8279, "title": "CB-7395 Revise, restrict and POC Azure minimal permission list", "bodyText": "Permission set for single RG use-case not fully tested => draft.\nQuestion: given the most likely scenario from a customer is to bring its own RG, network and storage account, we could create a typical set of permissions that does not contain creation and deletion of such entities. What do you think?", "createdAt": "2020-06-15T11:25:01Z", "url": "https://github.com/hortonworks/cloudbreak/pull/8279", "merged": true, "mergeCommit": {"oid": "86ebea59e6f58f9fce91a1c4268130321e4ddb51"}, "closed": true, "closedAt": "2020-06-24T20:51:43Z", "author": {"login": "gergopapi2"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrfb0UAFqTQzMDU3NjQ3OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcugZePgFqTQzNjk5NzM1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNTc2NDc4", "url": "https://github.com/hortonworks/cloudbreak/pull/8279#pullrequestreview-430576478", "createdAt": "2020-06-15T12:02:15Z", "commit": {"oid": "176f0598c26fcb60d09833a010168dc14d97e821"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMjowMjoxNlrOGjvK4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMjowMjoxNlrOGjvK4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEyNjE3Ng==", "bodyText": "We should scope this on RG level, shouldn't we?", "url": "https://github.com/hortonworks/cloudbreak/pull/8279#discussion_r440126176", "createdAt": "2020-06-15T12:02:16Z", "author": {"login": "pdarvasi"}, "path": "cloud-azure/src/main/resources/definitions/azure-role-def-single-rg.json", "diffHunk": "@@ -0,0 +1,84 @@\n+{\n+  \"Name\": \"Cloudera Management Console Azure Operator\",\n+  \"IsCustom\": true,\n+  \"Description\": \"Can use Cloudera Management Console managed clusters and resources.\",\n+  \"Actions\": [\n+    \"Microsoft.Storage/storageAccounts/read\",\n+    \"Microsoft.Storage/storageAccounts/write\",\n+    \"Microsoft.Storage/storageAccounts/blobServices/write\",\n+    \"Microsoft.Storage/storageAccounts/blobServices/containers/delete\",\n+    \"Microsoft.Storage/storageAccounts/blobServices/containers/read\",\n+    \"Microsoft.Storage/storageAccounts/blobServices/containers/write\",\n+    \"Microsoft.Storage/storageAccounts/listkeys/action\",\n+    \"Microsoft.Storage/storageAccounts/regeneratekey/action\",\n+    \"Microsoft.Storage/storageAccounts/delete\",\n+    \"Microsoft.Storage/locations/deleteVirtualNetworkOrSubnets/action\",\n+    \"Microsoft.Network/virtualNetworks/read\",\n+    \"Microsoft.Network/virtualNetworks/write\",\n+    \"Microsoft.Network/virtualNetworks/delete\",\n+    \"Microsoft.Network/virtualNetworks/subnets/read\",\n+    \"Microsoft.Network/virtualNetworks/subnets/write\",\n+    \"Microsoft.Network/virtualNetworks/subnets/delete\",\n+    \"Microsoft.Network/virtualNetworks/subnets/join/action\",\n+    \"Microsoft.Network/publicIPAddresses/read\",\n+    \"Microsoft.Network/publicIPAddresses/write\",\n+    \"Microsoft.Network/publicIPAddresses/delete\",\n+    \"Microsoft.Network/publicIPAddresses/join/action\",\n+    \"Microsoft.Network/networkInterfaces/read\",\n+    \"Microsoft.Network/networkInterfaces/write\",\n+    \"Microsoft.Network/networkInterfaces/delete\",\n+    \"Microsoft.Network/networkInterfaces/join/action\",\n+    \"Microsoft.Network/networkInterfaces/ipconfigurations/read\",\n+    \"Microsoft.Network/networkSecurityGroups/read\",\n+    \"Microsoft.Network/networkSecurityGroups/write\",\n+    \"Microsoft.Network/networkSecurityGroups/delete\",\n+    \"Microsoft.Network/networkSecurityGroups/join/action\",\n+    \"Microsoft.Network/virtualNetworks/subnets/joinViaServiceEndpoint/action\",\n+    \"Microsoft.Compute/availabilitySets/read\",\n+    \"Microsoft.Compute/availabilitySets/write\",\n+    \"Microsoft.Compute/availabilitySets/delete\",\n+    \"Microsoft.Compute/disks/read\",\n+    \"Microsoft.Compute/disks/write\",\n+    \"Microsoft.Compute/disks/delete\",\n+    \"Microsoft.Compute/images/read\",\n+    \"Microsoft.Compute/images/write\",\n+    \"Microsoft.Compute/images/delete\",\n+    \"Microsoft.Compute/virtualMachines/read\",\n+    \"Microsoft.Compute/virtualMachines/write\",\n+    \"Microsoft.Compute/virtualMachines/delete\",\n+    \"Microsoft.Compute/virtualMachines/start/action\",\n+    \"Microsoft.Compute/virtualMachines/restart/action\",\n+    \"Microsoft.Compute/virtualMachines/deallocate/action\",\n+    \"Microsoft.Compute/virtualMachines/vmSizes/read\",\n+    \"Microsoft.Authorization/roleAssignments/read\",\n+    \"Microsoft.Resources/subscriptions/resourceGroups/read\",\n+    \"Microsoft.Resources/subscriptions/resourceGroups/deployments/read\",\n+    \"Microsoft.Resources/subscriptions/resourceGroups/deployments/write\",\n+    \"Microsoft.Resources/subscriptions/resourcegroups/deployments/operations/read\",\n+    \"Microsoft.Resources/subscriptions/resourcegroups/deployments/operationstatuses/read\",\n+    \"Microsoft.Resources/deployments/read\",\n+    \"Microsoft.Resources/deployments/write\",\n+    \"Microsoft.Resources/deployments/delete\",\n+    \"Microsoft.Resources/deployments/operations/read\",\n+    \"Microsoft.Resources/deployments/operationstatuses/read\",\n+    \"Microsoft.Resources/deployments/exportTemplate/action\",\n+    \"Microsoft.Resources/subscriptions/read\",\n+    \"Microsoft.ManagedIdentity/userAssignedIdentities/write\",\n+    \"Microsoft.ManagedIdentity/userAssignedIdentities/read\",\n+    \"Microsoft.ManagedIdentity/userAssignedIdentities/assign/action\",\n+    \"Microsoft.DBforPostgreSQL/servers/write\",\n+    \"Microsoft.DBforPostgreSQL/servers/delete\",\n+    \"Microsoft.DBforPostgreSQL/servers/virtualNetworkRules/write\"\n+  ],\n+  \"NotActions\": [],\n+  \"DataActions\": [\n+    \"Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read\",\n+    \"Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write\",\n+    \"Microsoft.Storage/storageAccounts/blobServices/containers/blobs/delete\",\n+    \"Microsoft.Storage/storageAccounts/blobServices/containers/blobs/add/action\"\n+  ],\n+  \"NotDataActions\": [],\n+  \"AssignableScopes\": [\n+    \"/subscriptions/{subscriptionId}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "176f0598c26fcb60d09833a010168dc14d97e821"}, "originalPosition": 82}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "176f0598c26fcb60d09833a010168dc14d97e821", "author": {"user": {"login": "gergopapi2", "name": "Gergely Papp"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/176f0598c26fcb60d09833a010168dc14d97e821", "committedDate": "2020-06-15T11:22:20Z", "message": "CB-7395 Revise, restrict and POC Azure minimal permission list"}, "afterCommit": {"oid": "7bf684fe1435273d683c3d4fafb963105bbcf777", "author": {"user": {"login": "gergopapi2", "name": "Gergely Papp"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/7bf684fe1435273d683c3d4fafb963105bbcf777", "committedDate": "2020-06-24T19:57:20Z", "message": "CB-7395 Revise, restrict and POC Azure minimal permission list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a633f4c68a197c6baa5a716a8aea018e7630a28b", "author": {"user": {"login": "gergopapi2", "name": "Gergely Papp"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/a633f4c68a197c6baa5a716a8aea018e7630a28b", "committedDate": "2020-06-24T19:59:30Z", "message": "CB-7395 Revise, restrict and POC Azure minimal permission list"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7bf684fe1435273d683c3d4fafb963105bbcf777", "author": {"user": {"login": "gergopapi2", "name": "Gergely Papp"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/7bf684fe1435273d683c3d4fafb963105bbcf777", "committedDate": "2020-06-24T19:57:20Z", "message": "CB-7395 Revise, restrict and POC Azure minimal permission list"}, "afterCommit": {"oid": "a633f4c68a197c6baa5a716a8aea018e7630a28b", "author": {"user": {"login": "gergopapi2", "name": "Gergely Papp"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/a633f4c68a197c6baa5a716a8aea018e7630a28b", "committedDate": "2020-06-24T19:59:30Z", "message": "CB-7395 Revise, restrict and POC Azure minimal permission list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2OTk3MzUx", "url": "https://github.com/hortonworks/cloudbreak/pull/8279#pullrequestreview-436997351", "createdAt": "2020-06-24T20:51:23Z", "commit": {"oid": "a633f4c68a197c6baa5a716a8aea018e7630a28b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1707, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}