{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0NDcxNzgy", "number": 7481, "title": "CB-5896: Use the IAM service for the CDP_FREEIPA_HA entitlement", "bodyText": "Fix the CDP_FREEIPA_HA entitlement check to use the IAM service as the\ninternal actor's service. The UMS requires the internal actor to be\nIAM.\nThis was tested locally with the mock-caas.\nCloses #CB-5896", "createdAt": "2020-03-05T19:58:41Z", "url": "https://github.com/hortonworks/cloudbreak/pull/7481", "merged": true, "mergeCommit": {"oid": "6454689100557c3e7fe3c2ac739a61f46250efa1"}, "closed": true, "closedAt": "2020-03-05T23:26:05Z", "author": {"login": "jamisonbennett"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKw_fZgH2gAyMzg0NDcxNzgyOjhkODNkZGRkMmMzZTY2YzBmNjg1MjAyYWYzMzVhZTk2Y2RjOWRiY2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKxzmXAFqTM2OTkwMTkwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8d83dddd2c3e66c0f685202af335ae96cdc9dbcb", "author": {"user": {"login": "jamisonbennett", "name": "Jamison Bennett"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8d83dddd2c3e66c0f685202af335ae96cdc9dbcb", "committedDate": "2020-03-05T19:50:07Z", "message": "CB-5896: Use the IAM service for the CDP_FREEIPA_HA entitlement\n\nFix the CDP_FREEIPA_HA entitlement check to use the IAM service as the\ninternal actor's service. The UMS requires the internal actor to be\nIAM."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5ODc4ODgx", "url": "https://github.com/hortonworks/cloudbreak/pull/7481#pullrequestreview-369878881", "createdAt": "2020-03-05T20:10:16Z", "commit": {"oid": "8d83dddd2c3e66c0f685202af335ae96cdc9dbcb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5ODg2Nzc2", "url": "https://github.com/hortonworks/cloudbreak/pull/7481#pullrequestreview-369886776", "createdAt": "2020-03-05T20:23:03Z", "commit": {"oid": "8d83dddd2c3e66c0f685202af335ae96cdc9dbcb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5OTAxOTA0", "url": "https://github.com/hortonworks/cloudbreak/pull/7481#pullrequestreview-369901904", "createdAt": "2020-03-05T20:46:55Z", "commit": {"oid": "8d83dddd2c3e66c0f685202af335ae96cdc9dbcb"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMDo0Njo1NVrOFyjj6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMDo0Njo1NVrOFyjj6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODU1NTc1Mg==", "bodyText": "So yes, the internal actor is currently a single, fixed CRN. In that fixed string the IAM is the service type. Until we change that I think that the InternalCrnBuilder should not take any parameters. It's most probably not something that you introduced or need to fix. It's just a thought.", "url": "https://github.com/hortonworks/cloudbreak/pull/7481#discussion_r388555752", "createdAt": "2020-03-05T20:46:55Z", "author": {"login": "giladwolff"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/controller/validation/CreateFreeIpaRequestValidator.java", "diffHunk": "@@ -19,7 +19,7 @@\n @Component\n public class CreateFreeIpaRequestValidator implements Validator<CreateFreeIpaRequest> {\n \n-    static final String FREEIPA_INTERNAL_ACTOR_CRN = new InternalCrnBuilder(Crn.Service.FREEIPA).getInternalCrnForServiceAsString();\n+    static final String INTERNAL_ACTOR_CRN = new InternalCrnBuilder(Crn.Service.IAM).getInternalCrnForServiceAsString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d83dddd2c3e66c0f685202af335ae96cdc9dbcb"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2530, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}