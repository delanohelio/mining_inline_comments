{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzOTA4NDIw", "number": 8161, "title": "CB-7163 Add spot max price capability", "bodyText": "", "createdAt": "2020-05-27T14:51:19Z", "url": "https://github.com/hortonworks/cloudbreak/pull/8161", "merged": true, "mergeCommit": {"oid": "7e16a2344a6169e4a01f61df2ecd5ca6f596b4f9"}, "closed": true, "closedAt": "2020-07-16T14:02:43Z", "author": {"login": "Bajzathd"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcl-Zu1ABqjMzODYyMzA2MDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1PbcMgFqTQ0OTI0Nzg1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4d41058734d7b3f3c5c2ac3b7bf3f51400406b45", "author": {"user": {"login": "Bajzathd", "name": "Bajz\u00e1th D\u00e1vid"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/4d41058734d7b3f3c5c2ac3b7bf3f51400406b45", "committedDate": "2020-05-27T14:45:14Z", "message": "CB-7163 Add spot max price capability"}, "afterCommit": {"oid": "5b848b544956d29c578a012212844e6a1a2594c5", "author": {"user": {"login": "Bajzathd", "name": "Bajz\u00e1th D\u00e1vid"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/5b848b544956d29c578a012212844e6a1a2594c5", "committedDate": "2020-05-29T08:43:15Z", "message": "CB-7163 Add spot max price capability"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b848b544956d29c578a012212844e6a1a2594c5", "author": {"user": {"login": "Bajzathd", "name": "Bajz\u00e1th D\u00e1vid"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/5b848b544956d29c578a012212844e6a1a2594c5", "committedDate": "2020-05-29T08:43:15Z", "message": "CB-7163 Add spot max price capability"}, "afterCommit": {"oid": "cb970c4b33be73c94412af9a80c7dabee77e0697", "author": {"user": {"login": "Bajzathd", "name": "Bajz\u00e1th D\u00e1vid"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/cb970c4b33be73c94412af9a80c7dabee77e0697", "committedDate": "2020-05-29T14:55:15Z", "message": "CB-7163 Add spot max price capability"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MTI3MzQ4", "url": "https://github.com/hortonworks/cloudbreak/pull/8161#pullrequestreview-426127348", "createdAt": "2020-06-08T11:09:40Z", "commit": {"oid": "cb970c4b33be73c94412af9a80c7dabee77e0697"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMTowOTo0MFrOGgZHOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMTowOTo0MFrOGgZHOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjYxOTA2NA==", "bodyText": "what if spotPercentage is not present? the orElse(0) logic is changed here", "url": "https://github.com/hortonworks/cloudbreak/pull/8161#discussion_r436619064", "createdAt": "2020-06-08T11:09:40Z", "author": {"login": "bergerdenes"}, "path": "environment/src/main/java/com/sequenceiq/environment/environment/v1/converter/EnvironmentApiConverter.java", "diffHunk": "@@ -178,16 +177,18 @@ private ParametersDto azureParamsToParametersDto(AzureEnvironmentParameters azur\n     }\n \n     private AwsParametersDto awsParamsToAwsParameters(AwsEnvironmentParameters aws, AwsFreeIpaParameters awsFreeIpa) {\n-        return AwsParametersDto.builder()\n+        AwsParametersDto.Builder builder = AwsParametersDto.builder()\n                 .withDynamoDbTableName(Optional.ofNullable(aws)\n                         .map(AwsEnvironmentParameters::getS3guard)\n                         .map(S3GuardRequestParameters::getDynamoDbTableName)\n-                        .orElse(null))\n-                .withFreeIpaSpotPercentage(Optional.ofNullable(awsFreeIpa)\n-                        .map(AwsFreeIpaParameters::getSpot)\n-                        .map(AwsFreeIpaSpotParameters::getPercentage)\n-                        .orElse(0))\n-                .build();\n+                        .orElse(null));\n+        Optional.ofNullable(awsFreeIpa)\n+                .map(AwsFreeIpaParameters::getSpot)\n+                .ifPresent(awsFreeIpaSpotParameters -> {\n+                    builder.withFreeIpaSpotPercentage(awsFreeIpaSpotParameters.getPercentage())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb970c4b33be73c94412af9a80c7dabee77e0697"}, "originalPosition": 27}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cb970c4b33be73c94412af9a80c7dabee77e0697", "author": {"user": {"login": "Bajzathd", "name": "Bajz\u00e1th D\u00e1vid"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/cb970c4b33be73c94412af9a80c7dabee77e0697", "committedDate": "2020-05-29T14:55:15Z", "message": "CB-7163 Add spot max price capability"}, "afterCommit": {"oid": "bb397baf235a94d3c1c36d627d65aa177c02c8cf", "author": {"user": {"login": "Bajzathd", "name": "Bajz\u00e1th D\u00e1vid"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/bb397baf235a94d3c1c36d627d65aa177c02c8cf", "committedDate": "2020-07-08T14:28:09Z", "message": "CB-7163 Add spot max price capability"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1294215a7196826d2a9a45e7d2e6bd05b9cb62b6", "author": {"user": {"login": "Bajzathd", "name": "Bajz\u00e1th D\u00e1vid"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/1294215a7196826d2a9a45e7d2e6bd05b9cb62b6", "committedDate": "2020-07-08T15:22:38Z", "message": "CB-7163 Add spot max price capability"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bb397baf235a94d3c1c36d627d65aa177c02c8cf", "author": {"user": {"login": "Bajzathd", "name": "Bajz\u00e1th D\u00e1vid"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/bb397baf235a94d3c1c36d627d65aa177c02c8cf", "committedDate": "2020-07-08T14:28:09Z", "message": "CB-7163 Add spot max price capability"}, "afterCommit": {"oid": "1294215a7196826d2a9a45e7d2e6bd05b9cb62b6", "author": {"user": {"login": "Bajzathd", "name": "Bajz\u00e1th D\u00e1vid"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/1294215a7196826d2a9a45e7d2e6bd05b9cb62b6", "committedDate": "2020-07-08T15:22:38Z", "message": "CB-7163 Add spot max price capability"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MjQ3ODU3", "url": "https://github.com/hortonworks/cloudbreak/pull/8161#pullrequestreview-449247857", "createdAt": "2020-07-15T19:02:37Z", "commit": {"oid": "1294215a7196826d2a9a45e7d2e6bd05b9cb62b6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1759, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}