{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyMDQ5Mjg2", "number": 8463, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNzo0OTowMlrOEKZuqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNzo0OTowMlrOEKZuqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MzQyNzYyOnYy", "diffSide": "RIGHT", "path": "autoscale/src/main/java/com/sequenceiq/periscope/monitor/TimeMonitor.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNzo0OTowMlrOGrawmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNzo1NToyN1rOGra-Kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE4MDM3Ng==", "bodyText": "is it better in performance if you query the ids first and query the clusters by the ids second?", "url": "https://github.com/hortonworks/cloudbreak/pull/8463#discussion_r448180376", "createdAt": "2020-07-01T07:49:02Z", "author": {"login": "topolyai5"}, "path": "autoscale/src/main/java/com/sequenceiq/periscope/monitor/TimeMonitor.java", "diffHunk": "@@ -25,4 +28,10 @@ public String getTriggerExpression() {\n         return CronTimeEvaluator.class;\n     }\n \n+    @Override\n+    protected List<Cluster> getMonitored() {\n+        List<Long> clusterIds = getClusterService().findTimeAlertClustersForNode(StackType.WORKLOAD,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ce7c28c5a3a1b14a449643794c89d66f9a9ea4d"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE4Mzg1MA==", "bodyText": "yes because of the join with timealert table. also only cluster ids which have schedule based alerts are filtered in monitor instead of loading all clusters with autoscaling enabled and processing them in CronTimeEvaluator", "url": "https://github.com/hortonworks/cloudbreak/pull/8463#discussion_r448183850", "createdAt": "2020-07-01T07:55:27Z", "author": {"login": "smaniraju"}, "path": "autoscale/src/main/java/com/sequenceiq/periscope/monitor/TimeMonitor.java", "diffHunk": "@@ -25,4 +28,10 @@ public String getTriggerExpression() {\n         return CronTimeEvaluator.class;\n     }\n \n+    @Override\n+    protected List<Cluster> getMonitored() {\n+        List<Long> clusterIds = getClusterService().findTimeAlertClustersForNode(StackType.WORKLOAD,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE4MDM3Ng=="}, "originalCommit": {"oid": "4ce7c28c5a3a1b14a449643794c89d66f9a9ea4d"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3103, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}