{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2MzEwNzQ1", "number": 8891, "title": "CB-8586 Check and fill FMS log context", "bodyText": "We have missed setting the MDCContext in many places. This commit\ntries to fix those cases.", "createdAt": "2020-08-31T13:47:51Z", "url": "https://github.com/hortonworks/cloudbreak/pull/8891", "merged": true, "mergeCommit": {"oid": "a1486ca09e8d1f654f20354efe2e94400416dc25"}, "closed": true, "closedAt": "2020-09-01T11:39:27Z", "author": {"login": "lacikaaa"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEUi1egFqTQ3ODcwNjI5OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEjCXyABqjM3MTM1MzMyNjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NzA2Mjk5", "url": "https://github.com/hortonworks/cloudbreak/pull/8891#pullrequestreview-478706299", "createdAt": "2020-08-31T15:17:06Z", "commit": {"oid": "11f95b2144dc43477841ae632d8b6239035a9156"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNToxNzowNlrOHJ9EzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNToyMjoxOFrOHJ9RLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE5OTg4NQ==", "bodyText": "would it make sense to move this to the private getFreeIpaClient method? Then it would work for all the various public methods of this class.", "url": "https://github.com/hortonworks/cloudbreak/pull/8891#discussion_r480199885", "createdAt": "2020-08-31T15:17:06Z", "author": {"login": "handavid"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/FreeIpaClientFactory.java", "diffHunk": "@@ -87,6 +88,7 @@ public FreeIpaClient getFreeIpaClientForStackId(Long stackId) throws FreeIpaClie\n \n     public FreeIpaClient getFreeIpaClientByAccountAndEnvironment(String environmentCrn, String accountId) throws FreeIpaClientException {\n         Stack stack = stackService.getByEnvironmentCrnAndAccountId(environmentCrn, accountId);\n+        MDCBuilder.buildMdcContext(stack);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11f95b2144dc43477841ae632d8b6239035a9156"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDIwMzA1Mg==", "bodyText": "we already have the Stack so we can avoid a redundant read by calling getFreeIpaClientForStack instead of getFreeIpaClientByAccountAndEnvironment", "url": "https://github.com/hortonworks/cloudbreak/pull/8891#discussion_r480203052", "createdAt": "2020-08-31T15:22:18Z", "author": {"login": "handavid"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/dns/DnsRecordService.java", "diffHunk": "@@ -36,6 +37,7 @@\n \n     public void deleteDnsRecordByFqdn(String environmentCrn, String accountId,  List<String> fqdns) throws FreeIpaClientException {\n         Stack stack = stackService.getByEnvironmentCrnAndAccountId(environmentCrn, accountId);\n+        MDCBuilder.buildMdcContext(stack);\n         FreeIpa freeIpa = freeIpaService.findByStack(stack);\n         FreeIpaClient freeIpaClient = freeIpaClientFactory.getFreeIpaClientByAccountAndEnvironment(environmentCrn, accountId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11f95b2144dc43477841ae632d8b6239035a9156"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "11f95b2144dc43477841ae632d8b6239035a9156", "author": {"user": {"login": "lacikaaa", "name": "Mihaly Laszlo Molnar"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/11f95b2144dc43477841ae632d8b6239035a9156", "committedDate": "2020-08-31T11:42:21Z", "message": "CB-8586 Check and fill FMS log context\n\nWe have missed setting the `MDCContext` in many places. This commit\ntries to fix those cases."}, "afterCommit": {"oid": "7236fa0188300f99c1cd0701a78164c469cbcce7", "author": {"user": {"login": "lacikaaa", "name": "Mihaly Laszlo Molnar"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/7236fa0188300f99c1cd0701a78164c469cbcce7", "committedDate": "2020-08-31T15:46:07Z", "message": "CB-8586 Check and fill FMS log context\n\nWe have missed setting the `MDCContext` in many places. This commit\ntries to fix those cases."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7236fa0188300f99c1cd0701a78164c469cbcce7", "author": {"user": {"login": "lacikaaa", "name": "Mihaly Laszlo Molnar"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/7236fa0188300f99c1cd0701a78164c469cbcce7", "committedDate": "2020-08-31T15:46:07Z", "message": "CB-8586 Check and fill FMS log context\n\nWe have missed setting the `MDCContext` in many places. This commit\ntries to fix those cases."}, "afterCommit": {"oid": "a9e8876d869d450c608170bd2002a96037522fab", "author": {"user": {"login": "lacikaaa", "name": "Mihaly Laszlo Molnar"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/a9e8876d869d450c608170bd2002a96037522fab", "committedDate": "2020-09-01T07:25:11Z", "message": "CB-8586 Check and fill FMS log context\n\nWe have missed setting the `MDCContext` in many places. This commit\ntries to fix those cases."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b00279b1c53ff18840279129206f9c14edf90290", "author": {"user": {"login": "lacikaaa", "name": "Mihaly Laszlo Molnar"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/b00279b1c53ff18840279129206f9c14edf90290", "committedDate": "2020-09-01T08:21:50Z", "message": "CB-8586 Check and fill FMS log context\n\nWe have missed setting the `MDCContext` in many places. This commit\ntries to fix those cases."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a9e8876d869d450c608170bd2002a96037522fab", "author": {"user": {"login": "lacikaaa", "name": "Mihaly Laszlo Molnar"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/a9e8876d869d450c608170bd2002a96037522fab", "committedDate": "2020-09-01T07:25:11Z", "message": "CB-8586 Check and fill FMS log context\n\nWe have missed setting the `MDCContext` in many places. This commit\ntries to fix those cases."}, "afterCommit": {"oid": "b00279b1c53ff18840279129206f9c14edf90290", "author": {"user": {"login": "lacikaaa", "name": "Mihaly Laszlo Molnar"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/b00279b1c53ff18840279129206f9c14edf90290", "committedDate": "2020-09-01T08:21:50Z", "message": "CB-8586 Check and fill FMS log context\n\nWe have missed setting the `MDCContext` in many places. This commit\ntries to fix those cases."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2382, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}