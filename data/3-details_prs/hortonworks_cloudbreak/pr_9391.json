{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3NzY3NTQy", "number": 9391, "title": "Cb 9647", "bodyText": "See detailed description in the commit message.", "createdAt": "2020-11-09T13:32:48Z", "url": "https://github.com/hortonworks/cloudbreak/pull/9391", "merged": true, "mergeCommit": {"oid": "e6e7403db7f6fee1a19c8dcb7f044ca8b29ebcb4"}, "closed": true, "closedAt": "2020-11-09T19:38:41Z", "author": {"login": "doktoric"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABda0-G1ABqjM5NzM4MDkyNTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABda1-PUgFqTUyNjMzMzMyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5399e0a413f861e1b4af8b2e8771553ed588b306", "author": {"user": {"login": "doktoric", "name": "Richard Doktorics"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/5399e0a413f861e1b4af8b2e8771553ed588b306", "committedDate": "2020-11-09T13:31:52Z", "message": "CB-9647 initial nodecount default now is 0 to avoid rolling upgrade issues"}, "afterCommit": {"oid": "f431465e5a8bcfcc7b2d04c58f03e1788e3dc8ea", "author": {"user": {"login": "doktoric", "name": "Richard Doktorics"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/f431465e5a8bcfcc7b2d04c58f03e1788e3dc8ea", "committedDate": "2020-11-09T13:41:49Z", "message": "CB-9647 initial nodecount default now is 0 to avoid rolling upgrade issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2Mjg0MDcx", "url": "https://github.com/hortonworks/cloudbreak/pull/9391#pullrequestreview-526284071", "createdAt": "2020-11-09T14:01:24Z", "commit": {"oid": "f431465e5a8bcfcc7b2d04c58f03e1788e3dc8ea"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2Mjk0NjE3", "url": "https://github.com/hortonworks/cloudbreak/pull/9391#pullrequestreview-526294617", "createdAt": "2020-11-09T14:13:19Z", "commit": {"oid": "f431465e5a8bcfcc7b2d04c58f03e1788e3dc8ea"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNDoxMzoxOVrOHvwsww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNDoxMzoxOVrOHvwsww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg0MzAxMQ==", "bodyText": "you have to set default value in a separate step to avoid table lock when adding a column:\nsee: https://github.com/hortonworks/cloudbreak/blob/master/freeipa/src/main/resources/schema/app/20200406095012_CB-6385_add_version_to_stack.sql", "url": "https://github.com/hortonworks/cloudbreak/pull/9391#discussion_r519843011", "createdAt": "2020-11-09T14:13:19Z", "author": {"login": "lacikaaa"}, "path": "core/src/main/resources/schema/app/20201027161305_CB-9127_optimize_cluster_template_load_time.sql", "diffHunk": "@@ -4,8 +4,9 @@\n DELETE FROM clustertemplate WHERE status='DEFAULT';\n ALTER TABLE clustertemplate ADD COLUMN IF NOT EXISTS clouderaRuntimeVersion VARCHAR(255);\n \n-ALTER TABLE instancegroup ADD COLUMN IF NOT EXISTS initialNodeCount INTEGER;\n+ALTER TABLE instancegroup ADD COLUMN IF NOT EXISTS initialNodeCount INTEGER DEFAULT 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f431465e5a8bcfcc7b2d04c58f03e1788e3dc8ea"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f431465e5a8bcfcc7b2d04c58f03e1788e3dc8ea", "author": {"user": {"login": "doktoric", "name": "Richard Doktorics"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/f431465e5a8bcfcc7b2d04c58f03e1788e3dc8ea", "committedDate": "2020-11-09T13:41:49Z", "message": "CB-9647 initial nodecount default now is 0 to avoid rolling upgrade issues"}, "afterCommit": {"oid": "c92bbdbaab46315971bb95902f5074f11b2d7aba", "author": {"user": {"login": "doktoric", "name": "Richard Doktorics"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/c92bbdbaab46315971bb95902f5074f11b2d7aba", "committedDate": "2020-11-09T14:18:04Z", "message": "CB-9647 initial nodecount default now is 0 to avoid rolling upgrade issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "671c56af2890941d4d5c592f92712798416169e1", "author": {"user": {"login": "doktoric", "name": "Richard Doktorics"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/671c56af2890941d4d5c592f92712798416169e1", "committedDate": "2020-11-09T14:28:09Z", "message": "CB-9647 initial nodecount default now is 0 to avoid rolling upgrade issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c92bbdbaab46315971bb95902f5074f11b2d7aba", "author": {"user": {"login": "doktoric", "name": "Richard Doktorics"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/c92bbdbaab46315971bb95902f5074f11b2d7aba", "committedDate": "2020-11-09T14:18:04Z", "message": "CB-9647 initial nodecount default now is 0 to avoid rolling upgrade issues"}, "afterCommit": {"oid": "671c56af2890941d4d5c592f92712798416169e1", "author": {"user": {"login": "doktoric", "name": "Richard Doktorics"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/671c56af2890941d4d5c592f92712798416169e1", "committedDate": "2020-11-09T14:28:09Z", "message": "CB-9647 initial nodecount default now is 0 to avoid rolling upgrade issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2MzMzMzIz", "url": "https://github.com/hortonworks/cloudbreak/pull/9391#pullrequestreview-526333323", "createdAt": "2020-11-09T14:52:13Z", "commit": {"oid": "671c56af2890941d4d5c592f92712798416169e1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2092, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}