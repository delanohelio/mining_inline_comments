{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3OTM4OTAz", "number": 9023, "title": "CB-8822 npe check in sdxinternaltestdto investigate", "bodyText": "npe check in sdxinternalTestDto investigate\nbeforehand it had nullpointer exception(only in test log)", "createdAt": "2020-09-16T12:01:21Z", "url": "https://github.com/hortonworks/cloudbreak/pull/9023", "merged": true, "mergeCommit": {"oid": "7e448870fe383f1885ffc757890f99975916f9f3"}, "closed": true, "closedAt": "2020-09-18T07:52:31Z", "author": {"login": "afarsang"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJbdaZgFqTQ4OTU2Njc0Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJwu1QgBqjM3Nzc4ODQ3NzY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NTY2NzQy", "url": "https://github.com/hortonworks/cloudbreak/pull/9023#pullrequestreview-489566742", "createdAt": "2020-09-16T12:22:07Z", "commit": {"oid": "be0497fce84c737284161583168331a8598c7c6c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMjoyMjowN1rOHSuNHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMjoyMjowN1rOHSuNHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTM5MzQzNg==", "bodyText": "If we can have a crn in the response but not stackresponse, it means that the response could have other useful info in it. So I think a better solution would be to handle the possible NPE in the hasSpotTermination assignment, something like this:\nboolean hasSpotTermination = Optional.ofNullable(getResponse().getStackV4Response()) .map(stack -> stack.getInstanceGroups()) .stream() .flatMap(ig -> ig.getMetadata().stream()) .anyMatch(metadata -> InstanceStatus.DELETED_BY_PROVIDER == metadata.getInstanceStatus());\nThis way we could add the response to the report without an NPE. Also it is possible that other Investigables have this issue, please check them too.", "url": "https://github.com/hortonworks/cloudbreak/pull/9023#discussion_r489393436", "createdAt": "2020-09-16T12:22:07Z", "author": {"login": "Bajzathd"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/dto/sdx/SdxInternalTestDto.java", "diffHunk": "@@ -423,7 +423,7 @@ public SdxRepairRequest getSdxRepairRequest() {\n \n     @Override\n     public Clue investigate() {\n-        if (getResponse() == null || getResponse().getCrn() == null) {\n+        if (getResponse() == null || getResponse().getCrn() == null || getResponse().getStackV4Response() == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be0497fce84c737284161583168331a8598c7c6c"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be0497fce84c737284161583168331a8598c7c6c", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/be0497fce84c737284161583168331a8598c7c6c", "committedDate": "2020-09-16T11:59:11Z", "message": "CB-8822 npe check for sdxinternal investigate"}, "afterCommit": {"oid": "75ab91db9bb3a1ae8843944fd494a582188f2fe9", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/75ab91db9bb3a1ae8843944fd494a582188f2fe9", "committedDate": "2020-09-16T14:05:59Z", "message": "CB-8822 npe check for investigate in testdtos"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "75ab91db9bb3a1ae8843944fd494a582188f2fe9", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/75ab91db9bb3a1ae8843944fd494a582188f2fe9", "committedDate": "2020-09-16T14:05:59Z", "message": "CB-8822 npe check for investigate in testdtos"}, "afterCommit": {"oid": "ca580fe1f3b3439345a6c76ed372fbc5d750c4ab", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/ca580fe1f3b3439345a6c76ed372fbc5d750c4ab", "committedDate": "2020-09-16T14:44:05Z", "message": "CB-8822 npe check for investigate in testdtos"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NzA0MTAw", "url": "https://github.com/hortonworks/cloudbreak/pull/9023#pullrequestreview-489704100", "createdAt": "2020-09-16T14:46:47Z", "commit": {"oid": "ca580fe1f3b3439345a6c76ed372fbc5d750c4ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NzQ5MTIw", "url": "https://github.com/hortonworks/cloudbreak/pull/9023#pullrequestreview-489749120", "createdAt": "2020-09-16T15:31:34Z", "commit": {"oid": "ca580fe1f3b3439345a6c76ed372fbc5d750c4ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ca580fe1f3b3439345a6c76ed372fbc5d750c4ab", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/ca580fe1f3b3439345a6c76ed372fbc5d750c4ab", "committedDate": "2020-09-16T14:44:05Z", "message": "CB-8822 npe check for investigate in testdtos"}, "afterCommit": {"oid": "79f0beaea9d8c8c73ee9bcca6552686de39e7a4f", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/79f0beaea9d8c8c73ee9bcca6552686de39e7a4f", "committedDate": "2020-09-17T07:45:41Z", "message": "CB-8822 npe check for investigate in testdtos"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwMzM3NDQ5", "url": "https://github.com/hortonworks/cloudbreak/pull/9023#pullrequestreview-490337449", "createdAt": "2020-09-17T07:59:40Z", "commit": {"oid": "79f0beaea9d8c8c73ee9bcca6552686de39e7a4f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "79f0beaea9d8c8c73ee9bcca6552686de39e7a4f", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/79f0beaea9d8c8c73ee9bcca6552686de39e7a4f", "committedDate": "2020-09-17T07:45:41Z", "message": "CB-8822 npe check for investigate in testdtos"}, "afterCommit": {"oid": "fc7e6ac6518d930526c79a1908b01d84ce36afd3", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/fc7e6ac6518d930526c79a1908b01d84ce36afd3", "committedDate": "2020-09-17T09:20:19Z", "message": "CB-8822 npe check for investigate in testdtos"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc7e6ac6518d930526c79a1908b01d84ce36afd3", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/fc7e6ac6518d930526c79a1908b01d84ce36afd3", "committedDate": "2020-09-17T09:20:19Z", "message": "CB-8822 npe check for investigate in testdtos"}, "afterCommit": {"oid": "93429e6ceaeb8e9d6e1b9e3e4d3e692b9f6a7bdf", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/93429e6ceaeb8e9d6e1b9e3e4d3e692b9f6a7bdf", "committedDate": "2020-09-17T09:44:41Z", "message": "CB-8822 npe check for investigate in testdtos"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "93429e6ceaeb8e9d6e1b9e3e4d3e692b9f6a7bdf", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/93429e6ceaeb8e9d6e1b9e3e4d3e692b9f6a7bdf", "committedDate": "2020-09-17T09:44:41Z", "message": "CB-8822 npe check for investigate in testdtos"}, "afterCommit": {"oid": "e70fe8542d1d92af739232b527b023e89c0a34fa", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/e70fe8542d1d92af739232b527b023e89c0a34fa", "committedDate": "2020-09-17T10:28:11Z", "message": "CB-8822 npe check for investigate in testdtos"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e70fe8542d1d92af739232b527b023e89c0a34fa", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/e70fe8542d1d92af739232b527b023e89c0a34fa", "committedDate": "2020-09-17T10:28:11Z", "message": "CB-8822 npe check for investigate in testdtos"}, "afterCommit": {"oid": "851eb9dd66223071dcc64864878c97d042cd1255", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/851eb9dd66223071dcc64864878c97d042cd1255", "committedDate": "2020-09-17T11:39:05Z", "message": "CB-8822 npe check for investigate in testdtos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1bc525ff7a0a78fbad33d1cb3d1cfc26419a53b2", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/1bc525ff7a0a78fbad33d1cb3d1cfc26419a53b2", "committedDate": "2020-09-17T13:08:43Z", "message": "CB-8822 npe check for investigate in testdtos"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "851eb9dd66223071dcc64864878c97d042cd1255", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/851eb9dd66223071dcc64864878c97d042cd1255", "committedDate": "2020-09-17T11:39:05Z", "message": "CB-8822 npe check for investigate in testdtos"}, "afterCommit": {"oid": "1bc525ff7a0a78fbad33d1cb3d1cfc26419a53b2", "author": {"user": {"login": "afarsang", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/1bc525ff7a0a78fbad33d1cb3d1cfc26419a53b2", "committedDate": "2020-09-17T13:08:43Z", "message": "CB-8822 npe check for investigate in testdtos"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2342, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}