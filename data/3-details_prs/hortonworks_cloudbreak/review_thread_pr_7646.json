{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNTk0NzE4", "number": 7646, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzo0NjoyN1rODrODmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMDoxNjozN1rODsmuYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NjQ1NjU4OnYy", "diffSide": "RIGHT", "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/distrox/DistroXImageValidatorTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzo0NjoyN1rOF7bwag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzo0NjoyN1rOF7bwag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg2NTA2Ng==", "bodyText": "I think this class should not extend ImageValidatorE2ETest, since InternalSdxDistroxTests also creates DistroX cluster", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r397865066", "createdAt": "2020-03-25T13:46:27Z", "author": {"login": "horadla23"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/distrox/DistroXImageValidatorTest.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package com.sequenceiq.it.cloudbreak.testcase.e2e.distrox;\n+\n+import javax.inject.Inject;\n+\n+import org.testng.annotations.Test;\n+\n+import com.sequenceiq.it.cloudbreak.client.DistroXTestClient;\n+import com.sequenceiq.it.cloudbreak.context.Description;\n+import com.sequenceiq.it.cloudbreak.context.TestContext;\n+import com.sequenceiq.it.cloudbreak.dto.distrox.DistroXTestDto;\n+import com.sequenceiq.it.cloudbreak.testcase.e2e.ImageValidatorE2ETest;\n+\n+public class DistroXImageValidatorTest extends ImageValidatorE2ETest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb6a33c137b10c3f5712106906b000bf50eb30f2"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NjQ2MTU3OnYy", "diffSide": "LEFT", "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/sdx/InternalSdxTests.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzo0NzoyN1rOF7bzgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzo0NzoyN1rOF7bzgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg2NTg1OA==", "bodyText": "This class also should not extend ImageValidatorE2ETest, since it is not used in imagevalidation test suite", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r397865858", "createdAt": "2020-03-25T13:47:27Z", "author": {"login": "horadla23"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/sdx/InternalSdxTests.java", "diffHunk": "@@ -19,15 +19,6 @@\n     @Inject\n     private SdxTestClient sdxTestClient;\n \n-    @Override\n-    protected void setupTest(TestContext testContext) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb6a33c137b10c3f5712106906b000bf50eb30f2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NjUxMDQ2OnYy", "diffSide": "RIGHT", "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/distrox/DistroXImageValidatorTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzo1NzozMlrOF7cR7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzo1OTo0OVrOF7cZTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg3MzY0Nw==", "bodyText": "Since image validation does not use this test currently, I think you can move it back to the DistroxTests class, it does not need to be an imagevalidation test, the only class used for image validation is InternalSdxDistroxTests", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r397873647", "createdAt": "2020-03-25T13:57:32Z", "author": {"login": "horadla23"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/distrox/DistroXImageValidatorTest.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package com.sequenceiq.it.cloudbreak.testcase.e2e.distrox;\n+\n+import javax.inject.Inject;\n+\n+import org.testng.annotations.Test;\n+\n+import com.sequenceiq.it.cloudbreak.client.DistroXTestClient;\n+import com.sequenceiq.it.cloudbreak.context.Description;\n+import com.sequenceiq.it.cloudbreak.context.TestContext;\n+import com.sequenceiq.it.cloudbreak.dto.distrox.DistroXTestDto;\n+import com.sequenceiq.it.cloudbreak.testcase.e2e.ImageValidatorE2ETest;\n+\n+public class DistroXImageValidatorTest extends ImageValidatorE2ETest {\n+\n+    @Inject\n+    private DistroXTestClient distroXTestClient;\n+\n+    @Test(dataProvider = TEST_CONTEXT)\n+    @Description(\n+            given = \"there is a running cloudbreak\",\n+            when = \"a valid DistroX create request is sent\",\n+            then = \"DistroX cluster is created\")\n+    public void testCreateDistroX(TestContext testContext) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb6a33c137b10c3f5712106906b000bf50eb30f2"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg3NTUzMw==", "bodyText": "Or you can simply remove this test", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r397875533", "createdAt": "2020-03-25T13:59:49Z", "author": {"login": "horadla23"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/distrox/DistroXImageValidatorTest.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package com.sequenceiq.it.cloudbreak.testcase.e2e.distrox;\n+\n+import javax.inject.Inject;\n+\n+import org.testng.annotations.Test;\n+\n+import com.sequenceiq.it.cloudbreak.client.DistroXTestClient;\n+import com.sequenceiq.it.cloudbreak.context.Description;\n+import com.sequenceiq.it.cloudbreak.context.TestContext;\n+import com.sequenceiq.it.cloudbreak.dto.distrox.DistroXTestDto;\n+import com.sequenceiq.it.cloudbreak.testcase.e2e.ImageValidatorE2ETest;\n+\n+public class DistroXImageValidatorTest extends ImageValidatorE2ETest {\n+\n+    @Inject\n+    private DistroXTestClient distroXTestClient;\n+\n+    @Test(dataProvider = TEST_CONTEXT)\n+    @Description(\n+            given = \"there is a running cloudbreak\",\n+            when = \"a valid DistroX create request is sent\",\n+            then = \"DistroX cluster is created\")\n+    public void testCreateDistroX(TestContext testContext) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg3MzY0Nw=="}, "originalCommit": {"oid": "eb6a33c137b10c3f5712106906b000bf50eb30f2"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NDM0ODcyOnYy", "diffSide": "RIGHT", "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/sdx/InternalSdxDistroxTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwODo0NjowOVrOF8n1Zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwODo0NjowOVrOF8n1Zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTExMTUyNg==", "bodyText": "please modify class name in the image validation suites as well", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r399111526", "createdAt": "2020-03-27T08:46:09Z", "author": {"login": "horadla23"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/sdx/InternalSdxDistroxTest.java", "diffHunk": "@@ -17,23 +17,14 @@\n import com.sequenceiq.sdx.api.model.SdxClusterStatusResponse;\n import com.sequenceiq.sdx.api.model.SdxDatabaseRequest;\n \n-public class InternalSdxDistroxTests extends ImageValidatorE2ETest {\n+public class InternalSdxDistroxTest extends ImageValidatorE2ETest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "885415cc8487e160edf2ff9757a29e1dc7741cef"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NjIxMjE1OnYy", "diffSide": "RIGHT", "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/PreconditionSdxE2ETest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNjo1NTozOVrOF854Zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNjo1NTozOVrOF854Zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQwNzIwNw==", "bodyText": "I would move into sdx package, as all of its descendants are there.", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r399407207", "createdAt": "2020-03-27T16:55:39Z", "author": {"login": "gergopapi2"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/PreconditionSdxE2ETest.java", "diffHunk": "@@ -0,0 +1,112 @@\n+package com.sequenceiq.it.cloudbreak.testcase.e2e;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcf55146834e9081a1ff06f5bce0910a9c208f7e"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NjIxNjM5OnYy", "diffSide": "RIGHT", "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/ImageValidatorE2ETest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNjo1Njo0NlrOF857RQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNjo1Njo0NlrOF857RQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQwNzk0MQ==", "bodyText": "I would move the class into sdx package as its sole descendant is also there.", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r399407941", "createdAt": "2020-03-27T16:56:46Z", "author": {"login": "gergopapi2"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/ImageValidatorE2ETest.java", "diffHunk": "@@ -33,6 +33,15 @@\n     @Value(\"${integrationtest.imageValidation.sourceCatalogUrl}\")\n     private String sourceImageCatalogUrl;\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcf55146834e9081a1ff06f5bce0910a9c208f7e"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NjMxNTcxOnYy", "diffSide": "RIGHT", "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/util/wait/WaitUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNzoyMzowOVrOF866Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNzoyMzowOVrOF866Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQyNDA5OA==", "bodyText": "This method and checkDistroxInstanceState are almost identical. I would try to refactor them to have one method. I think it is only the log and exception messages that differ within method body.", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r399424098", "createdAt": "2020-03-27T17:23:09Z", "author": {"login": "gergopapi2"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/util/wait/WaitUtil.java", "diffHunk": "@@ -449,13 +451,37 @@ private boolean checkSdxInstanceState(SdxClient sdxClient, String sdxName, Strin\n         List<InstanceGroupV4Response> instanceGroups = sdxClient.getSdxClient().sdxEndpoint().getDetail(sdxName, Set.of())\n                 .getStackV4Response()\n                 .getInstanceGroups();\n-        return checkInstanceState(hostGroup, desiredState, instanceGroups);\n+        SdxClusterResponse sdxResponse = sdxClient.getSdxClient().sdxEndpoint().get(sdxName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcf55146834e9081a1ff06f5bce0910a9c208f7e"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MDk4NDAyOnYy", "diffSide": "RIGHT", "path": "integration-test/src/main/java/com/sequenceiq/it/IntegrationTestApp.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMDoxNjozN1rOF9i6Ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMDoxNjozN1rOF9i6Ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA3OTM3OQ==", "bodyText": "Is there some override for this variable?\nOr where do we get the 8 value?", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r400079379", "createdAt": "2020-03-30T10:16:37Z", "author": {"login": "lnardai"}, "path": "integration-test/src/main/java/com/sequenceiq/it/IntegrationTestApp.java", "diffHunk": "@@ -66,7 +66,7 @@\n     @Value(\"${integrationtest.threadCount:2}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bedeea3ae2ac2bacc2f423d94bc9ccb2644595ef"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2578, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}