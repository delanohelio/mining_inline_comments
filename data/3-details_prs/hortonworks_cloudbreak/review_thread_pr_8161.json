{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzOTA4NDIw", "number": 8161, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMTowOTo0MFrOEDZedA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMTowOTo0MFrOEDZedA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxOTk4NTgwOnYy", "diffSide": "RIGHT", "path": "environment/src/main/java/com/sequenceiq/environment/environment/v1/converter/EnvironmentApiConverter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMTowOTo0MFrOGgZHOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMTozNjoyMlrOGvNP9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjYxOTA2NA==", "bodyText": "what if spotPercentage is not present? the orElse(0) logic is changed here", "url": "https://github.com/hortonworks/cloudbreak/pull/8161#discussion_r436619064", "createdAt": "2020-06-08T11:09:40Z", "author": {"login": "bergerdenes"}, "path": "environment/src/main/java/com/sequenceiq/environment/environment/v1/converter/EnvironmentApiConverter.java", "diffHunk": "@@ -178,16 +177,18 @@ private ParametersDto azureParamsToParametersDto(AzureEnvironmentParameters azur\n     }\n \n     private AwsParametersDto awsParamsToAwsParameters(AwsEnvironmentParameters aws, AwsFreeIpaParameters awsFreeIpa) {\n-        return AwsParametersDto.builder()\n+        AwsParametersDto.Builder builder = AwsParametersDto.builder()\n                 .withDynamoDbTableName(Optional.ofNullable(aws)\n                         .map(AwsEnvironmentParameters::getS3guard)\n                         .map(S3GuardRequestParameters::getDynamoDbTableName)\n-                        .orElse(null))\n-                .withFreeIpaSpotPercentage(Optional.ofNullable(awsFreeIpa)\n-                        .map(AwsFreeIpaParameters::getSpot)\n-                        .map(AwsFreeIpaSpotParameters::getPercentage)\n-                        .orElse(0))\n-                .build();\n+                        .orElse(null));\n+        Optional.ofNullable(awsFreeIpa)\n+                .map(AwsFreeIpaParameters::getSpot)\n+                .ifPresent(awsFreeIpaSpotParameters -> {\n+                    builder.withFreeIpaSpotPercentage(awsFreeIpaSpotParameters.getPercentage())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb970c4b33be73c94412af9a80c7dabee77e0697"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE1MzMzNQ==", "bodyText": "null is treated as a default 0 value, so it was not necessary in the first place", "url": "https://github.com/hortonworks/cloudbreak/pull/8161#discussion_r452153335", "createdAt": "2020-07-09T11:36:22Z", "author": {"login": "Bajzathd"}, "path": "environment/src/main/java/com/sequenceiq/environment/environment/v1/converter/EnvironmentApiConverter.java", "diffHunk": "@@ -178,16 +177,18 @@ private ParametersDto azureParamsToParametersDto(AzureEnvironmentParameters azur\n     }\n \n     private AwsParametersDto awsParamsToAwsParameters(AwsEnvironmentParameters aws, AwsFreeIpaParameters awsFreeIpa) {\n-        return AwsParametersDto.builder()\n+        AwsParametersDto.Builder builder = AwsParametersDto.builder()\n                 .withDynamoDbTableName(Optional.ofNullable(aws)\n                         .map(AwsEnvironmentParameters::getS3guard)\n                         .map(S3GuardRequestParameters::getDynamoDbTableName)\n-                        .orElse(null))\n-                .withFreeIpaSpotPercentage(Optional.ofNullable(awsFreeIpa)\n-                        .map(AwsFreeIpaParameters::getSpot)\n-                        .map(AwsFreeIpaSpotParameters::getPercentage)\n-                        .orElse(0))\n-                .build();\n+                        .orElse(null));\n+        Optional.ofNullable(awsFreeIpa)\n+                .map(AwsFreeIpaParameters::getSpot)\n+                .ifPresent(awsFreeIpaSpotParameters -> {\n+                    builder.withFreeIpaSpotPercentage(awsFreeIpaSpotParameters.getPercentage())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjYxOTA2NA=="}, "originalCommit": {"oid": "cb970c4b33be73c94412af9a80c7dabee77e0697"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3253, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}