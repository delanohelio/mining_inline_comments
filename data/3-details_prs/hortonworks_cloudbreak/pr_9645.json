{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM3OTA5MTEy", "number": 9645, "title": "CB-10327 We should wait for the flow to finish by deafult. The await(\u2026", "bodyText": "\u2026) will wait until the flow finished and after that will check the status. I have alse removed the await(), awaitForFlow(), and status checker redundancy because these are very hard to maintainance.\nSee detailed description in the commit message.", "createdAt": "2020-12-12T08:27:00Z", "url": "https://github.com/hortonworks/cloudbreak/pull/9645", "merged": true, "mergeCommit": {"oid": "10136bd0068450bbedbbc9c16e361669bd6bb7af"}, "closed": true, "closedAt": "2020-12-14T17:06:09Z", "author": {"login": "topolyai5"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlaOLVgBqjQxMDM5NjY5MTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmI3OTgFqTU1MTYzMTE3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5af919853d4d11e3da3befee42276689269382a", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/b5af919853d4d11e3da3befee42276689269382a", "committedDate": "2020-12-12T08:26:10Z", "message": "CB-10327 We should wait for the flow to finish by deafult. The await() will wait until the flow finished and after that will check the status. I have alse removed the await(), awaitForFlow(), and status checker redundancy because these are very hard to maintainance."}, "afterCommit": {"oid": "29d257f32c08fc8bf13a106c9c410dc93c4ba086", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/29d257f32c08fc8bf13a106c9c410dc93c4ba086", "committedDate": "2020-12-12T10:45:06Z", "message": "ASD"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "29d257f32c08fc8bf13a106c9c410dc93c4ba086", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/29d257f32c08fc8bf13a106c9c410dc93c4ba086", "committedDate": "2020-12-12T10:45:06Z", "message": "ASD"}, "afterCommit": {"oid": "ff53ccf579d226e4a8ab41df6a64864777c8bd20", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/ff53ccf579d226e4a8ab41df6a64864777c8bd20", "committedDate": "2020-12-12T14:02:33Z", "message": "ASD"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ff53ccf579d226e4a8ab41df6a64864777c8bd20", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/ff53ccf579d226e4a8ab41df6a64864777c8bd20", "committedDate": "2020-12-12T14:02:33Z", "message": "ASD"}, "afterCommit": {"oid": "8390ecd0cf0e574eff3d783d5ec4082df8989f1a", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8390ecd0cf0e574eff3d783d5ec4082df8989f1a", "committedDate": "2020-12-12T15:28:22Z", "message": "CB-10327 We should wait for the flow to finish by deafult. The await() will wait until the flow finished and after that will check the status. I have alse removed the await(), awaitForFlow(), and status checker redundancy because these are very hard to maintainance."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8390ecd0cf0e574eff3d783d5ec4082df8989f1a", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8390ecd0cf0e574eff3d783d5ec4082df8989f1a", "committedDate": "2020-12-12T15:28:22Z", "message": "CB-10327 We should wait for the flow to finish by deafult. The await() will wait until the flow finished and after that will check the status. I have alse removed the await(), awaitForFlow(), and status checker redundancy because these are very hard to maintainance."}, "afterCommit": {"oid": "fab619a8c804844608dc1e0665e8e294ec8f702f", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/fab619a8c804844608dc1e0665e8e294ec8f702f", "committedDate": "2020-12-14T07:27:34Z", "message": "CB-10327 We should wait for the flow to finish by deafult. The await() will wait until the flow finished and after that will check the status. I have alse removed the await(), awaitForFlow(), and status checker redundancy because these are very hard to maintainance."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fab619a8c804844608dc1e0665e8e294ec8f702f", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/fab619a8c804844608dc1e0665e8e294ec8f702f", "committedDate": "2020-12-14T07:27:34Z", "message": "CB-10327 We should wait for the flow to finish by deafult. The await() will wait until the flow finished and after that will check the status. I have alse removed the await(), awaitForFlow(), and status checker redundancy because these are very hard to maintainance."}, "afterCommit": {"oid": "18c1b3703e27146d8ed9419e798c59f4603a738a", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/18c1b3703e27146d8ed9419e798c59f4603a738a", "committedDate": "2020-12-14T08:10:18Z", "message": "CB-10327 We should wait for the flow to finish by deafult. The await() will wait until the flow finished and after that will check the status. I have alse removed the await(), awaitForFlow(), and status checker redundancy because these are very hard to maintainance."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "18c1b3703e27146d8ed9419e798c59f4603a738a", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/18c1b3703e27146d8ed9419e798c59f4603a738a", "committedDate": "2020-12-14T08:10:18Z", "message": "CB-10327 We should wait for the flow to finish by deafult. The await() will wait until the flow finished and after that will check the status. I have alse removed the await(), awaitForFlow(), and status checker redundancy because these are very hard to maintainance."}, "afterCommit": {"oid": "3e2e2ee3a4568d00524e51db22636e90c644cf38", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/3e2e2ee3a4568d00524e51db22636e90c644cf38", "committedDate": "2020-12-14T10:35:48Z", "message": "CB-10327 We should wait for the flow to finish by deafult. The await() will wait until the flow finished and after that will check the status. I have alse removed the await(), awaitForFlow(), and status checker redundancy because these are very hard to maintainance."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e2e2ee3a4568d00524e51db22636e90c644cf38", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/3e2e2ee3a4568d00524e51db22636e90c644cf38", "committedDate": "2020-12-14T10:35:48Z", "message": "CB-10327 We should wait for the flow to finish by deafult. The await() will wait until the flow finished and after that will check the status. I have alse removed the await(), awaitForFlow(), and status checker redundancy because these are very hard to maintainance."}, "afterCommit": {"oid": "b0f697708b7764fe4f3ba6f27e9aeb0a3b6efb98", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/b0f697708b7764fe4f3ba6f27e9aeb0a3b6efb98", "committedDate": "2020-12-14T12:28:16Z", "message": "CB-10327 We should wait for the flow to finish by deafult. The await() will wait until the flow finished and after that will check the status. I have alse removed the await(), awaitForFlow(), and status checker redundancy because these are very hard to maintainance."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMzg5OTI2", "url": "https://github.com/hortonworks/cloudbreak/pull/9645#pullrequestreview-551389926", "createdAt": "2020-12-14T13:58:02Z", "commit": {"oid": "b0f697708b7764fe4f3ba6f27e9aeb0a3b6efb98"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMzo1ODowMlrOIFRqsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDowMzowNFrOIFR5fA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQwMzI0OQ==", "bodyText": "As far as I see we can rename this to a more general, for example WaitFailedChecker or FailedChecker, because of this is not only for CloudbreakClient or CloudbreakService", "url": "https://github.com/hortonworks/cloudbreak/pull/9645#discussion_r542403249", "createdAt": "2020-12-14T13:58:02Z", "author": {"login": "aszegedi"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/util/wait/service/CloudbreakFailedChecker.java", "diffHunk": "@@ -0,0 +1,87 @@\n+package com.sequenceiq.it.cloudbreak.util.wait.service;\n+\n+import java.util.Map;\n+\n+import javax.ws.rs.NotFoundException;\n+import javax.ws.rs.ProcessingException;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.sequenceiq.it.cloudbreak.exception.TestFailException;\n+\n+public class CloudbreakFailedChecker<T extends WaitObject> extends ExceptionChecker<T> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0f697708b7764fe4f3ba6f27e9aeb0a3b6efb98"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQwNDE3NQ==", "bodyText": "Also this can be called WaitOperationChecker or OperationChecker.", "url": "https://github.com/hortonworks/cloudbreak/pull/9645#discussion_r542404175", "createdAt": "2020-12-14T13:59:18Z", "author": {"login": "aszegedi"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/util/wait/service/CloudbreakOperationChecker.java", "diffHunk": "@@ -0,0 +1,101 @@\n+package com.sequenceiq.it.cloudbreak.util.wait.service;\n+\n+import java.util.Map;\n+\n+import javax.ws.rs.ProcessingException;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.sequenceiq.it.cloudbreak.exception.TestFailException;\n+\n+public class CloudbreakOperationChecker<T extends WaitObject> extends ExceptionChecker<T> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0f697708b7764fe4f3ba6f27e9aeb0a3b6efb98"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQwNDQ3Nw==", "bodyText": "Also this can be called WaitTerminationChecker or TerminationChecker.", "url": "https://github.com/hortonworks/cloudbreak/pull/9645#discussion_r542404477", "createdAt": "2020-12-14T13:59:42Z", "author": {"login": "aszegedi"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/util/wait/service/CloudbreakTerminationChecker.java", "diffHunk": "@@ -0,0 +1,93 @@\n+package com.sequenceiq.it.cloudbreak.util.wait.service;\n+\n+import static com.sequenceiq.cloudbreak.api.endpoint.v4.common.Status.DELETE_COMPLETED;\n+\n+import java.util.Map;\n+\n+import javax.ws.rs.NotFoundException;\n+import javax.ws.rs.ProcessingException;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.sequenceiq.it.cloudbreak.exception.TestFailException;\n+\n+public class CloudbreakTerminationChecker<T extends WaitObject> extends ExceptionChecker<T> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0f697708b7764fe4f3ba6f27e9aeb0a3b6efb98"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQwNzAzNg==", "bodyText": "What is the purpose of this, where it is going to be used?", "url": "https://github.com/hortonworks/cloudbreak/pull/9645#discussion_r542407036", "createdAt": "2020-12-14T14:03:04Z", "author": {"login": "aszegedi"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/util/wait/service/ResourceAwait.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package com.sequenceiq.it.cloudbreak.util.wait.service;\n+\n+import java.time.Duration;\n+import java.util.Map;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.stereotype.Component;\n+\n+import com.sequenceiq.it.cloudbreak.MicroserviceClient;\n+import com.sequenceiq.it.cloudbreak.context.RunningParameter;\n+import com.sequenceiq.it.cloudbreak.context.TestContext;\n+import com.sequenceiq.it.cloudbreak.dto.CloudbreakTestDto;\n+import com.sequenceiq.it.cloudbreak.log.Log;\n+import com.sequenceiq.it.cloudbreak.util.ResponseUtil;\n+\n+@Component\n+public class ResourceAwait {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0f697708b7764fe4f3ba6f27e9aeb0a3b6efb98"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15e1698f56fc0d29ce04c179d2691bd867a68b4d", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/15e1698f56fc0d29ce04c179d2691bd867a68b4d", "committedDate": "2020-12-14T14:21:58Z", "message": "CB-10327 We should wait for the flow to finish by deafult. The await() will wait until the flow finished and after that will check the status. I have alse removed the await(), awaitForFlow(), and status checker redundancy because these are very hard to maintainance."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b0f697708b7764fe4f3ba6f27e9aeb0a3b6efb98", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/b0f697708b7764fe4f3ba6f27e9aeb0a3b6efb98", "committedDate": "2020-12-14T12:28:16Z", "message": "CB-10327 We should wait for the flow to finish by deafult. The await() will wait until the flow finished and after that will check the status. I have alse removed the await(), awaitForFlow(), and status checker redundancy because these are very hard to maintainance."}, "afterCommit": {"oid": "15e1698f56fc0d29ce04c179d2691bd867a68b4d", "author": {"user": {"login": "topolyai5", "name": "Gergely Topolyai"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/15e1698f56fc0d29ce04c179d2691bd867a68b4d", "committedDate": "2020-12-14T14:21:58Z", "message": "CB-10327 We should wait for the flow to finish by deafult. The await() will wait until the flow finished and after that will check the status. I have alse removed the await(), awaitForFlow(), and status checker redundancy because these are very hard to maintainance."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxNjMxMTcx", "url": "https://github.com/hortonworks/cloudbreak/pull/9645#pullrequestreview-551631171", "createdAt": "2020-12-14T17:05:55Z", "commit": {"oid": "15e1698f56fc0d29ce04c179d2691bd867a68b4d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1986, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}