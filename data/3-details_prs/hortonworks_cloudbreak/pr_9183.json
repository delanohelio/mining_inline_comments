{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwMzExNzQw", "number": 9183, "title": "CB-8209: Adding the Cloudbreak version to the environment API.", "bodyText": "The main reason for this change is to be able to retrieve the exact Cloudbreak version used during the creation of the environment, as this will help with QE purposes.\nLet me know if I did all of this right, but essentially I tried to:\n\nAdd a new column to the environment database table for the cloudbreak version\nUpdate the existing table to include that column\nSet the cloudbreak version when the environment is first created using the info.app.version value\nHave the cloudbreak version present in the DetailedEnvironmentResponse and the EnvironmentDto classes so that it is obtained with any describe environment calls", "createdAt": "2020-10-09T03:02:14Z", "url": "https://github.com/hortonworks/cloudbreak/pull/9183", "merged": true, "mergeCommit": {"oid": "a16ef9d489df155c254805ce0d3652d4023db445"}, "closed": true, "closedAt": "2020-10-18T16:51:34Z", "author": {"login": "sxxgrc"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQtbU8ABqjM4NTgyNTg1Nzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSilX8ABqjM4NzgyNDM4Nzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0525f49b2cd046c851d66774fb44bf628dc12af6", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/0525f49b2cd046c851d66774fb44bf628dc12af6", "committedDate": "2020-10-09T02:56:52Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}, "afterCommit": {"oid": "43985d82a5c52bea6d8cfa9fa7ddc2e4d3828225", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/43985d82a5c52bea6d8cfa9fa7ddc2e4d3828225", "committedDate": "2020-10-09T03:15:18Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43985d82a5c52bea6d8cfa9fa7ddc2e4d3828225", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/43985d82a5c52bea6d8cfa9fa7ddc2e4d3828225", "committedDate": "2020-10-09T03:15:18Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}, "afterCommit": {"oid": "1b9a1f2a4ba08312304625a11b1e49f097eb3df9", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/1b9a1f2a4ba08312304625a11b1e49f097eb3df9", "committedDate": "2020-10-09T03:57:56Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1b9a1f2a4ba08312304625a11b1e49f097eb3df9", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/1b9a1f2a4ba08312304625a11b1e49f097eb3df9", "committedDate": "2020-10-09T03:57:56Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}, "afterCommit": {"oid": "8df24b8380fc47ebc3b175a4573d540a40c256d5", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8df24b8380fc47ebc3b175a4573d540a40c256d5", "committedDate": "2020-10-09T04:26:33Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NzY2MzIx", "url": "https://github.com/hortonworks/cloudbreak/pull/9183#pullrequestreview-505766321", "createdAt": "2020-10-09T15:13:13Z", "commit": {"oid": "8df24b8380fc47ebc3b175a4573d540a40c256d5"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8df24b8380fc47ebc3b175a4573d540a40c256d5", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8df24b8380fc47ebc3b175a4573d540a40c256d5", "committedDate": "2020-10-09T04:26:33Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}, "afterCommit": {"oid": "e78c7159984269ab92b4da168eb0126c98a52fcc", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/e78c7159984269ab92b4da168eb0126c98a52fcc", "committedDate": "2020-10-09T15:46:36Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e78c7159984269ab92b4da168eb0126c98a52fcc", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/e78c7159984269ab92b4da168eb0126c98a52fcc", "committedDate": "2020-10-09T15:46:36Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}, "afterCommit": {"oid": "84e2e64bf0489284ba65522dd973b62c6984f0c1", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/84e2e64bf0489284ba65522dd973b62c6984f0c1", "committedDate": "2020-10-09T16:14:39Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84e2e64bf0489284ba65522dd973b62c6984f0c1", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/84e2e64bf0489284ba65522dd973b62c6984f0c1", "committedDate": "2020-10-09T16:14:39Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}, "afterCommit": {"oid": "2d2da369b0fbe04ff4afc0f9fbb578fd51187252", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/2d2da369b0fbe04ff4afc0f9fbb578fd51187252", "committedDate": "2020-10-09T16:39:32Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2d2da369b0fbe04ff4afc0f9fbb578fd51187252", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/2d2da369b0fbe04ff4afc0f9fbb578fd51187252", "committedDate": "2020-10-09T16:39:32Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}, "afterCommit": {"oid": "3f5c98abb96bd987cd8d45d8a82fedfa13d06cf6", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/3f5c98abb96bd987cd8d45d8a82fedfa13d06cf6", "committedDate": "2020-10-09T16:56:33Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f5c98abb96bd987cd8d45d8a82fedfa13d06cf6", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/3f5c98abb96bd987cd8d45d8a82fedfa13d06cf6", "committedDate": "2020-10-09T16:56:33Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}, "afterCommit": {"oid": "4e5a61246cd0feec0a259533b104ad2b3dcf79b1", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/4e5a61246cd0feec0a259533b104ad2b3dcf79b1", "committedDate": "2020-10-09T17:33:30Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4e5a61246cd0feec0a259533b104ad2b3dcf79b1", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/4e5a61246cd0feec0a259533b104ad2b3dcf79b1", "committedDate": "2020-10-09T17:33:30Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}, "afterCommit": {"oid": "670094026acc83052d3695fbca40a6b2958f90a4", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/670094026acc83052d3695fbca40a6b2958f90a4", "committedDate": "2020-10-09T18:17:14Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "670094026acc83052d3695fbca40a6b2958f90a4", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/670094026acc83052d3695fbca40a6b2958f90a4", "committedDate": "2020-10-09T18:17:14Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}, "afterCommit": {"oid": "157c4aff1fe8b9abf813aff559e6fc103ddfeffd", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/157c4aff1fe8b9abf813aff559e6fc103ddfeffd", "committedDate": "2020-10-09T19:18:48Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "157c4aff1fe8b9abf813aff559e6fc103ddfeffd", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/157c4aff1fe8b9abf813aff559e6fc103ddfeffd", "committedDate": "2020-10-09T19:18:48Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}, "afterCommit": {"oid": "5221cb21f8259a79e4d9048c5d7642e93abdeb10", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/5221cb21f8259a79e4d9048c5d7642e93abdeb10", "committedDate": "2020-10-09T20:27:03Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5221cb21f8259a79e4d9048c5d7642e93abdeb10", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/5221cb21f8259a79e4d9048c5d7642e93abdeb10", "committedDate": "2020-10-09T20:27:03Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}, "afterCommit": {"oid": "320ff74ce91ecbd62436c935cac98c6e7cb3d104", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/320ff74ce91ecbd62436c935cac98c6e7cb3d104", "committedDate": "2020-10-09T21:03:02Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MDkxNTEx", "url": "https://github.com/hortonworks/cloudbreak/pull/9183#pullrequestreview-508091511", "createdAt": "2020-10-14T08:04:23Z", "commit": {"oid": "320ff74ce91ecbd62436c935cac98c6e7cb3d104"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MTE3OTMx", "url": "https://github.com/hortonworks/cloudbreak/pull/9183#pullrequestreview-508117931", "createdAt": "2020-10-14T08:36:34Z", "commit": {"oid": "320ff74ce91ecbd62436c935cac98c6e7cb3d104"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwODozNjozNFrOHhISOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwODozNjozNFrOHhISOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDUwMDc5NA==", "bodyText": "I think we should highlight Environment service here. I know this is overall one repo and same version for each service but we should clearly separate services", "url": "https://github.com/hortonworks/cloudbreak/pull/9183#discussion_r504500794", "createdAt": "2020-10-14T08:36:34Z", "author": {"login": "doktoric"}, "path": "environment-api/src/main/java/com/sequenceiq/environment/api/doc/environment/EnvironmentModelDescription.java", "diffHunk": "@@ -108,6 +108,8 @@\n     public static final String PROXYCONFIG_NAME = \"Name of the proxyconfig of the environment.\";\n     public static final String PROXYCONFIG_RESPONSE = \"ProxyConfig attached to the environment.\";\n \n+    public static final String CLOUDBREAK_VERSION = \"The version of the Cloudbreak build used to create the environment.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "320ff74ce91ecbd62436c935cac98c6e7cb3d104"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MTE4MzYz", "url": "https://github.com/hortonworks/cloudbreak/pull/9183#pullrequestreview-508118363", "createdAt": "2020-10-14T08:37:02Z", "commit": {"oid": "320ff74ce91ecbd62436c935cac98c6e7cb3d104"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwODozNzowMlrOHhITZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwODozNzowMlrOHhITZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDUwMTA5Mw==", "bodyText": "environmentServiceVersion would be better I think", "url": "https://github.com/hortonworks/cloudbreak/pull/9183#discussion_r504501093", "createdAt": "2020-10-14T08:37:02Z", "author": {"login": "doktoric"}, "path": "environment-api/src/main/java/com/sequenceiq/environment/api/v1/environment/model/request/EnvironmentRequest.java", "diffHunk": "@@ -272,6 +275,14 @@ public void setRegions(Set<String> regions) {\n         this.regions = regions == null ? new HashSet<>() : regions;\n     }\n \n+    public String getCloudbreakVersion() {\n+        return cloudbreakVersion;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "320ff74ce91ecbd62436c935cac98c6e7cb3d104"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MTE4ODA0", "url": "https://github.com/hortonworks/cloudbreak/pull/9183#pullrequestreview-508118804", "createdAt": "2020-10-14T08:37:35Z", "commit": {"oid": "320ff74ce91ecbd62436c935cac98c6e7cb3d104"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwODozNzozNVrOHhIU1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwODozNzozNVrOHhIU1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDUwMTQ2MA==", "bodyText": "EnvironmentServiceVersion", "url": "https://github.com/hortonworks/cloudbreak/pull/9183#discussion_r504501460", "createdAt": "2020-10-14T08:37:35Z", "author": {"login": "doktoric"}, "path": "environment/src/main/java/com/sequenceiq/environment/environment/service/EnvironmentCreationService.java", "diffHunk": "@@ -52,6 +53,9 @@\n \n     private final EntitlementService entitlementService;\n \n+    @Value(\"${info.app.version}\")\n+    private String cloudbreakVersion;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "320ff74ce91ecbd62436c935cac98c6e7cb3d104"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "320ff74ce91ecbd62436c935cac98c6e7cb3d104", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/320ff74ce91ecbd62436c935cac98c6e7cb3d104", "committedDate": "2020-10-09T21:03:02Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}, "afterCommit": {"oid": "4f1bac7cf7459600d25719dbc5fc65048d4d533b", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/4f1bac7cf7459600d25719dbc5fc65048d4d533b", "committedDate": "2020-10-14T18:16:25Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "484e2e0f65ad38248cc68a9a0f780e1927893d06", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/484e2e0f65ad38248cc68a9a0f780e1927893d06", "committedDate": "2020-10-14T19:45:12Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4f1bac7cf7459600d25719dbc5fc65048d4d533b", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/4f1bac7cf7459600d25719dbc5fc65048d4d533b", "committedDate": "2020-10-14T18:16:25Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}, "afterCommit": {"oid": "484e2e0f65ad38248cc68a9a0f780e1927893d06", "author": {"user": {"login": "sxxgrc", "name": "Santiago Garcia Acosta"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/484e2e0f65ad38248cc68a9a0f780e1927893d06", "committedDate": "2020-10-14T19:45:12Z", "message": "CB-8209: Adding the Cloudbreak version to the environment API so it can be retrieved by Thunderhead/CDP CLI calls."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2136, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}