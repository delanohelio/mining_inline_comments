{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1NTE3NjI0", "number": 9111, "title": "CB-9061 Accounttag validation should check existing expressions", "bodyText": "See detailed description in the commit message.", "createdAt": "2020-09-30T13:39:28Z", "url": "https://github.com/hortonworks/cloudbreak/pull/9111", "merged": true, "mergeCommit": {"oid": "7b3259bb2d714e15c69d5f3f0362ce1037843fc2"}, "closed": true, "closedAt": "2020-10-01T06:39:46Z", "author": {"login": "doktoric"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdN-LANgFqTQ5OTUzMDI3MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOLjOEAFqTUwMDA0NTM1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NTMwMjcx", "url": "https://github.com/hortonworks/cloudbreak/pull/9111#pullrequestreview-499530271", "createdAt": "2020-09-30T15:03:39Z", "commit": {"oid": "1aff5f96d272778268a04892a11519b8e4aa5475"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNTowMzo0MFrOHaiFnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNTowNDowOFrOHaiHHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzU4MzUxOQ==", "bodyText": "isAccountTagContainsTemplate(accountTag.getTagKey()) && isAccountTagInvalid(accountTag.getTagKey()) is the same", "url": "https://github.com/hortonworks/cloudbreak/pull/9111#discussion_r497583519", "createdAt": "2020-09-30T15:03:40Z", "author": {"login": "topolyai5"}, "path": "environment/src/main/java/com/sequenceiq/environment/tags/service/DefaultInternalAccountTagService.java", "diffHunk": "@@ -100,6 +101,30 @@ public void validate(List<AccountTag> accountTags) {\n                 throw new BadRequestException(\n                         String.format(\"The value '%s' can only can not start with microsoft or azure or aws or windows or space\", accountTag.getTagValue()));\n             }\n+            if (isAccountTagContainsTemplate(accountTag.getTagKey())) {\n+                if (isAccountTagInvalid(accountTag.getTagKey())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1aff5f96d272778268a04892a11519b8e4aa5475"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzU4MzkwMw==", "bodyText": "same like the prev same", "url": "https://github.com/hortonworks/cloudbreak/pull/9111#discussion_r497583903", "createdAt": "2020-09-30T15:04:08Z", "author": {"login": "topolyai5"}, "path": "environment/src/main/java/com/sequenceiq/environment/tags/service/DefaultInternalAccountTagService.java", "diffHunk": "@@ -100,6 +101,30 @@ public void validate(List<AccountTag> accountTags) {\n                 throw new BadRequestException(\n                         String.format(\"The value '%s' can only can not start with microsoft or azure or aws or windows or space\", accountTag.getTagValue()));\n             }\n+            if (isAccountTagContainsTemplate(accountTag.getTagKey())) {\n+                if (isAccountTagInvalid(accountTag.getTagKey())) {\n+                    throw new BadRequestException(\n+                            String.format(\"The key '%s' of the tag contains invalid templates\", accountTag.getTagKey()));\n+                }\n+            }\n+            if (isAccountTagContainsTemplate(accountTag.getTagValue())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1aff5f96d272778268a04892a11519b8e4aa5475"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ae42aa37d73acf5b38f206c91f20aab2974b7c2", "author": {"user": {"login": "doktoric", "name": "Richard Doktorics"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/2ae42aa37d73acf5b38f206c91f20aab2974b7c2", "committedDate": "2020-09-30T20:21:20Z", "message": "CB-9061 Accounttag validation should check existing expressions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1aff5f96d272778268a04892a11519b8e4aa5475", "author": {"user": {"login": "doktoric", "name": "Richard Doktorics"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/1aff5f96d272778268a04892a11519b8e4aa5475", "committedDate": "2020-09-30T13:38:42Z", "message": "CB-9061 Accounttag validation should check existing expressions"}, "afterCommit": {"oid": "2ae42aa37d73acf5b38f206c91f20aab2974b7c2", "author": {"user": {"login": "doktoric", "name": "Richard Doktorics"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/2ae42aa37d73acf5b38f206c91f20aab2974b7c2", "committedDate": "2020-09-30T20:21:20Z", "message": "CB-9061 Accounttag validation should check existing expressions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMDQ1MzUy", "url": "https://github.com/hortonworks/cloudbreak/pull/9111#pullrequestreview-500045352", "createdAt": "2020-10-01T06:39:36Z", "commit": {"oid": "2ae42aa37d73acf5b38f206c91f20aab2974b7c2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2261, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}