{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMTg4NTg1", "number": 7255, "title": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)", "bodyText": "Anonymization rules skeleton if the anonymization rules is defined on UMS account side (that part gives back null)\nNotes:\n\nUMS is not supporting this option yet, so the method always gives back null\nAs anonymization rules field is empty it will be missing from the salt config, so technicallly this change won't do anything until UMS side is not implemented (but i have tried out this by manually set the objects and set it through salt)\nIf UMS side is done, only change here will be to transform the UMS response to our object format (that can be done in UMS client, as it was done for Altus credential - if that happens, maybe the model can be moved to auth-connector...but for know it's good at its actual place as that is related with telemetry)\nmaybe later makes sense to persist the rules for DataLake/DataHub/FreeIPA, just to show how the cluster was deployed", "createdAt": "2020-02-10T15:11:40Z", "url": "https://github.com/hortonworks/cloudbreak/pull/7255", "merged": true, "mergeCommit": {"oid": "e5d41d30364645abc439fb32bdcf510f52020759"}, "closed": true, "closedAt": "2020-02-13T16:50:12Z", "author": {"login": "oleewere"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcC_rJugBqjMwMjM0MTc1NjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcD9viJgFqTM1ODM3NzQzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60043c3a09b820a0f13ee7664126e0d1aec40767", "author": {"user": {"login": "oleewere", "name": "Oliv\u00e9r Szabo"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/60043c3a09b820a0f13ee7664126e0d1aec40767", "committedDate": "2020-02-10T15:04:47Z", "message": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)"}, "afterCommit": {"oid": "af1b92150186ff709074edd082a226ef0cb4d39b", "author": {"user": {"login": "oleewere", "name": "Oliv\u00e9r Szabo"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/af1b92150186ff709074edd082a226ef0cb4d39b", "committedDate": "2020-02-10T16:23:55Z", "message": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af1b92150186ff709074edd082a226ef0cb4d39b", "author": {"user": {"login": "oleewere", "name": "Oliv\u00e9r Szabo"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/af1b92150186ff709074edd082a226ef0cb4d39b", "committedDate": "2020-02-10T16:23:55Z", "message": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)"}, "afterCommit": {"oid": "c9b8d748f82e671a520b49f572f82eae556298b6", "author": {"user": {"login": "oleewere", "name": "Oliv\u00e9r Szabo"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/c9b8d748f82e671a520b49f572f82eae556298b6", "committedDate": "2020-02-12T14:32:18Z", "message": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MDM3Mzk1", "url": "https://github.com/hortonworks/cloudbreak/pull/7255#pullrequestreview-358037395", "createdAt": "2020-02-13T08:44:29Z", "commit": {"oid": "c9b8d748f82e671a520b49f572f82eae556298b6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwODo0NDozMFrOFpLK4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwODo0NDozMFrOFpLK4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODcxODk0NA==", "bodyText": "The method should be returned with an empty list, we should avoid the unnecessary NPE", "url": "https://github.com/hortonworks/cloudbreak/pull/7255#discussion_r378718944", "createdAt": "2020-02-13T08:44:30Z", "author": {"login": "topolyai5"}, "path": "auth-connector/src/main/java/com/sequenceiq/cloudbreak/auth/altus/GrpcUmsClient.java", "diffHunk": "@@ -453,6 +454,18 @@ public void deleteMachineUserAccessKeys(String actorCrn, String machineUserCrn,\n         }\n     }\n \n+    /**\n+     * Gather anonymization rules for a specific account\n+     * NOTE: not supported yet on UMS side\n+     * @param accountId account that owns the anonymization rules\n+     * @param actorCrn actor that requests to gather the anonymization rules\n+     * @return a list of anonymization rules for an UMS account\n+     */\n+    public List<AnonymizationRule> getAnonymizationRules(String accountId, String actorCrn) {\n+        LOGGER.debug(\"Try getting anonymization rules for {} by {}\", accountId, actorCrn);\n+        return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9b8d748f82e671a520b49f572f82eae556298b6"}, "originalPosition": 21}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9b8d748f82e671a520b49f572f82eae556298b6", "author": {"user": {"login": "oleewere", "name": "Oliv\u00e9r Szabo"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/c9b8d748f82e671a520b49f572f82eae556298b6", "committedDate": "2020-02-12T14:32:18Z", "message": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)"}, "afterCommit": {"oid": "74d87bad1b2c428984b375c8b04b48b7300f95d6", "author": {"user": {"login": "oleewere", "name": "Oliv\u00e9r Szabo"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/74d87bad1b2c428984b375c8b04b48b7300f95d6", "committedDate": "2020-02-13T09:11:04Z", "message": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01b974446c0116b8eb21e2a9fb410b9a7e8220ef", "author": {"user": {"login": "oleewere", "name": "Oliv\u00e9r Szabo"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/01b974446c0116b8eb21e2a9fb410b9a7e8220ef", "committedDate": "2020-02-13T13:39:25Z", "message": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "74d87bad1b2c428984b375c8b04b48b7300f95d6", "author": {"user": {"login": "oleewere", "name": "Oliv\u00e9r Szabo"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/74d87bad1b2c428984b375c8b04b48b7300f95d6", "committedDate": "2020-02-13T09:11:04Z", "message": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)"}, "afterCommit": {"oid": "01b974446c0116b8eb21e2a9fb410b9a7e8220ef", "author": {"user": {"login": "oleewere", "name": "Oliv\u00e9r Szabo"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/01b974446c0116b8eb21e2a9fb410b9a7e8220ef", "committedDate": "2020-02-13T13:39:25Z", "message": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4Mzc3NDMz", "url": "https://github.com/hortonworks/cloudbreak/pull/7255#pullrequestreview-358377433", "createdAt": "2020-02-13T16:43:59Z", "commit": {"oid": "01b974446c0116b8eb21e2a9fb410b9a7e8220ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1855, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}