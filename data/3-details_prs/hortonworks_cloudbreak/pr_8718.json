{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzMzA2NTc5", "number": 8718, "title": "DISTX-527 Cleanup unused code based on CM Based Autoscaling.", "bodyText": "Removed code related to StackCollectorService,ClusterCreationEvaluator which has been replaced with ClusterSyncOnDemand.\nRemoved ClusterManagerHostHealthMonitor since Cluster Health Status is now being synced based on CB Cluster Status.\nRemoved FailedNode related code since monitoring failed nodes has been moved out of Periscope.\nRemoved unused clusterId based endpoints since clusterId based api will not be supported. And also since all endpoints are expected to be integrated with UMS Authorization which does not support local db-id based authorization.\nRemoved MetricsAlert and PrometheusAlerts related code since they are not supported and are also linked with Ambari Definition  and Ambari support for these alerts. If they are supported in future in CM, the structure, CM Integratation API and monitoring mechanism will differ. This also improve query performance since loading Cluster joins additional two tables related to metrics and prometheusalerts even though they are not supported.\n\nSee detailed description in the commit message.", "createdAt": "2020-08-05T10:55:13Z", "url": "https://github.com/hortonworks/cloudbreak/pull/8718", "merged": true, "mergeCommit": {"oid": "74f4a7eb2ef256bd852de1589639a794258c2ff0"}, "closed": true, "closedAt": "2020-08-06T06:49:17Z", "author": {"login": "smaniraju"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc75EqrAFqTQ2MTU1MzIzNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8Hpd5AFqTQ2MjE2OTkxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNTUzMjM1", "url": "https://github.com/hortonworks/cloudbreak/pull/8718#pullrequestreview-461553235", "createdAt": "2020-08-05T10:57:17Z", "commit": {"oid": "a2fe3d91c222ec3221934c02ca4e962eb513ad95"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxMDo1NzoxN1rOG8Ejcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxMDo1NzoxN1rOG8Ejcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTY0MjM1NA==", "bodyText": "This endpoint is used in periscope service related metrics unittest, hence not removed.", "url": "https://github.com/hortonworks/cloudbreak/pull/8718#discussion_r465642354", "createdAt": "2020-08-05T10:57:17Z", "author": {"login": "smaniraju"}, "path": "autoscale-api/src/main/java/com/sequenceiq/periscope/api/endpoint/v2/AutoScaleClusterV2Endpoint.java", "diffHunk": "@@ -18,9 +18,13 @@\n import io.swagger.annotations.Api;\n import io.swagger.annotations.ApiOperation;\n \n+/**\n+ * @deprecated Database ID based endpoints are deprecated for removal.\n+ */\n @Path(\"/v2/clusters\")\n @Consumes(MediaType.APPLICATION_JSON)\n @Api(hidden = true, value = \"/v2/clusters\", description = CLUSTERS_DESCRIPTION, protocols = \"http,https\", consumes = MediaType.APPLICATION_JSON)\n+@Deprecated(since = \"CB 2.26.0\", forRemoval = true)\n public interface AutoScaleClusterV2Endpoint {\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2fe3d91c222ec3221934c02ca4e962eb513ad95"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "685cc229a00812f1715f0cd872678246e5213a1d", "author": {"user": {"login": "smaniraju", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/685cc229a00812f1715f0cd872678246e5213a1d", "committedDate": "2020-08-05T12:11:16Z", "message": "DISTX-527 Cleanup unused code based on CM\\Yarn Based Autoscaling.\n1. Removed code related to StackCollectorService,ClusterCreationEvaluator which has been replaced with ClusterSyncOnDemand.\n2. Removed ClusterManagerHostHealthMonitor since Cluster Health Status is now being synced based on CB Cluster Status.\n3. Removed FailedNode related code since monitoring failed nodes has been moved out of Periscope.\n4. Removed unused clusterId based endpoints since clusterId based api will not be supported. And also since all endpoints are expected\nto be integrated with UMS Authorization which does not support local db-id based authorization.\n5. Removed MetricsAlert and PrometheusAlerts related code since they are not supported and are also linked with Ambari Definition  and Ambari support for these alerts. If they are supported in future in CM, the structure, CM Integratation API and monitoring mechanism will differ."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a2fe3d91c222ec3221934c02ca4e962eb513ad95", "author": {"user": {"login": "smaniraju", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/a2fe3d91c222ec3221934c02ca4e962eb513ad95", "committedDate": "2020-08-04T10:26:57Z", "message": "DISTX-527 Cleanup unused code based on CM\\Yarn Based Autoscaling.\n1. Removed code related to StackCollectorService,ClusterCreationEvaluator which has been replaced with ClusterSyncOnDemand.\n2. Removed ClusterManagerHostHealthMonitor since Cluster Health Status is now being synced based on CB Cluster Status.\n3. Removed FailedNode related code since monitoring failed nodes has been moved out of Periscope.\n4. Removed unused clusterId based endpoints since clusterId based api will not be supported. And also since all endpoints are expected\nto be integrated with UMS Authorization which does not support local db-id based authorization.\n5. Removed MetricsAlert and PrometheusAlerts related code since they are not supported and are also linked with Ambari Definition  and Ambari support for these alerts. If they are supported in future in CM, the structure, CM Integratation API and monitoring mechanism will differ."}, "afterCommit": {"oid": "685cc229a00812f1715f0cd872678246e5213a1d", "author": {"user": {"login": "smaniraju", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/685cc229a00812f1715f0cd872678246e5213a1d", "committedDate": "2020-08-05T12:11:16Z", "message": "DISTX-527 Cleanup unused code based on CM\\Yarn Based Autoscaling.\n1. Removed code related to StackCollectorService,ClusterCreationEvaluator which has been replaced with ClusterSyncOnDemand.\n2. Removed ClusterManagerHostHealthMonitor since Cluster Health Status is now being synced based on CB Cluster Status.\n3. Removed FailedNode related code since monitoring failed nodes has been moved out of Periscope.\n4. Removed unused clusterId based endpoints since clusterId based api will not be supported. And also since all endpoints are expected\nto be integrated with UMS Authorization which does not support local db-id based authorization.\n5. Removed MetricsAlert and PrometheusAlerts related code since they are not supported and are also linked with Ambari Definition  and Ambari support for these alerts. If they are supported in future in CM, the structure, CM Integratation API and monitoring mechanism will differ."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMTY5OTE1", "url": "https://github.com/hortonworks/cloudbreak/pull/8718#pullrequestreview-462169915", "createdAt": "2020-08-06T03:56:10Z", "commit": {"oid": "685cc229a00812f1715f0cd872678246e5213a1d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2547, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}