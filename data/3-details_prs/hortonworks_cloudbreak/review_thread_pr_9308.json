{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExMzUyNzYz", "number": 9308, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMjowODozNVrOEyx-UQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMjowOTo1MlrOEyyAIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNjgzMDI1OnYy", "diffSide": "RIGHT", "path": "core-api/src/main/java/com/sequenceiq/cloudbreak/api/endpoint/v4/stacks/base/parameter/template/AwsInstanceTemplateV4Parameters.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMjowODozNlrOHpm7og==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwOToyNzoxOFrOHqTLaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5MTUyMg==", "bodyText": "else branch should be great here which maps to none", "url": "https://github.com/hortonworks/cloudbreak/pull/9308#discussion_r513391522", "createdAt": "2020-10-28T12:08:36Z", "author": {"login": "doktoric"}, "path": "core-api/src/main/java/com/sequenceiq/cloudbreak/api/endpoint/v4/stacks/base/parameter/template/AwsInstanceTemplateV4Parameters.java", "diffHunk": "@@ -99,5 +115,11 @@ public void parse(Map<String, Object> parameters) {\n         if (type != null) {\n             encryption.setType(EncryptionType.valueOf(type));\n         }\n+\n+        String placementGroupStrategy = getParameterOrNull(parameters, AwsInstanceTemplate.PLACEMENT_GROUP_STRATEGY);\n+        if (placementGroupStrategy != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dab2ca293760add9f0ba6ea0015f0537482d3497"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDExNjQ1Nw==", "bodyText": "ok", "url": "https://github.com/hortonworks/cloudbreak/pull/9308#discussion_r514116457", "createdAt": "2020-10-29T09:27:18Z", "author": {"login": "smaniraju"}, "path": "core-api/src/main/java/com/sequenceiq/cloudbreak/api/endpoint/v4/stacks/base/parameter/template/AwsInstanceTemplateV4Parameters.java", "diffHunk": "@@ -99,5 +115,11 @@ public void parse(Map<String, Object> parameters) {\n         if (type != null) {\n             encryption.setType(EncryptionType.valueOf(type));\n         }\n+\n+        String placementGroupStrategy = getParameterOrNull(parameters, AwsInstanceTemplate.PLACEMENT_GROUP_STRATEGY);\n+        if (placementGroupStrategy != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5MTUyMg=="}, "originalCommit": {"oid": "dab2ca293760add9f0ba6ea0015f0537482d3497"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNjgzMTM5OnYy", "diffSide": "RIGHT", "path": "core-api/src/main/java/com/sequenceiq/cloudbreak/api/endpoint/v4/stacks/base/parameter/template/AwsInstanceTemplateV4Parameters.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMjowODo1NVrOHpm8Sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwOToyNjo1NVrOHqTKcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5MTY5MA==", "bodyText": "if null put none into the map", "url": "https://github.com/hortonworks/cloudbreak/pull/9308#discussion_r513391690", "createdAt": "2020-10-28T12:08:55Z", "author": {"login": "doktoric"}, "path": "core-api/src/main/java/com/sequenceiq/cloudbreak/api/endpoint/v4/stacks/base/parameter/template/AwsInstanceTemplateV4Parameters.java", "diffHunk": "@@ -60,6 +73,9 @@ public void setEncryption(AwsEncryptionV4Parameters encryption) {\n             putIfValueNotNull(map, InstanceTemplate.VOLUME_ENCRYPTION_KEY_TYPE, encryption.getType());\n             putIfValueNotNull(map, AwsInstanceTemplate.EBS_ENCRYPTION_ENABLED, encryption.getType() != EncryptionType.NONE);\n         }\n+        if (placementGroup != null) {\n+            putIfValueNotNull(map, AwsInstanceTemplate.PLACEMENT_GROUP_STRATEGY, placementGroup.getStrategy().name());\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dab2ca293760add9f0ba6ea0015f0537482d3497"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDExNjIwOQ==", "bodyText": "ok", "url": "https://github.com/hortonworks/cloudbreak/pull/9308#discussion_r514116209", "createdAt": "2020-10-29T09:26:55Z", "author": {"login": "smaniraju"}, "path": "core-api/src/main/java/com/sequenceiq/cloudbreak/api/endpoint/v4/stacks/base/parameter/template/AwsInstanceTemplateV4Parameters.java", "diffHunk": "@@ -60,6 +73,9 @@ public void setEncryption(AwsEncryptionV4Parameters encryption) {\n             putIfValueNotNull(map, InstanceTemplate.VOLUME_ENCRYPTION_KEY_TYPE, encryption.getType());\n             putIfValueNotNull(map, AwsInstanceTemplate.EBS_ENCRYPTION_ENABLED, encryption.getType() != EncryptionType.NONE);\n         }\n+        if (placementGroup != null) {\n+            putIfValueNotNull(map, AwsInstanceTemplate.PLACEMENT_GROUP_STRATEGY, placementGroup.getStrategy().name());\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5MTY5MA=="}, "originalCommit": {"oid": "dab2ca293760add9f0ba6ea0015f0537482d3497"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNjgzMjk5OnYy", "diffSide": "RIGHT", "path": "cloud-aws/src/main/resources/templates/aws-cf-stack.ftl", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMjowOToxOVrOHpm9Qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwOToyNjozM1rOHqTJeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5MTkzOQ==", "bodyText": "why we dont put lower in the java code side ?", "url": "https://github.com/hortonworks/cloudbreak/pull/9308#discussion_r513391939", "createdAt": "2020-10-28T12:09:19Z", "author": {"login": "doktoric"}, "path": "cloud-aws/src/main/resources/templates/aws-cf-stack.ftl", "diffHunk": "@@ -384,6 +387,15 @@\n       }\n     }\n \n+    <#if group.placementGroupStrategy?has_content && group.placementGroupStrategy != \"NONE\">,\n+    \"PlacementGroup${group.groupName?replace('_', '')}\" : {\n+\t  \"Type\" : \"AWS::EC2::PlacementGroup\",\n+      \"Properties\" : {\n+        \"Strategy\" : \"${group.placementGroupStrategy?lower_case}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dab2ca293760add9f0ba6ea0015f0537482d3497"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDExNTk2Mg==", "bodyText": "ok", "url": "https://github.com/hortonworks/cloudbreak/pull/9308#discussion_r514115962", "createdAt": "2020-10-29T09:26:33Z", "author": {"login": "smaniraju"}, "path": "cloud-aws/src/main/resources/templates/aws-cf-stack.ftl", "diffHunk": "@@ -384,6 +387,15 @@\n       }\n     }\n \n+    <#if group.placementGroupStrategy?has_content && group.placementGroupStrategy != \"NONE\">,\n+    \"PlacementGroup${group.groupName?replace('_', '')}\" : {\n+\t  \"Type\" : \"AWS::EC2::PlacementGroup\",\n+      \"Properties\" : {\n+        \"Strategy\" : \"${group.placementGroupStrategy?lower_case}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5MTkzOQ=="}, "originalCommit": {"oid": "dab2ca293760add9f0ba6ea0015f0537482d3497"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNjgzNDkwOnYy", "diffSide": "RIGHT", "path": "cloud-aws/src/main/resources/templates/aws-cf-stack.ftl", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMjowOTo1MlrOHpm-bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwOTozNDoyNVrOHqTdgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5MjIzNw==", "bodyText": "use placementgroupname  here and generate in java code", "url": "https://github.com/hortonworks/cloudbreak/pull/9308#discussion_r513392237", "createdAt": "2020-10-28T12:09:52Z", "author": {"login": "doktoric"}, "path": "cloud-aws/src/main/resources/templates/aws-cf-stack.ftl", "diffHunk": "@@ -368,6 +368,9 @@\n           </#if>\n           \"InstanceType\"   : \"${group.flavor}\",\n           \"KeyName\"        : { \"Ref\" : \"KeyName\" },\n+          <#if group.placementGroupStrategy?has_content && group.placementGroupStrategy != \"NONE\">\n+          \"Placement\" : { \"GroupName\" : { \"Ref\" : \"PlacementGroup${group.groupName?replace('_', '')}\" } },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dab2ca293760add9f0ba6ea0015f0537482d3497"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDEyMTA4OA==", "bodyText": "ok", "url": "https://github.com/hortonworks/cloudbreak/pull/9308#discussion_r514121088", "createdAt": "2020-10-29T09:34:25Z", "author": {"login": "smaniraju"}, "path": "cloud-aws/src/main/resources/templates/aws-cf-stack.ftl", "diffHunk": "@@ -368,6 +368,9 @@\n           </#if>\n           \"InstanceType\"   : \"${group.flavor}\",\n           \"KeyName\"        : { \"Ref\" : \"KeyName\" },\n+          <#if group.placementGroupStrategy?has_content && group.placementGroupStrategy != \"NONE\">\n+          \"Placement\" : { \"GroupName\" : { \"Ref\" : \"PlacementGroup${group.groupName?replace('_', '')}\" } },", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5MjIzNw=="}, "originalCommit": {"oid": "dab2ca293760add9f0ba6ea0015f0537482d3497"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2062, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}