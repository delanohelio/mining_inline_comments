{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4NTEwMzYw", "number": 8544, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMzoxMzozMlrOEOCReA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwNzo0Mjo1OFrOEOJIBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMTUyNzYwOnYy", "diffSide": "RIGHT", "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/user/UserSyncService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMzoxMzozMlrOGw956w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNjowMDo1MVrOGxaa6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk5OTA4Mw==", "bodyText": "Is there a request ID in this context? If there is, is it included in the message? Maybe add the operation ID?", "url": "https://github.com/hortonworks/cloudbreak/pull/8544#discussion_r453999083", "createdAt": "2020-07-13T23:13:32Z", "author": {"login": "giladwolff"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/user/UserSyncService.java", "diffHunk": "@@ -208,8 +208,10 @@ private void internalSynchronizeUsers(String operationId, String accountId, Stri\n                     umsEventGenerationIdsProvider.getEventGenerationIds(accountId, requestId) :\n                     null;\n \n+            LOGGER.debug(\"Starting RETRIEVE_{}_UMS_STATE for environments {} ...\", fullSync ? \"FULL\" : \"PARTIAL\", environmentCrns);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d791df24f2daf7eb978b554e6f37a987b7ad9fd5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQ2NjI4Mg==", "bodyText": "the request id and operation id (exposed as \"flow\") are part of the MDC.\n2020-07-13 14:42:58,291 [usersyncExecutor-1] lambda$internalSynchronizeUsers$7:204 DEBUG c.s.f.s.f.u.UserSyncService - [instance:default] [type:springLog] [crn:] [name:] [flow:ab77043f-84e5-49d1-9e57-fa27e8393a9f] [requestid:2bc3eed0-77ff-4ab2-b5a2-2ce4fd17da4c] [tenant:] [userCrn:] [environment:] [traceId:] [spanId:] Starting RETRIEVE_FULL_UMS_STATE for environments [crn:cdp:environments:us-west-1:foo:environment:8813ff3f-b25b-40f8-9999-569804d48396] ...", "url": "https://github.com/hortonworks/cloudbreak/pull/8544#discussion_r454466282", "createdAt": "2020-07-14T16:00:51Z", "author": {"login": "handavid"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/user/UserSyncService.java", "diffHunk": "@@ -208,8 +208,10 @@ private void internalSynchronizeUsers(String operationId, String accountId, Stri\n                     umsEventGenerationIdsProvider.getEventGenerationIds(accountId, requestId) :\n                     null;\n \n+            LOGGER.debug(\"Starting RETRIEVE_{}_UMS_STATE for environments {} ...\", fullSync ? \"FULL\" : \"PARTIAL\", environmentCrns);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk5OTA4Mw=="}, "originalCommit": {"oid": "d791df24f2daf7eb978b554e6f37a987b7ad9fd5"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMTUyNzg4OnYy", "diffSide": "RIGHT", "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/user/UserSyncService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMzoxMzo0MlrOGw96Fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMzoxMzo0MlrOGw96Fw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk5OTEyNw==", "bodyText": "and here?", "url": "https://github.com/hortonworks/cloudbreak/pull/8544#discussion_r453999127", "createdAt": "2020-07-13T23:13:42Z", "author": {"login": "giladwolff"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/user/UserSyncService.java", "diffHunk": "@@ -208,8 +208,10 @@ private void internalSynchronizeUsers(String operationId, String accountId, Stri\n                     umsEventGenerationIdsProvider.getEventGenerationIds(accountId, requestId) :\n                     null;\n \n+            LOGGER.debug(\"Starting RETRIEVE_{}_UMS_STATE for environments {} ...\", fullSync ? \"FULL\" : \"PARTIAL\", environmentCrns);\n             Map<String, UmsUsersState> envToUmsStateMap = umsUsersStateProvider\n                     .getEnvToUmsUsersStateMap(accountId, actorCrn, environmentCrns, userCrnFilter, machineUserCrnFilter, requestId);\n+            LOGGER.debug(\"Finished RETRIEVE_{}_UMS_STATE.\", fullSync ? \"FULL\" : \"PARTIAL\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d791df24f2daf7eb978b554e6f37a987b7ad9fd5"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMjY1MDMwOnYy", "diffSide": "RIGHT", "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/user/UserSyncService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwNzo0Mjo1OFrOGxIF1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwNzo0Mjo1OFrOGxIF1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE2NTk3Mw==", "bodyText": "this FULL vs PARTIAL is duplicated. maybe it should be move to a variable or a method", "url": "https://github.com/hortonworks/cloudbreak/pull/8544#discussion_r454165973", "createdAt": "2020-07-14T07:42:58Z", "author": {"login": "lacikaaa"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/user/UserSyncService.java", "diffHunk": "@@ -276,18 +278,26 @@ private SyncStatusDetail internalSynchronizeStack(Stack stack, UmsUsersState ums\n         Multimap<String, String> warnings = ArrayListMultimap.create();\n         try {\n             FreeIpaClient freeIpaClient = freeIpaClientFactory.getFreeIpaClientForStack(stack);\n+            LOGGER.debug(\"Starting RETRIEVE_{}_IPA_STATE ...\", fullSync ? \"FULL\" : \"PARTIAL\");\n             UsersState ipaUsersState = getIpaUserState(freeIpaClient, umsUsersState, fullSync);\n-            LOGGER.debug(\"IPA UsersState, found {} users and {} groups\", ipaUsersState.getUsers().size(), ipaUsersState.getGroups().size());\n+            LOGGER.debug(\"Finished RETRIEVE_{}_IPA_STATE, found {} users and {} groups.\", fullSync ? \"FULL\" : \"PARTIAL\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d791df24f2daf7eb978b554e6f37a987b7ad9fd5"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3142, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}