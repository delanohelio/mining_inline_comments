{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5MzI4OTI1", "number": 8555, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwODozMzo1OVrOEOlW2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwODozMzo1OVrOEOlW2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNzI3NTc2OnYy", "diffSide": "RIGHT", "path": "datalake/src/main/java/com/sequenceiq/datalake/cm/ClouderaManagerRangerUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwODozMzo1OVrOGxz9iQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwODozMzo1OVrOGxz9iQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg4NDc0NQ==", "bodyText": "setAzureCloudIdentityMapping is already a big method, could you refactor this part into a separate one, like refreshRoleIfStale", "url": "https://github.com/hortonworks/cloudbreak/pull/8555#discussion_r454884745", "createdAt": "2020-07-15T08:33:59Z", "author": {"login": "lacikaaa"}, "path": "datalake/src/main/java/com/sequenceiq/datalake/cm/ClouderaManagerRangerUtil.java", "diffHunk": "@@ -117,7 +124,12 @@ public void setAzureCloudIdentityMapping(String stackCrn, Map<String, String> az\n             rolesResourceApi.updateRoleConfig(clusterName, rangerUserSyncRoleName, RANGER_SERVICE_NAME,\n                     \"Updating Azure Cloud Identity Mapping through Cloudbreak\",\n                     configList);\n-            triggerRoleRefresh(client, clusterName, RANGER_SERVICE_NAME, rangerUserSyncRoleName);\n+            if (isRoleRefreshNeeded(rolesResourceApi, clusterName, rangerUserSyncRoleName)) {\n+                LOGGER.info(\"Role refresh required, trigerring role refresh\");\n+                triggerRoleRefresh(client, clusterName, RANGER_SERVICE_NAME, rangerUserSyncRoleName);\n+            } else {\n+                LOGGER.info(\"No role refresh required\");\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1dd1b47c9c45a5be8a594a34856123535dca09f"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3043, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}