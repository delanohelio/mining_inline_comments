{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2Mzk3NTAw", "number": 8513, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMDowMjozM1rOEMos5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwMTo0NzowN1rOEMtlRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxNjg1MjIxOnYy", "diffSide": "LEFT", "path": "orchestrator-salt/src/main/resources/salt/salt/gateway/config/cm/topology.xml.j2", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMDowMjozM1rOGu3USQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMDowMjozMVrOGvKZ5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc5Mzk5Mw==", "bodyText": "is it ok if we remove this?", "url": "https://github.com/hortonworks/cloudbreak/pull/8513#discussion_r451793993", "createdAt": "2020-07-08T20:02:33Z", "author": {"login": "doktoric"}, "path": "orchestrator-salt/src/main/resources/salt/salt/gateway/config/cm/topology.xml.j2", "diffHunk": "@@ -261,12 +261,6 @@\n                  <value>enabled=true;maxFailoverAttempts=3;failoverSleep=1000</value>\n              </param>\n              {%- endif %}\n-             {% if 'WEBHBASE' in exposed and 'HBASERESTSERVER' in salt['pillar.get']('gateway:location') -%}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3db045674a14aab2ec84538ed067e338787499c1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkxNTM5NA==", "bodyText": "Peter and I had talked about this -- we're not really sure why it was here in the first place.\nThe HBASERESTSERVER doesn't provide a UI. It's meant for programmatic REST access. By that stance, there's no good reason we can think of as to why it would be in the topology.xml.j2 file in addition to the topology-api.xml.j2", "url": "https://github.com/hortonworks/cloudbreak/pull/8513#discussion_r451915394", "createdAt": "2020-07-09T01:40:03Z", "author": {"login": "joshelser"}, "path": "orchestrator-salt/src/main/resources/salt/salt/gateway/config/cm/topology.xml.j2", "diffHunk": "@@ -261,12 +261,6 @@\n                  <value>enabled=true;maxFailoverAttempts=3;failoverSleep=1000</value>\n              </param>\n              {%- endif %}\n-             {% if 'WEBHBASE' in exposed and 'HBASERESTSERVER' in salt['pillar.get']('gateway:location') -%}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc5Mzk5Mw=="}, "originalCommit": {"oid": "3db045674a14aab2ec84538ed067e338787499c1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkxNTQ2MA==", "bodyText": "Not sure if @risdenk happens to know?", "url": "https://github.com/hortonworks/cloudbreak/pull/8513#discussion_r451915460", "createdAt": "2020-07-09T01:40:18Z", "author": {"login": "joshelser"}, "path": "orchestrator-salt/src/main/resources/salt/salt/gateway/config/cm/topology.xml.j2", "diffHunk": "@@ -261,12 +261,6 @@\n                  <value>enabled=true;maxFailoverAttempts=3;failoverSleep=1000</value>\n              </param>\n              {%- endif %}\n-             {% if 'WEBHBASE' in exposed and 'HBASERESTSERVER' in salt['pillar.get']('gateway:location') -%}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc5Mzk5Mw=="}, "originalCommit": {"oid": "3db045674a14aab2ec84538ed067e338787499c1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkxNzEwOA==", "bodyText": "I don't know for sure. The history looks like it was added in f22a527. I don't know of any usage of this endpoint from the UI topology.\nbtw if this goes can also remove the webhbase.acl section a little further up.", "url": "https://github.com/hortonworks/cloudbreak/pull/8513#discussion_r451917108", "createdAt": "2020-07-09T01:46:12Z", "author": {"login": "risdenk"}, "path": "orchestrator-salt/src/main/resources/salt/salt/gateway/config/cm/topology.xml.j2", "diffHunk": "@@ -261,12 +261,6 @@\n                  <value>enabled=true;maxFailoverAttempts=3;failoverSleep=1000</value>\n              </param>\n              {%- endif %}\n-             {% if 'WEBHBASE' in exposed and 'HBASERESTSERVER' in salt['pillar.get']('gateway:location') -%}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc5Mzk5Mw=="}, "originalCommit": {"oid": "3db045674a14aab2ec84538ed067e338787499c1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEwNjcyNg==", "bodyText": "Nice catch @risdenk ! Removed that parameter too.", "url": "https://github.com/hortonworks/cloudbreak/pull/8513#discussion_r452106726", "createdAt": "2020-07-09T10:02:31Z", "author": {"login": "petersomogyi"}, "path": "orchestrator-salt/src/main/resources/salt/salt/gateway/config/cm/topology.xml.j2", "diffHunk": "@@ -261,12 +261,6 @@\n                  <value>enabled=true;maxFailoverAttempts=3;failoverSleep=1000</value>\n              </param>\n              {%- endif %}\n-             {% if 'WEBHBASE' in exposed and 'HBASERESTSERVER' in salt['pillar.get']('gateway:location') -%}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc5Mzk5Mw=="}, "originalCommit": {"oid": "3db045674a14aab2ec84538ed067e338787499c1"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxNzY1MTg4OnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/defaults/blueprints/cdp-opdb-721.bp", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwMTo0NzowN1rOGu-2QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwOToyOTowNVrOGvJNYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkxNzM3Ng==", "bodyText": "Make sure that CM is setting up HBase REST in a reasonable manner - including requiring SPNEGO on the REST server endpoint. It would be REALLY bad to have it by default be exposed without authentication.", "url": "https://github.com/hortonworks/cloudbreak/pull/8513#discussion_r451917376", "createdAt": "2020-07-09T01:47:07Z", "author": {"login": "risdenk"}, "path": "core/src/main/resources/defaults/blueprints/cdp-opdb-721.bp", "diffHunk": "@@ -162,7 +162,14 @@\n               \"displayName\": null,\n               \"configs\": [],\n               \"base\": true\n-           }\n+           },\n+          {\n+            \"refName\": \"hbase-HBASERESTSERVER-BASE\",\n+            \"roleType\": \"HBASERESTSERVER\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3db045674a14aab2ec84538ed067e338787499c1"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA4NzEzNg==", "bodyText": "Configs in CM look correct to me, e.g. hbase.rest.ssl.enabled=true and REST Server TLS/SSL is also enabled.\nMy test cluster is available if you'd like to take a look: https://console.dps.mow-dev.cloudera.com/cloud/workloads/details/psomogyi-aws-rest/events", "url": "https://github.com/hortonworks/cloudbreak/pull/8513#discussion_r452087136", "createdAt": "2020-07-09T09:29:05Z", "author": {"login": "petersomogyi"}, "path": "core/src/main/resources/defaults/blueprints/cdp-opdb-721.bp", "diffHunk": "@@ -162,7 +162,14 @@\n               \"displayName\": null,\n               \"configs\": [],\n               \"base\": true\n-           }\n+           },\n+          {\n+            \"refName\": \"hbase-HBASERESTSERVER-BASE\",\n+            \"roleType\": \"HBASERESTSERVER\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkxNzM3Ng=="}, "originalCommit": {"oid": "3db045674a14aab2ec84538ed067e338787499c1"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3118, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}