{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxNjEyNDM1", "number": 7228, "title": "SRE-5408 Small steps toward allowing large number of AWS SDX cluster creations happen in parallel.", "bodyText": "In PR #7227 we reduced the throttling and request limit exceeded issues for describe images.\nIn this PR, we are fixing the next two offenders, those are describe CF stacks and events.\nAll these were already nicely wrapped in a backoff scheduler with reset.\nIn this PR increased the time lag between resets, added a jitter and made the code to be more tolerant of request limit exceeded errors.\n\n./gradlew clean build", "createdAt": "2020-02-05T22:15:25Z", "url": "https://github.com/hortonworks/cloudbreak/pull/7228", "merged": true, "mergeCommit": {"oid": "aeaa3b29cc230b1ed392e3809d271ee168264310"}, "closed": true, "closedAt": "2020-02-12T16:08:48Z", "author": {"login": "cegganesh84"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBdw_jAFqTM1NDA4MjE4OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBx7cagFqTM1NDc5NzA4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MDgyMTg4", "url": "https://github.com/hortonworks/cloudbreak/pull/7228#pullrequestreview-354082188", "createdAt": "2020-02-05T22:20:40Z", "commit": {"oid": "ac773967af01542fefbd37c4a22479770394f00f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQyMjoyMDo0MVrOFmJMlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQyMjoyMDo0MVrOFmJMlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0MDg4NA==", "bodyText": "Why secure random? Why not threadlocalrandom?", "url": "https://github.com/hortonworks/cloudbreak/pull/7228#discussion_r375540884", "createdAt": "2020-02-05T22:20:41Z", "author": {"login": "risdenk"}, "path": "cloud-aws/src/main/java/com/sequenceiq/cloudbreak/cloud/aws/scheduler/AwsBackoffSyncPollingScheduler.java", "diffHunk": "@@ -20,14 +22,16 @@\n \n     private static final int POLLING_INTERVAL = 5;\n \n-    private static final int MAX_POLLING_INTERVAL = 10;\n+    private static final int MAX_POLLING_INTERVAL = 50;\n \n     private static final int MAX_POLLING_ATTEMPT = 1000;\n \n-    private static final int FAILURE_TOLERANT_ATTEMPT = 3;\n+    private static final int FAILURE_TOLERANT_ATTEMPT = 10;\n \n     private static final String THROTTLING_ERROR_CODE = \"Throttling\";\n \n+    private static final Random RANDOM = new SecureRandom();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac773967af01542fefbd37c4a22479770394f00f"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5c09a83c06cc33d4dde723d2caeac4cc96c22b7", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/f5c09a83c06cc33d4dde723d2caeac4cc96c22b7", "committedDate": "2020-02-06T21:26:18Z", "message": "SRE-5408 Small steps toward allowing large number of AWS SDX cluster creations happen in parallel.\n\n1. In PR #7227 we reduced the throttling and request limit exceeded issues for describe images.\n2. In this PR, we are fixing the next two offenders, those are describe CF stacks and events.\n3. All these were already nicely wrapped in a backoff scheduler with reset.\n4. In this PR increased the time lag between resets, added a jitter and made the code to be more tolerant of request limit exceeded errors.\n\n./gradlew clean build"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ac773967af01542fefbd37c4a22479770394f00f", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/ac773967af01542fefbd37c4a22479770394f00f", "committedDate": "2020-02-05T22:13:59Z", "message": "SRE-5408 Small steps toward allowing large number of AWS SDX cluster creations happen in parallel.\n\n1. In PR #7227 we reduced the throttling and request limit exceeded issues for describe images.\n2. In this PR, we are fixing the next two offenders, those are describe CF stacks and events.\n3. All these were already nicely wrapped in a backoff scheduler with reset.\n4. In this PR increased the time lag between resets, added a jitter and made the code to be more tolerant of request limit exceeded errors.\n\n./gradlew clean build"}, "afterCommit": {"oid": "f5c09a83c06cc33d4dde723d2caeac4cc96c22b7", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/f5c09a83c06cc33d4dde723d2caeac4cc96c22b7", "committedDate": "2020-02-06T21:26:18Z", "message": "SRE-5408 Small steps toward allowing large number of AWS SDX cluster creations happen in parallel.\n\n1. In PR #7227 we reduced the throttling and request limit exceeded issues for describe images.\n2. In this PR, we are fixing the next two offenders, those are describe CF stacks and events.\n3. All these were already nicely wrapped in a backoff scheduler with reset.\n4. In this PR increased the time lag between resets, added a jitter and made the code to be more tolerant of request limit exceeded errors.\n\n./gradlew clean build"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0Nzk3MDg4", "url": "https://github.com/hortonworks/cloudbreak/pull/7228#pullrequestreview-354797088", "createdAt": "2020-02-06T21:50:17Z", "commit": {"oid": "f5c09a83c06cc33d4dde723d2caeac4cc96c22b7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1949, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}