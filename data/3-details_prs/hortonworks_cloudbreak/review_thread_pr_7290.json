{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NDEyNjg1", "number": 7290, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwOTo1NTo0NFrODgVEAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwOTo1NTo0NFrODgVEAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MjI2MTEyOnYy", "diffSide": "RIGHT", "path": "datalake/src/main/java/com/sequenceiq/datalake/job/SdxClusterStatusCheckerJob.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwOTo1NTo0NFrOFqeZWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwOTo1NTo0NFrOFqeZWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA4MjUyMg==", "bodyText": "SDX_REPAIR_FINISHED message can be a little bit misleading as if it's not coming from repair failed", "url": "https://github.com/hortonworks/cloudbreak/pull/7290#discussion_r380082522", "createdAt": "2020-02-17T09:55:44Z", "author": {"login": "lacikaaa"}, "path": "datalake/src/main/java/com/sequenceiq/datalake/job/SdxClusterStatusCheckerJob.java", "diffHunk": "@@ -66,35 +77,44 @@ private void handleAmbiguousSdx(StackStatusV4Response stack, SdxCluster sdx) {\n \n     private void handleStoppedSdx(StackStatusV4Response stack, SdxCluster sdx) {\n         if (stack.getStatus().isAvailable() && stack.getClusterStatus().isAvailable()) {\n-            sdxStatusService.setStatusForDatalakeAndNotify(DatalakeStatusEnum.RUNNING, ResourceEvent.SDX_STOP_FINISHED, \"\", sdx);\n+            sdxStatusService.setStatusForDatalakeAndNotify(DatalakeStatusEnum.RUNNING, ResourceEvent.SDX_START_FINISHED, \"\", sdx);\n             logStateChange(DatalakeStatusEnum.STOPPED, DatalakeStatusEnum.RUNNING);\n         }\n-        if (stack.getStatus().equals(Status.DELETE_COMPLETED)) {\n-            sdxStatusService.setStatusForDatalakeAndNotify(DatalakeStatusEnum.STACK_DELETED, ResourceEvent.SDX_CLUSTER_DELETION_FINISHED, \"\", sdx);\n-            jobService.unschedule(String.valueOf(sdx.getId()));\n-            logStateChange(DatalakeStatusEnum.RUNNING, DatalakeStatusEnum.STACK_DELETED);\n+        setDeleteCompleted(stack, sdx);\n+        setDeleteFailed(stack, sdx);\n+    }\n+\n+    private void handleFailedSdx(StackStatusV4Response stack, SdxCluster sdx) {\n+        if (stack.getStatus().isAvailable() && stack.getClusterStatus().isAvailable()) {\n+            sdxStatusService.setStatusForDatalakeAndNotify(DatalakeStatusEnum.RUNNING, ResourceEvent.SDX_REPAIR_FINISHED, \"\", sdx);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c4aaab9a3ff81e08df55c24d8a62b409cc6b390"}, "originalPosition": 58}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2850, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}