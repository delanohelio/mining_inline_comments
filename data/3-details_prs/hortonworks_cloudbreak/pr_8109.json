{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwNjIyNjQ3", "number": 8109, "title": "CB-7146 [E2E] Save Java VM dumps on out-of-memory conditions", "bodyText": "", "createdAt": "2020-05-20T09:22:46Z", "url": "https://github.com/hortonworks/cloudbreak/pull/8109", "merged": true, "mergeCommit": {"oid": "d5f41ac785cfb18dcce27a6fe7d08e45ddeabd1c"}, "closed": true, "closedAt": "2020-05-22T07:58:58Z", "author": {"login": "aszegedi"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjHlmPABqjMzNTYwNTk1MDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjtkVngFqTQxNjcxOTkxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "489525852cf454573a29c36b727feec1cfdac8b8", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/489525852cf454573a29c36b727feec1cfdac8b8", "committedDate": "2020-05-20T10:12:00Z", "message": "CB-7146 [E2E] Enable Java VM dumps on out-of-memory conditions and save these"}, "afterCommit": {"oid": "230cb762275bad987e3faead79017bcb7af9b668", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/230cb762275bad987e3faead79017bcb7af9b668", "committedDate": "2020-05-20T11:43:28Z", "message": "CB-7146 [E2E] Save Java VM dumps on out-of-memory conditions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "230cb762275bad987e3faead79017bcb7af9b668", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/230cb762275bad987e3faead79017bcb7af9b668", "committedDate": "2020-05-20T11:43:28Z", "message": "CB-7146 [E2E] Save Java VM dumps on out-of-memory conditions"}, "afterCommit": {"oid": "f102f1baf5c19e6a175b183b4a8d8c34cd673ed3", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/f102f1baf5c19e6a175b183b4a8d8c34cd673ed3", "committedDate": "2020-05-20T14:54:11Z", "message": "CB-7146 [E2E] Save Java VM dumps on out-of-memory conditions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f102f1baf5c19e6a175b183b4a8d8c34cd673ed3", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/f102f1baf5c19e6a175b183b4a8d8c34cd673ed3", "committedDate": "2020-05-20T14:54:11Z", "message": "CB-7146 [E2E] Save Java VM dumps on out-of-memory conditions"}, "afterCommit": {"oid": "66c55ade1078f1aca03d517a73ae46818483bd5e", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/66c55ade1078f1aca03d517a73ae46818483bd5e", "committedDate": "2020-05-21T07:47:32Z", "message": "CB-7146 [E2E] Save Java VM dumps on out-of-memory conditions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MTA0MDA2", "url": "https://github.com/hortonworks/cloudbreak/pull/8109#pullrequestreview-416104006", "createdAt": "2020-05-21T12:28:34Z", "commit": {"oid": "66c55ade1078f1aca03d517a73ae46818483bd5e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMjoyODozNVrOGYw9rQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMjoyODozNVrOGYw9rQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYyMTIyOQ==", "bodyText": "Why do we need to use UseStringDeduplication?\nWhy are we specifying the GC algorithm? (I think G1GC is the default form Java 9 and upwards.)\n-Xmx1g why do we use this specific value?", "url": "https://github.com/hortonworks/cloudbreak/pull/8109#discussion_r428621229", "createdAt": "2020-05-21T12:28:35Z", "author": {"login": "lnardai"}, "path": "integration-test/docker-compose_template.yml", "diffHunk": "@@ -23,7 +23,7 @@ services:\n     volumes:\n       - ./:/it\n       - /etc/localtime:/etc/localtime:ro\n-    command: java -jar /it/build/libs/cloudbreak-integration-test.jar com.sequenceiq.it.IntegrationTestApp --integrationtest.command=suiteurls --integrationtest.suiteFiles=${INTEGRATIONTEST_SUITEFILES} | tee cbtest.log\n+    command: java -Xmx1g -XX:+UseG1GC -XX:+UseStringDeduplication -XX:OnOutOfMemoryError=\"kill -9 %p\" -XX:+HeapDumpOnOutOfMemoryError -jar /it/build/libs/cloudbreak-integration-test.jar com.sequenceiq.it.IntegrationTestApp --integrationtest.command=suiteurls --integrationtest.suiteFiles=${INTEGRATIONTEST_SUITEFILES} | tee cbtest.log", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66c55ade1078f1aca03d517a73ae46818483bd5e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12159c0f98baf5571c243809e1abd6f0f4daaffd", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/12159c0f98baf5571c243809e1abd6f0f4daaffd", "committedDate": "2020-05-21T14:49:42Z", "message": "CB-7146 [E2E] Save Java VM dumps on out-of-memory conditions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "66c55ade1078f1aca03d517a73ae46818483bd5e", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/66c55ade1078f1aca03d517a73ae46818483bd5e", "committedDate": "2020-05-21T07:47:32Z", "message": "CB-7146 [E2E] Save Java VM dumps on out-of-memory conditions"}, "afterCommit": {"oid": "12159c0f98baf5571c243809e1abd6f0f4daaffd", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/12159c0f98baf5571c243809e1abd6f0f4daaffd", "committedDate": "2020-05-21T14:49:42Z", "message": "CB-7146 [E2E] Save Java VM dumps on out-of-memory conditions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NzE5OTEw", "url": "https://github.com/hortonworks/cloudbreak/pull/8109#pullrequestreview-416719910", "createdAt": "2020-05-22T07:58:51Z", "commit": {"oid": "12159c0f98baf5571c243809e1abd6f0f4daaffd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1859, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}