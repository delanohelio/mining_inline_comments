{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwNDU4Mzg1", "number": 9053, "title": "CB-8901: Fix FreeIPA repair with a requested instance", "bodyText": "Fix FreeIPA repair so that if there is an instance stuck in the\nrequsted state, the repair operation is able to succeed and it clean\nup as much as possible.\nThis was tested manully using a local instance of cloudbreak.\nSee detailed description in the commit message.", "createdAt": "2020-09-21T17:42:58Z", "url": "https://github.com/hortonworks/cloudbreak/pull/9053", "merged": true, "mergeCommit": {"oid": "c6688bef87065a19577e0333f43b4b9ef4574138"}, "closed": true, "closedAt": "2020-09-24T12:48:10Z", "author": {"login": "jamisonbennett"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLRjFzgFqTQ5MzE0MjIzMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLZgeZAFqTQ5MzU3MjAzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMTQyMjMx", "url": "https://github.com/hortonworks/cloudbreak/pull/9053#pullrequestreview-493142231", "createdAt": "2020-09-22T05:53:08Z", "commit": {"oid": "b18c5b5695d0f8bf2f493dee3f3fcc2a3d30e65f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNTo1MzowOFrOHVrEMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNTo1MzowOFrOHVrEMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ4NzcyOA==", "bodyText": "I don't think you need transaction here", "url": "https://github.com/hortonworks/cloudbreak/pull/9053#discussion_r492487728", "createdAt": "2020-09-22T05:53:08Z", "author": {"login": "lacikaaa"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/flow/stack/termination/action/TerminationService.java", "diffHunk": "@@ -91,6 +91,19 @@ public void finalizeTermination(Long stackId, List<String> instanceIds) {\n         }\n     }\n \n+    public void finalizeTerminationForInstancesWithoutInstanceIds(Long stackId) {\n+        try {\n+            transactionService.required(() -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b18c5b5695d0f8bf2f493dee3f3fcc2a3d30e65f"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f51347f4ceef5c4e316e5a23118e0d50052995bb", "author": {"user": {"login": "jamisonbennett", "name": "Jamison Bennett"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/f51347f4ceef5c4e316e5a23118e0d50052995bb", "committedDate": "2020-09-22T14:36:11Z", "message": "CB-8901: Fix FreeIPA repair with a requested instance\n\nFix FreeIPA repair so that if there is an instance stuck in the\nrequsted state, the repair operation is able to succeed and it clean\nup as much as possible.\n\nThis was tested manully using a local instance of cloudbreak."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b18c5b5695d0f8bf2f493dee3f3fcc2a3d30e65f", "author": {"user": {"login": "jamisonbennett", "name": "Jamison Bennett"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/b18c5b5695d0f8bf2f493dee3f3fcc2a3d30e65f", "committedDate": "2020-09-21T17:41:04Z", "message": "CB-8901: Fix FreeIPA repair with a requested instance\n\nFix FreeIPA repair so that if there is an instance stuck in the\nrequsted state, the repair operation is able to succeed and it clean\nup as much as possible.\n\nThis was tested manully using a local instance of cloudbreak."}, "afterCommit": {"oid": "f51347f4ceef5c4e316e5a23118e0d50052995bb", "author": {"user": {"login": "jamisonbennett", "name": "Jamison Bennett"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/f51347f4ceef5c4e316e5a23118e0d50052995bb", "committedDate": "2020-09-22T14:36:11Z", "message": "CB-8901: Fix FreeIPA repair with a requested instance\n\nFix FreeIPA repair so that if there is an instance stuck in the\nrequsted state, the repair operation is able to succeed and it clean\nup as much as possible.\n\nThis was tested manully using a local instance of cloudbreak."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNTcyMDMy", "url": "https://github.com/hortonworks/cloudbreak/pull/9053#pullrequestreview-493572032", "createdAt": "2020-09-22T15:13:30Z", "commit": {"oid": "f51347f4ceef5c4e316e5a23118e0d50052995bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2214, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}