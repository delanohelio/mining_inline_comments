{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzMDk5Nzc3", "number": 9348, "title": "CB-9545 use JpaRepository getOne() instead of EntityManager", "bodyText": "See detailed description in the commit message.", "createdAt": "2020-10-30T15:49:31Z", "url": "https://github.com/hortonworks/cloudbreak/pull/9348", "merged": true, "mergeCommit": {"oid": "30d88396b0df8509daff453741068b7afac67b85"}, "closed": true, "closedAt": "2020-11-02T15:58:04Z", "author": {"login": "sodre90"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXpquUAFqTUyMDg1Mjc1Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYmt54gFqTUyMTc2MjA5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwODUyNzU3", "url": "https://github.com/hortonworks/cloudbreak/pull/9348#pullrequestreview-520852757", "createdAt": "2020-10-30T16:50:16Z", "commit": {"oid": "d7a98602c9907d7ec81b62a701b9a2d10ff1bc1f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTIyMjU4", "url": "https://github.com/hortonworks/cloudbreak/pull/9348#pullrequestreview-521122258", "createdAt": "2020-10-31T08:17:55Z", "commit": {"oid": "d7a98602c9907d7ec81b62a701b9a2d10ff1bc1f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQwODoxNzo1NVrOHrl5WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQwODoxNzo1NVrOHrl5WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ3MTcwNA==", "bodyText": "Please add a detailed commit message that why we need to change it, what problem is caused by the old solution. I just want to avoid that situation that a year from now somebody would accidentally/intentionally write it back.\nPlease also double-check whether we could eliminate the following lines from DatabaseConfig java files.\n   @Bean\n    public EntityManager entityManager(EntityManagerFactory entityManagerFactory) {\n        return entityManagerFactory.createEntityManager();\n    }\n\n\n\n  \n    \n      cloudbreak/autoscale/src/main/java/com/sequenceiq/periscope/config/DatabaseConfig.java\n    \n    \n         Line 119\n      in\n      fe089b5\n    \n    \n    \n    \n\n        \n          \n           return entityManagerFactory.createEntityManager();", "url": "https://github.com/hortonworks/cloudbreak/pull/9348#discussion_r515471704", "createdAt": "2020-10-31T08:17:55Z", "author": {"login": "akanto"}, "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/eventbus/CloudResourcePersisterService.java", "diffHunk": "@@ -31,7 +32,7 @@\n     @Inject\n     private ResourceService resourceService;\n \n-    @Inject\n+    @PersistenceContext", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7a98602c9907d7ec81b62a701b9a2d10ff1bc1f"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTk4MjMx", "url": "https://github.com/hortonworks/cloudbreak/pull/9348#pullrequestreview-521198231", "createdAt": "2020-11-01T07:06:51Z", "commit": {"oid": "d7a98602c9907d7ec81b62a701b9a2d10ff1bc1f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d7a98602c9907d7ec81b62a701b9a2d10ff1bc1f", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/d7a98602c9907d7ec81b62a701b9a2d10ff1bc1f", "committedDate": "2020-10-30T15:47:31Z", "message": "CB-9545 use @PersistenceContext for EntityManager"}, "afterCommit": {"oid": "98098fa949c884f178a2cbd9f12e750b1273142f", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/98098fa949c884f178a2cbd9f12e750b1273142f", "committedDate": "2020-11-01T08:14:46Z", "message": "CB-9545 use @PersistenceContext for EntityManager\n\nOn mow-int QE got some `Session/EntityManager is closed` error message for some of their clusters. Our assumption with @lnardai the problem could be `EntityManager` is injected by `@Inject` in `CloudResourcePersisterService` instead of `@PersistenceContext`. `@PersistenceContext` takes care to create a unique `EntityManager` for every thread."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98098fa949c884f178a2cbd9f12e750b1273142f", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/98098fa949c884f178a2cbd9f12e750b1273142f", "committedDate": "2020-11-01T08:14:46Z", "message": "CB-9545 use @PersistenceContext for EntityManager\n\nOn mow-int QE got some `Session/EntityManager is closed` error message for some of their clusters. Our assumption with @lnardai the problem could be `EntityManager` is injected by `@Inject` in `CloudResourcePersisterService` instead of `@PersistenceContext`. `@PersistenceContext` takes care to create a unique `EntityManager` for every thread."}, "afterCommit": {"oid": "61ad89bb53dc362aa039ffddf303a68089db8aa6", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/61ad89bb53dc362aa039ffddf303a68089db8aa6", "committedDate": "2020-11-01T08:47:09Z", "message": "CB-9545 use @PersistenceContext for EntityManager\n\nOn mow-int QE got some `Session/EntityManager is closed` error message for some of their clusters. Our assumption with @lnardai the problem could be `EntityManager` is injected by `@Inject` in `CloudResourcePersisterService` instead of `@PersistenceContext`. `@PersistenceContext` takes care to create a unique `EntityManager` for every thread."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzc4MTUx", "url": "https://github.com/hortonworks/cloudbreak/pull/9348#pullrequestreview-521378151", "createdAt": "2020-11-02T07:22:50Z", "commit": {"oid": "61ad89bb53dc362aa039ffddf303a68089db8aa6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzg1MDA4", "url": "https://github.com/hortonworks/cloudbreak/pull/9348#pullrequestreview-521385008", "createdAt": "2020-11-02T07:36:58Z", "commit": {"oid": "61ad89bb53dc362aa039ffddf303a68089db8aa6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "61ad89bb53dc362aa039ffddf303a68089db8aa6", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/61ad89bb53dc362aa039ffddf303a68089db8aa6", "committedDate": "2020-11-01T08:47:09Z", "message": "CB-9545 use @PersistenceContext for EntityManager\n\nOn mow-int QE got some `Session/EntityManager is closed` error message for some of their clusters. Our assumption with @lnardai the problem could be `EntityManager` is injected by `@Inject` in `CloudResourcePersisterService` instead of `@PersistenceContext`. `@PersistenceContext` takes care to create a unique `EntityManager` for every thread."}, "afterCommit": {"oid": "ec1c98b268504bc50c4f7e4448dae176719e46fc", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/ec1c98b268504bc50c4f7e4448dae176719e46fc", "committedDate": "2020-11-02T08:53:37Z", "message": "CB-9545 use JpaRepository getOne() instead of EntityManager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "777863dbe664fc8610f7cab2ef68a79bb3c1beeb", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/777863dbe664fc8610f7cab2ef68a79bb3c1beeb", "committedDate": "2020-11-02T09:22:31Z", "message": "CB-9545 use JpaRepository getOne() instead of EntityManager"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ec1c98b268504bc50c4f7e4448dae176719e46fc", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/ec1c98b268504bc50c4f7e4448dae176719e46fc", "committedDate": "2020-11-02T08:53:37Z", "message": "CB-9545 use JpaRepository getOne() instead of EntityManager"}, "afterCommit": {"oid": "777863dbe664fc8610f7cab2ef68a79bb3c1beeb", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/777863dbe664fc8610f7cab2ef68a79bb3c1beeb", "committedDate": "2020-11-02T09:22:31Z", "message": "CB-9545 use JpaRepository getOne() instead of EntityManager"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxNzYyMDky", "url": "https://github.com/hortonworks/cloudbreak/pull/9348#pullrequestreview-521762092", "createdAt": "2020-11-02T15:57:57Z", "commit": {"oid": "777863dbe664fc8610f7cab2ef68a79bb3c1beeb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2138, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}