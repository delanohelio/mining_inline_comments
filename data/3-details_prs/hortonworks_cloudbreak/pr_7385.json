{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5NjM0NDg4", "number": 7385, "title": "CB-5619 cloud-aws instanceConnector and authenticator test", "bodyText": "awsInstanceConnector refactor and integrationtest\nCloses 5619", "createdAt": "2020-02-25T15:01:03Z", "url": "https://github.com/hortonworks/cloudbreak/pull/7385", "merged": true, "mergeCommit": {"oid": "b8456b50b20883c2962c9c568daac4260020ac63"}, "closed": true, "closedAt": "2020-02-26T16:34:09Z", "author": {"login": "afarsang"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcH3GJtgBqjMwNzA2NDg0NDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIG5w4AFqTM2NDgxNTk1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8c2094c206708e16cc1c9538c7a9687cf35eba95", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/8c2094c206708e16cc1c9538c7a9687cf35eba95", "committedDate": "2020-02-25T14:59:29Z", "message": "CB-5619 cloud-aws instanceConnector and authenticator test"}, "afterCommit": {"oid": "31a63a27fbc1e94bc6356293f551b00e6d11b2af", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/31a63a27fbc1e94bc6356293f551b00e6d11b2af", "committedDate": "2020-02-25T19:14:47Z", "message": "CB-5619 cloud-aws instanceConnector and authenticator test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31a63a27fbc1e94bc6356293f551b00e6d11b2af", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/31a63a27fbc1e94bc6356293f551b00e6d11b2af", "committedDate": "2020-02-25T19:14:47Z", "message": "CB-5619 cloud-aws instanceConnector and authenticator test"}, "afterCommit": {"oid": "d89bdd3b11c35e22c6c4ff52347d9400aab5fe25", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/d89bdd3b11c35e22c6c4ff52347d9400aab5fe25", "committedDate": "2020-02-26T07:21:51Z", "message": "CB-5619 cloud-aws instanceConnector and authenticator test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13fcaa9809e6fa80d70f149d787481dbc037d6c5", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/13fcaa9809e6fa80d70f149d787481dbc037d6c5", "committedDate": "2020-02-26T08:59:45Z", "message": "CB-5619 cloud-aws instanceConnector and authenticator test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d89bdd3b11c35e22c6c4ff52347d9400aab5fe25", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/d89bdd3b11c35e22c6c4ff52347d9400aab5fe25", "committedDate": "2020-02-26T07:21:51Z", "message": "CB-5619 cloud-aws instanceConnector and authenticator test"}, "afterCommit": {"oid": "13fcaa9809e6fa80d70f149d787481dbc037d6c5", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/13fcaa9809e6fa80d70f149d787481dbc037d6c5", "committedDate": "2020-02-26T08:59:45Z", "message": "CB-5619 cloud-aws instanceConnector and authenticator test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0OTAxMjE2", "url": "https://github.com/hortonworks/cloudbreak/pull/7385#pullrequestreview-364901216", "createdAt": "2020-02-26T13:36:38Z", "commit": {"oid": "13fcaa9809e6fa80d70f149d787481dbc037d6c5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0ODE1OTU5", "url": "https://github.com/hortonworks/cloudbreak/pull/7385#pullrequestreview-364815959", "createdAt": "2020-02-26T11:16:12Z", "commit": {"oid": "13fcaa9809e6fa80d70f149d787481dbc037d6c5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxMToxNjoxMlrOFunp6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxMToxNjoxMlrOFunp6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQyODUyMQ==", "bodyText": "unnecessary line break", "url": "https://github.com/hortonworks/cloudbreak/pull/7385#discussion_r384428521", "createdAt": "2020-02-26T11:16:12Z", "author": {"login": "topolyai5"}, "path": "cloud-aws/src/main/java/com/sequenceiq/cloudbreak/cloud/aws/AwsClient.java", "diffHunk": "@@ -64,7 +67,12 @@\n     public AuthenticatedContext createAuthenticatedContext(CloudContext cloudContext, CloudCredential cloudCredential) {\n         AuthenticatedContext authenticatedContext = new AuthenticatedContext(cloudContext, cloudCredential);\n         try {\n-            authenticatedContext.putParameter(AmazonEC2Client.class, createAccess(authenticatedContext.getCloudCredential()));\n+            AuthenticatedContextView authenticatedContextView = new AuthenticatedContextView(authenticatedContext);\n+            String region = authenticatedContextView.getRegion();\n+            AmazonEC2Client amazonEC2Client = region != null ?\n+                    createAccess(authenticatedContextView.getAwsCredentialView(), region) : createAccess(cloudCredential);\n+            authenticatedContext.putParameter(AmazonEC2Client.class,\n+                    amazonEC2Client);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13fcaa9809e6fa80d70f149d787481dbc037d6c5"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2596, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}