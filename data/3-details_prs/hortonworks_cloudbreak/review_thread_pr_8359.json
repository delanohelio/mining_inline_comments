{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4MDEyMjg1", "number": 8359, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMzowNjozMlrOEH9b-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMzowNjozMlrOEH9b-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NzgyMDc1OnYy", "diffSide": "RIGHT", "path": "orchestrator-salt/src/main/resources/salt/salt/postgresql/disaster_recovery/scripts/backup_db.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMzowNjozMlrOGnoTdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMzoyNjoyNFrOGnpJEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDIwNzk4OA==", "bodyText": "Pls add log like: echo \"try to upload with AES256 encryption\"", "url": "https://github.com/hortonworks/cloudbreak/pull/8359#discussion_r444207988", "createdAt": "2020-06-23T13:06:32Z", "author": {"login": "pdarvasi"}, "path": "orchestrator-salt/src/main/resources/salt/salt/postgresql/disaster_recovery/scripts/backup_db.sh", "diffHunk": "@@ -77,19 +77,30 @@ dump_to_s3() {\n   SERVICE=$1\n   S3_LOCATION=\"${BACKUP_LOCATION}/${SERVICE}_backup\"\n   doLog \"INFO Dumping ${SERVICE} to ${S3_LOCATION}\"\n-  pg_dump --host=\"$HOST\" --port=\"$PORT\" --username=\"$USERNAME\" --dbname=\"${SERVICE}\" --format=plain 2>>$LOGFILE | /usr/bin/aws s3 cp --sse AES256 --no-progress - \"${S3_LOCATION}\" 2>>$LOGFILE || errorExit \"Unable to dump ${SERVICE}.\"\n-  doLog \"INFO ${SERVICE} dumped to ${S3_LOCATION}\"\n+\n+  ret_code=$(pg_dump --host=\"$HOST\" --port=\"$PORT\" --username=\"$USERNAME\" --dbname=\"${SERVICE}\" --format=plain 2>>$LOGFILE | /usr/bin/aws s3 cp --sse AES256 --no-progress - \"${S3_LOCATION}\" 2>>$LOGFILE || echo $?)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42049ce4912b144dcf1679f40a667f49e0d30df9"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDIyMTcxMw==", "bodyText": "Done", "url": "https://github.com/hortonworks/cloudbreak/pull/8359#discussion_r444221713", "createdAt": "2020-06-23T13:26:24Z", "author": {"login": "brycederriso"}, "path": "orchestrator-salt/src/main/resources/salt/salt/postgresql/disaster_recovery/scripts/backup_db.sh", "diffHunk": "@@ -77,19 +77,30 @@ dump_to_s3() {\n   SERVICE=$1\n   S3_LOCATION=\"${BACKUP_LOCATION}/${SERVICE}_backup\"\n   doLog \"INFO Dumping ${SERVICE} to ${S3_LOCATION}\"\n-  pg_dump --host=\"$HOST\" --port=\"$PORT\" --username=\"$USERNAME\" --dbname=\"${SERVICE}\" --format=plain 2>>$LOGFILE | /usr/bin/aws s3 cp --sse AES256 --no-progress - \"${S3_LOCATION}\" 2>>$LOGFILE || errorExit \"Unable to dump ${SERVICE}.\"\n-  doLog \"INFO ${SERVICE} dumped to ${S3_LOCATION}\"\n+\n+  ret_code=$(pg_dump --host=\"$HOST\" --port=\"$PORT\" --username=\"$USERNAME\" --dbname=\"${SERVICE}\" --format=plain 2>>$LOGFILE | /usr/bin/aws s3 cp --sse AES256 --no-progress - \"${S3_LOCATION}\" 2>>$LOGFILE || echo $?)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDIwNzk4OA=="}, "originalCommit": {"oid": "42049ce4912b144dcf1679f40a667f49e0d30df9"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3156, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}