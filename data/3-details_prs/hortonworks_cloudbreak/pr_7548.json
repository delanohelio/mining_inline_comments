{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2ODcxODU1", "number": 7548, "title": "CDPCP-1601. set-password now uses credentials from control plane", "bodyText": "The setPassword call now uses the password hash and keys from UMS\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation.", "createdAt": "2020-03-11T19:12:10Z", "url": "https://github.com/hortonworks/cloudbreak/pull/7548", "merged": true, "mergeCommit": {"oid": "0fad59f9df2fe07c364cfbcb495ec7985d32f656"}, "closed": true, "closedAt": "2020-03-26T07:25:05Z", "author": {"login": "aarman-cloudera"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMsLO-ABqjMxMjAxOTgyNzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRLoAhgBqjMxNjUxOTA5MDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8af8962de0bcc14af6379a68d3196525c10ec83e", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8af8962de0bcc14af6379a68d3196525c10ec83e", "committedDate": "2020-03-11T19:00:49Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}, "afterCommit": {"oid": "6b1f0cff5cd95a603429bbc55013eb9eb2d55527", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/6b1f0cff5cd95a603429bbc55013eb9eb2d55527", "committedDate": "2020-03-11T19:20:54Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczNTQyNDQ3", "url": "https://github.com/hortonworks/cloudbreak/pull/7548#pullrequestreview-373542447", "createdAt": "2020-03-12T13:14:20Z", "commit": {"oid": "6b1f0cff5cd95a603429bbc55013eb9eb2d55527"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxMzoxNDoyMVrOF1eDPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxMzoxNDoyMVrOF1eDPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTYxMTE5Ng==", "bodyText": "few things:\n\nmethod name should start with verb, like create\nI don't like this static method, because it will make it hard to mock during testing. Maybe moving this logic into a converter component would make it easier to mock and test\nmissing tests", "url": "https://github.com/hortonworks/cloudbreak/pull/7548#discussion_r391611196", "createdAt": "2020-03-12T13:14:21Z", "author": {"login": "lacikaaa"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/user/model/WorkloadCredential.java", "diffHunk": "@@ -32,4 +33,12 @@ public String getHashedPassword() {\n     public Optional<Instant> getExpirationDate() {\n         return expirationDate;\n     }\n+\n+    public static WorkloadCredential fromGetActorWorkloadCredentialsResponse(GetActorWorkloadCredentialsResponse response) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b1f0cff5cd95a603429bbc55013eb9eb2d55527"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczODA2NDM1", "url": "https://github.com/hortonworks/cloudbreak/pull/7548#pullrequestreview-373806435", "createdAt": "2020-03-12T18:34:29Z", "commit": {"oid": "6b1f0cff5cd95a603429bbc55013eb9eb2d55527"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxODozNDoyOVrOF1qj8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxODozODozMVrOF1qsKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxNjE3OQ==", "bodyText": "doesn't quite feel right in the FreeIpaClient class. We will also likely start checking other object classes as well.\nI suggest pulling this out into a separate class. Maybe FreeIpaObjectClasses or FreeIpaCapabilities", "url": "https://github.com/hortonworks/cloudbreak/pull/7548#discussion_r391816179", "createdAt": "2020-03-12T18:34:29Z", "author": {"login": "handavid"}, "path": "freeipa-client/src/main/java/com/sequenceiq/freeipa/client/FreeIpaClient.java", "diffHunk": "@@ -197,6 +197,11 @@ public User userSetPasswordHash(String user, String hashedPassword,\n         return userMod(user, params);\n     }\n \n+    public boolean hasSetPasswordHashSupport() throws FreeIpaClientException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b1f0cff5cd95a603429bbc55013eb9eb2d55527"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxNzY1MQ==", "bodyText": "Let's add a log message here also. This will let us search to logs for whether anyone is using the \"old way\"", "url": "https://github.com/hortonworks/cloudbreak/pull/7548#discussion_r391817651", "createdAt": "2020-03-12T18:37:14Z", "author": {"login": "handavid"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/flow/freeipa/user/handler/SetPasswordHandler.java", "diffHunk": "@@ -43,7 +70,13 @@ public void accept(Event<SetPasswordRequest> setPasswordRequestEvent) {\n             MDCBuilder.buildMdcContext(stack);\n \n             FreeIpaClient freeIpaClient = freeIpaClientFactory.getFreeIpaClientForStack(stack);\n-            freeIpaClient.userSetPasswordWithExpiration(request.getUsername(), request.getPassword(), request.getExpirationInstant());\n+            if (freeIpaClient.hasSetPasswordHashSupport()) {\n+                LOGGER.info(\"IPA has password hash support, credentials information from UMS will be used.\");\n+                setPasswordHashFromUms(freeIpaClient, request.getUsername(), request.getUserCrn(), request.getExpirationInstant());\n+            } else {\n+                freeIpaClient.userSetPasswordWithExpiration(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b1f0cff5cd95a603429bbc55013eb9eb2d55527"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxODI4MA==", "bodyText": "I like the re-wording. it's clearer", "url": "https://github.com/hortonworks/cloudbreak/pull/7548#discussion_r391818280", "createdAt": "2020-03-12T18:38:31Z", "author": {"login": "handavid"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/user/UserSyncService.java", "diffHunk": "@@ -270,14 +269,12 @@ private void applyStateDifferenceToIpa(String environmentCrn, FreeIpaClient free\n \n     private void processUsersWorkloadCredentials(\n             String environmentCrn, UmsUsersState umsUsersState, FreeIpaClient freeIpaClient) throws IOException, FreeIpaClientException {\n-        Config config = freeIpaClient.getConfig();\n-        if (config.getIpauserobjectclasses() == null || !config.getIpauserobjectclasses().contains(Config.CDP_USER_ATTRIBUTE)) {\n-            LOGGER.debug(\"Doesn't seems like having config attribute, no credentials sync required for env:{}\", environmentCrn);\n+        if (!freeIpaClient.hasSetPasswordHashSupport()) {\n+            LOGGER.debug(\"IPA doesn't have password hash support, no credentials sync required for env:{}\", environmentCrn);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b1f0cff5cd95a603429bbc55013eb9eb2d55527"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6b1f0cff5cd95a603429bbc55013eb9eb2d55527", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/6b1f0cff5cd95a603429bbc55013eb9eb2d55527", "committedDate": "2020-03-11T19:20:54Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}, "afterCommit": {"oid": "7eab15ee72fc22433dd41cc22f47fd21c00befc4", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/7eab15ee72fc22433dd41cc22f47fd21c00befc4", "committedDate": "2020-03-13T11:14:38Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MzMyOTky", "url": "https://github.com/hortonworks/cloudbreak/pull/7548#pullrequestreview-374332992", "createdAt": "2020-03-13T14:14:42Z", "commit": {"oid": "7eab15ee72fc22433dd41cc22f47fd21c00befc4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MTM2NzM3", "url": "https://github.com/hortonworks/cloudbreak/pull/7548#pullrequestreview-375136737", "createdAt": "2020-03-16T11:50:57Z", "commit": {"oid": "7eab15ee72fc22433dd41cc22f47fd21c00befc4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7eab15ee72fc22433dd41cc22f47fd21c00befc4", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/7eab15ee72fc22433dd41cc22f47fd21c00befc4", "committedDate": "2020-03-13T11:14:38Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}, "afterCommit": {"oid": "a6a3455c0ee0478440d97295ede21f968cb0eeca", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/a6a3455c0ee0478440d97295ede21f968cb0eeca", "committedDate": "2020-03-19T07:13:23Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a6a3455c0ee0478440d97295ede21f968cb0eeca", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/a6a3455c0ee0478440d97295ede21f968cb0eeca", "committedDate": "2020-03-19T07:13:23Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}, "afterCommit": {"oid": "cfc2f8a5b592d63c677551b2da2f5ef322b7b1e6", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/cfc2f8a5b592d63c677551b2da2f5ef322b7b1e6", "committedDate": "2020-03-20T10:08:48Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cfc2f8a5b592d63c677551b2da2f5ef322b7b1e6", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/cfc2f8a5b592d63c677551b2da2f5ef322b7b1e6", "committedDate": "2020-03-20T10:08:48Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}, "afterCommit": {"oid": "23530243cdcb408dc6775d7792c7eec2e9300673", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/23530243cdcb408dc6775d7792c7eec2e9300673", "committedDate": "2020-03-20T10:27:22Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5ODkwMzE1", "url": "https://github.com/hortonworks/cloudbreak/pull/7548#pullrequestreview-379890315", "createdAt": "2020-03-23T23:10:39Z", "commit": {"oid": "23530243cdcb408dc6775d7792c7eec2e9300673"}, "state": "APPROVED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QyMzoxMDozOVrOF6bd0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QyMzoyMzoxOVrOF6b1Eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjgxMTcyOA==", "bodyText": "the comment seems wrong. Maybe say \"Attribute name to store users passwords ....\"", "url": "https://github.com/hortonworks/cloudbreak/pull/7548#discussion_r396811728", "createdAt": "2020-03-23T23:10:39Z", "author": {"login": "giladwolff"}, "path": "freeipa-client/src/main/java/com/sequenceiq/freeipa/client/FreeIpaCapabilities.java", "diffHunk": "@@ -0,0 +1,20 @@\n+package com.sequenceiq.freeipa.client;\n+\n+import com.sequenceiq.freeipa.client.model.Config;\n+\n+import java.util.Set;\n+\n+public class FreeIpaCapabilities {\n+\n+    // users for password setting in FreeIPA Plugin", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23530243cdcb408dc6775d7792c7eec2e9300673"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjgxMjMwMw==", "bodyText": "why have it at all?", "url": "https://github.com/hortonworks/cloudbreak/pull/7548#discussion_r396812303", "createdAt": "2020-03-23T23:12:36Z", "author": {"login": "giladwolff"}, "path": "freeipa-client/src/main/java/com/sequenceiq/freeipa/client/FreeIpaCapabilities.java", "diffHunk": "@@ -0,0 +1,20 @@\n+package com.sequenceiq.freeipa.client;\n+\n+import com.sequenceiq.freeipa.client.model.Config;\n+\n+import java.util.Set;\n+\n+public class FreeIpaCapabilities {\n+\n+    // users for password setting in FreeIPA Plugin\n+    private static final String CDP_USER_ATTRIBUTE = \"cdpUserAttr\";\n+\n+    private FreeIpaCapabilities() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23530243cdcb408dc6775d7792c7eec2e9300673"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjgxNDQ4Ng==", "bodyText": "I assume that the userCrn is the actor for which the password is set? and that is extracted from the authentication context? Maybe call this actorCrn as the caller maybe a machine user? Also, how do you know the username at this point? This is the workload username, right?", "url": "https://github.com/hortonworks/cloudbreak/pull/7548#discussion_r396814486", "createdAt": "2020-03-23T23:19:12Z", "author": {"login": "giladwolff"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/flow/freeipa/user/event/SetPasswordRequest.java", "diffHunk": "@@ -9,14 +9,17 @@\n \n     private final String username;\n \n+    private final String userCrn;\n+\n     private final String password;\n \n     private final Optional<Instant> expirationInstant;\n \n-    public SetPasswordRequest(Long stackId, String environment, String username, String password, Optional<Instant> expirationInstant) {\n+    public SetPasswordRequest(Long stackId, String environment, String username, String userCrn, String password, Optional<Instant> expirationInstant) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23530243cdcb408dc6775d7792c7eec2e9300673"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjgxNTI3OQ==", "bodyText": "So not you, but there are nicer ways to do this, like using guava object helper.", "url": "https://github.com/hortonworks/cloudbreak/pull/7548#discussion_r396815279", "createdAt": "2020-03-23T23:20:24Z", "author": {"login": "giladwolff"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/flow/freeipa/user/event/SetPasswordRequest.java", "diffHunk": "@@ -43,6 +50,7 @@ public String toString() {\n                 + \"stackId='\" + getResourceId() + '\\''\n                 + \"environment='\" + environment + '\\''\n                 + \"username='\" + username + '\\''\n+                + \"userCrn='\" + userCrn + '\\''", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23530243cdcb408dc6775d7792c7eec2e9300673"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjgxNzY4Mg==", "bodyText": "I could swear that I've seen this code before.", "url": "https://github.com/hortonworks/cloudbreak/pull/7548#discussion_r396817682", "createdAt": "2020-03-23T23:23:19Z", "author": {"login": "giladwolff"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/user/UmsCredentialProvider.java", "diffHunk": "@@ -0,0 +1,28 @@\n+package com.sequenceiq.freeipa.service.freeipa.user;\n+\n+import com.cloudera.thunderhead.service.usermanagement.UserManagementProto.GetActorWorkloadCredentialsResponse;\n+import com.sequenceiq.cloudbreak.auth.altus.GrpcUmsClient;\n+import com.sequenceiq.freeipa.service.freeipa.user.model.WorkloadCredential;\n+import org.springframework.stereotype.Component;\n+\n+import javax.inject.Inject;\n+import java.time.Instant;\n+import java.util.Optional;\n+\n+import static com.sequenceiq.cloudbreak.auth.altus.GrpcUmsClient.INTERNAL_ACTOR_CRN;\n+\n+@Component\n+public class UmsCredentialProvider {\n+\n+    @Inject\n+    private GrpcUmsClient grpcUmsClient;\n+\n+    public WorkloadCredential getCredentials(String userCrn, Optional<String> requestId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23530243cdcb408dc6775d7792c7eec2e9300673"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "23530243cdcb408dc6775d7792c7eec2e9300673", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/23530243cdcb408dc6775d7792c7eec2e9300673", "committedDate": "2020-03-20T10:27:22Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}, "afterCommit": {"oid": "a8f4bc268ab8174adefe824a63dc3ee137e44774", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/a8f4bc268ab8174adefe824a63dc3ee137e44774", "committedDate": "2020-03-25T08:41:51Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fca0d956bbe744cc0ecfdcd654bd319a8b645eee", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/fca0d956bbe744cc0ecfdcd654bd319a8b645eee", "committedDate": "2020-03-25T18:12:18Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a8f4bc268ab8174adefe824a63dc3ee137e44774", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/a8f4bc268ab8174adefe824a63dc3ee137e44774", "committedDate": "2020-03-25T08:41:51Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}, "afterCommit": {"oid": "fca0d956bbe744cc0ecfdcd654bd319a8b645eee", "author": {"user": {"login": "aarman-cloudera", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/fca0d956bbe744cc0ecfdcd654bd319a8b645eee", "committedDate": "2020-03-25T18:12:18Z", "message": "CDPCP-1601. set-password now uses credentials from control plane\n\nThe setPassword call now uses the password hash and keys from ums\nwhen possible. Note that we plan to deprecate / remove this endpoint\nsoon, but for now the UI is still calling it and this behavior\nwill keep the UMS keys consistent with the keys in FreeIPA, which\nis desirable for user keytab generation."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2428, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}