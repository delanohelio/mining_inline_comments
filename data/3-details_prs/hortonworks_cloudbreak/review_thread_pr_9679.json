{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0MTI2MDI0", "number": 9679, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMzo0NzoxMFrOFIKeTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMzo0NzoyOVrOFIKerQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0MTA0NTI2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/cluster/ambari/InstanceMetadataUpdater.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMzo0NzoxMFrOIJ7uGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMzo1MzozOVrOIJ76aQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI4NjU1Mw==", "bodyText": "a log line would be nice here", "url": "https://github.com/hortonworks/cloudbreak/pull/9679#discussion_r547286553", "createdAt": "2020-12-22T13:47:10Z", "author": {"login": "pdarvasi"}, "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/cluster/ambari/InstanceMetadataUpdater.java", "diffHunk": "@@ -264,12 +265,24 @@ private void addPackageVersionsFromGrain(GatewayConfig gatewayConfig, HostOrches\n         return packageVersionsByNameByHost;\n     }\n \n+    private void removeEmptyStack(ArrayList<String> stackTypedPackages, Entry<String, Map<String, String>> entry) {\n+        if (!CollectionUtils.isEmpty(stackTypedPackages)) {\n+            Set<String> keySet = entry.getValue().keySet();\n+            for (String stackTypedPackage : stackTypedPackages) {\n+                if (keySet.contains(stackTypedPackage)) {\n+                    if (StringUtils.isEmpty(entry.getValue().get(stackTypedPackage))) {\n+                        entry.getValue().remove(stackTypedPackage);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "068794c2ef2c7b6339f751e7bd4af71adbe27ca8"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI4OTcwNQ==", "bodyText": "done", "url": "https://github.com/hortonworks/cloudbreak/pull/9679#discussion_r547289705", "createdAt": "2020-12-22T13:53:39Z", "author": {"login": "sodre90"}, "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/cluster/ambari/InstanceMetadataUpdater.java", "diffHunk": "@@ -264,12 +265,24 @@ private void addPackageVersionsFromGrain(GatewayConfig gatewayConfig, HostOrches\n         return packageVersionsByNameByHost;\n     }\n \n+    private void removeEmptyStack(ArrayList<String> stackTypedPackages, Entry<String, Map<String, String>> entry) {\n+        if (!CollectionUtils.isEmpty(stackTypedPackages)) {\n+            Set<String> keySet = entry.getValue().keySet();\n+            for (String stackTypedPackage : stackTypedPackages) {\n+                if (keySet.contains(stackTypedPackage)) {\n+                    if (StringUtils.isEmpty(entry.getValue().get(stackTypedPackage))) {\n+                        entry.getValue().remove(stackTypedPackage);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI4NjU1Mw=="}, "originalCommit": {"oid": "068794c2ef2c7b6339f751e7bd4af71adbe27ca8"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0MTA0NjIxOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/cluster/ambari/InstanceMetadataUpdater.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMzo0NzoyOVrOIJ7uwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMzo1MzozNlrOIJ76UQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI4NjcyMQ==", "bodyText": "a unit test covering this would be good", "url": "https://github.com/hortonworks/cloudbreak/pull/9679#discussion_r547286721", "createdAt": "2020-12-22T13:47:29Z", "author": {"login": "pdarvasi"}, "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/cluster/ambari/InstanceMetadataUpdater.java", "diffHunk": "@@ -264,12 +265,24 @@ private void addPackageVersionsFromGrain(GatewayConfig gatewayConfig, HostOrches\n         return packageVersionsByNameByHost;\n     }\n \n+    private void removeEmptyStack(ArrayList<String> stackTypedPackages, Entry<String, Map<String, String>> entry) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "068794c2ef2c7b6339f751e7bd4af71adbe27ca8"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI4OTY4MQ==", "bodyText": "done", "url": "https://github.com/hortonworks/cloudbreak/pull/9679#discussion_r547289681", "createdAt": "2020-12-22T13:53:36Z", "author": {"login": "sodre90"}, "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/cluster/ambari/InstanceMetadataUpdater.java", "diffHunk": "@@ -264,12 +265,24 @@ private void addPackageVersionsFromGrain(GatewayConfig gatewayConfig, HostOrches\n         return packageVersionsByNameByHost;\n     }\n \n+    private void removeEmptyStack(ArrayList<String> stackTypedPackages, Entry<String, Map<String, String>> entry) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI4NjcyMQ=="}, "originalCommit": {"oid": "068794c2ef2c7b6339f751e7bd4af71adbe27ca8"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3391, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}