{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxMTY5Njg3", "number": 8587, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMTo1MjowNFrOEQIh3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMTo1MjowNFrOEQIh3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1MzUyNDEyOnYy", "diffSide": "RIGHT", "path": "datalake/src/main/java/com/sequenceiq/datalake/controller/sdx/SdxController.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMTo1MjowNFrOG0IKDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMjozMDoyNFrOG0JuOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMxMjc4MA==", "bodyText": "Just a note. The list datahub page shows the create datahub button if this list sdx endpoint gives back some datalakes. So after this change a user will see this button enabled and later on will figure out he doesn't have right to create datahub beacuse there is no datalake that he can use.", "url": "https://github.com/hortonworks/cloudbreak/pull/8587#discussion_r457312780", "createdAt": "2020-07-20T11:52:04Z", "author": {"login": "foldik"}, "path": "datalake/src/main/java/com/sequenceiq/datalake/controller/sdx/SdxController.java", "diffHunk": "@@ -127,7 +126,7 @@ public SdxClusterResponse getByCrn(@ResourceCrn String clusterCrn) {\n     }\n \n     @Override\n-    @FilterListBasedOnPermissions(action = AuthorizationResourceAction.DESCRIBE_DATALAKE)\n+    @CheckPermissionByAccount(action = AuthorizationResourceAction.LIST_DATALAKES)\n     public List<SdxClusterResponse> list(String envName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f862054763963a63a927a6eee01a542ae0a9968"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMzNTg0NQ==", "bodyText": "Yes, this is the same as we can click on a datalake and later we may deny to describe it. I think we already discussed  disadvantages of this solution.\nAnyway authorization of buttons and UI elements is ahead of us I think.", "url": "https://github.com/hortonworks/cloudbreak/pull/8587#discussion_r457335845", "createdAt": "2020-07-20T12:26:28Z", "author": {"login": "horadla23"}, "path": "datalake/src/main/java/com/sequenceiq/datalake/controller/sdx/SdxController.java", "diffHunk": "@@ -127,7 +126,7 @@ public SdxClusterResponse getByCrn(@ResourceCrn String clusterCrn) {\n     }\n \n     @Override\n-    @FilterListBasedOnPermissions(action = AuthorizationResourceAction.DESCRIBE_DATALAKE)\n+    @CheckPermissionByAccount(action = AuthorizationResourceAction.LIST_DATALAKES)\n     public List<SdxClusterResponse> list(String envName) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMxMjc4MA=="}, "originalCommit": {"oid": "6f862054763963a63a927a6eee01a542ae0a9968"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMzODQyNw==", "bodyText": "DatahubCreator needs be able to \"list\" datalakes in their environments in a particular environment with it's environments/listDatalakes or environemnts/describeDatalake. Since we assign this on environment level it would be easy to solve.", "url": "https://github.com/hortonworks/cloudbreak/pull/8587#discussion_r457338427", "createdAt": "2020-07-20T12:30:24Z", "author": {"login": "lnardai"}, "path": "datalake/src/main/java/com/sequenceiq/datalake/controller/sdx/SdxController.java", "diffHunk": "@@ -127,7 +126,7 @@ public SdxClusterResponse getByCrn(@ResourceCrn String clusterCrn) {\n     }\n \n     @Override\n-    @FilterListBasedOnPermissions(action = AuthorizationResourceAction.DESCRIBE_DATALAKE)\n+    @CheckPermissionByAccount(action = AuthorizationResourceAction.LIST_DATALAKES)\n     public List<SdxClusterResponse> list(String envName) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMxMjc4MA=="}, "originalCommit": {"oid": "6f862054763963a63a927a6eee01a542ae0a9968"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3051, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}