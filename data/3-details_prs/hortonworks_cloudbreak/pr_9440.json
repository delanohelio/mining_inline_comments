{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxODQ3MjIy", "number": 9440, "title": "CB-9783 update SDX HA to final shape.", "bodyText": "For 7.2.7+, SDX HA now has 2 gateway nodes and additional 3 core node that primarily\nruns Hadoop services that are dependencies of other groups.  As a result there is\nreshuffling of where services are installed.  This also includes renaming master\nto main.\nSee detailed description in the commit message.", "createdAt": "2020-11-16T18:25:00Z", "url": "https://github.com/hortonworks/cloudbreak/pull/9440", "merged": true, "mergeCommit": {"oid": "02cf1ac0dfcb6fb9bcbdde65aae56374c1efa433"}, "closed": true, "closedAt": "2020-11-18T19:31:20Z", "author": {"login": "frozenwizard"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddK48KgBqjQwMDIxNjY4ODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddxmT7ABqjQwMTE4NzI4OTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8c21214fe4aab044834e0449663aab5c2a135839", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/8c21214fe4aab044834e0449663aab5c2a135839", "committedDate": "2020-11-16T18:21:50Z", "message": "CB-9783 update SDX HA to final shape.\n\nFor 7.2.7+, SDX HA now has 2 gateway nodes and additional 3 core node that primarily\nruns Hadoop services that are dependencies of other groups.  As a result there is\nreshuffling of where services are installed.  This also includes renaming master\nto main."}, "afterCommit": {"oid": "1d75f46bbcd796efe27e9a98822c6514fc2df1f7", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/1d75f46bbcd796efe27e9a98822c6514fc2df1f7", "committedDate": "2020-11-16T20:21:54Z", "message": "CB-9783 update SDX HA to final shape.\n\nFor 7.2.7+, SDX HA now has 2 gateway nodes and additional 3 core node that primarily\nruns Hadoop services that are dependencies of other groups.  As a result there is\nreshuffling of where services are installed.  This also includes renaming master\nto main."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxNzQxODY0", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#pullrequestreview-531741864", "createdAt": "2020-11-16T20:39:40Z", "commit": {"oid": "1d75f46bbcd796efe27e9a98822c6514fc2df1f7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxODAzNzgw", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#pullrequestreview-531803780", "createdAt": "2020-11-16T21:41:29Z", "commit": {"oid": "1d75f46bbcd796efe27e9a98822c6514fc2df1f7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxODI4OTYy", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#pullrequestreview-531828962", "createdAt": "2020-11-16T22:10:28Z", "commit": {"oid": "1d75f46bbcd796efe27e9a98822c6514fc2df1f7"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjoxMDoyOFrOH0WyXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjoxMDoyOFrOH0WyXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY2MTM0MQ==", "bodyText": "We have \"core\" of \"CORE\" type and \"main\"/\"auxiliary\" of \"CORE\" type. Very confusing :)", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#discussion_r524661341", "createdAt": "2020-11-16T22:10:28Z", "author": {"login": "kmanamcheri"}, "path": "datalake/src/main/resources/duties/7.2.7/aws/medium_duty_ha.json", "diffHunk": "@@ -44,7 +84,7 @@\n         }\n       },\n       \"nodeCount\": 1,\n-      \"type\": \"GATEWAY\",\n+      \"type\": \"CORE\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d75f46bbcd796efe27e9a98822c6514fc2df1f7"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMjIwMDI0", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#pullrequestreview-532220024", "createdAt": "2020-11-17T10:25:40Z", "commit": {"oid": "1d75f46bbcd796efe27e9a98822c6514fc2df1f7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMDoyNTo0MFrOH0uKxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMDoyNTo0MFrOH0uKxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTA0NDQyMA==", "bodyText": "unclean.leader.election.enable defaults to false - you might not need to specify this parameter explicitly.\nYou can also consider omitting the config override for all the configs that now are set to the default values. Explicitly setting these is also perfectly fine.", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#discussion_r525044420", "createdAt": "2020-11-17T10:25:40Z", "author": {"login": "gergowilder"}, "path": "core/src/main/resources/defaults/blueprints/7.2.7/cdp-sdx-medium-ha.bp", "diffHunk": "@@ -361,39 +377,39 @@\n           },\n           {\n             \"name\": \"default.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"offsets.topic.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"transaction.state.log.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"offset.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"config.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"status.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"transaction.state.log.min.isr\",\n-            \"value\": \"1\"\n+            \"value\": \"2\"\n           },\n           {\n             \"name\": \"min.insync.replicas\",\n-            \"value\": \"1\"\n+            \"value\": \"2\"\n           },\n           {\n             \"name\": \"unclean.leader.election.enable\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d75f46bbcd796efe27e9a98822c6514fc2df1f7"}, "originalPosition": 173}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1d75f46bbcd796efe27e9a98822c6514fc2df1f7", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/1d75f46bbcd796efe27e9a98822c6514fc2df1f7", "committedDate": "2020-11-16T20:21:54Z", "message": "CB-9783 update SDX HA to final shape.\n\nFor 7.2.7+, SDX HA now has 2 gateway nodes and additional 3 core node that primarily\nruns Hadoop services that are dependencies of other groups.  As a result there is\nreshuffling of where services are installed.  This also includes renaming master\nto main."}, "afterCommit": {"oid": "a72f3c66ab2b500fd8b987a8831ce43482541c96", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/a72f3c66ab2b500fd8b987a8831ce43482541c96", "committedDate": "2020-11-17T21:32:41Z", "message": "CB-9783 update SDX HA to final shape.\n\nFor 7.2.7+, SDX HA now has 2 gateway nodes and additional 3 core node that primarily\nruns Hadoop services that are dependencies of other groups.  As a result there is\nreshuffling of where services are installed.  This also includes renaming master\nto main."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyODkzMjc3", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#pullrequestreview-532893277", "createdAt": "2020-11-17T23:19:21Z", "commit": {"oid": "a72f3c66ab2b500fd8b987a8831ce43482541c96"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMzoxOToyMVrOH1Pdyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMzoxOToyMVrOH1Pdyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTU4OTk2Mg==", "bodyText": "Hmm.. Didn't think about this.. Did you run a search-all on all code for the string \"master\". Hopefully this doesn't break things arbitrarily.", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#discussion_r525589962", "createdAt": "2020-11-17T23:19:21Z", "author": {"login": "kmanamcheri"}, "path": "template-manager-cmtemplate/src/main/java/com/sequenceiq/cloudbreak/cmtemplate/configproviders/raz/RangerRazBaseConfigProvider.java", "diffHunk": "@@ -30,7 +30,7 @@\n             Set<HostgroupView> hostgroupViews = source.getHostgroupViews();\n \n             return hostgroupViews.stream()\n-                    .filter(hg -> hg.getName().toLowerCase().equals(\"master\"))\n+                    .filter(hg -> hg.getName().toLowerCase().equals(\"master\") || hg.getName().toLowerCase().equals(\"main\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a72f3c66ab2b500fd8b987a8831ce43482541c96"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d169aae503e697e9198c3d38ba5ceb11696c56c2", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/d169aae503e697e9198c3d38ba5ceb11696c56c2", "committedDate": "2020-11-18T17:27:39Z", "message": "CB-9783 update SDX HA to final shape.\n\nFor 7.2.7+, SDX HA now has 2 gateway nodes and additional 3 core node that primarily\nruns Hadoop services that are dependencies of other groups.  As a result there is\nreshuffling of where services are installed."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a72f3c66ab2b500fd8b987a8831ce43482541c96", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/a72f3c66ab2b500fd8b987a8831ce43482541c96", "committedDate": "2020-11-17T21:32:41Z", "message": "CB-9783 update SDX HA to final shape.\n\nFor 7.2.7+, SDX HA now has 2 gateway nodes and additional 3 core node that primarily\nruns Hadoop services that are dependencies of other groups.  As a result there is\nreshuffling of where services are installed.  This also includes renaming master\nto main."}, "afterCommit": {"oid": "d169aae503e697e9198c3d38ba5ceb11696c56c2", "author": {"user": null}, "url": "https://github.com/hortonworks/cloudbreak/commit/d169aae503e697e9198c3d38ba5ceb11696c56c2", "committedDate": "2020-11-18T17:27:39Z", "message": "CB-9783 update SDX HA to final shape.\n\nFor 7.2.7+, SDX HA now has 2 gateway nodes and additional 3 core node that primarily\nruns Hadoop services that are dependencies of other groups.  As a result there is\nreshuffling of where services are installed."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2126, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}