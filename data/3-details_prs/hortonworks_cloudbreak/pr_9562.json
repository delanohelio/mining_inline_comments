{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMTA0Njk4", "number": 9562, "title": "CB-10072 Basic CRN resource type validation", "bodyText": "this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\nchecking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\nintroduced new ValidCrnCollection annotation for crn collections in APIs\nadding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects\n\nSee detailed description in the commit message.", "createdAt": "2020-12-02T15:40:59Z", "url": "https://github.com/hortonworks/cloudbreak/pull/9562", "merged": true, "mergeCommit": {"oid": "8c767c6adc526e5ff3ce01c1e1bccec12783f36d"}, "closed": true, "closedAt": "2020-12-08T14:51:23Z", "author": {"login": "horadla23"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiQtR-ABqjQwNjMxMTMxMjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkI3mogBqjQwODQ0MjIyNjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fd854d26d172f4af6fd468c104066d6d12034014", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/fd854d26d172f4af6fd468c104066d6d12034014", "committedDate": "2020-12-02T15:36:06Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}, "afterCommit": {"oid": "badc2994ef59cb66adcf85ac14b19d9e3a91316f", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/badc2994ef59cb66adcf85ac14b19d9e3a91316f", "committedDate": "2020-12-02T15:58:13Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "badc2994ef59cb66adcf85ac14b19d9e3a91316f", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/badc2994ef59cb66adcf85ac14b19d9e3a91316f", "committedDate": "2020-12-02T15:58:13Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}, "afterCommit": {"oid": "f4ba49327103d40b0f07b8bbb0fbdc0205a4b8a2", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/f4ba49327103d40b0f07b8bbb0fbdc0205a4b8a2", "committedDate": "2020-12-02T16:00:18Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f4ba49327103d40b0f07b8bbb0fbdc0205a4b8a2", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/f4ba49327103d40b0f07b8bbb0fbdc0205a4b8a2", "committedDate": "2020-12-02T16:00:18Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}, "afterCommit": {"oid": "6d5e81f47db1677137f38d809ee5b175d616d84a", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/6d5e81f47db1677137f38d809ee5b175d616d84a", "committedDate": "2020-12-02T16:50:55Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d5e81f47db1677137f38d809ee5b175d616d84a", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/6d5e81f47db1677137f38d809ee5b175d616d84a", "committedDate": "2020-12-02T16:50:55Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}, "afterCommit": {"oid": "d675dc883203b252084324f0fa87b059e99c421a", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/d675dc883203b252084324f0fa87b059e99c421a", "committedDate": "2020-12-02T20:25:36Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d675dc883203b252084324f0fa87b059e99c421a", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/d675dc883203b252084324f0fa87b059e99c421a", "committedDate": "2020-12-02T20:25:36Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}, "afterCommit": {"oid": "203801c82a64d55254246ba14eaece86357a8325", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/203801c82a64d55254246ba14eaece86357a8325", "committedDate": "2020-12-03T05:16:07Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "203801c82a64d55254246ba14eaece86357a8325", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/203801c82a64d55254246ba14eaece86357a8325", "committedDate": "2020-12-03T05:16:07Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}, "afterCommit": {"oid": "39cbf20f5eebc7c85198e866346ec49f3c65ec46", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/39cbf20f5eebc7c85198e866346ec49f3c65ec46", "committedDate": "2020-12-03T06:46:37Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39cbf20f5eebc7c85198e866346ec49f3c65ec46", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/39cbf20f5eebc7c85198e866346ec49f3c65ec46", "committedDate": "2020-12-03T06:46:37Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}, "afterCommit": {"oid": "35e325eccc9ae09aa5a55b288e2201ec51416bc4", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/35e325eccc9ae09aa5a55b288e2201ec51416bc4", "committedDate": "2020-12-03T11:03:25Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "35e325eccc9ae09aa5a55b288e2201ec51416bc4", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/35e325eccc9ae09aa5a55b288e2201ec51416bc4", "committedDate": "2020-12-03T11:03:25Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}, "afterCommit": {"oid": "7d562207417c71a2c50391c70ba709b251b119bd", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/7d562207417c71a2c50391c70ba709b251b119bd", "committedDate": "2020-12-03T11:08:36Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d562207417c71a2c50391c70ba709b251b119bd", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/7d562207417c71a2c50391c70ba709b251b119bd", "committedDate": "2020-12-03T11:08:36Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}, "afterCommit": {"oid": "b186bc8d1a208dbe9c49b50fc60eb8c272a92182", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/b186bc8d1a208dbe9c49b50fc60eb8c272a92182", "committedDate": "2020-12-03T11:23:55Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b186bc8d1a208dbe9c49b50fc60eb8c272a92182", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/b186bc8d1a208dbe9c49b50fc60eb8c272a92182", "committedDate": "2020-12-03T11:23:55Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn."}, "afterCommit": {"oid": "cc20b10384a438d30598f22839b57f052509e1b6", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/cc20b10384a438d30598f22839b57f052509e1b6", "committedDate": "2020-12-03T14:07:12Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc20b10384a438d30598f22839b57f052509e1b6", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/cc20b10384a438d30598f22839b57f052509e1b6", "committedDate": "2020-12-03T14:07:12Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}, "afterCommit": {"oid": "173b201499ddff0d65cc021dfee7d76563e22dcb", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/173b201499ddff0d65cc021dfee7d76563e22dcb", "committedDate": "2020-12-03T17:25:40Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "173b201499ddff0d65cc021dfee7d76563e22dcb", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/173b201499ddff0d65cc021dfee7d76563e22dcb", "committedDate": "2020-12-03T17:25:40Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}, "afterCommit": {"oid": "9fc3e12fdac6b4833fc97a81be9e2cd72f4ff782", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/9fc3e12fdac6b4833fc97a81be9e2cd72f4ff782", "committedDate": "2020-12-04T06:46:56Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0ODUzNDQ1", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#pullrequestreview-544853445", "createdAt": "2020-12-04T10:53:17Z", "commit": {"oid": "9fc3e12fdac6b4833fc97a81be9e2cd72f4ff782"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxMDo1MzoxN1rOH_LlKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxMDo1MzoxN1rOH_LlKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjAxMjA3Mg==", "bodyText": "looks dangerous :)", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#discussion_r536012072", "createdAt": "2020-12-04T10:53:17Z", "author": {"login": "lnardai"}, "path": "auth-internal/src/main/java/com/sequenceiq/cloudbreak/auth/security/internal/InternalCrnModifier.java", "diffHunk": "@@ -63,12 +63,7 @@ public Object changeInternalCrn(ProceedingJoinPoint proceedingJoinPoint) {\n \n     private String getAccountIdModifiedCrn(String userCrnString, String accountId) {\n         Crn userCrn = Crn.fromString(userCrnString);\n-        Crn newUserCrn = Crn.builder()\n-                .setService(userCrn.getService())\n-                .setAccountId(accountId)\n-                .setResourceType(userCrn.getResourceType())\n-                .setResource(userCrn.getResource())\n-                .build();\n+        Crn newUserCrn = Crn.copyWithDifferentAccountId(userCrn, accountId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9fc3e12fdac6b4833fc97a81be9e2cd72f4ff782"}, "originalPosition": 19}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9fc3e12fdac6b4833fc97a81be9e2cd72f4ff782", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/9fc3e12fdac6b4833fc97a81be9e2cd72f4ff782", "committedDate": "2020-12-04T06:46:56Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}, "afterCommit": {"oid": "f8f3e822b7e351c46bb18b2c6ea356f486160441", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/f8f3e822b7e351c46bb18b2c6ea356f486160441", "committedDate": "2020-12-04T13:55:14Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f8f3e822b7e351c46bb18b2c6ea356f486160441", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/f8f3e822b7e351c46bb18b2c6ea356f486160441", "committedDate": "2020-12-04T13:55:14Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}, "afterCommit": {"oid": "1c4d9f6468fb315bd8ec79766d94f710b45e1bf3", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/1c4d9f6468fb315bd8ec79766d94f710b45e1bf3", "committedDate": "2020-12-04T14:17:06Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MDM4MDI0", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#pullrequestreview-546038024", "createdAt": "2020-12-07T10:58:40Z", "commit": {"oid": "1c4d9f6468fb315bd8ec79766d94f710b45e1bf3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMDo1ODo0MFrOIAhK4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMDo1ODo0MFrOIAhK4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQxNDM3MA==", "bodyText": "just a stupid idea: I think it would be easier to read through the list if it would be grouped by services and the items would be alphabetically ordered inside the groups.\nMore nice way would be if the items would be in separate file by service, but that maybe would cause more complexity than benefit.", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#discussion_r537414370", "createdAt": "2020-12-07T10:58:40Z", "author": {"login": "lacikaaa"}, "path": "common/src/main/java/com/sequenceiq/cloudbreak/auth/altus/CrnResourceDescriptor.java", "diffHunk": "@@ -0,0 +1,57 @@\n+package com.sequenceiq.cloudbreak.auth.altus;\n+\n+import org.apache.commons.lang3.tuple.Pair;\n+\n+public enum CrnResourceDescriptor {\n+    ENVIRONMENT(Crn.ResourceType.ENVIRONMENT, Crn.Service.ENVIRONMENTS),\n+    DATALAKE(Crn.ResourceType.DATALAKE, Crn.Service.DATALAKE),\n+    FREEIPA(Crn.ResourceType.FREEIPA, Crn.Service.FREEIPA),\n+    KERBEROS(Crn.ResourceType.KERBEROS, Crn.Service.FREEIPA),\n+    LDAP(Crn.ResourceType.LDAP, Crn.Service.FREEIPA),\n+    DATAHUB(Crn.ResourceType.CLUSTER, Crn.Service.DATAHUB),\n+    CLUSTER_DEF(Crn.ResourceType.CLUSTER_DEFINITION, Crn.Service.DATAHUB),\n+    CLUSTER_TEMPLATE(Crn.ResourceType.CLUSTER_TEMPLATE, Crn.Service.DATAHUB),\n+    CREDENTIAL(Crn.ResourceType.CREDENTIAL, Crn.Service.ENVIRONMENTS),\n+    IMAGE_CATALOG(Crn.ResourceType.IMAGE_CATALOG, Crn.Service.DATAHUB),\n+    RECIPE(Crn.ResourceType.RECIPE, Crn.Service.DATAHUB),\n+    PROXY(Crn.ResourceType.PROXY_CONIFG, Crn.Service.ENVIRONMENTS),\n+    ACCOUNT_TAG(Crn.ResourceType.ACCOUNT_TAG, Crn.Service.ACCOUNTTAG),\n+    ACCOUNT_TELEMETRY(Crn.ResourceType.ACCOUNT_TELEMETRY, Crn.Service.ACCOUNTTELEMETRY),\n+    NETWORK(Crn.ResourceType.NETWORK, Crn.Service.ENVIRONMENTS),\n+    ROLE(Crn.ResourceType.ROLE, Crn.Service.IAM),\n+    RESOURCE_ROLE(Crn.ResourceType.RESOURCE_ROLE, Crn.Service.IAM),\n+    ALERT(Crn.ResourceType.DATAHUB_AUTOSCALE_CONFIG, Crn.Service.AUTOSCALE),\n+    DATABASE(Crn.ResourceType.DATABASE, Crn.Service.REDBEAMS),\n+    DATABASE_SERVER(Crn.ResourceType.DATABASE_SERVER, Crn.Service.REDBEAMS),\n+    USER(Crn.ResourceType.USER, Crn.Service.IAM),\n+    PUBLIC_KEY(Crn.ResourceType.PUBLIC_KEY, Crn.Service.IAM),\n+    MACHINE_USER(Crn.ResourceType.MACHINE_USER, Crn.Service.IAM),\n+    GROUP(Crn.ResourceType.GROUP, Crn.Service.IAM),\n+    POLICY(Crn.ResourceType.POLICY, Crn.Service.IAM);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c4d9f6468fb315bd8ec79766d94f710b45e1bf3"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MDQwMjE3", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#pullrequestreview-546040217", "createdAt": "2020-12-07T11:01:33Z", "commit": {"oid": "1c4d9f6468fb315bd8ec79766d94f710b45e1bf3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMTowMTozM1rOIAhSJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMTowMTozM1rOIAhSJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQxNjIyOQ==", "bodyText": "could you break this into smaller methods?", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#discussion_r537416229", "createdAt": "2020-12-07T11:01:33Z", "author": {"login": "lacikaaa"}, "path": "common/src/main/java/com/sequenceiq/cloudbreak/validation/CrnCollectionValidator.java", "diffHunk": "@@ -0,0 +1,64 @@\n+package com.sequenceiq.cloudbreak.validation;\n+\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.validation.ConstraintValidator;\n+import javax.validation.ConstraintValidatorContext;\n+\n+import org.apache.commons.lang3.tuple.Pair;\n+\n+import com.google.common.base.Joiner;\n+import com.sequenceiq.cloudbreak.auth.altus.Crn;\n+import com.sequenceiq.cloudbreak.auth.altus.CrnResourceDescriptor;\n+\n+public class CrnCollectionValidator implements ConstraintValidator<ValidCrnCollection, Collection<String>> {\n+\n+    private CrnResourceDescriptor[] resourceDescriptors;\n+\n+    @Override\n+    public void initialize(ValidCrnCollection constraintAnnotation) {\n+        resourceDescriptors = constraintAnnotation.resource();\n+    }\n+\n+    @Override\n+    public boolean isValid(Collection<String> req, ConstraintValidatorContext constraintValidatorContext) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c4d9f6468fb315bd8ec79766d94f710b45e1bf3"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MDQxNzg2", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#pullrequestreview-546041786", "createdAt": "2020-12-07T11:03:41Z", "commit": {"oid": "1c4d9f6468fb315bd8ec79766d94f710b45e1bf3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMTowMzo0MVrOIAhXPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMTowMzo0MVrOIAhXPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQxNzUzNQ==", "bodyText": "I feel like there is a lot of code duplication here with CrnCollectionValidator. Could you move the common parts into a common class?", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#discussion_r537417535", "createdAt": "2020-12-07T11:03:41Z", "author": {"login": "lacikaaa"}, "path": "common/src/main/java/com/sequenceiq/cloudbreak/validation/CrnValidator.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package com.sequenceiq.cloudbreak.validation;\n+\n+import java.util.Arrays;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.validation.ConstraintValidator;\n+import javax.validation.ConstraintValidatorContext;\n+\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.commons.lang3.tuple.Pair;\n+\n+import com.google.common.base.Joiner;\n+import com.sequenceiq.cloudbreak.auth.altus.Crn;\n+import com.sequenceiq.cloudbreak.auth.altus.CrnResourceDescriptor;\n+\n+public class CrnValidator implements ConstraintValidator<ValidCrn, String> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c4d9f6468fb315bd8ec79766d94f710b45e1bf3"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MDc0NzQz", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#pullrequestreview-546074743", "createdAt": "2020-12-07T11:50:05Z", "commit": {"oid": "1c4d9f6468fb315bd8ec79766d94f710b45e1bf3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1c4d9f6468fb315bd8ec79766d94f710b45e1bf3", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/1c4d9f6468fb315bd8ec79766d94f710b45e1bf3", "committedDate": "2020-12-04T14:17:06Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}, "afterCommit": {"oid": "baa8482136b6aea2db2c6fbd06cdefa5e26cc260", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/baa8482136b6aea2db2c6fbd06cdefa5e26cc260", "committedDate": "2020-12-07T11:57:23Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MDk0MTc5", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#pullrequestreview-546094179", "createdAt": "2020-12-07T12:17:56Z", "commit": {"oid": "baa8482136b6aea2db2c6fbd06cdefa5e26cc260"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMjoxNzo1NlrOIAkFVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMjoxNzo1NlrOIAkFVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQ2MjEwMg==", "bodyText": "Question: does the Crn validation work with a collection of Crns as well?", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#discussion_r537462102", "createdAt": "2020-12-07T12:17:56Z", "author": {"login": "gergopapi2"}, "path": "redbeams-api/src/main/java/com/sequenceiq/redbeams/api/endpoint/v4/databaseserver/DatabaseServerV4Endpoint.java", "diffHunk": "@@ -138,7 +141,7 @@ DatabaseServerV4Response deleteByName(\n     @ApiOperation(value = DatabaseServerOpDescription.DELETE_MULTIPLE_BY_CRN, notes = DatabaseServerNotes.DELETE_MULTIPLE_BY_CRN,\n             consumes = MediaType.APPLICATION_JSON, nickname = \"deleteMultipleDatabaseServersByCrn\")\n     DatabaseServerV4Responses deleteMultiple(\n-            @ApiParam(DatabaseServerParamDescriptions.CRNS) Set<@ValidCrn String> crns,\n+            @ApiParam(DatabaseServerParamDescriptions.CRNS) @ValidCrn(resource = DATABASE_SERVER) Set<String> crns,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "baa8482136b6aea2db2c6fbd06cdefa5e26cc260"}, "originalPosition": 68}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "baa8482136b6aea2db2c6fbd06cdefa5e26cc260", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/baa8482136b6aea2db2c6fbd06cdefa5e26cc260", "committedDate": "2020-12-07T11:57:23Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}, "afterCommit": {"oid": "77695c193313eb0218512e05021307da2d7d7e04", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/77695c193313eb0218512e05021307da2d7d7e04", "committedDate": "2020-12-07T13:53:22Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "77695c193313eb0218512e05021307da2d7d7e04", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/77695c193313eb0218512e05021307da2d7d7e04", "committedDate": "2020-12-07T13:53:22Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}, "afterCommit": {"oid": "05efbbb75dfa18ba1e5e154de144b8dae6e09c1e", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/05efbbb75dfa18ba1e5e154de144b8dae6e09c1e", "committedDate": "2020-12-07T14:10:31Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2OTI4NzU1", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#pullrequestreview-546928755", "createdAt": "2020-12-08T09:20:40Z", "commit": {"oid": "05efbbb75dfa18ba1e5e154de144b8dae6e09c1e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2OTQwNjY2", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#pullrequestreview-546940666", "createdAt": "2020-12-08T09:29:01Z", "commit": {"oid": "05efbbb75dfa18ba1e5e154de144b8dae6e09c1e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOToyOTowMVrOIBPoBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOToyOTowMVrOIBPoBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE3NTQ5Mw==", "bodyText": "static import ? we used it in EnvironmentEndpoint.java", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#discussion_r538175493", "createdAt": "2020-12-08T09:29:01Z", "author": {"login": "doktoric"}, "path": "environment/src/main/java/com/sequenceiq/environment/environment/v1/EnvironmentController.java", "diffHunk": "@@ -141,7 +143,7 @@ public EnvironmentCrnResponse getCrnByName(@ResourceName String environmentName)\n \n     @Override\n     @CheckPermissionByResourceCrn(action = AuthorizationResourceAction.DESCRIBE_ENVIRONMENT)\n-    public DetailedEnvironmentResponse getByCrn(@ResourceCrn @TenantAwareParam String crn) {\n+    public DetailedEnvironmentResponse getByCrn(@ValidCrn(resource = CrnResourceDescriptor.ENVIRONMENT) @ResourceCrn @TenantAwareParam String crn) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05efbbb75dfa18ba1e5e154de144b8dae6e09c1e"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2OTYwMzE3", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#pullrequestreview-546960317", "createdAt": "2020-12-08T09:41:45Z", "commit": {"oid": "05efbbb75dfa18ba1e5e154de144b8dae6e09c1e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOTo0MTo0NlrOIBQMHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOTo0OToxMlrOIBQjMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4NDczNA==", "bodyText": "is the resourceDescriptor required or why do you add to the param list?", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#discussion_r538184734", "createdAt": "2020-12-08T09:41:46Z", "author": {"login": "topolyai5"}, "path": "common/src/main/java/com/sequenceiq/cloudbreak/auth/altus/Crn.java", "diffHunk": "@@ -591,32 +600,45 @@ public static Builder builder() {\n \n         private String resource;\n \n-        public Builder setPartition(Partition partition) {\n-            this.partition = checkNotNull(partition);\n+        /**\n+         * @deprecated ALTUS was replaced by CDP and is kept here for backward compatibility reasons (e.g., dynamodb serialized CRNs).\n+         */\n+        @Deprecated\n+        public Builder setOldPartition() {\n+            this.partition = Partition.ALTUS;\n             return this;\n         }\n \n-        public Builder setService(Service service) {\n-            this.service = checkNotNull(service);\n+        public Builder setAccountId(String accountId) {\n+            this.accountId = checkNotNull(accountId);\n             return this;\n         }\n \n-        public Builder setAccountId(String accountId) {\n-            this.accountId = checkNotNull(accountId);\n+        public Builder setResource(String resource) {\n+            this.resource = checkNotNull(resource);\n             return this;\n         }\n \n-        public Builder setResourceType(ResourceType resourceType) {\n-            this.resourceType = checkNotNull(resourceType);\n+        public Crn build(CrnResourceDescriptor resourceDescriptor) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05efbbb75dfa18ba1e5e154de144b8dae6e09c1e"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE5MDY0Mw==", "bodyText": "could you please change for this: EnvironmentInternalGetAction or remove one of them?", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#discussion_r538190643", "createdAt": "2020-12-08T09:49:12Z", "author": {"login": "topolyai5"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/client/EnvironmentTestClient.java", "diffHunk": "@@ -36,6 +38,10 @@\n         return new EnvironmentGetAction();\n     }\n \n+    public Action<EnvironmentTestDto, EnvironmentClient> describeByCrn() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05efbbb75dfa18ba1e5e154de144b8dae6e09c1e"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MDMyMzM0", "url": "https://github.com/hortonworks/cloudbreak/pull/9562#pullrequestreview-547032334", "createdAt": "2020-12-08T10:22:16Z", "commit": {"oid": "05efbbb75dfa18ba1e5e154de144b8dae6e09c1e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a139d4743961194841c200e52d173685f5c2c354", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/a139d4743961194841c200e52d173685f5c2c354", "committedDate": "2020-12-08T11:58:08Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "05efbbb75dfa18ba1e5e154de144b8dae6e09c1e", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/05efbbb75dfa18ba1e5e154de144b8dae6e09c1e", "committedDate": "2020-12-07T14:10:31Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}, "afterCommit": {"oid": "a139d4743961194841c200e52d173685f5c2c354", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/a139d4743961194841c200e52d173685f5c2c354", "committedDate": "2020-12-08T11:58:08Z", "message": "CB-10072 Basic CRN resource type validation\n- this commit ensures that resources can be created with predefined resourcetype/servictype pair, also some parts of CRN should not be configurable (like partition, region).\n- checking for resourcetype/servicetype pair has been added to ValidCrn annotation to avoid situations like calling environment related endpoint with datalake crn.\n- introduced new ValidCrnCollection annotation for crn collections in APIs\n- adding more restrictive ValidCrn/ValidCrncollection to some environment APIs calls and freeipa request objects"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1919, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}