{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0MTM1MDQw", "number": 8871, "title": "CB-8547: Use FreeIPA healthcheck for cluster proxy", "bodyText": "Register the FreeIPA healthcheck with cluster proxy for new clusters.\nContinue using the old login page as the status check for clusters\nthat were provisioned prior to the healthcheck's existence.\nThis was tested with a local deployment of cloudbreak.\nSee detailed description in the commit message.", "createdAt": "2020-08-26T20:26:09Z", "url": "https://github.com/hortonworks/cloudbreak/pull/8871", "merged": true, "mergeCommit": {"oid": "21613be7e6c5eb70fd471fb842ed1edde6d785f2"}, "closed": true, "closedAt": "2020-08-28T16:22:08Z", "author": {"login": "jamisonbennett"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdC_BvKAFqTQ3NjYzNjQ1OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDHmyzgFqTQ3NzEwOTA5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NjM2NDU4", "url": "https://github.com/hortonworks/cloudbreak/pull/8871#pullrequestreview-476636458", "createdAt": "2020-08-27T11:44:23Z", "commit": {"oid": "a4145e9076a5dba021e2424638c36fb35357d9c8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMTo0NDoyM1rOHIMb8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMTo0NDoyM1rOHIMb8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODM1NDQxNw==", "bodyText": "could you drop static and convert this class to @Component and use inject in ClusterProxyService so we can mock this class easily if we add unit tests for it?", "url": "https://github.com/hortonworks/cloudbreak/pull/8871#discussion_r478354417", "createdAt": "2020-08-27T11:44:23Z", "author": {"login": "lacikaaa"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/util/HealthCheckAvailabilityChecker.java", "diffHunk": "@@ -0,0 +1,26 @@\n+package com.sequenceiq.freeipa.util;\n+\n+import org.apache.commons.lang3.StringUtils;\n+\n+import com.sequenceiq.cloudbreak.cloud.VersionComparator;\n+import com.sequenceiq.cloudbreak.common.type.Versioned;\n+import com.sequenceiq.freeipa.entity.Stack;\n+\n+public class HealthCheckAvailabilityChecker {\n+\n+    // feature supported from 2.29\n+    private static final Versioned CDP_FREEIPA_HEALTH_AGENT_AFTER_VERSION = () -> \"2.28.0\";\n+\n+    private HealthCheckAvailabilityChecker() {\n+    }\n+\n+    public static boolean isCdpFreeIpaHeathAgentAvailable(Stack stack) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4145e9076a5dba021e2424638c36fb35357d9c8"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8827f03d4836a5a8cc3b689661fc5283260c9c16", "author": {"user": {"login": "jamisonbennett", "name": "Jamison Bennett"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8827f03d4836a5a8cc3b689661fc5283260c9c16", "committedDate": "2020-08-27T16:31:15Z", "message": "CB-8547: Use FreeIPA healthcheck for cluster proxy\n\nRegister the FreeIPA healthcheck with cluster proxy for new clusters.\nContinue using the old login page as the status check for clusters\nthat were provisioned prior to the healthcheck's existence.\n\nThis was tested with a local deployment of cloudbreak."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a4145e9076a5dba021e2424638c36fb35357d9c8", "author": {"user": {"login": "jamisonbennett", "name": "Jamison Bennett"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/a4145e9076a5dba021e2424638c36fb35357d9c8", "committedDate": "2020-08-26T20:24:00Z", "message": "CB-8547: Use FreeIPA healthcheck for cluster proxy\n\nRegister the FreeIPA healthcheck with cluster proxy for new clusters.\nContinue using the old login page as the status check for clusters\nthat were provisioned prior to the healthcheck's existence.\n\nThis was tested with a local deployment of cloudbreak."}, "afterCommit": {"oid": "8827f03d4836a5a8cc3b689661fc5283260c9c16", "author": {"user": {"login": "jamisonbennett", "name": "Jamison Bennett"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8827f03d4836a5a8cc3b689661fc5283260c9c16", "committedDate": "2020-08-27T16:31:15Z", "message": "CB-8547: Use FreeIPA healthcheck for cluster proxy\n\nRegister the FreeIPA healthcheck with cluster proxy for new clusters.\nContinue using the old login page as the status check for clusters\nthat were provisioned prior to the healthcheck's existence.\n\nThis was tested with a local deployment of cloudbreak."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MTA5MDk4", "url": "https://github.com/hortonworks/cloudbreak/pull/8871#pullrequestreview-477109098", "createdAt": "2020-08-27T21:50:43Z", "commit": {"oid": "8827f03d4836a5a8cc3b689661fc5283260c9c16"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2368, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}