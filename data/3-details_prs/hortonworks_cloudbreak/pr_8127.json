{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMzY5NjM0", "number": 8127, "title": "CB-6730. List instance groups even if all metadata are terminated.", "bodyText": "Problem\n\non resize, if you have downscaled all the nodes for an instance groups you cannot get back the instance group itself with 0 instance metadata (if ALL terminated)\n\nChanges\n\nremoved left join fetch query\nget instance groups by stack and filter in java on the non-terminated instance metadata\n\nWhy like this?\n\ncondition (not terminated) should go into the right side of the join -> BUT you cannot include any with/on-clause if you are using fetch\nwithout using fetch, we end up to using many queries (around 8)\nwith the actual (removed) query, we still load stack anyway in the objects, so it contains all instance groups/instance metadata -> in terms of space/load query only the instance group with all metadata should not cause larger heap space", "createdAt": "2020-05-21T14:03:03Z", "url": "https://github.com/hortonworks/cloudbreak/pull/8127", "merged": true, "mergeCommit": {"oid": "3fa7d883d59f8e94523cdde0b53e15291a5789de"}, "closed": true, "closedAt": "2020-06-15T11:45:10Z", "author": {"login": "oleewere"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjsa2fgFqTQxNjY4MDMyNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcreIs-gFqTQzMDUxODI1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NjgwMzI0", "url": "https://github.com/hortonworks/cloudbreak/pull/8127#pullrequestreview-416680324", "createdAt": "2020-05-22T06:38:35Z", "commit": {"oid": "62afce07862a6f29b574df15b2a1d8eff7607736"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "62afce07862a6f29b574df15b2a1d8eff7607736", "author": {"user": {"login": "oleewere", "name": "Oliv\u00e9r Szabo"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/62afce07862a6f29b574df15b2a1d8eff7607736", "committedDate": "2020-05-21T13:55:03Z", "message": "CB-6730. List terminated groups even if all metadata is terminated."}, "afterCommit": {"oid": "2f966656fed8325653a51f08fe81f884c9374937", "author": {"user": {"login": "oleewere", "name": "Oliv\u00e9r Szabo"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/2f966656fed8325653a51f08fe81f884c9374937", "committedDate": "2020-06-11T13:14:53Z", "message": "CB-6730. List terminated groups even if all metadata is terminated."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNDM1NDk3", "url": "https://github.com/hortonworks/cloudbreak/pull/8127#pullrequestreview-430435497", "createdAt": "2020-06-15T08:40:15Z", "commit": {"oid": "2f966656fed8325653a51f08fe81f884c9374937"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODo0MDoxNVrOGjok3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODo0MDoxNVrOGjok3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxODE0MQ==", "bodyText": "this name is more readable and meaningful: replaceInstanceMetadata or stuff like this", "url": "https://github.com/hortonworks/cloudbreak/pull/8127#discussion_r440018141", "createdAt": "2020-06-15T08:40:15Z", "author": {"login": "topolyai5"}, "path": "core-model/src/main/java/com/sequenceiq/cloudbreak/domain/stack/instance/InstanceGroup.java", "diffHunk": "@@ -105,6 +105,12 @@ public void setStack(Stack stack) {\n         this.stack = stack;\n     }\n \n+    public InstanceGroup instanceMetaData(Set<InstanceMetaData> instanceMetaData) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f966656fed8325653a51f08fe81f884c9374937"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6c885cea6df0ae92008a4af5f70cd5d91adae29", "author": {"user": {"login": "oleewere", "name": "Oliv\u00e9r Szabo"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/c6c885cea6df0ae92008a4af5f70cd5d91adae29", "committedDate": "2020-06-15T09:12:29Z", "message": "CB-6730. List terminated groups even if all metadata is terminated."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2f966656fed8325653a51f08fe81f884c9374937", "author": {"user": {"login": "oleewere", "name": "Oliv\u00e9r Szabo"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/2f966656fed8325653a51f08fe81f884c9374937", "committedDate": "2020-06-11T13:14:53Z", "message": "CB-6730. List terminated groups even if all metadata is terminated."}, "afterCommit": {"oid": "c6c885cea6df0ae92008a4af5f70cd5d91adae29", "author": {"user": {"login": "oleewere", "name": "Oliv\u00e9r Szabo"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/c6c885cea6df0ae92008a4af5f70cd5d91adae29", "committedDate": "2020-06-15T09:12:29Z", "message": "CB-6730. List terminated groups even if all metadata is terminated."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNTE4MjU1", "url": "https://github.com/hortonworks/cloudbreak/pull/8127#pullrequestreview-430518255", "createdAt": "2020-06-15T10:31:29Z", "commit": {"oid": "c6c885cea6df0ae92008a4af5f70cd5d91adae29"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1877, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}