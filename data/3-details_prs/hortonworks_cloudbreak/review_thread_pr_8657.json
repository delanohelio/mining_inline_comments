{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3ODE5NzIx", "number": 8657, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo1MDozMFrOES2b-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo1MDozMFrOES2b-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MjAxNzIwOnYy", "diffSide": "RIGHT", "path": "environment/src/main/java/com/sequenceiq/environment/credential/service/CredentialService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo1MDozMFrOG4QftQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo1MDozMFrOG4QftQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY0MzcwMQ==", "bodyText": "couldn't we just drop the whole transaction?\nI'm not sure about the UMS call, but that could take up some time as it's an external call. If we can skip it it would be great.\nbut I would definitely move the notification out from the transaction", "url": "https://github.com/hortonworks/cloudbreak/pull/8657#discussion_r461643701", "createdAt": "2020-07-28T14:50:30Z", "author": {"login": "lacikaaa"}, "path": "environment/src/main/java/com/sequenceiq/environment/credential/service/CredentialService.java", "diffHunk": "@@ -179,12 +179,12 @@ public Credential create(Credential credential, @Nonnull String accountId, @Nonn\n         credential.setResourceCrn(credentialCrn);\n         credential.setCreator(creatorUserCrn);\n         credential.setAccountId(accountId);\n+        Credential verifiedCredential = credentialAdapter.verify(credential, accountId).getCredential();\n+        if (verifiedCredential.getVerificationStatusText() != null) {\n+            throw new BadRequestException(verifiedCredential.getVerificationStatusText());\n+        }\n         try {\n             return transactionService.required(() -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66973ab8d17e5077f07a5cc7821c604df50a50f6"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2975, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}