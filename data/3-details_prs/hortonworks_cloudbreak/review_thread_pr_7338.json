{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NzY5MDU4", "number": 7338, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxNDoxODowM1rODhipyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMzowNzo0NFrODisbiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NDk3MzUyOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/cluster/ClusterRepairService.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxNDoxODowM1rOFsVCBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMjo1MToyMFrOFuE3rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjAyNjI0Nw==", "bodyText": "Can you extend the unit test as well?", "url": "https://github.com/hortonworks/cloudbreak/pull/7338#discussion_r382026247", "createdAt": "2020-02-20T14:18:03Z", "author": {"login": "foldik"}, "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/cluster/ClusterRepairService.java", "diffHunk": "@@ -362,12 +364,14 @@ private void triggerRepairOrThrowBadRequest(Long stackId, Result<Map<HostGroupNa\n             boolean removeOnly,\n             Set<String> recoveryMessageArgument) {\n         if (repairValidationResult.isError()) {\n+            eventService.fireCloudbreakEvent(stackId, RECOVERY, CLUSTER_MANUALRECOVERY_COULD_NOT_START, repairValidationResult.getError().getValidationErrors());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a178818250ed595b9150c4ec6966fd84716fcad"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjEzMzk2Nw==", "bodyText": "On hold because Unit test are broken.", "url": "https://github.com/hortonworks/cloudbreak/pull/7338#discussion_r382133967", "createdAt": "2020-02-20T17:02:59Z", "author": {"login": "lnardai"}, "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/cluster/ClusterRepairService.java", "diffHunk": "@@ -362,12 +364,14 @@ private void triggerRepairOrThrowBadRequest(Long stackId, Result<Map<HostGroupNa\n             boolean removeOnly,\n             Set<String> recoveryMessageArgument) {\n         if (repairValidationResult.isError()) {\n+            eventService.fireCloudbreakEvent(stackId, RECOVERY, CLUSTER_MANUALRECOVERY_COULD_NOT_START, repairValidationResult.getError().getValidationErrors());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjAyNjI0Nw=="}, "originalCommit": {"oid": "8a178818250ed595b9150c4ec6966fd84716fcad"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg1ODYwNw==", "bodyText": "Added unit tests.", "url": "https://github.com/hortonworks/cloudbreak/pull/7338#discussion_r383858607", "createdAt": "2020-02-25T12:51:20Z", "author": {"login": "lnardai"}, "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/cluster/ClusterRepairService.java", "diffHunk": "@@ -362,12 +364,14 @@ private void triggerRepairOrThrowBadRequest(Long stackId, Result<Map<HostGroupNa\n             boolean removeOnly,\n             Set<String> recoveryMessageArgument) {\n         if (repairValidationResult.isError()) {\n+            eventService.fireCloudbreakEvent(stackId, RECOVERY, CLUSTER_MANUALRECOVERY_COULD_NOT_START, repairValidationResult.getError().getValidationErrors());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjAyNjI0Nw=="}, "originalCommit": {"oid": "8a178818250ed595b9150c4ec6966fd84716fcad"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NzA2MTIzOnYy", "diffSide": "RIGHT", "path": "core/src/test/java/com/sequenceiq/cloudbreak/service/cluster/ClusterRepairServiceTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMzowNzo0NVrOFuFWvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMzowNzo0NVrOFuFWvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg2NjU1Nw==", "bodyText": "Do we need this in the future?", "url": "https://github.com/hortonworks/cloudbreak/pull/7338#discussion_r383866557", "createdAt": "2020-02-25T13:07:45Z", "author": {"login": "foldik"}, "path": "core/src/test/java/com/sequenceiq/cloudbreak/service/cluster/ClusterRepairServiceTest.java", "diffHunk": "@@ -237,6 +241,7 @@ public void testCannotRepairGatewayWithoutExternalDatabase() throws CloudbreakIm\n         boolean result = underTest.canRepairAll(stack);\n \n         assertFalse(result);\n+        //eventService.fireCloudbreakEvent(stackId, RECOVERY, CLUSTER_MANUALRECOVERY_COULD_NOT_START, repairValidationResult.getError().getValidationErrors());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af890073d88c889871b6852a3e00d70f512225cb"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2826, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}