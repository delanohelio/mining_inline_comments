{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NDU1Mzg1", "number": 7134, "title": "CB-5241 - fixing incorrect MDCContext", "bodyText": "", "createdAt": "2020-01-23T16:35:43Z", "url": "https://github.com/hortonworks/cloudbreak/pull/7134", "merged": true, "mergeCommit": {"oid": "986bc7e538e67edcef0cb490c4d99ab7ccccd5ae"}, "closed": true, "closedAt": "2020-01-24T10:07:45Z", "author": {"login": "attilapalfi92"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9NLktgH2gAyMzY2NDU1Mzg1OjQ2ZDRkMjE3MjJmZmI3YjE1NmRjNGUxYTJkNTRlMDkwMDI5ZmJiMTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9OjbwgFqTM0NzUxMDM1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "46d4d21722ffb7b156dc4e1a2d54e090029fbb19", "author": {"user": {"login": "attilapalfi92", "name": "Attila P\u00e1lfi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/46d4d21722ffb7b156dc4e1a2d54e090029fbb19", "committedDate": "2020-01-23T16:45:43Z", "message": "CB-5241 - fixing incorrect MDCContext"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ff0cd686231d398c4dd2eaccd503e9532834f235", "author": {"user": {"login": "attilapalfi92", "name": "Attila P\u00e1lfi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/ff0cd686231d398c4dd2eaccd503e9532834f235", "committedDate": "2020-01-23T16:32:14Z", "message": "CB-5241 - fixing incorrect MDCContext"}, "afterCommit": {"oid": "46d4d21722ffb7b156dc4e1a2d54e090029fbb19", "author": {"user": {"login": "attilapalfi92", "name": "Attila P\u00e1lfi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/46d4d21722ffb7b156dc4e1a2d54e090029fbb19", "committedDate": "2020-01-23T16:45:43Z", "message": "CB-5241 - fixing incorrect MDCContext"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NDYwNDQ1", "url": "https://github.com/hortonworks/cloudbreak/pull/7134#pullrequestreview-347460445", "createdAt": "2020-01-23T17:01:27Z", "commit": {"oid": "46d4d21722ffb7b156dc4e1a2d54e090029fbb19"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzowMToyOFrOFhFwBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzowMToyOFrOFhFwBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI0MTU0MA==", "bodyText": "This was the problem", "url": "https://github.com/hortonworks/cloudbreak/pull/7134#discussion_r370241540", "createdAt": "2020-01-23T17:01:28Z", "author": {"login": "attilapalfi92"}, "path": "common/src/main/java/com/sequenceiq/cloudbreak/logger/MDCBuilder.java", "diffHunk": "@@ -79,26 +79,14 @@ public static void buildMdcContext(Object object) {\n             MDC.put(LoggerContextKey.WORKSPACE.toString(), getFieldValue(object, \"workspace\"));\n             MdcContext.builder()\n                     .resourceCrn(getFieldValues(object, LoggerContextKey.RESOURCE_CRN.toString(), LoggerContextKey.CRN.toString()))\n-                    .resourceType(object.getClass().getSimpleName().toUpperCase())\n+                    .resourceType(getResourceType(object))\n                     .resourceName(getFieldValues(object, LoggerContextKey.NAME.toString(), LoggerContextKey.CLUSTER_NAME.toString()))\n                     .environmentCrn(getFieldValues(object, LoggerContextKey.ENVIRONMENT_CRN.toString(), LoggerContextKey.ENV_CRN.toString()))\n                     .tenant(getFieldValue(object, LoggerContextKey.ACCOUNT_ID.toString()))\n                     .buildMdc();\n         }\n     }\n \n-    public static void buildMdcContext(Long resourceId, String resourceName, String type) {\n-        buildMdcContext(resourceId == null ? \"\" : String.valueOf(resourceId), resourceName, type);\n-    }\n-\n-    public static void buildMdcContext(String resourceId, String resourceName, String type) {\n-        MdcContext.builder()\n-                .resourceCrn(resourceId)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46d4d21722ffb7b156dc4e1a2d54e090029fbb19"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NTEwMzUw", "url": "https://github.com/hortonworks/cloudbreak/pull/7134#pullrequestreview-347510350", "createdAt": "2020-01-23T18:21:41Z", "commit": {"oid": "46d4d21722ffb7b156dc4e1a2d54e090029fbb19"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1905, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}