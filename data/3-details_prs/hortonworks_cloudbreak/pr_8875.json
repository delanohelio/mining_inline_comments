{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0NzIzNTQw", "number": 8875, "title": "CB-8559 Replace VMs should be enabled by default during runtime upgrade", "bodyText": "", "createdAt": "2020-08-27T14:03:44Z", "url": "https://github.com/hortonworks/cloudbreak/pull/8875", "merged": true, "mergeCommit": {"oid": "e6020054f85c87a71a6951042b43532f3582b58e"}, "closed": true, "closedAt": "2020-08-28T07:30:03Z", "author": {"login": "lacikaaa"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDBZaMAFqTQ3Njc4NTc5Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDCgtqgBqjM3MDAzMjM3MTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2Nzg1Nzk3", "url": "https://github.com/hortonworks/cloudbreak/pull/8875#pullrequestreview-476785797", "createdAt": "2020-08-27T14:36:40Z", "commit": {"oid": "9425932a8f55aef8f1131d589e74e41d057bcc3d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2ODE1ODMy", "url": "https://github.com/hortonworks/cloudbreak/pull/8875#pullrequestreview-476815832", "createdAt": "2020-08-27T15:06:25Z", "commit": {"oid": "9425932a8f55aef8f1131d589e74e41d057bcc3d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNTowNjoyNVrOHIUvTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNTowNjoyNVrOHIUvTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQ5MDQ0NA==", "bodyText": "Could we pls keep the log? It could be useful: LOGGER.debug(\"VM-s replacement after the upgrade process is {}\", replaceVms.name());", "url": "https://github.com/hortonworks/cloudbreak/pull/8875#discussion_r478490444", "createdAt": "2020-08-27T15:06:25Z", "author": {"login": "pdarvasi"}, "path": "datalake/src/main/java/com/sequenceiq/datalake/service/upgrade/SdxRuntimeUpgradeService.java", "diffHunk": "@@ -230,13 +229,7 @@ private String validateImageId(List<ImageInfoV4Response> upgradeCandidates, Stri\n     private SdxUpgradeReplaceVms shouldReplaceVmsAfterUpgrade(SdxUpgradeRequest upgradeRequest) {\n         return Optional.ofNullable(upgradeRequest)\n                 .map(SdxUpgradeRequest::getReplaceVms)\n-                .orElse(NullUtil.getIfNotNullOtherwise(upgradeRequest, this::determineReplaceVmsIfParamIsMissing, SdxUpgradeReplaceVms.DISABLED));\n-    }\n-\n-    private SdxUpgradeReplaceVms determineReplaceVmsIfParamIsMissing(SdxUpgradeRequest request) {\n-        SdxUpgradeReplaceVms replaceVms = isOsUpgrade(request) ? SdxUpgradeReplaceVms.ENABLED : SdxUpgradeReplaceVms.DISABLED;\n-        LOGGER.debug(\"VM-s replacement after the upgrade process is {}\", replaceVms.name());\n-        return replaceVms;\n+                .orElse(SdxUpgradeReplaceVms.ENABLED);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9425932a8f55aef8f1131d589e74e41d057bcc3d"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc174347d472efa32b272f2e9d6410bcac10756a", "author": {"user": {"login": "lacikaaa", "name": "Mihaly Laszlo Molnar"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/bc174347d472efa32b272f2e9d6410bcac10756a", "committedDate": "2020-08-27T15:54:04Z", "message": "CB-8559 Replace VMs should be enabled by default during runtime upgrade"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9425932a8f55aef8f1131d589e74e41d057bcc3d", "author": {"user": {"login": "lacikaaa", "name": "Mihaly Laszlo Molnar"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/9425932a8f55aef8f1131d589e74e41d057bcc3d", "committedDate": "2020-08-27T14:01:56Z", "message": "CB-8559 Replace VMs should be enabled by default during runtime upgrade"}, "afterCommit": {"oid": "bc174347d472efa32b272f2e9d6410bcac10756a", "author": {"user": {"login": "lacikaaa", "name": "Mihaly Laszlo Molnar"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/bc174347d472efa32b272f2e9d6410bcac10756a", "committedDate": "2020-08-27T15:54:04Z", "message": "CB-8559 Replace VMs should be enabled by default during runtime upgrade"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2373, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}