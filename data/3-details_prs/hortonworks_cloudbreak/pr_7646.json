{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNTk0NzE4", "number": 7646, "title": "CB-6217 Remove redundancy from API E2E test cases", "bodyText": "", "createdAt": "2020-03-25T13:41:40Z", "url": "https://github.com/hortonworks/cloudbreak/pull/7646", "merged": true, "mergeCommit": {"oid": "fd7b32b560422e42560235eb7d482b19246838e3"}, "closed": true, "closedAt": "2020-03-30T10:21:31Z", "author": {"login": "aszegedi"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRH270AFqTM4MTE2MDg0MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSr1rWAFqTM4MzcxNzkwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMTYwODQx", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#pullrequestreview-381160841", "createdAt": "2020-03-25T13:46:27Z", "commit": {"oid": "eb6a33c137b10c3f5712106906b000bf50eb30f2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzo0NjoyN1rOF7bwag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzo0NzoyN1rOF7bzgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg2NTA2Ng==", "bodyText": "I think this class should not extend ImageValidatorE2ETest, since InternalSdxDistroxTests also creates DistroX cluster", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r397865066", "createdAt": "2020-03-25T13:46:27Z", "author": {"login": "horadla23"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/distrox/DistroXImageValidatorTest.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package com.sequenceiq.it.cloudbreak.testcase.e2e.distrox;\n+\n+import javax.inject.Inject;\n+\n+import org.testng.annotations.Test;\n+\n+import com.sequenceiq.it.cloudbreak.client.DistroXTestClient;\n+import com.sequenceiq.it.cloudbreak.context.Description;\n+import com.sequenceiq.it.cloudbreak.context.TestContext;\n+import com.sequenceiq.it.cloudbreak.dto.distrox.DistroXTestDto;\n+import com.sequenceiq.it.cloudbreak.testcase.e2e.ImageValidatorE2ETest;\n+\n+public class DistroXImageValidatorTest extends ImageValidatorE2ETest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb6a33c137b10c3f5712106906b000bf50eb30f2"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg2NTg1OA==", "bodyText": "This class also should not extend ImageValidatorE2ETest, since it is not used in imagevalidation test suite", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r397865858", "createdAt": "2020-03-25T13:47:27Z", "author": {"login": "horadla23"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/sdx/InternalSdxTests.java", "diffHunk": "@@ -19,15 +19,6 @@\n     @Inject\n     private SdxTestClient sdxTestClient;\n \n-    @Override\n-    protected void setupTest(TestContext testContext) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb6a33c137b10c3f5712106906b000bf50eb30f2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMTcxMTgx", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#pullrequestreview-381171181", "createdAt": "2020-03-25T13:57:32Z", "commit": {"oid": "eb6a33c137b10c3f5712106906b000bf50eb30f2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzo1NzozMlrOF7cR7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzo1NzozMlrOF7cR7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg3MzY0Nw==", "bodyText": "Since image validation does not use this test currently, I think you can move it back to the DistroxTests class, it does not need to be an imagevalidation test, the only class used for image validation is InternalSdxDistroxTests", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r397873647", "createdAt": "2020-03-25T13:57:32Z", "author": {"login": "horadla23"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/distrox/DistroXImageValidatorTest.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package com.sequenceiq.it.cloudbreak.testcase.e2e.distrox;\n+\n+import javax.inject.Inject;\n+\n+import org.testng.annotations.Test;\n+\n+import com.sequenceiq.it.cloudbreak.client.DistroXTestClient;\n+import com.sequenceiq.it.cloudbreak.context.Description;\n+import com.sequenceiq.it.cloudbreak.context.TestContext;\n+import com.sequenceiq.it.cloudbreak.dto.distrox.DistroXTestDto;\n+import com.sequenceiq.it.cloudbreak.testcase.e2e.ImageValidatorE2ETest;\n+\n+public class DistroXImageValidatorTest extends ImageValidatorE2ETest {\n+\n+    @Inject\n+    private DistroXTestClient distroXTestClient;\n+\n+    @Test(dataProvider = TEST_CONTEXT)\n+    @Description(\n+            given = \"there is a running cloudbreak\",\n+            when = \"a valid DistroX create request is sent\",\n+            then = \"DistroX cluster is created\")\n+    public void testCreateDistroX(TestContext testContext) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb6a33c137b10c3f5712106906b000bf50eb30f2"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb6a33c137b10c3f5712106906b000bf50eb30f2", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/eb6a33c137b10c3f5712106906b000bf50eb30f2", "committedDate": "2020-03-25T13:40:37Z", "message": "CB-6217 Remove redundancy from API E2E test cases"}, "afterCommit": {"oid": "70201a749d12757609004ece9915c0483023f1a6", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/70201a749d12757609004ece9915c0483023f1a6", "committedDate": "2020-03-25T16:46:46Z", "message": "CB-6217 Remove redundancy from API E2E test cases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzkxMzM0", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#pullrequestreview-381391334", "createdAt": "2020-03-25T17:47:09Z", "commit": {"oid": "70201a749d12757609004ece9915c0483023f1a6"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzkxNjgz", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#pullrequestreview-381391683", "createdAt": "2020-03-25T17:47:34Z", "commit": {"oid": "70201a749d12757609004ece9915c0483023f1a6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNjY4NjM4", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#pullrequestreview-382668638", "createdAt": "2020-03-27T08:46:08Z", "commit": {"oid": "885415cc8487e160edf2ff9757a29e1dc7741cef"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwODo0NjowOVrOF8n1Zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwODo0NjowOVrOF8n1Zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTExMTUyNg==", "bodyText": "please modify class name in the image validation suites as well", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r399111526", "createdAt": "2020-03-27T08:46:09Z", "author": {"login": "horadla23"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/sdx/InternalSdxDistroxTest.java", "diffHunk": "@@ -17,23 +17,14 @@\n import com.sequenceiq.sdx.api.model.SdxClusterStatusResponse;\n import com.sequenceiq.sdx.api.model.SdxDatabaseRequest;\n \n-public class InternalSdxDistroxTests extends ImageValidatorE2ETest {\n+public class InternalSdxDistroxTest extends ImageValidatorE2ETest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "885415cc8487e160edf2ff9757a29e1dc7741cef"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "885415cc8487e160edf2ff9757a29e1dc7741cef", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/885415cc8487e160edf2ff9757a29e1dc7741cef", "committedDate": "2020-03-27T00:37:40Z", "message": "CB-6217 Remove redundancy from API E2E test cases"}, "afterCommit": {"oid": "48be7fd34a9c05f8f5fbc3a131ebaa0f3e29da25", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/48be7fd34a9c05f8f5fbc3a131ebaa0f3e29da25", "committedDate": "2020-03-27T08:51:41Z", "message": "CB-6217 Remove redundancy from API E2E test cases"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48be7fd34a9c05f8f5fbc3a131ebaa0f3e29da25", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/48be7fd34a9c05f8f5fbc3a131ebaa0f3e29da25", "committedDate": "2020-03-27T08:51:41Z", "message": "CB-6217 Remove redundancy from API E2E test cases"}, "afterCommit": {"oid": "fcf55146834e9081a1ff06f5bce0910a9c208f7e", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/fcf55146834e9081a1ff06f5bce0910a9c208f7e", "committedDate": "2020-03-27T09:07:41Z", "message": "CB-6217 Remove redundancy from API E2E test cases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNjg0ODI5", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#pullrequestreview-382684829", "createdAt": "2020-03-27T09:11:11Z", "commit": {"oid": "fcf55146834e9081a1ff06f5bce0910a9c208f7e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMDM3MjEw", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#pullrequestreview-383037210", "createdAt": "2020-03-27T16:55:39Z", "commit": {"oid": "fcf55146834e9081a1ff06f5bce0910a9c208f7e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNjo1NTozOVrOF854Zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNzoyMzowOVrOF866Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQwNzIwNw==", "bodyText": "I would move into sdx package, as all of its descendants are there.", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r399407207", "createdAt": "2020-03-27T16:55:39Z", "author": {"login": "gergopapi2"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/PreconditionSdxE2ETest.java", "diffHunk": "@@ -0,0 +1,112 @@\n+package com.sequenceiq.it.cloudbreak.testcase.e2e;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcf55146834e9081a1ff06f5bce0910a9c208f7e"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQwNzk0MQ==", "bodyText": "I would move the class into sdx package as its sole descendant is also there.", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r399407941", "createdAt": "2020-03-27T16:56:46Z", "author": {"login": "gergopapi2"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/ImageValidatorE2ETest.java", "diffHunk": "@@ -33,6 +33,15 @@\n     @Value(\"${integrationtest.imageValidation.sourceCatalogUrl}\")\n     private String sourceImageCatalogUrl;\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcf55146834e9081a1ff06f5bce0910a9c208f7e"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQyNDA5OA==", "bodyText": "This method and checkDistroxInstanceState are almost identical. I would try to refactor them to have one method. I think it is only the log and exception messages that differ within method body.", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r399424098", "createdAt": "2020-03-27T17:23:09Z", "author": {"login": "gergopapi2"}, "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/util/wait/WaitUtil.java", "diffHunk": "@@ -449,13 +451,37 @@ private boolean checkSdxInstanceState(SdxClient sdxClient, String sdxName, Strin\n         List<InstanceGroupV4Response> instanceGroups = sdxClient.getSdxClient().sdxEndpoint().getDetail(sdxName, Set.of())\n                 .getStackV4Response()\n                 .getInstanceGroups();\n-        return checkInstanceState(hostGroup, desiredState, instanceGroups);\n+        SdxClusterResponse sdxResponse = sdxClient.getSdxClient().sdxEndpoint().get(sdxName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcf55146834e9081a1ff06f5bce0910a9c208f7e"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMDczNDg5", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#pullrequestreview-383073489", "createdAt": "2020-03-27T17:43:10Z", "commit": {"oid": "fcf55146834e9081a1ff06f5bce0910a9c208f7e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bedeea3ae2ac2bacc2f423d94bc9ccb2644595ef", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/bedeea3ae2ac2bacc2f423d94bc9ccb2644595ef", "committedDate": "2020-03-30T08:45:58Z", "message": "CB-6217 Remove redundancy from API E2E test cases"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fcf55146834e9081a1ff06f5bce0910a9c208f7e", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/fcf55146834e9081a1ff06f5bce0910a9c208f7e", "committedDate": "2020-03-27T09:07:41Z", "message": "CB-6217 Remove redundancy from API E2E test cases"}, "afterCommit": {"oid": "bedeea3ae2ac2bacc2f423d94bc9ccb2644595ef", "author": {"user": {"login": "aszegedi", "name": "Annamaria Szegedi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/bedeea3ae2ac2bacc2f423d94bc9ccb2644595ef", "committedDate": "2020-03-30T08:45:58Z", "message": "CB-6217 Remove redundancy from API E2E test cases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNzE0NTU1", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#pullrequestreview-383714555", "createdAt": "2020-03-30T10:16:37Z", "commit": {"oid": "bedeea3ae2ac2bacc2f423d94bc9ccb2644595ef"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMDoxNjozN1rOF9i6Ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMDoxNjozN1rOF9i6Ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA3OTM3OQ==", "bodyText": "Is there some override for this variable?\nOr where do we get the 8 value?", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#discussion_r400079379", "createdAt": "2020-03-30T10:16:37Z", "author": {"login": "lnardai"}, "path": "integration-test/src/main/java/com/sequenceiq/it/IntegrationTestApp.java", "diffHunk": "@@ -66,7 +66,7 @@\n     @Value(\"${integrationtest.threadCount:2}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bedeea3ae2ac2bacc2f423d94bc9ccb2644595ef"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNzE3OTA4", "url": "https://github.com/hortonworks/cloudbreak/pull/7646#pullrequestreview-383717908", "createdAt": "2020-03-30T10:21:16Z", "commit": {"oid": "bedeea3ae2ac2bacc2f423d94bc9ccb2644595ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2358, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}