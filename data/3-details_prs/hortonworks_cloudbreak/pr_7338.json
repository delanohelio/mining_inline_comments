{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NzY5MDU4", "number": 7338, "title": "CB-5547 added notification for user on whether repair can start or not", "bodyText": "added new graceful state when we can't start the repair\nbased on sodre's branch added notification so user is aware that no repair was started", "createdAt": "2020-02-20T13:53:41Z", "url": "https://github.com/hortonworks/cloudbreak/pull/7338", "merged": true, "mergeCommit": {"oid": "591d7c76e212193d444269ec290f5bd31132ace9"}, "closed": true, "closedAt": "2020-02-26T16:48:57Z", "author": {"login": "lnardai"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGL2v5gFqTM2MTkzNTczMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIGcOQABqjMwNzM2MjQ1NDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxOTM1NzMx", "url": "https://github.com/hortonworks/cloudbreak/pull/7338#pullrequestreview-361935731", "createdAt": "2020-02-20T14:18:03Z", "commit": {"oid": "8a178818250ed595b9150c4ec6966fd84716fcad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxNDoxODowM1rOFsVCBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxNDoxODowM1rOFsVCBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjAyNjI0Nw==", "bodyText": "Can you extend the unit test as well?", "url": "https://github.com/hortonworks/cloudbreak/pull/7338#discussion_r382026247", "createdAt": "2020-02-20T14:18:03Z", "author": {"login": "foldik"}, "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/cluster/ClusterRepairService.java", "diffHunk": "@@ -362,12 +364,14 @@ private void triggerRepairOrThrowBadRequest(Long stackId, Result<Map<HostGroupNa\n             boolean removeOnly,\n             Set<String> recoveryMessageArgument) {\n         if (repairValidationResult.isError()) {\n+            eventService.fireCloudbreakEvent(stackId, RECOVERY, CLUSTER_MANUALRECOVERY_COULD_NOT_START, repairValidationResult.getError().getValidationErrors());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a178818250ed595b9150c4ec6966fd84716fcad"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8a178818250ed595b9150c4ec6966fd84716fcad", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8a178818250ed595b9150c4ec6966fd84716fcad", "committedDate": "2020-02-20T13:52:01Z", "message": "CB-5547 added notification for user on whether repair can start or not"}, "afterCommit": {"oid": "2974fb5d594acab28e97e4e9957cdb1726bd8837", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/2974fb5d594acab28e97e4e9957cdb1726bd8837", "committedDate": "2020-02-24T13:25:00Z", "message": "CB-5547 added notification for user on whether repair can start or not"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2974fb5d594acab28e97e4e9957cdb1726bd8837", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/2974fb5d594acab28e97e4e9957cdb1726bd8837", "committedDate": "2020-02-24T13:25:00Z", "message": "CB-5547 added notification for user on whether repair can start or not"}, "afterCommit": {"oid": "af890073d88c889871b6852a3e00d70f512225cb", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/af890073d88c889871b6852a3e00d70f512225cb", "committedDate": "2020-02-24T15:58:13Z", "message": "CB-5547 added notification for user on whether repair can start or not"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MTI1MDI5", "url": "https://github.com/hortonworks/cloudbreak/pull/7338#pullrequestreview-364125029", "createdAt": "2020-02-25T13:07:44Z", "commit": {"oid": "af890073d88c889871b6852a3e00d70f512225cb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMzowNzo0NVrOFuFWvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMzowNzo0NVrOFuFWvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg2NjU1Nw==", "bodyText": "Do we need this in the future?", "url": "https://github.com/hortonworks/cloudbreak/pull/7338#discussion_r383866557", "createdAt": "2020-02-25T13:07:45Z", "author": {"login": "foldik"}, "path": "core/src/test/java/com/sequenceiq/cloudbreak/service/cluster/ClusterRepairServiceTest.java", "diffHunk": "@@ -237,6 +241,7 @@ public void testCannotRepairGatewayWithoutExternalDatabase() throws CloudbreakIm\n         boolean result = underTest.canRepairAll(stack);\n \n         assertFalse(result);\n+        //eventService.fireCloudbreakEvent(stackId, RECOVERY, CLUSTER_MANUALRECOVERY_COULD_NOT_START, repairValidationResult.getError().getValidationErrors());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af890073d88c889871b6852a3e00d70f512225cb"}, "originalPosition": 28}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af890073d88c889871b6852a3e00d70f512225cb", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/af890073d88c889871b6852a3e00d70f512225cb", "committedDate": "2020-02-24T15:58:13Z", "message": "CB-5547 added notification for user on whether repair can start or not"}, "afterCommit": {"oid": "5691f38be9b9ecd76e477d9b9754c3641c9e6600", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/5691f38be9b9ecd76e477d9b9754c3641c9e6600", "committedDate": "2020-02-25T14:41:25Z", "message": "CB-5547 added notification for user on whether repair can start or not"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NzQxNDQ4", "url": "https://github.com/hortonworks/cloudbreak/pull/7338#pullrequestreview-364741448", "createdAt": "2020-02-26T09:30:10Z", "commit": {"oid": "5691f38be9b9ecd76e477d9b9754c3641c9e6600"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5691f38be9b9ecd76e477d9b9754c3641c9e6600", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/5691f38be9b9ecd76e477d9b9754c3641c9e6600", "committedDate": "2020-02-25T14:41:25Z", "message": "CB-5547 added notification for user on whether repair can start or not"}, "afterCommit": {"oid": "e1ec482d2f3229582b548ed8e282af7b4abf7ad5", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/e1ec482d2f3229582b548ed8e282af7b4abf7ad5", "committedDate": "2020-02-26T10:53:26Z", "message": "CB-5547 added notification for user on whether repair can start or not"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e3b500a49b836cdf00fd1554b371b04a8786aa1", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/1e3b500a49b836cdf00fd1554b371b04a8786aa1", "committedDate": "2020-02-26T13:07:21Z", "message": "CB-5547 added notification for user on whether repair can start or not"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e1ec482d2f3229582b548ed8e282af7b4abf7ad5", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/e1ec482d2f3229582b548ed8e282af7b4abf7ad5", "committedDate": "2020-02-26T10:53:26Z", "message": "CB-5547 added notification for user on whether repair can start or not"}, "afterCommit": {"oid": "1e3b500a49b836cdf00fd1554b371b04a8786aa1", "author": {"user": {"login": "sodre90", "name": "Erd\u0151s P\u00e9ter"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/1e3b500a49b836cdf00fd1554b371b04a8786aa1", "committedDate": "2020-02-26T13:07:21Z", "message": "CB-5547 added notification for user on whether repair can start or not"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2645, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}