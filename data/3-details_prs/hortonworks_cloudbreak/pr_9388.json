{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3NzMxNTc4", "number": 9388, "title": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. ", "bodyText": "moved out business logic from GrpcUms client so everything can be handled by EntitlementService\nRefactored UmsAccountAuthorizationService and UmsResourceAuthorizationService to use GrpcUmsClient respectively\nAdded OwnerAssignmentService to honor EntitlementServiceUsage\nadded warning log message in case we are trying to call UMS with actual altus account id\n(we should checki kibana for results)\nJunit4-junit5 refactors\n\nRealums test result:\nhttp://ci-cloudbreak.eng.hortonworks.com/job/cloudbreak-real-ums-test/1974/", "createdAt": "2020-11-09T12:35:39Z", "url": "https://github.com/hortonworks/cloudbreak/pull/9388", "merged": true, "mergeCommit": {"oid": "cce5f6e93d7436011072bff32101b32e7040953b"}, "closed": true, "closedAt": "2020-12-03T07:56:40Z", "author": {"login": "lnardai"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABda19M6gBqjM5NzQxNTAyMDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdidGQ8gBqjQwNjU3NjEyMjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4146b37f368f2bce3cb44c0728eb150b6e299c42", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/4146b37f368f2bce3cb44c0728eb150b6e299c42", "committedDate": "2020-11-09T10:11:03Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}, "afterCommit": {"oid": "70a77d3868162b175456b49d94ab7a7ebebae737", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/70a77d3868162b175456b49d94ab7a7ebebae737", "committedDate": "2020-11-09T14:50:39Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70a77d3868162b175456b49d94ab7a7ebebae737", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/70a77d3868162b175456b49d94ab7a7ebebae737", "committedDate": "2020-11-09T14:50:39Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}, "afterCommit": {"oid": "8cee0414012092cc21accc4414876550b9491c20", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8cee0414012092cc21accc4414876550b9491c20", "committedDate": "2020-11-10T10:19:16Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8cee0414012092cc21accc4414876550b9491c20", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8cee0414012092cc21accc4414876550b9491c20", "committedDate": "2020-11-10T10:19:16Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}, "afterCommit": {"oid": "179f8dee11d9bdf53b31cee9e29bb2699b27368b", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/179f8dee11d9bdf53b31cee9e29bb2699b27368b", "committedDate": "2020-11-10T12:18:26Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "179f8dee11d9bdf53b31cee9e29bb2699b27368b", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/179f8dee11d9bdf53b31cee9e29bb2699b27368b", "committedDate": "2020-11-10T12:18:26Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}, "afterCommit": {"oid": "c816afbcbf5785826a4c9f5f47bd08b5b0207584", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/c816afbcbf5785826a4c9f5f47bd08b5b0207584", "committedDate": "2020-11-12T15:24:21Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c816afbcbf5785826a4c9f5f47bd08b5b0207584", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/c816afbcbf5785826a4c9f5f47bd08b5b0207584", "committedDate": "2020-11-12T15:24:21Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}, "afterCommit": {"oid": "369c9acd33cd3dc4f7c42857d34b0ddce23cfa6d", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/369c9acd33cd3dc4f7c42857d34b0ddce23cfa6d", "committedDate": "2020-11-13T10:38:35Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "369c9acd33cd3dc4f7c42857d34b0ddce23cfa6d", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/369c9acd33cd3dc4f7c42857d34b0ddce23cfa6d", "committedDate": "2020-11-13T10:38:35Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}, "afterCommit": {"oid": "1597bd324f786d7e38f63c520171cbc5b55f734c", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/1597bd324f786d7e38f63c520171cbc5b55f734c", "committedDate": "2020-11-13T11:55:57Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1597bd324f786d7e38f63c520171cbc5b55f734c", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/1597bd324f786d7e38f63c520171cbc5b55f734c", "committedDate": "2020-11-13T11:55:57Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}, "afterCommit": {"oid": "f560173dc345307af766e7c43c24152b9048114d", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/f560173dc345307af766e7c43c24152b9048114d", "committedDate": "2020-11-13T14:22:18Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f560173dc345307af766e7c43c24152b9048114d", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/f560173dc345307af766e7c43c24152b9048114d", "committedDate": "2020-11-13T14:22:18Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}, "afterCommit": {"oid": "7b5a053d728069ffbbe4bef0b20e6f0a164cb4a0", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/7b5a053d728069ffbbe4bef0b20e6f0a164cb4a0", "committedDate": "2020-11-13T14:46:27Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b5a053d728069ffbbe4bef0b20e6f0a164cb4a0", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/7b5a053d728069ffbbe4bef0b20e6f0a164cb4a0", "committedDate": "2020-11-13T14:46:27Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}, "afterCommit": {"oid": "4afc6015331360d4b287891f8910803b2bc3c4bc", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/4afc6015331360d4b287891f8910803b2bc3c4bc", "committedDate": "2020-11-16T10:51:20Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4afc6015331360d4b287891f8910803b2bc3c4bc", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/4afc6015331360d4b287891f8910803b2bc3c4bc", "committedDate": "2020-11-16T10:51:20Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}, "afterCommit": {"oid": "59e310bbafa8f6d037815a8cab3e998049ab6640", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/59e310bbafa8f6d037815a8cab3e998049ab6640", "committedDate": "2020-11-16T16:37:04Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNDM1NDM5", "url": "https://github.com/hortonworks/cloudbreak/pull/9388#pullrequestreview-532435439", "createdAt": "2020-11-17T14:46:05Z", "commit": {"oid": "59e310bbafa8f6d037815a8cab3e998049ab6640"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNDo0NjowNlrOH04RKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNDo0NjowNlrOH04RKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTIwOTg5OQ==", "bodyText": "Is it intentional that you want to use same cache as used for hasRights ?", "url": "https://github.com/hortonworks/cloudbreak/pull/9388#discussion_r525209899", "createdAt": "2020-11-17T14:46:06Z", "author": {"login": "horadla23"}, "path": "auth-connector/src/main/java/com/sequenceiq/cloudbreak/auth/altus/GrpcUmsClient.java", "diffHunk": "@@ -403,32 +398,61 @@ public Account getAccountDetails(String actorCrn, String accountId, Optional<Str\n         }\n     }\n \n-    @Cacheable(cacheNames = \"umsUserRoleAssigmentsCache\", key = \"{ #actorCrn, #userCrn }\")\n+    @Cacheable(cacheNames = \"umsUserRoleAssigmentsCache\", key = \"{ #userCrn }\")\n     public List<UserManagementProto.ResourceAssignment> listResourceRoleAssigments(String actorCrn, String userCrn, Optional<String> requestId) {\n         try (ManagedChannelWrapper channelWrapper = makeWrapper()) {\n             UmsClient client = makeClient(channelWrapper.getChannel(), actorCrn);\n             return client.listAssigmentsOfUser(requestId.orElse(UUID.randomUUID().toString()), userCrn);\n         }\n     }\n \n-    //\"#value.concat(#fieldId).concat(#projectId)\"\n-//    @Cacheable(cacheNames = \"umsUserRightsCache\", key = \"{ #actorCrn, #userCrn, #right, #resource }\")\n-    @Cacheable(cacheNames = \"umsUserRightsCache\", key = \"{ #userCrn, #right, #resource }\")\n-    public boolean checkRight(String actorCrn, String userCrn, String right, String resource, Optional<String> requestId) {\n+    @Cacheable(cacheNames = \"umsUserHasRightsForResourceCache\", key = \"{ #userCrn, #right, #resource }\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59e310bbafa8f6d037815a8cab3e998049ab6640"}, "originalPosition": 62}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNDY3ODg3", "url": "https://github.com/hortonworks/cloudbreak/pull/9388#pullrequestreview-532467887", "createdAt": "2020-11-17T15:15:00Z", "commit": {"oid": "59e310bbafa8f6d037815a8cab3e998049ab6640"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NTk1NTYz", "url": "https://github.com/hortonworks/cloudbreak/pull/9388#pullrequestreview-534595563", "createdAt": "2020-11-19T15:59:05Z", "commit": {"oid": "59e310bbafa8f6d037815a8cab3e998049ab6640"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "59e310bbafa8f6d037815a8cab3e998049ab6640", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/59e310bbafa8f6d037815a8cab3e998049ab6640", "committedDate": "2020-11-16T16:37:04Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}, "afterCommit": {"oid": "01cc31e62f9d1cc9fa13568bc8049b6da812eca9", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/01cc31e62f9d1cc9fa13568bc8049b6da812eca9", "committedDate": "2020-11-26T10:05:50Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01cc31e62f9d1cc9fa13568bc8049b6da812eca9", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/01cc31e62f9d1cc9fa13568bc8049b6da812eca9", "committedDate": "2020-11-26T10:05:50Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}, "afterCommit": {"oid": "8332dad1995e646bad33d16a5ff1bbe825af6652", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8332dad1995e646bad33d16a5ff1bbe825af6652", "committedDate": "2020-11-26T12:44:50Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8332dad1995e646bad33d16a5ff1bbe825af6652", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8332dad1995e646bad33d16a5ff1bbe825af6652", "committedDate": "2020-11-26T12:44:50Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}, "afterCommit": {"oid": "ec2daa5753ae8d79ad8c6d06813fc3d91fd03c54", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/ec2daa5753ae8d79ad8c6d06813fc3d91fd03c54", "committedDate": "2020-11-30T15:31:06Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ec2daa5753ae8d79ad8c6d06813fc3d91fd03c54", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/ec2daa5753ae8d79ad8c6d06813fc3d91fd03c54", "committedDate": "2020-11-30T15:31:06Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}, "afterCommit": {"oid": "9977b2a7ef2e35a22099adc21290d8f5b6bb543d", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/9977b2a7ef2e35a22099adc21290d8f5b6bb543d", "committedDate": "2020-12-01T12:47:36Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Moved out EntitlementChecking from GrpcClient. Refactored IsEntitlementEnabled to cache on account level. Refactored unit tests."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxODY1OTgz", "url": "https://github.com/hortonworks/cloudbreak/pull/9388#pullrequestreview-541865983", "createdAt": "2020-12-01T12:54:53Z", "commit": {"oid": "9977b2a7ef2e35a22099adc21290d8f5b6bb543d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyNTg1NTM2", "url": "https://github.com/hortonworks/cloudbreak/pull/9388#pullrequestreview-542585536", "createdAt": "2020-12-02T08:15:04Z", "commit": {"oid": "9977b2a7ef2e35a22099adc21290d8f5b6bb543d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwODoxNTowNVrOH9O_gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwODoxNTowNVrOH9O_gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk3MDgxOA==", "bodyText": "i haven't noticed it, but int test brought out this double ##\n\"statusReason\":\"Error message: \\\"Internal server error: Expression [{ ##actorCrn, userCrn, #right, #resource }] @3: EL1043E: Unexpected token. Expected 'identifier' but was 'hash(#)'\\\"\"", "url": "https://github.com/hortonworks/cloudbreak/pull/9388#discussion_r533970818", "createdAt": "2020-12-02T08:15:05Z", "author": {"login": "horadla23"}, "path": "auth-connector/src/main/java/com/sequenceiq/cloudbreak/auth/altus/GrpcUmsClient.java", "diffHunk": "@@ -379,24 +374,53 @@ public Account getAccountDetails(String actorCrn, String accountId, Optional<Str\n         return client.listAssigmentsOfUser(RequestIdUtil.getOrGenerate(requestId), userCrn);\n     }\n \n-    //\"#value.concat(#fieldId).concat(#projectId)\"\n-//    @Cacheable(cacheNames = \"umsUserRightsCache\", key = \"{ #actorCrn, #userCrn, #right, #resource }\")\n-    @Cacheable(cacheNames = \"umsUserRightsCache\", key = \"{ #userCrn, #right, #resource }\")\n-    public boolean checkRight(String actorCrn, String userCrn, String right, String resource, Optional<String> requestId) {\n+    @Cacheable(cacheNames = \"umsUserHasRightsForResourceCache\", key = \"{ #actorCrn, #userCrn, #right, #resource }\")\n+    public boolean checkResourceRight(String actorCrn, String userCrn, String right, String resource, Optional<String> requestId) {\n         if (InternalCrnBuilder.isInternalCrn(userCrn)) {\n             LOGGER.info(\"InternalCrn, allow right {} for user {}!\", right, userCrn);\n             return true;\n         }\n-        if (!isEntitledAndLogResult(actorCrn, ThreadBasedUserCrnProvider.getAccountId(), Entitlement.CB_AUTHZ_POWER_USERS)) {\n-            if (RightUtil.isReadRight(right)) {\n-                LOGGER.info(\"In account {} authorization related entitlement disabled, thus skipping permission check!!\",\n-                        ThreadBasedUserCrnProvider.getAccountId());\n-                return true;\n-            } else {\n-                // if legacy authz then we will check permission on account level\n-                resource = null;\n-            }\n+        return makeCheckRightCall(actorCrn, userCrn, right, resource, requestId);\n+    }\n+\n+    @Cacheable(cacheNames = \"umsUserHasRightsForResourceCache\", key = \"{ ##actorCrn, userCrn, #right, #resource }\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9977b2a7ef2e35a22099adc21290d8f5b6bb543d"}, "originalPosition": 62}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9977b2a7ef2e35a22099adc21290d8f5b6bb543d", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/9977b2a7ef2e35a22099adc21290d8f5b6bb543d", "committedDate": "2020-12-01T12:47:36Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Moved out EntitlementChecking from GrpcClient. Refactored IsEntitlementEnabled to cache on account level. Refactored unit tests."}, "afterCommit": {"oid": "dca1f048aaaaeab40bfc8345fc77369b54fa73c8", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/dca1f048aaaaeab40bfc8345fc77369b54fa73c8", "committedDate": "2020-12-02T09:43:53Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Moved out EntitlementChecking from GrpcClient. Refactored IsEntitlementEnabled to cache on account level. Refactored unit tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f81e060cf1a7bda19d1bf720c8e6f118288fe320", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/f81e060cf1a7bda19d1bf720c8e6f118288fe320", "committedDate": "2020-12-02T14:15:05Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Still need to extract EntitlementService to authorization common or another proper module."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94e56742e017e117b9577761c2516e9b0c6f167e", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/94e56742e017e117b9577761c2516e9b0c6f167e", "committedDate": "2020-12-03T06:24:22Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Moved out EntitlementChecking from GrpcClient. Refactored IsEntitlementEnabled to cache on account level. Refactored unit tests."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dca1f048aaaaeab40bfc8345fc77369b54fa73c8", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/dca1f048aaaaeab40bfc8345fc77369b54fa73c8", "committedDate": "2020-12-02T09:43:53Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Moved out EntitlementChecking from GrpcClient. Refactored IsEntitlementEnabled to cache on account level. Refactored unit tests."}, "afterCommit": {"oid": "94e56742e017e117b9577761c2516e9b0c6f167e", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/94e56742e017e117b9577761c2516e9b0c6f167e", "committedDate": "2020-12-03T06:24:22Z", "message": "CB-9534 Refactoring GrpcUmsClient so it can have proper caching. Moved out EntitlementChecking from GrpcClient. Refactored IsEntitlementEnabled to cache on account level. Refactored unit tests."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2089, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}