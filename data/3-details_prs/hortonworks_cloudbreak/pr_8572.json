{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwMTIzODQy", "number": 8572, "title": "CB-7930 Use DataHubCreator role for DataHub creation authz", "bodyText": "See detailed description in the commit message.", "createdAt": "2020-07-16T11:33:25Z", "url": "https://github.com/hortonworks/cloudbreak/pull/8572", "merged": true, "mergeCommit": {"oid": "252496fb784d4d8718c8f571b8d9ee36539a84b0"}, "closed": true, "closedAt": "2020-07-17T13:43:09Z", "author": {"login": "foldik"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1d8NmgFqTQ0OTc3NDY0OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc10DgtAFqTQ1MDY2ODIwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5Nzc0NjQ4", "url": "https://github.com/hortonworks/cloudbreak/pull/8572#pullrequestreview-449774648", "createdAt": "2020-07-16T11:53:48Z", "commit": {"oid": "4be46104aec272a61d4dbd5a7b5c5fdd83e4349a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxMTo1Mzo0OVrOGynjRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxMTo1NjoxNlrOGynoTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTcyOTk5MQ==", "bodyText": "please rebase this to latest master and pls remove actionType field", "url": "https://github.com/hortonworks/cloudbreak/pull/8572#discussion_r455729991", "createdAt": "2020-07-16T11:53:49Z", "author": {"login": "horadla23"}, "path": "authorization-common/src/main/resources/actions.json", "diffHunk": "@@ -77,6 +77,12 @@\n     \"actionType\": \"RESOURCE_DEPENDENT\",\n     \"legacyRight\": \"environments/read\"\n   },\n+  \"ENVIRONMENT_CREATE_DATAHUB\": {\n+    \"right\": \"environments/createDatahub\",\n+    \"resourceType\": \"ENVIRONMENT\",\n+    \"actionType\": \"RESOURCE_DEPENDENT\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4be46104aec272a61d4dbd5a7b5c5fdd83e4349a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTczMTI3OA==", "bodyText": "looks good, but later we'll might have issue with this, if someone add @CheckPermissionByResourceObject for example for a getDistrox method, then it will check for create_datahub also during getDistrox, but i know it is a gap in authz framework.\nI also would be happier, if we have different request object for distrox creation, but I know it is a design issue regarding API models.", "url": "https://github.com/hortonworks/cloudbreak/pull/8572#discussion_r455731278", "createdAt": "2020-07-16T11:56:16Z", "author": {"login": "horadla23"}, "path": "core-api/src/main/java/com/sequenceiq/distrox/api/v1/distrox/model/DistroXV1Request.java", "diffHunk": "@@ -26,6 +29,7 @@\n @JsonInclude(Include.NON_NULL)\n public class DistroXV1Request extends DistroXV1Base implements TaggableRequest {\n \n+    @ResourceObjectField(action = AuthorizationResourceAction.ENVIRONMENT_CREATE_DATAHUB, variableType = AuthorizationVariableType.NAME)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4be46104aec272a61d4dbd5a7b5c5fdd83e4349a"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4be46104aec272a61d4dbd5a7b5c5fdd83e4349a", "author": {"user": {"login": "foldik", "name": "Attila Kristof Foldi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/4be46104aec272a61d4dbd5a7b5c5fdd83e4349a", "committedDate": "2020-07-16T11:30:52Z", "message": "CB-7930 Use DataHubCreator role for DataHub creation authz"}, "afterCommit": {"oid": "4628a347d6828ff257ed2b2957d8f10949dbee98", "author": {"user": {"login": "foldik", "name": "Attila Kristof Foldi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/4628a347d6828ff257ed2b2957d8f10949dbee98", "committedDate": "2020-07-16T12:33:32Z", "message": "CB-7930 Use DataHubCreator role for DataHub creation authz"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e42447f5cff9526fce16d0a1535f3c07845722e3", "author": {"user": {"login": "foldik", "name": "Attila Kristof Foldi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/e42447f5cff9526fce16d0a1535f3c07845722e3", "committedDate": "2020-07-17T08:17:18Z", "message": "CB-7930 Use DataHubCreator role for DataHub creation authz"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4628a347d6828ff257ed2b2957d8f10949dbee98", "author": {"user": {"login": "foldik", "name": "Attila Kristof Foldi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/4628a347d6828ff257ed2b2957d8f10949dbee98", "committedDate": "2020-07-16T12:33:32Z", "message": "CB-7930 Use DataHubCreator role for DataHub creation authz"}, "afterCommit": {"oid": "e42447f5cff9526fce16d0a1535f3c07845722e3", "author": {"user": {"login": "foldik", "name": "Attila Kristof Foldi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/e42447f5cff9526fce16d0a1535f3c07845722e3", "committedDate": "2020-07-17T08:17:18Z", "message": "CB-7930 Use DataHubCreator role for DataHub creation authz"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNjY4MjAx", "url": "https://github.com/hortonworks/cloudbreak/pull/8572#pullrequestreview-450668201", "createdAt": "2020-07-17T13:42:58Z", "commit": {"oid": "e42447f5cff9526fce16d0a1535f3c07845722e3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2592, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}