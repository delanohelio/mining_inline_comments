{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM3MjA1MzU5", "number": 9642, "title": "CB-10320: Do not enable HBase on S3 for 7.2.6 when Raz is enabled", "bodyText": "RAZ is enabled on 7.2.6, but the code change for HBase feature supporting RAZ is only on 7.2.7. Therefore, only enable HBase cloud storage feature on 7.2.7+.", "createdAt": "2020-12-11T17:47:44Z", "url": "https://github.com/hortonworks/cloudbreak/pull/9642", "merged": true, "mergeCommit": {"oid": "c2e0e5c15945d2e63c7b746fb55a0bcabf8509f2"}, "closed": true, "closedAt": "2020-12-14T20:28:47Z", "author": {"login": "LinaAtAustin"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlNuR-gFqTU1MDU0NDM5Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmLtZfAFqTU1MTg2MzkxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNTQ0Mzkz", "url": "https://github.com/hortonworks/cloudbreak/pull/9642#pullrequestreview-550544393", "createdAt": "2020-12-11T20:11:45Z", "commit": {"oid": "7aa7f9946c9e6934d0e8780250bf85daa8321bf2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQyMDoxMTo0NVrOIEKdwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQyMDoxMTo0NVrOIEKdwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTIzNjY3Mg==", "bodyText": "Nit: What about UT? If there is no associated test class, it might make sense to add one now.", "url": "https://github.com/hortonworks/cloudbreak/pull/9642#discussion_r541236672", "createdAt": "2020-12-11T20:11:45Z", "author": {"login": "lajosrodek"}, "path": "template-manager-cmtemplate/src/main/java/com/sequenceiq/cloudbreak/cmtemplate/configproviders/hbase/HbaseCloudStorageServiceConfigProvider.java", "diffHunk": "@@ -54,13 +54,13 @@ public boolean isConfigurationNeeded(CmTemplateProcessor cmTemplateProcessor, Te\n                 .map(SharedServiceConfigsView::isDatalakeCluster)\n                 .orElse(false);\n         String cdhVersion = getCdhVersion(source);\n-        boolean is722OrNewer = isVersionNewerOrEqualThanLimited(cdhVersion, CLOUDERAMANAGER_VERSION_7_2_2);\n+        boolean is727OrNewer = isVersionNewerOrEqualThanLimited(cdhVersion, CLOUDERAMANAGER_VERSION_7_2_7);\n         String accountId = ThreadBasedUserCrnProvider.getAccountId();\n         boolean sdxHbaseCloudStorageEnabled =\n                 entitlementService.sdxHbaseCloudStorageEnabled(accountId);\n         return source.getFileSystemConfigurationView().isPresent()\n                 && cmTemplateProcessor.isRoleTypePresentInService(getServiceType(), getRoleTypes())\n-                && (!datalakeCluster || (is722OrNewer && sdxHbaseCloudStorageEnabled));\n+                && (!datalakeCluster || (is727OrNewer && sdxHbaseCloudStorageEnabled));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7aa7f9946c9e6934d0e8780250bf85daa8321bf2"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebf1f194adb060c496bcca5dbb2905335ed952a5", "author": {"user": {"login": "LinaAtAustin", "name": "Na Li"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/ebf1f194adb060c496bcca5dbb2905335ed952a5", "committedDate": "2020-12-11T20:35:38Z", "message": "CB-10320: Do not enable HBase on S3 for 7.2.6 when Raz is enabled"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7aa7f9946c9e6934d0e8780250bf85daa8321bf2", "author": {"user": {"login": "LinaAtAustin", "name": "Na Li"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/7aa7f9946c9e6934d0e8780250bf85daa8321bf2", "committedDate": "2020-12-11T17:42:53Z", "message": "CB-10320: Do not enable HBase on S3 for 7.2.6 when Raz is enabled"}, "afterCommit": {"oid": "ebf1f194adb060c496bcca5dbb2905335ed952a5", "author": {"user": {"login": "LinaAtAustin", "name": "Na Li"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/ebf1f194adb060c496bcca5dbb2905335ed952a5", "committedDate": "2020-12-11T20:35:38Z", "message": "CB-10320: Do not enable HBase on S3 for 7.2.6 when Raz is enabled"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNjI1OTc1", "url": "https://github.com/hortonworks/cloudbreak/pull/9642#pullrequestreview-550625975", "createdAt": "2020-12-11T22:44:54Z", "commit": {"oid": "ebf1f194adb060c496bcca5dbb2905335ed952a5"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQyMjo0NDo1NFrOIETJZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQyMjo0NDo1NFrOIETJZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTM3ODkxNw==", "bodyText": "mmm so we are switching to Runtime and CM versions being different starting from 7.2.7. I\nThe question now becomes if you should check for the CM version or Cloudera Runtime (CDH) version. If it is Cloudera Runtime version, then we should update the check on runtime (instead of CM).\nIf this should be a CM check, then there is no CM 7.2.7. After CM 7.2.6, it becomes CM 7.3.0. You should follow up with CRB-1455 to understand more about how to check runtime version vs. CM version.", "url": "https://github.com/hortonworks/cloudbreak/pull/9642#discussion_r541378917", "createdAt": "2020-12-11T22:44:54Z", "author": {"login": "kmanamcheri"}, "path": "template-manager-cmtemplate/src/main/java/com/sequenceiq/cloudbreak/cmtemplate/CMRepositoryVersionUtil.java", "diffHunk": "@@ -32,6 +32,8 @@\n \n     public static final Versioned CLOUDERAMANAGER_VERSION_7_2_6 = () -> \"7.2.6\";\n \n+    public static final Versioned CLOUDERAMANAGER_VERSION_7_2_7 = () -> \"7.2.7\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf1f194adb060c496bcca5dbb2905335ed952a5"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxODYzOTEx", "url": "https://github.com/hortonworks/cloudbreak/pull/9642#pullrequestreview-551863911", "createdAt": "2020-12-14T20:24:54Z", "commit": {"oid": "ebf1f194adb060c496bcca5dbb2905335ed952a5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1982, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}