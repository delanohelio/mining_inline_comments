{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMDEzOTc2", "number": 8964, "title": "CDPCP-2986. Include internal machine users in user sync", "bodyText": "Internal machine users are needed in user sync. This commit adds\nthe includeInternal flag to the listMachineUsers calls.\nSee detailed description in the commit message.", "createdAt": "2020-09-09T17:33:27Z", "url": "https://github.com/hortonworks/cloudbreak/pull/8964", "merged": true, "mergeCommit": {"oid": "60679ef6d6e9a62f89932408a2df97172e9e61fc"}, "closed": true, "closedAt": "2020-09-09T19:58:44Z", "author": {"login": "handavid"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHP7TDgBqjM3NDcwODk0NTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHQdhfAFqTQ4NTI4NjEyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "78a137523b1a48a80657ed853717dfce2557d899", "author": {"user": {"login": "handavid", "name": "David Han"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/78a137523b1a48a80657ed853717dfce2557d899", "committedDate": "2020-09-09T17:27:51Z", "message": "CDPCP-2986. Include internal machine users in user sync\n\nInternal machine users are needed in user sync. This commit adds\nthe includeInternal flag to the listMachineUsers calls."}, "afterCommit": {"oid": "4fd2053950b4cbab7275a9d42ce4431e4a1f34bc", "author": {"user": {"login": "handavid", "name": "David Han"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/4fd2053950b4cbab7275a9d42ce4431e4a1f34bc", "committedDate": "2020-09-09T17:47:42Z", "message": "CDPCP-2986. Include internal machine users in user sync\n\nInternal machine users are needed in user sync. This commit adds\nthe includeInternal flag to the listMachineUsers calls."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MjYxNjE1", "url": "https://github.com/hortonworks/cloudbreak/pull/8964#pullrequestreview-485261615", "createdAt": "2020-09-09T17:50:37Z", "commit": {"oid": "78a137523b1a48a80657ed853717dfce2557d899"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MjY0MjM4", "url": "https://github.com/hortonworks/cloudbreak/pull/8964#pullrequestreview-485264238", "createdAt": "2020-09-09T17:54:27Z", "commit": {"oid": "4fd2053950b4cbab7275a9d42ce4431e4a1f34bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNzo1NDoyN1rOHPTa3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNzo1NDoyN1rOHPTa3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgwODg2MQ==", "bodyText": "Don't we want to make this configurable?", "url": "https://github.com/hortonworks/cloudbreak/pull/8964#discussion_r485808861", "createdAt": "2020-09-09T17:54:27Z", "author": {"login": "keyki"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/user/UmsUsersStateProvider.java", "diffHunk": "@@ -43,6 +43,8 @@\n \n     private static final String ADMIN_FREEIPA_GROUP = \"admins\";\n \n+    private static final boolean INCLUDE_INTERNAL_MACHINE_USERS = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4fd2053950b4cbab7275a9d42ce4431e4a1f34bc"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6c85ac666369d8eb30322d19af5465e6c132e13", "author": {"user": {"login": "handavid", "name": "David Han"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/a6c85ac666369d8eb30322d19af5465e6c132e13", "committedDate": "2020-09-09T18:20:00Z", "message": "CDPCP-2986. Include internal machine users in user sync\n\nInternal machineUsers may be environment users. UMS behavior\nis to return machineUsers if specified by CRN. This means that user\nsync will sync the internal machineUser if specified by CRN but\nthen delete the internal machineUser on a full user sync.\n\nThis commit fixes this behavior by exposing the includeInternal\nflag on the UMS listMachineUsers requests and always setting this\nflag to true when calculating the users state from the UMS."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4fd2053950b4cbab7275a9d42ce4431e4a1f34bc", "author": {"user": {"login": "handavid", "name": "David Han"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/4fd2053950b4cbab7275a9d42ce4431e4a1f34bc", "committedDate": "2020-09-09T17:47:42Z", "message": "CDPCP-2986. Include internal machine users in user sync\n\nInternal machine users are needed in user sync. This commit adds\nthe includeInternal flag to the listMachineUsers calls."}, "afterCommit": {"oid": "a6c85ac666369d8eb30322d19af5465e6c132e13", "author": {"user": {"login": "handavid", "name": "David Han"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/a6c85ac666369d8eb30322d19af5465e6c132e13", "committedDate": "2020-09-09T18:20:00Z", "message": "CDPCP-2986. Include internal machine users in user sync\n\nInternal machineUsers may be environment users. UMS behavior\nis to return machineUsers if specified by CRN. This means that user\nsync will sync the internal machineUser if specified by CRN but\nthen delete the internal machineUser on a full user sync.\n\nThis commit fixes this behavior by exposing the includeInternal\nflag on the UMS listMachineUsers requests and always setting this\nflag to true when calculating the users state from the UMS."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1Mjg2MTIx", "url": "https://github.com/hortonworks/cloudbreak/pull/8964#pullrequestreview-485286121", "createdAt": "2020-09-09T18:25:26Z", "commit": {"oid": "a6c85ac666369d8eb30322d19af5465e6c132e13"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2292, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}