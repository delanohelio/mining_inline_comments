{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMjIxMjQ4", "number": 9218, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQxNjo1OTowMlrOEu-4Hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQxNzowMToxN1rOEu-49g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NzAwMTI3OnYy", "diffSide": "RIGHT", "path": "redbeams/src/main/java/com/sequenceiq/redbeams/converter/spi/DBStackToDatabaseStackConverter.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQxNjo1OTowMlrOHjsNdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwNzoyNjo1NlrOHkBByQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzE4NjU1MQ==", "bodyText": "do we need this todo?", "url": "https://github.com/hortonworks/cloudbreak/pull/9218#discussion_r507186551", "createdAt": "2020-10-18T16:59:02Z", "author": {"login": "doktoric"}, "path": "redbeams/src/main/java/com/sequenceiq/redbeams/converter/spi/DBStackToDatabaseStackConverter.java", "diffHunk": "@@ -66,6 +68,29 @@ private DatabaseServer buildDatabaseServer(DBStack dbStack) {\n             return null;\n         }\n \n+        Map<String, Object> params = buildParameters(dbStack);\n+        SecurityGroup securityGroup = dbStackDatabaseServer.getSecurityGroup();\n+\n+        DatabaseServer.Builder builder = DatabaseServer.builder()\n+                .serverId(dbStackDatabaseServer.getName())\n+                .flavor(dbStackDatabaseServer.getInstanceType())\n+                .engine(getDatabaseEngine(dbStackDatabaseServer))\n+                .connectionDriver(dbStackDatabaseServer.getConnectionDriver())\n+                .rootUserName(dbStackDatabaseServer.getRootUserName())\n+                .rootPassword(dbStackDatabaseServer.getRootPassword())\n+                .port(dbStackDatabaseServer.getPort())\n+                .useSslEnforcement(determineSslEnforcement(dbStack))\n+                .storageSize(dbStackDatabaseServer.getStorageSize())\n+                .security(securityGroup == null ? null : new Security(Collections.emptyList(), securityGroup.getSecurityGroupIds()))\n+                // TODO / FIXME converter caller decides this?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ba908535b48e8e3e2abacb753cd6a98b051e6f4"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzE5NTA1Nw==", "bodyText": "It was already there added by the original author. I did not know if the status ever needed to be fixed so left it as is. But can be indeed removed if you say so. \ud83d\ude04", "url": "https://github.com/hortonworks/cloudbreak/pull/9218#discussion_r507195057", "createdAt": "2020-10-18T18:15:47Z", "author": {"login": "lajosrodek"}, "path": "redbeams/src/main/java/com/sequenceiq/redbeams/converter/spi/DBStackToDatabaseStackConverter.java", "diffHunk": "@@ -66,6 +68,29 @@ private DatabaseServer buildDatabaseServer(DBStack dbStack) {\n             return null;\n         }\n \n+        Map<String, Object> params = buildParameters(dbStack);\n+        SecurityGroup securityGroup = dbStackDatabaseServer.getSecurityGroup();\n+\n+        DatabaseServer.Builder builder = DatabaseServer.builder()\n+                .serverId(dbStackDatabaseServer.getName())\n+                .flavor(dbStackDatabaseServer.getInstanceType())\n+                .engine(getDatabaseEngine(dbStackDatabaseServer))\n+                .connectionDriver(dbStackDatabaseServer.getConnectionDriver())\n+                .rootUserName(dbStackDatabaseServer.getRootUserName())\n+                .rootPassword(dbStackDatabaseServer.getRootPassword())\n+                .port(dbStackDatabaseServer.getPort())\n+                .useSslEnforcement(determineSslEnforcement(dbStack))\n+                .storageSize(dbStackDatabaseServer.getStorageSize())\n+                .security(securityGroup == null ? null : new Security(Collections.emptyList(), securityGroup.getSecurityGroupIds()))\n+                // TODO / FIXME converter caller decides this?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzE4NjU1MQ=="}, "originalCommit": {"oid": "5ba908535b48e8e3e2abacb753cd6a98b051e6f4"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzUyNzYyNQ==", "bodyText": "ah :D ok leave there.", "url": "https://github.com/hortonworks/cloudbreak/pull/9218#discussion_r507527625", "createdAt": "2020-10-19T07:26:56Z", "author": {"login": "doktoric"}, "path": "redbeams/src/main/java/com/sequenceiq/redbeams/converter/spi/DBStackToDatabaseStackConverter.java", "diffHunk": "@@ -66,6 +68,29 @@ private DatabaseServer buildDatabaseServer(DBStack dbStack) {\n             return null;\n         }\n \n+        Map<String, Object> params = buildParameters(dbStack);\n+        SecurityGroup securityGroup = dbStackDatabaseServer.getSecurityGroup();\n+\n+        DatabaseServer.Builder builder = DatabaseServer.builder()\n+                .serverId(dbStackDatabaseServer.getName())\n+                .flavor(dbStackDatabaseServer.getInstanceType())\n+                .engine(getDatabaseEngine(dbStackDatabaseServer))\n+                .connectionDriver(dbStackDatabaseServer.getConnectionDriver())\n+                .rootUserName(dbStackDatabaseServer.getRootUserName())\n+                .rootPassword(dbStackDatabaseServer.getRootPassword())\n+                .port(dbStackDatabaseServer.getPort())\n+                .useSslEnforcement(determineSslEnforcement(dbStack))\n+                .storageSize(dbStackDatabaseServer.getStorageSize())\n+                .security(securityGroup == null ? null : new Security(Collections.emptyList(), securityGroup.getSecurityGroupIds()))\n+                // TODO / FIXME converter caller decides this?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzE4NjU1MQ=="}, "originalCommit": {"oid": "5ba908535b48e8e3e2abacb753cd6a98b051e6f4"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NzAwMzQyOnYy", "diffSide": "RIGHT", "path": "redbeams/src/main/java/com/sequenceiq/redbeams/converter/v4/databaseserver/DatabaseServerConfigToDatabaseServerV4ResponseConverter.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQxNzowMToxN1rOHjsOew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwODo1NjozN1rOHkEY4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzE4NjgxMQ==", "bodyText": "if (response.sslConfig == null) {\nresponse.setSslConfig(new SslConfigV4Response());\n}\n?", "url": "https://github.com/hortonworks/cloudbreak/pull/9218#discussion_r507186811", "createdAt": "2020-10-18T17:01:17Z", "author": {"login": "doktoric"}, "path": "redbeams/src/main/java/com/sequenceiq/redbeams/converter/v4/databaseserver/DatabaseServerConfigToDatabaseServerV4ResponseConverter.java", "diffHunk": "@@ -54,10 +54,13 @@ public DatabaseServerV4Response convert(DatabaseServerConfig source) {\n             }\n         } else if (source.getHost() != null && source.getPort() != null) {\n             response.setStatus(Status.AVAILABLE);\n+            response.setSslConfig(new SslConfigV4Response());\n         } else {\n             response.setStatus(Status.UNKNOWN);\n+            response.setSslConfig(new SslConfigV4Response());\n         }\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ba908535b48e8e3e2abacb753cd6a98b051e6f4"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzE5NTczNg==", "bodyText": "Oh, good point, I will move this (and the other similar occurrences above) out as a fallback default after the if/else if/else block.", "url": "https://github.com/hortonworks/cloudbreak/pull/9218#discussion_r507195736", "createdAt": "2020-10-18T18:21:47Z", "author": {"login": "lajosrodek"}, "path": "redbeams/src/main/java/com/sequenceiq/redbeams/converter/v4/databaseserver/DatabaseServerConfigToDatabaseServerV4ResponseConverter.java", "diffHunk": "@@ -54,10 +54,13 @@ public DatabaseServerV4Response convert(DatabaseServerConfig source) {\n             }\n         } else if (source.getHost() != null && source.getPort() != null) {\n             response.setStatus(Status.AVAILABLE);\n+            response.setSslConfig(new SslConfigV4Response());\n         } else {\n             response.setStatus(Status.UNKNOWN);\n+            response.setSslConfig(new SslConfigV4Response());\n         }\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzE4NjgxMQ=="}, "originalCommit": {"oid": "5ba908535b48e8e3e2abacb753cd6a98b051e6f4"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU4MjY5MA==", "bodyText": "Done.", "url": "https://github.com/hortonworks/cloudbreak/pull/9218#discussion_r507582690", "createdAt": "2020-10-19T08:56:37Z", "author": {"login": "lajosrodek"}, "path": "redbeams/src/main/java/com/sequenceiq/redbeams/converter/v4/databaseserver/DatabaseServerConfigToDatabaseServerV4ResponseConverter.java", "diffHunk": "@@ -54,10 +54,13 @@ public DatabaseServerV4Response convert(DatabaseServerConfig source) {\n             }\n         } else if (source.getHost() != null && source.getPort() != null) {\n             response.setStatus(Status.AVAILABLE);\n+            response.setSslConfig(new SslConfigV4Response());\n         } else {\n             response.setStatus(Status.UNKNOWN);\n+            response.setSslConfig(new SslConfigV4Response());\n         }\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzE4NjgxMQ=="}, "originalCommit": {"oid": "5ba908535b48e8e3e2abacb753cd6a98b051e6f4"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2149, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}