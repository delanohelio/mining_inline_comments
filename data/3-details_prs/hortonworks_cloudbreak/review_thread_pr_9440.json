{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxODQ3MjIy", "number": 9440, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjoxMDoyOFrOE5uPuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMzoxOToyMVrOE6RqsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4OTYxOTc2OnYy", "diffSide": "RIGHT", "path": "datalake/src/main/resources/duties/7.2.7/aws/medium_duty_ha.json", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjoxMDoyOFrOH0WyXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNzo1Njo0M1rOH1CCug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY2MTM0MQ==", "bodyText": "We have \"core\" of \"CORE\" type and \"main\"/\"auxiliary\" of \"CORE\" type. Very confusing :)", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#discussion_r524661341", "createdAt": "2020-11-16T22:10:28Z", "author": {"login": "kmanamcheri"}, "path": "datalake/src/main/resources/duties/7.2.7/aws/medium_duty_ha.json", "diffHunk": "@@ -44,7 +84,7 @@\n         }\n       },\n       \"nodeCount\": 1,\n-      \"type\": \"GATEWAY\",\n+      \"type\": \"CORE\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d75f46bbcd796efe27e9a98822c6514fc2df1f7"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM3MDA0Mg==", "bodyText": "Well, we started with gateway as gateway.  Might as well continue the confusion.", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#discussion_r525370042", "createdAt": "2020-11-17T17:56:43Z", "author": {"login": "frozenwizard"}, "path": "datalake/src/main/resources/duties/7.2.7/aws/medium_duty_ha.json", "diffHunk": "@@ -44,7 +84,7 @@\n         }\n       },\n       \"nodeCount\": 1,\n-      \"type\": \"GATEWAY\",\n+      \"type\": \"CORE\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY2MTM0MQ=="}, "originalCommit": {"oid": "1d75f46bbcd796efe27e9a98822c6514fc2df1f7"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MjAwMDU5OnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/defaults/blueprints/7.2.7/cdp-sdx-medium-ha.bp", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMDoyNTo0MFrOH0uKxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxNTo1NzoyN1rOH10zyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTA0NDQyMA==", "bodyText": "unclean.leader.election.enable defaults to false - you might not need to specify this parameter explicitly.\nYou can also consider omitting the config override for all the configs that now are set to the default values. Explicitly setting these is also perfectly fine.", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#discussion_r525044420", "createdAt": "2020-11-17T10:25:40Z", "author": {"login": "gergowilder"}, "path": "core/src/main/resources/defaults/blueprints/7.2.7/cdp-sdx-medium-ha.bp", "diffHunk": "@@ -361,39 +377,39 @@\n           },\n           {\n             \"name\": \"default.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"offsets.topic.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"transaction.state.log.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"offset.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"config.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"status.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"transaction.state.log.min.isr\",\n-            \"value\": \"1\"\n+            \"value\": \"2\"\n           },\n           {\n             \"name\": \"min.insync.replicas\",\n-            \"value\": \"1\"\n+            \"value\": \"2\"\n           },\n           {\n             \"name\": \"unclean.leader.election.enable\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d75f46bbcd796efe27e9a98822c6514fc2df1f7"}, "originalPosition": 173}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM3MjM3Nw==", "bodyText": "Ok.", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#discussion_r525372377", "createdAt": "2020-11-17T18:00:13Z", "author": {"login": "frozenwizard"}, "path": "core/src/main/resources/defaults/blueprints/7.2.7/cdp-sdx-medium-ha.bp", "diffHunk": "@@ -361,39 +377,39 @@\n           },\n           {\n             \"name\": \"default.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"offsets.topic.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"transaction.state.log.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"offset.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"config.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"status.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"transaction.state.log.min.isr\",\n-            \"value\": \"1\"\n+            \"value\": \"2\"\n           },\n           {\n             \"name\": \"min.insync.replicas\",\n-            \"value\": \"1\"\n+            \"value\": \"2\"\n           },\n           {\n             \"name\": \"unclean.leader.election.enable\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTA0NDQyMA=="}, "originalCommit": {"oid": "1d75f46bbcd796efe27e9a98822c6514fc2df1f7"}, "originalPosition": 173}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTU0MDMzMA==", "bodyText": "I removed them but default.replication.factor and min.insync.replicas weren't being set to the right value, so i've set it to default.replication.factor=3 and min.insync.replicas=2.", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#discussion_r525540330", "createdAt": "2020-11-17T21:36:16Z", "author": {"login": "frozenwizard"}, "path": "core/src/main/resources/defaults/blueprints/7.2.7/cdp-sdx-medium-ha.bp", "diffHunk": "@@ -361,39 +377,39 @@\n           },\n           {\n             \"name\": \"default.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"offsets.topic.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"transaction.state.log.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"offset.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"config.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"status.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"transaction.state.log.min.isr\",\n-            \"value\": \"1\"\n+            \"value\": \"2\"\n           },\n           {\n             \"name\": \"min.insync.replicas\",\n-            \"value\": \"1\"\n+            \"value\": \"2\"\n           },\n           {\n             \"name\": \"unclean.leader.election.enable\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTA0NDQyMA=="}, "originalCommit": {"oid": "1d75f46bbcd796efe27e9a98822c6514fc2df1f7"}, "originalPosition": 173}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjIwMTgwMA==", "bodyText": "LGTM now.", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#discussion_r526201800", "createdAt": "2020-11-18T15:57:27Z", "author": {"login": "gergowilder"}, "path": "core/src/main/resources/defaults/blueprints/7.2.7/cdp-sdx-medium-ha.bp", "diffHunk": "@@ -361,39 +377,39 @@\n           },\n           {\n             \"name\": \"default.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"offsets.topic.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"transaction.state.log.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"offset.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"config.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"status.storage.replication.factor\",\n-            \"value\": \"2\"\n+            \"value\": \"3\"\n           },\n           {\n             \"name\": \"transaction.state.log.min.isr\",\n-            \"value\": \"1\"\n+            \"value\": \"2\"\n           },\n           {\n             \"name\": \"min.insync.replicas\",\n-            \"value\": \"1\"\n+            \"value\": \"2\"\n           },\n           {\n             \"name\": \"unclean.leader.election.enable\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTA0NDQyMA=="}, "originalCommit": {"oid": "1d75f46bbcd796efe27e9a98822c6514fc2df1f7"}, "originalPosition": 173}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NTQyMzIwOnYy", "diffSide": "RIGHT", "path": "template-manager-cmtemplate/src/main/java/com/sequenceiq/cloudbreak/cmtemplate/configproviders/raz/RangerRazBaseConfigProvider.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMzoxOToyMVrOH1Pdyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxNjowNToyN1rOH11PPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTU4OTk2Mg==", "bodyText": "Hmm.. Didn't think about this.. Did you run a search-all on all code for the string \"master\". Hopefully this doesn't break things arbitrarily.", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#discussion_r525589962", "createdAt": "2020-11-17T23:19:21Z", "author": {"login": "kmanamcheri"}, "path": "template-manager-cmtemplate/src/main/java/com/sequenceiq/cloudbreak/cmtemplate/configproviders/raz/RangerRazBaseConfigProvider.java", "diffHunk": "@@ -30,7 +30,7 @@\n             Set<HostgroupView> hostgroupViews = source.getHostgroupViews();\n \n             return hostgroupViews.stream()\n-                    .filter(hg -> hg.getName().toLowerCase().equals(\"master\"))\n+                    .filter(hg -> hg.getName().toLowerCase().equals(\"master\") || hg.getName().toLowerCase().equals(\"main\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a72f3c66ab2b500fd8b987a8831ce43482541c96"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE5NTcwNw==", "bodyText": "It deploys fine.  But I'll look further into if anything uses that name.", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#discussion_r526195707", "createdAt": "2020-11-18T15:51:08Z", "author": {"login": "frozenwizard"}, "path": "template-manager-cmtemplate/src/main/java/com/sequenceiq/cloudbreak/cmtemplate/configproviders/raz/RangerRazBaseConfigProvider.java", "diffHunk": "@@ -30,7 +30,7 @@\n             Set<HostgroupView> hostgroupViews = source.getHostgroupViews();\n \n             return hostgroupViews.stream()\n-                    .filter(hg -> hg.getName().toLowerCase().equals(\"master\"))\n+                    .filter(hg -> hg.getName().toLowerCase().equals(\"master\") || hg.getName().toLowerCase().equals(\"main\"))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTU4OTk2Mg=="}, "originalCommit": {"oid": "a72f3c66ab2b500fd8b987a8831ce43482541c96"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE5NzMwOA==", "bodyText": "There's 3196 occurrences of \"master\" in CB.", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#discussion_r526197308", "createdAt": "2020-11-18T15:53:09Z", "author": {"login": "frozenwizard"}, "path": "template-manager-cmtemplate/src/main/java/com/sequenceiq/cloudbreak/cmtemplate/configproviders/raz/RangerRazBaseConfigProvider.java", "diffHunk": "@@ -30,7 +30,7 @@\n             Set<HostgroupView> hostgroupViews = source.getHostgroupViews();\n \n             return hostgroupViews.stream()\n-                    .filter(hg -> hg.getName().toLowerCase().equals(\"master\"))\n+                    .filter(hg -> hg.getName().toLowerCase().equals(\"master\") || hg.getName().toLowerCase().equals(\"main\"))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTU4OTk2Mg=="}, "originalCommit": {"oid": "a72f3c66ab2b500fd8b987a8831ce43482541c96"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjIwMTI4NA==", "bodyText": "There's 3196 occurrences of \"master\" in CB.\n\n:/\nI am wondering if we should split this into two tasks\n\nChanging the shape\nChanging the name \"master\" to \"main\"\n\nThat way, if something does cause an issue with hardcoded string \"master\", we can look into that separately and we would not need to rollback the whole shape change if it comes down to that. What do you think?", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#discussion_r526201284", "createdAt": "2020-11-18T15:56:51Z", "author": {"login": "kmanamcheri"}, "path": "template-manager-cmtemplate/src/main/java/com/sequenceiq/cloudbreak/cmtemplate/configproviders/raz/RangerRazBaseConfigProvider.java", "diffHunk": "@@ -30,7 +30,7 @@\n             Set<HostgroupView> hostgroupViews = source.getHostgroupViews();\n \n             return hostgroupViews.stream()\n-                    .filter(hg -> hg.getName().toLowerCase().equals(\"master\"))\n+                    .filter(hg -> hg.getName().toLowerCase().equals(\"master\") || hg.getName().toLowerCase().equals(\"main\"))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTU4OTk2Mg=="}, "originalCommit": {"oid": "a72f3c66ab2b500fd8b987a8831ce43482541c96"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjIwODgyOQ==", "bodyText": "I'm going to do the rename of master->main in another commit so if we have to change it back, we can just revert that commit instead of the whole commit.  There's a bunch of user text and integration tests that use the name master.  Maybe we should just name gateway master (since it runs CM anyway).", "url": "https://github.com/hortonworks/cloudbreak/pull/9440#discussion_r526208829", "createdAt": "2020-11-18T16:05:27Z", "author": {"login": "frozenwizard"}, "path": "template-manager-cmtemplate/src/main/java/com/sequenceiq/cloudbreak/cmtemplate/configproviders/raz/RangerRazBaseConfigProvider.java", "diffHunk": "@@ -30,7 +30,7 @@\n             Set<HostgroupView> hostgroupViews = source.getHostgroupViews();\n \n             return hostgroupViews.stream()\n-                    .filter(hg -> hg.getName().toLowerCase().equals(\"master\"))\n+                    .filter(hg -> hg.getName().toLowerCase().equals(\"master\") || hg.getName().toLowerCase().equals(\"main\"))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTU4OTk2Mg=="}, "originalCommit": {"oid": "a72f3c66ab2b500fd8b987a8831ce43482541c96"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3597, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}