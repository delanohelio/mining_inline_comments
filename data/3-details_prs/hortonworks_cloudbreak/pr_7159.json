{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MTA0ODA0", "number": 7159, "title": "CB-5150 added parcel manifest checks", "bodyText": "e2e test was failing because the parcels got removed due to CM build artifact policy\nwe should statically check for the presented URL's so Base images will select the correct urls.", "createdAt": "2020-01-28T16:19:22Z", "url": "https://github.com/hortonworks/cloudbreak/pull/7159", "merged": true, "mergeCommit": {"oid": "f3161cccbddaeacdc6914540025047992696f622"}, "closed": true, "closedAt": "2020-01-29T11:16:05Z", "author": {"login": "lnardai"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-0UMKgFqTM0OTU0MDIwMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_CF18gBqjI5ODg2NjgzNjM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NTQwMjAx", "url": "https://github.com/hortonworks/cloudbreak/pull/7159#pullrequestreview-349540201", "createdAt": "2020-01-28T16:55:21Z", "commit": {"oid": "9c86446c2203fc3d6b1301097959f2f853c5a5e8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5ODg5OTU1", "url": "https://github.com/hortonworks/cloudbreak/pull/7159#pullrequestreview-349889955", "createdAt": "2020-01-29T06:47:42Z", "commit": {"oid": "9c86446c2203fc3d6b1301097959f2f853c5a5e8"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwNjo0Nzo0MlrOFi-DuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwNjo0Nzo0MlrOFi-DuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjIxMjY2NQ==", "bodyText": "Is the parcel url should be ended with /?", "url": "https://github.com/hortonworks/cloudbreak/pull/7159#discussion_r372212665", "createdAt": "2020-01-29T06:47:42Z", "author": {"login": "topolyai5"}, "path": "core/src/test/java/com/sequenceiq/cloudbreak/util/ParcelAccessibilityTest.java", "diffHunk": "@@ -26,29 +28,47 @@\n \n public class ParcelAccessibilityTest {\n \n+    private static Map<String, Object> appYaml;\n+\n+    @BeforeAll\n+    public static void setUp() throws IOException, URISyntaxException {\n+        appYaml = readCoreAppYaml();\n+    }\n+\n+    @Test\n+    public void testParcelAccessibility() {\n+        List<DefaultCDHInfo> defaultCDHInfo = getCsds(appYaml);\n+        defaultCDHInfo.stream()\n+                .filter(s -> !s.getParcels().isEmpty())\n+                .flatMap(s -> s.getParcels().stream())\n+                .flatMap(s -> s.getCsd().stream())\n+                .forEach(this::validateUrl);\n+    }\n+\n     @Test\n-    public void testParcelAccessibility() throws URISyntaxException, IOException {\n+    void validateParcelUrls() {\n+        List<DefaultCDHInfo> defaultCDHInfo = getCsds(appYaml);\n+        defaultCDHInfo.stream()\n+                .filter(s -> !s.getRepo().getStack().isEmpty())\n+                .flatMap(s -> s.getRepo().getStack().entrySet().stream())\n+                .map(s -> s.getValue() + \"manifest.json\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c86446c2203fc3d6b1301097959f2f853c5a5e8"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25473b47bbc3331263753c4f46c5aa9759a23624", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/25473b47bbc3331263753c4f46c5aa9759a23624", "committedDate": "2020-01-29T08:58:03Z", "message": "CB-5150 added parcel manifest checks"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c86446c2203fc3d6b1301097959f2f853c5a5e8", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/9c86446c2203fc3d6b1301097959f2f853c5a5e8", "committedDate": "2020-01-28T16:17:26Z", "message": "CB-5150 added parcel manifest checks"}, "afterCommit": {"oid": "25473b47bbc3331263753c4f46c5aa9759a23624", "author": {"user": {"login": "lnardai", "name": null}}, "url": "https://github.com/hortonworks/cloudbreak/commit/25473b47bbc3331263753c4f46c5aa9759a23624", "committedDate": "2020-01-29T08:58:03Z", "message": "CB-5150 added parcel manifest checks"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1917, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}