{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwNzIwMzI5", "number": 9301, "title": "CB-9005 - FreeIpa client tracing", "bodyText": "Additional code cleanup/refactor in VaultRetryService", "createdAt": "2020-10-27T12:35:09Z", "url": "https://github.com/hortonworks/cloudbreak/pull/9301", "merged": true, "mergeCommit": {"oid": "3fd7824bff7faac66c2ea67575f5f14e9a98e366"}, "closed": true, "closedAt": "2020-10-28T13:33:25Z", "author": {"login": "attilapalfi92"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWo4CngBqjM5MjU4ODI3NjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdW8BkNgFqTUxODU3MDc2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58aac9d04a3e8fcf3f6eb7805e22789cf92494d6", "author": {"user": {"login": "attilapalfi92", "name": "Attila P\u00e1lfi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/58aac9d04a3e8fcf3f6eb7805e22789cf92494d6", "committedDate": "2020-10-27T12:34:26Z", "message": "CB-9005 - FreeIpa client tracing\nAdditional code cleanup/refactor in VaultRetryService"}, "afterCommit": {"oid": "8a659a6994593848ec03779d1cda59fed8482000", "author": {"user": {"login": "attilapalfi92", "name": "Attila P\u00e1lfi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8a659a6994593848ec03779d1cda59fed8482000", "committedDate": "2020-10-27T13:20:41Z", "message": "CB-9005 - FreeIpa client tracing\nAdditional code cleanup/refactor in VaultRetryService"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8a659a6994593848ec03779d1cda59fed8482000", "author": {"user": {"login": "attilapalfi92", "name": "Attila P\u00e1lfi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8a659a6994593848ec03779d1cda59fed8482000", "committedDate": "2020-10-27T13:20:41Z", "message": "CB-9005 - FreeIpa client tracing\nAdditional code cleanup/refactor in VaultRetryService"}, "afterCommit": {"oid": "c3080f84ecc4770a30a6f6b90654427e12d03035", "author": {"user": {"login": "attilapalfi92", "name": "Attila P\u00e1lfi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/c3080f84ecc4770a30a6f6b90654427e12d03035", "committedDate": "2020-10-27T14:43:13Z", "message": "CB-9005 - FreeIpa client tracing\nAdditional code cleanup/refactor in VaultRetryService"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MTgzMTgz", "url": "https://github.com/hortonworks/cloudbreak/pull/9301#pullrequestreview-518183183", "createdAt": "2020-10-27T21:59:25Z", "commit": {"oid": "c3080f84ecc4770a30a6f6b90654427e12d03035"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QyMTo1OToyNVrOHpSlow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QyMjowMTo0OVrOHpSqsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzA1ODIxMQ==", "bodyText": "nit: if you are adding the MockitoExtension, can you pull this up to a class field and add the @mock annotation?", "url": "https://github.com/hortonworks/cloudbreak/pull/9301#discussion_r513058211", "createdAt": "2020-10-27T21:59:25Z", "author": {"login": "handavid"}, "path": "freeipa-client/src/test/java/com/sequenceiq/freeipa/client/FreeIpaClientTest.java", "diffHunk": "@@ -20,8 +29,8 @@ void setUp() {\n                 mock(JsonRpcHttpClient.class),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3080f84ecc4770a30a6f6b90654427e12d03035"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzA1OTUwNA==", "bodyText": "nit: all other parameters are each on their own lines.", "url": "https://github.com/hortonworks/cloudbreak/pull/9301#discussion_r513059504", "createdAt": "2020-10-27T22:01:49Z", "author": {"login": "handavid"}, "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/FreeIpaClientFactory.java", "diffHunk": "@@ -211,15 +216,15 @@ private FreeIpaClientBuilder getFreeIpaClientBuilderForClusterProxy(Stack stack,\n                 additionalHeadersStickySessionFirstRpc,\n                 additionalHeadersStickySession,\n                 stickyIdHeader,\n-                CLUSTER_PROXY_ERROR_LISTENER);\n+                CLUSTER_PROXY_ERROR_LISTENER, tracer);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3080f84ecc4770a30a6f6b90654427e12d03035"}, "originalPosition": 24}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c3080f84ecc4770a30a6f6b90654427e12d03035", "author": {"user": {"login": "attilapalfi92", "name": "Attila P\u00e1lfi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/c3080f84ecc4770a30a6f6b90654427e12d03035", "committedDate": "2020-10-27T14:43:13Z", "message": "CB-9005 - FreeIpa client tracing\nAdditional code cleanup/refactor in VaultRetryService"}, "afterCommit": {"oid": "e78bcd7dba64ad8c1bddec761129da7e5f1fed0e", "author": {"user": {"login": "attilapalfi92", "name": "Attila P\u00e1lfi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/e78bcd7dba64ad8c1bddec761129da7e5f1fed0e", "committedDate": "2020-10-28T09:10:51Z", "message": "CB-9005 - FreeIpa client tracing\nAdditional code cleanup/refactor in VaultRetryService"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4NDgyNDk0", "url": "https://github.com/hortonworks/cloudbreak/pull/9301#pullrequestreview-518482494", "createdAt": "2020-10-28T09:46:28Z", "commit": {"oid": "e78bcd7dba64ad8c1bddec761129da7e5f1fed0e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwOTo0NjoyOFrOHphwbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwOTo0NjoyOFrOHphwbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzMwNjczNQ==", "bodyText": "if I see it well this is almost the same as initSpan, except it will return Optional.empty() if tracer.activeSpan() is null\nCould you refactor this part to reflect this logic?", "url": "https://github.com/hortonworks/cloudbreak/pull/9301#discussion_r513306735", "createdAt": "2020-10-28T09:46:28Z", "author": {"login": "lacikaaa"}, "path": "common/src/main/java/com/sequenceiq/cloudbreak/tracing/TracingUtil.java", "diffHunk": "@@ -25,6 +29,25 @@\n     private TracingUtil() {\n     }\n \n+    public static Span initSpan(Tracer tracer, String component, String operation) {\n+        Span activeSpan = tracer.activeSpan();\n+        Span span = tracer.buildSpan(component + \" - \" + operation)\n+                .addReference(References.FOLLOWS_FROM, activeSpan != null ? activeSpan.context() : null)\n+                .start();\n+        span.setTag(TracingUtil.COMPONENT, component);\n+        return span;\n+    }\n+\n+    public static Optional<Span> initOptionalSpan(Tracer tracer, String component, String operation) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e78bcd7dba64ad8c1bddec761129da7e5f1fed0e"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8812a837b9cef2bff8cec32301f19efb26a314b3", "author": {"user": {"login": "attilapalfi92", "name": "Attila P\u00e1lfi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8812a837b9cef2bff8cec32301f19efb26a314b3", "committedDate": "2020-10-28T11:34:37Z", "message": "CB-9005 - FreeIpa client tracing\nAdditional code cleanup/refactor in VaultRetryService"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e78bcd7dba64ad8c1bddec761129da7e5f1fed0e", "author": {"user": {"login": "attilapalfi92", "name": "Attila P\u00e1lfi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/e78bcd7dba64ad8c1bddec761129da7e5f1fed0e", "committedDate": "2020-10-28T09:10:51Z", "message": "CB-9005 - FreeIpa client tracing\nAdditional code cleanup/refactor in VaultRetryService"}, "afterCommit": {"oid": "8812a837b9cef2bff8cec32301f19efb26a314b3", "author": {"user": {"login": "attilapalfi92", "name": "Attila P\u00e1lfi"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/8812a837b9cef2bff8cec32301f19efb26a314b3", "committedDate": "2020-10-28T11:34:37Z", "message": "CB-9005 - FreeIpa client tracing\nAdditional code cleanup/refactor in VaultRetryService"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4NTcwNzY1", "url": "https://github.com/hortonworks/cloudbreak/pull/9301#pullrequestreview-518570765", "createdAt": "2020-10-28T11:39:35Z", "commit": {"oid": "8812a837b9cef2bff8cec32301f19efb26a314b3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2072, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}