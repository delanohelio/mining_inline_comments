{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3NzEzMDA4", "number": 7575, "title": "CB-5582 Authz framework - get resource crn by environment name or crn", "bodyText": "", "createdAt": "2020-03-13T10:52:17Z", "url": "https://github.com/hortonworks/cloudbreak/pull/7575", "merged": true, "mergeCommit": {"oid": "4d1cbdb98be4922f731aceff6aabfb46b28059f8"}, "closed": true, "closedAt": "2020-03-16T09:33:08Z", "author": {"login": "horadla23"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNRT7XgFqTM3NDM1MTE2OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOJJ11gBqjMxMzE5MzUwOTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MzUxMTY5", "url": "https://github.com/hortonworks/cloudbreak/pull/7575#pullrequestreview-374351169", "createdAt": "2020-03-13T14:37:15Z", "commit": {"oid": "74a5ccafac7c55742cc2f461bee5fe0dd5a0e606"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNDozNzoxNVrOF2GF4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNDozNzoxNVrOF2GF4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI2NzIzMg==", "bodyText": "MapMap?", "url": "https://github.com/hortonworks/cloudbreak/pull/7575#discussion_r392267232", "createdAt": "2020-03-13T14:37:15Z", "author": {"login": "lnardai"}, "path": "authorization-common/src/main/java/com/sequenceiq/authorization/service/EnvironmentCrnPermissionChecker.java", "diffHunk": "@@ -0,0 +1,56 @@\n+package com.sequenceiq.authorization.service;\n+\n+import java.lang.annotation.Annotation;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.annotation.PostConstruct;\n+import javax.inject.Inject;\n+\n+import org.aspectj.lang.ProceedingJoinPoint;\n+import org.aspectj.lang.reflect.MethodSignature;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.stereotype.Component;\n+\n+import com.sequenceiq.authorization.annotation.CheckPermissionByEnvironmentCrn;\n+import com.sequenceiq.authorization.annotation.EnvironmentCrn;\n+import com.sequenceiq.authorization.resource.AuthorizationResourceAction;\n+import com.sequenceiq.authorization.resource.AuthorizationResourceType;\n+\n+@Component\n+public class EnvironmentCrnPermissionChecker implements PermissionChecker<CheckPermissionByEnvironmentCrn> {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(EnvironmentCrnPermissionChecker.class);\n+\n+    @Inject\n+    private CommonPermissionCheckingUtils commonPermissionCheckingUtils;\n+\n+    @Inject\n+    private List<ResourceBasedCrnProvider> resourceBasedCrnProviders;\n+\n+    private final Map<AuthorizationResourceType, ResourceBasedCrnProvider> resourceBasedCrnProviderMap = new HashMap<>();\n+\n+    @PostConstruct\n+    public void populateResourceBasedCrnProviderMapMap() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74a5ccafac7c55742cc2f461bee5fe0dd5a0e606"}, "originalPosition": 36}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "74a5ccafac7c55742cc2f461bee5fe0dd5a0e606", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/74a5ccafac7c55742cc2f461bee5fe0dd5a0e606", "committedDate": "2020-03-13T10:50:58Z", "message": "CB-5582 Authz framework - get resource crn by environment name or crn"}, "afterCommit": {"oid": "43468bcfc10bc5d59f0464189393303e3dfca345", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/43468bcfc10bc5d59f0464189393303e3dfca345", "committedDate": "2020-03-13T14:41:38Z", "message": "CB-5582 Authz framework - get resource crn by environment name or crn"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0Mzg4NzQ1", "url": "https://github.com/hortonworks/cloudbreak/pull/7575#pullrequestreview-374388745", "createdAt": "2020-03-13T15:21:24Z", "commit": {"oid": "43468bcfc10bc5d59f0464189393303e3dfca345"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d3c0c4d887f96465a239e21d6e5b9646830d4dd", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/7d3c0c4d887f96465a239e21d6e5b9646830d4dd", "committedDate": "2020-03-16T07:40:34Z", "message": "CB-5582 Authz framework - get resource crn by environment name or crn"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43468bcfc10bc5d59f0464189393303e3dfca345", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/43468bcfc10bc5d59f0464189393303e3dfca345", "committedDate": "2020-03-13T14:41:38Z", "message": "CB-5582 Authz framework - get resource crn by environment name or crn"}, "afterCommit": {"oid": "7d3c0c4d887f96465a239e21d6e5b9646830d4dd", "author": {"user": {"login": "horadla23", "name": "Adam Horvath"}}, "url": "https://github.com/hortonworks/cloudbreak/commit/7d3c0c4d887f96465a239e21d6e5b9646830d4dd", "committedDate": "2020-03-16T07:40:34Z", "message": "CB-5582 Authz framework - get resource crn by environment name or crn"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2438, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}