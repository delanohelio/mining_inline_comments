{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0MjA0ODg2", "number": 8605, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwNzoxNjo0NVrOEQfrjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDo0MDozNFrOERewyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NzMxNzI0OnYy", "diffSide": "RIGHT", "path": "environment-api/src/main/java/com/sequenceiq/environment/api/v1/environment/endpoint/EnvironmentEndpoint.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwNzoxNjo0NVrOG0rLBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwNzo0MzoyNlrOG0sBvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzg4NjQ2OQ==", "bodyText": "pls rename it to verifyCredentialByCrn (or verifyCredentialByEnvCrn) to make it easier to understand, also pls fix nickname in the annotation", "url": "https://github.com/hortonworks/cloudbreak/pull/8605#discussion_r457886469", "createdAt": "2020-07-21T07:16:45Z", "author": {"login": "horadla23"}, "path": "environment-api/src/main/java/com/sequenceiq/environment/api/v1/environment/endpoint/EnvironmentEndpoint.java", "diffHunk": "@@ -184,6 +185,13 @@ SimpleEnvironmentResponses deleteMultipleByCrns(Set<String> crns,\n             nickname = \"stopEnvironmentByCrnV1\")\n     void postStopByCrn(@PathParam(\"crn\") String crn);\n \n+    @GET\n+    @Path(\"/crn/{crn}/verify\")\n+    @Produces(MediaType.APPLICATION_JSON)\n+    @ApiOperation(value = EnvironmentOpDescription.VERIFY_BY_CRN, notes = ENVIRONMENT_NOTES,\n+            nickname = \"verifyEnvironmentByCrn\", httpMethod = \"GET\")\n+    CredentialResponse verifyByCrn(@PathParam(\"crn\") String crn);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94e48e5f8a2c2442abef06ebe964fcb999b55060"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzg5NzI4Mw==", "bodyText": "Yes it makes sense to make it more specific.", "url": "https://github.com/hortonworks/cloudbreak/pull/8605#discussion_r457897283", "createdAt": "2020-07-21T07:37:43Z", "author": {"login": "foldik"}, "path": "environment-api/src/main/java/com/sequenceiq/environment/api/v1/environment/endpoint/EnvironmentEndpoint.java", "diffHunk": "@@ -184,6 +185,13 @@ SimpleEnvironmentResponses deleteMultipleByCrns(Set<String> crns,\n             nickname = \"stopEnvironmentByCrnV1\")\n     void postStopByCrn(@PathParam(\"crn\") String crn);\n \n+    @GET\n+    @Path(\"/crn/{crn}/verify\")\n+    @Produces(MediaType.APPLICATION_JSON)\n+    @ApiOperation(value = EnvironmentOpDescription.VERIFY_BY_CRN, notes = ENVIRONMENT_NOTES,\n+            nickname = \"verifyEnvironmentByCrn\", httpMethod = \"GET\")\n+    CredentialResponse verifyByCrn(@PathParam(\"crn\") String crn);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzg4NjQ2OQ=="}, "originalCommit": {"oid": "94e48e5f8a2c2442abef06ebe964fcb999b55060"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzkwMDQ3Ng==", "bodyText": "also maybe it is worth to change the path as well, because now based on path i can think that we are verifying the environment itself", "url": "https://github.com/hortonworks/cloudbreak/pull/8605#discussion_r457900476", "createdAt": "2020-07-21T07:43:26Z", "author": {"login": "horadla23"}, "path": "environment-api/src/main/java/com/sequenceiq/environment/api/v1/environment/endpoint/EnvironmentEndpoint.java", "diffHunk": "@@ -184,6 +185,13 @@ SimpleEnvironmentResponses deleteMultipleByCrns(Set<String> crns,\n             nickname = \"stopEnvironmentByCrnV1\")\n     void postStopByCrn(@PathParam(\"crn\") String crn);\n \n+    @GET\n+    @Path(\"/crn/{crn}/verify\")\n+    @Produces(MediaType.APPLICATION_JSON)\n+    @ApiOperation(value = EnvironmentOpDescription.VERIFY_BY_CRN, notes = ENVIRONMENT_NOTES,\n+            nickname = \"verifyEnvironmentByCrn\", httpMethod = \"GET\")\n+    CredentialResponse verifyByCrn(@PathParam(\"crn\") String crn);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzg4NjQ2OQ=="}, "originalCommit": {"oid": "94e48e5f8a2c2442abef06ebe964fcb999b55060"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NzY1MjU4OnYy", "diffSide": "RIGHT", "path": "environment/src/main/java/com/sequenceiq/environment/environment/v1/EnvironmentController.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDo0MDozNFrOG2Nu6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDo1NzozMVrOG2Og3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUwMTI4OQ==", "bodyText": "do we need this for the /name endpoint ? most of the time we have both /crn and /name", "url": "https://github.com/hortonworks/cloudbreak/pull/8605#discussion_r459501289", "createdAt": "2020-07-23T14:40:34Z", "author": {"login": "doktoric"}, "path": "environment/src/main/java/com/sequenceiq/environment/environment/v1/EnvironmentController.java", "diffHunk": "@@ -268,6 +274,15 @@ public void postStopByCrn(@ResourceCrn @TenantAwareParam String crn) {\n         environmentStopService.stopByCrn(crn);\n     }\n \n+    @Override\n+    @CheckPermissionByResourceCrn(action = AuthorizationResourceAction.DESCRIBE_ENVIRONMENT)\n+    public CredentialResponse verifyCredentialByEnvCrn(@ResourceCrn String crn) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4fb3f5a743c7091cab9a17db716ca864959e066"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUxNDA3OA==", "bodyText": "We don't need. UI will use the version which works with crn. I can add the /name version for consistency and usability reason if I have to.", "url": "https://github.com/hortonworks/cloudbreak/pull/8605#discussion_r459514078", "createdAt": "2020-07-23T14:57:31Z", "author": {"login": "foldik"}, "path": "environment/src/main/java/com/sequenceiq/environment/environment/v1/EnvironmentController.java", "diffHunk": "@@ -268,6 +274,15 @@ public void postStopByCrn(@ResourceCrn @TenantAwareParam String crn) {\n         environmentStopService.stopByCrn(crn);\n     }\n \n+    @Override\n+    @CheckPermissionByResourceCrn(action = AuthorizationResourceAction.DESCRIBE_ENVIRONMENT)\n+    public CredentialResponse verifyCredentialByEnvCrn(@ResourceCrn String crn) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUwMTI4OQ=="}, "originalCommit": {"oid": "c4fb3f5a743c7091cab9a17db716ca864959e066"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3061, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}