{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0MjgzNzIz", "number": 848, "title": "Pipeline Launch - reference files", "bodyText": "Description of changes\n\nRelated issue\nLink to the GitHub issue this pull request addresses using the #issuenum format.  If it completes an issue, use Fixes #issuenum to automatically close the issue.\nChecklist\nThings for the developer to confirm they've done before the PR should be accepted:\n\n CHANGELOG.md (and UPGRADING.md if necessary) updated with information for new change.\n Tests added (or description of how to test) for any new features.\n User documentation updated for UI or technical changes.", "createdAt": "2020-11-02T19:56:38Z", "url": "https://github.com/phac-nml/irida/pull/848", "merged": true, "mergeCommit": {"oid": "76a3be68e21b93b91119ed83ae596bd584595ef0"}, "closed": true, "closedAt": "2020-11-25T20:04:50Z", "author": {"login": "joshsadam"}, "timelineItems": {"totalCount": 54, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYqHZzgH2gAyNTE0MjgzNzIzOmJlY2Y5YmYxZGE4NmU0OTFjMzJkZDJjMzhlMjFkYWIwOWEyMjE3ZTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgECD6gFqTUzODgxMzgxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "becf9bf1da86e491c32dd2c38e21dab09a2217e6", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/becf9bf1da86e491c32dd2c38e21dab09a2217e6", "committedDate": "2020-11-02T19:55:31Z", "message": ":construction: Select and upload reference files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09c6aea11d60788df72e9a66d37cf7ef9599de75", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/09c6aea11d60788df72e9a66d37cf7ef9599de75", "committedDate": "2020-11-03T13:07:40Z", "message": ":globe_with_meridians: Added i18n to the file upload"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fee6f294578429abb6184487bc2989f22a2aef2", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/0fee6f294578429abb6184487bc2989f22a2aef2", "committedDate": "2020-11-03T18:19:52Z", "message": "Removed reference file from state\n\nReference file is now completely handled by the form."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a700e3ca0cb4d4db4f86fe302184003d085ae9e1", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/a700e3ca0cb4d4db4f86fe302184003d085ae9e1", "committedDate": "2020-11-03T18:21:13Z", "message": "Updated i18n of label reference files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "008e47ceeb10db9d956a6a3edea40cfc2d0a194d", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/008e47ceeb10db9d956a6a3edea40cfc2d0a194d", "committedDate": "2020-11-06T16:07:18Z", "message": "Remove all window.TL variables."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "235737a101f986643d979403dac6f0c2abe9f464", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/235737a101f986643d979403dac6f0c2abe9f464", "committedDate": "2020-11-06T20:34:31Z", "message": "Merge branch 'launch__saved_parameters' into launch_reference_files\n\n# Conflicts:\n#\tsrc/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIPipelineService.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61bc9c835a15551abe95f3730cafe61c54740870", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/61bc9c835a15551abe95f3730cafe61c54740870", "committedDate": "2020-11-09T12:20:43Z", "message": "Merge branch 'launch__saved_parameters' into launch_reference_files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33391f342e0d4825e50acc90f03a24c6ce29a1ca", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/33391f342e0d4825e50acc90f03a24c6ce29a1ca", "committedDate": "2020-11-09T16:46:56Z", "message": "Cleaning up how the divider's are being displayed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "394280066b19bd4a3824171543af89121b47c938", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/394280066b19bd4a3824171543af89121b47c938", "committedDate": "2020-11-09T18:27:14Z", "message": "Trying to use sessionStorage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4c887398b4dd78be5605c8473ef3c2340cb2b5a", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/e4c887398b4dd78be5605c8473ef3c2340cb2b5a", "committedDate": "2020-11-09T18:36:28Z", "message": "Fixed missing user from the session.\n\nStill don't know if this is a good thing to keep in there since we can easily get it out."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8af0e92a234d7f8ebe67fca1dfed533cbedfcbff", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/8af0e92a234d7f8ebe67fca1dfed533cbedfcbff", "committedDate": "2020-11-10T16:40:29Z", "message": "Set the default reference file selected\n\nIf a file is uploaded, it becomes the actively selected reference file."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37eb4fe92e702d17e8306fd01a5cf1d78d523006", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/37eb4fe92e702d17e8306fd01a5cf1d78d523006", "committedDate": "2020-11-10T17:08:20Z", "message": "Merge branch 'global-variables' into launch_reference_files\n\n# Conflicts:\n#\tsrc/main/resources/i18n/messages.properties\n#\tsrc/main/webapp/package.json\n#\tsrc/main/webapp/resources/js/utilities/date-utilities.js\n#\tsrc/main/webapp/yarn.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9e27517e0396903f064cff89586ff46fd376d21", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/f9e27517e0396903f064cff89586ff46fd376d21", "committedDate": "2020-11-10T17:19:53Z", "message": "Updated yarn lock file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bdae1c284cf2ee3de94f0f6163f0b071dac0e61", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/5bdae1c284cf2ee3de94f0f6163f0b071dac0e61", "committedDate": "2020-11-10T17:36:41Z", "message": "If there are reference files, set the first one as the default one."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a76f4d84bd9d5299f4bbff0d0c65a0cf0c82bf2b", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/a76f4d84bd9d5299f4bbff0d0c65a0cf0c82bf2b", "committedDate": "2020-11-12T15:04:32Z", "message": "Merge branch 'refactor-project-reference-file-page' into launch_reference_files\n\n# Conflicts:\n#\tsrc/main/webapp/resources/js/components/icons/Icons.jsx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0e9c3b0330835d6ee9d159c6f3dbbaf402e8194", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/a0e9c3b0330835d6ee9d159c6f3dbbaf402e8194", "committedDate": "2020-11-12T15:14:11Z", "message": "Merge branch 'refactor-project-reference-file-page' into launch_reference_files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a22a00ad115bd082163f903bb718bf3ee83d595c", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/a22a00ad115bd082163f903bb718bf3ee83d595c", "committedDate": "2020-11-12T16:25:08Z", "message": "Merge branch 'refactor-project-reference-file-page' into launch_reference_files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4da1a6a31865911d8097ea0782c8e63c1ca1d12f", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/4da1a6a31865911d8097ea0782c8e63c1ca1d12f", "committedDate": "2020-11-12T19:04:51Z", "message": "Merge branch 'refactor-project-reference-file-page' into launch_reference_files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a5ff237961d861f593786bc36a6c7d7c2ace91d", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/0a5ff237961d861f593786bc36a6c7d7c2ace91d", "committedDate": "2020-11-13T11:12:46Z", "message": "Working in Deep's new project reference files."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8904d89131b03e6382b7e4c5c199379478d7cb94", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/8904d89131b03e6382b7e4c5c199379478d7cb94", "committedDate": "2020-11-13T14:07:28Z", "message": "Merge branch 'refactor-project-reference-file-page' into launch_reference_files\n\n# Conflicts:\n#\tsrc/main/webapp/resources/js/pages/projects/reference-files/ReferenceFiles.jsx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5ff43d1bfa5fd28ed204af2e3e6559778002286", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/f5ff43d1bfa5fd28ed204af2e3e6559778002286", "committedDate": "2020-11-13T20:39:39Z", "message": "Updated UIReferenceFile to have file size"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fd7487867df0eb9b56f18c8fe40bc7b6235027b", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/2fd7487867df0eb9b56f18c8fe40bc7b6235027b", "committedDate": "2020-11-16T11:31:35Z", "message": ":construction: Fixed issue with selecting reference files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42708033b21ec4db04b343d73057cecf1aedb490", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/42708033b21ec4db04b343d73057cecf1aedb490", "committedDate": "2020-11-16T16:41:51Z", "message": "Updated look of radio button and added what project it came from"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60e7b97d613a6635d95e6390074703c4415c1f34", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/60e7b97d613a6635d95e6390074703c4415c1f34", "committedDate": "2020-11-16T17:04:44Z", "message": "Merge branch 'refactor-project-reference-file-page' into launch_reference_files\n\n# Conflicts:\n#\tsrc/main/java/ca/corefacility/bioinformatics/irida/ria/web/ajax/dto/references/UIReferenceFile.java\n#\tsrc/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIProjectReferenceFileService.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0112d41a2009cbc455ee3318138639303935d82a", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/0112d41a2009cbc455ee3318138639303935d82a", "committedDate": "2020-11-16T17:05:09Z", "message": "Fixed merge issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5df6dc67d76b3fbbf039d30834b99895ac2f251e", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/5df6dc67d76b3fbbf039d30834b99895ac2f251e", "committedDate": "2020-11-16T17:05:39Z", "message": "Merge branch 'refactor-project-reference-file-page' into launch_reference_files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a077bde9458b4aeead31871affb890c1fab1e27", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/5a077bde9458b4aeead31871affb890c1fab1e27", "committedDate": "2020-11-16T17:28:04Z", "message": "Fixed merge issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cabc2bcf2765c8a92dadaffb1ad0e7c6338a007", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/6cabc2bcf2765c8a92dadaffb1ad0e7c6338a007", "committedDate": "2020-11-16T22:16:47Z", "message": "Merge branch 'launch__base' into launch_reference_files\n\n# Conflicts:\n#\tsrc/main/resources/i18n/messages.properties\n#\tsrc/main/webapp/yarn.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ae27a4f65fa00979113f281c60630be0d2a1c6c", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/9ae27a4f65fa00979113f281c60630be0d2a1c6c", "committedDate": "2020-11-17T11:13:03Z", "message": "Code cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "835a0420aeb86019307d0541b7d2d0358d5c8d5c", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/835a0420aeb86019307d0541b7d2d0358d5c8d5c", "committedDate": "2020-11-17T11:17:07Z", "message": "Reset to original, this should not have been modified here."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "289d9e09beebc39a1b34043720383bdaa3dac6fa", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/289d9e09beebc39a1b34043720383bdaa3dac6fa", "committedDate": "2020-11-17T11:26:25Z", "message": "These should not have been here"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d0b42df80d6d7e2d9edd30e6af37508e922c53f", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/1d0b42df80d6d7e2d9edd30e6af37508e922c53f", "committedDate": "2020-11-17T11:32:41Z", "message": "Should not have been commited"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bb05b08aec550df2878fa502e9b349ecf8a3157", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/2bb05b08aec550df2878fa502e9b349ecf8a3157", "committedDate": "2020-11-17T12:17:51Z", "message": "Added JSDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1af02824d198320d3ae8f76a0e926826a28132e0", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/1af02824d198320d3ae8f76a0e926826a28132e0", "committedDate": "2020-11-17T12:20:23Z", "message": "Should not have been commited"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f4cb97e23a15c2c137918db445d2bbbc0498933", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/5f4cb97e23a15c2c137918db445d2bbbc0498933", "committedDate": "2020-11-17T12:20:37Z", "message": "Invalid import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a27ef32fe7ede2f739fb6028f6bf0e385786f111", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/a27ef32fe7ede2f739fb6028f6bf0e385786f111", "committedDate": "2020-11-17T12:22:02Z", "message": "These don't need to be final"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "232f50ed4c01193247e5f639e052327b86a89b4a", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/232f50ed4c01193247e5f639e052327b86a89b4a", "committedDate": "2020-11-17T16:06:50Z", "message": "This should not have been removed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb3750f33b856f9c99c5e7030b0955aa4b3bf109", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/bb3750f33b856f9c99c5e7030b0955aa4b3bf109", "committedDate": "2020-11-17T16:08:32Z", "message": "These should not have been modified"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4017c2a70a59fcf1b929220353a557832a58d90", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/e4017c2a70a59fcf1b929220353a557832a58d90", "committedDate": "2020-11-18T11:23:45Z", "message": "File should not have been modified"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a86c8bfecddabb186047739f8c9603463e99444", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/6a86c8bfecddabb186047739f8c9603463e99444", "committedDate": "2020-11-18T21:55:12Z", "message": "Merge branch 'launch__base' into launch_reference_files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ada318130edb57a43c34fd6dc9b4ca3b767e8178", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/ada318130edb57a43c34fd6dc9b4ca3b767e8178", "committedDate": "2020-11-19T11:18:39Z", "message": "Ignore tests until this refactor is complete"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NjgwNzQz", "url": "https://github.com/phac-nml/irida/pull/848#pullrequestreview-536680743", "createdAt": "2020-11-23T17:10:43Z", "commit": {"oid": "ada318130edb57a43c34fd6dc9b4ca3b767e8178"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2Nzg3MzYx", "url": "https://github.com/phac-nml/irida/pull/848#pullrequestreview-536787361", "createdAt": "2020-11-23T19:37:36Z", "commit": {"oid": "ada318130edb57a43c34fd6dc9b4ca3b767e8178"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxOTozNzozNlrOH4ciUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxOTo1NjozNlrOH4dKgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk0OTg0MQ==", "bodyText": "Fix formatting of this comment", "url": "https://github.com/phac-nml/irida/pull/848#discussion_r528949841", "createdAt": "2020-11-23T19:37:36Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIPipelineService.java", "diffHunk": "@@ -74,8 +92,21 @@ public UIPipelineDetailsResponse getPipelineDetails(UUID id, Locale locale) thro\n          */\n \t\tdetailsResponse.setSavedPipelineParameters(getSavedPipelineParameters(workflow, locale));\n \n-\t\treturn detailsResponse;\n-\t}\n+\t\t/*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ada318130edb57a43c34fd6dc9b4ca3b767e8178"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk1MDY0Mg==", "bodyText": "This comment needs to be fixed as well. Looks like there is a missing * before the comment text", "url": "https://github.com/phac-nml/irida/pull/848#discussion_r528950642", "createdAt": "2020-11-23T19:39:10Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIPipelineService.java", "diffHunk": "@@ -74,8 +92,21 @@ public UIPipelineDetailsResponse getPipelineDetails(UUID id, Locale locale) thro\n          */\n \t\tdetailsResponse.setSavedPipelineParameters(getSavedPipelineParameters(workflow, locale));\n \n-\t\treturn detailsResponse;\n-\t}\n+\t\t/*\n+        Check / add reference files\n+         */\n+        if (description.requiresReference()) {\n+            /*\n+            Need to get a list of all the projects in the cart", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ada318130edb57a43c34fd6dc9b4ca3b767e8178"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk1MjIyNw==", "bodyText": "Add a logger to this file and log the stacktrace at the error level", "url": "https://github.com/phac-nml/irida/pull/848#discussion_r528952227", "createdAt": "2020-11-23T19:42:03Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIPipelineService.java", "diffHunk": "@@ -201,21 +232,42 @@ private String localizedParamOptionLabel(Locale locale, String workflowName, Str\n \t\t\t\t.map(wp -> {\n \t\t\t\t\tMap<String, String> inputParameter = wp.getInputParameters();\n \n-\t\t\t\t\t// Go through the parameters and see which ones are getting overwritten.\n-\t\t\t\t\tList<PipelineParameter> parameters = defaultParameters.stream()\n-\t\t\t\t\t\t\t.map(parameter -> {\n-\t\t\t\t\t\t\t\tif (inputParameter.containsKey(parameter.getName())) {\n-\t\t\t\t\t\t\t\t\treturn new PipelineParameter(parameter.getName(), parameter.getLabel(),\n-\t\t\t\t\t\t\t\t\t\t\tinputParameter.get(parameter.getName()));\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\treturn new PipelineParameter(parameter.getName(), parameter.getLabel(),\n-\t\t\t\t\t\t\t\t\t\tparameter.getValue());\n-\t\t\t\t\t\t\t})\n+            // Go through the parameters and see which ones are getting overwritten.\n+            List<PipelineParameter> parameters = defaultParameters.stream()\n+                    .map(parameter -> {\n+                        if (inputParameter.containsKey(parameter.getName())) {\n+                            return new PipelineParameter(parameter.getName(), parameter.getLabel(),\n+                                    inputParameter.get(parameter.getName()));\n+                        }\n+                        return new PipelineParameter(parameter.getName(), parameter.getLabel(), parameter.getValue());\n+                    })\n \t\t\t\t\t\t\t.collect(Collectors.toList());\n-\t\t\t\t\treturn new SavedPipelineParameters(wp.getId(), wp.getLabel(), parameters);\n-\t\t\t\t})\n-\t\t\t\t.collect(Collectors.toList()));\n+            return new SavedPipelineParameters(wp.getId(), wp.getLabel(), parameters);\n+        })\n+                .collect(Collectors.toList()));\n \n \t\treturn savedParameters;\n \t}\n+\n+    private List<UIReferenceFile> getReferenceFilesForPipeline(List<Project> projects) {\n+        return projects.stream()\n+                .map(project -> {\n+\t\t\t\t\tList<UIReferenceFile> list = new ArrayList<>();\n+\t\t\t\t\tfor (Join<Project, ReferenceFile> projectReferenceFileJoin : referenceFileService.getReferenceFilesForProject(\n+\t\t\t\t\t\t\tproject)) {\n+\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\tReferenceFile file = projectReferenceFileJoin.getObject();\n+\t\t\t\t\t\t\tPath path = file.getFile();\n+\t\t\t\t\t\t\tString filesize = FileUtilities.humanReadableByteCount(Files.size(path), true);\n+\t\t\t\t\t\t\tUIReferenceFile uiReferenceFile = new UIReferenceFile(projectReferenceFileJoin, filesize);\n+\t\t\t\t\t\t\tlist.add(uiReferenceFile);\n+\t\t\t\t\t\t} catch (IOException e) {\n+\t\t\t\t\t\t\te.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ada318130edb57a43c34fd6dc9b4ca3b767e8178"}, "originalPosition": 133}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk1MzcyMg==", "bodyText": "Rename uiFiles to uiReferenceFiles for clarity", "url": "https://github.com/phac-nml/irida/pull/848#discussion_r528953722", "createdAt": "2020-11-23T19:44:49Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIProjectReferenceFileService.java", "diffHunk": "@@ -51,10 +55,8 @@ public UIProjectReferenceFileService(ProjectService projectService, ReferenceFil\n \t * @throws UnsupportedReferenceFileContentError if content is invalid\n \t * @throws IOException if there is an I/O error\n \t */\n-\tpublic String addReferenceFileToProject(Long projectId, List<MultipartFile> files, final Locale locale) throws UnsupportedReferenceFileContentError, IOException {\n-\t\tProject project = projectService.read(projectId);\n-\t\tlogger.debug(\"Adding reference file to project \" + projectId);\n-\n+\tpublic List<UIReferenceFile> addReferenceFileToProject(Long projectId, List<MultipartFile> files, final Locale locale) throws UnsupportedReferenceFileContentError, IOException {\n+\t\tList<UIReferenceFile> uiFiles = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ada318130edb57a43c34fd6dc9b4ca3b767e8178"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk1OTcwNw==", "bodyText": "Internationalize", "url": "https://github.com/phac-nml/irida/pull/848#discussion_r528959707", "createdAt": "2020-11-23T19:55:48Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/launch/components/UploadReferenceFile.jsx", "diffHunk": "@@ -0,0 +1,40 @@\n+import React from \"react\";\n+import { message } from \"antd\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import { useLaunchDispatch } from \"../launch-context\";\n+import { DragUpload } from \"../../../components/files/DragUpload.jsx\";\n+\n+/**\n+ * Component to upload a reference file to the launch pipeline page.\n+ * @returns {JSX.Element}\n+ * @constructor\n+ */\n+export function UploadReferenceFile() {\n+  const { dispatchReferenceFileUploaded } = useLaunchDispatch();\n+\n+  const options = {\n+    multiple: true,\n+    showUploadList: false,\n+    action: setBaseUrl(`/ajax/reference-files`),\n+    onChange(info) {\n+      const { status } = info.file;\n+      if (status === \"done\") {\n+        message.success(i18n(\"UploadReferenceFile.success\", info.file.name));\n+        dispatchReferenceFileUploaded({\n+          name: info.file.name,\n+          id: info.file.response.id,\n+        });\n+      } else if (status === \"error\") {\n+        message.error(`${info.file.name} file upload failed.`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ada318130edb57a43c34fd6dc9b4ca3b767e8178"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk2MDEzMA==", "bodyText": "Remove logging statement", "url": "https://github.com/phac-nml/irida/pull/848#discussion_r528960130", "createdAt": "2020-11-23T19:56:36Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/launch/launch-context.js", "diffHunk": "@@ -126,6 +146,7 @@ function LaunchProvider({ children }) {\n   }\n \n   function dispatchLaunch(values) {\n+    console.log(values);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ada318130edb57a43c34fd6dc9b4ca3b767e8178"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2ODAyMzI0", "url": "https://github.com/phac-nml/irida/pull/848#pullrequestreview-536802324", "createdAt": "2020-11-23T19:59:57Z", "commit": {"oid": "ada318130edb57a43c34fd6dc9b4ca3b767e8178"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd2b06ddbd196f22eed296fdef9f44acfacef8c2", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/cd2b06ddbd196f22eed296fdef9f44acfacef8c2", "committedDate": "2020-11-23T20:25:01Z", "message": "Cleaning up the context"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03475e32d8dcdefb70f1fb06bb7468da52be3be0", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/03475e32d8dcdefb70f1fb06bb7468da52be3be0", "committedDate": "2020-11-24T15:53:22Z", "message": "More context cleaning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55b823a97f0c39de72f36f107f4c08c5bd67e3bc", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/55b823a97f0c39de72f36f107f4c08c5bd67e3bc", "committedDate": "2020-11-24T17:21:51Z", "message": "Code cleanup and JSDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02666f9a076ae0c889e4a85d97ae84f799f268ff", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/02666f9a076ae0c889e4a85d97ae84f799f268ff", "committedDate": "2020-11-24T18:15:15Z", "message": "Changed to us notification instead of message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c93b754a2cb6c76a2e64b0ac13299aa10429b0cd", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/c93b754a2cb6c76a2e64b0ac13299aa10429b0cd", "committedDate": "2020-11-24T18:16:49Z", "message": "Removed unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d580f13b80597ef3efffc931916a6a89528f970", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/3d580f13b80597ef3efffc931916a6a89528f970", "committedDate": "2020-11-24T18:22:26Z", "message": "Adding logging for getting reference files error."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30597c3a5fc6ba76574a2514eb8720864089a739", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/30597c3a5fc6ba76574a2514eb8720864089a739", "committedDate": "2020-11-24T18:24:03Z", "message": "Updated variable name."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a10eeec132bd8397805a30a186862baf0ab6a576", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/a10eeec132bd8397805a30a186862baf0ab6a576", "committedDate": "2020-11-24T18:25:14Z", "message": "Updated internationalization"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4Nzk2NTMx", "url": "https://github.com/phac-nml/irida/pull/848#pullrequestreview-538796531", "createdAt": "2020-11-25T19:34:04Z", "commit": {"oid": "a10eeec132bd8397805a30a186862baf0ab6a576"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxOTozNDowNVrOH6BXqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxOTozNzo1OVrOH6Be3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDYwMTg5Ng==", "bodyText": "Makes sense!", "url": "https://github.com/phac-nml/irida/pull/848#discussion_r530601896", "createdAt": "2020-11-25T19:34:05Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIPipelineService.java", "diffHunk": "@@ -74,8 +92,21 @@ public UIPipelineDetailsResponse getPipelineDetails(UUID id, Locale locale) thro\n          */\n \t\tdetailsResponse.setSavedPipelineParameters(getSavedPipelineParameters(workflow, locale));\n \n-\t\treturn detailsResponse;\n-\t}\n+\t\t/*\n+        Check / add reference files\n+         */\n+        if (description.requiresReference()) {\n+            /*\n+            Need to get a list of all the projects in the cart", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk1MDY0Mg=="}, "originalCommit": {"oid": "ada318130edb57a43c34fd6dc9b4ca3b767e8178"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDYwMzc0MQ==", "bodyText": "Formatting", "url": "https://github.com/phac-nml/irida/pull/848#discussion_r530603741", "createdAt": "2020-11-25T19:37:59Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIPipelineService.java", "diffHunk": "@@ -26,15 +39,24 @@\n  */\n @Component\n public class UIPipelineService {\n-\tprivate final IridaWorkflowsService workflowsService;\n-\tprivate final WorkflowNamedParametersService namedParametersService;\n+\tprivate static final Logger logger = LoggerFactory.getLogger(UIPipelineService.class);\n+\n+\tprivate final Cart cart;\n+    private final IridaWorkflowsService workflowsService;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a10eeec132bd8397805a30a186862baf0ab6a576"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4ODEzODEy", "url": "https://github.com/phac-nml/irida/pull/848#pullrequestreview-538813812", "createdAt": "2020-11-25T20:04:41Z", "commit": {"oid": "a10eeec132bd8397805a30a186862baf0ab6a576"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4940, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}