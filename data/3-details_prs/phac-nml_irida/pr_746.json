{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwMjAxNzgz", "number": 746, "title": "NCBI Exports replace DataTables with Ant Design Table", "bodyText": "Description of changes\nRemoved DataTables and updated with Ant Design Tables for the NCBI Export Tables.\nRelated issue\nN/A\nChecklist\nThings for the developer to confirm they've done before the PR should be accepted:\n\n CHANGELOG.md (and UPGRADING.md if necessary) updated with information for new change.\n Tests added (or description of how to test) for any new features.\n*   [ ] User documentation updated for UI or technical changes.", "createdAt": "2020-06-25T18:59:31Z", "url": "https://github.com/phac-nml/irida/pull/746", "merged": true, "mergeCommit": {"oid": "8509b8ffb1967e0f13e9a326cc45c03b86645cf1"}, "closed": true, "closedAt": "2020-07-02T17:14:11Z", "author": {"login": "joshsadam"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuYKgqAH2gAyNDQwMjAxNzgzOjlkNGRlYjYxNDRjZTk0ZTUwYjJhZmY1NWU2NTVlZTg1OTk0NzZiNjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxCFSAgFqTQ0MTg4NDMyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9d4deb6144ce94e50b2aff55e655ee8599476b66", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/9d4deb6144ce94e50b2aff55e655ee8599476b66", "committedDate": "2020-06-24T11:15:48Z", "message": ":construction: Updated i18n.  Table loads correctly."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e3baed634d511ffcfda5c11f89931503bde89bc", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/0e3baed634d511ffcfda5c11f89931503bde89bc", "committedDate": "2020-06-24T16:06:48Z", "message": "Merge branch 'development' into datatables-ncbi-exports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d24a249d0400f8f0f6387f6ed3e40e9950f2e5a", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/9d24a249d0400f8f0f6387f6ed3e40e9950f2e5a", "committedDate": "2020-06-24T18:27:54Z", "message": ":globe_with_meridians: Working on internationalization of NcbiExportUploadStates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b94a2de5176cfa1e48f5ca5cacdb3e929b92b9a", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/6b94a2de5176cfa1e48f5ca5cacdb3e929b92b9a", "committedDate": "2020-06-24T19:53:55Z", "message": ":construction: Need to set up paging for the admin view!"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3b9d3723593d98f3bb97e2e0ce68bbbaf9930eb", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/b3b9d3723593d98f3bb97e2e0ce68bbbaf9930eb", "committedDate": "2020-06-24T20:08:21Z", "message": "Merge branch 'development' into datatables-ncbi-exports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08e0058251f8ab4d2b98baf09006a85096040283", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/08e0058251f8ab4d2b98baf09006a85096040283", "committedDate": "2020-06-25T14:28:54Z", "message": ":construction: Working admin page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbcb0d27650204b0717cf7159f4527fd7b95aeaf", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/dbcb0d27650204b0717cf7159f4527fd7b95aeaf", "committedDate": "2020-06-26T15:07:36Z", "message": ":white_check_mark: Finished a quick test to make sure page loads."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8b6d3c0fa43a23db1ba31d3532ca35ee59ae554", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/c8b6d3c0fa43a23db1ba31d3532ca35ee59ae554", "committedDate": "2020-06-26T15:10:12Z", "message": ":memo: Updated CHANGELOG.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ff6d8d0c35b6ee75547c5d71e604eedacd4e80f", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/8ff6d8d0c35b6ee75547c5d71e604eedacd4e80f", "committedDate": "2020-06-29T12:29:57Z", "message": "Merge branch 'development' into datatables-ncbi-exports\n\n# Conflicts:\n#\tCHANGELOG.md\n#\tsrc/main/webapp/yarn.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3c2f9cd92026315047d4ce4a4dfae41e1a7fa58", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/c3c2f9cd92026315047d4ce4a4dfae41e1a7fa58", "committedDate": "2020-06-29T19:06:15Z", "message": "Merge branch 'development' into datatables-ncbi-exports\n\n# Conflicts:\n#\tCHANGELOG.md\n#\tsrc/main/webapp/yarn.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "792f972858e2c6f4a6c991b57284b857e7f073a1", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/792f972858e2c6f4a6c991b57284b857e7f073a1", "committedDate": "2020-06-30T10:25:36Z", "message": ":bulb: Updated JavaDoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMzcxMjQ1", "url": "https://github.com/phac-nml/irida/pull/746#pullrequestreview-440371245", "createdAt": "2020-06-30T20:44:03Z", "commit": {"oid": "792f972858e2c6f4a6c991b57284b857e7f073a1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMDo0NDowNFrOGrNvww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMToxMDoxMFrOGrOlXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk2NzE3MQ==", "bodyText": "File comments", "url": "https://github.com/phac-nml/irida/pull/746#discussion_r447967171", "createdAt": "2020-06-30T20:44:04Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/projects/ncbi-export/index.js", "diffHunk": "@@ -0,0 +1,20 @@\n+import React from \"react\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "792f972858e2c6f4a6c991b57284b857e7f073a1"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk2NzQxNw==", "bodyText": "File comments", "url": "https://github.com/phac-nml/irida/pull/746#discussion_r447967417", "createdAt": "2020-06-30T20:44:29Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/components/ncbi/upload-states/NcbiUploadStates.jsx", "diffHunk": "@@ -0,0 +1,54 @@\n+import React from \"react\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "792f972858e2c6f4a6c991b57284b857e7f073a1"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk2ODA5Nw==", "bodyText": "File comments", "url": "https://github.com/phac-nml/irida/pull/746#discussion_r447968097", "createdAt": "2020-06-30T20:45:49Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/components/ncbi/export-table/NcbiExportTable.jsx", "diffHunk": "@@ -0,0 +1,57 @@\n+import React, { useEffect, useState } from \"react\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "792f972858e2c6f4a6c991b57284b857e7f073a1"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk3ODYxOA==", "bodyText": "Is there a better way to set the href then using the window.location.href?", "url": "https://github.com/phac-nml/irida/pull/746#discussion_r447978618", "createdAt": "2020-06-30T21:05:29Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/components/ncbi/export-table/NcbiExportTable.jsx", "diffHunk": "@@ -0,0 +1,57 @@\n+import React, { useEffect, useState } from \"react\";\n+import { Table } from \"antd\";\n+import { getNCBIExports } from \"../../../apis/ncbi/ncbi\";\n+import { formatInternationalizedDateTime } from \"../../../utilities/date-utilities\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import NcbiUploadStates from \"../upload-states\";\n+\n+export function NcbiExportTable({ url }) {\n+  const [exports, setExports] = useState(null);\n+\n+  useEffect(() => {\n+    getNCBIExports({ url }).then(setExports);\n+  }, [url]);\n+\n+  const columns = [\n+    {\n+      title: i18n(\"NcbiExportTable.id\"),\n+      dataIndex: \"id\",\n+      render(id, item) {\n+        return (\n+          <a className=\"t-biosample-id\" href={`${window.location.href}/${id}`}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "792f972858e2c6f4a6c991b57284b857e7f073a1"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk3ODk2Mw==", "bodyText": "File and function comments", "url": "https://github.com/phac-nml/irida/pull/746#discussion_r447978963", "createdAt": "2020-06-30T21:06:08Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/apis/ncbi/ncbi.js", "diffHunk": "@@ -0,0 +1,4 @@\n+export async function getNCBIExports({ url }) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "792f972858e2c6f4a6c991b57284b857e7f073a1"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk4MDg5Mg==", "bodyText": "Add method comment. Probably just @inheritdoc", "url": "https://github.com/phac-nml/irida/pull/746#discussion_r447980892", "createdAt": "2020-06-30T21:10:10Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/service/impl/export/NcbiExportSubmissionServiceImpl.java", "diffHunk": "@@ -102,7 +103,13 @@ public NcbiExportSubmission create(NcbiExportSubmission object) throws Constrain\n \t\t\tthrows IllegalArgumentException {\n \t\treturn super.list(page, size, order, sortProperties);\n \t}\n-\t\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "792f972858e2c6f4a6c991b57284b857e7f073a1"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4af6a7ed26e02ce9dfeca811eb7744aac52a2ad6", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/4af6a7ed26e02ce9dfeca811eb7744aac52a2ad6", "committedDate": "2020-07-02T15:01:48Z", "message": ":bulb: Updated JavaDoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxODg0MzI1", "url": "https://github.com/phac-nml/irida/pull/746#pullrequestreview-441884325", "createdAt": "2020-07-02T17:13:57Z", "commit": {"oid": "4af6a7ed26e02ce9dfeca811eb7744aac52a2ad6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 36, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}