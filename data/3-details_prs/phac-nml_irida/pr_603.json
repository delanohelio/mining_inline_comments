{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3MzcxNTMz", "number": 603, "title": "Generic sequencing runs", "bodyText": "Description of changes\nThis allows an uploader client to push sequencing runs with different labels to IRIDA instead of them being hardcoded to \"MiSeq\".  Previously we were working to have dedicated classes to each sequencing run type, but since there's lots of different sequencers and possibly different uses between facilities, at the moment it makes sense to just allow user-defined types.\nTo test this I suggest getting a dump of a production database and ensuring the upgrade proceeds successfully.  Also creating SequencingRuns through the REST API with different sequencerType params to verify it works.\nRelated issue\nFixes #117 .  Not entirely, there still needs to be analyses for nanopore data, but this will allow the uploaders to send data for other sequencers and it doesn't just appear as \"MiSeq\" data.\nChecklist\nThings for the developer to confirm they've done before the PR should be accepted:\n\n CHANGELOG.md (and UPGRADING.md if necessary) updated with information for new change.\n Tests added (or description of how to test) for any new features.\n* [ ] User documentation updated for UI or technical changes.", "createdAt": "2020-02-19T20:10:10Z", "url": "https://github.com/phac-nml/irida/pull/603", "merged": true, "mergeCommit": {"oid": "006fe16ab0d43c7e8024888e80436cd7fa2175f6"}, "closed": true, "closedAt": "2020-03-10T15:12:35Z", "author": {"login": "tom114"}, "timelineItems": {"totalCount": 37, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABaac1ULgH2gAyMzc3MzcxNTMzOmJhZTI1ZTYzZGIyOGQzNTc1ZWJjZmQyMzVmZDM5NGNkMTVhYmE3MDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMEIF9AH2gAyMzc3MzcxNTMzOjM3ZTBmN2JjMWRjMTA0MDI1NTdlMWY3ZDljOWM4Y2E1MmFmOWNmNWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bae25e63db28d3575ebcfd235fd394cd15aba705", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/bae25e63db28d3575ebcfd235fd394cd15aba705", "committedDate": "2019-03-22T21:01:23Z", "message": "created a seq run object that can take any type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f59bfd5dc503699c11ae7a3a4d579f9f87f8a4c", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/8f59bfd5dc503699c11ae7a3a4d579f9f87f8a4c", "committedDate": "2019-04-02T20:04:06Z", "message": "Merge branch 'development' into generic-sequencing-runs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0be7b7f4e3f58285aaaa4893205c29b40423e88b", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/0be7b7f4e3f58285aaaa4893205c29b40423e88b", "committedDate": "2019-04-02T20:19:05Z", "message": "fixed runtype param"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb1f3a4ce9d9d82d085f7ab18709d1e0b1fa8f8a", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/fb1f3a4ce9d9d82d085f7ab18709d1e0b1fa8f8a", "committedDate": "2019-04-02T20:55:30Z", "message": "pulled generic seq run stuff up to seqrun and deleted that class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71036f5d6399cd49ff95c0f6023a3c545afb73a3", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/71036f5d6399cd49ff95c0f6023a3c545afb73a3", "committedDate": "2019-04-02T20:55:49Z", "message": "added liquibase change to pull miseqrun stuff into the new props table"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "330d56076a51d777571c37d39c0b2e34b1ad199d", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/330d56076a51d777571c37d39c0b2e34b1ad199d", "committedDate": "2019-04-03T13:55:16Z", "message": "updated run details page to be run type agnostic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31ecf58c4602de496c4142fe67b48accca348ca7", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/31ecf58c4602de496c4142fe67b48accca348ca7", "committedDate": "2019-04-03T15:39:48Z", "message": "removed miseqrun class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc16b228ea9245d3f8cf978abc2ed2b79aaae238", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/cc16b228ea9245d3f8cf978abc2ed2b79aaae238", "committedDate": "2019-04-03T15:56:42Z", "message": "renamed seq run method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ee66a065a2b32829f36667adf581527e78d2370", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/3ee66a065a2b32829f36667adf581527e78d2370", "committedDate": "2019-04-03T17:27:27Z", "message": "remioved miseq_run from the test db files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b53468204fdc5e649f27e1ec158ef2e8d956c95", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/7b53468204fdc5e649f27e1ec158ef2e8d956c95", "committedDate": "2019-04-03T17:30:43Z", "message": "added sequencer_type field to liquibase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81ce07a71b6159eee4dc85e04cd7c5a42ce7a53c", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/81ce07a71b6159eee4dc85e04cd7c5a42ce7a53c", "committedDate": "2019-04-03T18:17:50Z", "message": "added sequencertype to all test xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8af87ca2a8733f094a3f7e291c147bb738a27995", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/8af87ca2a8733f094a3f7e291c147bb738a27995", "committedDate": "2019-04-03T19:06:19Z", "message": "fixing test failures"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a54bd4d32c573114cde9bc0d94018e810da7b76d", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/a54bd4d32c573114cde9bc0d94018e810da7b76d", "committedDate": "2019-04-03T19:18:11Z", "message": "added new default param for sequencingrun since its notnull"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4563282f13ad6db79f4337b22744b3e44c250d86", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/4563282f13ad6db79f4337b22744b3e44c250d86", "committedDate": "2019-04-03T19:50:21Z", "message": "removing uploadStatus as a constructor arg to match what we were doing with miseqrun"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1bb0de1ad8204e1d4bfb789080f0e5dcb63e16e", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/d1bb0de1ad8204e1d4bfb789080f0e5dcb63e16e", "committedDate": "2019-04-23T18:01:44Z", "message": "adding miseq type in aud table too"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7dcfbddfc54fd9925b6770cfaf12d9492654e562", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/7dcfbddfc54fd9925b6770cfaf12d9492654e562", "committedDate": "2019-04-23T18:02:34Z", "message": "Merge branch 'development' into generic-sequencing-runs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c4a04f700915f1477fcb325aebee2397f61757f", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/9c4a04f700915f1477fcb325aebee2397f61757f", "committedDate": "2019-04-23T18:23:21Z", "message": "allowing null properties for miseq run conversion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d2d509c908d6ff55a8c7aed61089bfd2b1bc9e1", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/7d2d509c908d6ff55a8c7aed61089bfd2b1bc9e1", "committedDate": "2019-04-23T18:23:55Z", "message": "converting /miseqrun POSTS to miseq sequencer type for legacy uploaders"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8d977105dfd46d11868f359ed1c9ac432a736d2", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/a8d977105dfd46d11868f359ed1c9ac432a736d2", "committedDate": "2020-02-19T15:40:16Z", "message": "Merge branch 'development' into generic-sequencing-runs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d408ef21f9dd0c47ba4969244075befe03284d70", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/d408ef21f9dd0c47ba4969244075befe03284d70", "committedDate": "2020-02-19T15:41:55Z", "message": "moved liquibase update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a10bcc4b8f77f4f31da08f45a795b1c785fa2c77", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/a10bcc4b8f77f4f31da08f45a795b1c785fa2c77", "committedDate": "2020-02-19T17:42:24Z", "message": "forcing run type to lowercase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "742554009b595ed4291c6711127dd67c9e5c1378", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/742554009b595ed4291c6711127dd67c9e5c1378", "committedDate": "2020-02-19T17:42:40Z", "message": "added changeset 20.05 to all changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b446fae96ec1f42776204522511c87b062f36300", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/b446fae96ec1f42776204522511c87b062f36300", "committedDate": "2020-02-19T18:08:50Z", "message": "added validation to sequencer type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7533ad2b86e37a906dda585de7b65a611311df0", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/e7533ad2b86e37a906dda585de7b65a611311df0", "committedDate": "2020-02-19T19:18:54Z", "message": "added tests for new seq run endpoints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0896f9232c9cb5fd5364f6bad0e173860c24cb8", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/c0896f9232c9cb5fd5364f6bad0e173860c24cb8", "committedDate": "2020-02-19T19:19:26Z", "message": "removed old comment that doens't make sense anymore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "657af2543f4a2898302c771bfeb2c7e866ba2ad8", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/657af2543f4a2898302c771bfeb2c7e866ba2ad8", "committedDate": "2020-02-19T20:13:31Z", "message": "added updates to CHANGELOG and UPGRADING"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "887893141b54918b8ad83a5e7f4bc24bc855cea1", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/887893141b54918b8ad83a5e7f4bc24bc855cea1", "committedDate": "2020-02-20T17:49:08Z", "message": "Merge branch 'development' into generic-sequencing-runs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27b14f8a2d2ff5bef9f17eef1f32cce953477929", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/27b14f8a2d2ff5bef9f17eef1f32cce953477929", "committedDate": "2020-02-20T17:49:21Z", "message": "reworded seq run changelog statement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71f3d1e6fe00634690b7f6fe844ba38cb1ae94d0", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/71f3d1e6fe00634690b7f6fe844ba38cb1ae94d0", "committedDate": "2020-03-02T20:26:14Z", "message": "Merge branch 'development' into generic-sequencing-runs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4f458bbba003a53fa05d350a234867580184126", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/e4f458bbba003a53fa05d350a234867580184126", "committedDate": "2020-03-04T19:32:10Z", "message": "Merge branch 'development' into generic-sequencing-runs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NTI4MDYy", "url": "https://github.com/phac-nml/irida/pull/603#pullrequestreview-364528062", "createdAt": "2020-02-25T23:35:11Z", "commit": {"oid": "27b14f8a2d2ff5bef9f17eef1f32cce953477929"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMzozNToxMVrOFuZPhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMjoxNTowMlrOFymMXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE5MjM5MQ==", "bodyText": "This method should probably be changed from addSequenceFileToMiseqRun to something like addSequenceFileToSequencingRun", "url": "https://github.com/phac-nml/irida/pull/603#discussion_r384192391", "createdAt": "2020-02-25T23:35:11Z", "author": {"login": "JeffreyThiessen"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/web/controller/api/sequencingrun/RESTSequencingRunSequenceFilesController.java", "diffHunk": "@@ -47,7 +43,7 @@ public RESTSequencingRunSequenceFilesController(SequencingRunService service,\n \t}\n \n \t/**\n-\t * Add a relationship between a {@link MiseqRun} and a {@link SequenceFile}.\n+\t * Add a relationship between a {@link SequencingRun} and a {@link SequenceFile}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27b14f8a2d2ff5bef9f17eef1f32cce953477929"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODU5ODg3Nw==", "bodyText": "MISEQ_REL below is related to issue uploading data as discussed in person.", "url": "https://github.com/phac-nml/irida/pull/603#discussion_r388598877", "createdAt": "2020-03-05T22:15:02Z", "author": {"login": "JeffreyThiessen"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/web/controller/api/sequencingrun/RESTSequencingRunController.java", "diffHunk": "@@ -1,35 +1,25 @@\n package ca.corefacility.bioinformatics.irida.web.controller.api.sequencingrun;\n \n-import static org.springframework.hateoas.mvc.ControllerLinkBuilder.linkTo;\n-import static org.springframework.hateoas.mvc.ControllerLinkBuilder.methodOn;\n-\n-import java.util.Collection;\n-\n-import javax.servlet.http.HttpServletResponse;\n-\n+import ca.corefacility.bioinformatics.irida.model.run.SequencingRun;\n+import ca.corefacility.bioinformatics.irida.service.ProjectService;\n+import ca.corefacility.bioinformatics.irida.service.SequencingRunService;\n+import ca.corefacility.bioinformatics.irida.web.assembler.resource.ResourceCollection;\n+import ca.corefacility.bioinformatics.irida.web.controller.api.RESTGenericController;\n+import ca.corefacility.bioinformatics.irida.web.controller.api.projects.RESTProjectsController;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.hateoas.Link;\n-import org.springframework.http.HttpStatus;\n import org.springframework.http.MediaType;\n import org.springframework.stereotype.Controller;\n import org.springframework.ui.ModelMap;\n-import org.springframework.web.bind.annotation.ExceptionHandler;\n+import org.springframework.web.bind.annotation.PathVariable;\n import org.springframework.web.bind.annotation.RequestBody;\n import org.springframework.web.bind.annotation.RequestMapping;\n import org.springframework.web.bind.annotation.RequestMethod;\n-import org.springframework.web.bind.annotation.ResponseStatus;\n \n-import ca.corefacility.bioinformatics.irida.model.run.MiseqRun;\n-import ca.corefacility.bioinformatics.irida.model.run.SequencingRun;\n-import ca.corefacility.bioinformatics.irida.service.ProjectService;\n-import ca.corefacility.bioinformatics.irida.service.SequencingRunService;\n-import ca.corefacility.bioinformatics.irida.web.assembler.resource.ResourceCollection;\n-import ca.corefacility.bioinformatics.irida.web.controller.api.RESTGenericController;\n-import ca.corefacility.bioinformatics.irida.web.controller.api.projects.RESTProjectsController;\n-\n-import com.fasterxml.jackson.databind.exc.InvalidDefinitionException;\n+import javax.servlet.http.HttpServletResponse;\n+import java.util.Collection;\n \n /**\n  *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4f458bbba003a53fa05d350a234867580184126"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f2856ef315a46e69ce084e84557d1726a533d84", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/2f2856ef315a46e69ce084e84557d1726a533d84", "committedDate": "2020-03-06T17:35:51Z", "message": "updated method name to reflect that we're not just using miseq runs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "489e6dfeebc42cbe7f772a4987fda372ce3fe201", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/489e6dfeebc42cbe7f772a4987fda372ce3fe201", "committedDate": "2020-03-06T17:41:45Z", "message": "added old miseqrun endpoint back in the links for legacy uploader"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39a7166d62534b9606cced1bc1aca4c0c3e2e59b", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/39a7166d62534b9606cced1bc1aca4c0c3e2e59b", "committedDate": "2020-03-06T17:43:16Z", "message": "Merge branch 'development' into generic-sequencing-runs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77611cd9c992840c3efd8de94cf879a8c70b6ccd", "author": {"user": {"login": "tom114", "name": "Tom Matthews"}}, "url": "https://github.com/phac-nml/irida/commit/77611cd9c992840c3efd8de94cf879a8c70b6ccd", "committedDate": "2020-03-06T21:27:09Z", "message": "updated sequencing run rest docs and added a deprecation notice to the miseqrun endpoint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNTEyNzQ2", "url": "https://github.com/phac-nml/irida/pull/603#pullrequestreview-371512746", "createdAt": "2020-03-09T20:40:01Z", "commit": {"oid": "77611cd9c992840c3efd8de94cf879a8c70b6ccd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37e0f7bc1dc10402557e1f7d9c9c8ca52af9cf5c", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/37e0f7bc1dc10402557e1f7d9c9c8ca52af9cf5c", "committedDate": "2020-03-09T20:41:38Z", "message": "Merge branch 'development' into generic-sequencing-runs"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 169, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}