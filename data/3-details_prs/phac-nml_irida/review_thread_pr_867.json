{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0OTc1MTcy", "number": 867, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjozODozN1rOE8TRjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxOTowMjoyMFrOE84YEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjY1ODA0OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/pages/announcements/details.html", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjozODozN1rOH4V-Lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNzo1Mzo0N1rOH4Y-_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg0MjI4Nw==", "bodyText": "Sorry, I'm going to take this opportunity to ask a couple questions. I noticed there are these variables with underscores. Is this Thymeleaf pre-processing?", "url": "https://github.com/phac-nml/irida/pull/867#discussion_r528842287", "createdAt": "2020-11-23T16:38:37Z", "author": {"login": "ksierks"}, "path": "src/main/webapp/pages/announcements/details.html", "diffHunk": "@@ -27,11 +27,27 @@\n                     <h2 class=\"panel-title\" th:text=\"#{announcement.control.details.edit}\"></h2>\n                 </div>\n                 <div class=\"panel-body\">\n-                    <textarea class=\"form-control input-full announcement-input\" type=\"text\" id=\"message\" name=\"message\"\n+                    <div class=\"form-group\">\n+                        <label for=\"title\" th:text=\"#{announcement.control.title}\">__Title__</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c19e9dab02c69c91db0a7a0ab4be8d331b8868c"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg4MDM1OA==", "bodyText": "Do you mean the __Title__?  If so that is just me making sure that I do not forget to template them because they look ugly on the page.  Just placeholders.", "url": "https://github.com/phac-nml/irida/pull/867#discussion_r528880358", "createdAt": "2020-11-23T17:35:27Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/pages/announcements/details.html", "diffHunk": "@@ -27,11 +27,27 @@\n                     <h2 class=\"panel-title\" th:text=\"#{announcement.control.details.edit}\"></h2>\n                 </div>\n                 <div class=\"panel-body\">\n-                    <textarea class=\"form-control input-full announcement-input\" type=\"text\" id=\"message\" name=\"message\"\n+                    <div class=\"form-group\">\n+                        <label for=\"title\" th:text=\"#{announcement.control.title}\">__Title__</label>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg0MjI4Nw=="}, "originalCommit": {"oid": "4c19e9dab02c69c91db0a7a0ab4be8d331b8868c"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg5MDMzNg==", "bodyText": "Ya, it exists for the cancel and save buttons too.", "url": "https://github.com/phac-nml/irida/pull/867#discussion_r528890336", "createdAt": "2020-11-23T17:51:33Z", "author": {"login": "ksierks"}, "path": "src/main/webapp/pages/announcements/details.html", "diffHunk": "@@ -27,11 +27,27 @@\n                     <h2 class=\"panel-title\" th:text=\"#{announcement.control.details.edit}\"></h2>\n                 </div>\n                 <div class=\"panel-body\">\n-                    <textarea class=\"form-control input-full announcement-input\" type=\"text\" id=\"message\" name=\"message\"\n+                    <div class=\"form-group\">\n+                        <label for=\"title\" th:text=\"#{announcement.control.title}\">__Title__</label>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg0MjI4Nw=="}, "originalCommit": {"oid": "4c19e9dab02c69c91db0a7a0ab4be8d331b8868c"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg5MTY0NA==", "bodyText": "Yup that is me trying to remind myself not to be forgetful and to add the translations", "url": "https://github.com/phac-nml/irida/pull/867#discussion_r528891644", "createdAt": "2020-11-23T17:53:47Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/pages/announcements/details.html", "diffHunk": "@@ -27,11 +27,27 @@\n                     <h2 class=\"panel-title\" th:text=\"#{announcement.control.details.edit}\"></h2>\n                 </div>\n                 <div class=\"panel-body\">\n-                    <textarea class=\"form-control input-full announcement-input\" type=\"text\" id=\"message\" name=\"message\"\n+                    <div class=\"form-group\">\n+                        <label for=\"title\" th:text=\"#{announcement.control.title}\">__Title__</label>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg0MjI4Nw=="}, "originalCommit": {"oid": "4c19e9dab02c69c91db0a7a0ab4be8d331b8868c"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjY2MzM5OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/pages/announcements/details.html", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjozOTozNlrOH4WBOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMzoxNTo0OVrOH5AUew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg0MzA2NA==", "bodyText": "I am trying to keep this page's look and feel consistent, but I have not been able to find the 'input-full' class in the css.", "url": "https://github.com/phac-nml/irida/pull/867#discussion_r528843064", "createdAt": "2020-11-23T16:39:36Z", "author": {"login": "ksierks"}, "path": "src/main/webapp/pages/announcements/details.html", "diffHunk": "@@ -27,11 +27,27 @@\n                     <h2 class=\"panel-title\" th:text=\"#{announcement.control.details.edit}\"></h2>\n                 </div>\n                 <div class=\"panel-body\">\n-                    <textarea class=\"form-control input-full announcement-input\" type=\"text\" id=\"message\" name=\"message\"\n+                    <div class=\"form-group\">\n+                        <label for=\"title\" th:text=\"#{announcement.control.title}\">__Title__</label>\n+                        <input id=\"title\" name=\"title\" type=\"text\"\n+                               class=\"form-control input-full\"\n+                               required=\"required\"\n+                               th:value=\"${announcement.getTitle()}\"\n+                               th:placeholder=\"#{announcement.create.form.placeholder}\" />\n+                    </div>\n+                    <div class=\"form-group\">\n+                        <label for=\"message\" th:text=\"#{announcement.control.message}\">__Message__</label>\n+                        <textarea class=\"form-control input-full announcement-input\" type=\"text\" id=\"message\" name=\"message\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c19e9dab02c69c91db0a7a0ab4be8d331b8868c"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg4MDY3Mg==", "bodyText": "Well this brings me to my next point.  We need to get rid of this page :)  Let's chat about it.", "url": "https://github.com/phac-nml/irida/pull/867#discussion_r528880672", "createdAt": "2020-11-23T17:35:57Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/pages/announcements/details.html", "diffHunk": "@@ -27,11 +27,27 @@\n                     <h2 class=\"panel-title\" th:text=\"#{announcement.control.details.edit}\"></h2>\n                 </div>\n                 <div class=\"panel-body\">\n-                    <textarea class=\"form-control input-full announcement-input\" type=\"text\" id=\"message\" name=\"message\"\n+                    <div class=\"form-group\">\n+                        <label for=\"title\" th:text=\"#{announcement.control.title}\">__Title__</label>\n+                        <input id=\"title\" name=\"title\" type=\"text\"\n+                               class=\"form-control input-full\"\n+                               required=\"required\"\n+                               th:value=\"${announcement.getTitle()}\"\n+                               th:placeholder=\"#{announcement.create.form.placeholder}\" />\n+                    </div>\n+                    <div class=\"form-group\">\n+                        <label for=\"message\" th:text=\"#{announcement.control.message}\">__Message__</label>\n+                        <textarea class=\"form-control input-full announcement-input\" type=\"text\" id=\"message\" name=\"message\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg0MzA2NA=="}, "originalCommit": {"oid": "4c19e9dab02c69c91db0a7a0ab4be8d331b8868c"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTUzNjEyMw==", "bodyText": "Okies!", "url": "https://github.com/phac-nml/irida/pull/867#discussion_r529536123", "createdAt": "2020-11-24T13:15:49Z", "author": {"login": "ksierks"}, "path": "src/main/webapp/pages/announcements/details.html", "diffHunk": "@@ -27,11 +27,27 @@\n                     <h2 class=\"panel-title\" th:text=\"#{announcement.control.details.edit}\"></h2>\n                 </div>\n                 <div class=\"panel-body\">\n-                    <textarea class=\"form-control input-full announcement-input\" type=\"text\" id=\"message\" name=\"message\"\n+                    <div class=\"form-group\">\n+                        <label for=\"title\" th:text=\"#{announcement.control.title}\">__Title__</label>\n+                        <input id=\"title\" name=\"title\" type=\"text\"\n+                               class=\"form-control input-full\"\n+                               required=\"required\"\n+                               th:value=\"${announcement.getTitle()}\"\n+                               th:placeholder=\"#{announcement.create.form.placeholder}\" />\n+                    </div>\n+                    <div class=\"form-group\">\n+                        <label for=\"message\" th:text=\"#{announcement.control.message}\">__Message__</label>\n+                        <textarea class=\"form-control input-full announcement-input\" type=\"text\" id=\"message\" name=\"message\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg0MzA2NA=="}, "originalCommit": {"oid": "4c19e9dab02c69c91db0a7a0ab4be8d331b8868c"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjkxMzY0OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/admin/components/announcements/EditAnnouncementModal.jsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNzozODo0OVrOH4YbGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNzo1MTo0M1rOH4Y6Tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg4MjQ1Nw==", "bodyText": "Since this is almost exactly the same as the CreateAnnouncementModal do you think you could refactor to use only one?", "url": "https://github.com/phac-nml/irida/pull/867#discussion_r528882457", "createdAt": "2020-11-23T17:38:49Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/admin/components/announcements/EditAnnouncementModal.jsx", "diffHunk": "@@ -0,0 +1,84 @@\n+import React, { useRef } from \"react\";\n+import { Checkbox, Form, Input, Modal, Space } from \"antd\";\n+import { IconEdit } from \"../../../../components/icons/Icons\";\n+import { FONT_COLOR_PRIMARY } from \"../../../../styles/fonts\";\n+import { MarkdownEditor } from \"../../../../components/markdown/MarkdownEditor\";\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a31e4791e2e2b8ac4f5c1dcad2342689c9b66b5"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg5MDQ0Nw==", "bodyText": "Yes. Please see 009862e.", "url": "https://github.com/phac-nml/irida/pull/867#discussion_r528890447", "createdAt": "2020-11-23T17:51:43Z", "author": {"login": "ksierks"}, "path": "src/main/webapp/resources/js/pages/admin/components/announcements/EditAnnouncementModal.jsx", "diffHunk": "@@ -0,0 +1,84 @@\n+import React, { useRef } from \"react\";\n+import { Checkbox, Form, Input, Modal, Space } from \"antd\";\n+import { IconEdit } from \"../../../../components/icons/Icons\";\n+import { FONT_COLOR_PRIMARY } from \"../../../../styles/fonts\";\n+import { MarkdownEditor } from \"../../../../components/markdown/MarkdownEditor\";\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg4MjQ1Nw=="}, "originalCommit": {"oid": "4a31e4791e2e2b8ac4f5c1dcad2342689c9b66b5"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMjcyMzkzOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/admin/components/announcements/AnnouncementModal.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxODo1OTowOFrOH5Q--g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxODo1OTowOFrOH5Q--g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTgwOTE0Ng==", "bodyText": "In es6 there is a destructuring syntax for this:\nconst { title, priority } = values;\nor, since you only use those values you can do that right up in the function arguments:\nform.validateFields().then(({ title, priority }) => {\n\t// ...\n});", "url": "https://github.com/phac-nml/irida/pull/867#discussion_r529809146", "createdAt": "2020-11-24T18:59:08Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/admin/components/announcements/AnnouncementModal.jsx", "diffHunk": "@@ -31,9 +35,18 @@ export function CreateAnnouncementModal({\n       const title = values.title;\n       const priority = values.priority;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8566243558a6b1847a50561525c6e29a5baf932f"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMjczNjgzOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/admin/components/announcements/AnnouncementModal.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxOTowMjoyMFrOH5RGuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxOTowMjoyMFrOH5RGuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTgxMTEyOA==", "bodyText": "In es6 you never have to do this redundant assignment of object attributes, in this case since title and priority are already defined (and are labelled correct) you could write this as:\nupdateAnnouncement({\n  id: announcement.id,\n  title,\n  message: markdown,\n  priority,\n});\n``", "url": "https://github.com/phac-nml/irida/pull/867#discussion_r529811128", "createdAt": "2020-11-24T19:02:20Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/admin/components/announcements/AnnouncementModal.jsx", "diffHunk": "@@ -31,9 +35,18 @@ export function CreateAnnouncementModal({\n       const title = values.title;\n       const priority = values.priority;\n \n-      createAnnouncement(title, markdown, priority);\n+      if (announcement) {\n+        updateAnnouncement({\n+          id: announcement.id,\n+          title: title,\n+          message: markdown,\n+          priority: priority,\n+        });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8566243558a6b1847a50561525c6e29a5baf932f"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 583, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}