{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NDk2NTM5", "number": 608, "title": "Analysis/ documentation", "bodyText": "Description of changes\nWhat did you change in this pull request?  Provide a description of files changed, user interactions changed, etc.  Include how to test your changes.\nAdded documentation for the new analysis results page.\nRelated issue\nLink to the GitHub issue this pull request addresses using the #issuenum format.  If it completes an issue, use Fixes #issuenum to automatically close the issue.\nChecklist\nThings for the developer to confirm they've done before the PR should be accepted:\n* [ ] CHANGELOG.md (and UPGRADING.md if necessary) updated with information for new change.\n* [ ] Tests added (or description of how to test) for any new features.\n\n User documentation updated for UI or technical changes.", "createdAt": "2020-02-21T22:18:36Z", "url": "https://github.com/phac-nml/irida/pull/608", "merged": true, "mergeCommit": {"oid": "3a5b436b14ae3f60c34bfdfd56d2d35931476eaf"}, "closed": true, "closedAt": "2020-03-19T19:42:06Z", "author": {"login": "deepsidhu85"}, "timelineItems": {"totalCount": 46, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGRbouAH2gAyMzc4NDk2NTM5OmFhNThhZWE0OTg0ZmZiMDE0MGVmZmI2OTg1OWUyODUyNDliZjJlMzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPRPv4AFqTM3ODAzNzIwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "aa58aea4984ffb0140effb69859e285249bf2e39", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/aa58aea4984ffb0140effb69859e285249bf2e39", "committedDate": "2020-02-20T20:48:12Z", "message": "Updated documentation for sistr and bio hansel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68db63d4814e7c7845726ff09a82af8a8fd52b09", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/68db63d4814e7c7845726ff09a82af8a8fd52b09", "committedDate": "2020-02-20T20:49:29Z", "message": "Merge branch 'analysis/_base_results' into analysis/_documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8de6a15a11fc858e78b0be0d05d87d3e37595ee0", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/8de6a15a11fc858e78b0be0d05d87d3e37595ee0", "committedDate": "2020-02-21T22:16:43Z", "message": "Added documentation for snvphyl (a few things left to update as analyses are still running), refseq masher, mentalist, and bio_hansel. Started documentation for assembly. Updated Analysis.jsx to only display the 'Phylogentic Tree' view if there is an actual tree associated with the analysis otherwise the default view is the Output File Preview page.'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6084916b6c55d1b7039f079ef70144ecef960a5b", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/6084916b6c55d1b7039f079ef70144ecef960a5b", "committedDate": "2020-02-25T18:49:06Z", "message": "Added new images, updated references to common files, and updated tutorials"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "423ab41c3629dbd1da92b6acdccae69769173581", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/423ab41c3629dbd1da92b6acdccae69769173581", "committedDate": "2020-02-25T18:49:37Z", "message": "Updated default tree shape"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d989057c9a9e17d55bff47c5f81811f38c13a230", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/d989057c9a9e17d55bff47c5f81811f38c13a230", "committedDate": "2020-02-25T21:17:49Z", "message": "Merge branch 'analysis/_base_results' into analysis/_documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13b8aff9c671fcb75e7cf2c53c891cee6754aaa2", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/13b8aff9c671fcb75e7cf2c53c891cee6754aaa2", "committedDate": "2020-02-25T21:19:01Z", "message": "Merged analysis base results and updated test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06159fa32b7c6beb0f751fdbb8c0d0ea17cb03b3", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/06159fa32b7c6beb0f751fdbb8c0d0ea17cb03b3", "committedDate": "2020-02-26T20:28:42Z", "message": "Changed download all files button to a split button which has a dropdown from which a user can download individual files. This is necessary as the output file preview only displays text, tabular, and json files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c3094b40941c9e5254611f83a6014e314d64168", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/5c3094b40941c9e5254611f83a6014e314d64168", "committedDate": "2020-02-27T20:15:45Z", "message": "Added new screenshots, updated tutorials. Deleted old images no longer required"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f710851f5177ebca2480d28cf37bf5111596a6dc", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/f710851f5177ebca2480d28cf37bf5111596a6dc", "committedDate": "2020-02-27T20:34:09Z", "message": "Updated tutorials."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40161e14966724f16b31e4478c9003a8d5f9dc46", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/40161e14966724f16b31e4478c9003a8d5f9dc46", "committedDate": "2020-02-28T18:47:18Z", "message": "Merge branch 'analysis/_base_results' into analysis/_documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb3af39d32b9f7d8c908a325e96ed82a748b3188", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/cb3af39d32b9f7d8c908a325e96ed82a748b3188", "committedDate": "2020-02-28T19:24:31Z", "message": "Updated tabular output table scroll to max-content"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3875311c217beb51005dedcdbe711536c23db1fd", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/3875311c217beb51005dedcdbe711536c23db1fd", "committedDate": "2020-02-28T19:47:08Z", "message": "Updated yarn.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "726de5333fc60855e9e2f0abfe52a4170822fda9", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/726de5333fc60855e9e2f0abfe52a4170822fda9", "committedDate": "2020-03-01T19:31:58Z", "message": "Updated tutorials with instructions of how to update an analysis name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NDEzMjY1", "url": "https://github.com/phac-nml/irida/pull/608#pullrequestreview-367413265", "createdAt": "2020-03-02T18:09:34Z", "commit": {"oid": "726de5333fc60855e9e2f0abfe52a4170822fda9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxODowOTozNFrOFwpujg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxODozMDozMlrOFwqYoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU1OTYzMA==", "bodyText": "Change \"This option is only available...\" to \"The email option is only available...\" to clear up what option you're talking about.", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r386559630", "createdAt": "2020-03-02T18:09:34Z", "author": {"login": "tom114"}, "path": "doc/user/tutorials/assembly/index.md", "diffHunk": "@@ -62,77 +62,105 @@ Selecting Parameters\n \n Once the pipeline is selected, the next page provides an overview of all the input files, as well as the option to modify parameters.\n \n-![assembly-pipeline-page.png][]\n+![assembly-pipeline-page][]\n \n We will use the default parameters.  Please select the **Ready to Launch?** button to continue.\n \n-![ready-to-launch-button.png][]\n+![launch-button][]\n \n Once the button is selected you should see a screen showing that your pipeline has been launched.\n \n-![pipeline-launch.png][]\n+![pipeline-launched][]\n \n Monitoring Pipeline Status\n ==========================\n \n-To monitor the status of the launched pipeline, please select the **Analysis > Your Analyses** menu.\n+To monitor the status of the launched pipeline, please select the **Analysis > Your Analyses** menu or click the **Let's see how this pipeline is doing** button.\n \n-![your-analyses-menu.png][]\n+![view-your-analyses][]\n \n The will bring you to a page where you can monitor the status of each launched workflow.\n \n-![your-analyses-page.png][]\n+![monitor-analyses][]\n \n-Clicking the pipeline name **AssemblyAnnotationCollection_...** will bring you to a page for that analysis pipeline.\n+Clicking the pipeline name will bring you to a page for that analysis pipeline. It will take a few minutes for the assembly and annotation collection pipeline to complete. Along the top of the page you can check the current step of the analysis and at the bottom of the **Details** tab you can select if you would like to receive an email upon pipeline completion. This option is only available if the analysis is not in `COMPLETED` or `ERROR` state.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "726de5333fc60855e9e2f0abfe52a4170822fda9"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU2MDkwNw==", "bodyText": "\"click anywhere on the page\" -> \"click anywhere outside of the text box\".", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r386560907", "createdAt": "2020-03-02T18:12:15Z", "author": {"login": "tom114"}, "path": "doc/user/tutorials/assembly/index.md", "diffHunk": "@@ -62,77 +62,105 @@ Selecting Parameters\n \n Once the pipeline is selected, the next page provides an overview of all the input files, as well as the option to modify parameters.\n \n-![assembly-pipeline-page.png][]\n+![assembly-pipeline-page][]\n \n We will use the default parameters.  Please select the **Ready to Launch?** button to continue.\n \n-![ready-to-launch-button.png][]\n+![launch-button][]\n \n Once the button is selected you should see a screen showing that your pipeline has been launched.\n \n-![pipeline-launch.png][]\n+![pipeline-launched][]\n \n Monitoring Pipeline Status\n ==========================\n \n-To monitor the status of the launched pipeline, please select the **Analysis > Your Analyses** menu.\n+To monitor the status of the launched pipeline, please select the **Analysis > Your Analyses** menu or click the **Let's see how this pipeline is doing** button.\n \n-![your-analyses-menu.png][]\n+![view-your-analyses][]\n \n The will bring you to a page where you can monitor the status of each launched workflow.\n \n-![your-analyses-page.png][]\n+![monitor-analyses][]\n \n-Clicking the pipeline name **AssemblyAnnotationCollection_...** will bring you to a page for that analysis pipeline.\n+Clicking the pipeline name will bring you to a page for that analysis pipeline. It will take a few minutes for the assembly and annotation collection pipeline to complete. Along the top of the page you can check the current step of the analysis and at the bottom of the **Details** tab you can select if you would like to receive an email upon pipeline completion. This option is only available if the analysis is not in `COMPLETED` or `ERROR` state.\n \n-![assembly-pipeline-page-details.png][]\n-\n-This page will continue to refresh as the pipeline progresses through each stage.  It will take a few minutes for the assembly and annotation pipeline to complete.\n+![analysis-in-progress][]\n \n Viewing the Results\n ===================\n \n-Once the pipeline is complete, you will be given the option to download the results of the analysis.  Please click **Download** to download these results now.\n+Once the pipeline is complete, you will be able to view the results of the `AssemblyAnnotationCollection` analysis. Note that not all files have an available preview and as such are not displayed in the Output File Preview but are downloaded when selecting the `Download All Files` button.\n+\n+![assembly-results][]\n+\n+To download individual files select the **...** next to the Download All Files and select the file to download.\n \n-![assembly-pipeline-results.png][]\n+![assembly-download-individual-files][]\n \n-A number of files are provided in the downloaded results.  These are described below.\n+To download all the files generated by the analysis, please select the **Download All Files** button.\n+\n+![assembly-download-all-files][]\n \n-1. `contigs-with-repeats-combined.fasta.zip`: The assembled contigs, after repeats were identified and low coverage/small contigs removed.\n-2. `assembly-stats-with-repeats-combined.tsv`: A table of assembly statistics for the assembled contigs.\n-3. `genome-combined.gbk.zip`:  The annotated contigs, in GenBank format.\n-4. `prokka_stats-combined.txt.zip`:  The stats output from Prokka.\n-5. `prokka-combined.log.zip`:  The log files from Prokka.\n-6. `prokka-combined.err.zip`:  The error files from Prokka.\n-7. `filter-spades-combined.txt.zip`:  Information on the contigs removed and filtering parameters.\n-8. `contigs-without-repeats-combined.fasta.zip`:  The assembled and filtered contigs, minus any repeat regions.\n-9. `contigs-all-combined.fasta.zip`:  All contigs output from SPAdes, without any flitering.\n-10. `spades-combined.log.zip`:  The log files from SPAdes.\n-11. `flash-combined.log.zip`:  The log files from FLASh used to merge paired-end reads.\n \n Viewing Provenance Information\n ==============================\n \n To view the pipeline provenance information, please select the **Provenance** tab.\n \n-![assembly-provenance.png][]\n+![assembly-provenance]\n+\n+The provenance is displayed on a per file basis. Clicking on `quast.tsv` file will display it's provenance. Expanding each tool will display the parameters that the tool was executed with.\n+\n+![assembly-provenance-tools]\n+\n+\n+Viewing Pipeline Details\n+========================\n+\n+To view analysis details, please select the **Settings** tab. From here you can view the analysis name, analysis description, analysis id, pipeline and pipeline version used by the analysis, analysis priority, when the analysis was created, and duration of the analysis.\n+\n+![assembly-settings]\n+\n+To edit an analysis name, please select the **Pencil** icon next to the analysis name. Once you have edited the analysis name, pressing the `ENTER` key on your keyboard or clicking anywhere on the page will update the name. To cancel editing a name you can either hit the `ESC` key on your keyboard or if the name has not been changed you can also click anywhere on the page.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "726de5333fc60855e9e2f0abfe52a4170822fda9"}, "originalPosition": 122}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU2MTUwMQ==", "bodyText": "Same thing about the \"This option\" to \"the email option\"", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r386561501", "createdAt": "2020-03-02T18:13:27Z", "author": {"login": "tom114"}, "path": "doc/user/tutorials/bio_hansel/index.md", "diffHunk": "@@ -36,62 +36,77 @@ Selecting a Pipeline\n Once inside the cart, the **Select a Pipeline** button can be used to select a pipeline to run on the selected samples.\n \n For this tutorial, we will select the **bio_hansel Pipeline**: \n-![](images/select-a-pipeline.png)\n+![pipeline-select]\n \n \n Selecting Parameters\n ====================\n \n Once the pipeline is selected, the next page provides an overview of all the input files, as well as the option to modify parameters. You will be required to **select a SNV subtyping scheme** to use for your analysis.\n \n-![](images/bio_hansel-pipeline_launch-initial.png)\n+![biohansel-pipeline-page]\n \n-Please select the **Salmonella Heidelberg SNV Subtyping Scheme** and ensure that the **Save bio_hansel results to Project Line List Metadata** checkbox is checked:\n+Please select the **Salmonella Heidelberg SNV Subtyping Scheme**.\n \n-![](images/bio_hansel-pipeline_launch-selected_scheme-save_to_sample_metadata.png)\n+![biohansel-pipeline-params]\n \n You can leave the other parameters unmodified. Please use the **Ready to Launch?** button to start the pipeline.\n \n-![](images/launch.png)\n+![launch-button]\n \n Once the button is selected you should see a screen showing that your pipeline has been launched.\n \n+![pipeline-launched]\n \n Monitoring Pipeline Status\n ==========================\n \n-To monitor the status of the launched pipeline, please select the **Analysis > Your Analyses** menu.\n+To monitor the status of the launched pipeline, please select the **Analysis > Your Analyses** menu or click the **Let's see how this pipeline is doing** button.\n \n-![](images/analysis.png)\n+![view-your-analyses]\n \n-The will bring you to a page where you can monitor the status of each launched workflow.\n+This will bring you to a page where you can monitor the status of each launched workflow.\n \n-Clicking the pipeline name will bring you to a page for that analysis pipeline. \n+![monitor-analyses]\n \n+Clicking the pipeline name will bring you to a page for that analysis pipeline. It will take a while for the bio_hansel analysis pipeline to complete. Along the top of the page you can check the current step of the analysis and at the bottom of the **Details** tab you can select if you would like to receive an email upon pipeline completion. This option is only available if the analysis is not in `COMPLETED` or `ERROR` state.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "726de5333fc60855e9e2f0abfe52a4170822fda9"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU2MTc5NQ==", "bodyText": "The email option...", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r386561795", "createdAt": "2020-03-02T18:13:57Z", "author": {"login": "tom114"}, "path": "doc/user/tutorials/mentalist/index.md", "diffHunk": "@@ -20,64 +20,77 @@ Before analyzing samples, we must prepare a MentaLiST kmer database for the orga\n \n Initial Data\n ============\n-The data for this tutorial comes from <https://irida.corefacility.ca/downloads/data/irida-sample-data.zip>. It is assumed the sequence files in `miseq-run-salmonella/` have been uploaded into appropriate samples as described in the Web Upload Tutorial. Before starting this tutorial you should have a project with samples that appear as:\n+The data for this tutorial comes from <https://irida.corefacility.ca/downloads/data/irida-sample-data.zip>. It is assumed the sequence files in `miseq-run-salmonella/` have been uploaded into appropriate samples as described in the [Web Upload Tutorial]. Before starting this tutorial you should have a project with samples that appear as:\n \n-![mentalist-tutorial-samples.png][]\n+![mentalist-samples]\n \n Adding Samples to the Cart\n ==========================\n \n Before a pipeline can be run a set of samples and sequence read data must be selected and added to the cart. For this tutorial please select the single sample and click the **Add to Cart** button.\n \n-![add-to-cart.png][]\n+![add-to-cart]\n \n Once the samples have been added to the cart, the samples can be reviewed by clicking on the **Cart** button at the top.\n \n-![cart-button.png][]\n+![cart-button]\n \n Selecting a Pipeline\n ====================\n \n-Once inside the cart, you can select a pipeline from the available pipeline grid:\n+Once inside the cart all available pipelines will be listed in the main area of the page. For this tutorial, we will select the **MentaLiST MLST Pipeline**.\n \n-![select-a-pipeline-view.png][]\n-\n-For this tutorial, we will select the **MentaLiST MLST Pipeline**.\n+![pipeline-select]\n \n Selecting Parameters\n ====================\n \n Once the pipeline is selected, the next page provides an overview of all the input files, as well as the option to modify parameters.\n \n-![mentalist-pipeline-page.png][]\n+![mentalist-pipeline-page]\n+\n+Before launching the pipeline, we must select a MentaLiST kmer database to run our samples against. Select an appropriate 'Salmonella enterica' database from the **Kmer DB** drop-down menu. Note that the kmer databases available on your system will have a different date and may have been built with a different value of k than the ones shown below. If there is no 'Salmonella enterica' database available, please contact your IRIDA system administrator and refer to the [administrator documentation][mentalist-admin-docs] for detailed instructions on installing MentaLiST kmer databases.\n+\n+![mentalist-pipeline-parameters]\n+\n \n-Before launching the pipeline, we must select a MentaLiST kmer database to run our samples against. Select an appropriate 'Salmonella enterica' database from the **Kmer DB** drop-down menu. Note that the kmer databases available on your system will have a different date and may have been built with a different value of k than the ones shown below. If there is no 'Salmonella enterica' database available, please contact your IRIDA system administrator and refer to the [administrator documentation][mentalist-admin-docs] for detailed instructions on installing MentaLiST kmer databases. Use the **Ready to Launch?** button to start the pipeline.\n+Please use the **Ready to Launch?** button to start the pipeline.\n \n-![ready-to-launch-button.png][]\n+![launch-button]\n \n Once the button is selected you should see a screen showing that your pipeline has been launched.\n \n-![pipeline-launch.png][]\n+![pipeline-launched]\n \n Monitoring Pipeline Status\n ==========================\n \n-To monitor the status of the launched pipeline, please select the **Analysis > Your Analyses** menu.\n+To monitor the status of the launched pipeline, please select the **Analysis > Your Analyses** menu or click the **Let's see how this pipeline is doing** button.\n \n-![your-analyses-menu.png][]\n+![view-your-analyses]\n \n The will bring you to a page where you can monitor the status of each launched workflow.\n \n-![your-analyses-page.png][]\n+![monitor-analyses]\n \n-Clicking the pipeline name **MLSTMentalist_20180404** will bring you to a page for that analysis pipeline. This page will continue to refresh as the pipeline progresses through each stage.  It will take a while for the MentaLiST analysis pipeline to complete.\n+Clicking the pipeline name **MLSTMentalist_20200227** will bring you to a page for that analysis pipeline. It will take a while for the MentaLiST analysis pipeline to complete. Along the top of the page you can check the current step of the analysis and at the bottom of the **Details** tab you can select if you would like to receive an email upon pipeline completion. This option is only available if the analysis is not in `COMPLETED` or `ERROR` state.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "726de5333fc60855e9e2f0abfe52a4170822fda9"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU2NjY3MQ==", "bodyText": "Why all the code changes in a doc branch?  Also this file needs a lot more function level commenting.", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r386566671", "createdAt": "2020-03-02T18:23:32Z", "author": {"login": "tom114"}, "path": "src/main/webapp/resources/js/pages/analysis/components/outputs/OutputFilePreview.jsx", "diffHunk": "@@ -45,6 +46,14 @@ export default function OutputFilePreview() {\n     }\n   }, []);\n \n+  function getMenu () {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "726de5333fc60855e9e2f0abfe52a4170822fda9"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU3MDQwMQ==", "bodyText": "Why aren't pdf and zip files blacklisted? They'll just show garbage won't they?", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r386570401", "createdAt": "2020-03-02T18:30:32Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/analysis/AnalysisAjaxController.java", "diffHunk": "@@ -371,7 +371,7 @@ public ResponseDetails ajaxUpdateSubmission(@RequestBody AnalysisSubmissionInfo\n \t */\n \tprivate AnalysisOutputFileInfo getAnalysisOutputFileInfo(AnalysisSubmission submission, Analysis analysis,\n \t\t\tString outputName) {\n-\t\tfinal ImmutableSet<String> BLACKLIST_FILE_EXT = ImmutableSet.of(\"zip\", \"pdf\", \"html\", \"xlsx\");\n+\t\tfinal ImmutableSet<String> BLACKLIST_FILE_EXT = ImmutableSet.of(\"html\", \"xlsx\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "726de5333fc60855e9e2f0abfe52a4170822fda9"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9839e14f3bacbe29912bfb4ef0f8bc99fe404e7f", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/9839e14f3bacbe29912bfb4ef0f8bc99fe404e7f", "committedDate": "2020-03-02T20:34:22Z", "message": "Merged base branch and fixed merge conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9972589acfa326b69fab310efc3ac3d6dc9693f1", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/9972589acfa326b69fab310efc3ac3d6dc9693f1", "committedDate": "2020-03-02T20:45:38Z", "message": "Updated text for the email option and updating an analysis name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d56206aa1f4db32034213ddccb809110ce8dd8bc", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/d56206aa1f4db32034213ddccb809110ce8dd8bc", "committedDate": "2020-03-02T22:14:43Z", "message": "Added missing color from styles. Removed duplicate import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "501648e0afaf45b1739afb7446cbe550bc8c418d", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/501648e0afaf45b1739afb7446cbe550bc8c418d", "committedDate": "2020-03-03T17:47:57Z", "message": "Updated pipelines documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0585c79612bfd91a12c3d3772ba8d55285e4a6a9", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/0585c79612bfd91a12c3d3772ba8d55285e4a6a9", "committedDate": "2020-03-03T19:57:58Z", "message": "Updated sistr page documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71074906e21cf78cdfa80048f0453c74f4eb2680", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/71074906e21cf78cdfa80048f0453c74f4eb2680", "committedDate": "2020-03-04T20:42:20Z", "message": "Updated analysis-visualizations, admin, and sistr documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af622777bc06dd90cf4ce54aacb3ef1e6b580f70", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/af622777bc06dd90cf4ce54aacb3ef1e6b580f70", "committedDate": "2020-03-04T20:45:34Z", "message": "Merge branch 'analysis/_base_results' into analysis/_documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed3e4ce9c356f46a0d41afaf11626a9b4cf2710e", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/ed3e4ce9c356f46a0d41afaf11626a9b4cf2710e", "committedDate": "2020-03-04T21:29:28Z", "message": "Added comments and changed function name to be more specific"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzU4NDgx", "url": "https://github.com/phac-nml/irida/pull/608#pullrequestreview-369758481", "createdAt": "2020-03-05T17:13:06Z", "commit": {"oid": "ed3e4ce9c356f46a0d41afaf11626a9b4cf2710e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoxMzowNlrOFycatQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxODowNToxNlrOFyeM0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQzODcwOQ==", "bodyText": "This new image is too big that when it's viewed on the page you can't really see what it's showing.  Try scaling your browser window smaller before taking the screenshot.", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r388438709", "createdAt": "2020-03-05T17:13:06Z", "author": {"login": "tom114"}, "path": "doc/user/administrator/index.md", "diffHunk": "@@ -228,17 +228,10 @@ Setting Analysis Submission Priority\n \n Administrators have the ability to set the priority of analysis submissions in IRIDA.  This feature can be used to ensure important analyses are run in a timely fashion when the analysis queue is filled by routine or other low priority analyses.  By default all manually submitted submissions will have a priority of `MEDIUM`, whereas all automated submissions (such as automated assemblies and automated SISTR) will have `LOW` priority.\n \n-To update the priority of a submission, first view the submission page.  The current priority will be displayed in the info section\n+To update the priority of a submission, first view the analysis page.  The current priority will be displayed on the `Details` page. To edit the priority, click the select box under **Priority**:\n \n-![Analysis priority.](images/analysis-priority.png)\n+![Analysis edit button.](images/analysis-priority-edit.png)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed3e4ce9c356f46a0d41afaf11626a9b4cf2710e"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ2MjU3Nw==", "bodyText": "This is the first time I've really noticed the 2 places the output files could be in.  I think I understand why you did it this way so that there's only 1 tab for output related things, but I'm not sure I like the inconsistency.  Should we talk about maybe always showing the Output Files tab and only showing the specialized viewers when they're applicable?", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r388462577", "createdAt": "2020-03-05T17:56:14Z", "author": {"login": "tom114"}, "path": "doc/user/user/pipelines/index.md", "diffHunk": "@@ -145,31 +145,28 @@ The \"State\" column will change over time if you leave your browser window open s\n Viewing pipeline results\n ------------------------\n \n-You can view or download the outputs of a pipeline execution once a pipeline has completed:\n+You can either click on the ![download-icon](images/download-icon.png) icon to download *all* of the outputs produced by the pipeline execution, or you can click on the name of the analysis to view more detailed outputs and, if available, view a preview of the outputs:\n \n ![Completed analysis listing.](images/completed-analysis.png)\n \n-You can either click on the <img src=\"images/download-icon.png\" class=\"inline\" alt=\"Download icon.\"> icon to download *all* of the outputs produced by the pipeline execution, or you can click on the name of the analysis to view more detailed outputs and, if available, view a preview of the outputs:\n+The analysis page shows you more detailed information about your pipeline submission, including the names of the files that were produced by the analysis (on the Output File Preview page), a preview of the outputs (if available), and some tabs to view more details about how the pipeline was submitted and for sharing results:\n \n-![View pipeline results button.](images/view-analysis-outputs-button.png)\n-\n-The analysis details page shows you more detailed information about your pipeline submission, including the names of the files that were produced by the analysis (on the left-hand side of the page), a preview of the outputs (if available), and some tabs to view more details about how the pipeline was submitted:\n-\n-![Analysis details page.](images/analysis-details-page.png)\n+![Analysis results page.](images/analysis-results-page.png)\n <figcaption>Example SNVPhyl pipeline phylogenetic tree preview</figcaption>\n+<br/><br/>\n \n-![view-results-preview-refseq-masher]\n+![view-results-refseq-masher](images/view-results-refseq-masher.png)\n <figcaption>Example `refseq_masher` tabular results preview</figcaption>\n+<br/><br/>\n+To download output files, you can use the \"Output File Preview\" section from this page.  To download an individual file, click on the file name. If the file does not have an available output preview it can be downloaded by clicking the `...` next to the Download All Files button and selecting the file to download.  To download *all* the outputs produced by the pipeline, you can click on the \"Download All Files\" button.\n \n-To download output files, you can use the \"Output Files\" section from this page.  To download an individual file, click on the file name.  To download *all* the outputs produced by the pipeline, you can click on the \"Download Files\" button.\n-\n-![Analysis download.](images/analysis-details-download.png)\n+![Analysis results download.](images/analysis-results-download.png)\n \n ### Previewing analysis output files\n \n-All analysis pipelines produce analysis output files. You can preview these output files under the **Preview** tab on the **Analysis Details** page:\n+All analysis pipelines produce analysis output files. Depending on the type of analysis you can view these in one of two places. Either the `Output Files` tab on the **Analysis** page:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed3e4ce9c356f46a0d41afaf11626a9b4cf2710e"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ2MzMzNg==", "bodyText": "I don't think we need to tell them it's loaded in chunks.  It's just the way it works.  This adds unnecessary extra bloat to the docs.", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r388463336", "createdAt": "2020-03-05T17:57:38Z", "author": {"login": "tom114"}, "path": "doc/user/user/pipelines/index.md", "diffHunk": "@@ -178,68 +175,69 @@ For each analysis output file, you will see a panel and in each panel you will s\n - a file download link\n - a preview of the file contents displayed as plain text or in a table\n \n-#### Previewing tabular analysis output\n \n-Some of the output files will be rendered in a table:\n+Or on the \"Output File Preview\" tab:\n \n+![view-results-preview-snvphyl](images/view-results-preview-snvphyl.png)\n+<figcaption>Example `snvphyl` tabular results preview</figcaption>\n \n-![view-results-tabular-snvphyl-snv-table]\n-<figcaption>SNVPhyl SNV  results shown in an interactive table.</figcaption>\n+For each analysis output file, you will see a panel and in each panel you will see:\n \n-![view-results-tabular-refseq_masher-contains-default]\n-<figcaption>`refseq_masher` results shown in an interactive table.</figcaption>\n+- a panel heading with the Galaxy tool name (e.g. \"VCF snvalignment\") and version (e.g. \"(1.8.0)\"), internal IRIDA output name (e.g. \"core\") and output file name (e.g. \"vcf2core.tsv\")\n+- a file download link\n+- a preview of the file contents displayed as plain text or in a table\n+\n+\n+#### Previewing tabular analysis output\n \n+Some of the output files will be rendered in a table:\n \n \n-When you scroll to the bottom row in the table, more lines will be fetched as they are needed. You can also resize the table by clicking and dragging the \"resize icon\"  in the corner of the panel:\n+![view-results-tabular-snvphyl-snv-table]\n+<figcaption>SNVPhyl SNV  results shown in a table.</figcaption>\n \n-![view-results-resize]\n-<figcaption>\n-  Click and drag the \"resize icon\" to resize the table. \n-</figcaption>\n+![view-results-tabular-refseq_masher-contains-default]\n+<figcaption>`refseq_masher` results shown in a table.</figcaption>\n \n-![view-results-refseq_masher-contains-resized]\n-<figcaption>Resized `refseq_masher` results table</figcaption>\n \n #### Default plain text preview of analysis output\n \n Analysis output files with file extensions like `.log`, `.txt` or `.fasta` can be previewed in the browser as plain text:\n \n-![view-results-plain-text-snvphyl-mapping]\n+![view-results-plain-text-snvphyl-mapping](images/view-results-plain-text-snvphyl-mapping.png)\n \n If an analysis output file is small enough like this log file, it will be loaded in its entirety:\n \n-![view-results-plain-text-shovill-log]\n-<figcaption>Notice that the `4.0 kB / 4.0 kB (100%)` indicates that 100% of the file has been loaded.</figcaption>\n+![view-results-plain-text-quast-log](images/view-results-plain-text-quast-log.png)\n \n-If an analysis output file is fairly large like this FASTA file, it will be loaded in chunks as needed for viewing:\n+<figcaption>Notice that the `3.0 kB / 3.0 kB (100%)` indicates that 100% of the file has been loaded.</figcaption>\n \n-![view-results-plain-text-shovill-fasta]\n-<figcaption>Notice that the `24.0 kB / 693.9 kB (3.5%)` indicates that only 3.5% of the file has been loaded into this view. Scrolling to the end will trigger loading of the next chunk of this file into the view!</figcaption>\n+If an analysis output file is fairly large like this log file, it will be loaded in chunks as needed for viewing:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed3e4ce9c356f46a0d41afaf11626a9b4cf2710e"}, "originalPosition": 123}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ2NDU5MA==", "bodyText": "The sample name here in black makes it seem like it's not a link.  I see that you can click on it, but can it be restyled in blue the same as the seq file names?", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r388464590", "createdAt": "2020-03-05T17:58:53Z", "author": {"login": "tom114"}, "path": "doc/user/user/pipelines/index.md", "diffHunk": "@@ -178,68 +175,69 @@ For each analysis output file, you will see a panel and in each panel you will s\n - a file download link\n - a preview of the file contents displayed as plain text or in a table\n \n-#### Previewing tabular analysis output\n \n-Some of the output files will be rendered in a table:\n+Or on the \"Output File Preview\" tab:\n \n+![view-results-preview-snvphyl](images/view-results-preview-snvphyl.png)\n+<figcaption>Example `snvphyl` tabular results preview</figcaption>\n \n-![view-results-tabular-snvphyl-snv-table]\n-<figcaption>SNVPhyl SNV  results shown in an interactive table.</figcaption>\n+For each analysis output file, you will see a panel and in each panel you will see:\n \n-![view-results-tabular-refseq_masher-contains-default]\n-<figcaption>`refseq_masher` results shown in an interactive table.</figcaption>\n+- a panel heading with the Galaxy tool name (e.g. \"VCF snvalignment\") and version (e.g. \"(1.8.0)\"), internal IRIDA output name (e.g. \"core\") and output file name (e.g. \"vcf2core.tsv\")\n+- a file download link\n+- a preview of the file contents displayed as plain text or in a table\n+\n+\n+#### Previewing tabular analysis output\n \n+Some of the output files will be rendered in a table:\n \n \n-When you scroll to the bottom row in the table, more lines will be fetched as they are needed. You can also resize the table by clicking and dragging the \"resize icon\"  in the corner of the panel:\n+![view-results-tabular-snvphyl-snv-table]\n+<figcaption>SNVPhyl SNV  results shown in a table.</figcaption>\n \n-![view-results-resize]\n-<figcaption>\n-  Click and drag the \"resize icon\" to resize the table. \n-</figcaption>\n+![view-results-tabular-refseq_masher-contains-default]\n+<figcaption>`refseq_masher` results shown in a table.</figcaption>\n \n-![view-results-refseq_masher-contains-resized]\n-<figcaption>Resized `refseq_masher` results table</figcaption>\n \n #### Default plain text preview of analysis output\n \n Analysis output files with file extensions like `.log`, `.txt` or `.fasta` can be previewed in the browser as plain text:\n \n-![view-results-plain-text-snvphyl-mapping]\n+![view-results-plain-text-snvphyl-mapping](images/view-results-plain-text-snvphyl-mapping.png)\n \n If an analysis output file is small enough like this log file, it will be loaded in its entirety:\n \n-![view-results-plain-text-shovill-log]\n-<figcaption>Notice that the `4.0 kB / 4.0 kB (100%)` indicates that 100% of the file has been loaded.</figcaption>\n+![view-results-plain-text-quast-log](images/view-results-plain-text-quast-log.png)\n \n-If an analysis output file is fairly large like this FASTA file, it will be loaded in chunks as needed for viewing:\n+<figcaption>Notice that the `3.0 kB / 3.0 kB (100%)` indicates that 100% of the file has been loaded.</figcaption>\n \n-![view-results-plain-text-shovill-fasta]\n-<figcaption>Notice that the `24.0 kB / 693.9 kB (3.5%)` indicates that only 3.5% of the file has been loaded into this view. Scrolling to the end will trigger loading of the next chunk of this file into the view!</figcaption>\n+If an analysis output file is fairly large like this log file, it will be loaded in chunks as needed for viewing:\n+\n+![view-results-plain-text-shovill-log]\n+<figcaption>Notice that the `8.0 kB / 212.0 kB (3.8%)` indicates that only 3.8% of the file has been loaded into this view. Scrolling to the end will trigger loading of the next chunk of this file into the view!</figcaption>\n \n \n \n ### Viewing the sequencing data submitted for analysis\n \n-To view the data that was submitted to the pipeline for analysis, start from the [analysis details page](#viewing-pipeline-results) and click on the \"Input Files\" tab:\n+To view the data that was submitted to the pipeline for analysis, start from the [Analysis results page](#viewing-pipeline-results), click on the `Settings` tab and then click on the `Samples` tab:\n \n ![Input files tab.](images/input-files-tab.png)\n \n-The pipeline input files page shows all of the files that were submitted for analysis in the pipeline submission:\n+The pipeline samples page shows all of the files that were submitted for analysis in the pipeline submission:\n \n ![Pipeline input files.](images/pipeline-input-files.png)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed3e4ce9c356f46a0d41afaf11626a9b4cf2710e"}, "originalPosition": 140}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ2NTg3MA==", "bodyText": "This image should be redone with a scaled down browser.  It's too big to see what it's trying to show.", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r388465870", "createdAt": "2020-03-05T18:01:17Z", "author": {"login": "tom114"}, "path": "doc/user/user/pipelines/index.md", "diffHunk": "@@ -337,11 +341,8 @@ For example, you may encounter an error when running the \"Assembly and Annotatio\n \n ![analyses-table-error](images/analyses-table-error.png)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed3e4ce9c356f46a0d41afaf11626a9b4cf2710e"}, "originalPosition": 200}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ2NTk0OQ==", "bodyText": "This image should be redone with a scaled down browser.  It's too big to see what it's trying to show.", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r388465949", "createdAt": "2020-03-05T18:01:27Z", "author": {"login": "tom114"}, "path": "doc/user/user/pipelines/index.md", "diffHunk": "@@ -337,11 +341,8 @@ For example, you may encounter an error when running the \"Assembly and Annotatio\n \n ![analyses-table-error](images/analyses-table-error.png)\n \n-If you click on the <span class=\"fa fa-fw fa-question-circle\"></span> icon, you can preview the Galaxy job error information:\n-\n-![analyses-table-error-preview](images/analyses-table-error-preview.png)\n \n-If you follow the link to the analysis page, you can view all the job error information for the pipeline in error:\n+If you click on the analysis name it will take you to the analysis page. From here you can view all the job error information for the pipeline including the galaxy job information, the galaxy parameters, standard error, and standard output.\n \n ![analysis-job-error](images/analysis-job-error.png)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed3e4ce9c356f46a0d41afaf11626a9b4cf2710e"}, "originalPosition": 209}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ2NjkzOQ==", "bodyText": "Image is too big to see on the docs page.  Crop it or reshoot with a scaled browser please.", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r388466939", "createdAt": "2020-03-05T18:03:23Z", "author": {"login": "tom114"}, "path": "doc/user/user/sistr/index.md", "diffHunk": "@@ -26,51 +26,37 @@ The SISTR pipeline can bet set up to run using two separate methods.\n \n ### 1. Automated Execution\n \n-The SISTR pipeline can be set to run automatically on upload of new sequencing data to particular projects. This can be set either on the creation of a new project, or from the project settings page.\n+The SISTR pipeline can be set to run automatically on upload of new sequencing data to particular projects.\n \n-a. **Creation of New Project**\n-\n-   On creation of a new project, the below option can be selected to enable the automated execution of SISTR on upload of new data to this project.\n-\n-   ![new-project-sistr.png][]\n-\n-b. **Project Settings**\n+**Project Settings**\n \n    Automated SISTR analysis can also be enabled (or disabled) after a project is created from the project **Settings** page.\n \n-   ![project-settings-sistr.png][]\n+   ![project-settings-sistr.png](images/project-settings-sistr.png)\n \n-If automated execution of SISTR has been enabled for a project, then a SISTR analysis will be scheduled for execution on the upload of new sequencing data.  The results are accessible from the particular sample page.\n+If automated execution of SISTR has been enabled for a project, then a SISTR analysis will be scheduled for execution on the upload of new sequencing data.  The results are accessible from the particular `Project` > `Analyses` page.\n \n-![sistr-typing-sample.png][]\n+![sistr-typing-analysis-page.png](images/sistr-typing-analysis-page.png)\n \n Clicking the **Automated SISTR Typing** link brings you to the appropriate analysis page for SISTR.\n \n-![sistr-typing-status.png][]\n+![sistr-typing-status.png](images/sistr-typing-status.png)\n \n ### 2. Manual Execution\n \n To execute SISTR manually, please refer to the [IRIDA/SISTR Tutorial][].\n \n ## SISTR Results\n \n-### Status of `PASS`\n-\n-A successfull SISTR run (with status of `PASS`) should produce the following page as output.\n-\n-![sistr-results.png][]\n-\n-### Status of `WARNING`\n-\n-A SISTR run with a status of `WARNING` should produce the below output.\n+A successful SISTR run should produce the following page as output. There are three possible Quality Control Statuses (Pass, Warning, and Fail)\n \n-![sistr-results-warning.png][]\n+![sistr-results.png](images/sistr-results.png)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed3e4ce9c356f46a0d41afaf11626a9b4cf2710e"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ2NzUyNw==", "bodyText": "This image should be redone with a scaled down browser. It's too big to see what it's trying to show.", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r388467527", "createdAt": "2020-03-05T18:04:30Z", "author": {"login": "tom114"}, "path": "doc/user/user/sistr/index.md", "diffHunk": "@@ -26,51 +26,37 @@ The SISTR pipeline can bet set up to run using two separate methods.\n \n ### 1. Automated Execution\n \n-The SISTR pipeline can be set to run automatically on upload of new sequencing data to particular projects. This can be set either on the creation of a new project, or from the project settings page.\n+The SISTR pipeline can be set to run automatically on upload of new sequencing data to particular projects.\n \n-a. **Creation of New Project**\n-\n-   On creation of a new project, the below option can be selected to enable the automated execution of SISTR on upload of new data to this project.\n-\n-   ![new-project-sistr.png][]\n-\n-b. **Project Settings**\n+**Project Settings**\n \n    Automated SISTR analysis can also be enabled (or disabled) after a project is created from the project **Settings** page.\n \n-   ![project-settings-sistr.png][]\n+   ![project-settings-sistr.png](images/project-settings-sistr.png)\n \n-If automated execution of SISTR has been enabled for a project, then a SISTR analysis will be scheduled for execution on the upload of new sequencing data.  The results are accessible from the particular sample page.\n+If automated execution of SISTR has been enabled for a project, then a SISTR analysis will be scheduled for execution on the upload of new sequencing data.  The results are accessible from the particular `Project` > `Analyses` page.\n \n-![sistr-typing-sample.png][]\n+![sistr-typing-analysis-page.png](images/sistr-typing-analysis-page.png)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed3e4ce9c356f46a0d41afaf11626a9b4cf2710e"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ2NzkyMg==", "bodyText": "Ok.  So does this mean that you can't download html or xlsx files?", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r388467922", "createdAt": "2020-03-05T18:05:16Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/analysis/AnalysisAjaxController.java", "diffHunk": "@@ -371,7 +371,7 @@ public ResponseDetails ajaxUpdateSubmission(@RequestBody AnalysisSubmissionInfo\n \t */\n \tprivate AnalysisOutputFileInfo getAnalysisOutputFileInfo(AnalysisSubmission submission, Analysis analysis,\n \t\t\tString outputName) {\n-\t\tfinal ImmutableSet<String> BLACKLIST_FILE_EXT = ImmutableSet.of(\"zip\", \"pdf\", \"html\", \"xlsx\");\n+\t\tfinal ImmutableSet<String> BLACKLIST_FILE_EXT = ImmutableSet.of(\"html\", \"xlsx\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU3MDQwMQ=="}, "originalCommit": {"oid": "726de5333fc60855e9e2f0abfe52a4170822fda9"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a38f47314f621e3ba78ac93175427b70871ceb3d", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/a38f47314f621e3ba78ac93175427b70871ceb3d", "committedDate": "2020-03-07T22:29:41Z", "message": "Merged base branch and fixed merge conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3c094758980ff90c943c91c00c9543d97c5492a", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/d3c094758980ff90c943c91c00c9543d97c5492a", "committedDate": "2020-03-07T22:34:46Z", "message": "Formatted code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6150fad6e9464ca19cfaa59f7e5246a955394353", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/6150fad6e9464ca19cfaa59f7e5246a955394353", "committedDate": "2020-03-07T22:35:26Z", "message": "Formatted code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0581d8bfc271338735e63cf8bd16569f55f97c93", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/0581d8bfc271338735e63cf8bd16569f55f97c93", "committedDate": "2020-03-09T21:02:47Z", "message": "Merged (analysis/_add-individual-file-download) branch which has the latest analysis/_base_results code changes and fixed merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b04114f43bae2fdf9b0646696bec49f2d420cc02", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/b04114f43bae2fdf9b0646696bec49f2d420cc02", "committedDate": "2020-03-10T16:31:32Z", "message": "Merge branch 'analysis/_add-individual-file-download' into analysis/_documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df5d627b74e77fd7f670c8be82e22a9d0e196731", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/df5d627b74e77fd7f670c8be82e22a9d0e196731", "committedDate": "2020-03-10T17:56:14Z", "message": "Merged changes from base branch and fixed merge conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "061820fb4acb2fac3b319957bbad04840e162048", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/061820fb4acb2fac3b319957bbad04840e162048", "committedDate": "2020-03-10T20:24:59Z", "message": "Merged base branch and fixed merge conflicts:"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c05d2defdc729de883cba2a5476db3629f2837fc", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/c05d2defdc729de883cba2a5476db3629f2837fc", "committedDate": "2020-03-11T05:51:25Z", "message": "Merge branch 'analysis/_phylocanvas-react-functional-component' into analysis/_documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a899ca7d09f14a9eb19b2d5755b91d79c61e2ae", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/9a899ca7d09f14a9eb19b2d5755b91d79c61e2ae", "committedDate": "2020-03-11T15:11:00Z", "message": "Merge branch 'analysis/_base_results' into analysis/_documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "533ef32ac240cf6ba819534e890729aab7480aa3", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/533ef32ac240cf6ba819534e890729aab7480aa3", "committedDate": "2020-03-11T17:10:56Z", "message": "Merge branch 'analysis/_base_results' into analysis/_documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d265b032635f8e0f76f98eddb88a30e899bf36f", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/6d265b032635f8e0f76f98eddb88a30e899bf36f", "committedDate": "2020-03-11T21:42:40Z", "message": "Updated documentation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b19d81bbed6991e502dc90566d3138f41d783e8", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/6b19d81bbed6991e502dc90566d3138f41d783e8", "committedDate": "2020-03-16T18:04:08Z", "message": "Merged base branch and fixed merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e8212c3cd7cfde230b5f26249dbf8971837fbac", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/1e8212c3cd7cfde230b5f26249dbf8971837fbac", "committedDate": "2020-03-16T18:14:05Z", "message": "Merge branch 'analysis/_base_results' into analysis/_documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MDE3NzQ5", "url": "https://github.com/phac-nml/irida/pull/608#pullrequestreview-376017749", "createdAt": "2020-03-17T13:11:24Z", "commit": {"oid": "1e8212c3cd7cfde230b5f26249dbf8971837fbac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MDc3MzA0", "url": "https://github.com/phac-nml/irida/pull/608#pullrequestreview-376077304", "createdAt": "2020-03-17T14:18:16Z", "commit": {"oid": "1e8212c3cd7cfde230b5f26249dbf8971837fbac"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNDoxODoxNlrOF3eT2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNDoyMDowOFrOF3eZVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzcxMjYwMg==", "bodyText": "If the tree doesn't exist the page just crashes.  There should be some error handler here to gracefully die if the tree file isn't there.", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r393712602", "createdAt": "2020-03-17T14:18:16Z", "author": {"login": "tom114"}, "path": "src/main/webapp/resources/js/pages/analysis/components/Analysis.jsx", "diffHunk": "@@ -41,6 +42,19 @@ const AnalysisProvenance = lazy(() => import(\"./AnalysisProvenance\"));\n export default function Analysis() {\n   const { analysisContext } = useContext(AnalysisContext);\n   const DEFAULT_URL = `/analysis/${analysisContext.analysis.identifier}`;\n+  const [treeDefault, setTreeDefault] = useState(null);\n+\n+  useEffect(() => {\n+    if((analysisType === \"PHYLOGENOMICS\" || analysisType === \"MLST_MENTALIST\") && analysisContext.isCompleted) {\n+      getNewickTree(analysisContext.analysis.identifier).then(data => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e8212c3cd7cfde230b5f26249dbf8971837fbac"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzcxNDAwNg==", "bodyText": "Something I'm not seeing anywhere is the pipeline duration for running pipelines.  I thought we were going to jam it in the status bar.  Is it somewhere else?", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r393714006", "createdAt": "2020-03-17T14:20:08Z", "author": {"login": "tom114"}, "path": "doc/user/tutorials/sistr/index.md", "diffHunk": "@@ -19,62 +19,79 @@ Initial Data\n \n The data for this tutorial comes from <https://irida.corefacility.ca/downloads/data/irida-sample-data.zip>. It is assumed the sequence files in `miseq-run-salmonella/` have been uploaded into appropriate samples as described in the [Web Upload Tutorial][]. Before starting this tutorial you should have a project with samples that appear as follows:\n \n-![tutorial-sistr-samples.png][]\n+![sistr-samples]\n \n Adding Samples to the Cart\n ==========================\n \n Before a pipeline can be run a set of samples and sequence read data must be selected and added to the cart. For this tutorial please select the single sample and click the **Add to Cart** button.\n \n-![add-to-cart.png][]\n+![add-to-cart]\n \n Once the samples have been added to the cart, the samples can be reviewed by clicking on the **Cart** button at the top.\n \n-![cart-button.png][]\n+![cart-button]\n \n Selecting a Pipeline\n ====================\n \n-Once inside the cart all available pipelines will be listed in the main area of the page.\n+Once inside the cart all available pipelines will be listed in the main area of the page. For this tutorial, we will select the **SISTR Pipeline**.\n \n-![select-a-pipeline-view.png][]\n-\n-For this tutorial, we will select the **SISTR Pipeline**.\n+![pipeline-select]\n \n Selecting Parameters\n ====================\n \n-Once the pipeline is selected, the next page provides an overview of all the input files, as well as the option to modify parameters.\n+Once the pipeline is selected, the next page provides an overview of all the input files, as well as the option to modify parameters. We will use the default parameters.\n \n-![sistr-pipeline-page.png][]\n+![sistr-pipeline-page]\n \n-We will use the default parameters. Please use the **Ready to Launch?** button to start the pipeline.\n+Please use the **Ready to Launch?** button to start the pipeline.\n \n-![ready-to-launch-button.png][]\n+![launch-button]\n \n Once the button is selected you should see a screen showing that your pipeline has been launched.\n \n-![pipeline-launch.png][]\n+![pipeline-launched]\n \n Monitoring Pipeline Status", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e8212c3cd7cfde230b5f26249dbf8971837fbac"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3826a7d8b96b7c256cf46f77344912b6832a3fd1", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/3826a7d8b96b7c256cf46f77344912b6832a3fd1", "committedDate": "2020-03-18T14:40:09Z", "message": "Merge branch 'analysis/_base_results' into analysis/_documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f86d93b34ab0907f6176cf0d2bbb021e2fbaf9f0", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/f86d93b34ab0907f6176cf0d2bbb021e2fbaf9f0", "committedDate": "2020-03-18T15:43:53Z", "message": "Updated analysis images which displayed the AnalysisSteps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6300eaa94c95be89a43e3839810d716f223824f5", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/6300eaa94c95be89a43e3839810d716f223824f5", "committedDate": "2020-03-18T20:01:30Z", "message": "Merge branch 'analysis/_base_results' into analysis/_documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "205c2837d43e4fb43b539a86e5fe0a04bf34253c", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/205c2837d43e4fb43b539a86e5fe0a04bf34253c", "committedDate": "2020-03-18T20:02:18Z", "message": "Merge branch 'analysis/_base_results' into analysis/_documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3OTgyMDE1", "url": "https://github.com/phac-nml/irida/pull/608#pullrequestreview-377982015", "createdAt": "2020-03-19T18:21:17Z", "commit": {"oid": "205c2837d43e4fb43b539a86e5fe0a04bf34253c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyMToxOFrOF46-nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyMjo1MlrOF47CPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTIzMDg3Nw==", "bodyText": "Somewhere above there's a missing image.\n[2020-03-19 13:17:40] ERROR /user/user/pipelines/images/queue-counts.png' not found.`", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r395230877", "createdAt": "2020-03-19T18:21:18Z", "author": {"login": "tom114"}, "path": "doc/user/user/pipelines/index.md", "diffHunk": "@@ -55,7 +55,7 @@ The default cart page will allow you to choose from the pipelines that are curre\n \n ![Select a pipeline page.](images/pipeline-tab.png)\n \n-Click on the \"Select\" button at the bottom, right-hand side of the pipeline that you'd like to launch.\n+Click on the \"Select\" button at the bottom of the pipeline that you'd like to launch.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "205c2837d43e4fb43b539a86e5fe0a04bf34253c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTIzMTgwNw==", "bodyText": "Is there still 2 places to see the output files?  If not this wording should change.", "url": "https://github.com/phac-nml/irida/pull/608#discussion_r395231807", "createdAt": "2020-03-19T18:22:52Z", "author": {"login": "tom114"}, "path": "doc/user/user/pipelines/index.md", "diffHunk": "@@ -145,31 +145,28 @@ The \"State\" column will change over time if you leave your browser window open s\n Viewing pipeline results\n ------------------------\n \n-You can view or download the outputs of a pipeline execution once a pipeline has completed:\n+You can either click on the ![download-icon](images/download-icon.png) icon to download *all* of the outputs produced by the pipeline execution, or you can click on the name of the analysis to view more detailed outputs and, if available, view a preview of the outputs:\n \n ![Completed analysis listing.](images/completed-analysis.png)\n \n-You can either click on the <img src=\"images/download-icon.png\" class=\"inline\" alt=\"Download icon.\"> icon to download *all* of the outputs produced by the pipeline execution, or you can click on the name of the analysis to view more detailed outputs and, if available, view a preview of the outputs:\n+The analysis page shows you more detailed information about your pipeline submission, including the names of the files that were produced by the analysis (on the Output File Preview page), a preview of the outputs (if available), and some tabs to view more details about how the pipeline was submitted and for sharing results:\n \n-![View pipeline results button.](images/view-analysis-outputs-button.png)\n-\n-The analysis details page shows you more detailed information about your pipeline submission, including the names of the files that were produced by the analysis (on the left-hand side of the page), a preview of the outputs (if available), and some tabs to view more details about how the pipeline was submitted:\n-\n-![Analysis details page.](images/analysis-details-page.png)\n+![Analysis results page.](images/analysis-results-page.png)\n <figcaption>Example SNVPhyl pipeline phylogenetic tree preview</figcaption>\n+<br/><br/>\n \n-![view-results-preview-refseq-masher]\n+![view-results-refseq-masher](images/view-results-refseq-masher.png)\n <figcaption>Example `refseq_masher` tabular results preview</figcaption>\n+<br/><br/>\n+To download output files, you can use the \"Output File Preview\" section from this page.  To download an individual file, click on the file name. If the file does not have an available output preview it can be downloaded by clicking the `...` next to the Download All Files button and selecting the file to download.  To download *all* the outputs produced by the pipeline, you can click on the \"Download All Files\" button.\n \n-To download output files, you can use the \"Output Files\" section from this page.  To download an individual file, click on the file name.  To download *all* the outputs produced by the pipeline, you can click on the \"Download Files\" button.\n-\n-![Analysis download.](images/analysis-details-download.png)\n+![Analysis results download.](images/analysis-results-download.png)\n \n ### Previewing analysis output files\n \n-All analysis pipelines produce analysis output files. You can preview these output files under the **Preview** tab on the **Analysis Details** page:\n+All analysis pipelines produce analysis output files. Depending on the type of analysis you can view these in one of two places. Either the `Output Files` tab on the **Analysis** page:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ2MjU3Nw=="}, "originalCommit": {"oid": "ed3e4ce9c356f46a0d41afaf11626a9b4cf2710e"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57065d13224ec849ba765968bf10659f29217363", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/57065d13224ec849ba765968bf10659f29217363", "committedDate": "2020-03-19T18:34:37Z", "message": "Updated text for previewing analysis output files, added missing image, removed image no longer required"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MDM3MjA2", "url": "https://github.com/phac-nml/irida/pull/608#pullrequestreview-378037206", "createdAt": "2020-03-19T19:40:32Z", "commit": {"oid": "57065d13224ec849ba765968bf10659f29217363"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 175, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}