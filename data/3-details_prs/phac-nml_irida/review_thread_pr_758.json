{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzNTM1OTk2", "number": 758, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxNjowMzo0OFrOEQRQug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTo1MTowOVrOEW2uOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NDk1NDgyOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/UserGroupsPage/components/CreateNewUserGroupButton.jsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxNjowMzo0OFrOG0VCZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxNjowMzo0OFrOG0VCZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzUyMzgxNQ==", "bodyText": "Consider use useResetFormOnCloseModal it automatically resets the form when the modal closes. \u00a0See AddGroupButton.jsx.", "url": "https://github.com/phac-nml/irida/pull/758#discussion_r457523815", "createdAt": "2020-07-20T16:03:48Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/UserGroupsPage/components/CreateNewUserGroupButton.jsx", "diffHunk": "@@ -3,13 +3,14 @@ import { AddNewButton } from \"../../../components/Buttons/AddNewButton\";\n import { Form, Input, Modal } from \"antd\";\n import { createUserGroup } from \"../../../apis/users/groups\";\n import { useNavigate } from \"@reach/router\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4e3ed2976fe1b0a28f8a6ab6f39d3b325b9e8c8"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NTEyMjM2OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/UserGroupsPage/index.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxNjo0NToyOFrOG0WpDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNDozODowN1rOG82hAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzU1MDA5NA==", "bodyText": "Call the setBaseUrl on it here. Even better would be creating a constant for the url since it is the same as what you are passing in the path", "url": "https://github.com/phac-nml/irida/pull/758#discussion_r457550094", "createdAt": "2020-07-20T16:45:28Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/UserGroupsPage/index.js", "diffHunk": "@@ -43,8 +43,8 @@ export function UserGroups() {\n     >\n       <RolesProvider rolesFn={getUserGroupRoles}>\n         <Router style={{ height: \"100%\" }}>\n-          <UserGroupsPage path={setBaseUrl(\"/groups\")} />\n-          <UserGroupsDetailsPage path={setBaseUrl(\"/groups/:id\")} />\n+          <UserGroupsPage baseUrl={\"/groups\"} path={setBaseUrl(\"/groups\")} />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4e3ed2976fe1b0a28f8a6ab6f39d3b325b9e8c8"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQ2MDkyOA==", "bodyText": "Awesome, can you just update the JSDoc for the baseUrl to state that it should already be set. \u00a0Easier to understand if we use this component in different places.", "url": "https://github.com/phac-nml/irida/pull/758#discussion_r466460928", "createdAt": "2020-08-06T14:38:07Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/UserGroupsPage/index.js", "diffHunk": "@@ -43,8 +43,8 @@ export function UserGroups() {\n     >\n       <RolesProvider rolesFn={getUserGroupRoles}>\n         <Router style={{ height: \"100%\" }}>\n-          <UserGroupsPage path={setBaseUrl(\"/groups\")} />\n-          <UserGroupsDetailsPage path={setBaseUrl(\"/groups/:id\")} />\n+          <UserGroupsPage baseUrl={\"/groups\"} path={setBaseUrl(\"/groups\")} />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzU1MDA5NA=="}, "originalCommit": {"oid": "a4e3ed2976fe1b0a28f8a6ab6f39d3b325b9e8c8"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NTEzOTUzOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/admin/components/AdminUserGroupsPage.jsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxNjo1MDowMlrOG0Wzww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxNjo1MDowMlrOG0Wzww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzU1MjgzNQ==", "bodyText": "Same here, I think it is more clear to call setBaseUrl here since you only append to it in the child component.", "url": "https://github.com/phac-nml/irida/pull/758#discussion_r457552835", "createdAt": "2020-07-20T16:50:02Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/admin/components/AdminUserGroupsPage.jsx", "diffHunk": "@@ -0,0 +1,27 @@\n+import React, { lazy } from \"react\";\n+import { Router } from \"@reach/router\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import { RolesProvider } from \"../../../contexts\";\n+import { getUserGroupRoles } from \"../../../apis/users/groups\";\n+\n+const UserGroupsPage = lazy(() => import(\"../../UserGroupsPage/components/UserGroupsPage\"));\n+const UserGroupsDetailsPage = lazy(() =>\n+  import(\"../../UserGroupsPage/components/UserGroupDetailsPage\")\n+);\n+\n+/**\n+ * React component to display pages related to User Groups in the Admin Panel. This is a base page\n+ * for both listing of user groups and user group details.\n+ * @returns {*}\n+ * @constructor\n+ */\n+export default function AdminUserGroupsPage() {\n+  return (\n+      <RolesProvider rolesFn={getUserGroupRoles}>\n+        <Router>\n+          <UserGroupsPage baseUrl={\"/admin/groups\"} path={setBaseUrl(\"\")} />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4e3ed2976fe1b0a28f8a6ab6f39d3b325b9e8c8"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NTI3NTc3OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/admin/components/AdminUserGroupsPage.jsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMzoyODo1OVrOG13rcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMzoyODo1OVrOG13rcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEzOTk1Mg==", "bodyText": "Since setBaseUrl(\"/admin/groups\") is called multiple times it would be better to set this as a constant", "url": "https://github.com/phac-nml/irida/pull/758#discussion_r459139952", "createdAt": "2020-07-22T23:28:59Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/admin/components/AdminUserGroupsPage.jsx", "diffHunk": "@@ -19,8 +19,8 @@ export default function AdminUserGroupsPage() {\n   return (\n       <RolesProvider rolesFn={getUserGroupRoles}>\n         <Router>\n-          <UserGroupsPage baseUrl={\"/admin/groups\"} path={setBaseUrl(\"\")} />\n-          <UserGroupsDetailsPage baseUrl={\"/admin/groups\"} path={setBaseUrl(\"/:id\")} />\n+          <UserGroupsPage baseUrl={setBaseUrl(\"/admin/groups\")} path={setBaseUrl(\"\")} />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77b236fe185afe38ed2d6f68a1ba127489f055f2"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MTgyNDQ3OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/UserGroupsPage/components/UserGroupDetailsPage.jsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNzo1ODo0OVrOG5t5iA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNDozODo0OFrOG82i2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE3NDAyNA==", "bodyText": "You don't need to interpolate the baseUrl here just navigate(baseUrl, {replace:true}).", "url": "https://github.com/phac-nml/irida/pull/758#discussion_r463174024", "createdAt": "2020-07-30T17:58:49Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/UserGroupsPage/components/UserGroupDetailsPage.jsx", "diffHunk": "@@ -123,29 +132,24 @@ export default function UserGroupDetailsPage({ id }) {\n   const DeleteGroup = () => (\n     <div>\n       <WarningAlert message={i18n(\"UserGroupDetailsPage.delete-warning\")} />\n-      <form\n-        style={{ marginTop: SPACE_SM }}\n-        ref={deleteRef}\n-        action={setBaseUrl(`/groups/${id}/delete`)}\n-        method=\"POST\"\n-      >\n+      <div style={{ marginTop: SPACE_SM }}>\n         <Popconfirm\n-          onConfirm={() => deleteRef.current.submit()}\n+          onConfirm={deleteUserGroup}\n           title={i18n(\"UserGroupDetailsPage.delete-confirm\")}\n           okButtonProps={{ className: \"t-delete-confirm-btn\" }}\n         >\n           <Button className=\"t-delete-group-btn\" type=\"primary\" danger>\n             {i18n(\"UserGroupDetailsPage.delete-button\")}\n           </Button>\n         </Popconfirm>\n-      </form>\n+      </div>\n     </div>\n   );\n \n   return (\n     <PageWrapper\n       title={\"User Groups\"}\n-      onBack={() => navigate(setBaseUrl(\"/groups\"), { replace: true })}\n+      onBack={() => navigate(`${baseUrl}`, { replace: true })}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f88eac4f1ff13997435212f5fb62b18b3db160e0"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQ2MTQwMg==", "bodyText": "Same here for JSDoc", "url": "https://github.com/phac-nml/irida/pull/758#discussion_r466461402", "createdAt": "2020-08-06T14:38:48Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/UserGroupsPage/components/UserGroupDetailsPage.jsx", "diffHunk": "@@ -123,29 +132,24 @@ export default function UserGroupDetailsPage({ id }) {\n   const DeleteGroup = () => (\n     <div>\n       <WarningAlert message={i18n(\"UserGroupDetailsPage.delete-warning\")} />\n-      <form\n-        style={{ marginTop: SPACE_SM }}\n-        ref={deleteRef}\n-        action={setBaseUrl(`/groups/${id}/delete`)}\n-        method=\"POST\"\n-      >\n+      <div style={{ marginTop: SPACE_SM }}>\n         <Popconfirm\n-          onConfirm={() => deleteRef.current.submit()}\n+          onConfirm={deleteUserGroup}\n           title={i18n(\"UserGroupDetailsPage.delete-confirm\")}\n           okButtonProps={{ className: \"t-delete-confirm-btn\" }}\n         >\n           <Button className=\"t-delete-group-btn\" type=\"primary\" danger>\n             {i18n(\"UserGroupDetailsPage.delete-button\")}\n           </Button>\n         </Popconfirm>\n-      </form>\n+      </div>\n     </div>\n   );\n \n   return (\n     <PageWrapper\n       title={\"User Groups\"}\n-      onBack={() => navigate(setBaseUrl(\"/groups\"), { replace: true })}\n+      onBack={() => navigate(`${baseUrl}`, { replace: true })}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE3NDAyNA=="}, "originalCommit": {"oid": "f88eac4f1ff13997435212f5fb62b18b3db160e0"}, "originalPosition": 84}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMDc4NDE5OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/admin/components/AdminSideMenu.jsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMjowNTo1NFrOG8cRaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMjowNTo1NFrOG8cRaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAzMDk1Mg==", "bodyText": "One last change otherwise everything else is good to go from my end. Can you create a function that does this instead of doing it inline and add a comment to the function as to why this needs to be done\nkeyname[0].split('/')[0]", "url": "https://github.com/phac-nml/irida/pull/758#discussion_r466030952", "createdAt": "2020-08-05T22:05:54Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/admin/components/AdminSideMenu.jsx", "diffHunk": "@@ -33,19 +33,19 @@ export default function AdminHeader() {\n                 <img style={{ height: 64, width: 200 }} src={setBaseUrl(\"/resources/img/irida_logo_dark.svg\")}/>\n               </Link>\n               <Menu className={\"t-admin-side-menu\"} style={{ height: '100vh' }} theme={\"dark\"} mode={\"inline\"}\n-                    selectedKeys={[keyname ? keyname[1] : ADMIN.STATISTICS]}>\n+                    selectedKeys={[keyname ? keyname[0].split('/')[0] : ADMIN.STATISTICS]}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2ea9ea90c43ac85c91edab2aebfb1f73e64a871"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMzk2ODQ3OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/UserGroupsPage/components/CreateNewUserGroupButton.jsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTo0MTo0NlrOG-UeUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTo0MTo0NlrOG-UeUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAwMDMzNg==", "bodyText": "JSDoc for baseUrl", "url": "https://github.com/phac-nml/irida/pull/758#discussion_r468000336", "createdAt": "2020-08-10T15:41:46Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/UserGroupsPage/components/CreateNewUserGroupButton.jsx", "diffHunk": "@@ -1,22 +1,32 @@\n-import React, { useContext, useEffect, useRef, useState } from \"react\";\n+import React, { useEffect, useRef, useState } from \"react\";\n import { AddNewButton } from \"../../../components/Buttons/AddNewButton\";\n import { Form, Input, Modal } from \"antd\";\n import { createUserGroup } from \"../../../apis/users/groups\";\n import { useNavigate } from \"@reach/router\";\n+import { useResetFormOnCloseModal } from \"../../../hooks\";\n \n /**\n  * React component to render a button to create a new user group\n  * @returns {*}\n  * @constructor\n  */\n-export function CreateNewUserGroupButton() {\n+export function CreateNewUserGroupButton({ baseUrl }) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26bc9acd1683e1275fef98a92b5570ace9548f51"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMzk5OTAwOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/UserGroupsPage/components/CreateNewUserGroupButton.jsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTo0OToxMVrOG-UxXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTo0OToxMVrOG-UxXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAwNTIxMw==", "bodyText": "Can you move this to the top of the function, I like to have all the useState's together", "url": "https://github.com/phac-nml/irida/pull/758#discussion_r468005213", "createdAt": "2020-08-10T15:49:11Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/UserGroupsPage/components/CreateNewUserGroupButton.jsx", "diffHunk": "@@ -1,22 +1,32 @@\n-import React, { useContext, useEffect, useRef, useState } from \"react\";\n+import React, { useEffect, useRef, useState } from \"react\";\n import { AddNewButton } from \"../../../components/Buttons/AddNewButton\";\n import { Form, Input, Modal } from \"antd\";\n import { createUserGroup } from \"../../../apis/users/groups\";\n import { useNavigate } from \"@reach/router\";\n+import { useResetFormOnCloseModal } from \"../../../hooks\";\n \n /**\n  * React component to render a button to create a new user group\n  * @returns {*}\n  * @constructor\n  */\n-export function CreateNewUserGroupButton() {\n+export function CreateNewUserGroupButton({ baseUrl }) {\n   /*\n   Required a reference to the user select input so that focus can be set\n   to it when the window opens.\n    */\n   const inputRef = useRef();\n   const [visible, setVisible] = useState();\n+\n+  /*\n+  Ant Design form\n+   */\n   const [form] = Form.useForm();\n+  useResetFormOnCloseModal({\n+    form,\n+    visible,\n+  });\n+\n   const navigate = useNavigate();\n \n   const [error, setError] = useState();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26bc9acd1683e1275fef98a92b5570ace9548f51"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDAwNjk2OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/UserGroupsPage/components/UserGroupsTable.jsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTo1MTowOVrOG-U2Kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTo1MTowOVrOG-U2Kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAwNjQ0Mg==", "bodyText": "JSDoc for baseUrl", "url": "https://github.com/phac-nml/irida/pull/758#discussion_r468006442", "createdAt": "2020-08-10T15:51:09Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/UserGroupsPage/components/UserGroupsTable.jsx", "diffHunk": "@@ -14,14 +12,14 @@ const { Paragraph } = Typography;\n  * @returns {*}\n  * @constructor\n  */\n-export function UserGroupsTable() {\n+export function UserGroupsTable({ baseUrl }) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26bc9acd1683e1275fef98a92b5570ace9548f51"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 673, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}