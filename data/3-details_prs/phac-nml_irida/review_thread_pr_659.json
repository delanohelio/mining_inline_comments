{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MjM3MzM1", "number": 659, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxODoyMzozMVrOD15low==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDo0NToxNFrOD18xIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODQ0NjQzOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/projects/details/ProjectDetails.jsx", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxODoyMzozMVrOGLj5pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxMzo1NzowOFrOGMkjhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3NTcxOA==", "bodyText": "We should probably move this into a context What do you think?", "url": "https://github.com/phac-nml/irida/pull/659#discussion_r414775718", "createdAt": "2020-04-24T18:23:31Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/projects/details/ProjectDetails.jsx", "diffHunk": "@@ -0,0 +1,142 @@\n+import React, { useEffect, useReducer } from \"react\";\n+import {\n+  getProjectDetails,\n+  updateProjectAttribute,\n+} from \"../../../apis/projects/projects\";\n+import { notification, Typography } from \"antd\";\n+import { BasicList } from \"../../../components/lists\";\n+import { formatInternationalizedDateTime } from \"../../../utilities/date-utilities\";\n+import { EditableParagraph } from \"../../../components/ant.design\";\n+import { OntologySelect } from \"../../../components/ontology\";\n+import { TAXONOMY } from \"../../../apis/ontology/taxonomy\";\n+\n+const { Paragraph, Title } = Typography;\n+\n+/**\n+ * Reducer for the state of the project details.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07c0f3de3e53a39d0dd730316b92816c11c24abd"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTcwNjQzMA==", "bodyText": "Context really only helps if you are doing a lot of props drilling (passing props down through a lot of components), it won't help in this situation.  Eventually we might need it if you move all code encapsulating a project into a \"single page react app\" but we can reconsider that when we get there.", "url": "https://github.com/phac-nml/irida/pull/659#discussion_r415706430", "createdAt": "2020-04-27T10:45:13Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/projects/details/ProjectDetails.jsx", "diffHunk": "@@ -0,0 +1,142 @@\n+import React, { useEffect, useReducer } from \"react\";\n+import {\n+  getProjectDetails,\n+  updateProjectAttribute,\n+} from \"../../../apis/projects/projects\";\n+import { notification, Typography } from \"antd\";\n+import { BasicList } from \"../../../components/lists\";\n+import { formatInternationalizedDateTime } from \"../../../utilities/date-utilities\";\n+import { EditableParagraph } from \"../../../components/ant.design\";\n+import { OntologySelect } from \"../../../components/ontology\";\n+import { TAXONOMY } from \"../../../apis/ontology/taxonomy\";\n+\n+const { Paragraph, Title } = Typography;\n+\n+/**\n+ * Reducer for the state of the project details.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3NTcxOA=="}, "originalCommit": {"oid": "07c0f3de3e53a39d0dd730316b92816c11c24abd"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTgzNTAxNQ==", "bodyText": "Sounds good. Thanks!", "url": "https://github.com/phac-nml/irida/pull/659#discussion_r415835015", "createdAt": "2020-04-27T13:57:08Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/projects/details/ProjectDetails.jsx", "diffHunk": "@@ -0,0 +1,142 @@\n+import React, { useEffect, useReducer } from \"react\";\n+import {\n+  getProjectDetails,\n+  updateProjectAttribute,\n+} from \"../../../apis/projects/projects\";\n+import { notification, Typography } from \"antd\";\n+import { BasicList } from \"../../../components/lists\";\n+import { formatInternationalizedDateTime } from \"../../../utilities/date-utilities\";\n+import { EditableParagraph } from \"../../../components/ant.design\";\n+import { OntologySelect } from \"../../../components/ontology\";\n+import { TAXONOMY } from \"../../../apis/ontology/taxonomy\";\n+\n+const { Paragraph, Title } = Typography;\n+\n+/**\n+ * Reducer for the state of the project details.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3NTcxOA=="}, "originalCommit": {"oid": "07c0f3de3e53a39d0dd730316b92816c11c24abd"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODk0MTIzOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/projects/details/ProjectDetails.jsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDozODowMVrOGLoWlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxMDo0MzozN1rOGMcpaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0ODY2MA==", "bodyText": "Probably add a check to make sure a value was actually changed and only make a server call if there was a change detected", "url": "https://github.com/phac-nml/irida/pull/659#discussion_r414848660", "createdAt": "2020-04-24T20:38:01Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/projects/details/ProjectDetails.jsx", "diffHunk": "@@ -0,0 +1,142 @@\n+import React, { useEffect, useReducer } from \"react\";\n+import {\n+  getProjectDetails,\n+  updateProjectAttribute,\n+} from \"../../../apis/projects/projects\";\n+import { notification, Typography } from \"antd\";\n+import { BasicList } from \"../../../components/lists\";\n+import { formatInternationalizedDateTime } from \"../../../utilities/date-utilities\";\n+import { EditableParagraph } from \"../../../components/ant.design\";\n+import { OntologySelect } from \"../../../components/ontology\";\n+import { TAXONOMY } from \"../../../apis/ontology/taxonomy\";\n+\n+const { Paragraph, Title } = Typography;\n+\n+/**\n+ * Reducer for the state of the project details.\n+ *\n+ * @param {object} state - current state of the project details\n+ * @param {object} action - include type and payload\n+ * @returns {object}\n+ */\n+function reducer(state, action) {\n+  switch (action.type) {\n+    case \"LOADED\":\n+      return { ...state, ...action.payload, loading: false };\n+    case \"UPDATE\":\n+      return { ...state, ...action.payload };\n+    default:\n+      return { ...state };\n+  }\n+}\n+\n+/**\n+ * React component for render the basic information about a project.\n+ * @returns {*}\n+ * @constructor\n+ */\n+export function ProjectDetails() {\n+  const [state, dispatch] = useReducer(reducer, { loading: true });\n+\n+  /*\n+  When this component is rendered, query the api for the specific details\n+  about this project.\n+   */\n+  useEffect(() => {\n+    getProjectDetails(window.project.id).then((data) =>\n+      dispatch({ type: \"LOADED\", payload: data })\n+    );\n+  }, []);\n+\n+  /**\n+   * When a field is updated, submitted it to the server to be saved.\n+   * Display a notification on the result of the update, and then update the\n+   * UI accordingly.\n+   *\n+   * @param {string} field to be updated\n+   * @param {string} value to be store in the field\n+   */\n+  const updateField = (field, value) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07c0f3de3e53a39d0dd730316b92816c11c24abd"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTcwNTQ0OQ==", "bodyText": "Updated in c6f2992, also added a check to ensure that the project label met the requirements for length.", "url": "https://github.com/phac-nml/irida/pull/659#discussion_r415705449", "createdAt": "2020-04-27T10:43:37Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/projects/details/ProjectDetails.jsx", "diffHunk": "@@ -0,0 +1,142 @@\n+import React, { useEffect, useReducer } from \"react\";\n+import {\n+  getProjectDetails,\n+  updateProjectAttribute,\n+} from \"../../../apis/projects/projects\";\n+import { notification, Typography } from \"antd\";\n+import { BasicList } from \"../../../components/lists\";\n+import { formatInternationalizedDateTime } from \"../../../utilities/date-utilities\";\n+import { EditableParagraph } from \"../../../components/ant.design\";\n+import { OntologySelect } from \"../../../components/ontology\";\n+import { TAXONOMY } from \"../../../apis/ontology/taxonomy\";\n+\n+const { Paragraph, Title } = Typography;\n+\n+/**\n+ * Reducer for the state of the project details.\n+ *\n+ * @param {object} state - current state of the project details\n+ * @param {object} action - include type and payload\n+ * @returns {object}\n+ */\n+function reducer(state, action) {\n+  switch (action.type) {\n+    case \"LOADED\":\n+      return { ...state, ...action.payload, loading: false };\n+    case \"UPDATE\":\n+      return { ...state, ...action.payload };\n+    default:\n+      return { ...state };\n+  }\n+}\n+\n+/**\n+ * React component for render the basic information about a project.\n+ * @returns {*}\n+ * @constructor\n+ */\n+export function ProjectDetails() {\n+  const [state, dispatch] = useReducer(reducer, { loading: true });\n+\n+  /*\n+  When this component is rendered, query the api for the specific details\n+  about this project.\n+   */\n+  useEffect(() => {\n+    getProjectDetails(window.project.id).then((data) =>\n+      dispatch({ type: \"LOADED\", payload: data })\n+    );\n+  }, []);\n+\n+  /**\n+   * When a field is updated, submitted it to the server to be saved.\n+   * Display a notification on the result of the update, and then update the\n+   * UI accordingly.\n+   *\n+   * @param {string} field to be updated\n+   * @param {string} value to be store in the field\n+   */\n+  const updateField = (field, value) => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0ODY2MA=="}, "originalCommit": {"oid": "07c0f3de3e53a39d0dd730316b92816c11c24abd"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODk2NzM4OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/pages/projects/settings/pages/details.html", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDo0NToxNFrOGLolRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxMDo0Mzo1MFrOGMcqCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1MjQyMw==", "bodyText": "Internationalize the text", "url": "https://github.com/phac-nml/irida/pull/659#discussion_r414852423", "createdAt": "2020-04-24T20:45:14Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/pages/projects/settings/pages/details.html", "diffHunk": "@@ -0,0 +1,21 @@\n+<!DOCTYPE html>\n+<html\n+  lang=\"en\"\n+  xmlns:th=\"http://www.thymeleaf.org\"\n+  xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n+  data-layout-decorate=\"~{projects/settings/_base}\"\n+>\n+  <head>\n+    <meta charset=\"UTF-8\" />\n+    <title>Title</title>\n+    <link rel=\"stylesheet\" href=\"/dist/css/project-details.bundle.css\">\n+  </head>\n+  <body>\n+    <div id=\"details-root\" layout:fragment=\"settings-content\" >\n+      <div>LOADING ...</div>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07c0f3de3e53a39d0dd730316b92816c11c24abd"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTcwNTYwOQ==", "bodyText": "Updated in dea2b04", "url": "https://github.com/phac-nml/irida/pull/659#discussion_r415705609", "createdAt": "2020-04-27T10:43:50Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/pages/projects/settings/pages/details.html", "diffHunk": "@@ -0,0 +1,21 @@\n+<!DOCTYPE html>\n+<html\n+  lang=\"en\"\n+  xmlns:th=\"http://www.thymeleaf.org\"\n+  xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n+  data-layout-decorate=\"~{projects/settings/_base}\"\n+>\n+  <head>\n+    <meta charset=\"UTF-8\" />\n+    <title>Title</title>\n+    <link rel=\"stylesheet\" href=\"/dist/css/project-details.bundle.css\">\n+  </head>\n+  <body>\n+    <div id=\"details-root\" layout:fragment=\"settings-content\" >\n+      <div>LOADING ...</div>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1MjQyMw=="}, "originalCommit": {"oid": "07c0f3de3e53a39d0dd730316b92816c11c24abd"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 856, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}