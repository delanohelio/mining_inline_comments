{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4MzQzMjEx", "number": 834, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxNTo0Nzo0MFrOExQztA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNjozMjozM1rOEx_D2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwMDkxMDYwOnYy", "diffSide": "RIGHT", "path": "src/main/java/ca/corefacility/bioinformatics/irida/model/enums/GroupByFormat.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxNTo0Nzo0MFrOHnTlsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxMzoxMjozMlrOHoOzLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk3NzQ1OQ==", "bodyText": "Would it make sense to put all this stuff into StatisticTimePeriod?  You already have these exact values there so it's a bit of a duplication.\nIf you did that you could just add the groupByFormat property to that enum.", "url": "https://github.com/phac-nml/irida/pull/834#discussion_r510977459", "createdAt": "2020-10-23T15:47:40Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/model/enums/GroupByFormat.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package ca.corefacility.bioinformatics.irida.model.enums;\n+\n+/**\n+ * Defines a set of formats which admin statistics\n+ * can be grouped by\n+ *\n+ */\n+\n+public enum GroupByFormat {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdd5a7aec6e160536c15b6d9d2c7b4895fc4b538"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTA1MzY4Mw==", "bodyText": "Yeah that's a good idea. :) I will try it out and see how it goes. Thanks", "url": "https://github.com/phac-nml/irida/pull/834#discussion_r511053683", "createdAt": "2020-10-23T18:06:36Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/model/enums/GroupByFormat.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package ca.corefacility.bioinformatics.irida.model.enums;\n+\n+/**\n+ * Defines a set of formats which admin statistics\n+ * can be grouped by\n+ *\n+ */\n+\n+public enum GroupByFormat {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk3NzQ1OQ=="}, "originalCommit": {"oid": "cdd5a7aec6e160536c15b6d9d2c7b4895fc4b538"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk0NzU2NQ==", "bodyText": "Updated in c5a00bc", "url": "https://github.com/phac-nml/irida/pull/834#discussion_r511947565", "createdAt": "2020-10-26T13:12:32Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/model/enums/GroupByFormat.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package ca.corefacility.bioinformatics.irida.model.enums;\n+\n+/**\n+ * Defines a set of formats which admin statistics\n+ * can be grouped by\n+ *\n+ */\n+\n+public enum GroupByFormat {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk3NzQ1OQ=="}, "originalCommit": {"oid": "cdd5a7aec6e160536c15b6d9d2c7b4895fc4b538"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwMDkxNDg3OnYy", "diffSide": "RIGHT", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIAdminStatisticsService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxNTo0ODo1NVrOHnTofg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxMzoxMjo1OFrOHoO0Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk3ODE3NA==", "bodyText": "Use the enum values instead of fromString.  So GroupByFormat.DAILY instead here.", "url": "https://github.com/phac-nml/irida/pull/834#discussion_r510978174", "createdAt": "2020-10-23T15:48:55Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIAdminStatisticsService.java", "diffHunk": "@@ -86,17 +86,21 @@ public StatisticsResponse getAdminAnalysesStatistics(Integer timePeriod) {\n \n \t\tif (IntStream.of(StatisticTimePeriod.DAILY.getDaily())\n \t\t\t\t.anyMatch((x -> x == timePeriod))) {\n-\t\t\treturn new StatisticsResponse(analysisSubmissionService.getAnalysesRanDaily(minimumCreatedDate));\n+\t\t\treturn new StatisticsResponse(analysisSubmissionService.getAnalysesRanGrouped(minimumCreatedDate,\n+\t\t\t\t\tGroupByFormat.fromString(\"daily\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdd5a7aec6e160536c15b6d9d2c7b4895fc4b538"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk0Nzg2Ng==", "bodyText": "This has been refactored in c5a00bc", "url": "https://github.com/phac-nml/irida/pull/834#discussion_r511947866", "createdAt": "2020-10-26T13:12:58Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIAdminStatisticsService.java", "diffHunk": "@@ -86,17 +86,21 @@ public StatisticsResponse getAdminAnalysesStatistics(Integer timePeriod) {\n \n \t\tif (IntStream.of(StatisticTimePeriod.DAILY.getDaily())\n \t\t\t\t.anyMatch((x -> x == timePeriod))) {\n-\t\t\treturn new StatisticsResponse(analysisSubmissionService.getAnalysesRanDaily(minimumCreatedDate));\n+\t\t\treturn new StatisticsResponse(analysisSubmissionService.getAnalysesRanGrouped(minimumCreatedDate,\n+\t\t\t\t\tGroupByFormat.fromString(\"daily\")));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk3ODE3NA=="}, "originalCommit": {"oid": "cdd5a7aec6e160536c15b6d9d2c7b4895fc4b538"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwMDkzMjU4OnYy", "diffSide": "RIGHT", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIAdminStatisticsService.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxNTo1MzozMVrOHnTzdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNjo1MDoyM1rOHoY6uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk4MDk4Mw==", "bodyText": "If you ended up moving the GroupByFormat stuff into StatisticsResponse you could also refactor to remove this whole if stack and get the method to just figure out which StatisticsResponse to use, and directly call into the service method with that StatisticsResponse.", "url": "https://github.com/phac-nml/irida/pull/834#discussion_r510980983", "createdAt": "2020-10-23T15:53:31Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIAdminStatisticsService.java", "diffHunk": "@@ -86,17 +86,21 @@ public StatisticsResponse getAdminAnalysesStatistics(Integer timePeriod) {\n \n \t\tif (IntStream.of(StatisticTimePeriod.DAILY.getDaily())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdd5a7aec6e160536c15b6d9d2c7b4895fc4b538"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk0NzY4Ng==", "bodyText": "Updated in c5a00bc", "url": "https://github.com/phac-nml/irida/pull/834#discussion_r511947686", "createdAt": "2020-10-26T13:12:42Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIAdminStatisticsService.java", "diffHunk": "@@ -86,17 +86,21 @@ public StatisticsResponse getAdminAnalysesStatistics(Integer timePeriod) {\n \n \t\tif (IntStream.of(StatisticTimePeriod.DAILY.getDaily())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk4MDk4Mw=="}, "originalCommit": {"oid": "cdd5a7aec6e160536c15b6d9d2c7b4895fc4b538"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjExMzMzOQ==", "bodyText": "Thanks.  That paired down all those functions by a pile.", "url": "https://github.com/phac-nml/irida/pull/834#discussion_r512113339", "createdAt": "2020-10-26T16:50:23Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIAdminStatisticsService.java", "diffHunk": "@@ -86,17 +86,21 @@ public StatisticsResponse getAdminAnalysesStatistics(Integer timePeriod) {\n \n \t\tif (IntStream.of(StatisticTimePeriod.DAILY.getDaily())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk4MDk4Mw=="}, "originalCommit": {"oid": "cdd5a7aec6e160536c15b6d9d2c7b4895fc4b538"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwODQ3MjQ3OnYy", "diffSide": "RIGHT", "path": "src/main/java/ca/corefacility/bioinformatics/irida/model/enums/StatisticTimePeriod.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNjoyOTowOFrOHoX5Vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxODo1Mzo0M1rOHod5wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA5NjU5OQ==", "bodyText": "Can you add a comment on what these int values are for?", "url": "https://github.com/phac-nml/irida/pull/834#discussion_r512096599", "createdAt": "2020-10-26T16:29:08Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/model/enums/StatisticTimePeriod.java", "diffHunk": "@@ -1,31 +1,39 @@\n package ca.corefacility.bioinformatics.irida.model.enums;\n \n /**\n- * Defines a arrays of time periods used\n+ * Defines a arrays of time periods and group by formats used\n  * for getting statistics for the Admin Panel.\n  *\n  */\n \n public enum StatisticTimePeriod {\n-\tDAILY(7,14,30),\n-\tMONTHLY(90, 365),\n-\tYEARLY(730, 1825, 3650);\n+\tHOURLY(new int[] {1}, \"%H:00\"),\n+\tDAILY(new int[] {7,14,30}, \"%m/%d\"),\n+\tMONTHLY(new int[] {90, 365}, \"%m/%y\"),\n+\tYEARLY(new int[] {730, 1825, 3650}, \"%Y\");\n \n \tprivate int [] values;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f3a3ee19adfa3e6647dbe5ba385320206864e2"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE5NTAxMA==", "bodyText": "Added in 863ac81", "url": "https://github.com/phac-nml/irida/pull/834#discussion_r512195010", "createdAt": "2020-10-26T18:53:43Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/model/enums/StatisticTimePeriod.java", "diffHunk": "@@ -1,31 +1,39 @@\n package ca.corefacility.bioinformatics.irida.model.enums;\n \n /**\n- * Defines a arrays of time periods used\n+ * Defines a arrays of time periods and group by formats used\n  * for getting statistics for the Admin Panel.\n  *\n  */\n \n public enum StatisticTimePeriod {\n-\tDAILY(7,14,30),\n-\tMONTHLY(90, 365),\n-\tYEARLY(730, 1825, 3650);\n+\tHOURLY(new int[] {1}, \"%H:00\"),\n+\tDAILY(new int[] {7,14,30}, \"%m/%d\"),\n+\tMONTHLY(new int[] {90, 365}, \"%m/%y\"),\n+\tYEARLY(new int[] {730, 1825, 3650}, \"%Y\");\n \n \tprivate int [] values;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA5NjU5OQ=="}, "originalCommit": {"oid": "79f3a3ee19adfa3e6647dbe5ba385320206864e2"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwODQ4ODU2OnYy", "diffSide": "RIGHT", "path": "src/main/java/ca/corefacility/bioinformatics/irida/model/enums/StatisticTimePeriod.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNjozMjozM1rOHoYDLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxODo1Mzo1N1rOHod6Qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA5OTExNg==", "bodyText": "Is there any use for the setters?  Since its an enum it doesn't really make sense for an outside object to modify it.  If its needed for hibernate or something though you can switch them to private.", "url": "https://github.com/phac-nml/irida/pull/834#discussion_r512099116", "createdAt": "2020-10-26T16:32:33Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/model/enums/StatisticTimePeriod.java", "diffHunk": "@@ -1,31 +1,39 @@\n package ca.corefacility.bioinformatics.irida.model.enums;\n \n /**\n- * Defines a arrays of time periods used\n+ * Defines a arrays of time periods and group by formats used\n  * for getting statistics for the Admin Panel.\n  *\n  */\n \n public enum StatisticTimePeriod {\n-\tDAILY(7,14,30),\n-\tMONTHLY(90, 365),\n-\tYEARLY(730, 1825, 3650);\n+\tHOURLY(new int[] {1}, \"%H:00\"),\n+\tDAILY(new int[] {7,14,30}, \"%m/%d\"),\n+\tMONTHLY(new int[] {90, 365}, \"%m/%y\"),\n+\tYEARLY(new int[] {730, 1825, 3650}, \"%Y\");\n \n \tprivate int [] values;\n+\tprivate String groupByFormat;\n \n-\tprivate StatisticTimePeriod(int... values) {\n+\tprivate StatisticTimePeriod(int[] values, String groupByFormat) {\n \t\tthis.values = values;\n+\t\tthis.groupByFormat = groupByFormat;\n \t}\n \n-\tpublic int[] getDaily() {\n-\t\treturn DAILY.values;\n+\tpublic int[] getValues() {\n+\t\treturn values;\n \t}\n \n-\tpublic int[] getMonthly() {\n-\t\treturn MONTHLY.values;\n+\tpublic void setValues(int[] values) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f3a3ee19adfa3e6647dbe5ba385320206864e2"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE5NTEzOQ==", "bodyText": "Looks like they are not required at all. Removed in 863ac81", "url": "https://github.com/phac-nml/irida/pull/834#discussion_r512195139", "createdAt": "2020-10-26T18:53:57Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/model/enums/StatisticTimePeriod.java", "diffHunk": "@@ -1,31 +1,39 @@\n package ca.corefacility.bioinformatics.irida.model.enums;\n \n /**\n- * Defines a arrays of time periods used\n+ * Defines a arrays of time periods and group by formats used\n  * for getting statistics for the Admin Panel.\n  *\n  */\n \n public enum StatisticTimePeriod {\n-\tDAILY(7,14,30),\n-\tMONTHLY(90, 365),\n-\tYEARLY(730, 1825, 3650);\n+\tHOURLY(new int[] {1}, \"%H:00\"),\n+\tDAILY(new int[] {7,14,30}, \"%m/%d\"),\n+\tMONTHLY(new int[] {90, 365}, \"%m/%y\"),\n+\tYEARLY(new int[] {730, 1825, 3650}, \"%Y\");\n \n \tprivate int [] values;\n+\tprivate String groupByFormat;\n \n-\tprivate StatisticTimePeriod(int... values) {\n+\tprivate StatisticTimePeriod(int[] values, String groupByFormat) {\n \t\tthis.values = values;\n+\t\tthis.groupByFormat = groupByFormat;\n \t}\n \n-\tpublic int[] getDaily() {\n-\t\treturn DAILY.values;\n+\tpublic int[] getValues() {\n+\t\treturn values;\n \t}\n \n-\tpublic int[] getMonthly() {\n-\t\treturn MONTHLY.values;\n+\tpublic void setValues(int[] values) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA5OTExNg=="}, "originalCommit": {"oid": "79f3a3ee19adfa3e6647dbe5ba385320206864e2"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 777, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}