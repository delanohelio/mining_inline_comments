{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0MjAwNzc5", "number": 570, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxOToyNDowNVrODek5dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxNzoxNDoyN1rODf9cWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMzg4NDA2OnYy", "diffSide": "RIGHT", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/clients/ClientsController.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxOToyNDowNVrOFnyjAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxNjozODozOVrOFp8sCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI2Njk0Ng==", "bodyText": "This method is nearly a carbon copy to the method above.  Can this be refactored?", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377266946", "createdAt": "2020-02-10T19:24:05Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/clients/ClientsController.java", "diffHunk": "@@ -148,6 +150,16 @@ public String revokeTokens(@RequestParam Long id) {\n \t\treturn \"redirect:/clients/\" + id;\n \t}\n \n+\t/**\n+\t * Revoke access tokens for a specific client.\n+\t * @param id - identifier for a client\n+\t */\n+\t@RequestMapping(value = \"/ajax/revoke\", method = RequestMethod.PUT)\n+\tpublic void revokeClientTokens(@RequestParam Long id) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkyNjk4OA==", "bodyText": "So it could, but it would only be creating another function that does the revoking that both call since I do not want the redirect in the new function.  I don't think that is worth it.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378926988", "createdAt": "2020-02-13T15:20:04Z", "author": {"login": "joshsadam"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/clients/ClientsController.java", "diffHunk": "@@ -148,6 +150,16 @@ public String revokeTokens(@RequestParam Long id) {\n \t\treturn \"redirect:/clients/\" + id;\n \t}\n \n+\t/**\n+\t * Revoke access tokens for a specific client.\n+\t * @param id - identifier for a client\n+\t */\n+\t@RequestMapping(value = \"/ajax/revoke\", method = RequestMethod.PUT)\n+\tpublic void revokeClientTokens(@RequestParam Long id) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI2Njk0Ng=="}, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTQ5MzYzNQ==", "bodyText": "I just don't like these 2 methods with pretty much the same name doing pretty much the same thing.  I see the comments, but revokeClientTokens and revokeTokens is a bit too much.\nCan you at least rename the other one to something like revokeTokensAndRedirect so it's more clear why we have the same thing side-by-side?\nAlso, a PUT is bad HTTP grammer here.  It should likely be DELETE.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379493635", "createdAt": "2020-02-14T15:31:11Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/clients/ClientsController.java", "diffHunk": "@@ -148,6 +150,16 @@ public String revokeTokens(@RequestParam Long id) {\n \t\treturn \"redirect:/clients/\" + id;\n \t}\n \n+\t/**\n+\t * Revoke access tokens for a specific client.\n+\t * @param id - identifier for a client\n+\t */\n+\t@RequestMapping(value = \"/ajax/revoke\", method = RequestMethod.PUT)\n+\tpublic void revokeClientTokens(@RequestParam Long id) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI2Njk0Ng=="}, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTUzMDI1MQ==", "bodyText": "Updated in 401c7b7", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379530251", "createdAt": "2020-02-14T16:38:39Z", "author": {"login": "joshsadam"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/clients/ClientsController.java", "diffHunk": "@@ -148,6 +150,16 @@ public String revokeTokens(@RequestParam Long id) {\n \t\treturn \"redirect:/clients/\" + id;\n \t}\n \n+\t/**\n+\t * Revoke access tokens for a specific client.\n+\t * @param id - identifier for a client\n+\t */\n+\t@RequestMapping(value = \"/ajax/revoke\", method = RequestMethod.PUT)\n+\tpublic void revokeClientTokens(@RequestParam Long id) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI2Njk0Ng=="}, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMzkyNjI5OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/pages/clients/list.html", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxOTozNzoyOFrOFny9Og==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxNToyMDoyMlrOFpX4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI3MzY1OA==", "bodyText": "Thanks for this", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377273658", "createdAt": "2020-02-10T19:37:28Z", "author": {"login": "tom114"}, "path": "src/main/webapp/pages/clients/list.html", "diffHunk": "@@ -1,40 +1,19 @@\n <!DOCTYPE html>\n-<html xmlns:th=\"http://www.thymeleaf.org\"\n-      xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n-      data-layout-decorate=\"~{template/page}\">\n-<head>\n+<html\n+  xmlns:th=\"http://www.thymeleaf.org\"\n+  xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n+  data-layout-decorate=\"~{template/page}\"\n+>\n+  <head>\n     <title th:text=\"#{clients.title}\">_Clients_</title>\n-    <link rel=\"stylesheet\" th:href=\"@{/dist/css/clients-list.bundle.css}\">\n-</head>\n-<body>\n-<th:block layout:fragment=\"page\">\n-    <div class=\"col-md-12\">\n-        <main role=\"main\" property=\"mainContentOfPage\">\n-            <h1 th:text=\"#{clients.title}\">_Clients_</h1>\n-            <a id=\"add-link\" href=\"/clients/create\" th:href=\"@{/clients/create}\" th:text=\"#{clients.add}\"\n-               class=\"btn btn-sm btn-default hidden\">_Add\n-                Client_</a>\n-            <table id=\"clientsTable\" class=\"table table-striped table-hover\"\n-                   data:clients=\"@{/clients/}\"\n-                   data:url=\"@{/clients/ajax/list}\">\n-                <thead>\n-                <tr th:inline=\"text\">\n-                    <th data-data=\"id\" width=\"20\" id=\"id-header\">[[#{iridaThing.id}]]</th>\n-                    <th data-data=\"clientId\" width=\"160\" id=\"clientid-header\">[[#{client.clientid}]]</th>\n-                    <th data-data=\"grants\" data-orderable=\"false\" id=\"grants-header\">[[#{client.grant-types}]]</th>\n-                    <th data-data=\"createdDate\" id=\"created-header\">[[#{iridaThing.timestamp}]]</th>\n-                    <th data-data=\"tokens\" id=\"tokens-header\" data-orderable=\"false\">\n-                        [[#{client.details.token.active}]]\n-                    </th>\n-                </tr>\n-                </thead>\n-                <tbody id=\"client-table-body\"></tbody>\n-            </table>\n-        </main>\n+    <link rel=\"stylesheet\" th:href=\"@{/dist/css/clients-list.bundle.css}\" />\n+  </head>\n+  <body>\n+    <div layout:fragment=\"page\" id=\"client-root\" style=\"height: 100%;\">\n+      <!-- Base react component found at : /webapp/resources/js/pages/clients/listing/ClientListingPage.jsx -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkyNzE2MQ==", "bodyText": "You're welcome, I will try to add these in the future.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378927161", "createdAt": "2020-02-13T15:20:22Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/pages/clients/list.html", "diffHunk": "@@ -1,40 +1,19 @@\n <!DOCTYPE html>\n-<html xmlns:th=\"http://www.thymeleaf.org\"\n-      xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n-      data-layout-decorate=\"~{template/page}\">\n-<head>\n+<html\n+  xmlns:th=\"http://www.thymeleaf.org\"\n+  xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n+  data-layout-decorate=\"~{template/page}\"\n+>\n+  <head>\n     <title th:text=\"#{clients.title}\">_Clients_</title>\n-    <link rel=\"stylesheet\" th:href=\"@{/dist/css/clients-list.bundle.css}\">\n-</head>\n-<body>\n-<th:block layout:fragment=\"page\">\n-    <div class=\"col-md-12\">\n-        <main role=\"main\" property=\"mainContentOfPage\">\n-            <h1 th:text=\"#{clients.title}\">_Clients_</h1>\n-            <a id=\"add-link\" href=\"/clients/create\" th:href=\"@{/clients/create}\" th:text=\"#{clients.add}\"\n-               class=\"btn btn-sm btn-default hidden\">_Add\n-                Client_</a>\n-            <table id=\"clientsTable\" class=\"table table-striped table-hover\"\n-                   data:clients=\"@{/clients/}\"\n-                   data:url=\"@{/clients/ajax/list}\">\n-                <thead>\n-                <tr th:inline=\"text\">\n-                    <th data-data=\"id\" width=\"20\" id=\"id-header\">[[#{iridaThing.id}]]</th>\n-                    <th data-data=\"clientId\" width=\"160\" id=\"clientid-header\">[[#{client.clientid}]]</th>\n-                    <th data-data=\"grants\" data-orderable=\"false\" id=\"grants-header\">[[#{client.grant-types}]]</th>\n-                    <th data-data=\"createdDate\" id=\"created-header\">[[#{iridaThing.timestamp}]]</th>\n-                    <th data-data=\"tokens\" id=\"tokens-header\" data-orderable=\"false\">\n-                        [[#{client.details.token.active}]]\n-                    </th>\n-                </tr>\n-                </thead>\n-                <tbody id=\"client-table-body\"></tbody>\n-            </table>\n-        </main>\n+    <link rel=\"stylesheet\" th:href=\"@{/dist/css/clients-list.bundle.css}\" />\n+  </head>\n+  <body>\n+    <div layout:fragment=\"page\" id=\"client-root\" style=\"height: 100%;\">\n+      <!-- Base react component found at : /webapp/resources/js/pages/clients/listing/ClientListingPage.jsx -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI3MzY1OA=="}, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMzkyODgwOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/clients/listing/ClientsTables.jsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxOTozODoxOFrOFny-sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxNToyODozMFrOFpYOLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI3NDAzNA==", "bodyText": "This doesn't need a new tab opened.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377274034", "createdAt": "2020-02-10T19:38:18Z", "author": {"login": "tom114"}, "path": "src/main/webapp/resources/js/pages/clients/listing/ClientsTables.jsx", "diffHunk": "@@ -0,0 +1,104 @@\n+import React, { useContext } from \"react\";\n+import {\n+  PagedTable,\n+  PagedTableContext\n+} from \"../../../components/ant.design/PagedTable\";\n+import { Button, Popconfirm, Tag } from \"antd\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import { dateColumnFormat } from \"../../../components/ant.design/table-renderers\";\n+import { revokeClientTokens } from \"../../../apis/clients/clients\";\n+import { StopOutlined } from \"@ant-design/icons\";\n+\n+/**\n+ * Table for displaying a list of clients.\n+ * @return {*}\n+ * @constructor\n+ */\n+export function ClientsTable() {\n+  const { updateTable } = useContext(PagedTableContext);\n+\n+  const columns = [\n+    {\n+      title: i18n(\"iridaThing.id\"),\n+      width: 80,\n+      dataIndex: \"id\",\n+      sorter: true\n+    },\n+    {\n+      title: i18n(\"client.clientid\"),\n+      dataIndex: \"name\",\n+      ellipsis: true,\n+      sorter: true,\n+      render(text, item) {\n+        return (\n+          <a\n+            className=\"t-client-name\"\n+            target=\"_blank\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkzMjc4MQ==", "bodyText": "Updated in 2f13204", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378932781", "createdAt": "2020-02-13T15:28:30Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/clients/listing/ClientsTables.jsx", "diffHunk": "@@ -0,0 +1,104 @@\n+import React, { useContext } from \"react\";\n+import {\n+  PagedTable,\n+  PagedTableContext\n+} from \"../../../components/ant.design/PagedTable\";\n+import { Button, Popconfirm, Tag } from \"antd\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import { dateColumnFormat } from \"../../../components/ant.design/table-renderers\";\n+import { revokeClientTokens } from \"../../../apis/clients/clients\";\n+import { StopOutlined } from \"@ant-design/icons\";\n+\n+/**\n+ * Table for displaying a list of clients.\n+ * @return {*}\n+ * @constructor\n+ */\n+export function ClientsTable() {\n+  const { updateTable } = useContext(PagedTableContext);\n+\n+  const columns = [\n+    {\n+      title: i18n(\"iridaThing.id\"),\n+      width: 80,\n+      dataIndex: \"id\",\n+      sorter: true\n+    },\n+    {\n+      title: i18n(\"client.clientid\"),\n+      dataIndex: \"name\",\n+      ellipsis: true,\n+      sorter: true,\n+      render(text, item) {\n+        return (\n+          <a\n+            className=\"t-client-name\"\n+            target=\"_blank\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI3NDAzNA=="}, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzNDAyNTg2OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/components/ant.design/PagedTable/PagedTableContext.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQyMDoxMDoyNlrOFnz8Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxOToxNTo0NFrOFpgR_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI4OTgyNg==", "bodyText": "Should this be here?  Could be that something doesn't have a createdDate or should default to a different sort.  Maybe this should be set by the page.  That will make it more general.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377289826", "createdAt": "2020-02-10T20:10:26Z", "author": {"login": "tom114"}, "path": "src/main/webapp/resources/js/components/ant.design/PagedTable/PagedTableContext.js", "diffHunk": "@@ -0,0 +1,158 @@\n+import React, { useEffect, useReducer } from \"react\";\n+import { fetchPageTableUpdate } from \"../../../apis/paged-table/paged-table\";\n+import debounce from \"lodash/debounce\";\n+\n+let PagedTableContext;\n+const { Provider, Consumer } = (PagedTableContext = React.createContext());\n+\n+const initialState = {\n+  dataSource: undefined,\n+  loading: true,\n+  search: \"\",\n+  current: 1,\n+  pageSize: 10,\n+  order: \"descend\",\n+  column: \"createdDate\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA2NDgyOA==", "bodyText": "Updated in 09b40ea.  They default to created date but can be set to whatever the table needs.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379064828", "createdAt": "2020-02-13T19:15:44Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/components/ant.design/PagedTable/PagedTableContext.js", "diffHunk": "@@ -0,0 +1,158 @@\n+import React, { useEffect, useReducer } from \"react\";\n+import { fetchPageTableUpdate } from \"../../../apis/paged-table/paged-table\";\n+import debounce from \"lodash/debounce\";\n+\n+let PagedTableContext;\n+const { Provider, Consumer } = (PagedTableContext = React.createContext());\n+\n+const initialState = {\n+  dataSource: undefined,\n+  loading: true,\n+  search: \"\",\n+  current: 1,\n+  pageSize: 10,\n+  order: \"descend\",\n+  column: \"createdDate\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI4OTgyNg=="}, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzNDAzMDkzOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/clients/listing/ClientsTables.jsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQyMDoxMjowN1rOFnz_hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxOToxNzo0OFrOFpgV-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI5MDYzMA==", "bodyText": "refresh_token will also be a common one.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377290630", "createdAt": "2020-02-10T20:12:07Z", "author": {"login": "tom114"}, "path": "src/main/webapp/resources/js/pages/clients/listing/ClientsTables.jsx", "diffHunk": "@@ -0,0 +1,104 @@\n+import React, { useContext } from \"react\";\n+import {\n+  PagedTable,\n+  PagedTableContext\n+} from \"../../../components/ant.design/PagedTable\";\n+import { Button, Popconfirm, Tag } from \"antd\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import { dateColumnFormat } from \"../../../components/ant.design/table-renderers\";\n+import { revokeClientTokens } from \"../../../apis/clients/clients\";\n+import { StopOutlined } from \"@ant-design/icons\";\n+\n+/**\n+ * Table for displaying a list of clients.\n+ * @return {*}\n+ * @constructor\n+ */\n+export function ClientsTable() {\n+  const { updateTable } = useContext(PagedTableContext);\n+\n+  const columns = [\n+    {\n+      title: i18n(\"iridaThing.id\"),\n+      width: 80,\n+      dataIndex: \"id\",\n+      sorter: true\n+    },\n+    {\n+      title: i18n(\"client.clientid\"),\n+      dataIndex: \"name\",\n+      ellipsis: true,\n+      sorter: true,\n+      render(text, item) {\n+        return (\n+          <a\n+            className=\"t-client-name\"\n+            target=\"_blank\"\n+            rel=\"noreferrer noopener\"\n+            href={setBaseUrl(`clients/${item.id}`)}\n+          >\n+            {text}\n+          </a>\n+        );\n+      }\n+    },\n+    {\n+      title: i18n(\"client.grant-types\"),\n+      dataIndex: \"grants\",\n+      render(grants) {\n+        const colors = { password: \"purple\", authorization_code: \"volcano\" };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA2NTg1MA==", "bodyText": "Updated in a2a61d0", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379065850", "createdAt": "2020-02-13T19:17:48Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/clients/listing/ClientsTables.jsx", "diffHunk": "@@ -0,0 +1,104 @@\n+import React, { useContext } from \"react\";\n+import {\n+  PagedTable,\n+  PagedTableContext\n+} from \"../../../components/ant.design/PagedTable\";\n+import { Button, Popconfirm, Tag } from \"antd\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import { dateColumnFormat } from \"../../../components/ant.design/table-renderers\";\n+import { revokeClientTokens } from \"../../../apis/clients/clients\";\n+import { StopOutlined } from \"@ant-design/icons\";\n+\n+/**\n+ * Table for displaying a list of clients.\n+ * @return {*}\n+ * @constructor\n+ */\n+export function ClientsTable() {\n+  const { updateTable } = useContext(PagedTableContext);\n+\n+  const columns = [\n+    {\n+      title: i18n(\"iridaThing.id\"),\n+      width: 80,\n+      dataIndex: \"id\",\n+      sorter: true\n+    },\n+    {\n+      title: i18n(\"client.clientid\"),\n+      dataIndex: \"name\",\n+      ellipsis: true,\n+      sorter: true,\n+      render(text, item) {\n+        return (\n+          <a\n+            className=\"t-client-name\"\n+            target=\"_blank\"\n+            rel=\"noreferrer noopener\"\n+            href={setBaseUrl(`clients/${item.id}`)}\n+          >\n+            {text}\n+          </a>\n+        );\n+      }\n+    },\n+    {\n+      title: i18n(\"client.grant-types\"),\n+      dataIndex: \"grants\",\n+      render(grants) {\n+        const colors = { password: \"purple\", authorization_code: \"volcano\" };", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI5MDYzMA=="}, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MTM3NzA0OnYy", "diffSide": "RIGHT", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/models/tables/TableResponse.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxODo0NTowMVrOFo6QEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxOTo0OTo0M1rOFphXlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MTc0NQ==", "bodyText": "Should we make this a generic class instead of having the ? extends TableModel here?  That way when we're using this anywhere in java code we can know what the TableModel class is.  That might make it easier for testing too.  Come chat with me if you want more on this.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378441745", "createdAt": "2020-02-12T18:45:01Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/models/tables/TableResponse.java", "diffHunk": "@@ -1,20 +1,20 @@\n-package ca.corefacility.bioinformatics.irida.ria.web.models;\n+package ca.corefacility.bioinformatics.irida.ria.web.models.tables;\n \n import java.util.List;\n \n /**\n  * Response sent when items are requested for a table.\n  */\n public class TableResponse {\n-\tprivate List<TableModel> dataSource;\n+\tprivate List<? extends TableModel> dataSource;\n \tprivate Long total;\n \n-\tpublic TableResponse(List<TableModel> dataSource, Long total) {\n+\tpublic TableResponse(List<? extends TableModel> dataSource, Long total) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA4MjY0Ng==", "bodyText": "I think I got this figured out.  Please see 0b3345b and let me know.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379082646", "createdAt": "2020-02-13T19:49:43Z", "author": {"login": "joshsadam"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/models/tables/TableResponse.java", "diffHunk": "@@ -1,20 +1,20 @@\n-package ca.corefacility.bioinformatics.irida.ria.web.models;\n+package ca.corefacility.bioinformatics.irida.ria.web.models.tables;\n \n import java.util.List;\n \n /**\n  * Response sent when items are requested for a table.\n  */\n public class TableResponse {\n-\tprivate List<TableModel> dataSource;\n+\tprivate List<? extends TableModel> dataSource;\n \tprivate Long total;\n \n-\tpublic TableResponse(List<TableModel> dataSource, Long total) {\n+\tpublic TableResponse(List<? extends TableModel> dataSource, Long total) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MTc0NQ=="}, "originalCommit": {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MTM3ODE2OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/package.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxODo0NToyN1rOFo6Q2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMDo0MTowN1rOFo91Xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MTk0Nw==", "bodyText": "Do we still want this icons v4 in here since the rest of the ant v4 stuff is on hold?", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378441947", "createdAt": "2020-02-12T18:45:27Z", "author": {"login": "tom114"}, "path": "src/main/webapp/package.json", "diffHunk": "@@ -21,6 +21,7 @@\n     \"last 2 Opera versions\"\n   ],\n   \"dependencies\": {\n+    \"@ant-design/icons\": \"^4.0.0-rc.0\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUwMDQ0Nw==", "bodyText": "Yes, this is actually the v4 icon pack", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378500447", "createdAt": "2020-02-12T20:41:07Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/package.json", "diffHunk": "@@ -21,6 +21,7 @@\n     \"last 2 Opera versions\"\n   ],\n   \"dependencies\": {\n+    \"@ant-design/icons\": \"^4.0.0-rc.0\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MTk0Nw=="}, "originalCommit": {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MTM4MDQ4OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/apis/clients/clients.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxODo0NjowOVrOFo6SXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMDo0Mjo0MlrOFo94Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MjMzNQ==", "bodyText": "Is this URL going to work in a context path?", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378442335", "createdAt": "2020-02-12T18:46:09Z", "author": {"login": "tom114"}, "path": "src/main/webapp/resources/js/apis/clients/clients.js", "diffHunk": "@@ -0,0 +1,10 @@\n+import axios from \"axios\";\n+\n+/**\n+ * Revoke all tokens for a given client by identifier.\n+ * @param {number} id for the client\n+ * @return {Promise<AxiosResponse<T>>}\n+ */\n+export async function revokeClientTokens(id) {\n+  return await axios.put(`clients/ajax/revoke?id=${id}`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUwMTE1NQ==", "bodyText": "Yes, it gets handled automatically by as the request leaves.   You can find the code for that on line 71 of app.js.  Developers do not need to set the context path now (but it does not fail if they do).", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378501155", "createdAt": "2020-02-12T20:42:42Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/apis/clients/clients.js", "diffHunk": "@@ -0,0 +1,10 @@\n+import axios from \"axios\";\n+\n+/**\n+ * Revoke all tokens for a given client by identifier.\n+ * @param {number} id for the client\n+ * @return {Promise<AxiosResponse<T>>}\n+ */\n+export async function revokeClientTokens(id) {\n+  return await axios.put(`clients/ajax/revoke?id=${id}`);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MjMzNQ=="}, "originalCommit": {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MTM4MzU2OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/clients/listing/ClientListingPage.jsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxODo0NzowOFrOFo6UUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMDo0MzowMFrOFo94ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MjgzNA==", "bodyText": "Same in this class, will these URLs work in a context path?", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378442834", "createdAt": "2020-02-12T18:47:08Z", "author": {"login": "tom114"}, "path": "src/main/webapp/resources/js/pages/clients/listing/ClientListingPage.jsx", "diffHunk": "@@ -0,0 +1,33 @@\n+import React from \"react\";\n+import { render } from \"react-dom\";\n+import { PageWrapper } from \"../../../components/page/PageWrapper\";\n+import { PagedTableProvider } from \"../../../components/ant.design/PagedTable\";\n+import { ClientsTable } from \"./ClientsTables\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import { Button } from \"antd\";\n+import { PlusCircleTwoTone } from \"@ant-design/icons\";\n+\n+/**\n+ * Page for displaying the list of all clients.\n+ * @return {*}\n+ * @constructor\n+ */\n+function ClientListingPage() {\n+  return (\n+    <PageWrapper\n+      title={i18n(\"clients.title\")}\n+      headerExtras={\n+        <Button type={\"primary\"} href={setBaseUrl(`clients/create`)}>\n+          <PlusCircleTwoTone />\n+          {i18n(\"clients.add\")}\n+        </Button>\n+      }\n+    >\n+      <PagedTableProvider url={setBaseUrl(\"clients/ajax/list\")}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUwMTMwNg==", "bodyText": "Same as above", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378501306", "createdAt": "2020-02-12T20:43:00Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/clients/listing/ClientListingPage.jsx", "diffHunk": "@@ -0,0 +1,33 @@\n+import React from \"react\";\n+import { render } from \"react-dom\";\n+import { PageWrapper } from \"../../../components/page/PageWrapper\";\n+import { PagedTableProvider } from \"../../../components/ant.design/PagedTable\";\n+import { ClientsTable } from \"./ClientsTables\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import { Button } from \"antd\";\n+import { PlusCircleTwoTone } from \"@ant-design/icons\";\n+\n+/**\n+ * Page for displaying the list of all clients.\n+ * @return {*}\n+ * @constructor\n+ */\n+function ClientListingPage() {\n+  return (\n+    <PageWrapper\n+      title={i18n(\"clients.title\")}\n+      headerExtras={\n+        <Button type={\"primary\"} href={setBaseUrl(`clients/create`)}>\n+          <PlusCircleTwoTone />\n+          {i18n(\"clients.add\")}\n+        </Button>\n+      }\n+    >\n+      <PagedTableProvider url={setBaseUrl(\"clients/ajax/list\")}>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MjgzNA=="}, "originalCommit": {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0ODM5MTI4OnYy", "diffSide": "RIGHT", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/sequencingRuns/SequencingRunAjaxController.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxNzoxNDoyN1rOFp9xjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNDoyMTowOFrOFrEH-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU0ODA0NA==", "bodyText": "This should be parameterized <...>", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379548044", "createdAt": "2020-02-14T17:14:27Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/sequencingRuns/SequencingRunAjaxController.java", "diffHunk": "@@ -47,11 +47,12 @@ public TableResponse listSequencingRuns(@RequestBody SequencingRunsListRequest s\n \t\tPage<SequencingRun> list = sequencingRunService.list(sequencingRunsListRequest.getCurrent(),\n \t\t\t\tsequencingRunsListRequest.getPageSize(), sequencingRunsListRequest.getSort());\n \n-\t\tList<TableModel> runs = list.getContent()\n-\t\t\t\t.stream()\n-\t\t\t\t.map(s -> new SequencingRunModel(s, messageSource.getMessage(\"sequencingruns.status.\" + s.getUploadStatus()\n-\t\t\t\t\t\t.toString(), new Object[] {}, locale)))\n-\t\t\t\t.collect(Collectors.toList());\n+\t\tList<TableModel> runs = new ArrayList<>();\n+\t\tfor (SequencingRun run : list.getContent()) {\n+\t\t\truns.add(new SequencingRunModel(run, messageSource.getMessage(\n+\t\t\t\t\t\"sequencingruns.status.\" + run.getUploadStatus()\n+\t\t\t\t\t\t\t.toString(), new Object[] {}, locale)));\n+\t\t}\n \n \t\treturn new TableResponse(runs, list.getTotalElements());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "401c7b79cd22a9e00b3ed61bd3d7f0a71212a567"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU0ODExMQ==", "bodyText": "Along with the method signature.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379548111", "createdAt": "2020-02-14T17:14:36Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/sequencingRuns/SequencingRunAjaxController.java", "diffHunk": "@@ -47,11 +47,12 @@ public TableResponse listSequencingRuns(@RequestBody SequencingRunsListRequest s\n \t\tPage<SequencingRun> list = sequencingRunService.list(sequencingRunsListRequest.getCurrent(),\n \t\t\t\tsequencingRunsListRequest.getPageSize(), sequencingRunsListRequest.getSort());\n \n-\t\tList<TableModel> runs = list.getContent()\n-\t\t\t\t.stream()\n-\t\t\t\t.map(s -> new SequencingRunModel(s, messageSource.getMessage(\"sequencingruns.status.\" + s.getUploadStatus()\n-\t\t\t\t\t\t.toString(), new Object[] {}, locale)))\n-\t\t\t\t.collect(Collectors.toList());\n+\t\tList<TableModel> runs = new ArrayList<>();\n+\t\tfor (SequencingRun run : list.getContent()) {\n+\t\t\truns.add(new SequencingRunModel(run, messageSource.getMessage(\n+\t\t\t\t\t\"sequencingruns.status.\" + run.getUploadStatus()\n+\t\t\t\t\t\t\t.toString(), new Object[] {}, locale)));\n+\t\t}\n \n \t\treturn new TableResponse(runs, list.getTotalElements());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU0ODA0NA=="}, "originalCommit": {"oid": "401c7b79cd22a9e00b3ed61bd3d7f0a71212a567"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDcwMDY2Nw==", "bodyText": "Fixed in f1b356d", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r380700667", "createdAt": "2020-02-18T14:21:08Z", "author": {"login": "joshsadam"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/sequencingRuns/SequencingRunAjaxController.java", "diffHunk": "@@ -47,11 +47,12 @@ public TableResponse listSequencingRuns(@RequestBody SequencingRunsListRequest s\n \t\tPage<SequencingRun> list = sequencingRunService.list(sequencingRunsListRequest.getCurrent(),\n \t\t\t\tsequencingRunsListRequest.getPageSize(), sequencingRunsListRequest.getSort());\n \n-\t\tList<TableModel> runs = list.getContent()\n-\t\t\t\t.stream()\n-\t\t\t\t.map(s -> new SequencingRunModel(s, messageSource.getMessage(\"sequencingruns.status.\" + s.getUploadStatus()\n-\t\t\t\t\t\t.toString(), new Object[] {}, locale)))\n-\t\t\t\t.collect(Collectors.toList());\n+\t\tList<TableModel> runs = new ArrayList<>();\n+\t\tfor (SequencingRun run : list.getContent()) {\n+\t\t\truns.add(new SequencingRunModel(run, messageSource.getMessage(\n+\t\t\t\t\t\"sequencingruns.status.\" + run.getUploadStatus()\n+\t\t\t\t\t\t\t.toString(), new Object[] {}, locale)));\n+\t\t}\n \n \t\treturn new TableResponse(runs, list.getTotalElements());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU0ODA0NA=="}, "originalCommit": {"oid": "401c7b79cd22a9e00b3ed61bd3d7f0a71212a567"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 916, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}