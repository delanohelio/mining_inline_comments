{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0NzA4OTcy", "number": 763, "title": "Update create sample in project", "bodyText": "Description of changes\nWhat did you change in this pull request?  Provide a description of files changed, user interactions changed, etc.  Include how to test your changes.\nRelated issue\nLink to the GitHub issue this pull request addresses using the #issuenum format.  If it completes an issue, use Fixes #issuenum to automatically close the issue.\nChecklist\nThings for the developer to confirm they've done before the PR should be accepted:\n\n CHANGELOG.md (and UPGRADING.md if necessary) updated with information for new change.\n Tests added (or description of how to test) for any new features.\n User documentation updated for UI or technical changes.", "createdAt": "2020-07-21T19:44:54Z", "url": "https://github.com/phac-nml/irida/pull/763", "merged": true, "mergeCommit": {"oid": "cf6a9088c391afb942cdf08716a5977e9cb94949"}, "closed": true, "closedAt": "2020-08-06T19:22:36Z", "author": {"login": "joshsadam"}, "timelineItems": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3K56AgH2gAyNDU0NzA4OTcyOjBiNWI1NDM1OTMzYjdiODQ5NzVjNTk2NGE5MGI1ZDFkMDg2OGMxZmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8U5eWgFqTQ2MjgxMDE5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0b5b5435933b7b84975c5964a90b5d1d0868c1fe", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/0b5b5435933b7b84975c5964a90b5d1d0868c1fe", "committedDate": "2020-07-21T18:54:13Z", "message": ":construction: Initial layout work."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a98cccc962943fb2a79908b3f3e28d4e89b4415", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/6a98cccc962943fb2a79908b3f3e28d4e89b4415", "committedDate": "2020-07-22T19:47:06Z", "message": ":construction: Working on validating states."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d41dcf9e588e8f26d71e33867077018595fff017", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/d41dcf9e588e8f26d71e33867077018595fff017", "committedDate": "2020-07-23T19:36:10Z", "message": ":construction: Working modal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "430926e510223c90cfba3bf664acc9cb17ff47d6", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/430926e510223c90cfba3bf664acc9cb17ff47d6", "committedDate": "2020-07-24T11:40:45Z", "message": ":construction: Removed old code from previous implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5227824441f9f96e0af911b3e0b3c76ca1093e4d", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/5227824441f9f96e0af911b3e0b3c76ca1093e4d", "committedDate": "2020-07-24T12:03:12Z", "message": ":construction: Don't render button on remote projects."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "688c1996a70a80d3fdda058a72a7d198120622ae", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/688c1996a70a80d3fdda058a72a7d198120622ae", "committedDate": "2020-07-24T13:01:04Z", "message": ":construction: updating api for project samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25443cd0a7efeb573ca7594c36d26120d2126180", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/25443cd0a7efeb573ca7594c36d26120d2126180", "committedDate": "2020-07-24T16:05:54Z", "message": ":construction: more code cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffe1a5afba22c51b25bf9fdbb8d6786f39f1f249", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/ffe1a5afba22c51b25bf9fdbb8d6786f39f1f249", "committedDate": "2020-07-24T16:52:31Z", "message": ":globe_with_meridians: Updating internationalization"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bec1563ff93cca5efe2a5e59f869fc52ec704fe", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/3bec1563ff93cca5efe2a5e59f869fc52ec704fe", "committedDate": "2020-07-24T19:44:51Z", "message": ":construction: Code cleanup and documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5752c8d7474dd940b5c114e72a8db000f77ae666", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/5752c8d7474dd940b5c114e72a8db000f77ae666", "committedDate": "2020-07-27T12:11:57Z", "message": ":construction: Disable the submit button if the name is not valid."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7a7904f702e1e1cf8b0c3844ca8d6808ed1b872", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/e7a7904f702e1e1cf8b0c3844ca8d6808ed1b872", "committedDate": "2020-07-27T15:24:55Z", "message": ":construction: Initial test development."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58dc6a331881447b472275d89a5b6d419793c43e", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/58dc6a331881447b472275d89a5b6d419793c43e", "committedDate": "2020-07-28T15:44:40Z", "message": ":white_check_mark: Updated test to match new sample creation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "328706c4cfc59f27ec3c314629fb3708ec5c230d", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/328706c4cfc59f27ec3c314629fb3708ec5c230d", "committedDate": "2020-07-28T15:46:01Z", "message": ":fire: Removed old testing files."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89918a38f78345e7e018c901a35ed578ebcedc9c", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/89918a38f78345e7e018c901a35ed578ebcedc9c", "committedDate": "2020-07-28T15:55:09Z", "message": ":memo: Updated JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e089d3dcee249cea90019c9364fc60d8f39ddf0", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/8e089d3dcee249cea90019c9364fc60d8f39ddf0", "committedDate": "2020-07-28T18:10:41Z", "message": ":memo: Update JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5c809ef630a4bb861bf496ec69454f3b35410c6", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/b5c809ef630a4bb861bf496ec69454f3b35410c6", "committedDate": "2020-07-28T18:17:19Z", "message": ":memo: Update JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e677c6c93c8c588febbbd97ed627cb380556a61", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/8e677c6c93c8c588febbbd97ed627cb380556a61", "committedDate": "2020-07-28T18:27:20Z", "message": ":memo: Update JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01b1e39c0f590e69e85860d5ba8080fc070e9504", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/01b1e39c0f590e69e85860d5ba8080fc070e9504", "committedDate": "2020-07-29T14:23:02Z", "message": ":memo: Added gif of adding a sample"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e90b9cea25eff66c831782b6cf7ce548761a839", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/1e90b9cea25eff66c831782b6cf7ce548761a839", "committedDate": "2020-07-29T14:30:24Z", "message": ":memo: Updated to use a gif to make instruction simpler."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2a1d09d4a15234661b2a401c1317b459c4da750", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/a2a1d09d4a15234661b2a401c1317b459c4da750", "committedDate": "2020-07-29T16:23:21Z", "message": ":construction: Fixed issue with formatting URL search params."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ca53c579049e65e59dc1383619757e30f4e3911", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/1ca53c579049e65e59dc1383619757e30f4e3911", "committedDate": "2020-07-29T19:34:07Z", "message": ":memo: Updated documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "323a2cf9cc0e2b087336ec6820098b43fc2ccb2d", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/323a2cf9cc0e2b087336ec6820098b43fc2ccb2d", "committedDate": "2020-07-29T19:54:08Z", "message": ":bulb: Updated CHANGELOG.md"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3OTA4OTI0", "url": "https://github.com/phac-nml/irida/pull/763#pullrequestreview-457908924", "createdAt": "2020-07-29T21:24:35Z", "commit": {"oid": "323a2cf9cc0e2b087336ec6820098b43fc2ccb2d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQyMToyNDozNVrOG5KwMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQyMTozNDo0MVrOG5LDxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5ODE5Mg==", "bodyText": "Typo: mmodal", "url": "https://github.com/phac-nml/irida/pull/763#discussion_r462598192", "createdAt": "2020-07-29T21:24:35Z", "author": {"login": "deepsidhu85"}, "path": "doc/_includes/tutorials/common/creating-a-sample.md", "diffHunk": "@@ -2,14 +2,8 @@ You can add a new sample to the project if you have the project Manager role on\n \n ![New sample button]({{ site.baseurl }}/images/tutorials/common/samples/add-sample-button.png)\n \n-Clicking this button will take you to the Create New Sample page.  When creating a sample, you must define the sample name (only upper and lowercase letters, numbers, and the special characters <code>!, @, #, $, %, _, -</code>, and <code>`</code> are allowed) and optionally choose an organism for the sample:\n+Clicking this button will open the Create New Sample mmodal dialog.  When creating a sample, you must define the sample name (only upper and lowercase letters, numbers, and the special characters <code>!, @, #, $, %, _, -</code>, and <code>`</code> are allowed) and optionally choose an organism for the sample:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "323a2cf9cc0e2b087336ec6820098b43fc2ccb2d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYwMzAzNg==", "bodyText": "This needs to be updated. Currently for example if we set the name to SAM it still displays this error but it has 3 characters", "url": "https://github.com/phac-nml/irida/pull/763#discussion_r462603036", "createdAt": "2020-07-29T21:34:20Z", "author": {"login": "deepsidhu85"}, "path": "src/main/resources/i18n/messages.properties", "diffHunk": "@@ -1968,6 +1968,18 @@ SampleDetails.description=Description\n SampleDetails.organism=Organism\n SampleDetails.createdDate=Created\n SampleDetails.modifiedDate=Modified\n+\n+# ========================================================================================== #\n+# ADD SAMPLE REACT COMPONENT                                                                 #\n+# ========================================================================================== #\n+AddSample.title=Create New Sample in Project\n+AddSample.name=Sample Name\n+AddSample.organism=Organism\n+AddSample.submit=Create Sample\n+server.AddSample.error.length=Sample name must have at least 3 characters.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "323a2cf9cc0e2b087336ec6820098b43fc2ccb2d"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYwMzIwNg==", "bodyText": "Function comment", "url": "https://github.com/phac-nml/irida/pull/763#discussion_r462603206", "createdAt": "2020-07-29T21:34:41Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/apis/projects/samples.js", "diffHunk": "@@ -0,0 +1,27 @@\n+import { setBaseUrl } from \"../../utilities/url-utilities\";\n+\n+const URL = setBaseUrl(`/ajax/projects/${window.project.id}/samples`);\n+\n+/**\n+ * Server side validation of a new sample name.\n+ * @param {string} name - sample name to validate\n+ * @returns {Promise<any>}\n+ */\n+export async function validateSampleName(name) {\n+  const params = new URLSearchParams();\n+  params.append(\"name\", name.trim());\n+  const response = await fetch(`${URL}/add-sample/validate?${params}`);\n+  return response.json();\n+}\n+\n+export async function createNewSample({ name, organism }) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "323a2cf9cc0e2b087336ec6820098b43fc2ccb2d"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e3f14a1dd4531bd26770761f537588e6690254e", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/9e3f14a1dd4531bd26770761f537588e6690254e", "committedDate": "2020-07-30T11:36:55Z", "message": ":construction: Fixed missed message for number of characters in sample name."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df1dd88a0c5918862eca7a53fb08ee99760dfc34", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/df1dd88a0c5918862eca7a53fb08ee99760dfc34", "committedDate": "2020-07-30T11:37:51Z", "message": ":memo: Fixed typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f9e62cb7736e05c6c8547985693dc785a9d8eaa", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/0f9e62cb7736e05c6c8547985693dc785a9d8eaa", "committedDate": "2020-07-30T11:39:37Z", "message": ":bulb: Added JSDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e829d6b184bd4dbed6f865b4af7fec1cb1215f4", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/4e829d6b184bd4dbed6f865b4af7fec1cb1215f4", "committedDate": "2020-07-31T19:31:12Z", "message": "Merge branch 'development' into refactor-add-sample-page\n\n# Conflicts:\n#\tCHANGELOG.md\n#\tsrc/main/webapp/yarn.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b35f24d6e7ed6db85abf68df280346d100f8918e", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/b35f24d6e7ed6db85abf68df280346d100f8918e", "committedDate": "2020-08-04T12:10:07Z", "message": ":construction: Updated yarn.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe899990c0ed85bc497cbda44f147b2ca488e59e", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/fe899990c0ed85bc497cbda44f147b2ca488e59e", "committedDate": "2020-08-04T19:40:03Z", "message": ":white_check_mark: Fixed test if the user cannot manage project"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2368627b263de066b2d204b007a00228baeac25", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/b2368627b263de066b2d204b007a00228baeac25", "committedDate": "2020-08-05T10:53:46Z", "message": ":white_check_mark: Added old validation method back"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMDQ2MTk2", "url": "https://github.com/phac-nml/irida/pull/763#pullrequestreview-462046196", "createdAt": "2020-08-05T21:45:13Z", "commit": {"oid": "b2368627b263de066b2d204b007a00228baeac25"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMTo0NToxM1rOG8bvOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMTo0NToxM1rOG8bvOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAyMjIwMA==", "bodyText": "What is this being used for exactly? Since there are no methods for a sub class to extend we can probably get rid of it", "url": "https://github.com/phac-nml/irida/pull/763#discussion_r466022200", "createdAt": "2020-08-05T21:45:13Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/ajax/dto/CreateSampleResponse.java", "diffHunk": "@@ -0,0 +1,7 @@\n+package ca.corefacility.bioinformatics.irida.ria.web.ajax.dto;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2368627b263de066b2d204b007a00228baeac25"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyODEwMTk4", "url": "https://github.com/phac-nml/irida/pull/763#pullrequestreview-462810198", "createdAt": "2020-08-06T19:22:25Z", "commit": {"oid": "b2368627b263de066b2d204b007a00228baeac25"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 62, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}