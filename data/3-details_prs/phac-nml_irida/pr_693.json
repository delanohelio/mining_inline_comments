{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4Nzg5ODUw", "number": 693, "title": "Invoke workflow", "bodyText": "Description of changes\nUpdate deprecated runWorkflow to invokeWorkflow blend4j calls.\nSwitched to packaged jar instead of pulling blend4j from maven repo\nRelated issue\nFixes #351\nChecklist\nThings for the developer to confirm they've done before the PR should be accepted:\n\n CHANGELOG.md (and UPGRADING.md if necessary) updated with information for new change.\n Tests added (or description of how to test) for any new features.\n User documentation updated for UI or technical changes.", "createdAt": "2020-05-15T20:21:27Z", "url": "https://github.com/phac-nml/irida/pull/693", "merged": true, "mergeCommit": {"oid": "dd3e1a3c65b974c552bf94919c5ae59a23723f5c"}, "closed": true, "closedAt": "2020-10-23T17:00:34Z", "author": {"login": "JeffreyThiessen"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABbyA4BaAH2gAyNDE4Nzg5ODUwOjNlZjFhOTRiZTFhODVjMjFkMTlmZTM5Y2Q0YzMyNzU5ZjEyODQ0NTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVZngCgFqTUxNTg0ODA3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3ef1a94be1a85c21d19fe39cd4c32759f1284453", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/3ef1a94be1a85c21d19fe39cd4c32759f1284453", "committedDate": "2019-12-19T22:12:20Z", "message": "changed from runWorkflow to invokeWorkflow in blend4j"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b191810c4ab228fffbfdb0aef19e4d27dbf25e0", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/9b191810c4ab228fffbfdb0aef19e4d27dbf25e0", "committedDate": "2019-12-23T21:18:01Z", "message": "change test cases to use invoke workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "673902533e97a71990d57117b602440cfc984433", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/673902533e97a71990d57117b602440cfc984433", "committedDate": "2020-01-23T21:17:27Z", "message": "update workflowsClient.importWorkflow calls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "390c5dd4c0619290c1d9d9af3ce8e4672165dbc1", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/390c5dd4c0619290c1d9d9af3ce8e4672165dbc1", "committedDate": "2020-05-01T20:34:31Z", "message": "Merge branch 'development' of github.com:phac-nml/irida into invoke_workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b52a7e5d6644e627cb869d3dc562571f50ff121b", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/b52a7e5d6644e627cb869d3dc562571f50ff121b", "committedDate": "2020-05-08T21:32:35Z", "message": "Merge branch 'development' of https://github.com/phac-nml/irida into invoke_workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46f08616094b8fbc759f44c2a92ef67c91ee3304", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/46f08616094b8fbc759f44c2a92ef67c91ee3304", "committedDate": "2020-05-15T17:42:11Z", "message": "Merge branch 'development' of https://github.com/phac-nml/irida into invoke_workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6aaade5070ee5e27891d8a960f28af3ae0dc7316", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/6aaade5070ee5e27891d8a960f28af3ae0dc7316", "committedDate": "2020-05-15T19:30:43Z", "message": "switched to installing blend4j via jar file instead of maven repo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6af8e5465830a4b78ac856a0fe2db4472190b996", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/6af8e5465830a4b78ac856a0fe2db4472190b996", "committedDate": "2020-05-15T20:21:38Z", "message": "update changelog"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMDExMzQ1", "url": "https://github.com/phac-nml/irida/pull/693#pullrequestreview-413011345", "createdAt": "2020-05-15T23:04:22Z", "commit": {"oid": "6af8e5465830a4b78ac856a0fe2db4472190b996"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a187451e3025cfddd0386f87891e201faa3b6b6", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/3a187451e3025cfddd0386f87891e201faa3b6b6", "committedDate": "2020-05-20T19:49:25Z", "message": "fixed incorrect blend4j runWorkflow calls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ac309534ba4f1ecdcecaf0817f19fdffd5b2eb4", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/6ac309534ba4f1ecdcecaf0817f19fdffd5b2eb4", "committedDate": "2020-05-27T15:44:56Z", "message": "fixed error where workflow status could get set to error before it's scheduled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69344145bc7b196b302caa116801dfccd6f3a5ca", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/69344145bc7b196b302caa116801dfccd6f3a5ca", "committedDate": "2020-05-27T15:59:10Z", "message": "Merge branch 'development' of https://github.com/phac-nml/irida into invoke_workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e0748d3b28c3ee546b0ac3497d82eae49a624fb", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/2e0748d3b28c3ee546b0ac3497d82eae49a624fb", "committedDate": "2020-05-27T20:27:40Z", "message": "remove unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8838be026fb34d7edff9c7612f02d235b02c1461", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/8838be026fb34d7edff9c7612f02d235b02c1461", "committedDate": "2020-05-28T18:55:14Z", "message": "Merge branch 'development' of https://github.com/phac-nml/irida into invoke_workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1cc37b68658d6863c7813b4147e753705a16287", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/d1cc37b68658d6863c7813b4147e753705a16287", "committedDate": "2020-05-29T16:50:01Z", "message": "move method to AnalysisWorkspaceService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4f3456c4bae12f62e57a40a63e14a9e65ed774b", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/f4f3456c4bae12f62e57a40a63e14a9e65ed774b", "committedDate": "2020-05-29T19:14:46Z", "message": "fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ebbf8e1cedc29b8507dd6271503792bea1eac89", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/0ebbf8e1cedc29b8507dd6271503792bea1eac89", "committedDate": "2020-05-29T20:58:01Z", "message": "added test case for OK galaxyWorkflowState no files exist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27b26e2d3f37428701a3ce98e4b741670a2bb80b", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/27b26e2d3f37428701a3ce98e4b741670a2bb80b", "committedDate": "2020-06-01T18:27:19Z", "message": "update changelog.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bda8c844a41d3516a9cbe45bb39affd75b66a8a8", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/bda8c844a41d3516a9cbe45bb39affd75b66a8a8", "committedDate": "2020-10-15T16:18:38Z", "message": "Merge branch 'development' of https://github.com/phac-nml/irida into invoke_workflow"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5ODg5NzE2", "url": "https://github.com/phac-nml/irida/pull/693#pullrequestreview-509889716", "createdAt": "2020-10-15T23:47:07Z", "commit": {"oid": "bda8c844a41d3516a9cbe45bb39affd75b66a8a8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMzo0NzowN1rOHifQwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwMzowNToyMFrOHikuXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkyNTgyNQ==", "bodyText": "It doesn't look like GalaxyHistoriesService or IridaWorkflowsService is used anywhere in this file. Was it maybe used previously and now that code has been removed? Could these Autowired components be removed if they aren't used?", "url": "https://github.com/phac-nml/irida/pull/693#discussion_r505925825", "createdAt": "2020-10-15T23:47:07Z", "author": {"login": "apetkau"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/config/services/scheduled/AnalysisScheduledTaskConfig.java", "diffHunk": "@@ -46,6 +49,15 @@\n \t@Autowired\n \tprivate EmailController emailController;\n \n+\t@Autowired\n+\tprivate IridaWorkflowsService workflowsService;\n+\n+\t@Autowired\n+\tprivate GalaxyHistoriesService galaxyHistoriesService;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bda8c844a41d3516a9cbe45bb39affd75b66a8a8"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjAxNTMyNA==", "bodyText": "Just to make sure I understand, the removal of checking for output files existence is because we switched to invokeWorkflow which returns right away (instead of waiting until the workflow is finished)?", "url": "https://github.com/phac-nml/irida/pull/693#discussion_r506015324", "createdAt": "2020-10-16T03:05:20Z", "author": {"login": "apetkau"}, "path": "src/test/java/ca/corefacility/bioinformatics/irida/pipeline/upload/galaxy/integration/GalaxyWorkflowsIT.java", "diffHunk": "@@ -350,15 +343,6 @@ public void testExecuteCollectionsPairedList() throws ExecutionManagerException\n \t\tHistoryDetails historyDetails = historiesClient.showHistory(workflowOutput.getHistoryId());\n \t\tassertNotNull(historyDetails);\n \t\t\n-\t\t// outputs should exist", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bda8c844a41d3516a9cbe45bb39affd75b66a8a8"}, "originalPosition": 64}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "284dc1168169f38ad78c2de2201acbf37a46687e", "author": {"user": {"login": "JeffreyThiessen", "name": "Jeffrey Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/284dc1168169f38ad78c2de2201acbf37a46687e", "committedDate": "2020-10-22T20:04:43Z", "message": "cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1ODQ4MDcz", "url": "https://github.com/phac-nml/irida/pull/693#pullrequestreview-515848073", "createdAt": "2020-10-23T17:00:25Z", "commit": {"oid": "284dc1168169f38ad78c2de2201acbf37a46687e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 254, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}