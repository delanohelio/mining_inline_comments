{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2MjA3OTAw", "number": 853, "title": "Announcements upgrade backend", "bodyText": "Description of changes\nChanges to announcements request, controller and service\nRelated issue\nLink to the GitHub issue this pull request addresses using the #issuenum format.  If it completes an issue, use Fixes #issuenum to automatically close the issue.\nChecklist\nThings for the developer to confirm they've done before the PR should be accepted:\n\n CHANGELOG.md (and UPGRADING.md if necessary) updated with information for new change.\n Tests added (or description of how to test) for any new features.\n User documentation updated for UI or technical changes.", "createdAt": "2020-11-05T17:04:24Z", "url": "https://github.com/phac-nml/irida/pull/853", "merged": true, "mergeCommit": {"oid": "627ba2e5bdc07340f09cc254ebc48db7f9239092"}, "closed": true, "closedAt": "2020-11-12T13:54:17Z", "author": {"login": "ksierks"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZT6opgH2gAyNTE2MjA3OTAwOjA5YWMxMmE1Y2UxNmYzMzc2MDQ1NzZiMTU3N2ZlNDk3ZTNlZDcwOTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbMTMcgFqTUyNzQwNDczNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "09ac12a5ce16f337604576b1577fe497e3ed7092", "author": {"user": {"login": "ksierks", "name": "Katherine Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/09ac12a5ce16f337604576b1577fe497e3ed7092", "committedDate": "2020-11-04T20:37:35Z", "message": "starting to update the announcements request, service, and controller"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a2506e4f89ac2143ca5ca549ddffd766483aada", "author": {"user": {"login": "ksierks", "name": "Katherine Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/4a2506e4f89ac2143ca5ca549ddffd766483aada", "committedDate": "2020-11-05T16:50:43Z", "message": "working on tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59b7c2a4668b7f7ab70292c5963ce356aa000600", "author": {"user": {"login": "ksierks", "name": "Katherine Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/59b7c2a4668b7f7ab70292c5963ce356aa000600", "committedDate": "2020-11-05T19:46:27Z", "message": "adding title placeholder"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NTYzMDky", "url": "https://github.com/phac-nml/irida/pull/853#pullrequestreview-526563092", "createdAt": "2020-11-09T19:00:19Z", "commit": {"oid": "59b7c2a4668b7f7ab70292c5963ce356aa000600"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxOTowMDoxOVrOHv9ETg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxOTowNDoxMFrOHv9RWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA0NTY0Ng==", "bodyText": "Shouldn't \"title placeholder\" be replaced with announcementRequest.getTitle()?", "url": "https://github.com/phac-nml/irida/pull/853#discussion_r520045646", "createdAt": "2020-11-09T19:00:19Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIAnnouncementsService.java", "diffHunk": "@@ -68,7 +68,7 @@ public UIAnnouncementsService(AnnouncementService announcementService, UserServi\n \t */\n \tpublic void createNewAnnouncement(@RequestBody AnnouncementRequest announcementRequest, Principal principal) {\n \t\tUser user = userService.getUserByUsername(principal.getName());\n-\t\tAnnouncement announcement = new Announcement(announcementRequest.getMessage(), user);\n+\t\tAnnouncement announcement = new Announcement(\"title placeholder\", announcementRequest.getMessage(), false, user);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59b7c2a4668b7f7ab70292c5963ce356aa000600"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA0NjY3MQ==", "bodyText": "Something seems a little weird with the formatting. Do you have intellij setup to use the irida style xml?", "url": "https://github.com/phac-nml/irida/pull/853#discussion_r520046671", "createdAt": "2020-11-09T19:01:45Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/announcements/AnnouncementsController.java", "diffHunk": "@@ -129,19 +129,27 @@ public String getControlCentreAdminPage(final Model model) {\n      *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59b7c2a4668b7f7ab70292c5963ce356aa000600"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA0ODk4Ng==", "bodyText": "For this line and similar below. Change the first \"This is a message\" in new Announcement to \"This is a message title\" since that is what is being set for that argument", "url": "https://github.com/phac-nml/irida/pull/853#discussion_r520048986", "createdAt": "2020-11-09T19:04:10Z", "author": {"login": "deepsidhu85"}, "path": "src/test/java/ca/corefacility/bioinformatics/irida/service/impl/integration/AnnouncementServiceImplIT.java", "diffHunk": "@@ -65,7 +65,7 @@\n     public void testCreateAnnouncementAsAdmin() {\n         final Authentication auth = SecurityContextHolder.getContext().getAuthentication();\n         final User user = userService.getUserByUsername(auth.getName());\n-        Announcement an = new Announcement(\"This is a message\", user);\n+        Announcement an = new Announcement(\"This is a message\", \"This is a message\", false, user);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59b7c2a4668b7f7ab70292c5963ce356aa000600"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0780ca71fa8d9c34a5fec1207e5b6b770f58e24", "author": {"user": {"login": "ksierks", "name": "Katherine Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/f0780ca71fa8d9c34a5fec1207e5b6b770f58e24", "committedDate": "2020-11-10T13:33:43Z", "message": "modifying the title name when creating a new announcement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7e3c83ac6ef44b1e4f97b68f13ac9ada603a3c0", "author": {"user": {"login": "ksierks", "name": "Katherine Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/b7e3c83ac6ef44b1e4f97b68f13ac9ada603a3c0", "committedDate": "2020-11-10T14:39:11Z", "message": "fixed formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3b6c93640e43914b621c1edc043e65525a8c017", "author": {"user": {"login": "ksierks", "name": "Katherine Thiessen"}}, "url": "https://github.com/phac-nml/irida/commit/f3b6c93640e43914b621c1edc043e65525a8c017", "committedDate": "2020-11-10T14:57:41Z", "message": "reverting preemptively removing the deprecated constructor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NDA0NzM3", "url": "https://github.com/phac-nml/irida/pull/853#pullrequestreview-527404737", "createdAt": "2020-11-10T16:50:59Z", "commit": {"oid": "f3b6c93640e43914b621c1edc043e65525a8c017"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4945, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}