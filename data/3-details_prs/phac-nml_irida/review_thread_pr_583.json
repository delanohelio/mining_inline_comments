{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3Njk4MzY0", "number": 583, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDoxMTo1NFrODm1q7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDoyMToxNVrODm125Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMDUxODIxOnYy", "diffSide": "RIGHT", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/oauth/RemoteAPIController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDoxMTo1NFrOF0fPkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMzowNzoxOVrOF02C7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4MjE2MA==", "bodyText": "Typo in RemoateAPIAjaxController", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390582160", "createdAt": "2020-03-10T20:11:54Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/oauth/RemoteAPIController.java", "diffHunk": "@@ -302,7 +222,17 @@ public String checkApiStatus(@PathVariable Long apiId) {\n \t */\n \t@RequestMapping(\"/status/web/{apiId}\")\n \tpublic String checkWebApiStatus(@PathVariable Long apiId) {\n-\t\tString status = checkApiStatus(apiId);\n+\t\t// TODO: This is to be removed when remote api details page is refactored\n+\t\t//       Use similar functionality in RemoateAPIAjaxController.\n+\t\tRemoteAPI api = remoteAPIService.read(apiId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 190}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk1NTc1OQ==", "bodyText": "Typo fixed in d5fc6ce", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390955759", "createdAt": "2020-03-11T13:07:19Z", "author": {"login": "joshsadam"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/oauth/RemoteAPIController.java", "diffHunk": "@@ -302,7 +222,17 @@ public String checkApiStatus(@PathVariable Long apiId) {\n \t */\n \t@RequestMapping(\"/status/web/{apiId}\")\n \tpublic String checkWebApiStatus(@PathVariable Long apiId) {\n-\t\tString status = checkApiStatus(apiId);\n+\t\t// TODO: This is to be removed when remote api details page is refactored\n+\t\t//       Use similar functionality in RemoateAPIAjaxController.\n+\t\tRemoteAPI api = remoteAPIService.read(apiId);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4MjE2MA=="}, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 190}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMDUzMTMwOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/pages/remote_apis/parent_reload.html", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDoxNjoxN1rOF0fX1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMzowOTo0MFrOF02ICg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4NDI3Ng==", "bodyText": "Add a comment here of what it's doing and why", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390584276", "createdAt": "2020-03-10T20:16:17Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/pages/remote_apis/parent_reload.html", "diffHunk": "@@ -1,15 +1,24 @@\n <!DOCTYPE html>\n <html>\n-<body>\n-\n-    <script>\n+  <body>\n+    <script th:inline=\"javascript\">\n       /*\n-      This is loaded into an iFrame.\n-      Close the bootstrap modal on the parent page.\n-       */\n-      var modal = window.parent.document.querySelector(\"#remote-connect-wrapper\");\n-      modal.dataset.result = \"success\";\n-      modal.querySelector(\".close\").click();\n+  This is loaded into an iFrame.\n+  Close the bootstrap modal on the parent page.\n+   */\n+      const modal = window.parent.document.querySelector(\n+        \"#remote-connect-wrapper\"\n+      );\n+      if (modal) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk1NzA2Ng==", "bodyText": "Add in 99f9d81", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390957066", "createdAt": "2020-03-11T13:09:40Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/pages/remote_apis/parent_reload.html", "diffHunk": "@@ -1,15 +1,24 @@\n <!DOCTYPE html>\n <html>\n-<body>\n-\n-    <script>\n+  <body>\n+    <script th:inline=\"javascript\">\n       /*\n-      This is loaded into an iFrame.\n-      Close the bootstrap modal on the parent page.\n-       */\n-      var modal = window.parent.document.querySelector(\"#remote-connect-wrapper\");\n-      modal.dataset.result = \"success\";\n-      modal.querySelector(\".close\").click();\n+  This is loaded into an iFrame.\n+  Close the bootstrap modal on the parent page.\n+   */\n+      const modal = window.parent.document.querySelector(\n+        \"#remote-connect-wrapper\"\n+      );\n+      if (modal) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4NDI3Ng=="}, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMDUzNTYxOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/apis/remote-api/remote-api.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDoxNzozMVrOF0facQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMzoxMDo1N1rOF02LHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4NDk0NQ==", "bodyText": "Use setBaseUrl to set the url  ajax/remote_api in case we add to this file in the future", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390584945", "createdAt": "2020-03-10T20:17:31Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/apis/remote-api/remote-api.js", "diffHunk": "@@ -0,0 +1,12 @@\n+import axios from \"axios\";\n+\n+/**\n+ * Check the status of a specific Remote API.\n+ * @param {number} id - identifier for the API.\n+ * @returns {Promise<boolean>}\n+ */\n+export function checkConnectionStatus({ id }) {\n+  return axios\n+    .get(`ajax/remote_api/status/${id}`)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk1Nzg1Mw==", "bodyText": "Updated in da29063", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390957853", "createdAt": "2020-03-11T13:10:57Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/apis/remote-api/remote-api.js", "diffHunk": "@@ -0,0 +1,12 @@\n+import axios from \"axios\";\n+\n+/**\n+ * Check the status of a specific Remote API.\n+ * @param {number} id - identifier for the API.\n+ * @returns {Promise<boolean>}\n+ */\n+export function checkConnectionStatus({ id }) {\n+  return axios\n+    .get(`ajax/remote_api/status/${id}`)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4NDk0NQ=="}, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMDUzNzM5OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/clients/ClientsPage.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDoxODowMVrOF0fbjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMzoxMzo0NVrOF02RzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4NTIyOA==", "bodyText": "File comments", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390585228", "createdAt": "2020-03-10T20:18:01Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/clients/ClientsPage.jsx", "diffHunk": "@@ -0,0 +1,14 @@\n+import React from \"react\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk1OTU2NA==", "bodyText": "Updated in 09b609a", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390959564", "createdAt": "2020-03-11T13:13:45Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/clients/ClientsPage.jsx", "diffHunk": "@@ -0,0 +1,14 @@\n+import React from \"react\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4NTIyOA=="}, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMDUzOTE2OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/clients/ClientsTable.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDoxODozMlrOF0fcqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDoxODozMlrOF0fcqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4NTUxMg==", "bodyText": "File comments", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390585512", "createdAt": "2020-03-10T20:18:32Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/clients/ClientsTable.jsx", "diffHunk": "@@ -0,0 +1,74 @@\n+import React, { useContext } from \"react\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMDU0NDUxOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/clients/ClientsTable.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDoxOTo1OFrOF0ff6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMzoyNzowNVrOF02ydg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4NjM0Nw==", "bodyText": "Set scroll={{x: 'max-content'}} as we have for other tables. This will prevent it from overflowing it all weird", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390586347", "createdAt": "2020-03-10T20:19:58Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/clients/ClientsTable.jsx", "diffHunk": "@@ -0,0 +1,74 @@\n+import React, { useContext } from \"react\";\n+import { PagedTableContext } from \"../../contexts/PagedTableContext\";\n+import { PageWrapper } from \"../../components/page/PageWrapper\";\n+import { formatInternationalizedDateTime } from \"../../utilities/date-utilities\";\n+import { Button, Table } from \"antd\";\n+import { setBaseUrl } from \"../../utilities/url-utilities\";\n+\n+export function ClientsTable() {\n+  const {\n+    loading,\n+    total,\n+    pageSize,\n+    dataSource,\n+    handleTableChange\n+  } = useContext(PagedTableContext);\n+\n+  const columnDefs = [\n+    {\n+      title: i18n(\"iridaThing.id\"),\n+      key: \"id\",\n+      dataIndex: \"id\"\n+    },\n+    {\n+      title: i18n(\"client.clientid\"),\n+      key: \"name\",\n+      dataIndex: \"name\",\n+      render(text, record) {\n+        return (\n+          <Button type=\"link\" href={`clients/${record.id}`}>\n+            {text}\n+          </Button>\n+        );\n+      }\n+    },\n+    {\n+      title: i18n(\"client.grant-types\"),\n+      key: \"grants\",\n+      dataIndex: \"grants\"\n+    },\n+    {\n+      title: i18n(\"iridaThing.timestamp\"),\n+      key: \"createdDate\",\n+      dataIndex: \"createdDate\",\n+      render(text) {\n+        return formatInternationalizedDateTime(text);\n+      }\n+    },\n+    {\n+      title: i18n(\"client.details.token.active\"),\n+      key: \"activeTokens\",\n+      dataIndex: \"tokens\",\n+      align: \"right\"\n+    }\n+  ];\n+\n+  return (\n+    <PageWrapper\n+      title={i18n(\"clients.title\")}\n+      headerExtras={\n+        <Button href={setBaseUrl(\"clients/create\")}>\n+          {i18n(\"clients.add\")}\n+        </Button>\n+      }\n+    >\n+      <Table\n+        columns={columnDefs}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk2NzkyNg==", "bodyText": "Updated to use PagedTable in 218ceca", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390967926", "createdAt": "2020-03-11T13:27:05Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/clients/ClientsTable.jsx", "diffHunk": "@@ -0,0 +1,74 @@\n+import React, { useContext } from \"react\";\n+import { PagedTableContext } from \"../../contexts/PagedTableContext\";\n+import { PageWrapper } from \"../../components/page/PageWrapper\";\n+import { formatInternationalizedDateTime } from \"../../utilities/date-utilities\";\n+import { Button, Table } from \"antd\";\n+import { setBaseUrl } from \"../../utilities/url-utilities\";\n+\n+export function ClientsTable() {\n+  const {\n+    loading,\n+    total,\n+    pageSize,\n+    dataSource,\n+    handleTableChange\n+  } = useContext(PagedTableContext);\n+\n+  const columnDefs = [\n+    {\n+      title: i18n(\"iridaThing.id\"),\n+      key: \"id\",\n+      dataIndex: \"id\"\n+    },\n+    {\n+      title: i18n(\"client.clientid\"),\n+      key: \"name\",\n+      dataIndex: \"name\",\n+      render(text, record) {\n+        return (\n+          <Button type=\"link\" href={`clients/${record.id}`}>\n+            {text}\n+          </Button>\n+        );\n+      }\n+    },\n+    {\n+      title: i18n(\"client.grant-types\"),\n+      key: \"grants\",\n+      dataIndex: \"grants\"\n+    },\n+    {\n+      title: i18n(\"iridaThing.timestamp\"),\n+      key: \"createdDate\",\n+      dataIndex: \"createdDate\",\n+      render(text) {\n+        return formatInternationalizedDateTime(text);\n+      }\n+    },\n+    {\n+      title: i18n(\"client.details.token.active\"),\n+      key: \"activeTokens\",\n+      dataIndex: \"tokens\",\n+      align: \"right\"\n+    }\n+  ];\n+\n+  return (\n+    <PageWrapper\n+      title={i18n(\"clients.title\")}\n+      headerExtras={\n+        <Button href={setBaseUrl(\"clients/create\")}>\n+          {i18n(\"clients.add\")}\n+        </Button>\n+      }\n+    >\n+      <Table\n+        columns={columnDefs}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4NjM0Nw=="}, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMDU0Njg3OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/remote-apis/RemoteApiPage.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDoyMDo0MlrOF0fhhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMzoyODoxMFrOF021Gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4Njc1OA==", "bodyText": "File comment", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390586758", "createdAt": "2020-03-10T20:20:42Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/remote-apis/RemoteApiPage.jsx", "diffHunk": "@@ -0,0 +1,29 @@\n+import React from \"react\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk2ODYwMw==", "bodyText": "Added file comments in ee3e6c9", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390968603", "createdAt": "2020-03-11T13:28:10Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/remote-apis/RemoteApiPage.jsx", "diffHunk": "@@ -0,0 +1,29 @@\n+import React from \"react\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4Njc1OA=="}, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMDU0ODg1OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/remote-apis/RemoteApiStatus.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDoyMToxNVrOF0fiug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMzozMToyN1rOF029ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4NzA2Ng==", "bodyText": "File comments", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390587066", "createdAt": "2020-03-10T20:21:15Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/remote-apis/RemoteApiStatus.jsx", "diffHunk": "@@ -0,0 +1,62 @@\n+import React, { useEffect, useState } from \"react\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk3MDc2Mg==", "bodyText": "Added in 6ad1472", "url": "https://github.com/phac-nml/irida/pull/583#discussion_r390970762", "createdAt": "2020-03-11T13:31:27Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/remote-apis/RemoteApiStatus.jsx", "diffHunk": "@@ -0,0 +1,62 @@\n+import React, { useEffect, useState } from \"react\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4NzA2Ng=="}, "originalCommit": {"oid": "b19730079c1d73d6d0ea7fe4a3153893095b12e3"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 931, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}