{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4ODIwNDU5", "number": 791, "title": "Update snvphyl away from IRIDA toolshed", "bodyText": "Description of changes\nThis updates the SNVPhyl pipeline to version 1.2.2. This both updates many of the underlying tools as well as shifts installation away from the IRIDA Galaxy toolshed over to the main Galaxy toolshed.\nTesting\nTo test this out you will have to launch a new Docker image with Galaxy. This can be done with:\ndocker run --name galaxy-irida -d -p 48888:80 -v /path/to/irida/data:/path/to/irida/data phacnml/galaxy-irida-20.05:20.09-it\nWhere /path/to/irida/data is a path to the stored IRIDA data (e.g., the sequence files and reference files). These directories must also be world-readable as the Docker user must be able to read from these directories. Also note that the Docker image here is the integration-test image (which only has the tools for SNVPhyl installed, not any other pipelines).\nAlso, to get this to work you will have to go into /etc/irida/irida.conf and change galaxy.execution.apiKey=admin to galaxy.execution.apiKey=fakekey as the newest Galaxy docker uses fakekey as the API key now.\nNew features\nSNVPhyl now also includes a much more obvious way to enable/disable SNV density filtering. This is done by a drop-down menu in the main pipeline page. A user must select Enable or Disable to launch the pipeline. I chose to move this here as SNV density filtering was one of the main confusion points with people wondering why their SNVPhyl pipeline failed (due to filtering all SNVs). So I wanted to make it more obvious how to control this feature.\n\nRelated issue\nFixes #713. However, a full migration away from the IRIDA toolshed will require merging the later update-assembly PR #793 since the assembly pipeline included tools from the IRIDA toolshed as well.\nChecklist\nThings for the developer to confirm they've done before the PR should be accepted:\n\n CHANGELOG.md (and UPGRADING.md if necessary) updated with information for new change.\n Tests added (or description of how to test) for any new features.\n User documentation updated for UI or technical changes.", "createdAt": "2020-09-03T18:43:16Z", "url": "https://github.com/phac-nml/irida/pull/791", "merged": true, "mergeCommit": {"oid": "11d28a6208a6374caa2ee4eccbe9c966d2170b3b"}, "closed": true, "closedAt": "2020-09-10T20:40:12Z", "author": {"login": "apetkau"}, "timelineItems": {"totalCount": 41, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABctzNlMAH2gAyNDc4ODIwNDU5OjhiYjYzYjVjMjcyY2MwYzQzMDQwN2YxOTk2YjczM2M1MGIxNjAzZGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHm-n9AFqTQ4NjI5MzE4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8bb63b5c272cc0c430407f1996b733c50b1603dd", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/8bb63b5c272cc0c430407f1996b733c50b1603dd", "committedDate": "2020-06-22T16:12:40Z", "message": "Updating SNVPhyl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d29753c096ac3e37206780476f7146cb30c2d5f", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/8d29753c096ac3e37206780476f7146cb30c2d5f", "committedDate": "2020-06-23T14:03:44Z", "message": "Merge branch 'development' into update-snvphyl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e839fc1c0fb7f31eb8a558901cc25033e49ef0c", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/7e839fc1c0fb7f31eb8a558901cc25033e49ef0c", "committedDate": "2020-06-23T14:57:48Z", "message": "Added workflow 1.2.0 (base)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3406021a76587108b4ddce248bb30d765da1161", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/d3406021a76587108b4ddce248bb30d765da1161", "committedDate": "2020-06-23T15:20:03Z", "message": "Fixed up some parameters/messages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8e57ff922f8bb7f1100c74ddc276f3a2889bfb5", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/b8e57ff922f8bb7f1100c74ddc276f3a2889bfb5", "committedDate": "2020-06-23T19:29:34Z", "message": "Base image docker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7caedc323b6e51c697b41591c2380e8528d3fbf", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/b7caedc323b6e51c697b41591c2380e8528d3fbf", "committedDate": "2020-06-23T20:36:00Z", "message": "Integration testing docker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d25321e4b4c2f3441b1d74069e7e05987dca2cb", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/8d25321e4b4c2f3441b1d74069e7e05987dca2cb", "committedDate": "2020-06-23T21:28:13Z", "message": "Added updated SNVPhyl workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c8deb49e90bc66ed225df71ccb18ec1024c22a1", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/4c8deb49e90bc66ed225df71ccb18ec1024c22a1", "committedDate": "2020-06-24T15:42:05Z", "message": "Fixed up run-tests.sh for newer Docker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d05702675e576e607a2c3fa429fa4af88ea43fe", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/7d05702675e576e607a2c3fa429fa4af88ea43fe", "committedDate": "2020-06-25T15:13:10Z", "message": "Fixes to tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef132ba13f03fdbc21e6996946051b7d74e79d7f", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/ef132ba13f03fdbc21e6996946051b7d74e79d7f", "committedDate": "2020-06-25T23:18:30Z", "message": "Fixed up it docker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cddd257e43bc44745f24b9d71e85b287206d6f9f", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/cddd257e43bc44745f24b9d71e85b287206d6f9f", "committedDate": "2020-06-26T00:08:46Z", "message": "Updating all docker builds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf8980d60e7e38635d6c40fcb95b049b2e19836f", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/bf8980d60e7e38635d6c40fcb95b049b2e19836f", "committedDate": "2020-06-26T01:05:52Z", "message": "Updated SNVPhyl to 1.2.1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "151cc0b9ee7b7d2fb5440d6dcb7fd6895efecf63", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/151cc0b9ee7b7d2fb5440d6dcb7fd6895efecf63", "committedDate": "2020-06-26T16:41:36Z", "message": "Updating docker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34a7ff28b79e4e32ae85051706e9688279e06f55", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/34a7ff28b79e4e32ae85051706e9688279e06f55", "committedDate": "2020-06-28T20:54:48Z", "message": "Updating the docker build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8370b46aeb45404bfd6bc984fc41e2f1f77338c2", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/8370b46aeb45404bfd6bc984fc41e2f1f77338c2", "committedDate": "2020-06-28T21:02:01Z", "message": "Merge branch 'development' into update-snvphyl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "029a7b825f34f4349f302ca6fa2e1dbbab06ec57", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/029a7b825f34f4349f302ca6fa2e1dbbab06ec57", "committedDate": "2020-06-30T14:13:15Z", "message": "Attempt to fix permissions in docker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aff03c022d4f0a892db0894f5b903aa6fb8c1f1b", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/aff03c022d4f0a892db0894f5b903aa6fb8c1f1b", "committedDate": "2020-06-30T14:13:36Z", "message": "Merge branch 'development' into update-snvphyl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b58340204cbc4de0ecb4c5175f6aa9201aac9d18", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/b58340204cbc4de0ecb4c5175f6aa9201aac9d18", "committedDate": "2020-06-30T16:40:09Z", "message": "Fixed up docker for mentalist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c837fbc2c4a9ce8315878c619dbd3cddd735c4c", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/2c837fbc2c4a9ce8315878c619dbd3cddd735c4c", "committedDate": "2020-07-02T16:58:24Z", "message": "Updated SNVPhyl tutorial docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6053bda60e004debeee8a81c6aeccdceaa2292cc", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/6053bda60e004debeee8a81c6aeccdceaa2292cc", "committedDate": "2020-07-02T17:08:44Z", "message": "Updated changelog/upgrading"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed8ead12941eecfccd7064765e485f90a85349df", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/ed8ead12941eecfccd7064765e485f90a85349df", "committedDate": "2020-07-03T14:32:59Z", "message": "Updated changelog to get rid of statement about removing dependency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93e2d406cc4d80aa545469d9205a09d1afe2b090", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/93e2d406cc4d80aa545469d9205a09d1afe2b090", "committedDate": "2020-07-03T14:59:36Z", "message": "Updating tools-list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb14cb7528cbf9a4444535d6aa905c06c4872bee", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/fb14cb7528cbf9a4444535d6aa905c06c4872bee", "committedDate": "2020-07-03T15:58:58Z", "message": "Remove extra mentalist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e3b353c4d377da5d628fdb4bbeae7f38bc97a4f", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/2e3b353c4d377da5d628fdb4bbeae7f38bc97a4f", "committedDate": "2020-09-03T16:48:17Z", "message": "merge development"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95607941af2d46729ae8f9abe1fd355f0fbf1da5", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/95607941af2d46729ae8f9abe1fd355f0fbf1da5", "committedDate": "2020-09-03T16:50:14Z", "message": "Updated Dockerfile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dab574a4e2e50e2a53171fe4a3d612498cc90f6e", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/dab574a4e2e50e2a53171fe4a3d612498cc90f6e", "committedDate": "2020-09-03T17:05:10Z", "message": "Updated it dockerfile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "381a207ade9114736558f8a57b1597fc25b00344", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/381a207ade9114736558f8a57b1597fc25b00344", "committedDate": "2020-09-03T17:20:41Z", "message": "Updated dockerfile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29c400b96c4a486e4aab367f86a407deb7158111", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/29c400b96c4a486e4aab367f86a407deb7158111", "committedDate": "2020-09-03T18:15:41Z", "message": "Update to snvphyl 1.2.2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed2c5fec13aa086f5d54395ee720f1f72ee95834", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/ed2c5fec13aa086f5d54395ee720f1f72ee95834", "committedDate": "2020-09-03T18:26:20Z", "message": "Renamed to 1.2.2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e80819ad76c18dffa02d3c024219000f488d3fe", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/4e80819ad76c18dffa02d3c024219000f488d3fe", "committedDate": "2020-09-03T18:29:14Z", "message": "Updated SNVPhyl workflow file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e551adaf3fc630e9dc4b27d5f2a54819a96c8e9", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/7e551adaf3fc630e9dc4b27d5f2a54819a96c8e9", "committedDate": "2020-09-03T18:40:48Z", "message": "Updated test info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "345a775dac09330128c8521b1ec299b356334433", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/345a775dac09330128c8521b1ec299b356334433", "committedDate": "2020-09-03T22:27:50Z", "message": "Ignore one other parameter from tool info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a8934b277d21cbf73525d1d58d78c26f32f4b17", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/9a8934b277d21cbf73525d1d58d78c26f32f4b17", "committedDate": "2020-09-04T03:24:18Z", "message": "Updated integration tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bc79abddbb025b8c7c0e3416aa08d8eccd64fb3", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/9bc79abddbb025b8c7c0e3416aa08d8eccd64fb3", "committedDate": "2020-09-08T00:53:36Z", "message": "Fixed assert in test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "925551770db17e90b6f18341d0df96e92b55a75c", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/925551770db17e90b6f18341d0df96e92b55a75c", "committedDate": "2020-09-08T14:02:19Z", "message": "Get rid of setting headless properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c46951f98ba2e9b961f8792f7845d437a211706e", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/c46951f98ba2e9b961f8792f7845d437a211706e", "committedDate": "2020-09-08T14:09:45Z", "message": "Updated tools-list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MzgzNzc3", "url": "https://github.com/phac-nml/irida/pull/791#pullrequestreview-485383777", "createdAt": "2020-09-09T20:35:24Z", "commit": {"oid": "c46951f98ba2e9b961f8792f7845d437a211706e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDozNToyNFrOHPZX3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDozNToyNFrOHPZX3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkwNjM5Nw==", "bodyText": "Any thoughts on creating a default for this instead of requiring an option?  If it's a required option I think we need to add some documentation somewhere about its effects and an easy way for the user to get to them from the launch page.", "url": "https://github.com/phac-nml/irida/pull/791#discussion_r485906397", "createdAt": "2020-09-09T20:35:24Z", "author": {"login": "tom114"}, "path": "src/main/resources/ca/corefacility/bioinformatics/irida/model/workflow/analysis/type/workflows/SNVPhyl/1.2.2/irida_workflow.xml", "diffHunk": "@@ -0,0 +1,85 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<iridaWorkflow>\n+\t<id>f609c177-c268-4ad0-9d7f-9f9d5187fef7</id>\n+\t<name>SNVPhyl</name>\n+\t<version>1.2.2</version>\n+\t<analysisType>PHYLOGENOMICS</analysisType>\n+\t<inputs>\n+\t\t<sequenceReadsPaired>sequence_reads_paired</sequenceReadsPaired>\n+\t\t<reference>reference</reference>\n+\t\t<requiresSingleSample>false</requiresSingleSample>\n+\t</inputs>\n+\t<parameters>\n+\t\t<parameter name=\"enable-density-filter\" required=\"true\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c46951f98ba2e9b961f8792f7845d437a211706e"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38a3b32bd0f9b6497298e52169820770b42f8e6b", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/38a3b32bd0f9b6497298e52169820770b42f8e6b", "committedDate": "2020-09-10T16:27:00Z", "message": "Merge development"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2546587f6f3600d52e8e398d1f28bf81ccd8cbf8", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/2546587f6f3600d52e8e398d1f28bf81ccd8cbf8", "committedDate": "2020-09-10T17:21:09Z", "message": "Added additional SNVPhyl documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a88fe1ee22648381009e61b118e8be957f0c8b76", "author": {"user": {"login": "apetkau", "name": "Aaron Petkau"}}, "url": "https://github.com/phac-nml/irida/commit/a88fe1ee22648381009e61b118e8be957f0c8b76", "committedDate": "2020-09-10T19:14:34Z", "message": "Added info about using ephemeris"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MjkzMTg5", "url": "https://github.com/phac-nml/irida/pull/791#pullrequestreview-486293189", "createdAt": "2020-09-10T20:39:30Z", "commit": {"oid": "a88fe1ee22648381009e61b118e8be957f0c8b76"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 95, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}