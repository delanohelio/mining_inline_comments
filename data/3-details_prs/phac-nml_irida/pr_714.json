{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1MjAwMTQy", "number": 714, "title": "Project List Metadata Templates", "bodyText": "Description of changes\nUpdates the project metadata template page to use Ant Design tables.\nRelated issue\nN/A\nChecklist\nThings for the developer to confirm they've done before the PR should be accepted:\n\n CHANGELOG.md (and UPGRADING.md if necessary) updated with information for new change.\n Tests added (or description of how to test) for any new features.\nUser documentation updated for UI or technical changes.", "createdAt": "2020-05-29T16:23:35Z", "url": "https://github.com/phac-nml/irida/pull/714", "merged": true, "mergeCommit": {"oid": "a757f2de63327f35198bbc6b727e43117e8164a5"}, "closed": true, "closedAt": "2020-06-10T17:23:29Z", "author": {"login": "joshsadam"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclzFZaAH2gAyNDI1MjAwMTQyOjVlYTI5ZjNhMTlkOTE5ZTkxYTYxNDc4ODAyYWMyNzVmMzgxOTg5MzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcp9B-ygFqTQyODI3MzgxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5ea29f3a19d919e91a61478802ac275f38198934", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/5ea29f3a19d919e91a61478802ac275f38198934", "committedDate": "2020-05-28T19:32:20Z", "message": ":construction: Add description attribute to a metadata template."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a71285c55c4a960467e2553479d54de93ee588c", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/5a71285c55c4a960467e2553479d54de93ee588c", "committedDate": "2020-05-29T12:56:55Z", "message": ":construction: List metadata templates and show thier new descriptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41650bf08c7e1adbac3cf460102a5111e6fcb56d", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/41650bf08c7e1adbac3cf460102a5111e6fcb56d", "committedDate": "2020-05-29T12:59:19Z", "message": ":construction: Display the number of fields to the right"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c806cc136106fca79330c90ac4f45eeaad1b4a49", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/c806cc136106fca79330c90ac4f45eeaad1b4a49", "committedDate": "2020-05-29T13:34:05Z", "message": ":construction: Don't go full width on XL screens, too hard to read."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25ed4694faffa523c1539d04b64d0b58ad394d41", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/25ed4694faffa523c1539d04b64d0b58ad394d41", "committedDate": "2020-05-29T16:20:04Z", "message": "Cleaned up layout."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd70a02be9c750a7bc2f728126d84defc088f7de", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/dd70a02be9c750a7bc2f728126d84defc088f7de", "committedDate": "2020-05-29T18:07:58Z", "message": "Updated JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "870dea5104d3e369422704162106c8d0a4e7d627", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/870dea5104d3e369422704162106c8d0a4e7d627", "committedDate": "2020-06-01T13:47:12Z", "message": ":white_check_mark: Fixed broken test selector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7eabae185299fd62ae7ae8b4e825482b5a13e71", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/e7eabae185299fd62ae7ae8b4e825482b5a13e71", "committedDate": "2020-06-02T09:48:19Z", "message": "Merge development"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36fd8878cb408d1b4e62496095a198d0b694d2df", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/36fd8878cb408d1b4e62496095a198d0b694d2df", "committedDate": "2020-06-02T10:03:16Z", "message": ":memo: Update CHANGELOG.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "238d361ff85b544245c28e8edf6e99b54a3f2443", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/238d361ff85b544245c28e8edf6e99b54a3f2443", "committedDate": "2020-06-03T14:26:54Z", "message": "Merge branch 'development' into list-metadata-templates\n\n# Conflicts:\n#\tCHANGELOG.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15be709611b1e78e1ed1253d112ade63433dea99", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/15be709611b1e78e1ed1253d112ade63433dea99", "committedDate": "2020-06-08T16:30:41Z", "message": "Merge branch 'development' into list-metadata-templates\n\n# Conflicts:\n#\tCHANGELOG.md\n#\tsrc/main/webapp/yarn.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b29ded79319b9ec4fb1b60ae4dfe82a04d13f8e", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/8b29ded79319b9ec4fb1b60ae4dfe82a04d13f8e", "committedDate": "2020-06-08T16:31:29Z", "message": "Updated ant.design"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3MTI0ODcy", "url": "https://github.com/phac-nml/irida/pull/714#pullrequestreview-427124872", "createdAt": "2020-06-09T13:08:25Z", "commit": {"oid": "8b29ded79319b9ec4fb1b60ae4dfe82a04d13f8e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxMzowODoyNVrOGhI5bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxMzoxMDoxNlrOGhJAbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQwMTk2NA==", "bodyText": "File comments", "url": "https://github.com/phac-nml/irida/pull/714#discussion_r437401964", "createdAt": "2020-06-09T13:08:25Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/projects/metadata-templates/index.js", "diffHunk": "@@ -0,0 +1,81 @@\n+import React, { useEffect, useState } from \"react\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b29ded79319b9ec4fb1b60ae4dfe82a04d13f8e"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQwMzc1Ng==", "bodyText": "Function comments", "url": "https://github.com/phac-nml/irida/pull/714#discussion_r437403756", "createdAt": "2020-06-09T13:10:16Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/apis/metadata/metadata-templates.js", "diffHunk": "@@ -0,0 +1,10 @@\n+import axios from \"axios\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b29ded79319b9ec4fb1b60ae4dfe82a04d13f8e"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0efe998b687fac53a412cd01d4b3d460e20d36a0", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/0efe998b687fac53a412cd01d4b3d460e20d36a0", "committedDate": "2020-06-09T13:33:43Z", "message": "Downgraded ant design as causing problems with modals"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6930ee595d1f5ee82dc30c69f7fcd1f648f5602d", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/6930ee595d1f5ee82dc30c69f7fcd1f648f5602d", "committedDate": "2020-06-09T13:41:49Z", "message": "Updated JSDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f6d0cd737dc347a5b98613b2c96f70a3c0d3a62", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/9f6d0cd737dc347a5b98613b2c96f70a3c0d3a62", "committedDate": "2020-06-09T13:42:27Z", "message": "Updated JSDoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MTEzODk0", "url": "https://github.com/phac-nml/irida/pull/714#pullrequestreview-428113894", "createdAt": "2020-06-10T14:29:44Z", "commit": {"oid": "9f6d0cd737dc347a5b98613b2c96f70a3c0d3a62"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDoyOTo0NVrOGh3nBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDoyOTo0NVrOGh3nBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE2NzMwMA==", "bodyText": "Since we already have BASE_URL set at the top of the file you should probably use ${BASE_URL}/${item.id} instead of setBaseUrl(/projects/${window.project.id}/metadata-templates/${item.id})", "url": "https://github.com/phac-nml/irida/pull/714#discussion_r438167300", "createdAt": "2020-06-10T14:29:45Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/projects/metadata-templates/index.js", "diffHunk": "@@ -0,0 +1,86 @@\n+import React, { useEffect, useState } from \"react\";\n+import { render } from \"react-dom\";\n+import { getProjectMetadataTemplates } from \"../../../apis/metadata/metadata-templates\";\n+import { Avatar, Button, List, Space, Tag, Typography } from \"antd\";\n+import {\n+  IconDownloadFile,\n+  IconMetadataTemplate,\n+} from \"../../../components/icons/Icons\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+\n+const { Title } = Typography;\n+\n+/**\n+ * Display a list of metadata templates that are associated with a project.\n+ * @returns {JSX.Element}\n+ * @constructor\n+ */\n+function ProjectMetadataTemplates() {\n+  const [templates, setTemplates] = useState([]);\n+  const BASE_URL = setBaseUrl(\n+    `/projects/${window.project.id}/metadata-templates`\n+  );\n+\n+  useEffect(() => {\n+    getProjectMetadataTemplates(window.project.id).then((data) =>\n+      setTemplates(data)\n+    );\n+  }, []);\n+\n+  return (\n+    <div>\n+      <Space direction=\"vertical\" style={{ width: \"100%\" }}>\n+        <Title level={2}>{i18n(\"ProjectMetadataTemplates.title\")}</Title>\n+        <Space>\n+          <Button href={`${BASE_URL}/new`} className=\"t-create-template-btn\">\n+            Create New Template\n+          </Button>\n+        </Space>\n+        <List\n+          bordered\n+          itemLayout=\"horizontal\"\n+          dataSource={templates}\n+          renderItem={(item) => (\n+            <List.Item\n+              className=\"t-template\"\n+              actions={[\n+                <Button\n+                  shape=\"circle\"\n+                  icon={<IconDownloadFile />}\n+                  href={`${BASE_URL}/${item.id}/excel`}\n+                  key=\"list-download\"\n+                />,\n+              ]}\n+            >\n+              <List.Item.Meta\n+                avatar={<Avatar icon={<IconMetadataTemplate />} />}\n+                title={\n+                  <div\n+                    style={{\n+                      display: \"flex\",\n+                      justifyContent: \"space-between\",\n+                    }}\n+                  >\n+                    <a\n+                      href={setBaseUrl(\n+                        `/projects/${window.project.id}/metadata-templates/${item.id}`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f6d0cd737dc347a5b98613b2c96f70a3c0d3a62"}, "originalPosition": 66}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MjczODEz", "url": "https://github.com/phac-nml/irida/pull/714#pullrequestreview-428273813", "createdAt": "2020-06-10T17:23:21Z", "commit": {"oid": "9f6d0cd737dc347a5b98613b2c96f70a3c0d3a62"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 12, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}