{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0MjAwNzc5", "number": 570, "title": "Clients ant design table to replace Datatables", "bodyText": "Description of changes\nUpdated clients table to use ant design.\nRelated issue\nN/A\nChecklist\nThings for the developer to confirm they've done before the PR should be accepted:\n\n CHANGELOG.md (and UPGRADING.md if necessary) updated with information for new change.\n Tests added (or description of how to test) for any new features.\n User documentation updated for UI or technical changes.", "createdAt": "2020-01-17T15:42:57Z", "url": "https://github.com/phac-nml/irida/pull/570", "merged": true, "mergeCommit": {"oid": "dad94a67338501d779552fa3b4b9bbd50136b0c6"}, "closed": true, "closedAt": "2020-02-18T17:44:05Z", "author": {"login": "joshsadam"}, "timelineItems": {"totalCount": 47, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb7AuKcgH2gAyMzY0MjAwNzc5OmQ4OGJkNGJkYzFjYmQ3YmExMjU1MmZkZTEyOGE1MzgwY2YwMDMxNDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFlmDGgFqTM2MDU0MjE0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d88bd4bdc1cbd7ba12552fde128a5380cf003141", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/d88bd4bdc1cbd7ba12552fde128a5380cf003141", "committedDate": "2020-01-16T21:06:53Z", "message": "Working table and external search"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffbdab11bd4f2c2562465afbc0d8b1a0da980686", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/ffbdab11bd4f2c2562465afbc0d8b1a0da980686", "committedDate": "2020-01-17T15:37:16Z", "message": "Working table and tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7278a3e3c662e865a3f51fad607a9b47f3aaa62d", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/7278a3e3c662e865a3f51fad607a9b47f3aaa62d", "committedDate": "2020-01-17T16:50:40Z", "message": "Removed commented out code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7161af9f974ddf304b41f84acde15fccb68ab687", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/7161af9f974ddf304b41f84acde15fccb68ab687", "committedDate": "2020-01-17T17:11:01Z", "message": "Added comment about where the base code can be found."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb4a33986595fddab50d64e26db0498da479251e", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/cb4a33986595fddab50d64e26db0498da479251e", "committedDate": "2020-01-17T17:11:15Z", "message": "Seperated code into cleaned up modules."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "354a0d40d1e1985a010de441b77acc1ae3b7b548", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/354a0d40d1e1985a010de441b77acc1ae3b7b548", "committedDate": "2020-01-17T17:27:07Z", "message": "Updated comments.  Cleaned up buttons style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "359e25c26fabf860f7801b7a83ae2bc7b272a79d", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/359e25c26fabf860f7801b7a83ae2bc7b272a79d", "committedDate": "2020-01-17T17:33:51Z", "message": "Add missing method comment."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1c19a43a4bb068e53424b0c8e55c98d0403bed9", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/e1c19a43a4bb068e53424b0c8e55c98d0403bed9", "committedDate": "2020-01-17T18:24:40Z", "message": "Updated JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c588890c50c1661b3f0d7933001671dc52203745", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/c588890c50c1661b3f0d7933001671dc52203745", "committedDate": "2020-01-17T19:51:16Z", "message": "Fixed JavaDoc error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3367816e57069af4bbdb8fd648cc1dda2a9a74fa", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/3367816e57069af4bbdb8fd648cc1dda2a9a74fa", "committedDate": "2020-01-20T14:47:09Z", "message": "Updated CHANGELOG.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97b344c98c2c6c30a8961d8acb4609907411ef4b", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/97b344c98c2c6c30a8961d8acb4609907411ef4b", "committedDate": "2020-01-20T15:06:05Z", "message": "Updated documentation images."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2703a72ac60f401ad3122df4900b8f43eed8f485", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/2703a72ac60f401ad3122df4900b8f43eed8f485", "committedDate": "2020-01-20T20:33:22Z", "message": "Removed commented out code."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "186c9277c5c256f07f67f65f199d5923e405cdb0", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/186c9277c5c256f07f67f65f199d5923e405cdb0", "committedDate": "2020-01-21T16:06:23Z", "message": "Updated revoke token button to match other table buttons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2efcf5496ba2c1e0e5b1e91ffd029a72b18393b1", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/2efcf5496ba2c1e0e5b1e91ffd029a72b18393b1", "committedDate": "2020-01-23T19:41:09Z", "message": "Merge branch 'development' into clients-ant-design\n\n# Conflicts:\n#\tsrc/main/webapp/yarn.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0a6714fb491c972bc720ab97c9090f3e5386350", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/f0a6714fb491c972bc720ab97c9090f3e5386350", "committedDate": "2020-01-23T19:51:37Z", "message": "Cleaned up icon to match table."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5c2d300cb086768a8af3f722c81d7e380e7f611", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/d5c2d300cb086768a8af3f722c81d7e380e7f611", "committedDate": "2020-01-24T14:17:49Z", "message": "Merge branch 'development' into clients-ant-design\n\n# Conflicts:\n#\tsrc/main/webapp/yarn.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e890c54699bb2c892d8354f43a368125719099fb", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/e890c54699bb2c892d8354f43a368125719099fb", "committedDate": "2020-01-24T14:28:37Z", "message": "Updated revoke icon."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "394324401331dbb504ee75a2824cab0d1abc6b57", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/394324401331dbb504ee75a2824cab0d1abc6b57", "committedDate": "2020-01-27T20:52:09Z", "message": "Merge branch 'development' into clients-ant-design"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1da18e9e77d64e5bf3487613c26e82db6ec5175", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/a1da18e9e77d64e5bf3487613c26e82db6ec5175", "committedDate": "2020-01-28T15:45:24Z", "message": "Updated revoke icon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdfebe96c839f4093d436832a02c5f50cb8c964a", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/cdfebe96c839f4093d436832a02c5f50cb8c964a", "committedDate": "2020-01-28T15:47:30Z", "message": "Added debounce to prevent flickering during search."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d350dc119f990f93985a3b42f41c64812d42c4b", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/5d350dc119f990f93985a3b42f41c64812d42c4b", "committedDate": "2020-01-29T19:02:46Z", "message": "Merge branch 'development' into clients-ant-design"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "504678358f933d2246db7f209738caad3010ca86", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/504678358f933d2246db7f209738caad3010ca86", "committedDate": "2020-01-29T19:05:13Z", "message": "Updated CHANGELOG.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "870453e8296486686d2ef17c73cf48f31054125f", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/870453e8296486686d2ef17c73cf48f31054125f", "committedDate": "2020-01-29T19:15:33Z", "message": "Updated CHANGELOG.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b9272694cb66b8655a0a4892dc98150c984a601", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/8b9272694cb66b8655a0a4892dc98150c984a601", "committedDate": "2020-01-31T15:42:08Z", "message": "Merge branch 'development' into clients-ant-design"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e1f2aee4ef926d6953b7988e1c8e7ce19c97bf7", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/1e1f2aee4ef926d6953b7988e1c8e7ce19c97bf7", "committedDate": "2020-01-31T15:43:41Z", "message": "Updated CHANGELOG.md to reflect next release cycle."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abfb6ee0e078cbaa7b8ab2c8b7d0c3c87fbff7e1", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/abfb6ee0e078cbaa7b8ab2c8b7d0c3c87fbff7e1", "committedDate": "2020-02-03T14:13:37Z", "message": "Merge branch 'development' into clients-ant-design\n\n# Conflicts:\n#\tCHANGELOG.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce622722d000a4b89e8da9d41db3e912ec2b2bd8", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/ce622722d000a4b89e8da9d41db3e912ec2b2bd8", "committedDate": "2020-02-03T16:00:21Z", "message": "Updated to use reducer and add pagedConfig."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a946351b2af5c9d1961d2c5c5bcb26fda0a3d12a", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/a946351b2af5c9d1961d2c5c5bcb26fda0a3d12a", "committedDate": "2020-02-03T17:49:34Z", "message": "Applying PagedTable to AnalysesTable.jsx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e408287c7b591c08621dbc03fbc9dcb10a1f3286", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/e408287c7b591c08621dbc03fbc9dcb10a1f3286", "committedDate": "2020-02-03T17:58:02Z", "message": "Updated sequencing runs to use new PagedTable.jsx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eed3605c60eea4f3ccce840823b1c34cadd58522", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/eed3605c60eea4f3ccce840823b1c34cadd58522", "committedDate": "2020-02-04T14:07:28Z", "message": "Cleaned up icon for AnalysisState.jsx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/aeed3555893e930dc26a1fbc33be10f0f59b6f4f", "committedDate": "2020-02-04T14:19:39Z", "message": "Cleaned up imports for PagedTable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/55f986e166b087636001c75989a6934bc5e2e2d6", "committedDate": "2020-02-10T20:18:11Z", "message": "Merge branch 'development' into clients-ant-design\n\n# Conflicts:\n#\tCHANGELOG.md"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b622b7141453311f29302a9a86a1863acddf0c11", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/b622b7141453311f29302a9a86a1863acddf0c11", "committedDate": "2020-02-11T17:40:26Z", "message": "Fixed merge artifacts"}, "afterCommit": {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/55f986e166b087636001c75989a6934bc5e2e2d6", "committedDate": "2020-02-10T20:18:11Z", "message": "Merge branch 'development' into clients-ant-design\n\n# Conflicts:\n#\tCHANGELOG.md"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MTk4ODAx", "url": "https://github.com/phac-nml/irida/pull/570#pullrequestreview-356198801", "createdAt": "2020-02-10T19:23:31Z", "commit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxOToyNDowNVrOFnyjAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxODo0NzowOFrOFo6UUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI2Njk0Ng==", "bodyText": "This method is nearly a carbon copy to the method above.  Can this be refactored?", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377266946", "createdAt": "2020-02-10T19:24:05Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/clients/ClientsController.java", "diffHunk": "@@ -148,6 +150,16 @@ public String revokeTokens(@RequestParam Long id) {\n \t\treturn \"redirect:/clients/\" + id;\n \t}\n \n+\t/**\n+\t * Revoke access tokens for a specific client.\n+\t * @param id - identifier for a client\n+\t */\n+\t@RequestMapping(value = \"/ajax/revoke\", method = RequestMethod.PUT)\n+\tpublic void revokeClientTokens(@RequestParam Long id) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI3MzY1OA==", "bodyText": "Thanks for this", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377273658", "createdAt": "2020-02-10T19:37:28Z", "author": {"login": "tom114"}, "path": "src/main/webapp/pages/clients/list.html", "diffHunk": "@@ -1,40 +1,19 @@\n <!DOCTYPE html>\n-<html xmlns:th=\"http://www.thymeleaf.org\"\n-      xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n-      data-layout-decorate=\"~{template/page}\">\n-<head>\n+<html\n+  xmlns:th=\"http://www.thymeleaf.org\"\n+  xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n+  data-layout-decorate=\"~{template/page}\"\n+>\n+  <head>\n     <title th:text=\"#{clients.title}\">_Clients_</title>\n-    <link rel=\"stylesheet\" th:href=\"@{/dist/css/clients-list.bundle.css}\">\n-</head>\n-<body>\n-<th:block layout:fragment=\"page\">\n-    <div class=\"col-md-12\">\n-        <main role=\"main\" property=\"mainContentOfPage\">\n-            <h1 th:text=\"#{clients.title}\">_Clients_</h1>\n-            <a id=\"add-link\" href=\"/clients/create\" th:href=\"@{/clients/create}\" th:text=\"#{clients.add}\"\n-               class=\"btn btn-sm btn-default hidden\">_Add\n-                Client_</a>\n-            <table id=\"clientsTable\" class=\"table table-striped table-hover\"\n-                   data:clients=\"@{/clients/}\"\n-                   data:url=\"@{/clients/ajax/list}\">\n-                <thead>\n-                <tr th:inline=\"text\">\n-                    <th data-data=\"id\" width=\"20\" id=\"id-header\">[[#{iridaThing.id}]]</th>\n-                    <th data-data=\"clientId\" width=\"160\" id=\"clientid-header\">[[#{client.clientid}]]</th>\n-                    <th data-data=\"grants\" data-orderable=\"false\" id=\"grants-header\">[[#{client.grant-types}]]</th>\n-                    <th data-data=\"createdDate\" id=\"created-header\">[[#{iridaThing.timestamp}]]</th>\n-                    <th data-data=\"tokens\" id=\"tokens-header\" data-orderable=\"false\">\n-                        [[#{client.details.token.active}]]\n-                    </th>\n-                </tr>\n-                </thead>\n-                <tbody id=\"client-table-body\"></tbody>\n-            </table>\n-        </main>\n+    <link rel=\"stylesheet\" th:href=\"@{/dist/css/clients-list.bundle.css}\" />\n+  </head>\n+  <body>\n+    <div layout:fragment=\"page\" id=\"client-root\" style=\"height: 100%;\">\n+      <!-- Base react component found at : /webapp/resources/js/pages/clients/listing/ClientListingPage.jsx -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI3NDAzNA==", "bodyText": "This doesn't need a new tab opened.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377274034", "createdAt": "2020-02-10T19:38:18Z", "author": {"login": "tom114"}, "path": "src/main/webapp/resources/js/pages/clients/listing/ClientsTables.jsx", "diffHunk": "@@ -0,0 +1,104 @@\n+import React, { useContext } from \"react\";\n+import {\n+  PagedTable,\n+  PagedTableContext\n+} from \"../../../components/ant.design/PagedTable\";\n+import { Button, Popconfirm, Tag } from \"antd\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import { dateColumnFormat } from \"../../../components/ant.design/table-renderers\";\n+import { revokeClientTokens } from \"../../../apis/clients/clients\";\n+import { StopOutlined } from \"@ant-design/icons\";\n+\n+/**\n+ * Table for displaying a list of clients.\n+ * @return {*}\n+ * @constructor\n+ */\n+export function ClientsTable() {\n+  const { updateTable } = useContext(PagedTableContext);\n+\n+  const columns = [\n+    {\n+      title: i18n(\"iridaThing.id\"),\n+      width: 80,\n+      dataIndex: \"id\",\n+      sorter: true\n+    },\n+    {\n+      title: i18n(\"client.clientid\"),\n+      dataIndex: \"name\",\n+      ellipsis: true,\n+      sorter: true,\n+      render(text, item) {\n+        return (\n+          <a\n+            className=\"t-client-name\"\n+            target=\"_blank\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI4OTgyNg==", "bodyText": "Should this be here?  Could be that something doesn't have a createdDate or should default to a different sort.  Maybe this should be set by the page.  That will make it more general.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377289826", "createdAt": "2020-02-10T20:10:26Z", "author": {"login": "tom114"}, "path": "src/main/webapp/resources/js/components/ant.design/PagedTable/PagedTableContext.js", "diffHunk": "@@ -0,0 +1,158 @@\n+import React, { useEffect, useReducer } from \"react\";\n+import { fetchPageTableUpdate } from \"../../../apis/paged-table/paged-table\";\n+import debounce from \"lodash/debounce\";\n+\n+let PagedTableContext;\n+const { Provider, Consumer } = (PagedTableContext = React.createContext());\n+\n+const initialState = {\n+  dataSource: undefined,\n+  loading: true,\n+  search: \"\",\n+  current: 1,\n+  pageSize: 10,\n+  order: \"descend\",\n+  column: \"createdDate\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI5MDYzMA==", "bodyText": "refresh_token will also be a common one.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377290630", "createdAt": "2020-02-10T20:12:07Z", "author": {"login": "tom114"}, "path": "src/main/webapp/resources/js/pages/clients/listing/ClientsTables.jsx", "diffHunk": "@@ -0,0 +1,104 @@\n+import React, { useContext } from \"react\";\n+import {\n+  PagedTable,\n+  PagedTableContext\n+} from \"../../../components/ant.design/PagedTable\";\n+import { Button, Popconfirm, Tag } from \"antd\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import { dateColumnFormat } from \"../../../components/ant.design/table-renderers\";\n+import { revokeClientTokens } from \"../../../apis/clients/clients\";\n+import { StopOutlined } from \"@ant-design/icons\";\n+\n+/**\n+ * Table for displaying a list of clients.\n+ * @return {*}\n+ * @constructor\n+ */\n+export function ClientsTable() {\n+  const { updateTable } = useContext(PagedTableContext);\n+\n+  const columns = [\n+    {\n+      title: i18n(\"iridaThing.id\"),\n+      width: 80,\n+      dataIndex: \"id\",\n+      sorter: true\n+    },\n+    {\n+      title: i18n(\"client.clientid\"),\n+      dataIndex: \"name\",\n+      ellipsis: true,\n+      sorter: true,\n+      render(text, item) {\n+        return (\n+          <a\n+            className=\"t-client-name\"\n+            target=\"_blank\"\n+            rel=\"noreferrer noopener\"\n+            href={setBaseUrl(`clients/${item.id}`)}\n+          >\n+            {text}\n+          </a>\n+        );\n+      }\n+    },\n+    {\n+      title: i18n(\"client.grant-types\"),\n+      dataIndex: \"grants\",\n+      render(grants) {\n+        const colors = { password: \"purple\", authorization_code: \"volcano\" };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MTc0NQ==", "bodyText": "Should we make this a generic class instead of having the ? extends TableModel here?  That way when we're using this anywhere in java code we can know what the TableModel class is.  That might make it easier for testing too.  Come chat with me if you want more on this.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378441745", "createdAt": "2020-02-12T18:45:01Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/models/tables/TableResponse.java", "diffHunk": "@@ -1,20 +1,20 @@\n-package ca.corefacility.bioinformatics.irida.ria.web.models;\n+package ca.corefacility.bioinformatics.irida.ria.web.models.tables;\n \n import java.util.List;\n \n /**\n  * Response sent when items are requested for a table.\n  */\n public class TableResponse {\n-\tprivate List<TableModel> dataSource;\n+\tprivate List<? extends TableModel> dataSource;\n \tprivate Long total;\n \n-\tpublic TableResponse(List<TableModel> dataSource, Long total) {\n+\tpublic TableResponse(List<? extends TableModel> dataSource, Long total) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MTk0Nw==", "bodyText": "Do we still want this icons v4 in here since the rest of the ant v4 stuff is on hold?", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378441947", "createdAt": "2020-02-12T18:45:27Z", "author": {"login": "tom114"}, "path": "src/main/webapp/package.json", "diffHunk": "@@ -21,6 +21,7 @@\n     \"last 2 Opera versions\"\n   ],\n   \"dependencies\": {\n+    \"@ant-design/icons\": \"^4.0.0-rc.0\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MjMzNQ==", "bodyText": "Is this URL going to work in a context path?", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378442335", "createdAt": "2020-02-12T18:46:09Z", "author": {"login": "tom114"}, "path": "src/main/webapp/resources/js/apis/clients/clients.js", "diffHunk": "@@ -0,0 +1,10 @@\n+import axios from \"axios\";\n+\n+/**\n+ * Revoke all tokens for a given client by identifier.\n+ * @param {number} id for the client\n+ * @return {Promise<AxiosResponse<T>>}\n+ */\n+export async function revokeClientTokens(id) {\n+  return await axios.put(`clients/ajax/revoke?id=${id}`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MjgzNA==", "bodyText": "Same in this class, will these URLs work in a context path?", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378442834", "createdAt": "2020-02-12T18:47:08Z", "author": {"login": "tom114"}, "path": "src/main/webapp/resources/js/pages/clients/listing/ClientListingPage.jsx", "diffHunk": "@@ -0,0 +1,33 @@\n+import React from \"react\";\n+import { render } from \"react-dom\";\n+import { PageWrapper } from \"../../../components/page/PageWrapper\";\n+import { PagedTableProvider } from \"../../../components/ant.design/PagedTable\";\n+import { ClientsTable } from \"./ClientsTables\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import { Button } from \"antd\";\n+import { PlusCircleTwoTone } from \"@ant-design/icons\";\n+\n+/**\n+ * Page for displaying the list of all clients.\n+ * @return {*}\n+ * @constructor\n+ */\n+function ClientListingPage() {\n+  return (\n+    <PageWrapper\n+      title={i18n(\"clients.title\")}\n+      headerExtras={\n+        <Button type={\"primary\"} href={setBaseUrl(`clients/create`)}>\n+          <PlusCircleTwoTone />\n+          {i18n(\"clients.add\")}\n+        </Button>\n+      }\n+    >\n+      <PagedTableProvider url={setBaseUrl(\"clients/ajax/list\")}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f13204433b070c278f7f3d7524c71767691262e", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/2f13204433b070c278f7f3d7524c71767691262e", "committedDate": "2020-02-13T15:27:45Z", "message": "Do not open the client on a new tab."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09b40ea52f41a09644e789244d5f4881f2739133", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/09b40ea52f41a09644e789244d5f4881f2739133", "committedDate": "2020-02-13T19:14:38Z", "message": "Allow developer to set sort column and direction."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2a61d073452146087f820ab6d7f73bf2f3dab31", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/a2a61d073452146087f820ab6d7f73bf2f3dab31", "committedDate": "2020-02-13T19:17:25Z", "message": "Added refresh_token as a default grant type tag."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b3345beb955af75451a1fedbf8465ecd553b233", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/0b3345beb955af75451a1fedbf8465ecd553b233", "committedDate": "2020-02-13T19:48:50Z", "message": "Updated TableModel to be a generic class."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8c122bc615993fdf7b8aaa759634a942eee857c", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/d8c122bc615993fdf7b8aaa759634a942eee857c", "committedDate": "2020-02-13T20:23:04Z", "message": "Update how the generics are used."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dc570c140086592ee662e7ab450eb9ebe35743a", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/4dc570c140086592ee662e7ab450eb9ebe35743a", "committedDate": "2020-02-14T13:58:00Z", "message": "Fixed JavaDoc in TableResponse.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48df41904653e6bf7c61e598be6976d85decd22b", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/48df41904653e6bf7c61e598be6976d85decd22b", "committedDate": "2020-02-14T15:49:14Z", "message": "Updated husky and prettier precommit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "401c7b79cd22a9e00b3ed61bd3d7f0a71212a567", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/401c7b79cd22a9e00b3ed61bd3d7f0a71212a567", "committedDate": "2020-02-14T16:37:56Z", "message": "Updated revoke tokens to use delete"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MDk0Mjc2", "url": "https://github.com/phac-nml/irida/pull/570#pullrequestreview-359094276", "createdAt": "2020-02-14T17:14:26Z", "commit": {"oid": "401c7b79cd22a9e00b3ed61bd3d7f0a71212a567"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxNzoxNDoyN1rOFp9xjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxNzoxNDozNlrOFp9xzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU0ODA0NA==", "bodyText": "This should be parameterized <...>", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379548044", "createdAt": "2020-02-14T17:14:27Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/sequencingRuns/SequencingRunAjaxController.java", "diffHunk": "@@ -47,11 +47,12 @@ public TableResponse listSequencingRuns(@RequestBody SequencingRunsListRequest s\n \t\tPage<SequencingRun> list = sequencingRunService.list(sequencingRunsListRequest.getCurrent(),\n \t\t\t\tsequencingRunsListRequest.getPageSize(), sequencingRunsListRequest.getSort());\n \n-\t\tList<TableModel> runs = list.getContent()\n-\t\t\t\t.stream()\n-\t\t\t\t.map(s -> new SequencingRunModel(s, messageSource.getMessage(\"sequencingruns.status.\" + s.getUploadStatus()\n-\t\t\t\t\t\t.toString(), new Object[] {}, locale)))\n-\t\t\t\t.collect(Collectors.toList());\n+\t\tList<TableModel> runs = new ArrayList<>();\n+\t\tfor (SequencingRun run : list.getContent()) {\n+\t\t\truns.add(new SequencingRunModel(run, messageSource.getMessage(\n+\t\t\t\t\t\"sequencingruns.status.\" + run.getUploadStatus()\n+\t\t\t\t\t\t\t.toString(), new Object[] {}, locale)));\n+\t\t}\n \n \t\treturn new TableResponse(runs, list.getTotalElements());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "401c7b79cd22a9e00b3ed61bd3d7f0a71212a567"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU0ODExMQ==", "bodyText": "Along with the method signature.", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379548111", "createdAt": "2020-02-14T17:14:36Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/sequencingRuns/SequencingRunAjaxController.java", "diffHunk": "@@ -47,11 +47,12 @@ public TableResponse listSequencingRuns(@RequestBody SequencingRunsListRequest s\n \t\tPage<SequencingRun> list = sequencingRunService.list(sequencingRunsListRequest.getCurrent(),\n \t\t\t\tsequencingRunsListRequest.getPageSize(), sequencingRunsListRequest.getSort());\n \n-\t\tList<TableModel> runs = list.getContent()\n-\t\t\t\t.stream()\n-\t\t\t\t.map(s -> new SequencingRunModel(s, messageSource.getMessage(\"sequencingruns.status.\" + s.getUploadStatus()\n-\t\t\t\t\t\t.toString(), new Object[] {}, locale)))\n-\t\t\t\t.collect(Collectors.toList());\n+\t\tList<TableModel> runs = new ArrayList<>();\n+\t\tfor (SequencingRun run : list.getContent()) {\n+\t\t\truns.add(new SequencingRunModel(run, messageSource.getMessage(\n+\t\t\t\t\t\"sequencingruns.status.\" + run.getUploadStatus()\n+\t\t\t\t\t\t\t.toString(), new Object[] {}, locale)));\n+\t\t}\n \n \t\treturn new TableResponse(runs, list.getTotalElements());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU0ODA0NA=="}, "originalCommit": {"oid": "401c7b79cd22a9e00b3ed61bd3d7f0a71212a567"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1b356de18f58d0f98e1bb9bc8873c9f3be62be3", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/f1b356de18f58d0f98e1bb9bc8873c9f3be62be3", "committedDate": "2020-02-14T19:45:59Z", "message": "Added generic type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d933ba9ce432db093d013d83da6224ff142cb81", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/9d933ba9ce432db093d013d83da6224ff142cb81", "committedDate": "2020-02-14T21:04:53Z", "message": "Fixed issue with sort columns"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e6359577e471fdce68fe40942ae6fabc21c04b2", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/7e6359577e471fdce68fe40942ae6fabc21c04b2", "committedDate": "2020-02-18T14:27:17Z", "message": "Made autowired components final."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNTQyMTQy", "url": "https://github.com/phac-nml/irida/pull/570#pullrequestreview-360542142", "createdAt": "2020-02-18T17:43:45Z", "commit": {"oid": "7e6359577e471fdce68fe40942ae6fabc21c04b2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 297, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}