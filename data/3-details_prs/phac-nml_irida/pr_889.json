{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5NjczNTE4", "number": 889, "title": "Pipeline Launch: File Selection", "bodyText": "Description of changes\nDisplay a list of sample and their files that can be run on the currently selected pipeline.\n\nRelated issue\nLink to the GitHub issue this pull request addresses using the #issuenum format.  If it completes an issue, use Fixes #issuenum to automatically close the issue.\nChecklist\nThings for the developer to confirm they've done before the PR should be accepted:\n\n CHANGELOG.md (and UPGRADING.md if necessary) updated with information for new change.\n Tests added (or description of how to test) for any new features.\n User documentation updated for UI or technical changes.", "createdAt": "2020-12-14T17:13:49Z", "url": "https://github.com/phac-nml/irida/pull/889", "merged": true, "mergeCommit": {"oid": "418d783971f0d3873c2f4768b04b55181f9af332"}, "closed": true, "closedAt": "2020-12-21T21:02:19Z", "author": {"login": "joshsadam"}, "timelineItems": {"totalCount": 43, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgV9VsgH2gAyNTM5NjczNTE4OmI1YzA4NThmNDk0MmZjYWJhOWFmY2QwZGY2YmVhZWI1YTBlYjQ2MTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdocbZEAFqTU1NjY2MTEyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b5c0858f4942fcaba9afcd0df6beaeb5a0eb4618", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/b5c0858f4942fcaba9afcd0df6beaeb5a0eb4618", "committedDate": "2020-11-26T16:57:49Z", "message": "Change the layout based on the width"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42d088062e5fe053ad3039c2feabb86c43b02053", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/42d088062e5fe053ad3039c2feabb86c43b02053", "committedDate": "2020-11-26T17:50:37Z", "message": "Working on tabs for smaller displays"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4d455ccb2fe50e4e981ce7bbb7818c2732e5c42", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/e4d455ccb2fe50e4e981ce7bbb7818c2732e5c42", "committedDate": "2020-11-26T20:02:53Z", "message": "WOrking on getting files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58e7eeba3434704f94686f04adea221578adf469", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/58e7eeba3434704f94686f04adea221578adf469", "committedDate": "2020-12-07T15:47:30Z", "message": "Merge branch 'cart-sample-details' into launch_files\n\n# Conflicts:\n#\tsrc/main/webapp/resources/js/components/files/DragUpload.jsx\n#\tsrc/main/webapp/resources/js/components/icons/Icons.jsx\n#\tsrc/main/webapp/resources/js/pages/projects/reference-files/ReferenceFiles.jsx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95d36a66cb5b6a2c9765a8c20a0aae82e7df9bdb", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/95d36a66cb5b6a2c9765a8c20a0aae82e7df9bdb", "committedDate": "2020-12-07T17:07:32Z", "message": "Starting to work on the server calls for files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50ea1e8d5a1be5a57e922d44001137a4101d7ceb", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/50ea1e8d5a1be5a57e922d44001137a4101d7ceb", "committedDate": "2020-12-07T20:46:02Z", "message": "Merge branch 'cart-sample-details' into launch_files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0efdfff0d788820e0568348dfc2fe005fcf0956", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/c0efdfff0d788820e0568348dfc2fe005fcf0956", "committedDate": "2020-12-07T20:47:41Z", "message": "Get sample details from server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddce28d7aeab8868bf1e650eba61ddf5c59b66e5", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/ddce28d7aeab8868bf1e650eba61ddf5c59b66e5", "committedDate": "2020-12-08T16:51:48Z", "message": "Merge branch 'cart-sample-details' into launch_files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81d92d3ea5d8c936a67c216743ed4e3c46beba76", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/81d92d3ea5d8c936a67c216743ed4e3c46beba76", "committedDate": "2020-12-09T13:09:12Z", "message": "Display samples and files to be run on the pipeline.\n\nHide samples that cannot be run by default."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "283661a7934799b0283a0d6220ed88bff4b8d1f2", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/283661a7934799b0283a0d6220ed88bff4b8d1f2", "committedDate": "2020-12-09T14:17:33Z", "message": "Remove sample directly on the page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e579edf6c73e441707ea9eef677de914dc21fef8", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/e579edf6c73e441707ea9eef677de914dc21fef8", "committedDate": "2020-12-09T22:51:52Z", "message": "Always use a key on lists!!"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e94d9ec564402582a4afee4350da084a0408d7af", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/e94d9ec564402582a4afee4350da084a0408d7af", "committedDate": "2020-12-10T01:58:03Z", "message": "Fixed styling issues with DragUpload"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb120a54b82a141b1d01cfc06324273478fec43b", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/cb120a54b82a141b1d01cfc06324273478fec43b", "committedDate": "2020-12-10T20:37:44Z", "message": "Merge branch 'cart-sample-details' into launch_files\n\n# Conflicts:\n#\tsrc/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UISampleService.java\n#\tsrc/main/resources/i18n/messages.properties\n#\tsrc/main/webapp/package.json\n#\tsrc/main/webapp/yarn.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4552002dac573d8ad4fcc1f89195a2e03756c92d", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/4552002dac573d8ad4fcc1f89195a2e03756c92d", "committedDate": "2020-12-10T20:55:49Z", "message": "Cleaning up merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59a0394d0fb796032fac2275fd5b80b4145b9ffa", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/59a0394d0fb796032fac2275fd5b80b4145b9ffa", "committedDate": "2020-12-11T13:54:37Z", "message": "Merge branch 'cart-sample-details' into launch_files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03b12caad23c11babb45e50b4c4c47ca35242dbf", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/03b12caad23c11babb45e50b4c4c47ca35242dbf", "committedDate": "2020-12-14T14:57:58Z", "message": "Merge branch 'cart-sample-details' into launch_files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afe37c655e2c3f6fede9e2af37d8b95bfd87b1c8", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/afe37c655e2c3f6fede9e2af37d8b95bfd87b1c8", "committedDate": "2020-12-14T17:08:43Z", "message": "Fixed merge conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "717e47c52f30ffd399627906c526b75e7d121636", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/717e47c52f30ffd399627906c526b75e7d121636", "committedDate": "2020-12-15T13:12:20Z", "message": "Merge branch 'cart-sample-details' into launch_files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea8f6c0f52bca3bd54f735f453829bb788859dd0", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/ea8f6c0f52bca3bd54f735f453829bb788859dd0", "committedDate": "2020-12-15T15:06:06Z", "message": "Matching radio select"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f518533ac8a57ee5cee4ab14112d10eac6fec26", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/5f518533ac8a57ee5cee4ab14112d10eac6fec26", "committedDate": "2020-12-15T18:50:34Z", "message": "Standardize the way block radio items are displayed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36e97ffbd70894f31dd4b7934dbf7b59a1e6b897", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/36e97ffbd70894f31dd4b7934dbf7b59a1e6b897", "committedDate": "2020-12-15T19:00:52Z", "message": "Merge branch 'launch__base' into launch_files\n\n# Conflicts:\n#\tsrc/main/webapp/resources/js/pages/launch/LaunchContent.jsx\n#\tsrc/main/webapp/resources/js/pages/projects/reference-files/ReferenceFiles.jsx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48c0bdd6ee0ed70cef1f0470349a0512507a3e7d", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/48c0bdd6ee0ed70cef1f0470349a0512507a3e7d", "committedDate": "2020-12-15T19:41:57Z", "message": "Fixed some merge issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58aab3147973238c7c5357acdd26a66dba7d554c", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/58aab3147973238c7c5357acdd26a66dba7d554c", "committedDate": "2020-12-15T19:49:30Z", "message": "Added JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6285158832ef8f2a7f50d8ee07b2be5d29e94fb3", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/6285158832ef8f2a7f50d8ee07b2be5d29e94fb3", "committedDate": "2020-12-15T19:51:37Z", "message": "Commented on why internal Project class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0e21f915b1b9ec422b15fcf9eac338013f284f7", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/f0e21f915b1b9ec422b15fcf9eac338013f284f7", "committedDate": "2020-12-15T20:10:10Z", "message": "Updated JavaDoc and removed unused method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f6918d1a7b8f977e18afeeeb3d60a59024fefd2", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/0f6918d1a7b8f977e18afeeeb3d60a59024fefd2", "committedDate": "2020-12-15T20:13:28Z", "message": "Updated JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c013819e6ce80b7b313b1e77444a6c1c53e8f57", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/0c013819e6ce80b7b313b1e77444a6c1c53e8f57", "committedDate": "2020-12-15T20:16:40Z", "message": "Updated JSDoc and fix error handling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "293c4e529ee2b2911410696be48a4af17c911ad5", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/293c4e529ee2b2911410696be48a4af17c911ad5", "committedDate": "2020-12-15T20:18:23Z", "message": "Updated JSDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a2c24cd5b93f7399b64e2de86eb266e38904e4d", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/2a2c24cd5b93f7399b64e2de86eb266e38904e4d", "committedDate": "2020-12-15T20:23:45Z", "message": "Properly pass id attribute to react component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2deee63f4243e07049bf827bf5ef761f38e2c3f", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/e2deee63f4243e07049bf827bf5ef761f38e2c3f", "committedDate": "2020-12-15T20:25:44Z", "message": "Moved section header to proper folder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a0520053225f919158f1a4339fea9696dec7e92", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/9a0520053225f919158f1a4339fea9696dec7e92", "committedDate": "2020-12-15T20:27:19Z", "message": "Updated JSDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e53f76ac26ee009d510c2d8b09ffcf3eeb8c300", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/9e53f76ac26ee009d510c2d8b09ffcf3eeb8c300", "committedDate": "2020-12-15T20:42:19Z", "message": "Updated JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "202f99d72b909bfffd861d2137a341819be9b293", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/202f99d72b909bfffd861d2137a341819be9b293", "committedDate": "2020-12-16T11:03:35Z", "message": "Fixed JavaDoc errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MDI0MTM5", "url": "https://github.com/phac-nml/irida/pull/889#pullrequestreview-555024139", "createdAt": "2020-12-17T22:03:26Z", "commit": {"oid": "202f99d72b909bfffd861d2137a341819be9b293"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MDI4MDE1", "url": "https://github.com/phac-nml/irida/pull/889#pullrequestreview-555028015", "createdAt": "2020-12-17T22:10:14Z", "commit": {"oid": "202f99d72b909bfffd861d2137a341819be9b293"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QyMjoxMDoxNFrOIIKxWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODo1NzowOVrOIIu67Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTQzNTk5Mg==", "bodyText": "I don't think this belongs here", "url": "https://github.com/phac-nml/irida/pull/889#discussion_r545435992", "createdAt": "2020-12-17T22:10:14Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/apis/pipelines/pipelines.js", "diffHunk": "@@ -3,6 +3,7 @@\n  */\n import axios from \"axios\";\n import { setBaseUrl } from \"../../utilities/url-utilities\";\n+import { notification } from \"antd\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "202f99d72b909bfffd861d2137a341819be9b293"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAyMTk0Mw==", "bodyText": "Change variable ls to launchSample or something to make it more clear", "url": "https://github.com/phac-nml/irida/pull/889#discussion_r546021943", "createdAt": "2020-12-18T18:46:59Z", "author": {"login": "deepsidhu85"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/services/UIPipelineSampleService.java", "diffHunk": "@@ -0,0 +1,56 @@\n+package ca.corefacility.bioinformatics.irida.ria.web.services;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Component;\n+\n+import ca.corefacility.bioinformatics.irida.model.project.Project;\n+import ca.corefacility.bioinformatics.irida.model.sample.Sample;\n+import ca.corefacility.bioinformatics.irida.model.sequenceFile.SequencingObject;\n+import ca.corefacility.bioinformatics.irida.ria.web.launchPipeline.dtos.LaunchSample;\n+\n+/**\n+ * UI Service for all things related to samples within the pipeline\n+ */\n+@Component\n+public class UIPipelineSampleService {\n+\tprivate final UISampleService sampleService;\n+\tprivate final UICartService cartService;\n+\n+\t@Autowired\n+\tpublic UIPipelineSampleService(UISampleService sampleService, UICartService cartService) {\n+\t\tthis.sampleService = sampleService;\n+\t\tthis.cartService = cartService;\n+\t}\n+\n+\t/**\n+\t * Get a list of the samples that are in the cart and get their associated sequence files that\n+\t * can be used on the current pipeline\n+\t *\n+\t * @param paired  Whether paired end files can be run on the current pipeline\n+\t * @param singles Whether single end files can be run on the current pipeline\n+\t * @return list of samples containing their associated sequencing data\n+\t */\n+\tpublic List<LaunchSample> getPipelineSamples(boolean paired, boolean singles) {\n+\t\tMap<Project, List<Sample>> cart = cartService.getFullCart();\n+\t\tList<LaunchSample> samples = new ArrayList<>();\n+\t\tcart.forEach((project, projectSamples) -> {\n+\t\t\tfor (Sample sample : projectSamples) {\n+\t\t\t\tLaunchSample ls = new LaunchSample(sample, project);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "202f99d72b909bfffd861d2137a341819be9b293"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAyNjk1Mw==", "bodyText": "Change s to a different variable name to make it more clear", "url": "https://github.com/phac-nml/irida/pull/889#discussion_r546026953", "createdAt": "2020-12-18T18:54:33Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/launch/LaunchFiles.jsx", "diffHunk": "@@ -0,0 +1,130 @@\n+import React from \"react\";\n+import { fetchPipelineSamples } from \"../../apis/pipelines/pipelines\";\n+import {\n+  Button,\n+  Dropdown,\n+  List,\n+  Menu,\n+  notification,\n+  Space,\n+  Typography,\n+} from \"antd\";\n+import { useLaunch } from \"./launch-context\";\n+import { IconDropDown } from \"../../components/icons/Icons\";\n+import { removeSample } from \"../../apis/cart/cart\";\n+import { SectionHeading } from \"../../components/ant.design/SectionHeading\";\n+import { SampleFilesListItem } from \"./files/SampleFilesListItem\";\n+import { setSelectedSampleFiles } from \"./launch-dispatch\";\n+\n+/**\n+ * React component to display sample files that will be used in the launching\n+ * of the pipeline\n+ *\n+ * @returns {JSX.Element}\n+ * @constructor\n+ */\n+export function LaunchFiles() {\n+  const [selected, setSelected] = React.useState();\n+  const [\n+    { acceptsPairedSequenceFiles: paired, acceptsSingleSequenceFiles: singles },\n+    dispatch,\n+  ] = useLaunch();\n+  const [hideUnusable, setHideUnusable] = React.useState(true);\n+  const [visibleSamples, setVisibleSamples] = React.useState();\n+  const [samples, setSamples] = React.useState();\n+\n+  React.useEffect(() => {\n+    fetchPipelineSamples({\n+      paired,\n+      singles,\n+    })\n+      .then((data) => {\n+        setSamples(data);\n+        setSelected(\n+          data.filter((s) => s.files.length).map((s) => s.files[0].identifier)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "202f99d72b909bfffd861d2137a341819be9b293"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAyNzMyOQ==", "bodyText": "Same as above. Change s to a more clear variable name", "url": "https://github.com/phac-nml/irida/pull/889#discussion_r546027329", "createdAt": "2020-12-18T18:55:21Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/launch/LaunchFiles.jsx", "diffHunk": "@@ -0,0 +1,130 @@\n+import React from \"react\";\n+import { fetchPipelineSamples } from \"../../apis/pipelines/pipelines\";\n+import {\n+  Button,\n+  Dropdown,\n+  List,\n+  Menu,\n+  notification,\n+  Space,\n+  Typography,\n+} from \"antd\";\n+import { useLaunch } from \"./launch-context\";\n+import { IconDropDown } from \"../../components/icons/Icons\";\n+import { removeSample } from \"../../apis/cart/cart\";\n+import { SectionHeading } from \"../../components/ant.design/SectionHeading\";\n+import { SampleFilesListItem } from \"./files/SampleFilesListItem\";\n+import { setSelectedSampleFiles } from \"./launch-dispatch\";\n+\n+/**\n+ * React component to display sample files that will be used in the launching\n+ * of the pipeline\n+ *\n+ * @returns {JSX.Element}\n+ * @constructor\n+ */\n+export function LaunchFiles() {\n+  const [selected, setSelected] = React.useState();\n+  const [\n+    { acceptsPairedSequenceFiles: paired, acceptsSingleSequenceFiles: singles },\n+    dispatch,\n+  ] = useLaunch();\n+  const [hideUnusable, setHideUnusable] = React.useState(true);\n+  const [visibleSamples, setVisibleSamples] = React.useState();\n+  const [samples, setSamples] = React.useState();\n+\n+  React.useEffect(() => {\n+    fetchPipelineSamples({\n+      paired,\n+      singles,\n+    })\n+      .then((data) => {\n+        setSamples(data);\n+        setSelected(\n+          data.filter((s) => s.files.length).map((s) => s.files[0].identifier)\n+        );\n+      })\n+      .catch((message) => notification.error({ message }));\n+  }, [paired, singles]);\n+\n+  React.useEffect(() => {\n+    setSelectedSampleFiles(dispatch, selected);\n+  }, [selected]);\n+\n+  React.useEffect(() => {\n+    if (samples) {\n+      if (hideUnusable) {\n+        setVisibleSamples(samples.filter((s) => s.files.length));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "202f99d72b909bfffd861d2137a341819be9b293"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAyNzY4NA==", "bodyText": "Can I get you to add comments for these useeffect hooks. Just so we are clear with what's happening", "url": "https://github.com/phac-nml/irida/pull/889#discussion_r546027684", "createdAt": "2020-12-18T18:56:03Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/launch/LaunchFiles.jsx", "diffHunk": "@@ -0,0 +1,130 @@\n+import React from \"react\";\n+import { fetchPipelineSamples } from \"../../apis/pipelines/pipelines\";\n+import {\n+  Button,\n+  Dropdown,\n+  List,\n+  Menu,\n+  notification,\n+  Space,\n+  Typography,\n+} from \"antd\";\n+import { useLaunch } from \"./launch-context\";\n+import { IconDropDown } from \"../../components/icons/Icons\";\n+import { removeSample } from \"../../apis/cart/cart\";\n+import { SectionHeading } from \"../../components/ant.design/SectionHeading\";\n+import { SampleFilesListItem } from \"./files/SampleFilesListItem\";\n+import { setSelectedSampleFiles } from \"./launch-dispatch\";\n+\n+/**\n+ * React component to display sample files that will be used in the launching\n+ * of the pipeline\n+ *\n+ * @returns {JSX.Element}\n+ * @constructor\n+ */\n+export function LaunchFiles() {\n+  const [selected, setSelected] = React.useState();\n+  const [\n+    { acceptsPairedSequenceFiles: paired, acceptsSingleSequenceFiles: singles },\n+    dispatch,\n+  ] = useLaunch();\n+  const [hideUnusable, setHideUnusable] = React.useState(true);\n+  const [visibleSamples, setVisibleSamples] = React.useState();\n+  const [samples, setSamples] = React.useState();\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "202f99d72b909bfffd861d2137a341819be9b293"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAyODI2OQ==", "bodyText": "Change s to a more clear variable name", "url": "https://github.com/phac-nml/irida/pull/889#discussion_r546028269", "createdAt": "2020-12-18T18:57:09Z", "author": {"login": "deepsidhu85"}, "path": "src/main/webapp/resources/js/pages/launch/LaunchFiles.jsx", "diffHunk": "@@ -0,0 +1,130 @@\n+import React from \"react\";\n+import { fetchPipelineSamples } from \"../../apis/pipelines/pipelines\";\n+import {\n+  Button,\n+  Dropdown,\n+  List,\n+  Menu,\n+  notification,\n+  Space,\n+  Typography,\n+} from \"antd\";\n+import { useLaunch } from \"./launch-context\";\n+import { IconDropDown } from \"../../components/icons/Icons\";\n+import { removeSample } from \"../../apis/cart/cart\";\n+import { SectionHeading } from \"../../components/ant.design/SectionHeading\";\n+import { SampleFilesListItem } from \"./files/SampleFilesListItem\";\n+import { setSelectedSampleFiles } from \"./launch-dispatch\";\n+\n+/**\n+ * React component to display sample files that will be used in the launching\n+ * of the pipeline\n+ *\n+ * @returns {JSX.Element}\n+ * @constructor\n+ */\n+export function LaunchFiles() {\n+  const [selected, setSelected] = React.useState();\n+  const [\n+    { acceptsPairedSequenceFiles: paired, acceptsSingleSequenceFiles: singles },\n+    dispatch,\n+  ] = useLaunch();\n+  const [hideUnusable, setHideUnusable] = React.useState(true);\n+  const [visibleSamples, setVisibleSamples] = React.useState();\n+  const [samples, setSamples] = React.useState();\n+\n+  React.useEffect(() => {\n+    fetchPipelineSamples({\n+      paired,\n+      singles,\n+    })\n+      .then((data) => {\n+        setSamples(data);\n+        setSelected(\n+          data.filter((s) => s.files.length).map((s) => s.files[0].identifier)\n+        );\n+      })\n+      .catch((message) => notification.error({ message }));\n+  }, [paired, singles]);\n+\n+  React.useEffect(() => {\n+    setSelectedSampleFiles(dispatch, selected);\n+  }, [selected]);\n+\n+  React.useEffect(() => {\n+    if (samples) {\n+      if (hideUnusable) {\n+        setVisibleSamples(samples.filter((s) => s.files.length));\n+      } else {\n+        setVisibleSamples(samples);\n+      }\n+    }\n+  }, [samples, hideUnusable]);\n+\n+  const toggleUsable = () => setHideUnusable(!hideUnusable);\n+\n+  const updateSelectedFiles = (previous, current) => {\n+    const ids = new Set(selected);\n+    ids.delete(previous);\n+    ids.add(current);\n+    setSelected(Array.from(ids));\n+  };\n+\n+  const removeSampleFromCart = (sample, selectedId) => {\n+    removeSample(sample.project.id, sample.id).then(() => {\n+      setSamples(samples.filter((s) => sample.id !== s.id));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "202f99d72b909bfffd861d2137a341819be9b293"}, "originalPosition": 75}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12c3073e466016cf65502b0063b414c85a846a59", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/12c3073e466016cf65502b0063b414c85a846a59", "committedDate": "2020-12-18T19:57:35Z", "message": "Cleaned up section headings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c22841d88426c7aff7446e90af83e91ad7044b53", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/c22841d88426c7aff7446e90af83e91ad7044b53", "committedDate": "2020-12-18T19:58:27Z", "message": "Removed unused notifications import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "816dd5f6219aa976df98061c945d3d578c9dbac5", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/816dd5f6219aa976df98061c945d3d578c9dbac5", "committedDate": "2020-12-18T20:02:15Z", "message": "Updated variable name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6da8d9bff13a33be6bceec4b4f0a2a30a50ed075", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/6da8d9bff13a33be6bceec4b4f0a2a30a50ed075", "committedDate": "2020-12-18T20:05:37Z", "message": "Updated variable anme to make more readable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab4014ebb2261779550f82d5caffb6c5e7d95abf", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/ab4014ebb2261779550f82d5caffb6c5e7d95abf", "committedDate": "2020-12-18T20:08:33Z", "message": "Updated variable name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f439228120aafd4fb6c7818526a305e0498fc0e", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/1f439228120aafd4fb6c7818526a305e0498fc0e", "committedDate": "2020-12-18T20:12:48Z", "message": "Updated variable name.\n\nRemoved my favourite letter 's'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36217e186faf24e3afa542f73527c487c7048c32", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/36217e186faf24e3afa542f73527c487c7048c32", "committedDate": "2020-12-18T20:26:29Z", "message": "Updated JSDoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NjYxMTI2", "url": "https://github.com/phac-nml/irida/pull/889#pullrequestreview-556661126", "createdAt": "2020-12-21T21:01:28Z", "commit": {"oid": "36217e186faf24e3afa542f73527c487c7048c32"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4997, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}