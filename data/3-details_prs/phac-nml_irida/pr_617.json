{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1MjA2MDk0", "number": 617, "title": "Analysis/ move output file preview", "bodyText": "Description of changes\nWhat did you change in this pull request?  Provide a description of files changed, user interactions changed, etc.  Include how to test your changes.\nMoved output files from within phylogenetic and biohansel tabs to their own tab.\nRelated issue\nLink to the GitHub issue this pull request addresses using the #issuenum format.  If it completes an issue, use Fixes #issuenum to automatically close the issue.\nChecklist\nThings for the developer to confirm they've done before the PR should be accepted:\n* [ ] CHANGELOG.md (and UPGRADING.md if necessary) updated with information for new change.\n\n Tests added (or description of how to test) for any new features.\n* [ ] User documentation updated for UI or technical changes.", "createdAt": "2020-03-07T23:45:56Z", "url": "https://github.com/phac-nml/irida/pull/617", "merged": true, "mergeCommit": {"oid": "71dec7cc55030b6ccfbe2b26d39cb01ea21d560a"}, "closed": true, "closedAt": "2020-03-09T20:28:07Z", "author": {"login": "deepsidhu85"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcLdWPFgH2gAyMzg1MjA2MDk0OmNkMjQ2NGQwMTdmOTkzYzUwMGE0Y2VjYjFmMTg3NmEzMjVmNjA4YWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMD7iPgFqTM3MTUwNDYyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cd2464d017f993c500a4cecb1f1876a325f608af", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/cd2464d017f993c500a4cecb1f1876a325f608af", "committedDate": "2020-03-07T23:30:47Z", "message": "Moved output files from biohansel and phylogenetic tree view and replaced with output files tab"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53b85a3c6bc44c6ad46863d9f207291a8fccec27", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/53b85a3c6bc44c6ad46863d9f207291a8fccec27", "committedDate": "2020-03-07T23:41:41Z", "message": "Merged branch and fixed merge conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2c3910778fa540f9c7bc5ba785efe22a690022d", "author": {"user": null}, "url": "https://github.com/phac-nml/irida/commit/e2c3910778fa540f9c7bc5ba785efe22a690022d", "committedDate": "2020-03-09T15:08:04Z", "message": "Merge branch 'analysis/_base_results' into analysis/_move-output-file-preview"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNDk2NTUy", "url": "https://github.com/phac-nml/irida/pull/617#pullrequestreview-371496552", "createdAt": "2020-03-09T20:15:16Z", "commit": {"oid": "e2c3910778fa540f9c7bc5ba785efe22a690022d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQyMDoxNToxNlrOFz3zWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQyMDoxNToxNlrOFz3zWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkzNTk2Mw==", "bodyText": "You needed the br element because you used a span (inline) element.  If you used a div (block) element the break would already be there.", "url": "https://github.com/phac-nml/irida/pull/617#discussion_r389935963", "createdAt": "2020-03-09T20:15:16Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/analysis/components/AnalysisBioHansel.jsx", "diffHunk": "@@ -67,57 +57,88 @@ export default function AnalysisBioHansel() {\n     }\n   }\n \n-  return (\n-    <Layout>\n-      <Sider width={200} style={{ background: grey1 }}>\n-        <Location>\n-          {props => {\n-            const keyname = props.location.pathname.match(pathRegx);\n-            return (\n-              <Menu\n-                mode=\"vertical\"\n-                selectedKeys={[keyname ? keyname[1] : BIOHANSEL.INFO]}\n-              >\n-                <Menu.Item key=\"info\">\n-                  <Link to={`${DEFAULT_URL}/${BIOHANSEL.INFO}`}>\n-                    {i18n(\"AnalysisBioHansel.bioHanselInformation\")}\n-                  </Link>\n-                </Menu.Item>\n-                <Menu.Item key=\"file_preview\">\n-                  <Link to={`${DEFAULT_URL}/${BIOHANSEL.FILE_PREVIEW}`}>\n-                    {i18n(\"AnalysisOutputs.outputFilePreview\")}\n-                  </Link>\n-                </Menu.Item>\n-              </Menu>\n-            );\n-          }}\n-        </Location>\n-      </Sider>\n+  const biohanselResults = [\n+    {\n+      title: i18n(\"AnalysisBioHansel.sampleName\"),\n+      desc: bioHanselResults ? bioHanselResults.sample : \"\"\n+    },\n+    {\n+      title: `${i18n(\"AnalysisBioHansel.schemeName\")} (v${i18n(\n+        \"AnalysisBioHansel.schemeVersion\"\n+      )})`,\n+      desc: bioHanselResults\n+        ? `${bioHanselResults.scheme} (${bioHanselResults.scheme_version})`\n+        : \"\"\n+    },\n+    {\n+      title: i18n(\"AnalysisBioHansel.subtype\"),\n+      desc: bioHanselResults ? bioHanselResults.subtype : \"\"\n+    },\n+    {\n+      title: i18n(\"AnalysisBioHansel.averageTileFrequency\"),\n+      desc:\n+        bioHanselResults && bioHanselResults.avg_tile_coverage\n+          ? bioHanselResults.avg_tile_coverage.toString()\n+          : \"\"\n+    },\n+    {\n+      title: i18n(\"AnalysisBioHansel.qualityControlStatus\"),\n+      desc: bioHanselResults ? (\n+        bioHanselResults.qc_status === \"PASS\" ? (\n+          <Success\n+            message={bioHanselResults.qc_status}\n+          />\n+        ) : bioHanselResults.qc_status === \"FAIL\" ? (\n+          <Error\n+            message={formatQcMessage(\n+              bioHanselResults.qc_status,\n+              bioHanselResults.qc_message\n+            )}\n+          />\n+        ) : (\n+          <Warning\n+            message={formatQcMessage(\n+              bioHanselResults.qc_status,\n+              bioHanselResults.qc_message\n+            )}\n+          />\n+        )\n+      ) : (\n+        \"\"\n+      )\n+    }\n+  ];\n \n-      <Layout style={{ paddingLeft: SPACE_MD, backgroundColor: grey1 }}>\n-        <Content>\n-          {typeof bioHanselResults === \"undefined\" ? (\n-            <WarningAlert\n-              message={i18n(\"AnalysisBioHansel.resultsUnavailable\")}\n-            />\n-          ) : bioHanselResults !== null ? (\n-            <Suspense fallback={<ContentLoading />}>\n-              <Router>\n-                <BioHanselInfo\n-                  bioHanselResults={bioHanselResults}\n-                  path={`${DEFAULT_URL}/${BIOHANSEL.INFO}`}\n-                  default\n-                />\n-                <OutputFilePreview\n-                  path={`${DEFAULT_URL}/${BIOHANSEL.FILE_PREVIEW}`}\n-                />\n-              </Router>\n-            </Suspense>\n-          ) : (\n-            <ContentLoading />\n-          )}\n-        </Content>\n-      </Layout>\n+  /*\n+   * Formats the QC status and QC messages to display\n+   * in a list.\n+   */\n+  function formatQcMessage(qc_status, qc_message) {\n+    let msgs = [];\n+    if (qc_message) {\n+      msgs = qc_message.trim().split(\"|\");\n+    }\n+\n+    return (\n+      <>\n+        <span>{qc_status}</span>\n+        <br />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2c3910778fa540f9c7bc5ba785efe22a690022d"}, "originalPosition": 163}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNTA0NjI0", "url": "https://github.com/phac-nml/irida/pull/617#pullrequestreview-371504624", "createdAt": "2020-03-09T20:27:55Z", "commit": {"oid": "e2c3910778fa540f9c7bc5ba785efe22a690022d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 190, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}