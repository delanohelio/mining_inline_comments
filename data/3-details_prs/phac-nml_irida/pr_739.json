{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5MTgwOTE4", "number": 739, "title": "Remove gravatar", "bodyText": "Description of changes\nCompletely removed using gravatar and replaced with a simple icon.\nRelated issue\nFixes #596\nChecklist\nThings for the developer to confirm they've done before the PR should be accepted:\n\n CHANGELOG.md (and UPGRADING.md if necessary) updated with information for new change.\n* [ ] Tests added (or description of how to test) for any new features.\n* [ ] User documentation updated for UI or technical changes.", "createdAt": "2020-06-24T12:39:43Z", "url": "https://github.com/phac-nml/irida/pull/739", "merged": true, "mergeCommit": {"oid": "b1f2598588fd308c209e9d3955efdfe257d57353"}, "closed": true, "closedAt": "2020-06-24T19:51:34Z", "author": {"login": "joshsadam"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuYSiVAH2gAyNDM5MTgwOTE4OmI4MzBlYTk3MDhhZTMyMTNlNzdiMTVkNTNjYTk1MDgwNmIzYzc4ZDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcufiNIgFqTQzNjk1NzUzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b830ea9708ae3213e77b15d53ca950806b3c78d8", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/b830ea9708ae3213e77b15d53ca950806b3c78d8", "committedDate": "2020-06-24T11:24:34Z", "message": ":heavy_minus_sign: Removed jgravatar dependency from pom.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54b59ff4d7e34e89d1973103e02c6bdde311441b", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/54b59ff4d7e34e89d1973103e02c6bdde311441b", "committedDate": "2020-06-24T12:38:24Z", "message": ":construction: Removed gravatar from UI."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11762d04640269926a127665aa9f5e145b920ab1", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/11762d04640269926a127665aa9f5e145b920ab1", "committedDate": "2020-06-24T12:47:13Z", "message": ":memo: Fixed the one image that directly references the icon."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NjIyMzU3", "url": "https://github.com/phac-nml/irida/pull/739#pullrequestreview-436622357", "createdAt": "2020-06-24T13:01:55Z", "commit": {"oid": "11762d04640269926a127665aa9f5e145b920ab1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxMzowMTo1NVrOGoRD3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxMzoxMTo1NFrOGoRcBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg3NTc0Mw==", "bodyText": "Its ok that these are getting set as final, but I think your formatter is running amok again.", "url": "https://github.com/phac-nml/irida/pull/739#discussion_r444875743", "createdAt": "2020-06-24T13:01:55Z", "author": {"login": "tom114"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/security/LoginSuccessHandler.java", "diffHunk": "@@ -1,35 +1,32 @@\n package ca.corefacility.bioinformatics.irida.ria.security;\n \n-import ca.corefacility.bioinformatics.irida.model.user.User;\n-import ca.corefacility.bioinformatics.irida.repositories.user.UserRepository;\n-import com.timgroup.jgravatar.Gravatar;\n-import com.timgroup.jgravatar.GravatarDefaultImage;\n-import com.timgroup.jgravatar.GravatarRating;\n+import java.io.IOException;\n+import java.util.Date;\n+import java.util.Locale;\n+\n+import javax.servlet.ServletException;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import javax.servlet.http.HttpSession;\n+\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.springframework.security.core.Authentication;\n import org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler;\n import org.springframework.web.servlet.LocaleResolver;\n \n-import javax.servlet.ServletException;\n-import javax.servlet.http.HttpServletRequest;\n-import javax.servlet.http.HttpServletResponse;\n-import javax.servlet.http.HttpSession;\n-import java.io.IOException;\n-import java.util.Date;\n-import java.util.Locale;\n+import ca.corefacility.bioinformatics.irida.model.user.User;\n+import ca.corefacility.bioinformatics.irida.repositories.user.UserRepository;\n \n /**\n  * Handles actions for when a user is successfully logged in.\n  */\n public class LoginSuccessHandler extends SavedRequestAwareAuthenticationSuccessHandler {\n \tprivate static final Logger logger = LoggerFactory.getLogger(LoginSuccessHandler.class);\n \n-\tprivate static final String GRAVATAR_ATTRIBUTE = \"gravatar\";\n-\n-\tprivate UserRepository userRepository;\n+\tprivate final UserRepository userRepository;\n \n-\tprivate LocaleResolver localeResolver;\n+\tprivate final LocaleResolver localeResolver;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11762d04640269926a127665aa9f5e145b920ab1"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg3ODYwNQ==", "bodyText": "Wasn't the plan to use this library as a replacement? https://ant.design/components/avatar/", "url": "https://github.com/phac-nml/irida/pull/739#discussion_r444878605", "createdAt": "2020-06-24T13:06:45Z", "author": {"login": "tom114"}, "path": "CHANGELOG.md", "diffHunk": "@@ -13,6 +14,7 @@ Changes\n * [UI]: Fixed bug when creating/modifying a metadata template the user could not search for a field. (20.05.1)\n * [UI]: Fixed bug where managers could not load Users listing page. (20.05.1)\n * [UI]: Added functionality for users to synchronize assembly data from remote APIs.\n+* [UI]: Removed gravatar and replaced with user icon.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11762d04640269926a127665aa9f5e145b920ab1"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg4MTkyNA==", "bodyText": "If the style is changing this drastically, pictures in the docs that focus on the user icon should be redone.  At first look I can find this one: https://irida.corefacility.ca/documentation/user/user/dashboard/#user-settings", "url": "https://github.com/phac-nml/irida/pull/739#discussion_r444881924", "createdAt": "2020-06-24T13:11:54Z", "author": {"login": "tom114"}, "path": "doc/user/user/dashboard/index.md", "diffHunk": "@@ -124,7 +124,7 @@ You will be shown a confirmation and your browser will reload the current page.\n User Settings\n -------------\n \n-The settings menu allows you to view and edit the details of your own user account. This menu also allows you to update your email subscription preferences.  You can find the settings menu in the top, right-hand corner of the page, if you have a [Gravatar](https://en.gravatar.com/) account associated with your email in IRIDA, your gravatar will be displayed:\n+The settings menu allows you to view and edit the details of your own user account. This menu also allows you to update your email subscription preferences.  You can find the settings menu in the top, right-hand corner of the page under the user icon:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11762d04640269926a127665aa9f5e145b920ab1"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NjYzNTg3", "url": "https://github.com/phac-nml/irida/pull/739#pullrequestreview-436663587", "createdAt": "2020-06-24T13:48:06Z", "commit": {"oid": "11762d04640269926a127665aa9f5e145b920ab1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxMzo0ODowNlrOGoS76w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxMzo0ODowNlrOGoS76w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkwNjQ3NQ==", "bodyText": "Thoughts on using a circle style icon instead so the style stays a bit more familiar until we get the new topbar done?  If we used something like this we can get by without a whole bunch of docs changes.  https://fontawesome.com/icons/user-circle?style=solid", "url": "https://github.com/phac-nml/irida/pull/739#discussion_r444906475", "createdAt": "2020-06-24T13:48:06Z", "author": {"login": "tom114"}, "path": "src/main/webapp/pages/template/main-navigation.html", "diffHunk": "@@ -212,15 +212,15 @@\n                         </ul>\n                     </li>\n                     <li class=\"dropdown\">\n-                        <a href=\"#\" class=\"dropdown-toggle nav-gravatar-wrapper\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\"\n+                        <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\"\n                            aria-expanded=\"false\">\n-                            <img class=\"nav-gravatar\" th:src=\"${session.gravatar}\" alt=\"User Icon\"/>\n+                            <i class=\"far fa-user nav-icon\"></i>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11762d04640269926a127665aa9f5e145b920ab1"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70f5272a1e2d1e50b3594b0ed453dd24905b7c4d", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/70f5272a1e2d1e50b3594b0ed453dd24905b7c4d", "committedDate": "2020-06-24T14:02:26Z", "message": ":construction: Updated to be a solid user"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa43827bb4d7235fdaa4f1f82ec7ef5e54dd2d2e", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/aa43827bb4d7235fdaa4f1f82ec7ef5e54dd2d2e", "committedDate": "2020-06-24T14:07:04Z", "message": ":memo: Updated image for user accounts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acfc8cf342ab49cbbeb25cba877aae93a7707f46", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/acfc8cf342ab49cbbeb25cba877aae93a7707f46", "committedDate": "2020-06-24T14:24:43Z", "message": ":memo: Updated images"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d88bc8f51bb86656bb56703e1ab50b4258e21be", "author": {"user": {"login": "joshsadam", "name": "Josh Adam"}}, "url": "https://github.com/phac-nml/irida/commit/8d88bc8f51bb86656bb56703e1ab50b4258e21be", "committedDate": "2020-06-24T18:29:03Z", "message": "Merge branch 'development' into remove-gravatar\n\n# Conflicts:\n#\tCHANGELOG.md"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2OTU3NTM0", "url": "https://github.com/phac-nml/irida/pull/739#pullrequestreview-436957534", "createdAt": "2020-06-24T19:51:01Z", "commit": {"oid": "8d88bc8f51bb86656bb56703e1ab50b4258e21be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 28, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}