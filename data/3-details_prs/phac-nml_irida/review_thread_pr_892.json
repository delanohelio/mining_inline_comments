{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxMjIyOTEy", "number": 892, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxODo0OTo1MlrOFL3QGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQyMTozMDoxOFrOFNa0-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3OTgzODk2OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/announcement/AnnouncementDashboard.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxODo0OTo1MlrOIPSVAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQyMzo1OTowNVrOIPZ-Qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjg5OTg0MQ==", "bodyText": "Can you update this to be an actual avatar:\n\n              <Avatar\n                style={{ backgroundColor: \"#fff\" }}\n                icon={<PriorityFlag hasPriority={item.priority} />}\n              />", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r552899841", "createdAt": "2021-01-06T18:49:52Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/announcement/AnnouncementDashboard.jsx", "diffHunk": "@@ -0,0 +1,57 @@\n+import React, { useEffect, useState } from \"react\";\n+import { List, notification, Typography } from \"antd\";\n+import { fromNow } from \"../../utilities/date-utilities\";\n+import {\n+  getUnreadAnnouncements,\n+  markAnnouncementRead,\n+} from \"../../apis/announcements/announcements\";\n+import ViewUnreadAnnouncement from \"./ViewUnreadAnnouncement\";\n+import Markdown from \"react-markdown\";\n+import { PriorityFlag } from \"./PriorityFlag\";\n+\n+export function AnnouncementDashboard() {\n+  const [unreadAnnouncements, setUnreadAnnouncements] = useState([]);\n+  const [unreadTotal, setUnreadTotal] = useState(0);\n+  const { Paragraph } = Typography;\n+\n+  useEffect(() => {\n+    getUnreadAnnouncements().then((data) => {\n+      setUnreadAnnouncements(data.data);\n+      setUnreadTotal(data.data.length);\n+    });\n+  }, [unreadTotal]);\n+\n+  function markAnnouncementAsRead(aID) {\n+    return markAnnouncementRead({ aID })\n+      .then(() => {\n+        setUnreadTotal(unreadTotal - 1);\n+      })\n+      .catch(({ message }) => {\n+        notification.error({ message });\n+      });\n+  }\n+\n+  return (\n+    <List\n+      pagination={unreadTotal > 5 ? { pageSize: 5 } : false}\n+      dataSource={unreadAnnouncements}\n+      renderItem={(item) => (\n+        <List.Item className=\"t-announcement-item\">\n+          <List.Item.Meta\n+            avatar={<PriorityFlag hasPriority={item.priority} />}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "580a43f85ad92c717be0716b224ff8bb13a25f11"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzAyNTA5MA==", "bodyText": "Please see c74c721.", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r553025090", "createdAt": "2021-01-06T23:59:05Z", "author": {"login": "ksierks"}, "path": "src/main/webapp/resources/js/pages/announcement/AnnouncementDashboard.jsx", "diffHunk": "@@ -0,0 +1,57 @@\n+import React, { useEffect, useState } from \"react\";\n+import { List, notification, Typography } from \"antd\";\n+import { fromNow } from \"../../utilities/date-utilities\";\n+import {\n+  getUnreadAnnouncements,\n+  markAnnouncementRead,\n+} from \"../../apis/announcements/announcements\";\n+import ViewUnreadAnnouncement from \"./ViewUnreadAnnouncement\";\n+import Markdown from \"react-markdown\";\n+import { PriorityFlag } from \"./PriorityFlag\";\n+\n+export function AnnouncementDashboard() {\n+  const [unreadAnnouncements, setUnreadAnnouncements] = useState([]);\n+  const [unreadTotal, setUnreadTotal] = useState(0);\n+  const { Paragraph } = Typography;\n+\n+  useEffect(() => {\n+    getUnreadAnnouncements().then((data) => {\n+      setUnreadAnnouncements(data.data);\n+      setUnreadTotal(data.data.length);\n+    });\n+  }, [unreadTotal]);\n+\n+  function markAnnouncementAsRead(aID) {\n+    return markAnnouncementRead({ aID })\n+      .then(() => {\n+        setUnreadTotal(unreadTotal - 1);\n+      })\n+      .catch(({ message }) => {\n+        notification.error({ message });\n+      });\n+  }\n+\n+  return (\n+    <List\n+      pagination={unreadTotal > 5 ? { pageSize: 5 } : false}\n+      dataSource={unreadAnnouncements}\n+      renderItem={(item) => (\n+        <List.Item className=\"t-announcement-item\">\n+          <List.Item.Meta\n+            avatar={<PriorityFlag hasPriority={item.priority} />}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjg5OTg0MQ=="}, "originalCommit": {"oid": "580a43f85ad92c717be0716b224ff8bb13a25f11"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3OTg0MDQxOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/announcement/AnnouncementDashboard.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxODo1MDoxOFrOIPSV4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQyMzo1ODo0MVrOIPZ9wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjkwMDA2Ng==", "bodyText": "Please remove commented out code", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r552900066", "createdAt": "2021-01-06T18:50:18Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/announcement/AnnouncementDashboard.jsx", "diffHunk": "@@ -0,0 +1,57 @@\n+import React, { useEffect, useState } from \"react\";\n+import { List, notification, Typography } from \"antd\";\n+import { fromNow } from \"../../utilities/date-utilities\";\n+import {\n+  getUnreadAnnouncements,\n+  markAnnouncementRead,\n+} from \"../../apis/announcements/announcements\";\n+import ViewUnreadAnnouncement from \"./ViewUnreadAnnouncement\";\n+import Markdown from \"react-markdown\";\n+import { PriorityFlag } from \"./PriorityFlag\";\n+\n+export function AnnouncementDashboard() {\n+  const [unreadAnnouncements, setUnreadAnnouncements] = useState([]);\n+  const [unreadTotal, setUnreadTotal] = useState(0);\n+  const { Paragraph } = Typography;\n+\n+  useEffect(() => {\n+    getUnreadAnnouncements().then((data) => {\n+      setUnreadAnnouncements(data.data);\n+      setUnreadTotal(data.data.length);\n+    });\n+  }, [unreadTotal]);\n+\n+  function markAnnouncementAsRead(aID) {\n+    return markAnnouncementRead({ aID })\n+      .then(() => {\n+        setUnreadTotal(unreadTotal - 1);\n+      })\n+      .catch(({ message }) => {\n+        notification.error({ message });\n+      });\n+  }\n+\n+  return (\n+    <List\n+      pagination={unreadTotal > 5 ? { pageSize: 5 } : false}\n+      dataSource={unreadAnnouncements}\n+      renderItem={(item) => (\n+        <List.Item className=\"t-announcement-item\">\n+          <List.Item.Meta\n+            avatar={<PriorityFlag hasPriority={item.priority} />}\n+            title=<ViewUnreadAnnouncement\n+              announcement={item}\n+              markAnnouncementAsRead={markAnnouncementAsRead}\n+            />\n+            description={fromNow({ date: item.createdDate })}\n+          />\n+          {/*<Paragraph*/}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "580a43f85ad92c717be0716b224ff8bb13a25f11"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzAyNDk2Mg==", "bodyText": "Please see 8289eae.", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r553024962", "createdAt": "2021-01-06T23:58:41Z", "author": {"login": "ksierks"}, "path": "src/main/webapp/resources/js/pages/announcement/AnnouncementDashboard.jsx", "diffHunk": "@@ -0,0 +1,57 @@\n+import React, { useEffect, useState } from \"react\";\n+import { List, notification, Typography } from \"antd\";\n+import { fromNow } from \"../../utilities/date-utilities\";\n+import {\n+  getUnreadAnnouncements,\n+  markAnnouncementRead,\n+} from \"../../apis/announcements/announcements\";\n+import ViewUnreadAnnouncement from \"./ViewUnreadAnnouncement\";\n+import Markdown from \"react-markdown\";\n+import { PriorityFlag } from \"./PriorityFlag\";\n+\n+export function AnnouncementDashboard() {\n+  const [unreadAnnouncements, setUnreadAnnouncements] = useState([]);\n+  const [unreadTotal, setUnreadTotal] = useState(0);\n+  const { Paragraph } = Typography;\n+\n+  useEffect(() => {\n+    getUnreadAnnouncements().then((data) => {\n+      setUnreadAnnouncements(data.data);\n+      setUnreadTotal(data.data.length);\n+    });\n+  }, [unreadTotal]);\n+\n+  function markAnnouncementAsRead(aID) {\n+    return markAnnouncementRead({ aID })\n+      .then(() => {\n+        setUnreadTotal(unreadTotal - 1);\n+      })\n+      .catch(({ message }) => {\n+        notification.error({ message });\n+      });\n+  }\n+\n+  return (\n+    <List\n+      pagination={unreadTotal > 5 ? { pageSize: 5 } : false}\n+      dataSource={unreadAnnouncements}\n+      renderItem={(item) => (\n+        <List.Item className=\"t-announcement-item\">\n+          <List.Item.Meta\n+            avatar={<PriorityFlag hasPriority={item.priority} />}\n+            title=<ViewUnreadAnnouncement\n+              announcement={item}\n+              markAnnouncementAsRead={markAnnouncementAsRead}\n+            />\n+            description={fromNow({ date: item.createdDate })}\n+          />\n+          {/*<Paragraph*/}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjkwMDA2Ng=="}, "originalCommit": {"oid": "580a43f85ad92c717be0716b224ff8bb13a25f11"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ4MzgzNDI0OnYy", "diffSide": "RIGHT", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/announcements/AnnouncementAjaxController.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QxODozMzoxMVrOIP3efA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QxOToxNjoyNVrOIP40UA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzUwODQ3Ng==", "bodyText": "Because this is a RestController you don't actually need to add` responsebody` it does not hurt, but not required. \u00a0Just an FYI.", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r553508476", "createdAt": "2021-01-07T18:33:11Z", "author": {"login": "joshsadam"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/announcements/AnnouncementAjaxController.java", "diffHunk": "@@ -39,6 +43,48 @@ public AnnouncementAjaxController(UIAnnouncementsService UIAnnouncementsService)\n \t\treturn UIAnnouncementsService.getAnnouncementsAdmin(tableRequest);\n \t}\n \n+\t/**\n+\t * Handle request for getting a list of read announcements for a user.\n+\t *\n+\t * @param principal the currently logged in user\n+\t * @return a {@link List} of unread {@link AnnouncementUserJoin}s for a user.\n+\t */\n+\t@RequestMapping(value = \"/user/read\")\n+\t@PreAuthorize(\"hasRole('ROLE_USER')\")\n+\t@ResponseBody", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c74c721758aa2f74939229fc7b6a3ff651d13ea4"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzUzMDQ0OA==", "bodyText": "Ok, thanks.", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r553530448", "createdAt": "2021-01-07T19:16:25Z", "author": {"login": "ksierks"}, "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/announcements/AnnouncementAjaxController.java", "diffHunk": "@@ -39,6 +43,48 @@ public AnnouncementAjaxController(UIAnnouncementsService UIAnnouncementsService)\n \t\treturn UIAnnouncementsService.getAnnouncementsAdmin(tableRequest);\n \t}\n \n+\t/**\n+\t * Handle request for getting a list of read announcements for a user.\n+\t *\n+\t * @param principal the currently logged in user\n+\t * @return a {@link List} of unread {@link AnnouncementUserJoin}s for a user.\n+\t */\n+\t@RequestMapping(value = \"/user/read\")\n+\t@PreAuthorize(\"hasRole('ROLE_USER')\")\n+\t@ResponseBody", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzUwODQ3Ng=="}, "originalCommit": {"oid": "c74c721758aa2f74939229fc7b6a3ff651d13ea4"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ4MzkwMTYwOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/DashboardPage.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QxODo1NDoyMVrOIP4H2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQxNTozMjo1N1rOIQWShA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzUxOTA2Nw==", "bodyText": "JSDoc", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r553519067", "createdAt": "2021-01-07T18:54:21Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/DashboardPage.jsx", "diffHunk": "@@ -0,0 +1,6 @@\n+import React from \"react\";\n+import { render } from \"react-dom\";\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c74c721758aa2f74939229fc7b6a3ff651d13ea4"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDAxMzMxNg==", "bodyText": "Please see 5630ea6.", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r554013316", "createdAt": "2021-01-08T15:32:57Z", "author": {"login": "ksierks"}, "path": "src/main/webapp/resources/js/pages/DashboardPage.jsx", "diffHunk": "@@ -0,0 +1,6 @@\n+import React from \"react\";\n+import { render } from \"react-dom\";\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzUxOTA2Nw=="}, "originalCommit": {"oid": "c74c721758aa2f74939229fc7b6a3ff651d13ea4"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ4MzkwMjIyOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/announcement/AnnouncementDashboard.jsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QxODo1NDozNVrOIP4IRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQxNTozMjo0NlrOIQWSIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzUxOTE3NA==", "bodyText": "JSDoc", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r553519174", "createdAt": "2021-01-07T18:54:35Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/announcement/AnnouncementDashboard.jsx", "diffHunk": "@@ -0,0 +1,53 @@\n+import React, { useEffect, useState } from \"react\";\n+import { Avatar, List, notification } from \"antd\";\n+import { fromNow } from \"../../utilities/date-utilities\";\n+import {\n+  getUnreadAnnouncements,\n+  markAnnouncementRead,\n+} from \"../../apis/announcements/announcements\";\n+import ViewUnreadAnnouncement from \"./ViewUnreadAnnouncement\";\n+import { PriorityFlag } from \"./PriorityFlag\";\n+\n+export function AnnouncementDashboard() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c74c721758aa2f74939229fc7b6a3ff651d13ea4"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDAxMzIxNw==", "bodyText": "Please see 5630ea6.", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r554013217", "createdAt": "2021-01-08T15:32:46Z", "author": {"login": "ksierks"}, "path": "src/main/webapp/resources/js/pages/announcement/AnnouncementDashboard.jsx", "diffHunk": "@@ -0,0 +1,53 @@\n+import React, { useEffect, useState } from \"react\";\n+import { Avatar, List, notification } from \"antd\";\n+import { fromNow } from \"../../utilities/date-utilities\";\n+import {\n+  getUnreadAnnouncements,\n+  markAnnouncementRead,\n+} from \"../../apis/announcements/announcements\";\n+import ViewUnreadAnnouncement from \"./ViewUnreadAnnouncement\";\n+import { PriorityFlag } from \"./PriorityFlag\";\n+\n+export function AnnouncementDashboard() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzUxOTE3NA=="}, "originalCommit": {"oid": "c74c721758aa2f74939229fc7b6a3ff651d13ea4"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ4MzkzMDUwOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/resources/js/pages/announcement/ViewUnreadAnnouncement.jsx", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QxOTowMzoxMVrOIP4Z6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QyMTowNTo0MFrOIP8RKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzUyMzY5MQ==", "bodyText": "I have a concern if the content is very long. \u00a0Perhaps wrap this in a div that has overflow scroll set on it for vertical with a max-height of window - 200px or something.", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r553523691", "createdAt": "2021-01-07T19:03:11Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/pages/announcement/ViewUnreadAnnouncement.jsx", "diffHunk": "@@ -0,0 +1,59 @@\n+import React from \"react\";\n+import { Modal, Typography } from \"antd\";\n+import { VisibilityProvider } from \"../../contexts/visibility-context\";\n+import { formatDate } from \"../../utilities/date-utilities\";\n+import Markdown from \"react-markdown\";\n+import { LinkButton } from \"../../components/Buttons/LinkButton\";\n+import { PriorityFlag } from \"./PriorityFlag\";\n+/**\n+ * Component to add a button which will open a modal to view a unread announcement.\n+ * @param {function} ViewAnnouncement - the function that displays a unread announcement.\n+ * @returns {*}\n+ * @constructor\n+ */\n+const { Text } = Typography;\n+const { confirm } = Modal;\n+function ViewUnreadAnnouncementModal({ announcement, markAnnouncementAsRead }) {\n+  const displayAnnouncement = () =>\n+    confirm({\n+      type: \"info\",\n+      width: `60%`,\n+      icon: <PriorityFlag hasPriority={announcement.priority} />,\n+      okText: `Read`,\n+      onOk() {\n+        markAnnouncementAsRead(announcement.identifier);\n+      },\n+      title: (\n+        <>\n+          <Text strong>{announcement.title}</Text>\n+          <br />\n+          <Text type=\"secondary\" style={{ fontSize: `.8em` }}>\n+            {i18n(\n+              \"ViewUnreadAnnouncement.create.details\",\n+              announcement.user.username,\n+              formatDate({ date: announcement.createdDate })\n+            )}\n+          </Text>\n+        </>\n+      ),\n+      content: <Markdown source={announcement.message} />,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c74c721758aa2f74939229fc7b6a3ff651d13ea4"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzU0NjI4Nw==", "bodyText": "Please see 2a7aff7. I left the default at 300px, but will change to 200px if required.", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r553546287", "createdAt": "2021-01-07T19:42:32Z", "author": {"login": "ksierks"}, "path": "src/main/webapp/resources/js/pages/announcement/ViewUnreadAnnouncement.jsx", "diffHunk": "@@ -0,0 +1,59 @@\n+import React from \"react\";\n+import { Modal, Typography } from \"antd\";\n+import { VisibilityProvider } from \"../../contexts/visibility-context\";\n+import { formatDate } from \"../../utilities/date-utilities\";\n+import Markdown from \"react-markdown\";\n+import { LinkButton } from \"../../components/Buttons/LinkButton\";\n+import { PriorityFlag } from \"./PriorityFlag\";\n+/**\n+ * Component to add a button which will open a modal to view a unread announcement.\n+ * @param {function} ViewAnnouncement - the function that displays a unread announcement.\n+ * @returns {*}\n+ * @constructor\n+ */\n+const { Text } = Typography;\n+const { confirm } = Modal;\n+function ViewUnreadAnnouncementModal({ announcement, markAnnouncementAsRead }) {\n+  const displayAnnouncement = () =>\n+    confirm({\n+      type: \"info\",\n+      width: `60%`,\n+      icon: <PriorityFlag hasPriority={announcement.priority} />,\n+      okText: `Read`,\n+      onOk() {\n+        markAnnouncementAsRead(announcement.identifier);\n+      },\n+      title: (\n+        <>\n+          <Text strong>{announcement.title}</Text>\n+          <br />\n+          <Text type=\"secondary\" style={{ fontSize: `.8em` }}>\n+            {i18n(\n+              \"ViewUnreadAnnouncement.create.details\",\n+              announcement.user.username,\n+              formatDate({ date: announcement.createdDate })\n+            )}\n+          </Text>\n+        </>\n+      ),\n+      content: <Markdown source={announcement.message} />,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzUyMzY5MQ=="}, "originalCommit": {"oid": "c74c721758aa2f74939229fc7b6a3ff651d13ea4"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzU4Njk4Nw==", "bodyText": "Please see c4dade3.", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r553586987", "createdAt": "2021-01-07T21:05:40Z", "author": {"login": "ksierks"}, "path": "src/main/webapp/resources/js/pages/announcement/ViewUnreadAnnouncement.jsx", "diffHunk": "@@ -0,0 +1,59 @@\n+import React from \"react\";\n+import { Modal, Typography } from \"antd\";\n+import { VisibilityProvider } from \"../../contexts/visibility-context\";\n+import { formatDate } from \"../../utilities/date-utilities\";\n+import Markdown from \"react-markdown\";\n+import { LinkButton } from \"../../components/Buttons/LinkButton\";\n+import { PriorityFlag } from \"./PriorityFlag\";\n+/**\n+ * Component to add a button which will open a modal to view a unread announcement.\n+ * @param {function} ViewAnnouncement - the function that displays a unread announcement.\n+ * @returns {*}\n+ * @constructor\n+ */\n+const { Text } = Typography;\n+const { confirm } = Modal;\n+function ViewUnreadAnnouncementModal({ announcement, markAnnouncementAsRead }) {\n+  const displayAnnouncement = () =>\n+    confirm({\n+      type: \"info\",\n+      width: `60%`,\n+      icon: <PriorityFlag hasPriority={announcement.priority} />,\n+      okText: `Read`,\n+      onOk() {\n+        markAnnouncementAsRead(announcement.identifier);\n+      },\n+      title: (\n+        <>\n+          <Text strong>{announcement.title}</Text>\n+          <br />\n+          <Text type=\"secondary\" style={{ fontSize: `.8em` }}>\n+            {i18n(\n+              \"ViewUnreadAnnouncement.create.details\",\n+              announcement.user.username,\n+              formatDate({ date: announcement.createdDate })\n+            )}\n+          </Text>\n+        </>\n+      ),\n+      content: <Markdown source={announcement.message} />,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzUyMzY5MQ=="}, "originalCommit": {"oid": "c74c721758aa2f74939229fc7b6a3ff651d13ea4"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ5NTU4NzczOnYy", "diffSide": "RIGHT", "path": "src/test/java/ca/corefacility/bioinformatics/irida/ria/integration/pages/announcements/AnnouncementDashboardPage.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQxODo0NzoyM1rOIRioMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQyMTozODoyM1rOIRoRyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTI2NDA1MA==", "bodyText": "You can also use just By.className(\"t-announcement-item\") - again just an FYI of whats available", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r555264050", "createdAt": "2021-01-11T18:47:23Z", "author": {"login": "joshsadam"}, "path": "src/test/java/ca/corefacility/bioinformatics/irida/ria/integration/pages/announcements/AnnouncementDashboardPage.java", "diffHunk": "@@ -27,12 +27,15 @@ public void viewReadAnnouncements() {\n     }\n \n     public List<WebElement> getCurrentUnreadAnnouncements() {\n-        return driver.findElements(By.cssSelector(\".announcement-item\"));\n+        return driver.findElements(By.cssSelector(\".t-announcement-item\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79887000d134656e0a48d964632a611b8d842cf5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTM1NjYxOQ==", "bodyText": "Thanks for letting me know!", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r555356619", "createdAt": "2021-01-11T21:38:23Z", "author": {"login": "ksierks"}, "path": "src/test/java/ca/corefacility/bioinformatics/irida/ria/integration/pages/announcements/AnnouncementDashboardPage.java", "diffHunk": "@@ -27,12 +27,15 @@ public void viewReadAnnouncements() {\n     }\n \n     public List<WebElement> getCurrentUnreadAnnouncements() {\n-        return driver.findElements(By.cssSelector(\".announcement-item\"));\n+        return driver.findElements(By.cssSelector(\".t-announcement-item\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTI2NDA1MA=="}, "originalCommit": {"oid": "79887000d134656e0a48d964632a611b8d842cf5"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ5NjE1MzU1OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/pages/index.html", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQyMTozMDoxOFrOIRn_oQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQyMTozODowOFrOIRoRTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTM1MTk2OQ==", "bodyText": "This comment is old now.", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r555351969", "createdAt": "2021-01-11T21:30:18Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/pages/index.html", "diffHunk": "@@ -45,12 +45,15 @@ <h4 class=\"pull-left\" th:text=\"#{announcement.title}\">_New Announcements_</h4>\n         </div>\n       </div>\n       <div class=\"panel-body\">\n-        <div class=\"form-group\">\n-          <announcements data:url=\"@{announcements/user/unread}\"></announcements>\n+        <div id=\"dashboard-root\">\n+          <!-- Contents rendered from DashboardPage.jsx -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0799d1ec2fe1b6884300668a7da47cf32e46741"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTM1NjQ5NQ==", "bodyText": "Please see 97ea708.", "url": "https://github.com/phac-nml/irida/pull/892#discussion_r555356495", "createdAt": "2021-01-11T21:38:08Z", "author": {"login": "ksierks"}, "path": "src/main/webapp/pages/index.html", "diffHunk": "@@ -45,12 +45,15 @@ <h4 class=\"pull-left\" th:text=\"#{announcement.title}\">_New Announcements_</h4>\n         </div>\n       </div>\n       <div class=\"panel-body\">\n-        <div class=\"form-group\">\n-          <announcements data:url=\"@{announcements/user/unread}\"></announcements>\n+        <div id=\"dashboard-root\">\n+          <!-- Contents rendered from DashboardPage.jsx -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTM1MTk2OQ=="}, "originalCommit": {"oid": "b0799d1ec2fe1b6884300668a7da47cf32e46741"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 615, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}