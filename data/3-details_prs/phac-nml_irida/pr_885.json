{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyNzc5MDQ1", "number": 885, "title": "Analysis results UI updates", "bodyText": "Description of changes\nWhat did you change in this pull request?  Provide a description of files changed, user interactions changed, etc.  Include how to test your changes.\nUpdated analysis results page to show loading indicator when retrieving output file data.\nRelated issue\nLink to the GitHub issue this pull request addresses using the #issuenum format.  If it completes an issue, use Fixes #issuenum to automatically close the issue.\nChecklist\nThings for the developer to confirm they've done before the PR should be accepted:\n\n CHANGELOG.md (and UPGRADING.md if necessary) updated with information for new change.\n* [ ] Tests added (or description of how to test) for any new features.\n* [ ] User documentation updated for UI or technical changes.", "createdAt": "2020-12-04T20:47:28Z", "url": "https://github.com/phac-nml/irida/pull/885", "merged": true, "mergeCommit": {"oid": "938a092cf6b159c398bd7903b9ac0d9caeee8b7d"}, "closed": true, "closedAt": "2020-12-08T21:07:19Z", "author": {"login": "deepsidhu85"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdi6d8wAH2gAyNTMyNzc5MDQ1Ojg5NmJlOTA3MWE0NjQ1M2MxMTY3MDU3NDkwN2FmOWQxMDhlNmMwZDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkQt9BgFqTU0NzE0MjMzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "896be9071a46453c11670574907af9d108e6c0d0", "author": {"user": {"login": "deepsidhu85", "name": null}}, "url": "https://github.com/phac-nml/irida/commit/896be9071a46453c11670574907af9d108e6c0d0", "committedDate": "2020-12-04T16:37:52Z", "message": "Added skeleton when data for json outputs is being loaded as this could take some time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5dfcca0c6f75eb78132af5367682b39b36a2207", "author": {"user": {"login": "deepsidhu85", "name": null}}, "url": "https://github.com/phac-nml/irida/commit/e5dfcca0c6f75eb78132af5367682b39b36a2207", "committedDate": "2020-12-04T16:39:03Z", "message": "Updated CHANGELOG"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdf0657ccd5c8ab744da6f3e4b1b526d7a86ccc7", "author": {"user": {"login": "deepsidhu85", "name": null}}, "url": "https://github.com/phac-nml/irida/commit/cdf0657ccd5c8ab744da6f3e4b1b526d7a86ccc7", "committedDate": "2020-12-04T20:41:19Z", "message": "Added loading to tabular file display, added a loading indicator when retrieving file chunk"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f68f7064b9a75f911abdc80ec919dcbb378a1783", "author": {"user": {"login": "deepsidhu85", "name": null}}, "url": "https://github.com/phac-nml/irida/commit/f68f7064b9a75f911abdc80ec919dcbb378a1783", "committedDate": "2020-12-04T20:46:21Z", "message": "Updated CHANGELOG"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a249daad9134a6dcacd1c120dba006e1232d8de", "author": {"user": {"login": "deepsidhu85", "name": null}}, "url": "https://github.com/phac-nml/irida/commit/3a249daad9134a6dcacd1c120dba006e1232d8de", "committedDate": "2020-12-04T21:29:00Z", "message": "Updated setting of setLoading to outside the if block"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fe7f27e52704a861829824bb4dc51834f9127cd", "author": {"user": {"login": "deepsidhu85", "name": null}}, "url": "https://github.com/phac-nml/irida/commit/5fe7f27e52704a861829824bb4dc51834f9127cd", "committedDate": "2020-12-08T16:50:42Z", "message": "Fixed bug with download button being enabled when it should be disabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daef79c91a2ef020e23eea2ca3411a63afcf9e5b", "author": {"user": {"login": "deepsidhu85", "name": null}}, "url": "https://github.com/phac-nml/irida/commit/daef79c91a2ef020e23eea2ca3411a63afcf9e5b", "committedDate": "2020-12-08T18:50:28Z", "message": "Merged dev and fixed merge conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MTQyMzM2", "url": "https://github.com/phac-nml/irida/pull/885#pullrequestreview-547142336", "createdAt": "2020-12-08T11:30:32Z", "commit": {"oid": "3a249daad9134a6dcacd1c120dba006e1232d8de"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMTozMDozMlrOIBU6gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMTozMDozMlrOIBU6gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODI2MjE0Ng==", "bodyText": "You already have state.value !== \"COMPLETED\" as a variable isAnalysisCompleted why repeat check it?  That will get re-evaluated every time this component gets new props.", "url": "https://github.com/phac-nml/irida/pull/885#discussion_r538262146", "createdAt": "2020-12-08T11:30:32Z", "author": {"login": "joshsadam"}, "path": "src/main/webapp/resources/js/components/AnalysesTable/AnalysisDownloadButton.jsx", "diffHunk": "@@ -15,20 +15,24 @@ import { AnalysesTableContext } from \"../../contexts/AnalysesTableContext\";\n  * @constructor\n  */\n export function AnalysisDownloadButton({ state, analysisId, updateDelay }) {\n-  const [isAnalysisCompleted, setIsAnalysisCompleted] = useState(state.value !== \"COMPLETED\");\n+  const [isAnalysisCompleted, setIsAnalysisCompleted] = useState(\n+    state.value !== \"COMPLETED\"\n+  );\n   const { analysesTableContext } = useContext(AnalysesTableContext);\n \n   // Update if an analysis is completed (to enable or disable download results button)\n   const intervalId = useInterval(() => {\n-    if(state.value !== \"COMPLETED\" && state.value !== \"ERROR\") {\n-      let rowData = analysesTableContext.rows.filter(row => row.identifier === analysisId);\n+    if (state.value !== \"COMPLETED\" && state.value !== \"ERROR\") {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a249daad9134a6dcacd1c120dba006e1232d8de"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4992, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}