{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4Mzk0NDI4", "number": 2376, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNToyNDo0NFrOEWqKXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNToyODowMlrOEWqMLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTk0OTA4OnYy", "diffSide": "RIGHT", "path": "openshift-client/src/main/java/io/fabric8/openshift/client/dsl/internal/ProjectOperationsImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNToyNDo0NFrOG-BtZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNToyNDo0NFrOG-BtZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY5MjkwMQ==", "bodyText": "Is creating a new ProjectOperationsImpl instance necessary?", "url": "https://github.com/fabric8io/kubernetes-client/pull/2376#discussion_r467692901", "createdAt": "2020-08-10T05:24:44Z", "author": {"login": "manusa"}, "path": "openshift-client/src/main/java/io/fabric8/openshift/client/dsl/internal/ProjectOperationsImpl.java", "diffHunk": "@@ -51,4 +64,114 @@ public ProjectOperationsImpl newInstance(OperationContext context) {\n   public boolean isResourceNamespaced() {\n     return false;\n   }\n+\n+  @Override\n+  public List<HasMetadata> createProjectAndRoleBindings(String name, String description, String displayName, String adminUser, String requestingUser) {\n+    List<HasMetadata> result = new ArrayList<>();\n+    Project project = getProject(name, description, displayName, requestingUser);\n+    List<HasMetadata> projectRoleBindings = getNewProjectRoleBindings(name, adminUser);\n+\n+    // Create Project\n+    ProjectOperationsImpl projectOperations = new ProjectOperationsImpl(client, OpenShiftConfig.wrap(config));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa5e5306b32b556a0d375133a78b2a33ce168beb"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTk1MTg2OnYy", "diffSide": "RIGHT", "path": "openshift-client/src/main/java/io/fabric8/openshift/client/dsl/internal/ProjectOperationsImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNToyNjo0MFrOG-Bu3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNToyNjo0MFrOG-Bu3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY5MzI3Ng==", "bodyText": "nit: Maybe calling this initProject would be less confusing. By the name of the method I'm unsure if this will retrieve a project from the server or something in those lines.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2376#discussion_r467693276", "createdAt": "2020-08-10T05:26:40Z", "author": {"login": "manusa"}, "path": "openshift-client/src/main/java/io/fabric8/openshift/client/dsl/internal/ProjectOperationsImpl.java", "diffHunk": "@@ -51,4 +64,114 @@ public ProjectOperationsImpl newInstance(OperationContext context) {\n   public boolean isResourceNamespaced() {\n     return false;\n   }\n+\n+  @Override\n+  public List<HasMetadata> createProjectAndRoleBindings(String name, String description, String displayName, String adminUser, String requestingUser) {\n+    List<HasMetadata> result = new ArrayList<>();\n+    Project project = getProject(name, description, displayName, requestingUser);\n+    List<HasMetadata> projectRoleBindings = getNewProjectRoleBindings(name, adminUser);\n+\n+    // Create Project\n+    ProjectOperationsImpl projectOperations = new ProjectOperationsImpl(client, OpenShiftConfig.wrap(config));\n+    result.add(projectOperations.create(project));\n+\n+    // Create Role Bindings\n+    NamespaceVisitFromServerGetWatchDeleteRecreateWaitApplicableListImpl listOp = new NamespaceVisitFromServerGetWatchDeleteRecreateWaitApplicableListImpl(client, config, getNamespace(), null, false, false, new ArrayList<>(), projectRoleBindings, null, DeletionPropagation.BACKGROUND, true) {};\n+    result.addAll(listOp.createOrReplace());\n+\n+    return result;\n+  }\n+\n+  private Project getProject(String name, String description, String displayName, String requestingUser) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa5e5306b32b556a0d375133a78b2a33ce168beb"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTk1MjkyOnYy", "diffSide": "RIGHT", "path": "openshift-client/src/main/java/io/fabric8/openshift/client/dsl/internal/ProjectOperationsImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNToyNzoyM1rOG-BvYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNToyNzoyM1rOG-BvYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY5MzQxMQ==", "bodyText": "nit: same as https://github.com/fabric8io/kubernetes-client/pull/2376/files#r467693276, probably initRoleBinding is more clear", "url": "https://github.com/fabric8io/kubernetes-client/pull/2376#discussion_r467693411", "createdAt": "2020-08-10T05:27:23Z", "author": {"login": "manusa"}, "path": "openshift-client/src/main/java/io/fabric8/openshift/client/dsl/internal/ProjectOperationsImpl.java", "diffHunk": "@@ -51,4 +64,114 @@ public ProjectOperationsImpl newInstance(OperationContext context) {\n   public boolean isResourceNamespaced() {\n     return false;\n   }\n+\n+  @Override\n+  public List<HasMetadata> createProjectAndRoleBindings(String name, String description, String displayName, String adminUser, String requestingUser) {\n+    List<HasMetadata> result = new ArrayList<>();\n+    Project project = getProject(name, description, displayName, requestingUser);\n+    List<HasMetadata> projectRoleBindings = getNewProjectRoleBindings(name, adminUser);\n+\n+    // Create Project\n+    ProjectOperationsImpl projectOperations = new ProjectOperationsImpl(client, OpenShiftConfig.wrap(config));\n+    result.add(projectOperations.create(project));\n+\n+    // Create Role Bindings\n+    NamespaceVisitFromServerGetWatchDeleteRecreateWaitApplicableListImpl listOp = new NamespaceVisitFromServerGetWatchDeleteRecreateWaitApplicableListImpl(client, config, getNamespace(), null, false, false, new ArrayList<>(), projectRoleBindings, null, DeletionPropagation.BACKGROUND, true) {};\n+    result.addAll(listOp.createOrReplace());\n+\n+    return result;\n+  }\n+\n+  private Project getProject(String name, String description, String displayName, String requestingUser) {\n+    return new ProjectBuilder()\n+      .withNewMetadata()\n+      .addToAnnotations(OPENSHIFT_IO_DESCRIPTION_ANNOTATION, description)\n+      .addToAnnotations(OPENSHIFT_IO_DISPLAY_NAME_ANNOTATION, displayName)\n+      .addToAnnotations(OPENSHIFT_IO_REQUESTER_ANNOTATION, requestingUser)\n+      .withName(name)\n+      .endMetadata()\n+      .build();\n+  }\n+\n+  private List<HasMetadata> getNewProjectRoleBindings(String name, String adminUser) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa5e5306b32b556a0d375133a78b2a33ce168beb"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTk1Mzc0OnYy", "diffSide": "RIGHT", "path": "kubernetes-tests/src/test/java/io/fabric8/openshift/client/server/mock/ProjectTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNToyODowMlrOG-Bv2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNToyODowMlrOG-Bv2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY5MzUyOQ==", "bodyText": "nit: testCreateProjectAndRoleBindings", "url": "https://github.com/fabric8io/kubernetes-client/pull/2376#discussion_r467693529", "createdAt": "2020-08-10T05:28:02Z", "author": {"login": "manusa"}, "path": "kubernetes-tests/src/test/java/io/fabric8/openshift/client/server/mock/ProjectTest.java", "diffHunk": "@@ -93,4 +98,107 @@ public void testDelete() {\n     deleted = client.projects().withName(\"project3\").delete();\n     assertFalse(deleted);\n   }\n+\n+  @Test\n+  void testCreateUsingParameters() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa5e5306b32b556a0d375133a78b2a33ce168beb"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3765, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}