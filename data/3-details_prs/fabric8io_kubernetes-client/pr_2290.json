{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0ODgyOTA0", "number": 2290, "title": "expose current (named) and all (named) contexts", "bodyText": "This PR changes io.fabric8.kubernetes.client.Configuration so that it stores all contexts that exist in the kubeconfig, does the same with the current context and exposes them via getters.\nfixes #2215", "createdAt": "2020-06-15T23:42:26Z", "url": "https://github.com/fabric8io/kubernetes-client/pull/2290", "merged": true, "mergeCommit": {"oid": "f1e892ac4908c0c54d80f875fd6109674800d5a3"}, "closed": true, "closedAt": "2020-06-18T09:35:18Z", "author": {"login": "adietish"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrw2MoABqjM0NDc4MDE4OTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsaLoPgBqjM0NTY5ODYzNDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "66f8785114daba8cda3a04e084581191084d4114", "author": {"user": {"login": "adietish", "name": "Andre Dietisheim"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/66f8785114daba8cda3a04e084581191084d4114", "committedDate": "2020-06-15T23:41:02Z", "message": "expose current (named) and all (named) contexts\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>"}, "afterCommit": {"oid": "c84996ec3e5779ce3e1018ebe9164bb056550433", "author": {"user": {"login": "adietish", "name": "Andre Dietisheim"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/c84996ec3e5779ce3e1018ebe9164bb056550433", "committedDate": "2020-06-16T08:17:50Z", "message": "expose current (named) and all (named) contexts\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMzIwNDM4", "url": "https://github.com/fabric8io/kubernetes-client/pull/2290#pullrequestreview-431320438", "createdAt": "2020-06-16T09:23:52Z", "commit": {"oid": "c84996ec3e5779ce3e1018ebe9164bb056550433"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c84996ec3e5779ce3e1018ebe9164bb056550433", "author": {"user": {"login": "adietish", "name": "Andre Dietisheim"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/c84996ec3e5779ce3e1018ebe9164bb056550433", "committedDate": "2020-06-16T08:17:50Z", "message": "expose current (named) and all (named) contexts\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>"}, "afterCommit": {"oid": "3383b03cbca69c9bbd9787636ee0ab07b76069f9", "author": {"user": {"login": "adietish", "name": "Andre Dietisheim"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/3383b03cbca69c9bbd9787636ee0ab07b76069f9", "committedDate": "2020-06-16T11:38:31Z", "message": "expose current (named) and all (named) contexts\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNTk0OTU2", "url": "https://github.com/fabric8io/kubernetes-client/pull/2290#pullrequestreview-431594956", "createdAt": "2020-06-16T14:58:02Z", "commit": {"oid": "3383b03cbca69c9bbd9787636ee0ab07b76069f9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNjQ3MjEw", "url": "https://github.com/fabric8io/kubernetes-client/pull/2290#pullrequestreview-431647210", "createdAt": "2020-06-16T15:46:26Z", "commit": {"oid": "3383b03cbca69c9bbd9787636ee0ab07b76069f9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNTo0NjoyNlrOGkhy6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNTo0NjoyNlrOGkhy6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk1NTYyNw==", "bodyText": "Do you think we should maybe move this method to KubeConfigUtils?", "url": "https://github.com/fabric8io/kubernetes-client/pull/2290#discussion_r440955627", "createdAt": "2020-06-16T15:46:26Z", "author": {"login": "rohanKanojia"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/Config.java", "diffHunk": "@@ -597,6 +599,20 @@ private static boolean loadFromKubeconfig(Config config, String context, String\n \n     return false;\n   }\n+\n+  private static Context setCurrentContext(String context, Config config, io.fabric8.kubernetes.api.model.Config kubeConfig) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3383b03cbca69c9bbd9787636ee0ab07b76069f9"}, "originalPosition": 36}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3383b03cbca69c9bbd9787636ee0ab07b76069f9", "author": {"user": {"login": "adietish", "name": "Andre Dietisheim"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/3383b03cbca69c9bbd9787636ee0ab07b76069f9", "committedDate": "2020-06-16T11:38:31Z", "message": "expose current (named) and all (named) contexts\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>"}, "afterCommit": {"oid": "688f12ee26deda4b509408e50758d91d06186436", "author": {"user": {"login": "adietish", "name": "Andre Dietisheim"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/688f12ee26deda4b509408e50758d91d06186436", "committedDate": "2020-06-17T13:24:42Z", "message": "Fix #2215: added tests for current/all context(s)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74b918a20c188f54fdfd0d1b376835bd8d780517", "author": {"user": {"login": "adietish", "name": "Andre Dietisheim"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/74b918a20c188f54fdfd0d1b376835bd8d780517", "committedDate": "2020-06-17T13:26:27Z", "message": "Fix #2215: expose current (named) and all (named) contexts\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "688f12ee26deda4b509408e50758d91d06186436", "author": {"user": {"login": "adietish", "name": "Andre Dietisheim"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/688f12ee26deda4b509408e50758d91d06186436", "committedDate": "2020-06-17T13:24:42Z", "message": "Fix #2215: added tests for current/all context(s)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>"}, "afterCommit": {"oid": "71e0876046d79ecb5d553f36c8a3ad77654d1454", "author": {"user": {"login": "adietish", "name": "Andre Dietisheim"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/71e0876046d79ecb5d553f36c8a3ad77654d1454", "committedDate": "2020-06-17T13:26:27Z", "message": "Fix #2215: added tests for current/all context(s)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "71e0876046d79ecb5d553f36c8a3ad77654d1454", "author": {"user": {"login": "adietish", "name": "Andre Dietisheim"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/71e0876046d79ecb5d553f36c8a3ad77654d1454", "committedDate": "2020-06-17T13:26:27Z", "message": "Fix #2215: added tests for current/all context(s)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>"}, "afterCommit": {"oid": "1ce27533e4bec06cf1c38259cf7fa80c9aa8a0e9", "author": {"user": {"login": "adietish", "name": "Andre Dietisheim"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/1ce27533e4bec06cf1c38259cf7fa80c9aa8a0e9", "committedDate": "2020-06-17T16:02:48Z", "message": "Fix #2215: added tests for current/all context(s)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyOTk1MzI0", "url": "https://github.com/fabric8io/kubernetes-client/pull/2290#pullrequestreview-432995324", "createdAt": "2020-06-18T07:05:45Z", "commit": {"oid": "1ce27533e4bec06cf1c38259cf7fa80c9aa8a0e9"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwNzowNTo0NVrOGliPBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwNzoxMjoxN1rOGliaig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAxMTM5Ng==", "bodyText": "nit, Could you please use format specifiers?", "url": "https://github.com/fabric8io/kubernetes-client/pull/2290#discussion_r442011396", "createdAt": "2020-06-18T07:05:45Z", "author": {"login": "rohanKanojia"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/Config.java", "diffHunk": "@@ -460,41 +477,52 @@ public static Config fromKubeconfig(String kubeconfigContents) throws IOExceptio\n   public static Config fromKubeconfig(String context, String kubeconfigContents, String kubeconfigPath) {\n     // we allow passing context along here, since downstream accepts it\n     Config config = new Config();\n-    Config.loadFromKubeconfig(config, context, kubeconfigContents, kubeconfigPath);\n+    loadFromKubeconfig(config, context, kubeconfigContents, kubeconfigPath);\n     return config;\n   }\n \n   private static boolean tryKubeConfig(Config config, String context) {\n     LOGGER.debug(\"Trying to configure client from Kubernetes config...\");\n-    if (Utils.getSystemPropertyOrEnvVar(KUBERNETES_AUTH_TRYKUBECONFIG_SYSTEM_PROPERTY, true)) {\n-      String fileName = Utils.getSystemPropertyOrEnvVar(KUBERNETES_KUBECONFIG_FILE, new File(getHomeDir(), \".kube\" + File.separator + \"config\").toString());\n+    if (!Utils.getSystemPropertyOrEnvVar(KUBERNETES_AUTH_TRYKUBECONFIG_SYSTEM_PROPERTY, true)) {\n+      return false;\n+    }\n+    File kubeConfigFile = new File(getKubeconfigFilename());\n+    if (!kubeConfigFile.isFile()) {\n+      LOGGER.debug(\"Did not find Kubernetes config at: [\"+kubeConfigFile.getPath()+\"]. Ignoring.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ce27533e4bec06cf1c38259cf7fa80c9aa8a0e9"}, "originalPosition": 122}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAxNDM0Ng==", "bodyText": "I would appreciate it if you could add some Javadoc to publicly available methods introduced in this PR.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2290#discussion_r442014346", "createdAt": "2020-06-18T07:12:17Z", "author": {"login": "rohanKanojia"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/Config.java", "diffHunk": "@@ -1128,4 +1170,21 @@ public void setOauthTokenProvider(OAuthTokenProvider oauthTokenProvider) {\n   public void setCustomHeaders(Map<String, String> customHeaders) {\n     this.customHeaders = customHeaders;\n   }\n+\n+  public List<NamedContext> getContexts() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ce27533e4bec06cf1c38259cf7fa80c9aa8a0e9"}, "originalPosition": 238}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e3ed455c79bad68484e845c984bef9c8273097d", "author": {"user": {"login": "adietish", "name": "Andre Dietisheim"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/3e3ed455c79bad68484e845c984bef9c8273097d", "committedDate": "2020-06-18T08:28:32Z", "message": "Fix #2215: added tests for current/all context(s)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1ce27533e4bec06cf1c38259cf7fa80c9aa8a0e9", "author": {"user": {"login": "adietish", "name": "Andre Dietisheim"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/1ce27533e4bec06cf1c38259cf7fa80c9aa8a0e9", "committedDate": "2020-06-17T16:02:48Z", "message": "Fix #2215: added tests for current/all context(s)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>"}, "afterCommit": {"oid": "3e3ed455c79bad68484e845c984bef9c8273097d", "author": {"user": {"login": "adietish", "name": "Andre Dietisheim"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/3e3ed455c79bad68484e845c984bef9c8273097d", "committedDate": "2020-06-18T08:28:32Z", "message": "Fix #2215: added tests for current/all context(s)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3704, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}