{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxMjQ1NzAx", "number": 2272, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNzoxMTo0OFrOEFajaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNzoxMTo0OFrOEFajaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTEzMzg0OnYy", "diffSide": "RIGHT", "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/dsl/internal/apps/v1/ReplicaSetOperationsImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNzoxMTo0OFrOGjlufA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNzoxMTo0OFrOGjlufA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk3MTQ1Mg==", "bodyText": "nit: when retrieving the first item of a collection, in general it's better to do\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Container container = oldRC.getSpec().getTemplate().getSpec().getContainers().get(0);\n          \n          \n            \n                Container container = oldRC.getSpec().getTemplate().getSpec().getContainers().iterator().next();\n          \n      \n    \n    \n  \n\nThis won't be affected by performance issues for specific collection implementations (imagine containers was some sort of LinkedList where access by index was heavily penalized)", "url": "https://github.com/fabric8io/kubernetes-client/pull/2272#discussion_r439971452", "createdAt": "2020-06-15T07:11:48Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/dsl/internal/apps/v1/ReplicaSetOperationsImpl.java", "diffHunk": "@@ -78,23 +77,57 @@ public ReplicaSet updateImage(String image) {\n     ReplicaSet oldRC = get();\n \n     if (oldRC == null) {\n-      throw new KubernetesClientException(\"Existing replica set doesn't exist\");\n+      throw new KubernetesClientException(\"Existing replication controller doesn't exist\");\n     }\n     if (oldRC.getSpec().getTemplate().getSpec().getContainers().size() > 1) {\n       throw new KubernetesClientException(\"Image update is not supported for multicontainer pods\");\n     }\n-    if (oldRC.getSpec().getTemplate().getSpec().getContainers().size() == 0) {\n+    if (oldRC.getSpec().getTemplate().getSpec().getContainers().isEmpty()) {\n       throw new KubernetesClientException(\"Pod has no containers!\");\n     }\n \n-    Container updatedContainer = new ContainerBuilder(oldRC.getSpec().getTemplate().getSpec().getContainers().iterator().next()).withImage(image).build();\n+    Container container = oldRC.getSpec().getTemplate().getSpec().getContainers().get(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01e10c414cfac5c533587c976d0482e47f49a1b5"}, "originalPosition": 40}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3740, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}