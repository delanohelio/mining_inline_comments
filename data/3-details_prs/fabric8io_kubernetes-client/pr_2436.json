{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczMTY4MDgx", "number": 2436, "title": "Improve running time of DefaultSharedIndexInformerTest", "bodyText": "Description\nRelated to #2425\n\nType of change\n\n\n Bug fix (non-breaking change which fixes an issue)\n Feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to change\n Chore (non-breaking change which doesn't affect codebase;\ntest, version modification, documentation, etc.)\n\nChecklist\n\n Code contributed by me aligns with current project license: Apache 2.0\n I Added CHANGELOG entry regarding this change\n I have implemented unit tests to cover my changes\n I have added/updated the javadocs and other documentation accordingly\n No new bugs, code smells, etc. in SonarCloud report\n I tested my code in Kubernetes\n I tested my code in OpenShift", "createdAt": "2020-08-25T12:26:02Z", "url": "https://github.com/fabric8io/kubernetes-client/pull/2436", "merged": true, "mergeCommit": {"oid": "09a5c6bf77e2b457b634f880a0d89f4c67572e5b"}, "closed": true, "closedAt": "2020-08-26T05:59:58Z", "author": {"login": "rohanKanojia"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCWm8eAFqTQ3NDQ0Mjc5NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCX_9vAFqTQ3NDUzMjk5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NDQyNzk1", "url": "https://github.com/fabric8io/kubernetes-client/pull/2436#pullrequestreview-474442795", "createdAt": "2020-08-25T12:45:32Z", "commit": {"oid": "92bfea374d34c60667d71a096722bc195c6f598b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NDc0MzEz", "url": "https://github.com/fabric8io/kubernetes-client/pull/2436#pullrequestreview-474474313", "createdAt": "2020-08-25T13:21:57Z", "commit": {"oid": "92bfea374d34c60667d71a096722bc195c6f598b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMzoyMTo1N1rOHGXy-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMzoyMjo0OVrOHGX1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ0MzM4NA==", "bodyText": "You should remove this comment ... as now Thread.sleep is passed 500 as value rather than the RESYNC_PERIOD value.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2436#discussion_r476443384", "createdAt": "2020-08-25T13:21:57Z", "author": {"login": "dev-gaur"}, "path": "kubernetes-tests/src/test/java/io/fabric8/kubernetes/client/mock/DefaultSharedIndexInformerTest.java", "diffHunk": "@@ -251,7 +250,7 @@ public void onDelete(Pod oldObj, boolean deletedFinalStateUnknown) { }\n     factory.startAllRegisteredInformers();\n \n     // Wait for resync period of pass", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92bfea374d34c60667d71a096722bc195c6f598b"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ0Mzk1Mw==", "bodyText": "Or maybe keep it as Thread.sleep(RESYNC_PERIOD) .. whatever is better", "url": "https://github.com/fabric8io/kubernetes-client/pull/2436#discussion_r476443953", "createdAt": "2020-08-25T13:22:49Z", "author": {"login": "dev-gaur"}, "path": "kubernetes-tests/src/test/java/io/fabric8/kubernetes/client/mock/DefaultSharedIndexInformerTest.java", "diffHunk": "@@ -251,7 +250,7 @@ public void onDelete(Pod oldObj, boolean deletedFinalStateUnknown) { }\n     factory.startAllRegisteredInformers();\n \n     // Wait for resync period of pass", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ0MzM4NA=="}, "originalCommit": {"oid": "92bfea374d34c60667d71a096722bc195c6f598b"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e89753de925d8582215228fbbcbc82846ce285c", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/0e89753de925d8582215228fbbcbc82846ce285c", "committedDate": "2020-08-25T14:07:27Z", "message": "Improve running time of DefaultSharedIndexInformerTest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "92bfea374d34c60667d71a096722bc195c6f598b", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/92bfea374d34c60667d71a096722bc195c6f598b", "committedDate": "2020-08-25T12:25:12Z", "message": "Improve running time of DefaultSharedIndexInformerTest"}, "afterCommit": {"oid": "0e89753de925d8582215228fbbcbc82846ce285c", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/0e89753de925d8582215228fbbcbc82846ce285c", "committedDate": "2020-08-25T14:07:27Z", "message": "Improve running time of DefaultSharedIndexInformerTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NTMyMjkx", "url": "https://github.com/fabric8io/kubernetes-client/pull/2436#pullrequestreview-474532291", "createdAt": "2020-08-25T14:22:02Z", "commit": {"oid": "0e89753de925d8582215228fbbcbc82846ce285c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDoyMjowMlrOHGahyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDoyMjowMlrOHGahyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ4ODEzNg==", "bodyText": "\u2764\ufe0f", "url": "https://github.com/fabric8io/kubernetes-client/pull/2436#discussion_r476488136", "createdAt": "2020-08-25T14:22:02Z", "author": {"login": "manusa"}, "path": "kubernetes-tests/src/test/java/io/fabric8/kubernetes/client/mock/DefaultSharedIndexInformerTest.java", "diffHunk": "@@ -115,8 +116,9 @@ public void onDelete(Pod oldObj, boolean deletedFinalStateUnknown) { }\n     factory.startAllRegisteredInformers();\n \n     foundExistingPod.await(LATCH_AWAIT_PERIOD_IN_SECONDS, TimeUnit.SECONDS);\n-    waitUntilResourceVersionSynced();\n     assertEquals(0L, foundExistingPod.getCount());\n+    await().atMost(1, TimeUnit.SECONDS)\n+      .until(() -> podInformer.lastSyncResourceVersion().equals(endResourceVersion));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e89753de925d8582215228fbbcbc82846ce285c"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NTMyOTk1", "url": "https://github.com/fabric8io/kubernetes-client/pull/2436#pullrequestreview-474532995", "createdAt": "2020-08-25T14:22:46Z", "commit": {"oid": "0e89753de925d8582215228fbbcbc82846ce285c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3609, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}