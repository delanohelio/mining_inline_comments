{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM3NTI2ODY1", "number": 2661, "reviewThreads": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwNjo0Njo0NlrOFE08Gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNjoxMDoxNVrOFGRdWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNjA1OTc4OnYy", "diffSide": "RIGHT", "path": "kubernetes-model-generator/kubernetes-model-core/src/main/java/io/fabric8/kubernetes/api/model/HasMetadata.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwNjo0Njo0NlrOIFCDxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwODowMjowOFrOIFEDwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE0NzUyNw==", "bodyText": "I think version.value() might produce NullPointerEception here in case only ApiGroup annotation is provided.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r542147527", "createdAt": "2020-12-14T06:46:46Z", "author": {"login": "manusa"}, "path": "kubernetes-model-generator/kubernetes-model-core/src/main/java/io/fabric8/kubernetes/api/model/HasMetadata.java", "diffHunk": "@@ -36,9 +39,21 @@\n   \n   void setMetadata(ObjectMeta metadata);\n   \n-  String getKind();\n+  default String getKind() {\n+    final Class<? extends HasMetadata> clazz = getClass();\n+    final Kind kind = clazz.getAnnotation(Kind.class);\n+    return kind != null ? kind.value() : clazz.getSimpleName();\n+  }\n   \n-  String getApiVersion();\n+  default String getApiVersion() {\n+    final Class<? extends HasMetadata> clazz = getClass();\n+    final ApiGroup group = clazz.getAnnotation(ApiGroup.class);\n+    if (group != null) {\n+      final ApiVersion version = clazz.getAnnotation(ApiVersion.class);\n+      return group.value() + \"/\" + version.value();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49bc87c9f5c8776a0e9908d9f1e24e9142d6258b"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE4MDI4OA==", "bodyText": "Good catch!", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r542180288", "createdAt": "2020-12-14T08:02:08Z", "author": {"login": "metacosm"}, "path": "kubernetes-model-generator/kubernetes-model-core/src/main/java/io/fabric8/kubernetes/api/model/HasMetadata.java", "diffHunk": "@@ -36,9 +39,21 @@\n   \n   void setMetadata(ObjectMeta metadata);\n   \n-  String getKind();\n+  default String getKind() {\n+    final Class<? extends HasMetadata> clazz = getClass();\n+    final Kind kind = clazz.getAnnotation(Kind.class);\n+    return kind != null ? kind.value() : clazz.getSimpleName();\n+  }\n   \n-  String getApiVersion();\n+  default String getApiVersion() {\n+    final Class<? extends HasMetadata> clazz = getClass();\n+    final ApiGroup group = clazz.getAnnotation(ApiGroup.class);\n+    if (group != null) {\n+      final ApiVersion version = clazz.getAnnotation(ApiVersion.class);\n+      return group.value() + \"/\" + version.value();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE0NzUyNw=="}, "originalCommit": {"oid": "49bc87c9f5c8776a0e9908d9f1e24e9142d6258b"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNjA2NDcyOnYy", "diffSide": "RIGHT", "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwNjo0ODoyNFrOIFCGTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwOTozODozNFrOIFHvag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE0ODE3Mw==", "bodyText": "I feel this logic with side-effects in a getter method can bring serious consequences in the future.\nDoes it make sense to move the \"initialization-by-annotation\" procedures to the constructor?", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r542148173", "createdAt": "2020-12-14T06:48:24Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -15,60 +15,92 @@\n  */\n package io.fabric8.kubernetes.client;\n \n+import java.util.Locale;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n import com.fasterxml.jackson.databind.JsonDeserializer;\n import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n import io.fabric8.kubernetes.api.model.HasMetadata;\n+import io.fabric8.kubernetes.api.model.Namespaced;\n import io.fabric8.kubernetes.api.model.ObjectMeta;\n+import io.fabric8.kubernetes.client.utils.ApiVersionUtil;\n+import io.fabric8.kubernetes.client.utils.Pluralize;\n+import io.fabric8.kubernetes.client.utils.Utils;\n+import io.fabric8.kubernetes.model.annotation.Plural;\n import io.sundr.builder.annotations.Buildable;\n import lombok.ToString;\n \n+import static io.fabric8.kubernetes.client.utils.Utils.isNullOrEmpty;\n+\n /**\n  * A base class for implementing a custom resource kind\n  */\n @JsonDeserialize(\n-    using = JsonDeserializer.None.class\n+  using = JsonDeserializer.None.class\n )\n @ToString\n @Buildable(builderPackage = \"io.fabric8.kubernetes.api.builder\", editableEnabled = false)\n public abstract class CustomResource implements HasMetadata {\n+  public static final String NAMESPACE_SCOPE = \"Namespaced\";\n+  public static final String CLUSTER_SCOPE = \"Cluster\";\n+  private ObjectMeta metadata = new ObjectMeta();\n+  \n+  @JsonIgnore\n+  private String plural;\n+  \n+  @JsonIgnore\n+  private String crdName;\n+  \n   private String kind;\n   private String apiVersion;\n-  private ObjectMeta metadata = new ObjectMeta();\n-\n+  private final String scope;\n+  \n   public CustomResource() {\n-    this.kind = getClass().getSimpleName();\n-  }\n-\n-  public CustomResource(String kind) {\n-    this.kind = kind;\n+    scope = this instanceof Namespaced ? NAMESPACE_SCOPE : CLUSTER_SCOPE;\n   }\n-\n+  \n   @Override\n   public String toString() {\n     return \"CustomResource{\" +\n-        \"kind='\" + kind + '\\'' +\n-        \", apiVersion='\" + apiVersion + '\\'' +\n-        \", metadata=\" + metadata +\n-        '}';\n-  }\n-\n-  @Override\n-  public String getKind() {\n-    return kind;\n-  }\n-\n-  public void setKind(String kind) {\n-    this.kind = kind;\n+      \"kind='\" + getKind() + '\\'' +\n+      \", apiVersion='\" + getApiVersion() + '\\'' +\n+      \", metadata=\" + metadata +\n+      '}';\n   }\n-\n+  \n   @Override\n   public String getApiVersion() {\n+    if (apiVersion == null) {\n+      final String apiVersion = HasMetadata.super.getApiVersion();\n+      if (isNullOrEmpty(apiVersion)) {\n+        throw new IllegalArgumentException(getClass().getName() + \" CustomResource must provide an API version using @ApiGroup and @ApiVersion annotations\");\n+      }\n+      this.apiVersion = apiVersion;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49bc87c9f5c8776a0e9908d9f1e24e9142d6258b"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE4MTc5NQ==", "bodyText": "I originally had most of the code in the constructor but had issues with deserialization where the no-arg constructor would fail\u2026\u00a0I will double check as I might have missed things.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r542181795", "createdAt": "2020-12-14T08:05:05Z", "author": {"login": "metacosm"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -15,60 +15,92 @@\n  */\n package io.fabric8.kubernetes.client;\n \n+import java.util.Locale;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n import com.fasterxml.jackson.databind.JsonDeserializer;\n import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n import io.fabric8.kubernetes.api.model.HasMetadata;\n+import io.fabric8.kubernetes.api.model.Namespaced;\n import io.fabric8.kubernetes.api.model.ObjectMeta;\n+import io.fabric8.kubernetes.client.utils.ApiVersionUtil;\n+import io.fabric8.kubernetes.client.utils.Pluralize;\n+import io.fabric8.kubernetes.client.utils.Utils;\n+import io.fabric8.kubernetes.model.annotation.Plural;\n import io.sundr.builder.annotations.Buildable;\n import lombok.ToString;\n \n+import static io.fabric8.kubernetes.client.utils.Utils.isNullOrEmpty;\n+\n /**\n  * A base class for implementing a custom resource kind\n  */\n @JsonDeserialize(\n-    using = JsonDeserializer.None.class\n+  using = JsonDeserializer.None.class\n )\n @ToString\n @Buildable(builderPackage = \"io.fabric8.kubernetes.api.builder\", editableEnabled = false)\n public abstract class CustomResource implements HasMetadata {\n+  public static final String NAMESPACE_SCOPE = \"Namespaced\";\n+  public static final String CLUSTER_SCOPE = \"Cluster\";\n+  private ObjectMeta metadata = new ObjectMeta();\n+  \n+  @JsonIgnore\n+  private String plural;\n+  \n+  @JsonIgnore\n+  private String crdName;\n+  \n   private String kind;\n   private String apiVersion;\n-  private ObjectMeta metadata = new ObjectMeta();\n-\n+  private final String scope;\n+  \n   public CustomResource() {\n-    this.kind = getClass().getSimpleName();\n-  }\n-\n-  public CustomResource(String kind) {\n-    this.kind = kind;\n+    scope = this instanceof Namespaced ? NAMESPACE_SCOPE : CLUSTER_SCOPE;\n   }\n-\n+  \n   @Override\n   public String toString() {\n     return \"CustomResource{\" +\n-        \"kind='\" + kind + '\\'' +\n-        \", apiVersion='\" + apiVersion + '\\'' +\n-        \", metadata=\" + metadata +\n-        '}';\n-  }\n-\n-  @Override\n-  public String getKind() {\n-    return kind;\n-  }\n-\n-  public void setKind(String kind) {\n-    this.kind = kind;\n+      \"kind='\" + getKind() + '\\'' +\n+      \", apiVersion='\" + getApiVersion() + '\\'' +\n+      \", metadata=\" + metadata +\n+      '}';\n   }\n-\n+  \n   @Override\n   public String getApiVersion() {\n+    if (apiVersion == null) {\n+      final String apiVersion = HasMetadata.super.getApiVersion();\n+      if (isNullOrEmpty(apiVersion)) {\n+        throw new IllegalArgumentException(getClass().getName() + \" CustomResource must provide an API version using @ApiGroup and @ApiVersion annotations\");\n+      }\n+      this.apiVersion = apiVersion;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE0ODE3Mw=="}, "originalCommit": {"oid": "49bc87c9f5c8776a0e9908d9f1e24e9142d6258b"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE5MDIyNw==", "bodyText": "This is exactly the kind of problem we might face. Since this method is invoked upon serialization, it's possible that we end up with non-deterministic behaviors.\nThe empty-args constructor should be calling the all-args constructor.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r542190227", "createdAt": "2020-12-14T08:20:51Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -15,60 +15,92 @@\n  */\n package io.fabric8.kubernetes.client;\n \n+import java.util.Locale;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n import com.fasterxml.jackson.databind.JsonDeserializer;\n import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n import io.fabric8.kubernetes.api.model.HasMetadata;\n+import io.fabric8.kubernetes.api.model.Namespaced;\n import io.fabric8.kubernetes.api.model.ObjectMeta;\n+import io.fabric8.kubernetes.client.utils.ApiVersionUtil;\n+import io.fabric8.kubernetes.client.utils.Pluralize;\n+import io.fabric8.kubernetes.client.utils.Utils;\n+import io.fabric8.kubernetes.model.annotation.Plural;\n import io.sundr.builder.annotations.Buildable;\n import lombok.ToString;\n \n+import static io.fabric8.kubernetes.client.utils.Utils.isNullOrEmpty;\n+\n /**\n  * A base class for implementing a custom resource kind\n  */\n @JsonDeserialize(\n-    using = JsonDeserializer.None.class\n+  using = JsonDeserializer.None.class\n )\n @ToString\n @Buildable(builderPackage = \"io.fabric8.kubernetes.api.builder\", editableEnabled = false)\n public abstract class CustomResource implements HasMetadata {\n+  public static final String NAMESPACE_SCOPE = \"Namespaced\";\n+  public static final String CLUSTER_SCOPE = \"Cluster\";\n+  private ObjectMeta metadata = new ObjectMeta();\n+  \n+  @JsonIgnore\n+  private String plural;\n+  \n+  @JsonIgnore\n+  private String crdName;\n+  \n   private String kind;\n   private String apiVersion;\n-  private ObjectMeta metadata = new ObjectMeta();\n-\n+  private final String scope;\n+  \n   public CustomResource() {\n-    this.kind = getClass().getSimpleName();\n-  }\n-\n-  public CustomResource(String kind) {\n-    this.kind = kind;\n+    scope = this instanceof Namespaced ? NAMESPACE_SCOPE : CLUSTER_SCOPE;\n   }\n-\n+  \n   @Override\n   public String toString() {\n     return \"CustomResource{\" +\n-        \"kind='\" + kind + '\\'' +\n-        \", apiVersion='\" + apiVersion + '\\'' +\n-        \", metadata=\" + metadata +\n-        '}';\n-  }\n-\n-  @Override\n-  public String getKind() {\n-    return kind;\n-  }\n-\n-  public void setKind(String kind) {\n-    this.kind = kind;\n+      \"kind='\" + getKind() + '\\'' +\n+      \", apiVersion='\" + getApiVersion() + '\\'' +\n+      \", metadata=\" + metadata +\n+      '}';\n   }\n-\n+  \n   @Override\n   public String getApiVersion() {\n+    if (apiVersion == null) {\n+      final String apiVersion = HasMetadata.super.getApiVersion();\n+      if (isNullOrEmpty(apiVersion)) {\n+        throw new IllegalArgumentException(getClass().getName() + \" CustomResource must provide an API version using @ApiGroup and @ApiVersion annotations\");\n+      }\n+      this.apiVersion = apiVersion;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE0ODE3Mw=="}, "originalCommit": {"oid": "49bc87c9f5c8776a0e9908d9f1e24e9142d6258b"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI0MDYxOA==", "bodyText": "Putting the code in the constructor doesn't work because when you create a CR from CustomResourceBuilder, there's no annotation. Checking for null in the getter before doing anything should ensure that if the version has already been set (i.e. in a deserialization context), we don't check the annotation.\nThe possible solution is to not throw an exception if no annotation is provided\u2026 I agree, though, that we should avoid side-effects in getters.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r542240618", "createdAt": "2020-12-14T09:38:34Z", "author": {"login": "metacosm"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -15,60 +15,92 @@\n  */\n package io.fabric8.kubernetes.client;\n \n+import java.util.Locale;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n import com.fasterxml.jackson.databind.JsonDeserializer;\n import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n import io.fabric8.kubernetes.api.model.HasMetadata;\n+import io.fabric8.kubernetes.api.model.Namespaced;\n import io.fabric8.kubernetes.api.model.ObjectMeta;\n+import io.fabric8.kubernetes.client.utils.ApiVersionUtil;\n+import io.fabric8.kubernetes.client.utils.Pluralize;\n+import io.fabric8.kubernetes.client.utils.Utils;\n+import io.fabric8.kubernetes.model.annotation.Plural;\n import io.sundr.builder.annotations.Buildable;\n import lombok.ToString;\n \n+import static io.fabric8.kubernetes.client.utils.Utils.isNullOrEmpty;\n+\n /**\n  * A base class for implementing a custom resource kind\n  */\n @JsonDeserialize(\n-    using = JsonDeserializer.None.class\n+  using = JsonDeserializer.None.class\n )\n @ToString\n @Buildable(builderPackage = \"io.fabric8.kubernetes.api.builder\", editableEnabled = false)\n public abstract class CustomResource implements HasMetadata {\n+  public static final String NAMESPACE_SCOPE = \"Namespaced\";\n+  public static final String CLUSTER_SCOPE = \"Cluster\";\n+  private ObjectMeta metadata = new ObjectMeta();\n+  \n+  @JsonIgnore\n+  private String plural;\n+  \n+  @JsonIgnore\n+  private String crdName;\n+  \n   private String kind;\n   private String apiVersion;\n-  private ObjectMeta metadata = new ObjectMeta();\n-\n+  private final String scope;\n+  \n   public CustomResource() {\n-    this.kind = getClass().getSimpleName();\n-  }\n-\n-  public CustomResource(String kind) {\n-    this.kind = kind;\n+    scope = this instanceof Namespaced ? NAMESPACE_SCOPE : CLUSTER_SCOPE;\n   }\n-\n+  \n   @Override\n   public String toString() {\n     return \"CustomResource{\" +\n-        \"kind='\" + kind + '\\'' +\n-        \", apiVersion='\" + apiVersion + '\\'' +\n-        \", metadata=\" + metadata +\n-        '}';\n-  }\n-\n-  @Override\n-  public String getKind() {\n-    return kind;\n-  }\n-\n-  public void setKind(String kind) {\n-    this.kind = kind;\n+      \"kind='\" + getKind() + '\\'' +\n+      \", apiVersion='\" + getApiVersion() + '\\'' +\n+      \", metadata=\" + metadata +\n+      '}';\n   }\n-\n+  \n   @Override\n   public String getApiVersion() {\n+    if (apiVersion == null) {\n+      final String apiVersion = HasMetadata.super.getApiVersion();\n+      if (isNullOrEmpty(apiVersion)) {\n+        throw new IllegalArgumentException(getClass().getName() + \" CustomResource must provide an API version using @ApiGroup and @ApiVersion annotations\");\n+      }\n+      this.apiVersion = apiVersion;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE0ODE3Mw=="}, "originalCommit": {"oid": "49bc87c9f5c8776a0e9908d9f1e24e9142d6258b"}, "originalPosition": 87}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNDAzMjk5OnYy", "diffSide": "RIGHT", "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMzoyODoyN1rOIGK3Bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMzoyODoyN1rOIGK3Bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM0MDI5NA==", "bodyText": "Would a log.warn make sense here?", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r543340294", "createdAt": "2020-12-15T13:28:27Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -15,60 +15,101 @@\n  */\n package io.fabric8.kubernetes.client;\n \n+import java.util.Locale;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.annotation.JsonPropertyOrder;\n import com.fasterxml.jackson.databind.JsonDeserializer;\n import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n import io.fabric8.kubernetes.api.model.HasMetadata;\n+import io.fabric8.kubernetes.api.model.KubernetesResource;\n+import io.fabric8.kubernetes.api.model.Namespaced;\n import io.fabric8.kubernetes.api.model.ObjectMeta;\n+import io.fabric8.kubernetes.client.utils.ApiVersionUtil;\n+import io.fabric8.kubernetes.client.utils.Pluralize;\n+import io.fabric8.kubernetes.model.annotation.Plural;\n+import io.fabric8.kubernetes.model.annotation.Singular;\n import io.sundr.builder.annotations.Buildable;\n-import lombok.ToString;\n+\n+import static io.fabric8.kubernetes.client.utils.Utils.isNullOrEmpty;\n \n /**\n  * A base class for implementing a custom resource kind\n  */\n @JsonDeserialize(\n-    using = JsonDeserializer.None.class\n+  using = JsonDeserializer.None.class\n )\n-@ToString\n+@JsonPropertyOrder({\n+  \"apiVersion\",\n+  \"kind\",\n+  \"metadata\",\n+  \"spec\",\n+  \"status\"\n+})\n @Buildable(builderPackage = \"io.fabric8.kubernetes.api.builder\", editableEnabled = false)\n-public abstract class CustomResource implements HasMetadata {\n-  private String kind;\n-  private String apiVersion;\n+public abstract class CustomResource<Spec extends KubernetesResource, Status extends KubernetesResource> implements HasMetadata {\n+  public static final String NAMESPACE_SCOPE = \"Namespaced\";\n+  public static final String CLUSTER_SCOPE = \"Cluster\";\n   private ObjectMeta metadata = new ObjectMeta();\n \n+  @JsonProperty(\"spec\")\n+  private Spec spec;\n+  \n+  @JsonProperty(\"status\")\n+  private Status status;\n+  \n+  @JsonIgnore\n+  private String plural;\n+  \n+  @JsonIgnore\n+  private String singular;\n+  \n+  @JsonIgnore\n+  private String crdName;\n+  \n+  private final String kind;\n+  private final String apiVersion;\n+  private final String scope;\n+  \n   public CustomResource() {\n-    this.kind = getClass().getSimpleName();\n+    final String version = HasMetadata.super.getApiVersion();\n+    if (isNullOrEmpty(version)) {\n+      throw new IllegalArgumentException(getClass().getName() + \" CustomResource must provide an API version using @ApiGroup and @ApiVersion annotations\");\n+    }\n+    this.apiVersion = version;\n+    this.kind = HasMetadata.super.getKind();\n+    scope = this instanceof Namespaced ? NAMESPACE_SCOPE : CLUSTER_SCOPE;\n   }\n-\n-  public CustomResource(String kind) {\n-    this.kind = kind;\n-  }\n-\n+  \n   @Override\n   public String toString() {\n     return \"CustomResource{\" +\n-        \"kind='\" + kind + '\\'' +\n-        \", apiVersion='\" + apiVersion + '\\'' +\n-        \", metadata=\" + metadata +\n-        '}';\n-  }\n-\n-  @Override\n-  public String getKind() {\n-    return kind;\n+      \"kind='\" + getKind() + '\\'' +\n+      \", apiVersion='\" + getApiVersion() + '\\'' +\n+      \", metadata=\" + metadata +\n+      \", spec=\" + spec +\n+      \", status=\" + status +\n+      '}';\n   }\n-\n-  public void setKind(String kind) {\n-    this.kind = kind;\n-  }\n-\n+  \n   @Override\n   public String getApiVersion() {\n     return apiVersion;\n   }\n-\n+  \n   @Override\n-  public void setApiVersion(String apiVersion) {\n-    this.apiVersion = apiVersion;\n+  public void setApiVersion(String version) {\n+    // already set in constructor", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1766def53f1b7eb5e1f0d9d7872d61d027c2184"}, "originalPosition": 118}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNDA1NjA0OnYy", "diffSide": "RIGHT", "path": "kubernetes-tests/src/test/java/io/fabric8/kubernetes/client/mock/CustomResourceCrud1109Test.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMzozMzowNVrOIGLEbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNTozNzoyMlrOIGRspQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM0MzcyNA==", "bodyText": "This test is explicit to verify that the arbitrary dashes in the names won't break the MockServer. It shouldn't be refactored.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r543343724", "createdAt": "2020-12-15T13:33:05Z", "author": {"login": "manusa"}, "path": "kubernetes-tests/src/test/java/io/fabric8/kubernetes/client/mock/CustomResourceCrud1109Test.java", "diffHunk": "@@ -41,7 +41,7 @@\n \n   @BeforeEach\n   void setUp() {\n-    customResourceDefinition = server.getClient().apiextensions().v1beta1().customResourceDefinitions()\n+    /*customResourceDefinition = server.getClient().apiextensions().v1beta1().customResourceDefinitions()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1766def53f1b7eb5e1f0d9d7872d61d027c2184"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM2NTY3Nw==", "bodyText": "OK but it should still use the dashes in the CR name. I can revert it if needed.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r543365677", "createdAt": "2020-12-15T14:02:40Z", "author": {"login": "metacosm"}, "path": "kubernetes-tests/src/test/java/io/fabric8/kubernetes/client/mock/CustomResourceCrud1109Test.java", "diffHunk": "@@ -41,7 +41,7 @@\n \n   @BeforeEach\n   void setUp() {\n-    customResourceDefinition = server.getClient().apiextensions().v1beta1().customResourceDefinitions()\n+    /*customResourceDefinition = server.getClient().apiextensions().v1beta1().customResourceDefinitions()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM0MzcyNA=="}, "originalCommit": {"oid": "a1766def53f1b7eb5e1f0d9d7872d61d027c2184"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM4NDE2Mw==", "bodyText": "dashes are intended to be in the CRD (specifically in the plural names).\nThis is to verify that the crud mock server stores any created CR with a valid key.\nIt's better and clearer to keep the complete CRD definition within the test suite so that in a single view this is understood. However, I'll probably add an extra check to verify that the \"dashed\" path is preserved.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r543384163", "createdAt": "2020-12-15T14:19:43Z", "author": {"login": "manusa"}, "path": "kubernetes-tests/src/test/java/io/fabric8/kubernetes/client/mock/CustomResourceCrud1109Test.java", "diffHunk": "@@ -41,7 +41,7 @@\n \n   @BeforeEach\n   void setUp() {\n-    customResourceDefinition = server.getClient().apiextensions().v1beta1().customResourceDefinitions()\n+    /*customResourceDefinition = server.getClient().apiextensions().v1beta1().customResourceDefinitions()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM0MzcyNA=="}, "originalCommit": {"oid": "a1766def53f1b7eb5e1f0d9d7872d61d027c2184"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzQ1MjMyNQ==", "bodyText": "Sorry, after re-checking the code, indeed it wasn't doing what it was supposed to\u2026\u00a0\ud83d\ude04\nI've changed it using @Singular and added more checks to verify that the generated CRD has indeed the desired properties.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r543452325", "createdAt": "2020-12-15T15:37:22Z", "author": {"login": "metacosm"}, "path": "kubernetes-tests/src/test/java/io/fabric8/kubernetes/client/mock/CustomResourceCrud1109Test.java", "diffHunk": "@@ -41,7 +41,7 @@\n \n   @BeforeEach\n   void setUp() {\n-    customResourceDefinition = server.getClient().apiextensions().v1beta1().customResourceDefinitions()\n+    /*customResourceDefinition = server.getClient().apiextensions().v1beta1().customResourceDefinitions()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM0MzcyNA=="}, "originalCommit": {"oid": "a1766def53f1b7eb5e1f0d9d7872d61d027c2184"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNDA3NTUzOnYy", "diffSide": "RIGHT", "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMzozNzoyMFrOIGLPnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNTozODowMVrOIGRung==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM0NjU4OQ==", "bodyText": "Please use single letters for generic types I almost went crazy trying to figure out where the Status class was.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r543346589", "createdAt": "2020-12-15T13:37:20Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -15,60 +15,101 @@\n  */\n package io.fabric8.kubernetes.client;\n \n+import java.util.Locale;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.annotation.JsonPropertyOrder;\n import com.fasterxml.jackson.databind.JsonDeserializer;\n import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n import io.fabric8.kubernetes.api.model.HasMetadata;\n+import io.fabric8.kubernetes.api.model.KubernetesResource;\n+import io.fabric8.kubernetes.api.model.Namespaced;\n import io.fabric8.kubernetes.api.model.ObjectMeta;\n+import io.fabric8.kubernetes.client.utils.ApiVersionUtil;\n+import io.fabric8.kubernetes.client.utils.Pluralize;\n+import io.fabric8.kubernetes.model.annotation.Plural;\n+import io.fabric8.kubernetes.model.annotation.Singular;\n import io.sundr.builder.annotations.Buildable;\n-import lombok.ToString;\n+\n+import static io.fabric8.kubernetes.client.utils.Utils.isNullOrEmpty;\n \n /**\n  * A base class for implementing a custom resource kind\n  */\n @JsonDeserialize(\n-    using = JsonDeserializer.None.class\n+  using = JsonDeserializer.None.class\n )\n-@ToString\n+@JsonPropertyOrder({\n+  \"apiVersion\",\n+  \"kind\",\n+  \"metadata\",\n+  \"spec\",\n+  \"status\"\n+})\n @Buildable(builderPackage = \"io.fabric8.kubernetes.api.builder\", editableEnabled = false)\n-public abstract class CustomResource implements HasMetadata {\n-  private String kind;\n-  private String apiVersion;\n+public abstract class CustomResource<Spec extends KubernetesResource, Status extends KubernetesResource> implements HasMetadata {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1766def53f1b7eb5e1f0d9d7872d61d027c2184"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM2Nzg1NQ==", "bodyText": "Will do. I was a little skeptical of the Sonar rule but apparently it is indeed a problem. My IDE shows the parameters quite well\u2026", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r543367855", "createdAt": "2020-12-15T14:05:21Z", "author": {"login": "metacosm"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -15,60 +15,101 @@\n  */\n package io.fabric8.kubernetes.client;\n \n+import java.util.Locale;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.annotation.JsonPropertyOrder;\n import com.fasterxml.jackson.databind.JsonDeserializer;\n import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n import io.fabric8.kubernetes.api.model.HasMetadata;\n+import io.fabric8.kubernetes.api.model.KubernetesResource;\n+import io.fabric8.kubernetes.api.model.Namespaced;\n import io.fabric8.kubernetes.api.model.ObjectMeta;\n+import io.fabric8.kubernetes.client.utils.ApiVersionUtil;\n+import io.fabric8.kubernetes.client.utils.Pluralize;\n+import io.fabric8.kubernetes.model.annotation.Plural;\n+import io.fabric8.kubernetes.model.annotation.Singular;\n import io.sundr.builder.annotations.Buildable;\n-import lombok.ToString;\n+\n+import static io.fabric8.kubernetes.client.utils.Utils.isNullOrEmpty;\n \n /**\n  * A base class for implementing a custom resource kind\n  */\n @JsonDeserialize(\n-    using = JsonDeserializer.None.class\n+  using = JsonDeserializer.None.class\n )\n-@ToString\n+@JsonPropertyOrder({\n+  \"apiVersion\",\n+  \"kind\",\n+  \"metadata\",\n+  \"spec\",\n+  \"status\"\n+})\n @Buildable(builderPackage = \"io.fabric8.kubernetes.api.builder\", editableEnabled = false)\n-public abstract class CustomResource implements HasMetadata {\n-  private String kind;\n-  private String apiVersion;\n+public abstract class CustomResource<Spec extends KubernetesResource, Status extends KubernetesResource> implements HasMetadata {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM0NjU4OQ=="}, "originalCommit": {"oid": "a1766def53f1b7eb5e1f0d9d7872d61d027c2184"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM3MzE2MQ==", "bodyText": "\ud83d\ude05 I literally had to checkout your branch to understand what was going on.\nI was afraid that some sort of Status class was introduced in this PR which is what triggered my alarm in the first place.\nAfter searching through the PR files several times with two browsers and going nuts while yelling at the GitHub web interface I ended up checking in my IDE and was then when I realized the problem \ud83d\ude05 \ud83d\ude05 \ud83d\ude05", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r543373161", "createdAt": "2020-12-15T14:11:07Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -15,60 +15,101 @@\n  */\n package io.fabric8.kubernetes.client;\n \n+import java.util.Locale;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.annotation.JsonPropertyOrder;\n import com.fasterxml.jackson.databind.JsonDeserializer;\n import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n import io.fabric8.kubernetes.api.model.HasMetadata;\n+import io.fabric8.kubernetes.api.model.KubernetesResource;\n+import io.fabric8.kubernetes.api.model.Namespaced;\n import io.fabric8.kubernetes.api.model.ObjectMeta;\n+import io.fabric8.kubernetes.client.utils.ApiVersionUtil;\n+import io.fabric8.kubernetes.client.utils.Pluralize;\n+import io.fabric8.kubernetes.model.annotation.Plural;\n+import io.fabric8.kubernetes.model.annotation.Singular;\n import io.sundr.builder.annotations.Buildable;\n-import lombok.ToString;\n+\n+import static io.fabric8.kubernetes.client.utils.Utils.isNullOrEmpty;\n \n /**\n  * A base class for implementing a custom resource kind\n  */\n @JsonDeserialize(\n-    using = JsonDeserializer.None.class\n+  using = JsonDeserializer.None.class\n )\n-@ToString\n+@JsonPropertyOrder({\n+  \"apiVersion\",\n+  \"kind\",\n+  \"metadata\",\n+  \"spec\",\n+  \"status\"\n+})\n @Buildable(builderPackage = \"io.fabric8.kubernetes.api.builder\", editableEnabled = false)\n-public abstract class CustomResource implements HasMetadata {\n-  private String kind;\n-  private String apiVersion;\n+public abstract class CustomResource<Spec extends KubernetesResource, Status extends KubernetesResource> implements HasMetadata {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM0NjU4OQ=="}, "originalCommit": {"oid": "a1766def53f1b7eb5e1f0d9d7872d61d027c2184"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzQ1MjgzMA==", "bodyText": "\ud83d\ude30\nSorry about that. Fixed now.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r543452830", "createdAt": "2020-12-15T15:38:01Z", "author": {"login": "metacosm"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -15,60 +15,101 @@\n  */\n package io.fabric8.kubernetes.client;\n \n+import java.util.Locale;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.annotation.JsonPropertyOrder;\n import com.fasterxml.jackson.databind.JsonDeserializer;\n import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n import io.fabric8.kubernetes.api.model.HasMetadata;\n+import io.fabric8.kubernetes.api.model.KubernetesResource;\n+import io.fabric8.kubernetes.api.model.Namespaced;\n import io.fabric8.kubernetes.api.model.ObjectMeta;\n+import io.fabric8.kubernetes.client.utils.ApiVersionUtil;\n+import io.fabric8.kubernetes.client.utils.Pluralize;\n+import io.fabric8.kubernetes.model.annotation.Plural;\n+import io.fabric8.kubernetes.model.annotation.Singular;\n import io.sundr.builder.annotations.Buildable;\n-import lombok.ToString;\n+\n+import static io.fabric8.kubernetes.client.utils.Utils.isNullOrEmpty;\n \n /**\n  * A base class for implementing a custom resource kind\n  */\n @JsonDeserialize(\n-    using = JsonDeserializer.None.class\n+  using = JsonDeserializer.None.class\n )\n-@ToString\n+@JsonPropertyOrder({\n+  \"apiVersion\",\n+  \"kind\",\n+  \"metadata\",\n+  \"spec\",\n+  \"status\"\n+})\n @Buildable(builderPackage = \"io.fabric8.kubernetes.api.builder\", editableEnabled = false)\n-public abstract class CustomResource implements HasMetadata {\n-  private String kind;\n-  private String apiVersion;\n+public abstract class CustomResource<Spec extends KubernetesResource, Status extends KubernetesResource> implements HasMetadata {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM0NjU4OQ=="}, "originalCommit": {"oid": "a1766def53f1b7eb5e1f0d9d7872d61d027c2184"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTA3MDIxOnYy", "diffSide": "RIGHT", "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNjozMjozOVrOIGUdcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODo0NTo1MVrOIGae1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzQ5NzU4NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                return (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : HasMetadata.getKind(clazz)).toLowerCase(Locale.ROOT);\n          \n          \n            \n                return (fromAnnotation != null ? fromAnnotation.value() : HasMetadata.getKind(clazz)).toLowerCase(Locale.ROOT);", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r543497585", "createdAt": "2020-12-15T16:32:39Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -80,4 +127,85 @@ public ObjectMeta getMetadata() {\n   public void setMetadata(ObjectMeta metadata) {\n     this.metadata = metadata;\n   }\n+  \n+  \n+  public static String getPlural(Class<? extends CustomResource> clazz) {\n+    final Plural fromAnnotation = clazz.getAnnotation(Plural.class);\n+    return (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : Pluralize.toPlural(getSingular(clazz)));\n+  }\n+  \n+  @JsonIgnore\n+  public String getPlural() {\n+    if(plural == null) {\n+      final Plural fromAnnotation = getClass().getAnnotation(Plural.class);\n+      this.plural = (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : Pluralize.toPlural(getSingular()));\n+    }\n+    return plural;\n+  }\n+  \n+  public static String getSingular(Class<? extends CustomResource> clazz) {\n+    final Singular fromAnnotation = clazz.getAnnotation(Singular.class);\n+    return (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : HasMetadata.getKind(clazz)).toLowerCase(Locale.ROOT);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34c04087f8dfbb80d495173bd452623b34ef2421"}, "originalPosition": 159}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzUzMTc0Nw==", "bodyText": "Shouldn't we make sure that the provided value is lower-cased?", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r543531747", "createdAt": "2020-12-15T17:14:58Z", "author": {"login": "metacosm"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -80,4 +127,85 @@ public ObjectMeta getMetadata() {\n   public void setMetadata(ObjectMeta metadata) {\n     this.metadata = metadata;\n   }\n+  \n+  \n+  public static String getPlural(Class<? extends CustomResource> clazz) {\n+    final Plural fromAnnotation = clazz.getAnnotation(Plural.class);\n+    return (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : Pluralize.toPlural(getSingular(clazz)));\n+  }\n+  \n+  @JsonIgnore\n+  public String getPlural() {\n+    if(plural == null) {\n+      final Plural fromAnnotation = getClass().getAnnotation(Plural.class);\n+      this.plural = (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : Pluralize.toPlural(getSingular()));\n+    }\n+    return plural;\n+  }\n+  \n+  public static String getSingular(Class<? extends CustomResource> clazz) {\n+    final Singular fromAnnotation = clazz.getAnnotation(Singular.class);\n+    return (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : HasMetadata.getKind(clazz)).toLowerCase(Locale.ROOT);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzQ5NzU4NQ=="}, "originalCommit": {"oid": "34c04087f8dfbb80d495173bd452623b34ef2421"}, "originalPosition": 159}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU5NjI0NQ==", "bodyText": "It's lowercased. I think that parentheses are confusing \ud83d\ude09", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r543596245", "createdAt": "2020-12-15T18:45:51Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -80,4 +127,85 @@ public ObjectMeta getMetadata() {\n   public void setMetadata(ObjectMeta metadata) {\n     this.metadata = metadata;\n   }\n+  \n+  \n+  public static String getPlural(Class<? extends CustomResource> clazz) {\n+    final Plural fromAnnotation = clazz.getAnnotation(Plural.class);\n+    return (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : Pluralize.toPlural(getSingular(clazz)));\n+  }\n+  \n+  @JsonIgnore\n+  public String getPlural() {\n+    if(plural == null) {\n+      final Plural fromAnnotation = getClass().getAnnotation(Plural.class);\n+      this.plural = (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : Pluralize.toPlural(getSingular()));\n+    }\n+    return plural;\n+  }\n+  \n+  public static String getSingular(Class<? extends CustomResource> clazz) {\n+    final Singular fromAnnotation = clazz.getAnnotation(Singular.class);\n+    return (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : HasMetadata.getKind(clazz)).toLowerCase(Locale.ROOT);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzQ5NzU4NQ=="}, "originalCommit": {"oid": "34c04087f8dfbb80d495173bd452623b34ef2421"}, "originalPosition": 159}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTA3MjMwOnYy", "diffSide": "RIGHT", "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNjozMzowMVrOIGUepQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNjozMzowMVrOIGUepQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzQ5Nzg5Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  this.singular = (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : getKind()).toLowerCase(Locale.ROOT);\n          \n          \n            \n                  this.singular = (fromAnnotation != null ? fromAnnotation.value() : getKind()).toLowerCase(Locale.ROOT);", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r543497893", "createdAt": "2020-12-15T16:33:01Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -80,4 +127,85 @@ public ObjectMeta getMetadata() {\n   public void setMetadata(ObjectMeta metadata) {\n     this.metadata = metadata;\n   }\n+  \n+  \n+  public static String getPlural(Class<? extends CustomResource> clazz) {\n+    final Plural fromAnnotation = clazz.getAnnotation(Plural.class);\n+    return (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : Pluralize.toPlural(getSingular(clazz)));\n+  }\n+  \n+  @JsonIgnore\n+  public String getPlural() {\n+    if(plural == null) {\n+      final Plural fromAnnotation = getClass().getAnnotation(Plural.class);\n+      this.plural = (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : Pluralize.toPlural(getSingular()));\n+    }\n+    return plural;\n+  }\n+  \n+  public static String getSingular(Class<? extends CustomResource> clazz) {\n+    final Singular fromAnnotation = clazz.getAnnotation(Singular.class);\n+    return (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : HasMetadata.getKind(clazz)).toLowerCase(Locale.ROOT);\n+  }\n+  \n+  @JsonIgnore\n+  public String getSingular() {\n+    if(singular == null) {\n+      final Singular fromAnnotation = getClass().getAnnotation(Singular.class);\n+      this.singular = (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : getKind()).toLowerCase(Locale.ROOT);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34c04087f8dfbb80d495173bd452623b34ef2421"}, "originalPosition": 166}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTA4NTAwOnYy", "diffSide": "RIGHT", "path": "kubernetes-client/src/test/java/io/fabric8/kubernetes/client/dsl/internal/CustomResourceOperationsImplTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNjozNTozNlrOIGUmgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNjozNTozNlrOIGUmgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzQ5OTkwNQ==", "bodyText": "Please remove commented block (unless there's a reason to keep this here)", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r543499905", "createdAt": "2020-12-15T16:35:36Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/test/java/io/fabric8/kubernetes/client/dsl/internal/CustomResourceOperationsImplTest.java", "diffHunk": "@@ -28,43 +27,51 @@\n import io.fabric8.kubernetes.client.dsl.base.CustomResourceDefinitionContext;\n import io.fabric8.kubernetes.internal.KubernetesDeserializer;\n \n+import io.fabric8.kubernetes.model.annotation.ApiGroup;\n+import io.fabric8.kubernetes.model.annotation.ApiVersion;\n import org.junit.jupiter.api.Test;\n \n import com.fasterxml.jackson.core.JsonFactory;\n import com.fasterxml.jackson.core.JsonParser;\n import com.fasterxml.jackson.databind.MappingJsonFactory;\n \n import static org.hamcrest.core.IsInstanceOf.instanceOf;\n-import static org.junit.Assert.assertArrayEquals;\n import static org.junit.Assert.assertEquals;\n import static org.junit.Assert.assertNotNull;\n import static org.junit.Assert.assertThat;\n \n public class CustomResourceOperationsImplTest {\n \n+  @ApiGroup(MyCustomResource.GROUP)\n+  @ApiVersion(MyCustomResource.VERSION)\n   public static class MyCustomResource extends CustomResource {\n+    public static final String GROUP = \"custom.group\";\n+    public static final String VERSION = \"v1alpha1\";\n   }\n \n   public static class MyCustomResourceList extends CustomResourceList<MyCustomResource> {\n   }\n   \n+  @ApiGroup(\"sample.fabric8.io\")\n+  @ApiVersion(\"v1\")\n   public static class Bar extends CustomResource {}\n \n-  private final CustomResourceDefinition crd = new CustomResourceDefinitionBuilder()\n+  /*private final CustomResourceDefinition crd = new CustomResourceDefinitionBuilder()\n     .withNewMetadata()\n       .withName(\"custom.name\")\n     .endMetadata()\n     .withNewSpec()\n-      .withGroup(\"custom.group\")\n-      .withVersion(\"v1alpha1\")\n+      .withGroup(MyCustomResource.GROUP)\n+      .withVersion(MyCustomResource.VERSION)\n       .withNewNames()\n         .withKind(\"MyCustomResource\")\n         .withListKind(\"MyCustomResourceList\")\n         .withPlural(\"mycustomresources\")\n         .withSingular(\"mycustomresource\")\n       .endNames()\n     .endSpec()\n-  .build();\n+  .build();*/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34c04087f8dfbb80d495173bd452623b34ef2421"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxOTQwOTU1OnYy", "diffSide": "RIGHT", "path": "kubernetes-client/src/test/java/io/fabric8/kubernetes/client/CustomResourceTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTo0NjoyM1rOIG8nOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTo0NjoyM1rOIG8nOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE1NTQ1MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import org.junit.Test;\n          \n          \n            \n            import org.junit.jupiter.api.Test;", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r544155451", "createdAt": "2020-12-16T09:46:23Z", "author": {"login": "rohanKanojia"}, "path": "kubernetes-client/src/test/java/io/fabric8/kubernetes/client/CustomResourceTest.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/**\n+ * Copyright (C) 2015 Red Hat, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *         http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.fabric8.kubernetes.client;\n+\n+import io.fabric8.kubernetes.model.annotation.ApiGroup;\n+import io.fabric8.kubernetes.model.annotation.ApiVersion;\n+import org.junit.Test;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0a3871568e2a854f1610eb65ef5985826c99618"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxOTczMjg4OnYy", "diffSide": "RIGHT", "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/dsl/base/CustomResourceDefinitionContext.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMDo1ODo0OFrOIG_k1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMTowMDozNFrOIG_pMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDIwMzk4OQ==", "bodyText": "I think we would also need to set spec.versions[].schema.openAPIV3Schema, spec.versions[].served and spec.versions[].storage. If I don't add these fields in apiextensions.k8s.io/v1#CustomResourceDefinition I get these validation errors:\nThe CustomResourceDefinition \"crontabs.stable.example.com\" is invalid: spec.versions[0].schema.openAPIV3Schema: Required value: schemas are required\n\nerror: error validating \"crontab-crd.yml\": error validating data: [ValidationError(CustomResourceDefinition.spec.versions[0]): missing required field \"served\" in io.k8s.apiextensions-apiserver.pkg.apis.apiextensions.v1.CustomResourceDefinitionVersion, ValidationError(CustomResourceDefinition.spec.versions[0]): missing required field \"storage\" in io.k8s.apiextensions-apiserver.pkg.apis.apiextensions.v1.CustomResourceDefinitionVersion]; if you choose to ignore these errors, turn validation off with --validate=false", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r544203989", "createdAt": "2020-12-16T10:58:48Z", "author": {"login": "rohanKanojia"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/dsl/base/CustomResourceDefinitionContext.java", "diffHunk": "@@ -59,40 +58,86 @@ public String getVersion() {\n   public String getKind() {\n     return kind;\n   }\n-\n-  public static CustomResourceDefinitionContext fromCustomResourceType(Class<? extends HasMetadata> customResource) {\n-    HasMetadata instance;\n+  \n+  public static CustomResourceDefinitionBuilder v1beta1CRDFromCustomResourceType(Class<? extends CustomResource> customResource) {\n+    try {\n+      final CustomResource instance = customResource.getDeclaredConstructor().newInstance();\n+    \n+      final String kind = instance.getKind();\n+      final String version = instance.getVersion();\n+  \n+      return new CustomResourceDefinitionBuilder()\n+        .withKind(kind)\n+        .withNewMetadata()\n+        .withName(instance.getCRDName())\n+        .endMetadata()\n+        .withNewSpec()\n+        .withGroup(instance.getGroup())\n+        .withVersion(version) // also set version to the first (and only) versions item\n+        .addNewVersion().withName(version).endVersion()\n+        .withScope(instance.getScope())\n+        .withNewNames()\n+        .withKind(kind)\n+        .withPlural(instance.getPlural())\n+        .withSingular(instance.getSingular())\n+        .endNames()\n+        .endSpec();\n+    } catch (InstantiationException | IllegalAccessException | NoSuchMethodException | InvocationTargetException e) {\n+      throw KubernetesClientException.launderThrowable(e);\n+    }\n+  }\n+  \n+  public static io.fabric8.kubernetes.api.model.apiextensions.v1.CustomResourceDefinitionBuilder v1CRDFromCustomResourceType(Class<? extends CustomResource> customResource) {\n     try {\n-      instance = customResource.newInstance();\n-\n-      String kind = Utils.isNullOrEmpty(instance.getKind()) ? customResource.getSimpleName() : instance.getKind();\n-      String name = kind.toLowerCase();\n-      String plural = Pluralize.toPlural(name);\n-      String group = ApiVersionUtil.apiGroup(instance, null);\n-      String version = ApiVersionUtil.apiVersion(instance, \"v1\");\n-      String scope = instance instanceof Namespaced ? \"Namespaced\" : \"Cluster\";\n-\n-      return new CustomResourceDefinitionContext.Builder()\n-        .withGroup(group)\n-        .withVersion(version)\n-        .withScope(scope)\n-        .withName(name)\n-        .withPlural(plural)\n+      final CustomResource instance = customResource.getDeclaredConstructor().newInstance();\n+    \n+      String kind = instance.getKind();\n+  \n+      return new io.fabric8.kubernetes.api.model.apiextensions.v1.CustomResourceDefinitionBuilder()\n         .withKind(kind)\n+        .withNewMetadata()\n+        .withName(instance.getCRDName())\n+        .endMetadata()\n+        .withNewSpec()\n+        .withGroup(instance.getGroup())\n+        .addNewVersion().withName(instance.getVersion()).endVersion()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f073e4449ccec6d16ebc7c2ca7a717016115ddbd"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDIwNTEwNA==", "bodyText": "Those will need to be added by the user always.\nThe idea is to work on the inference of this spec from the POJO, but I would delay this to a future PR.\n#2611 (comment)", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r544205104", "createdAt": "2020-12-16T11:00:34Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/dsl/base/CustomResourceDefinitionContext.java", "diffHunk": "@@ -59,40 +58,86 @@ public String getVersion() {\n   public String getKind() {\n     return kind;\n   }\n-\n-  public static CustomResourceDefinitionContext fromCustomResourceType(Class<? extends HasMetadata> customResource) {\n-    HasMetadata instance;\n+  \n+  public static CustomResourceDefinitionBuilder v1beta1CRDFromCustomResourceType(Class<? extends CustomResource> customResource) {\n+    try {\n+      final CustomResource instance = customResource.getDeclaredConstructor().newInstance();\n+    \n+      final String kind = instance.getKind();\n+      final String version = instance.getVersion();\n+  \n+      return new CustomResourceDefinitionBuilder()\n+        .withKind(kind)\n+        .withNewMetadata()\n+        .withName(instance.getCRDName())\n+        .endMetadata()\n+        .withNewSpec()\n+        .withGroup(instance.getGroup())\n+        .withVersion(version) // also set version to the first (and only) versions item\n+        .addNewVersion().withName(version).endVersion()\n+        .withScope(instance.getScope())\n+        .withNewNames()\n+        .withKind(kind)\n+        .withPlural(instance.getPlural())\n+        .withSingular(instance.getSingular())\n+        .endNames()\n+        .endSpec();\n+    } catch (InstantiationException | IllegalAccessException | NoSuchMethodException | InvocationTargetException e) {\n+      throw KubernetesClientException.launderThrowable(e);\n+    }\n+  }\n+  \n+  public static io.fabric8.kubernetes.api.model.apiextensions.v1.CustomResourceDefinitionBuilder v1CRDFromCustomResourceType(Class<? extends CustomResource> customResource) {\n     try {\n-      instance = customResource.newInstance();\n-\n-      String kind = Utils.isNullOrEmpty(instance.getKind()) ? customResource.getSimpleName() : instance.getKind();\n-      String name = kind.toLowerCase();\n-      String plural = Pluralize.toPlural(name);\n-      String group = ApiVersionUtil.apiGroup(instance, null);\n-      String version = ApiVersionUtil.apiVersion(instance, \"v1\");\n-      String scope = instance instanceof Namespaced ? \"Namespaced\" : \"Cluster\";\n-\n-      return new CustomResourceDefinitionContext.Builder()\n-        .withGroup(group)\n-        .withVersion(version)\n-        .withScope(scope)\n-        .withName(name)\n-        .withPlural(plural)\n+      final CustomResource instance = customResource.getDeclaredConstructor().newInstance();\n+    \n+      String kind = instance.getKind();\n+  \n+      return new io.fabric8.kubernetes.api.model.apiextensions.v1.CustomResourceDefinitionBuilder()\n         .withKind(kind)\n+        .withNewMetadata()\n+        .withName(instance.getCRDName())\n+        .endMetadata()\n+        .withNewSpec()\n+        .withGroup(instance.getGroup())\n+        .addNewVersion().withName(instance.getVersion()).endVersion()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDIwMzk4OQ=="}, "originalCommit": {"oid": "f073e4449ccec6d16ebc7c2ca7a717016115ddbd"}, "originalPosition": 84}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMTIxODE4OnYy", "diffSide": "RIGHT", "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNjoxMDoxNVrOIHNHVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxOTowNTowOVrOIHUt1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQyNTgxNQ==", "bodyText": "I would rather see this if being part of the constructor and not the getter.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r544425815", "createdAt": "2020-12-16T16:10:15Z", "author": {"login": "iocanel"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -80,4 +129,120 @@ public ObjectMeta getMetadata() {\n   public void setMetadata(ObjectMeta metadata) {\n     this.metadata = metadata;\n   }\n+  \n+  /**\n+   * Retrieves the plural form associated with the specified CustomResource if annotated with {@link Plural} or computes a default value\n+   * using the value returned by {@link #getSingular(Class)} as input to {@link Pluralize#toPlural(String)}.\n+   *\n+   * @param clazz the CustomResource whose plural form we want to retrieve\n+   * @return the plural form defined by the {@link Plural} annotation or a computed default value\n+   */\n+  public static String getPlural(Class<? extends CustomResource> clazz) {\n+    final Plural fromAnnotation = clazz.getAnnotation(Plural.class);\n+    return (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : Pluralize.toPlural(getSingular(clazz)));\n+  }\n+  \n+  @JsonIgnore\n+  public String getPlural() {\n+    if (plural == null) {\n+      this.plural = getPlural(getClass());\n+    }\n+    return plural;\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd9b2b4fd49371cc528959b81dd6b36ae5396832"}, "originalPosition": 163}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ2MjQ4NQ==", "bodyText": "I tried that but that broke deserialization, iirc. Then again, some other things have changed in the mean time so let me try that change again to see if it works now.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r544462485", "createdAt": "2020-12-16T16:56:24Z", "author": {"login": "metacosm"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -80,4 +129,120 @@ public ObjectMeta getMetadata() {\n   public void setMetadata(ObjectMeta metadata) {\n     this.metadata = metadata;\n   }\n+  \n+  /**\n+   * Retrieves the plural form associated with the specified CustomResource if annotated with {@link Plural} or computes a default value\n+   * using the value returned by {@link #getSingular(Class)} as input to {@link Pluralize#toPlural(String)}.\n+   *\n+   * @param clazz the CustomResource whose plural form we want to retrieve\n+   * @return the plural form defined by the {@link Plural} annotation or a computed default value\n+   */\n+  public static String getPlural(Class<? extends CustomResource> clazz) {\n+    final Plural fromAnnotation = clazz.getAnnotation(Plural.class);\n+    return (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : Pluralize.toPlural(getSingular(clazz)));\n+  }\n+  \n+  @JsonIgnore\n+  public String getPlural() {\n+    if (plural == null) {\n+      this.plural = getPlural(getClass());\n+    }\n+    return plural;\n+  }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQyNTgxNQ=="}, "originalCommit": {"oid": "bd9b2b4fd49371cc528959b81dd6b36ae5396832"}, "originalPosition": 163}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDU1MDM1Nw==", "bodyText": "Done.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2661#discussion_r544550357", "createdAt": "2020-12-16T19:05:09Z", "author": {"login": "metacosm"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CustomResource.java", "diffHunk": "@@ -80,4 +129,120 @@ public ObjectMeta getMetadata() {\n   public void setMetadata(ObjectMeta metadata) {\n     this.metadata = metadata;\n   }\n+  \n+  /**\n+   * Retrieves the plural form associated with the specified CustomResource if annotated with {@link Plural} or computes a default value\n+   * using the value returned by {@link #getSingular(Class)} as input to {@link Pluralize#toPlural(String)}.\n+   *\n+   * @param clazz the CustomResource whose plural form we want to retrieve\n+   * @return the plural form defined by the {@link Plural} annotation or a computed default value\n+   */\n+  public static String getPlural(Class<? extends CustomResource> clazz) {\n+    final Plural fromAnnotation = clazz.getAnnotation(Plural.class);\n+    return (fromAnnotation != null ? fromAnnotation.value().toLowerCase(Locale.ROOT) : Pluralize.toPlural(getSingular(clazz)));\n+  }\n+  \n+  @JsonIgnore\n+  public String getPlural() {\n+    if (plural == null) {\n+      this.plural = getPlural(getClass());\n+    }\n+    return plural;\n+  }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQyNTgxNQ=="}, "originalCommit": {"oid": "bd9b2b4fd49371cc528959b81dd6b36ae5396832"}, "originalPosition": 163}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3635, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}