{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MTc5NDEw", "number": 2152, "title": "handle possible /status subpath due to using status subresource on crd", "bodyText": "When a CRD has the following:\nsubresources:\n  status: {}\n\nIt causes the exposure of a /status endpoint on the CRD API. For example: /apis/hubspot.com/v1/namespaces/test-ns/test-crd/status.\nThe KubernetesAttributesExtractor was not properly handling this, which was causing calls to update the status of crds in the test server to not find the right resource to update.", "createdAt": "2020-04-20T16:49:54Z", "url": "https://github.com/fabric8io/kubernetes-client/pull/2152", "merged": true, "mergeCommit": {"oid": "0ea4d9bd9977ce74333f1c55399dc165c99fe6f6"}, "closed": true, "closedAt": "2020-04-22T06:20:51Z", "author": {"login": "bbeaudreault"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZh7H1AH2gAyNDA2MTc5NDEwOjQ1ODE0ZWEzMDcyNzE0N2EzZTI3YjUxZDY1NDlkMTcyNGYzY2M5ZDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZ3RbMAH2gAyNDA2MTc5NDEwOjEyZmU0NmRiMGY4OGRmNGNlNjE1MmQ2MzQxNmQxYjYwNjVmMGMzNmY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "45814ea30727147a3e27b51d6549d1724f3cc9d6", "author": {"user": {"login": "bbeaudreault", "name": "Bryan Beaudreault"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/45814ea30727147a3e27b51d6549d1724f3cc9d6", "committedDate": "2020-04-20T16:45:38Z", "message": "handle possible /status subpath due to using status subresource on crd"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MDM0MDU3", "url": "https://github.com/fabric8io/kubernetes-client/pull/2152#pullrequestreview-397034057", "createdAt": "2020-04-21T06:51:07Z", "commit": {"oid": "45814ea30727147a3e27b51d6549d1724f3cc9d6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NDAyNDU3", "url": "https://github.com/fabric8io/kubernetes-client/pull/2152#pullrequestreview-397402457", "createdAt": "2020-04-21T14:43:42Z", "commit": {"oid": "45814ea30727147a3e27b51d6549d1724f3cc9d6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNDo0Mzo0MlrOGJJnJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNDo0Mzo0MlrOGJJnJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI0Nzg0Ng==", "bodyText": "Checking the provided link (https://kubernetes.io/docs/tasks/access-kubernetes-api/custom-resources/custom-resource-definitions/#subresources)\nI see there are 2 subresources /status and /scale.\nMaybe we could change this to:\nprivate static final String SUBRESOURCE_MAYBE_GROUP = \"(/((status)|(scale)))?\";\n\nor even (although maybe this will probably break things):\nprivate static final String SUBRESOURCE_MAYBE_GROUP = \"(/(?<subresource>[^/]+))?\";\n\nWDYT??", "url": "https://github.com/fabric8io/kubernetes-client/pull/2152#discussion_r412247846", "createdAt": "2020-04-21T14:43:42Z", "author": {"login": "manusa"}, "path": "kubernetes-server-mock/src/main/java/io/fabric8/kubernetes/client/server/mock/KubernetesAttributesExtractor.java", "diffHunk": "@@ -53,9 +53,10 @@\n   private static final String KIND_GROUP = \"/(?<kind>[^/?]+)\";\n   private static final String NAME_GROUP = \"(/(?<name>[^/?]+))?\";\n   private static final String NAMESPACE_GROUP = \"(/namespaces/(?<namespace>[^/]+))?\";\n+  private static final String STATUS_MAYBE_GROUP = \"(/status)?\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45814ea30727147a3e27b51d6549d1724f3cc9d6"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "144ebf30c4cb51fcf010731ee5d4ac01950dab45", "author": {"user": {"login": "bbeaudreault", "name": "Bryan Beaudreault"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/144ebf30c4cb51fcf010731ee5d4ac01950dab45", "committedDate": "2020-04-21T16:31:08Z", "message": "support scale, and update test to test for supported subresources"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NTAwODA1", "url": "https://github.com/fabric8io/kubernetes-client/pull/2152#pullrequestreview-397500805", "createdAt": "2020-04-21T17:03:56Z", "commit": {"oid": "144ebf30c4cb51fcf010731ee5d4ac01950dab45"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NTA1MDQy", "url": "https://github.com/fabric8io/kubernetes-client/pull/2152#pullrequestreview-397505042", "createdAt": "2020-04-21T17:09:12Z", "commit": {"oid": "144ebf30c4cb51fcf010731ee5d4ac01950dab45"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cea797d8420d51eb6a333c9e8b989d637570a6b", "author": {"user": {"login": "bbeaudreault", "name": "Bryan Beaudreault"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/0cea797d8420d51eb6a333c9e8b989d637570a6b", "committedDate": "2020-04-21T17:29:19Z", "message": "Merge remote-tracking branch 'upstream/master' into extract_status_subresource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08d6a2b16c07b5162a8fc402c3163a3ecaf4a947", "author": {"user": {"login": "bbeaudreault", "name": "Bryan Beaudreault"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/08d6a2b16c07b5162a8fc402c3163a3ecaf4a947", "committedDate": "2020-04-21T17:35:17Z", "message": "changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12fe46db0f88df4ce6152d63416d1b6065f0c36f", "author": {"user": {"login": "bbeaudreault", "name": "Bryan Beaudreault"}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/12fe46db0f88df4ce6152d63416d1b6065f0c36f", "committedDate": "2020-04-21T17:38:00Z", "message": "fix name"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3762, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}