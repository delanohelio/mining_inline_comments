{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2Njg5Njg3", "number": 2400, "title": "Fix #2265: Refactor SubjectAccessReview API", "bodyText": "Fixes #2265\n\nAdded new entrypoint authorization() into DSL which only allows create() operations\nRemoved old subjectAccessReviewAuth() API\n\nThis should also fix #2191\nDescription\n\nType of change\n\n\n Bug fix (non-breaking change which fixes an issue)\n Feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to change\n Chore (non-breaking change which doesn't affect codebase;\ntest, version modification, documentation, etc.)\n\nChecklist\n\n Code contributed by me aligns with current project license: Apache 2.0\n I Added CHANGELOG entry regarding this change\n I have implemented unit tests to cover my changes\n I have added/updated the javadocs and other documentation accordingly\n No new bugs, code smells, etc. in SonarCloud report\n I tested my code in Kubernetes\n I tested my code in OpenShift", "createdAt": "2020-08-12T11:00:14Z", "url": "https://github.com/fabric8io/kubernetes-client/pull/2400", "merged": true, "mergeCommit": {"oid": "5eebe595a42273bcba8f701460338fe75a565fa6"}, "closed": true, "closedAt": "2020-08-24T08:34:25Z", "author": {"login": "rohanKanojia"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-JVbKAFqTQ2NTgwNzM0NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdB-GfnAFqTQ3MzIxMDkyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1ODA3MzQ0", "url": "https://github.com/fabric8io/kubernetes-client/pull/2400#pullrequestreview-465807344", "createdAt": "2020-08-12T11:01:56Z", "commit": {"oid": "5ec5ec15a6ede41b0faa28765518b3fc9034d753"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5ec5ec15a6ede41b0faa28765518b3fc9034d753", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/5ec5ec15a6ede41b0faa28765518b3fc9034d753", "committedDate": "2020-08-12T10:57:47Z", "message": "Fix #2265: Refactor SubjectAccessReview API\n\n+ Added new entrypoint authorization() into DSL which only allows create() operations\n+ Removed old subjectAccessReviewAuth() API\n\nThis should also fix #2191"}, "afterCommit": {"oid": "143db5fc4684cb113d707997dcef2140d521e2e2", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/143db5fc4684cb113d707997dcef2140d521e2e2", "committedDate": "2020-08-12T11:38:37Z", "message": "Fix #2265: Refactor SubjectAccessReview API\n\n+ Added new entrypoint authorization() into DSL which only allows create() operations\n+ Removed old subjectAccessReviewAuth() API\n\nThis should also fix #2191"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "143db5fc4684cb113d707997dcef2140d521e2e2", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/143db5fc4684cb113d707997dcef2140d521e2e2", "committedDate": "2020-08-12T11:38:37Z", "message": "Fix #2265: Refactor SubjectAccessReview API\n\n+ Added new entrypoint authorization() into DSL which only allows create() operations\n+ Removed old subjectAccessReviewAuth() API\n\nThis should also fix #2191"}, "afterCommit": {"oid": "0cd587adfb76050061901827ae468a31af3220e5", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/0cd587adfb76050061901827ae468a31af3220e5", "committedDate": "2020-08-12T11:59:19Z", "message": "Fix #2265: Refactor SubjectAccessReview API\n\n+ Added new entrypoint authorization() into DSL which only allows create() operations\n+ Removed old subjectAccessReviewAuth() API\n\nThis should also fix #2191"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a8d52a90a248e33f02d56470118b7b9b5b7c9a2c", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/a8d52a90a248e33f02d56470118b7b9b5b7c9a2c", "committedDate": "2020-08-16T09:28:16Z", "message": "Fix #1978: Add support for creating TokenReview\n\nTokenReview also are create only resources like SubjectAccess* operations in\nwhich same object is returned in response with status object modified. It's\nsupport can be added easily with current support added for SubjectAccessReview."}, "afterCommit": {"oid": "f59bbb85d273b20f59b92f3b741719985480d371", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/f59bbb85d273b20f59b92f3b741719985480d371", "committedDate": "2020-08-19T06:32:37Z", "message": "Fix #1978: Add support for creating TokenReview\n\nTokenReview also are create only resources like SubjectAccess* operations in\nwhich same object is returned in response with status object modified. It's\nsupport can be added easily with current support added for SubjectAccessReview."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwMTk4MzA3", "url": "https://github.com/fabric8io/kubernetes-client/pull/2400#pullrequestreview-470198307", "createdAt": "2020-08-19T07:36:33Z", "commit": {"oid": "f59bbb85d273b20f59b92f3b741719985480d371"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNjcwODE1", "url": "https://github.com/fabric8io/kubernetes-client/pull/2400#pullrequestreview-471670815", "createdAt": "2020-08-20T14:27:48Z", "commit": {"oid": "f59bbb85d273b20f59b92f3b741719985480d371"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNDoyNzo0OVrOHEEO3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNDoyNzo0OVrOHEEO3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDAyNTY5Mg==", "bodyText": "This interface seems to be redundant now since it's only extending Creatable and not adding any methods. Why keep it?", "url": "https://github.com/fabric8io/kubernetes-client/pull/2400#discussion_r474025692", "createdAt": "2020-08-20T14:27:49Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/CreateOnlyResourceOperations.java", "diffHunk": "@@ -13,18 +13,9 @@\n  * See the License for the specific language governing permissions and\n  * limitations under the License.\n  */\n+package io.fabric8.kubernetes.client;\n \n-package io.fabric8.openshift.client.dsl;\n-\n-import io.fabric8.kubernetes.api.model.Doneable;\n import io.fabric8.kubernetes.client.dsl.Createable;\n-import io.fabric8.openshift.api.model.LocalSubjectAccessReview;\n-import io.fabric8.openshift.api.model.LocalSubjectAccessReviewFluentImpl;\n-import io.fabric8.openshift.api.model.SubjectAccessReviewResponse;\n \n-public abstract class CreateableLocalSubjectAccessReview extends\n-  LocalSubjectAccessReviewFluentImpl<CreateableLocalSubjectAccessReview>\n-  implements\n-  Doneable<SubjectAccessReviewResponse>,\n-  Createable<LocalSubjectAccessReview, SubjectAccessReviewResponse, CreateableLocalSubjectAccessReview> {\n+public interface CreateOnlyResourceOperations<T, D> extends Createable<T, T, D> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f59bbb85d273b20f59b92f3b741719985480d371"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNzIzNDQ2", "url": "https://github.com/fabric8io/kubernetes-client/pull/2400#pullrequestreview-471723446", "createdAt": "2020-08-20T15:21:30Z", "commit": {"oid": "f59bbb85d273b20f59b92f3b741719985480d371"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNToyMTozMFrOHEGrQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNToyMTozMFrOHEGrQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDA2NTcyOA==", "bodyText": "Different approach to #2400 (comment)\nAgain, why not just ditch the interface and use Creatable instead in the implementing class?", "url": "https://github.com/fabric8io/kubernetes-client/pull/2400#discussion_r474065728", "createdAt": "2020-08-20T15:21:30Z", "author": {"login": "manusa"}, "path": "openshift-client/src/main/java/io/fabric8/openshift/client/OpenshiftSubjectAccessOperations.java", "diffHunk": "@@ -13,18 +13,10 @@\n  * See the License for the specific language governing permissions and\n  * limitations under the License.\n  */\n+package io.fabric8.openshift.client;\n \n-package io.fabric8.openshift.client.dsl;\n-\n-import io.fabric8.kubernetes.api.model.Doneable;\n-import io.fabric8.kubernetes.client.dsl.Createable;\n-import io.fabric8.openshift.api.model.SubjectAccessReview;\n-import io.fabric8.openshift.api.model.SubjectAccessReviewFluentImpl;\n import io.fabric8.openshift.api.model.SubjectAccessReviewResponse;\n \n-public abstract class CreateableSubjectAccessReview extends\n-  SubjectAccessReviewFluentImpl<CreateableSubjectAccessReview>\n-  implements\n-  Doneable<SubjectAccessReviewResponse>,\n-  Createable<SubjectAccessReview, SubjectAccessReviewResponse, CreateableSubjectAccessReview> {\n+public interface OpenshiftSubjectAccessOperations<T> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f59bbb85d273b20f59b92f3b741719985480d371"}, "originalPosition": 19}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f59bbb85d273b20f59b92f3b741719985480d371", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/f59bbb85d273b20f59b92f3b741719985480d371", "committedDate": "2020-08-19T06:32:37Z", "message": "Fix #1978: Add support for creating TokenReview\n\nTokenReview also are create only resources like SubjectAccess* operations in\nwhich same object is returned in response with status object modified. It's\nsupport can be added easily with current support added for SubjectAccessReview."}, "afterCommit": {"oid": "09767fe700fa2cb177ed2a32dacb44fba38b44e8", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/09767fe700fa2cb177ed2a32dacb44fba38b44e8", "committedDate": "2020-08-21T13:21:05Z", "message": "Fix #1978: Add support for creating TokenReview\n\nTokenReview also are create only resources like SubjectAccess* operations in\nwhich same object is returned in response with status object modified. It's\nsupport can be added easily with current support added for SubjectAccessReview."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczMTUyODcz", "url": "https://github.com/fabric8io/kubernetes-client/pull/2400#pullrequestreview-473152873", "createdAt": "2020-08-24T06:33:33Z", "commit": {"oid": "09767fe700fa2cb177ed2a32dacb44fba38b44e8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNjozMzozNFrOHFWTwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNjozMzozNFrOHFWTwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM3MDQzNA==", "bodyText": "This is redundant, previous statement already takes care of this. I think you can also declare the fields final.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2400#discussion_r475370434", "createdAt": "2020-08-24T06:33:34Z", "author": {"login": "manusa"}, "path": "openshift-client/src/main/java/io/fabric8/openshift/client/OpenShiftLocalSubjectAccessReviewOperationsImpl.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (C) 2015 Red Hat, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *         http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.fabric8.openshift.client;\n+\n+import io.fabric8.kubernetes.client.Config;\n+import io.fabric8.kubernetes.client.KubernetesClientException;\n+import io.fabric8.kubernetes.client.dsl.Createable;\n+import io.fabric8.kubernetes.client.dsl.Namespaceable;\n+import io.fabric8.kubernetes.client.dsl.base.OperationContext;\n+import io.fabric8.kubernetes.client.dsl.base.OperationSupport;\n+import io.fabric8.openshift.api.model.DoneableLocalSubjectAccessReview;\n+import io.fabric8.openshift.api.model.LocalSubjectAccessReview;\n+import io.fabric8.openshift.api.model.SubjectAccessReviewResponse;\n+import okhttp3.OkHttpClient;\n+\n+import java.io.IOException;\n+import java.util.concurrent.ExecutionException;\n+\n+public class OpenShiftLocalSubjectAccessReviewOperationsImpl extends OperationSupport implements Createable<LocalSubjectAccessReview, SubjectAccessReviewResponse, DoneableLocalSubjectAccessReview>, Namespaceable<OpenShiftLocalSubjectAccessReviewOperationsImpl> {\n+  private String subjectAccessApiGroupName;\n+  private String subjectAccessApiGroupVersion;\n+  private String plural;\n+\n+  public OpenShiftLocalSubjectAccessReviewOperationsImpl(OkHttpClient client, Config config, String apiGroupName, String apiGroupVersion, String plural) {\n+    this(new OperationContext().withOkhttpClient(client).withConfig(config), apiGroupName, apiGroupVersion, plural);\n+    this.subjectAccessApiGroupName = apiGroupName;\n+    this.subjectAccessApiGroupVersion = apiGroupVersion;\n+    this.plural = plural;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09767fe700fa2cb177ed2a32dacb44fba38b44e8"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczMTUzMTU4", "url": "https://github.com/fabric8io/kubernetes-client/pull/2400#pullrequestreview-473153158", "createdAt": "2020-08-24T06:34:10Z", "commit": {"oid": "09767fe700fa2cb177ed2a32dacb44fba38b44e8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNjozNDoxMFrOHFWUsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNjozNDoxMFrOHFWUsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM3MDY3Mw==", "bodyText": "Sames as: https://github.com/fabric8io/kubernetes-client/pull/2400/files#r475370434", "url": "https://github.com/fabric8io/kubernetes-client/pull/2400#discussion_r475370673", "createdAt": "2020-08-24T06:34:10Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/dsl/internal/CreateOnlyResourceOperationsImpl.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/**\n+ * Copyright (C) 2015 Red Hat, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *         http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.fabric8.kubernetes.client.dsl.internal;\n+\n+import io.fabric8.kubernetes.client.Config;\n+import io.fabric8.kubernetes.client.KubernetesClientException;\n+import io.fabric8.kubernetes.client.dsl.base.OperationContext;\n+import io.fabric8.kubernetes.client.dsl.base.OperationSupport;\n+import okhttp3.OkHttpClient;\n+\n+import java.io.IOException;\n+import java.util.concurrent.ExecutionException;\n+\n+public class CreateOnlyResourceOperationsImpl<T, D> extends OperationSupport implements io.fabric8.kubernetes.client.dsl.Createable<T, T, D> {\n+  private Class<T> subjectAccessRequestClass;\n+\n+  public CreateOnlyResourceOperationsImpl(OkHttpClient client, Config config, String apiGroupName, String apiGroupVersion, String plural, Class<T> subjectAccessRequestClass) {\n+    this(new OperationContext().withOkhttpClient(client).withConfig(config), apiGroupName, apiGroupVersion, plural, subjectAccessRequestClass);\n+    this.subjectAccessRequestClass = subjectAccessRequestClass;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09767fe700fa2cb177ed2a32dacb44fba38b44e8"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77a0d518156bdceda37b7be837f1a7e5271677a4", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/77a0d518156bdceda37b7be837f1a7e5271677a4", "committedDate": "2020-08-24T07:34:43Z", "message": "Fix #2265: Refactor SubjectAccessReview API\n\n+ Added new entrypoint authorization() into DSL which only allows create() operations\n+ Removed old subjectAccessReviewAuth() API\n\nThis should also fix #2191"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "653f98fb43b19a25e3dd0dc64fcb37cd59f970d0", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/653f98fb43b19a25e3dd0dc64fcb37cd59f970d0", "committedDate": "2020-08-24T07:41:37Z", "message": "Fix #1978: Add support for creating TokenReview\n\nTokenReview also are create only resources like SubjectAccess* operations in\nwhich same object is returned in response with status object modified. It's\nsupport can be added easily with current support added for SubjectAccessReview."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "09767fe700fa2cb177ed2a32dacb44fba38b44e8", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/09767fe700fa2cb177ed2a32dacb44fba38b44e8", "committedDate": "2020-08-21T13:21:05Z", "message": "Fix #1978: Add support for creating TokenReview\n\nTokenReview also are create only resources like SubjectAccess* operations in\nwhich same object is returned in response with status object modified. It's\nsupport can be added easily with current support added for SubjectAccessReview."}, "afterCommit": {"oid": "653f98fb43b19a25e3dd0dc64fcb37cd59f970d0", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/653f98fb43b19a25e3dd0dc64fcb37cd59f970d0", "committedDate": "2020-08-24T07:41:37Z", "message": "Fix #1978: Add support for creating TokenReview\n\nTokenReview also are create only resources like SubjectAccess* operations in\nwhich same object is returned in response with status object modified. It's\nsupport can be added easily with current support added for SubjectAccessReview."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczMjEwOTI1", "url": "https://github.com/fabric8io/kubernetes-client/pull/2400#pullrequestreview-473210925", "createdAt": "2020-08-24T08:12:22Z", "commit": {"oid": "653f98fb43b19a25e3dd0dc64fcb37cd59f970d0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3601, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}