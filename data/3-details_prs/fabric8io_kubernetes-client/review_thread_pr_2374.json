{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3NjMxMDU1", "number": 2374, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMTowMDowNVrOESwpBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMTowMDowNVrOESwpBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTA2NzU4OnYy", "diffSide": "RIGHT", "path": "kubernetes-model-generator/kubernetes-model-core/src/main/java/io/fabric8/kubernetes/internal/KubernetesDeserializer.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMTowMDowNVrOG4HdIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMToxODoxN1rOG4IBgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ5NTU4Ng==", "bodyText": "Are we sure we want to return the first item found.\nThis means that PACKAGES must be sorted by order of preference (for packages providing same Types/Kinds). If so maybe we should document this somewhere.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2374#discussion_r461495586", "createdAt": "2020-07-28T11:00:05Z", "author": {"login": "manusa"}, "path": "kubernetes-model-generator/kubernetes-model-core/src/main/java/io/fabric8/kubernetes/internal/KubernetesDeserializer.java", "diffHunk": "@@ -248,16 +248,20 @@ private String getClassName(String key) {\n             // If only one class found, return it\n             if (possibleResults.size() == 1) {\n                 return possibleResults.get(0);\n-            }\n-\n-            // Compare with apiVersions being compared for set of classes found\n-            for (Class<? extends KubernetesResource> result : possibleResults) {\n+            } else if (possibleResults.size() > 1) {\n+              // Compare with apiVersions being compared for set of classes found\n+              for (Class<? extends KubernetesResource> result : possibleResults) {\n                 String defaultKeyFromClass = getKeyFromClass(result);\n                 if (key.equals(defaultKeyFromClass)) {\n-                    return result;\n+                  return result;\n                 }\n+              }\n+              // Not able to compare with apiVersions, perhaps it was not provided;\n+              // return first item found\n+              return possibleResults.get(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "492d18ed5beedd517fd6c358f64bbc92cf8c8cae"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUwMjY0MQ==", "bodyText": "I am also not sure whether returning first item found is good or not. But I thought if user wanted some specific apiVersion related resource. He should be providing apiVersion inside object", "url": "https://github.com/fabric8io/kubernetes-client/pull/2374#discussion_r461502641", "createdAt": "2020-07-28T11:13:54Z", "author": {"login": "rohanKanojia"}, "path": "kubernetes-model-generator/kubernetes-model-core/src/main/java/io/fabric8/kubernetes/internal/KubernetesDeserializer.java", "diffHunk": "@@ -248,16 +248,20 @@ private String getClassName(String key) {\n             // If only one class found, return it\n             if (possibleResults.size() == 1) {\n                 return possibleResults.get(0);\n-            }\n-\n-            // Compare with apiVersions being compared for set of classes found\n-            for (Class<? extends KubernetesResource> result : possibleResults) {\n+            } else if (possibleResults.size() > 1) {\n+              // Compare with apiVersions being compared for set of classes found\n+              for (Class<? extends KubernetesResource> result : possibleResults) {\n                 String defaultKeyFromClass = getKeyFromClass(result);\n                 if (key.equals(defaultKeyFromClass)) {\n-                    return result;\n+                  return result;\n                 }\n+              }\n+              // Not able to compare with apiVersions, perhaps it was not provided;\n+              // return first item found\n+              return possibleResults.get(0);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ5NTU4Ng=="}, "originalCommit": {"oid": "492d18ed5beedd517fd6c358f64bbc92cf8c8cae"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUwNDI4OA==", "bodyText": "What I mean is that probably the PACKAGE array definition should have an n.b comment e.g.:\n// n.b. Packages sorted in order of precedence, deserialization of resources with no specific version will default to first available Class in one of these packages:", "url": "https://github.com/fabric8io/kubernetes-client/pull/2374#discussion_r461504288", "createdAt": "2020-07-28T11:16:59Z", "author": {"login": "manusa"}, "path": "kubernetes-model-generator/kubernetes-model-core/src/main/java/io/fabric8/kubernetes/internal/KubernetesDeserializer.java", "diffHunk": "@@ -248,16 +248,20 @@ private String getClassName(String key) {\n             // If only one class found, return it\n             if (possibleResults.size() == 1) {\n                 return possibleResults.get(0);\n-            }\n-\n-            // Compare with apiVersions being compared for set of classes found\n-            for (Class<? extends KubernetesResource> result : possibleResults) {\n+            } else if (possibleResults.size() > 1) {\n+              // Compare with apiVersions being compared for set of classes found\n+              for (Class<? extends KubernetesResource> result : possibleResults) {\n                 String defaultKeyFromClass = getKeyFromClass(result);\n                 if (key.equals(defaultKeyFromClass)) {\n-                    return result;\n+                  return result;\n                 }\n+              }\n+              // Not able to compare with apiVersions, perhaps it was not provided;\n+              // return first item found\n+              return possibleResults.get(0);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ5NTU4Ng=="}, "originalCommit": {"oid": "492d18ed5beedd517fd6c358f64bbc92cf8c8cae"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUwNDg5OA==", "bodyText": "Also unit tests for conflicting classes would help enforce list of entries doesn't get messed up (and can probably avoid the comment)", "url": "https://github.com/fabric8io/kubernetes-client/pull/2374#discussion_r461504898", "createdAt": "2020-07-28T11:18:17Z", "author": {"login": "manusa"}, "path": "kubernetes-model-generator/kubernetes-model-core/src/main/java/io/fabric8/kubernetes/internal/KubernetesDeserializer.java", "diffHunk": "@@ -248,16 +248,20 @@ private String getClassName(String key) {\n             // If only one class found, return it\n             if (possibleResults.size() == 1) {\n                 return possibleResults.get(0);\n-            }\n-\n-            // Compare with apiVersions being compared for set of classes found\n-            for (Class<? extends KubernetesResource> result : possibleResults) {\n+            } else if (possibleResults.size() > 1) {\n+              // Compare with apiVersions being compared for set of classes found\n+              for (Class<? extends KubernetesResource> result : possibleResults) {\n                 String defaultKeyFromClass = getKeyFromClass(result);\n                 if (key.equals(defaultKeyFromClass)) {\n-                    return result;\n+                  return result;\n                 }\n+              }\n+              // Not able to compare with apiVersions, perhaps it was not provided;\n+              // return first item found\n+              return possibleResults.get(0);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ5NTU4Ng=="}, "originalCommit": {"oid": "492d18ed5beedd517fd6c358f64bbc92cf8c8cae"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3763, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}