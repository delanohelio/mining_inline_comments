{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MTQ1MDMz", "number": 2229, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNzo1NjozNlrOD-Ga-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwODowNzozMlrOD-Gqmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NDQzNTEzOnYy", "diffSide": "RIGHT", "path": "kubernetes-model/pkg/schemagen/generate.go", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNzo1NjozNlrOGX_k1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNTo1Nzo0M1rOGYnIdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzgxMjA1Mw==", "bodyText": "are you sure about the tab spacing here?", "url": "https://github.com/fabric8io/kubernetes-client/pull/2229#discussion_r427812053", "createdAt": "2020-05-20T07:56:36Z", "author": {"login": "dev-gaur"}, "path": "kubernetes-model/pkg/schemagen/generate.go", "diffHunk": "@@ -30,29 +30,36 @@ type PackageDescriptor struct {\n }\n \n type schemaGenerator struct {\n-\ttypes              map[reflect.Type]*JSONObjectDescriptor\n-\ttypeNames          map[reflect.Type]string\n-\tcustomTypeNames    map[string]string\n-\tpackages           map[string]PackageDescriptor\n-\ttypeMap            map[reflect.Type]reflect.Type\n+\ttypes           map[reflect.Type]*JSONObjectDescriptor\n+\ttypeNames       map[reflect.Type]string\n+\tcustomTypeNames map[string]string", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5cc2747313e9a935533b45676ed991f28e5b8b0c"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzgzNDkwOA==", "bodyText": "Umm, I'm not sure. I just used go fmt kubernetes-model/pkg/schemagen/generate.go for formatting. Do you think it can have some side effects?", "url": "https://github.com/fabric8io/kubernetes-client/pull/2229#discussion_r427834908", "createdAt": "2020-05-20T08:34:03Z", "author": {"login": "rohanKanojia"}, "path": "kubernetes-model/pkg/schemagen/generate.go", "diffHunk": "@@ -30,29 +30,36 @@ type PackageDescriptor struct {\n }\n \n type schemaGenerator struct {\n-\ttypes              map[reflect.Type]*JSONObjectDescriptor\n-\ttypeNames          map[reflect.Type]string\n-\tcustomTypeNames    map[string]string\n-\tpackages           map[string]PackageDescriptor\n-\ttypeMap            map[reflect.Type]reflect.Type\n+\ttypes           map[reflect.Type]*JSONObjectDescriptor\n+\ttypeNames       map[reflect.Type]string\n+\tcustomTypeNames map[string]string", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzgxMjA1Mw=="}, "originalCommit": {"oid": "5cc2747313e9a935533b45676ed991f28e5b8b0c"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ2MDE0OQ==", "bodyText": "oh. If go fmt says so then its alright :)", "url": "https://github.com/fabric8io/kubernetes-client/pull/2229#discussion_r428460149", "createdAt": "2020-05-21T05:57:43Z", "author": {"login": "dev-gaur"}, "path": "kubernetes-model/pkg/schemagen/generate.go", "diffHunk": "@@ -30,29 +30,36 @@ type PackageDescriptor struct {\n }\n \n type schemaGenerator struct {\n-\ttypes              map[reflect.Type]*JSONObjectDescriptor\n-\ttypeNames          map[reflect.Type]string\n-\tcustomTypeNames    map[string]string\n-\tpackages           map[string]PackageDescriptor\n-\ttypeMap            map[reflect.Type]reflect.Type\n+\ttypes           map[reflect.Type]*JSONObjectDescriptor\n+\ttypeNames       map[reflect.Type]string\n+\tcustomTypeNames map[string]string", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzgxMjA1Mw=="}, "originalCommit": {"oid": "5cc2747313e9a935533b45676ed991f28e5b8b0c"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NDQ2MDUzOnYy", "diffSide": "RIGHT", "path": "kubernetes-model/pkg/schemagen/generate.go", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwODowMzozNFrOGX_00Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwODowMzozNFrOGX_00Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzgxNjE0NQ==", "bodyText": "I see that you're trying to create an enumeration here. I suggest using iota\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tNamespaced CrdScope = 0\n          \n          \n            \n            \tCluster    CrdScope = 1\n          \n          \n            \n            \tNamespaced CrdScope = iota\n          \n          \n            \n            \tCluster    CrdScope = iota", "url": "https://github.com/fabric8io/kubernetes-client/pull/2229#discussion_r427816145", "createdAt": "2020-05-20T08:03:34Z", "author": {"login": "dev-gaur"}, "path": "kubernetes-model/pkg/schemagen/generate.go", "diffHunk": "@@ -30,29 +30,36 @@ type PackageDescriptor struct {\n }\n \n type schemaGenerator struct {\n-\ttypes              map[reflect.Type]*JSONObjectDescriptor\n-\ttypeNames          map[reflect.Type]string\n-\tcustomTypeNames    map[string]string\n-\tpackages           map[string]PackageDescriptor\n-\ttypeMap            map[reflect.Type]reflect.Type\n+\ttypes           map[reflect.Type]*JSONObjectDescriptor\n+\ttypeNames       map[reflect.Type]string\n+\tcustomTypeNames map[string]string\n+\tpackages        map[string]PackageDescriptor\n+\ttypeMap         map[reflect.Type]reflect.Type\n }\n \n-func GenerateSchema(t reflect.Type, packages []PackageDescriptor, typeMap map[reflect.Type]reflect.Type, customTypeNames  map[string]string, moduleName string) (*JSONSchema, error) {\n+type CrdScope int32\n+\n+const (\n+\tNamespaced CrdScope = 0\n+\tCluster    CrdScope = 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5cc2747313e9a935533b45676ed991f28e5b8b0c"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NDQ3NTE0OnYy", "diffSide": "RIGHT", "path": "kubernetes-model/pkg/schemagen/generate.go", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwODowNzozMlrOGX_-CA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxMTozMjoyN1rOGYHQcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzgxODUwNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tswitch t.Name() {\n          \n          \n            \n            \tcase \"MutatingWebhookConfiguration\",\n          \n          \n            \n            \t\t\"ValidatingWebhookConfiguration\",\n          \n          \n            \n            \t\t\"CustomResourceDefinition\",\n          \n          \n            \n            \t\t\"ComponentStatus\",\n          \n          \n            \n            \t\t\"Namespace\",\n          \n          \n            \n            \t\t\"Node\",\n          \n          \n            \n            \t\t\"PersistentVolume\",\n          \n          \n            \n            \t\t\"PodSecurityPolicy\",\n          \n          \n            \n            \t\t\"ClusterRoleBinding\",\n          \n          \n            \n            \t\t\"ClusterRole\",\n          \n          \n            \n            \t\t\"PriorityClass\",\n          \n          \n            \n            \t\t\"StorageClass\":\n          \n          \n            \n            \t\treturn Cluster\n          \n          \n            \n            \t}\n          \n          \n            \n            \treturn Namespaced\n          \n          \n            \n            \tswitch t.Name() {\n          \n          \n            \n            \tcase \"MutatingWebhookConfiguration\",\n          \n          \n            \n            \t\t\"ValidatingWebhookConfiguration\",\n          \n          \n            \n            \t\t\"CustomResourceDefinition\",\n          \n          \n            \n            \t\t\"ComponentStatus\",\n          \n          \n            \n            \t\t\"Namespace\",\n          \n          \n            \n            \t\t\"Node\",\n          \n          \n            \n            \t\t\"PersistentVolume\",\n          \n          \n            \n            \t\t\"PodSecurityPolicy\",\n          \n          \n            \n            \t\t\"ClusterRoleBinding\",\n          \n          \n            \n            \t\t\"ClusterRole\",\n          \n          \n            \n            \t\t\"PriorityClass\",\n          \n          \n            \n            \t\t\"StorageClass\":\n          \n          \n            \n                        return Cluster\n          \n          \n            \n            \tdefault:\n          \n          \n            \n            \t    return Namespaced    \n          \n          \n            \n            \t}", "url": "https://github.com/fabric8io/kubernetes-client/pull/2229#discussion_r427818504", "createdAt": "2020-05-20T08:07:32Z", "author": {"login": "dev-gaur"}, "path": "kubernetes-model/pkg/schemagen/generate.go", "diffHunk": "@@ -541,3 +553,22 @@ func (g *schemaGenerator) addConstraints(objectName string, propName string, pro\n func pkgPath(t reflect.Type) string {\n \treturn strings.TrimPrefix(t.PkgPath(), \"github.com/fabric8io/kubernetes-client/kubernetes-model/vendor/\")\n }\n+\n+func (g *schemaGenerator) crdScope(t reflect.Type) CrdScope {\n+\tswitch t.Name() {\n+\tcase \"MutatingWebhookConfiguration\",\n+\t\t\"ValidatingWebhookConfiguration\",\n+\t\t\"CustomResourceDefinition\",\n+\t\t\"ComponentStatus\",\n+\t\t\"Namespace\",\n+\t\t\"Node\",\n+\t\t\"PersistentVolume\",\n+\t\t\"PodSecurityPolicy\",\n+\t\t\"ClusterRoleBinding\",\n+\t\t\"ClusterRole\",\n+\t\t\"PriorityClass\",\n+\t\t\"StorageClass\":\n+\t\treturn Cluster\n+\t}\n+\treturn Namespaced", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5cc2747313e9a935533b45676ed991f28e5b8b0c"}, "originalPosition": 142}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzgzMDQ1Mg==", "bodyText": "What's the benefit of this change?", "url": "https://github.com/fabric8io/kubernetes-client/pull/2229#discussion_r427830452", "createdAt": "2020-05-20T08:27:09Z", "author": {"login": "rohanKanojia"}, "path": "kubernetes-model/pkg/schemagen/generate.go", "diffHunk": "@@ -541,3 +553,22 @@ func (g *schemaGenerator) addConstraints(objectName string, propName string, pro\n func pkgPath(t reflect.Type) string {\n \treturn strings.TrimPrefix(t.PkgPath(), \"github.com/fabric8io/kubernetes-client/kubernetes-model/vendor/\")\n }\n+\n+func (g *schemaGenerator) crdScope(t reflect.Type) CrdScope {\n+\tswitch t.Name() {\n+\tcase \"MutatingWebhookConfiguration\",\n+\t\t\"ValidatingWebhookConfiguration\",\n+\t\t\"CustomResourceDefinition\",\n+\t\t\"ComponentStatus\",\n+\t\t\"Namespace\",\n+\t\t\"Node\",\n+\t\t\"PersistentVolume\",\n+\t\t\"PodSecurityPolicy\",\n+\t\t\"ClusterRoleBinding\",\n+\t\t\"ClusterRole\",\n+\t\t\"PriorityClass\",\n+\t\t\"StorageClass\":\n+\t\treturn Cluster\n+\t}\n+\treturn Namespaced", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzgxODUwNA=="}, "originalCommit": {"oid": "5cc2747313e9a935533b45676ed991f28e5b8b0c"}, "originalPosition": 142}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzkzNzkwNw==", "bodyText": "I think you're right. Switch case without default is generally considered code smell. let me modify this too in the next update.", "url": "https://github.com/fabric8io/kubernetes-client/pull/2229#discussion_r427937907", "createdAt": "2020-05-20T11:32:27Z", "author": {"login": "rohanKanojia"}, "path": "kubernetes-model/pkg/schemagen/generate.go", "diffHunk": "@@ -541,3 +553,22 @@ func (g *schemaGenerator) addConstraints(objectName string, propName string, pro\n func pkgPath(t reflect.Type) string {\n \treturn strings.TrimPrefix(t.PkgPath(), \"github.com/fabric8io/kubernetes-client/kubernetes-model/vendor/\")\n }\n+\n+func (g *schemaGenerator) crdScope(t reflect.Type) CrdScope {\n+\tswitch t.Name() {\n+\tcase \"MutatingWebhookConfiguration\",\n+\t\t\"ValidatingWebhookConfiguration\",\n+\t\t\"CustomResourceDefinition\",\n+\t\t\"ComponentStatus\",\n+\t\t\"Namespace\",\n+\t\t\"Node\",\n+\t\t\"PersistentVolume\",\n+\t\t\"PodSecurityPolicy\",\n+\t\t\"ClusterRoleBinding\",\n+\t\t\"ClusterRole\",\n+\t\t\"PriorityClass\",\n+\t\t\"StorageClass\":\n+\t\treturn Cluster\n+\t}\n+\treturn Namespaced", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzgxODUwNA=="}, "originalCommit": {"oid": "5cc2747313e9a935533b45676ed991f28e5b8b0c"}, "originalPosition": 142}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3727, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}