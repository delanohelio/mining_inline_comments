{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2MjE2MzM0", "number": 2099, "title": "Fix #1586: Replace of Job should add extra selector property to the resource", "bodyText": "Fix #1586", "createdAt": "2020-03-31T10:02:47Z", "url": "https://github.com/fabric8io/kubernetes-client/pull/2099", "merged": true, "mergeCommit": {"oid": "a8f66ef5c2952ae2c8f0fb294431a4e3cf481751"}, "closed": true, "closedAt": "2020-03-31T12:59:38Z", "author": {"login": "rohanKanojia"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTAJqkAH2gAyMzk2MjE2MzM0OmNiZmE1MmEwZDJlMWE1OGI1YzdmZjY1M2ZjNTA1MmIxODA0M2Q2ZmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTCbJHAFqTM4NDY5MDUzOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cbfa52a0d2e1a58b5c7ff653fc5052b18043d6fb", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/cbfa52a0d2e1a58b5c7ff653fc5052b18043d6fb", "committedDate": "2020-03-31T10:01:12Z", "message": "Fix #1586: Replace of Job should add extra selector property to the resource"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NTgzMzY5", "url": "https://github.com/fabric8io/kubernetes-client/pull/2099#pullrequestreview-384583369", "createdAt": "2020-03-31T10:03:41Z", "commit": {"oid": "cbfa52a0d2e1a58b5c7ff653fc5052b18043d6fb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NjE2Nzg1", "url": "https://github.com/fabric8io/kubernetes-client/pull/2099#pullrequestreview-384616785", "createdAt": "2020-03-31T10:52:24Z", "commit": {"oid": "cbfa52a0d2e1a58b5c7ff653fc5052b18043d6fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxMDo1MjoyNFrOF-QDeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxMDo1MjoyNFrOF-QDeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDgxOTA2NQ==", "bodyText": "Is it possible that the replacing job (new) will contain additional labels?\nIf so, shouldn't we purAll labels from server and keep the current.\nWhat if replacing job is removing some labels, is this the expected behavior?", "url": "https://github.com/fabric8io/kubernetes-client/pull/2099#discussion_r400819065", "createdAt": "2020-03-31T10:52:24Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/dsl/internal/JobOperationsImpl.java", "diffHunk": "@@ -223,4 +223,24 @@ public LogWatch watchLog(OutputStream out) {\n     }\n     return null;\n   }\n+\n+  @Override\n+  public Job replace(Job job) {\n+    if (job == null) {\n+      job = getItem();\n+    }\n+    // Fetch item from server and patch Selector and PodTemplate\n+    // metadata in case not present already in order to avoid 422\n+    Job jobFromServer = fromServer().get();\n+    if (job.getSpec().getSelector() == null) {\n+      job.getSpec().setSelector(jobFromServer.getSpec().getSelector());\n+    }\n+    if (job.getSpec().getTemplate().getMetadata() != null) {\n+      job.getSpec().getTemplate().getMetadata().setLabels(jobFromServer.getSpec().getTemplate().getMetadata().getLabels());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbfa52a0d2e1a58b5c7ff653fc5052b18043d6fb"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NjkwNTM4", "url": "https://github.com/fabric8io/kubernetes-client/pull/2099#pullrequestreview-384690538", "createdAt": "2020-03-31T12:40:06Z", "commit": {"oid": "cbfa52a0d2e1a58b5c7ff653fc5052b18043d6fb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3744, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}