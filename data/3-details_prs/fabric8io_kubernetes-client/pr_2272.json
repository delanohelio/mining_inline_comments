{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxMjQ1NzAx", "number": 2272, "title": "Fix #1868: Add Support for rolling update", "bodyText": "Fix #1868 #2247", "createdAt": "2020-06-08T16:06:56Z", "url": "https://github.com/fabric8io/kubernetes-client/pull/2272", "merged": true, "mergeCommit": {"oid": "2d1a9d47d42e6aa37ba3cb0e70ede9429c93e392"}, "closed": true, "closedAt": "2020-06-15T16:03:18Z", "author": {"login": "rohanKanojia"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpTJYMgBqjM0MjA5ODk4MjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrgK69gBqjM0NDQyNTIwNTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "609e997487e9f1f3042d6f4927ad02d485b6f98d", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/609e997487e9f1f3042d6f4927ad02d485b6f98d", "committedDate": "2020-06-08T15:39:00Z", "message": "Fix #1868: Add Support for rolling update"}, "afterCommit": {"oid": "45ae281ce743a0409acb3d0dbddb73a971dd082b", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/45ae281ce743a0409acb3d0dbddb73a971dd082b", "committedDate": "2020-06-08T16:34:56Z", "message": "Fix #1868: Add Support for rolling update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NDM0MTIy", "url": "https://github.com/fabric8io/kubernetes-client/pull/2272#pullrequestreview-426434122", "createdAt": "2020-06-08T16:57:56Z", "commit": {"oid": "45ae281ce743a0409acb3d0dbddb73a971dd082b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "45ae281ce743a0409acb3d0dbddb73a971dd082b", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/45ae281ce743a0409acb3d0dbddb73a971dd082b", "committedDate": "2020-06-08T16:34:56Z", "message": "Fix #1868: Add Support for rolling update"}, "afterCommit": {"oid": "ab6ab044c53cd135f9c22a2a1584664d4a173ab9", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/ab6ab044c53cd135f9c22a2a1584664d4a173ab9", "committedDate": "2020-06-09T09:52:18Z", "message": "Fix #1868: Add Support for rolling update"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab6ab044c53cd135f9c22a2a1584664d4a173ab9", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/ab6ab044c53cd135f9c22a2a1584664d4a173ab9", "committedDate": "2020-06-09T09:52:18Z", "message": "Fix #1868: Add Support for rolling update"}, "afterCommit": {"oid": "c869fe3043ac26b1a40387704fe40e75c4e5f968", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/c869fe3043ac26b1a40387704fe40e75c4e5f968", "committedDate": "2020-06-11T10:02:29Z", "message": "Fix #1868: Add Support for rolling update"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c869fe3043ac26b1a40387704fe40e75c4e5f968", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/c869fe3043ac26b1a40387704fe40e75c4e5f968", "committedDate": "2020-06-11T10:02:29Z", "message": "Fix #1868: Add Support for rolling update"}, "afterCommit": {"oid": "01e10c414cfac5c533587c976d0482e47f49a1b5", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/01e10c414cfac5c533587c976d0482e47f49a1b5", "committedDate": "2020-06-11T11:22:05Z", "message": "Fix #1868: Add Support for rolling update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMzc0NDAx", "url": "https://github.com/fabric8io/kubernetes-client/pull/2272#pullrequestreview-430374401", "createdAt": "2020-06-15T07:11:47Z", "commit": {"oid": "01e10c414cfac5c533587c976d0482e47f49a1b5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNzoxMTo0OFrOGjlufA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNzoxMTo0OFrOGjlufA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk3MTQ1Mg==", "bodyText": "nit: when retrieving the first item of a collection, in general it's better to do\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Container container = oldRC.getSpec().getTemplate().getSpec().getContainers().get(0);\n          \n          \n            \n                Container container = oldRC.getSpec().getTemplate().getSpec().getContainers().iterator().next();\n          \n      \n    \n    \n  \n\nThis won't be affected by performance issues for specific collection implementations (imagine containers was some sort of LinkedList where access by index was heavily penalized)", "url": "https://github.com/fabric8io/kubernetes-client/pull/2272#discussion_r439971452", "createdAt": "2020-06-15T07:11:48Z", "author": {"login": "manusa"}, "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/dsl/internal/apps/v1/ReplicaSetOperationsImpl.java", "diffHunk": "@@ -78,23 +77,57 @@ public ReplicaSet updateImage(String image) {\n     ReplicaSet oldRC = get();\n \n     if (oldRC == null) {\n-      throw new KubernetesClientException(\"Existing replica set doesn't exist\");\n+      throw new KubernetesClientException(\"Existing replication controller doesn't exist\");\n     }\n     if (oldRC.getSpec().getTemplate().getSpec().getContainers().size() > 1) {\n       throw new KubernetesClientException(\"Image update is not supported for multicontainer pods\");\n     }\n-    if (oldRC.getSpec().getTemplate().getSpec().getContainers().size() == 0) {\n+    if (oldRC.getSpec().getTemplate().getSpec().getContainers().isEmpty()) {\n       throw new KubernetesClientException(\"Pod has no containers!\");\n     }\n \n-    Container updatedContainer = new ContainerBuilder(oldRC.getSpec().getTemplate().getSpec().getContainers().iterator().next()).withImage(image).build();\n+    Container container = oldRC.getSpec().getTemplate().getSpec().getContainers().get(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01e10c414cfac5c533587c976d0482e47f49a1b5"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMzc1NTQ0", "url": "https://github.com/fabric8io/kubernetes-client/pull/2272#pullrequestreview-430375544", "createdAt": "2020-06-15T07:13:47Z", "commit": {"oid": "01e10c414cfac5c533587c976d0482e47f49a1b5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3ea32b6a109fcd434f669e9f0e02bf811e245df", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/b3ea32b6a109fcd434f669e9f0e02bf811e245df", "committedDate": "2020-06-15T12:53:23Z", "message": "Fix #1868: Add Support for rolling update"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01e10c414cfac5c533587c976d0482e47f49a1b5", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/01e10c414cfac5c533587c976d0482e47f49a1b5", "committedDate": "2020-06-11T11:22:05Z", "message": "Fix #1868: Add Support for rolling update"}, "afterCommit": {"oid": "b3ea32b6a109fcd434f669e9f0e02bf811e245df", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/fabric8io/kubernetes-client/commit/b3ea32b6a109fcd434f669e9f0e02bf811e245df", "committedDate": "2020-06-15T12:53:23Z", "message": "Fix #1868: Add Support for rolling update"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3693, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}