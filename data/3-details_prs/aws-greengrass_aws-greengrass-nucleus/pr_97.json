{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0MTA0MDUx", "number": 97, "title": "Organize integration tests", "bodyText": "Issue #, if available:\nDescription of changes:\nMove out integration tests to their own package, configure test steps to run unit tests and then integ tests. Integ tests and their resources are now separated out to a directory called integrationtests which is registered as an additional test source.\nWhy is this change necessary:\nCurrently unit and integ tests are all written together with no clear mechanism to distinguish or enforce writing both of them for any new code, we need to separate them so that the code is more structured. The aim is to be able to run integ tests separately and help developers write both types of tests with clear motivation when new code is written.\nHow was this change tested:\nmvn verify ran the two kinds of tests in two phases locally\nAny additional information or context required to review the change:\nCallout - as of now the tests do run separately but I have not figured out a way to generate separate reports for them, the code coverage report aggregates coverage from these two types of tests, we may want to track coverage from unit tests separately so that a stricter coverage constraint can be implemented, but I would like to hear the reviewers' opinion on how we want to perform reporting.\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.\nOut of scope - refactor / rewrite any existing tests, add new tests", "createdAt": "2020-03-05T07:07:49Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/97", "merged": true, "mergeCommit": {"oid": "011aa2493d3c153dc37e808fd95f9ef33f8db3b5"}, "closed": true, "closedAt": "2020-03-06T19:09:42Z", "author": {"login": "shaguptashaikh"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKmK5OgFqTM2OTMzNzA3Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcLE2zqABqjMxMDY0OTQxMDI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MzM3MDcz", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/97#pullrequestreview-369337073", "createdAt": "2020-03-05T07:12:12Z", "commit": {"oid": "9bff4163c454073ddf60b50cdbb7c7608e1b404b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwNzoxMjoxMlrOFyIf9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwNzoxMjoxMlrOFyIf9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExMjM3Mw==", "bodyText": "Since you're now running tests based on the path and not the tag, not sure we should bother including the tag. Or else, undo your change so it runs based on the tag as before.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/97#discussion_r388112373", "createdAt": "2020-03-05T07:12:12Z", "author": {"login": "MikeDombo"}, "path": "src/test/integration/java/com/aws/iot/evergreen/integ/ipc/IPCAwareServicesTest.java", "diffHunk": "@@ -1,17 +1,22 @@\n-package com.aws.iot.evergreen.ipc;\n+/* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ * SPDX-License-Identifier: Apache-2.0 */\n+\n+package com.aws.iot.evergreen.integ.ipc;\n \n import com.aws.iot.evergreen.dependency.State;\n import com.aws.iot.evergreen.kernel.EvergreenService;\n import com.aws.iot.evergreen.kernel.Kernel;\n import org.junit.jupiter.api.AfterEach;\n import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Tag;\n import org.junit.jupiter.api.Test;\n \n import java.util.concurrent.CountDownLatch;\n import java.util.concurrent.TimeUnit;\n \n import static org.junit.jupiter.api.Assertions.assertTrue;\n \n+@Tag(\"Integration\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9bff4163c454073ddf60b50cdbb7c7608e1b404b"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9bff4163c454073ddf60b50cdbb7c7608e1b404b", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/9bff4163c454073ddf60b50cdbb7c7608e1b404b", "committedDate": "2020-03-05T06:59:31Z", "message": "Organize integration tests"}, "afterCommit": {"oid": "667ac3f353dc5104220eb4484e9237b562f6a798", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/667ac3f353dc5104220eb4484e9237b562f6a798", "committedDate": "2020-03-05T18:32:04Z", "message": "Organize integration tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "667ac3f353dc5104220eb4484e9237b562f6a798", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/667ac3f353dc5104220eb4484e9237b562f6a798", "committedDate": "2020-03-05T18:32:04Z", "message": "Organize integration tests"}, "afterCommit": {"oid": "146ec928e37256bc23a07dfbe0f3eb834e54c085", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/146ec928e37256bc23a07dfbe0f3eb834e54c085", "committedDate": "2020-03-05T18:44:38Z", "message": "Organize integration tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "146ec928e37256bc23a07dfbe0f3eb834e54c085", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/146ec928e37256bc23a07dfbe0f3eb834e54c085", "committedDate": "2020-03-05T18:44:38Z", "message": "Organize integration tests"}, "afterCommit": {"oid": "4970742c8ed913ddf9460286907e851cc09670ae", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/4970742c8ed913ddf9460286907e851cc09670ae", "committedDate": "2020-03-06T01:23:43Z", "message": "Organize integration tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4970742c8ed913ddf9460286907e851cc09670ae", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/4970742c8ed913ddf9460286907e851cc09670ae", "committedDate": "2020-03-06T01:23:43Z", "message": "Organize integration tests"}, "afterCommit": {"oid": "ba7bf7a847bda85d0bbcce8777d7fbe34ed0ba4b", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ba7bf7a847bda85d0bbcce8777d7fbe34ed0ba4b", "committedDate": "2020-03-06T01:29:03Z", "message": "Organize integration tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDM3MjQ4", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/97#pullrequestreview-370037248", "createdAt": "2020-03-06T01:53:04Z", "commit": {"oid": "ba7bf7a847bda85d0bbcce8777d7fbe34ed0ba4b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMTo1MzowNFrOFyqy2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMTo1MzowNFrOFyqy2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY3NDI2Nw==", "bodyText": "Why wasn't surefire able to run the tests without adding the extra plugin? If you just created a different subpackage under the test directory I thought that would work.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/97#discussion_r388674267", "createdAt": "2020-03-06T01:53:04Z", "author": {"login": "MikeDombo"}, "path": "pom.xml", "diffHunk": "@@ -183,8 +218,9 @@\n                         </goals>\n                         <configuration>\n                             <skipTests>false</skipTests>\n-                            <excludedGroups>*</excludedGroups>\n-                            <groups>Integration</groups>\n+                            <includes>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba7bf7a847bda85d0bbcce8777d7fbe34ed0ba4b"}, "originalPosition": 57}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDQwNjQ5", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/97#pullrequestreview-370040649", "createdAt": "2020-03-06T02:04:48Z", "commit": {"oid": "ba7bf7a847bda85d0bbcce8777d7fbe34ed0ba4b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMjowNDo0OFrOFyq-MA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMjowNDo0OFrOFyq-MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY3NzE2OA==", "bodyText": "nit: why do we use src/integrationtests/java/com/aws/iot/evergreen/integrationtests/* instead of src/integrationtests/java/com/aws/iot/evergreen/*", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/97#discussion_r388677168", "createdAt": "2020-03-06T02:04:48Z", "author": {"login": "hui-yang"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/ipc/IPCAwareServicesTest.java", "diffHunk": "@@ -1,17 +1,23 @@\n-package com.aws.iot.evergreen.ipc;\n+/* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ * SPDX-License-Identifier: Apache-2.0 */\n+\n+package com.aws.iot.evergreen.integrationtests.ipc;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba7bf7a847bda85d0bbcce8777d7fbe34ed0ba4b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNTA0NDQ0", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/97#pullrequestreview-370504444", "createdAt": "2020-03-06T17:37:27Z", "commit": {"oid": "ba7bf7a847bda85d0bbcce8777d7fbe34ed0ba4b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcb91a3d57f4585e0216ab81ee09bbf211071abc", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/fcb91a3d57f4585e0216ab81ee09bbf211071abc", "committedDate": "2020-03-06T18:39:48Z", "message": "Organize integration tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ba7bf7a847bda85d0bbcce8777d7fbe34ed0ba4b", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ba7bf7a847bda85d0bbcce8777d7fbe34ed0ba4b", "committedDate": "2020-03-06T01:29:03Z", "message": "Organize integration tests"}, "afterCommit": {"oid": "fcb91a3d57f4585e0216ab81ee09bbf211071abc", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/fcb91a3d57f4585e0216ab81ee09bbf211071abc", "committedDate": "2020-03-06T18:39:48Z", "message": "Organize integration tests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2304, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}