{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMzAxODAx", "number": 424, "title": "Set AWS_REGION and AWS_DEFAULT_REGION envvars", "bodyText": "Issue #, if available:\nDescription of changes:\nSetting AWS_REGION and AWS_DEFAULT_REGION environment variables. Adds an uncaught exception handler so that we always log any exception, even if a thread dies without handling it. Also fixes the expected output for pkill which should be 1 if it worked.\nWhy is this change necessary:\nHow was this change tested:\nAny additional information or context required to review the change:\nChecklist:\n\n Updated the README if applicable\n Updated or added new unit tests\n Updated or added new integration tests\n Updated or added new end-to-end tests\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-09-10T02:48:15Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424", "merged": true, "mergeCommit": {"oid": "9c3f6a07baca02b494ef665c5189ac249894e9c5"}, "closed": true, "closedAt": "2020-09-11T20:04:04Z", "author": {"login": "MikeDombo"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHXpTRAH2gAyNDgzMzAxODAxOjBkM2UwY2YwZTgzZDMwYjQ3YWE1MmZhMTBjZGFlMzZhZWFiMWFhNDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdH62G9AFqTQ4NzA4MDk5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0d3e0cf0e83d30b47aa52fa10cdae36aeab1aa43", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0d3e0cf0e83d30b47aa52fa10cdae36aeab1aa43", "committedDate": "2020-09-10T02:47:38Z", "message": "Set AWS_REGION and AWS_DEFAULT_REGION envvars"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/bd99a42a3b803b5f75add4aefaf78762ddc7466a", "committedDate": "2020-09-10T03:41:48Z", "message": "Create Thread uncaught exception handler"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a94c6369a2502bde7b0ab95e14217fbb312b82a", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/2a94c6369a2502bde7b0ab95e14217fbb312b82a", "committedDate": "2020-09-10T03:37:56Z", "message": "Create Thread uncaught exception handler"}, "afterCommit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/bd99a42a3b803b5f75add4aefaf78762ddc7466a", "committedDate": "2020-09-10T03:41:48Z", "message": "Create Thread uncaught exception handler"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NTk3MzY2", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#pullrequestreview-485597366", "createdAt": "2020-09-10T05:43:01Z", "commit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNTo0MzowMVrOHPj3oA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNTo0MzowMVrOHPj3oA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA==", "bodyText": "You want to log a warning when proc exits successfully, when status is 0?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486078368", "createdAt": "2020-09-10T05:43:01Z", "author": {"login": "prateek-y"}, "path": "src/main/java/com/aws/iot/evergreen/util/platforms/UnixPlatform.java", "diffHunk": "@@ -40,13 +40,13 @@ public void killProcessAndChildren(Process process, boolean force) throws IOExce\n         String[] cmd = {\"pkill\", \"-\" + (force ? SIGKILL : SIGINT), \"-P\", Integer.toString(pp.getPid())};\n         Process proc = Runtime.getRuntime().exec(cmd);\n         proc.waitFor();\n-        if (proc.exitValue() != 0) {\n+        if (proc.exitValue() != 1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MTAxODYy", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#pullrequestreview-486101862", "createdAt": "2020-09-10T16:17:15Z", "commit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MTI3ODU5", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#pullrequestreview-486127859", "createdAt": "2020-09-10T16:50:15Z", "commit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjo1MDoxNVrOHP9B3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjo1MjoxMFrOHP9GPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ5MDU5MA==", "bodyText": "Worst naming ever...", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486490590", "createdAt": "2020-09-10T16:50:15Z", "author": {"login": "leaf94"}, "path": "pom.xml", "diffHunk": "@@ -594,6 +595,8 @@\n         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n         <maven.compiler.source>1.8</maven.compiler.source>\n         <maven.compiler.target>1.8</maven.compiler.target>\n+        <!-- Oddly, setting this to false actually makes it compile incrementally, making dev builds faster -->\n+        <maven.compiler.useIncrementalCompilation>false</maven.compiler.useIncrementalCompilation>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ5MTcwOA==", "bodyText": "Nice!", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486491708", "createdAt": "2020-09-10T16:52:10Z", "author": {"login": "leaf94"}, "path": "src/main/java/com/aws/iot/evergreen/kernel/KernelExceptionHandler.java", "diffHunk": "@@ -0,0 +1,18 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package com.aws.iot.evergreen.kernel;\n+\n+import com.aws.iot.evergreen.logging.api.Logger;\n+import com.aws.iot.evergreen.logging.impl.LogManager;\n+\n+public class KernelExceptionHandler implements Thread.UncaughtExceptionHandler {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5d61dbb2e74b0f122c30cdab00c2012a9d63a92", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/a5d61dbb2e74b0f122c30cdab00c2012a9d63a92", "committedDate": "2020-09-10T17:43:30Z", "message": "Merge branch 'master' into region"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "437acbee5915fd9a2f034ec1225a2d37e89799c4", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/437acbee5915fd9a2f034ec1225a2d37e89799c4", "committedDate": "2020-09-11T00:04:13Z", "message": "Merge branch 'master' into region"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "342b3846109d08950081477660d80416ebaa4f23", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/342b3846109d08950081477660d80416ebaa4f23", "committedDate": "2020-09-11T05:12:08Z", "message": "Merge branch 'master' into region"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "481f89034dee844cf2af679cb45a2982e3f028eb", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/481f89034dee844cf2af679cb45a2982e3f028eb", "committedDate": "2020-09-11T17:21:02Z", "message": "Merge branch 'master' into region"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e37095e0a5c8a3da105321a24d440c1f62330ff", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/1e37095e0a5c8a3da105321a24d440c1f62330ff", "committedDate": "2020-09-11T17:45:46Z", "message": "Merge branch 'master' into region"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MDM1OTU2", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#pullrequestreview-487035956", "createdAt": "2020-09-11T18:36:34Z", "commit": {"oid": "1e37095e0a5c8a3da105321a24d440c1f62330ff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MDgwOTkz", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#pullrequestreview-487080993", "createdAt": "2020-09-11T19:48:18Z", "commit": {"oid": "1e37095e0a5c8a3da105321a24d440c1f62330ff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3277, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}