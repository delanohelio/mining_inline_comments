{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMjU1MTE3", "number": 247, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNzoyMTozNVrOD95XqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoyMjozNVrOD_BVOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MjI5NjcyOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/iot/evergreen/tes/CredentialRequestHandler.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNzoyMTozNVrOGXquOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoyMjo1OVrOGZegqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3MDM5NQ==", "bodyText": "read tree as case insensitive maybe? Should make it a bit easier.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/247#discussion_r427470395", "createdAt": "2020-05-19T17:21:35Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/iot/evergreen/tes/CredentialRequestHandler.java", "diffHunk": "@@ -43,15 +65,33 @@ public void handle(final HttpExchange exchange) throws IOException {\n      * @return AWS credentials from cloud.\n      */\n     public byte[] getCredentials() {\n-        String credentials = \"--alive--\";\n+        byte[] response = {};\n+        LOGGER.debug(\"Got request for credentials\");\n         // TODO: Add cache\n         try {\n-            credentials = iotCloudHelper.sendHttpRequest(iotConnectionManager,\n-                    IOT_CREDENTIALS_PATH,\n+            final String credentials = iotCloudHelper.sendHttpRequest(iotConnectionManager,\n+                    iotCredentialsPath,\n                     IOT_CREDENTIALS_HTTP_VERB);\n+            response = translateToAwsSdkFormat(credentials);\n         } catch (AWSIotException e) {\n             // TODO: Generate 4xx, 5xx responses for all error scnearios\n+            LOGGER.error(\"Encountered error while fetching credentials\", e);\n+        }\n+        return response;\n+    }\n+\n+    private byte[] translateToAwsSdkFormat(final String credentials) throws AWSIotException {\n+        try {\n+            JsonNode jsonNode = OBJECT_MAPPER.readTree(credentials).get(CREDENTIALS_UPSTREAM_STR);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43ec352d18480a23fe2b47e11b2c5517df438e17"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3Mjk1NQ==", "bodyText": "I see. let me check.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/247#discussion_r427472955", "createdAt": "2020-05-19T17:25:34Z", "author": {"login": "prateek-y"}, "path": "src/main/java/com/aws/iot/evergreen/tes/CredentialRequestHandler.java", "diffHunk": "@@ -43,15 +65,33 @@ public void handle(final HttpExchange exchange) throws IOException {\n      * @return AWS credentials from cloud.\n      */\n     public byte[] getCredentials() {\n-        String credentials = \"--alive--\";\n+        byte[] response = {};\n+        LOGGER.debug(\"Got request for credentials\");\n         // TODO: Add cache\n         try {\n-            credentials = iotCloudHelper.sendHttpRequest(iotConnectionManager,\n-                    IOT_CREDENTIALS_PATH,\n+            final String credentials = iotCloudHelper.sendHttpRequest(iotConnectionManager,\n+                    iotCredentialsPath,\n                     IOT_CREDENTIALS_HTTP_VERB);\n+            response = translateToAwsSdkFormat(credentials);\n         } catch (AWSIotException e) {\n             // TODO: Generate 4xx, 5xx responses for all error scnearios\n+            LOGGER.error(\"Encountered error while fetching credentials\", e);\n+        }\n+        return response;\n+    }\n+\n+    private byte[] translateToAwsSdkFormat(final String credentials) throws AWSIotException {\n+        try {\n+            JsonNode jsonNode = OBJECT_MAPPER.readTree(credentials).get(CREDENTIALS_UPSTREAM_STR);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3MDM5NQ=="}, "originalCommit": {"oid": "43ec352d18480a23fe2b47e11b2c5517df438e17"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2NzQ2NA==", "bodyText": "Not able to make it work with readTree, have added it TODO, will try to see if a pojo can help. For now lets merge this to unblock demos. I will add integration test as the next immediate thing as priority.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/247#discussion_r429367464", "createdAt": "2020-05-22T17:22:59Z", "author": {"login": "prateek-y"}, "path": "src/main/java/com/aws/iot/evergreen/tes/CredentialRequestHandler.java", "diffHunk": "@@ -43,15 +65,33 @@ public void handle(final HttpExchange exchange) throws IOException {\n      * @return AWS credentials from cloud.\n      */\n     public byte[] getCredentials() {\n-        String credentials = \"--alive--\";\n+        byte[] response = {};\n+        LOGGER.debug(\"Got request for credentials\");\n         // TODO: Add cache\n         try {\n-            credentials = iotCloudHelper.sendHttpRequest(iotConnectionManager,\n-                    IOT_CREDENTIALS_PATH,\n+            final String credentials = iotCloudHelper.sendHttpRequest(iotConnectionManager,\n+                    iotCredentialsPath,\n                     IOT_CREDENTIALS_HTTP_VERB);\n+            response = translateToAwsSdkFormat(credentials);\n         } catch (AWSIotException e) {\n             // TODO: Generate 4xx, 5xx responses for all error scnearios\n+            LOGGER.error(\"Encountered error while fetching credentials\", e);\n+        }\n+        return response;\n+    }\n+\n+    private byte[] translateToAwsSdkFormat(final String credentials) throws AWSIotException {\n+        try {\n+            JsonNode jsonNode = OBJECT_MAPPER.readTree(credentials).get(CREDENTIALS_UPSTREAM_STR);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3MDM5NQ=="}, "originalCommit": {"oid": "43ec352d18480a23fe2b47e11b2c5517df438e17"}, "originalPosition": 79}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MjMwMTA5OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/iot/evergreen/tes/IotCloudHelper.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNzoyMjozOFrOGXqxDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNzozNTo1N1rOGXrTXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3MTExOA==", "bodyText": "WTF. 30 minutes!? Shouldn't this be more like 5 seconds?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/247#discussion_r427471118", "createdAt": "2020-05-19T17:22:38Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/iot/evergreen/tes/IotCloudHelper.java", "diffHunk": "@@ -33,7 +33,7 @@\n     private static final String HTTP_HEADER_ERROR_TYPE = \"x-amzn-ErrorType\";\n     // TODO: revisit all timeout values\n     // Max wait time for device to receive HTTP response from IOT CLOUD\n-    private static final long TIMEOUT_FOR_RESPONSE_FROM_IOT_CLOUD_SECONDS = (long) Duration.ofMinutes(5).getSeconds();\n+    private static final long TIMEOUT_FOR_RESPONSE_FROM_IOT_CLOUD_SECONDS = (long) Duration.ofMinutes(30).getSeconds();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43ec352d18480a23fe2b47e11b2c5517df438e17"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3Mjg1Mw==", "bodyText": "Hehe. :) will change.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/247#discussion_r427472853", "createdAt": "2020-05-19T17:25:25Z", "author": {"login": "prateek-y"}, "path": "src/main/java/com/aws/iot/evergreen/tes/IotCloudHelper.java", "diffHunk": "@@ -33,7 +33,7 @@\n     private static final String HTTP_HEADER_ERROR_TYPE = \"x-amzn-ErrorType\";\n     // TODO: revisit all timeout values\n     // Max wait time for device to receive HTTP response from IOT CLOUD\n-    private static final long TIMEOUT_FOR_RESPONSE_FROM_IOT_CLOUD_SECONDS = (long) Duration.ofMinutes(5).getSeconds();\n+    private static final long TIMEOUT_FOR_RESPONSE_FROM_IOT_CLOUD_SECONDS = (long) Duration.ofMinutes(30).getSeconds();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3MTExOA=="}, "originalCommit": {"oid": "43ec352d18480a23fe2b47e11b2c5517df438e17"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3NDAwMA==", "bodyText": "5 seconds might be a little tight for a small steam-powered processor at the end of a flaky phone line.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/247#discussion_r427474000", "createdAt": "2020-05-19T17:27:08Z", "author": {"login": "JamesGosling"}, "path": "src/main/java/com/aws/iot/evergreen/tes/IotCloudHelper.java", "diffHunk": "@@ -33,7 +33,7 @@\n     private static final String HTTP_HEADER_ERROR_TYPE = \"x-amzn-ErrorType\";\n     // TODO: revisit all timeout values\n     // Max wait time for device to receive HTTP response from IOT CLOUD\n-    private static final long TIMEOUT_FOR_RESPONSE_FROM_IOT_CLOUD_SECONDS = (long) Duration.ofMinutes(5).getSeconds();\n+    private static final long TIMEOUT_FOR_RESPONSE_FROM_IOT_CLOUD_SECONDS = (long) Duration.ofMinutes(30).getSeconds();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3MTExOA=="}, "originalCommit": {"oid": "43ec352d18480a23fe2b47e11b2c5517df438e17"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3Njg1Nw==", "bodyText": "Maybe 30 seconds then?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/247#discussion_r427476857", "createdAt": "2020-05-19T17:31:22Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/iot/evergreen/tes/IotCloudHelper.java", "diffHunk": "@@ -33,7 +33,7 @@\n     private static final String HTTP_HEADER_ERROR_TYPE = \"x-amzn-ErrorType\";\n     // TODO: revisit all timeout values\n     // Max wait time for device to receive HTTP response from IOT CLOUD\n-    private static final long TIMEOUT_FOR_RESPONSE_FROM_IOT_CLOUD_SECONDS = (long) Duration.ofMinutes(5).getSeconds();\n+    private static final long TIMEOUT_FOR_RESPONSE_FROM_IOT_CLOUD_SECONDS = (long) Duration.ofMinutes(30).getSeconds();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3MTExOA=="}, "originalCommit": {"oid": "43ec352d18480a23fe2b47e11b2c5517df438e17"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3OTkwMg==", "bodyText": "30 seconds sounds reasonable to me.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/247#discussion_r427479902", "createdAt": "2020-05-19T17:35:57Z", "author": {"login": "prateek-y"}, "path": "src/main/java/com/aws/iot/evergreen/tes/IotCloudHelper.java", "diffHunk": "@@ -33,7 +33,7 @@\n     private static final String HTTP_HEADER_ERROR_TYPE = \"x-amzn-ErrorType\";\n     // TODO: revisit all timeout values\n     // Max wait time for device to receive HTTP response from IOT CLOUD\n-    private static final long TIMEOUT_FOR_RESPONSE_FROM_IOT_CLOUD_SECONDS = (long) Duration.ofMinutes(5).getSeconds();\n+    private static final long TIMEOUT_FOR_RESPONSE_FROM_IOT_CLOUD_SECONDS = (long) Duration.ofMinutes(30).getSeconds();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3MTExOA=="}, "originalCommit": {"oid": "43ec352d18480a23fe2b47e11b2c5517df438e17"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MjMwMjI4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/iot/evergreen/tes/TokenExchangeService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNzoyMjo1OFrOGXqxyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNzoyNTowMFrOGXq2tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3MTMwNQ==", "bodyText": "make the string a public const.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/247#discussion_r427471305", "createdAt": "2020-05-19T17:22:58Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/iot/evergreen/tes/TokenExchangeService.java", "diffHunk": "@@ -40,17 +41,22 @@ public TokenExchangeService(Topics topics,\n                 .subscribe((why, newv) ->\n                         port = Coerce.toInt(newv));\n \n+        topics.lookup(\"iotRoleAlias\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43ec352d18480a23fe2b47e11b2c5517df438e17"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3MjU2NA==", "bodyText": "okay", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/247#discussion_r427472564", "createdAt": "2020-05-19T17:25:00Z", "author": {"login": "prateek-y"}, "path": "src/main/java/com/aws/iot/evergreen/tes/TokenExchangeService.java", "diffHunk": "@@ -40,17 +41,22 @@ public TokenExchangeService(Topics topics,\n                 .subscribe((why, newv) ->\n                         port = Coerce.toInt(newv));\n \n+        topics.lookup(\"iotRoleAlias\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3MTMwNQ=="}, "originalCommit": {"oid": "43ec352d18480a23fe2b47e11b2c5517df438e17"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NDA4MzgxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/iot/evergreen/tes/CredentialRequestHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoyMToyMFrOGZed2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoyMzo1MVrOGZeiNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2Njc0NA==", "bodyText": "you can configure your IDE to add a blank line at the end of files which is preferred.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/247#discussion_r429366744", "createdAt": "2020-05-22T17:21:20Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/iot/evergreen/tes/CredentialRequestHandler.java", "diffHunk": "@@ -43,15 +65,34 @@ public void handle(final HttpExchange exchange) throws IOException {\n      * @return AWS credentials from cloud.\n      */\n     public byte[] getCredentials() {\n-        String credentials = \"--alive--\";\n+        byte[] response = {};\n+        LOGGER.debug(\"Got request for credentials\");\n         // TODO: Add cache\n         try {\n-            credentials = iotCloudHelper.sendHttpRequest(iotConnectionManager,\n-                    IOT_CREDENTIALS_PATH,\n+            final String credentials = iotCloudHelper.sendHttpRequest(iotConnectionManager,\n+                    iotCredentialsPath,\n                     IOT_CREDENTIALS_HTTP_VERB);\n+            response = translateToAwsSdkFormat(credentials);\n         } catch (AWSIotException e) {\n             // TODO: Generate 4xx, 5xx responses for all error scnearios\n+            LOGGER.error(\"Encountered error while fetching credentials\", e);\n+        }\n+        return response;\n+    }\n+\n+    private byte[] translateToAwsSdkFormat(final String credentials) throws AWSIotException {\n+        try {\n+            // TODO: Validate if lowercase lookup can make this simpler\n+            JsonNode jsonNode = OBJECT_MAPPER.readTree(credentials).get(CREDENTIALS_UPSTREAM_STR);\n+            Map<String, String> response = new HashMap<>();\n+            response.put(ACCESS_KEY_DOWNSTREAM_STR, jsonNode.get(ACCESS_KEY_UPSTREAM_STR).asText());\n+            response.put(SECRET_ACCESS_DOWNSTREAM_STR, jsonNode.get(SECRET_ACCESS_UPSTREAM_STR).asText());\n+            response.put(SESSION_TOKEN_DOWNSTREAM_STR, jsonNode.get(SESSION_TOKEN_UPSTREAM_STR).asText());\n+            response.put(EXPIRATION_DOWNSTREAM_STR, jsonNode.get(EXPIRATION_UPSTREAM_STR).asText());\n+            return OBJECT_MAPPER.writeValueAsBytes(response);\n+        } catch (JsonProcessingException e) {\n+            LOGGER.error(\"Received malformed credential input\", e);\n+            throw new AWSIotException(e);\n         }\n-        return credentials.getBytes(StandardCharsets.UTF_8);\n     }\n }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc44bcb930b0de1a2d16a6b13b80fcbe12b2dedf"}, "originalPosition": 93}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2Nzg2Mg==", "bodyText": "ok", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/247#discussion_r429367862", "createdAt": "2020-05-22T17:23:51Z", "author": {"login": "prateek-y"}, "path": "src/main/java/com/aws/iot/evergreen/tes/CredentialRequestHandler.java", "diffHunk": "@@ -43,15 +65,34 @@ public void handle(final HttpExchange exchange) throws IOException {\n      * @return AWS credentials from cloud.\n      */\n     public byte[] getCredentials() {\n-        String credentials = \"--alive--\";\n+        byte[] response = {};\n+        LOGGER.debug(\"Got request for credentials\");\n         // TODO: Add cache\n         try {\n-            credentials = iotCloudHelper.sendHttpRequest(iotConnectionManager,\n-                    IOT_CREDENTIALS_PATH,\n+            final String credentials = iotCloudHelper.sendHttpRequest(iotConnectionManager,\n+                    iotCredentialsPath,\n                     IOT_CREDENTIALS_HTTP_VERB);\n+            response = translateToAwsSdkFormat(credentials);\n         } catch (AWSIotException e) {\n             // TODO: Generate 4xx, 5xx responses for all error scnearios\n+            LOGGER.error(\"Encountered error while fetching credentials\", e);\n+        }\n+        return response;\n+    }\n+\n+    private byte[] translateToAwsSdkFormat(final String credentials) throws AWSIotException {\n+        try {\n+            // TODO: Validate if lowercase lookup can make this simpler\n+            JsonNode jsonNode = OBJECT_MAPPER.readTree(credentials).get(CREDENTIALS_UPSTREAM_STR);\n+            Map<String, String> response = new HashMap<>();\n+            response.put(ACCESS_KEY_DOWNSTREAM_STR, jsonNode.get(ACCESS_KEY_UPSTREAM_STR).asText());\n+            response.put(SECRET_ACCESS_DOWNSTREAM_STR, jsonNode.get(SECRET_ACCESS_UPSTREAM_STR).asText());\n+            response.put(SESSION_TOKEN_DOWNSTREAM_STR, jsonNode.get(SESSION_TOKEN_UPSTREAM_STR).asText());\n+            response.put(EXPIRATION_DOWNSTREAM_STR, jsonNode.get(EXPIRATION_UPSTREAM_STR).asText());\n+            return OBJECT_MAPPER.writeValueAsBytes(response);\n+        } catch (JsonProcessingException e) {\n+            LOGGER.error(\"Received malformed credential input\", e);\n+            throw new AWSIotException(e);\n         }\n-        return credentials.getBytes(StandardCharsets.UTF_8);\n     }\n }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2Njc0NA=="}, "originalCommit": {"oid": "fc44bcb930b0de1a2d16a6b13b80fcbe12b2dedf"}, "originalPosition": 93}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NDA4Njk2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/iot/evergreen/tes/CredentialRequestHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoyMjozNVrOGZef_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoyMzo0MVrOGZeh7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2NzI5NQ==", "bodyText": "For next PR, would be nice to have the ability to get credentials for use within the kernel, so maybe implement a credential provider which can return these credentials. I say to use a credential provider specifically because it would need to handle expiration and refreshing.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/247#discussion_r429367295", "createdAt": "2020-05-22T17:22:35Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/iot/evergreen/tes/CredentialRequestHandler.java", "diffHunk": "@@ -43,15 +65,34 @@ public void handle(final HttpExchange exchange) throws IOException {\n      * @return AWS credentials from cloud.\n      */\n     public byte[] getCredentials() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc44bcb930b0de1a2d16a6b13b80fcbe12b2dedf"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2Nzc4OA==", "bodyText": "makes sense", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/247#discussion_r429367788", "createdAt": "2020-05-22T17:23:41Z", "author": {"login": "prateek-y"}, "path": "src/main/java/com/aws/iot/evergreen/tes/CredentialRequestHandler.java", "diffHunk": "@@ -43,15 +65,34 @@ public void handle(final HttpExchange exchange) throws IOException {\n      * @return AWS credentials from cloud.\n      */\n     public byte[] getCredentials() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2NzI5NQ=="}, "originalCommit": {"oid": "fc44bcb930b0de1a2d16a6b13b80fcbe12b2dedf"}, "originalPosition": 58}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4721, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}