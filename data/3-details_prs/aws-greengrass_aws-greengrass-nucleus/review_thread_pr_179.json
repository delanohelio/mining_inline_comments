{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyOTUyODIz", "number": 179, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNjo0NTo0N1rODxu4Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxODoxMjo1N1rODxw8Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNDc0ODk4OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/aws/iot/evergreen/kernel/EvergreenServiceTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNjo0NTo0N1rOGFXqOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNjo0NTo0N1rOGFXqOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI4MzcwNw==", "bodyText": "A quick reformat on this file, please!", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/179#discussion_r408283707", "createdAt": "2020-04-14T16:45:47Z", "author": {"login": "leaf94"}, "path": "src/test/java/com/aws/iot/evergreen/kernel/EvergreenServiceTest.java", "diffHunk": "@@ -102,32 +103,34 @@ public void startup() {\n     }\n \n     @Test\n-    void GIVEN_a_service_WHEN_reportState_THEN_all_state_changes_are_notified() throws InterruptedException {\n+    void GIVEN_a_service_WHEN_reportState_THEN_all_state_changes_are_notified() throws InterruptedException,\n+            IOException {\n         ScheduledThreadPoolExecutor ses = new ScheduledThreadPoolExecutor(2);\n         ExecutorService cachedPool = Executors.newCachedThreadPool();\n         CountDownLatch cd = new CountDownLatch(2);\n \n-        Context context = new Context();\n-        context.put(ScheduledThreadPoolExecutor.class, ses);\n-        context.put(ScheduledExecutorService.class, ses);\n-        context.put(Executor.class, cachedPool);\n-        context.put(ExecutorService.class, cachedPool);\n-        context.put(ThreadPoolExecutor.class, ses);\n-        context.put(CountDownLatch.class, cd);\n-\n-        final AtomicInteger n = new AtomicInteger(0);\n-        context.addGlobalStateChangeListener((service, oldState, newState) -> {\n-            if (n.incrementAndGet() >= NUM * 2) {\n-                cd.countDown();\n-            }\n-        });\n+        try(Context context = new Context()) {\n+            context.put(ScheduledThreadPoolExecutor.class, ses);\n+            context.put(ScheduledExecutorService.class, ses);\n+            context.put(Executor.class, cachedPool);\n+            context.put(ExecutorService.class, cachedPool);\n+            context.put(ThreadPoolExecutor.class, ses);\n+            context.put(CountDownLatch.class, cd);\n+\n+            final AtomicInteger n = new AtomicInteger(0);\n+            context.addGlobalStateChangeListener((service, oldState, newState) -> {\n+                if (n.incrementAndGet() >= NUM * 2) {\n+                    cd.countDown();\n+                }\n+            });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b8cf8278a7d859dc4a8bd30368867cb837ab596"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNTA4NjAzOnYy", "diffSide": "RIGHT", "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/kernel/KernelTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxODoxMjo0NlrOGFa--g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxODoxNDoyNVrOGFbCsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMzODE3MA==", "bodyText": "Do we plan to live with this violation?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/179#discussion_r408338170", "createdAt": "2020-04-14T18:12:46Z", "author": {"login": "shaguptashaikh"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/kernel/KernelTest.java", "diffHunk": "@@ -101,6 +101,7 @@ void GIVEN_expected_stdout_patterns_WHEN_kernel_launches_THEN_all_expected_patte\n         kernel.shutdown();\n     }\n \n+    @SuppressWarnings(\"PMD.AssignmentInOperand\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abfa3c211a05cc46a2213f961a726d9e4f2bf625"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMzOTEyMg==", "bodyText": "Yes, assignment in operand isn't a big deal, especially in a test.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/179#discussion_r408339122", "createdAt": "2020-04-14T18:14:25Z", "author": {"login": "MikeDombo"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/kernel/KernelTest.java", "diffHunk": "@@ -101,6 +101,7 @@ void GIVEN_expected_stdout_patterns_WHEN_kernel_launches_THEN_all_expected_patte\n         kernel.shutdown();\n     }\n \n+    @SuppressWarnings(\"PMD.AssignmentInOperand\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMzODE3MA=="}, "originalCommit": {"oid": "abfa3c211a05cc46a2213f961a726d9e4f2bf625"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNTA4NjkwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/iot/evergreen/kernel/GenericExternalService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxODoxMjo1N1rOGFa_dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxODoxNDo0OFrOGFbDew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMzODI5NA==", "bodyText": "Same as above", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/179#discussion_r408338294", "createdAt": "2020-04-14T18:12:57Z", "author": {"login": "shaguptashaikh"}, "path": "src/main/java/com/aws/iot/evergreen/kernel/GenericExternalService.java", "diffHunk": "@@ -106,6 +106,7 @@ public void startup() throws InterruptedException {\n         }\n     }\n \n+    @SuppressWarnings(\"PMD.CloseResource\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abfa3c211a05cc46a2213f961a726d9e4f2bf625"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMzOTMyMw==", "bodyText": "Yes, it is a false flag, we do actually close the resource, so nothing to worry about.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/179#discussion_r408339323", "createdAt": "2020-04-14T18:14:48Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/iot/evergreen/kernel/GenericExternalService.java", "diffHunk": "@@ -106,6 +106,7 @@ public void startup() throws InterruptedException {\n         }\n     }\n \n+    @SuppressWarnings(\"PMD.CloseResource\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMzODI5NA=="}, "originalCommit": {"oid": "abfa3c211a05cc46a2213f961a726d9e4f2bf625"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4580, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}