{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwNzM3NDE2", "number": 748, "title": "Use AWS SDK v2", "bodyText": "Issue #, if available:\nDescription of changes:\nUse AWS SDK V2 version of the GreengrassV2 SDK so that we can reduce our dependency closure and remove the V1 dependencies. Standardizes everything inside the Nucleus on V2 so that we can remove some duplicated code which had 2 ways to do things.\nWhy is this change necessary:\nHow was this change tested:\nAny additional information or context required to review the change:\nChecklist:\n\n Updated the README if applicable\n Updated or added new unit tests\n Updated or added new integration tests\n Updated or added new end-to-end tests\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-12-02T04:30:02Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/748", "merged": true, "mergeCommit": {"oid": "1af8539d097bca655095a6433e8942d0df7c2e22"}, "closed": true, "closedAt": "2020-12-02T16:36:59Z", "author": {"login": "MikeDombo"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiHHjpgBqjQwNjA0MDgyNTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiRwHUAFqTU0MzA1NzI3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bb2c891b8c30f2b09a5a40556c8cc48405b9e8af", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/bb2c891b8c30f2b09a5a40556c8cc48405b9e8af", "committedDate": "2020-12-02T04:28:50Z", "message": "Use AWS SDK v2"}, "afterCommit": {"oid": "24c412fb70227f2d47aa66696ecea2ab593cda68", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/24c412fb70227f2d47aa66696ecea2ab593cda68", "committedDate": "2020-12-02T04:48:06Z", "message": "Use AWS SDK v2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2168f20638a7b283493a06e11f6b585e322ceeb5", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/2168f20638a7b283493a06e11f6b585e322ceeb5", "committedDate": "2020-12-02T04:53:19Z", "message": "Use AWS SDK v2"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24c412fb70227f2d47aa66696ecea2ab593cda68", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/24c412fb70227f2d47aa66696ecea2ab593cda68", "committedDate": "2020-12-02T04:48:06Z", "message": "Use AWS SDK v2"}, "afterCommit": {"oid": "2168f20638a7b283493a06e11f6b585e322ceeb5", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/2168f20638a7b283493a06e11f6b585e322ceeb5", "committedDate": "2020-12-02T04:53:19Z", "message": "Use AWS SDK v2"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab6fcae4f5e623423699c3a9d511f285b8d222a4", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ab6fcae4f5e623423699c3a9d511f285b8d222a4", "committedDate": "2020-12-02T05:38:09Z", "message": "Provide custom serializer"}, "afterCommit": {"oid": "48756fa8eb95b4cdce1113c6b57f176e44dc2984", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/48756fa8eb95b4cdce1113c6b57f176e44dc2984", "committedDate": "2020-12-02T06:00:04Z", "message": "Provide custom serializer"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48756fa8eb95b4cdce1113c6b57f176e44dc2984", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/48756fa8eb95b4cdce1113c6b57f176e44dc2984", "committedDate": "2020-12-02T06:00:04Z", "message": "Provide custom serializer"}, "afterCommit": {"oid": "d046736dd8b44583a1ef2d2c18233a50a52cc20c", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d046736dd8b44583a1ef2d2c18233a50a52cc20c", "committedDate": "2020-12-02T06:18:03Z", "message": "Provide custom serializer"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d046736dd8b44583a1ef2d2c18233a50a52cc20c", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d046736dd8b44583a1ef2d2c18233a50a52cc20c", "committedDate": "2020-12-02T06:18:03Z", "message": "Provide custom serializer"}, "afterCommit": {"oid": "f56d63309c7dd5b468ce83abdf4f9df0a609c2c8", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/f56d63309c7dd5b468ce83abdf4f9df0a609c2c8", "committedDate": "2020-12-02T06:51:09Z", "message": "Provide custom serializer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56e8c71edbfc9bc915e54145f8dbd6069c768cc4", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/56e8c71edbfc9bc915e54145f8dbd6069c768cc4", "committedDate": "2020-12-02T06:52:48Z", "message": "Provide custom serializer"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f56d63309c7dd5b468ce83abdf4f9df0a609c2c8", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/f56d63309c7dd5b468ce83abdf4f9df0a609c2c8", "committedDate": "2020-12-02T06:51:09Z", "message": "Provide custom serializer"}, "afterCommit": {"oid": "56e8c71edbfc9bc915e54145f8dbd6069c768cc4", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/56e8c71edbfc9bc915e54145f8dbd6069c768cc4", "committedDate": "2020-12-02T06:52:48Z", "message": "Provide custom serializer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bff0d5053134de228dfd9b06e3a8b526655171e", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/9bff0d5053134de228dfd9b06e3a8b526655171e", "committedDate": "2020-12-02T07:12:31Z", "message": "Use version from maven"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9a454d9d4b57ac92ac8f77c3cc79a32d975d439", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/c9a454d9d4b57ac92ac8f77c3cc79a32d975d439", "committedDate": "2020-12-02T07:31:50Z", "message": "Fix benchmark build"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMDEzNzYy", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/748#pullrequestreview-543013762", "createdAt": "2020-12-02T16:27:19Z", "commit": {"oid": "c9a454d9d4b57ac92ac8f77c3cc79a32d975d439"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMDIwNzYx", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/748#pullrequestreview-543020761", "createdAt": "2020-12-02T16:34:14Z", "commit": {"oid": "c9a454d9d4b57ac92ac8f77c3cc79a32d975d439"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMDU3Mjc1", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/748#pullrequestreview-543057275", "createdAt": "2020-12-02T17:11:35Z", "commit": {"oid": "c9a454d9d4b57ac92ac8f77c3cc79a32d975d439"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNzoxMTozNVrOH9lZXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNzoxMTozNVrOH9lZXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMzNzg4NQ==", "bodyText": "unrelated: Shouldn;t beta/gamma endpoints be removed ? This would leak internal endpoints which is not a good idea.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/748#discussion_r534337885", "createdAt": "2020-12-02T17:11:35Z", "author": {"login": "prateek-y"}, "path": "src/main/java/com/aws/greengrass/util/RegionUtils.java", "diffHunk": "@@ -14,15 +14,15 @@\n     private static final String IOT_CORE_CONTROL_PLANE_ENDPOINT_FORMAT = \"https://%s.%s.iot.%s\";\n     private static final Map<IotSdkClientFactory.EnvironmentStage, String>\n             GREENGRASS_DATA_PLANE_STAGE_TO_ENDPOINT_FORMAT = ImmutableMap.of(\n-            IotSdkClientFactory.EnvironmentStage.PROD, \"greengrass-ats.iot.%s.%s:8443\",\n-            IotSdkClientFactory.EnvironmentStage.GAMMA, \"greengrass-ats.gamma.%s.iot.%s:8443\",\n-            IotSdkClientFactory.EnvironmentStage.BETA, \"greengrass-ats.beta.%s.iot.%s:8443\"\n+            IotSdkClientFactory.EnvironmentStage.PROD, \"https://greengrass-ats.iot.%s.%s:8443\",\n+            IotSdkClientFactory.EnvironmentStage.GAMMA, \"https://greengrass-ats.gamma.%s.iot.%s:8443\",\n+            IotSdkClientFactory.EnvironmentStage.BETA, \"https://greengrass-ats.beta.%s.iot.%s:8443\"\n     );\n     private static final Map<IotSdkClientFactory.EnvironmentStage, String>\n             GREENGRASS_CONTROL_PLANE_STAGE_TO_ENDPOINT_FORMAT = ImmutableMap.of(\n-            IotSdkClientFactory.EnvironmentStage.PROD, \"greengrass.%s.%s\",\n-            IotSdkClientFactory.EnvironmentStage.GAMMA, \"greengrass-gamma.%s.%s\",\n-            IotSdkClientFactory.EnvironmentStage.BETA, \"greengrass-beta2.%s.%s\"\n+            IotSdkClientFactory.EnvironmentStage.PROD, \"https://greengrass.%s.%s\",\n+            IotSdkClientFactory.EnvironmentStage.GAMMA, \"https://greengrass-gamma.%s.%s\",\n+            IotSdkClientFactory.EnvironmentStage.BETA, \"https://greengrass-beta2.%s.%s\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9a454d9d4b57ac92ac8f77c3cc79a32d975d439"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2521, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}