{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5NTM1NTE0", "number": 663, "title": "Restricting config update for access control policies of a component", "bodyText": "Issue #, if available:\nDescription of changes:\nWhy is this change necessary:\nHow was this change tested:\nAny additional information or context required to review the change:\nChecklist:\n\n Updated the README if applicable\n Updated or added new unit tests\n Updated or added new integration tests\n Updated or added new end-to-end tests\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-11-12T00:26:48Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/663", "merged": true, "mergeCommit": {"oid": "2d026789946b863ae55aeee87f551d9ffb5c5af3"}, "closed": true, "closedAt": "2020-11-12T02:04:55Z", "author": {"login": "abanthiy"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbncg7AFqTUyODY1MTQyMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdboQo3AH2gAyNTE5NTM1NTE0OjcyYWI0MTZhMWUxMjg4MzY3ZTZmMGIwMWYyYzZmYWI3MWI5MWU3MmM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NjUxNDIz", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/663#pullrequestreview-528651423", "createdAt": "2020-11-12T00:30:38Z", "commit": {"oid": "d695cedb1c289156863aa3cd66f4b60dcf351306"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDozMDozOFrOHxkCvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDozMDozOFrOHxkCvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTczMjc5Ng==", "bodyText": "don't you need to check both the keypath and the valueToMerge map?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/663#discussion_r521732796", "createdAt": "2020-11-12T00:30:38Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/greengrass/builtin/services/configstore/ConfigStoreIPCEventStreamAgent.java", "diffHunk": "@@ -312,23 +314,26 @@ private void validateRequest(UpdateConfigurationRequest request) {\n             if (request.getValueToMerge() == null) {\n                 throw new InvalidArgumentsError(\"ValueToMerge is required\");\n             }\n-\n+            String[] keyPath = new String[0];\n+            if (request.getKeyPath() != null) {\n+                keyPath = request.getKeyPath().toArray(new String[0]);\n+            }\n+            if (keyPath.length == 0 && request.getValueToMerge().keySet().stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d695cedb1c289156863aa3cd66f4b60dcf351306"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NjUzMTc0", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/663#pullrequestreview-528653174", "createdAt": "2020-11-12T00:36:05Z", "commit": {"oid": "d695cedb1c289156863aa3cd66f4b60dcf351306"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffc85bba3d461a228423082947918e602cc119c6", "author": {"user": {"login": "abanthiy", "name": null}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ffc85bba3d461a228423082947918e602cc119c6", "committedDate": "2020-11-12T00:52:18Z", "message": "Restricting config update for access control policies of a component"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d695cedb1c289156863aa3cd66f4b60dcf351306", "author": {"user": {"login": "abanthiy", "name": null}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d695cedb1c289156863aa3cd66f4b60dcf351306", "committedDate": "2020-11-12T00:25:39Z", "message": "Restricting config update for access control policies of a component"}, "afterCommit": {"oid": "ffc85bba3d461a228423082947918e602cc119c6", "author": {"user": {"login": "abanthiy", "name": null}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ffc85bba3d461a228423082947918e602cc119c6", "committedDate": "2020-11-12T00:52:18Z", "message": "Restricting config update for access control policies of a component"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NjYxNTYw", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/663#pullrequestreview-528661560", "createdAt": "2020-11-12T01:02:04Z", "commit": {"oid": "ffc85bba3d461a228423082947918e602cc119c6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NjY3Mjkz", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/663#pullrequestreview-528667293", "createdAt": "2020-11-12T01:19:09Z", "commit": {"oid": "ffc85bba3d461a228423082947918e602cc119c6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72ab416a1e1288367e6f0b01f2c6fab71b91e72c", "author": {"user": {"login": "abanthiy", "name": null}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/72ab416a1e1288367e6f0b01f2c6fab71b91e72c", "committedDate": "2020-11-12T01:27:34Z", "message": "Merge branch 'master' into restrictAclUpdate"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2649, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}