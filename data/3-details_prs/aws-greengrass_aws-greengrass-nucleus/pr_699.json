{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzNTMxMzk5", "number": 699, "title": "removed support for parameters", "bodyText": "Issue #, if available:\nRemoved dead code as part of https://sim.amazon.com/issues/P41216177\nChecklist:\n\n Updated the README if applicable\n Updated or added new unit tests\n Updated or added new integration tests\n Updated or added new end-to-end tests\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-11-18T22:28:45Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699", "merged": true, "mergeCommit": {"oid": "59a7e822fabb8eece751f976498713fef4264cbb"}, "closed": true, "closedAt": "2020-11-20T00:57:37Z", "author": {"login": "fahadmohammed01"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdd14fxgH2gAyNTIzNTMxMzk5OjA5YzJiMzg1ODk0YWU5ZTIxNzkwNWRmMDc1ODcyNjcxNWI0ZmMxMTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdeMn1YAFqTUzNDk5NzY2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "09c2b385894ae9e217905df0758726715b4fc111", "author": {"user": {"login": "fahadmohammed01", "name": null}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/09c2b385894ae9e217905df0758726715b4fc111", "committedDate": "2020-11-18T22:27:43Z", "message": "removed support for parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae79f461efead973f56a7f7dd4acfa13515901af", "author": {"user": {"login": "fahadmohammed01", "name": null}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ae79f461efead973f56a7f7dd4acfa13515901af", "committedDate": "2020-11-18T22:30:38Z", "message": "Merge branch 'master' into remove-parameters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzOTM4NzQ1", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#pullrequestreview-533938745", "createdAt": "2020-11-18T22:36:29Z", "commit": {"oid": "ae79f461efead973f56a7f7dd4acfa13515901af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMjozNjoyOVrOH2FJxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMjozNjoyOVrOH2FJxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ2OTU3NA==", "bodyText": "why is this a new error?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#discussion_r526469574", "createdAt": "2020-11-18T22:36:29Z", "author": {"login": "MikeDombo"}, "path": "src/integrationtests/java/com/aws/greengrass/integrationtests/e2e/deployment/DeploymentE2ETest.java", "diffHunk": "@@ -175,9 +177,10 @@ void GIVEN_kernel_running_WHEN_device_deployment_adds_packages_THEN_new_services\n \n     @Timeout(value = 10, unit = TimeUnit.MINUTES)\n     @Test\n-    void GIVEN_target_service_has_dependencies_WHEN_deploys_target_service_THEN_service_and_dependencies_should_be_deployed()\n+    void GIVEN_target_service_has_dependencies_WHEN_deploys_target_service_THEN_service_and_dependencies_should_be_deployed(ExtensionContext context)\n             throws Exception {\n         // Set up stdout listener to capture stdout for verify interpolation\n+        ignoreExceptionOfType(context, UserPrincipalNotFoundException.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae79f461efead973f56a7f7dd4acfa13515901af"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzOTM5MDMy", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#pullrequestreview-533939032", "createdAt": "2020-11-18T22:37:04Z", "commit": {"oid": "ae79f461efead973f56a7f7dd4acfa13515901af"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMjozNzowNFrOH2FKsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMjo0Mzo0NlrOH2FXGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ2OTgwOQ==", "bodyText": "why is config gone? We should be testing configuration shouldn't we?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#discussion_r526469809", "createdAt": "2020-11-18T22:37:04Z", "author": {"login": "MikeDombo"}, "path": "src/integrationtests/resources/com/aws/greengrass/integrationtests/deployment/YellowAndRedSignal.json", "diffHunk": "@@ -9,10 +9,7 @@\n     {\n       \"Name\": \"YellowSignal\",\n       \"ResolvedVersion\": \"1.0.0\",\n-      \"RootComponent\": true,\n-      \"Configuration\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae79f461efead973f56a7f7dd4acfa13515901af"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3MjY5OA==", "bodyText": "Do equivalents of these tests exist for Configuration? I don't think it would", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#discussion_r526472698", "createdAt": "2020-11-18T22:43:13Z", "author": {"login": "MikeDombo"}, "path": "src/test/java/com/aws/greengrass/componentmanager/KernelConfigResolverTest.java", "diffHunk": "@@ -265,205 +260,6 @@ void GIVEN_deployment_for_existing_package_WHEN_config_resolution_requested_THEN\n                 dependencyListContains(\"main\", TEST_INPUT_PACKAGE_A, servicesConfig));\n     }\n \n-    @Test\n-    void GIVEN_deployment_with_parameters_set_WHEN_config_resolution_requested_THEN_parameters_should_be_interpolated()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae79f461efead973f56a7f7dd4acfa13515901af"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3Mjk4NA==", "bodyText": "same as before, do we have equivalent test coverage for the new method?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#discussion_r526472984", "createdAt": "2020-11-18T22:43:46Z", "author": {"login": "MikeDombo"}, "path": "src/test/java/com/aws/greengrass/deployment/converter/DeploymentDocumentConverterTest.java", "diffHunk": "@@ -213,36 +139,6 @@ void GIVEN_Full_Local_Override_Request_config_update_And_Current_Root_WHEN_conve\n         assertThat(DependencyComponentConfig.getResolvedVersion(), is(\"*\"));\n     }\n \n-    @Test\n-    void GIVEN_fleet_configuration_with_arn_WHEN_convert_to_deployment_doc_THEN_parse_successfully() {\n-        String configurationArn =\n-                Arn.builder().withPartition(\"aws\").withService(\"gg\").withResource(\"configuration:thing/test:1\").build()\n-                        .toString();\n-        Map<String, Object> configMapA = new HashMap<String, Object>() {{\n-            put(\"param1\", \"value1\");\n-        }};\n-        Map<String, Object> configMapB = new HashMap<String, Object>() {{\n-            put(\"param2\", singletonMap(\"foo\", \"bar\"));\n-        }};\n-        FleetConfiguration config =\n-                FleetConfiguration.builder().creationTimestamp(0L).packages(new HashMap<String, PackageInfo>() {{\n-                    put(\"pkgA\", new PackageInfo(true, \"1.0.0\", configMapA));\n-                    put(\"pkgB\", new PackageInfo(false, \"1.1.0\", configMapB));\n-                }}).componentUpdatePolicy(new ComponentUpdatePolicy().withAction(\"NOTIFY_COMPONENTS\").withTimeout(60))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae79f461efead973f56a7f7dd4acfa13515901af"}, "originalPosition": 116}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14aa882ad2ff768774fad0ea05b6a4a132615603", "author": {"user": {"login": "fahadmohammed01", "name": null}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/14aa882ad2ff768774fad0ea05b6a4a132615603", "committedDate": "2020-11-18T23:17:44Z", "message": "updated bench mark tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzOTU5NjY1", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#pullrequestreview-533959665", "createdAt": "2020-11-18T23:18:14Z", "commit": {"oid": "ae79f461efead973f56a7f7dd4acfa13515901af"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a28230dbd353770351df54695e14ddabbb7958d", "author": {"user": {"login": "fahadmohammed01", "name": null}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/2a28230dbd353770351df54695e14ddabbb7958d", "committedDate": "2020-11-18T23:24:16Z", "message": "Merge branch 'master' into remove-parameters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzOTgxNDA4", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#pullrequestreview-533981408", "createdAt": "2020-11-19T00:08:03Z", "commit": {"oid": "2a28230dbd353770351df54695e14ddabbb7958d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwMDowODowM1rOH2HV_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwMDowODowM1rOH2HV_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjUwNTQ2OQ==", "bodyText": "and this", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#discussion_r526505469", "createdAt": "2020-11-19T00:08:03Z", "author": {"login": "leaf94"}, "path": "src/main/java/com/aws/greengrass/componentmanager/KernelConfigResolver.java", "diffHunk": "@@ -571,125 +532,6 @@ private String lookupSystemConfig(ComponentIdentifier component, String namespac\n \n     /**** end of new configuration code path. Most of below are all deprecated and will be remove soon ****/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a28230dbd353770351df54695e14ddabbb7958d"}, "originalPosition": 138}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "133b1d530cf4d5ed194dd402f338a49a46be9dc8", "author": {"user": {"login": "fahadmohammed01", "name": null}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/133b1d530cf4d5ed194dd402f338a49a46be9dc8", "committedDate": "2020-11-19T00:27:05Z", "message": "removed comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c8e617b0190cad3268f652dcc1115ff65724539", "author": {"user": {"login": "fahadmohammed01", "name": null}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0c8e617b0190cad3268f652dcc1115ff65724539", "committedDate": "2020-11-19T00:42:56Z", "message": "addressed pr comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzOTk1ODIy", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#pullrequestreview-533995822", "createdAt": "2020-11-19T00:45:07Z", "commit": {"oid": "0c8e617b0190cad3268f652dcc1115ff65724539"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ee9666c761149b0ebb305ccb8749ce118234a80", "author": {"user": {"login": "fahadmohammed01", "name": null}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0ee9666c761149b0ebb305ccb8749ce118234a80", "committedDate": "2020-11-19T00:48:36Z", "message": "fixed pmd"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0MDAyMzUz", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#pullrequestreview-534002353", "createdAt": "2020-11-19T01:02:15Z", "commit": {"oid": "0ee9666c761149b0ebb305ccb8749ce118234a80"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0MDM1OTY4", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#pullrequestreview-534035968", "createdAt": "2020-11-19T02:34:27Z", "commit": {"oid": "0ee9666c761149b0ebb305ccb8749ce118234a80"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "138fd850aed67e40c08c6aa264e8a901f8400fa7", "author": {"user": {"login": "fahadmohammed01", "name": null}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/138fd850aed67e40c08c6aa264e8a901f8400fa7", "committedDate": "2020-11-19T20:42:37Z", "message": "removed old interpolation format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c562a48ab5c1a5c726b72d643d5acef44ef044e", "author": {"user": {"login": "fahadmohammed01", "name": null}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/8c562a48ab5c1a5c726b72d643d5acef44ef044e", "committedDate": "2020-11-19T20:46:58Z", "message": "Merge branch 'master' into remove-parameters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0ODU3MjI3", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#pullrequestreview-534857227", "createdAt": "2020-11-19T21:15:10Z", "commit": {"oid": "8c562a48ab5c1a5c726b72d643d5acef44ef044e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMToxNToxMFrOH2x7SQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMTo1MToyMlrOH2zUsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzIwMzE0NQ==", "bodyText": "does this need to be public if it is used for testing? could it be package private? or tests updated to use the builder?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#discussion_r527203145", "createdAt": "2020-11-19T21:15:10Z", "author": {"login": "rbattle"}, "path": "src/main/java/com/aws/greengrass/deployment/model/DeploymentPackageConfiguration.java", "diffHunk": "@@ -41,30 +39,23 @@\n     @JsonProperty(\"ResolvedVersion\")\n     private String resolvedVersion;\n \n-    @Deprecated\n-    @JsonProperty(\"Configuration\")\n-    private Map<String, Object> configuration = new HashMap<>();\n-\n     @JsonProperty(\"ConfigurationUpdate\")\n     private ConfigurationUpdateOperation configurationUpdateOperation;\n \n     @JsonProperty(\"RunWith\")\n     private RunWith runWith;\n \n     /**\n-     * Constructor for no update configuration update for backward compatibility.\n+     * Constructor for no update configuration update. Used for testing\n      *\n      * @param packageName     name of package\n      * @param rootComponent   if it is root\n      * @param resolvedVersion resolved version\n-     * @param configuration   configuration\n      */\n-    public DeploymentPackageConfiguration(String packageName, boolean rootComponent, String resolvedVersion,\n-            Map<String, Object> configuration) {\n+    public DeploymentPackageConfiguration(String packageName, boolean rootComponent, String resolvedVersion) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c562a48ab5c1a5c726b72d643d5acef44ef044e"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzIyNjAzMg==", "bodyText": "I had added some runWith config in the tests, are those carried over to the new ones?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#discussion_r527226032", "createdAt": "2020-11-19T21:51:22Z", "author": {"login": "rbattle"}, "path": "src/test/java/com/aws/greengrass/componentmanager/KernelConfigResolverTest.java", "diffHunk": "@@ -265,205 +260,6 @@ void GIVEN_deployment_for_existing_package_WHEN_config_resolution_requested_THEN\n                 dependencyListContains(\"main\", TEST_INPUT_PACKAGE_A, servicesConfig));\n     }\n \n-    @Test\n-    void GIVEN_deployment_with_parameters_set_WHEN_config_resolution_requested_THEN_parameters_should_be_interpolated()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3MjY5OA=="}, "originalCommit": {"oid": "ae79f461efead973f56a7f7dd4acfa13515901af"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d63dd3449eaf1920eabd6e8bcfcae0fc85f3f7d", "author": {"user": {"login": "fahadmohammed01", "name": null}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/6d63dd3449eaf1920eabd6e8bcfcae0fc85f3f7d", "committedDate": "2020-11-20T00:03:37Z", "message": "updated tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0OTgxNDY4", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#pullrequestreview-534981468", "createdAt": "2020-11-20T00:13:12Z", "commit": {"oid": "6d63dd3449eaf1920eabd6e8bcfcae0fc85f3f7d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0OTk3NjYx", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/699#pullrequestreview-534997661", "createdAt": "2020-11-20T00:57:20Z", "commit": {"oid": "6d63dd3449eaf1920eabd6e8bcfcae0fc85f3f7d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2708, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}