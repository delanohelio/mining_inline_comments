{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzMzYxMDk0", "number": 594, "title": "Get filename from greengrass uri", "bodyText": "Issue #, if available:\nDescription of changes:\nPull the filename from the greengrass URI instead of taking it from the disposition header.\nWhy is this change necessary:\nHow was this change tested:\nAny additional information or context required to review the change:\nChecklist:\n\n Updated the README if applicable\n Updated or added new unit tests\n Updated or added new integration tests\n Updated or added new end-to-end tests\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-10-31T02:55:58Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/594", "merged": true, "mergeCommit": {"oid": "2d7beaea5c0a8da4c7517d05940695012b85e1d1"}, "closed": true, "closedAt": "2020-10-31T03:31:56Z", "author": {"login": "MikeDombo"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXyYnZAFqTUyMTEwNzM0Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXyr6vgFqTUyMTEwODQ4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTA3MzQ3", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/594#pullrequestreview-521107347", "createdAt": "2020-10-31T02:58:27Z", "commit": {"oid": "7b517dc727c0c8009c96dce78274037350d8c1c8"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQwMjo1ODoyN1rOHrkaEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQwMjo1ODo0OFrOHrkaIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ0NzMxNA==", "bodyText": "Rename this test now?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/594#discussion_r515447314", "createdAt": "2020-10-31T02:58:27Z", "author": {"login": "shaguptashaikh"}, "path": "src/test/java/com/aws/greengrass/componentmanager/plugins/GreengrassRepositoryDownloaderTest.java", "diffHunk": "@@ -114,19 +115,15 @@ void GIVEN_http_connection_error_WHEN_attempt_download_THEN_return_exception() t\n     }\n \n     @Test\n-    void GIVEN_filename_in_disposition_WHEN_attempt_resolve_filename_THEN_parse_filename() throws Exception {\n-        String filename = downloader.extractFilename(new URL(\"https://www.amazon.com/artifact.txt\"),\n-                \"attachment; \" + \"filename=\\\"filename.jpg\\\"\");\n-\n-        assertThat(filename, is(\"filename.jpg\"));\n-    }\n-\n-    @Test\n-    void GIVEN_filename_in_url_WHEN_attempt_resolve_filename_THEN_parse_filename() throws Exception {\n-        String filename =\n-                downloader.extractFilename(new URL(\"https://www.amazon.com/artifact.txt?key=value\"), \"attachment\");\n-\n-        assertThat(filename, is(\"artifact.txt\"));\n+    void GIVEN_filename_in_disposition_WHEN_attempt_resolve_filename_THEN_parse_filename() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b517dc727c0c8009c96dce78274037350d8c1c8"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ0NzMyOA==", "bodyText": "Get rid of the TODO above, and from line 96", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/594#discussion_r515447328", "createdAt": "2020-10-31T02:58:48Z", "author": {"login": "shaguptashaikh"}, "path": "src/main/java/com/aws/greengrass/componentmanager/plugins/GreengrassRepositoryDownloader.java", "diffHunk": "@@ -159,7 +130,12 @@ public File getArtifactFile(Path artifactDir, ComponentArtifact artifact, Compon\n         //  file name and that's the accurate name, but here we're only using the scheme specific part\n         //  of the URI when we don't find the file in cloud, we need to follow up on what is the\n         //  right way to get file name\n-        return artifactDir.resolve(artifact.getArtifactUri().getSchemeSpecificPart()).toFile();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b517dc727c0c8009c96dce78274037350d8c1c8"}, "originalPosition": 62}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b517dc727c0c8009c96dce78274037350d8c1c8", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/7b517dc727c0c8009c96dce78274037350d8c1c8", "committedDate": "2020-10-31T02:55:01Z", "message": "Get filename from greengrass uri"}, "afterCommit": {"oid": "4e6ea4b380809f0b54171571ee4c46db1446c1d0", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/4e6ea4b380809f0b54171571ee4c46db1446c1d0", "committedDate": "2020-10-31T03:03:54Z", "message": "Get filename from greengrass uri"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76bfe8396ed879a34ad6f5a2547a2ffe5b758a4c", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/76bfe8396ed879a34ad6f5a2547a2ffe5b758a4c", "committedDate": "2020-10-31T03:12:15Z", "message": "Get filename from greengrass uri"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4e6ea4b380809f0b54171571ee4c46db1446c1d0", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/4e6ea4b380809f0b54171571ee4c46db1446c1d0", "committedDate": "2020-10-31T03:03:54Z", "message": "Get filename from greengrass uri"}, "afterCommit": {"oid": "76bfe8396ed879a34ad6f5a2547a2ffe5b758a4c", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/76bfe8396ed879a34ad6f5a2547a2ffe5b758a4c", "committedDate": "2020-10-31T03:12:15Z", "message": "Get filename from greengrass uri"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTA4NDEx", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/594#pullrequestreview-521108411", "createdAt": "2020-10-31T03:19:13Z", "commit": {"oid": "76bfe8396ed879a34ad6f5a2547a2ffe5b758a4c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTA4NDgw", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/594#pullrequestreview-521108480", "createdAt": "2020-10-31T03:20:43Z", "commit": {"oid": "76bfe8396ed879a34ad6f5a2547a2ffe5b758a4c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2879, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}