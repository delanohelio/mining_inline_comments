{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1MDMxMzEx", "number": 714, "title": "Restrict platform resolver detecting arch detail", "bodyText": "Issue #, if available:\nAs discussion with Jamie&James, uname -m might not be sufficient to get arch details, and return undesired result. Since we don't have time to investigate the full solution before re-invent, temporarily restrict the detected arch info to armv6l only , in order to meet lambda launcher requirement\nDescription of changes:\nWhy is this change necessary:\nHow was this change tested:\nAny additional information or context required to review the change:\nChecklist:\n\n Updated the README if applicable\n Updated or added new unit tests\n Updated or added new integration tests\n Updated or added new end-to-end tests\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-11-21T01:11:16Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/714", "merged": true, "mergeCommit": {"oid": "0b46e13c16cb61e5c01909aab4eeadc9664b847d"}, "closed": true, "closedAt": "2020-11-23T22:05:56Z", "author": {"login": "ShirleyZheng92"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdehYBSAH2gAyNTI1MDMxMzExOmZlOWZmNzVkZmFjNTk0MTQ1ZmRjMTdkOWZjNzIwZDVjOWVlODkyZTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfcT-jgH2gAyNTI1MDMxMzExOjNmMjljNjFjZTU2ZTEwMDMwZThlMTczZjBiMWQ3MGJhZDE5N2E5ODk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fe9ff75dfac594145fdc17d9fc720d5c9ee892e0", "author": {"user": null}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/fe9ff75dfac594145fdc17d9fc720d5c9ee892e0", "committedDate": "2020-11-21T01:08:04Z", "message": "Restrict platform resolver detecting arch detail"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODY1MzQ4", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/714#pullrequestreview-535865348", "createdAt": "2020-11-21T01:14:27Z", "commit": {"oid": "fe9ff75dfac594145fdc17d9fc720d5c9ee892e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMToxNDoyN1rOH3lYkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMToxNDoyN1rOH3lYkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODA0NjIyNg==", "bodyText": "how about the other arms though? 7 and 8 at least", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/714#discussion_r528046226", "createdAt": "2020-11-21T01:14:27Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/greengrass/config/PlatformResolver.java", "diffHunk": "@@ -136,7 +136,14 @@ private static String getArchDetailInfo() {\n             return null;\n         }\n         try {\n-            return Exec.sh(\"uname -m\").toLowerCase();\n+            String archDetail = Exec.sh(\"uname -m\").toLowerCase();\n+            // TODO: \"uname -m\" is not sufficient to capture arch details on all platforms.\n+            // Currently only return if detected armv6l, as required by lambda launcher.\n+            if (\"armv6l\".equals(archDetail)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe9ff75dfac594145fdc17d9fc720d5c9ee892e0"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODY1NDEx", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/714#pullrequestreview-535865411", "createdAt": "2020-11-21T01:14:53Z", "commit": {"oid": "fe9ff75dfac594145fdc17d9fc720d5c9ee892e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMToxNDo1M1rOH3lY6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMToxNDo1M1rOH3lY6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODA0NjMxMw==", "bodyText": "else isn't needed. It can just fall through", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/714#discussion_r528046313", "createdAt": "2020-11-21T01:14:53Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/greengrass/config/PlatformResolver.java", "diffHunk": "@@ -136,7 +136,14 @@ private static String getArchDetailInfo() {\n             return null;\n         }\n         try {\n-            return Exec.sh(\"uname -m\").toLowerCase();\n+            String archDetail = Exec.sh(\"uname -m\").toLowerCase();\n+            // TODO: \"uname -m\" is not sufficient to capture arch details on all platforms.\n+            // Currently only return if detected armv6l, as required by lambda launcher.\n+            if (\"armv6l\".equals(archDetail)) {\n+                return archDetail;\n+            } else {\n+                return null;\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe9ff75dfac594145fdc17d9fc720d5c9ee892e0"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODY2NTM3", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/714#pullrequestreview-535866537", "createdAt": "2020-11-21T01:22:10Z", "commit": {"oid": "fe9ff75dfac594145fdc17d9fc720d5c9ee892e0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODY3NDE5", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/714#pullrequestreview-535867419", "createdAt": "2020-11-21T01:27:55Z", "commit": {"oid": "fe9ff75dfac594145fdc17d9fc720d5c9ee892e0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16712f7de92a416c5ff1c2a73ba84d0516a61816", "author": {"user": {"login": "ShirleyZheng92", "name": "Xueli Zheng "}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/16712f7de92a416c5ff1c2a73ba84d0516a61816", "committedDate": "2020-11-23T17:09:34Z", "message": "Merge branch 'master' into armv6l"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b28bc7ab0ace7b874c7cb73cba7c09c9732e5791", "author": {"user": {"login": "ShirleyZheng92", "name": "Xueli Zheng "}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/b28bc7ab0ace7b874c7cb73cba7c09c9732e5791", "committedDate": "2020-11-23T20:53:18Z", "message": "Merge branch 'master' into armv6l"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f29c61ce56e10030e8e173f0b1d70bad197a989", "author": {"user": {"login": "ShirleyZheng92", "name": "Xueli Zheng "}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/3f29c61ce56e10030e8e173f0b1d70bad197a989", "committedDate": "2020-11-23T21:48:03Z", "message": "Merge branch 'master' into armv6l"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2732, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}