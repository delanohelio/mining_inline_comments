{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NjM3OTM2", "number": 775, "title": "Improve logs for deployment errors", "bodyText": "Issue #, if available:\nDescription of changes:\nWhy is this change necessary:\nHow was this change tested:\nAny additional information or context required to review the change:\nChecklist:\n\n Updated the README if applicable\n Updated or added new unit tests\n Updated or added new integration tests\n Updated or added new end-to-end tests\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-12-10T04:54:11Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/775", "merged": true, "mergeCommit": {"oid": "1668241edc847268800fd5e21ce6048695e56eb3"}, "closed": true, "closedAt": "2020-12-10T05:28:14Z", "author": {"login": "MikeDombo"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdksDwVABqjQwOTMxNzY3NDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkseE5gFqTU0ODgyODI0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5e2a7e9a968808940c387c3d41c5e2e9e6202352", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5e2a7e9a968808940c387c3d41c5e2e9e6202352", "committedDate": "2020-12-10T04:53:28Z", "message": "Improve logs for deployment errors"}, "afterCommit": {"oid": "80fe9c673743c792668388a00943f71062196705", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/80fe9c673743c792668388a00943f71062196705", "committedDate": "2020-12-10T04:58:18Z", "message": "Improve logs for deployment errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b34f431d9254b7c11ffeacb67a54e7b09fefcdb", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0b34f431d9254b7c11ffeacb67a54e7b09fefcdb", "committedDate": "2020-12-10T05:07:51Z", "message": "Improve logs for deployment errors"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "80fe9c673743c792668388a00943f71062196705", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/80fe9c673743c792668388a00943f71062196705", "committedDate": "2020-12-10T04:58:18Z", "message": "Improve logs for deployment errors"}, "afterCommit": {"oid": "0b34f431d9254b7c11ffeacb67a54e7b09fefcdb", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0b34f431d9254b7c11ffeacb67a54e7b09fefcdb", "committedDate": "2020-12-10T05:07:51Z", "message": "Improve logs for deployment errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4ODI3NzQ3", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/775#pullrequestreview-548827747", "createdAt": "2020-12-10T05:25:35Z", "commit": {"oid": "0b34f431d9254b7c11ffeacb67a54e7b09fefcdb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4ODI4MDc2", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/775#pullrequestreview-548828076", "createdAt": "2020-12-10T05:26:38Z", "commit": {"oid": "0b34f431d9254b7c11ffeacb67a54e7b09fefcdb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNToyNjozOFrOIC2IZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNToyNjozOFrOIC2IZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTg1NDk0OQ==", "bodyText": "Log at error? The deployment will fail in this case, right?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/775#discussion_r539854949", "createdAt": "2020-12-10T05:26:38Z", "author": {"login": "fengwang666"}, "path": "src/main/java/com/aws/greengrass/componentmanager/ComponentManager.java", "diffHunk": "@@ -187,6 +189,13 @@ private ComponentIdentifier negotiateVersionWithCloud(String componentName,\n             } catch (InterruptedException e) {\n                 throw e;\n             } catch (Exception e) {\n+                // Don't bother logging the full stacktrace when it is NoAvailableComponentVersionException since we\n+                // know the reason for that error\n+                logger.atInfo().setCause(e instanceof NoAvailableComponentVersionException ? null : e)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b34f431d9254b7c11ffeacb67a54e7b09fefcdb"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4ODI4MjQz", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/775#pullrequestreview-548828243", "createdAt": "2020-12-10T05:27:11Z", "commit": {"oid": "0b34f431d9254b7c11ffeacb67a54e7b09fefcdb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2557, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}