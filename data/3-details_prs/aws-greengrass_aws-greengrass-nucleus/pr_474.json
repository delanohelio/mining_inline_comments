{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzMjUxNDMz", "number": 474, "title": "wait till the publish interval to check the periodic metrics future s\u2026", "bodyText": "Null pointer exception may be thrown when the TA has not yet scheduled using periodic metrics future but checks for the delay of the same.\nAny additional information or context required to review the change:\nChecklist:\n\n Updated the README if applicable\n Updated or added new unit tests\n Updated or added new integration tests\n Updated or added new end-to-end tests\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-09-25T17:32:22Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/474", "merged": true, "mergeCommit": {"oid": "d7e684c00409620ee62ad9f9e03902b4f2a2012d"}, "closed": true, "closedAt": "2020-09-25T18:11:53Z", "author": {"login": "saranyailla"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMZQUvgH2gAyNDkzMjUxNDMzOmI5NmVkZWY0MTk5Y2E3NzQ2ZjNhYjkyNWEzZmUwNGUwYWFhNWE4ZDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMZkyUAFqTQ5NjYyODgxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b96edef4199ca7746f3ab925a3fe04e0aaa5a8d5", "author": {"user": {"login": "saranyailla", "name": "Saranya"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/b96edef4199ca7746f3ab925a3fe04e0aaa5a8d5", "committedDate": "2020-09-25T17:29:47Z", "message": "wait till the publish interval to check the periodic metrics future status"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NjE4MTQy", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/474#pullrequestreview-496618142", "createdAt": "2020-09-25T17:35:38Z", "commit": {"oid": "b96edef4199ca7746f3ab925a3fe04e0aaa5a8d5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNzozNTozOFrOHYMr0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNzozNTozOFrOHYMr0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTEzNTY5OA==", "bodyText": "the problem is that getPeriodPublishMetricsFuture can return null. Are you 100% sure that at this point, it cannot be null?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/474#discussion_r495135698", "createdAt": "2020-09-25T17:35:38Z", "author": {"login": "MikeDombo"}, "path": "src/integrationtests/java/com/aws/greengrass/integrationtests/telemetry/TelemetryAgentTest.java", "diffHunk": "@@ -104,7 +102,8 @@ void GIVEN_kernel_running_with_telemetry_config_WHEN_launch_THEN_metrics_are_pub\n         TimeUnit.SECONDS.sleep(periodicInterval + 1);\n         assertTrue(Coerce.toLong(telTopics.find(RUNTIME_STORE_NAMESPACE_TOPIC,\n                 TELEMETRY_LAST_PERIODIC_AGGREGATION_TIME_TOPIC)) > lastAgg);\n-\n+        long delay = ta.getPeriodicPublishMetricsFuture().getDelay(TimeUnit.SECONDS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b96edef4199ca7746f3ab925a3fe04e0aaa5a8d5"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NjIyNDU5", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/474#pullrequestreview-496622459", "createdAt": "2020-09-25T17:42:12Z", "commit": {"oid": "b96edef4199ca7746f3ab925a3fe04e0aaa5a8d5"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NjI1MDc5", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/474#pullrequestreview-496625079", "createdAt": "2020-09-25T17:46:15Z", "commit": {"oid": "b96edef4199ca7746f3ab925a3fe04e0aaa5a8d5"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "540bf2b1b22ee26132355c37ed0d5747f4890f9b", "author": {"user": {"login": "saranyailla", "name": "Saranya"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/540bf2b1b22ee26132355c37ed0d5747f4890f9b", "committedDate": "2020-09-25T17:49:37Z", "message": "assert non null on periodic metrics future"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NjI4Njgy", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/474#pullrequestreview-496628682", "createdAt": "2020-09-25T17:51:56Z", "commit": {"oid": "540bf2b1b22ee26132355c37ed0d5747f4890f9b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NjI4ODEx", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/474#pullrequestreview-496628811", "createdAt": "2020-09-25T17:52:08Z", "commit": {"oid": "540bf2b1b22ee26132355c37ed0d5747f4890f9b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3034, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}