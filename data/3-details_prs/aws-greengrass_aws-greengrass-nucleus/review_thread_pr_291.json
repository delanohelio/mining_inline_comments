{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwMjg0OTk1", "number": 291, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQyMjoxOTo0MVrOEI8Ykw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwMzoxNjo1N1rOEI_WHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODEzMzk1OnYy", "diffSide": "RIGHT", "path": ".github/workflows/maven.yml", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQyMjoxOTo0MVrOGpNwdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQyMzoxNTowOVrOGpO23w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTg3MDE5OQ==", "bodyText": "This won't work. It will only put 1 comment and the second will overwrite the first.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/291#discussion_r445870199", "createdAt": "2020-06-25T22:19:41Z", "author": {"login": "MikeDombo"}, "path": ".github/workflows/maven.yml", "diffHunk": "@@ -58,6 +60,24 @@ jobs:\n           show_branch: true\n           # Use class names instead of the filename\n           show_class_names: true\n+      - name: cobertura-report-integration-test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b127ed6497a6a3ee79eeb335972a7ed80d6f297"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTg3MzIxMQ==", "bodyText": "Right, let me check, I created a pull request anyway to run all actions and test but having a hard time to reach this point due to test failures. Will change when I'm able to test it", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/291#discussion_r445873211", "createdAt": "2020-06-25T22:28:10Z", "author": {"login": "shaguptashaikh"}, "path": ".github/workflows/maven.yml", "diffHunk": "@@ -58,6 +60,24 @@ jobs:\n           show_branch: true\n           # Use class names instead of the filename\n           show_class_names: true\n+      - name: cobertura-report-integration-test", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTg3MDE5OQ=="}, "originalCommit": {"oid": "5b127ed6497a6a3ee79eeb335972a7ed80d6f297"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTg4Nzc2OQ==", "bodyText": "So it doesn't publish a new report rather edits the comment, even if the build step is split into two for unit and integ tests it will retain that behavior. So we will probably need to keep this report merged and only split the minimum coverage requirements", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/291#discussion_r445887769", "createdAt": "2020-06-25T23:13:43Z", "author": {"login": "shaguptashaikh"}, "path": ".github/workflows/maven.yml", "diffHunk": "@@ -58,6 +60,24 @@ jobs:\n           show_branch: true\n           # Use class names instead of the filename\n           show_class_names: true\n+      - name: cobertura-report-integration-test", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTg3MDE5OQ=="}, "originalCommit": {"oid": "5b127ed6497a6a3ee79eeb335972a7ed80d6f297"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTg4ODIyMw==", "bodyText": "Yes, that is what I meant. You can't get 2 coverage reports as comments.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/291#discussion_r445888223", "createdAt": "2020-06-25T23:15:09Z", "author": {"login": "MikeDombo"}, "path": ".github/workflows/maven.yml", "diffHunk": "@@ -58,6 +60,24 @@ jobs:\n           show_branch: true\n           # Use class names instead of the filename\n           show_class_names: true\n+      - name: cobertura-report-integration-test", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTg3MDE5OQ=="}, "originalCommit": {"oid": "5b127ed6497a6a3ee79eeb335972a7ed80d6f297"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODYxOTE3OnYy", "diffSide": "RIGHT", "path": "pom.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwMzoxNjo1N1rOGpSaug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwMzoxNjo1N1rOGpSaug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk0NjU1NA==", "bodyText": "Why add complexity too? Should we just settle on a single metric like line, branch, or instruction?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/291#discussion_r445946554", "createdAt": "2020-06-26T03:16:57Z", "author": {"login": "MikeDombo"}, "path": "pom.xml", "diffHunk": "@@ -376,53 +376,80 @@\n                         </goals>\n                     </execution>\n                     <execution>\n-                        <id>merge-results</id>\n+                        <id>unit-test-report</id>\n                         <phase>verify</phase>\n                         <goals>\n-                            <goal>merge</goal>\n+                            <goal>report</goal>\n                         </goals>\n                         <configuration>\n-                            <fileSets>\n-                                <fileSet>\n-                                    <directory>${project.build.directory}</directory>\n-                                    <includes>\n-                                        <include>*.exec</include>\n-                                    </includes>\n-                                    <excludes>\n-                                        <exclude>aggregate.exec</exclude>\n-                                    </excludes>\n-                                </fileSet>\n-                            </fileSets>\n-                            <destFile>${project.build.directory}/aggregate.exec</destFile>\n+                            <dataFile>${project.build.directory}/jacoco.exec</dataFile>\n+                            <outputDirectory>target/jacoco-report</outputDirectory>\n                         </configuration>\n                     </execution>\n                     <execution>\n-                        <id>post-merge-report</id>\n+                        <id>integration-test-report</id>\n                         <phase>verify</phase>\n                         <goals>\n                             <goal>report</goal>\n                         </goals>\n                         <configuration>\n-                            <dataFile>${project.build.directory}/aggregate.exec</dataFile>\n-                            <outputDirectory>target/jacoco-report</outputDirectory>\n+                            <dataFile>${project.build.directory}/jacoco-it.exec</dataFile>\n+                            <outputDirectory>target/jacoco-report/jacoco-it</outputDirectory>\n                         </configuration>\n                     </execution>\n                     <execution>\n-                        <id>jacoco-check</id>\n+                        <id>jacoco-check-unit-test</id>\n                         <phase>verify</phase>\n                         <goals>\n                             <goal>check</goal>\n                         </goals>\n                         <configuration>\n-                            <dataFile>${project.build.directory}/aggregate.exec</dataFile>\n+                            <dataFile>${project.build.directory}/jacoco.exec</dataFile>\n                             <rules>\n                                 <rule>\n                                     <element>BUNDLE</element>\n                                     <limits>\n                                         <limit>\n                                             <counter>INSTRUCTION</counter>\n                                             <value>COVEREDRATIO</value>\n-                                            <minimum>0.81</minimum>\n+                                            <minimum>0.66</minimum>\n+                                        </limit>\n+                                        <limit>\n+                                            <counter>LINE</counter>\n+                                            <value>COVEREDRATIO</value>\n+                                            <minimum>0.67</minimum>\n+                                        </limit>\n+                                        <limit>\n+                                            <counter>BRANCH</counter>\n+                                            <value>COVEREDRATIO</value>\n+                                            <minimum>0.59</minimum>\n+                                        </limit>\n+                                    </limits>\n+                                </rule>\n+                            </rules>\n+                        </configuration>\n+                    </execution>\n+                    <execution>\n+                        <id>jacoco-check-integration-test</id>\n+                        <phase>verify</phase>\n+                        <goals>\n+                            <goal>check</goal>\n+                        </goals>\n+                        <configuration>\n+                            <dataFile>${project.build.directory}/jacoco-it.exec</dataFile>\n+                            <rules>\n+                                <rule>\n+                                    <element>BUNDLE</element>\n+                                    <limits>\n+                                        <limit>\n+                                            <counter>INSTRUCTION</counter>\n+                                            <value>COVEREDRATIO</value>\n+                                            <minimum>0.58</minimum>\n+                                        </limit>\n+                                        <limit>\n+                                            <counter>COMPLEXITY</counter>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "117eafa68eb76766c2213499d748031385239682"}, "originalPosition": 95}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4366, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}