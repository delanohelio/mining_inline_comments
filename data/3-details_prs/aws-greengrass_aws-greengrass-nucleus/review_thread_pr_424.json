{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMzAxODAx", "number": 424, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNTo0MzowMVrOEh9W-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjo1MjoxMFrOEiNQCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MDQzNzcxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/iot/evergreen/util/platforms/UnixPlatform.java", "isResolved": false, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNTo0MzowMVrOHPj3oA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoxNzowOVrOHP7wmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA==", "bodyText": "You want to log a warning when proc exits successfully, when status is 0?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486078368", "createdAt": "2020-09-10T05:43:01Z", "author": {"login": "prateek-y"}, "path": "src/main/java/com/aws/iot/evergreen/util/platforms/UnixPlatform.java", "diffHunk": "@@ -40,13 +40,13 @@ public void killProcessAndChildren(Process process, boolean force) throws IOExce\n         String[] cmd = {\"pkill\", \"-\" + (force ? SIGKILL : SIGINT), \"-P\", Integer.toString(pp.getPid())};\n         Process proc = Runtime.getRuntime().exec(cmd);\n         proc.waitFor();\n-        if (proc.exitValue() != 0) {\n+        if (proc.exitValue() != 1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODYxOA==", "bodyText": "0 isn't success", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486078618", "createdAt": "2020-09-10T05:43:46Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/iot/evergreen/util/platforms/UnixPlatform.java", "diffHunk": "@@ -40,13 +40,13 @@ public void killProcessAndChildren(Process process, boolean force) throws IOExce\n         String[] cmd = {\"pkill\", \"-\" + (force ? SIGKILL : SIGINT), \"-P\", Integer.toString(pp.getPid())};\n         Process proc = Runtime.getRuntime().exec(cmd);\n         proc.waitFor();\n-        if (proc.exitValue() != 0) {\n+        if (proc.exitValue() != 1) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA=="}, "originalCommit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODgzMw==", "bodyText": "https://linux.die.net/man/1/pkill\nThe current behavior is that it always logs, which is obviously wrong", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486078833", "createdAt": "2020-09-10T05:44:25Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/iot/evergreen/util/platforms/UnixPlatform.java", "diffHunk": "@@ -40,13 +40,13 @@ public void killProcessAndChildren(Process process, boolean force) throws IOExce\n         String[] cmd = {\"pkill\", \"-\" + (force ? SIGKILL : SIGINT), \"-P\", Integer.toString(pp.getPid())};\n         Process proc = Runtime.getRuntime().exec(cmd);\n         proc.waitFor();\n-        if (proc.exitValue() != 0) {\n+        if (proc.exitValue() != 1) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA=="}, "originalCommit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA4MTQzMw==", "bodyText": "nvm, did not realize this is exit code for pkill. Then the log .kv(\"exit-code\", proc.exitValue() is misleading, seems like it is trying to log the exit code for exited process which is not possible i think.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486081433", "createdAt": "2020-09-10T05:52:02Z", "author": {"login": "prateek-y"}, "path": "src/main/java/com/aws/iot/evergreen/util/platforms/UnixPlatform.java", "diffHunk": "@@ -40,13 +40,13 @@ public void killProcessAndChildren(Process process, boolean force) throws IOExce\n         String[] cmd = {\"pkill\", \"-\" + (force ? SIGKILL : SIGINT), \"-P\", Integer.toString(pp.getPid())};\n         Process proc = Runtime.getRuntime().exec(cmd);\n         proc.waitFor();\n-        if (proc.exitValue() != 0) {\n+        if (proc.exitValue() != 1) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA=="}, "originalCommit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ2MjU4NQ==", "bodyText": "should we modify the exit-code log to specify its pkill status?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486462585", "createdAt": "2020-09-10T16:06:31Z", "author": {"login": "prateek-y"}, "path": "src/main/java/com/aws/iot/evergreen/util/platforms/UnixPlatform.java", "diffHunk": "@@ -40,13 +40,13 @@ public void killProcessAndChildren(Process process, boolean force) throws IOExce\n         String[] cmd = {\"pkill\", \"-\" + (force ? SIGKILL : SIGINT), \"-P\", Integer.toString(pp.getPid())};\n         Process proc = Runtime.getRuntime().exec(cmd);\n         proc.waitFor();\n-        if (proc.exitValue() != 0) {\n+        if (proc.exitValue() != 1) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA=="}, "originalCommit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ2Mzg0NA==", "bodyText": "Is the log \"pkill exited\" not clear enough?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486463844", "createdAt": "2020-09-10T16:08:12Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/iot/evergreen/util/platforms/UnixPlatform.java", "diffHunk": "@@ -40,13 +40,13 @@ public void killProcessAndChildren(Process process, boolean force) throws IOExce\n         String[] cmd = {\"pkill\", \"-\" + (force ? SIGKILL : SIGINT), \"-P\", Integer.toString(pp.getPid())};\n         Process proc = Runtime.getRuntime().exec(cmd);\n         proc.waitFor();\n-        if (proc.exitValue() != 0) {\n+        if (proc.exitValue() != 1) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA=="}, "originalCommit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ2OTc4Nw==", "bodyText": "its confusing to log it with process pid which is not pkill pid.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486469787", "createdAt": "2020-09-10T16:17:09Z", "author": {"login": "prateek-y"}, "path": "src/main/java/com/aws/iot/evergreen/util/platforms/UnixPlatform.java", "diffHunk": "@@ -40,13 +40,13 @@ public void killProcessAndChildren(Process process, boolean force) throws IOExce\n         String[] cmd = {\"pkill\", \"-\" + (force ? SIGKILL : SIGINT), \"-P\", Integer.toString(pp.getPid())};\n         Process proc = Runtime.getRuntime().exec(cmd);\n         proc.waitFor();\n-        if (proc.exitValue() != 0) {\n+        if (proc.exitValue() != 1) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA=="}, "originalCommit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MzAzNDUyOnYy", "diffSide": "RIGHT", "path": "pom.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjo1MDoxNVrOHP9B3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjo1MDoxNVrOHP9B3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ5MDU5MA==", "bodyText": "Worst naming ever...", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486490590", "createdAt": "2020-09-10T16:50:15Z", "author": {"login": "leaf94"}, "path": "pom.xml", "diffHunk": "@@ -594,6 +595,8 @@\n         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n         <maven.compiler.source>1.8</maven.compiler.source>\n         <maven.compiler.target>1.8</maven.compiler.target>\n+        <!-- Oddly, setting this to false actually makes it compile incrementally, making dev builds faster -->\n+        <maven.compiler.useIncrementalCompilation>false</maven.compiler.useIncrementalCompilation>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MzA0MTM5OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/iot/evergreen/kernel/KernelExceptionHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjo1MjoxMFrOHP9GPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjo1MjoxMFrOHP9GPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ5MTcwOA==", "bodyText": "Nice!", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486491708", "createdAt": "2020-09-10T16:52:10Z", "author": {"login": "leaf94"}, "path": "src/main/java/com/aws/iot/evergreen/kernel/KernelExceptionHandler.java", "diffHunk": "@@ -0,0 +1,18 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package com.aws.iot.evergreen.kernel;\n+\n+import com.aws.iot.evergreen.logging.api.Logger;\n+import com.aws.iot.evergreen.logging.impl.LogManager;\n+\n+public class KernelExceptionHandler implements Thread.UncaughtExceptionHandler {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 774, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}