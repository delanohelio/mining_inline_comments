{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyNjU3NDg5", "number": 57, "title": "More checkstyle fixes", "bodyText": "Issue #, if available:\nDescription of changes:\nMore checkstyle fixes, mostly adding JavaDoc. The remaining violations are only in Kernel.java and EvergreenService.java which are getting refactored/rewritten by Ethan (so I will leave them alone for now).\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-02-08T00:42:07Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/57", "merged": true, "mergeCommit": {"oid": "3d6671737dbd585a09b685207a82a99d5933fef1"}, "closed": true, "closedAt": "2020-02-10T20:58:57Z", "author": {"login": "MikeDombo"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDA94pgH2gAyMzcyNjU3NDg5OmRkNjJlNTAwNDg0YTM4NTRkYTdmMDI4YjNjZTNmNDg1ZTAyMDRlZTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDDlXZgFqTM1NjI1NzgyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/dd62e500484a3854da7f028b3ce3f485e0204ee0", "committedDate": "2020-02-10T17:55:27Z", "message": "More checkstyle fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1b34e5cd4c6ba911b2d3ebdd9f0c17f455945ed8", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/1b34e5cd4c6ba911b2d3ebdd9f0c17f455945ed8", "committedDate": "2020-02-08T00:41:35Z", "message": "More checkstyle fixes"}, "afterCommit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/dd62e500484a3854da7f028b3ce3f485e0204ee0", "committedDate": "2020-02-10T17:55:27Z", "message": "More checkstyle fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MTQ0NzE2", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/57#pullrequestreview-356144716", "createdAt": "2020-02-10T17:59:09Z", "commit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzo1OToxMFrOFnv6Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzo1OToxMFrOFnv6Ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzIyMzc3MQ==", "bodyText": "much easier to understand...", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/57#discussion_r377223771", "createdAt": "2020-02-10T17:59:10Z", "author": {"login": "leaf94"}, "path": "src/main/java/com/aws/iot/evergreen/dependency/Context.java", "diffHunk": "@@ -205,17 +247,28 @@ public synchronized void removeGlobalStateChangeListener(EvergreenService.Global\n         }\n     }\n \n-    public synchronized void globalNotifyStateChanged(EvergreenService l, final State was) {\n+    /**\n+     * Serially send an event to the global state change listeners.\n+     *\n+     * @param changedService the service which had a state change\n+     * @param previousState the previous state of the service\n+     */\n+    public synchronized void globalNotifyStateChanged(EvergreenService changedService, final State previousState) {\n         if (listeners != null) {\n-            listeners.forEach(s -> s.globalServiceStateChanged(l, was));\n+            listeners.forEach(s -> s.globalServiceStateChanged(changedService, previousState));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0"}, "originalPosition": 134}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MTQ1ODY1", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/57#pullrequestreview-356145865", "createdAt": "2020-02-10T18:00:58Z", "commit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MTcwODQ1", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/57#pullrequestreview-356170845", "createdAt": "2020-02-10T18:40:59Z", "commit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0"}, "state": "COMMENTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxODo0MDo1OVrOFnxLdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxOTo0Njo0MlrOFnzPRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI0NDUzMg==", "bodyText": "Seems same as public Configuration read(URL url, boolean useSourceTimestamp) throws IOException. Which occasions should either be used?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/57#discussion_r377244532", "createdAt": "2020-02-10T18:40:59Z", "author": {"login": "hui-yang"}, "path": "src/main/java/com/aws/iot/evergreen/config/Configuration.java", "diffHunk": "@@ -209,6 +221,13 @@ public Configuration read(Reader in, String extension, long timestamp) throws IO\n         return this;\n     }\n \n+    /**\n+     * Read in a new configuration from a URL and merge it into the current config.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI1NDI1Ng==", "bodyText": "typo? if?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/57#discussion_r377254256", "createdAt": "2020-02-10T18:59:02Z", "author": {"login": "hui-yang"}, "path": "src/main/java/com/aws/iot/evergreen/config/Node.java", "diffHunk": "@@ -113,19 +135,21 @@ protected Object validate(Object newValue, Object oldValue) {\n \n     public abstract void deepForEachTopic(Consumer<Topic> f);\n \n-    public void remove() {\n-        if (parent != null) {\n-            parent.remove(this);\n-        }\n-    }\n-\n+    /**\n+     * Check if this node is a child of a node with the given name.\n+     *\n+     * @param n name to check for\n+     * @return true if this node is a child of a node named n\n+     */\n     public boolean childOf(String n) {\n         return n.equals(name) || parent != null && parent.childOf(n);\n     }\n \n     /**\n+     * Get if parents will be notified for changes.\n+     *\n      * @return false iff changes to this node should be ignored by it's parent", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI1ODcxOA==", "bodyText": "the modified time of the value to be updated? earlier than the mod time of the current value?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/57#discussion_r377258718", "createdAt": "2020-02-10T19:07:37Z", "author": {"login": "hui-yang"}, "path": "src/main/java/com/aws/iot/evergreen/config/Topic.java", "diffHunk": "@@ -83,6 +89,13 @@ public Topic setValue(Object nv) {\n         return setValue(System.currentTimeMillis(), nv);\n     }\n \n+    /**\n+     * Set the value of this topic to a new value.\n+     *\n+     * @param proposedModtime the last modified time of the value. If this is in the past, we do not update the value.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI2NzE5NA==", "bodyText": "from cache? I'm assuming there are still other copies on the fs", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/57#discussion_r377267194", "createdAt": "2020-02-10T19:24:37Z", "author": {"login": "hui-yang"}, "path": "src/main/java/com/aws/iot/evergreen/dependency/EZPlugins.java", "diffHunk": "@@ -127,6 +142,12 @@ public EZPlugins loadCache() throws IOException {\n         return s.toArray(new String[0]);\n     }\n \n+    /**\n+     * Delete all plugins.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI3MzA3NQ==", "bodyText": "The timeout is not obvious to me. Where is it defined? Should it even be mentioned?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/57#discussion_r377273075", "createdAt": "2020-02-10T19:36:19Z", "author": {"login": "hui-yang"}, "path": "src/main/java/com/aws/iot/evergreen/kernel/GenericExternalService.java", "diffHunk": "@@ -87,23 +109,13 @@ public void run() {\n         }\n     }\n \n-    @Override\n-    public void shutdown() {\n-        inShutdown = true;\n-        run(\"shutdown\", null);\n-        Exec e = currentScript;\n-        if (e != null && e.isRunning()) {\n-            try {\n-                context.getLog().significant(getName(), \"shutting down\", e);\n-                e.close();\n-                e.waitClosed(1000);\n-            } catch (IOException ioe) {\n-                context.getLog().error(this, \"shutdown failure\", Utils.getUltimateMessage(ioe));\n-            }\n-        }\n-        inShutdown = false;\n-    }\n-\n+    /**\n+     * Run one of the commands defined in the config on the command line.\n+     *\n+     * @param name name of the command to run (\"run\", \"install\", \"start\").\n+     * @param background IntConsumer to receive the exit code. If null, the command will timeout after 2 minutes.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI3NzU1Ng==", "bodyText": "Is it only for JSON encoded string? It seems to add quotes to any string", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/57#discussion_r377277556", "createdAt": "2020-02-10T19:45:21Z", "author": {"login": "hui-yang"}, "path": "src/main/java/com/aws/iot/evergreen/util/Coerce.java", "diffHunk": "@@ -165,18 +202,32 @@ public static String toString(Object o) {\n         return dflt;\n     }\n \n+    /**\n+     * Convert object into a JSON encoded string.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0"}, "originalPosition": 109}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI3ODA5NQ==", "bodyText": "same. depends on the output format of o.toString()", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/57#discussion_r377278095", "createdAt": "2020-02-10T19:46:19Z", "author": {"login": "hui-yang"}, "path": "src/main/java/com/aws/iot/evergreen/util/Coerce.java", "diffHunk": "@@ -165,18 +202,32 @@ public static String toString(Object o) {\n         return dflt;\n     }\n \n+    /**\n+     * Convert object into a JSON encoded string.\n+     *\n+     * @param o object to convert.\n+     * @return resulting string.\n+     */\n+    @SuppressWarnings(\"checkstyle:emptycatchblock\")\n     public static String toQuotedString(Object o) {\n         if (o instanceof Topic) {\n             o = ((Topic) o).getOnce();\n         }\n         StringBuilder sb = new StringBuilder();\n         try {\n             toQuotedString(o, sb);\n-        } catch (IOException ex) {\n+        } catch (IOException ignored) {\n         }\n         return sb.toString();\n     }\n \n+    /**\n+     * Convert object to a JSON encoded string, writing output to the appendable.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0"}, "originalPosition": 129}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI3ODI3Nw==", "bodyText": "same", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/57#discussion_r377278277", "createdAt": "2020-02-10T19:46:42Z", "author": {"login": "hui-yang"}, "path": "src/main/java/com/aws/iot/evergreen/util/Coerce.java", "diffHunk": "@@ -210,6 +261,13 @@ public static void toQuotedString(Object o, Appendable out) throws IOException {\n         out.append('\"');\n     }\n \n+    /**\n+     * Convert object to JSON encoded string and write output to the appendable.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0"}, "originalPosition": 143}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MjU3ODIw", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/57#pullrequestreview-356257820", "createdAt": "2020-02-10T20:58:24Z", "commit": {"oid": "dd62e500484a3854da7f028b3ce3f485e0204ee0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2469, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}