{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyNzkzODI2", "number": 697, "title": "Recipe storage upgrade so that it is cross platform safe.", "bodyText": "Issue #, if available:\nDescription of changes:\nNEED TO BE MERGED TOGETHER WITH: aws-greengrass/aws-greengrass-cli#80\n\n\nMain change is in the ComponentStore.\n\n\nThe recipe file now has file name with format {hash}@{version}.recipe.yaml\n\n\nTest changes are how we preload recipes - we need special handling for it.\n\n\nMany whitespaces/line break changes because I updated my formatter to be one checked in the source. That should be correct.\n\n\nWhy is this change necessary:\nSo that the recipe storage file name is cross-platform safe (now for Windows and Linux), regardless of the component name allowed characters.\nHow was this change tested:\nUnit, Integ, and E2E tests all updated.\nAny additional information or context required to review the change:\nChecklist:\n\n Updated the README if applicable\n Updated or added new unit tests\n Updated or added new integration tests\n Updated or added new end-to-end tests\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-11-18T00:32:20Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/697", "merged": true, "mergeCommit": {"oid": "ae80ab4a088096920cc63d50190861ce94b30859"}, "closed": true, "closedAt": "2020-11-24T19:26:06Z", "author": {"login": "leaf94"}, "timelineItems": {"totalCount": 59, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdb6U17gH2gAyNTIyNzkzODI2OjA4NDU2MzhlMDQxYjg2NzE4OTUyZThlNDliZTNlYjk1ZmM0NjFiOTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfumJLgFqTUzNzgyMjIxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0845638e041b86718952e8e49be3eb95fc461b90", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0845638e041b86718952e8e49be3eb95fc461b90", "committedDate": "2020-11-12T22:30:27Z", "message": "save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfc94570b0f3dc23b6a3f6aa5a0304ffd09e92dc", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/cfc94570b0f3dc23b6a3f6aa5a0304ffd09e92dc", "committedDate": "2020-11-13T02:09:40Z", "message": "merged; src code; ready for some test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57de9341227ee045b1c51f1c738c8a591893b322", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/57de9341227ee045b1c51f1c738c8a591893b322", "committedDate": "2020-11-13T03:17:15Z", "message": "No unit test yet. But one E2E passed. Open for early review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c93a4e8409cc042ca13312a8831407bc356959ad", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/c93a4e8409cc042ca13312a8831407bc356959ad", "committedDate": "2020-11-13T07:16:43Z", "message": "Merge remote-tracking branch 'origin/master' into use_component_arn"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b02ccc5b50a39fa8d186ae397de9e00c12e59379", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/b02ccc5b50a39fa8d186ae397de9e00c12e59379", "committedDate": "2020-11-13T08:44:08Z", "message": "try CI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71ea2454f0a8304dea0d0a5c6593fe357ad50580", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/71ea2454f0a8304dea0d0a5c6593fe357ad50580", "committedDate": "2020-11-14T00:31:02Z", "message": "sage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d75401466cd67b1daef1e6da8c4f6ed9a101c81b", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d75401466cd67b1daef1e6da8c4f6ed9a101c81b", "committedDate": "2020-11-14T06:22:57Z", "message": "partial unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f551cdb1b026f51b07caf156ff78059b9cce244c", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/f551cdb1b026f51b07caf156ff78059b9cce244c", "committedDate": "2020-11-14T06:49:27Z", "message": "full unit test. Added cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eface81b58fec22735cd1cda16a7a0fb27647595", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/eface81b58fec22735cd1cda16a7a0fb27647595", "committedDate": "2020-11-14T07:11:01Z", "message": "rename"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6785c5719e7d7e89c7e5e4091321d1fab454ab0", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/e6785c5719e7d7e89c7e5e4091321d1fab454ab0", "committedDate": "2020-11-16T20:02:59Z", "message": "UAT passes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8024fadfd0c872a4532a34b3b793f2028f78e2c9", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/8024fadfd0c872a4532a34b3b793f2028f78e2c9", "committedDate": "2020-11-16T20:18:01Z", "message": "merged"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7276ecf23afc1e83077baf978e8949b73e0ae231", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/7276ecf23afc1e83077baf978e8949b73e0ae231", "committedDate": "2020-11-16T20:20:10Z", "message": "update test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1bfccabb53659006b592ff494f7c5c98a319cc51", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/1bfccabb53659006b592ff494f7c5c98a319cc51", "committedDate": "2020-11-16T20:42:10Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ca4ff39f48d6f5eedd4e2fdc16460688d6bb4cd", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/4ca4ff39f48d6f5eedd4e2fdc16460688d6bb4cd", "committedDate": "2020-11-16T22:31:15Z", "message": "manually rebase shirley's change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "255ac56ffc875a09b3cb590a6b018dd5a8948887", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/255ac56ffc875a09b3cb590a6b018dd5a8948887", "committedDate": "2020-11-16T22:42:45Z", "message": "Merge branch 'master' into use_component_arn"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3596c51989f4240457ed50223a1778f48e53db28", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/3596c51989f4240457ed50223a1778f48e53db28", "committedDate": "2020-11-16T23:02:54Z", "message": "ready to run CI after painful rebases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fb131852ecb39b043befb8146083ed1d8746cce", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/2fb131852ecb39b043befb8146083ed1d8746cce", "committedDate": "2020-11-16T23:45:09Z", "message": "save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6faedd4208ccc6c46248ce0d06777a894ec2cf3", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/b6faedd4208ccc6c46248ce0d06777a894ec2cf3", "committedDate": "2020-11-17T00:04:39Z", "message": "unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e1f0f04d12b6d0d1b401830a6cfc55c67fa35fc", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5e1f0f04d12b6d0d1b401830a6cfc55c67fa35fc", "committedDate": "2020-11-17T00:06:46Z", "message": "hash TODO"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd16aa04a97a6c6ab26037552b7dc5935ef2e131", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/bd16aa04a97a6c6ab26037552b7dc5935ef2e131", "committedDate": "2020-11-17T00:44:57Z", "message": "done. next step is to change unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e092a69c1cdbd3654966ee71d5d4f5e4e198d35e", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/e092a69c1cdbd3654966ee71d5d4f5e4e198d35e", "committedDate": "2020-11-17T17:07:16Z", "message": "component unit test pending test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6a00323427cd2e6fb3e8c77c09e1406a0652d29", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/a6a00323427cd2e6fb3e8c77c09e1406a0652d29", "committedDate": "2020-11-17T17:34:40Z", "message": "unit test done. next is local cli"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ca8b5314933d2f47fc3efc1d67e963928171fa2", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/9ca8b5314933d2f47fc3efc1d67e963928171fa2", "committedDate": "2020-11-17T17:39:03Z", "message": "merge temp fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5f11c3238774608f8ae85f6b8ca997df94b0042", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/b5f11c3238774608f8ae85f6b8ca997df94b0042", "committedDate": "2020-11-17T17:43:43Z", "message": "fix exception"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dac6762d0c66f78c9bb501a0682f868d15eb8506", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/dac6762d0c66f78c9bb501a0682f868d15eb8506", "committedDate": "2020-11-17T21:25:20Z", "message": "need to deal with the local store content"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23aa271d63c3212fe0e12a43f83de211c14dee11", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/23aa271d63c3212fe0e12a43f83de211c14dee11", "committedDate": "2020-11-18T00:26:40Z", "message": "done"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84f058d00b028d5cf0ffe25b2c1811dfd134c7b6", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/84f058d00b028d5cf0ffe25b2c1811dfd134c7b6", "committedDate": "2020-11-18T00:29:45Z", "message": "ready for a CI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a7bba8afa09d1f4e6a3b7ab2846d63a17963d24", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/6a7bba8afa09d1f4e6a3b7ab2846d63a17963d24", "committedDate": "2020-11-18T00:38:11Z", "message": "fix code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "992f11af10b50a79eca49cb56bb99a2613c77cd8", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/992f11af10b50a79eca49cb56bb99a2613c77cd8", "committedDate": "2020-11-18T01:00:42Z", "message": "need by cli"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "949dc6b98d8a55763133b1290a0cdbd5d5fafff2", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/949dc6b98d8a55763133b1290a0cdbd5d5fafff2", "committedDate": "2020-11-18T01:06:53Z", "message": "rename back to avoid merge conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d01747dfecdb850ac63f7eae0129071d1509d5e2", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d01747dfecdb850ac63f7eae0129071d1509d5e2", "committedDate": "2020-11-18T01:07:39Z", "message": "merge from master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8eebaae5c7f41d8b6de589b9d3507ede86edec8", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/b8eebaae5c7f41d8b6de589b9d3507ede86edec8", "committedDate": "2020-11-18T01:08:01Z", "message": "Merge branch 'use_component_arn' into recipe_storage_upgrade"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0593ad906e18614b3b23e7bd7fcd8e74001ff1f5", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0593ad906e18614b3b23e7bd7fcd8e74001ff1f5", "committedDate": "2020-11-18T02:07:48Z", "message": "save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58f823378fa77a3bf7ba9c03202dcf57d5fadc40", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/58f823378fa77a3bf7ba9c03202dcf57d5fadc40", "committedDate": "2020-11-18T02:19:13Z", "message": "Fix E2E store path. Use pure temp staging folder, instead of preloading to the real component store"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7c98b6f9c05a01cf3bb1b116ec064540c7ebb00", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/b7c98b6f9c05a01cf3bb1b116ec064540c7ebb00", "committedDate": "2020-11-18T16:13:17Z", "message": "fix import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a16ca1d36bad87b80c8af87bbedf9eeb20c0da2", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/9a16ca1d36bad87b80c8af87bbedf9eeb20c0da2", "committedDate": "2020-11-18T16:18:27Z", "message": "fix the last E2E"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2075a1fa3727cf2d5d10f8f771289692e17bc9de", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/2075a1fa3727cf2d5d10f8f771289692e17bc9de", "committedDate": "2020-11-18T16:25:41Z", "message": "mvn check pass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b2b4d128b091e4f9ef02bc10cde1b3e73885a1b", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/7b2b4d128b091e4f9ef02bc10cde1b3e73885a1b", "committedDate": "2020-11-23T22:08:46Z", "message": "merged. need to fix compile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f52e39a0036cb1a0cea3152b9b74304f5f9da71", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5f52e39a0036cb1a0cea3152b9b74304f5f9da71", "committedDate": "2020-11-23T22:24:49Z", "message": "unit and integ works; working on e2e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68beb21102d99d48a9011ad9465b710391925929", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/68beb21102d99d48a9011ad9465b710391925929", "committedDate": "2020-11-23T22:30:08Z", "message": "e2e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "892fb63719a9f3732f1c646fcbe4d3afbc5c57bf", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/892fb63719a9f3732f1c646fcbe4d3afbc5c57bf", "committedDate": "2020-11-23T22:55:51Z", "message": "fix pmd"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ec21e8c7d0eaa40a44264eb562987f88dcc49c1", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/6ec21e8c7d0eaa40a44264eb562987f88dcc49c1", "committedDate": "2020-11-23T23:20:28Z", "message": "fix e2e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93c3b63672754aeb3b6bdf6a1abc2fd3bf14138f", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/93c3b63672754aeb3b6bdf6a1abc2fd3bf14138f", "committedDate": "2020-11-24T00:36:06Z", "message": "fix some more preload"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90c6c4cfa04c631f3855bd91817188f149fb1ff7", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/90c6c4cfa04c631f3855bd91817188f149fb1ff7", "committedDate": "2020-11-24T00:46:43Z", "message": "use CI to publish nucleus-1.0-recipe_storage_upgrade-SNAPSHOT to maven so that CLI CI can consume"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c479424425ccb96ca6f52168c72a26bffbd27f58", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/c479424425ccb96ca6f52168c72a26bffbd27f58", "committedDate": "2020-11-24T00:46:57Z", "message": "Merge branch 'master' into recipe_storage_upgrade"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "509efd329fae2dc3da5f675a8042d5295e7401b6", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/509efd329fae2dc3da5f675a8042d5295e7401b6", "committedDate": "2020-11-24T00:48:18Z", "message": "use CI to publish nucleus-1.0-recipe_storage_upgrade-SNAPSHOT to maven so that CLI CI can consume"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61861dcd661bcadcf637ad9a02321adffaed4d32", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/61861dcd661bcadcf637ad9a02321adffaed4d32", "committedDate": "2020-11-24T01:01:10Z", "message": "done"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba01ab80118a6a1ffb25d67da868284bb14c61bc", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ba01ab80118a6a1ffb25d67da868284bb14c61bc", "committedDate": "2020-11-24T01:01:42Z", "message": "get CI back"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e784604bdcb6071bf83231ab5221df5507eee85c", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/e784604bdcb6071bf83231ab5221df5507eee85c", "committedDate": "2020-11-24T01:02:30Z", "message": "get CI back"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f40ea217304d3c14fe079a24af5b769a486b657", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/7f40ea217304d3c14fe079a24af5b769a486b657", "committedDate": "2020-11-24T01:20:20Z", "message": "more refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "217037738af17df8c993e10ab45bf39f7f1250b5", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/217037738af17df8c993e10ab45bf39f7f1250b5", "committedDate": "2020-11-24T01:29:48Z", "message": "more refactoring"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MDAwMjU0", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/697#pullrequestreview-537000254", "createdAt": "2020-11-24T01:38:37Z", "commit": {"oid": "217037738af17df8c993e10ab45bf39f7f1250b5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMTozODozN1rOH4mctg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMTozODozN1rOH4mctg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTExMjI0Ng==", "bodyText": "Doesn't this break local deployments?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/697#discussion_r529112246", "createdAt": "2020-11-24T01:38:37Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/greengrass/componentmanager/ComponentStore.java", "diffHunk": "@@ -239,41 +244,56 @@ ComponentMetadata getPackageMetadata(@NonNull ComponentIdentifier pkgId) throws\n         return new ComponentMetadata(pkgId, dependencyMetadata);\n     }\n \n+    Optional<ComponentIdentifier> findBestMatchAvailableComponent(@NonNull String componentName,\n+                                                                  @NonNull Requirement requirement)\n+            throws PackageLoadingException {\n+        List<ComponentIdentifier> componentIdentifierList = listAvailableComponent(componentName, requirement);\n+\n+        if (componentIdentifierList.isEmpty()) {\n+            return Optional.empty();\n+        } else {\n+            return Optional.of(componentIdentifierList.get(0));\n+        }\n+    }\n+\n     /**\n-     * list PackageMetadata for available packages that satisfies the requirement.\n-     *\n-     * @param packageName the target package\n-     * @param requirement version requirement\n-     * @return a list of PackageMetadata that satisfies the requirement.\n-     * @throws UnexpectedPackagingException if fails to parse version directory to Semver\n+     * List available component (versions) that satisfies the requirement in descending order.\n+     * @param componentName target component's name\n+     * @param requirement   semver requirement\n+     * @return component id list contains all satisfied version, in descending order\n+     * @throws PackageLoadingException  when fails to read recipe directory or parse recipe file name\n      */\n-    List<ComponentMetadata> listAvailablePackageMetadata(@NonNull String packageName, @NonNull Requirement requirement)\n-            throws PackagingException {\n-        File[] recipeFiles = getAllRecipeFiles();\n+    List<ComponentIdentifier> listAvailableComponent(@NonNull String componentName, @NonNull Requirement requirement)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "217037738af17df8c993e10ab45bf39f7f1250b5"}, "originalPosition": 108}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "134e10015f11e12b4a4a4f608395f2c1543d110b", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/134e10015f11e12b4a4a4f608395f2c1543d110b", "committedDate": "2020-11-24T01:54:07Z", "message": "Add README"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MDE5MDcy", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/697#pullrequestreview-537019072", "createdAt": "2020-11-24T01:59:13Z", "commit": {"oid": "134e10015f11e12b4a4a4f608395f2c1543d110b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMTo1OToxNFrOH4nV_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMTo1OToxNFrOH4nV_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTEyNjkwOA==", "bodyText": "does lose", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/697#discussion_r529126908", "createdAt": "2020-11-24T01:59:14Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/greengrass/componentmanager/COMPONENT_STORE_README.md", "diffHunk": "@@ -0,0 +1,37 @@\n+# Nucleus Component Store\n+\n+## Recipe Folder\n+Folder root: `{componentStoreRoot}/recipes`\n+\n+### Recipe File\n+\n+#### File Name \n+\n+**{ComponentNameHash}@{Semver}.recipe.yaml**\n+\n+The file name needs to be cross-platform safe. See below for details for each part.\n+\n+1. ComponentNameHash\n+    1. Hash = Base64.getUrlEncoder().withoutPadding((SHA_256(ComponentName))). \n+    1. Padding is omitted to avoid confusion.\n+    1. Hash does lost the ability to convert it back, but we only need and foresee one-way conversion of file name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "134e10015f11e12b4a4a4f608395f2c1543d110b"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f68cafc3b576abb52c36d2bd652be9a68363bef3", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/f68cafc3b576abb52c36d2bd652be9a68363bef3", "committedDate": "2020-11-24T17:02:38Z", "message": "Publish 1.0-recipe_storage_upgrade_1 for cli to consume"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c646205f3c2b68bbcbe0e7cc3400cb6970cb0214", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/c646205f3c2b68bbcbe0e7cc3400cb6970cb0214", "committedDate": "2020-11-24T17:11:05Z", "message": "publish with SNAPSHOT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e41d25c7af4cd94f919879bf8e214674eeaed96d", "author": {"user": {"login": "leaf94", "name": "Ethan Huang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/e41d25c7af4cd94f919879bf8e214674eeaed96d", "committedDate": "2020-11-24T17:29:48Z", "message": "back"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3ODE1NjU5", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/697#pullrequestreview-537815659", "createdAt": "2020-11-24T18:57:08Z", "commit": {"oid": "e41d25c7af4cd94f919879bf8e214674eeaed96d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3ODIyMjE1", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/697#pullrequestreview-537822215", "createdAt": "2020-11-24T19:06:11Z", "commit": {"oid": "e41d25c7af4cd94f919879bf8e214674eeaed96d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2705, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}