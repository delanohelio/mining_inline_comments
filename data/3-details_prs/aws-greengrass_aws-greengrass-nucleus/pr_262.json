{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MTAxOTY5", "number": 262, "title": "[Bug fix] When config path not given, initialize main service config \u2026", "bodyText": "When config path not given, initialize with default main service config, this allows the KernelLifeCycle class to launch main service with this default config when customer hasn't provided a config path, so that it doesn't error out, initializes plugins and then can look for config in alternate places like the tlog path etc\nIssue #, if available:\nDescription of changes:\nWhy is this change necessary:\nHow was this change tested:\nAny additional information or context required to review the change:\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-06-01T16:57:03Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/262", "merged": true, "mergeCommit": {"oid": "4825c7b1d6de7ade6dd3f7111796e0101d16b6d6"}, "closed": true, "closedAt": "2020-06-01T19:06:28Z", "author": {"login": "shaguptashaikh"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnDOIqgH2gAyNDI2MTAxOTY5OmE2YWRiNjkyNzQyNDEwZWNmMTJmMjhjZmFkMDc2ZWY5NTE0MWE0YjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnFFx5AFqTQyMjEwNDU4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a6adb692742410ecf12f28cfad076ef95141a4b4", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/a6adb692742410ecf12f28cfad076ef95141a4b4", "committedDate": "2020-06-01T16:54:17Z", "message": "[Bug fix] When config path not given, initialize main service config with minimal keys"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDI2MzEy", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/262#pullrequestreview-422026312", "createdAt": "2020-06-01T17:11:02Z", "commit": {"oid": "a6adb692742410ecf12f28cfad076ef95141a4b4"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzoxMTowMlrOGdS1ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzoxMTozM1rOGdS2mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM3MDUyNg==", "bodyText": "I don't think that this is exactly correct because it should try to read the config.yaml file from the root dir if nothing is specified. This logic should be even after that. Perhaps in the kernel launch.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/262#discussion_r433370526", "createdAt": "2020-06-01T17:11:02Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/iot/evergreen/kernel/KernelCommandLine.java", "diffHunk": "@@ -95,6 +97,12 @@ public void parseArgs(String... args) {\n                     throw rte;\n             }\n         }\n+        // If no config path was given then initialize with default blank config\n+        if (!haveRead) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6adb692742410ecf12f28cfad076ef95141a4b4"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM3MDc3Ng==", "bodyText": "You don't need to provide and should not provide a run by default.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/262#discussion_r433370776", "createdAt": "2020-06-01T17:11:33Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/iot/evergreen/kernel/KernelCommandLine.java", "diffHunk": "@@ -95,6 +97,12 @@ public void parseArgs(String... args) {\n                     throw rte;\n             }\n         }\n+        // If no config path was given then initialize with default blank config\n+        if (!haveRead) {\n+            kernel.getConfig()\n+                    .lookup(SERVICES_NAMESPACE_TOPIC, mainServiceName, SERVICE_LIFECYCLE_NAMESPACE_TOPIC, \"run\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6adb692742410ecf12f28cfad076ef95141a4b4"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8b488538e9d5628ad6ebdfc2c0ca4211391177b2", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/8b488538e9d5628ad6ebdfc2c0ca4211391177b2", "committedDate": "2020-06-01T17:17:44Z", "message": "Fix"}, "afterCommit": {"oid": "cda4f3380fcc4782e18e2f444a36134405932d4c", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/cda4f3380fcc4782e18e2f444a36134405932d4c", "committedDate": "2020-06-01T17:31:51Z", "message": "Fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDYyNzY3", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/262#pullrequestreview-422062767", "createdAt": "2020-06-01T18:02:31Z", "commit": {"oid": "cda4f3380fcc4782e18e2f444a36134405932d4c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d42ee1f82d9b4065ebaeea060b9337012f972698", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d42ee1f82d9b4065ebaeea060b9337012f972698", "committedDate": "2020-06-01T18:08:51Z", "message": "Fix"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cda4f3380fcc4782e18e2f444a36134405932d4c", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/cda4f3380fcc4782e18e2f444a36134405932d4c", "committedDate": "2020-06-01T17:31:51Z", "message": "Fix"}, "afterCommit": {"oid": "d42ee1f82d9b4065ebaeea060b9337012f972698", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d42ee1f82d9b4065ebaeea060b9337012f972698", "committedDate": "2020-06-01T18:08:51Z", "message": "Fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDkyOTQ5", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/262#pullrequestreview-422092949", "createdAt": "2020-06-01T18:47:01Z", "commit": {"oid": "d42ee1f82d9b4065ebaeea060b9337012f972698"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMTA0NTg0", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/262#pullrequestreview-422104584", "createdAt": "2020-06-01T19:04:58Z", "commit": {"oid": "d42ee1f82d9b4065ebaeea060b9337012f972698"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2235, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}