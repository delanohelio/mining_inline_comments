{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1ODcwNjQ4", "number": 326, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODo0NzoxM1rOERkqBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwMTo0OToxMlrOESAa9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2ODYxODI5OnYy", "diffSide": "RIGHT", "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/kernel/ServiceDependencyLifecycleTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODo0NzoxM1rOG2XNTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODo0NzoxM1rOG2XNTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY1NjUyNw==", "bodyText": "\ud83d\udc4d\nWe can even reduce the checklist to\nnew ExpectedStateTransition(HardDependency, State.INSTALLED, State.STARTING), \nnew ExpectedStateTransition(CustomerApp, State.INSTALLED, State.STARTING),\nnew ExpectedStateTransition(\"main\", State.STOPPING, State.FINISHED)));", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/326#discussion_r459656527", "createdAt": "2020-07-23T18:47:13Z", "author": {"login": "hui-yang"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/kernel/ServiceDependencyLifecycleTest.java", "diffHunk": "@@ -123,23 +124,23 @@ void GIVEN_hard_dependency_WHEN_dependency_goes_through_lifecycle_events_THEN_cu\n         kernel = new Kernel().parseArgs(\"-i\", configFile.toString());\n \n         // WHEN_kernel_launch_THEN_customer_app_starts_after_hard_dependency_is_running\n-        LinkedList<KernelTest.ExpectedStateTransition> expectedDuringLaunch = new LinkedList<>(\n-                Arrays.asList(new KernelTest.ExpectedStateTransition(CustomerApp, State.NEW, State.INSTALLED),\n-                        new KernelTest.ExpectedStateTransition(HardDependency, State.NEW, State.INSTALLED),\n-                        new KernelTest.ExpectedStateTransition(HardDependency, State.INSTALLED, State.STARTING),\n-                        new KernelTest.ExpectedStateTransition(HardDependency, State.STARTING, State.RUNNING),\n-                        new KernelTest.ExpectedStateTransition(CustomerApp, State.INSTALLED, State.STARTING),\n-                        new KernelTest.ExpectedStateTransition(CustomerApp, State.STARTING, State.RUNNING),\n-                        new KernelTest.ExpectedStateTransition(\"main\", State.STOPPING, State.FINISHED)));\n-        testRoutine(TEST_ROUTINE_SHORT_TIMEOUT, kernel, kernel::launch, \"kernel launch\", expectedDuringLaunch, Collections.emptySet());\n+        LinkedList<ExpectedStateTransition> expectedDuringLaunch = new LinkedList<>(\n+                Arrays.asList(\n+                        new ExpectedStateTransition(HardDependency, State.INSTALLED, State.STARTING),\n+                        new ExpectedStateTransition(HardDependency, State.STARTING, State.RUNNING),\n+                        new ExpectedStateTransition(CustomerApp, State.INSTALLED, State.STARTING),\n+                        new ExpectedStateTransition(CustomerApp, State.STARTING, State.RUNNING),\n+                        new ExpectedStateTransition(\"main\", State.STOPPING, State.FINISHED)));\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d792deca6e4f80397a8c2929028d9e004ca605f8"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2OTUwMjEwOnYy", "diffSide": "RIGHT", "path": ".github/PULL_REQUEST_TEMPLATE.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwMDowNjowMlrOG2fkRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwMDoxOToxOVrOG2fxhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTc5MzQ3OQ==", "bodyText": "Why not just have\n**Checklist:**\n - [ ] Updated the README if applicable\n - [ ] Updated or added new unit tests\n - [ ] Updated or added new integration tests\n - [ ] Updated or added new end-to-end tests\n\n?\nIf it isn't applicable, then just check the box anyway.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/326#discussion_r459793479", "createdAt": "2020-07-24T00:06:02Z", "author": {"login": "MikeDombo"}, "path": ".github/PULL_REQUEST_TEMPLATE.md", "diffHunk": "@@ -8,7 +8,8 @@\n \n **Any additional information or context required to review the change:**\n \n-**Checklist:**\n-- [ ] Updated the README\n+**Updated the README:**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58f1df50942847bdb1163885f6ce7acd75edcb67"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTc5Njg3MA==", "bodyText": "The PR checklist is supposed to be all checked in order to merge, which is why it shows up as a progress bar in the PR UI. It does not make sense to add two checkboxes here which are mutually exclusive.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/326#discussion_r459796870", "createdAt": "2020-07-24T00:19:19Z", "author": {"login": "MikeDombo"}, "path": ".github/PULL_REQUEST_TEMPLATE.md", "diffHunk": "@@ -8,7 +8,8 @@\n \n **Any additional information or context required to review the change:**\n \n-**Checklist:**\n-- [ ] Updated the README\n+**Updated the README:**", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTc5MzQ3OQ=="}, "originalCommit": {"oid": "58f1df50942847bdb1163885f6ce7acd75edcb67"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2OTUxNDUwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/iot/evergreen/deployment/IotJobsHelper.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwMDoxMzowNlrOG2freQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxODoxMDo1MVrOG25FHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTc5NTMyMQ==", "bodyText": "why put this here? Jobs isn't the only thing that needs a valid device config.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/326#discussion_r459795321", "createdAt": "2020-07-24T00:13:06Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/iot/evergreen/deployment/IotJobsHelper.java", "diffHunk": "@@ -246,6 +247,14 @@ public void onConnectionResumed(boolean sessionPresent) {\n     @Override\n     @SuppressFBWarnings\n     public void postInject() {\n+        try {\n+            deviceConfiguration.validate();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58f1df50942847bdb1163885f6ce7acd75edcb67"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDIxMTQ4Ng==", "bodyText": "Validate is still being called in the constructor for DeviceConfiguration so everything else using it should be invoking it. No one else is using injection exception IotJobHelper.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/326#discussion_r460211486", "createdAt": "2020-07-24T18:10:51Z", "author": {"login": "abanthiy"}, "path": "src/main/java/com/aws/iot/evergreen/deployment/IotJobsHelper.java", "diffHunk": "@@ -246,6 +247,14 @@ public void onConnectionResumed(boolean sessionPresent) {\n     @Override\n     @SuppressFBWarnings\n     public void postInject() {\n+        try {\n+            deviceConfiguration.validate();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTc5NTMyMQ=="}, "originalCommit": {"oid": "58f1df50942847bdb1163885f6ce7acd75edcb67"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MzE2NzI3OnYy", "diffSide": "RIGHT", "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/deployment/MqttReconnectTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwMTo0OToxMlrOG3BgXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwMTo0OToxMlrOG3BgXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM0OTUzMw==", "bodyText": "this change doesn't seem related to the previous failure, what drove this change?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/326#discussion_r460349533", "createdAt": "2020-07-25T01:49:12Z", "author": {"login": "MikeDombo"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/deployment/MqttReconnectTest.java", "diffHunk": "@@ -155,6 +153,6 @@ void GIVEN_new_deployment_while_device_online_WHEN_mqtt_disconnects_and_reconnec\n \n         // Wait for the IoT job to be updated and marked as successful\n         IotJobsUtils.waitForJobExecutionStatusToSatisfy(iotClient, jobId, thingInfo.getThingName(),\n-                Duration.ofMinutes(2), s -> s.equals(JobExecutionStatus.SUCCEEDED));\n+                Duration.ofMinutes(5), s -> s.equals(JobExecutionStatus.SUCCEEDED));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01e7a9d73795a89d836c650e0d9ec3a8da840ff7"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4438, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}