{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgwMTcwMDU5", "number": 413, "title": "Make Config store case-insensitive", "bodyText": "Issue #, if available:\nDescription of changes:\nMakes the config store case-insensitive for storing and looking up keys. The keys are still stored with their case intact, so when serialized they will have whatever casing was used when it was put in.\nWhy is this change necessary:\nWe're going to be using PascalCase in recipes, but we'd rather not force this change on all of our code which is already using camelCase.\nHow was this change tested:\nAny additional information or context required to review the change:\nChecklist:\n\n Updated the README if applicable\n Updated or added new unit tests\n Updated or added new integration tests\n Updated or added new end-to-end tests\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-09-04T21:53:10Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/413", "merged": true, "mergeCommit": {"oid": "61687f72b4465360a1694211cb4dc94fd9119b65"}, "closed": true, "closedAt": "2020-09-08T23:44:40Z", "author": {"login": "MikeDombo"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFsqAtABqjM3MzE4NDg2NzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdG_wWugFqTQ4NDU0OTE5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d972f272439956f8e1f7b84c5b450b7135618036", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d972f272439956f8e1f7b84c5b450b7135618036", "committedDate": "2020-09-04T21:52:35Z", "message": "Make Config store case-insensitive"}, "afterCommit": {"oid": "49e807daf1ad4b011e0aa5070724dc0abcdd01a2", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/49e807daf1ad4b011e0aa5070724dc0abcdd01a2", "committedDate": "2020-09-04T22:08:05Z", "message": "Make Config store case-insensitive"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49e807daf1ad4b011e0aa5070724dc0abcdd01a2", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/49e807daf1ad4b011e0aa5070724dc0abcdd01a2", "committedDate": "2020-09-04T22:08:05Z", "message": "Make Config store case-insensitive"}, "afterCommit": {"oid": "dd8351402231813d68e1b9faaff2ca2d0742300f", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/dd8351402231813d68e1b9faaff2ca2d0742300f", "committedDate": "2020-09-04T22:11:47Z", "message": "Make Config store case-insensitive"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dd8351402231813d68e1b9faaff2ca2d0742300f", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/dd8351402231813d68e1b9faaff2ca2d0742300f", "committedDate": "2020-09-04T22:11:47Z", "message": "Make Config store case-insensitive"}, "afterCommit": {"oid": "dea12b1bd44bf02e2c1a327f03cbd78f72c4eb42", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/dea12b1bd44bf02e2c1a327f03cbd78f72c4eb42", "committedDate": "2020-09-04T22:18:15Z", "message": "Make Config store case-insensitive"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dea12b1bd44bf02e2c1a327f03cbd78f72c4eb42", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/dea12b1bd44bf02e2c1a327f03cbd78f72c4eb42", "committedDate": "2020-09-04T22:18:15Z", "message": "Make Config store case-insensitive"}, "afterCommit": {"oid": "3c8f8af3879f2e7d5cdcba9b118ee796f36f65bb", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/3c8f8af3879f2e7d5cdcba9b118ee796f36f65bb", "committedDate": "2020-09-04T22:30:30Z", "message": "Make Config store case-insensitive"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTk5MDY4", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/413#pullrequestreview-482999068", "createdAt": "2020-09-04T22:47:25Z", "commit": {"oid": "3c8f8af3879f2e7d5cdcba9b118ee796f36f65bb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjo0NzoyNVrOHNdNHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjo0NzoyNVrOHNdNHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg3MjAyOQ==", "bodyText": "just value.equalsIgnoreCase(o.getValue())?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/413#discussion_r483872029", "createdAt": "2020-09-04T22:47:25Z", "author": {"login": "leaf94"}, "path": "src/main/java/com/aws/iot/evergreen/config/CaseInsensitiveString.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package com.aws.iot.evergreen.config;\n+\n+import lombok.NonNull;\n+\n+import java.util.Objects;\n+\n+public class CaseInsensitiveString implements CharSequence {\n+    private final String value;\n+    private String lower;\n+\n+    public CaseInsensitiveString(@NonNull String value) {\n+        this.value = value;\n+    }\n+\n+    private String getLower() {\n+        if (lower == null) {\n+            lower = value.toLowerCase();\n+        }\n+        return lower;\n+    }\n+\n+    @Override\n+    public boolean equals(Object o) {\n+        if (this == o) {\n+            return true;\n+        }\n+        if (o == null || getClass() != o.getClass()) {\n+            return false;\n+        }\n+        CaseInsensitiveString that = (CaseInsensitiveString) o;\n+        return getLower().equals(that.getLower());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c8f8af3879f2e7d5cdcba9b118ee796f36f65bb"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMDAwMzU3", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/413#pullrequestreview-483000357", "createdAt": "2020-09-04T22:53:29Z", "commit": {"oid": "3c8f8af3879f2e7d5cdcba9b118ee796f36f65bb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjo1MzoyOVrOHNdRvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjo1MzoyOVrOHNdRvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg3MzIxNA==", "bodyText": "nit - could also be final if wee do toLowerCase() in the constructor.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/413#discussion_r483873214", "createdAt": "2020-09-04T22:53:29Z", "author": {"login": "leaf94"}, "path": "src/main/java/com/aws/iot/evergreen/config/CaseInsensitiveString.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package com.aws.iot.evergreen.config;\n+\n+import lombok.NonNull;\n+\n+import java.util.Objects;\n+\n+public class CaseInsensitiveString implements CharSequence {\n+    private final String value;\n+    private String lower;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c8f8af3879f2e7d5cdcba9b118ee796f36f65bb"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMDAwNDE2", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/413#pullrequestreview-483000416", "createdAt": "2020-09-04T22:53:46Z", "commit": {"oid": "3c8f8af3879f2e7d5cdcba9b118ee796f36f65bb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjo1Mzo0N1rOHNdR8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjo1Mzo0N1rOHNdR8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg3MzI2NA==", "bodyText": "No need for the null check if toLowerCase() in the constructor.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/413#discussion_r483873264", "createdAt": "2020-09-04T22:53:47Z", "author": {"login": "leaf94"}, "path": "src/main/java/com/aws/iot/evergreen/config/CaseInsensitiveString.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package com.aws.iot.evergreen.config;\n+\n+import lombok.NonNull;\n+\n+import java.util.Objects;\n+\n+public class CaseInsensitiveString implements CharSequence {\n+    private final String value;\n+    private String lower;\n+\n+    public CaseInsensitiveString(@NonNull String value) {\n+        this.value = value;\n+    }\n+\n+    private String getLower() {\n+        if (lower == null) {\n+            lower = value.toLowerCase();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c8f8af3879f2e7d5cdcba9b118ee796f36f65bb"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMDAwNDc2", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/413#pullrequestreview-483000476", "createdAt": "2020-09-04T22:54:07Z", "commit": {"oid": "3c8f8af3879f2e7d5cdcba9b118ee796f36f65bb"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NTM1Mjkx", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/413#pullrequestreview-484535291", "createdAt": "2020-09-08T22:33:19Z", "commit": {"oid": "3c8f8af3879f2e7d5cdcba9b118ee796f36f65bb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQyMjozMzoxOVrOHOwLVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQyMjozMzoxOVrOHOwLVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTIzMTQ0Ng==", "bodyText": "Why have to wait here?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/413#discussion_r485231446", "createdAt": "2020-09-08T22:33:19Z", "author": {"login": "ShirleyZheng92"}, "path": "src/main/java/com/aws/iot/evergreen/config/Topics.java", "diffHunk": "@@ -364,6 +375,7 @@ public void replaceAndWait(Map<Object, Object> newValue) {\n                 updateFromMap(System.currentTimeMillis(), newValue,\n                         new UpdateBehaviorTree(UpdateBehaviorTree.UpdateBehavior.REPLACE))\n         );\n+        context.runOnPublishQueueAndWait(() -> {});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c8f8af3879f2e7d5cdcba9b118ee796f36f65bb"}, "originalPosition": 131}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NTM5OTQy", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/413#pullrequestreview-484539942", "createdAt": "2020-09-08T22:45:23Z", "commit": {"oid": "3c8f8af3879f2e7d5cdcba9b118ee796f36f65bb"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66d734bc04b1dddabdc99892ff7071616b0b9b7c", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/66d734bc04b1dddabdc99892ff7071616b0b9b7c", "committedDate": "2020-09-08T22:47:29Z", "message": "Make Config store case-insensitive"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c8f8af3879f2e7d5cdcba9b118ee796f36f65bb", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/3c8f8af3879f2e7d5cdcba9b118ee796f36f65bb", "committedDate": "2020-09-04T22:30:30Z", "message": "Make Config store case-insensitive"}, "afterCommit": {"oid": "66d734bc04b1dddabdc99892ff7071616b0b9b7c", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/66d734bc04b1dddabdc99892ff7071616b0b9b7c", "committedDate": "2020-09-08T22:47:29Z", "message": "Make Config store case-insensitive"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NTQ4NjAx", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/413#pullrequestreview-484548601", "createdAt": "2020-09-08T22:55:55Z", "commit": {"oid": "66d734bc04b1dddabdc99892ff7071616b0b9b7c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NTQ5MTky", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/413#pullrequestreview-484549192", "createdAt": "2020-09-08T22:57:37Z", "commit": {"oid": "66d734bc04b1dddabdc99892ff7071616b0b9b7c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3255, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}