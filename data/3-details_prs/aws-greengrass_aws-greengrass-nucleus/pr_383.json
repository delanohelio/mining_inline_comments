{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyOTE5MDU4", "number": 383, "title": "Fix flaky E2E FSS test.", "bodyText": "Issue #, if available:\nDescription of changes:\nFix flaky E2E test for FSS. The reason for the flakiness seems to be that the tests are running in parallel. So it is possible that the qualifier in the fleet config arn is not consistent. We just need to check the other parts of the config arn (which are consistent) to make sure that the data we are sending to the cloud is correct. For the qualifier, we can only test whether it is not null.\nWhy is this change necessary:\nThis change should fix the flakiness of the E2E test.\nHow was this change tested:\nBy running the E2E test\nAny additional information or context required to review the change:\nChecklist:\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-08-25T03:51:01Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/383", "merged": true, "mergeCommit": {"oid": "79e932b02900f797154628b1873c276cd3234ee8"}, "closed": true, "closedAt": "2020-08-25T16:03:10Z", "author": {"login": "nikkhilmuthye"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCO5y8gH2gAyNDcyOTE5MDU4Ojc2NGQzYzE1MTY5NDBiMDVjNmQ3YjQxYWVlMjI3ZjRmMTk3YjMwMGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCZbHuAFqTQ3NDYyOTIxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "764d3c1516940b05c6d7b41aee227f4f197b300f", "author": {"user": {"login": "nikkhilmuthye", "name": "Nikkhil Muthye"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/764d3c1516940b05c6d7b41aee227f4f197b300f", "committedDate": "2020-08-25T03:46:53Z", "message": "Fix flaky E2E FSS test."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MTE2Nzk0", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/383#pullrequestreview-474116794", "createdAt": "2020-08-25T03:54:41Z", "commit": {"oid": "764d3c1516940b05c6d7b41aee227f4f197b300f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwMzo1NDo0MVrOHGE2hQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwMzo1NDo0MVrOHGE2hQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEzMjk5Nw==", "bodyText": "This seems really unnecessary. Why not just concatenate? That will be far more efficient in this case, and easier to read too.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/383#discussion_r476132997", "createdAt": "2020-08-25T03:54:41Z", "author": {"login": "MikeDombo"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/fss/FleetStatusServiceTest.java", "diffHunk": "@@ -138,14 +136,9 @@ void GIVEN_kernel_running_with_deployed_services_WHEN_deployment_finishes_THEN_f\n \n         assertTrue(cdl.await(1, TimeUnit.MINUTES), \"All messages published and received\");\n         assertEquals(2, mqttMessagesList.get().size());\n-\n-        Arn arn = Arn.builder()\n-                .withPartition(FLEET_STATUS_ARN_PARTITION)\n-                .withService(FLEET_STATUS_ARN_SERVICE)\n-                .withAccountId(Coerce.toString(Arn.fromString(thingInfo.getThingArn()).getAccountId()))\n-                .withRegion(Coerce.toString(Arn.fromString(thingInfo.getThingArn()).getRegion()))\n-                .withResource(String.format(FLEET_STATUS_ARN_RESOURCE_PREFIX, \"thinggroup/\" + thingGroupName, \"1\"))\n-                .build();\n+        String accountId = Coerce.toString(Arn.fromString(thingInfo.getThingArn()).getAccountId());\n+        String region = Coerce.toString(Arn.fromString(thingInfo.getThingArn()).getRegion());\n+        String resource = String.format(\"%s%s\", \"thinggroup/\", thingGroupName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "764d3c1516940b05c6d7b41aee227f4f197b300f"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NjI5MjE1", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/383#pullrequestreview-474629215", "createdAt": "2020-08-25T16:02:21Z", "commit": {"oid": "764d3c1516940b05c6d7b41aee227f4f197b300f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3190, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}