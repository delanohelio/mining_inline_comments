{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzNDE1ODk1", "number": 426, "title": "Force executors to shutdown and interrupt their tasks", "bodyText": "Issue #, if available:\nDescription of changes:\nThis change makes our tests ~5-6 minutes faster\nWhy is this change necessary:\nHow was this change tested:\nAny additional information or context required to review the change:\nChecklist:\n\n Updated the README if applicable\n Updated or added new unit tests\n Updated or added new integration tests\n Updated or added new end-to-end tests\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-09-10T05:58:47Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/426", "merged": true, "mergeCommit": {"oid": "0dc6fb3ba4e0db36012d58b20cea538233846c2d"}, "closed": true, "closedAt": "2020-09-11T17:43:32Z", "author": {"login": "MikeDombo"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHi9smABqjM3NTE4NzcwMzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdH4J8ZgFqTQ4Njk2MDA5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "77bcac4fa5eeceb8efe43f44cce895e3f1ca8332", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/77bcac4fa5eeceb8efe43f44cce895e3f1ca8332", "committedDate": "2020-09-10T06:20:38Z", "message": "Remove unnecessary sleep"}, "afterCommit": {"oid": "5650e62922ee9a8fc362819310909da5d1c0a6b4", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5650e62922ee9a8fc362819310909da5d1c0a6b4", "committedDate": "2020-09-10T15:58:38Z", "message": "Remove unnecessary sleep"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MTMzODMx", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/426#pullrequestreview-486133831", "createdAt": "2020-09-10T16:57:59Z", "commit": {"oid": "5650e62922ee9a8fc362819310909da5d1c0a6b4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjo1Nzo1OVrOHP9UYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjo1Nzo1OVrOHP9UYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ5NTMzMQ==", "bodyText": "I guess we do want to wait when shipping the kernel though. Is this only for test improvement temporarily?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/426#discussion_r486495331", "createdAt": "2020-09-10T16:57:59Z", "author": {"login": "leaf94"}, "path": "src/main/java/com/aws/iot/evergreen/kernel/KernelLifecycle.java", "diffHunk": "@@ -262,12 +262,12 @@ public void shutdown(int timeoutSeconds) {\n             logger.atInfo().setEventType(\"system-shutdown\").addKeyValue(\"main\", getMain()).log();\n             stopAllServices(timeoutSeconds);\n \n-            // Wait for tasks in the executor to end.\n+            // Do not wait for tasks in the executor to end.\n             ScheduledExecutorService scheduledExecutorService = kernel.getContext().get(ScheduledExecutorService.class);\n             ExecutorService executorService = kernel.getContext().get(ExecutorService.class);\n             kernel.getContext().runOnPublishQueueAndWait(() -> {\n-                executorService.shutdown();\n-                scheduledExecutorService.shutdown();\n+                executorService.shutdownNow();\n+                scheduledExecutorService.shutdownNow();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5650e62922ee9a8fc362819310909da5d1c0a6b4"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5650e62922ee9a8fc362819310909da5d1c0a6b4", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5650e62922ee9a8fc362819310909da5d1c0a6b4", "committedDate": "2020-09-10T15:58:38Z", "message": "Remove unnecessary sleep"}, "afterCommit": {"oid": "378231c1783cc5c65f2a4266a4a24bd96c9f0841", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/378231c1783cc5c65f2a4266a4a24bd96c9f0841", "committedDate": "2020-09-11T02:24:44Z", "message": "Remove unnecessary sleep"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NDQ4NjQw", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/426#pullrequestreview-486448640", "createdAt": "2020-09-11T03:27:17Z", "commit": {"oid": "fc81c6045a29be5dca3c0e096bfaf7a858bbbe9f"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4530021476123a0d19ddad48f125760b32228aa", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/a4530021476123a0d19ddad48f125760b32228aa", "committedDate": "2020-09-11T05:11:33Z", "message": "Force executors to shutdown and interrupt their tasks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dec8cbdc002abdcfb965ce51cfd9d26b908d87a0", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/dec8cbdc002abdcfb965ce51cfd9d26b908d87a0", "committedDate": "2020-09-11T05:11:34Z", "message": "Remove unnecessary sleep"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed0608dcb3ef6749277ac65c408d288bfa74c0ba", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ed0608dcb3ef6749277ac65c408d288bfa74c0ba", "committedDate": "2020-09-11T05:11:34Z", "message": "Fix broken test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc81c6045a29be5dca3c0e096bfaf7a858bbbe9f", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/fc81c6045a29be5dca3c0e096bfaf7a858bbbe9f", "committedDate": "2020-09-11T02:52:27Z", "message": "Fix broken test"}, "afterCommit": {"oid": "ed0608dcb3ef6749277ac65c408d288bfa74c0ba", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ed0608dcb3ef6749277ac65c408d288bfa74c0ba", "committedDate": "2020-09-11T05:11:34Z", "message": "Fix broken test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2861bd1446d61201d8a884c164316877cd8cbc1f", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/2861bd1446d61201d8a884c164316877cd8cbc1f", "committedDate": "2020-09-11T05:48:34Z", "message": "Add comment"}, "afterCommit": {"oid": "a4898159ac4518d92b973cc6ed46befdea76955c", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/a4898159ac4518d92b973cc6ed46befdea76955c", "committedDate": "2020-09-11T06:09:34Z", "message": "Add comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NDk4NTk4", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/426#pullrequestreview-486498598", "createdAt": "2020-09-11T06:11:14Z", "commit": {"oid": "a4898159ac4518d92b973cc6ed46befdea76955c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a4898159ac4518d92b973cc6ed46befdea76955c", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/a4898159ac4518d92b973cc6ed46befdea76955c", "committedDate": "2020-09-11T06:09:34Z", "message": "Add comment"}, "afterCommit": {"oid": "0efff00d8ea883489e094a4304483625c6c9c372", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0efff00d8ea883489e094a4304483625c6c9c372", "committedDate": "2020-09-11T06:26:41Z", "message": "Add comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06e6008d8b92a1dbe7179e8840dd0b49e787572f", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/06e6008d8b92a1dbe7179e8840dd0b49e787572f", "committedDate": "2020-09-11T07:00:23Z", "message": "Add comment"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0efff00d8ea883489e094a4304483625c6c9c372", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0efff00d8ea883489e094a4304483625c6c9c372", "committedDate": "2020-09-11T06:26:41Z", "message": "Add comment"}, "afterCommit": {"oid": "06e6008d8b92a1dbe7179e8840dd0b49e787572f", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/06e6008d8b92a1dbe7179e8840dd0b49e787572f", "committedDate": "2020-09-11T07:00:23Z", "message": "Add comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2OTQzMjM0", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/426#pullrequestreview-486943234", "createdAt": "2020-09-11T16:15:23Z", "commit": {"oid": "06e6008d8b92a1dbe7179e8840dd0b49e787572f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9446bfeee63fa9a680e5a7e7777d6e1d3abe93f", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/e9446bfeee63fa9a680e5a7e7777d6e1d3abe93f", "committedDate": "2020-09-11T16:37:44Z", "message": "Merge branch 'master' into shutdown"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2OTYwMDk3", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/426#pullrequestreview-486960097", "createdAt": "2020-09-11T16:40:15Z", "commit": {"oid": "e9446bfeee63fa9a680e5a7e7777d6e1d3abe93f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3283, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}