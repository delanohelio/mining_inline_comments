{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1MTQ0ODgx", "number": 540, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzoyOToyNVrOEutX1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzo0Nzo0M1rOEuthgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NDEzMzMzOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/greengrass/iot/IotConnectionManager.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzoyOToyNVrOHjSRsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzozNDo1NVrOHjSWUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2MTY0OQ==", "bodyText": "Do you think it's worth giving a hint about the potential permissions required? Maybe link to the same app?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/540#discussion_r506761649", "createdAt": "2020-10-16T23:29:25Z", "author": {"login": "philcali"}, "path": "src/main/java/com/aws/greengrass/iot/IotConnectionManager.java", "diffHunk": "@@ -102,11 +102,13 @@ public void close() {\n         resolver.close();\n         eventLoopGroup.close();\n         try {\n-            eventLoopGroup.getShutdownCompleteFuture().get();\n+            eventLoopGroup.getShutdownCompleteFuture().get(2, TimeUnit.SECONDS);\n         } catch (InterruptedException e) {\n             Thread.currentThread().interrupt();\n         } catch (ExecutionException e) {\n             LOGGER.atError().log(\"Error shutting down event loop\", e);\n+        } catch (TimeoutException e) {\n+            LOGGER.atError().log(\"Timed out shutting down event loop\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ce33dca572c18ee608479a63adedfe32da61e4"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2MTk3OA==", "bodyText": "This isn't caused by permissions, it happens even when the connection is successful", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/540#discussion_r506761978", "createdAt": "2020-10-16T23:30:55Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/greengrass/iot/IotConnectionManager.java", "diffHunk": "@@ -102,11 +102,13 @@ public void close() {\n         resolver.close();\n         eventLoopGroup.close();\n         try {\n-            eventLoopGroup.getShutdownCompleteFuture().get();\n+            eventLoopGroup.getShutdownCompleteFuture().get(2, TimeUnit.SECONDS);\n         } catch (InterruptedException e) {\n             Thread.currentThread().interrupt();\n         } catch (ExecutionException e) {\n             LOGGER.atError().log(\"Error shutting down event loop\", e);\n+        } catch (TimeoutException e) {\n+            LOGGER.atError().log(\"Timed out shutting down event loop\", e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2MTY0OQ=="}, "originalCommit": {"oid": "10ce33dca572c18ee608479a63adedfe32da61e4"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2MjgzMg==", "bodyText": "I see. I was looking at the log, and my eyeballs jammed the two traces together. I really shouldn't be working right now.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/540#discussion_r506762832", "createdAt": "2020-10-16T23:34:55Z", "author": {"login": "philcali"}, "path": "src/main/java/com/aws/greengrass/iot/IotConnectionManager.java", "diffHunk": "@@ -102,11 +102,13 @@ public void close() {\n         resolver.close();\n         eventLoopGroup.close();\n         try {\n-            eventLoopGroup.getShutdownCompleteFuture().get();\n+            eventLoopGroup.getShutdownCompleteFuture().get(2, TimeUnit.SECONDS);\n         } catch (InterruptedException e) {\n             Thread.currentThread().interrupt();\n         } catch (ExecutionException e) {\n             LOGGER.atError().log(\"Error shutting down event loop\", e);\n+        } catch (TimeoutException e) {\n+            LOGGER.atError().log(\"Timed out shutting down event loop\", e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2MTY0OQ=="}, "originalCommit": {"oid": "10ce33dca572c18ee608479a63adedfe32da61e4"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NDEzOTgzOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/greengrass/iot/IotConnectionManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzozMzozMlrOHjSVKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzozNjowNFrOHjSXOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2MjUzOQ==", "bodyText": "Extract 2 to a constant. Also, why 2 seconds? How long should it take?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/540#discussion_r506762539", "createdAt": "2020-10-16T23:33:32Z", "author": {"login": "fengwang666"}, "path": "src/main/java/com/aws/greengrass/iot/IotConnectionManager.java", "diffHunk": "@@ -102,11 +102,13 @@ public void close() {\n         resolver.close();\n         eventLoopGroup.close();\n         try {\n-            eventLoopGroup.getShutdownCompleteFuture().get();\n+            eventLoopGroup.getShutdownCompleteFuture().get(2, TimeUnit.SECONDS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ce33dca572c18ee608479a63adedfe32da61e4"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2MzA2NQ==", "bodyText": "Just a random choice so we don't block forever. It should be very quick, but if we don't wait any time at all then it sometimes prints a scary looking stacktrace even though it is benign.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/540#discussion_r506763065", "createdAt": "2020-10-16T23:36:04Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/greengrass/iot/IotConnectionManager.java", "diffHunk": "@@ -102,11 +102,13 @@ public void close() {\n         resolver.close();\n         eventLoopGroup.close();\n         try {\n-            eventLoopGroup.getShutdownCompleteFuture().get();\n+            eventLoopGroup.getShutdownCompleteFuture().get(2, TimeUnit.SECONDS);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2MjUzOQ=="}, "originalCommit": {"oid": "10ce33dca572c18ee608479a63adedfe32da61e4"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NDE0MzQ3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/greengrass/mqttclient/MqttClient.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzozNjowMVrOHjSXMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzozNjo1MVrOHjSXyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2MzA1OA==", "bodyText": "Maybe I miss something here, aren't we suppose to use the certificate? Why are we using TES Role?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/540#discussion_r506763058", "createdAt": "2020-10-16T23:36:01Z", "author": {"login": "fengwang666"}, "path": "src/main/java/com/aws/greengrass/mqttclient/MqttClient.java", "diffHunk": "@@ -139,32 +139,31 @@ public MqttClient(Kernel kernel, DeviceConfiguration deviceConfiguration, Execut\n                         Coerce.toString(deviceConfiguration.getRootCAFilePath()));\n \n                 try (ClientTlsContext x509TlsContext = new ClientTlsContext(x509TlsOptions)) {\n-                    this.credentialsProvider = new X509CredentialsProvider.X509CredentialsProviderBuilder()\n-                            .withClientBootstrap(clientBootstrap)\n-                            .withTlsContext(x509TlsContext)\n-                            .withEndpoint(Coerce.toString(deviceConfiguration.getIotCredentialEndpoint()))\n-                            .withRoleAlias(tesRoleAlias)\n-                            .withThingName(Coerce.toString(deviceConfiguration.getThingName()))\n-                            .withProxyOptions(httpProxyOptions)\n-                            .build();\n+                    this.credentialsProvider =\n+                            new X509CredentialsProvider.X509CredentialsProviderBuilder()\n+                                    .withClientBootstrap(clientBootstrap).withTlsContext(x509TlsContext)\n+                                    .withEndpoint(Coerce.toString(deviceConfiguration.getIotCredentialEndpoint()))\n+                                    .withRoleAlias(tesRoleAlias)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ce33dca572c18ee608479a63adedfe32da61e4"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2MzIwOA==", "bodyText": "We use the certificate to talk to TES to get creds which we then use with websockets to talk to IoT Core. The SDK doesn't support proxy for non-websocket connections, so we must use TES creds.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/540#discussion_r506763208", "createdAt": "2020-10-16T23:36:51Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/greengrass/mqttclient/MqttClient.java", "diffHunk": "@@ -139,32 +139,31 @@ public MqttClient(Kernel kernel, DeviceConfiguration deviceConfiguration, Execut\n                         Coerce.toString(deviceConfiguration.getRootCAFilePath()));\n \n                 try (ClientTlsContext x509TlsContext = new ClientTlsContext(x509TlsOptions)) {\n-                    this.credentialsProvider = new X509CredentialsProvider.X509CredentialsProviderBuilder()\n-                            .withClientBootstrap(clientBootstrap)\n-                            .withTlsContext(x509TlsContext)\n-                            .withEndpoint(Coerce.toString(deviceConfiguration.getIotCredentialEndpoint()))\n-                            .withRoleAlias(tesRoleAlias)\n-                            .withThingName(Coerce.toString(deviceConfiguration.getThingName()))\n-                            .withProxyOptions(httpProxyOptions)\n-                            .build();\n+                    this.credentialsProvider =\n+                            new X509CredentialsProvider.X509CredentialsProviderBuilder()\n+                                    .withClientBootstrap(clientBootstrap).withTlsContext(x509TlsContext)\n+                                    .withEndpoint(Coerce.toString(deviceConfiguration.getIotCredentialEndpoint()))\n+                                    .withRoleAlias(tesRoleAlias)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2MzA1OA=="}, "originalCommit": {"oid": "10ce33dca572c18ee608479a63adedfe32da61e4"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NDE1ODEwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/greengrass/mqttclient/AwsIotMqttClient.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzo0Nzo0M1rOHjSfeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMDoyMjowNVrOHjS0ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2NTE3OA==", "bodyText": "Beautiful", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/540#discussion_r506765178", "createdAt": "2020-10-16T23:47:43Z", "author": {"login": "philcali"}, "path": "src/main/java/com/aws/greengrass/mqttclient/AwsIotMqttClient.java", "diffHunk": "@@ -150,25 +146,32 @@ void reconnect() throws TimeoutException, ExecutionException, InterruptedExcepti\n         // Always use the builder provider here so that the builder is updated with whatever\n         // the latest device config is\n         try (AwsIotMqttConnectionBuilder builder = builderProvider.get()) {\n-            if (credentialsProvider != null) {\n-                builder.withWebsocketCredentialsProvider(credentialsProvider);\n-            }\n             builder.withConnectionEventCallbacks(connectionEventCallback);\n             builder.withClientId(clientId);\n \n             connection = builder.build();\n             // Set message handler for this connection to be our global message handler in MqttClient.\n             // The handler will then send out the message to all subscribers after appropriate filtering.\n             connection.onMessage(messageHandler);\n-            logger.atDebug().log(\"Connecting to AWS IoT Core\");\n+            logger.atInfo().log(\"Connecting to AWS IoT Core\");\n             return connection.connect().thenApply((sessionPresent) -> {\n                 currentlyConnected.set(true);\n-                logger.atDebug().kv(\"sessionPresent\", sessionPresent).log(\"Successfully connected to AWS IoT Core\");\n+                logger.atInfo().kv(\"sessionPresent\", sessionPresent).log(\"Successfully connected to AWS IoT Core\");\n \n                 if (!sessionPresent) {\n                     resubscribe();\n                 }\n                 return sessionPresent;\n+            }).whenComplete((session, error) -> {\n+                if (error != null) {\n+                    logger.atError().log(\"Unable to connect to AWS IoT Core\", error);\n+                    if (ProxyUtils.getProxyConfiguration() != null) {\n+                        logger.atInfo().log(\"You are using a proxy which uses a websocket connection and \"\n+                                + \"TokenExchangeService credentials. Verify that the IAM role which the IoT Role \"\n+                                + \"Alias is aliasing has a policy which allows for iot:Connect, iot:Subscribe, \"\n+                                + \"iot:Publish, iot:Receive, iot:GetThingShadow, and iot:UpdateThingShadow.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe01e3cfa0105cabc2f977cf8d804b2c7965abde"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2NTQzMg==", "bodyText": "removed shadow ones because I don't think they're actually needed. I think when using mqtt to access the shadow those permissions shouldn't come into play. Do you know @fengwa-aws?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/540#discussion_r506765432", "createdAt": "2020-10-16T23:49:22Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/greengrass/mqttclient/AwsIotMqttClient.java", "diffHunk": "@@ -150,25 +146,32 @@ void reconnect() throws TimeoutException, ExecutionException, InterruptedExcepti\n         // Always use the builder provider here so that the builder is updated with whatever\n         // the latest device config is\n         try (AwsIotMqttConnectionBuilder builder = builderProvider.get()) {\n-            if (credentialsProvider != null) {\n-                builder.withWebsocketCredentialsProvider(credentialsProvider);\n-            }\n             builder.withConnectionEventCallbacks(connectionEventCallback);\n             builder.withClientId(clientId);\n \n             connection = builder.build();\n             // Set message handler for this connection to be our global message handler in MqttClient.\n             // The handler will then send out the message to all subscribers after appropriate filtering.\n             connection.onMessage(messageHandler);\n-            logger.atDebug().log(\"Connecting to AWS IoT Core\");\n+            logger.atInfo().log(\"Connecting to AWS IoT Core\");\n             return connection.connect().thenApply((sessionPresent) -> {\n                 currentlyConnected.set(true);\n-                logger.atDebug().kv(\"sessionPresent\", sessionPresent).log(\"Successfully connected to AWS IoT Core\");\n+                logger.atInfo().kv(\"sessionPresent\", sessionPresent).log(\"Successfully connected to AWS IoT Core\");\n \n                 if (!sessionPresent) {\n                     resubscribe();\n                 }\n                 return sessionPresent;\n+            }).whenComplete((session, error) -> {\n+                if (error != null) {\n+                    logger.atError().log(\"Unable to connect to AWS IoT Core\", error);\n+                    if (ProxyUtils.getProxyConfiguration() != null) {\n+                        logger.atInfo().log(\"You are using a proxy which uses a websocket connection and \"\n+                                + \"TokenExchangeService credentials. Verify that the IAM role which the IoT Role \"\n+                                + \"Alias is aliasing has a policy which allows for iot:Connect, iot:Subscribe, \"\n+                                + \"iot:Publish, iot:Receive, iot:GetThingShadow, and iot:UpdateThingShadow.\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2NTE3OA=="}, "originalCommit": {"oid": "fe01e3cfa0105cabc2f977cf8d804b2c7965abde"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2ODcyMA==", "bodyText": "We probably don't need them. They look like for HTTP.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/540#discussion_r506768720", "createdAt": "2020-10-17T00:10:07Z", "author": {"login": "fengwang666"}, "path": "src/main/java/com/aws/greengrass/mqttclient/AwsIotMqttClient.java", "diffHunk": "@@ -150,25 +146,32 @@ void reconnect() throws TimeoutException, ExecutionException, InterruptedExcepti\n         // Always use the builder provider here so that the builder is updated with whatever\n         // the latest device config is\n         try (AwsIotMqttConnectionBuilder builder = builderProvider.get()) {\n-            if (credentialsProvider != null) {\n-                builder.withWebsocketCredentialsProvider(credentialsProvider);\n-            }\n             builder.withConnectionEventCallbacks(connectionEventCallback);\n             builder.withClientId(clientId);\n \n             connection = builder.build();\n             // Set message handler for this connection to be our global message handler in MqttClient.\n             // The handler will then send out the message to all subscribers after appropriate filtering.\n             connection.onMessage(messageHandler);\n-            logger.atDebug().log(\"Connecting to AWS IoT Core\");\n+            logger.atInfo().log(\"Connecting to AWS IoT Core\");\n             return connection.connect().thenApply((sessionPresent) -> {\n                 currentlyConnected.set(true);\n-                logger.atDebug().kv(\"sessionPresent\", sessionPresent).log(\"Successfully connected to AWS IoT Core\");\n+                logger.atInfo().kv(\"sessionPresent\", sessionPresent).log(\"Successfully connected to AWS IoT Core\");\n \n                 if (!sessionPresent) {\n                     resubscribe();\n                 }\n                 return sessionPresent;\n+            }).whenComplete((session, error) -> {\n+                if (error != null) {\n+                    logger.atError().log(\"Unable to connect to AWS IoT Core\", error);\n+                    if (ProxyUtils.getProxyConfiguration() != null) {\n+                        logger.atInfo().log(\"You are using a proxy which uses a websocket connection and \"\n+                                + \"TokenExchangeService credentials. Verify that the IAM role which the IoT Role \"\n+                                + \"Alias is aliasing has a policy which allows for iot:Connect, iot:Subscribe, \"\n+                                + \"iot:Publish, iot:Receive, iot:GetThingShadow, and iot:UpdateThingShadow.\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2NTE3OA=="}, "originalCommit": {"oid": "fe01e3cfa0105cabc2f977cf8d804b2c7965abde"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc3MDUzMg==", "bodyText": "Is there anyway that we can include the role alias name in this message?\nYou could make this message slightly clearer if you did:\n\nVerify that the IAM role configured for IoT Role Alias \"foo\" has a policy that allows iot:Connect, etc...\n\nAccording to the AWS docs - it is the dataplane REST API that uses iot:GetThingShadow and iot:UpdateThingShadow\nThey are not mentioned in the MQTT section because you can restrict access by the normal IoT publish and subscribe policy actions.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/540#discussion_r506770532", "createdAt": "2020-10-17T00:22:05Z", "author": {"login": "rbattle"}, "path": "src/main/java/com/aws/greengrass/mqttclient/AwsIotMqttClient.java", "diffHunk": "@@ -150,25 +146,32 @@ void reconnect() throws TimeoutException, ExecutionException, InterruptedExcepti\n         // Always use the builder provider here so that the builder is updated with whatever\n         // the latest device config is\n         try (AwsIotMqttConnectionBuilder builder = builderProvider.get()) {\n-            if (credentialsProvider != null) {\n-                builder.withWebsocketCredentialsProvider(credentialsProvider);\n-            }\n             builder.withConnectionEventCallbacks(connectionEventCallback);\n             builder.withClientId(clientId);\n \n             connection = builder.build();\n             // Set message handler for this connection to be our global message handler in MqttClient.\n             // The handler will then send out the message to all subscribers after appropriate filtering.\n             connection.onMessage(messageHandler);\n-            logger.atDebug().log(\"Connecting to AWS IoT Core\");\n+            logger.atInfo().log(\"Connecting to AWS IoT Core\");\n             return connection.connect().thenApply((sessionPresent) -> {\n                 currentlyConnected.set(true);\n-                logger.atDebug().kv(\"sessionPresent\", sessionPresent).log(\"Successfully connected to AWS IoT Core\");\n+                logger.atInfo().kv(\"sessionPresent\", sessionPresent).log(\"Successfully connected to AWS IoT Core\");\n \n                 if (!sessionPresent) {\n                     resubscribe();\n                 }\n                 return sessionPresent;\n+            }).whenComplete((session, error) -> {\n+                if (error != null) {\n+                    logger.atError().log(\"Unable to connect to AWS IoT Core\", error);\n+                    if (ProxyUtils.getProxyConfiguration() != null) {\n+                        logger.atInfo().log(\"You are using a proxy which uses a websocket connection and \"\n+                                + \"TokenExchangeService credentials. Verify that the IAM role which the IoT Role \"\n+                                + \"Alias is aliasing has a policy which allows for iot:Connect, iot:Subscribe, \"\n+                                + \"iot:Publish, iot:Receive, iot:GetThingShadow, and iot:UpdateThingShadow.\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2NTE3OA=="}, "originalCommit": {"oid": "fe01e3cfa0105cabc2f977cf8d804b2c7965abde"}, "originalPosition": 74}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 334, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}