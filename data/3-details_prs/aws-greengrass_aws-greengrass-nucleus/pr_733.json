{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5NjQ4NDY1", "number": 733, "title": "Move cert path, key path and root CA cert path config to system", "bodyText": "Issue #, if available:\nRecently we decided to move these settings to system so that they cannot be changed via deployments due to potential security implications\n1. re:Invent:\n  a. we will keep iotDataEndpoint. iotCredEndpoint, awsRegion in Nucleus configuration (device/cloud configurable), move \n  certificateFilePath, privateKeyPath, rootCaPath to system settings (local configurable)\n  b. Documentation on the risk of the incorrect configuration\n\nDescription of changes:\nWhy is this change necessary:\nHow was this change tested:\nAny additional information or context required to review the change:\nChecklist:\n\n Updated the README if applicable\n Updated or added new unit tests\n Updated or added new integration tests\n Updated or added new end-to-end tests\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-11-30T16:04:11Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/733", "merged": true, "mergeCommit": {"oid": "2d95cfedec5aef926424cf4f53c6187dbf8dabb0"}, "closed": true, "closedAt": "2020-12-01T01:06:01Z", "author": {"login": "shaguptashaikh"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhnoa5gFqTU0MTA1NjY2NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhvFgGgH2gAyNTI5NjQ4NDY1OmFlNTk3NmQ1NTI1MThhYzdiMmY1YjQyMzMyYzkwMDgxMTJlYjkwYzY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMDU2NjY0", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/733#pullrequestreview-541056664", "createdAt": "2020-11-30T16:07:11Z", "commit": {"oid": "d0e95a613bebc92ba15f96acba882f35c48e187c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNjowNzoxMVrOH8CIwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNjowNzoxMVrOH8CIwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjcxMTYxNg==", "bodyText": "setenv is not correct, these should be under system", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/733#discussion_r532711616", "createdAt": "2020-11-30T16:07:11Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/greengrass/deployment/DeviceConfiguration.java", "diffHunk": "@@ -316,15 +316,18 @@ public Topic getThingName() {\n     }\n \n     public Topic getCertificateFilePath() {\n-        return getTopic(DEVICE_PARAM_CERTIFICATE_FILE_PATH).dflt(\"\").addValidator(deTildeValidator);\n+        return kernel.getConfig().lookup(SETENV_CONFIG_NAMESPACE, DEVICE_PARAM_CERTIFICATE_FILE_PATH).dflt(\"\")\n+                .addValidator(deTildeValidator);\n     }\n \n     public Topic getPrivateKeyFilePath() {\n-        return getTopic(DEVICE_PARAM_PRIVATE_KEY_PATH).dflt(\"\").addValidator(deTildeValidator);\n+        return kernel.getConfig().lookup(SETENV_CONFIG_NAMESPACE, DEVICE_PARAM_PRIVATE_KEY_PATH).dflt(\"\")\n+                .addValidator(deTildeValidator);\n     }\n \n     public Topic getRootCAFilePath() {\n-        return getTopic(DEVICE_PARAM_ROOT_CA_PATH).dflt(\"\").addValidator(deTildeValidator);\n+        return kernel.getConfig().lookup(SETENV_CONFIG_NAMESPACE, DEVICE_PARAM_ROOT_CA_PATH).dflt(\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0e95a613bebc92ba15f96acba882f35c48e187c"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMDU3MzA1", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/733#pullrequestreview-541057305", "createdAt": "2020-11-30T16:07:52Z", "commit": {"oid": "d0e95a613bebc92ba15f96acba882f35c48e187c"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0e95a613bebc92ba15f96acba882f35c48e187c", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d0e95a613bebc92ba15f96acba882f35c48e187c", "committedDate": "2020-11-30T15:58:59Z", "message": "Move cert path, key path and root CA cert path config to system"}, "afterCommit": {"oid": "714b067cd3c2335fba81e2b19f993da4d52ca6ec", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/714b067cd3c2335fba81e2b19f993da4d52ca6ec", "committedDate": "2020-11-30T16:09:32Z", "message": "Move cert path, key path and root CA cert path config to system"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b38c3a3a60a2eb2719ce96068888b99176b30e1a", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/b38c3a3a60a2eb2719ce96068888b99176b30e1a", "committedDate": "2020-11-30T16:17:22Z", "message": "Move cert path, key path and root CA cert path config to system"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "714b067cd3c2335fba81e2b19f993da4d52ca6ec", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/714b067cd3c2335fba81e2b19f993da4d52ca6ec", "committedDate": "2020-11-30T16:09:32Z", "message": "Move cert path, key path and root CA cert path config to system"}, "afterCommit": {"oid": "b38c3a3a60a2eb2719ce96068888b99176b30e1a", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/b38c3a3a60a2eb2719ce96068888b99176b30e1a", "committedDate": "2020-11-30T16:17:22Z", "message": "Move cert path, key path and root CA cert path config to system"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2b3a3c3b8deb39a747395b1623cbf279b20e313", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/e2b3a3c3b8deb39a747395b1623cbf279b20e313", "committedDate": "2020-11-30T18:01:05Z", "message": "Merge branch 'master' into move-cert-key-config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMjE2MTc0", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/733#pullrequestreview-541216174", "createdAt": "2020-11-30T19:17:23Z", "commit": {"oid": "e2b3a3c3b8deb39a747395b1623cbf279b20e313"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMzgwNjky", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/733#pullrequestreview-541380692", "createdAt": "2020-11-30T23:38:08Z", "commit": {"oid": "e2b3a3c3b8deb39a747395b1623cbf279b20e313"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc7810984e33af84f81eec2a7ded638f26321aac", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/fc7810984e33af84f81eec2a7ded638f26321aac", "committedDate": "2020-11-30T23:43:23Z", "message": "Merge branch 'master' into move-cert-key-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae5976d552518ac7b2f5b42332c9008112eb90c6", "author": {"user": {"login": "shaguptashaikh", "name": "Shagupta Shaikh"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ae5976d552518ac7b2f5b42332c9008112eb90c6", "committedDate": "2020-12-01T00:48:17Z", "message": "Merge branch 'master' into move-cert-key-config"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2766, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}