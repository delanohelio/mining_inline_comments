{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4MTIwNjYx", "number": 336, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwMDoxMTowN1rOETC8aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxODowNDo1M1rOETybvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NDA2NjM1OnYy", "diffSide": "RIGHT", "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/BaseE2ETestCase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwMDoxMTowN1rOG4kCpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwMDo0MTo0OFrOG4kkOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk2Mzk0Mw==", "bodyText": "TODO?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/336#discussion_r461963943", "createdAt": "2020-07-29T00:11:07Z", "author": {"login": "MikeDombo"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/BaseE2ETestCase.java", "diffHunk": "@@ -249,12 +252,21 @@ protected static synchronized AWSEvergreen getFcsClient() {\n     @SuppressWarnings(\"PMD.LinguisticNaming\")\n     protected PublishConfigurationResult setAndPublishFleetConfiguration(SetConfigurationRequest setRequest) {\n         AWSEvergreen client = getFcsClient();\n+\n+        // update package name with random suffix to avoid conflict in cloud", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75eac9c39c4d677d4d208b5d45736ff2c4e9204a"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk3MjUzNw==", "bodyText": "It's not a TODO, it's modifying the setRequest", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/336#discussion_r461972537", "createdAt": "2020-07-29T00:41:48Z", "author": {"login": "ShirleyZheng92"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/BaseE2ETestCase.java", "diffHunk": "@@ -249,12 +252,21 @@ protected static synchronized AWSEvergreen getFcsClient() {\n     @SuppressWarnings(\"PMD.LinguisticNaming\")\n     protected PublishConfigurationResult setAndPublishFleetConfiguration(SetConfigurationRequest setRequest) {\n         AWSEvergreen client = getFcsClient();\n+\n+        // update package name with random suffix to avoid conflict in cloud", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk2Mzk0Mw=="}, "originalCommit": {"oid": "75eac9c39c4d677d4d208b5d45736ff2c4e9204a"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NDA3MDEwOnYy", "diffSide": "RIGHT", "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/deployment/DeploymentE2ETest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwMDoxMjo0MVrOG4kEvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwMDo0MjoxN1rOG4kkog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk2NDQ3Nw==", "bodyText": "why do we need a new test, don't we have this covered by other tests?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/336#discussion_r461964477", "createdAt": "2020-07-29T00:12:41Z", "author": {"login": "MikeDombo"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/deployment/DeploymentE2ETest.java", "diffHunk": "@@ -275,6 +274,58 @@ void GIVEN_some_running_services_WHEN_cancel_event_received_and_kernel_is_waitin\n         Slf4jLogAdapter.removeGlobalListener(logListener);\n     }\n \n+    @Timeout(value = 10, unit = TimeUnit.MINUTES)\n+    @Test\n+    void GIVEN_deployment_received_WHEN_skip_safety_check_THEN_safety_check_skipped() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75eac9c39c4d677d4d208b5d45736ff2c4e9204a"}, "originalPosition": 93}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk3MjY0Mg==", "bodyText": "the SKIP_SAFETY_CHECK is not tested in e2e test, therefore I add here", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/336#discussion_r461972642", "createdAt": "2020-07-29T00:42:17Z", "author": {"login": "ShirleyZheng92"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/deployment/DeploymentE2ETest.java", "diffHunk": "@@ -275,6 +274,58 @@ void GIVEN_some_running_services_WHEN_cancel_event_received_and_kernel_is_waitin\n         Slf4jLogAdapter.removeGlobalListener(logListener);\n     }\n \n+    @Timeout(value = 10, unit = TimeUnit.MINUTES)\n+    @Test\n+    void GIVEN_deployment_received_WHEN_skip_safety_check_THEN_safety_check_skipped() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk2NDQ3Nw=="}, "originalCommit": {"oid": "75eac9c39c4d677d4d208b5d45736ff2c4e9204a"}, "originalPosition": 93}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MTg0NzAxOnYy", "diffSide": "RIGHT", "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/BaseE2ETestCase.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxODowNDo1M1rOG5uHUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxOTowMTowMVrOG5v9SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE3NzU1Mg==", "bodyText": "This will only change the FCS endpoint to Gamma, the CMS endpoint seems to be coming from here https://github.com/aws/aws-greengrass-kernel/blob/master/src/main/java/com/aws/iot/evergreen/easysetup/DeviceProvisioningHelper.java#L74 We should be changing this as well,\nThis is the endpoint information I got from the cloud team today -\nFor ComponentManagementService:\nBeta: https://uqtyx1gsuk.execute-api.us-east-1.amazonaws.com/Beta\nGamma: https://nztb5z87k6.execute-api.us-east-1.amazonaws.com/Gamma", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/336#discussion_r463177552", "createdAt": "2020-07-30T18:04:53Z", "author": {"login": "shaguptashaikh"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/BaseE2ETestCase.java", "diffHunk": "@@ -69,8 +72,8 @@\n  */\n @ExtendWith(EGExtension.class)\n public class BaseE2ETestCase implements AutoCloseable {\n-    protected static final String FCS_BETA_ENDPOINT = \"https://aqzw8qdn5l.execute-api.us-east-1.amazonaws.com/Beta\";\n-    protected static final Region BETA_REGION = Region.US_EAST_1;\n+    protected static final String FCS_GAMMA_ENDPOINT = \"https://bp5p2uvbx6.execute-api.us-east-1.amazonaws.com/Gamma\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37a42fbe4dc5b4404a926d3fab1fcd54a7623638"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIwNzc1Mg==", "bodyText": "Tried the CMS Gamma endpoint and get InvalidInputException of \"Artifacts can't be empty\" . Need to follow up with cloud on that later. Let's keep the Beta CMS endpoint for now", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/336#discussion_r463207752", "createdAt": "2020-07-30T19:01:01Z", "author": {"login": "ShirleyZheng92"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/BaseE2ETestCase.java", "diffHunk": "@@ -69,8 +72,8 @@\n  */\n @ExtendWith(EGExtension.class)\n public class BaseE2ETestCase implements AutoCloseable {\n-    protected static final String FCS_BETA_ENDPOINT = \"https://aqzw8qdn5l.execute-api.us-east-1.amazonaws.com/Beta\";\n-    protected static final Region BETA_REGION = Region.US_EAST_1;\n+    protected static final String FCS_GAMMA_ENDPOINT = \"https://bp5p2uvbx6.execute-api.us-east-1.amazonaws.com/Gamma\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE3NzU1Mg=="}, "originalCommit": {"oid": "37a42fbe4dc5b4404a926d3fab1fcd54a7623638"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4471, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}