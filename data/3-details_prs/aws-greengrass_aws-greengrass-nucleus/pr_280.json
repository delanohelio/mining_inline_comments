{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzODU4NDIw", "number": 280, "title": "Porting to Windows", "bodyText": "Issue #, if available:\nDescription of changes:\nWhy is this change necessary:\nHow was this change tested:\nAny additional information or context required to review the change:\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-06-12T19:52:52Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280", "merged": true, "mergeCommit": {"oid": "2bfa7939dc43cfd58dc018ea3980369a176cc70c"}, "closed": true, "closedAt": "2020-07-09T00:47:36Z", "author": {"login": "MikeDombo"}, "timelineItems": {"totalCount": 63, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqqZMdABqjM0NDAwOTAwODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczDm6JAFqTQ0NTIwNzYxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5d732cd069e8e16606ba5d769bcab3e083cb96ff", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5d732cd069e8e16606ba5d769bcab3e083cb96ff", "committedDate": "2020-06-12T19:52:35Z", "message": "Try on Windows"}, "afterCommit": {"oid": "fd00283aba13138ed46315722ec06c02798ab37b", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/fd00283aba13138ed46315722ec06c02798ab37b", "committedDate": "2020-06-12T22:14:07Z", "message": "Try on Windows"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fd00283aba13138ed46315722ec06c02798ab37b", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/fd00283aba13138ed46315722ec06c02798ab37b", "committedDate": "2020-06-12T22:14:07Z", "message": "Try on Windows"}, "afterCommit": {"oid": "d4a0c210d9e8c8f05c55ee7b7cdf3f45520063a6", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d4a0c210d9e8c8f05c55ee7b7cdf3f45520063a6", "committedDate": "2020-06-12T22:32:05Z", "message": "Try on Windows"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4a0c210d9e8c8f05c55ee7b7cdf3f45520063a6", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d4a0c210d9e8c8f05c55ee7b7cdf3f45520063a6", "committedDate": "2020-06-12T22:32:05Z", "message": "Try on Windows"}, "afterCommit": {"oid": "0286d48605ca9c2a702e96ab526aa8f58ccc35b1", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0286d48605ca9c2a702e96ab526aa8f58ccc35b1", "committedDate": "2020-06-12T22:41:15Z", "message": "Try on Windows"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0286d48605ca9c2a702e96ab526aa8f58ccc35b1", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0286d48605ca9c2a702e96ab526aa8f58ccc35b1", "committedDate": "2020-06-12T22:41:15Z", "message": "Try on Windows"}, "afterCommit": {"oid": "6897cdc9f6ce82ca9cf22737820530eed97a8b8d", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/6897cdc9f6ce82ca9cf22737820530eed97a8b8d", "committedDate": "2020-06-12T22:46:15Z", "message": "Try on Windows"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6897cdc9f6ce82ca9cf22737820530eed97a8b8d", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/6897cdc9f6ce82ca9cf22737820530eed97a8b8d", "committedDate": "2020-06-12T22:46:15Z", "message": "Try on Windows"}, "afterCommit": {"oid": "0aaf95cefcb68ad79a620169c785e7ac74ff4f13", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0aaf95cefcb68ad79a620169c785e7ac74ff4f13", "committedDate": "2020-06-12T22:50:05Z", "message": "Try on Windows"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0aaf95cefcb68ad79a620169c785e7ac74ff4f13", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0aaf95cefcb68ad79a620169c785e7ac74ff4f13", "committedDate": "2020-06-12T22:50:05Z", "message": "Try on Windows"}, "afterCommit": {"oid": "146b16db7099cf14b92410ba2d8826c791832623", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/146b16db7099cf14b92410ba2d8826c791832623", "committedDate": "2020-06-12T22:53:12Z", "message": "Try on Windows"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cbba63e1aa45dc1a7cd44a3b07f62fcbadbaafa4", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/cbba63e1aa45dc1a7cd44a3b07f62fcbadbaafa4", "committedDate": "2020-06-13T06:45:35Z", "message": "Try more"}, "afterCommit": {"oid": "fa57bc2cf6447aea11f9b1f5f18d1e02eef0598f", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/fa57bc2cf6447aea11f9b1f5f18d1e02eef0598f", "committedDate": "2020-06-13T06:48:44Z", "message": "Try more"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwODgyNDc5", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#pullrequestreview-430882479", "createdAt": "2020-06-15T18:15:42Z", "commit": {"oid": "fa57bc2cf6447aea11f9b1f5f18d1e02eef0598f"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxODoxNTo0MlrOGj9X5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxODozNzozMFrOGj-GOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM1ODg4Ng==", "bodyText": "I also added this dependency to get around zeroturnaround library trying to load msvcr100.dll which is not on my fresh windows server 2019.\nmsvcr100.dll seems to be a dll for older Windows too.\nhttps://github.com/aws/aws-greengrass-kernel/blob/windows_experiment/pom.xml#L167", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r440358886", "createdAt": "2020-06-15T18:15:42Z", "author": {"login": "fufranci"}, "path": "pom.xml", "diffHunk": "@@ -137,7 +137,7 @@\n         <dependency>\n             <groupId>software.amazon.awssdk.iotdevicesdk</groupId>\n             <artifactId>aws-iot-device-sdk</artifactId>\n-            <version>1.1.1</version>\n+            <version>1.2.0</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa57bc2cf6447aea11f9b1f5f18d1e02eef0598f"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM2MDM3Ng==", "bodyText": "On Windows:\n$ echo hi\nhi\n$ echo \"hi\"\n\"hi\"\nSo it depends on the actual command line. We could remove the double quote from the command line. I think that would work for both Windows and Linux.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r440360376", "createdAt": "2020-06-15T18:18:23Z", "author": {"login": "fufranci"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/deployment/DeploymentTaskIntegrationTest.java", "diffHunk": "@@ -145,7 +147,12 @@ void GIVEN_sample_deployment_doc_WHEN_submitted_to_deployment_task_THEN_services\n         Consumer<EvergreenStructuredLogMessage> listener = m -> {\n             Map<String, String> contexts = m.getContexts();\n             String messageOnStdout = contexts.get(\"stdout\");\n-            if (messageOnStdout != null && listOfExpectedMessages.contains(messageOnStdout)) {\n+            if (messageOnStdout == null) {\n+                return;\n+            }\n+            // Windows has quotes in the echo, so strip them", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa57bc2cf6447aea11f9b1f5f18d1e02eef0598f"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM2MjA1MQ==", "bodyText": "the cmd command \"cd\" without any argument would also return the current directory.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r440362051", "createdAt": "2020-06-15T18:21:26Z", "author": {"login": "fufranci"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/util/ExecTest.java", "diffHunk": "@@ -79,57 +79,61 @@ void GIVEN_exec_WHEN_command_outputs_THEN_output_captured() throws InterruptedEx\n         String command = \"echo \" + expectedOutput;\n         StringBuilder stdout = new StringBuilder();\n         StringBuilder stderr = new StringBuilder();\n-        Consumer<CharSequence> stdoutConsumer = c -> stdout.append(c);\n-        Consumer<CharSequence> stderrConsumer = c -> stderr.append(c);\n-        exec = exec.withShell(command).withOut(stdoutConsumer).withErr(stderrConsumer);\n+        Consumer<CharSequence> stdoutConsumer = stdout::append;\n+        Consumer<CharSequence> stderrConsumer = stderr::append;\n+        exec.withShell(command).withOut(stdoutConsumer).withErr(stderrConsumer);\n         assertTrue(exec.successful(false));\n         // new line for shell\n-        assertEquals(expectedOutput.length() + 1, stdout.length());\n+        assertEquals(expectedOutput.length() + System.lineSeparator().length(), stdout.length());\n         assertEquals(0, stderr.length());\n \n         // reinit consumers\n         stdout.setLength(0);\n         stderr.setLength(0);\n \n         String stdErrCommand = command + \" 1>&2\";\n-        exec = exec.withShell(stdErrCommand);\n+        exec.withShell(stdErrCommand);\n         assertFalse(exec.successful(false));\n         assertEquals(0, stdout.length());\n-        // new line for shell\n-        assertEquals(expectedOutput.length() + 1, stderr.length());\n+        // new line for shell and 1 more for windows because it actually includes the trailing space before the 1>&2\n+        assertEquals(expectedOutput.length() + System.lineSeparator().length() + (Exec.isWindows ? 1 : 0),\n+                stderr.length());\n         exec.close();\n     }\n \n     @Test\n     @SuppressWarnings(\"PMD.CloseResource\")\n     void GIVEN_exec_WHEN_changing_directories_THEN_success() throws InterruptedException, IOException {\n         Exec exec = new Exec();\n-        final String getWorkingDirCmd = \"pwd\";\n+        String getWorkingDirCmd = \"pwd\";\n+        if (Exec.isWindows) {\n+            getWorkingDirCmd = \"echo %cd%\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa57bc2cf6447aea11f9b1f5f18d1e02eef0598f"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM2NjY0NQ==", "bodyText": "I was looking at:\nFileAttribute\nFileAttributeView\nsetAttribute\nto see if we can add a method in the Platform interface that returns a FileAttribute object.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r440366645", "createdAt": "2020-06-15T18:29:59Z", "author": {"login": "fufranci"}, "path": "src/main/java/com/aws/iot/evergreen/kernel/KernelCommandLine.java", "diffHunk": "@@ -157,7 +157,9 @@ public void installCliTool(URL resource) {\n             try (InputStream is = resource.openStream()) {\n                 Files.copy(is, dest, StandardCopyOption.REPLACE_EXISTING);\n             }\n-            Files.setPosixFilePermissions(dest, PosixFilePermissions.fromString(\"r-xr-x---\"));\n+            if (!Exec.isWindows) {\n+                Files.setPosixFilePermissions(dest, PosixFilePermissions.fromString(\"r-xr-x---\"));\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa57bc2cf6447aea11f9b1f5f18d1e02eef0598f"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM2Nzk2OQ==", "bodyText": "We could add a method that returns FileAttribute in the Platform interface.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r440367969", "createdAt": "2020-06-15T18:32:25Z", "author": {"login": "fufranci"}, "path": "src/main/java/com/aws/iot/evergreen/util/Utils.java", "diffHunk": "@@ -567,10 +567,14 @@ public static long parseLong(CharBuffer str, int radix) {\n      */\n     public static void createPaths(Path... paths) throws IOException {\n         for (Path p: paths) {\n-            // This only supports POSIX compliant file permission right now. We will need to\n-            // change this when trying to support Evergreen in Non-POSIX OS.\n-            Files.createDirectories(p,\n-                    PosixFilePermissions.asFileAttribute(PosixFilePermissions.fromString(\"rwx------\")));\n+            if (Exec.isWindows) {\n+                Files.createDirectories(p);\n+            } else {\n+                // This only supports POSIX compliant file permission right now. We will need to\n+                // change this when trying to support Evergreen in Non-POSIX OS.\n+                Files.createDirectories(p,\n+                        PosixFilePermissions.asFileAttribute(PosixFilePermissions.fromString(\"rwx------\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa57bc2cf6447aea11f9b1f5f18d1e02eef0598f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM2OTc5OA==", "bodyText": "I remember I saw these errors too. I think it was caused by too many errors (not failures) in the tests. If you have fixed the unit tests, you may not need this anymore.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r440369798", "createdAt": "2020-06-15T18:35:40Z", "author": {"login": "fufranci"}, "path": "src/test/java/com/aws/iot/evergreen/deployment/DeploymentTaskTest.java", "diffHunk": "@@ -39,13 +39,13 @@\n \n @ExtendWith({MockitoExtension.class, EGExtension.class})\n class DeploymentTaskTest {\n-    @Mock\n+    @Mock(lenient = true)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa57bc2cf6447aea11f9b1f5f18d1e02eef0598f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM3MDc0Nw==", "bodyText": "Would java.nio.file.PathMatcher help here?  It may make building the expectation easier.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r440370747", "createdAt": "2020-06-15T18:37:30Z", "author": {"login": "fufranci"}, "path": "src/test/java/com/aws/iot/evergreen/kernel/KernelCommandLineTest.java", "diffHunk": "@@ -107,11 +112,15 @@ void GIVEN_kernel_WHEN_deTilde_THEN_proper_path_is_returned() {\n \n         KernelCommandLine kcl = new KernelCommandLine(mockKernel);\n \n-        assertThat(kcl.deTilde(\"~/test\"), containsString(System.getProperty(\"user.name\")+ \"/test\"));\n-        assertThat(kcl.deTilde(\"~bin/test\"), is(tempRootDir.toString()+ \"/bin/test\"));\n-        assertThat(kcl.deTilde(\"~config/test\"), is(tempRootDir.toString()+ \"/config/test\"));\n-        assertThat(kcl.deTilde(\"~packages/test\"), is(tempRootDir.toString()+ \"/packages/test\"));\n-        assertThat(kcl.deTilde(\"~root/test\"), is(tempRootDir.toString()+ \"/root/test\"));\n+        assertThat(kcl.deTilde(\"~/test\"), containsString(System.getProperty(\"user.home\") + File.separator + \"test\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa57bc2cf6447aea11f9b1f5f18d1e02eef0598f"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxOTExMjIz", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#pullrequestreview-431911223", "createdAt": "2020-06-16T21:38:59Z", "commit": {"oid": "045eb74aff4b09beaa76dd133c4757384ed40e8f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMTozODo1OVrOGkuHIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMTozODo1OVrOGkuHIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE1NzQxMQ==", "bodyText": "Why scope to test? Don't we always want this?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r441157411", "createdAt": "2020-06-16T21:38:59Z", "author": {"login": "MikeDombo"}, "path": "pom.xml", "diffHunk": "@@ -163,6 +163,12 @@\n             <version>0.0.3</version>\n             <scope>test</scope>\n         </dependency>\n+        <dependency>\n+            <groupId>net.java.dev.jna</groupId>\n+            <artifactId>jna</artifactId>\n+            <version>5.5.0</version>\n+            <scope>test</scope>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "045eb74aff4b09beaa76dd133c4757384ed40e8f"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "905731cbacec760d441287186fc89f48a2259402", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/905731cbacec760d441287186fc89f48a2259402", "committedDate": "2020-06-18T18:08:27Z", "message": "Update maven.yml"}, "afterCommit": {"oid": "fcf27b87dd6e4f4cec5e4efcd5e13ff8f60d8e9f", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/fcf27b87dd6e4f4cec5e4efcd5e13ff8f60d8e9f", "committedDate": "2020-06-18T18:11:53Z", "message": "Update maven.yml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0MjE4MDY5", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#pullrequestreview-434218069", "createdAt": "2020-06-19T16:50:52Z", "commit": {"oid": "2f25d5b21ff14737ca0c506e31b590122ceb29ea"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNjo1MDo1M1rOGmbWbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNjo1MDo1M1rOGmbWbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjk0NzE4Mw==", "bodyText": "Serialized listener processor is the main thread in Context. Technically it shouldn't continue running after the test as the test should have closed any Context that it opens.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r442947183", "createdAt": "2020-06-19T16:50:53Z", "author": {"login": "MikeDombo"}, "path": "src/test/java/com/aws/iot/evergreen/testcommons/testutilities/ThreadProtector.java", "diffHunk": "@@ -17,7 +17,14 @@\n \n @SuppressWarnings(\"PMD.SystemPrintln\")\n public class ThreadProtector implements AfterAllCallback {\n-    private static final Set<String> ALLOWED_THREAD_NAMES = new HashSet<>(Arrays.asList(\"main\", \"Monitor Ctrl-Break\"));\n+    private static final Set<String> ALLOWED_THREAD_NAMES = new HashSet<>(Arrays.asList(\n+            \"main\",\n+            \"Monitor Ctrl-Break\",\n+            \"surefire-forkedjvm-command-thread\",\n+            \"junit-jupiter-timeout-watcher\",\n+            \"Serialized listener processor\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f25d5b21ff14737ca0c506e31b590122ceb29ea"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0Mzc1NzUy", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#pullrequestreview-434375752", "createdAt": "2020-06-19T23:08:11Z", "commit": {"oid": "4b336b4eabab33c35df8862f57960521f28590fc"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQyMzowODoxMlrOGmjExQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQyMzoxNjoyMFrOGmjJdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzA3MzczMw==", "bodyText": "this we can do on both OS. Or if you want to just do linux, then you can remove the matrix.os in the name below", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r443073733", "createdAt": "2020-06-19T23:08:12Z", "author": {"login": "MikeDombo"}, "path": ".github/workflows/maven.yml", "diffHunk": "@@ -26,22 +30,29 @@ jobs:\n         continue-on-error: true\n       - name: Build with Maven\n         run: mvn -ntp -U clean verify\n+        shell: cmd\n+        if: matrix.os == 'Windows'\n+      - name: Build with Maven\n+        run: mvn -ntp -U clean verify\n+        if: matrix.os != 'Windows'\n       - name: Upload Failed Test Report\n         uses: actions/upload-artifact@v1.0.0\n         if: failure()\n         with:\n-          name: Failed Test Report\n+          name: Failed Test Report ${{ matrix.os }}\n           path: target/surefire-reports\n       - name: Upload Coverage\n         uses: actions/upload-artifact@v1.0.0\n-        if: always()\n+        if: matrix.os == 'Linux'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b336b4eabab33c35df8862f57960521f28590fc"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzA3MzgyMA==", "bodyText": "We don't really need to build the benchmark on both systems. We're just proving that it compiles, and it won't compile any different on either OS. You can scope this down to just linux.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r443073820", "createdAt": "2020-06-19T23:08:54Z", "author": {"login": "MikeDombo"}, "path": ".github/workflows/maven.yml", "diffHunk": "@@ -60,9 +71,23 @@ jobs:\n           show_class_names: true\n       - name: Build benchmark with Maven\n         # Changes can break the benchmark, so compile it now to make sure it is buildable\n-        run: mvn -ntp install -DskipTests && mvn -ntp -f src/test/evergreen-kernel-benchmark install\n+        run: |\n+          mvn -ntp install -DskipTests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b336b4eabab33c35df8862f57960521f28590fc"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzA3NDAyNA==", "bodyText": "I think we need to update the other workflow files too to tell them to just run on linux, otherwise GitHub actions could pick our windows machine instead and they'll fail.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r443074024", "createdAt": "2020-06-19T23:10:26Z", "author": {"login": "MikeDombo"}, "path": ".github/workflows/maven.yml", "diffHunk": "@@ -92,11 +117,11 @@ jobs:\n         uses: actions/upload-artifact@v1.0.0\n         if: failure()\n         with:\n-          name: Failed E2E Report\n+          name: Failed E2E Report ${{ matrix.os }}\n           path: target/surefire-reports\n   publish:\n     needs: build\n-    runs-on: self-hosted\n+    runs-on: [self-hosted, Linux]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b336b4eabab33c35df8862f57960521f28590fc"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzA3NDEwMw==", "bodyText": "can we bring this back up, or did we really lose coverage?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r443074103", "createdAt": "2020-06-19T23:11:02Z", "author": {"login": "MikeDombo"}, "path": "pom.xml", "diffHunk": "@@ -422,7 +431,7 @@\n                                         <limit>\n                                             <counter>INSTRUCTION</counter>\n                                             <value>COVEREDRATIO</value>\n-                                            <minimum>0.81</minimum>\n+                                            <minimum>0.79</minimum>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b336b4eabab33c35df8862f57960521f28590fc"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzA3NDkzMg==", "bodyText": "I don't think we should ignore this exception. We need to fix whatever the cause is.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r443074932", "createdAt": "2020-06-19T23:16:20Z", "author": {"login": "MikeDombo"}, "path": "src/test/java/com/aws/iot/evergreen/testcommons/testutilities/ExceptionLogProtector.java", "diffHunk": "@@ -129,6 +131,9 @@ public void beforeEach(ExtensionContext context) throws Exception {\n         ignoreExceptionWithMessage(context, \"Unable to load region information from any provider in the chain\");\n         ignoreExceptionWithMessageSubstring(context, \"Failed to connect to service endpoint:\");\n         ignoreExceptionWithMessageSubstring(context, \"Forbidden (Service: null; Status Code: 403;\");\n+\n+        ignoreExceptionOfType(context, RejectedExecutionException.class);\n+        ignoreExceptionOfType(context, InvalidExitValueException.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b336b4eabab33c35df8862f57960521f28590fc"}, "originalPosition": 21}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ebce0f64a66f7829a6b2c133728c20ece157126e", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ebce0f64a66f7829a6b2c133728c20ece157126e", "committedDate": "2020-06-23T14:26:56Z", "message": "Ignore InvalidExitValueException if the process is not alive anymore"}, "afterCommit": {"oid": "d719126d63b0122e32e3208aeac0124b6ddb037f", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d719126d63b0122e32e3208aeac0124b6ddb037f", "committedDate": "2020-06-23T16:38:08Z", "message": "Ignore InvalidExitValueException if the process is not alive anymore"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d719126d63b0122e32e3208aeac0124b6ddb037f", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d719126d63b0122e32e3208aeac0124b6ddb037f", "committedDate": "2020-06-23T16:38:08Z", "message": "Ignore InvalidExitValueException if the process is not alive anymore"}, "afterCommit": {"oid": "a3e7c59bf899d864342ac93840d03df916956c81", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/a3e7c59bf899d864342ac93840d03df916956c81", "committedDate": "2020-06-29T21:40:55Z", "message": "Ignore InvalidExitValueException if the process is not alive anymore"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMjMwMjY5", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#pullrequestreview-440230269", "createdAt": "2020-06-30T17:20:01Z", "commit": {"oid": "4aa0d1227cd83bf21533f1c2490590aaece8d82e"}, "state": "DISMISSED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNzoyMDowMVrOGrGu8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNzozNjoxNFrOGrHaJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg1MjI3NQ==", "bodyText": "It's great to check this in so that people work on this repo has same formatter...\nnit: Is this for intellij? If so let's rename the file name to indicate that so that other IDE users are clear :)", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r447852275", "createdAt": "2020-06-30T17:20:01Z", "author": {"login": "leaf94"}, "path": "codestyle/Evergreen.xml", "diffHunk": "@@ -0,0 +1,64 @@\n+<code_scheme name=\"Evergreen\" version=\"173\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4aa0d1227cd83bf21533f1c2490590aaece8d82e"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg1MjU0OA==", "bodyText": "nice!", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r447852548", "createdAt": "2020-06-30T17:20:28Z", "author": {"login": "leaf94"}, "path": "pom.xml", "diffHunk": "@@ -152,6 +152,15 @@\n             <artifactId>zt-process-killer</artifactId>\n             <version>1.10</version>\n         </dependency>\n+        <!-- zeroturnaround brings in an older version jna which tries to load msvcr100.dll. msvcr100.dll is not shipped\n+        with recent Windows/VC redist. The behavior is changed in recent jna release. By declaring direct dependency of\n+        jna, we avoid the problem of loading msvcr100.dll.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4aa0d1227cd83bf21533f1c2490590aaece8d82e"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg2MDI0Mw==", "bodyText": "nit - why >- vs |- ? Especially this is single line. Maybe just remove >- to avoid confusion that we need special handling for windows...\nAnd other places as well..", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r447860243", "createdAt": "2020-06-30T17:31:34Z", "author": {"login": "leaf94"}, "path": "src/integrationtests/resources/com/aws/iot/evergreen/integrationtests/deployment/long_running_services.yaml", "diffHunk": "@@ -2,26 +2,38 @@\n services:\n   sleeperB:\n     lifecycle:\n-      run: |-\n-        while true; do\n-        date; echo sleeperB_running; sleep 5\n-        done\n+      posix:\n+        run: |-\n+          while true; do\n+          date; echo sleeperB_running; sleep 5\n+          done\n+      windows:\n+        run: >-\n+          powershell -command \"& { while(1) { echo sleeperB_running; sleep 5 } }\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4aa0d1227cd83bf21533f1c2490590aaece8d82e"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg2MzMzNQ==", "bodyText": "Nice abstraction. Like it a lot.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r447863335", "createdAt": "2020-06-30T17:36:14Z", "author": {"login": "leaf94"}, "path": "src/main/java/com/aws/iot/evergreen/util/Exec.java", "diffHunk": "@@ -283,7 +286,7 @@ public Exec withExec(String... c) {\n     }\n \n     public Exec withShell(String s) {\n-        return withExec(\"sh\", \"-c\", s);\n+        return withExec(Platform.getInstance().getShellForCommand(s));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4aa0d1227cd83bf21533f1c2490590aaece8d82e"}, "originalPosition": 76}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMjU4MzQx", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#pullrequestreview-441258341", "createdAt": "2020-07-01T23:33:27Z", "commit": {"oid": "c7dea506fcb83b32c60607c902d036b37c4f3e83"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMjU4NDcw", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#pullrequestreview-441258470", "createdAt": "2020-07-01T23:33:50Z", "commit": {"oid": "c7dea506fcb83b32c60607c902d036b37c4f3e83"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52d61c335e6f0455fb944f0c6df84e3d21234a41", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/52d61c335e6f0455fb944f0c6df84e3d21234a41", "committedDate": "2020-07-02T04:30:50Z", "message": "Try on Windows"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28b6a0be0b7d5fa76b27434cd12812ca6d3fb218", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/28b6a0be0b7d5fa76b27434cd12812ca6d3fb218", "committedDate": "2020-07-02T04:30:50Z", "message": "Try on Windows"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e1128db046a5a03c6ba7daf41ee156f654acd70", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/2e1128db046a5a03c6ba7daf41ee156f654acd70", "committedDate": "2020-07-02T04:30:50Z", "message": "Add codestyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad84e155f0c196bb3b123d9494c4f8b535b3f8a9", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ad84e155f0c196bb3b123d9494c4f8b535b3f8a9", "committedDate": "2020-07-02T04:30:50Z", "message": "FIxing tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cee62e74279f620a35637cb41c743de47a977e0b", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/cee62e74279f620a35637cb41c743de47a977e0b", "committedDate": "2020-07-02T04:33:59Z", "message": "Test fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "940e33149911646547f3e8e640390ddd5120f38a", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/940e33149911646547f3e8e640390ddd5120f38a", "committedDate": "2020-07-02T04:34:08Z", "message": "Fix more tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ba3ccfaddf8cef8930dd43416d6d0125de82748", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/4ba3ccfaddf8cef8930dd43416d6d0125de82748", "committedDate": "2020-07-02T04:34:08Z", "message": "More test fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "001bd31fec9217175c64e9514df9fd2b7c2af1b3", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/001bd31fec9217175c64e9514df9fd2b7c2af1b3", "committedDate": "2020-07-02T04:34:08Z", "message": "More test fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22c50602fc53e8d7cb7caa0dd96de3b89f28646b", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/22c50602fc53e8d7cb7caa0dd96de3b89f28646b", "committedDate": "2020-07-02T04:34:08Z", "message": "All non-mocked, non-e2e tests passing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "206637dac4d3d9a03ff08b88749d6f3a0ba5eb76", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/206637dac4d3d9a03ff08b88749d6f3a0ba5eb76", "committedDate": "2020-07-02T04:37:11Z", "message": "All tests (non-e2e) passing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d37bf8628a730c87178b9d3628b752a333b1f72", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5d37bf8628a730c87178b9d3628b752a333b1f72", "committedDate": "2020-07-02T04:37:16Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ec3328a2385c95853f74d96aacddffaf3f97bbd", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0ec3328a2385c95853f74d96aacddffaf3f97bbd", "committedDate": "2020-07-02T04:37:16Z", "message": "FIx pmd"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ba6ac69faa89bc318c5a7710d0f2f793dda2768", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/9ba6ac69faa89bc318c5a7710d0f2f793dda2768", "committedDate": "2020-07-02T04:37:16Z", "message": "Fix error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5249a3a07119728cfdcd7eba22b0db1b33f75eff", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5249a3a07119728cfdcd7eba22b0db1b33f75eff", "committedDate": "2020-07-02T04:37:16Z", "message": "Try more"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3eda48542f2079a86fab7c2e46ba57d6c5d63f6b", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/3eda48542f2079a86fab7c2e46ba57d6c5d63f6b", "committedDate": "2020-07-02T04:37:16Z", "message": "Shutdown kernel lifecycle after each test\n\nIf we don't do that, there is a tlog file being kept open, resulting the temp dir can't be removed, causing test error."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ce2563b9d4637e385e969646039ff53586fee66", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/7ce2563b9d4637e385e969646039ff53586fee66", "committedDate": "2020-07-02T04:37:16Z", "message": "Declare direct dependency on a newer version of jna\n\nzeroturnaround brings in an older version jna which tries to load msvcr100.dll.\nmsvcr100.dll is not shipped with recent Windows/VC redist."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8489de10c5aa24e33f891e38f19ce9bca8c823a9", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/8489de10c5aa24e33f891e38f19ce9bca8c823a9", "committedDate": "2020-07-02T04:37:16Z", "message": "Update maven.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63ae0662329d67c6e2a61bdda7685cf70c594914", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/63ae0662329d67c6e2a61bdda7685cf70c594914", "committedDate": "2020-07-02T04:37:17Z", "message": "Fix flaky tests on t3a.medium EC2\n\n* Ignore couple exceptions in ExceptionLogProtector\n* Ran into NPE in ThreadProtector. Add potential fix\n* Test coverage drop to 0.79 on Windows."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ed6fadf552204a0b520abb432481589b99567e1", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/6ed6fadf552204a0b520abb432481589b99567e1", "committedDate": "2020-07-02T04:37:17Z", "message": "Update maven.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "697d526cb87507fb911ff857864e52f55eb50138", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/697d526cb87507fb911ff857864e52f55eb50138", "committedDate": "2020-07-02T04:37:17Z", "message": "Update maven.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccc7405b167eed768135e87dba39556f574f2209", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ccc7405b167eed768135e87dba39556f574f2209", "committedDate": "2020-07-02T04:37:17Z", "message": "Update maven.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5de8b3f0e0c4bdd295e57190b81e0806f581bb9c", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5de8b3f0e0c4bdd295e57190b81e0806f581bb9c", "committedDate": "2020-07-02T04:37:17Z", "message": "Update maven.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b2dc2341f529c7616719964acf574c4394aa721", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5b2dc2341f529c7616719964acf574c4394aa721", "committedDate": "2020-07-02T04:37:17Z", "message": "Update maven.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "372d8e2896e02f67c48e6c9fabff13f352511907", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/372d8e2896e02f67c48e6c9fabff13f352511907", "committedDate": "2020-07-02T04:37:17Z", "message": "Update maven.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba842339752ef515a947b24654c44979eecb9b53", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ba842339752ef515a947b24654c44979eecb9b53", "committedDate": "2020-07-02T04:37:17Z", "message": "Update maven.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d685b1777ed917e41d24789366fb949d04dbfda", "author": {"user": {"login": "MikeDombo", "name": "Michael Dombrowski"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5d685b1777ed917e41d24789366fb949d04dbfda", "committedDate": "2020-07-02T04:37:17Z", "message": "Update maven.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edb2974f16069abbc7b7093280ed1e050136da26", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/edb2974f16069abbc7b7093280ed1e050136da26", "committedDate": "2020-07-02T04:41:20Z", "message": "Increase timeout for some flaky tests when running on Windows\n\n* Also sleep a little bit in ThreadProtector if there is some active threads."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "776b0e160e85d7833191cbbab3bbe47a3e890cc9", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/776b0e160e85d7833191cbbab3bbe47a3e890cc9", "committedDate": "2020-07-02T04:41:26Z", "message": "Update maven.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89757d9888c3bc7f3841a020e0a8dfb4a93b811f", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/89757d9888c3bc7f3841a020e0a8dfb4a93b811f", "committedDate": "2020-07-02T04:41:26Z", "message": "Update maven.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87ae215d5b9c642c380ef7ba2446175a727d8131", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/87ae215d5b9c642c380ef7ba2446175a727d8131", "committedDate": "2020-07-02T04:41:26Z", "message": "Run e2e only on Linux for now"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31976d35574c0e32ea4c8002408970dc18c656d3", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/31976d35574c0e32ea4c8002408970dc18c656d3", "committedDate": "2020-07-02T04:43:13Z", "message": "Clean up\n\n* Remove lenient = true\n* Use Path.compareTo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d97aa0bc8468fc44453a2778e95b1077d65678b3", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d97aa0bc8468fc44453a2778e95b1077d65678b3", "committedDate": "2020-07-02T04:44:44Z", "message": "* Change more workflows to run on Linux only\n* Increase some timeouts to fix flakiness\n* Another attempt to fix NPE in ThreadProtector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ee3e94e4abcc4d35ea44b7791f0be2379d28749", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/3ee3e94e4abcc4d35ea44b7791f0be2379d28749", "committedDate": "2020-07-02T04:44:47Z", "message": "Ignore InvalidExitValueException if the process is not alive anymore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dc0a600722204f76061ca4e58d3d5ac22973435", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/8dc0a600722204f76061ca4e58d3d5ac22973435", "committedDate": "2020-07-02T04:45:50Z", "message": "Longer timeout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f92c023ecc67598a63e18042f370fdec44fe1a8", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/3f92c023ecc67598a63e18042f370fdec44fe1a8", "committedDate": "2020-07-02T04:45:54Z", "message": "longer timeouts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3651d2944a037dcbf540a034336e3302a44fc4a6", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/3651d2944a037dcbf540a034336e3302a44fc4a6", "committedDate": "2020-07-02T04:45:54Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dea1ea2ae85e85a8a89432aae71b7250ffda7c1d", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/dea1ea2ae85e85a8a89432aae71b7250ffda7c1d", "committedDate": "2020-07-02T04:46:46Z", "message": "rename code style file for Intellij\nFine adjust coverage limit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "662ebc6e28661c189a345ff04f80758255141f76", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/662ebc6e28661c189a345ff04f80758255141f76", "committedDate": "2020-07-02T05:36:25Z", "message": "* coverage adjustment\n* port new code - need to merge this quick!"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c7dea506fcb83b32c60607c902d036b37c4f3e83", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/c7dea506fcb83b32c60607c902d036b37c4f3e83", "committedDate": "2020-07-01T16:42:24Z", "message": "fix test"}, "afterCommit": {"oid": "662ebc6e28661c189a345ff04f80758255141f76", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/662ebc6e28661c189a345ff04f80758255141f76", "committedDate": "2020-07-02T05:36:25Z", "message": "* coverage adjustment\n* port new code - need to merge this quick!"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "165ada26ba9a5555df135372e32962f130137ca8", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/165ada26ba9a5555df135372e32962f130137ca8", "committedDate": "2020-07-02T17:00:14Z", "message": "Clean up e2e-test to run on Linux only (revert back to same as master)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxODkzMTk3", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#pullrequestreview-441893197", "createdAt": "2020-07-02T17:27:30Z", "commit": {"oid": "165ada26ba9a5555df135372e32962f130137ca8"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNzoyNzozMFrOGsXArg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNzoyOToxMFrOGsXD1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE2NzUzNA==", "bodyText": "Nit - Could add the os name in the step name, currently the workflow shows two steps for 'Build with maven'. Not a big deal though", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r449167534", "createdAt": "2020-07-02T17:27:30Z", "author": {"login": "shaguptashaikh"}, "path": ".github/workflows/maven.yml", "diffHunk": "@@ -26,22 +30,29 @@ jobs:\n         continue-on-error: true\n       - name: Build with Maven", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "165ada26ba9a5555df135372e32962f130137ca8"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE2ODM0MA==", "bodyText": "Can this be removed now? or will it be back after rebasing with Fahad's fix?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#discussion_r449168340", "createdAt": "2020-07-02T17:29:10Z", "author": {"login": "shaguptashaikh"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/kernel/ServiceDependencyLifecycleTest.java", "diffHunk": "@@ -52,6 +53,10 @@\n     private static final String SoftDependency = \"SoftDependency\";\n     private static final Logger logger = LogManager.getLogger(ServiceDependencyLifecycleTest.class);\n \n+    private static final int TEST_ROUTINE_SHORT_TIMEOUT = 15;\n+    private static final int TEST_ROUTINE_MEDIUM_TIMEOUT = 20;\n+    //private static final int TEST_ROUTINE_LONG_TIMEOUT = 30;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "165ada26ba9a5555df135372e32962f130137ca8"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxOTA5NDky", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#pullrequestreview-441909492", "createdAt": "2020-07-02T17:52:59Z", "commit": {"oid": "165ada26ba9a5555df135372e32962f130137ca8"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca43475704a41dc21efe0e68ee9ba55f43247434", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ca43475704a41dc21efe0e68ee9ba55f43247434", "committedDate": "2020-07-08T22:54:08Z", "message": "Merge remote-tracking branch 'origin/master' into windows"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9dab52b1bc887762484027a148f5668087708e4a", "author": {"user": {"login": "fufranci", "name": "Francis Fu"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/9dab52b1bc887762484027a148f5668087708e4a", "committedDate": "2020-07-08T23:52:42Z", "message": "Merge remote-tracking branch 'origin/master' into windows"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MjA0MDE0", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#pullrequestreview-445204014", "createdAt": "2020-07-08T23:56:46Z", "commit": {"oid": "9dab52b1bc887762484027a148f5668087708e4a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MjA3NjE1", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/280#pullrequestreview-445207615", "createdAt": "2020-07-09T00:08:26Z", "commit": {"oid": "9dab52b1bc887762484027a148f5668087708e4a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2814, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}