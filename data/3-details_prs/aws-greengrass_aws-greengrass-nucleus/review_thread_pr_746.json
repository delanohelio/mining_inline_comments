{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwNjg3NjM0", "number": 746, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNjowMzoyNlrOFAo_3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNjowMzo0OVrOFApAOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MjE2MDI4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/greengrass/easysetup/DeviceProvisioningHelper.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNjowMzoyNlrOH_CI8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNjo1MDowN1rOH_DLDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg1NzM5Mw==", "bodyText": "can you get the version from the config instead? That will help us in testing.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/746#discussion_r535857393", "createdAt": "2020-12-04T06:03:26Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/greengrass/easysetup/DeviceProvisioningHelper.java", "diffHunk": "@@ -472,7 +477,9 @@ public void createInitialDeploymentIfNeeded(ThingInfo thingInfo, String thingGro\n         }\n \n         deploymentRequest.components(Utils.immutableMap(GREENGRASS_CLI_COMPONENT_NAME,\n-                ComponentDeploymentSpecification.builder().componentVersion(GREENGRASS_CLI_COMPONENT_VERSION).build()));\n+                ComponentDeploymentSpecification.builder().componentVersion(GREENGRASS_CLI_COMPONENT_VERSION).build(),\n+                DeviceConfiguration.DEFAULT_NUCLEUS_COMPONENT_NAME,\n+                ComponentDeploymentSpecification.builder().componentVersion(KernelVersion.KERNEL_VERSION).build()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3dd287950a0a5eb275a43404e6f03612d82d0f0"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg1OTIyMQ==", "bodyText": "We don't use the deploy dev tools option for testing do we?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/746#discussion_r535859221", "createdAt": "2020-12-04T06:08:50Z", "author": {"login": "shaguptashaikh"}, "path": "src/main/java/com/aws/greengrass/easysetup/DeviceProvisioningHelper.java", "diffHunk": "@@ -472,7 +477,9 @@ public void createInitialDeploymentIfNeeded(ThingInfo thingInfo, String thingGro\n         }\n \n         deploymentRequest.components(Utils.immutableMap(GREENGRASS_CLI_COMPONENT_NAME,\n-                ComponentDeploymentSpecification.builder().componentVersion(GREENGRASS_CLI_COMPONENT_VERSION).build()));\n+                ComponentDeploymentSpecification.builder().componentVersion(GREENGRASS_CLI_COMPONENT_VERSION).build(),\n+                DeviceConfiguration.DEFAULT_NUCLEUS_COMPONENT_NAME,\n+                ComponentDeploymentSpecification.builder().componentVersion(KernelVersion.KERNEL_VERSION).build()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg1NzM5Mw=="}, "originalCommit": {"oid": "c3dd287950a0a5eb275a43404e6f03612d82d0f0"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg3NDMxNg==", "bodyText": "No, but we should at some point.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/746#discussion_r535874316", "createdAt": "2020-12-04T06:50:07Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/greengrass/easysetup/DeviceProvisioningHelper.java", "diffHunk": "@@ -472,7 +477,9 @@ public void createInitialDeploymentIfNeeded(ThingInfo thingInfo, String thingGro\n         }\n \n         deploymentRequest.components(Utils.immutableMap(GREENGRASS_CLI_COMPONENT_NAME,\n-                ComponentDeploymentSpecification.builder().componentVersion(GREENGRASS_CLI_COMPONENT_VERSION).build()));\n+                ComponentDeploymentSpecification.builder().componentVersion(GREENGRASS_CLI_COMPONENT_VERSION).build(),\n+                DeviceConfiguration.DEFAULT_NUCLEUS_COMPONENT_NAME,\n+                ComponentDeploymentSpecification.builder().componentVersion(KernelVersion.KERNEL_VERSION).build()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg1NzM5Mw=="}, "originalCommit": {"oid": "c3dd287950a0a5eb275a43404e6f03612d82d0f0"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MjE2MTIwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/aws/greengrass/easysetup/DeviceProvisioningHelper.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNjowMzo0OVrOH_CJcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNjo1MDoxN1rOH_DLRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg1NzUyMQ==", "bodyText": "take nucleus name from config", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/746#discussion_r535857521", "createdAt": "2020-12-04T06:03:49Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/greengrass/easysetup/DeviceProvisioningHelper.java", "diffHunk": "@@ -472,7 +477,9 @@ public void createInitialDeploymentIfNeeded(ThingInfo thingInfo, String thingGro\n         }\n \n         deploymentRequest.components(Utils.immutableMap(GREENGRASS_CLI_COMPONENT_NAME,\n-                ComponentDeploymentSpecification.builder().componentVersion(GREENGRASS_CLI_COMPONENT_VERSION).build()));\n+                ComponentDeploymentSpecification.builder().componentVersion(GREENGRASS_CLI_COMPONENT_VERSION).build(),\n+                DeviceConfiguration.DEFAULT_NUCLEUS_COMPONENT_NAME,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3dd287950a0a5eb275a43404e6f03612d82d0f0"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg1OTA3NQ==", "bodyText": "Taking nucleus name from config is not very helpful, if the current nucleus is a custom one and the dev tools deployment option is used along with it, this cli component will still bring the default nucleus so there will be conflict and it will fail anyway", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/746#discussion_r535859075", "createdAt": "2020-12-04T06:08:31Z", "author": {"login": "shaguptashaikh"}, "path": "src/main/java/com/aws/greengrass/easysetup/DeviceProvisioningHelper.java", "diffHunk": "@@ -472,7 +477,9 @@ public void createInitialDeploymentIfNeeded(ThingInfo thingInfo, String thingGro\n         }\n \n         deploymentRequest.components(Utils.immutableMap(GREENGRASS_CLI_COMPONENT_NAME,\n-                ComponentDeploymentSpecification.builder().componentVersion(GREENGRASS_CLI_COMPONENT_VERSION).build()));\n+                ComponentDeploymentSpecification.builder().componentVersion(GREENGRASS_CLI_COMPONENT_VERSION).build(),\n+                DeviceConfiguration.DEFAULT_NUCLEUS_COMPONENT_NAME,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg1NzUyMQ=="}, "originalCommit": {"oid": "c3dd287950a0a5eb275a43404e6f03612d82d0f0"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg3NDM3Mw==", "bodyText": "Yeah you're right", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/746#discussion_r535874373", "createdAt": "2020-12-04T06:50:17Z", "author": {"login": "MikeDombo"}, "path": "src/main/java/com/aws/greengrass/easysetup/DeviceProvisioningHelper.java", "diffHunk": "@@ -472,7 +477,9 @@ public void createInitialDeploymentIfNeeded(ThingInfo thingInfo, String thingGro\n         }\n \n         deploymentRequest.components(Utils.immutableMap(GREENGRASS_CLI_COMPONENT_NAME,\n-                ComponentDeploymentSpecification.builder().componentVersion(GREENGRASS_CLI_COMPONENT_VERSION).build()));\n+                ComponentDeploymentSpecification.builder().componentVersion(GREENGRASS_CLI_COMPONENT_VERSION).build(),\n+                DeviceConfiguration.DEFAULT_NUCLEUS_COMPONENT_NAME,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg1NzUyMQ=="}, "originalCommit": {"oid": "c3dd287950a0a5eb275a43404e6f03612d82d0f0"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 112, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}