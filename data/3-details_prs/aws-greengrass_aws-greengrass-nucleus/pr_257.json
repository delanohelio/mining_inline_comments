{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyMTk4NzA4", "number": 257, "title": "Integrate with Fleet Configuration Service", "bodyText": "Issue #, if available:\nDescription of changes:\n\nIntegrate with Fleet Configuration Service using Java SDK.\nConsolidated 1 happy case (removed 2 TCs with duplicate purposes)\nCleaned up Utils and added BaseE2ETestCase to manage common e2e resources\n\nTODO: E2E tests for integration with Component Management Service will be in a separate PR.\nWhy is this change necessary:\nHow was this change tested:\nAny additional information or context required to review the change:\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-05-23T02:06:34Z", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257", "merged": true, "mergeCommit": {"oid": "3708e5350dee9c70d6449aabd4e399c705d8ad4b"}, "closed": true, "closedAt": "2020-05-27T23:30:43Z", "author": {"login": "hui-yang"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcj9KakgBqjMzNjY1ODYxNDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclh45xAFqTQxOTY3OTAxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dc4246ee918e44370d9a6b669183746919e9ff0e", "author": {"user": {"login": "hui-yang", "name": "Hui Yang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/dc4246ee918e44370d9a6b669183746919e9ff0e", "committedDate": "2020-05-23T02:04:28Z", "message": "Integrate with Fleet Configuration Service"}, "afterCommit": {"oid": "d4e3b391328e56ff92e935ac8e1a73f0e22a39fa", "author": {"user": {"login": "hui-yang", "name": "Hui Yang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d4e3b391328e56ff92e935ac8e1a73f0e22a39fa", "committedDate": "2020-05-23T02:08:47Z", "message": "Integrate with Fleet Configuration Service"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4e3b391328e56ff92e935ac8e1a73f0e22a39fa", "author": {"user": {"login": "hui-yang", "name": "Hui Yang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d4e3b391328e56ff92e935ac8e1a73f0e22a39fa", "committedDate": "2020-05-23T02:08:47Z", "message": "Integrate with Fleet Configuration Service"}, "afterCommit": {"oid": "1348829f17a03d2a0b4a0e78cc6ed93cccd9a6c0", "author": {"user": {"login": "hui-yang", "name": "Hui Yang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/1348829f17a03d2a0b4a0e78cc6ed93cccd9a6c0", "committedDate": "2020-05-26T19:12:21Z", "message": "Integrate with Fleet Configuration Service"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NjcyNjQy", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257#pullrequestreview-418672642", "createdAt": "2020-05-26T20:56:05Z", "commit": {"oid": "1348829f17a03d2a0b4a0e78cc6ed93cccd9a6c0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMDo1NjowNVrOGawBAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMDo1NjowNVrOGawBAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcwMjg0OA==", "bodyText": "I wouldn't add this specifically; you should be able to use the default credential provider chain.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257#discussion_r430702848", "createdAt": "2020-05-26T20:56:05Z", "author": {"login": "MikeDombo"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/deployment/DeploymentCloudServiceIntegTest.java", "diffHunk": "@@ -59,45 +47,39 @@\n @Tag(\"E2E\")\n public class DeploymentCloudServiceIntegTest {\n \n-    private static final String CLOUD_SERVICE_URL = \"http://everg-everg-h5kz3uxz114v-1885244560.us-east-1.elb.amazonaws.com/deployments\";\n+    private static final String FCS_BETA_ENDPOINT = \"https://aqzw8qdn5l.execute-api.us-east-1.amazonaws.com/Beta\";\n+    private static final Region FCS_BETA_REGION = Region.US_EAST_1;\n+    private static final String THING_GROUP_TARGET_TYPE = \"thinggroup\";\n \n-    //TODO: after cloud service support creating deployments for things in custom accounts, remove the assume role.\n-    private static final String assumeRoleArn = \"arn:aws:iam::432173944312:role/EvergreenDeviceTestAssumeRole\";\n-    private static final String HTTP_HEADER_ETAG = \"x-amzn-iot-eg-etag\";\n     private final List<String> createdIotJobIdList = new ArrayList<>();\n     private Utils.ThingInfo thingInfo;\n-    private CreateThingGroupResponse thingGroupResp;\n+    private String thingGroupName;\n \n-    private final ObjectMapper mapper = new ObjectMapper();\n-    private final HttpClient client = HttpClients.createDefault();\n     private final Logger logger = LogManager.getLogger(this.getClass());\n     private Kernel kernel;\n \n+    private static AWSGreengrassFleetConfiguration fcsClient;\n     private static IotClient iotClient;\n \n     @TempDir\n     Path tempRootDir;\n \n     @BeforeAll\n-    @SuppressWarnings(\"PMD.CloseResource\")\n-    static void setIotClient() {\n-        StsClient stsClient = StsClient.builder().build();\n-\n-        AssumeRoleRequest roleRequest = AssumeRoleRequest.builder().roleArn(assumeRoleArn)\n-                .roleSessionName(UUID.randomUUID().toString()).build();\n-        AssumeRoleResponse roleResponse = stsClient.assumeRole(roleRequest);\n-        Credentials sessionCredentials = roleResponse.credentials();\n-\n-        AwsSessionCredentials awsCreds = AwsSessionCredentials\n-                .create(sessionCredentials.accessKeyId(), sessionCredentials.secretAccessKey(), sessionCredentials\n-                        .sessionToken());\n-\n-        iotClient = IotClient.builder().credentialsProvider(StaticCredentialsProvider.create(awsCreds))\n-                .region(Region.US_EAST_1).build();\n+    static void initClient() {\n+        iotClient = IotClient.builder().credentialsProvider(\n+                software.amazon.awssdk.auth.credentials.EnvironmentVariableCredentialsProvider.create())\n+                .region(FCS_BETA_REGION).build();\n+\n+        AwsClientBuilder.EndpointConfiguration endpointConfiguration = new AwsClientBuilder.EndpointConfiguration(\n+                FCS_BETA_ENDPOINT, FCS_BETA_REGION.toString());\n+        fcsClient = AWSGreengrassFleetConfigurationClientBuilder.standard()\n+                .withCredentials( new EnvironmentVariableCredentialsProvider())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1348829f17a03d2a0b4a0e78cc6ed93cccd9a6c0"}, "originalPosition": 115}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NjcyOTY4", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257#pullrequestreview-418672968", "createdAt": "2020-05-26T20:56:35Z", "commit": {"oid": "1348829f17a03d2a0b4a0e78cc6ed93cccd9a6c0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1348829f17a03d2a0b4a0e78cc6ed93cccd9a6c0", "author": {"user": {"login": "hui-yang", "name": "Hui Yang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/1348829f17a03d2a0b4a0e78cc6ed93cccd9a6c0", "committedDate": "2020-05-26T19:12:21Z", "message": "Integrate with Fleet Configuration Service"}, "afterCommit": {"oid": "25a1123fcaa990d12db1abdd7e0b25087136a7f6", "author": {"user": {"login": "hui-yang", "name": "Hui Yang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/25a1123fcaa990d12db1abdd7e0b25087136a7f6", "committedDate": "2020-05-26T21:00:06Z", "message": "Integrate with Fleet Configuration Service"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NzE0Mzcz", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257#pullrequestreview-418714373", "createdAt": "2020-05-26T22:10:48Z", "commit": {"oid": "25a1123fcaa990d12db1abdd7e0b25087136a7f6"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMjoxMDo0OVrOGayBmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMjoxODoyNlrOGayMqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDczNTc3MA==", "bodyText": "Can we update this to use the component management service in cloud, instead of local package store?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257#discussion_r430735770", "createdAt": "2020-05-26T22:10:49Z", "author": {"login": "abanthiy"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/deployment/DeploymentCloudServiceIntegTest.java", "diffHunk": "@@ -123,49 +100,43 @@ void GIVEN_blank_kernel_WHEN_create_deployment_on_thing_group_THEN_new_services_\n         FileUtils.copyFolderRecursively(localStoreContentPath, kernel.getPackageStorePath());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25a1123fcaa990d12db1abdd7e0b25087136a7f6"}, "originalPosition": 138}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDczNjIwMA==", "bodyText": "Might be good to extract this out into separate methods/helper", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257#discussion_r430736200", "createdAt": "2020-05-26T22:12:00Z", "author": {"login": "abanthiy"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/deployment/DeploymentCloudServiceIntegTest.java", "diffHunk": "@@ -123,49 +100,43 @@ void GIVEN_blank_kernel_WHEN_create_deployment_on_thing_group_THEN_new_services_\n         FileUtils.copyFolderRecursively(localStoreContentPath, kernel.getPackageStorePath());\n \n         thingInfo = Utils.createThing(iotClient);\n+        logger.atWarn().kv(\"thingName\", thingInfo.thingName).log();\n         Utils.updateKernelConfigWithIotConfiguration(kernel, thingInfo);\n \n         kernel.launch();\n \n         // Create thing group and deployment\n-        thingGroupResp = Utils.createThingGroupAndAddThing(iotClient, thingInfo);\n-        DeploymentDocument document = DeploymentDocument.builder().timestamp(System.currentTimeMillis())\n-                .deploymentId(UUID.randomUUID().toString()).rootPackages(Arrays.asList(\"CustomerApp\", \"SomeService\"))\n-                .deploymentPackageConfigurationList(Arrays\n-                        .asList(new DeploymentPackageConfiguration(\"CustomerApp\", \"1.0.0\", null), new DeploymentPackageConfiguration(\"SomeService\", \"1.0.0\", null)))\n-                .build();\n-\n-        String jobId1 = sendCreateDeploymentRequest(thingGroupResp.thingGroupArn(), document);\n+        thingGroupName = Utils.createThingGroupAndAddThing(iotClient, thingInfo).thingGroupName();\n+        logger.atWarn().kv(\"thingGroupName\", thingGroupName).log();\n+\n+        SetConfigurationRequest setRequest = new SetConfigurationRequest()\n+                .withTargetName(thingGroupName)\n+                .withTargetType(THING_GROUP_TARGET_TYPE)\n+                .withFailureHandlingPolicy(FailureHandlingPolicy.DO_NOTHING)\n+                .addPackagesEntry(\"CustomerApp\", new PackageMetaData().withRootComponent(true).withVersion(\"1.0.0\")\n+                        .withConfiguration(\"{\\\"sampleText\\\":\\\"FCS integ test\\\"}\"))\n+                .addPackagesEntry(\"SomeService\", new PackageMetaData().withRootComponent(true).withVersion(\"1.0.0\"));\n+        logger.atWarn().kv(\"setRequest\", setRequest).log();\n+        SetConfigurationResult setResult = fcsClient.setConfiguration(setRequest);\n+        logger.atWarn().kv(\"setResult\", setResult).log();\n+\n+        PublishConfigurationRequest publishRequest = new PublishConfigurationRequest()\n+                .withTargetName(thingGroupName)\n+                .withTargetType(THING_GROUP_TARGET_TYPE)\n+                .withRevisionId(setResult.getRevisionId());\n+        logger.atWarn().kv(\"publishRequest\", publishRequest).log();\n+        PublishConfigurationResult publishResult = fcsClient.publishConfiguration(publishRequest);\n+        logger.atWarn().kv(\"publishResult\", publishResult).log();\n+\n+        createdIotJobIdList.add(publishResult.getJobId());\n+        logger.atWarn().kv(\"iotJobId\", publishResult.getJobId()).log();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25a1123fcaa990d12db1abdd7e0b25087136a7f6"}, "originalPosition": 178}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDczODYwMA==", "bodyText": "Do you plan to replace tests in DeploymentE2ETest.java with communicating with cloud? Creating jobs for thing groups directly using IotJobs api isn't really our use case since jobs for Greengrass will be created on a different jobs topic which will be exposed only via cloud APIs.\nOther test cases are needed:\n\nMultiple jobs created\nError scenarios for bad deployment configuration (package not available in cloud)\nDifferent rollback policies\nSome of these are covered in DeploymentE2ETest", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257#discussion_r430738600", "createdAt": "2020-05-26T22:18:26Z", "author": {"login": "abanthiy"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/deployment/DeploymentCloudServiceIntegTest.java", "diffHunk": "@@ -107,13 +85,12 @@ void cleanUp() {\n             kernel.shutdown();\n         }\n         Utils.cleanThing(iotClient, thingInfo);\n-        Utils.cleanThingGroup(iotClient, thingGroupResp.thingGroupName());\n+        Utils.cleanThingGroup(iotClient, thingGroupName);\n         createdIotJobIdList.forEach(jobId -> Utils.cleanJob(iotClient, jobId));\n         createdIotJobIdList.clear();\n     }\n \n-    // TODO: Integrate with Fleet Configuration Service\n-//    @Test\n+    @Test\n     void GIVEN_blank_kernel_WHEN_create_deployment_on_thing_group_THEN_new_services_deployed_and_job_is_successful() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25a1123fcaa990d12db1abdd7e0b25087136a7f6"}, "originalPosition": 134}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NzYwNDYx", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257#pullrequestreview-418760461", "createdAt": "2020-05-27T00:12:17Z", "commit": {"oid": "25a1123fcaa990d12db1abdd7e0b25087136a7f6"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwMDoxMjoxN1rOGa0Z6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwMDoxMzoxMVrOGa0bDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc3NDc2Mg==", "bodyText": "NIT: info level log", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257#discussion_r430774762", "createdAt": "2020-05-27T00:12:17Z", "author": {"login": "ShirleyZheng92"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/deployment/DeploymentCloudServiceIntegTest.java", "diffHunk": "@@ -123,49 +100,43 @@ void GIVEN_blank_kernel_WHEN_create_deployment_on_thing_group_THEN_new_services_\n         FileUtils.copyFolderRecursively(localStoreContentPath, kernel.getPackageStorePath());\n \n         thingInfo = Utils.createThing(iotClient);\n+        logger.atWarn().kv(\"thingName\", thingInfo.thingName).log();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25a1123fcaa990d12db1abdd7e0b25087136a7f6"}, "originalPosition": 141}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc3NTA1Mg==", "bodyText": "Will targetType be an enum in SDK?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257#discussion_r430775052", "createdAt": "2020-05-27T00:13:11Z", "author": {"login": "ShirleyZheng92"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/deployment/DeploymentCloudServiceIntegTest.java", "diffHunk": "@@ -123,49 +100,43 @@ void GIVEN_blank_kernel_WHEN_create_deployment_on_thing_group_THEN_new_services_\n         FileUtils.copyFolderRecursively(localStoreContentPath, kernel.getPackageStorePath());\n \n         thingInfo = Utils.createThing(iotClient);\n+        logger.atWarn().kv(\"thingName\", thingInfo.thingName).log();\n         Utils.updateKernelConfigWithIotConfiguration(kernel, thingInfo);\n \n         kernel.launch();\n \n         // Create thing group and deployment\n-        thingGroupResp = Utils.createThingGroupAndAddThing(iotClient, thingInfo);\n-        DeploymentDocument document = DeploymentDocument.builder().timestamp(System.currentTimeMillis())\n-                .deploymentId(UUID.randomUUID().toString()).rootPackages(Arrays.asList(\"CustomerApp\", \"SomeService\"))\n-                .deploymentPackageConfigurationList(Arrays\n-                        .asList(new DeploymentPackageConfiguration(\"CustomerApp\", \"1.0.0\", null), new DeploymentPackageConfiguration(\"SomeService\", \"1.0.0\", null)))\n-                .build();\n-\n-        String jobId1 = sendCreateDeploymentRequest(thingGroupResp.thingGroupArn(), document);\n+        thingGroupName = Utils.createThingGroupAndAddThing(iotClient, thingInfo).thingGroupName();\n+        logger.atWarn().kv(\"thingGroupName\", thingGroupName).log();\n+\n+        SetConfigurationRequest setRequest = new SetConfigurationRequest()\n+                .withTargetName(thingGroupName)\n+                .withTargetType(THING_GROUP_TARGET_TYPE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25a1123fcaa990d12db1abdd7e0b25087136a7f6"}, "originalPosition": 160}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "25a1123fcaa990d12db1abdd7e0b25087136a7f6", "author": {"user": {"login": "hui-yang", "name": "Hui Yang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/25a1123fcaa990d12db1abdd7e0b25087136a7f6", "committedDate": "2020-05-26T21:00:06Z", "message": "Integrate with Fleet Configuration Service"}, "afterCommit": {"oid": "ecd3e523f22203200f4b553d6fa36929acd5a212", "author": {"user": {"login": "hui-yang", "name": "Hui Yang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ecd3e523f22203200f4b553d6fa36929acd5a212", "committedDate": "2020-05-27T19:25:04Z", "message": "Integrate with Fleet Configuration Service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5be06906268e6df9be361858eaa5b5e5760b56e6", "author": {"user": {"login": "hui-yang", "name": "Hui Yang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5be06906268e6df9be361858eaa5b5e5760b56e6", "committedDate": "2020-05-27T21:59:16Z", "message": "Integrate with Fleet Configuration Service"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ecd3e523f22203200f4b553d6fa36929acd5a212", "author": {"user": {"login": "hui-yang", "name": "Hui Yang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/ecd3e523f22203200f4b553d6fa36929acd5a212", "committedDate": "2020-05-27T19:25:04Z", "message": "Integrate with Fleet Configuration Service"}, "afterCommit": {"oid": "5be06906268e6df9be361858eaa5b5e5760b56e6", "author": {"user": {"login": "hui-yang", "name": "Hui Yang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5be06906268e6df9be361858eaa5b5e5760b56e6", "committedDate": "2020-05-27T21:59:16Z", "message": "Integrate with Fleet Configuration Service"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NjY3MTE3", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257#pullrequestreview-419667117", "createdAt": "2020-05-27T22:59:51Z", "commit": {"oid": "5be06906268e6df9be361858eaa5b5e5760b56e6"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMjo1OTo1MVrOGbgCSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMjo1OTo1MVrOGbgCSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ4OTYwOQ==", "bodyText": "nit: extra space before extends", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257#discussion_r431489609", "createdAt": "2020-05-27T22:59:51Z", "author": {"login": "MikeDombo"}, "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/deployment/MultipleDeploymentsTest.java", "diffHunk": "@@ -31,40 +30,27 @@\n import java.time.Duration;\n import java.util.Arrays;\n import java.util.HashMap;\n-import java.util.HashSet;\n import java.util.List;\n import java.util.Map;\n-import java.util.Set;\n import java.util.concurrent.TimeUnit;\n \n import static com.aws.iot.evergreen.deployment.DeploymentService.DEPLOYMENT_SERVICE_TOPICS;\n import static com.aws.iot.evergreen.deployment.DeploymentStatusKeeper.PERSISTED_DEPLOYMENT_STATUS_KEY_JOB_ID;\n import static com.aws.iot.evergreen.deployment.DeploymentStatusKeeper.PERSISTED_DEPLOYMENT_STATUS_KEY_JOB_STATUS;\n import static com.aws.iot.evergreen.deployment.DeploymentStatusKeeper.PROCESSED_DEPLOYMENTS_TOPICS;\n import static com.aws.iot.evergreen.kernel.EvergreenService.SERVICES_NAMESPACE_TOPIC;\n-import static org.junit.jupiter.api.Assertions.assertEquals;\n import static org.junit.jupiter.api.Assertions.assertTrue;\n \n @ExtendWith(EGExtension.class)\n @Tag(\"E2E\")\n-class MultipleDeploymentsTest {\n-    @TempDir\n-    Path tempRootDir;\n-\n+class MultipleDeploymentsTest  extends BaseE2ETestCase {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5be06906268e6df9be361858eaa5b5e5760b56e6"}, "originalPosition": 53}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1011249d20e2ae581dbb85b57265ea45958fa5c4", "author": {"user": {"login": "hui-yang", "name": "Hui Yang"}}, "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/1011249d20e2ae581dbb85b57265ea45958fa5c4", "committedDate": "2020-05-27T23:08:30Z", "message": "Address comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5Njc0Mzcz", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257#pullrequestreview-419674373", "createdAt": "2020-05-27T23:17:58Z", "commit": {"oid": "5be06906268e6df9be361858eaa5b5e5760b56e6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5Njc5MDE3", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/257#pullrequestreview-419679017", "createdAt": "2020-05-27T23:30:18Z", "commit": {"oid": "1011249d20e2ae581dbb85b57265ea45958fa5c4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2231, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}