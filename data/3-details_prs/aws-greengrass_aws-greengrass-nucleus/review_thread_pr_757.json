{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyODc2ODEz", "number": 757, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQwMzowNjozNVrOFBDwag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQwMzowNjozNVrOFBDwag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2NjU0NDQyOnYy", "diffSide": "LEFT", "path": "src/main/java/com/aws/greengrass/builtin/services/mqttproxy/MqttProxyIPCAgent.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQwMzowNjozNVrOH_o1Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNzo1OToxMVrOIAzUfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjQ5MTM1NQ==", "bodyText": "Can this happen today with java SDK? If yes, this is backward incompatible for beta customers.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/757#discussion_r536491355", "createdAt": "2020-12-05T03:06:35Z", "author": {"login": "prateek-y"}, "path": "src/main/java/com/aws/greengrass/builtin/services/mqttproxy/MqttProxyIPCAgent.java", "diffHunk": "@@ -200,7 +202,9 @@ private QualityOfService getQualityOfServiceFromQOS(QOS qos) {\n         } else if (qos == QOS.AT_MOST_ONCE) {\n             return QualityOfService.AT_MOST_ONCE;\n         }\n-        return QualityOfService.AT_LEAST_ONCE; //default value", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9d9a578b6bf2e80acd3c850a2f76869aa86ed90"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjQ5NjM0Mw==", "bodyText": "Yes I checked this can happen with java SDK. And this is backwards incompatible", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/757#discussion_r536496343", "createdAt": "2020-12-05T03:39:47Z", "author": {"login": "popanmol"}, "path": "src/main/java/com/aws/greengrass/builtin/services/mqttproxy/MqttProxyIPCAgent.java", "diffHunk": "@@ -200,7 +202,9 @@ private QualityOfService getQualityOfServiceFromQOS(QOS qos) {\n         } else if (qos == QOS.AT_MOST_ONCE) {\n             return QualityOfService.AT_MOST_ONCE;\n         }\n-        return QualityOfService.AT_LEAST_ONCE; //default value", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjQ5MTM1NQ=="}, "originalCommit": {"oid": "d9d9a578b6bf2e80acd3c850a2f76869aa86ed90"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzE5ODI1OA==", "bodyText": "My only concern would be if QoS was optional. It's not.\nhttps://code.amazon.com/packages/AwsIotGreengrassV2CoreIPCServiceModel/blobs/8ef0e9fc96f08712495c67aadb823ca4f936fc57/--/model/main.smithy#L471-L472\nThat said, it probably should be... do the SDKs enforce it? As a customer, I'd expect that it's optional and defaults to QoS 0.", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/757#discussion_r537198258", "createdAt": "2020-12-07T03:00:01Z", "author": {"login": "jbutler"}, "path": "src/main/java/com/aws/greengrass/builtin/services/mqttproxy/MqttProxyIPCAgent.java", "diffHunk": "@@ -200,7 +202,9 @@ private QualityOfService getQualityOfServiceFromQOS(QOS qos) {\n         } else if (qos == QOS.AT_MOST_ONCE) {\n             return QualityOfService.AT_MOST_ONCE;\n         }\n-        return QualityOfService.AT_LEAST_ONCE; //default value", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjQ5MTM1NQ=="}, "originalCommit": {"oid": "d9d9a578b6bf2e80acd3c850a2f76869aa86ed90"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzcxMTc0Mw==", "bodyText": "The SDKs don't enforce it in the sense that it's possible to send a request without setting the QoS and then the server would have to handle it. If we want to make it optional, we could distinguish between \"bad value\" and null - throw error for bad value and use QoS=0 in case of null. That sounds right?", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/757#discussion_r537711743", "createdAt": "2020-12-07T17:59:11Z", "author": {"login": "popanmol"}, "path": "src/main/java/com/aws/greengrass/builtin/services/mqttproxy/MqttProxyIPCAgent.java", "diffHunk": "@@ -200,7 +202,9 @@ private QualityOfService getQualityOfServiceFromQOS(QOS qos) {\n         } else if (qos == QOS.AT_MOST_ONCE) {\n             return QualityOfService.AT_MOST_ONCE;\n         }\n-        return QualityOfService.AT_LEAST_ONCE; //default value", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjQ5MTM1NQ=="}, "originalCommit": {"oid": "d9d9a578b6bf2e80acd3c850a2f76869aa86ed90"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 128, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}