{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxMjQwODAy", "number": 1445, "title": "Added links support to entity resource. ", "bodyText": "Resolves #282  (if appropriate)\nDescription\nThis PR enables the API response to have link attributes, which by default contain self and related. However, user can extend this functionality to implement their own logic to build links.\nHow Has This Been Tested?\nUnit test and IT.\nLicense\nI confirm that this contribution is made under an Apache 2.0 license and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-07-17T16:18:23Z", "url": "https://github.com/yahoo/elide/pull/1445", "merged": true, "mergeCommit": {"oid": "6ae9bd3623247f0da12c81798327abdb217c29ab"}, "closed": true, "closedAt": "2020-07-31T18:48:20Z", "author": {"login": "Chandrasekar-Rajasekar"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc14TYHgFqTQ1MDg3NTEzMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6Yz_eAFqTQ1OTM4Nzk4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwODc1MTMw", "url": "https://github.com/yahoo/elide/pull/1445#pullrequestreview-450875130", "createdAt": "2020-07-17T18:33:18Z", "commit": {"oid": "9493fd1840c56b071c010457867519b29781e7f0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxODozMzoxOFrOGzdNmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxODozOTo1MVrOGzdZpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjYwOTE3OA==", "bodyText": "Can we make an interface for this - and use that for ElideSettings?", "url": "https://github.com/yahoo/elide/pull/1445#discussion_r456609178", "createdAt": "2020-07-17T18:33:18Z", "author": {"login": "aklish"}, "path": "elide-core/src/main/java/com/yahoo/elide/core/DefaultJSONApiLinks.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright 2015, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.core;\n+\n+import com.google.common.collect.ImmutableMap;\n+\n+import java.util.Map;\n+\n+/***\n+ * Default API links populate provide 'self' and 'related' links.\n+ * To add custom links, Override `getResourceLevelLinks` and `getRelationshipLinks`.\n+ * Ad the subclass object in ElideAutoConfiguration.\n+ */\n+public class DefaultJSONApiLinks {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9493fd1840c56b071c010457867519b29781e7f0"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjYwOTI4Nw==", "bodyText": "Copyright dates are off.", "url": "https://github.com/yahoo/elide/pull/1445#discussion_r456609287", "createdAt": "2020-07-17T18:33:31Z", "author": {"login": "aklish"}, "path": "elide-core/src/main/java/com/yahoo/elide/core/DefaultJSONApiLinks.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright 2015, Yahoo Inc.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9493fd1840c56b071c010457867519b29781e7f0"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjYxMDY2Mw==", "bodyText": "We need an option to make an absolute URL with a hostname, port, etc (https://www.example.com).", "url": "https://github.com/yahoo/elide/pull/1445#discussion_r456610663", "createdAt": "2020-07-17T18:36:26Z", "author": {"login": "aklish"}, "path": "elide-core/src/main/java/com/yahoo/elide/core/DefaultJSONApiLinks.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright 2015, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.core;\n+\n+import com.google.common.collect.ImmutableMap;\n+\n+import java.util.Map;\n+\n+/***\n+ * Default API links populate provide 'self' and 'related' links.\n+ * To add custom links, Override `getResourceLevelLinks` and `getRelationshipLinks`.\n+ * Ad the subclass object in ElideAutoConfiguration.\n+ */\n+public class DefaultJSONApiLinks {\n+    /**\n+     * Links to be used in EntityProjection\n+     * @param resource\n+     * @return\n+     */\n+    public Map<String, String> getResourceLevelLinks(PersistentResource resource) {\n+        return ImmutableMap.of(\"self\", getResourceUrl(resource));\n+    }\n+\n+    /**\n+     * Links to be used in Relationships of EntityProjection\n+     * @param resource\n+     * @return\n+     */\n+    public Map<String, String> getRelationshipLinks(PersistentResource resource, String field) {\n+        String resourceUrl = getResourceUrl(resource);\n+        return ImmutableMap.of(\n+                \"self\", String.join(\"/\", resourceUrl, \"relationships\", field),\n+                \"related\", String.join(\"/\", resourceUrl, field));\n+    }\n+\n+    /**\n+     * Creates the link from resources path\n+     * @param resource\n+     * @return\n+     */\n+    protected String getResourceUrl(PersistentResource resource) {\n+        StringBuilder result = new StringBuilder();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9493fd1840c56b071c010457867519b29781e7f0"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjYxMjI2Mw==", "bodyText": "This should be disabled by default in Elide 4.  However, turn it on for testing so the tests below work.", "url": "https://github.com/yahoo/elide/pull/1445#discussion_r456612263", "createdAt": "2020-07-17T18:39:51Z", "author": {"login": "aklish"}, "path": "elide-spring/elide-spring-boot-autoconfigure/src/main/java/com/yahoo/elide/spring/config/ElideAutoConfiguration.java", "diffHunk": "@@ -53,6 +54,7 @@ public Elide initializeElide(EntityDictionary dictionary,\n                 .withEntityDictionary(dictionary)\n                 .withDefaultMaxPageSize(settings.getMaxPageSize())\n                 .withDefaultPageSize(settings.getPageSize())\n+                .withJSONApiLinks(new DefaultJSONApiLinks())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9493fd1840c56b071c010457867519b29781e7f0"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTkyOTc5", "url": "https://github.com/yahoo/elide/pull/1445#pullrequestreview-456992979", "createdAt": "2020-07-28T20:38:15Z", "commit": {"oid": "494853fb707b28583b7fa9588022737202fa8b85"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDozODoxNVrOG4d6iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDozODoxNVrOG4d6iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg2MzU2Mw==", "bodyText": "this.baseUrlEndPoint = outerRequestScope.baseUrlEndpoint", "url": "https://github.com/yahoo/elide/pull/1445#discussion_r461863563", "createdAt": "2020-07-28T20:38:15Z", "author": {"login": "aklish"}, "path": "elide-core/src/main/java/com/yahoo/elide/core/RequestScope.java", "diffHunk": "@@ -193,6 +204,7 @@ public RequestScope(String path,\n      */\n     protected RequestScope(String path, JsonApiDocument jsonApiDocument, RequestScope outerRequestScope) {\n         this.jsonApiDocument = jsonApiDocument;\n+        this.baseUrlEndPoint = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "494853fb707b28583b7fa9588022737202fa8b85"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4Nzk2MDI3", "url": "https://github.com/yahoo/elide/pull/1445#pullrequestreview-458796027", "createdAt": "2020-07-30T22:21:14Z", "commit": {"oid": "3efb740126da09e768982163622a0b7f02d751ad"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8925b1eb23acf80a7d680b225a9c73e41693d3c0", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/8925b1eb23acf80a7d680b225a9c73e41693d3c0", "committedDate": "2020-07-30T22:54:47Z", "message": "Added links support to entity resource. Links can be customized based on usecase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "542183136d5fb122249665321d78d50dde6fb527", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/542183136d5fb122249665321d78d50dde6fb527", "committedDate": "2020-07-30T22:54:47Z", "message": "remove commented code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf3cc34ada26cf188b8a03466d0f1c056453b7b1", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/bf3cc34ada26cf188b8a03466d0f1c056453b7b1", "committedDate": "2020-07-30T22:54:47Z", "message": "remove unused variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6dae1dd70513aaeb2f3986665ec93df44d035d3b", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/6dae1dd70513aaeb2f3986665ec93df44d035d3b", "committedDate": "2020-07-30T22:54:47Z", "message": "comments fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07fb4807160fb0a0d5581d9fa4970f5efac70617", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/07fb4807160fb0a0d5581d9fa4970f5efac70617", "committedDate": "2020-07-30T22:54:47Z", "message": "Use fully qualified URL in links"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1953caca7288cb260626dc9db29fd1b40652f57e", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/1953caca7288cb260626dc9db29fd1b40652f57e", "committedDate": "2020-07-30T22:54:47Z", "message": "remove unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80df92394161c14bdf277591468045bc533df5bb", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/80df92394161c14bdf277591468045bc533df5bb", "committedDate": "2020-07-30T22:54:47Z", "message": "include baseURL in all rest method for jsonApi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d792eb35323742608bdccf5bf0f56311c6893790", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/d792eb35323742608bdccf5bf0f56311c6893790", "committedDate": "2020-07-30T22:54:47Z", "message": "Added baseUrl support for GraphQl Request Scope"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a837aae944317cb7e80eb67c3e5a90dfd5f814e", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/9a837aae944317cb7e80eb67c3e5a90dfd5f814e", "committedDate": "2020-07-30T22:58:53Z", "message": "codacy fix"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3efb740126da09e768982163622a0b7f02d751ad", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/3efb740126da09e768982163622a0b7f02d751ad", "committedDate": "2020-07-30T01:05:06Z", "message": "Added baseUrl support for GraphQl Request Scope"}, "afterCommit": {"oid": "9a837aae944317cb7e80eb67c3e5a90dfd5f814e", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/9a837aae944317cb7e80eb67c3e5a90dfd5f814e", "committedDate": "2020-07-30T22:58:53Z", "message": "codacy fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eabbd91e71000c5b37c55526031c4f5112a75a17", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/eabbd91e71000c5b37c55526031c4f5112a75a17", "committedDate": "2020-07-30T23:29:21Z", "message": "typo fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae58ce35b3c42ceb2e603e94fc6f37cdd783a209", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/ae58ce35b3c42ceb2e603e94fc6f37cdd783a209", "committedDate": "2020-07-31T03:39:42Z", "message": "remove default scope attributes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MjA2Njk0", "url": "https://github.com/yahoo/elide/pull/1445#pullrequestreview-459206694", "createdAt": "2020-07-31T14:13:47Z", "commit": {"oid": "ae58ce35b3c42ceb2e603e94fc6f37cdd783a209"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f57ded01dd0f2bd84eb01c32aaa97ea7edcbbc6f", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/f57ded01dd0f2bd84eb01c32aaa97ea7edcbbc6f", "committedDate": "2020-07-31T16:37:32Z", "message": "unittest for JsonApiDSL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1f305b31fd3d6e62f0cc0184a6ab3db958a6612", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/e1f305b31fd3d6e62f0cc0184a6ab3db958a6612", "committedDate": "2020-07-31T17:11:26Z", "message": "add relation test on JSONDSL"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5Mzg3OTg2", "url": "https://github.com/yahoo/elide/pull/1445#pullrequestreview-459387986", "createdAt": "2020-07-31T18:48:12Z", "commit": {"oid": "e1f305b31fd3d6e62f0cc0184a6ab3db958a6612"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 894, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}