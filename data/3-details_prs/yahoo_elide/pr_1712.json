{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NzUwODA4", "number": 1712, "title": "Join Type support in aggregation store.", "bodyText": "Join Type support in aggregation store.\nHow Has This Been Tested?\nExisting tests pass.\nAdditional tests included.\nLicense\nI confirm that this contribution is made under an Apache 2.0 license and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-12-08T21:57:23Z", "url": "https://github.com/yahoo/elide/pull/1712", "merged": true, "mergeCommit": {"oid": "647b125f624a73e5d8acb7bc569017ccbba21e45"}, "closed": true, "closedAt": "2020-12-08T23:42:29Z", "author": {"login": "rishi-aga"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkRZTcAH2gAyNTM0NzUwODA4OjFjZWEzNDc0YTM5YTI3YjYxN2M3NWYzMjk1ZmVjNzhkODZhNmM1NTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkS8A0gFqTU0NzcyNjE0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1cea3474a39a27b617c75f3295fec78d86a6c557", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/1cea3474a39a27b617c75f3295fec78d86a6c557", "committedDate": "2020-12-08T21:54:32Z", "message": "Join Type support in aggregation store."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3Njc3OTc4", "url": "https://github.com/yahoo/elide/pull/1712#pullrequestreview-547677978", "createdAt": "2020-12-08T22:15:24Z", "commit": {"oid": "1cea3474a39a27b617c75f3295fec78d86a6c557"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMjoxNToyNFrOIB4rTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMjoxNToyNFrOIB4rTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODg0ODA3OQ==", "bodyText": "it will fail during service start if full join type is used for H2 database.", "url": "https://github.com/yahoo/elide/pull/1712#discussion_r538848079", "createdAt": "2020-12-08T22:15:24Z", "author": {"login": "rishi-aga"}, "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/queryengines/sql/dialects/impl/H2Dialect.java", "diffHunk": "@@ -20,4 +20,9 @@ public String getDialectType() {\n     public String generateOffsetLimitClause(int offset, int limit) {\n         return LIMIT + limit + SPACE + OFFSET + offset;\n     }\n+\n+    @Override\n+    public String getFullJoinKeyword() {\n+        throw new IllegalArgumentException(\"Full Join is not supported for: \" + getDialectType());\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cea3474a39a27b617c75f3295fec78d86a6c557"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3Njc5MTE2", "url": "https://github.com/yahoo/elide/pull/1712#pullrequestreview-547679116", "createdAt": "2020-12-08T22:17:01Z", "commit": {"oid": "1cea3474a39a27b617c75f3295fec78d86a6c557"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMjoxNzowMVrOIB4u-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMjoxNzowMVrOIB4u-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODg0OTAxNw==", "bodyText": "Removing unused files.", "url": "https://github.com/yahoo/elide/pull/1712#discussion_r538849017", "createdAt": "2020-12-08T22:17:01Z", "author": {"login": "rishi-aga"}, "path": "elide-datastore/elide-datastore-aggregation/src/test/resources/continent.csv", "diffHunk": "@@ -1,3 +0,0 @@\n-id,name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cea3474a39a27b617c75f3295fec78d86a6c557"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NjkzMTgw", "url": "https://github.com/yahoo/elide/pull/1712#pullrequestreview-547693180", "createdAt": "2020-12-08T22:40:27Z", "commit": {"oid": "1cea3474a39a27b617c75f3295fec78d86a6c557"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMjo0MDoyN1rOIB5iTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMjo0MDoyN1rOIB5iTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODg2MjE1Nw==", "bodyText": "Can we remove the TODOs above?", "url": "https://github.com/yahoo/elide/pull/1712#discussion_r538862157", "createdAt": "2020-12-08T22:40:27Z", "author": {"login": "aklish"}, "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/queryengines/sql/metadata/SQLReferenceTable.java", "diffHunk": "@@ -196,6 +197,17 @@ private String extractJoinClause(Class<?> fromClass,\n                 Join.class,\n                 joinField);\n \n+        String joinKeyword = join == null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cea3474a39a27b617c75f3295fec78d86a6c557"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f309ee3d4d2211dfb019263990de06e8b796d86c", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/f309ee3d4d2211dfb019263990de06e8b796d86c", "committedDate": "2020-12-08T23:09:39Z", "message": "Model Config validation changes to support Cross Join Type"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NzEwOTIy", "url": "https://github.com/yahoo/elide/pull/1712#pullrequestreview-547710922", "createdAt": "2020-12-08T23:13:10Z", "commit": {"oid": "f309ee3d4d2211dfb019263990de06e8b796d86c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMzoxMzoxMFrOIB6j9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMzoxMzoxMFrOIB6j9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODg3ODk2NQ==", "bodyText": "For cross join, definition is ignored if provided.", "url": "https://github.com/yahoo/elide/pull/1712#discussion_r538878965", "createdAt": "2020-12-08T23:13:10Z", "author": {"login": "rishi-aga"}, "path": "elide-model-config/src/main/java/com/yahoo/elide/modelconfig/validator/DynamicConfigValidator.java", "diffHunk": "@@ -689,15 +689,21 @@ private static void validateSql(String sqlDefinition) {\n      * Check if input join definition is valid.\n      */\n     private void validateJoin(Join join) {\n-        validateSql(join.getDefinition());\n-\n         String joinModelName = join.getTo();\n \n         if (!(elideTableConfig.hasTable(joinModelName) || staticModelDetails.exists(joinModelName, NO_VERSION))) {\n             throw new IllegalStateException(\n                             \"Model: \" + joinModelName + \" is neither included in dynamic models nor in static models\");\n         }\n \n+        if (join.getType() == Join.Type.CROSS) {\n+            return; // Join's definition validation not required.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f309ee3d4d2211dfb019263990de06e8b796d86c"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NzI2MTQ3", "url": "https://github.com/yahoo/elide/pull/1712#pullrequestreview-547726147", "createdAt": "2020-12-08T23:42:21Z", "commit": {"oid": "f309ee3d4d2211dfb019263990de06e8b796d86c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 710, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}