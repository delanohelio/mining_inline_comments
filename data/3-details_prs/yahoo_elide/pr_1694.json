{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3NTIyNDU3", "number": 1694, "title": "Add support for Join type.", "bodyText": "Add support for Join type.\n-- Rename existing type property to kind\n-- Add type property\nHow Has This Been Tested?\nExisting tests pass.\nScreenshots (if appropriate):\nLicense\nI confirm that this contribution is made under an Apache 2.0 license and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-11-25T15:23:20Z", "url": "https://github.com/yahoo/elide/pull/1694", "merged": true, "mergeCommit": {"oid": "7262282639a15e1d9fad5e3c686409f944f44dcc"}, "closed": true, "closedAt": "2020-12-01T19:14:43Z", "author": {"login": "rishi-aga"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgAI6mgBqjQwMzg2NjQ0MTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdh-6UagFqTU0MjIxNjI0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "246ec10a02a92d3d5447eaff27a5b5c8c59d05ce", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/246ec10a02a92d3d5447eaff27a5b5c8c59d05ce", "committedDate": "2020-11-25T15:22:19Z", "message": "Add support for Join type."}, "afterCommit": {"oid": "3b9dad9d37e9313e3c7a51080b5c6bb585c15380", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/3b9dad9d37e9313e3c7a51080b5c6bb585c15380", "committedDate": "2020-11-25T15:32:24Z", "message": "Add support for Join type."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6794561d34df8dbb7edc831d63ffc0cd0d9c6721", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/6794561d34df8dbb7edc831d63ffc0cd0d9c6721", "committedDate": "2020-11-25T15:39:16Z", "message": "Add support for Join type."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b9dad9d37e9313e3c7a51080b5c6bb585c15380", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/3b9dad9d37e9313e3c7a51080b5c6bb585c15380", "committedDate": "2020-11-25T15:32:24Z", "message": "Add support for Join type."}, "afterCommit": {"oid": "6794561d34df8dbb7edc831d63ffc0cd0d9c6721", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/6794561d34df8dbb7edc831d63ffc0cd0d9c6721", "committedDate": "2020-11-25T15:39:16Z", "message": "Add support for Join type."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NjY3NDQ4", "url": "https://github.com/yahoo/elide/pull/1694#pullrequestreview-538667448", "createdAt": "2020-11-25T16:27:24Z", "commit": {"oid": "6794561d34df8dbb7edc831d63ffc0cd0d9c6721"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNjoyNzoyNFrOH57KVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNjozNjoyNlrOH57hBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDUwMDE4MA==", "bodyText": "Let's use the enum here.", "url": "https://github.com/yahoo/elide/pull/1694#discussion_r530500180", "createdAt": "2020-11-25T16:27:24Z", "author": {"login": "aklish"}, "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/annotation/Join.java", "diffHunk": "@@ -21,4 +21,10 @@\n      * @return join constraint like <code>{{col1}} = {{joinField.col2}}</code>\n      */\n     String value();\n+\n+    /**\n+     * Join type.\n+     * @return join type like {@code left, right, inner, outer or cross}\n+     */\n+    String type() default \"left\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6794561d34df8dbb7edc831d63ffc0cd0d9c6721"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDUwNDMzOQ==", "bodyText": "I think we should have left, inner, full, and cross as the join types.", "url": "https://github.com/yahoo/elide/pull/1694#discussion_r530504339", "createdAt": "2020-11-25T16:33:50Z", "author": {"login": "aklish"}, "path": "elide-model-config/src/main/java/com/yahoo/elide/modelconfig/jsonformats/ElideJoinTypeFormatAttr.java", "diffHunk": "@@ -15,15 +15,16 @@\n /**\n  * Format specifier for {@code elideJoinType} format attribute.\n  * <p>\n- * This specifier will check if a string instance is one of {@code ToOne, ToMany}.\n+ * This specifier will check if a string instance is one of {@code left, right, inner, outer, cross}.\n  * </p>\n  */\n public class ElideJoinTypeFormatAttr extends AbstractFormatAttribute {\n-    private static final String JOIN_TYPE_REGEX = \"^(?i)(ToOne|ToMany)$\";\n+    private static final String JOIN_TYPE_REGEX = \"^(?i)(left|right|inner|outer|cross)$\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6794561d34df8dbb7edc831d63ffc0cd0d9c6721"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDUwNDc5Nw==", "bodyText": "See earlier comment about supported join types.", "url": "https://github.com/yahoo/elide/pull/1694#discussion_r530504797", "createdAt": "2020-11-25T16:34:33Z", "author": {"login": "aklish"}, "path": "elide-model-config/src/main/java/com/yahoo/elide/modelconfig/model/Join.java", "diffHunk": "@@ -39,16 +40,39 @@\n     @JsonProperty(\"type\")\n     private Join.Type type;\n \n+    @JsonProperty(\"kind\")\n+    private Join.Kind kind;\n+\n     @JsonProperty(\"definition\")\n     private String definition;\n \n-    public enum Type {\n+    public enum Kind {\n \n         TOONE(\"toOne\"),\n         TOMANY(\"toMany\");\n \n         private final String value;\n \n+        private Kind(String value) {\n+            this.value = value;\n+        }\n+\n+        @Override\n+        public String toString() {\n+            return this.value;\n+        }\n+    }\n+\n+    public enum Type {\n+\n+        LEFT(\"left\"),\n+        RIGHT(\"right\"),\n+        INNER(\"inner\"),\n+        OUTER(\"outer\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6794561d34df8dbb7edc831d63ffc0cd0d9c6721"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDUwNTA5NQ==", "bodyText": "Let's make this optional and default to toOne.", "url": "https://github.com/yahoo/elide/pull/1694#discussion_r530505095", "createdAt": "2020-11-25T16:35:02Z", "author": {"login": "aklish"}, "path": "elide-model-config/src/main/resources/elideTableSchema.json", "diffHunk": "@@ -33,7 +39,7 @@\n             \"required\": [\n                 \"name\",\n                 \"to\",\n-                \"type\",\n+                \"kind\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6794561d34df8dbb7edc831d63ffc0cd0d9c6721"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDUwNTk5MQ==", "bodyText": "What about SQL generation tests for these different joins.  Are there any dialect differences?", "url": "https://github.com/yahoo/elide/pull/1694#discussion_r530505991", "createdAt": "2020-11-25T16:36:26Z", "author": {"login": "aklish"}, "path": "elide-model-config/src/test/resources/validator/valid/models/tables/player_stats.hjson", "diffHunk": "@@ -23,13 +23,14 @@\n           {\n              name: playerCountry\n              to: Country\n-             type: toOnE\n+             kind: toOnE\n+             type: outeR\n              definition: '{{ playerCountry.id}} = {{country_id}}'\n           },\n           {\n              name: playerTeam\n              to: Team\n-             type: Tomany\n+             kind: Tomany", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6794561d34df8dbb7edc831d63ffc0cd0d9c6721"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75c6378a22e8153e9ed2cec8e3d056aa24ece100", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/75c6378a22e8153e9ed2cec8e3d056aa24ece100", "committedDate": "2020-11-25T17:01:39Z", "message": "Review Comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMjE2MjQz", "url": "https://github.com/yahoo/elide/pull/1694#pullrequestreview-542216243", "createdAt": "2020-12-01T19:14:33Z", "commit": {"oid": "75c6378a22e8153e9ed2cec8e3d056aa24ece100"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 703, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}