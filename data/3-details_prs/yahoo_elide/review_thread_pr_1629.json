{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0MzQ5NDMx", "number": 1629, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQyMjoyODo0MVrOE0kxQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQyMjozMToyMFrOE0k0KQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNTYzODQxOnYy", "diffSide": "RIGHT", "path": "elide-datastore/elide-datastore-aggregation/src/test/resources/configs/models/tables/SalesView.hjson", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQyMjoyODo0MVrOHsYDPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxOToyODoyOVrOHs9Z5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjI5MzQzOA==", "bodyText": "What happens if we remove the grain definition here?  I would expect the developer to not put it here empty like this.", "url": "https://github.com/yahoo/elide/pull/1629#discussion_r516293438", "createdAt": "2020-11-02T22:28:41Z", "author": {"login": "aklish"}, "path": "elide-datastore/elide-datastore-aggregation/src/test/resources/configs/models/tables/SalesView.hjson", "diffHunk": "@@ -165,6 +163,16 @@\n             sql: PARSEDATETIME(FORMATDATETIME({{}}, 'yyyy'), 'yyyy')\n           }\n         }\n+        {\n+          name: deliveryDefault\n+          type: TIME\n+          // Logical Column Reference in same table, which references another Logical Column in referred table, which references another Logical column in referred table, which references another Logical column in referred table, which references Physical column in referred table\n+          definition: '{{delivery.time}}'\n+          readAccess: Principal is guest user\n+          grain:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6af1729206ce05eb414fb8a2d1536cda50654038"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjkwNTQ0NQ==", "bodyText": "Let's remove the grain here.", "url": "https://github.com/yahoo/elide/pull/1629#discussion_r516905445", "createdAt": "2020-11-03T19:28:29Z", "author": {"login": "aklish"}, "path": "elide-datastore/elide-datastore-aggregation/src/test/resources/configs/models/tables/SalesView.hjson", "diffHunk": "@@ -165,6 +163,16 @@\n             sql: PARSEDATETIME(FORMATDATETIME({{}}, 'yyyy'), 'yyyy')\n           }\n         }\n+        {\n+          name: deliveryDefault\n+          type: TIME\n+          // Logical Column Reference in same table, which references another Logical Column in referred table, which references another Logical column in referred table, which references another Logical column in referred table, which references Physical column in referred table\n+          definition: '{{delivery.time}}'\n+          readAccess: Principal is guest user\n+          grain:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjI5MzQzOA=="}, "originalCommit": {"oid": "6af1729206ce05eb414fb8a2d1536cda50654038"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNTY0Mjc4OnYy", "diffSide": "RIGHT", "path": "elide-model-config/src/main/resources/templates/table.hbs", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQyMjozMDoxNFrOHsYF_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMDoyMDoxNVrOHsb3ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjI5NDE0Mg==", "bodyText": "SQL can be provided even if type is not.", "url": "https://github.com/yahoo/elide/pull/1629#discussion_r516294142", "createdAt": "2020-11-02T22:30:14Z", "author": {"login": "aklish"}, "path": "elide-model-config/src/main/resources/templates/table.hbs", "diffHunk": "@@ -74,7 +74,7 @@ public class <%#capitalizeFirstLetter name%><%/capitalizeFirstLetter%> <%#if ext\n <%/if%>\n <%#ifTypeMatches type \"TIME\"%>\n <%#with grain%>\n-    @Temporal(grain = @TimeGrainDefinition(grain = TimeGrain.<%type%>, expression = \"<%sql%>\"), timeZone = \"UTC\")\n+    @Temporal(grain = @TimeGrainDefinition(<%#if type%>grain = TimeGrain.<%type%><%/if%><%#if type%><%#if sql%>, <%/if%><%/if%><%#if sql%>expression = \"<%sql%>\"<%/if%>), timeZone = \"UTC\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6af1729206ce05eb414fb8a2d1536cda50654038"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjM1NjAwMw==", "bodyText": "Can we can move this <%#if sql%>, <%/if%> within <%#if type%>grain = TimeGrain.<%type%><%/if%>?", "url": "https://github.com/yahoo/elide/pull/1629#discussion_r516356003", "createdAt": "2020-11-03T00:20:15Z", "author": {"login": "moizarafat"}, "path": "elide-model-config/src/main/resources/templates/table.hbs", "diffHunk": "@@ -74,7 +74,7 @@ public class <%#capitalizeFirstLetter name%><%/capitalizeFirstLetter%> <%#if ext\n <%/if%>\n <%#ifTypeMatches type \"TIME\"%>\n <%#with grain%>\n-    @Temporal(grain = @TimeGrainDefinition(grain = TimeGrain.<%type%>, expression = \"<%sql%>\"), timeZone = \"UTC\")\n+    @Temporal(grain = @TimeGrainDefinition(<%#if type%>grain = TimeGrain.<%type%><%/if%><%#if type%><%#if sql%>, <%/if%><%/if%><%#if sql%>expression = \"<%sql%>\"<%/if%>), timeZone = \"UTC\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjI5NDE0Mg=="}, "originalCommit": {"oid": "6af1729206ce05eb414fb8a2d1536cda50654038"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNTY0NTg1OnYy", "diffSide": "RIGHT", "path": "elide-model-config/src/test/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHydratorTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQyMjozMToyMFrOHsYHzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQyMjozMToyMFrOHsYHzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjI5NDYwNw==", "bodyText": "Do we need to create such a complex model to test this?  THere is a lot of things unrelated to the test in this model.", "url": "https://github.com/yahoo/elide/pull/1629#discussion_r516294607", "createdAt": "2020-11-02T22:31:20Z", "author": {"login": "aklish"}, "path": "elide-model-config/src/test/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHydratorTest.java", "diffHunk": "@@ -275,6 +275,183 @@\n             + \"\\n\"\n             + \"}\\n\";\n \n+    private static final String VALID_TABLE_GRAIN_JAVA_NAME = \"PlayerStatsGrain\";\n+    private static final String VALID_TABLE_GRAIN_CLASS = \"/*\\n\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6af1729206ce05eb414fb8a2d1536cda50654038"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 911, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}