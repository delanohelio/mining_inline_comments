{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2ODIwMDE5", "number": 1692, "title": "Added validation logic to check for inheritance cycles", "bodyText": "License\nI confirm that this contribution is made under an Apache 2.0 license and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-11-24T22:18:33Z", "url": "https://github.com/yahoo/elide/pull/1692", "merged": true, "mergeCommit": {"oid": "adc976bd5e235e9c78a9892b6b7750c7128fb534"}, "closed": true, "closedAt": "2020-11-25T17:11:04Z", "author": {"login": "aklish"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfxVFeAH2gAyNTI2ODIwMDE5OmEwZWE4MTY4NTRjMTk3Njc1Y2U5NDBkMmNjMDI4N2ZjODNmMDIwMmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgA9pmgFqTUzODY2OTg3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a0ea816854c197675ce940d2cc0287fc83f0202c", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/a0ea816854c197675ce940d2cc0287fc83f0202c", "committedDate": "2020-11-24T22:17:16Z", "message": "Added validation logic to check for inheritance cycles"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTEwNzQ0", "url": "https://github.com/yahoo/elide/pull/1692#pullrequestreview-538510744", "createdAt": "2020-11-25T13:49:25Z", "commit": {"oid": "a0ea816854c197675ce940d2cc0287fc83f0202c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMzo0OToyNVrOH50PJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMzo0OToyNVrOH50PJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM4NjcyNQ==", "bodyText": "table.hasParent() doesn't verify if parent model is actually defined so parent can become null here.", "url": "https://github.com/yahoo/elide/pull/1692#discussion_r530386725", "createdAt": "2020-11-25T13:49:25Z", "author": {"login": "rishi-aga"}, "path": "elide-model-config/src/main/java/com/yahoo/elide/modelconfig/validator/DynamicConfigValidator.java", "diffHunk": "@@ -140,11 +140,34 @@ public void readAndValidateConfigs() throws IOException {\n         validateRequiredConfigsProvided();\n         validateNameUniqueness(this.elideSQLDBConfig.getDbconfigs());\n         validateNameUniqueness(this.elideTableConfig.getTables());\n+        validateInheritanceCycles(this.elideTableConfig);\n         populateInheritance(this.elideTableConfig);\n         validateTableConfig(this.elideTableConfig);\n         validateJoinedTablesDBConnectionName(this.elideTableConfig);\n     }\n \n+    private void validateInheritanceCycles(ElideTableConfig tables) {\n+        tables.getTables().stream().forEach(table -> {\n+            validateInheritanceCycles(tables, table, new HashSet<>());\n+        });\n+    }\n+\n+    private void validateInheritanceCycles(ElideTableConfig tables, Table table, Set<Table> visited) {\n+        visited.add(table);\n+\n+        if (!table.hasParent()) {\n+            return;\n+        }\n+        Table parent = table.getParent(tables);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0ea816854c197675ce940d2cc0287fc83f0202c"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52d08cef0ebaf072de63d4c69efa350bda40f40d", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/52d08cef0ebaf072de63d4c69efa350bda40f40d", "committedDate": "2020-11-25T16:24:12Z", "message": "Rework"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NjY5ODc3", "url": "https://github.com/yahoo/elide/pull/1692#pullrequestreview-538669877", "createdAt": "2020-11-25T16:30:09Z", "commit": {"oid": "52d08cef0ebaf072de63d4c69efa350bda40f40d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 699, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}