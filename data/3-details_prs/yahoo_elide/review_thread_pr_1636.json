{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1NTk2MjU3", "number": 1636, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxOTozODozMlrOE1Xqww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMjo0OToxM1rOE1bOQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0Mzk3NzYzOnYy", "diffSide": "RIGHT", "path": "elide-datastore/elide-datastore-aggregation/src/test/resources/create_tables.sql", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxOTozODozMlrOHtm8fA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxOTozODozMlrOHtm8fA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzU4NjA0NA==", "bodyText": "I think this file is no longer used, so can be deleted.", "url": "https://github.com/yahoo/elide/pull/1636#discussion_r517586044", "createdAt": "2020-11-04T19:38:32Z", "author": {"login": "rishi-aga"}, "path": "elide-datastore/elide-datastore-aggregation/src/test/resources/create_tables.sql", "diffHunk": "@@ -27,6 +27,12 @@ CREATE TABLE IF NOT EXISTS players\n       name VARCHAR(255)\n     ) AS SELECT * FROM CSVREAD('classpath:player.csv');\n \n+CREATE TABLE IF NOT EXISTS playerRanking", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0816e7dafa0ecee046b81e78aae1f2249eb5894"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0NDE0MDE5OnYy", "diffSide": "RIGHT", "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/metadata/MetaDataStore.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMDoyNzoyNVrOHtogqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMDoyNzoyNVrOHtogqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzYxMTY5MQ==", "bodyText": "Class scanning is really time consuming.  We don't want to scan 100% of the classes three times to do this.  In the past, this has caused build times to go through the roof.  We should make maybe a new method in ClassScanner that looks for the classes we need in one pass.", "url": "https://github.com/yahoo/elide/pull/1636#discussion_r517611691", "createdAt": "2020-11-04T20:27:25Z", "author": {"login": "aklish"}, "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/metadata/MetaDataStore.java", "diffHunk": "@@ -80,12 +84,29 @@ public HashMapDataStore apply(String key) {\n     private Map<String, HashMapDataStore> hashMapDataStores = new HashMap<>();\n \n     public MetaDataStore() {\n-        this(ClassScanner.getAnnotatedClasses(METADATA_STORE_ANNOTATIONS));\n+        this(getAllAnnotatedClasses());\n+    }\n+\n+    /**\n+     * get all MetaDataStore supported annotated classes.\n+     * @return Set of Class with specific annotations.\n+     */\n+    private static Set<Class<?>> getAllAnnotatedClasses() {\n+        Set<Class<?>> metadataStoreResult = ClassScanner.getAnnotatedClasses(METADATA_STORE_ANNOTATIONS);\n+\n+        Set<Class<?>> entityResult = ClassScanner.getAnnotatedClasses(METADATA_STORE_ENTITY_ANNOTATION);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0816e7dafa0ecee046b81e78aae1f2249eb5894"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0NDU2MDAyOnYy", "diffSide": "RIGHT", "path": "elide-core/src/main/java/com/yahoo/elide/utils/ClassScanner.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMjo0OToxM1rOHtsgeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMjo0OToxM1rOHtsgeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzY3NzE3Nw==", "bodyText": "nice", "url": "https://github.com/yahoo/elide/pull/1636#discussion_r517677177", "createdAt": "2020-11-04T22:49:13Z", "author": {"login": "aklish"}, "path": "elide-core/src/main/java/com/yahoo/elide/utils/ClassScanner.java", "diffHunk": "@@ -83,4 +96,12 @@\n                     .collect(Collectors.toSet());\n         }\n     }\n+\n+    /**\n+     * Function which will be invoked for deciding to include the class in final results.\n+     */\n+    @FunctionalInterface", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11edd80001b57ca74912e42250dec9abb3e0384f"}, "originalPosition": 46}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 918, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}