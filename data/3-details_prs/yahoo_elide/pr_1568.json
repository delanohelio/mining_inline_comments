{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2NDg4NzM0", "number": 1568, "title": "Resolves #1566", "bodyText": "Resolves #1566\n{{column}} can now refer to logical column or a physical column.\nLicense\nI confirm that this contribution is made under an Apache 2.0 license and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-10-01T19:14:29Z", "url": "https://github.com/yahoo/elide/pull/1568", "merged": true, "mergeCommit": {"oid": "ff11ace798adee8e618ca2644e6528699a014a29"}, "closed": true, "closedAt": "2020-10-02T18:09:10Z", "author": {"login": "aklish"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOXAX8AH2gAyNDk2NDg4NzM0OmUwNDk0ZTA0NmJmMTlhNDA0ZDVkZmY1YTc5ZWI1YjliNDYxMGJlMGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOpjHHAFqTUwMTMyNDA4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e0494e046bf19a404d5dff5a79eb5b9b4610be0a", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/e0494e046bf19a404d5dff5a79eb5b9b4610be0a", "committedDate": "2020-10-01T20:00:24Z", "message": "Resolves #1566"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d64806eecf50a679ff9d1a6b09f3a8c1d8ac236", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/5d64806eecf50a679ff9d1a6b09f3a8c1d8ac236", "committedDate": "2020-10-01T20:00:24Z", "message": "Fixed codacy issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "996163f3e1cde672a58ec008cbe73e92cba0cc17", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/996163f3e1cde672a58ec008cbe73e92cba0cc17", "committedDate": "2020-10-01T20:02:12Z", "message": "Updated examples to use templates for physical columns"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNjgzNzgy", "url": "https://github.com/yahoo/elide/pull/1568#pullrequestreview-500683782", "createdAt": "2020-10-01T20:13:13Z", "commit": {"oid": "9a469dc8c37e135271d73e3cb33f38aa0a7a7c1e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMDoxMzoxM1rOHbZVZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMDoxMzoxM1rOHbZVZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ4ODY3OQ==", "bodyText": "Looking at the test case, should this be join_table?", "url": "https://github.com/yahoo/elide/pull/1568#discussion_r498488679", "createdAt": "2020-10-01T20:13:13Z", "author": {"login": "moizarafat"}, "path": "elide-datastore/elide-datastore-aggregation/src/test/java/com/yahoo/elide/datastores/aggregation/core/SqlReferenceVisitorTest.java", "diffHunk": "@@ -0,0 +1,106 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+\n+package com.yahoo.elide.datastores.aggregation.core;\n+\n+import com.google.common.collect.Sets;\n+import com.yahoo.elide.annotation.Include;\n+import com.yahoo.elide.datastores.aggregation.annotation.DimensionFormula;\n+import com.yahoo.elide.datastores.aggregation.annotation.Join;\n+import com.yahoo.elide.datastores.aggregation.metadata.MetaDataStore;\n+import com.yahoo.elide.datastores.aggregation.metadata.models.Column;\n+import com.yahoo.elide.datastores.aggregation.metadata.models.Table;\n+import com.yahoo.elide.datastores.aggregation.queryengines.sql.annotation.FromTable;\n+import com.yahoo.elide.datastores.aggregation.queryengines.sql.metadata.SQLReferenceVisitor;\n+import com.yahoo.elide.datastores.aggregation.queryengines.sql.metadata.SQLTable;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.TestInstance;\n+\n+import javax.persistence.Id;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+@TestInstance(TestInstance.Lifecycle.PER_CLASS)\n+public class SqlReferenceVisitorTest {\n+\n+    private MetaDataStore store;\n+\n+    @FromTable(name = \"test_table\")\n+    @Include\n+    public class TestModel {\n+        @Id\n+        private long id;\n+\n+        @Join(\"%from.dimension1 = %join.dimension1\")\n+        private JoinModel joinModel;\n+\n+        //Logical name matches physical name\n+        @DimensionFormula(\"{{dimension1}}\")\n+        private String dimension1;\n+\n+        //Logical name does not match physical name\n+        @DimensionFormula(\"{{someColumn}}\")\n+        private String dimension2;\n+\n+        //Test a join to another table with a matching column name.\n+        @DimensionFormula(\"{{joinModel.dimension3}}\")\n+        private String dimension3;\n+    }\n+\n+    @FromTable(name = \"join_model\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a469dc8c37e135271d73e3cb33f38aa0a7a7c1e"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6782c74c84cebc4b203f2f6a62f78ba55e4491c", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/f6782c74c84cebc4b203f2f6a62f78ba55e4491c", "committedDate": "2020-10-01T22:11:37Z", "message": "Updated examples to use new template syntax.  Fixed one bug"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9a469dc8c37e135271d73e3cb33f38aa0a7a7c1e", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/9a469dc8c37e135271d73e3cb33f38aa0a7a7c1e", "committedDate": "2020-10-01T19:37:43Z", "message": "Resolved CVE bug"}, "afterCommit": {"oid": "f6782c74c84cebc4b203f2f6a62f78ba55e4491c", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/f6782c74c84cebc4b203f2f6a62f78ba55e4491c", "committedDate": "2020-10-01T22:11:37Z", "message": "Updated examples to use new template syntax.  Fixed one bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5dd216352be8702752d9da4f768bfbf6327b979", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/e5dd216352be8702752d9da4f768bfbf6327b979", "committedDate": "2020-10-02T14:30:37Z", "message": "All tests pass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a5e7f8665d836f342d806a4192750daa3e48573", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/0a5e7f8665d836f342d806a4192750daa3e48573", "committedDate": "2020-10-02T15:57:33Z", "message": "Rework"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "963a1cb23adb5c8982a8251a8ec69c2b6074b463", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/963a1cb23adb5c8982a8251a8ec69c2b6074b463", "committedDate": "2020-10-02T16:34:29Z", "message": "Fixed codacy error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMzI0MDgw", "url": "https://github.com/yahoo/elide/pull/1568#pullrequestreview-501324080", "createdAt": "2020-10-02T17:36:38Z", "commit": {"oid": "963a1cb23adb5c8982a8251a8ec69c2b6074b463"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 841, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}