{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyNjY2NjE1", "number": 1668, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMDoyODozMVrOE6wMLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMDoyODozMVrOE6wMLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwMDQyNDEyOnYy", "diffSide": "RIGHT", "path": "elide-model-config/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/compile/ElideDynamicEntityCompiler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMDoyODozMVrOH2A4zA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMDoyODozMVrOH2A4zA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjM5OTY5Mg==", "bodyText": "There are some strong recommendations to not use the context class loader and instead just this.class.getClassLoader instead:\nhttps://stackoverflow.com/questions/1771679/difference-between-threads-context-class-loader-and-normal-classloader#:~:text=The%20thread%20context%20classloader%20is,currentThread().", "url": "https://github.com/yahoo/elide/pull/1668#discussion_r526399692", "createdAt": "2020-11-18T20:28:31Z", "author": {"login": "aklish"}, "path": "elide-model-config/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/compile/ElideDynamicEntityCompiler.java", "diffHunk": "@@ -125,9 +125,24 @@ public ElideDynamicEntityCompiler(String path, DBPasswordExtractor dbPasswordExt\n             classNames.add(PACKAGE_NAME + entry.getKey());\n         }\n \n-        compiler.useParentClassLoader(\n-                new ElideDynamicInMemoryClassLoader(ClassLoader.getSystemClassLoader(),\n-                        Sets.newHashSet(classNames)));\n+        // Prepare classpath\n+        StringBuilder sb = new StringBuilder();\n+        Enumeration<URL> resources = Thread.currentThread().getContextClassLoader().getResources(\"/\");\n+        while (resources.hasMoreElements()) {\n+            URL url = resources.nextElement();\n+            String fileName = url.getFile();\n+            sb.append(fileName.substring(0, fileName.lastIndexOf(\"!\"))).append(File.pathSeparator);\n+        }\n+\n+        String classpath = sb.toString();\n+\n+        if (classpath != null && !classpath.equals(\"\")) {\n+            log.debug(\"Classpath = \" + classpath);\n+            compiler.useOptions(\"-classpath\", sb.toString());\n+        }\n+\n+        compiler.useParentClassLoader(Thread.currentThread().getContextClassLoader());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb107f89dd8798d1847045a3824663ccdcabc13c"}, "originalPosition": 64}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 934, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}