{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5MDAwODIw", "number": 1521, "title": "Fixes #1520 by using explicit left join when sorting over relationships", "bodyText": "Resolves #1520\nDescription\nWhen resolving hibernate query add explicit joins based on sort paths\nMotivation and Context\nSee issue\nHow Has This Been Tested?\nJust by debugging generated query.\nI would like to do some unit/IT tests, but didn't figured how can I debug elide while running IT.\nLicense\nI confirm that this contribution is made under an Apache 2.0 license and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-09-03T21:42:45Z", "url": "https://github.com/yahoo/elide/pull/1521", "merged": true, "mergeCommit": {"oid": "c581212008369d045e189c7a27115cc695280b51"}, "closed": true, "closedAt": "2020-09-14T15:39:36Z", "author": {"login": "bukajsytlos"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFY3UWABqjM3MjcxMjQ2NjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdI1FZ1AFqTQ4NzkwMzEyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a2341d731ac6ede93b432dcc2f633ebe59b3b99", "author": {"user": {"login": "bukajsytlos", "name": null}}, "url": "https://github.com/yahoo/elide/commit/2a2341d731ac6ede93b432dcc2f633ebe59b3b99", "committedDate": "2020-09-03T21:39:15Z", "message": "Fixes #1520 by using explicit left join when sorting over relationships"}, "afterCommit": {"oid": "31d2cc916a3822661c9ecfce011d51af100b784e", "author": {"user": {"login": "bukajsytlos", "name": null}}, "url": "https://github.com/yahoo/elide/commit/31d2cc916a3822661c9ecfce011d51af100b784e", "committedDate": "2020-09-03T23:04:51Z", "message": "Fixes #1520 by using explicit left join when sorting over relationships"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNzgwODQ3", "url": "https://github.com/yahoo/elide/pull/1521#pullrequestreview-482780847", "createdAt": "2020-09-04T16:10:05Z", "commit": {"oid": "31d2cc916a3822661c9ecfce011d51af100b784e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNjoxMDowNVrOHNT0qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNjoxMDowNVrOHNT0qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzcxODMxNA==", "bodyText": "You will need to make similar changes to SubCollectionFetchQueryBuilder.java\nAlso, I recommend adding a test on a subcollection: /foo/123/bar where your new sorting join logic can be validated (sort on bar.blah.someField or something).", "url": "https://github.com/yahoo/elide/pull/1521#discussion_r483718314", "createdAt": "2020-09-04T16:10:05Z", "author": {"login": "aklish"}, "path": "elide-datastore/elide-datastore-hibernate/src/main/java/com/yahoo/elide/core/hibernate/hql/RootCollectionFetchQueryBuilder.java", "diffHunk": "@@ -49,7 +49,8 @@ public Query build() {\n \n             //Build the JOIN clause\n             String joinClause =  getJoinClauseFromFilters(filterExpression.get())\n-                    + extractToOneMergeJoins(entityClass, entityAlias);\n+                    + extractToOneMergeJoins(entityClass, entityAlias)\n+                    + explicitSortJoins(sorting, entityClass);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31d2cc916a3822661c9ecfce011d51af100b784e"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31d2cc916a3822661c9ecfce011d51af100b784e", "author": {"user": {"login": "bukajsytlos", "name": null}}, "url": "https://github.com/yahoo/elide/commit/31d2cc916a3822661c9ecfce011d51af100b784e", "committedDate": "2020-09-03T23:04:51Z", "message": "Fixes #1520 by using explicit left join when sorting over relationships"}, "afterCommit": {"oid": "47ff7329d26b2f86b791f9e7ee83a2d6cbf12396", "author": {"user": {"login": "bukajsytlos", "name": null}}, "url": "https://github.com/yahoo/elide/commit/47ff7329d26b2f86b791f9e7ee83a2d6cbf12396", "committedDate": "2020-09-12T21:06:27Z", "message": "Fixes #1520 by using explicit left join when sorting over relationships"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f528094b0b460acde41facf30762842369aee64", "author": {"user": {"login": "bukajsytlos", "name": null}}, "url": "https://github.com/yahoo/elide/commit/0f528094b0b460acde41facf30762842369aee64", "committedDate": "2020-09-12T21:07:18Z", "message": "Fixes #1520 by using explicit left join when sorting over relationships"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "47ff7329d26b2f86b791f9e7ee83a2d6cbf12396", "author": {"user": {"login": "bukajsytlos", "name": null}}, "url": "https://github.com/yahoo/elide/commit/47ff7329d26b2f86b791f9e7ee83a2d6cbf12396", "committedDate": "2020-09-12T21:06:27Z", "message": "Fixes #1520 by using explicit left join when sorting over relationships"}, "afterCommit": {"oid": "0f528094b0b460acde41facf30762842369aee64", "author": {"user": {"login": "bukajsytlos", "name": null}}, "url": "https://github.com/yahoo/elide/commit/0f528094b0b460acde41facf30762842369aee64", "committedDate": "2020-09-12T21:07:18Z", "message": "Fixes #1520 by using explicit left join when sorting over relationships"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3OTAzMTIx", "url": "https://github.com/yahoo/elide/pull/1521#pullrequestreview-487903121", "createdAt": "2020-09-14T15:39:30Z", "commit": {"oid": "0f528094b0b460acde41facf30762842369aee64"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 812, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}