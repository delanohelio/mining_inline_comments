{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwNzMyNDQy", "number": 1444, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNToxNDoyM1rOEPkv9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNToxNDoyNVrOEPkwBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NzY2MTk3OnYy", "diffSide": "RIGHT", "path": "elide-graphql/src/main/java/com/yahoo/elide/graphql/PersistentResourceFetcher.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNToxNDoyM1rOGzW8Gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNTo0NDoyNVrOGzYAZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjUwNjM5NQ==", "bodyText": "What does this look like?  There is no space - I'd like to see an example log line.", "url": "https://github.com/yahoo/elide/pull/1444#discussion_r456506395", "createdAt": "2020-07-17T15:14:23Z", "author": {"login": "aklish"}, "path": "elide-graphql/src/main/java/com/yahoo/elide/graphql/PersistentResourceFetcher.java", "diffHunk": "@@ -121,11 +122,22 @@ private void filterSortPaginateSanityCheck(Environment environment) {\n      * @param environment Environment encapsulating graphQL's request environment\n      */\n     private void logContext(RelationshipOp operation, Environment environment) {\n-        List<Field> children = (environment.field.getSelectionSet() != null)\n+        List<?> children = (environment.field.getSelectionSet() != null)\n                 ? (List) environment.field.getSelectionSet().getChildren()\n                 : new ArrayList<>();\n-        String requestedFields = environment.field.getName() + (children.size() > 0\n-                ? \"(\" + children.stream().map(Field::getName).collect(Collectors.toList()) + \")\" : \"\");\n+\n+        List<String> fieldName = new ArrayList<String>();\n+        if (children.size() > 0) {\n+            children.stream().forEach(i -> { if (i.getClass().equals(Field.class)) {\n+                    fieldName.add(((Field) i).getName());\n+                } else {\n+                    fieldName.add(((FragmentSpread) i).getName());\n+                }\n+            });\n+        }\n+\n+        String requestedFields = environment.field.getName() + fieldName.toString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0335a39b36156f68b965990f4ca2b7a1bcb1651"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjUyMzg3OA==", "bodyText": "DEBUG c.y.e.g.PersistentResourceFetcher.logContext - FETCH table[edges] fields with parent GraphQLObjectType<Query>\nFETCH node[TableFragment] fields with parent GraphQLObjectType<TableEdge>\nFETCH id[] fields with parent GraphQLObjectType<Table>", "url": "https://github.com/yahoo/elide/pull/1444#discussion_r456523878", "createdAt": "2020-07-17T15:44:25Z", "author": {"login": "moizarafat"}, "path": "elide-graphql/src/main/java/com/yahoo/elide/graphql/PersistentResourceFetcher.java", "diffHunk": "@@ -121,11 +122,22 @@ private void filterSortPaginateSanityCheck(Environment environment) {\n      * @param environment Environment encapsulating graphQL's request environment\n      */\n     private void logContext(RelationshipOp operation, Environment environment) {\n-        List<Field> children = (environment.field.getSelectionSet() != null)\n+        List<?> children = (environment.field.getSelectionSet() != null)\n                 ? (List) environment.field.getSelectionSet().getChildren()\n                 : new ArrayList<>();\n-        String requestedFields = environment.field.getName() + (children.size() > 0\n-                ? \"(\" + children.stream().map(Field::getName).collect(Collectors.toList()) + \")\" : \"\");\n+\n+        List<String> fieldName = new ArrayList<String>();\n+        if (children.size() > 0) {\n+            children.stream().forEach(i -> { if (i.getClass().equals(Field.class)) {\n+                    fieldName.add(((Field) i).getName());\n+                } else {\n+                    fieldName.add(((FragmentSpread) i).getName());\n+                }\n+            });\n+        }\n+\n+        String requestedFields = environment.field.getName() + fieldName.toString();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjUwNjM5NQ=="}, "originalCommit": {"oid": "d0335a39b36156f68b965990f4ca2b7a1bcb1651"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NzY2MjEyOnYy", "diffSide": "RIGHT", "path": "elide-graphql/src/main/java/com/yahoo/elide/graphql/PersistentResourceFetcher.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNToxNDoyNVrOGzW8Kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNToxNDoyNVrOGzW8Kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjUwNjQxMA==", "bodyText": "This might not be safe (there are other types in graphQL besides fields and fragments).  Let's not bother logging the fragment spreads.", "url": "https://github.com/yahoo/elide/pull/1444#discussion_r456506410", "createdAt": "2020-07-17T15:14:25Z", "author": {"login": "aklish"}, "path": "elide-graphql/src/main/java/com/yahoo/elide/graphql/PersistentResourceFetcher.java", "diffHunk": "@@ -121,11 +122,22 @@ private void filterSortPaginateSanityCheck(Environment environment) {\n      * @param environment Environment encapsulating graphQL's request environment\n      */\n     private void logContext(RelationshipOp operation, Environment environment) {\n-        List<Field> children = (environment.field.getSelectionSet() != null)\n+        List<?> children = (environment.field.getSelectionSet() != null)\n                 ? (List) environment.field.getSelectionSet().getChildren()\n                 : new ArrayList<>();\n-        String requestedFields = environment.field.getName() + (children.size() > 0\n-                ? \"(\" + children.stream().map(Field::getName).collect(Collectors.toList()) + \")\" : \"\");\n+\n+        List<String> fieldName = new ArrayList<String>();\n+        if (children.size() > 0) {\n+            children.stream().forEach(i -> { if (i.getClass().equals(Field.class)) {\n+                    fieldName.add(((Field) i).getName());\n+                } else {\n+                    fieldName.add(((FragmentSpread) i).getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0335a39b36156f68b965990f4ca2b7a1bcb1651"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1006, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}