{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0MzQ5NDMx", "number": 1629, "title": "Provide Default time grain SQL expression", "bodyText": "Description\nDefault time grain SQL expression.\nTimeGrainDefinition.java default expression should be {{}}\nMake type and SQLoptional in HJSON config for TimeGrains as the Time Grain Defaults to Day and default expression will be\n{{}}\nTemporal.java has a default timegrain definition that is updated too.\nMotivation and Context\n\nHow Has This Been Tested?\nNew and existing test cases.\nScreenshots (if appropriate):\nLicense\nI confirm that this contribution is made under an Apache 2.0 license and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-11-02T21:54:12Z", "url": "https://github.com/yahoo/elide/pull/1629", "merged": true, "mergeCommit": {"oid": "688c5cfa155a0f3518d313ee3159ccfd6b44ba9d"}, "closed": true, "closedAt": "2020-11-05T22:20:34Z", "author": {"login": "ayeswarya"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYsWcGgFqTUyMjA2Nzc2MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZp-4cABqjM5NjQ2NDE1NTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMDY3NzYx", "url": "https://github.com/yahoo/elide/pull/1629#pullrequestreview-522067761", "createdAt": "2020-11-02T22:28:41Z", "commit": {"oid": "6af1729206ce05eb414fb8a2d1536cda50654038"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQyMjoyODo0MVrOHsYDPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQyMjozMToyMFrOHsYHzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjI5MzQzOA==", "bodyText": "What happens if we remove the grain definition here?  I would expect the developer to not put it here empty like this.", "url": "https://github.com/yahoo/elide/pull/1629#discussion_r516293438", "createdAt": "2020-11-02T22:28:41Z", "author": {"login": "aklish"}, "path": "elide-datastore/elide-datastore-aggregation/src/test/resources/configs/models/tables/SalesView.hjson", "diffHunk": "@@ -165,6 +163,16 @@\n             sql: PARSEDATETIME(FORMATDATETIME({{}}, 'yyyy'), 'yyyy')\n           }\n         }\n+        {\n+          name: deliveryDefault\n+          type: TIME\n+          // Logical Column Reference in same table, which references another Logical Column in referred table, which references another Logical column in referred table, which references another Logical column in referred table, which references Physical column in referred table\n+          definition: '{{delivery.time}}'\n+          readAccess: Principal is guest user\n+          grain:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6af1729206ce05eb414fb8a2d1536cda50654038"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjI5NDE0Mg==", "bodyText": "SQL can be provided even if type is not.", "url": "https://github.com/yahoo/elide/pull/1629#discussion_r516294142", "createdAt": "2020-11-02T22:30:14Z", "author": {"login": "aklish"}, "path": "elide-model-config/src/main/resources/templates/table.hbs", "diffHunk": "@@ -74,7 +74,7 @@ public class <%#capitalizeFirstLetter name%><%/capitalizeFirstLetter%> <%#if ext\n <%/if%>\n <%#ifTypeMatches type \"TIME\"%>\n <%#with grain%>\n-    @Temporal(grain = @TimeGrainDefinition(grain = TimeGrain.<%type%>, expression = \"<%sql%>\"), timeZone = \"UTC\")\n+    @Temporal(grain = @TimeGrainDefinition(<%#if type%>grain = TimeGrain.<%type%><%/if%><%#if type%><%#if sql%>, <%/if%><%/if%><%#if sql%>expression = \"<%sql%>\"<%/if%>), timeZone = \"UTC\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6af1729206ce05eb414fb8a2d1536cda50654038"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjI5NDYwNw==", "bodyText": "Do we need to create such a complex model to test this?  THere is a lot of things unrelated to the test in this model.", "url": "https://github.com/yahoo/elide/pull/1629#discussion_r516294607", "createdAt": "2020-11-02T22:31:20Z", "author": {"login": "aklish"}, "path": "elide-model-config/src/test/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHydratorTest.java", "diffHunk": "@@ -275,6 +275,183 @@\n             + \"\\n\"\n             + \"}\\n\";\n \n+    private static final String VALID_TABLE_GRAIN_JAVA_NAME = \"PlayerStatsGrain\";\n+    private static final String VALID_TABLE_GRAIN_CLASS = \"/*\\n\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6af1729206ce05eb414fb8a2d1536cda50654038"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyODEyMDI3", "url": "https://github.com/yahoo/elide/pull/1629#pullrequestreview-522812027", "createdAt": "2020-11-03T19:28:28Z", "commit": {"oid": "dfbb86f312c8a9bc0c96f44a8573d2e998082df3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxOToyODoyOVrOHs9Z5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxOToyODoyOVrOHs9Z5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjkwNTQ0NQ==", "bodyText": "Let's remove the grain here.", "url": "https://github.com/yahoo/elide/pull/1629#discussion_r516905445", "createdAt": "2020-11-03T19:28:29Z", "author": {"login": "aklish"}, "path": "elide-datastore/elide-datastore-aggregation/src/test/resources/configs/models/tables/SalesView.hjson", "diffHunk": "@@ -165,6 +163,16 @@\n             sql: PARSEDATETIME(FORMATDATETIME({{}}, 'yyyy'), 'yyyy')\n           }\n         }\n+        {\n+          name: deliveryDefault\n+          type: TIME\n+          // Logical Column Reference in same table, which references another Logical Column in referred table, which references another Logical column in referred table, which references another Logical column in referred table, which references Physical column in referred table\n+          definition: '{{delivery.time}}'\n+          readAccess: Principal is guest user\n+          grain:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjI5MzQzOA=="}, "originalCommit": {"oid": "6af1729206ce05eb414fb8a2d1536cda50654038"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyODIyNDQx", "url": "https://github.com/yahoo/elide/pull/1629#pullrequestreview-522822441", "createdAt": "2020-11-03T19:44:01Z", "commit": {"oid": "24596dc4bef015c8ddd5eb12df9d85b839ccc36b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d14c5e6bd961d48bbb9b111cf148e227bcf86f6", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/6d14c5e6bd961d48bbb9b111cf148e227bcf86f6", "committedDate": "2020-11-05T21:59:49Z", "message": "changes to default sql and grain"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c22a218e576cc0f92dc56fd1f0181f4f5fb0e886", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/c22a218e576cc0f92dc56fd1f0181f4f5fb0e886", "committedDate": "2020-11-05T21:59:50Z", "message": "review fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa6ffa0fa13bcecdbd9764adf589e6bb7e7e9a09", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/aa6ffa0fa13bcecdbd9764adf589e6bb7e7e9a09", "committedDate": "2020-11-05T21:59:50Z", "message": "fix jetty dependency vulnerability"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43ea5ec3fa8c49d8e811f38b97842ca91ff6d165", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/43ea5ec3fa8c49d8e811f38b97842ca91ff6d165", "committedDate": "2020-11-05T21:59:50Z", "message": "upgrade spring version instead of removing starter dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa97e9f82e3bc882ffe7c976c4e0c40dd21e7904", "author": {"user": {"login": "ayeswarya", "name": null}}, "url": "https://github.com/yahoo/elide/commit/aa97e9f82e3bc882ffe7c976c4e0c40dd21e7904", "committedDate": "2020-11-05T21:59:51Z", "message": "remove incorrect example grain"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24596dc4bef015c8ddd5eb12df9d85b839ccc36b", "author": {"user": {"login": "ayeswarya", "name": null}}, "url": "https://github.com/yahoo/elide/commit/24596dc4bef015c8ddd5eb12df9d85b839ccc36b", "committedDate": "2020-11-03T19:36:58Z", "message": "remove incorrect example grain"}, "afterCommit": {"oid": "aa97e9f82e3bc882ffe7c976c4e0c40dd21e7904", "author": {"user": {"login": "ayeswarya", "name": null}}, "url": "https://github.com/yahoo/elide/commit/aa97e9f82e3bc882ffe7c976c4e0c40dd21e7904", "committedDate": "2020-11-05T21:59:51Z", "message": "remove incorrect example grain"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 747, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}