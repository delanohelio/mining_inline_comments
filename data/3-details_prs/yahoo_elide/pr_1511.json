{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxMjE4OTYz", "number": 1511, "title": "Time Dimension should support different formats during serialization", "bodyText": "Resolves #1474\nDescription\nCurrently, Time Dimensions are represented as Java Date. This forces the SQL definitions to ensure it returns Date instead of String. Dates are then serialized using the serde and may include additional information like Hour, Minutes, etc depending on the Serde Format even though the SQL definition only included Year, Month, Date. Also, there are use cases where we would want to return formats like YYYY-MM, YYMM, etc.\nTo address this, Elide will represent Time Dimension as new subclass of Date. Elide will introduce multiple in-built time grains which will have a pre-defined format, represented by a Date Subclass with a registered serde. These time grains will also include the format information as an attribute. Changing to subclass of Date will result in removal of support of multiple time grains for a time dimension cos results will have to display in the correct format. Instead, If multiple time grains are required on a database column, they will have to be represented as separate attributes in the model.\nMotivation and Context\nTime Dimension should support different formats during serialization #1474\nHow Has This Been Tested?\nExisting and New test cases. Tested with an example app.\nLicense\nI confirm that this contribution is made under an Apache 2.0 license and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-08-20T20:17:07Z", "url": "https://github.com/yahoo/elide/pull/1511", "merged": true, "mergeCommit": {"oid": "be2d25b774221377187e2674498f5cfd2564ede1"}, "closed": true, "closedAt": "2020-08-28T17:00:45Z", "author": {"login": "moizarafat"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDFTZNgFqTQ3Njk4NTAxMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDXMfWAH2gAyNDcxMjE4OTYzOjY1MzViMTM3Y2ZiNTk0ZGJiZjQ4NjBjNDQ5YTkzMDYyNTRmYzAzMjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2OTg1MDEy", "url": "https://github.com/yahoo/elide/pull/1511#pullrequestreview-476985012", "createdAt": "2020-08-27T18:39:26Z", "commit": {"oid": "634409dee1c5818424015e2c1595d7672c8b54b3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxODozOToyNlrOHIcqdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxOTowOTozMVrOHIdpCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYyMDI3Nw==", "bodyText": "This looks like a typo.  The property is still called grains (plural) is it not?", "url": "https://github.com/yahoo/elide/pull/1511#discussion_r478620277", "createdAt": "2020-08-27T18:39:26Z", "author": {"login": "aklish"}, "path": "elide-contrib/elide-dynamic-config-helpers/src/main/resources/elideTableSchema.json", "diffHunk": "@@ -247,7 +243,7 @@\n         \"name\",\n         \"type\",\n         \"definition\",\n-        \"grains\"\n+        \"grain\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "634409dee1c5818424015e2c1595d7672c8b54b3"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYyODQ5OQ==", "bodyText": "Might be good to have one test where we preserve MONTH here.", "url": "https://github.com/yahoo/elide/pull/1511#discussion_r478628499", "createdAt": "2020-08-27T18:54:50Z", "author": {"login": "aklish"}, "path": "elide-contrib/elide-dynamic-config-helpers/src/test/resources/validator/missing_table/tables/table2.hjson.bkp", "diffHunk": "@@ -34,14 +34,13 @@\n                 name : createdOn\n                 type : TIME\n                 definition : create_on\n-                grains: [\n+                grain:\n                 {\n-                    grain :  MONTH\n+                    type :  SIMPLEDATE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "634409dee1c5818424015e2c1595d7672c8b54b3"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYzMTAyNg==", "bodyText": "javadoc.", "url": "https://github.com/yahoo/elide/pull/1511#discussion_r478631026", "createdAt": "2020-08-27T18:59:22Z", "author": {"login": "aklish"}, "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/timegrains/DateTime.java", "diffHunk": "@@ -0,0 +1,19 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.datastores.aggregation.timegrains;\n+\n+public class DateTime extends java.util.Date {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "634409dee1c5818424015e2c1595d7672c8b54b3"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYzNjI5OQ==", "bodyText": "Why the reorder here?", "url": "https://github.com/yahoo/elide/pull/1511#discussion_r478636299", "createdAt": "2020-08-27T19:09:31Z", "author": {"login": "aklish"}, "path": "elide-graphql/src/main/java/com/yahoo/elide/graphql/GraphQLConversionUtils.java", "diffHunk": "@@ -102,10 +102,10 @@ public GraphQLScalarType classToScalarType(Class<?> clazz) {\n             return Scalars.GraphQLString;\n         } else if (clazz.equals(BigDecimal.class)) {\n             return Scalars.GraphQLBigDecimal;\n-        } else if (Date.class.isAssignableFrom(clazz)) {\n-            return GraphQLScalars.GRAPHQL_DATE_TYPE;\n         } else if (scalarMap.containsKey(clazz)) {\n             return scalarMap.get(clazz);\n+        } else if (Date.class.isAssignableFrom(clazz)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "634409dee1c5818424015e2c1595d7672c8b54b3"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MDc2OTky", "url": "https://github.com/yahoo/elide/pull/1511#pullrequestreview-477076992", "createdAt": "2020-08-27T20:59:32Z", "commit": {"oid": "d4e83acb2d68f771f1ecdf6abbee31d829ec04fe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5389fdd022264d615c87edf0b05361c6f45d83e6", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/5389fdd022264d615c87edf0b05361c6f45d83e6", "committedDate": "2020-08-27T21:05:21Z", "message": "date and datetime grains"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e71ce08e5ec70a5c492240ff53d5678d3162dc0a", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/e71ce08e5ec70a5c492240ff53d5678d3162dc0a", "committedDate": "2020-08-27T21:05:21Z", "message": "Handlebar and Schema changes for TimeGrain"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dcdc8aa7c25ca9368abc46f8442ed244ae7f8dc", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/3dcdc8aa7c25ca9368abc46f8442ed244ae7f8dc", "committedDate": "2020-08-27T21:05:21Z", "message": "Table Schema Change for Elide Spring Test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe6cc9f232558e88c76966165c39b16e24671c1d", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/fe6cc9f232558e88c76966165c39b16e24671c1d", "committedDate": "2020-08-27T21:05:21Z", "message": "Change Type definition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5d9d7e03519c025b068a69ea8cf172c15cfbf89", "author": {"user": {"login": "moizarafat", "name": "Moiz Arafat"}}, "url": "https://github.com/yahoo/elide/commit/c5d9d7e03519c025b068a69ea8cf172c15cfbf89", "committedDate": "2020-08-27T21:11:45Z", "message": "Time Grain Changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd244f09d8a8e3442a5535eb832f0942147e2add", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/cd244f09d8a8e3442a5535eb832f0942147e2add", "committedDate": "2020-08-27T21:11:45Z", "message": "Remove FORMATDATETIME"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "168fb12afd7e04cbf3b4614107073b0a6bb6811c", "author": {"user": {"login": "moizarafat", "name": "Moiz Arafat"}}, "url": "https://github.com/yahoo/elide/commit/168fb12afd7e04cbf3b4614107073b0a6bb6811c", "committedDate": "2020-08-27T21:11:45Z", "message": "Removing commented code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1a4701d9d518f4da83aa6a22fc0e3b99f35b35d", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/d1a4701d9d518f4da83aa6a22fc0e3b99f35b35d", "committedDate": "2020-08-27T21:13:31Z", "message": "Rename Date to SimpleDate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97f403d1311d44c0ad176e8d104d3b1e66f24eb9", "author": {"user": {"login": "moizarafat", "name": "Moiz Arafat"}}, "url": "https://github.com/yahoo/elide/commit/97f403d1311d44c0ad176e8d104d3b1e66f24eb9", "committedDate": "2020-08-27T21:14:40Z", "message": "Renaming Grain"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba97b811137edda49e157f88255b8878dd13afd2", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/ba97b811137edda49e157f88255b8878dd13afd2", "committedDate": "2020-08-27T21:14:40Z", "message": "Some testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "485f1f1a98b332cd5ad2504718991d668fb9e36e", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/485f1f1a98b332cd5ad2504718991d668fb9e36e", "committedDate": "2020-08-27T21:14:40Z", "message": "Working"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b42fda512b112443d1a73bc6d6226654bff6b488", "author": {"user": {"login": "moizarafat", "name": "Moiz Arafat"}}, "url": "https://github.com/yahoo/elide/commit/b42fda512b112443d1a73bc6d6226654bff6b488", "committedDate": "2020-08-27T21:14:40Z", "message": "Adding format getters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bdda20943cb46481898f91338c12a44ccb60a0a", "author": {"user": {"login": "moizarafat", "name": "Moiz Arafat"}}, "url": "https://github.com/yahoo/elide/commit/9bdda20943cb46481898f91338c12a44ccb60a0a", "committedDate": "2020-08-27T21:14:40Z", "message": "Additional Serdes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "417174740325cb33bf5789650f0185ec010ae8d6", "author": {"user": {"login": "moizarafat", "name": "Moiz Arafat"}}, "url": "https://github.com/yahoo/elide/commit/417174740325cb33bf5789650f0185ec010ae8d6", "committedDate": "2020-08-27T21:14:40Z", "message": "Schema changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79f83edeabcb9f1bd13341715e9fd4c5766bbeb7", "author": {"user": {"login": "moizarafat", "name": "Moiz Arafat"}}, "url": "https://github.com/yahoo/elide/commit/79f83edeabcb9f1bd13341715e9fd4c5766bbeb7", "committedDate": "2020-08-27T21:14:40Z", "message": "Update GraphQLConversionUtils.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de8eceb65777b3089ccde2fa79aa15570c5e6cdc", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/de8eceb65777b3089ccde2fa79aa15570c5e6cdc", "committedDate": "2020-08-27T21:14:40Z", "message": "Review Comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4da3330e4e6b2248698e56c33709e3f58518d8e", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/b4da3330e4e6b2248698e56c33709e3f58518d8e", "committedDate": "2020-08-27T21:14:40Z", "message": "Remove extra"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8530d97e953671b0eea012415b0202623ee172eb", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/8530d97e953671b0eea012415b0202623ee172eb", "committedDate": "2020-08-27T21:14:40Z", "message": "Codacy Issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89652f5c717b48b6c072e4efee1fc98b30a56c2e", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/89652f5c717b48b6c072e4efee1fc98b30a56c2e", "committedDate": "2020-08-27T21:14:40Z", "message": "Codacy Issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4e83acb2d68f771f1ecdf6abbee31d829ec04fe", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/d4e83acb2d68f771f1ecdf6abbee31d829ec04fe", "committedDate": "2020-08-27T20:56:16Z", "message": "Codacy Issues"}, "afterCommit": {"oid": "89652f5c717b48b6c072e4efee1fc98b30a56c2e", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/89652f5c717b48b6c072e4efee1fc98b30a56c2e", "committedDate": "2020-08-27T21:14:40Z", "message": "Codacy Issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "511871c6eb36b456281cf28f7bdc8ed2648c8975", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/511871c6eb36b456281cf28f7bdc8ed2648c8975", "committedDate": "2020-08-27T21:45:08Z", "message": "Fix test HJSONs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6535b137cfb594dbbf4860c449a9306254fc0329", "author": {"user": {"login": "rishi-aga", "name": null}}, "url": "https://github.com/yahoo/elide/commit/6535b137cfb594dbbf4860c449a9306254fc0329", "committedDate": "2020-08-28T16:00:28Z", "message": "Codacy issue and remove extra file under resources"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 804, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}