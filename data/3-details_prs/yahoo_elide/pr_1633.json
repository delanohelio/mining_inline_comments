{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1MDM1MzM3", "number": 1633, "title": "Attempt to run explain query tests against H2 in compliance mode agai\u2026", "bodyText": "H2 supports database compatibility modes for a small set of databases.  When available, this PR will run Aggregation Store explain query tests against the targeted database as an additional validation.\nLicense\nI confirm that this contribution is made under an Apache 2.0 license and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-11-03T22:54:54Z", "url": "https://github.com/yahoo/elide/pull/1633", "merged": true, "mergeCommit": {"oid": "2b07e8ad1bae5fecb0d62a4546d0ac7e8fd252b8"}, "closed": true, "closedAt": "2020-11-05T21:30:25Z", "author": {"login": "aklish"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZBSW_AFqTUyMjkzMzY0NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZpQ99gBqjM5NjQ0ODM5NDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyOTMzNjQ1", "url": "https://github.com/yahoo/elide/pull/1633#pullrequestreview-522933645", "createdAt": "2020-11-03T22:55:18Z", "commit": {"oid": "703c4a620eae61ef97edb98fe7cb731c93f85c76"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMjo1NToxOFrOHtDYuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMjo1NToxOFrOHtDYuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzAwMzQ1MQ==", "bodyText": "Fixes a bug where the result set can come back empty.", "url": "https://github.com/yahoo/elide/pull/1633#discussion_r517003451", "createdAt": "2020-11-03T22:55:18Z", "author": {"login": "aklish"}, "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/queryengines/sql/SQLQueryEngine.java", "diffHunk": "@@ -255,7 +255,9 @@ private long getPageTotal(Query query, SQLQuery sql, SqlTransaction sqlTransacti\n         supplyFilterQueryParameters(query, stmt);\n \n         // Run the Pagination query and log the time spent.\n-        return CoerceUtil.coerce(runQuery(stmt, paginationSQL, SINGLE_RESULT_MAPPER), Long.class);\n+        Long result = CoerceUtil.coerce(runQuery(stmt, paginationSQL, SINGLE_RESULT_MAPPER), Long.class);\n+\n+        return (result != null) ? result : 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "703c4a620eae61ef97edb98fe7cb731c93f85c76"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzNzk5MDU5", "url": "https://github.com/yahoo/elide/pull/1633#pullrequestreview-523799059", "createdAt": "2020-11-04T23:01:44Z", "commit": {"oid": "703c4a620eae61ef97edb98fe7cb731c93f85c76"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89a9c4073ad3bd3d53ac57fc5b9e2e10e363007c", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/89a9c4073ad3bd3d53ac57fc5b9e2e10e363007c", "committedDate": "2020-11-05T21:15:10Z", "message": "Attempt to run explain query tests against H2 in compliance mode against targeted databases"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "703c4a620eae61ef97edb98fe7cb731c93f85c76", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/703c4a620eae61ef97edb98fe7cb731c93f85c76", "committedDate": "2020-11-03T22:49:39Z", "message": "Attempt to run explain query tests against H2 in compliance mode against targeted databases"}, "afterCommit": {"oid": "89a9c4073ad3bd3d53ac57fc5b9e2e10e363007c", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/89a9c4073ad3bd3d53ac57fc5b9e2e10e363007c", "committedDate": "2020-11-05T21:15:10Z", "message": "Attempt to run explain query tests against H2 in compliance mode against targeted databases"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 751, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}