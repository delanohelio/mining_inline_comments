{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg0Mjk0NDcx", "number": 1528, "title": "Elide 5: Add HJSON table filter templates", "bodyText": "Updates HJSON configuration to support the definition of required client filters for a given table.\nFilters are written in RSQL and can be templated:\ncreatedOn>={{start}};createdOn<{{end}};client_id==1\n\nHow Has This Been Tested?\nUnit tests and new IT tests.\nLicense\nI confirm that this contribution is made under an Apache 2.0 license and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-09-10T20:23:44Z", "url": "https://github.com/yahoo/elide/pull/1528", "merged": true, "mergeCommit": {"oid": "6e7c9ac4c5148ed7e663bf672ee046af9d0b674d"}, "closed": true, "closedAt": "2020-09-11T13:46:31Z", "author": {"login": "aklish"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHPDFZgH2gAyNDg0Mjk0NDcxOmY4Njc0NDA0MTEyZTZmNzA2ZjY0ODgxYjBmZTYwNWMyYThkM2ZmNDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHn0YYgFqTQ4NjMyODc0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f8674404112e6f706f64881b0fe605c2a8d3ff44", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/f8674404112e6f706f64881b0fe605c2a8d3ff44", "committedDate": "2020-09-09T16:46:39Z", "message": "Initial plumbing plus some unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e29eb2e54c1f2d14c5f0539249a09b257bbbdce5", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/e29eb2e54c1f2d14c5f0539249a09b257bbbdce5", "committedDate": "2020-09-09T21:17:54Z", "message": "Added IT test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc16af6bfbca1c19f66bcc8f4ca37326b2ffe1ee", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/fc16af6bfbca1c19f66bcc8f4ca37326b2ffe1ee", "committedDate": "2020-09-10T18:21:41Z", "message": "changed plumbing to serialize the RSQL filters in table"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc446643b61b8fc9dd88001c6f32cb72391e1d58", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/bc446643b61b8fc9dd88001c6f32cb72391e1d58", "committedDate": "2020-09-10T18:22:26Z", "message": "Added metadata tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "359476fb5fc7ae0745e6ef3a240ff724d1545d40", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/359476fb5fc7ae0745e6ef3a240ff724d1545d40", "committedDate": "2020-09-10T19:18:29Z", "message": "Made Serdes injectable.  Added plumbing to enforce table filter templates.  Added tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3fb4ce36c17892e86210f4108a5c405c9b665f2", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/b3fb4ce36c17892e86210f4108a5c405c9b665f2", "committedDate": "2020-09-10T19:45:32Z", "message": "Added support for table filters with non template values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f211d1248f4b0fa9eb8e819fcb3d89d2364f0b02", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/f211d1248f4b0fa9eb8e819fcb3d89d2364f0b02", "committedDate": "2020-09-10T20:20:55Z", "message": "Fixed checkstyle errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2Mjg0NjQw", "url": "https://github.com/yahoo/elide/pull/1528#pullrequestreview-486284640", "createdAt": "2020-09-10T20:26:35Z", "commit": {"oid": "f211d1248f4b0fa9eb8e819fcb3d89d2364f0b02"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMDoyNjozNVrOHQEhVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMDoyNjozNVrOHQEhVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjYxMzMzNQ==", "bodyText": "Unrelated improvement to make Serdes injectable.", "url": "https://github.com/yahoo/elide/pull/1528#discussion_r486613335", "createdAt": "2020-09-10T20:26:35Z", "author": {"login": "aklish"}, "path": "elide-core/src/main/java/com/yahoo/elide/Elide.java", "diffHunk": "@@ -100,24 +98,17 @@ public Elide(ElideSettings elideSettings) {\n     }\n \n     protected void registerCustomSerde() {\n+        Injector injector = elideSettings.getDictionary().getInjector();\n         Set<Class<?>> classes = registerCustomSerdeScan();\n \n         for (Class<?> clazz : classes) {\n             if (!Serde.class.isAssignableFrom(clazz)) {\n                 log.warn(\"Skipping Serde registration (not a Serde!): {}\", clazz);\n                 continue;\n             }\n-            Serde serde;\n-            try {\n-                serde = (Serde) clazz\n-                        .getDeclaredConstructor()\n-                        .newInstance();\n-            } catch (InstantiationException | IllegalAccessException\n-                    | NoSuchMethodException | InvocationTargetException e) {\n-                String errorMsg = String.format(\"Error while registering custom Serde: %s\", e.getLocalizedMessage());\n-                log.error(errorMsg);\n-                throw new UnableToAddSerdeException(errorMsg, e);\n-            }\n+            Serde serde = (Serde) injector.instantiate(clazz);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f211d1248f4b0fa9eb8e819fcb3d89d2364f0b02"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MzA2MzMz", "url": "https://github.com/yahoo/elide/pull/1528#pullrequestreview-486306333", "createdAt": "2020-09-10T20:59:48Z", "commit": {"oid": "f211d1248f4b0fa9eb8e819fcb3d89d2364f0b02"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04fbd24ed99e37b88bd49576ad5274e597d118fb", "author": {"user": null}, "url": "https://github.com/yahoo/elide/commit/04fbd24ed99e37b88bd49576ad5274e597d118fb", "committedDate": "2020-09-10T21:36:09Z", "message": "Fixed codacy issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MzI4NzQ3", "url": "https://github.com/yahoo/elide/pull/1528#pullrequestreview-486328747", "createdAt": "2020-09-10T21:38:13Z", "commit": {"oid": "04fbd24ed99e37b88bd49576ad5274e597d118fb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 823, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}