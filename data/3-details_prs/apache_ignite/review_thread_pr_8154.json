{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3OTk3NDQy", "number": 8154, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNzo1OToyNFrOEY8C5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNzo1OToyNFrOEY8C5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NTg1MDYwOnYy", "diffSide": "RIGHT", "path": "modules/ducktests/tests/setup.py", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNzo1OToyNFrOHBeSng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjoxMTo1M1rOHBmLMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTMwNjkxMA==", "bodyText": "As for me, monotonic is install_required, and pytest and mock is not needed at all", "url": "https://github.com/apache/ignite/pull/8154#discussion_r471306910", "createdAt": "2020-08-17T07:59:24Z", "author": {"login": "ivandasch"}, "path": "modules/ducktests/tests/setup.py", "diffHunk": "@@ -14,46 +14,22 @@\n # limitations under the License.\n \n import re\n-import sys\n-\n from setuptools import find_packages, setup\n-from setuptools.command.test import test as TestCommand\n \n-version = ''\n+\n with open('ignitetest/__init__.py', 'r') as fd:\n     version = re.search(r'^__version__\\s*=\\s*[\\'\"]([^\\'\"]*)[\\'\"]', fd.read(), re.MULTILINE).group(1)\n \n \n-class PyTest(TestCommand):\n-    user_options = [('pytest-args=', 'a', \"Arguments to pass to py.test\")]\n-\n-    def initialize_options(self):\n-        TestCommand.initialize_options(self)\n-        self.pytest_args = []\n-\n-    def finalize_options(self):\n-        TestCommand.finalize_options(self)\n-        self.test_args = []\n-        self.test_suite = True\n-\n-    def run_tests(self):\n-        # import here, cause outside the eggs aren't loaded\n-        import pytest\n-        print(self.pytest_args)\n-        errno = pytest.main(self.pytest_args)\n-        sys.exit(errno)\n-\n-\n # Note: when changing the version of ducktape, also revise tests/docker/Dockerfile\n setup(name=\"ignitetest\",\n       version=version,\n       description=\"Apache Ignite System Tests\",\n       author=\"Apache Ignite\",\n       platforms=[\"any\"],\n       license=\"apache2.0\",\n-      packages=find_packages(),\n+      packages=find_packages(exclude=[\"ignitetest.tests\", \"ignitetest.tests.*\"]),\n       include_package_data=True,\n-      install_requires=[\"ducktape==0.7.8\", \"requests==2.20.0\"],\n-      tests_require=[\"pytest\", \"mock\", \"monotonic\"],\n-      cmdclass={'test': PyTest}\n+      install_requires=[\"ducktape==0.7.8\", \"requests==2.22.0\"],\n+      tests_require=[\"pytest\", \"mock\", \"monotonic\"]\n )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ffeae213d3904e61f4976ac5a83ea15c95c7edc"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQzNjA4Mg==", "bodyText": "fixed", "url": "https://github.com/apache/ignite/pull/8154#discussion_r471436082", "createdAt": "2020-08-17T12:11:53Z", "author": {"login": "timoninmaxim"}, "path": "modules/ducktests/tests/setup.py", "diffHunk": "@@ -14,46 +14,22 @@\n # limitations under the License.\n \n import re\n-import sys\n-\n from setuptools import find_packages, setup\n-from setuptools.command.test import test as TestCommand\n \n-version = ''\n+\n with open('ignitetest/__init__.py', 'r') as fd:\n     version = re.search(r'^__version__\\s*=\\s*[\\'\"]([^\\'\"]*)[\\'\"]', fd.read(), re.MULTILINE).group(1)\n \n \n-class PyTest(TestCommand):\n-    user_options = [('pytest-args=', 'a', \"Arguments to pass to py.test\")]\n-\n-    def initialize_options(self):\n-        TestCommand.initialize_options(self)\n-        self.pytest_args = []\n-\n-    def finalize_options(self):\n-        TestCommand.finalize_options(self)\n-        self.test_args = []\n-        self.test_suite = True\n-\n-    def run_tests(self):\n-        # import here, cause outside the eggs aren't loaded\n-        import pytest\n-        print(self.pytest_args)\n-        errno = pytest.main(self.pytest_args)\n-        sys.exit(errno)\n-\n-\n # Note: when changing the version of ducktape, also revise tests/docker/Dockerfile\n setup(name=\"ignitetest\",\n       version=version,\n       description=\"Apache Ignite System Tests\",\n       author=\"Apache Ignite\",\n       platforms=[\"any\"],\n       license=\"apache2.0\",\n-      packages=find_packages(),\n+      packages=find_packages(exclude=[\"ignitetest.tests\", \"ignitetest.tests.*\"]),\n       include_package_data=True,\n-      install_requires=[\"ducktape==0.7.8\", \"requests==2.20.0\"],\n-      tests_require=[\"pytest\", \"mock\", \"monotonic\"],\n-      cmdclass={'test': PyTest}\n+      install_requires=[\"ducktape==0.7.8\", \"requests==2.22.0\"],\n+      tests_require=[\"pytest\", \"mock\", \"monotonic\"]\n )", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTMwNjkxMA=="}, "originalCommit": {"oid": "0ffeae213d3904e61f4976ac5a83ea15c95c7edc"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2714, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}