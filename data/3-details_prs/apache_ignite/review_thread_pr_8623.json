{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2NDY5MzI0", "number": 8623, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxMzoxNjo1MVrOFJxTvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQwNzozNjoxOVrOFVD4ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1Nzg5Mzc1OnYy", "diffSide": "RIGHT", "path": "modules/ducktests/tests/certs/functions.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxMzoxNjo1MVrOIMPFlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOFQyMTo0OTowOFrOIV3-EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTcwMTAxNA==", "bodyText": "Please check bash checkstyle with Inteliij IDEA plugin. It will write down all possible issues. At least ${PSWD} must be in quotes, as it can contain special symbols like &.", "url": "https://github.com/apache/ignite/pull/8623#discussion_r549701014", "createdAt": "2020-12-29T13:16:51Z", "author": {"login": "timoninmaxim"}, "path": "modules/ducktests/tests/certs/functions.sh", "diffHunk": "@@ -0,0 +1,92 @@\n+#!/usr/bin/env bash\n+\n+function makeRoot() {\n+    ALIAS=$1\n+    DNAME=$2\n+    PSWD=$3\n+\n+    if [[ ${ALIAS} == \"\" ]] || [[ ${DNAME} == \"\" ]] || [[ ${PSWD} == \"\" ]]\n+    then\n+        error \"makeRoot: Need ALIAS, DNAME, PSWD\"\n+    fi\n+\n+    rm ${ALIAS}.jks\n+    rm ${ALIAS}.pem\n+\n+    keytool -genkeypair -keystore ${ALIAS}.jks -alias ${ALIAS} -dname \"${DNAME}\" -ext bc:c -storepass ${PSWD} \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb85bd4a9928639f02da1a2ad0893a5973175bf9"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1OTgwODAxNw==", "bodyText": "fixed", "url": "https://github.com/apache/ignite/pull/8623#discussion_r559808017", "createdAt": "2021-01-18T21:49:08Z", "author": {"login": "Sega76"}, "path": "modules/ducktests/tests/certs/functions.sh", "diffHunk": "@@ -0,0 +1,92 @@\n+#!/usr/bin/env bash\n+\n+function makeRoot() {\n+    ALIAS=$1\n+    DNAME=$2\n+    PSWD=$3\n+\n+    if [[ ${ALIAS} == \"\" ]] || [[ ${DNAME} == \"\" ]] || [[ ${PSWD} == \"\" ]]\n+    then\n+        error \"makeRoot: Need ALIAS, DNAME, PSWD\"\n+    fi\n+\n+    rm ${ALIAS}.jks\n+    rm ${ALIAS}.pem\n+\n+    keytool -genkeypair -keystore ${ALIAS}.jks -alias ${ALIAS} -dname \"${DNAME}\" -ext bc:c -storepass ${PSWD} \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTcwMTAxNA=="}, "originalCommit": {"oid": "fb85bd4a9928639f02da1a2ad0893a5973175bf9"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1NzkxMjA5OnYy", "diffSide": "RIGHT", "path": "modules/ducktests/tests/docker/run_tests.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxMzoyNTozN1rOIMPPzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOFQyMTo0OToxN1rOIV3-PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTcwMzYzMA==", "bodyText": "This is mechanism for docker env. How is it going to be distributed on real nodes on Jenkins?", "url": "https://github.com/apache/ignite/pull/8623#discussion_r549703630", "createdAt": "2020-12-29T13:25:37Z", "author": {"login": "timoninmaxim"}, "path": "modules/ducktests/tests/docker/run_tests.sh", "diffHunk": "@@ -158,5 +158,7 @@ if [[ -n \"$MAX_PARALLEL\" ]]; then\n   DUCKTAPE_OPTIONS=\"$DUCKTAPE_OPTIONS --max-parallel $MAX_PARALLEL\"\n fi\n \n+\"$SCRIPT_DIR\"/../certs/mkcerts.sh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb85bd4a9928639f02da1a2ad0893a5973175bf9"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1OTgwODA2MQ==", "bodyText": "first certificates are generated, then copied to the nodes", "url": "https://github.com/apache/ignite/pull/8623#discussion_r559808061", "createdAt": "2021-01-18T21:49:17Z", "author": {"login": "Sega76"}, "path": "modules/ducktests/tests/docker/run_tests.sh", "diffHunk": "@@ -158,5 +158,7 @@ if [[ -n \"$MAX_PARALLEL\" ]]; then\n   DUCKTAPE_OPTIONS=\"$DUCKTAPE_OPTIONS --max-parallel $MAX_PARALLEL\"\n fi\n \n+\"$SCRIPT_DIR\"/../certs/mkcerts.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTcwMzYzMA=="}, "originalCommit": {"oid": "fb85bd4a9928639f02da1a2ad0893a5973175bf9"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1NzkxOTI2OnYy", "diffSide": "RIGHT", "path": "modules/ducktests/tests/ignitetest/services/utils/control_utility.py", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxMzoyODozMVrOIMPToA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOFQyMTo0OTozMFrOIV3-jA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTcwNDYwOA==", "bodyText": "Password 123456 is a magic variable. Are there any alternatives? Config, global variable, param, or smth else?\nAt least setting global variable in run_tests.sh looks better.", "url": "https://github.com/apache/ignite/pull/8623#discussion_r549704608", "createdAt": "2020-12-29T13:28:31Z", "author": {"login": "timoninmaxim"}, "path": "modules/ducktests/tests/ignitetest/services/utils/control_utility.py", "diffHunk": "@@ -31,9 +31,17 @@ class ControlUtility:\n     \"\"\"\n     BASE_COMMAND = \"control.sh\"\n \n-    def __init__(self, cluster, text_context):\n+    def __init__(self, cluster,\n+                 key_store_jks: str = None, key_store_pwd: str = \"123456\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb85bd4a9928639f02da1a2ad0893a5973175bf9"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1OTgwODE0MA==", "bodyText": "fixed", "url": "https://github.com/apache/ignite/pull/8623#discussion_r559808140", "createdAt": "2021-01-18T21:49:30Z", "author": {"login": "Sega76"}, "path": "modules/ducktests/tests/ignitetest/services/utils/control_utility.py", "diffHunk": "@@ -31,9 +31,17 @@ class ControlUtility:\n     \"\"\"\n     BASE_COMMAND = \"control.sh\"\n \n-    def __init__(self, cluster, text_context):\n+    def __init__(self, cluster,\n+                 key_store_jks: str = None, key_store_pwd: str = \"123456\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTcwNDYwOA=="}, "originalCommit": {"oid": "fb85bd4a9928639f02da1a2ad0893a5973175bf9"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1NzkzOTE5OnYy", "diffSide": "RIGHT", "path": "modules/ducktests/tests/ignitetest/tests/ssl_test.py", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxMzozNzo1OFrOIMPfGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOFQyMTo1MTowOVrOIV4Aug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTcwNzU0NA==", "bodyText": "Actually do we need check of LATEST versions?", "url": "https://github.com/apache/ignite/pull/8623#discussion_r549707544", "createdAt": "2020-12-29T13:37:58Z", "author": {"login": "timoninmaxim"}, "path": "modules/ducktests/tests/ignitetest/tests/ssl_test.py", "diffHunk": "@@ -0,0 +1,70 @@\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\"\"\"\n+This module contains ssl tests.\n+\"\"\"\n+from ignitetest.services.ignite import IgniteService\n+from ignitetest.services.ignite_app import IgniteApplicationService\n+from ignitetest.services.utils.control_utility import ControlUtility\n+from ignitetest.services.utils.ignite_configuration import IgniteConfiguration, SslContextFactory\n+from ignitetest.services.utils.ignite_configuration.connector_configuration import ConnectorConfiguration\n+from ignitetest.services.utils.ignite_configuration.discovery import from_ignite_cluster\n+from ignitetest.utils import ignite_versions, cluster\n+from ignitetest.utils.ignite_test import IgniteTest\n+from ignitetest.utils.version import DEV_BRANCH, IgniteVersion, LATEST_2_9, LATEST_2_8\n+\n+\n+# pylint: disable=W0223\n+class SslTest(IgniteTest):\n+    \"\"\"\n+    Ssl test.\n+    \"\"\"\n+    @cluster(num_nodes=3)\n+    @ignite_versions(str(DEV_BRANCH), str(LATEST_2_9), str(LATEST_2_8))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ac1a048dd7940450153f9a55d3e548c92127766"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1OTgwODY5OA==", "bodyText": "I think yes, these versions are now used", "url": "https://github.com/apache/ignite/pull/8623#discussion_r559808698", "createdAt": "2021-01-18T21:51:09Z", "author": {"login": "Sega76"}, "path": "modules/ducktests/tests/ignitetest/tests/ssl_test.py", "diffHunk": "@@ -0,0 +1,70 @@\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\"\"\"\n+This module contains ssl tests.\n+\"\"\"\n+from ignitetest.services.ignite import IgniteService\n+from ignitetest.services.ignite_app import IgniteApplicationService\n+from ignitetest.services.utils.control_utility import ControlUtility\n+from ignitetest.services.utils.ignite_configuration import IgniteConfiguration, SslContextFactory\n+from ignitetest.services.utils.ignite_configuration.connector_configuration import ConnectorConfiguration\n+from ignitetest.services.utils.ignite_configuration.discovery import from_ignite_cluster\n+from ignitetest.utils import ignite_versions, cluster\n+from ignitetest.utils.ignite_test import IgniteTest\n+from ignitetest.utils.version import DEV_BRANCH, IgniteVersion, LATEST_2_9, LATEST_2_8\n+\n+\n+# pylint: disable=W0223\n+class SslTest(IgniteTest):\n+    \"\"\"\n+    Ssl test.\n+    \"\"\"\n+    @cluster(num_nodes=3)\n+    @ignite_versions(str(DEV_BRANCH), str(LATEST_2_9), str(LATEST_2_8))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTcwNzU0NA=="}, "originalCommit": {"oid": "0ac1a048dd7940450153f9a55d3e548c92127766"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzU3NjI4MDQyOnYy", "diffSide": "LEFT", "path": "modules/ducktests/tests/ignitetest/services/ignite_app.py", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQwNzozNjoxOVrOIdUTpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQwNzozNjoxOVrOIdUTpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzYxMjMyNA==", "bodyText": "Why this change?", "url": "https://github.com/apache/ignite/pull/8623#discussion_r567612324", "createdAt": "2021-02-01T07:36:19Z", "author": {"login": "nizhikov"}, "path": "modules/ducktests/tests/ignitetest/services/ignite_app.py", "diffHunk": "@@ -16,14 +16,14 @@\n \"\"\"\n This module contains the base class to build Ignite aware application written on java.\n \"\"\"\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5269416901a18b507738d2e59983160d8cde8df8"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2390, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}