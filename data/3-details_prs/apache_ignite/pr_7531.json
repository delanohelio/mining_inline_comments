{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3ODA5Njgx", "number": 7531, "title": "IGNITE-12779 : Split implementations of Ignite and IgniteMXBean, make behavior of their active(boolean) different ", "bodyText": "Behavior changes:\nIgniteMXBean.active(false) and IgniteMXBean.state(\"inactive\") now throw an exception if deactivation would clear in-memory data.\nMajor code changes:\n\nImplementation of IgniteMXBean extracted from IgniteKernal and put in IgniteMXBeanImpl.\nAdded IgniteMXBean.state(String, boolean)\nDeprecated IgniteMXBean.active(boolean) and IgniteMXBean.state(ClusterState)\n\nAdditionally, as discussed, improved comments\n/** If {@code true}, cluster deactivation will be forced. */\nto more complete descriptions.", "createdAt": "2020-03-13T14:34:07Z", "url": "https://github.com/apache/ignite/pull/7531", "merged": true, "mergeCommit": {"oid": "097773ce8d1eaed9a73af09fedf112739c45f191"}, "closed": true, "closedAt": "2021-09-16T11:11:19Z", "author": {"login": "Vladsz83"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNRBqbAH2gAyMzg3ODA5NjgxOjhkYjRjZWE5NjEwMjU0MmRmM2IzNmM2NWU2MWI0OGFkM2FkYTZjY2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABe-5KKfgFqTc1NjE2MDk2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8db4cea96102542df3b36c65e61b48ad3ada6ccc", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/8db4cea96102542df3b36c65e61b48ad3ada6ccc", "committedDate": "2020-03-13T14:17:18Z", "message": "IGNITE-12779 : alpha."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a000843c62d74798b96f50f1d7ec8f0880b036af", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/a000843c62d74798b96f50f1d7ec8f0880b036af", "committedDate": "2020-03-16T13:45:21Z", "message": "IGNITE-12779 : fix of the test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "993a9efe7635f6bd7cfb230b45f51935e0f6c319", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/993a9efe7635f6bd7cfb230b45f51935e0f6c319", "committedDate": "2020-03-17T12:27:21Z", "message": "IGNITE-12779 : no change of public api."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1OTkxNzQx", "url": "https://github.com/apache/ignite/pull/7531#pullrequestreview-375991741", "createdAt": "2020-03-17T12:35:21Z", "commit": {"oid": "a000843c62d74798b96f50f1d7ec8f0880b036af"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMjozNToyMVrOF3aQmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMjozOTozMVrOF3aZFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzY0NjIzNQ==", "bodyText": "I suggest leaving this method only in the bean.", "url": "https://github.com/apache/ignite/pull/7531#discussion_r393646235", "createdAt": "2020-03-17T12:35:21Z", "author": {"login": "NSAmelchev"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/IgniteKernal.java", "diffHunk": "@@ -3586,6 +3305,26 @@ private void checkNearCacheStarted(IgniteCacheProxy<?, ?> cache) throws IgniteCh\n                 \"(a cache with the same name without near cache is already started)\");\n     }\n \n+    /**\n+     * This method allows manually remove the checkpoint with given {@code key}.\n+     *\n+     * @param key Checkpoint key.\n+     * @return {@code true} if specified checkpoint was indeed removed, {@code false}\n+     *      otherwise.\n+     */\n+    boolean removeCheckpoint(String key) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a000843c62d74798b96f50f1d7ec8f0880b036af"}, "originalPosition": 431}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzY0NjQ3MQ==", "bodyText": "name -> instanceName", "url": "https://github.com/apache/ignite/pull/7531#discussion_r393646471", "createdAt": "2020-03-17T12:35:48Z", "author": {"login": "NSAmelchev"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/IgniteKernal.java", "diffHunk": "@@ -4618,32 +4357,32 @@ private void registerMetrics() {\n \n         MetricRegistry reg = ctx.metric().registry(GridMetricManager.IGNITE_METRICS);\n \n-        reg.register(\"fullVersion\", this::getFullVersion, String.class, FULL_VER_DESC);\n-        reg.register(\"copyright\", this::getCopyright, String.class, COPYRIGHT_DESC);\n+        reg.register(\"fullVersion\", this::fullVersion, String.class, FULL_VER_DESC);\n+        reg.register(\"copyright\", () -> COPYRIGHT, String.class, COPYRIGHT_DESC);\n \n-        reg.register(\"startTimestampFormatted\", this::getStartTimestampFormatted, String.class,\n+        reg.register(\"startTimestampFormatted\", this::startTimeFormatted, String.class,\n             START_TIMESTAMP_FORMATTED_DESC);\n \n         reg.register(\"isRebalanceEnabled\", this::isRebalanceEnabled, IS_REBALANCE_ENABLED_DESC);\n-        reg.register(\"uptimeFormatted\", this::getUpTimeFormatted, String.class, UPTIME_FORMATTED_DESC);\n-        reg.register(\"startTimestamp\", this::getStartTimestamp, START_TIMESTAMP_DESC);\n-        reg.register(\"uptime\", this::getUpTime, UPTIME_DESC);\n-        reg.register(\"osInformation\", this::getOsInformation, String.class, OS_INFO_DESC);\n-        reg.register(\"jdkInformation\", this::getJdkInformation, String.class, JDK_INFO_DESC);\n-        reg.register(\"osUser\", this::getOsUser, String.class, OS_USER_DESC);\n-        reg.register(\"vmName\", this::getVmName, String.class, VM_NAME_DESC);\n-        reg.register(\"instanceName\", this::getInstanceName, String.class, INSTANCE_NAME_DESC);\n-\n-        reg.register(\"currentCoordinatorFormatted\", this::getCurrentCoordinatorFormatted, String.class,\n+        reg.register(\"uptimeFormatted\", this::upTimeFormatted, String.class, UPTIME_FORMATTED_DESC);\n+        reg.register(\"startTimestamp\", this::startTimestamp, START_TIMESTAMP_DESC);\n+        reg.register(\"uptime\", this::upTime, UPTIME_DESC);\n+        reg.register(\"osInformation\", this::osInformation, String.class, OS_INFO_DESC);\n+        reg.register(\"jdkInformation\", this::jdkInformation, String.class, JDK_INFO_DESC);\n+        reg.register(\"osUser\", this::osUser, String.class, OS_USER_DESC);\n+        reg.register(\"vmName\", this::vmName, String.class, VM_NAME_DESC);\n+        reg.register(\"instanceName\", this::name, String.class, INSTANCE_NAME_DESC);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a000843c62d74798b96f50f1d7ec8f0880b036af"}, "originalPosition": 489}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzY0NzQ3NA==", "bodyText": "Can be inlined", "url": "https://github.com/apache/ignite/pull/7531#discussion_r393647474", "createdAt": "2020-03-17T12:37:42Z", "author": {"login": "NSAmelchev"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/IgniteKernal.java", "diffHunk": "@@ -4652,53 +4391,353 @@ private void registerMetrics() {\n         reg.register(\"clusterState\", this::clusterState, String.class, CLUSTER_STATE_DESC);\n         reg.register(\"lastClusterStateChangeTime\", this::lastClusterStateChangeTime, LAST_CLUSTER_STATE_CHANGE_TIME_DESC);\n \n-        reg.register(\"userAttributesFormatted\", this::getUserAttributesFormatted, List.class,\n+        reg.register(\"userAttributesFormatted\", this::userAttributesFormatted, List.class,\n             USER_ATTRS_FORMATTED_DESC);\n \n-        reg.register(\"gridLoggerFormatted\", this::getGridLoggerFormatted, String.class,\n+        reg.register(\"gridLoggerFormatted\", this::gridLoggerFormatted, String.class,\n             GRID_LOG_FORMATTED_DESC);\n \n-        reg.register(\"executorServiceFormatted\", this::getExecutorServiceFormatted, String.class,\n+        reg.register(\"executorServiceFormatted\", this::executorServiceFormatted, String.class,\n             EXECUTOR_SRVC_FORMATTED_DESC);\n \n-        reg.register(\"igniteHome\", this::getIgniteHome, String.class, IGNITE_HOME_DESC);\n+        reg.register(\"igniteHome\", this::igniteHome, String.class, IGNITE_HOME_DESC);\n \n-        reg.register(\"mBeanServerFormatted\", this::getMBeanServerFormatted, String.class,\n+        reg.register(\"mBeanServerFormatted\", this::mbeanServerFormatted, String.class,\n             MBEAN_SERVER_FORMATTED_DESC);\n \n         reg.register(\"localNodeId\", this::getLocalNodeId, UUID.class, LOC_NODE_ID_DESC);\n \n-        reg.register(\"isPeerClassLoadingEnabled\", this::isPeerClassLoadingEnabled, Boolean.class,\n+        reg.register(\"isPeerClassLoadingEnabled\", this::peerClassLoadingEnabled, Boolean.class,\n             IS_PEER_CLS_LOADING_ENABLED_DESC);\n \n-        reg.register(\"lifecycleBeansFormatted\", this::getLifecycleBeansFormatted, List.class,\n+        reg.register(\"lifecycleBeansFormatted\", this::lifecycleBeansFormatted, List.class,\n             LIFECYCLE_BEANS_FORMATTED_DESC);\n \n-        reg.register(\"discoverySpiFormatted\", this::getDiscoverySpiFormatted, String.class,\n+        reg.register(\"discoverySpiFormatted\", this::discoverySpiFormatted, String.class,\n             DISCOVERY_SPI_FORMATTED_DESC);\n \n-        reg.register(\"communicationSpiFormatted\", this::getCommunicationSpiFormatted, String.class,\n+        reg.register(\"communicationSpiFormatted\", this::communicationSpiFormatted, String.class,\n             COMMUNICATION_SPI_FORMATTED_DESC);\n \n-        reg.register(\"deploymentSpiFormatted\", this::getDeploymentSpiFormatted, String.class,\n+        reg.register(\"deploymentSpiFormatted\", this::deploymentSpiFormatted, String.class,\n             DEPLOYMENT_SPI_FORMATTED_DESC);\n \n-        reg.register(\"checkpointSpiFormatted\", this::getCheckpointSpiFormatted, String.class,\n+        reg.register(\"checkpointSpiFormatted\", this::checkpointSpiFormatted, String.class,\n             CHECKPOINT_SPI_FORMATTED_DESC);\n \n-        reg.register(\"collisionSpiFormatted\", this::getCollisionSpiFormatted, String.class,\n+        reg.register(\"collisionSpiFormatted\", this::collisionSpiFormatted, String.class,\n             COLLISION_SPI_FORMATTED_DESC);\n \n-        reg.register(\"eventStorageSpiFormatted\", this::getEventStorageSpiFormatted, String.class,\n+        reg.register(\"eventStorageSpiFormatted\", this::eventStorageSpiFormatted, String.class,\n             EVT_STORAGE_SPI_FORMATTED_DESC);\n \n-        reg.register(\"failoverSpiFormatted\", this::getFailoverSpiFormatted, String.class,\n+        reg.register(\"failoverSpiFormatted\", this::failoverSpiFormatted, String.class,\n             FAILOVER_SPI_FORMATTED_DESC);\n \n-        reg.register(\"loadBalancingSpiFormatted\", this::getLoadBalancingSpiFormatted, String.class,\n+        reg.register(\"loadBalancingSpiFormatted\", this::loadBalancingSpiFormatted, String.class,\n             LOAD_BALANCING_SPI_FORMATTED_DESC);\n     }\n \n+    /**\n+     * @return String representation of version of current Ignite instance.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a000843c62d74798b96f50f1d7ec8f0880b036af"}, "originalPosition": 575}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzY0ODQwNw==", "bodyText": "Create mbean var, please", "url": "https://github.com/apache/ignite/pull/7531#discussion_r393648407", "createdAt": "2020-03-17T12:39:31Z", "author": {"login": "NSAmelchev"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/managers/IgniteMBeansManager.java", "diffHunk": "@@ -131,7 +132,7 @@ public void registerAllMBeans(\n             return;\n \n         // Kernal\n-        registerMBean(\"Kernal\", IgniteKernal.class.getSimpleName(), kernal, IgniteMXBean.class);\n+        registerMBean(\"Kernal\", IgniteKernal.class.getSimpleName(), new IgniteMXBeanImpl(kernal), IgniteMXBean.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a000843c62d74798b96f50f1d7ec8f0880b036af"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1OTk1ODc1", "url": "https://github.com/apache/ignite/pull/7531#pullrequestreview-375995875", "createdAt": "2020-03-17T12:41:31Z", "commit": {"oid": "993a9efe7635f6bd7cfb230b45f51935e0f6c319"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMjo0MTozMlrOF3adsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMjo0MTozMlrOF3adsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzY0OTU4NA==", "bodyText": "Why this changed?", "url": "https://github.com/apache/ignite/pull/7531#discussion_r393649584", "createdAt": "2020-03-17T12:41:32Z", "author": {"login": "NSAmelchev"}, "path": "modules/core/src/main/java/org/apache/ignite/IgniteCluster.java", "diffHunk": "@@ -455,9 +455,6 @@\n \n     /**\n      * Changes Ignite grid state to active or inactive.\n-     * <p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "993a9efe7635f6bd7cfb230b45f51935e0f6c319"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MDEyODU2", "url": "https://github.com/apache/ignite/pull/7531#pullrequestreview-376012856", "createdAt": "2020-03-17T13:05:01Z", "commit": {"oid": "993a9efe7635f6bd7cfb230b45f51935e0f6c319"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMzowNTowMVrOF3bSOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMzowNTowMVrOF3bSOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzY2MzAzNA==", "bodyText": "Lets create printLastErrors in the kerrnal like osUser methods. Log will not be needed.", "url": "https://github.com/apache/ignite/pull/7531#discussion_r393663034", "createdAt": "2020-03-17T13:05:01Z", "author": {"login": "NSAmelchev"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/IgniteMXBeanImpl.java", "diffHunk": "@@ -0,0 +1,341 @@\n+package org.apache.ignite.internal;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.UUID;\n+import javax.management.JMException;\n+import org.apache.ignite.IgniteCheckedException;\n+import org.apache.ignite.IgniteException;\n+import org.apache.ignite.IgniteLogger;\n+import org.apache.ignite.cluster.ClusterNode;\n+import org.apache.ignite.cluster.ClusterState;\n+import org.apache.ignite.internal.util.typedef.internal.A;\n+import org.apache.ignite.internal.util.typedef.internal.U;\n+import org.apache.ignite.mxbean.IgniteMXBean;\n+\n+import static org.apache.ignite.cluster.ClusterState.ACTIVE;\n+import static org.apache.ignite.cluster.ClusterState.INACTIVE;\n+import static org.apache.ignite.internal.IgniteVersionUtils.COPYRIGHT;\n+\n+/** Implementation of Ignite mxBean. */\n+public class IgniteMXBeanImpl implements IgniteMXBean {\n+    /** Ignite core to work with. */\n+    private final IgniteKernal kernal;\n+\n+    /** Logger, same as for IgniteKernal. */\n+    private final IgniteLogger log;\n+\n+    /**\n+     * @param kernal Ignite kernel to work with.\n+     */\n+    public IgniteMXBeanImpl(IgniteKernal kernal) {\n+        this.kernal = kernal;\n+\n+        this.log = kernal.context().log(IgniteKernal.class);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean active() {\n+        kernal.context().gateway().readLock();\n+\n+        try {\n+            return kernal.context().state().publicApiActiveState(true);\n+        }\n+        finally {\n+            kernal.context().gateway().readUnlock();\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void active(boolean active) {\n+        clusterState(active ? ACTIVE.toString() : INACTIVE.toString(), false);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCopyright() {\n+        return COPYRIGHT;\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public long getStartTimestamp() {\n+        return kernal.startTimestamp();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getStartTimestampFormatted() {\n+        return kernal.startTimeFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public long getUpTime() {\n+        return kernal.upTime();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public long getLongJVMPausesCount() {\n+        return kernal.longJVMPausesCount();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public long getLongJVMPausesTotalDuration() {\n+        return kernal.longJVMPausesTotalDuration();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public Map<Long, Long> getLongJVMPauseLastEvents() {\n+        return kernal.longJVMPauseLastEvents();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getUpTimeFormatted() {\n+        return kernal.upTimeFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getFullVersion() {\n+        return kernal.fullVersion();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCheckpointSpiFormatted() {\n+        return kernal.checkpointSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCurrentCoordinatorFormatted() {\n+        return kernal.currentCoordinatorFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean isNodeInBaseline() {\n+       return kernal.nodeInBaseline();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCommunicationSpiFormatted() {\n+        return kernal.communicationSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getDeploymentSpiFormatted() {\n+        return kernal.deploymentSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getDiscoverySpiFormatted() {\n+        return kernal.discoverySpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getEventStorageSpiFormatted() {\n+        return kernal.eventStorageSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCollisionSpiFormatted() {\n+        return kernal.collisionSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getFailoverSpiFormatted() {\n+        return kernal.failoverSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getLoadBalancingSpiFormatted() {\n+        return kernal.loadBalancingSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getOsInformation() {\n+        return kernal.osInformation();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getJdkInformation() {\n+        return kernal.jdkInformation();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getOsUser() {\n+        return kernal.osUser();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void printLastErrors() {\n+        kernal.context().exceptionRegistry().printErrors(log);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "993a9efe7635f6bd7cfb230b45f51935e0f6c319"}, "originalPosition": 167}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MDIwODEx", "url": "https://github.com/apache/ignite/pull/7531#pullrequestreview-376020811", "createdAt": "2020-03-17T13:15:14Z", "commit": {"oid": "993a9efe7635f6bd7cfb230b45f51935e0f6c319"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMzoxNToxNFrOF3bqnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMzoxNToxNFrOF3bqnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzY2OTI3OQ==", "bodyText": "Lets use isRebalanceEnabled from kernal", "url": "https://github.com/apache/ignite/pull/7531#discussion_r393669279", "createdAt": "2020-03-17T13:15:14Z", "author": {"login": "NSAmelchev"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/IgniteMXBeanImpl.java", "diffHunk": "@@ -0,0 +1,341 @@\n+package org.apache.ignite.internal;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.UUID;\n+import javax.management.JMException;\n+import org.apache.ignite.IgniteCheckedException;\n+import org.apache.ignite.IgniteException;\n+import org.apache.ignite.IgniteLogger;\n+import org.apache.ignite.cluster.ClusterNode;\n+import org.apache.ignite.cluster.ClusterState;\n+import org.apache.ignite.internal.util.typedef.internal.A;\n+import org.apache.ignite.internal.util.typedef.internal.U;\n+import org.apache.ignite.mxbean.IgniteMXBean;\n+\n+import static org.apache.ignite.cluster.ClusterState.ACTIVE;\n+import static org.apache.ignite.cluster.ClusterState.INACTIVE;\n+import static org.apache.ignite.internal.IgniteVersionUtils.COPYRIGHT;\n+\n+/** Implementation of Ignite mxBean. */\n+public class IgniteMXBeanImpl implements IgniteMXBean {\n+    /** Ignite core to work with. */\n+    private final IgniteKernal kernal;\n+\n+    /** Logger, same as for IgniteKernal. */\n+    private final IgniteLogger log;\n+\n+    /**\n+     * @param kernal Ignite kernel to work with.\n+     */\n+    public IgniteMXBeanImpl(IgniteKernal kernal) {\n+        this.kernal = kernal;\n+\n+        this.log = kernal.context().log(IgniteKernal.class);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean active() {\n+        kernal.context().gateway().readLock();\n+\n+        try {\n+            return kernal.context().state().publicApiActiveState(true);\n+        }\n+        finally {\n+            kernal.context().gateway().readUnlock();\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void active(boolean active) {\n+        clusterState(active ? ACTIVE.toString() : INACTIVE.toString(), false);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCopyright() {\n+        return COPYRIGHT;\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public long getStartTimestamp() {\n+        return kernal.startTimestamp();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getStartTimestampFormatted() {\n+        return kernal.startTimeFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public long getUpTime() {\n+        return kernal.upTime();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public long getLongJVMPausesCount() {\n+        return kernal.longJVMPausesCount();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public long getLongJVMPausesTotalDuration() {\n+        return kernal.longJVMPausesTotalDuration();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public Map<Long, Long> getLongJVMPauseLastEvents() {\n+        return kernal.longJVMPauseLastEvents();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getUpTimeFormatted() {\n+        return kernal.upTimeFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getFullVersion() {\n+        return kernal.fullVersion();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCheckpointSpiFormatted() {\n+        return kernal.checkpointSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCurrentCoordinatorFormatted() {\n+        return kernal.currentCoordinatorFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean isNodeInBaseline() {\n+       return kernal.nodeInBaseline();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCommunicationSpiFormatted() {\n+        return kernal.communicationSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getDeploymentSpiFormatted() {\n+        return kernal.deploymentSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getDiscoverySpiFormatted() {\n+        return kernal.discoverySpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getEventStorageSpiFormatted() {\n+        return kernal.eventStorageSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCollisionSpiFormatted() {\n+        return kernal.collisionSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getFailoverSpiFormatted() {\n+        return kernal.failoverSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getLoadBalancingSpiFormatted() {\n+        return kernal.loadBalancingSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getOsInformation() {\n+        return kernal.osInformation();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getJdkInformation() {\n+        return kernal.jdkInformation();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getOsUser() {\n+        return kernal.osUser();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void printLastErrors() {\n+        kernal.context().exceptionRegistry().printErrors(log);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getVmName() {\n+        return kernal.vmName();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getInstanceName() {\n+        return kernal.name();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getExecutorServiceFormatted() {\n+        return kernal.executorServiceFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getIgniteHome() {\n+        return kernal.igniteHome();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getGridLoggerFormatted() {\n+        return kernal.gridLoggerFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getMBeanServerFormatted() {\n+        return kernal.mbeanServerFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public UUID getLocalNodeId() {\n+        return kernal.getLocalNodeId();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public List<String> getUserAttributesFormatted() {\n+        return kernal.userAttributesFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean isPeerClassLoadingEnabled() {\n+        return kernal.peerClassLoadingEnabled();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public List<String> getLifecycleBeansFormatted() {\n+        return kernal.lifecycleBeansFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String clusterState() {\n+        return kernal.clusterState();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public long lastClusterStateChangeTime() {\n+        return kernal.lastClusterStateChangeTime();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean removeCheckpoint(String key) {\n+        A.notNull(key, \"key\");\n+\n+        return kernal.removeCheckpoint(key);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean pingNode(String nodeId) {\n+        A.notNull(nodeId, \"nodeId\");\n+\n+        return kernal.cluster().pingNode(UUID.fromString(nodeId));\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void undeployTaskFromGrid(String taskName) throws JMException {\n+        A.notNull(taskName, \"taskName\");\n+\n+        try {\n+            kernal.compute().undeployTask(taskName);\n+        }\n+        catch (IgniteException e) {\n+            throw U.jmException(e);\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String executeTask(String taskName, String arg) throws JMException {\n+        try {\n+            return kernal.compute().execute(taskName, arg);\n+        }\n+        catch (IgniteException e) {\n+            throw U.jmException(e);\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean pingNodeByAddress(String host) {\n+        kernal.context().gateway().readLock();\n+\n+        try {\n+            for (ClusterNode n : kernal.cluster().nodes())\n+                if (n.addresses().contains(host))\n+                    return kernal.context().discovery().pingNode(n.id());\n+\n+            return false;\n+        }\n+        catch (IgniteCheckedException e) {\n+            throw U.convertException(e);\n+        }\n+        finally {\n+            kernal.context().gateway().readUnlock();\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void dumpDebugInfo() {\n+        kernal.dumpDebugInfo();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void runIoTest(\n+        long warmup,\n+        long duration,\n+        int threads,\n+        long maxLatency,\n+        int rangesCnt,\n+        int payLoadSize,\n+        boolean procFromNioThread\n+    ) {\n+        kernal.context().io().runIoTest(warmup, duration, threads, maxLatency, rangesCnt, payLoadSize,\n+            procFromNioThread, new ArrayList(kernal.context().cluster().get().forServers().forRemotes().nodes()));\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void clearNodeLocalMap() {\n+        kernal.context().cluster().get().clearNodeMap();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void clusterState(String state) {\n+        clusterState(state, false);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void clusterState(String state, boolean forceDeactivation) {\n+        ClusterState newState = ClusterState.valueOf(state);\n+\n+        kernal.context().gateway().readLock();\n+\n+        try {\n+            kernal.context().state().changeGlobalState(newState, forceDeactivation, kernal.context().cluster().get()\n+                .forServers().nodes(), false).get();\n+        }\n+        catch (IgniteCheckedException e) {\n+            throw U.convertException(e);\n+        }\n+        finally {\n+            kernal.context().gateway().readUnlock();\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean isRebalanceEnabled() {\n+        return kernal.context().cache().context().isRebalanceEnabled();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "993a9efe7635f6bd7cfb230b45f51935e0f6c319"}, "originalPosition": 334}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MDI2MTcw", "url": "https://github.com/apache/ignite/pull/7531#pullrequestreview-376026170", "createdAt": "2020-03-17T13:21:37Z", "commit": {"oid": "993a9efe7635f6bd7cfb230b45f51935e0f6c319"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMzoyMTozN1rOF3b6_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMzoyMTozN1rOF3b6_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzY3MzQ2OA==", "bodyText": "Lets use kernal.active()", "url": "https://github.com/apache/ignite/pull/7531#discussion_r393673468", "createdAt": "2020-03-17T13:21:37Z", "author": {"login": "NSAmelchev"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/IgniteMXBeanImpl.java", "diffHunk": "@@ -0,0 +1,341 @@\n+package org.apache.ignite.internal;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.UUID;\n+import javax.management.JMException;\n+import org.apache.ignite.IgniteCheckedException;\n+import org.apache.ignite.IgniteException;\n+import org.apache.ignite.IgniteLogger;\n+import org.apache.ignite.cluster.ClusterNode;\n+import org.apache.ignite.cluster.ClusterState;\n+import org.apache.ignite.internal.util.typedef.internal.A;\n+import org.apache.ignite.internal.util.typedef.internal.U;\n+import org.apache.ignite.mxbean.IgniteMXBean;\n+\n+import static org.apache.ignite.cluster.ClusterState.ACTIVE;\n+import static org.apache.ignite.cluster.ClusterState.INACTIVE;\n+import static org.apache.ignite.internal.IgniteVersionUtils.COPYRIGHT;\n+\n+/** Implementation of Ignite mxBean. */\n+public class IgniteMXBeanImpl implements IgniteMXBean {\n+    /** Ignite core to work with. */\n+    private final IgniteKernal kernal;\n+\n+    /** Logger, same as for IgniteKernal. */\n+    private final IgniteLogger log;\n+\n+    /**\n+     * @param kernal Ignite kernel to work with.\n+     */\n+    public IgniteMXBeanImpl(IgniteKernal kernal) {\n+        this.kernal = kernal;\n+\n+        this.log = kernal.context().log(IgniteKernal.class);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean active() {\n+        kernal.context().gateway().readLock();\n+\n+        try {\n+            return kernal.context().state().publicApiActiveState(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "993a9efe7635f6bd7cfb230b45f51935e0f6c319"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fded7148dfa3229f6be400e3d79a1cc12fb253ce", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/fded7148dfa3229f6be400e3d79a1cc12fb253ce", "committedDate": "2020-03-17T14:38:15Z", "message": "IGNITE-12779 : fixes after reviews."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79eb5be3c30e70a5391a55c2ae665e371ca94659", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/79eb5be3c30e70a5391a55c2ae665e371ca94659", "committedDate": "2020-03-17T15:08:13Z", "message": "IGNITE-12779 : minor tab fix."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MTM5NDM4", "url": "https://github.com/apache/ignite/pull/7531#pullrequestreview-376139438", "createdAt": "2020-03-17T15:23:25Z", "commit": {"oid": "79eb5be3c30e70a5391a55c2ae665e371ca94659"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNToyMzoyNVrOF3hPIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNToyMzoyNVrOF3hPIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc2MDU0NQ==", "bodyText": "Lets use kernal.rebalanceEnabled(rebalanceEnabled);", "url": "https://github.com/apache/ignite/pull/7531#discussion_r393760545", "createdAt": "2020-03-17T15:23:25Z", "author": {"login": "NSAmelchev"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/IgniteMXBeanImpl.java", "diffHunk": "@@ -0,0 +1,328 @@\n+package org.apache.ignite.internal;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.UUID;\n+import javax.management.JMException;\n+import org.apache.ignite.IgniteCheckedException;\n+import org.apache.ignite.IgniteException;\n+import org.apache.ignite.cluster.ClusterNode;\n+import org.apache.ignite.cluster.ClusterState;\n+import org.apache.ignite.internal.util.typedef.internal.A;\n+import org.apache.ignite.internal.util.typedef.internal.U;\n+import org.apache.ignite.mxbean.IgniteMXBean;\n+\n+import static org.apache.ignite.cluster.ClusterState.ACTIVE;\n+import static org.apache.ignite.cluster.ClusterState.INACTIVE;\n+import static org.apache.ignite.internal.IgniteVersionUtils.COPYRIGHT;\n+\n+/** Implementation of Ignite mxBean. */\n+public class IgniteMXBeanImpl implements IgniteMXBean {\n+    /** Ignite core to work with. */\n+    private final IgniteKernal kernal;\n+\n+    /**\n+     * @param kernal Ignite kernel to work with.\n+     */\n+    public IgniteMXBeanImpl(IgniteKernal kernal) {\n+        this.kernal = kernal;\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean active() {\n+        return kernal.active();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void active(boolean active) {\n+        clusterState(active ? ACTIVE.toString() : INACTIVE.toString(), false);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCopyright() {\n+        return COPYRIGHT;\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public long getStartTimestamp() {\n+        return kernal.startTimestamp();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getStartTimestampFormatted() {\n+        return kernal.startTimeFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public long getUpTime() {\n+        return kernal.upTime();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public long getLongJVMPausesCount() {\n+        return kernal.longJVMPausesCount();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public long getLongJVMPausesTotalDuration() {\n+        return kernal.longJVMPausesTotalDuration();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public Map<Long, Long> getLongJVMPauseLastEvents() {\n+        return kernal.longJVMPauseLastEvents();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getUpTimeFormatted() {\n+        return kernal.upTimeFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getFullVersion() {\n+        return kernal.fullVersion();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCheckpointSpiFormatted() {\n+        return kernal.checkpointSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCurrentCoordinatorFormatted() {\n+        return kernal.currentCoordinatorFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean isNodeInBaseline() {\n+       return kernal.nodeInBaseline();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCommunicationSpiFormatted() {\n+        return kernal.communicationSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getDeploymentSpiFormatted() {\n+        return kernal.deploymentSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getDiscoverySpiFormatted() {\n+        return kernal.discoverySpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getEventStorageSpiFormatted() {\n+        return kernal.eventStorageSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getCollisionSpiFormatted() {\n+        return kernal.collisionSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getFailoverSpiFormatted() {\n+        return kernal.failoverSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getLoadBalancingSpiFormatted() {\n+        return kernal.loadBalancingSpiFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getOsInformation() {\n+        return kernal.osInformation();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getJdkInformation() {\n+        return kernal.jdkInformation();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getOsUser() {\n+        return kernal.osUser();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void printLastErrors() {\n+        kernal.printLastErrors();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getVmName() {\n+        return kernal.vmName();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getInstanceName() {\n+        return kernal.name();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getExecutorServiceFormatted() {\n+        return kernal.executorServiceFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getIgniteHome() {\n+        return kernal.igniteHome();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getGridLoggerFormatted() {\n+        return kernal.gridLoggerFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String getMBeanServerFormatted() {\n+        return kernal.mbeanServerFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public UUID getLocalNodeId() {\n+        return kernal.getLocalNodeId();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public List<String> getUserAttributesFormatted() {\n+        return kernal.userAttributesFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean isPeerClassLoadingEnabled() {\n+        return kernal.peerClassLoadingEnabled();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public List<String> getLifecycleBeansFormatted() {\n+        return kernal.lifecycleBeansFormatted();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String clusterState() {\n+        return kernal.clusterState();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public long lastClusterStateChangeTime() {\n+        return kernal.lastClusterStateChangeTime();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean removeCheckpoint(String key) {\n+        A.notNull(key, \"key\");\n+\n+        return kernal.removeCheckpoint(key);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean pingNode(String nodeId) {\n+        A.notNull(nodeId, \"nodeId\");\n+\n+        return kernal.cluster().pingNode(UUID.fromString(nodeId));\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void undeployTaskFromGrid(String taskName) throws JMException {\n+        A.notNull(taskName, \"taskName\");\n+\n+        try {\n+            kernal.compute().undeployTask(taskName);\n+        }\n+        catch (IgniteException e) {\n+            throw U.jmException(e);\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public String executeTask(String taskName, String arg) throws JMException {\n+        try {\n+            return kernal.compute().execute(taskName, arg);\n+        }\n+        catch (IgniteException e) {\n+            throw U.jmException(e);\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean pingNodeByAddress(String host) {\n+        kernal.context().gateway().readLock();\n+\n+        try {\n+            for (ClusterNode n : kernal.cluster().nodes())\n+                if (n.addresses().contains(host))\n+                    return kernal.context().discovery().pingNode(n.id());\n+\n+            return false;\n+        }\n+        catch (IgniteCheckedException e) {\n+            throw U.convertException(e);\n+        }\n+        finally {\n+            kernal.context().gateway().readUnlock();\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void dumpDebugInfo() {\n+        kernal.dumpDebugInfo();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void runIoTest(\n+        long warmup,\n+        long duration,\n+        int threads,\n+        long maxLatency,\n+        int rangesCnt,\n+        int payLoadSize,\n+        boolean procFromNioThread\n+    ) {\n+        kernal.context().io().runIoTest(warmup, duration, threads, maxLatency, rangesCnt, payLoadSize,\n+            procFromNioThread, new ArrayList(kernal.context().cluster().get().forServers().forRemotes().nodes()));\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void clearNodeLocalMap() {\n+        kernal.context().cluster().get().clearNodeMap();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void clusterState(String state) {\n+        clusterState(state, false);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void clusterState(String state, boolean forceDeactivation) {\n+        ClusterState newState = ClusterState.valueOf(state);\n+\n+        kernal.context().gateway().readLock();\n+\n+        try {\n+            kernal.context().state().changeGlobalState(newState, forceDeactivation, kernal.context().cluster().get()\n+                .forServers().nodes(), false).get();\n+        }\n+        catch (IgniteCheckedException e) {\n+            throw U.convertException(e);\n+        }\n+        finally {\n+            kernal.context().gateway().readUnlock();\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public boolean isRebalanceEnabled() {\n+        return kernal.isRebalanceEnabled();\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void rebalanceEnabled(boolean rebalanceEnabled) {\n+        kernal.context().cache().context().rebalanceEnabled(rebalanceEnabled);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79eb5be3c30e70a5391a55c2ae665e371ca94659"}, "originalPosition": 326}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06c866abd8dbac1175933afa1e2cda6dec68c416", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/06c866abd8dbac1175933afa1e2cda6dec68c416", "committedDate": "2020-03-17T15:23:41Z", "message": "IGNITE-12779 : + mbean var."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b140b21731851231f8ece6c231664bd41438cbf", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/1b140b21731851231f8ece6c231664bd41438cbf", "committedDate": "2020-03-17T15:24:40Z", "message": "IGNITE-12779 : +rebalanceEnabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e82befb87f630b1eab5f98d8464dde5a6c20e5b0", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/e82befb87f630b1eab5f98d8464dde5a6c20e5b0", "committedDate": "2020-03-17T15:30:22Z", "message": "IGNITE-12779 : minor fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c22af2c65174c5ff2b7b7829eaa8b07705dcaab", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/5c22af2c65174c5ff2b7b7829eaa8b07705dcaab", "committedDate": "2020-03-17T15:58:11Z", "message": "IGNITE-12779 : test fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9b0689c9a9487d356aba52ec4f804963de30324", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/b9b0689c9a9487d356aba52ec4f804963de30324", "committedDate": "2020-03-17T16:20:53Z", "message": "Merge branch 'master' into test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c33b940d563d7a35af083fa1c35184bf3ea5d6f4", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/c33b940d563d7a35af083fa1c35184bf3ea5d6f4", "committedDate": "2020-03-17T18:41:29Z", "message": "IGNITE-12779 : getLocalNodeId() -> localNodeId()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60af4254883038eb3d00dbfdcbc23586e2261b5f", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/60af4254883038eb3d00dbfdcbc23586e2261b5f", "committedDate": "2020-03-18T09:13:52Z", "message": "IGNITE-12779 : Fixed deactivation test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "234c51d9608e1acc2396538fa939efabf2a65b80", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/234c51d9608e1acc2396538fa939efabf2a65b80", "committedDate": "2020-03-18T10:20:18Z", "message": "IGNITE-12779 : renamings, small refactorings."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18260f5789a07d7f442a61a22185e1f4d5828041", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/18260f5789a07d7f442a61a22185e1f4d5828041", "committedDate": "2020-03-18T10:38:49Z", "message": "IGNITE-12779 : + log to assertThrows"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d5c1e6de424b20a498cfcd08bbeeaf61aa3bb0f", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/1d5c1e6de424b20a498cfcd08bbeeaf61aa3bb0f", "committedDate": "2020-03-18T10:49:08Z", "message": "IGNITE-12779 : license."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2ODI3MjY0", "url": "https://github.com/apache/ignite/pull/7531#pullrequestreview-376827264", "createdAt": "2020-03-18T12:45:21Z", "commit": {"oid": "1d5c1e6de424b20a498cfcd08bbeeaf61aa3bb0f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab584b1490658eaaf7adb150284da8108ca17505", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/ab584b1490658eaaf7adb150284da8108ca17505", "committedDate": "2021-09-02T14:32:23Z", "message": "Merge branch 'master' into IGNITE-12779\n\n# Conflicts:\n#\tmodules/core/src/main/java/org/apache/ignite/internal/managers/IgniteMBeansManager.java\n#\tmodules/core/src/test/java/org/apache/ignite/internal/processors/cache/IgniteClusterActivateDeactivateTest.java\n#\tmodules/hadoop/src/test/java/org/apache/ignite/internal/processors/hadoop/impl/HadoopJobTrackerSelfTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61720bca480392504bb155ce8504989f2f00ded3", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/61720bca480392504bb155ce8504989f2f00ded3", "committedDate": "2021-09-02T16:42:02Z", "message": "merged master"}}, {"__typename": "PullRequestReview", "id": "PRR_kwDOAdkdzs4tEhnF", "url": "https://github.com/apache/ignite/pull/7531#pullrequestreview-756160965", "createdAt": "2021-09-16T11:07:23Z", "commit": {"oid": "61720bca480392504bb155ce8504989f2f00ded3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2767, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}