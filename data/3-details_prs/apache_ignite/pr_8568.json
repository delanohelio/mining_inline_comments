{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2ODgyNjkw", "number": 8568, "title": "IGNITE-12824 .NET: Add BinaryConfiguration.TimestampConverter", "bodyText": "Thank you for submitting the pull request to the Apache Ignite.\nIn order to streamline the review of the contribution\nwe ask you to ensure the following steps have been taken:\nThe Contribution Checklist\n\n There is a single JIRA ticket related to the pull request.\n The web-link to the pull request is attached to the JIRA ticket.\n The JIRA ticket has the Patch Available state.\n The pull request body describes changes that have been made.\nThe description explains WHAT and WHY was made instead of HOW.\n The pull request title is treated as the final commit message.\nThe following pattern must be used: IGNITE-XXXX Change summary where XXXX - number of JIRA issue.\n A reviewer has been mentioned through the JIRA comments\n(see the Maintainers list)\n The pull request has been checked by the Teamcity Bot and\nthe green visa attached to the JIRA ticket (see TC.Bot: Check PR)\n\nNotes\n\nHow to Contribute\nCoding abbreviation rules\nCoding Guidelines\nApache Ignite Teamcity Bot\n\nIf you need any help, please email dev@ignite.apache.org or ask an\u0443 advice on http://asf.slack.com #ignite channel.", "createdAt": "2020-12-11T13:06:40Z", "url": "https://github.com/apache/ignite/pull/8568", "merged": true, "mergeCommit": {"oid": "76eda8dba406754635599b0cea55bbffb4137efe"}, "closed": true, "closedAt": "2020-12-24T12:00:17Z", "author": {"login": "nizhikov"}, "timelineItems": {"totalCount": 45, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlHoY2gH2gAyNTM2ODgyNjkwOmQ1MjU0YTEwN2Q1OGU0OTFjZWRkOTkzYjVlNjRkZjcxNGQ3NmRkMWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdpQgwBgFqTU1ODQzMzk3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d5254a107d58e491cedd993b5e64df714d76dd1d", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/d5254a107d58e491cedd993b5e64df714d76dd1d", "committedDate": "2020-12-11T13:05:53Z", "message": "IGNITE-12824: WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca3cc3a3f73ae779f1bd7d48ec3d3d73b5d4047f", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/ca3cc3a3f73ae779f1bd7d48ec3d3d73b5d4047f", "committedDate": "2020-12-11T14:14:29Z", "message": "IGNITE-12824: WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "063b6f0a20bf6e705fdfe5aeb5146d85f5f49da0", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/063b6f0a20bf6e705fdfe5aeb5146d85f5f49da0", "committedDate": "2020-12-14T14:06:46Z", "message": "IGNITE-12824: Fix of writing dates to the cache from the .Net"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24a89edebbac56753c732068459da61ec38755c0", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/24a89edebbac56753c732068459da61ec38755c0", "committedDate": "2020-12-14T16:57:36Z", "message": "IGNITE-12824: Fix of writing dates to the cache from the .Net"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17ffb017959cf262ec97672358e6eaa6d8122293", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/17ffb017959cf262ec97672358e6eaa6d8122293", "committedDate": "2020-12-14T16:58:44Z", "message": "IGNITE-12824: Fix of writing dates to the cache from the .Net"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "317a6662433c73e7f31f1e0f0c5f36b685553339", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/317a6662433c73e7f31f1e0f0c5f36b685553339", "committedDate": "2020-12-14T17:00:02Z", "message": "IGNITE-12824: Fix of writing dates to the cache from the .Net"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2086fbf5f20bfc1b649620ceae4634a876d9298b", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/2086fbf5f20bfc1b649620ceae4634a876d9298b", "committedDate": "2020-12-14T17:01:20Z", "message": "IGNITE-12824: Fix of writing dates to the cache from the .Net"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0514d34ca9d1e857ff4c302b15a7b8c88f7c9c7", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/d0514d34ca9d1e857ff4c302b15a7b8c88f7c9c7", "committedDate": "2020-12-14T17:04:27Z", "message": "IGNITE-12824: Fix of writing dates to the cache from the .Net"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03469e9e7a9f77d370313c54581e0f86c7ee1db9", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/03469e9e7a9f77d370313c54581e0f86c7ee1db9", "committedDate": "2020-12-14T17:11:16Z", "message": "IGNITE-12824: Tests fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58254afb18d441ef9e827ceaa329100189a677ef", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/58254afb18d441ef9e827ceaa329100189a677ef", "committedDate": "2020-12-16T12:59:49Z", "message": "Merge branch 'master' into IGNITE-12824"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75ee2ceb9888bba5f2d04f2e9f5a44cd9a282733", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/75ee2ceb9888bba5f2d04f2e9f5a44cd9a282733", "committedDate": "2020-12-16T14:33:42Z", "message": "IGNITE-12824: Test update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b196fe75331c092fe83d4e6ac538a543a0e2692", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/5b196fe75331c092fe83d4e6ac538a543a0e2692", "committedDate": "2020-12-16T14:46:39Z", "message": "IGNITE-13865: Support of DateTime as a key or value in .Net and Java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a06e4a3bc9da5a534069c23371e0979b2bc9643a", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/a06e4a3bc9da5a534069c23371e0979b2bc9643a", "committedDate": "2020-12-16T14:59:43Z", "message": "IGNITE-13865: Support of DateTime as a key or value in .Net and Java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18795944b37a8c714c023c93b3c9b6baad904028", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/18795944b37a8c714c023c93b3c9b6baad904028", "committedDate": "2020-12-16T15:01:23Z", "message": "IGNITE-13865: Support of DateTime as a key or value in .Net and Java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e08e09ab3564f3ca9d7c2b021892190237db2368", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/e08e09ab3564f3ca9d7c2b021892190237db2368", "committedDate": "2020-12-16T15:05:34Z", "message": "IGNITE-13865: Support of DateTime as a key or value in .Net and Java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef420dac3c47b5694b8b5803ab799dd2da83b533", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/ef420dac3c47b5694b8b5803ab799dd2da83b533", "committedDate": "2020-12-16T15:23:48Z", "message": "IGNITE-13865: Support of DateTime as a key or value in .Net and Java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ac33e711f17f4ef6916bef733e27cf4fef63aea", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/7ac33e711f17f4ef6916bef733e27cf4fef63aea", "committedDate": "2020-12-17T15:42:26Z", "message": "IGNITE-13865: Support of DateTime as a key or value in .Net and Java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af92eb45cc27b155794f05bfbd990dbb3d4d942f", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/af92eb45cc27b155794f05bfbd990dbb3d4d942f", "committedDate": "2020-12-17T15:48:56Z", "message": "IGNITE-13865: Support of DateTime as a key or value in .Net and Java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e99e251eef5b666d35ba3f156668a3db892c20e0", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/e99e251eef5b666d35ba3f156668a3db892c20e0", "committedDate": "2020-12-18T21:28:34Z", "message": "Merge branch 'master' into IGNITE-12824"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fb26e168dabd7d77712e9f0d1ce1cc1ccc8b9da", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/3fb26e168dabd7d77712e9f0d1ce1cc1ccc8b9da", "committedDate": "2020-12-18T21:31:10Z", "message": "IGNITE-12824: Test update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d84249a0ac41644744737c9d05e4b81604c25985", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/d84249a0ac41644744737c9d05e4b81604c25985", "committedDate": "2020-12-19T19:05:05Z", "message": "IGNITE-12824: Update of the date conversion(works on Mac)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b0af6fbfd5f316892c99cb10959ce8483609b22", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/0b0af6fbfd5f316892c99cb10959ce8483609b22", "committedDate": "2020-12-20T08:34:00Z", "message": "IGNITE-12824: Allows local dates only for `ForceTimestamp` mode."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3ecbaaa1a8069db9ae79f65e87a6d789dca4171", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/e3ecbaaa1a8069db9ae79f65e87a6d789dca4171", "committedDate": "2020-12-20T08:57:10Z", "message": "IGNITE-12824: Allows local dates only for `ForceTimestamp` mode."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "332eb0667acc619f53222f2fb26994fe7852d9e8", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/332eb0667acc619f53222f2fb26994fe7852d9e8", "committedDate": "2020-12-20T08:59:05Z", "message": "IGNITE-12824: Allows local dates only for `ForceTimestamp` mode."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d1dc8642b107458957e60d26f3bd5a617f33fff", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/1d1dc8642b107458957e60d26f3bd5a617f33fff", "committedDate": "2020-12-20T09:53:46Z", "message": "IGNITE-12824: Allows local dates only for `ForceTimestamp` mode."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8462970a27527f98f3c19e2cb9c692b87258bba", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/c8462970a27527f98f3c19e2cb9c692b87258bba", "committedDate": "2020-12-20T10:03:44Z", "message": "IGNITE-12824: Allows usages of Local dates but only for .NetCore applications."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e5edb30b5b8e04d5826edb6360a05cf270125d2", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/2e5edb30b5b8e04d5826edb6360a05cf270125d2", "committedDate": "2020-12-20T10:09:56Z", "message": "IGNITE-12824: Allows usages of Local dates but only for .NetCore applications."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e6f2a7964c15e5302ae2eb86749367d4d9ec392d", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/e6f2a7964c15e5302ae2eb86749367d4d9ec392d", "committedDate": "2020-12-21T10:58:19Z", "message": "IGNITE-12824: Support Local datetimes for .Net framework"}, "afterCommit": {"oid": "2e5edb30b5b8e04d5826edb6360a05cf270125d2", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/2e5edb30b5b8e04d5826edb6360a05cf270125d2", "committedDate": "2020-12-20T10:09:56Z", "message": "IGNITE-12824: Allows usages of Local dates but only for .NetCore applications."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "078b658c8fac220512ca60d05ed033759f696db1", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/078b658c8fac220512ca60d05ed033759f696db1", "committedDate": "2020-12-21T17:29:26Z", "message": "IGNITE-12824: IDateTimeConverter implemented"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "969e5c517ef6dff61d7919bb559fe84ab3f25ff5", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/969e5c517ef6dff61d7919bb559fe84ab3f25ff5", "committedDate": "2020-12-21T17:35:42Z", "message": "IGNITE-12824: IDateTimeConverter implemented"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14b44568f6bd87e01a81fd87320e4ccb6fb40773", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/14b44568f6bd87e01a81fd87320e4ccb6fb40773", "committedDate": "2020-12-21T17:36:47Z", "message": "IGNITE-12824: IDateTimeConverter implemented"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a93dc9fc934889630bbfd881c10a7bb8af3bd883", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/a93dc9fc934889630bbfd881c10a7bb8af3bd883", "committedDate": "2020-12-22T06:53:04Z", "message": "IGNITE-12824: License fix."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2OTUyMzA5", "url": "https://github.com/apache/ignite/pull/8568#pullrequestreview-556952309", "createdAt": "2020-12-22T09:50:51Z", "commit": {"oid": "a93dc9fc934889630bbfd881c10a7bb8af3bd883"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwOTo1MDo1MlrOIJ1ESQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMDowNDo1N1rOIJ1fyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE3NzU0NQ==", "bodyText": "Avoid object allocation and call ReadTimestamp directly:\nres = TypeCaster<T>.Cast(BinaryUtils.ReadTimestamp(ctx.Stream, ctx.Marshaller.DateTimeConverter));\nreturn true;", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547177545", "createdAt": "2020-12-22T09:50:52Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Binary/BinarySystemHandlers.cs", "diffHunk": "@@ -258,8 +255,16 @@ public static bool TryReadSystemType<T>(byte typeId, BinaryReader ctx, out T res\n \n             if (handler == null)\n             {\n-                res = default(T);\n-                return false;\n+                if (typeId == BinaryTypeId.Timestamp)\n+                {\n+                    // Date.\n+                    handler = new BinarySystemReader<DateTime?>(stream => BinaryUtils.ReadTimestamp(stream, ctx.Marshaller.DateTimeConverter));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a93dc9fc934889630bbfd881c10a7bb8af3bd883"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE3ODUwMA==", "bodyText": "Convert -> Converts, here and below", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547178500", "createdAt": "2020-12-22T09:52:48Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Binary/IDateTimeConverter.cs", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Binary\n+{\n+    using System;\n+\n+    /// <summary>\n+    /// Converter for DateTime objects.\n+    /// </summary>\n+    public interface IDateTimeConverter\n+    {\n+        /// <summary>Convert date to Java ticks.</summary>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a93dc9fc934889630bbfd881c10a7bb8af3bd883"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE3ODkwOQ==", "bodyText": "Converts <see cref=\"DateTime\"/> values to Java Timestamp and back.", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547178909", "createdAt": "2020-12-22T09:53:34Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Binary/IDateTimeConverter.cs", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Binary\n+{\n+    using System;\n+\n+    /// <summary>\n+    /// Converter for DateTime objects.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a93dc9fc934889630bbfd881c10a7bb8af3bd883"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4MDcyNw==", "bodyText": "Since we decided to operate on Java-specific Timestamp format here, I think a better name would be ITimestampConverter. It is also consistent with WriteTimestamp / ReadTimestamp methods.", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547180727", "createdAt": "2020-12-22T09:56:59Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Binary/IDateTimeConverter.cs", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Binary\n+{\n+    using System;\n+\n+    /// <summary>\n+    /// Converter for DateTime objects.\n+    /// </summary>\n+    public interface IDateTimeConverter", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a93dc9fc934889630bbfd881c10a7bb8af3bd883"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4MTczMQ==", "bodyText": "See above - let's rename to ITimestampConverter TimestampConverter", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547181731", "createdAt": "2020-12-22T09:58:59Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Binary/BinaryConfiguration.cs", "diffHunk": "@@ -136,6 +137,11 @@ public BinaryConfiguration(params Type[] binaryTypes)\n         /// </summary>\n         public IBinarySerializer Serializer { get; set; }\n \n+        /// <summary>\n+        /// Default date time converter.\n+        /// </summary>\n+        public IDateTimeConverter DateTimeConverter { get; set; }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a93dc9fc934889630bbfd881c10a7bb8af3bd883"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4MzQ1OA==", "bodyText": "/// <summary>\n        /// Gets or sets a converter between <see cref=\"DateTime\"/> and Java Timestamp.\n        /// Called from <see cref=\"IBinaryWriter.WriteTimestamp\"/>, <see cref=\"IBinaryWriter.WriteTimestampArray\"/>,\n        /// <see cref=\"IBinaryReader.ReadTimestamp\"/>, <see cref=\"IBinaryReader.ReadTimestampArray\"/>.\n        /// <para />\n        /// See also <see cref=\"ForceTimestamp\"/>.\n        /// </summary>", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547183458", "createdAt": "2020-12-22T10:02:39Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Binary/BinaryConfiguration.cs", "diffHunk": "@@ -136,6 +137,11 @@ public BinaryConfiguration(params Type[] binaryTypes)\n         /// </summary>\n         public IBinarySerializer Serializer { get; set; }\n \n+        /// <summary>\n+        /// Default date time converter.\n+        /// </summary>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a93dc9fc934889630bbfd881c10a7bb8af3bd883"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4NDU4NQ==", "bodyText": "Also please update the doc for ForceTimestamp below like this:\nOnly UTC values are supported in Timestamp format. Other values will cause an exception on write, unless <see cref=\"TimestampConverter\"/> is provided.", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547184585", "createdAt": "2020-12-22T10:04:57Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Binary/BinaryConfiguration.cs", "diffHunk": "@@ -136,6 +137,11 @@ public BinaryConfiguration(params Type[] binaryTypes)\n         /// </summary>\n         public IBinarySerializer Serializer { get; set; }\n \n+        /// <summary>\n+        /// Default date time converter.\n+        /// </summary>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4MzQ1OA=="}, "originalCommit": {"oid": "a93dc9fc934889630bbfd881c10a7bb8af3bd883"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a481daff50310133edfe82384404872294c35a4", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/8a481daff50310133edfe82384404872294c35a4", "committedDate": "2020-12-22T11:05:31Z", "message": "IGNITE-12824: Code review fixes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e63549543e1e55b59b437770654039a940d0715c", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/e63549543e1e55b59b437770654039a940d0715c", "committedDate": "2020-12-22T12:24:07Z", "message": "IGNITE-12824: Code review fixes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MjY3Njgx", "url": "https://github.com/apache/ignite/pull/8568#pullrequestreview-557267681", "createdAt": "2020-12-22T18:08:30Z", "commit": {"oid": "e63549543e1e55b59b437770654039a940d0715c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxODowODozMVrOIKEGlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxODowOTo1NlrOIKEJEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQyMzg5NQ==", "bodyText": "I think this test will work on .NET Framework too (and we should have a test that works on .NET Framework).", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547423895", "createdAt": "2020-12-22T18:08:31Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core.Tests/Binary/BinaryDateTimeTest.cs", "diffHunk": "@@ -110,6 +111,34 @@ public void TestClassAttributes()\n             AssertTimestampField<DateTimeClassAttribute2>((o, d) => o.Value = d, o => o.Value, \"Value\");\n         }\n \n+#if NETCOREAPP", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e63549543e1e55b59b437770654039a940d0715c"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQyNDUyOQ==", "bodyText": "Unused variable ex.\n\"Converter Error!\" is a message that will be displayed on assertion failure. I think the intent here is to check the exception message instead. To do that, add Assert.AreEqual(\"Converter Error!\", ex.Message).", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547424529", "createdAt": "2020-12-22T18:09:56Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core.Tests/Binary/BinaryDateTimeTest.cs", "diffHunk": "@@ -110,6 +111,34 @@ public void TestClassAttributes()\n             AssertTimestampField<DateTimeClassAttribute2>((o, d) => o.Value = d, o => o.Value, \"Value\");\n         }\n \n+#if NETCOREAPP\n+        /// <summary>\n+        /// Tests custom timestamp converter.\n+        /// </summary>\n+        [Test]\n+        public void TestCustomTimestampConverter()\n+        {\n+            var cfg =  new IgniteConfiguration(TestUtils.GetTestConfiguration(name: \"ignite-1\"))\n+            {\n+                BinaryConfiguration = new BinaryConfiguration()\n+                {\n+                    ForceTimestamp = true, \n+                    TimestampConverter = new TimestampConverter()\n+                }\n+            };\n+            var ignite = Ignition.Start(cfg);\n+            var binary = ignite.GetBinary();\n+ \n+            // Check config.\n+            Assert.NotNull(ignite.GetConfiguration().BinaryConfiguration.TimestampConverter);\n+\n+            AssertTimestampField<DateTimeObj2>((o, d) => o.Value = d, o => o.Value, \"Value\");\n+\n+            var ex = Assert.Throws<BinaryObjectException>(() => binary.ToBinary<IBinaryObject>(new DateTime(1997, 8, 29)), \n+                \"Converter Error!\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e63549543e1e55b59b437770654039a940d0715c"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7fe8cd1f32d1c03fa72c812d416d71bf3ce1ec7", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/f7fe8cd1f32d1c03fa72c812d416d71bf3ce1ec7", "committedDate": "2020-12-23T07:10:48Z", "message": "Merge branch 'master' into IGNITE-12824"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c66a2f1968633600ff79627bcb9158dfa5f2d8f6", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/c66a2f1968633600ff79627bcb9158dfa5f2d8f6", "committedDate": "2020-12-23T08:37:08Z", "message": "IGNITE-12824: Code review fixes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MTcxMDY5", "url": "https://github.com/apache/ignite/pull/8568#pullrequestreview-558171069", "createdAt": "2020-12-23T18:45:51Z", "commit": {"oid": "c66a2f1968633600ff79627bcb9158dfa5f2d8f6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxODo0NTo1MVrOIKvUVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxODo0NTo1MVrOIKvUVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODEzMTkyNA==", "bodyText": "Let's extract a constant to avoid repeating \"ToJavaTicks Error!\" value.", "url": "https://github.com/apache/ignite/pull/8568#discussion_r548131924", "createdAt": "2020-12-23T18:45:51Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core.Tests/Binary/BinaryDateTimeTest.cs", "diffHunk": "@@ -134,10 +133,22 @@ public void TestCustomTimestampConverter()\n \n             AssertTimestampField<DateTimeObj2>((o, d) => o.Value = d, o => o.Value, \"Value\");\n \n-            var ex = Assert.Throws<BinaryObjectException>(() => binary.ToBinary<IBinaryObject>(new DateTime(1997, 8, 29)), \n-                \"Converter Error!\");\n+            var dt1 = new DateTime(1997, 8, 29, 0, 0, 0, DateTimeKind.Utc);\n+\n+            var ex = Assert.Throws<BinaryObjectException>(() => binary.ToBinary<DateTime>(dt1));\n+            Assert.AreEqual(\"ToJavaTicks Error!\", ex.Message);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c66a2f1968633600ff79627bcb9158dfa5f2d8f6"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be9a7dfa476419786db09818806e4d78dcb68baf", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/be9a7dfa476419786db09818806e4d78dcb68baf", "committedDate": "2020-12-23T21:12:41Z", "message": "IGNITE-12824: Code review fixes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05a244b5d872eb9fa7a1138bdc9ac10fb64e6aa8", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/05a244b5d872eb9fa7a1138bdc9ac10fb64e6aa8", "committedDate": "2020-12-24T08:21:53Z", "message": "IGNITE-12824: Code review fixes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9500998923e0e725bf636696178888bcc7a6fa83", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/9500998923e0e725bf636696178888bcc7a6fa83", "committedDate": "2020-12-24T08:24:46Z", "message": "IGNITE-12824: Code review fixes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc2b7b185e99855dc974fb773a6aeac91303026e", "author": {"user": {"login": "ptupitsyn", "name": "Pavel Tupitsyn"}}, "url": "https://github.com/apache/ignite/commit/fc2b7b185e99855dc974fb773a6aeac91303026e", "committedDate": "2020-12-24T09:25:38Z", "message": "Add TestAddYearTimestampConverter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae70be9ac28b6f4bf14deadfc0f9a5128a77055c", "author": {"user": {"login": "ptupitsyn", "name": "Pavel Tupitsyn"}}, "url": "https://github.com/apache/ignite/commit/ae70be9ac28b6f4bf14deadfc0f9a5128a77055c", "committedDate": "2020-12-24T09:38:42Z", "message": "Add TestAddYearTimestampConverter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NDMzOTcx", "url": "https://github.com/apache/ignite/pull/8568#pullrequestreview-558433971", "createdAt": "2020-12-24T09:42:23Z", "commit": {"oid": "ae70be9ac28b6f4bf14deadfc0f9a5128a77055c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2250, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}