{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4MjUyMTAz", "number": 7902, "title": "IGNITE-13051 check mvcc configuration after register caches futu\u2026", "bodyText": "Validate MVCC configuration after the future completion (wait while all caches are finally registered).", "createdAt": "2020-06-05T06:35:52Z", "url": "https://github.com/apache/ignite/pull/7902", "merged": true, "mergeCommit": {"oid": "1413af0be38372a496dec03339e1c0f8fcb04982"}, "closed": true, "closedAt": "2020-06-26T08:16:26Z", "author": {"login": "timoninmaxim"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoNVDigFqTQyNTA0OTUxOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsbw_jABqjM0NTc0Mjk0MjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MDQ5NTE4", "url": "https://github.com/apache/ignite/pull/7902#pullrequestreview-425049518", "createdAt": "2020-06-05T07:14:49Z", "commit": {"oid": "a082bb641e1f000de1793cb5b31f53bf01a65822"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNzoxNDo0OVrOGfi9gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNzoxNDo0OVrOGfi9gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTczMTg0MQ==", "bodyText": "looks like a 90% duplication of testMvccEnabledForClientMode", "url": "https://github.com/apache/ignite/pull/7902#discussion_r435731841", "createdAt": "2020-06-05T07:14:49Z", "author": {"login": "anton-vinogradov"}, "path": "modules/core/src/test/java/org/apache/ignite/internal/processors/cache/mvcc/CacheMvccConfigurationValidationTest.java", "diffHunk": "@@ -352,6 +353,37 @@ public void testMvccEnabledForClientMode() throws Exception {\n         assertTrue(node.context().coordinators().mvccEnabled());\n     }\n \n+    /**\n+     * Check that node in client mode (filtered by AttributeNodeFilter) correctly works with MVCC.\n+     */\n+    @SuppressWarnings(\"unchecked\")\n+    @Test\n+    public void testMvccEnabledForClientModeAfterTriggeringGlobalState() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a082bb641e1f000de1793cb5b31f53bf01a65822"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MDUwMjk0", "url": "https://github.com/apache/ignite/pull/7902#pullrequestreview-425050294", "createdAt": "2020-06-05T07:16:12Z", "commit": {"oid": "a082bb641e1f000de1793cb5b31f53bf01a65822"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNzoxNjoxMlrOGfi_7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNzoxNjoxMlrOGfi_7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTczMjQ2Mg==", "bodyText": "Such renaming just increases changes amount without real profit", "url": "https://github.com/apache/ignite/pull/7902#discussion_r435732462", "createdAt": "2020-06-05T07:16:12Z", "author": {"login": "anton-vinogradov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/distributed/dht/preloader/GridDhtPartitionsExchangeFuture.java", "diffHunk": "@@ -346,7 +346,7 @@\n     private final GridDhtPartitionsStateValidator validator;\n \n     /** Register caches future. Initialized on exchange init. Must be waited on exchange end. */\n-    private IgniteInternalFuture<?> registerCachesFuture;\n+    private IgniteInternalFuture<?> registerCachesFut;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a082bb641e1f000de1793cb5b31f53bf01a65822"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfb9bdabe26950ee5ef688b858583dffb519b9f4", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/bfb9bdabe26950ee5ef688b858583dffb519b9f4", "committedDate": "2020-06-05T10:06:15Z", "message": "IGNITE-13051 fix: check mvcc configuration after register caches future completion"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a082bb641e1f000de1793cb5b31f53bf01a65822", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/a082bb641e1f000de1793cb5b31f53bf01a65822", "committedDate": "2020-06-05T06:35:18Z", "message": "IGNITE-13051 fix: check mvcc configuration after register caches future completion"}, "afterCommit": {"oid": "bfb9bdabe26950ee5ef688b858583dffb519b9f4", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/bfb9bdabe26950ee5ef688b858583dffb519b9f4", "committedDate": "2020-06-05T10:06:15Z", "message": "IGNITE-13051 fix: check mvcc configuration after register caches future completion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74284bad607fde4d8a243a55f1a17d0f418c1bfd", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/74284bad607fde4d8a243a55f1a17d0f418c1bfd", "committedDate": "2020-06-05T10:16:23Z", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4023c3f5d164e6bb6d2cb3138796350879b8705b", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/4023c3f5d164e6bb6d2cb3138796350879b8705b", "committedDate": "2020-06-05T11:57:59Z", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2206c255ab3097b463d0801b2ea7060e678f03e5", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/2206c255ab3097b463d0801b2ea7060e678f03e5", "committedDate": "2020-06-05T11:08:04Z", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion"}, "afterCommit": {"oid": "4023c3f5d164e6bb6d2cb3138796350879b8705b", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/4023c3f5d164e6bb6d2cb3138796350879b8705b", "committedDate": "2020-06-05T11:57:59Z", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f80fa935b3419ec196b8aaee5f8fb4e081523113", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/f80fa935b3419ec196b8aaee5f8fb4e081523113", "committedDate": "2020-06-17T16:12:58Z", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion"}, "afterCommit": {"oid": "8383b236046ac0c53745dd30dc8a6e02d389ac08", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/8383b236046ac0c53745dd30dc8a6e02d389ac08", "committedDate": "2020-06-17T16:17:10Z", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8383b236046ac0c53745dd30dc8a6e02d389ac08", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/8383b236046ac0c53745dd30dc8a6e02d389ac08", "committedDate": "2020-06-17T16:17:10Z", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion"}, "afterCommit": {"oid": "be041541aaecbc831a029741cd0f5391b65776a8", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/be041541aaecbc831a029741cd0f5391b65776a8", "committedDate": "2020-06-17T16:41:27Z", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be041541aaecbc831a029741cd0f5391b65776a8", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/be041541aaecbc831a029741cd0f5391b65776a8", "committedDate": "2020-06-17T16:41:27Z", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion"}, "afterCommit": {"oid": "d0b08a2f2a9962e5ea24baa47e4f1b51b5fab461", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/d0b08a2f2a9962e5ea24baa47e4f1b51b5fab461", "committedDate": "2020-06-18T10:18:28Z", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26597105f3cc8bd7d474b8d22ba367766a07b22d", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/26597105f3cc8bd7d474b8d22ba367766a07b22d", "committedDate": "2020-06-18T10:19:26Z", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0b08a2f2a9962e5ea24baa47e4f1b51b5fab461", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/d0b08a2f2a9962e5ea24baa47e4f1b51b5fab461", "committedDate": "2020-06-18T10:18:28Z", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion"}, "afterCommit": {"oid": "26597105f3cc8bd7d474b8d22ba367766a07b22d", "author": {"user": {"login": "timoninmaxim", "name": "Maksim Timonin"}}, "url": "https://github.com/apache/ignite/commit/26597105f3cc8bd7d474b8d22ba367766a07b22d", "committedDate": "2020-06-18T10:19:26Z", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2353, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}