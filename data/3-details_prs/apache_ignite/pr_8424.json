{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0ODYzNjQ1", "number": 8424, "title": "IGNITE-13663 : Represent in the documenttion affection of several node addresses on failure detection v2.", "bodyText": "We should document that TcpDiscoverySpi prolongs detection of node failure if node has several addresses. By default, all available addresses are assigned to node and node listens any address (0.0.0.0). Actual failure detection delay of this node is: failureDetectionTimeout * addressesNumber + connRecoveryTimeout.\nOften, middleware runs in environments with several IP addresses (virtualizations, containers, different networks). Node sends all obtained addresses with other node info to the cluster. Connection to node is established to first of its addresses. But if lost, other addresses are attempted to reconnect sequentially. If addresses do not belong to assumed node network, do not represent existing physical connection, processing them is just waste of time.", "createdAt": "2020-11-03T16:46:30Z", "url": "https://github.com/apache/ignite/pull/8424", "merged": true, "mergeCommit": {"oid": "6a706b33bd161422e90d957a4b34ad7ffbd9dc2a"}, "closed": true, "closedAt": "2020-11-19T00:10:13Z", "author": {"login": "Vladsz83"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdY74eRAH2gAyNTE0ODYzNjQ1OmZhMDkwMmY1MTg3ZTE1ZjY3MGI3MzU5OWQ5ZTE4MWEwZDA5NDc3NGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddy7xpgH2gAyNTE0ODYzNjQ1OjQ5NzE0YWMzMzU1ZmRmZWE0YmI3ODQyMGQ3NjE4ZWI3YTcxNTdkOTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fa0902f5187e15f670b73599d9e181a0d094774d", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/fa0902f5187e15f670b73599d9e181a0d094774d", "committedDate": "2020-11-03T16:37:30Z", "message": "First impl."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba5d51896f0066d1c54918d49ae4b3c2a6826321", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/ba5d51896f0066d1c54918d49ae4b3c2a6826321", "committedDate": "2020-11-03T16:40:22Z", "message": "Minor fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12e44079eb7aac3972cbd10c1551f9a04c90d58f", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/12e44079eb7aac3972cbd10c1551f9a04c90d58f", "committedDate": "2020-11-03T18:17:46Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbd2cbe3bab71aa4acb8b44ec6b02e96855ce9f8", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/dbd2cbe3bab71aa4acb8b44ec6b02e96855ce9f8", "committedDate": "2020-11-11T15:33:59Z", "message": "Merge branch 'master' into IGNITE-13663"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e18287311a91ec914b3c3fed2e201ed4d898672f", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/e18287311a91ec914b3c3fed2e201ed4d898672f", "committedDate": "2020-11-11T15:42:51Z", "message": "Text fix. Merged master."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4894b99d0d740b9d145a877544e16930d03a9850", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/4894b99d0d740b9d145a877544e16930d03a9850", "committedDate": "2020-11-11T15:47:06Z", "message": "Shorten text."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5945fd59db3dcae89aaeb53d72fc30177ecd49fa", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/5945fd59db3dcae89aaeb53d72fc30177ecd49fa", "committedDate": "2020-11-11T16:14:20Z", "message": "Looks good."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "553c440156cbbfd0f3f717f1913050e97684240a", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/553c440156cbbfd0f3f717f1913050e97684240a", "committedDate": "2020-11-12T17:43:06Z", "message": "Merge branch 'master' into IGNITE-13663"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f6f55918218544a7a59df1169539e4154f47397", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/7f6f55918218544a7a59df1169539e4154f47397", "committedDate": "2020-11-12T17:44:20Z", "message": "Fix."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxOTE2NzQ2", "url": "https://github.com/apache/ignite/pull/8424#pullrequestreview-531916746", "createdAt": "2020-11-16T23:55:17Z", "commit": {"oid": "7f6f55918218544a7a59df1169539e4154f47397"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMzo1NToxN1rOH0duyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMzo1Nzo1NlrOH0d4-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3NTExNA==", "bodyText": "Vlad,\nGood explanation, crystal clear and straight to the point. I made some tweaks. Please use this final version below and see if we need to mention TcpCommunicationSpi.localAddress along with TcpDiscoverySpi.localAddress\nYou should initialize the IgniteConfiguration.localHost or TcpDiscoverySpi.localAddress parameter only with those network interfaces that will be used for inter-node communication. By default, a node binds to and listens on all available IP addresses of an environment it's running on. It can prolong node failures detection if some of the node's addresses are not reachable from other cluster nodes.", "url": "https://github.com/apache/ignite/pull/8424#discussion_r524775114", "createdAt": "2020-11-16T23:55:17Z", "author": {"login": "dmagda"}, "path": "docs/_docs/clustering/network-configuration.adoc", "diffHunk": "@@ -49,10 +49,18 @@ tab:C++[unsupported]\n The following table describes some most important properties of `TcpDiscoverySpi`.\n You can find the complete list of properties in the javadoc:org.apache.ignite.spi.discovery.tcp.TcpDiscoverySpi[] javadoc.\n \n+[CAUTION]\n+====\n+You should assign `IgniteConfiguration.localHost` or `TcpDiscoverySpi.localAddress`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f6f55918218544a7a59df1169539e4154f47397"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3NzA5OQ==", "bodyText": "Please adjust to the following:\n... If set, overrides the IgniteConfiguration.localHost setting. | By default, a node binds to all available network addresses. If there is a non-loopback address available, then java.net.InetAddress.getLocalHost() is used.", "url": "https://github.com/apache/ignite/pull/8424#discussion_r524777099", "createdAt": "2020-11-16T23:57:19Z", "author": {"login": "dmagda"}, "path": "docs/_docs/clustering/network-configuration.adoc", "diffHunk": "@@ -49,10 +49,18 @@ tab:C++[unsupported]\n The following table describes some most important properties of `TcpDiscoverySpi`.\n You can find the complete list of properties in the javadoc:org.apache.ignite.spi.discovery.tcp.TcpDiscoverySpi[] javadoc.\n \n+[CAUTION]\n+====\n+You should assign `IgniteConfiguration.localHost` or `TcpDiscoverySpi.localAddress`.\n+By default, node obtains all available IP addresses. Several node addresses can prolong detection of node failure.\n+You should not allow node bind to multiple ip addresses until they represent some real physical connections which can\n+give you more reliability.\n+====\n+\n [cols=\"1,2,1\",opts=\"header\"]\n |===\n |Property | Description| Default Value\n-| `localAddress`| Local host IP address used for discovery. | By default, the node uses the first non-loopback address it finds. If there is no non-loopback address available, then `java.net.InetAddress.getLocalHost()` is used.\n+| `localAddress`| Local host IP address used for discovery. Prevails over `IgniteConfiguration.localHost`. | By default, all available addresses are assigned to node. If there is no non-loopback address available, then `java.net.InetAddress.getLocalHost()` is used.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f6f55918218544a7a59df1169539e4154f47397"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3NzcyMg==", "bodyText": "Please update to:\n... If set, overrides the IgniteConfiguration.localHost setting.", "url": "https://github.com/apache/ignite/pull/8424#discussion_r524777722", "createdAt": "2020-11-16T23:57:56Z", "author": {"login": "dmagda"}, "path": "docs/_docs/clustering/network-configuration.adoc", "diffHunk": "@@ -111,7 +119,7 @@ You can find the list of all properties in the javadoc:org.apache.ignite.spi.com\n [cols=\"1,2,1\",opts=\"header\"]\n |===\n |Property | Description| Default Value\n-| `localAddress` | The local address for the communication SPI to bind to. |\n+| `localAddress` | The local address for the communication SPI to bind to. Prevails over `IgniteConfiguration.localHost`. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f6f55918218544a7a59df1169539e4154f47397"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a9c68333a469147d0cfd0babe1cf8f5910ca4bc", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/0a9c68333a469147d0cfd0babe1cf8f5910ca4bc", "committedDate": "2020-11-18T18:52:54Z", "message": "Merge branch 'master' into IGNITE-13663"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49714ac3355fdfea4bb78420d7618eb7a7157d98", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/49714ac3355fdfea4bb78420d7618eb7a7157d98", "committedDate": "2020-11-18T19:01:35Z", "message": "Fix"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3098, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}