{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3MTM2ODIz", "number": 7521, "title": "IGNITE-8152 Forbid empty sql schema name", "bodyText": "PR (Forbid empty sql schema name) from Aleksei_Litsov@epam.com", "createdAt": "2020-03-12T09:40:22Z", "url": "https://github.com/apache/ignite/pull/7521", "merged": true, "mergeCommit": {"oid": "1c5066772293732c3aeecfced64a571c92a37147"}, "closed": true, "closedAt": "2020-03-20T14:08:10Z", "author": {"login": "Aleksei-Litsov"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcM6FR3ABqjMxMjI0NTc5NjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPNfNWABqjMxNDYwMTI4NDI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ce3c4331e70d6bf0f2393786e573d972da0a1740", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/ce3c4331e70d6bf0f2393786e573d972da0a1740", "committedDate": "2020-03-12T09:27:42Z", "message": "IGNITE-8152 Forbid empty sql schema name"}, "afterCommit": {"oid": "ef3cb311a853af63737aacc5a220cf03812faecd", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/ef3cb311a853af63737aacc5a220cf03812faecd", "committedDate": "2020-03-12T11:31:58Z", "message": "IGNITE-8152 Forbid empty sql schema name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8d30bedf55dac6d92fc66b2cfe9812139d4bb39a", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/8d30bedf55dac6d92fc66b2cfe9812139d4bb39a", "committedDate": "2020-03-13T13:03:37Z", "message": "IGNITE-8152 Forbid empty sql schema name"}, "afterCommit": {"oid": "ef3cb311a853af63737aacc5a220cf03812faecd", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/ef3cb311a853af63737aacc5a220cf03812faecd", "committedDate": "2020-03-12T11:31:58Z", "message": "IGNITE-8152 Forbid empty sql schema name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "345d248f7347fd584e0c9e09aaa39ab7c444cc3a", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/345d248f7347fd584e0c9e09aaa39ab7c444cc3a", "committedDate": "2020-03-13T13:08:50Z", "message": "IGNITE-8152 Forbid empty sql schema name"}, "afterCommit": {"oid": "ef3cb311a853af63737aacc5a220cf03812faecd", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/ef3cb311a853af63737aacc5a220cf03812faecd", "committedDate": "2020-03-12T11:31:58Z", "message": "IGNITE-8152 Forbid empty sql schema name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef3cb311a853af63737aacc5a220cf03812faecd", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/ef3cb311a853af63737aacc5a220cf03812faecd", "committedDate": "2020-03-12T11:31:58Z", "message": "IGNITE-8152 Forbid empty sql schema name"}, "afterCommit": {"oid": "cb297c544c8e93e3bf1eb48227a3bcb2a46d629b", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/cb297c544c8e93e3bf1eb48227a3bcb2a46d629b", "committedDate": "2020-03-13T13:25:08Z", "message": "IGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1Nzg0ODky", "url": "https://github.com/apache/ignite/pull/7521#pullrequestreview-375784892", "createdAt": "2020-03-17T07:13:51Z", "commit": {"oid": "cb297c544c8e93e3bf1eb48227a3bcb2a46d629b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwNzoxMzo1MVrOF3QK5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwNzoxMzo1MVrOF3QK5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ4MDkzNA==", "bodyText": "here schema is always not null", "url": "https://github.com/apache/ignite/pull/7521#discussion_r393480934", "createdAt": "2020-03-17T07:13:51Z", "author": {"login": "joooger"}, "path": "modules/indexing/src/main/java/org/apache/ignite/internal/processors/query/h2/H2ConnectionWrapper.java", "diffHunk": "@@ -73,6 +73,11 @@ public void schema(@Nullable String schema) {\n     public Connection connection(@Nullable String schema) {\n         if (schema != null && !F.eq(this.schema, schema)) {\n             try {\n+\n+                if(schema != null && schema.trim().isEmpty()){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb297c544c8e93e3bf1eb48227a3bcb2a46d629b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1Nzk1Njkz", "url": "https://github.com/apache/ignite/pull/7521#pullrequestreview-375795693", "createdAt": "2020-03-17T07:37:57Z", "commit": {"oid": "cb297c544c8e93e3bf1eb48227a3bcb2a46d629b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwNzozNzo1OFrOF3QsHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwNzozNzo1OFrOF3QsHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ4OTQzOA==", "bodyText": "Missed javadoc", "url": "https://github.com/apache/ignite/pull/7521#discussion_r393489438", "createdAt": "2020-03-17T07:37:58Z", "author": {"login": "AMashenkov"}, "path": "modules/indexing/src/test/java/org/apache/ignite/sqltests/BaseSqlTest.java", "diffHunk": "@@ -351,6 +353,10 @@ protected Result executeFrom(String qry, Ignite node) {\n         return executeFrom(new SqlFieldsQuery(qry), node);\n     }\n \n+    protected Result executeFrom(String qry, Ignite node, String schema) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb297c544c8e93e3bf1eb48227a3bcb2a46d629b"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1Nzk1ODQ4", "url": "https://github.com/apache/ignite/pull/7521#pullrequestreview-375795848", "createdAt": "2020-03-17T07:38:18Z", "commit": {"oid": "cb297c544c8e93e3bf1eb48227a3bcb2a46d629b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwNzozODoxOFrOF3Qsjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwNzozODoxOFrOF3Qsjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ4OTU1MA==", "bodyText": "Redundant empty line", "url": "https://github.com/apache/ignite/pull/7521#discussion_r393489550", "createdAt": "2020-03-17T07:38:18Z", "author": {"login": "AMashenkov"}, "path": "modules/indexing/src/test/java/org/apache/ignite/sqltests/BaseSqlTest.java", "diffHunk": "@@ -1249,6 +1255,36 @@ public void testFullOuterDistributedJoinIsNotSupported() {\n         });\n     }\n \n+    /**\n+     * Check schema for validation\n+     */\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb297c544c8e93e3bf1eb48227a3bcb2a46d629b"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1Nzk1OTk4", "url": "https://github.com/apache/ignite/pull/7521#pullrequestreview-375795998", "createdAt": "2020-03-17T07:38:38Z", "commit": {"oid": "cb297c544c8e93e3bf1eb48227a3bcb2a46d629b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwNzozODozOVrOF3QtJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwNzozODozOVrOF3QtJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ4OTcwMw==", "bodyText": "Missed javadoc", "url": "https://github.com/apache/ignite/pull/7521#discussion_r393489703", "createdAt": "2020-03-17T07:38:39Z", "author": {"login": "AMashenkov"}, "path": "modules/indexing/src/test/java/org/apache/ignite/sqltests/BaseSqlTest.java", "diffHunk": "@@ -1249,6 +1255,36 @@ public void testFullOuterDistributedJoinIsNotSupported() {\n         });\n     }\n \n+    /**\n+     * Check schema for validation\n+     */\n+\n+    @Rule\n+    public ExpectedException expectedEx = ExpectedException.none();\n+\n+    @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb297c544c8e93e3bf1eb48227a3bcb2a46d629b"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1Nzk2MTE1", "url": "https://github.com/apache/ignite/pull/7521#pullrequestreview-375796115", "createdAt": "2020-03-17T07:38:51Z", "commit": {"oid": "cb297c544c8e93e3bf1eb48227a3bcb2a46d629b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwNzozODo1MlrOF3QteQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwNzozODo1MlrOF3QteQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ4OTc4NQ==", "bodyText": "Empty line", "url": "https://github.com/apache/ignite/pull/7521#discussion_r393489785", "createdAt": "2020-03-17T07:38:52Z", "author": {"login": "AMashenkov"}, "path": "modules/indexing/src/test/java/org/apache/ignite/sqltests/BaseSqlTest.java", "diffHunk": "@@ -1249,6 +1255,36 @@ public void testFullOuterDistributedJoinIsNotSupported() {\n         });\n     }\n \n+    /**\n+     * Check schema for validation\n+     */\n+\n+    @Rule\n+    public ExpectedException expectedEx = ExpectedException.none();\n+\n+    @Test\n+    public void testCheckEmptySchema() {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb297c544c8e93e3bf1eb48227a3bcb2a46d629b"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1Nzk2NDE5", "url": "https://github.com/apache/ignite/pull/7521#pullrequestreview-375796419", "createdAt": "2020-03-17T07:39:29Z", "commit": {"oid": "cb297c544c8e93e3bf1eb48227a3bcb2a46d629b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwNzozOToyOVrOF3QuXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwNzozOToyOVrOF3QuXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ5MDAxMw==", "bodyText": "Empty line.", "url": "https://github.com/apache/ignite/pull/7521#discussion_r393490013", "createdAt": "2020-03-17T07:39:29Z", "author": {"login": "AMashenkov"}, "path": "modules/indexing/src/test/java/org/apache/ignite/sqltests/BaseSqlTest.java", "diffHunk": "@@ -1249,6 +1255,36 @@ public void testFullOuterDistributedJoinIsNotSupported() {\n         });\n     }\n \n+    /**\n+     * Check schema for validation\n+     */\n+\n+    @Rule\n+    public ExpectedException expectedEx = ExpectedException.none();\n+\n+    @Test\n+    public void testCheckEmptySchema() {\n+\n+        expectedEx.expect(IgniteSQLException.class);\n+        expectedEx.expectMessage(\"Failed to set schema for DB connection. \" +\n+                \"Schema name could not be an empty string\"\n+        );\n+\n+        String sqlQuery = \"SELECT * FROM Employee limit 1\";\n+\n+        testAllNodes(node -> {\n+            executeFrom(sqlQuery, node, \"\");\n+            executeFrom(sqlQuery, node, \" \");\n+            assertTrue(\"Check valid schema\",\n+                    executeFrom(sqlQuery, node, \"PUBLIC\").values().stream().count() > 0\n+            );\n+            assertTrue(\"Check null schema\",\n+                    executeFrom(sqlQuery, node, null).values().stream().count() > 0\n+            );\n+        });\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb297c544c8e93e3bf1eb48227a3bcb2a46d629b"}, "originalPosition": 52}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cb297c544c8e93e3bf1eb48227a3bcb2a46d629b", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/cb297c544c8e93e3bf1eb48227a3bcb2a46d629b", "committedDate": "2020-03-13T13:25:08Z", "message": "IGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name"}, "afterCommit": {"oid": "caf83aff22f65ce3670a1c633880af1478f5764e", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/caf83aff22f65ce3670a1c633880af1478f5764e", "committedDate": "2020-03-17T08:20:18Z", "message": "IGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "caf83aff22f65ce3670a1c633880af1478f5764e", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/caf83aff22f65ce3670a1c633880af1478f5764e", "committedDate": "2020-03-17T08:20:18Z", "message": "IGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name"}, "afterCommit": {"oid": "97f2b2a28852a6f8952e08fe894f3e3dc7ee82a9", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/97f2b2a28852a6f8952e08fe894f3e3dc7ee82a9", "committedDate": "2020-03-19T10:13:52Z", "message": "IGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13daea1ba271a49405df10569a977d3803fd7bff", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/13daea1ba271a49405df10569a977d3803fd7bff", "committedDate": "2020-03-19T15:16:34Z", "message": "IGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "97f2b2a28852a6f8952e08fe894f3e3dc7ee82a9", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/97f2b2a28852a6f8952e08fe894f3e3dc7ee82a9", "committedDate": "2020-03-19T10:13:52Z", "message": "IGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name"}, "afterCommit": {"oid": "13daea1ba271a49405df10569a977d3803fd7bff", "author": {"user": {"login": "Aleksei-Litsov", "name": "Aleksei_Litsov@epam.com"}}, "url": "https://github.com/apache/ignite/commit/13daea1ba271a49405df10569a977d3803fd7bff", "committedDate": "2020-03-19T15:16:34Z", "message": "IGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name\n\nIGNITE-8152 Forbid empty sql schema name"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2758, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}