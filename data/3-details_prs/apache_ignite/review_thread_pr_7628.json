{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5Njc1ODAx", "number": 7628, "reviewThreads": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDozMjoxOVrODvKA2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzoyMjoxM1rODwFy6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNzczNzIzOnYy", "diffSide": "RIGHT", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDozMjoxOVrOGBaqeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDozNDoyMFrOGBaxGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzODYxNg==", "bodyText": "metadatas -> metas", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404138616", "createdAt": "2020-04-06T14:32:19Z", "author": {"login": "ptupitsyn"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -70,6 +84,17 @@ public PlatformFieldsQueryCursor(PlatformContext platformCtx, QueryCursorEx<List\n             for (int i = 0; i < cnt; i++) {\n                 writer.writeString(fq.getFieldName(i));\n             }\n+        } else if (type == OP_GET_FIELDS_META) {\n+            QueryCursorEx<List<?>> cursor = cursor();\n+\n+            List<GridQueryFieldMetadata> metadatas = cursor.fieldsMeta();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0MDMxNQ==", "bodyText": "https://cwiki.apache.org/confluence/display/IGNITE/Abbreviation+Rules\nWeird rules, but we follow them.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404140315", "createdAt": "2020-04-06T14:34:20Z", "author": {"login": "ptupitsyn"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -70,6 +84,17 @@ public PlatformFieldsQueryCursor(PlatformContext platformCtx, QueryCursorEx<List\n             for (int i = 0; i < cnt; i++) {\n                 writer.writeString(fq.getFieldName(i));\n             }\n+        } else if (type == OP_GET_FIELDS_META) {\n+            QueryCursorEx<List<?>> cursor = cursor();\n+\n+            List<GridQueryFieldMetadata> metadatas = cursor.fieldsMeta();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzODYxNg=="}, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNzc0MDc1OnYy", "diffSide": "RIGHT", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDozMjo1MVrOGBasdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDozMjo1MVrOGBasdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzOTEyNw==", "bodyText": "cursor.fieldsMeta() is not guaranteed to return a non-null result, let's add a check.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404139127", "createdAt": "2020-04-06T14:32:51Z", "author": {"login": "ptupitsyn"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -70,6 +84,17 @@ public PlatformFieldsQueryCursor(PlatformContext platformCtx, QueryCursorEx<List\n             for (int i = 0; i < cnt; i++) {\n                 writer.writeString(fq.getFieldName(i));\n             }\n+        } else if (type == OP_GET_FIELDS_META) {\n+            QueryCursorEx<List<?>> cursor = cursor();\n+\n+            List<GridQueryFieldMetadata> metadatas = cursor.fieldsMeta();\n+\n+            writer.writeInt(metadatas.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 74}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNzc0MTk5OnYy", "diffSide": "RIGHT", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDozMzowNFrOGBatMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDozMzowNFrOGBatMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzOTMxMw==", "bodyText": "metadata -> meta", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404139313", "createdAt": "2020-04-06T14:33:04Z", "author": {"login": "ptupitsyn"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -70,6 +84,17 @@ public PlatformFieldsQueryCursor(PlatformContext platformCtx, QueryCursorEx<List\n             for (int i = 0; i < cnt; i++) {\n                 writer.writeString(fq.getFieldName(i));\n             }\n+        } else if (type == OP_GET_FIELDS_META) {\n+            QueryCursorEx<List<?>> cursor = cursor();\n+\n+            List<GridQueryFieldMetadata> metadatas = cursor.fieldsMeta();\n+\n+            writer.writeInt(metadatas.size());\n+\n+            for (GridQueryFieldMetadata metadata: metadatas){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 76}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNzc1NTEzOnYy", "diffSide": "RIGHT", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IFieldsQueryCursor.cs", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDozNTo1MVrOGBa1eA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDozNTo1MVrOGBa1eA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0MTQzMg==", "bodyText": "Comment should end with .", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404141432", "createdAt": "2020-04-06T14:35:51Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IFieldsQueryCursor.cs", "diffHunk": "@@ -30,5 +31,10 @@ public interface IFieldsQueryCursor : IQueryCursor<IList<object>>\n         /// Gets the field names.\n         /// </summary>\n         IList<string> FieldNames { get; }\n+\n+        /// <summary>\n+        /// Gets fields metadata", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNzc3MjcxOnYy", "diffSide": "RIGHT", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/FieldsQueryCursor.cs", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDozOTozNlrOGBbAuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDozOTozNlrOGBbAuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0NDMxMw==", "bodyText": "portable -> binary.\nP.S. This is an ancient legacy of early Ignite days. Binary was called Portable, then we renamed, but this one line was skipped due to a typo.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404144313", "createdAt": "2020-04-06T14:39:36Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/FieldsQueryCursor.cs", "diffHunk": "@@ -33,7 +34,7 @@ internal class FieldsQueryCursor<T> : PlatformQueryQursorBase<T>\n         /// Constructor.\n         /// </summary>\n         /// <param name=\"target\">Target.</param>\n-        /// <param name=\"keepBinary\">Keep poratble flag.</param>\n+        /// <param name=\"keepBinary\">Keep portable flag.</param>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNzc4MjI0OnYy", "diffSide": "RIGHT", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/FieldsQueryCursor.cs", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo0MTozNFrOGBbGqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo0MTozNFrOGBbGqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0NTgzMg==", "bodyText": "Missing XMLDoc", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404145832", "createdAt": "2020-04-06T14:41:34Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/FieldsQueryCursor.cs", "diffHunk": "@@ -85,5 +92,24 @@ public IList<string> FieldNames\n                            Target.OutStream(OpGetFieldNames, reader => reader.ReadStringCollection())));\n             }\n         }\n+\n+        public IList<IQueryCursorFieldMetadata> FieldsMetadata ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNzc5NjQ3OnYy", "diffSide": "RIGHT", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IFieldsQueryCursor.cs", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo0NDozMlrOGBbPdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo0NDozMlrOGBbPdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0ODA4Nw==", "bodyText": "Let's just name this Fields", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404148087", "createdAt": "2020-04-06T14:44:32Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IFieldsQueryCursor.cs", "diffHunk": "@@ -30,5 +31,10 @@ public interface IFieldsQueryCursor : IQueryCursor<IList<object>>\n         /// Gets the field names.\n         /// </summary>\n         IList<string> FieldNames { get; }\n+\n+        /// <summary>\n+        /// Gets fields metadata\n+        /// </summary>\n+        IList<IQueryCursorFieldMetadata> FieldsMetadata { get; }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNzgwMTIxOnYy", "diffSide": "RIGHT", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IQueryCursorFieldMetadata.cs", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo0NToyN1rOGBbSSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo0NToyN1rOGBbSSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0ODgwOQ==", "bodyText": "In line with the above: IQueryCursorField", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404148809", "createdAt": "2020-04-06T14:45:27Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IQueryCursorFieldMetadata.cs", "diffHunk": "@@ -0,0 +1,43 @@\n+\ufeff/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Cache.Query\n+{\n+    using System;\n+\n+    /// <summary>\n+    /// Query field descriptor. This descriptor is used to provide metadata\n+    /// about fields returned in query result.\n+    /// </summary>\n+    public interface IQueryCursorFieldMetadata", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNzgxNTgyOnYy", "diffSide": "RIGHT", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IQueryCursorFieldMetadata.cs", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo0ODoxOFrOGBbbFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo0ODoxOFrOGBbbFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE1MTA2MA==", "bodyText": "Gets the field name.\nhttps://github.com/DotNetAnalyzers/StyleCopAnalyzers/blob/master/documentation/SA1623.md", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404151060", "createdAt": "2020-04-06T14:48:18Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IQueryCursorFieldMetadata.cs", "diffHunk": "@@ -0,0 +1,43 @@\n+\ufeff/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Cache.Query\n+{\n+    using System;\n+\n+    /// <summary>\n+    /// Query field descriptor. This descriptor is used to provide metadata\n+    /// about fields returned in query result.\n+    /// </summary>\n+    public interface IQueryCursorFieldMetadata\n+    {\n+        /// <summary>\n+        /// Field name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNzgxOTA0OnYy", "diffSide": "RIGHT", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IQueryCursorFieldMetadata.cs", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo0ODo1MFrOGBbc5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo0ODo1MFrOGBbc5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE1MTUyNA==", "bodyText": "Gets the name of Java type for this field.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404151524", "createdAt": "2020-04-06T14:48:50Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IQueryCursorFieldMetadata.cs", "diffHunk": "@@ -0,0 +1,43 @@\n+\ufeff/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Cache.Query\n+{\n+    using System;\n+\n+    /// <summary>\n+    /// Query field descriptor. This descriptor is used to provide metadata\n+    /// about fields returned in query result.\n+    /// </summary>\n+    public interface IQueryCursorFieldMetadata\n+    {\n+        /// <summary>\n+        /// Field name\n+        /// </summary>\n+        string Name { get; }\n+\n+        /// <summary>\n+        /// Name of java type to which this field belongs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNzgxOTk3OnYy", "diffSide": "RIGHT", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IQueryCursorFieldMetadata.cs", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo0OTowMVrOGBbdeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo0OTowMVrOGBbdeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE1MTY3Mw==", "bodyText": "Gets the field type.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404151673", "createdAt": "2020-04-06T14:49:01Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IQueryCursorFieldMetadata.cs", "diffHunk": "@@ -0,0 +1,43 @@\n+\ufeff/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Cache.Query\n+{\n+    using System;\n+\n+    /// <summary>\n+    /// Query field descriptor. This descriptor is used to provide metadata\n+    /// about fields returned in query result.\n+    /// </summary>\n+    public interface IQueryCursorFieldMetadata\n+    {\n+        /// <summary>\n+        /// Field name\n+        /// </summary>\n+        string Name { get; }\n+\n+        /// <summary>\n+        /// Name of java type to which this field belongs\n+        /// </summary>\n+        string JavaTypeName { get; }\n+\n+        /// <summary>\n+        /// Type to which this field belongs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNzgyNTc3OnYy", "diffSide": "RIGHT", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/QueryCursorFieldMetadataImpl.cs", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo1MDoyMFrOGBbhZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo1MDo0OFrOGBbizg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE1MjY3Ng==", "bodyText": "Please remove Impl suffix. It is present on some types because of Java naming legacy, but it is against Microsoft standards, so we try to avoid this.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404152676", "createdAt": "2020-04-06T14:50:20Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/QueryCursorFieldMetadataImpl.cs", "diffHunk": "@@ -0,0 +1,63 @@\n+\ufeff/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Impl.Cache.Query\n+{\n+    using System;\n+    using Apache.Ignite.Core.Binary;\n+    using Apache.Ignite.Core.Cache.Query;\n+    using Apache.Ignite.Core.Impl.Binary;\n+\n+    /// <summary>\n+    /// Query cursor field metadata implementation.\n+    /// </summary>\n+    public class QueryCursorFieldMetadataImpl : IQueryCursorFieldMetadata", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE1MzAzOA==", "bodyText": "Important: make this class internal", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404153038", "createdAt": "2020-04-06T14:50:48Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/QueryCursorFieldMetadataImpl.cs", "diffHunk": "@@ -0,0 +1,63 @@\n+\ufeff/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Impl.Cache.Query\n+{\n+    using System;\n+    using Apache.Ignite.Core.Binary;\n+    using Apache.Ignite.Core.Cache.Query;\n+    using Apache.Ignite.Core.Impl.Binary;\n+\n+    /// <summary>\n+    /// Query cursor field metadata implementation.\n+    /// </summary>\n+    public class QueryCursorFieldMetadataImpl : IQueryCursorFieldMetadata", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE1MjY3Ng=="}, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNzQ5MTQwOnYy", "diffSide": "RIGHT", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzoxMTozMlrOGC445w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxOTo1NjowMVrOGC-omQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4MjQwNw==", "bodyText": "Something happened with comments blocks here and below. Please revert unrelated changes.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r405682407", "createdAt": "2020-04-08T17:11:32Z", "author": {"login": "ptupitsyn"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -22,29 +22,40 @@\n import org.apache.ignite.internal.binary.BinaryRawWriterEx;\n import org.apache.ignite.internal.processors.cache.query.QueryCursorEx;\n import org.apache.ignite.internal.processors.platform.PlatformContext;\n+import org.apache.ignite.internal.processors.query.GridQueryFieldMetadata;\n \n import java.util.List;\n \n /**\n  * Interop cursor for fields query.\n  */\n public class PlatformFieldsQueryCursor extends PlatformAbstractQueryCursor<List<?>> {\n-    /** Gets field names. */\n+    /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dedbc8478faab64890751515e677758764250bb7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTc3NjUzNw==", "bodyText": "Auto-formatting by IDE.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r405776537", "createdAt": "2020-04-08T19:56:01Z", "author": {"login": "gurustron"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -22,29 +22,40 @@\n import org.apache.ignite.internal.binary.BinaryRawWriterEx;\n import org.apache.ignite.internal.processors.cache.query.QueryCursorEx;\n import org.apache.ignite.internal.processors.platform.PlatformContext;\n+import org.apache.ignite.internal.processors.query.GridQueryFieldMetadata;\n \n import java.util.List;\n \n /**\n  * Interop cursor for fields query.\n  */\n public class PlatformFieldsQueryCursor extends PlatformAbstractQueryCursor<List<?>> {\n-    /** Gets field names. */\n+    /**", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4MjQwNw=="}, "originalCommit": {"oid": "dedbc8478faab64890751515e677758764250bb7"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNzQ5NjA5OnYy", "diffSide": "RIGHT", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IFieldsQueryCursor.cs", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzoxMjo0NlrOGC47ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzoxMjo0NlrOGC47ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4MzEzOQ==", "bodyText": "Unused import?", "url": "https://github.com/apache/ignite/pull/7628#discussion_r405683139", "createdAt": "2020-04-08T17:12:46Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IFieldsQueryCursor.cs", "diffHunk": "@@ -19,6 +19,7 @@ namespace Apache.Ignite.Core.Cache.Query\n {\n     using System.Collections.Generic;\n     using System.Diagnostics.CodeAnalysis;\n+    using Apache.Ignite.Core.Impl.Cache.Query;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dedbc8478faab64890751515e677758764250bb7"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNzUyMzQyOnYy", "diffSide": "RIGHT", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/FieldsQueryCursor.cs", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzoxOTo1N1rOGC5Mzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxOTo1NTozMFrOGC-niw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4NzUwMg==", "bodyText": "ToList causes unnecessary allocations here. My proposal:\n\nRemove ?? above, get the result of ReadCollectionRaw as is\n_fieldsMeta = meta != null ? meta.AsReadOnly() : new ReadOnlyCollection()", "url": "https://github.com/apache/ignite/pull/7628#discussion_r405687502", "createdAt": "2020-04-08T17:19:57Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/FieldsQueryCursor.cs", "diffHunk": "@@ -85,5 +92,26 @@ public IList<string> FieldNames\n                            Target.OutStream(OpGetFieldNames, reader => reader.ReadStringCollection())));\n             }\n         }\n+\n+        /** <inheritdoc /> */\n+        public IList<IQueryCursorField> Fields \n+        {\n+            get\n+            {\n+                if (_fieldsMeta == null)\n+                {\n+                    var metadata = Target.OutStream(\n+                        OpGetFieldsMeta,\n+                        reader => reader.ReadCollectionRaw(stream =>\n+                            new QueryCursorField(stream) as IQueryCursorField))\n+                        ?? new List<IQueryCursorField>();\n+\n+                    _fieldsMeta = new ReadOnlyCollection<IQueryCursorField>(\n+                        metadata as List<IQueryCursorField> ?? metadata.ToList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dedbc8478faab64890751515e677758764250bb7"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTcyOTI0NA==", "bodyText": "As far as i understand .AsReadOnly() is not an option here cause we have IList in contract and if the underlying collection is mutable it will allow mutations.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r405729244", "createdAt": "2020-04-08T18:30:36Z", "author": {"login": "gurustron"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/FieldsQueryCursor.cs", "diffHunk": "@@ -85,5 +92,26 @@ public IList<string> FieldNames\n                            Target.OutStream(OpGetFieldNames, reader => reader.ReadStringCollection())));\n             }\n         }\n+\n+        /** <inheritdoc /> */\n+        public IList<IQueryCursorField> Fields \n+        {\n+            get\n+            {\n+                if (_fieldsMeta == null)\n+                {\n+                    var metadata = Target.OutStream(\n+                        OpGetFieldsMeta,\n+                        reader => reader.ReadCollectionRaw(stream =>\n+                            new QueryCursorField(stream) as IQueryCursorField))\n+                        ?? new List<IQueryCursorField>();\n+\n+                    _fieldsMeta = new ReadOnlyCollection<IQueryCursorField>(\n+                        metadata as List<IQueryCursorField> ?? metadata.ToList());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4NzUwMg=="}, "originalCommit": {"oid": "dedbc8478faab64890751515e677758764250bb7"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTc3NjI2Nw==", "bodyText": "Changed the underlying method to return IList since it is already returning one", "url": "https://github.com/apache/ignite/pull/7628#discussion_r405776267", "createdAt": "2020-04-08T19:55:30Z", "author": {"login": "gurustron"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/FieldsQueryCursor.cs", "diffHunk": "@@ -85,5 +92,26 @@ public IList<string> FieldNames\n                            Target.OutStream(OpGetFieldNames, reader => reader.ReadStringCollection())));\n             }\n         }\n+\n+        /** <inheritdoc /> */\n+        public IList<IQueryCursorField> Fields \n+        {\n+            get\n+            {\n+                if (_fieldsMeta == null)\n+                {\n+                    var metadata = Target.OutStream(\n+                        OpGetFieldsMeta,\n+                        reader => reader.ReadCollectionRaw(stream =>\n+                            new QueryCursorField(stream) as IQueryCursorField))\n+                        ?? new List<IQueryCursorField>();\n+\n+                    _fieldsMeta = new ReadOnlyCollection<IQueryCursorField>(\n+                        metadata as List<IQueryCursorField> ?? metadata.ToList());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4NzUwMg=="}, "originalCommit": {"oid": "dedbc8478faab64890751515e677758764250bb7"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNzUzMTkzOnYy", "diffSide": "RIGHT", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/QueryCursorField.cs", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzoyMjoxM1rOGC5SJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzoyMjoxM1rOGC5SJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4ODg3MQ==", "bodyText": "Can we move this check to JavaTypes class?", "url": "https://github.com/apache/ignite/pull/7628#discussion_r405688871", "createdAt": "2020-04-08T17:22:13Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/QueryCursorField.cs", "diffHunk": "@@ -0,0 +1,63 @@\n+\ufeff/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Impl.Cache.Query\n+{\n+    using System;\n+    using Apache.Ignite.Core.Binary;\n+    using Apache.Ignite.Core.Cache.Query;\n+    using Apache.Ignite.Core.Impl.Binary;\n+\n+    /// <summary>\n+    /// Query cursor field implementation.\n+    /// </summary>\n+    internal class QueryCursorField : IQueryCursorField\n+    {\n+        /// <summary>\n+        /// Initializes a new instance of the <see cref=\"QueryCursorField\"/> class.\n+        /// </summary>\n+        /// <param name=\"reader\">The reader.</param>\n+        public QueryCursorField(IBinaryRawReader reader)\n+        {\n+            Name = reader.ReadString();\n+            JavaTypeName = reader.ReadString();\n+            Type = GetDotNetType(JavaTypeName);\n+        }\n+\n+        /** <inheritdoc /> */\n+        public string Name { get; private set; }\n+\n+        /** <inheritdoc /> */\n+        public string JavaTypeName { get; private set; }\n+\n+        /** <inheritdoc /> */\n+        public Type Type { get; private set; }\n+\n+        /// <summary>\n+        ///  Gets .NET type that corresponds to specified Java type name.\n+        /// </summary>\n+        /// <param name=\"javaTypeName\">Name of the java type.</param>\n+        /// <returns></returns>\n+        private static Type GetDotNetType(string javaTypeName)\n+        {\n+            var dotNetType = JavaTypes.GetDotNetType(javaTypeName);\n+            if (dotNetType == null && javaTypeName == \"java.lang.Object\") dotNetType = typeof(object);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dedbc8478faab64890751515e677758764250bb7"}, "originalPosition": 58}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2510, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}