{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5Njc1ODAx", "number": 7628, "title": "IGNITE-7609 .NET: FieldsQueryCursor should expose data types too", "bodyText": "", "createdAt": "2020-04-06T14:12:17Z", "url": "https://github.com/apache/ignite/pull/7628", "merged": true, "mergeCommit": {"oid": "6e0b1f6577a011e194295b110869acc4534ac5af"}, "closed": true, "closedAt": "2020-04-09T14:27:15Z", "author": {"login": "gurustron"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcP1CoFgH2gAyMzk5Njc1ODAxOjQ3Y2FhOTM0ZDA3NjAzOGZiYjIxOTQ5MzZhMjU5ZDgwMjYwNjA4NDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcV9UfegFqTM5MDg0MTM4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "47caa934d076038fbb2194936a259d8026060842", "author": {"user": {"login": "gurustron", "name": null}}, "url": "https://github.com/apache/ignite/commit/47caa934d076038fbb2194936a259d8026060842", "committedDate": "2020-03-21T13:22:47Z", "message": "---"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a651f36176174851ec1c73a78157df97c5b8f222", "author": {"user": {"login": "gurustron", "name": null}}, "url": "https://github.com/apache/ignite/commit/a651f36176174851ec1c73a78157df97c5b8f222", "committedDate": "2020-04-02T11:39:44Z", "message": "implement simple types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb3d787e4c743a9ce292412e5428b973f9005610", "author": {"user": {"login": "gurustron", "name": null}}, "url": "https://github.com/apache/ignite/commit/fb3d787e4c743a9ce292412e5428b973f9005610", "committedDate": "2020-04-03T19:03:00Z", "message": "Merge branch 'master' into IGNITE-7609-fields-query-expose-types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3d0901ec52c6d6adffd857638d2c89941fdb3a5", "author": {"user": {"login": "gurustron", "name": null}}, "url": "https://github.com/apache/ignite/commit/d3d0901ec52c6d6adffd857638d2c89941fdb3a5", "committedDate": "2020-04-04T21:00:47Z", "message": "implement client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ff3619bf60d3ae339d4d637b45ab952bf36292c", "author": {"user": {"login": "gurustron", "name": null}}, "url": "https://github.com/apache/ignite/commit/9ff3619bf60d3ae339d4d637b45ab952bf36292c", "committedDate": "2020-04-06T13:57:52Z", "message": "fix typos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0050efc9b563294062efc1ca9c0ca31fb734f35d", "author": {"user": {"login": "gurustron", "name": null}}, "url": "https://github.com/apache/ignite/commit/0050efc9b563294062efc1ca9c0ca31fb734f35d", "committedDate": "2020-04-06T14:05:10Z", "message": "throw not supported"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5", "author": {"user": {"login": "gurustron", "name": null}}, "url": "https://github.com/apache/ignite/commit/8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5", "committedDate": "2020-04-06T14:11:14Z", "message": "some clean up before review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4MzA5Njgz", "url": "https://github.com/apache/ignite/pull/7628#pullrequestreview-388309683", "createdAt": "2020-04-06T14:32:19Z", "commit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDozMjoxOVrOGBaqeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNDo1MDo0OFrOGBbizg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzODYxNg==", "bodyText": "metadatas -> metas", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404138616", "createdAt": "2020-04-06T14:32:19Z", "author": {"login": "ptupitsyn"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -70,6 +84,17 @@ public PlatformFieldsQueryCursor(PlatformContext platformCtx, QueryCursorEx<List\n             for (int i = 0; i < cnt; i++) {\n                 writer.writeString(fq.getFieldName(i));\n             }\n+        } else if (type == OP_GET_FIELDS_META) {\n+            QueryCursorEx<List<?>> cursor = cursor();\n+\n+            List<GridQueryFieldMetadata> metadatas = cursor.fieldsMeta();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzOTEyNw==", "bodyText": "cursor.fieldsMeta() is not guaranteed to return a non-null result, let's add a check.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404139127", "createdAt": "2020-04-06T14:32:51Z", "author": {"login": "ptupitsyn"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -70,6 +84,17 @@ public PlatformFieldsQueryCursor(PlatformContext platformCtx, QueryCursorEx<List\n             for (int i = 0; i < cnt; i++) {\n                 writer.writeString(fq.getFieldName(i));\n             }\n+        } else if (type == OP_GET_FIELDS_META) {\n+            QueryCursorEx<List<?>> cursor = cursor();\n+\n+            List<GridQueryFieldMetadata> metadatas = cursor.fieldsMeta();\n+\n+            writer.writeInt(metadatas.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzOTMxMw==", "bodyText": "metadata -> meta", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404139313", "createdAt": "2020-04-06T14:33:04Z", "author": {"login": "ptupitsyn"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -70,6 +84,17 @@ public PlatformFieldsQueryCursor(PlatformContext platformCtx, QueryCursorEx<List\n             for (int i = 0; i < cnt; i++) {\n                 writer.writeString(fq.getFieldName(i));\n             }\n+        } else if (type == OP_GET_FIELDS_META) {\n+            QueryCursorEx<List<?>> cursor = cursor();\n+\n+            List<GridQueryFieldMetadata> metadatas = cursor.fieldsMeta();\n+\n+            writer.writeInt(metadatas.size());\n+\n+            for (GridQueryFieldMetadata metadata: metadatas){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0MDMxNQ==", "bodyText": "https://cwiki.apache.org/confluence/display/IGNITE/Abbreviation+Rules\nWeird rules, but we follow them.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404140315", "createdAt": "2020-04-06T14:34:20Z", "author": {"login": "ptupitsyn"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -70,6 +84,17 @@ public PlatformFieldsQueryCursor(PlatformContext platformCtx, QueryCursorEx<List\n             for (int i = 0; i < cnt; i++) {\n                 writer.writeString(fq.getFieldName(i));\n             }\n+        } else if (type == OP_GET_FIELDS_META) {\n+            QueryCursorEx<List<?>> cursor = cursor();\n+\n+            List<GridQueryFieldMetadata> metadatas = cursor.fieldsMeta();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzODYxNg=="}, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0MTQzMg==", "bodyText": "Comment should end with .", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404141432", "createdAt": "2020-04-06T14:35:51Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IFieldsQueryCursor.cs", "diffHunk": "@@ -30,5 +31,10 @@ public interface IFieldsQueryCursor : IQueryCursor<IList<object>>\n         /// Gets the field names.\n         /// </summary>\n         IList<string> FieldNames { get; }\n+\n+        /// <summary>\n+        /// Gets fields metadata", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0NDMxMw==", "bodyText": "portable -> binary.\nP.S. This is an ancient legacy of early Ignite days. Binary was called Portable, then we renamed, but this one line was skipped due to a typo.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404144313", "createdAt": "2020-04-06T14:39:36Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/FieldsQueryCursor.cs", "diffHunk": "@@ -33,7 +34,7 @@ internal class FieldsQueryCursor<T> : PlatformQueryQursorBase<T>\n         /// Constructor.\n         /// </summary>\n         /// <param name=\"target\">Target.</param>\n-        /// <param name=\"keepBinary\">Keep poratble flag.</param>\n+        /// <param name=\"keepBinary\">Keep portable flag.</param>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0NTgzMg==", "bodyText": "Missing XMLDoc", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404145832", "createdAt": "2020-04-06T14:41:34Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/FieldsQueryCursor.cs", "diffHunk": "@@ -85,5 +92,24 @@ public IList<string> FieldNames\n                            Target.OutStream(OpGetFieldNames, reader => reader.ReadStringCollection())));\n             }\n         }\n+\n+        public IList<IQueryCursorFieldMetadata> FieldsMetadata ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0ODA4Nw==", "bodyText": "Let's just name this Fields", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404148087", "createdAt": "2020-04-06T14:44:32Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IFieldsQueryCursor.cs", "diffHunk": "@@ -30,5 +31,10 @@ public interface IFieldsQueryCursor : IQueryCursor<IList<object>>\n         /// Gets the field names.\n         /// </summary>\n         IList<string> FieldNames { get; }\n+\n+        /// <summary>\n+        /// Gets fields metadata\n+        /// </summary>\n+        IList<IQueryCursorFieldMetadata> FieldsMetadata { get; }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0ODgwOQ==", "bodyText": "In line with the above: IQueryCursorField", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404148809", "createdAt": "2020-04-06T14:45:27Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IQueryCursorFieldMetadata.cs", "diffHunk": "@@ -0,0 +1,43 @@\n+\ufeff/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Cache.Query\n+{\n+    using System;\n+\n+    /// <summary>\n+    /// Query field descriptor. This descriptor is used to provide metadata\n+    /// about fields returned in query result.\n+    /// </summary>\n+    public interface IQueryCursorFieldMetadata", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE1MTA2MA==", "bodyText": "Gets the field name.\nhttps://github.com/DotNetAnalyzers/StyleCopAnalyzers/blob/master/documentation/SA1623.md", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404151060", "createdAt": "2020-04-06T14:48:18Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IQueryCursorFieldMetadata.cs", "diffHunk": "@@ -0,0 +1,43 @@\n+\ufeff/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Cache.Query\n+{\n+    using System;\n+\n+    /// <summary>\n+    /// Query field descriptor. This descriptor is used to provide metadata\n+    /// about fields returned in query result.\n+    /// </summary>\n+    public interface IQueryCursorFieldMetadata\n+    {\n+        /// <summary>\n+        /// Field name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE1MTUyNA==", "bodyText": "Gets the name of Java type for this field.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404151524", "createdAt": "2020-04-06T14:48:50Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IQueryCursorFieldMetadata.cs", "diffHunk": "@@ -0,0 +1,43 @@\n+\ufeff/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Cache.Query\n+{\n+    using System;\n+\n+    /// <summary>\n+    /// Query field descriptor. This descriptor is used to provide metadata\n+    /// about fields returned in query result.\n+    /// </summary>\n+    public interface IQueryCursorFieldMetadata\n+    {\n+        /// <summary>\n+        /// Field name\n+        /// </summary>\n+        string Name { get; }\n+\n+        /// <summary>\n+        /// Name of java type to which this field belongs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE1MTY3Mw==", "bodyText": "Gets the field type.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404151673", "createdAt": "2020-04-06T14:49:01Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IQueryCursorFieldMetadata.cs", "diffHunk": "@@ -0,0 +1,43 @@\n+\ufeff/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Cache.Query\n+{\n+    using System;\n+\n+    /// <summary>\n+    /// Query field descriptor. This descriptor is used to provide metadata\n+    /// about fields returned in query result.\n+    /// </summary>\n+    public interface IQueryCursorFieldMetadata\n+    {\n+        /// <summary>\n+        /// Field name\n+        /// </summary>\n+        string Name { get; }\n+\n+        /// <summary>\n+        /// Name of java type to which this field belongs\n+        /// </summary>\n+        string JavaTypeName { get; }\n+\n+        /// <summary>\n+        /// Type to which this field belongs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE1MjY3Ng==", "bodyText": "Please remove Impl suffix. It is present on some types because of Java naming legacy, but it is against Microsoft standards, so we try to avoid this.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404152676", "createdAt": "2020-04-06T14:50:20Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/QueryCursorFieldMetadataImpl.cs", "diffHunk": "@@ -0,0 +1,63 @@\n+\ufeff/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Impl.Cache.Query\n+{\n+    using System;\n+    using Apache.Ignite.Core.Binary;\n+    using Apache.Ignite.Core.Cache.Query;\n+    using Apache.Ignite.Core.Impl.Binary;\n+\n+    /// <summary>\n+    /// Query cursor field metadata implementation.\n+    /// </summary>\n+    public class QueryCursorFieldMetadataImpl : IQueryCursorFieldMetadata", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE1MzAzOA==", "bodyText": "Important: make this class internal", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404153038", "createdAt": "2020-04-06T14:50:48Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/QueryCursorFieldMetadataImpl.cs", "diffHunk": "@@ -0,0 +1,63 @@\n+\ufeff/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Impl.Cache.Query\n+{\n+    using System;\n+    using Apache.Ignite.Core.Binary;\n+    using Apache.Ignite.Core.Cache.Query;\n+    using Apache.Ignite.Core.Impl.Binary;\n+\n+    /// <summary>\n+    /// Query cursor field metadata implementation.\n+    /// </summary>\n+    public class QueryCursorFieldMetadataImpl : IQueryCursorFieldMetadata", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE1MjY3Ng=="}, "originalCommit": {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dedbc8478faab64890751515e677758764250bb7", "author": {"user": {"login": "gurustron", "name": null}}, "url": "https://github.com/apache/ignite/commit/dedbc8478faab64890751515e677758764250bb7", "committedDate": "2020-04-06T21:03:13Z", "message": "fixes after review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMTcwNzA2", "url": "https://github.com/apache/ignite/pull/7628#pullrequestreview-390170706", "createdAt": "2020-04-08T17:11:32Z", "commit": {"oid": "dedbc8478faab64890751515e677758764250bb7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzoxMTozMlrOGC445w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzoyMjoxM1rOGC5SJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4MjQwNw==", "bodyText": "Something happened with comments blocks here and below. Please revert unrelated changes.", "url": "https://github.com/apache/ignite/pull/7628#discussion_r405682407", "createdAt": "2020-04-08T17:11:32Z", "author": {"login": "ptupitsyn"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -22,29 +22,40 @@\n import org.apache.ignite.internal.binary.BinaryRawWriterEx;\n import org.apache.ignite.internal.processors.cache.query.QueryCursorEx;\n import org.apache.ignite.internal.processors.platform.PlatformContext;\n+import org.apache.ignite.internal.processors.query.GridQueryFieldMetadata;\n \n import java.util.List;\n \n /**\n  * Interop cursor for fields query.\n  */\n public class PlatformFieldsQueryCursor extends PlatformAbstractQueryCursor<List<?>> {\n-    /** Gets field names. */\n+    /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dedbc8478faab64890751515e677758764250bb7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4MzEzOQ==", "bodyText": "Unused import?", "url": "https://github.com/apache/ignite/pull/7628#discussion_r405683139", "createdAt": "2020-04-08T17:12:46Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Cache/Query/IFieldsQueryCursor.cs", "diffHunk": "@@ -19,6 +19,7 @@ namespace Apache.Ignite.Core.Cache.Query\n {\n     using System.Collections.Generic;\n     using System.Diagnostics.CodeAnalysis;\n+    using Apache.Ignite.Core.Impl.Cache.Query;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dedbc8478faab64890751515e677758764250bb7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4NzUwMg==", "bodyText": "ToList causes unnecessary allocations here. My proposal:\n\nRemove ?? above, get the result of ReadCollectionRaw as is\n_fieldsMeta = meta != null ? meta.AsReadOnly() : new ReadOnlyCollection()", "url": "https://github.com/apache/ignite/pull/7628#discussion_r405687502", "createdAt": "2020-04-08T17:19:57Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/FieldsQueryCursor.cs", "diffHunk": "@@ -85,5 +92,26 @@ public IList<string> FieldNames\n                            Target.OutStream(OpGetFieldNames, reader => reader.ReadStringCollection())));\n             }\n         }\n+\n+        /** <inheritdoc /> */\n+        public IList<IQueryCursorField> Fields \n+        {\n+            get\n+            {\n+                if (_fieldsMeta == null)\n+                {\n+                    var metadata = Target.OutStream(\n+                        OpGetFieldsMeta,\n+                        reader => reader.ReadCollectionRaw(stream =>\n+                            new QueryCursorField(stream) as IQueryCursorField))\n+                        ?? new List<IQueryCursorField>();\n+\n+                    _fieldsMeta = new ReadOnlyCollection<IQueryCursorField>(\n+                        metadata as List<IQueryCursorField> ?? metadata.ToList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dedbc8478faab64890751515e677758764250bb7"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4ODg3MQ==", "bodyText": "Can we move this check to JavaTypes class?", "url": "https://github.com/apache/ignite/pull/7628#discussion_r405688871", "createdAt": "2020-04-08T17:22:13Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/QueryCursorField.cs", "diffHunk": "@@ -0,0 +1,63 @@\n+\ufeff/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Impl.Cache.Query\n+{\n+    using System;\n+    using Apache.Ignite.Core.Binary;\n+    using Apache.Ignite.Core.Cache.Query;\n+    using Apache.Ignite.Core.Impl.Binary;\n+\n+    /// <summary>\n+    /// Query cursor field implementation.\n+    /// </summary>\n+    internal class QueryCursorField : IQueryCursorField\n+    {\n+        /// <summary>\n+        /// Initializes a new instance of the <see cref=\"QueryCursorField\"/> class.\n+        /// </summary>\n+        /// <param name=\"reader\">The reader.</param>\n+        public QueryCursorField(IBinaryRawReader reader)\n+        {\n+            Name = reader.ReadString();\n+            JavaTypeName = reader.ReadString();\n+            Type = GetDotNetType(JavaTypeName);\n+        }\n+\n+        /** <inheritdoc /> */\n+        public string Name { get; private set; }\n+\n+        /** <inheritdoc /> */\n+        public string JavaTypeName { get; private set; }\n+\n+        /** <inheritdoc /> */\n+        public Type Type { get; private set; }\n+\n+        /// <summary>\n+        ///  Gets .NET type that corresponds to specified Java type name.\n+        /// </summary>\n+        /// <param name=\"javaTypeName\">Name of the java type.</param>\n+        /// <returns></returns>\n+        private static Type GetDotNetType(string javaTypeName)\n+        {\n+            var dotNetType = JavaTypes.GetDotNetType(javaTypeName);\n+            if (dotNetType == null && javaTypeName == \"java.lang.Object\") dotNetType = typeof(object);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dedbc8478faab64890751515e677758764250bb7"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae0b12fb1547c419bd5ba001452c99913126c0fb", "author": {"user": {"login": "gurustron", "name": null}}, "url": "https://github.com/apache/ignite/commit/ae0b12fb1547c419bd5ba001452c99913126c0fb", "committedDate": "2020-04-08T19:53:49Z", "message": "fixes after review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwODQxMzgz", "url": "https://github.com/apache/ignite/pull/7628#pullrequestreview-390841383", "createdAt": "2020-04-09T14:25:05Z", "commit": {"oid": "ae0b12fb1547c419bd5ba001452c99913126c0fb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2685, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}