{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5NDcxMTE2", "number": 7471, "title": "IGNITE-12701 : Disallow silent deactivation in CLI and REST.", "bodyText": "Changes in public behavior:\n\n\nInvolved optional flag 'force' for control.sh (bat) with --deactivate and --set-sate:\ncontrol.sh --deactivate --force\ncontrol.sh --set-state INACTIVE --force\n\n\nInvolved optional parameter 'force=true|false' for REST cluster state requests:\nhttp://127.0.0.1:8092/ignite?cmd=deactivate&force=true\nhttp://127.0.0.1:8092/ignite?cmd=inactive&force=true\nhttp://127.0.0.1:8092/ignite?cmd=setstate&state=INACTIVE&force=true\n\n\nMajor code changes:\n\nAdded GridClientClusterStateRequestV2.\nDeprecated GridClientClusterStateRequest.\nAdded flag \u2018force\u2019 for REST in GridRestClusterStateRequest\nAdded flag \u2018force\u2019 CLI in DeactivateCommand, ClusterStateChangeCommand.\nAdded IgniteFeatures# FORCED_CHANGE_OF_CLUSTER_STATE.\nAdded checking of deactivation safety: GridClusterStateProcessor# isDeactivationSafe()\nInvolved o deactivation safety checking in GridClusterStateProcessing and GridClientClusterStateImpl.", "createdAt": "2020-02-25T09:45:54Z", "url": "https://github.com/apache/ignite/pull/7471", "merged": true, "mergeCommit": {"oid": "4921fcf1fecbd8a1ab02099e09cc2adb0b3ff88a"}, "closed": true, "closedAt": "2020-03-11T15:56:05Z", "author": {"login": "Vladsz83"}, "timelineItems": {"totalCount": 100, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcAvaFtgH2gAyMzc5NDcxMTE2OjZlY2RiZjhmYmQzNmU2Yzk1YzI3ODZkZWVmYWZjMDVkNzE5OTNmOTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMpNhXgFqTM3Mjg5MzY4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6ecdbf8fbd36e6c95c2786deefafc05d71993f93", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/6ecdbf8fbd36e6c95c2786deefafc05d71993f93", "committedDate": "2020-02-03T16:20:07Z", "message": "IGNITE-12597 : first impl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d4aae017a153636e31438202d2a586a137e957e", "author": {"user": null}, "url": "https://github.com/apache/ignite/commit/4d4aae017a153636e31438202d2a586a137e957e", "committedDate": "2020-02-04T09:31:32Z", "message": "IGNITE-12597 : + checking of reuse-data-region system property"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f36c5791314431affdeca626020c8d8ee86dfe08", "author": {"user": null}, "url": "https://github.com/apache/ignite/commit/f36c5791314431affdeca626020c8d8ee86dfe08", "committedDate": "2020-02-04T13:22:00Z", "message": "IGNITE-12597 : + fix in the JMX"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1aac619c3c2124aa6944b266a0c3b7c6dddc46af", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/1aac619c3c2124aa6944b266a0c3b7c6dddc46af", "committedDate": "2020-02-04T14:48:30Z", "message": "IGNITE-12597 : Think is ready except the JMX tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0f6ac491d512cb1ff439290b3f372893d88ca06", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/e0f6ac491d512cb1ff439290b3f372893d88ca06", "committedDate": "2020-02-04T16:39:25Z", "message": "IGNITE-12597 : Think the ticket is done. Attempt #1."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "172c4320636902f6ab58a08f41c851ba06cecc22", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/172c4320636902f6ab58a08f41c851ba06cecc22", "committedDate": "2020-02-04T16:57:25Z", "message": "IGNITE-12597 : Small fix in messages."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9149f0ac13dd9a7edb8ce91f75aa327db2ee84ba", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/9149f0ac13dd9a7edb8ce91f75aa327db2ee84ba", "committedDate": "2020-02-05T13:44:28Z", "message": "IGNITE-12597 : Fixed checking of erase-mem-on-deactivation-flag. Now within the job, not on client node."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a90f533020aa475fb2166731ecd53cbe17fba09", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/9a90f533020aa475fb2166731ecd53cbe17fba09", "committedDate": "2020-02-05T17:36:15Z", "message": "IGNITE-12597 : Fixed checking of erase-mem-on-deactivation-flag. Now within the job, not on client node."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dfd7f8dbd259d301b2f5a3c06c3feaf76960ff3", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/4dfd7f8dbd259d301b2f5a3c06c3feaf76960ff3", "committedDate": "2020-02-05T17:42:03Z", "message": "IGNITE-12597 : Lost fixws after review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edd2a52af20227cb3881a0bd1bdacf716782baf7", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/edd2a52af20227cb3881a0bd1bdacf716782baf7", "committedDate": "2020-02-06T10:50:49Z", "message": "IGNITE-12597 : fix after review."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d2dc697105c0445eac64ab9bdac69314ed296ff", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/5d2dc697105c0445eac64ab9bdac69314ed296ff", "committedDate": "2020-02-06T12:56:23Z", "message": "deleteme"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fa51ccb7a089ab64df9597b43581a3fa18aba76", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/3fa51ccb7a089ab64df9597b43581a3fa18aba76", "committedDate": "2020-02-06T13:59:17Z", "message": "IGNITE-12597 : fix after review #n."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd26b383174dfb7460a016f52441d6d9945e5cbb", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/cd26b383174dfb7460a016f52441d6d9945e5cbb", "committedDate": "2020-02-06T14:07:10Z", "message": "IGNITE-12597 : fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbb406faeb24938ab332bb44c8fcd2cb67b3fa5e", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/fbb406faeb24938ab332bb44c8fcd2cb67b3fa5e", "committedDate": "2020-02-07T08:33:27Z", "message": "IGNITE-12597 : Removed checking of reuse-mem-on-deactivate. Useless. Won't work."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d80a31088fea24d2e653fce3298ba27d74afa965", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/d80a31088fea24d2e653fce3298ba27d74afa965", "committedDate": "2020-02-07T09:11:59Z", "message": "IGNITE-12597 : Minor fixes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f0920c76b37a7c43efc741985ca3991a9d27c75", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/7f0920c76b37a7c43efc741985ca3991a9d27c75", "committedDate": "2020-02-07T12:49:53Z", "message": "IGNITE-12597 : Redeem IgniteMXBean"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64a1f84c7f6620aa86dc8802a0c44aa221ec9bb7", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/64a1f84c7f6620aa86dc8802a0c44aa221ec9bb7", "committedDate": "2020-02-07T13:24:47Z", "message": "IGNITE-12597 : code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea322f78f09783e0f2e392b4b6852e3c013b2e44", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/ea322f78f09783e0f2e392b4b6852e3c013b2e44", "committedDate": "2020-02-07T14:42:56Z", "message": "IGNITE-12597 : fix force-change-state."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f06d4dd6a101c7e2458be4e13fd752c4026d601a", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/f06d4dd6a101c7e2458be4e13fd752c4026d601a", "committedDate": "2020-02-07T15:36:47Z", "message": "IGNITE-12597 : fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46635a33332b34411dab27f91d61fa24fdd516e2", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/46635a33332b34411dab27f91d61fa24fdd516e2", "committedDate": "2020-02-07T15:42:40Z", "message": "IGNITE-12597 : spell fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ff1a3b9097cdabd87acd859b9998a70487f31d1", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/7ff1a3b9097cdabd87acd859b9998a70487f31d1", "committedDate": "2020-02-10T10:43:49Z", "message": "IGNITE-12597 : removed exception throwing for the internal calls satbility."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b2512a369005a919e2d3152067e571addf38d3d", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/7b2512a369005a919e2d3152067e571addf38d3d", "committedDate": "2020-02-10T14:56:29Z", "message": "IGNITE-12646 : checking of deactivation returned"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ab38188998371f0bbdd2306fd855b2eb70b4533", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/7ab38188998371f0bbdd2306fd855b2eb70b4533", "committedDate": "2020-02-11T09:46:30Z", "message": "IGNITE-12646 : Suggestion of fixing mbean interface IgniteMXBean."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbc2de5694540f26ba3c95a6912c6956417b43d2", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/fbc2de5694540f26ba3c95a6912c6956417b43d2", "committedDate": "2020-02-11T11:13:34Z", "message": "IGNITE-12646 : + some javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5eef09766ac96bddd5a0807715803e95314ae804", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/5eef09766ac96bddd5a0807715803e95314ae804", "committedDate": "2020-02-11T11:33:19Z", "message": "IGNITE-12646 : + enchanced javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "508e35d4ea18203a050b61ecfe7f0c710992aa71", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/508e35d4ea18203a050b61ecfe7f0c710992aa71", "committedDate": "2020-02-12T15:17:00Z", "message": "IGNITE-12646 : changed IgniteCluster, Ignite, IgniteMXBean"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b12428fb1f6cad191c943be9b549bf27ed976c50", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/b12428fb1f6cad191c943be9b549bf27ed976c50", "committedDate": "2020-02-13T08:31:37Z", "message": "IGNITE-12646 : another exception"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dea12dba9c4ebc3ae07d4ca64df0f9ac4112b8e", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/4dea12dba9c4ebc3ae07d4ca64df0f9ac4112b8e", "committedDate": "2020-02-13T11:38:24Z", "message": "IGNITE-12646 : fix of import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5520fe83831fd3f769a16ff81c86179c9935966b", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/5520fe83831fd3f769a16ff81c86179c9935966b", "committedDate": "2020-02-13T17:39:39Z", "message": "IGNITE-12646 : first working version of\nnew IgniteCluster#state(ClusterState, boolean force)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "622a9b562e0d97a68d2918c476df4b73b767fc5f", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/622a9b562e0d97a68d2918c476df4b73b767fc5f", "committedDate": "2020-02-14T13:13:28Z", "message": "IGNITE-12614 : fixed REST, java tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c6f22684e37585d05137e94ab66a2740108cbde", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/8c6f22684e37585d05137e94ab66a2740108cbde", "committedDate": "2020-02-19T23:37:13Z", "message": "IGNITE-12701 : fix after review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ee19a544e4c460df6cdcde470cc6b4e07f417ca", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/7ee19a544e4c460df6cdcde470cc6b4e07f417ca", "committedDate": "2020-02-20T09:30:43Z", "message": "IGNITE-12701 : redeem."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5dadef11b6f02780fc082be615cec380d0df8925", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/5dadef11b6f02780fc082be615cec380d0df8925", "committedDate": "2020-02-20T09:33:01Z", "message": "Merge branch 'master' into IGNITE-12701-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7e940f185020babdba897e3771210562d1ecf5c", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/a7e940f185020babdba897e3771210562d1ecf5c", "committedDate": "2020-02-20T09:46:56Z", "message": "IGNITE-12701 : minor comment fit."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6830ec85b22c91592b2eaa642833f719c278de27", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/6830ec85b22c91592b2eaa642833f719c278de27", "committedDate": "2020-02-20T10:33:49Z", "message": "IGNITE-12701 : minor fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf9ddc254d1d56d9bc5c34d9e00644d8eeaa1410", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/bf9ddc254d1d56d9bc5c34d9e00644d8eeaa1410", "committedDate": "2020-02-20T10:42:38Z", "message": "IGNITE-12701 : review fixes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29f0e626d0b4162d6b4c243a9a7a2f137a14ddb8", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/29f0e626d0b4162d6b4c243a9a7a2f137a14ddb8", "committedDate": "2020-02-20T12:22:53Z", "message": "IGNITE-12701 : back to checking of state change through the discovery."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11ae88b8ff8a22383110f43666422a2cb1a06aa4", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/11ae88b8ff8a22383110f43666422a2cb1a06aa4", "committedDate": "2020-02-20T12:38:29Z", "message": "IGNITE-12701 : critical fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f9bf803fc7de508f17b1eadac964bd153a9093a", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/8f9bf803fc7de508f17b1eadac964bd153a9093a", "committedDate": "2020-02-20T12:54:58Z", "message": "IGNITE-12701 : codestyle fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b547ea67e8ef48da70f1cad291c0339708f0eabc", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/b547ea67e8ef48da70f1cad291c0339708f0eabc", "committedDate": "2020-02-20T14:30:57Z", "message": "IGNITE-12701 : removed API change."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01e7437bb98b55b2daba43afb05259351d32eaad", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/01e7437bb98b55b2daba43afb05259351d32eaad", "committedDate": "2020-02-20T14:31:43Z", "message": "IGNITE-12701 : minority."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01c33150f2c404e7b4353e3040aa9d2e50796042", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/01c33150f2c404e7b4353e3040aa9d2e50796042", "committedDate": "2020-02-21T13:28:00Z", "message": "IGNITE-12701 : minority review fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "348a6572d948ae102111a3d28d32ac9dd82621d2", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/348a6572d948ae102111a3d28d32ac9dd82621d2", "committedDate": "2020-02-21T17:05:23Z", "message": "IGNITE-12701 : last review."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d545decebb4f91790810f1909693c48c6fbdd43c", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/d545decebb4f91790810f1909693c48c6fbdd43c", "committedDate": "2020-02-25T09:37:02Z", "message": "Merge branch 'master' into IGNITE-12701-3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "856c9fffc159b866903b72c1304bc4fb87474573", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/856c9fffc159b866903b72c1304bc4fb87474573", "committedDate": "2020-02-25T14:33:30Z", "message": "IGNITE-12701 : fix resetting params in the commands."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d613f41a3cdd4c0ed9ef1588199d9076ab91e8e9", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/d613f41a3cdd4c0ed9ef1588199d9076ab91e8e9", "committedDate": "2020-02-26T08:23:20Z", "message": "Merge branch 'master' into IGNITE-12701-3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2e4c94275b8b7d0f9ea8569bf85a11886918df8", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/d2e4c94275b8b7d0f9ea8569bf85a11886918df8", "committedDate": "2020-02-26T09:06:20Z", "message": "IGNITE-12701 : attempt to fix nodeJS thin client test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d9c80e75fd4936d45feda368d7c086791a796e4", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/7d9c80e75fd4936d45feda368d7c086791a796e4", "committedDate": "2020-02-26T10:09:26Z", "message": "IGNITE-12701 : minority."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9721954fda2a965463aa58118c6278047f28617e", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/9721954fda2a965463aa58118c6278047f28617e", "committedDate": "2020-02-27T11:20:00Z", "message": "IGNITE-12701 : critical fix : checking the feature before deactivation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NjE2MDcw", "url": "https://github.com/apache/ignite/pull/7471#pullrequestreview-365616070", "createdAt": "2020-02-27T11:45:15Z", "commit": {"oid": "9721954fda2a965463aa58118c6278047f28617e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74c887f21b4d6a0d35cb10421a23a5ed2ad0b139", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/74c887f21b4d6a0d35cb10421a23a5ed2ad0b139", "committedDate": "2020-03-02T15:34:35Z", "message": "IGNITE-12701 : fixes after review."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c71889614811ad7fda17e2455ad41129224dd6b", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/4c71889614811ad7fda17e2455ad41129224dd6b", "committedDate": "2020-03-02T15:43:31Z", "message": "IGNITE-12701 : fixes after review."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4bef99689e162ca5c12963176495fc0993f5777", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/e4bef99689e162ca5c12963176495fc0993f5777", "committedDate": "2020-03-02T16:16:58Z", "message": "IGNITE-12701 : fixes after review 2."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dead070be2947865ce134cfaecc26193fd0d7d8a", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/dead070be2947865ce134cfaecc26193fd0d7d8a", "committedDate": "2020-03-02T17:27:24Z", "message": "IGNITE-12701 : fixes after review 3."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af9505557b23cc45691da2dcb16b28ef0ab0d550", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/af9505557b23cc45691da2dcb16b28ef0ab0d550", "committedDate": "2020-03-04T07:51:38Z", "message": "Minor javadoc update."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b916b4f57e9798714c7f045e89af5a6dd1ec0f2", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/5b916b4f57e9798714c7f045e89af5a6dd1ec0f2", "committedDate": "2020-03-04T07:52:06Z", "message": "Update GridClientClusterState.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cfa09cb64b4432b29ed82f1362fc22169ef15b1", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/4cfa09cb64b4432b29ed82f1362fc22169ef15b1", "committedDate": "2020-03-04T07:52:35Z", "message": "Update GridClientClusterState.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71eaa948138f9862b5f66d164462eb81d67ba3b3", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/71eaa948138f9862b5f66d164462eb81d67ba3b3", "committedDate": "2020-03-04T07:54:04Z", "message": "Update IgniteCluster.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569", "author": {"user": {"login": "nizhikov", "name": "Nikolay"}}, "url": "https://github.com/apache/ignite/commit/fe02d6fd61593375085ae1b2d1f812127cef3569", "committedDate": "2020-03-04T07:55:43Z", "message": "Update GridClientConnection.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTY1NTMz", "url": "https://github.com/apache/ignite/pull/7471#pullrequestreview-368565533", "createdAt": "2020-03-04T07:58:26Z", "commit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzo1ODoyNlrOFxjEmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzo1ODoyNlrOFxjEmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ5OTE2Mg==", "bodyText": "Do we need this line? Default force value is false already.", "url": "https://github.com/apache/ignite/pull/7471#discussion_r387499162", "createdAt": "2020-03-04T07:58:26Z", "author": {"login": "nizhikov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/commandline/ClusterStateChangeCommand.java", "diffHunk": "@@ -91,6 +98,18 @@\n         catch (IllegalArgumentException e) {\n             throw new IllegalArgumentException(\"Can't parse new cluster state. State: \" + s, e);\n         }\n+\n+        force = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTY1Nzk5", "url": "https://github.com/apache/ignite/pull/7471#pullrequestreview-368565799", "createdAt": "2020-03-04T07:58:58Z", "commit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzo1ODo1OFrOFxjFcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzo1ODo1OFrOFxjFcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ5OTM3Nw==", "bodyText": "Do we need this line? Default force value is false already.", "url": "https://github.com/apache/ignite/pull/7471#discussion_r387499377", "createdAt": "2020-03-04T07:58:58Z", "author": {"login": "nizhikov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/commandline/DeactivateCommand.java", "diffHunk": "@@ -78,6 +81,21 @@\n         return null;\n     }\n \n+    /** {@inheritDoc} */\n+    @Override public void parseArguments(CommandArgIterator argIter) {\n+        force = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTc1MjQx", "url": "https://github.com/apache/ignite/pull/7471#pullrequestreview-368575241", "createdAt": "2020-03-04T08:18:10Z", "commit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoxODoxMFrOFxjjLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoxODoxMFrOFxjjLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUwNjk5MA==", "bodyText": "Why the default value is true?", "url": "https://github.com/apache/ignite/pull/7471#discussion_r387506990", "createdAt": "2020-03-04T08:18:10Z", "author": {"login": "nizhikov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cluster/ChangeGlobalStateMessage.java", "diffHunk": "@@ -71,6 +71,9 @@\n     @GridToStringExclude\n     @Nullable private transient ServiceDeploymentActions serviceDeploymentActions;\n \n+    /** Forced change of cluster state. */\n+    private boolean force = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTc1ODU0", "url": "https://github.com/apache/ignite/pull/7471#pullrequestreview-368575854", "createdAt": "2020-03-04T08:19:21Z", "commit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoxOToyMlrOFxjlRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoxOToyMlrOFxjlRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUwNzUyNA==", "bodyText": "Why this deletion?", "url": "https://github.com/apache/ignite/pull/7471#discussion_r387507524", "createdAt": "2020-03-04T08:19:22Z", "author": {"login": "nizhikov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cluster/GridClusterStateProcessor.java", "diffHunk": "@@ -924,49 +945,8 @@ protected IgniteCheckedException concurrentStateChangeError(ClusterState state,\n \n     /** {@inheritDoc} */\n     @Override public IgniteInternalFuture<?> changeGlobalState(\n-        final boolean activate,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "originalPosition": 67}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTc2MTk3", "url": "https://github.com/apache/ignite/pull/7471#pullrequestreview-368576197", "createdAt": "2020-03-04T08:20:00Z", "commit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoyMDowMFrOFxjmYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoyMDowMFrOFxjmYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUwNzgxMQ==", "bodyText": "Why this deletion?", "url": "https://github.com/apache/ignite/pull/7471#discussion_r387507811", "createdAt": "2020-03-04T08:20:00Z", "author": {"login": "nizhikov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cluster/IGridClusterStateProcessor.java", "diffHunk": "@@ -108,30 +108,20 @@ boolean onStateChangeMessage(AffinityTopologyVersion topVer,\n     /** */\n     void cacheProcessorStarted();\n \n-    /**\n-     * @param activate New cluster state.\n-     * @param baselineNodes New baseline nodes.\n-     * @param forceChangeBaselineTopology Force change baseline topology.\n-     * @return State change future.\n-     * @deprecated Use {@link #changeGlobalState(ClusterState, Collection, boolean)} instead.\n-     */\n-    @Deprecated\n-    IgniteInternalFuture<?> changeGlobalState(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTc3Nzk0", "url": "https://github.com/apache/ignite/pull/7471#pullrequestreview-368577794", "createdAt": "2020-03-04T08:22:54Z", "commit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoyMjo1NVrOFxjrlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoyMjo1NVrOFxjrlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUwOTE0MQ==", "bodyText": "We should rename this flag to forceDeactivation because it value apply to the deactivation command only.", "url": "https://github.com/apache/ignite/pull/7471#discussion_r387509141", "createdAt": "2020-03-04T08:22:55Z", "author": {"login": "nizhikov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/rest/client/message/GridClientClusterStateRequestV2.java", "diffHunk": "@@ -0,0 +1,83 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.rest.client.message;\n+\n+import java.io.IOException;\n+import java.io.ObjectInput;\n+import java.io.ObjectOutput;\n+import org.apache.ignite.cluster.ClusterState;\n+\n+/**\n+ * Enchanced version of {@link GridClientClusterStateRequest}.\n+ * Introduced to support forced version of the change state command and keep backward compatibility\n+ * with nodes of old version that may occur in cluster at the rolling updates.\n+ */\n+public class GridClientClusterStateRequestV2 extends GridClientClusterStateRequest {\n+    /** */\n+    private static final long serialVersionUID = 0L;\n+\n+    /** Forced change of cluster state. */\n+    private boolean force;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTc4MzAx", "url": "https://github.com/apache/ignite/pull/7471#pullrequestreview-368578301", "createdAt": "2020-03-04T08:23:42Z", "commit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoyMzo0MlrOFxjtKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoyMzo0MlrOFxjtKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUwOTU0Nw==", "bodyText": "We should rename this flag to forceDeactivation because it value applies to the deactivation command only.", "url": "https://github.com/apache/ignite/pull/7471#discussion_r387509547", "createdAt": "2020-03-04T08:23:42Z", "author": {"login": "nizhikov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cluster/IGridClusterStateProcessor.java", "diffHunk": "@@ -108,30 +108,20 @@ boolean onStateChangeMessage(AffinityTopologyVersion topVer,\n     /** */\n     void cacheProcessorStarted();\n \n-    /**\n-     * @param activate New cluster state.\n-     * @param baselineNodes New baseline nodes.\n-     * @param forceChangeBaselineTopology Force change baseline topology.\n-     * @return State change future.\n-     * @deprecated Use {@link #changeGlobalState(ClusterState, Collection, boolean)} instead.\n-     */\n-    @Deprecated\n-    IgniteInternalFuture<?> changeGlobalState(\n-        boolean activate,\n-        Collection<? extends BaselineNode> baselineNodes,\n-        boolean forceChangeBaselineTopology\n-    );\n-\n     /**\n      * @param state New cluster state.\n+     * @param force If {@code True} skips checking of the operation safety.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTc4NTM1", "url": "https://github.com/apache/ignite/pull/7471#pullrequestreview-368578535", "createdAt": "2020-03-04T08:24:06Z", "commit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoyNDowNlrOFxjuBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoyNDowNlrOFxjuBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUwOTc2NA==", "bodyText": "We should rename this flag to forceDeactivation because its value applies to the deactivation command only.", "url": "https://github.com/apache/ignite/pull/7471#discussion_r387509764", "createdAt": "2020-03-04T08:24:06Z", "author": {"login": "nizhikov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cluster/GridClusterStateProcessor.java", "diffHunk": "@@ -1045,6 +1025,7 @@ else if (ClusterState.active(state)) {\n     /** */\n     private IgniteInternalFuture<?> changeGlobalState0(\n         ClusterState state,\n+        boolean force,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "originalPosition": 127}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTc4NzAw", "url": "https://github.com/apache/ignite/pull/7471#pullrequestreview-368578700", "createdAt": "2020-03-04T08:24:25Z", "commit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoyNDoyNlrOFxjujw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoyNDoyNlrOFxjujw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUwOTkwMw==", "bodyText": "We should rename this flag to forceDeactivation because its value applies to the deactivation command only.", "url": "https://github.com/apache/ignite/pull/7471#discussion_r387509903", "createdAt": "2020-03-04T08:24:26Z", "author": {"login": "nizhikov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cluster/GridClusterStateProcessor.java", "diffHunk": "@@ -924,49 +945,8 @@ protected IgniteCheckedException concurrentStateChangeError(ClusterState state,\n \n     /** {@inheritDoc} */\n     @Override public IgniteInternalFuture<?> changeGlobalState(\n-        final boolean activate,\n-        Collection<? extends BaselineNode> baselineNodes,\n-        boolean forceChangeBaselineTopology\n-    ) {\n-        return changeGlobalState(activate, baselineNodes, forceChangeBaselineTopology, false);\n-    }\n-\n-    /** {@inheritDoc} */\n-    @Override public IgniteInternalFuture<?> changeGlobalState(\n-        ClusterState state,\n-        Collection<? extends BaselineNode> baselineNodes,\n-        boolean forceChangeBaselineTopology\n-    ) {\n-        return changeGlobalState(state, baselineNodes, forceChangeBaselineTopology, false);\n-    }\n-\n-    /**\n-     * @param activate New activate state.\n-     * @param baselineNodes New BLT nodes.\n-     * @param forceChangeBaselineTopology Force change BLT.\n-     * @param isAutoAdjust Auto adjusting flag.\n-     * @return Global change state future.\n-     * @deprecated Use {@link #changeGlobalState(ClusterState, Collection, boolean, boolean)} instead.\n-     */\n-    @Deprecated\n-    public IgniteInternalFuture<?> changeGlobalState(\n-        final boolean activate,\n-        Collection<? extends BaselineNode> baselineNodes,\n-        boolean forceChangeBaselineTopology,\n-        boolean isAutoAdjust\n-    ) {\n-        return changeGlobalState(activate ? ACTIVE : INACTIVE, baselineNodes, forceChangeBaselineTopology, isAutoAdjust);\n-    }\n-\n-    /**\n-     * @param state New activate state.\n-     * @param baselineNodes New BLT nodes.\n-     * @param forceChangeBaselineTopology Force change BLT.\n-     * @param isAutoAdjust Auto adjusting flag.\n-     * @return Global change state future.\n-     */\n-    public IgniteInternalFuture<?> changeGlobalState(\n         ClusterState state,\n+        boolean force,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "originalPosition": 110}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTg1NDcx", "url": "https://github.com/apache/ignite/pull/7471#pullrequestreview-368585471", "createdAt": "2020-03-04T08:36:11Z", "commit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODozNjoxMVrOFxkDvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODozNjoxMVrOFxkDvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUxNTMyNQ==", "bodyText": "We should change \"can\" to \"will\" because there is no case when in-memory data will not be lost after deactivation.\nSo correct message to the user\n`Deactivation stopped. Cluster has in-memory caches(without persistence). During deactivation, in-memory data will be lost.'", "url": "https://github.com/apache/ignite/pull/7471#discussion_r387515325", "createdAt": "2020-03-04T08:36:11Z", "author": {"login": "nizhikov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cluster/GridClusterStateProcessor.java", "diffHunk": "@@ -115,6 +118,11 @@\n     /** */\n     private static final String METASTORE_CURR_BLT_KEY = \"metastoreBltKey\";\n \n+    /** Warning of unsafe deactivation. */\n+    public static final String DATA_LOST_ON_DEACTIVATION_WARNING =\n+        \"Cluster has caches configured without persistence. \" +\n+            \"During deactivation in-memory data and objects can be lost!\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTg3NTQz", "url": "https://github.com/apache/ignite/pull/7471#pullrequestreview-368587543", "createdAt": "2020-03-04T08:39:45Z", "commit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODozOTo0NVrOFxkKZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODozOTo0NVrOFxkKZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUxNzAzMQ==", "bodyText": "typo: externalization", "url": "https://github.com/apache/ignite/pull/7471#discussion_r387517031", "createdAt": "2020-03-04T08:39:45Z", "author": {"login": "nizhikov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/rest/client/message/GridClientClusterStateRequest.java", "diffHunk": "@@ -69,6 +70,21 @@ public static GridClientClusterStateRequest state(ClusterState state) {\n         return msg;\n     }\n \n+    /** Default constructor for the exernalization. */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe02d6fd61593375085ae1b2d1f812127cef3569"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f273dd65e980a7361507f37f0114b781733aea72", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/f273dd65e980a7361507f37f0114b781733aea72", "committedDate": "2020-03-04T11:24:28Z", "message": "IGNITE-12701 : fixes after review 4."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef2ab3b1da544a493620869ea06ecf833a51a621", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/ef2ab3b1da544a493620869ea06ecf833a51a621", "committedDate": "2020-03-04T12:52:00Z", "message": "IGNITE-12701 : fixes after review 5"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4d070463592ce2577e4440fa94af20c56a08b247", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/4d070463592ce2577e4440fa94af20c56a08b247", "committedDate": "2020-03-04T12:43:34Z", "message": "Merge remote-tracking branch 'origin/IGNITE-12701-3' into IGNITE-12701-3"}, "afterCommit": {"oid": "ef2ab3b1da544a493620869ea06ecf833a51a621", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/ef2ab3b1da544a493620869ea06ecf833a51a621", "committedDate": "2020-03-04T12:52:00Z", "message": "IGNITE-12701 : fixes after review 5"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec3d67a59ea1c7ccca87c8d3acf0dcd81dedd0e6", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/ec3d67a59ea1c7ccca87c8d3acf0dcd81dedd0e6", "committedDate": "2020-03-04T13:07:50Z", "message": "IGNITE-12701 : ChangeGlobalStateMessage is now forced by default."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d982a8b30e15ddc6bab172755ed5dbcdc41390ec", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/d982a8b30e15ddc6bab172755ed5dbcdc41390ec", "committedDate": "2020-03-04T13:13:27Z", "message": "IGNITE-12701 : minor change of an error message."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e476bd012d9e5707c71ebfe60164e5ce7d344a8f", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/e476bd012d9e5707c71ebfe60164e5ce7d344a8f", "committedDate": "2020-03-04T13:46:45Z", "message": "IGNITE-12701 : fixed after prereview 6"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "280e9a73fc19891795f9755a303f05af468ed099", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/280e9a73fc19891795f9755a303f05af468ed099", "committedDate": "2020-03-04T14:25:26Z", "message": "IGNITE-12701 : reverted change global state methods."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63bd6a937c39d1f92411d8b31ed30867bc23d97e", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/63bd6a937c39d1f92411d8b31ed30867bc23d97e", "committedDate": "2020-03-04T14:26:58Z", "message": "IGNITE-12701 : reverted proj settings."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f751f5b69925796caa9fec0f96bd7c7c2b4ec1d", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/2f751f5b69925796caa9fec0f96bd7c7c2b4ec1d", "committedDate": "2020-03-04T14:36:14Z", "message": "IGNITE-12701 : reverted proj settings."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1de9983fc466a695860055809490e46bac2b56e9", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/1de9983fc466a695860055809490e46bac2b56e9", "committedDate": "2020-03-04T15:00:41Z", "message": "IGNITE-12701 : Fix of comments, spelling, @code True->true / false / null."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51671d4fe79779327a944111cce5981d22f60d8e", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/51671d4fe79779327a944111cce5981d22f60d8e", "committedDate": "2020-03-04T15:17:15Z", "message": "IGNITE-12701 : Fix of comments, spelling, @code True->true / false / null 2."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "285fc7e0f84d3ef7da7b9ae2c825e664bfbdb5c2", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/285fc7e0f84d3ef7da7b9ae2c825e664bfbdb5c2", "committedDate": "2020-03-04T15:20:48Z", "message": "IGNITE-12701 : aalse -> false"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae802fc8c0920363d3d7562e39915ac675cd024c", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/ae802fc8c0920363d3d7562e39915ac675cd024c", "committedDate": "2020-03-04T15:49:43Z", "message": "IGNITE-12701 : better 'fails if' description."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ff6109a5641fc8f089e0197a77c6b6e77b7e5fc", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/9ff6109a5641fc8f089e0197a77c6b6e77b7e5fc", "committedDate": "2020-03-04T16:02:27Z", "message": "IGNITE-12701 : better 'fails if' description 2."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d15d5db4abb0ce4ca65c155bd6a98b5732d63128", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/d15d5db4abb0ce4ca65c155bd6a98b5732d63128", "committedDate": "2020-03-04T16:04:34Z", "message": "IGNITE-12701 : breakline."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fc2258e53541a04cd8915a78166ef7376211a80", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/9fc2258e53541a04cd8915a78166ef7376211a80", "committedDate": "2020-03-04T16:05:48Z", "message": "IGNITE-12701 : better see."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95d82effba125e738e8f9e2b9ae5504c1cdbd744", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/95d82effba125e738e8f9e2b9ae5504c1cdbd744", "committedDate": "2020-03-04T16:06:13Z", "message": "IGNITE-12701 : better see."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "415fe1ccee9fdc914a12d14d03e6e4a4975cf257", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/415fe1ccee9fdc914a12d14d03e6e4a4975cf257", "committedDate": "2020-03-04T16:25:44Z", "message": "IGNITE-12701 : minorities."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e06295902b987a8d9768133114bf5f9bd573903a", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/e06295902b987a8d9768133114bf5f9bd573903a", "committedDate": "2020-03-06T11:56:28Z", "message": "IGNITE-12701 : fixed notes of data loss."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNDk1ODU3", "url": "https://github.com/apache/ignite/pull/7471#pullrequestreview-370495857", "createdAt": "2020-03-06T17:23:48Z", "commit": {"oid": "e06295902b987a8d9768133114bf5f9bd573903a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxNzoyMzo0OFrOFzA-eQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxNzoyMzo0OFrOFzA-eQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTAzNzY4OQ==", "bodyText": "It's not clear why we force deactivation here.", "url": "https://github.com/apache/ignite/pull/7471#discussion_r389037689", "createdAt": "2020-03-06T17:23:48Z", "author": {"login": "nizhikov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cluster/GridClusterStateProcessor.java", "diffHunk": "@@ -1617,6 +1643,7 @@ public ExchangeActions autoAdjustExchangeActions(ExchangeActions exchActs) {\n                 ctx.localNodeId(),\n                 null,\n                 ClusterState.active(clusterState.state()) ? clusterState.state() : ACTIVE,\n+                true,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e06295902b987a8d9768133114bf5f9bd573903a"}, "originalPosition": 143}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdcb9977e46baeb2dab610bca250625eceff3f2f", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/bdcb9977e46baeb2dab610bca250625eceff3f2f", "committedDate": "2020-03-09T21:06:29Z", "message": "IGNITE-12703 : fixes after review."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d47374b62f6e35cec7c9fc7cb46dc0b69e72f07b", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/d47374b62f6e35cec7c9fc7cb46dc0b69e72f07b", "committedDate": "2020-03-09T21:39:11Z", "message": "IGNITE-12703: Same comments."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d8061248b4bc6d3309767c11549a832d3e540f5", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/9d8061248b4bc6d3309767c11549a832d3e540f5", "committedDate": "2020-03-10T09:12:55Z", "message": "IGNITE-12703 + comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27f77f17443c3f6d29af2f233a656a4303e17285", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/27f77f17443c3f6d29af2f233a656a4303e17285", "committedDate": "2020-03-11T09:49:10Z", "message": "IGNITE-12703 : renaming, refactoring."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6aad2027d7478087f6ba82dff82524cac875cc41", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/6aad2027d7478087f6ba82dff82524cac875cc41", "committedDate": "2020-03-11T09:58:30Z", "message": "IGNITE-12703 : reverted minority."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b07817dcf4946145b7e174ef24f6503857287ded", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/b07817dcf4946145b7e174ef24f6503857287ded", "committedDate": "2020-03-11T12:57:54Z", "message": "IGNITE-12703 : major fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9078caca771bbcf2a5989f6d1e8261f0c8d4858", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/c9078caca771bbcf2a5989f6d1e8261f0c8d4858", "committedDate": "2020-03-11T12:59:15Z", "message": "IGNITE-12703 : + comment."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8eea0b3ebd57a597487a993f9534ec983b2b3fc6", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/8eea0b3ebd57a597487a993f9534ec983b2b3fc6", "committedDate": "2020-03-11T13:01:56Z", "message": "IGNITE-12703 : + breakline."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "861b5ec3e53463241ab38c2afc83dd87f24f4789", "author": {"user": {"login": "Vladsz83", "name": "Vladimir Steshin"}}, "url": "https://github.com/apache/ignite/commit/861b5ec3e53463241ab38c2afc83dd87f24f4789", "committedDate": "2020-03-11T15:48:12Z", "message": "IGNITE-12703 : removed testInternalForcedDeactivation()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyODkzNjg0", "url": "https://github.com/apache/ignite/pull/7471#pullrequestreview-372893684", "createdAt": "2020-03-11T15:54:03Z", "commit": {"oid": "861b5ec3e53463241ab38c2afc83dd87f24f4789"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2836, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}