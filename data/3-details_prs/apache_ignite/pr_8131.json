{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NzMzNzQ4", "number": 8131, "title": "IGNITE-13330 Java thin client documentation update", "bodyText": "Thank you for submitting the pull request to the Apache Ignite.\nIn order to streamline the review of the contribution\nwe ask you to ensure the following steps have been taken:\nThe Contribution Checklist\n\n There is a single JIRA ticket related to the pull request.\n The web-link to the pull request is attached to the JIRA ticket.\n The JIRA ticket has the Patch Available state.\n The pull request body describes changes that have been made.\nThe description explains WHAT and WHY was made instead of HOW.\n The pull request title is treated as the final commit message.\nThe following pattern must be used: IGNITE-XXXX Change summary where XXXX - number of JIRA issue.\n A reviewer has been mentioned through the JIRA comments\n(see the Maintainers list)\n The pull request has been checked by the Teamcity Bot and\nthe green visa attached to the JIRA ticket (see TC.Bot: Check PR)\n\nNotes\n\nHow to Contribute\nCoding abbreviation rules\nCoding Guidelines\nApache Ignite Teamcity Bot\n\nIf you need any help, please email dev@ignite.apache.org or ask an\u0443 advice on http://asf.slack.com #ignite channel.", "createdAt": "2020-08-07T17:40:56Z", "url": "https://github.com/apache/ignite/pull/8131", "merged": true, "mergeCommit": {"oid": "5fc59feab57822bd6d3297116ffc5be1fa019da8"}, "closed": true, "closedAt": "2020-08-17T10:09:18Z", "author": {"login": "alex-plekhanov"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8noRAgH2gAyNDY0NzMzNzQ4OmM2NjE2NmFiOTNhODZlYjkwNjAwMGM2ZGJjNTg5OWQ3ZTMwNzgzZTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-hfebAH2gAyNDY0NzMzNzQ4OmEwM2JjNDAwYzVmM2MwOTA3NTJkNjUxOGU1NGQ3MmY4NjZjMDliOWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c66166ab93a86eb906000c6dbc5899d7e30783e2", "author": {"user": {"login": "alex-plekhanov", "name": "Aleksey Plekhanov"}}, "url": "https://github.com/apache/ignite/commit/c66166ab93a86eb906000c6dbc5899d7e30783e2", "committedDate": "2020-08-07T17:11:49Z", "message": "IGNITE-13330 Java thin client documentation update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b53e9667c4442a769bcd22cb55402ae58f941cea", "author": {"user": {"login": "alex-plekhanov", "name": "Aleksey Plekhanov"}}, "url": "https://github.com/apache/ignite/commit/b53e9667c4442a769bcd22cb55402ae58f941cea", "committedDate": "2020-08-07T17:38:56Z", "message": "IGNITE-13330 Java thin client features and examples added"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NzAwMTMy", "url": "https://github.com/apache/ignite/pull/8131#pullrequestreview-465700132", "createdAt": "2020-08-12T08:28:36Z", "commit": {"oid": "c66166ab93a86eb906000c6dbc5899d7e30783e2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwODoyODozNlrOG_XMuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwODozNDoyN1rOG_XZVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA5MzU2Mw==", "bodyText": "I think this section should be a subsection of \"Cluster API\" and should give an example of how to get a group of nodes for a specific purpose. Also, \"Cluster groups\" is an incorrect term. I know it's used in the API itself, but it should be \"Node groups\".  In fact, you don't have to use the term, you can simple say something like \"here is how you can group nodes based on some characteristic (server nodes, clients, attributes, etc.).\" and give an example.", "url": "https://github.com/apache/ignite/pull/8131#discussion_r469093563", "createdAt": "2020-08-12T08:28:36Z", "author": {"login": "artem-budnikov"}, "path": "docs/_docs/thin-clients/java-thin-client.adoc", "diffHunk": "@@ -170,19 +181,96 @@ NOTE: The `getAll()` method retrieves the results from the cursor and closes it.\n \n Read more about using `SqlFieldsQuery` and SQL API in the link:SQL/sql-api[Using SQL API] section.\n \n-== Handling Exceptions\n+== Cluster API\n \n-=== Handling Node Failures\n+Cluster functionality (APIs for accessing cluster and nodes) is provided via the `ClientCluster` interface. You can get an instance of `ClientCluster` from `IgniteClient` as follows:\n+[source, java]\n+-------------------------------------------------------------------------------\n+include::{sourceCodeFile}[tag=client-cluster,indent=0]\n+-------------------------------------------------------------------------------\n \n-When you provide the addresses of multiple nodes in the client configuration, the client automatically switches to the next node if the current connection fails and retries any ongoing operation.\n+Through the `ClientCluster` interface you can:\n+\n+* Get or set cluster state\n+* Get a list of all cluster members\n+* Create logical Cluster Groups\n \n-In the case of atomic operations, failover to another node is transparent to the user.  However, if you execute a scan query or a SELECT query, it may return duplicate results. This can happen because queries return data in pages, and if the node that the client is connected to goes down while the client retrieves the pages, the client connects to another node and executes the query again. To avoid this, you have to write some code in your application that checks if the entries returned by the client are duplicated. Consider the following code:\n+== Cluster groups", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c66166ab93a86eb906000c6dbc5899d7e30783e2"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA5Njc5MQ==", "bodyText": "Please change the link: as of now, the cluster groups page is located here: distributed-computing/cluster-groups. I know this is not the best location, I'll deal with it later ( I'm thinking of creating the \"Cluster API\" section at the top level of the docs).", "url": "https://github.com/apache/ignite/pull/8131#discussion_r469096791", "createdAt": "2020-08-12T08:34:27Z", "author": {"login": "artem-budnikov"}, "path": "docs/_docs/thin-clients/java-thin-client.adoc", "diffHunk": "@@ -170,19 +181,96 @@ NOTE: The `getAll()` method retrieves the results from the cursor and closes it.\n \n Read more about using `SqlFieldsQuery` and SQL API in the link:SQL/sql-api[Using SQL API] section.\n \n-== Handling Exceptions\n+== Cluster API\n \n-=== Handling Node Failures\n+Cluster functionality (APIs for accessing cluster and nodes) is provided via the `ClientCluster` interface. You can get an instance of `ClientCluster` from `IgniteClient` as follows:\n+[source, java]\n+-------------------------------------------------------------------------------\n+include::{sourceCodeFile}[tag=client-cluster,indent=0]\n+-------------------------------------------------------------------------------\n \n-When you provide the addresses of multiple nodes in the client configuration, the client automatically switches to the next node if the current connection fails and retries any ongoing operation.\n+Through the `ClientCluster` interface you can:\n+\n+* Get or set cluster state\n+* Get a list of all cluster members\n+* Create logical Cluster Groups\n \n-In the case of atomic operations, failover to another node is transparent to the user.  However, if you execute a scan query or a SELECT query, it may return duplicate results. This can happen because queries return data in pages, and if the node that the client is connected to goes down while the client retrieves the pages, the client connects to another node and executes the query again. To avoid this, you have to write some code in your application that checks if the entries returned by the client are duplicated. Consider the following code:\n+== Cluster groups\n \n+API to create logical groups of cluster nodes within your cluster is provided by `ClientClusterGroup` interface. Instance of this interface can be obtained from a parent `ClientClusterGroup` instance using node-filtering methods.\n [source, java]\n -------------------------------------------------------------------------------\n-include::{sourceCodeFile}[tag=results-to-map,indent=0]\n+include::{sourceCodeFile}[tag=client-cluster-groups,indent=0]\n -------------------------------------------------------------------------------\n \n+The `ClientCluster` instance (see link:#cluster-api[Cluster API]) it's a root cluster group, which includes all nodes in the cluster.\n+\n+////\n+*TODO: fix link*\n+////\n+\n+Refer to link:clustering/cluster-groups[Cluster groups] to get more information about logical nodes grouping.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c66166ab93a86eb906000c6dbc5899d7e30783e2"}, "originalPosition": 57}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a03bc400c5f3c090752d6518e54d72f866c09b9a", "author": {"user": {"login": "alex-plekhanov", "name": "Aleksey Plekhanov"}}, "url": "https://github.com/apache/ignite/commit/a03bc400c5f3c090752d6518e54d72f866c09b9a", "committedDate": "2020-08-13T15:10:38Z", "message": "Review fixes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3232, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}