{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxNTk0Mjk4", "number": 8350, "title": "IGNITE-13567 Fixed incorrect value of the joiningNodeClient flag", "bodyText": "\u2026the joining client.\nThank you for submitting the pull request to the Apache Ignite.\nIn order to streamline the review of the contribution\nwe ask you to ensure the following steps have been taken:\nThe Contribution Checklist\n\n There is a single JIRA ticket related to the pull request.\n The web-link to the pull request is attached to the JIRA ticket.\n The JIRA ticket has the Patch Available state.\n The pull request body describes changes that have been made.\nThe description explains WHAT and WHY was made instead of HOW.\n The pull request title is treated as the final commit message.\nThe following pattern must be used: IGNITE-XXXX Change summary where XXXX - number of JIRA issue.\n A reviewer has been mentioned through the JIRA comments\n(see the Maintainers list)\n The pull request has been checked by the Teamcity Bot and\nthe green visa attached to the JIRA ticket (see TC.Bot: Check PR)\n\nNotes\n\nHow to Contribute\nCoding abbreviation rules\nCoding Guidelines\nApache Ignite Teamcity Bot\n\nIf you need any help, please email dev@ignite.apache.org or ask an\u0443 advice on http://asf.slack.com #ignite channel.", "createdAt": "2020-10-12T13:54:13Z", "url": "https://github.com/apache/ignite/pull/8350", "merged": true, "mergeCommit": {"oid": "28c738a1889ef67e69d63425f995b3c549583425"}, "closed": true, "closedAt": "2021-01-19T19:00:27Z", "author": {"login": "xtern"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdR01cPgFqTUwNjY2OTEyNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdxpabfAFqTU3MTE0MTM2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NjY5MTI0", "url": "https://github.com/apache/ignite/pull/8350#pullrequestreview-506669124", "createdAt": "2020-10-12T14:27:23Z", "commit": {"oid": "12e299d3ceeb9f8f77cec09484e0ae187c7c426a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDoyNzoyM1rOHgBDiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDoyNzoyM1rOHgBDiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzMzMzc2OA==", "bodyText": "Lets rename to dataPacket ?", "url": "https://github.com/apache/ignite/pull/8350#discussion_r503333768", "createdAt": "2020-10-12T14:27:23Z", "author": {"login": "NSAmelchev"}, "path": "modules/core/src/main/java/org/apache/ignite/spi/discovery/tcp/ClientImpl.java", "diffHunk": "@@ -763,8 +763,13 @@ private static void sleepEx(long millis, Runnable before, Runnable after) throws\n                         marshalCredentials(node);\n                     }\n \n-                    if (discoveryData == null)\n-                        discoveryData = spi.collectExchangeData(new DiscoveryDataPacket(getLocalNodeId()));\n+                    if (discoveryData == null) {\n+                        DiscoveryDataPacket discoveryDataPacket = new DiscoveryDataPacket(getLocalNodeId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12e299d3ceeb9f8f77cec09484e0ae187c7c426a"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NjcyMTIx", "url": "https://github.com/apache/ignite/pull/8350#pullrequestreview-506672121", "createdAt": "2020-10-12T14:30:47Z", "commit": {"oid": "12e299d3ceeb9f8f77cec09484e0ae187c7c426a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDozMDo0N1rOHgBM_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDozMDo0N1rOHgBM_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzMzNjE4OA==", "bodyText": "Can we check that flag was added only once?", "url": "https://github.com/apache/ignite/pull/8350#discussion_r503336188", "createdAt": "2020-10-12T14:30:47Z", "author": {"login": "NSAmelchev"}, "path": "modules/core/src/test/java/org/apache/ignite/spi/discovery/tcp/TcpClientDiscoverySpiSelfTest.java", "diffHunk": "@@ -2564,6 +2596,21 @@ private void pauseResumeOperation(boolean isPause, AtomicBoolean... locks) {\n             }\n         }\n \n+        /** {@inheritDoc} */\n+        @Override public void setDataExchange(DiscoverySpiDataExchange delegate) {\n+            super.setDataExchange(new DiscoverySpiDataExchange() {\n+                @Override public DiscoveryDataBag collect(DiscoveryDataBag dataBag) {\n+                    joiningNodesClientFlag.putIfAbsent(dataBag.joiningNodeId(), dataBag.isJoiningNodeClient());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12e299d3ceeb9f8f77cec09484e0ae187c7c426a"}, "originalPosition": 70}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4e4b0e80608564bc189c45b0d69ad9f5a2ffbf1f", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/4e4b0e80608564bc189c45b0d69ad9f5a2ffbf1f", "committedDate": "2020-10-13T12:15:21Z", "message": "IGNITE-13567 Test improvements."}, "afterCommit": {"oid": "9fe9f2b56aa829b64f51056d716179ae414376e1", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/9fe9f2b56aa829b64f51056d716179ae414376e1", "committedDate": "2020-10-13T12:28:01Z", "message": "IGNITE-13567 Test improvements."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9fe9f2b56aa829b64f51056d716179ae414376e1", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/9fe9f2b56aa829b64f51056d716179ae414376e1", "committedDate": "2020-10-13T12:28:01Z", "message": "IGNITE-13567 Test improvements."}, "afterCommit": {"oid": "dcc58ab1da314982d6534148431917cf258fc7a8", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/dcc58ab1da314982d6534148431917cf258fc7a8", "committedDate": "2020-10-13T12:33:05Z", "message": "IGNITE-13567 Test improvements."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "743aaad26eaa552c0f9b65ccfeadb3e9cba94355", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/743aaad26eaa552c0f9b65ccfeadb3e9cba94355", "committedDate": "2020-10-14T11:50:47Z", "message": "IGNITE-13567 (minor) code cleanup."}, "afterCommit": {"oid": "51dde84e9695e87ca615f3ad0049f6a0aec9adac", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/51dde84e9695e87ca615f3ad0049f6a0aec9adac", "committedDate": "2020-10-14T19:16:01Z", "message": "IGNITE-13567 (minor) code cleanup."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "96f548bd028cee446f810247da64ce7f9f177641", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/96f548bd028cee446f810247da64ce7f9f177641", "committedDate": "2020-10-15T19:53:53Z", "message": "IGNITE-13567 (minor) test javadocs."}, "afterCommit": {"oid": "58fd146a42e54a11d4df9dfc816d865870a8def2", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/58fd146a42e54a11d4df9dfc816d865870a8def2", "committedDate": "2020-10-15T21:19:34Z", "message": "IGNITE-13567 (minor) test javadocs."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwMjI5MDg4", "url": "https://github.com/apache/ignite/pull/8350#pullrequestreview-510229088", "createdAt": "2020-10-16T07:47:08Z", "commit": {"oid": "58fd146a42e54a11d4df9dfc816d865870a8def2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dc6b5ac164d59d6a7646b47c080a9f3e7ed99a0c", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/dc6b5ac164d59d6a7646b47c080a9f3e7ed99a0c", "committedDate": "2020-10-16T09:47:54Z", "message": "IGNITE-13567 Fix test."}, "afterCommit": {"oid": "67a8cf02fca3e1df65f26c73886ff074cb4bf5eb", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/67a8cf02fca3e1df65f26c73886ff074cb4bf5eb", "committedDate": "2020-10-19T15:48:49Z", "message": "IGNITE-13567 Fix test."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "67a8cf02fca3e1df65f26c73886ff074cb4bf5eb", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/67a8cf02fca3e1df65f26c73886ff074cb4bf5eb", "committedDate": "2020-10-19T15:48:49Z", "message": "IGNITE-13567 Fix test."}, "afterCommit": {"oid": "bbe9e7fdf4d70f13c0f0bfdaef7d74f0fb30d934", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/bbe9e7fdf4d70f13c0f0bfdaef7d74f0fb30d934", "committedDate": "2020-10-20T19:58:20Z", "message": "IGNITE-13567 Fix test."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bbe9e7fdf4d70f13c0f0bfdaef7d74f0fb30d934", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/bbe9e7fdf4d70f13c0f0bfdaef7d74f0fb30d934", "committedDate": "2020-10-20T19:58:20Z", "message": "IGNITE-13567 Fix test."}, "afterCommit": {"oid": "a1d05b2a0fb76f3893589e6fcf04972f2655c765", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/a1d05b2a0fb76f3893589e6fcf04972f2655c765", "committedDate": "2020-10-22T07:23:08Z", "message": "IGNITE-13567 Fix test."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1a2bf375a4d490b664d5a14754c4de8c43378360", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/1a2bf375a4d490b664d5a14754c4de8c43378360", "committedDate": "2020-10-29T15:24:47Z", "message": "Revert \"IGNITE-13567 Ignore failing test.\"\n\nThis reverts commit 7d5e4e5bf93684b22726c4be906401d400824d9f."}, "afterCommit": {"oid": "a16d46281e8775678eb8fb48242661a9276aa2a1", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/a16d46281e8775678eb8fb48242661a9276aa2a1", "committedDate": "2020-12-02T13:47:19Z", "message": "Revert \"IGNITE-13567 Ignore failing test.\"\n\nThis reverts commit 7d5e4e5bf93684b22726c4be906401d400824d9f."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a16d46281e8775678eb8fb48242661a9276aa2a1", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/a16d46281e8775678eb8fb48242661a9276aa2a1", "committedDate": "2020-12-02T13:47:19Z", "message": "Revert \"IGNITE-13567 Ignore failing test.\"\n\nThis reverts commit 7d5e4e5bf93684b22726c4be906401d400824d9f."}, "afterCommit": {"oid": "6e3d8f092b8dc967c09c6076efe0d340efb59db9", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/6e3d8f092b8dc967c09c6076efe0d340efb59db9", "committedDate": "2020-12-03T09:50:33Z", "message": "Revert \"IGNITE-13567 Ignore failing test.\"\n\nThis reverts commit 7d5e4e5bf93684b22726c4be906401d400824d9f."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca411d98ef05b5a77acefd15fddece202be68562", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/ca411d98ef05b5a77acefd15fddece202be68562", "committedDate": "2021-01-19T11:07:54Z", "message": "IGNITE-13567 Fixed incorrect value of the joiningNodeClient flag for the joining client."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32ac1fd22777511ecdf3c259c12ce80037e04835", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/32ac1fd22777511ecdf3c259c12ce80037e04835", "committedDate": "2021-01-19T11:07:54Z", "message": "IGNITE-13567 Minor test improvement."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f54696db4c88d048754095c02cfb3813cd3e92f", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/1f54696db4c88d048754095c02cfb3813cd3e92f", "committedDate": "2021-01-19T11:07:54Z", "message": "IGNITE-13567 (minor) naming discoveryDataPacket => dataPacket"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a69f19a76d9b66f0317a3ed6269a78f5d29b877", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/8a69f19a76d9b66f0317a3ed6269a78f5d29b877", "committedDate": "2021-01-19T11:07:54Z", "message": "IGNITE-13567 Test improvements."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5c0866839078f75734b16bd560209b11858c560", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/a5c0866839078f75734b16bd560209b11858c560", "committedDate": "2021-01-19T11:07:54Z", "message": "IGNITE-13567 Test improvement."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30b41e24c53bef83f601cf2d9e4d58349fbffe8e", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/30b41e24c53bef83f601cf2d9e4d58349fbffe8e", "committedDate": "2021-01-19T11:07:55Z", "message": "IGNITE-13567 Add ZK test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3171209fcbd204a9239faee4f45d767ef6f9065", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/e3171209fcbd204a9239faee4f45d767ef6f9065", "committedDate": "2021-01-19T11:07:55Z", "message": "IGNITE-13567 (minor) code cleanup."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e538c9565736a817889214cc932102684d9501bb", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/e538c9565736a817889214cc932102684d9501bb", "committedDate": "2021-01-19T11:07:55Z", "message": "IGNITE-13567 Ignore failing test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89c0774214c1ffae58cc53f22a094e4fe0ad86f5", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/89c0774214c1ffae58cc53f22a094e4fe0ad86f5", "committedDate": "2021-01-19T11:07:55Z", "message": "IGNITE-13567 (minor) test javadocs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "370f91fd21ed3480cee26acda3be301d1061fe3f", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/370f91fd21ed3480cee26acda3be301d1061fe3f", "committedDate": "2021-01-19T11:07:55Z", "message": "IGNITE-13567 Fix test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfbed9f2407bf787ccd5d91fc4f42148131ea8f5", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/dfbed9f2407bf787ccd5d91fc4f42148131ea8f5", "committedDate": "2021-01-19T11:07:55Z", "message": "Revert \"IGNITE-13567 Ignore failing test.\"\n\nThis reverts commit 7d5e4e5bf93684b22726c4be906401d400824d9f."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6e3d8f092b8dc967c09c6076efe0d340efb59db9", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/6e3d8f092b8dc967c09c6076efe0d340efb59db9", "committedDate": "2020-12-03T09:50:33Z", "message": "Revert \"IGNITE-13567 Ignore failing test.\"\n\nThis reverts commit 7d5e4e5bf93684b22726c4be906401d400824d9f."}, "afterCommit": {"oid": "af6b149568613a23547bf85a653b59f89d724555", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/af6b149568613a23547bf85a653b59f89d724555", "committedDate": "2021-01-19T11:07:55Z", "message": "IGNITE-13567 Test code cleanup."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0bad7b4d4066b8f6069df29d4f9f2f101608c81", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/e0bad7b4d4066b8f6069df29d4f9f2f101608c81", "committedDate": "2021-01-19T11:08:42Z", "message": "IGNITE-13567 Test code cleanup."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af6b149568613a23547bf85a653b59f89d724555", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/af6b149568613a23547bf85a653b59f89d724555", "committedDate": "2021-01-19T11:07:55Z", "message": "IGNITE-13567 Test code cleanup."}, "afterCommit": {"oid": "e0bad7b4d4066b8f6069df29d4f9f2f101608c81", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/e0bad7b4d4066b8f6069df29d4f9f2f101608c81", "committedDate": "2021-01-19T11:08:42Z", "message": "IGNITE-13567 Test code cleanup."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcxMTQxMzYy", "url": "https://github.com/apache/ignite/pull/8350#pullrequestreview-571141362", "createdAt": "2021-01-19T11:14:30Z", "commit": {"oid": "e0bad7b4d4066b8f6069df29d4f9f2f101608c81"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3040, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}