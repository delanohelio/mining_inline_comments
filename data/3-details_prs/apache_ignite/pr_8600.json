{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0NTk5MTY0", "number": 8600, "title": "IGNITE-13882 Add parametrization to ducktape install_root and persistence_root", "bodyText": "Thank you for submitting the pull request to the Apache Ignite.\nIn order to streamline the review of the contribution\nwe ask you to ensure the following steps have been taken:\nThe Contribution Checklist\n\n There is a single JIRA ticket related to the pull request.\n The web-link to the pull request is attached to the JIRA ticket.\n The JIRA ticket has the Patch Available state.\n The pull request body describes changes that have been made.\nThe description explains WHAT and WHY was made instead of HOW.\n The pull request title is treated as the final commit message.\nThe following pattern must be used: IGNITE-XXXX Change summary where XXXX - number of JIRA issue.\n A reviewer has been mentioned through the JIRA comments\n(see the Maintainers list)\n The pull request has been checked by the Teamcity Bot and\nthe green visa attached to the JIRA ticket (see TC.Bot: Check PR)\n\nNotes\n\nHow to Contribute\nCoding abbreviation rules\nCoding Guidelines\nApache Ignite Teamcity Bot\n\nIf you need any help, please email dev@ignite.apache.org or ask an\u0443 advice on http://asf.slack.com #ignite channel.", "createdAt": "2020-12-23T06:31:03Z", "url": "https://github.com/apache/ignite/pull/8600", "merged": true, "mergeCommit": {"oid": "cbf8bdfd05c316495d8e437e80d8fa92fd1088b3"}, "closed": true, "closedAt": "2020-12-25T08:27:22Z", "author": {"login": "ivandasch"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdoYpwOAH2gAyNTQ0NTk5MTY0OjFkZDY2ZWUwODBjODE4YjFiMzM3YzhhNjRiNjFmMjBkMDIzNmQyZjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdpi7WsAH2gAyNTQ0NTk5MTY0OjUyMTJiMDdjNDgxZTEzZDg4YjY4Y2MyMDAyNTUyNWQ0ZTliZDk1MTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1dd66ee080c818b1b337c8a64b61f20d0236d2f0", "author": {"user": {"login": "ivandasch", "name": "Ivan Daschinskiy"}}, "url": "https://github.com/apache/ignite/commit/1dd66ee080c818b1b337c8a64b61f20d0236d2f0", "committedDate": "2020-12-21T16:37:32Z", "message": "WIP. First attempt to parametrize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b1a5ce96c7ad341ff08fb765b940290c4ff12f8", "author": {"user": {"login": "ivandasch", "name": "Ivan Daschinskiy"}}, "url": "https://github.com/apache/ignite/commit/4b1a5ce96c7ad341ff08fb765b940290c4ff12f8", "committedDate": "2020-12-22T06:50:15Z", "message": "Merge remote-tracking branch 'origin/ignite-ducktape' into ducktape-parametrize-path\n\n# Conflicts:\n#\tmodules/ducktests/tests/ignitetest/services/ignite.py\n#\tmodules/ducktests/tests/ignitetest/services/ignite_app.py\n#\tmodules/ducktests/tests/ignitetest/services/utils/ignite_aware.py\n#\tmodules/ducktests/tests/ignitetest/services/utils/ignite_persistence.py\n#\tmodules/ducktests/tests/ignitetest/services/utils/ignite_spec.py"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "150c85602a798c40cf607a8cb46919ff69fab7cc", "author": {"user": {"login": "ivandasch", "name": "Ivan Daschinskiy"}}, "url": "https://github.com/apache/ignite/commit/150c85602a798c40cf607a8cb46919ff69fab7cc", "committedDate": "2020-12-23T06:29:02Z", "message": "IGNITE-13882 Add parametrization to ducktape install_root and persistence_root"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76e54c27204e04ca6260d2222155bd7605acabe0", "author": {"user": {"login": "ivandasch", "name": "Ivan Daschinskiy"}}, "url": "https://github.com/apache/ignite/commit/76e54c27204e04ca6260d2222155bd7605acabe0", "committedDate": "2020-12-23T08:19:41Z", "message": "IGNITE-13882 Add self test for file rotation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2a65b404c982bd8dc7a6afef0cf447e47649ed5", "author": {"user": {"login": "ivandasch", "name": "Ivan Daschinskiy"}}, "url": "https://github.com/apache/ignite/commit/b2a65b404c982bd8dc7a6afef0cf447e47649ed5", "committedDate": "2020-12-23T08:32:30Z", "message": "remove empty file for rat."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ceaf6238dd0d09b8c6e601e9f7a42b9229bf8b44", "author": {"user": {"login": "ivandasch", "name": "Ivan Daschinskiy"}}, "url": "https://github.com/apache/ignite/commit/ceaf6238dd0d09b8c6e601e9f7a42b9229bf8b44", "committedDate": "2020-12-23T08:43:20Z", "message": "remove from recreation from tox"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdb6aabfd6ddf4ebaa4a033c7238c40140e0fc12", "author": {"user": {"login": "ivandasch", "name": "Ivan Daschinskiy"}}, "url": "https://github.com/apache/ignite/commit/cdb6aabfd6ddf4ebaa4a033c7238c40140e0fc12", "committedDate": "2020-12-23T12:27:11Z", "message": "remove sudo for rm"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a65401838aba0a66b082a2395e4b67b80a3dc8b3", "author": {"user": {"login": "ivandasch", "name": "Ivan Daschinskiy"}}, "url": "https://github.com/apache/ignite/commit/a65401838aba0a66b082a2395e4b67b80a3dc8b3", "committedDate": "2020-12-24T14:28:13Z", "message": "add useful flag -- to rm"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NzEwMDQw", "url": "https://github.com/apache/ignite/pull/8600#pullrequestreview-558710040", "createdAt": "2020-12-24T20:02:53Z", "commit": {"oid": "a65401838aba0a66b082a2395e4b67b80a3dc8b3"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQyMDowMjo1M1rOILUhvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQyMDowOToyOVrOILUk_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODc0MTU2NA==", "bodyText": "Why did you change that? It was exactly like we discussed in Sergey PR?", "url": "https://github.com/apache/ignite/pull/8600#discussion_r548741564", "createdAt": "2020-12-24T20:02:53Z", "author": {"login": "timoninmaxim"}, "path": "modules/ducktests/tests/ignitetest/services/utils/ignite_aware.py", "diffHunk": "@@ -359,8 +378,13 @@ def __update_node_log_file(self, node):\n         \"\"\"\n         Update the node log file.\n         \"\"\"\n-        cnt = list(node.account.ssh_capture(f'ls {self.LOGS_DIR} | '\n-                                            f'grep -E \"^console_[0-9]*.log$\" | '\n+        cnt = list(node.account.ssh_capture(f'ls {self.log_dir} | '\n+                                            f'grep -E \"^console(_[0-9]+){{0,1}}.log$\" | '\n                                             f'wc -l', callback=int))[0]\n \n-        node.log_file = self.STDOUT_STDERR_CAPTURE.replace('.log', f'_{cnt + 1}.log')\n+        node.log_file = os.path.join(self.log_dir, f\"console{'_' + str(cnt) if cnt > 0 else ''}.log\")\n+\n+        if cnt > 0:\n+            self.logger.debug(f\"rotating logs, now logging to {node.log_file} on {node.name}\")\n+        else:\n+            self.logger.debug(f\"logging to {node.log_file} on {node.name}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a65401838aba0a66b082a2395e4b67b80a3dc8b3"}, "originalPosition": 137}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODc0MjM5Ng==", "bodyText": "Let's mark this method and def module as private.", "url": "https://github.com/apache/ignite/pull/8600#discussion_r548742396", "createdAt": "2020-12-24T20:09:29Z", "author": {"login": "timoninmaxim"}, "path": "modules/ducktests/tests/ignitetest/services/utils/ignite_spec.py", "diffHunk": "@@ -74,8 +76,22 @@ def config_template(self):\n             return IgniteClientConfigTemplate()\n         return IgniteServerConfigTemplate()\n \n+    def home(self, version=None):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a65401838aba0a66b082a2395e4b67b80a3dc8b3"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5212b07c481e13d88b68cc20025525d4e9bd9513", "author": {"user": {"login": "ivandasch", "name": "Ivan Daschinskiy"}}, "url": "https://github.com/apache/ignite/commit/5212b07c481e13d88b68cc20025525d4e9bd9513", "committedDate": "2020-12-25T07:09:44Z", "message": "chang log rotation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2298, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}