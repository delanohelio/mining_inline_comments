{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5MTAyOTQ5", "number": 8446, "title": "IGNITE-13659 Cache encryption key rotation (documentation)", "bodyText": "Thank you for submitting the pull request to the Apache Ignite.\nIn order to streamline the review of the contribution\nwe ask you to ensure the following steps have been taken:\nThe Contribution Checklist\n\n There is a single JIRA ticket related to the pull request.\n The web-link to the pull request is attached to the JIRA ticket.\n The JIRA ticket has the Patch Available state.\n The pull request body describes changes that have been made.\nThe description explains WHAT and WHY was made instead of HOW.\n The pull request title is treated as the final commit message.\nThe following pattern must be used: IGNITE-XXXX Change summary where XXXX - number of JIRA issue.\n A reviewer has been mentioned through the JIRA comments\n(see the Maintainers list)\n The pull request has been checked by the Teamcity Bot and\nthe green visa attached to the JIRA ticket (see TC.Bot: Check PR)\n\nNotes\n\nHow to Contribute\nCoding abbreviation rules\nCoding Guidelines\nApache Ignite Teamcity Bot\n\nIf you need any help, please email dev@ignite.apache.org or ask an\u0443 advice on http://asf.slack.com #ignite channel.", "createdAt": "2020-11-11T10:26:38Z", "url": "https://github.com/apache/ignite/pull/8446", "merged": true, "mergeCommit": {"oid": "24ec90853e4fd6541730f526e3fc178ca73088b2"}, "closed": true, "closedAt": "2021-01-18T12:48:07Z", "author": {"login": "xtern"}, "timelineItems": {"totalCount": 34, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbbdeGgBqjM5ODMxOTcyNjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdxWJWfgFqTU3MDQ1ODg4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d9eeaf80db01e91018f2b7650596cc88720882b6", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/d9eeaf80db01e91018f2b7650596cc88720882b6", "committedDate": "2020-11-11T10:24:54Z", "message": "IGNITE-13659 Cache encryption key rotation (documentation)"}, "afterCommit": {"oid": "cb1fe8fda88af79d8efb10c780ab92bc17534252", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/cb1fe8fda88af79d8efb10c780ab92bc17534252", "committedDate": "2020-11-11T10:32:35Z", "message": "IGNITE-13659 Cache encryption key rotation (documentation)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cb1fe8fda88af79d8efb10c780ab92bc17534252", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/cb1fe8fda88af79d8efb10c780ab92bc17534252", "committedDate": "2020-11-11T10:32:35Z", "message": "IGNITE-13659 Cache encryption key rotation (documentation)"}, "afterCommit": {"oid": "7cee68bd52aa31a95d6b1dd8eceb60e54c79af03", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/7cee68bd52aa31a95d6b1dd8eceb60e54c79af03", "committedDate": "2020-12-09T15:59:46Z", "message": "IGNITE-13659 Cache encryption key rotation (documentation)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7cee68bd52aa31a95d6b1dd8eceb60e54c79af03", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/7cee68bd52aa31a95d6b1dd8eceb60e54c79af03", "committedDate": "2020-12-09T15:59:46Z", "message": "IGNITE-13659 Cache encryption key rotation (documentation)"}, "afterCommit": {"oid": "79991c7c829dce4d0696b242a614af9ff31ff18d", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/79991c7c829dce4d0696b242a614af9ff31ff18d", "committedDate": "2020-12-09T16:12:42Z", "message": "IGNITE-13659 Cache encryption key rotation (documentation)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMDIyMzA4", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-550022308", "createdAt": "2020-12-11T11:35:51Z", "commit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMTozNTo1MVrOID0_rQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQxMDo0NDoyOVrOIEdtLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg4NDkwOQ==", "bodyText": "You don't need 'the' here.", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540884909", "createdAt": "2020-12-11T11:35:51Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg4NTM2Mw==", "bodyText": "How does a new cache start? Does it start by itself?", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540885363", "createdAt": "2020-12-11T11:36:42Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg4NTgxNg==", "bodyText": "'So,...'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540885816", "createdAt": "2020-12-11T11:37:24Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg4NjkwMA==", "bodyText": "'See link:security/tde[Transparent Data Encryption] to learn more.'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540886900", "createdAt": "2020-12-11T11:39:26Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg4Nzg1NA==", "bodyText": "'It allows users to change the cache group encryption key and re-encrypt existing data at runtime.'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540887854", "createdAt": "2020-12-11T11:41:18Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg4OTQ1Mg==", "bodyText": "'...or if the crypto period (key validity period) has ended.'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540889452", "createdAt": "2020-12-11T11:44:16Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg5MDY0Mw==", "bodyText": "'consists of two stages, which are performed sequentially:' --> '...includes two sequential stages:'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540890643", "createdAt": "2020-12-11T11:46:24Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg5MTk4Mw==", "bodyText": "'Rotate cache group key, this process add...' --> 'Rotate cache group key. This process add...'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540891983", "createdAt": "2020-12-11T11:48:52Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg5NDk1OQ==", "bodyText": "Split the sentence like this: 'The second stage can take a long time. It depends on the amount of existing data.'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540894959", "createdAt": "2020-12-11T11:54:28Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg5NzI1OQ==", "bodyText": "'By default, ...'\nSplit the sentence like this: 'By default it is equal to zero. The identifier of the new key increases with each rotation.'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540897259", "createdAt": "2020-12-11T11:58:42Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg5OTA0MQ==", "bodyText": "The encryption key (as well as encryption key ID) is the same for all nodes in a cache group.", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540899041", "createdAt": "2020-12-11T12:02:06Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDkwMDQwNQ==", "bodyText": "'...for a cache group...'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540900405", "createdAt": "2020-12-11T12:04:50Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for this cache group (both stages).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDkwMjMzMA==", "bodyText": "'Ignite shipment includes...'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540902330", "createdAt": "2020-12-11T12:08:32Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for this cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite ships a `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDkwMzI0NA==", "bodyText": "I'd say '...are used...'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540903244", "createdAt": "2020-12-11T12:10:15Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for this cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite ships a `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands can be used with `control.sh|bat`:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDkwNDg0NA==", "bodyText": "'View the cache group encryption key identifiers.'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540904844", "createdAt": "2020-12-11T12:13:33Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for this cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite ships a `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands can be used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the encryption key identifiers of the cache group.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDkwNTk4Mw==", "bodyText": "'...can also be managed...'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540905983", "createdAt": "2020-12-11T12:15:46Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for this cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite ships a `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands can be used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the encryption key identifiers of the cache group.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can be managed programmatically:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDkwODcxOQ==", "bodyText": "'...re-encryption rate...'\n'...or CLI at runtime'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540908719", "createdAt": "2020-12-11T12:20:56Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for this cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite ships a `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands can be used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the encryption key identifiers of the cache group.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing the re-encryption process\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n+The previous encryption key is automatically removed when all local partitions are encrypted with the new key, and the last link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] segment, which may contain entries encrypted with the previous key, is removed from disk.\n+\n+NOTE: Re-encryption uses link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] for physical recovery and may affect performance of cache operations.\n+\n+There are several options to manage the performance impact of re-encryption:\n+\n+* Limit the rate of re-encryption by using a configuration parameter or by using the CLI at runtime.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDkwOTg0NA==", "bodyText": "'...pages scanned during...'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540909844", "createdAt": "2020-12-11T12:23:08Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for this cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite ships a `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands can be used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the encryption key identifiers of the cache group.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing the re-encryption process\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n+The previous encryption key is automatically removed when all local partitions are encrypted with the new key, and the last link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] segment, which may contain entries encrypted with the previous key, is removed from disk.\n+\n+NOTE: Re-encryption uses link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] for physical recovery and may affect performance of cache operations.\n+\n+There are several options to manage the performance impact of re-encryption:\n+\n+* Limit the rate of re-encryption by using a configuration parameter or by using the CLI at runtime.\n+* Temporarily suspend re-encryption using CLI command.\n+\n+Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is part of `DatastorageConfiguration`.\n+[cols=\"1,1,1\",opts=\"header\"]\n+|===\n+|Property | Default value | Description\n+|reencryptionRateLimit | 0 (unlimited) | Re-encryption rate limit in megabytes per second.\n+|reencryptionBatchSize | 100 | The number of pages that is scanned during re-encryption under checkpoint lock.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 109}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDkxMDA1Ng==", "bodyText": "'...the re-encryption rate'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540910056", "createdAt": "2020-12-11T12:23:33Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for this cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite ships a `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands can be used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the encryption key identifiers of the cache group.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing the re-encryption process\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n+The previous encryption key is automatically removed when all local partitions are encrypted with the new key, and the last link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] segment, which may contain entries encrypted with the previous key, is removed from disk.\n+\n+NOTE: Re-encryption uses link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] for physical recovery and may affect performance of cache operations.\n+\n+There are several options to manage the performance impact of re-encryption:\n+\n+* Limit the rate of re-encryption by using a configuration parameter or by using the CLI at runtime.\n+* Temporarily suspend re-encryption using CLI command.\n+\n+Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is part of `DatastorageConfiguration`.\n+[cols=\"1,1,1\",opts=\"header\"]\n+|===\n+|Property | Default value | Description\n+|reencryptionRateLimit | 0 (unlimited) | Re-encryption rate limit in megabytes per second.\n+|reencryptionBatchSize | 100 | The number of pages that is scanned during re-encryption under checkpoint lock.\n+|===\n+\n+=== Using XML configuration to limit re-encryption rate", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 112}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDkxMDM1NQ==", "bodyText": "re-encryption process or re-encryption rate?", "url": "https://github.com/apache/ignite/pull/8446#discussion_r540910355", "createdAt": "2020-12-11T12:24:07Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for this cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite ships a `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands can be used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the encryption key identifiers of the cache group.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing the re-encryption process\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n+The previous encryption key is automatically removed when all local partitions are encrypted with the new key, and the last link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] segment, which may contain entries encrypted with the previous key, is removed from disk.\n+\n+NOTE: Re-encryption uses link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] for physical recovery and may affect performance of cache operations.\n+\n+There are several options to manage the performance impact of re-encryption:\n+\n+* Limit the rate of re-encryption by using a configuration parameter or by using the CLI at runtime.\n+* Temporarily suspend re-encryption using CLI command.\n+\n+Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is part of `DatastorageConfiguration`.\n+[cols=\"1,1,1\",opts=\"header\"]\n+|===\n+|Property | Default value | Description\n+|reencryptionRateLimit | 0 (unlimited) | Re-encryption rate limit in megabytes per second.\n+|reencryptionBatchSize | 100 | The number of pages that is scanned during re-encryption under checkpoint lock.\n+|===\n+\n+=== Using XML configuration to limit re-encryption rate\n+[source, xml]\n+----\n+include::code-snippets/xml/tde.xml[tags=ignite-config;!discovery;!encryption;!cache;!discovery, indent=0]\n+----\n+\n+=== Using CLI to control re-encryption", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 118}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU1MDMyMQ==", "bodyText": "'...as well as suspend...'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r541550321", "createdAt": "2020-12-12T10:33:17Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for this cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite ships a `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands can be used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the encryption key identifiers of the cache group.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing the re-encryption process\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n+The previous encryption key is automatically removed when all local partitions are encrypted with the new key, and the last link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] segment, which may contain entries encrypted with the previous key, is removed from disk.\n+\n+NOTE: Re-encryption uses link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] for physical recovery and may affect performance of cache operations.\n+\n+There are several options to manage the performance impact of re-encryption:\n+\n+* Limit the rate of re-encryption by using a configuration parameter or by using the CLI at runtime.\n+* Temporarily suspend re-encryption using CLI command.\n+\n+Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is part of `DatastorageConfiguration`.\n+[cols=\"1,1,1\",opts=\"header\"]\n+|===\n+|Property | Default value | Description\n+|reencryptionRateLimit | 0 (unlimited) | Re-encryption rate limit in megabytes per second.\n+|reencryptionBatchSize | 100 | The number of pages that is scanned during re-encryption under checkpoint lock.\n+|===\n+\n+=== Using XML configuration to limit re-encryption rate\n+[source, xml]\n+----\n+include::code-snippets/xml/tde.xml[tags=ignite-config;!discovery;!encryption;!cache;!discovery, indent=0]\n+----\n+\n+=== Using CLI to control re-encryption\n+\n+The `control.sh|bat` script provides the ability to change the re-encryption rate, suspend and resume background re-encryption at runtime.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 120}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU1MTQzOQ==", "bodyText": "'...re-encryption will continue automatically' --> '...re-encryption will be continued automatically'\n'...and the rate limit will be set to 'unlimited' (by default), or taken from the local XML configuration (if any).'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r541551439", "createdAt": "2020-12-12T10:41:18Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for this cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite ships a `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands can be used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the encryption key identifiers of the cache group.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing the re-encryption process\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n+The previous encryption key is automatically removed when all local partitions are encrypted with the new key, and the last link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] segment, which may contain entries encrypted with the previous key, is removed from disk.\n+\n+NOTE: Re-encryption uses link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] for physical recovery and may affect performance of cache operations.\n+\n+There are several options to manage the performance impact of re-encryption:\n+\n+* Limit the rate of re-encryption by using a configuration parameter or by using the CLI at runtime.\n+* Temporarily suspend re-encryption using CLI command.\n+\n+Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is part of `DatastorageConfiguration`.\n+[cols=\"1,1,1\",opts=\"header\"]\n+|===\n+|Property | Default value | Description\n+|reencryptionRateLimit | 0 (unlimited) | Re-encryption rate limit in megabytes per second.\n+|reencryptionBatchSize | 100 | The number of pages that is scanned during re-encryption under checkpoint lock.\n+|===\n+\n+=== Using XML configuration to limit re-encryption rate\n+[source, xml]\n+----\n+include::code-snippets/xml/tde.xml[tags=ignite-config;!discovery;!encryption;!cache;!discovery, indent=0]\n+----\n+\n+=== Using CLI to control re-encryption\n+\n+The `control.sh|bat` script provides the ability to change the re-encryption rate, suspend and resume background re-encryption at runtime.\n+\n+NOTE: After the node restarts, the suspended background re-encryption will continue automatically, and the rate limit will be set from the local XML configuration (if any) or set to unlimited rate (default).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 122}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU1MTUyOA==", "bodyText": "'View the cache group re-encryption status.'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r541551528", "createdAt": "2020-12-12T10:41:56Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for this cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite ships a `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands can be used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the encryption key identifiers of the cache group.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing the re-encryption process\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n+The previous encryption key is automatically removed when all local partitions are encrypted with the new key, and the last link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] segment, which may contain entries encrypted with the previous key, is removed from disk.\n+\n+NOTE: Re-encryption uses link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] for physical recovery and may affect performance of cache operations.\n+\n+There are several options to manage the performance impact of re-encryption:\n+\n+* Limit the rate of re-encryption by using a configuration parameter or by using the CLI at runtime.\n+* Temporarily suspend re-encryption using CLI command.\n+\n+Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is part of `DatastorageConfiguration`.\n+[cols=\"1,1,1\",opts=\"header\"]\n+|===\n+|Property | Default value | Description\n+|reencryptionRateLimit | 0 (unlimited) | Re-encryption rate limit in megabytes per second.\n+|reencryptionBatchSize | 100 | The number of pages that is scanned during re-encryption under checkpoint lock.\n+|===\n+\n+=== Using XML configuration to limit re-encryption rate\n+[source, xml]\n+----\n+include::code-snippets/xml/tde.xml[tags=ignite-config;!discovery;!encryption;!cache;!discovery, indent=0]\n+----\n+\n+=== Using CLI to control re-encryption\n+\n+The `control.sh|bat` script provides the ability to change the re-encryption rate, suspend and resume background re-encryption at runtime.\n+\n+NOTE: After the node restarts, the suspended background re-encryption will continue automatically, and the rate limit will be set from the local XML configuration (if any) or set to unlimited rate (default).\n+\n+[source,shell]\n+----\n+# View the re-encryption status of the cache group.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 126}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU1MTc2NQ==", "bodyText": "'Set re-encryption rate to 'unlimited' ('0').'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r541551765", "createdAt": "2020-12-12T10:43:21Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for this cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite ships a `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands can be used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the encryption key identifiers of the cache group.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing the re-encryption process\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n+The previous encryption key is automatically removed when all local partitions are encrypted with the new key, and the last link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] segment, which may contain entries encrypted with the previous key, is removed from disk.\n+\n+NOTE: Re-encryption uses link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] for physical recovery and may affect performance of cache operations.\n+\n+There are several options to manage the performance impact of re-encryption:\n+\n+* Limit the rate of re-encryption by using a configuration parameter or by using the CLI at runtime.\n+* Temporarily suspend re-encryption using CLI command.\n+\n+Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is part of `DatastorageConfiguration`.\n+[cols=\"1,1,1\",opts=\"header\"]\n+|===\n+|Property | Default value | Description\n+|reencryptionRateLimit | 0 (unlimited) | Re-encryption rate limit in megabytes per second.\n+|reencryptionBatchSize | 100 | The number of pages that is scanned during re-encryption under checkpoint lock.\n+|===\n+\n+=== Using XML configuration to limit re-encryption rate\n+[source, xml]\n+----\n+include::code-snippets/xml/tde.xml[tags=ignite-config;!discovery;!encryption;!cache;!discovery, indent=0]\n+----\n+\n+=== Using CLI to control re-encryption\n+\n+The `control.sh|bat` script provides the ability to change the re-encryption rate, suspend and resume background re-encryption at runtime.\n+\n+NOTE: After the node restarts, the suspended background re-encryption will continue automatically, and the rate limit will be set from the local XML configuration (if any) or set to unlimited rate (default).\n+\n+[source,shell]\n+----\n+# View the re-encryption status of the cache group.\n+control.sh|bat --encryption reencryption_status cacheGroupName\n+\n+# Suspend re-encryption of the cache group.\n+control.sh|bat --encryption suspend_reencryption cacheGroupName\n+\n+# Resume (suspended) re-encryption of the cache group.\n+control.sh|bat --encryption resume_reencryption cacheGroupName\n+\n+# View the re-encryption rate limit.\n+control.sh|bat --encryption reencryption_rate_limit\n+\n+# Set the re-encryption rate limit to 2.5 MB/s.\n+control.sh|bat --encryption reencryption_rate_limit 2.5\n+\n+# Set re-encryption to an unlimited rate.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 141}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU1MTkxOQ==", "bodyText": "'...using JMX metrics described in the link:monitoring-metrics/new-metrics#cache-groups[Cache group metrics] section.'", "url": "https://github.com/apache/ignite/pull/8446#discussion_r541551919", "createdAt": "2020-12-12T10:44:29Z", "author": {"login": "Silberfuchs1"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+The cache group encryption key is used to encrypt cache data on disk.\n+When a new cache starts, a new encryption key is generated and propagated to all server nodes in the cluster. So each node for the same cache group has the same cache encryption key.\n+To learn more see the link:security/tde[Transparent Data Encryption] page.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the encryption key of the cache group and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or at the end of the crypto period (key validity period).\n+\n+The process of changing the cache encryption key consists of two stages, which are performed sequentially:\n+\n+1. Rotate cache group key, this process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time, which depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero, with each rotation the identifier of the new key is increased.\n+The same cache group has the same encryption key (with the same encryption key ID) on all nodes.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for this cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite ships a `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands can be used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the encryption key identifiers of the cache group.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing the re-encryption process\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n+The previous encryption key is automatically removed when all local partitions are encrypted with the new key, and the last link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] segment, which may contain entries encrypted with the previous key, is removed from disk.\n+\n+NOTE: Re-encryption uses link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] for physical recovery and may affect performance of cache operations.\n+\n+There are several options to manage the performance impact of re-encryption:\n+\n+* Limit the rate of re-encryption by using a configuration parameter or by using the CLI at runtime.\n+* Temporarily suspend re-encryption using CLI command.\n+\n+Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is part of `DatastorageConfiguration`.\n+[cols=\"1,1,1\",opts=\"header\"]\n+|===\n+|Property | Default value | Description\n+|reencryptionRateLimit | 0 (unlimited) | Re-encryption rate limit in megabytes per second.\n+|reencryptionBatchSize | 100 | The number of pages that is scanned during re-encryption under checkpoint lock.\n+|===\n+\n+=== Using XML configuration to limit re-encryption rate\n+[source, xml]\n+----\n+include::code-snippets/xml/tde.xml[tags=ignite-config;!discovery;!encryption;!cache;!discovery, indent=0]\n+----\n+\n+=== Using CLI to control re-encryption\n+\n+The `control.sh|bat` script provides the ability to change the re-encryption rate, suspend and resume background re-encryption at runtime.\n+\n+NOTE: After the node restarts, the suspended background re-encryption will continue automatically, and the rate limit will be set from the local XML configuration (if any) or set to unlimited rate (default).\n+\n+[source,shell]\n+----\n+# View the re-encryption status of the cache group.\n+control.sh|bat --encryption reencryption_status cacheGroupName\n+\n+# Suspend re-encryption of the cache group.\n+control.sh|bat --encryption suspend_reencryption cacheGroupName\n+\n+# Resume (suspended) re-encryption of the cache group.\n+control.sh|bat --encryption resume_reencryption cacheGroupName\n+\n+# View the re-encryption rate limit.\n+control.sh|bat --encryption reencryption_rate_limit\n+\n+# Set the re-encryption rate limit to 2.5 MB/s.\n+control.sh|bat --encryption reencryption_rate_limit 2.5\n+\n+# Set re-encryption to an unlimited rate.\n+control.sh|bat --encryption reencryption_rate_limit 0\n+----\n+\n+The re-encryption status can also be obtained using JMX metrics, which are described in the link:monitoring-metrics/new-metrics#cache-groups[Cache group metrics] section.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f762cd82733551b8a920e0ef8c8a339df9bc2555"}, "originalPosition": 145}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe49b59d88678dc6b524fddcfbe1df1bf72f286e", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/fe49b59d88678dc6b524fddcfbe1df1bf72f286e", "committedDate": "2020-12-16T15:47:38Z", "message": "IGNITE-13659 Cache encryption key rotation (documentation)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fff94bd793a8aba96b2268a3b9b90ea22bfbd699", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/fff94bd793a8aba96b2268a3b9b90ea22bfbd699", "committedDate": "2020-12-16T15:47:38Z", "message": "IGNITE-13659 Review notes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12583e2764eb57b1b42ede5d69dfeb8c50f3194f", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/12583e2764eb57b1b42ede5d69dfeb8c50f3194f", "committedDate": "2020-12-16T15:47:38Z", "message": "IGNITE-13659 Review notes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/72ab0a280390e9ff2a20421596f4d7f0415972c2", "committedDate": "2020-12-16T15:47:39Z", "message": "IGNITE-13659 Changed subtitle."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "34931860b49c72e4fc1f23ba5d59f14806372476", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/34931860b49c72e4fc1f23ba5d59f14806372476", "committedDate": "2020-12-14T09:36:06Z", "message": "IGNITE-13659 Changed subtitle."}, "afterCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/72ab0a280390e9ff2a20421596f4d7f0415972c2", "committedDate": "2020-12-16T15:47:39Z", "message": "IGNITE-13659 Changed subtitle."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3Mzk4NzI0", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567398724", "createdAt": "2021-01-13T16:25:29Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjoyNToyOVrOIS3pEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjoyNToyOVrOIS3pEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY1NjkxNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // This future will be completed when the new encryption key is set for writing on\n          \n          \n            \n                    // This feature will be completed when the new encryption key is set for writing on", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556656914", "createdAt": "2021-01-13T16:25:29Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/code-snippets/java/src/main/java/org/apache/ignite/snippets/TDE.java", "diffHunk": "@@ -58,6 +58,13 @@ void configuration() {\n         IgniteFuture<Void> future = ignite.encryption().changeMasterKey(\"newMasterKeyName\");\n         //end::master-key-rotation[]\n \n+        //tag::cache-group-key-rotation[]\n+        // Starts cache group encryption key change process.\n+        // This future will be completed when the new encryption key is set for writing on", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3Mzk5NTE4", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567399518", "createdAt": "2021-01-13T16:26:16Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjoyNjoxNlrOIS3rhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjoyNjoxNlrOIS3rhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY1NzU0Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            |ReencryptionBytesLeft |long| The number of bytes left for re-ecryption.\n          \n          \n            \n            |ReencryptionBytesLeft |long| The number of bytes left for re-encryption.", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556657542", "createdAt": "2021-01-13T16:26:16Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/monitoring-metrics/new-metrics.adoc", "diffHunk": "@@ -129,6 +129,8 @@ Register name: `cacheGroups.{group_name}`\n |StorageSize |long|    Storage space allocated for group, in bytes.\n |TotalAllocatedPages |long|    Cache group total allocated pages.\n |TotalAllocatedSize  |long|    Total size of memory allocated for group, in bytes.\n+|ReencryptionBytesLeft |long| The number of bytes left for re-ecryption.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDAwODE1", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567400815", "createdAt": "2021-01-13T16:27:30Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjoyNzozMFrOIS3vWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjoyNzozMFrOIS3vWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY1ODUyMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Cache group encryption key is used to encrypt cache data on disk.\n          \n          \n            \n            Cache group encryption key is used to encrypt cache data on the disk.", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556658522", "createdAt": "2021-01-13T16:27:30Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDAxODUy", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567401852", "createdAt": "2021-01-13T16:28:31Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjoyODozMVrOIS3yfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjoyODozMVrOIS3yfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY1OTMyNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n          \n          \n            \n            When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node has the same cache encryption key for the same cache group.", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556659326", "createdAt": "2021-01-13T16:28:31Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDAzOTUy", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567403952", "createdAt": "2021-01-13T16:30:38Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjozMDozOFrOIS34qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjozMDozOFrOIS34qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY2MDkwNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            See link:security/tde[Transparent Data Encryption] to learn more.\n          \n          \n            \n            See link:security/tde[Transparent Data Encryption] for more detail.", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556660906", "createdAt": "2021-01-13T16:30:38Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDA1MzIw", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567405320", "createdAt": "2021-01-13T16:32:04Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjozMjowNVrOIS38yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjozMjowNVrOIS38yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY2MTk2Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n          \n          \n            \n            It allows to change the cache group encryption key and re-encrypt existing data at runtime.", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556661962", "createdAt": "2021-01-13T16:32:05Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDA5OTIx", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567409921", "createdAt": "2021-01-13T16:36:44Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjozNjo0NFrOIS4KeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjozNjo0NFrOIS4KeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY2NTQ2NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n          \n          \n            \n            Rotation of the cache encryption key is required when the key is compromised or the crypto period (key validity period) is ended.", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556665465", "createdAt": "2021-01-13T16:36:44Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDExNzUz", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567411753", "createdAt": "2021-01-13T16:38:35Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjozODozNVrOIS4QMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjozODozNVrOIS4QMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY2NjkzMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n          \n          \n            \n            1. Rotate cache group key. This process adds a new encryption key for the specified cache group or groups on each server node and sets it to write new data.", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556666931", "createdAt": "2021-01-13T16:38:35Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n+\n+The process of changing the cache encryption key includes two sequential stages:\n+\n+1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDEzNDQ5", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567413449", "createdAt": "2021-01-13T16:40:23Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0MDoyM1rOIS4Vsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0MDoyM1rOIS4Vsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY2ODMzOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The second stage can take a long time. It depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n          \n          \n            \n            The second stage can take a while. It depends on the amount of existing data. During this period, the old key is kept to read the archived data.", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556668339", "createdAt": "2021-01-13T16:40:23Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n+\n+The process of changing the cache encryption key includes two sequential stages:\n+\n+1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time. It depends on the amount of existing data. During this period the old key will be kept to read the archived data.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDE0NjM5", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567414639", "createdAt": "2021-01-13T16:41:37Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0MTozN1rOIS4ZZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0MTozN1rOIS4ZZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY2OTI4Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero. The identifier of the new key increases with each rotation.\n          \n          \n            \n            To understand what key the data is encrypted with, each encryption key has an _identifier_. By default, it is equal to zero. The identifier value of the new key increases with each new rotation.", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556669286", "createdAt": "2021-01-13T16:41:37Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n+\n+The process of changing the cache encryption key includes two sequential stages:\n+\n+1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time. It depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero. The identifier of the new key increases with each rotation.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDE1Nzkx", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567415791", "createdAt": "2021-01-13T16:42:46Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0Mjo0NlrOIS4c0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0Mjo0NlrOIS4c0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY3MDE2Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            == Changing the encryption key\n          \n          \n            \n            == Changing the Encryption Key", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556670162", "createdAt": "2021-01-13T16:42:46Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n+\n+The process of changing the cache encryption key includes two sequential stages:\n+\n+1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time. It depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero. The identifier of the new key increases with each rotation.\n+The encryption key (as well as encryption key ID) is the same for all nodes in a cache group.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for a cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDE2MTkz", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567416193", "createdAt": "2021-01-13T16:43:08Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0MzowOVrOIS4eFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0MzowOVrOIS4eFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY3MDQ4NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            === Command line tool\n          \n          \n            \n            === Command Line Tool", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556670484", "createdAt": "2021-01-13T16:43:09Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n+\n+The process of changing the cache encryption key includes two sequential stages:\n+\n+1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time. It depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero. The identifier of the new key increases with each rotation.\n+The encryption key (as well as encryption key ID) is the same for all nodes in a cache group.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for a cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDE3MDgz", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567417083", "createdAt": "2021-01-13T16:44:03Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0NDowM1rOIS4g2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0NDowM1rOIS4g2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY3MTE5NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            === From code\n          \n          \n            \n            === From Code", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556671194", "createdAt": "2021-01-13T16:44:03Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n+\n+The process of changing the cache encryption key includes two sequential stages:\n+\n+1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time. It depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero. The identifier of the new key increases with each rotation.\n+The encryption key (as well as encryption key ID) is the same for all nodes in a cache group.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for a cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite shipment includes `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands are used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the cache group encryption key identifiers.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 78}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDE5MzE5", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567419319", "createdAt": "2021-01-13T16:46:21Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0NjoyMVrOIS4nfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0NjoyMVrOIS4nfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY3Mjg5NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The cache encryption key change process can also be managed programmatically:\n          \n          \n            \n            The cache encryption key change process can also be managed directly in the code:", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556672894", "createdAt": "2021-01-13T16:46:21Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n+\n+The process of changing the cache encryption key includes two sequential stages:\n+\n+1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time. It depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero. The identifier of the new key increases with each rotation.\n+The encryption key (as well as encryption key ID) is the same for all nodes in a cache group.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for a cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite shipment includes `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands are used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the cache group encryption key identifiers.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can also be managed programmatically:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 80}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDE5NjA0", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567419604", "createdAt": "2021-01-13T16:46:37Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0NjozN1rOIS4oSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0NjozN1rOIS4oSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY3MzA5OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            == Managing re-encryption\n          \n          \n            \n            == Managing Re-encryption", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556673099", "createdAt": "2021-01-13T16:46:37Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n+\n+The process of changing the cache encryption key includes two sequential stages:\n+\n+1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time. It depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero. The identifier of the new key increases with each rotation.\n+The encryption key (as well as encryption key ID) is the same for all nodes in a cache group.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for a cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite shipment includes `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands are used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the cache group encryption key identifiers.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can also be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing re-encryption", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 92}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDIwMDk1", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567420095", "createdAt": "2021-01-13T16:47:08Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0NzowOFrOIS4pww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0NzowOFrOIS4pww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY3MzQ3NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n          \n          \n            \n            Re-encrypting existing data can take a while. This is a fault-tolerant operation that automatically continues after a node restart.", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556673475", "createdAt": "2021-01-13T16:47:08Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n+\n+The process of changing the cache encryption key includes two sequential stages:\n+\n+1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time. It depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero. The identifier of the new key increases with each rotation.\n+The encryption key (as well as encryption key ID) is the same for all nodes in a cache group.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for a cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite shipment includes `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands are used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the cache group encryption key identifiers.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can also be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing re-encryption\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 94}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDIxMTI2", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567421126", "createdAt": "2021-01-13T16:48:13Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0ODoxM1rOIS4s5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0ODoxM1rOIS4s5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY3NDI3OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is part of `DatastorageConfiguration`.\n          \n          \n            \n            Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is a part of `DatastorageConfiguration`.", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556674278", "createdAt": "2021-01-13T16:48:13Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n+\n+The process of changing the cache encryption key includes two sequential stages:\n+\n+1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time. It depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero. The identifier of the new key increases with each rotation.\n+The encryption key (as well as encryption key ID) is the same for all nodes in a cache group.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for a cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite shipment includes `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands are used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the cache group encryption key identifiers.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can also be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing re-encryption\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n+The previous encryption key is automatically removed when all local partitions are encrypted with the new key, and the last link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] segment, which may contain entries encrypted with the previous key, is removed from disk.\n+\n+NOTE: Re-encryption uses link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] for physical recovery and may affect performance of cache operations.\n+\n+There are several options to manage the performance impact of re-encryption:\n+\n+* Limit the re-encryption rate using a configuration parameter or CLI at runtime.\n+* Temporarily suspend re-encryption using CLI command.\n+\n+Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is part of `DatastorageConfiguration`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 104}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDIyMDMw", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567422030", "createdAt": "2021-01-13T16:49:14Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0OToxNFrOIS4vmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0OToxNFrOIS4vmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY3NDk3MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            === Using XML configuration to limit the re-encryption rate\n          \n          \n            \n            === Using XML Configuration to Limit the Re-encryption Rate", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556674971", "createdAt": "2021-01-13T16:49:14Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n+\n+The process of changing the cache encryption key includes two sequential stages:\n+\n+1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time. It depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero. The identifier of the new key increases with each rotation.\n+The encryption key (as well as encryption key ID) is the same for all nodes in a cache group.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for a cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite shipment includes `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands are used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the cache group encryption key identifiers.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can also be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing re-encryption\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n+The previous encryption key is automatically removed when all local partitions are encrypted with the new key, and the last link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] segment, which may contain entries encrypted with the previous key, is removed from disk.\n+\n+NOTE: Re-encryption uses link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] for physical recovery and may affect performance of cache operations.\n+\n+There are several options to manage the performance impact of re-encryption:\n+\n+* Limit the re-encryption rate using a configuration parameter or CLI at runtime.\n+* Temporarily suspend re-encryption using CLI command.\n+\n+Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is part of `DatastorageConfiguration`.\n+[cols=\"1,1,1\",opts=\"header\"]\n+|===\n+|Property | Default value | Description\n+|reencryptionRateLimit | 0 (unlimited) | Re-encryption rate limit in megabytes per second.\n+|reencryptionBatchSize | 100 | The number of pages scanned during re-encryption under checkpoint lock.\n+|===\n+\n+=== Using XML configuration to limit the re-encryption rate", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 112}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDIyNDAx", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567422401", "createdAt": "2021-01-13T16:49:38Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0OTozOFrOIS4woA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo0OTozOFrOIS4woA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY3NTIzMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            === Using CLI to control re-encryption process\n          \n          \n            \n            === Using CLI to Control Re-encryption Process", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556675232", "createdAt": "2021-01-13T16:49:38Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n+\n+The process of changing the cache encryption key includes two sequential stages:\n+\n+1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time. It depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero. The identifier of the new key increases with each rotation.\n+The encryption key (as well as encryption key ID) is the same for all nodes in a cache group.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for a cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite shipment includes `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands are used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the cache group encryption key identifiers.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can also be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing re-encryption\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n+The previous encryption key is automatically removed when all local partitions are encrypted with the new key, and the last link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] segment, which may contain entries encrypted with the previous key, is removed from disk.\n+\n+NOTE: Re-encryption uses link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] for physical recovery and may affect performance of cache operations.\n+\n+There are several options to manage the performance impact of re-encryption:\n+\n+* Limit the re-encryption rate using a configuration parameter or CLI at runtime.\n+* Temporarily suspend re-encryption using CLI command.\n+\n+Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is part of `DatastorageConfiguration`.\n+[cols=\"1,1,1\",opts=\"header\"]\n+|===\n+|Property | Default value | Description\n+|reencryptionRateLimit | 0 (unlimited) | Re-encryption rate limit in megabytes per second.\n+|reencryptionBatchSize | 100 | The number of pages scanned during re-encryption under checkpoint lock.\n+|===\n+\n+=== Using XML configuration to limit the re-encryption rate\n+[source, xml]\n+----\n+include::code-snippets/xml/tde.xml[tags=ignite-config;!discovery;!encryption;!cache;!discovery, indent=0]\n+----\n+\n+=== Using CLI to control re-encryption process", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 118}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDI0NDgx", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567424481", "createdAt": "2021-01-13T16:51:48Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo1MTo0OFrOIS42kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo1MTo0OFrOIS42kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY3Njc1NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            NOTE: After the node restarts, the suspended background re-encryption will be continued automatically, and the rate limit will be set to 'unlimited' (by default), or taken from the local XML configuration (if any).\n          \n          \n            \n            NOTE: After the node restarts, the suspended background re-encryption is continued automatically, and the rate limit is set to 'unlimited' (by default), or taken from the local XML configuration (if any).", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556676755", "createdAt": "2021-01-13T16:51:48Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n+\n+The process of changing the cache encryption key includes two sequential stages:\n+\n+1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time. It depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero. The identifier of the new key increases with each rotation.\n+The encryption key (as well as encryption key ID) is the same for all nodes in a cache group.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for a cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite shipment includes `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands are used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the cache group encryption key identifiers.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can also be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing re-encryption\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n+The previous encryption key is automatically removed when all local partitions are encrypted with the new key, and the last link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] segment, which may contain entries encrypted with the previous key, is removed from disk.\n+\n+NOTE: Re-encryption uses link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] for physical recovery and may affect performance of cache operations.\n+\n+There are several options to manage the performance impact of re-encryption:\n+\n+* Limit the re-encryption rate using a configuration parameter or CLI at runtime.\n+* Temporarily suspend re-encryption using CLI command.\n+\n+Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is part of `DatastorageConfiguration`.\n+[cols=\"1,1,1\",opts=\"header\"]\n+|===\n+|Property | Default value | Description\n+|reencryptionRateLimit | 0 (unlimited) | Re-encryption rate limit in megabytes per second.\n+|reencryptionBatchSize | 100 | The number of pages scanned during re-encryption under checkpoint lock.\n+|===\n+\n+=== Using XML configuration to limit the re-encryption rate\n+[source, xml]\n+----\n+include::code-snippets/xml/tde.xml[tags=ignite-config;!discovery;!encryption;!cache;!discovery, indent=0]\n+----\n+\n+=== Using CLI to control re-encryption process\n+\n+The `control.sh|bat` script provides the ability to change the re-encryption rate as well as suspend and resume background re-encryption at runtime.\n+\n+NOTE: After the node restarts, the suspended background re-encryption will be continued automatically, and the rate limit will be set to 'unlimited' (by default), or taken from the local XML configuration (if any).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 122}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDI0OTQw", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567424940", "createdAt": "2021-01-13T16:52:19Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo1MjoxOVrOIS43_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxNjo1MjoxOVrOIS43_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjY3NzExOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The re-encryption status can also be obtained using JMX metrics described in the link:monitoring-metrics/new-metrics#cache-groups[Cache group metrics] section.\n          \n          \n            \n            The re-encryption status can be also obtained using JMX metrics described in the link:monitoring-metrics/new-metrics#cache-groups[Cache group metrics] section.", "url": "https://github.com/apache/ignite/pull/8446#discussion_r556677119", "createdAt": "2021-01-13T16:52:19Z", "author": {"login": "Nikita-tech-writer"}, "path": "docs/_docs/security/cache-encryption-key-rotation.adoc", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+= Cache encryption key rotation\n+\n+== Overview\n+\n+Cache group encryption key is used to encrypt cache data on disk.\n+When a user creates a new encrypted cache, a new encryption key is generated and propagated to all server nodes in the cluster. So, each node for the same cache group has the same cache encryption key.\n+See link:security/tde[Transparent Data Encryption] to learn more.\n+\n+Ignite 2.10 introduces a feature for changing the cache encryption key.\n+It allows users to change the cache group encryption key and re-encrypt existing data at runtime.\n+\n+Rotation of the cache encryption key is required if this key has been compromised or if the crypto period (key validity period) has ended.\n+\n+The process of changing the cache encryption key includes two sequential stages:\n+\n+1. Rotate cache group key. This process adds a new encryption key for the specified cache group(s) on each server node and sets it to write new data.\n+\n+    Node join during this stage is prohibited and will be rejected.\n+\n+2. Re-encrypt existing (archived) cache data with the new encryption key.\n+\n+The second stage can take a long time. It depends on the amount of existing data. During this period the old key will be kept to read the archived data.\n+To understand what key the data is encrypted with, each encryption key has an _identifier_. By default it is equal to zero. The identifier of the new key increases with each rotation.\n+The encryption key (as well as encryption key ID) is the same for all nodes in a cache group.\n+\n+NOTE: Secondary rotation of the cache encryption key is possible only after a complete change of the encryption key for a cache group (both stages).\n+\n+== Prerequisites\n+\n+The cluster should be active.\n+\n+== Changing the encryption key\n+\n+Ignite provides the ability to change the cache encryption key using the following interfaces:\n+\n+- link:#command-line-tool[command line tool]\n+- link:#jmx[JMX]\n+- link:#from-code[from code]\n+\n+=== Command line tool\n+\n+Ignite shipment includes `control.sh|bat` script, located in the `$IGNITE_HOME/bin` folder, that acts as a tool to manage the\n+cache encryption key change process from the command line. The following commands are used with `control.sh|bat`:\n+\n+[source,shell]\n+----\n+# View the cache group encryption key identifiers.\n+control.sh|bat --encryption cache_key_ids cacheGroupName\n+\n+# Change the cache encryption key.\n+control.sh|bat --encryption change_cache_key cacheGroupName\n+----\n+\n+=== JMX\n+\n+You can also change the cache encryption key via the `EncryptionMXBean` interface:\n+\n+[cols=\"1,1\",opts=\"header\"]\n+|===\n+|Method | Description\n+|changeCacheGroupKey(String cacheOrGrpName) | Starts cache encryption key change process.\n+|===\n+\n+=== From code\n+\n+The cache encryption key change process can also be managed programmatically:\n+\n+[tabs]\n+--\n+tab:Java[]\n+\n+[source, java]\n+----\n+include::{javaCodeDir}/TDE.java[tags=cache-group-key-rotation, indent=0]\n+----\n+--\n+\n+== Managing re-encryption\n+\n+Re-encrypting existing data can take a long time. This is a fault-tolerant operation that automatically continues after a node restart.\n+The previous encryption key is automatically removed when all local partitions are encrypted with the new key, and the last link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] segment, which may contain entries encrypted with the previous key, is removed from disk.\n+\n+NOTE: Re-encryption uses link:persistence/native-persistence#write-ahead-log[Write-Ahead Log] for physical recovery and may affect performance of cache operations.\n+\n+There are several options to manage the performance impact of re-encryption:\n+\n+* Limit the re-encryption rate using a configuration parameter or CLI at runtime.\n+* Temporarily suspend re-encryption using CLI command.\n+\n+Ignite 2.10 introduces a new configuration section `EncryptionConfiguration`, that is part of `DatastorageConfiguration`.\n+[cols=\"1,1,1\",opts=\"header\"]\n+|===\n+|Property | Default value | Description\n+|reencryptionRateLimit | 0 (unlimited) | Re-encryption rate limit in megabytes per second.\n+|reencryptionBatchSize | 100 | The number of pages scanned during re-encryption under checkpoint lock.\n+|===\n+\n+=== Using XML configuration to limit the re-encryption rate\n+[source, xml]\n+----\n+include::code-snippets/xml/tde.xml[tags=ignite-config;!discovery;!encryption;!cache;!discovery, indent=0]\n+----\n+\n+=== Using CLI to control re-encryption process\n+\n+The `control.sh|bat` script provides the ability to change the re-encryption rate as well as suspend and resume background re-encryption at runtime.\n+\n+NOTE: After the node restarts, the suspended background re-encryption will be continued automatically, and the rate limit will be set to 'unlimited' (by default), or taken from the local XML configuration (if any).\n+\n+[source,shell]\n+----\n+# View the cache group re-encryption status.\n+control.sh|bat --encryption reencryption_status cacheGroupName\n+\n+# Suspend re-encryption of the cache group.\n+control.sh|bat --encryption suspend_reencryption cacheGroupName\n+\n+# Resume (suspended) re-encryption of the cache group.\n+control.sh|bat --encryption resume_reencryption cacheGroupName\n+\n+# View the re-encryption rate limit.\n+control.sh|bat --encryption reencryption_rate_limit\n+\n+# Set the re-encryption rate limit to 2.5 MB/s.\n+control.sh|bat --encryption reencryption_rate_limit 2.5\n+\n+# Set re-encryption rate to 'unlimited' ('0').\n+control.sh|bat --encryption reencryption_rate_limit 0\n+----\n+\n+The re-encryption status can also be obtained using JMX metrics described in the link:monitoring-metrics/new-metrics#cache-groups[Cache group metrics] section.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "originalPosition": 145}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDI1NjIz", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-567425623", "createdAt": "2021-01-13T16:53:01Z", "commit": {"oid": "72ab0a280390e9ff2a20421596f4d7f0415972c2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ad43d7a9964b22fae41ae6fa2ba34fdde1ad80f", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/8ad43d7a9964b22fae41ae6fa2ba34fdde1ad80f", "committedDate": "2021-01-13T19:02:47Z", "message": "IGNITE-13659 Apply suggestions from code review\n\nCo-authored-by: Nikita Safonov <73828260+Nikita-tech-writer@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1431beae1f185b86af222dbfe3a6ad39348c697e", "author": {"user": {"login": "xtern", "name": "Pavel Pereslegin"}}, "url": "https://github.com/apache/ignite/commit/1431beae1f185b86af222dbfe3a6ad39348c697e", "committedDate": "2021-01-13T19:22:47Z", "message": "IGNITE-13659 Update docs/_docs/security/cache-encryption-key-rotation.adoc\n\nCo-authored-by: Nikita Safonov <73828260+Nikita-tech-writer@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwNDU4ODg2", "url": "https://github.com/apache/ignite/pull/8446#pullrequestreview-570458886", "createdAt": "2021-01-18T12:47:39Z", "commit": {"oid": "1431beae1f185b86af222dbfe3a6ad39348c697e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2941, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}