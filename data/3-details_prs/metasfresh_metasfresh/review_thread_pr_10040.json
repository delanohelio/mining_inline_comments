{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1NDkxMTUw", "number": 10040, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNjozMDowOFrOEpVO9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNjo0MDoxNFrOEpVY1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNzc0OTY2OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/attribute/HUAttributeConstants.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNjozMDowOFrOHa8J0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNzoxODowOVrOHa9dSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxMDU3Ng==", "bodyText": "introduce IHUAttributesBL.isAutomaticallySetLotNumber() and isAutomaticallySetBestBeforeDate().\navoid having public sysconfig names.", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498010576", "createdAt": "2020-10-01T06:30:08Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/attribute/HUAttributeConstants.java", "diffHunk": "@@ -87,4 +77,7 @@ public static String sqlBestBeforeDate(final String huIdColumnName)\n \t\tCheck.assumeNotEmpty(huIdColumnName, \"huIdColumnName is not empty\");\n \t\treturn \"\\\"de.metas.handlingunits\\\".huBestBeforeDate(\" + huIdColumnName + \")\";\n \t}\n+\n+\tpublic static final String SYSCONFIG_AutomaticallySetLotNumber = \"de.metas.handlingunits.attributes.AutomaticallySetLotNumber\";\n+\tpublic static final String SYSCONFIG_AutomaticallySetBestBeforeDate = \"de.metas.handlingunits.attributes.AutomaticallySetBestBeforeDate\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAzMTk0Ng==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498031946", "createdAt": "2020-10-01T07:18:09Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/attribute/HUAttributeConstants.java", "diffHunk": "@@ -87,4 +77,7 @@ public static String sqlBestBeforeDate(final String huIdColumnName)\n \t\tCheck.assumeNotEmpty(huIdColumnName, \"huIdColumnName is not empty\");\n \t\treturn \"\\\"de.metas.handlingunits\\\".huBestBeforeDate(\" + huIdColumnName + \")\";\n \t}\n+\n+\tpublic static final String SYSCONFIG_AutomaticallySetLotNumber = \"de.metas.handlingunits.attributes.AutomaticallySetLotNumber\";\n+\tpublic static final String SYSCONFIG_AutomaticallySetBestBeforeDate = \"de.metas.handlingunits.attributes.AutomaticallySetBestBeforeDate\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxMDU3Ng=="}, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNzc1NTAxOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/pporder/api/impl/AbstractPPOrderReceiptHUProducer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNjozMjoxOFrOHa8M-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNzoyNjowM1rOHa9tlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxMTM4NA==", "bodyText": "introduce a new method, e.g. updateAttributes(hu...) which calls both methods.", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498011384", "createdAt": "2020-10-01T06:32:18Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/pporder/api/impl/AbstractPPOrderReceiptHUProducer.java", "diffHunk": "@@ -334,17 +338,8 @@ private void updateReceivedHUs(\n \t\t\t{\n \t\t\t\tfinal IAttributeStorage huAttributes = huAttributeStorageFactory.getAttributeStorage(hu);\n \n-\t\t\t\tif (lotNumber != null\n-\t\t\t\t\t\t&& huAttributes.hasAttribute(AttributeConstants.ATTR_LotNumber))\n-\t\t\t\t{\n-\t\t\t\t\thuAttributes.setValue(AttributeConstants.ATTR_LotNumber, lotNumber);\n-\t\t\t\t}\n-\n-\t\t\t\tif (bestBeforeDate != null\n-\t\t\t\t\t\t&& huAttributes.hasAttribute(AttributeConstants.ATTR_BestBeforeDate))\n-\t\t\t\t{\n-\t\t\t\t\thuAttributes.setValue(AttributeConstants.ATTR_BestBeforeDate, bestBeforeDate);\n-\t\t\t\t}\n+\t\t\t\tsetLotNumberAttribute(hu, huAttributes);\n+\t\t\t\tsetBestBeforeDateAttribute(huAttributes);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAzNjExNg==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498036116", "createdAt": "2020-10-01T07:26:03Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/pporder/api/impl/AbstractPPOrderReceiptHUProducer.java", "diffHunk": "@@ -334,17 +338,8 @@ private void updateReceivedHUs(\n \t\t\t{\n \t\t\t\tfinal IAttributeStorage huAttributes = huAttributeStorageFactory.getAttributeStorage(hu);\n \n-\t\t\t\tif (lotNumber != null\n-\t\t\t\t\t\t&& huAttributes.hasAttribute(AttributeConstants.ATTR_LotNumber))\n-\t\t\t\t{\n-\t\t\t\t\thuAttributes.setValue(AttributeConstants.ATTR_LotNumber, lotNumber);\n-\t\t\t\t}\n-\n-\t\t\t\tif (bestBeforeDate != null\n-\t\t\t\t\t\t&& huAttributes.hasAttribute(AttributeConstants.ATTR_BestBeforeDate))\n-\t\t\t\t{\n-\t\t\t\t\thuAttributes.setValue(AttributeConstants.ATTR_BestBeforeDate, bestBeforeDate);\n-\t\t\t\t}\n+\t\t\t\tsetLotNumberAttribute(hu, huAttributes);\n+\t\t\t\tsetBestBeforeDateAttribute(huAttributes);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxMTM4NA=="}, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 76}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNzc1NTU0OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/pporder/api/impl/AbstractPPOrderReceiptHUProducer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNjozMjozNFrOHa8NUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNzoyNjoyOFrOHa9ueg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxMTQ3NA==", "bodyText": "use IHUAttributesBL.isAuto....", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498011474", "createdAt": "2020-10-01T06:32:34Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/pporder/api/impl/AbstractPPOrderReceiptHUProducer.java", "diffHunk": "@@ -355,6 +350,33 @@ private void updateReceivedHUs(\n \t\tsetAssignedHUs(hus);\n \t}\n \n+\tprivate void setLotNumberAttribute(final I_M_HU hu, final IAttributeStorage huAttributes)\n+\t{\n+\t\tfinal String lotNumberToSet;\n+\t\tif (Services.get(ISysConfigBL.class).getBooleanValue(HUAttributeConstants.SYSCONFIG_AutomaticallySetLotNumber, false))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAzNjM0Ng==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498036346", "createdAt": "2020-10-01T07:26:28Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/pporder/api/impl/AbstractPPOrderReceiptHUProducer.java", "diffHunk": "@@ -355,6 +350,33 @@ private void updateReceivedHUs(\n \t\tsetAssignedHUs(hus);\n \t}\n \n+\tprivate void setLotNumberAttribute(final I_M_HU hu, final IAttributeStorage huAttributes)\n+\t{\n+\t\tfinal String lotNumberToSet;\n+\t\tif (Services.get(ISysConfigBL.class).getBooleanValue(HUAttributeConstants.SYSCONFIG_AutomaticallySetLotNumber, false))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxMTQ3NA=="}, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 87}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNzc1OTc0OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/pporder/api/impl/AbstractPPOrderReceiptHUProducer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNjozNDoyNlrOHa8Pvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNzoyNzoxMlrOHa9v-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxMjA5NQ==", "bodyText": "minor: move this as first check", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498012095", "createdAt": "2020-10-01T06:34:26Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/pporder/api/impl/AbstractPPOrderReceiptHUProducer.java", "diffHunk": "@@ -355,6 +350,33 @@ private void updateReceivedHUs(\n \t\tsetAssignedHUs(hus);\n \t}\n \n+\tprivate void setLotNumberAttribute(final I_M_HU hu, final IAttributeStorage huAttributes)\n+\t{\n+\t\tfinal String lotNumberToSet;\n+\t\tif (Services.get(ISysConfigBL.class).getBooleanValue(HUAttributeConstants.SYSCONFIG_AutomaticallySetLotNumber, false))\n+\t\t{\n+\t\t\tlotNumberToSet = CoalesceUtil.coalesce(lotNumber, hu.getValue());\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tlotNumberToSet = lotNumber;\n+\t\t}\n+\n+\t\tif (huAttributes.hasAttribute(AttributeConstants.ATTR_LotNumber))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAzNjcyOA==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498036728", "createdAt": "2020-10-01T07:27:12Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/pporder/api/impl/AbstractPPOrderReceiptHUProducer.java", "diffHunk": "@@ -355,6 +350,33 @@ private void updateReceivedHUs(\n \t\tsetAssignedHUs(hus);\n \t}\n \n+\tprivate void setLotNumberAttribute(final I_M_HU hu, final IAttributeStorage huAttributes)\n+\t{\n+\t\tfinal String lotNumberToSet;\n+\t\tif (Services.get(ISysConfigBL.class).getBooleanValue(HUAttributeConstants.SYSCONFIG_AutomaticallySetLotNumber, false))\n+\t\t{\n+\t\t\tlotNumberToSet = CoalesceUtil.coalesce(lotNumber, hu.getValue());\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tlotNumberToSet = lotNumber;\n+\t\t}\n+\n+\t\tif (huAttributes.hasAttribute(AttributeConstants.ATTR_LotNumber))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxMjA5NQ=="}, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 96}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNzc2OTA1OnYy", "diffSide": "RIGHT", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/handlingunits/process/WEBUI_M_ReceiptSchedule_ReceiveCUs.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNjozNzo1NFrOHa8VGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNzozMDoyMVrOHa92gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxMzQ2Nw==", "bodyText": "introduce only one method which calls both", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498013467", "createdAt": "2020-10-01T06:37:54Z", "author": {"login": "teosarca"}, "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/handlingunits/process/WEBUI_M_ReceiptSchedule_ReceiveCUs.java", "diffHunk": "@@ -206,6 +205,10 @@ private I_M_HU createPlanningVHU(final I_M_ReceiptSchedule receiptSchedule)\n \t\t\tthrow new HUException(\"One and only one VHU was expected but we got: \" + hus);\n \t\t}\n \t\tfinal I_M_HU vhu = hus.get(0);\n+\n+\t\tsetAttributeBBD(vhu, receiptSchedule);\n+\t\tsetAttributeLotNumber(vhu);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 111}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAzODQwMQ==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498038401", "createdAt": "2020-10-01T07:30:21Z", "author": {"login": "TheBestPessimist"}, "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/handlingunits/process/WEBUI_M_ReceiptSchedule_ReceiveCUs.java", "diffHunk": "@@ -206,6 +205,10 @@ private I_M_HU createPlanningVHU(final I_M_ReceiptSchedule receiptSchedule)\n \t\t\tthrow new HUException(\"One and only one VHU was expected but we got: \" + hus);\n \t\t}\n \t\tfinal I_M_HU vhu = hus.get(0);\n+\n+\t\tsetAttributeBBD(vhu, receiptSchedule);\n+\t\tsetAttributeLotNumber(vhu);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxMzQ2Nw=="}, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 111}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNzc2OTg0OnYy", "diffSide": "RIGHT", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/handlingunits/process/WEBUI_M_ReceiptSchedule_ReceiveHUs_Base.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNjozODoyMFrOHa8VqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNzozMDoyN1rOHa92sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxMzYwOQ==", "bodyText": "introduce one method which calls both", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498013609", "createdAt": "2020-10-01T06:38:20Z", "author": {"login": "teosarca"}, "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/handlingunits/process/WEBUI_M_ReceiptSchedule_ReceiveHUs_Base.java", "diffHunk": "@@ -148,6 +149,11 @@ protected final String doIt() throws Exception\n \t\t//\n \t\t// Generate the HUs\n \t\tfinal List<I_M_HU> hus = huGenerator.generateWithinOwnTransaction();\n+\n+\t\thus.forEach(hu -> {\n+\t\t\tsetAttributeBBD(hu, receiptSchedule);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAzODQ0OQ==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498038449", "createdAt": "2020-10-01T07:30:27Z", "author": {"login": "TheBestPessimist"}, "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/handlingunits/process/WEBUI_M_ReceiptSchedule_ReceiveHUs_Base.java", "diffHunk": "@@ -148,6 +149,11 @@ protected final String doIt() throws Exception\n \t\t//\n \t\t// Generate the HUs\n \t\tfinal List<I_M_HU> hus = huGenerator.generateWithinOwnTransaction();\n+\n+\t\thus.forEach(hu -> {\n+\t\t\tsetAttributeBBD(hu, receiptSchedule);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxMzYwOQ=="}, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNzc3MTc0OnYy", "diffSide": "RIGHT", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/pporder/process/WEBUI_PP_Order_Receipt.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNjozOTowNlrOHa8W0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNzozNTozNFrOHa-A4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxMzkwNw==", "bodyText": "use IHUAttributeBL.isAuto...", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498013907", "createdAt": "2020-10-01T06:39:06Z", "author": {"login": "teosarca"}, "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/pporder/process/WEBUI_PP_Order_Receipt.java", "diffHunk": "@@ -228,7 +232,32 @@ protected void postProcess(boolean success)\n \t\tgetViewsRepo().notifyRecordChanged(I_PP_Order.Table_Name, ppOrderLinesView.getPpOrderId().getRepoId());\n \t}\n \n-\tprivate final IPPOrderReceiptHUProducer newReceiptCandidatesProducer()\n+\t@Nullable\n+\tLocalDate computeBestBeforeDate()\n+\t{\n+\t\tif (sysConfigBL.getBooleanValue(HUAttributeConstants.SYSCONFIG_AutomaticallySetBestBeforeDate, false))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 155}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA0MTA1Ng==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498041056", "createdAt": "2020-10-01T07:35:34Z", "author": {"login": "TheBestPessimist"}, "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/pporder/process/WEBUI_PP_Order_Receipt.java", "diffHunk": "@@ -228,7 +232,32 @@ protected void postProcess(boolean success)\n \t\tgetViewsRepo().notifyRecordChanged(I_PP_Order.Table_Name, ppOrderLinesView.getPpOrderId().getRepoId());\n \t}\n \n-\tprivate final IPPOrderReceiptHUProducer newReceiptCandidatesProducer()\n+\t@Nullable\n+\tLocalDate computeBestBeforeDate()\n+\t{\n+\t\tif (sysConfigBL.getBooleanValue(HUAttributeConstants.SYSCONFIG_AutomaticallySetBestBeforeDate, false))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxMzkwNw=="}, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 155}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNzc3NDk0OnYy", "diffSide": "RIGHT", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/pporder/process/WEBUI_PP_Order_Receipt.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNjo0MDoxNFrOHa8YpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNzozNzo0NVrOHa-FLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxNDM3Mg==", "bodyText": "eager make this check", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498014372", "createdAt": "2020-10-01T06:40:14Z", "author": {"login": "teosarca"}, "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/pporder/process/WEBUI_PP_Order_Receipt.java", "diffHunk": "@@ -228,7 +232,32 @@ protected void postProcess(boolean success)\n \t\tgetViewsRepo().notifyRecordChanged(I_PP_Order.Table_Name, ppOrderLinesView.getPpOrderId().getRepoId());\n \t}\n \n-\tprivate final IPPOrderReceiptHUProducer newReceiptCandidatesProducer()\n+\t@Nullable\n+\tLocalDate computeBestBeforeDate()\n+\t{\n+\t\tif (sysConfigBL.getBooleanValue(HUAttributeConstants.SYSCONFIG_AutomaticallySetBestBeforeDate, false))\n+\t\t{\n+\t\t\tfinal PPOrderLineRow row = getSingleSelectedRow();\n+\t\t\tfinal I_PP_Order ppOrderPO = huPPOrderBL.getById(row.getOrderId());\n+\t\t\tfinal LocalDate datePromised = TimeUtil.asLocalDate(ppOrderPO.getDatePromised());\n+\n+\t\t\tfinal ProductId productId = row.getProductId();\n+\t\t\tfinal int guaranteeDaysMin = productDAO.getProductGuaranteeDaysMinFallbackProductCategory(productId);\n+\n+\t\t\tif (guaranteeDaysMin <= 0)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 164}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA0MjE1Nw==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10040#discussion_r498042157", "createdAt": "2020-10-01T07:37:45Z", "author": {"login": "TheBestPessimist"}, "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/pporder/process/WEBUI_PP_Order_Receipt.java", "diffHunk": "@@ -228,7 +232,32 @@ protected void postProcess(boolean success)\n \t\tgetViewsRepo().notifyRecordChanged(I_PP_Order.Table_Name, ppOrderLinesView.getPpOrderId().getRepoId());\n \t}\n \n-\tprivate final IPPOrderReceiptHUProducer newReceiptCandidatesProducer()\n+\t@Nullable\n+\tLocalDate computeBestBeforeDate()\n+\t{\n+\t\tif (sysConfigBL.getBooleanValue(HUAttributeConstants.SYSCONFIG_AutomaticallySetBestBeforeDate, false))\n+\t\t{\n+\t\t\tfinal PPOrderLineRow row = getSingleSelectedRow();\n+\t\t\tfinal I_PP_Order ppOrderPO = huPPOrderBL.getById(row.getOrderId());\n+\t\t\tfinal LocalDate datePromised = TimeUtil.asLocalDate(ppOrderPO.getDatePromised());\n+\n+\t\t\tfinal ProductId productId = row.getProductId();\n+\t\t\tfinal int guaranteeDaysMin = productDAO.getProductGuaranteeDaysMinFallbackProductCategory(productId);\n+\n+\t\t\tif (guaranteeDaysMin <= 0)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAxNDM3Mg=="}, "originalCommit": {"oid": "c92d7f4eaaa36964ab9f252097c197d1e633dc1c"}, "originalPosition": 164}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1204, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}