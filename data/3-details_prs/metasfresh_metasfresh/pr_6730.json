{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMDAyNTM1", "number": 6730, "title": "fix NPE in CustomerTradeMarginPricingRule", "bodyText": "", "createdAt": "2020-05-26T06:04:06Z", "url": "https://github.com/metasfresh/metasfresh/pull/6730", "merged": true, "mergeCommit": {"oid": "3656c7416adc5760d48fc989f61f2ebd9e6b8440"}, "closed": true, "closedAt": "2020-05-26T08:43:57Z", "author": {"login": "metas-ts"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABck-Tf3AH2gAyNDIzMDAyNTM1OmY4MWVlMmI5M2EwYWY1ZTg1ZjFmYzA0ZmQwYzAxMzAwMGMyYTIzYWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABck-XTBgFqTQxNzk5MjY2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f81ee2b93a0af5e85f1fc04fd0c013000c2a23af", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/f81ee2b93a0af5e85f1fc04fd0c013000c2a23af", "committedDate": "2020-05-26T06:02:46Z", "message": "fix NPE in CustomerTradeMarginPricingRule"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTkyMzQ2", "url": "https://github.com/metasfresh/metasfresh/pull/6730#pullrequestreview-417992346", "createdAt": "2020-05-26T06:06:06Z", "commit": {"oid": "f81ee2b93a0af5e85f1fc04fd0c013000c2a23af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjowNjowN1rOGaPwEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjowNjowN1rOGaPwEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE3NDIyNw==", "bodyText": "this is the actual NPE-fix", "url": "https://github.com/metasfresh/metasfresh/pull/6730#discussion_r430174227", "createdAt": "2020-05-26T06:06:07Z", "author": {"login": "metas-ts"}, "path": "backend/de.metas.contracts/src/main/java/de/metas/contracts/pricing/trade_margin/CustomerTradeMarginPricingRule.java", "diffHunk": "@@ -71,20 +72,25 @@\n \tprivate final MoneyService moneyService = SpringContextHolder.instance.getBean(MoneyService.class);\n \n \t@Override\n-\tpublic boolean applies(IPricingContext pricingCtx, IPricingResult result)\n+\tpublic boolean applies(@NonNull final IPricingContext pricingCtx, @NonNull final IPricingResult result)\n \t{\n+\t\tfinal ILoggable loggable = Loggables.withLogger(logger, Level.DEBUG);\n \t\tif (!result.isCalculated())\n \t\t{\n-\t\t\tLoggables.withLogger(logger, Level.DEBUG).addLog(\"Not applying due to missing calculated price!\");\n+\t\t\tloggable.addLog(\"applies - pricingResult.isCalculated=false -> return false\");\n \t\t\treturn false;\n \t\t}\n \t\tfinal BPartnerId customerId = pricingCtx.getBPartnerId();\n+\t\tif (customerId == null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f81ee2b93a0af5e85f1fc04fd0c013000c2a23af"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTkyNjY0", "url": "https://github.com/metasfresh/metasfresh/pull/6730#pullrequestreview-417992664", "createdAt": "2020-05-26T06:06:55Z", "commit": {"oid": "f81ee2b93a0af5e85f1fc04fd0c013000c2a23af"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3452, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}