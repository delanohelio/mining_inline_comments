{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyODQ1OTA1", "number": 6558, "title": "Cash Journal: Doubled lines after complete and Payment link to wrong line/wrong cashbook", "bodyText": "#6547", "createdAt": "2020-05-04T09:46:43Z", "url": "https://github.com/metasfresh/metasfresh/pull/6558", "merged": true, "mergeCommit": {"oid": "9fe5c35c37107c0dab4c8390b1c55b68d8e16651"}, "closed": true, "closedAt": "2020-05-05T13:13:22Z", "author": {"login": "TheBestPessimist"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcd9x8lgBqjMyOTk0Mjk3NzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABceT3tDgFqTQwNTc2NTgwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1324d569b01cc74e40bf69718b0eea6b5fcb0251", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/1324d569b01cc74e40bf69718b0eea6b5fcb0251", "committedDate": "2020-05-04T11:25:42Z", "message": "Add callout for C_BankStatementLine.C_Invoice\n\nhttps://github.com/metasfresh/metasfresh/issues/6547"}, "afterCommit": {"oid": "0482e08b8599455e85a6a369062d5a52aa317749", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/0482e08b8599455e85a6a369062d5a52aa317749", "committedDate": "2020-05-04T11:28:24Z", "message": "Add callout for C_BankStatementLine.C_Invoice\n\nhttps://github.com/metasfresh/metasfresh/issues/6547"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cdca4cd0d407fd3d8644a7ac7d7b4dc47fede6d", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/6cdca4cd0d407fd3d8644a7ac7d7b4dc47fede6d", "committedDate": "2020-05-05T04:23:42Z", "message": "Update TRLs\n\nhttps://github.com/metasfresh/metasfresh/issues/6547"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08df37e52fcc5538e33f773e1d4c7525998cd4c2", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/08df37e52fcc5538e33f773e1d4c7525998cd4c2", "committedDate": "2020-05-05T04:23:42Z", "message": "Add validation rule for C_BankStatementLine.C_Invoice to filter invoices by bPartner\n\nhttps://github.com/metasfresh/metasfresh/issues/6547"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b794a32b8e3e9e3cbb62c8c31d7e9fb1089cabf1", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/b794a32b8e3e9e3cbb62c8c31d7e9fb1089cabf1", "committedDate": "2020-05-05T04:23:42Z", "message": "Misc fixes\n\nhttps://github.com/metasfresh/metasfresh/issues/6547"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57918e87129ffa35689e0fb664a7074b91693996", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/57918e87129ffa35689e0fb664a7074b91693996", "committedDate": "2020-05-05T04:23:42Z", "message": "Add Service for calculating Payment.TenderType by BPartnerBankAccountId\n\nhttps://github.com/metasfresh/metasfresh/issues/6547"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "076331287bf8704b342d193d8c1a1ffb3842511d", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/076331287bf8704b342d193d8c1a1ffb3842511d", "committedDate": "2020-05-05T04:23:43Z", "message": "Don't link Cash Payment with 2 BankStatementLines; use correct dateAcct when creating Payment from BankStatementLine\n\nhttps://github.com/metasfresh/metasfresh/issues/6547"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30bddae416dba8219f2a29891e3c071df40de5ce", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/30bddae416dba8219f2a29891e3c071df40de5ce", "committedDate": "2020-05-05T04:23:43Z", "message": "Add callout for C_BankStatementLine.C_Invoice\n\nhttps://github.com/metasfresh/metasfresh/issues/6547"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bee545ce91bdaa8c96f6a3882213f5727d035053", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/bee545ce91bdaa8c96f6a3882213f5727d035053", "committedDate": "2020-05-05T04:23:43Z", "message": "Update C_BankStatementLine.C_CUrrency_ID from C_Invoice as well\n\nhttps://github.com/metasfresh/metasfresh/issues/6547"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c5481e240a23028dc9fbd7755fcbd9abb44ec85", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/0c5481e240a23028dc9fbd7755fcbd9abb44ec85", "committedDate": "2020-05-05T04:23:43Z", "message": "Cleanup Cash Journal window\n\nhttps://github.com/metasfresh/metasfresh/issues/6547"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3ffa2ec8ab7a5ffd7a2b3054b8e69a91d2eaa263", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/3ffa2ec8ab7a5ffd7a2b3054b8e69a91d2eaa263", "committedDate": "2020-05-04T12:55:17Z", "message": "Cleanup Cash Journal window\n\nhttps://github.com/metasfresh/metasfresh/issues/6547"}, "afterCommit": {"oid": "0c5481e240a23028dc9fbd7755fcbd9abb44ec85", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/0c5481e240a23028dc9fbd7755fcbd9abb44ec85", "committedDate": "2020-05-05T04:23:43Z", "message": "Cleanup Cash Journal window\n\nhttps://github.com/metasfresh/metasfresh/issues/6547"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2df0306fe9e9ea65739af286c32038c8342421f4", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/2df0306fe9e9ea65739af286c32038c8342421f4", "committedDate": "2020-05-05T07:58:40Z", "message": "Carry on Invoice to Payment when Payment is created from BankStatementLine\n\nhttps://github.com/metasfresh/metasfresh/issues/6547"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37e99d23dc0382b0c2dcb538b8a3c5c62e8440bd", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/37e99d23dc0382b0c2dcb538b8a3c5c62e8440bd", "committedDate": "2020-05-05T10:04:17Z", "message": "Show debug info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a21eee11041d9cb278edafb65aef826374abcb7", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/3a21eee11041d9cb278edafb65aef826374abcb7", "committedDate": "2020-05-05T10:09:13Z", "message": "Revert \"Show debug info\"\n\nThis reverts commit 37e99d23"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4edc191663dba358114c59f54ea67dd995b5cc8", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/f4edc191663dba358114c59f54ea67dd995b5cc8", "committedDate": "2020-05-05T13:01:07Z", "message": "Update BankAccountId.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NzY1ODAz", "url": "https://github.com/metasfresh/metasfresh/pull/6558#pullrequestreview-405765803", "createdAt": "2020-05-05T13:04:43Z", "commit": {"oid": "f4edc191663dba358114c59f54ea67dd995b5cc8"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMzowNDo0NFrOGQoX4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMzowNDo0NFrOGQoX4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA5MTg3Mw==", "bodyText": "it's OK to follow the naming convention within this class, but otherwise please prefer a method name that descripbes what the method does, rather than when it's invoked.", "url": "https://github.com/metasfresh/metasfresh/pull/6558#discussion_r420091873", "createdAt": "2020-05-05T13:04:44Z", "author": {"login": "metas-ts"}, "path": "backend/de.metas.banking/de.metas.banking.base/src/main/java/de/metas/banking/callout/C_BankStatementLine.java", "diffHunk": "@@ -136,11 +115,24 @@ public void onLink_BankStatement_IDChangedResetAmounts(final I_C_BankStatementLi\n \t}\n \n \t@CalloutMethod(columnNames = I_C_BankStatementLine.COLUMNNAME_C_BP_BankAccountTo_ID)\n-\tpublic void onC_BP_BankAccountTo_IDChanged(final I_C_BankStatementLine bsl)\n+\tpublic void onC_BP_BankAccountTo_IDChanged(final @NonNull I_C_BankStatementLine bsl)\n \t{\n \t\tif (bsl.getC_BP_BankAccountTo_ID() <= 0)\n \t\t{\n \t\t\tbsl.setLink_BankStatementLine_ID(0);\n \t\t}\n \t}\n+\n+\t@CalloutMethod(columnNames = I_C_BankStatementLine.COLUMNNAME_C_Invoice_ID)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4edc191663dba358114c59f54ea67dd995b5cc8"}, "originalPosition": 136}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3519, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}