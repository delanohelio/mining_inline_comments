{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4MjM5OTQ0", "number": 7005, "title": "#7003 support for DefaultBillTo_Contact only on Sales invoice", "bodyText": "#7003", "createdAt": "2020-07-13T13:00:29Z", "url": "https://github.com/metasfresh/metasfresh/pull/7005", "merged": true, "mergeCommit": {"oid": "0cd8b27349f1383f939ecc5ca7ca36bea29241e3"}, "closed": true, "closedAt": "2020-07-13T15:12:06Z", "author": {"login": "metas-rc"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc0hBqxAH2gAyNDQ4MjM5OTQ0OmRhOTViMDBmYzY3ZDYwOWJjNTU3NDZkZjUwMTEwOWMwYjcyZjMwNTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0hxCBAH2gAyNDQ4MjM5OTQ0OjE4ODM3YWZmODA3MjUwYzhkMjBiNzYyZmViNWUyNGFkMjYzODFlZWQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "da95b00fc67d609bc55746df501109c0b72f3058", "author": {"user": {"login": "metas-rc", "name": "Ruxandra Craciunescu"}}, "url": "https://github.com/metasfresh/metasfresh/commit/da95b00fc67d609bc55746df501109c0b72f3058", "committedDate": "2020-07-13T12:58:50Z", "message": "#7003 support for DefaultBillTo_Contact only on Sales invoice\n\nhttps://github.com/metasfresh/metasfresh/issues/7003"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3MjU2Mjgx", "url": "https://github.com/metasfresh/metasfresh/pull/7005#pullrequestreview-447256281", "createdAt": "2020-07-13T13:36:06Z", "commit": {"oid": "da95b00fc67d609bc55746df501109c0b72f3058"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3MjYzNDU2", "url": "https://github.com/metasfresh/metasfresh/pull/7005#pullrequestreview-447263456", "createdAt": "2020-07-13T13:44:11Z", "commit": {"oid": "da95b00fc67d609bc55746df501109c0b72f3058"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMzo0NDoxMVrOGwpLzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMzo0NDoxMVrOGwpLzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzY1OTU5Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            UPDATE AD_Val_Rule SET Code='AD_User.C_Bpartner_ID = @C_BPartner_ID/-1@\n          \n          \n            \n            -- fail, until the AD_Val_Rule exists (created by backend/de.metas.adempiere.adempiere/migration/src/main/sql/postgresql/system/10-de.metas.adempiere/5563310_sys_gh7003_Only_Default_BillToContact_Valrule.sql)\n          \n          \n            \n            select db_fail_unless_row_count_greater_zero('select 1 from AD_Val_Rule WHERE AD_Val_Rule_ID=540511');\n          \n          \n            \n            \n          \n          \n            \n            UPDATE AD_Val_Rule SET Code='AD_User.C_Bpartner_ID = @C_BPartner_ID/-1@", "url": "https://github.com/metasfresh/metasfresh/pull/7005#discussion_r453659596", "createdAt": "2020-07-13T13:44:11Z", "author": {"login": "metas-ts"}, "path": "backend/de.metas.adempiere.adempiere/migration/src/main/sql/postgresql/system/10-de.metas.adempiere/5563310_sys_gh7003_Only_Default_BillToContact_Valrule.sql", "diffHunk": "@@ -0,0 +1,67 @@\n+\n+-- 2020-07-09T17:50:46.801Z\n+-- URL zum Konzept\n+INSERT INTO AD_Val_Rule (AD_Client_ID,AD_Org_ID,AD_Val_Rule_ID,Code,Created,CreatedBy,EntityType,IsActive,Name,Type,Updated,UpdatedBy) VALUES\n+ (0,0,540511,'AD_User.C_Bpartner_ID = @C_BPartner_ID/-1@\n+AND AD_User.IsBillToContact_Default = ''Y''',TO_TIMESTAMP('2020-07-09 20:50:46','YYYY-MM-DD HH24:MI:SS'),100,'D','Y',\n+'AD_User_BillToDefault of Context  Partner','S',TO_TIMESTAMP('2020-07-09 20:50:46','YYYY-MM-DD HH24:MI:SS'),100)\n+;\n+\n+\n+-- 2020-07-09T17:51:49.277Z\n+-- URL zum Konzept\n+UPDATE AD_Val_Rule SET Name='AD_User_BillToDefault of Context Partner',Updated=TO_TIMESTAMP('2020-07-09 20:51:49','YYYY-MM-DD HH24:MI:SS'),UpdatedBy=100 WHERE AD_Val_Rule_ID=540511\n+;\n+\n+-- 2020-07-09T17:52:19.262Z\n+-- URL zum Konzept\n+UPDATE AD_Val_Rule SET Code='AD_User.C_Bpartner_ID = @C_BPartner_ID/-1@\n+AND AD_User.IsBillToContact_Default = ''Y''',Updated=TO_TIMESTAMP('2020-07-09 20:52:19','YYYY-MM-DD HH24:MI:SS'),UpdatedBy=100 WHERE AD_Val_Rule_ID=540511\n+;\n+\n+\n+\n+-- 2020-07-09T18:04:42.665Z\n+-- URL zum Konzept\n+UPDATE AD_Val_Rule SET Code='AD_User.C_Bpartner_ID = @C_BPartner_ID/-1@\n+AND AD_User.IsBillToContact_Default = ''Y''\n+AND AD_User.C_BPartner_ID IS NOT NULL',Updated=TO_TIMESTAMP('2020-07-09 21:04:42','YYYY-MM-DD HH24:MI:SS'),UpdatedBy=100 WHERE AD_Val_Rule_ID=540511\n+;\n+\n+-- 2020-07-09T18:05:32.191Z\n+-- URL zum Konzept\n+UPDATE AD_Val_Rule SET Code='AD_User.C_Bpartner_ID = @C_BPartner_ID/-1@\n+AND AD_User.IsBillToContact_Default = ''Y''\n+AND AD_User.C_BPartner_ID >0',Updated=TO_TIMESTAMP('2020-07-09 21:05:32','YYYY-MM-DD HH24:MI:SS'),UpdatedBy=100 WHERE AD_Val_Rule_ID=540511\n+;\n+\n+\n+\n+-- 2020-07-09T18:19:00.185Z\n+-- URL zum Konzept\n+UPDATE AD_Val_Rule SET Code='AD_User.C_Bpartner_ID = @C_BPartner_ID/-1@", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da95b00fc67d609bc55746df501109c0b72f3058"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e309fc88a0fa808c6f7982b3832067fb42ee334", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/2e309fc88a0fa808c6f7982b3832067fb42ee334", "committedDate": "2020-07-13T13:45:07Z", "message": "Update backend/de.metas.adempiere.adempiere/migration/src/main/sql/postgresql/system/10-de.metas.adempiere/5563310_sys_gh7003_Only_Default_BillToContact_Valrule.sql\r\n\r\n#7003"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18837aff807250c8d20b762feb5e24ad26381eed", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/18837aff807250c8d20b762feb5e24ad26381eed", "committedDate": "2020-07-13T13:50:34Z", "message": "sorry, had mixed up some repo & filenames\n\nRevert \"Update backend/de.metas.adempiere.adempiere/migration/src/main/sql/postgresql/system/10-de.metas.adempiere/5563310_sys_gh7003_Only_Default_BillToContact_Valrule.sql\"\n\nThis reverts commit 2e309fc8"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3326, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}