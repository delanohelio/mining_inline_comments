{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4MjYzNDk0", "number": 10319, "title": "#10318 Use last archive when no other info for creating the report", "bodyText": "#10318", "createdAt": "2020-11-26T20:53:36Z", "url": "https://github.com/metasfresh/metasfresh/pull/10319", "merged": true, "mergeCommit": {"oid": "4f7410f67610ffa92620c54c2f1d0fd5d5c2296e"}, "closed": true, "closedAt": "2020-11-27T08:58:10Z", "author": {"login": "metas-rc"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgZU0tgH2gAyNTI4MjYzNDk0Ojg0ZTVmMTQwZjM0YTU1NTI3ZTNiOTRmMDU2NjEyMzdiNzhmY2IwOWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgjqOygFqTUzOTgwMzQyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "84e5f140f34a55527e3b94f05661237b78fcb09e", "author": {"user": {"login": "metas-rc", "name": "Ruxandra Craciunescu"}}, "url": "https://github.com/metasfresh/metasfresh/commit/84e5f140f34a55527e3b94f05661237b78fcb09e", "committedDate": "2020-11-26T20:53:11Z", "message": "#10318 Use last archive when no other info for creating the report\n\nhttps://github.com/metasfresh/metasfresh/issues/10318"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5NzcxMjQ2", "url": "https://github.com/metasfresh/metasfresh/pull/10319#pullrequestreview-539771246", "createdAt": "2020-11-27T08:02:40Z", "commit": {"oid": "84e5f140f34a55527e3b94f05661237b78fcb09e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwODowMjo0MVrOH60S4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwODowMjo0MVrOH60S4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQzNjI1OQ==", "bodyText": "lastArchiveResult  is nullable, so u shall check if is null", "url": "https://github.com/metasfresh/metasfresh/pull/10319#discussion_r531436259", "createdAt": "2020-11-27T08:02:41Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.document.archive/de.metas.document.archive.base/src/main/java/de/metas/document/archive/spi/impl/DefaultModelArchiver.java", "diffHunk": "@@ -128,22 +131,18 @@ public ArchiveResult archive()\n \t\t\t\t\t\t//\n \t\t\t\t\t\t.build());\n \n-\t\tfinal boolean wasReturnedFromArchive = false; // TODO: impl\n+\t\tfinal ArchiveResult lastArchiveResult = report.getLastArchiveResult();\n+\n \t\tfinal ArchiveResult archiveResult;\n-\t\tif (!wasReturnedFromArchive)\n+\n+\t\tif (lastArchiveResult.isNoArchive())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84e5f140f34a55527e3b94f05661237b78fcb09e"}, "originalPosition": 62}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5NzcxODAx", "url": "https://github.com/metasfresh/metasfresh/pull/10319#pullrequestreview-539771801", "createdAt": "2020-11-27T08:03:44Z", "commit": {"oid": "84e5f140f34a55527e3b94f05661237b78fcb09e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwODowMzo0NFrOH60Ucw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwODowMzo0NFrOH60Ucw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQzNjY1OQ==", "bodyText": "limit the scope, move it down, where it is initialized", "url": "https://github.com/metasfresh/metasfresh/pull/10319#discussion_r531436659", "createdAt": "2020-11-27T08:03:44Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/report/DocumentReportService.java", "diffHunk": "@@ -122,6 +128,8 @@ public DocumentReportResult createReport(@NonNull final DocumentReportRequest re\n \t\tfinal StandardDocumentReportType standardDocumentReportType = computeStandardDocumentReportTypeOrNull(request);\n \n \t\t//\n+\t\tArchiveResult lastArchiveResult = ArchiveResult.EMPTY;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84e5f140f34a55527e3b94f05661237b78fcb09e"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5NzcyNDEw", "url": "https://github.com/metasfresh/metasfresh/pull/10319#pullrequestreview-539772410", "createdAt": "2020-11-27T08:04:52Z", "commit": {"oid": "84e5f140f34a55527e3b94f05661237b78fcb09e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwODowNDo1MlrOH60WaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwODowNDo1MlrOH60WaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQzNzE2MQ==", "bodyText": "minor: rename it to lastArchive", "url": "https://github.com/metasfresh/metasfresh/pull/10319#discussion_r531437161", "createdAt": "2020-11-27T08:04:52Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/report/DocumentReportResult.java", "diffHunk": "@@ -63,6 +65,9 @@\n \t@NonNull\n \t@Builder.Default\n \tPrintCopies copies = PrintCopies.ONE;\n+\t\n+\t@Nullable\n+\tArchiveResult lastArchiveResult;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84e5f140f34a55527e3b94f05661237b78fcb09e"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5NzczMDg3", "url": "https://github.com/metasfresh/metasfresh/pull/10319#pullrequestreview-539773087", "createdAt": "2020-11-27T08:06:09Z", "commit": {"oid": "84e5f140f34a55527e3b94f05661237b78fcb09e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d810874e9dc89a92b6e84829798a120e8820bcfc", "author": {"user": {"login": "metas-rc", "name": "Ruxandra Craciunescu"}}, "url": "https://github.com/metasfresh/metasfresh/commit/d810874e9dc89a92b6e84829798a120e8820bcfc", "committedDate": "2020-11-27T08:20:39Z", "message": "#10318 refactoring, nullcheck\n\nhttps://github.com/metasfresh/metasfresh/issues/10318"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5ODAzNDIx", "url": "https://github.com/metasfresh/metasfresh/pull/10319#pullrequestreview-539803421", "createdAt": "2020-11-27T08:55:37Z", "commit": {"oid": "d810874e9dc89a92b6e84829798a120e8820bcfc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3056, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}