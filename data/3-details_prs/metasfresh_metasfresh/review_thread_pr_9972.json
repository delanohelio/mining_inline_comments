{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5MjAzMDM2", "number": 9972, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDoyNjo0NVrOEmHJQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDozNzozMlrOEmHesQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4Mzk4NDAyOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/impl/HUStatusBL.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDoyNjo0NVrOHV816Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxMDo1Mjo0N1rOHWlhwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc3ODk4NQ==", "bodyText": "pls always use IHandlingUnitsDAO.getById !", "url": "https://github.com/metasfresh/metasfresh/pull/9972#discussion_r492778985", "createdAt": "2020-09-22T14:26:45Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/impl/HUStatusBL.java", "diffHunk": "@@ -237,6 +238,11 @@ public boolean isStatusIssued(@Nullable final I_M_HU huRecord)\n \t\treturn X_M_HU.HUSTATUS_Issued.equals(huRecord.getHUStatus());\n \t}\n \n+\t@Override\n+\tpublic boolean isStatusIssued(@NonNull final HuId huId){\n+\t\treturn isStatusIssued(InterfaceWrapperHelper.load(huId, I_M_HU.class));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c177fd37864c266e0e8febec49a51f4618b51318"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQ0NTU3MA==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/9972#discussion_r493445570", "createdAt": "2020-09-23T10:52:47Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/impl/HUStatusBL.java", "diffHunk": "@@ -237,6 +238,11 @@ public boolean isStatusIssued(@Nullable final I_M_HU huRecord)\n \t\treturn X_M_HU.HUSTATUS_Issued.equals(huRecord.getHUStatus());\n \t}\n \n+\t@Override\n+\tpublic boolean isStatusIssued(@NonNull final HuId huId){\n+\t\treturn isStatusIssued(InterfaceWrapperHelper.load(huId, I_M_HU.class));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc3ODk4NQ=="}, "originalCommit": {"oid": "c177fd37864c266e0e8febec49a51f4618b51318"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4Mzk5OTQ0OnYy", "diffSide": "LEFT", "path": "backend/de.metas.manufacturing/src/main/java/org/eevolution/api/impl/PPOrderBL.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDoyOTo0M1rOHV8_pQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxMTowNDo1M1rOHWmKbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc4MTQ3Nw==", "bodyText": "why removing this line?", "url": "https://github.com/metasfresh/metasfresh/pull/9972#discussion_r492781477", "createdAt": "2020-09-22T14:29:43Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/org/eevolution/api/impl/PPOrderBL.java", "diffHunk": "@@ -153,7 +155,6 @@ public void updateQtyBatchs(final I_PP_Order order, final boolean override)\n \n \t\t\tfinal I_AD_Workflow wf = order.getAD_Workflow();\n \t\t\tqtyBatchSize = wf.getQtyBatchSize().setScale(0, RoundingMode.UP);\n-\t\t\torder.setQtyBatchSize(qtyBatchSize);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c177fd37864c266e0e8febec49a51f4618b51318"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzE5OTc0OA==", "bodyText": "because the column is virtual, so setting it throws error.\nIt was made virtual in: #9894", "url": "https://github.com/metasfresh/metasfresh/pull/9972#discussion_r493199748", "createdAt": "2020-09-23T05:06:36Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/org/eevolution/api/impl/PPOrderBL.java", "diffHunk": "@@ -153,7 +155,6 @@ public void updateQtyBatchs(final I_PP_Order order, final boolean override)\n \n \t\t\tfinal I_AD_Workflow wf = order.getAD_Workflow();\n \t\t\tqtyBatchSize = wf.getQtyBatchSize().setScale(0, RoundingMode.UP);\n-\t\t\torder.setQtyBatchSize(qtyBatchSize);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc4MTQ3Nw=="}, "originalCommit": {"oid": "c177fd37864c266e0e8febec49a51f4618b51318"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzIwMDkyOA==", "bodyText": "Though, after another merge it is no longer marked as virtual. Something is weird here:\n\nf437974\n\n\nI'm trying to figure out with @metas-ts what's going on about that field.", "url": "https://github.com/metasfresh/metasfresh/pull/9972#discussion_r493200928", "createdAt": "2020-09-23T05:11:11Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/org/eevolution/api/impl/PPOrderBL.java", "diffHunk": "@@ -153,7 +155,6 @@ public void updateQtyBatchs(final I_PP_Order order, final boolean override)\n \n \t\t\tfinal I_AD_Workflow wf = order.getAD_Workflow();\n \t\t\tqtyBatchSize = wf.getQtyBatchSize().setScale(0, RoundingMode.UP);\n-\t\t\torder.setQtyBatchSize(qtyBatchSize);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc4MTQ3Nw=="}, "originalCommit": {"oid": "c177fd37864c266e0e8febec49a51f4618b51318"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQ1NTk4MA==", "bodyText": "checked again locally, and now (after master rebase) QtyBatchSize is no longer virtual. \u00af\\_(\u30c4)_/\u00af", "url": "https://github.com/metasfresh/metasfresh/pull/9972#discussion_r493455980", "createdAt": "2020-09-23T11:04:53Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/org/eevolution/api/impl/PPOrderBL.java", "diffHunk": "@@ -153,7 +155,6 @@ public void updateQtyBatchs(final I_PP_Order order, final boolean override)\n \n \t\t\tfinal I_AD_Workflow wf = order.getAD_Workflow();\n \t\t\tqtyBatchSize = wf.getQtyBatchSize().setScale(0, RoundingMode.UP);\n-\t\t\torder.setQtyBatchSize(qtyBatchSize);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc4MTQ3Nw=="}, "originalCommit": {"oid": "c177fd37864c266e0e8febec49a51f4618b51318"}, "originalPosition": 105}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4NDAzNTkwOnYy", "diffSide": "LEFT", "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/pporder/api/impl/HUPPOrderQtyDAO.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDozNjo1NlrOHV9WfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwODowMzo1OVrOHWbolg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc4NzMyNQ==", "bodyText": "instead of removing it, we shall introduce PP_Order_Qty.Type={I=Issue, R=Receipt}.\nisHuIdIssued shall also filter by Type=I.\nTo set the new field, check\nde.metas.handlingunits.pporder.api.impl.HUPPOrderQtyDAO.save(CreateIssueCandidateRequest)\nde.metas.handlingunits.pporder.api.impl.HUPPOrderQtyDAO.save(CreateReceiptCandidateRequest)\nAlso, don't forget to migrate the new column!", "url": "https://github.com/metasfresh/metasfresh/pull/9972#discussion_r492787325", "createdAt": "2020-09-22T14:36:56Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/pporder/api/impl/HUPPOrderQtyDAO.java", "diffHunk": "@@ -161,16 +161,4 @@ public I_PP_Order_Qty retrieveOrderQtyForCostCollector(@NonNull final PPOrderId\n \t\t\t\t})\n \t\t\t\t.orElse(null);\n \t}\n-\n-\t@Override\n-\t@Cached(cacheName = I_PP_Order_Qty.Table_Name + \"#by#\" + I_PP_Order_Qty.COLUMNNAME_M_HU_ID)\n-\tpublic boolean isHuIdIssued(@NonNull final HuId huId)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c177fd37864c266e0e8febec49a51f4618b51318"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzIwMDAyMQ==", "bodyText": "Q: why add 2 different ways of checking if a HU is issued or not?\nThis doesn't seem right to me, when we already have the HU.Status field.", "url": "https://github.com/metasfresh/metasfresh/pull/9972#discussion_r493200021", "createdAt": "2020-09-23T05:07:40Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/pporder/api/impl/HUPPOrderQtyDAO.java", "diffHunk": "@@ -161,16 +161,4 @@ public I_PP_Order_Qty retrieveOrderQtyForCostCollector(@NonNull final PPOrderId\n \t\t\t\t})\n \t\t\t\t.orElse(null);\n \t}\n-\n-\t@Override\n-\t@Cached(cacheName = I_PP_Order_Qty.Table_Name + \"#by#\" + I_PP_Order_Qty.COLUMNNAME_M_HU_ID)\n-\tpublic boolean isHuIdIssued(@NonNull final HuId huId)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc4NzMyNQ=="}, "originalCommit": {"oid": "c177fd37864c266e0e8febec49a51f4618b51318"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI4MzQ3OA==", "bodyText": "Confirmed with teo on skype: It's ok to use HU.Status instead of using PP_Order_Qty.", "url": "https://github.com/metasfresh/metasfresh/pull/9972#discussion_r493283478", "createdAt": "2020-09-23T08:03:59Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.handlingunits.base/src/main/java/de/metas/handlingunits/pporder/api/impl/HUPPOrderQtyDAO.java", "diffHunk": "@@ -161,16 +161,4 @@ public I_PP_Order_Qty retrieveOrderQtyForCostCollector(@NonNull final PPOrderId\n \t\t\t\t})\n \t\t\t\t.orElse(null);\n \t}\n-\n-\t@Override\n-\t@Cached(cacheName = I_PP_Order_Qty.Table_Name + \"#by#\" + I_PP_Order_Qty.COLUMNNAME_M_HU_ID)\n-\tpublic boolean isHuIdIssued(@NonNull final HuId huId)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc4NzMyNQ=="}, "originalCommit": {"oid": "c177fd37864c266e0e8febec49a51f4618b51318"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4NDAzODg5OnYy", "diffSide": "LEFT", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/pporder/process/WEBUI_PP_Order_HUEditor_Launcher.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDozNzozMlrOHV9YYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwODowNDowNVrOHWbo_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc4NzgwOQ==", "bodyText": "pls don't remove it", "url": "https://github.com/metasfresh/metasfresh/pull/9972#discussion_r492787809", "createdAt": "2020-09-22T14:37:32Z", "author": {"login": "teosarca"}, "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/pporder/process/WEBUI_PP_Order_HUEditor_Launcher.java", "diffHunk": "@@ -173,7 +172,7 @@ private boolean isEligibleHuToIssue(final HuId huId)\n \t\t\treturn false;\n \t\t}\n \n-\t\tif (huOrderCandidatesRepo.isHuIdIssued(huId))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c177fd37864c266e0e8febec49a51f4618b51318"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzIwMTUwMg==", "bodyText": "Same reply as previous one: i'm checking HU.Status via huStatusBL instead", "url": "https://github.com/metasfresh/metasfresh/pull/9972#discussion_r493201502", "createdAt": "2020-09-23T05:13:17Z", "author": {"login": "TheBestPessimist"}, "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/pporder/process/WEBUI_PP_Order_HUEditor_Launcher.java", "diffHunk": "@@ -173,7 +172,7 @@ private boolean isEligibleHuToIssue(final HuId huId)\n \t\t\treturn false;\n \t\t}\n \n-\t\tif (huOrderCandidatesRepo.isHuIdIssued(huId))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc4NzgwOQ=="}, "originalCommit": {"oid": "c177fd37864c266e0e8febec49a51f4618b51318"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI4MzU4MA==", "bodyText": "Confirmed with teo on skype: It's ok to use HU.Status instead of using PP_Order_Qty.", "url": "https://github.com/metasfresh/metasfresh/pull/9972#discussion_r493283580", "createdAt": "2020-09-23T08:04:05Z", "author": {"login": "TheBestPessimist"}, "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/pporder/process/WEBUI_PP_Order_HUEditor_Launcher.java", "diffHunk": "@@ -173,7 +172,7 @@ private boolean isEligibleHuToIssue(final HuId huId)\n \t\t\treturn false;\n \t\t}\n \n-\t\tif (huOrderCandidatesRepo.isHuIdIssued(huId))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc4NzgwOQ=="}, "originalCommit": {"oid": "c177fd37864c266e0e8febec49a51f4618b51318"}, "originalPosition": 85}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1306, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}