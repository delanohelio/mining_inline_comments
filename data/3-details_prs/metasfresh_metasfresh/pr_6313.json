{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0MzQ2MTc0", "number": 6313, "title": "ESR: Read Payment String -> Payment Selection, Bancaccount not automatically selected for Reference", "bodyText": "#6310", "createdAt": "2020-03-05T15:35:37Z", "url": "https://github.com/metasfresh/metasfresh/pull/6313", "merged": true, "mergeCommit": {"oid": "3eb28d40dc3b6a7db13585ebe5e71e39cc9ae2dc"}, "closed": true, "closedAt": "2020-03-06T05:41:28Z", "author": {"login": "TheBestPessimist"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKsUcugH2gAyMzg0MzQ2MTc0OmE0NTc0ZTNmNmRkZTE1Mzg1MDk2ZDc1NDJlNDA2YjExZTFiMmNhMWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKt1fqgFqTM2OTcwMTgxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a4574e3f6dde15385096d7542e406b11e1b2ca1d", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/a4574e3f6dde15385096d7542e406b11e1b2ca1d", "committedDate": "2020-03-05T14:23:29Z", "message": "Change column types to Dictionary\n\nhttps://github.com/metasfresh/metasfresh/issues/6310"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78364d23a7ce9f31932255e624f3a5aa8f45c618", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/78364d23a7ce9f31932255e624f3a5aa8f45c618", "committedDate": "2020-03-05T14:23:54Z", "message": "Save BP Bank Account name when creating a new one from ESR\n\nhttps://github.com/metasfresh/metasfresh/issues/6310"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a596ebcf078d6f079331446ba6e462f3d69ef4c", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/5a596ebcf078d6f079331446ba6e462f3d69ef4c", "committedDate": "2020-03-05T14:26:06Z", "message": "Search for multiple variants of ESR Account Names when searcihng for BP Bank Account\n\nhttps://github.com/metasfresh/metasfresh/issues/6310"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8f0ec5e1211b0883ee8eba4f62d293f6c5f79e9", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/a8f0ec5e1211b0883ee8eba4f62d293f6c5f79e9", "committedDate": "2020-03-05T15:34:34Z", "message": "Small bugfix/refactoring\n\nhttps://github.com/metasfresh/metasfresh/issues/6310"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzAxODEw", "url": "https://github.com/metasfresh/metasfresh/pull/6313#pullrequestreview-369701810", "createdAt": "2020-03-05T16:06:38Z", "commit": {"oid": "a8f0ec5e1211b0883ee8eba4f62d293f6c5f79e9"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjowNjozOFrOFyZvyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjowODo0OFrOFyZ1vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODM5NDk1NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t * Formatting done according to https://www.gkb.ch/de/Documents/DC/Beratung-Produkte/Factsheets-Flyers/Handbuch-ESR/ESR-Handbuch-Postfinance-DE.pdf\n          \n          \n            \n            \t * Explode the given {@code esrString} into a number of syntactically equivalent strings that can be matched against {@code C_BP_BankAccount.ESR_RenderedAccountNo}.\n          \n          \n            \n            \t * Formatting done according to https://www.gkb.ch/de/Documents/DC/Beratung-Produkte/Factsheets-Flyers/Handbuch-ESR/ESR-Handbuch-Postfinance-DE.pdf", "url": "https://github.com/metasfresh/metasfresh/pull/6313#discussion_r388394954", "createdAt": "2020-03-05T16:06:38Z", "author": {"login": "metas-ts"}, "path": "de.metas.payment.esr/src/main/java/de/metas/payment/esr/api/impl/ESRBPBankAccountDAO.java", "diffHunk": "@@ -64,6 +69,57 @@\n \t\t\t\t.list();\n \t}\n \n+\t/**\n+\t * Formatting done according to https://www.gkb.ch/de/Documents/DC/Beratung-Produkte/Factsheets-Flyers/Handbuch-ESR/ESR-Handbuch-Postfinance-DE.pdf", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8f0ec5e1211b0883ee8eba4f62d293f6c5f79e9"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODM5NTc5NA==", "bodyText": "how to fix what in particular; anyways, this hardcoded stuff needs fixing, sooner or later. an additional unsolved TODO is therefore not a big deal for me", "url": "https://github.com/metasfresh/metasfresh/pull/6313#discussion_r388395794", "createdAt": "2020-03-05T16:07:52Z", "author": {"login": "metas-ts"}, "path": "de.metas.banking/de.metas.banking.base/src/main/java/de/metas/banking/exception/BankingException.java", "diffHunk": "@@ -95,8 +95,9 @@ protected ITranslatableString buildMessage()\n \t\tif (targetAcct != null)\n \t\t{\n \t\t\tsb.append(\"Zielkonto:\\n\");\n-\t\t\tsb.append(\"\\tEmpfaenger: \")\n-\t\t\t\t\t.append(targetAcct.getC_BPartner().getName());\n+\t\t\t // TODO tbp: how to fix this?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8f0ec5e1211b0883ee8eba4f62d293f6c5f79e9"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODM5NjQ3OA==", "bodyText": "there are nice AssertJ things for this; pls let me know next time you write unit tests, I can show you examples", "url": "https://github.com/metasfresh/metasfresh/pull/6313#discussion_r388396478", "createdAt": "2020-03-05T16:08:48Z", "author": {"login": "metas-ts"}, "path": "de.metas.payment.esr/src/test/java/de/metas/payment/esr/api/impl/ESRBPBankAccountDAOTest.java", "diffHunk": "@@ -0,0 +1,65 @@\n+/*\n+ * #%L\n+ * de.metas.payment.esr\n+ * %%\n+ * Copyright (C) 2019 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.payment.esr.api.impl;\n+\n+import com.google.common.collect.ImmutableSet;\n+import org.assertj.core.api.Assertions;\n+import org.junit.jupiter.api.Nested;\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.Arrays;\n+\n+import static de.metas.payment.esr.api.impl.ESRBPBankAccountDAO.createMatchingESRAccountNumbers;\n+import static org.junit.jupiter.api.Assertions.*;\n+\n+class ESRBPBankAccountDAOTest\n+{\n+\t@Nested\n+\tclass MatchingESRAccountNumbersTest\n+\t{\n+\t\t@Test\n+\t\tvoid esrHas9Digits()\n+\t\t{\n+\t\t\tfinal ImmutableSet<String> esrs = createMatchingESRAccountNumbers(\"01-1067-4\");\n+\t\t\tesrs.forEach(s -> assertEquals(9, s.length()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8f0ec5e1211b0883ee8eba4f62d293f6c5f79e9"}, "originalPosition": 44}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3541, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}