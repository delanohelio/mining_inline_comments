{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2NTk5MjIw", "number": 7124, "title": "Table edit shortcut", "bodyText": "", "createdAt": "2020-08-12T08:10:01Z", "url": "https://github.com/metasfresh/metasfresh/pull/7124", "merged": true, "mergeCommit": {"oid": "dbbbff8f9a96e8d9969d224c5de086eee3e63ee9"}, "closed": true, "closedAt": "2020-08-18T05:03:45Z", "author": {"login": "petrican"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-GOJQAH2gAyNDY2NTk5MjIwOmZiODQ3OWI2YTMxMzg4YWNlMmM5YjA0NDE2NzFhYmVjMTM3ZjliNjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc_z40kAFqTQ2ODU1MTE5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fb8479b6a31388ace2c9b0441671abec137f9b62", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/fb8479b6a31388ace2c9b0441671abec137f9b62", "committedDate": "2020-08-12T07:24:16Z", "message": "Skel for triggering an action on ALT+F combination for a field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4731f96d6d68b052385ee412d7fa17f0fc444eeb", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/4731f96d6d68b052385ee412d7fa17f0fc444eeb", "committedDate": "2020-08-12T08:12:19Z", "message": "Update snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09398f93a322696c8b27bbb02b2fef09503ea923", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/09398f93a322696c8b27bbb02b2fef09503ea923", "committedDate": "2020-08-12T12:45:16Z", "message": "Calling existing edit functionality on ALT+F combination"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b0b21a396dee2a3433e9c9328d07e4c878c3e28", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/4b0b21a396dee2a3433e9c9328d07e4c878c3e28", "committedDate": "2020-08-12T13:38:09Z", "message": "Mark edited text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6da66b26f0f7e6e6ec2f026a301d56c43e84544", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/e6da66b26f0f7e6e6ec2f026a301d56c43e84544", "committedDate": "2020-08-14T12:15:56Z", "message": "Merged master into local branch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4aae248ccea3a704ea807776981a5a78b57ad30d", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/4aae248ccea3a704ea807776981a5a78b57ad30d", "committedDate": "2020-08-17T05:57:12Z", "message": "Merge branch 'master' into 7119-editShortcut"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f3ad16eab00a175a9bf81deeeecfb6b1fce0a77", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/0f3ad16eab00a175a9bf81deeeecfb6b1fce0a77", "committedDate": "2020-08-17T06:05:04Z", "message": "Fix conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "294caef929919d76e42170239933dc5706bf6999", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/294caef929919d76e42170239933dc5706bf6999", "committedDate": "2020-08-17T12:27:43Z", "message": "Comment disabling shortcut dispatch on focusing the widget"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb991cf5aea3bf98b4500bfea6f7c76271c41890", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/eb991cf5aea3bf98b4500bfea6f7c76271c41890", "committedDate": "2020-08-17T13:05:32Z", "message": "Fixes to restrict the editing only to allowed fields"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4NDcwNzQw", "url": "https://github.com/metasfresh/metasfresh/pull/7124#pullrequestreview-468470740", "createdAt": "2020-08-17T13:38:55Z", "commit": {"oid": "eb991cf5aea3bf98b4500bfea6f7c76271c41890"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzozODo1NVrOHBpI-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzo0NDo0NlrOHBpX_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ4NDY2Ng==", "bodyText": "what mark stands for ?", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471484666", "createdAt": "2020-08-17T13:38:55Z", "author": {"login": "siemiatj"}, "path": "frontend/src/components/table/TableItem.js", "diffHunk": "@@ -75,7 +75,7 @@ class TableItem extends PureComponent {\n     }\n   }\n \n-  initPropertyEditor = (fieldName) => {\n+  initPropertyEditor = ({ fieldName, mark }) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb991cf5aea3bf98b4500bfea6f7c76271c41890"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ4NTAyOA==", "bodyText": "Same -> add a comment what mark property is.", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471485028", "createdAt": "2020-08-17T13:39:25Z", "author": {"login": "siemiatj"}, "path": "frontend/src/components/table/TableItem.js", "diffHunk": "@@ -195,9 +203,9 @@ class TableItem extends PureComponent {\n    * @param {object} [item] - widget data object\n    * @param {boolean} [select] - flag if selected cell should be cleared\n    */\n-  handleEditProperty = (e, property, focus, item, select) => {\n+  handleEditProperty = (e, property, focus, item, select, mark) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb991cf5aea3bf98b4500bfea6f7c76271c41890"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ4NzQxMA==", "bodyText": "Why do we need to persist the event ? Are we using it in any way and need to access it past this point ?", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471487410", "createdAt": "2020-08-17T13:43:04Z", "author": {"login": "siemiatj"}, "path": "frontend/src/components/table/TableItem.js", "diffHunk": "@@ -212,9 +220,9 @@ class TableItem extends PureComponent {\n    * @param {object} [item] - widget data object\n    * @param {boolean} [select] - flag if selected cell should be cleared\n    */\n-  _editProperty = (e, property, focus, item, select) => {\n+  _editProperty = ({ e, property, focus, item, select, mark }) => {\n     if (item ? !item.readonly : true) {\n-      if (this.state.edited === property && e) e.stopPropagation();\n+      if (this.state.edited === property && e) e.persist(); // e.stopPropagation();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb991cf5aea3bf98b4500bfea6f7c76271c41890"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ4ODUxMQ==", "bodyText": "What's this comment for ? Is this routine something we need now ? In the future ?", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471488511", "createdAt": "2020-08-17T13:44:46Z", "author": {"login": "siemiatj"}, "path": "frontend/src/components/table/TableWrapper.js", "diffHunk": "@@ -156,6 +156,32 @@ class TableWrapper extends PureComponent {\n     }\n   };\n \n+  handleFocusAction = ({ fieldName, supportFieldEdit }) => {\n+    this.setState({\n+      contextMenu: {\n+        ...this.state.contextMenu,\n+        fieldName,\n+      },\n+      supportFieldEdit,\n+    });\n+  };\n+\n+  handleFastInlineEdit = () => {\n+    const { selected } = this.props;\n+    const { contextMenu, supportFieldEdit } = this.state;\n+    // a routine needs to be added in here - to check if field is allowed to be edited\n+    // if (contextMenu.supportFieldEdit && selected.length === 1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb991cf5aea3bf98b4500bfea6f7c76271c41890"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9653118a9b7fe8d0c466409d91b537d538340409", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/9653118a9b7fe8d0c466409d91b537d538340409", "committedDate": "2020-08-17T13:50:19Z", "message": "Removed commented code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d2cdcb568b9ad1c97f2fb9ef1f9c1f01a5d833b", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/1d2cdcb568b9ad1c97f2fb9ef1f9c1f01a5d833b", "committedDate": "2020-08-17T13:55:49Z", "message": "Add doc for param"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4099e9ee38e86b62b06610392e8395200b3f2932", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/4099e9ee38e86b62b06610392e8395200b3f2932", "committedDate": "2020-08-17T14:00:02Z", "message": "Removed e.stopPropagation()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4NTI1Mjcw", "url": "https://github.com/metasfresh/metasfresh/pull/7124#pullrequestreview-468525270", "createdAt": "2020-08-17T14:40:55Z", "commit": {"oid": "4099e9ee38e86b62b06610392e8395200b3f2932"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4NTUxMTk3", "url": "https://github.com/metasfresh/metasfresh/pull/7124#pullrequestreview-468551197", "createdAt": "2020-08-17T15:10:32Z", "commit": {"oid": "4099e9ee38e86b62b06610392e8395200b3f2932"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNToxMDozMlrOHBs4aA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNToxMDozMlrOHBs4aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTU0NTk2MA==", "bodyText": "My comment was about persist, not stopPropagation", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471545960", "createdAt": "2020-08-17T15:10:32Z", "author": {"login": "siemiatj"}, "path": "frontend/src/components/table/TableItem.js", "diffHunk": "@@ -228,7 +228,7 @@ class TableItem extends PureComponent {\n    */\n   _editProperty = ({ e, property, focus, item, select, mark }) => {\n     if (item ? !item.readonly : true) {\n-      if (this.state.edited === property && e) e.persist(); // e.stopPropagation();\n+      if (this.state.edited === property && e) e.persist();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4099e9ee38e86b62b06610392e8395200b3f2932"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3263, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}