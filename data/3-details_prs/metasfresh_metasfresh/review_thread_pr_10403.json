{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NjgwOTY1", "number": 10403, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNzowNDo1OFrOFDUVGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxMjowMDo1NVrOFDcPow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MDIzMTI4OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoice/impl/InvoiceService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNzowNDo1OVrOIC6DvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNzo0Mjo0OVrOIC7g7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkxOTI5Mw==", "bodyText": "pls extract service as field", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539919293", "createdAt": "2020-12-10T07:04:59Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoice/impl/InvoiceService.java", "diffHunk": "@@ -65,6 +77,34 @@ public boolean hasArchive(@NonNull final InvoiceId invoiceId)\n \t\treturn archiveBL.getLastArchive(TableRecordReference.of(I_C_Invoice.Table_Name, invoiceId));\n \t}\n \n+\t@NonNull\n+\tpublic JSONInvoiceInfoResponse getInvoiceInfo(@NonNull final InvoiceId invoiceId, final String ad_language)\n+\t{\n+\t\tfinal JSONInvoiceInfoResponse.JSONInvoiceInfoResponseBuilder result = JSONInvoiceInfoResponse.builder();\n+\n+\t\tfinal I_C_Invoice invoice = invoiceDAO.getByIdInTrx(invoiceId);\n+\n+\t\tfinal CurrencyCode currency = Services.get(ICurrencyDAO.class).getCurrencyCodeById(CurrencyId.ofRepoId(invoice.getC_Currency_ID()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0568af55e7d43996ec1dfae132a59a6d35e7a83b"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk0MzE0OQ==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539943149", "createdAt": "2020-12-10T07:42:49Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoice/impl/InvoiceService.java", "diffHunk": "@@ -65,6 +77,34 @@ public boolean hasArchive(@NonNull final InvoiceId invoiceId)\n \t\treturn archiveBL.getLastArchive(TableRecordReference.of(I_C_Invoice.Table_Name, invoiceId));\n \t}\n \n+\t@NonNull\n+\tpublic JSONInvoiceInfoResponse getInvoiceInfo(@NonNull final InvoiceId invoiceId, final String ad_language)\n+\t{\n+\t\tfinal JSONInvoiceInfoResponse.JSONInvoiceInfoResponseBuilder result = JSONInvoiceInfoResponse.builder();\n+\n+\t\tfinal I_C_Invoice invoice = invoiceDAO.getByIdInTrx(invoiceId);\n+\n+\t\tfinal CurrencyCode currency = Services.get(ICurrencyDAO.class).getCurrencyCodeById(CurrencyId.ofRepoId(invoice.getC_Currency_ID()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkxOTI5Mw=="}, "originalCommit": {"oid": "0568af55e7d43996ec1dfae132a59a6d35e7a83b"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MDI0NzkxOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoice/impl/JSONInvoiceInfoResponse.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNzowODowM1rOIC6Opg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwOTowODo1NFrOIC-tGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkyMjA4Ng==", "bodyText": "is there any reason for this naming convention?\ni would prefer camel case", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539922086", "createdAt": "2020-12-10T07:08:03Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoice/impl/JSONInvoiceInfoResponse.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * #%L\n+ * de.metas.business.rest-api-impl\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.rest_api.invoice.impl;\n+\n+import com.fasterxml.jackson.annotation.JsonAutoDetect;\n+import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n+import com.fasterxml.jackson.databind.annotation.JsonPOJOBuilder;\n+import de.metas.currency.CurrencyCode;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Singular;\n+import lombok.Value;\n+\n+import java.math.BigDecimal;\n+import java.util.List;\n+\n+@Builder\n+@Value\n+@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY, getterVisibility = JsonAutoDetect.Visibility.NONE, isGetterVisibility = JsonAutoDetect.Visibility.NONE, setterVisibility = JsonAutoDetect.Visibility.NONE)\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+@JsonDeserialize(builder = JSONInvoiceInfoResponse.JSONInvoiceInfoResponseBuilder.class)\n+public class JSONInvoiceInfoResponse\n+{\n+\t@Singular\n+\t@NonNull\n+\tList<JSONInvoiceLineInfo> lineInfos;\n+\n+\t@JsonIgnoreProperties(ignoreUnknown = true)\n+\t@JsonPOJOBuilder(withPrefix = \"\")\n+\tstatic class JSONInvoiceInfoResponseBuilder\n+\t{\n+\t}\n+}\n+\n+\n+@Builder\n+@Value\n+@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY, getterVisibility = JsonAutoDetect.Visibility.NONE, isGetterVisibility = JsonAutoDetect.Visibility.NONE, setterVisibility = JsonAutoDetect.Visibility.NONE)\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+@JsonDeserialize(builder = JSONInvoiceLineInfo.JSONInvoiceLineInfoBuilder.class)\n+class JSONInvoiceLineInfo\n+{\n+\tint line_number;\n+\tString product_name;\n+\tBigDecimal qty_invoiced;\n+\tBigDecimal price;\n+\tBigDecimal tax_rate;\n+\tBigDecimal line_net_amt;\n+\tCurrencyCode currency;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0568af55e7d43996ec1dfae132a59a6d35e7a83b"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk0MzY3NA==", "bodyText": "In order not to add the annotation @JsonProperty for all of them.\nIt's not lazyness. I think the code looks cleaner like this, plus this is a JSON class, so nobody will change it.", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539943674", "createdAt": "2020-12-10T07:43:59Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoice/impl/JSONInvoiceInfoResponse.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * #%L\n+ * de.metas.business.rest-api-impl\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.rest_api.invoice.impl;\n+\n+import com.fasterxml.jackson.annotation.JsonAutoDetect;\n+import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n+import com.fasterxml.jackson.databind.annotation.JsonPOJOBuilder;\n+import de.metas.currency.CurrencyCode;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Singular;\n+import lombok.Value;\n+\n+import java.math.BigDecimal;\n+import java.util.List;\n+\n+@Builder\n+@Value\n+@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY, getterVisibility = JsonAutoDetect.Visibility.NONE, isGetterVisibility = JsonAutoDetect.Visibility.NONE, setterVisibility = JsonAutoDetect.Visibility.NONE)\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+@JsonDeserialize(builder = JSONInvoiceInfoResponse.JSONInvoiceInfoResponseBuilder.class)\n+public class JSONInvoiceInfoResponse\n+{\n+\t@Singular\n+\t@NonNull\n+\tList<JSONInvoiceLineInfo> lineInfos;\n+\n+\t@JsonIgnoreProperties(ignoreUnknown = true)\n+\t@JsonPOJOBuilder(withPrefix = \"\")\n+\tstatic class JSONInvoiceInfoResponseBuilder\n+\t{\n+\t}\n+}\n+\n+\n+@Builder\n+@Value\n+@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY, getterVisibility = JsonAutoDetect.Visibility.NONE, isGetterVisibility = JsonAutoDetect.Visibility.NONE, setterVisibility = JsonAutoDetect.Visibility.NONE)\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+@JsonDeserialize(builder = JSONInvoiceLineInfo.JSONInvoiceLineInfoBuilder.class)\n+class JSONInvoiceLineInfo\n+{\n+\tint line_number;\n+\tString product_name;\n+\tBigDecimal qty_invoiced;\n+\tBigDecimal price;\n+\tBigDecimal tax_rate;\n+\tBigDecimal line_net_amt;\n+\tCurrencyCode currency;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkyMjA4Ng=="}, "originalCommit": {"oid": "0568af55e7d43996ec1dfae132a59a6d35e7a83b"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk3ODQ4NQ==", "bodyText": "u can have camel case and not having to annotate the fields with JsonProperty.\nIs there some standard about how to fields shall look in the json?", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539978485", "createdAt": "2020-12-10T08:43:38Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoice/impl/JSONInvoiceInfoResponse.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * #%L\n+ * de.metas.business.rest-api-impl\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.rest_api.invoice.impl;\n+\n+import com.fasterxml.jackson.annotation.JsonAutoDetect;\n+import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n+import com.fasterxml.jackson.databind.annotation.JsonPOJOBuilder;\n+import de.metas.currency.CurrencyCode;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Singular;\n+import lombok.Value;\n+\n+import java.math.BigDecimal;\n+import java.util.List;\n+\n+@Builder\n+@Value\n+@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY, getterVisibility = JsonAutoDetect.Visibility.NONE, isGetterVisibility = JsonAutoDetect.Visibility.NONE, setterVisibility = JsonAutoDetect.Visibility.NONE)\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+@JsonDeserialize(builder = JSONInvoiceInfoResponse.JSONInvoiceInfoResponseBuilder.class)\n+public class JSONInvoiceInfoResponse\n+{\n+\t@Singular\n+\t@NonNull\n+\tList<JSONInvoiceLineInfo> lineInfos;\n+\n+\t@JsonIgnoreProperties(ignoreUnknown = true)\n+\t@JsonPOJOBuilder(withPrefix = \"\")\n+\tstatic class JSONInvoiceInfoResponseBuilder\n+\t{\n+\t}\n+}\n+\n+\n+@Builder\n+@Value\n+@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY, getterVisibility = JsonAutoDetect.Visibility.NONE, isGetterVisibility = JsonAutoDetect.Visibility.NONE, setterVisibility = JsonAutoDetect.Visibility.NONE)\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+@JsonDeserialize(builder = JSONInvoiceLineInfo.JSONInvoiceLineInfoBuilder.class)\n+class JSONInvoiceLineInfo\n+{\n+\tint line_number;\n+\tString product_name;\n+\tBigDecimal qty_invoiced;\n+\tBigDecimal price;\n+\tBigDecimal tax_rate;\n+\tBigDecimal line_net_amt;\n+\tCurrencyCode currency;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkyMjA4Ng=="}, "originalCommit": {"oid": "0568af55e7d43996ec1dfae132a59a6d35e7a83b"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk5NTQxNw==", "bodyText": "renamed to camelCase", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539995417", "createdAt": "2020-12-10T09:08:54Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoice/impl/JSONInvoiceInfoResponse.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * #%L\n+ * de.metas.business.rest-api-impl\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.rest_api.invoice.impl;\n+\n+import com.fasterxml.jackson.annotation.JsonAutoDetect;\n+import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n+import com.fasterxml.jackson.databind.annotation.JsonPOJOBuilder;\n+import de.metas.currency.CurrencyCode;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Singular;\n+import lombok.Value;\n+\n+import java.math.BigDecimal;\n+import java.util.List;\n+\n+@Builder\n+@Value\n+@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY, getterVisibility = JsonAutoDetect.Visibility.NONE, isGetterVisibility = JsonAutoDetect.Visibility.NONE, setterVisibility = JsonAutoDetect.Visibility.NONE)\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+@JsonDeserialize(builder = JSONInvoiceInfoResponse.JSONInvoiceInfoResponseBuilder.class)\n+public class JSONInvoiceInfoResponse\n+{\n+\t@Singular\n+\t@NonNull\n+\tList<JSONInvoiceLineInfo> lineInfos;\n+\n+\t@JsonIgnoreProperties(ignoreUnknown = true)\n+\t@JsonPOJOBuilder(withPrefix = \"\")\n+\tstatic class JSONInvoiceInfoResponseBuilder\n+\t{\n+\t}\n+}\n+\n+\n+@Builder\n+@Value\n+@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY, getterVisibility = JsonAutoDetect.Visibility.NONE, isGetterVisibility = JsonAutoDetect.Visibility.NONE, setterVisibility = JsonAutoDetect.Visibility.NONE)\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+@JsonDeserialize(builder = JSONInvoiceLineInfo.JSONInvoiceLineInfoBuilder.class)\n+class JSONInvoiceLineInfo\n+{\n+\tint line_number;\n+\tString product_name;\n+\tBigDecimal qty_invoiced;\n+\tBigDecimal price;\n+\tBigDecimal tax_rate;\n+\tBigDecimal line_net_amt;\n+\tCurrencyCode currency;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkyMjA4Ng=="}, "originalCommit": {"oid": "0568af55e7d43996ec1dfae132a59a6d35e7a83b"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MDI3NzcwOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNzoxMzo0OFrOIC6hfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNzo1MjowNlrOIC7zfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkyNjkxMQ==", "bodyText": "try/catch, return ResponseEntity.badRequestSomething(JsonError.of...)", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539926911", "createdAt": "2020-12-10T07:13:48Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -157,6 +159,28 @@ public InvoicesRestControllerImpl(\n \t\treturn ResponseEntity.notFound().build();\n \t}\n \n+\t@ApiResponses(value = {\n+\t\t\t@ApiResponse(code = 200, message = \"Invoice info retrieved\"),\n+\t\t\t@ApiResponse(code = 401, message = \"You are not authorized\"),\n+\t\t\t@ApiResponse(code = 404, message = \"No Invoice found\")\n+\t})\n+\t@GetMapping(path = \"{invoiceId}/invoiceInfo\", produces = \"application/json\")\n+\t@Override\n+\tpublic ResponseEntity<?> getInvoiceInfo(\n+\t\t\t@ApiParam(required = true, value = \"metasfreshId of the invoice\")\n+\t\t\t@PathVariable(\"invoiceId\") final int invoiceRecordId)\n+\t{\n+\t\tfinal InvoiceId invoiceId = InvoiceId.ofRepoIdOrNull(invoiceRecordId);\n+\t\tif (invoiceId == null)\n+\t\t{\n+\t\t\treturn ResponseEntity.notFound().build();\n+\t\t}\n+\n+\t\tfinal JSONInvoiceInfoResponse invoiceInfo = invoiceService.getInvoiceInfo(invoiceId, Env.getAD_Language());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0568af55e7d43996ec1dfae132a59a6d35e7a83b"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk0NzkwMA==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539947900", "createdAt": "2020-12-10T07:52:06Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -157,6 +159,28 @@ public InvoicesRestControllerImpl(\n \t\treturn ResponseEntity.notFound().build();\n \t}\n \n+\t@ApiResponses(value = {\n+\t\t\t@ApiResponse(code = 200, message = \"Invoice info retrieved\"),\n+\t\t\t@ApiResponse(code = 401, message = \"You are not authorized\"),\n+\t\t\t@ApiResponse(code = 404, message = \"No Invoice found\")\n+\t})\n+\t@GetMapping(path = \"{invoiceId}/invoiceInfo\", produces = \"application/json\")\n+\t@Override\n+\tpublic ResponseEntity<?> getInvoiceInfo(\n+\t\t\t@ApiParam(required = true, value = \"metasfreshId of the invoice\")\n+\t\t\t@PathVariable(\"invoiceId\") final int invoiceRecordId)\n+\t{\n+\t\tfinal InvoiceId invoiceId = InvoiceId.ofRepoIdOrNull(invoiceRecordId);\n+\t\tif (invoiceId == null)\n+\t\t{\n+\t\t\treturn ResponseEntity.notFound().build();\n+\t\t}\n+\n+\t\tfinal JSONInvoiceInfoResponse invoiceInfo = invoiceService.getInvoiceInfo(invoiceId, Env.getAD_Language());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkyNjkxMQ=="}, "originalCommit": {"oid": "0568af55e7d43996ec1dfae132a59a6d35e7a83b"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MDMxODU0OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.business/src/main/java/de/metas/tax/api/impl/TaxDAO.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNzoyMjowOFrOIC65nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNzo1NzoyNVrOIC7_JQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkzMzA4Nw==", "bodyText": "i think Optional is not needed because tax record shall always exist for a given ID. If not, it's a db inconsistency and not a missing rate.\nBut, instead of BigDecimal, pls consider returning de.metas.util.lang.Percent", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539933087", "createdAt": "2020-12-10T07:22:08Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.business/src/main/java/de/metas/tax/api/impl/TaxDAO.java", "diffHunk": "@@ -213,4 +190,15 @@ public ITranslatableString getTaxCategoryNameById(@Nullable final TaxCategoryId\n \n \t\treturn Optional.ofNullable(taxCategoryId);\n \t}\n+\n+\t@Override\n+\tpublic Optional<BigDecimal> getRateById(@NonNull final TaxId taxId)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0568af55e7d43996ec1dfae132a59a6d35e7a83b"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1MDg4NQ==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539950885", "createdAt": "2020-12-10T07:57:25Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.business/src/main/java/de/metas/tax/api/impl/TaxDAO.java", "diffHunk": "@@ -213,4 +190,15 @@ public ITranslatableString getTaxCategoryNameById(@Nullable final TaxCategoryId\n \n \t\treturn Optional.ofNullable(taxCategoryId);\n \t}\n+\n+\t@Override\n+\tpublic Optional<BigDecimal> getRateById(@NonNull final TaxId taxId)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkzMzA4Nw=="}, "originalCommit": {"oid": "0568af55e7d43996ec1dfae132a59a6d35e7a83b"}, "originalPosition": 82}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MDMyNDQ1OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNzoyNDowN1rOIC688g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODozNDoxNlrOIC9T4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkzMzkzOA==", "bodyText": "are these HTTP codes still valid for this method?", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539933938", "createdAt": "2020-12-10T07:24:07Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -157,6 +159,28 @@ public InvoicesRestControllerImpl(\n \t\treturn ResponseEntity.notFound().build();\n \t}\n \n+\t@ApiResponses(value = {\n+\t\t\t@ApiResponse(code = 200, message = \"Invoice info retrieved\"),\n+\t\t\t@ApiResponse(code = 401, message = \"You are not authorized\"),\n+\t\t\t@ApiResponse(code = 404, message = \"No Invoice found\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0568af55e7d43996ec1dfae132a59a6d35e7a83b"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk3MjU3OA==", "bodyText": "yes", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539972578", "createdAt": "2020-12-10T08:34:16Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -157,6 +159,28 @@ public InvoicesRestControllerImpl(\n \t\treturn ResponseEntity.notFound().build();\n \t}\n \n+\t@ApiResponses(value = {\n+\t\t\t@ApiResponse(code = 200, message = \"Invoice info retrieved\"),\n+\t\t\t@ApiResponse(code = 401, message = \"You are not authorized\"),\n+\t\t\t@ApiResponse(code = 404, message = \"No Invoice found\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkzMzkzOA=="}, "originalCommit": {"oid": "0568af55e7d43996ec1dfae132a59a6d35e7a83b"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MDg4MTU3OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwOTozNzo0NVrOIC_9ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxMTozOToyMlrOIDFC0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxNjA2Nw==", "bodyText": "pls use JsonError class that we already have", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540016067", "createdAt": "2020-12-10T09:37:45Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -157,6 +159,35 @@ public InvoicesRestControllerImpl(\n \t\treturn ResponseEntity.notFound().build();\n \t}\n \n+\t@ApiResponses(value = {\n+\t\t\t@ApiResponse(code = 200, message = \"Invoice info retrieved\"),\n+\t\t\t@ApiResponse(code = 401, message = \"You are not authorized\"),\n+\t\t\t@ApiResponse(code = 404, message = \"No Invoice found\"),\n+\t\t\t@ApiResponse(code = 422, message = \"An error happened during Invoice info retrieval\"),\n+\t})\n+\t@GetMapping(path = \"{invoiceId}/invoiceInfo\", produces = \"application/json\")\n+\t@Override\n+\tpublic ResponseEntity<?> getInvoiceInfo(\n+\t\t\t@ApiParam(required = true, value = \"metasfreshId of the invoice\")\n+\t\t\t@PathVariable(\"invoiceId\") final int invoiceRecordId)\n+\t{\n+\t\tfinal InvoiceId invoiceId = InvoiceId.ofRepoIdOrNull(invoiceRecordId);\n+\t\tif (invoiceId == null)\n+\t\t{\n+\t\t\treturn ResponseEntity.notFound().build();\n+\t\t}\n+\n+\t\ttry\n+\t\t{\n+\t\t\tfinal JSONInvoiceInfoResponse invoiceInfo = invoiceService.getInvoiceInfo(invoiceId, Env.getAD_Language());\n+\t\t\treturn ResponseEntity.ok(invoiceInfo);\n+\t\t}\n+\t\tcatch (final Exception e)\n+\t\t{\n+\t\t\treturn ResponseEntity.unprocessableEntity().body(e.getLocalizedMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b14820c4fa152750a68bf81bb618539b38277fb3"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxNjU2OA==", "bodyText": "i.e. de.metas.common.rest_api.JsonError", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540016568", "createdAt": "2020-12-10T09:38:28Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -157,6 +159,35 @@ public InvoicesRestControllerImpl(\n \t\treturn ResponseEntity.notFound().build();\n \t}\n \n+\t@ApiResponses(value = {\n+\t\t\t@ApiResponse(code = 200, message = \"Invoice info retrieved\"),\n+\t\t\t@ApiResponse(code = 401, message = \"You are not authorized\"),\n+\t\t\t@ApiResponse(code = 404, message = \"No Invoice found\"),\n+\t\t\t@ApiResponse(code = 422, message = \"An error happened during Invoice info retrieval\"),\n+\t})\n+\t@GetMapping(path = \"{invoiceId}/invoiceInfo\", produces = \"application/json\")\n+\t@Override\n+\tpublic ResponseEntity<?> getInvoiceInfo(\n+\t\t\t@ApiParam(required = true, value = \"metasfreshId of the invoice\")\n+\t\t\t@PathVariable(\"invoiceId\") final int invoiceRecordId)\n+\t{\n+\t\tfinal InvoiceId invoiceId = InvoiceId.ofRepoIdOrNull(invoiceRecordId);\n+\t\tif (invoiceId == null)\n+\t\t{\n+\t\t\treturn ResponseEntity.notFound().build();\n+\t\t}\n+\n+\t\ttry\n+\t\t{\n+\t\t\tfinal JSONInvoiceInfoResponse invoiceInfo = invoiceService.getInvoiceInfo(invoiceId, Env.getAD_Language());\n+\t\t\treturn ResponseEntity.ok(invoiceInfo);\n+\t\t}\n+\t\tcatch (final Exception e)\n+\t\t{\n+\t\t\treturn ResponseEntity.unprocessableEntity().body(e.getLocalizedMessage());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxNjA2Nw=="}, "originalCommit": {"oid": "b14820c4fa152750a68bf81bb618539b38277fb3"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA5OTI4MA==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540099280", "createdAt": "2020-12-10T11:39:22Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -157,6 +159,35 @@ public InvoicesRestControllerImpl(\n \t\treturn ResponseEntity.notFound().build();\n \t}\n \n+\t@ApiResponses(value = {\n+\t\t\t@ApiResponse(code = 200, message = \"Invoice info retrieved\"),\n+\t\t\t@ApiResponse(code = 401, message = \"You are not authorized\"),\n+\t\t\t@ApiResponse(code = 404, message = \"No Invoice found\"),\n+\t\t\t@ApiResponse(code = 422, message = \"An error happened during Invoice info retrieval\"),\n+\t})\n+\t@GetMapping(path = \"{invoiceId}/invoiceInfo\", produces = \"application/json\")\n+\t@Override\n+\tpublic ResponseEntity<?> getInvoiceInfo(\n+\t\t\t@ApiParam(required = true, value = \"metasfreshId of the invoice\")\n+\t\t\t@PathVariable(\"invoiceId\") final int invoiceRecordId)\n+\t{\n+\t\tfinal InvoiceId invoiceId = InvoiceId.ofRepoIdOrNull(invoiceRecordId);\n+\t\tif (invoiceId == null)\n+\t\t{\n+\t\t\treturn ResponseEntity.notFound().build();\n+\t\t}\n+\n+\t\ttry\n+\t\t{\n+\t\t\tfinal JSONInvoiceInfoResponse invoiceInfo = invoiceService.getInvoiceInfo(invoiceId, Env.getAD_Language());\n+\t\t\treturn ResponseEntity.ok(invoiceInfo);\n+\t\t}\n+\t\tcatch (final Exception e)\n+\t\t{\n+\t\t\treturn ResponseEntity.unprocessableEntity().body(e.getLocalizedMessage());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxNjA2Nw=="}, "originalCommit": {"oid": "b14820c4fa152750a68bf81bb618539b38277fb3"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MDg5NjkxOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.business/src/main/java/de/metas/tax/api/impl/TaxDAO.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwOTo0MDo1OFrOIDAHCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxMTo0MjozOVrOIDFKcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxODQ0Mw==", "bodyText": "now that i am looking, why not using getTaxById... even overriding with a method which takes TaxId as param?", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540018443", "createdAt": "2020-12-10T09:40:58Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.business/src/main/java/de/metas/tax/api/impl/TaxDAO.java", "diffHunk": "@@ -213,4 +190,15 @@ public ITranslatableString getTaxCategoryNameById(@Nullable final TaxCategoryId\n \n \t\treturn Optional.ofNullable(taxCategoryId);\n \t}\n+\n+\t@Override\n+\tpublic Percent getRateById(@NonNull final TaxId taxId)\n+\t{\n+\t\tfinal I_C_Tax tax = queryBL.createQueryBuilder(I_C_Tax.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b14820c4fa152750a68bf81bb618539b38277fb3"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDEwMTIzNQ==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540101235", "createdAt": "2020-12-10T11:42:39Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.business/src/main/java/de/metas/tax/api/impl/TaxDAO.java", "diffHunk": "@@ -213,4 +190,15 @@ public ITranslatableString getTaxCategoryNameById(@Nullable final TaxCategoryId\n \n \t\treturn Optional.ofNullable(taxCategoryId);\n \t}\n+\n+\t@Override\n+\tpublic Percent getRateById(@NonNull final TaxId taxId)\n+\t{\n+\t\tfinal I_C_Tax tax = queryBL.createQueryBuilder(I_C_Tax.class)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxODQ0Mw=="}, "originalCommit": {"oid": "b14820c4fa152750a68bf81bb618539b38277fb3"}, "originalPosition": 84}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MTUyNjcwOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxMjowMDozOVrOIDF0xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxMjowNDozNFrOIDF-Lw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDExMjA2OA==", "bodyText": "isn't de.metas.rest_api.utils.JsonErrors accesible from here?\nthat would create nice instances", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540112068", "createdAt": "2020-12-10T12:00:39Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -157,6 +162,42 @@ public InvoicesRestControllerImpl(\n \t\treturn ResponseEntity.notFound().build();\n \t}\n \n+\t@ApiResponses(value = {\n+\t\t\t@ApiResponse(code = 200, message = \"Invoice info retrieved\"),\n+\t\t\t@ApiResponse(code = 401, message = \"You are not authorized\"),\n+\t\t\t@ApiResponse(code = 404, message = \"No Invoice found\"),\n+\t\t\t@ApiResponse(code = 422, message = \"An error happened during Invoice info retrieval\"),\n+\t})\n+\t@GetMapping(path = \"{invoiceId}/invoiceInfo\", produces = \"application/json\")\n+\t@Override\n+\tpublic ResponseEntity<?> getInvoiceInfo(\n+\t\t\t@ApiParam(required = true, value = \"metasfreshId of the invoice\")\n+\t\t\t@PathVariable(\"invoiceId\") final int invoiceRecordId)\n+\t{\n+\t\tfinal InvoiceId invoiceId = InvoiceId.ofRepoIdOrNull(invoiceRecordId);\n+\t\tif (invoiceId == null)\n+\t\t{\n+\t\t\treturn ResponseEntity.notFound().build();\n+\t\t}\n+\n+\t\ttry\n+\t\t{\n+\t\t\tfinal JSONInvoiceInfoResponse invoiceInfo = invoiceService.getInvoiceInfo(invoiceId, Env.getAD_Language());\n+\t\t\treturn ResponseEntity.ok(invoiceInfo);\n+\t\t}\n+\t\tcatch (final Exception ex)\n+\t\t{\n+\t\t\tfinal JsonError error = JsonError.ofSingleItem(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "507a2af244dd7c89f455fc70e6661da0d539c8c8"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDExNDQ3OQ==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540114479", "createdAt": "2020-12-10T12:04:34Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -157,6 +162,42 @@ public InvoicesRestControllerImpl(\n \t\treturn ResponseEntity.notFound().build();\n \t}\n \n+\t@ApiResponses(value = {\n+\t\t\t@ApiResponse(code = 200, message = \"Invoice info retrieved\"),\n+\t\t\t@ApiResponse(code = 401, message = \"You are not authorized\"),\n+\t\t\t@ApiResponse(code = 404, message = \"No Invoice found\"),\n+\t\t\t@ApiResponse(code = 422, message = \"An error happened during Invoice info retrieval\"),\n+\t})\n+\t@GetMapping(path = \"{invoiceId}/invoiceInfo\", produces = \"application/json\")\n+\t@Override\n+\tpublic ResponseEntity<?> getInvoiceInfo(\n+\t\t\t@ApiParam(required = true, value = \"metasfreshId of the invoice\")\n+\t\t\t@PathVariable(\"invoiceId\") final int invoiceRecordId)\n+\t{\n+\t\tfinal InvoiceId invoiceId = InvoiceId.ofRepoIdOrNull(invoiceRecordId);\n+\t\tif (invoiceId == null)\n+\t\t{\n+\t\t\treturn ResponseEntity.notFound().build();\n+\t\t}\n+\n+\t\ttry\n+\t\t{\n+\t\t\tfinal JSONInvoiceInfoResponse invoiceInfo = invoiceService.getInvoiceInfo(invoiceId, Env.getAD_Language());\n+\t\t\treturn ResponseEntity.ok(invoiceInfo);\n+\t\t}\n+\t\tcatch (final Exception ex)\n+\t\t{\n+\t\t\tfinal JsonError error = JsonError.ofSingleItem(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDExMjA2OA=="}, "originalCommit": {"oid": "507a2af244dd7c89f455fc70e6661da0d539c8c8"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MTUyODAzOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxMjowMDo1NVrOIDF1hA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxMjowNDozOVrOIDF-aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDExMjI2MA==", "bodyText": "same as above", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540112260", "createdAt": "2020-12-10T12:00:55Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -176,9 +217,16 @@ public InvoicesRestControllerImpl(\n \t\t\t\t\t? ResponseEntity.ok(response.get())\n \t\t\t\t\t: ResponseEntity.notFound().build();\n \t\t}\n-\t\tcatch (final Exception e)\n+\t\tcatch (final Exception ex)\n \t\t{\n-\t\t\treturn ResponseEntity.unprocessableEntity().body(e.getLocalizedMessage());\n+\t\t\tfinal JsonError error = JsonError.ofSingleItem(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "507a2af244dd7c89f455fc70e6661da0d539c8c8"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDExNDUzOQ==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540114539", "createdAt": "2020-12-10T12:04:39Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -176,9 +217,16 @@ public InvoicesRestControllerImpl(\n \t\t\t\t\t? ResponseEntity.ok(response.get())\n \t\t\t\t\t: ResponseEntity.notFound().build();\n \t\t}\n-\t\tcatch (final Exception e)\n+\t\tcatch (final Exception ex)\n \t\t{\n-\t\t\treturn ResponseEntity.unprocessableEntity().body(e.getLocalizedMessage());\n+\t\t\tfinal JsonError error = JsonError.ofSingleItem(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDExMjI2MA=="}, "originalCommit": {"oid": "507a2af244dd7c89f455fc70e6661da0d539c8c8"}, "originalPosition": 72}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1089, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}