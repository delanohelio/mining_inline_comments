{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNzI3MTA2", "number": 6708, "title": "E2e 6703 references", "bodyText": "Fix the tests from the picking spec that were failing as a result of changes in the references area\nDitched the endpoint check as it seems is not supported properly by Cypress (sse)\nCheck the loading of references based by reference-Field\nupgraded Cypress to latest version", "createdAt": "2020-05-22T05:43:33Z", "url": "https://github.com/metasfresh/metasfresh/pull/6708", "merged": true, "mergeCommit": {"oid": "04a99d36935b511ae3dbed2403c23649f0046963"}, "closed": true, "closedAt": "2020-05-22T13:29:42Z", "author": {"login": "petrican"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjdAnWgH2gAyNDIxNzI3MTA2OjlhYTA0NmMyZDBhN2U3OTkwNzY1MTU3ZjgyYjUzMjgwZmQ3NTE0MWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjxcVsAH2gAyNDIxNzI3MTA2Ojk3YTc0OWM3MmUxY2M1ZmY5ZTNlYmJiOTNiNWRjNTVjMWIxY2EwOGE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9aa046c2d0a7e7990765157f82b53280fd75141b", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/9aa046c2d0a7e7990765157f82b53280fd75141b", "committedDate": "2020-05-21T12:41:21Z", "message": "Add data-cy attribute with the reference identifier as it will be used in testing #6703"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c358e0d0cc26ca99272831b50d1ca06a0caeb7f", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/7c358e0d0cc26ca99272831b50d1ca06a0caeb7f", "committedDate": "2020-05-21T12:43:12Z", "message": "Upgrade Cypress version to 4.6.0  #6703"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d30a596f6cc2e2342eb1695f63f677f4ee5247ce", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/d30a596f6cc2e2342eb1695f63f677f4ee5247ce", "committedDate": "2020-05-22T05:22:53Z", "message": "Add back the tests from the picking that were broken due to the changes on references #6703"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f07b0a0ec9d906e54edd2dee0f2da1307a9d0f3", "author": {"user": null}, "url": "https://github.com/metasfresh/metasfresh/commit/4f07b0a0ec9d906e54edd2dee0f2da1307a9d0f3", "committedDate": "2020-05-22T05:41:04Z", "message": "Removed debug line #6703"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NzEyNDYw", "url": "https://github.com/metasfresh/metasfresh/pull/6708#pullrequestreview-416712460", "createdAt": "2020-05-22T07:45:52Z", "commit": {"oid": "4f07b0a0ec9d906e54edd2dee0f2da1307a9d0f3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwNzo0NTo1M1rOGZN0ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwNzo0NTo1M1rOGZN0ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTA5Mzk4OA==", "bodyText": "I think [data-cy=\"reference-${referenceId}\"] Could be extracted to a variable, since it's used 3 times.", "url": "https://github.com/metasfresh/metasfresh/pull/6708#discussion_r429093988", "createdAt": "2020-05-22T07:45:53Z", "author": {"login": "TheBestPessimist"}, "path": "e2e/cypress/support/commands/navigation.js", "diffHunk": "@@ -52,17 +52,18 @@ Cypress.Commands.add('openReferencedDocuments', (referenceId, retriesLeft = 8) =\n   checkIfWindowCanExecuteActions();\n \n   if (retriesLeft >= 1) {\n-    const referencesAliasName = `references-${date}`;\n-    cy.server();\n-    cy.route('GET', new RegExp(RewriteURL.REFERENCES)).as(referencesAliasName);\n+    // const referencesAliasName = `references-${date}`;\n+    // cy.server();\n+    // -- removed this as calls to SSE (eventSource) are not recorded, they were introduced in me03/issues -> #4383\n+    // cy.route('GET', new RegExp(RewriteURL.REFERENCES)).as(referencesAliasName);\n \n     cy.get('body').type('{alt}6'); // open referenced docs\n-    cy.wait(`@${referencesAliasName}`, timeout);\n+    // cy.wait(`@${referencesAliasName}`, timeout);  -- this has been also removed due to the reason mentioned above\n     cy.get('.order-list-panel .order-list-loader', timeout).should('not.exist');\n \n     return cy.get('body').then(body => {\n-      if (body.find(`.reference_${referenceId}`).length > 0) {\n-        return cy.get(`.reference_${referenceId}`).click();\n+      if (body.find(`[data-cy=\"reference-${referenceId}\"]`).length > 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f07b0a0ec9d906e54edd2dee0f2da1307a9d0f3"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NzE2NjMw", "url": "https://github.com/metasfresh/metasfresh/pull/6708#pullrequestreview-416716630", "createdAt": "2020-05-22T07:53:11Z", "commit": {"oid": "4f07b0a0ec9d906e54edd2dee0f2da1307a9d0f3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwNzo1MzoxMVrOGZOBTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwNzo1MzoxMVrOGZOBTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTA5NzI5NQ==", "bodyText": "selectItemUsingBarcodeFilter should be added to cypress/support/index.d.ts, with documentation. this helps IDEs figure out how to use the function.", "url": "https://github.com/metasfresh/metasfresh/pull/6708#discussion_r429097295", "createdAt": "2020-05-22T07:53:11Z", "author": {"login": "TheBestPessimist"}, "path": "e2e/cypress/integration/picking/pick_HUs_and_create_shipment.js", "diffHunk": "@@ -91,6 +91,8 @@ describe('Pick the SO', function() {\n     cy.executeQuickActionWithRightSideTable('WEBUI_Picking_HUEditor_Launcher');\n \n     cy.selectItemUsingBarcodeFilter(huValue1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f07b0a0ec9d906e54edd2dee0f2da1307a9d0f3"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b01386752ac353bb23ab8a32d1e8589e318da93", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/4b01386752ac353bb23ab8a32d1e8589e318da93", "committedDate": "2020-05-22T11:13:20Z", "message": "Draft 1 of `selectItemUsingBarcodeFilter`: Works on Handling Unit Editor window\n\nhttps://github.com/metasfresh/metasfresh/issues/6703"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8eaa5d98ebe42dd2aced5c33cd4579c76cc63f9", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/f8eaa5d98ebe42dd2aced5c33cd4579c76cc63f9", "committedDate": "2020-05-22T11:14:10Z", "message": "Update functions which select left/right tables in modal, to enable filters access\n\nhttps://github.com/metasfresh/metasfresh/issues/6703"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e95b1eb766d80f0127fd0f55ef5163a446c518ac", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/e95b1eb766d80f0127fd0f55ef5163a446c518ac", "committedDate": "2020-05-22T11:16:37Z", "message": "Try to improve `selectItemUsingBarcodeFilter`\n\nhttps://github.com/metasfresh/metasfresh/issues/6703"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c43e6605ddaa9009054d57014e8f4ea6c1d80a7a", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/c43e6605ddaa9009054d57014e8f4ea6c1d80a7a", "committedDate": "2020-05-22T11:17:21Z", "message": "Add new constant for QuickActions rest api url\n\nhttps://github.com/metasfresh/metasfresh/issues/6703"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfa431258707ddb23b4de65cfe97c9442aebe4c7", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/bfa431258707ddb23b4de65cfe97c9442aebe4c7", "committedDate": "2020-05-22T12:09:36Z", "message": "Workaround because visiting Handling Unit Editor is slow and filters is not loaded properly\n\nhttps://github.com/metasfresh/metasfresh/issues/6703"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0eba81bcae2d52a5f11b7c7610e30029efed1dcf", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/0eba81bcae2d52a5f11b7c7610e30029efed1dcf", "committedDate": "2020-05-22T12:24:31Z", "message": "Why in the name of sweet holy black baby Jesus are we reading the fixture one thousand damn times?? WHY?\n\nThe fixture should read only once, at the beginning, in step `Read fixture and prepare the names` where all the values are properly set and that's it.\n\nhttps://github.com/metasfresh/metasfresh/issues/6703"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97a749c72e1cc5ff9e3ebbb93b5dc55c1b1ca08a", "author": {"user": {"login": "TheBestPessimist", "name": "TheBestPessimist"}}, "url": "https://github.com/metasfresh/metasfresh/commit/97a749c72e1cc5ff9e3ebbb93b5dc55c1b1ca08a", "committedDate": "2020-05-22T12:29:44Z", "message": "Test works now\n\nhttps://github.com/metasfresh/metasfresh/issues/6703"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3439, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}