{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2NTk5MjIw", "number": 7124, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzozODo1NVrOEZDLMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNToxMDozMlrOEZFkjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NzAxODc0OnYy", "diffSide": "RIGHT", "path": "frontend/src/components/table/TableItem.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzozODo1NVrOHBpI-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzo1NjowNVrOHBp1JQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ4NDY2Ng==", "bodyText": "what mark stands for ?", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471484666", "createdAt": "2020-08-17T13:38:55Z", "author": {"login": "siemiatj"}, "path": "frontend/src/components/table/TableItem.js", "diffHunk": "@@ -75,7 +75,7 @@ class TableItem extends PureComponent {\n     }\n   }\n \n-  initPropertyEditor = (fieldName) => {\n+  initPropertyEditor = ({ fieldName, mark }) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb991cf5aea3bf98b4500bfea6f7c76271c41890"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ5NTk3Mw==", "bodyText": "Done", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471495973", "createdAt": "2020-08-17T13:56:05Z", "author": {"login": "petrican"}, "path": "frontend/src/components/table/TableItem.js", "diffHunk": "@@ -75,7 +75,7 @@ class TableItem extends PureComponent {\n     }\n   }\n \n-  initPropertyEditor = (fieldName) => {\n+  initPropertyEditor = ({ fieldName, mark }) => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ4NDY2Ng=="}, "originalCommit": {"oid": "eb991cf5aea3bf98b4500bfea6f7c76271c41890"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NzAyMTAxOnYy", "diffSide": "RIGHT", "path": "frontend/src/components/table/TableItem.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzozOToyNVrOHBpKZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzo1NTo1N1rOHBp0zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ4NTAyOA==", "bodyText": "Same -> add a comment what mark property is.", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471485028", "createdAt": "2020-08-17T13:39:25Z", "author": {"login": "siemiatj"}, "path": "frontend/src/components/table/TableItem.js", "diffHunk": "@@ -195,9 +203,9 @@ class TableItem extends PureComponent {\n    * @param {object} [item] - widget data object\n    * @param {boolean} [select] - flag if selected cell should be cleared\n    */\n-  handleEditProperty = (e, property, focus, item, select) => {\n+  handleEditProperty = (e, property, focus, item, select, mark) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb991cf5aea3bf98b4500bfea6f7c76271c41890"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ5NTg4Nw==", "bodyText": "Done", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471495887", "createdAt": "2020-08-17T13:55:57Z", "author": {"login": "petrican"}, "path": "frontend/src/components/table/TableItem.js", "diffHunk": "@@ -195,9 +203,9 @@ class TableItem extends PureComponent {\n    * @param {object} [item] - widget data object\n    * @param {boolean} [select] - flag if selected cell should be cleared\n    */\n-  handleEditProperty = (e, property, focus, item, select) => {\n+  handleEditProperty = (e, property, focus, item, select, mark) => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ4NTAyOA=="}, "originalCommit": {"oid": "eb991cf5aea3bf98b4500bfea6f7c76271c41890"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NzAzNTk0OnYy", "diffSide": "RIGHT", "path": "frontend/src/components/table/TableItem.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzo0MzowNFrOHBpTsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNDowMzo0MFrOHBqI3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ4NzQxMA==", "bodyText": "Why do we need to persist the event ? Are we using it in any way and need to access it past this point ?", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471487410", "createdAt": "2020-08-17T13:43:04Z", "author": {"login": "siemiatj"}, "path": "frontend/src/components/table/TableItem.js", "diffHunk": "@@ -212,9 +220,9 @@ class TableItem extends PureComponent {\n    * @param {object} [item] - widget data object\n    * @param {boolean} [select] - flag if selected cell should be cleared\n    */\n-  _editProperty = (e, property, focus, item, select) => {\n+  _editProperty = ({ e, property, focus, item, select, mark }) => {\n     if (item ? !item.readonly : true) {\n-      if (this.state.edited === property && e) e.stopPropagation();\n+      if (this.state.edited === property && e) e.persist(); // e.stopPropagation();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb991cf5aea3bf98b4500bfea6f7c76271c41890"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTUwMTAyMA==", "bodyText": "It is being used when you get the focus on child components. If you are to use e.stopPropagation while editing you will get a bunch of warnings as in the screenshot. This is the reason I removed it and persisted the event.", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471501020", "createdAt": "2020-08-17T14:03:40Z", "author": {"login": "petrican"}, "path": "frontend/src/components/table/TableItem.js", "diffHunk": "@@ -212,9 +220,9 @@ class TableItem extends PureComponent {\n    * @param {object} [item] - widget data object\n    * @param {boolean} [select] - flag if selected cell should be cleared\n    */\n-  _editProperty = (e, property, focus, item, select) => {\n+  _editProperty = ({ e, property, focus, item, select, mark }) => {\n     if (item ? !item.readonly : true) {\n-      if (this.state.edited === property && e) e.stopPropagation();\n+      if (this.state.edited === property && e) e.persist(); // e.stopPropagation();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ4NzQxMA=="}, "originalCommit": {"oid": "eb991cf5aea3bf98b4500bfea6f7c76271c41890"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NzA0Mjk4OnYy", "diffSide": "RIGHT", "path": "frontend/src/components/table/TableWrapper.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzo0NDo0NlrOHBpX_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzo1MToxNlrOHBpo8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ4ODUxMQ==", "bodyText": "What's this comment for ? Is this routine something we need now ? In the future ?", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471488511", "createdAt": "2020-08-17T13:44:46Z", "author": {"login": "siemiatj"}, "path": "frontend/src/components/table/TableWrapper.js", "diffHunk": "@@ -156,6 +156,32 @@ class TableWrapper extends PureComponent {\n     }\n   };\n \n+  handleFocusAction = ({ fieldName, supportFieldEdit }) => {\n+    this.setState({\n+      contextMenu: {\n+        ...this.state.contextMenu,\n+        fieldName,\n+      },\n+      supportFieldEdit,\n+    });\n+  };\n+\n+  handleFastInlineEdit = () => {\n+    const { selected } = this.props;\n+    const { contextMenu, supportFieldEdit } = this.state;\n+    // a routine needs to be added in here - to check if field is allowed to be edited\n+    // if (contextMenu.supportFieldEdit && selected.length === 1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb991cf5aea3bf98b4500bfea6f7c76271c41890"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ5Mjg0OQ==", "bodyText": "Is just from an initial attempt to restrict using the shortcut. Commented out and forgot to remove the comment. Removed now", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471492849", "createdAt": "2020-08-17T13:51:16Z", "author": {"login": "petrican"}, "path": "frontend/src/components/table/TableWrapper.js", "diffHunk": "@@ -156,6 +156,32 @@ class TableWrapper extends PureComponent {\n     }\n   };\n \n+  handleFocusAction = ({ fieldName, supportFieldEdit }) => {\n+    this.setState({\n+      contextMenu: {\n+        ...this.state.contextMenu,\n+        fieldName,\n+      },\n+      supportFieldEdit,\n+    });\n+  };\n+\n+  handleFastInlineEdit = () => {\n+    const { selected } = this.props;\n+    const { contextMenu, supportFieldEdit } = this.state;\n+    // a routine needs to be added in here - to check if field is allowed to be edited\n+    // if (contextMenu.supportFieldEdit && selected.length === 1) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ4ODUxMQ=="}, "originalCommit": {"oid": "eb991cf5aea3bf98b4500bfea6f7c76271c41890"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NzQxMTMzOnYy", "diffSide": "RIGHT", "path": "frontend/src/components/table/TableItem.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNToxMDozMlrOHBs4aA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwNDo1ODozMlrOHCDXgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTU0NTk2MA==", "bodyText": "My comment was about persist, not stopPropagation", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471545960", "createdAt": "2020-08-17T15:10:32Z", "author": {"login": "siemiatj"}, "path": "frontend/src/components/table/TableItem.js", "diffHunk": "@@ -228,7 +228,7 @@ class TableItem extends PureComponent {\n    */\n   _editProperty = ({ e, property, focus, item, select, mark }) => {\n     if (item ? !item.readonly : true) {\n-      if (this.state.edited === property && e) e.persist(); // e.stopPropagation();\n+      if (this.state.edited === property && e) e.persist();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4099e9ee38e86b62b06610392e8395200b3f2932"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTkxNDM3MQ==", "bodyText": "\"If you want to access the event properties in an asynchronous way, you should call event.persist() on the event, which will remove the synthetic event from the pool and allow references to the event to be retained by user code.\"  - With other words if we do a setState down below using the event and we need data from it we use that\n\nIf you do otherwise you'll get nullified event props.", "url": "https://github.com/metasfresh/metasfresh/pull/7124#discussion_r471914371", "createdAt": "2020-08-18T04:58:32Z", "author": {"login": "petrican"}, "path": "frontend/src/components/table/TableItem.js", "diffHunk": "@@ -228,7 +228,7 @@ class TableItem extends PureComponent {\n    */\n   _editProperty = ({ e, property, focus, item, select, mark }) => {\n     if (item ? !item.readonly : true) {\n-      if (this.state.edited === property && e) e.persist(); // e.stopPropagation();\n+      if (this.state.edited === property && e) e.persist();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTU0NTk2MA=="}, "originalCommit": {"oid": "4099e9ee38e86b62b06610392e8395200b3f2932"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1365, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}