{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMDQ3NDI0", "number": 6686, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxMToyMzo1M1rOD9wPzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxMToyNDowM1rOD9wP-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MDgwMjA2OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.banking/de.metas.banking.base/src/main/java/de/metas/banking/payment/impl/PaySelectionUpdater.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxMToyMzo1M1rOGXb1Cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxMTozMzo1M1rOGXcJmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzIyNjM3OA==", "bodyText": "pls change !='ARC' to ='ARI'.\nReason: avoid future doc base types to be matched by this rule.", "url": "https://github.com/metasfresh/metasfresh/pull/6686#discussion_r427226378", "createdAt": "2020-05-19T11:23:53Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.banking/de.metas.banking.base/src/main/java/de/metas/banking/payment/impl/PaySelectionUpdater.java", "diffHunk": "@@ -386,7 +386,7 @@ else if (getC_BP_Group_ID() > 0)\n \tprivate String buildSelectSQL_MatchRequirement()\n \t{\n \t\tfinal String whereCreditTransferToVendor = \" i.IsSOTrx='N' AND i.PaymentRule IN ('\" + PaymentRule.DirectDeposit.getCode() + \"','\" + PaymentRule.OnCredit.getCode() + \"') \";\n-\t\tfinal String whereDirectDebitFromCustomer = \" i.IsSOTrx='Y' AND dt.DocBaseType!='ARC' AND i.PaymentRule IN ('\" + PaymentRule.DirectDebit.getCode() + \"') \";\n+\t\tfinal String whereDirectDebitFromCustomer = \" i.IsSOTrx='Y' AND dt.DocBaseType!='ARC' AND i.PaymentRule IN ('\" + PaymentRule.DirectDebit.getCode() + \"','\" + PaymentRule.OnCredit.getCode() + \"') \";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6efd55973b43eac901782037c1eb5c52034f261"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzIzMTY0Mg==", "bodyText": "Done", "url": "https://github.com/metasfresh/metasfresh/pull/6686#discussion_r427231642", "createdAt": "2020-05-19T11:33:53Z", "author": {"login": "metas-rc"}, "path": "backend/de.metas.banking/de.metas.banking.base/src/main/java/de/metas/banking/payment/impl/PaySelectionUpdater.java", "diffHunk": "@@ -386,7 +386,7 @@ else if (getC_BP_Group_ID() > 0)\n \tprivate String buildSelectSQL_MatchRequirement()\n \t{\n \t\tfinal String whereCreditTransferToVendor = \" i.IsSOTrx='N' AND i.PaymentRule IN ('\" + PaymentRule.DirectDeposit.getCode() + \"','\" + PaymentRule.OnCredit.getCode() + \"') \";\n-\t\tfinal String whereDirectDebitFromCustomer = \" i.IsSOTrx='Y' AND dt.DocBaseType!='ARC' AND i.PaymentRule IN ('\" + PaymentRule.DirectDebit.getCode() + \"') \";\n+\t\tfinal String whereDirectDebitFromCustomer = \" i.IsSOTrx='Y' AND dt.DocBaseType!='ARC' AND i.PaymentRule IN ('\" + PaymentRule.DirectDebit.getCode() + \"','\" + PaymentRule.OnCredit.getCode() + \"') \";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzIyNjM3OA=="}, "originalCommit": {"oid": "e6efd55973b43eac901782037c1eb5c52034f261"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MDgwMjUwOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.payment.sepa/base/src/main/sql/postgresql/ddl/views/C_Invoice_PaySelectionTrxType_V.sql", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxMToyNDowM1rOGXb1Vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxMTozMzo1OFrOGXcJyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzIyNjQ1NA==", "bodyText": "pls change !='ARC' to ='ARI'.\nReason: avoid future doc base types to be matched by this rule.", "url": "https://github.com/metasfresh/metasfresh/pull/6686#discussion_r427226454", "createdAt": "2020-05-19T11:24:03Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.payment.sepa/base/src/main/sql/postgresql/ddl/views/C_Invoice_PaySelectionTrxType_V.sql", "diffHunk": "@@ -4,8 +4,8 @@ CREATE OR REPLACE VIEW C_Invoice_PaySelectionTrxType_V AS\n SELECT C_Invoice_ID,\n \tCASE \n \t\tWHEN /* CREDIT_TRANSFER_TO_VENDOR - \"OUT\" */ i.IsSOTrx='N' AND i.PaymentRule IN ('T'/*DirectDeposit*/, 'P'/*OnCredit*/) AND i.DocStatus IN ('CO', 'CL') THEN 'CT'\n-\t\tWHEN /* DIRECT_DEBIT_FROM_CUSTOMER - \"CDD\" */ i.IsSOTrx='Y' AND dt.DocBaseType = 'ARC' AND i.PaymentRule IN ('D'/*DirectDebit*/) AND i.DocStatus IN ('CO', 'CL') THEN 'DD'\n-\t\tWHEN /* CREDIT_TRANSFER_TO_CUSTOMER - \"CRE\" */ i.IsSOTrx='Y' AND dt.DocBaseType = 'ARC' AND i.PaymentRule IN ('T'/*DirectDeposit*/) AND i.DocStatus IN ('CO', 'CL') THEN 'CT'\n+\t\tWHEN /* DIRECT_DEBIT_FROM_CUSTOMER - \"CDD\" */ i.IsSOTrx='Y' AND dt.DocBaseType != 'ARC' AND i.PaymentRule IN ('D'/*DirectDebit*/, 'P'/*OnCredit*/) AND i.DocStatus IN ('CO', 'CL') THEN 'DD'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6efd55973b43eac901782037c1eb5c52034f261"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzIzMTY4OQ==", "bodyText": "Done", "url": "https://github.com/metasfresh/metasfresh/pull/6686#discussion_r427231689", "createdAt": "2020-05-19T11:33:58Z", "author": {"login": "metas-rc"}, "path": "backend/de.metas.payment.sepa/base/src/main/sql/postgresql/ddl/views/C_Invoice_PaySelectionTrxType_V.sql", "diffHunk": "@@ -4,8 +4,8 @@ CREATE OR REPLACE VIEW C_Invoice_PaySelectionTrxType_V AS\n SELECT C_Invoice_ID,\n \tCASE \n \t\tWHEN /* CREDIT_TRANSFER_TO_VENDOR - \"OUT\" */ i.IsSOTrx='N' AND i.PaymentRule IN ('T'/*DirectDeposit*/, 'P'/*OnCredit*/) AND i.DocStatus IN ('CO', 'CL') THEN 'CT'\n-\t\tWHEN /* DIRECT_DEBIT_FROM_CUSTOMER - \"CDD\" */ i.IsSOTrx='Y' AND dt.DocBaseType = 'ARC' AND i.PaymentRule IN ('D'/*DirectDebit*/) AND i.DocStatus IN ('CO', 'CL') THEN 'DD'\n-\t\tWHEN /* CREDIT_TRANSFER_TO_CUSTOMER - \"CRE\" */ i.IsSOTrx='Y' AND dt.DocBaseType = 'ARC' AND i.PaymentRule IN ('T'/*DirectDeposit*/) AND i.DocStatus IN ('CO', 'CL') THEN 'CT'\n+\t\tWHEN /* DIRECT_DEBIT_FROM_CUSTOMER - \"CDD\" */ i.IsSOTrx='Y' AND dt.DocBaseType != 'ARC' AND i.PaymentRule IN ('D'/*DirectDebit*/, 'P'/*OnCredit*/) AND i.DocStatus IN ('CO', 'CL') THEN 'DD'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzIyNjQ1NA=="}, "originalCommit": {"oid": "e6efd55973b43eac901782037c1eb5c52034f261"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1530, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}