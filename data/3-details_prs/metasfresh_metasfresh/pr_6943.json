{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzMzI0NjYz", "number": 6943, "title": "#6938 Use price pattern form price list", "bodyText": "#6938 Jasper Pricelist & Pricelist comparison correct digits in prices", "createdAt": "2020-07-02T07:17:35Z", "url": "https://github.com/metasfresh/metasfresh/pull/6943", "merged": true, "mergeCommit": {"oid": "5b452529093039782fce1a7ad7af97e8a18c06c7"}, "closed": true, "closedAt": "2020-07-02T07:56:12Z", "author": {"login": "cristinamghita"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwrj93gH2gAyNDQzMzI0NjYzOjI1NTE4OTE3OTY3ZmNiYjhkMWQ5NjAxYzBiZWM5MDk2YWI1MjliNjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcw6Fp3gFqTQ0MTQxNjMwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "25518917967fcbb8d1d9601c0bec9096ab529b60", "author": {"user": {"login": "cristinamghita", "name": "Cristina Ghita"}}, "url": "https://github.com/metasfresh/metasfresh/commit/25518917967fcbb8d1d9601c0bec9096ab529b60", "committedDate": "2020-07-01T14:59:39Z", "message": "#6938 Do not round in view and exttract price pattern"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "898cd9a7a00d5609a78a7697cfe8e5aa04d63712", "author": {"user": {"login": "cristinamghita", "name": "Cristina Ghita"}}, "url": "https://github.com/metasfresh/metasfresh/commit/898cd9a7a00d5609a78a7697cfe8e5aa04d63712", "committedDate": "2020-07-01T15:39:23Z", "message": "#6938 Add price pattern"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "825aced06999043e9a1cfa258401656676af392b", "author": {"user": {"login": "cristinamghita", "name": "Cristina Ghita"}}, "url": "https://github.com/metasfresh/metasfresh/commit/825aced06999043e9a1cfa258401656676af392b", "committedDate": "2020-07-02T07:08:56Z", "message": "#6938 Add price pattern"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81d2fb66d87acf7f4fe6da8ce176c2b99a0c998f", "author": {"user": {"login": "cristinamghita", "name": "Cristina Ghita"}}, "url": "https://github.com/metasfresh/metasfresh/commit/81d2fb66d87acf7f4fe6da8ce176c2b99a0c998f", "committedDate": "2020-07-02T07:32:02Z", "message": "Correc tuat file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNDE2MzA3", "url": "https://github.com/metasfresh/metasfresh/pull/6943#pullrequestreview-441416307", "createdAt": "2020-07-02T07:27:18Z", "commit": {"oid": "825aced06999043e9a1cfa258401656676af392b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwNzoyNzoxOFrOGsAqdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwNzoyNzoxOFrOGsAqdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODgwMTM5Nw==", "bodyText": "why not use '#,##0.000000000000' instead?", "url": "https://github.com/metasfresh/metasfresh/pull/6943#discussion_r448801397", "createdAt": "2020-07-02T07:27:18Z", "author": {"login": "metas-ts"}, "path": "backend/de.metas.fresh/de.metas.fresh.base/src/main/sql/postgresql/ddl/views/RV_fresh_PriceList_Comparison.sql", "diffHunk": "@@ -14,35 +14,43 @@ SELECT pp.AD_Org_ID,\n        pp.IsActive,\n \n        -- Displayed pricelist data\n-       pc.Name                                                                    AS ProductCategory,\n-       pc.value                                                                   AS ProductCategoryValue,\n+       pc.Name                                                                          AS ProductCategory,\n+       pc.value                                                                         AS ProductCategoryValue,\n        p.M_Product_ID,\n        p.Value,\n-       p.Name                                                                     AS ProductName,\n+       p.Name                                                                           AS ProductName,\n        pp.IsSeasonFixedPrice,\n-       hupip.Name                                                                 AS ItemProductName,\n-       pm.Name                                                                    AS PackingMaterialName,\n-       ROUND(COALESCE(ppa.PriceStd, pp.PriceStd), coalesce(pl.priceprecision, 2)) AS PriceStd,\n-       ROUND(pp2.PriceStd, coalesce(pl2.priceprecision, 2))                       AS AltPriceStd,\n-       CASE WHEN pp2.PriceStd IS NULL THEN 0 ELSE 1 END                           AS hasaltprice,\n+       hupip.Name                                                                       AS ItemProductName,\n+       pm.Name                                                                          AS PackingMaterialName,\n+       COALESCE(ppa.PriceStd, pp.PriceStd)                                              AS PriceStd,\n+       CASE\n+           WHEN pl.priceprecision = 0\n+               THEN '#,##0'\n+           ELSE Substring('#,##0.000' FROM 0 FOR 7 + pl.priceprecision :: integer) END  AS PricePattern1,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "825aced06999043e9a1cfa258401656676af392b"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3306, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}