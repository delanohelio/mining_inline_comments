{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MTM1Nzgw", "number": 6839, "title": "[WebUI] Support returning a 2xx status code for non-existing document rows", "bodyText": "#6838", "createdAt": "2020-06-14T12:11:31Z", "url": "https://github.com/metasfresh/metasfresh/pull/6839", "merged": true, "mergeCommit": {"oid": "1af08fc1d539a3a6b780641f4c6540e34a864c84"}, "closed": true, "closedAt": "2020-07-13T19:56:15Z", "author": {"login": "teosarca"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwERYRgFqTQzOTM0NDA3NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0k-L5gH2gAyNDM0MTM1NzgwOjZjMjFhM2M3NzE3MzRlNTU1NDdjMDBlMzA2OWE5ZmJiMmVhZGExYWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MzQ0MDc1", "url": "https://github.com/metasfresh/metasfresh/pull/6839#pullrequestreview-439344075", "createdAt": "2020-06-29T17:13:03Z", "commit": {"oid": "98a28ba9fc91d046587c2711e3be4ab9abd8af98"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NjY4NzU4", "url": "https://github.com/metasfresh/metasfresh/pull/6839#pullrequestreview-439668758", "createdAt": "2020-06-30T04:53:59Z", "commit": {"oid": "98a28ba9fc91d046587c2711e3be4ab9abd8af98"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNDo1Mzo1OVrOGqrppg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNDo1NjoyMFrOGqrsVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQwODU1MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t// final DocumentPath documentPath = parentDocument\n          \n          \n            \n            \t\t\t// .getDocumentPath()\n          \n          \n            \n            \t\t\t// .createChildPath(entityDescriptor.getDetailId(), documentId);\n          \n          \n            \n            \t\t\t// throw new DocumentNotFoundException(documentPath);", "url": "https://github.com/metasfresh/metasfresh/pull/6839#discussion_r447408550", "createdAt": "2020-06-30T04:53:59Z", "author": {"login": "metas-ts"}, "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/window/model/HighVolumeReadonlyIncludedDocumentsCollection.java", "diffHunk": "@@ -121,21 +121,22 @@ else if (documentIds.isEmpty())\n \t}\n \n \t@Override\n-\tpublic Document getDocumentById(final DocumentId documentId)\n+\tpublic Optional<Document> getDocumentById(final DocumentId documentId)\n \t{\n \t\tfinal Document document = DocumentQuery.builder(entityDescriptor)\n \t\t\t\t.setParentDocument(parentDocument)\n \t\t\t\t.setRecordId(documentId)\n \t\t\t\t.retriveDocumentOrNull();\n \t\tif (document == null)\n \t\t{\n-\t\t\tfinal DocumentPath documentPath = parentDocument\n-\t\t\t\t\t.getDocumentPath()\n-\t\t\t\t\t.createChildPath(entityDescriptor.getDetailId(), documentId);\n-\t\t\tthrow new DocumentNotFoundException(documentPath);\n+\t\t\t// final DocumentPath documentPath = parentDocument\n+\t\t\t// .getDocumentPath()\n+\t\t\t// .createChildPath(entityDescriptor.getDetailId(), documentId);\n+\t\t\t// throw new DocumentNotFoundException(documentPath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98a28ba9fc91d046587c2711e3be4ab9abd8af98"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQwOTIzNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t// final DocumentPath documentPath = parentDocumentPath.createChildPath(detailId, documentId);\n          \n          \n            \n            \t\t\t// throw new DocumentNotFoundException(documentPath);", "url": "https://github.com/metasfresh/metasfresh/pull/6839#discussion_r447409236", "createdAt": "2020-06-30T04:56:20Z", "author": {"login": "metas-ts"}, "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/window/model/HighVolumeReadWriteIncludedDocumentsCollection.java", "diffHunk": "@@ -261,11 +262,12 @@ public Document getDocumentById(@NonNull final DocumentId documentId)\n \t\t\t\t.retriveDocumentOrNull();\n \t\tif (documentRetrieved == null)\n \t\t{\n-\t\t\tfinal DocumentPath documentPath = parentDocumentPath.createChildPath(detailId, documentId);\n-\t\t\tthrow new DocumentNotFoundException(documentPath);\n+\t\t\t// final DocumentPath documentPath = parentDocumentPath.createChildPath(detailId, documentId);\n+\t\t\t// throw new DocumentNotFoundException(documentPath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98a28ba9fc91d046587c2711e3be4ab9abd8af98"}, "originalPosition": 43}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e2364790104862f084efab3c4a2ce5c04b884bf9", "author": {"user": {"login": "teosarca", "name": "Teo Sarca"}}, "url": "https://github.com/metasfresh/metasfresh/commit/e2364790104862f084efab3c4a2ce5c04b884bf9", "committedDate": "2020-06-30T05:23:11Z", "message": "Update backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/window/model/HighVolumeReadWriteIncludedDocumentsCollection.java\n\nCo-authored-by: Tobias Sch\u00f6neberg <metas-ts@users.noreply.github.com>"}, "afterCommit": {"oid": "67d456be383deb4086f413e98437db8e17e89593", "author": {"user": {"login": "teosarca", "name": "Teo Sarca"}}, "url": "https://github.com/metasfresh/metasfresh/commit/67d456be383deb4086f413e98437db8e17e89593", "committedDate": "2020-07-07T10:03:12Z", "message": "Update backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/window/model/HighVolumeReadWriteIncludedDocumentsCollection.java\n\nCo-authored-by: Tobias Sch\u00f6neberg <metas-ts@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NzI0OTc2", "url": "https://github.com/metasfresh/metasfresh/pull/6839#pullrequestreview-444724976", "createdAt": "2020-07-08T12:42:53Z", "commit": {"oid": "439d399be66813622cd50f6390786ea55056cd0a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMjo0Mjo1M1rOGumQcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMjo0Mjo1M1rOGumQcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTUxNDQ4Mw==", "bodyText": "shoulnd't we have a test with some data in the document list as well?", "url": "https://github.com/metasfresh/metasfresh/pull/6839#discussion_r451514483", "createdAt": "2020-07-08T12:42:53Z", "author": {"login": "TheBestPessimist"}, "path": "backend/metasfresh-webui-api/src/test/java/de/metas/ui/web/window/datatypes/json/JSONDocumentListTest.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package de.metas.ui.web.window.datatypes.json;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import org.adempiere.exceptions.AdempiereException;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+\n+import de.metas.JsonObjectMapperHolder;\n+\n+/*\n+ * #%L\n+ * metasfresh-webui-api\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ * \n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ * \n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+public class JSONDocumentListTest\n+{\n+\tprivate ObjectMapper jsonObjectMapper;\n+\n+\t@BeforeEach\n+\tpublic void init()\n+\t{\n+\t\tjsonObjectMapper = JsonObjectMapperHolder.newJsonObjectMapper();\n+\t}\n+\n+\t@Test\n+\tpublic void testSerialize()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439d399be66813622cd50f6390786ea55056cd0a"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a385d739fc8561d9dea5df0bc0ab29a321f4a627", "author": {"user": {"login": "siemiatj", "name": "Kuba Siemi\u0105tkowski"}}, "url": "https://github.com/metasfresh/metasfresh/commit/a385d739fc8561d9dea5df0bc0ab29a321f4a627", "committedDate": "2020-07-09T12:38:55Z", "message": "#6838 support new format of data returned from the API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34278dde234a3da95eb4258d2dbfc83272e50b07", "author": {"user": {"login": "siemiatj", "name": "Kuba Siemi\u0105tkowski"}}, "url": "https://github.com/metasfresh/metasfresh/commit/34278dde234a3da95eb4258d2dbfc83272e50b07", "committedDate": "2020-07-09T12:38:55Z", "message": "- tmp debug logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91fc6630a4564181a17a2ee650409fd733f04e5c", "author": {"user": {"login": "siemiatj", "name": "Kuba Siemi\u0105tkowski"}}, "url": "https://github.com/metasfresh/metasfresh/commit/91fc6630a4564181a17a2ee650409fd733f04e5c", "committedDate": "2020-07-09T12:38:55Z", "message": "Revert \"- tmp debug logs\"\n\nThis reverts commit 651e2fb67b36cebd3dcf60a62801f73efbbbb7d6."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "369ef02ead7c965b4673edf12281b512b53aa863", "author": {"user": {"login": "teosarca", "name": "Teo Sarca"}}, "url": "https://github.com/metasfresh/metasfresh/commit/369ef02ead7c965b4673edf12281b512b53aa863", "committedDate": "2020-07-09T12:38:55Z", "message": "webui backend: Support returning a 2xx status code for non-existing document rows\n\nhttps://github.com/metasfresh/metasfresh/issues/6838"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a89eab7b72656a14eefbfee95b572ad7893b24e", "author": {"user": {"login": "teosarca", "name": "Teo Sarca"}}, "url": "https://github.com/metasfresh/metasfresh/commit/7a89eab7b72656a14eefbfee95b572ad7893b24e", "committedDate": "2020-07-09T12:38:55Z", "message": "hotfix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3253789b3b601258166ec3ae2a871b6072efb1d", "author": {"user": {"login": "teosarca", "name": "Teo Sarca"}}, "url": "https://github.com/metasfresh/metasfresh/commit/a3253789b3b601258166ec3ae2a871b6072efb1d", "committedDate": "2020-07-09T12:38:56Z", "message": "Update backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/window/model/HighVolumeReadonlyIncludedDocumentsCollection.java\n\nCo-authored-by: Tobias Sch\u00f6neberg <metas-ts@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02103af06c88e8a1a1af914a06d9ea16c2a01377", "author": {"user": {"login": "teosarca", "name": "Teo Sarca"}}, "url": "https://github.com/metasfresh/metasfresh/commit/02103af06c88e8a1a1af914a06d9ea16c2a01377", "committedDate": "2020-07-09T12:38:56Z", "message": "Update backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/window/model/HighVolumeReadWriteIncludedDocumentsCollection.java\n\nCo-authored-by: Tobias Sch\u00f6neberg <metas-ts@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64246f493041759d221bee3f6cafdc5df4dadf76", "author": {"user": {"login": "siemiatj", "name": "Kuba Siemi\u0105tkowski"}}, "url": "https://github.com/metasfresh/metasfresh/commit/64246f493041759d221bee3f6cafdc5df4dadf76", "committedDate": "2020-07-09T12:38:56Z", "message": "#6838 fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d69da135f5348a0bb6d88a74b0ea9428f5e07b8", "author": {"user": {"login": "siemiatj", "name": "Kuba Siemi\u0105tkowski"}}, "url": "https://github.com/metasfresh/metasfresh/commit/4d69da135f5348a0bb6d88a74b0ea9428f5e07b8", "committedDate": "2020-07-09T12:38:56Z", "message": "#6838 support both removed and edited rows at the same time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "627ec15f12ad7325e9f563153c724de8760766ec", "author": {"user": {"login": "siemiatj", "name": "Kuba Siemi\u0105tkowski"}}, "url": "https://github.com/metasfresh/metasfresh/commit/627ec15f12ad7325e9f563153c724de8760766ec", "committedDate": "2020-07-09T12:38:56Z", "message": "#6838 add tests for refreshing all rows in a tab"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c6e6b081b8c733bfe6785d176a43dd009eccb38e", "author": {"user": {"login": "siemiatj", "name": "Kuba Siemi\u0105tkowski"}}, "url": "https://github.com/metasfresh/metasfresh/commit/c6e6b081b8c733bfe6785d176a43dd009eccb38e", "committedDate": "2020-07-09T10:55:01Z", "message": "#6838 add tests for refreshing all rows in a tab"}, "afterCommit": {"oid": "627ec15f12ad7325e9f563153c724de8760766ec", "author": {"user": {"login": "siemiatj", "name": "Kuba Siemi\u0105tkowski"}}, "url": "https://github.com/metasfresh/metasfresh/commit/627ec15f12ad7325e9f563153c724de8760766ec", "committedDate": "2020-07-09T12:38:56Z", "message": "#6838 add tests for refreshing all rows in a tab"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c21a3c771734e55547c00e3069a9fbb2eada1ae", "author": {"user": {"login": "siemiatj", "name": "Kuba Siemi\u0105tkowski"}}, "url": "https://github.com/metasfresh/metasfresh/commit/6c21a3c771734e55547c00e3069a9fbb2eada1ae", "committedDate": "2020-07-13T17:34:39Z", "message": "#6838 update e2e tests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3378, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}