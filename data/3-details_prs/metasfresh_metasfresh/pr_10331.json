{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5NDI0OTc3", "number": 10331, "title": "Propagate the salespartner-ID to the C_Order", "bodyText": "#10330", "createdAt": "2020-11-30T09:47:15Z", "url": "https://github.com/metasfresh/metasfresh/pull/10331", "merged": true, "mergeCommit": {"oid": "b44112877843144251e60d321f2d7eeee4c8f8b6"}, "closed": true, "closedAt": "2020-11-30T18:17:57Z", "author": {"login": "metas-ts"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhiJsnAH2gAyNTI5NDI0OTc3OmZhNWJkOTNhOWQ0YmM0NWZlYjNlZGQ1NzY3YzY4OTA5YmNhYzcxYjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhpehfgH2gAyNTI5NDI0OTc3OmM5OWM4NjRmYmE4NTI0NzZkMmYyNDQ4NGQ4MzhiYTE2NTE2NDEwZWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fa5bd93a9d4bc45feb3edd5767c68909bcac71b3", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/fa5bd93a9d4bc45feb3edd5767c68909bcac71b3", "committedDate": "2020-11-30T09:44:06Z", "message": "Propagate the salespartner-ID to the C_Order\n\n#10330"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNzQ0NDcy", "url": "https://github.com/metasfresh/metasfresh/pull/10331#pullrequestreview-540744472", "createdAt": "2020-11-30T09:48:16Z", "commit": {"oid": "fa5bd93a9d4bc45feb3edd5767c68909bcac71b3"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fc4543feaacaed8139d843d9cf6b459ff84aebd", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/7fc4543feaacaed8139d843d9cf6b459ff84aebd", "committedDate": "2020-11-30T13:12:57Z", "message": "found and hopefully fixed the actual problem\n\n#10330"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd52ff8e2fb119914eb2523c85a9f8a3fb99a08c", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/cd52ff8e2fb119914eb2523c85a9f8a3fb99a08c", "committedDate": "2020-11-30T13:58:28Z", "message": "attempt to update master data as well\n\n#10330"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMTcwMzQ2", "url": "https://github.com/metasfresh/metasfresh/pull/10331#pullrequestreview-541170346", "createdAt": "2020-11-30T18:15:00Z", "commit": {"oid": "cd52ff8e2fb119914eb2523c85a9f8a3fb99a08c"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxODoxNTowMFrOH8HnMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxODoxNTowOFrOH8Hnkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjgwMTMzMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t// then don't override the sales partner from the BPartners' mater data, but assume that the sales partner shall remain the way it is.\n          \n          \n            \n            \t\t// then don't override the sales-partner-id from the BPartners' mater data, but assume that the sales-partner-id shall remain the way it was set on the new record.\n          \n          \n            \n            \t\t// This implies that the master data might be updated on thid C_Order's after-new modelinterceptor method", "url": "https://github.com/metasfresh/metasfresh/pull/10331#discussion_r532801331", "createdAt": "2020-11-30T18:15:00Z", "author": {"login": "metas-ts"}, "path": "backend/de.metas.contracts/src/main/java/de/metas/contracts/commission/salesrep/interceptor/C_Order.java", "diffHunk": "@@ -62,8 +63,21 @@ public C_Order(\n \t\tServices.get(IProgramaticCalloutProvider.class).registerAnnotatedCallout(this);\n \t}\n \n+\t@ModelChange(\n+\t\t\ttimings = { ModelValidator.TYPE_BEFORE_NEW, ModelValidator.TYPE_BEFORE_CHANGE },\n+\t\t\tifColumnsChanged = { I_C_Order.COLUMNNAME_C_BPartner_ID, I_C_Order.COLUMNNAME_Bill_BPartner_ID })\n+\tpublic void updateSalesPartnerFromCustomer(@NonNull final I_C_Order orderRecord, @NonNull final ModelChangeType type)\n+\t{\n+\t\t// if on a new C_Order record both SalesPartnerCode and the BPartner-IDs were set at the same time,\n+\t\t// then don't override the sales partner from the BPartners' mater data, but assume that the sales partner shall remain the way it is.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd52ff8e2fb119914eb2523c85a9f8a3fb99a08c"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjgwMTQyNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t// if on a new C_Order record both SalesPartnerCode and the BPartner-IDs were set at the same time,\n          \n          \n            \n            \t\t// If on a new C_Order record both SalesPartnerCode and the BPartner-IDs were set at the same time,", "url": "https://github.com/metasfresh/metasfresh/pull/10331#discussion_r532801426", "createdAt": "2020-11-30T18:15:08Z", "author": {"login": "metas-ts"}, "path": "backend/de.metas.contracts/src/main/java/de/metas/contracts/commission/salesrep/interceptor/C_Order.java", "diffHunk": "@@ -62,8 +63,21 @@ public C_Order(\n \t\tServices.get(IProgramaticCalloutProvider.class).registerAnnotatedCallout(this);\n \t}\n \n+\t@ModelChange(\n+\t\t\ttimings = { ModelValidator.TYPE_BEFORE_NEW, ModelValidator.TYPE_BEFORE_CHANGE },\n+\t\t\tifColumnsChanged = { I_C_Order.COLUMNNAME_C_BPartner_ID, I_C_Order.COLUMNNAME_Bill_BPartner_ID })\n+\tpublic void updateSalesPartnerFromCustomer(@NonNull final I_C_Order orderRecord, @NonNull final ModelChangeType type)\n+\t{\n+\t\t// if on a new C_Order record both SalesPartnerCode and the BPartner-IDs were set at the same time,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd52ff8e2fb119914eb2523c85a9f8a3fb99a08c"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c99c864fba852476d2f24484d838ba16516410eb", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/c99c864fba852476d2f24484d838ba16516410eb", "committedDate": "2020-11-30T18:16:11Z", "message": "Apply suggestions from code review\r\n\r\n#10330"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2927, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}