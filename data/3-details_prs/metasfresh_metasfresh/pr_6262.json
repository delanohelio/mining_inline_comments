{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5NjYxMTcw", "number": 6262, "title": "Update Total Amount of Payment Selection.", "bodyText": "#6261", "createdAt": "2020-02-25T15:45:59Z", "url": "https://github.com/metasfresh/metasfresh/pull/6262", "merged": true, "mergeCommit": {"oid": "cb57b9985abe5d6d74ffb6c7018e1d922e3f91f0"}, "closed": true, "closedAt": "2020-02-27T07:48:43Z", "author": {"login": "dragospodariu96"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHz3uxgH2gAyMzc5NjYxMTcwOmFmMmMxZGRjOTJjNzI2ODEzYzExZjc0Mzc3MmI2YzBhNmEzZDQ3OTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIILEAAH2gAyMzc5NjYxMTcwOjU4NWU3ZmI1NmNhZDUxY2VmN2I0YzdkMTkxMjA2NTg2ZmUzNmVhOWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "af2c1ddc92c726813c11f743772b6c0a6a3d4792", "author": {"user": {"login": "dragospodariu96", "name": null}}, "url": "https://github.com/metasfresh/metasfresh/commit/af2c1ddc92c726813c11f743772b6c0a6a3d4792", "committedDate": "2020-02-25T15:29:35Z", "message": "#4051 Now updating total ammound after adding a new payselection line to completed pay selection."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67d37e2a5d0293d48e58a6488560f5db2bb4254b", "author": {"user": {"login": "dragospodariu96", "name": null}}, "url": "https://github.com/metasfresh/metasfresh/commit/67d37e2a5d0293d48e58a6488560f5db2bb4254b", "committedDate": "2020-02-25T15:32:33Z", "message": "Merge branch 'master' into gh4051"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0ODU3MDQy", "url": "https://github.com/metasfresh/metasfresh/pull/6262#pullrequestreview-364857042", "createdAt": "2020-02-26T12:27:45Z", "commit": {"oid": "67d37e2a5d0293d48e58a6488560f5db2bb4254b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxMjoyNzo0NVrOFupmpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxMjozMjoyN1rOFupu7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ2MDQ1Mg==", "bodyText": "why full cache reset is needed?", "url": "https://github.com/metasfresh/metasfresh/pull/6262#discussion_r384460452", "createdAt": "2020-02-26T12:27:45Z", "author": {"login": "teosarca"}, "path": "de.metas.banking/de.metas.banking.base/src/main/java/de/metas/banking/payment/impl/PaySelectionUpdater.java", "diffHunk": "@@ -153,6 +175,7 @@ public void run(final String localTrxName) throws Exception\n \t\t\t\tsetTrxName(localTrxName);\n \n \t\t\t\tupdate0();\n+\t\t\t\tCacheMgt.get().reset();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67d37e2a5d0293d48e58a6488560f5db2bb4254b"}, "originalPosition": 128}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ2MjEwMA==", "bodyText": "pls getC_PaySelection_ID() method instead of _paySelection.getC_PaySelection_ID().\nNOTE: in metasfresh, usually class fields which are prefixed with _ shall not be used directly.", "url": "https://github.com/metasfresh/metasfresh/pull/6262#discussion_r384462100", "createdAt": "2020-02-26T12:31:25Z", "author": {"login": "teosarca"}, "path": "de.metas.banking/de.metas.banking.base/src/main/java/de/metas/banking/payment/impl/PaySelectionUpdater.java", "diffHunk": "@@ -673,6 +707,17 @@ private void setTrxName(final String trxName)\n \t\t_trxName = trxName;\n \t}\n \n+\t/**\n+\t * Invalidates Cache for current PaySelection.\n+\t */\n+\tprivate void cacheInvalidationForCurrentPaySelection()\n+\t{\n+\t\tfinal IModelCacheInvalidationService modelCacheInvalidationService = Services.get(IModelCacheInvalidationService.class);\n+\t\tmodelCacheInvalidationService.invalidate(\n+\t\t\t\tCacheInvalidateMultiRequest.fromTableNameAndRecordId(I_C_PaySelection.Table_Name, _paySelection.getC_PaySelection_ID()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67d37e2a5d0293d48e58a6488560f5db2bb4254b"}, "originalPosition": 212}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ2MjQxNw==", "bodyText": "declare your modelCacheInvalidationService service  at the top, near the other services.", "url": "https://github.com/metasfresh/metasfresh/pull/6262#discussion_r384462417", "createdAt": "2020-02-26T12:32:06Z", "author": {"login": "teosarca"}, "path": "de.metas.banking/de.metas.banking.base/src/main/java/de/metas/banking/payment/impl/PaySelectionUpdater.java", "diffHunk": "@@ -673,6 +707,17 @@ private void setTrxName(final String trxName)\n \t\t_trxName = trxName;\n \t}\n \n+\t/**\n+\t * Invalidates Cache for current PaySelection.\n+\t */\n+\tprivate void cacheInvalidationForCurrentPaySelection()\n+\t{\n+\t\tfinal IModelCacheInvalidationService modelCacheInvalidationService = Services.get(IModelCacheInvalidationService.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67d37e2a5d0293d48e58a6488560f5db2bb4254b"}, "originalPosition": 210}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ2MjU3NA==", "bodyText": "i would really really really avoid this.", "url": "https://github.com/metasfresh/metasfresh/pull/6262#discussion_r384462574", "createdAt": "2020-02-26T12:32:27Z", "author": {"login": "teosarca"}, "path": "de.metas.banking/de.metas.banking.base/src/main/java/de/metas/banking/payment/impl/PaySelectionUpdater.java", "diffHunk": "@@ -153,6 +175,7 @@ public void run(final String localTrxName) throws Exception\n \t\t\t\tsetTrxName(localTrxName);\n \n \t\t\t\tupdate0();\n+\t\t\t\tCacheMgt.get().reset();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ2MDQ1Mg=="}, "originalCommit": {"oid": "67d37e2a5d0293d48e58a6488560f5db2bb4254b"}, "originalPosition": 128}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a0275198e4bc1ebfa50249a3616a8030d47dfd3", "author": {"user": {"login": "dragospodariu96", "name": null}}, "url": "https://github.com/metasfresh/metasfresh/commit/8a0275198e4bc1ebfa50249a3616a8030d47dfd3", "committedDate": "2020-02-26T12:44:24Z", "message": "#4051 Code Quality Upgrades."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59028be3a5a051ac6fe58efc4ca730cb2bbba867", "author": {"user": {"login": "dragospodariu96", "name": null}}, "url": "https://github.com/metasfresh/metasfresh/commit/59028be3a5a051ac6fe58efc4ca730cb2bbba867", "committedDate": "2020-02-26T15:01:11Z", "message": "Merge branch 'master' into gh4051\n\n# Conflicts:\n#\tde.metas.banking/de.metas.banking.base/src/main/java/de/metas/banking/process/C_PaySelection_CreateFrom.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "585e7fb56cad51cef7b4c7d191206586fe36ea9e", "author": {"user": {"login": "dragospodariu96", "name": null}}, "url": "https://github.com/metasfresh/metasfresh/commit/585e7fb56cad51cef7b4c7d191206586fe36ea9e", "committedDate": "2020-02-26T15:08:48Z", "message": "#4051 Resolved C_PaySelection_CreateFrom conflicts."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3638, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}