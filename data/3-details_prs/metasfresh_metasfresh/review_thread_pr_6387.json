{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNTMxOTg3", "number": 6387, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwODo1MToxNFrODqsblQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwODo1MToxNFrODqsblQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MDk0NzQxOnYy", "diffSide": "RIGHT", "path": "de.metas.fresh/de.metas.fresh.base/src/main/sql/postgresql/ddl/views/Fresh_PriceList_Version_Val_Rule.sql", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwODo1MToxNFrOF6mMdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwODo1MToxNFrOF6mMdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk4NzUxMQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            \n          \n          \n            \n            \n          \n          \n            \n            \n          \n          \n            \n            -- Function: report.bpartner_pricelist_version(numeric)\n          \n          \n            \n            \n          \n          \n            \n             DROP FUNCTION IF EXISTS report.bpartner_pricelist_version(numeric);\n          \n          \n            \n            \n          \n          \n            \n            \n          \n          \n            \n             DROP FUNCTION IF EXISTS report.bpartner_pricelist_version(numeric, character);\n          \n          \n            \n            \n          \n          \n            \n            CREATE OR REPLACE FUNCTION report.bpartner_pricelist_version(c_bpartner_id numeric, p_IsSOTrx character default null)\n          \n          \n            \n              RETURNS numeric AS\n          \n          \n            \n            $BODY$\n          \n          \n            \n            SELECT M_PriceList_Version_ID\n          \n          \n            \n            FROM Report.fresh_PriceList_Version_Val_Rule plv\n          \n          \n            \n            WHERE C_BPartner_ID= $1 AND ValidFrom <= now()\n          \n          \n            \n            AND (p_IsSOTrx IS NULL OR p_IsSOTrx = IsSOTrx)\n          \n          \n            \n            ORDER BY ValidFrom DESC, Name ASC\n          \n          \n            \n            LIMIT 1$BODY$\n          \n          \n            \n              LANGUAGE sql STABLE\n          \n          \n            \n              COST 100;\n          \n          \n            \n            COMMENT ON FUNCTION report.bpartner_pricelist_version(numeric, character) IS 'Returns the latest, currently valid price list version within the pricing system of a given Partner (or its BP Group)';\n          \n      \n    \n    \n  \n\nlooks like this got in here by accident", "url": "https://github.com/metasfresh/metasfresh/pull/6387#discussion_r396987511", "createdAt": "2020-03-24T08:51:14Z", "author": {"login": "metas-ts"}, "path": "de.metas.fresh/de.metas.fresh.base/src/main/sql/postgresql/ddl/views/Fresh_PriceList_Version_Val_Rule.sql", "diffHunk": "@@ -20,3 +20,27 @@ WHERE\n \n \n COMMENT ON VIEW report.fresh_Pricelist_Version_Val_Rule IS 'Returns all currently valid C_PriceList_Version_IDs for all C_BPartner_ID along with the valid-from-date and price list version name';\n+\n+\n+\n+\n+\n+-- Function: report.bpartner_pricelist_version(numeric)\n+\n+ DROP FUNCTION IF EXISTS report.bpartner_pricelist_version(numeric);\n+\n+\n+ DROP FUNCTION IF EXISTS report.bpartner_pricelist_version(numeric, character);\n+\n+CREATE OR REPLACE FUNCTION report.bpartner_pricelist_version(c_bpartner_id numeric, p_IsSOTrx character default null)\n+  RETURNS numeric AS\n+$BODY$\n+SELECT M_PriceList_Version_ID\n+FROM Report.fresh_PriceList_Version_Val_Rule plv\n+WHERE C_BPartner_ID= $1 AND ValidFrom <= now()\n+AND (p_IsSOTrx IS NULL OR p_IsSOTrx = IsSOTrx)\n+ORDER BY ValidFrom DESC, Name ASC\n+LIMIT 1$BODY$\n+  LANGUAGE sql STABLE\n+  COST 100;\n+COMMENT ON FUNCTION report.bpartner_pricelist_version(numeric, character) IS 'Returns the latest, currently valid price list version within the pricing system of a given Partner (or its BP Group)';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0bbff48bbbdd3dfc872797e21db9894acc4f3272"}, "originalPosition": 44}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1449, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}