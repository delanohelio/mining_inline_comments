{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4NDUzNTg3", "number": 6095, "title": "Gh ic aggregation", "bodyText": "#6096", "createdAt": "2020-01-29T09:28:09Z", "url": "https://github.com/metasfresh/metasfresh/pull/6095", "merged": true, "mergeCommit": {"oid": "c260107ab90abebd56c6fa4bda180beec4deec58"}, "closed": true, "closedAt": "2020-01-29T14:22:33Z", "author": {"login": "metas-ts"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-_QAQAH2gAyMzY4NDUzNTg3Ojk4M2E0YTBjNjk3ZWYxZWY4M2YwNDQ1OGI2OTQ1MGVmNDMzMWJlNWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_FoyXAH2gAyMzY4NDUzNTg3OjMzOGY5NDNlZmU1ODBiODllY2ViMDNjZmY2NTcxNzlmNmNkOThiMDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "983a4a0c697ef1ef83f04458b69450ef4331be5d", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/983a4a0c697ef1ef83f04458b69450ef4331be5d", "committedDate": "2020-01-29T05:39:44Z", "message": "Debug remaining aggregation problems\n\nAvoid having useless \"IsSoTrx=false; => set IsEdiEnabled to false\" entries in the async-workpackage-log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f56b9dd0cff611ec6e0a361db42bae81433a1302", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/f56b9dd0cff611ec6e0a361db42bae81433a1302", "committedDate": "2020-01-29T08:16:14Z", "message": "Debug remaining aggregation problems\n\nInvoiceCandidateEnqueuer: actual fix - set DateToInvoice and DateAcct *before* the enqeuing, if specified via process params\nAlso:\n* TimeUtil: deprecate TimeUtil.asTimestamp(LocalDate) because it assumes that the server's local timezone is always the correct one\n* DocTypeId: fix incorrect lombo annotation\n* IInvoiceCandBL.getDateToInvoice() - now returns LocalDate instead of timestamp\n* InvoiceCandBL - change *internal* stuff to work with Timestamp and not LocalDate..to avoid the need for conversions when stuff is going right from one timestamp column to another one\n* IInvoiceCandDAO - changed some methods to work with LocalDate instead of timestamp\n* InvoiceCandidateQuery - change type of dateToInvoice from timestamp to LocalDate, and add orgId (optional, unless dateToInvoice is set)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78bdcb6faa325eb67615e59e0c27bcc4b55a1b0d", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/78bdcb6faa325eb67615e59e0c27bcc4b55a1b0d", "committedDate": "2020-01-29T09:27:59Z", "message": "Debug remaining aggregation problems\n\ndo method renames that we already have in master, to have the code more similar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92aea71c130770aeb72ce6383067a10de25fbe84", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/92aea71c130770aeb72ce6383067a10de25fbe84", "committedDate": "2020-01-29T09:40:12Z", "message": "Debug remaining aggregation problems\n\nadd AD_PInstance and AD_Process_ID MDC!"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d561ab1c8a9c1c4419f49dc80c8ffc34be214229", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/d561ab1c8a9c1c4419f49dc80c8ffc34be214229", "committedDate": "2020-01-29T12:10:59Z", "message": "Debug remaining aggregation problems\n\nsolve unit test problem\nhttps://github.com/metasfresh/metasfresh/issues/6096"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9452f6e3aa3ec91f2b7c19698f1ec5ab35dfa3b", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/e9452f6e3aa3ec91f2b7c19698f1ec5ab35dfa3b", "committedDate": "2020-01-29T12:58:30Z", "message": "avoid not-really-important mettasge in async-WP log\n\nmetasfresh/metasfresh#6096"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMDg2Mzg0", "url": "https://github.com/metasfresh/metasfresh/pull/6095#pullrequestreview-350086384", "createdAt": "2020-01-29T12:59:46Z", "commit": {"oid": "e9452f6e3aa3ec91f2b7c19698f1ec5ab35dfa3b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMjo1OTo0NlrOFjHggA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMzowMTo0NFrOFjHj-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM2NzQ4OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t * Note: we only use this internally; by having it as timestamp, we avoid useless conversions between it an {@link LocalDate}\n          \n          \n            \n            \t * Note: we only use this internally; by having it as timestamp, we avoid useless conversions between it and {@link LocalDate}", "url": "https://github.com/metasfresh/metasfresh/pull/6095#discussion_r372367488", "createdAt": "2020-01-29T12:59:46Z", "author": {"login": "metas-ts"}, "path": "de.metas.swat/de.metas.swat.base/src/main/java/de/metas/invoicecandidate/api/impl/InvoiceCandBL.java", "diffHunk": "@@ -191,11 +191,14 @@\n \t// task 08927\n \t/* package */static final ModelDynAttributeAccessor<org.compiere.model.I_C_Invoice, Boolean> DYNATTR_C_Invoice_Candidates_need_NO_ila_updating_on_Invoice_Complete = new ModelDynAttributeAccessor<>(Boolean.class);\n \n-\t/** @task 08451 */\n-\tprivate static final LocalDate DATE_TO_INVOICE_MAX_DATE = LocalDate.of(9999, Month.DECEMBER, 31); // NOTE: not using LocalDate.MAX because we want to convert it to Timestamp\n+\t/**\n+\t * Note: we only use this internally; by having it as timestamp, we avoid useless conversions between it an {@link LocalDate}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9452f6e3aa3ec91f2b7c19698f1ec5ab35dfa3b"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM2ODM3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t/** For internal use */\n          \n          \n            \n            \t/** For class-internal use */", "url": "https://github.com/metasfresh/metasfresh/pull/6095#discussion_r372368376", "createdAt": "2020-01-29T13:01:44Z", "author": {"login": "metas-ts"}, "path": "de.metas.swat/de.metas.swat.base/src/main/java/de/metas/invoicecandidate/api/impl/InvoiceCandBL.java", "diffHunk": "@@ -1024,7 +1027,13 @@ public InvoiceRule getInvoiceRule(@NonNull final I_C_Invoice_Candidate ic)\n \t}\n \n \t@Override\n-\tpublic Timestamp getDateToInvoice(final I_C_Invoice_Candidate ic)\n+\tpublic LocalDate getDateToInvoice(@NonNull final I_C_Invoice_Candidate ic)\n+\t{\n+\t\treturn TimeUtil.asLocalDate(getDateToInvoiceTS(ic));\n+\t}\n+\n+\t/** For internal use */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9452f6e3aa3ec91f2b7c19698f1ec5ab35dfa3b"}, "originalPosition": 110}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "338f943efe580b89eceb03cff657179f6cd98b05", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/338f943efe580b89eceb03cff657179f6cd98b05", "committedDate": "2020-01-29T13:06:14Z", "message": "Apply suggestions from code review\r\n\r\n#6096"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3679, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}