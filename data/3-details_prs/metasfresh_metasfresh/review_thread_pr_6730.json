{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMDAyNTM1", "number": 6730, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjowNjowN1rOD_iGKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjowNjowN1rOD_iGKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3OTQ1NTEyOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.contracts/src/main/java/de/metas/contracts/pricing/trade_margin/CustomerTradeMarginPricingRule.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjowNjowN1rOGaPwEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjowNjowN1rOGaPwEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE3NDIyNw==", "bodyText": "this is the actual NPE-fix", "url": "https://github.com/metasfresh/metasfresh/pull/6730#discussion_r430174227", "createdAt": "2020-05-26T06:06:07Z", "author": {"login": "metas-ts"}, "path": "backend/de.metas.contracts/src/main/java/de/metas/contracts/pricing/trade_margin/CustomerTradeMarginPricingRule.java", "diffHunk": "@@ -71,20 +72,25 @@\n \tprivate final MoneyService moneyService = SpringContextHolder.instance.getBean(MoneyService.class);\n \n \t@Override\n-\tpublic boolean applies(IPricingContext pricingCtx, IPricingResult result)\n+\tpublic boolean applies(@NonNull final IPricingContext pricingCtx, @NonNull final IPricingResult result)\n \t{\n+\t\tfinal ILoggable loggable = Loggables.withLogger(logger, Level.DEBUG);\n \t\tif (!result.isCalculated())\n \t\t{\n-\t\t\tLoggables.withLogger(logger, Level.DEBUG).addLog(\"Not applying due to missing calculated price!\");\n+\t\t\tloggable.addLog(\"applies - pricingResult.isCalculated=false -> return false\");\n \t\t\treturn false;\n \t\t}\n \t\tfinal BPartnerId customerId = pricingCtx.getBPartnerId();\n+\t\tif (customerId == null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f81ee2b93a0af5e85f1fc04fd0c013000c2a23af"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1564, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}