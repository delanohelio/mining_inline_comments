{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4MTA2MDY5", "number": 10314, "reviewThreads": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDoyNTo1NlrOE9qCmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDo0NzozNVrOE9qlNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDg3Mzg0OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDoyNTo1NlrOH6djfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMDo1MTo0OVrOH653YA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2MzY3Nw==", "bodyText": "when loading to cache i would suggest to load ALL records because they are not many.", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531063677", "createdAt": "2020-11-26T14:25:56Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableMap;\n+import de.metas.javaclasses.JavaClassId;\n+import de.metas.product.ProductId;\n+import de.metas.util.GuavaCollectors;\n+import de.metas.util.Services;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Value;\n+import org.adempiere.ad.dao.IQueryBL;\n+import org.compiere.model.I_PP_ComponentGenerator;\n+import org.compiere.model.I_PP_ComponentGenerator_Param;\n+import org.springframework.stereotype.Repository;\n+\n+import javax.annotation.Nullable;\n+import java.util.List;\n+\n+@Repository\n+public class ComponentGeneratorRepository\n+{\n+\tfinal IQueryBL queryBL = Services.get(IQueryBL.class);\n+\n+\t// TODO tbp: CCache this\n+\n+\t@Nullable\n+\tpublic PP_ComponentGenerator getByProductId(@NonNull final ProductId productId)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTUyNzUyMA==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531527520", "createdAt": "2020-11-27T10:51:49Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableMap;\n+import de.metas.javaclasses.JavaClassId;\n+import de.metas.product.ProductId;\n+import de.metas.util.GuavaCollectors;\n+import de.metas.util.Services;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Value;\n+import org.adempiere.ad.dao.IQueryBL;\n+import org.compiere.model.I_PP_ComponentGenerator;\n+import org.compiere.model.I_PP_ComponentGenerator_Param;\n+import org.springframework.stereotype.Repository;\n+\n+import javax.annotation.Nullable;\n+import java.util.List;\n+\n+@Repository\n+public class ComponentGeneratorRepository\n+{\n+\tfinal IQueryBL queryBL = Services.get(IQueryBL.class);\n+\n+\t// TODO tbp: CCache this\n+\n+\t@Nullable\n+\tpublic PP_ComponentGenerator getByProductId(@NonNull final ProductId productId)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2MzY3Nw=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDg3NTcwOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDoyNjoyMVrOH6dkoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwODo0Mzo1N1rOH61ftQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2Mzk2OQ==", "bodyText": "prefer Optional.emty() instead", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531063969", "createdAt": "2020-11-26T14:26:21Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableMap;\n+import de.metas.javaclasses.JavaClassId;\n+import de.metas.product.ProductId;\n+import de.metas.util.GuavaCollectors;\n+import de.metas.util.Services;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Value;\n+import org.adempiere.ad.dao.IQueryBL;\n+import org.compiere.model.I_PP_ComponentGenerator;\n+import org.compiere.model.I_PP_ComponentGenerator_Param;\n+import org.springframework.stereotype.Repository;\n+\n+import javax.annotation.Nullable;\n+import java.util.List;\n+\n+@Repository\n+public class ComponentGeneratorRepository\n+{\n+\tfinal IQueryBL queryBL = Services.get(IQueryBL.class);\n+\n+\t// TODO tbp: CCache this\n+\n+\t@Nullable\n+\tpublic PP_ComponentGenerator getByProductId(@NonNull final ProductId productId)\n+\t{\n+\t\tfinal I_PP_ComponentGenerator po = queryBL.createQueryBuilder(I_PP_ComponentGenerator.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator.COLUMNNAME_M_Product_ID, productId)\n+\t\t\t\t.create()\n+\t\t\t\t.first();\n+\n+\t\tif (po == null)\n+\t\t{\n+\t\t\treturn null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ1NTkyNQ==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531455925", "createdAt": "2020-11-27T08:43:57Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableMap;\n+import de.metas.javaclasses.JavaClassId;\n+import de.metas.product.ProductId;\n+import de.metas.util.GuavaCollectors;\n+import de.metas.util.Services;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Value;\n+import org.adempiere.ad.dao.IQueryBL;\n+import org.compiere.model.I_PP_ComponentGenerator;\n+import org.compiere.model.I_PP_ComponentGenerator_Param;\n+import org.springframework.stereotype.Repository;\n+\n+import javax.annotation.Nullable;\n+import java.util.List;\n+\n+@Repository\n+public class ComponentGeneratorRepository\n+{\n+\tfinal IQueryBL queryBL = Services.get(IQueryBL.class);\n+\n+\t// TODO tbp: CCache this\n+\n+\t@Nullable\n+\tpublic PP_ComponentGenerator getByProductId(@NonNull final ProductId productId)\n+\t{\n+\t\tfinal I_PP_ComponentGenerator po = queryBL.createQueryBuilder(I_PP_ComponentGenerator.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator.COLUMNNAME_M_Product_ID, productId)\n+\t\t\t\t.create()\n+\t\t\t\t.first();\n+\n+\t\tif (po == null)\n+\t\t{\n+\t\t\treturn null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2Mzk2OQ=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDg3ODQxOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDoyNjo1NFrOH6dmNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMDo1MTo1NVrOH653kA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2NDM3Mg==", "bodyText": "when u will load all records in one round, keep in mind to avoid SQL N+1 here", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531064372", "createdAt": "2020-11-26T14:26:54Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableMap;\n+import de.metas.javaclasses.JavaClassId;\n+import de.metas.product.ProductId;\n+import de.metas.util.GuavaCollectors;\n+import de.metas.util.Services;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Value;\n+import org.adempiere.ad.dao.IQueryBL;\n+import org.compiere.model.I_PP_ComponentGenerator;\n+import org.compiere.model.I_PP_ComponentGenerator_Param;\n+import org.springframework.stereotype.Repository;\n+\n+import javax.annotation.Nullable;\n+import java.util.List;\n+\n+@Repository\n+public class ComponentGeneratorRepository\n+{\n+\tfinal IQueryBL queryBL = Services.get(IQueryBL.class);\n+\n+\t// TODO tbp: CCache this\n+\n+\t@Nullable\n+\tpublic PP_ComponentGenerator getByProductId(@NonNull final ProductId productId)\n+\t{\n+\t\tfinal I_PP_ComponentGenerator po = queryBL.createQueryBuilder(I_PP_ComponentGenerator.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator.COLUMNNAME_M_Product_ID, productId)\n+\t\t\t\t.create()\n+\t\t\t\t.first();\n+\n+\t\tif (po == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\tfinal List<I_PP_ComponentGenerator_Param> paramsPO = queryBL.createQueryBuilder(I_PP_ComponentGenerator_Param.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTUyNzU2OA==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531527568", "createdAt": "2020-11-27T10:51:55Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableMap;\n+import de.metas.javaclasses.JavaClassId;\n+import de.metas.product.ProductId;\n+import de.metas.util.GuavaCollectors;\n+import de.metas.util.Services;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Value;\n+import org.adempiere.ad.dao.IQueryBL;\n+import org.compiere.model.I_PP_ComponentGenerator;\n+import org.compiere.model.I_PP_ComponentGenerator_Param;\n+import org.springframework.stereotype.Repository;\n+\n+import javax.annotation.Nullable;\n+import java.util.List;\n+\n+@Repository\n+public class ComponentGeneratorRepository\n+{\n+\tfinal IQueryBL queryBL = Services.get(IQueryBL.class);\n+\n+\t// TODO tbp: CCache this\n+\n+\t@Nullable\n+\tpublic PP_ComponentGenerator getByProductId(@NonNull final ProductId productId)\n+\t{\n+\t\tfinal I_PP_ComponentGenerator po = queryBL.createQueryBuilder(I_PP_ComponentGenerator.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator.COLUMNNAME_M_Product_ID, productId)\n+\t\t\t\t.create()\n+\t\t\t\t.first();\n+\n+\t\tif (po == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\tfinal List<I_PP_ComponentGenerator_Param> paramsPO = queryBL.createQueryBuilder(I_PP_ComponentGenerator_Param.class)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2NDM3Mg=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDg4MTQ4OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDoyNzo0MFrOH6doGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwNjowODowM1rOH6yBzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2NDg1OQ==", "bodyText": "@NonNull", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531064859", "createdAt": "2020-11-26T14:27:40Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableMap;\n+import de.metas.javaclasses.JavaClassId;\n+import de.metas.product.ProductId;\n+import de.metas.util.GuavaCollectors;\n+import de.metas.util.Services;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Value;\n+import org.adempiere.ad.dao.IQueryBL;\n+import org.compiere.model.I_PP_ComponentGenerator;\n+import org.compiere.model.I_PP_ComponentGenerator_Param;\n+import org.springframework.stereotype.Repository;\n+\n+import javax.annotation.Nullable;\n+import java.util.List;\n+\n+@Repository\n+public class ComponentGeneratorRepository\n+{\n+\tfinal IQueryBL queryBL = Services.get(IQueryBL.class);\n+\n+\t// TODO tbp: CCache this\n+\n+\t@Nullable\n+\tpublic PP_ComponentGenerator getByProductId(@NonNull final ProductId productId)\n+\t{\n+\t\tfinal I_PP_ComponentGenerator po = queryBL.createQueryBuilder(I_PP_ComponentGenerator.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator.COLUMNNAME_M_Product_ID, productId)\n+\t\t\t\t.create()\n+\t\t\t\t.first();\n+\n+\t\tif (po == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\tfinal List<I_PP_ComponentGenerator_Param> paramsPO = queryBL.createQueryBuilder(I_PP_ComponentGenerator_Param.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator_Param.COLUMNNAME_PP_ComponentGenerator_ID, po.getPP_ComponentGenerator_ID())\n+\t\t\t\t.create()\n+\t\t\t\t.list();\n+\n+\t\tfinal ImmutableMap<String, String> params = paramsPO.stream()\n+\t\t\t\t.map(param -> GuavaCollectors.entry(param.getName(), param.getValue()))\n+\t\t\t\t.collect(GuavaCollectors.toImmutableMap());\n+\n+\t\treturn PP_ComponentGenerator.builder()\n+\t\t\t\t.javaClassId(JavaClassId.ofRepoId(po.getAD_JavaClass_ID()))\n+\t\t\t\t.params(ComponentGeneratorParam.of(params))\n+\t\t\t\t.build();\n+\t}\n+}\n+\n+@Value\n+@Builder\n+class PP_ComponentGenerator\n+{\n+\tJavaClassId javaClassId;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTM5OTExNw==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531399117", "createdAt": "2020-11-27T06:08:03Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableMap;\n+import de.metas.javaclasses.JavaClassId;\n+import de.metas.product.ProductId;\n+import de.metas.util.GuavaCollectors;\n+import de.metas.util.Services;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Value;\n+import org.adempiere.ad.dao.IQueryBL;\n+import org.compiere.model.I_PP_ComponentGenerator;\n+import org.compiere.model.I_PP_ComponentGenerator_Param;\n+import org.springframework.stereotype.Repository;\n+\n+import javax.annotation.Nullable;\n+import java.util.List;\n+\n+@Repository\n+public class ComponentGeneratorRepository\n+{\n+\tfinal IQueryBL queryBL = Services.get(IQueryBL.class);\n+\n+\t// TODO tbp: CCache this\n+\n+\t@Nullable\n+\tpublic PP_ComponentGenerator getByProductId(@NonNull final ProductId productId)\n+\t{\n+\t\tfinal I_PP_ComponentGenerator po = queryBL.createQueryBuilder(I_PP_ComponentGenerator.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator.COLUMNNAME_M_Product_ID, productId)\n+\t\t\t\t.create()\n+\t\t\t\t.first();\n+\n+\t\tif (po == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\tfinal List<I_PP_ComponentGenerator_Param> paramsPO = queryBL.createQueryBuilder(I_PP_ComponentGenerator_Param.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator_Param.COLUMNNAME_PP_ComponentGenerator_ID, po.getPP_ComponentGenerator_ID())\n+\t\t\t\t.create()\n+\t\t\t\t.list();\n+\n+\t\tfinal ImmutableMap<String, String> params = paramsPO.stream()\n+\t\t\t\t.map(param -> GuavaCollectors.entry(param.getName(), param.getValue()))\n+\t\t\t\t.collect(GuavaCollectors.toImmutableMap());\n+\n+\t\treturn PP_ComponentGenerator.builder()\n+\t\t\t\t.javaClassId(JavaClassId.ofRepoId(po.getAD_JavaClass_ID()))\n+\t\t\t\t.params(ComponentGeneratorParam.of(params))\n+\t\t\t\t.build();\n+\t}\n+}\n+\n+@Value\n+@Builder\n+class PP_ComponentGenerator\n+{\n+\tJavaClassId javaClassId;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2NDg1OQ=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDg4MTg0OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDoyNzo0NVrOH6doXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwNjowODowOVrOH6yB8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2NDkyNA==", "bodyText": "@NonNull", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531064924", "createdAt": "2020-11-26T14:27:45Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableMap;\n+import de.metas.javaclasses.JavaClassId;\n+import de.metas.product.ProductId;\n+import de.metas.util.GuavaCollectors;\n+import de.metas.util.Services;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Value;\n+import org.adempiere.ad.dao.IQueryBL;\n+import org.compiere.model.I_PP_ComponentGenerator;\n+import org.compiere.model.I_PP_ComponentGenerator_Param;\n+import org.springframework.stereotype.Repository;\n+\n+import javax.annotation.Nullable;\n+import java.util.List;\n+\n+@Repository\n+public class ComponentGeneratorRepository\n+{\n+\tfinal IQueryBL queryBL = Services.get(IQueryBL.class);\n+\n+\t// TODO tbp: CCache this\n+\n+\t@Nullable\n+\tpublic PP_ComponentGenerator getByProductId(@NonNull final ProductId productId)\n+\t{\n+\t\tfinal I_PP_ComponentGenerator po = queryBL.createQueryBuilder(I_PP_ComponentGenerator.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator.COLUMNNAME_M_Product_ID, productId)\n+\t\t\t\t.create()\n+\t\t\t\t.first();\n+\n+\t\tif (po == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\tfinal List<I_PP_ComponentGenerator_Param> paramsPO = queryBL.createQueryBuilder(I_PP_ComponentGenerator_Param.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator_Param.COLUMNNAME_PP_ComponentGenerator_ID, po.getPP_ComponentGenerator_ID())\n+\t\t\t\t.create()\n+\t\t\t\t.list();\n+\n+\t\tfinal ImmutableMap<String, String> params = paramsPO.stream()\n+\t\t\t\t.map(param -> GuavaCollectors.entry(param.getName(), param.getValue()))\n+\t\t\t\t.collect(GuavaCollectors.toImmutableMap());\n+\n+\t\treturn PP_ComponentGenerator.builder()\n+\t\t\t\t.javaClassId(JavaClassId.ofRepoId(po.getAD_JavaClass_ID()))\n+\t\t\t\t.params(ComponentGeneratorParam.of(params))\n+\t\t\t\t.build();\n+\t}\n+}\n+\n+@Value\n+@Builder\n+class PP_ComponentGenerator\n+{\n+\tJavaClassId javaClassId;\n+\tComponentGeneratorParam params;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTM5OTE1Mw==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531399153", "createdAt": "2020-11-27T06:08:09Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableMap;\n+import de.metas.javaclasses.JavaClassId;\n+import de.metas.product.ProductId;\n+import de.metas.util.GuavaCollectors;\n+import de.metas.util.Services;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Value;\n+import org.adempiere.ad.dao.IQueryBL;\n+import org.compiere.model.I_PP_ComponentGenerator;\n+import org.compiere.model.I_PP_ComponentGenerator_Param;\n+import org.springframework.stereotype.Repository;\n+\n+import javax.annotation.Nullable;\n+import java.util.List;\n+\n+@Repository\n+public class ComponentGeneratorRepository\n+{\n+\tfinal IQueryBL queryBL = Services.get(IQueryBL.class);\n+\n+\t// TODO tbp: CCache this\n+\n+\t@Nullable\n+\tpublic PP_ComponentGenerator getByProductId(@NonNull final ProductId productId)\n+\t{\n+\t\tfinal I_PP_ComponentGenerator po = queryBL.createQueryBuilder(I_PP_ComponentGenerator.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator.COLUMNNAME_M_Product_ID, productId)\n+\t\t\t\t.create()\n+\t\t\t\t.first();\n+\n+\t\tif (po == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\tfinal List<I_PP_ComponentGenerator_Param> paramsPO = queryBL.createQueryBuilder(I_PP_ComponentGenerator_Param.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator_Param.COLUMNNAME_PP_ComponentGenerator_ID, po.getPP_ComponentGenerator_ID())\n+\t\t\t\t.create()\n+\t\t\t\t.list();\n+\n+\t\tfinal ImmutableMap<String, String> params = paramsPO.stream()\n+\t\t\t\t.map(param -> GuavaCollectors.entry(param.getName(), param.getValue()))\n+\t\t\t\t.collect(GuavaCollectors.toImmutableMap());\n+\n+\t\treturn PP_ComponentGenerator.builder()\n+\t\t\t\t.javaClassId(JavaClassId.ofRepoId(po.getAD_JavaClass_ID()))\n+\t\t\t\t.params(ComponentGeneratorParam.of(params))\n+\t\t\t\t.build();\n+\t}\n+}\n+\n+@Value\n+@Builder\n+class PP_ComponentGenerator\n+{\n+\tJavaClassId javaClassId;\n+\tComponentGeneratorParam params;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2NDkyNA=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 84}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDg4OTIzOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDoyOTozMlrOH6dsxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwNjowNDoxNVrOH6x-QQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2NjA1Mw==", "bodyText": "pls avoid naming things like PP_... usually we used those namings for model interceptors or callouts.\nRename it to ComponentGenerator.\nHINT: usually the entity and the repository shall have the same name (ofc, repo will end with Repository).", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531066053", "createdAt": "2020-11-26T14:29:32Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableMap;\n+import de.metas.javaclasses.JavaClassId;\n+import de.metas.product.ProductId;\n+import de.metas.util.GuavaCollectors;\n+import de.metas.util.Services;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Value;\n+import org.adempiere.ad.dao.IQueryBL;\n+import org.compiere.model.I_PP_ComponentGenerator;\n+import org.compiere.model.I_PP_ComponentGenerator_Param;\n+import org.springframework.stereotype.Repository;\n+\n+import javax.annotation.Nullable;\n+import java.util.List;\n+\n+@Repository\n+public class ComponentGeneratorRepository\n+{\n+\tfinal IQueryBL queryBL = Services.get(IQueryBL.class);\n+\n+\t// TODO tbp: CCache this\n+\n+\t@Nullable\n+\tpublic PP_ComponentGenerator getByProductId(@NonNull final ProductId productId)\n+\t{\n+\t\tfinal I_PP_ComponentGenerator po = queryBL.createQueryBuilder(I_PP_ComponentGenerator.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator.COLUMNNAME_M_Product_ID, productId)\n+\t\t\t\t.create()\n+\t\t\t\t.first();\n+\n+\t\tif (po == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\tfinal List<I_PP_ComponentGenerator_Param> paramsPO = queryBL.createQueryBuilder(I_PP_ComponentGenerator_Param.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator_Param.COLUMNNAME_PP_ComponentGenerator_ID, po.getPP_ComponentGenerator_ID())\n+\t\t\t\t.create()\n+\t\t\t\t.list();\n+\n+\t\tfinal ImmutableMap<String, String> params = paramsPO.stream()\n+\t\t\t\t.map(param -> GuavaCollectors.entry(param.getName(), param.getValue()))\n+\t\t\t\t.collect(GuavaCollectors.toImmutableMap());\n+\n+\t\treturn PP_ComponentGenerator.builder()\n+\t\t\t\t.javaClassId(JavaClassId.ofRepoId(po.getAD_JavaClass_ID()))\n+\t\t\t\t.params(ComponentGeneratorParam.of(params))\n+\t\t\t\t.build();\n+\t}\n+}\n+\n+@Value\n+@Builder\n+class PP_ComponentGenerator", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTM5ODIwOQ==", "bodyText": "makes sense.\ndone", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531398209", "createdAt": "2020-11-27T06:04:15Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorRepository.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableMap;\n+import de.metas.javaclasses.JavaClassId;\n+import de.metas.product.ProductId;\n+import de.metas.util.GuavaCollectors;\n+import de.metas.util.Services;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Value;\n+import org.adempiere.ad.dao.IQueryBL;\n+import org.compiere.model.I_PP_ComponentGenerator;\n+import org.compiere.model.I_PP_ComponentGenerator_Param;\n+import org.springframework.stereotype.Repository;\n+\n+import javax.annotation.Nullable;\n+import java.util.List;\n+\n+@Repository\n+public class ComponentGeneratorRepository\n+{\n+\tfinal IQueryBL queryBL = Services.get(IQueryBL.class);\n+\n+\t// TODO tbp: CCache this\n+\n+\t@Nullable\n+\tpublic PP_ComponentGenerator getByProductId(@NonNull final ProductId productId)\n+\t{\n+\t\tfinal I_PP_ComponentGenerator po = queryBL.createQueryBuilder(I_PP_ComponentGenerator.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator.COLUMNNAME_M_Product_ID, productId)\n+\t\t\t\t.create()\n+\t\t\t\t.first();\n+\n+\t\tif (po == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\tfinal List<I_PP_ComponentGenerator_Param> paramsPO = queryBL.createQueryBuilder(I_PP_ComponentGenerator_Param.class)\n+\t\t\t\t.addOnlyActiveRecordsFilter()\n+\t\t\t\t.addEqualsFilter(I_PP_ComponentGenerator_Param.COLUMNNAME_PP_ComponentGenerator_ID, po.getPP_ComponentGenerator_ID())\n+\t\t\t\t.create()\n+\t\t\t\t.list();\n+\n+\t\tfinal ImmutableMap<String, String> params = paramsPO.stream()\n+\t\t\t\t.map(param -> GuavaCollectors.entry(param.getName(), param.getValue()))\n+\t\t\t\t.collect(GuavaCollectors.toImmutableMap());\n+\n+\t\treturn PP_ComponentGenerator.builder()\n+\t\t\t\t.javaClassId(JavaClassId.ofRepoId(po.getAD_JavaClass_ID()))\n+\t\t\t\t.params(ComponentGeneratorParam.of(params))\n+\t\t\t\t.build();\n+\t}\n+}\n+\n+@Value\n+@Builder\n+class PP_ComponentGenerator", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2NjA1Mw=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 81}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDkwMTUxOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/IComponentGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDozMjoyNVrOH6dz7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwODo0NDoxMVrOH61gKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2Nzg4Ng==", "bodyText": "design issue: that's implementation details because that method is not useful for the caller.", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531067886", "createdAt": "2020-11-26T14:32:25Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/IComponentGenerator.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableMap;\n+import lombok.NonNull;\n+import org.adempiere.mm.attributes.AttributeCode;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+\n+public interface IComponentGenerator\n+{\n+\n+\tImmutableAttributeSet generate(int qty, @NonNull ComponentGeneratorParam parameters, @NonNull ImmutableAttributeSet existingAttributes);\n+\n+\tImmutableList<AttributeCode> getSupportedAttributes();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ1NjA0Mg==", "bodyText": "removed method", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531456042", "createdAt": "2020-11-27T08:44:11Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/IComponentGenerator.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableMap;\n+import lombok.NonNull;\n+import org.adempiere.mm.attributes.AttributeCode;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+\n+public interface IComponentGenerator\n+{\n+\n+\tImmutableAttributeSet generate(int qty, @NonNull ComponentGeneratorParam parameters, @NonNull ImmutableAttributeSet existingAttributes);\n+\n+\tImmutableList<AttributeCode> getSupportedAttributes();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2Nzg4Ng=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDkwNjI2OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/MacAddressGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDozMzo0MVrOH6d2-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwNjoxMTozNFrOH6yFYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2ODY2Ng==", "bodyText": "hardcoded things shall be declared as class constants", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531068666", "createdAt": "2020-11-26T14:33:41Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/MacAddressGenerator.java", "diffHunk": "@@ -0,0 +1,179 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.annotations.VisibleForTesting;\n+import com.google.common.base.Strings;\n+import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableMap;\n+import de.metas.document.sequence.DocSequenceId;\n+import de.metas.document.sequence.IDocumentNoBuilder;\n+import de.metas.document.sequence.IDocumentNoBuilderFactory;\n+import de.metas.document.sequence.impl.DocumentNoParts;\n+import de.metas.util.Check;\n+import de.metas.util.Services;\n+import de.metas.util.StringUtils;\n+import lombok.NonNull;\n+import org.adempiere.exceptions.AdempiereException;\n+import org.adempiere.mm.attributes.AttributeCode;\n+import org.adempiere.mm.attributes.api.AttributeConstants;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+import org.compiere.SpringContextHolder;\n+import org.compiere.util.Env;\n+import org.springframework.stereotype.Service;\n+\n+import static de.metas.manufacturing.generatedcomponents.MacAddress.GROUP_DELIMITER;\n+\n+/**\n+ * A MAC Address looks like this: 01:23:45:67:89:AB\n+ */\n+@Service\n+public class MacAddressGenerator implements IComponentGenerator\n+{\n+\t/*package*/ static final String PARAM_MAC_ADDRESS_AD_SEQUENCE_ID = \"MacAddress_AD_Sequence_ID\";\n+\tprivate static final int NUMBER_OF_DIGITS = 12;\n+\n+\tprivate final ImmutableList<AttributeCode> supportedAttributes = ImmutableList.of(\n+\t\t\tAttributeConstants.RouterMAC1,\n+\t\t\tAttributeConstants.RouterMAC2,\n+\t\t\tAttributeConstants.RouterMAC3,\n+\t\t\tAttributeConstants.RouterMAC4,\n+\t\t\tAttributeConstants.RouterMAC5,\n+\t\t\tAttributeConstants.RouterMAC6\n+\t);\n+\n+\tprivate transient final IDocumentNoBuilderFactory documentNoBuilder = SpringContextHolder.instance.getBean(IDocumentNoBuilderFactory.class);\n+\n+\t@Override\n+\tpublic ImmutableAttributeSet generate(final int qty, final @NonNull ComponentGeneratorParam parameters, final @NonNull ImmutableAttributeSet existingAttributes)\n+\t{\n+\t\tCheck.errorIf(qty < 1 || qty > 6, \"Qty of Mac Addresses should be between 1 and 6. Requested qty: {}\", qty);\n+\n+\t\tfinal ImmutableList<AttributeCode> attributesToGenerate = computeRemainingAttributesToGenerate(existingAttributes);\n+\n+\t\tif (attributesToGenerate.isEmpty())\n+\t\t{\n+\t\t\treturn ImmutableAttributeSet.EMPTY;\n+\t\t}\n+\n+\t\t/*\n+\t\t\tExplanation: we have to generate 2 mac addresses, but 2 or more are already generated => nothing to do.\n+\t\t */\n+\t\tif (qty - noOfAlreadyGenerated(attributesToGenerate) <= 0)\n+\t\t{\n+\t\t\treturn ImmutableAttributeSet.EMPTY;\n+\t\t}\n+\n+\t\tfinal DocSequenceId sequenceId = DocSequenceId.ofRepoIdOrNull(StringUtils.toIntegerOrZero(parameters.getValue(PARAM_MAC_ADDRESS_AD_SEQUENCE_ID)));\n+\t\tif (sequenceId == null)\n+\t\t{\n+\t\t\tthrow new AdempiereException(\"Mandatory parameter \" + PARAM_MAC_ADDRESS_AD_SEQUENCE_ID + \" has invalid value.\");\n+\t\t}\n+\n+\t\tfinal ImmutableAttributeSet.Builder result = ImmutableAttributeSet.builder();\n+\n+\t\tfor (int i = 0; i < qty - noOfAlreadyGenerated(attributesToGenerate); i++)\n+\t\t{\n+\t\t\tfinal AttributeCode attributeCode = attributesToGenerate.get(i);\n+\t\t\tfinal MacAddress macAddress = generateNextMacAddress(sequenceId);\n+\t\t\tresult.attributeValue(attributeCode, macAddress.getAddress());\n+\t\t}\n+\n+\t\treturn result.build();\n+\t}\n+\n+\tprivate int noOfAlreadyGenerated(@NonNull final ImmutableList<AttributeCode> attributesToGenerate)\n+\t{\n+\t\treturn getSupportedAttributes().size() - attributesToGenerate.size();\n+\t}\n+\n+\t@Override\n+\tpublic ImmutableList<AttributeCode> getSupportedAttributes()\n+\t{\n+\t\treturn supportedAttributes;\n+\t}\n+\n+\t@Override\n+\tpublic ImmutableMap<String, String> getDefaultParameters()\n+\t{\n+\t\treturn ImmutableMap.<String, String>builder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 119}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQwMDAzMg==", "bodyText": "done", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531400032", "createdAt": "2020-11-27T06:11:34Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/MacAddressGenerator.java", "diffHunk": "@@ -0,0 +1,179 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.annotations.VisibleForTesting;\n+import com.google.common.base.Strings;\n+import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableMap;\n+import de.metas.document.sequence.DocSequenceId;\n+import de.metas.document.sequence.IDocumentNoBuilder;\n+import de.metas.document.sequence.IDocumentNoBuilderFactory;\n+import de.metas.document.sequence.impl.DocumentNoParts;\n+import de.metas.util.Check;\n+import de.metas.util.Services;\n+import de.metas.util.StringUtils;\n+import lombok.NonNull;\n+import org.adempiere.exceptions.AdempiereException;\n+import org.adempiere.mm.attributes.AttributeCode;\n+import org.adempiere.mm.attributes.api.AttributeConstants;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+import org.compiere.SpringContextHolder;\n+import org.compiere.util.Env;\n+import org.springframework.stereotype.Service;\n+\n+import static de.metas.manufacturing.generatedcomponents.MacAddress.GROUP_DELIMITER;\n+\n+/**\n+ * A MAC Address looks like this: 01:23:45:67:89:AB\n+ */\n+@Service\n+public class MacAddressGenerator implements IComponentGenerator\n+{\n+\t/*package*/ static final String PARAM_MAC_ADDRESS_AD_SEQUENCE_ID = \"MacAddress_AD_Sequence_ID\";\n+\tprivate static final int NUMBER_OF_DIGITS = 12;\n+\n+\tprivate final ImmutableList<AttributeCode> supportedAttributes = ImmutableList.of(\n+\t\t\tAttributeConstants.RouterMAC1,\n+\t\t\tAttributeConstants.RouterMAC2,\n+\t\t\tAttributeConstants.RouterMAC3,\n+\t\t\tAttributeConstants.RouterMAC4,\n+\t\t\tAttributeConstants.RouterMAC5,\n+\t\t\tAttributeConstants.RouterMAC6\n+\t);\n+\n+\tprivate transient final IDocumentNoBuilderFactory documentNoBuilder = SpringContextHolder.instance.getBean(IDocumentNoBuilderFactory.class);\n+\n+\t@Override\n+\tpublic ImmutableAttributeSet generate(final int qty, final @NonNull ComponentGeneratorParam parameters, final @NonNull ImmutableAttributeSet existingAttributes)\n+\t{\n+\t\tCheck.errorIf(qty < 1 || qty > 6, \"Qty of Mac Addresses should be between 1 and 6. Requested qty: {}\", qty);\n+\n+\t\tfinal ImmutableList<AttributeCode> attributesToGenerate = computeRemainingAttributesToGenerate(existingAttributes);\n+\n+\t\tif (attributesToGenerate.isEmpty())\n+\t\t{\n+\t\t\treturn ImmutableAttributeSet.EMPTY;\n+\t\t}\n+\n+\t\t/*\n+\t\t\tExplanation: we have to generate 2 mac addresses, but 2 or more are already generated => nothing to do.\n+\t\t */\n+\t\tif (qty - noOfAlreadyGenerated(attributesToGenerate) <= 0)\n+\t\t{\n+\t\t\treturn ImmutableAttributeSet.EMPTY;\n+\t\t}\n+\n+\t\tfinal DocSequenceId sequenceId = DocSequenceId.ofRepoIdOrNull(StringUtils.toIntegerOrZero(parameters.getValue(PARAM_MAC_ADDRESS_AD_SEQUENCE_ID)));\n+\t\tif (sequenceId == null)\n+\t\t{\n+\t\t\tthrow new AdempiereException(\"Mandatory parameter \" + PARAM_MAC_ADDRESS_AD_SEQUENCE_ID + \" has invalid value.\");\n+\t\t}\n+\n+\t\tfinal ImmutableAttributeSet.Builder result = ImmutableAttributeSet.builder();\n+\n+\t\tfor (int i = 0; i < qty - noOfAlreadyGenerated(attributesToGenerate); i++)\n+\t\t{\n+\t\t\tfinal AttributeCode attributeCode = attributesToGenerate.get(i);\n+\t\t\tfinal MacAddress macAddress = generateNextMacAddress(sequenceId);\n+\t\t\tresult.attributeValue(attributeCode, macAddress.getAddress());\n+\t\t}\n+\n+\t\treturn result.build();\n+\t}\n+\n+\tprivate int noOfAlreadyGenerated(@NonNull final ImmutableList<AttributeCode> attributesToGenerate)\n+\t{\n+\t\treturn getSupportedAttributes().size() - attributesToGenerate.size();\n+\t}\n+\n+\t@Override\n+\tpublic ImmutableList<AttributeCode> getSupportedAttributes()\n+\t{\n+\t\treturn supportedAttributes;\n+\t}\n+\n+\t@Override\n+\tpublic ImmutableMap<String, String> getDefaultParameters()\n+\t{\n+\t\treturn ImmutableMap.<String, String>builder()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA2ODY2Ng=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 119}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDkyMTA5OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/IComponentGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDozNzowOFrOH6d_pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwNjo0MDowNFrOH6yjvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3MDg4Nw==", "bodyText": "maybe it's by OCD :) but i would suggest to have the ComponentGeneratorParam parameters param first on last because basically there u have 2 types of params: the ones which are coming from the caller (qty, existingAttributes) and the one which is coming from API (parameters)", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531070887", "createdAt": "2020-11-26T14:37:08Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/IComponentGenerator.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableMap;\n+import lombok.NonNull;\n+import org.adempiere.mm.attributes.AttributeCode;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+\n+public interface IComponentGenerator\n+{\n+\n+\tImmutableAttributeSet generate(int qty, @NonNull ComponentGeneratorParam parameters, @NonNull ImmutableAttributeSet existingAttributes);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQwNzgwNA==", "bodyText": "makes sense.\nDone", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531407804", "createdAt": "2020-11-27T06:40:04Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/IComponentGenerator.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableMap;\n+import lombok.NonNull;\n+import org.adempiere.mm.attributes.AttributeCode;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+\n+public interface IComponentGenerator\n+{\n+\n+\tImmutableAttributeSet generate(int qty, @NonNull ComponentGeneratorParam parameters, @NonNull ImmutableAttributeSet existingAttributes);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3MDg4Nw=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDkyNDkxOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ManufacturingComponentGeneratorService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDozODowOVrOH6eCDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwNjozMzozMFrOH6yccQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3MTUwMg==", "bodyText": "caching shall be impl at repo level", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531071502", "createdAt": "2020-11-26T14:38:09Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ManufacturingComponentGeneratorService.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import de.metas.javaclasses.IJavaClassBL;\n+import de.metas.util.Services;\n+import lombok.NonNull;\n+import org.adempiere.exceptions.AdempiereException;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+import org.springframework.stereotype.Service;\n+\n+@Service\n+public class ManufacturingComponentGeneratorService\n+{\n+\tprivate final ComponentGeneratorRepository componentRepository;\n+\tprivate final IJavaClassBL javaClassBL = Services.get(IJavaClassBL.class);\n+\n+\t// TODO tbp: add CCache for productId->PP_ComponentGenerator.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQwNTkzNw==", "bodyText": "got it", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531405937", "createdAt": "2020-11-27T06:33:30Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ManufacturingComponentGeneratorService.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import de.metas.javaclasses.IJavaClassBL;\n+import de.metas.util.Services;\n+import lombok.NonNull;\n+import org.adempiere.exceptions.AdempiereException;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+import org.springframework.stereotype.Service;\n+\n+@Service\n+public class ManufacturingComponentGeneratorService\n+{\n+\tprivate final ComponentGeneratorRepository componentRepository;\n+\tprivate final IJavaClassBL javaClassBL = Services.get(IJavaClassBL.class);\n+\n+\t// TODO tbp: add CCache for productId->PP_ComponentGenerator.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3MTUwMg=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDkzMDM5OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ManufacturingComponentGeneratorService.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDozOTozM1rOH6eFgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwODo0NDozOFrOH61hHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3MjM4NA==", "bodyText": "avoid throwing exception because the caller has no way to know which product has a generator and which one does not.\nreturn ImmutableAttributeSet.EMPTY", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531072384", "createdAt": "2020-11-26T14:39:33Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ManufacturingComponentGeneratorService.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import de.metas.javaclasses.IJavaClassBL;\n+import de.metas.util.Services;\n+import lombok.NonNull;\n+import org.adempiere.exceptions.AdempiereException;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+import org.springframework.stereotype.Service;\n+\n+@Service\n+public class ManufacturingComponentGeneratorService\n+{\n+\tprivate final ComponentGeneratorRepository componentRepository;\n+\tprivate final IJavaClassBL javaClassBL = Services.get(IJavaClassBL.class);\n+\n+\t// TODO tbp: add CCache for productId->PP_ComponentGenerator.\n+\n+\tpublic ManufacturingComponentGeneratorService(\n+\t\t\t@NonNull final ComponentGeneratorRepository componentRepository\n+\t)\n+\t{\n+\t\tthis.componentRepository = componentRepository;\n+\t}\n+\n+\tpublic ImmutableAttributeSet generate(@NonNull final GeneratedComponentRequest request)\n+\t{\n+\t\tfinal PP_ComponentGenerator generator = componentRepository.getByProductId(request.getProductId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQwNzczNw==", "bodyText": "Is it really better to silently fail (create no data), than to inform the user that his (expected) config is not set?", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531407737", "createdAt": "2020-11-27T06:39:48Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ManufacturingComponentGeneratorService.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import de.metas.javaclasses.IJavaClassBL;\n+import de.metas.util.Services;\n+import lombok.NonNull;\n+import org.adempiere.exceptions.AdempiereException;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+import org.springframework.stereotype.Service;\n+\n+@Service\n+public class ManufacturingComponentGeneratorService\n+{\n+\tprivate final ComponentGeneratorRepository componentRepository;\n+\tprivate final IJavaClassBL javaClassBL = Services.get(IJavaClassBL.class);\n+\n+\t// TODO tbp: add CCache for productId->PP_ComponentGenerator.\n+\n+\tpublic ManufacturingComponentGeneratorService(\n+\t\t\t@NonNull final ComponentGeneratorRepository componentRepository\n+\t)\n+\t{\n+\t\tthis.componentRepository = componentRepository;\n+\t}\n+\n+\tpublic ImmutableAttributeSet generate(@NonNull final GeneratedComponentRequest request)\n+\t{\n+\t\tfinal PP_ComponentGenerator generator = componentRepository.getByProductId(request.getProductId());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3MjM4NA=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ1NjI4Ng==", "bodyText": "We still throw the error, but we can check first if generator exists via new method hasGeneratorForProduct.", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531456286", "createdAt": "2020-11-27T08:44:38Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ManufacturingComponentGeneratorService.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import de.metas.javaclasses.IJavaClassBL;\n+import de.metas.util.Services;\n+import lombok.NonNull;\n+import org.adempiere.exceptions.AdempiereException;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+import org.springframework.stereotype.Service;\n+\n+@Service\n+public class ManufacturingComponentGeneratorService\n+{\n+\tprivate final ComponentGeneratorRepository componentRepository;\n+\tprivate final IJavaClassBL javaClassBL = Services.get(IJavaClassBL.class);\n+\n+\t// TODO tbp: add CCache for productId->PP_ComponentGenerator.\n+\n+\tpublic ManufacturingComponentGeneratorService(\n+\t\t\t@NonNull final ComponentGeneratorRepository componentRepository\n+\t)\n+\t{\n+\t\tthis.componentRepository = componentRepository;\n+\t}\n+\n+\tpublic ImmutableAttributeSet generate(@NonNull final GeneratedComponentRequest request)\n+\t{\n+\t\tfinal PP_ComponentGenerator generator = componentRepository.getByProductId(request.getProductId());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3MjM4NA=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDkzMzM2OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/IComponentGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDo0MDoxNlrOH6eHQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwODo0NToyNlrOH61izg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3MjgzNQ==", "bodyText": "design issue: that's implementation details because that method is not useful for the caller.", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531072835", "createdAt": "2020-11-26T14:40:16Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/IComponentGenerator.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableMap;\n+import lombok.NonNull;\n+import org.adempiere.mm.attributes.AttributeCode;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+\n+public interface IComponentGenerator\n+{\n+\n+\tImmutableAttributeSet generate(int qty, @NonNull ComponentGeneratorParam parameters, @NonNull ImmutableAttributeSet existingAttributes);\n+\n+\tImmutableList<AttributeCode> getSupportedAttributes();\n+\n+\tImmutableMap<String, String> getDefaultParameters();\n+\n+\tdefault ImmutableList<AttributeCode> computeRemainingAttributesToGenerate(final @NonNull ImmutableAttributeSet existingAttributes)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ1NjcxOA==", "bodyText": "solved by moving to util class", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531456718", "createdAt": "2020-11-27T08:45:26Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/IComponentGenerator.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableMap;\n+import lombok.NonNull;\n+import org.adempiere.mm.attributes.AttributeCode;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+\n+public interface IComponentGenerator\n+{\n+\n+\tImmutableAttributeSet generate(int qty, @NonNull ComponentGeneratorParam parameters, @NonNull ImmutableAttributeSet existingAttributes);\n+\n+\tImmutableList<AttributeCode> getSupportedAttributes();\n+\n+\tImmutableMap<String, String> getDefaultParameters();\n+\n+\tdefault ImmutableList<AttributeCode> computeRemainingAttributesToGenerate(final @NonNull ImmutableAttributeSet existingAttributes)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3MjgzNQ=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDkzNjMxOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/IComponentGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDo0MTowMVrOH6eJCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwODo0NTozM1rOH61jFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3MzI5MQ==", "bodyText": "this method is not used. i guess that's pending to do, right?", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531073291", "createdAt": "2020-11-26T14:41:01Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/IComponentGenerator.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableMap;\n+import lombok.NonNull;\n+import org.adempiere.mm.attributes.AttributeCode;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+\n+public interface IComponentGenerator\n+{\n+\n+\tImmutableAttributeSet generate(int qty, @NonNull ComponentGeneratorParam parameters, @NonNull ImmutableAttributeSet existingAttributes);\n+\n+\tImmutableList<AttributeCode> getSupportedAttributes();\n+\n+\tImmutableMap<String, String> getDefaultParameters();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ1Njc5MQ==", "bodyText": "correct", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531456791", "createdAt": "2020-11-27T08:45:33Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/IComponentGenerator.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableMap;\n+import lombok.NonNull;\n+import org.adempiere.mm.attributes.AttributeCode;\n+import org.adempiere.mm.attributes.api.ImmutableAttributeSet;\n+\n+public interface IComponentGenerator\n+{\n+\n+\tImmutableAttributeSet generate(int qty, @NonNull ComponentGeneratorParam parameters, @NonNull ImmutableAttributeSet existingAttributes);\n+\n+\tImmutableList<AttributeCode> getSupportedAttributes();\n+\n+\tImmutableMap<String, String> getDefaultParameters();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3MzI5MQ=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDk0NzI2OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/PasswordGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDo0Mzo1NFrOH6eP-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwNjozNDozOVrOH6yeFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3NTA2NA==", "bodyText": "instead of /*package*/ which is not relevant info, pls annotate those constants with @VisibleForTesting because that's the reason for making them package level", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531075064", "createdAt": "2020-11-26T14:43:54Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/PasswordGenerator.java", "diffHunk": "@@ -35,16 +43,70 @@\n  * Borrowed from: https://mkyong.com/java/java-password-generator-example/\n  */\n @Service\n-public class PasswordGenerator\n+public class PasswordGenerator implements IComponentGenerator\n {\n \tprivate static final String CHAR_LOWERCASE = \"abcdefghijklmnopqrstuvwxyz\";\n \tprivate static final String CHAR_UPPERCASE = CHAR_LOWERCASE.toUpperCase();\n \tprivate static final String DIGIT = \"0123456789\";\n \tprivate static final String PUNCTUATION = \"!@#&()\u2013[{}]:;',?/*\";\n \n+\t/*package*/ static final String PARAM_LENGTH = \"length\";\n+\t/*package*/ static final String PARAM_USE_LOWERCASE = \"useLowercase\";\n+\t/*package*/ static final String PARAM_USE_UPPERCASE = \"useUppercase\";\n+\t/*package*/ static final String PARAM_USE_DIGIT = \"useDigit\";\n+\t/*package*/ static final String PARAM_USE_PUNCTUATION = \"usePunctuation\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQwNjM1OA==", "bodyText": "true.\ndone", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531406358", "createdAt": "2020-11-27T06:34:39Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/PasswordGenerator.java", "diffHunk": "@@ -35,16 +43,70 @@\n  * Borrowed from: https://mkyong.com/java/java-password-generator-example/\n  */\n @Service\n-public class PasswordGenerator\n+public class PasswordGenerator implements IComponentGenerator\n {\n \tprivate static final String CHAR_LOWERCASE = \"abcdefghijklmnopqrstuvwxyz\";\n \tprivate static final String CHAR_UPPERCASE = CHAR_LOWERCASE.toUpperCase();\n \tprivate static final String DIGIT = \"0123456789\";\n \tprivate static final String PUNCTUATION = \"!@#&()\u2013[{}]:;',?/*\";\n \n+\t/*package*/ static final String PARAM_LENGTH = \"length\";\n+\t/*package*/ static final String PARAM_USE_LOWERCASE = \"useLowercase\";\n+\t/*package*/ static final String PARAM_USE_UPPERCASE = \"useUppercase\";\n+\t/*package*/ static final String PARAM_USE_DIGIT = \"useDigit\";\n+\t/*package*/ static final String PARAM_USE_PUNCTUATION = \"usePunctuation\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3NTA2NA=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDk0OTUwOnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/PasswordGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDo0NDozMVrOH6eReQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwNjozNTo0NVrOH6yfRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3NTQ0OQ==", "bodyText": "i guess u have to make it private", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531075449", "createdAt": "2020-11-26T14:44:31Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/PasswordGenerator.java", "diffHunk": "@@ -35,16 +43,70 @@\n  * Borrowed from: https://mkyong.com/java/java-password-generator-example/\n  */\n @Service\n-public class PasswordGenerator\n+public class PasswordGenerator implements IComponentGenerator\n {\n \tprivate static final String CHAR_LOWERCASE = \"abcdefghijklmnopqrstuvwxyz\";\n \tprivate static final String CHAR_UPPERCASE = CHAR_LOWERCASE.toUpperCase();\n \tprivate static final String DIGIT = \"0123456789\";\n \tprivate static final String PUNCTUATION = \"!@#&()\u2013[{}]:;',?/*\";\n \n+\t/*package*/ static final String PARAM_LENGTH = \"length\";\n+\t/*package*/ static final String PARAM_USE_LOWERCASE = \"useLowercase\";\n+\t/*package*/ static final String PARAM_USE_UPPERCASE = \"useUppercase\";\n+\t/*package*/ static final String PARAM_USE_DIGIT = \"useDigit\";\n+\t/*package*/ static final String PARAM_USE_PUNCTUATION = \"usePunctuation\";\n+\n \tfinal Random random = new Random();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQwNjY2MQ==", "bodyText": "missed that.\ndone", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531406661", "createdAt": "2020-11-27T06:35:45Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/PasswordGenerator.java", "diffHunk": "@@ -35,16 +43,70 @@\n  * Borrowed from: https://mkyong.com/java/java-password-generator-example/\n  */\n @Service\n-public class PasswordGenerator\n+public class PasswordGenerator implements IComponentGenerator\n {\n \tprivate static final String CHAR_LOWERCASE = \"abcdefghijklmnopqrstuvwxyz\";\n \tprivate static final String CHAR_UPPERCASE = CHAR_LOWERCASE.toUpperCase();\n \tprivate static final String DIGIT = \"0123456789\";\n \tprivate static final String PUNCTUATION = \"!@#&()\u2013[{}]:;',?/*\";\n \n+\t/*package*/ static final String PARAM_LENGTH = \"length\";\n+\t/*package*/ static final String PARAM_USE_LOWERCASE = \"useLowercase\";\n+\t/*package*/ static final String PARAM_USE_UPPERCASE = \"useUppercase\";\n+\t/*package*/ static final String PARAM_USE_DIGIT = \"useDigit\";\n+\t/*package*/ static final String PARAM_USE_PUNCTUATION = \"usePunctuation\";\n+\n \tfinal Random random = new Random();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3NTQ0OQ=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDk2MjQ2OnYy", "diffSide": "RIGHT", "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorParam.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNDo0NzozNVrOH6eZIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwNjozODowMVrOH6yhjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3NzQxMA==", "bodyText": "i think ComponentGeneratorParams (plural) would be more suggestive.", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531077410", "createdAt": "2020-11-26T14:47:35Z", "author": {"login": "teosarca"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorParam.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableMap;\n+import lombok.Data;\n+import lombok.NonNull;\n+import lombok.Value;\n+\n+@Value\n+@Data(staticConstructor = \"of\")\n+public class ComponentGeneratorParam", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQwNzI0Nw==", "bodyText": "makes sense.\nDone", "url": "https://github.com/metasfresh/metasfresh/pull/10314#discussion_r531407247", "createdAt": "2020-11-27T06:38:01Z", "author": {"login": "TheBestPessimist"}, "path": "backend/de.metas.manufacturing/src/main/java/de/metas/manufacturing/generatedcomponents/ComponentGeneratorParam.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * #%L\n+ * de.metas.manufacturing\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.manufacturing.generatedcomponents;\n+\n+import com.google.common.collect.ImmutableMap;\n+import lombok.Data;\n+import lombok.NonNull;\n+import lombok.Value;\n+\n+@Value\n+@Data(staticConstructor = \"of\")\n+public class ComponentGeneratorParam", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA3NzQxMA=="}, "originalCommit": {"oid": "1ceed259d869245578478279156e78a5d8f34002"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1172, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}