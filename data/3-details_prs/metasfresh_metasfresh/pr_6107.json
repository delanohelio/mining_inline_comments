{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5Mjc0OTQ5", "number": 6107, "title": "Gh6106 accounting fixes", "bodyText": "#6106", "createdAt": "2020-01-30T20:35:33Z", "url": "https://github.com/metasfresh/metasfresh/pull/6107", "merged": true, "mergeCommit": {"oid": "639d0833a455e76f4945fbe9c6f2aaf69d05c19e"}, "closed": true, "closedAt": "2020-01-31T15:38:02Z", "author": {"login": "teosarca"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_gd62AH2gAyMzY5Mjc0OTQ5OjQ5NjIwNDJhMTc4Y2JjMDZjMGY0OWUxYTA4ZDJmYzczYjQzNWMwNzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_sy4_AH2gAyMzY5Mjc0OTQ5OjA3YmNmZDEyZTU4ZWQxOTI2YTY1YjcwZjAwZGZiMjE4YjBlN2FkZDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4962042a178cbc06c0f49e1a08d2fc73b435c079", "author": {"user": {"login": "teosarca", "name": "Teo Sarca"}}, "url": "https://github.com/metasfresh/metasfresh/commit/4962042a178cbc06c0f49e1a08d2fc73b435c079", "committedDate": "2020-01-30T20:21:48Z", "message": "Create 5550750_cli_dont_use_currency_balancing.sql\n\nhttps://github.com/metasfresh/metasfresh/issues/6106"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1499089b5cfaaa2b30b56778be595c1933c34b56", "author": {"user": {"login": "teosarca", "name": "Teo Sarca"}}, "url": "https://github.com/metasfresh/metasfresh/commit/1499089b5cfaaa2b30b56778be595c1933c34b56", "committedDate": "2020-01-30T20:22:56Z", "message": "Doc_MatchInv: avoid balancing source currency when not needed\n\nhttps://github.com/metasfresh/metasfresh/issues/6106"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0ff8498420d805f6d919591c270c04b473d7915", "author": {"user": {"login": "teosarca", "name": "Teo Sarca"}}, "url": "https://github.com/metasfresh/metasfresh/commit/a0ff8498420d805f6d919591c270c04b473d7915", "committedDate": "2020-01-30T20:26:39Z", "message": "Fact.checkAccounts: improve error reporting\n\nhttps://github.com/metasfresh/metasfresh/issues/6106"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "991c5ea670aff8822dbeb64d3572fd767a5caf25", "author": {"user": {"login": "teosarca", "name": "Teo Sarca"}}, "url": "https://github.com/metasfresh/metasfresh/commit/991c5ea670aff8822dbeb64d3572fd767a5caf25", "committedDate": "2020-01-30T20:28:11Z", "message": "fix costing issues\n\nhttps://github.com/metasfresh/metasfresh/issues/6106"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba95d6ccb11cc7bb0f7eabe21c40bef199530638", "author": {"user": {"login": "teosarca", "name": "Teo Sarca"}}, "url": "https://github.com/metasfresh/metasfresh/commit/ba95d6ccb11cc7bb0f7eabe21c40bef199530638", "committedDate": "2020-01-30T20:33:08Z", "message": "document\n\nhttps://github.com/metasfresh/metasfresh/issues/6106"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f404cc0aae8acbe53c21dc7d99009930fdb6ec62", "author": {"user": {"login": "teosarca", "name": "Teo Sarca"}}, "url": "https://github.com/metasfresh/metasfresh/commit/f404cc0aae8acbe53c21dc7d99009930fdb6ec62", "committedDate": "2020-01-30T20:47:36Z", "message": "introduce `async_disable` system property\n\nhttps://github.com/metasfresh/metasfresh/issues/6106"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbaa599484847d21d5bbd15a095921233017ad67", "author": {"user": {"login": "teosarca", "name": "Teo Sarca"}}, "url": "https://github.com/metasfresh/metasfresh/commit/cbaa599484847d21d5bbd15a095921233017ad67", "committedDate": "2020-01-31T08:30:02Z", "message": "improve error message\n\nhttps://github.com/metasfresh/metasfresh/issues/6106"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNDE0NDM2", "url": "https://github.com/metasfresh/metasfresh/pull/6107#pullrequestreview-351414436", "createdAt": "2020-01-31T10:27:42Z", "commit": {"oid": "cbaa599484847d21d5bbd15a095921233017ad67"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxMDoyNzo0MlrOFkHNNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxMDozNjoyMVrOFkHbfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQxMTEyNA==", "bodyText": "wdyt about\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tCurrencyId currencyId = null;\n          \n          \n            \n            \t\tfor (final FactLine line : m_lines)\n          \n          \n            \n            \t\t{\n          \n          \n            \n            \t\t\tif (currencyId == null)\n          \n          \n            \n            \t\t\t{\n          \n          \n            \n            \t\t\t\tcurrencyId = line.getCurrencyId();\n          \n          \n            \n            \t\t\t}\n          \n          \n            \n            \t\t\telse if (!CurrencyId.equals(currencyId, line.getCurrencyId()))\n          \n          \n            \n            \t\t\t{\n          \n          \n            \n            \t\t\t\treturn false;\n          \n          \n            \n            \t\t\t}\n          \n          \n            \n            \t\t}\n          \n          \n            \n            \n          \n          \n            \n            \t\treturn true;\n          \n          \n            \n            \t\tfinal boolean lessThanTwoCurrecies = CollectionUtils.extractDistinctElements(m_lines, FactLine::getCurrencyId) < 2\n          \n          \n            \n            \t\treturn lessThanTwoCurrecies;", "url": "https://github.com/metasfresh/metasfresh/pull/6107#discussion_r373411124", "createdAt": "2020-01-31T10:27:42Z", "author": {"login": "metas-ts"}, "path": "de.metas.acct.base/src/main/java-legacy/org/compiere/acct/Fact.java", "diffHunk": "@@ -260,6 +261,24 @@ public PostingType getPostingType()\n \t\treturn postingType;\n \t}\n \n+\tpublic boolean isSingleCurrency()\n+\t{\n+\t\tCurrencyId currencyId = null;\n+\t\tfor (final FactLine line : m_lines)\n+\t\t{\n+\t\t\tif (currencyId == null)\n+\t\t\t{\n+\t\t\t\tcurrencyId = line.getCurrencyId();\n+\t\t\t}\n+\t\t\telse if (!CurrencyId.equals(currencyId, line.getCurrencyId()))\n+\t\t\t{\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbaa599484847d21d5bbd15a095921233017ad67"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQxNDc4MQ==", "bodyText": "\ud83c\udf89", "url": "https://github.com/metasfresh/metasfresh/pull/6107#discussion_r373414781", "createdAt": "2020-01-31T10:36:21Z", "author": {"login": "metas-ts"}, "path": "de.metas.business/src/main/java/de/metas/quantity/QuantityUOMConverter.java", "diffHunk": "@@ -0,0 +1,32 @@\n+package de.metas.quantity;\n+\n+import de.metas.product.ProductId;\n+import de.metas.uom.UomId;\n+\n+/*\n+ * #%L\n+ * de.metas.business\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ * \n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ * \n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+@FunctionalInterface\n+public interface QuantityUOMConverter", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbaa599484847d21d5bbd15a095921233017ad67"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07bcfd12e58ed1926a65b70f00dfb218b0e7add9", "author": {"user": {"login": "metas-ts", "name": "Tobias Sch\u00f6neberg"}}, "url": "https://github.com/metasfresh/metasfresh/commit/07bcfd12e58ed1926a65b70f00dfb218b0e7add9", "committedDate": "2020-01-31T10:43:34Z", "message": "minor improvement\n\nhttps://github.com/metasfresh/metasfresh/issues/6106"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3586, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}