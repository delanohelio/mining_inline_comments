{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1Mjc1MDU4", "number": 9137, "title": "JwtIssuerValidator handles issuer (iss) claim values as Strings and URLs", "bodyText": "NimbusJwtDecoder uses claim set converters: issuer claim is converted to an URL object\nJwtIssuerValidator (created by JwtValidators.createDefaultWithIssuer(String)) wraps a JwtClaimValidator\nbecause of different data types, equal() is always false\n\nThis change allows both Strings and URLs as values of the issuer\nIssue gh-9136", "createdAt": "2020-10-17T12:36:52Z", "url": "https://github.com/spring-projects/spring-security/pull/9137", "merged": true, "mergeCommit": {"oid": "6486857462df411faad7b7ef3e902896ef37c1b2"}, "closed": true, "closedAt": "2020-10-28T20:20:28Z", "author": {"login": "cmouttet"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTauvhgBqjM4ODkyMTYzODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXDeT7gFqTUxOTA1MDgwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MTMwNzMy", "url": "https://github.com/spring-projects/spring-security/pull/9137#pullrequestreview-517130732", "createdAt": "2020-10-26T20:01:17Z", "commit": null, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQyMDowMToxOFrOHogNyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQyMDowMToxOFrOHogNyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjIzMjkwNg==", "bodyText": "Have you already considered\nPredicate<Object> testClaimValue = (claimValue) -> \n        claimValue != null && issuer.equals(claimValue.toString())\nas it simplifies the logic?", "url": "https://github.com/spring-projects/spring-security/pull/9137#discussion_r512232906", "createdAt": "2020-10-26T20:01:18Z", "author": {"login": "jzheaux"}, "path": "oauth2/oauth2-jose/src/main/java/org/springframework/security/oauth2/jwt/JwtIssuerValidator.java", "diffHunk": "@@ -28,15 +31,19 @@\n  */\n public final class JwtIssuerValidator implements OAuth2TokenValidator<Jwt> {\n \n-\tprivate final JwtClaimValidator<String> validator;\n+\tprivate final JwtClaimValidator<Object> validator;\n \n \t/**\n \t * Constructs a {@link JwtIssuerValidator} using the provided parameters\n \t * @param issuer - The issuer that each {@link Jwt} should have.\n \t */\n \tpublic JwtIssuerValidator(String issuer) {\n \t\tAssert.notNull(issuer, \"issuer cannot be null\");\n-\t\tthis.validator = new JwtClaimValidator(JwtClaimNames.ISS, issuer::equals);\n+\n+\t\tPredicate<Object> testClaimValueURL = (", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a90c1d1b340e25dbee0575743c7902425002e6a", "author": {"user": {"login": "cmouttet", "name": "Christian Mouttet"}}, "url": "https://github.com/spring-projects/spring-security/commit/3a90c1d1b340e25dbee0575743c7902425002e6a", "committedDate": "2020-10-27T06:55:04Z", "message": "JwtIssuerValidator handles issuer (iss) claim values as Strings and URLs\n\n- NimbusJwtDecoder uses claim set converters: issuer claim is converted to an URL object\n- JwtIssuerValidator (created by JwtValidators.createDefaultWithIssuer(String)) wraps a JwtClaimValidator<String>\n- because of different data types, equal() is always false\n\nThis change allows both Strings and URLs as values of the issuer\n\nCloses gh-9136"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "3a90c1d1b340e25dbee0575743c7902425002e6a", "author": {"user": {"login": "cmouttet", "name": "Christian Mouttet"}}, "url": "https://github.com/spring-projects/spring-security/commit/3a90c1d1b340e25dbee0575743c7902425002e6a", "committedDate": "2020-10-27T06:55:04Z", "message": "JwtIssuerValidator handles issuer (iss) claim values as Strings and URLs\n\n- NimbusJwtDecoder uses claim set converters: issuer claim is converted to an URL object\n- JwtIssuerValidator (created by JwtValidators.createDefaultWithIssuer(String)) wraps a JwtClaimValidator<String>\n- because of different data types, equal() is always false\n\nThis change allows both Strings and URLs as values of the issuer\n\nCloses gh-9136"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MDUwODA4", "url": "https://github.com/spring-projects/spring-security/pull/9137#pullrequestreview-519050808", "createdAt": "2020-10-28T20:20:19Z", "commit": {"oid": "3a90c1d1b340e25dbee0575743c7902425002e6a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4923, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}