{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNTc2NTIx", "number": 7806, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxODo0MTowNlrODXnhUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxODo0MzoxNVrODXnjsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MDkxMzQ2OnYy", "diffSide": "LEFT", "path": "core/src/test/java/org/springframework/security/authentication/ProviderManagerTests.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxODo0MTowNlrOFdAo1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNzo0NTowNlrOFj0AnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk2MzQ3OQ==", "bodyText": "I think we should still have a test for new ProviderManager((AuthenticationProvider) null) and for new ProviderManager((List<AuthenticationProvider>) null).\nThe reason is that an application might do:\nAuthenticationProvider provider = constructProvider();\nreturn new ProviderManager(provider);\nbut constructProvider returns null.\nI believe this also implies that the extra validation logic in checkState() will turn out to be necessary.", "url": "https://github.com/spring-projects/spring-security/pull/7806#discussion_r365963479", "createdAt": "2020-01-13T18:41:06Z", "author": {"login": "jzheaux"}, "path": "core/src/test/java/org/springframework/security/authentication/ProviderManagerTests.java", "diffHunk": "@@ -96,7 +94,7 @@ public void authenticationSucceedsWhenFirstProviderReturnsNullButSecondAuthentic\n \n \t@Test(expected = IllegalArgumentException.class)\n \tpublic void testStartupFailsIfProvidersNotSet() {\n-\t\tnew ProviderManager(null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA5NjYwNA==", "bodyText": "Got it, thanks for the clarification. I have added the extra validation login in checkState() and tests for both null scenarios.", "url": "https://github.com/spring-projects/spring-security/pull/7806#discussion_r373096604", "createdAt": "2020-01-30T17:45:06Z", "author": {"login": "ThomasVitale"}, "path": "core/src/test/java/org/springframework/security/authentication/ProviderManagerTests.java", "diffHunk": "@@ -96,7 +94,7 @@ public void authenticationSucceedsWhenFirstProviderReturnsNullButSecondAuthentic\n \n \t@Test(expected = IllegalArgumentException.class)\n \tpublic void testStartupFailsIfProvidersNotSet() {\n-\t\tnew ProviderManager(null);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk2MzQ3OQ=="}, "originalCommit": null, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MDkxOTU1OnYy", "diffSide": "RIGHT", "path": "core/src/test/java/org/springframework/security/authentication/ProviderManagerTests.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxODo0MzoxNVrOFdAszQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNzo0NTozOFrOFj0BnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk2NDQ5Mw==", "bodyText": "Thanks for these cleanup items, too. Will you please put them in a separate commit (same PR)? That is, any code changes that aren't directly related to the new constructor, let's separate them into their own commit. This simplifies maintenance.", "url": "https://github.com/spring-projects/spring-security/pull/7806#discussion_r365964493", "createdAt": "2020-01-13T18:43:15Z", "author": {"login": "jzheaux"}, "path": "core/src/test/java/org/springframework/security/authentication/ProviderManagerTests.java", "diffHunk": "@@ -189,7 +186,7 @@ public void parentAuthenticationIsUsedIfProvidersDontAuthenticate() {\n \t\tAuthentication authReq = mock(Authentication.class);\n \t\twhen(parent.authenticate(authReq)).thenReturn(authReq);\n \t\tProviderManager mgr = new ProviderManager(\n-\t\t\t\tArrays.asList(mock(AuthenticationProvider.class)), parent);\n+\t\t\t\tCollections.singletonList(mock(AuthenticationProvider.class)), parent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA5Njg2MA==", "bodyText": "Ok, now they are in their own commit.", "url": "https://github.com/spring-projects/spring-security/pull/7806#discussion_r373096860", "createdAt": "2020-01-30T17:45:38Z", "author": {"login": "ThomasVitale"}, "path": "core/src/test/java/org/springframework/security/authentication/ProviderManagerTests.java", "diffHunk": "@@ -189,7 +186,7 @@ public void parentAuthenticationIsUsedIfProvidersDontAuthenticate() {\n \t\tAuthentication authReq = mock(Authentication.class);\n \t\twhen(parent.authenticate(authReq)).thenReturn(authReq);\n \t\tProviderManager mgr = new ProviderManager(\n-\t\t\t\tArrays.asList(mock(AuthenticationProvider.class)), parent);\n+\t\t\t\tCollections.singletonList(mock(AuthenticationProvider.class)), parent);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk2NDQ5Mw=="}, "originalCommit": null, "originalPosition": 80}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1802, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}