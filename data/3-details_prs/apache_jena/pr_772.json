{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNjExODI2", "number": 772, "title": "JENA-1934: Better error handling for bad HTML forms", "bodyText": "", "createdAt": "2020-07-02T16:02:05Z", "url": "https://github.com/apache/jena/pull/772", "merged": true, "mergeCommit": {"oid": "34e34850eb7afabe9ecfe64326ebd61d03c2bc91"}, "closed": true, "closedAt": "2020-07-08T11:49:30Z", "author": {"login": "afs"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxBA89gH2gAyNDQzNjExODI2OmYwZjkyZjYzMDU2MWQ0MzY1ZmQzYjI1ZDZmMDZiOGI0YzA3NDZjYTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxHKVuAFqTQ0MjA2NDAxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f0f92f630561d4365fd3b25d6f06b8b4c0746ca2", "author": {"user": {"login": "afs", "name": "Andy Seaborne"}}, "url": "https://github.com/apache/jena/commit/f0f92f630561d4365fd3b25d6f06b8b4c0746ca2", "committedDate": "2020-07-02T15:59:19Z", "message": "JENA-1934: Better error handling for bad HTML forms"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMDY0MDE5", "url": "https://github.com/apache/jena/pull/772#pullrequestreview-442064019", "createdAt": "2020-07-02T23:08:09Z", "commit": {"oid": "f0f92f630561d4365fd3b25d6f06b8b4c0746ca2"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQyMzowODowOVrOGsfT3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQyMzowODozNFrOGsfULw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTMwMzUxOQ==", "bodyText": "I think I got hit by this when I was writing the Vue.js client. The default value was sending JSON, or some other value, not HTML form. I couldn't figure out what was wrong, so had to look at the browser requests in the old UI to understand what the server was expecting.", "url": "https://github.com/apache/jena/pull/772#discussion_r449303519", "createdAt": "2020-07-02T23:08:09Z", "author": {"login": "kinow"}, "path": "jena-fuseki2/jena-fuseki-core/src/main/java/org/apache/jena/fuseki/server/Dispatcher.java", "diffHunk": "@@ -373,11 +382,23 @@ public static Operation chooseOperation(HttpAction action) {\n \n         // -- Any other queryString\n         // Query string now unexpected.\n+\n         // Place for an extension point.\n         boolean hasParams = request.getParameterMap().size() > 0;\n         if ( hasParams ) {\n+            // One nasty case:\n+            // Bad HTML form (content-type  application/x-www-form-urlencoded), but body is not an HTML form.\n+            //  map is one entry, and the key is all of the body,\n+            if ( WebContent.contentTypeHTMLForm.equals(request.getContentType()) ) {\n+                ServletOps.errorBadRequest(\"Malformed request: unrecognized HTML form request\");\n+                return null;\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0f92f630561d4365fd3b25d6f06b8b4c0746ca2"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTMwMzU5OQ==", "bodyText": "Much more descriptive! Thanks!", "url": "https://github.com/apache/jena/pull/772#discussion_r449303599", "createdAt": "2020-07-02T23:08:34Z", "author": {"login": "kinow"}, "path": "jena-fuseki2/jena-fuseki-core/src/main/java/org/apache/jena/fuseki/server/EndpointSet.java", "diffHunk": "@@ -104,7 +104,7 @@ private void resetSingle() {\n     public Collection<Operation> operations() { return endpoints.keySet(); }\n     \n     /** Get the Endpoint for a singleton EndpointSet */\n-    public Endpoint getOnly() {\n+    public Endpoint getExactlyOne() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0f92f630561d4365fd3b25d6f06b8b4c0746ca2"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3048, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}