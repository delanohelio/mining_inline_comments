{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2MzI4MzU4", "number": 692, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMjo0ODozN1rODhDn3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMjo0ODozN1rODhDn3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1OTg4OTU3OnYy", "diffSide": "RIGHT", "path": "jena-geosparql/src/main/java/org/apache/jena/geosparql/geo/topological/SpatialObjectGeometryLiteral.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMjo0ODozN1rOFrmzUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMjo0ODozN1rOFrmzUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTI2ODgxNg==", "bodyText": "Sorry to be late to the game.\nA comment: a useful pattern is\nExtendedIterator<> iter = ...;\ntry { \n   ... process ...\n} finally { iter.close(); }\n\nThere is no harm calling close multiple times or on already closed iterators.", "url": "https://github.com/apache/jena/pull/692#discussion_r381268816", "createdAt": "2020-02-19T12:48:37Z", "author": {"login": "afs"}, "path": "jena-geosparql/src/main/java/org/apache/jena/geosparql/geo/topological/SpatialObjectGeometryLiteral.java", "diffHunk": "@@ -132,8 +133,22 @@ protected static final SpatialObjectGeometryLiteral retrieve(Graph graph, Node t\n         } else {\n             //Target is not a Feature or Geometry but could have Geo Predicates.\n             if (graph.contains(targetSpatialObject, SpatialExtension.GEO_LAT_NODE, null) && graph.contains(targetSpatialObject, SpatialExtension.GEO_LON_NODE, null)) {\n-                Node lat = graph.find(targetSpatialObject, SpatialExtension.GEO_LAT_NODE, null).next().getObject();\n-                Node lon = graph.find(targetSpatialObject, SpatialExtension.GEO_LON_NODE, null).next().getObject();\n+\n+                //Extract Lat coordinate.\n+                ExtendedIterator<Triple> latIter = graph.find(targetSpatialObject, SpatialExtension.GEO_LAT_NODE, null);\n+                Node lat = latIter.next().getObject();\n+\n+                //Extract Lon coordinate.\n+                ExtendedIterator<Triple> lonIter = graph.find(targetSpatialObject, SpatialExtension.GEO_LON_NODE, null);\n+                Node lon = lonIter.next().getObject();\n+\n+                //Ensure that only a single Latitude and Longitude are present for the subject.\n+                if (latIter.hasNext() || lonIter.hasNext()) {\n+                    latIter.close();\n+                    lonIter.close();\n+                    throw new DatatypeFormatException(targetSpatialObject.getURI() + \" has more than one geo:lat or geo:lon property.\");\n+                }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "141d85e700a28f095d9487f2b54411d0ffb3f288"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4553, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}