{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzMzM0NjMx", "number": 725, "title": "JENA-1881: RDF*", "bodyText": "JENA-1881\n\nIn-memory\nTurtle, SPARQL\nNTriples, NQuads, TriG\nNot RDF/XML\nJSON results, not SPARQL XML results.", "createdAt": "2020-04-14T18:05:09Z", "url": "https://github.com/apache/jena/pull/725", "merged": true, "mergeCommit": {"oid": "958b849cdac5aec13054839482b2def0c2519661"}, "closed": true, "closedAt": "2020-04-16T18:10:53Z", "author": {"login": "afs"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXOwsiAH2gAyNDAzMzM0NjMxOjM2ZWFkOWZhZmI3NGVmZWExZjQ4MGViODI2MDI0NDU2NTE3YmIzYmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX8R52AH2gAyNDAzMzM0NjMxOmM4YWYxNzg4NjFkMDRjM2EzYjI0OTdlYTJlM2U0OWM1ZGYwNmNhNWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "36ead9fafb74efea1f480eb826024456517bb3bd", "author": {"user": {"login": "afs", "name": "Andy Seaborne"}}, "url": "https://github.com/apache/jena/commit/36ead9fafb74efea1f480eb826024456517bb3bd", "committedDate": "2020-04-13T13:18:12Z", "message": "JENA-1881: RDF* Turtle*"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e2036e05efedd3de3069b478b7fc66514320ceb", "author": {"user": {"login": "afs", "name": "Andy Seaborne"}}, "url": "https://github.com/apache/jena/commit/8e2036e05efedd3de3069b478b7fc66514320ceb", "committedDate": "2020-04-13T13:18:12Z", "message": "JENA-1881: SPARQL* syntax and print"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e793481b96719be4c397d74f1ef024c44e0e2a4d", "author": {"user": {"login": "afs", "name": "Andy Seaborne"}}, "url": "https://github.com/apache/jena/commit/e793481b96719be4c397d74f1ef024c44e0e2a4d", "committedDate": "2020-04-13T13:18:12Z", "message": "JENA-1880: ResultSetWriterJSON for RDF*"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f4a94bda506492692ac079d32c7c31c5499cd0c", "author": {"user": {"login": "afs", "name": "Andy Seaborne"}}, "url": "https://github.com/apache/jena/commit/8f4a94bda506492692ac079d32c7c31c5499cd0c", "committedDate": "2020-04-13T13:18:12Z", "message": "JENA-1881: SPARQL* evaluation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65685f7ddf69ed49e39883dfbddfeb4081ef765b", "author": {"user": {"login": "afs", "name": "Andy Seaborne"}}, "url": "https://github.com/apache/jena/commit/65685f7ddf69ed49e39883dfbddfeb4081ef765b", "committedDate": "2020-04-13T13:18:12Z", "message": "JENA-1881: RDF* testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1a63bbf0c9a496aa1dd6e2fb48c2d3d5da99728", "author": {"user": {"login": "afs", "name": "Andy Seaborne"}}, "url": "https://github.com/apache/jena/commit/f1a63bbf0c9a496aa1dd6e2fb48c2d3d5da99728", "committedDate": "2020-04-13T13:18:12Z", "message": "JENA-1881: SPARQL* Update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467", "author": {"user": {"login": "afs", "name": "Andy Seaborne"}}, "url": "https://github.com/apache/jena/commit/80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467", "committedDate": "2020-04-14T17:03:37Z", "message": "JENA-1881: NT*, NQ*, TriG*"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNTkwNjcy", "url": "https://github.com/apache/jena/pull/725#pullrequestreview-393590672", "createdAt": "2020-04-15T09:07:23Z", "commit": {"oid": "80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467"}, "state": "APPROVED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwOTowNzoyM1rOGFwphA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMDoyMjoxMFrOGFzV7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY5MzEyNA==", "bodyText": "New files are missing the newline at the end of the file (for git). But not super important.", "url": "https://github.com/apache/jena/pull/725#discussion_r408693124", "createdAt": "2020-04-15T09:07:23Z", "author": {"login": "kinow"}, "path": "jena-core/src/main/java/org/apache/jena/graph/JenaNodeException.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.jena.graph;\n+\n+import org.apache.jena.shared.JenaException;\n+\n+public class JenaNodeException extends JenaException {\n+    public JenaNodeException(String message) {\n+        super(message);\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODczMTA0MA==", "bodyText": "Debug left-over?", "url": "https://github.com/apache/jena/pull/725#discussion_r408731040", "createdAt": "2020-04-15T10:10:56Z", "author": {"login": "kinow"}, "path": "jena-arq/src/main/java/org/apache/jena/sparql/function/library/triple/FunctionTripleTerm.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.jena.sparql.function.library.triple;\n+\n+import org.apache.jena.graph.Node;\n+import org.apache.jena.graph.Node_Triple;\n+import org.apache.jena.graph.Triple;\n+import org.apache.jena.sparql.expr.ExprEvalException;\n+import org.apache.jena.sparql.expr.NodeValue;\n+import org.apache.jena.sparql.function.FunctionBase1;\n+\n+/** Base class for one argument functions working on a triple term argument. */\n+public abstract class FunctionTripleTerm extends FunctionBase1 {\n+    public FunctionTripleTerm() { }\n+\n+    @Override\n+    public NodeValue exec(NodeValue nv) {\n+        System.out.println(nv);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODczMjA1OQ==", "bodyText": "Extra spaces", "url": "https://github.com/apache/jena/pull/725#discussion_r408732059", "createdAt": "2020-04-15T10:12:50Z", "author": {"login": "kinow"}, "path": "jena-arq/src/main/java/org/apache/jena/riot/writer/TurtleShell.java", "diffHunk": "@@ -335,25 +333,39 @@ private boolean isDefaultGraph(Node node) {\n         /** Find Bnodes that can written as []\n          * Subject position (top level) - only used for subject position anywhere in the dataset\n          * Object position (any level) - only used as object once anywhere in the dataset\n+         * Not used in triple terms.\n+         *   These must be written with _: syntax or [] no contents.\n+         *   We do not cover the latter case (and it is not legal in PG mode where the\n+         *   triple termmust refer to a triple in the graph so blank node used elsewhere.) \n          */\n         private void findBNodesSyntax1() {\n             Set<Node> rejects = new HashSet<>() ; // Nodes known not to meet the requirement.\n-\n+            \n+            // \n+            Set<Node> blankNodesInTripleTerms = new HashSet<>();\n+            // *** Look inside Triple terms\n             ExtendedIterator<Triple> iter = find(ANY, ANY, ANY) ;\n             try {\n                 for ( ; iter.hasNext() ; ) {\n                     Triple t = iter.next() ;\n                     Node subj = t.getSubject() ;\n                     Node obj = t.getObject() ;\n-\n+                    ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODczMzI0Nw==", "bodyText": "s/avriables/variables", "url": "https://github.com/apache/jena/pull/725#discussion_r408733247", "createdAt": "2020-04-15T10:14:53Z", "author": {"login": "kinow"}, "path": "jena-arq/src/main/java/org/apache/jena/sparql/engine/iterator/QueryIterAddTripleTerm.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.jena.sparql.engine.iterator;\n+\n+import org.apache.jena.atlas.io.IndentedWriter;\n+import org.apache.jena.graph.Node;\n+import org.apache.jena.graph.NodeFactory;\n+import org.apache.jena.graph.Triple;\n+import org.apache.jena.sparql.core.Substitute;\n+import org.apache.jena.sparql.core.Var;\n+import org.apache.jena.sparql.engine.ExecutionContext;\n+import org.apache.jena.sparql.engine.QueryIterator;\n+import org.apache.jena.sparql.engine.binding.Binding;\n+import org.apache.jena.sparql.engine.binding.BindingFactory;\n+import org.apache.jena.sparql.serializer.SerializationContext;\n+\n+/**\n+ * Add {@code (var, matchTriple)} to a {@link QueryIterator}.\n+ * <p>\n+ * The supplied triple is a triple pattern which is grounded by replacing avriables", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODczNjk2NA==", "bodyText": "Though a typo, that sounds like a cool name for some project, or sci-fi weapon \ud83d\ude80", "url": "https://github.com/apache/jena/pull/725#discussion_r408736964", "createdAt": "2020-04-15T10:21:38Z", "author": {"login": "kinow"}, "path": "jena-arq/src/main/java/org/apache/jena/query/ARQ.java", "diffHunk": "@@ -460,7 +460,7 @@ public static void enableOptimizer(Context context, boolean state)\n     public static final Symbol optMergeBGPs = SystemARQ.allocSymbol(\"optMergeBGPs\");\n \n     /**\n-     * Context key controlling whether the standard optimizater applies the optimization", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODczNzI2MQ==", "bodyText": "s/BRCAE/RBRACE ?", "url": "https://github.com/apache/jena/pull/725#discussion_r408737261", "createdAt": "2020-04-15T10:22:10Z", "author": {"login": "kinow"}, "path": "jena-arq/Grammar/sse/tokens.inc", "diffHunk": "@@ -147,12 +146,12 @@ TOKEN:\n TOKEN:\n {\n   // Anything left that isn't structural\n-  // LPAREN and RPAREN / LBRACKET/RBRACKET\n+  // LPAREN and RPAREN / LBRACKET/RBRACKET / LBRACE/BRCAE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8af178861d04c3a3b2497ea2e3e49c5df06ca5a", "author": {"user": {"login": "afs", "name": "Andy Seaborne"}}, "url": "https://github.com/apache/jena/commit/c8af178861d04c3a3b2497ea2e3e49c5df06ca5a", "committedDate": "2020-04-15T18:20:12Z", "message": "JENA-1881: Fixes from review"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3014, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}