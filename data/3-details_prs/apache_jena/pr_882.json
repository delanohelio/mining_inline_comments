{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzNjY0Mjk3", "number": 882, "title": "JENA-2009: Implement Visitor Pattern for SHACL Constraints", "bodyText": "Notes:\n\nadded visit method to Constraint interface. I experimented with providing a default implementation (calling visitor.visit(Constraint)) to avoid having to add an implementation to all implementing classes. This approach does not work, which I did not expect. Learned something about Java method invocation target selection there.\nadded visit method non-abstract subclasses of Constraint. The pattern suggests they should be named accept, but jena uses visit wherever I checked. I guess it's better to stick with the existing flavor.\nCurrently no unit tests as there is no logic apart from visitor.visit(this). Please let me know if you feel differently. Using the PR in my client code, so I'm positive it works.", "createdAt": "2020-12-07T13:19:23Z", "url": "https://github.com/apache/jena/pull/882", "merged": true, "mergeCommit": {"oid": "89e0070ad8f64aeff20c7464f2cea0207df91278"}, "closed": true, "closedAt": "2020-12-08T11:55:53Z", "author": {"login": "fkleedorfer"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdj1OmZAH2gAyNTMzNjY0Mjk3OjljYjljNTUwODRkODMyMWUwMDc4ZmNjZTdkNWIyM2IwMTNhYzcwODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkI0HAAFqTU0NzE2MzU0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9cb9c55084d8321e0078fcce7d5b23b013ac7085", "author": {"user": {"login": "fkleedorfer", "name": "Florian Kleedorfer"}}, "url": "https://github.com/apache/jena/commit/9cb9c55084d8321e0078fcce7d5b23b013ac7085", "committedDate": "2020-12-07T13:05:30Z", "message": "Implement Visitor Pattern for SHACL Constraints"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MTYwOTU2", "url": "https://github.com/apache/jena/pull/882#pullrequestreview-546160956", "createdAt": "2020-12-07T13:46:41Z", "commit": {"oid": "9cb9c55084d8321e0078fcce7d5b23b013ac7085"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MTgxMTgz", "url": "https://github.com/apache/jena/pull/882#pullrequestreview-546181183", "createdAt": "2020-12-07T14:09:19Z", "commit": {"oid": "9cb9c55084d8321e0078fcce7d5b23b013ac7085"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDowOToxOVrOIAofDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDoxMjo1MFrOIAoptw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzUzNDIyMQ==", "bodyText": "This one can be skipped.  It's a dummy that only exists to carry a message. It can't be an executable constraint.", "url": "https://github.com/apache/jena/pull/882#discussion_r537534221", "createdAt": "2020-12-07T14:09:19Z", "author": {"login": "afs"}, "path": "jena-shacl/src/main/java/org/apache/jena/shacl/parser/ConstraintVisitor.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.jena.shacl.parser;\n+\n+import org.apache.jena.shacl.engine.constraint.*;\n+\n+public interface ConstraintVisitor {\n+    default void visit(ReportConstraint constraint){}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cb9c55084d8321e0078fcce7d5b23b013ac7085"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzUzNjk1MQ==", "bodyText": "Move to be with ClassConstaint.  (The ideal order is as in section 4: https://www.w3.org/TR/shacl/#core-components).\nThe J* then go separately.\nWe'll need a \"ConstraitExt\" for extensions (not a strong point of the visitor pattern!) but that can wait for now.", "url": "https://github.com/apache/jena/pull/882#discussion_r537536951", "createdAt": "2020-12-07T14:12:50Z", "author": {"login": "afs"}, "path": "jena-shacl/src/main/java/org/apache/jena/shacl/parser/ConstraintVisitor.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.jena.shacl.parser;\n+\n+import org.apache.jena.shacl.engine.constraint.*;\n+\n+public interface ConstraintVisitor {\n+    default void visit(ReportConstraint constraint){}\n+    default void visit(SparqlConstraint constraint){}\n+    default void visit(ConstraintComponentSPARQL constraint){}\n+    default void visit(UniqueLangConstraint constraint){}\n+    default void visit(HasValueConstraint constraint){}\n+    default void visit(MinCount constraint){}\n+    default void visit(MaxCount constraint){}\n+    default void visit(ShXone constraint){}\n+    default void visit(ShAnd constraint){}\n+    default void visit(ShOr constraint){}\n+    default void visit(ShNot constraint){}\n+    default void visit(ShNode constraint){}\n+    default void visit(QualifiedValueShape constraint){}\n+    default void visit(LessThanOrEqualsConstraint constraint){}\n+    default void visit(DisjointConstraint constraint){}\n+    default void visit(EqualsConstraint constraint){}\n+    default void visit(LessThanConstraint constraint){}\n+    default void visit(ClosedConstraint constraint){}\n+    default void visit(ClassConstraint constraint){}\n+    default void visit(StrMaxLengthConstraint constraint){}\n+    default void visit(StrLanguageIn constraint){}\n+    default void visit(StrMinLengthConstraint constraint){}\n+    default void visit(JViolationConstraint constraint){}\n+    default void visit(DatatypeConstraint constraint){}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cb9c55084d8321e0078fcce7d5b23b013ac7085"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d644606b43f81296435d797d530f086c806724a", "author": {"user": {"login": "fkleedorfer", "name": "Florian Kleedorfer"}}, "url": "https://github.com/apache/jena/commit/8d644606b43f81296435d797d530f086c806724a", "committedDate": "2020-12-07T14:26:00Z", "message": "Move visit method to consistent position in class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adf4149e1856c639429f5a76753523d56d1dfd12", "author": {"user": {"login": "fkleedorfer", "name": "Florian Kleedorfer"}}, "url": "https://github.com/apache/jena/commit/adf4149e1856c639429f5a76753523d56d1dfd12", "committedDate": "2020-12-07T14:37:01Z", "message": "Add ConstraintVisitorBase\n\nAlso remove empty default implementations in ConstraintVisitor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93071ce4adc1d249d5867bbed9459afaa0be73c7", "author": {"user": {"login": "fkleedorfer", "name": "Florian Kleedorfer"}}, "url": "https://github.com/apache/jena/commit/93071ce4adc1d249d5867bbed9459afaa0be73c7", "committedDate": "2020-12-07T14:44:46Z", "message": "Exclude ReportConstraint from VisitorPattern"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "563a500af04896b495e513faf45a8cff53210c6a", "author": {"user": {"login": "fkleedorfer", "name": "Florian Kleedorfer"}}, "url": "https://github.com/apache/jena/commit/563a500af04896b495e513faf45a8cff53210c6a", "committedDate": "2020-12-07T14:59:05Z", "message": "Reorder visitor methods\n\n... to reflect order in in W3C SHACL 1.0 Recommendation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTIzMzA4", "url": "https://github.com/apache/jena/pull/882#pullrequestreview-546523308", "createdAt": "2020-12-07T20:48:11Z", "commit": {"oid": "563a500af04896b495e513faf45a8cff53210c6a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MTYzNTQx", "url": "https://github.com/apache/jena/pull/882#pullrequestreview-547163541", "createdAt": "2020-12-08T11:54:40Z", "commit": {"oid": "563a500af04896b495e513faf45a8cff53210c6a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2912, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}