{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4ODIyOTIw", "number": 2370, "title": "Fix for login using PIN when no User exists for a UserKeyRecord", "bodyText": "Jira: https://dimagi-dev.atlassian.net/browse/SUPPORT-4456 (Issue 1)\nRepro:\n\nInstall App A, Login as user X and set Pin\nInstall App B, Login as same user X and set Pin\nUninstall App A (this deleted the User X DB)\nLogin using pin in App B\nLogin fails\n\nIssue happens because the DataPullTask always expects a password and in cases when there is no user in DB for the UKR we were sending a pin as password to the DataPullTask", "createdAt": "2020-10-06T20:41:02Z", "url": "https://github.com/dimagi/commcare-android/pull/2370", "merged": true, "mergeCommit": {"oid": "5d31de1d015e3c2c06e21371339dad8a661a0f98"}, "closed": true, "closedAt": "2020-10-13T06:57:48Z", "author": {"login": "shubham1g5"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdP-dc9gH2gAyNDk4ODIyOTIwOjRmOWZlNmM0ZGQ0ZGJjZjQ0Y2ZjZTljYTA2YWJiODE1Y2Y3YjkwZDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSCfhpgH2gAyNDk4ODIyOTIwOmM1MjZlZTVmNGI2MmRiZjk2OWJmOTUwY2Y2NTJiODMwMmUyZWI5M2U=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4f9fe6c4dd4dbcf44cfce9ca06abb815cf7b90d6", "author": {"user": {"login": "shubham1g5", "name": "Shubham Goyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/4f9fe6c4dd4dbcf44cfce9ca06abb815cf7b90d6", "committedDate": "2020-10-06T20:32:23Z", "message": "use password from UKR instead of entered pin for user sync"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae4e33e51f6c7b83562e374867a2f43dd8134a97", "author": {"user": {"login": "shubham1g5", "name": "Shubham Goyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/ae4e33e51f6c7b83562e374867a2f43dd8134a97", "committedDate": "2020-10-06T20:42:48Z", "message": "Merge branch 'master' into pinFix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMzczMTY2", "url": "https://github.com/dimagi/commcare-android/pull/2370#pullrequestreview-503373166", "createdAt": "2020-10-06T21:29:37Z", "commit": {"oid": "ae4e33e51f6c7b83562e374867a2f43dd8134a97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNTI0NDc1", "url": "https://github.com/dimagi/commcare-android/pull/2370#pullrequestreview-503524475", "createdAt": "2020-10-07T04:56:57Z", "commit": {"oid": "ae4e33e51f6c7b83562e374867a2f43dd8134a97"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwNDo1Njo1N1rOHdildQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwNDo1Njo1N1rOHdildQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDczNzM5Nw==", "bodyText": "This might be a silly question, but does this mean that in subsequent logins using pin, this password will be sent as null?  cuz here it's being set to null for pin login mode", "url": "https://github.com/dimagi/commcare-android/pull/2370#discussion_r500737397", "createdAt": "2020-10-07T04:56:57Z", "author": {"login": "ShivamPokhriyal"}, "path": "app/src/org/commcare/tasks/ManageKeyRecordTask.java", "diffHunk": "@@ -150,7 +150,7 @@ protected void deliverError(R receiver, Exception e) {\n \r\n     protected void keysReadyForSync(R receiver) {\r\n         // TODO: we only wanna do this on the _first_ try. Not subsequent ones (IE: On return from startDataPull)\r\n-        receiver.startDataPull(this.dataPullMode);\r\n+        receiver.startDataPull(this.dataPullMode, password);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae4e33e51f6c7b83562e374867a2f43dd8134a97"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c526ee5f4b62dbf969bf950cf652b8302e2eb93e", "author": {"user": {"login": "shubham1g5", "name": "Shubham Goyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/c526ee5f4b62dbf969bf950cf652b8302e2eb93e", "committedDate": "2020-10-13T06:22:07Z", "message": "Merge branch 'master' into pinFix"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1956, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}