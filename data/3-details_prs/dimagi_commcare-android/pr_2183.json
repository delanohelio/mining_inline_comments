{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2MDkzMDA2", "number": 2183, "title": "Upgrade to the Firebase Crashlytics SDK", "bodyText": "", "createdAt": "2020-02-17T11:43:51Z", "url": "https://github.com/dimagi/commcare-android/pull/2183", "merged": true, "mergeCommit": {"oid": "91e661619086b2d293329f01a1e20e8aabd38340"}, "closed": true, "closedAt": "2020-05-26T13:46:17Z", "author": {"login": "ShivamPokhriyal"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGf81eAFqTM2MjYzNTgzOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABciQoeiAFqTQxMzE5MjQ4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyNjM1ODM5", "url": "https://github.com/dimagi/commcare-android/pull/2183#pullrequestreview-362635839", "createdAt": "2020-02-21T13:43:08Z", "commit": {"oid": "f6977047d85d36216b2c74bf5681e6d6a756c451"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxMzo0MzowOFrOFs3QCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxMzo0MzowOFrOFs3QCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU4Njg5MQ==", "bodyText": "We can't set the user name anymore ? Using Fabric to Firebase Integration as it's set up current we are able to see both username and userID in firebase.", "url": "https://github.com/dimagi/commcare-android/pull/2183#discussion_r382586891", "createdAt": "2020-02-21T13:43:08Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/utils/CrashUtil.java", "diffHunk": "@@ -29,35 +21,36 @@\n \n     public static void reportException(Throwable e) {\n         if (crashlyticsEnabled) {\n-            Crashlytics.logException(e);\n+            FirebaseCrashlytics.getInstance().recordException(e);\n         }\n     }\n \n-    public static void init(Context context) {\n+    public static void init() {\n         if (crashlyticsEnabled) {\n-            Fabric.with(context, new Crashlytics());\n-            Crashlytics.setString(DEVICE_ID, ReportingUtils.getDeviceId());\n+            FirebaseCrashlytics crashlytics = FirebaseCrashlytics.getInstance();\n+            crashlytics.setCrashlyticsCollectionEnabled(true);\n+            crashlytics.setCustomKey(DEVICE_ID, ReportingUtils.getDeviceId());\n         }\n     }\n \n     public static void registerAppData() {\n         if (crashlyticsEnabled) {\n-            Crashlytics.setString(DOMAIN, ReportingUtils.getDomain());\n-            Crashlytics.setInt(APP_VERSION, ReportingUtils.getAppVersion());\n-            Crashlytics.setString(APP_NAME, ReportingUtils.getAppName());\n+            FirebaseCrashlytics crashlytics = FirebaseCrashlytics.getInstance();\n+            crashlytics.setCustomKey(DOMAIN, ReportingUtils.getDomain());\n+            crashlytics.setCustomKey(APP_VERSION, ReportingUtils.getAppVersion());\n+            crashlytics.setCustomKey(APP_NAME, ReportingUtils.getAppName());\n         }\n     }\n \n     public static void registerUserData() {\n         if (crashlyticsEnabled) {\n-            Crashlytics.setUserName(ReportingUtils.getUser());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6977047d85d36216b2c74bf5681e6d6a756c451"}, "originalPosition": 53}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d9fb621787eac8de012b36d267da505a3d63e43", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/3d9fb621787eac8de012b36d267da505a3d63e43", "committedDate": "2020-05-12T05:05:19Z", "message": "Upgrade to the Firebase Crashlytics SDK"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e809d17ea3eccfecf8282813b06ab3a37b18a34d", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/e809d17ea3eccfecf8282813b06ab3a37b18a34d", "committedDate": "2020-05-12T05:05:19Z", "message": "Remove fabric secret keys"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc26aac05853e929b4dae7931f67858d861e71b9", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/cc26aac05853e929b4dae7931f67858d861e71b9", "committedDate": "2020-05-12T05:05:19Z", "message": "Add user name as custom key in FirebaseCrashlytics logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5a2d4ba53fc7173d077932b8e000335d0baaf44", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/f5a2d4ba53fc7173d077932b8e000335d0baaf44", "committedDate": "2020-05-12T05:20:02Z", "message": "Add username to firebase user identifier"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "799facff5ed0c73e4b51e4d0bfd528cb9bba392f", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/799facff5ed0c73e4b51e4d0bfd528cb9bba392f", "committedDate": "2020-02-27T07:16:36Z", "message": "Add user name as custom key in FirebaseCrashlytics logging"}, "afterCommit": {"oid": "f5a2d4ba53fc7173d077932b8e000335d0baaf44", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/f5a2d4ba53fc7173d077932b8e000335d0baaf44", "committedDate": "2020-05-12T05:20:02Z", "message": "Add username to firebase user identifier"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMTkyNDgw", "url": "https://github.com/dimagi/commcare-android/pull/2183#pullrequestreview-413192480", "createdAt": "2020-05-17T19:42:12Z", "commit": {"oid": "f5a2d4ba53fc7173d077932b8e000335d0baaf44"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2132, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}