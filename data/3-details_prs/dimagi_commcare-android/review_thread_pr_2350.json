{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5MjIyNjg0", "number": 2350, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMDo1OToyMlrOEk644A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMDo1OToyMlrOEk644A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3MTQ5MDI0OnYy", "diffSide": "RIGHT", "path": "app/src/org/commcare/activities/UpdateActivity.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMDo1OToyMlrOHUIP8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMToxMDozN1rOHUImSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDg2ODcyMA==", "bodyText": "Why are we using this one if ResourceInstallUtils.isUpdateReadyToInstall() gives the correct result?", "url": "https://github.com/dimagi/commcare-android/pull/2350#discussion_r490868720", "createdAt": "2020-09-18T10:59:22Z", "author": {"login": "ShivamPokhriyal"}, "path": "app/src/org/commcare/activities/UpdateActivity.java", "diffHunk": "@@ -177,17 +177,22 @@ private void connectToUpdateWorker() {\n                                 data.getInt(UpdateWorker.Progress_Total, -1));\n                     } else {\n                         // Worker getting fired when not running imply completion of worker\n-                        ResultAndError<AppInstallStatus> lastUpdateResult = getlastStageUpdateResult();\n-                        if (lastUpdateResult != null) {\n-                            handleTaskCompletion(getlastStageUpdateResult());\n-                        }\n+                        handleTaskCompletion(getlastStageUpdateResult());\n                     }\n                 });\n     }\n \n     private ResultAndError<AppInstallStatus> getlastStageUpdateResult() {\n         UpdateStats updateStats = UpdateStats.loadUpdateStats(CommCareApplication.instance().getCurrentApp());\n-        return updateStats.getLastStageUpdateResult();\n+        ResultAndError<AppInstallStatus> lastUpdateResult = updateStats.getLastStageUpdateResult();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f02e591cd867c1ed9846a5de7dbed095385a574a"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDg2OTgxOA==", "bodyText": "ResourceInstallUtils.isUpdateReadyToInstall() is just an indication of the update's success or failure while in case of failures, the exact reason/type of the failure is contained in lastUpdateResult", "url": "https://github.com/dimagi/commcare-android/pull/2350#discussion_r490869818", "createdAt": "2020-09-18T11:01:17Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/activities/UpdateActivity.java", "diffHunk": "@@ -177,17 +177,22 @@ private void connectToUpdateWorker() {\n                                 data.getInt(UpdateWorker.Progress_Total, -1));\n                     } else {\n                         // Worker getting fired when not running imply completion of worker\n-                        ResultAndError<AppInstallStatus> lastUpdateResult = getlastStageUpdateResult();\n-                        if (lastUpdateResult != null) {\n-                            handleTaskCompletion(getlastStageUpdateResult());\n-                        }\n+                        handleTaskCompletion(getlastStageUpdateResult());\n                     }\n                 });\n     }\n \n     private ResultAndError<AppInstallStatus> getlastStageUpdateResult() {\n         UpdateStats updateStats = UpdateStats.loadUpdateStats(CommCareApplication.instance().getCurrentApp());\n-        return updateStats.getLastStageUpdateResult();\n+        ResultAndError<AppInstallStatus> lastUpdateResult = updateStats.getLastStageUpdateResult();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDg2ODcyMA=="}, "originalCommit": {"oid": "f02e591cd867c1ed9846a5de7dbed095385a574a"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDg3NDQ0Mw==", "bodyText": "got it. Thanks for explaining that!", "url": "https://github.com/dimagi/commcare-android/pull/2350#discussion_r490874443", "createdAt": "2020-09-18T11:10:37Z", "author": {"login": "ShivamPokhriyal"}, "path": "app/src/org/commcare/activities/UpdateActivity.java", "diffHunk": "@@ -177,17 +177,22 @@ private void connectToUpdateWorker() {\n                                 data.getInt(UpdateWorker.Progress_Total, -1));\n                     } else {\n                         // Worker getting fired when not running imply completion of worker\n-                        ResultAndError<AppInstallStatus> lastUpdateResult = getlastStageUpdateResult();\n-                        if (lastUpdateResult != null) {\n-                            handleTaskCompletion(getlastStageUpdateResult());\n-                        }\n+                        handleTaskCompletion(getlastStageUpdateResult());\n                     }\n                 });\n     }\n \n     private ResultAndError<AppInstallStatus> getlastStageUpdateResult() {\n         UpdateStats updateStats = UpdateStats.loadUpdateStats(CommCareApplication.instance().getCurrentApp());\n-        return updateStats.getLastStageUpdateResult();\n+        ResultAndError<AppInstallStatus> lastUpdateResult = updateStats.getLastStageUpdateResult();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDg2ODcyMA=="}, "originalCommit": {"oid": "f02e591cd867c1ed9846a5de7dbed095385a574a"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3154, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}