{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYxNDAxMDQx", "number": 2304, "title": "Only allow the Entity List Action button to be clicked once", "bodyText": "Issue: On clicking Entity action twice session gets into a weird state causing form save to fail\nRepro:\n\nGo to a Entity List screen with an Actions to enter a new form\nClick the Action button, while the transition to FormEntry happens click the Action button again.\nSaving form results into an error as the second action click clears the form id set in session\n\nThis is just one example of an issue that I have was able to repro with multiple clicks on actions, but there can be numerous different weird behaviours it can result into like this crash. The PR just disables the button once it's been clicked.", "createdAt": "2020-08-01T20:34:41Z", "url": "https://github.com/dimagi/commcare-android/pull/2304", "merged": true, "mergeCommit": {"oid": "85e4c9b1941f6543e32ac046cae6364d4d1600eb"}, "closed": true, "closedAt": "2020-08-08T15:32:23Z", "author": {"login": "shubham1g5"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6uyCxgH2gAyNDYxNDAxMDQxOmZkM2UzMGMxNGNiMTU2OGIyMzNlODcwZThjNmMzZjhlZWMwMmM0YTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc86eQmgH2gAyNDYxNDAxMDQxOjhkMmZmNDY1YzdkOTdlYWEwNWNiZjcwM2Y1Yzk1YWJmYWE1YTM1YjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fd3e30c14cb1568b233e870e8c6c3f8eec02c4a4", "author": {"user": {"login": "shubham1g5", "name": "Shubham Goyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/fd3e30c14cb1568b233e870e8c6c3f8eec02c4a4", "committedDate": "2020-08-01T20:23:59Z", "message": "only allow the action listener to be clicked once"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a11e9cc59b56bdab81d6390e61ea27d833bc2db8", "author": {"user": {"login": "shubham1g5", "name": "Shubham Goyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/a11e9cc59b56bdab81d6390e61ea27d833bc2db8", "committedDate": "2020-08-01T20:25:29Z", "message": "cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMDQxNTQz", "url": "https://github.com/dimagi/commcare-android/pull/2304#pullrequestreview-460041543", "createdAt": "2020-08-03T13:49:26Z", "commit": {"oid": "a11e9cc59b56bdab81d6390e61ea27d833bc2db8"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxMzo0OToyN1rOG66RoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxMzo0OToyN1rOG66RoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQyNTM3Ng==", "bodyText": "Extremely minor point: I don't think this is a real concern, but if the EntityList view was recycled entirely (IE: The use pressed 'back' and the view came up exactly as it was) it would be the case that this button would remain disabled.\nAgain, I don't think this applies to the way we use the views, but I didn't want to discount it entirely in case you knew differently, since you have worked with this more recently than  I have.", "url": "https://github.com/dimagi/commcare-android/pull/2304#discussion_r464425376", "createdAt": "2020-08-03T13:49:27Z", "author": {"login": "ctsims"}, "path": "app/src/org/commcare/views/EntityActionViewUtils.java", "diffHunk": "@@ -64,6 +66,9 @@ private static void setupActionClickListener(FrameLayout actionCardView,\n                                                  final Action action,\n                                                  final CommCareActivity commCareActivity) {\n         CardView cardView = actionCardView.findViewById(R.id.card_body);\n-        cardView.setOnClickListener(v -> EntitySelectActivity.triggerDetailAction(action, commCareActivity));\n+        cardView.setOnClickListener(v -> {\n+            cardView.setEnabled(false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a11e9cc59b56bdab81d6390e61ea27d833bc2db8"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d2ff465c7d97eaa05cbf703f5c95abfaa5a35b1", "author": {"user": {"login": "shubham1g5", "name": "Shubham Goyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/8d2ff465c7d97eaa05cbf703f5c95abfaa5a35b1", "committedDate": "2020-08-08T15:09:05Z", "message": "Merge branch 'master' into handleRageActionClicks"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2094, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}