{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwMjQzMDMx", "number": 2353, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMjowMDozOFrOEln8og==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMjo0MzowN1rOElo6xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3ODg3MjY2OnYy", "diffSide": "RIGHT", "path": "app/src/org/commcare/mediadownload/MissingMediaDownloadHelper.kt", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMjowMDozOFrOHVMmzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMjowMDozOFrOHVMmzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTk4ODY4Nw==", "bodyText": "any vars which are shared between thread should be marked as volatile to ensure that the writes to these are published to all threads immediately", "url": "https://github.com/dimagi/commcare-android/pull/2353#discussion_r491988687", "createdAt": "2020-09-21T12:00:38Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/mediadownload/MissingMediaDownloadHelper.kt", "diffHunk": "@@ -10,27 +10,29 @@ import org.commcare.engine.resource.AndroidResourceUtils\n import org.commcare.engine.resource.AppInstallStatus\n import org.commcare.engine.resource.ResourceInstallUtils\n import org.commcare.engine.resource.installers.LocalStorageUnavailableException\n-import org.commcare.preferences.HiddenPreferences\n-import org.commcare.resources.model.*\n import org.commcare.network.RequestStats\n+import org.commcare.preferences.HiddenPreferences\n import org.commcare.resources.ResourceInstallContext\n+import org.commcare.resources.model.*\n import org.commcare.tasks.ResultAndError\n-import org.commcare.util.LogTypes\n import org.commcare.utils.AndroidCommCarePlatform\n import org.commcare.utils.FileUtil\n import org.commcare.utils.StringUtils\n import org.commcare.views.dialogs.PinnedNotificationWithProgress\n import org.commcare.views.notifications.NotificationMessage\n import org.commcare.views.notifications.NotificationMessageFactory\n import org.javarosa.core.services.Logger\n-import java.lang.Exception\n import java.util.concurrent.TimeUnit\n \n // Contains helper functions to download lazy or missing media resources\n object MissingMediaDownloadHelper : TableStateListener {\n \n+    @Volatile\n     private var mResourceInProgressListener: MissingMediaDownloadListener? = null\n+\n+    @Volatile\n     private var resourceInProgress: Resource? = null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74ea61074765f5454abd5973436f51196aa8266b"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3OTAzMTc0OnYy", "diffSide": "RIGHT", "path": "app/src/org/commcare/views/media/MediaLayout.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMjo0MzowN1rOHVOHiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMjo0MzowN1rOHVOHiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjAxMzQ1MQ==", "bodyText": "https://dimagi-dev.atlassian.net/browse/QA-1915", "url": "https://github.com/dimagi/commcare-android/pull/2353#discussion_r492013451", "createdAt": "2020-09-21T12:43:07Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/views/media/MediaLayout.java", "diffHunk": "@@ -378,7 +378,7 @@ private void showMissingMediaView(String mediaUri, String errorMessage, boolean\n                     progressBar.setVisibility(GONE);\n                     downloadIcon.setVisibility(VISIBLE);\n                     downloadIcon.setEnabled(true);\n-                    missingMediaStatus.setText(StringUtils.getStringRobust(getContext(), R.string.media_download_failed));\n+                    missingMediaStatus.setText(result.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74ea61074765f5454abd5973436f51196aa8266b"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3159, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}