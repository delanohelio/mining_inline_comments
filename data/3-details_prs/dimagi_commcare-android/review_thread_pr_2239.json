{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMzMxNzEw", "number": 2239, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNDo0OToyNFrOD-Do7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNDo1Njo0OFrOD-eUYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2Mzk3OTM0OnYy", "diffSide": "RIGHT", "path": "app/src/org/commcare/CommCareApplication.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNDo0OToyNFrOGX7IZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNDo1MzoyMlrOGX7MZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzczOTIzNw==", "bodyText": "Should not it be less than 20 ?", "url": "https://github.com/dimagi/commcare-android/pull/2239#discussion_r427739237", "createdAt": "2020-05-20T04:49:24Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/CommCareApplication.java", "diffHunk": "@@ -234,6 +238,12 @@ public void onCreate() {\n         LocalePreferences.saveDeviceLocale(Locale.getDefault());\r\n     }\r\n \r\n+    private void initTls12IfNeeded() {\r\n+        if (Build.VERSION.SDK_INT >= 16 && Build.VERSION.SDK_INT < 22) {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "91714f41fe9df33f7a21a610891442808c81fc06"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzc0MDI2Mw==", "bodyText": "The Stripe team that I got the code from identified that there were some 20/21 API devices which still didn't have the update. I think from the data that our audience of devices which are off KitKat but not on a significantly newer version is pretty small, so I figured I'd take their word for it.\nI should add links to the sources, though, which will clarify where that info came from, thanks for catching.", "url": "https://github.com/dimagi/commcare-android/pull/2239#discussion_r427740263", "createdAt": "2020-05-20T04:53:22Z", "author": {"login": "ctsims"}, "path": "app/src/org/commcare/CommCareApplication.java", "diffHunk": "@@ -234,6 +238,12 @@ public void onCreate() {\n         LocalePreferences.saveDeviceLocale(Locale.getDefault());\r\n     }\r\n \r\n+    private void initTls12IfNeeded() {\r\n+        if (Build.VERSION.SDK_INT >= 16 && Build.VERSION.SDK_INT < 22) {\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzczOTIzNw=="}, "originalCommit": {"oid": "91714f41fe9df33f7a21a610891442808c81fc06"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2ODM1MDQzOnYy", "diffSide": "RIGHT", "path": "app/src/org/commcare/CommCareApplication.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNDo1Njo0OFrOGYmLnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNToxNDowOVrOGYmayg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ0NDU3NQ==", "bodyText": "Wondering if we can override this function in CommCareTestApplication instead ?", "url": "https://github.com/dimagi/commcare-android/pull/2239#discussion_r428444575", "createdAt": "2020-05-21T04:56:48Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/CommCareApplication.java", "diffHunk": "@@ -240,8 +240,12 @@ public void onCreate() {\n         LocalePreferences.saveDeviceLocale(Locale.getDefault());\r\n     }\r\n \r\n+    public static boolean isRoboUnitTest() {\r\n+        return \"robolectric\".equals(Build.FINGERPRINT);\r\n+    }\r\n+\r\n     private void initTls12IfNeeded() {\r\n-        if (Build.VERSION.SDK_INT >= 16 && Build.VERSION.SDK_INT < 20) {\r\n+        if (Build.VERSION.SDK_INT >= 16 && Build.VERSION.SDK_INT < 20 && !isRoboUnitTest()) {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "250cb5c3d3898121c11d9694e184b3964bd2879d"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ0ODQ1OA==", "bodyText": "Ah, clever idea. I was racing to get this in on the hotfix, but that makes way more sense. I'll make this change in the long-term version.", "url": "https://github.com/dimagi/commcare-android/pull/2239#discussion_r428448458", "createdAt": "2020-05-21T05:14:09Z", "author": {"login": "ctsims"}, "path": "app/src/org/commcare/CommCareApplication.java", "diffHunk": "@@ -240,8 +240,12 @@ public void onCreate() {\n         LocalePreferences.saveDeviceLocale(Locale.getDefault());\r\n     }\r\n \r\n+    public static boolean isRoboUnitTest() {\r\n+        return \"robolectric\".equals(Build.FINGERPRINT);\r\n+    }\r\n+\r\n     private void initTls12IfNeeded() {\r\n-        if (Build.VERSION.SDK_INT >= 16 && Build.VERSION.SDK_INT < 20) {\r\n+        if (Build.VERSION.SDK_INT >= 16 && Build.VERSION.SDK_INT < 20 && !isRoboUnitTest()) {\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ0NDU3NQ=="}, "originalCommit": {"oid": "250cb5c3d3898121c11d9694e184b3964bd2879d"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3258, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}