{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3MDMxMzgx", "number": 2261, "title": "Set latest CC version from Heartbeat response", "bodyText": "This was only getting set currently from the Recovery measures response which is not active for most of the projects. Since we are now using this version info for the udpate prompt's In App Update feature, setting it from the heartbeat response as well so that we have this info set before we prompt for update.", "createdAt": "2020-06-03T08:01:40Z", "url": "https://github.com/dimagi/commcare-android/pull/2261", "merged": true, "mergeCommit": {"oid": "a5437e000fa99a3cbbe288e0f7fcbf8b4f24f949"}, "closed": true, "closedAt": "2020-06-03T08:44:33Z", "author": {"login": "shubham1g5"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnktalgH2gAyNDI3MDMxMzgxOjVmYjMxOGI4OTUzZmZiYjczMWE2ZmJhYjFiZjg4MTcxMGRiMmVlYWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABemYfW6gFqTY5NzkwMTkyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5fb318b8953ffbb731a6fbab1bf881710db2eeae", "author": {"user": {"login": "shubham1g5", "name": "Shubham Goyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/5fb318b8953ffbb731a6fbab1bf881710db2eeae", "committedDate": "2020-06-03T07:55:19Z", "message": "Set latest commcate version from heartbeat response"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMzIxNzYz", "url": "https://github.com/dimagi/commcare-android/pull/2261#pullrequestreview-423321763", "createdAt": "2020-06-03T08:17:25Z", "commit": {"oid": "5fb318b8953ffbb731a6fbab1bf881710db2eeae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njk3OTAxOTIy", "url": "https://github.com/dimagi/commcare-android/pull/2261#pullrequestreview-697901922", "createdAt": "2021-07-02T07:29:29Z", "commit": {"oid": "5fb318b8953ffbb731a6fbab1bf881710db2eeae"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNy0wMlQwNzoyOToyOVrOJ4GEOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNy0wMlQwNzoyOToyOVrOJ4GEOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Mjc5OTQxNg==", "bodyText": "@shubham1g5 Just noticed one thing. This particular method parseUpdateToPrompt is being called from both attemptCczUpdateParse and attemptApkUpdateParse.\nBut for both of them we're using setLatestCommcareVersion when we should've used setLatestAppVersion as well.\nI'm not sure about the actual impact of this bug, but seems like we should fix this in this release. Can you please check?", "url": "https://github.com/dimagi/commcare-android/pull/2261#discussion_r662799416", "createdAt": "2021-07-02T07:29:29Z", "author": {"login": "ShivamPokhriyal"}, "path": "app/src/org/commcare/heartbeat/HeartbeatRequester.java", "diffHunk": "@@ -156,6 +156,7 @@ private static void parseUpdateToPrompt(JSONObject latestVersionInfo, UpdateToPr\n                     if (latestVersionInfo.has(\"force\")) {\n                         forceString = latestVersionInfo.getString(\"force\");\n                     }\n+                    HiddenPreferences.setLatestCommcareVersion(versionValue);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fb318b8953ffbb731a6fbab1bf881710db2eeae"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2066, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}