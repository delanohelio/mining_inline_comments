{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5NjIwNDk0", "number": 2405, "title": "Allow use of custom barcode scanner apps", "bodyText": "#2377\nProduct Note: Added a setting to allow users to use custom applications for scanning barcodes.\nVideo", "createdAt": "2020-11-12T04:58:39Z", "url": "https://github.com/dimagi/commcare-android/pull/2405", "merged": true, "mergeCommit": {"oid": "c480de6074a7a3481d612ca838dafbeb88ed1d3f"}, "closed": true, "closedAt": "2020-11-25T07:36:32Z", "author": {"login": "ShivamPokhriyal"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbubsEAFqTUyODg1ODEyMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdf42QZAFqTUzODIwMzMzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4ODU4MTIz", "url": "https://github.com/dimagi/commcare-android/pull/2405#pullrequestreview-528858123", "createdAt": "2020-11-12T08:39:04Z", "commit": {"oid": "5227c5da7666ed46b3fe3f3fcaeba9260a936754"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15993b0c3881b494d2dc2d69c99e74d50c0adf96", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/15993b0c3881b494d2dc2d69c99e74d50c0adf96", "committedDate": "2020-11-16T05:00:01Z", "message": "Allow use of custom barcode scanner apps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82d36b787786d7ba6f0a7af184f1d93ceda3c9d8", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/82d36b787786d7ba6f0a7af184f1d93ceda3c9d8", "committedDate": "2020-11-16T05:54:48Z", "message": "Refractor all places where zxing library is used by default"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5227c5da7666ed46b3fe3f3fcaeba9260a936754", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/5227c5da7666ed46b3fe3f3fcaeba9260a936754", "committedDate": "2020-11-12T04:57:20Z", "message": "Allow use of custom barcode scanner apps"}, "afterCommit": {"oid": "82d36b787786d7ba6f0a7af184f1d93ceda3c9d8", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/82d36b787786d7ba6f0a7af184f1d93ceda3c9d8", "committedDate": "2020-11-16T05:54:48Z", "message": "Refractor all places where zxing library is used by default"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMTU5MzY1", "url": "https://github.com/dimagi/commcare-android/pull/2405#pullrequestreview-532159365", "createdAt": "2020-11-17T09:14:53Z", "commit": {"oid": "82d36b787786d7ba6f0a7af184f1d93ceda3c9d8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwOToxNDo1NFrOH0rQQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwOToxNDo1NFrOH0rQQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDk5NjY3NA==", "bodyText": "can use String.join", "url": "https://github.com/dimagi/commcare-android/pull/2405#discussion_r524996674", "createdAt": "2020-11-17T09:14:54Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/views/widgets/WidgetUtils.java", "diffHunk": "@@ -33,4 +40,42 @@ public static Button setupClearButton(Context context, ViewGroup root, String te\n         clearButton.setVisibility(visibility);\n         return clearButton;\n     }\n+\n+    /**\n+     * Works just like {@link #createScanIntent(Context, String...)} except the format is null.\n+     */\n+    public static Intent createScanIntent(Context context) {\n+        return createScanIntent(context, null);\n+    }\n+\n+    /**\n+     * A utility to create intent for barcode scan.\n+     *\n+     * If usage of 3rd party apps for scanning is enabled by the user, then this method will\n+     * create a generic intent for scanning barcodes and will fallback to zxing library if no\n+     * app exists to handle such intent.\n+     *\n+     * @param formats names of {@link com.google.zxing.BarcodeFormat}s to scan for. eg. {@link com.google.zxing.BarcodeFormat#QR_CODE}\n+     */\n+    public static Intent createScanIntent(Context context, String... formats) {\n+        if (MainConfigurablePreferences.useIntentCalloutForScanner()) {\n+            Intent scanIntent = new Intent(Intents.Scan.ACTION);\n+            if (scanIntent.resolveActivity(context.getPackageManager()) != null) {\n+                if (formats != null) {\n+                    StringBuilder joinedByComma = new StringBuilder();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82d36b787786d7ba6f0a7af184f1d93ceda3c9d8"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "060cf9e200884b3c84f321d609c4d2fbb23b3e62", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/060cf9e200884b3c84f321d609c4d2fbb23b3e62", "committedDate": "2020-11-17T10:13:50Z", "message": "Use TextUtils to join string"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMjI3MDA0", "url": "https://github.com/dimagi/commcare-android/pull/2405#pullrequestreview-532227004", "createdAt": "2020-11-17T10:34:17Z", "commit": {"oid": "060cf9e200884b3c84f321d609c4d2fbb23b3e62"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3afcc96ca911bd3ecf81a17c53bb6835bde4bc6f", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/3afcc96ca911bd3ecf81a17c53bb6835bde4bc6f", "committedDate": "2020-11-24T14:19:12Z", "message": "Add missing semicolon and fix npe"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c0768629c8246113d787871963634e7aa880afa3", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/c0768629c8246113d787871963634e7aa880afa3", "committedDate": "2020-11-17T12:10:56Z", "message": "Add missing semicolon"}, "afterCommit": {"oid": "3afcc96ca911bd3ecf81a17c53bb6835bde4bc6f", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/3afcc96ca911bd3ecf81a17c53bb6835bde4bc6f", "committedDate": "2020-11-24T14:19:12Z", "message": "Add missing semicolon and fix npe"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4MjAzMzM0", "url": "https://github.com/dimagi/commcare-android/pull/2405#pullrequestreview-538203334", "createdAt": "2020-11-25T07:02:50Z", "commit": {"oid": "3afcc96ca911bd3ecf81a17c53bb6835bde4bc6f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2007, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}