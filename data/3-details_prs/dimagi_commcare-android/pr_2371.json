{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MDM2Mjg3", "number": 2371, "title": "Add RTL support to textview", "bodyText": "Jira: https://dimagi-dev.atlassian.net/browse/SAAS-11349\nThis PR will add RTL support to the textviews that weren't already supporting RTL.\nThe new UI after this change:", "createdAt": "2020-10-07T07:13:54Z", "url": "https://github.com/dimagi/commcare-android/pull/2371", "merged": true, "mergeCommit": {"oid": "0c7d2ca5fcfb560d0f18003ad2afaae30a53c73e"}, "closed": true, "closedAt": "2020-10-21T08:46:26Z", "author": {"login": "ShivamPokhriyal"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQHrhnAFqTUwMzU4NjYzNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUpAaqgFqTUxMzQyMzQ0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNTg2NjM1", "url": "https://github.com/dimagi/commcare-android/pull/2371#pullrequestreview-503586635", "createdAt": "2020-10-07T07:16:53Z", "commit": {"oid": "2373a54a14769d738cc0f94519a91b16c2770270"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwNzoxNjo1M1rOHdlrTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwNzoxNjo1M1rOHdlrTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDc4ODA0NQ==", "bodyText": "We can also probably have add these to the CommonTheme which will make all the textviews RTL supportive.\nBut then I guess, we'll have to find out all the buttons/textviews which could be broken because of view_start textDirection, and will have to manually change the text direction for them.", "url": "https://github.com/dimagi/commcare-android/pull/2371#discussion_r500788045", "createdAt": "2020-10-07T07:16:53Z", "author": {"login": "ShivamPokhriyal"}, "path": "app/src/org/commcare/views/ViewUtil.java", "diffHunk": "@@ -195,4 +196,17 @@ private static void divideIndeterminateSpace(int[] widths, int fullSize,\n             }\n         }\n     }\n+\n+\n+    /**\n+     * Adds RTL support to the textview. It will make the textView ALIGN_LEFT if the view\u2019s resolved\n+     * layoutDirection is LTR, and ALIGN_RIGHT otherwise.\n+     */\n+    public static void addRTLSupport(TextView textView) {\n+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2373a54a14769d738cc0f94519a91b16c2770270"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNTkzNTAz", "url": "https://github.com/dimagi/commcare-android/pull/2371#pullrequestreview-503593503", "createdAt": "2020-10-07T07:27:11Z", "commit": {"oid": "2373a54a14769d738cc0f94519a91b16c2770270"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3de9c9ff2c245deaedb93fb3cdab8468f47d253a", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/3de9c9ff2c245deaedb93fb3cdab8468f47d253a", "committedDate": "2020-10-07T09:58:50Z", "message": "Add RTL support to textview"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f73d198ad0154e2e066fc760726e5f66ef9916e4", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/f73d198ad0154e2e066fc760726e5f66ef9916e4", "committedDate": "2020-10-07T09:58:50Z", "message": "Move rtl layout attributes in xml"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2373a54a14769d738cc0f94519a91b16c2770270", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/2373a54a14769d738cc0f94519a91b16c2770270", "committedDate": "2020-10-07T07:11:38Z", "message": "Add RTL support to textview"}, "afterCommit": {"oid": "f73d198ad0154e2e066fc760726e5f66ef9916e4", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/f73d198ad0154e2e066fc760726e5f66ef9916e4", "committedDate": "2020-10-07T09:58:50Z", "message": "Move rtl layout attributes in xml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0NjY0MTU2", "url": "https://github.com/dimagi/commcare-android/pull/2371#pullrequestreview-504664156", "createdAt": "2020-10-08T10:59:47Z", "commit": {"oid": "f73d198ad0154e2e066fc760726e5f66ef9916e4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMDo1OTo0N1rOHeZKKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMDo1OTo0N1rOHeZKKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTYzMTUyOA==", "bodyText": "@ShivamPokhriyal curious what does textDirection does here, from screenshots it seems like only thing we need to adjust is alignment ?", "url": "https://github.com/dimagi/commcare-android/pull/2371#discussion_r501631528", "createdAt": "2020-10-08T10:59:47Z", "author": {"login": "shubham1g5"}, "path": "app/res/layout-v17/textview_rtl.xml", "diffHunk": "@@ -0,0 +1,6 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<TextView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    android:layout_width=\"wrap_content\"\n+    android:layout_height=\"wrap_content\"\n+    android:textAlignment=\"viewStart\"\n+    android:textDirection=\"locale\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f73d198ad0154e2e066fc760726e5f66ef9916e4"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7aeef6f2024027925180eefb597dd56d86632dec", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/7aeef6f2024027925180eefb597dd56d86632dec", "committedDate": "2020-10-12T05:25:26Z", "message": "Remove textDirection attribute"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dede0214a1a75ee8394f657885b509570b013d3c", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/dede0214a1a75ee8394f657885b509570b013d3c", "committedDate": "2020-10-12T09:50:30Z", "message": "Use textAlignment for all the questions in form"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NTI4Mjk3", "url": "https://github.com/dimagi/commcare-android/pull/2371#pullrequestreview-506528297", "createdAt": "2020-10-12T11:18:30Z", "commit": {"oid": "dede0214a1a75ee8394f657885b509570b013d3c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMToxODozMVrOHf6alA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMToxODozMVrOHf6alA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzIyNDk4MA==", "bodyText": "unused import", "url": "https://github.com/dimagi/commcare-android/pull/2371#discussion_r503224980", "createdAt": "2020-10-12T11:18:31Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/activities/components/FormLayoutHelpers.java", "diffHunk": "@@ -12,6 +12,7 @@\n import org.commcare.activities.FormEntryActivity;\n import org.commcare.dalvik.R;\n import org.commcare.preferences.FormEntryPreferences;\n+import org.commcare.views.ViewUtil;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dede0214a1a75ee8394f657885b509570b013d3c"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NTI4NDYy", "url": "https://github.com/dimagi/commcare-android/pull/2371#pullrequestreview-506528462", "createdAt": "2020-10-12T11:18:47Z", "commit": {"oid": "dede0214a1a75ee8394f657885b509570b013d3c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMToyMzo1OFrOHf6mKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMToyMzo1OFrOHf6mKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzIyNzk0Nw==", "bodyText": "unused import", "url": "https://github.com/dimagi/commcare-android/pull/2371#discussion_r503227947", "createdAt": "2020-10-12T11:23:58Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/views/widgets/ListMultiWidget.java", "diffHunk": "@@ -20,6 +21,7 @@\n import org.commcare.dalvik.R;\n import org.commcare.utils.MediaUtil;\n import org.commcare.utils.StringUtils;\n+import org.commcare.views.ViewUtil;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dede0214a1a75ee8394f657885b509570b013d3c"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31d2749271f294b34662a8fcb696629b8a26283a", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/31d2749271f294b34662a8fcb696629b8a26283a", "committedDate": "2020-10-12T11:37:07Z", "message": "Remove unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bcea70a931f42350a3002be8553a696c26c67ca", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/7bcea70a931f42350a3002be8553a696c26c67ca", "committedDate": "2020-10-13T08:48:50Z", "message": "Merge branch 'master' into rtl"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MTM2OTY4", "url": "https://github.com/dimagi/commcare-android/pull/2371#pullrequestreview-507136968", "createdAt": "2020-10-13T07:23:01Z", "commit": {"oid": "31d2749271f294b34662a8fcb696629b8a26283a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwNzoyMzowMVrOHgYvuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwNzoyMzo0MFrOHgYxJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzcyMTkxMw==", "bodyText": "unused", "url": "https://github.com/dimagi/commcare-android/pull/2371#discussion_r503721913", "createdAt": "2020-10-13T07:23:01Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/adapters/MenuAdapter.java", "diffHunk": "@@ -29,6 +29,7 @@\n import org.commcare.util.LoggerInterface;\n import org.commcare.utils.MediaUtil;\n import org.commcare.views.UserfacingErrorHandling;\n+import org.commcare.views.ViewUtil;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31d2749271f294b34662a8fcb696629b8a26283a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzcyMTk3Nw==", "bodyText": "unused", "url": "https://github.com/dimagi/commcare-android/pull/2371#discussion_r503721977", "createdAt": "2020-10-13T07:23:08Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/views/ViewUtil.java", "diffHunk": "@@ -15,6 +15,7 @@\n import android.view.MenuItem;\n import android.view.View;\n import android.view.inputmethod.InputMethodManager;\n+import android.widget.TextView;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31d2749271f294b34662a8fcb696629b8a26283a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzcyMjEwOQ==", "bodyText": "unused", "url": "https://github.com/dimagi/commcare-android/pull/2371#discussion_r503722109", "createdAt": "2020-10-13T07:23:23Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/views/widgets/LabelWidget.java", "diffHunk": "@@ -17,6 +18,7 @@\n import org.commcare.dalvik.R;\n import org.commcare.utils.MediaUtil;\n import org.commcare.utils.StringUtils;\n+import org.commcare.views.ViewUtil;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31d2749271f294b34662a8fcb696629b8a26283a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzcyMjI3Ng==", "bodyText": "unused", "url": "https://github.com/dimagi/commcare-android/pull/2371#discussion_r503722276", "createdAt": "2020-10-13T07:23:40Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/views/widgets/ListWidget.java", "diffHunk": "@@ -21,6 +22,7 @@\n import org.commcare.dalvik.R;\n import org.commcare.utils.MediaUtil;\n import org.commcare.utils.StringUtils;\n+import org.commcare.views.ViewUtil;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31d2749271f294b34662a8fcb696629b8a26283a"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ee9f8c9147f9a008a11d900485d54f5f4faabba", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/1ee9f8c9147f9a008a11d900485d54f5f4faabba", "committedDate": "2020-10-14T01:54:10Z", "message": "Remove unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28af0d5239c72f458fb258cad3d6e8ee5e3d7b6b", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/28af0d5239c72f458fb258cad3d6e8ee5e3d7b6b", "committedDate": "2020-10-14T08:27:28Z", "message": "Merge branch 'master' into rtl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f26e45de56ca1abad590f70c38ebdbef76b0e56", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/0f26e45de56ca1abad590f70c38ebdbef76b0e56", "committedDate": "2020-10-14T08:33:02Z", "message": "Removed unused ViewUtil import from ListMultiWidget"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MzA0NTY4", "url": "https://github.com/dimagi/commcare-android/pull/2371#pullrequestreview-508304568", "createdAt": "2020-10-14T12:44:54Z", "commit": {"oid": "0f26e45de56ca1abad590f70c38ebdbef76b0e56"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad7576d7851e1217f745cf021471ebcafbc4825a", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/ad7576d7851e1217f745cf021471ebcafbc4825a", "committedDate": "2020-10-19T13:23:08Z", "message": "Merge branch 'master' into rtl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f818fee79426c86995aeda8e169377dfd5939197", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/f818fee79426c86995aeda8e169377dfd5939197", "committedDate": "2020-10-21T06:10:18Z", "message": "Merge branch 'master' into rtl"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMzcwOTEy", "url": "https://github.com/dimagi/commcare-android/pull/2371#pullrequestreview-513370912", "createdAt": "2020-10-21T07:16:05Z", "commit": {"oid": "f818fee79426c86995aeda8e169377dfd5939197"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNzoxNjowNlrOHlddVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNzoxNjowNlrOHlddVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA0MjAwNA==", "bodyText": "Can you confirm this doesn't cause any significant size difference as compared to earlier ?", "url": "https://github.com/dimagi/commcare-android/pull/2371#discussion_r509042004", "createdAt": "2020-10-21T07:16:06Z", "author": {"login": "shubham1g5"}, "path": "app/res/layout/question_widget_text.xml", "diffHunk": "@@ -4,5 +4,6 @@\n     android:layout_height=\"match_parent\"\n     android:gravity=\"start\"\n     android:scrollHorizontally=\"false\"\n+    android:textAppearance=\"@style/TextAppearance.AppCompat.Body1\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f818fee79426c86995aeda8e169377dfd5939197"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNDIzNDQx", "url": "https://github.com/dimagi/commcare-android/pull/2371#pullrequestreview-513423441", "createdAt": "2020-10-21T08:22:17Z", "commit": {"oid": "f818fee79426c86995aeda8e169377dfd5939197"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1959, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}