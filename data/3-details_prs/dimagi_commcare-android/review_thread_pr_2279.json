{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2MDg3NzE4", "number": 2279, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMTozOToyMVrOEGhsuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMTo0MDozN1rOEGhuKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1Mjc5MDMyOnYy", "diffSide": "RIGHT", "path": "app/src/org/commcare/activities/FormRecordListActivity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMTozOToyMVrOGlYWaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMTozOToyMVrOGlYWaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0OTQ1MQ==", "bodyText": "Is there a reason this is \"spring loaded\" so to speak and only lets you quarantine a single form? That will get quite painful if there is some strange event that causes issues for a lot of forms in a row.", "url": "https://github.com/dimagi/commcare-android/pull/2279#discussion_r441849451", "createdAt": "2020-06-17T21:39:21Z", "author": {"login": "ctsims"}, "path": "app/src/org/commcare/activities/FormRecordListActivity.java", "diffHunk": "@@ -464,10 +464,13 @@ private void createFormRecordScanResultDialog(Pair<Boolean, String> result, Form\n                 result.second, resId, null);\n \n         if (FormRecordFilter.Pending.containsStatus(record.getStatus())) {\n-            dialog.setNegativeButton(Localization.get(\"app.workflow.forms.quarantine\"), (dialog1, which) -> {\n-                manuallyQuarantineRecord(record);\n-                dismissAlertDialog();\n-            });\n+            if (DeveloperPreferences.isManualFormQuarantineAllowed()) {\n+                dialog.setNegativeButton(Localization.get(\"app.workflow.forms.quarantine\"), (dialog1, which) -> {\n+                    manuallyQuarantineRecord(record);\n+                    dismissAlertDialog();\n+                    DeveloperPreferences.disableManualFormQuarantine();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5e64ef3406710dbff8306d3d63883547e074c19"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1Mjc5NDAyOnYy", "diffSide": "RIGHT", "path": "app/src/org/commcare/preferences/DeveloperPreferences.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMTo0MDozN1rOGlYYow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMTo0MDozN1rOGlYYow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1MDAxOQ==", "bodyText": "I think this needs to be behind the user visible / controllable developer preferences, not the \"Special Dimagi\" level preferences.\nManual quarantining is a support tool that we need non-Dimagi personnel to be able to trigger to recover a clean state on their devices.", "url": "https://github.com/dimagi/commcare-android/pull/2279#discussion_r441850019", "createdAt": "2020-06-17T21:40:37Z", "author": {"login": "ctsims"}, "path": "app/src/org/commcare/preferences/DeveloperPreferences.java", "diffHunk": "@@ -56,6 +56,7 @@\n     private final static String ENFORCE_SECURE_ENDPOINT = \"cc-enforce-secure-endpoint\";\n     private final static String ALLOW_SPACE_IN_SELECT_CHOICES = \"cc-allow-space-in-select-choices\";\n     private final static String USE_EXPRESSION_CACHING_IN_FORMS = \"use-expression-caching-in-forms\";\n+    private final static String ALLOW_MANUAL_FORM_QUARANTINE = \"cc-allow-manual-form-quarantine\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5e64ef3406710dbff8306d3d63883547e074c19"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3284, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}