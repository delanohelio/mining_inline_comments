{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3NzgzMjk5", "number": 2367, "title": "Add clear buttons to all questions with radio buttons", "bodyText": "Product Note: Add clear button to select one advance widget.", "createdAt": "2020-10-05T11:24:22Z", "url": "https://github.com/dimagi/commcare-android/pull/2367", "merged": true, "mergeCommit": {"oid": "9c29aeab11bf15e423802f40ad478cb9677cf771"}, "closed": true, "closedAt": "2020-10-28T09:15:00Z", "author": {"login": "ShivamPokhriyal"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQ05HEAFqTUwNTYwMjQ5Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdW5ICMAH2gAyNDk3NzgzMjk5Ojk0NjE2M2E0MDQ5YTQ2MjlhYTZkMTMyNzgwMzVjZmVlZjNjYTAxMGM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NjAyNDkz", "url": "https://github.com/dimagi/commcare-android/pull/2367#pullrequestreview-505602493", "createdAt": "2020-10-09T11:53:08Z", "commit": {"oid": "f1d1bb3a1446c1a1427900be79998f7f8f19c909"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMTo1MzowOVrOHfGiBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMTo1MzowOVrOHfGiBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjM3NDkxNw==", "bodyText": "Few design suggestions here -\n\nThis should move to ClearableWidget so that we localize the logic related to clear button in ClearableWidget\nAn alternative approach to this would be to define a method showClearButton in ClearableWidget and only add the button if it evals to true. This way we avoid adding the clear button at all for widgets implementing ClearableWidget but not wanting to show the button.\nA even better approach would be to use composition instead of Inheritance here for ClearableWidget especially since not all subclasses of ClearableWidget ends up showing Clear button in this design.", "url": "https://github.com/dimagi/commcare-android/pull/2367#discussion_r502374917", "createdAt": "2020-10-09T11:53:09Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/views/widgets/LabelWidget.java", "diffHunk": "@@ -168,6 +177,14 @@ public LabelWidget(Context context, FormEntryPrompt prompt) {\n         addView(questionLayout);\n     }\n \n+    /**\n+     * LabelWidget is used for both ListWidget and ListMultiWidget, and we don't show the clear\n+     * button in ListMultiWidget. So this method allows removal of clear button.\n+     */\n+    public void removeClearButton() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1d1bb3a1446c1a1427900be79998f7f8f19c909"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35053029264770a9438b8af554f14388b1c972bf", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/35053029264770a9438b8af554f14388b1c972bf", "committedDate": "2020-10-19T04:57:34Z", "message": "Add clear buttons to all questions with radio buttos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e3fce46735944d297303394c25725841f55f7cf", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/9e3fce46735944d297303394c25725841f55f7cf", "committedDate": "2020-10-19T04:57:34Z", "message": "Remove clear button when multi-select list is used"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03c6b503be5f754edc21ebdea79fc726a1f7ef3d", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/03c6b503be5f754edc21ebdea79fc726a1f7ef3d", "committedDate": "2020-10-19T04:57:34Z", "message": "PR suggestion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "205f4bb15881cee85c4d79bd18ca8700982e32a3", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/205f4bb15881cee85c4d79bd18ca8700982e32a3", "committedDate": "2020-10-19T04:57:34Z", "message": "Remove clear button from list widget"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4c6e096cded875d5c0da2a406f1f691db5fd7fa9", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/4c6e096cded875d5c0da2a406f1f691db5fd7fa9", "committedDate": "2020-10-19T04:55:41Z", "message": "Remove clear button from list widget"}, "afterCommit": {"oid": "205f4bb15881cee85c4d79bd18ca8700982e32a3", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/205f4bb15881cee85c4d79bd18ca8700982e32a3", "committedDate": "2020-10-19T04:57:34Z", "message": "Remove clear button from list widget"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NjEwMDA0", "url": "https://github.com/dimagi/commcare-android/pull/2367#pullrequestreview-517610004", "createdAt": "2020-10-27T11:42:40Z", "commit": {"oid": "205f4bb15881cee85c4d79bd18ca8700982e32a3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMTo0Mjo0MFrOHo357w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMTo0Mjo0MFrOHo357w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjYyMTAzOQ==", "bodyText": "@ShivamPokhriyal The way we are using it now, it makes more sense for this to be simply a static utilitiy method rather than a member of the Widget Classes. Thoughts ?", "url": "https://github.com/dimagi/commcare-android/pull/2367#discussion_r512621039", "createdAt": "2020-10-27T11:42:40Z", "author": {"login": "shubham1g5"}, "path": "app/src/org/commcare/views/widgets/ClearableWidget.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package org.commcare.views.widgets;\n+\n+import android.content.Context;\n+import android.view.LayoutInflater;\n+import android.widget.Button;\n+\n+import org.commcare.dalvik.R;\n+import org.javarosa.form.api.FormEntryPrompt;\n+\n+/**\n+ * A utility for all the widgets that want to show a clear button.\n+ * This class will provide the code for creation of clearButton using {@link ClearableWidget#setupClearButton(Context, String)}.\n+ * Subclasses will need to add the button to the view by themselves.\n+ *\n+ * See {@link SelectOneWidget} for example.\n+ * @author $|-|!\u02c5@M\n+ */\n+public abstract class ClearableWidget extends QuestionWidget {\n+\n+    protected Button clearButton;\n+\n+    public ClearableWidget(Context context, FormEntryPrompt p) {\n+        super(context, p);\n+    }\n+\n+    public ClearableWidget(Context context, FormEntryPrompt p, boolean inCompactGroup) {\n+        super(context, p, inCompactGroup);\n+    }\n+\n+    protected void setupClearButton(Context context, String text, int visibility) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "205f4bb15881cee85c4d79bd18ca8700982e32a3"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9f5d5c81973484a9ade3e65021cd07c9bfc5b32", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/d9f5d5c81973484a9ade3e65021cd07c9bfc5b32", "committedDate": "2020-10-28T07:06:54Z", "message": "Set clear button using static utility"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4NDAyMTkw", "url": "https://github.com/dimagi/commcare-android/pull/2367#pullrequestreview-518402190", "createdAt": "2020-10-28T08:03:32Z", "commit": {"oid": "d9f5d5c81973484a9ade3e65021cd07c9bfc5b32"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "946163a4049a4629aa6d13278035cfeef3ca010c", "author": {"user": {"login": "ShivamPokhriyal", "name": "Shivam Pokhriyal"}}, "url": "https://github.com/dimagi/commcare-android/commit/946163a4049a4629aa6d13278035cfeef3ca010c", "committedDate": "2020-10-28T08:16:56Z", "message": "Merge branch 'master' into add-clear-button"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1953, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}