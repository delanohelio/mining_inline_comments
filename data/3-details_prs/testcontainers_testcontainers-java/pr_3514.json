{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1ODQzNzE0", "number": 3514, "title": "Always use toAbsolutePath() for MountableFile", "bodyText": "forHostPath in MountableFile will now always use toAbsolutePath(), instead of using toURI() in certain cases.\nSolves an issue on Windows that was introduced with the latest Docker Desktop on Windows update.\nFixes #3493.", "createdAt": "2020-11-23T16:18:32Z", "url": "https://github.com/testcontainers/testcontainers-java/pull/3514", "merged": true, "mergeCommit": {"oid": "f033c13086d99d01f398d86187ee6a9a465b6ee2"}, "closed": true, "closedAt": "2020-12-11T11:49:41Z", "author": {"login": "kiview"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfXjhNAH2gAyNTI1ODQzNzE0OmMxNDNmYmVmNGFhZjE0YjA0NWIwYjIwZTNjYjQ5Y2RkNjY1MzU3ZGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlGJ0HgH2gAyNTI1ODQzNzE0OjRmOTc2ODViN2VjYmFjZjI4MjgxYmM2YTc2ODYzZWQ3YzcwZWFkMWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c143fbef4aaf14b045b0b20e3cb49cdd665357df", "author": {"user": {"login": "kiview", "name": "Kevin Wittek"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/c143fbef4aaf14b045b0b20e3cb49cdd665357df", "committedDate": "2020-11-23T16:15:30Z", "message": "Always use toAbsolutePath() for MountableFile.\n\nFixes #3493"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4738e07baf046b246e767fc6b4b3e365aedeabb9", "author": {"user": {"login": "kiview", "name": "Kevin Wittek"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/4738e07baf046b246e767fc6b4b3e365aedeabb9", "committedDate": "2020-11-23T17:29:45Z", "message": "Enforce Unix style path in DockerComposeContainer and when adding bind mount."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e722aa779243a71ddc5df8ece02e0a45ffa090c2", "author": {"user": {"login": "kiview", "name": "Kevin Wittek"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/e722aa779243a71ddc5df8ece02e0a45ffa090c2", "committedDate": "2020-11-23T17:27:35Z", "message": "Enforce Unix style path in DockerComposeContainer and when adding bind mount."}, "afterCommit": {"oid": "4738e07baf046b246e767fc6b4b3e365aedeabb9", "author": {"user": {"login": "kiview", "name": "Kevin Wittek"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/4738e07baf046b246e767fc6b4b3e365aedeabb9", "committedDate": "2020-11-23T17:29:45Z", "message": "Enforce Unix style path in DockerComposeContainer and when adding bind mount."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwODQ3OTc5", "url": "https://github.com/testcontainers/testcontainers-java/pull/3514#pullrequestreview-540847979", "createdAt": "2020-11-30T12:08:06Z", "commit": {"oid": "4738e07baf046b246e767fc6b4b3e365aedeabb9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMjowODowNlrOH74RMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMjowODowNlrOH74RMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU0OTkzOA==", "bodyText": "I am not too sure we should do it here. Future versions of Docker for Windows may become strict about the path (C:\\foo\\bar is good, /mnt/c/foo/bar is bad)\nI would just ensure that we pass it as C:\\ and not C:/", "url": "https://github.com/testcontainers/testcontainers-java/pull/3514#discussion_r532549938", "createdAt": "2020-11-30T12:08:06Z", "author": {"login": "bsideup"}, "path": "core/src/main/java/org/testcontainers/containers/GenericContainer.java", "diffHunk": "@@ -946,7 +946,7 @@ public void addEnv(String key, String value) {\n     public void addFileSystemBind(final String hostPath, final String containerPath, final BindMode mode, final SelinuxContext selinuxContext) {\n \n         final MountableFile mountableFile = MountableFile.forHostPath(hostPath);\n-        binds.add(new Bind(mountableFile.getResolvedPath(), new Volume(containerPath), mode.accessMode, selinuxContext.selContext));\n+        binds.add(new Bind(mountableFile.getUnixFilesystemPath(), new Volume(containerPath), mode.accessMode, selinuxContext.selContext));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4738e07baf046b246e767fc6b4b3e365aedeabb9"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da5e427cf12e5ff76ac1140a5fa9e2faa7e02a81", "author": {"user": {"login": "kiview", "name": "Kevin Wittek"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/da5e427cf12e5ff76ac1140a5fa9e2faa7e02a81", "committedDate": "2020-11-30T16:38:27Z", "message": "Only translate Windows path to Unix path if it looks like a socket mount"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "676c4096d60663ba1a7e47f54f4df2fbb6fe72a7", "author": {"user": {"login": "kiview", "name": "Kevin Wittek"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/676c4096d60663ba1a7e47f54f4df2fbb6fe72a7", "committedDate": "2020-11-30T17:23:52Z", "message": "Construct MountableFile conditionally on Windows"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e4066a9d773e8f2bb54de9627ae042640213cd8", "author": {"user": {"login": "kiview", "name": "Kevin Wittek"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/3e4066a9d773e8f2bb54de9627ae042640213cd8", "committedDate": "2020-11-30T17:24:33Z", "message": "Remove comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac925964d963a831e00c3a29bb898ffb9bc281ec", "author": {"user": {"login": "kiview", "name": "Kevin Wittek"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/ac925964d963a831e00c3a29bb898ffb9bc281ec", "committedDate": "2020-11-30T18:32:30Z", "message": "Don't use MountableFile on Windows when mounting Docker socket"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0fc85e6a84bbe9b5413d80d6fb72152df0f468e", "author": {"user": {"login": "kiview", "name": "Kevin Wittek"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/f0fc85e6a84bbe9b5413d80d6fb72152df0f468e", "committedDate": "2020-12-10T20:36:57Z", "message": "Move unix path conversion into ContainerisedDockerCompose class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5OTg4ODY0", "url": "https://github.com/testcontainers/testcontainers-java/pull/3514#pullrequestreview-549988864", "createdAt": "2020-12-11T10:45:12Z", "commit": {"oid": "f0fc85e6a84bbe9b5413d80d6fb72152df0f468e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f97685b7ecbacf28281bc6a76863ed7c70ead1e", "author": {"user": {"login": "kiview", "name": "Kevin Wittek"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/4f97685b7ecbacf28281bc6a76863ed7c70ead1e", "committedDate": "2020-12-11T11:22:35Z", "message": "Merge branch 'master' into windows-bind-path"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3311, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}