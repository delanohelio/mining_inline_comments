{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NjQwMjQy", "number": 2692, "title": "#2431 Correction for an edge case in local image repos (duplicates tags)", "bodyText": "Duplicate image tags in local docker causing a crash in LocalImagesCache. #2431", "createdAt": "2020-05-09T22:41:54Z", "url": "https://github.com/testcontainers/testcontainers-java/pull/2692", "merged": true, "mergeCommit": {"oid": "123f13aeec72b9c7998b8b5fa32aa1de57c3b31e"}, "closed": true, "closedAt": "2020-05-13T19:34:27Z", "author": {"login": "Choobz"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfuVArgH2gAyNDE1NjQwMjQyOjg4YzQ3YzMxZDU3OTVhM2UyMzIwOTYwZTUxODViZDAxNzBkNWQ0M2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcg2amNgH2gAyNDE1NjQwMjQyOjYzMGVmODgwMmMxOTBiZjNlZTc5MDMzYmI3MTMwMGNkYmRhZTkxNDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "88c47c31d5795a3e2320960e5185bd0170d5d43d", "author": {"user": {"login": "Choobz", "name": "Perennes"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/88c47c31d5795a3e2320960e5185bd0170d5d43d", "committedDate": "2020-05-09T22:36:19Z", "message": "#2431 Correction for an edge case in local image repos (duplicates repo tags) crashing the image pulling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwMDUzOTUx", "url": "https://github.com/testcontainers/testcontainers-java/pull/2692#pullrequestreview-410053951", "createdAt": "2020-05-12T13:42:38Z", "commit": {"oid": "88c47c31d5795a3e2320960e5185bd0170d5d43d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMzo0MjozOFrOGUHONw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMzo0MjozOFrOGUHONw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzc0MzAzMQ==", "bodyText": "alternatively, one can provide a 3rd argument to toMap that won't throw", "url": "https://github.com/testcontainers/testcontainers-java/pull/2692#discussion_r423743031", "createdAt": "2020-05-12T13:42:38Z", "author": {"login": "bsideup"}, "path": "core/src/main/java/org/testcontainers/images/LocalImagesCache.java", "diffHunk": "@@ -79,7 +79,11 @@ private void populateFromList(List<Image> images) {\n             }\n \n             cache.putAll(\n-                Stream.of(repoTags).collect(Collectors.toMap(\n+                Stream.of(repoTags)\n+                    // Protection against some edge case where local image repository tags end up with duplicates\n+                    // making toMap crash at merge time.\n+                   .distinct()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88c47c31d5795a3e2320960e5185bd0170d5d43d"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNjk4MjU2", "url": "https://github.com/testcontainers/testcontainers-java/pull/2692#pullrequestreview-410698256", "createdAt": "2020-05-13T08:25:12Z", "commit": {"oid": "88c47c31d5795a3e2320960e5185bd0170d5d43d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwODoyNToxMlrOGUm09g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwODoyNToxMlrOGUm09g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI2MDg1NA==", "bodyText": "could you please fix the indentation?", "url": "https://github.com/testcontainers/testcontainers-java/pull/2692#discussion_r424260854", "createdAt": "2020-05-13T08:25:12Z", "author": {"login": "bsideup"}, "path": "core/src/main/java/org/testcontainers/images/LocalImagesCache.java", "diffHunk": "@@ -79,7 +79,11 @@ private void populateFromList(List<Image> images) {\n             }\n \n             cache.putAll(\n-                Stream.of(repoTags).collect(Collectors.toMap(\n+                Stream.of(repoTags)\n+                    // Protection against some edge case where local image repository tags end up with duplicates\n+                    // making toMap crash at merge time.\n+                   .distinct()\n+                    .collect(Collectors.toMap(\n                     DockerImageName::new,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88c47c31d5795a3e2320960e5185bd0170d5d43d"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d77d62eefb660ce4a1e503abd215e5a667c15bff", "author": {"user": {"login": "Choobz", "name": "Perennes"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/d77d62eefb660ce4a1e503abd215e5a667c15bff", "committedDate": "2020-05-13T10:34:06Z", "message": "Indentation correction"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "630ef8802c190bf3ee79033bb71300cdbdae9145", "author": {"user": {"login": "Choobz", "name": "Perennes"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/630ef8802c190bf3ee79033bb71300cdbdae9145", "committedDate": "2020-05-13T10:35:35Z", "message": "Indentation correction"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3378, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}