{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1OTk4MTQ2", "number": 2597, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMjowMTo0OVrODzsQ_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMjowMjozM1rODzsR7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NTI5MjE0OnYy", "diffSide": "RIGHT", "path": "settings.gradle", "isResolved": true, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMjowMTo0OVrOGIRCcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTo1NDo0MVrOGIbh2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMyMDk0NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    push = !(System.getenv(\"READ_ONLY_REMOTE_GRADLE_CACHE\") || !isMasterBuild)\n          \n          \n            \n                    push = !(System.getenv(\"READ_ONLY_GRADLE_CACHE\") || !isMasterBuild)\n          \n      \n    \n    \n  \n\n?", "url": "https://github.com/testcontainers/testcontainers-java/pull/2597#discussion_r411320944", "createdAt": "2020-04-20T12:01:49Z", "author": {"login": "kiview"}, "path": "settings.gradle", "diffHunk": "@@ -31,7 +27,7 @@ buildCache {\n         region = 'fra1'\n         bucket = 'testcontainers'\n         path = 'cache'\n-        push = isMasterBuild\n+        push = !(System.getenv(\"READ_ONLY_REMOTE_GRADLE_CACHE\") || !isMasterBuild)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee50e6fcfc4643be6a8d6cb89566dc48651d9dbd"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMyMjIzNQ==", "bodyText": "Also, can we invert boolean logic? \ud83d\ude05\npush = !System.getenv(\"READ_ONLY_GRADLE_CACHE\") && isMasterBuild", "url": "https://github.com/testcontainers/testcontainers-java/pull/2597#discussion_r411322235", "createdAt": "2020-04-20T12:04:03Z", "author": {"login": "kiview"}, "path": "settings.gradle", "diffHunk": "@@ -31,7 +27,7 @@ buildCache {\n         region = 'fra1'\n         bucket = 'testcontainers'\n         path = 'cache'\n-        push = isMasterBuild\n+        push = !(System.getenv(\"READ_ONLY_REMOTE_GRADLE_CACHE\") || !isMasterBuild)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMyMDk0NA=="}, "originalCommit": {"oid": "ee50e6fcfc4643be6a8d6cb89566dc48651d9dbd"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMyMzIwNg==", "bodyText": "Also, are we pushing Windows builds like this and do we want to push Windows builds?", "url": "https://github.com/testcontainers/testcontainers-java/pull/2597#discussion_r411323206", "createdAt": "2020-04-20T12:05:50Z", "author": {"login": "kiview"}, "path": "settings.gradle", "diffHunk": "@@ -31,7 +27,7 @@ buildCache {\n         region = 'fra1'\n         bucket = 'testcontainers'\n         path = 'cache'\n-        push = isMasterBuild\n+        push = !(System.getenv(\"READ_ONLY_REMOTE_GRADLE_CACHE\") || !isMasterBuild)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMyMDk0NA=="}, "originalCommit": {"oid": "ee50e6fcfc4643be6a8d6cb89566dc48651d9dbd"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMzNTE2Nw==", "bodyText": "It is READ_ONLY_REMOTE_GRADLE_CACHE because local Gradle cache can still be enabled\nRe inverting the logic - I find \"push if NOT(READ_ONLY OR NOT(MASTER_BUILD))\" easier to understand since you can focus on what's inside NOT :) @rnorth WDYT?\nRe Windows builds - yes, why not?\nP.S. consider starting new comments (you can do multiple on the same line) to avoid \"RE\"s ;)", "url": "https://github.com/testcontainers/testcontainers-java/pull/2597#discussion_r411335167", "createdAt": "2020-04-20T12:26:03Z", "author": {"login": "bsideup"}, "path": "settings.gradle", "diffHunk": "@@ -31,7 +27,7 @@ buildCache {\n         region = 'fra1'\n         bucket = 'testcontainers'\n         path = 'cache'\n-        push = isMasterBuild\n+        push = !(System.getenv(\"READ_ONLY_REMOTE_GRADLE_CACHE\") || !isMasterBuild)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMyMDk0NA=="}, "originalCommit": {"oid": "ee50e6fcfc4643be6a8d6cb89566dc48651d9dbd"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM5OTQxMw==", "bodyText": "TBH I thought READ_ONLY_REMOTE_GRADLE_CACHE is our own environment variable, and you were setting READ_ONLY_GRADLE_CACHE in CI, therefore I thought this is just a typo.", "url": "https://github.com/testcontainers/testcontainers-java/pull/2597#discussion_r411399413", "createdAt": "2020-04-20T13:57:40Z", "author": {"login": "kiview"}, "path": "settings.gradle", "diffHunk": "@@ -31,7 +27,7 @@ buildCache {\n         region = 'fra1'\n         bucket = 'testcontainers'\n         path = 'cache'\n-        push = isMasterBuild\n+        push = !(System.getenv(\"READ_ONLY_REMOTE_GRADLE_CACHE\") || !isMasterBuild)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMyMDk0NA=="}, "originalCommit": {"oid": "ee50e6fcfc4643be6a8d6cb89566dc48651d9dbd"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2MzU2Ng==", "bodyText": "it is our own variable. Did I set it to READ_ONLY_GRADLE_CACHE? :D good catch then, I should change! \ud83d\udc4d", "url": "https://github.com/testcontainers/testcontainers-java/pull/2597#discussion_r411463566", "createdAt": "2020-04-20T15:17:53Z", "author": {"login": "bsideup"}, "path": "settings.gradle", "diffHunk": "@@ -31,7 +27,7 @@ buildCache {\n         region = 'fra1'\n         bucket = 'testcontainers'\n         path = 'cache'\n-        push = isMasterBuild\n+        push = !(System.getenv(\"READ_ONLY_REMOTE_GRADLE_CACHE\") || !isMasterBuild)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMyMDk0NA=="}, "originalCommit": {"oid": "ee50e6fcfc4643be6a8d6cb89566dc48651d9dbd"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ5MjgyNg==", "bodyText": "Resolve with regards to ENV name \ud83d\ude42\nAbout the boolean expression, I don't want to block just different taste, so proceed as you deem fit \ud83e\udd37\u200d\u2642\ufe0f", "url": "https://github.com/testcontainers/testcontainers-java/pull/2597#discussion_r411492826", "createdAt": "2020-04-20T15:54:41Z", "author": {"login": "kiview"}, "path": "settings.gradle", "diffHunk": "@@ -31,7 +27,7 @@ buildCache {\n         region = 'fra1'\n         bucket = 'testcontainers'\n         path = 'cache'\n-        push = isMasterBuild\n+        push = !(System.getenv(\"READ_ONLY_REMOTE_GRADLE_CACHE\") || !isMasterBuild)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMyMDk0NA=="}, "originalCommit": {"oid": "ee50e6fcfc4643be6a8d6cb89566dc48651d9dbd"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NTI5NDU0OnYy", "diffSide": "RIGHT", "path": "settings.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMjowMjozM1rOGIRD_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMjoyMzoyOFrOGIR0AA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMyMTM0MA==", "bodyText": "Do we have to add the false there? Wouldn't Groovy truth validate correctly otherwise as well?", "url": "https://github.com/testcontainers/testcontainers-java/pull/2597#discussion_r411321340", "createdAt": "2020-04-20T12:02:33Z", "author": {"login": "kiview"}, "path": "settings.gradle", "diffHunk": "@@ -5,21 +5,17 @@ buildscript {\n         }\n     }\n     dependencies {\n-        classpath \"gradle.plugin.ch.myniva.gradle:s3-build-cache:0.9.0\"\n+        classpath \"gradle.plugin.ch.myniva.gradle:s3-build-cache:0.10.0\"\n         classpath \"com.gradle.enterprise:com.gradle.enterprise.gradle.plugin:3.2.1\"\n     }\n-\n-    configurations.classpath {\n-        resolutionStrategy {\n-            force 'com.amazonaws:aws-java-sdk-s3:1.11.582'\n-        }\n-    }\n }\n \n apply plugin: 'ch.myniva.s3-build-cache'\n apply plugin: 'com.gradle.enterprise'\n \n-ext.isMasterBuild = (System.getenv(\"CIRCLE_BRANCH\") ?: System.getenv(\"BUILD_SOURCEBRANCHNAME\")) == \"master\"\n+ext.isMasterBuild = false ||", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee50e6fcfc4643be6a8d6cb89566dc48651d9dbd"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMzMzYzMg==", "bodyText": "this is to align the next lines :)", "url": "https://github.com/testcontainers/testcontainers-java/pull/2597#discussion_r411333632", "createdAt": "2020-04-20T12:23:28Z", "author": {"login": "bsideup"}, "path": "settings.gradle", "diffHunk": "@@ -5,21 +5,17 @@ buildscript {\n         }\n     }\n     dependencies {\n-        classpath \"gradle.plugin.ch.myniva.gradle:s3-build-cache:0.9.0\"\n+        classpath \"gradle.plugin.ch.myniva.gradle:s3-build-cache:0.10.0\"\n         classpath \"com.gradle.enterprise:com.gradle.enterprise.gradle.plugin:3.2.1\"\n     }\n-\n-    configurations.classpath {\n-        resolutionStrategy {\n-            force 'com.amazonaws:aws-java-sdk-s3:1.11.582'\n-        }\n-    }\n }\n \n apply plugin: 'ch.myniva.s3-build-cache'\n apply plugin: 'com.gradle.enterprise'\n \n-ext.isMasterBuild = (System.getenv(\"CIRCLE_BRANCH\") ?: System.getenv(\"BUILD_SOURCEBRANCHNAME\")) == \"master\"\n+ext.isMasterBuild = false ||", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMyMTM0MA=="}, "originalCommit": {"oid": "ee50e6fcfc4643be6a8d6cb89566dc48651d9dbd"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1507, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}