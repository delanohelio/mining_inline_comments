{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1NDcwMTIx", "number": 2587, "title": "Reduce AZP build to a minimal subset of core, except when running on Windows", "bodyText": "", "createdAt": "2020-04-18T09:09:29Z", "url": "https://github.com/testcontainers/testcontainers-java/pull/2587", "merged": true, "mergeCommit": {"oid": "c9692006f1e774eda0981e9820f7331cab662196"}, "closed": true, "closedAt": "2020-04-19T14:22:17Z", "author": {"login": "rnorth"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYyMRFgH2gAyNDA1NDcwMTIxOjViN2E0Y2MwODY0M2E0YWRmYTg5ODdlZTRkMjJiN2M3NmZiMzlhYzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZLQqugFqTM5NjAyNDA4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5b7a4cc08643a4adfa8987ee4d22b7c76fb39ac2", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/5b7a4cc08643a4adfa8987ee4d22b7c76fb39ac2", "committedDate": "2020-04-18T09:08:55Z", "message": "Reduce AZP build to a minimal subset of core, except when running on Windows"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1ODk3MDI1", "url": "https://github.com/testcontainers/testcontainers-java/pull/2587#pullrequestreview-395897025", "createdAt": "2020-04-18T09:09:59Z", "commit": {"oid": "5b7a4cc08643a4adfa8987ee4d22b7c76fb39ac2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQwOTowOTo1OVrOGHpdcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQwOTowOTo1OVrOGHpdcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY3MjQ5OQ==", "bodyText": "I think this is right, but obviously want to test it.", "url": "https://github.com/testcontainers/testcontainers-java/pull/2587#discussion_r410672499", "createdAt": "2020-04-18T09:09:59Z", "author": {"login": "rnorth"}, "path": "azure-pipelines.yml", "diffHunk": "@@ -1,49 +1,38 @@\n jobs:\n-- job: core\n+\n+# Run a minimal set of tests in normal Linux pipeline builds\n+- job: minimal_core\n   steps:\n   - task: Gradle@2\n-    displayName: Build & test\n+    displayName: Build & test (minimal core)\n     env:\n       AWS_ACCESS_KEY_ID: $(aws.accessKeyId)\n       AWS_SECRET_ACCESS_KEY: $(aws.secretAccessKey)\n     inputs:\n         gradleWrapperFile: 'gradlew'\n         jdkVersionOption: '1.11'\n         options: '--no-daemon --continue'\n-        tasks: 'testcontainers:check'\n+        tasks: 'testcontainers:test --tests \"*GenericContainerRuleTest\"'\n         publishJUnitResults: true\n         testResultsFiles: '**/TEST-*.xml'\n   - script: wget -q https://get.cimate.io/release/linux/cimate && chmod +x cimate && ./cimate \"**/TEST-*.xml\"\n     condition: and(succeededOrFailed(),eq(variables['Agent.OS'], 'Linux'))\n-- job: jdbc\n+\n+# Run all tests when running the Windows CI tests\n+- job: full_build_windows\n+  condition: eq(variables['Agent.OS'], 'Windows')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b7a4cc08643a4adfa8987ee4d22b7c76fb39ac2"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "415bee30df987f6251594c686a16ef8bc1b546a3", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/415bee30df987f6251594c686a16ef8bc1b546a3", "committedDate": "2020-04-18T09:35:23Z", "message": "Quoting issue?"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a3f1b5f0ef9ef8b82aa8b1e186815eb5f22e98d", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/7a3f1b5f0ef9ef8b82aa8b1e186815eb5f22e98d", "committedDate": "2020-04-18T09:40:24Z", "message": "Merge branch 'master' into reduce-azp-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05115a997bef3337019c7886212e620f5099d4e2", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/05115a997bef3337019c7886212e620f5099d4e2", "committedDate": "2020-04-18T13:24:15Z", "message": "Merge branch 'master' into reduce-azp-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32d1071a59a8064dce581f4871529fbc487d6951", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/32d1071a59a8064dce581f4871529fbc487d6951", "committedDate": "2020-04-18T13:34:27Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3891142b4575d4ccdc091f8adecd00e511ee5659", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/3891142b4575d4ccdc091f8adecd00e511ee5659", "committedDate": "2020-04-18T13:37:13Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5baa1d21007c28ae7fe9bccc170d46eb6240b81b", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/5baa1d21007c28ae7fe9bccc170d46eb6240b81b", "committedDate": "2020-04-18T14:03:33Z", "message": "Because of course"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa88bb384b6549a26c54b3887ad88ec8f5cc5bfc", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/fa88bb384b6549a26c54b3887ad88ec8f5cc5bfc", "committedDate": "2020-04-18T15:27:16Z", "message": "Move Windows condition from job to step"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b496ef422b076afb033a3a652fa35fc6c2fd177c", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/b496ef422b076afb033a3a652fa35fc6c2fd177c", "committedDate": "2020-04-18T15:36:02Z", "message": "One job, different steps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfb289bc4c9a27b380ff115da8de3ee014959067", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/cfb289bc4c9a27b380ff115da8de3ee014959067", "committedDate": "2020-04-18T15:49:58Z", "message": "Merge branch 'master' into reduce-azp-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e60aba5780f49d9378e8faa49ad65727231d5b6c", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/e60aba5780f49d9378e8faa49ad65727231d5b6c", "committedDate": "2020-04-18T19:18:49Z", "message": "Temporary change to test build behaviour"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1OTQzNDI5", "url": "https://github.com/testcontainers/testcontainers-java/pull/2587#pullrequestreview-395943429", "createdAt": "2020-04-18T19:20:30Z", "commit": {"oid": "e60aba5780f49d9378e8faa49ad65727231d5b6c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxOToyMDozMFrOGHtjhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxOToyMDozMFrOGHtjhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDczOTU5MQ==", "bodyText": "IIRC we can change it based on conditions (all on Windows, subset otherwise)", "url": "https://github.com/testcontainers/testcontainers-java/pull/2587#discussion_r410739591", "createdAt": "2020-04-18T19:20:30Z", "author": {"login": "bsideup"}, "path": "azure-pipelines.yml", "diffHunk": "@@ -1,49 +1,36 @@\n jobs:\n-- job: core\n+\n+- job: azure_pipeline_tests\n   steps:\n+\n+  # Run a minimal set of tests in normal Linux pipeline builds\n   - task: Gradle@2\n-    displayName: Build & test\n+    condition: eq(variables['Agent.OS'], 'Linux')\n+    displayName: Build & test (Linux - minimal core)\n     env:\n       AWS_ACCESS_KEY_ID: $(aws.accessKeyId)\n       AWS_SECRET_ACCESS_KEY: $(aws.secretAccessKey)\n     inputs:\n         gradleWrapperFile: 'gradlew'\n         jdkVersionOption: '1.11'\n-        options: '--no-daemon --continue'\n-        tasks: 'testcontainers:check'\n+        options: \"--no-daemon --continue\"\n+        tasks: \"testcontainers:test --tests GenericContainerRuleTest\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e60aba5780f49d9378e8faa49ad65727231d5b6c"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfc5a0bc87b7058d192c5e8c50c71f04cdf56678", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/bfc5a0bc87b7058d192c5e8c50c71f04cdf56678", "committedDate": "2020-04-18T19:31:39Z", "message": "Reverse temporary change"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4e833c1b7126ad6aaf5d6e8d3b97c1b7dadec41e", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/4e833c1b7126ad6aaf5d6e8d3b97c1b7dadec41e", "committedDate": "2020-04-18T20:20:41Z", "message": "Check if agent.os is available"}, "afterCommit": {"oid": "bfc5a0bc87b7058d192c5e8c50c71f04cdf56678", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/bfc5a0bc87b7058d192c5e8c50c71f04cdf56678", "committedDate": "2020-04-18T19:31:39Z", "message": "Reverse temporary change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MDI0MDg3", "url": "https://github.com/testcontainers/testcontainers-java/pull/2587#pullrequestreview-396024087", "createdAt": "2020-04-19T14:21:21Z", "commit": {"oid": "bfc5a0bc87b7058d192c5e8c50c71f04cdf56678"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3403, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}