{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1NDIxMTUw", "number": 2585, "title": "Public ImageData class for custom image pull policies", "bodyText": "I was following the docs here: https://www.testcontainers.org/features/advanced_options/#image-pull-policy for creating a custom pull policy. It wouldn't let me compile since the ImageData class was not public. This PR makes that class public and provides a test to ensure ImageData can be accessed outside the org.testcontainers.images package.", "createdAt": "2020-04-18T01:03:51Z", "url": "https://github.com/testcontainers/testcontainers-java/pull/2585", "merged": true, "mergeCommit": {"oid": "b6cd9c80eddca65c9e2718b66c91b6b76f181371"}, "closed": true, "closedAt": "2020-04-19T14:20:18Z", "author": {"login": "cha55son"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYrDcwgH2gAyNDA1NDIxMTUwOjcyM2VlNTg0OTE5MGE0ZmY2MTJiNzY1MDM2NTZiYzRiMDE2MTdjMjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZLPVxAFqTM5NjAyMzkyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "723ee5849190a4ff612b76503656bc4b01617c26", "author": {"user": {"login": "chason-choate", "name": "Chason Choate"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/723ee5849190a4ff612b76503656bc4b01617c26", "committedDate": "2020-04-18T00:49:57Z", "message": "Making imagedata public so it can be used to create custom image pull\npolicies. Adding test to ensure it works as expected."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbd65d2e327ddf7d31b3f9203d3737c68af17a2d", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/fbd65d2e327ddf7d31b3f9203d3737c68af17a2d", "committedDate": "2020-04-18T15:19:01Z", "message": "Merge branch 'master' into bugfix/public-image-data"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1OTQ0NTIw", "url": "https://github.com/testcontainers/testcontainers-java/pull/2585#pullrequestreview-395944520", "createdAt": "2020-04-18T19:35:21Z", "commit": {"oid": "fbd65d2e327ddf7d31b3f9203d3737c68af17a2d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxOTozNToyMVrOGHtqEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxOTozNToyMVrOGHtqEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0MTI2NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    return true;\n          \n          \n            \n                                    return false;\n          \n      \n    \n    \n  \n\nLet's not do unnecessary pulls", "url": "https://github.com/testcontainers/testcontainers-java/pull/2585#discussion_r410741265", "createdAt": "2020-04-18T19:35:21Z", "author": {"login": "bsideup"}, "path": "core/src/test/java/alt/testcontainers/images/OutOfPackageImagePullPolicyTest.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package alt.testcontainers.images;\n+\n+import org.junit.Test;\n+import org.testcontainers.containers.GenericContainer;\n+import org.testcontainers.containers.startupcheck.OneShotStartupCheckStrategy;\n+import org.testcontainers.images.AbstractImagePullPolicy;\n+import org.testcontainers.images.ImageData;\n+import org.testcontainers.utility.DockerImageName;\n+\n+public class OutOfPackageImagePullPolicyTest {\n+    @Test\n+    public void shouldSupportCustomPoliciesOutOfTestContainersPackage() {\n+        try (\n+            GenericContainer<?> container = new GenericContainer<>(\"hello-world:latest\")\n+                .withImagePullPolicy(new AbstractImagePullPolicy() {\n+                    @Override\n+                    protected boolean shouldPullCached(DockerImageName imageName, ImageData localImageData) {\n+                        return true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbd65d2e327ddf7d31b3f9203d3737c68af17a2d"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1OTQ0NTcw", "url": "https://github.com/testcontainers/testcontainers-java/pull/2585#pullrequestreview-395944570", "createdAt": "2020-04-18T19:36:04Z", "commit": {"oid": "fbd65d2e327ddf7d31b3f9203d3737c68af17a2d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxOTozNjowNFrOGHtqRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxOTozNjowNFrOGHtqRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0MTMxNg==", "bodyText": "empty constructor would work too (will use the \"default\" image), so that we limit the number of images we use in our test suite", "url": "https://github.com/testcontainers/testcontainers-java/pull/2585#discussion_r410741316", "createdAt": "2020-04-18T19:36:04Z", "author": {"login": "bsideup"}, "path": "core/src/test/java/alt/testcontainers/images/OutOfPackageImagePullPolicyTest.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package alt.testcontainers.images;\n+\n+import org.junit.Test;\n+import org.testcontainers.containers.GenericContainer;\n+import org.testcontainers.containers.startupcheck.OneShotStartupCheckStrategy;\n+import org.testcontainers.images.AbstractImagePullPolicy;\n+import org.testcontainers.images.ImageData;\n+import org.testcontainers.utility.DockerImageName;\n+\n+public class OutOfPackageImagePullPolicyTest {\n+    @Test\n+    public void shouldSupportCustomPoliciesOutOfTestContainersPackage() {\n+        try (\n+            GenericContainer<?> container = new GenericContainer<>(\"hello-world:latest\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbd65d2e327ddf7d31b3f9203d3737c68af17a2d"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8358f5c97e26797c9ec6f142a61d17e3c3728d88", "author": {"user": {"login": "chason-choate", "name": "Chason Choate"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/8358f5c97e26797c9ec6f142a61d17e3c3728d88", "committedDate": "2020-04-19T13:15:30Z", "message": "Ensuring we don't do unnecessary pulls and using the default generic\ncontainer image for the out of package pull policy test."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MDIzOTI4", "url": "https://github.com/testcontainers/testcontainers-java/pull/2585#pullrequestreview-396023928", "createdAt": "2020-04-19T14:19:54Z", "commit": {"oid": "8358f5c97e26797c9ec6f142a61d17e3c3728d88"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3401, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}