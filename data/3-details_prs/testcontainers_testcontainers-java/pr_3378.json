{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3NzcyMDUy", "number": 3378, "title": "Change image used for test to avoid image name cache preventing proper pull", "bodyText": "To fix build errors like this one, which I believe is happening when alpine:latest is recorded as present in Testcontainers' image name cache:\nGradle Test Executor 1 > org.testcontainers.dockerclient.AmbiguousImagePullTest > testNotUsingParse FAILED\n    org.testcontainers.containers.ContainerLaunchException: Container startup failed\n        at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:331)\n        at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:312)\n        at org.testcontainers.dockerclient.AmbiguousImagePullTest.testNotUsingParse(AmbiguousImagePullTest.java:30)\n\n        Caused by:\n        org.rnorth.ducttape.RetryCountExceededException: Retry limit hit with exception\n            at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:88)\n            at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:324)\n            ... 2 more\n\n            Caused by:\n            org.testcontainers.containers.ContainerLaunchException: Could not create/start container\n                at org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:498)\n                at org.testcontainers.containers.GenericContainer.lambda$doStart$0(GenericContainer.java:326)\n                at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:81)\n                ... 3 more\n\n                Caused by:\n                com.github.dockerjava.api.exception.NotFoundException: Status 404: {\"message\":\"No such image: alpine:latest\"}\n                    at com.github.dockerjava.core.DefaultInvocationBuilder.execute(DefaultInvocationBuilder.java:241)\n                    at com.github.dockerjava.core.DefaultInvocationBuilder.post(DefaultInvocationBuilder.java:125)\n                    at com.github.dockerjava.core.exec.CreateContainerCmdExec.execute(CreateContainerCmdExec.java:33)\n                    at com.github.dockerjava.core.exec.CreateContainerCmdExec.execute(CreateContainerCmdExec.java:13)\n                    at com.github.dockerjava.core.exec.AbstrSyncDockerCmdExec.exec(AbstrSyncDockerCmdExec.java:21)\n                    at com.github.dockerjava.core.command.AbstrDockerCmd.exec(AbstrDockerCmd.java:35)\n                    at com.github.dockerjava.core.command.CreateContainerCmdImpl.exec(CreateContainerCmdImpl.java:595)\n                    at org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:408)\n                    ... 5 more", "createdAt": "2020-10-21T18:20:24Z", "url": "https://github.com/testcontainers/testcontainers-java/pull/3378", "merged": true, "mergeCommit": {"oid": "c110086287f96a408c5fbfb589be72d67b033c57"}, "closed": true, "closedAt": "2020-10-22T16:31:23Z", "author": {"login": "rnorth"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUxkudgFqTUxNDA1Mjg0Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdU-1HVgFqTUxNDU0ODgwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MDUyODQz", "url": "https://github.com/testcontainers/testcontainers-java/pull/3378#pullrequestreview-514052843", "createdAt": "2020-10-21T18:21:10Z", "commit": {"oid": "99ba2c3626a93ae7c8cd96cb1743992cc86ec9a4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxODoyMToxMVrOHl8Tew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxODoyMToxMVrOHl8Tew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTU0NzM4Nw==", "bodyText": "We never use the latest tag of this image anywhere else, so we can safely use it here without worrying about it being recorded in the cache of available images.", "url": "https://github.com/testcontainers/testcontainers-java/pull/3378#discussion_r509547387", "createdAt": "2020-10-21T18:21:11Z", "author": {"login": "rnorth"}, "path": "core/src/test/java/org/testcontainers/dockerclient/AmbiguousImagePullTest.java", "diffHunk": "@@ -16,14 +16,14 @@\n     public void testNotUsingParse() {\n         DockerClient client = DockerClientFactory.instance().client();\n         List<Image> alpineImages = client.listImagesCmd()\n-            .withImageNameFilter(\"alpine:latest\")\n+            .withImageNameFilter(\"testcontainers/helloworld:latest\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99ba2c3626a93ae7c8cd96cb1743992cc86ec9a4"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bdbd768e49f9b1e06521013748b777c633befaf", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/6bdbd768e49f9b1e06521013748b777c633befaf", "committedDate": "2020-10-21T18:28:09Z", "message": "Change image used for test to avoid image name cache preventing proper pull"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99ba2c3626a93ae7c8cd96cb1743992cc86ec9a4", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/99ba2c3626a93ae7c8cd96cb1743992cc86ec9a4", "committedDate": "2020-10-21T18:18:23Z", "message": "Change image used for test to avoid image name cache preventing proper pull"}, "afterCommit": {"oid": "6bdbd768e49f9b1e06521013748b777c633befaf", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/6bdbd768e49f9b1e06521013748b777c633befaf", "committedDate": "2020-10-21T18:28:09Z", "message": "Change image used for test to avoid image name cache preventing proper pull"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0NTQ4ODA5", "url": "https://github.com/testcontainers/testcontainers-java/pull/3378#pullrequestreview-514548809", "createdAt": "2020-10-22T09:47:51Z", "commit": {"oid": "6bdbd768e49f9b1e06521013748b777c633befaf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3323, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}