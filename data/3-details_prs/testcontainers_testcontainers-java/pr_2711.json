{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2Mzg0MTU1", "number": 2711, "title": "Method to enable functions worker in pulsar container", "bodyText": "This change should simplify a bit pulsar functions development experience\nTried here: https://github.com/lanwen/pulsar-functions-example\nWithout waiter pulsar could return random 503, depending on how fast\nwas a call.", "createdAt": "2020-05-11T22:36:00Z", "url": "https://github.com/testcontainers/testcontainers-java/pull/2711", "merged": true, "mergeCommit": {"oid": "6186598c9b518e71fcc55ff313a5ac1460ff3df9"}, "closed": true, "closedAt": "2020-06-30T14:49:04Z", "author": {"login": "lanwen"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcg-gDZgFqTQxMTI1NTkxOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwWmAIAFqTQ0MDA3OTIyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMjU1OTE4", "url": "https://github.com/testcontainers/testcontainers-java/pull/2711#pullrequestreview-411255918", "createdAt": "2020-05-13T20:00:46Z", "commit": {"oid": "c378c71cb93df4ad27bf8ba32af8312ae9edb7c9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMDowMDo0NlrOGVBc-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMDowMDo0NlrOGVBc-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDY5NzA4Mg==", "bodyText": "I'd be better to store it as a boolean flag and decide which command to use in configure. Also, I'd use a composite wait strategy that will wait for both Pulsar's readiness and that the Function worker has started", "url": "https://github.com/testcontainers/testcontainers-java/pull/2711#discussion_r424697082", "createdAt": "2020-05-13T20:00:46Z", "author": {"login": "bsideup"}, "path": "modules/pulsar/src/main/java/org/testcontainers/containers/PulsarContainer.java", "diffHunk": "@@ -25,6 +25,11 @@ public PulsarContainer(String pulsarVersion) {\n         waitingFor(Wait.forHttp(METRICS_ENDPOINT).forStatusCode(200).forPort(BROKER_HTTP_PORT));\n     }\n \n+    public PulsarContainer withFunctionsWorker() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c378c71cb93df4ad27bf8ba32af8312ae9edb7c9"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMjU2NTc1", "url": "https://github.com/testcontainers/testcontainers-java/pull/2711#pullrequestreview-411256575", "createdAt": "2020-05-13T20:01:44Z", "commit": {"oid": "c378c71cb93df4ad27bf8ba32af8312ae9edb7c9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMDowMTo0NVrOGVBe8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMDowMTo0NVrOGVBe8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDY5NzU4NA==", "bodyText": "Is there anything we can assert to ensure that it actually works?\nOtherwise, this test will pass if I make withFunctionsWorker NO-OP \ud83d\ude05", "url": "https://github.com/testcontainers/testcontainers-java/pull/2711#discussion_r424697584", "createdAt": "2020-05-13T20:01:45Z", "author": {"login": "bsideup"}, "path": "modules/pulsar/src/test/java/org/testcontainers/containers/PulsarContainerTest.java", "diffHunk": "@@ -23,6 +23,13 @@ public void testUsage() throws Exception {\n         }\n     }\n \n+    @Test\n+    public void shouldWaitForFunctionsWorkerStarted() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c378c71cb93df4ad27bf8ba32af8312ae9edb7c9"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "144a6c858ba01b7db8cbe87ee1f2beee6046b1c9", "author": {"user": {"login": "lanwen", "name": "Kirill Merkushev"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/144a6c858ba01b7db8cbe87ee1f2beee6046b1c9", "committedDate": "2020-05-14T13:39:21Z", "message": "Method to enable functions worker in pulsar container\n\nThis change should simplify a bit pulsar functions development experience\nTried here: https://github.com/lanwen/pulsar-functions-example\n\nWithout waiter pulsar could return random 503, depending on how fast\nwas a call."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7ae72e4f7ac05c6563eb3b541ecf4b5916b295c", "author": {"user": {"login": "lanwen", "name": "Kirill Merkushev"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/b7ae72e4f7ac05c6563eb3b541ecf4b5916b295c", "committedDate": "2020-05-14T13:39:37Z", "message": "treat functions worker method as a flag to enable in configure\n\nreal functions upload test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45fddfd5ee4e7746f5edfca84fd161b4dd9f9c30", "author": {"user": {"login": "lanwen", "name": "Kirill Merkushev"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/45fddfd5ee4e7746f5edfca84fd161b4dd9f9c30", "committedDate": "2020-05-14T13:39:44Z", "message": "upd pulsar to 2.5.1"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ba29f9feb0943dc23bd83478c11b87654c275f1", "author": {"user": {"login": "lanwen", "name": "Kirill Merkushev"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/2ba29f9feb0943dc23bd83478c11b87654c275f1", "committedDate": "2020-05-14T13:37:41Z", "message": "upd pulsar to 2.5.1"}, "afterCommit": {"oid": "45fddfd5ee4e7746f5edfca84fd161b4dd9f9c30", "author": {"user": {"login": "lanwen", "name": "Kirill Merkushev"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/45fddfd5ee4e7746f5edfca84fd161b4dd9f9c30", "committedDate": "2020-05-14T13:39:44Z", "message": "upd pulsar to 2.5.1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d4abd3699a2ce4e10c256a62ba6aefc21968af8", "author": {"user": {"login": "lanwen", "name": "Kirill Merkushev"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/1d4abd3699a2ce4e10c256a62ba6aefc21968af8", "committedDate": "2020-05-14T16:53:12Z", "message": "don't store jar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cacdf5a2d1a55ad29c8c0b583254aeef4151877", "author": {"user": {"login": "lanwen", "name": "Kirill Merkushev"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/0cacdf5a2d1a55ad29c8c0b583254aeef4151877", "committedDate": "2020-05-15T13:26:40Z", "message": "expect error for functions without worker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a01abd10b50f5383154db8548e3694d52da86b32", "author": {"user": {"login": "bsideup", "name": "Sergei Egorov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/a01abd10b50f5383154db8548e3694d52da86b32", "committedDate": "2020-06-30T14:32:59Z", "message": "reduce the changeset"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMDc5MjIx", "url": "https://github.com/testcontainers/testcontainers-java/pull/2711#pullrequestreview-440079221", "createdAt": "2020-06-30T14:33:52Z", "commit": {"oid": "a01abd10b50f5383154db8548e3694d52da86b32"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3379, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}