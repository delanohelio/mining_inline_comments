{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5MDU2Nzg0", "number": 2520, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMjoxNzoyMlrODu3vfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQwODo1NjoxN1rODzMzyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNDc0MzY1OnYy", "diffSide": "RIGHT", "path": ".github/workflows/scripts/generate_github_ci.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMjoxNzoyMlrOGA_g9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxNToxMDoyOVrOGBAzQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5MzgxNA==", "bodyText": "I wonder if shared compile (1 busy worker) actually helps. Have you done some measurements yet?", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#discussion_r403693814", "createdAt": "2020-04-05T12:17:22Z", "author": {"login": "bsideup"}, "path": ".github/workflows/scripts/generate_github_ci.sh", "diffHunk": "@@ -0,0 +1,63 @@\n+#!/bin/bash\n+set -o errexit\n+set -o nounset\n+set -o pipefail\n+set -o xtrace\n+\n+CI_WORKFLOW_FILE=.github/workflows/ci.yml\n+\n+generate_job () {\n+    NAME=$1\n+    GRADLE_ARGS=$2\n+    NEEDS=${3:-[]}\n+\n+    cat <<END >> $CI_WORKFLOW_FILE\n+    ${NAME}:\n+        runs-on: ubuntu-18.04\n+        needs: ${NEEDS}\n+        steps:\n+          - uses: actions/checkout@v2\n+          - uses: actions/setup-java@v1\n+            with:\n+              java-version: '1.8'\n+          - name: Cache Gradle Home files\n+            uses: actions/cache@v1\n+            with:\n+              path: ~/.gradle\n+              key: \\${{ runner.os }}-gradle-home-\\${{ hashFiles('**/*.gradle') }}\n+              restore-keys: \\${{ runner.os }}-gradle-home\n+          - name: Cache Gradle Local files\n+            uses: actions/cache@v1\n+            with:\n+              path: .gradle\n+              key: \\${{ runner.os }}-gradle-local-\\${{ hashFiles('**/*.gradle') }}\n+              restore-keys: \\${{ runner.os }}-gradle-local\n+          - name: Build with Gradle\n+            run: |\n+                ./gradlew --no-daemon --continue --scan ${GRADLE_ARGS}\n+END\n+}\n+\n+generate_preface () {\n+    cat <<END > $CI_WORKFLOW_FILE\n+\n+# This file is generated by .github/workflows/scripts/generate_github_ci.sh\n+# DO NOT HAND EDIT\n+name: CI\n+\n+on:\n+  pull_request: {}\n+  push: { branches: [ master ] }\n+\n+jobs:\n+END\n+}\n+\n+generate_preface\n+generate_job compile \"build -x test\"\n+generate_job core \"testcontainers:check\" compile", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e645c2ccec46a758913bd592a54802536bcee042"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzcxNDg4Mg==", "bodyText": "It does not, so I removed it \ud83d\ude04", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#discussion_r403714882", "createdAt": "2020-04-05T15:10:29Z", "author": {"login": "rnorth"}, "path": ".github/workflows/scripts/generate_github_ci.sh", "diffHunk": "@@ -0,0 +1,63 @@\n+#!/bin/bash\n+set -o errexit\n+set -o nounset\n+set -o pipefail\n+set -o xtrace\n+\n+CI_WORKFLOW_FILE=.github/workflows/ci.yml\n+\n+generate_job () {\n+    NAME=$1\n+    GRADLE_ARGS=$2\n+    NEEDS=${3:-[]}\n+\n+    cat <<END >> $CI_WORKFLOW_FILE\n+    ${NAME}:\n+        runs-on: ubuntu-18.04\n+        needs: ${NEEDS}\n+        steps:\n+          - uses: actions/checkout@v2\n+          - uses: actions/setup-java@v1\n+            with:\n+              java-version: '1.8'\n+          - name: Cache Gradle Home files\n+            uses: actions/cache@v1\n+            with:\n+              path: ~/.gradle\n+              key: \\${{ runner.os }}-gradle-home-\\${{ hashFiles('**/*.gradle') }}\n+              restore-keys: \\${{ runner.os }}-gradle-home\n+          - name: Cache Gradle Local files\n+            uses: actions/cache@v1\n+            with:\n+              path: .gradle\n+              key: \\${{ runner.os }}-gradle-local-\\${{ hashFiles('**/*.gradle') }}\n+              restore-keys: \\${{ runner.os }}-gradle-local\n+          - name: Build with Gradle\n+            run: |\n+                ./gradlew --no-daemon --continue --scan ${GRADLE_ARGS}\n+END\n+}\n+\n+generate_preface () {\n+    cat <<END > $CI_WORKFLOW_FILE\n+\n+# This file is generated by .github/workflows/scripts/generate_github_ci.sh\n+# DO NOT HAND EDIT\n+name: CI\n+\n+on:\n+  pull_request: {}\n+  push: { branches: [ master ] }\n+\n+jobs:\n+END\n+}\n+\n+generate_preface\n+generate_job compile \"build -x test\"\n+generate_job core \"testcontainers:check\" compile", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5MzgxNA=="}, "originalCommit": {"oid": "e645c2ccec46a758913bd592a54802536bcee042"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyNzUzNjczOnYy", "diffSide": "RIGHT", "path": ".github/workflows/ci-dind.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQxMTo1MjoxNFrOGEUvkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQxMzoxOToyMVrOGEVWcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzE4NzM0Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            name: CI\n          \n          \n            \n            name: in-container", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#discussion_r407187346", "createdAt": "2020-04-12T11:52:14Z", "author": {"login": "bsideup"}, "path": ".github/workflows/ci-dind.yml", "diffHunk": "@@ -0,0 +1,28 @@\n+name: CI", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81a154716bc74bbf6a1cad584246b0d0b172d875"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzE5NzI5Nw==", "bodyText": "Good spot - thanks.", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#discussion_r407197297", "createdAt": "2020-04-12T13:19:21Z", "author": {"login": "rnorth"}, "path": ".github/workflows/ci-dind.yml", "diffHunk": "@@ -0,0 +1,28 @@\n+name: CI", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzE4NzM0Ng=="}, "originalCommit": {"oid": "81a154716bc74bbf6a1cad584246b0d0b172d875"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NDQ5NTEyOnYy", "diffSide": "RIGHT", "path": ".github/workflows/ci.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMDoyNDo0N1rOGG12Lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMDoyNDo0N1rOGG12Lw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgyNjg2Mw==", "bodyText": "if you add the following task to Gradle:\ntask taskMatrix {\n    doLast {\n        println(\n            groovy.json.JsonOutput.toJson(subprojects.collect { it.tasks.getByName('check').path })\n        )\n    }\n}\nyou can delegate the matrix creation to it:\necho \"::set-output name=matrix::{\\\"gradle_args\\\":$(./gradlew --no-daemon -q taskMatrix)}\"", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#discussion_r409826863", "createdAt": "2020-04-16T20:24:47Z", "author": {"login": "bsideup"}, "path": ".github/workflows/ci.yml", "diffHunk": "@@ -5,20 +5,39 @@ on:\n   push: { branches: [ master ] }\n \n jobs:\n-  in-docker_test:\n+  find_gradle_jobs:\n     runs-on: ubuntu-18.04\n+    outputs:\n+      matrix: ${{ steps.set-matrix.outputs.matrix }}\n     steps:\n       - uses: actions/checkout@v2\n-      - name: Build with Gradle\n+      - id: set-matrix\n+        run: echo \"::set-output name=matrix::{\\\"gradle_args\\\":$(.github/workflows/scripts/find_gradle_jobs.sh)}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "357f093d9da16a6d84652ed997fa33de50b68533"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1MDEzNjk4OnYy", "diffSide": "RIGHT", "path": "gradle/ci-support.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQwODo1NDozM1rOGHpWdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQwODo1NDozM1rOGHpWdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY3MDcxMQ==", "bodyText": "Worth adding a comment to explain this?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            gradle.taskGraph.whenReady {\n          \n          \n            \n            // If we're executing the `taskMatrix` task, disable tests and other slow tasks\n          \n          \n            \n            //  so that we can get a result quickly.\n          \n          \n            \n            gradle.taskGraph.whenReady {", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#discussion_r410670711", "createdAt": "2020-04-18T08:54:33Z", "author": {"login": "rnorth"}, "path": "gradle/ci-support.gradle", "diffHunk": "@@ -0,0 +1,33 @@\n+import groovy.json.JsonOutput\n+\n+// Emit a JSON-formatted list of check tasks to be run in CI\n+task testMatrix {\n+    project.afterEvaluate {\n+        def checkTasks = subprojects.collect {\n+            it.tasks.findByName(\"check\")\n+        }.findAll { it != null }\n+\n+        dependsOn(checkTasks)\n+        doLast {\n+            def checkTaskPaths = checkTasks\n+                .findAll { !it.state.upToDate }\n+                .collect { it.path }\n+\n+            println(JsonOutput.toJson(checkTaskPaths))\n+        }\n+    }\n+}\n+\n+gradle.taskGraph.whenReady {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb53bba84291e6d34db926ebcdf1e5383b4229cf"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1MDEzODMyOnYy", "diffSide": "RIGHT", "path": "gradle/ci-support.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQwODo1NjoxN1rOGHpXHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQwODo1NjoxN1rOGHpXHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY3MDg3Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        def checkTaskPaths = checkTasks\n          \n          \n            \n                        // Obtain a list of check tasks that are not up-to-date, i.e.\n          \n          \n            \n                        //  the ones which Gradle cannot find a cached output for.\n          \n          \n            \n                        def checkTaskPaths = checkTasks", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#discussion_r410670876", "createdAt": "2020-04-18T08:56:17Z", "author": {"login": "rnorth"}, "path": "gradle/ci-support.gradle", "diffHunk": "@@ -0,0 +1,33 @@\n+import groovy.json.JsonOutput\n+\n+// Emit a JSON-formatted list of check tasks to be run in CI\n+task testMatrix {\n+    project.afterEvaluate {\n+        def checkTasks = subprojects.collect {\n+            it.tasks.findByName(\"check\")\n+        }.findAll { it != null }\n+\n+        dependsOn(checkTasks)\n+        doLast {\n+            def checkTaskPaths = checkTasks", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb53bba84291e6d34db926ebcdf1e5383b4229cf"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1537, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}