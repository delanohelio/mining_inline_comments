{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4NTAwNzE3", "number": 2839, "title": "Deprecate ambiguous constructors", "bodyText": "Our constructors for GenericContainer and all the classes that inherit from it tend to be a bit inconsistent. In some places, a no-args constructor is favoured, in other places a String parameter is favoured - which can be either a full image name or a tag.\nThis raises confusion, and in the case of an image tag being the parameter, it restricts which images people can easily use.\nAnother problem this raises is when the container class specifies a default tag version: this frequently falls out of date. We're stuck for options: some users (and image maintainers) would like to see newer image versions being used, but this could be a breaking change for existing users. This is especially risky when a major version bump is proposed.\nFor example, the following open PRs suffer varying degrees of this risk: #2825, #2773, #2320, #2436.\nThis PR aims to:\n\n Deprecate 'ambiguous' constructors for containers - any no-args or String-arg constructor gets this treatment.\n Introduce a new constructor which accepts a DockerImageName object. This class is preferred to a String because its meaning is unambiguous.\n Enhance DockerImageName with a static factory method and a convenience withTag method so that users can easily create and derive new instances.\n Update all modules to follow suit\n Update Javadocs throughout to make the change clear\n Update our own test methods, leaving a small vanguard of tests for the old way to guard against regression\n Update documentation and examples to show the new preferred approach\n\nThis PR will not introduce any breaking changes, but is likely to be an 'annoying' change. I'm considering whether a script could be written to quickly migrate code, especially for people with large codebases.\nNote that I'm not touching the Future<String> constructor. I would have liked to, but type erasure makes adding an adjacent Future<DockerImageName> constructor impossible. As such, I don't think we can do anything about this particular parameter without a breaking change. I'd be open to suggestions, though!", "createdAt": "2020-06-05T14:44:32Z", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839", "merged": true, "mergeCommit": {"oid": "c3f53b3a63e6b0bc800a7f0fbce91ce95a8986b3"}, "closed": true, "closedAt": "2020-07-19T12:32:41Z", "author": {"login": "rnorth"}, "timelineItems": {"totalCount": 37, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoUNbIgFqTQyNTM5MjM2MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2bg3wAH2gAyNDI4NTAwNzE3OjBlZWU1ZDg2NTNkYzE3OTU0MjlhOWQ2NzA5MzMzZTBkNGFkNDFiMDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MzkyMzYx", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#pullrequestreview-425392361", "createdAt": "2020-06-05T15:15:48Z", "commit": {"oid": "b60d19c8eefa330fe5549513cf843fc11ea7481d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNToxNTo0OFrOGfyrRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNToxNTo0OFrOGfyrRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk4OTMxOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             */\n          \n          \n            \n            public class FixedHostPortGenericContainer<SELF extends FixedHostPortGenericContainer<SELF>> extends GenericContainer<SELF> {\n          \n          \n            \n                @Deprecated\n          \n          \n            \n             */\n          \n          \n            \n            @Deprecated\n          \n          \n            \n            public class FixedHostPortGenericContainer<SELF extends FixedHostPortGenericContainer<SELF>> extends GenericContainer<SELF> {\n          \n      \n    \n    \n  \n\n\ud83d\ude02 \ud83d\ude02 \ud83d\ude02", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#discussion_r435989319", "createdAt": "2020-06-05T15:15:48Z", "author": {"login": "bsideup"}, "path": "core/src/main/java/org/testcontainers/containers/FixedHostPortGenericContainer.java", "diffHunk": "@@ -12,6 +12,7 @@\n  * not available - which could manifest as flaky or unstable tests.</p>\n  */\n public class FixedHostPortGenericContainer<SELF extends FixedHostPortGenericContainer<SELF>> extends GenericContainer<SELF> {\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b60d19c8eefa330fe5549513cf843fc11ea7481d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MzkzMzcy", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#pullrequestreview-425393372", "createdAt": "2020-06-05T15:17:03Z", "commit": {"oid": "b60d19c8eefa330fe5549513cf843fc11ea7481d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNToxNzowM1rOGfyuQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNToxNzowM1rOGfyuQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk5MDA4Mg==", "bodyText": "what about GenericContainer(Future)? Since it can be replaced with new GenericContainer(new RemoteDockerImage(future))", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#discussion_r435990082", "createdAt": "2020-06-05T15:17:03Z", "author": {"login": "bsideup"}, "path": "core/src/main/java/org/testcontainers/containers/GenericContainer.java", "diffHunk": "@@ -241,10 +242,16 @@\n     @Setter(AccessLevel.NONE)\n     private boolean shouldBeReused = false;\n \n+    @Deprecated\n     public GenericContainer() {\n         this(TestcontainersConfiguration.getInstance().getTinyImage());\n     }\n \n+    public GenericContainer(DockerImageName dockerImageName) {\n+        this.image = new RemoteDockerImage(dockerImageName);\n+    }\n+\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b60d19c8eefa330fe5549513cf843fc11ea7481d"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68ee3bcc5e0a5b417139159487687c8bdadd1b9e", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/68ee3bcc5e0a5b417139159487687c8bdadd1b9e", "committedDate": "2020-06-25T13:04:35Z", "message": "WIP"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b60d19c8eefa330fe5549513cf843fc11ea7481d", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/b60d19c8eefa330fe5549513cf843fc11ea7481d", "committedDate": "2020-06-05T14:40:41Z", "message": "WIP"}, "afterCommit": {"oid": "68ee3bcc5e0a5b417139159487687c8bdadd1b9e", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/68ee3bcc5e0a5b417139159487687c8bdadd1b9e", "committedDate": "2020-06-25T13:04:35Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46c7e1b8d6f16e68800681f1dc08694139bd4cf5", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/46c7e1b8d6f16e68800681f1dc08694139bd4cf5", "committedDate": "2020-06-25T13:18:30Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "054b637698318f587a4c41f34e81149d2ae71cca", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/054b637698318f587a4c41f34e81149d2ae71cca", "committedDate": "2020-06-25T18:32:21Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "196f1a9da93bd8ae36d36550d549c90fc5a6024e", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/196f1a9da93bd8ae36d36550d549c90fc5a6024e", "committedDate": "2020-06-29T18:16:41Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3fe8078ac4500d09dfa706d2a1c692358bbd6d1", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/f3fe8078ac4500d09dfa706d2a1c692358bbd6d1", "committedDate": "2020-07-02T14:04:43Z", "message": "Tidy up test image references"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c523b388c9fa4e3e2d6c65e9126dbb4f9c10b7b9", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/c523b388c9fa4e3e2d6c65e9126dbb4f9c10b7b9", "committedDate": "2020-07-02T14:31:17Z", "message": "Merge remote-tracking branch 'origin/master' into deprecate-ambiguous-constructors\n\n# Conflicts:\n#\tcore/src/test/java/org/testcontainers/images/RemoteDockerImageTest.java\n#\tmodules/kafka/src/main/java/org/testcontainers/containers/KafkaContainer.java\n#\tmodules/kafka/src/test/java/org/testcontainers/containers/KafkaContainerTest.java\n#\tmodules/pulsar/src/main/java/org/testcontainers/containers/PulsarContainer.java\n#\tmodules/selenium/src/test/java/org/testcontainers/junit/ChromeRecordingWebDriverContainerTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "296f9f7a90a03b173fa24a1b2a57cd973d80b995", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/296f9f7a90a03b173fa24a1b2a57cd973d80b995", "committedDate": "2020-07-02T14:31:37Z", "message": "Update docs re contrainer creation and specifying versions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa94289f1b3d69548a39c818329e7cb368d1754f", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/aa94289f1b3d69548a39c818329e7cb368d1754f", "committedDate": "2020-07-02T14:49:33Z", "message": "Update Javadocs with deprecation warnings."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxODQ0MzU1", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#pullrequestreview-441844355", "createdAt": "2020-07-02T16:19:49Z", "commit": {"oid": "aa94289f1b3d69548a39c818329e7cb368d1754f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNjoxOTo0OVrOGsUupg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNjoxOTo0OVrOGsUupg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTEzMDE1MA==", "bodyText": "I always get a strange feeling when toString() is used outside of a context of e.g. logging or being a human-readable presentation.", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#discussion_r449130150", "createdAt": "2020-07-02T16:19:49Z", "author": {"login": "kiview"}, "path": "core/src/main/java/org/testcontainers/DockerClientFactory.java", "diffHunk": "@@ -55,7 +55,7 @@\n             TESTCONTAINERS_SESSION_ID_LABEL, SESSION_ID\n     );\n \n-    private static final String TINY_IMAGE = TestcontainersConfiguration.getInstance().getTinyImage();\n+    private static final String TINY_IMAGE = TestcontainersConfiguration.getInstance().getTinyDockerImageName().toString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa94289f1b3d69548a39c818329e7cb368d1754f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/77aa41801afb757e7abc8a019afb4d10c332956f", "committedDate": "2020-07-03T08:33:41Z", "message": "Add `asCanonicalNameString()` method on `DockerImageName`"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjgyNjY4", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#pullrequestreview-442282668", "createdAt": "2020-07-03T09:32:56Z", "commit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOTozMjo1N1rOGsqTCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOTozMjo1N1rOGsqTCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ4MzUzMA==", "bodyText": "Just thinking... what if we keep the default constructors in \"utility\" classes like this one, where the users do not / should not care about the version used? it is a bit contradictory to the idea of this whole change, but I think a few exceptions can be made", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#discussion_r449483530", "createdAt": "2020-07-03T09:32:57Z", "author": {"login": "bsideup"}, "path": "core/src/main/java/org/testcontainers/containers/SocatContainer.java", "diffHunk": "@@ -15,8 +16,16 @@\n \n     private final Map<Integer, String> targets = new HashMap<>();\n \n+    /**\n+     * @deprecated use {@link SocatContainer(DockerImageName)} instead\n+     */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjg0NDEz", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#pullrequestreview-442284413", "createdAt": "2020-07-03T09:35:43Z", "commit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOTozNTo0M1rOGsqYeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOTozNTo0M1rOGsqYeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ4NDkyMg==", "bodyText": "Since the contract was always that RemoteDockerImage accepts a full image name, perhaps we can keep this and (String,String) constructors?\nOtherwise, it becomes a bit too long:\nnew GenericContainer(new RemoveDockerImage(new DockerImageName(\"missed-me:1\"))", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#discussion_r449484922", "createdAt": "2020-07-03T09:35:43Z", "author": {"login": "bsideup"}, "path": "core/src/main/java/org/testcontainers/images/RemoteDockerImage.java", "diffHunk": "@@ -38,10 +38,16 @@\n     @ToString.Exclude\n     private DockerClient dockerClient = DockerClientFactory.lazyClient();\n \n+    public RemoteDockerImage(DockerImageName dockerImageName) {\n+        this.imageNameFuture = CompletableFuture.completedFuture(dockerImageName);\n+    }\n+\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjg2MDE1", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#pullrequestreview-442286015", "createdAt": "2020-07-03T09:38:13Z", "commit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOTozODoxM1rOGsqdTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOTozODoxM1rOGsqdTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ4NjE1Nw==", "bodyText": "Love it!\nMade me thinking whether we should even have a fully featured builder as well:\nDockerImageName.builder()\n    .registry(\"repo.example.com\")\n    .image(\"services/foo\")\n    .tag(\"123\")\n    .build();", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#discussion_r449486157", "createdAt": "2020-07-03T09:38:13Z", "author": {"login": "bsideup"}, "path": "core/src/main/java/org/testcontainers/utility/DockerImageName.java", "diffHunk": "@@ -124,8 +144,13 @@ public String getRegistry() {\n         return registry;\n     }\n \n+    public DockerImageName withTag(final String newTag) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "originalPosition": 145}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjg4MTk1", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#pullrequestreview-442288195", "createdAt": "2020-07-03T09:41:36Z", "commit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOTo0MTozNlrOGsqjuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOTo0MTozNlrOGsqjuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ4NzgwMw==", "bodyText": "FTR if I remember correctly, I had to use IMAGE_FUTURE here to avoid the side effect we had in the constructor, but now it can be as simple as new GenericContainer<>(TINY_IMAGE)", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#discussion_r449487803", "createdAt": "2020-07-03T09:41:36Z", "author": {"login": "bsideup"}, "path": "core/src/test/java/org/testcontainers/containers/ReusabilityUnitTests.java", "diffHunk": "@@ -61,8 +67,8 @@\n         @Parameterized.Parameters(name = \"{0}\")\n         public static Object[][] data() {\n             return new Object[][] {\n-                { \"generic\", new GenericContainer(IMAGE_FUTURE), true },\n-                { \"anonymous generic\", new GenericContainer(IMAGE_FUTURE) {}, true },\n+                { \"generic\", new GenericContainer<>(new RemoteDockerImage(IMAGE_FUTURE)), true },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjg5MjQ2", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#pullrequestreview-442289246", "createdAt": "2020-07-03T09:43:18Z", "commit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOTo0MzoxOFrOGsqm_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOTo0MzoxOFrOGsqm_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ4ODYzNw==", "bodyText": "I liked the idea of TestImages, btw. Perhaps we can/should move such references to that class as well", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#discussion_r449488637", "createdAt": "2020-07-03T09:43:18Z", "author": {"login": "bsideup"}, "path": "core/src/test/java/org/testcontainers/images/ImagePullPolicyTest.java", "diffHunk": "@@ -23,10 +20,13 @@\n import java.util.UUID;\n import java.util.concurrent.TimeUnit;\n \n+import static org.junit.Assert.fail;\n+import static org.mockito.ArgumentMatchers.any;\n+\n public class ImagePullPolicyTest {\n \n     @ClassRule\n-    public static GenericContainer<?> registry = new GenericContainer<>(\"registry:2\")\n+    public static GenericContainer<?> registry = new GenericContainer<>(new DockerImageName(\"registry:2.7.0\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjg5Njk0", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#pullrequestreview-442289694", "createdAt": "2020-07-03T09:43:59Z", "commit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOTo0Mzo1OVrOGsqoRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOTo0Mzo1OVrOGsqoRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ4ODk2Ng==", "bodyText": "nit: imageName field can be changed to DockerImageName, to make tests' bodies a little bit smaller", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#discussion_r449488966", "createdAt": "2020-07-03T09:43:59Z", "author": {"login": "bsideup"}, "path": "core/src/test/java/org/testcontainers/images/ImagePullPolicyTest.java", "diffHunk": "@@ -74,7 +74,7 @@ public void setUp() {\n     @Test\n     public void pullsByDefault() {\n         try (\n-            GenericContainer<?> container = new GenericContainer<>(imageName)\n+            GenericContainer<?> container = new GenericContainer(new DockerImageName(imageName))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjk0MTQz", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#pullrequestreview-442294143", "createdAt": "2020-07-03T09:50:49Z", "commit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOTo1MDo1MFrOGsq2Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOTo1MDo1MFrOGsq2Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ5MjUxOA==", "bodyText": "a bit unrelated, but... don't we have a mongodb module now? :D", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#discussion_r449492518", "createdAt": "2020-07-03T09:50:50Z", "author": {"login": "bsideup"}, "path": "examples/mongodb-container/src/test/java/org/testcontainers/containers/MongoDbContainer.java", "diffHunk": "@@ -24,7 +25,9 @@\n \n     /**\n      * Creates a new {@link MongoDbContainer} with the {@value DEFAULT_IMAGE_AND_TAG} image.\n+     * @deprecated use {@link MongoDbContainer(DockerImageName)} instead\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMzcyOTcy", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#pullrequestreview-442372972", "createdAt": "2020-07-03T12:16:08Z", "commit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxMjoxNjowOFrOGsuh8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxMjoxNjowOFrOGsuh8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU1Mjg4MA==", "bodyText": "perhaps we should inline the image here, as it will be in the docs", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#discussion_r449552880", "createdAt": "2020-07-03T12:16:08Z", "author": {"login": "bsideup"}, "path": "modules/mongodb/src/test/java/org/testcontainers/containers/MongoDBContainerTest.java", "diffHunk": "@@ -11,20 +11,24 @@\n import com.mongodb.client.TransactionBody;\n import org.bson.Document;\n import org.junit.Test;\n+import org.testcontainers.utility.DockerImageName;\n \n import static org.junit.Assert.assertEquals;\n import static org.junit.Assert.assertNotNull;\n \n \n public class MongoDBContainerTest {\n+\n+    private static final DockerImageName MONGO_IMAGE = new DockerImageName(\"mongo:4.0.10\");\n+\n     /**\n      * Taken from <a href=\"https://docs.mongodb.com/manual/core/transactions/\">https://docs.mongodb.com</a>\n      */\n     @Test\n     public void shouldExecuteTransactions() {\n         try (\n             // creatingMongoDBContainer {\n-            final MongoDBContainer mongoDBContainer = new MongoDBContainer()\n+            final MongoDBContainer mongoDBContainer = new MongoDBContainer(MONGO_IMAGE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMzc1ODEy", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#pullrequestreview-442375812", "createdAt": "2020-07-03T12:21:40Z", "commit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxMjoyMTo0MFrOGsuqew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxMjoyMTo0MFrOGsuqew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU1NTA2Nw==", "bodyText": "this.customImageNameIsSet = true; and recordingMode = VncRecordingMode.SKIP; from BrowserWebDriverContainer(String) are missing", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#discussion_r449555067", "createdAt": "2020-07-03T12:21:40Z", "author": {"login": "bsideup"}, "path": "modules/selenium/src/main/java/org/testcontainers/containers/BrowserWebDriverContainer.java", "diffHunk": "@@ -87,15 +88,29 @@ public BrowserWebDriverContainer() {\n     /**\n      * Constructor taking a specific webdriver container name and tag\n      * @param dockerImageName Name of the docker image to pull\n+     * @deprecated use {@link BrowserWebDriverContainer(DockerImageName)} instead\n      */\n+    @Deprecated\n     public BrowserWebDriverContainer(String dockerImageName) {\n-        this();\n-        super.setDockerImageName(dockerImageName);\n+        this(new DockerImageName(dockerImageName));\n         this.customImageNameIsSet = true;\n         // We have to force SKIP mode for the recording by default because we don't know if the image has VNC or not\n         recordingMode = VncRecordingMode.SKIP;\n     }\n \n+    public BrowserWebDriverContainer(DockerImageName dockerImageName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "592f08aad393adb3616e4ce94c155ad0389b4b68", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/592f08aad393adb3616e4ce94c155ad0389b4b68", "committedDate": "2020-07-03T21:21:54Z", "message": "Use static factory method instead of constructor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1edc3077bf76e15df2724adea6ff8d64e7521e9e", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/1edc3077bf76e15df2724adea6ff8d64e7521e9e", "committedDate": "2020-07-04T08:01:01Z", "message": "Use constant for docker registry image name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "113f3b37ad068e636fe2a55017aa2b1e311ea878", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/113f3b37ad068e636fe2a55017aa2b1e311ea878", "committedDate": "2020-07-04T08:03:02Z", "message": "Simplify image usage in ReusabilityUnitTests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc7f62570b4ef32fe36238f30c21f02e1614917e", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/fc7f62570b4ef32fe36238f30c21f02e1614917e", "committedDate": "2020-07-04T08:08:24Z", "message": "Use `DockerImageName` instead of `String` for image name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd7e13b9bc1f8a1ec9d03a06ad1c1e3c21074c78", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/cd7e13b9bc1f8a1ec9d03a06ad1c1e3c21074c78", "committedDate": "2020-07-04T08:09:03Z", "message": "Inline Mongo image name parsing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a35b3c4f34d83981282ea6dc2de5f53ee4824442", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/a35b3c4f34d83981282ea6dc2de5f53ee4824442", "committedDate": "2020-07-04T08:11:17Z", "message": "Fix constructor delegation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "868f962393063893870d9055bc9dadc37f48b5b3", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/868f962393063893870d9055bc9dadc37f48b5b3", "committedDate": "2020-07-04T08:15:09Z", "message": "Undo deprecation of SocatContainer no-args constructor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "faf1217e3476256c3b3c4fbd3968633263be1b9f", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/faf1217e3476256c3b3c4fbd3968633263be1b9f", "committedDate": "2020-07-04T10:36:51Z", "message": "Update references to DockerImageName.parse in example code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee450035b3a4bc2aff4ec30cec6dbdf2c07c53d9", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/ee450035b3a4bc2aff4ec30cec6dbdf2c07c53d9", "committedDate": "2020-07-04T10:37:27Z", "message": "Merge remote-tracking branch 'origin/master' into deprecate-ambiguous-constructors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8960ceb8800b95de3834a77d600547eb61b310b3", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/8960ceb8800b95de3834a77d600547eb61b310b3", "committedDate": "2020-07-06T07:36:47Z", "message": "Merge remote-tracking branch 'origin/master' into deprecate-ambiguous-constructors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4e314dbb50bdf9eab09d049166a17f0e2ce1fb0", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/f4e314dbb50bdf9eab09d049166a17f0e2ce1fb0", "committedDate": "2020-07-16T10:53:03Z", "message": "Merge remote-tracking branch 'origin/master' into deprecate-ambiguous-constructors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDc5NzM3", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#pullrequestreview-451079737", "createdAt": "2020-07-18T20:12:11Z", "commit": {"oid": "f4e314dbb50bdf9eab09d049166a17f0e2ce1fb0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQyMDoxMjoxMVrOGzqTtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQyMDoxMjoxMVrOGzqTtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgyMzczNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    DockerClientFactory.instance().client()\n          \n          \n            \n                        .removeImageCmd(imageName.asCanonicalNameString())\n          \n          \n            \n                        .withForce(true)\n          \n          \n            \n                        .exec();\n          \n          \n            \n                    removeImage();", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#discussion_r456823734", "createdAt": "2020-07-18T20:12:11Z", "author": {"login": "bsideup"}, "path": "core/src/test/java/org/testcontainers/images/ImagePullPolicyTest.java", "diffHunk": "@@ -90,7 +85,10 @@ public void shouldAlwaysPull() {\n             container.start();\n         }\n \n-        DockerClientFactory.instance().client().removeImageCmd(imageName).withForce(true).exec();\n+        DockerClientFactory.instance().client()\n+            .removeImageCmd(imageName.asCanonicalNameString())\n+            .withForce(true)\n+            .exec();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4e314dbb50bdf9eab09d049166a17f0e2ce1fb0"}, "originalPosition": 85}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc4190d5af24b5c4580ae2bf75b741663d34f91b", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/cc4190d5af24b5c4580ae2bf75b741663d34f91b", "committedDate": "2020-07-19T10:41:40Z", "message": "Update core/src/test/java/org/testcontainers/images/ImagePullPolicyTest.java\n\nCo-authored-by: Sergei Egorov <bsideup@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTIwODg3", "url": "https://github.com/testcontainers/testcontainers-java/pull/2839#pullrequestreview-451120887", "createdAt": "2020-07-19T10:59:45Z", "commit": {"oid": "f4e314dbb50bdf9eab09d049166a17f0e2ce1fb0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0eee5d8653dc1795429a9d6709333e0d4ad41b09", "author": {"user": {"login": "bsideup", "name": "Sergei Egorov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/0eee5d8653dc1795429a9d6709333e0d4ad41b09", "committedDate": "2020-07-19T11:41:20Z", "message": "Merge branch 'master' into deprecate-ambiguous-constructors"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3362, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}