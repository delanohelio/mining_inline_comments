{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1NjA1MTgy", "number": 2825, "title": "Update to latest LocalStack container and support unified port mode", "bodyText": "Latest LocalStack default container.\nSingle port exposed and used for AWS endpoints.", "createdAt": "2020-05-31T12:32:37Z", "url": "https://github.com/testcontainers/testcontainers-java/pull/2825", "merged": true, "mergeCommit": {"oid": "39c4208ed4edfede2e8721b7aef4d1cb79a9073c"}, "closed": true, "closedAt": "2020-07-19T18:35:48Z", "author": {"login": "artamonovkirill"}, "timelineItems": {"totalCount": 31, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoYI0-gFqTQyNTU4NDg3Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2hb7hAFqTQ1MTE1MzU3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NTg0ODcz", "url": "https://github.com/testcontainers/testcontainers-java/pull/2825#pullrequestreview-425584873", "createdAt": "2020-06-05T19:50:24Z", "commit": {"oid": "92dd5abcfa391a3911f9385f9a65e9055bdb6774"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxOTo1MDoyNFrOGf7U0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxOTo1MDoyNFrOGf7U0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjEzMTAyNQ==", "bodyText": "FYI we have a utility class (ComparableVersion) for parsing and comparing version strings. It's probably going to be more reliable than a regex - please could we use that?\nAlso, there's a slight risk that people may want to use their own custom Localstack image, which could have a completely different form of tag. While I think it's unlikely that this would cause a problem, please could we at least have some logging at time of container startup to give some clues about what's going to happen?", "url": "https://github.com/testcontainers/testcontainers-java/pull/2825#discussion_r436131025", "createdAt": "2020-06-05T19:50:24Z", "author": {"login": "rnorth"}, "path": "modules/localstack/src/main/java/org/testcontainers/containers/localstack/LocalStackContainer.java", "diffHunk": "@@ -141,12 +150,16 @@ public URI getEndpointOverride(Service service) {\n             return new URI(\"http://\" +\n                 ipAddress +\n                 \":\" +\n-                getMappedPort(service.getPort()));\n+                getMappedPort(getServicePort(service)));\n         } catch (UnknownHostException | URISyntaxException e) {\n             throw new IllegalStateException(\"Cannot obtain endpoint URL\", e);\n         }\n     }\n \n+    private int getServicePort(Service service) {\n+        return version.matches(BEFORE_0_11) ? service.port : PORT;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92dd5abcfa391a3911f9385f9a65e9055bdb6774"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NTg1Mzgy", "url": "https://github.com/testcontainers/testcontainers-java/pull/2825#pullrequestreview-425585382", "createdAt": "2020-06-05T19:51:17Z", "commit": {"oid": "92dd5abcfa391a3911f9385f9a65e9055bdb6774"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxOTo1MToxN1rOGf7Xdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxOTo1MToxN1rOGf7Xdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjEzMTcwMg==", "bodyText": "\ud83d\ude47\u200d\u2642\ufe0f thanks for adding this test class as well.", "url": "https://github.com/testcontainers/testcontainers-java/pull/2825#discussion_r436131702", "createdAt": "2020-06-05T19:51:17Z", "author": {"login": "rnorth"}, "path": "modules/localstack/src/test/java/org/testcontainers/containers/localstack/LocalstackLegacyContainerTest.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package org.testcontainers.containers.localstack;\n+\n+import org.junit.ClassRule;\n+import org.junit.Test;\n+\n+import static org.rnorth.visibleassertions.VisibleAssertions.assertNotEquals;\n+import static org.rnorth.visibleassertions.VisibleAssertions.assertTrue;\n+import static org.testcontainers.containers.localstack.LocalStackContainer.Service.S3;\n+import static org.testcontainers.containers.localstack.LocalStackContainer.Service.SQS;\n+\n+public class LocalstackLegacyContainerTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92dd5abcfa391a3911f9385f9a65e9055bdb6774"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "858ec54247a5538dbf8cc09b3b81014303db35f9", "author": {"user": {"login": "artamonovkirill", "name": "Kirill Artamonov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/858ec54247a5538dbf8cc09b3b81014303db35f9", "committedDate": "2020-06-06T22:09:16Z", "message": ":arrow_up: latest default LocalStack container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b310e3e6e02fdc4e50e4401dd44f75f82a396811", "author": {"user": {"login": "artamonovkirill", "name": "Kirill Artamonov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/b310e3e6e02fdc4e50e4401dd44f75f82a396811", "committedDate": "2020-06-06T22:10:10Z", "message": ":recycle: rely on ComparableVersion for version comparison. added LocalStackContainer(String version, boolean legacyMode) constructor. Extended test cases."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df1d96e79b84a3bfc029fd92eb6f636099b7c362", "author": {"user": {"login": "artamonovkirill", "name": "Kirill Artamonov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/df1d96e79b84a3bfc029fd92eb6f636099b7c362", "committedDate": "2020-06-07T12:31:30Z", "message": ":white_check_mark: wait for pull and tag commands to finish"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68ee3bcc5e0a5b417139159487687c8bdadd1b9e", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/68ee3bcc5e0a5b417139159487687c8bdadd1b9e", "committedDate": "2020-06-25T13:04:35Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46c7e1b8d6f16e68800681f1dc08694139bd4cf5", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/46c7e1b8d6f16e68800681f1dc08694139bd4cf5", "committedDate": "2020-06-25T13:18:30Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "054b637698318f587a4c41f34e81149d2ae71cca", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/054b637698318f587a4c41f34e81149d2ae71cca", "committedDate": "2020-06-25T18:32:21Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "196f1a9da93bd8ae36d36550d549c90fc5a6024e", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/196f1a9da93bd8ae36d36550d549c90fc5a6024e", "committedDate": "2020-06-29T18:16:41Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3fe8078ac4500d09dfa706d2a1c692358bbd6d1", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/f3fe8078ac4500d09dfa706d2a1c692358bbd6d1", "committedDate": "2020-07-02T14:04:43Z", "message": "Tidy up test image references"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c523b388c9fa4e3e2d6c65e9126dbb4f9c10b7b9", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/c523b388c9fa4e3e2d6c65e9126dbb4f9c10b7b9", "committedDate": "2020-07-02T14:31:17Z", "message": "Merge remote-tracking branch 'origin/master' into deprecate-ambiguous-constructors\n\n# Conflicts:\n#\tcore/src/test/java/org/testcontainers/images/RemoteDockerImageTest.java\n#\tmodules/kafka/src/main/java/org/testcontainers/containers/KafkaContainer.java\n#\tmodules/kafka/src/test/java/org/testcontainers/containers/KafkaContainerTest.java\n#\tmodules/pulsar/src/main/java/org/testcontainers/containers/PulsarContainer.java\n#\tmodules/selenium/src/test/java/org/testcontainers/junit/ChromeRecordingWebDriverContainerTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "296f9f7a90a03b173fa24a1b2a57cd973d80b995", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/296f9f7a90a03b173fa24a1b2a57cd973d80b995", "committedDate": "2020-07-02T14:31:37Z", "message": "Update docs re contrainer creation and specifying versions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa94289f1b3d69548a39c818329e7cb368d1754f", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/aa94289f1b3d69548a39c818329e7cb368d1754f", "committedDate": "2020-07-02T14:49:33Z", "message": "Update Javadocs with deprecation warnings."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77aa41801afb757e7abc8a019afb4d10c332956f", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/77aa41801afb757e7abc8a019afb4d10c332956f", "committedDate": "2020-07-03T08:33:41Z", "message": "Add `asCanonicalNameString()` method on `DockerImageName`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "592f08aad393adb3616e4ce94c155ad0389b4b68", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/592f08aad393adb3616e4ce94c155ad0389b4b68", "committedDate": "2020-07-03T21:21:54Z", "message": "Use static factory method instead of constructor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1edc3077bf76e15df2724adea6ff8d64e7521e9e", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/1edc3077bf76e15df2724adea6ff8d64e7521e9e", "committedDate": "2020-07-04T08:01:01Z", "message": "Use constant for docker registry image name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "113f3b37ad068e636fe2a55017aa2b1e311ea878", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/113f3b37ad068e636fe2a55017aa2b1e311ea878", "committedDate": "2020-07-04T08:03:02Z", "message": "Simplify image usage in ReusabilityUnitTests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc7f62570b4ef32fe36238f30c21f02e1614917e", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/fc7f62570b4ef32fe36238f30c21f02e1614917e", "committedDate": "2020-07-04T08:08:24Z", "message": "Use `DockerImageName` instead of `String` for image name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd7e13b9bc1f8a1ec9d03a06ad1c1e3c21074c78", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/cd7e13b9bc1f8a1ec9d03a06ad1c1e3c21074c78", "committedDate": "2020-07-04T08:09:03Z", "message": "Inline Mongo image name parsing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a35b3c4f34d83981282ea6dc2de5f53ee4824442", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/a35b3c4f34d83981282ea6dc2de5f53ee4824442", "committedDate": "2020-07-04T08:11:17Z", "message": "Fix constructor delegation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "868f962393063893870d9055bc9dadc37f48b5b3", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/868f962393063893870d9055bc9dadc37f48b5b3", "committedDate": "2020-07-04T08:15:09Z", "message": "Undo deprecation of SocatContainer no-args constructor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "faf1217e3476256c3b3c4fbd3968633263be1b9f", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/faf1217e3476256c3b3c4fbd3968633263be1b9f", "committedDate": "2020-07-04T10:36:51Z", "message": "Update references to DockerImageName.parse in example code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee450035b3a4bc2aff4ec30cec6dbdf2c07c53d9", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/ee450035b3a4bc2aff4ec30cec6dbdf2c07c53d9", "committedDate": "2020-07-04T10:37:27Z", "message": "Merge remote-tracking branch 'origin/master' into deprecate-ambiguous-constructors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8960ceb8800b95de3834a77d600547eb61b310b3", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/8960ceb8800b95de3834a77d600547eb61b310b3", "committedDate": "2020-07-06T07:36:47Z", "message": "Merge remote-tracking branch 'origin/master' into deprecate-ambiguous-constructors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4e314dbb50bdf9eab09d049166a17f0e2ce1fb0", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/f4e314dbb50bdf9eab09d049166a17f0e2ce1fb0", "committedDate": "2020-07-16T10:53:03Z", "message": "Merge remote-tracking branch 'origin/master' into deprecate-ambiguous-constructors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0371ec3a48cfe06d053834795d65d8c80e5a8e1", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/f0371ec3a48cfe06d053834795d65d8c80e5a8e1", "committedDate": "2020-07-17T14:29:12Z", "message": "Merge branch 'deprecate-ambiguous-constructors' into chore/latest-localstack"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3cf1a17d736cf1e709e748486ee0a53d7001c47a", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/3cf1a17d736cf1e709e748486ee0a53d7001c47a", "committedDate": "2020-07-17T15:22:33Z", "message": "Integrate changes\nTweak some stylistic aspects of the code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b38d73c346bf06a0838d0ecb54d673abadc455b4", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/b38d73c346bf06a0838d0ecb54d673abadc455b4", "committedDate": "2020-07-19T16:08:35Z", "message": "Merge master into chore/latest-localstack"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3b4d43e084934f224c53b38cbae8c1fc50ef689", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/d3b4d43e084934f224c53b38cbae8c1fc50ef689", "committedDate": "2020-07-19T16:20:48Z", "message": "Clarify meaning of `legacyMode` in a Javadoc comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71838fb6ab5d01eff63b6b5a5df3d2dec71a355d", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/71838fb6ab5d01eff63b6b5a5df3d2dec71a355d", "committedDate": "2020-07-19T16:57:46Z", "message": "Inline image name references used in docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTUzNTcz", "url": "https://github.com/testcontainers/testcontainers-java/pull/2825#pullrequestreview-451153573", "createdAt": "2020-07-19T18:35:22Z", "commit": {"oid": "71838fb6ab5d01eff63b6b5a5df3d2dec71a355d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3358, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}