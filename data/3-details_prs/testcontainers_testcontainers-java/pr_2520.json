{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5MDU2Nzg0", "number": 2520, "title": "Generate GitHub Actions CI Jobs automatically", "bodyText": "Generate GitHub Actions CI jobs for modules\nRefs #2177, #1836\nPR 1 of 2: this PR includes a script for generating the CI job configuration, but the script has to be manually run\nA future PR should run the generation script automatically as a separate Action and commit changes, so that no manual updates are needed", "createdAt": "2020-04-05T12:12:42Z", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520", "merged": true, "mergeCommit": {"oid": "1ef6fac59c11c2898466c53f6ed63d5095b67f5a"}, "closed": true, "closedAt": "2020-04-18T09:31:16Z", "author": {"login": "rnorth"}, "timelineItems": {"totalCount": 62, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcUpDHsgBqjMyMDIzODc2NjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYyD74gH2gAyMzk5MDU2Nzg0OmVmMDJiZGQxOGY4ZjBjNjExMjgyOGI0MDcxNWIxNThhNGEyYjk5YmI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d04e5144e69822b0a938350fa09302355e95aa92", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/d04e5144e69822b0a938350fa09302355e95aa92", "committedDate": "2020-04-05T12:11:46Z", "message": "Generate GitHub Actions CI jobs for modules\nRefs #2177, #1836\n\nPR 1 of 2: this PR includes a script for generating the CI job configuration, but the script has to be manually run\nA future PR should run the generation script automatically as a separate Action and commit changes, so that no manual updates are needed"}, "afterCommit": {"oid": "e645c2ccec46a758913bd592a54802536bcee042", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/e645c2ccec46a758913bd592a54802536bcee042", "committedDate": "2020-04-05T12:13:48Z", "message": "Generate GitHub Actions CI jobs for modules\nRefs #2177, #1836\n\nPR 1 of 2: this PR includes a script for generating the CI job configuration, but the script has to be manually run\nA future PR should run the generation script automatically as a separate Action and commit changes, so that no manual updates are needed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3ODEyNjI0", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#pullrequestreview-387812624", "createdAt": "2020-04-05T12:17:22Z", "commit": {"oid": "e645c2ccec46a758913bd592a54802536bcee042"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMjoxNzoyMlrOGA_g9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMjoxNzoyMlrOGA_g9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5MzgxNA==", "bodyText": "I wonder if shared compile (1 busy worker) actually helps. Have you done some measurements yet?", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#discussion_r403693814", "createdAt": "2020-04-05T12:17:22Z", "author": {"login": "bsideup"}, "path": ".github/workflows/scripts/generate_github_ci.sh", "diffHunk": "@@ -0,0 +1,63 @@\n+#!/bin/bash\n+set -o errexit\n+set -o nounset\n+set -o pipefail\n+set -o xtrace\n+\n+CI_WORKFLOW_FILE=.github/workflows/ci.yml\n+\n+generate_job () {\n+    NAME=$1\n+    GRADLE_ARGS=$2\n+    NEEDS=${3:-[]}\n+\n+    cat <<END >> $CI_WORKFLOW_FILE\n+    ${NAME}:\n+        runs-on: ubuntu-18.04\n+        needs: ${NEEDS}\n+        steps:\n+          - uses: actions/checkout@v2\n+          - uses: actions/setup-java@v1\n+            with:\n+              java-version: '1.8'\n+          - name: Cache Gradle Home files\n+            uses: actions/cache@v1\n+            with:\n+              path: ~/.gradle\n+              key: \\${{ runner.os }}-gradle-home-\\${{ hashFiles('**/*.gradle') }}\n+              restore-keys: \\${{ runner.os }}-gradle-home\n+          - name: Cache Gradle Local files\n+            uses: actions/cache@v1\n+            with:\n+              path: .gradle\n+              key: \\${{ runner.os }}-gradle-local-\\${{ hashFiles('**/*.gradle') }}\n+              restore-keys: \\${{ runner.os }}-gradle-local\n+          - name: Build with Gradle\n+            run: |\n+                ./gradlew --no-daemon --continue --scan ${GRADLE_ARGS}\n+END\n+}\n+\n+generate_preface () {\n+    cat <<END > $CI_WORKFLOW_FILE\n+\n+# This file is generated by .github/workflows/scripts/generate_github_ci.sh\n+# DO NOT HAND EDIT\n+name: CI\n+\n+on:\n+  pull_request: {}\n+  push: { branches: [ master ] }\n+\n+jobs:\n+END\n+}\n+\n+generate_preface\n+generate_job compile \"build -x test\"\n+generate_job core \"testcontainers:check\" compile", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e645c2ccec46a758913bd592a54802536bcee042"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b20b1c7336fc03dc5bd24f5c8ce535d0c43e5e2", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/0b20b1c7336fc03dc5bd24f5c8ce535d0c43e5e2", "committedDate": "2020-04-12T08:57:36Z", "message": "Generate GitHub Actions CI jobs for modules\nRefs #2177, #1836\n\nPR 1 of 2: this PR includes a script for generating the CI job configuration, but the script has to be manually run\nA future PR should run the generation script automatically as a separate Action and commit changes, so that no manual updates are needed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4126680468f1b8df809f60ff4d3b584cec44daff", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/4126680468f1b8df809f60ff4d3b584cec44daff", "committedDate": "2020-04-12T08:57:40Z", "message": "Remove not-yet-merged module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0452229fbcb818c06392e5d498acb57a8f414871", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/0452229fbcb818c06392e5d498acb57a8f414871", "committedDate": "2020-04-12T08:57:42Z", "message": "Remove not-yet-merged module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f202371620e71d38fac86d4aff4714597c9382a3", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/f202371620e71d38fac86d4aff4714597c9382a3", "committedDate": "2020-04-12T08:57:44Z", "message": "Enable info logging and in-job parallelisation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "568c424b85dbe1301e12a0dd205fc38753054e78", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/568c424b85dbe1301e12a0dd205fc38753054e78", "committedDate": "2020-04-12T08:57:45Z", "message": "Enable info logging and in-job parallelisation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5306825b4b7794221733c132f7901f4403fcdacd", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/5306825b4b7794221733c132f7901f4403fcdacd", "committedDate": "2020-04-12T08:57:47Z", "message": "Disable in-job parallelisation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f901a637e73da2faaf6ecf5befef7df68c4a3b34", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/f901a637e73da2faaf6ecf5befef7df68c4a3b34", "committedDate": "2020-04-12T08:57:48Z", "message": "Rename DinD CI workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33a656c27fc777ebb2c0c249697ba4d7c4b91309", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/33a656c27fc777ebb2c0c249697ba4d7c4b91309", "committedDate": "2020-04-12T08:57:50Z", "message": "Rename jobs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcaedfe9ba9fe402c5c3696f0dbdc897e1199460", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/bcaedfe9ba9fe402c5c3696f0dbdc897e1199460", "committedDate": "2020-04-12T08:57:52Z", "message": "Rename dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba63f85f821578c5ee8211ac35c8f8211e5f7182", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/ba63f85f821578c5ee8211ac35c8f8211e5f7182", "committedDate": "2020-04-12T08:57:54Z", "message": "Don't use caching for local .gradle directory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1403a0698742da0cd5ebe36bf44de6a149281d6", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/e1403a0698742da0cd5ebe36bf44de6a149281d6", "committedDate": "2020-04-12T08:57:56Z", "message": "Don't split out initial build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23cb33e6b4c24204390a46c7fcf05fedc13161b5", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/23cb33e6b4c24204390a46c7fcf05fedc13161b5", "committedDate": "2020-04-12T08:57:58Z", "message": "Use module-specific cache where available"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4ba3005f79fe77760ae22b13b791f5e1fabfe4d", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/d4ba3005f79fe77760ae22b13b791f5e1fabfe4d", "committedDate": "2020-04-12T08:57:59Z", "message": "Use module-specific cache where available"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd8b0993d56d2c30da2209f20e4988bbccb945aa", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/bd8b0993d56d2c30da2209f20e4988bbccb945aa", "committedDate": "2020-04-12T08:58:01Z", "message": "Only cache ~/.gradle/caches"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b448952220681c070517bb442b3356dac8306fe3", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/b448952220681c070517bb442b3356dac8306fe3", "committedDate": "2020-04-12T08:58:03Z", "message": "Disable Gradle build cache temporarily"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b579c10baf4462321484bebc0b1bf518ea75ff8", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/0b579c10baf4462321484bebc0b1bf518ea75ff8", "committedDate": "2020-04-12T08:58:05Z", "message": "Clear docker image cache before running build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2248ff0a68b31d5bc2a8c559eb40cee8e542790c", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/2248ff0a68b31d5bc2a8c559eb40cee8e542790c", "committedDate": "2020-04-12T08:58:06Z", "message": "Add examples/docs:examples builds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ecea4ad33f0b9a73b237459cc186d7e2ac4e759", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/3ecea4ad33f0b9a73b237459cc186d7e2ac4e759", "committedDate": "2020-04-12T08:58:08Z", "message": "Re-enable gradle cache"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33a9cebf1182fdf6b7836b2bb506575a47c9d6d3", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/33a9cebf1182fdf6b7836b2bb506575a47c9d6d3", "committedDate": "2020-04-12T08:58:09Z", "message": "Always set TZ env var"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12bb3bd2755d9908debb0b379a57e739a505e342", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/12bb3bd2755d9908debb0b379a57e739a505e342", "committedDate": "2020-04-12T09:01:58Z", "message": "Rebase onto master, with cimate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e3ca0bcce1de6da63481481242b9ef8a4bf0ced3", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/e3ca0bcce1de6da63481481242b9ef8a4bf0ced3", "committedDate": "2020-04-05T18:44:22Z", "message": "Merge branch 'master' into generate-github-ci-1"}, "afterCommit": {"oid": "12bb3bd2755d9908debb0b379a57e739a505e342", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/12bb3bd2755d9908debb0b379a57e739a505e342", "committedDate": "2020-04-12T09:01:58Z", "message": "Rebase onto master, with cimate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dadc3c3735942072468e98b1310bff198adefd44", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/dadc3c3735942072468e98b1310bff198adefd44", "committedDate": "2020-04-12T11:17:00Z", "message": "Update job stage naming"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1a0a201b23d91bafaecc03dcce7f8079dbfc5c2", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/d1a0a201b23d91bafaecc03dcce7f8079dbfc5c2", "committedDate": "2020-04-12T11:17:22Z", "message": "Add generation for Azure pipelines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f58a6231cfd0efae4563273ec6bc24bfcf0e551e", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/f58a6231cfd0efae4563273ec6bc24bfcf0e551e", "committedDate": "2020-04-12T11:20:46Z", "message": "Add generation for Azure pipelines - merge from master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc9ce20bf19826f55f2ebfd276abfab4b3fb1b51", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/dc9ce20bf19826f55f2ebfd276abfab4b3fb1b51", "committedDate": "2020-04-12T11:22:48Z", "message": "Remove `displayName` from script steps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c1a9a0e3c98d396d9c9a36434839151ed9d2022", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/6c1a9a0e3c98d396d9c9a36434839151ed9d2022", "committedDate": "2020-04-12T11:29:44Z", "message": "Merge: fix the OS variable in AZP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81a154716bc74bbf6a1cad584246b0d0b172d875", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/81a154716bc74bbf6a1cad584246b0d0b172d875", "committedDate": "2020-04-12T11:32:12Z", "message": "Fix job names"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxODQ5Mjgz", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#pullrequestreview-391849283", "createdAt": "2020-04-12T11:52:14Z", "commit": {"oid": "81a154716bc74bbf6a1cad584246b0d0b172d875"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQxMTo1MjoxNFrOGEUvkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQxMTo1MjoxNFrOGEUvkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzE4NzM0Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            name: CI\n          \n          \n            \n            name: in-container", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#discussion_r407187346", "createdAt": "2020-04-12T11:52:14Z", "author": {"login": "bsideup"}, "path": ".github/workflows/ci-dind.yml", "diffHunk": "@@ -0,0 +1,28 @@\n+name: CI", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81a154716bc74bbf6a1cad584246b0d0b172d875"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52638d055542b526c58ff80a48e184bf661050cd", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/52638d055542b526c58ff80a48e184bf661050cd", "committedDate": "2020-04-12T13:19:24Z", "message": "Update .github/workflows/ci-dind.yml\n\nCo-Authored-By: Sergei Egorov <bsideup@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "335ecdfbafe453de2351a9bf67b0cdb852c84681", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/335ecdfbafe453de2351a9bf67b0cdb852c84681", "committedDate": "2020-04-13T19:58:39Z", "message": "Merge branch 'master' into generate-github-ci-1"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MDgxNTUy", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#pullrequestreview-394081552", "createdAt": "2020-04-15T19:44:08Z", "commit": {"oid": "335ecdfbafe453de2351a9bf67b0cdb852c84681"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MDgyMTkz", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#pullrequestreview-394082193", "createdAt": "2020-04-15T19:45:07Z", "commit": {"oid": "335ecdfbafe453de2351a9bf67b0cdb852c84681"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c28b1ebdcb46d331cce248e9a48ccafeba448601", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/c28b1ebdcb46d331cce248e9a48ccafeba448601", "committedDate": "2020-04-16T18:31:37Z", "message": "Test manually crafted matrix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "867ecfae4133a23f63daad770c1c816fc935aaac", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/867ecfae4133a23f63daad770c1c816fc935aaac", "committedDate": "2020-04-16T18:55:58Z", "message": "Generate gradle module list as a dynamic matrix property"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "164b083e7d8c045c1ae1e80feac95bbb0972c702", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/164b083e7d8c045c1ae1e80feac95bbb0972c702", "committedDate": "2020-04-16T18:57:21Z", "message": "Check out before find"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d3c82a1ed988447055d64d878373363565e2518", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/9d3c82a1ed988447055d64d878373363565e2518", "committedDate": "2020-04-16T19:09:10Z", "message": "Make module an object (experiment)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bb8a20fab5d323d567744bc99e646dab8514b4e", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/5bb8a20fab5d323d567744bc99e646dab8514b4e", "committedDate": "2020-04-16T19:11:20Z", "message": "Remove spaces, double-quote"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fb9eedbee07f02e66cb2e0211220b52eeae6660", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/0fb9eedbee07f02e66cb2e0211220b52eeae6660", "committedDate": "2020-04-16T19:16:55Z", "message": "Go to full matrix-as-object approach"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "357f093d9da16a6d84652ed997fa33de50b68533", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/357f093d9da16a6d84652ed997fa33de50b68533", "committedDate": "2020-04-16T19:20:59Z", "message": "Fix command and rename to gradle_args"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0OTcyNTQ3", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#pullrequestreview-394972547", "createdAt": "2020-04-16T20:24:47Z", "commit": {"oid": "357f093d9da16a6d84652ed997fa33de50b68533"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMDoyNDo0N1rOGG12Lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMDoyNDo0N1rOGG12Lw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgyNjg2Mw==", "bodyText": "if you add the following task to Gradle:\ntask taskMatrix {\n    doLast {\n        println(\n            groovy.json.JsonOutput.toJson(subprojects.collect { it.tasks.getByName('check').path })\n        )\n    }\n}\nyou can delegate the matrix creation to it:\necho \"::set-output name=matrix::{\\\"gradle_args\\\":$(./gradlew --no-daemon -q taskMatrix)}\"", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#discussion_r409826863", "createdAt": "2020-04-16T20:24:47Z", "author": {"login": "bsideup"}, "path": ".github/workflows/ci.yml", "diffHunk": "@@ -5,20 +5,39 @@ on:\n   push: { branches: [ master ] }\n \n jobs:\n-  in-docker_test:\n+  find_gradle_jobs:\n     runs-on: ubuntu-18.04\n+    outputs:\n+      matrix: ${{ steps.set-matrix.outputs.matrix }}\n     steps:\n       - uses: actions/checkout@v2\n-      - name: Build with Gradle\n+      - id: set-matrix\n+        run: echo \"::set-output name=matrix::{\\\"gradle_args\\\":$(.github/workflows/scripts/find_gradle_jobs.sh)}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "357f093d9da16a6d84652ed997fa33de50b68533"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7091c18344621a59d7c2dc0117471a4b3d69032d", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/7091c18344621a59d7c2dc0117471a4b3d69032d", "committedDate": "2020-04-17T08:36:38Z", "message": "Use gradle to generate GitHub Actions task matrix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e1fc4ab9703f820a56966bc5c0398edbccee5f0", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/6e1fc4ab9703f820a56966bc5c0398edbccee5f0", "committedDate": "2020-04-17T08:38:06Z", "message": "Revert AZP pipeline changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MjY4NDAz", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#pullrequestreview-395268403", "createdAt": "2020-04-17T08:41:03Z", "commit": {"oid": "6e1fc4ab9703f820a56966bc5c0398edbccee5f0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9e73208275b0099867178f7a028764482ac7c3c", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/d9e73208275b0099867178f7a028764482ac7c3c", "committedDate": "2020-04-17T08:43:37Z", "message": "Remove spaces"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32ac43af3c6117aaebe9436b099f3a49b84c7318", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/32ac43af3c6117aaebe9436b099f3a49b84c7318", "committedDate": "2020-04-17T08:45:56Z", "message": "Add debug output"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebcccc7a184146b27bc7f9ce9b639df2237481df", "author": {"user": {"login": "rnorth", "name": "Richard North"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/ebcccc7a184146b27bc7f9ce9b639df2237481df", "committedDate": "2020-04-17T08:48:54Z", "message": "Fix hiding of check task for BOM"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ae25cd37ca3b4e879bdeb56aa322421490fa3dc", "author": {"user": {"login": "bsideup", "name": "Sergei Egorov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/6ae25cd37ca3b4e879bdeb56aa322421490fa3dc", "committedDate": "2020-04-17T13:57:52Z", "message": "Merge branch 'master' into generate-github-ci-1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89ad5f66cdf62c987145a66c6e1adf9fa4116005", "author": {"user": {"login": "bsideup", "name": "Sergei Egorov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/89ad5f66cdf62c987145a66c6e1adf9fa4116005", "committedDate": "2020-04-17T15:35:14Z", "message": "Add examples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e95987dd00b148c0cdb005d86afb078d3061f81c", "author": {"user": {"login": "bsideup", "name": "Sergei Egorov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/e95987dd00b148c0cdb005d86afb078d3061f81c", "committedDate": "2020-04-17T15:48:27Z", "message": "Cache-aware dynamic jobs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ce6728db7e30885df31422ec8198ff1a77c0e7c", "author": {"user": {"login": "bsideup", "name": "Sergei Egorov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/5ce6728db7e30885df31422ec8198ff1a77c0e7c", "committedDate": "2020-04-17T15:54:41Z", "message": "disable japicmp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f027475902a67b0a2a7fce744415b04771d3b156", "author": {"user": {"login": "bsideup", "name": "Sergei Egorov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/f027475902a67b0a2a7fce744415b04771d3b156", "committedDate": "2020-04-17T16:15:09Z", "message": "disable javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b7f6ab7662dfe97ec1c78aa97550119db3a5142", "author": {"user": {"login": "bsideup", "name": "Sergei Egorov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/4b7f6ab7662dfe97ec1c78aa97550119db3a5142", "committedDate": "2020-04-17T16:22:32Z", "message": "test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a4a63e610856126eaa79a9c4b30c425695b1c7e", "author": {"user": {"login": "bsideup", "name": "Sergei Egorov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/2a4a63e610856126eaa79a9c4b30c425695b1c7e", "committedDate": "2020-04-17T16:29:01Z", "message": "fix `shadowJar` caching"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d1b47fd2ddc0c302d508dd93990b0675724498a", "author": {"user": {"login": "bsideup", "name": "Sergei Egorov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/1d1b47fd2ddc0c302d508dd93990b0675724498a", "committedDate": "2020-04-17T16:34:21Z", "message": "Delete test option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb53bba84291e6d34db926ebcdf1e5383b4229cf", "author": {"user": {"login": "bsideup", "name": "Sergei Egorov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/cb53bba84291e6d34db926ebcdf1e5383b4229cf", "committedDate": "2020-04-17T16:53:47Z", "message": "disable javadoc only when generating the matrix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1ODk1OTY5", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#pullrequestreview-395895969", "createdAt": "2020-04-18T08:54:33Z", "commit": {"oid": "cb53bba84291e6d34db926ebcdf1e5383b4229cf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQwODo1NDozM1rOGHpWdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQwODo1NDozM1rOGHpWdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY3MDcxMQ==", "bodyText": "Worth adding a comment to explain this?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            gradle.taskGraph.whenReady {\n          \n          \n            \n            // If we're executing the `taskMatrix` task, disable tests and other slow tasks\n          \n          \n            \n            //  so that we can get a result quickly.\n          \n          \n            \n            gradle.taskGraph.whenReady {", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#discussion_r410670711", "createdAt": "2020-04-18T08:54:33Z", "author": {"login": "rnorth"}, "path": "gradle/ci-support.gradle", "diffHunk": "@@ -0,0 +1,33 @@\n+import groovy.json.JsonOutput\n+\n+// Emit a JSON-formatted list of check tasks to be run in CI\n+task testMatrix {\n+    project.afterEvaluate {\n+        def checkTasks = subprojects.collect {\n+            it.tasks.findByName(\"check\")\n+        }.findAll { it != null }\n+\n+        dependsOn(checkTasks)\n+        doLast {\n+            def checkTaskPaths = checkTasks\n+                .findAll { !it.state.upToDate }\n+                .collect { it.path }\n+\n+            println(JsonOutput.toJson(checkTaskPaths))\n+        }\n+    }\n+}\n+\n+gradle.taskGraph.whenReady {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb53bba84291e6d34db926ebcdf1e5383b4229cf"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac2f11b33e5f49bdb27b46b9d57afe1f8c31841a", "author": {"user": {"login": "bsideup", "name": "Sergei Egorov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/ac2f11b33e5f49bdb27b46b9d57afe1f8c31841a", "committedDate": "2020-04-18T08:54:57Z", "message": "Update gradle/ci-support.gradle\n\nCo-Authored-By: Richard North <rich.north@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1ODk2MDgw", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#pullrequestreview-395896080", "createdAt": "2020-04-18T08:56:16Z", "commit": {"oid": "cb53bba84291e6d34db926ebcdf1e5383b4229cf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQwODo1NjoxN1rOGHpXHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQwODo1NjoxN1rOGHpXHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY3MDg3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        def checkTaskPaths = checkTasks\n          \n          \n            \n                        // Obtain a list of check tasks that are not up-to-date, i.e.\n          \n          \n            \n                        //  the ones which Gradle cannot find a cached output for.\n          \n          \n            \n                        def checkTaskPaths = checkTasks", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#discussion_r410670876", "createdAt": "2020-04-18T08:56:17Z", "author": {"login": "rnorth"}, "path": "gradle/ci-support.gradle", "diffHunk": "@@ -0,0 +1,33 @@\n+import groovy.json.JsonOutput\n+\n+// Emit a JSON-formatted list of check tasks to be run in CI\n+task testMatrix {\n+    project.afterEvaluate {\n+        def checkTasks = subprojects.collect {\n+            it.tasks.findByName(\"check\")\n+        }.findAll { it != null }\n+\n+        dependsOn(checkTasks)\n+        doLast {\n+            def checkTaskPaths = checkTasks", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb53bba84291e6d34db926ebcdf1e5383b4229cf"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1ODk2MjI3", "url": "https://github.com/testcontainers/testcontainers-java/pull/2520#pullrequestreview-395896227", "createdAt": "2020-04-18T08:58:15Z", "commit": {"oid": "ac2f11b33e5f49bdb27b46b9d57afe1f8c31841a"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef02bdd18f8f0c6112828b40715b158a4a2b99bb", "author": {"user": {"login": "bsideup", "name": "Sergei Egorov"}}, "url": "https://github.com/testcontainers/testcontainers-java/commit/ef02bdd18f8f0c6112828b40715b158a4a2b99bb", "committedDate": "2020-04-18T08:59:49Z", "message": "Update gradle/ci-support.gradle\n\nCo-Authored-By: Richard North <rich.north@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3386, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}