{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg0MTYyMjU3", "number": 1751, "title": "Allow any authenticated user to POST to /fcr:tx", "bodyText": "JIRA Ticket: https://jira.lyrasis.org/browse/FCREPO-3321\nWhat does this Pull Request do?\nAllows any authenticated user to create a transaction by allowing POST to the /fcr:tx endpoint as long as the current user is authenticated.\nHow should this be tested?\n\nRun the WebACRecipesIT integration tests\nBuild and run using mvn jetty:run then test by doing: curl -u testuser:testpass -i -X POST http://localhost:8080/rest/fcr:tx. You should get a 201 Created response.\n\nInterested parties\n@fcrepo4/committers, @awoods", "createdAt": "2020-09-10T18:01:14Z", "url": "https://github.com/fcrepo/fcrepo/pull/1751", "merged": true, "mergeCommit": {"oid": "83e4f46a9d9ed8436f24d3362ff448601cf7b4e0"}, "closed": true, "closedAt": "2020-09-11T14:38:10Z", "author": {"login": "peichman-umd"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHkp3cgH2gAyNDg0MTYyMjU3OmRmOWFhMjAzODU4MmQ2M2M3NjUxZGQxZjViOWEyYzg1ZDRlODkwZjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdH12h1AFqTQ4NjgzMTUxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "df9aa2038582d63c7651dd1f5b9a2c85d4e890f7", "author": {"user": {"login": "peichman-umd", "name": "Peter Eichman"}}, "url": "https://github.com/fcrepo/fcrepo/commit/df9aa2038582d63c7651dd1f5b9a2c85d4e890f7", "committedDate": "2020-09-10T17:57:01Z", "message": "Allow any authenticated user to POST to /fcr:tx\n\nFixes: https://jira.lyrasis.org/browse/FCREPO-3321"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MzI2NjI5", "url": "https://github.com/fcrepo/fcrepo/pull/1751#pullrequestreview-486326629", "createdAt": "2020-09-10T21:34:23Z", "commit": {"oid": "df9aa2038582d63c7651dd1f5b9a2c85d4e890f7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMTozNDoyM1rOHQGjEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMTo0Njo1MFrOHQG4SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY0NjU0NA==", "bodyText": "This is already defined in TransactionConstants... although FedoraTypes seems like a logical home. Would you be interested in refactoring these into a single constant?", "url": "https://github.com/fcrepo/fcrepo/pull/1751#discussion_r486646544", "createdAt": "2020-09-10T21:34:23Z", "author": {"login": "awoods"}, "path": "fcrepo-kernel-api/src/main/java/org/fcrepo/kernel/api/FedoraTypes.java", "diffHunk": "@@ -99,6 +99,8 @@\n \n     String FCR_TOMBSTONE = \"fcr:tombstone\";\n \n+    String FCR_TX = \"fcr:tx\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df9aa2038582d63c7651dd1f5b9a2c85d4e890f7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY1MTk3Ng==", "bodyText": "Could you add the \"currentUser\"s ID to the debug message?", "url": "https://github.com/fcrepo/fcrepo/pull/1751#discussion_r486651976", "createdAt": "2020-09-10T21:46:50Z", "author": {"login": "awoods"}, "path": "fcrepo-auth-webac/src/main/java/org/fcrepo/auth/webac/WebACFilter.java", "diffHunk": "@@ -365,6 +367,10 @@ private boolean isAuthorized(final Subject currentUser, final HttpServletRequest\n                 }\n             }\n         case \"POST\":\n+            if (isTxEndpoint && currentUser.isAuthenticated()) {\n+                log.debug(\"POST allowed to transaction endpoint\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df9aa2038582d63c7651dd1f5b9a2c85d4e890f7"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57af412301529a6897adcc8bf5cf489ce5fdf415", "author": {"user": {"login": "peichman-umd", "name": "Peter Eichman"}}, "url": "https://github.com/fcrepo/fcrepo/commit/57af412301529a6897adcc8bf5cf489ce5fdf415", "committedDate": "2020-09-11T13:22:13Z", "message": "Code review comments."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2ODMxNTE5", "url": "https://github.com/fcrepo/fcrepo/pull/1751#pullrequestreview-486831519", "createdAt": "2020-09-11T13:59:14Z", "commit": {"oid": "57af412301529a6897adcc8bf5cf489ce5fdf415"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2948, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}