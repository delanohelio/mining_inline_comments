{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NzQ1NTc1", "number": 1631, "title": "Changed the name of the object metadata files", "bodyText": "JIRA Ticket: FCREPO-3195 && FCREPO-3210\nWhat does this Pull Request do?\nFixes the problem @awoods reported with rebuilds not working correctly due to the difference between the Fedora object id and the OCFL object id. The rebuild logic now does not make any assumptions about the naming of sidecar files. It iterates over each sidecar in an ocfl object, if it discovers the object is an archival group, it updates the index mappings accordingly.\nHow should this be tested?\nFollow @awoods steps as described in FCREPO-3210\nInterested parties\n@awoods @bbpennel @dbernstein", "createdAt": "2020-02-18T17:31:34Z", "url": "https://github.com/fcrepo/fcrepo/pull/1631", "merged": true, "mergeCommit": {"oid": "e1d62e50aead0f2a4856c3bf221e6cc24a1791a2"}, "closed": true, "closedAt": "2020-02-24T17:47:46Z", "author": {"login": "pwinckles"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFmNELAFqTM2MDU3MDE0Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcF5_qrABqjMwNTI2NTMxOTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNTcwMTQy", "url": "https://github.com/fcrepo/fcrepo/pull/1631#pullrequestreview-360570142", "createdAt": "2020-02-18T18:26:22Z", "commit": {"oid": "318184299218a8a8754edc037551997fa89245e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxODoyNjoyMlrOFrNeuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxODoyNjoyMlrOFrNeuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg1Mzk0NQ==", "bodyText": "I am not seeing how this case is now being accounted for?", "url": "https://github.com/fcrepo/fcrepo/pull/1631#discussion_r380853945", "createdAt": "2020-02-18T18:26:22Z", "author": {"login": "awoods"}, "path": "fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/OCFLPersistentStorageUtils.java", "diffHunk": "@@ -125,10 +131,8 @@ public static  String resolveOCFLSubpath(final String rootFedoraObjectId, final\n         final var lastPathSegment = rootObjectId.substring(rootObjectId.lastIndexOf(\"/\") + 1);\n \n         String subPath;\n-        if (FEDORA_ID_PREFIX.equals(rootFedoraObjectId) && \"\".equals(fedoraSubpath)) {\n-            subPath = DEFAULT_REPOSITORY_ROOT_OCFL_OBJECT_ID;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "318184299218a8a8754edc037551997fa89245e0"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNjU5MzY2", "url": "https://github.com/fcrepo/fcrepo/pull/1631#pullrequestreview-360659366", "createdAt": "2020-02-18T20:45:19Z", "commit": {"oid": "318184299218a8a8754edc037551997fa89245e0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18af11efbea1e193aff0eac3d43a5b719754eab3", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/18af11efbea1e193aff0eac3d43a5b719754eab3", "committedDate": "2020-02-19T17:29:37Z", "message": "updated the rebuild logic to not make any assumptions about sidecar file names"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "318184299218a8a8754edc037551997fa89245e0", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/318184299218a8a8754edc037551997fa89245e0", "committedDate": "2020-02-18T17:21:46Z", "message": "changed the name of the object metadata files to a fixed path rather than based on their object id"}, "afterCommit": {"oid": "18af11efbea1e193aff0eac3d43a5b719754eab3", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/18af11efbea1e193aff0eac3d43a5b719754eab3", "committedDate": "2020-02-19T17:29:37Z", "message": "updated the rebuild logic to not make any assumptions about sidecar file names"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3225, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}