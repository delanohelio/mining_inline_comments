{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyODk3NjI5", "number": 1747, "title": "Add remaining SMTs", "bodyText": "JIRA Ticket: https://jira.lyrasis.org/browse/FCREPO-3269\nWhat does this Pull Request do?\nAdds in some remaining server managed triples for Binaries (and actually for Containers too).\nHow should this be tested?\n\nCreate a binary\ncurl -i -ufedoraAdmin:fedoraAdmin -H\"Content-type: text/plain\" -d\"Some example text\" -XPOST -H\"Slug: binary\" http://localhost:8080/rest\n\n\nGet the NonRdfSourceDescription\ncurl -i -ufedoraAdmin:fedoraAdmin http://localhost:8080/rest/binary\n\n\nBefore this PR see:\n<http://localhost:8081/rest/binary>\n    fedora:created \"2020-04-01T20:50:09.916295Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> ;\n    fedora:lastModified \"2020-04-01T20:50:09.916295Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> ;\n    rdf:type ldp:NonRDFSource ;\n    fedora:hasFixityService <http://localhost:8081/rest/binary/fcr:fixity> .\n\n\nAfter this PR see:\n <http://localhost:8081/rest/binary>\n    fedora:created           \"2020-09-08T20:29:39.273341Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> ;\n    fedora:lastModified      \"2020-09-08T20:29:39.273341Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> ;\n    fedora:createdBy         \"fedoraAdmin\" ;\n    fedora:lastModifiedBy    \"fedoraAdmin\" ;\n    rdf:type                 ldp:NonRDFSource ;\n    rdf:type                 ldp:Resource ;\n    rdf:type                 fedora:Resource ;\n    rdf:type                 fedora:Binary ;\n    premis:hasSize           \"17\"^^<http://www.w3.org/2001/XMLSchema#long> ;\n    ebucore:hasMimeType      \"text/plain\" ;\n    premis:hasMessageDigest  <urn:sha-512:2b416c46c884b38418d91151719a3af1f04cbb5686bc84b4057b3f99124d1920febe43bac16b8a734a13969270a9411186ff5e4ad20af60a8a11d412f96df8c2> ;\n    fedora:hasFixityService  <http://localhost:8081/rest/binary/fcr:fixity> .\n\n\n\nInterested parties\n@fcrepo4/committers", "createdAt": "2020-09-09T14:45:34Z", "url": "https://github.com/fcrepo/fcrepo/pull/1747", "merged": true, "mergeCommit": {"oid": "4d8d2b92ea8e369f956a55eb553f19358e8aba0c"}, "closed": true, "closedAt": "2020-09-10T21:19:15Z", "author": {"login": "whikloj"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHNTfzAH2gAyNDgyODk3NjI5OjYwOGFlMmY2MzQzZTA1YjI0MGI4OGI4Y2Q0NmJiZTAwMWU4MGJjODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHmnrNAFqTQ4NjI3NjYyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "608ae2f6343e05b240b88b8cd46bbe001e80bc80", "author": {"user": {"login": "whikloj", "name": "Jared Whiklo"}}, "url": "https://github.com/fcrepo/fcrepo/commit/608ae2f6343e05b240b88b8cd46bbe001e80bc80", "committedDate": "2020-09-09T14:44:46Z", "message": "Add remaining SMTs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MTMyNTQ1", "url": "https://github.com/fcrepo/fcrepo/pull/1747#pullrequestreview-486132545", "createdAt": "2020-09-10T16:56:19Z", "commit": {"oid": "608ae2f6343e05b240b88b8cd46bbe001e80bc80"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjo1NjoxOVrOHP9QXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjo1NjoxOVrOHP9QXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ5NDMwMw==", "bodyText": "I see that we currently only support retrieval of one content digest, it would be ideal if they could all be returned.\nNew ticket: https://jira.lyrasis.org/browse/FCREPO-3419", "url": "https://github.com/fcrepo/fcrepo/pull/1747#discussion_r486494303", "createdAt": "2020-09-10T16:56:19Z", "author": {"login": "awoods"}, "path": "fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/services/ManagedPropertiesServiceImpl.java", "diffHunk": "@@ -52,10 +60,29 @@\n                 createLiteral(resource.getCreatedDate().toString(), XSDdateTime)));\n         triples.add(Triple.create(subject, LAST_MODIFIED_DATE.asNode(),\n                 createLiteral(resource.getLastModifiedDate().toString(), XSDdateTime)));\n+        if (resource.getCreatedBy() != null) {\n+            triples.add(Triple.create(subject, CREATED_BY.asNode(), createLiteral(resource.getCreatedBy())));\n+        }\n+        if (resource.getLastModifiedBy() != null) {\n+            triples.add(Triple.create(subject, LAST_MODIFIED_BY.asNode(), createLiteral(resource.getLastModifiedBy())));\n+        }\n \n         resource.getDescribedResource().getSystemTypes(true).forEach(triple -> {\n             triples.add(Triple.create(subject, type.asNode(), createURI(triple.toString())));\n         });\n+        if (resource instanceof NonRdfSourceDescription) {\n+            final Binary binary = (Binary) resource.getDescribedResource();\n+\n+            triples.add(Triple.create(subject, HAS_SIZE.asNode(),\n+                    createLiteral(String.valueOf(binary.getContentSize()), XSDlong)));\n+            if (binary.getMimeType() != null) {\n+                triples.add(Triple.create(subject, HAS_MIME_TYPE.asNode(), createLiteral(binary.getMimeType())));\n+            }\n+            if (binary.getContentDigest() != null) {\n+                triples.add(Triple.create(subject, HAS_MESSAGE_DIGEST.asNode(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "608ae2f6343e05b240b88b8cd46bbe001e80bc80"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "595f72dfff72b2db852b6a7c97114cb48a270c1d", "author": {"user": {"login": "whikloj", "name": "Jared Whiklo"}}, "url": "https://github.com/fcrepo/fcrepo/commit/595f72dfff72b2db852b6a7c97114cb48a270c1d", "committedDate": "2020-09-10T19:50:23Z", "message": "Add integration test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2Mjc2NjI3", "url": "https://github.com/fcrepo/fcrepo/pull/1747#pullrequestreview-486276627", "createdAt": "2020-09-10T20:14:26Z", "commit": {"oid": "595f72dfff72b2db852b6a7c97114cb48a270c1d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2939, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}