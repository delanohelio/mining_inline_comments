{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg0MTYyMjU3", "number": 1751, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMTozNDoyM1rOEiTOWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMTo0Njo1MFrOEiTcLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NDAyMDEwOnYy", "diffSide": "RIGHT", "path": "fcrepo-kernel-api/src/main/java/org/fcrepo/kernel/api/FedoraTypes.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMTozNDoyM1rOHQGjEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzoyMzozNFrOHQerFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY0NjU0NA==", "bodyText": "This is already defined in TransactionConstants... although FedoraTypes seems like a logical home. Would you be interested in refactoring these into a single constant?", "url": "https://github.com/fcrepo/fcrepo/pull/1751#discussion_r486646544", "createdAt": "2020-09-10T21:34:23Z", "author": {"login": "awoods"}, "path": "fcrepo-kernel-api/src/main/java/org/fcrepo/kernel/api/FedoraTypes.java", "diffHunk": "@@ -99,6 +99,8 @@\n \n     String FCR_TOMBSTONE = \"fcr:tombstone\";\n \n+    String FCR_TX = \"fcr:tx\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df9aa2038582d63c7651dd1f5b9a2c85d4e890f7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA0MTgxMw==", "bodyText": "@awoods I've modified TX_PREFIX to be defined in terms of the FCR_TX constant.", "url": "https://github.com/fcrepo/fcrepo/pull/1751#discussion_r487041813", "createdAt": "2020-09-11T13:23:34Z", "author": {"login": "peichman-umd"}, "path": "fcrepo-kernel-api/src/main/java/org/fcrepo/kernel/api/FedoraTypes.java", "diffHunk": "@@ -99,6 +99,8 @@\n \n     String FCR_TOMBSTONE = \"fcr:tombstone\";\n \n+    String FCR_TX = \"fcr:tx\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY0NjU0NA=="}, "originalCommit": {"oid": "df9aa2038582d63c7651dd1f5b9a2c85d4e890f7"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NDA1NTUwOnYy", "diffSide": "RIGHT", "path": "fcrepo-auth-webac/src/main/java/org/fcrepo/auth/webac/WebACFilter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMTo0Njo1MFrOHQG4SA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMzoyNDowN1rOHQesXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY1MTk3Ng==", "bodyText": "Could you add the \"currentUser\"s ID to the debug message?", "url": "https://github.com/fcrepo/fcrepo/pull/1751#discussion_r486651976", "createdAt": "2020-09-10T21:46:50Z", "author": {"login": "awoods"}, "path": "fcrepo-auth-webac/src/main/java/org/fcrepo/auth/webac/WebACFilter.java", "diffHunk": "@@ -365,6 +367,10 @@ private boolean isAuthorized(final Subject currentUser, final HttpServletRequest\n                 }\n             }\n         case \"POST\":\n+            if (isTxEndpoint && currentUser.isAuthenticated()) {\n+                log.debug(\"POST allowed to transaction endpoint\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df9aa2038582d63c7651dd1f5b9a2c85d4e890f7"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA0MjE0MA==", "bodyText": "Done.", "url": "https://github.com/fcrepo/fcrepo/pull/1751#discussion_r487042140", "createdAt": "2020-09-11T13:24:07Z", "author": {"login": "peichman-umd"}, "path": "fcrepo-auth-webac/src/main/java/org/fcrepo/auth/webac/WebACFilter.java", "diffHunk": "@@ -365,6 +367,10 @@ private boolean isAuthorized(final Subject currentUser, final HttpServletRequest\n                 }\n             }\n         case \"POST\":\n+            if (isTxEndpoint && currentUser.isAuthenticated()) {\n+                log.debug(\"POST allowed to transaction endpoint\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY1MTk3Ng=="}, "originalCommit": {"oid": "df9aa2038582d63c7651dd1f5b9a2c85d4e890f7"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1657, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}