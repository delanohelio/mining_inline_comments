{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1OTg3NjI4", "number": 1608, "title": "doesResourceExist function", "bodyText": "JIRA Ticket: https://jira.lyrasis.org/browse/FCREPO-3137\nWhat does this Pull Request do?\nAdds a doesResourceExist method to the ResourceFactory\nHow should this be tested?\nJust review, I have not added this to any other code yet.\nInterested parties\n@fcrepo4/committers", "createdAt": "2020-01-22T17:57:18Z", "url": "https://github.com/fcrepo/fcrepo/pull/1608", "merged": true, "mergeCommit": {"oid": "1cdf310b536616d67056425e2d68b3774f01a84a"}, "closed": true, "closedAt": "2020-01-24T16:55:26Z", "author": {"login": "whikloj"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb85l5XAH2gAyMzY1OTg3NjI4OjEyNDMxOWJkZjk4M2ExMjkwZDI5NDBhYjA5NjcwNWNkMWEzYzVhMWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9h5GsgFqTM0ODA4ODMwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "124319bdf983a1290d2940ab096705cd1a3c5a1e", "author": {"user": {"login": "whikloj", "name": "Jared Whiklo"}}, "url": "https://github.com/fcrepo/fcrepo/commit/124319bdf983a1290d2940ab096705cd1a3c5a1e", "committedDate": "2020-01-22T17:56:22Z", "message": "GetResource service"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NTA0OTg4", "url": "https://github.com/fcrepo/fcrepo/pull/1608#pullrequestreview-347504988", "createdAt": "2020-01-23T18:13:12Z", "commit": {"oid": "124319bdf983a1290d2940ab096705cd1a3c5a1e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxODoxMzoxMlrOFhH2Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxODozMjoxOFrOFhIZWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI3NTg4Mw==", "bodyText": "ResourceFactory has getResource which includes logic for determining what interaction model a resource uses and initializing the correct FedoraResource class based off it:\nhttps://github.com/fcrepo4/fcrepo4/blob/master/fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/models/ResourceFactoryImpl.java#L84\nSo I think you can call that rather than going through getHeaders", "url": "https://github.com/fcrepo/fcrepo/pull/1608#discussion_r370275883", "createdAt": "2020-01-23T18:13:12Z", "author": {"login": "bbpennel"}, "path": "fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/services/GetResourceServiceImpl.java", "diffHunk": "@@ -0,0 +1,105 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.kernel.impl.services;\n+\n+import static org.fcrepo.kernel.api.RdfLexicon.NON_RDF_SOURCE;\n+\n+import javax.inject.Inject;\n+\n+import java.time.Instant;\n+\n+import org.fcrepo.kernel.api.Transaction;\n+import org.fcrepo.kernel.api.exception.RepositoryRuntimeException;\n+import org.fcrepo.kernel.api.models.FedoraResource;\n+import org.fcrepo.kernel.api.models.ResourceFactory;\n+import org.fcrepo.kernel.api.models.ResourceHeaders;\n+import org.fcrepo.kernel.api.services.GetResourceService;\n+import org.fcrepo.kernel.impl.models.BinaryImpl;\n+import org.fcrepo.kernel.impl.models.ContainerImpl;\n+import org.fcrepo.persistence.api.PersistentStorageSession;\n+import org.fcrepo.persistence.api.PersistentStorageSessionManager;\n+import org.fcrepo.persistence.api.exceptions.PersistentItemNotFoundException;\n+import org.fcrepo.persistence.api.exceptions.PersistentStorageException;\n+import org.springframework.stereotype.Component;\n+\n+/**\n+ * Implementation to check for or get FedoraResources from storage.\n+ * @author whikloj\n+ * @since 6.0.0\n+ */\n+@Component\n+public class GetResourceServiceImpl implements GetResourceService {\n+\n+    @Inject\n+    private PersistentStorageSessionManager psManager;\n+\n+    @Inject\n+    private ResourceFactory rsFactory;\n+\n+    @Override\n+    public FedoraResource getResource(final Transaction transaction, final String fedoraId, final Instant version) {\n+        final PersistentStorageSession psSession;\n+        if (transaction == null) {\n+            psSession = psManager.getReadOnlySession();\n+        } else {\n+            psSession = psManager.getSession(transaction.getId());\n+        }\n+        try {\n+            final ResourceHeaders headers = psSession.getHeaders(fedoraId, version);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "124319bdf983a1290d2940ab096705cd1a3c5a1e"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI3Nzg0NA==", "bodyText": "I don't think we want to commit the session if the transaction existed before this service was called, otherwise it might prematurely commit changes. Doesn't seem like we have a commitIfShortLived equivalent for PersistentStorageSession, so might have to rely on checking if transaction was null or not.", "url": "https://github.com/fcrepo/fcrepo/pull/1608#discussion_r370277844", "createdAt": "2020-01-23T18:17:20Z", "author": {"login": "bbpennel"}, "path": "fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/services/GetResourceServiceImpl.java", "diffHunk": "@@ -0,0 +1,105 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.kernel.impl.services;\n+\n+import static org.fcrepo.kernel.api.RdfLexicon.NON_RDF_SOURCE;\n+\n+import javax.inject.Inject;\n+\n+import java.time.Instant;\n+\n+import org.fcrepo.kernel.api.Transaction;\n+import org.fcrepo.kernel.api.exception.RepositoryRuntimeException;\n+import org.fcrepo.kernel.api.models.FedoraResource;\n+import org.fcrepo.kernel.api.models.ResourceFactory;\n+import org.fcrepo.kernel.api.models.ResourceHeaders;\n+import org.fcrepo.kernel.api.services.GetResourceService;\n+import org.fcrepo.kernel.impl.models.BinaryImpl;\n+import org.fcrepo.kernel.impl.models.ContainerImpl;\n+import org.fcrepo.persistence.api.PersistentStorageSession;\n+import org.fcrepo.persistence.api.PersistentStorageSessionManager;\n+import org.fcrepo.persistence.api.exceptions.PersistentItemNotFoundException;\n+import org.fcrepo.persistence.api.exceptions.PersistentStorageException;\n+import org.springframework.stereotype.Component;\n+\n+/**\n+ * Implementation to check for or get FedoraResources from storage.\n+ * @author whikloj\n+ * @since 6.0.0\n+ */\n+@Component\n+public class GetResourceServiceImpl implements GetResourceService {\n+\n+    @Inject\n+    private PersistentStorageSessionManager psManager;\n+\n+    @Inject\n+    private ResourceFactory rsFactory;\n+\n+    @Override\n+    public FedoraResource getResource(final Transaction transaction, final String fedoraId, final Instant version) {\n+        final PersistentStorageSession psSession;\n+        if (transaction == null) {\n+            psSession = psManager.getReadOnlySession();\n+        } else {\n+            psSession = psManager.getSession(transaction.getId());\n+        }\n+        try {\n+            final ResourceHeaders headers = psSession.getHeaders(fedoraId, version);\n+            final FedoraResource resource;\n+            if (headers.getInteractionModel().equals(NON_RDF_SOURCE.toString())) {\n+                resource = new BinaryImpl(fedoraId, transaction, psManager, rsFactory);\n+            } else {\n+                resource = new ContainerImpl(fedoraId, transaction, psManager, rsFactory);\n+            }\n+            // Commit session so it doesn't hang around.\n+            psSession.commit();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "124319bdf983a1290d2940ab096705cd1a3c5a1e"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI3OTM5NQ==", "bodyText": "Same thing as in the other method", "url": "https://github.com/fcrepo/fcrepo/pull/1608#discussion_r370279395", "createdAt": "2020-01-23T18:20:21Z", "author": {"login": "bbpennel"}, "path": "fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/services/GetResourceServiceImpl.java", "diffHunk": "@@ -0,0 +1,105 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.kernel.impl.services;\n+\n+import static org.fcrepo.kernel.api.RdfLexicon.NON_RDF_SOURCE;\n+\n+import javax.inject.Inject;\n+\n+import java.time.Instant;\n+\n+import org.fcrepo.kernel.api.Transaction;\n+import org.fcrepo.kernel.api.exception.RepositoryRuntimeException;\n+import org.fcrepo.kernel.api.models.FedoraResource;\n+import org.fcrepo.kernel.api.models.ResourceFactory;\n+import org.fcrepo.kernel.api.models.ResourceHeaders;\n+import org.fcrepo.kernel.api.services.GetResourceService;\n+import org.fcrepo.kernel.impl.models.BinaryImpl;\n+import org.fcrepo.kernel.impl.models.ContainerImpl;\n+import org.fcrepo.persistence.api.PersistentStorageSession;\n+import org.fcrepo.persistence.api.PersistentStorageSessionManager;\n+import org.fcrepo.persistence.api.exceptions.PersistentItemNotFoundException;\n+import org.fcrepo.persistence.api.exceptions.PersistentStorageException;\n+import org.springframework.stereotype.Component;\n+\n+/**\n+ * Implementation to check for or get FedoraResources from storage.\n+ * @author whikloj\n+ * @since 6.0.0\n+ */\n+@Component\n+public class GetResourceServiceImpl implements GetResourceService {\n+\n+    @Inject\n+    private PersistentStorageSessionManager psManager;\n+\n+    @Inject\n+    private ResourceFactory rsFactory;\n+\n+    @Override\n+    public FedoraResource getResource(final Transaction transaction, final String fedoraId, final Instant version) {\n+        final PersistentStorageSession psSession;\n+        if (transaction == null) {\n+            psSession = psManager.getReadOnlySession();\n+        } else {\n+            psSession = psManager.getSession(transaction.getId());\n+        }\n+        try {\n+            final ResourceHeaders headers = psSession.getHeaders(fedoraId, version);\n+            final FedoraResource resource;\n+            if (headers.getInteractionModel().equals(NON_RDF_SOURCE.toString())) {\n+                resource = new BinaryImpl(fedoraId, transaction, psManager, rsFactory);\n+            } else {\n+                resource = new ContainerImpl(fedoraId, transaction, psManager, rsFactory);\n+            }\n+            // Commit session so it doesn't hang around.\n+            psSession.commit();\n+            return resource;\n+        } catch (PersistentItemNotFoundException e) {\n+            // Object doesn't exist.\n+            return null;\n+        } catch (PersistentStorageException e) {\n+            throw new RepositoryRuntimeException(e);\n+        }\n+    }\n+\n+    @Override\n+    public boolean doesResourceExist(final Transaction transaction, final String fedoraId, final Instant version) {\n+        // TODO: Check the index first.\n+\n+        final PersistentStorageSession psSession;\n+        if (transaction == null) {\n+            psSession = psManager.getReadOnlySession();\n+        } else {\n+            psSession = psManager.getSession(transaction.getId());\n+        }\n+        try {\n+            psSession.getHeaders(fedoraId, version);\n+            // Commit session so it doesn't hang around.\n+            psSession.commit();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "124319bdf983a1290d2940ab096705cd1a3c5a1e"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI4MDIxMw==", "bodyText": "Also, we should probably commit in a finally block, otherwise we might leak sessions when exceptions occur", "url": "https://github.com/fcrepo/fcrepo/pull/1608#discussion_r370280213", "createdAt": "2020-01-23T18:22:07Z", "author": {"login": "bbpennel"}, "path": "fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/services/GetResourceServiceImpl.java", "diffHunk": "@@ -0,0 +1,105 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.kernel.impl.services;\n+\n+import static org.fcrepo.kernel.api.RdfLexicon.NON_RDF_SOURCE;\n+\n+import javax.inject.Inject;\n+\n+import java.time.Instant;\n+\n+import org.fcrepo.kernel.api.Transaction;\n+import org.fcrepo.kernel.api.exception.RepositoryRuntimeException;\n+import org.fcrepo.kernel.api.models.FedoraResource;\n+import org.fcrepo.kernel.api.models.ResourceFactory;\n+import org.fcrepo.kernel.api.models.ResourceHeaders;\n+import org.fcrepo.kernel.api.services.GetResourceService;\n+import org.fcrepo.kernel.impl.models.BinaryImpl;\n+import org.fcrepo.kernel.impl.models.ContainerImpl;\n+import org.fcrepo.persistence.api.PersistentStorageSession;\n+import org.fcrepo.persistence.api.PersistentStorageSessionManager;\n+import org.fcrepo.persistence.api.exceptions.PersistentItemNotFoundException;\n+import org.fcrepo.persistence.api.exceptions.PersistentStorageException;\n+import org.springframework.stereotype.Component;\n+\n+/**\n+ * Implementation to check for or get FedoraResources from storage.\n+ * @author whikloj\n+ * @since 6.0.0\n+ */\n+@Component\n+public class GetResourceServiceImpl implements GetResourceService {\n+\n+    @Inject\n+    private PersistentStorageSessionManager psManager;\n+\n+    @Inject\n+    private ResourceFactory rsFactory;\n+\n+    @Override\n+    public FedoraResource getResource(final Transaction transaction, final String fedoraId, final Instant version) {\n+        final PersistentStorageSession psSession;\n+        if (transaction == null) {\n+            psSession = psManager.getReadOnlySession();\n+        } else {\n+            psSession = psManager.getSession(transaction.getId());\n+        }\n+        try {\n+            final ResourceHeaders headers = psSession.getHeaders(fedoraId, version);\n+            final FedoraResource resource;\n+            if (headers.getInteractionModel().equals(NON_RDF_SOURCE.toString())) {\n+                resource = new BinaryImpl(fedoraId, transaction, psManager, rsFactory);\n+            } else {\n+                resource = new ContainerImpl(fedoraId, transaction, psManager, rsFactory);\n+            }\n+            // Commit session so it doesn't hang around.\n+            psSession.commit();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI3Nzg0NA=="}, "originalCommit": {"oid": "124319bdf983a1290d2940ab096705cd1a3c5a1e"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI4MjExNw==", "bodyText": "Finding some of these tests names a bit hard to read grammatically. Bit redundant, maybe doesResourceExistExists or something along those lines. Similarly, doesResourceExistDoesntExist, etc, so that the method being tested is consistently in there. Or maybe some kind of delimiter between doesResource_Exists to split what's being tested from the state being tested.", "url": "https://github.com/fcrepo/fcrepo/pull/1608#discussion_r370282117", "createdAt": "2020-01-23T18:26:25Z", "author": {"login": "bbpennel"}, "path": "fcrepo-kernel-impl/src/test/java/org/fcrepo/kernel/impl/services/GetResourceServiceImplTest.java", "diffHunk": "@@ -0,0 +1,137 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.kernel.impl.services;\n+\n+import static org.fcrepo.kernel.api.RdfLexicon.BASIC_CONTAINER;\n+import static org.fcrepo.kernel.api.RdfLexicon.NON_RDF_SOURCE;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNull;\n+import static org.junit.Assert.assertTrue;\n+import static org.mockito.Mockito.when;\n+import static org.springframework.test.util.ReflectionTestUtils.setField;\n+\n+import java.util.UUID;\n+\n+import org.fcrepo.kernel.api.Transaction;\n+import org.fcrepo.kernel.api.exception.RepositoryRuntimeException;\n+import org.fcrepo.kernel.api.models.Binary;\n+import org.fcrepo.kernel.api.models.Container;\n+import org.fcrepo.kernel.api.models.FedoraResource;\n+import org.fcrepo.kernel.api.models.ResourceFactory;\n+import org.fcrepo.kernel.api.models.ResourceHeaders;\n+import org.fcrepo.persistence.api.PersistentStorageSession;\n+import org.fcrepo.persistence.api.PersistentStorageSessionManager;\n+import org.fcrepo.persistence.api.exceptions.PersistentItemNotFoundException;\n+import org.fcrepo.persistence.api.exceptions.PersistentSessionClosedException;\n+import org.fcrepo.persistence.common.ResourceHeadersImpl;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.ArgumentMatchers;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.junit.MockitoJUnitRunner;\n+\n+@RunWith(MockitoJUnitRunner.Silent.class)\n+public class GetResourceServiceImplTest {\n+\n+    @Mock\n+    private PersistentStorageSessionManager psManager;\n+\n+    @Mock\n+    private PersistentStorageSession psSession;\n+\n+    @Mock\n+    private ResourceFactory rsFactory;\n+\n+    @Mock\n+    private Transaction transaction;\n+\n+    @Mock\n+    private ResourceHeaders headers;\n+\n+    @InjectMocks\n+    private GetResourceServiceImpl service;\n+\n+    @Before\n+    public void setUp() {\n+        when(psManager.getReadOnlySession()).thenReturn(psSession);\n+        when(psManager.getSession(ArgumentMatchers.any())).thenReturn(psSession);\n+        when(transaction.getId()).thenReturn(UUID.randomUUID().toString());\n+        setField(service, \"psManager\", psManager);\n+        setField(service, \"rsFactory\", rsFactory);\n+    }\n+\n+    @Test\n+    public void doesResourceExists() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "124319bdf983a1290d2940ab096705cd1a3c5a1e"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI4NDg4OA==", "bodyText": "Might be worth adding tests to verify the expected session behaviors depending on if a transaction is provided or not.", "url": "https://github.com/fcrepo/fcrepo/pull/1608#discussion_r370284888", "createdAt": "2020-01-23T18:32:18Z", "author": {"login": "bbpennel"}, "path": "fcrepo-kernel-impl/src/test/java/org/fcrepo/kernel/impl/services/GetResourceServiceImplTest.java", "diffHunk": "@@ -0,0 +1,137 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.kernel.impl.services;\n+\n+import static org.fcrepo.kernel.api.RdfLexicon.BASIC_CONTAINER;\n+import static org.fcrepo.kernel.api.RdfLexicon.NON_RDF_SOURCE;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNull;\n+import static org.junit.Assert.assertTrue;\n+import static org.mockito.Mockito.when;\n+import static org.springframework.test.util.ReflectionTestUtils.setField;\n+\n+import java.util.UUID;\n+\n+import org.fcrepo.kernel.api.Transaction;\n+import org.fcrepo.kernel.api.exception.RepositoryRuntimeException;\n+import org.fcrepo.kernel.api.models.Binary;\n+import org.fcrepo.kernel.api.models.Container;\n+import org.fcrepo.kernel.api.models.FedoraResource;\n+import org.fcrepo.kernel.api.models.ResourceFactory;\n+import org.fcrepo.kernel.api.models.ResourceHeaders;\n+import org.fcrepo.persistence.api.PersistentStorageSession;\n+import org.fcrepo.persistence.api.PersistentStorageSessionManager;\n+import org.fcrepo.persistence.api.exceptions.PersistentItemNotFoundException;\n+import org.fcrepo.persistence.api.exceptions.PersistentSessionClosedException;\n+import org.fcrepo.persistence.common.ResourceHeadersImpl;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.ArgumentMatchers;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.junit.MockitoJUnitRunner;\n+\n+@RunWith(MockitoJUnitRunner.Silent.class)\n+public class GetResourceServiceImplTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "124319bdf983a1290d2940ab096705cd1a3c5a1e"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c95376c92a7534fcaf9c972c8480e136e273c87", "author": {"user": {"login": "whikloj", "name": "Jared Whiklo"}}, "url": "https://github.com/fcrepo/fcrepo/commit/3c95376c92a7534fcaf9c972c8480e136e273c87", "committedDate": "2020-01-24T14:29:39Z", "message": "Move existence check to resourcefactory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40e294ecc2a3cfdc9fd41b4eb9ccb5cce81451d0", "author": {"user": {"login": "whikloj", "name": "Jared Whiklo"}}, "url": "https://github.com/fcrepo/fcrepo/commit/40e294ecc2a3cfdc9fd41b4eb9ccb5cce81451d0", "committedDate": "2020-01-24T15:59:47Z", "message": "With and without session tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MDg4MzA2", "url": "https://github.com/fcrepo/fcrepo/pull/1608#pullrequestreview-348088306", "createdAt": "2020-01-24T16:53:33Z", "commit": {"oid": "40e294ecc2a3cfdc9fd41b4eb9ccb5cce81451d0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3203, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}