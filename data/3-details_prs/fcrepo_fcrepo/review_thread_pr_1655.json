{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4NzY1NDg5", "number": 1655, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoyMjowMFrODwfs3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODo0NDoyOFrODwhgxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTc3NjI4OnYy", "diffSide": "RIGHT", "path": "fcrepo-persistence-api/src/main/java/org/fcrepo/persistence/api/PersistenceConstants.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoyMjowMFrOGDiIpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxOToyOTo1N1rOGDmcNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1ODE4Mg==", "bodyText": "Curious why this was needed? It doesn't appear to be changing any info, and kernel-api is available in persistence.", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406358182", "createdAt": "2020-04-09T17:22:00Z", "author": {"login": "bbpennel"}, "path": "fcrepo-persistence-api/src/main/java/org/fcrepo/persistence/api/PersistenceConstants.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.persistence.api;\n+\n+import static org.fcrepo.kernel.api.RdfLexicon.FEDORA_NON_RDF_SOURCE_DESCRIPTION_URI;\n+\n+/**\n+ * Class for persistence constants.\n+ */\n+public final class PersistenceConstants {\n+\n+    /**\n+     * Bringing from kernel level.\n+     */\n+    public static final String PERSISTENCE_FEDORA_NON_RDF_SOURCE_DESCRIPTION = FEDORA_NON_RDF_SOURCE_DESCRIPTION_URI;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQxNTgyNg==", "bodyText": "It did seem to work for me, I'll try again. Maybe when I rebased on the latest changes I missed something.", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406415826", "createdAt": "2020-04-09T19:04:19Z", "author": {"login": "whikloj"}, "path": "fcrepo-persistence-api/src/main/java/org/fcrepo/persistence/api/PersistenceConstants.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.persistence.api;\n+\n+import static org.fcrepo.kernel.api.RdfLexicon.FEDORA_NON_RDF_SOURCE_DESCRIPTION_URI;\n+\n+/**\n+ * Class for persistence constants.\n+ */\n+public final class PersistenceConstants {\n+\n+    /**\n+     * Bringing from kernel level.\n+     */\n+    public static final String PERSISTENCE_FEDORA_NON_RDF_SOURCE_DESCRIPTION = FEDORA_NON_RDF_SOURCE_DESCRIPTION_URI;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1ODE4Mg=="}, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQyODcyNA==", "bodyText": "I'm really not sure anymore, but it is not needed and I have removed it. \ud83e\udd37", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406428724", "createdAt": "2020-04-09T19:29:57Z", "author": {"login": "whikloj"}, "path": "fcrepo-persistence-api/src/main/java/org/fcrepo/persistence/api/PersistenceConstants.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.persistence.api;\n+\n+import static org.fcrepo.kernel.api.RdfLexicon.FEDORA_NON_RDF_SOURCE_DESCRIPTION_URI;\n+\n+/**\n+ * Class for persistence constants.\n+ */\n+public final class PersistenceConstants {\n+\n+    /**\n+     * Bringing from kernel level.\n+     */\n+    public static final String PERSISTENCE_FEDORA_NON_RDF_SOURCE_DESCRIPTION = FEDORA_NON_RDF_SOURCE_DESCRIPTION_URI;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1ODE4Mg=="}, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTkyODA0OnYy", "diffSide": "RIGHT", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraHtmlIT.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODowMzo1MlrOGDjmJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxOToyMzo0OVrOGDmPkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM4MjExNg==", "bodyText": "not that i mind this, but was this intentionally left in?", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406382116", "createdAt": "2020-04-09T18:03:52Z", "author": {"login": "bbpennel"}, "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraHtmlIT.java", "diffHunk": "@@ -104,7 +104,7 @@ public void testGetRootTemplate() throws IOException {\n         method.addHeader(ACCEPT, \"text/html\");\n         try (final CloseableHttpResponse response = execute(method)) {\n             final String html = EntityUtils.toString(response.getEntity());\n-            assertTrue(contains(html, \"class=\\\"fcrepo_root\\\"\"));\n+            assertTrue(html, contains(html, \"class=\\\"fcrepo_root\\\"\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQyNTQ4OA==", "bodyText": "This was part of @awoods PR on this branch. Now I'm not sure so much.", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406425488", "createdAt": "2020-04-09T19:23:49Z", "author": {"login": "whikloj"}, "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraHtmlIT.java", "diffHunk": "@@ -104,7 +104,7 @@ public void testGetRootTemplate() throws IOException {\n         method.addHeader(ACCEPT, \"text/html\");\n         try (final CloseableHttpResponse response = execute(method)) {\n             final String html = EntityUtils.toString(response.getEntity());\n-            assertTrue(contains(html, \"class=\\\"fcrepo_root\\\"\"));\n+            assertTrue(html, contains(html, \"class=\\\"fcrepo_root\\\"\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM4MjExNg=="}, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMjA3MzAxOnYy", "diffSide": "RIGHT", "path": "fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/FedoraToOCFLObjectIndexUtilImpl.java", "isResolved": true, "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODo0NDoyOFrOGDk_7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNzo1MzoxOFrOGEBZEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQwNTEwMA==", "bodyText": "I'm trying to understand if this is the case and I can't test at the moment, so I may be totally off, but it seems like if you have an archival group which contains a binary, then everything else in the AG would also have the binary as its root instead of the AG? Do we only want to set the root for a description to the binary if its not in an AG, or do we always want to do this?", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406405100", "createdAt": "2020-04-09T18:44:28Z", "author": {"login": "bbpennel"}, "path": "fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/FedoraToOCFLObjectIndexUtilImpl.java", "diffHunk": "@@ -80,8 +83,11 @@ public void rebuild() {\n                                 fedoraIds.add(headers.getId());\n                                 if (headers.isArchivalGroup()) {\n                                     rootId.set(headers.getId());\n+                                } else if (Objects.equals(headers.getInteractionModel(),\n+                                        PERSISTENCE_FEDORA_NON_RDF_SOURCE_DESCRIPTION)) {\n+                                    rootId.set(headers.getParent());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQxMjc0MQ==", "bodyText": "I think that's right @bbpennel.  And we also want to account for fcr:acl  as well.", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406412741", "createdAt": "2020-04-09T18:58:34Z", "author": {"login": "dbernstein"}, "path": "fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/FedoraToOCFLObjectIndexUtilImpl.java", "diffHunk": "@@ -80,8 +83,11 @@ public void rebuild() {\n                                 fedoraIds.add(headers.getId());\n                                 if (headers.isArchivalGroup()) {\n                                     rootId.set(headers.getId());\n+                                } else if (Objects.equals(headers.getInteractionModel(),\n+                                        PERSISTENCE_FEDORA_NON_RDF_SOURCE_DESCRIPTION)) {\n+                                    rootId.set(headers.getParent());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQwNTEwMA=="}, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQyNzM5NA==", "bodyText": "Maybe changing this to\n} else if (Objects.equals(headers.getInteractionModel(),\n                                        FEDORA_NON_RDF_SOURCE_DESCRIPTION_URI) &&\n               rootId.get() == null) {\n\nSo it only sets it if the archival group hasn't set it, and if the archival group comes later it would overwrite.", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406427394", "createdAt": "2020-04-09T19:27:41Z", "author": {"login": "whikloj"}, "path": "fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/FedoraToOCFLObjectIndexUtilImpl.java", "diffHunk": "@@ -80,8 +83,11 @@ public void rebuild() {\n                                 fedoraIds.add(headers.getId());\n                                 if (headers.isArchivalGroup()) {\n                                     rootId.set(headers.getId());\n+                                } else if (Objects.equals(headers.getInteractionModel(),\n+                                        PERSISTENCE_FEDORA_NON_RDF_SOURCE_DESCRIPTION)) {\n+                                    rootId.set(headers.getParent());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQwNTEwMA=="}, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQzMjk3Nw==", "bodyText": "Perhaps this is my lack of knowledge of how this was designed. In the case of an AG we know the root, but in the case of something else what (in the JSON) identifies it as the root?", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406432977", "createdAt": "2020-04-09T19:38:17Z", "author": {"login": "whikloj"}, "path": "fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/FedoraToOCFLObjectIndexUtilImpl.java", "diffHunk": "@@ -80,8 +83,11 @@ public void rebuild() {\n                                 fedoraIds.add(headers.getId());\n                                 if (headers.isArchivalGroup()) {\n                                     rootId.set(headers.getId());\n+                                } else if (Objects.equals(headers.getInteractionModel(),\n+                                        PERSISTENCE_FEDORA_NON_RDF_SOURCE_DESCRIPTION)) {\n+                                    rootId.set(headers.getParent());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQwNTEwMA=="}, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQzNDg5MQ==", "bodyText": "hmm, i don't think anything in the json identifies it as the root. We had talked about potentially using a special name for the root object, although i'm forgetting what it was at the moment. Seems like once we find the root, we don't need to hunt for roots anymore, so maybe only do any of if (headers.isArchivalGroup()) { block if the root id is still null?", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406434891", "createdAt": "2020-04-09T19:42:07Z", "author": {"login": "bbpennel"}, "path": "fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/FedoraToOCFLObjectIndexUtilImpl.java", "diffHunk": "@@ -80,8 +83,11 @@ public void rebuild() {\n                                 fedoraIds.add(headers.getId());\n                                 if (headers.isArchivalGroup()) {\n                                     rootId.set(headers.getId());\n+                                } else if (Objects.equals(headers.getInteractionModel(),\n+                                        PERSISTENCE_FEDORA_NON_RDF_SOURCE_DESCRIPTION)) {\n+                                    rootId.set(headers.getParent());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQwNTEwMA=="}, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQ1OTI4NQ==", "bodyText": "Right, my question is what is the root ID for a non-archival group? I'd prefer not to check for each Fedora type, so if we can codify this in the JSON all the better.\nBefore this PR the root for the binary and binary description was null because the code was only setting a root for AGs or if there was a single file it became its own root.\nWe need a way for multiple files in a single object (binary description, ACL, etc) but not an AG to have the root defined. Maybe on top of \"archivalGroup\":(true|false) we need a \"objectRoot\":(true|false)?", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406459285", "createdAt": "2020-04-09T20:30:12Z", "author": {"login": "whikloj"}, "path": "fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/FedoraToOCFLObjectIndexUtilImpl.java", "diffHunk": "@@ -80,8 +83,11 @@ public void rebuild() {\n                                 fedoraIds.add(headers.getId());\n                                 if (headers.isArchivalGroup()) {\n                                     rootId.set(headers.getId());\n+                                } else if (Objects.equals(headers.getInteractionModel(),\n+                                        PERSISTENCE_FEDORA_NON_RDF_SOURCE_DESCRIPTION)) {\n+                                    rootId.set(headers.getParent());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQwNTEwMA=="}, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjUwNTI2Mw==", "bodyText": "For a non-archival group,  the root is itself.\nhttp://localhost:8080/rest/binary ->   root= info:fedora/binary  resource=info:fedora/binary\nFor the non rdf description:\nhttp://localhost:8080/rest/binary/fcr:metadata ->   root=  info:fedora/binary resource= info:fedora/binary/fcr:metadata", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406505263", "createdAt": "2020-04-09T22:09:12Z", "author": {"login": "dbernstein"}, "path": "fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/FedoraToOCFLObjectIndexUtilImpl.java", "diffHunk": "@@ -80,8 +83,11 @@ public void rebuild() {\n                                 fedoraIds.add(headers.getId());\n                                 if (headers.isArchivalGroup()) {\n                                     rootId.set(headers.getId());\n+                                } else if (Objects.equals(headers.getInteractionModel(),\n+                                        PERSISTENCE_FEDORA_NON_RDF_SOURCE_DESCRIPTION)) {\n+                                    rootId.set(headers.getParent());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQwNTEwMA=="}, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjUwNTUwNw==", "bodyText": "Perhaps I'm missing something?", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406505507", "createdAt": "2020-04-09T22:09:50Z", "author": {"login": "dbernstein"}, "path": "fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/FedoraToOCFLObjectIndexUtilImpl.java", "diffHunk": "@@ -80,8 +83,11 @@ public void rebuild() {\n                                 fedoraIds.add(headers.getId());\n                                 if (headers.isArchivalGroup()) {\n                                     rootId.set(headers.getId());\n+                                } else if (Objects.equals(headers.getInteractionModel(),\n+                                        PERSISTENCE_FEDORA_NON_RDF_SOURCE_DESCRIPTION)) {\n+                                    rootId.set(headers.getParent());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQwNTEwMA=="}, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg1ODQzOQ==", "bodyText": "What I am wondering is is there a way to determine the correct root Id for resources without checking if\nif (\n  Objects.equals(obj.getInteractionModel(), FEDORA_NON_RDF_SOURCE_DESCRIPTION_URI) ||\n  obj.getId().endsWith(FCR_ACL))\n) {\n\nOtherwise what I am doing will (as in your PR) have to be expanded to cover a bunch of different cases. If we can generalize that relationship between supporting resources (like binary descriptions and ACLs) and the resources they support, then we don't need to check the type of object in the rebuild process.", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406858439", "createdAt": "2020-04-10T17:25:26Z", "author": {"login": "whikloj"}, "path": "fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/FedoraToOCFLObjectIndexUtilImpl.java", "diffHunk": "@@ -80,8 +83,11 @@ public void rebuild() {\n                                 fedoraIds.add(headers.getId());\n                                 if (headers.isArchivalGroup()) {\n                                     rootId.set(headers.getId());\n+                                } else if (Objects.equals(headers.getInteractionModel(),\n+                                        PERSISTENCE_FEDORA_NON_RDF_SOURCE_DESCRIPTION)) {\n+                                    rootId.set(headers.getParent());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQwNTEwMA=="}, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3MDI5MQ==", "bodyText": "I think I see what you're saying.   If we add \"objectRoot\": (true|false) to the ResourceHeaders.json, then we don't have to deal with inspecting the interaction model.", "url": "https://github.com/fcrepo/fcrepo/pull/1655#discussion_r406870291", "createdAt": "2020-04-10T17:53:18Z", "author": {"login": "dbernstein"}, "path": "fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/FedoraToOCFLObjectIndexUtilImpl.java", "diffHunk": "@@ -80,8 +83,11 @@ public void rebuild() {\n                                 fedoraIds.add(headers.getId());\n                                 if (headers.isArchivalGroup()) {\n                                     rootId.set(headers.getId());\n+                                } else if (Objects.equals(headers.getInteractionModel(),\n+                                        PERSISTENCE_FEDORA_NON_RDF_SOURCE_DESCRIPTION)) {\n+                                    rootId.set(headers.getParent());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQwNTEwMA=="}, "originalCommit": {"oid": "3b1c7c5f391dd8bdb53bcecdef3c48afb927cbd9"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1780, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}