{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5MjI5OTg0", "number": 1798, "title": "big dep upgrade", "bodyText": "Jira: https://jira.lyrasis.org/browse/FCREPO-3526\nWhat does this Pull Request do?\nUpgrades fcrepo dependencies to latest versions when possible.\nHow should this be tested?\nEverything should still work.\nInterested parties\n@fcrepo/committers", "createdAt": "2020-11-11T14:22:31Z", "url": "https://github.com/fcrepo/fcrepo/pull/1798", "merged": true, "mergeCommit": {"oid": "2e361782513d838403f08f27df58cca617c44034"}, "closed": true, "closedAt": "2020-11-12T15:01:23Z", "author": {"login": "pwinckles"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbex32gFqTUyODIxNzM0OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbzsczAFqTUyOTE1ODM0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MjE3MzQ4", "url": "https://github.com/fcrepo/fcrepo/pull/1798#pullrequestreview-528217348", "createdAt": "2020-11-11T14:24:48Z", "commit": {"oid": "e22c2f86f9a1f3f53d66e995f9968579247ac33f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNDoyNDo0OVrOHxPT4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNDoyNDo0OVrOHxPT4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM5MzEyMg==", "bodyText": "This test is removed because it appears that as a result of one of the upgrades, likely Jersey, empty path segments, //, are normalized, so parent/child and parent//child are indistinguishable to the application.", "url": "https://github.com/fcrepo/fcrepo/pull/1798#discussion_r521393122", "createdAt": "2020-11-11T14:24:49Z", "author": {"login": "pwinckles"}, "path": "fcrepo-auth-webac/src/test/java/org/fcrepo/integration/auth/webac/WebACRecipesIT.java", "diffHunk": "@@ -2084,70 +2081,6 @@ public void testBinaryAndDescriptionAllowed() throws Exception {\n \n     }\n \n-    @Test\n-    public void testRequestWithEmptyPath() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e22c2f86f9a1f3f53d66e995f9968579247ac33f"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4Njg1NjUz", "url": "https://github.com/fcrepo/fcrepo/pull/1798#pullrequestreview-528685653", "createdAt": "2020-11-12T02:14:42Z", "commit": {"oid": "e22c2f86f9a1f3f53d66e995f9968579247ac33f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMjoxNDo0MlrOHxmjhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMjoxNDo0MlrOHxmjhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTc3Mzk1Nw==", "bodyText": "It appears that HttpClient changed in the 4.5.7 release to remove empty paths by default. Can we leave this test in-place, replacing the last portion with:\n        // Ensure HttpClient does not remove empty paths\n        final RequestConfig config = RequestConfig.custom().setNormalizeUri(false).build();\n\n        // Admin bypasses ACL resolution gets 409.\n        final HttpGet getAdminRequest = getObjMethod(parent + \"//\" + child);\n        setAuth(getAdminRequest, \"fedoraAdmin\");\n        getAdminRequest.setConfig(config);\n        assertEquals(BAD_REQUEST.getStatusCode(), getStatus(getAdminRequest));\n        // User\n        final HttpGet getUserRequest = getObjMethod(parent + \"//\" + child);\n        getUserRequest.setConfig(config);\n        setAuth(getUserRequest, username);\n        assertEquals(BAD_REQUEST.getStatusCode(), getStatus(getUserRequest));\n\nAs a note, I tried this config update at the AbstractResourceIT.getObjMethod(id) level, but it breaks many of the other tests in WebACRecipesIT that include double slashes in their test fixtures.", "url": "https://github.com/fcrepo/fcrepo/pull/1798#discussion_r521773957", "createdAt": "2020-11-12T02:14:42Z", "author": {"login": "awoods"}, "path": "fcrepo-auth-webac/src/test/java/org/fcrepo/integration/auth/webac/WebACRecipesIT.java", "diffHunk": "@@ -2084,70 +2081,6 @@ public void testBinaryAndDescriptionAllowed() throws Exception {\n \n     }\n \n-    @Test\n-    public void testRequestWithEmptyPath() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM5MzEyMg=="}, "originalCommit": {"oid": "e22c2f86f9a1f3f53d66e995f9968579247ac33f"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f5406dea672babe2a97c7fc6698e156089f7be0", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/6f5406dea672babe2a97c7fc6698e156089f7be0", "committedDate": "2020-11-12T12:56:47Z", "message": "big dep upgrade"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e22c2f86f9a1f3f53d66e995f9968579247ac33f", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/e22c2f86f9a1f3f53d66e995f9968579247ac33f", "committedDate": "2020-11-11T14:20:12Z", "message": "big dep upgrade"}, "afterCommit": {"oid": "6f5406dea672babe2a97c7fc6698e156089f7be0", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/6f5406dea672babe2a97c7fc6698e156089f7be0", "committedDate": "2020-11-12T12:56:47Z", "message": "big dep upgrade"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MTU4MzQ4", "url": "https://github.com/fcrepo/fcrepo/pull/1798#pullrequestreview-529158348", "createdAt": "2020-11-12T14:46:54Z", "commit": {"oid": "6f5406dea672babe2a97c7fc6698e156089f7be0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3004, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}