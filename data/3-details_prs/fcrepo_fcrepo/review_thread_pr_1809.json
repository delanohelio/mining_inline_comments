{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyOTA5NTcy", "number": 1809, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMzozMzozN1rOE6z3SQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMzozMzo1OFrOE6z3lQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwMTAyNjAxOnYy", "diffSide": "LEFT", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraLdpIT.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMzozMzozN1rOH2Gjxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMzozMzozN1rOH2Gjxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ5MjYxNQ==", "bodyText": "Could we keep this request with the change to If-Match?", "url": "https://github.com/fcrepo/fcrepo/pull/1809#discussion_r526492615", "createdAt": "2020-11-18T23:33:37Z", "author": {"login": "awoods"}, "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraLdpIT.java", "diffHunk": "@@ -1428,25 +1424,18 @@ public void testBinaryEtags() throws IOException, InterruptedException {\n                 \"INSERT { <> <http://purl.org/dc/elements/1.1/title> 'this is a title' } WHERE {}\"));\n         assertEquals(NO_CONTENT.getStatusCode(), getStatus(httpPatch));\n \n-        // Next, check headers for the binary; they should not have changed\n-        final HttpHead head1 = new HttpHead(location);\n+        // Next, check headers for the binary; they should have changed as binaries and their descriptions are\n+        // versioned together.\n+        final HttpHead head1 = new HttpHead(binaryLocation);\n         try (final CloseableHttpResponse response = execute(head1)) {\n             binaryEtag2 = response.getFirstHeader(\"ETag\").getValue();\n             binaryLastModed2 = response.getFirstHeader(\"Last-Modified\").getValue();\n         }\n \n-        assertEquals(\"ETags should be the same\", binaryEtag1, binaryEtag2);\n-        assertEquals(\"Last-Modified should be the same\", binaryLastModed1, binaryLastModed2);\n-\n-        final HttpGet get6 = new HttpGet(location);\n-        get6.addHeader(\"If-None-Match\", binaryEtag1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1303c8068cbd04c75278a278601dbbcb02fe9066"}, "originalPosition": 101}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwMTAyNjc3OnYy", "diffSide": "LEFT", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraLdpIT.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMzozMzo1OFrOH2GkUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMzozMzo1OFrOH2GkUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ5Mjc1Mw==", "bodyText": "Could we keep this request with the change to If-Unmodified-Since?", "url": "https://github.com/fcrepo/fcrepo/pull/1809#discussion_r526492753", "createdAt": "2020-11-18T23:33:58Z", "author": {"login": "awoods"}, "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraLdpIT.java", "diffHunk": "@@ -1428,25 +1424,18 @@ public void testBinaryEtags() throws IOException, InterruptedException {\n                 \"INSERT { <> <http://purl.org/dc/elements/1.1/title> 'this is a title' } WHERE {}\"));\n         assertEquals(NO_CONTENT.getStatusCode(), getStatus(httpPatch));\n \n-        // Next, check headers for the binary; they should not have changed\n-        final HttpHead head1 = new HttpHead(location);\n+        // Next, check headers for the binary; they should have changed as binaries and their descriptions are\n+        // versioned together.\n+        final HttpHead head1 = new HttpHead(binaryLocation);\n         try (final CloseableHttpResponse response = execute(head1)) {\n             binaryEtag2 = response.getFirstHeader(\"ETag\").getValue();\n             binaryLastModed2 = response.getFirstHeader(\"Last-Modified\").getValue();\n         }\n \n-        assertEquals(\"ETags should be the same\", binaryEtag1, binaryEtag2);\n-        assertEquals(\"Last-Modified should be the same\", binaryLastModed1, binaryLastModed2);\n-\n-        final HttpGet get6 = new HttpGet(location);\n-        get6.addHeader(\"If-None-Match\", binaryEtag1);\n-        assertEquals(\"Expected 304 Not Modified\", NOT_MODIFIED.getStatusCode(), getStatus(get6));\n+        assertNotEquals(\"ETags should not be the same\", binaryEtag1, binaryEtag2);\n+        assertNotEquals(\"Last-Modified should not be the same\", binaryLastModed1, binaryLastModed2);\n \n-        final HttpGet get7 = new HttpGet(location);\n-        get7.addHeader(\"If-Modified-Since\", binaryLastModed1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1303c8068cbd04c75278a278601dbbcb02fe9066"}, "originalPosition": 107}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1725, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}