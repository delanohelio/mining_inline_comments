{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3NjgzNjEx", "number": 1612, "title": "FCREPO-3179 - POST to Create Binaries and descriptions", "bodyText": "JIRA Ticket: https://jira.lyrasis.org/browse/FCREPO-3179\nWhat does this Pull Request do?\nBinaries and their descriptions should not be created via POST.\nWhat's new?\n\nImplementation and creation of descriptions (Non-RDF source descriptions)\nFilling out and cleanup of Binary classes.\n\ngetProxyUrl and getRedirectUrl were merged since they are now identical\n\n\nSome fixes regarding committing transactions for POST\nAvoid NPE if no content disposition provided during binary creation.\n\nHow should this be tested?\nThere are updated and reenabled tests. There are not many ways to manually test this until GET is implemented for binaries.\nAdditional Notes:\nNote: digests are not evaluated yet.\nInterested parties\n@fcrepo4/committers", "createdAt": "2020-01-27T20:18:51Z", "url": "https://github.com/fcrepo/fcrepo/pull/1612", "merged": true, "mergeCommit": {"oid": "ec1de09eb0f27f66d6b150b4940e1747a4afb36c"}, "closed": true, "closedAt": "2020-01-28T00:38:11Z", "author": {"login": "bbpennel"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-kQCaAH2gAyMzY3NjgzNjExOmQ2ZDJjZDIwODNjMzMyZTFlYTM5YWQ1YzI0MTk4NWYwZjFmNmQ3MDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-k0J7gBqjI5ODM2OTM3MDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d6d2cd2083c332e1ea39ad5c241985f0f1f6d709", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/fcrepo/fcrepo/commit/d6d2cd2083c332e1ea39ad5c241985f0f1f6d709", "committedDate": "2020-01-27T22:12:20Z", "message": "Populate binary headers in resource factory. Update Binary methods to remove deprecated external binary methods and add setters. Add getExternalUrl method in place of separate proxy and redirect methods. Implement binary methods."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69d28b2bc16dc84b419d6f81ac84060fad6c85a6", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/fcrepo/fcrepo/commit/69d28b2bc16dc84b419d6f81ac84060fad6c85a6", "committedDate": "2020-01-27T22:14:40Z", "message": "Creating binary description with no content when binary is created. Add implementation of binary description"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f09fa7ad9ed7e205200755e75385fea5028995c", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/fcrepo/fcrepo/commit/2f09fa7ad9ed7e205200755e75385fea5028995c", "committedDate": "2020-01-27T22:18:08Z", "message": "Only commit during POST if short lived, and commit before retrieving resource for response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e36a02d647eb16cff8c0c32df4c99ddc7b6d7d9", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/fcrepo/fcrepo/commit/8e36a02d647eb16cff8c0c32df4c99ddc7b6d7d9", "committedDate": "2020-01-27T22:18:08Z", "message": "Add javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDI0MDY1", "url": "https://github.com/fcrepo/fcrepo/pull/1612#pullrequestreview-349024065", "createdAt": "2020-01-27T22:35:38Z", "commit": {"oid": "6c36c3eaefe4cccbe8a7869e4dcbc5aa8c21595b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjozNTozOVrOFiT34Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjozNTozOVrOFiT34Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUyMTUwNQ==", "bodyText": "Maybe create a JIRA if it doesn't already exist so we don't lose track of it?", "url": "https://github.com/fcrepo/fcrepo/pull/1612#discussion_r371521505", "createdAt": "2020-01-27T22:35:39Z", "author": {"login": "dbernstein"}, "path": "fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/models/NonRdfSourceDescriptionImpl.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.kernel.impl.models;\n+\n+import org.fcrepo.kernel.api.Transaction;\n+import org.fcrepo.kernel.api.models.FedoraResource;\n+import org.fcrepo.kernel.api.models.ResourceFactory;\n+import org.fcrepo.persistence.api.PersistentStorageSessionManager;\n+\n+/**\n+ * Implementation of a non-rdf source description\n+ *\n+ * @author bbpennel\n+ */\n+public class NonRdfSourceDescriptionImpl extends FedoraResourceImpl {\n+\n+    /**\n+     * Construct a description resource\n+     *\n+     * @param id internal identifier\n+     * @param tx transaction\n+     * @param pSessionManager session manager\n+     * @param resourceFactory resource factory\n+     */\n+    public NonRdfSourceDescriptionImpl(final String id,\n+            final Transaction tx,\n+            final PersistentStorageSessionManager pSessionManager,\n+            final ResourceFactory resourceFactory) {\n+        super(id, tx, pSessionManager, resourceFactory);\n+    }\n+\n+    @Override\n+    public FedoraResource getDescribedResource() {\n+        // TODO must return the described binary", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c36c3eaefe4cccbe8a7869e4dcbc5aa8c21595b"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89e279250157da09dfb6547264cce030c108e7a7", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/fcrepo/fcrepo/commit/89e279250157da09dfb6547264cce030c108e7a7", "committedDate": "2020-01-27T22:51:36Z", "message": "Add transaction method to check if a transaction is already committed. Add helper method for getting a resource whether or not it has committed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6c36c3eaefe4cccbe8a7869e4dcbc5aa8c21595b", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/fcrepo/fcrepo/commit/6c36c3eaefe4cccbe8a7869e4dcbc5aa8c21595b", "committedDate": "2020-01-27T20:18:37Z", "message": "Add javadoc"}, "afterCommit": {"oid": "89e279250157da09dfb6547264cce030c108e7a7", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/fcrepo/fcrepo/commit/89e279250157da09dfb6547264cce030c108e7a7", "committedDate": "2020-01-27T22:51:36Z", "message": "Add transaction method to check if a transaction is already committed. Add helper method for getting a resource whether or not it has committed"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3207, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}