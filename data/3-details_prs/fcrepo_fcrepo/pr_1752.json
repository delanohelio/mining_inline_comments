{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1MzMxODA2", "number": 1752, "title": "Support omit minimal container to restrict user rdf", "bodyText": "JIRA Ticket: https://jira.lyrasis.org/browse/FCREPO-3037\nWhat does this Pull Request do?\nAdds a check for specifically omitting a minimal container representation to exclude user RDF.\nAlso defines some LDP prefer headers in RdfLexicon for consistency and modifies some tests.\nHow should this be tested?\nWith an object like\n> curl -ufedoraAdmin:fedoraAdmin http://localhost:8080/rest/userRdf \n\n@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n@prefix fedora:  <http://fedora.info/definitions/v4/repository#> .\n@prefix ldp:  <http://www.w3.org/ns/ldp#> .\n@prefix dc:  <http://purl.org/dc/elements/1.1/> .\n\n<http://localhost:8080/rest/userRdf>\n        dc:title               \"Some title\" ;\n        dc:author              \"Some author\" ;\n        fedora:created         \"2020-09-11T17:51:46.806653Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> ;\n        fedora:lastModified    \"2020-09-11T17:51:46.806653Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> ;\n        fedora:createdBy       \"fedoraAdmin\" ;\n        fedora:lastModifiedBy  \"fedoraAdmin\" ;\n        rdf:type               ldp:BasicContainer ;\n        rdf:type               ldp:Resource ;\n        rdf:type               fedora:Resource ;\n        rdf:type               ldp:RDFSource ;\n        rdf:type               ldp:Container ;\n        rdf:type               fedora:Container ;\n        ldp:contains           <http://localhost:8080/rest/userRdf/childA> .\n\nTry to omit a minimal container and see no differences\n> curl -ufedoraAdmin:fedoraAdmin http://localhost:8080/rest/userRdf -H\"Prefer: return=representation; omit=\\\"http://www.w3.org/ns/ldp#PreferMinimalContainer\\\"\"\n\n@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n@prefix fedora:  <http://fedora.info/definitions/v4/repository#> .\n@prefix ldp:  <http://www.w3.org/ns/ldp#> .\n@prefix dc:  <http://purl.org/dc/elements/1.1/> .\n\n<http://localhost:8080/rest/userRdf>\n        dc:title               \"Some title\" ;\n        dc:author              \"Some author\" ;\n        fedora:created         \"2020-09-11T17:51:46.806653Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> ;\n        fedora:lastModified    \"2020-09-11T17:51:46.806653Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> ;\n        fedora:createdBy       \"fedoraAdmin\" ;\n        fedora:lastModifiedBy  \"fedoraAdmin\" ;\n        rdf:type               ldp:BasicContainer ;\n        rdf:type               ldp:Resource ;\n        rdf:type               fedora:Resource ;\n        rdf:type               ldp:RDFSource ;\n        rdf:type               ldp:Container ;\n        rdf:type               fedora:Container ;\n        ldp:contains           <http://localhost:8080/rest/userRdf/childA> .\n\nBut with this PR see the user RDF (dc:title and dc:author) dissappear\n> curl -ufedoraAdmin:fedoraAdmin http://localhost:8080/rest/userRdf -H\"Prefer: return=representation; omit=\\\"http://www.w3.org/ns/ldp#PreferMinimalContainer\\\"\"\n\n@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n@prefix fedora:  <http://fedora.info/definitions/v4/repository#> .\n@prefix ldp:  <http://www.w3.org/ns/ldp#> .\n\n<http://localhost:8080/rest/userRdf>\n        fedora:created         \"2020-09-11T17:51:46.806653Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> ;\n        fedora:lastModified    \"2020-09-11T17:51:46.806653Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> ;\n        fedora:createdBy       \"fedoraAdmin\" ;\n        fedora:lastModifiedBy  \"fedoraAdmin\" ;\n        rdf:type               ldp:BasicContainer ;\n        rdf:type               ldp:Resource ;\n        rdf:type               fedora:Resource ;\n        rdf:type               ldp:RDFSource ;\n        rdf:type               ldp:Container ;\n        rdf:type               fedora:Container ;\n        ldp:contains           <http://localhost:8080/rest/userRdf/childA> .\n\nInterested parties\n@fcrepo4/committers", "createdAt": "2020-09-11T18:16:43Z", "url": "https://github.com/fcrepo/fcrepo/pull/1752", "merged": true, "mergeCommit": {"oid": "f5d9d95cd2296ffbf68ba7d0e2b44032aa153df6"}, "closed": true, "closedAt": "2020-09-28T15:52:08Z", "author": {"login": "whikloj"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdH43QygH2gAyNDg1MzMxODA2OjgxNTRjMjczMDJmZGYwZjJmYjcwNDkzZGM0YmE0MDIwNjFjNDIzN2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNTswcAFqTQ5NzUxNzUzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8154c27302fdf0f2fb70493dc4ba402061c4237a", "author": {"user": {"login": "whikloj", "name": "Jared Whiklo"}}, "url": "https://github.com/fcrepo/fcrepo/commit/8154c27302fdf0f2fb70493dc4ba402061c4237a", "committedDate": "2020-09-11T17:29:45Z", "message": "Support omit minimal container to restrict user rdf"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MDI0MjAw", "url": "https://github.com/fcrepo/fcrepo/pull/1752#pullrequestreview-487024200", "createdAt": "2020-09-11T18:17:50Z", "commit": {"oid": "8154c27302fdf0f2fb70493dc4ba402061c4237a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxODoxNzo1MFrOHQpE_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxODoxNzo1MFrOHQpE_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzIxMjI4NQ==", "bodyText": "For clarity, I just moved the testing of Preference Applied header into the testGetObjectGraphMinimal to reduce the extra work.", "url": "https://github.com/fcrepo/fcrepo/pull/1752#discussion_r487212285", "createdAt": "2020-09-11T18:17:50Z", "author": {"login": "whikloj"}, "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraLdpIT.java", "diffHunk": "@@ -738,22 +739,6 @@ public void testCreateContainerWithCharset() throws IOException {\n         }\n     }\n \n-    @Test\n-    public void testGetRDFSourceWithPreferMinimal() throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8154c27302fdf0f2fb70493dc4ba402061c4237a"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3NTE3NTM5", "url": "https://github.com/fcrepo/fcrepo/pull/1752#pullrequestreview-497517539", "createdAt": "2020-09-28T13:35:20Z", "commit": {"oid": "8154c27302fdf0f2fb70493dc4ba402061c4237a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2951, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}