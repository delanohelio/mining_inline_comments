{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3OTYzMTYw", "number": 1762, "title": "cleanup exceptions", "bodyText": "JIRA Ticket: none\nWhat does this Pull Request do?\n\nStacktraces are never returned by default\nServer exceptions are always logged by default (client exceptions remain on debug only)\nRemoved custom exception constructors that do not accept an exception message. The problem with these constructors is that Java appends the exception class name to the wrapped exception message if a message is not provided. This creates a problem for Fedora's HTTP exception mapping, which tends to rely on calling getMessage().\n\nHow should this be tested?\nDo some bad stuff and make sure you like how the exceptions are handled.\nInterested parties\n@fcrepo/committers", "createdAt": "2020-10-05T16:09:52Z", "url": "https://github.com/fcrepo/fcrepo/pull/1762", "merged": true, "mergeCommit": {"oid": "184f52f690fe52baf9f06534722309daf3ed4f83"}, "closed": true, "closedAt": "2020-10-05T23:28:46Z", "author": {"login": "pwinckles"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPmCR_gH2gAyNDk3OTYzMTYwOmI0MDk0MzdlY2VmMmE5OGZiMmNlOWJmNWYzMWFjNDIxNzBiZTI5Y2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPsYZNAFqTUwMjQ4Nzk4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b409437ecef2a98fb2ce9bf5f31ac42170be29cc", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/b409437ecef2a98fb2ce9bf5f31ac42170be29cc", "committedDate": "2020-10-05T16:04:59Z", "message": "cleanup exceptions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDc4OTc1", "url": "https://github.com/fcrepo/fcrepo/pull/1762#pullrequestreview-502478975", "createdAt": "2020-10-05T23:03:38Z", "commit": {"oid": "b409437ecef2a98fb2ce9bf5f31ac42170be29cc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMzowMzozOFrOHcwkzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMzowOTowMVrOHcwrUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkxODAyOQ==", "bodyText": "This class no longer really \"implements\" ExceptionDebugLogging. Should we systematically refactor the use of ExceptionDebugLogging?\nIt seems like this PR does a partial job of that.", "url": "https://github.com/fcrepo/fcrepo/pull/1762#discussion_r499918029", "createdAt": "2020-10-05T23:03:38Z", "author": {"login": "awoods"}, "path": "fcrepo-http-commons/src/main/java/org/fcrepo/http/commons/exceptionhandlers/ExternalContentAccessExceptionMapper.java", "diffHunk": "@@ -45,7 +45,7 @@\n \n     @Override\n     public Response toResponse(final ExternalContentAccessException exception) {\n-        debugException(this, exception, LOGGER);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b409437ecef2a98fb2ce9bf5f31ac42170be29cc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkxODkzNQ==", "bodyText": "You seem to have taken a different approach with this update than the main thrust of this PR. Was that intentional?", "url": "https://github.com/fcrepo/fcrepo/pull/1762#discussion_r499918935", "createdAt": "2020-10-05T23:06:28Z", "author": {"login": "awoods"}, "path": "fcrepo-http-commons/src/main/java/org/fcrepo/http/commons/exceptionhandlers/InvalidPrefixExceptionMapper.java", "diffHunk": "@@ -44,7 +43,6 @@\n \n     @Override\n     public Response toResponse(final InvalidPrefixException e) {\n-        LOGGER.error(\"FedoraInvalidPrefixExceptionMapper caught an exception: {}\", e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b409437ecef2a98fb2ce9bf5f31ac42170be29cc"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkxOTY5Ng==", "bodyText": "Is there a rationale for which exception-mappers now have warn exceptions instead of calling debugException, and which mappers simply remove the current debug logging?", "url": "https://github.com/fcrepo/fcrepo/pull/1762#discussion_r499919696", "createdAt": "2020-10-05T23:09:01Z", "author": {"login": "awoods"}, "path": "fcrepo-http-commons/src/main/java/org/fcrepo/http/commons/exceptionhandlers/ItemNotFoundExceptionMapper.java", "diffHunk": "@@ -40,8 +41,6 @@\n \n     @Override\n     public Response toResponse(final ItemNotFoundException e) {\n-\n-        LOGGER.debug(\"Exception intercepted by ItemNotFoundExceptionMapper: {}\\n\", e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b409437ecef2a98fb2ce9bf5f31ac42170be29cc"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDg3OTg5", "url": "https://github.com/fcrepo/fcrepo/pull/1762#pullrequestreview-502487989", "createdAt": "2020-10-05T23:28:34Z", "commit": {"oid": "b409437ecef2a98fb2ce9bf5f31ac42170be29cc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2970, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}