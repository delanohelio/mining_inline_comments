{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzMzM4NTQw", "number": 1756, "title": "add metrics framework", "bodyText": "JIRA Ticket: https://jira.lyrasis.org/browse/FCREPO-3443\nWhat does this Pull Request do?\nThis PR is intended to demonstration a possible metrics integration. It uses Micrometer for collecting metrics within the app and reports them to Prometheus. Micrometer could also be configured to report to any number of alternative metrics backends. Prometheus is very powerful, though it is not the most intuitive to use.\nRegardless, if we do want to support capturing metrics, I think it would likely make sense to offer a number of different backends so that the metrics could more easily integrate with whatever service an institution is already using. For example, Graphite is also popular. However, the bigger question is in regards to if we want to use Micrometer or an alternative like Dropwizard. Micrometer is more popular currently and perhaps better designed, but Dropwizard does have some out-of-the-box Jersey integrations that Micrometer does not have.\nA word about annotations, out of the box, Micrometer only supports AspectJ for annotation based annotation based metrics collection. I do not think this is a bad thing. Spring proxy based AOP is not a good fit for annotation based metrics collection because it has serious limitations which would likely result in people adding annotations that they think would emit metrics when they are actually doing nothing.\nPrometheus works by periodically \"scraping\" metrics. I added a new endpoint, /prometheus to the webapp that exposes the metrics for Prometheus. I exposed some default JVM metrics and added two timing metrics on get and put resource requests. No other custom metrics have been added at this point.\nHow should this be tested?\nWrite the following to a file named prometheus.yml:\nscrape_configs:\n  - job_name: 'fcrepo'\n    scrape_interval: 30s \n    metrics_path: '/prometheus'\n    static_configs:\n    - targets: ['host.docker.internal:8080']\n    basic_auth:\n      username: fedoraAdmin\n      password: fedoraAdmin\nWrite the following to a file named docker-compose.yml that is in the same directory as prometheus.yml:\nversion: '3.8'\nservices:\n prometheus:\n   image: prom/prometheus\n   ports:\n     - \"9090:9090\"\n   volumes:\n     - ./prometheus.yml:/etc/prometheus/prometheus.yml\n    \n grafana:\n   image: grafana/grafana\n   ports:\n   - \"3000:3000\"\nExecute: docker-compose up\nFinally, startup Fedora with metrics enabled (-Dfcrepo.metrics.enable=true) and execute a few requests like:\ncurl -u fedoraAdmin:fedoraAdmin http://localhost:8080/rest/binary -H \"Link: <http://www.w3.org/ns/ldp#NonRDFSource>; rel=type\" -v -H \"Content-Type: text/plain\" -X PUT --data-binary \"testing\"\ncurl -u fedoraAdmin:fedoraAdmin http://localhost:8080/rest/binary\n\nNavigate to http://localhost:9090, to query the metrics directly in Prometheus or go to http://localhost:3000, if you'd like to use Grafana.\nIf you're using Grafana, here are the steps to connect it to Prometheus:\n\nLogin: admin/admin\nConfiguration -> Datasources\nAdd datasource -> Prometheus\nURL: http://prometheus:9090\nSave & Test\nCreate a new dashboard\n\n[EDIT] The following queries don't work anymore because I removed the metrics. Load this dashboard into Grafana for some example queries.\nHere are some example queries:\n\nJVM memory usage: jvm_memory_used_bytes\nAll API requests throughput: rate(fcrepo_http_request_seconds_count[1m])\nGetResource API request throughput: rate(fcrepo_http_request_seconds_count{api=\"getResource\"}[1m])\nGetResource API mean request time: rate(fcrepo_http_request_seconds_sum{api=\"getResource\"}[1m])/rate(fcrepo_http_request_seconds_count{api=\"getResource\"}[1m])\nGetResource API p99 request time: histogram_quantile(0.99, sum(rate(fcrepo_http_request_seconds_bucket{api=\"getResource\"}[1m])) by (le))\n\nInterested parties\n@fcrepo4/committers @awoods", "createdAt": "2020-09-25T19:52:49Z", "url": "https://github.com/fcrepo/fcrepo/pull/1756", "merged": true, "mergeCommit": {"oid": "1f14a2bef2c78455f25f8fdf5d34e19934d6bdd9"}, "closed": true, "closedAt": "2020-10-06T18:25:25Z", "author": {"login": "pwinckles"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMczMRgFqTQ5Njg2NzM3MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdP8ooZgFqTUwMzI0NDAzOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2ODY3Mzcx", "url": "https://github.com/fcrepo/fcrepo/pull/1756#pullrequestreview-496867371", "createdAt": "2020-09-25T21:14:15Z", "commit": {"oid": "381af15e8b0f893dd4b77f05357a36ba1332c51e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQyMToxNDoxNVrOHYSxew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQyMToxNDoxNVrOHYSxew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTIzNTQ1MQ==", "bodyText": "Ouch. No injection possibilities?! :(", "url": "https://github.com/fcrepo/fcrepo/pull/1756#discussion_r495235451", "createdAt": "2020-09-25T21:14:15Z", "author": {"login": "awoods"}, "path": "fcrepo-http-commons/src/main/java/org/fcrepo/http/commons/PrometheusMetricsServlet.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.http.commons;\n+\n+import io.prometheus.client.CollectorRegistry;\n+import io.prometheus.client.exporter.MetricsServlet;\n+import org.springframework.web.context.support.WebApplicationContextUtils;\n+\n+import javax.servlet.ServletConfig;\n+import javax.servlet.ServletException;\n+\n+/**\n+ * This class is an extension of Prometheus's MetricsServlet. It only exists because there isn't an easy way to\n+ * set the CollectorRegistry on with a Spring bean.\n+ *\n+ * @author pwinckles\n+ */\n+public class PrometheusMetricsServlet extends MetricsServlet {\n+\n+    @Override\n+    public void init(final ServletConfig config) throws ServletException {\n+        final var context = WebApplicationContextUtils\n+                .getRequiredWebApplicationContext(config.getServletContext());\n+        final var collector = context.getBean(CollectorRegistry.class);\n+\n+        try {\n+            final var field = MetricsServlet.class.getDeclaredField(\"registry\");\n+            field.setAccessible(true);\n+            field.set(this, collector);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "381af15e8b0f893dd4b77f05357a36ba1332c51e"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3NzA4OTUw", "url": "https://github.com/fcrepo/fcrepo/pull/1756#pullrequestreview-497708950", "createdAt": "2020-09-28T16:39:11Z", "commit": {"oid": "35648865c78761c7e9b8073008eff3e9b70a0582"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNjozOToxMVrOHZGyDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNjozOToxMVrOHZGyDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA4NzU2Nw==", "bodyText": "Wondering if the default should be false, will most users care about this?", "url": "https://github.com/fcrepo/fcrepo/pull/1756#discussion_r496087567", "createdAt": "2020-09-28T16:39:11Z", "author": {"login": "whikloj"}, "path": "fcrepo-configs/src/main/java/org/fcrepo/config/MetricsConfig.java", "diffHunk": "@@ -0,0 +1,101 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.fcrepo.config;\n+\n+import io.micrometer.core.instrument.Meter;\n+import io.micrometer.core.instrument.MeterRegistry;\n+import io.micrometer.core.instrument.Metrics;\n+import io.micrometer.core.instrument.binder.jvm.JvmGcMetrics;\n+import io.micrometer.core.instrument.binder.jvm.JvmMemoryMetrics;\n+import io.micrometer.core.instrument.binder.jvm.JvmThreadMetrics;\n+import io.micrometer.core.instrument.binder.system.ProcessorMetrics;\n+import io.micrometer.core.instrument.binder.system.UptimeMetrics;\n+import io.micrometer.core.instrument.config.MeterFilter;\n+import io.micrometer.core.instrument.distribution.DistributionStatisticConfig;\n+import io.micrometer.core.instrument.simple.SimpleMeterRegistry;\n+import io.micrometer.prometheus.PrometheusConfig;\n+import io.micrometer.prometheus.PrometheusMeterRegistry;\n+import io.prometheus.client.CollectorRegistry;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.context.annotation.Bean;\n+import org.springframework.context.annotation.Configuration;\n+\n+import java.time.Duration;\n+\n+/**\n+ * @author pwinckles\n+ */\n+@Configuration\n+public class MetricsConfig {\n+\n+    @Value(\"${fcrepo.metrics.enable:true}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35648865c78761c7e9b8073008eff3e9b70a0582"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDc0ODAy", "url": "https://github.com/fcrepo/fcrepo/pull/1756#pullrequestreview-502474802", "createdAt": "2020-10-05T22:53:23Z", "commit": {"oid": "18d08363be17e1628fd9f31b40d9bb419e20efb6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjo1MzoyM1rOHcwYBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjo1MzoyM1rOHcwYBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkxNDc1OQ==", "bodyText": "There are a lot of changes to this file just to add a single annotation: @Timed.\nI would suggest only reformatting code that is being directly changed.", "url": "https://github.com/fcrepo/fcrepo/pull/1756#discussion_r499914759", "createdAt": "2020-10-05T22:53:23Z", "author": {"login": "awoods"}, "path": "fcrepo-http-api/src/main/java/org/fcrepo/http/api/FedoraLdp.java", "diffHunk": "@@ -17,113 +17,112 @@\n  */\n package org.fcrepo.http.api;\n \n+import com.google.common.annotations.VisibleForTesting;\n+import com.google.common.base.Splitter;\n+import com.google.common.collect.ImmutableList;\n+import io.micrometer.core.annotation.Timed;\n+import org.apache.commons.io.IOUtils;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.jena.rdf.model.Model;\n+import org.apache.jena.rdf.model.Resource;\n+import org.fcrepo.http.commons.domain.PATCH;\n+import org.fcrepo.kernel.api.FedoraTypes;\n+import org.fcrepo.kernel.api.exception.AccessDeniedException;\n+import org.fcrepo.kernel.api.exception.CannotCreateResourceException;\n+import org.fcrepo.kernel.api.exception.InvalidChecksumException;\n+import org.fcrepo.kernel.api.exception.MalformedRdfException;\n+import org.fcrepo.kernel.api.exception.MementoDatetimeFormatException;\n+import org.fcrepo.kernel.api.exception.PathNotFoundException;\n+import org.fcrepo.kernel.api.exception.PathNotFoundRuntimeException;\n+import org.fcrepo.kernel.api.exception.UnsupportedAlgorithmException;\n+import org.fcrepo.kernel.api.identifiers.FedoraId;\n+import org.fcrepo.kernel.api.models.Binary;\n+import org.fcrepo.kernel.api.models.Container;\n+import org.fcrepo.kernel.api.models.ExternalContent;\n+import org.fcrepo.kernel.api.models.FedoraResource;\n+import org.fcrepo.kernel.api.models.NonRdfSourceDescription;\n+import org.fcrepo.kernel.api.services.FixityService;\n+import org.fcrepo.kernel.api.services.ReplaceBinariesService;\n+import org.fcrepo.kernel.api.utils.ContentDigest;\n+import org.glassfish.jersey.media.multipart.ContentDisposition;\n+import org.slf4j.Logger;\n+import org.springframework.context.annotation.Scope;\n+\n+import javax.inject.Inject;\n+import javax.ws.rs.BadRequestException;\n+import javax.ws.rs.ClientErrorException;\n+import javax.ws.rs.Consumes;\n+import javax.ws.rs.DELETE;\n+import javax.ws.rs.GET;\n+import javax.ws.rs.HEAD;\n+import javax.ws.rs.HeaderParam;\n+import javax.ws.rs.OPTIONS;\n+import javax.ws.rs.POST;\n+import javax.ws.rs.PUT;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.PathParam;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.core.HttpHeaders;\n+import javax.ws.rs.core.Link;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.core.UriBuilderException;\n+import javax.ws.rs.core.Variant.VariantListBuilder;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.URI;\n+import java.time.Instant;\n+import java.time.format.DateTimeParseException;\n+import java.util.Collection;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n import static com.google.common.base.Strings.isNullOrEmpty;\n import static java.nio.charset.StandardCharsets.UTF_8;\n import static javax.ws.rs.core.HttpHeaders.CONTENT_DISPOSITION;\n import static javax.ws.rs.core.HttpHeaders.CONTENT_TYPE;\n import static javax.ws.rs.core.HttpHeaders.LINK;\n import static javax.ws.rs.core.HttpHeaders.LOCATION;\n import static javax.ws.rs.core.MediaType.WILDCARD;\n+import static javax.ws.rs.core.Response.Status.BAD_REQUEST;\n+import static javax.ws.rs.core.Response.Status.FOUND;\n+import static javax.ws.rs.core.Response.Status.METHOD_NOT_ALLOWED;\n+import static javax.ws.rs.core.Response.Status.NOT_ACCEPTABLE;\n import static javax.ws.rs.core.Response.noContent;\n import static javax.ws.rs.core.Response.notAcceptable;\n import static javax.ws.rs.core.Response.ok;\n import static javax.ws.rs.core.Response.status;\n import static javax.ws.rs.core.Response.temporaryRedirect;\n-import static javax.ws.rs.core.Response.Status.BAD_REQUEST;\n-import static javax.ws.rs.core.Response.Status.FOUND;\n-import static javax.ws.rs.core.Response.Status.METHOD_NOT_ALLOWED;\n-import static javax.ws.rs.core.Response.Status.NOT_ACCEPTABLE;\n import static org.apache.commons.lang3.StringUtils.isBlank;\n import static org.apache.http.HttpStatus.SC_BAD_REQUEST;\n import static org.apache.jena.rdf.model.ResourceFactory.createResource;\n import static org.apache.jena.riot.WebContent.contentTypeSPARQLUpdate;\n+import static org.fcrepo.http.commons.domain.RDFMediaType.APPLICATION_OCTET_STREAM_TYPE;\n import static org.fcrepo.http.commons.domain.RDFMediaType.JSON_LD;\n import static org.fcrepo.http.commons.domain.RDFMediaType.N3_ALT2_WITH_CHARSET;\n import static org.fcrepo.http.commons.domain.RDFMediaType.N3_WITH_CHARSET;\n import static org.fcrepo.http.commons.domain.RDFMediaType.NTRIPLES;\n import static org.fcrepo.http.commons.domain.RDFMediaType.RDF_XML;\n import static org.fcrepo.http.commons.domain.RDFMediaType.TEXT_HTML_WITH_CHARSET;\n import static org.fcrepo.http.commons.domain.RDFMediaType.TEXT_PLAIN_WITH_CHARSET;\n+import static org.fcrepo.http.commons.domain.RDFMediaType.TURTLE_TYPE;\n import static org.fcrepo.http.commons.domain.RDFMediaType.TURTLE_WITH_CHARSET;\n import static org.fcrepo.http.commons.domain.RDFMediaType.TURTLE_X;\n-import static org.fcrepo.http.commons.domain.RDFMediaType.TURTLE_TYPE;\n-import static org.fcrepo.http.commons.domain.RDFMediaType.APPLICATION_OCTET_STREAM_TYPE;\n-\n import static org.fcrepo.kernel.api.RdfLexicon.ARCHIVAL_GROUP;\n import static org.fcrepo.kernel.api.RdfLexicon.INTERACTION_MODEL_RESOURCES;\n import static org.fcrepo.kernel.api.RdfLexicon.VERSIONED_RESOURCE;\n import static org.fcrepo.kernel.api.services.VersionService.MEMENTO_RFC_1123_FORMATTER;\n import static org.slf4j.LoggerFactory.getLogger;\n \n-import java.io.IOException;\n-import java.io.InputStream;\n-import java.net.URI;\n-import java.time.Instant;\n-import java.time.format.DateTimeParseException;\n-import java.util.Collection;\n-import java.util.HashMap;\n-import java.util.List;\n-import java.util.Map;\n-import java.util.stream.Collectors;\n-\n-import javax.inject.Inject;\n-import javax.ws.rs.BadRequestException;\n-import javax.ws.rs.ClientErrorException;\n-import javax.ws.rs.Consumes;\n-import javax.ws.rs.DELETE;\n-import javax.ws.rs.GET;\n-import javax.ws.rs.HEAD;\n-import javax.ws.rs.HeaderParam;\n-import javax.ws.rs.OPTIONS;\n-import javax.ws.rs.POST;\n-import javax.ws.rs.PUT;\n-import javax.ws.rs.Path;\n-import javax.ws.rs.PathParam;\n-import javax.ws.rs.Produces;\n-import javax.ws.rs.core.HttpHeaders;\n-import javax.ws.rs.core.Link;\n-import javax.ws.rs.core.MediaType;\n-import javax.ws.rs.core.Response;\n-import javax.ws.rs.core.UriBuilderException;\n-import javax.ws.rs.core.Variant.VariantListBuilder;\n-\n-import org.apache.commons.io.IOUtils;\n-import org.apache.commons.lang3.StringUtils;\n-import org.apache.jena.rdf.model.Model;\n-import org.apache.jena.rdf.model.Resource;\n-import org.fcrepo.http.commons.domain.PATCH;\n-import org.fcrepo.kernel.api.FedoraTypes;\n-import org.fcrepo.kernel.api.exception.AccessDeniedException;\n-import org.fcrepo.kernel.api.exception.CannotCreateResourceException;\n-import org.fcrepo.kernel.api.exception.InvalidChecksumException;\n-import org.fcrepo.kernel.api.exception.MalformedRdfException;\n-import org.fcrepo.kernel.api.exception.MementoDatetimeFormatException;\n-import org.fcrepo.kernel.api.exception.PathNotFoundException;\n-import org.fcrepo.kernel.api.exception.PathNotFoundRuntimeException;\n-import org.fcrepo.kernel.api.exception.UnsupportedAlgorithmException;\n-import org.fcrepo.kernel.api.identifiers.FedoraId;\n-import org.fcrepo.kernel.api.models.Binary;\n-import org.fcrepo.kernel.api.models.Container;\n-import org.fcrepo.kernel.api.models.ExternalContent;\n-import org.fcrepo.kernel.api.models.FedoraResource;\n-import org.fcrepo.kernel.api.models.NonRdfSourceDescription;\n-import org.fcrepo.kernel.api.services.FixityService;\n-import org.fcrepo.kernel.api.services.ReplaceBinariesService;\n-import org.fcrepo.kernel.api.utils.ContentDigest;\n-import org.glassfish.jersey.media.multipart.ContentDisposition;\n-import org.slf4j.Logger;\n-import org.springframework.context.annotation.Scope;\n-\n-import com.google.common.annotations.VisibleForTesting;\n-import com.google.common.base.Splitter;\n-import com.google.common.collect.ImmutableList;\n-\n /**\n  * @author cabeer\n  * @author ajs6f\n  * @since 9/25/14\n  */\n \n+@Timed", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18d08363be17e1628fd9f31b40d9bb419e20efb6"}, "originalPosition": 179}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f98dda24bd855e3865b8ec63a43d822ee59cb7d4", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/f98dda24bd855e3865b8ec63a43d822ee59cb7d4", "committedDate": "2020-10-06T12:32:26Z", "message": "remove earlier formatting changes"}, "afterCommit": {"oid": "ef5d6d7c03ea2dc9340709fac83112de1e0c07e8", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/ef5d6d7c03ea2dc9340709fac83112de1e0c07e8", "committedDate": "2020-10-06T12:39:09Z", "message": "remove earlier formatting changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3adf7c24bc6baf67195c83fba739c620e2a4d72", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/f3adf7c24bc6baf67195c83fba739c620e2a4d72", "committedDate": "2020-10-06T13:36:50Z", "message": "add metrics framework"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c9eaf86bc08effb1a6791f6f15e61ce6424b8bf", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/0c9eaf86bc08effb1a6791f6f15e61ce6424b8bf", "committedDate": "2020-10-06T13:36:50Z", "message": "added jersey intergration and fixed one-click"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d47537f76fb8c11375ebd6718541b6501196a36", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/8d47537f76fb8c11375ebd6718541b6501196a36", "committedDate": "2020-10-06T13:36:51Z", "message": "default metrics to disabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c8166254c49a369f14ef476cb01c12b29f6385c", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/1c8166254c49a369f14ef476cb01c12b29f6385c", "committedDate": "2020-10-06T13:36:51Z", "message": "remove earlier formatting changes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef5d6d7c03ea2dc9340709fac83112de1e0c07e8", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/ef5d6d7c03ea2dc9340709fac83112de1e0c07e8", "committedDate": "2020-10-06T12:39:09Z", "message": "remove earlier formatting changes"}, "afterCommit": {"oid": "1c8166254c49a369f14ef476cb01c12b29f6385c", "author": {"user": {"login": "pwinckles", "name": "Peter Winckles"}}, "url": "https://github.com/fcrepo/fcrepo/commit/1c8166254c49a369f14ef476cb01c12b29f6385c", "committedDate": "2020-10-06T13:36:51Z", "message": "remove earlier formatting changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMjQ0MDM4", "url": "https://github.com/fcrepo/fcrepo/pull/1756#pullrequestreview-503244038", "createdAt": "2020-10-06T18:24:47Z", "commit": {"oid": "1c8166254c49a369f14ef476cb01c12b29f6385c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2960, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}