{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3OTU3Njky", "number": 450, "title": "Added options bags to storage container APIs", "bodyText": "", "createdAt": "2020-11-09T18:32:44Z", "url": "https://github.com/Azure/azure-sdk-for-android/pull/450", "merged": true, "mergeCommit": {"oid": "9b6d9b14ba73b7e51adf0daa17a4f8995fc5b8fc"}, "closed": true, "closedAt": "2020-11-17T20:41:45Z", "author": {"login": "gapra-msft"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABda5FyzgH2gAyNTE3OTU3NjkyOjVmYjk4OWU3ZDk4MjYxY2RjZDk4MjlkZjc3ZjhhMzAwOGUzNjdmODM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddNAbEAFqTUzMTgzNjUyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5fb989e7d98261cdcd9829df77f8a3008e367f83", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/5fb989e7d98261cdcd9829df77f8a3008e367f83", "committedDate": "2020-11-09T18:30:11Z", "message": "Added options bags for container create"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4567f66606cf8c4d072f7efe1fa0eaf46e495939", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/4567f66606cf8c4d072f7efe1fa0eaf46e495939", "committedDate": "2020-11-09T18:32:08Z", "message": "Container create options bags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3aac974ea32530b7d4944af846532ebc661a553", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/c3aac974ea32530b7d4944af846532ebc661a553", "committedDate": "2020-11-09T18:50:05Z", "message": "Added some checks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d43772fcb33d47f8730786514137ca6854a490e0", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/d43772fcb33d47f8730786514137ca6854a490e0", "committedDate": "2020-11-09T19:18:48Z", "message": "Added docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NjE4MzAw", "url": "https://github.com/Azure/azure-sdk-for-android/pull/450#pullrequestreview-526618300", "createdAt": "2020-11-09T20:13:56Z", "commit": {"oid": "d43772fcb33d47f8730786514137ca6854a490e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDoxMzo1N1rOHv_53Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDoxMzo1N1rOHv_53Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA5MjEyNQ==", "bodyText": "probably its wip, but just want to point Javadoc is in-complete for ctr, getters and setters", "url": "https://github.com/Azure/azure-sdk-for-android/pull/450#discussion_r520092125", "createdAt": "2020-11-09T20:13:57Z", "author": {"login": "anuchandy"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/options/ContainerCreateOptions.java", "diffHunk": "@@ -0,0 +1,115 @@\n+package com.azure.android.storage.blob.options;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+\n+import com.azure.android.core.annotation.Fluent;\n+import com.azure.android.core.util.CancellationToken;\n+import com.azure.android.storage.blob.models.PublicAccessType;\n+\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * Extended options that may be passed when creating a container.\n+ */\n+@Fluent\n+public class ContainerCreateOptions {\n+\n+    private final String containerName;\n+    private Map<String, String> metadata;\n+    private PublicAccessType publicAccessType;\n+    private Integer timeout;\n+    private CancellationToken cancellationToken;\n+\n+    /**\n+     * @param containerName The container name.\n+     */\n+    public ContainerCreateOptions(@NonNull String containerName) {\n+        Objects.requireNonNull(containerName);\n+        this.containerName  = containerName;\n+    }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d43772fcb33d47f8730786514137ca6854a490e0"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d64c9617e05eaae8f805295208b1e9e6018e002", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/7d64c9617e05eaae8f805295208b1e9e6018e002", "committedDate": "2020-11-09T22:46:08Z", "message": "Added get Container properties and delete container options bags"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NzMzMzky", "url": "https://github.com/Azure/azure-sdk-for-android/pull/450#pullrequestreview-526733392", "createdAt": "2020-11-09T23:21:25Z", "commit": {"oid": "7d64c9617e05eaae8f805295208b1e9e6018e002"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMzoyMToyNlrOHwFgaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMzoyMToyNlrOHwFgaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDE4MzkxMw==", "bodyText": "is Void technically non-null? I'm not sure", "url": "https://github.com/Azure/azure-sdk-for-android/pull/450#discussion_r520183913", "createdAt": "2020-11-09T23:21:26Z", "author": {"login": "gapra-msft"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobClient.java", "diffHunk": "@@ -91,38 +95,85 @@ public String getBlobServiceUrl() {\n     /**\n      * Creates a new container within a storage account. If a container with the same name already exists, the operation\n      * fails.\n+     * For more information, see the <a href=\"https://docs.microsoft.com/rest/api/storageservices/create-container\">Azure Docs</a>.\n      *\n      * @param containerName The container name.\n      */\n-    public Void createContainer(String containerName) {\n-        return storageBlobServiceClient.createContainer(containerName);\n+    @NonNull", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d64c9617e05eaae8f805295208b1e9e6018e002"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NzMzNjY3", "url": "https://github.com/Azure/azure-sdk-for-android/pull/450#pullrequestreview-526733667", "createdAt": "2020-11-09T23:22:02Z", "commit": {"oid": "7d64c9617e05eaae8f805295208b1e9e6018e002"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMzoyMjowM1rOHwFhQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMzoyMjowM1rOHwFhQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDE4NDEzMQ==", "bodyText": "Should we check that only lease id is set here?", "url": "https://github.com/Azure/azure-sdk-for-android/pull/450#discussion_r520184131", "createdAt": "2020-11-09T23:22:03Z", "author": {"login": "gapra-msft"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobClient.java", "diffHunk": "@@ -91,38 +95,85 @@ public String getBlobServiceUrl() {\n     /**\n      * Creates a new container within a storage account. If a container with the same name already exists, the operation\n      * fails.\n+     * For more information, see the <a href=\"https://docs.microsoft.com/rest/api/storageservices/create-container\">Azure Docs</a>.\n      *\n      * @param containerName The container name.\n      */\n-    public Void createContainer(String containerName) {\n-        return storageBlobServiceClient.createContainer(containerName);\n+    @NonNull\n+    public Void createContainer(@NonNull String containerName) {\n+        return this.createContainerWithResponse(new ContainerCreateOptions(containerName)).getValue();\n     }\n \n     /**\n      * Creates a new container within a storage account. If a container with the same name already exists, the operation\n      * fails.\n+     * For more information, see the <a href=\"https://docs.microsoft.com/rest/api/storageservices/create-container\">Azure Docs</a>.\n      *\n-     * @param containerName     The container name.\n-     * @param timeout           The timeout parameter is expressed in seconds. For more information, see\n-     *                          &lt;a href=\"https://docs.microsoft.com/en-us/rest/api/storageservices/setting-timeouts-for-blob-service-operations\"&gt;Setting Timeouts for Blob Service Operations.&lt;/a&gt;.\n-     * @param metadata          Metadata to associate with the container.\n-     * @param publicAccessType  Specifies how the data in this container is available to the public. See the\n-     *                          x-ms-blob-public-access header in the Azure Docs for more information. Pass null\n-     *                          for no public access.\n-     * @param cancellationToken The token to request cancellation.\n+     * @param options {@link ContainerCreateOptions}\n      * @return The response information returned from the server when creating a container.\n      */\n-    public ContainerCreateResponse createContainerWithRestResponse(String containerName,\n-                                                                   Integer timeout,\n-                                                                   Map<String, String> metadata,\n-                                                                   PublicAccessType publicAccessType,\n-                                                                   CancellationToken cancellationToken) {\n+    @NonNull\n+    public ContainerCreateResponse createContainerWithResponse(@NonNull ContainerCreateOptions options) {\n+        Objects.requireNonNull(options);\n+        return storageBlobServiceClient.createContainerWithRestResponse(options.getContainerName(),\n+            options.getTimeout(), options.getMetadata(), options.getPublicAccessType(), options.getCancellationToken());\n+    }\n \n-        return storageBlobServiceClient.createContainerWithRestResponse(containerName,\n-            timeout,\n-            metadata,\n-            publicAccessType,\n-            cancellationToken);\n+    /**\n+     * Marks the specified container for deletion. The container and any blobs contained within it are later deleted\n+     * during garbage collection. For more information, see the\n+     * <a href=\"https://docs.microsoft.com/rest/api/storageservices/delete-container\">Azure Docs</a>.\n+     *\n+     * @param containerName The container name.\n+     */\n+    @NonNull\n+    public Void deleteContainer(@NonNull String containerName) {\n+        return this.deleteContainerWithResponse(new ContainerDeleteOptions(containerName)).getValue();\n+    }\n+\n+    /**\n+     * Marks the specified container for deletion. The container and any blobs contained within it are later deleted\n+     * during garbage collection. For more information, see the\n+     * <a href=\"https://docs.microsoft.com/rest/api/storageservices/delete-container\">Azure Docs</a>.\n+     *\n+     * @param options {@link ContainerDeleteOptions}\n+     * @return The response information returned from the server when deleting a container.\n+     */\n+    @NonNull\n+    public ContainerDeleteResponse deleteContainerWithResponse(@NonNull ContainerDeleteOptions options) {\n+        Objects.requireNonNull(options);\n+        return storageBlobServiceClient.deleteContainerWithRestResponse(options.getContainerName(),\n+            options.getTimeout(), options.getRequestConditions(), options.getCancellationToken());\n+    }\n+\n+    /**\n+     * Returns the container's metadata and system properties. For more information, see the\n+     * <a href=\"https://docs.microsoft.com/rest/api/storageservices/get-container-metadata\">Azure Docs</a>.\n+     *\n+     * @param containerName The container name.\n+     * @return The container's properties.\n+     */\n+    /* TODO: (gapra) This should probably return a handwrapped type? */\n+    @NonNull\n+    public ContainerGetPropertiesHeaders getContainerProperties(@NonNull String containerName) {\n+        return this.getContainerPropertiesWithResponse(new ContainerGetPropertiesOptions(containerName)).getDeserializedHeaders();\n+    }\n+\n+    /**\n+     * Returns the container's metadata and system properties. For more information, see the\n+     * <a href=\"https://docs.microsoft.com/rest/api/storageservices/get-container-metadata\">Azure Docs</a>.\n+     *\n+     * @param options {@link ContainerGetPropertiesOptions}\n+     * @return The response information returned from the server when getting a container's properties.\n+     */\n+    @NonNull\n+    public ContainerGetPropertiesResponse getContainerPropertiesWithResponse(@NonNull ContainerGetPropertiesOptions options) {\n+        Objects.requireNonNull(options);\n+        BlobRequestConditions requestConditions = options.getRequestConditions() == null ? new BlobRequestConditions()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d64c9617e05eaae8f805295208b1e9e6018e002"}, "originalPosition": 132}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84c3a33bc66ef01ea281c04672e3c09204a0274c", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/84c3a33bc66ef01ea281c04672e3c09204a0274c", "committedDate": "2020-11-10T22:05:32Z", "message": "Updated some request conditions related code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "251898168da87fdeebed57440fd4a5d3f11e8be3", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/251898168da87fdeebed57440fd4a5d3f11e8be3", "committedDate": "2020-11-10T22:06:28Z", "message": "Removed comments on ignore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c083a67fe75bb601259386b97d2598cd25d3985", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/6c083a67fe75bb601259386b97d2598cd25d3985", "committedDate": "2020-11-10T22:12:07Z", "message": "Annotated as nullable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwNDYwNjky", "url": "https://github.com/Azure/azure-sdk-for-android/pull/450#pullrequestreview-530460692", "createdAt": "2020-11-13T22:36:47Z", "commit": {"oid": "6c083a67fe75bb601259386b97d2598cd25d3985"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QyMjozNjo0N1rOHzBy5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QyMjozNjo0N1rOHzBy5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI2ODgzNw==", "bodyText": "Why expand the options here rather than in the Intern method?", "url": "https://github.com/Azure/azure-sdk-for-android/pull/450#discussion_r523268837", "createdAt": "2020-11-13T22:36:47Z", "author": {"login": "rickle-msft"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobAsyncClient.java", "diffHunk": "@@ -259,43 +262,89 @@ public void cancel(Context context, long transferId) {\n     /**\n      * Creates a new container within a storage account. If a container with the same name already exists, the operation\n      * fails.\n+     * For more information, see the <a href=\"https://docs.microsoft.com/rest/api/storageservices/create-container\">Azure Docs</a>.\n      *\n      * @param containerName The container name.\n      * @param callback      Callback that receives the response.\n      */\n-    public void createContainer(String containerName,\n-                                CallbackWithHeader<Void, ContainerCreateHeaders> callback) {\n-        storageBlobServiceClient.createContainer(containerName, callback);\n+    public void createContainer(@NonNull String containerName,\n+                                @Nullable CallbackWithHeader<Void, ContainerCreateHeaders> callback) {\n+        this.createContainer(new ContainerCreateOptions(containerName), callback);\n     }\n \n     /**\n      * Creates a new container within a storage account. If a container with the same name already exists, the operation\n      * fails.\n+     * For more information, see the <a href=\"https://docs.microsoft.com/rest/api/storageservices/create-container\">Azure Docs</a>.\n      *\n-     * @param containerName     The container name.\n-     * @param timeout           The timeout parameter is expressed in seconds. For more information, see\n-     *                          &lt;a href=\"https://docs.microsoft.com/en-us/rest/api/storageservices/setting-timeouts-for-blob-service-operations\"&gt;Setting Timeouts for Blob Service Operations.&lt;/a&gt;.\n-     * @param metadata          Metadata to associate with the container.\n-     * @param publicAccessType  Specifies how the data in this container is available to the public. See the\n-     *                          x-ms-blob-public-access header in the Azure Docs for more information. Pass null\n-     *                          for no public access.\n-     * @param cancellationToken The token to request cancellation.\n-     * @param callback          Callback that receives the response.\n-     * @return The response information returned from the server when creating a container.\n+     * @param options {@link ContainerCreateOptions}\n+     * @param callback Callback that receives the response.\n      */\n-    public void createContainer(String containerName,\n-                                Integer timeout,\n-                                Map<String, String> metadata,\n-                                PublicAccessType publicAccessType,\n-                                CancellationToken cancellationToken,\n-                                CallbackWithHeader<Void, ContainerCreateHeaders> callback) {\n+    public void createContainer(@NonNull ContainerCreateOptions options,\n+                                @Nullable CallbackWithHeader<Void, ContainerCreateHeaders> callback) {\n+        Objects.requireNonNull(options);\n+        storageBlobServiceClient.createContainer(options.getContainerName(), options.getTimeout(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c083a67fe75bb601259386b97d2598cd25d3985"}, "originalPosition": 71}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwNDYyMTE3", "url": "https://github.com/Azure/azure-sdk-for-android/pull/450#pullrequestreview-530462117", "createdAt": "2020-11-13T22:40:27Z", "commit": {"oid": "6c083a67fe75bb601259386b97d2598cd25d3985"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxODM2NTIw", "url": "https://github.com/Azure/azure-sdk-for-android/pull/450#pullrequestreview-531836520", "createdAt": "2020-11-16T22:23:20Z", "commit": {"oid": "6c083a67fe75bb601259386b97d2598cd25d3985"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjoyMzoyMFrOH0XoaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjoyMzoyMFrOH0XoaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY3NTE3Nw==", "bodyText": "Is it a common pattern to name the options bags with ? I see we have other types like ListBlobsOptions so I'm not sure what's common in Java land.", "url": "https://github.com/Azure/azure-sdk-for-android/pull/450#discussion_r524675177", "createdAt": "2020-11-16T22:23:20Z", "author": {"login": "vcolin7"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobAsyncClient.java", "diffHunk": "@@ -44,14 +45,16 @@\n import com.azure.android.storage.blob.models.ContainerCreateHeaders;\n import com.azure.android.storage.blob.models.ContainerDeleteHeaders;\n import com.azure.android.storage.blob.models.ContainerGetPropertiesHeaders;\n-import com.azure.android.storage.blob.models.ListBlobFlatSegmentHeaders;\n import com.azure.android.storage.blob.models.CpkInfo;\n import com.azure.android.storage.blob.models.DeleteSnapshotsOptionType;\n+import com.azure.android.storage.blob.models.ListBlobFlatSegmentHeaders;\n import com.azure.android.storage.blob.models.ListBlobsFlatSegmentResponse;\n import com.azure.android.storage.blob.models.ListBlobsIncludeItem;\n import com.azure.android.storage.blob.models.ListBlobsOptions;\n import com.azure.android.storage.blob.models.RehydratePriority;\n-import com.azure.android.storage.blob.models.PublicAccessType;\n+import com.azure.android.storage.blob.options.ContainerCreateOptions;\n+import com.azure.android.storage.blob.options.ContainerDeleteOptions;\n+import com.azure.android.storage.blob.options.ContainerGetPropertiesOptions;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c083a67fe75bb601259386b97d2598cd25d3985"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1210, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}