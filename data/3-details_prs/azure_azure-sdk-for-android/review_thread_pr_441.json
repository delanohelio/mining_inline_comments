{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzMjMxNTMz", "number": 441, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQyMzoxNjozNlrOEz_Ivg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQyMzoxNjo1NVrOEz_I5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyOTQ3MjYyOnYy", "diffSide": "RIGHT", "path": "sdk/storage/azure-storage-blob/src/test/java/com/azure/android/storage/blob/BlobTest.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQyMzoxNjozNlrOHriwdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxOTo1NzoxOVrOHsTk3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQyMDI3Ng==", "bodyText": "Should we check that the header's contents are correct like we check the body contents in rawRownloadAsync()?", "url": "https://github.com/Azure/azure-sdk-for-android/pull/441#discussion_r515420276", "createdAt": "2020-10-30T23:16:36Z", "author": {"login": "vcolin7"}, "path": "sdk/storage/azure-storage-blob/src/test/java/com/azure/android/storage/blob/BlobTest.java", "diffHunk": "@@ -288,6 +290,32 @@ public void getPropertiesError() {\n         assertEquals(404, ex.getStatusCode());\n     }\n \n+    @Test\n+    public void getPropertiesAsync() {\n+        // Setup\n+        CountDownLatch latch = new CountDownLatch(1);\n+\n+        // When\n+        asyncClient.getBlobProperties(containerName, blobName, new CallbackWithHeader<Void, BlobGetPropertiesHeaders>() {\n+                @Override\n+                public void onSuccess(Void result, BlobGetPropertiesHeaders header, Response response) {\n+                    assertEquals(200, response.code());\n+                    latch.countDown();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5058abf79eab119a11ab8dea13c1e24ff6e7300"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjIwOTc3NQ==", "bodyText": "I think we have sync tests that validate the header values, and that logic should be shared between sync and async, so we didn't feel the need to test that redundantly. The async test is more to check that the request goes in and out correctly. Let me know what you think about that approach.", "url": "https://github.com/Azure/azure-sdk-for-android/pull/441#discussion_r516209775", "createdAt": "2020-11-02T19:37:24Z", "author": {"login": "rickle-msft"}, "path": "sdk/storage/azure-storage-blob/src/test/java/com/azure/android/storage/blob/BlobTest.java", "diffHunk": "@@ -288,6 +290,32 @@ public void getPropertiesError() {\n         assertEquals(404, ex.getStatusCode());\n     }\n \n+    @Test\n+    public void getPropertiesAsync() {\n+        // Setup\n+        CountDownLatch latch = new CountDownLatch(1);\n+\n+        // When\n+        asyncClient.getBlobProperties(containerName, blobName, new CallbackWithHeader<Void, BlobGetPropertiesHeaders>() {\n+                @Override\n+                public void onSuccess(Void result, BlobGetPropertiesHeaders header, Response response) {\n+                    assertEquals(200, response.code());\n+                    latch.countDown();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQyMDI3Ng=="}, "originalCommit": {"oid": "a5058abf79eab119a11ab8dea13c1e24ff6e7300"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjIyMDEyNw==", "bodyText": "Sounds good to me as long as we have good coverage :)", "url": "https://github.com/Azure/azure-sdk-for-android/pull/441#discussion_r516220127", "createdAt": "2020-11-02T19:57:19Z", "author": {"login": "vcolin7"}, "path": "sdk/storage/azure-storage-blob/src/test/java/com/azure/android/storage/blob/BlobTest.java", "diffHunk": "@@ -288,6 +290,32 @@ public void getPropertiesError() {\n         assertEquals(404, ex.getStatusCode());\n     }\n \n+    @Test\n+    public void getPropertiesAsync() {\n+        // Setup\n+        CountDownLatch latch = new CountDownLatch(1);\n+\n+        // When\n+        asyncClient.getBlobProperties(containerName, blobName, new CallbackWithHeader<Void, BlobGetPropertiesHeaders>() {\n+                @Override\n+                public void onSuccess(Void result, BlobGetPropertiesHeaders header, Response response) {\n+                    assertEquals(200, response.code());\n+                    latch.countDown();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQyMDI3Ng=="}, "originalCommit": {"oid": "a5058abf79eab119a11ab8dea13c1e24ff6e7300"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyOTQ3MzAyOnYy", "diffSide": "RIGHT", "path": "sdk/storage/azure-storage-blob/src/test/java/com/azure/android/storage/blob/BlobTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQyMzoxNjo1NVrOHriwrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQyMzoxNjo1NVrOHriwrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQyMDMzNA==", "bodyText": "Should we check that the result's contents are correct like we check the body contents in rawRownloadAsync()?", "url": "https://github.com/Azure/azure-sdk-for-android/pull/441#discussion_r515420334", "createdAt": "2020-10-30T23:16:55Z", "author": {"login": "vcolin7"}, "path": "sdk/storage/azure-storage-blob/src/test/java/com/azure/android/storage/blob/BlobTest.java", "diffHunk": "@@ -929,4 +1042,30 @@ public void onFailure(Throwable throwable, Response response) {\n     }\n \n     // setTagsError tested in AC fail as it throws BlobStorageException\n+\n+    @Test\n+    public void getTagsAsync() {\n+        // Setup\n+        CountDownLatch latch = new CountDownLatch(1);\n+\n+        // When\n+        asyncClient.getBlobTags(containerName, blobName, new CallbackWithHeader<Map<String, String>, BlobGetTagsHeaders>() {\n+                @Override\n+                public void onSuccess(Map<String, String> result, BlobGetTagsHeaders header, Response response) {\n+                    assertEquals(200, response.code());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5058abf79eab119a11ab8dea13c1e24ff6e7300"}, "originalPosition": 169}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2213, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}