{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5Nzk5NDkx", "number": 201, "title": "User agent interceptor fix", "bodyText": "Thanks for taking the time to contribute. Please take a moment to fill out the information below.\nFixes #199 & #200.\nChanges Proposed in this pull request:\n\nChanged the intercept method to use header() instead of addHeader() so we only have one header named User-Agent at all times.\nAdded checks and logic to make sure a user-provideed Application ID does not contain spaces and is not longer than 24 characters.\nMade additional changes to ensure user-provided values sdkName and sdkVersion are not included in the User Agent string when null.", "createdAt": "2020-02-25T21:02:26Z", "url": "https://github.com/Azure/azure-sdk-for-android/pull/201", "merged": true, "mergeCommit": {"oid": "47b59152069c6de4bf18f18226dae6c6c20e941e"}, "closed": true, "closedAt": "2020-03-02T19:40:21Z", "author": {"login": "vcolin7"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcH45vLAFqTM2NDQ1Njc4OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJy-vZgBqjMwODkzNTYyODY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NDU2Nzg4", "url": "https://github.com/Azure/azure-sdk-for-android/pull/201#pullrequestreview-364456788", "createdAt": "2020-02-25T21:21:18Z", "commit": {"oid": "9b7470aab40f7958e0cf8b8274c6fad92c75b27e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMToyMToxOFrOFuVoaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMToyMToxOFrOFuVoaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDEzMzIyNQ==", "bodyText": "Made package-private since the unit test class will access this field.", "url": "https://github.com/Azure/azure-sdk-for-android/pull/201#discussion_r384133225", "createdAt": "2020-02-25T21:21:18Z", "author": {"login": "vcolin7"}, "path": "sdk/core/azure-core/src/main/java/com/azure/android/core/http/interceptor/UserAgentInterceptor.java", "diffHunk": "@@ -24,7 +25,8 @@\n  * <a href=\"https://azure.github.io/azure-sdk/general_azurecore.html#telemetry-policy\">Azure Core: Telemetry policy</a>.\n  */\n public class UserAgentInterceptor implements Interceptor {\n-    private static final String USER_AGENT_HEADER = \"User-Agent\";\n+    static final String USER_AGENT_HEADER = \"User-Agent\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b7470aab40f7958e0cf8b8274c6fad92c75b27e"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NDU2OTM1", "url": "https://github.com/Azure/azure-sdk-for-android/pull/201#pullrequestreview-364456935", "createdAt": "2020-02-25T21:21:32Z", "commit": {"oid": "9b7470aab40f7958e0cf8b8274c6fad92c75b27e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMToyMTozMlrOFuVo7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMToyMTozMlrOFuVo7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDEzMzM1OA==", "bodyText": "Renamed in favor of clarity.", "url": "https://github.com/Azure/azure-sdk-for-android/pull/201#discussion_r384133358", "createdAt": "2020-02-25T21:21:32Z", "author": {"login": "vcolin7"}, "path": "sdk/core/azure-core/src/main/java/com/azure/android/core/http/interceptor/UserAgentInterceptor.java", "diffHunk": "@@ -34,7 +36,7 @@\n     // From the design guidelines, the application ID user agent header format is:\n     // [<application_id>] azsdk-android-<client_lib>/<sdk_version> (<platform_info>; <application_info>;\n     // <user_locale_info>\n-    private static final String APPLICATION_ID_USER_AGENT_FORMAT = \"[%s] \" + USER_AGENT_FORMAT;\n+    private static final String USER_AGENT_FORMAT_WITH_APPLICATION_ID = \"[%s] %s\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b7470aab40f7958e0cf8b8274c6fad92c75b27e"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NzQyNzUz", "url": "https://github.com/Azure/azure-sdk-for-android/pull/201#pullrequestreview-366742753", "createdAt": "2020-02-28T23:29:44Z", "commit": {"oid": "9b7470aab40f7958e0cf8b8274c6fad92c75b27e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c30e48212ec9dcd54b531a9e9d31681d761e05d0", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/c30e48212ec9dcd54b531a9e9d31681d761e05d0", "committedDate": "2020-03-02T19:33:00Z", "message": "Changed UserAgentInterceptor to show empty strings instead of 'null' when passed a null value for sdkName or sdkVersion."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0be51492d87ba65a65b00e27f5b5f217eed0d5db", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/0be51492d87ba65a65b00e27f5b5f217eed0d5db", "committedDate": "2020-03-02T19:33:00Z", "message": "Fixed bug where, when the User-Agent header is already populated, we would not update its value but add a new entry for it in the request instead."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b9fe7c75cc7b28769f32c79834b3c3012724081", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/0b9fe7c75cc7b28769f32c79834b3c3012724081", "committedDate": "2020-03-02T19:33:00Z", "message": "Modified the UserAgentInterceptor to trim and truncate the user-provided applicationId as specified in the design guidelines."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0358f52b6749d8d8b330e1b0e4a8a0bb35b43669", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/0358f52b6749d8d8b330e1b0e4a8a0bb35b43669", "committedDate": "2020-03-02T19:33:00Z", "message": "Small change to import CoreUtils.isNullOrEmpty()"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "afd78e1463f9047c43752e56bc6fd506898597db", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/afd78e1463f9047c43752e56bc6fd506898597db", "committedDate": "2020-02-29T10:05:04Z", "message": "Small change to import CoreUtils.isNullOrEmpty()"}, "afterCommit": {"oid": "0358f52b6749d8d8b330e1b0e4a8a0bb35b43669", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/0358f52b6749d8d8b330e1b0e4a8a0bb35b43669", "committedDate": "2020-03-02T19:33:00Z", "message": "Small change to import CoreUtils.isNullOrEmpty()"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1288, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}