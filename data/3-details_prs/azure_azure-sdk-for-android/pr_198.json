{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NTY1MzUy", "number": 198, "title": "Unit testing azure-core interceptors", "bodyText": "Partially addresses #189. Adds unit tests for our current HTTP interceptors (policies) in the azure-core package.\nThese changes consider the fixes done in #201 & #211 to the UserAgentInterceptor, LoggingInterceptor and CurlLogginInterceptor, as well as any other classes they depend on (like LogUtils).", "createdAt": "2020-02-22T08:04:38Z", "url": "https://github.com/Azure/azure-sdk-for-android/pull/198", "merged": true, "mergeCommit": {"oid": "d691c7e7fb87e33a61136363def46f9fe36c5b99"}, "closed": true, "closedAt": "2020-03-13T21:57:16Z", "author": {"login": "vcolin7"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKhOJvgFqTM2OTI0MDI1MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcNXmk5gFqTM3NDY0MDk1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MjQwMjUw", "url": "https://github.com/Azure/azure-sdk-for-android/pull/198#pullrequestreview-369240250", "createdAt": "2020-03-05T01:26:25Z", "commit": {"oid": "ac07ce7a59a083bcacedb6a5dd34ef1ff3ab76d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwMToyNjoyNVrOFyDh7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwMToyNjoyNVrOFyDh7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODAzMDk1OQ==", "bodyText": "Why can't we use ThreeTenApb in the tests?", "url": "https://github.com/Azure/azure-sdk-for-android/pull/198#discussion_r388030959", "createdAt": "2020-03-05T01:26:25Z", "author": {"login": "bsiegel"}, "path": "build.gradle", "diffHunk": "@@ -122,6 +122,7 @@ allprojects {\n         retrofitVersion = \"2.6.2\"\n         staxApiVersion = \"1.0-2\"\n         threeTenAbpVersion = \"1.2.1\"\n+        threeTenBpVersion = \"1.4.0\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac07ce7a59a083bcacedb6a5dd34ef1ff3ab76d3"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0a09a2022756db35ce7d3d144b3152650c9441b4", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/0a09a2022756db35ce7d3d144b3152650c9441b4", "committedDate": "2020-03-11T23:17:56Z", "message": "Added tests for LogUtils and LogOptions."}, "afterCommit": {"oid": "c8832746092e3b73ffd26021fb78d1f09ef01ff1", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/c8832746092e3b73ffd26021fb78d1f09ef01ff1", "committedDate": "2020-03-11T23:21:31Z", "message": "Added tests for LogUtils and LogOptions."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMzcyODc2", "url": "https://github.com/Azure/azure-sdk-for-android/pull/198#pullrequestreview-373372876", "createdAt": "2020-03-12T08:57:26Z", "commit": {"oid": "c8832746092e3b73ffd26021fb78d1f09ef01ff1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwODo1NzoyNlrOF1V5ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwODo1NzoyNlrOF1V5ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ3NzY5OQ==", "bodyText": "We shouldn't unhide fields just so we can access them from tests. It ends up with our tests knowing too much about our internal structure of the code under test. When writing tests, it's okay to have some duplication rather than having to DRY up everything.", "url": "https://github.com/Azure/azure-sdk-for-android/pull/198#discussion_r391477699", "createdAt": "2020-03-12T08:57:26Z", "author": {"login": "bsiegel"}, "path": "sdk/core/azure-core/src/main/java/com/azure/android/core/http/interceptor/AddDateInterceptor.java", "diffHunk": "@@ -20,12 +20,13 @@\n  * HTTP request.\n  */\n public class AddDateInterceptor implements Interceptor {\n-    private static final String DATE_HEADER = \"Date\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8832746092e3b73ffd26021fb78d1f09ef01ff1"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f88936965efe0008d29e5f20d4a8e730435d8d2", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/1f88936965efe0008d29e5f20d4a8e730435d8d2", "committedDate": "2020-03-13T20:50:29Z", "message": "Refactored requestIdHeaderIsPopulated() in RequestIdInterceptorTest to make it easier to read."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6252f5453fcb293db46fc7b1e5633f2519ebfce", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/d6252f5453fcb293db46fc7b1e5633f2519ebfce", "committedDate": "2020-03-13T20:54:18Z", "message": "Created a base class for all our interceptor tests that verify header content; also, created AddDateInterceptorTest which extends from this and made RequestIdInterceptorTest extend from it as well."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e116aca708790bb2c0efd57a0cf29672e465779", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/6e116aca708790bb2c0efd57a0cf29672e465779", "committedDate": "2020-03-13T20:55:12Z", "message": "Separated test utility methods from set-up logic."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dbfd678731431a3b418065c03562eccbcd7e4e4", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/4dbfd678731431a3b418065c03562eccbcd7e4e4", "committedDate": "2020-03-13T20:57:16Z", "message": "Got rid of inheritance in our interceptor tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d29f820307716fab64fdab5b34ad5eda4e5c77a", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/4d29f820307716fab64fdab5b34ad5eda4e5c77a", "committedDate": "2020-03-13T20:58:10Z", "message": "Added some more utility methods that will likely be used across our interceptor unit tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d80e5ec30dd8123268b3ece76ee2853dd5b37a86", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/d80e5ec30dd8123268b3ece76ee2853dd5b37a86", "committedDate": "2020-03-13T21:08:46Z", "message": "Created UserAgentInterceptorTest."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e2a5d58b968c48b1c8289bcf312101e0daa2567", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/3e2a5d58b968c48b1c8289bcf312101e0daa2567", "committedDate": "2020-03-13T21:08:48Z", "message": "Made some formatting changes to our interceptor test classes and test utility class."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4898380ed4d1b35d03d19cfbca1f6669e4c4dd9", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/a4898380ed4d1b35d03d19cfbca1f6669e4c4dd9", "committedDate": "2020-03-13T21:09:45Z", "message": "Modified and added some tests to include changes made to the UserAgentInterceptor where the applicationId should be trimmed and truncated to follow the design guidelines."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0852e4380da43555bcc3c83a60afcd608128d426", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/0852e4380da43555bcc3c83a60afcd608128d426", "committedDate": "2020-03-13T21:09:47Z", "message": "Created the EnqueueMockResponse TestRule since it is something we constantly need to set-up for many of our interceptor unit test. Reordered some of the code and rephrased some explanations in favor of clarity in unit tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb5df7d77d8df33cd1bc8d374102077084296899", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/fb5df7d77d8df33cd1bc8d374102077084296899", "committedDate": "2020-03-13T21:17:07Z", "message": "Created test classes for our logging interceptors and implemented a couple tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b03ec9f76fbddaa36b304c4e8c492a27ec6972d", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/7b03ec9f76fbddaa36b304c4e8c492a27ec6972d", "committedDate": "2020-03-13T21:17:18Z", "message": "Renamed the methods in our Date and Request ID interceptors to be more consistent."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9e0edc34c05702fc40f357e7293b48ea1bc0f69", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/c9e0edc34c05702fc40f357e7293b48ea1bc0f69", "committedDate": "2020-03-13T21:18:46Z", "message": "Added more test cases for the LoggingInterceptor."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a23129b0d25fa4950ddc9c54d2947c03850422c1", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/a23129b0d25fa4950ddc9c54d2947c03850422c1", "committedDate": "2020-03-13T21:20:09Z", "message": "Added all remaining unit tests for the LoggingInterceptor."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87568136858adf2c56984af2f936edafc4b222ac", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/87568136858adf2c56984af2f936edafc4b222ac", "committedDate": "2020-03-13T21:52:31Z", "message": "Added unit tests for the CurlLoggingInterceptor."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dafddbc6af876f48435fb96669e0e90900ab82a8", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/dafddbc6af876f48435fb96669e0e90900ab82a8", "committedDate": "2020-03-13T21:52:31Z", "message": "Made slight changes to how we call methods in the Assert class to improve readability."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb385080614981b322b69caff53f00302bc44e65", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/eb385080614981b322b69caff53f00302bc44e65", "committedDate": "2020-03-13T21:52:31Z", "message": "Added tests for LogOptions."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "004213e1d0b105bd6826b3387a1606abd833459d", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/004213e1d0b105bd6826b3387a1606abd833459d", "committedDate": "2020-03-12T23:22:20Z", "message": "Made some constants private in our interceptors and added some others in their test classes based on feedback by @bsiegel (https://github.com/Azure/azure-sdk-for-android/pull/198#discussion_r391477699)."}, "afterCommit": {"oid": "eb385080614981b322b69caff53f00302bc44e65", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/eb385080614981b322b69caff53f00302bc44e65", "committedDate": "2020-03-13T21:52:31Z", "message": "Added tests for LogOptions."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NjQwOTU2", "url": "https://github.com/Azure/azure-sdk-for-android/pull/198#pullrequestreview-374640956", "createdAt": "2020-03-13T21:57:03Z", "commit": {"oid": "eb385080614981b322b69caff53f00302bc44e65"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1286, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}