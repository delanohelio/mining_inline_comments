{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5NTU5NTQw", "number": 393, "title": "Set tags", "bodyText": "", "createdAt": "2020-10-07T22:53:56Z", "url": "https://github.com/Azure/azure-sdk-for-android/pull/393", "merged": true, "mergeCommit": {"oid": "6a9930d16e66ab2d195a0af8eabc47742c7c4dd2"}, "closed": true, "closedAt": "2020-10-22T21:18:36Z", "author": {"login": "rickle-msft"}, "timelineItems": {"totalCount": 44, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQPbMRAH2gAyNDk5NTU5NTQwOjFlMmE5YTkyY2Y5ZDM1ZTg3ZTMwZjM1ZGQ0ODIyZDM3OGZmMzk3OTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVIn3pAH2gAyNDk5NTU5NTQwOjU5ZWYwMWY2YzA2MDk4MDQ0ODQ0NjFiNWM2NGZiMzlkYmFkNjM5NzY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1e2a9a92cf9d35e87e30f35dd4822d378ff39794", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/1e2a9a92cf9d35e87e30f35dd4822d378ff39794", "committedDate": "2020-10-07T16:18:18Z", "message": "Added code for Blob getTags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b76016c62e9cf457505267e5fbc9e17d7fcd6e43", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/b76016c62e9cf457505267e5fbc9e17d7fcd6e43", "committedDate": "2020-10-07T17:24:46Z", "message": "Added tests for getTags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d94399a8acd573ca2e844882286425c1360f96c", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/1d94399a8acd573ca2e844882286425c1360f96c", "committedDate": "2020-10-07T21:20:53Z", "message": "Added tags header"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0505cbc35747af858c69b5b90cec8d98d4dc96e", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/e0505cbc35747af858c69b5b90cec8d98d4dc96e", "committedDate": "2020-10-07T21:43:58Z", "message": "Started on set tags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "deaa956c61d86f4fbf355e2f33f718ee6a1e1e90", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/deaa956c61d86f4fbf355e2f33f718ee6a1e1e90", "committedDate": "2020-10-07T22:48:55Z", "message": "Partway through tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cb62d1c4c3e4e826634c9d5b327911ddf07ea32", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/8cb62d1c4c3e4e826634c9d5b327911ddf07ea32", "committedDate": "2020-10-07T22:51:54Z", "message": "Finished tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7133cec182e53449486d6c3f1b8ee0327e9d0171", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/7133cec182e53449486d6c3f1b8ee0327e9d0171", "committedDate": "2020-10-08T16:59:29Z", "message": "Formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1edc8c4ce9a8cea99f7d4afdb36d0c4f3764c819", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/1edc8c4ce9a8cea99f7d4afdb36d0c4f3764c819", "committedDate": "2020-10-08T17:17:24Z", "message": "Fixed body serialization"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MDA1NjUz", "url": "https://github.com/Azure/azure-sdk-for-android/pull/393#pullrequestreview-505005653", "createdAt": "2020-10-08T17:25:39Z", "commit": {"oid": "1edc8c4ce9a8cea99f7d4afdb36d0c4f3764c819"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzoyNTozOVrOHeo2Vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzoyNTozOVrOHeo2Vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg4ODU5OQ==", "bodyText": "yes, this is needed for android :) a bit different from Java RestProxy.", "url": "https://github.com/Azure/azure-sdk-for-android/pull/393#discussion_r501888599", "createdAt": "2020-10-08T17:25:39Z", "author": {"login": "anuchandy"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -1115,6 +1115,20 @@ private BlobSetTagsResponse setBlobTagsWithRestResponseIntern(String containerNa\n         BlobTags blobTags = new BlobTags();\n         blobTags.setBlobTagSet(blobTagSet);\n \n+        RequestBody tagsBody;\n+        try {\n+            tagsBody = RequestBody.create(MediaType.get(\"application/xml; charset=utf-8\"),\n+                serializerAdapter.serialize(blobTags, SerializerFormat.XML));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1edc8c4ce9a8cea99f7d4afdb36d0c4f3764c819"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MDA4NjY4", "url": "https://github.com/Azure/azure-sdk-for-android/pull/393#pullrequestreview-505008668", "createdAt": "2020-10-08T17:29:23Z", "commit": {"oid": "1edc8c4ce9a8cea99f7d4afdb36d0c4f3764c819"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzoyOToyM1rOHeo_Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzoyOToyM1rOHeo_Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg5MDkxNA==", "bodyText": "Seems as per swagger, valid response code is 204", "url": "https://github.com/Azure/azure-sdk-for-android/pull/393#discussion_r501890914", "createdAt": "2020-10-08T17:29:23Z", "author": {"login": "anuchandy"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -1013,6 +1093,116 @@ public void onFailure(@NonNull Call<Void> call, @NonNull Throwable t) {\n         }\n     }\n \n+    private BlobSetTagsResponse setBlobTagsWithRestResponseIntern(String containerName,\n+                                                                  String blobName,\n+                                                                  Integer timeout,\n+                                                                  String versionId,\n+                                                                  String iftags,\n+                                                                  Map<String, String> tags,\n+                                                                  String version,\n+                                                                  String requestId,\n+                                                                  CancellationToken cancellationToken,\n+                                                                  CallbackWithHeader<Void, BlobSetTagsHeaders> callback) {\n+\n+        cancellationToken = cancellationToken == null ? CancellationToken.NONE : cancellationToken;\n+\n+        final String comp = \"tags\";\n+\n+        List<BlobTag> blobTagSet = new ArrayList<>(tags.size());\n+        for (Map.Entry<String, String> entry : tags.entrySet()) {\n+            blobTagSet.add(new BlobTag().setKey(entry.getKey()).setValue(entry.getValue()));\n+        }\n+        BlobTags blobTags = new BlobTags();\n+        blobTags.setBlobTagSet(blobTagSet);\n+\n+        RequestBody tagsBody;\n+        try {\n+            tagsBody = RequestBody.create(MediaType.get(\"application/xml; charset=utf-8\"),\n+                serializerAdapter.serialize(blobTags, SerializerFormat.XML));\n+        } catch (IOException ioe) {\n+            if (callback != null) {\n+                callback.onFailure(ioe, null);\n+\n+                return null;\n+            } else {\n+                throw new RuntimeException(ioe);\n+            }\n+        }\n+\n+        Call<ResponseBody> call = service.setBlobTags(containerName,\n+            blobName,\n+            timeout,\n+            versionId,\n+            null, // TODO: calculate Md5?\n+            null,\n+            iftags,\n+            XMS_VERSION,\n+            requestId,\n+            tagsBody,\n+            comp\n+        );\n+\n+        ((CancellationTokenImpl) cancellationToken).registerOnCancel(() -> {\n+            call.cancel();\n+        });\n+\n+        if (callback != null) {\n+            executeCall(call, new retrofit2.Callback<ResponseBody>() {\n+                @Override\n+                public void onResponse(@NonNull Call<ResponseBody> call, @NonNull Response<ResponseBody> response) {\n+                    if (response.isSuccessful()) {\n+                        if (response.code() == 200) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1edc8c4ce9a8cea99f7d4afdb36d0c4f3764c819"}, "originalPosition": 165}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e9eed8fd2d0c05c270684c84915748231702d4e", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/0e9eed8fd2d0c05c270684c84915748231702d4e", "committedDate": "2020-10-08T17:54:21Z", "message": "Added a ModelHelper"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd2de7ff4bee2b20b6d45e08f4d127223f75c89b", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/cd2de7ff4bee2b20b6d45e08f4d127223f75c89b", "committedDate": "2020-10-09T00:06:58Z", "message": "Started on create container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e1a8074ebf302b11352b46e3e9cf305037bc1f6", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/3e1a8074ebf302b11352b46e3e9cf305037bc1f6", "committedDate": "2020-10-09T18:41:29Z", "message": "Added support to delete container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fd2db40775cd27af30e8e3d4a385b074be54728", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/7fd2db40775cd27af30e8e3d4a385b074be54728", "committedDate": "2020-10-09T18:57:58Z", "message": "Finished createContainer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58d2a0d674e12be953f4fc9b30021e8d51b8c5af", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/58d2a0d674e12be953f4fc9b30021e8d51b8c5af", "committedDate": "2020-10-09T20:19:27Z", "message": "Updated test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8042b1d882af59f48bfd2c9233ffb789893f29b0", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/8042b1d882af59f48bfd2c9233ffb789893f29b0", "committedDate": "2020-10-09T20:28:29Z", "message": "Exposed BlobRequestConditions publically"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "368f15356e57f681bb1635e4aed0ee44c4789290", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/368f15356e57f681bb1635e4aed0ee44c4789290", "committedDate": "2020-10-09T23:38:27Z", "message": "Started setting up ways to get creds and clients"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34329b725b7f423436b09b35116080832ce3ade1", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/34329b725b7f423436b09b35116080832ce3ade1", "committedDate": "2020-10-12T18:46:07Z", "message": "Merge branch 'testInfra' into createContainer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "326f1d06598ff9e57a9179e6096fe68ee40c6ebd", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/326f1d06598ff9e57a9179e6096fe68ee40c6ebd", "committedDate": "2020-10-12T19:21:19Z", "message": "Started on createContainer network tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d442292112b7d5dbdc9789ffa222b9495aff0913", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/d442292112b7d5dbdc9789ffa222b9495aff0913", "committedDate": "2020-10-12T19:23:36Z", "message": "Merge remote-tracking branch 'gauri/storage/deleteContainer' into createContainer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a838f0f2ce20ab11120c4ebb97981be695ec1eca", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/a838f0f2ce20ab11120c4ebb97981be695ec1eca", "committedDate": "2020-10-12T20:43:32Z", "message": "Added support for get container properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebd01c2d9cabfb6853fbb3e05b4db00c2732c0a2", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/ebd01c2d9cabfb6853fbb3e05b4db00c2732c0a2", "committedDate": "2020-10-12T20:47:39Z", "message": "Working on deleteContainer tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95bfecb4dd10691bb8656971605b59733b723090", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/95bfecb4dd10691bb8656971605b59733b723090", "committedDate": "2020-10-12T20:50:47Z", "message": "Merge remote-tracking branch 'gauri/storage/getContainerProperties' into createContainer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d891da875b3a634f5fcc7d6a7cb5e8607d771a4f", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/d891da875b3a634f5fcc7d6a7cb5e8607d771a4f", "committedDate": "2020-10-13T00:00:30Z", "message": "Added live tests for create"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "183e72276afceee0a4e993884fb018675760d5ae", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/183e72276afceee0a4e993884fb018675760d5ae", "committedDate": "2020-10-14T03:32:42Z", "message": "Added a bunch of network tests for container apis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24ca631081e4a802f484b049fa859d1b6259f0ae", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/24ca631081e4a802f484b049fa859d1b6259f0ae", "committedDate": "2020-10-14T16:25:52Z", "message": "Fixed some formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7492ee526ecb5fc3c23cff1294d783ea1f2e8991", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/7492ee526ecb5fc3c23cff1294d783ea1f2e8991", "committedDate": "2020-10-14T17:05:05Z", "message": "Added some blob tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc7d944e483eac9f8dd49be03b4e4ea955a18840", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/cc7d944e483eac9f8dd49be03b4e4ea955a18840", "committedDate": "2020-10-14T17:10:00Z", "message": "Merge remote-tracking branch 'rickle-msft/createContainer' into blobTests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7155179db78c8a6f14c9030aced61cb7a3bacf3d", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/7155179db78c8a6f14c9030aced61cb7a3bacf3d", "committedDate": "2020-10-14T19:20:02Z", "message": "Added some more commit block list tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6929a9ab8723590c57f36d539ab63dab48c114c7", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/6929a9ab8723590c57f36d539ab63dab48c114c7", "committedDate": "2020-10-14T20:36:25Z", "message": "Added more block blob tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de294c0d245bf0d0e2c051c4d73eb2ed2132e21c", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/de294c0d245bf0d0e2c051c4d73eb2ed2132e21c", "committedDate": "2020-10-14T20:59:21Z", "message": "Added Access condition tests for blob delete"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7aebfad42d3c60e10f6dfff64b6c56de63f77d8", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/c7aebfad42d3c60e10f6dfff64b6c56de63f77d8", "committedDate": "2020-10-15T18:44:30Z", "message": "Merge branch 'createContainer' into setTags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71c9fc37fb10bb4c5e5f38e73511d1d505c47679", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/71c9fc37fb10bb4c5e5f38e73511d1d505c47679", "committedDate": "2020-10-15T18:44:39Z", "message": "Merge remote-tracking branch 'gauri/blobTests' into setTags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e604e10af1fc2a2186486afc79d7a45c9491ea4a", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/e604e10af1fc2a2186486afc79d7a45c9491ea4a", "committedDate": "2020-10-15T19:05:06Z", "message": "Merge remote-tracking branch 'gauri/storage/getTags' into setTags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fa3a183375852411bf810a70b8d8986c13d5dae", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/1fa3a183375852411bf810a70b8d8986c13d5dae", "committedDate": "2020-10-15T19:26:44Z", "message": "Added setTags network tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18794bc4744a1a9fb60671e89560792bd15d9e38", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/18794bc4744a1a9fb60671e89560792bd15d9e38", "committedDate": "2020-10-15T21:38:32Z", "message": "Network tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MTkxMjA1", "url": "https://github.com/Azure/azure-sdk-for-android/pull/393#pullrequestreview-514191205", "createdAt": "2020-10-21T21:14:32Z", "commit": {"oid": "18794bc4744a1a9fb60671e89560792bd15d9e38"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMToxNDozM1rOHmFzbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMTo1Mjo1MlrOHmHlHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTcwMzAyMw==", "bodyText": "I don't know why the PR includes all a ton of other things, I guess I should just ignore them? I assume this PR only introduces the setBlobTags operations, correct?", "url": "https://github.com/Azure/azure-sdk-for-android/pull/393#discussion_r509703023", "createdAt": "2020-10-21T21:14:33Z", "author": {"login": "vcolin7"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobAsyncClient.java", "diffHunk": "@@ -236,6 +249,140 @@ public void cancel(Context context, long transferId) {\n             .cancel(transferId);\n     }\n \n+    /**\n+     * Creates a new container within a storage account. If a container with the same name already exists, the operation\n+     * fails.\n+     *\n+     * @param containerName The container name.\n+     * @param callback      Callback that receives the response.\n+     */\n+    public void createContainer(String containerName,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18794bc4744a1a9fb60671e89560792bd15d9e38"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTcyODk4NQ==", "bodyText": "Is this the newest Storage version? Where do we check this? Actually, I see different versions than what we had here.", "url": "https://github.com/Azure/azure-sdk-for-android/pull/393#discussion_r509728985", "createdAt": "2020-10-21T21:48:14Z", "author": {"login": "vcolin7"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -59,20 +77,224 @@\n import retrofit2.http.PUT;\n import retrofit2.http.Path;\n import retrofit2.http.Query;\n+import retrofit2.http.Tag;\n \n /**\n  * PACKAGE PRIVATE CLASS AND METHODS\n  */\n final class StorageBlobServiceImpl {\n     private final StorageBlobService service;\n     private final SerializerAdapter serializerAdapter;\n-    private static String XMS_VERSION = \"2019-02-02\";\n+    private static String XMS_VERSION = \"2019-12-12\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18794bc4744a1a9fb60671e89560792bd15d9e38"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTczMjEyNw==", "bodyText": "We probably need to consider this in the MD5 PR.", "url": "https://github.com/Azure/azure-sdk-for-android/pull/393#discussion_r509732127", "createdAt": "2020-10-21T21:52:52Z", "author": {"login": "vcolin7"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -1013,6 +1660,119 @@ public void onFailure(@NonNull Call<Void> call, @NonNull Throwable t) {\n         }\n     }\n \n+    private BlobSetTagsResponse setBlobTagsWithRestResponseIntern(String containerName,\n+                                                                  String blobName,\n+                                                                  Integer timeout,\n+                                                                  String versionId,\n+                                                                  String iftags,\n+                                                                  Map<String, String> tags,\n+                                                                  String version,\n+                                                                  String requestId,\n+                                                                  CancellationToken cancellationToken,\n+                                                                  CallbackWithHeader<Void, BlobSetTagsHeaders> callback) {\n+\n+        cancellationToken = cancellationToken == null ? CancellationToken.NONE : cancellationToken;\n+\n+        final String comp = \"tags\";\n+\n+        List<BlobTag> blobTagSet = null;\n+        if (tags != null) {\n+            blobTagSet = new ArrayList<>(tags.size());\n+            for (Map.Entry<String, String> entry : tags.entrySet()) {\n+                blobTagSet.add(new BlobTag().setKey(entry.getKey()).setValue(entry.getValue()));\n+            }\n+        }\n+        BlobTags blobTags = new BlobTags();\n+        blobTags.setBlobTagSet(blobTagSet);\n+\n+        RequestBody tagsBody;\n+        try {\n+            tagsBody = RequestBody.create(MediaType.get(\"application/xml; charset=utf-8\"),\n+                serializerAdapter.serialize(blobTags, SerializerFormat.XML));\n+        } catch (IOException ioe) {\n+            if (callback != null) {\n+                callback.onFailure(ioe, null);\n+\n+                return null;\n+            } else {\n+                throw new RuntimeException(ioe);\n+            }\n+        }\n+\n+        Call<ResponseBody> call = service.setBlobTags(containerName,\n+            blobName,\n+            timeout,\n+            versionId,\n+            null, // TODO: calculate Md5?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18794bc4744a1a9fb60671e89560792bd15d9e38"}, "originalPosition": 969}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a59aa3cdc4ddef48955aeba6278dc245c5a5eef1", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/a59aa3cdc4ddef48955aeba6278dc245c5a5eef1", "committedDate": "2020-10-22T19:04:52Z", "message": "Merge remote-tracking branch 'upstream/master' into setTags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c6a41d50e8788f6412f54ef0b881473404b3ab5", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/2c6a41d50e8788f6412f54ef0b881473404b3ab5", "committedDate": "2020-10-22T19:49:21Z", "message": "Fixed a typo in a test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a67fa00d10e352311e8c93700b8b7447d60b2cc", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/5a67fa00d10e352311e8c93700b8b7447d60b2cc", "committedDate": "2020-10-22T20:15:10Z", "message": "Fixed an error in setTags intern method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MTE0OTQy", "url": "https://github.com/Azure/azure-sdk-for-android/pull/393#pullrequestreview-515114942", "createdAt": "2020-10-22T21:00:20Z", "commit": {"oid": "5a67fa00d10e352311e8c93700b8b7447d60b2cc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MTE3MTg5", "url": "https://github.com/Azure/azure-sdk-for-android/pull/393#pullrequestreview-515117189", "createdAt": "2020-10-22T21:03:46Z", "commit": {"oid": "5a67fa00d10e352311e8c93700b8b7447d60b2cc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "507d7df87fe6861c328fbaeacf720868591b554e", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/507d7df87fe6861c328fbaeacf720868591b554e", "committedDate": "2020-10-22T21:04:26Z", "message": "Some test fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59ef01f6c0609804484461b5c64fb39dbad63976", "author": {"user": {"login": "rickle-msft", "name": "Rick Ley"}}, "url": "https://github.com/Azure/azure-sdk-for-android/commit/59ef01f6c0609804484461b5c64fb39dbad63976", "committedDate": "2020-10-22T21:12:26Z", "message": "Fixed some tests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1258, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}