{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0NzY5OTYx", "number": 511, "title": "Feature: Generic Concept Request API", "bodyText": "This PR introduces a new Concept request API to access any concept from any CodeSystem using a few filters and returning a generic Concept model.", "createdAt": "2020-03-06T11:23:06Z", "url": "https://github.com/b2ihealthcare/snow-owl/pull/511", "merged": true, "mergeCommit": {"oid": "6d413b8073ade0eabc116ff1f407ccba8e6d857a"}, "closed": true, "closedAt": "2020-03-06T13:02:10Z", "author": {"login": "cmark"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKwLBAAH2gAyMzg0NzY5OTYxOjAzZGI4OTdhYjE0M2YwNmE3M2VlODJhYjViMmE4M2FlNTE2OWJmMDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcK_vwBAFqTM3MDMwMzkwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "03db897ab143f06a73ee82ab5b2a83ae5169bf01", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/03db897ab143f06a73ee82ab5b2a83ae5169bf01", "committedDate": "2020-03-05T18:52:48Z", "message": "[api] add Enum keyed accessor methods to Options"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df225731f82382ce50dc3202738f31e5c47d8edc", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/df225731f82382ce50dc3202738f31e5c47d8edc", "committedDate": "2020-03-05T18:54:57Z", "message": "[api] add generic Concept model and ConceptSearchRequest and its Builder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5dc4fa65dd4b0a1c3b7c2c59cbca22825fd38cf0", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/5dc4fa65dd4b0a1c3b7c2c59cbca22825fd38cf0", "committedDate": "2020-03-05T18:55:47Z", "message": "[core] refactor TerminologyRepositoryPlugin initialization\n\nRemove type specific builder methods from RepositoryBuilder.\nAdd generic bind(type, instance) method to bind any service to the\nrepository context."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "051d8f363514a0c09a4d1ccccce0893d32b2b82f", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/051d8f363514a0c09a4d1ccccce0893d32b2b82f", "committedDate": "2020-03-05T18:56:20Z", "message": "[api] initial version of SNOMED CT specific search request evaluator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e90ce4c6acd3df29347c0d9f51e1429b8537f72", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/1e90ce4c6acd3df29347c0d9f51e1429b8537f72", "committedDate": "2020-03-05T18:56:53Z", "message": "[tests] add generic access test to SNOMED CT api tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45858ba6df8d8cfb3a23a35290fc584b1b07de2e", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/45858ba6df8d8cfb3a23a35290fc584b1b07de2e", "committedDate": "2020-03-06T11:20:27Z", "message": "[api] add filterByQuery test and fix remaining issues with filters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMjg5NDc3", "url": "https://github.com/b2ihealthcare/snow-owl/pull/511#pullrequestreview-370289477", "createdAt": "2020-03-06T12:35:08Z", "commit": {"oid": "45858ba6df8d8cfb3a23a35290fc584b1b07de2e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjozNTowOFrOFy3PWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjo0MTowOFrOFy3ZVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg3ODE2OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t * key.equals(k))}, then this method returns {@code v}; otherwise it returns {@code null}. (There can be at most one such mapping.)\n          \n          \n            \n            \t * key.name().equals(k))}, then this method returns {@code v}; otherwise it returns {@code null}. (There can be at most one such mapping.)", "url": "https://github.com/b2ihealthcare/snow-owl/pull/511#discussion_r388878168", "createdAt": "2020-03-06T12:35:08Z", "author": {"login": "apeteri"}, "path": "commons/com.b2international.commons/src/com/b2international/commons/options/Options.java", "diffHunk": "@@ -67,9 +67,24 @@\n \t *             if the specified key is <code>null</code>\n \t */\n \tObject get(String key);\n+\t\n+\t/**\n+\t * Returns the value to which the specified Enum key's name is mapped, or {@code null} if this map contains no mapping for the key.\n+\t *\n+\t * <p>\n+\t * More formally, if this map contains a mapping from a key {@code k} to a value {@code v} such that {@code (key==null ? k==null :\n+\t * key.equals(k))}, then this method returns {@code v}; otherwise it returns {@code null}. (There can be at most one such mapping.)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45858ba6df8d8cfb3a23a35290fc584b1b07de2e"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg3OTgwOQ==", "bodyText": "I don't know if we ever call put twice for the same key, but null effectively removed the previous value in the method's \"before\" form, and now it doesn't.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/511#discussion_r388879809", "createdAt": "2020-03-06T12:38:56Z", "author": {"login": "apeteri"}, "path": "commons/com.b2international.commons/src/com/b2international/commons/options/OptionsBuilder.java", "diffHunk": "@@ -30,10 +30,20 @@\n \tOptionsBuilder() {}\n \t\n \tpublic OptionsBuilder put(String key, Object value) {\n-\t\toptions.put(key, value);\n+\t\tif (value != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45858ba6df8d8cfb3a23a35290fc584b1b07de2e"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg4MDcyNQ==", "bodyText": "This option key is not explained.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/511#discussion_r388880725", "createdAt": "2020-03-06T12:41:08Z", "author": {"login": "apeteri"}, "path": "core/com.b2international.snowowl.datastore/src/com/b2international/snowowl/core/request/ConceptSearchRequestEvaluator.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.request;\n+\n+import com.b2international.commons.options.Options;\n+import com.b2international.snowowl.core.domain.BranchContext;\n+import com.b2international.snowowl.core.domain.Concept;\n+import com.b2international.snowowl.core.domain.Concepts;\n+\n+/**\n+ * @since 7.5\n+ */\n+public interface ConceptSearchRequestEvaluator {\n+\n+\tpublic enum OptionKey {\n+\n+\t\t/**\n+\t\t * Explicit ID filter to return all concepts that have any of the given IDs.\n+\t\t */\n+\t\tID,\n+\n+\t\t/**\n+\t\t * A term filter that matches concepts having a term match. The exact semantics of how a term match works depends on the given code system,\n+\t\t * but usually it supports exact, partial word and prefix matches.\n+\t\t */\n+\t\tTERM,\n+\n+\t\t/**\n+\t\t * A term filter that matches concepts having an exact term match regardless of case.\n+\t\t */\n+\t\tTERM_EXACT,\n+\n+\t\t/**\n+\t\t * A query expression defined in the target code system's query language\n+\t\t */\n+\t\tQUERY,\n+\n+\t\t/**\n+\t\t * ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45858ba6df8d8cfb3a23a35290fc584b1b07de2e"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02dee687b0c1d7e6fabd8e61bd6bde0fa31f130d", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/02dee687b0c1d7e6fabd8e61bd6bde0fa31f130d", "committedDate": "2020-03-06T12:45:26Z", "message": "Update javadoc\r\n\r\nThanks @apeteri!\n\nCo-Authored-By: Andr\u00e1s P\u00e9teri <apeteri@b2international.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a88f9acb2a75be83ef77e8375dfa4a1f3b07ac95", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/a88f9acb2a75be83ef77e8375dfa4a1f3b07ac95", "committedDate": "2020-03-06T12:49:12Z", "message": "[api] add javadoc to MUST_NOT_QUERY optionkey"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49e901302df046a1fb6d62e2965e1a7a6586537a", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/49e901302df046a1fb6d62e2965e1a7a6586537a", "committedDate": "2020-03-06T12:57:49Z", "message": "[commons] remove existing mapping if the new value is null (Options)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMzAzOTAz", "url": "https://github.com/b2ihealthcare/snow-owl/pull/511#pullrequestreview-370303903", "createdAt": "2020-03-06T13:01:30Z", "commit": {"oid": "49e901302df046a1fb6d62e2965e1a7a6586537a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4938, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}