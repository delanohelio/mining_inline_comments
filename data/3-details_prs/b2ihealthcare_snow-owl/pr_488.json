{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2MTgzODgw", "number": 488, "title": "Release v7.4.0 bug fixes", "bodyText": "", "createdAt": "2020-02-17T15:03:13Z", "url": "https://github.com/b2ihealthcare/snow-owl/pull/488", "merged": true, "mergeCommit": {"oid": "46fffcbc2b38a71fa2f5658c5bb5833e7778fddc"}, "closed": true, "closedAt": "2020-02-17T16:10:44Z", "author": {"login": "cmark"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcEP6zXgH2gAyMzc2MTgzODgwOmQwNjQyYjhjYmExZGExZDllNzc1NzE3YWUxNDQzYWNiNzNmOGQyNmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFPrVqgFqTM1OTg0NTEyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d0642b8cba1da1d9e775717ae1443acb73f8d26f", "author": {"user": {"login": "apeteri", "name": "Andr\u00e1s P\u00e9teri"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/d0642b8cba1da1d9e775717ae1443acb73f8d26f", "committedDate": "2020-02-14T13:54:35Z", "message": "[commons] Fix potential ResultSet resource leak in JdbcUtils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "381e244d22e0497fe409facb4133ec95b6b8763b", "author": {"user": {"login": "apeteri", "name": "Andr\u00e1s P\u00e9teri"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/381e244d22e0497fe409facb4133ec95b6b8763b", "committedDate": "2020-02-14T14:35:25Z", "message": "[validation.snomed] Skip Travis CI tests using a profile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90ddadea403e3cd33f515e0dcf3a900263fdd98c", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/90ddadea403e3cd33f515e0dcf3a900263fdd98c", "committedDate": "2020-02-14T15:41:55Z", "message": "[core] rename numberOfWorkers configuration key to maxThreads\n\nChange its default value to `200`.\nChange EventBus thread pool configuration to be not fixed, keep\nRuntime.availableProcessor() or maxThreads (at least 1) as core threads,\nand the configured maxThreads as maximum number of allowed event bus\nthreads.\nDeprecate getNumberOfWorkers() and setNumberOfWorkers(), keeping it for\ncompatibility reasons."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fda53f3b0faed43c6de01bf7cc83a400f7cb9021", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/fda53f3b0faed43c6de01bf7cc83a400f7cb9021", "committedDate": "2020-02-14T16:07:30Z", "message": "[cis] use Assigned for the -a option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4577b2a007a07ff4ffa73c9058ba97122a0570ab", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/4577b2a007a07ff4ffa73c9058ba97122a0570ab", "committedDate": "2020-02-14T16:17:53Z", "message": "[core] keep excess threads available for 1 minute before terminating"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fcd16217b6a97313438a0e01e6e71888fef1a2e", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/2fcd16217b6a97313438a0e01e6e71888fef1a2e", "committedDate": "2020-02-14T17:03:49Z", "message": "[tests] reduce maxThreads to 8 in snomed.core.rest.tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d69e50abc04017e3128593557d0b2c24d3306f21", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/d69e50abc04017e3128593557d0b2c24d3306f21", "committedDate": "2020-02-15T12:55:19Z", "message": "[build] enable travis-ci profile in .travis.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a8cb062342127fd86e3accbb6ab20ae60ad8562", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/3a8cb062342127fd86e3accbb6ab20ae60ad8562", "committedDate": "2020-02-15T13:58:47Z", "message": "[docs] upgrade api-docs dependencies to latest version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68c5463f67b354b3384068a1cfa13e8284e96d32", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/68c5463f67b354b3384068a1cfa13e8284e96d32", "committedDate": "2020-02-15T13:59:06Z", "message": "[tests] disable EclSerializerTest temporarily"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5222a5f6fce903e618eafbdc3dae5bc2d6b215d2", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/5222a5f6fce903e618eafbdc3dae5bc2d6b215d2", "committedDate": "2020-02-15T15:02:53Z", "message": "[api] fix incorrect paramType value for nested query parameters\n\nFixes #441"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f202a3f2bc0485757e5807dea1f7024a10caf75", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/7f202a3f2bc0485757e5807dea1f7024a10caf75", "committedDate": "2020-02-15T16:58:08Z", "message": "[eventbus] remove unnecessary finalize method (unsupported from java9)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef4e900ca74f87b309999de4a1d9c816631ff561", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/ef4e900ca74f87b309999de4a1d9c816631ff561", "committedDate": "2020-02-15T16:58:53Z", "message": "[snomed] use Promise chaining in SnomedEclRefinementEvaluator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7351439c798bcfec397f2e68347217129217e67c", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/7351439c798bcfec397f2e68347217129217e67c", "committedDate": "2020-02-15T16:59:08Z", "message": "[tests] enable EclSerializerTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09293f43d2fc3aea30654ee9dcb1248579e3cbf8", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/09293f43d2fc3aea30654ee9dcb1248579e3cbf8", "committedDate": "2020-02-15T17:12:06Z", "message": "[api] make sure we time out from ECL evaluations after 3 minutes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee51b29249342f1dd4fedb5c1ed3ddc43c6f1d72", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/ee51b29249342f1dd4fedb5c1ed3ddc43c6f1d72", "committedDate": "2020-02-16T15:06:32Z", "message": "[core] change default REST API timeout to 2 minutes in most of the...\n\n...endpoints\n\nAdd timeout values to server side Promise.getSync calls."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c49ed26420a033e93904d9d826afc88e1ba5344c", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/c49ed26420a033e93904d9d826afc88e1ba5344c", "committedDate": "2020-02-17T11:32:28Z", "message": "[snomed] fix OWL expression conversion issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2abc53319fd6053b338540d689494299c237ec70", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/2abc53319fd6053b338540d689494299c237ec70", "committedDate": "2020-02-17T11:33:26Z", "message": "[build] skip validation test execution via skip xml node"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5ODM1NDMw", "url": "https://github.com/b2ihealthcare/snow-owl/pull/488#pullrequestreview-359835430", "createdAt": "2020-02-17T15:56:38Z", "commit": {"oid": "2abc53319fd6053b338540d689494299c237ec70"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a70dc361cfc38559e0af7f4081cbefbcedecd954", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/a70dc361cfc38559e0af7f4081cbefbcedecd954", "committedDate": "2020-02-17T15:59:12Z", "message": "[tests] increase max number of threads in snomed tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5ODQ0MTUw", "url": "https://github.com/b2ihealthcare/snow-owl/pull/488#pullrequestreview-359844150", "createdAt": "2020-02-17T16:10:03Z", "commit": {"oid": "a70dc361cfc38559e0af7f4081cbefbcedecd954"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5ODQ1MTIw", "url": "https://github.com/b2ihealthcare/snow-owl/pull/488#pullrequestreview-359845120", "createdAt": "2020-02-17T16:11:37Z", "commit": {"oid": "a70dc361cfc38559e0af7f4081cbefbcedecd954"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNjoxMTozN1rOFqptmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNjoxMTozN1rOFqptmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI2NzkyOA==", "bodyText": "\ud83e\udd47", "url": "https://github.com/b2ihealthcare/snow-owl/pull/488#discussion_r380267928", "createdAt": "2020-02-17T16:11:37Z", "author": {"login": "apeteri"}, "path": "core/com.b2international.snowowl.core.rest/src/com/b2international/snowowl/core/rest/util/ModelAttributeParameterExpanderExt.java", "diffHunk": "@@ -141,23 +142,39 @@ public boolean apply(Parameter input) {\n \t\t};\n \t}\n \n-\tprivate Parameter simpleFields(String parentName, DocumentationContext documentationContext, ModelAttributeField each) {\n+\tprivate Parameter simpleFields(String parentName, ExpansionContext context, ModelAttributeField each) {\n \t\tLOG.debug(\"Attempting to expand field: {}\", each);\n \t\tString dataTypeName = Optional.fromNullable(typeNameFor(each.getFieldType().getErasedType()))\n \t\t\t\t.or(each.getFieldType().getErasedType().getSimpleName());\n \t\tLOG.debug(\"Building parameter for field: {}, with type: {}\", each, each.getFieldType());\n \t\tParameterExpansionContext parameterExpansionContext = new ParameterExpansionContext(\n \t\t\t\tdataTypeName, \n \t\t\t\tparentName, \n-\t\t\t\teach.getFieldType().getTypeName(),\n+\t\t\t\tdetermineScalarParameterType(\n+\t\t            context.getOperationContext().consumes(),\n+\t\t            context.getOperationContext().httpMethod()),\n \t\t\t\tnew ModelAttributeParameterMetadataAccessor(\n \t\t\t            each.annotatedElements(),\n \t\t\t            each.getFieldType(),\n \t\t\t            each.getName()),\n-\t\t\t\tdocumentationContext.getDocumentationType(), \n+\t\t\t\tcontext.getDocumentationContext().getDocumentationType(), ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a70dc361cfc38559e0af7f4081cbefbcedecd954"}, "originalPosition": 57}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4924, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}