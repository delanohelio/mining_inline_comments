{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxNzYwNjM5", "number": 715, "title": "SO-4477: Filter by ComponentURI instead of code only in ConceptMap and RefSetMemberSearch API", "bodyText": "", "createdAt": "2020-11-16T16:02:53Z", "url": "https://github.com/b2ihealthcare/snow-owl/pull/715", "merged": true, "mergeCommit": {"oid": "ea8acb01f4ea6b28063ad535d972910fa460379d"}, "closed": true, "closedAt": "2020-11-22T17:03:42Z", "author": {"login": "kovacstomi"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddGJABAH2gAyNTIxNzYwNjM5OmI4OTlmZDRlYTY3M2ZkYzU0ZDVkZTZmMWRmYjQzYmM3NGQzY2E1MmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfDpMkAFqTUzNjA4MTQ2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b899fd4ea673fdc54d5de6f1dfb43bc74d3ca52e", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/b899fd4ea673fdc54d5de6f1dfb43bc74d3ca52e", "committedDate": "2020-11-16T14:50:18Z", "message": "SO-4477: filter on ComponentURI instead of code only"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7855c4d3d3f7b5321ae123fd375600c211199a74", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/7855c4d3d3f7b5321ae123fd375600c211199a74", "committedDate": "2020-11-16T15:24:36Z", "message": "SO-4477: fix test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "369cffa73672cb8d28c684406ccfaa23199da349", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/369cffa73672cb8d28c684406ccfaa23199da349", "committedDate": "2020-11-16T15:56:27Z", "message": "SO-4477: filter by componentUri's code system if present"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxNTE3MjEw", "url": "https://github.com/b2ihealthcare/snow-owl/pull/715#pullrequestreview-531517210", "createdAt": "2020-11-16T16:57:24Z", "commit": {"oid": "369cffa73672cb8d28c684406ccfaa23199da349"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNjo1NzoyNFrOH0IJew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNjo1ODowOFrOH0ILkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQyMTQ5OQ==", "bodyText": "I would add a String argument version as well, just to make it easier to filter without parsing into a bunch of ComponentURIs.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/715#discussion_r524421499", "createdAt": "2020-11-16T16:57:24Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapMappingSearchRequestBuilder.java", "diffHunk": "@@ -53,12 +54,8 @@ public ConceptMapMappingSearchRequestBuilder filterByMapTargets(Iterable<String>\n \t\treturn addOption(OptionKey.MAP_TARGET, mapTargets);\n \t}\n \t\n-\tpublic ConceptMapMappingSearchRequestBuilder filterByComponentId(String componentId) {\n-\t\treturn addOption(OptionKey.COMPONENT, componentId);\n-\t}\n-\t\n-\tpublic ConceptMapMappingSearchRequestBuilder filterByComponentIds(Iterable<String> componentIds) {\n-\t\treturn addOption(OptionKey.COMPONENT, componentIds);\n+\tpublic ConceptMapMappingSearchRequestBuilder filterByComponentUri(ComponentURI uri) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "369cffa73672cb8d28c684406ccfaa23199da349"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQyMjAzNQ==", "bodyText": "This option should still support multi-valued search.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/715#discussion_r524422035", "createdAt": "2020-11-16T16:58:08Z", "author": {"login": "cmark"}, "path": "snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/datastore/request/SnomedConceptMapSearchRequestEvaluator.java", "diffHunk": "@@ -264,7 +266,7 @@ private SnomedReferenceSetMembers fetchRefsetMembers(CodeSystemURI uri, BranchCo\n \t\tfinal String searchAfter = search.get(OptionKey.AFTER, String.class);\n \t\tfinal List<ExtendedLocale> locales = search.getList(OptionKey.LOCALES, ExtendedLocale.class);\n \t\tfinal Collection<String> referencedComponentIds = search.containsKey(OptionKey.REFERENCED_COMPONENT) ? search.getCollection(OptionKey.REFERENCED_COMPONENT, String.class) : null;\n-\t\tfinal Collection<String> componentIds = search.containsKey(OptionKey.COMPONENT) ? search.getCollection(OptionKey.COMPONENT, String.class) : null;\n+\t\tfinal ComponentURI componentUri = search.containsKey(OptionKey.COMPONENT_URI) ? search.get(OptionKey.COMPONENT_URI, ComponentURI.class) : null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "369cffa73672cb8d28c684406ccfaa23199da349"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "109c4f27ce67bae93ff7587fff29243f0d5067e0", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/109c4f27ce67bae93ff7587fff29243f0d5067e0", "committedDate": "2020-11-17T13:45:40Z", "message": "SO-4477: support filtering on multiple componentUris"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd8dd721421074c31630536169170984bc2c0ccc", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/fd8dd721421074c31630536169170984bc2c0ccc", "committedDate": "2020-11-17T14:11:47Z", "message": "Merge remote-tracking branch 'origin/7.x' into issue/SO-4477-supply-component-uri-in-all-map-page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0224d513cd93dc03f80488069be178a371e4d81", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/c0224d513cd93dc03f80488069be178a371e4d81", "committedDate": "2020-11-17T14:18:40Z", "message": "SO-4477: use collection instead of List"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "def601e248a7af9dddca4e37750d3b8bd03f58d8", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/def601e248a7af9dddca4e37750d3b8bd03f58d8", "committedDate": "2020-11-17T15:20:49Z", "message": "SO-4477: if refset's map target terminology contains more than 1\n\ncodeSystem consider as unspecified"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "badc52dff78a8fdb4b9953aedefd8a637881abf2", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/badc52dff78a8fdb4b9953aedefd8a637881abf2", "committedDate": "2020-11-17T15:21:14Z", "message": "SO-4477: add test on filtering by multiple componentUri"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f89726fb069f0e134c594c32cb66553cc7f9fef7", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/f89726fb069f0e134c594c32cb66553cc7f9fef7", "committedDate": "2020-11-17T15:36:22Z", "message": "SO-4477: use assertEquals when asserting total result"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b4a3215fbd0ed298546fa61bfb54b4266c0fb27", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/1b4a3215fbd0ed298546fa61bfb54b4266c0fb27", "committedDate": "2020-11-19T16:28:40Z", "message": "Merge remote-tracking branch 'origin/7.x' into issue/SO-4477-supply-component-uri-in-all-map-page"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0ODgxODI3", "url": "https://github.com/b2ihealthcare/snow-owl/pull/715#pullrequestreview-534881827", "createdAt": "2020-11-19T21:46:40Z", "commit": {"oid": "1b4a3215fbd0ed298546fa61bfb54b4266c0fb27"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMTo0Njo0MFrOH2zKOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMTo0Njo1OVrOH2zK5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzIyMzM1Mg==", "bodyText": "But you still parse it into ComponentURIs. That is not actually necessary since you will be deserializing into a String to match the field in the index. Could you please use raw Strings instead? Thanks!", "url": "https://github.com/b2ihealthcare/snow-owl/pull/715#discussion_r527223352", "createdAt": "2020-11-19T21:46:40Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapMappingSearchRequestBuilder.java", "diffHunk": "@@ -53,12 +54,8 @@ public ConceptMapMappingSearchRequestBuilder filterByMapTargets(Iterable<String>\n \t\treturn addOption(OptionKey.MAP_TARGET, mapTargets);\n \t}\n \t\n-\tpublic ConceptMapMappingSearchRequestBuilder filterByComponentId(String componentId) {\n-\t\treturn addOption(OptionKey.COMPONENT, componentId);\n-\t}\n-\t\n-\tpublic ConceptMapMappingSearchRequestBuilder filterByComponentIds(Iterable<String> componentIds) {\n-\t\treturn addOption(OptionKey.COMPONENT, componentIds);\n+\tpublic ConceptMapMappingSearchRequestBuilder filterByComponentUri(ComponentURI uri) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQyMTQ5OQ=="}, "originalCommit": {"oid": "369cffa73672cb8d28c684406ccfaa23199da349"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzIyMzUyNQ==", "bodyText": "Same here.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/715#discussion_r527223525", "createdAt": "2020-11-19T21:46:59Z", "author": {"login": "cmark"}, "path": "snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/datastore/request/SnomedRefSetMemberSearchRequestBuilder.java", "diffHunk": "@@ -91,11 +92,19 @@ public SnomedRefSetMemberSearchRequestBuilder filterByReferencedComponentTypes(I\n \t\treturn addOption(OptionKey.REFERENCED_COMPONENT_TYPE, referencedComponentTypes);\n \t}\n \t\n+\tpublic SnomedRefSetMemberSearchRequestBuilder filterByComponentUri(String uri) {\n+\t\treturn filterByComponentUri(ComponentURI.of(uri));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b4a3215fbd0ed298546fa61bfb54b4266c0fb27"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b59f456f0aa0e15858f24d160e7bc296462f3383", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/b59f456f0aa0e15858f24d160e7bc296462f3383", "committedDate": "2020-11-20T15:04:27Z", "message": "Merge remote-tracking branch 'origin/7.x' into issue/SO-4477-supply-component-uri-in-all-map-page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a29a4fa133618ff7a4d5fd54a602003d435d55e", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/7a29a4fa133618ff7a4d5fd54a602003d435d55e", "committedDate": "2020-11-20T15:20:14Z", "message": "SO-4477: store components String representation and rename methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13518ce7521dce9dc47e2ca6cd696653e326ea00", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/13518ce7521dce9dc47e2ca6cd696653e326ea00", "committedDate": "2020-11-20T15:24:57Z", "message": "SO-4477: rename method parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f4f7c1b29151f2f48ead0d04d18e3c357a36cd2", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/7f4f7c1b29151f2f48ead0d04d18e3c357a36cd2", "committedDate": "2020-11-20T16:13:59Z", "message": "SO-4477: fix test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5fbc552c34954032b7f1b19e7b8c3cb34ad7782", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/d5fbc552c34954032b7f1b19e7b8c3cb34ad7782", "committedDate": "2020-11-20T16:18:32Z", "message": "SO-4477: rename method parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61432eab258aa86b55bf4a22e6028790eb454cc7", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/61432eab258aa86b55bf4a22e6028790eb454cc7", "committedDate": "2020-11-20T16:27:24Z", "message": "SO-4477: apply filter properly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66bd2d3a4739cfa3a13bfaf0e70baed7f5118a38", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/66bd2d3a4739cfa3a13bfaf0e70baed7f5118a38", "committedDate": "2020-11-20T16:30:46Z", "message": "SO-4477: remove unnecessary builder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a6b12a4cb84960947348ffc4fe76c3fa1d9898c", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/1a6b12a4cb84960947348ffc4fe76c3fa1d9898c", "committedDate": "2020-11-20T16:31:37Z", "message": "SO-4477: remove whitespace"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcfcd8edaabe237f1b552926470a7caa5cd447cd", "author": {"user": {"login": "kovacstomi", "name": "Tam\u00e1s Kov\u00e1cs"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/bcfcd8edaabe237f1b552926470a7caa5cd447cd", "committedDate": "2020-11-20T16:42:46Z", "message": "Merge remote-tracking branch 'origin/7.x' into issue/SO-4477-supply-component-uri-in-all-map-page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f725c7ca28592b73d71ca4761c89652bb4893a63", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/f725c7ca28592b73d71ca4761c89652bb4893a63", "committedDate": "2020-11-22T17:00:42Z", "message": "Merge branch '7.x' into\nissue/SO-4477-supply-component-uri-in-all-map-page\n\nConflicts:\n\tsnomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/datastore/request/SnomedConceptMapSearchRequestEvaluator.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MDgxNDYy", "url": "https://github.com/b2ihealthcare/snow-owl/pull/715#pullrequestreview-536081462", "createdAt": "2020-11-22T17:03:37Z", "commit": {"oid": "f725c7ca28592b73d71ca4761c89652bb4893a63"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4848, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}