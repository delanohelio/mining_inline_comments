{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNDI5Mzg3", "number": 597, "title": "Release v7.7.0 fixes/changes", "bodyText": "", "createdAt": "2020-06-26T07:33:26Z", "url": "https://github.com/b2ihealthcare/snow-owl/pull/597", "merged": true, "mergeCommit": {"oid": "392d0c80b343bcb27a0a8c6170dc25c9d132af0d"}, "closed": true, "closedAt": "2020-06-26T09:18:46Z", "author": {"login": "cmark"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuWSupAH2gAyNDQwNDI5Mzg3OmQ3YThlNzY2YTE1YWUyNTMxNmZkZjg0MTBhMTMyMmIxMThkOTVlZTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcu_r5hAFqTQzODE0MzM2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d7a8e766a15ae25316fdf8410a1322b118d95ee8", "author": {"user": {"login": "molnarlaura", "name": "Laura Alexandra Moln\u00e1r"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/d7a8e766a15ae25316fdf8410a1322b118d95ee8", "committedDate": "2020-06-24T09:04:58Z", "message": "[vs] support query evaluation in non SNOMED terminologies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23889a7aad4a301f8360d8ec6bba0a7895962077", "author": {"user": {"login": "molnarlaura", "name": "Laura Alexandra Moln\u00e1r"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/23889a7aad4a301f8360d8ec6bba0a7895962077", "committedDate": "2020-06-24T09:33:31Z", "message": "[vs] fix getIds()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5885667e100330d480495b3092ada7da1e1ecb2b", "author": {"user": {"login": "molnarlaura", "name": "Laura Alexandra Moln\u00e1r"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/5885667e100330d480495b3092ada7da1e1ecb2b", "committedDate": "2020-06-24T14:31:40Z", "message": "[owl authoring] check if there is at least one axiom or relationship"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76e491e89049d7547131e9e3fed9f5cb9dd22ca3", "author": {"user": {"login": "nagyo", "name": "G\u00e1bor Nagy"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/76e491e89049d7547131e9e3fed9f5cb9dd22ca3", "committedDate": "2020-06-25T09:33:58Z", "message": "[core] Add helper method to retrieve authorized system bus"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "322e4fa23c02ac8b043707f40a6c4305835e13bf", "author": {"user": {"login": "molnarlaura", "name": "Laura Alexandra Moln\u00e1r"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/322e4fa23c02ac8b043707f40a6c4305835e13bf", "committedDate": "2020-06-25T12:49:50Z", "message": "[validation] connect filtering with toolingId"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MDgwNjUx", "url": "https://github.com/b2ihealthcare/snow-owl/pull/597#pullrequestreview-438080651", "createdAt": "2020-06-26T07:44:16Z", "commit": {"oid": "322e4fa23c02ac8b043707f40a6c4305835e13bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNzo0NDoxNlrOGpXAzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNzo0NDoxNlrOGpXAzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAyMTgzOA==", "bodyText": "Isn't there a need here to check array length? I'm also not sure whether it is guaranteed that the query string does have at least one whitespace or not?", "url": "https://github.com/b2ihealthcare/snow-owl/pull/597#discussion_r446021838", "createdAt": "2020-06-26T07:44:16Z", "author": {"login": "nagyo"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptSearchRequestEvaluator.java", "diffHunk": "@@ -113,4 +116,17 @@ public Concepts evaluate(CodeSystemURI uri, BranchContext context, Options searc\n \t\t}\n \t};\n \t\n+\t/**\n+\t * Support value set clause evaluation\n+\t * @since 7.7\n+\t */\n+\tpublic static Collection<String> getIds(Collection<String> querys) {\n+\t\tCollection<String> ids = Lists.newArrayList();\n+\t\tquerys.forEach(query -> {\n+\t\t\tString[] id = query.replaceAll(\"\\\\|\", \"\").split(\" \", 2);\n+\t\t\tids.add(id[0]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "322e4fa23c02ac8b043707f40a6c4305835e13bf"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a66ac47419e98495e09b74c906bc1c5d3b09328c", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/a66ac47419e98495e09b74c906bc1c5d3b09328c", "committedDate": "2020-06-26T08:15:51Z", "message": "[core] support extracting ids from ID|TERM| like query strings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTAxNDU4", "url": "https://github.com/b2ihealthcare/snow-owl/pull/597#pullrequestreview-438101458", "createdAt": "2020-06-26T08:17:28Z", "commit": {"oid": "322e4fa23c02ac8b043707f40a6c4305835e13bf"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MDk5ODAz", "url": "https://github.com/b2ihealthcare/snow-owl/pull/597#pullrequestreview-438099803", "createdAt": "2020-06-26T08:14:55Z", "commit": {"oid": "322e4fa23c02ac8b043707f40a6c4305835e13bf"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwODoxNDo1NVrOGpX5_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwODoxNjoyN1rOGpX9Ag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAzNjQ3OQ==", "bodyText": "This will throw UnsupportedOperationException if no extension has been registered for a tooling ID.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/597#discussion_r446036479", "createdAt": "2020-06-26T08:14:55Z", "author": {"login": "apeteri"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/validation/issue/ValidationIssueSearchRequest.java", "diffHunk": "@@ -175,10 +175,11 @@ protected Expression prepareQuery(ServiceProvider context) {\n \t\t}\n \t\t\n \t\tif (containsKey(OptionKey.DETAILS)) {\n-\t\t\tfinal Collection<ValidationIssueDetailExtension> validationDetailExtensions = ValidationIssueDetailExtensionProvider.INSTANCE.getExtensions();\n-\t\t\tfor (ValidationIssueDetailExtension extension : validationDetailExtensions) {\n+\t\t\tfinal Collection<String> toolingIds = getCollection(OptionKey.TOOLING_ID, String.class);\n+\t\t\tfor (String toolingId : toolingIds) {\n+\t\t\t\tfinal ValidationIssueDetailExtension validationDetailExtension = ValidationIssueDetailExtensionProvider.INSTANCE.getExtensions(toolingId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "322e4fa23c02ac8b043707f40a6c4305835e13bf"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAzNzI1MA==", "bodyText": "If there are multiple toolingId values given, and one adds their own query clauses to the builder, we might end up with a final query that is \"impossible\".", "url": "https://github.com/b2ihealthcare/snow-owl/pull/597#discussion_r446037250", "createdAt": "2020-06-26T08:16:27Z", "author": {"login": "apeteri"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/validation/issue/ValidationIssueSearchRequest.java", "diffHunk": "@@ -175,10 +175,11 @@ protected Expression prepareQuery(ServiceProvider context) {\n \t\t}\n \t\t\n \t\tif (containsKey(OptionKey.DETAILS)) {\n-\t\t\tfinal Collection<ValidationIssueDetailExtension> validationDetailExtensions = ValidationIssueDetailExtensionProvider.INSTANCE.getExtensions();\n-\t\t\tfor (ValidationIssueDetailExtension extension : validationDetailExtensions) {\n+\t\t\tfinal Collection<String> toolingIds = getCollection(OptionKey.TOOLING_ID, String.class);\n+\t\t\tfor (String toolingId : toolingIds) {\n+\t\t\t\tfinal ValidationIssueDetailExtension validationDetailExtension = ValidationIssueDetailExtensionProvider.INSTANCE.getExtensions(toolingId);\n \t\t\t\tOptions options = getOptions(OptionKey.DETAILS);\n-\t\t\t\textension.prepareQuery(queryBuilder, options);\n+\t\t\t\tvalidationDetailExtension.prepareQuery(queryBuilder, options);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "322e4fa23c02ac8b043707f40a6c4305835e13bf"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01a3de1cf8df01ba0ff87c6b13f28753b98b4726", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/01a3de1cf8df01ba0ff87c6b13f28753b98b4726", "committedDate": "2020-06-26T08:29:15Z", "message": "[core] fix multiple tooling ID filter issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTEzMzAw", "url": "https://github.com/b2ihealthcare/snow-owl/pull/597#pullrequestreview-438113300", "createdAt": "2020-06-26T08:34:41Z", "commit": {"oid": "01a3de1cf8df01ba0ff87c6b13f28753b98b4726"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "253a03eee79bf8a34a3342e7c56d84eecccd663d", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/253a03eee79bf8a34a3342e7c56d84eecccd663d", "committedDate": "2020-06-26T09:14:26Z", "message": "[validation] use toolingIDs to filter details by corresponding tooling..\n\n...specific queries only"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTQzMzYy", "url": "https://github.com/b2ihealthcare/snow-owl/pull/597#pullrequestreview-438143362", "createdAt": "2020-06-26T09:18:34Z", "commit": {"oid": "253a03eee79bf8a34a3342e7c56d84eecccd663d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4859, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}