{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxMTIzNjUz", "number": 691, "title": "Remove obsolete types/values/settings", "bodyText": "This PR removes some unused, obsolete features from the index module.", "createdAt": "2020-10-11T11:38:46Z", "url": "https://github.com/b2ihealthcare/snow-owl/pull/691", "merged": true, "mergeCommit": {"oid": "c667a73692c67897e71b53c55ae5a095b71be0d2"}, "closed": true, "closedAt": "2020-10-12T11:49:28Z", "author": {"login": "cmark"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdRdTDEAH2gAyNTAxMTIzNjUzOjRlMWQ1NTVkN2NjNWMyYTNiOWM0NzcxM2UzNzM3YTJhNWI0YzIxMDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdRykg2gFqTUwNjU0Nzg2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4e1d555d7cc5c2a3b9c47713e3737a2a5b4c2109", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/4e1d555d7cc5c2a3b9c47713e3737a2a5b4c2109", "committedDate": "2020-10-11T11:02:00Z", "message": "[index] remove no longer used `_hash` field from revision documents"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43e667e8a2d2575882b7d9c3156155a844d5fae4", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/43e667e8a2d2575882b7d9c3156155a844d5fae4", "committedDate": "2020-10-11T11:03:49Z", "message": "[index] rename `getHashedFields()` to `getRevisionFields`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db2ca0d9ac4a824fd0712aad7218d4580f51bbc0", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/db2ca0d9ac4a824fd0712aad7218d4580f51bbc0", "committedDate": "2020-10-11T11:25:16Z", "message": "[index] use constants when retrieving ES metadata fields"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "423437723a88f56b86317d311dcfb9be6cc74a00", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/423437723a88f56b86317d311dcfb9be6cc74a00", "committedDate": "2020-10-11T11:29:51Z", "message": "[index] remove WithId interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3406f35fc3668e661d1ac5a42264cfd27fb0132", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/a3406f35fc3668e661d1ac5a42264cfd27fb0132", "committedDate": "2020-10-11T11:30:14Z", "message": "[index] organize imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NDA2MTA3", "url": "https://github.com/b2ihealthcare/snow-owl/pull/691#pullrequestreview-506406107", "createdAt": "2020-10-12T08:34:21Z", "commit": {"oid": "a3406f35fc3668e661d1ac5a42264cfd27fb0132"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozNDoyMVrOHf0f-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozNTo0NVrOHf0kKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzEyODA1OA==", "bodyText": "The 0-arg version of fetchSource returns a FetchSourceContext which holds the currently configured values, but does not modify any behavior: https://github.com/elastic/elasticsearch/blob/master/server/src/main/java/org/elasticsearch/search/fetch/subphase/FetchSourceContext.java\nIf you'd like to control source filtering, use the single boolean form, but retrieving the source document is already the default: https://www.elastic.co/guide/en/elasticsearch/client/java-rest/master/java-rest-high-search.html#_source_filtering", "url": "https://github.com/b2ihealthcare/snow-owl/pull/691#discussion_r503128058", "createdAt": "2020-10-12T08:34:21Z", "author": {"login": "apeteri"}, "path": "commons/com.b2international.index/src/com/b2international/index/es/EsDocumentSearcher.java", "diffHunk": "@@ -233,7 +230,7 @@ public EsDocumentSearcher(EsIndexAdmin admin, ObjectMapper mapper) {\n \tprivate <T> boolean applySourceFiltering(List<String> fields, boolean isDocIdOnly, final DocumentMapping mapping, final SearchSourceBuilder reqSource) {\n \t\t// No specific fields requested? Use _source to retrieve all of them\n \t\tif (fields.isEmpty()) {\n-\t\t\treqSource.fetchSource(null, EXCLUDED_SOURCE_FIELDS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3406f35fc3668e661d1ac5a42264cfd27fb0132"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzEyOTEyOA==", "bodyText": "The same thing applies to TopHitsAggregationBuilder \u2013 this method is a simple getter.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/691#discussion_r503129128", "createdAt": "2020-10-12T08:35:45Z", "author": {"login": "apeteri"}, "path": "commons/com.b2international.index/src/com/b2international/index/es/EsDocumentSearcher.java", "diffHunk": "@@ -518,7 +512,7 @@ private void addSort(DocumentMapping mapping, SearchSourceBuilder reqSource, Sor\n \t\t\tif (fetchSource) {\n \t\t\t\ttopHitsAgg\n \t\t\t\t\t.storedFields(STORED_FIELDS_ID_ONLY)\n-\t\t\t\t\t.fetchSource(null, EXCLUDED_SOURCE_FIELDS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3406f35fc3668e661d1ac5a42264cfd27fb0132"}, "originalPosition": 61}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19778bee15ee831056788f238dbd9374fd652854", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/19778bee15ee831056788f238dbd9374fd652854", "committedDate": "2020-10-12T11:40:58Z", "message": "[index] use boolean arg method instead of empty-arg getter\n\nThanks @apeteri."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NTQ3ODYw", "url": "https://github.com/b2ihealthcare/snow-owl/pull/691#pullrequestreview-506547860", "createdAt": "2020-10-12T11:49:05Z", "commit": {"oid": "19778bee15ee831056788f238dbd9374fd652854"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4902, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}