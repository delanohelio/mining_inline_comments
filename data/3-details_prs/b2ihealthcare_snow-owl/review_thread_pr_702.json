{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExNTQyMjcw", "number": 702, "reviewThreads": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMzo1MjoyN1rOEy0oOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNDowOTo0NVrOEy1Jdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNzI2NTIyOnYy", "diffSide": "RIGHT", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/codesystem/CodeSystemRequests.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMzo1MjoyN1rOHprHGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMzo1MjoyN1rOHprHGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ1OTk5NQ==", "bodyText": "This parameter should be an option, not a mandatory parameter. By default compare by ComponentURI (CodeSystem + Code).", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513459995", "createdAt": "2020-10-28T13:52:27Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/codesystem/CodeSystemRequests.java", "diffHunk": "@@ -105,8 +107,8 @@ public static AllCodeSystemSearchRequestBuilder prepareSearchAllCodeSystems(){\n \t\treturn new AllCodeSystemSearchRequestBuilder();\n \t}\n \t\n-\tpublic static ConceptMapCompareRequestBuilder prepareConceptMapCompare(ComponentURI baseConceptMapURI, ComponentURI compareConceptMapURI){\n-\t\treturn new ConceptMapCompareRequestBuilder(baseConceptMapURI, compareConceptMapURI);\n+\tpublic static ConceptMapCompareRequestBuilder prepareConceptMapCompare(ComponentURI baseConceptMapURI, ComponentURI compareConceptMapURI, Set<ConceptMapCompareConfigurationProperties> selectedConfig){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNzI3MDYzOnYy", "diffSide": "RIGHT", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareChangeKind.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMzo1MzozOFrOHprKgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMzo1MzozOFrOHprKgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ2MDg2NQ==", "bodyText": "How about using the enum ordinal as priority? If that's not good, then how about using int  for the priority field?", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513460865", "createdAt": "2020-10-28T13:53:38Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareChangeKind.java", "diffHunk": "@@ -21,29 +21,35 @@\n  * @since 7.11\n  */\n public enum ConceptMapCompareChangeKind {\n-\tPRESENT(\"Present\"),\n-\tMISSING(\"Missing\"),\n+\tPRESENT(\"Present\", \"2\"),\n+\tMISSING(\"Missing\", \"1\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNzI3MzYxOnYy", "diffSide": "RIGHT", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareConfigurationProperties.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMzo1NDoxN1rOHprMYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMDoxNDowNlrOHp7sNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ2MTM0NQ==", "bodyText": "\u26a0\ufe0f Fix the indentation!", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513461345", "createdAt": "2020-10-28T13:54:17Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareConfigurationProperties.java", "diffHunk": "@@ -0,0 +1,88 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.compare;\n+\n+import java.util.Objects;\n+import java.util.Set;\n+import java.util.function.BiFunction;\n+\n+import com.b2international.snowowl.core.domain.ConceptMapMapping;\n+import com.google.common.collect.ImmutableSet;\n+\n+/**\n+ * @since 7.11\n+ */\n+public enum ConceptMapCompareConfigurationProperties {\n+\n+\tCODE_SYSTEM(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUzMzIwNw==", "bodyText": "Ctrl+I does not change anything, I think the indentation is OK.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513533207", "createdAt": "2020-10-28T15:21:46Z", "author": {"login": "molnarlaura"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareConfigurationProperties.java", "diffHunk": "@@ -0,0 +1,88 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.compare;\n+\n+import java.util.Objects;\n+import java.util.Set;\n+import java.util.function.BiFunction;\n+\n+import com.b2international.snowowl.core.domain.ConceptMapMapping;\n+import com.google.common.collect.ImmutableSet;\n+\n+/**\n+ * @since 7.11\n+ */\n+public enum ConceptMapCompareConfigurationProperties {\n+\n+\tCODE_SYSTEM(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ2MTM0NQ=="}, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzczMTYzOA==", "bodyText": "No, it's not \ud83d\ude22 Fixed it.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513731638", "createdAt": "2020-10-28T20:14:06Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareConfigurationProperties.java", "diffHunk": "@@ -0,0 +1,88 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.compare;\n+\n+import java.util.Objects;\n+import java.util.Set;\n+import java.util.function.BiFunction;\n+\n+import com.b2international.snowowl.core.domain.ConceptMapMapping;\n+import com.google.common.collect.ImmutableSet;\n+\n+/**\n+ * @since 7.11\n+ */\n+public enum ConceptMapCompareConfigurationProperties {\n+\n+\tCODE_SYSTEM(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ2MTM0NQ=="}, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNzI4MjI1OnYy", "diffSide": "RIGHT", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareResult.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMzo1NTo1M1rOHprRZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNTowNjozOVrOHpu1pQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ2MjYzMA==", "bodyText": "Use List.copyOf() if possible.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513462630", "createdAt": "2020-10-28T13:55:53Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareResult.java", "diffHunk": "@@ -36,27 +33,27 @@\n \tprivate final int totalAdded;\n \tprivate final int totalRemoved;\n \tprivate final int totalChanged;\n+\tprivate final int totalUnchanged;\n \tprivate final int limit;\n \t\n \tprivate final List<ConceptMapMapping> addedMembers;\n \tprivate final List<ConceptMapMapping> removedMembers;\n \t\n-\tprivate final Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers;\n+\tprivate final List<ConceptMapMapping> changedMembers;\n \tprivate final List<ConceptMapMapping> unchangedMembers;\n \t\n-\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n+\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, List<ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n \t\t\n-\t\tthis.addedMembers = addedMembers.stream().limit(limit).collect(toList());\n-\t\tthis.removedMembers = removedMembers.stream().limit(limit).collect(toList());\n+\t\tthis.addedMembers = addedMembers.stream().collect(toList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUyMTA2MQ==", "bodyText": "Done", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513521061", "createdAt": "2020-10-28T15:06:39Z", "author": {"login": "molnarlaura"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareResult.java", "diffHunk": "@@ -36,27 +33,27 @@\n \tprivate final int totalAdded;\n \tprivate final int totalRemoved;\n \tprivate final int totalChanged;\n+\tprivate final int totalUnchanged;\n \tprivate final int limit;\n \t\n \tprivate final List<ConceptMapMapping> addedMembers;\n \tprivate final List<ConceptMapMapping> removedMembers;\n \t\n-\tprivate final Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers;\n+\tprivate final List<ConceptMapMapping> changedMembers;\n \tprivate final List<ConceptMapMapping> unchangedMembers;\n \t\n-\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n+\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, List<ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n \t\t\n-\t\tthis.addedMembers = addedMembers.stream().limit(limit).collect(toList());\n-\t\tthis.removedMembers = removedMembers.stream().limit(limit).collect(toList());\n+\t\tthis.addedMembers = addedMembers.stream().collect(toList());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ2MjYzMA=="}, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNzI4MzY5OnYy", "diffSide": "RIGHT", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareResult.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMzo1NjoxMlrOHprSXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNTowNjo1NFrOHpu2hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ2Mjg3OA==", "bodyText": "Same here.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513462878", "createdAt": "2020-10-28T13:56:12Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareResult.java", "diffHunk": "@@ -36,27 +33,27 @@\n \tprivate final int totalAdded;\n \tprivate final int totalRemoved;\n \tprivate final int totalChanged;\n+\tprivate final int totalUnchanged;\n \tprivate final int limit;\n \t\n \tprivate final List<ConceptMapMapping> addedMembers;\n \tprivate final List<ConceptMapMapping> removedMembers;\n \t\n-\tprivate final Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers;\n+\tprivate final List<ConceptMapMapping> changedMembers;\n \tprivate final List<ConceptMapMapping> unchangedMembers;\n \t\n-\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n+\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, List<ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n \t\t\n-\t\tthis.addedMembers = addedMembers.stream().limit(limit).collect(toList());\n-\t\tthis.removedMembers = removedMembers.stream().limit(limit).collect(toList());\n+\t\tthis.addedMembers = addedMembers.stream().collect(toList());\n+\t\tthis.removedMembers = removedMembers.stream().collect(toList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUyMTI4Nw==", "bodyText": "Done", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513521287", "createdAt": "2020-10-28T15:06:54Z", "author": {"login": "molnarlaura"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareResult.java", "diffHunk": "@@ -36,27 +33,27 @@\n \tprivate final int totalAdded;\n \tprivate final int totalRemoved;\n \tprivate final int totalChanged;\n+\tprivate final int totalUnchanged;\n \tprivate final int limit;\n \t\n \tprivate final List<ConceptMapMapping> addedMembers;\n \tprivate final List<ConceptMapMapping> removedMembers;\n \t\n-\tprivate final Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers;\n+\tprivate final List<ConceptMapMapping> changedMembers;\n \tprivate final List<ConceptMapMapping> unchangedMembers;\n \t\n-\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n+\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, List<ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n \t\t\n-\t\tthis.addedMembers = addedMembers.stream().limit(limit).collect(toList());\n-\t\tthis.removedMembers = removedMembers.stream().limit(limit).collect(toList());\n+\t\tthis.addedMembers = addedMembers.stream().collect(toList());\n+\t\tthis.removedMembers = removedMembers.stream().collect(toList());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ2Mjg3OA=="}, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNzI4NDI2OnYy", "diffSide": "RIGHT", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareResult.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMzo1NjoxN1rOHprSrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNTowNzowMlrOHpu3DA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ2Mjk1Ng==", "bodyText": "Same here.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513462956", "createdAt": "2020-10-28T13:56:17Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareResult.java", "diffHunk": "@@ -36,27 +33,27 @@\n \tprivate final int totalAdded;\n \tprivate final int totalRemoved;\n \tprivate final int totalChanged;\n+\tprivate final int totalUnchanged;\n \tprivate final int limit;\n \t\n \tprivate final List<ConceptMapMapping> addedMembers;\n \tprivate final List<ConceptMapMapping> removedMembers;\n \t\n-\tprivate final Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers;\n+\tprivate final List<ConceptMapMapping> changedMembers;\n \tprivate final List<ConceptMapMapping> unchangedMembers;\n \t\n-\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n+\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, List<ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n \t\t\n-\t\tthis.addedMembers = addedMembers.stream().limit(limit).collect(toList());\n-\t\tthis.removedMembers = removedMembers.stream().limit(limit).collect(toList());\n+\t\tthis.addedMembers = addedMembers.stream().collect(toList());\n+\t\tthis.removedMembers = removedMembers.stream().collect(toList());\n \t\t\n-\t\tBuilder<ConceptMapMapping, ConceptMapMapping> limitedMembers = ImmutableMultimap.builder();\n-\t\tchangedMembers.entries().stream().limit(limit).forEach(limitedMembers::put);\n-\t\tthis.changedMembers = limitedMembers.build();\n+\t\tthis.changedMembers = changedMembers.stream().collect(toList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUyMTQyMA==", "bodyText": "Done", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513521420", "createdAt": "2020-10-28T15:07:02Z", "author": {"login": "molnarlaura"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareResult.java", "diffHunk": "@@ -36,27 +33,27 @@\n \tprivate final int totalAdded;\n \tprivate final int totalRemoved;\n \tprivate final int totalChanged;\n+\tprivate final int totalUnchanged;\n \tprivate final int limit;\n \t\n \tprivate final List<ConceptMapMapping> addedMembers;\n \tprivate final List<ConceptMapMapping> removedMembers;\n \t\n-\tprivate final Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers;\n+\tprivate final List<ConceptMapMapping> changedMembers;\n \tprivate final List<ConceptMapMapping> unchangedMembers;\n \t\n-\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n+\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, List<ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n \t\t\n-\t\tthis.addedMembers = addedMembers.stream().limit(limit).collect(toList());\n-\t\tthis.removedMembers = removedMembers.stream().limit(limit).collect(toList());\n+\t\tthis.addedMembers = addedMembers.stream().collect(toList());\n+\t\tthis.removedMembers = removedMembers.stream().collect(toList());\n \t\t\n-\t\tBuilder<ConceptMapMapping, ConceptMapMapping> limitedMembers = ImmutableMultimap.builder();\n-\t\tchangedMembers.entries().stream().limit(limit).forEach(limitedMembers::put);\n-\t\tthis.changedMembers = limitedMembers.build();\n+\t\tthis.changedMembers = changedMembers.stream().collect(toList());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ2Mjk1Ng=="}, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNzI4OTM0OnYy", "diffSide": "RIGHT", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareResult.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMzo1NzoxM1rOHprVwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNTowNzoxOVrOHpu37g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ2Mzc0Ng==", "bodyText": "Magic number! Divided by two? Why (because of counting both base and compare side of the change)? Please add a comment.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513463746", "createdAt": "2020-10-28T13:57:13Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareResult.java", "diffHunk": "@@ -36,27 +33,27 @@\n \tprivate final int totalAdded;\n \tprivate final int totalRemoved;\n \tprivate final int totalChanged;\n+\tprivate final int totalUnchanged;\n \tprivate final int limit;\n \t\n \tprivate final List<ConceptMapMapping> addedMembers;\n \tprivate final List<ConceptMapMapping> removedMembers;\n \t\n-\tprivate final Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers;\n+\tprivate final List<ConceptMapMapping> changedMembers;\n \tprivate final List<ConceptMapMapping> unchangedMembers;\n \t\n-\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n+\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, List<ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n \t\t\n-\t\tthis.addedMembers = addedMembers.stream().limit(limit).collect(toList());\n-\t\tthis.removedMembers = removedMembers.stream().limit(limit).collect(toList());\n+\t\tthis.addedMembers = addedMembers.stream().collect(toList());\n+\t\tthis.removedMembers = removedMembers.stream().collect(toList());\n \t\t\n-\t\tBuilder<ConceptMapMapping, ConceptMapMapping> limitedMembers = ImmutableMultimap.builder();\n-\t\tchangedMembers.entries().stream().limit(limit).forEach(limitedMembers::put);\n-\t\tthis.changedMembers = limitedMembers.build();\n+\t\tthis.changedMembers = changedMembers.stream().collect(toList());\n \t\tthis.unchangedMembers = ImmutableList.copyOf(unchangedMembers);\n \t\t\n \t\tthis.totalAdded = addedMembers.size();\n \t\tthis.totalRemoved = removedMembers.size();\n-\t\tthis.totalChanged = changedMembers.values().size();\n+\t\tthis.totalChanged = changedMembers.size()/2;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUyMTY0Ng==", "bodyText": "Fixed", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513521646", "createdAt": "2020-10-28T15:07:19Z", "author": {"login": "molnarlaura"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/compare/ConceptMapCompareResult.java", "diffHunk": "@@ -36,27 +33,27 @@\n \tprivate final int totalAdded;\n \tprivate final int totalRemoved;\n \tprivate final int totalChanged;\n+\tprivate final int totalUnchanged;\n \tprivate final int limit;\n \t\n \tprivate final List<ConceptMapMapping> addedMembers;\n \tprivate final List<ConceptMapMapping> removedMembers;\n \t\n-\tprivate final Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers;\n+\tprivate final List<ConceptMapMapping> changedMembers;\n \tprivate final List<ConceptMapMapping> unchangedMembers;\n \t\n-\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, Multimap<ConceptMapMapping, ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n+\tpublic ConceptMapCompareResult(List<ConceptMapMapping> addedMembers, List<ConceptMapMapping> removedMembers, List<ConceptMapMapping> changedMembers, Set<ConceptMapMapping> unchangedMembers, int limit) {\n \t\t\n-\t\tthis.addedMembers = addedMembers.stream().limit(limit).collect(toList());\n-\t\tthis.removedMembers = removedMembers.stream().limit(limit).collect(toList());\n+\t\tthis.addedMembers = addedMembers.stream().collect(toList());\n+\t\tthis.removedMembers = removedMembers.stream().collect(toList());\n \t\t\n-\t\tBuilder<ConceptMapMapping, ConceptMapMapping> limitedMembers = ImmutableMultimap.builder();\n-\t\tchangedMembers.entries().stream().limit(limit).forEach(limitedMembers::put);\n-\t\tthis.changedMembers = limitedMembers.build();\n+\t\tthis.changedMembers = changedMembers.stream().collect(toList());\n \t\tthis.unchangedMembers = ImmutableList.copyOf(unchangedMembers);\n \t\t\n \t\tthis.totalAdded = addedMembers.size();\n \t\tthis.totalRemoved = removedMembers.size();\n-\t\tthis.totalChanged = changedMembers.values().size();\n+\t\tthis.totalChanged = changedMembers.size()/2;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ2Mzc0Ng=="}, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNzMyODczOnYy", "diffSide": "RIGHT", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapCompareRequest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNDowNToyNFrOHpru3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNTowNzoyNlrOHpu4Tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ3MDE3Mw==", "bodyText": "Add a @NotEmpty validation annotation and also a default value set in the corresponding builder.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513470173", "createdAt": "2020-10-28T14:05:24Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapCompareRequest.java", "diffHunk": "@@ -16,44 +16,48 @@\n package com.b2international.snowowl.core.request;\n \n import java.util.List;\n-import java.util.Objects;\n import java.util.Set;\n+import java.util.stream.Collectors;\n \n import javax.validation.constraints.Min;\n \n import com.b2international.snowowl.core.codesystem.CodeSystemRequests;\n+import com.b2international.snowowl.core.compare.ConceptMapCompareConfigurationProperties;\n import com.b2international.snowowl.core.compare.ConceptMapCompareResult;\n+import com.b2international.snowowl.core.compare.MapCompareSourceAndTargetEquivalence;\n import com.b2international.snowowl.core.domain.BranchContext;\n import com.b2international.snowowl.core.domain.ConceptMapMapping;\n import com.b2international.snowowl.core.domain.ConceptMapMappings;\n import com.b2international.snowowl.core.uri.ComponentURI;\n+import com.google.common.base.Equivalence.Wrapper;\n import com.google.common.collect.ArrayListMultimap;\n-import com.google.common.collect.HashMultimap;\n import com.google.common.collect.ListMultimap;\n import com.google.common.collect.Lists;\n-import com.google.common.collect.Multimap;\n import com.google.common.collect.Sets;\n import com.google.common.collect.Sets.SetView;\n \n /**\n * @since 7.8\n */\n public final class ConceptMapCompareRequest extends ResourceRequest<BranchContext, ConceptMapCompareResult> {\n+\tpublic static final int DEFAULT_MEMBER_COMPARE_LIMIT = 50_000;\n \t\n \tprivate static final long serialVersionUID = 1L;\n \t\n \tprivate static final int DEFAULT_MEMBER_SCROLL_LIMIT = 10_000;\n \t\n \tprivate final ComponentURI baseConceptMapURI;\n \tprivate final ComponentURI compareConceptMapURI;\n+\tprivate final Set<ConceptMapCompareConfigurationProperties> selectedConfig;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUyMTc0Mg==", "bodyText": "Done", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513521742", "createdAt": "2020-10-28T15:07:26Z", "author": {"login": "molnarlaura"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapCompareRequest.java", "diffHunk": "@@ -16,44 +16,48 @@\n package com.b2international.snowowl.core.request;\n \n import java.util.List;\n-import java.util.Objects;\n import java.util.Set;\n+import java.util.stream.Collectors;\n \n import javax.validation.constraints.Min;\n \n import com.b2international.snowowl.core.codesystem.CodeSystemRequests;\n+import com.b2international.snowowl.core.compare.ConceptMapCompareConfigurationProperties;\n import com.b2international.snowowl.core.compare.ConceptMapCompareResult;\n+import com.b2international.snowowl.core.compare.MapCompareSourceAndTargetEquivalence;\n import com.b2international.snowowl.core.domain.BranchContext;\n import com.b2international.snowowl.core.domain.ConceptMapMapping;\n import com.b2international.snowowl.core.domain.ConceptMapMappings;\n import com.b2international.snowowl.core.uri.ComponentURI;\n+import com.google.common.base.Equivalence.Wrapper;\n import com.google.common.collect.ArrayListMultimap;\n-import com.google.common.collect.HashMultimap;\n import com.google.common.collect.ListMultimap;\n import com.google.common.collect.Lists;\n-import com.google.common.collect.Multimap;\n import com.google.common.collect.Sets;\n import com.google.common.collect.Sets.SetView;\n \n /**\n * @since 7.8\n */\n public final class ConceptMapCompareRequest extends ResourceRequest<BranchContext, ConceptMapCompareResult> {\n+\tpublic static final int DEFAULT_MEMBER_COMPARE_LIMIT = 50_000;\n \t\n \tprivate static final long serialVersionUID = 1L;\n \t\n \tprivate static final int DEFAULT_MEMBER_SCROLL_LIMIT = 10_000;\n \t\n \tprivate final ComponentURI baseConceptMapURI;\n \tprivate final ComponentURI compareConceptMapURI;\n+\tprivate final Set<ConceptMapCompareConfigurationProperties> selectedConfig;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ3MDE3Mw=="}, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNzM0MjQ2OnYy", "diffSide": "RIGHT", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapCompareRequest.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNDowODoxN1rOHpr3aQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNToyNDoxMVrOHpvsjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ3MjM2MQ==", "bodyText": "Where do you use this? 5000 is set on the corresponding builder.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513472361", "createdAt": "2020-10-28T14:08:17Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapCompareRequest.java", "diffHunk": "@@ -16,44 +16,48 @@\n package com.b2international.snowowl.core.request;\n \n import java.util.List;\n-import java.util.Objects;\n import java.util.Set;\n+import java.util.stream.Collectors;\n \n import javax.validation.constraints.Min;\n \n import com.b2international.snowowl.core.codesystem.CodeSystemRequests;\n+import com.b2international.snowowl.core.compare.ConceptMapCompareConfigurationProperties;\n import com.b2international.snowowl.core.compare.ConceptMapCompareResult;\n+import com.b2international.snowowl.core.compare.MapCompareSourceAndTargetEquivalence;\n import com.b2international.snowowl.core.domain.BranchContext;\n import com.b2international.snowowl.core.domain.ConceptMapMapping;\n import com.b2international.snowowl.core.domain.ConceptMapMappings;\n import com.b2international.snowowl.core.uri.ComponentURI;\n+import com.google.common.base.Equivalence.Wrapper;\n import com.google.common.collect.ArrayListMultimap;\n-import com.google.common.collect.HashMultimap;\n import com.google.common.collect.ListMultimap;\n import com.google.common.collect.Lists;\n-import com.google.common.collect.Multimap;\n import com.google.common.collect.Sets;\n import com.google.common.collect.Sets.SetView;\n \n /**\n * @since 7.8\n */\n public final class ConceptMapCompareRequest extends ResourceRequest<BranchContext, ConceptMapCompareResult> {\n+\tpublic static final int DEFAULT_MEMBER_COMPARE_LIMIT = 50_000;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUyODgwMQ==", "bodyText": "It is used in the CompareMappingSetsHandler's and SnomedConceptMapCompareHandler's onFinish validation.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513528801", "createdAt": "2020-10-28T15:16:12Z", "author": {"login": "molnarlaura"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapCompareRequest.java", "diffHunk": "@@ -16,44 +16,48 @@\n package com.b2international.snowowl.core.request;\n \n import java.util.List;\n-import java.util.Objects;\n import java.util.Set;\n+import java.util.stream.Collectors;\n \n import javax.validation.constraints.Min;\n \n import com.b2international.snowowl.core.codesystem.CodeSystemRequests;\n+import com.b2international.snowowl.core.compare.ConceptMapCompareConfigurationProperties;\n import com.b2international.snowowl.core.compare.ConceptMapCompareResult;\n+import com.b2international.snowowl.core.compare.MapCompareSourceAndTargetEquivalence;\n import com.b2international.snowowl.core.domain.BranchContext;\n import com.b2international.snowowl.core.domain.ConceptMapMapping;\n import com.b2international.snowowl.core.domain.ConceptMapMappings;\n import com.b2international.snowowl.core.uri.ComponentURI;\n+import com.google.common.base.Equivalence.Wrapper;\n import com.google.common.collect.ArrayListMultimap;\n-import com.google.common.collect.HashMultimap;\n import com.google.common.collect.ListMultimap;\n import com.google.common.collect.Lists;\n-import com.google.common.collect.Multimap;\n import com.google.common.collect.Sets;\n import com.google.common.collect.Sets.SetView;\n \n /**\n * @since 7.8\n */\n public final class ConceptMapCompareRequest extends ResourceRequest<BranchContext, ConceptMapCompareResult> {\n+\tpublic static final int DEFAULT_MEMBER_COMPARE_LIMIT = 50_000;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ3MjM2MQ=="}, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUzNTExNg==", "bodyText": "Then move it to those classes, since that is UI specific and keep the API still load 5000 changes by default.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513535116", "createdAt": "2020-10-28T15:24:11Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapCompareRequest.java", "diffHunk": "@@ -16,44 +16,48 @@\n package com.b2international.snowowl.core.request;\n \n import java.util.List;\n-import java.util.Objects;\n import java.util.Set;\n+import java.util.stream.Collectors;\n \n import javax.validation.constraints.Min;\n \n import com.b2international.snowowl.core.codesystem.CodeSystemRequests;\n+import com.b2international.snowowl.core.compare.ConceptMapCompareConfigurationProperties;\n import com.b2international.snowowl.core.compare.ConceptMapCompareResult;\n+import com.b2international.snowowl.core.compare.MapCompareSourceAndTargetEquivalence;\n import com.b2international.snowowl.core.domain.BranchContext;\n import com.b2international.snowowl.core.domain.ConceptMapMapping;\n import com.b2international.snowowl.core.domain.ConceptMapMappings;\n import com.b2international.snowowl.core.uri.ComponentURI;\n+import com.google.common.base.Equivalence.Wrapper;\n import com.google.common.collect.ArrayListMultimap;\n-import com.google.common.collect.HashMultimap;\n import com.google.common.collect.ListMultimap;\n import com.google.common.collect.Lists;\n-import com.google.common.collect.Multimap;\n import com.google.common.collect.Sets;\n import com.google.common.collect.Sets.SetView;\n \n /**\n * @since 7.8\n */\n public final class ConceptMapCompareRequest extends ResourceRequest<BranchContext, ConceptMapCompareResult> {\n+\tpublic static final int DEFAULT_MEMBER_COMPARE_LIMIT = 50_000;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ3MjM2MQ=="}, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNzM0NTE3OnYy", "diffSide": "RIGHT", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapCompareRequest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNDowODo1MFrOHpr5KQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNTowOTo0N1rOHpu_og==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ3MjgwOQ==", "bodyText": "Are we using this now? I'm not seeing any statement nor filter that uses this value.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513472809", "createdAt": "2020-10-28T14:08:50Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapCompareRequest.java", "diffHunk": "@@ -16,44 +16,48 @@\n package com.b2international.snowowl.core.request;\n \n import java.util.List;\n-import java.util.Objects;\n import java.util.Set;\n+import java.util.stream.Collectors;\n \n import javax.validation.constraints.Min;\n \n import com.b2international.snowowl.core.codesystem.CodeSystemRequests;\n+import com.b2international.snowowl.core.compare.ConceptMapCompareConfigurationProperties;\n import com.b2international.snowowl.core.compare.ConceptMapCompareResult;\n+import com.b2international.snowowl.core.compare.MapCompareSourceAndTargetEquivalence;\n import com.b2international.snowowl.core.domain.BranchContext;\n import com.b2international.snowowl.core.domain.ConceptMapMapping;\n import com.b2international.snowowl.core.domain.ConceptMapMappings;\n import com.b2international.snowowl.core.uri.ComponentURI;\n+import com.google.common.base.Equivalence.Wrapper;\n import com.google.common.collect.ArrayListMultimap;\n-import com.google.common.collect.HashMultimap;\n import com.google.common.collect.ListMultimap;\n import com.google.common.collect.Lists;\n-import com.google.common.collect.Multimap;\n import com.google.common.collect.Sets;\n import com.google.common.collect.Sets.SetView;\n \n /**\n * @since 7.8\n */\n public final class ConceptMapCompareRequest extends ResourceRequest<BranchContext, ConceptMapCompareResult> {\n+\tpublic static final int DEFAULT_MEMBER_COMPARE_LIMIT = 50_000;\n \t\n \tprivate static final long serialVersionUID = 1L;\n \t\n \tprivate static final int DEFAULT_MEMBER_SCROLL_LIMIT = 10_000;\n \t\n \tprivate final ComponentURI baseConceptMapURI;\n \tprivate final ComponentURI compareConceptMapURI;\n+\tprivate final Set<ConceptMapCompareConfigurationProperties> selectedConfig;\n \t\n \t@Min(0)\n \tprivate int limit;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUyMzYxOA==", "bodyText": "It is used when creating the MapCompareSourceAndTargetEquivalence instance and in the isSourceEqual() method.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513523618", "createdAt": "2020-10-28T15:09:47Z", "author": {"login": "molnarlaura"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapCompareRequest.java", "diffHunk": "@@ -16,44 +16,48 @@\n package com.b2international.snowowl.core.request;\n \n import java.util.List;\n-import java.util.Objects;\n import java.util.Set;\n+import java.util.stream.Collectors;\n \n import javax.validation.constraints.Min;\n \n import com.b2international.snowowl.core.codesystem.CodeSystemRequests;\n+import com.b2international.snowowl.core.compare.ConceptMapCompareConfigurationProperties;\n import com.b2international.snowowl.core.compare.ConceptMapCompareResult;\n+import com.b2international.snowowl.core.compare.MapCompareSourceAndTargetEquivalence;\n import com.b2international.snowowl.core.domain.BranchContext;\n import com.b2international.snowowl.core.domain.ConceptMapMapping;\n import com.b2international.snowowl.core.domain.ConceptMapMappings;\n import com.b2international.snowowl.core.uri.ComponentURI;\n+import com.google.common.base.Equivalence.Wrapper;\n import com.google.common.collect.ArrayListMultimap;\n-import com.google.common.collect.HashMultimap;\n import com.google.common.collect.ListMultimap;\n import com.google.common.collect.Lists;\n-import com.google.common.collect.Multimap;\n import com.google.common.collect.Sets;\n import com.google.common.collect.Sets.SetView;\n \n /**\n * @since 7.8\n */\n public final class ConceptMapCompareRequest extends ResourceRequest<BranchContext, ConceptMapCompareResult> {\n+\tpublic static final int DEFAULT_MEMBER_COMPARE_LIMIT = 50_000;\n \t\n \tprivate static final long serialVersionUID = 1L;\n \t\n \tprivate static final int DEFAULT_MEMBER_SCROLL_LIMIT = 10_000;\n \t\n \tprivate final ComponentURI baseConceptMapURI;\n \tprivate final ComponentURI compareConceptMapURI;\n+\tprivate final Set<ConceptMapCompareConfigurationProperties> selectedConfig;\n \t\n \t@Min(0)\n \tprivate int limit;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ3MjgwOQ=="}, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNzM0NjcyOnYy", "diffSide": "RIGHT", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapCompareRequestBuilder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNDowOTowNlrOHpr6Fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNToxNDoxM1rOHpvNbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ3MzA0Nw==", "bodyText": "5000 limit is present in this class.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513473047", "createdAt": "2020-10-28T14:09:06Z", "author": {"login": "cmark"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapCompareRequestBuilder.java", "diffHunk": "@@ -30,20 +33,23 @@\n \t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUyNzE1MA==", "bodyText": "This only limits the size of the result, the other one is for checking whether a set is larger than the default 50 000 limit.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513527150", "createdAt": "2020-10-28T15:14:13Z", "author": {"login": "molnarlaura"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapCompareRequestBuilder.java", "diffHunk": "@@ -30,20 +33,23 @@\n \t", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ3MzA0Nw=="}, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNzM1MDMxOnYy", "diffSide": "RIGHT", "path": "snomed/com.b2international.snowowl.snomed.core.rest.tests/src/com/b2international/snowowl/snomed/core/rest/compare/SnomedMapTypeReferenceSetCompareTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNDowOTo0NVrOHpr8MQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNDowOTo0NVrOHpr8MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQ3MzU4NQ==", "bodyText": "This can be the default value of the config field in the ConceptMap Compare API.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/702#discussion_r513473585", "createdAt": "2020-10-28T14:09:45Z", "author": {"login": "cmark"}, "path": "snomed/com.b2international.snowowl.snomed.core.rest.tests/src/com/b2international/snowowl/snomed/core/rest/compare/SnomedMapTypeReferenceSetCompareTest.java", "diffHunk": "@@ -88,15 +89,15 @@ public void compareEqualSimpleMapTypeReferenceSets() {\n \t\tComponentURI baseURI = createURI(rf1Id);\n \t\tComponentURI compareURI = createURI(rf2Id);\n \t\t\n-\t\tConceptMapCompareResult result = CodeSystemRequests.prepareConceptMapCompare(baseURI, compareURI)\n+\t\tConceptMapCompareResult result = CodeSystemRequests.prepareConceptMapCompare(baseURI, compareURI, ConceptMapCompareConfigurationProperties.DEFAULT_SELECTED_PROPERTIES)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c184d5ce1264ef16ed2168d2feb7348eb45ae00"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1689, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}