{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwMTg4MDA1", "number": 472, "title": "API improvements", "bodyText": "Change ValueSet.compose to 0..1 from 0..*\nMinor Java API improvements, syntactic sugars, etc.\nSupport dynamic API docs\nExtract branch aware test execution to test.commons.\nExpose Elasticsearch Base64 UUID generator\nMinor REST API abstractions to simplify development of new REST API routes", "createdAt": "2020-02-03T08:33:08Z", "url": "https://github.com/b2ihealthcare/snow-owl/pull/472", "merged": true, "mergeCommit": {"oid": "ac2eeb383715f2e75bcc17e9f475834c5603f978"}, "closed": true, "closedAt": "2020-02-03T10:59:10Z", "author": {"login": "cmark"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4r1diAH2gAyMzcwMTg4MDA1OmU0YzQ0MDcxMTdhMDYzY2RkYTllMGU5YmU3NTQ3ZGIwYmQxMTI4MzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcAqyITgH2gAyMzcwMTg4MDA1OjY3N2E1ZGQwODc0ZjhlNjE1YWUwYmZiNWJhYzA5ZmFmYzVjMjZiMzk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e4c4407117a063cdda9e0e9be7547db0bd112836", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/e4c4407117a063cdda9e0e9be7547db0bd112836", "committedDate": "2020-01-09T15:39:00Z", "message": "SO-3864: change cardinality of ValueSet.compose to 0..1\n\nAs of https://www.hl7.org/fhir/valueset-definitions.html#ValueSet.compose"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1bb16c89f9db28ebea6a3a0e182abd46f82a67d", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/f1bb16c89f9db28ebea6a3a0e182abd46f82a67d", "committedDate": "2020-01-10T11:13:55Z", "message": "SO-3864: return object ID from TransactionContext.add method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "932e0597a5dc9a3f750785761bd268afc5c661fc", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/932e0597a5dc9a3f750785761bd268afc5c661fc", "committedDate": "2020-01-10T12:59:49Z", "message": "SO-3864: set clearResources to true by default in SnowOwlAppRule"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d84c1b002aff00c304598f593b498685c142d001", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/d84c1b002aff00c304598f593b498685c142d001", "committedDate": "2020-01-10T15:24:59Z", "message": "SO-3864: extract common repository APIs to core.rest module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "079da7897094baba7d9c7416d27872524119c54e", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/079da7897094baba7d9c7416d27872524119c54e", "committedDate": "2020-01-10T15:36:16Z", "message": "SO-3864: extract common Resource search props to ResourceRestSearch\n\nIntroduce SnomedReferenceSetRestSearch and `POST /:path/refsets/search`\nendpoint."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37174b5390f3a60fff8a8cc20ed847699702b860", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/37174b5390f3a60fff8a8cc20ed847699702b860", "committedDate": "2020-01-10T15:36:41Z", "message": "SO-3864: remove unused classes from snomed.core.rest plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "418feefebc4c0c010e55ac1cf5efeb821805fb19", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/418feefebc4c0c010e55ac1cf5efeb821805fb19", "committedDate": "2020-01-10T16:30:57Z", "message": "SO-3864: support dynamic loading of available API docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b60db7123dda142a6120a7745437cb9be349cb28", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/b60db7123dda142a6120a7745437cb9be349cb28", "committedDate": "2020-01-14T16:50:23Z", "message": "SO-3864: extract common branch aware test infrastructure to test.commons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a29dbe480b64cca823e4e0cf8ad6c5592957b7c4", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/a29dbe480b64cca823e4e0cf8ad6c5592957b7c4", "committedDate": "2020-01-14T19:42:52Z", "message": "SO-3864: minor changes to test.commons MANIFEST.MF"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a3351df7808db8bda42b7173df94cd946889755", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/9a3351df7808db8bda42b7173df94cd946889755", "committedDate": "2020-01-15T15:50:51Z", "message": "SO-3864: expose Elasticsearch Base64 UUID generator as IDs.base64UUID()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d811db352d6772e67e5e9f6776019152bff6f404", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/d811db352d6772e67e5e9f6776019152bff6f404", "committedDate": "2020-01-15T17:10:02Z", "message": "SO-3864: expose core.id package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e93885a65c8f9b88f8a2f04efc70fa7e30345442", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/e93885a65c8f9b88f8a2f04efc70fa7e30345442", "committedDate": "2020-01-16T11:17:40Z", "message": "SO-3864: rename ChangeRequest types\n\n`core.rest.codesystem.ChangeRequest` to\n`core.rest.domain.ResourceRequest`.\n`snomed.core.rest.domain.ChangeRequest` to\n`snomed.core.rest.domain.SnomedResourceRequest`."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fa57bf045047ae66d611d6cde0eeacb0b4d74f1", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/0fa57bf045047ae66d611d6cde0eeacb0b4d74f1", "committedDate": "2020-01-16T12:35:47Z", "message": "SO-3864: pull up getResourceLocationURI to AbstractRestService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "385b1187b20d8427609a00281b7839dbcce88a47", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/385b1187b20d8427609a00281b7839dbcce88a47", "committedDate": "2020-01-16T14:42:11Z", "message": "SO-3864: pull up comma joiner and JSON_UTF8 constants to RestExtensions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5819f7161e5cdabab9c86218c00c294759c5c8a1", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/5819f7161e5cdabab9c86218c00c294759c5c8a1", "committedDate": "2020-01-16T15:02:18Z", "message": "SO-3864: fix failed SNOMED CT FHIR ValueSet API tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39664117d8fcc13c6431f6f38e7829af446a0040", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/39664117d8fcc13c6431f6f38e7829af446a0040", "committedDate": "2020-01-16T17:01:16Z", "message": "SO-3864: minor API improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71cd4c390cb0353d1eb393a7f9f370e2b13fa930", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/71cd4c390cb0353d1eb393a7f9f370e2b13fa930", "committedDate": "2020-01-16T20:10:49Z", "message": "SO-3864: minor API improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85ec91ad8e048623063027b75389c4eb2b466f36", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/85ec91ad8e048623063027b75389c4eb2b466f36", "committedDate": "2020-01-16T21:47:14Z", "message": "SO-3864: add RestExtensions.assertCreated helper"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a16c02000e94c5379cec195aa9e106830a435b7", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/5a16c02000e94c5379cec195aa9e106830a435b7", "committedDate": "2020-01-21T15:52:26Z", "message": "SO-3864: report method not allowed errors properly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dd796efb130859d23b7e952e834a39f083dea6c", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/3dd796efb130859d23b7e952e834a39f083dea6c", "committedDate": "2020-01-29T19:04:41Z", "message": "Merge remote-tracking branch 'origin/7.x' into feature/SO-3864-valueset-model-changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMTExNTY1", "url": "https://github.com/b2ihealthcare/snow-owl/pull/472#pullrequestreview-352111565", "createdAt": "2020-02-03T09:21:49Z", "commit": {"oid": "3dd796efb130859d23b7e952e834a39f083dea6c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QwOToyMTo0OVrOFkquow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QwOToyMTo0OVrOFkquow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk5MzEyMw==", "bodyText": "If anyone is wondering (I sure was): https://stackoverflow.com/questions/2621701/setting-log-level-of-message-at-runtime-in-slf4j/7829534\nQuick summary: there is no way to do this programmatically in SLF4j without a helper method.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/472#discussion_r373993123", "createdAt": "2020-02-03T09:21:49Z", "author": {"login": "apeteri"}, "path": "core/com.b2international.snowowl.core.rest/src/com/b2international/snowowl/core/rest/ControllerExceptionMapper.java", "diffHunk": "@@ -50,11 +52,21 @@\n \t\tif (Throwables.getRootCause(ex).getMessage().toLowerCase().contains(\"broken pipe\")) {\n \t        return null; // socket is closed, cannot return any response    \n \t    } else {\n-\t    \tLOG.trace(\"Exception during request processing\", ex);\n+\t    \tif (PlatformUtil.isDevVersion()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3dd796efb130859d23b7e952e834a39f083dea6c"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMTE1NzA4", "url": "https://github.com/b2ihealthcare/snow-owl/pull/472#pullrequestreview-352115708", "createdAt": "2020-02-03T09:28:41Z", "commit": {"oid": "3dd796efb130859d23b7e952e834a39f083dea6c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QwOToyODo0MVrOFkq69w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMDoyMDoxOVrOFksdvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk5NjI3OQ==", "bodyText": "\u26a0\ufe0f typo\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t * Generates a time-based UUID (similar to Flake IDs), which is preferred when generating an ID to be indexed into a Lucene index asprimary key. \n          \n          \n            \n            \t * Generates a time-based UUID (similar to Flake IDs), which is preferred when generating an ID to be indexed into a Lucene index as primary key.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/472#discussion_r373996279", "createdAt": "2020-02-03T09:28:41Z", "author": {"login": "apeteri"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/id/IDs.java", "diffHunk": "@@ -13,25 +13,24 @@\n  * See the License for the specific language governing permissions and\n  * limitations under the License.\n  */\n-package com.b2international.snowowl.snomed.core.rest.domain;\n+package com.b2international.snowowl.core.id;\n+\n+import org.elasticsearch.common.UUIDs;\n \n /**\n- * @since 1.0\n+ * Class to use to generate decentralized random UUIDs. \n+ * \n+ * @since 7.3\n  */\n-public class SnomedIdentifierResponse {\n+public class IDs {\n \n-\tprivate String id;\n-\t\n-\tpublic SnomedIdentifierResponse(String id) {\n-\t\tthis.id = id;\n-\t}\n-\n-\tpublic String getId() {\n-\t\treturn id;\n-\t}\n-\t\n-\tpublic void setId(String id) {\n-\t\tthis.id = id;\n+\t/**\n+\t * Generates a time-based UUID (similar to Flake IDs), which is preferred when generating an ID to be indexed into a Lucene index asprimary key. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3dd796efb130859d23b7e952e834a39f083dea6c"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk5NjgzMQ==", "bodyText": "Javadoc is half-true: the default implementation returns an identifier for CodeSystemEntry and CodeSystemVersionEntry instances as well.", "url": "https://github.com/b2ihealthcare/snow-owl/pull/472#discussion_r373996831", "createdAt": "2020-02-03T09:29:53Z", "author": {"login": "apeteri"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/TransactionContext.java", "diffHunk": "@@ -44,8 +44,9 @@\n \t * Adds the given {@link Object} to this transaction context as a completely new object. \n \t * \n \t * @param obj - the object to persist and add to the repository\n+\t * @return the identifier if the given object is an instanceof of {@link Revision} or <code>null</code> if the object is not a {@link Revision}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3dd796efb130859d23b7e952e834a39f083dea6c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk5NzkyMg==", "bodyText": "(Also, didn't add support indexing non-revision controlled documents before? Did this functionality disappear with 7.x, or does it only exist in my mind?)", "url": "https://github.com/b2ihealthcare/snow-owl/pull/472#discussion_r373997922", "createdAt": "2020-02-03T09:32:08Z", "author": {"login": "apeteri"}, "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/TransactionContext.java", "diffHunk": "@@ -44,8 +44,9 @@\n \t * Adds the given {@link Object} to this transaction context as a completely new object. \n \t * \n \t * @param obj - the object to persist and add to the repository\n+\t * @return the identifier if the given object is an instanceof of {@link Revision} or <code>null</code> if the object is not a {@link Revision}.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk5NjgzMQ=="}, "originalCommit": {"oid": "3dd796efb130859d23b7e952e834a39f083dea6c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDAyMTU2Ng==", "bodyText": "\ud83e\udd14", "url": "https://github.com/b2ihealthcare/snow-owl/pull/472#discussion_r374021566", "createdAt": "2020-02-03T10:20:19Z", "author": {"login": "apeteri"}, "path": "snomed/com.b2international.snowowl.snomed.core.rest/src/com/b2international/snowowl/snomed/core/rest/domain/SnomedResourceRequest.java", "diffHunk": "@@ -15,31 +15,27 @@\n  */\n package com.b2international.snowowl.snomed.core.rest.domain;\n \n-import com.b2international.snowowl.core.terminology.ComponentCategory;\n-\n+import com.b2international.snowowl.core.rest.domain.ResourceRequest;\n+import com.google.common.base.MoreObjects.ToStringHelper;\n \n /**\n  * @since 1.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3dd796efb130859d23b7e952e834a39f083dea6c"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMTY2NDA4", "url": "https://github.com/b2ihealthcare/snow-owl/pull/472#pullrequestreview-352166408", "createdAt": "2020-02-03T10:50:21Z", "commit": {"oid": "3dd796efb130859d23b7e952e834a39f083dea6c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "677a5dd0874f8e615ae0bfb5bac09fafc5c26b39", "author": {"user": {"login": "cmark", "name": "Mark Czotter"}}, "url": "https://github.com/b2ihealthcare/snow-owl/commit/677a5dd0874f8e615ae0bfb5bac09fafc5c26b39", "committedDate": "2020-02-03T10:56:51Z", "message": "Update core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/id/IDs.java\n\nCo-Authored-By: Andr\u00e1s P\u00e9teri <apeteri@b2international.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4918, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}