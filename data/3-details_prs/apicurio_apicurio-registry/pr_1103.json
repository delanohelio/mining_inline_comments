{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzNjUxOTgz", "number": 1103, "title": "Add tombstone kafka messages when deleting artifacts/versions.", "bodyText": "", "createdAt": "2020-12-21T18:23:37Z", "url": "https://github.com/Apicurio/apicurio-registry/pull/1103", "merged": true, "mergeCommit": {"oid": "2b728dd1732c8adb10992a12e71b9bc025e7235b"}, "closed": true, "closedAt": "2020-12-22T14:36:06Z", "author": {"login": "EricWittmann"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdoaKmdgH2gAyNTQzNjUxOTgzOmI4MTg5ZTBmMWI2MTZiMjk1YzRhYzQ5YTlhNDE4YjdmNWY4NTYxZTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdoq7kYgFqTU1NzA5NTE5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b8189e0f1b616b295c4ac49a9a418b7f5f8561e4", "author": {"user": {"login": "EricWittmann", "name": "Eric Wittmann"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/b8189e0f1b616b295c4ac49a9a418b7f5f8561e4", "committedDate": "2020-12-21T18:23:19Z", "message": "Add tombstone kafka messages when deleting artifacts/versions.  Fixes #1077"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MDEyMjA1", "url": "https://github.com/Apicurio/apicurio-registry/pull/1103#pullrequestreview-557012205", "createdAt": "2020-12-22T11:29:45Z", "commit": {"oid": "b8189e0f1b616b295c4ac49a9a418b7f5f8561e4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMToyOTo0NlrOIJ3-6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMToyOTo0NlrOIJ3-6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzIyNTMyMA==", "bodyText": "what about logging some info from the MessageKey?", "url": "https://github.com/Apicurio/apicurio-registry/pull/1103#discussion_r547225320", "createdAt": "2020-12-22T11:29:46Z", "author": {"login": "famartinrh"}, "path": "storage/kafkasql/src/main/java/io/apicurio/registry/storage/impl/kafkasql/sql/KafkaSqlSink.java", "diffHunk": "@@ -58,6 +58,13 @@\n      * @param record\n      */\n     public void processMessage(ConsumerRecord<MessageKey, MessageValue> record) {\n+        // If the value is null, then this is a tombstone (or unrecognized) message and should not \n+        // be processed.\n+        if (record.value() == null) {\n+            log.info(\"Discarded a tombstone message with key: {}\", record.key());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b8189e0f1b616b295c4ac49a9a418b7f5f8561e4"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f647379737c7e0314805eb4eb8d6988b624ac19f", "author": {"user": {"login": "EricWittmann", "name": "Eric Wittmann"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/f647379737c7e0314805eb4eb8d6988b624ac19f", "committedDate": "2020-12-22T13:35:25Z", "message": "Better logging of tombstone messages."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30749c2075455ea83f3fd527678c5afc21d4f631", "author": {"user": {"login": "EricWittmann", "name": "Eric Wittmann"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/30749c2075455ea83f3fd527678c5afc21d4f631", "committedDate": "2020-12-22T13:39:01Z", "message": "Made the consumer more resilient to garbage/unknown Kafka messages"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MDk1MTkz", "url": "https://github.com/Apicurio/apicurio-registry/pull/1103#pullrequestreview-557095193", "createdAt": "2020-12-22T13:55:17Z", "commit": {"oid": "30749c2075455ea83f3fd527678c5afc21d4f631"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4318, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}