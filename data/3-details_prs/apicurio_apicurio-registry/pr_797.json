{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1Mzg5NDgx", "number": 797, "title": "Allow APIs to return metadata and state of artifacts in DISABLED state", "bodyText": "This commit updates the list of active states to include DISABLED,\nmeaning that API calls for artifacts that have been set to the DISABLED\nstate no longer return 404 responses on the /meta and /state\nendpoints.\nIt also updates the following endpoints to return 404 when the\nartifact is in DISABLED state, so that behaviour remains the same for\nthe endpoints that return only the artifact content.\n\nGET /api/artifacts/{artifactid}\nGET /api/artifacts/{artifactid}/versions/{version}\nGET /api/ids/{globalid\nGET /api/ccompat/subjects/{subjectid}/versions/{version}/schema\n\n\n\nFurther discussion around this is in issue #788\nSigned-off-by: Andrew Borley borley@uk.ibm.com", "createdAt": "2020-08-28T12:54:03Z", "url": "https://github.com/Apicurio/apicurio-registry/pull/797", "merged": true, "mergeCommit": {"oid": "bdca7a166d50ba70f933bed2fec04e3a2a192d59"}, "closed": true, "closedAt": "2020-09-01T15:42:39Z", "author": {"login": "ajborley"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdESloyAFqTQ3ODYwMDQyNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEnw3KABqjM3MTUwNTE0MDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NjAwNDI3", "url": "https://github.com/Apicurio/apicurio-registry/pull/797#pullrequestreview-478600427", "createdAt": "2020-08-31T13:12:19Z", "commit": {"oid": "69d11bfc604def99687d7acc84da8ee9c453c379"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMzoxMjoyMFrOHJ4Myg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMzoxMjoyMFrOHJ4Myg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDEyMDAxMA==", "bodyText": "I'm not 100% sure about this.  There's no concept of \"state\" in the ccompat API, right?  And the entire schema is available (obviously) from the schema property of the result.  It seems like maybe this should return a 404?", "url": "https://github.com/Apicurio/apicurio-registry/pull/797#discussion_r480120010", "createdAt": "2020-08-31T13:12:20Z", "author": {"login": "EricWittmann"}, "path": "app/src/test/java/io/apicurio/registry/ConfluentCompatApiTest.java", "diffHunk": "@@ -218,14 +218,25 @@ public void testDisabledStateCheck() throws Exception {\n            .then()\n                .statusCode(204);\n         \n-        // GET - shouldn't return as the state has been changed to DISABLED\n+        // GET - object should return when the state has been changed to DISABLED\n         TestUtils.retry(() -> {\n             given()\n                 .when()\n                     .contentType(ContentTypes.COMPAT_SCHEMA_REGISTRY_STABLE_LATEST)\n                     .get(\"/ccompat/subjects/{subject}/versions/{version}\", SUBJECT, \"latest\")\n                 .then()\n-                    .statusCode(400);\n+                    .statusCode(200)\n+                    .body(\"schema\", equalTo(SCHEMA_SIMPLE));\n+        });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69d11bfc604def99687d7acc84da8ee9c453c379"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "159240fd691e6e5e2818b276aa95641320ef648c", "author": {"user": {"login": "ajborley", "name": "Andrew Borley"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/159240fd691e6e5e2818b276aa95641320ef648c", "committedDate": "2020-09-01T13:42:46Z", "message": "Allow APIs to return metadata and state of artifacts in DISABLED state\n\n- This commit updates the list of active states to include DISABLED,\nmeaning that API calls for artifacts that have been set to the DISABLED\nstate no longer return 404 responses on the /meta and /state\nendpoints.\n- It also updates the following endpoints to return 404 when the\nartifact is in DISABLED state, so that behaviour remains the same for\nthe endpoints that return only the artifact content.\n  - `GET /api/artifacts/{artifactid}`\n  - `GET /api/artifacts/{artifactid}/versions/{version}`\n  - `GET /api/ids/{globalid`\n  - `GET /api/ccompat/subjects/{subjectid}/versions/{version}/schema`\n\nSigned-off-by: Andrew Borley <borley@uk.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69d11bfc604def99687d7acc84da8ee9c453c379", "author": {"user": {"login": "ajborley", "name": "Andrew Borley"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/69d11bfc604def99687d7acc84da8ee9c453c379", "committedDate": "2020-08-28T12:51:26Z", "message": "Allow APIs to return metadata and state of artifacts in DISABLED state\n\n- This commit updates the list of active states to include DISABLED,\nmeaning that API calls for artifacts that have been set to the DISABLED\nstate no longer return 404 responses on the /meta and /state\nendpoints.\n- It also updates the following endpoints to return 404 when the\nartifact is in DISABLED state, so that behaviour remains the same for\nthe endpoints that return only the artifact content.\n  - `GET /api/artifacts/{artifactid}`\n  - `GET /api/artifacts/{artifactid}/versions/{version}`\n  - `GET /api/ids/{globalid`\n  - `GET /api/ccompat/subjects/{subjectid}/versions/{version}/schema`\n\nSigned-off-by: Andrew Borley <borley@uk.ibm.com>"}, "afterCommit": {"oid": "c74f28e72e00daca9b9ffb0491b3b3e9c0ca75e9", "author": {"user": {"login": "ajborley", "name": "Andrew Borley"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/c74f28e72e00daca9b9ffb0491b3b3e9c0ca75e9", "committedDate": "2020-09-01T13:42:46Z", "message": "Return 404 for disabled artifacts in ccompat API and add search tests\n\nSigned-off-by: Andrew Borley <borley@uk.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c74f28e72e00daca9b9ffb0491b3b3e9c0ca75e9", "author": {"user": {"login": "ajborley", "name": "Andrew Borley"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/c74f28e72e00daca9b9ffb0491b3b3e9c0ca75e9", "committedDate": "2020-09-01T13:42:46Z", "message": "Return 404 for disabled artifacts in ccompat API and add search tests\n\nSigned-off-by: Andrew Borley <borley@uk.ibm.com>"}, "afterCommit": {"oid": "325cb2c0391e4bb8075dfd6b75689727f76724e0", "author": {"user": {"login": "ajborley", "name": "Andrew Borley"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/325cb2c0391e4bb8075dfd6b75689727f76724e0", "committedDate": "2020-09-01T13:50:58Z", "message": "Return 404 for disabled artifacts in ccompat API and add search tests\n\nSigned-off-by: Andrew Borley <borley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "591cd47b56ea79256f74bdece015644ed95b56e8", "author": {"user": {"login": "ajborley", "name": "Andrew Borley"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/591cd47b56ea79256f74bdece015644ed95b56e8", "committedDate": "2020-09-01T13:52:18Z", "message": "Return 404 for disabled artifacts in ccompat API and add search tests\n\nSigned-off-by: Andrew Borley <borley@uk.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "325cb2c0391e4bb8075dfd6b75689727f76724e0", "author": {"user": {"login": "ajborley", "name": "Andrew Borley"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/325cb2c0391e4bb8075dfd6b75689727f76724e0", "committedDate": "2020-09-01T13:50:58Z", "message": "Return 404 for disabled artifacts in ccompat API and add search tests\n\nSigned-off-by: Andrew Borley <borley@uk.ibm.com>"}, "afterCommit": {"oid": "591cd47b56ea79256f74bdece015644ed95b56e8", "author": {"user": {"login": "ajborley", "name": "Andrew Borley"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/591cd47b56ea79256f74bdece015644ed95b56e8", "committedDate": "2020-09-01T13:52:18Z", "message": "Return 404 for disabled artifacts in ccompat API and add search tests\n\nSigned-off-by: Andrew Borley <borley@uk.ibm.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4416, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}