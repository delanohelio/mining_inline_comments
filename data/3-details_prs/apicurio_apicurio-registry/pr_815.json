{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyNzM5Mjg1", "number": 815, "title": "Remove jaxrs classes from client", "bodyText": "", "createdAt": "2020-09-09T10:23:23Z", "url": "https://github.com/Apicurio/apicurio-registry/pull/815", "merged": true, "mergeCommit": {"oid": "8017775c7d7808a228eeac82c2e860e69669901a"}, "closed": true, "closedAt": "2020-09-11T16:26:14Z", "author": {"login": "carlesarnal"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHRg95AFqTQ4NTM0Njg3Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdH384dgFqTQ4Njk1MDQ4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MzQ2ODcz", "url": "https://github.com/Apicurio/apicurio-registry/pull/815#pullrequestreview-485346873", "createdAt": "2020-09-09T19:39:05Z", "commit": {"oid": "a0955198fc59541d4755221c8c51817bb50ee1be"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxOTozOTowNVrOHPXFFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxOTozOTowNVrOHPXFFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTg2ODgyMg==", "bodyText": "I was thinking maybe byte[] or InputStream or ContentHandle here.  Is there something that the okhttp3 class gives us that's better than just plain data?", "url": "https://github.com/Apicurio/apicurio-registry/pull/815#discussion_r485868822", "createdAt": "2020-09-09T19:39:05Z", "author": {"login": "EricWittmann"}, "path": "rest-client/src/main/java/io/apicurio/registry/client/RegistryRestClient.java", "diffHunk": "@@ -34,7 +34,7 @@\n     ArtifactMetaData createArtifact(ArtifactType xRegistryArtifactType, String xRegistryArtifactId, IfExistsType ifExists, InputStream data);\n \n \n-    Response getLatestArtifact(String artifactId);\n+    ResponseBody getLatestArtifact(String artifactId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0955198fc59541d4755221c8c51817bb50ee1be"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e12e6390b07e81bdfe00da10bcc4f82f13809a5", "author": {"user": {"login": "carlesarnal", "name": "Carles Arnal"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/2e12e6390b07e81bdfe00da10bcc4f82f13809a5", "committedDate": "2020-09-10T07:38:07Z", "message": "Remove jaxrs classes from client"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a0955198fc59541d4755221c8c51817bb50ee1be", "author": {"user": {"login": "carlesarnal", "name": "Carles Arnal"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/a0955198fc59541d4755221c8c51817bb50ee1be", "committedDate": "2020-09-09T10:21:32Z", "message": "Remove jaxrs classes from client"}, "afterCommit": {"oid": "2e12e6390b07e81bdfe00da10bcc4f82f13809a5", "author": {"user": {"login": "carlesarnal", "name": "Carles Arnal"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/2e12e6390b07e81bdfe00da10bcc4f82f13809a5", "committedDate": "2020-09-10T07:38:07Z", "message": "Remove jaxrs classes from client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d87152617488e37d498160593d80aabbd79f6b3e", "author": {"user": {"login": "carlesarnal", "name": "Carles Arnal"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/d87152617488e37d498160593d80aabbd79f6b3e", "committedDate": "2020-09-10T08:52:12Z", "message": "Switch from response body to input stream"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1ODc1ODY4", "url": "https://github.com/Apicurio/apicurio-registry/pull/815#pullrequestreview-485875868", "createdAt": "2020-09-10T12:27:58Z", "commit": {"oid": "d87152617488e37d498160593d80aabbd79f6b3e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjoyNzo1OFrOHPxHDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjoyNzo1OFrOHPxHDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjI5NTMwOA==", "bodyText": "Can you confirm that Files.copy() closes the stream?", "url": "https://github.com/Apicurio/apicurio-registry/pull/815#discussion_r486295308", "createdAt": "2020-09-10T12:27:58Z", "author": {"login": "EricWittmann"}, "path": "utils/maven-plugin/src/main/java/io/apicurio/registry/maven/DownloadRegistryMojo.java", "diffHunk": "@@ -117,17 +116,13 @@ protected void executeInternal() throws MojoExecutionException {\n \n             try {\n                 Integer version = versions.get(id);\n-                Response response = (version != null) ?\n-                                    getClient().getArtifactVersion(version, id) :\n-                                    getClient().getLatestArtifact(id);\n-                try (InputStream stream = response.readEntity(InputStream.class)) {\n-                    if (replaceExisting) {\n-                        Files.copy(stream, outputFile.toPath(), StandardCopyOption.REPLACE_EXISTING);\n-                    } else {\n-                        Files.copy(stream, outputFile.toPath());\n-                    }\n-                } finally {\n-                    response.close();\n+                InputStream stream = (version != null) ?\n+                        getClient().getArtifactVersion(version, id) :\n+                        getClient().getLatestArtifact(id);\n+                if (replaceExisting) {\n+                    Files.copy(stream, outputFile.toPath(), StandardCopyOption.REPLACE_EXISTING);\n+                } else {\n+                    Files.copy(stream, outputFile.toPath());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d87152617488e37d498160593d80aabbd79f6b3e"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1ODc2MDY3", "url": "https://github.com/Apicurio/apicurio-registry/pull/815#pullrequestreview-485876067", "createdAt": "2020-09-10T12:28:13Z", "commit": {"oid": "d87152617488e37d498160593d80aabbd79f6b3e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8208e127b7d00bc9f0a1afe6bd1a328782f0a7f9", "author": {"user": {"login": "carlesarnal", "name": "Carles Arnal"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/8208e127b7d00bc9f0a1afe6bd1a328782f0a7f9", "committedDate": "2020-09-10T14:35:40Z", "message": "Add try with resources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe8f536518f2481354fdea2ea0d1bad1849d0473", "author": {"user": {"login": "carlesarnal", "name": "Carles Arnal"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/fe8f536518f2481354fdea2ea0d1bad1849d0473", "committedDate": "2020-09-10T15:07:53Z", "message": "Merge branch 'master' into remove-jaxrs-classes-client-702"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2OTUwNDgy", "url": "https://github.com/Apicurio/apicurio-registry/pull/815#pullrequestreview-486950482", "createdAt": "2020-09-11T16:25:59Z", "commit": {"oid": "fe8f536518f2481354fdea2ea0d1bad1849d0473"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4431, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}