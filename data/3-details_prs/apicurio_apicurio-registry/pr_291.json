{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5NTY0ODI2", "number": 291, "title": "Minor IoUtil fix, client-side deprecation warning", "bodyText": "", "createdAt": "2020-02-25T12:55:36Z", "url": "https://github.com/Apicurio/apicurio-registry/pull/291", "merged": true, "mergeCommit": {"oid": "099e0e9e8134a22ce07025deb0026bebcfb440f8"}, "closed": true, "closedAt": "2020-02-25T15:34:13Z", "author": {"login": "alesj"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHxmd5gH2gAyMzc5NTY0ODI2OmZmN2Y2OGVhYWI0YmEwYTcxZTcwNDViMWRiYzM4MWY5YzBlOTRmZGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcHzXG4gFqTM2NDIwMzEyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ff7f68eaab4ba0a71e7045b1dbc381f9c0e94fda", "author": {"user": {"login": "dependabot-preview[bot]", "name": null}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/ff7f68eaab4ba0a71e7045b1dbc381f9c0e94fda", "committedDate": "2020-02-25T12:50:55Z", "message": "Bump avro from 1.9.1 to 1.9.2 (#275)\n\nBumps avro from 1.9.1 to 1.9.2.\r\n\r\nSigned-off-by: dependabot-preview[bot] <support@dependabot.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a57199847328cfb41c08f56c14132c35724a4ccf", "author": {"user": {"login": "dependabot-preview[bot]", "name": null}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/a57199847328cfb41c08f56c14132c35724a4ccf", "committedDate": "2020-02-25T12:50:55Z", "message": "Bump json-schema-validator from 1.0.29 to 1.0.31 (#285)\n\nBumps [json-schema-validator](https://github.com/networknt/json-schema-validator) from 1.0.29 to 1.0.31.\r\n- [Release notes](https://github.com/networknt/json-schema-validator/releases)\r\n- [Changelog](https://github.com/networknt/json-schema-validator/blob/master/CHANGELOG.md)\r\n- [Commits](https://github.com/networknt/json-schema-validator/compare/1.0.29...1.0.31)\r\n\r\nSigned-off-by: dependabot-preview[bot] <support@dependabot.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4ad6339b3d44e6995d2d67f3238d4b28135859d", "author": {"user": {"login": "alesj", "name": "Ale\u0161 Justin"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/f4ad6339b3d44e6995d2d67f3238d4b28135859d", "committedDate": "2020-02-25T12:50:55Z", "message": "Use IoUtil - to get uniform handling of encoding."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6102547848aa26469a8da18e473f64612caa96f", "author": {"user": {"login": "alesj", "name": "Ale\u0161 Justin"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/d6102547848aa26469a8da18e473f64612caa96f", "committedDate": "2020-02-25T12:58:39Z", "message": "Handle deprecated artifacts on client side."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7622ff49b34500131df2e6dafec5683b902d9520", "author": {"user": {"login": "alesj", "name": "Ale\u0161 Justin"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/7622ff49b34500131df2e6dafec5683b902d9520", "committedDate": "2020-02-25T12:50:55Z", "message": "Handle deprecated artifacts on client side."}, "afterCommit": {"oid": "d6102547848aa26469a8da18e473f64612caa96f", "author": {"user": {"login": "alesj", "name": "Ale\u0161 Justin"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/d6102547848aa26469a8da18e473f64612caa96f", "committedDate": "2020-02-25T12:58:39Z", "message": "Handle deprecated artifacts on client side."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MjAzMTI0", "url": "https://github.com/Apicurio/apicurio-registry/pull/291#pullrequestreview-364203124", "createdAt": "2020-02-25T14:53:57Z", "commit": {"oid": "d6102547848aa26469a8da18e473f64612caa96f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNDo1Mzo1N1rOFuJItg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNDo1Mzo1N1rOFuJItg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkyODUwMg==", "bodyText": "Why add the artifactId and version as well?  Is this so it's available for inclusion in the log message?", "url": "https://github.com/Apicurio/apicurio-registry/pull/291#discussion_r383928502", "createdAt": "2020-02-25T14:53:57Z", "author": {"login": "EricWittmann"}, "path": "common/src/main/java/io/apicurio/registry/rest/Headers.java", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+ * Copyright 2020 Red Hat\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.apicurio.registry.rest;\n+\n+import io.apicurio.registry.types.ArtifactState;\n+\n+import java.util.function.Supplier;\n+import javax.ws.rs.core.Response;\n+\n+/**\n+ * @author Ales Justin\n+ */\n+public interface Headers {\n+    String ARTIFACT_ID = \"X-Registry-ArtifactId\";\n+    String VERSION = \"X-Registry-Version\";\n+\n+    String DEPRECATED = \"X-Registry-Deprecated\";\n+\n+    default void checkIfDeprecated(\n+        Supplier<ArtifactState> stateSupplier,\n+        String artifactId,\n+        Number version,\n+        Response.ResponseBuilder builder\n+    ) {\n+        if (stateSupplier.get() == ArtifactState.DEPRECATED) {\n+            builder.header(Headers.DEPRECATED, true);\n+            builder.header(Headers.ARTIFACT_ID, artifactId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d6102547848aa26469a8da18e473f64612caa96f"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3513, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}