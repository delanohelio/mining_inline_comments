{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5NDk2Nzgz", "number": 695, "title": "Adding support for auth for the registry client", "bodyText": "Authentication/authorization proof of concept: #674\nPoc with keycloak:\nhttps://github.com/carlesarnal/apicurio-registry/tree/auth-poc-674\nUpdate Registry Client to support a client method with a configurable authentication mechanism. Config is provided as a parameter in the create/cached method. Currently, it only supports keycloak auth strategy, but it can be extended to support other mechanisms.\nExample:\nString registryUrl = \"http://0.0.0.0:8080/api\";\nAuthConfig config = new AuthConfig.Builder(AuthProvider.KEYCLOAK)\n\t\t\t\t.setServerUrl(\"http://127.0.0.1:8081/auth\")\n\t\t\t\t.setClientId(\"admin-cli\")\n\t\t\t\t.setRealm(\"master\")\n\t\t\t\t.setUsername(\"admin\")\n\t\t\t\t.setPassword(\"admin\")\n\t\t\t\t.Build();\n\nRegistryService service = RegistryClient.cached(registryUrl, config);", "createdAt": "2020-07-15T13:54:13Z", "url": "https://github.com/Apicurio/apicurio-registry/pull/695", "merged": true, "mergeCommit": {"oid": "c5037bc3a98b138c98e1511fce059d1b8ed5df3a"}, "closed": true, "closedAt": "2020-08-12T07:56:42Z", "author": {"login": "akoserwal"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1K735gH2gAyNDQ5NDk2NzgzOjhhN2UzYzE2OWIxY2QxYjJlMjkxYzZjZDEwMTAyZjVkNzRjMTY4OTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9eFyQAH2gAyNDQ5NDk2NzgzOjgzMGNjMDEwYjc4YTNhMmIxZjlmNmQzYzJjZmFhNjg4YmY4NmFkOWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8a7e3c169b1cd1b2e291c6cd10102f5d74c16894", "author": {"user": {"login": "akoserwal", "name": "Abhishek koserwal"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/8a7e3c169b1cd1b2e291c6cd10102f5d74c16894", "committedDate": "2020-07-15T13:48:31Z", "message": "Adding support for authorization header with every request & allowing registry client to set the bearer token"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NTkwMTI1", "url": "https://github.com/Apicurio/apicurio-registry/pull/695#pullrequestreview-449590125", "createdAt": "2020-07-16T07:38:51Z", "commit": {"oid": "8a7e3c169b1cd1b2e291c6cd10102f5d74c16894"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwNzozODo1MVrOGyd6xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwNzozODo1MVrOGyd6xA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTU3MjE2NA==", "bodyText": "We should manage the auth logic for the client. It should take care of authentication and refreshing implementation so the users should not worry about auth stuff.", "url": "https://github.com/Apicurio/apicurio-registry/pull/695#discussion_r455572164", "createdAt": "2020-07-16T07:38:51Z", "author": {"login": "carlesarnal"}, "path": "client/src/main/java/io/apicurio/registry/client/RegistryClient.java", "diffHunk": "@@ -31,6 +31,7 @@\n  */\n public class RegistryClient {\n     private static final Logger log = Logger.getLogger(RegistryClient.class.getName());\n+    private static String token;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a7e3c169b1cd1b2e291c6cd10102f5d74c16894"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84816b380b4aeecb2495b6330894c885396a10fe", "author": {"user": {"login": "akoserwal", "name": "Abhishek koserwal"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/84816b380b4aeecb2495b6330894c885396a10fe", "committedDate": "2020-07-21T16:28:37Z", "message": "add auth impl for authprovider like keycloak and send auth token as Authorization header"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMDMwNDM3", "url": "https://github.com/Apicurio/apicurio-registry/pull/695#pullrequestreview-453030437", "createdAt": "2020-07-22T06:34:01Z", "commit": {"oid": "84816b380b4aeecb2495b6330894c885396a10fe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwNjozNDowMlrOG1Umfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwNjozNDowMlrOG1Umfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODU2NTI0Nw==", "bodyText": "Just curious, what's the reason for these exclusions?", "url": "https://github.com/Apicurio/apicurio-registry/pull/695#discussion_r458565247", "createdAt": "2020-07-22T06:34:02Z", "author": {"login": "carlesarnal"}, "path": "client/pom.xml", "diffHunk": "@@ -26,6 +26,31 @@\n             <artifactId>resteasy-client-microprofile</artifactId>\n         </dependency>\n \n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-admin-client</artifactId>\n+            <version>10.0.1</version>\n+            <exclusions>\n+                <exclusion>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84816b380b4aeecb2495b6330894c885396a10fe"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "830cc010b78a3a2b1f9f6d3c2cfaa688bf86ad9a", "author": {"user": {"login": "akoserwal", "name": "Abhishek koserwal"}}, "url": "https://github.com/Apicurio/apicurio-registry/commit/830cc010b78a3a2b1f9f6d3c2cfaa688bf86ad9a", "committedDate": "2020-08-10T08:38:56Z", "message": "adding keycloak docker maven plugin for auth integration testing:  mvn clean install -Dtest-keycloak -Ddocker"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4467, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}