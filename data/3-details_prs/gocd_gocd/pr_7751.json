{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3MDU2Mjgy", "number": 7751, "title": "Do not set 0 as default for runInstanceCount", "bodyText": "Issue: #7676\nDescription:\n\nIf no value is set for runInstanceCount - it should be defaulted to null rather than 0.\nThis should be the case when the job is set as run only a single instance.", "createdAt": "2020-02-19T09:28:45Z", "url": "https://github.com/gocd/gocd/pull/7751", "merged": true, "mergeCommit": {"oid": "0348826ef8bfdfa6469add3dc3fb3711331fd94d"}, "closed": true, "closedAt": "2020-02-20T09:05:51Z", "author": {"login": "kritika-singh3"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFzu6PAH2gAyMzc3MDU2MjgyOjk2MGRmMDkxN2E4MTc0NjZjMDBlMzRjMDZlYzFhMjE1MGYwZTVkYTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGH8LxAFqTM2MTc1ODc4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "960df0917a817466c00e34c06ec1a2150f0e5da6", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/960df0917a817466c00e34c06ec1a2150f0e5da6", "committedDate": "2020-02-19T10:12:06Z", "message": "do not set 0 as default for runInstanceCount\n\n - If no value is set for runInstanceCount - it should be defaulted to null rather than 0"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "34e666026f7388f88b921f858b26075078f972d5", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/34e666026f7388f88b921f858b26075078f972d5", "committedDate": "2020-02-19T09:25:08Z", "message": "do not set 0 as default for runInstanceCount\n\n - If no value is set for runInstanceCount - it should be defaulted to null rather than 0"}, "afterCommit": {"oid": "960df0917a817466c00e34c06ec1a2150f0e5da6", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/960df0917a817466c00e34c06ec1a2150f0e5da6", "committedDate": "2020-02-19T10:12:06Z", "message": "do not set 0 as default for runInstanceCount\n\n - If no value is set for runInstanceCount - it should be defaulted to null rather than 0"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNzU4Nzg2", "url": "https://github.com/gocd/gocd/pull/7751#pullrequestreview-361758786", "createdAt": "2020-02-20T09:44:41Z", "commit": {"oid": "960df0917a817466c00e34c06ec1a2150f0e5da6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTo0NDo0MlrOFsMjwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTo0NDo0MlrOFsMjwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg4NzQyNg==", "bodyText": "Blow up if runInstanceCount is null and change the return type to int.", "url": "https://github.com/gocd/gocd/pull/7751#discussion_r381887426", "createdAt": "2020-02-20T09:44:42Z", "author": {"login": "kritika-singh3"}, "path": "config/config-api/src/main/java/com/thoughtworks/go/config/JobConfig.java", "diffHunk": "@@ -226,11 +226,12 @@ public void setRunOnAllAgents(boolean runOnAllAgents) {\n     }\n \n \tpublic boolean isRunMultipleInstanceType() {\n-\t\treturn getRunInstanceCountValue() > 0;\n+        Integer runInstanceCountValue = getRunInstanceCountValue();\n+        return runInstanceCountValue != null && runInstanceCountValue > 0;\n \t}\n \n \tpublic Integer getRunInstanceCountValue() {\n-\t\treturn runInstanceCount == null ? 0 : Integer.valueOf(runInstanceCount);\n+\t\treturn isBlank(runInstanceCount) ? null : Integer.valueOf(runInstanceCount);\n \t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "960df0917a817466c00e34c06ec1a2150f0e5da6"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1970, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}