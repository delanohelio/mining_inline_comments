{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0OTM1MTk4", "number": 7736, "title": "Improvements to wrapper properties examples", "bodyText": "Issue: #7698\nDescription: This PR tries to make the wrapper.conf and wrapper-properties.conf situation a little clearer.\n\n\nCurrently, most installers include wrapper-config/wrapper.conf, wrapper-config/wrapper-properties.conf and wrapper-config/wrapper-properties.conf.example. However, in most of these cases (except Windows), the wrapper-properties.conf file includes everything inside wrapper-properties.conf.example. See: \n  \n    \n      gocd/installers/generic.gradle\n    \n    \n         Line 218\n      in\n      fbe640c\n    \n    \n    \n    \n\n        \n          \n           filter(ConcatFilter, append: file(\"include/wrapper-properties.conf.example\")) \n        \n    \n  \n\n\nThis PR removes the redundant wrapper-properties.conf.example file, except on Windows [See point 3]. The content is in wrapper-properties.conf.\n\n\nThe wrapper-properties.conf.example was often confusing. That's because it was a common file for both agent and server. So, it wouldn't be able to show how to set agent properties properly (which is different from how they are set on the server).\nThis PR uses two separate example files (internally) and concatenates the right content into wrapper-properties.conf (point 1).\n\n\nOn Windows, the exe is not packaged with a wrapper.properties file. It contains the example file.\nThis PR keeps the example file around, but makes it specific to the agent/server as mentioned in point 2.\n\n\nIn the agent-specific example content, it is now more clear how to set agent-specific properties and bootstrapper-specific properties. Similarly, the server-specific example content shows the right way to change Xmx.\n\n\n\nThe agent-specific wrapper-properties file looks like this:\n# Use this file to configure your GoCD agent\n\n# setup the GoCD server URL\nwrapper.app.parameter.100=-serverUrl\nwrapper.app.parameter.101=https://localhost:8154/go\n\n# For a detailed description about setting various environment variables, see the page at\n# https://wrapper.tanukisoftware.com/doc/english/props-envvars.html\n\n# For a detailed description about setting JVM options and system properties, see the page at\n# https://wrapper.tanukisoftware.com/doc/english/props-jvm.html\n\n# To understand how properties can be overridden in this file, see the page at:\n# https://wrapper.tanukisoftware.com/doc/english/props-cascading.html\n\n# To use a custom JVM:\n# wrapper.java.command=/path/to/java\n\n# To set any environment variables of your choice use the following syntax\n#set.SOME_ENVIRONMENT_VARIABLE=some-value\n#set.GRADLE_HOME=/path/to/gradle\n#set.M2_HOME=C:\\apache-maven-3.2.1\n#set.MAVEN_OPTS=-Xmx1048m -Xms256m -XX:MaxPermSize=312M\n\n# Appending to existing environment variables:\n# This config supports environment variable expansion at run time within the values of any environment variable.\n# To maintain the platform independent nature of this configuration file, the Windows syntax is used for all platforms.\n\n# On windows:\n#set.PATH=..\\lib;%PATH%\n\n# On Unix/Linux/macOS. Note that you must use %PATH%, and not $PATH, as you'd normally do on this platform\n#set.PATH=../lib:%PATH%\n\n###### System properties for GoCD agent bootstrapper ######\n# Set any system properties. We recommend that you begin with the index `100` and increment the index for each system property\n#wrapper.java.additional.100=-Dcom.example.enabled=true\n#wrapper.java.additional.101=-Dcom.example.name=bob\n\n# If a property contains quotes, these can be stripped out, but this works only on Unix/Linux/macOS\n#wrapper.java.additional.103=-Dmyapp.data=\"../MyApp Home\"\n#wrapper.java.additional.104.stripquotes=TRUE\n\n###### System properties for GoCD agent ######\n# Set a memory limit of 1GB for the agent process. We recommend that you do not use more than half your system memory.\n#set.AGENT_STARTUP_ARGS=-Xms128m -Xmx1024m -Dsome.java.property=somevalue\n\nThe server-specific wrapper-properties file looks like this:\n# Use this file to configure your GoCD server\n# For a detailed description about setting various environment variables, see the page at\n# https://wrapper.tanukisoftware.com/doc/english/props-envvars.html\n\n# For a detailed description about setting JVM options and system properties, see the page at\n# https://wrapper.tanukisoftware.com/doc/english/props-jvm.html\n\n# To understand how properties can be overridden in this file, see the page at:\n# https://wrapper.tanukisoftware.com/doc/english/props-cascading.html\n\n# To use a custom JVM:\n# wrapper.java.command=/path/to/java\n\n# To set any environment variables of your choice use the following syntax\n#set.SOME_ENVIRONMENT_VARIABLE=some-value\n#set.GRADLE_HOME=/path/to/gradle\n#set.M2_HOME=C:\\apache-maven-3.2.1\n#set.MAVEN_OPTS=-Xmx1048m -Xms256m -XX:MaxPermSize=312M\n\n# Appending to existing environment variables:\n# This config supports environment variable expansion at run time within the values of any environment variable.\n# To maintain the platform independent nature of this configuration file, the Windows syntax is used for all platforms.\n\n# On windows:\n#set.PATH=..\\lib;%PATH%\n\n# On Unix/Linux/macOS. Note that you must use %PATH%, and not $PATH, as you'd normally do on this platform\n#set.PATH=../lib:%PATH%\n\n# Set any system properties. We recommend that you begin with the index `100` and increment the index for each system property\n#wrapper.java.additional.100=-Dcom.example.enabled=true\n#wrapper.java.additional.101=-Dcom.example.name=bob\n\n# If a property contains quotes, these can be stripped out, but this works only on Unix/Linux/macOS\n#wrapper.java.additional.103=-Dmyapp.data=\"../MyApp Home\"\n#wrapper.java.additional.104.stripquotes=TRUE\n\n# Set a memory limit of 8GB (usually needed on your GoCD server for large setups). We recommend that you do not use more than half your system memory.\n#wrapper.java.additional.105=-Xmx8G", "createdAt": "2020-02-13T15:34:07Z", "url": "https://github.com/gocd/gocd/pull/7736", "merged": true, "mergeCommit": {"oid": "c91e54422f02a525d074eaa4ebaf537814e02f79"}, "closed": true, "closedAt": "2020-02-18T11:40:54Z", "author": {"login": "arvindsv"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcD98cUgFqTM1ODM4ODU2OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFJUDQgFqTM1OTU2NTMzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4Mzg4NTY4", "url": "https://github.com/gocd/gocd/pull/7736#pullrequestreview-358388568", "createdAt": "2020-02-13T16:58:04Z", "commit": {"oid": "1e6c35d31181a2343c5dfc85832387a0a16fb94e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxNjo1ODowNFrOFpbyNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxNjo1ODowNFrOFpbyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODk5MTE1OQ==", "bodyText": "It is my understanding is that java -Xmx1g -Xmx2g will force the JVM to use the heap specified last. The intention of using indices > 100 was that it allows GoCD to reserve indices upto 100 for its internal use.", "url": "https://github.com/gocd/gocd/pull/7736#discussion_r378991159", "createdAt": "2020-02-13T16:58:04Z", "author": {"login": "ketan"}, "path": "installers/include/wrapper-properties.go-server.conf.example", "diffHunk": "@@ -34,4 +35,5 @@\n #wrapper.java.additional.104.stripquotes=TRUE\n \n # Set a memory limit of 8GB (usually needed on your GoCD server for large setups). We recommend that you do not use more than half your system memory.\n-#wrapper.java.additional.105=-Xmx8G\n+# This needs to be index 2, since it needs to override the Xmx set in wrapper.conf\n+#wrapper.java.additional.2=-Xmx8G", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e6c35d31181a2343c5dfc85832387a0a16fb94e"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd13c639abe437442e5e50ec0b519f82ba488d7c", "author": {"user": {"login": "arvindsv", "name": "Aravind SV"}}, "url": "https://github.com/gocd/gocd/commit/fd13c639abe437442e5e50ec0b519f82ba488d7c", "committedDate": "2020-02-13T21:18:21Z", "message": "Improvements to wrapper properties examples"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1e6c35d31181a2343c5dfc85832387a0a16fb94e", "author": {"user": {"login": "arvindsv", "name": "Aravind SV"}}, "url": "https://github.com/gocd/gocd/commit/1e6c35d31181a2343c5dfc85832387a0a16fb94e", "committedDate": "2020-02-13T13:31:22Z", "message": "Improvements to wrapper properties examples"}, "afterCommit": {"oid": "fd13c639abe437442e5e50ec0b519f82ba488d7c", "author": {"user": {"login": "arvindsv", "name": "Aravind SV"}}, "url": "https://github.com/gocd/gocd/commit/fd13c639abe437442e5e50ec0b519f82ba488d7c", "committedDate": "2020-02-13T21:18:21Z", "message": "Improvements to wrapper properties examples"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NTY1MzMx", "url": "https://github.com/gocd/gocd/pull/7736#pullrequestreview-359565331", "createdAt": "2020-02-17T08:46:45Z", "commit": {"oid": "fd13c639abe437442e5e50ec0b519f82ba488d7c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1965, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}