{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MzU3NTY1", "number": 7670, "title": "Introduce API endpoint for retrieving parameters of a template", "bodyText": "Issue: #3194\nDescription:\n\nadded an endpoint /go/api/admin/templates/:template_name/parameters which returns a list of parameters that needs to be defined while using it to create a pipeline\n\ncurl:\n  curl \"http://go-server-url/go/api/admin/templates/template-name/parameters\" \\\n     -u 'username:password' \\\n     -H 'Accept: application/vnd.go.cd.v7+json'\n\nResponse:\n{\n  \"_links\" : {\n    \"self\" : {\n      \"href\" : \"http://go-server-url/go/api/admin/templates/template-name\"\n    },\n    \"doc\" : {\n      \"href\" : \"https://api.gocd.org/#template-config\"\n    },\n    \"find\" : {\n      \"href\" : \"http://go-server-url/go/api/admin/templates/:template_name\"\n    }\n  },\n  \"name\" : \"template-name\",\n  \"parameters\" : [ \"resources\", \"command\" ]\n}", "createdAt": "2020-01-29T03:59:45Z", "url": "https://github.com/gocd/gocd/pull/7670", "merged": true, "mergeCommit": {"oid": "9eac48743bf2e76e19626ad2a2951d269130eee8"}, "closed": true, "closedAt": "2020-02-03T06:42:22Z", "author": {"login": "kritika-singh3"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_plWsAFqTM1MTMyMTAxMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcAm9VUABqjMwMDA5MDY0MjM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMzIxMDEy", "url": "https://github.com/gocd/gocd/pull/7670#pullrequestreview-351321012", "createdAt": "2020-01-31T06:59:03Z", "commit": {"oid": "ce9e17e0261f052edf728934c2afc96b89680d2f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQwNjo1OTowNFrOFkCziw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQwNjo1OTowNFrOFkCziw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzMzOTAxOQ==", "bodyText": "Here, we're checking for the ETag generated based on the entire template config, whereas, this API is only for the template parameters.\nImagine there is a change in the template config, but the template parameters hasn't changed. Where, the API would respond 412 even if there is no change in the response of the API.\n\nHere are the options we've:\n\nCompute ETag only for template parameters.\nNo ETag for this API?? we always send 200?\nKeep the implementation as is (i.e. rely on entire template config for etag).\n\n@kritika-singh3 @ketan @arvindsv @maheshp @bdpiparva -- Thoughts??", "url": "https://github.com/gocd/gocd/pull/7670#discussion_r373339019", "createdAt": "2020-01-31T06:59:04Z", "author": {"login": "GaneshSPatil"}, "path": "api/api-template-config-v7/src/main/java/com/thoughtworks/go/apiv7/admin/templateconfig/TemplateConfigControllerV7.java", "diffHunk": "@@ -170,6 +173,16 @@ public String show(Request req, Response res) throws IOException {\n         }\n     }\n \n+    public String showParameters(Request req, Response res) throws IOException {\n+        PipelineTemplateConfig templateConfig = fetchEntityFromConfig(req.params(\"template_name\"));\n+        if (isGetOrHeadRequestFresh(req, templateConfig)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce9e17e0261f052edf728934c2afc96b89680d2f"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c22c99bb06e45a7df05e824f355db0d9861dfc0", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/9c22c99bb06e45a7df05e824f355db0d9861dfc0", "committedDate": "2020-02-03T06:09:41Z", "message": "Bumping up template config api to v7"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e65148546b1a52a93bdf2c4aabb19b5958b27d4", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/7e65148546b1a52a93bdf2c4aabb19b5958b27d4", "committedDate": "2020-02-03T06:29:18Z", "message": "Introduce API to return parameters for a given template"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ce9e17e0261f052edf728934c2afc96b89680d2f", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/ce9e17e0261f052edf728934c2afc96b89680d2f", "committedDate": "2020-01-29T03:55:42Z", "message": "Introduce API to return parameters for a given template"}, "afterCommit": {"oid": "7e65148546b1a52a93bdf2c4aabb19b5958b27d4", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/7e65148546b1a52a93bdf2c4aabb19b5958b27d4", "committedDate": "2020-02-03T06:29:18Z", "message": "Introduce API to return parameters for a given template"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1949, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}