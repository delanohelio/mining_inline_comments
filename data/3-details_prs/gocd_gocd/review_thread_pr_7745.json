{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NDM5NTU2", "number": 7745, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMDoyODozOFrODgpDDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwODo1Mjo0MVrODg_CMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1NTUzNTUxOnYy", "diffSide": "RIGHT", "path": "api/api-internal-package-repositories-v1/src/main/java/com/thoughtworks/go/apiv1/internalpackagerepositories/InternalPackageRepositoriesControllerV1.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMDoyODozOFrOFq9Eow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwMzo0NTo1OVrOFraPlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDU4NTEyMw==", "bodyText": "@kritika-singh3 - can we use the publicly documented Package Repositories and Packages API to fetch this information.\nIMO, we should always prefer public APIs for rendering entity information on the SPAs, unless its absolutely required to build a newer internal API.", "url": "https://github.com/gocd/gocd/pull/7745#discussion_r380585123", "createdAt": "2020-02-18T10:28:38Z", "author": {"login": "GaneshSPatil"}, "path": "api/api-internal-package-repositories-v1/src/main/java/com/thoughtworks/go/apiv1/internalpackagerepositories/InternalPackageRepositoriesControllerV1.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Copyright 2020 ThoughtWorks, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.thoughtworks.go.apiv1.internalpackagerepositories;\n+\n+import com.thoughtworks.go.api.ApiController;\n+import com.thoughtworks.go.api.ApiVersion;\n+import com.thoughtworks.go.api.CrudController;\n+import com.thoughtworks.go.api.base.OutputWriter;\n+import com.thoughtworks.go.api.spring.ApiAuthenticationHelper;\n+import com.thoughtworks.go.apiv1.internalpackagerepositories.representers.PackageRepositoriesRepresenter;\n+import com.thoughtworks.go.config.exceptions.EntityType;\n+import com.thoughtworks.go.config.exceptions.HttpException;\n+import com.thoughtworks.go.domain.packagerepository.PackageRepositories;\n+import com.thoughtworks.go.server.service.EntityHashingService;\n+import com.thoughtworks.go.server.service.materials.PackageRepositoryService;\n+import com.thoughtworks.go.spark.Routes;\n+import com.thoughtworks.go.spark.spring.SparkSpringController;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Component;\n+import spark.Request;\n+import spark.Response;\n+\n+import java.io.IOException;\n+import java.util.function.Consumer;\n+\n+import static spark.Spark.*;\n+\n+@Component\n+public class InternalPackageRepositoriesControllerV1 extends ApiController implements SparkSpringController {\n+\n+    private final ApiAuthenticationHelper apiAuthenticationHelper;\n+    private final PackageRepositoryService packageRepositoryService;\n+\n+    @Autowired\n+    public InternalPackageRepositoriesControllerV1(ApiAuthenticationHelper apiAuthenticationHelper, PackageRepositoryService packageRepositoryService) {\n+        super(ApiVersion.v1);\n+        this.apiAuthenticationHelper = apiAuthenticationHelper;\n+        this.packageRepositoryService = packageRepositoryService;\n+    }\n+\n+    @Override\n+    public String controllerBasePath() {\n+        return Routes.PackageRepository.INTERNAL_BASE;\n+    }\n+\n+    @Override\n+    public void setupRoutes() {\n+        path(controllerBasePath(), () -> {\n+             before(\"\", mimeType, this::setContentType);\n+             before(\"/*\", mimeType, this::setContentType);\n+\n+            before(\"\", mimeType, this.apiAuthenticationHelper::checkAdminUserOrGroupAdminUserAnd403);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2aec3029d9fbeacbe8808eaebe50f75d1a21f818"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDU4OTkyNg==", "bodyText": "Reason for going with an internal API:\n\nThe public API for Package Repositories does not contain all the info related to the packages (i.e. auto_update and configurations)\nYes, I make two API calls to get all package repositories and packages. But, the package name is not unique across the GoCD instance - it is unique only inside a particular package repository. Hence, merging the two list (IMO) got a bit of a overhead (checking with both repo id and package name).\n\nLet me know if you think otherwise.", "url": "https://github.com/gocd/gocd/pull/7745#discussion_r380589926", "createdAt": "2020-02-18T10:37:34Z", "author": {"login": "kritika-singh3"}, "path": "api/api-internal-package-repositories-v1/src/main/java/com/thoughtworks/go/apiv1/internalpackagerepositories/InternalPackageRepositoriesControllerV1.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Copyright 2020 ThoughtWorks, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.thoughtworks.go.apiv1.internalpackagerepositories;\n+\n+import com.thoughtworks.go.api.ApiController;\n+import com.thoughtworks.go.api.ApiVersion;\n+import com.thoughtworks.go.api.CrudController;\n+import com.thoughtworks.go.api.base.OutputWriter;\n+import com.thoughtworks.go.api.spring.ApiAuthenticationHelper;\n+import com.thoughtworks.go.apiv1.internalpackagerepositories.representers.PackageRepositoriesRepresenter;\n+import com.thoughtworks.go.config.exceptions.EntityType;\n+import com.thoughtworks.go.config.exceptions.HttpException;\n+import com.thoughtworks.go.domain.packagerepository.PackageRepositories;\n+import com.thoughtworks.go.server.service.EntityHashingService;\n+import com.thoughtworks.go.server.service.materials.PackageRepositoryService;\n+import com.thoughtworks.go.spark.Routes;\n+import com.thoughtworks.go.spark.spring.SparkSpringController;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Component;\n+import spark.Request;\n+import spark.Response;\n+\n+import java.io.IOException;\n+import java.util.function.Consumer;\n+\n+import static spark.Spark.*;\n+\n+@Component\n+public class InternalPackageRepositoriesControllerV1 extends ApiController implements SparkSpringController {\n+\n+    private final ApiAuthenticationHelper apiAuthenticationHelper;\n+    private final PackageRepositoryService packageRepositoryService;\n+\n+    @Autowired\n+    public InternalPackageRepositoriesControllerV1(ApiAuthenticationHelper apiAuthenticationHelper, PackageRepositoryService packageRepositoryService) {\n+        super(ApiVersion.v1);\n+        this.apiAuthenticationHelper = apiAuthenticationHelper;\n+        this.packageRepositoryService = packageRepositoryService;\n+    }\n+\n+    @Override\n+    public String controllerBasePath() {\n+        return Routes.PackageRepository.INTERNAL_BASE;\n+    }\n+\n+    @Override\n+    public void setupRoutes() {\n+        path(controllerBasePath(), () -> {\n+             before(\"\", mimeType, this::setContentType);\n+             before(\"/*\", mimeType, this::setContentType);\n+\n+            before(\"\", mimeType, this.apiAuthenticationHelper::checkAdminUserOrGroupAdminUserAnd403);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDU4NTEyMw=="}, "originalCommit": {"oid": "2aec3029d9fbeacbe8808eaebe50f75d1a21f818"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYwODY4Ng==", "bodyText": "As per the API documentation,\n\nThe public API for Package Repositories does not contain all the info related to the packages (i.e. auto_update and configurations)\n\nThe package repositories API will not contain detailed packages information (as it is a referenced entity). But, the public packages API does contain the auto_update and configurations information.\n\nYes, I make two API calls to get all package repositories and packages. But, the package name is not unique across the GoCD instance - it is unique only inside a particular package repository. Hence, merging the two list (IMO) got a bit of a overhead (checking with both repo id and package name).\n\nWhat is the overhead? I mean, it is the part of the validation that both repo-id and package-name can not be duplicated, we're not doing anything extra.\n\nNevertheless, If we ourselves can not use the entity API on the entity SPA, then the usability of such API is questionable :)", "url": "https://github.com/gocd/gocd/pull/7745#discussion_r380608686", "createdAt": "2020-02-18T11:15:11Z", "author": {"login": "GaneshSPatil"}, "path": "api/api-internal-package-repositories-v1/src/main/java/com/thoughtworks/go/apiv1/internalpackagerepositories/InternalPackageRepositoriesControllerV1.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Copyright 2020 ThoughtWorks, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.thoughtworks.go.apiv1.internalpackagerepositories;\n+\n+import com.thoughtworks.go.api.ApiController;\n+import com.thoughtworks.go.api.ApiVersion;\n+import com.thoughtworks.go.api.CrudController;\n+import com.thoughtworks.go.api.base.OutputWriter;\n+import com.thoughtworks.go.api.spring.ApiAuthenticationHelper;\n+import com.thoughtworks.go.apiv1.internalpackagerepositories.representers.PackageRepositoriesRepresenter;\n+import com.thoughtworks.go.config.exceptions.EntityType;\n+import com.thoughtworks.go.config.exceptions.HttpException;\n+import com.thoughtworks.go.domain.packagerepository.PackageRepositories;\n+import com.thoughtworks.go.server.service.EntityHashingService;\n+import com.thoughtworks.go.server.service.materials.PackageRepositoryService;\n+import com.thoughtworks.go.spark.Routes;\n+import com.thoughtworks.go.spark.spring.SparkSpringController;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Component;\n+import spark.Request;\n+import spark.Response;\n+\n+import java.io.IOException;\n+import java.util.function.Consumer;\n+\n+import static spark.Spark.*;\n+\n+@Component\n+public class InternalPackageRepositoriesControllerV1 extends ApiController implements SparkSpringController {\n+\n+    private final ApiAuthenticationHelper apiAuthenticationHelper;\n+    private final PackageRepositoryService packageRepositoryService;\n+\n+    @Autowired\n+    public InternalPackageRepositoriesControllerV1(ApiAuthenticationHelper apiAuthenticationHelper, PackageRepositoryService packageRepositoryService) {\n+        super(ApiVersion.v1);\n+        this.apiAuthenticationHelper = apiAuthenticationHelper;\n+        this.packageRepositoryService = packageRepositoryService;\n+    }\n+\n+    @Override\n+    public String controllerBasePath() {\n+        return Routes.PackageRepository.INTERNAL_BASE;\n+    }\n+\n+    @Override\n+    public void setupRoutes() {\n+        path(controllerBasePath(), () -> {\n+             before(\"\", mimeType, this::setContentType);\n+             before(\"/*\", mimeType, this::setContentType);\n+\n+            before(\"\", mimeType, this.apiAuthenticationHelper::checkAdminUserOrGroupAdminUserAnd403);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDU4NTEyMw=="}, "originalCommit": {"oid": "2aec3029d9fbeacbe8808eaebe50f75d1a21f818"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTA2MzA2MA==", "bodyText": "Agree with you. Will make the change.", "url": "https://github.com/gocd/gocd/pull/7745#discussion_r381063060", "createdAt": "2020-02-19T03:45:59Z", "author": {"login": "kritika-singh3"}, "path": "api/api-internal-package-repositories-v1/src/main/java/com/thoughtworks/go/apiv1/internalpackagerepositories/InternalPackageRepositoriesControllerV1.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Copyright 2020 ThoughtWorks, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.thoughtworks.go.apiv1.internalpackagerepositories;\n+\n+import com.thoughtworks.go.api.ApiController;\n+import com.thoughtworks.go.api.ApiVersion;\n+import com.thoughtworks.go.api.CrudController;\n+import com.thoughtworks.go.api.base.OutputWriter;\n+import com.thoughtworks.go.api.spring.ApiAuthenticationHelper;\n+import com.thoughtworks.go.apiv1.internalpackagerepositories.representers.PackageRepositoriesRepresenter;\n+import com.thoughtworks.go.config.exceptions.EntityType;\n+import com.thoughtworks.go.config.exceptions.HttpException;\n+import com.thoughtworks.go.domain.packagerepository.PackageRepositories;\n+import com.thoughtworks.go.server.service.EntityHashingService;\n+import com.thoughtworks.go.server.service.materials.PackageRepositoryService;\n+import com.thoughtworks.go.spark.Routes;\n+import com.thoughtworks.go.spark.spring.SparkSpringController;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Component;\n+import spark.Request;\n+import spark.Response;\n+\n+import java.io.IOException;\n+import java.util.function.Consumer;\n+\n+import static spark.Spark.*;\n+\n+@Component\n+public class InternalPackageRepositoriesControllerV1 extends ApiController implements SparkSpringController {\n+\n+    private final ApiAuthenticationHelper apiAuthenticationHelper;\n+    private final PackageRepositoryService packageRepositoryService;\n+\n+    @Autowired\n+    public InternalPackageRepositoriesControllerV1(ApiAuthenticationHelper apiAuthenticationHelper, PackageRepositoryService packageRepositoryService) {\n+        super(ApiVersion.v1);\n+        this.apiAuthenticationHelper = apiAuthenticationHelper;\n+        this.packageRepositoryService = packageRepositoryService;\n+    }\n+\n+    @Override\n+    public String controllerBasePath() {\n+        return Routes.PackageRepository.INTERNAL_BASE;\n+    }\n+\n+    @Override\n+    public void setupRoutes() {\n+        path(controllerBasePath(), () -> {\n+             before(\"\", mimeType, this::setContentType);\n+             before(\"/*\", mimeType, this::setContentType);\n+\n+            before(\"\", mimeType, this.apiAuthenticationHelper::checkAdminUserOrGroupAdminUserAnd403);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDU4NTEyMw=="}, "originalCommit": {"oid": "2aec3029d9fbeacbe8808eaebe50f75d1a21f818"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1OTEzNzc5OnYy", "diffSide": "RIGHT", "path": "api/api-packages-v1/src/main/java/com/thoughtworks/go/apiv1/packages/InternalPackagesControllerV1.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwODo1Mjo0MVrOFrflNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNTo1Nzo0MFrOF0qDiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE1MDUxOQ==", "bodyText": "remove this controller?", "url": "https://github.com/gocd/gocd/pull/7745#discussion_r381150519", "createdAt": "2020-02-19T08:52:41Z", "author": {"login": "GaneshSPatil"}, "path": "api/api-packages-v1/src/main/java/com/thoughtworks/go/apiv1/packages/InternalPackagesControllerV1.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Copyright 2020 ThoughtWorks, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.thoughtworks.go.apiv1.packages;\n+\n+import com.thoughtworks.go.api.ApiController;\n+import com.thoughtworks.go.api.ApiVersion;\n+import com.thoughtworks.go.api.spring.ApiAuthenticationHelper;\n+import com.thoughtworks.go.apiv1.packages.representers.PackageUsageRepresenter;\n+import com.thoughtworks.go.config.PipelineConfig;\n+import com.thoughtworks.go.config.PipelineConfigs;\n+import com.thoughtworks.go.server.service.GoConfigService;\n+import com.thoughtworks.go.server.service.materials.PackageRepositoryService;\n+import com.thoughtworks.go.spark.Routes;\n+import com.thoughtworks.go.spark.spring.SparkSpringController;\n+import com.thoughtworks.go.util.Pair;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import spark.Request;\n+import spark.Response;\n+\n+import java.io.IOException;\n+import java.util.List;\n+import java.util.Map;\n+\n+import static java.util.Collections.emptyList;\n+import static spark.Spark.*;\n+\n+public class InternalPackagesControllerV1 extends ApiController implements SparkSpringController {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b612117091541bf18d8b7dc0740d6aa018ef56f"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE1NDYxNQ==", "bodyText": "Should I make the Usages API public?", "url": "https://github.com/gocd/gocd/pull/7745#discussion_r381154615", "createdAt": "2020-02-19T09:00:38Z", "author": {"login": "kritika-singh3"}, "path": "api/api-packages-v1/src/main/java/com/thoughtworks/go/apiv1/packages/InternalPackagesControllerV1.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Copyright 2020 ThoughtWorks, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.thoughtworks.go.apiv1.packages;\n+\n+import com.thoughtworks.go.api.ApiController;\n+import com.thoughtworks.go.api.ApiVersion;\n+import com.thoughtworks.go.api.spring.ApiAuthenticationHelper;\n+import com.thoughtworks.go.apiv1.packages.representers.PackageUsageRepresenter;\n+import com.thoughtworks.go.config.PipelineConfig;\n+import com.thoughtworks.go.config.PipelineConfigs;\n+import com.thoughtworks.go.server.service.GoConfigService;\n+import com.thoughtworks.go.server.service.materials.PackageRepositoryService;\n+import com.thoughtworks.go.spark.Routes;\n+import com.thoughtworks.go.spark.spring.SparkSpringController;\n+import com.thoughtworks.go.util.Pair;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import spark.Request;\n+import spark.Response;\n+\n+import java.io.IOException;\n+import java.util.List;\n+import java.util.Map;\n+\n+import static java.util.Collections.emptyList;\n+import static spark.Spark.*;\n+\n+public class InternalPackagesControllerV1 extends ApiController implements SparkSpringController {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE1MDUxOQ=="}, "originalCommit": {"oid": "6b612117091541bf18d8b7dc0740d6aa018ef56f"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE1OTcxOA==", "bodyText": "yes", "url": "https://github.com/gocd/gocd/pull/7745#discussion_r381159718", "createdAt": "2020-02-19T09:10:51Z", "author": {"login": "GaneshSPatil"}, "path": "api/api-packages-v1/src/main/java/com/thoughtworks/go/apiv1/packages/InternalPackagesControllerV1.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Copyright 2020 ThoughtWorks, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.thoughtworks.go.apiv1.packages;\n+\n+import com.thoughtworks.go.api.ApiController;\n+import com.thoughtworks.go.api.ApiVersion;\n+import com.thoughtworks.go.api.spring.ApiAuthenticationHelper;\n+import com.thoughtworks.go.apiv1.packages.representers.PackageUsageRepresenter;\n+import com.thoughtworks.go.config.PipelineConfig;\n+import com.thoughtworks.go.config.PipelineConfigs;\n+import com.thoughtworks.go.server.service.GoConfigService;\n+import com.thoughtworks.go.server.service.materials.PackageRepositoryService;\n+import com.thoughtworks.go.spark.Routes;\n+import com.thoughtworks.go.spark.spring.SparkSpringController;\n+import com.thoughtworks.go.util.Pair;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import spark.Request;\n+import spark.Response;\n+\n+import java.io.IOException;\n+import java.util.List;\n+import java.util.Map;\n+\n+import static java.util.Collections.emptyList;\n+import static spark.Spark.*;\n+\n+public class InternalPackagesControllerV1 extends ApiController implements SparkSpringController {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE1MDUxOQ=="}, "originalCommit": {"oid": "6b612117091541bf18d8b7dc0740d6aa018ef56f"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc1OTMwNQ==", "bodyText": "#7841", "url": "https://github.com/gocd/gocd/pull/7745#discussion_r390759305", "createdAt": "2020-03-11T05:57:40Z", "author": {"login": "kritika-singh3"}, "path": "api/api-packages-v1/src/main/java/com/thoughtworks/go/apiv1/packages/InternalPackagesControllerV1.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Copyright 2020 ThoughtWorks, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.thoughtworks.go.apiv1.packages;\n+\n+import com.thoughtworks.go.api.ApiController;\n+import com.thoughtworks.go.api.ApiVersion;\n+import com.thoughtworks.go.api.spring.ApiAuthenticationHelper;\n+import com.thoughtworks.go.apiv1.packages.representers.PackageUsageRepresenter;\n+import com.thoughtworks.go.config.PipelineConfig;\n+import com.thoughtworks.go.config.PipelineConfigs;\n+import com.thoughtworks.go.server.service.GoConfigService;\n+import com.thoughtworks.go.server.service.materials.PackageRepositoryService;\n+import com.thoughtworks.go.spark.Routes;\n+import com.thoughtworks.go.spark.spring.SparkSpringController;\n+import com.thoughtworks.go.util.Pair;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import spark.Request;\n+import spark.Response;\n+\n+import java.io.IOException;\n+import java.util.List;\n+import java.util.Map;\n+\n+import static java.util.Collections.emptyList;\n+import static spark.Spark.*;\n+\n+public class InternalPackagesControllerV1 extends ApiController implements SparkSpringController {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE1MDUxOQ=="}, "originalCommit": {"oid": "6b612117091541bf18d8b7dc0740d6aa018ef56f"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2763, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}