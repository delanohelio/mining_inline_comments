{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzNDAwNjI2", "number": 8539, "title": "Backing up wrapper config dir is optional now #8525", "bodyText": "As part of backing up the wrapper config folder, the\nfolder location is determined using the env variable\nWRAPPER_CONF_DIR which is set by Tanuki wrapper during startup.\nStarting the GoCD server not as a service would not set the\nenv variable and would hence fail the backup. Hence making\nit optional.\n\nIssue: #8525", "createdAt": "2020-09-10T05:21:35Z", "url": "https://github.com/gocd/gocd/pull/8539", "merged": true, "mergeCommit": {"oid": "ead6bcb5f6775df062ccf5e6fd8f9261f209947b"}, "closed": true, "closedAt": "2020-09-15T10:48:22Z", "author": {"login": "maheshp"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHvTFGgBqjM3NTQ1MjgzNTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJBKnLgBqjM3NjY0OTE4MTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c5b9496246750a46e3ca2188cadd7a36cb7256b8", "author": {"user": {"login": "maheshp", "name": "Mahesh Panchaksharaiah"}}, "url": "https://github.com/gocd/gocd/commit/c5b9496246750a46e3ca2188cadd7a36cb7256b8", "committedDate": "2020-09-10T05:13:41Z", "message": "Backing up wrapper config dir is optional now #8525\n\n* As part of backing up the wrapper config folder, the\n  folder location is determined using the env variable\n  WRAPPER_CONF_DIR which is set by Tanuki wrapper during startup.\n  Starting the GoCD server not as a service would not set the\n  env variable and would hence fail the backup. Hence making\n  it optional."}, "afterCommit": {"oid": "ae9fa46c20aab7f590c66885fb83d9b547eda16c", "author": {"user": {"login": "maheshp", "name": "Mahesh Panchaksharaiah"}}, "url": "https://github.com/gocd/gocd/commit/ae9fa46c20aab7f590c66885fb83d9b547eda16c", "committedDate": "2020-09-11T06:20:47Z", "message": "Backing up wrapper config dir is optional now #8525\n\n* As part of backing up the wrapper config folder, the\n  folder location is determined using the env variable\n  WRAPPER_CONF_DIR which is set by Tanuki wrapper during startup.\n  Starting the GoCD server not as a service would not set the\n  env variable and would hence fail the backup. Hence making\n  it optional."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NTA3Mzg2", "url": "https://github.com/gocd/gocd/pull/8539#pullrequestreview-486507386", "createdAt": "2020-09-11T06:31:17Z", "commit": {"oid": "ae9fa46c20aab7f590c66885fb83d9b547eda16c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwNjozMToxN1rOHQQB5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwNjozMToxN1rOHQQB5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjgwMTg5Mg==", "bodyText": "How about:\nBackup was generated successfully. The backup of wrapper configuration was skipped as the 'wrapper_config_dir' path is unknown.", "url": "https://github.com/gocd/gocd/pull/8539#discussion_r486801892", "createdAt": "2020-09-11T06:31:17Z", "author": {"login": "kritika-singh3"}, "path": "server/src/main/java/com/thoughtworks/go/server/service/BackupService.java", "diffHunk": "@@ -224,8 +224,11 @@ private void notifyErrorToListeners(List<BackupUpdateListener> listeners, String\n         listeners.forEach(backupUpdateListener -> backupUpdateListener.error(message));\n     }\n \n-    private void notifyCompletionToListeners(List<BackupUpdateListener> listeners) {\n-        listeners.forEach(BackupUpdateListener::completed);\n+    private void notifyCompletionToListeners(List<BackupUpdateListener> listeners, boolean backedupWrapperConfig) {\n+        String message = backedupWrapperConfig\n+                ? \"Backup was generated successfully.\"\n+                : \"Backup was generated successfully. WrapperConfig backup was skipped, as the Wrapper Config Dir path is unknown.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae9fa46c20aab7f590c66885fb83d9b547eda16c"}, "originalPosition": 25}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae9fa46c20aab7f590c66885fb83d9b547eda16c", "author": {"user": {"login": "maheshp", "name": "Mahesh Panchaksharaiah"}}, "url": "https://github.com/gocd/gocd/commit/ae9fa46c20aab7f590c66885fb83d9b547eda16c", "committedDate": "2020-09-11T06:20:47Z", "message": "Backing up wrapper config dir is optional now #8525\n\n* As part of backing up the wrapper config folder, the\n  folder location is determined using the env variable\n  WRAPPER_CONF_DIR which is set by Tanuki wrapper during startup.\n  Starting the GoCD server not as a service would not set the\n  env variable and would hence fail the backup. Hence making\n  it optional."}, "afterCommit": {"oid": "0e9fea010b214aaae11c1e877ab875f6fe65c491", "author": {"user": {"login": "maheshp", "name": "Mahesh Panchaksharaiah"}}, "url": "https://github.com/gocd/gocd/commit/0e9fea010b214aaae11c1e877ab875f6fe65c491", "committedDate": "2020-09-11T06:52:51Z", "message": "Backing up wrapper config dir is optional now #8525\n\n* As part of backing up the wrapper config folder, the\n  folder location is determined using the env variable\n  WRAPPER_CONF_DIR which is set by Tanuki wrapper during startup.\n  Starting the GoCD server not as a service would not set the\n  env variable and would hence fail the backup. Hence making\n  it optional."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0e9fea010b214aaae11c1e877ab875f6fe65c491", "author": {"user": {"login": "maheshp", "name": "Mahesh Panchaksharaiah"}}, "url": "https://github.com/gocd/gocd/commit/0e9fea010b214aaae11c1e877ab875f6fe65c491", "committedDate": "2020-09-11T06:52:51Z", "message": "Backing up wrapper config dir is optional now #8525\n\n* As part of backing up the wrapper config folder, the\n  folder location is determined using the env variable\n  WRAPPER_CONF_DIR which is set by Tanuki wrapper during startup.\n  Starting the GoCD server not as a service would not set the\n  env variable and would hence fail the backup. Hence making\n  it optional."}, "afterCommit": {"oid": "64bd8225059468f05510ca85904b15567a07bdb8", "author": {"user": {"login": "maheshp", "name": "Mahesh Panchaksharaiah"}}, "url": "https://github.com/gocd/gocd/commit/64bd8225059468f05510ca85904b15567a07bdb8", "committedDate": "2020-09-11T07:12:58Z", "message": "Backing up wrapper config dir is optional now #8525\n\n* As part of backing up the wrapper config folder, the\n  folder location is determined using the env variable\n  WRAPPER_CONF_DIR which is set by Tanuki wrapper during startup.\n  Starting the GoCD server not as a service would not set the\n  env variable and would hence fail the backup. Hence making\n  it optional."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "64bd8225059468f05510ca85904b15567a07bdb8", "author": {"user": {"login": "maheshp", "name": "Mahesh Panchaksharaiah"}}, "url": "https://github.com/gocd/gocd/commit/64bd8225059468f05510ca85904b15567a07bdb8", "committedDate": "2020-09-11T07:12:58Z", "message": "Backing up wrapper config dir is optional now #8525\n\n* As part of backing up the wrapper config folder, the\n  folder location is determined using the env variable\n  WRAPPER_CONF_DIR which is set by Tanuki wrapper during startup.\n  Starting the GoCD server not as a service would not set the\n  env variable and would hence fail the backup. Hence making\n  it optional."}, "afterCommit": {"oid": "2152dd52945ecbb22f48541f8094d8604a386e78", "author": {"user": {"login": "maheshp", "name": "Mahesh Panchaksharaiah"}}, "url": "https://github.com/gocd/gocd/commit/2152dd52945ecbb22f48541f8094d8604a386e78", "committedDate": "2020-09-11T08:09:41Z", "message": "Backing up wrapper config dir is optional now #8525\n\n* As part of backing up the wrapper config folder, the\n  folder location is determined using the env variable\n  WRAPPER_CONF_DIR which is set by Tanuki wrapper during startup.\n  Starting the GoCD server not as a service would not set the\n  env variable and would hence fail the backup. Hence making\n  it optional."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NTcwODYw", "url": "https://github.com/gocd/gocd/pull/8539#pullrequestreview-486570860", "createdAt": "2020-09-11T08:17:51Z", "commit": {"oid": "2152dd52945ecbb22f48541f8094d8604a386e78"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "820746a62525bb550448eb046c49a38ef70a09ce", "author": {"user": {"login": "maheshp", "name": "Mahesh Panchaksharaiah"}}, "url": "https://github.com/gocd/gocd/commit/820746a62525bb550448eb046c49a38ef70a09ce", "committedDate": "2020-09-15T05:43:46Z", "message": "Backing up wrapper config dir is optional now #8525\n\n* As part of backing up the wrapper config folder, the\n  folder location is determined using the env variable\n  WRAPPER_CONF_DIR which is set by Tanuki wrapper during startup.\n  Starting the GoCD server not as a service would not set the\n  env variable and would hence fail the backup. Hence making\n  it optional."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2152dd52945ecbb22f48541f8094d8604a386e78", "author": {"user": {"login": "maheshp", "name": "Mahesh Panchaksharaiah"}}, "url": "https://github.com/gocd/gocd/commit/2152dd52945ecbb22f48541f8094d8604a386e78", "committedDate": "2020-09-11T08:09:41Z", "message": "Backing up wrapper config dir is optional now #8525\n\n* As part of backing up the wrapper config folder, the\n  folder location is determined using the env variable\n  WRAPPER_CONF_DIR which is set by Tanuki wrapper during startup.\n  Starting the GoCD server not as a service would not set the\n  env variable and would hence fail the backup. Hence making\n  it optional."}, "afterCommit": {"oid": "820746a62525bb550448eb046c49a38ef70a09ce", "author": {"user": {"login": "maheshp", "name": "Mahesh Panchaksharaiah"}}, "url": "https://github.com/gocd/gocd/commit/820746a62525bb550448eb046c49a38ef70a09ce", "committedDate": "2020-09-15T05:43:46Z", "message": "Backing up wrapper config dir is optional now #8525\n\n* As part of backing up the wrapper config folder, the\n  folder location is determined using the env variable\n  WRAPPER_CONF_DIR which is set by Tanuki wrapper during startup.\n  Starting the GoCD server not as a service would not set the\n  env variable and would hence fail the backup. Hence making\n  it optional."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1817, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}