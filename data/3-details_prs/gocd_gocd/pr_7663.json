{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3ODQ0MjQy", "number": 7663, "title": "Added config migration to support rules in config repo", "bodyText": "Issue: #7605\nDescription:\n\nAdded support for rules to the config repo to allow/deny creation/access to environments, pipeline groups and pipelines.\nSince the general rule will be deny all, added a default allow all rule to all existing config repos in the migration.", "createdAt": "2020-01-28T06:14:56Z", "url": "https://github.com/gocd/gocd/pull/7663", "merged": true, "mergeCommit": {"oid": "9b2ef3e500c7e6366c701d28461f9220125b78b6"}, "closed": true, "closedAt": "2020-01-31T07:21:01Z", "author": {"login": "kritika-singh3"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-uat9gBqjI5ODQ5ODA3MTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBKAe1gFqTM1MzM3MjUyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9a45b1c30e7abf78f003e9c798808237088f32fe", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/9a45b1c30e7abf78f003e9c798808237088f32fe", "committedDate": "2020-01-28T06:12:02Z", "message": "Updated tests"}, "afterCommit": {"oid": "eca2f4e72afc2ac895dfb9c956d06768b007bf1a", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/eca2f4e72afc2ac895dfb9c956d06768b007bf1a", "committedDate": "2020-01-28T10:02:04Z", "message": "Updated tests\n - fixed tests which relied on default ID added to config repo - added the id in the tests itself, rather than adding a default one"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eca2f4e72afc2ac895dfb9c956d06768b007bf1a", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/eca2f4e72afc2ac895dfb9c956d06768b007bf1a", "committedDate": "2020-01-28T10:02:04Z", "message": "Updated tests\n - fixed tests which relied on default ID added to config repo - added the id in the tests itself, rather than adding a default one"}, "afterCommit": {"oid": "ca511f69d118ee062338b4a625311f8cefbeb468", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/ca511f69d118ee062338b4a625311f8cefbeb468", "committedDate": "2020-01-28T10:52:58Z", "message": "Updated tests\n - fixed tests which relied on default ID added to config repo - added the id in the tests itself, rather than adding a default one"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "609257acf441dd3172673ddbf13813d48cd1b1e8", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/609257acf441dd3172673ddbf13813d48cd1b1e8", "committedDate": "2020-01-31T06:01:13Z", "message": "Adding support for rule in config repo\n\n - added a config migration to add <allow type=\"*\" action=\"refer\">*</allow> to all config repos as by default the rule will be deny all"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00b357c112ef1a3168aee5a6a4f6c8966137eb43", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/00b357c112ef1a3168aee5a6a4f6c8966137eb43", "committedDate": "2020-01-31T06:01:13Z", "message": "Code refactoring\n - rename of getMaterialConfig to getRepo\n - inlining of constructors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe89912aae06741fb80fa3c2769b957f55e08ab3", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/fe89912aae06741fb80fa3c2769b957f55e08ab3", "committedDate": "2020-01-31T06:01:14Z", "message": "Updated tests\n - fixed tests which relied on default ID added to config repo - added the id in the tests itself, rather than adding a default one"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ca511f69d118ee062338b4a625311f8cefbeb468", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/ca511f69d118ee062338b4a625311f8cefbeb468", "committedDate": "2020-01-28T10:52:58Z", "message": "Updated tests\n - fixed tests which relied on default ID added to config repo - added the id in the tests itself, rather than adding a default one"}, "afterCommit": {"oid": "fe89912aae06741fb80fa3c2769b957f55e08ab3", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/fe89912aae06741fb80fa3c2769b957f55e08ab3", "committedDate": "2020-01-31T06:01:14Z", "message": "Updated tests\n - fixed tests which relied on default ID added to config repo - added the id in the tests itself, rather than adding a default one"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzMzcyNTI5", "url": "https://github.com/gocd/gocd/pull/7663#pullrequestreview-353372529", "createdAt": "2020-02-04T23:19:35Z", "commit": {"oid": "609257acf441dd3172673ddbf13813d48cd1b1e8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQyMzoxOTozNVrOFlm8SQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQyMzoxOTozNVrOFlm8SQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDk3OTY1Nw==", "bodyText": "@kritika-singh3 where has this check moved? This check ensured a config repo is invalid if the material config within is invalid.", "url": "https://github.com/gocd/gocd/pull/7663#discussion_r374979657", "createdAt": "2020-02-04T23:19:35Z", "author": {"login": "maheshp"}, "path": "config/config-api/src/main/java/com/thoughtworks/go/config/remote/ConfigRepoConfig.java", "diffHunk": "@@ -142,29 +88,8 @@ private void validateUniquenessOfId(ValidationContext validationContext) {\n         }\n     }\n \n-    public boolean validateTree(ValidationContext validationContext) {\n-        validate(validationContext);\n-        boolean isValid = errors.isEmpty();\n-\n-        if (getMaterialConfig() != null) {\n-            isValid = getMaterialConfig().errors().isEmpty() && isValid;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "609257acf441dd3172673ddbf13813d48cd1b1e8"}, "originalPosition": 147}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1944, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}