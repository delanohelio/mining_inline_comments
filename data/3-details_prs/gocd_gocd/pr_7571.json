{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNDAzMTY1", "number": 7571, "title": "Add internal pipeline structure api with suggestions", "bodyText": "Issue: Comment on #7544\nDescription:\nIn order to always show auto-complete suggestions, introduced an internal api which will fetch the relevant groups with the needed information", "createdAt": "2020-01-10T11:17:15Z", "url": "https://github.com/gocd/gocd/pull/7571", "merged": true, "mergeCommit": {"oid": "a42fb8d70a0194b5def581847952e8188536046f"}, "closed": true, "closedAt": "2020-01-13T10:31:14Z", "author": {"login": "kritika-singh3"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb55g7XAFqTM0MTczMTc1OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb55z8KABqjI5NDI2MTg3MzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNzMxNzU4", "url": "https://github.com/gocd/gocd/pull/7571#pullrequestreview-341731758", "createdAt": "2020-01-13T09:58:01Z", "commit": {"oid": "cdce19818e842a7283c3a70498d0ed3572aa203c"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwOTo1ODowMVrOFcxrOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwOTo1ODowMVrOFcxrOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTcxODMzMA==", "bodyText": "should we also verifyContentType?", "url": "https://github.com/gocd/gocd/pull/7571#discussion_r365718330", "createdAt": "2020-01-13T09:58:01Z", "author": {"login": "bdpiprava"}, "path": "api/api-internal-pipeline-structure-v1/src/main/java/com/thoughtworks/go/apiv1/internalpipelinestructure/InternalPipelineStructureControllerV1.java", "diffHunk": "@@ -61,31 +64,47 @@ public InternalPipelineStructureControllerV1(ApiAuthenticationHelper apiAuthenti\n                 .put(\"view\", () -> templateConfigService.templateConfigsThatCanBeViewedBy(currentUsername()))\n                 .put(\"administer\", () -> templateConfigService.templateConfigsThatCanBeEditedBy(currentUsername()))\n                 .build();\n+        this.userService = userService;\n     }\n \n     @Override\n     public String controllerBasePath() {\n-        return Routes.InternalPipelineStructure.BASE;\n+        return InternalPipelineStructure.BASE;\n     }\n \n     @Override\n     public void setupRoutes() {\n         path(controllerBasePath(), () -> {\n-            // uncomment the line below to set the content type on the base path\n             before(\"\", mimeType, this::setContentType);\n-            // uncomment the line below to set the content type on nested routes\n             before(\"/*\", mimeType, this::setContentType);\n \n-            // uncomment for the `index` action\n+            before(\"\", mimeType, this.apiAuthenticationHelper::checkUserAnd403);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdce19818e842a7283c3a70498d0ed3572aa203c"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c436f6211626e3569cc850db09433b26c8214ce", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/4c436f6211626e3569cc850db09433b26c8214ce", "committedDate": "2020-01-13T10:29:45Z", "message": "Add internal pipeline structure api with suggestions\n\n - added method and necessary routes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68ef735f3da3ef088b31478e31c49ff819902290", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/68ef735f3da3ef088b31478e31c49ff819902290", "committedDate": "2020-01-13T10:29:45Z", "message": "Updated the pipelines spa to use the internal api to fetch the accessible grps and envs along with suggestions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8e9baee54344c8f7b70c20a000e70c1d958a4aa", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/c8e9baee54344c8f7b70c20a000e70c1d958a4aa", "committedDate": "2020-01-13T10:29:46Z", "message": "Wrapping up roles and users inside a suggestions object for better api to body mapping. Updated the spa fr the same."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cdce19818e842a7283c3a70498d0ed3572aa203c", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/cdce19818e842a7283c3a70498d0ed3572aa203c", "committedDate": "2020-01-10T11:14:40Z", "message": "Updated the pipelines spa to use the internal api to fetch the accessible grps and envs along with suggestions"}, "afterCommit": {"oid": "c8e9baee54344c8f7b70c20a000e70c1d958a4aa", "author": {"user": {"login": "kritika-singh3", "name": "Kritika"}}, "url": "https://github.com/gocd/gocd/commit/c8e9baee54344c8f7b70c20a000e70c1d958a4aa", "committedDate": "2020-01-13T10:29:46Z", "message": "Wrapping up roles and users inside a suggestions object for better api to body mapping. Updated the spa fr the same."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1979, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}