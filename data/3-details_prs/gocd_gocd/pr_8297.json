{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyNTQzMzkx", "number": 8297, "title": "Manual stage trigger on dashboard", "bodyText": "Issue: #7687\nDescription:\nDone:\n\n Bump up dashboard api Dashboard API has already been bumped up from v3 to v4 to add empty pipeline group information.\n Add approval_type information to the dashboard api.\n Add manual gate button to the manual stages.\n Disable manual gate when:\n\n the previous stage hasn't run or still is in progress.\n the current stage has already been scheduled.\n user does not have permissions to operate on the pipeline.\n\n\n Add help text.\n Bind stage trigger api responses to the pipeline tile.\n Disable manual gate when stage permissions are overridden. Dashboard API does not include permissions at individual stage.\n Disable manual trigger when allow_only_on_success_of_previous_stage is set to true and previous stage is either failed or cancelled.\n\nPending:\n\n Support force scheduling next stage when previous stage does not complete successfully (failed/cancelled). This option will be considered as part of stage overview popup.\n\nScreenshots:\n\n\n\nThe error scenario screenshot can be ignored. When permissions are implemented, the manual gate icon will be disabled when users don't permission to schedule the stage which avoids this error.\nIt is added to demonstrate error binding with the pipeline tile.", "createdAt": "2020-07-01T08:50:18Z", "url": "https://github.com/gocd/gocd/pull/8297", "merged": true, "mergeCommit": {"oid": "25aa469fb33faa1cea1f17a2a5d88dfff28ab7fa"}, "closed": true, "closedAt": "2020-07-30T04:38:00Z", "author": {"login": "GaneshSPatil"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwmW0lAFqTQ0MDY3NjQzMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxONCcgBqjM1MDk4OTE1ODU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNjc2NDMw", "url": "https://github.com/gocd/gocd/pull/8297#pullrequestreview-440676430", "createdAt": "2020-07-01T08:55:46Z", "commit": {"oid": "19f80a436c9c35ef3a39f9d779816d6928e7f312"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwODo1NTo0NlrOGrdF8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwODo1NTo0NlrOGrdF8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIxODYwOQ==", "bodyText": "Duplicate method: runStage", "url": "https://github.com/gocd/gocd/pull/8297#discussion_r448218609", "createdAt": "2020-07-01T08:55:46Z", "author": {"login": "kritika-singh3"}, "path": "server/src/main/webapp/WEB-INF/rails/webpack/helpers/spark_routes.ts", "diffHunk": "@@ -258,6 +258,10 @@ export class SparkRoutes {\n     return `/go/api/admin/maintenance_mode/info`;\n   }\n \n+  static stageTriggerPath(pipelineName: string, pipelineCounter: number, stageName: string): string {\n+    return `/go/api/stages/${pipelineName}/${pipelineCounter}/${stageName}/run`;\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19f80a436c9c35ef3a39f9d779816d6928e7f312"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db81cce509a2c85bd12189d8fb971b618904dab1", "author": {"user": {"login": "GaneshSPatil", "name": "Ganesh S Patil"}}, "url": "https://github.com/gocd/gocd/commit/db81cce509a2c85bd12189d8fb971b618904dab1", "committedDate": "2020-07-03T05:36:25Z", "message": "Add approval_type information to the dashboard stage model"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d422f6b028b06ba6d64cc9cb304980061325caf", "author": {"user": {"login": "GaneshSPatil", "name": "Ganesh S Patil"}}, "url": "https://github.com/gocd/gocd/commit/2d422f6b028b06ba6d64cc9cb304980061325caf", "committedDate": "2020-07-03T05:36:25Z", "message": "Deserialize approval_type field from the dashboard json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "885379279c06ba3ff351c37f97fad85458cd0f80", "author": {"user": {"login": "GaneshSPatil", "name": "Ganesh S Patil"}}, "url": "https://github.com/gocd/gocd/commit/885379279c06ba3ff351c37f97fad85458cd0f80", "committedDate": "2020-07-03T05:36:25Z", "message": "Add a manual gate icon on the stages tile when the stage requires manual approval"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "423435280a4bb73428599c628d44adcdc8349b19", "author": {"user": {"login": "GaneshSPatil", "name": "Ganesh S Patil"}}, "url": "https://github.com/gocd/gocd/commit/423435280a4bb73428599c628d44adcdc8349b19", "committedDate": "2020-07-03T05:36:25Z", "message": "Make a request to server to schedule the next stage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae10e3dffd597abed28403515149d65061b02bbf", "author": {"user": {"login": "GaneshSPatil", "name": "Ganesh S Patil"}}, "url": "https://github.com/gocd/gocd/commit/ae10e3dffd597abed28403515149d65061b02bbf", "committedDate": "2020-07-03T05:36:25Z", "message": "Deserialize stage approved_by field from the dashboard json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bbf4d2b011e59f46150577f989fd6b8a6430e90", "author": {"user": {"login": "GaneshSPatil", "name": "Ganesh S Patil"}}, "url": "https://github.com/gocd/gocd/commit/5bbf4d2b011e59f46150577f989fd6b8a6430e90", "committedDate": "2020-07-03T05:36:25Z", "message": "Add manual gate help text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b3601176831426d6a85b8f1afffbdc6c4f3e502", "author": {"user": {"login": "GaneshSPatil", "name": "Ganesh S Patil"}}, "url": "https://github.com/gocd/gocd/commit/5b3601176831426d6a85b8f1afffbdc6c4f3e502", "committedDate": "2020-07-03T05:36:25Z", "message": "Improve help text and specs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "19f80a436c9c35ef3a39f9d779816d6928e7f312", "author": {"user": {"login": "GaneshSPatil", "name": "Ganesh S Patil"}}, "url": "https://github.com/gocd/gocd/commit/19f80a436c9c35ef3a39f9d779816d6928e7f312", "committedDate": "2020-07-01T08:15:35Z", "message": "Improve help text and specs"}, "afterCommit": {"oid": "50abc8cfea2d584542fd6aa4ab6a264bb2a98678", "author": {"user": {"login": "GaneshSPatil", "name": "Ganesh S Patil"}}, "url": "https://github.com/gocd/gocd/commit/50abc8cfea2d584542fd6aa4ab6a264bb2a98678", "committedDate": "2020-07-03T06:34:07Z", "message": "Disable manual trigger\n\n* Disable manual trigger when user does not have stage operate permissions\n* Disable manual trigger when allow_only_on_success_of_previous_stage is\n  set to true and previous stage is either failed or cancelled."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c2c58420f7cdf7c8efc7bb05c6a8320c0b04e7d", "author": {"user": {"login": "GaneshSPatil", "name": "Ganesh S Patil"}}, "url": "https://github.com/gocd/gocd/commit/9c2c58420f7cdf7c8efc7bb05c6a8320c0b04e7d", "committedDate": "2020-07-03T07:21:03Z", "message": "Disable manual trigger\n\n* Disable manual trigger when user does not have stage operate permissions\n* Disable manual trigger when allow_only_on_success_of_previous_stage is\n  set to true and previous stage is either failed or cancelled."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a93f33dabae5e517aa90fc067916f64b6ea3fffd", "author": {"user": {"login": "GaneshSPatil", "name": "Ganesh S Patil"}}, "url": "https://github.com/gocd/gocd/commit/a93f33dabae5e517aa90fc067916f64b6ea3fffd", "committedDate": "2020-07-03T07:21:07Z", "message": "Remove duplicate 'stageTriggerPath' routes method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ae09e13d38ef22ca87f296feed048621e73696e", "author": {"user": {"login": "GaneshSPatil", "name": "Ganesh S Patil"}}, "url": "https://github.com/gocd/gocd/commit/7ae09e13d38ef22ca87f296feed048621e73696e", "committedDate": "2020-07-03T07:20:00Z", "message": "Remove duplicate 'stageTriggerPath' routes method"}, "afterCommit": {"oid": "a93f33dabae5e517aa90fc067916f64b6ea3fffd", "author": {"user": {"login": "GaneshSPatil", "name": "Ganesh S Patil"}}, "url": "https://github.com/gocd/gocd/commit/a93f33dabae5e517aa90fc067916f64b6ea3fffd", "committedDate": "2020-07-03T07:21:07Z", "message": "Remove duplicate 'stageTriggerPath' routes method"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1866, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}