{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0NTk3NjQ4", "number": 2345, "title": "Add support for retrieving MIME type viewer configuration to oeq-ts-rest-api", "bodyText": "Checklist\n\n\n the contributor license agreement is signed\n commit message follows commit guidelines\n tests are included\n\nDescription of change\n\nThis PR Adds support the TS REST Module for the new endpoint added in #2339 to retrieve viewer configuration for a specified MIME type. This work is seen in MimeType.ts and MimeType.test.ts.\nHowever when doing this I saw that the existing /mimetype query (to list MIME types) was still sitting in one of the front-end modules (SearchFilterSettingsModule.ts) so I refactored that out into the new MimeType.ts and then refactored the consumers as needed.\n#1306", "createdAt": "2020-09-29T06:44:01Z", "url": "https://github.com/openequella/openEQUELLA/pull/2345", "merged": true, "mergeCommit": {"oid": "b4e75ddda87940d4f47c09612fcf9f6458eb22d9"}, "closed": true, "closedAt": "2020-09-30T01:30:47Z", "author": {"login": "edalex-ian"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNe8qqAH2gAyNDk0NTk3NjQ4OjY4MzY3MmM0MThmODY4ZDRjYWE4OTgzZGVjN2ZkYWFiMWM5ZDQxYjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNw7IigFqTQ5ODk5NjQ4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "683672c418f868d4caa8983dec7fdaab1c9d41b5", "author": {"user": {"login": "edalex-ian", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/683672c418f868d4caa8983dec7fdaab1c9d41b5", "committedDate": "2020-09-29T02:41:40Z", "message": "feat(oeq-ts-rest-api): Add support for listing MIME types\n\nThis functionality was currently buried in the front-end, so in preparation for supporting retrieval of MIME type viewer configuration it made sense to refactor."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b90e9dd8f2eb1be47a36f0efdbbc6d9894000d8", "author": {"user": {"login": "edalex-ian", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/0b90e9dd8f2eb1be47a36f0efdbbc6d9894000d8", "committedDate": "2020-09-29T02:41:40Z", "message": "refactor(front-end): Refactor to use OEQ.MimeType"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbaaa829cbae5156704a8ea0e0ef494df2008813", "author": {"user": {"login": "edalex-ian", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/cbaaa829cbae5156704a8ea0e0ef494df2008813", "committedDate": "2020-09-29T06:23:11Z", "message": "feat(oeq-ts-rest-api): Add support for getting MIME type viewer configuration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MTQxMTYy", "url": "https://github.com/openequella/openEQUELLA/pull/2345#pullrequestreview-498141162", "createdAt": "2020-09-29T06:48:01Z", "commit": {"oid": "cbaaa829cbae5156704a8ea0e0ef494df2008813"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNjo0ODowMVrOHZdM8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNjo1MDo0OVrOHZdSQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ1NDg5Nw==", "bodyText": "Inconsistent capitalisation of MIME in the comments here.", "url": "https://github.com/openequella/openEQUELLA/pull/2345#discussion_r496454897", "createdAt": "2020-09-29T06:48:01Z", "author": {"login": "SammyIsConfused"}, "path": "oeq-ts-rest-api/src/MimeType.ts", "diffHunk": "@@ -0,0 +1,145 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import { is } from 'typescript-is';\n+import { GET } from './AxiosInstance';\n+\n+export interface MimeTypeEntry {\n+  /**\n+   * The name of a Mime type.\n+   */\n+  mimeType: string;\n+  /**\n+   * The description of a Mime type.\n+   */\n+  desc?: string;\n+}\n+\n+/**\n+ * Configuration for a MIME type viewer.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbaaa829cbae5156704a8ea0e0ef494df2008813"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ1NjI1Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * Which viewer should be used by default - .e.g. on search result pages.\n          \n          \n            \n               * Which viewer should be used by default - e.g. on search result pages.", "url": "https://github.com/openequella/openEQUELLA/pull/2345#discussion_r496456256", "createdAt": "2020-09-29T06:50:49Z", "author": {"login": "SammyIsConfused"}, "path": "oeq-ts-rest-api/src/MimeType.ts", "diffHunk": "@@ -0,0 +1,145 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import { is } from 'typescript-is';\n+import { GET } from './AxiosInstance';\n+\n+export interface MimeTypeEntry {\n+  /**\n+   * The name of a Mime type.\n+   */\n+  mimeType: string;\n+  /**\n+   * The description of a Mime type.\n+   */\n+  desc?: string;\n+}\n+\n+/**\n+ * Configuration for a MIME type viewer.\n+ *\n+ * Based on: com.tle.web.viewurl.ResourceViewerConfig\n+ */\n+export interface ViewerConfig {\n+  /**\n+   * Whether the viewer should open in a new window.\n+   */\n+  openInNewWindow: boolean;\n+  /**\n+   * CSS style width specification.\n+   */\n+  width: string;\n+  /**\n+   * CSS style height specification.\n+   */\n+  height: string;\n+  /**\n+   * Whether a light-table type viewer should be used - i.e. originally the old\n+   * [Thickbox](http://codylindley.com/thickbox/) and more recently\n+   * [Fancybox](http://fancybox.net/).\n+   */\n+  thickbox: boolean;\n+  /**\n+   * Various freeform configuration for the specific viewer.\n+   */\n+  attr: Record<string, unknown>;\n+}\n+\n+/**\n+ * Current list of known oEQ ViewerIds.\n+ */\n+export type ViewerId =\n+  | 'downloadIms'\n+  | 'echoCenterViewer'\n+  | 'echoPlayerViewer'\n+  | 'echoPodcastViewer'\n+  | 'echoVodcastViewer'\n+  | 'externalToolViewer'\n+  | 'fancy'\n+  | 'file'\n+  | 'googledocviewer'\n+  | 'htmlFiveViewer'\n+  | 'kalturaViewer'\n+  | 'livNavTreeViewer'\n+  | 'qtiTestViewer'\n+  | 'tohtml'\n+  | 'toimg';\n+\n+/**\n+ * Basic details for each viewer, including optional configuration. If `config` is not present, then\n+ * the consumer should use it's own defaults.\n+ */\n+export interface MimeTypeViewerDetail {\n+  /**\n+   * One of the standard oEQ viewer types.\n+   */\n+  viewerId: ViewerId;\n+  /**\n+   * Standard config (optionally defined) around how this should be displayed.\n+   */\n+  config?: ViewerConfig;\n+}\n+\n+/**\n+ * The complete viewer configuration for a MIME type.\n+ */\n+export interface MimeTypeViewerConfiguration {\n+  /**\n+   * Which viewer should be used by default - .e.g. on search result pages.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbaaa829cbae5156704a8ea0e0ef494df2008813"}, "originalPosition": 102}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51da3e3b3366e6929609a360ecd127baa93dbc34", "author": {"user": {"login": "edalex-ian", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/51da3e3b3366e6929609a360ecd127baa93dbc34", "committedDate": "2020-09-29T23:31:18Z", "message": "chore(oeq-ts-rest-api): Tidy up comments\n\nFeedback from PR #2345"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4OTk2NDgx", "url": "https://github.com/openequella/openEQUELLA/pull/2345#pullrequestreview-498996481", "createdAt": "2020-09-29T23:38:17Z", "commit": {"oid": "51da3e3b3366e6929609a360ecd127baa93dbc34"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 386, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}