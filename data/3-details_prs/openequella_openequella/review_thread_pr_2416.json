{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0NDk2NTQ2", "number": 2416, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNDo1MDowNFrOEujjOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwNjoxODo1MlrOEvnWGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3MjUyNDA4OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/modules/SchemaModule.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNDo1MDowNFrOHjCoxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNDo1MDowNFrOHjCoxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjUwNTQxMw==", "bodyText": "this could be alternatively be done by wrapping\nnode.children = Object.entries(definition)\nin a conditional, to avoid throwing", "url": "https://github.com/openequella/openEQUELLA/pull/2416#discussion_r506505413", "createdAt": "2020-10-16T14:50:04Z", "author": {"login": "ChristianMurphy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/modules/SchemaModule.tsx", "diffHunk": "@@ -59,15 +66,17 @@ export const schemaListSummary = async (): Promise<Map<string, string>> => {\n  * @param parent Mainly for recursive calls to provide back linking to the parents.\n  */\n export const buildSchemaTree = (\n-  definition: any,\n+  definition: Definition | unknown,\n   name: string,\n   parent?: SchemaNode\n ): SchemaNode => {\n   const node: SchemaNode = { name: name, parent: parent };\n-  node.children = Object.keys(definition)\n-    .filter((childName: string) => typeof definition[childName] === \"object\")\n-    .map((childName: string) =>\n-      buildSchemaTree(definition[childName], childName, node)\n+  if (!isDefinition(definition))\n+    throw new TypeError(\"definition is not an indexable object\");\n+  node.children = Object.entries(definition)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67d34c0aa67b7d570152ff9f50f0a91cf1a649fa"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NzI3MDA4OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/legacycontent/LegacyContent.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQyMjowMDowOFrOHjuO4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQyMjowMDowOFrOHjuO4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzIxOTY4Mw==", "bodyText": "\ud83d\ude05\nLeaving this be for now, as it is primarily a PR for typings, it may be something to revisit", "url": "https://github.com/openequella/openEQUELLA/pull/2416#discussion_r507219683", "createdAt": "2020-10-18T22:00:08Z", "author": {"login": "ChristianMurphy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/legacycontent/LegacyContent.tsx", "diffHunk": "@@ -24,12 +24,11 @@ import * as OEQ from \"@openequella/rest-api-client\";\n \n declare global {\n   interface Window {\n-    _trigger: any;\n-    eval: any;\n-    EQ: { [index: string]: any };\n+    _trigger: undefined | ((value: string) => boolean);\n+    EQ: { [index: string]: unknown };\n   }\n \n-  const _trigger: any;\n+  const _trigger: (value: string) => boolean;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67d34c0aa67b7d570152ff9f50f0a91cf1a649fa"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MzYzMTYwOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/util/langstrings.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwNjoxODo1MlrOHksOGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQyMjoxMDozNFrOHlS_xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODIzNTI4OQ==", "bodyText": "@PenghaiZhang do you foresee any issues with this in relation to the recent fixes you did to support custom language strings?", "url": "https://github.com/openequella/openEQUELLA/pull/2416#discussion_r508235289", "createdAt": "2020-10-20T06:18:52Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/util/langstrings.ts", "diffHunk": "@@ -17,7 +17,7 @@\n  */\n import { sprintf } from \"sprintf-js\";\n \n-declare let bundle: any;\n+declare let bundle: { [prefix: string]: string };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67d34c0aa67b7d570152ff9f50f0a91cf1a649fa"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODg3MDU5Nw==", "bodyText": "I tested this by updating a couple language strings, uploading again, and I can see the updated texts. So this type works.", "url": "https://github.com/openequella/openEQUELLA/pull/2416#discussion_r508870597", "createdAt": "2020-10-20T22:10:34Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/util/langstrings.ts", "diffHunk": "@@ -17,7 +17,7 @@\n  */\n import { sprintf } from \"sprintf-js\";\n \n-declare let bundle: any;\n+declare let bundle: { [prefix: string]: string };", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODIzNTI4OQ=="}, "originalCommit": {"oid": "67d34c0aa67b7d570152ff9f50f0a91cf1a649fa"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1735, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}