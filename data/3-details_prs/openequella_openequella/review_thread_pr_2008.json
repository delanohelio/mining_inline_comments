{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1MTEyODc1", "number": 2008, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMDozMTo1MVrOEXApog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMDozMTo1MVrOEXApog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNTYzMzYyOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/settings/Search/searchfilter/SearchFilterSettingsPage.tsx", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMDozMTo1MVrOG-kRSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwMjowODowMlrOG_5crQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI1OTE0Ng==", "bodyText": "With this being duplicated, it feels like batchDelete should simply be taking a type which is a collection of objects with an id field which it then does the above transform on.\nAny chance you could include something like that?", "url": "https://github.com/openequella/openEQUELLA/pull/2008#discussion_r468259146", "createdAt": "2020-08-11T00:31:51Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/settings/Search/searchfilter/SearchFilterSettingsPage.tsx", "diffHunk": "@@ -250,7 +250,12 @@ const SearchFilterPage = ({ updateTemplate }: TemplateUpdateProps) => {\n         (): Promise<any> =>\n           // Filters stored in 'deletedMimeTypeFilters' always have an ID.\n           deletedMimeTypeFilters.length\n-            ? batchDelete(deletedMimeTypeFilters.map((filter) => filter.id!))\n+            ? batchDelete(\n+                deletedMimeTypeFilters.map(({ id }) => {\n+                  if (!id) throw TypeError(\"id is undefined\");\n+                  return id;\n+                })", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a05efe422f8ba5793d6613617969d61b752b6b3a"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI4MDg1MQ==", "bodyText": "Something to note, the two batchDelete functions are named the same but are different.\nThey also input different types, you can take a look at what shared functionality would look like in ce8773b.\nWhile it is possible to share the functionality, it's moderately verbose to do so.\nI'd be fine keeping or reverting the change.", "url": "https://github.com/openequella/openEQUELLA/pull/2008#discussion_r468280851", "createdAt": "2020-08-11T01:52:41Z", "author": {"login": "ChristianMurphy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/settings/Search/searchfilter/SearchFilterSettingsPage.tsx", "diffHunk": "@@ -250,7 +250,12 @@ const SearchFilterPage = ({ updateTemplate }: TemplateUpdateProps) => {\n         (): Promise<any> =>\n           // Filters stored in 'deletedMimeTypeFilters' always have an ID.\n           deletedMimeTypeFilters.length\n-            ? batchDelete(deletedMimeTypeFilters.map((filter) => filter.id!))\n+            ? batchDelete(\n+                deletedMimeTypeFilters.map(({ id }) => {\n+                  if (!id) throw TypeError(\"id is undefined\");\n+                  return id;\n+                })", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI1OTE0Ng=="}, "originalCommit": {"oid": "a05efe422f8ba5793d6613617969d61b752b6b3a"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTM1NzYxMQ==", "bodyText": "Thoughts @edalex-ian? \ud83d\udcad", "url": "https://github.com/openequella/openEQUELLA/pull/2008#discussion_r469357611", "createdAt": "2020-08-12T15:43:51Z", "author": {"login": "ChristianMurphy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/settings/Search/searchfilter/SearchFilterSettingsPage.tsx", "diffHunk": "@@ -250,7 +250,12 @@ const SearchFilterPage = ({ updateTemplate }: TemplateUpdateProps) => {\n         (): Promise<any> =>\n           // Filters stored in 'deletedMimeTypeFilters' always have an ID.\n           deletedMimeTypeFilters.length\n-            ? batchDelete(deletedMimeTypeFilters.map((filter) => filter.id!))\n+            ? batchDelete(\n+                deletedMimeTypeFilters.map(({ id }) => {\n+                  if (!id) throw TypeError(\"id is undefined\");\n+                  return id;\n+                })", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI1OTE0Ng=="}, "originalCommit": {"oid": "a05efe422f8ba5793d6613617969d61b752b6b3a"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTY1NDcwMQ==", "bodyText": "Aaaahhhhhh, I see I see I see. Also needs to be moved out into the REST library.\nOkay, I like what you've done. \ud83d\udc4d", "url": "https://github.com/openequella/openEQUELLA/pull/2008#discussion_r469654701", "createdAt": "2020-08-13T02:08:02Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/settings/Search/searchfilter/SearchFilterSettingsPage.tsx", "diffHunk": "@@ -250,7 +250,12 @@ const SearchFilterPage = ({ updateTemplate }: TemplateUpdateProps) => {\n         (): Promise<any> =>\n           // Filters stored in 'deletedMimeTypeFilters' always have an ID.\n           deletedMimeTypeFilters.length\n-            ? batchDelete(deletedMimeTypeFilters.map((filter) => filter.id!))\n+            ? batchDelete(\n+                deletedMimeTypeFilters.map(({ id }) => {\n+                  if (!id) throw TypeError(\"id is undefined\");\n+                  return id;\n+                })", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI1OTE0Ng=="}, "originalCommit": {"oid": "a05efe422f8ba5793d6613617969d61b752b6b3a"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1249, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}