{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0NDk2NTQ2", "number": 2416, "title": "refactor: convert any types to concrete types", "bodyText": "Checklist\n\n\n the contributor license agreement is signed\n commit message follows commit guidelines\n tests are included\n screenshots are included showing significant UI changes\n documentation is changed or added\n\nDescription of change\nRedo of #2186", "createdAt": "2020-10-16T02:07:10Z", "url": "https://github.com/openequella/openEQUELLA/pull/2416", "merged": true, "mergeCommit": {"oid": "c3d2c290745574e544379fcd667bc51ecc82e981"}, "closed": true, "closedAt": "2020-10-20T22:14:10Z", "author": {"login": "ChristianMurphy"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdS8quzgBqjM4ODQyNTM2NjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUSzo-gFqTUxMjM2MjIzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "97b0da8254dc6262a479de962df0f54aa42f403c", "author": {"user": {"login": "ChristianMurphy", "name": "Christian Murphy"}}, "url": "https://github.com/openequella/openEQUELLA/commit/97b0da8254dc6262a479de962df0f54aa42f403c", "committedDate": "2020-10-16T02:05:15Z", "message": "refactor: convert any types to concrete types"}, "afterCommit": {"oid": "a879c32da3710dbfba2660968d01792315b46f16", "author": {"user": {"login": "ChristianMurphy", "name": "Christian Murphy"}}, "url": "https://github.com/openequella/openEQUELLA/commit/a879c32da3710dbfba2660968d01792315b46f16", "committedDate": "2020-10-16T02:08:36Z", "message": "refactor: convert any types to concrete types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8913db986033fc623a8a636f0ae61ed5c756413d", "author": {"user": {"login": "ChristianMurphy", "name": "Christian Murphy"}}, "url": "https://github.com/openequella/openEQUELLA/commit/8913db986033fc623a8a636f0ae61ed5c756413d", "committedDate": "2020-10-16T02:10:09Z", "message": "refactor: convert any types to concrete types"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a879c32da3710dbfba2660968d01792315b46f16", "author": {"user": {"login": "ChristianMurphy", "name": "Christian Murphy"}}, "url": "https://github.com/openequella/openEQUELLA/commit/a879c32da3710dbfba2660968d01792315b46f16", "committedDate": "2020-10-16T02:08:36Z", "message": "refactor: convert any types to concrete types"}, "afterCommit": {"oid": "8913db986033fc623a8a636f0ae61ed5c756413d", "author": {"user": {"login": "ChristianMurphy", "name": "Christian Murphy"}}, "url": "https://github.com/openequella/openEQUELLA/commit/8913db986033fc623a8a636f0ae61ed5c756413d", "committedDate": "2020-10-16T02:10:09Z", "message": "refactor: convert any types to concrete types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67d34c0aa67b7d570152ff9f50f0a91cf1a649fa", "author": {"user": {"login": "ChristianMurphy", "name": "Christian Murphy"}}, "url": "https://github.com/openequella/openEQUELLA/commit/67d34c0aa67b7d570152ff9f50f0a91cf1a649fa", "committedDate": "2020-10-16T14:44:54Z", "message": "Merge branch 'develop' into refactor/replace-any-types"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNTQ0MDk3", "url": "https://github.com/openequella/openEQUELLA/pull/2416#pullrequestreview-510544097", "createdAt": "2020-10-16T14:50:03Z", "commit": {"oid": "67d34c0aa67b7d570152ff9f50f0a91cf1a649fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNDo1MDowNFrOHjCoxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNDo1MDowNFrOHjCoxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjUwNTQxMw==", "bodyText": "this could be alternatively be done by wrapping\nnode.children = Object.entries(definition)\nin a conditional, to avoid throwing", "url": "https://github.com/openequella/openEQUELLA/pull/2416#discussion_r506505413", "createdAt": "2020-10-16T14:50:04Z", "author": {"login": "ChristianMurphy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/modules/SchemaModule.tsx", "diffHunk": "@@ -59,15 +66,17 @@ export const schemaListSummary = async (): Promise<Map<string, string>> => {\n  * @param parent Mainly for recursive calls to provide back linking to the parents.\n  */\n export const buildSchemaTree = (\n-  definition: any,\n+  definition: Definition | unknown,\n   name: string,\n   parent?: SchemaNode\n ): SchemaNode => {\n   const node: SchemaNode = { name: name, parent: parent };\n-  node.children = Object.keys(definition)\n-    .filter((childName: string) => typeof definition[childName] === \"object\")\n-    .map((childName: string) =>\n-      buildSchemaTree(definition[childName], childName, node)\n+  if (!isDefinition(definition))\n+    throw new TypeError(\"definition is not an indexable object\");\n+  node.children = Object.entries(definition)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67d34c0aa67b7d570152ff9f50f0a91cf1a649fa"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExMjU4Mjgx", "url": "https://github.com/openequella/openEQUELLA/pull/2416#pullrequestreview-511258281", "createdAt": "2020-10-18T22:00:08Z", "commit": {"oid": "67d34c0aa67b7d570152ff9f50f0a91cf1a649fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQyMjowMDowOFrOHjuO4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQyMjowMDowOFrOHjuO4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzIxOTY4Mw==", "bodyText": "\ud83d\ude05\nLeaving this be for now, as it is primarily a PR for typings, it may be something to revisit", "url": "https://github.com/openequella/openEQUELLA/pull/2416#discussion_r507219683", "createdAt": "2020-10-18T22:00:08Z", "author": {"login": "ChristianMurphy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/legacycontent/LegacyContent.tsx", "diffHunk": "@@ -24,12 +24,11 @@ import * as OEQ from \"@openequella/rest-api-client\";\n \n declare global {\n   interface Window {\n-    _trigger: any;\n-    eval: any;\n-    EQ: { [index: string]: any };\n+    _trigger: undefined | ((value: string) => boolean);\n+    EQ: { [index: string]: unknown };\n   }\n \n-  const _trigger: any;\n+  const _trigger: (value: string) => boolean;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67d34c0aa67b7d570152ff9f50f0a91cf1a649fa"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMzYyMjMz", "url": "https://github.com/openequella/openEQUELLA/pull/2416#pullrequestreview-512362233", "createdAt": "2020-10-20T06:18:52Z", "commit": {"oid": "67d34c0aa67b7d570152ff9f50f0a91cf1a649fa"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwNjoxODo1MlrOHksOGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwNjoxODo1MlrOHksOGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODIzNTI4OQ==", "bodyText": "@PenghaiZhang do you foresee any issues with this in relation to the recent fixes you did to support custom language strings?", "url": "https://github.com/openequella/openEQUELLA/pull/2416#discussion_r508235289", "createdAt": "2020-10-20T06:18:52Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/util/langstrings.ts", "diffHunk": "@@ -17,7 +17,7 @@\n  */\n import { sprintf } from \"sprintf-js\";\n \n-declare let bundle: any;\n+declare let bundle: { [prefix: string]: string };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67d34c0aa67b7d570152ff9f50f0a91cf1a649fa"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 410, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}