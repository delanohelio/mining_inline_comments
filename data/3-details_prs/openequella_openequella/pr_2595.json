{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1Njk2OTAy", "number": 2595, "title": "Improve SearchPage error handling", "bodyText": "Checklist\n\n\n the contributor license agreement is signed\n commit message follows commit guidelines\n\nDescription of change\n\nA number of possible errors were not being caught. This would result in\nspurious console log entries, and lack of feedback to the user that an\nissue had occurred.\nMost of these are now addressed, by simply shutting down oEQ and then\nchasing things popping up in the console log. Or in a few cases, just by\nmanual code analysis and looking at the user result.\nAnd also snuck in a minor IntelliJ project file update.", "createdAt": "2020-12-10T06:34:46Z", "url": "https://github.com/openequella/openEQUELLA/pull/2595", "merged": true, "mergeCommit": {"oid": "63da2889b4b3e3ed6a0243ab2713ccafafee83e7"}, "closed": true, "closedAt": "2020-12-14T02:58:53Z", "author": {"login": "edalex-ian"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdktVb3gH2gAyNTM1Njk2OTAyOjFmZTg4YTI0MTZjODZjNjc1MGNmMTJiMDc2NTMzMjA0NjFkZjNlN2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdl7ELqAH2gAyNTM1Njk2OTAyOmM3ZmM0YjI3YTA2OTgwMzU3MjRjOGI2MGU1NDhjNDU4YWEyMDYwNTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1fe88a2416c86c6750cf12b07653320461df3e7f", "author": {"user": {"login": "edalex-ian", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/1fe88a2416c86c6750cf12b07653320461df3e7f", "committedDate": "2020-12-10T06:27:39Z", "message": "chore(intellij): Update project settings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd3645efc8d66b871fc7384f2c4aa3604938ca9b", "author": {"user": {"login": "edalex-ian", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/cd3645efc8d66b871fc7384f2c4aa3604938ca9b", "committedDate": "2020-12-10T06:30:27Z", "message": "bugfix(front-end): Improve SearchPage error handling\n\nA number of possible errors were not being caught. This would result in\nspurious console log entries, and lack of feedback to the user that an\nissue had occurred.\n\nMost of these are now addressed, by simply shutting down oEQ and then\nchasing things popping up in the console log. Or in a few cases, just by\n manual code analysis and looking at the user result."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NzM4ODY2", "url": "https://github.com/openequella/openEQUELLA/pull/2595#pullrequestreview-549738866", "createdAt": "2020-12-11T01:29:45Z", "commit": {"oid": "cd3645efc8d66b871fc7384f2c4aa3604938ca9b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwMToyOTo0NVrOIDlA9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwMToyOTo0NVrOIDlA9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDYyMzA5Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  .then((results) => {\n          \n          \n            \n                    const [searchSettings, queryStringSearchOptions] = results;\n          \n          \n            \n                  .then(([searchSettings, queryStringSearchOptions]) => {", "url": "https://github.com/openequella/openEQUELLA/pull/2595#discussion_r540623093", "createdAt": "2020-12-11T01:29:45Z", "author": {"login": "ChristianMurphy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/SearchPage.tsx", "diffHunk": "@@ -158,24 +162,29 @@ const SearchPage = ({ updateTemplate }: TemplateUpdateProps) => {\n       isSelectionSessionOpen()\n         ? Promise.resolve(undefined)\n         : queryStringParamsToSearchOptions(location),\n-    ]).then((results) => {\n-      const [searchSettings, queryStringSearchOptions] = results;\n-      setSearchSettings(searchSettings);\n-      if (queryStringSearchOptions)\n-        setSearchPageOptions({\n-          ...queryStringSearchOptions,\n-          dateRangeQuickModeEnabled: false,\n-          sortOrder:\n-            queryStringSearchOptions.sortOrder ??\n-            searchSettings.defaultSearchSort,\n-        });\n-      else\n-        setSearchPageOptions({\n-          ...searchPageOptions,\n-          sortOrder:\n-            searchPageOptions.sortOrder ?? searchSettings.defaultSearchSort,\n-        });\n-    });\n+    ])\n+      .then((results) => {\n+        const [searchSettings, queryStringSearchOptions] = results;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd3645efc8d66b871fc7384f2c4aa3604938ca9b"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwOTY5MjIy", "url": "https://github.com/openequella/openEQUELLA/pull/2595#pullrequestreview-550969222", "createdAt": "2020-12-13T22:41:23Z", "commit": {"oid": "cd3645efc8d66b871fc7384f2c4aa3604938ca9b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7fc4b27a0698035724c8b60e548c458aa206051", "author": {"user": {"login": "edalex-ian", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/c7fc4b27a0698035724c8b60e548c458aa206051", "committedDate": "2020-12-14T01:01:24Z", "message": "chore(front-end): Destructure then() args\n\nFeedback from PR #2595"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 304, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}