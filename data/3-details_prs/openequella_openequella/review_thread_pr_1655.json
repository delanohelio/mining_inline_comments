{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4MzI2NDA1", "number": 1655, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwNzowNzowOFrOD1oGqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMDo0NDoyMlrOD32f5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3NTU4MTg1OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/settings/Search/ContentIndexSettings.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwNzowNzowOFrOGLJnug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMzoxOTozOFrOGOUasQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM0NTE0Ng==", "bodyText": "If we can move this to langstrings,  then we could also remove  sliderMarks .", "url": "https://github.com/openequella/openEQUELLA/pull/1655#discussion_r414345146", "createdAt": "2020-04-24T07:07:08Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/settings/Search/ContentIndexSettings.tsx", "diffHunk": "@@ -46,8 +46,21 @@ function ContentIndexSettings({ updateTemplate }: TemplateUpdateProps) {\n \n   const contentIndexSettingsStrings =\n     languageStrings.settings.searching.contentIndexSettings;\n+\n+  const markStrings = contentIndexSettingsStrings.sliderMarks;\n   const classes = useStyles();\n \n+  const boostVals: Mark[] = [\n+    { label: markStrings.off, value: 0 },\n+    { label: \"x0.25\", value: 1 },\n+    { label: \"x0.5\", value: 2 },\n+    { label: markStrings.noBoost, value: 3 },\n+    { label: \"x1.5\", value: 4 },\n+    { label: \"x2\", value: 5 },\n+    { label: \"x4\", value: 6 },\n+    { label: \"x8\", value: 7 },\n+  ];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d7d9dca24492403e1d81dafd5612a67b1307862"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY2Nzc2MQ==", "bodyText": "I didn't really think the slider marks containing numbers needed to be in language strings", "url": "https://github.com/openequella/openEQUELLA/pull/1655#discussion_r417667761", "createdAt": "2020-04-29T23:19:38Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/settings/Search/ContentIndexSettings.tsx", "diffHunk": "@@ -46,8 +46,21 @@ function ContentIndexSettings({ updateTemplate }: TemplateUpdateProps) {\n \n   const contentIndexSettingsStrings =\n     languageStrings.settings.searching.contentIndexSettings;\n+\n+  const markStrings = contentIndexSettingsStrings.sliderMarks;\n   const classes = useStyles();\n \n+  const boostVals: Mark[] = [\n+    { label: markStrings.off, value: 0 },\n+    { label: \"x0.25\", value: 1 },\n+    { label: \"x0.5\", value: 2 },\n+    { label: markStrings.noBoost, value: 3 },\n+    { label: \"x1.5\", value: 4 },\n+    { label: \"x2\", value: 5 },\n+    { label: \"x4\", value: 6 },\n+    { label: \"x8\", value: 7 },\n+  ];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM0NTE0Ng=="}, "originalCommit": {"oid": "5d7d9dca24492403e1d81dafd5612a67b1307862"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODc1NTM0OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/mainui/ContentIndexSettings.test.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMzoyNTowNVrOGOUhhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMDo0OTowNlrOGOWEPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY2OTUwOA==", "bodyText": "Can remove this line.", "url": "https://github.com/openequella/openEQUELLA/pull/1655#discussion_r417669508", "createdAt": "2020-04-29T23:25:05Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/mainui/ContentIndexSettings.test.tsx", "diffHunk": "@@ -0,0 +1,69 @@\n+import * as React from \"react\";\n+import { mount } from \"enzyme\";\n+import ContentIndexSettings from \"../../../tsrc/settings/Search/ContentIndexSettings\";\n+import * as SearchSettingsModule from \"../../../tsrc/settings/Search/SearchSettingsModule\"; // eslint-disable-line\n+import SettingsList from \"../../../tsrc/components/SettingsList\";\n+import WebPageIndexSetting from \"../../../tsrc/settings/Search/components/WebPageIndexSetting\";\n+import { Slider } from \"@material-ui/core\";\n+\n+describe(\"Content Index Settings Page\", () => {\n+  jest\n+    .spyOn(SearchSettingsModule, \"getSearchSettingsFromServer\")\n+    .mockImplementation(\n+      () =>\n+        new Promise(\n+          (\n+            resolve: (settings: SearchSettingsModule.SearchSettings) => void,\n+            reject: (error: any) => void\n+          ) => {\n+            console.log(\"its in ere\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc8c9da74d0b8aea335f7a51a572ef55779c3517"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY5NDc4Mg==", "bodyText": "OOOhhhh no, I was definitely meant to remove that", "url": "https://github.com/openequella/openEQUELLA/pull/1655#discussion_r417694782", "createdAt": "2020-04-30T00:49:06Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/mainui/ContentIndexSettings.test.tsx", "diffHunk": "@@ -0,0 +1,69 @@\n+import * as React from \"react\";\n+import { mount } from \"enzyme\";\n+import ContentIndexSettings from \"../../../tsrc/settings/Search/ContentIndexSettings\";\n+import * as SearchSettingsModule from \"../../../tsrc/settings/Search/SearchSettingsModule\"; // eslint-disable-line\n+import SettingsList from \"../../../tsrc/components/SettingsList\";\n+import WebPageIndexSetting from \"../../../tsrc/settings/Search/components/WebPageIndexSetting\";\n+import { Slider } from \"@material-ui/core\";\n+\n+describe(\"Content Index Settings Page\", () => {\n+  jest\n+    .spyOn(SearchSettingsModule, \"getSearchSettingsFromServer\")\n+    .mockImplementation(\n+      () =>\n+        new Promise(\n+          (\n+            resolve: (settings: SearchSettingsModule.SearchSettings) => void,\n+            reject: (error: any) => void\n+          ) => {\n+            console.log(\"its in ere\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY2OTUwOA=="}, "originalCommit": {"oid": "fc8c9da74d0b8aea335f7a51a572ef55779c3517"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODc1NzMzOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/mainui/ContentIndexSettings.test.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMzoyNjowNFrOGOUizQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMTozNToxM1rOGOWzAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY2OTgzNw==", "bodyText": "I think we can use jest.fn instead of () => null ?", "url": "https://github.com/openequella/openEQUELLA/pull/1655#discussion_r417669837", "createdAt": "2020-04-29T23:26:04Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/mainui/ContentIndexSettings.test.tsx", "diffHunk": "@@ -0,0 +1,69 @@\n+import * as React from \"react\";\n+import { mount } from \"enzyme\";\n+import ContentIndexSettings from \"../../../tsrc/settings/Search/ContentIndexSettings\";\n+import * as SearchSettingsModule from \"../../../tsrc/settings/Search/SearchSettingsModule\"; // eslint-disable-line\n+import SettingsList from \"../../../tsrc/components/SettingsList\";\n+import WebPageIndexSetting from \"../../../tsrc/settings/Search/components/WebPageIndexSetting\";\n+import { Slider } from \"@material-ui/core\";\n+\n+describe(\"Content Index Settings Page\", () => {\n+  jest\n+    .spyOn(SearchSettingsModule, \"getSearchSettingsFromServer\")\n+    .mockImplementation(\n+      () =>\n+        new Promise(\n+          (\n+            resolve: (settings: SearchSettingsModule.SearchSettings) => void,\n+            reject: (error: any) => void\n+          ) => {\n+            console.log(\"its in ere\");\n+            resolve(SearchSettingsModule.defaultSearchSettings);\n+          }\n+        )\n+    );\n+\n+  const renderComponent = () =>\n+    mount(<ContentIndexSettings updateTemplate={() => null} />);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc8c9da74d0b8aea335f7a51a572ef55779c3517"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzcwNjc1NA==", "bodyText": "Yep, it seems fine with that change", "url": "https://github.com/openequella/openEQUELLA/pull/1655#discussion_r417706754", "createdAt": "2020-04-30T01:35:13Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/mainui/ContentIndexSettings.test.tsx", "diffHunk": "@@ -0,0 +1,69 @@\n+import * as React from \"react\";\n+import { mount } from \"enzyme\";\n+import ContentIndexSettings from \"../../../tsrc/settings/Search/ContentIndexSettings\";\n+import * as SearchSettingsModule from \"../../../tsrc/settings/Search/SearchSettingsModule\"; // eslint-disable-line\n+import SettingsList from \"../../../tsrc/components/SettingsList\";\n+import WebPageIndexSetting from \"../../../tsrc/settings/Search/components/WebPageIndexSetting\";\n+import { Slider } from \"@material-ui/core\";\n+\n+describe(\"Content Index Settings Page\", () => {\n+  jest\n+    .spyOn(SearchSettingsModule, \"getSearchSettingsFromServer\")\n+    .mockImplementation(\n+      () =>\n+        new Promise(\n+          (\n+            resolve: (settings: SearchSettingsModule.SearchSettings) => void,\n+            reject: (error: any) => void\n+          ) => {\n+            console.log(\"its in ere\");\n+            resolve(SearchSettingsModule.defaultSearchSettings);\n+          }\n+        )\n+    );\n+\n+  const renderComponent = () =>\n+    mount(<ContentIndexSettings updateTemplate={() => null} />);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY2OTgzNw=="}, "originalCommit": {"oid": "fc8c9da74d0b8aea335f7a51a572ef55779c3517"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODgwNjYwOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/mainui/ContentIndexSettings.test.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMzo1MDowOFrOGOVAWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMDo1ODo1MVrOGOWOGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY3NzQwMQ==", "bodyText": "Can we just use () => Promise.resolve(SearchSettingsModule.defaultSearchSettings) in the mockImplementation block?", "url": "https://github.com/openequella/openEQUELLA/pull/1655#discussion_r417677401", "createdAt": "2020-04-29T23:50:08Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/mainui/ContentIndexSettings.test.tsx", "diffHunk": "@@ -0,0 +1,69 @@\n+import * as React from \"react\";\n+import { mount } from \"enzyme\";\n+import ContentIndexSettings from \"../../../tsrc/settings/Search/ContentIndexSettings\";\n+import * as SearchSettingsModule from \"../../../tsrc/settings/Search/SearchSettingsModule\"; // eslint-disable-line\n+import SettingsList from \"../../../tsrc/components/SettingsList\";\n+import WebPageIndexSetting from \"../../../tsrc/settings/Search/components/WebPageIndexSetting\";\n+import { Slider } from \"@material-ui/core\";\n+\n+describe(\"Content Index Settings Page\", () => {\n+  jest\n+    .spyOn(SearchSettingsModule, \"getSearchSettingsFromServer\")\n+    .mockImplementation(\n+      () =>\n+        new Promise(\n+          (\n+            resolve: (settings: SearchSettingsModule.SearchSettings) => void,\n+            reject: (error: any) => void\n+          ) => {\n+            console.log(\"its in ere\");\n+            resolve(SearchSettingsModule.defaultSearchSettings);\n+          }\n+        )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b628081023ec2eda3c4bf02b65b7bede7bb69df"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY5NzMwNQ==", "bodyText": "That would certainly be a lot more concise", "url": "https://github.com/openequella/openEQUELLA/pull/1655#discussion_r417697305", "createdAt": "2020-04-30T00:58:51Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/mainui/ContentIndexSettings.test.tsx", "diffHunk": "@@ -0,0 +1,69 @@\n+import * as React from \"react\";\n+import { mount } from \"enzyme\";\n+import ContentIndexSettings from \"../../../tsrc/settings/Search/ContentIndexSettings\";\n+import * as SearchSettingsModule from \"../../../tsrc/settings/Search/SearchSettingsModule\"; // eslint-disable-line\n+import SettingsList from \"../../../tsrc/components/SettingsList\";\n+import WebPageIndexSetting from \"../../../tsrc/settings/Search/components/WebPageIndexSetting\";\n+import { Slider } from \"@material-ui/core\";\n+\n+describe(\"Content Index Settings Page\", () => {\n+  jest\n+    .spyOn(SearchSettingsModule, \"getSearchSettingsFromServer\")\n+    .mockImplementation(\n+      () =>\n+        new Promise(\n+          (\n+            resolve: (settings: SearchSettingsModule.SearchSettings) => void,\n+            reject: (error: any) => void\n+          ) => {\n+            console.log(\"its in ere\");\n+            resolve(SearchSettingsModule.defaultSearchSettings);\n+          }\n+        )", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY3NzQwMQ=="}, "originalCommit": {"oid": "9b628081023ec2eda3c4bf02b65b7bede7bb69df"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODgyMjA2OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/mainui/ContentIndexSettings.test.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMzo1Nzo1MVrOGOVJ-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMzo1Nzo1MVrOGOVJ-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY3OTg2Ng==", "bodyText": "This expect does not match the description. We can have another it for testing if getSearchSettingsFromServer has been called in the useEffect.", "url": "https://github.com/openequella/openEQUELLA/pull/1655#discussion_r417679866", "createdAt": "2020-04-29T23:57:51Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/mainui/ContentIndexSettings.test.tsx", "diffHunk": "@@ -0,0 +1,69 @@\n+import * as React from \"react\";\n+import { mount } from \"enzyme\";\n+import ContentIndexSettings from \"../../../tsrc/settings/Search/ContentIndexSettings\";\n+import * as SearchSettingsModule from \"../../../tsrc/settings/Search/SearchSettingsModule\"; // eslint-disable-line\n+import SettingsList from \"../../../tsrc/components/SettingsList\";\n+import WebPageIndexSetting from \"../../../tsrc/settings/Search/components/WebPageIndexSetting\";\n+import { Slider } from \"@material-ui/core\";\n+\n+describe(\"Content Index Settings Page\", () => {\n+  jest\n+    .spyOn(SearchSettingsModule, \"getSearchSettingsFromServer\")\n+    .mockImplementation(\n+      () =>\n+        new Promise(\n+          (\n+            resolve: (settings: SearchSettingsModule.SearchSettings) => void,\n+            reject: (error: any) => void\n+          ) => {\n+            console.log(\"its in ere\");\n+            resolve(SearchSettingsModule.defaultSearchSettings);\n+          }\n+        )\n+    );\n+\n+  const renderComponent = () =>\n+    mount(<ContentIndexSettings updateTemplate={() => null} />);\n+\n+  describe(\"When content indexing settings page page is loaded\", () => {\n+    const component = renderComponent();\n+    const listControls = component.find(SettingsList);\n+    const defaultVals = SearchSettingsModule.defaultSearchSettings;\n+\n+    it(\"should display the default values\", () => {\n+      expect(listControls.length).toBeGreaterThanOrEqual(2);\n+      expect(\n+        SearchSettingsModule.getSearchSettingsFromServer\n+      ).toHaveBeenCalledTimes(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b628081023ec2eda3c4bf02b65b7bede7bb69df"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODkxMTcyOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/mainui/ContentIndexSettings.test.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMDo0NDoyMlrOGOV_XQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMTozNTo1MVrOGOWzkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY5MzUzMw==", "bodyText": "I think we can skip findWhere for Content indexing.", "url": "https://github.com/openequella/openEQUELLA/pull/1655#discussion_r417693533", "createdAt": "2020-04-30T00:44:22Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/mainui/ContentIndexSettings.test.tsx", "diffHunk": "@@ -0,0 +1,69 @@\n+import * as React from \"react\";\n+import { mount } from \"enzyme\";\n+import ContentIndexSettings from \"../../../tsrc/settings/Search/ContentIndexSettings\";\n+import * as SearchSettingsModule from \"../../../tsrc/settings/Search/SearchSettingsModule\"; // eslint-disable-line\n+import SettingsList from \"../../../tsrc/components/SettingsList\";\n+import WebPageIndexSetting from \"../../../tsrc/settings/Search/components/WebPageIndexSetting\";\n+import { Slider } from \"@material-ui/core\";\n+\n+describe(\"Content Index Settings Page\", () => {\n+  jest\n+    .spyOn(SearchSettingsModule, \"getSearchSettingsFromServer\")\n+    .mockImplementation(\n+      () =>\n+        new Promise(\n+          (\n+            resolve: (settings: SearchSettingsModule.SearchSettings) => void,\n+            reject: (error: any) => void\n+          ) => {\n+            console.log(\"its in ere\");\n+            resolve(SearchSettingsModule.defaultSearchSettings);\n+          }\n+        )\n+    );\n+\n+  const renderComponent = () =>\n+    mount(<ContentIndexSettings updateTemplate={() => null} />);\n+\n+  describe(\"When content indexing settings page page is loaded\", () => {\n+    const component = renderComponent();\n+    const listControls = component.find(SettingsList);\n+    const defaultVals = SearchSettingsModule.defaultSearchSettings;\n+\n+    it(\"should display the default values\", () => {\n+      expect(listControls.length).toBeGreaterThanOrEqual(2);\n+      expect(\n+        SearchSettingsModule.getSearchSettingsFromServer\n+      ).toHaveBeenCalledTimes(1);\n+\n+      //content indexing stuff\n+      const contentIndex = listControls\n+        .findWhere((c) => c.prop(\"primaryText\") === \"Content indexing\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b628081023ec2eda3c4bf02b65b7bede7bb69df"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzcwNjg5OA==", "bodyText": "Oh yeah, of course. Since there is only one of those components on the page", "url": "https://github.com/openequella/openEQUELLA/pull/1655#discussion_r417706898", "createdAt": "2020-04-30T01:35:51Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/mainui/ContentIndexSettings.test.tsx", "diffHunk": "@@ -0,0 +1,69 @@\n+import * as React from \"react\";\n+import { mount } from \"enzyme\";\n+import ContentIndexSettings from \"../../../tsrc/settings/Search/ContentIndexSettings\";\n+import * as SearchSettingsModule from \"../../../tsrc/settings/Search/SearchSettingsModule\"; // eslint-disable-line\n+import SettingsList from \"../../../tsrc/components/SettingsList\";\n+import WebPageIndexSetting from \"../../../tsrc/settings/Search/components/WebPageIndexSetting\";\n+import { Slider } from \"@material-ui/core\";\n+\n+describe(\"Content Index Settings Page\", () => {\n+  jest\n+    .spyOn(SearchSettingsModule, \"getSearchSettingsFromServer\")\n+    .mockImplementation(\n+      () =>\n+        new Promise(\n+          (\n+            resolve: (settings: SearchSettingsModule.SearchSettings) => void,\n+            reject: (error: any) => void\n+          ) => {\n+            console.log(\"its in ere\");\n+            resolve(SearchSettingsModule.defaultSearchSettings);\n+          }\n+        )\n+    );\n+\n+  const renderComponent = () =>\n+    mount(<ContentIndexSettings updateTemplate={() => null} />);\n+\n+  describe(\"When content indexing settings page page is loaded\", () => {\n+    const component = renderComponent();\n+    const listControls = component.find(SettingsList);\n+    const defaultVals = SearchSettingsModule.defaultSearchSettings;\n+\n+    it(\"should display the default values\", () => {\n+      expect(listControls.length).toBeGreaterThanOrEqual(2);\n+      expect(\n+        SearchSettingsModule.getSearchSettingsFromServer\n+      ).toHaveBeenCalledTimes(1);\n+\n+      //content indexing stuff\n+      const contentIndex = listControls\n+        .findWhere((c) => c.prop(\"primaryText\") === \"Content indexing\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY5MzUzMw=="}, "originalCommit": {"oid": "9b628081023ec2eda3c4bf02b65b7bede7bb69df"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1400, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}