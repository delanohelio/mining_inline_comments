{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxMDcyMDQ3", "number": 2258, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QyMzoyMToxMlrOEhCYBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxMzoyMDoyM1rOEhPX6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMDc3MzgzOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/modules/SearchModule.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QyMzoyMToxMlrOHOIr5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwMToxNjowOVrOHOzI8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU4NDQyMg==", "bodyText": "I wonder if highlight can be optional or not because a search may not have a query.", "url": "https://github.com/openequella/openEQUELLA/pull/2258#discussion_r484584422", "createdAt": "2020-09-07T23:21:12Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/modules/SearchModule.ts", "diffHunk": "@@ -102,11 +102,12 @@ export const defaultSearchOptions: SearchOptions = {\n   searchAttachments: true,\n };\n \n-export const defaultPagedSearchResult: OEQ.Common.PagedResult<OEQ.Search.SearchResultItem> = {\n+export const defaultPagedSearchResult: OEQ.Search.SearchResult<OEQ.Search.SearchResultItem> = {\n   start: 0,\n   length: 10,\n   available: 10,\n   results: [],\n+  highlight: [],", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5110f4d675a71abf0c84e532ac4f5621cf07bbb5"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI3OTk4NA==", "bodyText": "The server always returns it.... Which I like as then there doesn't need to be the additional handling for values that may or may not be there.", "url": "https://github.com/openequella/openEQUELLA/pull/2258#discussion_r485279984", "createdAt": "2020-09-09T01:16:09Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/modules/SearchModule.ts", "diffHunk": "@@ -102,11 +102,12 @@ export const defaultSearchOptions: SearchOptions = {\n   searchAttachments: true,\n };\n \n-export const defaultPagedSearchResult: OEQ.Common.PagedResult<OEQ.Search.SearchResultItem> = {\n+export const defaultPagedSearchResult: OEQ.Search.SearchResult<OEQ.Search.SearchResultItem> = {\n   start: 0,\n   length: 10,\n   available: 10,\n   results: [],\n+  highlight: [],", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU4NDQyMg=="}, "originalCommit": {"oid": "5110f4d675a71abf0c84e532ac4f5621cf07bbb5"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMDc5MzkwOnYy", "diffSide": "RIGHT", "path": "oeq-ts-rest-api/src/Search.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QyMzo0Mjo1MlrOHOI24w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwMToxNzoxMlrOHOzKBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU4NzIzNQ==", "bodyText": "As mentioned above, can hightlight be optional ?", "url": "https://github.com/openequella/openEQUELLA/pull/2258#discussion_r484587235", "createdAt": "2020-09-07T23:42:52Z", "author": {"login": "PenghaiZhang"}, "path": "oeq-ts-rest-api/src/Search.ts", "diffHunk": "@@ -240,6 +240,32 @@ export interface SearchResultItem {\n   };\n }\n \n+/**\n+ * Represents the results for a search query.\n+ */\n+export interface SearchResult<T> {\n+  /**\n+   * The starting offset into the total search results\n+   */\n+  start: number;\n+  /**\n+   * How many results can be found in `results`\n+   */\n+  length: number;\n+  /**\n+   * The maximum number of results available for paging\n+   */\n+  available: number;\n+  /**\n+   * The individual items which match the search\n+   */\n+  results: T[];\n+  /**\n+   * List of words to use to highlight when displaying the results\n+   */\n+  highlight: string[];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5110f4d675a71abf0c84e532ac4f5621cf07bbb5"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI4MDI2Mg==", "bodyText": "The server always returns it, just leaves it  as an empty array if there are no highlights - say, from an empty query.", "url": "https://github.com/openequella/openEQUELLA/pull/2258#discussion_r485280262", "createdAt": "2020-09-09T01:17:12Z", "author": {"login": "edalex-ian"}, "path": "oeq-ts-rest-api/src/Search.ts", "diffHunk": "@@ -240,6 +240,32 @@ export interface SearchResultItem {\n   };\n }\n \n+/**\n+ * Represents the results for a search query.\n+ */\n+export interface SearchResult<T> {\n+  /**\n+   * The starting offset into the total search results\n+   */\n+  start: number;\n+  /**\n+   * How many results can be found in `results`\n+   */\n+  length: number;\n+  /**\n+   * The maximum number of results available for paging\n+   */\n+  available: number;\n+  /**\n+   * The individual items which match the search\n+   */\n+  results: T[];\n+  /**\n+   * List of words to use to highlight when displaying the results\n+   */\n+  highlight: string[];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU4NzIzNQ=="}, "originalCommit": {"oid": "5110f4d675a71abf0c84e532ac4f5621cf07bbb5"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMjkwMzQ2OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/SearchResult.mock.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxMzoyMDoyM1rOHOchPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwMToxODoxNlrOHOzLFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDkwOTM3NQ==", "bodyText": "is all of lodash needed in this scope?\nWould\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import * as _ from \"lodash\";\n          \n          \n            \n            import { range } from \"lodash\";\n          \n      \n    \n    \n  \n\nwork? (would also need a change from _.range to range below, on line 312)", "url": "https://github.com/openequella/openEQUELLA/pull/2258#discussion_r484909375", "createdAt": "2020-09-08T13:20:23Z", "author": {"login": "ChristianMurphy"}, "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/SearchResult.mock.ts", "diffHunk": "@@ -16,15 +16,19 @@\n  * See the License for the specific language governing permissions and\n  * limitations under the License.\n  */\n+import * as OEQ from \"@openequella/rest-api-client\";\n+import * as _ from \"lodash\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5110f4d675a71abf0c84e532ac4f5621cf07bbb5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI4MDUzNQ==", "bodyText": "I'd say so. I just replaced like for like. I'll give it a tweak. \ud83d\ude09", "url": "https://github.com/openequella/openEQUELLA/pull/2258#discussion_r485280535", "createdAt": "2020-09-09T01:18:16Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/SearchResult.mock.ts", "diffHunk": "@@ -16,15 +16,19 @@\n  * See the License for the specific language governing permissions and\n  * limitations under the License.\n  */\n+import * as OEQ from \"@openequella/rest-api-client\";\n+import * as _ from \"lodash\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDkwOTM3NQ=="}, "originalCommit": {"oid": "5110f4d675a71abf0c84e532ac4f5621cf07bbb5"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1781, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}