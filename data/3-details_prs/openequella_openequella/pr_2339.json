{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzOTI3NjQ1", "number": 2339, "title": "Retrieve MIME type viewer config", "bodyText": "Checklist\n\n\n the contributor license agreement is signed\n commit message follows commit guidelines\n tests are included\n\nDescription of change\n\nThis adds a new endpoint (/api/mimetype/viewerconfig/{type}/{sub}) to support the retrieval of the configuration of viewers for a MIME type. This information can then be used in the front-end to support viewing attachments from the New Search UI - and later, item summary pages and the like.\nTo include tests, I've moved MimeTypeApiTest into the new io.github.openequella setup. This allows the existing test to run much faster, plus makes it easier to add the additional test.\n(Also snuck in a tweak for editor config so that it matches our auto formatters.)\n\n#1306", "createdAt": "2020-09-28T06:59:41Z", "url": "https://github.com/openequella/openEQUELLA/pull/2339", "merged": true, "mergeCommit": {"oid": "40eb371ecdfe494b2ddb1b81b034be6f5e6525e2"}, "closed": true, "closedAt": "2020-09-29T02:39:14Z", "author": {"login": "edalex-ian"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNNZBkgH2gAyNDkzOTI3NjQ1OjhhMjkyNDUxMmU5OWZmNmFmMGMwNDI4Zjc5OTdmMTRlOTQyZjUwNWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNc-DJAH2gAyNDkzOTI3NjQ1OjM2NTNhOWQxODU5ZWRjMTZhMDA3NTU0MWZhZGMwZTE5YzMxY2IwZjM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8a2924512e99ff6af0c0428f7997f14e942f505f", "author": {"user": {"login": "edalex-ian", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/8a2924512e99ff6af0c0428f7997f14e942f505f", "committedDate": "2020-09-28T06:14:21Z", "message": "chore: modify .editorconfig to match google style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2dad6080caa252d7badd0d06c929c8a5c847dfb9", "author": {"user": {"login": "edalex-ian", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/2dad6080caa252d7badd0d06c929c8a5c847dfb9", "committedDate": "2020-09-28T06:40:36Z", "message": "feat(rest): Add endpoint to retrieve viewer configuration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3OTc0NzI5", "url": "https://github.com/openequella/openEQUELLA/pull/2339#pullrequestreview-497974729", "createdAt": "2020-09-28T23:58:50Z", "commit": {"oid": "2dad6080caa252d7badd0d06c929c8a5c847dfb9"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQyMzo1ODo1MFrOHZTsGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQyMzo1ODo1MFrOHZTsGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI5OTAzNA==", "bodyText": "So, the number 153 is the total number of mimetypes in the institution.\nCould that number be placed it a named variable to aid in readability?", "url": "https://github.com/openequella/openEQUELLA/pull/2339#discussion_r496299034", "createdAt": "2020-09-28T23:58:50Z", "author": {"login": "mrblippy"}, "path": "autotest/OldTests/src/test/java/io/github/openequella/rest/MimeTypeApiTest.java", "diffHunk": "@@ -0,0 +1,67 @@\n+package io.github.openequella.rest;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.testng.Assert.assertNotNull;\n+\n+import java.io.IOException;\n+import java.util.List;\n+import org.apache.commons.httpclient.HttpMethod;\n+import org.apache.commons.httpclient.HttpStatus;\n+import org.apache.commons.httpclient.methods.GetMethod;\n+import org.codehaus.jackson.JsonNode;\n+import org.codehaus.jackson.type.TypeReference;\n+import org.testng.annotations.Test;\n+\n+public class MimeTypeApiTest extends AbstractRestApiTest {\n+\n+  private static final String MIMETYPE_API_ENDPOINT =\n+      TEST_CONFIG.getInstitutionUrl() + \"api/mimetype\";\n+\n+  @Test\n+  public void testRetrieveMimeTypes() throws Exception {\n+    final List<MimeTypeDetail> initialFilters = getMimeTypes();\n+    assertEquals(153, initialFilters.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dad6080caa252d7badd0d06c929c8a5c847dfb9"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3OTgyMTY2", "url": "https://github.com/openequella/openEQUELLA/pull/2339#pullrequestreview-497982166", "createdAt": "2020-09-29T00:22:36Z", "commit": {"oid": "2dad6080caa252d7badd0d06c929c8a5c847dfb9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3653a9d1859edc16a0075541fadc0e19c31cb0f3", "author": {"user": {"login": "edalex-ian", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/3653a9d1859edc16a0075541fadc0e19c31cb0f3", "committedDate": "2020-09-29T00:23:22Z", "message": "chore(tests): Document what is being tested in testRetrieveMimeTypes\n\nPR #2339 highlighted we have the magic number of 153. So by adding a message to the assert we document what the meaning of it is - while also improving the test."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 486, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}