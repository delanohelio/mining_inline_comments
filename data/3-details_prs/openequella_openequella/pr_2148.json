{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzODU4ODg4", "number": 2148, "title": "Feature/search page clear all options", "bodyText": "#1306\nChecklist\n\n the [contributor license agreement][] is signed\n commit message follows [commit guidelines][]\n tests are included\n screenshots are included showing significant UI changes\n documentation is changed or added\n\nDescription of change\nAdded a new button to perform a new search with default search options. As the Search bar and Date range selector use their own states to control value, added useEffect to help update their states correctly.\nIn addition, the test for this button uses react-testing-library so you will see a new describe block. And some warnings were addressed.", "createdAt": "2020-08-06T08:04:57Z", "url": "https://github.com/openequella/openEQUELLA/pull/2148", "merged": true, "mergeCommit": {"oid": "3afe3356056385423f431e1fb3aaebfbee9d39f6"}, "closed": true, "closedAt": "2020-08-11T23:39:59Z", "author": {"login": "PenghaiZhang"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8FoJhgH2gAyNDYzODU4ODg4OjI2ZDJmM2VjNWYzZDdkZGJiMDg4YzMwYzQ3YjEzYmFiNGZiOTdmNDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9wi-7gFqTQ2NDc3MjczNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "26d2f3ec5f3d7ddbb088c30c47b13bab4fb97f40", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/26d2f3ec5f3d7ddbb088c30c47b13bab4fb97f40", "committedDate": "2020-08-06T01:34:55Z", "message": "Add a new button to allow clearing search options."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a7713998cd0b6b7ecb8c89ac94a5f880a381031", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/4a7713998cd0b6b7ecb8c89ac94a5f880a381031", "committedDate": "2020-08-06T02:21:03Z", "message": "Clear Date modified range when start a new search."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1957e49c8f122a7574f44b67d1a8807c15702e98", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/1957e49c8f122a7574f44b67d1a8807c15702e98", "committedDate": "2020-08-06T03:30:26Z", "message": "Clear SearchBar query when start a new search."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23efa5059ed7f4daf5073ddc5e2a2376999f0ec2", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/23efa5059ed7f4daf5073ddc5e2a2376999f0ec2", "committedDate": "2020-08-06T08:00:52Z", "message": "Make the Sorting Dropdown not look like a button."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09f4ddc6f7d9745d65f14021d60a74760332daac", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/09f4ddc6f7d9745d65f14021d60a74760332daac", "committedDate": "2020-08-06T08:02:58Z", "message": "A couple tweaks for clearing search options\n\n1. Remove styles previously applied to New search button.\n2. Ensure the state of Date range selector is accordingly\n   updated when perform a new search."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01f08091907df02066f8ae1bbf2f557da6388c5c", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/01f08091907df02066f8ae1bbf2f557da6388c5c", "committedDate": "2020-08-10T01:05:08Z", "message": "Jest test for clearing search options\n\nAs we are moving to a different testing framework, create a second describe block\nin which test cases are written with 'react-testing-library'. Later on when we\nrefactor previous test cases, they should be moved into the new describe block."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3336a0e5ddc6ef853a7763672b635de3dba1e4e7", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/3336a0e5ddc6ef853a7763672b635de3dba1e4e7", "committedDate": "2020-08-10T01:12:57Z", "message": "Merge branch 'component/new-search-page' into feature/search-page-clear-all-options"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2954445c825d89fd85d2dbf62965bcadf192c697", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/2954445c825d89fd85d2dbf62965bcadf192c697", "committedDate": "2020-08-10T01:53:23Z", "message": "Remove window.scrollTo warning and MUI warning for SearchPage test."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzOTQ4NTcy", "url": "https://github.com/openequella/openEQUELLA/pull/2148#pullrequestreview-463948572", "createdAt": "2020-08-10T04:09:30Z", "commit": {"oid": "2954445c825d89fd85d2dbf62965bcadf192c697"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNDowOTozMFrOG-A5WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNDowOTozMFrOG-A5WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY3OTU3Ng==", "bodyText": "date range is both a prop and state?\nWould it make sense to unify it to one.\nFor example prop, and making it a controlled component (https://reactjs.org/docs/forms.html#controlled-components).", "url": "https://github.com/openequella/openEQUELLA/pull/2148#discussion_r467679576", "createdAt": "2020-08-10T04:09:30Z", "author": {"login": "ChristianMurphy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/components/DateRangeSelector.tsx", "diffHunk": "@@ -134,24 +134,36 @@ export const DateRangeSelector = ({\n       isInitialRender.current = false;\n       return;\n     }\n+    // When state is cleared, do not proceed to avoid duplicated search.\n+    if (!stateDateRange) {\n+      return;\n+    }\n     const start = stateDateRange?.start;\n     const end = stateDateRange?.end;\n     const isStartValid = start && DateTime.fromJSDate(start).isValid;\n     const isEndValid = end && DateTime.fromJSDate(end).isValid;\n \n-    // start is undefined and end is a valid date\n+    // start is undefined and end is a valid date.\n     const openStart = !start && isEndValid;\n-    // End is undefined and start is a valid date\n+    // End is undefined and start is a valid date.\n     const openEnd = !end && isStartValid;\n-    // Both are undefined\n+    // Both are undefined.\n     const openRange = !start && !end;\n-    // Both are valid dates and start is equal or less than end\n+    // Both are valid dates and start is equal or less than end.\n     const closedRange = isStartValid && isEndValid && start! <= end!;\n-    // Call onDateRangeChange for above four cases\n+    // Call onDateRangeChange for above four cases.\n     if (openStart || openEnd || openRange || closedRange) {\n       onDateRangeChange(stateDateRange);\n     }\n   }, [stateDateRange]);\n+\n+  // Only when prop dateRange is cleared, clear stateDateRange as well.\n+  useEffect(() => {\n+    if (!dateRange) {\n+      setStateDateRange(dateRange);\n+    }\n+  }, [dateRange]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2954445c825d89fd85d2dbf62965bcadf192c697"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzOTY4OTA0", "url": "https://github.com/openequella/openEQUELLA/pull/2148#pullrequestreview-463968904", "createdAt": "2020-08-10T05:49:14Z", "commit": {"oid": "2954445c825d89fd85d2dbf62965bcadf192c697"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNTo0OToxNFrOG-CBkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNjowMjo1OFrOG-CN0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY5ODA2Ng==", "bodyText": "Do we need to check that the sort order indeed changes when we request it? (We discussed and thought not. Mind you though, if it did that'd probably be in a test elsewhere for the Sort Order Selector.)", "url": "https://github.com/openequella/openEQUELLA/pull/2148#discussion_r467698066", "createdAt": "2020-08-10T05:49:14Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -49,21 +52,86 @@ const searchPromise = mockSearch.mockImplementation(() =>\n   Promise.resolve(getSearchResult)\n );\n mockCollections.mockImplementation(() => Promise.resolve(getCollectionMap));\n+window.scrollTo = jest.fn();\n const defaultSearchPageOptions: SearchPageOptions = {\n   ...SearchModule.defaultSearchOptions,\n   sortOrder: SearchSettingsModule.SortOrder.RANK,\n   dateRangeQuickModeEnabled: true,\n };\n const defaultCollectionPrivileges = [\"SEARCH_COLLECTION\"];\n \n+describe(\"<SearchPage/> with react-testing-library\", () => {\n+  let container: HTMLElement = document.createElement(\"div\");\n+  const renderSearchPage = async () => {\n+    const { container } = render(\n+      <BrowserRouter>\n+        <SearchPage updateTemplate={jest.fn()} />\n+      </BrowserRouter>\n+    );\n+    // When Pagination shows the correct data, the render is completed.\n+    await waitFor(() =>\n+      screen.getByText(FIRST_PAGE_PAGINATION, { selector: \"p\" })\n+    );\n+    return container;\n+  };\n+\n+  beforeEach(async () => {\n+    container = await renderSearchPage();\n+  });\n+\n+  afterEach(() => {\n+    jest.clearAllMocks();\n+  });\n+\n+  it(\"should clear search options and perform a new search\", async () => {\n+    const query = \"clear query\";\n+    const queryBar = container.querySelector(\"#searchBar\");\n+    if (!queryBar) {\n+      throw new Error(\"Failed to locate the search bar, unable to continue.\");\n+    }\n+    const sortingDropdown = screen.getByDisplayValue(\n+      SearchSettingsModule.SortOrder.RANK\n+    );\n+    const newSearchButton = screen.getByText(\"New search\");\n+\n+    // We will change the debounced query so use fake timer here.\n+    jest.useFakeTimers(\"modern\");\n+    // Change search options now.\n+    fireEvent.change(queryBar, { target: { value: query } });\n+    await waitFor(() => {\n+      expect(queryBar).toHaveDisplayValue(query);\n+      jest.advanceTimersByTime(1000);\n+    });\n+    fireEvent.change(sortingDropdown, {\n+      target: { value: SearchSettingsModule.SortOrder.NAME },\n+    });\n+    await waitFor(() => {\n+      expect(sortingDropdown).toHaveValue(SearchSettingsModule.SortOrder.NAME);\n+    });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2954445c825d89fd85d2dbf62965bcadf192c697"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY5ODk3Ng==", "bodyText": "Aaahhhh, yes. Nice. We'll probably be using them very soon to disable Refine Search controls inline with config. (Although I appreciate here you're using for something else.)", "url": "https://github.com/openequella/openEQUELLA/pull/2148#discussion_r467698976", "createdAt": "2020-08-10T05:53:00Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/SearchPage.tsx", "diffHunk": "@@ -93,6 +93,7 @@ const SearchPage = ({ updateTemplate }: TemplateUpdateProps) => {\n     // Show spinner before calling API to retrieve Search settings.\n     setShowSpinner(true);\n     getSearchSettingsFromServer().then((settings: SearchSettings) => {\n+      setSearchSettings(settings);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2954445c825d89fd85d2dbf62965bcadf192c697"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY5OTczNQ==", "bodyText": "This isn't a typo. It's 'if and only if'.", "url": "https://github.com/openequella/openEQUELLA/pull/2148#discussion_r467699735", "createdAt": "2020-08-10T05:56:23Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchBar.tsx", "diffHunk": "@@ -92,9 +92,18 @@ export default function SearchBar({\n     doSearch,\n   ]);\n \n+  /**\n+   * Update state when search query is cleared.\n+   */\n+  useEffect(() => {\n+    if (!query) {\n+      setCurrentQuery(query);\n+    }\n+  }, [query]);\n+\n   const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n     if (event.keyCode === ESCAPE_KEY_CODE && currentQuery) {\n-      // iff there is a current query, clear it out and trigger a search\n+      // if there is a current query, clear it out and trigger a search", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2954445c825d89fd85d2dbf62965bcadf192c697"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzcwMDQ4Nw==", "bodyText": "This doesn't need to be a JSDoc - should just be a oneliner comment. As it's not the kind of documentation that would add value standalone (i.e. in generated doco).", "url": "https://github.com/openequella/openEQUELLA/pull/2148#discussion_r467700487", "createdAt": "2020-08-10T05:59:41Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchBar.tsx", "diffHunk": "@@ -92,9 +92,18 @@ export default function SearchBar({\n     doSearch,\n   ]);\n \n+  /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2954445c825d89fd85d2dbf62965bcadf192c697"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzcwMDg5Mg==", "bodyText": "I feel I'm missing something as to why we need this. I'd like to avoid an effect if possible - as it definitely amps the complexity soon as a component has it. Goes from a simple component, to something a bit more involved.\nCould you elaborate as to why this is needed? I'm gathering you encountered an issue.", "url": "https://github.com/openequella/openEQUELLA/pull/2148#discussion_r467700892", "createdAt": "2020-08-10T06:01:31Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchBar.tsx", "diffHunk": "@@ -92,9 +92,18 @@ export default function SearchBar({\n     doSearch,\n   ]);\n \n+  /**\n+   * Update state when search query is cleared.\n+   */\n+  useEffect(() => {\n+    if (!query) {\n+      setCurrentQuery(query);\n+    }\n+  }, [query]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2954445c825d89fd85d2dbf62965bcadf192c697"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzcwMDk5MA==", "bodyText": "Ha! Amazing how much discussion went into this one line. \ud83d\udc4d", "url": "https://github.com/openequella/openEQUELLA/pull/2148#discussion_r467700990", "createdAt": "2020-08-10T06:01:54Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchOrderSelect.tsx", "diffHunk": "@@ -60,7 +60,6 @@ export const SearchOrderSelect = ({\n \n   return (\n     <Select\n-      variant=\"outlined\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2954445c825d89fd85d2dbf62965bcadf192c697"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzcwMTIwMQ==", "bodyText": "Be good to use the language string here. That way it's already in a constant, no need for us to have to maintain these.", "url": "https://github.com/openequella/openEQUELLA/pull/2148#discussion_r467701201", "createdAt": "2020-08-10T06:02:58Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -49,21 +52,86 @@ const searchPromise = mockSearch.mockImplementation(() =>\n   Promise.resolve(getSearchResult)\n );\n mockCollections.mockImplementation(() => Promise.resolve(getCollectionMap));\n+window.scrollTo = jest.fn();\n const defaultSearchPageOptions: SearchPageOptions = {\n   ...SearchModule.defaultSearchOptions,\n   sortOrder: SearchSettingsModule.SortOrder.RANK,\n   dateRangeQuickModeEnabled: true,\n };\n const defaultCollectionPrivileges = [\"SEARCH_COLLECTION\"];\n \n+describe(\"<SearchPage/> with react-testing-library\", () => {\n+  let container: HTMLElement = document.createElement(\"div\");\n+  const renderSearchPage = async () => {\n+    const { container } = render(\n+      <BrowserRouter>\n+        <SearchPage updateTemplate={jest.fn()} />\n+      </BrowserRouter>\n+    );\n+    // When Pagination shows the correct data, the render is completed.\n+    await waitFor(() =>\n+      screen.getByText(FIRST_PAGE_PAGINATION, { selector: \"p\" })\n+    );\n+    return container;\n+  };\n+\n+  beforeEach(async () => {\n+    container = await renderSearchPage();\n+  });\n+\n+  afterEach(() => {\n+    jest.clearAllMocks();\n+  });\n+\n+  it(\"should clear search options and perform a new search\", async () => {\n+    const query = \"clear query\";\n+    const queryBar = container.querySelector(\"#searchBar\");\n+    if (!queryBar) {\n+      throw new Error(\"Failed to locate the search bar, unable to continue.\");\n+    }\n+    const sortingDropdown = screen.getByDisplayValue(\n+      SearchSettingsModule.SortOrder.RANK\n+    );\n+    const newSearchButton = screen.getByText(\"New search\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2954445c825d89fd85d2dbf62965bcadf192c697"}, "originalPosition": 57}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzOTc5ODg2", "url": "https://github.com/openequella/openEQUELLA/pull/2148#pullrequestreview-463979886", "createdAt": "2020-08-10T06:26:20Z", "commit": {"oid": "2954445c825d89fd85d2dbf62965bcadf192c697"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNjoyNjoyMFrOG-CmcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNjoyOTowM1rOG-CpaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzcwNzUwNQ==", "bodyText": "Is spacing of 1 the default? You might not need to specify.", "url": "https://github.com/openequella/openEQUELLA/pull/2148#discussion_r467707505", "createdAt": "2020-08-10T06:26:20Z", "author": {"login": "SammyIsConfused"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResultList.tsx", "diffHunk": "@@ -109,10 +116,21 @@ export const SearchResultList = ({\n       <CardHeader\n         title={searchPageStrings.subtitle}\n         action={\n-          <SearchOrderSelect\n-            value={orderSelectProps.value}\n-            onChange={orderSelectProps.onChange}\n-          />\n+          <Grid container spacing={1}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2954445c825d89fd85d2dbf62965bcadf192c697"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzcwODI2NA==", "bodyText": "I dunno if we need to specify that it uses react-testing-library here \ud83e\udd14", "url": "https://github.com/openequella/openEQUELLA/pull/2148#discussion_r467708264", "createdAt": "2020-08-10T06:29:03Z", "author": {"login": "SammyIsConfused"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -49,21 +52,86 @@ const searchPromise = mockSearch.mockImplementation(() =>\n   Promise.resolve(getSearchResult)\n );\n mockCollections.mockImplementation(() => Promise.resolve(getCollectionMap));\n+window.scrollTo = jest.fn();\n const defaultSearchPageOptions: SearchPageOptions = {\n   ...SearchModule.defaultSearchOptions,\n   sortOrder: SearchSettingsModule.SortOrder.RANK,\n   dateRangeQuickModeEnabled: true,\n };\n const defaultCollectionPrivileges = [\"SEARCH_COLLECTION\"];\n \n+describe(\"<SearchPage/> with react-testing-library\", () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2954445c825d89fd85d2dbf62965bcadf192c697"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "015849ee94fd601a4e6e5ec16ab9846cfaff5824", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/015849ee94fd601a4e6e5ec16ab9846cfaff5824", "committedDate": "2020-08-10T23:24:41Z", "message": "Tidy ups for SearchPage test and SearchBar.\n\n1. Reuse language strings and remove unnecessary expect in tests; and\n2. Update comments for SearchBar."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0NjUyNDgx", "url": "https://github.com/openequella/openEQUELLA/pull/2148#pullrequestreview-464652481", "createdAt": "2020-08-10T23:26:55Z", "commit": {"oid": "015849ee94fd601a4e6e5ec16ab9846cfaff5824"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0NjU4MDcy", "url": "https://github.com/openequella/openEQUELLA/pull/2148#pullrequestreview-464658072", "createdAt": "2020-08-10T23:43:19Z", "commit": {"oid": "015849ee94fd601a4e6e5ec16ab9846cfaff5824"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzo0MzoyMFrOG-jaKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzo0MzoyMFrOG-jaKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI0NTAzNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              //Update state when search query is cleared.\n          \n          \n            \n              // Update state when search query is cleared.", "url": "https://github.com/openequella/openEQUELLA/pull/2148#discussion_r468245035", "createdAt": "2020-08-10T23:43:20Z", "author": {"login": "ChristianMurphy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchBar.tsx", "diffHunk": "@@ -92,6 +92,13 @@ export default function SearchBar({\n     doSearch,\n   ]);\n \n+  //Update state when search query is cleared.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "015849ee94fd601a4e6e5ec16ab9846cfaff5824"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "334b14fa8a6a732d357c6cad19ba70e96088cd97", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/334b14fa8a6a732d357c6cad19ba70e96088cd97", "committedDate": "2020-08-10T23:56:50Z", "message": "Update SearchBar comments.\n\nCo-authored-by: Christian Murphy <christian.murphy.42@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7682428742f51f8bc5669e29e7d9050d286a6df0", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/7682428742f51f8bc5669e29e7d9050d286a6df0", "committedDate": "2020-08-11T05:52:28Z", "message": "Merge branch 'component/new-search-page' into feature/search-page-clear-all-options"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f5df4f77d9fcc45edb29d2559ddb08d0fa5ed3f", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/6f5df4f77d9fcc45edb29d2559ddb08d0fa5ed3f", "committedDate": "2020-08-11T05:59:09Z", "message": "Resolve branch divergence."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0NzcyNzM1", "url": "https://github.com/openequella/openEQUELLA/pull/2148#pullrequestreview-464772735", "createdAt": "2020-08-11T06:09:07Z", "commit": {"oid": "6f5df4f77d9fcc45edb29d2559ddb08d0fa5ed3f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4877, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}