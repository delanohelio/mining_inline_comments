{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzODQxMDEw", "number": 2536, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMjo0ODozNlrOE7RwEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMzo1NzozN1rOE7S1SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNTkyMjcyOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/modules/SearchModule.ts", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMjo0ODozNlrOH21JRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwNDo1MDoxN1rOH6Lxlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI1NTg3OQ==", "bodyText": "Why added this question mark may I ask ? The type of value is Array which should ensure it won't be undefined or null.", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r527255879", "createdAt": "2020-11-19T22:48:36Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/modules/SearchModule.ts", "diffHunk": "@@ -274,7 +274,7 @@ export const generateQueryStringFromSearchOptions = (\n       return match(\n         [\n           Literal(\"collections\"),\n-          () => value.map((collection) => pick(collection, [\"uuid\"])),\n+          () => value?.map((collection) => pick(collection, [\"uuid\"])),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDcwNjE2Mg==", "bodyText": "This is marked resolved but there is no answer or change?", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r530706162", "createdAt": "2020-11-26T00:25:21Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/modules/SearchModule.ts", "diffHunk": "@@ -274,7 +274,7 @@ export const generateQueryStringFromSearchOptions = (\n       return match(\n         [\n           Literal(\"collections\"),\n-          () => value.map((collection) => pick(collection, [\"uuid\"])),\n+          () => value?.map((collection) => pick(collection, [\"uuid\"])),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI1NTg3OQ=="}, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc3MjM3NA==", "bodyText": "I thought I had put a comment for this one \ud83e\udd14\nBut, without the ? it can get into that match with an undefined value", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r530772374", "createdAt": "2020-11-26T04:50:17Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/modules/SearchModule.ts", "diffHunk": "@@ -274,7 +274,7 @@ export const generateQueryStringFromSearchOptions = (\n       return match(\n         [\n           Literal(\"collections\"),\n-          () => value.map((collection) => pick(collection, [\"uuid\"])),\n+          () => value?.map((collection) => pick(collection, [\"uuid\"])),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI1NTg3OQ=="}, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNTkyNTc0OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/SearchPage.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMjo0OTozN1rOH21LAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMjo0OTozN1rOH21LAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI1NjMyMQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import { RenderData } from \"../mainui\";\n          \n          \n            \n            import type { RenderData } from \"../mainui\";", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r527256321", "createdAt": "2020-11-19T22:49:37Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/SearchPage.tsx", "diffHunk": "@@ -24,7 +24,10 @@ import { useEffect, useRef, useState } from \"react\";\n import { useHistory, useLocation } from \"react-router\";\n import { Static } from \"runtypes\";\n import { generateFromError } from \"../api/errors\";\n+import { AppConfig } from \"../AppConfig\";\n import { DateRangeSelector } from \"../components/DateRangeSelector\";\n+import MessageInfo from \"../components/MessageInfo\";\n+import { RenderData } from \"../mainui\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNTkzNDI2OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/SearchPage.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMjo1MTo1MFrOH21Ppg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMjo1MTo1MFrOH21Ppg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI1NzUxMA==", "bodyText": "You can reuse searchStrings.", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r527257510", "createdAt": "2020-11-19T22:51:50Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/SearchPage.tsx", "diffHunk": "@@ -288,6 +295,27 @@ const SearchPage = ({ updateTemplate }: TemplateUpdateProps) => {\n     setFilterExpansion(false);\n   };\n \n+  const copySearchInfoSnackbar = (\n+    <MessageInfo\n+      open={showSnackBar}\n+      onClose={() => setShowSnackBar(false)}\n+      title={languageStrings.searchpage.shareSearchConfirmationText}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNTk1MzkzOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/SearchPage.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMjo1ODozM1rOH21bZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwNTo0OTozM1rOH4s5dQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI2MDUxNg==", "bodyText": "Is there any possibility that writeText could fail ?", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r527260516", "createdAt": "2020-11-19T22:58:33Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/SearchPage.tsx", "diffHunk": "@@ -288,6 +295,27 @@ const SearchPage = ({ updateTemplate }: TemplateUpdateProps) => {\n     setFilterExpansion(false);\n   };\n \n+  const copySearchInfoSnackbar = (\n+    <MessageInfo\n+      open={showSnackBar}\n+      onClose={() => setShowSnackBar(false)}\n+      title={languageStrings.searchpage.shareSearchConfirmationText}\n+      variant=\"success\"\n+    />\n+  );\n+\n+  const handleCopySearch = () => {\n+    //base institution urls have a trailing / that we need to get rid of\n+    const instUrl = AppConfig.baseUrl.slice(0, -1);\n+    const searchUrl = `${instUrl}${\n+      location.pathname\n+    }?${generateQueryStringFromSearchOptions(searchPageOptions)}`;\n+\n+    navigator.clipboard.writeText(searchUrl).then(() => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTIxNzkwOQ==", "bodyText": "It's possible, so i will put a catch in for it", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r529217909", "createdAt": "2020-11-24T05:49:33Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/SearchPage.tsx", "diffHunk": "@@ -288,6 +295,27 @@ const SearchPage = ({ updateTemplate }: TemplateUpdateProps) => {\n     setFilterExpansion(false);\n   };\n \n+  const copySearchInfoSnackbar = (\n+    <MessageInfo\n+      open={showSnackBar}\n+      onClose={() => setShowSnackBar(false)}\n+      title={languageStrings.searchpage.shareSearchConfirmationText}\n+      variant=\"success\"\n+    />\n+  );\n+\n+  const handleCopySearch = () => {\n+    //base institution urls have a trailing / that we need to get rid of\n+    const instUrl = AppConfig.baseUrl.slice(0, -1);\n+    const searchUrl = `${instUrl}${\n+      location.pathname\n+    }?${generateQueryStringFromSearchOptions(searchPageOptions)}`;\n+\n+    navigator.clipboard.writeText(searchUrl).then(() => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI2MDUxNg=="}, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNTk2NTU4OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResultList.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMzowMjowNVrOH21imw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMzo1MzowN1rOH22rWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI2MjM2Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import { Share } from \"@material-ui/icons\";\n          \n          \n            \n            import Share from \"@material-ui/icons/Share\"", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r527262363", "createdAt": "2020-11-19T23:02:05Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResultList.tsx", "diffHunk": "@@ -23,12 +23,14 @@ import {\n   CardHeader,\n   CircularProgress,\n   Grid,\n+  IconButton,\n   List,\n   ListItem,\n   Tooltip,\n   Typography,\n } from \"@material-ui/core\";\n import { makeStyles } from \"@material-ui/core/styles\";\n+import { Share } from \"@material-ui/icons\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI4MDk4Ng==", "bodyText": "Definitely a good one to be cautious of for tree shaking and package sizes.", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r527280986", "createdAt": "2020-11-19T23:53:07Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResultList.tsx", "diffHunk": "@@ -23,12 +23,14 @@ import {\n   CardHeader,\n   CircularProgress,\n   Grid,\n+  IconButton,\n   List,\n   ListItem,\n   Tooltip,\n   Typography,\n } from \"@material-ui/core\";\n import { makeStyles } from \"@material-ui/core/styles\";\n+import { Share } from \"@material-ui/icons\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI2MjM2Mw=="}, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNTk3MDMzOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResultList.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMzowNDoxNVrOH21luA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMzo1ODoxOFrOH4kGBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI2MzE2MA==", "bodyText": "What about adding a label here for accessibility and writing tests more easily ?", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r527263160", "createdAt": "2020-11-19T23:04:15Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResultList.tsx", "diffHunk": "@@ -122,6 +129,13 @@ export const SearchResultList = ({\n                 </Button>\n               </Tooltip>\n             </Grid>\n+            <Grid item>\n+              <Tooltip title={searchPageStrings.shareSearchHelperText}>\n+                <IconButton onClick={onCopySearchLink}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA3MzY3MQ==", "bodyText": "An IconButton wrapped in a Toolip component uses the Tooltip text as the title of the Button element:\n<button class=\"MuiButtonBase-root MuiIconButton-root\" tabindex=\"0\" type=\"button\" title=\"Copy search link to clipboard\">", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r529073671", "createdAt": "2020-11-23T23:58:18Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResultList.tsx", "diffHunk": "@@ -122,6 +129,13 @@ export const SearchResultList = ({\n                 </Button>\n               </Tooltip>\n             </Grid>\n+            <Grid item>\n+              <Tooltip title={searchPageStrings.shareSearchHelperText}>\n+                <IconButton onClick={onCopySearchLink}>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI2MzE2MA=="}, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNjA5NDA4OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMzo1NToxNlrOH22uOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMjoxMToyNVrOH5YAUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI4MTcyMA==", "bodyText": "Two things:\n\nHow come you can't do it like the window.scroll below; and\nEven if you can't, rather than using () => {} could be better to use jest.fn();", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r527281720", "createdAt": "2020-11-19T23:55:16Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -82,6 +82,11 @@ const mockConvertParamsToSearchOptions = jest.spyOn(\n   SearchModule,\n   \"queryStringParamsToSearchOptions\"\n );\n+Object.assign(navigator, {\n+  clipboard: {\n+    writeText: () => {},\n+  },\n+});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTIxMTk2Mg==", "bodyText": "I did try doing it like window.scroll\nwindow.navigator.clipboard.writeText = jest.fn();. But it fails with TypeError: Cannot set property 'writeText' of undefined.", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r529211962", "createdAt": "2020-11-24T05:28:56Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -82,6 +82,11 @@ const mockConvertParamsToSearchOptions = jest.spyOn(\n   SearchModule,\n   \"queryStringParamsToSearchOptions\"\n );\n+Object.assign(navigator, {\n+  clipboard: {\n+    writeText: () => {},\n+  },\n+});", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI4MTcyMA=="}, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTkwNTk2NQ==", "bodyText": "Does that include if you try:\nObject.assign(navigator, {\n  clipboard: {\n    writeText: jest.fn(),\n  },\n});", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r529905965", "createdAt": "2020-11-24T21:54:37Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -82,6 +82,11 @@ const mockConvertParamsToSearchOptions = jest.spyOn(\n   SearchModule,\n   \"queryStringParamsToSearchOptions\"\n );\n+Object.assign(navigator, {\n+  clipboard: {\n+    writeText: () => {},\n+  },\n+});", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI4MTcyMA=="}, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTkyNDE3OQ==", "bodyText": "Yup, that works just fine", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r529924179", "createdAt": "2020-11-24T22:11:25Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -82,6 +82,11 @@ const mockConvertParamsToSearchOptions = jest.spyOn(\n   SearchModule,\n   \"queryStringParamsToSearchOptions\"\n );\n+Object.assign(navigator, {\n+  clipboard: {\n+    writeText: () => {},\n+  },\n+});", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI4MTcyMA=="}, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNjA5NjMwOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMzo1NjoxNFrOH22vjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMzo1NjoxNFrOH22vjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI4MjA2MQ==", "bodyText": "Best to use languageString here rather than raw string literal.", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r527282061", "createdAt": "2020-11-19T23:56:14Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -680,6 +685,18 @@ describe(\"<SearchPage/>\", () => {\n       selectedCategories: selectedCategories,\n     });\n   });\n+\n+  it(\"should copy a search link to clipboard, and show a snackbar\", async () => {\n+    const mockClipboard = jest.spyOn(navigator.clipboard, \"writeText\");\n+    const copySearchButton = screen.getByTitle(\"Copy search link to clipboard\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNjA5OTkyOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMzo1NzozN1rOH22xeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMzo1NzozN1rOH22xeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI4MjU1NA==", "bodyText": "langstrings", "url": "https://github.com/openequella/openEQUELLA/pull/2536#discussion_r527282554", "createdAt": "2020-11-19T23:57:37Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -680,6 +685,18 @@ describe(\"<SearchPage/>\", () => {\n       selectedCategories: selectedCategories,\n     });\n   });\n+\n+  it(\"should copy a search link to clipboard, and show a snackbar\", async () => {\n+    const mockClipboard = jest.spyOn(navigator.clipboard, \"writeText\");\n+    const copySearchButton = screen.getByTitle(\"Copy search link to clipboard\");\n+    mockClipboard.mockResolvedValueOnce();\n+    await act(async () => {\n+      copySearchButton.click();\n+    });\n+    expect(\n+      screen.getByText(\"Search link saved to clipboard\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ec08bd66a3a59bd2f3a2ce3e2a2645a6111431b"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1678, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}