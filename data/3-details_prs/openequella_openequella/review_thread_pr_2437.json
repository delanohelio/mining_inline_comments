{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1NzEyMjk1", "number": 2437, "reviewThreads": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNDo1Mjo1MVrOEwEjDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwNToyNDo0MVrOE1gMVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4ODQxNjE0OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/entrydev/NewSearchPage.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNDo1Mjo1MVrOHlaMOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNToyMjo0M1rOHm88EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODk4ODQ3NA==", "bodyText": "I guess we don't need to use StylesProvider in dev environment ?", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r508988474", "createdAt": "2020-10-21T04:52:51Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/entrydev/NewSearchPage.tsx", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import { ThemeProvider } from \"@material-ui/core\";\n+import * as React from \"react\";\n+import * as ReactDOM from \"react-dom\";\n+import { BrowserRouter } from \"react-router-dom\";\n+import { basePath } from \"../tsrc/mainui/App\";\n+import SearchPage from \"../tsrc/search/SearchPage\";\n+import { oeqTheme } from \"../tsrc/theme\";\n+\n+const searchPageProps = { updateTemplate: () => {} };\n+const renderSearchPage = () => {\n+  ReactDOM.render(\n+    <BrowserRouter basename={basePath}>\n+      <ThemeProvider theme={oeqTheme}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDYwNjM1Mw==", "bodyText": "I think we should keep it the same for both.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r510606353", "createdAt": "2020-10-23T05:22:43Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/entrydev/NewSearchPage.tsx", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import { ThemeProvider } from \"@material-ui/core\";\n+import * as React from \"react\";\n+import * as ReactDOM from \"react-dom\";\n+import { BrowserRouter } from \"react-router-dom\";\n+import { basePath } from \"../tsrc/mainui/App\";\n+import SearchPage from \"../tsrc/search/SearchPage\";\n+import { oeqTheme } from \"../tsrc/theme\";\n+\n+const searchPageProps = { updateTemplate: () => {} };\n+const renderSearchPage = () => {\n+  ReactDOM.render(\n+    <BrowserRouter basename={basePath}>\n+      <ThemeProvider theme={oeqTheme}>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODk4ODQ3NA=="}, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4ODQyMDE1OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNDo1NDo1NFrOHlaOeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNDo1NDo1NFrOHlaOeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODk4OTA1MA==", "bodyText": "This 100vw will cause a problem - when there is a vertical scroll bar, the actual width of the page is bigger than 100vw, so a horizontal scroll bar gets displayed. If  100% is used instead, then we also need to add 100% to <main>...</main>, which seems to require some fundamental changes in template.tsx.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r508989050", "createdAt": "2020-10-21T04:54:54Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "diffHunk": "@@ -4461,22 +4472,37 @@ img.warningimg {\n }\n \n #selection-page {\n-  margin: 0 auto;\n-  width: 784px;\n-  position: relative;\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  // The width of this div is Full viewport width minus vertical scrollbar width.\n+  // Ideally we should us JS to get scrollbar width.\n+  width: 100vw;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4ODQyMTM3OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNDo1NToyMlrOHlaPFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNDo1NToyMlrOHlaPFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODk4OTIwNQ==", "bodyText": "I just forgot to remove this comment. But I think we need to do what this comment says with JS in future EBP work so I did not do it now.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r508989205", "createdAt": "2020-10-21T04:55:22Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "diffHunk": "@@ -4461,22 +4472,37 @@ img.warningimg {\n }\n \n #selection-page {\n-  margin: 0 auto;\n-  width: 784px;\n-  position: relative;\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  // The width of this div is Full viewport width minus vertical scrollbar width.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5ODUwNTQ1OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/entrydev/NewSearchPage.html", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNTowOTowMlrOHm8SVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMzowMzo1NVrOHopvDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU5NTY3MA==", "bodyText": "So this file is only for displaying the New Search Page inside a selection session? If so, could the filename be modified to reflect this?", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r510595670", "createdAt": "2020-10-23T05:09:02Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/entrydev/NewSearchPage.html", "diffHunk": "@@ -0,0 +1,3 @@\n+<div id=\"newSearchPage\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b99fc0c6e7f4bb7332e976a757a441073533b3e6"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM4ODg3OQ==", "bodyText": "Selection session and the Resource Selector are the two places where this file is used. And it can be used in other places as long as we need. And this file has been renamed to SearchPage.html.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r512388879", "createdAt": "2020-10-27T03:03:55Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/entrydev/NewSearchPage.html", "diffHunk": "@@ -0,0 +1,3 @@\n+<div id=\"newSearchPage\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU5NTY3MA=="}, "originalCommit": {"oid": "b99fc0c6e7f4bb7332e976a757a441073533b3e6"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5ODU2NDM5OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/entrybuild/NewSearchPage.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNToyMjoyNlrOHm868A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMjoxNDowMFrOHoo48Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDYwNjA2NA==", "bodyText": "Would it be good to keep it shorter and go with something specific to oEQ. Maybe oeq-nsp. Then maybe we should also specify one for our normal full build - perhaps just oeq.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r510606064", "createdAt": "2020-10-23T05:22:26Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/entrybuild/NewSearchPage.tsx", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import { ThemeProvider } from \"@material-ui/core\";\n+import * as React from \"react\";\n+import * as ReactDOM from \"react-dom\";\n+import { BrowserRouter } from \"react-router-dom\";\n+import { basePath } from \"../tsrc/mainui/App\";\n+import SearchPage from \"../tsrc/search/SearchPage\";\n+import { oeqTheme } from \"../tsrc/theme\";\n+import { StylesProvider, createGenerateClassName } from \"@material-ui/core\";\n+\n+const searchPageProps = { updateTemplate: () => {} };\n+const generateClassName = createGenerateClassName({\n+  productionPrefix: \"new-search-page\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM3NTAyNQ==", "bodyText": "The normal full build is not happy with StylesProvider due to PrivateHiddenCss.\nFor example, without the provider, a style from PrivateHiddenCss is named jss25 which is unique.\nHowever, with the provider being used and the prefix being oeq, this style is named oeq1 which is duplicated. I expect it should be named oeq25 or something else unique.\nHad talks with Tom and we guessed there are different ThemeProvider existing in oEQ but I have not found any yet.\nAny help is appreciated!", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r512375025", "createdAt": "2020-10-27T02:14:00Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/entrybuild/NewSearchPage.tsx", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import { ThemeProvider } from \"@material-ui/core\";\n+import * as React from \"react\";\n+import * as ReactDOM from \"react-dom\";\n+import { BrowserRouter } from \"react-router-dom\";\n+import { basePath } from \"../tsrc/mainui/App\";\n+import SearchPage from \"../tsrc/search/SearchPage\";\n+import { oeqTheme } from \"../tsrc/theme\";\n+import { StylesProvider, createGenerateClassName } from \"@material-ui/core\";\n+\n+const searchPageProps = { updateTemplate: () => {} };\n+const generateClassName = createGenerateClassName({\n+  productionPrefix: \"new-search-page\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDYwNjA2NA=="}, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5ODU4NDQ5OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNToyNjoyNVrOHm9JGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMzoxMzo1NFrOHop5cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDYwOTY5MA==", "bodyText": "Why 98%? Could be handy to add a comment here.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r510609690", "createdAt": "2020-10-23T05:26:25Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "diffHunk": "@@ -4461,22 +4472,37 @@ img.warningimg {\n }\n \n #selection-page {\n-  margin: 0 auto;\n-  width: 784px;\n-  position: relative;\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  // The width of this div is Full viewport width minus vertical scrollbar width.\n+  // Ideally we should us JS to get scrollbar width.\n+  width: 100vw;\n+  overflow-x: hidden;\n }\n \n #selection-content {\n   background: url(../images/content-middle.gif) repeat-y 0px 0px;\n-  position: relative;\n-  width: 784px;\n-  float: left;\n+  width: 98%;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM5MTUzOA==", "bodyText": "I have changed this back to 100%", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r512391538", "createdAt": "2020-10-27T03:13:54Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "diffHunk": "@@ -4461,22 +4472,37 @@ img.warningimg {\n }\n \n #selection-page {\n-  margin: 0 auto;\n-  width: 784px;\n-  position: relative;\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  // The width of this div is Full viewport width minus vertical scrollbar width.\n+  // Ideally we should us JS to get scrollbar width.\n+  width: 100vw;\n+  overflow-x: hidden;\n }\n \n #selection-content {\n   background: url(../images/content-middle.gif) repeat-y 0px 0px;\n-  position: relative;\n-  width: 784px;\n-  float: left;\n+  width: 98%;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDYwOTY5MA=="}, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5ODU4NTI5OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNToyNjozNFrOHm9Jsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNToyNjozNFrOHm9Jsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDYwOTg0Mw==", "bodyText": "Why 98%? Could be handy to add a comment here.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r510609843", "createdAt": "2020-10-23T05:26:34Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "diffHunk": "@@ -4461,22 +4472,37 @@ img.warningimg {\n }\n \n #selection-page {\n-  margin: 0 auto;\n-  width: 784px;\n-  position: relative;\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  // The width of this div is Full viewport width minus vertical scrollbar width.\n+  // Ideally we should us JS to get scrollbar width.\n+  width: 100vw;\n+  overflow-x: hidden;\n }\n \n #selection-content {\n   background: url(../images/content-middle.gif) repeat-y 0px 0px;\n-  position: relative;\n-  width: 784px;\n-  float: left;\n+  width: 98%;\n }\n \n #selection-content #breadcrumb-inner {\n   margin-left: 18px;\n }\n \n+#selection-content #new-search-page {\n+  margin: 0 15px 0 0;\n+  width: 80%;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5ODU4NzkyOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNToyNzowNFrOHm9LYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNToyNzowNFrOHm9LYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDYxMDI3NQ==", "bodyText": "I believe there is a variable along the lines of $doubleMargin which is 16px. Would that be appropriate here?", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r510610275", "createdAt": "2020-10-23T05:27:04Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "diffHunk": "@@ -4461,22 +4472,37 @@ img.warningimg {\n }\n \n #selection-page {\n-  margin: 0 auto;\n-  width: 784px;\n-  position: relative;\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  // The width of this div is Full viewport width minus vertical scrollbar width.\n+  // Ideally we should us JS to get scrollbar width.\n+  width: 100vw;\n+  overflow-x: hidden;\n }\n \n #selection-content {\n   background: url(../images/content-middle.gif) repeat-y 0px 0px;\n-  position: relative;\n-  width: 784px;\n-  float: left;\n+  width: 98%;\n }\n \n #selection-content #breadcrumb-inner {\n   margin-left: 18px;\n }\n \n+#selection-content #new-search-page {\n+  margin: 0 15px 0 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 70}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5ODY0NjczOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/src/com/tle/web/search/base/AbstractRootSearchSection.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNTozOTowMFrOHm91Ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNTozOTowMFrOHm91Ag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDYyMDkzMA==", "bodyText": "The below code is not immediately clear, as it seems it has gone more with a pattern of augmentation. I wonder if instead the above code can be broken into a few useful private methods, and then further up in this method the below if becomes part of an if/else.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r510620930", "createdAt": "2020-10-23T05:39:00Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/src/com/tle/web/search/base/AbstractRootSearchSection.java", "diffHunk": "@@ -104,6 +106,20 @@ protected TemplateResult getTemplateResult(RenderEventContext info) {\n     templateResult.addNamedResult(\n         OneColumnLayout.BODY, CombinedRenderer.combineMultipleResults(cssIncludes));\n \n+    // If new search UI should be rendered, keep the right column content and override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5ODY0ODg5OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/src/com/tle/web/search/base/AbstractRootSearchSection.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNTozOToyM1rOHm92hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNTozOToyM1rOHm92hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDYyMTMxOA==", "bodyText": "Could this fail to getNamedResult?", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r510621318", "createdAt": "2020-10-23T05:39:23Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/src/com/tle/web/search/base/AbstractRootSearchSection.java", "diffHunk": "@@ -104,6 +106,20 @@ protected TemplateResult getTemplateResult(RenderEventContext info) {\n     templateResult.addNamedResult(\n         OneColumnLayout.BODY, CombinedRenderer.combineMultipleResults(cssIncludes));\n \n+    // If new search UI should be rendered, keep the right column content and override\n+    // the body content with new search UI.\n+    if (model.isNewSearchUIInNormalLayout()) {\n+      TemplateRenderable rightColumnContent =\n+          templateResult.getNamedResult(info, TwoColumnLayout.RIGHT);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5ODY1MzA0OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/src/com/tle/web/search/base/AbstractRootSearchSection.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNTo0MDowN1rOHm95jA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMDowNToxNFrOHpVUUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDYyMjA5Mg==", "bodyText": "I reckon a bit of JavaDoc would go a long way here to help readers understand what you mean by 'Normal Layout'.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r510622092", "createdAt": "2020-10-23T05:40:07Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/src/com/tle/web/search/base/AbstractRootSearchSection.java", "diffHunk": "@@ -150,5 +168,21 @@ public InfoBookmark getPermanentUrl() {\n     public void setPermanentUrl(InfoBookmark permanentUrl) {\n       this.permanentUrl = permanentUrl;\n     }\n+\n+    public boolean isNewSearchUIInNormalLayout() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzEwMjkyOA==", "bodyText": "I think this method is redundant so I remove it.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r513102928", "createdAt": "2020-10-28T00:05:14Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/src/com/tle/web/search/base/AbstractRootSearchSection.java", "diffHunk": "@@ -150,5 +168,21 @@ public InfoBookmark getPermanentUrl() {\n     public void setPermanentUrl(InfoBookmark permanentUrl) {\n       this.permanentUrl = permanentUrl;\n     }\n+\n+    public boolean isNewSearchUIInNormalLayout() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDYyMjA5Mg=="}, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5ODY3NjYwOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/src/com/tle/web/searching/section/RootSearchSection.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNTo0NDozOVrOHm-JoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMjowOToxNlrOHp_WuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDYyNjIwOQ==", "bodyText": "Should this be an else if, and then follow with an else to throw an IllegalStateException if we've ended up with an unexpected Layout? Or are there only two Layouts? (Maybe if there are only two, we might want to protect from the unknown future.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r510626209", "createdAt": "2020-10-23T05:44:39Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/src/com/tle/web/searching/section/RootSearchSection.java", "diffHunk": "@@ -80,6 +85,21 @@ public SectionResult renderHtml(RenderEventContext context) {\n       throw new AccessDeniedException(\n           urlHelper.getString(\"missingprivileges\", WebConstants.SEARCH_PAGE_PRIVILEGE));\n     }\n+\n+    // If this method is triggered from Selection Section, then check if Selection Section\n+    // is in 'structured' mode. If yes, then render the new search page if it's enabled.\n+    SelectionSession selectionSession = selectionService.getCurrentSession(context);\n+    if (isNewSearchUIInSelectionSession(selectionSession)) {\n+      SimpleSectionResult newSearchUIContent = RenderNewSearchPage.renderNewSearchPage(context);\n+      // For 'structured' layout, output the new search UI content directly.\n+      // For 'addOrSelected' layout, save the content in model.\n+      if (selectionSession.getLayout() == Layout.COURSE) {\n+        return newSearchUIContent;\n+      } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzc5MTY3Mw==", "bodyText": "After more digging I realised that there is no need to check what layout is used.\nBut to answer your question, there are three layouts: NORMAL, COURSE, SKINNY. So far, I have seen NORMAL and COURSE in selection session. Take Moodle as an example, if the openEQUELLA action is configured to use selectOrAdd then NORMAL is used, and if that's configured to use 'structured' then COURSE is used.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r513791673", "createdAt": "2020-10-28T22:09:16Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/src/com/tle/web/searching/section/RootSearchSection.java", "diffHunk": "@@ -80,6 +85,21 @@ public SectionResult renderHtml(RenderEventContext context) {\n       throw new AccessDeniedException(\n           urlHelper.getString(\"missingprivileges\", WebConstants.SEARCH_PAGE_PRIVILEGE));\n     }\n+\n+    // If this method is triggered from Selection Section, then check if Selection Section\n+    // is in 'structured' mode. If yes, then render the new search page if it's enabled.\n+    SelectionSession selectionSession = selectionService.getCurrentSession(context);\n+    if (isNewSearchUIInSelectionSession(selectionSession)) {\n+      SimpleSectionResult newSearchUIContent = RenderNewSearchPage.renderNewSearchPage(context);\n+      // For 'structured' layout, output the new search UI content directly.\n+      // For 'addOrSelected' layout, save the content in model.\n+      if (selectionSession.getLayout() == Layout.COURSE) {\n+        return newSearchUIContent;\n+      } else {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDYyNjIwOQ=="}, "originalCommit": {"oid": "85357985dd7c44c219b455141f6df02331a6d0bc"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDQ1MDE5OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/package.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMjo0MDo0MVrOHqxLbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMjo0MDo0MVrOHqxLbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYwNzk4MQ==", "bodyText": "How about merging into a single parcelEntryFiles? It'd make things a bit simpler, as we don't need this fragmentation.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r514607981", "createdAt": "2020-10-29T22:40:41Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/package.json", "diffHunk": "@@ -9,20 +9,23 @@\n     \"dist\": \"target/resources/web/reactjs\",\n     \"jest\": {\n       \"verbose\": true\n-    }\n+    },\n+    \"entryHtml\": \"entrypoint/*.html\",\n+    \"entryScript\": \"entrypoint/scripts/*.js\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b20cfec6310061e7e6c898feae5a2a0a6e8e0c0a"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDQ1NDIwOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/package.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMjo0MjoxOFrOHqxN3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMjo0MjoxOFrOHqxN3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYwODYwNA==", "bodyText": "Should be a pinned version. Mind you though, this is now on develop, so whether you want to merge into component and then into this one......", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r514608604", "createdAt": "2020-10-29T22:42:18Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/package.json", "diffHunk": "@@ -60,7 +63,8 @@\n     \"typescript-fsa\": \"2.5.0\",\n     \"typescript-fsa-reducers\": \"0.4.5\",\n     \"uuid\": \"8.3.1\",\n-    \"wicked-good-xpath\": \"1.3.0\"\n+    \"wicked-good-xpath\": \"1.3.0\",\n+    \"runtypes\": \"^5.0.1\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b20cfec6310061e7e6c898feae5a2a0a6e8e0c0a"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDY4Njg2OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/package.json", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDozMzo0MlrOHqzTPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwMjo1MjozMFrOHtxtow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDY0Mjc1MA==", "bodyText": "My understanding of this config value is that it's really only used for the output of the purescript upload component which has historically gone into a target folder within the entry folders. With all that in mind I suggest a few things:\n\nThis folder should just use the shared target/ folder;\nAs a result, this config value becomes redundant - so don't add it - simply use that path prefix down in the bundleps:uploadlist task; and\nUpdate the require in entrypoint/scripts/uploadlist.js to be require(\"../../target/uploadlist.js\")\n\nThis will have the added bonus that the clean script will now also clean this previously missed file.\n(This is not a perfect solution, that would require a whole lot of extra tidy up of this package.json - but that's well outside the scope of this PR. We really need to better organise the output and target directories - and understand if we even need pulp)", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r514642750", "createdAt": "2020-10-30T00:33:42Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/package.json", "diffHunk": "@@ -9,20 +9,23 @@\n     \"dist\": \"target/resources/web/reactjs\",\n     \"jest\": {\n       \"verbose\": true\n-    }\n+    },\n+    \"entryHtml\": \"entrypoint/*.html\",\n+    \"entryScript\": \"entrypoint/scripts/*.js\",\n+    \"entryTarget\": \"entrypoint/target\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b20cfec6310061e7e6c898feae5a2a0a6e8e0c0a"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQyNTY2Nw==", "bodyText": "Since we moved 'uploadlist.js' from entrypoint/target to target, we need to run npm run dev:build first after we do a clean.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r516425667", "createdAt": "2020-11-03T04:44:05Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/js/package.json", "diffHunk": "@@ -9,20 +9,23 @@\n     \"dist\": \"target/resources/web/reactjs\",\n     \"jest\": {\n       \"verbose\": true\n-    }\n+    },\n+    \"entryHtml\": \"entrypoint/*.html\",\n+    \"entryScript\": \"entrypoint/scripts/*.js\",\n+    \"entryTarget\": \"entrypoint/target\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDY0Mjc1MA=="}, "originalCommit": {"oid": "b20cfec6310061e7e6c898feae5a2a0a6e8e0c0a"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzc2MjQ2Nw==", "bodyText": "You mean rather than just going straight to npm run dev?\nBecause in theory sbt cleanrun would also have already done what's needed. \ud83e\udd14", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r517762467", "createdAt": "2020-11-05T02:52:30Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/package.json", "diffHunk": "@@ -9,20 +9,23 @@\n     \"dist\": \"target/resources/web/reactjs\",\n     \"jest\": {\n       \"verbose\": true\n-    }\n+    },\n+    \"entryHtml\": \"entrypoint/*.html\",\n+    \"entryScript\": \"entrypoint/scripts/*.js\",\n+    \"entryTarget\": \"entrypoint/target\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDY0Mjc1MA=="}, "originalCommit": {"oid": "b20cfec6310061e7e6c898feae5a2a0a6e8e0c0a"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDcyMzQzOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/mainui/App.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDo1Mzo1MFrOHqzoEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDo1Mzo1MFrOHqzoEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDY0ODA4Mw==", "bodyText": "Nit (just maybe a bit more understandable as to intention).\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              const emptyFunc = () => {};\n          \n          \n            \n              const nop = () => {};", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r514648083", "createdAt": "2020-10-30T00:53:50Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/mainui/App.tsx", "diffHunk": "@@ -183,95 +193,145 @@ function IndexPage() {\n   }\n \n   return (\n-    <BrowserRouter\n-      basename={basePath}\n-      getUserConfirmation={(message, cb) => {\n-        if (errorShowing.current) {\n-          errorShowing.current = false;\n-          setFullPageError(undefined);\n-          cb(true);\n-        } else {\n-          setNavAwayCallback({ message, cb });\n-        }\n-      }}\n-    >\n-      <Prompt\n-        when={Boolean(preventNavMessage) || errorShowing.current}\n-        message={nonBlankNavMessage}\n-      />\n-      <NavAwayDialog\n-        open={Boolean(navAwayCallback)}\n-        message={nonBlankNavMessage}\n-        navigateConfirm={(confirm) => {\n-          if (navAwayCallback) navAwayCallback.cb(confirm);\n-          if (confirm) setPreventNavMessage(undefined);\n-          setNavAwayCallback(undefined);\n+    <ThemeProvider theme={oeqTheme}>\n+      <BrowserRouter\n+        basename={basePath}\n+        getUserConfirmation={(message, cb) => {\n+          if (errorShowing.current) {\n+            errorShowing.current = false;\n+            setFullPageError(undefined);\n+            cb(true);\n+          } else {\n+            setNavAwayCallback({ message, cb });\n+          }\n         }}\n-      />\n-      <LegacyContent\n-        {...legacyContentProps}\n-        render={(content) => {\n-          const tp = content\n-            ? templatePropsForLegacy(content)\n-            : {\n-                ...templateProps,\n-                fullscreenMode: legacyContentProps.enabled\n-                  ? templateProps.fullscreenMode\n-                  : undefined,\n-              };\n-          const withErr = fullPageError\n-            ? { ...tp, title: fullPageError.error, fullscreenMode: undefined }\n-            : tp;\n-          const template = (\n-            <Template {...withErr} currentUser={currentUser}>\n-              {routeSwitch(content)}\n-            </Template>\n-          );\n-          const render = () => {\n-            if (!content || content.noForm) {\n-              return template;\n-            } else {\n-              const { form } = content.html;\n-              return (\n-                <>\n-                  <LegacyForm state={content.state}>{template}</LegacyForm>\n-                  {form && HtmlParser(form)}\n-                </>\n-              );\n-            }\n-          };\n-          return render();\n-        }}\n-      />\n-    </BrowserRouter>\n+      >\n+        <Prompt\n+          when={Boolean(preventNavMessage) || errorShowing.current}\n+          message={nonBlankNavMessage}\n+        />\n+        <NavAwayDialog\n+          open={Boolean(navAwayCallback)}\n+          message={nonBlankNavMessage}\n+          navigateConfirm={(confirm) => {\n+            if (navAwayCallback) navAwayCallback.cb(confirm);\n+            if (confirm) setPreventNavMessage(undefined);\n+            setNavAwayCallback(undefined);\n+          }}\n+        />\n+        <LegacyContent\n+          {...legacyContentProps}\n+          render={(content) => {\n+            const tp = content\n+              ? templatePropsForLegacy(content)\n+              : {\n+                  ...templateProps,\n+                  fullscreenMode: legacyContentProps.enabled\n+                    ? templateProps.fullscreenMode\n+                    : undefined,\n+                };\n+            const withErr = fullPageError\n+              ? { ...tp, title: fullPageError.error, fullscreenMode: undefined }\n+              : tp;\n+            const template = (\n+              <Template {...withErr} currentUser={currentUser}>\n+                {routeSwitch(content)}\n+              </Template>\n+            );\n+            const render = () => {\n+              if (!content || content.noForm) {\n+                return template;\n+              } else {\n+                const { form } = content.html;\n+                return (\n+                  <>\n+                    <LegacyForm state={content.state}>{template}</LegacyForm>\n+                    {form && HtmlParser(form)}\n+                  </>\n+                );\n+              }\n+            };\n+            return render();\n+          }}\n+        />\n+      </BrowserRouter>\n+    </ThemeProvider>\n   );\n }\n \n-interface AppProps {\n-  legacySettingsMode: boolean;\n+interface NewPageProps {\n+  page: ReactNode;\n+  classPrefix: string;\n+  isOpenInSelectonSession: boolean;\n }\n \n-export const App = ({ legacySettingsMode }: AppProps) => {\n-  if (legacySettingsMode) {\n-    return (\n-      <BrowserRouter basename={basePath} forceRefresh>\n-        <ThemeProvider theme={oeqTheme}>\n-          <SettingsPage\n-            refreshUser={() => {}}\n-            updateTemplate={() => {}}\n-            isReloadNeeded={false}\n-          />\n-        </ThemeProvider>\n-      </BrowserRouter>\n-    );\n-  } else {\n-    startHeartbeat();\n-    return (\n+/**\n+ * Build a single oEQ new UI page.\n+ * @param page A tsx page such as SearchPage.tsx\n+ * @param forceRefresh Whether to refresh the page when navigating to different route\n+ * @param classPrefix The prefix added in MUI styles\n+ */\n+function NewPage({ page, isOpenInSelectonSession, classPrefix }: NewPageProps) {\n+  const generateClassName = createGenerateClassName({\n+    productionPrefix: classPrefix,\n+  });\n+\n+  return (\n+    <StylesProvider generateClassName={generateClassName}>\n       <ThemeProvider theme={oeqTheme}>\n-        <IndexPage />\n+        <BrowserRouter\n+          basename={basePath}\n+          forceRefresh={!isOpenInSelectonSession}\n+        >\n+          {page}\n+        </BrowserRouter>\n       </ThemeProvider>\n-    );\n-  }\n+    </StylesProvider>\n+  );\n+}\n+\n+interface AppProps {\n+  entryPage: EntryPage;\n+}\n+\n+const App = ({ entryPage }: AppProps) => {\n+  const emptyFunc = () => {};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b20cfec6310061e7e6c898feae5a2a0a6e8e0c0a"}, "originalPosition": 229}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDcyNzU3OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/mainui/App.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDo1NjoyM1rOHqzqiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDo1NjoyM1rOHqzqiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDY0ODcxMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              page: ReactNode;\n          \n          \n            \n              children: ReactNode;\n          \n      \n    \n    \n  \n\nAnd then that way below you can go with the more usual:\n<NewPage>\n  <SettingsPage ... />\n</NewPage>\n\nRather than the current slightly unusual:\n<NewPage\n  page={(<SettingsPage .../>})\n/>\n\n(It was that unusual pattern that caught my eye.)", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r514648713", "createdAt": "2020-10-30T00:56:23Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/mainui/App.tsx", "diffHunk": "@@ -183,95 +193,145 @@ function IndexPage() {\n   }\n \n   return (\n-    <BrowserRouter\n-      basename={basePath}\n-      getUserConfirmation={(message, cb) => {\n-        if (errorShowing.current) {\n-          errorShowing.current = false;\n-          setFullPageError(undefined);\n-          cb(true);\n-        } else {\n-          setNavAwayCallback({ message, cb });\n-        }\n-      }}\n-    >\n-      <Prompt\n-        when={Boolean(preventNavMessage) || errorShowing.current}\n-        message={nonBlankNavMessage}\n-      />\n-      <NavAwayDialog\n-        open={Boolean(navAwayCallback)}\n-        message={nonBlankNavMessage}\n-        navigateConfirm={(confirm) => {\n-          if (navAwayCallback) navAwayCallback.cb(confirm);\n-          if (confirm) setPreventNavMessage(undefined);\n-          setNavAwayCallback(undefined);\n+    <ThemeProvider theme={oeqTheme}>\n+      <BrowserRouter\n+        basename={basePath}\n+        getUserConfirmation={(message, cb) => {\n+          if (errorShowing.current) {\n+            errorShowing.current = false;\n+            setFullPageError(undefined);\n+            cb(true);\n+          } else {\n+            setNavAwayCallback({ message, cb });\n+          }\n         }}\n-      />\n-      <LegacyContent\n-        {...legacyContentProps}\n-        render={(content) => {\n-          const tp = content\n-            ? templatePropsForLegacy(content)\n-            : {\n-                ...templateProps,\n-                fullscreenMode: legacyContentProps.enabled\n-                  ? templateProps.fullscreenMode\n-                  : undefined,\n-              };\n-          const withErr = fullPageError\n-            ? { ...tp, title: fullPageError.error, fullscreenMode: undefined }\n-            : tp;\n-          const template = (\n-            <Template {...withErr} currentUser={currentUser}>\n-              {routeSwitch(content)}\n-            </Template>\n-          );\n-          const render = () => {\n-            if (!content || content.noForm) {\n-              return template;\n-            } else {\n-              const { form } = content.html;\n-              return (\n-                <>\n-                  <LegacyForm state={content.state}>{template}</LegacyForm>\n-                  {form && HtmlParser(form)}\n-                </>\n-              );\n-            }\n-          };\n-          return render();\n-        }}\n-      />\n-    </BrowserRouter>\n+      >\n+        <Prompt\n+          when={Boolean(preventNavMessage) || errorShowing.current}\n+          message={nonBlankNavMessage}\n+        />\n+        <NavAwayDialog\n+          open={Boolean(navAwayCallback)}\n+          message={nonBlankNavMessage}\n+          navigateConfirm={(confirm) => {\n+            if (navAwayCallback) navAwayCallback.cb(confirm);\n+            if (confirm) setPreventNavMessage(undefined);\n+            setNavAwayCallback(undefined);\n+          }}\n+        />\n+        <LegacyContent\n+          {...legacyContentProps}\n+          render={(content) => {\n+            const tp = content\n+              ? templatePropsForLegacy(content)\n+              : {\n+                  ...templateProps,\n+                  fullscreenMode: legacyContentProps.enabled\n+                    ? templateProps.fullscreenMode\n+                    : undefined,\n+                };\n+            const withErr = fullPageError\n+              ? { ...tp, title: fullPageError.error, fullscreenMode: undefined }\n+              : tp;\n+            const template = (\n+              <Template {...withErr} currentUser={currentUser}>\n+                {routeSwitch(content)}\n+              </Template>\n+            );\n+            const render = () => {\n+              if (!content || content.noForm) {\n+                return template;\n+              } else {\n+                const { form } = content.html;\n+                return (\n+                  <>\n+                    <LegacyForm state={content.state}>{template}</LegacyForm>\n+                    {form && HtmlParser(form)}\n+                  </>\n+                );\n+              }\n+            };\n+            return render();\n+          }}\n+        />\n+      </BrowserRouter>\n+    </ThemeProvider>\n   );\n }\n \n-interface AppProps {\n-  legacySettingsMode: boolean;\n+interface NewPageProps {\n+  page: ReactNode;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b20cfec6310061e7e6c898feae5a2a0a6e8e0c0a"}, "originalPosition": 175}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDcyOTc5OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/mainui/App.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDo1Nzo1M1rOHqzr4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDo1Nzo1M1rOHqzr4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDY0OTA1Nw==", "bodyText": "Be advised that this component has been pushed out into its own .tsx file on develop to assist with lazy loading. So I'd suggest you get that stuff merged across as you'll need to do the same (lazy loading) here/below.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r514649057", "createdAt": "2020-10-30T00:57:53Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/mainui/App.tsx", "diffHunk": "@@ -57,6 +64,9 @@ export const basePath = baseFullPath.substr(0, baseFullPath.length - 1);\n \n declare const renderData: RenderData | undefined;\n \n+/**\n+ * Build the full oEQ Index page.\n+ */\n function IndexPage() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b20cfec6310061e7e6c898feae5a2a0a6e8e0c0a"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDczNDM3OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/mainui/App.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDo1OTozMVrOHqzu5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDo1OTozMVrOHqzu5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDY0OTgzMQ==", "bodyText": "Nice work with the pattern matching. Very tidy. \ud83d\udc4d", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r514649831", "createdAt": "2020-10-30T00:59:31Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/mainui/App.tsx", "diffHunk": "@@ -183,95 +193,145 @@ function IndexPage() {\n   }\n \n   return (\n-    <BrowserRouter\n-      basename={basePath}\n-      getUserConfirmation={(message, cb) => {\n-        if (errorShowing.current) {\n-          errorShowing.current = false;\n-          setFullPageError(undefined);\n-          cb(true);\n-        } else {\n-          setNavAwayCallback({ message, cb });\n-        }\n-      }}\n-    >\n-      <Prompt\n-        when={Boolean(preventNavMessage) || errorShowing.current}\n-        message={nonBlankNavMessage}\n-      />\n-      <NavAwayDialog\n-        open={Boolean(navAwayCallback)}\n-        message={nonBlankNavMessage}\n-        navigateConfirm={(confirm) => {\n-          if (navAwayCallback) navAwayCallback.cb(confirm);\n-          if (confirm) setPreventNavMessage(undefined);\n-          setNavAwayCallback(undefined);\n+    <ThemeProvider theme={oeqTheme}>\n+      <BrowserRouter\n+        basename={basePath}\n+        getUserConfirmation={(message, cb) => {\n+          if (errorShowing.current) {\n+            errorShowing.current = false;\n+            setFullPageError(undefined);\n+            cb(true);\n+          } else {\n+            setNavAwayCallback({ message, cb });\n+          }\n         }}\n-      />\n-      <LegacyContent\n-        {...legacyContentProps}\n-        render={(content) => {\n-          const tp = content\n-            ? templatePropsForLegacy(content)\n-            : {\n-                ...templateProps,\n-                fullscreenMode: legacyContentProps.enabled\n-                  ? templateProps.fullscreenMode\n-                  : undefined,\n-              };\n-          const withErr = fullPageError\n-            ? { ...tp, title: fullPageError.error, fullscreenMode: undefined }\n-            : tp;\n-          const template = (\n-            <Template {...withErr} currentUser={currentUser}>\n-              {routeSwitch(content)}\n-            </Template>\n-          );\n-          const render = () => {\n-            if (!content || content.noForm) {\n-              return template;\n-            } else {\n-              const { form } = content.html;\n-              return (\n-                <>\n-                  <LegacyForm state={content.state}>{template}</LegacyForm>\n-                  {form && HtmlParser(form)}\n-                </>\n-              );\n-            }\n-          };\n-          return render();\n-        }}\n-      />\n-    </BrowserRouter>\n+      >\n+        <Prompt\n+          when={Boolean(preventNavMessage) || errorShowing.current}\n+          message={nonBlankNavMessage}\n+        />\n+        <NavAwayDialog\n+          open={Boolean(navAwayCallback)}\n+          message={nonBlankNavMessage}\n+          navigateConfirm={(confirm) => {\n+            if (navAwayCallback) navAwayCallback.cb(confirm);\n+            if (confirm) setPreventNavMessage(undefined);\n+            setNavAwayCallback(undefined);\n+          }}\n+        />\n+        <LegacyContent\n+          {...legacyContentProps}\n+          render={(content) => {\n+            const tp = content\n+              ? templatePropsForLegacy(content)\n+              : {\n+                  ...templateProps,\n+                  fullscreenMode: legacyContentProps.enabled\n+                    ? templateProps.fullscreenMode\n+                    : undefined,\n+                };\n+            const withErr = fullPageError\n+              ? { ...tp, title: fullPageError.error, fullscreenMode: undefined }\n+              : tp;\n+            const template = (\n+              <Template {...withErr} currentUser={currentUser}>\n+                {routeSwitch(content)}\n+              </Template>\n+            );\n+            const render = () => {\n+              if (!content || content.noForm) {\n+                return template;\n+              } else {\n+                const { form } = content.html;\n+                return (\n+                  <>\n+                    <LegacyForm state={content.state}>{template}</LegacyForm>\n+                    {form && HtmlParser(form)}\n+                  </>\n+                );\n+              }\n+            };\n+            return render();\n+          }}\n+        />\n+      </BrowserRouter>\n+    </ThemeProvider>\n   );\n }\n \n-interface AppProps {\n-  legacySettingsMode: boolean;\n+interface NewPageProps {\n+  page: ReactNode;\n+  classPrefix: string;\n+  isOpenInSelectonSession: boolean;\n }\n \n-export const App = ({ legacySettingsMode }: AppProps) => {\n-  if (legacySettingsMode) {\n-    return (\n-      <BrowserRouter basename={basePath} forceRefresh>\n-        <ThemeProvider theme={oeqTheme}>\n-          <SettingsPage\n-            refreshUser={() => {}}\n-            updateTemplate={() => {}}\n-            isReloadNeeded={false}\n-          />\n-        </ThemeProvider>\n-      </BrowserRouter>\n-    );\n-  } else {\n-    startHeartbeat();\n-    return (\n+/**\n+ * Build a single oEQ new UI page.\n+ * @param page A tsx page such as SearchPage.tsx\n+ * @param forceRefresh Whether to refresh the page when navigating to different route\n+ * @param classPrefix The prefix added in MUI styles\n+ */\n+function NewPage({ page, isOpenInSelectonSession, classPrefix }: NewPageProps) {\n+  const generateClassName = createGenerateClassName({\n+    productionPrefix: classPrefix,\n+  });\n+\n+  return (\n+    <StylesProvider generateClassName={generateClassName}>\n       <ThemeProvider theme={oeqTheme}>\n-        <IndexPage />\n+        <BrowserRouter\n+          basename={basePath}\n+          forceRefresh={!isOpenInSelectonSession}\n+        >\n+          {page}\n+        </BrowserRouter>\n       </ThemeProvider>\n-    );\n-  }\n+    </StylesProvider>\n+  );\n+}\n+\n+interface AppProps {\n+  entryPage: EntryPage;\n+}\n+\n+const App = ({ entryPage }: AppProps) => {\n+  const emptyFunc = () => {};\n+  const renderApp = match(\n+    [\n+      Literal(\"mainDiv\"),\n+      () => {\n+        startHeartbeat();\n+        return <IndexPage />;\n+      },\n+    ],\n+    [\n+      Literal(\"searchPage\"),\n+      () => (\n+        <NewPage\n+          page={<SearchPage updateTemplate={emptyFunc} />}\n+          classPrefix=\"oeq-nsp\"\n+          isOpenInSelectonSession\n+        />\n+      ),\n+    ],\n+    [\n+      Literal(\"settingsPage\"),\n+      () => (\n+        <NewPage\n+          page={\n+            <SettingsPage\n+              refreshUser={emptyFunc}\n+              updateTemplate={emptyFunc}\n+              isReloadNeeded={false}\n+            />\n+          }\n+          classPrefix=\"oeq-nst\"\n+          isOpenInSelectonSession={false}\n+        />\n+      ),\n+    ]\n+  );\n+  return renderApp(entryPage);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b20cfec6310061e7e6c898feae5a2a0a6e8e0c0a"}, "originalPosition": 265}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDc0NTExOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMTowMjozNlrOHqz19Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMTowMjozNlrOHqz19Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDY1MTYzNw==", "bodyText": "You probably want to look at using curvedCorners mixin whenever you find yourself doing this.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r514651637", "createdAt": "2020-10-30T01:02:36Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "diffHunk": "@@ -4701,12 +4720,13 @@ div#sssh_finishedButton {\n   border: none;\n   box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n   background: none;\n+  border-radius: 4px;\n }\n \n .box_head {\n   background-color: white;\n   border: none;\n-\n+  border-radius: 4px;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b20cfec6310061e7e6c898feae5a2a0a6e8e0c0a"}, "originalPosition": 134}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDc0NjE3OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMTowMjo0OVrOHqz2lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMTowMjo0OVrOHqz2lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDY1MTc5OA==", "bodyText": "As above, look at using curvedCorners.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r514651798", "createdAt": "2020-10-30T01:02:49Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "diffHunk": "@@ -4720,6 +4740,7 @@ div#sssh_finishedButton {\n .box_content {\n   background: none;\n   border: none;\n+  border-radius: 4px;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b20cfec6310061e7e6c898feae5a2a0a6e8e0c0a"}, "originalPosition": 142}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0NTEzMjE2OnYy", "diffSide": "LEFT", "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwMjo1ODozOVrOHtx0Aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwMjo1ODozOVrOHtx0Aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzc2NDA5OQ==", "bodyText": "Oooh, this looks like something recently added to fix EBP stuff for 2020.2. Removing it's not removing a fix is it?", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r517764099", "createdAt": "2020-11-05T02:58:39Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "diffHunk": "@@ -4511,7 +4531,6 @@ img.warningimg {\n \n .selectiondashboard #col2 {\n   width: 368px;\n-  margin-left: $doubleMargin;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e9f5f3e6d38383680ba7a2bfc3f1d7eb3c22553"}, "originalPosition": 119}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0NTEzNzA5OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwMzowMToyNVrOHtx3Bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwNDo1OTozNlrOHtzl8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzc2NDg3MA==", "bodyText": "This change, combined with the above, looks like you're attempting to achieve the standard style defined in buttonShadowBorder. Should that be used instead? (And maybe still keeping the background declaration.)\nOtherwise at the very least, it should be using curvedCorners.", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r517764870", "createdAt": "2020-11-05T03:01:25Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "diffHunk": "@@ -4701,12 +4720,13 @@ div#sssh_finishedButton {\n   border: none;\n   box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n   background: none;\n+  border-radius: 4px;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e9f5f3e6d38383680ba7a2bfc3f1d7eb3c22553"}, "originalPosition": 127}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzc5MzI2Ng==", "bodyText": "Yes buttonShadowBorder is good. Thanks for reminding!", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r517793266", "createdAt": "2020-11-05T04:59:36Z", "author": {"login": "PenghaiZhang"}, "path": "Source/Plugins/Core/com.equella.core/resources/web/sass/legacy.scss", "diffHunk": "@@ -4701,12 +4720,13 @@ div#sssh_finishedButton {\n   border: none;\n   box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n   background: none;\n+  border-radius: 4px;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzc2NDg3MA=="}, "originalCommit": {"oid": "7e9f5f3e6d38383680ba7a2bfc3f1d7eb3c22553"}, "originalPosition": 127}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0NTM3NDI5OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/src/com/tle/web/searching/selection/SearchSelectable.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwNToyNDo0MVrOHtz-iQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwNToyNDo0MVrOHtz-iQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzc5OTU2MQ==", "bodyText": "I'm just wondering how this may inadvertently affect clients who are not using the new ui?\nI can't think of any specific examples, but it might be safe to check if the new UI is enabled before using this path?", "url": "https://github.com/openequella/openEQUELLA/pull/2437#discussion_r517799561", "createdAt": "2020-11-05T05:24:41Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/src/com/tle/web/searching/selection/SearchSelectable.java", "diffHunk": "@@ -50,7 +50,7 @@ public SectionInfo createSectionInfo(SectionInfo info, SelectionSession session)\n \n   @SuppressWarnings(\"nls\")\n   protected SectionInfo getSearchTree(SectionInfo info) {\n-    return controller.createForward(info, \"/searching.do\");\n+    return controller.createForward(info, \"/selectoradd/searching.do\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adc09192d6b064403c861df6b90433df0f8328e1"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1747, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}