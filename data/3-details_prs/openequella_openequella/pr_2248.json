{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2Nzg4NDk3", "number": 2248, "title": "Fix migration issue caused by 'RemoveLastKnownUserConstraint'", "bodyText": "#2210\nChecklist\n\n the [contributor license agreement][] is signed\n commit message follows [commit guidelines]\n tests are included\n screenshots are included showing significant UI changes\n documentation is changed or added\n\nDescription of change\nThe PR fixes the bug about failing to upgrade from 2019.2.4 or 2020.1.3 to 2020.2 . The approach is to let 2020.2 replace both  v20192 and v20201 of RemoveLastKnownUserConstraint  with the v20202 one.\nI can locally upgrade from 2019.2.4 to 2020.2 and upgrade from 2020.1.3 to 2020.2 without the errors.", "createdAt": "2020-09-01T03:48:24Z", "url": "https://github.com/openequella/openEQUELLA/pull/2248", "merged": true, "mergeCommit": {"oid": "88ca508eb6aca4aab9c6c81b4ff7f8e5d124acb8"}, "closed": true, "closedAt": "2020-09-02T23:05:57Z", "author": {"login": "PenghaiZhang"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEe-RTAH2gAyNDc2Nzg4NDk3OmFmNzQxYmRjMDdmYzk5ZjFkM2Y4ODA3ZTg4NzQzMTZjNjcyZjA0MTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdExxNlAFqTQ4MDI5NTkwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "af741bdc07fc99f1d3f8807e8874316c672f0419", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/af741bdc07fc99f1d3f8807e8874316c672f0419", "committedDate": "2020-09-01T03:38:06Z", "message": "Make migration v20192 and v20201 of RemoveLastKnownUserConstraint known\nto 2020.2."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMjM3ODEx", "url": "https://github.com/openequella/openEQUELLA/pull/2248#pullrequestreview-480237811", "createdAt": "2020-09-02T00:52:44Z", "commit": {"oid": "af741bdc07fc99f1d3f8807e8874316c672f0419"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQwMDo1Mjo0NFrOHLNODg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQwMDo1Mjo0NFrOHLNODg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTUxMjk3NA==", "bodyText": "Probably make these 'date's match those in the original versions for the sake of historical consistency.", "url": "https://github.com/openequella/openEQUELLA/pull/2248#discussion_r481512974", "createdAt": "2020-09-02T00:52:44Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/plugin-jpf.xml", "diffHunk": "@@ -6024,6 +6024,19 @@\n     <parameter id=\"bean\" value=\"bean:com.tle.core.institution.migration.v20202.CreateFacetedSearchClassificationTable\" />\n     <parameter id=\"date\" value=\"2020-04-22\" />\n   </extension>\n+  <!-- Let 2020.2 know v20192 and v20201 of RemoveLastKnownUserConstraint-->\n+  <extension plugin-id=\"com.tle.core.migration\" point-id=\"migration\" id=\"RemoveLastKnownUserConstraint20192\">\n+    <parameter id=\"id\" value=\"com.tle.core.institution.migration.v20192.RemoveLastKnownUserConstraint\" />\n+    <parameter id=\"bean\" value=\"bean:com.tle.core.institution.migration.v20192.RemoveLastKnownUserConstraint\" />\n+    <parameter id=\"date\" value=\"2020-08-31\" />\n+    <parameter id=\"obsoletedby\" value=\"com.tle.core.institution.migration.v20202.RemoveLastKnownUserConstraint\" />\n+  </extension>\n+  <extension plugin-id=\"com.tle.core.migration\" point-id=\"migration\" id=\"RemoveLastKnownUserConstraint20201\">\n+    <parameter id=\"id\" value=\"com.tle.core.institution.migration.v20201.RemoveLastKnownUserConstraint\" />\n+    <parameter id=\"bean\" value=\"bean:com.tle.core.institution.migration.v20201.RemoveLastKnownUserConstraint\" />\n+    <parameter id=\"date\" value=\"2020-08-31\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af741bdc07fc99f1d3f8807e8874316c672f0419"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1dda9b7a455e496fbc485f8fba5c37b06c20a672", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/1dda9b7a455e496fbc485f8fba5c37b06c20a672", "committedDate": "2020-09-02T00:57:06Z", "message": "Update the dates of obsoleted migration 'RemoveLastKnownUserConstraint'.+"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMjk1OTA0", "url": "https://github.com/openequella/openEQUELLA/pull/2248#pullrequestreview-480295904", "createdAt": "2020-09-02T01:32:02Z", "commit": {"oid": "1dda9b7a455e496fbc485f8fba5c37b06c20a672"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 431, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}