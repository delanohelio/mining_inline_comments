{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzODEwNTcy", "number": 2338, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMTowNToxN1rOEn5HuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwNDoyODoyM1rOEn6zzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwMjY1Nzg1OnYy", "diffSide": "RIGHT", "path": "oeq-ts-rest-api/src/UserQuery.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMTowNToxN1rOHYrs4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMTowNToxN1rOHYrs4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY0Mzg3Mg==", "bodyText": "No need to put the type info in the comment. So this (and the below three) can be:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              /** String array of User IDs to lookup. */\n          \n          \n            \n              /** User IDs to lookup. */\n          \n      \n    \n    \n  \n\nOr if you want more, keep it abstract:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              /** String array of User IDs to lookup. */\n          \n          \n            \n              /** List of User IDs to lookup. */", "url": "https://github.com/openequella/openEQUELLA/pull/2338#discussion_r495643872", "createdAt": "2020-09-28T01:05:17Z", "author": {"login": "edalex-ian"}, "path": "oeq-ts-rest-api/src/UserQuery.ts", "diffHunk": "@@ -61,6 +61,15 @@ export interface SearchParams {\n   users: boolean;\n }\n \n+export interface LookupParams {\n+  /** String array of User IDs to lookup. */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3ae10b45b92b700c8a3ca0f5989521ca2cff450"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwMjY2MTQ0OnYy", "diffSide": "RIGHT", "path": "oeq-ts-rest-api/src/UserQuery.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMTowODowOVrOHYruvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMTowODowOVrOHYruvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY0NDM0OQ==", "bodyText": "Be good to highlight in this description how this is different from search().", "url": "https://github.com/openequella/openEQUELLA/pull/2338#discussion_r495644349", "createdAt": "2020-09-28T01:08:09Z", "author": {"login": "edalex-ian"}, "path": "oeq-ts-rest-api/src/UserQuery.ts", "diffHunk": "@@ -81,3 +90,18 @@ export const search = (\n     isSearchResult,\n     params\n   );\n+\n+/**\n+ * Lookup for users and related entities (i.e. groups and roles).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3ae10b45b92b700c8a3ca0f5989521ca2cff450"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwMjY2Mjc4OnYy", "diffSide": "RIGHT", "path": "oeq-ts-rest-api/src/AxiosInstance.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMTowOToyNVrOHYrvgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMTo0MjozNlrOHYsG_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY0NDU0NA==", "bodyText": "Please include support for a validator here (like in GET).", "url": "https://github.com/openequella/openEQUELLA/pull/2338#discussion_r495644544", "createdAt": "2020-09-28T01:09:25Z", "author": {"login": "edalex-ian"}, "path": "oeq-ts-rest-api/src/AxiosInstance.ts", "diffHunk": "@@ -68,4 +68,10 @@ export const PUT = <T, R>(path: string, data?: T): Promise<R> =>\n     .then((response: AxiosResponse<R>) => response.data)\n     .catch(catchHandler);\n \n+export const POST = <T, R>(path: string, data?: T): Promise<R> =>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3ae10b45b92b700c8a3ca0f5989521ca2cff450"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1MDU1Ng==", "bodyText": "Ok, I will give it a go", "url": "https://github.com/openequella/openEQUELLA/pull/2338#discussion_r495650556", "createdAt": "2020-09-28T01:42:36Z", "author": {"login": "mrblippy"}, "path": "oeq-ts-rest-api/src/AxiosInstance.ts", "diffHunk": "@@ -68,4 +68,10 @@ export const PUT = <T, R>(path: string, data?: T): Promise<R> =>\n     .then((response: AxiosResponse<R>) => response.data)\n     .catch(catchHandler);\n \n+export const POST = <T, R>(path: string, data?: T): Promise<R> =>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY0NDU0NA=="}, "originalCommit": {"oid": "b3ae10b45b92b700c8a3ca0f5989521ca2cff450"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwMjY2MzQzOnYy", "diffSide": "RIGHT", "path": "oeq-ts-rest-api/src/UserQuery.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMTowOTo1NlrOHYrv3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMTowOTo1NlrOHYrv3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY0NDYzNw==", "bodyText": "Once you add support for a validator to POST, you want to add that in here too.", "url": "https://github.com/openequella/openEQUELLA/pull/2338#discussion_r495644637", "createdAt": "2020-09-28T01:09:56Z", "author": {"login": "edalex-ian"}, "path": "oeq-ts-rest-api/src/UserQuery.ts", "diffHunk": "@@ -81,3 +90,18 @@ export const search = (\n     isSearchResult,\n     params\n   );\n+\n+/**\n+ * Lookup for users and related entities (i.e. groups and roles).\n+ *\n+ * @param apiBasePath Base URI to the oEQ institution and API\n+ * @param params Query parameters to customize result\n+ */\n+export const lookup = (\n+  apiBasePath: string,\n+  params: LookupParams\n+): Promise<SearchResult> =>\n+  POST<LookupParams, SearchResult>(\n+    apiBasePath + USERQUERY_ROOT_PATH + '/lookup',\n+    params\n+  );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3ae10b45b92b700c8a3ca0f5989521ca2cff450"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwMjkzNDUyOnYy", "diffSide": "RIGHT", "path": "oeq-ts-rest-api/src/AxiosInstance.ts", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwNDoyODoyM1rOHYuGJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwNToxNjowMVrOHYutgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY4MzEwOQ==", "bodyText": "Do we know that the AxiosResponse contains R yet?\nI though that is what validator on line 87 is for?\nmight it be unknown at this point in time?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                .then((response: AxiosResponse<R>) => {\n          \n          \n            \n                .then((response: AxiosResponse<unknown>) => {", "url": "https://github.com/openequella/openEQUELLA/pull/2338#discussion_r495683109", "createdAt": "2020-09-28T04:28:23Z", "author": {"login": "ChristianMurphy"}, "path": "oeq-ts-rest-api/src/AxiosInstance.ts", "diffHunk": "@@ -68,4 +68,29 @@ export const PUT = <T, R>(path: string, data?: T): Promise<R> =>\n     .then((response: AxiosResponse<R>) => response.data)\n     .catch(catchHandler);\n \n+/**\n+ * Executes a HTTP POST for a given path.\n+ *\n+ * @param path The URL path for the target POST\n+ * @param validator A function to perform runtime type checking against the result - typically with typescript-is\n+ * @param data The data to be sent in POST request\n+ */\n+export const POST = <T, R>(\n+  path: string,\n+  validator: (data: unknown) => data is R,\n+  data?: T\n+): Promise<R> =>\n+  axios\n+    .post(path, data)\n+    .then((response: AxiosResponse<R>) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "91c576e2830e2a48909d8a1a779a5ab078911ce5"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY5Mjc3MA==", "bodyText": "Good catch. \ud83d\udc4d", "url": "https://github.com/openequella/openEQUELLA/pull/2338#discussion_r495692770", "createdAt": "2020-09-28T05:14:15Z", "author": {"login": "edalex-ian"}, "path": "oeq-ts-rest-api/src/AxiosInstance.ts", "diffHunk": "@@ -68,4 +68,29 @@ export const PUT = <T, R>(path: string, data?: T): Promise<R> =>\n     .then((response: AxiosResponse<R>) => response.data)\n     .catch(catchHandler);\n \n+/**\n+ * Executes a HTTP POST for a given path.\n+ *\n+ * @param path The URL path for the target POST\n+ * @param validator A function to perform runtime type checking against the result - typically with typescript-is\n+ * @param data The data to be sent in POST request\n+ */\n+export const POST = <T, R>(\n+  path: string,\n+  validator: (data: unknown) => data is R,\n+  data?: T\n+): Promise<R> =>\n+  axios\n+    .post(path, data)\n+    .then((response: AxiosResponse<R>) => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY4MzEwOQ=="}, "originalCommit": {"oid": "91c576e2830e2a48909d8a1a779a5ab078911ce5"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY5MzE4Nw==", "bodyText": "Oh yes, i didn't update that after putting the validator in.  Thank you @ChristianMurphy", "url": "https://github.com/openequella/openEQUELLA/pull/2338#discussion_r495693187", "createdAt": "2020-09-28T05:16:01Z", "author": {"login": "mrblippy"}, "path": "oeq-ts-rest-api/src/AxiosInstance.ts", "diffHunk": "@@ -68,4 +68,29 @@ export const PUT = <T, R>(path: string, data?: T): Promise<R> =>\n     .then((response: AxiosResponse<R>) => response.data)\n     .catch(catchHandler);\n \n+/**\n+ * Executes a HTTP POST for a given path.\n+ *\n+ * @param path The URL path for the target POST\n+ * @param validator A function to perform runtime type checking against the result - typically with typescript-is\n+ * @param data The data to be sent in POST request\n+ */\n+export const POST = <T, R>(\n+  path: string,\n+  validator: (data: unknown) => data is R,\n+  data?: T\n+): Promise<R> =>\n+  axios\n+    .post(path, data)\n+    .then((response: AxiosResponse<R>) => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY4MzEwOQ=="}, "originalCommit": {"oid": "91c576e2830e2a48909d8a1a779a5ab078911ce5"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1819, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}