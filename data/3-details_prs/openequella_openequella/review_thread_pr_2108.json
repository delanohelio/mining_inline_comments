{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2ODg2NTU3", "number": 2108, "reviewThreads": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNDozODoxN1rOESO60Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwODo0Njo0MFrOEVupjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTU0MjU3OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNDozODoxN1rOG3TY0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNDozODoxN1rOG3TY0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY0MjUxNA==", "bodyText": "Something is a amiss here. length and/or available should be matching numberOfResults. But I'm gather the fact they're not means the test is doing something rather odd. \ud83e\udd14", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r460642514", "createdAt": "2020-07-27T04:38:17Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "diffHunk": "@@ -285,3 +286,32 @@ exports.getSearchResult = {\n     },\n   ],\n };\n+\n+exports.getSearchResultsCustom = (numberOfResults) => {\n+  const { v4: uuidv4 } = require(\"uuid\");\n+  let results = [];\n+\n+  for (let i = 0; i < numberOfResults; i++) {\n+    let currentResult = {\n+      uuid: uuidv4(),\n+      name: `item ${i}`,\n+      version: 1,\n+      status: \"live\",\n+      createdDate: new Date(\"2020-07-10T09:31:08.557+10:00\"),\n+      modifiedDate: new Date(\"2020-07-10T09:31:08.557+10:00\"),\n+      collectionId: \"9a1ddb24-6bf5-db3d-d8fe-4fca20ecf69c\",\n+      commentCount: 0,\n+      attachments: [],\n+      thumbnail: \"initial\",\n+      displayFields: [],\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/266bb0ff-a730-4658-aec0-c68bbefc227c/1/\",\n+        self:\n+          \"http://localhost:8080/rest/api/item/266bb0ff-a730-4658-aec0-c68bbefc227c/1/\",\n+      },\n+    };\n+    results.push(currentResult);\n+  }\n+  return { start: 0, length: 10, available: 30, results };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTU1MzU1OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNDo0NTo1N1rOG3TfFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNDo0NTo1N1rOG3TfFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY0NDExNw==", "bodyText": "It'd be nice to see this function done more declaratively rather than imperatively. To do so (using lodash) you'd probably end up with something like:\nconst { v4: uuidv4 } = require(\"uuid\");\nexports.getSearchResultsCustom = (numberOfResults) =>\n  {\n    start: 0,\n    length: 10,\n    available: 30,\n    _.range(numberOfResults).map( (i) => {\n      uuid: uuidv4(),\n      name: `item ${i}`,\n      version: 1,\n      status: \"live\",\n      createdDate: new Date(\"2020-07-10T09:31:08.557+10:00\"),\n      modifiedDate: new Date(\"2020-07-10T09:31:08.557+10:00\"),\n      collectionId: \"9a1ddb24-6bf5-db3d-d8fe-4fca20ecf69c\",\n      commentCount: 0,\n      attachments: [],\n      thumbnail: \"initial\",\n      displayFields: [],\n      links: {\n        view:\n          \"http://localhost:8080/rest/items/266bb0ff-a730-4658-aec0-c68bbefc227c/1/\",\n        self:\n          \"http://localhost:8080/rest/api/item/266bb0ff-a730-4658-aec0-c68bbefc227c/1/\",\n      },\n  };\nMakes for less error prone code. But that said, as per comment below I'm not sure what's going on with start/length/available here. So YMMV.", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r460644117", "createdAt": "2020-07-27T04:45:57Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "diffHunk": "@@ -285,3 +286,32 @@ exports.getSearchResult = {\n     },\n   ],\n };\n+\n+exports.getSearchResultsCustom = (numberOfResults) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTU2OTM2OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchPagination.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNDo1NTo0MFrOG3Tn0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNDo1NTo0MFrOG3Tn0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY0NjM1Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                const isFirstPage = currentPage == 0;\n          \n          \n            \n                const isFirstPage = currentPage === 0;", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r460646352", "createdAt": "2020-07-27T04:55:40Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchPagination.tsx", "diffHunk": "@@ -46,6 +59,68 @@ export const SearchPagination = ({\n       onChangeRowsPerPage={(event) =>\n         onRowsPerPageChange(parseInt(event.target.value))\n       }\n+      ActionsComponent={PaginationActions}\n     />\n   );\n+\n+  /**\n+   * Provides pagination navigation controls.\n+   * @return {ReactElement} IconButtons for navigating to First, Previous, Next, and Last Page of results\n+   */\n+  function PaginationActions() {\n+    const theme = createMuiTheme();\n+\n+    const numberOfPages = () => {\n+      return Math.ceil(count / rowsPerPage);\n+    };\n+    const isFirstPage = currentPage == 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTU3MDEzOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchPagination.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNDo1NjoxOFrOG3ToVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNDo1NjoxOFrOG3ToVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY0NjQ4NQ==", "bodyText": "No need for braces and return:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                const numberOfPages = () => {\n          \n          \n            \n                  return Math.ceil(count / rowsPerPage);\n          \n          \n            \n                };\n          \n          \n            \n                const numberOfPages = () => Math.ceil(count / rowsPerPage);\n          \n      \n    \n    \n  \n\nMay also want to consider whether you need a function. Could it just be a constant of:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                const numberOfPages = () => {\n          \n          \n            \n                  return Math.ceil(count / rowsPerPage);\n          \n          \n            \n                };\n          \n          \n            \n                const numberOfPages = Math.ceil(count / rowsPerPage);", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r460646485", "createdAt": "2020-07-27T04:56:18Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchPagination.tsx", "diffHunk": "@@ -46,6 +59,68 @@ export const SearchPagination = ({\n       onChangeRowsPerPage={(event) =>\n         onRowsPerPageChange(parseInt(event.target.value))\n       }\n+      ActionsComponent={PaginationActions}\n     />\n   );\n+\n+  /**\n+   * Provides pagination navigation controls.\n+   * @return {ReactElement} IconButtons for navigating to First, Previous, Next, and Last Page of results\n+   */\n+  function PaginationActions() {\n+    const theme = createMuiTheme();\n+\n+    const numberOfPages = () => {\n+      return Math.ceil(count / rowsPerPage);\n+    };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTU3NTk4OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNTowMDowMlrOG3TryQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNTowMDowMlrOG3TryQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY0NzM2OQ==", "bodyText": "All these ats make for brittle code. It'd be better to throw an ID on each button, and then simply do component.find('#prevPageButton').", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r460647369", "createdAt": "2020-07-27T05:00:02Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,52 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n+    await querySearch(\"\");\n+    component.update();\n     const prevPageButton = component\n       .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n+      .at(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTU3Nzg0OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNTowMTowOFrOG3Ts3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNDo1Nzo1OVrOG76NsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY0NzY0Ng==", "bodyText": "This test mentions 'results', but it's only checking the content of the paging control. What if the results are still showing the first page?", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r460647646", "createdAt": "2020-07-27T05:01:08Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,52 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n+    await querySearch(\"\");\n+    component.update();\n     const prevPageButton = component\n       .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n+      .at(1);\n     const nextPageButton = component\n       .find(\".MuiTablePagination-actions button\")\n+      .at(2);\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n       .at(1);\n     await awaitAct(() => nextPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"11-12 of 12\");\n+    expect(pageCount.text()).toContain(\"11-12 of 12\");\n+    await querySearch(\"\");\n+    component.update();\n     await awaitAct(() => prevPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    expect(pageCount.text()).toContain(\"1-10 of 12\");\n+  });\n+\n+  it(\"should support navigating to first/last page of results\", async () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ3Mjk0NQ==", "bodyText": "Yeah, this test isn't as exhaustive as it could be. In the interests of time. I'm leaving this as-is for now. The SerachPage test likely needs to be rewritten to support the paging. But we can revisit in thre future", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r465472945", "createdAt": "2020-08-05T04:57:59Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,52 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n+    await querySearch(\"\");\n+    component.update();\n     const prevPageButton = component\n       .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n+      .at(1);\n     const nextPageButton = component\n       .find(\".MuiTablePagination-actions button\")\n+      .at(2);\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n       .at(1);\n     await awaitAct(() => nextPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"11-12 of 12\");\n+    expect(pageCount.text()).toContain(\"11-12 of 12\");\n+    await querySearch(\"\");\n+    component.update();\n     await awaitAct(() => prevPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    expect(pageCount.text()).toContain(\"1-10 of 12\");\n+  });\n+\n+  it(\"should support navigating to first/last page of results\", async () => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY0NzY0Ng=="}, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTYwMTUxOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToxNjozMlrOG3T60w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNDo0ODowN1rOG76Cpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1MTIxOQ==", "bodyText": "Is this necessary? What caused this to be added?", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r460651219", "createdAt": "2020-07-27T05:16:32Z", "author": {"login": "SammyIsConfused"}, "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "diffHunk": "@@ -1,3 +1,4 @@\n+// @ts-nocheck", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ3MDExOA==", "bodyText": "If that's not added Typescript gives type errors for the getSearchResultsCustom arrow function, (even though it's a .js file)", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r465470118", "createdAt": "2020-08-05T04:48:07Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "diffHunk": "@@ -1,3 +1,4 @@\n+// @ts-nocheck", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1MTIxOQ=="}, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTYwNTE0OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToxODo1NFrOG3T81w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNToxNzoyNlrOG76img==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1MTczNQ==", "bodyText": "This .find chain seems very fragile. Is there a better way to find it with IDs?", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r460651735", "createdAt": "2020-07-27T05:18:54Z", "author": {"login": "SammyIsConfused"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -150,7 +151,11 @@ describe(\"<SearchPage/>\", () => {\n \n   it(\"should support changing the number of items displayed per page\", async () => {\n     // Initial items per page is 10\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ3MTE5OQ==", "bodyText": "It doesn't appear to be straightforward way to give that element an ID. We are going to revisit this SearchPage test in the future. So this code isn't likely to stay the same for very long", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r465471199", "createdAt": "2020-08-05T04:51:53Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -150,7 +151,11 @@ describe(\"<SearchPage/>\", () => {\n \n   it(\"should support changing the number of items displayed per page\", async () => {\n     // Initial items per page is 10\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1MTczNQ=="}, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ3ODI5OA==", "bodyText": "You should be about to do \".MuiTablePagination-toolbar > p\" in the first .find() rather than two finds. That returns all <p/> tags that are direct children of .MuiTablePagination-toolbar (unless it isn't a direct child in which case your solution is better).", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r465478298", "createdAt": "2020-08-05T05:17:26Z", "author": {"login": "SammyIsConfused"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -150,7 +151,11 @@ describe(\"<SearchPage/>\", () => {\n \n   it(\"should support changing the number of items displayed per page\", async () => {\n     // Initial items per page is 10\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1MTczNQ=="}, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTYwNjYxOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToxOTo1MFrOG3T9vQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToxOTo1MFrOG3T9vQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1MTk2NQ==", "bodyText": "This string is used multiple times. Should be a constant.", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r460651965", "createdAt": "2020-07-27T05:19:50Z", "author": {"login": "SammyIsConfused"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,52 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n+    await querySearch(\"\");\n+    component.update();\n     const prevPageButton = component\n       .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n+      .at(1);\n     const nextPageButton = component\n       .find(\".MuiTablePagination-actions button\")\n+      .at(2);\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n       .at(1);\n     await awaitAct(() => nextPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"11-12 of 12\");\n+    expect(pageCount.text()).toContain(\"11-12 of 12\");\n+    await querySearch(\"\");\n+    component.update();\n     await awaitAct(() => prevPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    expect(pageCount.text()).toContain(\"1-10 of 12\");\n+  });\n+\n+  it(\"should support navigating to first/last page of results\", async () => {\n+    mockSearch.mockImplementation(() =>\n+      Promise.resolve(getSearchResultsCustom(30))\n+    );\n+    await querySearch(\"\");\n+    component.update();\n+    const firstPageButton = component\n+      .find(\".MuiTablePagination-actions button\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTYxMTk1OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToyMjo1NFrOG3UA4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNDo1MzozMlrOG76IsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1Mjc3MQ==", "bodyText": "I'm not sure the component update is necessary here. The querysearch already has a wait.", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r460652771", "createdAt": "2020-07-27T05:22:54Z", "author": {"login": "SammyIsConfused"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,52 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n+    await querySearch(\"\");\n+    component.update();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ3MTY2NQ==", "bodyText": "That's what I thought too. But this is the only way I could get it to work", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r465471665", "createdAt": "2020-08-05T04:53:32Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,52 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n+    await querySearch(\"\");\n+    component.update();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1Mjc3MQ=="}, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTYxMjE2OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToyMzowOVrOG3UBDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToyMzowOVrOG3UBDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1MjgxNQ==", "bodyText": "As above.", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r460652815", "createdAt": "2020-07-27T05:23:09Z", "author": {"login": "SammyIsConfused"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,52 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n+    await querySearch(\"\");\n+    component.update();\n     const prevPageButton = component\n       .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n+      .at(1);\n     const nextPageButton = component\n       .find(\".MuiTablePagination-actions button\")\n+      .at(2);\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n       .at(1);\n     await awaitAct(() => nextPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"11-12 of 12\");\n+    expect(pageCount.text()).toContain(\"11-12 of 12\");\n+    await querySearch(\"\");\n+    component.update();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTYxMjQ4OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToyMzoyMlrOG3UBQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToyMzoyMlrOG3UBQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1Mjg2Ng==", "bodyText": "As above.", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r460652866", "createdAt": "2020-07-27T05:23:22Z", "author": {"login": "SammyIsConfused"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,52 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n+    await querySearch(\"\");\n+    component.update();\n     const prevPageButton = component\n       .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n+      .at(1);\n     const nextPageButton = component\n       .find(\".MuiTablePagination-actions button\")\n+      .at(2);\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n       .at(1);\n     await awaitAct(() => nextPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"11-12 of 12\");\n+    expect(pageCount.text()).toContain(\"11-12 of 12\");\n+    await querySearch(\"\");\n+    component.update();\n     await awaitAct(() => prevPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    expect(pageCount.text()).toContain(\"1-10 of 12\");\n+  });\n+\n+  it(\"should support navigating to first/last page of results\", async () => {\n+    mockSearch.mockImplementation(() =>\n+      Promise.resolve(getSearchResultsCustom(30))\n+    );\n+    await querySearch(\"\");\n+    component.update();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTYxMjg2OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToyMzozMlrOG3UBcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToyMzozMlrOG3UBcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1MjkxNA==", "bodyText": "As above.", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r460652914", "createdAt": "2020-07-27T05:23:32Z", "author": {"login": "SammyIsConfused"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,52 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n+    await querySearch(\"\");\n+    component.update();\n     const prevPageButton = component\n       .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n+      .at(1);\n     const nextPageButton = component\n       .find(\".MuiTablePagination-actions button\")\n+      .at(2);\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n       .at(1);\n     await awaitAct(() => nextPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"11-12 of 12\");\n+    expect(pageCount.text()).toContain(\"11-12 of 12\");\n+    await querySearch(\"\");\n+    component.update();\n     await awaitAct(() => prevPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    expect(pageCount.text()).toContain(\"1-10 of 12\");\n+  });\n+\n+  it(\"should support navigating to first/last page of results\", async () => {\n+    mockSearch.mockImplementation(() =>\n+      Promise.resolve(getSearchResultsCustom(30))\n+    );\n+    await querySearch(\"\");\n+    component.update();\n+    const firstPageButton = component\n+      .find(\".MuiTablePagination-actions button\")\n+      .at(0);\n+    const lastPageButton = component\n+      .find(\".MuiTablePagination-actions button\")\n+      .at(3);\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n+      .at(1);\n+    await awaitAct(() => lastPageButton.simulate(\"click\"));\n+    expect(pageCount.text()).toContain(\"21-30 of 30\");\n+    await querySearch(\"\");\n+    component.update();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTYxNzU1OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchPagination.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToyNjozNlrOG3UELg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToyNjozNlrOG3UELg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1MzYxNA==", "bodyText": "Similar to the consts on 76 and 77, could these values passed into onPageChange be named?\nEg\nconst lastPage = Math.max(0, numberOfPages() -1;\n......\nonClick = {() => onPageChange(lastPage))}", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r460653614", "createdAt": "2020-07-27T05:26:36Z", "author": {"login": "SammyIsConfused"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchPagination.tsx", "diffHunk": "@@ -46,6 +59,68 @@ export const SearchPagination = ({\n       onChangeRowsPerPage={(event) =>\n         onRowsPerPageChange(parseInt(event.target.value))\n       }\n+      ActionsComponent={PaginationActions}\n     />\n   );\n+\n+  /**\n+   * Provides pagination navigation controls.\n+   * @return {ReactElement} IconButtons for navigating to First, Previous, Next, and Last Page of results\n+   */\n+  function PaginationActions() {\n+    const theme = createMuiTheme();\n+\n+    const numberOfPages = () => {\n+      return Math.ceil(count / rowsPerPage);\n+    };\n+    const isFirstPage = currentPage == 0;\n+    const isLastPage = currentPage >= numberOfPages() - 1;\n+\n+    return (\n+      <Grid\n+        container\n+        direction=\"row\"\n+        justify=\"center\"\n+        wrap=\"nowrap\"\n+        style={{ marginLeft: theme.spacing(2) }}\n+      >\n+        <Grid item>\n+          <IconButton\n+            onClick={() => onPageChange(0)}\n+            disabled={isFirstPage}\n+            aria-label={paginationStrings.firstPageButton}\n+          >\n+            <FirstPage />\n+          </IconButton>\n+        </Grid>\n+        <Grid item>\n+          <IconButton\n+            onClick={() => onPageChange(currentPage - 1)}\n+            aria-label={paginationStrings.previousPageButton}\n+            disabled={isFirstPage}\n+          >\n+            <KeyboardArrowLeft />\n+          </IconButton>\n+        </Grid>\n+        <Grid item>\n+          <IconButton\n+            onClick={() => onPageChange(currentPage + 1)}\n+            aria-label={paginationStrings.nextPageButton}\n+            disabled={isLastPage}\n+          >\n+            <KeyboardArrowRight />\n+          </IconButton>\n+        </Grid>\n+        <Grid item>\n+          <IconButton\n+            onClick={() => onPageChange(Math.max(0, numberOfPages() - 1))}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 95}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3OTUzNzY1OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchPagination.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwMToxNTo0NVrOG35EpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNTowMDoyOVrOG76Qdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1OTk0MA==", "bodyText": "other parts of the code leverage makeStyles, would it make sense to use that here as well?", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r461259940", "createdAt": "2020-07-28T01:15:45Z", "author": {"login": "ChristianMurphy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchPagination.tsx", "diffHunk": "@@ -46,6 +59,68 @@ export const SearchPagination = ({\n       onChangeRowsPerPage={(event) =>\n         onRowsPerPageChange(parseInt(event.target.value))\n       }\n+      ActionsComponent={PaginationActions}\n     />\n   );\n+\n+  /**\n+   * Provides pagination navigation controls.\n+   * @return {ReactElement} IconButtons for navigating to First, Previous, Next, and Last Page of results\n+   */\n+  function PaginationActions() {\n+    const theme = createMuiTheme();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ3MzY1NA==", "bodyText": "I didn't include makeStyles in this case, because there was only one single inline style, but i needed to get the spacing unit for that inline style", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r465473654", "createdAt": "2020-08-05T05:00:29Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchPagination.tsx", "diffHunk": "@@ -46,6 +59,68 @@ export const SearchPagination = ({\n       onChangeRowsPerPage={(event) =>\n         onRowsPerPageChange(parseInt(event.target.value))\n       }\n+      ActionsComponent={PaginationActions}\n     />\n   );\n+\n+  /**\n+   * Provides pagination navigation controls.\n+   * @return {ReactElement} IconButtons for navigating to First, Previous, Next, and Last Page of results\n+   */\n+  function PaginationActions() {\n+    const theme = createMuiTheme();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1OTk0MA=="}, "originalCommit": {"oid": "26b7d10d329deb854b80f37f7e1f25d7c6c79017"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMTA4OTA0OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMDoyOTo0OVrOG8fFdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwODo0NDoyOFrOG8pQdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA3NzA0NQ==", "bodyText": "I'm must've missed this before. But.... Should this URL use the UUID being used for this item? Or maybe these URLs aren't really relevant in this context. \ud83e\udd14", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466077045", "createdAt": "2020-08-06T00:29:49Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "diffHunk": "@@ -285,3 +287,30 @@ exports.getSearchResult = {\n     },\n   ],\n };\n+\n+const { v4: uuidv4 } = require(\"uuid\");\n+const _ = require(\"lodash\");\n+exports.getSearchResultsCustom = (numberOfResults) => ({\n+  start: 0,\n+  length: 10,\n+  available: 30,\n+  results: _.range(numberOfResults).map((i) => ({\n+    uuid: uuidv4(),\n+    name: `item ${i}`,\n+    version: 1,\n+    status: \"live\",\n+    createdDate: new Date(\"2020-07-10T09:31:08.557+10:00\"),\n+    modifiedDate: new Date(\"2020-07-10T09:31:08.557+10:00\"),\n+    collectionId: \"9a1ddb24-6bf5-db3d-d8fe-4fca20ecf69c\",\n+    commentCount: 0,\n+    attachments: [],\n+    thumbnail: \"initial\",\n+    displayFields: [],\n+    links: {\n+      view:\n+        \"http://localhost:8080/rest/items/266bb0ff-a730-4658-aec0-c68bbefc227c/1/\",\n+      self:\n+        \"http://localhost:8080/rest/api/item/266bb0ff-a730-4658-aec0-c68bbefc227c/1/\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8813f5ca12a422718e7e7ddd325cfec62e5ce75e"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjEyNjU0Mw==", "bodyText": "At the moment they aren't relevant, or used at all in this context", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466126543", "createdAt": "2020-08-06T03:39:43Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "diffHunk": "@@ -285,3 +287,30 @@ exports.getSearchResult = {\n     },\n   ],\n };\n+\n+const { v4: uuidv4 } = require(\"uuid\");\n+const _ = require(\"lodash\");\n+exports.getSearchResultsCustom = (numberOfResults) => ({\n+  start: 0,\n+  length: 10,\n+  available: 30,\n+  results: _.range(numberOfResults).map((i) => ({\n+    uuid: uuidv4(),\n+    name: `item ${i}`,\n+    version: 1,\n+    status: \"live\",\n+    createdDate: new Date(\"2020-07-10T09:31:08.557+10:00\"),\n+    modifiedDate: new Date(\"2020-07-10T09:31:08.557+10:00\"),\n+    collectionId: \"9a1ddb24-6bf5-db3d-d8fe-4fca20ecf69c\",\n+    commentCount: 0,\n+    attachments: [],\n+    thumbnail: \"initial\",\n+    displayFields: [],\n+    links: {\n+      view:\n+        \"http://localhost:8080/rest/items/266bb0ff-a730-4658-aec0-c68bbefc227c/1/\",\n+      self:\n+        \"http://localhost:8080/rest/api/item/266bb0ff-a730-4658-aec0-c68bbefc227c/1/\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA3NzA0NQ=="}, "originalCommit": {"oid": "8813f5ca12a422718e7e7ddd325cfec62e5ce75e"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjEzMDY5Mw==", "bodyText": "Also, the hardcoded results used inside the pre-existing getSearchResult function has the same issue", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466130693", "createdAt": "2020-08-06T03:55:53Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "diffHunk": "@@ -285,3 +287,30 @@ exports.getSearchResult = {\n     },\n   ],\n };\n+\n+const { v4: uuidv4 } = require(\"uuid\");\n+const _ = require(\"lodash\");\n+exports.getSearchResultsCustom = (numberOfResults) => ({\n+  start: 0,\n+  length: 10,\n+  available: 30,\n+  results: _.range(numberOfResults).map((i) => ({\n+    uuid: uuidv4(),\n+    name: `item ${i}`,\n+    version: 1,\n+    status: \"live\",\n+    createdDate: new Date(\"2020-07-10T09:31:08.557+10:00\"),\n+    modifiedDate: new Date(\"2020-07-10T09:31:08.557+10:00\"),\n+    collectionId: \"9a1ddb24-6bf5-db3d-d8fe-4fca20ecf69c\",\n+    commentCount: 0,\n+    attachments: [],\n+    thumbnail: \"initial\",\n+    displayFields: [],\n+    links: {\n+      view:\n+        \"http://localhost:8080/rest/items/266bb0ff-a730-4658-aec0-c68bbefc227c/1/\",\n+      self:\n+        \"http://localhost:8080/rest/api/item/266bb0ff-a730-4658-aec0-c68bbefc227c/1/\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA3NzA0NQ=="}, "originalCommit": {"oid": "8813f5ca12a422718e7e7ddd325cfec62e5ce75e"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjI0MzcwMg==", "bodyText": "Cool, fine to leave for now then.", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466243702", "createdAt": "2020-08-06T08:44:28Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "diffHunk": "@@ -285,3 +287,30 @@ exports.getSearchResult = {\n     },\n   ],\n };\n+\n+const { v4: uuidv4 } = require(\"uuid\");\n+const _ = require(\"lodash\");\n+exports.getSearchResultsCustom = (numberOfResults) => ({\n+  start: 0,\n+  length: 10,\n+  available: 30,\n+  results: _.range(numberOfResults).map((i) => ({\n+    uuid: uuidv4(),\n+    name: `item ${i}`,\n+    version: 1,\n+    status: \"live\",\n+    createdDate: new Date(\"2020-07-10T09:31:08.557+10:00\"),\n+    modifiedDate: new Date(\"2020-07-10T09:31:08.557+10:00\"),\n+    collectionId: \"9a1ddb24-6bf5-db3d-d8fe-4fca20ecf69c\",\n+    commentCount: 0,\n+    attachments: [],\n+    thumbnail: \"initial\",\n+    displayFields: [],\n+    links: {\n+      view:\n+        \"http://localhost:8080/rest/items/266bb0ff-a730-4658-aec0-c68bbefc227c/1/\",\n+      self:\n+        \"http://localhost:8080/rest/api/item/266bb0ff-a730-4658-aec0-c68bbefc227c/1/\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA3NzA0NQ=="}, "originalCommit": {"oid": "8813f5ca12a422718e7e7ddd325cfec62e5ce75e"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMTA5MTAzOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMDozMDo1MVrOG8fGmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwODo0NDoxMVrOG8pP1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA3NzMzOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              length: 10,\n          \n          \n            \n              length: numberOfResults,", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466077338", "createdAt": "2020-08-06T00:30:51Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "diffHunk": "@@ -285,3 +287,30 @@ exports.getSearchResult = {\n     },\n   ],\n };\n+\n+const { v4: uuidv4 } = require(\"uuid\");\n+const _ = require(\"lodash\");\n+exports.getSearchResultsCustom = (numberOfResults) => ({\n+  start: 0,\n+  length: 10,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8813f5ca12a422718e7e7ddd325cfec62e5ce75e"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjI0MzU0Mw==", "bodyText": "It seems you've done it to available rather than here on length. available from server represents total available on server, however length === results.length. So hence here length === numberOfResults.", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466243543", "createdAt": "2020-08-06T08:44:11Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__mocks__/getSearchResult.js", "diffHunk": "@@ -285,3 +287,30 @@ exports.getSearchResult = {\n     },\n   ],\n };\n+\n+const { v4: uuidv4 } = require(\"uuid\");\n+const _ = require(\"lodash\");\n+exports.getSearchResultsCustom = (numberOfResults) => ({\n+  start: 0,\n+  length: 10,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA3NzMzOA=="}, "originalCommit": {"oid": "8813f5ca12a422718e7e7ddd325cfec62e5ce75e"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMTExMDA5OnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMDo0MTowN1rOG8fRMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMTozMjozOFrOG8vpQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA4MDA0OQ==", "bodyText": "This is repeated from above. How about a function such as:\nconst paginatorControls = (component: ReactWrapper) => [\n  component.find(\"#firstPageButton button\"),\n  component.find(\"#lastPageButton button\"),\n  component\n    .find(\".MuiTablePagination-toolbar\")\n    .find(\"p\")\n    .at(1)\n];\nThen you could simply use it with\nconst [firstPageButton, lastPageButton, pageCount] = paginatorControls(component);\nArguably, that function could sit over in SearchPagination.test.tsx and also be used over there. And now if that paginator changes later, we have all this handling in one nice place.", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466080049", "createdAt": "2020-08-06T00:41:07Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,45 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n-    const prevPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n-    const nextPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n+    await querySearch(\"\");\n+    component.update();\n+    const prevPageButton = component.find(\"#previousPageButton button\");\n+    const nextPageButton = component.find(\"#nextPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n       .at(1);\n     await awaitAct(() => nextPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"11-12 of 12\");\n+    expect(pageCount.text()).toContain(\"11-12 of 12\");\n+    await querySearch(\"\");\n+    component.update();\n     await awaitAct(() => prevPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    expect(pageCount.text()).toContain(\"1-10 of 12\");\n+  });\n+\n+  it(\"should support navigating to first/last page of results\", async () => {\n+    mockSearch.mockImplementation(() =>\n+      Promise.resolve(getSearchResultsCustom(30))\n+    );\n+\n+    await querySearch(\"\");\n+    component.update();\n+    const firstPageButton = component.find(\"#firstPageButton button\");\n+    const lastPageButton = component.find(\"#lastPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n+      .at(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8813f5ca12a422718e7e7ddd325cfec62e5ce75e"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjEyNjcyNQ==", "bodyText": "That is indeed a good idea", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466126725", "createdAt": "2020-08-06T03:40:15Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,45 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n-    const prevPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n-    const nextPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n+    await querySearch(\"\");\n+    component.update();\n+    const prevPageButton = component.find(\"#previousPageButton button\");\n+    const nextPageButton = component.find(\"#nextPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n       .at(1);\n     await awaitAct(() => nextPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"11-12 of 12\");\n+    expect(pageCount.text()).toContain(\"11-12 of 12\");\n+    await querySearch(\"\");\n+    component.update();\n     await awaitAct(() => prevPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    expect(pageCount.text()).toContain(\"1-10 of 12\");\n+  });\n+\n+  it(\"should support navigating to first/last page of results\", async () => {\n+    mockSearch.mockImplementation(() =>\n+      Promise.resolve(getSearchResultsCustom(30))\n+    );\n+\n+    await querySearch(\"\");\n+    component.update();\n+    const firstPageButton = component.find(\"#firstPageButton button\");\n+    const lastPageButton = component.find(\"#lastPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n+      .at(1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA4MDA0OQ=="}, "originalCommit": {"oid": "8813f5ca12a422718e7e7ddd325cfec62e5ce75e"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjEzMDg3Nw==", "bodyText": "And is easier to read than what I had", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466130877", "createdAt": "2020-08-06T03:56:36Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,45 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n-    const prevPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n-    const nextPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n+    await querySearch(\"\");\n+    component.update();\n+    const prevPageButton = component.find(\"#previousPageButton button\");\n+    const nextPageButton = component.find(\"#nextPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n       .at(1);\n     await awaitAct(() => nextPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"11-12 of 12\");\n+    expect(pageCount.text()).toContain(\"11-12 of 12\");\n+    await querySearch(\"\");\n+    component.update();\n     await awaitAct(() => prevPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    expect(pageCount.text()).toContain(\"1-10 of 12\");\n+  });\n+\n+  it(\"should support navigating to first/last page of results\", async () => {\n+    mockSearch.mockImplementation(() =>\n+      Promise.resolve(getSearchResultsCustom(30))\n+    );\n+\n+    await querySearch(\"\");\n+    component.update();\n+    const firstPageButton = component.find(\"#firstPageButton button\");\n+    const lastPageButton = component.find(\"#lastPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n+      .at(1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA4MDA0OQ=="}, "originalCommit": {"oid": "8813f5ca12a422718e7e7ddd325cfec62e5ce75e"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE2OTAzNw==", "bodyText": "I tried adding/exporting that function in SearchPagination.test\nBut eslint is yelling at me:\n22:1  error  Do not export from a test file  jest/no-export\nI guess that function could just be in a regular .tsx file?", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466169037", "createdAt": "2020-08-06T06:15:16Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,45 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n-    const prevPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n-    const nextPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n+    await querySearch(\"\");\n+    component.update();\n+    const prevPageButton = component.find(\"#previousPageButton button\");\n+    const nextPageButton = component.find(\"#nextPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n       .at(1);\n     await awaitAct(() => nextPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"11-12 of 12\");\n+    expect(pageCount.text()).toContain(\"11-12 of 12\");\n+    await querySearch(\"\");\n+    component.update();\n     await awaitAct(() => prevPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    expect(pageCount.text()).toContain(\"1-10 of 12\");\n+  });\n+\n+  it(\"should support navigating to first/last page of results\", async () => {\n+    mockSearch.mockImplementation(() =>\n+      Promise.resolve(getSearchResultsCustom(30))\n+    );\n+\n+    await querySearch(\"\");\n+    component.update();\n+    const firstPageButton = component.find(\"#firstPageButton button\");\n+    const lastPageButton = component.find(\"#lastPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n+      .at(1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA4MDA0OQ=="}, "originalCommit": {"oid": "8813f5ca12a422718e7e7ddd325cfec62e5ce75e"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE3MTM1OQ==", "bodyText": "Ah drats!\nHow about we create a plain ol' TS file alongside (no need for TSX). SearchPaginationTestHelper.ts? I wonder if the eslint rule will be cool with that. \ud83e\udd14\nAs it happens, I'm hoping to do the same for the OwnerSelector so that I can also share back to SearchPage.test.tsx.", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466171359", "createdAt": "2020-08-06T06:22:00Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,45 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n-    const prevPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n-    const nextPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n+    await querySearch(\"\");\n+    component.update();\n+    const prevPageButton = component.find(\"#previousPageButton button\");\n+    const nextPageButton = component.find(\"#nextPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n       .at(1);\n     await awaitAct(() => nextPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"11-12 of 12\");\n+    expect(pageCount.text()).toContain(\"11-12 of 12\");\n+    await querySearch(\"\");\n+    component.update();\n     await awaitAct(() => prevPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    expect(pageCount.text()).toContain(\"1-10 of 12\");\n+  });\n+\n+  it(\"should support navigating to first/last page of results\", async () => {\n+    mockSearch.mockImplementation(() =>\n+      Promise.resolve(getSearchResultsCustom(30))\n+    );\n+\n+    await querySearch(\"\");\n+    component.update();\n+    const firstPageButton = component.find(\"#firstPageButton button\");\n+    const lastPageButton = component.find(\"#lastPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n+      .at(1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA4MDA0OQ=="}, "originalCommit": {"oid": "8813f5ca12a422718e7e7ddd325cfec62e5ce75e"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE3Mjk1MA==", "bodyText": "Yeah, I will give that a go", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466172950", "createdAt": "2020-08-06T06:26:44Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,45 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n-    const prevPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n-    const nextPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n+    await querySearch(\"\");\n+    component.update();\n+    const prevPageButton = component.find(\"#previousPageButton button\");\n+    const nextPageButton = component.find(\"#nextPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n       .at(1);\n     await awaitAct(() => nextPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"11-12 of 12\");\n+    expect(pageCount.text()).toContain(\"11-12 of 12\");\n+    await querySearch(\"\");\n+    component.update();\n     await awaitAct(() => prevPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    expect(pageCount.text()).toContain(\"1-10 of 12\");\n+  });\n+\n+  it(\"should support navigating to first/last page of results\", async () => {\n+    mockSearch.mockImplementation(() =>\n+      Promise.resolve(getSearchResultsCustom(30))\n+    );\n+\n+    await querySearch(\"\");\n+    component.update();\n+    const firstPageButton = component.find(\"#firstPageButton button\");\n+    const lastPageButton = component.find(\"#lastPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n+      .at(1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA4MDA0OQ=="}, "originalCommit": {"oid": "8813f5ca12a422718e7e7ddd325cfec62e5ce75e"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE4MTY4NA==", "bodyText": "Yep, that worked", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466181684", "createdAt": "2020-08-06T06:49:01Z", "author": {"login": "mrblippy"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,45 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n-    const prevPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n-    const nextPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n+    await querySearch(\"\");\n+    component.update();\n+    const prevPageButton = component.find(\"#previousPageButton button\");\n+    const nextPageButton = component.find(\"#nextPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n       .at(1);\n     await awaitAct(() => nextPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"11-12 of 12\");\n+    expect(pageCount.text()).toContain(\"11-12 of 12\");\n+    await querySearch(\"\");\n+    component.update();\n     await awaitAct(() => prevPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    expect(pageCount.text()).toContain(\"1-10 of 12\");\n+  });\n+\n+  it(\"should support navigating to first/last page of results\", async () => {\n+    mockSearch.mockImplementation(() =>\n+      Promise.resolve(getSearchResultsCustom(30))\n+    );\n+\n+    await querySearch(\"\");\n+    component.update();\n+    const firstPageButton = component.find(\"#firstPageButton button\");\n+    const lastPageButton = component.find(\"#lastPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n+      .at(1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA4MDA0OQ=="}, "originalCommit": {"oid": "8813f5ca12a422718e7e7ddd325cfec62e5ce75e"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM0ODM1Mw==", "bodyText": "Did it work when you did a full npm run test?\nBecause when I just did similar locally that failed with Jest trying to run the utility class as a test. :'(", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466348353", "createdAt": "2020-08-06T11:32:38Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/search/SearchPage.test.tsx", "diffHunk": "@@ -161,20 +166,45 @@ describe(\"<SearchPage/>\", () => {\n       ...defaultSearchOptions,\n       rowsPerPage: 25,\n     });\n-    expect(component.html()).toContain(\"1-12 of 12\");\n+    expect(pageCount.text()).toContain(\"1-12 of 12\");\n   });\n \n   it(\"should support navigating to previous/next page\", async () => {\n-    const prevPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n-      .at(0);\n-    const nextPageButton = component\n-      .find(\".MuiTablePagination-actions button\")\n+    await querySearch(\"\");\n+    component.update();\n+    const prevPageButton = component.find(\"#previousPageButton button\");\n+    const nextPageButton = component.find(\"#nextPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n       .at(1);\n     await awaitAct(() => nextPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"11-12 of 12\");\n+    expect(pageCount.text()).toContain(\"11-12 of 12\");\n+    await querySearch(\"\");\n+    component.update();\n     await awaitAct(() => prevPageButton.simulate(\"click\"));\n-    expect(component.html()).toContain(\"1-10 of 12\");\n+    expect(pageCount.text()).toContain(\"1-10 of 12\");\n+  });\n+\n+  it(\"should support navigating to first/last page of results\", async () => {\n+    mockSearch.mockImplementation(() =>\n+      Promise.resolve(getSearchResultsCustom(30))\n+    );\n+\n+    await querySearch(\"\");\n+    component.update();\n+    const firstPageButton = component.find(\"#firstPageButton button\");\n+    const lastPageButton = component.find(\"#lastPageButton button\");\n+    const pageCount = component\n+      .find(\".MuiTablePagination-toolbar\")\n+      .find(\"p\")\n+      .at(1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA4MDA0OQ=="}, "originalCommit": {"oid": "8813f5ca12a422718e7e7ddd325cfec62e5ce75e"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMjE5ODUyOnYy", "diffSide": "RIGHT", "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/components/SearchPaginationTestHelper.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwODo0Njo0MFrOG8pVnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwODo0Njo0MFrOG8pVnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjI0NTAyMA==", "bodyText": "Needs JSDoc.\nAlso, seeing how many there are now, this would probably be helped to have an interface and return an object. It also make it more readable where you're chosing to skip the first few and you're doing things like [, , , nextPageButton] = ....", "url": "https://github.com/openequella/openEQUELLA/pull/2108#discussion_r466245020", "createdAt": "2020-08-06T08:46:40Z", "author": {"login": "edalex-ian"}, "path": "Source/Plugins/Core/com.equella.core/js/__tests__/tsrc/components/SearchPaginationTestHelper.ts", "diffHunk": "@@ -0,0 +1,26 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import { ReactWrapper } from \"enzyme\";\n+\n+export const paginatorControls = (component: ReactWrapper) => [", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2277cfdad7356732d408648de9032b8f2d15822"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1171, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}