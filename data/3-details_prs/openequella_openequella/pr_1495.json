{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NTE2MDMw", "number": 1495, "title": "Fix \"no tree for xxx\" error caused by favourite search links", "bodyText": "#1280\nChecklist\n\n the [contributor license agreement] is signed\n commit message follows [commit guidelines]\n\nDescription of change\nAfter discussing with @mrblippy , we think the best fix is to check and rewrite the URL of favourite searches because it doesn't require data migration. Maybe there are different approaches, but some significant changes would be required.\nIn terms of why the redirection Servlet not working, it is probably because clicking the favourite search link triggers a tree check before it sends the request.", "createdAt": "2020-02-20T02:25:38Z", "url": "https://github.com/openequella/openEQUELLA/pull/1495", "merged": true, "mergeCommit": {"oid": "eb8e9b7b6a167a7a469423ee71370212f40ad32f"}, "closed": true, "closedAt": "2020-02-24T02:04:06Z", "author": {"login": "PenghaiZhang"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGBdRFAH2gAyMzc3NTE2MDMwOjY4MDgyYmU3YjdjODkyMzVkOGFjZTE1OTUzMjNlY2FhZGVmMjdlNDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGT1lQgFqTM2MjMxMjE0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "68082be7b7c89235d8ace1595323ecaadef27e40", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/68082be7b7c89235d8ace1595323ecaadef27e40", "committedDate": "2020-02-20T02:11:30Z", "message": "Fix \"no tree for xxx\" error caused by favourite search links"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49ae6050c8930cb9652703bb2732034ce00bd9d8", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/49ae6050c8930cb9652703bb2732034ce00bd9d8", "committedDate": "2020-02-20T04:00:14Z", "message": "Only rewrite the url when the favourite search is added from the Search page"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNjIxNzAz", "url": "https://github.com/openequella/openEQUELLA/pull/1495#pullrequestreview-361621703", "createdAt": "2020-02-20T04:08:05Z", "commit": {"oid": "49ae6050c8930cb9652703bb2732034ce00bd9d8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyMjg4Nzc2", "url": "https://github.com/openequella/openEQUELLA/pull/1495#pullrequestreview-362288776", "createdAt": "2020-02-20T22:44:38Z", "commit": {"oid": "49ae6050c8930cb9652703bb2732034ce00bd9d8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQyMjo0NDozOVrOFslyaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQyMjo1MTozNlrOFsl82A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjMwMDc3OQ==", "bodyText": "The beans should really just be basic getters and setters.  I would move this logic into FavouriteSearchServiceImpl.executeSearch (the only place getUrl is called)", "url": "https://github.com/openequella/openEQUELLA/pull/1495#discussion_r382300779", "createdAt": "2020-02-20T22:44:39Z", "author": {"login": "abidingotter"}, "path": "Source/Plugins/Core/com.equella.core/src/com/tle/core/favourites/bean/FavouriteSearch.java", "diffHunk": "@@ -86,6 +87,13 @@ public void setName(String name) {\n   }\n \n   public String getUrl() {\n+    // The value of 'url' starts with '/access' if the fav search was added in old oEQ versions,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49ae6050c8930cb9652703bb2732034ce00bd9d8"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjMwMzQ0OA==", "bodyText": "Also note that WebConstants.CLOUDSEARCH_PAGE and WebConstants.HIERARCHY_PAGE need to be checked too, since you can favourite those as well.", "url": "https://github.com/openequella/openEQUELLA/pull/1495#discussion_r382303448", "createdAt": "2020-02-20T22:51:36Z", "author": {"login": "abidingotter"}, "path": "Source/Plugins/Core/com.equella.core/src/com/tle/core/favourites/bean/FavouriteSearch.java", "diffHunk": "@@ -86,6 +87,13 @@ public void setName(String name) {\n   }\n \n   public String getUrl() {\n+    // The value of 'url' starts with '/access' if the fav search was added in old oEQ versions,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjMwMDc3OQ=="}, "originalCommit": {"oid": "49ae6050c8930cb9652703bb2732034ce00bd9d8"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1194644b889f4fb4f58905cb2cffd77df2dca26b", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/1194644b889f4fb4f58905cb2cffd77df2dca26b", "committedDate": "2020-02-20T23:28:03Z", "message": "Also check favourite Hierarchy searcj and Cloud search"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11e960181db02b496a98a8869771ea92e34ecc71", "author": {"user": {"login": "PenghaiZhang", "name": null}}, "url": "https://github.com/openequella/openEQUELLA/commit/11e960181db02b496a98a8869771ea92e34ecc71", "committedDate": "2020-02-20T23:31:23Z", "message": "Rewrite comments."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyMzEyMTQx", "url": "https://github.com/openequella/openEQUELLA/pull/1495#pullrequestreview-362312141", "createdAt": "2020-02-20T23:36:21Z", "commit": {"oid": "11e960181db02b496a98a8869771ea92e34ecc71"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 264, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}