{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwMTI3NDIy", "number": 330, "title": "New command API", "bodyText": "Introduces a new command framework that supports both legacy String[] args commands and 1.13+ Brigadier commands.\nAs discussed in #329 (comment) and #232, the current command framework lacks support for new command features. This PR adds 3 subinterfaces to Command: BrigadierCommand, LegacyCommand and RawCommand. All execution-related methods such as execute and hasPermission now take a single CommandInvocation argument that includes the command source and additional execution metadata such as the String[] args for legacy commands.\nTODO:\n\n Decide on command execution context name. Candidates so far are CommandExecutionContext, CommandContext and CommandInvocation\n Move built-in commands to Brigadier\n Test all the things!!1!\n\n Brigadier aliases as redirects (see Mojang/brigadier#46, do we need to create our own redirects system?)", "createdAt": "2020-07-16T11:39:35Z", "url": "https://github.com/VelocityPowered/Velocity/pull/330", "merged": true, "mergeCommit": {"oid": "6cc6e0f6414270feb79caf91240df813597dd92c"}, "closed": true, "closedAt": "2020-07-29T07:43:17Z", "author": {"login": "hugmanrique"}, "timelineItems": {"totalCount": 79, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1dfipAH2gAyNDUwMTI3NDIyOjVhNTY4MDA4ZjUyYTczNTNkZjExOGVmNzU4MzkyYWI0ODliNWViYjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc4wm4OgH2gAyNDUwMTI3NDIyOjBmNjRhNGFjYzliZGVjMGY5NzM0OWUwNTdlYzgwYTg4MmZhNDdjOWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5a568008f52a7353df118ef758392ab489b5ebb3", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/5a568008f52a7353df118ef758392ab489b5ebb3", "committedDate": "2020-07-16T11:25:46Z", "message": "New command API start"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "962b609f8ffa1b856dcccbdb99942388dcda823b", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/962b609f8ffa1b856dcccbdb99942388dcda823b", "committedDate": "2020-07-16T11:42:51Z", "message": "Legacy arguments are non-null"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f110ad0cfd7270cc4270a4b7dc72f84cd85e96d", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/6f110ad0cfd7270cc4270a4b7dc72f84cd85e96d", "committedDate": "2020-07-16T11:51:54Z", "message": "Remove unneeded constant"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b242d36210eb776c465804654bd7374bcf5cc32", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/3b242d36210eb776c465804654bd7374bcf5cc32", "committedDate": "2020-07-16T13:06:52Z", "message": "RawCommand interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a117cb46e067423e0bdc2d9b360ab3335801c2ff", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/a117cb46e067423e0bdc2d9b360ab3335801c2ff", "committedDate": "2020-07-16T16:19:47Z", "message": "Merge branch 'dev/1.1.0' of github.com:VelocityPowered/Velocity into feat/new-command-api"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMDQxOTY5", "url": "https://github.com/VelocityPowered/Velocity/pull/330#pullrequestreview-450041969", "createdAt": "2020-07-16T17:01:29Z", "commit": {"oid": "3b242d36210eb776c465804654bd7374bcf5cc32"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNzowMToyOVrOGy0HrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNzowODo0NVrOGy0YTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkzNTkxNg==", "bodyText": "A command that uses Brigadier for parsing the command and providing suggestions to the client.", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r455935916", "createdAt": "2020-07-16T17:01:29Z", "author": {"login": "astei"}, "path": "api/src/main/java/com/velocitypowered/api/newcommand/BrigadierCommand.java", "diffHunk": "@@ -0,0 +1,45 @@\n+package com.velocitypowered.api.newcommand;\n+\n+import com.mojang.brigadier.exceptions.CommandSyntaxException;\n+import com.mojang.brigadier.suggestion.SuggestionProvider;\n+import com.mojang.brigadier.suggestion.Suggestions;\n+import com.mojang.brigadier.tree.LiteralCommandNode;\n+import com.velocitypowered.api.command.CommandSource;\n+\n+/**\n+ * A command that uses the Brigadier library for parsing.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b242d36210eb776c465804654bd7374bcf5cc32"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkzNzE3OA==", "bodyText": "I think this is a good idea", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r455937178", "createdAt": "2020-07-16T17:03:42Z", "author": {"login": "astei"}, "path": "api/src/main/java/com/velocitypowered/api/newcommand/Command.java", "diffHunk": "@@ -0,0 +1,67 @@\n+package com.velocitypowered.api.newcommand;\n+\n+import com.velocitypowered.api.command.CommandSource;\n+import com.velocitypowered.api.proxy.Player;\n+\n+/**\n+ * Represents a command that can be executed by a {@link CommandSource},\n+ * such as a {@link Player} or the console.\n+ *\n+ * @param <C> the type of the execution context\n+ */\n+public interface Command<C extends CommandExecutionContext> {\n+\n+    /**\n+     * Represents the command type, which determines\n+     * its parsing capabilities.\n+     */\n+    // TODO Introduce CommandMeta and move there?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b242d36210eb776c465804654bd7374bcf5cc32"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkzOTgzMQ==", "bodyText": "The previous Javadoc description should have read Unregisters the specified alias from the command manager.", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r455939831", "createdAt": "2020-07-16T17:08:07Z", "author": {"login": "astei"}, "path": "api/src/main/java/com/velocitypowered/api/newcommand/CommandManager.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package com.velocitypowered.api.newcommand;\n+\n+import com.velocitypowered.api.command.CommandSource;\n+import com.velocitypowered.api.event.command.CommandExecuteEvent;\n+import java.util.concurrent.CompletableFuture;\n+\n+/**\n+ * Registers and executes commands.\n+ */\n+public interface CommandManager {\n+\n+    /**\n+     * Registers the specified command.\n+     *\n+     * @param command the command to register\n+     */\n+    void register(Command<?> command);\n+\n+    /**\n+     * Unregisters the specified command.\n+     *\n+     * @param command the command to unregister\n+     */\n+    void unregister(Command<?> command);\n+\n+    /**\n+     * Unregisters the command with the specified alias.\n+     *\n+     * @param alias the alias of the command\n+     */\n+    // TODO Previous javadoc is ambiguous, does this unregister all the aliases of the command,\n+    // or just the given alias?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b242d36210eb776c465804654bd7374bcf5cc32"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk0MDE3Mg==", "bodyText": "Is this some kind of local change you made? We don't build on Windows.", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r455940172", "createdAt": "2020-07-16T17:08:45Z", "author": {"login": "astei"}, "path": "build.gradle", "diffHunk": "@@ -30,7 +30,7 @@ allprojects {\n         getCurrentShortRevision = {\n             new ByteArrayOutputStream().withStream { os ->\n                 exec {\n-                    executable = \"git\"\n+                    executable = \"git.bat\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b242d36210eb776c465804654bd7374bcf5cc32"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f8f25e566b7e5742035a0cc179d6d04af1f1103", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/0f8f25e566b7e5742035a0cc179d6d04af1f1103", "committedDate": "2020-07-16T18:32:24Z", "message": "Add command builders and remove Command.Type enum"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7afbb9617902a5ef8f70370fe97b471991871211", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/7afbb9617902a5ef8f70370fe97b471991871211", "committedDate": "2020-07-16T18:39:10Z", "message": "Improve CommandManager javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMTE2OTAz", "url": "https://github.com/VelocityPowered/Velocity/pull/330#pullrequestreview-450116903", "createdAt": "2020-07-16T18:42:43Z", "commit": {"oid": "7afbb9617902a5ef8f70370fe97b471991871211"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxODo0Mjo0M1rOGy3z3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxODo0Mjo0M1rOGy3z3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk5NjM4MQ==", "bodyText": "Question: As this presently stands this would break the API. I assume you just want to put the API in front of users before you add any backwards compatibility?", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r455996381", "createdAt": "2020-07-16T18:42:43Z", "author": {"login": "astei"}, "path": "api/src/main/java/com/velocitypowered/api/command/CommandManager.java", "diffHunk": "@@ -1,87 +1,60 @@\n package com.velocitypowered.api.command;\n \n+import com.velocitypowered.api.event.command.CommandExecuteEvent;\n import java.util.concurrent.CompletableFuture;\n \n /**\n- * Represents an interface to register a command executor with the proxy.\n+ * Handles the registration and execution of commands.\n  */\n public interface CommandManager {\n \n   /**\n-   * Registers the specified command with the manager with the specified aliases.\n+   * Returns a builder to register a {@link LegacyCommand}.\n    *\n-   * @param command the command to register\n-   * @param aliases the alias to use\n-   *\n-   * @deprecated This method requires at least one alias, but this is only enforced at runtime.\n-   *             Prefer {@link #register(String, Command, String...)} instead.\n+   * @return a legacy command builder\n    */\n-  @Deprecated\n-  void register(Command command, String... aliases);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afbb9617902a5ef8f70370fe97b471991871211"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMTE4NzMy", "url": "https://github.com/VelocityPowered/Velocity/pull/330#pullrequestreview-450118732", "createdAt": "2020-07-16T18:45:19Z", "commit": {"oid": "7afbb9617902a5ef8f70370fe97b471991871211"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxODo0NToxOVrOGy35Qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxODo0NToxOVrOGy35Qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk5Nzc2Mw==", "bodyText": "I'm thinking of replacing this consumer by a LegacyCommandExecutor functional interface (I think) users are more familiarized with.", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r455997763", "createdAt": "2020-07-16T18:45:19Z", "author": {"login": "hugmanrique"}, "path": "api/src/main/java/com/velocitypowered/api/command/LegacyCommand.java", "diffHunk": "@@ -0,0 +1,31 @@\n+package com.velocitypowered.api.command;\n+\n+import java.util.function.Consumer;\n+\n+/**\n+ * A legacy 1.12-style command.\n+ */\n+public interface LegacyCommand extends Command<LegacyCommandExecutionContext> {\n+\n+  /**\n+   * Provides a fluent interface to register a legacy command.\n+   */\n+  interface Builder extends Command.Builder<LegacyCommand, Builder> {\n+\n+    /**\n+     * Specifies additional aliases that can be used to execute the command.\n+     *\n+     * @param aliases the command aliases\n+     * @return this builder, for chaining\n+     */\n+    Builder aliases(String... aliases);\n+\n+    /**\n+     * Registers the command with the specified execution handler.\n+     *\n+     * @param onExecute the execution handler\n+     * @return the registered command\n+     */\n+    LegacyCommand register(Consumer<LegacyCommandExecutionContext> onExecute);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afbb9617902a5ef8f70370fe97b471991871211"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11ecb8d3b59fe845babf9b4adbb2df0ad753551f", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/11ecb8d3b59fe845babf9b4adbb2df0ad753551f", "committedDate": "2020-07-16T19:12:12Z", "message": "Minimize API breakage\n\nThe main concern is the context type parameter added to the Command\ninterface. According to\nhttps://wiki.eclipse.org/Evolving_Java-based_APIs_2#Evolving_API_interfaces_-_API_methods\nthis is binary compatible due to Java's handling of raw types.\n\nAlso adds back the CommandManager#register methods."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "786e337c9a427f5b28cbe1b33ebf31eb25d50d54", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/786e337c9a427f5b28cbe1b33ebf31eb25d50d54", "committedDate": "2020-07-16T19:23:16Z", "message": "Re-add LegacyCommand to facilitate migration\n\nIs there a better name for this?"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5e882b13d4c063eff55168cc04ff33e284648a5", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/f5e882b13d4c063eff55168cc04ff33e284648a5", "committedDate": "2020-07-17T13:19:31Z", "message": "Command execution & context building\n\nRegistration not yet implemented. Removes the legacy builder, users can\ndirectly implement LegacyCommand as they do right now with the Command\ninterface."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "543dfda61bdb52edfad0719b62195aa820a4f708", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/543dfda61bdb52edfad0719b62195aa820a4f708", "committedDate": "2020-07-17T13:21:01Z", "message": "Fix unintended type parameter change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "708984b5226bec1e68d872461a03efb409962eb6", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/708984b5226bec1e68d872461a03efb409962eb6", "committedDate": "2020-07-17T19:03:10Z", "message": "Execution, suggestions & permissions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fad75974773d887ce7bc42a5b2beba1a194da3a", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/8fad75974773d887ce7bc42a5b2beba1a194da3a", "committedDate": "2020-07-17T19:41:53Z", "message": "s/CommandExecutionContext/CommandInvocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1e7952cf240c1e1826ae5afee34642aadcb3f9d", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/b1e7952cf240c1e1826ae5afee34642aadcb3f9d", "committedDate": "2020-07-17T19:48:20Z", "message": "Re-add async suggestions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc1c07e4ab4a4b4f3a088f1d005bae0fe62433fa", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/dc1c07e4ab4a4b4f3a088f1d005bae0fe62433fa", "committedDate": "2020-07-17T19:55:07Z", "message": "Document CommandInvocationFactory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "065d1af4d6371f84f9bb6b92c95a4e930b785448", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/065d1af4d6371f84f9bb6b92c95a4e930b785448", "committedDate": "2020-07-17T20:04:16Z", "message": "Clean up invocation implementations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72915505e1d04aca3f6dffa6112dc4832fe9c5b1", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/72915505e1d04aca3f6dffa6112dc4832fe9c5b1", "committedDate": "2020-07-17T20:16:56Z", "message": "Create invocation factory registry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ef06e4808356c448e2762de6f07d0ef3bcc1696", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/6ef06e4808356c448e2762de6f07d0ef3bcc1696", "committedDate": "2020-07-17T20:21:17Z", "message": "Non-Brigadier command registration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0615fd2e038424aca253a879ddd97383fec5b0da", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/0615fd2e038424aca253a879ddd97383fec5b0da", "committedDate": "2020-07-17T20:39:13Z", "message": "Migrate built-in commands\n\nThis went pretty smooth, indicating the migration is going to be\nrelatively easy for plugins. Here's a summary:\n\n- Implement `LegacyCommand` instead of `Command`.\n- Replace the source and args parameters by a single invocation\nargument.\n- Stuff like subcommands can no longer implement (Legacy)Command since\nmost methods expect a context which cannot be built manually."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3b3a198a2a1c28bebd942b6d0d2158c06d72cb7", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/e3b3a198a2a1c28bebd942b6d0d2158c06d72cb7", "committedDate": "2020-07-17T21:09:49Z", "message": "Brigadier commands registration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "046bdaf6fb09aabe9c5e668bb10afc5f266af40c", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/046bdaf6fb09aabe9c5e668bb10afc5f266af40c", "committedDate": "2020-07-17T21:18:03Z", "message": "Brigadier command unregistration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00f7c83326cd8d33b40967893c7cf37640086e00", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/00f7c83326cd8d33b40967893c7cf37640086e00", "committedDate": "2020-07-17T21:33:25Z", "message": "Fix argument-less Brigadier command aliases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e1b8f3760c26c04573f20558fe4d88ee3b7a62f", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/0e1b8f3760c26c04573f20558fe4d88ee3b7a62f", "committedDate": "2020-07-17T21:57:49Z", "message": "Fix checkstyle warnings\n\nIt now compiles, yay!"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e3953a8eb3e3de7e2d05bd4b429560e52d1812a", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/8e3953a8eb3e3de7e2d05bd4b429560e52d1812a", "committedDate": "2020-07-17T22:08:17Z", "message": "Fix incorrect exception message\n\nThe parse results may be invalid (special case for Brigadier)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "609f7779ef58aeb6457cadc1eef57fc065f9af47", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/609f7779ef58aeb6457cadc1eef57fc065f9af47", "committedDate": "2020-07-17T22:10:56Z", "message": "Fix docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwOTkwNjYy", "url": "https://github.com/VelocityPowered/Velocity/pull/330#pullrequestreview-450990662", "createdAt": "2020-07-17T22:41:10Z", "commit": {"oid": "609f7779ef58aeb6457cadc1eef57fc065f9af47"}, "state": "COMMENTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QyMjo0MToxMFrOGzi8eQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QyMjo1MjoxNVrOGzjGpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwMzA5Nw==", "bodyText": "I would like to see some better description on why this is the case. This isn't obvious on first glance.", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r456703097", "createdAt": "2020-07-17T22:41:10Z", "author": {"login": "astei"}, "path": "api/src/main/java/com/velocitypowered/api/command/BrigadierCommand.java", "diffHunk": "@@ -0,0 +1,46 @@\n+package com.velocitypowered.api.command;\n+\n+import com.mojang.brigadier.builder.ArgumentBuilder;\n+import com.mojang.brigadier.builder.LiteralArgumentBuilder;\n+import com.mojang.brigadier.tree.CommandNode;\n+\n+/**\n+ * A command that uses Brigadier for parsing the command and providing\n+ * suggestions to the client.\n+ */\n+public interface BrigadierCommand extends Command<BrigadierCommandInvocation> {\n+\n+  /**\n+   * Returns an {@link ArgumentBuilder} used to specify the structure of", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "609f7779ef58aeb6457cadc1eef57fc065f9af47"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwMzIzNw==", "bodyText": "Returns the result of parsing the given command.", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r456703237", "createdAt": "2020-07-17T22:41:43Z", "author": {"login": "astei"}, "path": "api/src/main/java/com/velocitypowered/api/command/BrigadierCommandInvocation.java", "diffHunk": "@@ -0,0 +1,18 @@\n+package com.velocitypowered.api.command;\n+\n+import com.mojang.brigadier.ParseResults;\n+\n+/**\n+ * Contains the invocation data for a {@link BrigadierCommand}.\n+ */\n+public interface BrigadierCommandInvocation extends CommandInvocation {\n+\n+  /**\n+   * Returns the valid parse results.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "609f7779ef58aeb6457cadc1eef57fc065f9af47"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwMzUxMw==", "bodyText": "Still API-breaking here - is there a better solution?", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r456703513", "createdAt": "2020-07-17T22:42:53Z", "author": {"login": "astei"}, "path": "api/src/main/java/com/velocitypowered/api/command/Command.java", "diffHunk": "@@ -1,59 +1,73 @@\n package com.velocitypowered.api.command;\n \n import com.google.common.collect.ImmutableList;\n+import com.velocitypowered.api.proxy.Player;\n import java.util.List;\n import java.util.concurrent.CompletableFuture;\n-import org.checkerframework.checker.nullness.qual.NonNull;\n \n /**\n- * Represents a command that can be executed by a {@link CommandSource}, such as a {@link\n- * com.velocitypowered.api.proxy.Player} or the console.\n+ * Represents a command that can be executed by a {@link CommandSource}, such as\n+ * a {@link Player} or the console.\n  */\n-public interface Command {\n+public interface Command<I extends CommandInvocation> {\n \n   /**\n-   * Executes the command for the specified {@link CommandSource}.\n+   * Executes the command for the specified invocation.\n    *\n-   * @param source the source of this command\n-   * @param args the arguments for this command\n+   * @param invocation the invocation context\n    */\n-  void execute(CommandSource source, String @NonNull [] args);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "609f7779ef58aeb6457cadc1eef57fc065f9af47"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwNDA4NA==", "bodyText": "A legacy command, modelled after the convention popularized by Bukkit and BungeeCord. Prefer {@code BrigadierCommand} if possible, which is also backwards-compatible with older clients.\nAssuming (of course) that Brigadier support in Velocity does support older clients. Test this perhaps?", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r456704084", "createdAt": "2020-07-17T22:45:23Z", "author": {"login": "astei"}, "path": "api/src/main/java/com/velocitypowered/api/command/LegacyCommand.java", "diffHunk": "@@ -0,0 +1,8 @@\n+package com.velocitypowered.api.command;\n+\n+/**\n+ * A legacy 1.12-style command.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "609f7779ef58aeb6457cadc1eef57fc065f9af47"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwNDMwNA==", "bodyText": "should pass the command and its arguments directly without further processing", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r456704304", "createdAt": "2020-07-17T22:46:19Z", "author": {"login": "astei"}, "path": "api/src/main/java/com/velocitypowered/api/command/RawCommand.java", "diffHunk": "@@ -1,67 +1,10 @@\n package com.velocitypowered.api.command;\n \n-import com.google.common.collect.ImmutableList;\n-import java.util.List;\n-import java.util.concurrent.CompletableFuture;\n-import org.checkerframework.checker.nullness.qual.NonNull;\n-\n /**\n- * A specialized sub-interface of {@code Command} which indicates that the proxy should pass a\n- * raw command to the command. This is useful for bolting on external command frameworks to\n+ * A specialized sub-interface of {@code Command} which indicates that the proxy should pass\n+ * a raw command to the command. This is useful for bolting on external command frameworks to", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "609f7779ef58aeb6457cadc1eef57fc065f9af47"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwNDY3Mw==", "bodyText": "Should explain why we need to use this method.", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r456704673", "createdAt": "2020-07-17T22:47:48Z", "author": {"login": "astei"}, "path": "proxy/src/main/java/com/velocitypowered/proxy/command/VelocityBrigadierCommand.java", "diffHunk": "@@ -0,0 +1,124 @@\n+package com.velocitypowered.proxy.command;\n+\n+import com.google.common.base.Preconditions;\n+import com.google.common.collect.Lists;\n+import com.mojang.brigadier.builder.LiteralArgumentBuilder;\n+import com.mojang.brigadier.context.ParsedCommandNode;\n+import com.mojang.brigadier.exceptions.CommandSyntaxException;\n+import com.mojang.brigadier.suggestion.Suggestion;\n+import com.mojang.brigadier.tree.CommandNode;\n+import com.velocitypowered.api.command.BrigadierCommand;\n+import com.velocitypowered.api.command.BrigadierCommandInvocation;\n+import com.velocitypowered.api.command.CommandSource;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.concurrent.CompletableFuture;\n+\n+final class VelocityBrigadierCommand implements BrigadierCommand {\n+\n+  /**\n+   * Returns a node builder with the given alias to the specified destination node.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "609f7779ef58aeb6457cadc1eef57fc065f9af47"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwNTExNg==", "bodyText": "I would call this field brigadierDispatcher", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r456705116", "createdAt": "2020-07-17T22:49:45Z", "author": {"login": "astei"}, "path": "proxy/src/main/java/com/velocitypowered/proxy/command/VelocityCommandManager.java", "diffHunk": "@@ -20,47 +26,101 @@\n \n public class VelocityCommandManager implements CommandManager {\n \n-  private final Map<String, RawCommand> commands = new HashMap<>();\n+  // `commands` contains all registered command case-insensitive aliases.\n+  // Multiple aliases may map to the same command.\n+  //\n+  // On execution, suggestion offers and permission checks, the corresponding Command object\n+  // is retrieved. Then, a CommandInvocation describing the request is created by\n+  // the invocation factory registry. This object is then passed to the underlying command,\n+  // which may use the Brigadier dispatcher iff it implements BrigadierCommand.\n+  //\n+  // By design, the API doesn't provide CommandInvocation implementations.\n+  // Commands are not meant to be executed directly. Instead, users should\n+  // call CommandManager#execute.\n+\n+  private final Map<String, Command<?>> commands = new HashMap<>();\n+\n+  private final CommandInvocationFactoryRegistry invocationFactory =\n+          new CommandInvocationFactoryRegistry();\n+  private final CommandDispatcher<CommandSource> dispatcher = new CommandDispatcher<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "609f7779ef58aeb6457cadc1eef57fc065f9af47"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwNTcwMA==", "bodyText": "I would like to us to be able to inject proxy commands into tab-complete requests and into the Brigadier command tree if we can.", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r456705700", "createdAt": "2020-07-17T22:52:15Z", "author": {"login": "astei"}, "path": "proxy/src/main/java/com/velocitypowered/proxy/command/VelocityCommandManager.java", "diffHunk": "@@ -69,107 +129,111 @@ public void unregister(final String alias) {\n   }\n \n   @Override\n-  public boolean execute(CommandSource source, String cmdLine) {\n+  public CompletableFuture<Boolean> execute(final CommandSource source, final String cmdLine) {\n     Preconditions.checkNotNull(source, \"source\");\n     Preconditions.checkNotNull(cmdLine, \"cmdLine\");\n \n-    CommandExecuteEvent event = callCommandEvent(source, cmdLine).join();\n-    CommandResult commandResult = event.getResult();\n-    if (commandResult.isForwardToServer() || !commandResult.isAllowed()) {\n-      return false;\n-    }\n-    cmdLine = commandResult.getCommand().orElse(event.getCommand());\n+    return callCommandEvent(source, cmdLine).thenApply(event -> {\n+      CommandResult commandResult = event.getResult();\n+      if (commandResult.isForwardToServer() || !commandResult.isAllowed()) {\n+        return false;\n+      }\n \n-    return executeImmediately(source, cmdLine);\n+      String command = commandResult.getCommand().orElse(event.getCommand());\n+      return executeImmediately0(source, command);\n+    });\n   }\n \n   @Override\n-  public boolean executeImmediately(CommandSource source, String cmdLine) {\n+  public CompletableFuture<Boolean> executeImmediately(final CommandSource source,\n+                                                       final String cmdLine) {\n     Preconditions.checkNotNull(source, \"source\");\n     Preconditions.checkNotNull(cmdLine, \"cmdLine\");\n \n+    return CompletableFuture.supplyAsync(\n+        () -> executeImmediately0(source, cmdLine), eventManager.getService());\n+  }\n+\n+  private <I extends CommandInvocation> boolean executeImmediately0(final CommandSource source,\n+                                                                    final String cmdLine) {\n     String alias = cmdLine;\n     String args = \"\";\n     int firstSpace = cmdLine.indexOf(' ');\n     if (firstSpace != -1) {\n       alias = cmdLine.substring(0, firstSpace);\n       args = cmdLine.substring(firstSpace);\n     }\n-    RawCommand command = commands.get(alias.toLowerCase(Locale.ENGLISH));\n+\n+    Command<I> command = getCommand(alias);\n     if (command == null) {\n       return false;\n     }\n \n+    I invocation = invocationFactory.createInvocation(command, source, alias, args);\n     try {\n-      if (!command.hasPermission(source, args)) {\n+      if (!command.hasPermission(invocation)) {\n         return false;\n       }\n-      command.execute(source, args);\n+\n+      command.execute(invocation);\n       return true;\n-    } catch (Exception e) {\n+    } catch (final Exception e) {\n+      if (e.getCause() instanceof CommandSyntaxException) {\n+        // TODO Send invalid syntax message to player (exception contains details)\n+        return false;\n+      }\n+\n       throw new RuntimeException(\"Unable to invoke command \" + cmdLine + \" for \" + source, e);\n     }\n   }\n \n+  // Suggestions\n \n-  @Override\n-  public CompletableFuture<Boolean> executeAsync(CommandSource source, String cmdLine) {\n-    CompletableFuture<Boolean> result = new CompletableFuture<>();\n-    callCommandEvent(source, cmdLine).thenAccept(event -> {\n-      CommandResult commandResult = event.getResult();\n-      if (commandResult.isForwardToServer() || !commandResult.isAllowed()) {\n-        result.complete(false);\n-      }\n-      String command = commandResult.getCommand().orElse(event.getCommand());\n-      try {\n-        result.complete(executeImmediately(source, command));\n-      } catch (Exception e) {\n-        result.completeExceptionally(e);\n-      }\n-    });\n-    return result;\n-  }\n+  private <I extends CommandInvocation> CompletableFuture<List<String>> offerSuggestions(\n+          final CommandSource source, final String alias, final String args) {\n+    Command<I> command = getCommand(alias);\n+    if (command == null) {\n+      // No such command, so we can't offer any tab complete suggestions.\n+      return CompletableFuture.completedFuture(ImmutableList.of());\n+    }\n \n-  @Override\n-  public CompletableFuture<Boolean> executeImmediatelyAsync(CommandSource source, String cmdLine) {\n-    Preconditions.checkNotNull(source, \"source\");\n-    Preconditions.checkNotNull(cmdLine, \"cmdLine\");\n-    CompletableFuture<Boolean> result = new CompletableFuture<>();\n-    eventManager.getService().execute(() -> {\n-      try {\n-        result.complete(executeImmediately(source, cmdLine));\n-      } catch (Exception e) {\n-        result.completeExceptionally(e);\n+    I invocation = invocationFactory.createInvocation(command, source, alias, args);\n+    try {\n+      if (!command.hasPermission(invocation)) {\n+        return CompletableFuture.completedFuture(ImmutableList.of());\n       }\n-    });\n-    return result;\n-  }\n \n-  public boolean hasCommand(String command) {\n-    return commands.containsKey(command);\n-  }\n+      return command.suggestAsync(invocation).thenApply(ImmutableList::copyOf);\n+    } catch (final Exception e) {\n+      if (e.getCause() instanceof CommandSyntaxException) {\n+        return CompletableFuture.completedFuture(ImmutableList.of());\n+      }\n \n-  public Set<String> getAllRegisteredCommands() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "609f7779ef58aeb6457cadc1eef57fc065f9af47"}, "originalPosition": 260}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f28b7b210f2d577153c7e2998d710d320070dfac", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/f28b7b210f2d577153c7e2998d710d320070dfac", "committedDate": "2020-07-18T11:16:15Z", "message": "Improve docs as suggested"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "503f519b91bdc08ef6149b91cbdbf956a8671b32", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/503f519b91bdc08ef6149b91cbdbf956a8671b32", "committedDate": "2020-07-18T11:16:39Z", "message": "Rename Brigadier dispatcher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eaffb4f9c2c2321049af2f592729199f80f2968f", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/eaffb4f9c2c2321049af2f592729199f80f2968f", "committedDate": "2020-07-18T11:32:06Z", "message": "Fallback to calling deprecated Command methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDUxMzU3", "url": "https://github.com/VelocityPowered/Velocity/pull/330#pullrequestreview-451051357", "createdAt": "2020-07-18T11:39:10Z", "commit": {"oid": "f28b7b210f2d577153c7e2998d710d320070dfac"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMTozOToxMFrOGznuAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMTozOToxMFrOGznuAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc4MTMxNQ==", "bodyText": "<p>For this reason, the legacy {@code execute(CommandSender, String...)}, {@code suggest(CommandSender, String...)}, and {@code hasPermission(CommandSender, String...)} methods are deprecated and will be removed in Velocity 2.0.0. We suggest implementing one of the more specific subinterfaces instead.", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r456781315", "createdAt": "2020-07-18T11:39:10Z", "author": {"login": "astei"}, "path": "api/src/main/java/com/velocitypowered/api/command/Command.java", "diffHunk": "@@ -4,10 +4,35 @@\n import com.velocitypowered.api.proxy.Player;\n import java.util.List;\n import java.util.concurrent.CompletableFuture;\n+import org.checkerframework.checker.nullness.qual.NonNull;\n \n /**\n  * Represents a command that can be executed by a {@link CommandSource}, such as\n  * a {@link Player} or the console.\n+ *\n+ * <p>Velocity 1.1.0 introduces specialized command subinterfaces to separate\n+ * command parsing concerns. These include, in order of preference:\n+ *\n+ * <ul>\n+ * <li>{@link BrigadierCommand}, which supports parameterized arguments and\n+ * specialized execution, tab complete suggestions and permission-checking logic.\n+ *\n+ * <li>{@link LegacyCommand}, modelled after the convention popularized by\n+ * Bukkit and BungeeCord. Older classes directly implementing {@link Command}\n+ * are suggested to migrate to this interface.\n+ *\n+ * <li>{@link RawCommand}, useful for bolting on external command frameworks\n+ * to Velocity.\n+ *\n+ * </ul>\n+ *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f28b7b210f2d577153c7e2998d710d320070dfac"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a3e4c483a25a2f12dbc8cc482592f2f10de2aeb", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/1a3e4c483a25a2f12dbc8cc482592f2f10de2aeb", "committedDate": "2020-07-18T11:45:40Z", "message": "Fix factory lookup\n\nThis is pretty ugly, I'm looking for solutions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abce7a4727dcba788c6afca7341463c335f49068", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/abce7a4727dcba788c6afca7341463c335f49068", "committedDate": "2020-07-18T11:48:19Z", "message": "Javadoc suggestion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32b8045a146fe7933ba26fe05dcf500b56413db7", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/32b8045a146fe7933ba26fe05dcf500b56413db7", "committedDate": "2020-07-18T12:34:13Z", "message": "Command builder tests start\n\nI already found 2 subtle bugs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "018ec5eed7415f20b6869ace1203f474db3bc4f6", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/018ec5eed7415f20b6869ace1203f474db3bc4f6", "committedDate": "2020-07-18T12:36:05Z", "message": "Also register main node"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf3dc6f7bc0ca99efaeb50945eeec1190b26b555", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/cf3dc6f7bc0ca99efaeb50945eeec1190b26b555", "committedDate": "2020-07-18T12:41:22Z", "message": "Test command execution"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b6ef62bd5b3ddc0040016734b359d9d4835ce6a", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/6b6ef62bd5b3ddc0040016734b359d9d4835ce6a", "committedDate": "2020-07-18T13:12:30Z", "message": "Test legacy command methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebc7de25a146fed93ddfd1ce396a074334c012e1", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/ebc7de25a146fed93ddfd1ce396a074334c012e1", "committedDate": "2020-07-19T19:31:53Z", "message": "Move commands to Brigadier\n\nAPI changes: Not every command type can get executed with arbitrary\narguments. For example, BrigadierCommand previously inherited the\nexecute(), hasPermission() and suggest() methods which clashed with already provided Brigadier capabilities.\nIn turn, a InvocableCommand interface has been introduced with methods\nthat expect a CommandInvocation object. This allows for dropping the\nintroduced generic type on the Command interface, and move it to\nInvocableCommand.\n\nFor compability reasons, the older deprecated methods must still be kept\non the Command interface.\n\nAdditionally, the Invocation interfaces of each invocable command type (Legacy & Raw) have been made inner interfaces of the corresponding type.\n\nThe BrigadierCommand#argumentBuilder method has been removed. As\nsuggested on review, it was superfluous.\n\nImpl:\nI'm happy to say the move to Brigadier has only forced us to drop a\nsingle method: hasPermission. From now on, all registered commands will\nbe wrapped in a LiteralCommandNode (more if additional aliases are\nprovided) and then registered on a CommandDispatcher.\nThis provides context-rich interactions for BrigadierCommands, as well\nas preserving the current behavior of Legacy, Raw and deprecated\ncommand methods."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08b461e89639f0e2981afd71a8d1c88f5c32f432", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/08b461e89639f0e2981afd71a8d1c88f5c32f432", "committedDate": "2020-07-19T20:10:10Z", "message": "Merge proxy root node with packet's root node"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2020ca9e2d759548b93c35815bfa291ea053e39", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/c2020ca9e2d759548b93c35815bfa291ea053e39", "committedDate": "2020-07-19T20:36:52Z", "message": "Make GlistCommand a Brigadier command for testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cd4913b3fa55418402848fec0328c8e0e82739d", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/9cd4913b3fa55418402848fec0328c8e0e82739d", "committedDate": "2020-07-19T20:37:48Z", "message": "More idiomatic requires()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87447feb06049836dbd134afa771e67b249c3f10", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/87447feb06049836dbd134afa771e67b249c3f10", "committedDate": "2020-07-19T20:41:09Z", "message": "Fix compile errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f84027c92819b13f79312d52f2eebbb7efa1cc43", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/f84027c92819b13f79312d52f2eebbb7efa1cc43", "committedDate": "2020-07-20T12:33:14Z", "message": "Execution and suggestion tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "646e986c08e1a9726797f59d39a8afa4fe0bb28d", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/646e986c08e1a9726797f59d39a8afa4fe0bb28d", "committedDate": "2020-07-20T13:03:00Z", "message": "Test deprecated Commands"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98233ea78b891e083e2b56a53b203c6951e51901", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/98233ea78b891e083e2b56a53b203c6951e51901", "committedDate": "2020-07-20T13:12:08Z", "message": "Test re-registration throws"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e6acc7fdcb29fbbe5fd83c32991acf9c19bf1ba", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/0e6acc7fdcb29fbbe5fd83c32991acf9c19bf1ba", "committedDate": "2020-07-20T13:13:15Z", "message": "Document re-registration throws IAE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62df7b48b40c14f91111d614408bd698774f8396", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/62df7b48b40c14f91111d614408bd698774f8396", "committedDate": "2020-07-20T17:23:45Z", "message": "Add option to disable announcing proxy commands"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0e3bab5b454da5fc8fb1c896cdb5c1af04e121d", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/b0e3bab5b454da5fc8fb1c896cdb5c1af04e121d", "committedDate": "2020-07-20T17:24:41Z", "message": "Revert star import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b6eacf361dffe18176376be14fb2f6cc258dc20", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/5b6eacf361dffe18176376be14fb2f6cc258dc20", "committedDate": "2020-07-20T17:59:17Z", "message": "Fix checkstyle warns"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "051bb702debe3cfef98b1379cddcb1cb0147724c", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/051bb702debe3cfef98b1379cddcb1cb0147724c", "committedDate": "2020-07-20T18:32:53Z", "message": "Proxy suggestions are minecraft:ask_server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5d597454e88afdaa57c3f7c41f81d0e536dfc6f", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/e5d597454e88afdaa57c3f7c41f81d0e536dfc6f", "committedDate": "2020-07-20T19:42:34Z", "message": "Cleanup implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60c119e49459f58eff801ce4a6a6d9af7993ba07", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/60c119e49459f58eff801ce4a6a6d9af7993ba07", "committedDate": "2020-07-20T19:47:08Z", "message": "Fix console suggestions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2dff532508b295ad6660c159ffcc73a49b0bf59b", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/2dff532508b295ad6660c159ffcc73a49b0bf59b", "committedDate": "2020-07-20T20:37:04Z", "message": "Fix argument-less redirects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cee30b9302af197c5290d48044958bec060bdcc2", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/cee30b9302af197c5290d48044958bec060bdcc2", "committedDate": "2020-07-21T09:46:12Z", "message": "Distinguish between syntax errors and unknown aliases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14e1af1e41ae0b1a90b0ea9533a302dba1324859", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/14e1af1e41ae0b1a90b0ea9533a302dba1324859", "committedDate": "2020-07-21T09:54:45Z", "message": "Review javadocs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "029f1f82c5e1a1f3a3384d7e57f06c8e36f7fd05", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/029f1f82c5e1a1f3a3384d7e57f06c8e36f7fd05", "committedDate": "2020-07-21T10:44:25Z", "message": "Fix suggestions on <1.13 clients"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1656d3422b1a5ca374f3a93b4587ce30107207cd", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/1656d3422b1a5ca374f3a93b4587ce30107207cd", "committedDate": "2020-07-21T10:52:04Z", "message": "Fix merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d8e0953f2b33bcfc8a2572334a77f20dfa04c75", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/6d8e0953f2b33bcfc8a2572334a77f20dfa04c75", "committedDate": "2020-07-21T11:07:59Z", "message": "Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8abc9c80a69158ebae0121fda78b55c865c0abad", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/8abc9c80a69158ebae0121fda78b55c865c0abad", "committedDate": "2020-07-21T12:38:55Z", "message": "Wrap Brigadier commands in permission-checking predicate\n\nAlso fixes the redirect issue by cloning the entire children tree.\nCompression should make the increased packet size negligible."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb846499aa9df2f59d1d19d7ffb017d21655563a", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/cb846499aa9df2f59d1d19d7ffb017d21655563a", "committedDate": "2020-07-21T13:05:39Z", "message": "Add extra tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNjI0MDc4", "url": "https://github.com/VelocityPowered/Velocity/pull/330#pullrequestreview-452624078", "createdAt": "2020-07-21T16:21:20Z", "commit": {"oid": "cb846499aa9df2f59d1d19d7ffb017d21655563a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyMToyMFrOG0_2TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNzoyNlrOG1AGDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNTIyOQ==", "bodyText": "Specify that you should use if you don't want the command to be sent to the backend server at all.", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r458225229", "createdAt": "2020-07-21T16:21:20Z", "author": {"login": "astei"}, "path": "api/src/main/java/com/velocitypowered/api/command/BrigadierCommand.java", "diffHunk": "@@ -0,0 +1,57 @@\n+package com.velocitypowered.api.command;\n+\n+import com.mojang.brigadier.builder.LiteralArgumentBuilder;\n+import com.mojang.brigadier.context.CommandContext;\n+import com.mojang.brigadier.tree.CommandNode;\n+import com.mojang.brigadier.tree.LiteralCommandNode;\n+import java.util.function.Predicate;\n+\n+/**\n+ * A command that uses Brigadier for parsing the command and providing\n+ * suggestions to the client.\n+ *\n+ * <p>Brigadier commands may be registered using a {@link Builder} instance\n+ * obtainable via the {@link CommandManager#brigadierBuilder()} method.\n+ */\n+public interface BrigadierCommand extends Command {\n+\n+  /**\n+   * Provides a fluent interface to register a Brigadier command.\n+   */\n+  interface Builder extends Command.Builder<BrigadierCommand, Builder> {\n+\n+    /**\n+     * Specifies the permission-checking predicate the {@link CommandSource}\n+     * must pass to execute the command.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb846499aa9df2f59d1d19d7ffb017d21655563a"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNzQ3Mw==", "bodyText": "This is still API-breaking...", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r458227473", "createdAt": "2020-07-21T16:24:46Z", "author": {"login": "astei"}, "path": "api/src/main/java/com/velocitypowered/api/command/CommandManager.java", "diffHunk": "@@ -1,87 +1,68 @@\n package com.velocitypowered.api.command;\n \n+import com.velocitypowered.api.event.command.CommandExecuteEvent;\n import java.util.concurrent.CompletableFuture;\n \n /**\n- * Represents an interface to register a command executor with the proxy.\n+ * Handles the registration and execution of commands.\n  */\n public interface CommandManager {\n \n   /**\n-   * Registers the specified command with the manager with the specified aliases.\n+   * Returns a builder to register a {@link BrigadierCommand}.\n+   *\n+   * @return a Brigadier command builder\n+   */\n+  BrigadierCommand.Builder brigadierBuilder();\n+\n+  /**\n+   * Registers the specified command with the specified aliases.\n    *\n    * @param command the command to register\n-   * @param aliases the alias to use\n+   * @param aliases the command aliases\n    *\n+   * @throws IllegalArgumentException if one of the given aliases is already registered\n    * @deprecated This method requires at least one alias, but this is only enforced at runtime.\n-   *             Prefer {@link #register(String, Command, String...)} instead.\n+   *             Prefer {@link #register(String, Command, String...)}\n    */\n   @Deprecated\n   void register(Command command, String... aliases);\n \n   /**\n-   * Registers the specified command with the manager with the specified aliases.\n+   * Registers the specified command with the specified aliases.\n    *\n-   * @param alias the first alias to register\n+   * @param alias the first command alias\n    * @param command the command to register\n-   * @param otherAliases the other aliases to use\n+   * @param otherAliases additional aliases\n+   * @throws IllegalArgumentException if one of the given aliases is already registered\n    */\n   void register(String alias, Command command, String... otherAliases);\n \n   /**\n-   * Unregisters a command.\n+   * Unregisters the specified command alias from the manager, if registered.\n    *\n    * @param alias the command alias to unregister\n    */\n   void unregister(String alias);\n \n   /**\n-   * Calls CommandExecuteEvent and attempts to execute a command using the specified {@code cmdLine}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb846499aa9df2f59d1d19d7ffb017d21655563a"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNzg3Nw==", "bodyText": "This is still live. Can you still revert this?", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r458227877", "createdAt": "2020-07-21T16:25:21Z", "author": {"login": "astei"}, "path": "build.gradle", "diffHunk": "@@ -30,7 +30,7 @@ allprojects {\n         getCurrentShortRevision = {\n             new ByteArrayOutputStream().withStream { os ->\n                 exec {\n-                    executable = \"git\"\n+                    executable = \"git.bat\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk0MDE3Mg=="}, "originalCommit": {"oid": "3b242d36210eb776c465804654bd7374bcf5cc32"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyOTI2Mw==", "bodyText": "I would probably make this a RawCommand", "url": "https://github.com/VelocityPowered/Velocity/pull/330#discussion_r458229263", "createdAt": "2020-07-21T16:27:26Z", "author": {"login": "astei"}, "path": "proxy/src/main/java/com/velocitypowered/proxy/command/builtin/ShutdownCommand.java", "diffHunk": "@@ -1,12 +1,10 @@\n-package com.velocitypowered.proxy.command;\n+package com.velocitypowered.proxy.command.builtin;\n \n-import com.velocitypowered.api.command.Command;\n-import com.velocitypowered.api.command.CommandSource;\n+import com.velocitypowered.api.command.LegacyCommand;\n import com.velocitypowered.proxy.VelocityServer;\n import net.kyori.adventure.text.serializer.legacy.LegacyComponentSerializer;\n-import org.checkerframework.checker.nullness.qual.NonNull;\n \n-public class ShutdownCommand implements Command {\n+public class ShutdownCommand implements LegacyCommand {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb846499aa9df2f59d1d19d7ffb017d21655563a"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bab3982c3cbcafe2da31fd88f9345a99f57b8262", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/bab3982c3cbcafe2da31fd88f9345a99f57b8262", "committedDate": "2020-07-21T18:00:44Z", "message": "Apply suggestions\n\n- Fixes CommandManager API-breakage (leftover from the Velocity 2.0\nmerge intention)\n- Clarify BrigadierCommand.Builder#permission javadoc (still subject to\nbe removed)\n- Correct execute return when the source doesn't have permission or a\nsyntax error is made. This follows the #execute javadoc. Under this\ndefinition, a Brigadier command with a syntax error is not executed.\nThe legacy behavior is preserved.\n- Revert git executable path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3cd50d4ddece66fa7724dbc16cc53f37d98cf849", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/3cd50d4ddece66fa7724dbc16cc53f37d98cf849", "committedDate": "2020-07-21T18:28:43Z", "message": "Fix RawCommand API-breakage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce7f17faafee3e0c1d8c74ba550a1f0d501a2baa", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/ce7f17faafee3e0c1d8c74ba550a1f0d501a2baa", "committedDate": "2020-07-21T18:29:33Z", "message": "Add missing @Deprecated annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f459ec43af431df55f2083e2596a215ec971126b", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/f459ec43af431df55f2083e2596a215ec971126b", "committedDate": "2020-07-21T18:33:24Z", "message": "Also provide newer default impls to guarantee API comp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9461cb4de5e2ba31b33e0df04aceaad07fe11104", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/9461cb4de5e2ba31b33e0df04aceaad07fe11104", "committedDate": "2020-07-21T18:34:50Z", "message": "Partially revert last commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d241b2ef40d5c15a86df7f508f4002dcb38ec571", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/d241b2ef40d5c15a86df7f508f4002dcb38ec571", "committedDate": "2020-07-21T18:54:07Z", "message": "Ughh... Inconsistent return type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5fcc726f92ed166ea74655a4964cb74217900f0", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/a5fcc726f92ed166ea74655a4964cb74217900f0", "committedDate": "2020-07-22T11:06:39Z", "message": "LegacyCommand -> SimpleCommand"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "628fee459bbdc30bb32842b16cb6f15360cf8fa3", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/628fee459bbdc30bb32842b16cb6f15360cf8fa3", "committedDate": "2020-07-22T11:15:32Z", "message": "Use a Command return code instead\n\nAvoids the horrible overengineered wrapping logic.\nAlso preserves the previous logic of forwarding a #requires false return\nto the backend server. Also fixes sending suggestions the client doesn't have\npermission for."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1950e7c488a140ebbe42b92b78e3fd55f560cb7c", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/1950e7c488a140ebbe42b92b78e3fd55f560cb7c", "committedDate": "2020-07-22T17:27:22Z", "message": "Introduce hinting\n\nHinting allows non-Brigadier commands to provide LiteralCommandNodes and\nArgumentCommandNodes that are only used to provide additional argument\nmetadata and tab-complete suggestions. Note that the Brigadier Command of a hinting command\nnode or any of its children is ignored, and will instead call the\nregular \"legacy wrapper\" arguments command (see\nBrigadierUtils#buildRawArgumentsLiteral).\n\nWhile introducing this feature I also noticed the manager doesn't keep\ntrack of registered Command instances. As noted before, this is correct\nas the Command interface is now a dummy transformer. However, hinting\nrequires modifying **all** the aliases of a Command, so I introduced the\nCommandMeta interface, which keeps track of the aliases and hinting data\nfor now. This commit also introduces new CommandManager#register methods\nthat accept a CommandMeta object. The Command.Builder and BrigadierCommand.Builder interfaces became useless with this introduction, so I also removed them and made BrigadierCommand a final class that accepts the LiteralCommandNode instead."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1357364f8c4af655e2c50aa7ba7dd48f564adbbb", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/1357364f8c4af655e2c50aa7ba7dd48f564adbbb", "committedDate": "2020-07-22T17:36:48Z", "message": "Revert .bat executable again"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNzQ5MDc4", "url": "https://github.com/VelocityPowered/Velocity/pull/330#pullrequestreview-453749078", "createdAt": "2020-07-22T23:20:20Z", "commit": {"oid": "1357364f8c4af655e2c50aa7ba7dd48f564adbbb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8c9edd10af4415955b54b3b5d064b1f00e84ecf", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/b8c9edd10af4415955b54b3b5d064b1f00e84ecf", "committedDate": "2020-07-23T17:50:45Z", "message": "Fix Checkstyle warns"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d95dbf68ba946e5c30f4b68159fafd0711fffc74", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/d95dbf68ba946e5c30f4b68159fafd0711fffc74", "committedDate": "2020-07-23T17:51:36Z", "message": "Revert .bat yet again"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MjczODcx", "url": "https://github.com/VelocityPowered/Velocity/pull/330#pullrequestreview-455273871", "createdAt": "2020-07-25T09:23:16Z", "commit": {"oid": "d95dbf68ba946e5c30f4b68159fafd0711fffc74"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2957cc530806213c5148f15faaba9cb757124e3f", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/2957cc530806213c5148f15faaba9cb757124e3f", "committedDate": "2020-07-26T17:05:10Z", "message": "Merge branch 'dev/1.1.0' of github.com:VelocityPowered/Velocity into feat/new-command-api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f64a4acc9bdec0f97349e057ec80a882fa47c9b", "author": {"user": {"login": "hugmanrique", "name": "Hugo Manrique"}}, "url": "https://github.com/VelocityPowered/Velocity/commit/0f64a4acc9bdec0f97349e057ec80a882fa47c9b", "committedDate": "2020-07-26T17:23:45Z", "message": "Fix Checkstyle warns"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 718, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}