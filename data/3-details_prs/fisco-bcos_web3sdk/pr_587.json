{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4NTE0MjE0", "number": 587, "title": "add qpslimiter when verifyTransferData", "bodyText": "", "createdAt": "2020-05-15T10:40:08Z", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/587", "merged": true, "mergeCommit": {"oid": "78a5c9d695e20c9962ba7fdde02bbf7430e6f691"}, "closed": true, "closedAt": "2020-05-15T11:55:13Z", "author": {"login": "cyjseagull"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchfsWegFqTQxMjUzNzUwNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABchgdaIABqjMzNDA1MzUwMzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNTM3NTA3", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/587#pullrequestreview-412537507", "createdAt": "2020-05-15T10:41:05Z", "commit": {"oid": "1fb217f5adc966a173462ac66f1999aecdbb7643"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMDo0MTowNVrOGV_uXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMDo0MTowNVrOGV_uXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTcxNzM0Mg==", "bodyText": "[PMD] Found 'DU'-anomaly for variable 'limiter' (lines '97'-'154'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.23.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/587#discussion_r425717342", "createdAt": "2020-05-15T10:41:05Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/parallel/parallelok/PerformanceDTTest.java", "diffHunk": "@@ -94,7 +94,7 @@ public void veryTransferData(ThreadPoolTaskExecutor threadPool) {\n         AtomicInteger verify_failed = new AtomicInteger(0);\n \n         allUser = dagUserMgr.getUserList();\n-\n+        RateLimiter limiter = RateLimiter.create(qps.intValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fb217f5adc966a173462ac66f1999aecdbb7643"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNTM3NTE5", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/587#pullrequestreview-412537519", "createdAt": "2020-05-15T10:41:06Z", "commit": {"oid": "1fb217f5adc966a173462ac66f1999aecdbb7643"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMDo0MTowNlrOGV_uZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMDo0MTowNlrOGV_uZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTcxNzM0OA==", "bodyText": "[PMD] Found 'DU'-anomaly for variable 'limiter' (lines '106'-'175'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.23.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/587#discussion_r425717348", "createdAt": "2020-05-15T10:41:06Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/parallel/precompile/PerformanceDTTest.java", "diffHunk": "@@ -95,15 +95,15 @@ public void setCollector(PerformanceDTCollector collector) {\n         this.collector = collector;\n     }\n \n-    public void veryTransferData(ThreadPoolTaskExecutor threadPool) {\n+    public void veryTransferData(ThreadPoolTaskExecutor threadPool, BigInteger qps) {\n         List<DagTransferUser> allUser = dagUserMgr.getUserList();\n         Integer total_user = allUser.size();\n \n         AtomicInteger verify_success = new AtomicInteger(0);\n         AtomicInteger verify_failed = new AtomicInteger(0);\n \n         allUser = dagUserMgr.getUserList();\n-\n+        RateLimiter limiter = RateLimiter.create(qps.intValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fb217f5adc966a173462ac66f1999aecdbb7643"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1fb217f5adc966a173462ac66f1999aecdbb7643", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/1fb217f5adc966a173462ac66f1999aecdbb7643", "committedDate": "2020-05-15T10:39:04Z", "message": "add qpslimiter when verifyTransferData"}, "afterCommit": {"oid": "07341c7741d6daaab726c1c0fcf99b4353add6bc", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/07341c7741d6daaab726c1c0fcf99b4353add6bc", "committedDate": "2020-05-15T11:18:38Z", "message": "add qpslimiter when verifyTransferData"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eb213ac40e3f70e6548b117d7c1637e0a333029", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/9eb213ac40e3f70e6548b117d7c1637e0a333029", "committedDate": "2020-05-15T11:34:19Z", "message": "add qpslimiter when verifyTransferData"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "07341c7741d6daaab726c1c0fcf99b4353add6bc", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/07341c7741d6daaab726c1c0fcf99b4353add6bc", "committedDate": "2020-05-15T11:18:38Z", "message": "add qpslimiter when verifyTransferData"}, "afterCommit": {"oid": "9eb213ac40e3f70e6548b117d7c1637e0a333029", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/9eb213ac40e3f70e6548b117d7c1637e0a333029", "committedDate": "2020-05-15T11:34:19Z", "message": "add qpslimiter when verifyTransferData"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1936, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}