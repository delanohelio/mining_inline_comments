{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyOTkwODU2", "number": 564, "title": "add PerformanceEvidenceVerify to call ecRecover", "bodyText": "", "createdAt": "2020-04-14T06:18:27Z", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/564", "merged": true, "mergeCommit": {"oid": "4b72b7c0efb6eb7b2539f5896561612e32060b92"}, "closed": true, "closedAt": "2020-04-15T03:01:26Z", "author": {"login": "cyjseagull"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXdY4jABqjMyMjk2NDE0MjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXvGmKgFqTM5MzQyNTE0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c660ddfcc3f4a7581749c7e32cef30233b116603", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/c660ddfcc3f4a7581749c7e32cef30233b116603", "committedDate": "2020-04-14T06:16:40Z", "message": "add PerformanceEvidenceVerify to call ecRecover"}, "afterCommit": {"oid": "d931d9219bc4d787cd8a2693e1b3339b04e917ec", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/d931d9219bc4d787cd8a2693e1b3339b04e917ec", "committedDate": "2020-04-14T06:20:12Z", "message": "add PerformanceEvidenceVerify to call ecRecover"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNjMyMTMz", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/564#pullrequestreview-392632133", "createdAt": "2020-04-14T06:22:05Z", "commit": {"oid": "d931d9219bc4d787cd8a2693e1b3339b04e917ec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjoyMjowNVrOGE_zOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjoyMjowNVrOGE_zOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg5Mjc5NA==", "bodyText": "[PMD] Found 'DU'-anomaly for variable 'area' (lines '91'-'145'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can mark this issue as closed if you should not tackle it. (see our document about issues)", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/564#discussion_r407892794", "createdAt": "2020-04-14T06:22:05Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/contract/PerformanceEvidenceVerify.java", "diffHunk": "@@ -0,0 +1,146 @@\n+package org.fisco.bcos.channel.test.contract;\n+import com.google.common.util.concurrent.RateLimiter;\n+import org.fisco.bcos.web3j.crypto.Keys;\n+import java.math.BigInteger;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ScheduledExecutorService;\n+import java.util.concurrent.atomic.AtomicInteger;\n+import org.fisco.bcos.channel.client.Service;\n+import org.fisco.bcos.web3j.crypto.Credentials;\n+import org.fisco.bcos.web3j.protocol.Web3j;\n+import org.fisco.bcos.web3j.protocol.channel.ChannelEthereumService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.fisco.bcos.web3j.utils.Web3AsyncThreadPoolSize;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.ApplicationContext;\n+import org.springframework.context.support.ClassPathXmlApplicationContext;\n+import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\n+import java.security.SecureRandom;\n+import org.fisco.bcos.web3j.crypto.gm.GenCredential;\n+import org.fisco.bcos.web3j.crypto.Credentials;\n+import org.fisco.bcos.web3j.crypto.Hash;\n+import org.fisco.bcos.web3j.crypto.ECDSASign;\n+import org.fisco.bcos.web3j.crypto.ECKeyPair;\n+import org.fisco.bcos.web3j.crypto.Sign;\n+\n+public class PerformanceEvidenceVerify{\n+    private static Logger logger = LoggerFactory.getLogger(PerformanceEvidenceVerify.class);\n+    private static AtomicInteger sended = new AtomicInteger(0);\n+\n+    public static void main(String[] args) throws Exception {\n+        try {\n+            String groupId = args[3];\n+            ApplicationContext context =\n+                    new ClassPathXmlApplicationContext(\"classpath:applicationContext.xml\");\n+            Service service = context.getBean(Service.class);\n+            service.setGroupId(Integer.parseInt(groupId));\n+            service.run();\n+\n+            System.out.println(\"Start Evidence test...\");\n+            System.out.println(\n+                    \"===================================================================\");\n+\n+            ChannelEthereumService channelEthereumService = new ChannelEthereumService();\n+            channelEthereumService.setChannelService(service);\n+\n+            Web3AsyncThreadPoolSize.web3AsyncCorePoolSize = 3000;\n+            Web3AsyncThreadPoolSize.web3AsyncPoolSize = 2000;\n+\n+            ScheduledExecutorService scheduledExecutorService =\n+                    Executors.newScheduledThreadPool(500);\n+            Web3j web3 =\n+                    Web3j.build(\n+                            channelEthereumService,\n+                            15 * 100,\n+                            scheduledExecutorService,\n+                            Integer.parseInt(groupId));\n+\n+            Credentials credentials = GenCredential.create();\n+\n+            BigInteger gasPrice = new BigInteger(\"30000000\");\n+            BigInteger gasLimit = new BigInteger(\"30000000\");\n+\n+            String command = args[0];\n+            Integer count = 0;\n+            Integer qps = 0;\n+\n+            switch (command) {\n+                case \"insert\":\n+                    count = Integer.parseInt(args[1]);\n+                    qps = Integer.parseInt(args[2]);\n+                    break;\n+                default:\n+                    System.out.println(\"Args: <insert> <Total> <QPS>\");\n+            }\n+\n+            ThreadPoolTaskExecutor threadPool = new ThreadPoolTaskExecutor();\n+            threadPool.setCorePoolSize(200);\n+            threadPool.setMaxPoolSize(500);\n+            threadPool.setQueueCapacity(count);\n+\n+            threadPool.initialize();\n+\n+            System.out.println(\"Deploying Evidence contract...\");\n+            EvidenceVerify evidence = EvidenceVerify.deploy(web3, credentials, gasPrice, gasLimit).send();\n+\n+            PerformanceCollector collector = new PerformanceCollector();\n+            collector.setTotal(count);\n+\n+            RateLimiter limiter = RateLimiter.create(qps);\n+            Integer area = count / 10;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d931d9219bc4d787cd8a2693e1b3339b04e917ec"}, "originalPosition": 91}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNjMyMTQy", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/564#pullrequestreview-392632142", "createdAt": "2020-04-14T06:22:06Z", "commit": {"oid": "d931d9219bc4d787cd8a2693e1b3339b04e917ec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjoyMjowNlrOGE_zQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjoyMjowNlrOGE_zQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg5MjgwMQ==", "bodyText": "[PMD] Found 'DU'-anomaly for variable 'signHandler' (lines '94'-'145'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can mark this issue as closed if you should not tackle it. (see our document about issues)", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/564#discussion_r407892801", "createdAt": "2020-04-14T06:22:06Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/contract/PerformanceEvidenceVerify.java", "diffHunk": "@@ -0,0 +1,146 @@\n+package org.fisco.bcos.channel.test.contract;\n+import com.google.common.util.concurrent.RateLimiter;\n+import org.fisco.bcos.web3j.crypto.Keys;\n+import java.math.BigInteger;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ScheduledExecutorService;\n+import java.util.concurrent.atomic.AtomicInteger;\n+import org.fisco.bcos.channel.client.Service;\n+import org.fisco.bcos.web3j.crypto.Credentials;\n+import org.fisco.bcos.web3j.protocol.Web3j;\n+import org.fisco.bcos.web3j.protocol.channel.ChannelEthereumService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.fisco.bcos.web3j.utils.Web3AsyncThreadPoolSize;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.ApplicationContext;\n+import org.springframework.context.support.ClassPathXmlApplicationContext;\n+import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\n+import java.security.SecureRandom;\n+import org.fisco.bcos.web3j.crypto.gm.GenCredential;\n+import org.fisco.bcos.web3j.crypto.Credentials;\n+import org.fisco.bcos.web3j.crypto.Hash;\n+import org.fisco.bcos.web3j.crypto.ECDSASign;\n+import org.fisco.bcos.web3j.crypto.ECKeyPair;\n+import org.fisco.bcos.web3j.crypto.Sign;\n+\n+public class PerformanceEvidenceVerify{\n+    private static Logger logger = LoggerFactory.getLogger(PerformanceEvidenceVerify.class);\n+    private static AtomicInteger sended = new AtomicInteger(0);\n+\n+    public static void main(String[] args) throws Exception {\n+        try {\n+            String groupId = args[3];\n+            ApplicationContext context =\n+                    new ClassPathXmlApplicationContext(\"classpath:applicationContext.xml\");\n+            Service service = context.getBean(Service.class);\n+            service.setGroupId(Integer.parseInt(groupId));\n+            service.run();\n+\n+            System.out.println(\"Start Evidence test...\");\n+            System.out.println(\n+                    \"===================================================================\");\n+\n+            ChannelEthereumService channelEthereumService = new ChannelEthereumService();\n+            channelEthereumService.setChannelService(service);\n+\n+            Web3AsyncThreadPoolSize.web3AsyncCorePoolSize = 3000;\n+            Web3AsyncThreadPoolSize.web3AsyncPoolSize = 2000;\n+\n+            ScheduledExecutorService scheduledExecutorService =\n+                    Executors.newScheduledThreadPool(500);\n+            Web3j web3 =\n+                    Web3j.build(\n+                            channelEthereumService,\n+                            15 * 100,\n+                            scheduledExecutorService,\n+                            Integer.parseInt(groupId));\n+\n+            Credentials credentials = GenCredential.create();\n+\n+            BigInteger gasPrice = new BigInteger(\"30000000\");\n+            BigInteger gasLimit = new BigInteger(\"30000000\");\n+\n+            String command = args[0];\n+            Integer count = 0;\n+            Integer qps = 0;\n+\n+            switch (command) {\n+                case \"insert\":\n+                    count = Integer.parseInt(args[1]);\n+                    qps = Integer.parseInt(args[2]);\n+                    break;\n+                default:\n+                    System.out.println(\"Args: <insert> <Total> <QPS>\");\n+            }\n+\n+            ThreadPoolTaskExecutor threadPool = new ThreadPoolTaskExecutor();\n+            threadPool.setCorePoolSize(200);\n+            threadPool.setMaxPoolSize(500);\n+            threadPool.setQueueCapacity(count);\n+\n+            threadPool.initialize();\n+\n+            System.out.println(\"Deploying Evidence contract...\");\n+            EvidenceVerify evidence = EvidenceVerify.deploy(web3, credentials, gasPrice, gasLimit).send();\n+\n+            PerformanceCollector collector = new PerformanceCollector();\n+            collector.setTotal(count);\n+\n+            RateLimiter limiter = RateLimiter.create(qps);\n+            Integer area = count / 10;\n+            final Integer total = count;\n+            \n+            ECDSASign signHandler = new ECDSASign();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d931d9219bc4d787cd8a2693e1b3339b04e917ec"}, "originalPosition": 94}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNjMyMTQ4", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/564#pullrequestreview-392632148", "createdAt": "2020-04-14T06:22:07Z", "commit": {"oid": "d931d9219bc4d787cd8a2693e1b3339b04e917ec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjoyMjowN1rOGE_zRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjoyMjowN1rOGE_zRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg5MjgwNw==", "bodyText": "[PMD] Found 'DU'-anomaly for variable 'evidence' (lines '85'-'145'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can mark this issue as closed if you should not tackle it. (see our document about issues)", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/564#discussion_r407892807", "createdAt": "2020-04-14T06:22:07Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/contract/PerformanceEvidenceVerify.java", "diffHunk": "@@ -0,0 +1,146 @@\n+package org.fisco.bcos.channel.test.contract;\n+import com.google.common.util.concurrent.RateLimiter;\n+import org.fisco.bcos.web3j.crypto.Keys;\n+import java.math.BigInteger;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ScheduledExecutorService;\n+import java.util.concurrent.atomic.AtomicInteger;\n+import org.fisco.bcos.channel.client.Service;\n+import org.fisco.bcos.web3j.crypto.Credentials;\n+import org.fisco.bcos.web3j.protocol.Web3j;\n+import org.fisco.bcos.web3j.protocol.channel.ChannelEthereumService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.fisco.bcos.web3j.utils.Web3AsyncThreadPoolSize;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.ApplicationContext;\n+import org.springframework.context.support.ClassPathXmlApplicationContext;\n+import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\n+import java.security.SecureRandom;\n+import org.fisco.bcos.web3j.crypto.gm.GenCredential;\n+import org.fisco.bcos.web3j.crypto.Credentials;\n+import org.fisco.bcos.web3j.crypto.Hash;\n+import org.fisco.bcos.web3j.crypto.ECDSASign;\n+import org.fisco.bcos.web3j.crypto.ECKeyPair;\n+import org.fisco.bcos.web3j.crypto.Sign;\n+\n+public class PerformanceEvidenceVerify{\n+    private static Logger logger = LoggerFactory.getLogger(PerformanceEvidenceVerify.class);\n+    private static AtomicInteger sended = new AtomicInteger(0);\n+\n+    public static void main(String[] args) throws Exception {\n+        try {\n+            String groupId = args[3];\n+            ApplicationContext context =\n+                    new ClassPathXmlApplicationContext(\"classpath:applicationContext.xml\");\n+            Service service = context.getBean(Service.class);\n+            service.setGroupId(Integer.parseInt(groupId));\n+            service.run();\n+\n+            System.out.println(\"Start Evidence test...\");\n+            System.out.println(\n+                    \"===================================================================\");\n+\n+            ChannelEthereumService channelEthereumService = new ChannelEthereumService();\n+            channelEthereumService.setChannelService(service);\n+\n+            Web3AsyncThreadPoolSize.web3AsyncCorePoolSize = 3000;\n+            Web3AsyncThreadPoolSize.web3AsyncPoolSize = 2000;\n+\n+            ScheduledExecutorService scheduledExecutorService =\n+                    Executors.newScheduledThreadPool(500);\n+            Web3j web3 =\n+                    Web3j.build(\n+                            channelEthereumService,\n+                            15 * 100,\n+                            scheduledExecutorService,\n+                            Integer.parseInt(groupId));\n+\n+            Credentials credentials = GenCredential.create();\n+\n+            BigInteger gasPrice = new BigInteger(\"30000000\");\n+            BigInteger gasLimit = new BigInteger(\"30000000\");\n+\n+            String command = args[0];\n+            Integer count = 0;\n+            Integer qps = 0;\n+\n+            switch (command) {\n+                case \"insert\":\n+                    count = Integer.parseInt(args[1]);\n+                    qps = Integer.parseInt(args[2]);\n+                    break;\n+                default:\n+                    System.out.println(\"Args: <insert> <Total> <QPS>\");\n+            }\n+\n+            ThreadPoolTaskExecutor threadPool = new ThreadPoolTaskExecutor();\n+            threadPool.setCorePoolSize(200);\n+            threadPool.setMaxPoolSize(500);\n+            threadPool.setQueueCapacity(count);\n+\n+            threadPool.initialize();\n+\n+            System.out.println(\"Deploying Evidence contract...\");\n+            EvidenceVerify evidence = EvidenceVerify.deploy(web3, credentials, gasPrice, gasLimit).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d931d9219bc4d787cd8a2693e1b3339b04e917ec"}, "originalPosition": 85}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNjMyMTU2", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/564#pullrequestreview-392632156", "createdAt": "2020-04-14T06:22:08Z", "commit": {"oid": "d931d9219bc4d787cd8a2693e1b3339b04e917ec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjoyMjowOFrOGE_zTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjoyMjowOFrOGE_zTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg5MjgxNA==", "bodyText": "[PMD] Found 'DU'-anomaly for variable 'limiter' (lines '90'-'145'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can mark this issue as closed if you should not tackle it. (see our document about issues)", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/564#discussion_r407892814", "createdAt": "2020-04-14T06:22:08Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/contract/PerformanceEvidenceVerify.java", "diffHunk": "@@ -0,0 +1,146 @@\n+package org.fisco.bcos.channel.test.contract;\n+import com.google.common.util.concurrent.RateLimiter;\n+import org.fisco.bcos.web3j.crypto.Keys;\n+import java.math.BigInteger;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ScheduledExecutorService;\n+import java.util.concurrent.atomic.AtomicInteger;\n+import org.fisco.bcos.channel.client.Service;\n+import org.fisco.bcos.web3j.crypto.Credentials;\n+import org.fisco.bcos.web3j.protocol.Web3j;\n+import org.fisco.bcos.web3j.protocol.channel.ChannelEthereumService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.fisco.bcos.web3j.utils.Web3AsyncThreadPoolSize;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.ApplicationContext;\n+import org.springframework.context.support.ClassPathXmlApplicationContext;\n+import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\n+import java.security.SecureRandom;\n+import org.fisco.bcos.web3j.crypto.gm.GenCredential;\n+import org.fisco.bcos.web3j.crypto.Credentials;\n+import org.fisco.bcos.web3j.crypto.Hash;\n+import org.fisco.bcos.web3j.crypto.ECDSASign;\n+import org.fisco.bcos.web3j.crypto.ECKeyPair;\n+import org.fisco.bcos.web3j.crypto.Sign;\n+\n+public class PerformanceEvidenceVerify{\n+    private static Logger logger = LoggerFactory.getLogger(PerformanceEvidenceVerify.class);\n+    private static AtomicInteger sended = new AtomicInteger(0);\n+\n+    public static void main(String[] args) throws Exception {\n+        try {\n+            String groupId = args[3];\n+            ApplicationContext context =\n+                    new ClassPathXmlApplicationContext(\"classpath:applicationContext.xml\");\n+            Service service = context.getBean(Service.class);\n+            service.setGroupId(Integer.parseInt(groupId));\n+            service.run();\n+\n+            System.out.println(\"Start Evidence test...\");\n+            System.out.println(\n+                    \"===================================================================\");\n+\n+            ChannelEthereumService channelEthereumService = new ChannelEthereumService();\n+            channelEthereumService.setChannelService(service);\n+\n+            Web3AsyncThreadPoolSize.web3AsyncCorePoolSize = 3000;\n+            Web3AsyncThreadPoolSize.web3AsyncPoolSize = 2000;\n+\n+            ScheduledExecutorService scheduledExecutorService =\n+                    Executors.newScheduledThreadPool(500);\n+            Web3j web3 =\n+                    Web3j.build(\n+                            channelEthereumService,\n+                            15 * 100,\n+                            scheduledExecutorService,\n+                            Integer.parseInt(groupId));\n+\n+            Credentials credentials = GenCredential.create();\n+\n+            BigInteger gasPrice = new BigInteger(\"30000000\");\n+            BigInteger gasLimit = new BigInteger(\"30000000\");\n+\n+            String command = args[0];\n+            Integer count = 0;\n+            Integer qps = 0;\n+\n+            switch (command) {\n+                case \"insert\":\n+                    count = Integer.parseInt(args[1]);\n+                    qps = Integer.parseInt(args[2]);\n+                    break;\n+                default:\n+                    System.out.println(\"Args: <insert> <Total> <QPS>\");\n+            }\n+\n+            ThreadPoolTaskExecutor threadPool = new ThreadPoolTaskExecutor();\n+            threadPool.setCorePoolSize(200);\n+            threadPool.setMaxPoolSize(500);\n+            threadPool.setQueueCapacity(count);\n+\n+            threadPool.initialize();\n+\n+            System.out.println(\"Deploying Evidence contract...\");\n+            EvidenceVerify evidence = EvidenceVerify.deploy(web3, credentials, gasPrice, gasLimit).send();\n+\n+            PerformanceCollector collector = new PerformanceCollector();\n+            collector.setTotal(count);\n+\n+            RateLimiter limiter = RateLimiter.create(qps);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d931d9219bc4d787cd8a2693e1b3339b04e917ec"}, "originalPosition": 90}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNjMyMTY2", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/564#pullrequestreview-392632166", "createdAt": "2020-04-14T06:22:09Z", "commit": {"oid": "d931d9219bc4d787cd8a2693e1b3339b04e917ec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjoyMjowOVrOGE_zVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjoyMjowOVrOGE_zVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg5MjgyMg==", "bodyText": "[PMD] Found 'DU'-anomaly for variable 'total' (lines '92'-'145'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can mark this issue as closed if you should not tackle it. (see our document about issues)", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/564#discussion_r407892822", "createdAt": "2020-04-14T06:22:09Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/contract/PerformanceEvidenceVerify.java", "diffHunk": "@@ -0,0 +1,146 @@\n+package org.fisco.bcos.channel.test.contract;\n+import com.google.common.util.concurrent.RateLimiter;\n+import org.fisco.bcos.web3j.crypto.Keys;\n+import java.math.BigInteger;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ScheduledExecutorService;\n+import java.util.concurrent.atomic.AtomicInteger;\n+import org.fisco.bcos.channel.client.Service;\n+import org.fisco.bcos.web3j.crypto.Credentials;\n+import org.fisco.bcos.web3j.protocol.Web3j;\n+import org.fisco.bcos.web3j.protocol.channel.ChannelEthereumService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.fisco.bcos.web3j.utils.Web3AsyncThreadPoolSize;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.ApplicationContext;\n+import org.springframework.context.support.ClassPathXmlApplicationContext;\n+import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\n+import java.security.SecureRandom;\n+import org.fisco.bcos.web3j.crypto.gm.GenCredential;\n+import org.fisco.bcos.web3j.crypto.Credentials;\n+import org.fisco.bcos.web3j.crypto.Hash;\n+import org.fisco.bcos.web3j.crypto.ECDSASign;\n+import org.fisco.bcos.web3j.crypto.ECKeyPair;\n+import org.fisco.bcos.web3j.crypto.Sign;\n+\n+public class PerformanceEvidenceVerify{\n+    private static Logger logger = LoggerFactory.getLogger(PerformanceEvidenceVerify.class);\n+    private static AtomicInteger sended = new AtomicInteger(0);\n+\n+    public static void main(String[] args) throws Exception {\n+        try {\n+            String groupId = args[3];\n+            ApplicationContext context =\n+                    new ClassPathXmlApplicationContext(\"classpath:applicationContext.xml\");\n+            Service service = context.getBean(Service.class);\n+            service.setGroupId(Integer.parseInt(groupId));\n+            service.run();\n+\n+            System.out.println(\"Start Evidence test...\");\n+            System.out.println(\n+                    \"===================================================================\");\n+\n+            ChannelEthereumService channelEthereumService = new ChannelEthereumService();\n+            channelEthereumService.setChannelService(service);\n+\n+            Web3AsyncThreadPoolSize.web3AsyncCorePoolSize = 3000;\n+            Web3AsyncThreadPoolSize.web3AsyncPoolSize = 2000;\n+\n+            ScheduledExecutorService scheduledExecutorService =\n+                    Executors.newScheduledThreadPool(500);\n+            Web3j web3 =\n+                    Web3j.build(\n+                            channelEthereumService,\n+                            15 * 100,\n+                            scheduledExecutorService,\n+                            Integer.parseInt(groupId));\n+\n+            Credentials credentials = GenCredential.create();\n+\n+            BigInteger gasPrice = new BigInteger(\"30000000\");\n+            BigInteger gasLimit = new BigInteger(\"30000000\");\n+\n+            String command = args[0];\n+            Integer count = 0;\n+            Integer qps = 0;\n+\n+            switch (command) {\n+                case \"insert\":\n+                    count = Integer.parseInt(args[1]);\n+                    qps = Integer.parseInt(args[2]);\n+                    break;\n+                default:\n+                    System.out.println(\"Args: <insert> <Total> <QPS>\");\n+            }\n+\n+            ThreadPoolTaskExecutor threadPool = new ThreadPoolTaskExecutor();\n+            threadPool.setCorePoolSize(200);\n+            threadPool.setMaxPoolSize(500);\n+            threadPool.setQueueCapacity(count);\n+\n+            threadPool.initialize();\n+\n+            System.out.println(\"Deploying Evidence contract...\");\n+            EvidenceVerify evidence = EvidenceVerify.deploy(web3, credentials, gasPrice, gasLimit).send();\n+\n+            PerformanceCollector collector = new PerformanceCollector();\n+            collector.setTotal(count);\n+\n+            RateLimiter limiter = RateLimiter.create(qps);\n+            Integer area = count / 10;\n+            final Integer total = count;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d931d9219bc4d787cd8a2693e1b3339b04e917ec"}, "originalPosition": 92}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d931d9219bc4d787cd8a2693e1b3339b04e917ec", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/d931d9219bc4d787cd8a2693e1b3339b04e917ec", "committedDate": "2020-04-14T06:20:12Z", "message": "add PerformanceEvidenceVerify to call ecRecover"}, "afterCommit": {"oid": "2cbc12b3f9d4a46b20b2e3389c7bbf2fb9513222", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/2cbc12b3f9d4a46b20b2e3389c7bbf2fb9513222", "committedDate": "2020-04-14T06:23:23Z", "message": "add PerformanceEvidenceVerify to call ecRecover"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "877aaa62967d1f62970760e5190972f32c7de669", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/877aaa62967d1f62970760e5190972f32c7de669", "committedDate": "2020-04-14T06:27:18Z", "message": "add PerformanceEvidenceVerify to call ecRecover"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2cbc12b3f9d4a46b20b2e3389c7bbf2fb9513222", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/2cbc12b3f9d4a46b20b2e3389c7bbf2fb9513222", "committedDate": "2020-04-14T06:23:23Z", "message": "add PerformanceEvidenceVerify to call ecRecover"}, "afterCommit": {"oid": "877aaa62967d1f62970760e5190972f32c7de669", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/877aaa62967d1f62970760e5190972f32c7de669", "committedDate": "2020-04-14T06:27:18Z", "message": "add PerformanceEvidenceVerify to call ecRecover"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNjc1Mjcz", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/564#pullrequestreview-392675273", "createdAt": "2020-04-14T07:40:13Z", "commit": {"oid": "877aaa62967d1f62970760e5190972f32c7de669"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNDI1MTQ3", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/564#pullrequestreview-393425147", "createdAt": "2020-04-15T02:59:05Z", "commit": {"oid": "877aaa62967d1f62970760e5190972f32c7de669"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1913, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}