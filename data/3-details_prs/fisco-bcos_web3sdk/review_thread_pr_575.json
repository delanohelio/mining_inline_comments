{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4NTExNjc1", "number": 575, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjowNzo0OVrOD1vf-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjowNzo1M1rOD1vgEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3Njc5MzU0OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/fisco/bcos/channel/handler/ConnectionCallback.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjowNzo0OVrOGLUleA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjowNzo0OVrOGLUleA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDUyNDc5Mg==", "bodyText": "[PMD] Avoid throwing raw exception types. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidThrowingRawExceptionTypes\nDesign\n1\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_design.html#avoidthrowingrawexceptiontypes\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/575#discussion_r414524792", "createdAt": "2020-04-24T12:07:49Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ConnectionCallback.java", "diffHunk": "@@ -419,7 +419,23 @@ public void onDisconnect(ChannelHandlerContext ctx) {\n     public void onMessage(ChannelHandlerContext ctx, ByteBuf message) {\n         try {\n             Message msg = new Message();\n-            msg.readHeader(message);\n+\n+            try {\n+                msg.readHeader(message);\n+            } catch (Exception e) {\n+                String host =\n+                        ((SocketChannel) ctx.channel())\n+                                .remoteAddress()\n+                                .getAddress()\n+                                .getHostAddress();\n+                Integer port = ((SocketChannel) ctx.channel()).remoteAddress().getPort();\n+\n+                logger.error(\n+                        \" Maybe p2p port is used to channel connection, please check the configuration, peer {}:{}\",\n+                        host,\n+                        port);\n+                throw new RuntimeException(e.getCause());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6959fedf0aeab6df58ff812f51e9ffc5b93d6d2"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3Njc5MzU5OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/fisco/bcos/channel/handler/ConnectionCallback.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjowNzo1MFrOGLUlgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjowNzo1MFrOGLUlgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDUyNDgwMQ==", "bodyText": "[PMD] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/575#discussion_r414524801", "createdAt": "2020-04-24T12:07:50Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ConnectionCallback.java", "diffHunk": "@@ -419,7 +419,23 @@ public void onDisconnect(ChannelHandlerContext ctx) {\n     public void onMessage(ChannelHandlerContext ctx, ByteBuf message) {\n         try {\n             Message msg = new Message();\n-            msg.readHeader(message);\n+\n+            try {\n+                msg.readHeader(message);\n+            } catch (Exception e) {\n+                String host =\n+                        ((SocketChannel) ctx.channel())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6959fedf0aeab6df58ff812f51e9ffc5b93d6d2"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3Njc5MzY2OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/fisco/bcos/channel/handler/ConnectionCallback.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjowNzo1MVrOGLUljA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjowNzo1MVrOGLUljA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDUyNDgxMg==", "bodyText": "[PMD] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/575#discussion_r414524812", "createdAt": "2020-04-24T12:07:51Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ConnectionCallback.java", "diffHunk": "@@ -419,7 +419,23 @@ public void onDisconnect(ChannelHandlerContext ctx) {\n     public void onMessage(ChannelHandlerContext ctx, ByteBuf message) {\n         try {\n             Message msg = new Message();\n-            msg.readHeader(message);\n+\n+            try {\n+                msg.readHeader(message);\n+            } catch (Exception e) {\n+                String host =\n+                        ((SocketChannel) ctx.channel())\n+                                .remoteAddress()\n+                                .getAddress()\n+                                .getHostAddress();\n+                Integer port = ((SocketChannel) ctx.channel()).remoteAddress().getPort();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6959fedf0aeab6df58ff812f51e9ffc5b93d6d2"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3Njc5MzY5OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/fisco/bcos/channel/handler/ConnectionCallback.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjowNzo1MlrOGLUlkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjowNzo1MlrOGLUlkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDUyNDgxNw==", "bodyText": "[PMD] Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidCatchingGenericException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_design.html#avoidcatchinggenericexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/575#discussion_r414524817", "createdAt": "2020-04-24T12:07:52Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ConnectionCallback.java", "diffHunk": "@@ -419,7 +419,23 @@ public void onDisconnect(ChannelHandlerContext ctx) {\n     public void onMessage(ChannelHandlerContext ctx, ByteBuf message) {\n         try {\n             Message msg = new Message();\n-            msg.readHeader(message);\n+\n+            try {\n+                msg.readHeader(message);\n+            } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6959fedf0aeab6df58ff812f51e9ffc5b93d6d2"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3Njc5Mzc5OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/fisco/bcos/channel/handler/ConnectionCallback.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjowNzo1M1rOGLUlng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjowNzo1M1rOGLUlng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDUyNDgzMA==", "bodyText": "[PMD] New exception is thrown in catch block, original stack trace may be lost (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nPreserveStackTrace\nBest Practices\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_bestpractices.html#preservestacktrace\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/575#discussion_r414524830", "createdAt": "2020-04-24T12:07:53Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ConnectionCallback.java", "diffHunk": "@@ -419,7 +419,23 @@ public void onDisconnect(ChannelHandlerContext ctx) {\n     public void onMessage(ChannelHandlerContext ctx, ByteBuf message) {\n         try {\n             Message msg = new Message();\n-            msg.readHeader(message);\n+\n+            try {\n+                msg.readHeader(message);\n+            } catch (Exception e) {\n+                String host =\n+                        ((SocketChannel) ctx.channel())\n+                                .remoteAddress()\n+                                .getAddress()\n+                                .getHostAddress();\n+                Integer port = ((SocketChannel) ctx.channel()).remoteAddress().getPort();\n+\n+                logger.error(\n+                        \" Maybe p2p port is used to channel connection, please check the configuration, peer {}:{}\",\n+                        host,\n+                        port);\n+                throw new RuntimeException(e.getCause());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6959fedf0aeab6df58ff812f51e9ffc5b93d6d2"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 655, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}