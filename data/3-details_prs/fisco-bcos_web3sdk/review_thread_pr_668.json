{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxMDIxNDcy", "number": 668, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwODoxOTowNVrOEJbCww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwOToyNDozNlrOEJbalw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MzE1NzE1OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwODoxOTowNVrOGp7aKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwODoxOTowNVrOGp7aKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjYxODE1Mw==", "bodyText": "[PMD Java] String.indexOf(char) is faster than String.indexOf(String). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nUseIndexOfChar\nPerformance\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.24.0/pmd_rules_java_performance.html#useindexofchar\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/668#discussion_r446618153", "createdAt": "2020-06-28T08:19:05Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -288,18 +289,17 @@ public void init() {\n         for (String connectionStr : connectionsStr) {\n             ConnectionInfo connection = new ConnectionInfo();\n \n-            String[] stringArray = connectionStr.split(\":\");\n-\n-            if (stringArray.length < 1) {\n+            int index = connectionStr.lastIndexOf(\":\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe54930c32ba56f760525174ba43d7a60168e174"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MzE1NzE4OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwODoxOTowNlrOGp7aLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwODoxOTowNlrOGp7aLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjYxODE1Ng==", "bodyText": "[PMD Java] Found 'DU'-anomaly for variable 'port' (lines '300'-'321'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.24.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/668#discussion_r446618156", "createdAt": "2020-06-28T08:19:06Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -288,18 +289,17 @@ public void init() {\n         for (String connectionStr : connectionsStr) {\n             ConnectionInfo connection = new ConnectionInfo();\n \n-            String[] stringArray = connectionStr.split(\":\");\n-\n-            if (stringArray.length < 1) {\n+            int index = connectionStr.lastIndexOf(\":\");\n+            if (index == -1) {\n                 throw new IllegalArgumentException(\n-                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111), value: \"\n+                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111\u3001[::1]:1111), value: \"\n                                 + connectionStr);\n             }\n \n-            String IP = stringArray[0];\n-            String port = stringArray[1];\n+            String IP = connectionStr.substring(0,index);\n+            String port = connectionStr.substring(index+1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe54930c32ba56f760525174ba43d7a60168e174"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MzIxODE1OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwOToyNDozNlrOGp733A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwOToyNDozNlrOGp733A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjYyNTc1Ng==", "bodyText": "[PMD Java] Found 'DU'-anomaly for variable 'port' (lines '300'-'321'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.24.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/668#discussion_r446625756", "createdAt": "2020-06-28T09:24:36Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -288,18 +289,17 @@ public void init() {\n         for (String connectionStr : connectionsStr) {\n             ConnectionInfo connection = new ConnectionInfo();\n \n-            String[] stringArray = connectionStr.split(\":\");\n-\n-            if (stringArray.length < 1) {\n+            int index = connectionStr.lastIndexOf(':');\n+            if (index == -1) {\n                 throw new IllegalArgumentException(\n-                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111), value: \"\n+                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111\u3001[::1]:1111), value: \"\n                                 + connectionStr);\n             }\n \n-            String IP = stringArray[0];\n-            String port = stringArray[1];\n+            String IP = connectionStr.substring(0, index);\n+            String port = connectionStr.substring(index + 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f85ee8ed985305cb74675f3cca4ba2e4eedf5d9"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 557, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}