{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0NTQ4NDg4", "number": 729, "title": "add CallResult to ContractCallException", "bodyText": "", "createdAt": "2020-12-23T03:32:46Z", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/729", "merged": true, "mergeCommit": {"oid": "06a18c6708eb8d3691c147d2137545b4ffb0ecce"}, "closed": true, "closedAt": "2020-12-23T06:14:43Z", "author": {"login": "ywy2090"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdo2jkmAH2gAyNTQ0NTQ4NDg4OjQ3ZjNiNjU4MWQwMzIyZTFhNzRiMDZmYzg2ZDhkZjljMzgzYjlhNjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdo47E4gH2gAyNTQ0NTQ4NDg4OmU1YWEwYjUyOGMxNTAzNWFhMzE0YmNmYWM2ODZkZDFkZTFlN2Q2OWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "47f3b6581d0322e1a74b06fc86d8df9c383b9a66", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/47f3b6581d0322e1a74b06fc86d8df9c383b9a66", "committedDate": "2020-12-23T03:27:56Z", "message": "add CallResult to ContractCallException"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3NTExODA4", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/729#pullrequestreview-557511808", "createdAt": "2020-12-23T03:33:12Z", "commit": {"oid": "47f3b6581d0322e1a74b06fc86d8df9c383b9a66"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QwMzozMzoxMlrOIKQG6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QwMzozMzoxM1rOIKQG7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzYyMDU4Nw==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.30.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/729#discussion_r547620587", "createdAt": "2020-12-23T03:33:12Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/protocol/channel/ChannelEthereumService.java", "diffHunk": "@@ -92,20 +92,29 @@ public ChannelEthereumService() {\n                     }\n \n                     if (StatusCode.RevertInstruction.equals(callResult.getStatus())) {\n-                        throw new ContractCallException(\n-                                \"The execution of the contract rolled back\"\n-                                        + (revertMessage.getValue1()\n-                                                ? \", \" + revertMessage.getValue2()\n-                                                : \"\")\n-                                        + \".\");\n+                        ContractCallException contractCallException =\n+                                new ContractCallException(\n+                                        \"The execution of the contract rolled back\"\n+                                                + (revertMessage.getValue1()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47f3b6581d0322e1a74b06fc86d8df9c383b9a66"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzYyMDU4OA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.30.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/729#discussion_r547620588", "createdAt": "2020-12-23T03:33:13Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/protocol/channel/ChannelEthereumService.java", "diffHunk": "@@ -92,20 +92,29 @@ public ChannelEthereumService() {\n                     }\n \n                     if (StatusCode.RevertInstruction.equals(callResult.getStatus())) {\n-                        throw new ContractCallException(\n-                                \"The execution of the contract rolled back\"\n-                                        + (revertMessage.getValue1()\n-                                                ? \", \" + revertMessage.getValue2()\n-                                                : \"\")\n-                                        + \".\");\n+                        ContractCallException contractCallException =\n+                                new ContractCallException(\n+                                        \"The execution of the contract rolled back\"\n+                                                + (revertMessage.getValue1()\n+                                                        ? \", \" + revertMessage.getValue2()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47f3b6581d0322e1a74b06fc86d8df9c383b9a66"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzYyMDU4OQ==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.30.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/729#discussion_r547620589", "createdAt": "2020-12-23T03:33:13Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/protocol/channel/ChannelEthereumService.java", "diffHunk": "@@ -92,20 +92,29 @@ public ChannelEthereumService() {\n                     }\n \n                     if (StatusCode.RevertInstruction.equals(callResult.getStatus())) {\n-                        throw new ContractCallException(\n-                                \"The execution of the contract rolled back\"\n-                                        + (revertMessage.getValue1()\n-                                                ? \", \" + revertMessage.getValue2()\n-                                                : \"\")\n-                                        + \".\");\n+                        ContractCallException contractCallException =\n+                                new ContractCallException(\n+                                        \"The execution of the contract rolled back\"\n+                                                + (revertMessage.getValue1()\n+                                                        ? \", \" + revertMessage.getValue2()\n+                                                        : \"\")\n+                                                + \".\");\n+                        contractCallException.setCallOutput(callResult);\n+                        throw contractCallException;\n                     }\n                     if (StatusCode.CallAddressError.equals(callResult.getStatus())) {\n-                        throw new ContractCallException(\"The contract address is incorrect.\");\n+                        ContractCallException contractCallException =\n+                                new ContractCallException(\"The contract address is incorrect.\");\n+                        contractCallException.setCallOutput(callResult);\n+                        throw contractCallException;\n                     }\n \n                     if (!StatusCode.Success.equals(callResult.getStatus())) {\n-                        throw new ContractCallException(\n-                                StatusCode.getStatusMessage(callResult.getStatus()));\n+                        ContractCallException contractCallException =\n+                                new ContractCallException(\n+                                        StatusCode.getStatusMessage(callResult.getStatus()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47f3b6581d0322e1a74b06fc86d8df9c383b9a66"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5aa0b528c15035aa314bcfac686dd1de1e7d69c", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/e5aa0b528c15035aa314bcfac686dd1de1e7d69c", "committedDate": "2020-12-23T06:13:25Z", "message": "add support for jdk15"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1882, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}