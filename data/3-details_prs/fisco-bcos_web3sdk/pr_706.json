{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3MjM2ODA2", "number": 706, "title": "update getAddress compatible with 03 04 public key", "bodyText": "", "createdAt": "2020-09-15T11:40:46Z", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706", "merged": true, "mergeCommit": {"oid": "9034d6ec17306ee7cf8a3dfa52df22c451972f25"}, "closed": true, "closedAt": "2020-09-28T08:20:30Z", "author": {"login": "ywy2090"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJGRznAFqTQ4ODU5NDQ4NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNPMXaAFqTQ5NzI4NjAyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4NTk0NDg0", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#pullrequestreview-488594484", "createdAt": "2020-09-15T11:41:26Z", "commit": {"oid": "74a7654af618d099e581191ac4db63ea173a20ec"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMTo0MToyNlrOHR9sWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMTo0MToyNlrOHR9sYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODU5ODYxOQ==", "bodyText": "[PMD Java] Avoid empty if statements (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nEmptyIfStmt\nError Prone\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_errorprone.html#emptyifstmt\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r488598619", "createdAt": "2020-09-15T11:41:26Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/crypto/Keys.java", "diffHunk": "@@ -99,7 +100,20 @@ public static String getAddress(String publicKey) {\n             publicKeyNoPrefix =\n                     Strings.zeros(PUBLIC_KEY_LENGTH_IN_HEX - publicKeyNoPrefix.length())\n                             + publicKeyNoPrefix;\n+        } else if (publicKeyNoPrefix.length() == PUBLIC_KEY_LENGTH_IN_HEX) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74a7654af618d099e581191ac4db63ea173a20ec"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODU5ODYyMg==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r488598622", "createdAt": "2020-09-15T11:41:26Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/crypto/Keys.java", "diffHunk": "@@ -99,7 +100,20 @@ public static String getAddress(String publicKey) {\n             publicKeyNoPrefix =\n                     Strings.zeros(PUBLIC_KEY_LENGTH_IN_HEX - publicKeyNoPrefix.length())\n                             + publicKeyNoPrefix;\n+        } else if (publicKeyNoPrefix.length() == PUBLIC_KEY_LENGTH_IN_HEX) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74a7654af618d099e581191ac4db63ea173a20ec"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODU5ODYyNg==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r488598626", "createdAt": "2020-09-15T11:41:26Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/crypto/Keys.java", "diffHunk": "@@ -99,7 +100,20 @@ public static String getAddress(String publicKey) {\n             publicKeyNoPrefix =\n                     Strings.zeros(PUBLIC_KEY_LENGTH_IN_HEX - publicKeyNoPrefix.length())\n                             + publicKeyNoPrefix;\n+        } else if (publicKeyNoPrefix.length() == PUBLIC_KEY_LENGTH_IN_HEX) {\n+            // do nothing\n+        } else if (publicKeyNoPrefix.length() == PUBLIC_KEY_LENGTH_IN_HEX_WITH_COMPRESS_FLAG) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74a7654af618d099e581191ac4db63ea173a20ec"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e25e2a8d1802f1782f8b81160245643c8bbdfa3", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/2e25e2a8d1802f1782f8b81160245643c8bbdfa3", "committedDate": "2020-09-16T07:27:10Z", "message": "update getAddress compatible with 03 04 public key"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "74a7654af618d099e581191ac4db63ea173a20ec", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/74a7654af618d099e581191ac4db63ea173a20ec", "committedDate": "2020-09-15T11:24:58Z", "message": "update getAddress compatible with 03 04 public key"}, "afterCommit": {"oid": "2e25e2a8d1802f1782f8b81160245643c8bbdfa3", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/2e25e2a8d1802f1782f8b81160245643c8bbdfa3", "committedDate": "2020-09-16T07:27:10Z", "message": "update getAddress compatible with 03 04 public key"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5MzQ2MjU0", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#pullrequestreview-489346254", "createdAt": "2020-09-16T07:28:15Z", "commit": {"oid": "2e25e2a8d1802f1782f8b81160245643c8bbdfa3"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwNzoyODoxNVrOHSjuZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwNzoyODoxNlrOHSjubA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIyMTczMg==", "bodyText": "[PMD Java] Avoid empty if statements (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nEmptyIfStmt\nError Prone\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_errorprone.html#emptyifstmt\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r489221732", "createdAt": "2020-09-16T07:28:15Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/crypto/Keys.java", "diffHunk": "@@ -99,7 +102,27 @@ public static String getAddress(String publicKey) {\n             publicKeyNoPrefix =\n                     Strings.zeros(PUBLIC_KEY_LENGTH_IN_HEX - publicKeyNoPrefix.length())\n                             + publicKeyNoPrefix;\n+        } else if (publicKeyNoPrefix.length() == PUBLIC_KEY_LENGTH_IN_HEX) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e25e2a8d1802f1782f8b81160245643c8bbdfa3"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIyMTczNg==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r489221736", "createdAt": "2020-09-16T07:28:15Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/crypto/Keys.java", "diffHunk": "@@ -99,7 +102,27 @@ public static String getAddress(String publicKey) {\n             publicKeyNoPrefix =\n                     Strings.zeros(PUBLIC_KEY_LENGTH_IN_HEX - publicKeyNoPrefix.length())\n                             + publicKeyNoPrefix;\n+        } else if (publicKeyNoPrefix.length() == PUBLIC_KEY_LENGTH_IN_HEX) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e25e2a8d1802f1782f8b81160245643c8bbdfa3"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIyMTczNw==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r489221737", "createdAt": "2020-09-16T07:28:15Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/crypto/Keys.java", "diffHunk": "@@ -99,7 +102,27 @@ public static String getAddress(String publicKey) {\n             publicKeyNoPrefix =\n                     Strings.zeros(PUBLIC_KEY_LENGTH_IN_HEX - publicKeyNoPrefix.length())\n                             + publicKeyNoPrefix;\n+        } else if (publicKeyNoPrefix.length() == PUBLIC_KEY_LENGTH_IN_HEX) {\n+            // do nothing\n+        } else if (publicKeyNoPrefix.length() == PUBLIC_KEY_LENGTH_IN_HEX_WITH_COMPRESS_FLAG_2) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e25e2a8d1802f1782f8b81160245643c8bbdfa3"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIyMTczOQ==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r489221739", "createdAt": "2020-09-16T07:28:16Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/crypto/Keys.java", "diffHunk": "@@ -99,7 +102,27 @@ public static String getAddress(String publicKey) {\n             publicKeyNoPrefix =\n                     Strings.zeros(PUBLIC_KEY_LENGTH_IN_HEX - publicKeyNoPrefix.length())\n                             + publicKeyNoPrefix;\n+        } else if (publicKeyNoPrefix.length() == PUBLIC_KEY_LENGTH_IN_HEX) {\n+            // do nothing\n+        } else if (publicKeyNoPrefix.length() == PUBLIC_KEY_LENGTH_IN_HEX_WITH_COMPRESS_FLAG_2) {\n+            // 130 length,should start with 03 or 04\n+            if (!(publicKeyNoPrefix.startsWith(\"03\") || publicKeyNoPrefix.startsWith(\"04\"))) {\n+                throw new IllegalArgumentException(\n+                        \" publicKey not start with \\\"03\\\" or \\\"04\\\", publicKey: \" + publicKey);\n+            }\n+            publicKeyNoPrefix = publicKeyNoPrefix.substring(2);\n+        } else if (publicKeyNoPrefix.length() == PUBLIC_KEY_LENGTH_IN_HEX_WITH_COMPRESS_FLAG_1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e25e2a8d1802f1782f8b81160245643c8bbdfa3"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIyMTc0MA==", "bodyText": "[PMD Java] This call to String.startsWith can be rewritten using String.charAt(0) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSimplifyStartsWith\nPerformance\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_performance.html#simplifystartswith\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r489221740", "createdAt": "2020-09-16T07:28:16Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/crypto/Keys.java", "diffHunk": "@@ -99,7 +102,27 @@ public static String getAddress(String publicKey) {\n             publicKeyNoPrefix =\n                     Strings.zeros(PUBLIC_KEY_LENGTH_IN_HEX - publicKeyNoPrefix.length())\n                             + publicKeyNoPrefix;\n+        } else if (publicKeyNoPrefix.length() == PUBLIC_KEY_LENGTH_IN_HEX) {\n+            // do nothing\n+        } else if (publicKeyNoPrefix.length() == PUBLIC_KEY_LENGTH_IN_HEX_WITH_COMPRESS_FLAG_2) {\n+            // 130 length,should start with 03 or 04\n+            if (!(publicKeyNoPrefix.startsWith(\"03\") || publicKeyNoPrefix.startsWith(\"04\"))) {\n+                throw new IllegalArgumentException(\n+                        \" publicKey not start with \\\"03\\\" or \\\"04\\\", publicKey: \" + publicKey);\n+            }\n+            publicKeyNoPrefix = publicKeyNoPrefix.substring(2);\n+        } else if (publicKeyNoPrefix.length() == PUBLIC_KEY_LENGTH_IN_HEX_WITH_COMPRESS_FLAG_1) {\n+            // 129 length,should start with 3 or 4\n+            if (!(publicKeyNoPrefix.startsWith(\"3\") || publicKeyNoPrefix.startsWith(\"4\"))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e25e2a8d1802f1782f8b81160245643c8bbdfa3"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc62d68d2200d9fe822ffb5d6d1e6ec2c49c6b89", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/cc62d68d2200d9fe822ffb5d6d1e6ec2c49c6b89", "committedDate": "2020-09-17T02:18:27Z", "message": "fix ABIDefinition.isConstant bug when using solc 0.6.10"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwMjA0NTky", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#pullrequestreview-490204592", "createdAt": "2020-09-17T02:42:31Z", "commit": {"oid": "cc62d68d2200d9fe822ffb5d6d1e6ec2c49c6b89"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ade11f535511a3b5bbde2424d809026302373ca", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/0ade11f535511a3b5bbde2424d809026302373ca", "committedDate": "2020-09-17T06:34:33Z", "message": "add failedTxSum field"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "17bb43e6a2c087b75a039709339d7bd8f65d231d", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/17bb43e6a2c087b75a039709339d7bd8f65d231d", "committedDate": "2020-09-17T02:58:48Z", "message": "add failedTxSum field"}, "afterCommit": {"oid": "0ade11f535511a3b5bbde2424d809026302373ca", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/0ade11f535511a3b5bbde2424d809026302373ca", "committedDate": "2020-09-17T06:34:33Z", "message": "add failedTxSum field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/76eccee76628f89fec8c5872adebb070def50a0e", "committedDate": "2020-09-18T03:10:23Z", "message": "add interface ret receipt for precompiled service"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxMTIwMjQ2", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#pullrequestreview-491120246", "createdAt": "2020-09-18T03:11:14Z", "commit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "state": "COMMENTED", "comments": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwMzoxMToxNFrOHT8bPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwMzoxMToxOVrOHT8bZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAwNQ==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675005", "createdAt": "2020-09-18T03:11:14Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/cns/CnsService.java", "diffHunk": "@@ -99,14 +99,16 @@ public String getAddressByContractNameAndVersion(String contractNameAndVersion)\n \n     public String registerCns(String name, String version, String address, String abi)\n             throws Exception {\n-        CNS cns = lookupResolver();\n-        if (version.length() > MAX_VERSION_LENGTH) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.VersionExceeds);\n-        }\n-        TransactionReceipt receipt = cns.insert(name, version, address, abi).send();\n+        TransactionReceipt receipt = registerCnsAndRetReceipt(name, version, address, abi);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n+    public TransactionReceipt registerCnsAndRetReceipt(\n+            String name, String version, String address, String abi) throws Exception {\n+        CNS cns = lookupResolver();\n+        return cns.insert(name, version, address, abi).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAwNw==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675007", "createdAt": "2020-09-18T03:11:14Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/cns/CnsService.java", "diffHunk": "@@ -99,14 +99,16 @@ public String getAddressByContractNameAndVersion(String contractNameAndVersion)\n \n     public String registerCns(String name, String version, String address, String abi)\n             throws Exception {\n-        CNS cns = lookupResolver();\n-        if (version.length() > MAX_VERSION_LENGTH) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.VersionExceeds);\n-        }\n-        TransactionReceipt receipt = cns.insert(name, version, address, abi).send();\n+        TransactionReceipt receipt = registerCnsAndRetReceipt(name, version, address, abi);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n+    public TransactionReceipt registerCnsAndRetReceipt(\n+            String name, String version, String address, String abi) throws Exception {\n+        CNS cns = lookupResolver();\n+        return cns.insert(name, version, address, abi).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAwOA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675008", "createdAt": "2020-09-18T03:11:14Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/config/SystemConfigService.java", "diffHunk": "@@ -25,7 +25,12 @@ public SystemConfigService(Web3j web3j, Credentials credentials) {\n     }\n \n     public String setValueByKey(String key, String value) throws Exception {\n-        TransactionReceipt receipt = systemConfig.setValueByKey(key, value).send();\n+        TransactionReceipt receipt = setValueByKeyAndRetReceipt(key, value);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n+\n+    public TransactionReceipt setValueByKeyAndRetReceipt(String key, String value)\n+            throws Exception {\n+        return systemConfig.setValueByKey(key, value).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAxMA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675010", "createdAt": "2020-09-18T03:11:14Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/csm/ContractStatusService.java", "diffHunk": "@@ -32,37 +31,33 @@ public ContractStatusService(Web3j web3j, Credentials credentials) {\n     }\n \n     public String freeze(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n-\n-        TransactionReceipt receipt = contractLifeCycle.freeze(addr).send();\n+        TransactionReceipt receipt = freezeAndRetReceipt(addr);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    public String unfreeze(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n+    public TransactionReceipt freezeAndRetReceipt(String addr) throws Exception {\n+        return contractLifeCycle.freeze(addr).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAxNA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675014", "createdAt": "2020-09-18T03:11:15Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/csm/ContractStatusService.java", "diffHunk": "@@ -32,37 +31,33 @@ public ContractStatusService(Web3j web3j, Credentials credentials) {\n     }\n \n     public String freeze(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n-\n-        TransactionReceipt receipt = contractLifeCycle.freeze(addr).send();\n+        TransactionReceipt receipt = freezeAndRetReceipt(addr);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    public String unfreeze(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n+    public TransactionReceipt freezeAndRetReceipt(String addr) throws Exception {\n+        return contractLifeCycle.freeze(addr).send();\n+    }\n \n-        TransactionReceipt receipt = contractLifeCycle.unfreeze(addr).send();\n+    public String unfreeze(String addr) throws Exception {\n+        TransactionReceipt receipt = unfreezeAndRetReceipt(addr);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    public String grantManager(String addr, String user) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr) || !WalletUtils.isValidAddress(user)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n+    public TransactionReceipt unfreezeAndRetReceipt(String addr) throws Exception {\n+        return contractLifeCycle.unfreeze(addr).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAxNw==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675017", "createdAt": "2020-09-18T03:11:15Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/csm/ContractStatusService.java", "diffHunk": "@@ -32,37 +31,33 @@ public ContractStatusService(Web3j web3j, Credentials credentials) {\n     }\n \n     public String freeze(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n-\n-        TransactionReceipt receipt = contractLifeCycle.freeze(addr).send();\n+        TransactionReceipt receipt = freezeAndRetReceipt(addr);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    public String unfreeze(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n+    public TransactionReceipt freezeAndRetReceipt(String addr) throws Exception {\n+        return contractLifeCycle.freeze(addr).send();\n+    }\n \n-        TransactionReceipt receipt = contractLifeCycle.unfreeze(addr).send();\n+    public String unfreeze(String addr) throws Exception {\n+        TransactionReceipt receipt = unfreezeAndRetReceipt(addr);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    public String grantManager(String addr, String user) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr) || !WalletUtils.isValidAddress(user)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n+    public TransactionReceipt unfreezeAndRetReceipt(String addr) throws Exception {\n+        return contractLifeCycle.unfreeze(addr).send();\n+    }\n \n-        TransactionReceipt receipt = contractLifeCycle.grantManager(addr, user).send();\n+    public String grantManager(String addr, String user) throws Exception {\n+        TransactionReceipt receipt = grantManagerAndRetReceipt(addr, user);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    public String getStatus(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n+    public TransactionReceipt grantManagerAndRetReceipt(String addr, String user) throws Exception {\n+        return contractLifeCycle.grantManager(addr, user).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAxOA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675018", "createdAt": "2020-09-18T03:11:15Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/ChainGovernanceService.java", "diffHunk": "@@ -69,11 +69,14 @@ public BigInteger queryThreshold() throws Exception {\n     }\n \n     public String grantCommitteeMember(String account) throws Exception {\n-        TransactionReceipt transactionReceipt =\n-                chainGovernance.grantCommitteeMember(account).send();\n+        TransactionReceipt transactionReceipt = grantCommitteeMemberAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt grantCommitteeMemberAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.grantCommitteeMember(account).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAxOQ==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675019", "createdAt": "2020-09-18T03:11:16Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/ChainGovernanceService.java", "diffHunk": "@@ -85,37 +88,59 @@ public String grantCommitteeMember(String account) throws Exception {\n     }\n \n     public String updateThreshold(int threshold) throws Exception {\n-        TransactionReceipt transactionReceipt =\n-                chainGovernance.updateThreshold(BigInteger.valueOf(threshold)).send();\n+        TransactionReceipt transactionReceipt = updateThresholdAndRetReceipt(threshold);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt updateThresholdAndRetReceipt(int threshold) throws Exception {\n+        return chainGovernance.updateThreshold(BigInteger.valueOf(threshold)).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAyMQ==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675021", "createdAt": "2020-09-18T03:11:16Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/ChainGovernanceService.java", "diffHunk": "@@ -85,37 +88,59 @@ public String grantCommitteeMember(String account) throws Exception {\n     }\n \n     public String updateThreshold(int threshold) throws Exception {\n-        TransactionReceipt transactionReceipt =\n-                chainGovernance.updateThreshold(BigInteger.valueOf(threshold)).send();\n+        TransactionReceipt transactionReceipt = updateThresholdAndRetReceipt(threshold);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt updateThresholdAndRetReceipt(int threshold) throws Exception {\n+        return chainGovernance.updateThreshold(BigInteger.valueOf(threshold)).send();\n+    }\n+\n     public String revokeCommitteeMember(String account) throws Exception {\n-        TransactionReceipt transactionReceipt =\n-                chainGovernance.revokeCommitteeMember(account).send();\n+        TransactionReceipt transactionReceipt = revokeCommitteeMemberAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt revokeCommitteeMemberAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.revokeCommitteeMember(account).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAyMg==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675022", "createdAt": "2020-09-18T03:11:16Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/ChainGovernanceService.java", "diffHunk": "@@ -85,37 +88,59 @@ public String grantCommitteeMember(String account) throws Exception {\n     }\n \n     public String updateThreshold(int threshold) throws Exception {\n-        TransactionReceipt transactionReceipt =\n-                chainGovernance.updateThreshold(BigInteger.valueOf(threshold)).send();\n+        TransactionReceipt transactionReceipt = updateThresholdAndRetReceipt(threshold);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt updateThresholdAndRetReceipt(int threshold) throws Exception {\n+        return chainGovernance.updateThreshold(BigInteger.valueOf(threshold)).send();\n+    }\n+\n     public String revokeCommitteeMember(String account) throws Exception {\n-        TransactionReceipt transactionReceipt =\n-                chainGovernance.revokeCommitteeMember(account).send();\n+        TransactionReceipt transactionReceipt = revokeCommitteeMemberAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt revokeCommitteeMemberAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.revokeCommitteeMember(account).send();\n+    }\n+\n     public String grantOperator(String account) throws Exception {\n-        TransactionReceipt transactionReceipt = chainGovernance.grantOperator(account).send();\n+        TransactionReceipt transactionReceipt = grantOperatorAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt grantOperatorAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.grantOperator(account).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAyNA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675024", "createdAt": "2020-09-18T03:11:16Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/ChainGovernanceService.java", "diffHunk": "@@ -85,37 +88,59 @@ public String grantCommitteeMember(String account) throws Exception {\n     }\n \n     public String updateThreshold(int threshold) throws Exception {\n-        TransactionReceipt transactionReceipt =\n-                chainGovernance.updateThreshold(BigInteger.valueOf(threshold)).send();\n+        TransactionReceipt transactionReceipt = updateThresholdAndRetReceipt(threshold);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt updateThresholdAndRetReceipt(int threshold) throws Exception {\n+        return chainGovernance.updateThreshold(BigInteger.valueOf(threshold)).send();\n+    }\n+\n     public String revokeCommitteeMember(String account) throws Exception {\n-        TransactionReceipt transactionReceipt =\n-                chainGovernance.revokeCommitteeMember(account).send();\n+        TransactionReceipt transactionReceipt = revokeCommitteeMemberAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt revokeCommitteeMemberAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.revokeCommitteeMember(account).send();\n+    }\n+\n     public String grantOperator(String account) throws Exception {\n-        TransactionReceipt transactionReceipt = chainGovernance.grantOperator(account).send();\n+        TransactionReceipt transactionReceipt = grantOperatorAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt grantOperatorAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.grantOperator(account).send();\n+    }\n+\n     public String revokeOperator(String account) throws Exception {\n-        TransactionReceipt transactionReceipt = chainGovernance.revokeOperator(account).send();\n+        TransactionReceipt transactionReceipt = revokeOperatorAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt revokeOperatorAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.revokeOperator(account).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAyNw==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675027", "createdAt": "2020-09-18T03:11:16Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/ChainGovernanceService.java", "diffHunk": "@@ -85,37 +88,59 @@ public String grantCommitteeMember(String account) throws Exception {\n     }\n \n     public String updateThreshold(int threshold) throws Exception {\n-        TransactionReceipt transactionReceipt =\n-                chainGovernance.updateThreshold(BigInteger.valueOf(threshold)).send();\n+        TransactionReceipt transactionReceipt = updateThresholdAndRetReceipt(threshold);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt updateThresholdAndRetReceipt(int threshold) throws Exception {\n+        return chainGovernance.updateThreshold(BigInteger.valueOf(threshold)).send();\n+    }\n+\n     public String revokeCommitteeMember(String account) throws Exception {\n-        TransactionReceipt transactionReceipt =\n-                chainGovernance.revokeCommitteeMember(account).send();\n+        TransactionReceipt transactionReceipt = revokeCommitteeMemberAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt revokeCommitteeMemberAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.revokeCommitteeMember(account).send();\n+    }\n+\n     public String grantOperator(String account) throws Exception {\n-        TransactionReceipt transactionReceipt = chainGovernance.grantOperator(account).send();\n+        TransactionReceipt transactionReceipt = grantOperatorAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt grantOperatorAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.grantOperator(account).send();\n+    }\n+\n     public String revokeOperator(String account) throws Exception {\n-        TransactionReceipt transactionReceipt = chainGovernance.revokeOperator(account).send();\n+        TransactionReceipt transactionReceipt = revokeOperatorAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt revokeOperatorAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.revokeOperator(account).send();\n+    }\n+\n     public String freezeAccount(String account) throws Exception {\n-        TransactionReceipt transactionReceipt = chainGovernance.freezeAccount(account).send();\n+        TransactionReceipt transactionReceipt = freezeAccountAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt freezeAccountAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.freezeAccount(account).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAzMA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675030", "createdAt": "2020-09-18T03:11:16Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/ChainGovernanceService.java", "diffHunk": "@@ -85,37 +88,59 @@ public String grantCommitteeMember(String account) throws Exception {\n     }\n \n     public String updateThreshold(int threshold) throws Exception {\n-        TransactionReceipt transactionReceipt =\n-                chainGovernance.updateThreshold(BigInteger.valueOf(threshold)).send();\n+        TransactionReceipt transactionReceipt = updateThresholdAndRetReceipt(threshold);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt updateThresholdAndRetReceipt(int threshold) throws Exception {\n+        return chainGovernance.updateThreshold(BigInteger.valueOf(threshold)).send();\n+    }\n+\n     public String revokeCommitteeMember(String account) throws Exception {\n-        TransactionReceipt transactionReceipt =\n-                chainGovernance.revokeCommitteeMember(account).send();\n+        TransactionReceipt transactionReceipt = revokeCommitteeMemberAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt revokeCommitteeMemberAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.revokeCommitteeMember(account).send();\n+    }\n+\n     public String grantOperator(String account) throws Exception {\n-        TransactionReceipt transactionReceipt = chainGovernance.grantOperator(account).send();\n+        TransactionReceipt transactionReceipt = grantOperatorAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt grantOperatorAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.grantOperator(account).send();\n+    }\n+\n     public String revokeOperator(String account) throws Exception {\n-        TransactionReceipt transactionReceipt = chainGovernance.revokeOperator(account).send();\n+        TransactionReceipt transactionReceipt = revokeOperatorAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt revokeOperatorAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.revokeOperator(account).send();\n+    }\n+\n     public String freezeAccount(String account) throws Exception {\n-        TransactionReceipt transactionReceipt = chainGovernance.freezeAccount(account).send();\n+        TransactionReceipt transactionReceipt = freezeAccountAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt freezeAccountAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.freezeAccount(account).send();\n+    }\n+\n     public String unfreezeAccount(String account) throws Exception {\n-        TransactionReceipt transactionReceipt = chainGovernance.unfreezeAccount(account).send();\n+        TransactionReceipt transactionReceipt = unfreezeAccountAndRetReceipt(account);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt unfreezeAccountAndRetReceipt(String account) throws Exception {\n+        return chainGovernance.unfreezeAccount(account).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAzMQ==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675031", "createdAt": "2020-09-18T03:11:17Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/PermissionService.java", "diffHunk": "@@ -31,28 +30,36 @@ public PermissionService(Web3j web3j, Credentials credentials) {\n     }\n \n     public List<PermissionInfo> queryPermission(String address) throws Exception {\n-        String permissionyInfo = permission.queryPermission(address).send();\n+        String permissionInfo = permission.queryPermission(address).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAzMw==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675033", "createdAt": "2020-09-18T03:11:17Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/PermissionService.java", "diffHunk": "@@ -31,28 +30,36 @@ public PermissionService(Web3j web3j, Credentials credentials) {\n     }\n \n     public List<PermissionInfo> queryPermission(String address) throws Exception {\n-        String permissionyInfo = permission.queryPermission(address).send();\n+        String permissionInfo = permission.queryPermission(address).send();\n         ObjectMapper objectMapper = ObjectMapperFactory.getObjectMapper();\n         return objectMapper.readValue(\n-                permissionyInfo,\n+                permissionInfo,\n                 objectMapper\n                         .getTypeFactory()\n                         .constructCollectionType(List.class, PermissionInfo.class));\n     }\n \n     public String grantWrite(String address, String user) throws Exception {\n-        TransactionReceipt receipt = permission.grantWrite(address, user).send();\n-        return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n+        TransactionReceipt transactionReceipt = grantWriteAndRetReceipt(address, user);\n+        return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n+    }\n+\n+    public TransactionReceipt grantWriteAndRetReceipt(String address, String user)\n+            throws Exception {\n+        return permission.grantWrite(address, user).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAzNA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675034", "createdAt": "2020-09-18T03:11:17Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/PermissionService.java", "diffHunk": "@@ -31,28 +30,36 @@ public PermissionService(Web3j web3j, Credentials credentials) {\n     }\n \n     public List<PermissionInfo> queryPermission(String address) throws Exception {\n-        String permissionyInfo = permission.queryPermission(address).send();\n+        String permissionInfo = permission.queryPermission(address).send();\n         ObjectMapper objectMapper = ObjectMapperFactory.getObjectMapper();\n         return objectMapper.readValue(\n-                permissionyInfo,\n+                permissionInfo,\n                 objectMapper\n                         .getTypeFactory()\n                         .constructCollectionType(List.class, PermissionInfo.class));\n     }\n \n     public String grantWrite(String address, String user) throws Exception {\n-        TransactionReceipt receipt = permission.grantWrite(address, user).send();\n-        return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n+        TransactionReceipt transactionReceipt = grantWriteAndRetReceipt(address, user);\n+        return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n+    }\n+\n+    public TransactionReceipt grantWriteAndRetReceipt(String address, String user)\n+            throws Exception {\n+        return permission.grantWrite(address, user).send();\n     }\n \n     public String revokeWrite(String address, String user) throws Exception {\n-        TransactionReceipt receipt = permission.revokeWrite(address, user).send();\n+        TransactionReceipt receipt = revokeWriteAndRetReceipt(address, user);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n+    public TransactionReceipt revokeWriteAndRetReceipt(String address, String user)\n+            throws Exception {\n+        return permission.revokeWrite(address, user).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAzNQ==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675035", "createdAt": "2020-09-18T03:11:17Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/PermissionService.java", "diffHunk": "@@ -120,25 +127,40 @@ public String revokeSysConfigManager(String grantress) throws Exception {\n         return revoke(PrecompiledCommon.SYS_CONFIG, grantress);\n     }\n \n+    public TransactionReceipt revokeSysConfigManagerAndRetReceipt(String grantress)\n+            throws Exception {\n+        return revokeAndRetReceipt(PrecompiledCommon.SYS_CONFIG, grantress);\n+    }\n+\n     public List<PermissionInfo> listSysConfigManager() throws Exception {\n         return list(PrecompiledCommon.SYS_CONFIG);\n     }\n \n-    private String grant(String tableName, String grantress) throws Exception {\n-        TransactionReceipt receipt = permission.insert(tableName, grantress).send();\n+    public String grant(String tableName, String grandness) throws Exception {\n+        TransactionReceipt receipt = grantAndRetReceipt(tableName, grandness);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    private String revoke(String tableName, String address) throws Exception {\n-        TransactionReceipt receipt = permission.remove(tableName, address).send();\n+    private TransactionReceipt grantAndRetReceipt(String tableName, String grantress)\n+            throws Exception {\n+        return permission.insert(tableName, grantress).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 93}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAzNg==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675036", "createdAt": "2020-09-18T03:11:17Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/PermissionService.java", "diffHunk": "@@ -120,25 +127,40 @@ public String revokeSysConfigManager(String grantress) throws Exception {\n         return revoke(PrecompiledCommon.SYS_CONFIG, grantress);\n     }\n \n+    public TransactionReceipt revokeSysConfigManagerAndRetReceipt(String grantress)\n+            throws Exception {\n+        return revokeAndRetReceipt(PrecompiledCommon.SYS_CONFIG, grantress);\n+    }\n+\n     public List<PermissionInfo> listSysConfigManager() throws Exception {\n         return list(PrecompiledCommon.SYS_CONFIG);\n     }\n \n-    private String grant(String tableName, String grantress) throws Exception {\n-        TransactionReceipt receipt = permission.insert(tableName, grantress).send();\n+    public String grant(String tableName, String grandness) throws Exception {\n+        TransactionReceipt receipt = grantAndRetReceipt(tableName, grandness);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    private String revoke(String tableName, String address) throws Exception {\n-        TransactionReceipt receipt = permission.remove(tableName, address).send();\n+    private TransactionReceipt grantAndRetReceipt(String tableName, String grantress)\n+            throws Exception {\n+        return permission.insert(tableName, grantress).send();\n+    }\n+\n+    public String revoke(String tableName, String address) throws Exception {\n+        TransactionReceipt receipt = revokeAndRetReceipt(tableName, address);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n+    private TransactionReceipt revokeAndRetReceipt(String tableName, String address)\n+            throws Exception {\n+        return permission.remove(tableName, address).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAzNw==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675037", "createdAt": "2020-09-18T03:11:18Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/PermissionService.java", "diffHunk": "@@ -120,25 +127,40 @@ public String revokeSysConfigManager(String grantress) throws Exception {\n         return revoke(PrecompiledCommon.SYS_CONFIG, grantress);\n     }\n \n+    public TransactionReceipt revokeSysConfigManagerAndRetReceipt(String grantress)\n+            throws Exception {\n+        return revokeAndRetReceipt(PrecompiledCommon.SYS_CONFIG, grantress);\n+    }\n+\n     public List<PermissionInfo> listSysConfigManager() throws Exception {\n         return list(PrecompiledCommon.SYS_CONFIG);\n     }\n \n-    private String grant(String tableName, String grantress) throws Exception {\n-        TransactionReceipt receipt = permission.insert(tableName, grantress).send();\n+    public String grant(String tableName, String grandness) throws Exception {\n+        TransactionReceipt receipt = grantAndRetReceipt(tableName, grandness);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    private String revoke(String tableName, String address) throws Exception {\n-        TransactionReceipt receipt = permission.remove(tableName, address).send();\n+    private TransactionReceipt grantAndRetReceipt(String tableName, String grantress)\n+            throws Exception {\n+        return permission.insert(tableName, grantress).send();\n+    }\n+\n+    public String revoke(String tableName, String address) throws Exception {\n+        TransactionReceipt receipt = revokeAndRetReceipt(tableName, address);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n+    private TransactionReceipt revokeAndRetReceipt(String tableName, String address)\n+            throws Exception {\n+        return permission.remove(tableName, address).send();\n+    }\n+\n     private List<PermissionInfo> list(String tableName) throws Exception {\n-        String permissionyInfo = permission.queryByName(tableName).send();\n+        String permissionInfo = permission.queryByName(tableName).send();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 108}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTAzOQ==", "bodyText": "[PMD Java] A method/constructor should not explicitly throw java.lang.Exception (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSignatureDeclareThrowsException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#signaturedeclarethrowsexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675039", "createdAt": "2020-09-18T03:11:18Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/cns/CnsService.java", "diffHunk": "@@ -99,14 +99,16 @@ public String getAddressByContractNameAndVersion(String contractNameAndVersion)\n \n     public String registerCns(String name, String version, String address, String abi)\n             throws Exception {\n-        CNS cns = lookupResolver();\n-        if (version.length() > MAX_VERSION_LENGTH) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.VersionExceeds);\n-        }\n-        TransactionReceipt receipt = cns.insert(name, version, address, abi).send();\n+        TransactionReceipt receipt = registerCnsAndRetReceipt(name, version, address, abi);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n+    public TransactionReceipt registerCnsAndRetReceipt(\n+            String name, String version, String address, String abi) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTA0MQ==", "bodyText": "[PMD Java] A method/constructor should not explicitly throw java.lang.Exception (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSignatureDeclareThrowsException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#signaturedeclarethrowsexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675041", "createdAt": "2020-09-18T03:11:18Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/config/SystemConfigService.java", "diffHunk": "@@ -25,7 +25,12 @@ public SystemConfigService(Web3j web3j, Credentials credentials) {\n     }\n \n     public String setValueByKey(String key, String value) throws Exception {\n-        TransactionReceipt receipt = systemConfig.setValueByKey(key, value).send();\n+        TransactionReceipt receipt = setValueByKeyAndRetReceipt(key, value);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n+\n+    public TransactionReceipt setValueByKeyAndRetReceipt(String key, String value)\n+            throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTA0Mg==", "bodyText": "[PMD Java] A method/constructor should not explicitly throw java.lang.Exception (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSignatureDeclareThrowsException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#signaturedeclarethrowsexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675042", "createdAt": "2020-09-18T03:11:18Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/csm/ContractStatusService.java", "diffHunk": "@@ -32,37 +31,33 @@ public ContractStatusService(Web3j web3j, Credentials credentials) {\n     }\n \n     public String freeze(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n-\n-        TransactionReceipt receipt = contractLifeCycle.freeze(addr).send();\n+        TransactionReceipt receipt = freezeAndRetReceipt(addr);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    public String unfreeze(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n+    public TransactionReceipt freezeAndRetReceipt(String addr) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTA0NA==", "bodyText": "[PMD Java] A method/constructor should not explicitly throw java.lang.Exception (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSignatureDeclareThrowsException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#signaturedeclarethrowsexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675044", "createdAt": "2020-09-18T03:11:18Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/csm/ContractStatusService.java", "diffHunk": "@@ -32,37 +31,33 @@ public ContractStatusService(Web3j web3j, Credentials credentials) {\n     }\n \n     public String freeze(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n-\n-        TransactionReceipt receipt = contractLifeCycle.freeze(addr).send();\n+        TransactionReceipt receipt = freezeAndRetReceipt(addr);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    public String unfreeze(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n+    public TransactionReceipt freezeAndRetReceipt(String addr) throws Exception {\n+        return contractLifeCycle.freeze(addr).send();\n+    }\n \n-        TransactionReceipt receipt = contractLifeCycle.unfreeze(addr).send();\n+    public String unfreeze(String addr) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTA0Ng==", "bodyText": "[PMD Java] A method/constructor should not explicitly throw java.lang.Exception (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSignatureDeclareThrowsException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#signaturedeclarethrowsexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675046", "createdAt": "2020-09-18T03:11:18Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/csm/ContractStatusService.java", "diffHunk": "@@ -32,37 +31,33 @@ public ContractStatusService(Web3j web3j, Credentials credentials) {\n     }\n \n     public String freeze(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n-\n-        TransactionReceipt receipt = contractLifeCycle.freeze(addr).send();\n+        TransactionReceipt receipt = freezeAndRetReceipt(addr);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    public String unfreeze(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n+    public TransactionReceipt freezeAndRetReceipt(String addr) throws Exception {\n+        return contractLifeCycle.freeze(addr).send();\n+    }\n \n-        TransactionReceipt receipt = contractLifeCycle.unfreeze(addr).send();\n+    public String unfreeze(String addr) throws Exception {\n+        TransactionReceipt receipt = unfreezeAndRetReceipt(addr);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    public String grantManager(String addr, String user) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr) || !WalletUtils.isValidAddress(user)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n+    public TransactionReceipt unfreezeAndRetReceipt(String addr) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3NTA0Nw==", "bodyText": "[PMD Java] A method/constructor should not explicitly throw java.lang.Exception (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSignatureDeclareThrowsException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#signaturedeclarethrowsexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r490675047", "createdAt": "2020-09-18T03:11:19Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/csm/ContractStatusService.java", "diffHunk": "@@ -32,37 +31,33 @@ public ContractStatusService(Web3j web3j, Credentials credentials) {\n     }\n \n     public String freeze(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n-\n-        TransactionReceipt receipt = contractLifeCycle.freeze(addr).send();\n+        TransactionReceipt receipt = freezeAndRetReceipt(addr);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    public String unfreeze(String addr) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n+    public TransactionReceipt freezeAndRetReceipt(String addr) throws Exception {\n+        return contractLifeCycle.freeze(addr).send();\n+    }\n \n-        TransactionReceipt receipt = contractLifeCycle.unfreeze(addr).send();\n+    public String unfreeze(String addr) throws Exception {\n+        TransactionReceipt receipt = unfreezeAndRetReceipt(addr);\n         return PrecompiledCommon.handleTransactionReceipt(receipt, web3j);\n     }\n \n-    public String grantManager(String addr, String user) throws Exception {\n-        if (!WalletUtils.isValidAddress(addr) || !WalletUtils.isValidAddress(user)) {\n-            return PrecompiledCommon.transferToJson(PrecompiledCommon.InvalidAddress);\n-        }\n+    public TransactionReceipt unfreezeAndRetReceipt(String addr) throws Exception {\n+        return contractLifeCycle.unfreeze(addr).send();\n+    }\n \n-        TransactionReceipt receipt = contractLifeCycle.grantManager(addr, user).send();\n+    public String grantManager(String addr, String user) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76eccee76628f89fec8c5872adebb070def50a0e"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfe636dac88ae08e1937c939f1f2af138ccf7402", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/bfe636dac88ae08e1937c939f1f2af138ccf7402", "committedDate": "2020-09-18T07:26:02Z", "message": "fix getConsensusStatus response decode exception bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9db7613d180becc7cf3c447da5024b3cb4a4cf38", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/9db7613d180becc7cf3c447da5024b3cb4a4cf38", "committedDate": "2020-09-18T08:59:16Z", "message": "add interface ret receipt for consensus precompiled service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbc28a261ee89878b06132161ad57a5e1522f4eb", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/bbc28a261ee89878b06132161ad57a5e1522f4eb", "committedDate": "2020-09-21T23:35:14Z", "message": "add seq info for timeout message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61f0c41a1e0aa028854e61afcac09fa92b504089", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/61f0c41a1e0aa028854e61afcac09fa92b504089", "committedDate": "2020-09-22T04:48:52Z", "message": "remove throw TransactionException when it's not necessary"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6eda1dfd55d4d9b8b2ad8d40ffe892c0869686fb", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/6eda1dfd55d4d9b8b2ad8d40ffe892c0869686fb", "committedDate": "2020-09-22T02:35:21Z", "message": "add TransactionReceipt to TransactionException"}, "afterCommit": {"oid": "9295950b23038499bc1b10fddcbbc78293a52cfc", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/9295950b23038499bc1b10fddcbbc78293a52cfc", "committedDate": "2020-09-22T04:48:52Z", "message": "add TransactionReceipt to TransactionException"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9295950b23038499bc1b10fddcbbc78293a52cfc", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/9295950b23038499bc1b10fddcbbc78293a52cfc", "committedDate": "2020-09-22T04:48:52Z", "message": "add TransactionReceipt to TransactionException"}, "afterCommit": {"oid": "71ce26adfe59368d5645d10a0519584dc62e35ea", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/71ce26adfe59368d5645d10a0519584dc62e35ea", "committedDate": "2020-09-22T05:07:55Z", "message": "add TransactionReceipt to TransactionException"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMTMyMzg1", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#pullrequestreview-493132385", "createdAt": "2020-09-22T05:18:35Z", "commit": {"oid": "7188330d0acc4b02506a961f8ab644e5f4f3ae26"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNToxODozNVrOHVqhZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNToxODozNVrOHVqhZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ3ODgyMQ==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r492478821", "createdAt": "2020-09-22T05:18:35Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/ChainGovernanceService.java", "diffHunk": "@@ -54,12 +54,17 @@ public ChainGovernanceService(Web3j web3j, Credentials credentials) {\n \n     public String updateCommitteeMemberWeight(String account, int weight) throws Exception {\n         TransactionReceipt transactionReceipt =\n-                chainGovernance\n-                        .updateCommitteeMemberWeight(account, BigInteger.valueOf(weight))\n-                        .send();\n+                updateCommitteeMemberWeightAndRetReceipt(account, weight);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt updateCommitteeMemberWeightAndRetReceipt(String account, int weight)\n+            throws Exception {\n+        return chainGovernance", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7188330d0acc4b02506a961f8ab644e5f4f3ae26"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ3ODgyMg==", "bodyText": "[PMD Java] A method/constructor should not explicitly throw java.lang.Exception (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSignatureDeclareThrowsException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#signaturedeclarethrowsexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r492478822", "createdAt": "2020-09-22T05:18:35Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/ChainGovernanceService.java", "diffHunk": "@@ -54,12 +54,17 @@ public ChainGovernanceService(Web3j web3j, Credentials credentials) {\n \n     public String updateCommitteeMemberWeight(String account, int weight) throws Exception {\n         TransactionReceipt transactionReceipt =\n-                chainGovernance\n-                        .updateCommitteeMemberWeight(account, BigInteger.valueOf(weight))\n-                        .send();\n+                updateCommitteeMemberWeightAndRetReceipt(account, weight);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt updateCommitteeMemberWeightAndRetReceipt(String account, int weight)\n+            throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7188330d0acc4b02506a961f8ab644e5f4f3ae26"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ3ODgyMw==", "bodyText": "[PMD Java] System.out.println is used (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSystemPrintln\nBest Practices\n2\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_bestpractices.html#systemprintln\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r492478823", "createdAt": "2020-09-22T05:18:35Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,31 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n+import com.sun.org.apache.regexp.internal.RE;\n import org.fisco.bcos.TestBase;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceiptWithProof;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\n+\t  TransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt\", Common.TX_ORIGIN);\n+\t  Assert.assertTrue(transactionReceipt.isStatusOK());\n+\t  int i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t  System.out.println(i);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7188330d0acc4b02506a961f8ab644e5f4f3ae26"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ead745d455675af825b4630009874306b2f6f92c", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/ead745d455675af825b4630009874306b2f6f92c", "committedDate": "2020-09-28T01:42:26Z", "message": "add TransactionReceipt to TransactionException"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7188330d0acc4b02506a961f8ab644e5f4f3ae26", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/7188330d0acc4b02506a961f8ab644e5f4f3ae26", "committedDate": "2020-09-22T05:17:44Z", "message": "test"}, "afterCommit": {"oid": "ead745d455675af825b4630009874306b2f6f92c", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/ead745d455675af825b4630009874306b2f6f92c", "committedDate": "2020-09-28T01:42:26Z", "message": "add TransactionReceipt to TransactionException"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MTQyNjA1", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#pullrequestreview-497142605", "createdAt": "2020-09-28T01:43:31Z", "commit": {"oid": "ead745d455675af825b4630009874306b2f6f92c"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMTo0MzozMVrOHYsHuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMTo0MzozMlrOHYsHwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1MDc0NQ==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495650745", "createdAt": "2020-09-28T01:43:31Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/ChainGovernanceService.java", "diffHunk": "@@ -54,12 +54,17 @@ public ChainGovernanceService(Web3j web3j, Credentials credentials) {\n \n     public String updateCommitteeMemberWeight(String account, int weight) throws Exception {\n         TransactionReceipt transactionReceipt =\n-                chainGovernance\n-                        .updateCommitteeMemberWeight(account, BigInteger.valueOf(weight))\n-                        .send();\n+                updateCommitteeMemberWeightAndRetReceipt(account, weight);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt updateCommitteeMemberWeightAndRetReceipt(String account, int weight)\n+            throws Exception {\n+        return chainGovernance", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ead745d455675af825b4630009874306b2f6f92c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1MDc0Nw==", "bodyText": "[PMD Java] A method/constructor should not explicitly throw java.lang.Exception (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSignatureDeclareThrowsException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_design.html#signaturedeclarethrowsexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495650747", "createdAt": "2020-09-28T01:43:31Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/precompile/permission/ChainGovernanceService.java", "diffHunk": "@@ -54,12 +54,17 @@ public ChainGovernanceService(Web3j web3j, Credentials credentials) {\n \n     public String updateCommitteeMemberWeight(String account, int weight) throws Exception {\n         TransactionReceipt transactionReceipt =\n-                chainGovernance\n-                        .updateCommitteeMemberWeight(account, BigInteger.valueOf(weight))\n-                        .send();\n+                updateCommitteeMemberWeightAndRetReceipt(account, weight);\n         return PrecompiledCommon.handleTransactionReceipt(transactionReceipt, web3j);\n     }\n \n+    public TransactionReceipt updateCommitteeMemberWeightAndRetReceipt(String account, int weight)\n+            throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ead745d455675af825b4630009874306b2f6f92c"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1MDc0OA==", "bodyText": "[PMD Java] JUnit assertions should include a message (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nJUnitAssertionsShouldIncludeMessage\nBest Practices\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_bestpractices.html#junitassertionsshouldincludemessage\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495650748", "createdAt": "2020-09-28T01:43:31Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,28 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\n+\t  TransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt\", Common.TX_ORIGIN);\n+\t  Assert.assertTrue(transactionReceipt.isStatusOK());\n+\t  int i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t  System.out.println(\" ===> \" + i);\n+\t  assertTrue(i == PrecompiledCommon.InvalidTableNotExist);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ead745d455675af825b4630009874306b2f6f92c"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1MDc1MA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495650750", "createdAt": "2020-09-28T01:43:31Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,28 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\n+\t  TransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt\", Common.TX_ORIGIN);\n+\t  Assert.assertTrue(transactionReceipt.isStatusOK());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ead745d455675af825b4630009874306b2f6f92c"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1MDc1Mw==", "bodyText": "[PMD Java] System.out.println is used (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSystemPrintln\nBest Practices\n2\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_bestpractices.html#systemprintln\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495650753", "createdAt": "2020-09-28T01:43:32Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,28 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\n+\t  TransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt\", Common.TX_ORIGIN);\n+\t  Assert.assertTrue(transactionReceipt.isStatusOK());\n+\t  int i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t  System.out.println(\" ===> \" + i);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ead745d455675af825b4630009874306b2f6f92c"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1MDc1NA==", "bodyText": "[PMD Java] Use assertSame(x, y) instead of assertTrue(x==y), or assertNotSame(x,y) vs assertFalse(x==y) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nUseAssertSameInsteadOfAssertTrue\nBest Practices\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_bestpractices.html#useassertsameinsteadofasserttrue\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495650754", "createdAt": "2020-09-28T01:43:32Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,28 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\n+\t  TransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt\", Common.TX_ORIGIN);\n+\t  Assert.assertTrue(transactionReceipt.isStatusOK());\n+\t  int i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t  System.out.println(\" ===> \" + i);\n+\t  assertTrue(i == PrecompiledCommon.InvalidTableNotExist);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ead745d455675af825b4630009874306b2f6f92c"}, "originalPosition": 30}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4d4a607882bd956ad2d70362b82f062c725f6e18", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/4d4a607882bd956ad2d70362b82f062c725f6e18", "committedDate": "2020-09-28T01:58:19Z", "message": "gradle update"}, "afterCommit": {"oid": "4a192dac265431a08687ac91c7c3e88642d52ac6", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/4a192dac265431a08687ac91c7c3e88642d52ac6", "committedDate": "2020-09-28T02:04:05Z", "message": "gradle update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MTQ3MzYy", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#pullrequestreview-497147362", "createdAt": "2020-09-28T02:04:56Z", "commit": {"oid": "4a192dac265431a08687ac91c7c3e88642d52ac6"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMjowNDo1NlrOHYsZNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMjowNDo1N1rOHYsZPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1NTIyMw==", "bodyText": "[PMD Java] Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidCatchingGenericException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_design.html#avoidcatchinggenericexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495655223", "createdAt": "2020-09-28T02:04:56Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,32 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\n+  \ttry {\n+\t\tTransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt\", Common.TX_ORIGIN);\n+\t\tAssert.assertTrue(transactionReceipt.isStatusOK());\n+\t\tint i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t\tSystem.out.println(\" ===> \" + i);\n+\t\tassertTrue(i == PrecompiledCommon.InvalidTableNotExist);\n+\t} catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a192dac265431a08687ac91c7c3e88642d52ac6"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1NTIyNQ==", "bodyText": "[PMD Java] Avoid printStackTrace(); use a logger call instead. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidPrintStackTrace\nBest Practices\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_bestpractices.html#avoidprintstacktrace\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495655225", "createdAt": "2020-09-28T02:04:56Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,32 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\n+  \ttry {\n+\t\tTransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt\", Common.TX_ORIGIN);\n+\t\tAssert.assertTrue(transactionReceipt.isStatusOK());\n+\t\tint i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t\tSystem.out.println(\" ===> \" + i);\n+\t\tassertTrue(i == PrecompiledCommon.InvalidTableNotExist);\n+\t} catch (Exception e) {\n+  \t\te.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a192dac265431a08687ac91c7c3e88642d52ac6"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1NTIyNg==", "bodyText": "[PMD Java] JUnit assertions should include a message (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nJUnitAssertionsShouldIncludeMessage\nBest Practices\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_bestpractices.html#junitassertionsshouldincludemessage\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495655226", "createdAt": "2020-09-28T02:04:56Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,32 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\n+  \ttry {\n+\t\tTransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt\", Common.TX_ORIGIN);\n+\t\tAssert.assertTrue(transactionReceipt.isStatusOK());\n+\t\tint i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t\tSystem.out.println(\" ===> \" + i);\n+\t\tassertTrue(i == PrecompiledCommon.InvalidTableNotExist);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a192dac265431a08687ac91c7c3e88642d52ac6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1NTIyNw==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495655227", "createdAt": "2020-09-28T02:04:57Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,32 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\n+  \ttry {\n+\t\tTransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt\", Common.TX_ORIGIN);\n+\t\tAssert.assertTrue(transactionReceipt.isStatusOK());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a192dac265431a08687ac91c7c3e88642d52ac6"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1NTIyOA==", "bodyText": "[PMD Java] System.out.println is used (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSystemPrintln\nBest Practices\n2\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_bestpractices.html#systemprintln\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495655228", "createdAt": "2020-09-28T02:04:57Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,32 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\n+  \ttry {\n+\t\tTransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt\", Common.TX_ORIGIN);\n+\t\tAssert.assertTrue(transactionReceipt.isStatusOK());\n+\t\tint i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t\tSystem.out.println(\" ===> \" + i);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a192dac265431a08687ac91c7c3e88642d52ac6"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1NTIzMA==", "bodyText": "[PMD Java] Use assertSame(x, y) instead of assertTrue(x==y), or assertNotSame(x,y) vs assertFalse(x==y) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nUseAssertSameInsteadOfAssertTrue\nBest Practices\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_bestpractices.html#useassertsameinsteadofasserttrue\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495655230", "createdAt": "2020-09-28T02:04:57Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,32 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\n+  \ttry {\n+\t\tTransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt\", Common.TX_ORIGIN);\n+\t\tAssert.assertTrue(transactionReceipt.isStatusOK());\n+\t\tint i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t\tSystem.out.println(\" ===> \" + i);\n+\t\tassertTrue(i == PrecompiledCommon.InvalidTableNotExist);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a192dac265431a08687ac91c7c3e88642d52ac6"}, "originalPosition": 31}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4a192dac265431a08687ac91c7c3e88642d52ac6", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/4a192dac265431a08687ac91c7c3e88642d52ac6", "committedDate": "2020-09-28T02:04:05Z", "message": "gradle update"}, "afterCommit": {"oid": "3d8a6eb41366ef07dcbdfa9cc85b18a8380061b7", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/3d8a6eb41366ef07dcbdfa9cc85b18a8380061b7", "committedDate": "2020-09-28T02:45:18Z", "message": "gradle update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MTU2NDg0", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#pullrequestreview-497156484", "createdAt": "2020-09-28T02:46:16Z", "commit": {"oid": "3d8a6eb41366ef07dcbdfa9cc85b18a8380061b7"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMjo0NjoxN1rOHYs4gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMjo0NjoxN1rOHYs4hA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY2MzIzMw==", "bodyText": "[PMD Java] JUnit assertions should include a message (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nJUnitAssertionsShouldIncludeMessage\nBest Practices\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_bestpractices.html#junitassertionsshouldincludemessage\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495663233", "createdAt": "2020-09-28T02:46:17Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,27 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\t\tTransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt_1111\", Common.TX_ORIGIN);\n+\t\tAssert.assertTrue(transactionReceipt.isStatusOK());\n+\t\tint i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t\tSystem.out.println(\" ===> \" + i);\n+\t\tassertTrue(i == PrecompiledCommon.InvalidTableNotExist);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d8a6eb41366ef07dcbdfa9cc85b18a8380061b7"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY2MzIzNA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495663234", "createdAt": "2020-09-28T02:46:17Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,27 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\t\tTransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt_1111\", Common.TX_ORIGIN);\n+\t\tAssert.assertTrue(transactionReceipt.isStatusOK());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d8a6eb41366ef07dcbdfa9cc85b18a8380061b7"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY2MzIzNQ==", "bodyText": "[PMD Java] System.out.println is used (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSystemPrintln\nBest Practices\n2\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_bestpractices.html#systemprintln\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495663235", "createdAt": "2020-09-28T02:46:17Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,27 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\t\tTransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt_1111\", Common.TX_ORIGIN);\n+\t\tAssert.assertTrue(transactionReceipt.isStatusOK());\n+\t\tint i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t\tSystem.out.println(\" ===> \" + i);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d8a6eb41366ef07dcbdfa9cc85b18a8380061b7"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY2MzIzNg==", "bodyText": "[PMD Java] Use assertSame(x, y) instead of assertTrue(x==y), or assertNotSame(x,y) vs assertFalse(x==y) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nUseAssertSameInsteadOfAssertTrue\nBest Practices\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_bestpractices.html#useassertsameinsteadofasserttrue\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495663236", "createdAt": "2020-09-28T02:46:17Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,27 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\t\tTransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt_1111\", Common.TX_ORIGIN);\n+\t\tAssert.assertTrue(transactionReceipt.isStatusOK());\n+\t\tint i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t\tSystem.out.println(\" ===> \" + i);\n+\t\tassertTrue(i == PrecompiledCommon.InvalidTableNotExist);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d8a6eb41366ef07dcbdfa9cc85b18a8380061b7"}, "originalPosition": 29}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d8a6eb41366ef07dcbdfa9cc85b18a8380061b7", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/3d8a6eb41366ef07dcbdfa9cc85b18a8380061b7", "committedDate": "2020-09-28T02:45:18Z", "message": "gradle update"}, "afterCommit": {"oid": "aa6f76098dc9e88e7affbd86f2b8e5400c36e849", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/aa6f76098dc9e88e7affbd86f2b8e5400c36e849", "committedDate": "2020-09-28T06:34:28Z", "message": "gradle update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MjIwMjg1", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#pullrequestreview-497220285", "createdAt": "2020-09-28T06:35:15Z", "commit": {"oid": "aa6f76098dc9e88e7affbd86f2b8e5400c36e849"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwNjozNToxNlrOHYwIYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwNjozNToxNlrOHYwIYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTcxNjQ0OA==", "bodyText": "[PMD Java] JUnit assertions should include a message (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nJUnitAssertionsShouldIncludeMessage\nBest Practices\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_bestpractices.html#junitassertionsshouldincludemessage\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495716448", "createdAt": "2020-09-28T06:35:16Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,26 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\t\tTransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt\", Common.TX_ORIGIN);\n+\t\tAssert.assertTrue(transactionReceipt.isStatusOK());\n+\t\tint i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t\tassertTrue(i == PrecompiledCommon.InvalidTableNotExist);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa6f76098dc9e88e7affbd86f2b8e5400c36e849"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTcxNjQ1MQ==", "bodyText": "[PMD Java] Use assertSame(x, y) instead of assertTrue(x==y), or assertNotSame(x,y) vs assertFalse(x==y) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nUseAssertSameInsteadOfAssertTrue\nBest Practices\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_bestpractices.html#useassertsameinsteadofasserttrue\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495716451", "createdAt": "2020-09-28T06:35:16Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,26 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\t\tTransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt\", Common.TX_ORIGIN);\n+\t\tAssert.assertTrue(transactionReceipt.isStatusOK());\n+\t\tint i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t\tassertTrue(i == PrecompiledCommon.InvalidTableNotExist);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa6f76098dc9e88e7affbd86f2b8e5400c36e849"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65784c29855efea0975a2096bbc5bf4427ba4e2f", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/65784c29855efea0975a2096bbc5bf4427ba4e2f", "committedDate": "2020-09-28T06:55:23Z", "message": "gradle update"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aa6f76098dc9e88e7affbd86f2b8e5400c36e849", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/aa6f76098dc9e88e7affbd86f2b8e5400c36e849", "committedDate": "2020-09-28T06:34:28Z", "message": "gradle update"}, "afterCommit": {"oid": "65784c29855efea0975a2096bbc5bf4427ba4e2f", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/65784c29855efea0975a2096bbc5bf4427ba4e2f", "committedDate": "2020-09-28T06:55:23Z", "message": "gradle update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MjMxMjAz", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#pullrequestreview-497231203", "createdAt": "2020-09-28T06:56:21Z", "commit": {"oid": "65784c29855efea0975a2096bbc5bf4427ba4e2f"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwNjo1NjoyMlrOHYwpEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwNjo1NjoyMlrOHYwpEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTcyNDgxOA==", "bodyText": "[PMD Java] JUnit assertions should include a message (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nJUnitAssertionsShouldIncludeMessage\nBest Practices\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_bestpractices.html#junitassertionsshouldincludemessage\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495724818", "createdAt": "2020-09-28T06:56:22Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,26 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n \n import org.fisco.bcos.TestBase;\n-import org.fisco.bcos.web3j.precompile.exception.PrecompileMessageException;\n+import org.fisco.bcos.web3j.precompile.common.PrecompiledCommon;\n import org.fisco.bcos.web3j.precompile.permission.PermissionService;\n+import org.fisco.bcos.web3j.protocol.core.methods.response.TransactionReceipt;\n+import org.junit.Assert;\n import org.junit.Test;\n \n public class PermissionServiceTest extends TestBase {\n \n \n   private PermissionService permissionService = new PermissionService(web3j, credentials);\n \n-  @Test(expected= PrecompileMessageException.class) \n+  @Test\n   public void userTableManager() throws Exception {\n-  \t\n-\t  permissionService.grantUserTableManager(\"tt\", Common.TX_ORIGIN);\n-  \n+\t\tTransactionReceipt transactionReceipt = permissionService.grantAndRetReceipt(\"tt\", Common.TX_ORIGIN);\n+\t\tAssert.assertTrue(transactionReceipt.isStatusOK());\n+\t\tint i = PrecompiledCommon.handleTransactionReceiptForCRUD(transactionReceipt);\n+\t\tassertEquals(i , 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65784c29855efea0975a2096bbc5bf4427ba4e2f"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTcyNDgxOQ==", "bodyText": "[PMD Java] Avoid unused imports such as 'org.junit.Assert.assertTrue' (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nUnusedImports\nBest Practices\n4\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.27.0/pmd_rules_java_bestpractices.html#unusedimports\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#discussion_r495724819", "createdAt": "2020-09-28T06:56:22Z", "author": {"login": "sider"}, "path": "src/integration-test/java/org/fisco/bcos/precompile/PermissionServiceTest.java", "diffHunk": "@@ -1,22 +1,26 @@\n package org.fisco.bcos.precompile;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65784c29855efea0975a2096bbc5bf4427ba4e2f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3Mjg2MDIw", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/706#pullrequestreview-497286020", "createdAt": "2020-09-28T08:20:20Z", "commit": {"oid": "65784c29855efea0975a2096bbc5bf4427ba4e2f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1843, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}