{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MzgwNzg5", "number": 687, "title": "merge Release 2.6.0", "bodyText": "", "createdAt": "2020-08-10T09:20:43Z", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687", "merged": true, "mergeCommit": {"oid": "e50ecc66a794361bafba8d544d61412747c3b45e"}, "closed": true, "closedAt": "2020-08-10T09:53:33Z", "author": {"login": "bxq2011hust"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcs9-gdAH2gAyNDY1MzgwNzg5OmVkYzBlMWRhNGFmMjE0YzE3ZmI0YjhkYzU2MTljNzViZDlmN2M4YmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9fJkJAFqTQ2NDA5NDEzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "edc0e1da4af214c17fb4b8dc5619c75bd9f7c8bc", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/edc0e1da4af214c17fb4b8dc5619c75bd9f7c8bc", "committedDate": "2020-06-20T02:11:14Z", "message": "add SDK_PERMISSION_DENIED"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eee899faea69e803ab463c20632368af608efb4", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/9eee899faea69e803ab463c20632368af608efb4", "committedDate": "2020-06-22T07:57:37Z", "message": "add getBlockHeaderByHash and getBlockHeaderByNumber rpc interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "317db3800cb3ab740c87728edb109827a503d468", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/317db3800cb3ab740c87728edb109827a503d468", "committedDate": "2020-06-23T02:14:12Z", "message": "Merge pull request #652 from ywy2090/dev-new\n\nadd getBlockHeaderByHash and getBlockHeaderByNumber rpc interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f85ee8ed985305cb74675f3cca4ba2e4eedf5d9", "author": {"user": {"login": "sulenn", "name": "sulenn"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/0f85ee8ed985305cb74675f3cca4ba2e4eedf5d9", "committedDate": "2020-06-28T09:21:58Z", "message": "Adapt to IPv6"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e82d768666a90a1339334702ba13cdcad2e8d78", "author": {"user": {"login": "bxq2011hust", "name": "XingQiang Bai"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/4e82d768666a90a1339334702ba13cdcad2e8d78", "committedDate": "2020-06-29T06:52:00Z", "message": "Merge pull request #668 from sulenn/dev\n\nAdapt to IPv6"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5de23d23634bee0f9bc1f99e7c9b3b94c5245c9b", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/5de23d23634bee0f9bc1f99e7c9b3b94c5245c9b", "committedDate": "2020-07-03T08:40:15Z", "message": "update deps\n\nadd default certificate configuration for SM SSL\n\nTypeEncode to public"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "594b57f65d54d8bab27eb27119dbbbc5c62f1145", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/594b57f65d54d8bab27eb27119dbbbc5c62f1145", "committedDate": "2020-07-03T08:55:15Z", "message": "Merge pull request #676 from ywy2090/release-2.6.0-origin\n\nupdate deps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b4a5915ff335060d9ca7f824e645917ca95ed00", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/1b4a5915ff335060d9ca7f824e645917ca95ed00", "committedDate": "2020-07-07T15:49:40Z", "message": "add sm binary code to Java contract"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfcbb56290658513ffbf63c8490f4a4588c529ae", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/bfcbb56290658513ffbf63c8490f4a4588c529ae", "committedDate": "2020-07-08T02:51:14Z", "message": "Merge pull request #678 from ywy2090/release-2.6.0-origin\n\nadd sm binary code to Java contract"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a736639b776f84cb714159f5ea8c0b309635b3c3", "author": {"user": {"login": "sulenn", "name": "sulenn"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/a736639b776f84cb714159f5ea8c0b309635b3c3", "committedDate": "2020-07-09T11:04:35Z", "message": "Fix the problem that web3sdk cannot connect to IPv6 node probabilistically"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a902641c80af62ef567b84519f43aa280232fb03", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/a902641c80af62ef567b84519f43aa280232fb03", "committedDate": "2020-07-09T11:51:26Z", "message": "Merge pull request #673 from sulenn/dev\n\nFix connection problem for ipv6 peer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c0c0bc7d04bedac383b4082a00050831ddda07b", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/6c0c0bc7d04bedac383b4082a00050831ddda07b", "committedDate": "2020-07-20T02:35:50Z", "message": "add abi codec module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89baa3781e017272c0b37f5e5be5805cce47aa69", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/89baa3781e017272c0b37f5e5be5805cce47aa69", "committedDate": "2020-07-28T11:00:13Z", "message": "Merge pull request #679 from ywy2090/release-2.6.0-origin\n\nadd abi codec module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e61958adc320bc49ce20b2cc722297285b6e891", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/7e61958adc320bc49ce20b2cc722297285b6e891", "committedDate": "2020-08-05T07:41:59Z", "message": "Modify the SSL connection engine to opensSL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "539f0eb0138880da91c8501683d99f364d8d0f8c", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/539f0eb0138880da91c8501683d99f364d8d0f8c", "committedDate": "2020-08-05T08:05:05Z", "message": "update tcnative version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3913a5946fcd7c470d1451a26d02d3e1b33c72cb", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/3913a5946fcd7c470d1451a26d02d3e1b33c72cb", "committedDate": "2020-08-06T02:18:40Z", "message": "update ci_check.sh"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3159989a32b32b7500022c3a8bb36e2acd685705", "author": {"user": {"login": "ywy2090", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/3159989a32b32b7500022c3a8bb36e2acd685705", "committedDate": "2020-08-06T02:27:58Z", "message": "Merge pull request #684 from ywy2090/release-2.6.0-openssl\n\nModify the SSL connection engine to opensSL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8367908cd117ce4a76950d7790697a88cc79832", "author": {"user": {"login": "chaychen2005", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/c8367908cd117ce4a76950d7790697a88cc79832", "committedDate": "2020-08-06T02:29:04Z", "message": "print handshake fail reason"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705", "author": {"user": {"login": "chaychen2005", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705", "committedDate": "2020-08-06T03:03:15Z", "message": "Merge pull request #685 from chaychen2005/release-2.6.0\n\nprint handshake fail reason"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d1ed64c07e69b303c19a5e2a0dfbb09daf343dd", "author": {"user": {"login": "chaychen2005", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/7d1ed64c07e69b303c19a5e2a0dfbb09daf343dd", "committedDate": "2020-08-10T09:17:01Z", "message": "fix bug of print handshake fail"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0MDc0MTEy", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#pullrequestreview-464074112", "createdAt": "2020-08-10T09:21:35Z", "commit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "state": "COMMENTED", "comments": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwOToyMTozNVrOG-HLDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwOToyMTo0MVrOG-HLSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQxMg==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782412", "createdAt": "2020-08-10T09:21:35Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -244,6 +254,11 @@ public ChannelHandlerContext randomNetworkConnection(\n     }\n \n     public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer port) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQxNA==", "bodyText": "[PMD Java] Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidCatchingGenericException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#avoidcatchinggenericexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782414", "createdAt": "2020-08-10T09:21:36Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -244,6 +254,11 @@ public ChannelHandlerContext randomNetworkConnection(\n     }\n \n     public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer port) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQxNg==", "bodyText": "[PMD Java] Logger calls should be surrounded by log level guards. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nGuardLogStatement\nBest Practices\n2\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_bestpractices.html#guardlogstatement\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782416", "createdAt": "2020-08-10T09:21:36Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -244,6 +254,11 @@ public ChannelHandlerContext randomNetworkConnection(\n     }\n \n     public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer port) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {\n+            logger.error(\"invalid host string format, value: \" + host);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQxOQ==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782419", "createdAt": "2020-08-10T09:21:36Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -259,12 +274,22 @@ public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer por\n      */\n     public ChannelHandlerContext setAndGetNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQyMg==", "bodyText": "[PMD Java] Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidCatchingGenericException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#avoidcatchinggenericexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782422", "createdAt": "2020-08-10T09:21:36Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -259,12 +274,22 @@ public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer por\n      */\n     public ChannelHandlerContext setAndGetNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQyNA==", "bodyText": "[PMD Java] Logger calls should be surrounded by log level guards. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nGuardLogStatement\nBest Practices\n2\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_bestpractices.html#guardlogstatement\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782424", "createdAt": "2020-08-10T09:21:37Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -259,12 +274,22 @@ public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer por\n      */\n     public ChannelHandlerContext setAndGetNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {\n+            logger.error(\"invalid host string format, value: \" + host);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQyNQ==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782425", "createdAt": "2020-08-10T09:21:37Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -259,12 +274,22 @@ public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer por\n      */\n     public ChannelHandlerContext setAndGetNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {\n+            logger.error(\"invalid host string format, value: \" + host);\n+        }\n         String endpoint = host + \":\" + port;\n         return networkConnections.put(endpoint, ctx);\n     }\n \n     public void removeNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQyOA==", "bodyText": "[PMD Java] Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidCatchingGenericException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#avoidcatchinggenericexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782428", "createdAt": "2020-08-10T09:21:37Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -259,12 +274,22 @@ public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer por\n      */\n     public ChannelHandlerContext setAndGetNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {\n+            logger.error(\"invalid host string format, value: \" + host);\n+        }\n         String endpoint = host + \":\" + port;\n         return networkConnections.put(endpoint, ctx);\n     }\n \n     public void removeNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQzMA==", "bodyText": "[PMD Java] Logger calls should be surrounded by log level guards. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nGuardLogStatement\nBest Practices\n2\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_bestpractices.html#guardlogstatement\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782430", "createdAt": "2020-08-10T09:21:37Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -259,12 +274,22 @@ public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer por\n      */\n     public ChannelHandlerContext setAndGetNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {\n+            logger.error(\"invalid host string format, value: \" + host);\n+        }\n         String endpoint = host + \":\" + port;\n         return networkConnections.put(endpoint, ctx);\n     }\n \n     public void removeNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {\n+            logger.error(\"invalid host string format, value: \" + host);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQzMw==", "bodyText": "[PMD Java] Found 'DU'-anomaly for variable 'port' (lines '324'-'352'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782433", "createdAt": "2020-08-10T09:21:37Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -288,18 +313,24 @@ public void init() {\n         for (String connectionStr : connectionsStr) {\n             ConnectionInfo connection = new ConnectionInfo();\n \n-            String[] stringArray = connectionStr.split(\":\");\n-\n-            if (stringArray.length < 1) {\n+            int index = connectionStr.lastIndexOf(':');\n+            if (index == -1) {\n                 throw new IllegalArgumentException(\n-                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111), value: \"\n+                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111\u3001[::1]:1111), value: \"\n                                 + connectionStr);\n             }\n \n-            String IP = stringArray[0];\n-            String port = stringArray[1];\n+            String IP = connectionStr.substring(0, index);\n+            String port = connectionStr.substring(index + 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQzNA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782434", "createdAt": "2020-08-10T09:21:37Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -288,18 +313,24 @@ public void init() {\n         for (String connectionStr : connectionsStr) {\n             ConnectionInfo connection = new ConnectionInfo();\n \n-            String[] stringArray = connectionStr.split(\":\");\n-\n-            if (stringArray.length < 1) {\n+            int index = connectionStr.lastIndexOf(':');\n+            if (index == -1) {\n                 throw new IllegalArgumentException(\n-                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111), value: \"\n+                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111\u3001[::1]:1111), value: \"\n                                 + connectionStr);\n             }\n \n-            String IP = stringArray[0];\n-            String port = stringArray[1];\n+            String IP = connectionStr.substring(0, index);\n+            String port = connectionStr.substring(index + 1);\n \n-            if (!Host.validIP(IP)) {\n+            if (!(NetUtil.isValidIpV4Address(IP) || NetUtil.isValidIpV6Address(IP))) {\n+                throw new IllegalArgumentException(\n+                        \" Invalid configuration, invalid IP string format, value: \" + IP);\n+            }\n+\n+            try {\n+                IP = Inet6Address.getByName(IP).getHostAddress();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQzNw==", "bodyText": "[PMD Java] Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidCatchingGenericException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#avoidcatchinggenericexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782437", "createdAt": "2020-08-10T09:21:38Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -288,18 +313,24 @@ public void init() {\n         for (String connectionStr : connectionsStr) {\n             ConnectionInfo connection = new ConnectionInfo();\n \n-            String[] stringArray = connectionStr.split(\":\");\n-\n-            if (stringArray.length < 1) {\n+            int index = connectionStr.lastIndexOf(':');\n+            if (index == -1) {\n                 throw new IllegalArgumentException(\n-                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111), value: \"\n+                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111\u3001[::1]:1111), value: \"\n                                 + connectionStr);\n             }\n \n-            String IP = stringArray[0];\n-            String port = stringArray[1];\n+            String IP = connectionStr.substring(0, index);\n+            String port = connectionStr.substring(index + 1);\n \n-            if (!Host.validIP(IP)) {\n+            if (!(NetUtil.isValidIpV4Address(IP) || NetUtil.isValidIpV6Address(IP))) {\n+                throw new IllegalArgumentException(\n+                        \" Invalid configuration, invalid IP string format, value: \" + IP);\n+            }\n+\n+            try {\n+                IP = Inet6Address.getByName(IP).getHostAddress();\n+            } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ0MA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782440", "createdAt": "2020-08-10T09:21:38Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -490,7 +527,29 @@ public SslContext initSMSslContext()\n                     getGmSslKey().getInputStream());\n         }\n \n-        logger.info(\" Has no SM Ssl certificate configuration \");\n+        PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\n+        Resource gmCaResource = resolver.getResource(GM_CA_CERT);\n+        Resource gmSslResource = resolver.getResource(GM_SSL_CERT);\n+        Resource gmSslKeyResource = resolver.getResource(GM_SSL_KEY);\n+        Resource gmEnSslResource = resolver.getResource(GM_EN_SSL_CERT);\n+        Resource gmEnSslKeyResource = resolver.getResource(GM_EN_SSL_KEY);\n+\n+        // The client's SM SSL default certificate exists\n+        if (gmCaResource.exists()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 120}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ0Mg==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782442", "createdAt": "2020-08-10T09:21:38Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -490,7 +527,29 @@ public SslContext initSMSslContext()\n                     getGmSslKey().getInputStream());\n         }\n \n-        logger.info(\" Has no SM Ssl certificate configuration \");\n+        PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\n+        Resource gmCaResource = resolver.getResource(GM_CA_CERT);\n+        Resource gmSslResource = resolver.getResource(GM_SSL_CERT);\n+        Resource gmSslKeyResource = resolver.getResource(GM_SSL_KEY);\n+        Resource gmEnSslResource = resolver.getResource(GM_EN_SSL_CERT);\n+        Resource gmEnSslKeyResource = resolver.getResource(GM_EN_SSL_KEY);\n+\n+        // The client's SM SSL default certificate exists\n+        if (gmCaResource.exists()\n+                && gmSslResource.exists()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 121}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ0NA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782444", "createdAt": "2020-08-10T09:21:38Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -490,7 +527,29 @@ public SslContext initSMSslContext()\n                     getGmSslKey().getInputStream());\n         }\n \n-        logger.info(\" Has no SM Ssl certificate configuration \");\n+        PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\n+        Resource gmCaResource = resolver.getResource(GM_CA_CERT);\n+        Resource gmSslResource = resolver.getResource(GM_SSL_CERT);\n+        Resource gmSslKeyResource = resolver.getResource(GM_SSL_KEY);\n+        Resource gmEnSslResource = resolver.getResource(GM_EN_SSL_CERT);\n+        Resource gmEnSslKeyResource = resolver.getResource(GM_EN_SSL_KEY);\n+\n+        // The client's SM SSL default certificate exists\n+        if (gmCaResource.exists()\n+                && gmSslResource.exists()\n+                && gmSslKeyResource.exists()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 122}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ0Ng==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782446", "createdAt": "2020-08-10T09:21:38Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -490,7 +527,29 @@ public SslContext initSMSslContext()\n                     getGmSslKey().getInputStream());\n         }\n \n-        logger.info(\" Has no SM Ssl certificate configuration \");\n+        PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\n+        Resource gmCaResource = resolver.getResource(GM_CA_CERT);\n+        Resource gmSslResource = resolver.getResource(GM_SSL_CERT);\n+        Resource gmSslKeyResource = resolver.getResource(GM_SSL_KEY);\n+        Resource gmEnSslResource = resolver.getResource(GM_EN_SSL_CERT);\n+        Resource gmEnSslKeyResource = resolver.getResource(GM_EN_SSL_KEY);\n+\n+        // The client's SM SSL default certificate exists\n+        if (gmCaResource.exists()\n+                && gmSslResource.exists()\n+                && gmSslKeyResource.exists()\n+                && gmEnSslKeyResource.exists()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 123}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ0Nw==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782447", "createdAt": "2020-08-10T09:21:38Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -490,7 +527,29 @@ public SslContext initSMSslContext()\n                     getGmSslKey().getInputStream());\n         }\n \n-        logger.info(\" Has no SM Ssl certificate configuration \");\n+        PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\n+        Resource gmCaResource = resolver.getResource(GM_CA_CERT);\n+        Resource gmSslResource = resolver.getResource(GM_SSL_CERT);\n+        Resource gmSslKeyResource = resolver.getResource(GM_SSL_KEY);\n+        Resource gmEnSslResource = resolver.getResource(GM_EN_SSL_CERT);\n+        Resource gmEnSslKeyResource = resolver.getResource(GM_EN_SSL_KEY);\n+\n+        // The client's SM SSL default certificate exists\n+        if (gmCaResource.exists()\n+                && gmSslResource.exists()\n+                && gmSslKeyResource.exists()\n+                && gmEnSslKeyResource.exists()\n+                && gmEnSslResource.exists()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 124}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ1MA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782450", "createdAt": "2020-08-10T09:21:39Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -510,9 +569,14 @@ private SslContext initSslContext() throws SSLException {\n \n             // check if ca.crt exist\n             if (Objects.isNull(caResource) || !caResource.exists()) {\n-                throw new RuntimeException(\n-                        (Objects.nonNull(caResource) ? \"ca.crt\" : caResource.getFilename())\n-                                + \" not exist \");\n+                Resource resource = resolver.getResource(CA_CERT);\n+                if (Objects.nonNull(resource) && resource.exists()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 146}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ1MQ==", "bodyText": "[PMD Java] Found 'DU'-anomaly for variable 'caResource' (lines '574'-'630'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782451", "createdAt": "2020-08-10T09:21:39Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -510,9 +569,14 @@ private SslContext initSslContext() throws SSLException {\n \n             // check if ca.crt exist\n             if (Objects.isNull(caResource) || !caResource.exists()) {\n-                throw new RuntimeException(\n-                        (Objects.nonNull(caResource) ? \"ca.crt\" : caResource.getFilename())\n-                                + \" not exist \");\n+                Resource resource = resolver.getResource(CA_CERT);\n+                if (Objects.nonNull(resource) && resource.exists()) {\n+                    caResource = resource;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 147}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ1NA==", "bodyText": "[PMD Java] Avoid throwing raw exception types. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidThrowingRawExceptionTypes\nDesign\n1\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#avoidthrowingrawexceptiontypes\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782454", "createdAt": "2020-08-10T09:21:39Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -510,9 +569,14 @@ private SslContext initSslContext() throws SSLException {\n \n             // check if ca.crt exist\n             if (Objects.isNull(caResource) || !caResource.exists()) {\n-                throw new RuntimeException(\n-                        (Objects.nonNull(caResource) ? \"ca.crt\" : caResource.getFilename())\n-                                + \" not exist \");\n+                Resource resource = resolver.getResource(CA_CERT);\n+                if (Objects.nonNull(resource) && resource.exists()) {\n+                    caResource = resource;\n+                } else {\n+                    throw new RuntimeException(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 149}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ1NQ==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782455", "createdAt": "2020-08-10T09:21:39Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -510,9 +569,14 @@ private SslContext initSslContext() throws SSLException {\n \n             // check if ca.crt exist\n             if (Objects.isNull(caResource) || !caResource.exists()) {\n-                throw new RuntimeException(\n-                        (Objects.nonNull(caResource) ? \"ca.crt\" : caResource.getFilename())\n-                                + \" not exist \");\n+                Resource resource = resolver.getResource(CA_CERT);\n+                if (Objects.nonNull(resource) && resource.exists()) {\n+                    caResource = resource;\n+                } else {\n+                    throw new RuntimeException(\n+                            (Objects.nonNull(caResource) ? \"ca.crt\" : caResource.getFilename())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 150}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ1Nw==", "bodyText": "[PMD Java] Found 'DD'-anomaly for variable 'peer' (lines '637'-'637'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782457", "createdAt": "2020-08-10T09:21:39Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -568,9 +633,9 @@ public void heartbeat() {\n \n         List<Tuple2<String, ChannelHandlerContext>> tuple2List = new ArrayList<>();\n \n-        for (ConnectionInfo connectionInfo : connections) {\n-            String peer = connectionInfo.getHost() + \":\" + connectionInfo.getPort();\n-            ChannelHandlerContext ctx = networkConnections.get(peer);\n+        for (Map.Entry<String, ChannelHandlerContext> entry : networkConnections.entrySet()) {\n+            String peer = entry.getKey();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 174}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ1OQ==", "bodyText": "[PMD Java] Found 'DU'-anomaly for variable 'peer' (lines '637'-'650'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782459", "createdAt": "2020-08-10T09:21:40Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -568,9 +633,9 @@ public void heartbeat() {\n \n         List<Tuple2<String, ChannelHandlerContext>> tuple2List = new ArrayList<>();\n \n-        for (ConnectionInfo connectionInfo : connections) {\n-            String peer = connectionInfo.getHost() + \":\" + connectionInfo.getPort();\n-            ChannelHandlerContext ctx = networkConnections.get(peer);\n+        for (Map.Entry<String, ChannelHandlerContext> entry : networkConnections.entrySet()) {\n+            String peer = entry.getKey();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 174}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ2MA==", "bodyText": "[PMD Java] The method 'decode(String, int, Class)' has a cyclomatic complexity of 10. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nCyclomaticComplexity\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#cyclomaticcomplexity\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782460", "createdAt": "2020-08-10T09:21:40Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/abi/TypeDecoder.java", "diffHunk": "@@ -36,7 +36,7 @@\n     static final int MAX_BYTE_LENGTH_FOR_HEX_STRING = Type.MAX_BYTE_LENGTH << 1;\n \n     @SuppressWarnings(\"unchecked\")\n-    static <T extends Type> T decode(String input, int offset, Class<T> type) {\n+    public static <T extends Type> T decode(String input, int offset, Class<T> type) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ2Mw==", "bodyText": "[PMD Java] The class 'ABICodecJsonWrapper' has a total cyclomatic complexity of 80 (highest 35). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nCyclomaticComplexity\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#cyclomaticcomplexity\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782463", "createdAt": "2020-08-10T09:21:40Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/abi/wrapper/ABICodecJsonWrapper.java", "diffHunk": "@@ -0,0 +1,497 @@\n+package org.fisco.bcos.web3j.abi.wrapper;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ArrayNode;\n+import com.fasterxml.jackson.databind.node.JsonNodeFactory;\n+import java.io.IOException;\n+import java.security.InvalidParameterException;\n+import java.util.ArrayList;\n+import java.util.Base64;\n+import java.util.Iterator;\n+import java.util.List;\n+import org.fisco.bcos.web3j.abi.datatypes.Address;\n+import org.fisco.bcos.web3j.abi.datatypes.Bool;\n+import org.fisco.bcos.web3j.abi.datatypes.Bytes;\n+import org.fisco.bcos.web3j.abi.datatypes.DynamicBytes;\n+import org.fisco.bcos.web3j.abi.datatypes.Utf8String;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Int256;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Uint256;\n+import org.fisco.bcos.web3j.abi.wrapper.ABIObject.ListType;\n+import org.fisco.bcos.web3j.protocol.ObjectMapperFactory;\n+import org.fisco.bcos.web3j.utils.Numeric;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class ABICodecJsonWrapper {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ2NQ==", "bodyText": "[PMD Java] Found non-transient, non-static member. Please mark as transient or provide accessors. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nBeanMembersShouldSerialize\nError Prone\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_errorprone.html#beanmembersshouldserialize\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782465", "createdAt": "2020-08-10T09:21:40Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/abi/wrapper/ABICodecJsonWrapper.java", "diffHunk": "@@ -0,0 +1,497 @@\n+package org.fisco.bcos.web3j.abi.wrapper;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ArrayNode;\n+import com.fasterxml.jackson.databind.node.JsonNodeFactory;\n+import java.io.IOException;\n+import java.security.InvalidParameterException;\n+import java.util.ArrayList;\n+import java.util.Base64;\n+import java.util.Iterator;\n+import java.util.List;\n+import org.fisco.bcos.web3j.abi.datatypes.Address;\n+import org.fisco.bcos.web3j.abi.datatypes.Bool;\n+import org.fisco.bcos.web3j.abi.datatypes.Bytes;\n+import org.fisco.bcos.web3j.abi.datatypes.DynamicBytes;\n+import org.fisco.bcos.web3j.abi.datatypes.Utf8String;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Int256;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Uint256;\n+import org.fisco.bcos.web3j.abi.wrapper.ABIObject.ListType;\n+import org.fisco.bcos.web3j.protocol.ObjectMapperFactory;\n+import org.fisco.bcos.web3j.utils.Numeric;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class ABICodecJsonWrapper {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(ABICodecJsonWrapper.class);\n+\n+    private ObjectMapper objectMapper = ObjectMapperFactory.getObjectMapper();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ2Nw==", "bodyText": "[PMD Java] Private field 'objectMapper' could be made final; it is only initialized in the declaration or constructor. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nImmutableField\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#immutablefield\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782467", "createdAt": "2020-08-10T09:21:40Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/abi/wrapper/ABICodecJsonWrapper.java", "diffHunk": "@@ -0,0 +1,497 @@\n+package org.fisco.bcos.web3j.abi.wrapper;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ArrayNode;\n+import com.fasterxml.jackson.databind.node.JsonNodeFactory;\n+import java.io.IOException;\n+import java.security.InvalidParameterException;\n+import java.util.ArrayList;\n+import java.util.Base64;\n+import java.util.Iterator;\n+import java.util.List;\n+import org.fisco.bcos.web3j.abi.datatypes.Address;\n+import org.fisco.bcos.web3j.abi.datatypes.Bool;\n+import org.fisco.bcos.web3j.abi.datatypes.Bytes;\n+import org.fisco.bcos.web3j.abi.datatypes.DynamicBytes;\n+import org.fisco.bcos.web3j.abi.datatypes.Utf8String;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Int256;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Uint256;\n+import org.fisco.bcos.web3j.abi.wrapper.ABIObject.ListType;\n+import org.fisco.bcos.web3j.protocol.ObjectMapperFactory;\n+import org.fisco.bcos.web3j.utils.Numeric;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class ABICodecJsonWrapper {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(ABICodecJsonWrapper.class);\n+\n+    private ObjectMapper objectMapper = ObjectMapperFactory.getObjectMapper();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ3MQ==", "bodyText": "[PMD Java] A method or constructor should not explicitly declare unchecked exceptions in its 'throws' clause (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidUncheckedExceptionsInSignatures\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#avoiduncheckedexceptionsinsignatures\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782471", "createdAt": "2020-08-10T09:21:41Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/abi/wrapper/ABICodecJsonWrapper.java", "diffHunk": "@@ -0,0 +1,497 @@\n+package org.fisco.bcos.web3j.abi.wrapper;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ArrayNode;\n+import com.fasterxml.jackson.databind.node.JsonNodeFactory;\n+import java.io.IOException;\n+import java.security.InvalidParameterException;\n+import java.util.ArrayList;\n+import java.util.Base64;\n+import java.util.Iterator;\n+import java.util.List;\n+import org.fisco.bcos.web3j.abi.datatypes.Address;\n+import org.fisco.bcos.web3j.abi.datatypes.Bool;\n+import org.fisco.bcos.web3j.abi.datatypes.Bytes;\n+import org.fisco.bcos.web3j.abi.datatypes.DynamicBytes;\n+import org.fisco.bcos.web3j.abi.datatypes.Utf8String;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Int256;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Uint256;\n+import org.fisco.bcos.web3j.abi.wrapper.ABIObject.ListType;\n+import org.fisco.bcos.web3j.protocol.ObjectMapperFactory;\n+import org.fisco.bcos.web3j.utils.Numeric;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class ABICodecJsonWrapper {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(ABICodecJsonWrapper.class);\n+\n+    private ObjectMapper objectMapper = ObjectMapperFactory.getObjectMapper();\n+\n+    private void errorReport(String path, String expected, String actual)\n+            throws InvalidParameterException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ3Mw==", "bodyText": "[PMD Java] The method 'encodeNode(String, ABIObject, JsonNode)' has a cyclomatic complexity of 35. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nCyclomaticComplexity\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#cyclomaticcomplexity\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782473", "createdAt": "2020-08-10T09:21:41Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/abi/wrapper/ABICodecJsonWrapper.java", "diffHunk": "@@ -0,0 +1,497 @@\n+package org.fisco.bcos.web3j.abi.wrapper;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ArrayNode;\n+import com.fasterxml.jackson.databind.node.JsonNodeFactory;\n+import java.io.IOException;\n+import java.security.InvalidParameterException;\n+import java.util.ArrayList;\n+import java.util.Base64;\n+import java.util.Iterator;\n+import java.util.List;\n+import org.fisco.bcos.web3j.abi.datatypes.Address;\n+import org.fisco.bcos.web3j.abi.datatypes.Bool;\n+import org.fisco.bcos.web3j.abi.datatypes.Bytes;\n+import org.fisco.bcos.web3j.abi.datatypes.DynamicBytes;\n+import org.fisco.bcos.web3j.abi.datatypes.Utf8String;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Int256;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Uint256;\n+import org.fisco.bcos.web3j.abi.wrapper.ABIObject.ListType;\n+import org.fisco.bcos.web3j.protocol.ObjectMapperFactory;\n+import org.fisco.bcos.web3j.utils.Numeric;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class ABICodecJsonWrapper {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(ABICodecJsonWrapper.class);\n+\n+    private ObjectMapper objectMapper = ObjectMapperFactory.getObjectMapper();\n+\n+    private void errorReport(String path, String expected, String actual)\n+            throws InvalidParameterException {\n+        String errorMessage =\n+                \"Arguments mismatch: \" + path + \", expected: \" + expected + \", actual: \" + actual;\n+        logger.error(errorMessage);\n+        throw new InvalidParameterException(errorMessage);\n+    }\n+\n+    private ABIObject encodeNode(String path, ABIObject template, JsonNode node) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4MjQ3NA==", "bodyText": "[PMD Java] Avoid really long methods. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nExcessiveMethodLength\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#excessivemethodlength\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467782474", "createdAt": "2020-08-10T09:21:41Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/abi/wrapper/ABICodecJsonWrapper.java", "diffHunk": "@@ -0,0 +1,497 @@\n+package org.fisco.bcos.web3j.abi.wrapper;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ArrayNode;\n+import com.fasterxml.jackson.databind.node.JsonNodeFactory;\n+import java.io.IOException;\n+import java.security.InvalidParameterException;\n+import java.util.ArrayList;\n+import java.util.Base64;\n+import java.util.Iterator;\n+import java.util.List;\n+import org.fisco.bcos.web3j.abi.datatypes.Address;\n+import org.fisco.bcos.web3j.abi.datatypes.Bool;\n+import org.fisco.bcos.web3j.abi.datatypes.Bytes;\n+import org.fisco.bcos.web3j.abi.datatypes.DynamicBytes;\n+import org.fisco.bcos.web3j.abi.datatypes.Utf8String;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Int256;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Uint256;\n+import org.fisco.bcos.web3j.abi.wrapper.ABIObject.ListType;\n+import org.fisco.bcos.web3j.protocol.ObjectMapperFactory;\n+import org.fisco.bcos.web3j.utils.Numeric;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class ABICodecJsonWrapper {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(ABICodecJsonWrapper.class);\n+\n+    private ObjectMapper objectMapper = ObjectMapperFactory.getObjectMapper();\n+\n+    private void errorReport(String path, String expected, String actual)\n+            throws InvalidParameterException {\n+        String errorMessage =\n+                \"Arguments mismatch: \" + path + \", expected: \" + expected + \", actual: \" + actual;\n+        logger.error(errorMessage);\n+        throw new InvalidParameterException(errorMessage);\n+    }\n+\n+    private ABIObject encodeNode(String path, ABIObject template, JsonNode node) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b85f9ccc28e71a4ecb9275ea1ff7c0f6364705"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb", "author": {"user": {"login": "chaychen2005", "name": null}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb", "committedDate": "2020-08-10T09:29:51Z", "message": "Merge pull request #686 from chaychen2005/release-2.6.0\n\nfix bug of print handshake fail"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0MDgwMDIz", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#pullrequestreview-464080023", "createdAt": "2020-08-10T09:30:39Z", "commit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "state": "COMMENTED", "comments": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwOTozMDozOVrOG-HdrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwOTozMDo0M1rOG-Hd5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzE4MA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787180", "createdAt": "2020-08-10T09:30:39Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -244,6 +260,11 @@ public ChannelHandlerContext randomNetworkConnection(\n     }\n \n     public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer port) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzE4NA==", "bodyText": "[PMD Java] Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidCatchingGenericException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#avoidcatchinggenericexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787184", "createdAt": "2020-08-10T09:30:39Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -244,6 +260,11 @@ public ChannelHandlerContext randomNetworkConnection(\n     }\n \n     public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer port) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzE4OA==", "bodyText": "[PMD Java] Logger calls should be surrounded by log level guards. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nGuardLogStatement\nBest Practices\n2\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_bestpractices.html#guardlogstatement\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787188", "createdAt": "2020-08-10T09:30:39Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -244,6 +260,11 @@ public ChannelHandlerContext randomNetworkConnection(\n     }\n \n     public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer port) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {\n+            logger.error(\"invalid host string format, value: \" + host);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzE5MA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787190", "createdAt": "2020-08-10T09:30:40Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -259,12 +280,22 @@ public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer por\n      */\n     public ChannelHandlerContext setAndGetNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzE5Mw==", "bodyText": "[PMD Java] Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidCatchingGenericException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#avoidcatchinggenericexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787193", "createdAt": "2020-08-10T09:30:40Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -259,12 +280,22 @@ public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer por\n      */\n     public ChannelHandlerContext setAndGetNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzE5NQ==", "bodyText": "[PMD Java] Logger calls should be surrounded by log level guards. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nGuardLogStatement\nBest Practices\n2\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_bestpractices.html#guardlogstatement\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787195", "createdAt": "2020-08-10T09:30:40Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -259,12 +280,22 @@ public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer por\n      */\n     public ChannelHandlerContext setAndGetNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {\n+            logger.error(\"invalid host string format, value: \" + host);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzE5Ng==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787196", "createdAt": "2020-08-10T09:30:40Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -259,12 +280,22 @@ public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer por\n      */\n     public ChannelHandlerContext setAndGetNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {\n+            logger.error(\"invalid host string format, value: \" + host);\n+        }\n         String endpoint = host + \":\" + port;\n         return networkConnections.put(endpoint, ctx);\n     }\n \n     public void removeNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzE5OA==", "bodyText": "[PMD Java] Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidCatchingGenericException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#avoidcatchinggenericexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787198", "createdAt": "2020-08-10T09:30:40Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -259,12 +280,22 @@ public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer por\n      */\n     public ChannelHandlerContext setAndGetNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {\n+            logger.error(\"invalid host string format, value: \" + host);\n+        }\n         String endpoint = host + \":\" + port;\n         return networkConnections.put(endpoint, ctx);\n     }\n \n     public void removeNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIwMg==", "bodyText": "[PMD Java] Logger calls should be surrounded by log level guards. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nGuardLogStatement\nBest Practices\n2\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_bestpractices.html#guardlogstatement\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787202", "createdAt": "2020-08-10T09:30:40Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -259,12 +280,22 @@ public ChannelHandlerContext getNetworkConnectionByHost(String host, Integer por\n      */\n     public ChannelHandlerContext setAndGetNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {\n+            logger.error(\"invalid host string format, value: \" + host);\n+        }\n         String endpoint = host + \":\" + port;\n         return networkConnections.put(endpoint, ctx);\n     }\n \n     public void removeNetworkConnectionByHost(\n             String host, Integer port, ChannelHandlerContext ctx) {\n+        try {\n+            host = Inet6Address.getByName(host).getHostAddress();\n+        } catch (Exception e) {\n+            logger.error(\"invalid host string format, value: \" + host);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIwNA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787204", "createdAt": "2020-08-10T09:30:41Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -288,18 +319,24 @@ public void init() {\n         for (String connectionStr : connectionsStr) {\n             ConnectionInfo connection = new ConnectionInfo();\n \n-            String[] stringArray = connectionStr.split(\":\");\n-\n-            if (stringArray.length < 1) {\n+            int index = connectionStr.lastIndexOf(':');\n+            if (index == -1) {\n                 throw new IllegalArgumentException(\n-                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111), value: \"\n+                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111\u3001[::1]:1111), value: \"\n                                 + connectionStr);\n             }\n \n-            String IP = stringArray[0];\n-            String port = stringArray[1];\n+            String IP = connectionStr.substring(0, index);\n+            String port = connectionStr.substring(index + 1);\n+\n+            if (!(NetUtil.isValidIpV4Address(IP) || NetUtil.isValidIpV6Address(IP))) {\n+                throw new IllegalArgumentException(\n+                        \" Invalid configuration, invalid IP string format, value: \" + IP);\n+            }\n \n-            if (!Host.validIP(IP)) {\n+            try {\n+                IP = Inet6Address.getByName(IP).getHostAddress();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIwNw==", "bodyText": "[PMD Java] Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidCatchingGenericException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#avoidcatchinggenericexception\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787207", "createdAt": "2020-08-10T09:30:41Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -288,18 +319,24 @@ public void init() {\n         for (String connectionStr : connectionsStr) {\n             ConnectionInfo connection = new ConnectionInfo();\n \n-            String[] stringArray = connectionStr.split(\":\");\n-\n-            if (stringArray.length < 1) {\n+            int index = connectionStr.lastIndexOf(':');\n+            if (index == -1) {\n                 throw new IllegalArgumentException(\n-                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111), value: \"\n+                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111\u3001[::1]:1111), value: \"\n                                 + connectionStr);\n             }\n \n-            String IP = stringArray[0];\n-            String port = stringArray[1];\n+            String IP = connectionStr.substring(0, index);\n+            String port = connectionStr.substring(index + 1);\n+\n+            if (!(NetUtil.isValidIpV4Address(IP) || NetUtil.isValidIpV6Address(IP))) {\n+                throw new IllegalArgumentException(\n+                        \" Invalid configuration, invalid IP string format, value: \" + IP);\n+            }\n \n-            if (!Host.validIP(IP)) {\n+            try {\n+                IP = Inet6Address.getByName(IP).getHostAddress();\n+            } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIwOQ==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787209", "createdAt": "2020-08-10T09:30:41Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -490,7 +529,29 @@ public SslContext initSMSslContext()\n                     getGmSslKey().getInputStream());\n         }\n \n-        logger.info(\" Has no SM Ssl certificate configuration \");\n+        PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\n+        Resource gmCaResource = resolver.getResource(GM_CA_CERT);\n+        Resource gmSslResource = resolver.getResource(GM_SSL_CERT);\n+        Resource gmSslKeyResource = resolver.getResource(GM_SSL_KEY);\n+        Resource gmEnSslResource = resolver.getResource(GM_EN_SSL_CERT);\n+        Resource gmEnSslKeyResource = resolver.getResource(GM_EN_SSL_KEY);\n+\n+        // The client's SM SSL default certificate exists\n+        if (gmCaResource.exists()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 136}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIxMA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787210", "createdAt": "2020-08-10T09:30:41Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -490,7 +529,29 @@ public SslContext initSMSslContext()\n                     getGmSslKey().getInputStream());\n         }\n \n-        logger.info(\" Has no SM Ssl certificate configuration \");\n+        PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\n+        Resource gmCaResource = resolver.getResource(GM_CA_CERT);\n+        Resource gmSslResource = resolver.getResource(GM_SSL_CERT);\n+        Resource gmSslKeyResource = resolver.getResource(GM_SSL_KEY);\n+        Resource gmEnSslResource = resolver.getResource(GM_EN_SSL_CERT);\n+        Resource gmEnSslKeyResource = resolver.getResource(GM_EN_SSL_KEY);\n+\n+        // The client's SM SSL default certificate exists\n+        if (gmCaResource.exists()\n+                && gmSslResource.exists()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 137}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIxMQ==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787211", "createdAt": "2020-08-10T09:30:41Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -490,7 +529,29 @@ public SslContext initSMSslContext()\n                     getGmSslKey().getInputStream());\n         }\n \n-        logger.info(\" Has no SM Ssl certificate configuration \");\n+        PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\n+        Resource gmCaResource = resolver.getResource(GM_CA_CERT);\n+        Resource gmSslResource = resolver.getResource(GM_SSL_CERT);\n+        Resource gmSslKeyResource = resolver.getResource(GM_SSL_KEY);\n+        Resource gmEnSslResource = resolver.getResource(GM_EN_SSL_CERT);\n+        Resource gmEnSslKeyResource = resolver.getResource(GM_EN_SSL_KEY);\n+\n+        // The client's SM SSL default certificate exists\n+        if (gmCaResource.exists()\n+                && gmSslResource.exists()\n+                && gmSslKeyResource.exists()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 138}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIxNA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787214", "createdAt": "2020-08-10T09:30:41Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -490,7 +529,29 @@ public SslContext initSMSslContext()\n                     getGmSslKey().getInputStream());\n         }\n \n-        logger.info(\" Has no SM Ssl certificate configuration \");\n+        PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\n+        Resource gmCaResource = resolver.getResource(GM_CA_CERT);\n+        Resource gmSslResource = resolver.getResource(GM_SSL_CERT);\n+        Resource gmSslKeyResource = resolver.getResource(GM_SSL_KEY);\n+        Resource gmEnSslResource = resolver.getResource(GM_EN_SSL_CERT);\n+        Resource gmEnSslKeyResource = resolver.getResource(GM_EN_SSL_KEY);\n+\n+        // The client's SM SSL default certificate exists\n+        if (gmCaResource.exists()\n+                && gmSslResource.exists()\n+                && gmSslKeyResource.exists()\n+                && gmEnSslKeyResource.exists()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 139}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIxNg==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787216", "createdAt": "2020-08-10T09:30:41Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -490,7 +529,29 @@ public SslContext initSMSslContext()\n                     getGmSslKey().getInputStream());\n         }\n \n-        logger.info(\" Has no SM Ssl certificate configuration \");\n+        PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\n+        Resource gmCaResource = resolver.getResource(GM_CA_CERT);\n+        Resource gmSslResource = resolver.getResource(GM_SSL_CERT);\n+        Resource gmSslKeyResource = resolver.getResource(GM_SSL_KEY);\n+        Resource gmEnSslResource = resolver.getResource(GM_EN_SSL_CERT);\n+        Resource gmEnSslKeyResource = resolver.getResource(GM_EN_SSL_KEY);\n+\n+        // The client's SM SSL default certificate exists\n+        if (gmCaResource.exists()\n+                && gmSslResource.exists()\n+                && gmSslKeyResource.exists()\n+                && gmEnSslKeyResource.exists()\n+                && gmEnSslResource.exists()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 140}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIyMA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787220", "createdAt": "2020-08-10T09:30:42Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -510,9 +571,14 @@ private SslContext initSslContext() throws SSLException {\n \n             // check if ca.crt exist\n             if (Objects.isNull(caResource) || !caResource.exists()) {\n-                throw new RuntimeException(\n-                        (Objects.nonNull(caResource) ? \"ca.crt\" : caResource.getFilename())\n-                                + \" not exist \");\n+                Resource resource = resolver.getResource(CA_CERT);\n+                if (Objects.nonNull(resource) && resource.exists()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 162}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIyMg==", "bodyText": "[PMD Java] Avoid throwing raw exception types. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidThrowingRawExceptionTypes\nDesign\n1\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#avoidthrowingrawexceptiontypes\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787222", "createdAt": "2020-08-10T09:30:42Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -510,9 +571,14 @@ private SslContext initSslContext() throws SSLException {\n \n             // check if ca.crt exist\n             if (Objects.isNull(caResource) || !caResource.exists()) {\n-                throw new RuntimeException(\n-                        (Objects.nonNull(caResource) ? \"ca.crt\" : caResource.getFilename())\n-                                + \" not exist \");\n+                Resource resource = resolver.getResource(CA_CERT);\n+                if (Objects.nonNull(resource) && resource.exists()) {\n+                    caResource = resource;\n+                } else {\n+                    throw new RuntimeException(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 165}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIyNA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787224", "createdAt": "2020-08-10T09:30:42Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -510,9 +571,14 @@ private SslContext initSslContext() throws SSLException {\n \n             // check if ca.crt exist\n             if (Objects.isNull(caResource) || !caResource.exists()) {\n-                throw new RuntimeException(\n-                        (Objects.nonNull(caResource) ? \"ca.crt\" : caResource.getFilename())\n-                                + \" not exist \");\n+                Resource resource = resolver.getResource(CA_CERT);\n+                if (Objects.nonNull(resource) && resource.exists()) {\n+                    caResource = resource;\n+                } else {\n+                    throw new RuntimeException(\n+                            (Objects.nonNull(caResource) ? \"ca.crt\" : caResource.getFilename())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 166}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIyOQ==", "bodyText": "[PMD Java] The method 'encodeNode(String, ABIObject, JsonNode)' has a NCSS line count of 81. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nNcssCount\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#ncsscount\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787229", "createdAt": "2020-08-10T09:30:42Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/abi/wrapper/ABICodecJsonWrapper.java", "diffHunk": "@@ -0,0 +1,497 @@\n+package org.fisco.bcos.web3j.abi.wrapper;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ArrayNode;\n+import com.fasterxml.jackson.databind.node.JsonNodeFactory;\n+import java.io.IOException;\n+import java.security.InvalidParameterException;\n+import java.util.ArrayList;\n+import java.util.Base64;\n+import java.util.Iterator;\n+import java.util.List;\n+import org.fisco.bcos.web3j.abi.datatypes.Address;\n+import org.fisco.bcos.web3j.abi.datatypes.Bool;\n+import org.fisco.bcos.web3j.abi.datatypes.Bytes;\n+import org.fisco.bcos.web3j.abi.datatypes.DynamicBytes;\n+import org.fisco.bcos.web3j.abi.datatypes.Utf8String;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Int256;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Uint256;\n+import org.fisco.bcos.web3j.abi.wrapper.ABIObject.ListType;\n+import org.fisco.bcos.web3j.protocol.ObjectMapperFactory;\n+import org.fisco.bcos.web3j.utils.Numeric;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class ABICodecJsonWrapper {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(ABICodecJsonWrapper.class);\n+\n+    private ObjectMapper objectMapper = ObjectMapperFactory.getObjectMapper();\n+\n+    private void errorReport(String path, String expected, String actual)\n+            throws InvalidParameterException {\n+        String errorMessage =\n+                \"Arguments mismatch: \" + path + \", expected: \" + expected + \", actual: \" + actual;\n+        logger.error(errorMessage);\n+        throw new InvalidParameterException(errorMessage);\n+    }\n+\n+    private ABIObject encodeNode(String path, ABIObject template, JsonNode node) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIzMw==", "bodyText": "[PMD Java] A high ratio of statements to labels in a switch statement.  Consider refactoring. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSwitchDensity\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#switchdensity\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787233", "createdAt": "2020-08-10T09:30:42Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/abi/wrapper/ABICodecJsonWrapper.java", "diffHunk": "@@ -0,0 +1,497 @@\n+package org.fisco.bcos.web3j.abi.wrapper;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ArrayNode;\n+import com.fasterxml.jackson.databind.node.JsonNodeFactory;\n+import java.io.IOException;\n+import java.security.InvalidParameterException;\n+import java.util.ArrayList;\n+import java.util.Base64;\n+import java.util.Iterator;\n+import java.util.List;\n+import org.fisco.bcos.web3j.abi.datatypes.Address;\n+import org.fisco.bcos.web3j.abi.datatypes.Bool;\n+import org.fisco.bcos.web3j.abi.datatypes.Bytes;\n+import org.fisco.bcos.web3j.abi.datatypes.DynamicBytes;\n+import org.fisco.bcos.web3j.abi.datatypes.Utf8String;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Int256;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Uint256;\n+import org.fisco.bcos.web3j.abi.wrapper.ABIObject.ListType;\n+import org.fisco.bcos.web3j.protocol.ObjectMapperFactory;\n+import org.fisco.bcos.web3j.utils.Numeric;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class ABICodecJsonWrapper {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(ABICodecJsonWrapper.class);\n+\n+    private ObjectMapper objectMapper = ObjectMapperFactory.getObjectMapper();\n+\n+    private void errorReport(String path, String expected, String actual)\n+            throws InvalidParameterException {\n+        String errorMessage =\n+                \"Arguments mismatch: \" + path + \", expected: \" + expected + \", actual: \" + actual;\n+        logger.error(errorMessage);\n+        throw new InvalidParameterException(errorMessage);\n+    }\n+\n+    private ABIObject encodeNode(String path, ABIObject template, JsonNode node) {\n+        ABIObject abiObject = template.newObject();\n+\n+        switch (abiObject.getType()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIzNg==", "bodyText": "[PMD Java] Switch statements should have a default label (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSwitchStmtsShouldHaveDefault\nBest Practices\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_bestpractices.html#switchstmtsshouldhavedefault\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787236", "createdAt": "2020-08-10T09:30:42Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/abi/wrapper/ABICodecJsonWrapper.java", "diffHunk": "@@ -0,0 +1,497 @@\n+package org.fisco.bcos.web3j.abi.wrapper;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ArrayNode;\n+import com.fasterxml.jackson.databind.node.JsonNodeFactory;\n+import java.io.IOException;\n+import java.security.InvalidParameterException;\n+import java.util.ArrayList;\n+import java.util.Base64;\n+import java.util.Iterator;\n+import java.util.List;\n+import org.fisco.bcos.web3j.abi.datatypes.Address;\n+import org.fisco.bcos.web3j.abi.datatypes.Bool;\n+import org.fisco.bcos.web3j.abi.datatypes.Bytes;\n+import org.fisco.bcos.web3j.abi.datatypes.DynamicBytes;\n+import org.fisco.bcos.web3j.abi.datatypes.Utf8String;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Int256;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Uint256;\n+import org.fisco.bcos.web3j.abi.wrapper.ABIObject.ListType;\n+import org.fisco.bcos.web3j.protocol.ObjectMapperFactory;\n+import org.fisco.bcos.web3j.utils.Numeric;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class ABICodecJsonWrapper {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(ABICodecJsonWrapper.class);\n+\n+    private ObjectMapper objectMapper = ObjectMapperFactory.getObjectMapper();\n+\n+    private void errorReport(String path, String expected, String actual)\n+            throws InvalidParameterException {\n+        String errorMessage =\n+                \"Arguments mismatch: \" + path + \", expected: \" + expected + \", actual: \" + actual;\n+        logger.error(errorMessage);\n+        throw new InvalidParameterException(errorMessage);\n+    }\n+\n+    private ABIObject encodeNode(String path, ABIObject template, JsonNode node) {\n+        ABIObject abiObject = template.newObject();\n+\n+        switch (abiObject.getType()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NzIzOA==", "bodyText": "[PMD Java] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.26.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#discussion_r467787238", "createdAt": "2020-08-10T09:30:43Z", "author": {"login": "sider"}, "path": "src/main/java/org/fisco/bcos/web3j/abi/wrapper/ABICodecJsonWrapper.java", "diffHunk": "@@ -0,0 +1,497 @@\n+package org.fisco.bcos.web3j.abi.wrapper;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ArrayNode;\n+import com.fasterxml.jackson.databind.node.JsonNodeFactory;\n+import java.io.IOException;\n+import java.security.InvalidParameterException;\n+import java.util.ArrayList;\n+import java.util.Base64;\n+import java.util.Iterator;\n+import java.util.List;\n+import org.fisco.bcos.web3j.abi.datatypes.Address;\n+import org.fisco.bcos.web3j.abi.datatypes.Bool;\n+import org.fisco.bcos.web3j.abi.datatypes.Bytes;\n+import org.fisco.bcos.web3j.abi.datatypes.DynamicBytes;\n+import org.fisco.bcos.web3j.abi.datatypes.Utf8String;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Int256;\n+import org.fisco.bcos.web3j.abi.datatypes.generated.Uint256;\n+import org.fisco.bcos.web3j.abi.wrapper.ABIObject.ListType;\n+import org.fisco.bcos.web3j.protocol.ObjectMapperFactory;\n+import org.fisco.bcos.web3j.utils.Numeric;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class ABICodecJsonWrapper {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(ABICodecJsonWrapper.class);\n+\n+    private ObjectMapper objectMapper = ObjectMapperFactory.getObjectMapper();\n+\n+    private void errorReport(String path, String expected, String actual)\n+            throws InvalidParameterException {\n+        String errorMessage =\n+                \"Arguments mismatch: \" + path + \", expected: \" + expected + \", actual: \" + actual;\n+        logger.error(errorMessage);\n+        throw new InvalidParameterException(errorMessage);\n+    }\n+\n+    private ABIObject encodeNode(String path, ABIObject template, JsonNode node) {\n+        ABIObject abiObject = template.newObject();\n+\n+        switch (abiObject.getType()) {\n+            case VALUE:\n+                {\n+                    if (!node.isValueNode()) {\n+                        errorReport(\n+                                path,\n+                                abiObject.getType().toString(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0MDk0MTM5", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/687#pullrequestreview-464094139", "createdAt": "2020-08-10T09:52:58Z", "commit": {"oid": "ca4399d3ff5b0e743785dbb50a2d9028a17a3bfb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1826, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}