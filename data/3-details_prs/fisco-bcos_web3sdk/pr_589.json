{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMzEyMDQ3", "number": 589, "title": "fix PerformanceRPC", "bodyText": "", "createdAt": "2020-05-21T11:55:23Z", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589", "merged": true, "mergeCommit": {"oid": "47cfdfbafe6087c1ae1f528bf17c68dd4752a015"}, "closed": true, "closedAt": "2020-05-21T13:20:29Z", "author": {"login": "cyjseagull"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjcXfhAFqTQxNjA4Njc2Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjdTH7AFqTQxNjEyNDY2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MDg2NzYy", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#pullrequestreview-416086762", "createdAt": "2020-05-21T11:56:26Z", "commit": {"oid": "c65c321183d59fa28a8aa97449a436f5223fd599"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NjoyNlrOGYwIkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NjoyNlrOGYwIkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYwNzYzMw==", "bodyText": "[PMD] No need to call String.valueOf to append to a string. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nUselessStringValueOf\nPerformance\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.23.0/pmd_rules_java_performance.html#uselessstringvalueof\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#discussion_r428607633", "createdAt": "2020-05-21T11:56:26Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/rpc/PerformanceRpcCollector.java", "diffHunk": "@@ -65,7 +67,7 @@ public void onMessage(Response response, Long _cost) {\n                 System.out.println(\r\n                         \"===================================================================\");\r\n \r\n-                System.out.println(\"Total transactions:  \" + String.valueOf(total));\r\n+                System.out.println(\"Total RPC Requests:  \" + String.valueOf(total));\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c65c321183d59fa28a8aa97449a436f5223fd599"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MDg2Nzcy", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#pullrequestreview-416086772", "createdAt": "2020-05-21T11:56:27Z", "commit": {"oid": "c65c321183d59fa28a8aa97449a436f5223fd599"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NjoyN1rOGYwImg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NjoyN1rOGYwImg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYwNzY0Mg==", "bodyText": "[PMD] System.out.println is used (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSystemPrintln\nBest Practices\n2\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.23.0/pmd_rules_java_bestpractices.html#systemprintln\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#discussion_r428607642", "createdAt": "2020-05-21T11:56:27Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/rpc/PerformanceRpcCollector.java", "diffHunk": "@@ -65,7 +67,7 @@ public void onMessage(Response response, Long _cost) {\n                 System.out.println(\r\n                         \"===================================================================\");\r\n \r\n-                System.out.println(\"Total transactions:  \" + String.valueOf(total));\r\n+                System.out.println(\"Total RPC Requests:  \" + String.valueOf(total));\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c65c321183d59fa28a8aa97449a436f5223fd599"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MDg2Nzgw", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#pullrequestreview-416086780", "createdAt": "2020-05-21T11:56:28Z", "commit": {"oid": "c65c321183d59fa28a8aa97449a436f5223fd599"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NjoyOFrOGYwInw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NjoyOFrOGYwInw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYwNzY0Nw==", "bodyText": "[PMD] Found non-transient, non-static member. Please mark as transient or provide accessors. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nBeanMembersShouldSerialize\nError Prone\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.23.0/pmd_rules_java_errorprone.html#beanmembersshouldserialize\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#discussion_r428607647", "createdAt": "2020-05-21T11:56:28Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/rpc/PerformanceRpcCollector.java", "diffHunk": "@@ -152,5 +154,6 @@ public void onMessage(Response response, Long _cost) {\n     private Integer total = 0;\r\n     private AtomicInteger received = new AtomicInteger(0);\r\n     private AtomicInteger error = new AtomicInteger(0);\r\n+    private AtomicBoolean printed = new AtomicBoolean(false);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c65c321183d59fa28a8aa97449a436f5223fd599"}, "originalPosition": 30}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c65c321183d59fa28a8aa97449a436f5223fd599", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/c65c321183d59fa28a8aa97449a436f5223fd599", "committedDate": "2020-05-21T11:52:11Z", "message": "fix PerformanceRPC"}, "afterCommit": {"oid": "141f52b5530ded64dd94a9131a31d23e0c443c65", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/141f52b5530ded64dd94a9131a31d23e0c443c65", "committedDate": "2020-05-21T12:08:05Z", "message": "fix PerformanceRPC"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MDkzOTAw", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#pullrequestreview-416093900", "createdAt": "2020-05-21T12:10:27Z", "commit": {"oid": "141f52b5530ded64dd94a9131a31d23e0c443c65"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMjoxMDoyN1rOGYweyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMjoxMDoyN1rOGYweyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYxMzMyMg==", "bodyText": "[PMD] Private field 'printed' could be made final; it is only initialized in the declaration or constructor. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nImmutableField\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.23.0/pmd_rules_java_design.html#immutablefield\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#discussion_r428613322", "createdAt": "2020-05-21T12:10:27Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/rpc/PerformanceRpcCollector.java", "diffHunk": "@@ -152,5 +154,6 @@ public void onMessage(Response response, Long _cost) {\n     private Integer total = 0;\r\n     private AtomicInteger received = new AtomicInteger(0);\r\n     private AtomicInteger error = new AtomicInteger(0);\r\n+    private AtomicBoolean printed = new AtomicBoolean(false);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "141f52b5530ded64dd94a9131a31d23e0c443c65"}, "originalPosition": 30}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "141f52b5530ded64dd94a9131a31d23e0c443c65", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/141f52b5530ded64dd94a9131a31d23e0c443c65", "committedDate": "2020-05-21T12:08:05Z", "message": "fix PerformanceRPC"}, "afterCommit": {"oid": "ec427155e42deed33dc3695bc953f78e6c5705bd", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/ec427155e42deed33dc3695bc953f78e6c5705bd", "committedDate": "2020-05-21T12:25:52Z", "message": "1. fix PerformanceRPC,\n\n2.add queryAccountQPS to support account-query limit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MTA1MTY2", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#pullrequestreview-416105166", "createdAt": "2020-05-21T12:30:28Z", "commit": {"oid": "ec427155e42deed33dc3695bc953f78e6c5705bd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MTA4MjEw", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#pullrequestreview-416108210", "createdAt": "2020-05-21T12:35:36Z", "commit": {"oid": "ec427155e42deed33dc3695bc953f78e6c5705bd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a4c34738705fd9f28ea7c7cca77766a97d5c41f", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/1a4c34738705fd9f28ea7c7cca77766a97d5c41f", "committedDate": "2020-05-21T12:59:41Z", "message": "1. fix PerformanceRPC,\n2.add queryAccountQPS to support account-query limit"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ec427155e42deed33dc3695bc953f78e6c5705bd", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/ec427155e42deed33dc3695bc953f78e6c5705bd", "committedDate": "2020-05-21T12:25:52Z", "message": "1. fix PerformanceRPC,\n\n2.add queryAccountQPS to support account-query limit"}, "afterCommit": {"oid": "1a4c34738705fd9f28ea7c7cca77766a97d5c41f", "author": {"user": {"login": "cyjseagull", "name": "cyjseagull"}}, "url": "https://github.com/FISCO-BCOS/web3sdk/commit/1a4c34738705fd9f28ea7c7cca77766a97d5c41f", "committedDate": "2020-05-21T12:59:41Z", "message": "1. fix PerformanceRPC,\n2.add queryAccountQPS to support account-query limit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MTI0MzMy", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#pullrequestreview-416124332", "createdAt": "2020-05-21T13:01:05Z", "commit": {"oid": "1a4c34738705fd9f28ea7c7cca77766a97d5c41f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMzowMTowNVrOGYx41Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMzowMTowNVrOGYx41Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYzNjM3Mw==", "bodyText": "[PMD] System.out.println is used (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nSystemPrintln\nBest Practices\n2\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.23.0/pmd_rules_java_bestpractices.html#systemprintln\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#discussion_r428636373", "createdAt": "2020-05-21T13:01:05Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/rpc/PerformanceRpcCollector.java", "diffHunk": "@@ -65,7 +63,7 @@ public void onMessage(Response response, Long _cost) {\n                 System.out.println(\r\n                         \"===================================================================\");\r\n \r\n-                System.out.println(\"Total transactions:  \" + String.valueOf(total));\r\n+                System.out.println(\"Total RPC Requests:  \" + String.valueOf(total));\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a4c34738705fd9f28ea7c7cca77766a97d5c41f"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MTI0MzQy", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#pullrequestreview-416124342", "createdAt": "2020-05-21T13:01:06Z", "commit": {"oid": "1a4c34738705fd9f28ea7c7cca77766a97d5c41f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMzowMTowNlrOGYx43g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMzowMTowNlrOGYx43g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYzNjM4Mg==", "bodyText": "[PMD] No need to call String.valueOf to append to a string. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nUselessStringValueOf\nPerformance\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.23.0/pmd_rules_java_performance.html#uselessstringvalueof\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#discussion_r428636382", "createdAt": "2020-05-21T13:01:06Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/parallel/parallelok/PerformanceDTCollector.java", "diffHunk": "@@ -83,12 +83,10 @@ public void onMessage(TransactionReceipt receipt, Long cost) {\n                 error.addAndGet(1);\n             }\n \n-            int count = received.incrementAndGet();\n-\n-            if (count % (total / 10) == 0) {\n+            if ((received.get() + 1) % (total / 10) == 0) {\n                 System.out.println(\n                         \"                                                       |received:\"\n-                                + String.valueOf(count * 100 / total)\n+                                + String.valueOf((received.get() + 1) * 100 / total)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a4c34738705fd9f28ea7c7cca77766a97d5c41f"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MTI0MzU0", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#pullrequestreview-416124354", "createdAt": "2020-05-21T13:01:07Z", "commit": {"oid": "1a4c34738705fd9f28ea7c7cca77766a97d5c41f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMzowMTowN1rOGYx46A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMzowMTowN1rOGYx46A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYzNjM5Mg==", "bodyText": "[PMD] No need to call String.valueOf to append to a string. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nUselessStringValueOf\nPerformance\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.23.0/pmd_rules_java_performance.html#uselessstringvalueof\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#discussion_r428636392", "createdAt": "2020-05-21T13:01:07Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/parallel/precompile/PerformanceDTCollector.java", "diffHunk": "@@ -98,12 +98,10 @@ public void onMessage(TransactionReceipt receipt, Long cost) {\n                 error.addAndGet(1);\n             }\n \n-            int count = received.incrementAndGet();\n-\n-            if (count % (total / 10) == 0) {\n+            if ((received.get() + 1) % (total / 10) == 0) {\n                 System.out.println(\n                         \"                                                       |received:\"\n-                                + String.valueOf(count * 100 / total)\n+                                + String.valueOf((received.get() + 1) * 100 / total)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a4c34738705fd9f28ea7c7cca77766a97d5c41f"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MTI0Mzcy", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#pullrequestreview-416124372", "createdAt": "2020-05-21T13:01:08Z", "commit": {"oid": "1a4c34738705fd9f28ea7c7cca77766a97d5c41f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMzowMTowOFrOGYx49w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMzowMTowOFrOGYx49w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYzNjQwNw==", "bodyText": "[PMD] No need to call String.valueOf to append to a string. (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nUselessStringValueOf\nPerformance\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.23.0/pmd_rules_java_performance.html#uselessstringvalueof\n\nYou can close this issue if no need to fix it. Learn more.", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#discussion_r428636407", "createdAt": "2020-05-21T13:01:08Z", "author": {"login": "sider"}, "path": "src/test/java/org/fisco/bcos/channel/test/rpc/PerformanceRpcCollector.java", "diffHunk": "@@ -65,7 +63,7 @@ public void onMessage(Response response, Long _cost) {\n                 System.out.println(\r\n                         \"===================================================================\");\r\n \r\n-                System.out.println(\"Total transactions:  \" + String.valueOf(total));\r\n+                System.out.println(\"Total RPC Requests:  \" + String.valueOf(total));\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a4c34738705fd9f28ea7c7cca77766a97d5c41f"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MTI0NjY3", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/589#pullrequestreview-416124667", "createdAt": "2020-05-21T13:01:35Z", "commit": {"oid": "1a4c34738705fd9f28ea7c7cca77766a97d5c41f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1943, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}