{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyMzg5ODU1", "number": 6237, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDoyMjozMVrOEnEeDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDoyMjozMVrOEnEeDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NDAzMTUxOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-services/dhis-service-dxf2/src/main/java/org/hisp/dhis/dxf2/events/trackedentity/AbstractTrackedEntityInstanceService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDoyMjozMVrOHXdZIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDoyMjozMVrOHXdZIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM2MDg2Ng==", "bodyText": "In this case @gnespolino , you are also saying its not allowed to update a tei. You can update a tei, as long as it is not soft deleted. The null-check you had before did exactly that :) So if you only do the null check, we know that the tei exists in the DB (done earlier in the code) and now it is null meaning it's soft deleted .", "url": "https://github.com/dhis2/dhis2-core/pull/6237#discussion_r494360866", "createdAt": "2020-09-24T14:22:31Z", "author": {"login": "stian-sandvold"}, "path": "dhis-2/dhis-services/dhis-service-dxf2/src/main/java/org/hisp/dhis/dxf2/events/trackedentity/AbstractTrackedEntityInstanceService.java", "diffHunk": "@@ -720,6 +720,12 @@ private ImportSummary updateTrackedEntityInstance( TrackedEntityInstance dtoEnti\n             {\n                 String message = \"Tracked entity instance \" + dtoEntityInstance.getTrackedEntityInstance()\n                     + \" does not exist\";\n+\n+                if ( teiService.trackedEntityInstanceExistsIncludingDeleted( dtoEntityInstance.getTrackedEntityInstance() ) )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1eb9477544d70a1d503be5c98f8ff38298151e54"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3823, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}