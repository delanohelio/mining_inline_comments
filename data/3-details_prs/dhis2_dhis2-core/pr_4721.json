{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzNTcyNTc4", "number": 4721, "title": "fix: Remove continuous execution of job configurations", "bodyText": "Removes the continuous execution aspect of the job scheduler and job configuration.\n\nRemoves the continuousExecution property from JobConfiguration and database.\nUpgrades existing job configurations which run continuously to instead run once every hour.\nAdds tests.", "createdAt": "2020-01-16T10:34:55Z", "url": "https://github.com/dhis2/dhis2-core/pull/4721", "merged": true, "mergeCommit": {"oid": "23f1686fb3a51f6c908cfe003838d0a06b02753e"}, "closed": true, "closedAt": "2020-01-16T15:06:40Z", "author": {"login": "larshelge"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb63IdGgH2gAyMzYzNTcyNTc4OjhjNDlmZTdkMWFmODMyZDBkOWJmZGJlMzdlYjAwN2QxNzI5N2I0NmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb67j02AH2gAyMzYzNTcyNTc4OjZiOTVkMGIzZWQwMjQ5NzZlNzIxYjhhZWQwMWEzODRjNGI1MGE1OWQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8c49fe7d1af832d0d9bfdbe37eb007d17297b46e", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/8c49fe7d1af832d0d9bfdbe37eb007d17297b46e", "committedDate": "2020-01-16T09:56:33Z", "message": "Constructor cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e8c8f9d10462f23a03a798cc0e864803abffdf0", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/6e8c8f9d10462f23a03a798cc0e864803abffdf0", "committedDate": "2020-01-16T09:58:32Z", "message": "Cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1398daa6d861ddae5e5a74c9602c1852212f7dc3", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/1398daa6d861ddae5e5a74c9602c1852212f7dc3", "committedDate": "2020-01-16T09:59:27Z", "message": "Minor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f5277d47e94db8c4e642217353b447527b4e8fe", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/3f5277d47e94db8c4e642217353b447527b4e8fe", "committedDate": "2020-01-16T10:04:13Z", "message": "Test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93f738c135fa483d27b7c523dc0f76b6ae464117", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/93f738c135fa483d27b7c523dc0f76b6ae464117", "committedDate": "2020-01-16T10:05:18Z", "message": "Cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b350298b73bcdca85aa7bbcf0eb7c35ea02d944", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/4b350298b73bcdca85aa7bbcf0eb7c35ea02d944", "committedDate": "2020-01-16T10:06:45Z", "message": "Cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55f5b5bec6b9dbd36556e6ef781ffc870201aa52", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/55f5b5bec6b9dbd36556e6ef781ffc870201aa52", "committedDate": "2020-01-16T10:08:03Z", "message": "Minor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "510450fd044bb6d1e677d9fde1562c9e7748f6d2", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/510450fd044bb6d1e677d9fde1562c9e7748f6d2", "committedDate": "2020-01-16T10:18:43Z", "message": "Merge branch 'master' into dhis2-lars"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c820a1b20a0b9df577c530f1c135bfdf9b5bf11", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/8c820a1b20a0b9df577c530f1c135bfdf9b5bf11", "committedDate": "2020-01-16T10:33:53Z", "message": "Remove continuous exection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "830bdbca02af37132b7991e70df8ed935abe6661", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/830bdbca02af37132b7991e70df8ed935abe6661", "committedDate": "2020-01-16T10:39:17Z", "message": "Minor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37e85bf7b21be6b4386ba7b11c9223aaa28d070f", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/37e85bf7b21be6b4386ba7b11c9223aaa28d070f", "committedDate": "2020-01-16T10:54:17Z", "message": "Minor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbd10d6e479b8bd8ec3e9edf652d434cdce0cea9", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/cbd10d6e479b8bd8ec3e9edf652d434cdce0cea9", "committedDate": "2020-01-16T12:20:05Z", "message": "Tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccfbc686925966033ff05d83c20233011b7f74b0", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/ccfbc686925966033ff05d83c20233011b7f74b0", "committedDate": "2020-01-16T12:22:08Z", "message": "Minor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzODgwNzQ4", "url": "https://github.com/dhis2/dhis2-core/pull/4721#pullrequestreview-343880748", "createdAt": "2020-01-16T12:37:03Z", "commit": {"oid": "ccfbc686925966033ff05d83c20233011b7f74b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzODg5NzY3", "url": "https://github.com/dhis2/dhis2-core/pull/4721#pullrequestreview-343889767", "createdAt": "2020-01-16T12:54:38Z", "commit": {"oid": "ccfbc686925966033ff05d83c20233011b7f74b0"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQxMjo1NDozOFrOFeYYsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQxMzowNzoyMFrOFeYtSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQwMTEzNw==", "bodyText": "This seems to be used only by tests, I'd move it inside the tests or make a small Cron util class with more cases, like HOURLY, EVERY_MINUTE, etc.", "url": "https://github.com/dhis2/dhis2-core/pull/4721#discussion_r367401137", "createdAt": "2020-01-16T12:54:38Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/scheduling/SchedulingManager.java", "diffHunk": "@@ -52,6 +52,8 @@\n  */\n public interface SchedulingManager\n {\n+    String CRON_HOURLY = \"0 0 * ? * *\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ccfbc686925966033ff05d83c20233011b7f74b0"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQwNjQxMQ==", "bodyText": "This assumes that only one type of jobtype can run at the same time: is it always the case?", "url": "https://github.com/dhis2/dhis2-core/pull/4721#discussion_r367406411", "createdAt": "2020-01-16T13:07:20Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/scheduling/DefaultSchedulingManager.java", "diffHunk": "@@ -134,9 +131,8 @@ public boolean isJobConfigurationRunning( JobConfiguration jobConfiguration )\n             return false;\n         }\n \n-        return !jobConfiguration.isContinuousExecution() &&\n-            runningJobConfigurations.stream().anyMatch(\n-                jc -> jc.getJobType().equals( jobConfiguration.getJobType() ) && !jc.isContinuousExecution() );\n+        return runningJobConfigurations.stream().anyMatch(\n+            jc -> jc.getJobType().equals( jobConfiguration.getJobType() ) );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ccfbc686925966033ff05d83c20233011b7f74b0"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b95d0b3ed024976e721b8aed01a384c4b50a59d", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/6b95d0b3ed024976e721b8aed01a384c4b50a59d", "committedDate": "2020-01-16T15:06:04Z", "message": "Minor"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2920, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}