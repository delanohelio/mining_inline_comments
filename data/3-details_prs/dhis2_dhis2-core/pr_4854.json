{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczNTI5MTk5", "number": 4854, "title": "feat: Asynchronous handling of tracker importer side effects", "bodyText": "", "createdAt": "2020-02-11T08:31:38Z", "url": "https://github.com/dhis2/dhis2-core/pull/4854", "merged": true, "mergeCommit": {"oid": "f29949312d4d999355340b52b41d7864b82d52b0"}, "closed": true, "closedAt": "2020-02-25T21:26:32Z", "author": {"login": "zubaira"}, "timelineItems": {"totalCount": 39, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDMTQegH2gAyMzczNTI5MTk5Ojk5NDBkYWFhMzRkYTkxMDEwNjc3MGFkMjllYmI0MTE4YjgxYWRjMTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcH4lLvgH2gAyMzczNTI5MTk5OjkyOGI0OWViNDA4OGJkYmQyMjRmOTdkNzFlMDA2OTA5N2VjZWFmZTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9940daaa34da910106770ad29ebb4118b81adc11", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/9940daaa34da910106770ad29ebb4118b81adc11", "committedDate": "2020-02-11T07:07:45Z", "message": "change author tag"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eaa37229f1d4c4ff025e72e51021294fbf04dbe4", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/eaa37229f1d4c4ff025e72e51021294fbf04dbe4", "committedDate": "2020-02-11T07:09:36Z", "message": "moving object creation outside loop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a8d5bc18dc27abe40e4d4bb063e46c8bf47f50c", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/8a8d5bc18dc27abe40e4d4bb063e46c8bf47f50c", "committedDate": "2020-02-11T08:27:24Z", "message": "side effect handler services"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "647ad80f490334ce73de967b57c293f752953cc8", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/647ad80f490334ce73de967b57c293f752953cc8", "committedDate": "2020-02-11T09:13:25Z", "message": "update license"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97cb723237c256e04fee4e7f25a0afe40e6a5f40", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/97cb723237c256e04fee4e7f25a0afe40e6a5f40", "committedDate": "2020-02-12T07:20:52Z", "message": "publish async spring events"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15fc84cf28c76c8b2dc260c5d482680331c1fbd1", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/15fc84cf28c76c8b2dc260c5d482680331c1fbd1", "committedDate": "2020-02-12T07:23:51Z", "message": "update side effect handler call"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6d1aa804c0b0b289041cffb14e2433e3309cdc8", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/f6d1aa804c0b0b289041cffb14e2433e3309cdc8", "committedDate": "2020-02-12T20:07:42Z", "message": "add audit side effect implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da8e42828a5baf8026b8e2c168abb2f887b78583", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/da8e42828a5baf8026b8e2c168abb2f887b78583", "committedDate": "2020-02-12T20:50:13Z", "message": "fix unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b9fce766b6af374e678ed11f9054013f5dd60a5", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/0b9fce766b6af374e678ed11f9054013f5dd60a5", "committedDate": "2020-02-17T09:01:40Z", "message": "Merge branch 'master' into DHIS2-8270"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e33c35146ecfff2a5bb7a2f928826bed4573de5e", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/e33c35146ecfff2a5bb7a2f928826bed4573de5e", "committedDate": "2020-02-17T12:07:00Z", "message": "Add tracker notification message manager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2674862b2ad6ca63d4cb9cc847ed13f5e3b044f1", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/2674862b2ad6ca63d4cb9cc847ed13f5e3b044f1", "committedDate": "2020-02-17T21:14:56Z", "message": "replace if-else with Map"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae00f02ddff34414f6ee76207ff9126ccbc5149c", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/ae00f02ddff34414f6ee76207ff9126ccbc5149c", "committedDate": "2020-02-18T07:44:16Z", "message": "fix NPE if no side effect data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fdb82274f42ecea3f72e72d1ae8d9c65c709649", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/9fdb82274f42ecea3f72e72d1ae8d9c65c709649", "committedDate": "2020-02-20T08:55:35Z", "message": "rule engine side effects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce006da2a1c99ee3efb12e9c88883e11a35f5e80", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/ce006da2a1c99ee3efb12e9c88883e11a35f5e80", "committedDate": "2020-02-20T10:24:08Z", "message": "refector notification message manager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a34339fceb4ca14f02a2528ecca689b056c00e18", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/a34339fceb4ca14f02a2528ecca689b056c00e18", "committedDate": "2020-02-20T10:24:27Z", "message": "add BaseMessageManager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ac11b253adc8ba8adc7e43518dddd557be395f8", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/1ac11b253adc8ba8adc7e43518dddd557be395f8", "committedDate": "2020-02-20T10:30:38Z", "message": "Merge branch 'master' into DHIS2-8270"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f9d641d6d765503249a6e7ccc0dd04936d5fd39", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/5f9d641d6d765503249a6e7ccc0dd04936d5fd39", "committedDate": "2020-02-21T06:55:57Z", "message": "side effect handler for events"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4149adf05dd27de1282d4951224be70dea8c0140", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/4149adf05dd27de1282d4951224be70dea8c0140", "committedDate": "2020-02-21T07:47:40Z", "message": "fix sonar code smells"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c427261fd67488eb6789a54ee1565166fb7004f", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/2c427261fd67488eb6789a54ee1565166fb7004f", "committedDate": "2020-02-21T09:02:14Z", "message": "add unit tests for side effect data bundle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12f87212a2cc4042f1bb6a2066da3271abc476fa", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/12f87212a2cc4042f1bb6a2066da3271abc476fa", "committedDate": "2020-02-21T09:10:00Z", "message": "Merge branch 'master' into DHIS2-8270"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f6f2c97bcaaf505c37fba47cc7d854741f2767a", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/9f6f2c97bcaaf505c37fba47cc7d854741f2767a", "committedDate": "2020-02-21T09:45:53Z", "message": "use lombok Singular annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c4d0df599da7319715a68f91ab07ac4b74aa22c", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/4c4d0df599da7319715a68f91ab07ac4b74aa22c", "committedDate": "2020-02-21T09:50:35Z", "message": "remove deprecated annotation to fix code smell"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe44891f66f9df202e4fb46d9626c70aad396d48", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/fe44891f66f9df202e4fb46d9626c70aad396d48", "committedDate": "2020-02-21T10:00:38Z", "message": "add parallel stream for event processing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15635a9adaa7cb756bdb740481f8272a14d2eff2", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/15635a9adaa7cb756bdb740481f8272a14d2eff2", "committedDate": "2020-02-22T07:42:20Z", "message": "code clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f935e59c4d144919441afc9a0c90946ca2bfdc9", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/5f935e59c4d144919441afc9a0c90946ca2bfdc9", "committedDate": "2020-02-24T08:39:14Z", "message": "Merge branch 'master' into DHIS2-8270"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e8ff91e0389452c04859e8e1df2ccc9d69b5ab1", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/1e8ff91e0389452c04859e8e1df2ccc9d69b5ab1", "committedDate": "2020-02-24T09:44:34Z", "message": "explicit fetch to avoid lazy loading"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04132916792bda75286a41eca5d2933380a3a43d", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/04132916792bda75286a41eca5d2933380a3a43d", "committedDate": "2020-02-24T09:46:06Z", "message": "Merge branch 'master' into DHIS2-8270"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84a804bd15d80ec2d182402d332eb3a51b548fee", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/84a804bd15d80ec2d182402d332eb3a51b548fee", "committedDate": "2020-02-24T09:50:01Z", "message": "connect rule effect to side effect handler service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75e410fd05e981fe961af089b3856c883c33bde0", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/75e410fd05e981fe961af089b3856c883c33bde0", "committedDate": "2020-02-24T10:14:38Z", "message": "move object creation out of loop"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzMzIwODY5", "url": "https://github.com/dhis2/dhis2-core/pull/4854#pullrequestreview-363320869", "createdAt": "2020-02-24T11:23:47Z", "commit": {"oid": "75e410fd05e981fe961af089b3856c883c33bde0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxMToyMzo0N1rOFtdWBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxMTozNjowN1rOFtdo9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIxMTAxNA==", "bodyText": "This interface is a bit inconistent, since it uses Objects and String as function parameters for ProgramInstance and ProgramStageInstance", "url": "https://github.com/dhis2/dhis2-core/pull/4854#discussion_r383211014", "createdAt": "2020-02-24T11:23:47Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/programrule/engine/RuleActionImplementer.java", "diffHunk": "@@ -43,4 +43,8 @@\n     void implement( RuleEffect ruleEffect, ProgramInstance programInstance );\n \n     void implement( RuleEffect ruleEffect, ProgramStageInstance programStageInstance );\n+\n+    void implementEnrollmentAction( RuleEffect ruleEffect, String programInstance );\n+\n+    void implementEventAction( RuleEffect ruleEffect, String programStageInstance );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75e410fd05e981fe961af089b3856c883c33bde0"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIxMTM0Nw==", "bodyText": "Can you use   constructor based injection, so we keep the same approach everywhere", "url": "https://github.com/dhis2/dhis2-core/pull/4854#discussion_r383211347", "createdAt": "2020-02-24T11:24:40Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-services/dhis-service-program-rule/src/main/java/org/hisp/dhis/programrule/engine/NotificationRuleActionImplementer.java", "diffHunk": "@@ -56,10 +58,16 @@\n     // -------------------------------------------------------------------------\n \n     @Autowired\n-    private ProgramNotificationTemplateStore programNotificationTemplateStore;\n+    protected ProgramNotificationTemplateStore programNotificationTemplateStore;\n \n     @Autowired\n-    private NotificationLoggingService notificationLoggingService;\n+    protected NotificationLoggingService notificationLoggingService;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75e410fd05e981fe961af089b3856c883c33bde0"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIxMjczNw==", "bodyText": "Unused", "url": "https://github.com/dhis2/dhis2-core/pull/4854#discussion_r383212737", "createdAt": "2020-02-24T11:28:13Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-services/dhis-service-tracker/src/main/java/org/hisp/dhis/tracker/bundle/DefaultTrackerBundleService.java", "diffHunk": "@@ -60,6 +62,7 @@\n import java.util.ArrayList;\n import java.util.Collections;\n import java.util.Date;\n+import java.util.HashMap;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75e410fd05e981fe961af089b3856c883c33bde0"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIxMzYzMw==", "bodyText": "For clearness sake, I would rename this classes to include the word consumer", "url": "https://github.com/dhis2/dhis2-core/pull/4854#discussion_r383213633", "createdAt": "2020-02-24T11:30:37Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-services/dhis-service-tracker/src/main/java/org/hisp/dhis/tracker/job/TrackerNotificationMessageManager.java", "diffHunk": "@@ -0,0 +1,78 @@\n+package org.hisp.dhis.tracker.job;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import org.hisp.dhis.artemis.MessageManager;\n+import org.hisp.dhis.artemis.Topics;\n+import org.hisp.dhis.scheduling.SchedulingManager;\n+import org.springframework.beans.factory.ObjectFactory;\n+import org.springframework.jms.annotation.JmsListener;\n+import org.springframework.stereotype.Component;\n+\n+import javax.jms.JMSException;\n+import javax.jms.TextMessage;\n+\n+/**\n+ * @author Zubair Asghar\n+ */\n+@Component\n+public class TrackerNotificationMessageManager extends BaseMessageManager", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75e410fd05e981fe961af089b3856c883c33bde0"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIxMzk3NA==", "bodyText": "you can consider passing TrackerSideEffectDataBundle directly,  why do you need the serialization/deserialization?", "url": "https://github.com/dhis2/dhis2-core/pull/4854#discussion_r383213974", "createdAt": "2020-02-24T11:31:25Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-services/dhis-service-tracker/src/main/java/org/hisp/dhis/tracker/job/TrackerNotificationMessageManager.java", "diffHunk": "@@ -0,0 +1,78 @@\n+package org.hisp.dhis.tracker.job;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import org.hisp.dhis.artemis.MessageManager;\n+import org.hisp.dhis.artemis.Topics;\n+import org.hisp.dhis.scheduling.SchedulingManager;\n+import org.springframework.beans.factory.ObjectFactory;\n+import org.springframework.jms.annotation.JmsListener;\n+import org.springframework.stereotype.Component;\n+\n+import javax.jms.JMSException;\n+import javax.jms.TextMessage;\n+\n+/**\n+ * @author Zubair Asghar\n+ */\n+@Component\n+public class TrackerNotificationMessageManager extends BaseMessageManager\n+{\n+    private final ObjectFactory<TrackerNotificationThread> trackerNotificationThreadObjectFactory;\n+\n+    public TrackerNotificationMessageManager(\n+            MessageManager messageManager,\n+            SchedulingManager schedulingManager,\n+            ObjectMapper objectMapper,\n+            ObjectFactory<TrackerNotificationThread> trackerNotificationThreadObjectFactory )\n+    {\n+        super( messageManager, schedulingManager, objectMapper );\n+        this.trackerNotificationThreadObjectFactory = trackerNotificationThreadObjectFactory;\n+    }\n+\n+    @Override\n+    public String getTopic()\n+    {\n+        return Topics.TRACKER_IMPORT_NOTIFICATION_TOPIC_NAME;\n+    }\n+\n+    @JmsListener( destination = Topics.TRACKER_IMPORT_NOTIFICATION_TOPIC_NAME, containerFactory = \"jmsQueueListenerContainerFactory\" )\n+    public void consume( TextMessage message ) throws JMSException, JsonProcessingException", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75e410fd05e981fe961af089b3856c883c33bde0"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIxNDMwNQ==", "bodyText": "Can you add Javadocs to explain what are the responsibilities of this class", "url": "https://github.com/dhis2/dhis2-core/pull/4854#discussion_r383214305", "createdAt": "2020-02-24T11:32:14Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-services/dhis-service-tracker/src/main/java/org/hisp/dhis/tracker/job/TrackerNotificationThread.java", "diffHunk": "@@ -0,0 +1,83 @@\n+package org.hisp.dhis.tracker.job;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import com.google.common.collect.ImmutableMap;\n+import org.hisp.dhis.common.BaseIdentifiableObject;\n+import org.hisp.dhis.program.ProgramInstance;\n+import org.hisp.dhis.program.ProgramStageInstance;\n+import org.hisp.dhis.program.notification.ProgramNotificationService;\n+import org.hisp.dhis.security.SecurityContextRunnable;\n+import org.springframework.beans.factory.config.BeanDefinition;\n+import org.springframework.context.annotation.Scope;\n+import org.springframework.stereotype.Component;\n+\n+import java.util.function.Consumer;\n+\n+/**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75e410fd05e981fe961af089b3856c883c33bde0"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIxNTg2Mw==", "bodyText": "This are really queues, it would be better to create a QUEUE constant class for queues", "url": "https://github.com/dhis2/dhis2-core/pull/4854#discussion_r383215863", "createdAt": "2020-02-24T11:36:07Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-support/dhis-support-artemis/src/main/java/org/hisp/dhis/artemis/Topics.java", "diffHunk": "@@ -40,4 +40,8 @@\n     String TRACKER_TOPIC_NAME = \"dhis2.topic.tracker\";\n \n     String TRACKER_IMPORT_JOB_TOPIC_NAME = \"dhis2.jobs.tracker\";\n+\n+    String TRACKER_IMPORT_NOTIFICATION_TOPIC_NAME = \"dhis2.jobs.tracker.notifications\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75e410fd05e981fe961af089b3856c883c33bde0"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzMzI5MzU2", "url": "https://github.com/dhis2/dhis2-core/pull/4854#pullrequestreview-363329356", "createdAt": "2020-02-24T11:40:32Z", "commit": {"oid": "75e410fd05e981fe961af089b3856c883c33bde0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78e96191cf9847d66d8c6e46edb8733dd64928d1", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/78e96191cf9847d66d8c6e46edb8733dd64928d1", "committedDate": "2020-02-24T11:41:39Z", "message": "Merge branch 'master' into DHIS2-8270"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d06adeb5719315a16b0701a77262897998335c4a", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/d06adeb5719315a16b0701a77262897998335c4a", "committedDate": "2020-02-24T12:22:31Z", "message": "add java docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ada6ab954b0259b0bde4fb681c9abdfdffb342d", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/6ada6ab954b0259b0bde4fb681c9abdfdffb342d", "committedDate": "2020-02-24T13:00:39Z", "message": "fix: code style and review updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49c5e1d63ce24f98fdf5d5c15284bcf51b270403", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/49c5e1d63ce24f98fdf5d5c15284bcf51b270403", "committedDate": "2020-02-25T07:48:51Z", "message": "remove unused code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77bf9b38e2040f043dfd7e25527563367e7af097", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/77bf9b38e2040f043dfd7e25527563367e7af097", "committedDate": "2020-02-25T09:50:43Z", "message": "add unit tests for tracker message manager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c39f4dbedfb05722ff60b4b0d131d27084b84ea", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/3c39f4dbedfb05722ff60b4b0d131d27084b84ea", "committedDate": "2020-02-25T12:27:32Z", "message": "unit tests for tracker rule engine consumer"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0Mzc3MTY0", "url": "https://github.com/dhis2/dhis2-core/pull/4854#pullrequestreview-364377164", "createdAt": "2020-02-25T19:13:01Z", "commit": {"oid": "3c39f4dbedfb05722ff60b4b0d131d27084b84ea"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "928b49eb4088bdbd224f97d71e0069097eceafe6", "author": {"user": {"login": "zubaira", "name": "Zubair Asghar"}}, "url": "https://github.com/dhis2/dhis2-core/commit/928b49eb4088bdbd224f97d71e0069097eceafe6", "committedDate": "2020-02-25T20:58:51Z", "message": "fix code smells"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2878, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}