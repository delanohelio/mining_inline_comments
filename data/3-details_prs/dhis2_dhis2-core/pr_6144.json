{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1MjA2ODg2", "number": 6144, "title": "fix: DryRun flag and ProgramNotificationPostProcessor (DHIS2-9484)", "bodyText": "fix: added ProgramNotificationPostProcessor in eventInsertPostProcessorMap\nfix: now dryrun flag is considered while importing", "createdAt": "2020-09-11T15:45:32Z", "url": "https://github.com/dhis2/dhis2-core/pull/6144", "merged": true, "mergeCommit": {"oid": "55e411fdd03ee5ae46ed305e85d8feb26d53a201"}, "closed": true, "closedAt": "2020-09-15T14:52:42Z", "author": {"login": "gnespolino"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdH3Wx_AH2gAyNDg1MjA2ODg2OjU0MDVjNzViMjAzYTc4ZmRhOWM0NTljYWFlN2UyMTEzMzBjMmMxNjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJI_1TgFqTQ4ODc2ODcxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5405c75b203a78fda9c459caae7e211330c2c166", "author": {"user": {"login": "gnespolino", "name": "Giuseppe Nespolino"}}, "url": "https://github.com/dhis2/dhis2-core/commit/5405c75b203a78fda9c459caae7e211330c2c166", "committedDate": "2020-09-11T15:44:22Z", "message": "fix: now dryrun flag is considered while importing\nfix: added ProgramNotificationPostProcessor in eventInsertPostProcessorMap"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MjgyMTAy", "url": "https://github.com/dhis2/dhis2-core/pull/6144#pullrequestreview-487282102", "createdAt": "2020-09-13T07:24:21Z", "commit": {"oid": "5405c75b203a78fda9c459caae7e211330c2c166"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwNzoyNDoyMVrOHQ6PBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwNzoyOTo1N1rOHQ6RKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ5MzM4Mw==", "bodyText": "Can we move the ProgramNotificationPostProcessor class to shared/postprocess package?", "url": "https://github.com/dhis2/dhis2-core/pull/6144#discussion_r487493383", "createdAt": "2020-09-13T07:24:21Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-services/dhis-service-dxf2/src/main/java/org/hisp/dhis/dxf2/config/ServiceConfig.java", "diffHunk": "@@ -255,6 +255,7 @@ public RetryTemplate retryTemplate()\n     public Map<ImportStrategy, List<Class<? extends Processor>>> eventInsertPostProcessorMap()\n     {\n         return ImmutableMap.of( CREATE, newArrayList(\n+            ProgramNotificationPostProcessor.class,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5405c75b203a78fda9c459caae7e211330c2c166"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ5MzkyOQ==", "bodyText": "This seems a bit of an overkill, especially from a readability point of view. Why not use the getOrDefault method of the Map interface:\nfinal ProgramStageInstance programStageInstance = getProgramStageInstance( ctx, event );\n\n...\n\nprivate ProgramStageInstance getProgramStageInstance( WorkContext ctx, Event event )\n    {\n        return ctx.getProgramStageInstanceMap().getOrDefault( event.getUid(),\n            new ProgramStageInstanceMapper( ctx ).map( event ) );\n    }", "url": "https://github.com/dhis2/dhis2-core/pull/6144#discussion_r487493929", "createdAt": "2020-09-13T07:29:57Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-services/dhis-service-dxf2/src/main/java/org/hisp/dhis/dxf2/events/importer/update/postprocess/ProgramNotificationPostProcessor.java", "diffHunk": "@@ -68,4 +82,31 @@ public void process( final Event event, final WorkContext ctx )\n             }\n         }\n     }\n+\n+    private ProgramStageInstance getProgramStageInstance( WorkContextWithEvent workContextWithEvent )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5405c75b203a78fda9c459caae7e211330c2c166"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MjgyNjg4", "url": "https://github.com/dhis2/dhis2-core/pull/6144#pullrequestreview-487282688", "createdAt": "2020-09-13T07:34:17Z", "commit": {"oid": "5405c75b203a78fda9c459caae7e211330c2c166"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c0e699c36f813d6f9072ca799ba2f5dfe67692d", "author": {"user": {"login": "gnespolino", "name": "Giuseppe Nespolino"}}, "url": "https://github.com/dhis2/dhis2-core/commit/5c0e699c36f813d6f9072ca799ba2f5dfe67692d", "committedDate": "2020-09-14T09:25:25Z", "message": "fix: peer review\n\nProgramNotificationPostProcessor in shared package\nSmall change for better readability"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4NDM1NDA4", "url": "https://github.com/dhis2/dhis2-core/pull/6144#pullrequestreview-488435408", "createdAt": "2020-09-15T08:14:57Z", "commit": {"oid": "5c0e699c36f813d6f9072ca799ba2f5dfe67692d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4NzY4NzE3", "url": "https://github.com/dhis2/dhis2-core/pull/6144#pullrequestreview-488768717", "createdAt": "2020-09-15T14:51:31Z", "commit": {"oid": "5c0e699c36f813d6f9072ca799ba2f5dfe67692d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2431, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}