{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1Mjk0Njcw", "number": 6024, "title": "fix: Get tei api refactor tests and configs", "bodyText": "", "createdAt": "2020-08-28T09:28:08Z", "url": "https://github.com/dhis2/dhis2-core/pull/6024", "merged": true, "mergeCommit": {"oid": "c1c37842625603367cec03dba0271fcc7d9c918f"}, "closed": true, "closedAt": "2020-09-01T08:14:09Z", "author": {"login": "ameenhere"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDRkoGAH2gAyNDc1Mjk0NjcwOmU2YjlkOWNhZWY5MzJhYzg3ODIyNzBmZjkwMzY2MWJkN2I4Mjg0Mjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDViEzAFqTQ3Nzc1NTg5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e6b9d9caef932ac8782270ff903661bd7b828428", "author": {"user": {"login": "ameenhere", "name": "Mohamed Ameen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/e6b9d9caef932ac8782270ff903661bd7b828428", "committedDate": "2020-08-28T09:27:24Z", "message": "trying different profile for defaultconfigprovider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95f6f48fdf1d65e6bd028ea27557b3b035856b4b", "author": {"user": {"login": "ameenhere", "name": "Mohamed Ameen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/95f6f48fdf1d65e6bd028ea27557b3b035856b4b", "committedDate": "2020-08-28T10:08:02Z", "message": "Disable OIDC configuration check if test run"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7c4b06fa5e6242de9567c3b0a07ed229f2b086d", "author": {"user": {"login": "ameenhere", "name": "Mohamed Ameen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/d7c4b06fa5e6242de9567c3b0a07ed229f2b086d", "committedDate": "2020-08-28T10:26:30Z", "message": "Changed flyway to accept mixed mode to include both non-ts and ts statements within a migration group"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NjQwODQz", "url": "https://github.com/dhis2/dhis2-core/pull/6024#pullrequestreview-477640843", "createdAt": "2020-08-28T11:07:19Z", "commit": {"oid": "d7c4b06fa5e6242de9567c3b0a07ed229f2b086d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMTowNzoxOVrOHI8NXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMTowNzoxOVrOHI8NXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTEzNzExOA==", "bodyText": "@netroms Do you see any problem with doing this? Should only be in effect during tests.", "url": "https://github.com/dhis2/dhis2-core/pull/6024#discussion_r479137118", "createdAt": "2020-08-28T11:07:19Z", "author": {"login": "ameenhere"}, "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/security/oidc/OidcDisabledCondition.java", "diffHunk": "@@ -41,6 +41,10 @@\n     @Override\n     public boolean matches( ConditionContext context, AnnotatedTypeMetadata metadata )\n     {\n+        if ( isTestRun( context ) )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7c4b06fa5e6242de9567c3b0a07ed229f2b086d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NjQxNTkx", "url": "https://github.com/dhis2/dhis2-core/pull/6024#pullrequestreview-477641591", "createdAt": "2020-08-28T11:08:51Z", "commit": {"oid": "d7c4b06fa5e6242de9567c3b0a07ed229f2b086d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMTowODo1MVrOHI8UzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMTowODo1MVrOHI8UzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTEzOTAyMA==", "bodyText": "@luciano-fiandesio  Group ensures the \"migration group\" is executed in a single transaction. This would be ideal for instance to rollback to a clean state in case of migration failures.\nBut we have introduced certain non-transaction statements in our migrations. We can enable \"Mixed\" mode so that it wraps in transaction on a best effort basis.", "url": "https://github.com/dhis2/dhis2-core/pull/6024#discussion_r479139020", "createdAt": "2020-08-28T11:08:51Z", "author": {"login": "ameenhere"}, "path": "dhis-2/dhis-support/dhis-support-db-migration/src/main/java/org/hisp/dhis/db/migration/config/FlywayConfig.java", "diffHunk": "@@ -62,8 +62,9 @@ public Flyway flyway( DhisConfigurationProvider configurationProvider, DataSourc\n             Boolean.parseBoolean( configurationProvider.getProperty( FLYWAY_OUT_OF_ORDER_MIGRATION ) ) );\n         classicConfiguration.setIgnoreMissingMigrations( true );\n         classicConfiguration.setIgnoreFutureMigrations( false );\n-        classicConfiguration.setGroup( false );\n+        classicConfiguration.setGroup( true );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7c4b06fa5e6242de9567c3b0a07ed229f2b086d"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cddb8931fba14ffb166e7867eb3bbbab639b235f", "author": {"user": {"login": "ameenhere", "name": "Mohamed Ameen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/cddb8931fba14ffb166e7867eb3bbbab639b235f", "committedDate": "2020-08-28T11:37:01Z", "message": "Fix enrollment followup tests, to use getBoolean and wasNull instead of getString"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NjYxNjI3", "url": "https://github.com/dhis2/dhis2-core/pull/6024#pullrequestreview-477661627", "createdAt": "2020-08-28T11:45:03Z", "commit": {"oid": "cddb8931fba14ffb166e7867eb3bbbab639b235f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMTo0NTowM1rOHI-72A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMTo0NTowM1rOHI-72A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTE4MTc4NA==", "bodyText": "This returns \"t\" and Boolean.parseBoolean( \"t\" ) is false. Changed it to use resultSet.wasNull() to preserve null", "url": "https://github.com/dhis2/dhis2-core/pull/6024#discussion_r479181784", "createdAt": "2020-08-28T11:45:03Z", "author": {"login": "ameenhere"}, "path": "dhis-2/dhis-services/dhis-service-dxf2/src/main/java/org/hisp/dhis/dxf2/events/trackedentity/store/mapper/EnrollmentRowCallbackHandler.java", "diffHunk": "@@ -108,8 +108,8 @@ private Enrollment getEnrollment( ResultSet rs )\n         enrollment.setStatus( EnrollmentStatus.fromStatusString( rs.getString( getColumnName( STATUS ) ) ) );\n         enrollment.setEnrollmentDate( rs.getTimestamp( getColumnName( ENROLLMENTDATE ) ) );\n         enrollment.setIncidentDate( rs.getTimestamp( getColumnName( INCIDENTDATE ) ) );\n-        final String followup = rs.getString( getColumnName( FOLLOWUP ) );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cddb8931fba14ffb166e7867eb3bbbab639b235f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NjYxNzc4", "url": "https://github.com/dhis2/dhis2-core/pull/6024#pullrequestreview-477661778", "createdAt": "2020-08-28T11:45:21Z", "commit": {"oid": "cddb8931fba14ffb166e7867eb3bbbab639b235f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMTo0NToyMVrOHI-9NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMTo0NToyMVrOHI-9NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTE4MjEzMw==", "bodyText": "This returns \"t\" and Boolean.parseBoolean( \"t\" ) is false. Changed it to use resultSet.wasNull() to preserve null", "url": "https://github.com/dhis2/dhis2-core/pull/6024#discussion_r479182133", "createdAt": "2020-08-28T11:45:21Z", "author": {"login": "ameenhere"}, "path": "dhis-2/dhis-services/dhis-service-dxf2/src/main/java/org/hisp/dhis/dxf2/events/trackedentity/store/mapper/EventRowCallbackHandler.java", "diffHunk": "@@ -67,8 +67,8 @@ private Event getEvent( ResultSet rs )\n         event.setEvent( rs.getString( getColumnName( COLUMNS.UID ) ) );\n         event.setId( rs.getLong( getColumnName( COLUMNS.ID ) ) );\n         event.setTrackedEntityInstance( rs.getString( getColumnName( COLUMNS.TEI_UID ) ) );\n-        final String followup = rs.getString( getColumnName( COLUMNS.ENROLLMENT_FOLLOWUP ) );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cddb8931fba14ffb166e7867eb3bbbab639b235f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69fb30f992f74df38cff2cdadaaa96e205d09c26", "author": {"user": {"login": "ameenhere", "name": "Mohamed Ameen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/69fb30f992f74df38cff2cdadaaa96e205d09c26", "committedDate": "2020-08-28T12:53:13Z", "message": "Force hibernate flush and clear to reload entities saved using jdbctemplate in tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f815432b54a6e1ea566993b583bf4deb4bd65971", "author": {"user": {"login": "ameenhere", "name": "Mohamed Ameen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/f815432b54a6e1ea566993b583bf4deb4bd65971", "committedDate": "2020-08-28T12:55:26Z", "message": "LGTM alert fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NzU1ODkx", "url": "https://github.com/dhis2/dhis2-core/pull/6024#pullrequestreview-477755891", "createdAt": "2020-08-28T14:04:14Z", "commit": {"oid": "f815432b54a6e1ea566993b583bf4deb4bd65971"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2552, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}