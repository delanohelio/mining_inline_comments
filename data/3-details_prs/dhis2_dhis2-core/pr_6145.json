{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2NDAwNTg1", "number": 6145, "title": "fix: [DHIS2-9405] Avoid leaking sensitive sql messages in case of sensitive exceptions like sqlgrammarexceptions etc (master)", "bodyText": "", "createdAt": "2020-09-14T07:20:29Z", "url": "https://github.com/dhis2/dhis2-core/pull/6145", "merged": true, "mergeCommit": {"oid": "82930982ea069f2819c8faa0d083dc09c9bc557c"}, "closed": true, "closedAt": "2020-09-18T12:05:48Z", "author": {"login": "ameenhere"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdItxekAH2gAyNDg2NDAwNTg1OjdjYWE2ZmY2ZWFkN2Y1N2VmNDgyNGFjYzA0ZTI1MWQ2YjIyMTI3MjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJwJmcgFqTQ5MDUzOTU3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7caa6ff6ead7f57ef4824acc04e251d6b2212722", "author": {"user": {"login": "ameenhere", "name": "Mohamed Ameen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/7caa6ff6ead7f57ef4824acc04e251d6b2212722", "committedDate": "2020-09-14T07:08:24Z", "message": "fix: [DHIS2-9405] Avoid leaking sensitive sql messages in case of badsqlgrammarexceptions etc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NTEzNDI0", "url": "https://github.com/dhis2/dhis2-core/pull/6145#pullrequestreview-487513424", "createdAt": "2020-09-14T08:07:53Z", "commit": {"oid": "7caa6ff6ead7f57ef4824acc04e251d6b2212722"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODowNzo1NFrOHRId_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODowNzo1NFrOHRId_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzcyNjU4OQ==", "bodyText": "This Advice is only applied  to MetadataSyncController and MetadataVersionController so the \"sensitive exception\" logic would not be applied to Tracker import - which I guess was the original trigger for this PR.", "url": "https://github.com/dhis2/dhis2-core/pull/6145#discussion_r487726589", "createdAt": "2020-09-14T08:07:54Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/CrudControllerAdvice.java", "diffHunk": "@@ -84,6 +85,11 @@\n @ControllerAdvice\n public class CrudControllerAdvice", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7caa6ff6ead7f57ef4824acc04e251d6b2212722"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3Njk2NTgx", "url": "https://github.com/dhis2/dhis2-core/pull/6145#pullrequestreview-487696581", "createdAt": "2020-09-14T12:22:21Z", "commit": {"oid": "7caa6ff6ead7f57ef4824acc04e251d6b2212722"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMjoyMjoyMlrOHRRI2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMjoyMjoyMlrOHRRI2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzg2ODYzNA==", "bodyText": "You  can also consider using the standard Spring exception handler approach, like so:\n@ExceptionHandler({BadSqlGrammarException.class,QueryException.class})\n  public String sensitiveErrorHandler() {\n   \n    return GENERIC_MESSAGE;\n  }", "url": "https://github.com/dhis2/dhis2-core/pull/6145#discussion_r487868634", "createdAt": "2020-09-14T12:22:22Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/CrudControllerAdvice.java", "diffHunk": "@@ -84,6 +85,11 @@\n @ControllerAdvice\n public class CrudControllerAdvice\n {\n+    //Add sensitive exceptions into this array\n+    private static final Class<?>[] SENSITIVE_EXCEPTIONS = { BadSqlGrammarException.class, org.hibernate.QueryException.class };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7caa6ff6ead7f57ef4824acc04e251d6b2212722"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b812e3d817b107f661b58ffbba3cbe2b0bfd1037", "author": {"user": {"login": "ameenhere", "name": "Mohamed Ameen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/b812e3d817b107f661b58ffbba3cbe2b0bfd1037", "committedDate": "2020-09-16T07:51:17Z", "message": "Merge branch 'master' into DHIS2-9405-master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa3c42fc0d76c526a8b86b843d98043384cecb29", "author": {"user": {"login": "ameenhere", "name": "Mohamed Ameen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/aa3c42fc0d76c526a8b86b843d98043384cecb29", "committedDate": "2020-09-16T08:31:52Z", "message": "format"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNTMzNzIw", "url": "https://github.com/dhis2/dhis2-core/pull/6145#pullrequestreview-490533720", "createdAt": "2020-09-17T12:20:43Z", "commit": {"oid": "aa3c42fc0d76c526a8b86b843d98043384cecb29"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNTM5NTc0", "url": "https://github.com/dhis2/dhis2-core/pull/6145#pullrequestreview-490539574", "createdAt": "2020-09-17T12:28:29Z", "commit": {"oid": "aa3c42fc0d76c526a8b86b843d98043384cecb29"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2434, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}