{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMTQ0MTUw", "number": 4847, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxMTo0ODoyOVrODh2lNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxMTo0ODoyOVrODh2lNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2ODIzODYxOnYy", "diffSide": "RIGHT", "path": "Jenkinsfile-publish-image", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxMTo0ODoyOVrOFs0Zrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxMTo0ODoyOVrOFs0Zrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU0MDIwNw==", "bodyText": "Not sure if we can pull it off, but it would be nice if we have a single place where we source the variants we build for both this file, and the containers defined in: https://github.com/dhis2/dhis2-core/blob/master/docker/shared/containers-list.sh#L26-L42\nMaking sure our container versions are up-to-date is currently something that we don't track super-well, and we are opening ourselves up for more complications when we hardcode them in multiple places.", "url": "https://github.com/dhis2/dhis2-core/pull/4847#discussion_r382540207", "createdAt": "2020-02-21T11:48:29Z", "author": {"login": "varl"}, "path": "Jenkinsfile-publish-image", "diffHunk": "@@ -83,32 +83,55 @@ pipeline {\n             }\n         }\n \n-        stage('Start instance') {\n-            steps {\n-                dir(\"dhis-2/dhis-e2e-test\") {\n-                    sh \"IMAGE_NAME=${DOCKER_CORE_IMAGE_FULL_NAME} docker-compose -p ${COMPOSE_PARAMETER} up -d\"\n-                }\n-            }\n-        }\n-\n         stage('Run api tests') {\n-            steps {\n-                script {\n-                    TESTS_IMAGE_FULL_NAME = \"core-api-tests:${DOCKER_IMAGE_TAG}\"\n-\n-                    dir(\"dhis-2/dhis-e2e-test\") {\n-                        sh \"docker build -t ${TESTS_IMAGE_FULL_NAME} .\"\n-                        sh \"IMAGE_NAME=${TESTS_IMAGE_FULL_NAME} docker-compose -p ${COMPOSE_PARAMETER} -f docker-compose.e2e.yml up --exit-code-from e2e-test\"\n+            matrix {\n+                axes {\n+                    axis {\n+                        name 'DOCKER_VARIANT'\n+                        values '-tomcat-8.5-jdk8-openjdk-slim', '-tomcat-9.0.27-jdk11-openjdk-slim'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3ebad5e68e4264df510da44fc7ed5eef9caf8a1"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3573, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}