{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4MzM2NjAy", "number": 6333, "title": "fix: lazy issue in audit service", "bodyText": "This is to rewrite/fix the audit service to avoid lazy exception during serialization.\nThe idea to to manually scan through each audit entity's properties and generate a serializable entry before sending it to jackson for json serialization.\nThe current rule to filter out not-needed properties is using owner = true base on the schema of that property class.\nAnother added logic is to map all referenced BaseIdentifiableObject to only UID string.\nNumber of hibernate queries generated during this process:\n\n1 Select query to create the entity proxy.\nn select queries to get the reference properties with owner = true.\nIf object doesn't have any lazy collections/properties, no select query will be triggered.\n\nAuditIntegrationTest covers some of the happy paths of this code\nKnown issue: This code doesn't take into account the Embedded object. If the property object extends Embedded then it will not be converted to UID string, in result when serializing  all lazy references of this property will throw LazyInitializationException if they are not loaded.  Will address this later in a separate PR\nPerformance test result\nBefore the fix\n\nAfter the fix\n\nDebug using StopWatch, print time (ms) to serialize one object\nBefore the fix\nclass org.hisp.dhis.organisationunit.OrganisationUnit time : 34\nclass org.hisp.dhis.program.Program time : 102\nclass org.hisp.dhis.trackedentity.TrackedEntityInstance time : 28\n\nAfter the fix\nclass org.hisp.dhis.trackedentity.TrackedEntityInstance time : 0\nclass org.hisp.dhis.trackedentityattributevalue.TrackedEntityAttributeValue time : 0\nclass org.hisp.dhis.program.Program time : 1\n\n\nSample records\nOrganisationUnit\n org.hisp.dhis.organisationunit.OrganisationUnit | O6uvpzGd5pu | {\"uid\": \"O6uvpzGd5pu\", \"code\": \"OU_264\", \"attributeValues\": []} | UPDATE    | {\"lastUpdatedBy\":\"xE7jOejl9FI\",\"parent\":\"ImspTQPwCqd\",\"code\":\"OU_264\",\"created\":\"2012-02-17T15:54:39.987\",\"attributeValues\":[],\"description\":\"asdasdasd\",\"uid\":\"O6uvpzGd5pu\",\"lastUpdated\":\"2020-10-06T23:44:04.603\",\"path\":\"/ImspTQPwCqd/O6uvpzGd5pu\",\"translations\":[],\"name\":\"Bo\",\"geometry\":{},\"shortName\":\"Bo\",\"openingDate\":\"1990-02-01T00:00:00.000\",\"user\":\"xE7jOejl9FI\"}\nTrackedEntityInstance\norg.hisp.dhis.trackedentity.TrackedEntityInstance                     | F8TVn5sSZZ9 | {\"uid\": \"F8TVn5sSZZ9\", \"deleted\": false, \"inactive\": false, \"attributeValues\": [], \"organisationUnit\": \"DiszpKrYNg8\", \"trackedEntityType\": \"nEenWmSyUEp\"} | READ      | {\"created\":\"2020-10-05T22:28:35.920\",\"lastUpdated\":\"2020-10-05T22:28:35.921\",\"translations\":[],\"externalAccess\":false,\"userGroupAccesses\":[],\"userAccesses\":[], \"favorites\":[],\"lastUpdatedBy\":{\"id\":\"xE7jOejl9FI\",\"code\":null,\"name\":\"John Traore\",\"displayName\":\"John Traore\",\"username\":\"admin\"},\"deleted\":false,\"createdAtClient\":\"2020-10-05T22:28:35.920\",\"lastUpdatedAtClient\":\"2020-10-05T22:28:35.920\",\"relationshipI tems\":null,\"programInstances\":null,\"programOwners\":null,\"organisationUnit\":{\"code\":\"OU_559\",\"name\":\"Ngelehun CHC\",\"created\":\"2012-02-17T15:54:39.987\",\"lastUpdated\":\"2020-10-06T03:56:03.827\",\"translations\":[],\"externalAccess\":false,\"user\":{\"id\":\"xE7jOejl9 FI\",\"code\":null,\"name\":\"John Traore\",\"displayName\":\"John Traore\",\"username\":\"admin\"},\"userGroupAccesses\":[],\"userAccesses\":[],\"favorites\":[],\"lastUpdatedBy\":{\"id\":\"xE7jOejl9FI\",\"code\":null,\"name\":\"John Traore\",\"displayName\":\"John Traore\",\"username\":\"admi n\"},\"favorite\":false,\"displayName\":\"Ngelehun CHC\",\"id\":\"DiszpKrYNg8\",\"attributeValues\":[]},\"trackedEntityType\":{\"name\":\"Person\",\"created\":\"2014-08-20T12:28:56.409\",\"lastUpdated\":\"2018-02-22T09:05:13.160\",\"translations\":[],\"externalAccess\":false,\"publicAc cess\":\"rwrw----\",\"user\":{\"id\":\"xE7jOejl9FI\",\"code\":null,\"name\":\"John Traore\",\"displayName\":\"John Traore\",\"username\":\"admin\"},\"userGroupAccesses\":null,\"userAccesses\":null,\"favorites\":[],\"lastUpdatedBy\":{\"id\":\"xE7jOejl9FI\",\"code\":null,\"name\":\"John Traore\",\"displayName\":\"John Traore\",\"username\":\"admin\"},\"description\":\"Person\",\"trackedEntityTypeAttributes\":null,\"featureType\":\"NONE\",\"minAttributesRequiredToSearch\":1,\"maxTeiCountToReturn\":0,\"allowAuditLog\":false,\"displayDescription\":\"Person\",\"displayFormName\":\"Person\",\"favorite\":false,\"displayName\":\"Person\",\"id\":\"nEenWmSyUEp\",\"attributeValues\":[]},\"inactive\":false,\"storedBy\":\"admin\",\"favorite\":false,\"id\":\"F8TVn5sSZZ9\",\"attributeValues\":[],\"trackedEntityAttributeValues\":null}\nProgram\n org.hisp.dhis.program.Program                   | IpHINAT79UW | {\"uid\": \"IpHINAT79UW\", \"attributeValues\": []}                   | UPDATE    | {\"publicAccess\":\"rw------\",\"description\":\"sadasd\",\"completeEventsExpiryDays\":0,\"skipOffline\":false,\"ignoreOverd ueEvents\":false,\"uid\":\"IpHINAT79UW\",\"lastUpdated\":\"2020-10-06T23:44:36.050\",\"notificationTemplates\":[\"pwp8HUFajO1\"],\"categoryCombo\":\"bjDvmb4bfuf\",\"translations\":[],\"programAttributes\":[\"l2T72XzBCLd\",\"XmRd2ZDjWhF\",\"pWEEfUJUjej\",\"ALw63dHrw1n\"],\"featureType \":\"POINT\",\"minAttributesRequiredToSearch\":1,\"organisationUnits\":[\"z4silfLpw2G\",\"NJolnlvYgLr\",\"ZxuSbAmsLCn\",\"wxMmC45UyNw\",\"wjP03y8OY5k\",\"Uo4cyJwAhTW\",\"Eyqyhztf8G1\",\"GyH8bjdOTsD\",\"rpAgG9XCWhO\",\"Zwnfm4rnzbZ\",\"ZKL5hlVG6F6\",\"oIgBLlEo6eH\",\"Qwzs1iinAI7\",\"Zp2Yi4j2AAH\",\"K3k64jslIlL\",\"si34vmovtgR\",\"jGYT5U5qJP6\",\"cWIiusmHULW\",\"dczh6Jfd4no\",\"zQ2pFkzGtIg\",\"NLN0MvWv9tl\",\"c9wCIfbcyVo\",\"FsunWIQLXoF\",\"uNEhNuBUr0i\",\"DqfiI6NVnB1\",\"cd3U2Tp0qR2\",\"yJ1xkKha5oE\",\"y5hLlID8ihI\",\"GGDHb8xd8jc\",\"VFF7f43dJv4\",\"msH78gZ7Fe6\",\"PMsF64R6OJX\",\"IN2dOk0gY1G\",\"DcmSvQd5N8c\",\"PnMPARoMhWW\",\"TGRCfJEnXJr\",\"BJMWTGwuGiw\",\"PWqwcBdRGIH\",\"OI0BQUurVFS\",\"O63vIA5MVn6\",\"esMAQ4vs4kM\",\"b09gf2vvZDb\",\"ldXIdLNUNEn\",\"e2WgqiasKnD\",\"qELjt3LRkSD\",\"k8ZPul89UDm\",\"aSnKB1sWaz4\",\"dtuiqEXYa7z\",\"QZ5rmKrVleg\",\"W7ekX3gi0ut\",\"mTNOoGXuC39\",\"ctN0WgIvfke\",\"M9q1wOOsrXp\",\"wjFsUXI1MlO\",\"LV2b3vaLRl1\",\"B9RxRfRUi2R\",\"NqLYdlnK8sc\",\"Pae8DR7VmcL\",\"rebbn0ooFSO\",\"cZxP4NE5O9z\",\"u0SlCNJnK3K\",\"TSyzvBiovKh\",\"fdsRQbuuAuh\",\"ubsjwFFBaJM\",\"a04CZxe0PSe\",\"BzEwqabuW19\",\"XmfqaErvQ2T\",\"YQ3csPLAlrn\",\"CqARw68kXbB\",\"foPGXhwhlqp\",\"EQUwHqZOb5L\",\"Gba5bTc8NIg\",\"ewh5SKxcCAl\",\"vyIl6s0lhKc\",\"GM9ddjXIO5b\",\"OqBiNJjKQAu\",\"sDTodaygv5u\",\"X9zzzyPZViR\",\"nYiOoF2nXIr\",\"suFG8zx4bU3\",\"pmzk0ho80aA\",\"QMnoFLTLpkY\",\"Tc3zugEWdTm\",\"oV9P0VvL9Jh\",\"HC2NlwpoXfb\",\"UJ80rknbJtm\",\"OZ1olxsTyNa\",\"JrSIoCOdTH2\",\"uYTq3TEO2a9\",\"Ahh47q8AkId\",\"BXJnMD2eJAx\",\"InQWjSe6k2f\",\"sYJCxNdKHxR\",\"CgunjDKbM45\",\"VdXuxcNkiad\"],\"displayFrontPageList\":true,\"enrollmentDateLabel\":\"Date of enrollment\",\"lastUpdatedBy\":\"xE7jOejl9FI\",\"programType\":\"WITH_REGISTRATION\",\"onlyEnrollOnce\":true,\"userGroupAccesses\":[{\"access\":\"r-rw----\",\"userGroupUid\":\"M1Qre0247G3\",\"displayName\":\"_PROGRAM_Antenatal care program\",\"id\":\"M1Qre0247G3\"},{\"access\":\"r-rw----\",\"userGroupUid\":\"H9XnHoWRKCg\",\"displayName\":\"_PROGRAM_Child Health Tracker\",\"id\":\"H9XnHoWRKCg\"},{\"access\":\"r-rw----\",\"userGroupUid\":\"vRoAruMnNpB\",\"displayName\":\"_PROGRAM_MNCH / PNC (Adult Woman) program\",\"id\":\"vRoAruMnNpB\"},{\"access\":\"r-rw----\",\"userGroupUid\":\"Kk12LkEWtXp\",\"displayName\":\"_PROGRAM_TB program\",\"id\":\"Kk12LkEWtXp\"},{\"access\":\"r-rw----\",\"userGroupUid\":\"z1gNAf2zUxZ\",\"displayName\":\"_PROGRAM_WHO MCH program\",\"id\":\"z1gNAf2zUxZ\"},{\"access\":\"r-rw----\",\"userGroupUid\":\"gXpmQO6eEOo\",\"displayName\":\"_PROGRAM_Superuser\",\"id\":\"gXpmQO6eEOo\"},{\"access\":\"r-rw----\",\"userGroupUid\":\"pBnkuih0c1K\",\"displayName\":\"_PROGRAM_System administrator (ALL)\",\"id\":\"pBnkuih0c1K\"},{\"access\":\"r-rw----\",\"userGroupUid\":\"NTC8GjJ7p8P\",\"displayName\":\"_PROGRAM_Inpatient program\",\"id\":\"NTC8GjJ7p8P\"}],\"accessLevel\":\"OPEN\",\"created\":\"2013-03-04T11:41:07.494\",\"programSections\":[],\"attributeValues\":[],\"version\":37,\"maxTeiCountToReturn\":0,\"selectIncidentDatesInFuture\":false,\"incidentDateLabel\":\"Date of birth\",\"programStages\":[\"A03MvHHogjR\",\"ZzYYXq4fJie\"],\"trackedEntityType\":\"nEenWmSyUEp\",\"displayIncidentDate\":true,\"userAccesses\":[],\"name\":\"Child Programme\",\"selectEnrollmentDatesInFuture\":false,\"style\":{\"color\":\"#fbc02d\",\"icon\":\"child_program_positive\"},\"expiryDays\":0,\"shortName\":\"Child Programme\",\"user\":\"xE7jOejl9FI\",\"useFirstStageDuringRegistration\":true}", "createdAt": "2020-10-06T07:38:44Z", "url": "https://github.com/dhis2/dhis2-core/pull/6333", "merged": true, "mergeCommit": {"oid": "7f012c46b1ebaadbb24c054f3c6f3d71238c9e3f"}, "closed": true, "closedAt": "2020-11-04T11:44:04Z", "author": {"login": "vietnguyen"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPzbBDABqjM4NDM5MzMyOTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZMOJHgFqTUyMzI4MjA2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f3ee335cf08e8313d0b6c774d35dfd55660d8245", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/f3ee335cf08e8313d0b6c774d35dfd55660d8245", "committedDate": "2020-10-06T07:38:02Z", "message": "fix: lazy issue in audit service"}, "afterCommit": {"oid": "3b9e9510dcaca556f019d3c57b1583eb2eb4c1bd", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/3b9e9510dcaca556f019d3c57b1583eb2eb4c1bd", "committedDate": "2020-10-06T07:40:33Z", "message": "fix: lazy issue in audit service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a618176ff3629395f79a97300be0d07ee66dabf", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/8a618176ff3629395f79a97300be0d07ee66dabf", "committedDate": "2020-10-06T07:44:32Z", "message": "fix: lazy issue in audit service"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b9e9510dcaca556f019d3c57b1583eb2eb4c1bd", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/3b9e9510dcaca556f019d3c57b1583eb2eb4c1bd", "committedDate": "2020-10-06T07:40:33Z", "message": "fix: lazy issue in audit service"}, "afterCommit": {"oid": "8a618176ff3629395f79a97300be0d07ee66dabf", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/8a618176ff3629395f79a97300be0d07ee66dabf", "committedDate": "2020-10-06T07:44:32Z", "message": "fix: lazy issue in audit service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "561b148e51acf1a370576929157b4823d53dc79a", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/561b148e51acf1a370576929157b4823d53dc79a", "committedDate": "2020-10-06T07:51:18Z", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-9467-36-0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3676b1dbe860824fda5f5eee479753e20288d544", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/3676b1dbe860824fda5f5eee479753e20288d544", "committedDate": "2020-10-06T16:58:35Z", "message": "fix: hibernate lazy exception in audit service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bacb109b521fd07a6eb384a77677fc0d8b54f76d", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/bacb109b521fd07a6eb384a77677fc0d8b54f76d", "committedDate": "2020-10-06T17:02:10Z", "message": "clean up code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNTczNTQ4", "url": "https://github.com/dhis2/dhis2-core/pull/6333#pullrequestreview-503573548", "createdAt": "2020-10-07T06:55:28Z", "commit": {"oid": "bacb109b521fd07a6eb384a77677fc0d8b54f76d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwNjo1NToyOFrOHdlCqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwNzowODowN1rOHdlZ-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDc3NzY0Mg==", "bodyText": "you can remove the private modifier, since @Value adds that", "url": "https://github.com/dhis2/dhis2-core/pull/6333#discussion_r500777642", "createdAt": "2020-10-07T06:55:28Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-support/dhis-support-artemis/src/main/java/org/hisp/dhis/artemis/audit/AuditableEntity.java", "diffHunk": "@@ -39,4 +39,16 @@\n public class AuditableEntity\n {\n     private Object entity;\n+\n+    private Object serializableObject;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bacb109b521fd07a6eb384a77677fc0d8b54f76d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDc3ODM4OA==", "bodyText": "What is the difference now between entity and serializableObject? Can we get rid of entity? If not, let's add a short Javadoc comment", "url": "https://github.com/dhis2/dhis2-core/pull/6333#discussion_r500778388", "createdAt": "2020-10-07T06:56:58Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-support/dhis-support-artemis/src/main/java/org/hisp/dhis/artemis/audit/AuditableEntity.java", "diffHunk": "@@ -39,4 +39,16 @@\n public class AuditableEntity\n {\n     private Object entity;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bacb109b521fd07a6eb384a77677fc0d8b54f76d"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDc3OTUzMQ==", "bodyText": "Please, no wildcard import. Also, fix unused imports", "url": "https://github.com/dhis2/dhis2-core/pull/6333#discussion_r500779531", "createdAt": "2020-10-07T06:59:22Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-support/dhis-support-artemis/src/main/java/org/hisp/dhis/artemis/audit/listener/AbstractHibernateListener.java", "diffHunk": "@@ -28,23 +28,31 @@\n  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n  */\n \n-import org.apache.commons.logging.Log;\n-import org.apache.commons.logging.LogFactory;\n-import org.hibernate.LazyInitializationException;\n+import com.sun.tools.rngom.parse.host.Base;\n+import org.hibernate.Hibernate;\n import org.hibernate.Session;\n-import org.hibernate.SessionFactory;\n-import org.hibernate.engine.spi.SessionFactoryImplementor;\n+import org.hibernate.event.spi.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bacb109b521fd07a6eb384a77677fc0d8b54f76d"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDc4MTYyNQ==", "bodyText": "I would move \"down\" these two methods (createAuditEntry) to the sub-classes (PostInsertAuditListener and PostUpdateAuditListener)", "url": "https://github.com/dhis2/dhis2-core/pull/6333#discussion_r500781625", "createdAt": "2020-10-07T07:03:49Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-support/dhis-support-artemis/src/main/java/org/hisp/dhis/artemis/audit/listener/AbstractHibernateListener.java", "diffHunk": "@@ -102,63 +109,126 @@ public String getCreatedBy()\n     abstract AuditType getAuditType();\n \n     /**\n-     * Try to initialize all lazy loaded collections of the given Entity before sending\n-     * it to {@link AuditObjectFactory} for serializing to JSON\n-     * @param factory {@link SessionFactoryImplementor}\n-     * @param entity current Entity\n-     * @return the Entity with all collections loaded\n+     * Create Audit entry for update event\n      */\n-    protected Object initHibernateProxy( SessionFactoryImplementor factory, Object entity )\n+    protected Object createAuditEntry( PostUpdateEvent postUpdateEvent )\n     {\n-        Session session = factory.getCurrentSession();\n+        return createAuditEntry( postUpdateEvent.getEntity(), postUpdateEvent.getState(), postUpdateEvent.getSession(), postUpdateEvent.getId(), postUpdateEvent.getPersister() );\n+    }\n+\n+    /**\n+     * Create Audit entry for insert event\n+     */\n+    protected Object createAuditEntry( PostInsertEvent postInsertEvent )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bacb109b521fd07a6eb384a77677fc0d8b54f76d"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDc4MjcxMw==", "bodyText": "Please fix unused comments, no star import", "url": "https://github.com/dhis2/dhis2-core/pull/6333#discussion_r500782713", "createdAt": "2020-10-07T07:06:05Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-support/dhis-support-artemis/src/main/java/org/hisp/dhis/artemis/audit/listener/PostDeleteAuditListener.java", "diffHunk": "@@ -28,20 +28,32 @@\n  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n  */\n \n+import lombok.SneakyThrows;\n import lombok.extern.slf4j.Slf4j;\n-import org.hibernate.SessionFactory;\n+import org.hibernate.Hibernate;\n+import org.hibernate.collection.spi.PersistentCollection;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bacb109b521fd07a6eb384a77677fc0d8b54f76d"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDc4MjgxOA==", "bodyText": "Please fix unused comments, no star import", "url": "https://github.com/dhis2/dhis2-core/pull/6333#discussion_r500782818", "createdAt": "2020-10-07T07:06:17Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-support/dhis-support-artemis/src/main/java/org/hisp/dhis/artemis/audit/listener/PostInsertAuditListener.java", "diffHunk": "@@ -28,20 +28,32 @@\n  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n  */\n \n+import lombok.SneakyThrows;\n import lombok.extern.slf4j.Slf4j;\n-import org.hibernate.SessionFactory;\n+import org.hibernate.Hibernate;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bacb109b521fd07a6eb384a77677fc0d8b54f76d"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDc4MzM3MQ==", "bodyText": "Please fix unused comments, no star import", "url": "https://github.com/dhis2/dhis2-core/pull/6333#discussion_r500783371", "createdAt": "2020-10-07T07:07:36Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-support/dhis-support-artemis/src/main/java/org/hisp/dhis/artemis/audit/listener/PostUpdateAuditListener.java", "diffHunk": "@@ -29,19 +29,29 @@\n  */\n \n import lombok.extern.slf4j.Slf4j;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bacb109b521fd07a6eb384a77677fc0d8b54f76d"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDc4MzYxMA==", "bodyText": "Please fix unused comments", "url": "https://github.com/dhis2/dhis2-core/pull/6333#discussion_r500783610", "createdAt": "2020-10-07T07:08:07Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-support/dhis-support-commons/src/main/java/org/hisp/dhis/commons/config/JacksonObjectMapperConfig.java", "diffHunk": "@@ -28,6 +28,17 @@\n  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n  */\n \n+import java.util.Date;\n+\n+import org.hibernate.SessionFactory;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bacb109b521fd07a6eb384a77677fc0d8b54f76d"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNjA2OTcy", "url": "https://github.com/dhis2/dhis2-core/pull/6333#pullrequestreview-503606972", "createdAt": "2020-10-07T07:45:47Z", "commit": {"oid": "bacb109b521fd07a6eb384a77677fc0d8b54f76d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9c304a32b6a3ee5400952ef394faddc248f5dd9", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/c9c304a32b6a3ee5400952ef394faddc248f5dd9", "committedDate": "2020-10-07T09:31:48Z", "message": "clean up codes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df644666b4f408f541f6e8d368e7d230e1cf8d3b", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/df644666b4f408f541f6e8d368e7d230e1cf8d3b", "committedDate": "2020-10-08T05:55:38Z", "message": "clean up code and add test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c112bb8979c741078ca660592a397754247bdf82", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/c112bb8979c741078ca660592a397754247bdf82", "committedDate": "2020-10-07T15:26:20Z", "message": "clean up code and add test"}, "afterCommit": {"oid": "df644666b4f408f541f6e8d368e7d230e1cf8d3b", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/df644666b4f408f541f6e8d368e7d230e1cf8d3b", "committedDate": "2020-10-08T05:55:38Z", "message": "clean up code and add test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd171e3cd1996d564413fac09d815b0c5beaaabf", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/cd171e3cd1996d564413fac09d815b0c5beaaabf", "committedDate": "2020-10-08T06:28:52Z", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-9467-36-0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bfc899916dca27ae66c7cb7f3b970fbbc913fd0", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/5bfc899916dca27ae66c7cb7f3b970fbbc913fd0", "committedDate": "2020-10-08T17:07:37Z", "message": "fix: eventDataValue is blank for audit entry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fab058400118c6d96a781b68ae4aaf1d89183041", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/fab058400118c6d96a781b68ae4aaf1d89183041", "committedDate": "2020-11-02T14:02:57Z", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-9467-36-0"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMzM0ODU0", "url": "https://github.com/dhis2/dhis2-core/pull/6333#pullrequestreview-522334854", "createdAt": "2020-11-03T09:54:41Z", "commit": {"oid": "fab058400118c6d96a781b68ae4aaf1d89183041"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32f1c6eade7ba2d71899eb0ef5f12d709d27cdb4", "author": {"user": {"login": "vietnguyen", "name": "Viet Nguyen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/32f1c6eade7ba2d71899eb0ef5f12d709d27cdb4", "committedDate": "2020-11-04T10:25:02Z", "message": "add license"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMjgyMDY5", "url": "https://github.com/dhis2/dhis2-core/pull/6333#pullrequestreview-523282069", "createdAt": "2020-11-04T11:39:39Z", "commit": {"oid": "32f1c6eade7ba2d71899eb0ef5f12d709d27cdb4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2354, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}