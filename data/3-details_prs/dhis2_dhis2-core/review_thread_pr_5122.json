{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5ODk0MDk0", "number": 5122, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNToxMzoxMVrODow2xQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNToxMzoxMVrODow2xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MDcwMDg1OnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-support/dhis-support-db-migration/src/main/resources/org/hisp/dhis/db/migration/2.31/V2_31_23_Upgrade_sequential_nuber_counter_key.sql", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNToxMzoxMVrOF3gx3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNjowMzo1MVrOF3jHhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc1MzA1NQ==", "bodyText": "Hey, is there also more advanced patterns that we need to support, where SEQUENTIAL() is only part of the pattern?", "url": "https://github.com/dhis2/dhis2-core/pull/5122#discussion_r393753055", "createdAt": "2020-03-17T15:13:11Z", "author": {"login": "Bekkalizer"}, "path": "dhis-2/dhis-support/dhis-support-db-migration/src/main/resources/org/hisp/dhis/db/migration/2.31/V2_31_23_Upgrade_sequential_nuber_counter_key.sql", "diffHunk": "@@ -0,0 +1 @@\n+UPDATE sequentialnumbercounter SET key = substring(key, 12, (length(key)-12)) WHERE key LIKE 'SEQUENTIAL(%)';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f58ba56cb5070b2fa926f9d405a406ef600109de"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc5MTM2Nw==", "bodyText": "So, had a call with Stian. We figured out that the above fix os OK. An example pattern of BETA-SEQUENTIAL(###) would be stored differently in 2.30, 2.31, 2.32 and beyond.\nFor 2.30, the sequential part of a pattern is always stored as SEQUENTIAL(###) in the counter table.\nFor 2.31, the sequential part of a pattern is always stored as ### in the counter table.\nFor 2.32 and beyond, the entire pattern is stored in the counter table: BETA-###\nThis PR only takes care of upgrades between 2.30 and 2.31. We will make another PR for upgrades to 2.32 and beyond.", "url": "https://github.com/dhis2/dhis2-core/pull/5122#discussion_r393791367", "createdAt": "2020-03-17T16:03:51Z", "author": {"login": "Bekkalizer"}, "path": "dhis-2/dhis-support/dhis-support-db-migration/src/main/resources/org/hisp/dhis/db/migration/2.31/V2_31_23_Upgrade_sequential_nuber_counter_key.sql", "diffHunk": "@@ -0,0 +1 @@\n+UPDATE sequentialnumbercounter SET key = substring(key, 12, (length(key)-12)) WHERE key LIKE 'SEQUENTIAL(%)';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc1MzA1NQ=="}, "originalCommit": {"oid": "f58ba56cb5070b2fa926f9d405a406ef600109de"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3510, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}