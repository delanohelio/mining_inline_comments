{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5MjkxNjEy", "number": 5948, "title": "feat: disallow user field expansion for metadata", "bodyText": "Adds in new user property transformer for BaseIdentifiableObject.user (disallows expansion)\nDoes not work for collections (i.e. UserGroup.members)\n\nDHIS2-8750", "createdAt": "2020-08-18T08:24:46Z", "url": "https://github.com/dhis2/dhis2-core/pull/5948", "merged": true, "mergeCommit": {"oid": "b5de39c526eaaef7a2dc79ad7bb05bc70945f3e5"}, "closed": true, "closedAt": "2020-08-26T07:49:45Z", "author": {"login": "mortenoh"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdACrFHAH2gAyNDY5MjkxNjEyOjMwNmQ3ODlkYTUyYzg0YWQ0Nzg0M2M3ZDZiNDlmZGY0ZGQ2OTQ1Zjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCm5eJgFqTQ3NTIzMjEwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "306d789da52c84ad47843c7d6b49fdf4dd6945f7", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/306d789da52c84ad47843c7d6b49fdf4dd6945f7", "committedDate": "2020-08-18T08:24:06Z", "message": "fix: don't expose uuid in json/xml for now"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cc5d4c41b7f27e9dba46c18cdb299a3dfa3fe10", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/6cc5d4c41b7f27e9dba46c18cdb299a3dfa3fe10", "committedDate": "2020-08-18T08:26:56Z", "message": "fix: switch from uuid => uid for UserDto, adds code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f657d88eada77de6013d6632a60f6da9a85e9cb6", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/f657d88eada77de6013d6632a60f6da9a85e9cb6", "committedDate": "2020-08-18T08:43:04Z", "message": "fix: check for uid instead of uuid in tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "830605d9c2856dab5d6aff0c7183b4ec82ac031a", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/830605d9c2856dab5d6aff0c7183b4ec82ac031a", "committedDate": "2020-08-18T08:53:08Z", "message": "test: check for uid"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "016ef7a7662eb20b3db515358291de3eab5fcbbe", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/016ef7a7662eb20b3db515358291de3eab5fcbbe", "committedDate": "2020-08-18T08:56:06Z", "message": "fix: use stable uuid for admin user"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eaab38f29a6a6ddf8eb985ca9b61d66269397efc", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/eaab38f29a6a6ddf8eb985ca9b61d66269397efc", "committedDate": "2020-08-18T10:13:54Z", "message": "feat: wip support collections and UserPropertyTransformer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e79dd9b781ad199a97d23777871867780de88a11", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/e79dd9b781ad199a97d23777871867780de88a11", "committedDate": "2020-08-18T13:25:51Z", "message": "fix: npe check for user serialize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c307a693dd40ee19a9e5cc4c47b6f50f8c990e4", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/7c307a693dd40ee19a9e5cc4c47b6f50f8c990e4", "committedDate": "2020-08-18T14:27:11Z", "message": "fix: update tracker validation test uids to be valid"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "542ce522b516f7df81a0604ba33c6ceae9374fab", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/542ce522b516f7df81a0604ba33c6ceae9374fab", "committedDate": "2020-08-19T07:07:44Z", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-8750"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d422bf5b14176e167477dc026cd9d5fae6f54c36", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/d422bf5b14176e167477dc026cd9d5fae6f54c36", "committedDate": "2020-08-19T15:31:17Z", "message": "test: property transformer collection tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "870eede3cbd1a2a87cc7d0c44d1e16872dc8b4f9", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/870eede3cbd1a2a87cc7d0c44d1e16872dc8b4f9", "committedDate": "2020-08-19T15:31:31Z", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-8750"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd14c720a91fe4c54ee8a4081038845a2f13f401", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/dd14c720a91fe4c54ee8a4081038845a2f13f401", "committedDate": "2020-08-20T07:50:39Z", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-8750"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f0e32f3ca19cc078d792e985ed50b5ba96b05b4", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/3f0e32f3ca19cc078d792e985ed50b5ba96b05b4", "committedDate": "2020-08-21T15:08:42Z", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-8750"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19a636d4d8416a84ce93e21a1c9355eddd95e063", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/19a636d4d8416a84ce93e21a1c9355eddd95e063", "committedDate": "2020-08-24T07:41:19Z", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-8750"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9579fb5a66b92b58727b921b2054153438319ab3", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/9579fb5a66b92b58727b921b2054153438319ab3", "committedDate": "2020-08-24T14:54:01Z", "message": "test: transform collection tests, including hack to make it kinda of work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4681f41276dc3979d2de556627896f97edaea58e", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/4681f41276dc3979d2de556627896f97edaea58e", "committedDate": "2020-08-25T06:53:31Z", "message": "fix: remove hack for transformed collections"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0a1a32fb809efac1e3a69f642970e416a91cb7b", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/c0a1a32fb809efac1e3a69f642970e416a91cb7b", "committedDate": "2020-08-25T06:58:07Z", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-8750"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffe8b534c676e99da0fc9ac4bdb62273e1a60352", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/ffe8b534c676e99da0fc9ac4bdb62273e1a60352", "committedDate": "2020-08-25T08:56:22Z", "message": "fix: remove collection transformer test for now"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NzE3NDI5", "url": "https://github.com/dhis2/dhis2-core/pull/5948#pullrequestreview-474717429", "createdAt": "2020-08-25T17:49:02Z", "commit": {"oid": "ffe8b534c676e99da0fc9ac4bdb62273e1a60352"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNzo0OTowMlrOHGjQjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNzo0OTo1NFrOHGjSrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYzMTE4MA==", "bodyText": "commented line", "url": "https://github.com/dhis2/dhis2-core/pull/5948#discussion_r476631180", "createdAt": "2020-08-25T17:49:02Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-api/src/test/java/org/hisp/dhis/schema/transformer/UserPropertyTransformerTest.java", "diffHunk": "@@ -59,7 +59,8 @@ public void testUserTransform()\n         UserPropertyTransformer transformer = new UserPropertyTransformer();\n         UserPropertyTransformer.UserDto userDto = (UserPropertyTransformer.UserDto) transformer.transform( user );\n \n-        assertEquals( uuid.toString(), userDto.getId() );\n+        // assertEquals( uuid.toString(), userDto.getId() );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffe8b534c676e99da0fc9ac4bdb62273e1a60352"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYzMTcyNA==", "bodyText": "commented out code", "url": "https://github.com/dhis2/dhis2-core/pull/5948#discussion_r476631724", "createdAt": "2020-08-25T17:49:54Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-services/dhis-service-core/src/test/java/org/hisp/dhis/schema/transformers/UserPropertyTransformerTest.java", "diffHunk": "@@ -118,13 +136,53 @@ public void testJsonSerializer() throws JsonProcessingException\n \n         assertEquals( \"usernamea\", simple.getUser().getUserCredentials().getUsername() );\n         assertEquals( uuid, simple.getUser().getUserCredentials().getUuid() );\n+\n+        assertNotNull( simple.getUsers() );\n+        assertEquals( 4, simple.getUsers().size() );\n+\n+        /*\n+        FieldFilterParams params = new FieldFilterParams(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffe8b534c676e99da0fc9ac4bdb62273e1a60352"}, "originalPosition": 64}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11d924992dfab1f7e9a2b06b328064bb0a1eda03", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/11d924992dfab1f7e9a2b06b328064bb0a1eda03", "committedDate": "2020-08-26T07:11:06Z", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-8750"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MjMyMTA0", "url": "https://github.com/dhis2/dhis2-core/pull/5948#pullrequestreview-475232104", "createdAt": "2020-08-26T07:44:15Z", "commit": {"oid": "11d924992dfab1f7e9a2b06b328064bb0a1eda03"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2520, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}