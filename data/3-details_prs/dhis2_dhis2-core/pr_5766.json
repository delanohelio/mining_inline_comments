{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3ODI1ODE4", "number": 5766, "title": "feat: adds uuid to userCredentials and userGroups", "bodyText": "introduces gen_random_uuid() sql function for generating v4 uuids\nadds uuid column to users and usergroup tables\nadds uuid property to UserCredentials and UserGroup classes\n\nJIRA issue can be found here DHIS2-9042.", "createdAt": "2020-06-22T09:59:06Z", "url": "https://github.com/dhis2/dhis2-core/pull/5766", "merged": true, "mergeCommit": {"oid": "78dab199974f3eb5719e10994e502e7b08a7bfce"}, "closed": true, "closedAt": "2020-06-23T12:40:18Z", "author": {"login": "mortenoh"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABctt1nhAH2gAyNDM3ODI1ODE4OjI4ZjEzNWU4NjdmOGY4NGZkNDE4NGM1NjY2MDRiYzkzY2ZiYjZlNzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuDWIMgFqTQzNTY3MTA5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "28f135e867f8f84fd4184c566604bc93cfbb6e72", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/28f135e867f8f84fd4184c566604bc93cfbb6e72", "committedDate": "2020-06-22T09:56:58Z", "message": "feat: adds uuid to userCredentials/userGroups (and flyway migration script)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cf2cb235570ee8c82354931b27e6d398bb33a0b", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/7cf2cb235570ee8c82354931b27e6d398bb33a0b", "committedDate": "2020-06-22T10:05:32Z", "message": "fix: change flyway migration versions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0ODAxODA0", "url": "https://github.com/dhis2/dhis2-core/pull/5766#pullrequestreview-434801804", "createdAt": "2020-06-22T10:35:26Z", "commit": {"oid": "7cf2cb235570ee8c82354931b27e6d398bb33a0b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxMDozNToyN1rOGm7HcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxMDozNToyN1rOGm7HcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQ2NzYzMw==", "bodyText": "Check if we potentially could map to PostgreSQL uuid data type.", "url": "https://github.com/dhis2/dhis2-core/pull/5766#discussion_r443467633", "createdAt": "2020-06-22T10:35:27Z", "author": {"login": "larshelge"}, "path": "dhis-2/dhis-support/dhis-support-db-migration/src/main/resources/org/hisp/dhis/db/migration/2.35/V2_35_7__Add_Uuid_User_Columns.sql", "diffHunk": "@@ -0,0 +1,7 @@\n+\n+\n+ALTER TABLE users ADD COLUMN IF NOT EXISTS \"uuid\" VARCHAR(36);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cf2cb235570ee8c82354931b27e6d398bb33a0b"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59541e8c3c0cd2ddae3c6cdd91cdf31d27ddce3d", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/59541e8c3c0cd2ddae3c6cdd91cdf31d27ddce3d", "committedDate": "2020-06-22T11:13:02Z", "message": "fix: switch to using uuid field type in postgres, uses pg-uuid hibernate type for pg mapping"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd56f9603e76d550062ed53da2a91ac2f0350804", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/fd56f9603e76d550062ed53da2a91ac2f0350804", "committedDate": "2020-06-22T12:14:27Z", "message": "fix: H2 dialect fixes to allow for pg-uuid/uuid type"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0ODc3NTQw", "url": "https://github.com/dhis2/dhis2-core/pull/5766#pullrequestreview-434877540", "createdAt": "2020-06-22T12:33:16Z", "commit": {"oid": "fd56f9603e76d550062ed53da2a91ac2f0350804"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1NDkxMjgy", "url": "https://github.com/dhis2/dhis2-core/pull/5766#pullrequestreview-435491282", "createdAt": "2020-06-23T06:56:26Z", "commit": {"oid": "fd56f9603e76d550062ed53da2a91ac2f0350804"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwNjo1NjoyN1rOGnbskg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwNjo1NjoyN1rOGnbskg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDAwMTQyNg==", "bodyText": "I'm not 100% sure I understand all parts of this function.\nDo you have any links/urls to where you found it or if you made it yourself may write some comments to what is going on.\nA test for its uniqueness properties would also be nice.", "url": "https://github.com/dhis2/dhis2-core/pull/5766#discussion_r444001426", "createdAt": "2020-06-23T06:56:27Z", "author": {"login": "netroms"}, "path": "dhis-2/dhis-support/dhis-support-db-migration/src/main/resources/org/hisp/dhis/db/migration/2.35/V2_35_6__Add_Uuid_Generator.sql", "diffHunk": "@@ -0,0 +1,12 @@\n+\n+\n+CREATE OR REPLACE FUNCTION gen_random_uuid() RETURNS uuid\n+    AS $$\n+        SELECT uuid_in(\n+            overlay(\n+                overlay(md5(random()::text || ':' || clock_timestamp()::text) placing '4' from 13)\n+                placing to_hex(floor(random()*(11-8+1) + 8)::int)::text from 17\n+            )::cstring\n+        )::uuid\n+    $$\n+    LANGUAGE SQL;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd56f9603e76d550062ed53da2a91ac2f0350804"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef09185b59f2c2e2977bab7ac6a923d3d96d02b6", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/ef09185b59f2c2e2977bab7ac6a923d3d96d02b6", "committedDate": "2020-06-23T10:38:17Z", "message": "fix: simplified sql uuid random generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57f01e68249e28ff8b1cc0351644ff4d891c2fa0", "author": {"user": {"login": "mortenoh", "name": "Morten Hansen"}}, "url": "https://github.com/dhis2/dhis2-core/commit/57f01e68249e28ff8b1cc0351644ff4d891c2fa0", "committedDate": "2020-06-23T10:38:44Z", "message": "chore: remove commented out old random generator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1NjcxMDk2", "url": "https://github.com/dhis2/dhis2-core/pull/5766#pullrequestreview-435671096", "createdAt": "2020-06-23T11:00:29Z", "commit": {"oid": "57f01e68249e28ff8b1cc0351644ff4d891c2fa0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2662, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}