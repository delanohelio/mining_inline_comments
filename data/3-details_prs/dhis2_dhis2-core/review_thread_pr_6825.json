{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyMDk5NzM5", "number": 6825, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwODo0NjoyNFrOFCzYVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNjozNzozMVrOFDBWYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4NDgzMjg2OnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/sms/config/BulkSmsHttpGateway.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwODo0NjoyNFrOICI-TA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwODo0NjoyNFrOICI-TA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTExNTA4NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        pbeStringEncryptor.decrypt( bulkSmsGatewayConfig.getPassword().trim());\n          \n          \n            \n                        pbeStringEncryptor.decrypt( bulkSmsGatewayConfig.getPassword().trim() );", "url": "https://github.com/dhis2/dhis2-core/pull/6825#discussion_r539115084", "createdAt": "2020-12-09T08:46:24Z", "author": {"login": "stian-sandvold"}, "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/sms/config/BulkSmsHttpGateway.java", "diffHunk": "@@ -87,7 +96,8 @@ public OutboundMessageResponse send( String subject, String text, Set<String> re\n \n     private HttpHeaders getRequestHeaderParameters( BulkSmsGatewayConfig bulkSmsGatewayConfig )\n     {\n-        String credentials = bulkSmsGatewayConfig.getUsername().trim() + \":\" + bulkSmsGatewayConfig.getPassword().trim();\n+        String credentials = bulkSmsGatewayConfig.getUsername().trim() + \":\" +\n+            pbeStringEncryptor.decrypt( bulkSmsGatewayConfig.getPassword().trim());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed2e401ff04b539a4a321754fda923c5ef4cfb62"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4NDgzNzUzOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/sms/config/SimplisticHttpGetGateWay.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwODo0NzoyM1rOICJA8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNTo0OToyNlrOIC2noQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTExNTc2MQ==", "bodyText": "closing bracket on wrong line :)", "url": "https://github.com/dhis2/dhis2-core/pull/6825#discussion_r539115761", "createdAt": "2020-12-09T08:47:23Z", "author": {"login": "stian-sandvold"}, "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/sms/config/SimplisticHttpGetGateWay.java", "diffHunk": "@@ -184,8 +193,8 @@ public OutboundMessageResponse send( String subject, String text, Set<String> re\n         {\n             if ( !parameter.isHeader() )\n             {\n-                valueStore.put( parameter.getKey(), parameter.getValue() );\n-            }\n+                valueStore.put( parameter.getKey(), parameter.isConfidential() ?\n+                    pbeStringEncryptor.decrypt( parameter.getValue() ) : parameter.getValue() );            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed2e401ff04b539a4a321754fda923c5ef4cfb62"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTg2Mjk0NQ==", "bodyText": "resolved", "url": "https://github.com/dhis2/dhis2-core/pull/6825#discussion_r539862945", "createdAt": "2020-12-10T05:49:26Z", "author": {"login": "zubaira"}, "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/sms/config/SimplisticHttpGetGateWay.java", "diffHunk": "@@ -184,8 +193,8 @@ public OutboundMessageResponse send( String subject, String text, Set<String> re\n         {\n             if ( !parameter.isHeader() )\n             {\n-                valueStore.put( parameter.getKey(), parameter.getValue() );\n-            }\n+                valueStore.put( parameter.getKey(), parameter.isConfidential() ?\n+                    pbeStringEncryptor.decrypt( parameter.getValue() ) : parameter.getValue() );            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTExNTc2MQ=="}, "originalCommit": {"oid": "ed2e401ff04b539a4a321754fda923c5ef4cfb62"}, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4NzEwMzIzOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/sms/config/GenericGatewayParameter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNjozNDoyM1rOICd_Zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNTo0OTo1MFrOIC2oRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ1OTQzMQ==", "bodyText": "Can't we just annotate this class with:\n@EqualsAndHashCode(of = {\"key\",\"value\", \"confidential\", \"encode\", \"header\"})\n?", "url": "https://github.com/dhis2/dhis2-core/pull/6825#discussion_r539459431", "createdAt": "2020-12-09T16:34:23Z", "author": {"login": "gnespolino"}, "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/sms/config/GenericGatewayParameter.java", "diffHunk": "@@ -106,4 +107,30 @@ public void setEncode( boolean encode )\n     {\n         this.encode = encode;\n     }\n+\n+    @Override\n+    public boolean equals( Object o )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed2e401ff04b539a4a321754fda923c5ef4cfb62"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTg2MzExMA==", "bodyText": "resolved", "url": "https://github.com/dhis2/dhis2-core/pull/6825#discussion_r539863110", "createdAt": "2020-12-10T05:49:50Z", "author": {"login": "zubaira"}, "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/sms/config/GenericGatewayParameter.java", "diffHunk": "@@ -106,4 +107,30 @@ public void setEncode( boolean encode )\n     {\n         this.encode = encode;\n     }\n+\n+    @Override\n+    public boolean equals( Object o )", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ1OTQzMQ=="}, "originalCommit": {"oid": "ed2e401ff04b539a4a321754fda923c5ef4cfb62"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4NzExODkyOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/sms/config/BulkSmsHttpGateway.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNjozNzowNlrOICeIXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNTo0OTo1N1rOIC2obg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ2MTcyNw==", "bodyText": "@RequiredArgsConstructor\nwith\n@Qualifier( \"tripleDesStringEncryptor\" )\nprivate final PBEStringEncryptor pbeStringEncryptor;", "url": "https://github.com/dhis2/dhis2-core/pull/6825#discussion_r539461727", "createdAt": "2020-12-09T16:37:06Z", "author": {"login": "gnespolino"}, "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/sms/config/BulkSmsHttpGateway.java", "diffHunk": "@@ -50,6 +52,13 @@\n public class BulkSmsHttpGateway", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed2e401ff04b539a4a321754fda923c5ef4cfb62"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTg2MzE1MA==", "bodyText": "resolved", "url": "https://github.com/dhis2/dhis2-core/pull/6825#discussion_r539863150", "createdAt": "2020-12-10T05:49:57Z", "author": {"login": "zubaira"}, "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/sms/config/BulkSmsHttpGateway.java", "diffHunk": "@@ -50,6 +52,13 @@\n public class BulkSmsHttpGateway", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ2MTcyNw=="}, "originalCommit": {"oid": "ed2e401ff04b539a4a321754fda923c5ef4cfb62"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4NzEyMTYzOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/sms/config/ClickatellHttpGateway.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNjozNzozMVrOICeJ2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNjozNzozMVrOICeJ2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ2MjEwNQ==", "bodyText": "same as BulkSmsHttpGateway", "url": "https://github.com/dhis2/dhis2-core/pull/6825#discussion_r539462105", "createdAt": "2020-12-09T16:37:31Z", "author": {"login": "gnespolino"}, "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/sms/config/ClickatellHttpGateway.java", "diffHunk": "@@ -50,6 +52,13 @@\n public class ClickatellHttpGateway", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed2e401ff04b539a4a321754fda923c5ef4cfb62"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3717, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}