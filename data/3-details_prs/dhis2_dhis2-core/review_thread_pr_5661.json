{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3MzIxNDA0", "number": 5661, "reviewThreads": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMzoxMToxNFrOEGV8Tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMTozOTozNFrOEcBzfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MDg2NDE0OnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/feedback/ErrorCode.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMzoxMToxNFrOGlFAgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNToxNzo1N1rOGlKzpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzMjU0Ng==", "bodyText": "Remove \"the\", just \"parse filter\".", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r441532546", "createdAt": "2020-06-17T13:11:14Z", "author": {"login": "larshelge"}, "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/feedback/ErrorCode.java", "diffHunk": "@@ -59,6 +59,9 @@\n     E2011( \"User is not allowed to read data for attribute option combo: `{0}`\" ),\n     E2012( \"User is not allowed to view org unit: `{0}`\" ),\n     E2013( \"At least one data set must be specified\" ),\n+    E2014( \"Unable to parse the filter `{0}`\" ),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45215afd7914560729f7fe6e2a5a36745e944b7d"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTYyNzU1OA==", "bodyText": "Done", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r441627558", "createdAt": "2020-06-17T15:17:57Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/feedback/ErrorCode.java", "diffHunk": "@@ -59,6 +59,9 @@\n     E2011( \"User is not allowed to read data for attribute option combo: `{0}`\" ),\n     E2012( \"User is not allowed to view org unit: `{0}`\" ),\n     E2013( \"At least one data set must be specified\" ),\n+    E2014( \"Unable to parse the filter `{0}`\" ),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzMjU0Ng=="}, "originalCommit": {"oid": "45215afd7914560729f7fe6e2a5a36745e944b7d"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MDg2NDcwOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/feedback/ErrorCode.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMzoxMToyNVrOGlFA7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNToxODowMVrOGlKz0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzMjY1Mw==", "bodyText": "Remove \"the\", just \"parse order param\".", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r441532653", "createdAt": "2020-06-17T13:11:25Z", "author": {"login": "larshelge"}, "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/feedback/ErrorCode.java", "diffHunk": "@@ -59,6 +59,9 @@\n     E2011( \"User is not allowed to read data for attribute option combo: `{0}`\" ),\n     E2012( \"User is not allowed to view org unit: `{0}`\" ),\n     E2013( \"At least one data set must be specified\" ),\n+    E2014( \"Unable to parse the filter `{0}`\" ),\n+    E2015( \"Unable to parse the order param: `{0}`\" ),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45215afd7914560729f7fe6e2a5a36745e944b7d"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTYyNzYwMg==", "bodyText": "Done", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r441627602", "createdAt": "2020-06-17T15:18:01Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/feedback/ErrorCode.java", "diffHunk": "@@ -59,6 +59,9 @@\n     E2011( \"User is not allowed to read data for attribute option combo: `{0}`\" ),\n     E2012( \"User is not allowed to view org unit: `{0}`\" ),\n     E2013( \"At least one data set must be specified\" ),\n+    E2014( \"Unable to parse the filter `{0}`\" ),\n+    E2015( \"Unable to parse the order param: `{0}`\" ),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzMjY1Mw=="}, "originalCommit": {"oid": "45215afd7914560729f7fe6e2a5a36745e944b7d"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MDg2NjIwOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/feedback/ErrorCode.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMzoxMTo0OFrOGlFB4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNToxODowNlrOGlKz_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzMjg5OQ==", "bodyText": "Add a bit more info about what we actually are unable to parse.", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r441532899", "createdAt": "2020-06-17T13:11:48Z", "author": {"login": "larshelge"}, "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/feedback/ErrorCode.java", "diffHunk": "@@ -59,6 +59,9 @@\n     E2011( \"User is not allowed to read data for attribute option combo: `{0}`\" ),\n     E2012( \"User is not allowed to view org unit: `{0}`\" ),\n     E2013( \"At least one data set must be specified\" ),\n+    E2014( \"Unable to parse the filter `{0}`\" ),\n+    E2015( \"Unable to parse the order param: `{0}`\" ),\n+    E2016( \"Unable to parse `{0}`. The values available are: {1}\" ),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45215afd7914560729f7fe6e2a5a36745e944b7d"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTYyNzY0NA==", "bodyText": "Done", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r441627644", "createdAt": "2020-06-17T15:18:06Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/feedback/ErrorCode.java", "diffHunk": "@@ -59,6 +59,9 @@\n     E2011( \"User is not allowed to read data for attribute option combo: `{0}`\" ),\n     E2012( \"User is not allowed to view org unit: `{0}`\" ),\n     E2013( \"At least one data set must be specified\" ),\n+    E2014( \"Unable to parse the filter `{0}`\" ),\n+    E2015( \"Unable to parse the order param: `{0}`\" ),\n+    E2016( \"Unable to parse `{0}`. The values available are: {1}\" ),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzMjg5OQ=="}, "originalCommit": {"oid": "45215afd7914560729f7fe6e2a5a36745e944b7d"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MDg2NzQ3OnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/DataItemQueryController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMzoxMjoxMlrOGlFCzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNToxODoxMFrOGlK0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzMzEzNQ==", "bodyText": "Add \"public\" modifier.", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r441533135", "createdAt": "2020-06-17T13:12:12Z", "author": {"login": "larshelge"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/DataItemQueryController.java", "diffHunk": "@@ -0,0 +1,200 @@\n+package org.hisp.dhis.webapi.controller.dataitem;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.Lists.newArrayList;\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.hisp.dhis.common.DhisApiVersion.ALL;\n+import static org.hisp.dhis.common.DhisApiVersion.DEFAULT;\n+import static org.hisp.dhis.feedback.ErrorCode.E3012;\n+import static org.hisp.dhis.node.NodeUtils.createMetadata;\n+import static org.springframework.http.HttpStatus.FOUND;\n+import static org.springframework.http.HttpStatus.NOT_FOUND;\n+import static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n+import static org.springframework.http.MediaType.APPLICATION_XML_VALUE;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+import org.hisp.dhis.node.Preset;\n+import org.hisp.dhis.node.types.RootNode;\n+import org.hisp.dhis.query.QueryParserException;\n+import org.hisp.dhis.security.acl.AclService;\n+import org.hisp.dhis.user.User;\n+import org.hisp.dhis.webapi.mvc.annotation.ApiVersion;\n+import org.hisp.dhis.webapi.service.ContextService;\n+import org.hisp.dhis.webapi.webdomain.WebOptions;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.RequestParam;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import lombok.extern.slf4j.Slf4j;\n+\n+/**\n+ * This class is responsible for providing methods responsible for retrieving\n+ * dimensional items based on the provided URL params and filters.\n+ *\n+ * It should expose only query methods.\n+ */\n+@Slf4j\n+@ApiVersion( { DEFAULT, ALL } )\n+@RestController\n+class DataItemQueryController", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45215afd7914560729f7fe6e2a5a36745e944b7d"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTYyNzcwMQ==", "bodyText": "Done", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r441627701", "createdAt": "2020-06-17T15:18:10Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/DataItemQueryController.java", "diffHunk": "@@ -0,0 +1,200 @@\n+package org.hisp.dhis.webapi.controller.dataitem;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.Lists.newArrayList;\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.hisp.dhis.common.DhisApiVersion.ALL;\n+import static org.hisp.dhis.common.DhisApiVersion.DEFAULT;\n+import static org.hisp.dhis.feedback.ErrorCode.E3012;\n+import static org.hisp.dhis.node.NodeUtils.createMetadata;\n+import static org.springframework.http.HttpStatus.FOUND;\n+import static org.springframework.http.HttpStatus.NOT_FOUND;\n+import static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n+import static org.springframework.http.MediaType.APPLICATION_XML_VALUE;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+import org.hisp.dhis.node.Preset;\n+import org.hisp.dhis.node.types.RootNode;\n+import org.hisp.dhis.query.QueryParserException;\n+import org.hisp.dhis.security.acl.AclService;\n+import org.hisp.dhis.user.User;\n+import org.hisp.dhis.webapi.mvc.annotation.ApiVersion;\n+import org.hisp.dhis.webapi.service.ContextService;\n+import org.hisp.dhis.webapi.webdomain.WebOptions;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.RequestParam;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import lombok.extern.slf4j.Slf4j;\n+\n+/**\n+ * This class is responsible for providing methods responsible for retrieving\n+ * dimensional items based on the provided URL params and filters.\n+ *\n+ * It should expose only query methods.\n+ */\n+@Slf4j\n+@ApiVersion( { DEFAULT, ALL } )\n+@RestController\n+class DataItemQueryController", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzMzEzNQ=="}, "originalCommit": {"oid": "45215afd7914560729f7fe6e2a5a36745e944b7d"}, "originalPosition": 76}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MTY3MjMyOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/DataItemQueryController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNjoxMzo1OFrOGlNFUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMjoxMToyMFrOGlscKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY2NDg1MA==", "bodyText": "Commnted out code", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r441664850", "createdAt": "2020-06-17T16:13:58Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/DataItemQueryController.java", "diffHunk": "@@ -0,0 +1,200 @@\n+package org.hisp.dhis.webapi.controller.dataitem;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.Lists.newArrayList;\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.hisp.dhis.common.DhisApiVersion.ALL;\n+import static org.hisp.dhis.common.DhisApiVersion.DEFAULT;\n+import static org.hisp.dhis.feedback.ErrorCode.E3012;\n+import static org.hisp.dhis.node.NodeUtils.createMetadata;\n+import static org.springframework.http.HttpStatus.FOUND;\n+import static org.springframework.http.HttpStatus.NOT_FOUND;\n+import static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n+import static org.springframework.http.MediaType.APPLICATION_XML_VALUE;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+import org.hisp.dhis.node.Preset;\n+import org.hisp.dhis.node.types.RootNode;\n+import org.hisp.dhis.query.QueryParserException;\n+import org.hisp.dhis.security.acl.AclService;\n+import org.hisp.dhis.user.User;\n+import org.hisp.dhis.webapi.mvc.annotation.ApiVersion;\n+import org.hisp.dhis.webapi.service.ContextService;\n+import org.hisp.dhis.webapi.webdomain.WebOptions;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.RequestParam;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import lombok.extern.slf4j.Slf4j;\n+\n+/**\n+ * This class is responsible for providing methods responsible for retrieving\n+ * dimensional items based on the provided URL params and filters.\n+ *\n+ * It should expose only query methods.\n+ */\n+@Slf4j\n+@ApiVersion( { DEFAULT, ALL } )\n+@RestController\n+public class DataItemQueryController\n+{\n+    static final String API_RESOURCE_PATH = \"/dataItems\";\n+\n+    private static final String FIELDS = \"fields\";\n+\n+    private static final String FILTER = \"filter\";\n+\n+    private final DataItemServiceFacade dataItemServiceFacade;\n+\n+    private final ContextService contextService;\n+\n+    private final ResponseHandler responseHandler;\n+\n+    private final AclService aclService;\n+\n+    public DataItemQueryController( final DataItemServiceFacade dataItemServiceFacade,\n+        final ContextService contextService, final ResponseHandler responseHandler, final AclService aclService )\n+    {\n+        checkNotNull( dataItemServiceFacade );\n+        checkNotNull( contextService );\n+        checkNotNull( responseHandler );\n+        checkNotNull( aclService );\n+\n+        this.dataItemServiceFacade = dataItemServiceFacade;\n+        this.contextService = contextService;\n+        this.responseHandler = responseHandler;\n+        this.aclService = aclService;\n+    }\n+\n+    /**\n+     * Retrieve all data items based in the URL filters and parameters.\n+     *\n+     * @return the list of items found in JSON format\n+     */\n+    @GetMapping( value = API_RESOURCE_PATH, produces = APPLICATION_JSON_VALUE )\n+    public ResponseEntity<RootNode> getJson( @RequestParam\n+    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )\n+        throws QueryParserException\n+    {\n+        log.debug( \"Looking for data items (JSON response)\" );\n+\n+        return getDimensionalItems( currentUser, urlParameters, orderParams );\n+    }\n+\n+    /**\n+     * Retrieve all data items based in the URL filters and parameters.\n+     *\n+     * @return the list of items found in XML format\n+     */\n+    @GetMapping( value = API_RESOURCE_PATH + \".xml\", produces = APPLICATION_XML_VALUE )\n+    public ResponseEntity<RootNode> getXml( @RequestParam\n+    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )\n+    {\n+        log.debug( \"Looking for data items (XML response)\" );\n+\n+        return getDimensionalItems( currentUser, urlParameters, orderParams );\n+    }\n+\n+    /**\n+     * Based on the informed arguments, this method will read the URL and based on\n+     * the give params will retrieve the respective data items.\n+     * \n+     * @param currentUser the logged user\n+     * @param urlParameters the request url params\n+     * @param orderParams the request order params\n+     * @return the complete root node\n+     */\n+    private ResponseEntity<RootNode> getDimensionalItems( final User currentUser,\n+        final Map<String, String> urlParameters,\n+        final OrderParams orderParams )\n+    {\n+        // Defining the input params.\n+        final List<String> fields = newArrayList( contextService.getParameterValues( FIELDS ) );\n+        final List<String> filters = newArrayList( contextService.getParameterValues( FILTER ) );\n+        final WebOptions options = new WebOptions( urlParameters );\n+\n+        // checkPaginationSupport( filters );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "900c01d454f079378a29c8c3bc389cf6dd97ad3d"}, "originalPosition": 153}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE3ODYwMQ==", "bodyText": "Done", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r442178601", "createdAt": "2020-06-18T12:11:20Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/DataItemQueryController.java", "diffHunk": "@@ -0,0 +1,200 @@\n+package org.hisp.dhis.webapi.controller.dataitem;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.Lists.newArrayList;\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.hisp.dhis.common.DhisApiVersion.ALL;\n+import static org.hisp.dhis.common.DhisApiVersion.DEFAULT;\n+import static org.hisp.dhis.feedback.ErrorCode.E3012;\n+import static org.hisp.dhis.node.NodeUtils.createMetadata;\n+import static org.springframework.http.HttpStatus.FOUND;\n+import static org.springframework.http.HttpStatus.NOT_FOUND;\n+import static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n+import static org.springframework.http.MediaType.APPLICATION_XML_VALUE;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+import org.hisp.dhis.node.Preset;\n+import org.hisp.dhis.node.types.RootNode;\n+import org.hisp.dhis.query.QueryParserException;\n+import org.hisp.dhis.security.acl.AclService;\n+import org.hisp.dhis.user.User;\n+import org.hisp.dhis.webapi.mvc.annotation.ApiVersion;\n+import org.hisp.dhis.webapi.service.ContextService;\n+import org.hisp.dhis.webapi.webdomain.WebOptions;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.RequestParam;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import lombok.extern.slf4j.Slf4j;\n+\n+/**\n+ * This class is responsible for providing methods responsible for retrieving\n+ * dimensional items based on the provided URL params and filters.\n+ *\n+ * It should expose only query methods.\n+ */\n+@Slf4j\n+@ApiVersion( { DEFAULT, ALL } )\n+@RestController\n+public class DataItemQueryController\n+{\n+    static final String API_RESOURCE_PATH = \"/dataItems\";\n+\n+    private static final String FIELDS = \"fields\";\n+\n+    private static final String FILTER = \"filter\";\n+\n+    private final DataItemServiceFacade dataItemServiceFacade;\n+\n+    private final ContextService contextService;\n+\n+    private final ResponseHandler responseHandler;\n+\n+    private final AclService aclService;\n+\n+    public DataItemQueryController( final DataItemServiceFacade dataItemServiceFacade,\n+        final ContextService contextService, final ResponseHandler responseHandler, final AclService aclService )\n+    {\n+        checkNotNull( dataItemServiceFacade );\n+        checkNotNull( contextService );\n+        checkNotNull( responseHandler );\n+        checkNotNull( aclService );\n+\n+        this.dataItemServiceFacade = dataItemServiceFacade;\n+        this.contextService = contextService;\n+        this.responseHandler = responseHandler;\n+        this.aclService = aclService;\n+    }\n+\n+    /**\n+     * Retrieve all data items based in the URL filters and parameters.\n+     *\n+     * @return the list of items found in JSON format\n+     */\n+    @GetMapping( value = API_RESOURCE_PATH, produces = APPLICATION_JSON_VALUE )\n+    public ResponseEntity<RootNode> getJson( @RequestParam\n+    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )\n+        throws QueryParserException\n+    {\n+        log.debug( \"Looking for data items (JSON response)\" );\n+\n+        return getDimensionalItems( currentUser, urlParameters, orderParams );\n+    }\n+\n+    /**\n+     * Retrieve all data items based in the URL filters and parameters.\n+     *\n+     * @return the list of items found in XML format\n+     */\n+    @GetMapping( value = API_RESOURCE_PATH + \".xml\", produces = APPLICATION_XML_VALUE )\n+    public ResponseEntity<RootNode> getXml( @RequestParam\n+    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )\n+    {\n+        log.debug( \"Looking for data items (XML response)\" );\n+\n+        return getDimensionalItems( currentUser, urlParameters, orderParams );\n+    }\n+\n+    /**\n+     * Based on the informed arguments, this method will read the URL and based on\n+     * the give params will retrieve the respective data items.\n+     * \n+     * @param currentUser the logged user\n+     * @param urlParameters the request url params\n+     * @param orderParams the request order params\n+     * @return the complete root node\n+     */\n+    private ResponseEntity<RootNode> getDimensionalItems( final User currentUser,\n+        final Map<String, String> urlParameters,\n+        final OrderParams orderParams )\n+    {\n+        // Defining the input params.\n+        final List<String> fields = newArrayList( contextService.getParameterValues( FIELDS ) );\n+        final List<String> filters = newArrayList( contextService.getParameterValues( FILTER ) );\n+        final WebOptions options = new WebOptions( urlParameters );\n+\n+        // checkPaginationSupport( filters );", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY2NDg1MA=="}, "originalCommit": {"oid": "900c01d454f079378a29c8c3bc389cf6dd97ad3d"}, "originalPosition": 153}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MTY4MjE1OnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/DataItemQueryController.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNjoxNjozMFrOGlNLRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMTo0NDoyN1rOHGUOyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY2NjM3NA==", "bodyText": "Just a consideration: do we need to fail the entire request if one of the entity is not readable?", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r441666374", "createdAt": "2020-06-17T16:16:30Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/DataItemQueryController.java", "diffHunk": "@@ -0,0 +1,200 @@\n+package org.hisp.dhis.webapi.controller.dataitem;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.Lists.newArrayList;\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.hisp.dhis.common.DhisApiVersion.ALL;\n+import static org.hisp.dhis.common.DhisApiVersion.DEFAULT;\n+import static org.hisp.dhis.feedback.ErrorCode.E3012;\n+import static org.hisp.dhis.node.NodeUtils.createMetadata;\n+import static org.springframework.http.HttpStatus.FOUND;\n+import static org.springframework.http.HttpStatus.NOT_FOUND;\n+import static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n+import static org.springframework.http.MediaType.APPLICATION_XML_VALUE;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+import org.hisp.dhis.node.Preset;\n+import org.hisp.dhis.node.types.RootNode;\n+import org.hisp.dhis.query.QueryParserException;\n+import org.hisp.dhis.security.acl.AclService;\n+import org.hisp.dhis.user.User;\n+import org.hisp.dhis.webapi.mvc.annotation.ApiVersion;\n+import org.hisp.dhis.webapi.service.ContextService;\n+import org.hisp.dhis.webapi.webdomain.WebOptions;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.RequestParam;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import lombok.extern.slf4j.Slf4j;\n+\n+/**\n+ * This class is responsible for providing methods responsible for retrieving\n+ * dimensional items based on the provided URL params and filters.\n+ *\n+ * It should expose only query methods.\n+ */\n+@Slf4j\n+@ApiVersion( { DEFAULT, ALL } )\n+@RestController\n+public class DataItemQueryController\n+{\n+    static final String API_RESOURCE_PATH = \"/dataItems\";\n+\n+    private static final String FIELDS = \"fields\";\n+\n+    private static final String FILTER = \"filter\";\n+\n+    private final DataItemServiceFacade dataItemServiceFacade;\n+\n+    private final ContextService contextService;\n+\n+    private final ResponseHandler responseHandler;\n+\n+    private final AclService aclService;\n+\n+    public DataItemQueryController( final DataItemServiceFacade dataItemServiceFacade,\n+        final ContextService contextService, final ResponseHandler responseHandler, final AclService aclService )\n+    {\n+        checkNotNull( dataItemServiceFacade );\n+        checkNotNull( contextService );\n+        checkNotNull( responseHandler );\n+        checkNotNull( aclService );\n+\n+        this.dataItemServiceFacade = dataItemServiceFacade;\n+        this.contextService = contextService;\n+        this.responseHandler = responseHandler;\n+        this.aclService = aclService;\n+    }\n+\n+    /**\n+     * Retrieve all data items based in the URL filters and parameters.\n+     *\n+     * @return the list of items found in JSON format\n+     */\n+    @GetMapping( value = API_RESOURCE_PATH, produces = APPLICATION_JSON_VALUE )\n+    public ResponseEntity<RootNode> getJson( @RequestParam\n+    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )\n+        throws QueryParserException\n+    {\n+        log.debug( \"Looking for data items (JSON response)\" );\n+\n+        return getDimensionalItems( currentUser, urlParameters, orderParams );\n+    }\n+\n+    /**\n+     * Retrieve all data items based in the URL filters and parameters.\n+     *\n+     * @return the list of items found in XML format\n+     */\n+    @GetMapping( value = API_RESOURCE_PATH + \".xml\", produces = APPLICATION_XML_VALUE )\n+    public ResponseEntity<RootNode> getXml( @RequestParam\n+    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )\n+    {\n+        log.debug( \"Looking for data items (XML response)\" );\n+\n+        return getDimensionalItems( currentUser, urlParameters, orderParams );\n+    }\n+\n+    /**\n+     * Based on the informed arguments, this method will read the URL and based on\n+     * the give params will retrieve the respective data items.\n+     * \n+     * @param currentUser the logged user\n+     * @param urlParameters the request url params\n+     * @param orderParams the request order params\n+     * @return the complete root node\n+     */\n+    private ResponseEntity<RootNode> getDimensionalItems( final User currentUser,\n+        final Map<String, String> urlParameters,\n+        final OrderParams orderParams )\n+    {\n+        // Defining the input params.\n+        final List<String> fields = newArrayList( contextService.getParameterValues( FIELDS ) );\n+        final List<String> filters = newArrayList( contextService.getParameterValues( FILTER ) );\n+        final WebOptions options = new WebOptions( urlParameters );\n+\n+        // checkPaginationSupport( filters );\n+\n+        if ( fields.isEmpty() )\n+        {\n+            fields.addAll( Preset.ALL.getFields() );\n+        }\n+\n+        // Extracting the target entities to be queried.\n+        final Set<Class<? extends BaseDimensionalItemObject>> targetEntities = dataItemServiceFacade\n+            .extractTargetEntities( filters );\n+\n+        // Checking if the user can read all the target entities.\n+        checkAuthorization( currentUser, targetEntities );\n+\n+        // Retrieving the data items based on the input params.\n+        final List<BaseDimensionalItemObject> dimensionalItems = dataItemServiceFacade.retrieveDataItemEntities(\n+            targetEntities, filters, options, orderParams );\n+\n+        // Creating the response node.\n+        final RootNode rootNode = createMetadata();\n+        responseHandler.addResultsToNode( rootNode, dimensionalItems, fields );\n+        responseHandler.addPaginationToNode( rootNode, new ArrayList<>( targetEntities ), currentUser, options,\n+            filters );\n+\n+        if ( isNotEmpty( dimensionalItems ) )\n+        {\n+            return new ResponseEntity<>( rootNode, FOUND );\n+        }\n+\n+        return new ResponseEntity<>( rootNode, NOT_FOUND );\n+    }\n+\n+    private void checkAuthorization( final User currentUser,\n+        final Set<Class<? extends BaseDimensionalItemObject>> entities )\n+    {\n+        if ( isNotEmpty( entities ) )\n+        {\n+            for ( final Class<? extends BaseDimensionalItemObject> entity : entities )\n+            {\n+                if ( !aclService.canRead( currentUser, entity ) )\n+                {\n+                    throw new IllegalQueryException(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "900c01d454f079378a29c8c3bc389cf6dd97ad3d"}, "originalPosition": 194}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE4MTAwNw==", "bodyText": "I'm not sure. In the other hand, if we don't fail the user might have the impression that results are missing as we will skip the non-readable ones behind the scenes. This seems to be a behaviour that should come from the requirements.\n@larshelge, what's your opinion on this situation? Luciano raised a good point.\nThanks", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r442181007", "createdAt": "2020-06-18T12:15:57Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/DataItemQueryController.java", "diffHunk": "@@ -0,0 +1,200 @@\n+package org.hisp.dhis.webapi.controller.dataitem;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.Lists.newArrayList;\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.hisp.dhis.common.DhisApiVersion.ALL;\n+import static org.hisp.dhis.common.DhisApiVersion.DEFAULT;\n+import static org.hisp.dhis.feedback.ErrorCode.E3012;\n+import static org.hisp.dhis.node.NodeUtils.createMetadata;\n+import static org.springframework.http.HttpStatus.FOUND;\n+import static org.springframework.http.HttpStatus.NOT_FOUND;\n+import static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n+import static org.springframework.http.MediaType.APPLICATION_XML_VALUE;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+import org.hisp.dhis.node.Preset;\n+import org.hisp.dhis.node.types.RootNode;\n+import org.hisp.dhis.query.QueryParserException;\n+import org.hisp.dhis.security.acl.AclService;\n+import org.hisp.dhis.user.User;\n+import org.hisp.dhis.webapi.mvc.annotation.ApiVersion;\n+import org.hisp.dhis.webapi.service.ContextService;\n+import org.hisp.dhis.webapi.webdomain.WebOptions;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.RequestParam;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import lombok.extern.slf4j.Slf4j;\n+\n+/**\n+ * This class is responsible for providing methods responsible for retrieving\n+ * dimensional items based on the provided URL params and filters.\n+ *\n+ * It should expose only query methods.\n+ */\n+@Slf4j\n+@ApiVersion( { DEFAULT, ALL } )\n+@RestController\n+public class DataItemQueryController\n+{\n+    static final String API_RESOURCE_PATH = \"/dataItems\";\n+\n+    private static final String FIELDS = \"fields\";\n+\n+    private static final String FILTER = \"filter\";\n+\n+    private final DataItemServiceFacade dataItemServiceFacade;\n+\n+    private final ContextService contextService;\n+\n+    private final ResponseHandler responseHandler;\n+\n+    private final AclService aclService;\n+\n+    public DataItemQueryController( final DataItemServiceFacade dataItemServiceFacade,\n+        final ContextService contextService, final ResponseHandler responseHandler, final AclService aclService )\n+    {\n+        checkNotNull( dataItemServiceFacade );\n+        checkNotNull( contextService );\n+        checkNotNull( responseHandler );\n+        checkNotNull( aclService );\n+\n+        this.dataItemServiceFacade = dataItemServiceFacade;\n+        this.contextService = contextService;\n+        this.responseHandler = responseHandler;\n+        this.aclService = aclService;\n+    }\n+\n+    /**\n+     * Retrieve all data items based in the URL filters and parameters.\n+     *\n+     * @return the list of items found in JSON format\n+     */\n+    @GetMapping( value = API_RESOURCE_PATH, produces = APPLICATION_JSON_VALUE )\n+    public ResponseEntity<RootNode> getJson( @RequestParam\n+    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )\n+        throws QueryParserException\n+    {\n+        log.debug( \"Looking for data items (JSON response)\" );\n+\n+        return getDimensionalItems( currentUser, urlParameters, orderParams );\n+    }\n+\n+    /**\n+     * Retrieve all data items based in the URL filters and parameters.\n+     *\n+     * @return the list of items found in XML format\n+     */\n+    @GetMapping( value = API_RESOURCE_PATH + \".xml\", produces = APPLICATION_XML_VALUE )\n+    public ResponseEntity<RootNode> getXml( @RequestParam\n+    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )\n+    {\n+        log.debug( \"Looking for data items (XML response)\" );\n+\n+        return getDimensionalItems( currentUser, urlParameters, orderParams );\n+    }\n+\n+    /**\n+     * Based on the informed arguments, this method will read the URL and based on\n+     * the give params will retrieve the respective data items.\n+     * \n+     * @param currentUser the logged user\n+     * @param urlParameters the request url params\n+     * @param orderParams the request order params\n+     * @return the complete root node\n+     */\n+    private ResponseEntity<RootNode> getDimensionalItems( final User currentUser,\n+        final Map<String, String> urlParameters,\n+        final OrderParams orderParams )\n+    {\n+        // Defining the input params.\n+        final List<String> fields = newArrayList( contextService.getParameterValues( FIELDS ) );\n+        final List<String> filters = newArrayList( contextService.getParameterValues( FILTER ) );\n+        final WebOptions options = new WebOptions( urlParameters );\n+\n+        // checkPaginationSupport( filters );\n+\n+        if ( fields.isEmpty() )\n+        {\n+            fields.addAll( Preset.ALL.getFields() );\n+        }\n+\n+        // Extracting the target entities to be queried.\n+        final Set<Class<? extends BaseDimensionalItemObject>> targetEntities = dataItemServiceFacade\n+            .extractTargetEntities( filters );\n+\n+        // Checking if the user can read all the target entities.\n+        checkAuthorization( currentUser, targetEntities );\n+\n+        // Retrieving the data items based on the input params.\n+        final List<BaseDimensionalItemObject> dimensionalItems = dataItemServiceFacade.retrieveDataItemEntities(\n+            targetEntities, filters, options, orderParams );\n+\n+        // Creating the response node.\n+        final RootNode rootNode = createMetadata();\n+        responseHandler.addResultsToNode( rootNode, dimensionalItems, fields );\n+        responseHandler.addPaginationToNode( rootNode, new ArrayList<>( targetEntities ), currentUser, options,\n+            filters );\n+\n+        if ( isNotEmpty( dimensionalItems ) )\n+        {\n+            return new ResponseEntity<>( rootNode, FOUND );\n+        }\n+\n+        return new ResponseEntity<>( rootNode, NOT_FOUND );\n+    }\n+\n+    private void checkAuthorization( final User currentUser,\n+        final Set<Class<? extends BaseDimensionalItemObject>> entities )\n+    {\n+        if ( isNotEmpty( entities ) )\n+        {\n+            for ( final Class<? extends BaseDimensionalItemObject> entity : entities )\n+            {\n+                if ( !aclService.canRead( currentUser, entity ) )\n+                {\n+                    throw new IllegalQueryException(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY2NjM3NA=="}, "originalCommit": {"oid": "900c01d454f079378a29c8c3bc389cf6dd97ad3d"}, "originalPosition": 194}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM4NDk3MQ==", "bodyText": "I think we should simply filter out the items which the user does not have access to. That is how it works for other APIs.", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r476384971", "createdAt": "2020-08-25T11:44:27Z", "author": {"login": "larshelge"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/DataItemQueryController.java", "diffHunk": "@@ -0,0 +1,200 @@\n+package org.hisp.dhis.webapi.controller.dataitem;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.Lists.newArrayList;\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.hisp.dhis.common.DhisApiVersion.ALL;\n+import static org.hisp.dhis.common.DhisApiVersion.DEFAULT;\n+import static org.hisp.dhis.feedback.ErrorCode.E3012;\n+import static org.hisp.dhis.node.NodeUtils.createMetadata;\n+import static org.springframework.http.HttpStatus.FOUND;\n+import static org.springframework.http.HttpStatus.NOT_FOUND;\n+import static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n+import static org.springframework.http.MediaType.APPLICATION_XML_VALUE;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+import org.hisp.dhis.node.Preset;\n+import org.hisp.dhis.node.types.RootNode;\n+import org.hisp.dhis.query.QueryParserException;\n+import org.hisp.dhis.security.acl.AclService;\n+import org.hisp.dhis.user.User;\n+import org.hisp.dhis.webapi.mvc.annotation.ApiVersion;\n+import org.hisp.dhis.webapi.service.ContextService;\n+import org.hisp.dhis.webapi.webdomain.WebOptions;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.RequestParam;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import lombok.extern.slf4j.Slf4j;\n+\n+/**\n+ * This class is responsible for providing methods responsible for retrieving\n+ * dimensional items based on the provided URL params and filters.\n+ *\n+ * It should expose only query methods.\n+ */\n+@Slf4j\n+@ApiVersion( { DEFAULT, ALL } )\n+@RestController\n+public class DataItemQueryController\n+{\n+    static final String API_RESOURCE_PATH = \"/dataItems\";\n+\n+    private static final String FIELDS = \"fields\";\n+\n+    private static final String FILTER = \"filter\";\n+\n+    private final DataItemServiceFacade dataItemServiceFacade;\n+\n+    private final ContextService contextService;\n+\n+    private final ResponseHandler responseHandler;\n+\n+    private final AclService aclService;\n+\n+    public DataItemQueryController( final DataItemServiceFacade dataItemServiceFacade,\n+        final ContextService contextService, final ResponseHandler responseHandler, final AclService aclService )\n+    {\n+        checkNotNull( dataItemServiceFacade );\n+        checkNotNull( contextService );\n+        checkNotNull( responseHandler );\n+        checkNotNull( aclService );\n+\n+        this.dataItemServiceFacade = dataItemServiceFacade;\n+        this.contextService = contextService;\n+        this.responseHandler = responseHandler;\n+        this.aclService = aclService;\n+    }\n+\n+    /**\n+     * Retrieve all data items based in the URL filters and parameters.\n+     *\n+     * @return the list of items found in JSON format\n+     */\n+    @GetMapping( value = API_RESOURCE_PATH, produces = APPLICATION_JSON_VALUE )\n+    public ResponseEntity<RootNode> getJson( @RequestParam\n+    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )\n+        throws QueryParserException\n+    {\n+        log.debug( \"Looking for data items (JSON response)\" );\n+\n+        return getDimensionalItems( currentUser, urlParameters, orderParams );\n+    }\n+\n+    /**\n+     * Retrieve all data items based in the URL filters and parameters.\n+     *\n+     * @return the list of items found in XML format\n+     */\n+    @GetMapping( value = API_RESOURCE_PATH + \".xml\", produces = APPLICATION_XML_VALUE )\n+    public ResponseEntity<RootNode> getXml( @RequestParam\n+    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )\n+    {\n+        log.debug( \"Looking for data items (XML response)\" );\n+\n+        return getDimensionalItems( currentUser, urlParameters, orderParams );\n+    }\n+\n+    /**\n+     * Based on the informed arguments, this method will read the URL and based on\n+     * the give params will retrieve the respective data items.\n+     * \n+     * @param currentUser the logged user\n+     * @param urlParameters the request url params\n+     * @param orderParams the request order params\n+     * @return the complete root node\n+     */\n+    private ResponseEntity<RootNode> getDimensionalItems( final User currentUser,\n+        final Map<String, String> urlParameters,\n+        final OrderParams orderParams )\n+    {\n+        // Defining the input params.\n+        final List<String> fields = newArrayList( contextService.getParameterValues( FIELDS ) );\n+        final List<String> filters = newArrayList( contextService.getParameterValues( FILTER ) );\n+        final WebOptions options = new WebOptions( urlParameters );\n+\n+        // checkPaginationSupport( filters );\n+\n+        if ( fields.isEmpty() )\n+        {\n+            fields.addAll( Preset.ALL.getFields() );\n+        }\n+\n+        // Extracting the target entities to be queried.\n+        final Set<Class<? extends BaseDimensionalItemObject>> targetEntities = dataItemServiceFacade\n+            .extractTargetEntities( filters );\n+\n+        // Checking if the user can read all the target entities.\n+        checkAuthorization( currentUser, targetEntities );\n+\n+        // Retrieving the data items based on the input params.\n+        final List<BaseDimensionalItemObject> dimensionalItems = dataItemServiceFacade.retrieveDataItemEntities(\n+            targetEntities, filters, options, orderParams );\n+\n+        // Creating the response node.\n+        final RootNode rootNode = createMetadata();\n+        responseHandler.addResultsToNode( rootNode, dimensionalItems, fields );\n+        responseHandler.addPaginationToNode( rootNode, new ArrayList<>( targetEntities ), currentUser, options,\n+            filters );\n+\n+        if ( isNotEmpty( dimensionalItems ) )\n+        {\n+            return new ResponseEntity<>( rootNode, FOUND );\n+        }\n+\n+        return new ResponseEntity<>( rootNode, NOT_FOUND );\n+    }\n+\n+    private void checkAuthorization( final User currentUser,\n+        final Set<Class<? extends BaseDimensionalItemObject>> entities )\n+    {\n+        if ( isNotEmpty( entities ) )\n+        {\n+            for ( final Class<? extends BaseDimensionalItemObject> entity : entities )\n+            {\n+                if ( !aclService.canRead( currentUser, entity ) )\n+                {\n+                    throw new IllegalQueryException(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY2NjM3NA=="}, "originalCommit": {"oid": "900c01d454f079378a29c8c3bc389cf6dd97ad3d"}, "originalPosition": 194}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MTcyMDk1OnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/helper/OrderingHelper.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNjoyNjo1NlrOGlNj0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMjoxMToxNVrOGlscDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY3MjY1OQ==", "bodyText": "minor: you can use generics here: Comparator<BaseDimensionalItemObject>", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r441672659", "createdAt": "2020-06-17T16:26:56Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/helper/OrderingHelper.java", "diffHunk": "@@ -0,0 +1,106 @@\n+package org.hisp.dhis.webapi.controller.dataitem.helper;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.apache.commons.lang3.StringUtils.split;\n+import static org.hisp.dhis.feedback.ErrorCode.E2015;\n+\n+import java.util.Collections;\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.apache.commons.beanutils.BeanComparator;\n+import org.apache.commons.collections4.comparators.ComparatorChain;\n+import org.apache.commons.collections4.comparators.NullComparator;\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+\n+/**\n+ * Helper class responsible for providing sorting capabilities.\n+ */\n+public class OrderingHelper\n+{\n+    private static final int ORDERING_ATTRIBUTE = 0;\n+\n+    private static final int ORDERING_VALUE = 1;\n+\n+    private static final String DESC = \"desc\";\n+\n+    /**\n+     * Sorts the given list based on the given sorting params.\n+     *\n+     * @param dimensionalItems\n+     * @param sortingParams\n+     */\n+    public static void sort( final List<BaseDimensionalItemObject> dimensionalItems, final OrderParams sortingParams )\n+    {\n+        if ( sortingParams != null && isNotEmpty( dimensionalItems ) )\n+        {\n+            final ComparatorChain<BaseDimensionalItemObject> chainOfComparators = new ComparatorChain();\n+            final Set<String> orderingPairs = sortingParams.getOrders();\n+\n+            if ( sortingParams != null && isNotEmpty( orderingPairs ) )\n+            {\n+                for ( final String orderingPair : orderingPairs )\n+                {\n+                    chainOfComparators.addComparator( getComparator( orderingPair ) );\n+                }\n+\n+                Collections.sort( dimensionalItems, chainOfComparators );\n+            }\n+        }\n+    }\n+\n+    private static Comparator getComparator( final String orderingParam )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "900c01d454f079378a29c8c3bc389cf6dd97ad3d"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE3ODU3Mw==", "bodyText": "Done", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r442178573", "createdAt": "2020-06-18T12:11:15Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/helper/OrderingHelper.java", "diffHunk": "@@ -0,0 +1,106 @@\n+package org.hisp.dhis.webapi.controller.dataitem.helper;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.apache.commons.lang3.StringUtils.split;\n+import static org.hisp.dhis.feedback.ErrorCode.E2015;\n+\n+import java.util.Collections;\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.apache.commons.beanutils.BeanComparator;\n+import org.apache.commons.collections4.comparators.ComparatorChain;\n+import org.apache.commons.collections4.comparators.NullComparator;\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+\n+/**\n+ * Helper class responsible for providing sorting capabilities.\n+ */\n+public class OrderingHelper\n+{\n+    private static final int ORDERING_ATTRIBUTE = 0;\n+\n+    private static final int ORDERING_VALUE = 1;\n+\n+    private static final String DESC = \"desc\";\n+\n+    /**\n+     * Sorts the given list based on the given sorting params.\n+     *\n+     * @param dimensionalItems\n+     * @param sortingParams\n+     */\n+    public static void sort( final List<BaseDimensionalItemObject> dimensionalItems, final OrderParams sortingParams )\n+    {\n+        if ( sortingParams != null && isNotEmpty( dimensionalItems ) )\n+        {\n+            final ComparatorChain<BaseDimensionalItemObject> chainOfComparators = new ComparatorChain();\n+            final Set<String> orderingPairs = sortingParams.getOrders();\n+\n+            if ( sortingParams != null && isNotEmpty( orderingPairs ) )\n+            {\n+                for ( final String orderingPair : orderingPairs )\n+                {\n+                    chainOfComparators.addComparator( getComparator( orderingPair ) );\n+                }\n+\n+                Collections.sort( dimensionalItems, chainOfComparators );\n+            }\n+        }\n+    }\n+\n+    private static Comparator getComparator( final String orderingParam )", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY3MjY1OQ=="}, "originalCommit": {"oid": "900c01d454f079378a29c8c3bc389cf6dd97ad3d"}, "originalPosition": 84}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MTcyMzAyOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/helper/OrderingHelper.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNjoyNzoyN1rOGlNlMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMjoxMToxM1rOGlsb-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY3MzAwOQ==", "bodyText": "very minory:\nBeanComparator<>\nNullComparator<>\nto remove the generics warning", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r441673009", "createdAt": "2020-06-17T16:27:27Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/helper/OrderingHelper.java", "diffHunk": "@@ -0,0 +1,106 @@\n+package org.hisp.dhis.webapi.controller.dataitem.helper;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.apache.commons.lang3.StringUtils.split;\n+import static org.hisp.dhis.feedback.ErrorCode.E2015;\n+\n+import java.util.Collections;\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.apache.commons.beanutils.BeanComparator;\n+import org.apache.commons.collections4.comparators.ComparatorChain;\n+import org.apache.commons.collections4.comparators.NullComparator;\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+\n+/**\n+ * Helper class responsible for providing sorting capabilities.\n+ */\n+public class OrderingHelper\n+{\n+    private static final int ORDERING_ATTRIBUTE = 0;\n+\n+    private static final int ORDERING_VALUE = 1;\n+\n+    private static final String DESC = \"desc\";\n+\n+    /**\n+     * Sorts the given list based on the given sorting params.\n+     *\n+     * @param dimensionalItems\n+     * @param sortingParams\n+     */\n+    public static void sort( final List<BaseDimensionalItemObject> dimensionalItems, final OrderParams sortingParams )\n+    {\n+        if ( sortingParams != null && isNotEmpty( dimensionalItems ) )\n+        {\n+            final ComparatorChain<BaseDimensionalItemObject> chainOfComparators = new ComparatorChain();\n+            final Set<String> orderingPairs = sortingParams.getOrders();\n+\n+            if ( sortingParams != null && isNotEmpty( orderingPairs ) )\n+            {\n+                for ( final String orderingPair : orderingPairs )\n+                {\n+                    chainOfComparators.addComparator( getComparator( orderingPair ) );\n+                }\n+\n+                Collections.sort( dimensionalItems, chainOfComparators );\n+            }\n+        }\n+    }\n+\n+    private static Comparator getComparator( final String orderingParam )\n+    {\n+        final String[] orderingAttributes = split( orderingParam, \":\" );\n+        final boolean hasValidOrderingAttributes = orderingAttributes != null & orderingAttributes.length == 2;\n+\n+        if ( hasValidOrderingAttributes )\n+        {\n+            final BeanComparator<BaseDimensionalItemObject> comparator = new BeanComparator(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "900c01d454f079378a29c8c3bc389cf6dd97ad3d"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE3ODU1Mg==", "bodyText": "Done", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r442178552", "createdAt": "2020-06-18T12:11:13Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/helper/OrderingHelper.java", "diffHunk": "@@ -0,0 +1,106 @@\n+package org.hisp.dhis.webapi.controller.dataitem.helper;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.apache.commons.lang3.StringUtils.split;\n+import static org.hisp.dhis.feedback.ErrorCode.E2015;\n+\n+import java.util.Collections;\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.apache.commons.beanutils.BeanComparator;\n+import org.apache.commons.collections4.comparators.ComparatorChain;\n+import org.apache.commons.collections4.comparators.NullComparator;\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+\n+/**\n+ * Helper class responsible for providing sorting capabilities.\n+ */\n+public class OrderingHelper\n+{\n+    private static final int ORDERING_ATTRIBUTE = 0;\n+\n+    private static final int ORDERING_VALUE = 1;\n+\n+    private static final String DESC = \"desc\";\n+\n+    /**\n+     * Sorts the given list based on the given sorting params.\n+     *\n+     * @param dimensionalItems\n+     * @param sortingParams\n+     */\n+    public static void sort( final List<BaseDimensionalItemObject> dimensionalItems, final OrderParams sortingParams )\n+    {\n+        if ( sortingParams != null && isNotEmpty( dimensionalItems ) )\n+        {\n+            final ComparatorChain<BaseDimensionalItemObject> chainOfComparators = new ComparatorChain();\n+            final Set<String> orderingPairs = sortingParams.getOrders();\n+\n+            if ( sortingParams != null && isNotEmpty( orderingPairs ) )\n+            {\n+                for ( final String orderingPair : orderingPairs )\n+                {\n+                    chainOfComparators.addComparator( getComparator( orderingPair ) );\n+                }\n+\n+                Collections.sort( dimensionalItems, chainOfComparators );\n+            }\n+        }\n+    }\n+\n+    private static Comparator getComparator( final String orderingParam )\n+    {\n+        final String[] orderingAttributes = split( orderingParam, \":\" );\n+        final boolean hasValidOrderingAttributes = orderingAttributes != null & orderingAttributes.length == 2;\n+\n+        if ( hasValidOrderingAttributes )\n+        {\n+            final BeanComparator<BaseDimensionalItemObject> comparator = new BeanComparator(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY3MzAwOQ=="}, "originalCommit": {"oid": "900c01d454f079378a29c8c3bc389cf6dd97ad3d"}, "originalPosition": 91}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MTcyNTAyOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/helper/OrderingHelper.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNjoyODowMlrOGlNmgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMjoxMTowOFrOGlsb3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY3MzM0NA==", "bodyText": "alternative: dimensionalItems.sort( chainOfComparators );", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r441673344", "createdAt": "2020-06-17T16:28:02Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/helper/OrderingHelper.java", "diffHunk": "@@ -0,0 +1,106 @@\n+package org.hisp.dhis.webapi.controller.dataitem.helper;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.apache.commons.lang3.StringUtils.split;\n+import static org.hisp.dhis.feedback.ErrorCode.E2015;\n+\n+import java.util.Collections;\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.apache.commons.beanutils.BeanComparator;\n+import org.apache.commons.collections4.comparators.ComparatorChain;\n+import org.apache.commons.collections4.comparators.NullComparator;\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+\n+/**\n+ * Helper class responsible for providing sorting capabilities.\n+ */\n+public class OrderingHelper\n+{\n+    private static final int ORDERING_ATTRIBUTE = 0;\n+\n+    private static final int ORDERING_VALUE = 1;\n+\n+    private static final String DESC = \"desc\";\n+\n+    /**\n+     * Sorts the given list based on the given sorting params.\n+     *\n+     * @param dimensionalItems\n+     * @param sortingParams\n+     */\n+    public static void sort( final List<BaseDimensionalItemObject> dimensionalItems, final OrderParams sortingParams )\n+    {\n+        if ( sortingParams != null && isNotEmpty( dimensionalItems ) )\n+        {\n+            final ComparatorChain<BaseDimensionalItemObject> chainOfComparators = new ComparatorChain();\n+            final Set<String> orderingPairs = sortingParams.getOrders();\n+\n+            if ( sortingParams != null && isNotEmpty( orderingPairs ) )\n+            {\n+                for ( final String orderingPair : orderingPairs )\n+                {\n+                    chainOfComparators.addComparator( getComparator( orderingPair ) );\n+                }\n+\n+                Collections.sort( dimensionalItems, chainOfComparators );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "900c01d454f079378a29c8c3bc389cf6dd97ad3d"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE3ODUyNg==", "bodyText": "Done", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r442178526", "createdAt": "2020-06-18T12:11:08Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/helper/OrderingHelper.java", "diffHunk": "@@ -0,0 +1,106 @@\n+package org.hisp.dhis.webapi.controller.dataitem.helper;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.apache.commons.lang3.StringUtils.split;\n+import static org.hisp.dhis.feedback.ErrorCode.E2015;\n+\n+import java.util.Collections;\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.apache.commons.beanutils.BeanComparator;\n+import org.apache.commons.collections4.comparators.ComparatorChain;\n+import org.apache.commons.collections4.comparators.NullComparator;\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+\n+/**\n+ * Helper class responsible for providing sorting capabilities.\n+ */\n+public class OrderingHelper\n+{\n+    private static final int ORDERING_ATTRIBUTE = 0;\n+\n+    private static final int ORDERING_VALUE = 1;\n+\n+    private static final String DESC = \"desc\";\n+\n+    /**\n+     * Sorts the given list based on the given sorting params.\n+     *\n+     * @param dimensionalItems\n+     * @param sortingParams\n+     */\n+    public static void sort( final List<BaseDimensionalItemObject> dimensionalItems, final OrderParams sortingParams )\n+    {\n+        if ( sortingParams != null && isNotEmpty( dimensionalItems ) )\n+        {\n+            final ComparatorChain<BaseDimensionalItemObject> chainOfComparators = new ComparatorChain();\n+            final Set<String> orderingPairs = sortingParams.getOrders();\n+\n+            if ( sortingParams != null && isNotEmpty( orderingPairs ) )\n+            {\n+                for ( final String orderingPair : orderingPairs )\n+                {\n+                    chainOfComparators.addComparator( getComparator( orderingPair ) );\n+                }\n+\n+                Collections.sort( dimensionalItems, chainOfComparators );", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY3MzM0NA=="}, "originalCommit": {"oid": "900c01d454f079378a29c8c3bc389cf6dd97ad3d"}, "originalPosition": 79}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MTcyOTcxOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/helper/OrderingHelper.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNjoyOToxNlrOGlNpjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMjoxMTowMlrOGlsbtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY3NDEyNA==", "bodyText": "very minor:\nnew ComparatorChain<>()\nto remove the warning", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r441674124", "createdAt": "2020-06-17T16:29:16Z", "author": {"login": "luciano-fiandesio"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/helper/OrderingHelper.java", "diffHunk": "@@ -0,0 +1,106 @@\n+package org.hisp.dhis.webapi.controller.dataitem.helper;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.apache.commons.lang3.StringUtils.split;\n+import static org.hisp.dhis.feedback.ErrorCode.E2015;\n+\n+import java.util.Collections;\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.apache.commons.beanutils.BeanComparator;\n+import org.apache.commons.collections4.comparators.ComparatorChain;\n+import org.apache.commons.collections4.comparators.NullComparator;\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+\n+/**\n+ * Helper class responsible for providing sorting capabilities.\n+ */\n+public class OrderingHelper\n+{\n+    private static final int ORDERING_ATTRIBUTE = 0;\n+\n+    private static final int ORDERING_VALUE = 1;\n+\n+    private static final String DESC = \"desc\";\n+\n+    /**\n+     * Sorts the given list based on the given sorting params.\n+     *\n+     * @param dimensionalItems\n+     * @param sortingParams\n+     */\n+    public static void sort( final List<BaseDimensionalItemObject> dimensionalItems, final OrderParams sortingParams )\n+    {\n+        if ( sortingParams != null && isNotEmpty( dimensionalItems ) )\n+        {\n+            final ComparatorChain<BaseDimensionalItemObject> chainOfComparators = new ComparatorChain();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "900c01d454f079378a29c8c3bc389cf6dd97ad3d"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE3ODQ4Nw==", "bodyText": "Done", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r442178487", "createdAt": "2020-06-18T12:11:02Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/helper/OrderingHelper.java", "diffHunk": "@@ -0,0 +1,106 @@\n+package org.hisp.dhis.webapi.controller.dataitem.helper;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;\n+import static org.apache.commons.lang3.StringUtils.split;\n+import static org.hisp.dhis.feedback.ErrorCode.E2015;\n+\n+import java.util.Collections;\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.apache.commons.beanutils.BeanComparator;\n+import org.apache.commons.collections4.comparators.ComparatorChain;\n+import org.apache.commons.collections4.comparators.NullComparator;\n+import org.hisp.dhis.common.BaseDimensionalItemObject;\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.dxf2.common.OrderParams;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+\n+/**\n+ * Helper class responsible for providing sorting capabilities.\n+ */\n+public class OrderingHelper\n+{\n+    private static final int ORDERING_ATTRIBUTE = 0;\n+\n+    private static final int ORDERING_VALUE = 1;\n+\n+    private static final String DESC = \"desc\";\n+\n+    /**\n+     * Sorts the given list based on the given sorting params.\n+     *\n+     * @param dimensionalItems\n+     * @param sortingParams\n+     */\n+    public static void sort( final List<BaseDimensionalItemObject> dimensionalItems, final OrderParams sortingParams )\n+    {\n+        if ( sortingParams != null && isNotEmpty( dimensionalItems ) )\n+        {\n+            final ComparatorChain<BaseDimensionalItemObject> chainOfComparators = new ComparatorChain();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY3NDEyNA=="}, "originalCommit": {"oid": "900c01d454f079378a29c8c3bc389cf6dd97ad3d"}, "originalPosition": 69}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNzgxMjQxOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMTowMjoyOVrOGx5HPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMTozNjoxM1rOGx6G1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk2OTE0OQ==", "bodyText": "for the sake of reporting, I would use rest-assured assertions here. For example:\nresponse.validate().body(\"nameableObjects.dimensionItemType\", hasSize(greaterOrEqualTo(1))). If you do so, upon failure the response will be printed out and the assertion message will look more meaningful than only \"expected true, but found false\"", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r454969149", "createdAt": "2020-07-15T11:02:29Z", "author": {"login": "vilkg"}, "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "diffHunk": "@@ -0,0 +1,297 @@\n+package org.hisp.dhis.dataitems;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static java.lang.String.format;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.CoreMatchers.isA;\n+import static org.hamcrest.CoreMatchers.not;\n+import static org.hamcrest.CoreMatchers.nullValue;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.empty;\n+import static org.hamcrest.Matchers.is;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.hisp.dhis.ApiTest;\n+import org.hisp.dhis.actions.LoginActions;\n+import org.hisp.dhis.actions.dataitem.DataItemActions;\n+import org.hisp.dhis.dto.ApiResponse;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Test cases related to GET \"dataItems\" endpoint. The tests and assertions are\n+ * based on the file \"setup/metadata.json\" => \"programIndicators\",\n+ * \"dataElements\".\n+ * \n+ * The test cases using default pagination will imply \"paging=true\", which is\n+ * the default when \"paging\" is omitted.\n+ *\n+ * @author maikel arabori\n+ */\n+public class DataItemQueryTests extends ApiTest\n+{\n+    private static final int FOUND = 302;\n+\n+    private static final int NOT_FOUND = 404;\n+\n+    private static final int CONFLICT = 409;\n+\n+    private DataItemActions dataItemActions;\n+\n+    @BeforeAll\n+    public void before()\n+    {\n+        dataItemActions = new DataItemActions();\n+\n+        login();\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPagination()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get();\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e4180a3d07bb4991328a0d2a4c19b79ed2c2eb8"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk4NTQzMQ==", "bodyText": "Done", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r454985431", "createdAt": "2020-07-15T11:36:13Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "diffHunk": "@@ -0,0 +1,297 @@\n+package org.hisp.dhis.dataitems;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static java.lang.String.format;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.CoreMatchers.isA;\n+import static org.hamcrest.CoreMatchers.not;\n+import static org.hamcrest.CoreMatchers.nullValue;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.empty;\n+import static org.hamcrest.Matchers.is;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.hisp.dhis.ApiTest;\n+import org.hisp.dhis.actions.LoginActions;\n+import org.hisp.dhis.actions.dataitem.DataItemActions;\n+import org.hisp.dhis.dto.ApiResponse;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Test cases related to GET \"dataItems\" endpoint. The tests and assertions are\n+ * based on the file \"setup/metadata.json\" => \"programIndicators\",\n+ * \"dataElements\".\n+ * \n+ * The test cases using default pagination will imply \"paging=true\", which is\n+ * the default when \"paging\" is omitted.\n+ *\n+ * @author maikel arabori\n+ */\n+public class DataItemQueryTests extends ApiTest\n+{\n+    private static final int FOUND = 302;\n+\n+    private static final int NOT_FOUND = 404;\n+\n+    private static final int CONFLICT = 409;\n+\n+    private DataItemActions dataItemActions;\n+\n+    @BeforeAll\n+    public void before()\n+    {\n+        dataItemActions = new DataItemActions();\n+\n+        login();\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPagination()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get();\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk2OTE0OQ=="}, "originalCommit": {"oid": "9e4180a3d07bb4991328a0d2a4c19b79ed2c2eb8"}, "originalPosition": 90}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNzgyMTgxOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMTowNToyNVrOGx5NEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMTo0MzowMFrOGx6UDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk3MDY0Mw==", "bodyText": "Do you import this data item before the tests? We run them on empty db.", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r454970643", "createdAt": "2020-07-15T11:05:25Z", "author": {"login": "vilkg"}, "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "diffHunk": "@@ -0,0 +1,297 @@\n+package org.hisp.dhis.dataitems;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static java.lang.String.format;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.CoreMatchers.isA;\n+import static org.hamcrest.CoreMatchers.not;\n+import static org.hamcrest.CoreMatchers.nullValue;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.empty;\n+import static org.hamcrest.Matchers.is;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.hisp.dhis.ApiTest;\n+import org.hisp.dhis.actions.LoginActions;\n+import org.hisp.dhis.actions.dataitem.DataItemActions;\n+import org.hisp.dhis.dto.ApiResponse;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Test cases related to GET \"dataItems\" endpoint. The tests and assertions are\n+ * based on the file \"setup/metadata.json\" => \"programIndicators\",\n+ * \"dataElements\".\n+ * \n+ * The test cases using default pagination will imply \"paging=true\", which is\n+ * the default when \"paging\" is omitted.\n+ *\n+ * @author maikel arabori\n+ */\n+public class DataItemQueryTests extends ApiTest\n+{\n+    private static final int FOUND = 302;\n+\n+    private static final int NOT_FOUND = 404;\n+\n+    private static final int CONFLICT = 409;\n+\n+    private DataItemActions dataItemActions;\n+\n+    @BeforeAll\n+    public void before()\n+    {\n+        dataItemActions = new DataItemActions();\n+\n+        login();\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPagination()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get();\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsWithoutPagination()\n+    {\n+        // Given\n+        final String noPagination = \"?paging=false\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( noPagination );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", is( nullValue() ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPaginationOrderedByCode()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get( \"?order=code:asc\" );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", isA( String.class ) );\n+        response.validate().body( \"nameableObjects[0].code\", is( \"AAAAAAA-1234\" ) );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e4180a3d07bb4991328a0d2a4c19b79ed2c2eb8"}, "originalPosition": 121}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk4NTM0NA==", "bodyText": "Yes, I added a new \"programIndicators\" attribute to the \"metadata.json\". It should be imported during the execution chain. Or not?", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r454985344", "createdAt": "2020-07-15T11:36:02Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "diffHunk": "@@ -0,0 +1,297 @@\n+package org.hisp.dhis.dataitems;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static java.lang.String.format;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.CoreMatchers.isA;\n+import static org.hamcrest.CoreMatchers.not;\n+import static org.hamcrest.CoreMatchers.nullValue;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.empty;\n+import static org.hamcrest.Matchers.is;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.hisp.dhis.ApiTest;\n+import org.hisp.dhis.actions.LoginActions;\n+import org.hisp.dhis.actions.dataitem.DataItemActions;\n+import org.hisp.dhis.dto.ApiResponse;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Test cases related to GET \"dataItems\" endpoint. The tests and assertions are\n+ * based on the file \"setup/metadata.json\" => \"programIndicators\",\n+ * \"dataElements\".\n+ * \n+ * The test cases using default pagination will imply \"paging=true\", which is\n+ * the default when \"paging\" is omitted.\n+ *\n+ * @author maikel arabori\n+ */\n+public class DataItemQueryTests extends ApiTest\n+{\n+    private static final int FOUND = 302;\n+\n+    private static final int NOT_FOUND = 404;\n+\n+    private static final int CONFLICT = 409;\n+\n+    private DataItemActions dataItemActions;\n+\n+    @BeforeAll\n+    public void before()\n+    {\n+        dataItemActions = new DataItemActions();\n+\n+        login();\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPagination()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get();\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsWithoutPagination()\n+    {\n+        // Given\n+        final String noPagination = \"?paging=false\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( noPagination );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", is( nullValue() ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPaginationOrderedByCode()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get( \"?order=code:asc\" );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", isA( String.class ) );\n+        response.validate().body( \"nameableObjects[0].code\", is( \"AAAAAAA-1234\" ) );", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk3MDY0Mw=="}, "originalCommit": {"oid": "9e4180a3d07bb4991328a0d2a4c19b79ed2c2eb8"}, "originalPosition": 121}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk4ODgxNA==", "bodyText": "yep, that's correct!", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r454988814", "createdAt": "2020-07-15T11:43:00Z", "author": {"login": "vilkg"}, "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "diffHunk": "@@ -0,0 +1,297 @@\n+package org.hisp.dhis.dataitems;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static java.lang.String.format;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.CoreMatchers.isA;\n+import static org.hamcrest.CoreMatchers.not;\n+import static org.hamcrest.CoreMatchers.nullValue;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.empty;\n+import static org.hamcrest.Matchers.is;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.hisp.dhis.ApiTest;\n+import org.hisp.dhis.actions.LoginActions;\n+import org.hisp.dhis.actions.dataitem.DataItemActions;\n+import org.hisp.dhis.dto.ApiResponse;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Test cases related to GET \"dataItems\" endpoint. The tests and assertions are\n+ * based on the file \"setup/metadata.json\" => \"programIndicators\",\n+ * \"dataElements\".\n+ * \n+ * The test cases using default pagination will imply \"paging=true\", which is\n+ * the default when \"paging\" is omitted.\n+ *\n+ * @author maikel arabori\n+ */\n+public class DataItemQueryTests extends ApiTest\n+{\n+    private static final int FOUND = 302;\n+\n+    private static final int NOT_FOUND = 404;\n+\n+    private static final int CONFLICT = 409;\n+\n+    private DataItemActions dataItemActions;\n+\n+    @BeforeAll\n+    public void before()\n+    {\n+        dataItemActions = new DataItemActions();\n+\n+        login();\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPagination()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get();\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsWithoutPagination()\n+    {\n+        // Given\n+        final String noPagination = \"?paging=false\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( noPagination );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", is( nullValue() ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPaginationOrderedByCode()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get( \"?order=code:asc\" );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", isA( String.class ) );\n+        response.validate().body( \"nameableObjects[0].code\", is( \"AAAAAAA-1234\" ) );", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk3MDY0Mw=="}, "originalCommit": {"oid": "9e4180a3d07bb4991328a0d2a4c19b79ed2c2eb8"}, "originalPosition": 121}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNzgyNjg1OnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMTowNzowMlrOGx5QKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMTo0MjowMFrOGx6SIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk3MTQzNQ==", "bodyText": "I would validate that every item in nameableObjects array is equal to theDimensionType here.\nFor example: response.validate().body( \"nameableObjects.dimensionItemType\", everyItem(is( theDimensionType ) ));", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r454971435", "createdAt": "2020-07-15T11:07:02Z", "author": {"login": "vilkg"}, "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "diffHunk": "@@ -0,0 +1,297 @@\n+package org.hisp.dhis.dataitems;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static java.lang.String.format;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.CoreMatchers.isA;\n+import static org.hamcrest.CoreMatchers.not;\n+import static org.hamcrest.CoreMatchers.nullValue;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.empty;\n+import static org.hamcrest.Matchers.is;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.hisp.dhis.ApiTest;\n+import org.hisp.dhis.actions.LoginActions;\n+import org.hisp.dhis.actions.dataitem.DataItemActions;\n+import org.hisp.dhis.dto.ApiResponse;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Test cases related to GET \"dataItems\" endpoint. The tests and assertions are\n+ * based on the file \"setup/metadata.json\" => \"programIndicators\",\n+ * \"dataElements\".\n+ * \n+ * The test cases using default pagination will imply \"paging=true\", which is\n+ * the default when \"paging\" is omitted.\n+ *\n+ * @author maikel arabori\n+ */\n+public class DataItemQueryTests extends ApiTest\n+{\n+    private static final int FOUND = 302;\n+\n+    private static final int NOT_FOUND = 404;\n+\n+    private static final int CONFLICT = 409;\n+\n+    private DataItemActions dataItemActions;\n+\n+    @BeforeAll\n+    public void before()\n+    {\n+        dataItemActions = new DataItemActions();\n+\n+        login();\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPagination()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get();\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsWithoutPagination()\n+    {\n+        // Given\n+        final String noPagination = \"?paging=false\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( noPagination );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", is( nullValue() ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPaginationOrderedByCode()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get( \"?order=code:asc\" );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", isA( String.class ) );\n+        response.validate().body( \"nameableObjects[0].code\", is( \"AAAAAAA-1234\" ) );\n+    }\n+\n+    @Test\n+    public void testFilterByDimensionTypeUsingDefaultPagination()\n+    {\n+        // Given\n+        final String theDimensionType = \"PROGRAM_INDICATOR\";\n+        final String theUrlParams = \"?filter=dimensionItemType:in:[%s]\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( format( theUrlParams, theDimensionType ) );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", is( theDimensionType ) );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e4180a3d07bb4991328a0d2a4c19b79ed2c2eb8"}, "originalPosition": 137}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk4ODMyMg==", "bodyText": "Done", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r454988322", "createdAt": "2020-07-15T11:42:00Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "diffHunk": "@@ -0,0 +1,297 @@\n+package org.hisp.dhis.dataitems;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static java.lang.String.format;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.CoreMatchers.isA;\n+import static org.hamcrest.CoreMatchers.not;\n+import static org.hamcrest.CoreMatchers.nullValue;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.empty;\n+import static org.hamcrest.Matchers.is;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.hisp.dhis.ApiTest;\n+import org.hisp.dhis.actions.LoginActions;\n+import org.hisp.dhis.actions.dataitem.DataItemActions;\n+import org.hisp.dhis.dto.ApiResponse;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Test cases related to GET \"dataItems\" endpoint. The tests and assertions are\n+ * based on the file \"setup/metadata.json\" => \"programIndicators\",\n+ * \"dataElements\".\n+ * \n+ * The test cases using default pagination will imply \"paging=true\", which is\n+ * the default when \"paging\" is omitted.\n+ *\n+ * @author maikel arabori\n+ */\n+public class DataItemQueryTests extends ApiTest\n+{\n+    private static final int FOUND = 302;\n+\n+    private static final int NOT_FOUND = 404;\n+\n+    private static final int CONFLICT = 409;\n+\n+    private DataItemActions dataItemActions;\n+\n+    @BeforeAll\n+    public void before()\n+    {\n+        dataItemActions = new DataItemActions();\n+\n+        login();\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPagination()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get();\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsWithoutPagination()\n+    {\n+        // Given\n+        final String noPagination = \"?paging=false\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( noPagination );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", is( nullValue() ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPaginationOrderedByCode()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get( \"?order=code:asc\" );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", isA( String.class ) );\n+        response.validate().body( \"nameableObjects[0].code\", is( \"AAAAAAA-1234\" ) );\n+    }\n+\n+    @Test\n+    public void testFilterByDimensionTypeUsingDefaultPagination()\n+    {\n+        // Given\n+        final String theDimensionType = \"PROGRAM_INDICATOR\";\n+        final String theUrlParams = \"?filter=dimensionItemType:in:[%s]\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( format( theUrlParams, theDimensionType ) );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", is( theDimensionType ) );", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk3MTQzNQ=="}, "originalCommit": {"oid": "9e4180a3d07bb4991328a0d2a4c19b79ed2c2eb8"}, "originalPosition": 137}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNzgzMzEyOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMTowOTowM1rOGx5T-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMTo0MTo1NlrOGx6SCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk3MjQxMA==", "bodyText": "Are you sure that this one will always be first item returned? You could do \"nameableObjects.code\", contains('...')", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r454972410", "createdAt": "2020-07-15T11:09:03Z", "author": {"login": "vilkg"}, "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "diffHunk": "@@ -0,0 +1,297 @@\n+package org.hisp.dhis.dataitems;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static java.lang.String.format;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.CoreMatchers.isA;\n+import static org.hamcrest.CoreMatchers.not;\n+import static org.hamcrest.CoreMatchers.nullValue;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.empty;\n+import static org.hamcrest.Matchers.is;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.hisp.dhis.ApiTest;\n+import org.hisp.dhis.actions.LoginActions;\n+import org.hisp.dhis.actions.dataitem.DataItemActions;\n+import org.hisp.dhis.dto.ApiResponse;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Test cases related to GET \"dataItems\" endpoint. The tests and assertions are\n+ * based on the file \"setup/metadata.json\" => \"programIndicators\",\n+ * \"dataElements\".\n+ * \n+ * The test cases using default pagination will imply \"paging=true\", which is\n+ * the default when \"paging\" is omitted.\n+ *\n+ * @author maikel arabori\n+ */\n+public class DataItemQueryTests extends ApiTest\n+{\n+    private static final int FOUND = 302;\n+\n+    private static final int NOT_FOUND = 404;\n+\n+    private static final int CONFLICT = 409;\n+\n+    private DataItemActions dataItemActions;\n+\n+    @BeforeAll\n+    public void before()\n+    {\n+        dataItemActions = new DataItemActions();\n+\n+        login();\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPagination()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get();\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsWithoutPagination()\n+    {\n+        // Given\n+        final String noPagination = \"?paging=false\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( noPagination );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", is( nullValue() ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPaginationOrderedByCode()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get( \"?order=code:asc\" );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", isA( String.class ) );\n+        response.validate().body( \"nameableObjects[0].code\", is( \"AAAAAAA-1234\" ) );\n+    }\n+\n+    @Test\n+    public void testFilterByDimensionTypeUsingDefaultPagination()\n+    {\n+        // Given\n+        final String theDimensionType = \"PROGRAM_INDICATOR\";\n+        final String theUrlParams = \"?filter=dimensionItemType:in:[%s]\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( format( theUrlParams, theDimensionType ) );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", is( theDimensionType ) );\n+    }\n+\n+    @Test\n+    public void testFilterByProgramUsingDefaultPagination()\n+    {\n+        // Given\n+        final String theDimensionType = \"PROGRAM_INDICATOR\";\n+        final String theProgramId = \"BJ42SUrAvHo\";\n+        final String aValidFilteringAttribute = \"program.id\";\n+        final String theUrlParams = \"?filter=dimensionItemType:in:[%s]&filter=\" + aValidFilteringAttribute\n+            + \":eq:%s&order=code:asc\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( format( theUrlParams, theDimensionType, theProgramId ) );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].code\", is( \"AAAAAAA-1234\" ) );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e4180a3d07bb4991328a0d2a4c19b79ed2c2eb8"}, "originalPosition": 156}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk4ODI5Nw==", "bodyText": "Done", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r454988297", "createdAt": "2020-07-15T11:41:56Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "diffHunk": "@@ -0,0 +1,297 @@\n+package org.hisp.dhis.dataitems;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static java.lang.String.format;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.CoreMatchers.isA;\n+import static org.hamcrest.CoreMatchers.not;\n+import static org.hamcrest.CoreMatchers.nullValue;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.empty;\n+import static org.hamcrest.Matchers.is;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.hisp.dhis.ApiTest;\n+import org.hisp.dhis.actions.LoginActions;\n+import org.hisp.dhis.actions.dataitem.DataItemActions;\n+import org.hisp.dhis.dto.ApiResponse;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Test cases related to GET \"dataItems\" endpoint. The tests and assertions are\n+ * based on the file \"setup/metadata.json\" => \"programIndicators\",\n+ * \"dataElements\".\n+ * \n+ * The test cases using default pagination will imply \"paging=true\", which is\n+ * the default when \"paging\" is omitted.\n+ *\n+ * @author maikel arabori\n+ */\n+public class DataItemQueryTests extends ApiTest\n+{\n+    private static final int FOUND = 302;\n+\n+    private static final int NOT_FOUND = 404;\n+\n+    private static final int CONFLICT = 409;\n+\n+    private DataItemActions dataItemActions;\n+\n+    @BeforeAll\n+    public void before()\n+    {\n+        dataItemActions = new DataItemActions();\n+\n+        login();\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPagination()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get();\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsWithoutPagination()\n+    {\n+        // Given\n+        final String noPagination = \"?paging=false\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( noPagination );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", is( nullValue() ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPaginationOrderedByCode()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get( \"?order=code:asc\" );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", isA( String.class ) );\n+        response.validate().body( \"nameableObjects[0].code\", is( \"AAAAAAA-1234\" ) );\n+    }\n+\n+    @Test\n+    public void testFilterByDimensionTypeUsingDefaultPagination()\n+    {\n+        // Given\n+        final String theDimensionType = \"PROGRAM_INDICATOR\";\n+        final String theUrlParams = \"?filter=dimensionItemType:in:[%s]\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( format( theUrlParams, theDimensionType ) );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", is( theDimensionType ) );\n+    }\n+\n+    @Test\n+    public void testFilterByProgramUsingDefaultPagination()\n+    {\n+        // Given\n+        final String theDimensionType = \"PROGRAM_INDICATOR\";\n+        final String theProgramId = \"BJ42SUrAvHo\";\n+        final String aValidFilteringAttribute = \"program.id\";\n+        final String theUrlParams = \"?filter=dimensionItemType:in:[%s]&filter=\" + aValidFilteringAttribute\n+            + \":eq:%s&order=code:asc\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( format( theUrlParams, theDimensionType, theProgramId ) );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].code\", is( \"AAAAAAA-1234\" ) );", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk3MjQxMA=="}, "originalCommit": {"oid": "9e4180a3d07bb4991328a0d2a4c19b79ed2c2eb8"}, "originalPosition": 156}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNzgzNjQyOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMToxMDoxMVrOGx5WEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMTo0MjoxMlrOGx6ScA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk3Mjk0NQ==", "bodyText": "you could use anyInvalidDimensionType var here instead of INVALID_TYPE", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r454972945", "createdAt": "2020-07-15T11:10:11Z", "author": {"login": "vilkg"}, "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "diffHunk": "@@ -0,0 +1,297 @@\n+package org.hisp.dhis.dataitems;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static java.lang.String.format;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.CoreMatchers.isA;\n+import static org.hamcrest.CoreMatchers.not;\n+import static org.hamcrest.CoreMatchers.nullValue;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.empty;\n+import static org.hamcrest.Matchers.is;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.hisp.dhis.ApiTest;\n+import org.hisp.dhis.actions.LoginActions;\n+import org.hisp.dhis.actions.dataitem.DataItemActions;\n+import org.hisp.dhis.dto.ApiResponse;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Test cases related to GET \"dataItems\" endpoint. The tests and assertions are\n+ * based on the file \"setup/metadata.json\" => \"programIndicators\",\n+ * \"dataElements\".\n+ * \n+ * The test cases using default pagination will imply \"paging=true\", which is\n+ * the default when \"paging\" is omitted.\n+ *\n+ * @author maikel arabori\n+ */\n+public class DataItemQueryTests extends ApiTest\n+{\n+    private static final int FOUND = 302;\n+\n+    private static final int NOT_FOUND = 404;\n+\n+    private static final int CONFLICT = 409;\n+\n+    private DataItemActions dataItemActions;\n+\n+    @BeforeAll\n+    public void before()\n+    {\n+        dataItemActions = new DataItemActions();\n+\n+        login();\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPagination()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get();\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsWithoutPagination()\n+    {\n+        // Given\n+        final String noPagination = \"?paging=false\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( noPagination );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", is( nullValue() ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPaginationOrderedByCode()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get( \"?order=code:asc\" );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", isA( String.class ) );\n+        response.validate().body( \"nameableObjects[0].code\", is( \"AAAAAAA-1234\" ) );\n+    }\n+\n+    @Test\n+    public void testFilterByDimensionTypeUsingDefaultPagination()\n+    {\n+        // Given\n+        final String theDimensionType = \"PROGRAM_INDICATOR\";\n+        final String theUrlParams = \"?filter=dimensionItemType:in:[%s]\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( format( theUrlParams, theDimensionType ) );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", is( theDimensionType ) );\n+    }\n+\n+    @Test\n+    public void testFilterByProgramUsingDefaultPagination()\n+    {\n+        // Given\n+        final String theDimensionType = \"PROGRAM_INDICATOR\";\n+        final String theProgramId = \"BJ42SUrAvHo\";\n+        final String aValidFilteringAttribute = \"program.id\";\n+        final String theUrlParams = \"?filter=dimensionItemType:in:[%s]&filter=\" + aValidFilteringAttribute\n+            + \":eq:%s&order=code:asc\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( format( theUrlParams, theDimensionType, theProgramId ) );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].code\", is( \"AAAAAAA-1234\" ) );\n+    }\n+\n+    @Test\n+    public void testFilterUsingInvalidDimensionTypeUsingDefaultPagination()\n+    {\n+        // Given\n+        final String anyInvalidDimensionType = \"INVALID_TYPE\";\n+        final String theUrlParams = \"?filter=dimensionItemType:in:[%s]\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( format( theUrlParams, anyInvalidDimensionType ) );\n+\n+        // Then\n+        response.validate().statusCode( is( CONFLICT ) );\n+        response.validate().body( \"pager\", is( nullValue() ) );\n+        response.validate().body( \"httpStatus\", is( \"Conflict\" ) );\n+        response.validate().body( \"httpStatusCode\", is( CONFLICT ) );\n+        response.validate().body( \"status\", is( \"ERROR\" ) );\n+        response.validate().body( \"errorCode\", is( \"E2016\" ) );\n+        response.validate().body( \"message\", containsString(\n+            \"Unable to parse element `INVALID_TYPE` on filter `dimensionItemType`. The values available are:\" ) );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e4180a3d07bb4991328a0d2a4c19b79ed2c2eb8"}, "originalPosition": 177}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk4ODQwMA==", "bodyText": "Done", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r454988400", "createdAt": "2020-07-15T11:42:12Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "diffHunk": "@@ -0,0 +1,297 @@\n+package org.hisp.dhis.dataitems;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static java.lang.String.format;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.CoreMatchers.isA;\n+import static org.hamcrest.CoreMatchers.not;\n+import static org.hamcrest.CoreMatchers.nullValue;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.empty;\n+import static org.hamcrest.Matchers.is;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.hisp.dhis.ApiTest;\n+import org.hisp.dhis.actions.LoginActions;\n+import org.hisp.dhis.actions.dataitem.DataItemActions;\n+import org.hisp.dhis.dto.ApiResponse;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Test cases related to GET \"dataItems\" endpoint. The tests and assertions are\n+ * based on the file \"setup/metadata.json\" => \"programIndicators\",\n+ * \"dataElements\".\n+ * \n+ * The test cases using default pagination will imply \"paging=true\", which is\n+ * the default when \"paging\" is omitted.\n+ *\n+ * @author maikel arabori\n+ */\n+public class DataItemQueryTests extends ApiTest\n+{\n+    private static final int FOUND = 302;\n+\n+    private static final int NOT_FOUND = 404;\n+\n+    private static final int CONFLICT = 409;\n+\n+    private DataItemActions dataItemActions;\n+\n+    @BeforeAll\n+    public void before()\n+    {\n+        dataItemActions = new DataItemActions();\n+\n+        login();\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPagination()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get();\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsWithoutPagination()\n+    {\n+        // Given\n+        final String noPagination = \"?paging=false\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( noPagination );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", is( nullValue() ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", is( not( empty() ) ) );\n+        assertThat( hasMultipleDataItemTypes( response ), is( true ) );\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPaginationOrderedByCode()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get( \"?order=code:asc\" );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", isA( String.class ) );\n+        response.validate().body( \"nameableObjects[0].code\", is( \"AAAAAAA-1234\" ) );\n+    }\n+\n+    @Test\n+    public void testFilterByDimensionTypeUsingDefaultPagination()\n+    {\n+        // Given\n+        final String theDimensionType = \"PROGRAM_INDICATOR\";\n+        final String theUrlParams = \"?filter=dimensionItemType:in:[%s]\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( format( theUrlParams, theDimensionType ) );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].dimensionItemType\", is( theDimensionType ) );\n+    }\n+\n+    @Test\n+    public void testFilterByProgramUsingDefaultPagination()\n+    {\n+        // Given\n+        final String theDimensionType = \"PROGRAM_INDICATOR\";\n+        final String theProgramId = \"BJ42SUrAvHo\";\n+        final String aValidFilteringAttribute = \"program.id\";\n+        final String theUrlParams = \"?filter=dimensionItemType:in:[%s]&filter=\" + aValidFilteringAttribute\n+            + \":eq:%s&order=code:asc\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( format( theUrlParams, theDimensionType, theProgramId ) );\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects[0].code\", is( \"AAAAAAA-1234\" ) );\n+    }\n+\n+    @Test\n+    public void testFilterUsingInvalidDimensionTypeUsingDefaultPagination()\n+    {\n+        // Given\n+        final String anyInvalidDimensionType = \"INVALID_TYPE\";\n+        final String theUrlParams = \"?filter=dimensionItemType:in:[%s]\";\n+\n+        // When\n+        final ApiResponse response = dataItemActions.get( format( theUrlParams, anyInvalidDimensionType ) );\n+\n+        // Then\n+        response.validate().statusCode( is( CONFLICT ) );\n+        response.validate().body( \"pager\", is( nullValue() ) );\n+        response.validate().body( \"httpStatus\", is( \"Conflict\" ) );\n+        response.validate().body( \"httpStatusCode\", is( CONFLICT ) );\n+        response.validate().body( \"status\", is( \"ERROR\" ) );\n+        response.validate().body( \"errorCode\", is( \"E2016\" ) );\n+        response.validate().body( \"message\", containsString(\n+            \"Unable to parse element `INVALID_TYPE` on filter `dimensionItemType`. The values available are:\" ) );", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk3Mjk0NQ=="}, "originalCommit": {"oid": "9e4180a3d07bb4991328a0d2a4c19b79ed2c2eb8"}, "originalPosition": 177}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNzg0NDA2OnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMToxMjo1MFrOGx5a8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwNzowMDo1M1rOGycvLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk3NDE5Mw==", "bodyText": "I would propose to change the contract from nameableObjects to dataItems, to make it consistent with other APIs", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r454974193", "createdAt": "2020-07-15T11:12:50Z", "author": {"login": "vilkg"}, "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "diffHunk": "@@ -0,0 +1,297 @@\n+package org.hisp.dhis.dataitems;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static java.lang.String.format;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.CoreMatchers.isA;\n+import static org.hamcrest.CoreMatchers.not;\n+import static org.hamcrest.CoreMatchers.nullValue;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.empty;\n+import static org.hamcrest.Matchers.is;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.hisp.dhis.ApiTest;\n+import org.hisp.dhis.actions.LoginActions;\n+import org.hisp.dhis.actions.dataitem.DataItemActions;\n+import org.hisp.dhis.dto.ApiResponse;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Test cases related to GET \"dataItems\" endpoint. The tests and assertions are\n+ * based on the file \"setup/metadata.json\" => \"programIndicators\",\n+ * \"dataElements\".\n+ * \n+ * The test cases using default pagination will imply \"paging=true\", which is\n+ * the default when \"paging\" is omitted.\n+ *\n+ * @author maikel arabori\n+ */\n+public class DataItemQueryTests extends ApiTest\n+{\n+    private static final int FOUND = 302;\n+\n+    private static final int NOT_FOUND = 404;\n+\n+    private static final int CONFLICT = 409;\n+\n+    private DataItemActions dataItemActions;\n+\n+    @BeforeAll\n+    public void before()\n+    {\n+        dataItemActions = new DataItemActions();\n+\n+        login();\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPagination()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get();\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e4180a3d07bb4991328a0d2a4c19b79ed2c2eb8"}, "originalPosition": 88}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTU1MjgxNQ==", "bodyText": "Done", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r455552815", "createdAt": "2020-07-16T07:00:53Z", "author": {"login": "maikelarabori"}, "path": "dhis-2/dhis-e2e-test/src/test/java/org/hisp/dhis/dataitems/DataItemQueryTests.java", "diffHunk": "@@ -0,0 +1,297 @@\n+package org.hisp.dhis.dataitems;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import static java.lang.String.format;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.CoreMatchers.isA;\n+import static org.hamcrest.CoreMatchers.not;\n+import static org.hamcrest.CoreMatchers.nullValue;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.empty;\n+import static org.hamcrest.Matchers.is;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.hisp.dhis.ApiTest;\n+import org.hisp.dhis.actions.LoginActions;\n+import org.hisp.dhis.actions.dataitem.DataItemActions;\n+import org.hisp.dhis.dto.ApiResponse;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Test cases related to GET \"dataItems\" endpoint. The tests and assertions are\n+ * based on the file \"setup/metadata.json\" => \"programIndicators\",\n+ * \"dataElements\".\n+ * \n+ * The test cases using default pagination will imply \"paging=true\", which is\n+ * the default when \"paging\" is omitted.\n+ *\n+ * @author maikel arabori\n+ */\n+public class DataItemQueryTests extends ApiTest\n+{\n+    private static final int FOUND = 302;\n+\n+    private static final int NOT_FOUND = 404;\n+\n+    private static final int CONFLICT = 409;\n+\n+    private DataItemActions dataItemActions;\n+\n+    @BeforeAll\n+    public void before()\n+    {\n+        dataItemActions = new DataItemActions();\n+\n+        login();\n+    }\n+\n+    @Test\n+    public void testGetAllDataItemsUsingDefaultPagination()\n+    {\n+        // When\n+        final ApiResponse response = dataItemActions.get();\n+\n+        // Then\n+        response.validate().statusCode( is( FOUND ) );\n+        response.validate().body( \"pager\", isA( Object.class ) );\n+        response.validate().body( \"nameableObjects\", isA( Object.class ) );", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk3NDE5Mw=="}, "originalCommit": {"oid": "9e4180a3d07bb4991328a0d2a4c19b79ed2c2eb8"}, "originalPosition": 88}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3ODI1MTUxOnYy", "diffSide": "RIGHT", "path": "dhis-2/dhis-e2e-test/src/main/java/org/hisp/dhis/actions/dataitem/DataItemActions.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMTozOTozNFrOHGUBtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMjoyMjoyNVrOHGVgvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM4MTYyMQ==", "bodyText": "Just wondering, where is this class RestApiActions? Is it part of this PR or already existing?", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r476381621", "createdAt": "2020-08-25T11:39:34Z", "author": {"login": "larshelge"}, "path": "dhis-2/dhis-e2e-test/src/main/java/org/hisp/dhis/actions/dataitem/DataItemActions.java", "diffHunk": "@@ -0,0 +1,43 @@\n+package org.hisp.dhis.actions.dataitem;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import org.hisp.dhis.actions.RestApiActions;\n+\n+/**\n+ * @author maikel arabori\n+ */\n+public class DataItemActions\n+    extends RestApiActions", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3324e4e825eb55971469f448098a86a1fb89af75"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM4NzY4MA==", "bodyText": "It's an existing class in the dhis-e2e-test module.", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r476387680", "createdAt": "2020-08-25T11:49:19Z", "author": {"login": "vilkg"}, "path": "dhis-2/dhis-e2e-test/src/main/java/org/hisp/dhis/actions/dataitem/DataItemActions.java", "diffHunk": "@@ -0,0 +1,43 @@\n+package org.hisp.dhis.actions.dataitem;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import org.hisp.dhis.actions.RestApiActions;\n+\n+/**\n+ * @author maikel arabori\n+ */\n+public class DataItemActions\n+    extends RestApiActions", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM4MTYyMQ=="}, "originalCommit": {"oid": "3324e4e825eb55971469f448098a86a1fb89af75"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQwNTk1MQ==", "bodyText": "Got it!", "url": "https://github.com/dhis2/dhis2-core/pull/5661#discussion_r476405951", "createdAt": "2020-08-25T12:22:25Z", "author": {"login": "larshelge"}, "path": "dhis-2/dhis-e2e-test/src/main/java/org/hisp/dhis/actions/dataitem/DataItemActions.java", "diffHunk": "@@ -0,0 +1,43 @@\n+package org.hisp.dhis.actions.dataitem;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import org.hisp.dhis.actions.RestApiActions;\n+\n+/**\n+ * @author maikel arabori\n+ */\n+public class DataItemActions\n+    extends RestApiActions", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM4MTYyMQ=="}, "originalCommit": {"oid": "3324e4e825eb55971469f448098a86a1fb89af75"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3441, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}