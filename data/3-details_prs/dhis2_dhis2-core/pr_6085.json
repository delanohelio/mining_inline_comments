{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4NTI3NzA1", "number": 6085, "title": "feat: Add proxy API endpoint for App Hub [DHIS2-9093]", "bodyText": "Introduces a new proxy API endpoint for for the App Hub on the following path:\n/api/{version}/appHub/{app-hub-API-version}/{app-hub-API-query}\nThe {version} refers to the DHIS 2 API version. The {app-hub-API-version} is mandatory and refers to the app hub API version. The {app-hub-API-query} is mandatory and refers to the query to proxy pass to the App Hub API. The query can contain path segments and query parameters.\nExample API requests:\n/api/35/appHub/v1/apps\n/api/35/appHub/v1/apps/9cd27cfb-9d84-4ded-8749-172c3976c834\n/api/35/appHub/v1/apps/9cd27cfb-9d84-4ded-8749-172c3976c834/versions", "createdAt": "2020-09-03T10:25:22Z", "url": "https://github.com/dhis2/dhis2-core/pull/6085", "merged": true, "mergeCommit": {"oid": "1a6a4cb01b60c98998cc4816ee356dfdb05d8a13"}, "closed": true, "closedAt": "2020-09-04T09:20:47Z", "author": {"login": "larshelge"}, "timelineItems": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDBOVNAH2gAyNDc4NTI3NzA1OjAyMTIwNzMxZDAwNDRjYjc3ZjIxYzY3Yzg1MjE4MDEzMjA2ODgzMmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFhYBrAFqTQ4MjQ4MzI5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "02120731d0044cb77f21c67c852180132068832c", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/02120731d0044cb77f21c67c852180132068832c", "committedDate": "2020-08-27T14:24:34Z", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51771650446f2011bb65f40224439144d23a6045", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/51771650446f2011bb65f40224439144d23a6045", "committedDate": "2020-08-27T15:22:19Z", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "714fe2430869802e1ebdb02165f26d4a84456a51", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/714fe2430869802e1ebdb02165f26d4a84456a51", "committedDate": "2020-09-01T12:37:00Z", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4eb958db2b25180e62fe2270ee791600d9c76e33", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/4eb958db2b25180e62fe2270ee791600d9c76e33", "committedDate": "2020-09-02T10:30:36Z", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "485c61ee80782fab08650da7be626ea8f135cc1e", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/485c61ee80782fab08650da7be626ea8f135cc1e", "committedDate": "2020-09-03T10:22:49Z", "message": "Add app hub proxy endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c557536d904c9d130d2828f2dd597f410978232", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/4c557536d904c9d130d2828f2dd597f410978232", "committedDate": "2020-09-03T10:26:51Z", "message": "Add javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc049c4a21698fb352bd075e7baf0040cc8f12a5", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/cc049c4a21698fb352bd075e7baf0040cc8f12a5", "committedDate": "2020-09-03T10:39:43Z", "message": "Update Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8aeac38bfa2586001098fe916115dca22516131", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/f8aeac38bfa2586001098fe916115dca22516131", "committedDate": "2020-09-03T10:40:49Z", "message": "Update Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eba383f788726582fd10ff9d4be03dce9765d1f9", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/eba383f788726582fd10ff9d4be03dce9765d1f9", "committedDate": "2020-09-03T10:41:39Z", "message": "Update Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15ef6f6604c066ecfc1ee400946b9f9164a74238", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/15ef6f6604c066ecfc1ee400946b9f9164a74238", "committedDate": "2020-09-03T10:43:15Z", "message": "Add test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da52825eacb08d5063d178b6dfb7f1f496f76f63", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/da52825eacb08d5063d178b6dfb7f1f496f76f63", "committedDate": "2020-09-03T10:44:14Z", "message": "Add test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "304bb68632c89eb5b15416fd2ab6497d5a3c793d", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/304bb68632c89eb5b15416fd2ab6497d5a3c793d", "committedDate": "2020-09-03T10:45:33Z", "message": "Add test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNzc2Mzg5", "url": "https://github.com/dhis2/dhis2-core/pull/6085#pullrequestreview-481776389", "createdAt": "2020-09-03T12:12:47Z", "commit": {"oid": "304bb68632c89eb5b15416fd2ab6497d5a3c793d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMjoxMjo0N1rOHMjvaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMjoxMjo0N1rOHMjvaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkzMDUzNg==", "bodyText": "No need for @responsebody since the controller is already annotated with @RestController", "url": "https://github.com/dhis2/dhis2-core/pull/6085#discussion_r482930536", "createdAt": "2020-09-03T12:12:47Z", "author": {"login": "mortenoh"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/AppHubController.java", "diffHunk": "@@ -66,20 +70,29 @@\n     @Autowired\n     private I18nManager i18nManager;\n \n-\n-    @RequestMapping( method = RequestMethod.GET, produces = \"application/json\" )\n-    public @ResponseBody List<WebApp> listAppHub( HttpServletResponse response )\n+    /**\n+     * Deprecated as of version 2.35 and should be removed eventually.\n+     */\n+    @GetMapping( produces = \"application/json\" )\n+    public @ResponseBody List<WebApp> listAppHub( @RequestParam String query, HttpServletResponse response )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "304bb68632c89eb5b15416fd2ab6497d5a3c793d"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNzc2NDM5", "url": "https://github.com/dhis2/dhis2-core/pull/6085#pullrequestreview-481776439", "createdAt": "2020-09-03T12:12:52Z", "commit": {"oid": "304bb68632c89eb5b15416fd2ab6497d5a3c793d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNzgxNTMw", "url": "https://github.com/dhis2/dhis2-core/pull/6085#pullrequestreview-481781530", "createdAt": "2020-09-03T12:20:05Z", "commit": {"oid": "304bb68632c89eb5b15416fd2ab6497d5a3c793d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMjoyMDowNVrOHMj-lQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMjoyMDowNVrOHMj-lQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkzNDQyMQ==", "bodyText": "I believe this should be /{apiVersion}/{query} with query as a @PathVariable instead of a @RequestParam, otherwise it is difficult (currently impossible) to pass query parameters to the upstream API", "url": "https://github.com/dhis2/dhis2-core/pull/6085#discussion_r482934421", "createdAt": "2020-09-03T12:20:05Z", "author": {"login": "amcgee"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/AppHubController.java", "diffHunk": "@@ -66,20 +70,29 @@\n     @Autowired\n     private I18nManager i18nManager;\n \n-\n-    @RequestMapping( method = RequestMethod.GET, produces = \"application/json\" )\n-    public @ResponseBody List<WebApp> listAppHub( HttpServletResponse response )\n+    /**\n+     * Deprecated as of version 2.35 and should be removed eventually.\n+     */\n+    @GetMapping( produces = \"application/json\" )\n+    public @ResponseBody List<WebApp> listAppHub( @RequestParam String query, HttpServletResponse response )\n         throws IOException\n     {\n         return appHubService.getAppHub();\n     }\n \n-    @RequestMapping( value = \"/{versionId}\", method = RequestMethod.POST )\n+    @GetMapping( value = \"/{apiVersion}\", produces = \"application/json\" )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "304bb68632c89eb5b15416fd2ab6497d5a3c793d"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c41099604a5871b0d59809cca8a13b72e450df7a", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/c41099604a5871b0d59809cca8a13b72e450df7a", "committedDate": "2020-09-03T13:03:35Z", "message": "Use wildcards"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0337125743d6b81d045536985e9866c111ad1f5", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/c0337125743d6b81d045536985e9866c111ad1f5", "committedDate": "2020-09-03T13:05:19Z", "message": "Code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aefa84e55be970136dfd366a2fb05520988a6347", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/aefa84e55be970136dfd366a2fb05520988a6347", "committedDate": "2020-09-03T13:06:08Z", "message": "Remove response body annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2901612b122bd99ff757de5ff329b49459a0c43", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/f2901612b122bd99ff757de5ff329b49459a0c43", "committedDate": "2020-09-03T13:06:30Z", "message": "Code style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxODU3NjIx", "url": "https://github.com/dhis2/dhis2-core/pull/6085#pullrequestreview-481857621", "createdAt": "2020-09-03T13:49:00Z", "commit": {"oid": "c41099604a5871b0d59809cca8a13b72e450df7a"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMzo0OTowMFrOHMne8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMzo1MTozMlrOHMnl-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjk5MTg1OA==", "bodyText": "Nice!  Should this also be used by AppController.js?", "url": "https://github.com/dhis2/dhis2-core/pull/6085#discussion_r482991858", "createdAt": "2020-09-03T13:49:00Z", "author": {"login": "amcgee"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/utils/ContextUtils.java", "diffHunk": "@@ -421,4 +423,20 @@ public static String getAttachmentFileName( @Nullable String contentDispositionH\n         Matcher matcher = CONTENT_DISPOSITION_ATTACHMENT_FILENAME_PATTERN.matcher( contentDispositionHeaderValue );\n         return matcher.matches() ? matcher.group( 1 ) : null;\n     }\n+\n+    /**\n+     * Returns the value associated with a double wildcard ({@code **}) in the request mapping.\n+     * <p>\n+     * As an example, for a request mapping {@code /apps/**} and a request {@code /apps/data-visualizer/index.html},\n+     * this method will return {@code data-visualizer/index.html}.\n+     *\n+     * @param request the {@link HttpServletRequest}.\n+     * @return the wildcard value.\n+     */\n+    public static String getWildcardPathValue( HttpServletRequest request )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c41099604a5871b0d59809cca8a13b72e450df7a"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjk5MzY1OQ==", "bodyText": "This seems cleaner to me, thanks!  I'll leave it to @larshelge and @netroms to decide if this has negative implications for security, api cleanliness, or performance - if so we can use the ?query= version so long as additional query parameters are transparently forwarded to the apps.dhis2.org API.", "url": "https://github.com/dhis2/dhis2-core/pull/6085#discussion_r482993659", "createdAt": "2020-09-03T13:51:32Z", "author": {"login": "amcgee"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/AppHubController.java", "diffHunk": "@@ -80,9 +82,12 @@\n         return appHubService.getAppHub();\n     }\n \n-    @GetMapping( value = \"/{apiVersion}\", produces = \"application/json\" )\n-    public @ResponseBody String getAppHubApiResponse( @PathVariable String apiVersion, @RequestParam String query )\n+    @GetMapping( value = \"/{apiVersion}/**\", produces = \"application/json\" )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c41099604a5871b0d59809cca8a13b72e450df7a"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b08ac957fc2e8c302de9786234c95d6313b97648", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/b08ac957fc2e8c302de9786234c95d6313b97648", "committedDate": "2020-09-03T14:16:09Z", "message": "Update logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19e9b7208a8c940c1c5bdb1005e1fa5db6609082", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/19e9b7208a8c940c1c5bdb1005e1fa5db6609082", "committedDate": "2020-09-03T14:18:39Z", "message": "Made illegal strings a constant"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxODg2MzI2", "url": "https://github.com/dhis2/dhis2-core/pull/6085#pullrequestreview-481886326", "createdAt": "2020-09-03T14:18:04Z", "commit": {"oid": "f2901612b122bd99ff757de5ff329b49459a0c43"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNDoxODowNVrOHMozHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNDoyMzoxM1rOHMpB4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzAxMzQwNA==", "bodyText": "Base URL and Query are switched here, log example:\nGet App Hub response, base URL: 'apps', API version: 'v1', query: 'https://apps.dhis2.org/api'", "url": "https://github.com/dhis2/dhis2-core/pull/6085#discussion_r483013404", "createdAt": "2020-09-03T14:18:05Z", "author": {"login": "amcgee"}, "path": "dhis-2/dhis-services/dhis-service-administration/src/main/java/org/hisp/dhis/apphub/DefaultAppHubService.java", "diffHunk": "@@ -76,6 +80,28 @@ public DefaultAppHubService( RestTemplate restTemplate, AppManager appManager,\n         this.dhisConfigurationProvider = dhisConfigurationProvider;\n     }\n \n+    @Override\n+    public String getAppHubApiResponse( String apiVersion, String query )\n+    {\n+        validateQuery( apiVersion );\n+        validateQuery( query );\n+\n+        apiVersion = sanitizeQuery( apiVersion );\n+        query = sanitizeQuery( query );\n+\n+        String appHubApiUrl = dhisConfigurationProvider.getProperty( ConfigurationKey.APPHUB_API_URL );\n+\n+        log.info( \"Get App Hub response, base URL: '{}', API version: '{}', query: '{}'\", query, apiVersion, appHubApiUrl );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2901612b122bd99ff757de5ff329b49459a0c43"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzAxNzE4NQ==", "bodyText": "This does not forward on any parameters to the apps.dhis2.org API - for example, the following queries all print App Hub request URL: 'https://apps.dhis2.org/api/v1/apps' and return the full list of 39 apps without any filtering applied:\nhttp://d2.winged.tech:8080/api/appHub/v1/apps?channel=canary (should return 0 apps)\nhttp://d2.winged.tech:8080/api/appHub/v1/apps?dhis2_version=2.22 (should return 8 apps)\nhttp://d2.winged.tech:8080/api/appHub/v1/apps?dhis2_version=2.34 (should return 27 apps)", "url": "https://github.com/dhis2/dhis2-core/pull/6085#discussion_r483017185", "createdAt": "2020-09-03T14:23:13Z", "author": {"login": "amcgee"}, "path": "dhis-2/dhis-services/dhis-service-administration/src/main/java/org/hisp/dhis/apphub/DefaultAppHubService.java", "diffHunk": "@@ -76,6 +80,28 @@ public DefaultAppHubService( RestTemplate restTemplate, AppManager appManager,\n         this.dhisConfigurationProvider = dhisConfigurationProvider;\n     }\n \n+    @Override\n+    public String getAppHubApiResponse( String apiVersion, String query )\n+    {\n+        validateQuery( apiVersion );\n+        validateQuery( query );\n+\n+        apiVersion = sanitizeQuery( apiVersion );\n+        query = sanitizeQuery( query );\n+\n+        String appHubApiUrl = dhisConfigurationProvider.getProperty( ConfigurationKey.APPHUB_API_URL );\n+\n+        log.info( \"Get App Hub response, base URL: '{}', API version: '{}', query: '{}'\", query, apiVersion, appHubApiUrl );\n+\n+        String url = String.format( \"%s/%s/%s\", appHubApiUrl, apiVersion, query );\n+\n+        log.info( \"App Hub request URL: '{}'\", url );\n+\n+        ResponseEntity<String> response = restTemplate.exchange( url, HttpMethod.GET, getJsonRequestEntity(), String.class );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2901612b122bd99ff757de5ff329b49459a0c43"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4b6054057104b077816dc0887e72457a27d06b6", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/c4b6054057104b077816dc0887e72457a27d06b6", "committedDate": "2020-09-03T14:29:39Z", "message": "Add test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d23c24509d2b1e9a8a0cff102d226d7b6930ef3e", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/d23c24509d2b1e9a8a0cff102d226d7b6930ef3e", "committedDate": "2020-09-03T14:30:37Z", "message": "Update javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "926d78b83dd0c9656ed1e2612c307e61c581a743", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/926d78b83dd0c9656ed1e2612c307e61c581a743", "committedDate": "2020-09-03T14:31:45Z", "message": "Update logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1d448f39dae7959b3bbc564b6c38ea1489fc7d5", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/d1d448f39dae7959b3bbc564b6c38ea1489fc7d5", "committedDate": "2020-09-03T14:49:36Z", "message": "Include query params"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "166b81e6e41f78aa15b56ffb102e141661a3163c", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/166b81e6e41f78aa15b56ffb102e141661a3163c", "committedDate": "2020-09-03T14:59:05Z", "message": "Update query string format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "240496255c46b265a43b40f9ffde9e4c9800d008", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/240496255c46b265a43b40f9ffde9e4c9800d008", "committedDate": "2020-09-03T15:09:58Z", "message": "Validate API version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11d389c812936297a3313a6bf5cda8b236e0586b", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/11d389c812936297a3313a6bf5cda8b236e0586b", "committedDate": "2020-09-03T15:16:18Z", "message": "Code style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxOTQ3OTUz", "url": "https://github.com/dhis2/dhis2-core/pull/6085#pullrequestreview-481947953", "createdAt": "2020-09-03T15:19:39Z", "commit": {"oid": "240496255c46b265a43b40f9ffde9e4c9800d008"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNToxOTo0MFrOHMrpiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNToxOTo0MFrOHMrpiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA2MDEwNw==", "bodyText": "I think this @RequestParam String query is new and shouldn't have been added?  It causes /api/appHub to fail with a 400 error when it should be an alias for /api/appHub/v1/apps I think?  Maybe it should automatically pass the dhis2_version parameter?  Not sure this is actually in use anywhere, but as-is this is an unnecessary breaking change", "url": "https://github.com/dhis2/dhis2-core/pull/6085#discussion_r483060107", "createdAt": "2020-09-03T15:19:40Z", "author": {"login": "amcgee"}, "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/AppHubController.java", "diffHunk": "@@ -66,20 +71,32 @@\n     @Autowired\n     private I18nManager i18nManager;\n \n-\n-    @RequestMapping( method = RequestMethod.GET, produces = \"application/json\" )\n-    public @ResponseBody List<WebApp> listAppHub( HttpServletResponse response )\n+    /**\n+     * Deprecated as of version 2.35 and should be removed eventually.\n+     */\n+    @GetMapping( produces = \"application/json\" )\n+    public  List<WebApp> listAppHub( @RequestParam String query, HttpServletResponse response )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "240496255c46b265a43b40f9ffde9e4c9800d008"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a2ab7d4189183b0e6e33432464a62934a0c9bdf", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/7a2ab7d4189183b0e6e33432464a62934a0c9bdf", "committedDate": "2020-09-03T20:37:38Z", "message": "Remove accidental query param"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71cffc245683b0f2fc71338941daf7b1341abd09", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/71cffc245683b0f2fc71338941daf7b1341abd09", "committedDate": "2020-09-03T20:44:13Z", "message": "Codestyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddb6b48da32ae7f7d5f1aa8fca39e9cc0695c2ca", "author": {"user": {"login": "larshelge", "name": "Lars Helge \u00d8verland"}}, "url": "https://github.com/dhis2/dhis2-core/commit/ddb6b48da32ae7f7d5f1aa8fca39e9cc0695c2ca", "committedDate": "2020-09-03T20:46:41Z", "message": "Update validation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNDgzMjkz", "url": "https://github.com/dhis2/dhis2-core/pull/6085#pullrequestreview-482483293", "createdAt": "2020-09-04T08:59:58Z", "commit": {"oid": "ddb6b48da32ae7f7d5f1aa8fca39e9cc0695c2ca"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2488, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}