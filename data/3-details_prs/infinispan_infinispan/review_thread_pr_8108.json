{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0MTExNTc0", "number": 8108, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMDo0MDo0M1rODsnQHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwODo1MTo0OVrOD5T5Ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MTA3MDM2OnYy", "diffSide": "RIGHT", "path": "core/src/test/java/org/infinispan/configuration/parsing/UnifiedXmlFileParsingTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMDo0MDo0M1rOF9jvdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxMTo1MToxNVrOF-R9xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA5MzA0NQ==", "bodyText": "Shouldn't we be using CommonsTestingUtil.tmpDirectory?", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r400093045", "createdAt": "2020-03-30T10:40:43Z", "author": {"login": "ryanemerson"}, "path": "core/src/test/java/org/infinispan/configuration/parsing/UnifiedXmlFileParsingTest.java", "diffHunk": "@@ -71,6 +70,8 @@\n @Test(groups = \"unit\", testName = \"configuration.parsing.UnifiedXmlFileParsingTest\")\n public class UnifiedXmlFileParsingTest extends AbstractInfinispanTest {\n \n+   public static final String TMPDIR = System.getProperty(\"java.io.tmpdir\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a424bc819f434162fcab3dcc3a56f922cebd662"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDg1MDM3NQ==", "bodyText": "No, because this test is only about ensuring that it is parsing things correctly (including expanding of system properties). It won't actually use the persistent paths for anything", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r400850375", "createdAt": "2020-03-31T11:51:15Z", "author": {"login": "tristantarrant"}, "path": "core/src/test/java/org/infinispan/configuration/parsing/UnifiedXmlFileParsingTest.java", "diffHunk": "@@ -71,6 +70,8 @@\n @Test(groups = \"unit\", testName = \"configuration.parsing.UnifiedXmlFileParsingTest\")\n public class UnifiedXmlFileParsingTest extends AbstractInfinispanTest {\n \n+   public static final String TMPDIR = System.getProperty(\"java.io.tmpdir\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA5MzA0NQ=="}, "originalCommit": {"oid": "9a424bc819f434162fcab3dcc3a56f922cebd662"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MTA3NDE2OnYy", "diffSide": "RIGHT", "path": "query/src/test/java/org/infinispan/query/blackbox/LocalCachePerformantConfTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMDo0MTo1MFrOF9jxsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxMTo1MjoyN1rOF-SApQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA5MzYxOQ==", "bodyText": "CommonsTestingUtil.tmpDirectory", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r400093619", "createdAt": "2020-03-30T10:41:50Z", "author": {"login": "ryanemerson"}, "path": "query/src/test/java/org/infinispan/query/blackbox/LocalCachePerformantConfTest.java", "diffHunk": "@@ -20,7 +21,7 @@\n    /**\n     * The file constant needs to match what's defined in the configuration file.\n     */\n-   private final String indexDirectory = System.getProperty(\"java.io.tmpdir\") + File.separator + \"LocalCachePerformantConfTest\";\n+   private final String indexDirectory = Paths.get(System.getProperty(\"java.io.tmpdir\"), \"LocalCachePerformantConfTest\").toString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a424bc819f434162fcab3dcc3a56f922cebd662"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDg1MTEwOQ==", "bodyText": "Done", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r400851109", "createdAt": "2020-03-31T11:52:27Z", "author": {"login": "tristantarrant"}, "path": "query/src/test/java/org/infinispan/query/blackbox/LocalCachePerformantConfTest.java", "diffHunk": "@@ -20,7 +21,7 @@\n    /**\n     * The file constant needs to match what's defined in the configuration file.\n     */\n-   private final String indexDirectory = System.getProperty(\"java.io.tmpdir\") + File.separator + \"LocalCachePerformantConfTest\";\n+   private final String indexDirectory = Paths.get(System.getProperty(\"java.io.tmpdir\"), \"LocalCachePerformantConfTest\").toString();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA5MzYxOQ=="}, "originalCommit": {"oid": "9a424bc819f434162fcab3dcc3a56f922cebd662"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxNDIxMzQ2OnYy", "diffSide": "RIGHT", "path": "cli/cli-client/src/main/java/org/infinispan/cli/util/SystemUtils.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwODo1MTo0OVrOGQgJAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwODowNDowM1rOGXUhBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk1Njk5NA==", "bodyText": "configRoot is never null.\nProbably you will get a NullPointerException if System.getenv(\"APPDATA\") returns null.", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r419956994", "createdAt": "2020-05-05T08:51:49Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/java/org/infinispan/cli/util/SystemUtils.java", "diffHunk": "@@ -18,26 +19,26 @@\n     * @return\n     */\n    public static String getAppConfigFolder(String appName) {\n-      String configRoot = null;\n+      Path configRoot = null;\n       String osName = System.getProperty(\"os.name\");\n       if (\"Mac OS X\".equals(osName)) {\n-         configRoot = System.getProperty(\"user.home\") + File.separator + \"Library\" + File.separator + \"Java\";\n+         configRoot = Paths.get(System.getProperty(\"user.home\"), \"Library\", \"Java\");\n       } else if (osName.startsWith(\"Windows\")) {\n          // If on Windows, use the APPDATA environment\n          try {\n-            configRoot = System.getenv(\"APPDATA\");\n+            configRoot = Paths.get(System.getenv(\"APPDATA\"));\n             if (configRoot != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb3a91e59bc4315abf1e1154c91ba3deacd9b2b1"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY4MzE5NQ==", "bodyText": "@tristantarrant ^", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r420683195", "createdAt": "2020-05-06T10:16:06Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/java/org/infinispan/cli/util/SystemUtils.java", "diffHunk": "@@ -18,26 +19,26 @@\n     * @return\n     */\n    public static String getAppConfigFolder(String appName) {\n-      String configRoot = null;\n+      Path configRoot = null;\n       String osName = System.getProperty(\"os.name\");\n       if (\"Mac OS X\".equals(osName)) {\n-         configRoot = System.getProperty(\"user.home\") + File.separator + \"Library\" + File.separator + \"Java\";\n+         configRoot = Paths.get(System.getProperty(\"user.home\"), \"Library\", \"Java\");\n       } else if (osName.startsWith(\"Windows\")) {\n          // If on Windows, use the APPDATA environment\n          try {\n-            configRoot = System.getenv(\"APPDATA\");\n+            configRoot = Paths.get(System.getenv(\"APPDATA\"));\n             if (configRoot != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk1Njk5NA=="}, "originalCommit": {"oid": "fb3a91e59bc4315abf1e1154c91ba3deacd9b2b1"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgxNjg0NA==", "bodyText": "@tristantarrant can you fix this small issue?", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r426816844", "createdAt": "2020-05-18T18:28:44Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/java/org/infinispan/cli/util/SystemUtils.java", "diffHunk": "@@ -18,26 +19,26 @@\n     * @return\n     */\n    public static String getAppConfigFolder(String appName) {\n-      String configRoot = null;\n+      Path configRoot = null;\n       String osName = System.getProperty(\"os.name\");\n       if (\"Mac OS X\".equals(osName)) {\n-         configRoot = System.getProperty(\"user.home\") + File.separator + \"Library\" + File.separator + \"Java\";\n+         configRoot = Paths.get(System.getProperty(\"user.home\"), \"Library\", \"Java\");\n       } else if (osName.startsWith(\"Windows\")) {\n          // If on Windows, use the APPDATA environment\n          try {\n-            configRoot = System.getenv(\"APPDATA\");\n+            configRoot = Paths.get(System.getenv(\"APPDATA\"));\n             if (configRoot != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk1Njk5NA=="}, "originalCommit": {"oid": "fb3a91e59bc4315abf1e1154c91ba3deacd9b2b1"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzEwNjU2Nw==", "bodyText": "Done", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r427106567", "createdAt": "2020-05-19T08:04:03Z", "author": {"login": "tristantarrant"}, "path": "cli/cli-client/src/main/java/org/infinispan/cli/util/SystemUtils.java", "diffHunk": "@@ -18,26 +19,26 @@\n     * @return\n     */\n    public static String getAppConfigFolder(String appName) {\n-      String configRoot = null;\n+      Path configRoot = null;\n       String osName = System.getProperty(\"os.name\");\n       if (\"Mac OS X\".equals(osName)) {\n-         configRoot = System.getProperty(\"user.home\") + File.separator + \"Library\" + File.separator + \"Java\";\n+         configRoot = Paths.get(System.getProperty(\"user.home\"), \"Library\", \"Java\");\n       } else if (osName.startsWith(\"Windows\")) {\n          // If on Windows, use the APPDATA environment\n          try {\n-            configRoot = System.getenv(\"APPDATA\");\n+            configRoot = Paths.get(System.getenv(\"APPDATA\"));\n             if (configRoot != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk1Njk5NA=="}, "originalCommit": {"oid": "fb3a91e59bc4315abf1e1154c91ba3deacd9b2b1"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4354, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}