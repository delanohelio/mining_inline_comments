{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1MjgyMTE0", "number": 8579, "title": "ISPN-12150 Improve CLI server report to work with MacOs", "bodyText": "https://issues.redhat.com/browse/ISPN-12150", "createdAt": "2020-07-22T18:26:33Z", "url": "https://github.com/infinispan/infinispan/pull/8579", "merged": true, "mergeCommit": {"oid": "ffc589fb51747071bc0dc63a9f0a01d721b93b3e"}, "closed": true, "closedAt": "2020-08-10T08:09:42Z", "author": {"login": "gustavolira"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5tMfOAFqTQ1NzY2NjA1NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6ES-RABqjM2MDUzMTk2ODg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3NjY2MDU1", "url": "https://github.com/infinispan/infinispan/pull/8579#pullrequestreview-457666055", "createdAt": "2020-07-29T15:59:07Z", "commit": {"oid": "4fcdc5642750d4f12c74f1ef92bf23216121e174"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNTo1OTowN1rOG4_Sxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNTo1OTowN1rOG4_Sxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxMDQzOQ==", "bodyText": "I'd rather have a switch statement with explicit os-specific calls.", "url": "https://github.com/infinispan/infinispan/pull/8579#discussion_r462410439", "createdAt": "2020-07-29T15:59:07Z", "author": {"login": "tristantarrant"}, "path": "server/runtime/src/main/java/org/infinispan/server/Server.java", "diffHunk": "@@ -554,14 +554,15 @@ public TaskManager getTaskManager() {\n    @Override\n    public CompletionStage<Path> getServerReport() {\n       OS os = OS.getCurrentOs();\n-      if (os != OS.LINUX) {\n+      if (os == OS.WINDOWS) {\n          return CompletableFutures.completedExceptionFuture(log.serverReportUnavailable(os));\n       }\n       long pid = ProcessInfo.getInstance().getPid();\n       Path home = serverHome.toPath();\n       Path root = serverRoot.toPath();\n       ProcessBuilder builder = new ProcessBuilder();\n-      builder.command(\"sh\", \"-c\", home.resolve(\"bin/report.sh\").toString(), Long.toString(pid), root.toString());\n+      String reportFile = String.format(\"bin/%s\", OS.getCurrentOs() == OS.LINUX ? \"report.sh\" : \"report-osx.sh\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4fcdc5642750d4f12c74f1ef92bf23216121e174"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de073aec1538b381dec38cbefa626b6d1932a14d", "author": {"user": {"login": "gustavolira", "name": "Gustavo Lira e Silva"}}, "url": "https://github.com/infinispan/infinispan/commit/de073aec1538b381dec38cbefa626b6d1932a14d", "committedDate": "2020-07-30T18:53:32Z", "message": "ISPN-12150 Improve CLI server report to work with MacOs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4fcdc5642750d4f12c74f1ef92bf23216121e174", "author": {"user": {"login": "gustavolira", "name": "Gustavo Lira e Silva"}}, "url": "https://github.com/infinispan/infinispan/commit/4fcdc5642750d4f12c74f1ef92bf23216121e174", "committedDate": "2020-07-22T18:19:03Z", "message": "ISPN-12150 Improve CLI server report to work with MacOs"}, "afterCommit": {"oid": "de073aec1538b381dec38cbefa626b6d1932a14d", "author": {"user": {"login": "gustavolira", "name": "Gustavo Lira e Silva"}}, "url": "https://github.com/infinispan/infinispan/commit/de073aec1538b381dec38cbefa626b6d1932a14d", "committedDate": "2020-07-30T18:53:32Z", "message": "ISPN-12150 Improve CLI server report to work with MacOs"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 538, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}