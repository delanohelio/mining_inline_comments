{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0MDQ1ODY1", "number": 8529, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxNDoxMzoxN1rOELQ10A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQwOTozODo1MlrOELnTZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMjQ1NzEyOnYy", "diffSide": "RIGHT", "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxNDoxMzoxN1rOGsxp8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwOTowMzoxNFrOG3Z31g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYwNDA4Mw==", "bodyText": "I'm still not convinced this limitation is necessary. What's the real benefit?\nConsider this scenario:\n\nx SCI's auto generated and services created as per the new protostream default behaviour\nA single \"manual\" SCI implementation is created by the user\n\nIn this scenario, with your changes, it's now necessary for the user to manually configure all x SCIs in addition to the manual one.", "url": "https://github.com/infinispan/infinispan/pull/8529#discussion_r449604083", "createdAt": "2020-07-03T14:13:17Z", "author": {"login": "ryanemerson"}, "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "diffHunk": "@@ -95,16 +95,24 @@ void start() {\n             getProtobufMetadataCacheConfig(globalConfiguration).build(),\n             EnumSet.of(InternalCacheRegistry.Flag.USER, InternalCacheRegistry.Flag.PROTECTED, InternalCacheRegistry.Flag.PERSISTENT));\n \n-      processSerializationContextInitializer(ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader()));\n-      processSerializationContextInitializer(globalConfiguration.serialization().contextInitializers());\n+      Collection<SerializationContextInitializer> initializers = globalConfiguration.serialization().contextInitializers();\n+      if (initializers == null || initializers.isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efffcee1318c53a3948826a3be580d7d1b98e731"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg1ODM2OQ==", "bodyText": "That is the intent of this PR, to force the user to either configure all SCIs manually (which is the old backward compat way) or go fully automatic. Manually written SCIs are normally found only in tests or our internal stuff, but the user should never need to do that.\nI propose to not mix the two approaches and if manual configuration of SCIs exists then it should be considered the single source of truth. It will basically be the way to turn off automatic CP scanning for SCIs which is not always the desirable way to do things. The CP might contain more than intended, even conflicting SCIs.  That's the typical case for tests, btw.", "url": "https://github.com/infinispan/infinispan/pull/8529#discussion_r449858369", "createdAt": "2020-07-05T09:57:27Z", "author": {"login": "anistor"}, "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "diffHunk": "@@ -95,16 +95,24 @@ void start() {\n             getProtobufMetadataCacheConfig(globalConfiguration).build(),\n             EnumSet.of(InternalCacheRegistry.Flag.USER, InternalCacheRegistry.Flag.PROTECTED, InternalCacheRegistry.Flag.PERSISTENT));\n \n-      processSerializationContextInitializer(ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader()));\n-      processSerializationContextInitializer(globalConfiguration.serialization().contextInitializers());\n+      Collection<SerializationContextInitializer> initializers = globalConfiguration.serialization().contextInitializers();\n+      if (initializers == null || initializers.isEmpty()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYwNDA4Mw=="}, "originalCommit": {"oid": "efffcee1318c53a3948826a3be580d7d1b98e731"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDA5ODM2Nw==", "bodyText": "Manually written SCIs are normally found only in tests or our internal stuff, but the user should never need to do that.\n\nUnfortunately manual SCIs are still the only way to configure manual marshallers for classes outside of the users control, e.g. UUID. This will remain the case until we have a solution for IPROTO-137.", "url": "https://github.com/infinispan/infinispan/pull/8529#discussion_r450098367", "createdAt": "2020-07-06T09:28:56Z", "author": {"login": "ryanemerson"}, "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "diffHunk": "@@ -95,16 +95,24 @@ void start() {\n             getProtobufMetadataCacheConfig(globalConfiguration).build(),\n             EnumSet.of(InternalCacheRegistry.Flag.USER, InternalCacheRegistry.Flag.PROTECTED, InternalCacheRegistry.Flag.PERSISTENT));\n \n-      processSerializationContextInitializer(ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader()));\n-      processSerializationContextInitializer(globalConfiguration.serialization().contextInitializers());\n+      Collection<SerializationContextInitializer> initializers = globalConfiguration.serialization().contextInitializers();\n+      if (initializers == null || initializers.isEmpty()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYwNDA4Mw=="}, "originalCommit": {"oid": "efffcee1318c53a3948826a3be580d7d1b98e731"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDUwOTI0Mg==", "bodyText": "@ryanemerson with this change we can continue to provide manually written SCIs, in both tests and production code, but we'll have to provide a service file for them if we don't plan to add them manually. So what is different ? :)", "url": "https://github.com/infinispan/infinispan/pull/8529#discussion_r460509242", "createdAt": "2020-07-26T10:29:09Z", "author": {"login": "anistor"}, "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "diffHunk": "@@ -95,16 +95,24 @@ void start() {\n             getProtobufMetadataCacheConfig(globalConfiguration).build(),\n             EnumSet.of(InternalCacheRegistry.Flag.USER, InternalCacheRegistry.Flag.PROTECTED, InternalCacheRegistry.Flag.PERSISTENT));\n \n-      processSerializationContextInitializer(ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader()));\n-      processSerializationContextInitializer(globalConfiguration.serialization().contextInitializers());\n+      Collection<SerializationContextInitializer> initializers = globalConfiguration.serialization().contextInitializers();\n+      if (initializers == null || initializers.isEmpty()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYwNDA4Mw=="}, "originalCommit": {"oid": "efffcee1318c53a3948826a3be580d7d1b98e731"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc0ODc1OA==", "bodyText": "Ok that's a fair point, I didn't really think about the user defining a service for the manual implementations. The only thing missing now, is that this behaviour needs to be documented \ud83d\ude42", "url": "https://github.com/infinispan/infinispan/pull/8529#discussion_r460748758", "createdAt": "2020-07-27T09:03:14Z", "author": {"login": "ryanemerson"}, "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "diffHunk": "@@ -95,16 +95,24 @@ void start() {\n             getProtobufMetadataCacheConfig(globalConfiguration).build(),\n             EnumSet.of(InternalCacheRegistry.Flag.USER, InternalCacheRegistry.Flag.PROTECTED, InternalCacheRegistry.Flag.PERSISTENT));\n \n-      processSerializationContextInitializer(ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader()));\n-      processSerializationContextInitializer(globalConfiguration.serialization().contextInitializers());\n+      Collection<SerializationContextInitializer> initializers = globalConfiguration.serialization().contextInitializers();\n+      if (initializers == null || initializers.isEmpty()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYwNDA4Mw=="}, "originalCommit": {"oid": "efffcee1318c53a3948826a3be580d7d1b98e731"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMjQ1ODcwOnYy", "diffSide": "RIGHT", "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxNDoxMzo1MlrOGsxq5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNlQxMTowNToxN1rOG3LeKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYwNDMyNg==", "bodyText": "Should the logs be info?", "url": "https://github.com/infinispan/infinispan/pull/8529#discussion_r449604326", "createdAt": "2020-07-03T14:13:52Z", "author": {"login": "ryanemerson"}, "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "diffHunk": "@@ -95,16 +95,24 @@ void start() {\n             getProtobufMetadataCacheConfig(globalConfiguration).build(),\n             EnumSet.of(InternalCacheRegistry.Flag.USER, InternalCacheRegistry.Flag.PROTECTED, InternalCacheRegistry.Flag.PERSISTENT));\n \n-      processSerializationContextInitializer(ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader()));\n-      processSerializationContextInitializer(globalConfiguration.serialization().contextInitializers());\n+      Collection<SerializationContextInitializer> initializers = globalConfiguration.serialization().contextInitializers();\n+      if (initializers == null || initializers.isEmpty()) {\n+         initializers = ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader());\n+      }\n+      processSerializationContextInitializer(initializers);\n       processProtostreamSerializationContextInitializers(globalConfiguration.classLoader());\n    }\n \n+   /**\n+    * @deprecated Since 10.\n+    */\n+   @Deprecated\n    private void processProtostreamSerializationContextInitializers(ClassLoader classLoader) {\n       Collection<ProtostreamSerializationContextInitializer> initializers =\n             ServiceFinder.load(ProtostreamSerializationContextInitializer.class, classLoader);\n \n       for (ProtostreamSerializationContextInitializer psci : initializers) {\n+         log.debugf(\"Registering ProtostreamSerializationContextInitializer %s\", psci.getClass().getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efffcee1318c53a3948826a3be580d7d1b98e731"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg1NzY3NQ==", "bodyText": "That was my feeling also in the beginning. I can make them INFO and i18n them, unless we think this is too much noise in the log during boot.", "url": "https://github.com/infinispan/infinispan/pull/8529#discussion_r449857675", "createdAt": "2020-07-05T09:49:28Z", "author": {"login": "anistor"}, "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "diffHunk": "@@ -95,16 +95,24 @@ void start() {\n             getProtobufMetadataCacheConfig(globalConfiguration).build(),\n             EnumSet.of(InternalCacheRegistry.Flag.USER, InternalCacheRegistry.Flag.PROTECTED, InternalCacheRegistry.Flag.PERSISTENT));\n \n-      processSerializationContextInitializer(ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader()));\n-      processSerializationContextInitializer(globalConfiguration.serialization().contextInitializers());\n+      Collection<SerializationContextInitializer> initializers = globalConfiguration.serialization().contextInitializers();\n+      if (initializers == null || initializers.isEmpty()) {\n+         initializers = ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader());\n+      }\n+      processSerializationContextInitializer(initializers);\n       processProtostreamSerializationContextInitializers(globalConfiguration.classLoader());\n    }\n \n+   /**\n+    * @deprecated Since 10.\n+    */\n+   @Deprecated\n    private void processProtostreamSerializationContextInitializers(ClassLoader classLoader) {\n       Collection<ProtostreamSerializationContextInitializer> initializers =\n             ServiceFinder.load(ProtostreamSerializationContextInitializer.class, classLoader);\n \n       for (ProtostreamSerializationContextInitializer psci : initializers) {\n+         log.debugf(\"Registering ProtostreamSerializationContextInitializer %s\", psci.getClass().getName());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYwNDMyNg=="}, "originalCommit": {"oid": "efffcee1318c53a3948826a3be580d7d1b98e731"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDA5OTM4NQ==", "bodyText": "+1 for Info and i18n. I think the benefit of easy debugging will outweigh the damage of a little noise.", "url": "https://github.com/infinispan/infinispan/pull/8529#discussion_r450099385", "createdAt": "2020-07-06T09:30:39Z", "author": {"login": "ryanemerson"}, "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "diffHunk": "@@ -95,16 +95,24 @@ void start() {\n             getProtobufMetadataCacheConfig(globalConfiguration).build(),\n             EnumSet.of(InternalCacheRegistry.Flag.USER, InternalCacheRegistry.Flag.PROTECTED, InternalCacheRegistry.Flag.PERSISTENT));\n \n-      processSerializationContextInitializer(ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader()));\n-      processSerializationContextInitializer(globalConfiguration.serialization().contextInitializers());\n+      Collection<SerializationContextInitializer> initializers = globalConfiguration.serialization().contextInitializers();\n+      if (initializers == null || initializers.isEmpty()) {\n+         initializers = ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader());\n+      }\n+      processSerializationContextInitializer(initializers);\n       processProtostreamSerializationContextInitializers(globalConfiguration.classLoader());\n    }\n \n+   /**\n+    * @deprecated Since 10.\n+    */\n+   @Deprecated\n    private void processProtostreamSerializationContextInitializers(ClassLoader classLoader) {\n       Collection<ProtostreamSerializationContextInitializer> initializers =\n             ServiceFinder.load(ProtostreamSerializationContextInitializer.class, classLoader);\n \n       for (ProtostreamSerializationContextInitializer psci : initializers) {\n+         log.debugf(\"Registering ProtostreamSerializationContextInitializer %s\", psci.getClass().getName());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYwNDMyNg=="}, "originalCommit": {"oid": "efffcee1318c53a3948826a3be580d7d1b98e731"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDUxMjgxMA==", "bodyText": "done", "url": "https://github.com/infinispan/infinispan/pull/8529#discussion_r460512810", "createdAt": "2020-07-26T11:05:17Z", "author": {"login": "anistor"}, "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "diffHunk": "@@ -95,16 +95,24 @@ void start() {\n             getProtobufMetadataCacheConfig(globalConfiguration).build(),\n             EnumSet.of(InternalCacheRegistry.Flag.USER, InternalCacheRegistry.Flag.PROTECTED, InternalCacheRegistry.Flag.PERSISTENT));\n \n-      processSerializationContextInitializer(ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader()));\n-      processSerializationContextInitializer(globalConfiguration.serialization().contextInitializers());\n+      Collection<SerializationContextInitializer> initializers = globalConfiguration.serialization().contextInitializers();\n+      if (initializers == null || initializers.isEmpty()) {\n+         initializers = ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader());\n+      }\n+      processSerializationContextInitializer(initializers);\n       processProtostreamSerializationContextInitializers(globalConfiguration.classLoader());\n    }\n \n+   /**\n+    * @deprecated Since 10.\n+    */\n+   @Deprecated\n    private void processProtostreamSerializationContextInitializers(ClassLoader classLoader) {\n       Collection<ProtostreamSerializationContextInitializer> initializers =\n             ServiceFinder.load(ProtostreamSerializationContextInitializer.class, classLoader);\n \n       for (ProtostreamSerializationContextInitializer psci : initializers) {\n+         log.debugf(\"Registering ProtostreamSerializationContextInitializer %s\", psci.getClass().getName());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYwNDMyNg=="}, "originalCommit": {"oid": "efffcee1318c53a3948826a3be580d7d1b98e731"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwNjExMzA5OnYy", "diffSide": "RIGHT", "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQwOTozMTozMVrOGtP6sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQyMDowMjozOVrOG3HHHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDA5OTg4OQ==", "bodyText": "This was deprecated in 10.x, I think we can remove this now along with ProtostreamSerializationContextInitializer", "url": "https://github.com/infinispan/infinispan/pull/8529#discussion_r450099889", "createdAt": "2020-07-06T09:31:31Z", "author": {"login": "ryanemerson"}, "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "diffHunk": "@@ -95,16 +95,24 @@ void start() {\n             getProtobufMetadataCacheConfig(globalConfiguration).build(),\n             EnumSet.of(InternalCacheRegistry.Flag.USER, InternalCacheRegistry.Flag.PROTECTED, InternalCacheRegistry.Flag.PERSISTENT));\n \n-      processSerializationContextInitializer(ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader()));\n-      processSerializationContextInitializer(globalConfiguration.serialization().contextInitializers());\n+      Collection<SerializationContextInitializer> initializers = globalConfiguration.serialization().contextInitializers();\n+      if (initializers == null || initializers.isEmpty()) {\n+         initializers = ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader());\n+      }\n+      processSerializationContextInitializer(initializers);\n       processProtostreamSerializationContextInitializers(globalConfiguration.classLoader());\n    }\n \n+   /**\n+    * @deprecated Since 10.\n+    */\n+   @Deprecated\n    private void processProtostreamSerializationContextInitializers(ClassLoader classLoader) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efffcee1318c53a3948826a3be580d7d1b98e731"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQ0MTM3NA==", "bodyText": "Done", "url": "https://github.com/infinispan/infinispan/pull/8529#discussion_r460441374", "createdAt": "2020-07-25T20:02:39Z", "author": {"login": "anistor"}, "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "diffHunk": "@@ -95,16 +95,24 @@ void start() {\n             getProtobufMetadataCacheConfig(globalConfiguration).build(),\n             EnumSet.of(InternalCacheRegistry.Flag.USER, InternalCacheRegistry.Flag.PROTECTED, InternalCacheRegistry.Flag.PERSISTENT));\n \n-      processSerializationContextInitializer(ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader()));\n-      processSerializationContextInitializer(globalConfiguration.serialization().contextInitializers());\n+      Collection<SerializationContextInitializer> initializers = globalConfiguration.serialization().contextInitializers();\n+      if (initializers == null || initializers.isEmpty()) {\n+         initializers = ServiceFinder.load(SerializationContextInitializer.class, globalConfiguration.classLoader());\n+      }\n+      processSerializationContextInitializer(initializers);\n       processProtostreamSerializationContextInitializers(globalConfiguration.classLoader());\n    }\n \n+   /**\n+    * @deprecated Since 10.\n+    */\n+   @Deprecated\n    private void processProtostreamSerializationContextInitializers(ClassLoader classLoader) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDA5OTg4OQ=="}, "originalCommit": {"oid": "efffcee1318c53a3948826a3be580d7d1b98e731"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwNjEzNzMzOnYy", "diffSide": "RIGHT", "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQwOTozODo1MlrOGtQJ-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQwOTozODo1MlrOGtQJ-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDEwMzgwMA==", "bodyText": "I have found a bigger problem (not introduced by this PR). We're currently not registering the loaded SCIs with the SerializationContextRegistry ISPN-12093", "url": "https://github.com/infinispan/infinispan/pull/8529#discussion_r450103800", "createdAt": "2020-07-06T09:38:52Z", "author": {"login": "ryanemerson"}, "path": "remote-query/remote-query-server/src/main/java/org/infinispan/query/remote/impl/ProtobufMetadataManagerImpl.java", "diffHunk": "@@ -116,6 +124,7 @@ private void processProtostreamSerializationContextInitializers(ClassLoader clas\n    private void processSerializationContextInitializer(Iterable<SerializationContextInitializer> initializers) {\n       if (initializers != null) {\n          for (SerializationContextInitializer sci : initializers) {\n+            log.debugf(\"Registering SerializationContextInitializer %s\", sci.getClass().getName());\n             try {\n                sci.registerSchema(serCtx);\n                sci.registerMarshallers(serCtx);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efffcee1318c53a3948826a3be580d7d1b98e731"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3974, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}