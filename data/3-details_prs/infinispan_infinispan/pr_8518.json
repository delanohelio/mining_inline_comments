{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxOTUxMDg0", "number": 8518, "title": "ISPN-12067 HTTP/2 framing error for invalid requests", "bodyText": "https://issues.redhat.com/browse/ISPN-12067", "createdAt": "2020-06-30T11:01:50Z", "url": "https://github.com/infinispan/infinispan/pull/8518", "merged": true, "mergeCommit": {"oid": "47059badd0838a989da20a4b4f18b0b7f559fad7"}, "closed": true, "closedAt": "2020-06-30T14:11:37Z", "author": {"login": "gustavonalle"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwTdEwAH2gAyNDQxOTUxMDg0OmU1MjE2MTM1NmYzNDA0OTJkNWMzOGEzYTljYmUxNmY3OTIxMGI0OGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwVv6NgFqTQ0MDAxOTY2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e52161356f340492d5c38a3a9cbe16f79210b48d", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/e52161356f340492d5c38a3a9cbe16f79210b48d", "committedDate": "2020-06-30T10:54:24Z", "message": "ISPN-12067 Reproducer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9362633c04c40f186f6c66c0d36ec8092faf5956", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/9362633c04c40f186f6c66c0d36ec8092faf5956", "committedDate": "2020-06-30T11:00:04Z", "message": "ISPN-12067 HTTP/2 framing error for invalid requests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5OTY1MzYw", "url": "https://github.com/infinispan/infinispan/pull/8518#pullrequestreview-439965360", "createdAt": "2020-06-30T12:31:57Z", "commit": {"oid": "9362633c04c40f186f6c66c0d36ec8092faf5956"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxMjozMTo1N1rOGq6GQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxMjozMTo1N1rOGq6GQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzY0NTI0OQ==", "bodyText": "shouldn't use HTTP2?", "url": "https://github.com/infinispan/infinispan/pull/8518#discussion_r447645249", "createdAt": "2020-06-30T12:31:57Z", "author": {"login": "pruivo"}, "path": "server/rest/src/test/java/org/infinispan/rest/Http2Test.java", "diffHunk": "@@ -68,6 +69,28 @@ public void shouldUseHTTP2WithPriorKnowledge() throws Exception {\n       clearTextUpgrade(true);\n    }\n \n+   @Test\n+   public void shouldReportErrorCorrectly() throws Exception {\n+      restServer = RestServerHelper.defaultRestServer()\n+            .withKeyStore(KEY_STORE_PATH, \"secret\", \"pkcs12\")\n+            .withTrustStore(KEY_STORE_PATH, \"secret\", \"pkcs12\")\n+            .start(TestResourceTracker.getCurrentTestShortName());\n+\n+      RestClientConfigurationBuilder config = new RestClientConfigurationBuilder();\n+\n+      config.addServer().host(restServer.getHost()).port(restServer.getPort())\n+            .protocol(HTTP_20).priorKnowledge(true)\n+            .security().ssl().enable()\n+            .trustStoreFileName(KEY_STORE_PATH).trustStorePassword(\"secret\".toCharArray()).trustStoreType(\"pkcs12\")\n+            .keyStoreFileName(KEY_STORE_PATH).keyStorePassword(\"secret\".toCharArray()).keyStoreType(\"pkcs12\");\n+\n+      client = NettyHttpClient.forConfiguration(config.build());\n+\n+      FullHttpRequest getRequest = new DefaultFullHttpRequest(HTTP_1_1, GET, \"invalid\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9362633c04c40f186f6c66c0d36ec8092faf5956"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMDE5NjY5", "url": "https://github.com/infinispan/infinispan/pull/8518#pullrequestreview-440019669", "createdAt": "2020-06-30T13:34:47Z", "commit": {"oid": "9362633c04c40f186f6c66c0d36ec8092faf5956"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 487, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}