{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwOTAyNTc4", "number": 8815, "title": "ISPN-11797 Introduce strong typed indexing configuration", "bodyText": "https://issues.redhat.com/browse/ISPN-11797\n\n Add config for index storage\n Add index reader attributes\n Add index writer attributes\n Deprecate property k/v based config and document migration", "createdAt": "2020-10-27T16:52:56Z", "url": "https://github.com/infinispan/infinispan/pull/8815", "merged": true, "mergeCommit": {"oid": "73af0dde6038c047109a097e0de4a628a0486c21"}, "closed": true, "closedAt": "2020-11-27T14:54:22Z", "author": {"login": "gustavonalle"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXSM-AgBqjM5MzYzMzYyODQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgn0XBAH2gAyNTEwOTAyNTc4OjAzYTIyMTgyMzI5MDMzNzhmOGUzZTIwZDFkNzgwZDhjZTU5ZTFjMDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb3c24b15150fd4dcee2d14ca7abe0c50878fc8d", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/fb3c24b15150fd4dcee2d14ca7abe0c50878fc8d", "committedDate": "2020-10-27T16:20:52Z", "message": "ISPN-11797 Add storage configuration properties"}, "afterCommit": {"oid": "1a9ec68932cbe04ca7b86eefb02d56a96bdc999b", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/1a9ec68932cbe04ca7b86eefb02d56a96bdc999b", "committedDate": "2020-10-29T13:29:39Z", "message": "ISPN-11797 Add storage configuration properties"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1a9ec68932cbe04ca7b86eefb02d56a96bdc999b", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/1a9ec68932cbe04ca7b86eefb02d56a96bdc999b", "committedDate": "2020-10-29T13:29:39Z", "message": "ISPN-11797 Add storage configuration properties"}, "afterCommit": {"oid": "4f55884a5edffb72e3b54d872d4a3c620c357451", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/4f55884a5edffb72e3b54d872d4a3c620c357451", "committedDate": "2020-10-29T20:47:23Z", "message": "ISPN-11797 Add index reader configuration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4f55884a5edffb72e3b54d872d4a3c620c357451", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/4f55884a5edffb72e3b54d872d4a3c620c357451", "committedDate": "2020-10-29T20:47:23Z", "message": "ISPN-11797 Add index reader configuration"}, "afterCommit": {"oid": "d26c45b8c7264b5af5b1defded614c9d3b6f7a68", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/d26c45b8c7264b5af5b1defded614c9d3b6f7a68", "committedDate": "2020-11-06T13:28:00Z", "message": "ISPN-11797 Add index writer attributes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a41db37581e00d4542bf326bc3a03489df868047", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/a41db37581e00d4542bf326bc3a03489df868047", "committedDate": "2020-11-10T14:29:02Z", "message": "test"}, "afterCommit": {"oid": "f668ba8d74382c472dcc0a06552849dc60d57b99", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/f668ba8d74382c472dcc0a06552849dc60d57b99", "committedDate": "2020-11-10T14:22:46Z", "message": "ISPN-11797 Introduce strong typed indexing configuration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NDQ4OTkz", "url": "https://github.com/infinispan/infinispan/pull/8815#pullrequestreview-536448993", "createdAt": "2020-11-23T12:59:31Z", "commit": {"oid": "f668ba8d74382c472dcc0a06552849dc60d57b99"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxMjo1OTozMlrOH4MZPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxMjo1OTozMlrOH4MZPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODY4NTM3Mg==", "bodyText": "FWIW, constants are available in Hibernate Search: see org.hibernate.search.backend.lucene.cfg.LuceneIndexSettings.\nSimilarly, for backend-level settings: org.hibernate.search.backend.lucene.cfg.LuceneBackendSettings.", "url": "https://github.com/infinispan/infinispan/pull/8815#discussion_r528685372", "createdAt": "2020-11-23T12:59:32Z", "author": {"login": "yrodiere"}, "path": "core/src/main/java/org/infinispan/configuration/cache/IndexMergeConfigurationBuilder.java", "diffHunk": "@@ -0,0 +1,167 @@\n+package org.infinispan.configuration.cache;\n+\n+\n+import static org.infinispan.configuration.cache.IndexMergeConfiguration.CALIBRATE_BY_DELETES;\n+import static org.infinispan.configuration.cache.IndexMergeConfiguration.FACTOR;\n+import static org.infinispan.configuration.cache.IndexMergeConfiguration.MAX_DOCS;\n+import static org.infinispan.configuration.cache.IndexMergeConfiguration.MAX_FORCED_SIZE;\n+import static org.infinispan.configuration.cache.IndexMergeConfiguration.MAX_SIZE;\n+import static org.infinispan.configuration.cache.IndexMergeConfiguration.MIN_SIZE;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.infinispan.commons.configuration.Builder;\n+import org.infinispan.commons.configuration.ConfigurationBuilderInfo;\n+import org.infinispan.commons.configuration.attributes.Attribute;\n+import org.infinispan.commons.configuration.attributes.AttributeSet;\n+import org.infinispan.commons.configuration.elements.ElementDefinition;\n+import org.infinispan.configuration.global.GlobalConfiguration;\n+\n+/**\n+ * @since 12.0\n+ */\n+public class IndexMergeConfigurationBuilder extends AbstractIndexingConfigurationChildBuilder\n+      implements Builder<IndexMergeConfiguration>, ConfigurationBuilderInfo {\n+\n+   private static final String KEY_PREFIX = \"hibernate.search.backend.io.merge\";\n+   private static final String MAX_DOCS_KEY = KEY_PREFIX + \".max_docs\";\n+   private static final String FACTOR_KEY = KEY_PREFIX + \".factor\";\n+   private static final String MIN_SIZE_KEY = KEY_PREFIX + \".min_size\";\n+   private static final String MAX_SIZE_KEY = KEY_PREFIX + \".max_size\";\n+   private static final String MAX_FORCED_SIZE_KEY = KEY_PREFIX + \".max_forced_size\";\n+   private static final String CALIBRATE_BY_DELETES_KEY = KEY_PREFIX + \".calibrate_by_deletes\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f668ba8d74382c472dcc0a06552849dc60d57b99"}, "originalPosition": 33}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f668ba8d74382c472dcc0a06552849dc60d57b99", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/f668ba8d74382c472dcc0a06552849dc60d57b99", "committedDate": "2020-11-10T14:22:46Z", "message": "ISPN-11797 Introduce strong typed indexing configuration"}, "afterCommit": {"oid": "bafaf419007a77904384b2aa9d06ee055c05f24f", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/bafaf419007a77904384b2aa9d06ee055c05f24f", "committedDate": "2020-11-24T09:27:16Z", "message": "ISPN-11797 Introduce strong typed indexing configuration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e658f1f3af0651ac4777319ca9ef3c57f79e264", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/9e658f1f3af0651ac4777319ca9ef3c57f79e264", "committedDate": "2020-11-27T10:15:40Z", "message": "ISPN-11797 Introduce strong typed indexing configuration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bafaf419007a77904384b2aa9d06ee055c05f24f", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/bafaf419007a77904384b2aa9d06ee055c05f24f", "committedDate": "2020-11-24T09:27:16Z", "message": "ISPN-11797 Introduce strong typed indexing configuration"}, "afterCommit": {"oid": "9e658f1f3af0651ac4777319ca9ef3c57f79e264", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/9e658f1f3af0651ac4777319ca9ef3c57f79e264", "committedDate": "2020-11-27T10:15:40Z", "message": "ISPN-11797 Introduce strong typed indexing configuration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5OTEzNDAx", "url": "https://github.com/infinispan/infinispan/pull/8815#pullrequestreview-539913401", "createdAt": "2020-11-27T11:37:17Z", "commit": {"oid": "9e658f1f3af0651ac4777319ca9ef3c57f79e264"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMTozNzoxN1rOH67Nkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMTozNzoxN1rOH67Nkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU0OTU4Nw==", "bodyText": "s/internal/interval/", "url": "https://github.com/infinispan/infinispan/pull/8815#discussion_r531549587", "createdAt": "2020-11-27T11:37:17Z", "author": {"login": "tristantarrant"}, "path": "core/src/main/resources/schema/infinispan-config-12.0.xsd", "diffHunk": "@@ -2296,6 +2318,171 @@\n     </xs:restriction>\n   </xs:simpleType>\n \n+  <xs:simpleType name=\"index-storage\">\n+    <xs:restriction base=\"xs:token\">\n+      <xs:enumeration value=\"filesystem\">\n+        <xs:annotation>\n+          <xs:documentation>Local filesystem index storage. This is the default.</xs:documentation>\n+        </xs:annotation>\n+      </xs:enumeration>\n+      <xs:enumeration value=\"local-heap\">\n+        <xs:annotation>\n+          <xs:documentation>JVM heap index storage, not persisted between restarts. Only suitable for small datasets\n+            with low concurrency.\n+          </xs:documentation>\n+        </xs:annotation>\n+      </xs:enumeration>\n+    </xs:restriction>\n+  </xs:simpleType>\n+\n+  <xs:complexType name=\"index-reader\">\n+    <xs:attribute name=\"refresh-interval\" type=\"xs:long\" default=\"0\">\n+      <xs:annotation>\n+        <xs:documentation>\n+          Advanced: Defines the internal in milliseconds to reopen the index reader.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e658f1f3af0651ac4777319ca9ef3c57f79e264"}, "originalPosition": 61}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03a2218232903378f8e3e20d1d780d8ce59e1c05", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/03a2218232903378f8e3e20d1d780d8ce59e1c05", "committedDate": "2020-11-27T13:46:18Z", "message": "ISPN-11797 Fixed typo"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 262, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}