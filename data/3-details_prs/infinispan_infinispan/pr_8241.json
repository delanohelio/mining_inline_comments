{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4NjExNjUw", "number": 8241, "title": "ISPN-11709 The MassIndexer reports wrong status for local caches", "bodyText": "https://issues.redhat.com/browse/ISPN-11709", "createdAt": "2020-04-24T15:16:23Z", "url": "https://github.com/infinispan/infinispan/pull/8241", "merged": true, "mergeCommit": {"oid": "72f2b412e8c2f267755a97394c54b6a61a49d9fb"}, "closed": true, "closedAt": "2020-04-29T10:25:08Z", "author": {"login": "gustavonalle"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcazKmbgFqTQwMDA0NjQ5MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABccV33HgFqTQwMjUzOTg3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMDQ2NDkx", "url": "https://github.com/infinispan/infinispan/pull/8241#pullrequestreview-400046491", "createdAt": "2020-04-24T15:24:51Z", "commit": {"oid": "97cefedcd038ceb89d86426b37a4f8f01db7a590"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNToyNDo1MVrOGLc-CA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNToyNDo1MVrOGLc-CA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY2MjE1Mg==", "bodyText": "Does flushIfNeeded not block?", "url": "https://github.com/infinispan/infinispan/pull/8241#discussion_r414662152", "createdAt": "2020-04-24T15:24:51Z", "author": {"login": "wburns"}, "path": "query/src/main/java/org/infinispan/query/impl/massindex/DistributedExecutorMassIndexer.java", "diffHunk": "@@ -134,7 +129,7 @@ public boolean isRunning() {\n             IndexWorker indexWork = new IndexWorker(cache.getName(), indexedTypes, skipIndex, null);\n             futures.add(executor.submitConsumer(indexWork, TRI_CONSUMER));\n             CompletableFuture<Void> compositeFuture = CompletableFuture.allOf(futures.toArray(new CompletableFuture[0]));\n-            return compositeFuture.whenCompleteAsync(flushIfNeeded, localExecutor);\n+            return compositeFuture.whenComplete(flushIfNeeded);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97cefedcd038ceb89d86426b37a4f8f01db7a590"}, "originalPosition": 38}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "97cefedcd038ceb89d86426b37a4f8f01db7a590", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/97cefedcd038ceb89d86426b37a4f8f01db7a590", "committedDate": "2020-04-24T15:15:06Z", "message": "ISPN-11709 The MassIndexer reports wrong status for local caches"}, "afterCommit": {"oid": "d0a1069289f0c502fb6ee2717a6c28e57997344d", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/d0a1069289f0c502fb6ee2717a6c28e57997344d", "committedDate": "2020-04-24T16:37:57Z", "message": "ISPN-11709 The MassIndexer reports wrong status for local caches"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "070181dcf51ab1976b340500a6e5a2ffbbb148c5", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/070181dcf51ab1976b340500a6e5a2ffbbb148c5", "committedDate": "2020-04-27T07:19:35Z", "message": "ISPN-11709 The MassIndexer reports wrong status for local caches"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0a1069289f0c502fb6ee2717a6c28e57997344d", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/d0a1069289f0c502fb6ee2717a6c28e57997344d", "committedDate": "2020-04-24T16:37:57Z", "message": "ISPN-11709 The MassIndexer reports wrong status for local caches"}, "afterCommit": {"oid": "070181dcf51ab1976b340500a6e5a2ffbbb148c5", "author": {"user": {"login": "gustavonalle", "name": "Gustavo"}}, "url": "https://github.com/infinispan/infinispan/commit/070181dcf51ab1976b340500a6e5a2ffbbb148c5", "committedDate": "2020-04-27T07:19:35Z", "message": "ISPN-11709 The MassIndexer reports wrong status for local caches"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNTM5ODc2", "url": "https://github.com/infinispan/infinispan/pull/8241#pullrequestreview-402539876", "createdAt": "2020-04-29T10:24:59Z", "commit": {"oid": "070181dcf51ab1976b340500a6e5a2ffbbb148c5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 912, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}