{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyOTM0NDcw", "number": 8274, "title": "ISPN-11706 Use XidImpl internally", "bodyText": "https://issues.redhat.com/browse/ISPN-11706", "createdAt": "2020-05-04T12:55:02Z", "url": "https://github.com/infinispan/infinispan/pull/8274", "merged": true, "mergeCommit": {"oid": "70703741016dc2680adae594f99981a8dce604df"}, "closed": true, "closedAt": "2020-05-05T14:59:22Z", "author": {"login": "pruivo"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceDwNbgFqTQwNTIzNzY2Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcemSDHgFqTQwNjQ5MDg4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MjM3NjYy", "url": "https://github.com/infinispan/infinispan/pull/8274#pullrequestreview-405237662", "createdAt": "2020-05-04T18:26:11Z", "commit": {"oid": "1c1295ef13ee8e336f17572f1a799cd564c7f247"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODoyNjoxMVrOGQMq_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODoyNjoxMVrOGQMq_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzODAxMw==", "bodyText": "why comment instead of remove ?", "url": "https://github.com/infinispan/infinispan/pull/8274#discussion_r419638013", "createdAt": "2020-05-04T18:26:11Z", "author": {"login": "karesti"}, "path": "commons/all/src/main/java/org/infinispan/commons/marshall/Ids.java", "diffHunk": "@@ -50,7 +50,7 @@\n    int XID_DEADLOCK_DETECTING_GLOBAL_TRANSACTION = 33;\n    int XID_GLOBAL_TRANSACTION = 34;\n \n-   int IN_DOUBT_TX_INFO = 35;\n+   //int IN_DOUBT_TX_INFO = 35;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c1295ef13ee8e336f17572f1a799cd564c7f247"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MjQyNDkz", "url": "https://github.com/infinispan/infinispan/pull/8274#pullrequestreview-405242493", "createdAt": "2020-05-04T18:32:58Z", "commit": {"oid": "1c1295ef13ee8e336f17572f1a799cd564c7f247"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODozMjo1OFrOGQM7Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODozMjo1OFrOGQM7Rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTY0MjE4Mg==", "bodyText": "could this code be handled inside the StatusTranslator to avoid duplication ? just a suggestion", "url": "https://github.com/infinispan/infinispan/pull/8274#discussion_r419642182", "createdAt": "2020-05-04T18:32:58Z", "author": {"login": "karesti"}, "path": "hibernate/cache-v51/src/test/java/org/infinispan/test/hibernate/cache/v51/util/BatchModeTransactionCoordinator.java", "diffHunk": "@@ -64,19 +64,15 @@ public void rollback() {\n \n \t\t@Override\n \t\tpublic TransactionStatus getStatus() {\n-\t\t\ttry {\n-            EmbeddedTransaction transaction = tm.getTransaction();\n-\t\t\t\treturn transaction == null ? TransactionStatus.NOT_ACTIVE : StatusTranslator.translate(transaction.getStatus());\n-\t\t\t} catch (SystemException e) {\n-\t\t\t\tthrow new RuntimeException(e);\n-\t\t\t}\n+\t\t\tEmbeddedTransaction transaction = tm.getTransaction();\n+\t\t\treturn transaction == null ? TransactionStatus.NOT_ACTIVE : StatusTranslator.translate(transaction.getStatus());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c1295ef13ee8e336f17572f1a799cd564c7f247"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MjQ0NTgw", "url": "https://github.com/infinispan/infinispan/pull/8274#pullrequestreview-405244580", "createdAt": "2020-05-04T18:35:53Z", "commit": {"oid": "1c1295ef13ee8e336f17572f1a799cd564c7f247"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1c1295ef13ee8e336f17572f1a799cd564c7f247", "author": {"user": {"login": "pruivo", "name": "Pedro Ruivo"}}, "url": "https://github.com/infinispan/infinispan/commit/1c1295ef13ee8e336f17572f1a799cd564c7f247", "committedDate": "2020-05-04T12:52:06Z", "message": "ISPN-11706 Use XidImpl internally"}, "afterCommit": {"oid": "f887fea14534139606d449a1b75a342cbad38b86", "author": {"user": {"login": "pruivo", "name": "Pedro Ruivo"}}, "url": "https://github.com/infinispan/infinispan/commit/f887fea14534139606d449a1b75a342cbad38b86", "committedDate": "2020-05-05T09:27:03Z", "message": "ISPN-11706 Use XidImpl internally"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f50eacd004827c7d368d53bd3984f10395c2932", "author": {"user": {"login": "pruivo", "name": "Pedro Ruivo"}}, "url": "https://github.com/infinispan/infinispan/commit/7f50eacd004827c7d368d53bd3984f10395c2932", "committedDate": "2020-05-05T12:40:34Z", "message": "ISPN-11706 Use XidImpl internally"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f887fea14534139606d449a1b75a342cbad38b86", "author": {"user": {"login": "pruivo", "name": "Pedro Ruivo"}}, "url": "https://github.com/infinispan/infinispan/commit/f887fea14534139606d449a1b75a342cbad38b86", "committedDate": "2020-05-05T09:27:03Z", "message": "ISPN-11706 Use XidImpl internally"}, "afterCommit": {"oid": "7f50eacd004827c7d368d53bd3984f10395c2932", "author": {"user": {"login": "pruivo", "name": "Pedro Ruivo"}}, "url": "https://github.com/infinispan/infinispan/commit/7f50eacd004827c7d368d53bd3984f10395c2932", "committedDate": "2020-05-05T12:40:34Z", "message": "ISPN-11706 Use XidImpl internally"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NDkwODg3", "url": "https://github.com/infinispan/infinispan/pull/8274#pullrequestreview-406490887", "createdAt": "2020-05-06T10:38:21Z", "commit": {"oid": "7f50eacd004827c7d368d53bd3984f10395c2932"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMDozODoyMlrOGRNJsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMDozODoyMlrOGRNJsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY5NDQ0OA==", "bodyText": "When do Xids need to be persisted?\nIf they don't, then XidImpl should continue to utilise an Externalizer until the global marshaller has been refactored (Infinispan 12 now).", "url": "https://github.com/infinispan/infinispan/pull/8274#discussion_r420694448", "createdAt": "2020-05-06T10:38:22Z", "author": {"login": "ryanemerson"}, "path": "commons/all/src/main/java/org/infinispan/commons/marshall/PersistenceContextInitializer.java", "diffHunk": "@@ -23,6 +24,7 @@\n             CounterConfiguration.class,\n             CounterType.class,\n             Storage.class,\n+            XidImpl.class", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f50eacd004827c7d368d53bd3984f10395c2932"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 706, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}