{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0NjM2NzQ1", "number": 8212, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxOToyNTo1N1rODypMBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOToyNjo0NFrOD1L_Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NDMwMjEyOnYy", "diffSide": "RIGHT", "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxOToyNTo1N1rOGGz-Ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwOTo1MDozN1rOGJtp-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc5NjA5OA==", "bodyText": "@ryanemerson I'm curious about the programmatic configuration. docs provide this example:\nConfigurationBuilder b = new ConfigurationBuilder();\nb.persistence()\n    .addSingleFileStore()\n    .location(\"myDataStore\")\n    .maxEntries(5000);\n\nthis is for library right? is there a way to configure persistence via Hot Rod other than using XMLStringConfiguration to pass a cache definition that includes file-store?", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r409796098", "createdAt": "2020-04-16T19:25:57Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -19,9 +19,26 @@ defragmented.\n \n .Declarative configuration\n \n+* For embedded deployments, {brandname} stores data to the current working\n+directory. To store data in a different location, specify the absolute path to\n+that directory as the value, as in the following example:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"/path/to/myDataStore\" max-entries=\"5000\"/>\n+</persistence>\n+----\n+\n+* For server deployments, {brandname} stores data in `{server_home}/data`. You\n+should not specify a `path` for Single File cache stores with {brandname} \n+server.\n+\n [source,xml,options=\"nowrap\",subs=attributes+]\n ----\n-include::config_examples/persistence_file_store.xml[]\n+<persistence>\n+\u00a0\u00a0 <file-store max-entries=\"5000\"/>\n+</persistence>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0529c945aa155e0e3b9df9dd0bfe0f659afe0062"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIyMTk2MA==", "bodyText": "Yep this is for library. There's no other way to configure persistence via Hot Rod as there is no other way to configure caches. Persistence configuration is just a sub-module of the overall cache configuration which doesn't get any special treatment.", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r411221960", "createdAt": "2020-04-20T09:15:59Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -19,9 +19,26 @@ defragmented.\n \n .Declarative configuration\n \n+* For embedded deployments, {brandname} stores data to the current working\n+directory. To store data in a different location, specify the absolute path to\n+that directory as the value, as in the following example:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"/path/to/myDataStore\" max-entries=\"5000\"/>\n+</persistence>\n+----\n+\n+* For server deployments, {brandname} stores data in `{server_home}/data`. You\n+should not specify a `path` for Single File cache stores with {brandname} \n+server.\n+\n [source,xml,options=\"nowrap\",subs=attributes+]\n ----\n-include::config_examples/persistence_file_store.xml[]\n+<persistence>\n+\u00a0\u00a0 <file-store max-entries=\"5000\"/>\n+</persistence>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc5NjA5OA=="}, "originalCommit": {"oid": "0529c945aa155e0e3b9df9dd0bfe0f659afe0062"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjgxMDkxNA==", "bodyText": "FYI that Tristan added this to the Hot Rod client props recently: \n  \n    \n      infinispan/client/hotrod-client/src/main/java/org/infinispan/client/hotrod/configuration/package-info.java\n    \n    \n         Line 413\n      in\n      1ffe539\n    \n    \n    \n    \n\n        \n          \n            *           <td><b>infinispan.client.hotrod.cache.<i>cachename</i>.configuration</b></td>", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r412810914", "createdAt": "2020-04-22T09:11:13Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -19,9 +19,26 @@ defragmented.\n \n .Declarative configuration\n \n+* For embedded deployments, {brandname} stores data to the current working\n+directory. To store data in a different location, specify the absolute path to\n+that directory as the value, as in the following example:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"/path/to/myDataStore\" max-entries=\"5000\"/>\n+</persistence>\n+----\n+\n+* For server deployments, {brandname} stores data in `{server_home}/data`. You\n+should not specify a `path` for Single File cache stores with {brandname} \n+server.\n+\n [source,xml,options=\"nowrap\",subs=attributes+]\n ----\n-include::config_examples/persistence_file_store.xml[]\n+<persistence>\n+\u00a0\u00a0 <file-store max-entries=\"5000\"/>\n+</persistence>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc5NjA5OA=="}, "originalCommit": {"oid": "0529c945aa155e0e3b9df9dd0bfe0f659afe0062"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjgxMjY5OA==", "bodyText": "actually here's RemoteCacheConfigurationBuilder.java 4ecc499#diff-f98cef32f0dccd584e5609d2e33b48b9R68", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r412812698", "createdAt": "2020-04-22T09:13:50Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -19,9 +19,26 @@ defragmented.\n \n .Declarative configuration\n \n+* For embedded deployments, {brandname} stores data to the current working\n+directory. To store data in a different location, specify the absolute path to\n+that directory as the value, as in the following example:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"/path/to/myDataStore\" max-entries=\"5000\"/>\n+</persistence>\n+----\n+\n+* For server deployments, {brandname} stores data in `{server_home}/data`. You\n+should not specify a `path` for Single File cache stores with {brandname} \n+server.\n+\n [source,xml,options=\"nowrap\",subs=attributes+]\n ----\n-include::config_examples/persistence_file_store.xml[]\n+<persistence>\n+\u00a0\u00a0 <file-store max-entries=\"5000\"/>\n+</persistence>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc5NjA5OA=="}, "originalCommit": {"oid": "0529c945aa155e0e3b9df9dd0bfe0f659afe0062"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjgyOTM4OQ==", "bodyText": "Yep,  that PR was badly timed with my comment \ud83d\ude04", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r412829389", "createdAt": "2020-04-22T09:37:40Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -19,9 +19,26 @@ defragmented.\n \n .Declarative configuration\n \n+* For embedded deployments, {brandname} stores data to the current working\n+directory. To store data in a different location, specify the absolute path to\n+that directory as the value, as in the following example:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"/path/to/myDataStore\" max-entries=\"5000\"/>\n+</persistence>\n+----\n+\n+* For server deployments, {brandname} stores data in `{server_home}/data`. You\n+should not specify a `path` for Single File cache stores with {brandname} \n+server.\n+\n [source,xml,options=\"nowrap\",subs=attributes+]\n ----\n-include::config_examples/persistence_file_store.xml[]\n+<persistence>\n+\u00a0\u00a0 <file-store max-entries=\"5000\"/>\n+</persistence>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc5NjA5OA=="}, "originalCommit": {"oid": "0529c945aa155e0e3b9df9dd0bfe0f659afe0062"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjgzODM5NQ==", "bodyText": "ha. I wasn't sure if you'd seen that or not. it actually helps me solve a problem because docs often show programmatic examples that only apply to embedded but we don't always make that clear.", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r412838395", "createdAt": "2020-04-22T09:50:37Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -19,9 +19,26 @@ defragmented.\n \n .Declarative configuration\n \n+* For embedded deployments, {brandname} stores data to the current working\n+directory. To store data in a different location, specify the absolute path to\n+that directory as the value, as in the following example:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"/path/to/myDataStore\" max-entries=\"5000\"/>\n+</persistence>\n+----\n+\n+* For server deployments, {brandname} stores data in `{server_home}/data`. You\n+should not specify a `path` for Single File cache stores with {brandname} \n+server.\n+\n [source,xml,options=\"nowrap\",subs=attributes+]\n ----\n-include::config_examples/persistence_file_store.xml[]\n+<persistence>\n+\u00a0\u00a0 <file-store max-entries=\"5000\"/>\n+</persistence>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc5NjA5OA=="}, "originalCommit": {"oid": "0529c945aa155e0e3b9df9dd0bfe0f659afe0062"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NDY2ODk0OnYy", "diffSide": "RIGHT", "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwOToyMzo1OFrOGILVNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMToyMDoxMVrOGJxGWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIyNzQ0NA==", "bodyText": "This isn't correct on master anymore due to https://issues.redhat.com/browse/ISPN-11556. If the value of path is an absolute path, then that value must be a sub path of globalState.persistentLocation or an exception is thrown.\nFor example:\n// Global configuration\nglobalState().persistentLocation(`/tmp/example/`);\n...\n// Cache configuration\n1. config.addSingleFileStore().location('/tmp/example/file-store-absolute'`)\n2. config.addSingleFileStore().location('file-store-relative'`)\n3. config.addSingleFileStore().location('/example/`)\nExample 1 and 2 are valid and result in a file-store being created at /tmp/example/file-store-absolute and /tmp/example/file-store-relative.\nExample 3 is invalid as the root is different, i.e. /example != /tmp/example and so a CacheConfigurationException is thrown.", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r411227444", "createdAt": "2020-04-20T09:23:58Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -19,9 +19,26 @@ defragmented.\n \n .Declarative configuration\n \n+* For embedded deployments, {brandname} stores data to the current working\n+directory. To store data in a different location, specify the absolute path to\n+that directory as the value, as in the following example:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"/path/to/myDataStore\" max-entries=\"5000\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0529c945aa155e0e3b9df9dd0bfe0f659afe0062"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIzMzM0NA==", "bodyText": "So if the path and relative-to attributes in a configuration xml result in a path that is absolute and not a child of globalstate.persistenceLocation, an exception will be thrown.", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r411233344", "createdAt": "2020-04-20T09:32:48Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -19,9 +19,26 @@ defragmented.\n \n .Declarative configuration\n \n+* For embedded deployments, {brandname} stores data to the current working\n+directory. To store data in a different location, specify the absolute path to\n+that directory as the value, as in the following example:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"/path/to/myDataStore\" max-entries=\"5000\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIyNzQ0NA=="}, "originalCommit": {"oid": "0529c945aa155e0e3b9df9dd0bfe0f659afe0062"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjg1NzUxNg==", "bodyText": "thanks @ryanemerson ! shall I adjust for 10.1.x and push the docs commit to the backport for ISPN-11556? I think I just need to remove the ConfigSingleFileStoreRemote.java example from 10.1.x.", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r412857516", "createdAt": "2020-04-22T10:18:46Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -19,9 +19,26 @@ defragmented.\n \n .Declarative configuration\n \n+* For embedded deployments, {brandname} stores data to the current working\n+directory. To store data in a different location, specify the absolute path to\n+that directory as the value, as in the following example:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"/path/to/myDataStore\" max-entries=\"5000\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIyNzQ0NA=="}, "originalCommit": {"oid": "0529c945aa155e0e3b9df9dd0bfe0f659afe0062"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjg4NDIxNw==", "bodyText": "@oraNod why omit ConfigSingleFileStoreRemote? That is still valid in 10.1.x", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r412884217", "createdAt": "2020-04-22T11:01:57Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -19,9 +19,26 @@ defragmented.\n \n .Declarative configuration\n \n+* For embedded deployments, {brandname} stores data to the current working\n+directory. To store data in a different location, specify the absolute path to\n+that directory as the value, as in the following example:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"/path/to/myDataStore\" max-entries=\"5000\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIyNzQ0NA=="}, "originalCommit": {"oid": "0529c945aa155e0e3b9df9dd0bfe0f659afe0062"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjg5NDgxMQ==", "bodyText": "you're right, thanks. I didn't see the backport when I commented. that makes it easier.", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r412894811", "createdAt": "2020-04-22T11:20:11Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -19,9 +19,26 @@ defragmented.\n \n .Declarative configuration\n \n+* For embedded deployments, {brandname} stores data to the current working\n+directory. To store data in a different location, specify the absolute path to\n+that directory as the value, as in the following example:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"/path/to/myDataStore\" max-entries=\"5000\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIyNzQ0NA=="}, "originalCommit": {"oid": "0529c945aa155e0e3b9df9dd0bfe0f659afe0062"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NTg0NjQzOnYy", "diffSide": "RIGHT", "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMTowODoyM1rOGJwrZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNToyMzoyMVrOGJ8Wxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjg4NzkwOA==", "bodyText": "This is a bit strong. AFAIK in the server you can still change the location of globalstate.persistentLocation, also it would be possible to store in another subdir if desired. For example \"path=subDir\" will result in the store being located at `{server_home/data/subDir/.dat}.\nAlso, I'm not sure if the globalState.persistentLocation can be configured to exist outside of {server_home}. @tristantarrant Can you clarify?", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r412887908", "createdAt": "2020-04-22T11:08:23Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -19,18 +19,69 @@ defragmented.\n \n .Declarative configuration\n \n+* For embedded deployments, {brandname} stores data in the global persistent\n+location. Use the `path` attribute to specify a directory that is relative to\n+the global persistent location, as in the following example:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"path/to/myDataStore\" max-entries=\"5000\"/>\n+</persistence>\n+----\n+\n+{brandname} throws the following exception if you attempt to use a directory\n+outside the global persistent location:\n+\n+----\n+ISPN000558: \"The store location 'foo' is not a child of the global persistent location 'bar'\"\n+----\n+\n+For example, you configure your global persistent location as follows:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<global-state>\n+   <persistent-location path=\"/tmp/example\" relative-to=\"my.data\"/>\n+</global-state>\n+----\n+\n+To set an absolute path for the Single File store configuration, you must do so as follows:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"/tmp/example/path/to/myDataStore\" max-entries=\"5000\"/>\n+</persistence>\n+----\n+\n+* For server deployments, {brandname} stores data in `{server_home}/data`. You\n+should not specify a `path` for Single File cache stores with {brandname}\n+server.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c7afd991ddde264e4a6ce5f3b289880a86534c5"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA3OTIzOQ==", "bodyText": "@ryanemerson I've done some local testing and changed the global persistent location to be outside the server home dir. it is also possible to set file-store path to a directory relative to the global persistent location. if I set a file-store path to an absolute directory, ISPN080028 gets thrown.", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r413079239", "createdAt": "2020-04-22T15:23:21Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -19,18 +19,69 @@ defragmented.\n \n .Declarative configuration\n \n+* For embedded deployments, {brandname} stores data in the global persistent\n+location. Use the `path` attribute to specify a directory that is relative to\n+the global persistent location, as in the following example:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"path/to/myDataStore\" max-entries=\"5000\"/>\n+</persistence>\n+----\n+\n+{brandname} throws the following exception if you attempt to use a directory\n+outside the global persistent location:\n+\n+----\n+ISPN000558: \"The store location 'foo' is not a child of the global persistent location 'bar'\"\n+----\n+\n+For example, you configure your global persistent location as follows:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<global-state>\n+   <persistent-location path=\"/tmp/example\" relative-to=\"my.data\"/>\n+</global-state>\n+----\n+\n+To set an absolute path for the Single File store configuration, you must do so as follows:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<persistence>\n+\u00a0\u00a0 <file-store path=\"/tmp/example/path/to/myDataStore\" max-entries=\"5000\"/>\n+</persistence>\n+----\n+\n+* For server deployments, {brandname} stores data in `{server_home}/data`. You\n+should not specify a `path` for Single File cache stores with {brandname}\n+server.\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjg4NzkwOA=="}, "originalCommit": {"oid": "5c7afd991ddde264e4a6ce5f3b289880a86534c5"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MDkzMDM4OnYy", "diffSide": "RIGHT", "path": "documentation/src/main/asciidoc/topics/proc_setting_persistent_location.adoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOToxNjo0MFrOGKfUdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMDo1MjoxOVrOGKjJ4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1MjA4NA==", "bodyText": "This should be the file-store xml I think", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r413652084", "createdAt": "2020-04-23T09:16:40Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/proc_setting_persistent_location.adoc", "diffHunk": "@@ -40,8 +37,33 @@ public GlobalStateConfigurationBuilder persistentLocation(String path, String re\n }\n ----\n \n-{brandname} logs the following message if you attempt to use a directory\n-outside the global persistent location with file-based cache stores:\n+.File-Based Cache Stores and Global Persistent Location\n+\n+When using file-based cache stores, you can optionally specify filesystem directories for storage. These paths are relative to the global persistent location.\n+\n+For example, you configure your global persistent location as follows:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<global-state>\n+   <persistent-location path=\"/tmp/example\" relative-to=\"my.data\"/>\n+</global-state>\n+----\n+\n+You then configure a Single File cache store that uses a path named\n+`myDataStore` as follows:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<global-state>\n+   <persistent-location path=\"myDataStore\" relative-to=\"my.data\"/>\n+</global-state>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3045a8eea2c3f456383a4a4a88833d5d5597685b"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzcxNDkxNQ==", "bodyText": "yes it should. nice catch.", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r413714915", "createdAt": "2020-04-23T10:52:19Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/proc_setting_persistent_location.adoc", "diffHunk": "@@ -40,8 +37,33 @@ public GlobalStateConfigurationBuilder persistentLocation(String path, String re\n }\n ----\n \n-{brandname} logs the following message if you attempt to use a directory\n-outside the global persistent location with file-based cache stores:\n+.File-Based Cache Stores and Global Persistent Location\n+\n+When using file-based cache stores, you can optionally specify filesystem directories for storage. These paths are relative to the global persistent location.\n+\n+For example, you configure your global persistent location as follows:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<global-state>\n+   <persistent-location path=\"/tmp/example\" relative-to=\"my.data\"/>\n+</global-state>\n+----\n+\n+You then configure a Single File cache store that uses a path named\n+`myDataStore` as follows:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<global-state>\n+   <persistent-location path=\"myDataStore\" relative-to=\"my.data\"/>\n+</global-state>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1MjA4NA=="}, "originalCommit": {"oid": "3045a8eea2c3f456383a4a4a88833d5d5597685b"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MDkzMTgwOnYy", "diffSide": "RIGHT", "path": "documentation/src/main/asciidoc/topics/proc_setting_persistent_location.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOToxNjo1OFrOGKfVWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOToxNjo1OFrOGKfVWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1MjMxNQ==", "bodyText": "It will be /tmp/example/myDataStore/<cache-name>.dat", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r413652315", "createdAt": "2020-04-23T09:16:58Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/proc_setting_persistent_location.adoc", "diffHunk": "@@ -40,8 +37,33 @@ public GlobalStateConfigurationBuilder persistentLocation(String path, String re\n }\n ----\n \n-{brandname} logs the following message if you attempt to use a directory\n-outside the global persistent location with file-based cache stores:\n+.File-Based Cache Stores and Global Persistent Location\n+\n+When using file-based cache stores, you can optionally specify filesystem directories for storage. These paths are relative to the global persistent location.\n+\n+For example, you configure your global persistent location as follows:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<global-state>\n+   <persistent-location path=\"/tmp/example\" relative-to=\"my.data\"/>\n+</global-state>\n+----\n+\n+You then configure a Single File cache store that uses a path named\n+`myDataStore` as follows:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<global-state>\n+   <persistent-location path=\"myDataStore\" relative-to=\"my.data\"/>\n+</global-state>\n+----\n+\n+In this case, the configuration results in a Single File cache store in `/tmp/example/myDataStore/.dat`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3045a8eea2c3f456383a4a4a88833d5d5597685b"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MDk1ODM3OnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/schema/infinispan-config-11.0.xsd", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOToyMzowNlrOGKfl0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTowMzo0OFrOGKjlag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1NjUzMQ==", "bodyText": "I think the use of the word \"relative\" is confusing here as it has different meanings when talking about paths:\nhttps://en.wikipedia.org/wiki/Path_(computing)#Absolute_and_relative_paths\nHow about:\n\"Specifies a filesystem directory for data. The value can be a relative or absolute path. Relative paths are created relative to the configured global persistent location. Whereas absolute paths must be a subdirectory of the global persistent location, otherwise an exception is thrown.\"", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r413656531", "createdAt": "2020-04-23T09:23:06Z", "author": {"login": "ryanemerson"}, "path": "core/src/main/resources/schema/infinispan-config-11.0.xsd", "diffHunk": "@@ -1858,9 +1858,10 @@\n         <xs:attribute name=\"path\" type=\"xs:string\">\n           <xs:annotation>\n             <xs:documentation>\n-              Defines a location in the root path, specified in \"relative-to\",\n-              where the cache state is stored. Defaults to the name of the\n-              cache container.\n+              Specifies a filesystem directory for data. The value should\n+              always be relative to the global persistent location. If you set", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3045a8eea2c3f456383a4a4a88833d5d5597685b"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzcyMTk2Mg==", "bodyText": "thanks, @ryanemerson that is spot on. tbh I felt I was missing some nuances in the wording. this is an excellent review!", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r413721962", "createdAt": "2020-04-23T11:03:48Z", "author": {"login": "oraNod"}, "path": "core/src/main/resources/schema/infinispan-config-11.0.xsd", "diffHunk": "@@ -1858,9 +1858,10 @@\n         <xs:attribute name=\"path\" type=\"xs:string\">\n           <xs:annotation>\n             <xs:documentation>\n-              Defines a location in the root path, specified in \"relative-to\",\n-              where the cache state is stored. Defaults to the name of the\n-              cache container.\n+              Specifies a filesystem directory for data. The value should\n+              always be relative to the global persistent location. If you set", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1NjUzMQ=="}, "originalCommit": {"oid": "3045a8eea2c3f456383a4a4a88833d5d5597685b"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MDk2NTE5OnYy", "diffSide": "RIGHT", "path": "documentation/src/main/asciidoc/topics/proc_setting_persistent_location.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOToyNDozOFrOGKfqCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOToyNDozOFrOGKfqCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1NzYxMQ==", "bodyText": "\"When using file-based cache stores, you can optionally specify filesystem directories for storage. Unless absolute paths are declared, these are always relative to the global persistent location.\" ?", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r413657611", "createdAt": "2020-04-23T09:24:38Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/proc_setting_persistent_location.adoc", "diffHunk": "@@ -40,8 +37,33 @@ public GlobalStateConfigurationBuilder persistentLocation(String path, String re\n }\n ----\n \n-{brandname} logs the following message if you attempt to use a directory\n-outside the global persistent location with file-based cache stores:\n+.File-Based Cache Stores and Global Persistent Location\n+\n+When using file-based cache stores, you can optionally specify filesystem directories for storage. These paths are relative to the global persistent location.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3045a8eea2c3f456383a4a4a88833d5d5597685b"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MDk3MTIwOnYy", "diffSide": "RIGHT", "path": "documentation/src/main/asciidoc/topics/proc_setting_persistent_location.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOToyNTo1MlrOGKftmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOToyNTo1MlrOGKftmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1ODUyMw==", "bodyText": "\"an absolute path\"", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r413658523", "createdAt": "2020-04-23T09:25:52Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/proc_setting_persistent_location.adoc", "diffHunk": "@@ -40,8 +37,33 @@ public GlobalStateConfigurationBuilder persistentLocation(String path, String re\n }\n ----\n \n-{brandname} logs the following message if you attempt to use a directory\n-outside the global persistent location with file-based cache stores:\n+.File-Based Cache Stores and Global Persistent Location\n+\n+When using file-based cache stores, you can optionally specify filesystem directories for storage. These paths are relative to the global persistent location.\n+\n+For example, you configure your global persistent location as follows:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<global-state>\n+   <persistent-location path=\"/tmp/example\" relative-to=\"my.data\"/>\n+</global-state>\n+----\n+\n+You then configure a Single File cache store that uses a path named\n+`myDataStore` as follows:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<global-state>\n+   <persistent-location path=\"myDataStore\" relative-to=\"my.data\"/>\n+</global-state>\n+----\n+\n+In this case, the configuration results in a Single File cache store in `/tmp/example/myDataStore/.dat`\n+\n+If you attempt to set a path that resides outside the global persistent", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3045a8eea2c3f456383a4a4a88833d5d5597685b"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MDk3NTE1OnYy", "diffSide": "RIGHT", "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOToyNjo0NFrOGKfwAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTowNzo0OFrOGKjukg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1OTEzNw==", "bodyText": "This has the same issue as the xsd description.", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r413659137", "createdAt": "2020-04-23T09:26:44Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -17,20 +17,35 @@ is used only if an entry can fit within it. Likewise, if you remove all entries\n from memory, the single file store does not decrease in size or become\n defragmented.\n \n+{brandname} stores data in the global persistent location. You can optionally\n+specify a filesystem directory with the `path` attribute but the value should\n+always be relative to the global persistent location.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3045a8eea2c3f456383a4a4a88833d5d5597685b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzcyNDMwNg==", "bodyText": "Let's remove this. Info belongs with the global persistent location content.", "url": "https://github.com/infinispan/infinispan/pull/8212#discussion_r413724306", "createdAt": "2020-04-23T11:07:48Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_cache_store_sfs.adoc", "diffHunk": "@@ -17,20 +17,35 @@ is used only if an entry can fit within it. Likewise, if you remove all entries\n from memory, the single file store does not decrease in size or become\n defragmented.\n \n+{brandname} stores data in the global persistent location. You can optionally\n+specify a filesystem directory with the `path` attribute but the value should\n+always be relative to the global persistent location.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1OTEzNw=="}, "originalCommit": {"oid": "3045a8eea2c3f456383a4a4a88833d5d5597685b"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4276, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}