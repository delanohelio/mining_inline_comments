{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5NzI4ODM5", "number": 7952, "title": "ISPN-11271 Convert async transport executor to the non blocking thread pool", "bodyText": "https://issues.redhat.com/browse/ISPN-11271\nhttps://issues.redhat.com/browse/ISPN-11264", "createdAt": "2020-02-25T18:19:10Z", "url": "https://github.com/infinispan/infinispan/pull/7952", "merged": true, "mergeCommit": {"oid": "8ee2ec179f02365a2d3e6d526acad1d37632c455"}, "closed": true, "closedAt": "2020-02-28T15:09:10Z", "author": {"login": "wburns"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIJOHBABqjMwNzQ0NDk5Mjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIwtWLgBqjMwODIxMjY3Mzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0f09327dd965bb42dd8bf4024b967eb40878b78e", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/0f09327dd965bb42dd8bf4024b967eb40878b78e", "committedDate": "2020-02-25T18:17:55Z", "message": "ISPN-11264 XSiteStateTransferProviderImpl is blocking when sending state"}, "afterCommit": {"oid": "918a4b036dd2b11972d3f0e1e971640755ccda32", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/918a4b036dd2b11972d3f0e1e971640755ccda32", "committedDate": "2020-02-26T16:21:52Z", "message": "ISPN-11264 XSiteStateTransferProviderImpl is blocking when sending state"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MTA2MDQ5", "url": "https://github.com/infinispan/infinispan/pull/7952#pullrequestreview-365106049", "createdAt": "2020-02-26T17:41:44Z", "commit": {"oid": "918a4b036dd2b11972d3f0e1e971640755ccda32"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNzo0MTo0NFrOFu1few==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwNzo1Mjo1NFrOFvIIIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY1NTIyNw==", "bodyText": "Should mention BlockHound directly IMO", "url": "https://github.com/infinispan/infinispan/pull/7952#discussion_r384655227", "createdAt": "2020-02-26T17:41:44Z", "author": {"login": "danberindei"}, "path": "core/src/main/java/org/infinispan/executors/LimitedExecutor.java", "diffHunk": "@@ -182,6 +183,14 @@ private void runTasks() {\n       runnerFinished();\n    }\n \n+   /**\n+    * This method is here solely for byte code augmentation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "918a4b036dd2b11972d3f0e1e971640755ccda32"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY1NTUxMQ==", "bodyText": "We should keep this one, but remove its defaults", "url": "https://github.com/infinispan/infinispan/pull/7952#discussion_r384655511", "createdAt": "2020-02-26T17:42:13Z", "author": {"login": "danberindei"}, "path": "core/src/main/java/org/infinispan/factories/KnownComponentNames.java", "diffHunk": "@@ -16,28 +16,18 @@\n public class KnownComponentNames {\n    public static final String CACHE_NAME = \"cacheName\";\n \n-   public static final String ASYNC_TRANSPORT_EXECUTOR = \"org.infinispan.executors.transport\";\n    public static final String REMOTE_COMMAND_EXECUTOR = \"org.infinispan.executors.remote\";\n    public static final String ASYNC_NOTIFICATION_EXECUTOR = \"org.infinispan.executors.notification\";\n    public static final String EXPIRATION_SCHEDULED_EXECUTOR = \"org.infinispan.executors.expiration\";\n    public static final String NON_BLOCKING_EXECUTOR = \"org.infinispan.executors.non-blocking\";\n    public static final String BLOCKING_EXECUTOR = \"org.infinispan.executors.blocking\";\n-   /**\n-    * @deprecated Since 9.0, no longer used.\n-    */\n-   @Deprecated\n-   public static final String ASYNC_REPLICATION_QUEUE_EXECUTOR = \"org.infinispan.executors.replicationQueue\";\n+   public static final String TIMEOUT_SCHEDULE_EXECUTOR = \"org.infinispan.executors.timeout\";\n+\n+\n    public static final String MODULE_COMMAND_FACTORIES =\"org.infinispan.modules.command.factories\";\n    public static final String CLASS_LOADER = \"java.lang.ClassLoader\";\n-   /**\n-    * @deprecated Since 10.1, no longer used\n-    */\n-   @Deprecated\n-   public static final String STATE_TRANSFER_EXECUTOR = \"org.infinispan.executors.stateTransferExecutor\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "918a4b036dd2b11972d3f0e1e971640755ccda32"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk1OTU2MQ==", "bodyText": "Can you check this again? I commented it out locally and I didn't get any failures.", "url": "https://github.com/infinispan/infinispan/pull/7952#discussion_r384959561", "createdAt": "2020-02-27T07:50:14Z", "author": {"login": "danberindei"}, "path": "core/src/main/java/org/infinispan/util/CoreBlockHoundIntegration.java", "diffHunk": "@@ -74,9 +85,6 @@ private static void registerBlockingMethods(BlockHound.Builder builder) {\n    }\n \n    private static void questionableMethodsAllowedToBlock(BlockHound.Builder builder) {\n-      // Component registry has a lock to protect its state - is short lived lock\n-      builder.allowBlockingCallsInside(BasicComponentRegistryImpl.class.getName(), \"prepareWrapperChange\");\n-\n       // This one should probably not be allowed - it is waiting for another component to start\n       // TODO: This might actually be a bug in the rewiring logic. (shows in StateTransferOverwritingValueTest)\n       builder.allowBlockingCallsInside(BasicComponentRegistryImpl.class.getName(), \"awaitWrapperState\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "918a4b036dd2b11972d3f0e1e971640755ccda32"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2MDU0Ng==", "bodyText": "I suggest a name with Test in it, maybe TestBlocking.\nAlso missing javadoc :)", "url": "https://github.com/infinispan/infinispan/pull/7952#discussion_r384960546", "createdAt": "2020-02-27T07:52:54Z", "author": {"login": "danberindei"}, "path": "core/src/test/java/org/infinispan/test/JREBlocking.java", "diffHunk": "@@ -0,0 +1,26 @@\n+package org.infinispan.test;\n+\n+import java.util.concurrent.BrokenBarrierException;\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.CyclicBarrier;\n+import java.util.concurrent.Exchanger;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+public class JREBlocking {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "918a4b036dd2b11972d3f0e1e971640755ccda32"}, "originalPosition": 10}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "918a4b036dd2b11972d3f0e1e971640755ccda32", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/918a4b036dd2b11972d3f0e1e971640755ccda32", "committedDate": "2020-02-26T16:21:52Z", "message": "ISPN-11264 XSiteStateTransferProviderImpl is blocking when sending state"}, "afterCommit": {"oid": "c26eacb5f1400ac7feee7373e9e62060aaa86e81", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/c26eacb5f1400ac7feee7373e9e62060aaa86e81", "committedDate": "2020-02-27T14:34:52Z", "message": "ISPN-11264 XSiteStateTransferProviderImpl is blocking when sending state"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c26eacb5f1400ac7feee7373e9e62060aaa86e81", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/c26eacb5f1400ac7feee7373e9e62060aaa86e81", "committedDate": "2020-02-27T14:34:52Z", "message": "ISPN-11264 XSiteStateTransferProviderImpl is blocking when sending state"}, "afterCommit": {"oid": "a9ebecfa3f1c3d5255977d27207e2f134b99e2f6", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/a9ebecfa3f1c3d5255977d27207e2f134b99e2f6", "committedDate": "2020-02-27T17:05:52Z", "message": "ISPN-11264 XSiteStateTransferProviderImpl is blocking when sending state"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a9ebecfa3f1c3d5255977d27207e2f134b99e2f6", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/a9ebecfa3f1c3d5255977d27207e2f134b99e2f6", "committedDate": "2020-02-27T17:05:52Z", "message": "ISPN-11264 XSiteStateTransferProviderImpl is blocking when sending state"}, "afterCommit": {"oid": "fb0cbce4f322ada45822061fd4b79a64507421f4", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/fb0cbce4f322ada45822061fd4b79a64507421f4", "committedDate": "2020-02-27T18:24:26Z", "message": "ISPN-11264 XSiteStateTransferProviderImpl is blocking when sending state"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb0cbce4f322ada45822061fd4b79a64507421f4", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/fb0cbce4f322ada45822061fd4b79a64507421f4", "committedDate": "2020-02-27T18:24:26Z", "message": "ISPN-11264 XSiteStateTransferProviderImpl is blocking when sending state"}, "afterCommit": {"oid": "781176399de458d63c7605d081d976337bc4e9fe", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/781176399de458d63c7605d081d976337bc4e9fe", "committedDate": "2020-02-27T19:52:30Z", "message": "ISPN-11264 XSiteStateTransferProviderImpl is blocking when sending state"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff1ad8495f36549daa9ccb02bd6603677225188e", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/ff1ad8495f36549daa9ccb02bd6603677225188e", "committedDate": "2020-02-28T14:22:20Z", "message": "ISPN-11271 Convert async transport executor to the non blocking thread pool"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "027e4dd5e302a679a45cc768a27e72dadf99c8bf", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/027e4dd5e302a679a45cc768a27e72dadf99c8bf", "committedDate": "2020-02-28T14:22:20Z", "message": "ISPN-11264 XSiteStateTransferProviderImpl is blocking when sending state"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "781176399de458d63c7605d081d976337bc4e9fe", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/781176399de458d63c7605d081d976337bc4e9fe", "committedDate": "2020-02-27T19:52:30Z", "message": "ISPN-11264 XSiteStateTransferProviderImpl is blocking when sending state"}, "afterCommit": {"oid": "027e4dd5e302a679a45cc768a27e72dadf99c8bf", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/027e4dd5e302a679a45cc768a27e72dadf99c8bf", "committedDate": "2020-02-28T14:22:20Z", "message": "ISPN-11264 XSiteStateTransferProviderImpl is blocking when sending state"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1204, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}