{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0MDY5ODc4", "number": 8950, "title": "ISPN-12592 Improve error message when XML element is removed", "bodyText": "https://issues.redhat.com/browse/ISPN-12592", "createdAt": "2020-12-22T11:45:12Z", "url": "https://github.com/infinispan/infinispan/pull/8950", "merged": true, "mergeCommit": {"oid": "dc4565d9688a8b4ca86767edad695d75beec4f59"}, "closed": true, "closedAt": "2020-12-23T21:06:46Z", "author": {"login": "danberindei"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdop8s8gFqTU1NzA1MzIwNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdow_IGABqjQxNDE3NDczNDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MDUzMjA3", "url": "https://github.com/infinispan/infinispan/pull/8950#pullrequestreview-557053207", "createdAt": "2020-12-22T12:45:32Z", "commit": {"oid": "79ef23273b0bc47c77102f34ac5b0eb39e500dbb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMjo0NTozMlrOIJ59ZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMjo0NjoxM1rOIJ5-ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI1NzcwMQ==", "bodyText": "instead of passing null as a parameter, could we use overloading in ParseUtils ?", "url": "https://github.com/infinispan/infinispan/pull/8950#discussion_r547257701", "createdAt": "2020-12-22T12:45:32Z", "author": {"login": "karesti"}, "path": "core/src/main/java/org/infinispan/configuration/parsing/CacheParser.java", "diffHunk": "@@ -884,7 +885,7 @@ private final void parseTransaction(XMLExtendedStreamReader reader, Configuratio\n             }\n             case TRANSACTION_PROTOCOL: {\n                if (reader.getSchema().since(11, 0)) {\n-                  throw ParseUtils.unexpectedAttribute(reader, attribute.getLocalName());\n+                  throw ParseUtils.attributeRemoved(reader, i, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79ef23273b0bc47c77102f34ac5b0eb39e500dbb"}, "originalPosition": 111}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI1Nzk5NA==", "bodyText": "I don't like the null attribute. why not having two methods ?", "url": "https://github.com/infinispan/infinispan/pull/8950#discussion_r547257994", "createdAt": "2020-12-22T12:46:13Z", "author": {"login": "karesti"}, "path": "core/src/main/java/org/infinispan/configuration/parsing/ParseUtils.java", "diffHunk": "@@ -322,11 +322,33 @@ public static String requireAttributeProperty(final XMLStreamReader reader, int\n         }\n     }\n \n-    public static void ignoreAttribute(XMLExtendedStreamReader reader, Enum<?> attribute) {\n-       CONFIG.ignoreXmlAttribute(attribute, reader.getLocation().getLineNumber(), reader.getLocation().getColumnNumber());\n+    public static void ignoreAttribute(XMLExtendedStreamReader reader, String attributeName) {\n+       CONFIG.ignoreXmlAttribute(attributeName, reader.getLocation().getLineNumber(), reader.getLocation().getColumnNumber());\n+    }\n+\n+    public static void ignoreAttribute(XMLExtendedStreamReader reader, int attributeIndex) {\n+        ignoreAttribute(reader, reader.getAttributeName(attributeIndex).getLocalPart());\n     }\n \n     public static void ignoreElement(XMLExtendedStreamReader reader, Enum<?> element) {\n        CONFIG.ignoreXmlElement(element, reader.getLocation().getLineNumber(), reader.getLocation().getColumnNumber());\n     }\n+\n+    public static XMLStreamException elementRemoved(XMLExtendedStreamReader reader, String newElementName) {\n+        if (newElementName != null) {\n+            return CONFIG.elementRemovedUseOther(reader.getLocalName(), newElementName, reader.getLocation());\n+        } else {\n+            return CONFIG.elementRemoved(reader.getLocalName(), reader.getLocation());\n+        }\n+    }\n+\n+    public static XMLStreamException attributeRemoved(XMLExtendedStreamReader reader, int attributeIndex,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79ef23273b0bc47c77102f34ac5b0eb39e500dbb"}, "originalPosition": 26}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "79ef23273b0bc47c77102f34ac5b0eb39e500dbb", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/79ef23273b0bc47c77102f34ac5b0eb39e500dbb", "committedDate": "2020-12-22T11:44:26Z", "message": "ISPN-12592 Improve error message when XML element is removed"}, "afterCommit": {"oid": "096bd38524a686edd26038a88a2a11d5cb0c82c5", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/096bd38524a686edd26038a88a2a11d5cb0c82c5", "committedDate": "2020-12-22T16:53:25Z", "message": "ISPN-12592 Improve error message when XML element is removed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8b07d5b3db4a8fc97481ce45e6ce2dda39c46aa", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/a8b07d5b3db4a8fc97481ce45e6ce2dda39c46aa", "committedDate": "2020-12-22T20:58:25Z", "message": "ISPN-12592 Improve error message when XML element is removed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "096bd38524a686edd26038a88a2a11d5cb0c82c5", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/096bd38524a686edd26038a88a2a11d5cb0c82c5", "committedDate": "2020-12-22T16:53:25Z", "message": "ISPN-12592 Improve error message when XML element is removed"}, "afterCommit": {"oid": "a8b07d5b3db4a8fc97481ce45e6ce2dda39c46aa", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/a8b07d5b3db4a8fc97481ce45e6ce2dda39c46aa", "committedDate": "2020-12-22T20:58:25Z", "message": "ISPN-12592 Improve error message when XML element is removed"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 249, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}