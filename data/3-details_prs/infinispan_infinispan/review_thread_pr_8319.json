{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MDE1Nzcx", "number": 8319, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwOTo0ODozOFrOEA091A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwOTo1MDoyNFrOEA1AIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MzAzMjUyOnYy", "diffSide": "RIGHT", "path": "documentation/src/main/asciidoc/topics/query.adoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwOTo0ODozOVrOGcWL_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwOTo1NTo1OFrOGcWbQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM3NjgyOQ==", "bodyText": "this is only needed for write access. might want to add 2 words here to make it clear what you mean by 'access the...'", "url": "https://github.com/infinispan/infinispan/pull/8319#discussion_r432376829", "createdAt": "2020-05-29T09:48:39Z", "author": {"login": "anistor"}, "path": "documentation/src/main/asciidoc/topics/query.adoc", "diffHunk": "@@ -1489,26 +1489,63 @@ marshaller. This is _key_ for the search capability to work. But it's also possi\n gaining the benefit of platform independence and not enable indexing if you do not need it.\n \n [[enable_indexing]]\n-=== Indexing of Protobuf encoded entries\n-After configuring the client as described in the previous section you can start configuring indexing for your caches on\n-the server side. Activating indexing and the various indexing specific configurations is identical to embedded mode and\n-is detailed in the link:#query_configuration_api[Querying {brandname}] chapter.\n-\n-There is however an extra configuration step involved. While in embedded mode the indexing metadata is obtained via Java\n-reflection by analyzing the presence of various Hibernate Search annotations on the entry's class, this is obviously not\n-possible if the entry is protobuf encoded.\n-The server needs to obtain the relevant metadata from the same descriptor (.proto file) as the client.\n-The descriptors are stored in a dedicated cache on the server named _'___protobuf_metadata'_. Both keys and values in\n-this cache are plain strings. Registering a new schema is therefore as simple as performing a _put_ operation on this\n-cache using the schema's name as key and the schema file itself as the value.\n-Alternatively you can use the CLI (via the cache-container=*:register-proto-schemas() operation), the Management Console\n-or the _ProtobufMetadataManager_ MBean via JMX.\n-Be aware that, when security is enabled, access to the schema cache via the remote protocols requires\n-that the user belongs to the pass:['___schema_manager'] role.\n-\n-NOTE: Even if indexing is enabled for a cache no fields of Protobuf encoded entries will be indexed unless you use\n-the _@Indexed_ and _@Field_ protobuf schema documentation annotations in order to specify what fields need to get\n-indexed.\n+=== Indexing Protobuf-encoded entries\n+After configuring the client as described in the previous section you can start\n+configuring indexing for your caches on the server side. Activating indexing\n+and the various indexing specific configurations is identical to embedded mode\n+and is explained in link:#query_configuration_api[Querying {brandname}].\n+\n+[NOTE]\n+====\n+{brandname} does not index fields in Protobuf-encoded entries unless you use\n+the _@Indexed_ and _@Field_ annotations to specify which fields are indexed.\n+====\n+\n+==== Registering Protobuf Schemas on {brandname} Servers\n+{brandname} servers need to access indexing metadata from the same descriptor,\n+`.proto` file, as clients. For this reason, {brandname} servers store `.proto`\n+files in a dedicated cache, `___protobuf_metadata`, that stores both keys and\n+values as plain strings.\n+\n+.Prerequisites\n+\n+* If you use cache authorization to control access, assign users the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "271d34118794c23bc26bc55dcc6eedff94c5cc63"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM4MDczNw==", "bodyText": "thanks Adrian", "url": "https://github.com/infinispan/infinispan/pull/8319#discussion_r432380737", "createdAt": "2020-05-29T09:55:58Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/query.adoc", "diffHunk": "@@ -1489,26 +1489,63 @@ marshaller. This is _key_ for the search capability to work. But it's also possi\n gaining the benefit of platform independence and not enable indexing if you do not need it.\n \n [[enable_indexing]]\n-=== Indexing of Protobuf encoded entries\n-After configuring the client as described in the previous section you can start configuring indexing for your caches on\n-the server side. Activating indexing and the various indexing specific configurations is identical to embedded mode and\n-is detailed in the link:#query_configuration_api[Querying {brandname}] chapter.\n-\n-There is however an extra configuration step involved. While in embedded mode the indexing metadata is obtained via Java\n-reflection by analyzing the presence of various Hibernate Search annotations on the entry's class, this is obviously not\n-possible if the entry is protobuf encoded.\n-The server needs to obtain the relevant metadata from the same descriptor (.proto file) as the client.\n-The descriptors are stored in a dedicated cache on the server named _'___protobuf_metadata'_. Both keys and values in\n-this cache are plain strings. Registering a new schema is therefore as simple as performing a _put_ operation on this\n-cache using the schema's name as key and the schema file itself as the value.\n-Alternatively you can use the CLI (via the cache-container=*:register-proto-schemas() operation), the Management Console\n-or the _ProtobufMetadataManager_ MBean via JMX.\n-Be aware that, when security is enabled, access to the schema cache via the remote protocols requires\n-that the user belongs to the pass:['___schema_manager'] role.\n-\n-NOTE: Even if indexing is enabled for a cache no fields of Protobuf encoded entries will be indexed unless you use\n-the _@Indexed_ and _@Field_ protobuf schema documentation annotations in order to specify what fields need to get\n-indexed.\n+=== Indexing Protobuf-encoded entries\n+After configuring the client as described in the previous section you can start\n+configuring indexing for your caches on the server side. Activating indexing\n+and the various indexing specific configurations is identical to embedded mode\n+and is explained in link:#query_configuration_api[Querying {brandname}].\n+\n+[NOTE]\n+====\n+{brandname} does not index fields in Protobuf-encoded entries unless you use\n+the _@Indexed_ and _@Field_ annotations to specify which fields are indexed.\n+====\n+\n+==== Registering Protobuf Schemas on {brandname} Servers\n+{brandname} servers need to access indexing metadata from the same descriptor,\n+`.proto` file, as clients. For this reason, {brandname} servers store `.proto`\n+files in a dedicated cache, `___protobuf_metadata`, that stores both keys and\n+values as plain strings.\n+\n+.Prerequisites\n+\n+* If you use cache authorization to control access, assign users the", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM3NjgyOQ=="}, "originalCommit": {"oid": "271d34118794c23bc26bc55dcc6eedff94c5cc63"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MzAzODQwOnYy", "diffSide": "RIGHT", "path": "documentation/src/main/asciidoc/topics/query.adoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwOTo1MDoyNFrOGcWPnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwOTo1Njo1N1rOGcWdIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM3Nzc1OQ==", "bodyText": "the PUT operation is hidden behind the schema command.", "url": "https://github.com/infinispan/infinispan/pull/8319#discussion_r432377759", "createdAt": "2020-05-29T09:50:24Z", "author": {"login": "anistor"}, "path": "documentation/src/main/asciidoc/topics/query.adoc", "diffHunk": "@@ -1489,26 +1489,63 @@ marshaller. This is _key_ for the search capability to work. But it's also possi\n gaining the benefit of platform independence and not enable indexing if you do not need it.\n \n [[enable_indexing]]\n-=== Indexing of Protobuf encoded entries\n-After configuring the client as described in the previous section you can start configuring indexing for your caches on\n-the server side. Activating indexing and the various indexing specific configurations is identical to embedded mode and\n-is detailed in the link:#query_configuration_api[Querying {brandname}] chapter.\n-\n-There is however an extra configuration step involved. While in embedded mode the indexing metadata is obtained via Java\n-reflection by analyzing the presence of various Hibernate Search annotations on the entry's class, this is obviously not\n-possible if the entry is protobuf encoded.\n-The server needs to obtain the relevant metadata from the same descriptor (.proto file) as the client.\n-The descriptors are stored in a dedicated cache on the server named _'___protobuf_metadata'_. Both keys and values in\n-this cache are plain strings. Registering a new schema is therefore as simple as performing a _put_ operation on this\n-cache using the schema's name as key and the schema file itself as the value.\n-Alternatively you can use the CLI (via the cache-container=*:register-proto-schemas() operation), the Management Console\n-or the _ProtobufMetadataManager_ MBean via JMX.\n-Be aware that, when security is enabled, access to the schema cache via the remote protocols requires\n-that the user belongs to the pass:['___schema_manager'] role.\n-\n-NOTE: Even if indexing is enabled for a cache no fields of Protobuf encoded entries will be indexed unless you use\n-the _@Indexed_ and _@Field_ protobuf schema documentation annotations in order to specify what fields need to get\n-indexed.\n+=== Indexing Protobuf-encoded entries\n+After configuring the client as described in the previous section you can start\n+configuring indexing for your caches on the server side. Activating indexing\n+and the various indexing specific configurations is identical to embedded mode\n+and is explained in link:#query_configuration_api[Querying {brandname}].\n+\n+[NOTE]\n+====\n+{brandname} does not index fields in Protobuf-encoded entries unless you use\n+the _@Indexed_ and _@Field_ annotations to specify which fields are indexed.\n+====\n+\n+==== Registering Protobuf Schemas on {brandname} Servers\n+{brandname} servers need to access indexing metadata from the same descriptor,\n+`.proto` file, as clients. For this reason, {brandname} servers store `.proto`\n+files in a dedicated cache, `___protobuf_metadata`, that stores both keys and\n+values as plain strings.\n+\n+.Prerequisites\n+\n+* If you use cache authorization to control access, assign users the\n+pass:['___schema_manager'] role to access the `___protobuf_metadata` cache.\n+\n+.Procedure\n+\n+To register a schema with {brandname} server, perform a _put_ operation on the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "271d34118794c23bc26bc55dcc6eedff94c5cc63"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM4MTIxOA==", "bodyText": "yeah, good point. we can trim some of the fat here.", "url": "https://github.com/infinispan/infinispan/pull/8319#discussion_r432381218", "createdAt": "2020-05-29T09:56:57Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/query.adoc", "diffHunk": "@@ -1489,26 +1489,63 @@ marshaller. This is _key_ for the search capability to work. But it's also possi\n gaining the benefit of platform independence and not enable indexing if you do not need it.\n \n [[enable_indexing]]\n-=== Indexing of Protobuf encoded entries\n-After configuring the client as described in the previous section you can start configuring indexing for your caches on\n-the server side. Activating indexing and the various indexing specific configurations is identical to embedded mode and\n-is detailed in the link:#query_configuration_api[Querying {brandname}] chapter.\n-\n-There is however an extra configuration step involved. While in embedded mode the indexing metadata is obtained via Java\n-reflection by analyzing the presence of various Hibernate Search annotations on the entry's class, this is obviously not\n-possible if the entry is protobuf encoded.\n-The server needs to obtain the relevant metadata from the same descriptor (.proto file) as the client.\n-The descriptors are stored in a dedicated cache on the server named _'___protobuf_metadata'_. Both keys and values in\n-this cache are plain strings. Registering a new schema is therefore as simple as performing a _put_ operation on this\n-cache using the schema's name as key and the schema file itself as the value.\n-Alternatively you can use the CLI (via the cache-container=*:register-proto-schemas() operation), the Management Console\n-or the _ProtobufMetadataManager_ MBean via JMX.\n-Be aware that, when security is enabled, access to the schema cache via the remote protocols requires\n-that the user belongs to the pass:['___schema_manager'] role.\n-\n-NOTE: Even if indexing is enabled for a cache no fields of Protobuf encoded entries will be indexed unless you use\n-the _@Indexed_ and _@Field_ protobuf schema documentation annotations in order to specify what fields need to get\n-indexed.\n+=== Indexing Protobuf-encoded entries\n+After configuring the client as described in the previous section you can start\n+configuring indexing for your caches on the server side. Activating indexing\n+and the various indexing specific configurations is identical to embedded mode\n+and is explained in link:#query_configuration_api[Querying {brandname}].\n+\n+[NOTE]\n+====\n+{brandname} does not index fields in Protobuf-encoded entries unless you use\n+the _@Indexed_ and _@Field_ annotations to specify which fields are indexed.\n+====\n+\n+==== Registering Protobuf Schemas on {brandname} Servers\n+{brandname} servers need to access indexing metadata from the same descriptor,\n+`.proto` file, as clients. For this reason, {brandname} servers store `.proto`\n+files in a dedicated cache, `___protobuf_metadata`, that stores both keys and\n+values as plain strings.\n+\n+.Prerequisites\n+\n+* If you use cache authorization to control access, assign users the\n+pass:['___schema_manager'] role to access the `___protobuf_metadata` cache.\n+\n+.Procedure\n+\n+To register a schema with {brandname} server, perform a _put_ operation on the", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM3Nzc1OQ=="}, "originalCommit": {"oid": "271d34118794c23bc26bc55dcc6eedff94c5cc63"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4210, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}