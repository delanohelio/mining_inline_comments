{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NTk2MzA2", "number": 8657, "title": "ISPN-12271 Allow different servers for server integration test suite", "bodyText": "https://issues.redhat.com/browse/ISPN-12271", "createdAt": "2020-08-28T19:12:20Z", "url": "https://github.com/infinispan/infinispan/pull/8657", "merged": true, "mergeCommit": {"oid": "2fd2b0a209e1d11e6fe4db157bedd333e59ac0cf"}, "closed": true, "closedAt": "2020-09-04T21:09:47Z", "author": {"login": "diegolovison"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDZ9lVAFqTQ3Nzk2Nzc5OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFrzRxgFqTQ4Mjk0MDA3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3OTY3Nzk5", "url": "https://github.com/infinispan/infinispan/pull/8657#pullrequestreview-477967799", "createdAt": "2020-08-28T19:13:54Z", "commit": {"oid": "11779be4f86c3afc33d22f5a02a3d0fc4a3dc034"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxOToxMzo1NFrOHJRsyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxOToxMzo1NFrOHJRsyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ4OTIyNg==", "bodyText": "If you have another name for the module.\nMaybe third-party and the path third-party-server is not the best", "url": "https://github.com/infinispan/infinispan/pull/8657#discussion_r479489226", "createdAt": "2020-08-28T19:13:54Z", "author": {"login": "diegolovison"}, "path": "integrationtests/server-integration/third-party-server/pom.xml", "diffHunk": "@@ -0,0 +1,223 @@\n+<?xml version='1.0' encoding='UTF-8'?>\n+<project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>org.infinispan</groupId>\n+        <artifactId>infinispan-server-integration</artifactId>\n+        <version>12.0.0-SNAPSHOT</version>\n+        <relativePath>../pom.xml</relativePath>\n+    </parent>\n+\n+    <artifactId>infinispan-server-integrationtests-third-party</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11779be4f86c3afc33d22f5a02a3d0fc4a3dc034"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3OTY4MTcw", "url": "https://github.com/infinispan/infinispan/pull/8657#pullrequestreview-477968170", "createdAt": "2020-08-28T19:14:35Z", "commit": {"oid": "11779be4f86c3afc33d22f5a02a3d0fc4a3dc034"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxOToxNDozNlrOHJRt6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxOToxNDozNlrOHJRt6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ4OTUxMw==", "bodyText": "@pruivo should we move to build?\nIt seems so specific to move to a high-level project.", "url": "https://github.com/infinispan/infinispan/pull/8657#discussion_r479489513", "createdAt": "2020-08-28T19:14:36Z", "author": {"login": "diegolovison"}, "path": "integrationtests/server-integration/third-party-server/pom.xml", "diffHunk": "@@ -0,0 +1,223 @@\n+<?xml version='1.0' encoding='UTF-8'?>\n+<project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>org.infinispan</groupId>\n+        <artifactId>infinispan-server-integration</artifactId>\n+        <version>12.0.0-SNAPSHOT</version>\n+        <relativePath>../pom.xml</relativePath>\n+    </parent>\n+\n+    <artifactId>infinispan-server-integrationtests-third-party</artifactId>\n+\n+    <properties>\n+        <version.tomcat>9.0.37</version.tomcat>\n+        <version.wildfly>20.0.1.Final</version.wildfly>\n+        <version.arquillian-tomcat-embedded>1.1.0.Final</version.arquillian-tomcat-embedded>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11779be4f86c3afc33d22f5a02a3d0fc4a3dc034"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3OTY4NzE4", "url": "https://github.com/infinispan/infinispan/pull/8657#pullrequestreview-477968718", "createdAt": "2020-08-28T19:15:33Z", "commit": {"oid": "11779be4f86c3afc33d22f5a02a3d0fc4a3dc034"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxOToxNTozM1rOHJRvmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxOToxNTozM1rOHJRvmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ4OTk0NA==", "bodyText": "I think this name is better :D", "url": "https://github.com/infinispan/infinispan/pull/8657#discussion_r479489944", "createdAt": "2020-08-28T19:15:33Z", "author": {"login": "diegolovison"}, "path": "integrationtests/server-integration/wildfly-modules/pom.xml", "diffHunk": "@@ -9,7 +9,7 @@\n       <relativePath>../pom.xml</relativePath>\n    </parent>\n \n-   <artifactId>infinispan-wildfly-module-integrationtests</artifactId>\n+   <artifactId>infinispan-server-integrationtests-wildfly-modules</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11779be4f86c3afc33d22f5a02a3d0fc4a3dc034"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "11779be4f86c3afc33d22f5a02a3d0fc4a3dc034", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/11779be4f86c3afc33d22f5a02a3d0fc4a3dc034", "committedDate": "2020-08-28T19:11:09Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}, "afterCommit": {"oid": "37fa207df2d3293e22351ab48c848c0fb2783fda", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/37fa207df2d3293e22351ab48c848c0fb2783fda", "committedDate": "2020-08-31T12:50:17Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "37fa207df2d3293e22351ab48c848c0fb2783fda", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/37fa207df2d3293e22351ab48c848c0fb2783fda", "committedDate": "2020-08-31T12:50:17Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}, "afterCommit": {"oid": "876b6b0dd627c155a8b2f62daa9bb9a69b477a47", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/876b6b0dd627c155a8b2f62daa9bb9a69b477a47", "committedDate": "2020-08-31T14:10:01Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "876b6b0dd627c155a8b2f62daa9bb9a69b477a47", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/876b6b0dd627c155a8b2f62daa9bb9a69b477a47", "committedDate": "2020-08-31T14:10:01Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}, "afterCommit": {"oid": "4c1f97b4292559c92a4137ef2b7566e0b1a6a5b1", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/4c1f97b4292559c92a4137ef2b7566e0b1a6a5b1", "committedDate": "2020-08-31T14:19:07Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4Njk5MzUw", "url": "https://github.com/infinispan/infinispan/pull/8657#pullrequestreview-478699350", "createdAt": "2020-08-31T15:08:42Z", "commit": {"oid": "4c1f97b4292559c92a4137ef2b7566e0b1a6a5b1"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNTowODo0M1rOHJ8vsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNToxMzo0OFrOHJ88OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE5NDQ4Mg==", "bodyText": "Here looks like we will use tomcat-embedded but we are using tomcat-managed, IMO version.arquillian-tomcat-managed sounds better", "url": "https://github.com/infinispan/infinispan/pull/8657#discussion_r480194482", "createdAt": "2020-08-31T15:08:43Z", "author": {"login": "gustavolira"}, "path": "integrationtests/server-integration/third-party-server/pom.xml", "diffHunk": "@@ -0,0 +1,225 @@\n+<?xml version='1.0' encoding='UTF-8'?>\n+<project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>org.infinispan</groupId>\n+        <artifactId>infinispan-server-integration</artifactId>\n+        <version>12.0.0-SNAPSHOT</version>\n+        <relativePath>../pom.xml</relativePath>\n+    </parent>\n+\n+    <artifactId>infinispan-server-integrationtests-third-party</artifactId>\n+\n+    <properties>\n+        <version.tomcat>9.0.37</version.tomcat>\n+        <version.wildfly>20.0.1.Final</version.wildfly>\n+        <version.arquillian-tomcat-embedded>1.1.0.Final</version.arquillian-tomcat-embedded>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1f97b4292559c92a4137ef2b7566e0b1a6a5b1"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE5NzY4OQ==", "bodyText": "IMO if we have jboss-deployment-structure.xml inside src/test/resources/eap/jboss-deployment-structure.xmlis way better than work with string into the code", "url": "https://github.com/infinispan/infinispan/pull/8657#discussion_r480197689", "createdAt": "2020-08-31T15:13:48Z", "author": {"login": "gustavolira"}, "path": "integrationtests/server-integration/third-party-server/src/test/java/org/infinispan/test/integration/DeploymentHelper.java", "diffHunk": "@@ -0,0 +1,57 @@\n+package org.infinispan.test.integration;\n+\n+import java.io.File;\n+\n+import org.jboss.shrinkwrap.api.ShrinkWrap;\n+import org.jboss.shrinkwrap.api.asset.StringAsset;\n+import org.jboss.shrinkwrap.api.spec.WebArchive;\n+import org.jboss.shrinkwrap.resolver.api.maven.Maven;\n+import org.jboss.shrinkwrap.resolver.api.maven.MavenResolverSystem;\n+\n+public class DeploymentHelper {\n+\n+   public static WebArchive createDeployment() {\n+\n+      WebArchive war = ShrinkWrap.create(WebArchive.class, \"infinispan-server-integration.war\");\n+      String arquillianLaunch = System.getProperty(\"arquillian.launch\");\n+\n+      if (arquillianLaunch.equals(\"tomcat\")) {\n+         tomcat(war);\n+      } else if (arquillianLaunch.equals(\"wildfly\")) {\n+         wildfly(war);\n+      } else {\n+         throw new IllegalStateException(String.format(\"%s not supported\", arquillianLaunch));\n+      }\n+\n+      MavenResolverSystem resolver = Maven.resolver();\n+      addLibrary(war, resolver\n+            .loadPomFromFile(\"pom.xml\")\n+            .resolve(\"org.infinispan:infinispan-client-hotrod\")\n+            .withTransitivity().as(File.class));\n+      return war;\n+   }\n+\n+   private static void wildfly(WebArchive war) {\n+      String jbossDeploymentStructure = \"<jboss-deployment-structure xmlns=\\\"urn:jboss:deployment-structure:1.1\\\">\\n\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1f97b4292559c92a4137ef2b7566e0b1a6a5b1"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5NzU4MDEw", "url": "https://github.com/infinispan/infinispan/pull/8657#pullrequestreview-479758010", "createdAt": "2020-09-01T13:47:10Z", "commit": {"oid": "4c1f97b4292559c92a4137ef2b7566e0b1a6a5b1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMzo0NzoxMVrOHK3E9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMzo0NzoxMVrOHK3E9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE1MDE5OA==", "bodyText": "where is this used?", "url": "https://github.com/infinispan/infinispan/pull/8657#discussion_r481150198", "createdAt": "2020-09-01T13:47:11Z", "author": {"login": "pruivo"}, "path": "integrationtests/server-integration/third-party-server/pom.xml", "diffHunk": "@@ -0,0 +1,225 @@\n+<?xml version='1.0' encoding='UTF-8'?>\n+<project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>org.infinispan</groupId>\n+        <artifactId>infinispan-server-integration</artifactId>\n+        <version>12.0.0-SNAPSHOT</version>\n+        <relativePath>../pom.xml</relativePath>\n+    </parent>\n+\n+    <artifactId>infinispan-server-integrationtests-third-party</artifactId>\n+\n+    <properties>\n+        <version.tomcat>9.0.37</version.tomcat>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1f97b4292559c92a4137ef2b7566e0b1a6a5b1"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5NzU5MDIy", "url": "https://github.com/infinispan/infinispan/pull/8657#pullrequestreview-479759022", "createdAt": "2020-09-01T13:48:13Z", "commit": {"oid": "4c1f97b4292559c92a4137ef2b7566e0b1a6a5b1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMzo0ODoxM1rOHK3HrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMzo0ODoxM1rOHK3HrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE1MDg5Mg==", "bodyText": "update the author and since", "url": "https://github.com/infinispan/infinispan/pull/8657#discussion_r481150892", "createdAt": "2020-09-01T13:48:13Z", "author": {"login": "pruivo"}, "path": "integrationtests/server-integration/third-party-server/src/test/java/org/infinispan/test/integration/thirdparty/HotRodClientIT.java", "diffHunk": "@@ -0,0 +1,26 @@\n+package org.infinispan.test.integration.thirdparty;\n+\n+import org.infinispan.test.integration.DeploymentHelper;\n+import org.infinispan.test.integration.as.client.AbstractHotRodClientIT;\n+import org.jboss.arquillian.container.test.api.Deployment;\n+import org.jboss.arquillian.junit.Arquillian;\n+import org.jboss.shrinkwrap.api.Archive;\n+import org.jboss.shrinkwrap.api.spec.WebArchive;\n+import org.junit.runner.RunWith;\n+\n+/**\n+ * Test the Infinispan AS remote client module integration\n+ *\n+ * @author Pedro Ruivo", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1f97b4292559c92a4137ef2b7566e0b1a6a5b1"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5NzU5ODI3", "url": "https://github.com/infinispan/infinispan/pull/8657#pullrequestreview-479759827", "createdAt": "2020-09-01T13:49:00Z", "commit": {"oid": "4c1f97b4292559c92a4137ef2b7566e0b1a6a5b1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMzo0OTowMFrOHK3J7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMzo0OTowMFrOHK3J7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE1MTQ2OA==", "bodyText": "do we need the non-test dependency?", "url": "https://github.com/infinispan/infinispan/pull/8657#discussion_r481151468", "createdAt": "2020-09-01T13:49:00Z", "author": {"login": "pruivo"}, "path": "pom.xml", "diffHunk": "@@ -1189,6 +1191,18 @@\n             <artifactId>infinispan-hibernate-cache-commons</artifactId>\n             <version>${version.infinispan}</version>\n          </dependency>\n+         <dependency>\n+            <groupId>org.infinispan</groupId>\n+            <artifactId>infinispan-server-integrationtests-commons</artifactId>\n+            <version>${version.infinispan}</version>\n+            <type>test-jar</type>\n+            <scope>test</scope>\n+         </dependency>\n+         <dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1f97b4292559c92a4137ef2b7566e0b1a6a5b1"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4c1f97b4292559c92a4137ef2b7566e0b1a6a5b1", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/4c1f97b4292559c92a4137ef2b7566e0b1a6a5b1", "committedDate": "2020-08-31T14:19:07Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}, "afterCommit": {"oid": "1a9a9bdeb3f51295a9d92ebfabec581cd37f34b2", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/1a9a9bdeb3f51295a9d92ebfabec581cd37f34b2", "committedDate": "2020-09-03T18:32:00Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1a9a9bdeb3f51295a9d92ebfabec581cd37f34b2", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/1a9a9bdeb3f51295a9d92ebfabec581cd37f34b2", "committedDate": "2020-09-03T18:32:00Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}, "afterCommit": {"oid": "2fa3a0aad0348b9250f9340986f18e93c7eea730", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/2fa3a0aad0348b9250f9340986f18e93c7eea730", "committedDate": "2020-09-03T18:34:07Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNjk1NTI4", "url": "https://github.com/infinispan/infinispan/pull/8657#pullrequestreview-482695528", "createdAt": "2020-09-04T14:24:35Z", "commit": {"oid": "2fa3a0aad0348b9250f9340986f18e93c7eea730"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNDoyNDozNlrOHNPi3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNDoyNDozNlrOHNPi3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY0ODIyMg==", "bodyText": "can you change the phase so I don't have to download the WF every time I compile Infinispan?", "url": "https://github.com/infinispan/infinispan/pull/8657#discussion_r483648222", "createdAt": "2020-09-04T14:24:36Z", "author": {"login": "pruivo"}, "path": "integrationtests/server-integration/third-party-server/pom.xml", "diffHunk": "@@ -0,0 +1,220 @@\n+<?xml version='1.0' encoding='UTF-8'?>\n+<project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>org.infinispan</groupId>\n+        <artifactId>infinispan-server-integration</artifactId>\n+        <version>12.0.0-SNAPSHOT</version>\n+        <relativePath>../pom.xml</relativePath>\n+    </parent>\n+\n+    <artifactId>infinispan-third-party-integrationtests</artifactId>\n+\n+    <properties>\n+        <version.wildfly>${appserver.version}</version.wildfly>\n+        <version.arquillian-tomcat-managed>1.1.0.Final</version.arquillian-tomcat-managed>\n+        <ispnserver.project.dir>${basedir}/../../../server/runtime</ispnserver.project.dir>\n+        <ispn.config.file>${basedir}/../server-integration-commons/src/test/resources/infinispan-custom.xml</ispn.config.file>\n+    </properties>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>org.infinispan.protostream</groupId>\n+            <artifactId>protostream-processor</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.infinispan</groupId>\n+            <artifactId>infinispan-commons-test</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.infinispan</groupId>\n+            <artifactId>infinispan-core</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.infinispan</groupId>\n+            <artifactId>infinispan-client-hotrod</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.infinispan</groupId>\n+            <artifactId>infinispan-server-integrationtests-commons</artifactId>\n+            <type>test-jar</type>\n+            <scope>test</scope>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>org.jboss.arquillian.junit</groupId>\n+            <artifactId>arquillian-junit-container</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>org.jboss.shrinkwrap.resolver</groupId>\n+            <artifactId>shrinkwrap-resolver-depchain</artifactId>\n+            <type>pom</type>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jboss.shrinkwrap.descriptors</groupId>\n+            <artifactId>shrinkwrap-descriptors-impl-javaee</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>junit</groupId>\n+            <artifactId>junit</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+    </dependencies>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-failsafe-plugin</artifactId>\n+                <configuration>\n+                    <systemPropertyVariables>\n+                        <arquillian.launch>${infinispan.server.integration.launch}</arquillian.launch>\n+                        <catalinaHome>${catalinaHome}</catalinaHome>\n+                        <jbossHome>${jbossHome}</jbossHome>\n+                        <server.jvm>${server.jvm}</server.jvm>\n+                    </systemPropertyVariables>\n+                </configuration>\n+                <executions>\n+                    <execution>\n+                        <goals>\n+                            <goal>integration-test</goal>\n+                            <goal>verify</goal>\n+                        </goals>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+        </plugins>\n+    </build>\n+\n+    <profiles>\n+        <profile>\n+            <id>smoke</id>\n+            <properties>\n+                <skipTests>true</skipTests>\n+            </properties>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins</groupId>\n+                        <artifactId>maven-failsafe-plugin</artifactId>\n+                        <configuration>\n+                            <skipITs>${skipTests}</skipITs>\n+                        </configuration>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+        </profile>\n+\n+        <profile>\n+            <id>third-party-tomcat</id>\n+            <activation>\n+                <property>\n+                    <name>infinispan.server.integration.launch</name>\n+                    <value>tomcat</value>\n+                </property>\n+            </activation>\n+            <properties>\n+                <infinispan.server.integration.launch>tomcat</infinispan.server.integration.launch>\n+                <catalinaHome>${project.build.directory}/tomcat</catalinaHome>\n+            </properties>\n+            <dependencies>\n+                <!-- there is no arquillian-tomcat-managed-9. we are using arquillian-tomcat-managed-8 -->\n+                <dependency>\n+                    <groupId>org.jboss.arquillian.container</groupId>\n+                    <artifactId>arquillian-tomcat-managed-8</artifactId>\n+                    <version>${version.arquillian-tomcat-managed}</version>\n+                    <scope>test</scope>\n+                </dependency>\n+            </dependencies>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins</groupId>\n+                        <artifactId>maven-antrun-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <phase>generate-resources</phase>\n+                                <configuration>\n+                                    <target>\n+                                        <echo message=\"unzipping tomcat server\" />\n+                                        <unzip src=\"${tomcat.zip}\" dest=\"${project.build.directory}/tomcat\" />\n+                                        <pathconvert property=\"tomcat.unzip.dir\">\n+                                            <dirset dir=\"${project.build.directory}/tomcat\" includes=\"apache-tomcat-*\"/>\n+                                        </pathconvert>\n+                                        <move todir=\"${project.build.directory}/tomcat\">\n+                                            <fileset dir=\"${tomcat.unzip.dir}\"/>\n+                                        </move>\n+                                        <copy file=\"${basedir}/src/test/resources/tomcat/tomcat-users.xml\" todir=\"${project.build.directory}/tomcat/conf\" overwrite=\"true\" />\n+                                    </target>\n+                                </configuration>\n+                                <goals>\n+                                    <goal>run</goal>\n+                                </goals>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+        </profile>\n+\n+        <profile>\n+            <id>third-party-wildfly</id>\n+            <activation>\n+                <activeByDefault>true</activeByDefault>\n+                <property>\n+                    <name>infinispan.server.integration.launch</name>\n+                    <value>wildfly</value>\n+                </property>\n+            </activation>\n+            <properties>\n+                <infinispan.server.integration.launch>wildfly</infinispan.server.integration.launch>\n+                <jbossHome>${project.build.directory}/wildfly-${version.wildfly}</jbossHome>\n+            </properties>\n+            <dependencies>\n+                <dependency>\n+                    <groupId>org.wildfly.arquillian</groupId>\n+                    <artifactId>wildfly-arquillian-container-managed</artifactId>\n+                </dependency>\n+            </dependencies>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins</groupId>\n+                        <artifactId>maven-dependency-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <id>unpack</id>\n+                                <phase>process-test-classes</phase>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fa3a0aad0348b9250f9340986f18e93c7eea730"}, "originalPosition": 197}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNzA2MTg4", "url": "https://github.com/infinispan/infinispan/pull/8657#pullrequestreview-482706188", "createdAt": "2020-09-04T14:37:49Z", "commit": {"oid": "2fa3a0aad0348b9250f9340986f18e93c7eea730"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNDozNzo0OVrOHNQBzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNDozNzo0OVrOHNQBzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY1NjE0Mg==", "bodyText": "is this intentional?", "url": "https://github.com/infinispan/infinispan/pull/8657#discussion_r483656142", "createdAt": "2020-09-04T14:37:49Z", "author": {"login": "pruivo"}, "path": "integrationtests/server-integration/third-party-server/src/test/java/org/infinispan/test/integration/DeploymentHelper.java", "diffHunk": "@@ -0,0 +1,46 @@\n+package org.infinispan.test.integration;\n+\n+import java.io.File;\n+\n+import org.jboss.shrinkwrap.api.ShrinkWrap;\n+import org.jboss.shrinkwrap.api.asset.FileAsset;\n+import org.jboss.shrinkwrap.api.spec.WebArchive;\n+import org.jboss.shrinkwrap.resolver.api.maven.Maven;\n+import org.jboss.shrinkwrap.resolver.api.maven.MavenResolverSystem;\n+\n+public class DeploymentHelper {\n+\n+   public static WebArchive createDeployment() {\n+\n+      WebArchive war = ShrinkWrap.create(WebArchive.class, \"infinispan-server-integration.war\");\n+      String arquillianLaunch = System.getProperty(\"arquillian.launch\");\n+\n+      if (arquillianLaunch.equals(\"tomcat\")) {\n+         tomcat(war);\n+      } else if (arquillianLaunch.equals(\"wildfly\")) {\n+         wildfly(war);\n+      } else {\n+         throw new IllegalStateException(String.format(\"%s not supported\", arquillianLaunch));\n+      }\n+\n+      MavenResolverSystem resolver = Maven.resolver();\n+      addLibrary(war, resolver\n+            .loadPomFromFile(\"pom.xml\")\n+            .resolve(\"org.infinispan:infinispan-client-hotrod\")\n+            .withTransitivity().as(File.class));\n+      return war;\n+   }\n+\n+   private static void wildfly(WebArchive war) {\n+      war.add(new FileAsset(new File(\"src/test/resources/wildfly/jboss-deployment-structure.xml\")), \"WEB-INF/jboss-deployment-structure.xml\");\n+   }\n+\n+   private static void tomcat(WebArchive war) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fa3a0aad0348b9250f9340986f18e93c7eea730"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNzA2OTU3", "url": "https://github.com/infinispan/infinispan/pull/8657#pullrequestreview-482706957", "createdAt": "2020-09-04T14:38:46Z", "commit": {"oid": "2fa3a0aad0348b9250f9340986f18e93c7eea730"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNDozODo0NlrOHNQD8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNDozODo0NlrOHNQD8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY1NjY5MA==", "bodyText": "nitpick: move server-integration-commons beforewf-modules?", "url": "https://github.com/infinispan/infinispan/pull/8657#discussion_r483656690", "createdAt": "2020-09-04T14:38:46Z", "author": {"login": "pruivo"}, "path": "pom.xml", "diffHunk": "@@ -147,6 +147,8 @@\n       <module>integrationtests/spring-boot-it</module>\n       <module>integrationtests/server-integration</module>\n       <module>integrationtests/server-integration/wildfly-modules</module>\n+      <module>integrationtests/server-integration/third-party-server</module>\n+      <module>integrationtests/server-integration/server-integration-commons</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fa3a0aad0348b9250f9340986f18e93c7eea730"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2fa3a0aad0348b9250f9340986f18e93c7eea730", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/2fa3a0aad0348b9250f9340986f18e93c7eea730", "committedDate": "2020-09-03T18:34:07Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}, "afterCommit": {"oid": "38fb79fce8983b52537a5ce6e892d3d8c3b20e60", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/38fb79fce8983b52537a5ce6e892d3d8c3b20e60", "committedDate": "2020-09-04T18:30:22Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88ded7950fc42fb6c7c896df8f6f5975ded37760", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/88ded7950fc42fb6c7c896df8f6f5975ded37760", "committedDate": "2020-09-04T19:18:31Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "38fb79fce8983b52537a5ce6e892d3d8c3b20e60", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/38fb79fce8983b52537a5ce6e892d3d8c3b20e60", "committedDate": "2020-09-04T18:30:22Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}, "afterCommit": {"oid": "88ded7950fc42fb6c7c896df8f6f5975ded37760", "author": {"user": {"login": "diegolovison", "name": "Diego Lovison"}}, "url": "https://github.com/infinispan/infinispan/commit/88ded7950fc42fb6c7c896df8f6f5975ded37760", "committedDate": "2020-09-04T19:18:31Z", "message": "ISPN-12271 Allow different servers for server integration test suite"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTQwMDcy", "url": "https://github.com/infinispan/infinispan/pull/8657#pullrequestreview-482940072", "createdAt": "2020-09-04T21:08:47Z", "commit": {"oid": "88ded7950fc42fb6c7c896df8f6f5975ded37760"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 442, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}