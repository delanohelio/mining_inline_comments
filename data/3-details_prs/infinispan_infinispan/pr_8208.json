{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzODI4MTI5", "number": 8208, "title": "ISPN-11630 Server multimap get with metadata incorrect response ", "bodyText": "https://issues.redhat.com/browse/ISPN-11630", "createdAt": "2020-04-15T15:22:39Z", "url": "https://github.com/infinispan/infinispan/pull/8208", "merged": true, "mergeCommit": {"oid": "70f40926971d4769b24b13c1b5ef2bf1cff8595c"}, "closed": true, "closedAt": "2020-05-21T19:13:08Z", "author": {"login": "danberindei"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaDFCkABqjMyNTkyMDI1MzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjesW3ABqjMzNjA5NDQyMzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24eca9338e5239289238199f97499fe167dccb2a", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/24eca9338e5239289238199f97499fe167dccb2a", "committedDate": "2020-04-15T15:21:48Z", "message": "ISPN-11630 Server multimap get with metadata incorrect response\n\n* Server response should be empty when the operation status is\n  KeyDoesNotExist (0x02).\n* Multimap get without metadata should reply with status\n  KeyDoesNotExist (0x02) if the key does not exist."}, "afterCommit": {"oid": "99acd407478dc08e70c6461601466743b7732e93", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/99acd407478dc08e70c6461601466743b7732e93", "committedDate": "2020-04-22T07:23:12Z", "message": "ISPN-11630 Server multimap get with metadata incorrect response\n\n* Server response should be empty when the operation status is\n  KeyDoesNotExist (0x02).\n* Multimap get without metadata should reply with status\n  KeyDoesNotExist (0x02) if the key does not exist."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNTI5NTY5", "url": "https://github.com/infinispan/infinispan/pull/8208#pullrequestreview-402529569", "createdAt": "2020-04-29T10:08:38Z", "commit": {"oid": "99acd407478dc08e70c6461601466743b7732e93"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMDowODozOVrOGN4KEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMDowODozOVrOGN4KEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIwNDc1Mw==", "bodyText": "why are we adding assert here instead of just firing the logs and exceptions ?", "url": "https://github.com/infinispan/infinispan/pull/8208#discussion_r417204753", "createdAt": "2020-04-29T10:08:39Z", "author": {"login": "karesti"}, "path": "client/hotrod-client/src/main/java/org/infinispan/client/hotrod/impl/transport/netty/ChannelPool.java", "diffHunk": "@@ -142,41 +147,41 @@ private void createAndInvoke(ChannelOperation callback) {\n                assert currentActive >= 0;\n                int currentCreated = created.decrementAndGet();\n                assert currentCreated >= 0;\n+               if (trace) log.tracef(throwable, \"Channel could not be created, created = %d, active = %d\",\n+                                     currentCreated, currentActive);\n                callback.cancel(address, throwable);\n             } else {\n                callback.invoke(channel);\n             }\n          });\n       } catch (Throwable t) {\n-         active.decrementAndGet();\n-         created.decrementAndGet();\n+         int currentActive = active.decrementAndGet();\n+         assert currentActive >= 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99acd407478dc08e70c6461601466743b7732e93"}, "originalPosition": 53}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99acd407478dc08e70c6461601466743b7732e93", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/99acd407478dc08e70c6461601466743b7732e93", "committedDate": "2020-04-22T07:23:12Z", "message": "ISPN-11630 Server multimap get with metadata incorrect response\n\n* Server response should be empty when the operation status is\n  KeyDoesNotExist (0x02).\n* Multimap get without metadata should reply with status\n  KeyDoesNotExist (0x02) if the key does not exist."}, "afterCommit": {"oid": "bec8b479a2cf032f98f2b5bc8b1ae3b53e613398", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/bec8b479a2cf032f98f2b5bc8b1ae3b53e613398", "committedDate": "2020-05-19T10:41:35Z", "message": "ISPN-11630 Server multimap get with metadata incorrect response\n\n* Server response should be empty when the operation status is\n  KeyDoesNotExist (0x02).\n* Multimap get without metadata should reply with status\n  KeyDoesNotExist (0x02) if the key does not exist."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bec8b479a2cf032f98f2b5bc8b1ae3b53e613398", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/bec8b479a2cf032f98f2b5bc8b1ae3b53e613398", "committedDate": "2020-05-19T10:41:35Z", "message": "ISPN-11630 Server multimap get with metadata incorrect response\n\n* Server response should be empty when the operation status is\n  KeyDoesNotExist (0x02).\n* Multimap get without metadata should reply with status\n  KeyDoesNotExist (0x02) if the key does not exist."}, "afterCommit": {"oid": "18df230641be5c439816f4d2ba36b9b771ab52a0", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/18df230641be5c439816f4d2ba36b9b771ab52a0", "committedDate": "2020-05-20T13:47:23Z", "message": "ISPN-11630 Server multimap get with metadata incorrect response\n\n* Server response should be empty when the operation status is\n  KeyDoesNotExist (0x02).\n* Multimap get without metadata should reply with status\n  KeyDoesNotExist (0x02) if the key does not exist."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a54c4425940406a36854b3bce7dce770d2da0182", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/a54c4425940406a36854b3bce7dce770d2da0182", "committedDate": "2020-05-21T14:18:16Z", "message": "ISPN-11630 Remove HotRodTestingUtil.startHotRodServerWithDelay\n\n* Remove delay and perf parameters from startHotRodServer\n* Add TestGlobalConfigurationBuilder.cacheStarting() callback\n  and use it in HotRodConcurrentStartTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5618ee91db8f344130bef9f8e0c639972faf80f", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/d5618ee91db8f344130bef9f8e0c639972faf80f", "committedDate": "2020-05-21T14:18:16Z", "message": "ISPN-11630 Improve logging of channel events\n\n* Log the ChannelPool statistics more often\n* Add separate method to update ChannelPool statistics on close\n* Log channel reads and writes on the server side"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "073de491c646c61ae32aeed3b12394af9b37be00", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/073de491c646c61ae32aeed3b12394af9b37be00", "committedDate": "2020-05-21T14:18:16Z", "message": "ISPN-11630 Fix RemoteMultimapCacheManager generics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ecfccb608e5265963004025464cdf96c90c8edd", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/2ecfccb608e5265963004025464cdf96c90c8edd", "committedDate": "2020-05-21T14:38:51Z", "message": "ISPN-11630 Server multimap get with metadata incorrect response\n\n* Server response should be empty when the operation status is\n  KeyDoesNotExist (0x02).\n* Multimap get without metadata should reply with status\n  KeyDoesNotExist (0x02) if the key does not exist."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "18df230641be5c439816f4d2ba36b9b771ab52a0", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/18df230641be5c439816f4d2ba36b9b771ab52a0", "committedDate": "2020-05-20T13:47:23Z", "message": "ISPN-11630 Server multimap get with metadata incorrect response\n\n* Server response should be empty when the operation status is\n  KeyDoesNotExist (0x02).\n* Multimap get without metadata should reply with status\n  KeyDoesNotExist (0x02) if the key does not exist."}, "afterCommit": {"oid": "2ecfccb608e5265963004025464cdf96c90c8edd", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/2ecfccb608e5265963004025464cdf96c90c8edd", "committedDate": "2020-05-21T14:38:51Z", "message": "ISPN-11630 Server multimap get with metadata incorrect response\n\n* Server response should be empty when the operation status is\n  KeyDoesNotExist (0x02).\n* Multimap get without metadata should reply with status\n  KeyDoesNotExist (0x02) if the key does not exist."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 865, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}