{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MDc5OTY1", "number": 8285, "title": "ISPN-11532 HotRod Worker Thread Pool", "bodyText": "https://issues.redhat.com/browse/ISPN-11532\nhttps://issues.redhat.com/browse/ISPN-11531\nhttps://issues.redhat.com/browse/ISPN-11755", "createdAt": "2020-05-06T12:58:28Z", "url": "https://github.com/infinispan/infinispan/pull/8285", "merged": true, "mergeCommit": {"oid": "ae4491d1f5c3883102a3f5112cf9f364818288fb"}, "closed": true, "closedAt": "2020-05-11T17:35:50Z", "author": {"login": "wburns"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceq9FygFqTQwNjc2NTI4NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgRiCCgBqjMzMjM1NTQ2NTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NzY1Mjg0", "url": "https://github.com/infinispan/infinispan/pull/8285#pullrequestreview-406765284", "createdAt": "2020-05-06T16:06:20Z", "commit": {"oid": "f7225f4993f29db88b9c60d9749d81b7ee9ae433"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNjowNjoyMFrOGRaYPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNjowNjoyMFrOGRaYPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDkxMTE2NA==", "bodyText": "when is this true?\nI think we only create LazyInitializingBlockingTaskAwareExecutorService. It is already a ManageableExecutorService so it can be used directly without more wrapping.", "url": "https://github.com/infinispan/infinispan/pull/8285#discussion_r420911164", "createdAt": "2020-05-06T16:06:20Z", "author": {"login": "pruivo"}, "path": "server/core/src/main/java/org/infinispan/server/core/AbstractProtocolServer.java", "diffHunk": "@@ -104,23 +101,16 @@ public void start(C configuration, EmbeddedCacheManager cacheManager) {\n          throw new IllegalStateException(\"CacheIgnoreManager is a required component\");\n       }\n \n-      executor = new ThreadPoolExecutor(\n-            configuration.workerThreads(),\n-            configuration.workerThreads(),\n-            0L, TimeUnit.MILLISECONDS,\n-            new LinkedBlockingQueue<>(),\n-            new DefaultThreadFactory(getQualifiedName() + \"-ServerHandler\"),\n-            new ThreadPoolExecutor.AbortPolicy() {\n-               @Override\n-               public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {\n-                  if (e.isShutdown())\n-                     throw new IllegalLifecycleStateException(\"Server has been stopped\");\n-                  else\n-                     super.rejectedExecution(r, e);\n-               }\n-            });\n-\n-      manageableThreadPoolExecutorService = new ManageableThreadPoolExecutorService(executor);\n+      executor = bcr.getComponent(KnownComponentNames.BLOCKING_EXECUTOR, ExecutorService.class).running();\n+\n+      if (executor instanceof BlockingTaskAwareExecutorServiceImpl) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7225f4993f29db88b9c60d9749d81b7ee9ae433"}, "originalPosition": 62}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7762c3f9be1f9561158883bbe27a2cb25e0da8ef", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/7762c3f9be1f9561158883bbe27a2cb25e0da8ef", "committedDate": "2020-05-06T16:40:13Z", "message": "use executor as is"}, "afterCommit": {"oid": "542ba55ef06986da8df699d065f27406498f1d45", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/542ba55ef06986da8df699d065f27406498f1d45", "committedDate": "2020-05-06T16:40:44Z", "message": "ISPN-11755 Stats should be collected in a non blocking way"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2Nzk2Mzgz", "url": "https://github.com/infinispan/infinispan/pull/8285#pullrequestreview-406796383", "createdAt": "2020-05-06T16:43:26Z", "commit": {"oid": "542ba55ef06986da8df699d065f27406498f1d45"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "891b624e64fbba823106ed0bbe66f32a4264d067", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/891b624e64fbba823106ed0bbe66f32a4264d067", "committedDate": "2020-05-11T15:37:06Z", "message": "ISPN-11532 Replace HotRod worker thread pool"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3433eb06f70170cd5f678dd2a99214895eb55903", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/3433eb06f70170cd5f678dd2a99214895eb55903", "committedDate": "2020-05-11T15:37:07Z", "message": "ISPN-11531 HotRod Server transaction is blocking\n\n* Can now remove blockhound check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bad0a6a7c285dda6d77b555ca278b35af996b6cc", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/bad0a6a7c285dda6d77b555ca278b35af996b6cc", "committedDate": "2020-05-11T15:37:07Z", "message": "ISPN-11755 Stats should be collected in a non blocking way"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "542ba55ef06986da8df699d065f27406498f1d45", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/542ba55ef06986da8df699d065f27406498f1d45", "committedDate": "2020-05-06T16:40:44Z", "message": "ISPN-11755 Stats should be collected in a non blocking way"}, "afterCommit": {"oid": "bad0a6a7c285dda6d77b555ca278b35af996b6cc", "author": {"user": {"login": "wburns", "name": "William Burns"}}, "url": "https://github.com/infinispan/infinispan/commit/bad0a6a7c285dda6d77b555ca278b35af996b6cc", "committedDate": "2020-05-11T15:37:07Z", "message": "ISPN-11755 Stats should be collected in a non blocking way"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 717, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}