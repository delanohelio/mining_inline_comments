{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMjY1Mjc5", "number": 8350, "title": "ISPN-11851 FD_SOCK should use the same bind address as TCP", "bodyText": "https://issues.redhat.com/browse/ISPN-11851\nhttps://issues.redhat.com/browse/ISPN-12149\nAlso deprecate system properties jgroups.tcp.address\nand jgroups.udp.address", "createdAt": "2020-05-19T17:36:13Z", "url": "https://github.com/infinispan/infinispan/pull/8350", "merged": true, "mergeCommit": {"oid": "b6a73143e8dcc24d841b66278072600aff9ded63"}, "closed": true, "closedAt": "2020-09-09T14:26:33Z", "author": {"login": "danberindei"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjNBsjgFqTQxNTU4MzYyMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6o5ItAFqTQ1OTU3ODE1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NTgzNjIw", "url": "https://github.com/infinispan/infinispan/pull/8350#pullrequestreview-415583620", "createdAt": "2020-05-20T17:59:45Z", "commit": {"oid": "31ac40edb1f3d61fda2f0e0b7efb614cacbbe82f"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzo1OTo0NVrOGYXgPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODowMToyN1rOGYXkYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIwNDA5NQ==", "bodyText": "I noticed that this stack and the default tcp stack have FD_ALL3 and FD_ALL respectively. Should we consolidate those?", "url": "https://github.com/infinispan/infinispan/pull/8350#discussion_r428204095", "createdAt": "2020-05-20T17:59:45Z", "author": {"login": "wburns"}, "path": "core/src/test/resources/configs/unified/11.0.xml", "diffHunk": "@@ -10,12 +10,12 @@\n       <stack-file name=\"tcp-test\" path=\"stacks/tcp_mping/tcp1.xml\"/>\n       <!-- Inline definition -->\n       <!-- Inline definition -->\n-      <stack name=\"mping\">\n+      <stack name=\"mping\" extends=\"tcp\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31ac40edb1f3d61fda2f0e0b7efb614cacbbe82f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIwNDk2Nw==", "bodyText": "Also if we are extending tcp, we should probably only add the stack elements that are actually changing something. Most of the ones below are exactly the same.", "url": "https://github.com/infinispan/infinispan/pull/8350#discussion_r428204967", "createdAt": "2020-05-20T18:01:06Z", "author": {"login": "wburns"}, "path": "core/src/test/resources/configs/unified/11.0.xml", "diffHunk": "@@ -10,12 +10,12 @@\n       <stack-file name=\"tcp-test\" path=\"stacks/tcp_mping/tcp1.xml\"/>\n       <!-- Inline definition -->\n       <!-- Inline definition -->\n-      <stack name=\"mping\">\n+      <stack name=\"mping\" extends=\"tcp\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIwNDA5NQ=="}, "originalCommit": {"oid": "31ac40edb1f3d61fda2f0e0b7efb614cacbbe82f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIwNTE1NA==", "bodyText": "Same thing regarding trimming the rest of the protocols that are duplicate between prod and tcp.", "url": "https://github.com/infinispan/infinispan/pull/8350#discussion_r428205154", "createdAt": "2020-05-20T18:01:27Z", "author": {"login": "wburns"}, "path": "documentation/src/main/asciidoc/topics/config_examples/config_inline_jgroups.xml", "diffHunk": "@@ -1,8 +1,8 @@\n <infinispan> <1>\n   <jgroups> <2>\n-    <stack name=\"prod\"> <3>\n+    <stack name=\"prod\" extends=\"tcp\"> <3>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31ac40edb1f3d61fda2f0e0b7efb614cacbbe82f"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31ac40edb1f3d61fda2f0e0b7efb614cacbbe82f", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/31ac40edb1f3d61fda2f0e0b7efb614cacbbe82f", "committedDate": "2020-05-19T17:34:04Z", "message": "ISPN-11851 FD_SOCK should use the same bind address as TCP\n\nAlso deprecate system properties jgroups.tcp.address\nand jgroups.udp.address"}, "afterCommit": {"oid": "506a2fb3d47b0689c8b36cfa804b29ce33d6543a", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/506a2fb3d47b0689c8b36cfa804b29ce33d6543a", "committedDate": "2020-05-21T13:18:46Z", "message": "ISPN-11851 FD_SOCK should use the same bind address as TCP\n\nAlso deprecate system properties jgroups.tcp.address\nand jgroups.udp.address"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "506a2fb3d47b0689c8b36cfa804b29ce33d6543a", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/506a2fb3d47b0689c8b36cfa804b29ce33d6543a", "committedDate": "2020-05-21T13:18:46Z", "message": "ISPN-11851 FD_SOCK should use the same bind address as TCP\n\nAlso deprecate system properties jgroups.tcp.address\nand jgroups.udp.address"}, "afterCommit": {"oid": "9f022b1094d40da78c928fbd49ec2a720e3f52cb", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/9f022b1094d40da78c928fbd49ec2a720e3f52cb", "committedDate": "2020-06-02T11:29:26Z", "message": "ISPN-11851 Remove FD_SOCK and MPING bind_addr\n\nAll protocols inherid the bind_addr from the transport\nif not explicitly configured.\n\nAlso deprecate system properties jgroups.tcp.address\nand jgroups.udp.address"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9f022b1094d40da78c928fbd49ec2a720e3f52cb", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/9f022b1094d40da78c928fbd49ec2a720e3f52cb", "committedDate": "2020-06-02T11:29:26Z", "message": "ISPN-11851 Remove FD_SOCK and MPING bind_addr\n\nAll protocols inherid the bind_addr from the transport\nif not explicitly configured.\n\nAlso deprecate system properties jgroups.tcp.address\nand jgroups.udp.address"}, "afterCommit": {"oid": "294063773c696cea6eb6844d30d5297eb1e746db", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/294063773c696cea6eb6844d30d5297eb1e746db", "committedDate": "2020-06-02T11:30:45Z", "message": "ISPN-11851 Remove FD_SOCK and MPING bind_addr\n\nAll protocols inherid the bind_addr from the transport\nif not explicitly configured.\n\nAlso deprecate system properties jgroups.tcp.address\nand jgroups.udp.address\n\nRemove unused configuration examples."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "294063773c696cea6eb6844d30d5297eb1e746db", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/294063773c696cea6eb6844d30d5297eb1e746db", "committedDate": "2020-06-02T11:30:45Z", "message": "ISPN-11851 Remove FD_SOCK and MPING bind_addr\n\nAll protocols inherid the bind_addr from the transport\nif not explicitly configured.\n\nAlso deprecate system properties jgroups.tcp.address\nand jgroups.udp.address\n\nRemove unused configuration examples."}, "afterCommit": {"oid": "1f274f0c87cddae7573fce82b039108762b50041", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/1f274f0c87cddae7573fce82b039108762b50041", "committedDate": "2020-07-28T07:50:18Z", "message": "ISPN-11851 Remove FD_SOCK and MPING bind_addr\n\nAll protocols inherid the bind_addr from the transport\nif not explicitly configured.\n\nAlso deprecate system properties jgroups.tcp.address\nand jgroups.udp.address"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f274f0c87cddae7573fce82b039108762b50041", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/1f274f0c87cddae7573fce82b039108762b50041", "committedDate": "2020-07-28T07:50:18Z", "message": "ISPN-11851 Remove FD_SOCK and MPING bind_addr\n\nAll protocols inherid the bind_addr from the transport\nif not explicitly configured.\n\nAlso deprecate system properties jgroups.tcp.address\nand jgroups.udp.address"}, "afterCommit": {"oid": "ef35d7f57ec62902073893d910b00c6015999609", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/ef35d7f57ec62902073893d910b00c6015999609", "committedDate": "2020-07-30T09:56:46Z", "message": "ISPN-11851 Remove FD_SOCK and MPING bind_addr\n\nAll protocols inherid the bind_addr from the transport\nif not explicitly configured.\n\nAlso deprecate system properties jgroups.tcp.address\nand jgroups.udp.address\n\nRemove unused configuration examples."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3072e238a92593dc09ac6a75ae892f805f8311e7", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/3072e238a92593dc09ac6a75ae892f805f8311e7", "committedDate": "2020-07-30T14:26:31Z", "message": "ISPN-11851 Remove FD_SOCK and MPING bind_addr\n\nAll protocols inherit the bind_addr from the transport\nif not explicitly configured.\n\nAlso deprecate system properties jgroups.tcp.address\nand jgroups.udp.address\n\nRemove unused configuration examples."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef35d7f57ec62902073893d910b00c6015999609", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/ef35d7f57ec62902073893d910b00c6015999609", "committedDate": "2020-07-30T09:56:46Z", "message": "ISPN-11851 Remove FD_SOCK and MPING bind_addr\n\nAll protocols inherid the bind_addr from the transport\nif not explicitly configured.\n\nAlso deprecate system properties jgroups.tcp.address\nand jgroups.udp.address\n\nRemove unused configuration examples."}, "afterCommit": {"oid": "3072e238a92593dc09ac6a75ae892f805f8311e7", "author": {"user": {"login": "danberindei", "name": "Dan Berindei"}}, "url": "https://github.com/infinispan/infinispan/commit/3072e238a92593dc09ac6a75ae892f805f8311e7", "committedDate": "2020-07-30T14:26:31Z", "message": "ISPN-11851 Remove FD_SOCK and MPING bind_addr\n\nAll protocols inherit the bind_addr from the transport\nif not explicitly configured.\n\nAlso deprecate system properties jgroups.tcp.address\nand jgroups.udp.address\n\nRemove unused configuration examples."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NTc4MTU3", "url": "https://github.com/infinispan/infinispan/pull/8350#pullrequestreview-459578157", "createdAt": "2020-08-01T13:30:09Z", "commit": {"oid": "3072e238a92593dc09ac6a75ae892f805f8311e7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQxMzozMDowOVrOG6eAdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQxMzozMDowOVrOG6eAdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk2MjIyOQ==", "bodyText": "How about jgroups.tcp.port. Should we remove as well ?", "url": "https://github.com/infinispan/infinispan/pull/8350#discussion_r463962229", "createdAt": "2020-08-01T13:30:09Z", "author": {"login": "diegolovison"}, "path": "core/src/main/resources/default-configs/default-jgroups-azure.xml", "diffHunk": "@@ -5,6 +5,7 @@\n <config xmlns=\"urn:org:jgroups\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"urn:org:jgroups http://www.jgroups.org/schema/jgroups-4.2.xsd\">\n+   <!-- jgroups.tcp.address is deprecated and will be removed, see ISPN-11867 -->\n    <TCP bind_addr=\"${jgroups.bind.address,jgroups.tcp.address:SITE_LOCAL}\"\n         bind_port=\"${jgroups.bind.port,jgroups.tcp.port:7800}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3072e238a92593dc09ac6a75ae892f805f8311e7"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 798, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}