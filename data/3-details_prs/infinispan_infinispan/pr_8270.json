{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExODgzNzY2", "number": 8270, "title": "ISPN-11758 QueryCache is a global component but should scope all cached queries per cache", "bodyText": "https://issues.redhat.com/browse/ISPN-11758\nhttps://issues.redhat.com/browse/ISPN-11757", "createdAt": "2020-04-30T23:01:20Z", "url": "https://github.com/infinispan/infinispan/pull/8270", "merged": true, "mergeCommit": {"oid": "3d3924ac4471ee98436755e0af29943eb03ac3ca"}, "closed": true, "closedAt": "2020-05-04T13:19:59Z", "author": {"login": "anistor"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcc9DfZgBqjMyOTI1MjU3MzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcd-QayABqjMyOTk1NDUwMDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "593e05ca883908426ff2c26ee7a167e4834e75cc", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/593e05ca883908426ff2c26ee7a167e4834e75cc", "committedDate": "2020-04-30T22:38:27Z", "message": "ISPN-11758 QueryCache is a global component but should scope all cached queries per cache\n\n* each cache must have a stop dependency on query cache\n* clear query entries related to a cache when the cache stops"}, "afterCommit": {"oid": "5879eab299d33e974b9b1277f771b6103405d04b", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/5879eab299d33e974b9b1277f771b6103405d04b", "committedDate": "2020-05-01T08:03:01Z", "message": "ISPN-11758 QueryCache is a global component but should scope all cached queries per cache\n\n* each cache must have a stop dependency on query cache\n* clear query entries related to a cache when the cache stops"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5879eab299d33e974b9b1277f771b6103405d04b", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/5879eab299d33e974b9b1277f771b6103405d04b", "committedDate": "2020-05-01T08:03:01Z", "message": "ISPN-11758 QueryCache is a global component but should scope all cached queries per cache\n\n* each cache must have a stop dependency on query cache\n* clear query entries related to a cache when the cache stops"}, "afterCommit": {"oid": "94996e48718e5240b6843795f74d6cf074aff056", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/94996e48718e5240b6843795f74d6cf074aff056", "committedDate": "2020-05-01T10:21:29Z", "message": "ISPN-11758 QueryCache is a global component but should scope all cached queries per cache\n\n* each cache must have a stop dependency on query cache\n* clear query entries related to a cache when the cache stops"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "301e4f4b31df7cb70181fa721e1b5307a6b1a078", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/301e4f4b31df7cb70181fa721e1b5307a6b1a078", "committedDate": "2020-05-01T10:39:52Z", "message": "Remove IndexInspector and move its (minimal) functionality to QueryInterceptor"}, "afterCommit": {"oid": "1794447d07e212319473def8dfbd10fd1b20f806", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/1794447d07e212319473def8dfbd10fd1b20f806", "committedDate": "2020-05-01T12:51:56Z", "message": "Remove IndexInspector and move its (minimal) functionality to QueryInterceptor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTI2NjUw", "url": "https://github.com/infinispan/infinispan/pull/8270#pullrequestreview-404526650", "createdAt": "2020-05-02T13:01:44Z", "commit": {"oid": "1794447d07e212319473def8dfbd10fd1b20f806"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTI4MTIx", "url": "https://github.com/infinispan/infinispan/pull/8270#pullrequestreview-404528121", "createdAt": "2020-05-02T13:23:02Z", "commit": {"oid": "1794447d07e212319473def8dfbd10fd1b20f806"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxMzoyMzowMlrOGPjM2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxMzoyMzowMlrOGPjM2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk1ODU1NA==", "bodyText": "You need to take into account that the default is fs, and can be omitted. So having 2 entities with one of them pointing to local-heap, would cause only 1  property with DIRECTORY_PROVIDER_SUFFIX but two backends.", "url": "https://github.com/infinispan/infinispan/pull/8270#discussion_r418958554", "createdAt": "2020-05-02T13:23:02Z", "author": {"login": "gustavonalle"}, "path": "core/src/main/java/org/infinispan/configuration/cache/IndexingConfigurationBuilder.java", "diffHunk": "@@ -204,6 +211,14 @@ public void validate() {\n          }\n       }\n \n+      if (attributes.attribute(PROPERTIES).get()\n+                    .entrySet().stream()\n+                    .filter(e -> ((String) e.getKey()).endsWith(DIRECTORY_PROVIDER_SUFFIX))\n+                    .map(Map.Entry::getValue)\n+                    .collect(Collectors.toSet()).size() > 1) {\n+         throw CONFIG.foundMultipleDirectoryProviders();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1794447d07e212319473def8dfbd10fd1b20f806"}, "originalPosition": 37}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1794447d07e212319473def8dfbd10fd1b20f806", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/1794447d07e212319473def8dfbd10fd1b20f806", "committedDate": "2020-05-01T12:51:56Z", "message": "Remove IndexInspector and move its (minimal) functionality to QueryInterceptor"}, "afterCommit": {"oid": "87b1b9c13b889fb08f1e6e6ac7caef205aaea694", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/87b1b9c13b889fb08f1e6e6ac7caef205aaea694", "committedDate": "2020-05-03T08:11:35Z", "message": "Remove IndexInspector and move its (minimal) functionality to QueryInterceptor"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "87b1b9c13b889fb08f1e6e6ac7caef205aaea694", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/87b1b9c13b889fb08f1e6e6ac7caef205aaea694", "committedDate": "2020-05-03T08:11:35Z", "message": "Remove IndexInspector and move its (minimal) functionality to QueryInterceptor"}, "afterCommit": {"oid": "6139c5a5cbc8bc8bd8265bb389dfa9e764221771", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/6139c5a5cbc8bc8bd8265bb389dfa9e764221771", "committedDate": "2020-05-03T20:08:12Z", "message": "Remove IndexInspector and move its (minimal) functionality to QueryInterceptor"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6139c5a5cbc8bc8bd8265bb389dfa9e764221771", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/6139c5a5cbc8bc8bd8265bb389dfa9e764221771", "committedDate": "2020-05-03T20:08:12Z", "message": "Remove IndexInspector and move its (minimal) functionality to QueryInterceptor"}, "afterCommit": {"oid": "f7b14b56404b60b5841e4e3497bf61c1b0764749", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/f7b14b56404b60b5841e4e3497bf61c1b0764749", "committedDate": "2020-05-03T20:19:31Z", "message": "Remove IndexInspector and move its (minimal) functionality to QueryInterceptor"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f7b14b56404b60b5841e4e3497bf61c1b0764749", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/f7b14b56404b60b5841e4e3497bf61c1b0764749", "committedDate": "2020-05-03T20:19:31Z", "message": "Remove IndexInspector and move its (minimal) functionality to QueryInterceptor"}, "afterCommit": {"oid": "31db5ec1837199a8eb81db49f663957bdd586d1c", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/31db5ec1837199a8eb81db49f663957bdd586d1c", "committedDate": "2020-05-03T20:37:49Z", "message": "Remove IndexInspector and move its (minimal) functionality to QueryInterceptor"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31db5ec1837199a8eb81db49f663957bdd586d1c", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/31db5ec1837199a8eb81db49f663957bdd586d1c", "committedDate": "2020-05-03T20:37:49Z", "message": "Remove IndexInspector and move its (minimal) functionality to QueryInterceptor"}, "afterCommit": {"oid": "83e92176ed0fde150ba09a49333e8310ce6e249b", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/83e92176ed0fde150ba09a49333e8310ce6e249b", "committedDate": "2020-05-03T20:48:01Z", "message": "Remove IndexInspector and move its (minimal) functionality to QueryInterceptor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4aeba429f34c460e3c296ac2c30e72fc2c8a1e32", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/4aeba429f34c460e3c296ac2c30e72fc2c8a1e32", "committedDate": "2020-05-04T11:40:40Z", "message": "ISPN-11758 QueryCache is a global component but should scope all cached queries per cache\n\n* each cache must have a stop dependency on query cache\n* clear query entries related to a cache when the cache stops"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fb4591b881d3766cc27e326ad7d249d77e6f383", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/9fb4591b881d3766cc27e326ad7d249d77e6f383", "committedDate": "2020-05-04T11:40:40Z", "message": "Remove IndexInspector and move its (minimal) functionality to QueryInterceptor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e131319184a4ff19ab299f6bf2465fe097ff596", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/0e131319184a4ff19ab299f6bf2465fe097ff596", "committedDate": "2020-05-04T12:00:56Z", "message": "ISPN-11757 Do not allow multiple indexing providers per cache"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "83e92176ed0fde150ba09a49333e8310ce6e249b", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/83e92176ed0fde150ba09a49333e8310ce6e249b", "committedDate": "2020-05-03T20:48:01Z", "message": "Remove IndexInspector and move its (minimal) functionality to QueryInterceptor"}, "afterCommit": {"oid": "0e131319184a4ff19ab299f6bf2465fe097ff596", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/0e131319184a4ff19ab299f6bf2465fe097ff596", "committedDate": "2020-05-04T12:00:56Z", "message": "ISPN-11757 Do not allow multiple indexing providers per cache"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 940, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}