{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwNDIzNzcz", "number": 8849, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMDoyNzoyMVrOE580hA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMDoyOTowMlrOE583Qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MjAwNzcyOnYy", "diffSide": "RIGHT", "path": "server/runtime/src/main/java/org/infinispan/server/Bootstrap.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMDoyNzoyMVrOH0uO4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMDoyNzoyMVrOH0uO4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTA0NTQ3NA==", "bodyText": "this is going to change the UDP & MPING ports.\nNodes aren't able to see each other anymore without manually setting this property.\nRunning these commands in 2 different terminals no longer form a cluster\n$ ./bin/server.sh \n$ ./bin/server.sh -s server2 -o 100", "url": "https://github.com/infinispan/infinispan/pull/8849#discussion_r525045474", "createdAt": "2020-11-17T10:27:21Z", "author": {"login": "pruivo"}, "path": "server/runtime/src/main/java/org/infinispan/server/Bootstrap.java", "diffHunk": "@@ -100,6 +100,13 @@ protected void handleArgumentCommand(String command, String parameter, Iterator<\n             // Fall through\n          case \"--port-offset\":\n             properties.setProperty(Server.INFINISPAN_PORT_OFFSET, parameter);\n+            int offset = Integer.parseInt(parameter);\n+            if (!properties.containsKey(Server.JGROUPS_BIND_PORT)) {\n+               properties.setProperty(Server.JGROUPS_BIND_PORT, Integer.toString(Server.DEFAULT_JGROUPS_BIND_PORT + offset));\n+            }\n+            if (!properties.containsKey(Server.JGROUPS_MCAST_PORT)) {\n+               properties.setProperty(Server.JGROUPS_MCAST_PORT, Integer.toString(Server.DEFAULT_JGROUPS_MCAST_PORT + offset));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea81e058fbe7c95b2f904870b49bc5bc8e821e0e"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MjAxNDc1OnYy", "diffSide": "RIGHT", "path": "server/runtime/src/main/java/org/infinispan/server/Bootstrap.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMDoyOTowMlrOH0uTLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMDoyOTowMlrOH0uTLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTA0NjU3Mg==", "bodyText": "JGroups increments the bind_port if it isn't available. Is this a user request? what's the use case?", "url": "https://github.com/infinispan/infinispan/pull/8849#discussion_r525046572", "createdAt": "2020-11-17T10:29:02Z", "author": {"login": "pruivo"}, "path": "server/runtime/src/main/java/org/infinispan/server/Bootstrap.java", "diffHunk": "@@ -100,6 +100,13 @@ protected void handleArgumentCommand(String command, String parameter, Iterator<\n             // Fall through\n          case \"--port-offset\":\n             properties.setProperty(Server.INFINISPAN_PORT_OFFSET, parameter);\n+            int offset = Integer.parseInt(parameter);\n+            if (!properties.containsKey(Server.JGROUPS_BIND_PORT)) {\n+               properties.setProperty(Server.JGROUPS_BIND_PORT, Integer.toString(Server.DEFAULT_JGROUPS_BIND_PORT + offset));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea81e058fbe7c95b2f904870b49bc5bc8e821e0e"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3784, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}