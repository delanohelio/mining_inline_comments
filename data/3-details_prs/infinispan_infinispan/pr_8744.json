{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3NzUwMDE3", "number": 8744, "title": "ISPN-3226 Maven report generation rework", "bodyText": "https://issues.redhat.com/browse/ISPN-3226\n* Replace FindBugs with SpotBugs\n* Update plugins\n* Add dependency check to default set\n* Enable for nightly CI builds", "createdAt": "2020-10-05T10:23:35Z", "url": "https://github.com/infinispan/infinispan/pull/8744", "merged": true, "mergeCommit": {"oid": "9a2ce015cec0f4afc141065be715a5f70ab0f76c"}, "closed": true, "closedAt": "2020-10-22T15:06:28Z", "author": {"login": "tristantarrant"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPke8kgBqjM4NDA3MDMyNTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUEuJqgBqjM4OTM2MzQ5MTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8fa84b5634b713fcb9094dcfada20475fd242874", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/8fa84b5634b713fcb9094dcfada20475fd242874", "committedDate": "2020-10-05T10:12:52Z", "message": "ISPN-3226 Maven report generation rework\n* Replace FindBugs with SpotBugs\n* Update plugins\n* Add dependency check to default set\n* Enable for nightly CI builds"}, "afterCommit": {"oid": "1a8c7cd18279d5f9d198ea9d8aca04c5864e81c1", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/1a8c7cd18279d5f9d198ea9d8aca04c5864e81c1", "committedDate": "2020-10-05T14:16:18Z", "message": "WIP"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "297051b3b083e8248f3b7862d817cb9d4032f2fd", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/297051b3b083e8248f3b7862d817cb9d4032f2fd", "committedDate": "2020-10-05T16:42:03Z", "message": "WIP"}, "afterCommit": {"oid": "4a62ec53df0f9443147fbf98013348e33261f8e7", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/4a62ec53df0f9443147fbf98013348e33261f8e7", "committedDate": "2020-10-05T19:39:10Z", "message": "WIP"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4a62ec53df0f9443147fbf98013348e33261f8e7", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/4a62ec53df0f9443147fbf98013348e33261f8e7", "committedDate": "2020-10-05T19:39:10Z", "message": "WIP"}, "afterCommit": {"oid": "3444d5b3c582df8adb311895216ef60c202db0ad", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/3444d5b3c582df8adb311895216ef60c202db0ad", "committedDate": "2020-10-06T12:22:45Z", "message": "WildFly OpenSSL 1.1.3.Final"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3444d5b3c582df8adb311895216ef60c202db0ad", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/3444d5b3c582df8adb311895216ef60c202db0ad", "committedDate": "2020-10-06T12:22:45Z", "message": "WildFly OpenSSL 1.1.3.Final"}, "afterCommit": {"oid": "fce3cb2ab7f95e045dcd868316312795867f3858", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/fce3cb2ab7f95e045dcd868316312795867f3858", "committedDate": "2020-10-06T12:37:20Z", "message": "WildFly OpenSSL 1.1.3.Final"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MjYzODE3", "url": "https://github.com/infinispan/infinispan/pull/8744#pullrequestreview-504263817", "createdAt": "2020-10-07T21:01:04Z", "commit": {"oid": "fce3cb2ab7f95e045dcd868316312795867f3858"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMTowMTowNFrOHeFX6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwOToyNTo0MVrOHeVuGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMwNzM2OQ==", "bodyText": "I'd like a comment here to explain what's happening.", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r501307369", "createdAt": "2020-10-07T21:01:04Z", "author": {"login": "danberindei"}, "path": "build-configuration/pom.xml", "diffHunk": "@@ -6,6 +6,7 @@\n       <groupId>org.jboss</groupId>\n       <artifactId>jboss-parent</artifactId>\n       <version>36</version>\n+      <relativePath/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fce3cb2ab7f95e045dcd868316312795867f3858"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMwOTkwMQ==", "bodyText": "Should also be final", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r501309901", "createdAt": "2020-10-07T21:06:05Z", "author": {"login": "danberindei"}, "path": "commons/all/src/main/java/org/infinispan/commons/util/JVMMemoryInfoInfo.java", "diffHunk": "@@ -19,10 +19,10 @@\n @SuppressWarnings(\"unused\")\n public final class JVMMemoryInfoInfo implements JsonSerialization {\n \n-   private static MemoryMXBean memoryMBean;\n-   private static List<MemoryPoolMXBean> memoryPoolMBeans;\n-   private static List<BufferPoolMXBean> bufferPoolsMBeans;\n-   private static List<GarbageCollectorMXBean> garbageCollectorMXBeans;\n+   private MemoryMXBean memoryMBean;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fce3cb2ab7f95e045dcd868316312795867f3858"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxMDM2MQ==", "bodyText": "We can actually control what's going in those marshallers, just create a IPROTO issue ;)", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r501310361", "createdAt": "2020-10-07T21:07:04Z", "author": {"login": "danberindei"}, "path": "etc/spotbugs-exclusions.xml", "diffHunk": "@@ -0,0 +1,9 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<FindBugsFilter>\n+   <Match>\n+      <Source name=\"~.*\\$logger\\.java\" />\n+   </Match>\n+   <Match>\n+      <Source name=\"~.*___Marshaller_.*\\.java\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fce3cb2ab7f95e045dcd868316312795867f3858"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxMTI2Ng==", "bodyText": "Can't we use properties here? I hope at least the error is going to point to this file when we upgrade the dependencies.", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r501311266", "createdAt": "2020-10-07T21:09:00Z", "author": {"login": "danberindei"}, "path": "etc/suppressions.xml", "diffHunk": "@@ -0,0 +1,27 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<suppressions xmlns=\"https://jeremylong.github.io/DependencyCheck/dependency-suppression.1.3.xsd\">\n+   <suppress>\n+      <notes><![CDATA[\n+      file name: protostream-4.3.4.Final.jar", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fce3cb2ab7f95e045dcd868316312795867f3858"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTU2NzUxNw==", "bodyText": "I'd put dependency-check in the file name.", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r501567517", "createdAt": "2020-10-08T09:13:19Z", "author": {"login": "danberindei"}, "path": "pom.xml", "diffHunk": "@@ -2042,6 +2048,31 @@\n                <artifactId>protocol-parser-generator</artifactId>\n                <version>${version.infinispan.maven-plugins}</version>\n             </plugin>\n+            <plugin>\n+               <groupId>org.apache.maven.plugins</groupId>\n+               <artifactId>maven-project-info-reports-plugin</artifactId>\n+               <version>3.1.1</version>\n+            </plugin>\n+            <plugin>\n+               <groupId>com.github.spotbugs</groupId>\n+               <artifactId>spotbugs-maven-plugin</artifactId>\n+               <version>4.0.4</version>\n+            </plugin>\n+            <plugin>\n+               <groupId>org.owasp</groupId>\n+               <artifactId>dependency-check-maven</artifactId>\n+               <version>${version.owasp-dependency-check-plugin}</version>\n+               <executions>\n+                  <execution>\n+                     <goals>\n+                        <goal>aggregate</goal>\n+                     </goals>\n+                  </execution>\n+               </executions>\n+               <configuration>\n+                  <suppressionFile>${infinispan.root}/etc/suppressions.xml</suppressionFile>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fce3cb2ab7f95e045dcd868316312795867f3858"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTU3NTE5NA==", "bodyText": "Could we get away without building the site? The HTML output isn't usable as is anyway, we'd need to run the site:deploy or site:stage goals to put them in the correct directory structure (the links from the parent use the artifact id as the subdirectory name instead of the source directory name).", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r501575194", "createdAt": "2020-10-08T09:25:41Z", "author": {"login": "danberindei"}, "path": "Jenkinsfile", "diffHunk": "@@ -32,6 +32,12 @@ pipeline {\n                     env.DISTRIBUTION_BUILD = env.BRANCH_NAME.startsWith('PR-') && !pullRequest.labels.contains('Documentation') ? \"\" : \"-Pdistribution\"\n                 }\n \n+                // Collect reports on non-prs\n+                script {\n+                    //env.REPORTS_BUILD = env.BRANCH_NAME.startsWith('PR-') ? \"\" : \"site\"\n+                    env.REPORTS_BUILD = \"site\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fce3cb2ab7f95e045dcd868316312795867f3858"}, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fce3cb2ab7f95e045dcd868316312795867f3858", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/fce3cb2ab7f95e045dcd868316312795867f3858", "committedDate": "2020-10-06T12:37:20Z", "message": "WildFly OpenSSL 1.1.3.Final"}, "afterCommit": {"oid": "884beb470fa6130c00236265cb5e275b796d8364", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/884beb470fa6130c00236265cb5e275b796d8364", "committedDate": "2020-10-12T07:07:26Z", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs\n* Dependency Check"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "884beb470fa6130c00236265cb5e275b796d8364", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/884beb470fa6130c00236265cb5e275b796d8364", "committedDate": "2020-10-12T07:07:26Z", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs\n* Dependency Check"}, "afterCommit": {"oid": "2c5109f9d8b52f6912679e3af54785d191368ec0", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/2c5109f9d8b52f6912679e3af54785d191368ec0", "committedDate": "2020-10-12T07:08:42Z", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs (replaces FindBugs)\n* Dependency Check\n* Enable reports for branch builds"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2c5109f9d8b52f6912679e3af54785d191368ec0", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/2c5109f9d8b52f6912679e3af54785d191368ec0", "committedDate": "2020-10-12T07:08:42Z", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs (replaces FindBugs)\n* Dependency Check\n* Enable reports for branch builds"}, "afterCommit": {"oid": "50217407ac85f5f7b2a6e48eb3074be018ad58dd", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/50217407ac85f5f7b2a6e48eb3074be018ad58dd", "committedDate": "2020-10-13T16:11:23Z", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs (replaces FindBugs)\n* Dependency Check\n* Enable reports for branch builds"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "50217407ac85f5f7b2a6e48eb3074be018ad58dd", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/50217407ac85f5f7b2a6e48eb3074be018ad58dd", "committedDate": "2020-10-13T16:11:23Z", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs (replaces FindBugs)\n* Dependency Check\n* Enable reports for branch builds"}, "afterCommit": {"oid": "8e40565a98fb238f942b9c4ca30a2c74d352e15e", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/8e40565a98fb238f942b9c4ca30a2c74d352e15e", "committedDate": "2020-10-19T06:02:38Z", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs (replaces FindBugs)\n* Dependency Check\n* Enable reports for branch builds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd6f2179edadf0a12ee6bbd6021a0e7ae30007f5", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/bd6f2179edadf0a12ee6bbd6021a0e7ae30007f5", "committedDate": "2020-10-19T14:05:36Z", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs (replaces FindBugs)\n* Dependency Check\n* Enable reports for branch builds"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8e40565a98fb238f942b9c4ca30a2c74d352e15e", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/8e40565a98fb238f942b9c4ca30a2c74d352e15e", "committedDate": "2020-10-19T06:02:38Z", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs (replaces FindBugs)\n* Dependency Check\n* Enable reports for branch builds"}, "afterCommit": {"oid": "bd6f2179edadf0a12ee6bbd6021a0e7ae30007f5", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/bd6f2179edadf0a12ee6bbd6021a0e7ae30007f5", "committedDate": "2020-10-19T14:05:36Z", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs (replaces FindBugs)\n* Dependency Check\n* Enable reports for branch builds"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 350, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}