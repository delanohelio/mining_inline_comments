{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3MTIxOTcw", "number": 8044, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxOTo1OTo1MlrODn9PzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNToyOToxM1rODoYldg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMjI0NTI1OnYy", "diffSide": "RIGHT", "path": "query/src/test/java/org/infinispan/query/continuous/AbstractCQMultipleCachesTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxOTo1OTo1MlrOF2QqAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMTozMzoyMVrOF4qhGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ0MDMyMg==", "bodyText": "Why change ?", "url": "https://github.com/infinispan/infinispan/pull/8044#discussion_r392440322", "createdAt": "2020-03-13T19:59:52Z", "author": {"login": "wburns"}, "path": "query/src/test/java/org/infinispan/query/continuous/AbstractCQMultipleCachesTest.java", "diffHunk": "@@ -133,8 +133,9 @@ public void testCQCacheLeavesAndJoins() {\n          value.setName(\"John\");\n          value.setAge(i + 25);\n          cache(0).put(i, value);\n-         if (i == 4)\n+         if (i == 2) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6feafe6a56de720f4ab4d7876c833333f86e9b08"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk2MTE3OA==", "bodyText": "It's so that more entries are affected by the join, with i == 4 all but one entry were received by the listener before the kill/join.", "url": "https://github.com/infinispan/infinispan/pull/8044#discussion_r394961178", "createdAt": "2020-03-19T11:33:21Z", "author": {"login": "danberindei"}, "path": "query/src/test/java/org/infinispan/query/continuous/AbstractCQMultipleCachesTest.java", "diffHunk": "@@ -133,8 +133,9 @@ public void testCQCacheLeavesAndJoins() {\n          value.setName(\"John\");\n          value.setAge(i + 25);\n          cache(0).put(i, value);\n-         if (i == 4)\n+         if (i == 2) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ0MDMyMg=="}, "originalCommit": {"oid": "6feafe6a56de720f4ab4d7876c833333f86e9b08"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNjcyNDM4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/infinispan/notifications/cachelistener/CacheNotifierImpl.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNToyOToxM1rOF25i6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMzowMjoyMlrOF4tW3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzExMDI0OQ==", "bodyText": "I must admit this looks wrong to me until I look at rethrowException. It makes me think it should be a non null exception.", "url": "https://github.com/infinispan/infinispan/pull/8044#discussion_r393110249", "createdAt": "2020-03-16T15:29:13Z", "author": {"login": "wburns"}, "path": "core/src/main/java/org/infinispan/notifications/cachelistener/CacheNotifierImpl.java", "diffHunk": "@@ -1467,15 +1414,37 @@ private boolean isClusterListenerAvailable(CacheMode mode) {\n                log.tracef(\"Listener %s initial state for cache completed\", generatedId);\n             }\n \n-            if (t != null) {\n-               CompletableFutures.rethrowException(t);\n-            }\n+            CompletableFutures.rethrowException(t);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6feafe6a56de720f4ab4d7876c833333f86e9b08"}, "originalPosition": 126}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk2MjU4Ng==", "bodyText": "Maybe the name could be better, but throwing the exception only if present is the whole point.\nIf we do the null check outside, then throw CompletableFutures.asCompletionException(t) is even clearer and just a few characters more.", "url": "https://github.com/infinispan/infinispan/pull/8044#discussion_r394962586", "createdAt": "2020-03-19T11:36:11Z", "author": {"login": "danberindei"}, "path": "core/src/main/java/org/infinispan/notifications/cachelistener/CacheNotifierImpl.java", "diffHunk": "@@ -1467,15 +1414,37 @@ private boolean isClusterListenerAvailable(CacheMode mode) {\n                log.tracef(\"Listener %s initial state for cache completed\", generatedId);\n             }\n \n-            if (t != null) {\n-               CompletableFutures.rethrowException(t);\n-            }\n+            CompletableFutures.rethrowException(t);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzExMDI0OQ=="}, "originalCommit": {"oid": "6feafe6a56de720f4ab4d7876c833333f86e9b08"}, "originalPosition": 126}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk3MjIyMg==", "bodyText": "I renamed the method to rethrowExceptionIfPresent, it's not in a @public package so I didn't keep the old version.", "url": "https://github.com/infinispan/infinispan/pull/8044#discussion_r394972222", "createdAt": "2020-03-19T11:55:19Z", "author": {"login": "danberindei"}, "path": "core/src/main/java/org/infinispan/notifications/cachelistener/CacheNotifierImpl.java", "diffHunk": "@@ -1467,15 +1414,37 @@ private boolean isClusterListenerAvailable(CacheMode mode) {\n                log.tracef(\"Listener %s initial state for cache completed\", generatedId);\n             }\n \n-            if (t != null) {\n-               CompletableFutures.rethrowException(t);\n-            }\n+            CompletableFutures.rethrowException(t);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzExMDI0OQ=="}, "originalCommit": {"oid": "6feafe6a56de720f4ab4d7876c833333f86e9b08"}, "originalPosition": 126}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTAwNzcwOA==", "bodyText": "Sounds good.", "url": "https://github.com/infinispan/infinispan/pull/8044#discussion_r395007708", "createdAt": "2020-03-19T13:02:22Z", "author": {"login": "wburns"}, "path": "core/src/main/java/org/infinispan/notifications/cachelistener/CacheNotifierImpl.java", "diffHunk": "@@ -1467,15 +1414,37 @@ private boolean isClusterListenerAvailable(CacheMode mode) {\n                log.tracef(\"Listener %s initial state for cache completed\", generatedId);\n             }\n \n-            if (t != null) {\n-               CompletableFutures.rethrowException(t);\n-            }\n+            CompletableFutures.rethrowException(t);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzExMDI0OQ=="}, "originalCommit": {"oid": "6feafe6a56de720f4ab4d7876c833333f86e9b08"}, "originalPosition": 126}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4439, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}