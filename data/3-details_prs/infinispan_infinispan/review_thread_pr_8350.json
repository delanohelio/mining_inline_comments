{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMjY1Mjc5", "number": 8350, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzo1OTo0NVrOD-VIoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQxMzozMDowOVrOEUSiJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2Njg0NTc3OnYy", "diffSide": "RIGHT", "path": "core/src/test/resources/configs/unified/11.0.xml", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzo1OTo0NVrOGYXgPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMzo0MjowOVrOGYzPdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIwNDA5NQ==", "bodyText": "I noticed that this stack and the default tcp stack have FD_ALL3 and FD_ALL respectively. Should we consolidate those?", "url": "https://github.com/infinispan/infinispan/pull/8350#discussion_r428204095", "createdAt": "2020-05-20T17:59:45Z", "author": {"login": "wburns"}, "path": "core/src/test/resources/configs/unified/11.0.xml", "diffHunk": "@@ -10,12 +10,12 @@\n       <stack-file name=\"tcp-test\" path=\"stacks/tcp_mping/tcp1.xml\"/>\n       <!-- Inline definition -->\n       <!-- Inline definition -->\n-      <stack name=\"mping\">\n+      <stack name=\"mping\" extends=\"tcp\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31ac40edb1f3d61fda2f0e0b7efb614cacbbe82f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIwNDk2Nw==", "bodyText": "Also if we are extending tcp, we should probably only add the stack elements that are actually changing something. Most of the ones below are exactly the same.", "url": "https://github.com/infinispan/infinispan/pull/8350#discussion_r428204967", "createdAt": "2020-05-20T18:01:06Z", "author": {"login": "wburns"}, "path": "core/src/test/resources/configs/unified/11.0.xml", "diffHunk": "@@ -10,12 +10,12 @@\n       <stack-file name=\"tcp-test\" path=\"stacks/tcp_mping/tcp1.xml\"/>\n       <!-- Inline definition -->\n       <!-- Inline definition -->\n-      <stack name=\"mping\">\n+      <stack name=\"mping\" extends=\"tcp\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIwNDA5NQ=="}, "originalCommit": {"oid": "31ac40edb1f3d61fda2f0e0b7efb614cacbbe82f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYyOTIyMw==", "bodyText": "Yeah, I'll remove the common ones. I tried to expedite things by only removing the bind address stuff, but in general it's a good idea to remove the duplication in the test XMLs even if the cache manager is never started.", "url": "https://github.com/infinispan/infinispan/pull/8350#discussion_r428629223", "createdAt": "2020-05-21T12:46:11Z", "author": {"login": "danberindei"}, "path": "core/src/test/resources/configs/unified/11.0.xml", "diffHunk": "@@ -10,12 +10,12 @@\n       <stack-file name=\"tcp-test\" path=\"stacks/tcp_mping/tcp1.xml\"/>\n       <!-- Inline definition -->\n       <!-- Inline definition -->\n-      <stack name=\"mping\">\n+      <stack name=\"mping\" extends=\"tcp\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIwNDA5NQ=="}, "originalCommit": {"oid": "31ac40edb1f3d61fda2f0e0b7efb614cacbbe82f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODY0MzIzMg==", "bodyText": "Actually there's another stack extending tcp just below, so I'll keep the full definition here and only remove the bind_addr attribute.", "url": "https://github.com/infinispan/infinispan/pull/8350#discussion_r428643232", "createdAt": "2020-05-21T13:14:46Z", "author": {"login": "danberindei"}, "path": "core/src/test/resources/configs/unified/11.0.xml", "diffHunk": "@@ -10,12 +10,12 @@\n       <stack-file name=\"tcp-test\" path=\"stacks/tcp_mping/tcp1.xml\"/>\n       <!-- Inline definition -->\n       <!-- Inline definition -->\n-      <stack name=\"mping\">\n+      <stack name=\"mping\" extends=\"tcp\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIwNDA5NQ=="}, "originalCommit": {"oid": "31ac40edb1f3d61fda2f0e0b7efb614cacbbe82f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODY1ODU1MQ==", "bodyText": "WRT FD_ALL3 and FD_ALL, FD_ALL3 is very new, and that's why I only added it in the test configurations. In the original version with extends=\"tcp\", I should have used stack.combine=\"REPLACE\" stack.position=\"FD_ALL\".", "url": "https://github.com/infinispan/infinispan/pull/8350#discussion_r428658551", "createdAt": "2020-05-21T13:42:09Z", "author": {"login": "danberindei"}, "path": "core/src/test/resources/configs/unified/11.0.xml", "diffHunk": "@@ -10,12 +10,12 @@\n       <stack-file name=\"tcp-test\" path=\"stacks/tcp_mping/tcp1.xml\"/>\n       <!-- Inline definition -->\n       <!-- Inline definition -->\n-      <stack name=\"mping\">\n+      <stack name=\"mping\" extends=\"tcp\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIwNDA5NQ=="}, "originalCommit": {"oid": "31ac40edb1f3d61fda2f0e0b7efb614cacbbe82f"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2Njg1MTgwOnYy", "diffSide": "RIGHT", "path": "documentation/src/main/asciidoc/topics/config_examples/config_inline_jgroups.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODowMToyN1rOGYXkYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODowMToyN1rOGYXkYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIwNTE1NA==", "bodyText": "Same thing regarding trimming the rest of the protocols that are duplicate between prod and tcp.", "url": "https://github.com/infinispan/infinispan/pull/8350#discussion_r428205154", "createdAt": "2020-05-20T18:01:27Z", "author": {"login": "wburns"}, "path": "documentation/src/main/asciidoc/topics/config_examples/config_inline_jgroups.xml", "diffHunk": "@@ -1,8 +1,8 @@\n <infinispan> <1>\n   <jgroups> <2>\n-    <stack name=\"prod\"> <3>\n+    <stack name=\"prod\" extends=\"tcp\"> <3>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31ac40edb1f3d61fda2f0e0b7efb614cacbbe82f"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5NzEwNjI4OnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/default-configs/default-jgroups-azure.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQxMzozMDowOVrOG6eAdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwNToxNjowMlrOG6salA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk2MjIyOQ==", "bodyText": "How about jgroups.tcp.port. Should we remove as well ?", "url": "https://github.com/infinispan/infinispan/pull/8350#discussion_r463962229", "createdAt": "2020-08-01T13:30:09Z", "author": {"login": "diegolovison"}, "path": "core/src/main/resources/default-configs/default-jgroups-azure.xml", "diffHunk": "@@ -5,6 +5,7 @@\n <config xmlns=\"urn:org:jgroups\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"urn:org:jgroups http://www.jgroups.org/schema/jgroups-4.2.xsd\">\n+   <!-- jgroups.tcp.address is deprecated and will be removed, see ISPN-11867 -->\n    <TCP bind_addr=\"${jgroups.bind.address,jgroups.tcp.address:SITE_LOCAL}\"\n         bind_port=\"${jgroups.bind.port,jgroups.tcp.port:7800}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3072e238a92593dc09ac6a75ae892f805f8311e7"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDE5ODI5Mg==", "bodyText": "There are 2 problems with jgroups.tcp.address:\n\nIt's reused by other protocols in the stack, which may or may not use TCP sockets\nIt's arbitrary, there's no reason someone would want a different IP address for TCP vs UDP.\n\njgroups.tcp.port doesn't have any of those problems: each protocol using TCP sockets directly must have a different port, so the system property cannot be reused.", "url": "https://github.com/infinispan/infinispan/pull/8350#discussion_r464198292", "createdAt": "2020-08-03T05:16:02Z", "author": {"login": "danberindei"}, "path": "core/src/main/resources/default-configs/default-jgroups-azure.xml", "diffHunk": "@@ -5,6 +5,7 @@\n <config xmlns=\"urn:org:jgroups\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"urn:org:jgroups http://www.jgroups.org/schema/jgroups-4.2.xsd\">\n+   <!-- jgroups.tcp.address is deprecated and will be removed, see ISPN-11867 -->\n    <TCP bind_addr=\"${jgroups.bind.address,jgroups.tcp.address:SITE_LOCAL}\"\n         bind_port=\"${jgroups.bind.port,jgroups.tcp.port:7800}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk2MjIyOQ=="}, "originalCommit": {"oid": "3072e238a92593dc09ac6a75ae892f805f8311e7"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4232, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}