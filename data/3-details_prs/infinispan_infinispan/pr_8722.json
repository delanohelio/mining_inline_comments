{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MzMxNzY0", "number": 8722, "title": "ISPN-12362 Upgrade to protostream 4.3.4.Final", "bodyText": "https://issues.redhat.com/browse/ISPN-12362", "createdAt": "2020-09-28T18:41:53Z", "url": "https://github.com/infinispan/infinispan/pull/8722", "merged": true, "mergeCommit": {"oid": "91d1019e2aba41c95158a85e0b0e678bfd338102"}, "closed": true, "closedAt": "2020-10-01T15:52:28Z", "author": {"login": "anistor"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNZ2hnABqjM4MTY0MDE1Njc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOTNvngBqjM4MzAxNTQ5OTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b035b72e9ef7473c286ef4957771d6a26690ab3d", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/b035b72e9ef7473c286ef4957771d6a26690ab3d", "committedDate": "2020-09-28T18:41:05Z", "message": "ISPN-12362 Upgrade to protostream 4.3.4.Final"}, "afterCommit": {"oid": "9ca5deaf01b063bb5968ffac8cad0a652c307e05", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/9ca5deaf01b063bb5968ffac8cad0a652c307e05", "committedDate": "2020-09-28T20:45:13Z", "message": "ISPN-12362 Upgrade to protostream 4.3.4.Final"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9ca5deaf01b063bb5968ffac8cad0a652c307e05", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/9ca5deaf01b063bb5968ffac8cad0a652c307e05", "committedDate": "2020-09-28T20:45:13Z", "message": "ISPN-12362 Upgrade to protostream 4.3.4.Final"}, "afterCommit": {"oid": "3fdc4b7395a1da57bbce3f38e084fa834cb57fe8", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/3fdc4b7395a1da57bbce3f38e084fa834cb57fe8", "committedDate": "2020-10-01T10:27:31Z", "message": "ISPN-12362 Upgrade to protostream 4.3.4.Final"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMzEwMjU2", "url": "https://github.com/infinispan/infinispan/pull/8722#pullrequestreview-500310256", "createdAt": "2020-10-01T12:48:54Z", "commit": {"oid": "22da54c1f43ff4c099bda2cfe4ee7f66370df2f1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMjo0ODo1NFrOHbIxtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMjo0ODo1NFrOHbIxtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODIxNzM5Ng==", "bodyText": "The latest version won't include the bug \ud83d\ude09", "url": "https://github.com/infinispan/infinispan/pull/8722#discussion_r498217396", "createdAt": "2020-10-01T12:48:54Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/upgrading.adoc", "diffHunk": "@@ -65,6 +65,19 @@ provided configuration. The possible statuses of the cache health are now HEALTH\n \n The Kryo and Protostuff marshallers have been deprecated and will be removed in Infinispan 15.0\n \n+=== {brandname} now uses a version of the ProtoStream API that includes a bug", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22da54c1f43ff4c099bda2cfe4ee7f66370df2f1"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMzEzMDA2", "url": "https://github.com/infinispan/infinispan/pull/8722#pullrequestreview-500313006", "createdAt": "2020-10-01T12:52:12Z", "commit": {"oid": "22da54c1f43ff4c099bda2cfe4ee7f66370df2f1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMjo1MjoxM1rOHbI56A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMjo1MjoxM1rOHbI56A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODIxOTQ5Ng==", "bodyText": "It might be easier to state that if you have previously used annotated nested classes for your types AND you have persisted these, it's necessary to refactor said classes so that they are top-level in order for the persisted data to be read.\nIf no stores are used, then it's not necessary todo anything \ud83d\ude04", "url": "https://github.com/infinispan/infinispan/pull/8722#discussion_r498219496", "createdAt": "2020-10-01T12:52:13Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/upgrading.adoc", "diffHunk": "@@ -65,6 +65,19 @@ provided configuration. The possible statuses of the cache health are now HEALTH\n \n The Kryo and Protostuff marshallers have been deprecated and will be removed in Infinispan 15.0\n \n+=== {brandname} now uses a version of the ProtoStream API that includes a bug\n+that can affect upgrade from previous {brandname} versions. \n+\n+Protobuf message types that you generate with annotation processing at compile\n+time must have the same nesting in your annotated Java classes. If the nesting\n+in your generated messages does not match the nesting in your classes, then\n+data incompatibility issues can occur.\n+\n+However, the current version of the ProtoStream API does not correctly nest\n+message types. For this reason, if you have Java classes that include Protobuf\n+annotations, you should not nest those annotations. All Protobuf annotations in\n+your Java classes should be at top-level.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22da54c1f43ff4c099bda2cfe4ee7f66370df2f1"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "67776c739b1ea6f888d80a9d286cdc91f55be19d", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/67776c739b1ea6f888d80a9d286cdc91f55be19d", "committedDate": "2020-10-01T14:46:06Z", "message": "fix upgrade note"}, "afterCommit": {"oid": "a359d08dc8135fce7e6a236dfe24d8b64dc02b67", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/a359d08dc8135fce7e6a236dfe24d8b64dc02b67", "committedDate": "2020-10-01T14:49:58Z", "message": "ISPN-12362 Upgrade guide note"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNDM2MDky", "url": "https://github.com/infinispan/infinispan/pull/8722#pullrequestreview-500436092", "createdAt": "2020-10-01T14:56:08Z", "commit": {"oid": "67776c739b1ea6f888d80a9d286cdc91f55be19d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNDo1NzoyOFrOHbOepg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNDo1NzoyOFrOHbOepg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODMxMDgyMg==", "bodyText": "I think we can remove this paragraph. The subsequent paragraph explains the issue and what needs to be done, this just confuses me tbh.", "url": "https://github.com/infinispan/infinispan/pull/8722#discussion_r498310822", "createdAt": "2020-10-01T14:57:28Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/upgrading.adoc", "diffHunk": "@@ -65,6 +65,21 @@ provided configuration. The possible statuses of the cache health are now HEALTH\n \n The Kryo and Protostuff marshallers have been deprecated and will be removed in Infinispan 15.0\n \n+=== {brandname} includes an upgraded version of the ProtoStream API that can\n+affect upgrade from previous {brandname} versions.\n+\n+Protobuf message types that you generate with annotation processing at compile\n+time must have the same nesting in your annotated Java classes. If the nesting\n+in your generated messages does not match the nesting in your classes, then\n+data incompatibility issues can occur.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a359d08dc8135fce7e6a236dfe24d8b64dc02b67"}, "originalPosition": 10}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "08e56dc5f45a9b9ea03a13f90d690797a688442a", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/08e56dc5f45a9b9ea03a13f90d690797a688442a", "committedDate": "2020-10-01T15:01:50Z", "message": "one last thing"}, "afterCommit": {"oid": "e82c45a8980066ba77fc33a3c3001846960067d9", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/e82c45a8980066ba77fc33a3c3001846960067d9", "committedDate": "2020-10-01T15:10:36Z", "message": "ISPN-12362 Upgrade guide note"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e82c45a8980066ba77fc33a3c3001846960067d9", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/e82c45a8980066ba77fc33a3c3001846960067d9", "committedDate": "2020-10-01T15:10:36Z", "message": "ISPN-12362 Upgrade guide note"}, "afterCommit": {"oid": "1cba74e4ccec46fde8bc671d8d6c76af776e6a4f", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/1cba74e4ccec46fde8bc671d8d6c76af776e6a4f", "committedDate": "2020-10-01T15:14:20Z", "message": "ISPN-12362 Upgrade guide note"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a947c2ec590d81c1e170ed038b37ba8bf807760", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/0a947c2ec590d81c1e170ed038b37ba8bf807760", "committedDate": "2020-10-01T15:31:56Z", "message": "ISPN-12362 Upgrade to protostream 4.3.4.Final"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af5256a98bae7fc0ebd71c297822f17d586844ae", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/af5256a98bae7fc0ebd71c297822f17d586844ae", "committedDate": "2020-10-01T15:34:45Z", "message": "ISPN-12362 Upgrade guide note"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ea5df85bb3dfc352c2f7ffe1f9269648330d2510", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/ea5df85bb3dfc352c2f7ffe1f9269648330d2510", "committedDate": "2020-10-01T15:27:05Z", "message": "another thing"}, "afterCommit": {"oid": "af5256a98bae7fc0ebd71c297822f17d586844ae", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/af5256a98bae7fc0ebd71c297822f17d586844ae", "committedDate": "2020-10-01T15:34:45Z", "message": "ISPN-12362 Upgrade guide note"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 339, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}