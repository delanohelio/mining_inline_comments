{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwNDg3ODI1", "number": 7816, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDoxMzo0OFrODdWGhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNToxMDo1NVrODdXeUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMDk3NDE0OnYy", "diffSide": "RIGHT", "path": "cli/cli-client/src/main/resources/help/site.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDoxMzo0OFrOFl5I5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDoxMzo0OFrOFl5I5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI3Nzc5OQ==", "bodyText": "the -c and -s options aren't valid.", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375277799", "createdAt": "2020-02-05T14:13:48Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/resources/help/site.adoc", "diffHunk": "@@ -28,31 +28,34 @@ SYNOPSIS\n OPTIONS\n -------\n *-c, --cache*='CACHE_NAME'::", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMDk4MTUzOnYy", "diffSide": "RIGHT", "path": "cli/cli-client/src/main/resources/help/site.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDoxNTo1OVrOFl5Nkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDoxNTo1OVrOFl5Nkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI3ODk5NA==", "bodyText": "it doesn't return the status of myCache.\nIt just returns the status of the remote sites (online, offline, etc) configured in (or used by) myCache", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375278994", "createdAt": "2020-02-05T14:15:59Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/resources/help/site.adoc", "diffHunk": "@@ -28,31 +28,34 @@ SYNOPSIS\n OPTIONS\n -------\n *-c, --cache*='CACHE_NAME'::\n-Specifies a cache. Defaults to the currently selected cache.\n+Specifies a cache.\n \n *-s, --site*='SITE_NAME'::\n Specifies a site.\n \n \n EXAMPLES\n --------\n-`site status -s SITE_A` +\n-Returns the status for `SITE_A`.\n+`site status --cache=mycache` +\n+Returns the status of the `mycache` cache for all backup locations.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMDk4NTI5OnYy", "diffSide": "RIGHT", "path": "cli/cli-client/src/main/resources/help/site.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDoxNzowN1rOFl5P8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDoxNzowN1rOFl5P8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI3OTYwMQ==", "bodyText": "Same as above but for a particular remote site.\nAnd the status is shown per node. Example:\n{\"pedro-laptop-3-35787\":\"online\"}", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375279601", "createdAt": "2020-02-05T14:17:07Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/resources/help/site.adoc", "diffHunk": "@@ -28,31 +28,34 @@ SYNOPSIS\n OPTIONS\n -------\n *-c, --cache*='CACHE_NAME'::\n-Specifies a cache. Defaults to the currently selected cache.\n+Specifies a cache.\n \n *-s, --site*='SITE_NAME'::\n Specifies a site.\n \n \n EXAMPLES\n --------\n-`site status -s SITE_A` +\n-Returns the status for `SITE_A`.\n+`site status --cache=mycache` +\n+Returns the status of the `mycache` cache for all backup locations.\n \n-`site bring-online --cache=mycache --site=SITE_A` +\n-Brings the `mycache` cache online at `SITE_A`.\n+`site status --cache=mycache --site=NYC` +\n+Returns the status of the `mycache` cache in `NYC`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTAxNzMzOnYy", "diffSide": "RIGHT", "path": "cli/cli-client/src/main/resources/help/site.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDoyNTowOFrOFl5jrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDoyNTowOFrOFl5jrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI4NDY1Mw==", "bodyText": "Brings site NYC online for cache myCache", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375284653", "createdAt": "2020-02-05T14:25:08Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/resources/help/site.adoc", "diffHunk": "@@ -28,31 +28,34 @@ SYNOPSIS\n OPTIONS\n -------\n *-c, --cache*='CACHE_NAME'::\n-Specifies a cache. Defaults to the currently selected cache.\n+Specifies a cache.\n \n *-s, --site*='SITE_NAME'::\n Specifies a site.\n \n \n EXAMPLES\n --------\n-`site status -s SITE_A` +\n-Returns the status for `SITE_A`.\n+`site status --cache=mycache` +\n+Returns the status of the `mycache` cache for all backup locations.\n \n-`site bring-online --cache=mycache --site=SITE_A` +\n-Brings the `mycache` cache online at `SITE_A`.\n+`site status --cache=mycache --site=NYC` +\n+Returns the status of the `mycache` cache in `NYC`.\n \n-`site take-offline --cache=mycache --site=SITE_B` +\n-Takes the `mycache` cache offline at `SITE_B`.\n+`site bring-online --cache=mycache --site=LON` +\n+Brings the `mycache` cache online at `LON`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTAxODEzOnYy", "diffSide": "RIGHT", "path": "cli/cli-client/src/main/resources/help/site.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDoyNToyMFrOFl5kKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDoyNToyMFrOFl5kKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI4NDc3OQ==", "bodyText": "Takes site NYC offline for cache myCache", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375284779", "createdAt": "2020-02-05T14:25:20Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/resources/help/site.adoc", "diffHunk": "@@ -28,31 +28,34 @@ SYNOPSIS\n OPTIONS\n -------\n *-c, --cache*='CACHE_NAME'::\n-Specifies a cache. Defaults to the currently selected cache.\n+Specifies a cache.\n \n *-s, --site*='SITE_NAME'::\n Specifies a site.\n \n \n EXAMPLES\n --------\n-`site status -s SITE_A` +\n-Returns the status for `SITE_A`.\n+`site status --cache=mycache` +\n+Returns the status of the `mycache` cache for all backup locations.\n \n-`site bring-online --cache=mycache --site=SITE_A` +\n-Brings the `mycache` cache online at `SITE_A`.\n+`site status --cache=mycache --site=NYC` +\n+Returns the status of the `mycache` cache in `NYC`.\n \n-`site take-offline --cache=mycache --site=SITE_B` +\n-Takes the `mycache` cache offline at `SITE_B`.\n+`site bring-online --cache=mycache --site=LON` +\n+Brings the `mycache` cache online at `LON`.\n \n-`site push-site-state --site=SITE_B` +\n-Push the state of all caches to the backup site `SITE_B`.\n+`site take-offline --cache=mycache --site=NYC` +\n+Takes the `mycache` cache offline at `NYC`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTA2NTA2OnYy", "diffSide": "RIGHT", "path": "cli/cli-client/src/main/resources/help/site.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDozNjo0OVrOFl6BPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDozNjo0OVrOFl6BPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI5MjIyMA==", "bodyText": "push-site-status doesn't have  --site anymore.", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375292220", "createdAt": "2020-02-05T14:36:49Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/resources/help/site.adoc", "diffHunk": "@@ -28,31 +28,34 @@ SYNOPSIS\n OPTIONS\n -------\n *-c, --cache*='CACHE_NAME'::\n-Specifies a cache. Defaults to the currently selected cache.\n+Specifies a cache.\n \n *-s, --site*='SITE_NAME'::\n Specifies a site.\n \n \n EXAMPLES\n --------\n-`site status -s SITE_A` +\n-Returns the status for `SITE_A`.\n+`site status --cache=mycache` +\n+Returns the status of the `mycache` cache for all backup locations.\n \n-`site bring-online --cache=mycache --site=SITE_A` +\n-Brings the `mycache` cache online at `SITE_A`.\n+`site status --cache=mycache --site=NYC` +\n+Returns the status of the `mycache` cache in `NYC`.\n \n-`site take-offline --cache=mycache --site=SITE_B` +\n-Takes the `mycache` cache offline at `SITE_B`.\n+`site bring-online --cache=mycache --site=LON` +\n+Brings the `mycache` cache online at `LON`.\n \n-`site push-site-state --site=SITE_B` +\n-Push the state of all caches to the backup site `SITE_B`.\n+`site take-offline --cache=mycache --site=NYC` +\n+Takes the `mycache` cache offline at `NYC`.\n \n-`site push-site-status --site=SITE_B` +\n-Displays the current status of the push to the backup site `SITE_B`.\n+`site push-site-state --cache=mycache --site=NYC` +\n+Backs up the `mycache` cache to `NYC`.\n \n-`site cancel-push-state --site=SITE_B` +\n-Cancels the operation to push state to the backup site `SITE_B`.\n+`site push-site-status --cache=mycache --site=NYC` +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTExMzAyOnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/schema/infinispan-config-10.1.xsd", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDo0OToyNFrOFl6fsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDo0OToyNFrOFl6fsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMwMDAxOQ==", "bodyText": "A zero (or negative) value ignores this attribute and uses min-wait only (if configured).\nA \"site\" never go offline automatically when both are <= 0 (i.e. the default)", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375300019", "createdAt": "2020-02-05T14:49:24Z", "author": {"login": "pruivo"}, "path": "core/src/main/resources/schema/infinispan-config-10.1.xsd", "diffHunk": "@@ -1959,12 +1971,16 @@\n   <xs:complexType name=\"take-offline\">\n     <xs:attribute name=\"after-failures\" type=\"xs:int\" default=\"0\">\n       <xs:annotation>\n-        <xs:documentation>The number of failed request operations after which this site should be taken offline. Defaults to 0 (never). A negative value would mean that the site will be taken offline after 'min-wait'.</xs:documentation>\n+        <xs:documentation>\n+          Sets the number of consecutive failures that can occur for backup operations before sites go offline. The default value is 0 (zero) which means backup locations never go offline automatically.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 159}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTE1MjY2OnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/schema/infinispan-config-10.1.xsd", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDo1OToxNFrOFl64Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDo1OToxNFrOFl64Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMwNjMzOQ==", "bodyText": "this is the minimum time to wait before the site is taken offline after an operation fails. It is reset in a successful operation", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375306339", "createdAt": "2020-02-05T14:59:14Z", "author": {"login": "pruivo"}, "path": "core/src/main/resources/schema/infinispan-config-10.1.xsd", "diffHunk": "@@ -1959,12 +1971,16 @@\n   <xs:complexType name=\"take-offline\">\n     <xs:attribute name=\"after-failures\" type=\"xs:int\" default=\"0\">\n       <xs:annotation>\n-        <xs:documentation>The number of failed request operations after which this site should be taken offline. Defaults to 0 (never). A negative value would mean that the site will be taken offline after 'min-wait'.</xs:documentation>\n+        <xs:documentation>\n+          Sets the number of consecutive failures that can occur for backup operations before sites go offline. The default value is 0 (zero) which means backup locations never go offline automatically.\n+        </xs:documentation>\n       </xs:annotation>\n     </xs:attribute>\n     <xs:attribute name=\"min-wait\" type=\"xs:long\" default=\"0\">\n       <xs:annotation>\n-        <xs:documentation>The minimal number of millis to wait before taking this site offline, even in the case 'after-failures' is reached. If smaller or equal to 0, then only 'after-failures' is considered.</xs:documentation>\n+        <xs:documentation>\n+          Sets the minimum time to wait, in milliseconds, for backup operations to complete before sites go offline. If you set \"after-failures\", sites go offline when the wait time is reached and the number of failures occur. To use the minimum wait time only, specify a negative value for \"after-failures\".", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 167}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTE4MTIyOnYy", "diffSide": "RIGHT", "path": "documentation/src/main/asciidoc/topics/con_xsite_site_masters.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNTowNjoyNFrOFl7Keg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNTowNjoyNFrOFl7Keg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMxMDk3MA==", "bodyText": "forward backup requests to a  local site", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375310970", "createdAt": "2020-02-05T15:06:24Z", "author": {"login": "pruivo"}, "path": "documentation/src/main/asciidoc/topics/con_xsite_site_masters.adoc", "diffHunk": "@@ -0,0 +1,12 @@\n+[id='xsite_masters-{context}']\n+= Site Masters\n+Site masters are the nodes in {brandname} clusters that are responsible for\n+sending and receiving requests from backup locations.\n+\n+If a node is not a site master, it must forward backup requests to a site", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTE5ODg5OnYy", "diffSide": "RIGHT", "path": "documentation/src/main/asciidoc/topics/proc_cli_xsite_sites.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNToxMDo1NlrOFl7U_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNToxMDo1NlrOFl7U_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMxMzY2Mw==", "bodyText": "status command missing", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375313663", "createdAt": "2020-02-05T15:10:56Z", "author": {"login": "pruivo"}, "path": "documentation/src/main/asciidoc/topics/proc_cli_xsite_sites.adoc", "diffHunk": "@@ -0,0 +1,32 @@\n+[id='manage_sites-{context}']\n+= Bringing Backup Locations Offline and Online\n+Take backup locations offline manually and bring them back online.\n+\n+.Procedure\n+\n+* Check if backup locations are online or offline with the `site status`\n+command:\n++\n+----\n+//containers/default]> site --cache=cacheName --site=NYC", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4552, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}