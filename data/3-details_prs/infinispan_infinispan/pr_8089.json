{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzMTAzODUw", "number": 8089, "title": "ISPN-11516 edits to eviction and expiration.adoc", "bodyText": "https://issues.redhat.com/browse/ISPN-11516\nNeeds backport to 10.1.x", "createdAt": "2020-03-24T16:29:02Z", "url": "https://github.com/infinispan/infinispan/pull/8089", "merged": true, "mergeCommit": {"oid": "009aa2a9fff394ccff3b1c4b9e7665b2e5683cfd"}, "closed": true, "closedAt": "2020-03-24T18:56:26Z", "author": {"login": "oraNod"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQ197igFqTM4MDUxMzI0OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQ3FV2gBqjMxNjEwMDQwMTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNTEzMjQ5", "url": "https://github.com/infinispan/infinispan/pull/8089#pullrequestreview-380513249", "createdAt": "2020-03-24T16:58:21Z", "commit": {"oid": "b8eeb12ffe83ffe78be214c410f606bcec90bf49"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNjo1ODoyMVrOF66FRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNzowMDoyOVrOF66LCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMxMzM1MQ==", "bodyText": "It also applies to stores. not just data container.", "url": "https://github.com/infinispan/infinispan/pull/8089#discussion_r397313351", "createdAt": "2020-03-24T16:58:21Z", "author": {"login": "wburns"}, "path": "documentation/src/main/asciidoc/topics/con_evict_vs_expire.adoc", "diffHunk": "@@ -5,9 +5,13 @@ they remove old, unused entries. Although eviction and expiration are similar,\n they have some important differences that you should take into account when\n planning your configuration.\n \n-* [*] Eviction prevents {brandname} from exceeding the maximum size of data containers.\n+* [*] Eviction prevents {brandname} from exceeding the maximum size of the data\n+container. {brandname} performs eviction when you add entries to the cache.\n \n-* [*] Expiration limits the amount of time entries can exist.\n+* [*] Expiration limits the amount of time entries can exist in the data", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b8eeb12ffe83ffe78be214c410f606bcec90bf49"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMxMzg0NQ==", "bodyText": "\"not found\" isn't a value really. Maybe we should mention that it is null?", "url": "https://github.com/infinispan/infinispan/pull/8089#discussion_r397313845", "createdAt": "2020-03-24T16:59:03Z", "author": {"login": "wburns"}, "path": "documentation/src/main/asciidoc/topics/con_evict_vs_expire.adoc", "diffHunk": "@@ -5,9 +5,13 @@ they remove old, unused entries. Although eviction and expiration are similar,\n they have some important differences that you should take into account when\n planning your configuration.\n \n-* [*] Eviction prevents {brandname} from exceeding the maximum size of data containers.\n+* [*] Eviction prevents {brandname} from exceeding the maximum size of the data\n+container. {brandname} performs eviction when you add entries to the cache.\n \n-* [*] Expiration limits the amount of time entries can exist.\n+* [*] Expiration limits the amount of time entries can exist in the data\n+container. {brandname} uses a scheduler to periodically remove expired entries.\n+Entries that are expired but not yet removed are immediately removed on access;\n+in this case `get()` calls for expired entries return \"not found\".", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b8eeb12ffe83ffe78be214c410f606bcec90bf49"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMxNDMyMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            You must use binary or off-heap storage for custom classes that use eviction,\n          \n          \n            \n            You must use binary or off-heap storage memory based eviction,", "url": "https://github.com/infinispan/infinispan/pull/8089#discussion_r397314323", "createdAt": "2020-03-24T16:59:46Z", "author": {"login": "wburns"}, "path": "documentation/src/main/asciidoc/topics/con_eviction_custom_classes.adoc", "diffHunk": "@@ -0,0 +1,16 @@\n+[id='custom_class_eviction-{context}']\n+= Custom Classes with Memory-Based Eviction\n+You must use binary or off-heap storage for custom classes that use eviction,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b8eeb12ffe83ffe78be214c410f606bcec90bf49"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMxNDgyNA==", "bodyText": "I don't think we need to mention passivation here. Makes it sound like that is how I should fix this.", "url": "https://github.com/infinispan/infinispan/pull/8089#discussion_r397314824", "createdAt": "2020-03-24T17:00:29Z", "author": {"login": "wburns"}, "path": "documentation/src/main/asciidoc/topics/con_eviction_overview.adoc", "diffHunk": "@@ -1,5 +1,15 @@\n [id='how_eviction_works-{context}']\n = How Eviction Works\n+{brandname} eviction removes entries from the data container to make space when\n+adding new entries.\n+\n+[IMPORTANT]\n+====\n+To prevent data loss, you should always configure a persistent cache store if\n+you enable eviction. Use passivation so that {brandname} writes to persistent", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b8eeb12ffe83ffe78be214c410f606bcec90bf49"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b8eeb12ffe83ffe78be214c410f606bcec90bf49", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/b8eeb12ffe83ffe78be214c410f606bcec90bf49", "committedDate": "2020-03-24T16:27:08Z", "message": "ISPN-11516 edits to eviction and expiration.adoc"}, "afterCommit": {"oid": "e590327c099b018a0c7cb7be5ce41ceda58fd257", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/e590327c099b018a0c7cb7be5ce41ceda58fd257", "committedDate": "2020-03-24T18:17:59Z", "message": "review feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2f9736dcbb72c553796210affb0647ba85c1eb2", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/d2f9736dcbb72c553796210affb0647ba85c1eb2", "committedDate": "2020-03-24T18:19:09Z", "message": "ISPN-11516 edits to eviction and expiration.adoc"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1d6e4ca38047a612e3781355ff2f54c5fb910877", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/1d6e4ca38047a612e3781355ff2f54c5fb910877", "committedDate": "2020-03-24T18:18:24Z", "message": "Update documentation/src/main/asciidoc/topics/con_eviction_custom_classes.adoc\n\nCo-Authored-By: William Burns <william.a.burns@gmail.com>"}, "afterCommit": {"oid": "d2f9736dcbb72c553796210affb0647ba85c1eb2", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/d2f9736dcbb72c553796210affb0647ba85c1eb2", "committedDate": "2020-03-24T18:19:09Z", "message": "ISPN-11516 edits to eviction and expiration.adoc"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 974, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}