{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzNzg1NDk0", "number": 7995, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMDo0OTo1OVrODlYCmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMTowMjoyN1rODlYStA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNTE3Nzg2OnYy", "diffSide": "RIGHT", "path": "commons/src/main/java/org/infinispan/counter/api/CounterConfiguration.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMDo0OTo1OVrOFyO1zQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMTozNzo0NVrOFyQQbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIxNjI2OQ==", "bodyText": "No need to specify the type or required for any of these fields.\nWe deliberately avoid required as it limits schema evolution and all fields are optional from proto3 onwards.", "url": "https://github.com/infinispan/infinispan/pull/7995#discussion_r388216269", "createdAt": "2020-03-05T10:49:59Z", "author": {"login": "ryanemerson"}, "path": "commons/src/main/java/org/infinispan/counter/api/CounterConfiguration.java", "diffHunk": "@@ -52,26 +44,32 @@ public static Builder builder(CounterType type) {\n       return new Builder(Objects.requireNonNull(type));\n    }\n \n+   @ProtoField(number = 1, type = Type.INT64, required = true, defaultValue = \"0\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2eebd7ea0ff7c4f987fb283f6f39435557693d6e"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIzOTQ3MA==", "bodyText": "ok didn't know that.\nI was trying to avoid adding the default but I failed :)", "url": "https://github.com/infinispan/infinispan/pull/7995#discussion_r388239470", "createdAt": "2020-03-05T11:37:45Z", "author": {"login": "pruivo"}, "path": "commons/src/main/java/org/infinispan/counter/api/CounterConfiguration.java", "diffHunk": "@@ -52,26 +44,32 @@ public static Builder builder(CounterType type) {\n       return new Builder(Objects.requireNonNull(type));\n    }\n \n+   @ProtoField(number = 1, type = Type.INT64, required = true, defaultValue = \"0\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIxNjI2OQ=="}, "originalCommit": {"oid": "2eebd7ea0ff7c4f987fb283f6f39435557693d6e"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNTE4MjY4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/infinispan/functional/impl/CounterConfigurationMetaParam.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMDo1MTowOVrOFyO4fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMDo1MTowOVrOFyO4fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIxNjk1OA==", "bodyText": "11.0 \ud83d\ude42", "url": "https://github.com/infinispan/infinispan/pull/7995#discussion_r388216958", "createdAt": "2020-03-05T10:51:09Z", "author": {"login": "ryanemerson"}, "path": "core/src/main/java/org/infinispan/functional/impl/CounterConfigurationMetaParam.java", "diffHunk": "@@ -0,0 +1,29 @@\n+package org.infinispan.functional.impl;\n+\n+import org.infinispan.counter.api.CounterConfiguration;\n+import org.infinispan.functional.MetaParam;\n+\n+/**\n+ * Stores the {@link CounterConfiguration}.\n+ * <p>\n+ * The metadata is static and doesn't change. It is sent when initializing a counter and it is kept locally in all the\n+ * nodes. This avoids transfer information about the counter in every operation (e.g. boundaries/reset).\n+ *\n+ * @author Pedro Ruivo\n+ * @since 9.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2eebd7ea0ff7c4f987fb283f6f39435557693d6e"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNTE4NTU2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/infinispan/functional/impl/CounterConfigurationMetaParam.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMDo1MjowMFrOFyO6UA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMDo1MjowMFrOFyO6UA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIxNzQyNA==", "bodyText": "Nitpick: Unnecessary white space lines 17 & 23.", "url": "https://github.com/infinispan/infinispan/pull/7995#discussion_r388217424", "createdAt": "2020-03-05T10:52:00Z", "author": {"login": "ryanemerson"}, "path": "core/src/main/java/org/infinispan/functional/impl/CounterConfigurationMetaParam.java", "diffHunk": "@@ -0,0 +1,29 @@\n+package org.infinispan.functional.impl;\n+\n+import org.infinispan.counter.api.CounterConfiguration;\n+import org.infinispan.functional.MetaParam;\n+\n+/**\n+ * Stores the {@link CounterConfiguration}.\n+ * <p>\n+ * The metadata is static and doesn't change. It is sent when initializing a counter and it is kept locally in all the\n+ * nodes. This avoids transfer information about the counter in every operation (e.g. boundaries/reset).\n+ *\n+ * @author Pedro Ruivo\n+ * @since 9.0\n+ */\n+public class CounterConfigurationMetaParam implements MetaParam.Writable<CounterConfiguration> {\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2eebd7ea0ff7c4f987fb283f6f39435557693d6e"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNTE5MTQxOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/infinispan/marshall/persistence/impl/PersistenceContextInitializer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMDo1Mzo1NVrOFyO99Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMDo1Mzo1NVrOFyO99Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIxODM1Nw==", "bodyText": "These classes should be registered with the commons PersistenceContextInitializer otherwise we will have split-packages across modules with the generated marshallers.", "url": "https://github.com/infinispan/infinispan/pull/7995#discussion_r388218357", "createdAt": "2020-03-05T10:53:55Z", "author": {"login": "ryanemerson"}, "path": "core/src/main/java/org/infinispan/marshall/persistence/impl/PersistenceContextInitializer.java", "diffHunk": "@@ -36,7 +39,10 @@\n             NumericVersion.class,\n             RemoteMetadata.class,\n             SimpleClusteredVersion.class,\n-            MarshallableUserObject.class\n+            MarshallableUserObject.class,\n+            CounterConfiguration.class,\n+            CounterType.class,\n+            Storage.class,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2eebd7ea0ff7c4f987fb283f6f39435557693d6e"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNTIxOTA4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/infinispan/functional/impl/CounterConfigurationMetaParam.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMTowMjoyN1rOFyPPVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMTo0NzowNVrOFyQhPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIyMjgwNw==", "bodyText": "I'm not strongly opposed to this, as it does simplify things here, but do we want to be mixing counters with core?", "url": "https://github.com/infinispan/infinispan/pull/7995#discussion_r388222807", "createdAt": "2020-03-05T11:02:27Z", "author": {"login": "ryanemerson"}, "path": "core/src/main/java/org/infinispan/functional/impl/CounterConfigurationMetaParam.java", "diffHunk": "@@ -0,0 +1,29 @@\n+package org.infinispan.functional.impl;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2eebd7ea0ff7c4f987fb283f6f39435557693d6e"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIzOTA0Nw==", "bodyText": "I will move it to commons.\nThis class was in counters and I didn't want to create a cycle dependency between core <-> counters.", "url": "https://github.com/infinispan/infinispan/pull/7995#discussion_r388239047", "createdAt": "2020-03-05T11:36:48Z", "author": {"login": "pruivo"}, "path": "core/src/main/java/org/infinispan/functional/impl/CounterConfigurationMetaParam.java", "diffHunk": "@@ -0,0 +1,29 @@\n+package org.infinispan.functional.impl;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIyMjgwNw=="}, "originalCommit": {"oid": "2eebd7ea0ff7c4f987fb283f6f39435557693d6e"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI0Mzc3Mw==", "bodyText": "well, it has to stay in core. MetaParam.Writable is only available here.", "url": "https://github.com/infinispan/infinispan/pull/7995#discussion_r388243773", "createdAt": "2020-03-05T11:47:05Z", "author": {"login": "pruivo"}, "path": "core/src/main/java/org/infinispan/functional/impl/CounterConfigurationMetaParam.java", "diffHunk": "@@ -0,0 +1,29 @@\n+package org.infinispan.functional.impl;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIyMjgwNw=="}, "originalCommit": {"oid": "2eebd7ea0ff7c4f987fb283f6f39435557693d6e"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4409, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}