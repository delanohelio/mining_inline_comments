{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5NTMzMjgy", "number": 8630, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwOTo0MTozNFrOEZ5jbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwOTo1MjowMlrOEZ5xmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1NTkyODEzOnYy", "diffSide": "RIGHT", "path": "cli/cli-client/src/main/java/org/infinispan/cli/impl/ContextImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwOTo0MTozNFrOHC_k3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwODo0ODo1OVrOHD1GmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjkwMDgzMA==", "bodyText": "This should either be in a finally block or we should use a try-with-resources when creating the Writer.", "url": "https://github.com/infinispan/infinispan/pull/8630#discussion_r472900830", "createdAt": "2020-08-19T09:41:34Z", "author": {"login": "ryanemerson"}, "path": "cli/cli-client/src/main/java/org/infinispan/cli/impl/ContextImpl.java", "diffHunk": "@@ -59,14 +82,41 @@ public boolean isConnected() {\n \n    @Override\n    public void setProperty(String key, String value) {\n-      properties.setProperty(key, value);\n+      if (value == null) {\n+         properties.remove(key);\n+      } else {\n+         properties.setProperty(key, value);\n+      }\n    }\n \n    @Override\n    public String getProperty(String key) {\n       return properties.getProperty(key);\n    }\n \n+   @Override\n+   public String getProperty(Property property) {\n+      return properties.getProperty(property.propertyName());\n+   }\n+\n+   @Override\n+   public Properties getProperties() {\n+      return properties;\n+   }\n+\n+   @Override\n+   public void saveProperties() {\n+      Path configFile = configPath.resolve(CONFIG_FILE);\n+      try {\n+         Files.createDirectories(configPath);\n+         Writer w = Files.newBufferedWriter(configFile);\n+         properties.store(w, null);\n+         Util.close(w);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "579ef93f27771446744022a53e4da4069c11b200"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzc3NzgxNw==", "bodyText": "Done.", "url": "https://github.com/infinispan/infinispan/pull/8630#discussion_r473777817", "createdAt": "2020-08-20T08:48:59Z", "author": {"login": "tristantarrant"}, "path": "cli/cli-client/src/main/java/org/infinispan/cli/impl/ContextImpl.java", "diffHunk": "@@ -59,14 +82,41 @@ public boolean isConnected() {\n \n    @Override\n    public void setProperty(String key, String value) {\n-      properties.setProperty(key, value);\n+      if (value == null) {\n+         properties.remove(key);\n+      } else {\n+         properties.setProperty(key, value);\n+      }\n    }\n \n    @Override\n    public String getProperty(String key) {\n       return properties.getProperty(key);\n    }\n \n+   @Override\n+   public String getProperty(Property property) {\n+      return properties.getProperty(property.propertyName());\n+   }\n+\n+   @Override\n+   public Properties getProperties() {\n+      return properties;\n+   }\n+\n+   @Override\n+   public void saveProperties() {\n+      Path configFile = configPath.resolve(CONFIG_FILE);\n+      try {\n+         Files.createDirectories(configPath);\n+         Writer w = Files.newBufferedWriter(configFile);\n+         properties.store(w, null);\n+         Util.close(w);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjkwMDgzMA=="}, "originalCommit": {"oid": "579ef93f27771446744022a53e4da4069c11b200"}, "originalPosition": 91}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1NTk2MTY3OnYy", "diffSide": "RIGHT", "path": "cli/cli-client/src/main/java/org/infinispan/cli/logging/Messages.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwOTo1MToxMVrOHC_52g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwOTo1MToxMVrOHC_52g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjkwNjIwMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               @Message(value = \"Unable to load CLI configuration from `%s`. Using defaults.\")\n          \n          \n            \n               @Message(value = \"Cannot load CLI configuration from `%s`. Using default properties.\")", "url": "https://github.com/infinispan/infinispan/pull/8630#discussion_r472906202", "createdAt": "2020-08-19T09:51:11Z", "author": {"login": "oraNod"}, "path": "cli/cli-client/src/main/java/org/infinispan/cli/logging/Messages.java", "diffHunk": "@@ -200,4 +200,13 @@\n \n    @Message(value = \"Attempted to use a different realm '%s' than the already existing one '%s'\")\n    IllegalArgumentException userToolWrongRealm(String realm1, String realm2);\n+\n+   @Message(value = \"Unable to load CLI configuration from `%s`. Using defaults.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "579ef93f27771446744022a53e4da4069c11b200"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1NTk2MjUzOnYy", "diffSide": "RIGHT", "path": "cli/cli-client/src/main/java/org/infinispan/cli/logging/Messages.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwOTo1MToyOFrOHC_6bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwOTo1MToyOFrOHC_6bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjkwNjM0OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               @Message(value = \"Unable to store CLI configuration to '%s'.\")\n          \n          \n            \n               @Message(value = \"Cannot store CLI configuration to '%s'.\")", "url": "https://github.com/infinispan/infinispan/pull/8630#discussion_r472906349", "createdAt": "2020-08-19T09:51:28Z", "author": {"login": "oraNod"}, "path": "cli/cli-client/src/main/java/org/infinispan/cli/logging/Messages.java", "diffHunk": "@@ -200,4 +200,13 @@\n \n    @Message(value = \"Attempted to use a different realm '%s' than the already existing one '%s'\")\n    IllegalArgumentException userToolWrongRealm(String realm1, String realm2);\n+\n+   @Message(value = \"Unable to load CLI configuration from `%s`. Using defaults.\")\n+   String configLoadFailed(String path);\n+\n+   @Message(value = \"Unable to store CLI configuration to '%s'.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "579ef93f27771446744022a53e4da4069c11b200"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1NTk2NDQyOnYy", "diffSide": "RIGHT", "path": "cli/cli-client/src/main/java/org/infinispan/cli/logging/Messages.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwOTo1MjowMlrOHC_7pQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwOTo1MjowMlrOHC_7pQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjkwNjY2MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               @Message(value = \"Wrong argument count: %d.\")\n          \n          \n            \n               @Message(value = \"Incorrect argument count: %d.\")", "url": "https://github.com/infinispan/infinispan/pull/8630#discussion_r472906661", "createdAt": "2020-08-19T09:52:02Z", "author": {"login": "oraNod"}, "path": "cli/cli-client/src/main/java/org/infinispan/cli/logging/Messages.java", "diffHunk": "@@ -200,4 +200,13 @@\n \n    @Message(value = \"Attempted to use a different realm '%s' than the already existing one '%s'\")\n    IllegalArgumentException userToolWrongRealm(String realm1, String realm2);\n+\n+   @Message(value = \"Unable to load CLI configuration from `%s`. Using defaults.\")\n+   String configLoadFailed(String path);\n+\n+   @Message(value = \"Unable to store CLI configuration to '%s'.\")\n+   String configStoreFailed(String path);\n+\n+   @Message(value = \"Wrong argument count: %d.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "579ef93f27771446744022a53e4da4069c11b200"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3905, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}