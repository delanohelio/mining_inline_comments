{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwNDkxODE3", "number": 8757, "title": "Upgrade to Hibernate Search 6.0.0.Beta11", "bodyText": "This upgrades to Hibernate Search 6.0.0.Beta11:\n\nISPN-12406: Upgrade to Hibernate Search 6.0.0.Beta11\nISPN-12408: Remove support for the default null token on index fields\nISPN-12407: Remove support for index-time boost\n\nThere are a few performance improvements in this version that will benefit Infinispan.\nAlso, by upgrading to 6.0.0.Beta11, we can now rely on the Hibernate Search 5 annotations that are provided by Hibernate Search 6's migration helper. This automatically solves the following issues:\n\nISPN-12275: Restore support for @Field(analyzer = ...) and @Field(normalizer = ...)\nISPN-12278: Restore support for @Field(norms = ...) and @Field(termVector = ...)\nISPN-12279: Default value of @IndexedEmbedded.depth is not correctly interpreted\n\nThese features are already tested in Hibernate Search 6, so I didn't feel the need to add tests here.", "createdAt": "2020-10-09T10:19:34Z", "url": "https://github.com/infinispan/infinispan/pull/8757", "merged": true, "mergeCommit": {"oid": "4b1afecec4200870195dda55d9d0bb1528d18c2a"}, "closed": true, "closedAt": "2020-10-20T06:39:43Z", "author": {"login": "yrodiere"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQydrzAH2gAyNTAwNDkxODE3Ojc1NTVlOGU1NzE0NWM1ZTE4OGQ1OGM2YjczMjFiYmRiM2I4ZjUyMTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQ0MR7AFqTUwNTU3NTIwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7555e8e57145c5e188d58c6b7321bbdb3b8f5219", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/infinispan/infinispan/commit/7555e8e57145c5e188d58c6b7321bbdb3b8f5219", "committedDate": "2020-10-09T09:07:42Z", "message": "ISPN-12406 Upgrade to Hibernate Search's next version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82c92732de54280080e4b52d8a1ec1ebab86f3fb", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/infinispan/infinispan/commit/82c92732de54280080e4b52d8a1ec1ebab86f3fb", "committedDate": "2020-10-09T09:07:42Z", "message": "ISPN-12406 Remove an unnecessary cast"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3731e633a6929ee0d5ba007e09b3c03ab93f6fb4", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/infinispan/infinispan/commit/3731e633a6929ee0d5ba007e09b3c03ab93f6fb4", "committedDate": "2020-10-09T09:07:45Z", "message": "ISPN-12406 Handle TopFieldDocs more reliably\n\nThis is necessary because of\nhttps://hibernate.atlassian.net/browse/HSEARCH-3917: the type of TopDocs\nno longer depends on whether the sort is null or not; Hibernate Search\nmay return basic TopDocs (not instanceof TopFieldDocs) when a sort if\ndefined explicitly, if that sort is a sort by descending score."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ce13ee781bf105f2dc7fcfb4b9f9828d858c642", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/infinispan/infinispan/commit/8ce13ee781bf105f2dc7fcfb4b9f9828d858c642", "committedDate": "2020-10-09T09:19:17Z", "message": "ISPN-12406 Simplify the configuration key for the Hibernate Search backend\n\nWe no longer need to assign a name to the backend, since at least Beta10\n(maybe Beta9?).\n\nSigned-off-by: Yoann Rodi\u00e8re <yoann@hibernate.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18932df0130259d75e1609031b4c607dcbd14b25", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/infinispan/infinispan/commit/18932df0130259d75e1609031b4c607dcbd14b25", "committedDate": "2020-10-09T09:19:17Z", "message": "ISPN-12408 Remove uses of DEFAULT_NULL_TOKEN\n\nIt no longer exists in Search 6, even in the compatibility layer."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba6a3b8c602282d984e559334e5d073c04b088b9", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/infinispan/infinispan/commit/ba6a3b8c602282d984e559334e5d073c04b088b9", "committedDate": "2020-10-09T09:19:17Z", "message": "ISPN-12408 Remove deprecated and unused DEFAULT_NULL_TOKEN constant in IndexingMetadata"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b9e2da5fce36d34baf29662d0f908c0749580cd", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/infinispan/infinispan/commit/9b9e2da5fce36d34baf29662d0f908c0749580cd", "committedDate": "2020-10-09T09:19:17Z", "message": "ISPN-12407 Remove support for index-time boost\n\nIt isn't supported in Hibernate Search 6 anymore."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efa99276ab720da26807bd0bfceb30d792f611b5", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/infinispan/infinispan/commit/efa99276ab720da26807bd0bfceb30d792f611b5", "committedDate": "2020-10-09T09:19:17Z", "message": "ISPN-12275 + ISPN-12278 + ISPN-12279 Replace copy-pasted HSearch 5 annotations with an additional dependency to an HSearch artifact"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NTc1MjAz", "url": "https://github.com/infinispan/infinispan/pull/8757#pullrequestreview-505575203", "createdAt": "2020-10-09T11:06:40Z", "commit": {"oid": "efa99276ab720da26807bd0bfceb30d792f611b5"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMTowNjo0MVrOHfFPeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMTowNzo0OVrOHfFRbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjM1Mzc4Ng==", "bodyText": "This change is only necessary because the previous parsing of @Field was buggy and ignored the analyzer.\nNow that we correctly detect the analyzer, we create a full-text-field as we should, thus Hibernate Search knows any field with a value has norms, and it can use this more efficient way of detecting the presence of a field.", "url": "https://github.com/infinispan/infinispan/pull/8757#discussion_r502353786", "createdAt": "2020-10-09T11:06:41Z", "author": {"login": "yrodiere"}, "path": "query/src/test/java/org/infinispan/query/dsl/embedded/impl/LuceneTransformationTest.java", "diffHunk": "@@ -539,21 +539,21 @@ public void testNotLikeQuery() {\n    public void testIsNullQuery() {\n       assertGeneratedLuceneQuery(\n             \"select e from org.infinispan.query.dsl.embedded.impl.model.Employee e where e.name IS null\",\n-            \"+(-ConstantScore(__HSEARCH_field_names:name) #*:*)\");\n+            \"+(-ConstantScore(NormsFieldExistsQuery [field=name]) #*:*)\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efa99276ab720da26807bd0bfceb30d792f611b5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjM1NDI4NQ==", "bodyText": "This change is only necessary because the previous parsing of @SortableField was buggy.\nIf you look at the git history, we actually used to set the forField attribute in Infinispan 11 (because it was necessary), so we're back to normal.", "url": "https://github.com/infinispan/infinispan/pull/8757#discussion_r502354285", "createdAt": "2020-10-09T11:07:49Z", "author": {"login": "yrodiere"}, "path": "query/src/test/java/org/infinispan/query/dsl/embedded/impl/model/TheEntity.java", "diffHunk": "@@ -26,7 +26,7 @@ public TheEntity(String fieldX, TheEmbeddedEntity embeddedEntity) {\n       this.embeddedEntity = embeddedEntity;\n    }\n \n-   @SortableField\n+   @SortableField(forField = \"theField\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efa99276ab720da26807bd0bfceb30d792f611b5"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 363, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}