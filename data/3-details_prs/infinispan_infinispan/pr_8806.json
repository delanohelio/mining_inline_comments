{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4MTc2NTk5", "number": 8806, "title": "[11.0.x] ISPN-12383 improved clarity in marshalling docs", "bodyText": "Backport for https://issues.redhat.com/browse/ISPN-12383", "createdAt": "2020-10-22T10:13:13Z", "url": "https://github.com/infinispan/infinispan/pull/8806", "merged": true, "mergeCommit": {"oid": "bf64ddb6200b1fd6a736ba372bba2f73d7fdeadd"}, "closed": true, "closedAt": "2020-10-30T10:35:46Z", "author": {"login": "oraNod"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWmAHIgFqTUxNzUyNTg2NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXkHj2ABqjM5NDA1MjY1MTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NTI1ODY0", "url": "https://github.com/infinispan/infinispan/pull/8806#pullrequestreview-517525864", "createdAt": "2020-10-27T09:59:42Z", "commit": {"oid": "7cfc680f49abcd0a31763f8fe0816ae63145c90e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwOTo1OTo0M1rOHoz44Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwOTo1OTo0M1rOHoz44Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU1NTIzMw==", "bodyText": "In 11.0.x SerializationContextInitializers are not automatically registered. This behaviour was only introduced in 12.0.x.", "url": "https://github.com/infinispan/infinispan/pull/8806#discussion_r512555233", "createdAt": "2020-10-27T09:59:43Z", "author": {"login": "ryanemerson"}, "path": "documentation/src/main/asciidoc/topics/proc_generating_protostream_sci.adoc", "diffHunk": "@@ -0,0 +1,79 @@\n+[id='generating_protostream_sci-{context}']\n+= Generating Serialization Context Initializers\n+A ProtoStream `SerializationContext` contains Protobuf type definitions for\n+custom Java objects, loaded from Protobuf schemas, and the accompanying\n+marshallers for those objects.\n+\n+{brandname} provides a `protostream-processor` artifact that processes Java\n+annotations in your classes at compile time. The processor generates Protobuf\n+schemas, marshallers, and a concrete implementation of the\n+`SerializationContextInitializer` interface that you can use to initialize a\n+ProtoStream `SerializationContext`.\n+\n+[NOTE]\n+====\n+By default, implementation names are the annotated class name with an \"Impl\"\n+suffix.\n+====\n+\n+.Procedure\n+\n+. Add the `protostream-processor` dependency to your `pom.xml`.\n++\n+[source,xml]\n+----\n+include::dependencies_maven/protostream-processor.xml[]\n+----\n++\n+. Annotate the Java objects that you want to marshall with `@ProtoField` and `@ProtoFactory`.\n++\n+[source,java]\n+.Author.java\n+----\n+include::code_examples/Author.java[]\n+----\n++\n+[source,java]\n+.Book.java\n+----\n+include::code_examples/Book.java[]\n+----\n++\n+. Define an interface that extends `SerializationContextInitializer` and is annotated with `@AutoProtoSchemaBuilder`.\n++\n+[source,java]\n+----\n+include::code_examples/LibraryInitializer.java[]\n+----\n++\n+<1> Names the generated `.proto` schema file.\n+<2> Sets the path under `target/classes` where the schema file is generated.\n+\n+.Next steps\n+\n+{brandname} automatically registers any `SerializationContextInitializer`\n+implementations on the application classpath. After you generate a\n+`SerializationContextInitializer`, {brandname} is ready to marshall your Java\n+objects.\n+\n+[NOTE]\n+====\n+If you do not want {brandname} to automatically register your\n+`SerializationContextInitializer` implementation, you should set a value of\n+`false` for the `AutoProtoSchemaBuilder.service` annotation. However, you must\n+then declare the implementation in your {brandname} configuration to register\n+it.\n+\n+[source,java]\n+----\n+@AutoProtoSchemaBuilder(\n+      includeClasses = SomeClass.class,\n+      ...\n+      service = false\n+)\n+----", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cfc680f49abcd0a31763f8fe0816ae63145c90e"}, "originalPosition": 74}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8a7a322e94898ff36dad24770b34016239a021cc", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/8a7a322e94898ff36dad24770b34016239a021cc", "committedDate": "2020-10-29T14:40:27Z", "message": "adapt content for 11.0.x"}, "afterCommit": {"oid": "9135d4cccb351dda447c456fbddab5d904c4536b", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/9135d4cccb351dda447c456fbddab5d904c4536b", "committedDate": "2020-10-29T14:40:52Z", "message": "adapt content for 11.0.x"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7cde9c4c38bbd3041bf6774fa9f5381ee34e60f", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/e7cde9c4c38bbd3041bf6774fa9f5381ee34e60f", "committedDate": "2020-10-30T10:21:55Z", "message": "ISPN-12383 improved clarity in marshalling docs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9135d4cccb351dda447c456fbddab5d904c4536b", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/9135d4cccb351dda447c456fbddab5d904c4536b", "committedDate": "2020-10-29T14:40:52Z", "message": "adapt content for 11.0.x"}, "afterCommit": {"oid": "e7cde9c4c38bbd3041bf6774fa9f5381ee34e60f", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/e7cde9c4c38bbd3041bf6774fa9f5381ee34e60f", "committedDate": "2020-10-30T10:21:55Z", "message": "ISPN-12383 improved clarity in marshalling docs"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 394, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}