{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyNDc1MTA4", "number": 8714, "title": "ISPN-12353 REST allow backup restore progress to be submitted and polled", "bodyText": "https://issues.redhat.com/browse/ISPN-12353\nhttps://issues.redhat.com/browse/ISPN-12381", "createdAt": "2020-09-24T14:08:33Z", "url": "https://github.com/infinispan/infinispan/pull/8714", "merged": true, "mergeCommit": {"oid": "5128213a2ba136c15499588b12a1930c15e9d38b"}, "closed": true, "closedAt": "2020-10-19T19:26:15Z", "author": {"login": "ryanemerson"}, "timelineItems": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMB2HAABqjM4MDM0NTg0OTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSJf3_ABqjM4NzE2ODc3Njc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6dcad91893813fbe8129d209f298f49bc8c12acc", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/6dcad91893813fbe8129d209f298f49bc8c12acc", "committedDate": "2020-09-24T14:07:56Z", "message": "ISPN-12353 REST allow backup restore progress to be submitted and polled"}, "afterCommit": {"oid": "59d1ed5a5ca1043261d387936632561ffdb969b7", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/59d1ed5a5ca1043261d387936632561ffdb969b7", "committedDate": "2020-09-24T14:13:07Z", "message": "ISPN-12353 REST allow backup restore progress to be submitted and polled"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "59d1ed5a5ca1043261d387936632561ffdb969b7", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/59d1ed5a5ca1043261d387936632561ffdb969b7", "committedDate": "2020-09-24T14:13:07Z", "message": "ISPN-12353 REST allow backup restore progress to be submitted and polled"}, "afterCommit": {"oid": "9e7475c150dfd141600dbbce60f1c791b34a7e96", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/9e7475c150dfd141600dbbce60f1c791b34a7e96", "committedDate": "2020-10-02T12:17:47Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9e7475c150dfd141600dbbce60f1c791b34a7e96", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/9e7475c150dfd141600dbbce60f1c791b34a7e96", "committedDate": "2020-10-02T12:17:47Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}, "afterCommit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/ce09c9a4fe4123edd985c0ebb9d9b0d457023294", "committedDate": "2020-10-02T12:45:49Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxODk3MDgz", "url": "https://github.com/infinispan/infinispan/pull/8714#pullrequestreview-501897083", "createdAt": "2020-10-05T09:55:53Z", "commit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQwOTo1NTo1NFrOHcV0ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQwOTo1NTo1NFrOHcV0ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ3OTY1Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  @Option(shortName = 'n', description = \"The name of the restore request\")\n          \n          \n            \n                  @Option(shortName = 'n', description = \"Defines a name for the restore request.\")", "url": "https://github.com/infinispan/infinispan/pull/8714#discussion_r499479652", "createdAt": "2020-10-05T09:55:54Z", "author": {"login": "oraNod"}, "path": "cli/cli-client/src/main/java/org/infinispan/cli/commands/Backup.java", "diffHunk": "@@ -149,6 +149,9 @@ protected void additionalArgs(CommandInputLine cmd) {\n       @Argument(description = \"The path of the backup file \", completer = FileOptionCompleter.class, required = true)\n       Resource path;\n \n+      @Option(shortName = 'n', description = \"The name of the restore request\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxODk5NjMy", "url": "https://github.com/infinispan/infinispan/pull/8714#pullrequestreview-501899632", "createdAt": "2020-10-05T09:59:09Z", "commit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQwOTo1OTowOVrOHcV74Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQwOTo1OTowOVrOHcV74Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ4MTU2OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Remove restore requests from the server. This does not remove any restored content, it\n          \n          \n            \n            Remove restore requests from the server. This action does not remove any restored content, it", "url": "https://github.com/infinispan/infinispan/pull/8714#discussion_r499481569", "createdAt": "2020-10-05T09:59:09Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_rest_cache_managers.adoc", "diffHunk": "@@ -369,3 +371,39 @@ Content-Length: 7353\n <zip-bytes>\n --5ec9bc07-f069-4662-a535-46069afeda32--\n ----\n+\n+[id='rest_v2_restore_manager_list']\n+= Listing Restores\n+Retrieve the names of all restore requests that are in progress, completed, or\n+failed.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+GET /rest/v2/cache-managers/{cacheManagerName}/restores\n+----\n+\n+[id='rest_v2_restore_manager_head']\n+= Checking Restore Progress\n+Verify that a restore operation is complete. A `200` response indicates the\n+restore operation has completed. A `202` response indicates the backup operation is\n+in progress.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+HEAD /rest/v2/cache-managers/{cacheManagerName}/restores/{restoreName}\n+----\n+\n+[id='rest_v2_restore_manager_delete']\n+= Deleting Restore Requests\n+Remove restore requests from the server. This does not remove any restored content, it", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "originalPosition": 57}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxOTAxNTM0", "url": "https://github.com/infinispan/infinispan/pull/8714#pullrequestreview-501901534", "createdAt": "2020-10-05T10:01:29Z", "commit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDowMToyOVrOHcWBtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDowMToyOVrOHcWBtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ4MzA2MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            simply removes all meta information associated with a given request, therefore allowing\n          \n          \n            \n            removes all metadata for the restore request only. You can then use the", "url": "https://github.com/infinispan/infinispan/pull/8714#discussion_r499483061", "createdAt": "2020-10-05T10:01:29Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_rest_cache_managers.adoc", "diffHunk": "@@ -369,3 +371,39 @@ Content-Length: 7353\n <zip-bytes>\n --5ec9bc07-f069-4662-a535-46069afeda32--\n ----\n+\n+[id='rest_v2_restore_manager_list']\n+= Listing Restores\n+Retrieve the names of all restore requests that are in progress, completed, or\n+failed.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+GET /rest/v2/cache-managers/{cacheManagerName}/restores\n+----\n+\n+[id='rest_v2_restore_manager_head']\n+= Checking Restore Progress\n+Verify that a restore operation is complete. A `200` response indicates the\n+restore operation has completed. A `202` response indicates the backup operation is\n+in progress.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+HEAD /rest/v2/cache-managers/{cacheManagerName}/restores/{restoreName}\n+----\n+\n+[id='rest_v2_restore_manager_delete']\n+= Deleting Restore Requests\n+Remove restore requests from the server. This does not remove any restored content, it\n+simply removes all meta information associated with a given request, therefore allowing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxOTAyMjUw", "url": "https://github.com/infinispan/infinispan/pull/8714#pullrequestreview-501902250", "createdAt": "2020-10-05T10:02:21Z", "commit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDowMjoyMVrOHcWDzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDowMjoyMVrOHcWDzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ4MzU5OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            subsequent restore requests to re-use a past request name.\n          \n          \n            \n            name of the request to perform subsequent restore operations.", "url": "https://github.com/infinispan/infinispan/pull/8714#discussion_r499483599", "createdAt": "2020-10-05T10:02:21Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_rest_cache_managers.adoc", "diffHunk": "@@ -369,3 +371,39 @@ Content-Length: 7353\n <zip-bytes>\n --5ec9bc07-f069-4662-a535-46069afeda32--\n ----\n+\n+[id='rest_v2_restore_manager_list']\n+= Listing Restores\n+Retrieve the names of all restore requests that are in progress, completed, or\n+failed.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+GET /rest/v2/cache-managers/{cacheManagerName}/restores\n+----\n+\n+[id='rest_v2_restore_manager_head']\n+= Checking Restore Progress\n+Verify that a restore operation is complete. A `200` response indicates the\n+restore operation has completed. A `202` response indicates the backup operation is\n+in progress.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+HEAD /rest/v2/cache-managers/{cacheManagerName}/restores/{restoreName}\n+----\n+\n+[id='rest_v2_restore_manager_delete']\n+= Deleting Restore Requests\n+Remove restore requests from the server. This does not remove any restored content, it\n+simply removes all meta information associated with a given request, therefore allowing\n+subsequent restore requests to re-use a past request name.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxOTAyNjk1", "url": "https://github.com/infinispan/infinispan/pull/8714#pullrequestreview-501902695", "createdAt": "2020-10-05T10:02:55Z", "commit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDowMjo1NVrOHcWFQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDowMjo1NVrOHcWFQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ4Mzk2OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            response indicates that the restore request has been accepted for processing.\n          \n          \n            \n            response indicates that the restore request is accepted for processing.", "url": "https://github.com/infinispan/infinispan/pull/8714#discussion_r499483968", "createdAt": "2020-10-05T10:02:55Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_rest_clusters.adoc", "diffHunk": "@@ -93,7 +93,8 @@ DELETE /rest/v2/cluster/backups/{backupName}\n \n [id='rest_v2_restore_cluster']\n = Restoring {brandname} Cluster Resources\n-Apply resources in a backup archive to restore {brandname} clusters.\n+Apply resources in a backup archive to restore {brandname} clusters. A `202`\n+response indicates that the restore request has been accepted for processing.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxOTAzMTky", "url": "https://github.com/infinispan/infinispan/pull/8714#pullrequestreview-501903192", "createdAt": "2020-10-05T10:03:35Z", "commit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDowMzozNVrOHcWGtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDowMzozNVrOHcWGtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ4NDM0MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            indicates that the restore operation is in progress but will be deleted when the operation\n          \n          \n            \n            indicates that the restore operation is in progress and will be deleted when the operation", "url": "https://github.com/infinispan/infinispan/pull/8714#discussion_r499484341", "createdAt": "2020-10-05T10:03:35Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_rest_cache_managers.adoc", "diffHunk": "@@ -369,3 +371,39 @@ Content-Length: 7353\n <zip-bytes>\n --5ec9bc07-f069-4662-a535-46069afeda32--\n ----\n+\n+[id='rest_v2_restore_manager_list']\n+= Listing Restores\n+Retrieve the names of all restore requests that are in progress, completed, or\n+failed.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+GET /rest/v2/cache-managers/{cacheManagerName}/restores\n+----\n+\n+[id='rest_v2_restore_manager_head']\n+= Checking Restore Progress\n+Verify that a restore operation is complete. A `200` response indicates the\n+restore operation has completed. A `202` response indicates the backup operation is\n+in progress.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+HEAD /rest/v2/cache-managers/{cacheManagerName}/restores/{restoreName}\n+----\n+\n+[id='rest_v2_restore_manager_delete']\n+= Deleting Restore Requests\n+Remove restore requests from the server. This does not remove any restored content, it\n+simply removes all meta information associated with a given request, therefore allowing\n+subsequent restore requests to re-use a past request name.\n+\n+A `204` response indicates that the  restore request has been deleted. A `202` response\n+indicates that the restore operation is in progress but will be deleted when the operation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "originalPosition": 62}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxOTAzNTA3", "url": "https://github.com/infinispan/infinispan/pull/8714#pullrequestreview-501903507", "createdAt": "2020-10-05T10:04:00Z", "commit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDowNDowMFrOHcWHlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDowNDowMFrOHcWHlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ4NDU2Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            restore operation has completed. A `202` response indicates the backup operation is\n          \n          \n            \n            restore operation is complete. A `202` response indicates the backup operation is", "url": "https://github.com/infinispan/infinispan/pull/8714#discussion_r499484567", "createdAt": "2020-10-05T10:04:00Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_rest_clusters.adoc", "diffHunk": "@@ -161,3 +162,39 @@ Content-Length: 7353\n <zip-bytes>\n --5ec9bc07-f069-4662-a535-46069afeda32--\n ----\n+\n+[id='rest_v2_restore_cluster_list']\n+= Listing Restores\n+Retrieve the names of all restore requests that are in progress, completed, or\n+failed.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+GET /rest/v2/cluster/restores\n+----\n+\n+[id='rest_v2_restore_cluster_head']\n+= Checking Restore Progress\n+Verify that a restore operation is complete. A `200` response indicates the\n+restore operation has completed. A `202` response indicates the backup operation is", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxOTA0MDYz", "url": "https://github.com/infinispan/infinispan/pull/8714#pullrequestreview-501904063", "createdAt": "2020-10-05T10:04:47Z", "commit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDowNDo0N1rOHcWJQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDowNDo0N1rOHcWJQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ4NDk5NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            indicates that the restore operation is in progress but will be deleted when the operation\n          \n          \n            \n            indicates that the restore operation is in progress and will be deleted when the operation", "url": "https://github.com/infinispan/infinispan/pull/8714#discussion_r499484995", "createdAt": "2020-10-05T10:04:47Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_rest_clusters.adoc", "diffHunk": "@@ -161,3 +162,39 @@ Content-Length: 7353\n <zip-bytes>\n --5ec9bc07-f069-4662-a535-46069afeda32--\n ----\n+\n+[id='rest_v2_restore_cluster_list']\n+= Listing Restores\n+Retrieve the names of all restore requests that are in progress, completed, or\n+failed.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+GET /rest/v2/cluster/restores\n+----\n+\n+[id='rest_v2_restore_cluster_head']\n+= Checking Restore Progress\n+Verify that a restore operation is complete. A `200` response indicates the\n+restore operation has completed. A `202` response indicates the backup operation is\n+in progress.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+HEAD /rest/v2/cluster/restores/{restoreName}\n+----\n+\n+[id='rest_v2_restore_cluster_delete']\n+= Deleting Restore Requests\n+Remove restore requests from the server. This does not remove any restored content, it\n+simply removes all meta information associated with a given request, therefore allowing\n+subsequent restore requests to re-use a past request name.\n+\n+A `204` response indicates that the  restore request has been deleted. A `202` response\n+indicates that the restore operation is in progress but will be deleted when the operation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxOTA2NDUy", "url": "https://github.com/infinispan/infinispan/pull/8714#pullrequestreview-501906452", "createdAt": "2020-10-05T10:08:09Z", "commit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDowODowOVrOHcWQnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDowODowOVrOHcWQnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ4Njg3Ng==", "bodyText": "Same as the previous comment. Maybe we should change the heading as well?\n= Deleting Request Metadata\nRemove metadata for restore requests from the server. This action removes all metadata associated with restore requests but does not delete any restored content. If you delete the request metadata, you can use the request name to perform subsequent restore operations.", "url": "https://github.com/infinispan/infinispan/pull/8714#discussion_r499486876", "createdAt": "2020-10-05T10:08:09Z", "author": {"login": "oraNod"}, "path": "documentation/src/main/asciidoc/topics/ref_rest_clusters.adoc", "diffHunk": "@@ -161,3 +162,39 @@ Content-Length: 7353\n <zip-bytes>\n --5ec9bc07-f069-4662-a535-46069afeda32--\n ----\n+\n+[id='rest_v2_restore_cluster_list']\n+= Listing Restores\n+Retrieve the names of all restore requests that are in progress, completed, or\n+failed.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+GET /rest/v2/cluster/restores\n+----\n+\n+[id='rest_v2_restore_cluster_head']\n+= Checking Restore Progress\n+Verify that a restore operation is complete. A `200` response indicates the\n+restore operation has completed. A `202` response indicates the backup operation is\n+in progress.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+HEAD /rest/v2/cluster/restores/{restoreName}\n+----\n+\n+[id='rest_v2_restore_cluster_delete']\n+= Deleting Restore Requests\n+Remove restore requests from the server. This does not remove any restored content, it\n+simply removes all meta information associated with a given request, therefore allowing\n+subsequent restore requests to re-use a past request name.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxODg4Njg1", "url": "https://github.com/infinispan/infinispan/pull/8714#pullrequestreview-501888685", "createdAt": "2020-10-05T09:45:05Z", "commit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQwOTo0NTowNVrOHcVbDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMDoxNToyNVrOHcWf3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ3MzE2NQ==", "bodyText": "This is not strictly related to this PR, but for all the backup/restore REST API we've worked on so far.\nThose two maps (and lock) are all local; the REST API can be called through a load balancer that will cause some calls to hit different instances at runtime and thus cause results to be inconsistent. The calls affectd are those that are async and you can track later, such as starting a backup to the file system and check the stats, same as the restore.", "url": "https://github.com/infinispan/infinispan/pull/8714#discussion_r499473165", "createdAt": "2020-10-05T09:45:05Z", "author": {"login": "gustavonalle"}, "path": "server/core/src/main/java/org/infinispan/server/core/backup/BackupManagerImpl.java", "diffHunk": "@@ -45,6 +45,7 @@\n    final Lock restoreLock;\n    final Map<String, DefaultCacheManager> cacheManagers;\n    final Map<String, BackupRequest> backupMap;\n+   final Map<String, CompletionStage<Void>> restoreMap;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ4NzYxNg==", "bodyText": "It's not totally clear what {restoreName} is about (not only here, but throughout the doc), could you elaborate it is an arbitrary name set by user for tracking purposes?", "url": "https://github.com/infinispan/infinispan/pull/8714#discussion_r499487616", "createdAt": "2020-10-05T10:09:31Z", "author": {"login": "gustavonalle"}, "path": "documentation/src/main/asciidoc/topics/ref_rest_clusters.adoc", "diffHunk": "@@ -161,3 +162,39 @@ Content-Length: 7353\n <zip-bytes>\n --5ec9bc07-f069-4662-a535-46069afeda32--\n ----\n+\n+[id='rest_v2_restore_cluster_list']\n+= Listing Restores\n+Retrieve the names of all restore requests that are in progress, completed, or\n+failed.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+GET /rest/v2/cluster/restores\n+----\n+\n+[id='rest_v2_restore_cluster_head']\n+= Checking Restore Progress\n+Verify that a restore operation is complete. A `200` response indicates the\n+restore operation has completed. A `202` response indicates the backup operation is\n+in progress.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+HEAD /rest/v2/cluster/restores/{restoreName}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ5MDc4MA==", "bodyText": "I noticed that the REST resources related to backup/restore don't always include the output format for the calls. Could you add a description or example of each one? This helps the user a lot to understand everything that can be returned from a call instead of trying out and risking missing some of the fields that a response may eventually contain.", "url": "https://github.com/infinispan/infinispan/pull/8714#discussion_r499490780", "createdAt": "2020-10-05T10:15:25Z", "author": {"login": "gustavonalle"}, "path": "documentation/src/main/asciidoc/topics/ref_rest_clusters.adoc", "diffHunk": "@@ -161,3 +162,39 @@ Content-Length: 7353\n <zip-bytes>\n --5ec9bc07-f069-4662-a535-46069afeda32--\n ----\n+\n+[id='rest_v2_restore_cluster_list']\n+= Listing Restores\n+Retrieve the names of all restore requests that are in progress, completed, or\n+failed.\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+GET /rest/v2/cluster/restores\n+----", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294"}, "originalPosition": 32}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ce09c9a4fe4123edd985c0ebb9d9b0d457023294", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/ce09c9a4fe4123edd985c0ebb9d9b0d457023294", "committedDate": "2020-10-02T12:45:49Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}, "afterCommit": {"oid": "ec29fa6fb38df1624d230d03962c35671cc1c9c5", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/ec29fa6fb38df1624d230d03962c35671cc1c9c5", "committedDate": "2020-10-06T10:36:12Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ec29fa6fb38df1624d230d03962c35671cc1c9c5", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/ec29fa6fb38df1624d230d03962c35671cc1c9c5", "committedDate": "2020-10-06T10:36:12Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}, "afterCommit": {"oid": "4b2c189c344a22303e16359c01e9676f957220e0", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/4b2c189c344a22303e16359c01e9676f957220e0", "committedDate": "2020-10-06T10:52:48Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4b2c189c344a22303e16359c01e9676f957220e0", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/4b2c189c344a22303e16359c01e9676f957220e0", "committedDate": "2020-10-06T10:52:48Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}, "afterCommit": {"oid": "470482c69ea41bda8079c595f273f2feb39f6ff5", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/470482c69ea41bda8079c595f273f2feb39f6ff5", "committedDate": "2020-10-06T15:06:15Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "470482c69ea41bda8079c595f273f2feb39f6ff5", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/470482c69ea41bda8079c595f273f2feb39f6ff5", "committedDate": "2020-10-06T15:06:15Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}, "afterCommit": {"oid": "3a7ef4ec6f655bc2ae4f64906e53393a843fddbe", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/3a7ef4ec6f655bc2ae4f64906e53393a843fddbe", "committedDate": "2020-10-07T09:17:04Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a7ef4ec6f655bc2ae4f64906e53393a843fddbe", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/3a7ef4ec6f655bc2ae4f64906e53393a843fddbe", "committedDate": "2020-10-07T09:17:04Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}, "afterCommit": {"oid": "397d1d8b4cfeccc7f49a0f938955af2688cf91f3", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/397d1d8b4cfeccc7f49a0f938955af2688cf91f3", "committedDate": "2020-10-07T09:51:09Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "397d1d8b4cfeccc7f49a0f938955af2688cf91f3", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/397d1d8b4cfeccc7f49a0f938955af2688cf91f3", "committedDate": "2020-10-07T09:51:09Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}, "afterCommit": {"oid": "061202ea1212e817499af87b6ad34f7705336e24", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/061202ea1212e817499af87b6ad34f7705336e24", "committedDate": "2020-10-07T12:37:00Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "061202ea1212e817499af87b6ad34f7705336e24", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/061202ea1212e817499af87b6ad34f7705336e24", "committedDate": "2020-10-07T12:37:00Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}, "afterCommit": {"oid": "2642b290887c6cc514e13c98200f7fdd203253aa", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/2642b290887c6cc514e13c98200f7fdd203253aa", "committedDate": "2020-10-08T16:28:47Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2642b290887c6cc514e13c98200f7fdd203253aa", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/2642b290887c6cc514e13c98200f7fdd203253aa", "committedDate": "2020-10-08T16:28:47Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}, "afterCommit": {"oid": "7c068687c816db41611d1a9d3d9d398d6479ce73", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/7c068687c816db41611d1a9d3d9d398d6479ce73", "committedDate": "2020-10-09T12:57:41Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bc227d9ba09522383f6b42eb9c06ca347e6fc2a", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/2bc227d9ba09522383f6b42eb9c06ca347e6fc2a", "committedDate": "2020-10-13T13:56:03Z", "message": "ISPN-12394 Allow templates to be defined clusterwide and persisted"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "155b1ff04ca5322b446cf00c6af8825628d6717a", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/155b1ff04ca5322b446cf00c6af8825628d6717a", "committedDate": "2020-10-13T13:56:03Z", "message": "ISPN-12411 org.infinispan.CONFIG should ignore zero-capacity-node=true"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1c2f0d522cbc6d90b5aa00943229fd4c80f4401", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/c1c2f0d522cbc6d90b5aa00943229fd4c80f4401", "committedDate": "2020-10-13T13:59:01Z", "message": "ISPN-12353 REST allow backup restore progress to be submitted and polled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc49e47f9bb5b38e73d33133b3e70b7c60856e5d", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/bc49e47f9bb5b38e73d33133b3e70b7c60856e5d", "committedDate": "2020-10-13T13:59:01Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c068687c816db41611d1a9d3d9d398d6479ce73", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/7c068687c816db41611d1a9d3d9d398d6479ce73", "committedDate": "2020-10-09T12:57:41Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}, "afterCommit": {"oid": "bc49e47f9bb5b38e73d33133b3e70b7c60856e5d", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/bc49e47f9bb5b38e73d33133b3e70b7c60856e5d", "committedDate": "2020-10-13T13:59:01Z", "message": "ISPN-12381 Cache restore operations not executed across the cluster\n\nInternalMetadataImpl.Externalizer reinstated until ISPN-9622 is in place."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 334, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}