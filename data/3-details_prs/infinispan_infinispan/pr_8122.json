{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1NTU2MDI1", "number": 8122, "title": "ISPN-11556 SFS file location not relative to global persistent-location", "bodyText": "https://issues.redhat.com/browse/ISPN-11556\nPreview to see how many tests fail", "createdAt": "2020-03-30T10:26:38Z", "url": "https://github.com/infinispan/infinispan/pull/8122", "merged": true, "mergeCommit": {"oid": "2eec6980d48ac1d05cf81a3b518a794f03b26348"}, "closed": true, "closedAt": "2020-04-17T14:39:50Z", "author": {"login": "ryanemerson"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTUtbjABqjMxODcxMzczNzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYIKsRgBqjMyMzg3MDg0ODM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1b6c176d317271a9b4e3bc3ed48f45228b29b68b", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/1b6c176d317271a9b4e3bc3ed48f45228b29b68b", "committedDate": "2020-03-30T10:26:05Z", "message": "ISPN-11556 SFS file location not relative to global persistent-location"}, "afterCommit": {"oid": "e3a4b8abc0ca9c1efb18a5a12a093b361f4ee80a", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/e3a4b8abc0ca9c1efb18a5a12a093b361f4ee80a", "committedDate": "2020-04-01T09:58:14Z", "message": "ISPN-11556 SFS file location not relative to global persistent-location"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e3a4b8abc0ca9c1efb18a5a12a093b361f4ee80a", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/e3a4b8abc0ca9c1efb18a5a12a093b361f4ee80a", "committedDate": "2020-04-01T09:58:14Z", "message": "ISPN-11556 SFS file location not relative to global persistent-location"}, "afterCommit": {"oid": "73be561b945cc238cfba9e9a40a616fcbd031f6a", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/73be561b945cc238cfba9e9a40a616fcbd031f6a", "committedDate": "2020-04-02T11:11:09Z", "message": "ISPN-11556 SFS file location not relative to global persistent-location"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "73be561b945cc238cfba9e9a40a616fcbd031f6a", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/73be561b945cc238cfba9e9a40a616fcbd031f6a", "committedDate": "2020-04-02T11:11:09Z", "message": "ISPN-11556 SFS file location not relative to global persistent-location"}, "afterCommit": {"oid": "ca9e907e90cc7c38eadf8a58ab9d443d94e16585", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/ca9e907e90cc7c38eadf8a58ab9d443d94e16585", "committedDate": "2020-04-02T18:18:26Z", "message": "ISPN-11556 SFS file location not relative to global persistent-location"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ca9e907e90cc7c38eadf8a58ab9d443d94e16585", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/ca9e907e90cc7c38eadf8a58ab9d443d94e16585", "committedDate": "2020-04-02T18:18:26Z", "message": "ISPN-11556 SFS file location not relative to global persistent-location"}, "afterCommit": {"oid": "04dd6f97889d90fb38655effdbbbfa5e61271c52", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/04dd6f97889d90fb38655effdbbbfa5e61271c52", "committedDate": "2020-04-03T09:31:51Z", "message": "ISPN-11556 SFS file location not relative to global persistent-location"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04dd6f97889d90fb38655effdbbbfa5e61271c52", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/04dd6f97889d90fb38655effdbbbfa5e61271c52", "committedDate": "2020-04-03T09:31:51Z", "message": "ISPN-11556 SFS file location not relative to global persistent-location"}, "afterCommit": {"oid": "1180cc3df9b1cf7b2987a8aa4d3a44bb92473657", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/1180cc3df9b1cf7b2987a8aa4d3a44bb92473657", "committedDate": "2020-04-14T10:08:25Z", "message": "ISPN-11556 SFS file location not relative to global persistent-location"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTQ0MTY0", "url": "https://github.com/infinispan/infinispan/pull/8122#pullrequestreview-392944164", "createdAt": "2020-04-14T13:48:36Z", "commit": {"oid": "1180cc3df9b1cf7b2987a8aa4d3a44bb92473657"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzo0ODozN1rOGFPgCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzo0OTowMlrOGFPhWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE1MDAyNQ==", "bodyText": "I know this will make the code a bit uglier, but I wonder if we should change the signature to getQualifiedLocation(GlobalConfiguration globalConfiguration, String location, String cacheName, String qualifier, String... additionalQualifiers).\nOr it seems the qualifiers are optional now?", "url": "https://github.com/infinispan/infinispan/pull/8122#discussion_r408150025", "createdAt": "2020-04-14T13:48:37Z", "author": {"login": "wburns"}, "path": "core/src/main/java/org/infinispan/persistence/PersistenceUtil.java", "diffHunk": "@@ -154,21 +154,21 @@ public static String sanitizedCacheName(String cacheName) {\n       return cacheName.replaceAll(\"[^a-zA-Z0-9-_\\\\.]\", \"_\");\n    }\n \n-   public static Path getQualifiedLocation(GlobalConfiguration globalConfiguration, String location, String cacheName, String qualifier) {\n+   public static Path getQualifiedLocation(GlobalConfiguration globalConfiguration, String location, String cacheName, String... qualifiers) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1180cc3df9b1cf7b2987a8aa4d3a44bb92473657"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE1MDM2MA==", "bodyText": "Should this include the cacheName?", "url": "https://github.com/infinispan/infinispan/pull/8122#discussion_r408150360", "createdAt": "2020-04-14T13:49:02Z", "author": {"login": "wburns"}, "path": "core/src/main/java/org/infinispan/persistence/file/SingleFileStore.java", "diffHunk": "@@ -106,13 +108,9 @@ public void init(InitializationContext ctx) {\n \n    @Override\n    public void start() {\n+      Path location = PersistenceUtil.getQualifiedLocation(ctx.getGlobalConfiguration(), configuration.location(), ctx.getCache().getName() + \".dat\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1180cc3df9b1cf7b2987a8aa4d3a44bb92473657"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7475f2beeda3fad083a7e7bce4ecfdc73d2fe43", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/a7475f2beeda3fad083a7e7bce4ecfdc73d2fe43", "committedDate": "2020-04-16T08:10:53Z", "message": "ISPN-11556 SFS file location not relative to global persistent-location"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58efe065609e3504762af1fd0363670c076e0bc9", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/58efe065609e3504762af1fd0363670c076e0bc9", "committedDate": "2020-04-14T14:30:19Z", "message": "Undo changes to PersistenceUtil#getQualifiedName"}, "afterCommit": {"oid": "a7475f2beeda3fad083a7e7bce4ecfdc73d2fe43", "author": {"user": {"login": "ryanemerson", "name": "Ryan Emerson"}}, "url": "https://github.com/infinispan/infinispan/commit/a7475f2beeda3fad083a7e7bce4ecfdc73d2fe43", "committedDate": "2020-04-16T08:10:53Z", "message": "ISPN-11556 SFS file location not relative to global persistent-location"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1007, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}