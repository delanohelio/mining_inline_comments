{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwNDg3ODI1", "number": 7816, "title": "[10.1.x] ISPN-11228 Cross-Site Repl Docs", "bodyText": "https://issues.redhat.com/browse/ISPN-11228", "createdAt": "2020-02-03T19:40:51Z", "url": "https://github.com/infinispan/infinispan/pull/7816", "merged": true, "mergeCommit": {"oid": "b09407a4a6af2320a754a9e8697688eee78f18f0"}, "closed": true, "closedAt": "2020-02-06T10:20:34Z", "author": {"login": "oraNod"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBUcSGABqjMwMDk2MjcyNTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBoC-4ABqjMwMTMyODcyMjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8260e7fefbdde257869208c3edc958e23db362d6", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/8260e7fefbdde257869208c3edc958e23db362d6", "committedDate": "2020-02-03T19:39:37Z", "message": "ISPN-10835 xsite repl doc updates"}, "afterCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/63ca0e67e7cd10ddf666ed9290e821df5e16dca1", "committedDate": "2020-02-05T11:27:54Z", "message": "ISPN-10835 xsite repl doc updates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzNzQ0NzQ1", "url": "https://github.com/infinispan/infinispan/pull/7816#pullrequestreview-353744745", "createdAt": "2020-02-05T14:13:48Z", "commit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNDoxMzo0OFrOFl5I5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNToxMDo1NlrOFl7U_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI3Nzc5OQ==", "bodyText": "the -c and -s options aren't valid.", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375277799", "createdAt": "2020-02-05T14:13:48Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/resources/help/site.adoc", "diffHunk": "@@ -28,31 +28,34 @@ SYNOPSIS\n OPTIONS\n -------\n *-c, --cache*='CACHE_NAME'::", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI3ODk5NA==", "bodyText": "it doesn't return the status of myCache.\nIt just returns the status of the remote sites (online, offline, etc) configured in (or used by) myCache", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375278994", "createdAt": "2020-02-05T14:15:59Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/resources/help/site.adoc", "diffHunk": "@@ -28,31 +28,34 @@ SYNOPSIS\n OPTIONS\n -------\n *-c, --cache*='CACHE_NAME'::\n-Specifies a cache. Defaults to the currently selected cache.\n+Specifies a cache.\n \n *-s, --site*='SITE_NAME'::\n Specifies a site.\n \n \n EXAMPLES\n --------\n-`site status -s SITE_A` +\n-Returns the status for `SITE_A`.\n+`site status --cache=mycache` +\n+Returns the status of the `mycache` cache for all backup locations.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI3OTYwMQ==", "bodyText": "Same as above but for a particular remote site.\nAnd the status is shown per node. Example:\n{\"pedro-laptop-3-35787\":\"online\"}", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375279601", "createdAt": "2020-02-05T14:17:07Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/resources/help/site.adoc", "diffHunk": "@@ -28,31 +28,34 @@ SYNOPSIS\n OPTIONS\n -------\n *-c, --cache*='CACHE_NAME'::\n-Specifies a cache. Defaults to the currently selected cache.\n+Specifies a cache.\n \n *-s, --site*='SITE_NAME'::\n Specifies a site.\n \n \n EXAMPLES\n --------\n-`site status -s SITE_A` +\n-Returns the status for `SITE_A`.\n+`site status --cache=mycache` +\n+Returns the status of the `mycache` cache for all backup locations.\n \n-`site bring-online --cache=mycache --site=SITE_A` +\n-Brings the `mycache` cache online at `SITE_A`.\n+`site status --cache=mycache --site=NYC` +\n+Returns the status of the `mycache` cache in `NYC`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI4NDY1Mw==", "bodyText": "Brings site NYC online for cache myCache", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375284653", "createdAt": "2020-02-05T14:25:08Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/resources/help/site.adoc", "diffHunk": "@@ -28,31 +28,34 @@ SYNOPSIS\n OPTIONS\n -------\n *-c, --cache*='CACHE_NAME'::\n-Specifies a cache. Defaults to the currently selected cache.\n+Specifies a cache.\n \n *-s, --site*='SITE_NAME'::\n Specifies a site.\n \n \n EXAMPLES\n --------\n-`site status -s SITE_A` +\n-Returns the status for `SITE_A`.\n+`site status --cache=mycache` +\n+Returns the status of the `mycache` cache for all backup locations.\n \n-`site bring-online --cache=mycache --site=SITE_A` +\n-Brings the `mycache` cache online at `SITE_A`.\n+`site status --cache=mycache --site=NYC` +\n+Returns the status of the `mycache` cache in `NYC`.\n \n-`site take-offline --cache=mycache --site=SITE_B` +\n-Takes the `mycache` cache offline at `SITE_B`.\n+`site bring-online --cache=mycache --site=LON` +\n+Brings the `mycache` cache online at `LON`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI4NDc3OQ==", "bodyText": "Takes site NYC offline for cache myCache", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375284779", "createdAt": "2020-02-05T14:25:20Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/resources/help/site.adoc", "diffHunk": "@@ -28,31 +28,34 @@ SYNOPSIS\n OPTIONS\n -------\n *-c, --cache*='CACHE_NAME'::\n-Specifies a cache. Defaults to the currently selected cache.\n+Specifies a cache.\n \n *-s, --site*='SITE_NAME'::\n Specifies a site.\n \n \n EXAMPLES\n --------\n-`site status -s SITE_A` +\n-Returns the status for `SITE_A`.\n+`site status --cache=mycache` +\n+Returns the status of the `mycache` cache for all backup locations.\n \n-`site bring-online --cache=mycache --site=SITE_A` +\n-Brings the `mycache` cache online at `SITE_A`.\n+`site status --cache=mycache --site=NYC` +\n+Returns the status of the `mycache` cache in `NYC`.\n \n-`site take-offline --cache=mycache --site=SITE_B` +\n-Takes the `mycache` cache offline at `SITE_B`.\n+`site bring-online --cache=mycache --site=LON` +\n+Brings the `mycache` cache online at `LON`.\n \n-`site push-site-state --site=SITE_B` +\n-Push the state of all caches to the backup site `SITE_B`.\n+`site take-offline --cache=mycache --site=NYC` +\n+Takes the `mycache` cache offline at `NYC`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI5MjIyMA==", "bodyText": "push-site-status doesn't have  --site anymore.", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375292220", "createdAt": "2020-02-05T14:36:49Z", "author": {"login": "pruivo"}, "path": "cli/cli-client/src/main/resources/help/site.adoc", "diffHunk": "@@ -28,31 +28,34 @@ SYNOPSIS\n OPTIONS\n -------\n *-c, --cache*='CACHE_NAME'::\n-Specifies a cache. Defaults to the currently selected cache.\n+Specifies a cache.\n \n *-s, --site*='SITE_NAME'::\n Specifies a site.\n \n \n EXAMPLES\n --------\n-`site status -s SITE_A` +\n-Returns the status for `SITE_A`.\n+`site status --cache=mycache` +\n+Returns the status of the `mycache` cache for all backup locations.\n \n-`site bring-online --cache=mycache --site=SITE_A` +\n-Brings the `mycache` cache online at `SITE_A`.\n+`site status --cache=mycache --site=NYC` +\n+Returns the status of the `mycache` cache in `NYC`.\n \n-`site take-offline --cache=mycache --site=SITE_B` +\n-Takes the `mycache` cache offline at `SITE_B`.\n+`site bring-online --cache=mycache --site=LON` +\n+Brings the `mycache` cache online at `LON`.\n \n-`site push-site-state --site=SITE_B` +\n-Push the state of all caches to the backup site `SITE_B`.\n+`site take-offline --cache=mycache --site=NYC` +\n+Takes the `mycache` cache offline at `NYC`.\n \n-`site push-site-status --site=SITE_B` +\n-Displays the current status of the push to the backup site `SITE_B`.\n+`site push-site-state --cache=mycache --site=NYC` +\n+Backs up the `mycache` cache to `NYC`.\n \n-`site cancel-push-state --site=SITE_B` +\n-Cancels the operation to push state to the backup site `SITE_B`.\n+`site push-site-status --cache=mycache --site=NYC` +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMwMDAxOQ==", "bodyText": "A zero (or negative) value ignores this attribute and uses min-wait only (if configured).\nA \"site\" never go offline automatically when both are <= 0 (i.e. the default)", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375300019", "createdAt": "2020-02-05T14:49:24Z", "author": {"login": "pruivo"}, "path": "core/src/main/resources/schema/infinispan-config-10.1.xsd", "diffHunk": "@@ -1959,12 +1971,16 @@\n   <xs:complexType name=\"take-offline\">\n     <xs:attribute name=\"after-failures\" type=\"xs:int\" default=\"0\">\n       <xs:annotation>\n-        <xs:documentation>The number of failed request operations after which this site should be taken offline. Defaults to 0 (never). A negative value would mean that the site will be taken offline after 'min-wait'.</xs:documentation>\n+        <xs:documentation>\n+          Sets the number of consecutive failures that can occur for backup operations before sites go offline. The default value is 0 (zero) which means backup locations never go offline automatically.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 159}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMwNjMzOQ==", "bodyText": "this is the minimum time to wait before the site is taken offline after an operation fails. It is reset in a successful operation", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375306339", "createdAt": "2020-02-05T14:59:14Z", "author": {"login": "pruivo"}, "path": "core/src/main/resources/schema/infinispan-config-10.1.xsd", "diffHunk": "@@ -1959,12 +1971,16 @@\n   <xs:complexType name=\"take-offline\">\n     <xs:attribute name=\"after-failures\" type=\"xs:int\" default=\"0\">\n       <xs:annotation>\n-        <xs:documentation>The number of failed request operations after which this site should be taken offline. Defaults to 0 (never). A negative value would mean that the site will be taken offline after 'min-wait'.</xs:documentation>\n+        <xs:documentation>\n+          Sets the number of consecutive failures that can occur for backup operations before sites go offline. The default value is 0 (zero) which means backup locations never go offline automatically.\n+        </xs:documentation>\n       </xs:annotation>\n     </xs:attribute>\n     <xs:attribute name=\"min-wait\" type=\"xs:long\" default=\"0\">\n       <xs:annotation>\n-        <xs:documentation>The minimal number of millis to wait before taking this site offline, even in the case 'after-failures' is reached. If smaller or equal to 0, then only 'after-failures' is considered.</xs:documentation>\n+        <xs:documentation>\n+          Sets the minimum time to wait, in milliseconds, for backup operations to complete before sites go offline. If you set \"after-failures\", sites go offline when the wait time is reached and the number of failures occur. To use the minimum wait time only, specify a negative value for \"after-failures\".", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 167}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMxMDk3MA==", "bodyText": "forward backup requests to a  local site", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375310970", "createdAt": "2020-02-05T15:06:24Z", "author": {"login": "pruivo"}, "path": "documentation/src/main/asciidoc/topics/con_xsite_site_masters.adoc", "diffHunk": "@@ -0,0 +1,12 @@\n+[id='xsite_masters-{context}']\n+= Site Masters\n+Site masters are the nodes in {brandname} clusters that are responsible for\n+sending and receiving requests from backup locations.\n+\n+If a node is not a site master, it must forward backup requests to a site", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMxMzY2Mw==", "bodyText": "status command missing", "url": "https://github.com/infinispan/infinispan/pull/7816#discussion_r375313663", "createdAt": "2020-02-05T15:10:56Z", "author": {"login": "pruivo"}, "path": "documentation/src/main/asciidoc/topics/proc_cli_xsite_sites.adoc", "diffHunk": "@@ -0,0 +1,32 @@\n+[id='manage_sites-{context}']\n+= Bringing Backup Locations Offline and Online\n+Take backup locations offline manually and bring them back online.\n+\n+.Procedure\n+\n+* Check if backup locations are online or offline with the `site status`\n+command:\n++\n+----\n+//containers/default]> site --cache=cacheName --site=NYC", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1"}, "originalPosition": 11}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "63ca0e67e7cd10ddf666ed9290e821df5e16dca1", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/63ca0e67e7cd10ddf666ed9290e821df5e16dca1", "committedDate": "2020-02-05T11:27:54Z", "message": "ISPN-10835 xsite repl doc updates"}, "afterCommit": {"oid": "e2d6d153e4ba5bbd76fb2488b20582c21bf62673", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/e2d6d153e4ba5bbd76fb2488b20582c21bf62673", "committedDate": "2020-02-05T19:02:18Z", "message": "edits for site cli and schema docs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e2d6d153e4ba5bbd76fb2488b20582c21bf62673", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/e2d6d153e4ba5bbd76fb2488b20582c21bf62673", "committedDate": "2020-02-05T19:02:18Z", "message": "edits for site cli and schema docs"}, "afterCommit": {"oid": "2341842200c3652d60ffdaaedc501f99104eb43e", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/2341842200c3652d60ffdaaedc501f99104eb43e", "committedDate": "2020-02-06T09:23:53Z", "message": "edits for site cli and schema docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MzM1NTI3", "url": "https://github.com/infinispan/infinispan/pull/7816#pullrequestreview-354335527", "createdAt": "2020-02-06T10:15:26Z", "commit": {"oid": "2341842200c3652d60ffdaaedc501f99104eb43e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a582bcf48d72f33b1806fb2517ec86c812d25d6a", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/a582bcf48d72f33b1806fb2517ec86c812d25d6a", "committedDate": "2020-02-06T10:19:09Z", "message": "ISPN-10835 xsite repl doc updates"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2341842200c3652d60ffdaaedc501f99104eb43e", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/2341842200c3652d60ffdaaedc501f99104eb43e", "committedDate": "2020-02-06T09:23:53Z", "message": "edits for site cli and schema docs"}, "afterCommit": {"oid": "a582bcf48d72f33b1806fb2517ec86c812d25d6a", "author": {"user": {"login": "oraNod", "name": "Don Naro"}}, "url": "https://github.com/infinispan/infinispan/commit/a582bcf48d72f33b1806fb2517ec86c812d25d6a", "committedDate": "2020-02-06T10:19:09Z", "message": "ISPN-10835 xsite repl doc updates"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1278, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}