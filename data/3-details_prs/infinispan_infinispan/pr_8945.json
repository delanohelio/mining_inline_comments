{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzMzMwODQx", "number": 8945, "title": "ISPN-12588 Fix server's common.sh to handle custom paths correctly", "bodyText": "https://issues.redhat.com/browse/ISPN-12588", "createdAt": "2020-12-21T08:37:12Z", "url": "https://github.com/infinispan/infinispan/pull/8945", "merged": true, "mergeCommit": {"oid": "2544b1dc19e21e7cc038ccd15124caa245f02b87"}, "closed": true, "closedAt": "2020-12-22T12:42:14Z", "author": {"login": "tristantarrant"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdoUh2kgFqTU1NjMyMzIxNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdoW7NBgFqTU1NjQyNDAwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MzIzMjE1", "url": "https://github.com/infinispan/infinispan/pull/8945#pullrequestreview-556323215", "createdAt": "2020-12-21T11:49:17Z", "commit": {"oid": "4510ea76fed36a85b2f36f16b3a71937ead80f0f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2Mzc0ODk0", "url": "https://github.com/infinispan/infinispan/pull/8945#pullrequestreview-556374894", "createdAt": "2020-12-21T13:23:21Z", "commit": {"oid": "4510ea76fed36a85b2f36f16b3a71937ead80f0f"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxMzoyMzoyMVrOIJYF3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxMzoyNDowNlrOIJYHRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjcwMjgxMw==", "bodyText": "If not used I would remove ispn.server.*.path use", "url": "https://github.com/infinispan/infinispan/pull/8945#discussion_r546702813", "createdAt": "2020-12-21T13:23:21Z", "author": {"login": "wfink"}, "path": "server/runtime/src/main/server/bin/cli.sh", "diffHunk": "@@ -122,16 +127,16 @@ if $linux; then\n     for var in $CONSOLIDATED_OPTS\n     do\n        # Remove quotes\n-       p=$(echo $var | tr -d \"'\")\n+       p=$(echo \"$var\" | tr -d \"'\")\n        case $p in\n-         -Dinfinispan.server.base.dir=*)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4510ea76fed36a85b2f36f16b3a71937ead80f0f"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjcwMzE3Mw==", "bodyText": "MODULEPATH seems a leftover", "url": "https://github.com/infinispan/infinispan/pull/8945#discussion_r546703173", "createdAt": "2020-12-21T13:24:06Z", "author": {"login": "wfink"}, "path": "server/runtime/src/main/server/bin/cli.sh", "diffHunk": "@@ -167,65 +172,65 @@ if $darwin || $freebsd || $other ; then\n     for var in $CONSOLIDATED_OPTS\n     do\n        # Remove quotes\n-       p=$(echo $var | tr -d \"'\")\n+       p=$(echo \"$var\" | tr -d \"'\")\n        case $p in\n-         -Dinfinispan.server.base.dir=*)\n-              ISPN_BASE_DIR=$(cd ${p#*=} ; pwd -P)\n+         -Dinfinispan.server.root.path=*|--server-root=*)\n+              ISPN_ROOT_DIR=$(cd \"${p#*=}\" ; pwd -P)\n               ;;\n-         -Dinfinispan.server.log.dir=*)\n+         -Dinfinispan.server.log.path=*)\n               if [ -d \"${p#*=}\" ]; then\n-                ISPN_LOG_DIR=$(cd ${p#*=} ; pwd -P)\n+                ISPN_LOG_DIR=$(cd \"${p#*=}\" ; pwd -P)\n              else\n                 #since the specified directory doesn't exist we don't validate it\n                 ISPN_LOG_DIR=${p#*=}\n              fi\n              ;;\n-         -Dinfinispan.server.config.dir=*)\n-              ISPN_CONFIG_DIR=$(cd ${p#*=} ; pwd -P)\n+         -Dinfinispan.server.config.path=*)\n+              ISPN_CONFIG_DIR=$(cd \"${p#*=}\" ; pwd -P)\n               ;;\n        esac\n     done\n fi\n \n # determine the default base dir, if not set\n-if [ \"x$ISPN_BASE_DIR\" = \"x\" ]; then\n-   ISPN_BASE_DIR=\"$ISPN_HOME/server\"\n+if [ \"x$ISPN_ROOT_DIR\" = \"x\" ]; then\n+   ISPN_ROOT_DIR=\"$ISPN_HOME/server\"\n fi\n # determine the default log dir, if not set\n if [ \"x$ISPN_LOG_DIR\" = \"x\" ]; then\n-   ISPN_LOG_DIR=\"$ISPN_BASE_DIR/log\"\n+   ISPN_LOG_DIR=\"$ISPN_ROOT_DIR/log\"\n fi\n # determine the default configuration dir, if not set\n if [ \"x$ISPN_CONFIG_DIR\" = \"x\" ]; then\n-   ISPN_CONFIG_DIR=\"$ISPN_BASE_DIR/conf\"\n+   ISPN_CONFIG_DIR=\"$ISPN_ROOT_DIR/conf\"\n fi\n \n # For Cygwin, switch paths to Windows format before running java\n if $cygwin; then\n     ISPN_HOME=$(cygpath --path --windows \"$ISPN_HOME\")\n     JAVA_HOME=$(cygpath --path --windows \"$JAVA_HOME\")\n     ISPN_MODULEPATH=$(cygpath --path --windows \"$ISPN_MODULEPATH\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4510ea76fed36a85b2f36f16b3a71937ead80f0f"}, "originalPosition": 123}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MzgxMjY3", "url": "https://github.com/infinispan/infinispan/pull/8945#pullrequestreview-556381267", "createdAt": "2020-12-21T13:33:17Z", "commit": {"oid": "4510ea76fed36a85b2f36f16b3a71937ead80f0f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "555474f6b030af27e1ca45d016c9850fc7973175", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/555474f6b030af27e1ca45d016c9850fc7973175", "committedDate": "2020-12-21T14:23:50Z", "message": "ISPN-12588 Fix server's common.sh to handle custom paths correctly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "306e3a2af85190b9f4f45e31e2da33a69ae17536", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/306e3a2af85190b9f4f45e31e2da33a69ae17536", "committedDate": "2020-12-21T14:23:50Z", "message": "ISPN-12589 Support -D and -P for the CLI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4510ea76fed36a85b2f36f16b3a71937ead80f0f", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/4510ea76fed36a85b2f36f16b3a71937ead80f0f", "committedDate": "2020-12-21T09:01:52Z", "message": "ISPN-12589 Support -D and -P for the CLI"}, "afterCommit": {"oid": "306e3a2af85190b9f4f45e31e2da33a69ae17536", "author": {"user": {"login": "tristantarrant", "name": "Tristan Tarrant"}}, "url": "https://github.com/infinispan/infinispan/commit/306e3a2af85190b9f4f45e31e2da33a69ae17536", "committedDate": "2020-12-21T14:23:50Z", "message": "ISPN-12589 Support -D and -P for the CLI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NDI0MDA1", "url": "https://github.com/infinispan/infinispan/pull/8945#pullrequestreview-556424005", "createdAt": "2020-12-21T14:36:47Z", "commit": {"oid": "306e3a2af85190b9f4f45e31e2da33a69ae17536"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 247, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}