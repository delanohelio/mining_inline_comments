{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMjE2OTM4", "number": 7963, "title": "ISPN-11390 Non-components cannot export metrics", "bodyText": "https://issues.redhat.com/browse/ISPN-11390\nhttps://issues.redhat.com/browse/ISPN-11388\nhttps://issues.redhat.com/browse/ISPN-11389\nhttps://issues.redhat.com/browse/ISPN-11403\nhttps://issues.redhat.com/browse/ISPN-11438\nSome places need manual attention because automatic registration of metrics does not work there. See the 2 mbeans in AbstractProtocolServer", "createdAt": "2020-02-28T05:56:03Z", "url": "https://github.com/infinispan/infinispan/pull/7963", "merged": true, "mergeCommit": {"oid": "4c93a0db8a1b8f801731a353b3a173ca922aa458"}, "closed": true, "closedAt": "2020-03-10T07:54:56Z", "author": {"login": "anistor"}, "timelineItems": {"totalCount": 34, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcJpVwGABqjMwODY4NTEzOTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMJqtRABqjMxMTMwOTAzNjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "85e6ed048daa13e9c96be0aa22a7c88cd893f3df", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/85e6ed048daa13e9c96be0aa22a7c88cd893f3df", "committedDate": "2020-02-28T05:54:49Z", "message": "wip protocolserver"}, "afterCommit": {"oid": "83a3759fc8fe5d90b7ee3ef8dd9c92dd95b7e276", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/83a3759fc8fe5d90b7ee3ef8dd9c92dd95b7e276", "committedDate": "2020-03-02T08:20:39Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "83a3759fc8fe5d90b7ee3ef8dd9c92dd95b7e276", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/83a3759fc8fe5d90b7ee3ef8dd9c92dd95b7e276", "committedDate": "2020-03-02T08:20:39Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}, "afterCommit": {"oid": "bb69c3b10bc4700fb66a8a9adf28577f128f7d53", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/bb69c3b10bc4700fb66a8a9adf28577f128f7d53", "committedDate": "2020-03-02T08:49:59Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bb69c3b10bc4700fb66a8a9adf28577f128f7d53", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/bb69c3b10bc4700fb66a8a9adf28577f128f7d53", "committedDate": "2020-03-02T08:49:59Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}, "afterCommit": {"oid": "a0e83ac6726be7f91defb89a403d4a805d1136cc", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/a0e83ac6726be7f91defb89a403d4a805d1136cc", "committedDate": "2020-03-02T11:59:19Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a0e83ac6726be7f91defb89a403d4a805d1136cc", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/a0e83ac6726be7f91defb89a403d4a805d1136cc", "committedDate": "2020-03-02T11:59:19Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}, "afterCommit": {"oid": "7e2262914a3b4d0c9b5e988edc74d526d760cdf9", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/7e2262914a3b4d0c9b5e988edc74d526d760cdf9", "committedDate": "2020-03-02T12:11:11Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e2262914a3b4d0c9b5e988edc74d526d760cdf9", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/7e2262914a3b4d0c9b5e988edc74d526d760cdf9", "committedDate": "2020-03-02T12:11:11Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}, "afterCommit": {"oid": "7c9a93d107875fabed5a1d748d3a372bef0e5bdb", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/7c9a93d107875fabed5a1d748d3a372bef0e5bdb", "committedDate": "2020-03-02T12:47:01Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c9a93d107875fabed5a1d748d3a372bef0e5bdb", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/7c9a93d107875fabed5a1d748d3a372bef0e5bdb", "committedDate": "2020-03-02T12:47:01Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}, "afterCommit": {"oid": "2b1fb02f9d75ac7fe0f6f6e99a13ec75f23d831d", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/2b1fb02f9d75ac7fe0f6f6e99a13ec75f23d831d", "committedDate": "2020-03-02T19:38:15Z", "message": "wip"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2b1fb02f9d75ac7fe0f6f6e99a13ec75f23d831d", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/2b1fb02f9d75ac7fe0f6f6e99a13ec75f23d831d", "committedDate": "2020-03-02T19:38:15Z", "message": "wip"}, "afterCommit": {"oid": "3afaa6465dedb504a2f5b663177c44af55ae609b", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/3afaa6465dedb504a2f5b663177c44af55ae609b", "committedDate": "2020-03-03T04:25:31Z", "message": "wip"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3afaa6465dedb504a2f5b663177c44af55ae609b", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/3afaa6465dedb504a2f5b663177c44af55ae609b", "committedDate": "2020-03-03T04:25:31Z", "message": "wip"}, "afterCommit": {"oid": "cc4a824653a8aa1e50e1effdff726fa2cbc4b0b8", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/cc4a824653a8aa1e50e1effdff726fa2cbc4b0b8", "committedDate": "2020-03-03T09:10:15Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc4a824653a8aa1e50e1effdff726fa2cbc4b0b8", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/cc4a824653a8aa1e50e1effdff726fa2cbc4b0b8", "committedDate": "2020-03-03T09:10:15Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}, "afterCommit": {"oid": "3dc5c39fba2edf3cd85fc89a18fd7b318700acd6", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/3dc5c39fba2edf3cd85fc89a18fd7b318700acd6", "committedDate": "2020-03-04T08:32:38Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "54e1f511fc11e38a3092e852dfb803abaf71dca8", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/54e1f511fc11e38a3092e852dfb803abaf71dca8", "committedDate": "2020-03-04T12:39:21Z", "message": "wip"}, "afterCommit": {"oid": "f9d62f52c6d31f508c383e7fc14c64069b8bdf71", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/f9d62f52c6d31f508c383e7fc14c64069b8bdf71", "committedDate": "2020-03-04T13:17:09Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f9d62f52c6d31f508c383e7fc14c64069b8bdf71", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/f9d62f52c6d31f508c383e7fc14c64069b8bdf71", "committedDate": "2020-03-04T13:17:09Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}, "afterCommit": {"oid": "4789dc4f64cca33bd5bec78c4bb35a8fcacd0940", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/4789dc4f64cca33bd5bec78c4bb35a8fcacd0940", "committedDate": "2020-03-04T16:12:28Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e9cc930b2bdd006d5dcda8057fb70ba499b0cc5d", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/e9cc930b2bdd006d5dcda8057fb70ba499b0cc5d", "committedDate": "2020-03-04T16:47:12Z", "message": "wip"}, "afterCommit": {"oid": "ae59b0ae85d6dfc9097da54bd6012e88ae313b71", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/ae59b0ae85d6dfc9097da54bd6012e88ae313b71", "committedDate": "2020-03-05T08:31:41Z", "message": "wip"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae59b0ae85d6dfc9097da54bd6012e88ae313b71", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/ae59b0ae85d6dfc9097da54bd6012e88ae313b71", "committedDate": "2020-03-05T08:31:41Z", "message": "wip"}, "afterCommit": {"oid": "21a3520f2d435a434abee24b808b607366b6e34f", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/21a3520f2d435a434abee24b808b607366b6e34f", "committedDate": "2020-03-05T09:45:37Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "21a3520f2d435a434abee24b808b607366b6e34f", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/21a3520f2d435a434abee24b808b607366b6e34f", "committedDate": "2020-03-05T09:45:37Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}, "afterCommit": {"oid": "7b07a1447c5c53e433a0566cb73f453216f0636c", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/7b07a1447c5c53e433a0566cb73f453216f0636c", "committedDate": "2020-03-05T11:20:04Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b07a1447c5c53e433a0566cb73f453216f0636c", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/7b07a1447c5c53e433a0566cb73f453216f0636c", "committedDate": "2020-03-05T11:20:04Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}, "afterCommit": {"oid": "541767326ad09c77f45f6558e740291d17de953a", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/541767326ad09c77f45f6558e740291d17de953a", "committedDate": "2020-03-05T13:48:09Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "541767326ad09c77f45f6558e740291d17de953a", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/541767326ad09c77f45f6558e740291d17de953a", "committedDate": "2020-03-05T13:48:09Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}, "afterCommit": {"oid": "22f08071e34b9dd30f32f9fdb27dc9cea3fad1d7", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/22f08071e34b9dd30f32f9fdb27dc9cea3fad1d7", "committedDate": "2020-03-06T07:47:25Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "22f08071e34b9dd30f32f9fdb27dc9cea3fad1d7", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/22f08071e34b9dd30f32f9fdb27dc9cea3fad1d7", "committedDate": "2020-03-06T07:47:25Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}, "afterCommit": {"oid": "fc61dc7864250360a49b9723db469085157068a4", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/fc61dc7864250360a49b9723db469085157068a4", "committedDate": "2020-03-06T09:06:00Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "175f16ba6c61594f43db21f375b75d4733d43544", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/175f16ba6c61594f43db21f375b75d4733d43544", "committedDate": "2020-03-06T12:11:13Z", "message": "ISPN-11430 Align microprofile metrics and config artifact versions with Wildfly latest"}, "afterCommit": {"oid": "a7895b4e43cfcd87485e624c3ab03f436bfbca05", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/a7895b4e43cfcd87485e624c3ab03f436bfbca05", "committedDate": "2020-03-06T13:50:01Z", "message": "wip"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a7895b4e43cfcd87485e624c3ab03f436bfbca05", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/a7895b4e43cfcd87485e624c3ab03f436bfbca05", "committedDate": "2020-03-06T13:50:01Z", "message": "wip"}, "afterCommit": {"oid": "fb5659127f4183ae5b50ee4a7968bd9f59fd1738", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/fb5659127f4183ae5b50ee4a7968bd9f59fd1738", "committedDate": "2020-03-06T14:30:52Z", "message": "ISPN-11430 Align microprofile metrics and config artifact versions with Wildfly latest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb5659127f4183ae5b50ee4a7968bd9f59fd1738", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/fb5659127f4183ae5b50ee4a7968bd9f59fd1738", "committedDate": "2020-03-06T14:30:52Z", "message": "ISPN-11430 Align microprofile metrics and config artifact versions with Wildfly latest"}, "afterCommit": {"oid": "002a915dd74a3d1ff9047563ca578331a14b7702", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/002a915dd74a3d1ff9047563ca578331a14b7702", "committedDate": "2020-03-06T10:08:37Z", "message": "Rename InfinispanMetricRegistry to MetricsCollector"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "002a915dd74a3d1ff9047563ca578331a14b7702", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/002a915dd74a3d1ff9047563ca578331a14b7702", "committedDate": "2020-03-06T10:08:37Z", "message": "Rename InfinispanMetricRegistry to MetricsCollector"}, "afterCommit": {"oid": "5abc9f8c1ee7d34ef95262224821ec1398554689", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/5abc9f8c1ee7d34ef95262224821ec1398554689", "committedDate": "2020-03-07T14:42:32Z", "message": "Rename InfinispanMetricRegistry to MetricsCollector"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5abc9f8c1ee7d34ef95262224821ec1398554689", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/5abc9f8c1ee7d34ef95262224821ec1398554689", "committedDate": "2020-03-07T14:42:32Z", "message": "Rename InfinispanMetricRegistry to MetricsCollector"}, "afterCommit": {"oid": "4fabaaa4716f995ae527c52b3695a656011c8ff9", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/4fabaaa4716f995ae527c52b3695a656011c8ff9", "committedDate": "2020-03-08T20:13:40Z", "message": "Get node name for metrics tag directly from Transport"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4fabaaa4716f995ae527c52b3695a656011c8ff9", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/4fabaaa4716f995ae527c52b3695a656011c8ff9", "committedDate": "2020-03-08T20:13:40Z", "message": "Get node name for metrics tag directly from Transport"}, "afterCommit": {"oid": "39485467464762820265abc22d59aabe622d3ea9", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/39485467464762820265abc22d59aabe622d3ea9", "committedDate": "2020-03-09T11:11:37Z", "message": "New metric registration config options: namesAsTags\n\n* boolean, if enabled it results in the cache manager name and cache name\n\u00a0 being added as tags rather than being included in the metric name\n* disabled by default"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39485467464762820265abc22d59aabe622d3ea9", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/39485467464762820265abc22d59aabe622d3ea9", "committedDate": "2020-03-09T11:11:37Z", "message": "New metric registration config options: namesAsTags\n\n* boolean, if enabled it results in the cache manager name and cache name\n\u00a0 being added as tags rather than being included in the metric name\n* disabled by default"}, "afterCommit": {"oid": "0969e8d83a4ec5d58cc6508bef72a742b0f68094", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/0969e8d83a4ec5d58cc6508bef72a742b0f68094", "committedDate": "2020-03-09T12:33:54Z", "message": "ISPN-11438 Additional metric registration config option: namesAsTags\n\n* boolean, if enabled it results in the cache manager name and cache name\n\u00a0 being added as tags rather than being included in the metric name\n* disabled by default"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNDk3MDA5", "url": "https://github.com/infinispan/infinispan/pull/7963#pullrequestreview-371497009", "createdAt": "2020-03-09T20:15:58Z", "commit": {"oid": "e3310ac56733fa80bfba40c9ed5a4d92360fc552"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQyMDoxNTo1OFrOFz304w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQyMDoxNTo1OFrOFz304w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkzNjM1NQ==", "bodyText": "I'd really love this to be rewritten not to use JMX at some point", "url": "https://github.com/infinispan/infinispan/pull/7963#discussion_r389936355", "createdAt": "2020-03-09T20:15:58Z", "author": {"login": "tristantarrant"}, "path": "server/core/src/main/java/org/infinispan/server/core/transport/NettyTransportConnectionStats.java", "diffHunk": "@@ -95,22 +95,26 @@ private int calculateGlobalConnections() {\n       public Integer apply(EmbeddedCacheManager embeddedCacheManager) {\n          CacheManagerJmxRegistration jmxRegistration = SecurityActions.getGlobalComponentRegistry(embeddedCacheManager)\n                .getComponent(CacheManagerJmxRegistration.class);\n-         try {\n-            ObjectName transportNamePattern = new ObjectName(jmxRegistration.getDomain() + \":type=Server,component=Transport,name=*\");\n-            Set<ObjectName> objectNames = jmxRegistration.getMBeanServer().queryNames(transportNamePattern, null);\n-\n-            // sum the NumberOfLocalConnections from all transport MBeans that match the pattern\n-            int total = 0;\n-            for (ObjectName name : objectNames) {\n-               if (name.getKeyProperty(\"name\").startsWith(serverName)) {\n-                  Integer connections = (Integer) jmxRegistration.getMBeanServer().getAttribute(name, \"NumberOfLocalConnections\");\n-                  total += connections;\n+         if (jmxRegistration.enabled()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3310ac56733fa80bfba40c9ed5a4d92360fc552"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a9665ab0825c8803377e8685d497db6867c7024", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/8a9665ab0825c8803377e8685d497db6867c7024", "committedDate": "2020-03-10T03:08:36Z", "message": "ISPN-11389 Deprecate EmbeddedCacheManager.getStats() method because CacheContainerStats is already deprecated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c9308f5f974d45c677feb241dafb6f0768e1032", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/4c9308f5f974d45c677feb241dafb6f0768e1032", "committedDate": "2020-03-10T03:08:36Z", "message": "Remove unneeded SuppressWarnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b068dfe115c37e1e58cd6821270246e7f3b735f", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/3b068dfe115c37e1e58cd6821270246e7f3b735f", "committedDate": "2020-03-10T03:08:36Z", "message": "ISPN-11388 Refactor CacheIgnoreManager - AbstractProtocolServer collaboration\n\n* remove CacheIgnoreManager from ProtocolServer.start and make it a global component because it is shared by all protocols\n* remove the parameters of AbstractProtocolServer.startInternal( ) and process them in start() instead"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da8e43614ad62c0f6c058840071d6a1f28c7e826", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/da8e43614ad62c0f6c058840071d6a1f28c7e826", "committedDate": "2020-03-10T03:08:36Z", "message": "ISPN-11403 RestMetricsResource fails due to NettyTransportConnectionStats.getNumberOfGlobalConnections metrics not working with jmx disabled\n\n* this just works around the issue and returns a 0 for that metric when not computable rather than failing with a RuntimeException"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a042de1b2476c691796b68e76b1af60da581eab", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/2a042de1b2476c691796b68e76b1af60da581eab", "committedDate": "2020-03-10T03:08:36Z", "message": "ISPN-11390 Non-components cannot export metrics\n\n* introduce AbstractMetricsRegistration.registerExternalMetrics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "984eb9d7102616f2d180e482ba8c0899d64b546f", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/984eb9d7102616f2d180e482ba8c0899d64b546f", "committedDate": "2020-03-10T03:08:36Z", "message": "Rename InfinispanMetricRegistry to MetricsCollector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40e8bb12577bace171f60f3763ddec6ed84b9fda", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/40e8bb12577bace171f60f3763ddec6ed84b9fda", "committedDate": "2020-03-10T03:08:36Z", "message": "Get node name for metrics tag directly from Transport"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f31d59e644a41d520cdabaf356db046076fe491f", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/f31d59e644a41d520cdabaf356db046076fe491f", "committedDate": "2020-03-10T03:08:36Z", "message": "ISPN-11438 Additional metric registration config option: namesAsTags\n\n* boolean, if enabled it results in the cache manager name and cache name\n\u00a0 being added as tags rather than being included in the metric name\n* disabled by default"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0969e8d83a4ec5d58cc6508bef72a742b0f68094", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/0969e8d83a4ec5d58cc6508bef72a742b0f68094", "committedDate": "2020-03-09T12:33:54Z", "message": "ISPN-11438 Additional metric registration config option: namesAsTags\n\n* boolean, if enabled it results in the cache manager name and cache name\n\u00a0 being added as tags rather than being included in the metric name\n* disabled by default"}, "afterCommit": {"oid": "f31d59e644a41d520cdabaf356db046076fe491f", "author": {"user": {"login": "anistor", "name": "Adrian Nistor"}}, "url": "https://github.com/infinispan/infinispan/commit/f31d59e644a41d520cdabaf356db046076fe491f", "committedDate": "2020-03-10T03:08:36Z", "message": "ISPN-11438 Additional metric registration config option: namesAsTags\n\n* boolean, if enabled it results in the cache manager name and cache name\n\u00a0 being added as tags rather than being included in the metric name\n* disabled by default"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1221, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}