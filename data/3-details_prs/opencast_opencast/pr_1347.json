{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNjI3NzE2", "number": 1347, "title": "LDAP Configuration", "bodyText": "This patch simplifies the LDAP configuration by doing the long-discussed\nand anticipated move from the external, old and out-of-date LDAP sample\nsecurity configuration into the main security configuration file.\nIt also updates the LDAP configuration guide to reflect this move as\nwell as doing a general overhaul since it seemed like the guide still\ncontained relics from our wiki days.\n\nA fully functional test configuration using sysforums public test server following this guide can be found at:\n\nhttps://data.lkiesow.io/opencast/ldapconfig/mh_default_org.xml\nhttps://data.lkiesow.io/opencast/ldapconfig/org.opencastproject.userdirectory.ldap-forumsys.cfg\n\nYour pull request should\u2026\n\n have a concise title\n close an accompanying issue if one exists\n be against the correct branch (features can only go into develop)\n include migration scripts and documentation, if appropriate\n pass automated testing\n have a clean commit history\n have proper commit messages (title and body) for all commits\n have appropriate tags applied", "createdAt": "2020-01-10T21:23:53Z", "url": "https://github.com/opencast/opencast/pull/1347", "merged": true, "mergeCommit": {"oid": "18db9629069d9d150b357ae2cd287f772a34fba7"}, "closed": true, "closedAt": "2020-01-21T17:03:56Z", "author": {"login": "lkiesow"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb5FSbcAH2gAyMzYxNjI3NzE2OmI0YWJlNjk2MzIyMDc3ODgxMTEyYjcwNzcxMTU2OTA4NDM4ZDEyNDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8i67DgFqTM0NTk2ODQzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b4abe696322077881112b70771156908438d1244", "author": {"user": {"login": "lkiesow", "name": "Lars Kiesow"}}, "url": "https://github.com/opencast/opencast/commit/b4abe696322077881112b70771156908438d1244", "committedDate": "2020-01-10T21:18:16Z", "message": "LDAP Configuration\n\nThis patch simplifies the LDAP configuration by doing the long-discussed\nand anticipated move from the external, old and out-of-date LDAP sample\nsecurity configuration into the main security configuration file.\n\nIt also updates the LDAP configuration guide to reflect this move as\nwell as doing a general overhaul since it seemed like the guide still\ncontained relics from our wiki days."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MTgzMTM5", "url": "https://github.com/opencast/opencast/pull/1347#pullrequestreview-345183139", "createdAt": "2020-01-20T09:43:36Z", "commit": {"oid": "b4abe696322077881112b70771156908438d1244"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwOTo0MzozNlrOFfYcCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwOTo0MzozNlrOFfYcCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ1MDU3MA==", "bodyText": "The < ! - -  .....  - - - > Comment indicators needs to be changed to <!-- ..... --> because the previous generates a read error from Opencast.\nMaybe is because I had to uncomment some lines because this kind of file doesn't support nested comments. But anyways I think is more foolproof have all the comments not nested.", "url": "https://github.com/opencast/opencast/pull/1347#discussion_r368450570", "createdAt": "2020-01-20T09:43:36Z", "author": {"login": "mliradelc"}, "path": "etc/security/mh_default_org.xml", "diffHunk": "@@ -507,6 +507,56 @@\n   </bean>\n   -->\n \n+  <!-- ################ -->\n+  <!-- # LDAP Support # -->\n+  <!-- ################ -->\n+\n+  <!--\n+  <bean id=\"contextSource\"\n+    class=\"org.springframework.security.ldap.DefaultSpringSecurityContextSource\">\n+    < ! - - URL of the LDAP server - - >\n+    <constructor-arg value=\"ldap://myldapserver:myport\" />\n+    < ! - - \"Distinguished name\" for the unprivileged user - - >\n+    < ! - - This user is merely to perform searches in the LDAP to find the users to login - - >\n+    <property name=\"userDn\" value=\"uid=user-id,dc=example,dc=com\" />\n+    < ! - - Password of the user above - - >\n+    <property name=\"password\" value=\"mypassword\" />\n+  </bean>\n+  -->\n+\n+  <!--\n+  <bean id=\"ldapAuthProvider\"\n+    class=\"org.springframework.security.ldap.authentication.LdapAuthenticationProvider\">\n+    <constructor-arg>\n+      <bean\n+        class=\"org.springframework.security.ldap.authentication.BindAuthenticator\">\n+        <constructor-arg ref=\"contextSource\" />\n+        <property name=\"userDnPatterns\">\n+          <list>\n+            < ! - - Dn patterns to search for valid users. Multiple \"<value>\" tags are allowed - - >\n+            <value>uid={0},dc=example,dc=com</value>\n+          </list>\n+        </property>\n+        < ! - - If your user IDs are not part of the user Dn's, you can use a search filter to find them - - >\n+        < ! - - This property can be used together with the \"userDnPatterns\" above - - >\n+        < ! - -\n+        <property name=\"userSearch\">\n+          <bean name=\"filterUserSearch\" class=\"org.springframework.security.ldap.search.FilterBasedLdapUserSearch\">\n+            < ! - - Base Dn from where the users will be searched for - - >\n+            <constructor-arg index=\"0\" value=\"ou=GroupName,dc=my-institution,dc=country\" />\n+            < ! - - Filter to located valid users. Use {0} as a placeholder for the login name - - >\n+            <constructor-arg index=\"1\" value=\"(uid={0})\" />\n+            <constructor-arg ref=\"contextSource\" />\n+          </bean>\n+        </property>\n+        - - >\n+      </bean>\n+    </constructor-arg>\n+    < ! - - Defines how the user attributes are converted to authorities (roles) - - >", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4abe696322077881112b70771156908438d1244"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1OTY4NDMw", "url": "https://github.com/opencast/opencast/pull/1347#pullrequestreview-345968430", "createdAt": "2020-01-21T15:31:31Z", "commit": {"oid": "b4abe696322077881112b70771156908438d1244"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1945, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}