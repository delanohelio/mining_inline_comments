{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNzU2ODI5", "number": 2163, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQyMDozNTo1OVrOFnvy3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQyMDo1MDoyMlrOFnwIWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzc3MjIxODU1OnYy", "diffSide": "RIGHT", "path": "modules/lti/package.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQyMDozNTo1OVrOI5jrFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0yMlQxMzoxMTowMFrOI69wbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIyNDIxNA==", "bodyText": "This is already listed as devDependency. It's probably not necessary to listr this as runtime dependency as well.", "url": "https://github.com/opencast/opencast/pull/2163#discussion_r597224214", "createdAt": "2021-03-18T20:35:59Z", "author": {"login": "lkiesow"}, "path": "modules/lti/package.json", "diffHunk": "@@ -9,10 +9,14 @@\n     \"@fortawesome/react-fontawesome\": \"^0.1.14\",\n     \"axios\": \"^0.21.1\",\n     \"bootstrap\": \"^4.6.0\",\n+    \"dangerously-set-html-content\": \"^1.0.8\",\n+    \"engage-ui\": \"../engage-ui\",\n+    \"http-mock-server\": \"^0.5.2\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f1adbf04ad4c393251c7986a513cfb7ab04500"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODcwMDE0MQ==", "bodyText": "These dependencies came from the deeplink PR and are not needed here, removed them.", "url": "https://github.com/opencast/opencast/pull/2163#discussion_r598700141", "createdAt": "2021-03-22T13:11:00Z", "author": {"login": "kristofkeppens"}, "path": "modules/lti/package.json", "diffHunk": "@@ -9,10 +9,14 @@\n     \"@fortawesome/react-fontawesome\": \"^0.1.14\",\n     \"axios\": \"^0.21.1\",\n     \"bootstrap\": \"^4.6.0\",\n+    \"dangerously-set-html-content\": \"^1.0.8\",\n+    \"engage-ui\": \"../engage-ui\",\n+    \"http-mock-server\": \"^0.5.2\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIyNDIxNA=="}, "originalCommit": {"oid": "17f1adbf04ad4c393251c7986a513cfb7ab04500"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzc3MjI1ODg3OnYy", "diffSide": "RIGHT", "path": "modules/lti/src/components/Upload.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQyMDo0NjozM1rOI5kEKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQyMDo0NjozM1rOI5kEKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIzMDYzMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    console.log(progress)\n          \n          \n            \n                    console.debug(progress)", "url": "https://github.com/opencast/opencast/pull/2163#discussion_r597230632", "createdAt": "2021-03-18T20:46:33Z", "author": {"login": "lkiesow"}, "path": "modules/lti/src/components/Upload.tsx", "diffHunk": "@@ -108,6 +111,42 @@ class TranslatedUpload extends React.Component<UploadProps, UploadState> {\n         }));\n     }\n \n+    componentWillUnmount() {\n+        if (this.state.refreshTimerId !== undefined)\n+            clearInterval(this.state.refreshTimerId);\n+    }\n+\n+    refreshTimer() {\n+        getEventMetadata(this.state.eventId).then((metadataCollection) => {\n+            if (this.state.metadata === undefined || this.state.metadata === \"error\" || metadataCollection.length === 0)\n+                return;\n+\n+            const metadata = metadataCollection[0];\n+            const lockedBefore = this.state.metadata.edited.locked !== undefined;\n+            const lockedAfter = metadata.locked !== undefined;\n+            if (lockedBefore !== lockedAfter) {\n+                this.setState({\n+                    ...this.state,\n+                    metadata: {\n+                        ...this.state.metadata,\n+                        initial: metadata,\n+                        edited: metadata,\n+                    },\n+                });\n+            }\n+        }).catch((_) => {\n+            console.log(\"couldn't retrieve metadata at this time, ignoring...\");\n+        });\n+    }\n+\n+    setUploadPogress(progress: number) {\n+        console.log(progress)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f1adbf04ad4c393251c7986a513cfb7ab04500"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzc3MjI3MDc2OnYy", "diffSide": "RIGHT", "path": "modules/lti/src/components/Upload.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQyMDo0OTozOVrOI5kLMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQyMDo0OTozOVrOI5kLMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIzMjQzNQ==", "bodyText": "You removed this block in pull request #2263\nThis probably shouldn't be in here, should it?", "url": "https://github.com/opencast/opencast/pull/2163#discussion_r597232435", "createdAt": "2021-03-18T20:49:39Z", "author": {"login": "lkiesow"}, "path": "modules/lti/src/components/Upload.tsx", "diffHunk": "@@ -108,6 +111,42 @@ class TranslatedUpload extends React.Component<UploadProps, UploadState> {\n         }));\n     }\n \n+    componentWillUnmount() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f1adbf04ad4c393251c7986a513cfb7ab04500"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzc3MjI3MzU0OnYy", "diffSide": "RIGHT", "path": "modules/lti/package.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQyMDo1MDoyMlrOI5kM5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQyMDo1MDoyMlrOI5kM5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIzMjg2OA==", "bodyText": "What do we need to include the engage-ui module for?", "url": "https://github.com/opencast/opencast/pull/2163#discussion_r597232868", "createdAt": "2021-03-18T20:50:22Z", "author": {"login": "lkiesow"}, "path": "modules/lti/package.json", "diffHunk": "@@ -9,10 +9,14 @@\n     \"@fortawesome/react-fontawesome\": \"^0.1.14\",\n     \"axios\": \"^0.21.1\",\n     \"bootstrap\": \"^4.6.0\",\n+    \"dangerously-set-html-content\": \"^1.0.8\",\n+    \"engage-ui\": \"../engage-ui\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f1adbf04ad4c393251c7986a513cfb7ab04500"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3081, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}