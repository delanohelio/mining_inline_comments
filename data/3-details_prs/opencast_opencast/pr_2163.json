{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNzU2ODI5", "number": 2163, "title": "Added upload progressbar to the LTI upload tool", "bodyText": "Adding a simple uploadprogress to the upload form when uploading via LTI", "createdAt": "2020-12-17T10:17:39Z", "url": "https://github.com/opencast/opencast/pull/2163", "merged": true, "mergeCommit": {"oid": "f2e20588703710e746f613739b51be525510b62e"}, "closed": true, "closedAt": "2021-05-17T09:54:04Z", "author": {"login": "kristofkeppens"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnAyWwgH2gAyNTQxNzU2ODI5OjE0NjM2ZDM2Mjk3YzRkYjFjZTZmMzEzMDQyZWM0MjRlYWQwMzZmMTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeVXn7zAH2gAyNTQxNzU2ODI5OjcwODRjZWI4ZGM5MjNmMTJmMjBmNGNjNTc5OWY2YjI5MmVkMDU0YTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "14636d36297c4db1ce6f313042ec424ead036f12", "author": {"user": null}, "url": "https://github.com/opencast/opencast/commit/14636d36297c4db1ce6f313042ec424ead036f12", "committedDate": "2020-12-17T10:15:17Z", "message": "Added upload progressbar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "caaf873d0d6175c90b1080eec4f4ba33e8d8f3bb", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/caaf873d0d6175c90b1080eec4f4ba33e8d8f3bb", "committedDate": "2020-12-17T10:33:50Z", "message": "adding react-bootstrap which was coming from another pull request not yet merged"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a92a63bd171c8b2a8bf842b676d8e927d14c096e", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/a92a63bd171c8b2a8bf842b676d8e927d14c096e", "committedDate": "2020-12-17T10:51:01Z", "message": "syntax error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa95b7f5e198e514f2b716dabc0fa6da26e03919", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/aa95b7f5e198e514f2b716dabc0fa6da26e03919", "committedDate": "2020-12-17T12:02:31Z", "message": "updating the lockfile as well, arghh"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e92aed70e07cfd721971392dd8cd9de7dc8e584f", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/e92aed70e07cfd721971392dd8cd9de7dc8e584f", "committedDate": "2020-12-17T13:03:41Z", "message": "update package.json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a02926bdb619693efec42aa30323ccedb766784c", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/a02926bdb619693efec42aa30323ccedb766784c", "committedDate": "2020-12-17T13:10:35Z", "message": "undoing manual changes to lockfile and using the original files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c63ca8fe72ca0f9d1aecb54860938d25edf144d3", "author": {"user": {"login": "rubends", "name": "Ruben De Swaef"}}, "url": "https://github.com/opencast/opencast/commit/c63ca8fe72ca0f9d1aecb54860938d25edf144d3", "committedDate": "2021-01-19T10:43:19Z", "message": "Merge branch 'develop' into feature/lti-uploadprogress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eaa2faf8f3dfdabfc89fa6a7851e7c827a09c6ea", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/eaa2faf8f3dfdabfc89fa6a7851e7c827a09c6ea", "committedDate": "2021-02-12T07:41:39Z", "message": "Merge branch 'develop' into feature/lti-uploadprogress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cccd1a5745682334802712c5af475963a81e02ea", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/cccd1a5745682334802712c5af475963a81e02ea", "committedDate": "2021-02-15T15:30:29Z", "message": "Merge branch 'develop' into feature/lti-uploadprogress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff5c363b743caae962e57b8e686616bec5de892a", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/ff5c363b743caae962e57b8e686616bec5de892a", "committedDate": "2021-02-26T15:56:31Z", "message": "Merge branch 'develop' into feature/lti-uploadprogress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "527e06c9aa75eb1335888b75d1cbde56a2ab5a7f", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/527e06c9aa75eb1335888b75d1cbde56a2ab5a7f", "committedDate": "2021-03-09T13:11:04Z", "message": "Merge branch 'develop' into feature/lti-uploadprogress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17f1adbf04ad4c393251c7986a513cfb7ab04500", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/17f1adbf04ad4c393251c7986a513cfb7ab04500", "committedDate": "2021-03-12T09:30:49Z", "message": "Merge branch 'develop' into feature/lti-uploadprogress"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE1ODUwMDQx", "url": "https://github.com/opencast/opencast/pull/2163#pullrequestreview-615850041", "createdAt": "2021-03-18T20:35:59Z", "commit": {"oid": "17f1adbf04ad4c393251c7986a513cfb7ab04500"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQyMDozNTo1OVrOI5jrFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQyMDo1MDoyMlrOI5kM5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIyNDIxNA==", "bodyText": "This is already listed as devDependency. It's probably not necessary to listr this as runtime dependency as well.", "url": "https://github.com/opencast/opencast/pull/2163#discussion_r597224214", "createdAt": "2021-03-18T20:35:59Z", "author": {"login": "lkiesow"}, "path": "modules/lti/package.json", "diffHunk": "@@ -9,10 +9,14 @@\n     \"@fortawesome/react-fontawesome\": \"^0.1.14\",\n     \"axios\": \"^0.21.1\",\n     \"bootstrap\": \"^4.6.0\",\n+    \"dangerously-set-html-content\": \"^1.0.8\",\n+    \"engage-ui\": \"../engage-ui\",\n+    \"http-mock-server\": \"^0.5.2\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f1adbf04ad4c393251c7986a513cfb7ab04500"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIzMDYzMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    console.log(progress)\n          \n          \n            \n                    console.debug(progress)", "url": "https://github.com/opencast/opencast/pull/2163#discussion_r597230632", "createdAt": "2021-03-18T20:46:33Z", "author": {"login": "lkiesow"}, "path": "modules/lti/src/components/Upload.tsx", "diffHunk": "@@ -108,6 +111,42 @@ class TranslatedUpload extends React.Component<UploadProps, UploadState> {\n         }));\n     }\n \n+    componentWillUnmount() {\n+        if (this.state.refreshTimerId !== undefined)\n+            clearInterval(this.state.refreshTimerId);\n+    }\n+\n+    refreshTimer() {\n+        getEventMetadata(this.state.eventId).then((metadataCollection) => {\n+            if (this.state.metadata === undefined || this.state.metadata === \"error\" || metadataCollection.length === 0)\n+                return;\n+\n+            const metadata = metadataCollection[0];\n+            const lockedBefore = this.state.metadata.edited.locked !== undefined;\n+            const lockedAfter = metadata.locked !== undefined;\n+            if (lockedBefore !== lockedAfter) {\n+                this.setState({\n+                    ...this.state,\n+                    metadata: {\n+                        ...this.state.metadata,\n+                        initial: metadata,\n+                        edited: metadata,\n+                    },\n+                });\n+            }\n+        }).catch((_) => {\n+            console.log(\"couldn't retrieve metadata at this time, ignoring...\");\n+        });\n+    }\n+\n+    setUploadPogress(progress: number) {\n+        console.log(progress)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f1adbf04ad4c393251c7986a513cfb7ab04500"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIzMjQzNQ==", "bodyText": "You removed this block in pull request #2263\nThis probably shouldn't be in here, should it?", "url": "https://github.com/opencast/opencast/pull/2163#discussion_r597232435", "createdAt": "2021-03-18T20:49:39Z", "author": {"login": "lkiesow"}, "path": "modules/lti/src/components/Upload.tsx", "diffHunk": "@@ -108,6 +111,42 @@ class TranslatedUpload extends React.Component<UploadProps, UploadState> {\n         }));\n     }\n \n+    componentWillUnmount() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f1adbf04ad4c393251c7986a513cfb7ab04500"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIzMjg2OA==", "bodyText": "What do we need to include the engage-ui module for?", "url": "https://github.com/opencast/opencast/pull/2163#discussion_r597232868", "createdAt": "2021-03-18T20:50:22Z", "author": {"login": "lkiesow"}, "path": "modules/lti/package.json", "diffHunk": "@@ -9,10 +9,14 @@\n     \"@fortawesome/react-fontawesome\": \"^0.1.14\",\n     \"axios\": \"^0.21.1\",\n     \"bootstrap\": \"^4.6.0\",\n+    \"dangerously-set-html-content\": \"^1.0.8\",\n+    \"engage-ui\": \"../engage-ui\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f1adbf04ad4c393251c7986a513cfb7ab04500"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30d5d8f8e56253842ab057e212b00d56bbc6cb38", "author": {"user": null}, "url": "https://github.com/opencast/opencast/commit/30d5d8f8e56253842ab057e212b00d56bbc6cb38", "committedDate": "2021-03-22T10:21:22Z", "message": "Fixed PR remarks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f6ba4f214d2ae79dda6c93afd0685aa6765afe7", "author": {"user": null}, "url": "https://github.com/opencast/opencast/commit/5f6ba4f214d2ae79dda6c93afd0685aa6765afe7", "committedDate": "2021-03-22T10:28:48Z", "message": "Remove deleted state"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b220554e13ec29ec3084cb02176e035c1827a84", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/2b220554e13ec29ec3084cb02176e035c1827a84", "committedDate": "2021-03-22T10:33:46Z", "message": "Merge remote-tracking branch 'upstream/develop' into feature/lti-uploadprogress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daeb6b9297063667cf07a1953d9d8f0bc8daa5ef", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/daeb6b9297063667cf07a1953d9d8f0bc8daa5ef", "committedDate": "2021-03-22T10:40:24Z", "message": "Merge remote-tracking branch 'upstream/develop' into feature/lti-uploadprogress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d7e16657445a8c68cb4dfcad4aa7d4e58705766", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/7d7e16657445a8c68cb4dfcad4aa7d4e58705766", "committedDate": "2021-03-29T12:54:47Z", "message": "Merge remote-tracking branch 'upstream/develop' into feature/lti-uploadprogress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e4576a3782c09ce97a3b3be58f501aa09cdf3a0", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/7e4576a3782c09ce97a3b3be58f501aa09cdf3a0", "committedDate": "2021-04-30T09:55:43Z", "message": "Merge branch 'develop' into feature/lti-uploadprogress"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjUwMTk4NTM2", "url": "https://github.com/opencast/opencast/pull/2163#pullrequestreview-650198536", "createdAt": "2021-05-03T09:14:41Z", "commit": {"oid": "7e4576a3782c09ce97a3b3be58f501aa09cdf3a0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40d6eafdd4ae52560b2fb9fcdf8da1fd422bb6cf", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/40d6eafdd4ae52560b2fb9fcdf8da1fd422bb6cf", "committedDate": "2021-05-07T14:09:10Z", "message": "Merge remote-tracking branch 'upstream/develop' into feature/lti-uploadprogress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7084ceb8dc923f12f20f4cc5799f6b292ed054a5", "author": {"user": {"login": "kristofkeppens", "name": "Kristof Keppens"}}, "url": "https://github.com/opencast/opencast/commit/7084ceb8dc923f12f20f4cc5799f6b292ed054a5", "committedDate": "2021-05-10T10:52:14Z", "message": "Merge remote-tracking branch 'upstream/develop' into feature/lti-uploadprogress"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1716, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}