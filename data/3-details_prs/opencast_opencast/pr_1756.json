{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1Njg2MjMy", "number": 1756, "title": "Change markdown CI checks to bash", "bodyText": "This PR moves the markdown CI checks to a bash script rather than doing it with Travis.  This means that the script can be reused with Buildbot while also not breaking existing Travis compatibility.\nThis branch was developed on develop (9.x) which has a few additional checks, so I've added a commit to the tip here that should be reverted upon forward merge of 8.x.", "createdAt": "2020-08-10T19:25:44Z", "url": "https://github.com/opencast/opencast/pull/1756", "merged": true, "mergeCommit": {"oid": "02e71ca284ee16464f50e531f0846ed0765d571c"}, "closed": true, "closedAt": "2020-08-19T08:57:38Z", "author": {"login": "gregorydlogan"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9nZfQABqjM2NDAxNzk5NzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAXqKJAFqTQ3MDI1Mzg0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb6315094d1e53ebdb66cf6b7dbe513dfc692773", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/eb6315094d1e53ebdb66cf6b7dbe513dfc692773", "committedDate": "2020-08-10T19:20:06Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}, "afterCommit": {"oid": "b40147d51bf5b130faa7be4efbbb64034d15de72", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/b40147d51bf5b130faa7be4efbbb64034d15de72", "committedDate": "2020-08-10T19:29:25Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0NTIxMjU5", "url": "https://github.com/opencast/opencast/pull/1756#pullrequestreview-464521259", "createdAt": "2020-08-10T19:35:11Z", "commit": {"oid": "b40147d51bf5b130faa7be4efbbb64034d15de72"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxOTozNToxMVrOG-cuow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxOTozNToxMVrOG-cuow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODEzNTU4Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # maven-dependency-plugin should be active for all now modules\n          \n          \n            \n            # maven-dependency-plugin should be active for all new modules", "url": "https://github.com/opencast/opencast/pull/1756#discussion_r468135587", "createdAt": "2020-08-10T19:35:11Z", "author": {"login": "lkiesow"}, "path": ".style-and-markdown-build.sh", "diffHunk": "@@ -0,0 +1,60 @@\n+#!/bin/bash\n+\n+ret=0\n+\n+if grep -rn $'\\t' modules assemblies pom.xml --include=pom.xml; then\n+  echo \"Tabs found!\"\n+  ret=1\n+fi\n+if grep -rn ' $' modules assemblies pom.xml --include=pom.xml; then\n+  echo \"Trailing spaces found!\"\n+  ret=1\n+fi\n+if grep -rn '\t' etc; then\n+  echo \"Tabs found in config files!\"\n+  ret=1\n+fi\n+if grep -rn ' $' etc; then\n+  echo \"Trailing spaces found in config files!\"\n+  ret=1\n+fi\n+\n+\n+# build number must be present in all modules\n+if ! grep -L '<Build-Number>${buildNumber}</Build-Number>' modules/*/pom.xml | wc -l | grep -q '^0$'; then\n+  echo \"Build number is missing from a module!\"\n+  ret=1\n+fi\n+\n+# maven-dependency-plugin should be active for all now modules", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b40147d51bf5b130faa7be4efbbb64034d15de72"}, "originalPosition": 29}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b40147d51bf5b130faa7be4efbbb64034d15de72", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/b40147d51bf5b130faa7be4efbbb64034d15de72", "committedDate": "2020-08-10T19:29:25Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}, "afterCommit": {"oid": "27c8a7d513c07480c2262d55f02e1f5756204ee0", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/27c8a7d513c07480c2262d55f02e1f5756204ee0", "committedDate": "2020-08-10T19:55:14Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "27c8a7d513c07480c2262d55f02e1f5756204ee0", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/27c8a7d513c07480c2262d55f02e1f5756204ee0", "committedDate": "2020-08-10T19:55:14Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}, "afterCommit": {"oid": "fcf2f8568777dbed148d485fc7c26fe4173559f8", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/fcf2f8568777dbed148d485fc7c26fe4173559f8", "committedDate": "2020-08-10T20:28:38Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fcf2f8568777dbed148d485fc7c26fe4173559f8", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/fcf2f8568777dbed148d485fc7c26fe4173559f8", "committedDate": "2020-08-10T20:28:38Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}, "afterCommit": {"oid": "f397d0a4ab67a1ff48498b3fcf89aaa716f7851b", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/f397d0a4ab67a1ff48498b3fcf89aaa716f7851b", "committedDate": "2020-08-10T20:40:11Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f397d0a4ab67a1ff48498b3fcf89aaa716f7851b", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/f397d0a4ab67a1ff48498b3fcf89aaa716f7851b", "committedDate": "2020-08-10T20:40:11Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}, "afterCommit": {"oid": "9204833d364a7104417faa892edd9c388f53565b", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/9204833d364a7104417faa892edd9c388f53565b", "committedDate": "2020-08-10T20:52:42Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2OTI2NDUy", "url": "https://github.com/opencast/opencast/pull/1756#pullrequestreview-466926452", "createdAt": "2020-08-13T16:30:37Z", "commit": {"oid": "9204833d364a7104417faa892edd9c388f53565b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNjozMDozN1rOHATP_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNzo1MToyNVrOHAXAWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA3NzQzNw==", "bodyText": "Why the additional cd? This should have no effect whatsoever since you are executing the code in a subshell, should it?\n% (cd ..; pwd); pwd\n/home\n/home/lars\n% (cd ..; pwd; cd ..); pwd\n/home\n/home/lars", "url": "https://github.com/opencast/opencast/pull/1756#discussion_r470077437", "createdAt": "2020-08-13T16:30:37Z", "author": {"login": "lkiesow"}, "path": ".travis.yml", "diffHunk": "@@ -66,33 +66,9 @@ jobs:\n       python: \"3.6\"\n       install:\n         - pip install mkdocs markdown_inline_graphviz_extension mkdocs-windmill\n-        - (cd docs/guides && npm install)\n+        - (cd docs/guides && npm install && cd ../..)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9204833d364a7104417faa892edd9c388f53565b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA4NjM4OA==", "bodyText": "Don't just continue if errors happen e.g. when changing directory:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            \n          \n          \n            \n            set -eu", "url": "https://github.com/opencast/opencast/pull/1756#discussion_r470086388", "createdAt": "2020-08-13T16:45:33Z", "author": {"login": "lkiesow"}, "path": ".style-and-markdown-build.sh", "diffHunk": "@@ -0,0 +1,60 @@\n+#!/bin/bash\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9204833d364a7104417faa892edd9c388f53565b"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA4OTQ2Ng==", "bodyText": "pushd stores the original directory, making the additional cd somewhat weird.\nUsing this would work the same:\npushd \"$docs\"\nBut since you are not keeping multiple locations, you can also just use the simpler cd; \u2026; cd - which also does not print making the pipe unnecessary.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              pushd . > /dev/null\n          \n          \n            \n              cd $docs\n          \n          \n            \n              cd \"$docs\"", "url": "https://github.com/opencast/opencast/pull/1756#discussion_r470089466", "createdAt": "2020-08-13T16:50:56Z", "author": {"login": "lkiesow"}, "path": ".style-and-markdown-build.sh", "diffHunk": "@@ -0,0 +1,60 @@\n+#!/bin/bash\n+\n+ret=0\n+\n+if grep -rn $'\\t' modules assemblies pom.xml --include=pom.xml; then\n+  echo \"Tabs found!\"\n+  ret=1\n+fi\n+if grep -rn ' $' modules assemblies pom.xml --include=pom.xml; then\n+  echo \"Trailing spaces found!\"\n+  ret=1\n+fi\n+if grep -rn '\t' etc; then\n+  echo \"Tabs found in config files!\"\n+  ret=1\n+fi\n+if grep -rn ' $' etc; then\n+  echo \"Trailing spaces found in config files!\"\n+  ret=1\n+fi\n+\n+\n+# build number must be present in all modules\n+if ! grep -L '<Build-Number>${buildNumber}</Build-Number>' modules/*/pom.xml | wc -l | grep -q '^0$'; then\n+  echo \"Build number is missing from a module!\"\n+  ret=1\n+fi\n+\n+# maven-dependency-plugin should be active for all new modules\n+#grep -L maven-dependency-plugin modules/*/pom.xml > maven-dependency-plugin.list\n+#if ! diff -q maven-dependency-plugin.list docs/checkstyle/maven-dependency-plugin.exceptions; then\n+#  rev=1\n+#fi\n+\n+cd docs/guides\n+\n+for docs in admin developer user; do\n+  pushd . > /dev/null\n+  cd $docs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9204833d364a7104417faa892edd9c388f53565b"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA4OTYzNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              popd > /dev/null\n          \n          \n            \n              cd -", "url": "https://github.com/opencast/opencast/pull/1756#discussion_r470089637", "createdAt": "2020-08-13T16:51:12Z", "author": {"login": "lkiesow"}, "path": ".style-and-markdown-build.sh", "diffHunk": "@@ -0,0 +1,60 @@\n+#!/bin/bash\n+\n+ret=0\n+\n+if grep -rn $'\\t' modules assemblies pom.xml --include=pom.xml; then\n+  echo \"Tabs found!\"\n+  ret=1\n+fi\n+if grep -rn ' $' modules assemblies pom.xml --include=pom.xml; then\n+  echo \"Trailing spaces found!\"\n+  ret=1\n+fi\n+if grep -rn '\t' etc; then\n+  echo \"Tabs found in config files!\"\n+  ret=1\n+fi\n+if grep -rn ' $' etc; then\n+  echo \"Trailing spaces found in config files!\"\n+  ret=1\n+fi\n+\n+\n+# build number must be present in all modules\n+if ! grep -L '<Build-Number>${buildNumber}</Build-Number>' modules/*/pom.xml | wc -l | grep -q '^0$'; then\n+  echo \"Build number is missing from a module!\"\n+  ret=1\n+fi\n+\n+# maven-dependency-plugin should be active for all new modules\n+#grep -L maven-dependency-plugin modules/*/pom.xml > maven-dependency-plugin.list\n+#if ! diff -q maven-dependency-plugin.list docs/checkstyle/maven-dependency-plugin.exceptions; then\n+#  rev=1\n+#fi\n+\n+cd docs/guides\n+\n+for docs in admin developer user; do\n+  pushd . > /dev/null\n+  cd $docs\n+  mkdocs build > mkdocs.log 2>&1\n+  if grep \\\n+       -e 'WARNING.*Documentation file' \\\n+       -e 'pages exist in the docs directory' \\\n+       -e 'is not found in the documentation files' \\\n+        mkdocs.log;\n+    then\n+      echo \"$docs did not build correctly!\"\n+      ret=1\n+  fi\n+  echo \"Markdown doc $docs build log:\"\n+  cat mkdocs.log\n+  popd > /dev/null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9204833d364a7104417faa892edd9c388f53565b"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA5MTU0Nw==", "bodyText": "Only with the additional set -e will the script fail if mkdocs fails. Right now, actually being able to build the docs is not checked like this. Once set -e is included, that should be fine.", "url": "https://github.com/opencast/opencast/pull/1756#discussion_r470091547", "createdAt": "2020-08-13T16:54:19Z", "author": {"login": "lkiesow"}, "path": ".style-and-markdown-build.sh", "diffHunk": "@@ -0,0 +1,60 @@\n+#!/bin/bash\n+\n+ret=0\n+\n+if grep -rn $'\\t' modules assemblies pom.xml --include=pom.xml; then\n+  echo \"Tabs found!\"\n+  ret=1\n+fi\n+if grep -rn ' $' modules assemblies pom.xml --include=pom.xml; then\n+  echo \"Trailing spaces found!\"\n+  ret=1\n+fi\n+if grep -rn '\t' etc; then\n+  echo \"Tabs found in config files!\"\n+  ret=1\n+fi\n+if grep -rn ' $' etc; then\n+  echo \"Trailing spaces found in config files!\"\n+  ret=1\n+fi\n+\n+\n+# build number must be present in all modules\n+if ! grep -L '<Build-Number>${buildNumber}</Build-Number>' modules/*/pom.xml | wc -l | grep -q '^0$'; then\n+  echo \"Build number is missing from a module!\"\n+  ret=1\n+fi\n+\n+# maven-dependency-plugin should be active for all new modules\n+#grep -L maven-dependency-plugin modules/*/pom.xml > maven-dependency-plugin.list\n+#if ! diff -q maven-dependency-plugin.list docs/checkstyle/maven-dependency-plugin.exceptions; then\n+#  rev=1\n+#fi\n+\n+cd docs/guides\n+\n+for docs in admin developer user; do\n+  pushd . > /dev/null\n+  cd $docs\n+  mkdocs build > mkdocs.log 2>&1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9204833d364a7104417faa892edd9c388f53565b"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA5NTM0MQ==", "bodyText": "Not strictly necessary but maybe add a\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            cd \"$(dirname $(realpath -s $0))\"\n          \n      \n    \n    \n  \n\nThat makes it work when it's run from different locations.", "url": "https://github.com/opencast/opencast/pull/1756#discussion_r470095341", "createdAt": "2020-08-13T17:00:36Z", "author": {"login": "lkiesow"}, "path": ".style-and-markdown-build.sh", "diffHunk": "@@ -0,0 +1,60 @@\n+#!/bin/bash\n+\n+ret=0\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9204833d364a7104417faa892edd9c388f53565b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDEzODk3MA==", "bodyText": "Is it intentional that mkdocs.log is always printed? Before it was only printed in case there was an error. Both are fine, I just want to make sure it's intentional.\nIf you want to print it regardless, you can use tee above:\nmkdocs build 2>&1 | tee mkdocs.log", "url": "https://github.com/opencast/opencast/pull/1756#discussion_r470138970", "createdAt": "2020-08-13T17:51:25Z", "author": {"login": "lkiesow"}, "path": ".style-and-markdown-build.sh", "diffHunk": "@@ -0,0 +1,60 @@\n+#!/bin/bash\n+\n+ret=0\n+\n+if grep -rn $'\\t' modules assemblies pom.xml --include=pom.xml; then\n+  echo \"Tabs found!\"\n+  ret=1\n+fi\n+if grep -rn ' $' modules assemblies pom.xml --include=pom.xml; then\n+  echo \"Trailing spaces found!\"\n+  ret=1\n+fi\n+if grep -rn '\t' etc; then\n+  echo \"Tabs found in config files!\"\n+  ret=1\n+fi\n+if grep -rn ' $' etc; then\n+  echo \"Trailing spaces found in config files!\"\n+  ret=1\n+fi\n+\n+\n+# build number must be present in all modules\n+if ! grep -L '<Build-Number>${buildNumber}</Build-Number>' modules/*/pom.xml | wc -l | grep -q '^0$'; then\n+  echo \"Build number is missing from a module!\"\n+  ret=1\n+fi\n+\n+# maven-dependency-plugin should be active for all new modules\n+#grep -L maven-dependency-plugin modules/*/pom.xml > maven-dependency-plugin.list\n+#if ! diff -q maven-dependency-plugin.list docs/checkstyle/maven-dependency-plugin.exceptions; then\n+#  rev=1\n+#fi\n+\n+cd docs/guides\n+\n+for docs in admin developer user; do\n+  pushd . > /dev/null\n+  cd $docs\n+  mkdocs build > mkdocs.log 2>&1\n+  if grep \\\n+       -e 'WARNING.*Documentation file' \\\n+       -e 'pages exist in the docs directory' \\\n+       -e 'is not found in the documentation files' \\\n+        mkdocs.log;\n+    then\n+      echo \"$docs did not build correctly!\"\n+      ret=1\n+  fi\n+  echo \"Markdown doc $docs build log:\"\n+  cat mkdocs.log", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9204833d364a7104417faa892edd9c388f53565b"}, "originalPosition": 51}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f5ad9328ea5e685c5a3ed205ec3e227d3b3bd89", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/3f5ad9328ea5e685c5a3ed205ec3e227d3b3bd89", "committedDate": "2020-08-13T18:11:24Z", "message": "Incorporating suggested changes from PR 1756 review"}, "afterCommit": {"oid": "068547507a310d3676f37fbc402b94e3736c5499", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/068547507a310d3676f37fbc402b94e3736c5499", "committedDate": "2020-08-15T04:01:27Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "068547507a310d3676f37fbc402b94e3736c5499", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/068547507a310d3676f37fbc402b94e3736c5499", "committedDate": "2020-08-15T04:01:27Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}, "afterCommit": {"oid": "8b10c723accd34f8ba0345d18e0fe42ef1fa8d24", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/8b10c723accd34f8ba0345d18e0fe42ef1fa8d24", "committedDate": "2020-08-15T04:12:27Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8b10c723accd34f8ba0345d18e0fe42ef1fa8d24", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/8b10c723accd34f8ba0345d18e0fe42ef1fa8d24", "committedDate": "2020-08-15T04:12:27Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}, "afterCommit": {"oid": "4288cfb7f7fe0b35f1c1aa761baee171d3eb146f", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/4288cfb7f7fe0b35f1c1aa761baee171d3eb146f", "committedDate": "2020-08-17T18:06:17Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5Mjk3MDgz", "url": "https://github.com/opencast/opencast/pull/1756#pullrequestreview-469297083", "createdAt": "2020-08-18T11:42:35Z", "commit": {"oid": "4288cfb7f7fe0b35f1c1aa761baee171d3eb146f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMTo0MjozNVrOHCPkpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMTo0NzowOVrOHCPuQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjExNDM0MA==", "bodyText": "Is there a particular reason to not set nounset? You resolved my suggestion for adding it without comment. I don't think it will have a huge effect here but it also will not hurt and is a safer choice when people potentially modify the script.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            set -e\n          \n          \n            \n            set -ue", "url": "https://github.com/opencast/opencast/pull/1756#discussion_r472114340", "createdAt": "2020-08-18T11:42:35Z", "author": {"login": "lkiesow"}, "path": ".style-and-markdown-build.sh", "diffHunk": "@@ -0,0 +1,63 @@\n+#!/bin/bash\n+\n+set -e", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4288cfb7f7fe0b35f1c1aa761baee171d3eb146f"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjExNTczMA==", "bodyText": "This has no function anymore\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              pushd . > /dev/null", "url": "https://github.com/opencast/opencast/pull/1756#discussion_r472115730", "createdAt": "2020-08-18T11:45:11Z", "author": {"login": "lkiesow"}, "path": ".style-and-markdown-build.sh", "diffHunk": "@@ -0,0 +1,63 @@\n+#!/bin/bash\n+\n+set -e\n+\n+ret=0\n+\n+cd \"$(dirname $(realpath -s $0))\"\n+\n+if grep -rn $'\\t' modules assemblies pom.xml --include=pom.xml; then\n+  echo \"Tabs found!\"\n+  ret=1\n+fi\n+if grep -rn ' $' modules assemblies pom.xml --include=pom.xml; then\n+  echo \"Trailing spaces found!\"\n+  ret=1\n+fi\n+if grep -rn '\t' etc; then\n+  echo \"Tabs found in config files!\"\n+  ret=1\n+fi\n+if grep -rn ' $' etc; then\n+  echo \"Trailing spaces found in config files!\"\n+  ret=1\n+fi\n+\n+\n+# build number must be present in all modules\n+if ! grep -L '<Build-Number>${buildNumber}</Build-Number>' modules/*/pom.xml | wc -l | grep -q '^0$'; then\n+  echo \"Build number is missing from a module!\"\n+  ret=1\n+fi\n+\n+# maven-dependency-plugin should be active for all new modules\n+#grep -L maven-dependency-plugin modules/*/pom.xml > maven-dependency-plugin.list\n+#if ! diff -q maven-dependency-plugin.list docs/checkstyle/maven-dependency-plugin.exceptions; then\n+#  ret=1\n+#fi\n+\n+cd docs/guides\n+\n+for docs in admin developer user; do\n+  pushd . > /dev/null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4288cfb7f7fe0b35f1c1aa761baee171d3eb146f"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjExNjgwMg==", "bodyText": "Just to keep to one style:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            if grep -rn '\t' etc; then\n          \n          \n            \n            if grep -rn $'\\t' etc; then", "url": "https://github.com/opencast/opencast/pull/1756#discussion_r472116802", "createdAt": "2020-08-18T11:47:09Z", "author": {"login": "lkiesow"}, "path": ".style-and-markdown-build.sh", "diffHunk": "@@ -0,0 +1,63 @@\n+#!/bin/bash\n+\n+set -e\n+\n+ret=0\n+\n+cd \"$(dirname $(realpath -s $0))\"\n+\n+if grep -rn $'\\t' modules assemblies pom.xml --include=pom.xml; then\n+  echo \"Tabs found!\"\n+  ret=1\n+fi\n+if grep -rn ' $' modules assemblies pom.xml --include=pom.xml; then\n+  echo \"Trailing spaces found!\"\n+  ret=1\n+fi\n+if grep -rn '\t' etc; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4288cfb7f7fe0b35f1c1aa761baee171d3eb146f"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4288cfb7f7fe0b35f1c1aa761baee171d3eb146f", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/4288cfb7f7fe0b35f1c1aa761baee171d3eb146f", "committedDate": "2020-08-17T18:06:17Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}, "afterCommit": {"oid": "4a4047f69465610fa614c185580291a0f44349ea", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/4a4047f69465610fa614c185580291a0f44349ea", "committedDate": "2020-08-18T18:08:56Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0da324965464eb371030626e5a6f222f2fd5f791", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/0da324965464eb371030626e5a6f222f2fd5f791", "committedDate": "2020-08-18T21:11:28Z", "message": "Switch to a bash script for extra checks, which makes the tests reusable with other CI systems."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1c96052fbb6472030c265fb8d31c0a8e52875f5", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/f1c96052fbb6472030c265fb8d31c0a8e52875f5", "committedDate": "2020-08-18T21:11:29Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4a4047f69465610fa614c185580291a0f44349ea", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/4a4047f69465610fa614c185580291a0f44349ea", "committedDate": "2020-08-18T18:08:56Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}, "afterCommit": {"oid": "f1c96052fbb6472030c265fb8d31c0a8e52875f5", "author": {"user": {"login": "gregorydlogan", "name": "Greg Logan"}}, "url": "https://github.com/opencast/opencast/commit/f1c96052fbb6472030c265fb8d31c0a8e52875f5", "committedDate": "2020-08-18T21:11:29Z", "message": "This script was developed with develop (9.x) in mind, this patch adds compatibility for 8.x.  Revert this for 9.x and newer."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwMjUzODQ2", "url": "https://github.com/opencast/opencast/pull/1756#pullrequestreview-470253846", "createdAt": "2020-08-19T08:51:06Z", "commit": {"oid": "f1c96052fbb6472030c265fb8d31c0a8e52875f5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1806, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}