{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyMTUzNjAz", "number": 1636, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMjo1NDozM1rOEHGyng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMjo1NDozM1rOEHGyng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1ODg2NzUwOnYy", "diffSide": "RIGHT", "path": "modules/engage-paella-player/src/main/paella-opencast/plugins/es.upv.paella.opencast.loader/03_oc_search_converter.js", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMjo1NDozM1rOGmTzHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNjoxOTo1MVrOGoZlSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjgyMzQ1NQ==", "bodyText": "@phoebem That delete line is not in DCE's deploy. Is it needed here because the version of OC develop Paella prefers mp4 to hls source?", "url": "https://github.com/opencast/opencast/pull/1636#discussion_r442823455", "createdAt": "2020-06-19T12:54:33Z", "author": {"login": "karendolan"}, "path": "modules/engage-paella-player/src/main/paella-opencast/plugins/es.upv.paella.opencast.loader/03_oc_search_converter.js", "diffHunk": "@@ -258,6 +277,13 @@ class OpencastToPaellaConverter {\n         }\n       }\n     });\n+    // HLS-VOD Where there's a master HLS index, remove all non-master HLS sources\n+    if (hasAdaptiveMasterTrack && currentStream.sources.hls) {\n+      var filteredHls = currentStream.sources.hls.filter(track => track.master);\n+      currentStream.sources.hls = filteredHls;\n+      /****  NOTE: This is a hack to force it to play HLS as a demo, probably wrong, Please fix ****/\n+      delete currentStream.sources.mp4;\n+    }\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec69541ce21ecafa06e7720d37bf6811fbb9a58c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM4OTAwOA==", "bodyText": "@phoebem, @karendolan In the default configuration mp4 take priority over HLS. You can change this in the config.json. The order in which the loaders appear in the list defines the priority.\nhttps://github.com/opencast/opencast/blob/develop/etc/ui-config/mh_default_org/paella/config.json#L31-L76", "url": "https://github.com/opencast/opencast/pull/1636#discussion_r443389008", "createdAt": "2020-06-22T08:15:21Z", "author": {"login": "miesgre"}, "path": "modules/engage-paella-player/src/main/paella-opencast/plugins/es.upv.paella.opencast.loader/03_oc_search_converter.js", "diffHunk": "@@ -258,6 +277,13 @@ class OpencastToPaellaConverter {\n         }\n       }\n     });\n+    // HLS-VOD Where there's a master HLS index, remove all non-master HLS sources\n+    if (hasAdaptiveMasterTrack && currentStream.sources.hls) {\n+      var filteredHls = currentStream.sources.hls.filter(track => track.master);\n+      currentStream.sources.hls = filteredHls;\n+      /****  NOTE: This is a hack to force it to play HLS as a demo, probably wrong, Please fix ****/\n+      delete currentStream.sources.mp4;\n+    }\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjgyMzQ1NQ=="}, "originalCommit": {"oid": "ec69541ce21ecafa06e7720d37bf6811fbb9a58c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTAwODIzMQ==", "bodyText": "@phoebem, @karendolan In the default configuration mp4 take priority over HLS. You can change this in the config.json. The order in which the loaders appear in the list defines the priority.\n\n@miesgre thanks! If we reverse the order in the config to put HLSVideoFactory before Html5VideoFactory, is it true that browsers that do no support HLS, will still fall back to the mp4 sources?", "url": "https://github.com/opencast/opencast/pull/1636#discussion_r445008231", "createdAt": "2020-06-24T16:08:37Z", "author": {"login": "karendolan"}, "path": "modules/engage-paella-player/src/main/paella-opencast/plugins/es.upv.paella.opencast.loader/03_oc_search_converter.js", "diffHunk": "@@ -258,6 +277,13 @@ class OpencastToPaellaConverter {\n         }\n       }\n     });\n+    // HLS-VOD Where there's a master HLS index, remove all non-master HLS sources\n+    if (hasAdaptiveMasterTrack && currentStream.sources.hls) {\n+      var filteredHls = currentStream.sources.hls.filter(track => track.master);\n+      currentStream.sources.hls = filteredHls;\n+      /****  NOTE: This is a hack to force it to play HLS as a demo, probably wrong, Please fix ****/\n+      delete currentStream.sources.mp4;\n+    }\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjgyMzQ1NQ=="}, "originalCommit": {"oid": "ec69541ce21ecafa06e7720d37bf6811fbb9a58c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTAxNTM2OA==", "bodyText": "Yes, Paella uses the first method the browser supports. We are using it in our installation.", "url": "https://github.com/opencast/opencast/pull/1636#discussion_r445015368", "createdAt": "2020-06-24T16:19:51Z", "author": {"login": "miesgre"}, "path": "modules/engage-paella-player/src/main/paella-opencast/plugins/es.upv.paella.opencast.loader/03_oc_search_converter.js", "diffHunk": "@@ -258,6 +277,13 @@ class OpencastToPaellaConverter {\n         }\n       }\n     });\n+    // HLS-VOD Where there's a master HLS index, remove all non-master HLS sources\n+    if (hasAdaptiveMasterTrack && currentStream.sources.hls) {\n+      var filteredHls = currentStream.sources.hls.filter(track => track.master);\n+      currentStream.sources.hls = filteredHls;\n+      /****  NOTE: This is a hack to force it to play HLS as a demo, probably wrong, Please fix ****/\n+      delete currentStream.sources.mp4;\n+    }\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjgyMzQ1NQ=="}, "originalCommit": {"oid": "ec69541ce21ecafa06e7720d37bf6811fbb9a58c"}, "originalPosition": 61}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3194, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}