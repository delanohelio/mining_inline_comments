{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5NzExMDAw", "number": 1327, "title": "Video Segemntation On Short Videos", "bodyText": "Our video segmentation works extremely bad on short videos, e.g. trying\nto divide a 0.5 seconds video into 100 segments, causing the segments to\nbe shorter than a single frame which then caused problems with the\nslide-preview extraction.\nAssuming that a segmentation on extremely short videos is useless at\nbest and causes workflow failures or services in error states at worst,\nthis patch will make Opencast skip the segmentation on videos shorter\nthan 15 seconds.\nThis is related to #1219 and #1326\nYour pull request should\u2026\n\n have a concise title\n close an accompanying issue if one exists\n be against the correct branch (features can only go into develop)\n include migration scripts and documentation, if appropriate\n pass automated testing\n have a clean commit history\n have proper commit messages (title and body) for all commits\n have appropriate tags applied", "createdAt": "2020-01-06T20:58:13Z", "url": "https://github.com/opencast/opencast/pull/1327", "merged": true, "mergeCommit": {"oid": "b7bd03d55949d53271327abe465d5ca9c6ab6828"}, "closed": true, "closedAt": "2020-02-18T20:45:16Z", "author": {"login": "lkiesow"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6G_CKgFqTM0MjI1MDU2Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6S38aABqjI5NDc1NjgzMTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMjUwNTYy", "url": "https://github.com/opencast/opencast/pull/1327#pullrequestreview-342250562", "createdAt": "2020-01-14T01:50:44Z", "commit": {"oid": "f0198c25f4b9448375cdfa3676deae3ea0241ee3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwMTo1MDo0NFrOFdKHNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwMTo1MDo0NFrOFdKHNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjExODcxMA==", "bodyText": "15 seconds is fine to me, although I somewhat agree with Matthias in that sub 5 minute videos don't really benefit from segmentation.\nMy complaint here whoever, is somewhat simpler: Magic numbers.  IMO this should be a constant properly defined so it shows up in the javadocs.", "url": "https://github.com/opencast/opencast/pull/1327#discussion_r366118710", "createdAt": "2020-01-14T01:50:44Z", "author": {"login": "gregorydlogan"}, "path": "modules/videosegmenter-workflowoperation/src/main/java/org/opencastproject/workflow/handler/videosegmenter/VideoSegmenterWorkflowOperationHandler.java", "diffHunk": "@@ -110,6 +110,12 @@ public WorkflowOperationResult start(final WorkflowInstance workflowInstance, Jo\n     }\n     Track track = candidates.get(0);\n \n+    // Skip operation if media is shorter than 15s since we won't generate a sensible segmentation on such a short\n+    // video anyway.\n+    if (track.getDuration() != null && track.getDuration() < 15000) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0198c25f4b9448375cdfa3676deae3ea0241ee3"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f0198c25f4b9448375cdfa3676deae3ea0241ee3", "author": {"user": {"login": "lkiesow", "name": "Lars Kiesow"}}, "url": "https://github.com/opencast/opencast/commit/f0198c25f4b9448375cdfa3676deae3ea0241ee3", "committedDate": "2020-01-06T20:53:12Z", "message": "Video Segemntation On Short Videos\n\nOur video segmentation works extremely bad on short videos, e.g. trying\nto divide a 0.5 seconds video into 100 segments, causing the segments to\nbe shorter than a single frame which then caused problems with the\nslide-preview extraction.\n\nAssuming that a segmentation on extremely short videos is useless at\nbest and causes workflow failures or services in error states at worst,\nthis patch will make Opencast skip the segmentation on videos shorter\nthan 15 seconds.\n\nThis is related to #1219 and #1326"}, "afterCommit": {"oid": "94feda5a4191a44fcd8eaa425fbb1f789b728e58", "author": {"user": {"login": "lkiesow", "name": "Lars Kiesow"}}, "url": "https://github.com/opencast/opencast/commit/94feda5a4191a44fcd8eaa425fbb1f789b728e58", "committedDate": "2020-01-14T14:16:23Z", "message": "Video Segemntation On Short Videos\n\nOur video segmentation works extremely bad on short videos, e.g. trying\nto divide a 0.5 seconds video into 100 segments, causing the segments to\nbe shorter than a single frame which then caused problems with the\nslide-preview extraction.\n\nAssuming that a segmentation on extremely short videos is useless at\nbest and causes workflow failures or services in error states at worst,\nthis patch will make Opencast skip the segmentation on videos shorter\nthan 15 seconds.\n\nThis is related to #1219 and #1326"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7bd03d55949d53271327abe465d5ca9c6ab6828", "author": {"user": {"login": "lkiesow", "name": "Lars Kiesow"}}, "url": "https://github.com/opencast/opencast/commit/b7bd03d55949d53271327abe465d5ca9c6ab6828", "committedDate": "2020-01-14T15:41:29Z", "message": "Video Segemntation On Short Videos\n\nOur video segmentation works extremely bad on short videos, e.g. trying\nto divide a 0.5 seconds video into 100 segments, causing the segments to\nbe shorter than a single frame which then caused problems with the\nslide-preview extraction.\n\nAssuming that a segmentation on extremely short videos is useless at\nbest and causes workflow failures or services in error states at worst,\nthis patch will make Opencast skip the segmentation on videos shorter\nthan 15 seconds.\n\nThis is related to #1219 and #1326"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "94feda5a4191a44fcd8eaa425fbb1f789b728e58", "author": {"user": {"login": "lkiesow", "name": "Lars Kiesow"}}, "url": "https://github.com/opencast/opencast/commit/94feda5a4191a44fcd8eaa425fbb1f789b728e58", "committedDate": "2020-01-14T14:16:23Z", "message": "Video Segemntation On Short Videos\n\nOur video segmentation works extremely bad on short videos, e.g. trying\nto divide a 0.5 seconds video into 100 segments, causing the segments to\nbe shorter than a single frame which then caused problems with the\nslide-preview extraction.\n\nAssuming that a segmentation on extremely short videos is useless at\nbest and causes workflow failures or services in error states at worst,\nthis patch will make Opencast skip the segmentation on videos shorter\nthan 15 seconds.\n\nThis is related to #1219 and #1326"}, "afterCommit": {"oid": "b7bd03d55949d53271327abe465d5ca9c6ab6828", "author": {"user": {"login": "lkiesow", "name": "Lars Kiesow"}}, "url": "https://github.com/opencast/opencast/commit/b7bd03d55949d53271327abe465d5ca9c6ab6828", "committedDate": "2020-01-14T15:41:29Z", "message": "Video Segemntation On Short Videos\n\nOur video segmentation works extremely bad on short videos, e.g. trying\nto divide a 0.5 seconds video into 100 segments, causing the segments to\nbe shorter than a single frame which then caused problems with the\nslide-preview extraction.\n\nAssuming that a segmentation on extremely short videos is useless at\nbest and causes workflow failures or services in error states at worst,\nthis patch will make Opencast skip the segmentation on videos shorter\nthan 15 seconds.\n\nThis is related to #1219 and #1326"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1940, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}