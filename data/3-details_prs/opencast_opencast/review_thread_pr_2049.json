{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2MTI1Mzg4", "number": 2049, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwMDowNzo0M1rOE6SZKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwMDowNzo0M1rOE6SZKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NTU0MjE5OnYy", "diffSide": "RIGHT", "path": "modules/admin-ui/src/main/webapp/scripts/shared/directives/segmentsDirective.js", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwMDowNzo0M1rOH1QjqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNToxNDoyN1rOIBibAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTYwNzg0OQ==", "bodyText": "Could this be added to the loop before it? Is there any issue that \"segment.endTime\" will still be old time that is greater than scope.video.duration? In other words, should the \"if\" check happen before segment.endTime is assigned?", "url": "https://github.com/opencast/opencast/pull/2049#discussion_r525607849", "createdAt": "2020-11-18T00:07:43Z", "author": {"login": "karendolan"}, "path": "modules/admin-ui/src/main/webapp/scripts/shared/directives/segmentsDirective.js", "diffHunk": "@@ -181,6 +181,11 @@ angular.module('adminNg.directives')\n              * Make sure that times are updates if needed.\n              */\n         scope.$root.$on('segmentTimesUpdated', function () {\n+          angular.forEach(scope.video.segments, function (segment) {\n+            if (segment.end > scope.video.duration) {\n+              segment.end = scope.video.duration;\n+            }\n+          });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddff20e03c4d522253b0fa0708d5a8235ef4e1c0"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk4NjA0NQ==", "bodyText": "I don't understand exactly what you mean with \"the loop before it\", but the \"if\" check has to happen before the assignment of segment.endTime. I can put the \"if\" statement into the loop of scope.setHumanReadableTimes() (maybe that's what you mean). Then it wouldn't iterate 2 times over the segments.", "url": "https://github.com/opencast/opencast/pull/2049#discussion_r533986045", "createdAt": "2020-12-02T08:41:19Z", "author": {"login": "marwyg"}, "path": "modules/admin-ui/src/main/webapp/scripts/shared/directives/segmentsDirective.js", "diffHunk": "@@ -181,6 +181,11 @@ angular.module('adminNg.directives')\n              * Make sure that times are updates if needed.\n              */\n         scope.$root.$on('segmentTimesUpdated', function () {\n+          angular.forEach(scope.video.segments, function (segment) {\n+            if (segment.end > scope.video.duration) {\n+              segment.end = scope.video.duration;\n+            }\n+          });", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTYwNzg0OQ=="}, "originalCommit": {"oid": "ddff20e03c4d522253b0fa0708d5a8235ef4e1c0"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ4MzQ1OA==", "bodyText": "HI @marwyg , upon revisiting this pull, I don't see which loop I was thinking off. So I'm closing this comment!", "url": "https://github.com/opencast/opencast/pull/2049#discussion_r538483458", "createdAt": "2020-12-08T15:14:27Z", "author": {"login": "karendolan"}, "path": "modules/admin-ui/src/main/webapp/scripts/shared/directives/segmentsDirective.js", "diffHunk": "@@ -181,6 +181,11 @@ angular.module('adminNg.directives')\n              * Make sure that times are updates if needed.\n              */\n         scope.$root.$on('segmentTimesUpdated', function () {\n+          angular.forEach(scope.video.segments, function (segment) {\n+            if (segment.end > scope.video.duration) {\n+              segment.end = scope.video.duration;\n+            }\n+          });", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTYwNzg0OQ=="}, "originalCommit": {"oid": "ddff20e03c4d522253b0fa0708d5a8235ef4e1c0"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3094, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}