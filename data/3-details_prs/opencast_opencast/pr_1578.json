{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2NTg3Mjk2", "number": 1578, "title": "Add cutting to the default Studio workflow", "bodyText": "The next Opencast Studio release, slated to be included in Opencast 8.4, will likely support a very minimal editing interface. See elan-ev/opencast-studio#454. This needs to be supported by the Opencast workflow used to process the Studio uploads, though, since the plan at the moment is to just submit a SMIL file together with the video, as opposed to cutting the video client side.\nThis PR adapts the standard studio workflow accordingly.", "createdAt": "2020-05-12T09:01:14Z", "url": "https://github.com/opencast/opencast/pull/1578", "merged": true, "mergeCommit": {"oid": "3c0890d70e57b5c9faf325217c9d3ceb42744a69"}, "closed": true, "closedAt": "2020-05-14T20:30:14Z", "author": {"login": "JulianKniephoff"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgiLK_AFqTQwOTkyMjAwOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABchJJU9gBqjMzMzU0MzU1NzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5OTIyMDA5", "url": "https://github.com/opencast/opencast/pull/1578#pullrequestreview-409922009", "createdAt": "2020-05-12T10:49:54Z", "commit": {"oid": "860fc5fda0e97e22169a17dd35c69fff496da61c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMDo0OTo1NVrOGUA9vA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMDo1OTowNlrOGUBQlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY0MDUwOA==", "bodyText": "In case the smil file contains only one segment over the whole video length, the operation will be \"skipped\" but it does not copy the source track and set the target flavor/tags on it. The next operation will fail (or be skipped), because there are no tracks with */trimmed flavor. Be carefully with this option.", "url": "https://github.com/opencast/opencast/pull/1578#discussion_r423640508", "createdAt": "2020-05-12T10:49:55Z", "author": {"login": "wsmirnow"}, "path": "etc/workflows/studio-upload.xml", "diffHunk": "@@ -202,14 +202,37 @@\n       </configurations>\n     </operation>\n \n+    <!-- Cut the videos -->\n+\n+    <operation\n+        id=\"clone\"\n+        exception-handler-workflow=\"partial-error\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">smil/cutting</configuration>\n+        <configuration key=\"target-flavor\">smil/tmp</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation id=\"editor\"\n+      exception-handler-workflow=\"partial-error\"\n+      description=\"Cut the recording according to the edit decision list\">\n+      <configurations>\n+        <configuration key=\"source-flavors\">*/prepared</configuration>\n+        <configuration key=\"smil-flavors\">smil/tmp</configuration>\n+        <configuration key=\"target-smil-flavor\">smil/tmp</configuration>\n+        <configuration key=\"target-flavor-subtype\">trimmed</configuration>\n+        <configuration key=\"skip-if-not-trimmed\">true</configuration>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "860fc5fda0e97e22169a17dd35c69fff496da61c"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY0NTMzMg==", "bodyText": "In case of Studio video upload, you want to trimm the video and archive the trimmed result, without the uploaded smil file. Also the editor-trimm operation should be moved to the partial-transcode-studio-tracks workflow, where it can do the magic stuff before the first snapshot operation.", "url": "https://github.com/opencast/opencast/pull/1578#discussion_r423645332", "createdAt": "2020-05-12T10:59:06Z", "author": {"login": "wsmirnow"}, "path": "etc/workflows/studio-upload.xml", "diffHunk": "@@ -142,7 +142,7 @@\n         exception-handler-workflow=\"partial-error\"\n         description=\"Tagging source material for archival\">\n       <configurations>\n-        <configuration key=\"source-flavors\">dublincore/*,security/*,*/source</configuration>\n+        <configuration key=\"source-flavors\">dublincore/*,security/*,smil/*,*/source</configuration>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "860fc5fda0e97e22169a17dd35c69fff496da61c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "120ed7045105a2eda0ff080362e546942fda5115", "author": {"user": {"login": "JulianKniephoff", "name": "Julian Kniephoff"}}, "url": "https://github.com/opencast/opencast/commit/120ed7045105a2eda0ff080362e546942fda5115", "committedDate": "2020-05-14T08:23:37Z", "message": "Add cutting to the default Studio workflow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "860fc5fda0e97e22169a17dd35c69fff496da61c", "author": {"user": {"login": "JulianKniephoff", "name": "Julian Kniephoff"}}, "url": "https://github.com/opencast/opencast/commit/860fc5fda0e97e22169a17dd35c69fff496da61c", "committedDate": "2020-05-12T08:47:58Z", "message": "Add cutting to the default Studio workflow"}, "afterCommit": {"oid": "120ed7045105a2eda0ff080362e546942fda5115", "author": {"user": {"login": "JulianKniephoff", "name": "Julian Kniephoff"}}, "url": "https://github.com/opencast/opencast/commit/120ed7045105a2eda0ff080362e546942fda5115", "committedDate": "2020-05-14T08:23:37Z", "message": "Add cutting to the default Studio workflow"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1886, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}