{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MDgyMDcx", "number": 663, "title": "Decimal precision fix", "bodyText": "", "createdAt": "2020-05-27T19:54:34Z", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/663", "merged": true, "mergeCommit": {"oid": "a9eeabb05c9bf8075a00609aca40870aff8c0d35"}, "closed": true, "closedAt": "2020-05-29T03:41:35Z", "author": {"login": "aguibert"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclhPeZgFqTQxOTY2MDkzMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcl6FMlgBqjMzODU0OTczNjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NjYwOTMx", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/663#pullrequestreview-419660931", "createdAt": "2020-05-27T22:45:02Z", "commit": {"oid": "9c55da7e1388e154594e51e5c6cff434842f95f8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMjo0NTowM1rOGbfulQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMjo0NTowM1rOGbfulQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ4NDU2NQ==", "bodyText": "CC @vietj to make sure you are OK with this change", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/663#discussion_r431484565", "createdAt": "2020-05-27T22:45:03Z", "author": {"login": "aguibert"}, "path": "pom.xml", "diffHunk": "@@ -48,6 +48,8 @@\n \n   <properties>\n     <stack.version>4.0.0-SNAPSHOT</stack.version>\n+    <maven.compiler.source>1.8</maven.compiler.source>\n+    <maven.compiler.target>1.8</maven.compiler.target>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c55da7e1388e154594e51e5c6cff434842f95f8"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c55da7e1388e154594e51e5c6cff434842f95f8", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/9c55da7e1388e154594e51e5c6cff434842f95f8", "committedDate": "2020-05-27T19:54:04Z", "message": "Force compiler source/target to 1.8 instead of JDK default"}, "afterCommit": {"oid": "4703de1e76e7f772859505c73c2e5627aeea5fd3", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/4703de1e76e7f772859505c73c2e5627aeea5fd3", "committedDate": "2020-05-28T18:51:59Z", "message": "Perform client side decimal rounding based on defined DB precision and scale"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNDAxNTQ5", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/663#pullrequestreview-420401549", "createdAt": "2020-05-28T18:58:35Z", "commit": {"oid": "4703de1e76e7f772859505c73c2e5627aeea5fd3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxODo1ODozNlrOGcCdaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxODo1ODozNlrOGcCdaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjA1MzYxMQ==", "bodyText": "Intentionally leaving this comment here so I remember to clean it up once I do the global cleanup of the drda package", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/663#discussion_r432053611", "createdAt": "2020-05-28T18:58:36Z", "author": {"login": "aguibert"}, "path": "vertx-db2-client/src/main/java/io/vertx/db2client/impl/drda/DRDAQueryRequest.java", "diffHunk": "@@ -1399,7 +1409,7 @@ private Hashtable computeProtocolTypesAndLengths(\n                     lidAndLengths[i][0]--;\n                 }\n             }\n-            return overrideMap;\n+            return overrideMap; // @AGG this is never used", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4703de1e76e7f772859505c73c2e5627aeea5fd3"}, "originalPosition": 91}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNTY5MTUw", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/663#pullrequestreview-420569150", "createdAt": "2020-05-28T23:58:31Z", "commit": {"oid": "4703de1e76e7f772859505c73c2e5627aeea5fd3"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMzo1ODozMVrOGcKlXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwMDowMjo1MFrOGcKqOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE4NjcxNg==", "bodyText": "typo lenght -> length", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/663#discussion_r432186716", "createdAt": "2020-05-28T23:58:31Z", "author": {"login": "gjwatts"}, "path": "vertx-db2-client/src/main/java/io/vertx/db2client/impl/drda/NetSqlca.java", "diffHunk": "@@ -123,25 +123,31 @@ public static void throwSqlError(NetSqlca sqlca) {\n \t   switch(sqlca.sqlCode_) {\n             // The SQL syntax is invalid\n   \t        case SqlCode.INVALID_SQL_STATEMENT:\n-       \t        throw new DB2Exception(\"The SQL syntax provided was invalid\", SqlCode.INVALID_SQL_STATEMENT, sqlca.sqlState_);\n+       \t        throw new DB2Exception(\"The SQL syntax provided was invalid\", sqlca.sqlCode_, sqlca.sqlState_);\n        \t    // The object (table?) is not defined/available\n   \t        case SqlCode.OBJECT_NOT_DEFINED:\n   \t        \tif (sqlErrmc.length() > 0)\n-  \t        \t\tthrow new DB2Exception(\"The object '\" + sqlErrmc + \"' provided is not defined\", SqlCode.OBJECT_NOT_DEFINED, sqlca.sqlState_);\n+  \t        \t\tthrow new DB2Exception(\"The object '\" + sqlErrmc + \"' provided is not defined\", sqlca.sqlCode_, sqlca.sqlState_);\n   \t        \telse\n-  \t        \t\tthrow new DB2Exception(\"An object provided is not defined\", SqlCode.OBJECT_NOT_DEFINED, sqlca.sqlState_);\n+  \t        \t\tthrow new DB2Exception(\"An object provided is not defined\", sqlca.sqlCode_, sqlca.sqlState_);\n        \t    // The object (table?) is not defined/available\n   \t        case SqlCode.COLUMN_DOES_NOT_EXIST:\n   \t        \tif (sqlErrmc.length() > 0)\n-  \t        \t\tthrow new DB2Exception(\"The column '\" + sqlErrmc + \"' provided does not exist\", SqlCode.COLUMN_DOES_NOT_EXIST, sqlca.sqlState_);\n+  \t        \t\tthrow new DB2Exception(\"The column '\" + sqlErrmc + \"' provided does not exist\", sqlca.sqlCode_, sqlca.sqlState_);\n   \t        \telse\n-  \t        \t\tthrow new DB2Exception(\"A column provided does not exist\", SqlCode.COLUMN_DOES_NOT_EXIST, sqlca.sqlState_);\n+  \t        \t\tthrow new DB2Exception(\"A column provided does not exist\", sqlca.sqlCode_, sqlca.sqlState_);\n \t        // Invalid database specified\n \t   \t    case SqlCode.DATABASE_NOT_FOUND:\n \t   \t    \tif (sqlErrmc.length() > 0)\n-\t   \t    \t\tthrow new DB2Exception(\"The database '\" + sqlErrmc + \"' provided was not found\", SqlCode.DATABASE_NOT_FOUND, sqlca.sqlState_);\n+\t   \t    \t\tthrow new DB2Exception(\"The database '\" + sqlErrmc + \"' provided was not found\", sqlca.sqlCode_, sqlca.sqlState_);\n \t   \t    \telse\n-\t   \t    \t\tthrow new DB2Exception(\"The database provided was not found\", SqlCode.DATABASE_NOT_FOUND, sqlca.sqlState_);\n+\t   \t    \t\tthrow new DB2Exception(\"The database provided was not found\", sqlca.sqlCode_, sqlca.sqlState_);\n+\t   \t    case SqlCode.DATA_TYPE_INVALID_ATTR:\n+\t   \t        if (sqlErrmc.length() > 0)\n+\t   \t            throw new DB2Exception(\"The statement cannot be processed. The data type definition '\" + sqlErrmc + \n+\t   \t                \"' specifies an invalid attribute such as precision, lenght, or scale.\", sqlca.sqlCode_, sqlca.sqlState_);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4703de1e76e7f772859505c73c2e5627aeea5fd3"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE4Nzc1MA==", "bodyText": "Same typo (copy/paste) :-)", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/663#discussion_r432187750", "createdAt": "2020-05-29T00:02:03Z", "author": {"login": "gjwatts"}, "path": "vertx-db2-client/src/main/java/io/vertx/db2client/impl/drda/NetSqlca.java", "diffHunk": "@@ -123,25 +123,31 @@ public static void throwSqlError(NetSqlca sqlca) {\n \t   switch(sqlca.sqlCode_) {\n             // The SQL syntax is invalid\n   \t        case SqlCode.INVALID_SQL_STATEMENT:\n-       \t        throw new DB2Exception(\"The SQL syntax provided was invalid\", SqlCode.INVALID_SQL_STATEMENT, sqlca.sqlState_);\n+       \t        throw new DB2Exception(\"The SQL syntax provided was invalid\", sqlca.sqlCode_, sqlca.sqlState_);\n        \t    // The object (table?) is not defined/available\n   \t        case SqlCode.OBJECT_NOT_DEFINED:\n   \t        \tif (sqlErrmc.length() > 0)\n-  \t        \t\tthrow new DB2Exception(\"The object '\" + sqlErrmc + \"' provided is not defined\", SqlCode.OBJECT_NOT_DEFINED, sqlca.sqlState_);\n+  \t        \t\tthrow new DB2Exception(\"The object '\" + sqlErrmc + \"' provided is not defined\", sqlca.sqlCode_, sqlca.sqlState_);\n   \t        \telse\n-  \t        \t\tthrow new DB2Exception(\"An object provided is not defined\", SqlCode.OBJECT_NOT_DEFINED, sqlca.sqlState_);\n+  \t        \t\tthrow new DB2Exception(\"An object provided is not defined\", sqlca.sqlCode_, sqlca.sqlState_);\n        \t    // The object (table?) is not defined/available\n   \t        case SqlCode.COLUMN_DOES_NOT_EXIST:\n   \t        \tif (sqlErrmc.length() > 0)\n-  \t        \t\tthrow new DB2Exception(\"The column '\" + sqlErrmc + \"' provided does not exist\", SqlCode.COLUMN_DOES_NOT_EXIST, sqlca.sqlState_);\n+  \t        \t\tthrow new DB2Exception(\"The column '\" + sqlErrmc + \"' provided does not exist\", sqlca.sqlCode_, sqlca.sqlState_);\n   \t        \telse\n-  \t        \t\tthrow new DB2Exception(\"A column provided does not exist\", SqlCode.COLUMN_DOES_NOT_EXIST, sqlca.sqlState_);\n+  \t        \t\tthrow new DB2Exception(\"A column provided does not exist\", sqlca.sqlCode_, sqlca.sqlState_);\n \t        // Invalid database specified\n \t   \t    case SqlCode.DATABASE_NOT_FOUND:\n \t   \t    \tif (sqlErrmc.length() > 0)\n-\t   \t    \t\tthrow new DB2Exception(\"The database '\" + sqlErrmc + \"' provided was not found\", SqlCode.DATABASE_NOT_FOUND, sqlca.sqlState_);\n+\t   \t    \t\tthrow new DB2Exception(\"The database '\" + sqlErrmc + \"' provided was not found\", sqlca.sqlCode_, sqlca.sqlState_);\n \t   \t    \telse\n-\t   \t    \t\tthrow new DB2Exception(\"The database provided was not found\", SqlCode.DATABASE_NOT_FOUND, sqlca.sqlState_);\n+\t   \t    \t\tthrow new DB2Exception(\"The database provided was not found\", sqlca.sqlCode_, sqlca.sqlState_);\n+\t   \t    case SqlCode.DATA_TYPE_INVALID_ATTR:\n+\t   \t        if (sqlErrmc.length() > 0)\n+\t   \t            throw new DB2Exception(\"The statement cannot be processed. The data type definition '\" + sqlErrmc + \n+\t   \t                \"' specifies an invalid attribute such as precision, lenght, or scale.\", sqlca.sqlCode_, sqlca.sqlState_);\n+\t   \t        else\n+\t   \t            throw new DB2Exception(\"The statement cannot be processed. A data type definition specifies an invalid attribute such as precision, lenght, or scale.\", sqlca.sqlCode_, sqlca.sqlState_);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4703de1e76e7f772859505c73c2e5627aeea5fd3"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE4Nzk2Mw==", "bodyText": "Thanks for letting me know", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/663#discussion_r432187963", "createdAt": "2020-05-29T00:02:50Z", "author": {"login": "gjwatts"}, "path": "vertx-db2-client/src/main/java/io/vertx/db2client/impl/drda/DRDAQueryRequest.java", "diffHunk": "@@ -1399,7 +1409,7 @@ private Hashtable computeProtocolTypesAndLengths(\n                     lidAndLengths[i][0]--;\n                 }\n             }\n-            return overrideMap;\n+            return overrideMap; // @AGG this is never used", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjA1MzYxMQ=="}, "originalCommit": {"oid": "4703de1e76e7f772859505c73c2e5627aeea5fd3"}, "originalPosition": 91}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9a48e22c394b2e5e44751896967c9fedc387fb9", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/c9a48e22c394b2e5e44751896967c9fedc387fb9", "committedDate": "2020-05-29T03:41:20Z", "message": "Perform client side decimal rounding based on defined DB precision and scale"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4703de1e76e7f772859505c73c2e5627aeea5fd3", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/4703de1e76e7f772859505c73c2e5627aeea5fd3", "committedDate": "2020-05-28T18:51:59Z", "message": "Perform client side decimal rounding based on defined DB precision and scale"}, "afterCommit": {"oid": "c9a48e22c394b2e5e44751896967c9fedc387fb9", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/c9a48e22c394b2e5e44751896967c9fedc387fb9", "committedDate": "2020-05-29T03:41:20Z", "message": "Perform client side decimal rounding based on defined DB precision and scale"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1493, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}