{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4NzM5NzY1", "number": 678, "title": "Add error message and test for sqlcode -601", "bodyText": "", "createdAt": "2020-06-05T20:34:38Z", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/678", "merged": true, "mergeCommit": {"oid": "11cea3b14f04a4f2f501f3619c42457b6c6f5829"}, "closed": true, "closedAt": "2020-06-08T03:32:27Z", "author": {"login": "aguibert"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcocYpdgFqTQyNTY4ODk1NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpH1TYABqjM0MTc4NTMxMTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1Njg4OTU0", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/678#pullrequestreview-425688954", "createdAt": "2020-06-06T00:26:21Z", "commit": {"oid": "75e6501f03fc8df0b96aff66418d3489fc2b5108"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQwMDoyNjoyMlrOGgActg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQwMDozNzowNlrOGgAikQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjIxNDk2Ng==", "bodyText": "In Windows, this test (line 275) seems to fail because of the trailing single quote ' (at least removing it made the test pass).\nOn the Mac, this test passed fine without modification.", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/678#discussion_r436214966", "createdAt": "2020-06-06T00:26:22Z", "author": {"login": "gjwatts"}, "path": "vertx-db2-client/src/test/java/io/vertx/db2client/DB2ErrorMessageTest.java", "diffHunk": "@@ -261,6 +261,24 @@ public void testInsertIntoGeneratedAlwaysColumn(TestContext ctx) {\n           }));\n       }));\n     }\n+    \n+    @Test\n+    public void testDuplicateObject(TestContext ctx) {\n+      DB2Connection.connect(vertx, options, ctx.asyncAssertSuccess(conn -> {\n+        conn.query(\"CREATE TABLE Fortune (\\n\" + \n+            \"  id       integer       NOT NULL GENERATED AS IDENTITY (START WITH 1, INCREMENT BY 1),\\n\" + \n+            \"  message  varchar(2048),\\n\" + \n+            \"  PRIMARY KEY  (id)\\n\" + \n+            \")\").execute(ctx.asyncAssertFailure(err -> {\n+            ctx.assertTrue(err instanceof DB2Exception, \"The error message returned is of the wrong type.  It should be a DB2Exception, but it was of type \" + err.getClass().getSimpleName());\n+            DB2Exception ex = (DB2Exception) err;\n+            assertContains(ctx, ex.getMessage(), \"The object with the name '\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75e6501f03fc8df0b96aff66418d3489fc2b5108"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjIxNjQ2NQ==", "bodyText": "On both Windows and Mac, this test (line 276) failed for me because of the mixed case of the word Fortune.  In the error message that comes back, it shows the table name as being all uppercase FORTUNE.  Changing the test case to look for the word FORTUNE allowed the test to pass.  Strangely enough, this test succeeds in both Windows and Mac when leaving the trailing single quote at the end of FORTUNE' (which seems to cause problems in the previous test).", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/678#discussion_r436216465", "createdAt": "2020-06-06T00:37:06Z", "author": {"login": "gjwatts"}, "path": "vertx-db2-client/src/test/java/io/vertx/db2client/DB2ErrorMessageTest.java", "diffHunk": "@@ -261,6 +261,24 @@ public void testInsertIntoGeneratedAlwaysColumn(TestContext ctx) {\n           }));\n       }));\n     }\n+    \n+    @Test\n+    public void testDuplicateObject(TestContext ctx) {\n+      DB2Connection.connect(vertx, options, ctx.asyncAssertSuccess(conn -> {\n+        conn.query(\"CREATE TABLE Fortune (\\n\" + \n+            \"  id       integer       NOT NULL GENERATED AS IDENTITY (START WITH 1, INCREMENT BY 1),\\n\" + \n+            \"  message  varchar(2048),\\n\" + \n+            \"  PRIMARY KEY  (id)\\n\" + \n+            \")\").execute(ctx.asyncAssertFailure(err -> {\n+            ctx.assertTrue(err instanceof DB2Exception, \"The error message returned is of the wrong type.  It should be a DB2Exception, but it was of type \" + err.getClass().getSimpleName());\n+            DB2Exception ex = (DB2Exception) err;\n+            assertContains(ctx, ex.getMessage(), \"The object with the name '\");\n+            assertContains(ctx, ex.getMessage(), \"Fortune'\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75e6501f03fc8df0b96aff66418d3489fc2b5108"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7459a8d01714ecb2336df72f59b7a399aea3317", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/f7459a8d01714ecb2336df72f59b7a399aea3317", "committedDate": "2020-06-08T03:24:24Z", "message": "Add error message and test for sqlcode -601"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "75e6501f03fc8df0b96aff66418d3489fc2b5108", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/75e6501f03fc8df0b96aff66418d3489fc2b5108", "committedDate": "2020-06-05T19:38:37Z", "message": "Add error message and test for sqlcode -601"}, "afterCommit": {"oid": "f7459a8d01714ecb2336df72f59b7a399aea3317", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/f7459a8d01714ecb2336df72f59b7a399aea3317", "committedDate": "2020-06-08T03:24:24Z", "message": "Add error message and test for sqlcode -601"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1501, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}