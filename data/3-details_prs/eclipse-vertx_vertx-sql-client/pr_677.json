{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4NTY5MzU4", "number": 677, "title": "Rework prepared queries", "bodyText": "fixes\n\n#675\n#682\n#685", "createdAt": "2020-06-05T16:38:09Z", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/677", "merged": true, "mergeCommit": {"oid": "b83783bbde9c5f53ceac110771127ead5749bd47"}, "closed": true, "closedAt": "2020-06-19T12:09:26Z", "author": {"login": "vietj"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoVdp5gBqjM0MTIyMDMzMjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcswoLsgFqTQzMzk3NTg2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "799881d9a0808e8204855a7fdf51733c9eba4315", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/799881d9a0808e8204855a7fdf51733c9eba4315", "committedDate": "2020-06-05T16:34:57Z", "message": "Prepared query flow improvements"}, "afterCommit": {"oid": "7d1fcdf892b2c9ea39e0f67c16eff69075fdf9a3", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/7d1fcdf892b2c9ea39e0f67c16eff69075fdf9a3", "committedDate": "2020-06-05T16:43:16Z", "message": "Prepared query flow improvements"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d1fcdf892b2c9ea39e0f67c16eff69075fdf9a3", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/7d1fcdf892b2c9ea39e0f67c16eff69075fdf9a3", "committedDate": "2020-06-05T16:43:16Z", "message": "Prepared query flow improvements"}, "afterCommit": {"oid": "f3f30566e8f9daf9e2c1c8a1088d8e31bf5a68ac", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/f3f30566e8f9daf9e2c1c8a1088d8e31bf5a68ac", "committedDate": "2020-06-15T15:11:09Z", "message": "Rework pipeline execution"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eaa976a7c0a4c23e827b8b5d3e58850c3ecd2007", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/eaa976a7c0a4c23e827b8b5d3e58850c3ecd2007", "committedDate": "2020-06-15T15:19:17Z", "message": "Rename PreparedStatementCommand cacheabled -> cached and updated comments for unamed PostgreSQL prepared statement usage"}, "afterCommit": {"oid": "612e3d20939a4fb3edbdf4d8a6972f9fe92a2031", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/612e3d20939a4fb3edbdf4d8a6972f9fe92a2031", "committedDate": "2020-06-15T20:41:00Z", "message": "Rework pipeline execution"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1bb21be1d6775eeccb8b1d6d3f26968f45ed0291", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/1bb21be1d6775eeccb8b1d6d3f26968f45ed0291", "committedDate": "2020-06-16T09:51:55Z", "message": "prepared_statements_instances is not available for MySQL 5.6 or MariahDB"}, "afterCommit": {"oid": "9b0c9d667e53c1fd6e4b9b70def6ae8f2daae70f", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/9b0c9d667e53c1fd6e4b9b70def6ae8f2daae70f", "committedDate": "2020-06-16T11:30:32Z", "message": "prepared_statements_instances is not available for MySQL 5.6 or MariahDB"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b0c9d667e53c1fd6e4b9b70def6ae8f2daae70f", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/9b0c9d667e53c1fd6e4b9b70def6ae8f2daae70f", "committedDate": "2020-06-16T11:30:32Z", "message": "prepared_statements_instances is not available for MySQL 5.6 or MariahDB"}, "afterCommit": {"oid": "bcdc97957b0b7e8ce1b5a86f958721631ed1a46e", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/bcdc97957b0b7e8ce1b5a86f958721631ed1a46e", "committedDate": "2020-06-16T15:26:03Z", "message": "prepared_statements_instances is not available for MySQL 5.6 or MariahDB"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bcdc97957b0b7e8ce1b5a86f958721631ed1a46e", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/bcdc97957b0b7e8ce1b5a86f958721631ed1a46e", "committedDate": "2020-06-16T15:26:03Z", "message": "prepared_statements_instances is not available for MySQL 5.6 or MariahDB"}, "afterCommit": {"oid": "098da739be58ebd3804da1eb580c73eed5ab1765", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/098da739be58ebd3804da1eb580c73eed5ab1765", "committedDate": "2020-06-18T10:06:10Z", "message": "prepared_statements_instances is not available for MySQL 5.6 or MariahDB"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "098da739be58ebd3804da1eb580c73eed5ab1765", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/098da739be58ebd3804da1eb580c73eed5ab1765", "committedDate": "2020-06-18T10:06:10Z", "message": "prepared_statements_instances is not available for MySQL 5.6 or MariahDB"}, "afterCommit": {"oid": "b55f6905981699f05b6451cd6886edb0a3fb7dff", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/b55f6905981699f05b6451cd6886edb0a3fb7dff", "committedDate": "2020-06-18T10:20:15Z", "message": "prepared_statements_instances is not available for MySQL 5.6 or MariahDB"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82e8b405f71816974754f08307aac9455c310ada", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/82e8b405f71816974754f08307aac9455c310ada", "committedDate": "2020-06-18T12:41:17Z", "message": "Rework pipeline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9cf4eab140b3e5e84bf557ea7008a1aa37adce3", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/e9cf4eab140b3e5e84bf557ea7008a1aa37adce3", "committedDate": "2020-06-18T12:41:17Z", "message": "Fix incorrect pipelined inflight count"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d462e1a3293d725c133bcd98144a8516d636bf6", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/2d462e1a3293d725c133bcd98144a8516d636bf6", "committedDate": "2020-06-18T12:41:17Z", "message": "Rework prepared statement cache and management"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8721e2b51ccacdc4e97f6f7bc0787b30185e71ac", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/8721e2b51ccacdc4e97f6f7bc0787b30185e71ac", "committedDate": "2020-06-18T12:41:17Z", "message": "Add more testing for postgres ephemeral prepared statements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "def5c2366a06520582d4a48bc2e20a6bfb4e5064", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/def5c2366a06520582d4a48bc2e20a6bfb4e5064", "committedDate": "2020-06-18T12:41:17Z", "message": "Close MySQL prepared statement after usage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1141abe76d18682d8899407baa6fc87c04491b5e", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/1141abe76d18682d8899407baa6fc87c04491b5e", "committedDate": "2020-06-18T12:41:17Z", "message": "prepared_statements_instances is not available for MySQL 5.6 or MariahDB"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b55f6905981699f05b6451cd6886edb0a3fb7dff", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/b55f6905981699f05b6451cd6886edb0a3fb7dff", "committedDate": "2020-06-18T10:20:15Z", "message": "prepared_statements_instances is not available for MySQL 5.6 or MariahDB"}, "afterCommit": {"oid": "1141abe76d18682d8899407baa6fc87c04491b5e", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/1141abe76d18682d8899407baa6fc87c04491b5e", "committedDate": "2020-06-18T12:41:17Z", "message": "prepared_statements_instances is not available for MySQL 5.6 or MariahDB"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e27d8f62a2d5a05ae33c38e24b0d5003f78fd96", "author": {"user": {"login": "BillyYccc", "name": "Billy Yuan"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/0e27d8f62a2d5a05ae33c38e24b0d5003f78fd96", "committedDate": "2020-06-18T14:52:06Z", "message": "make MySQL auto close statement for batching and minor docs\n\nSigned-off-by: Billy Yuan <billy112487983@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c47f68d01b8f1a4141aa29fbe8db8a97c0c5c66", "author": {"user": {"login": "BillyYccc", "name": "Billy Yuan"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/6c47f68d01b8f1a4141aa29fbe8db8a97c0c5c66", "committedDate": "2020-06-18T14:56:19Z", "message": "optimize the MySQL auto-closing logic\n\nSigned-off-by: Billy Yuan <billy112487983@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18135537a63d700334c1808265b5686dfe9421e7", "author": {"user": {"login": "BillyYccc", "name": "Billy Yuan"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/18135537a63d700334c1808265b5686dfe9421e7", "committedDate": "2020-06-18T15:19:01Z", "message": "enable the table schema change test for Postgres and make it work\n\nSigned-off-by: Billy Yuan <billy112487983@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNDEzNDYx", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/677#pullrequestreview-433413461", "createdAt": "2020-06-18T15:43:00Z", "commit": {"oid": "18135537a63d700334c1808265b5686dfe9421e7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNTo0MzowMVrOGl1RTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNTo0MzowMVrOGl1RTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMyMzI3OQ==", "bodyText": "we should use this option in the cache to make it work like before", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/677#discussion_r442323279", "createdAt": "2020-06-18T15:43:01Z", "author": {"login": "BillyYccc"}, "path": "vertx-sql-client/src/main/java/io/vertx/sqlclient/impl/SocketConnectionBase.java", "diffHunk": "@@ -70,7 +72,8 @@ public SocketConnectionBase(NetSocketInternal socket,\n     this.socket = socket;\n     this.context = context;\n     this.pipeliningLimit = pipeliningLimit;\n-    this.psCache = cachePreparedStatements ? new PreparedStatementCache(this, preparedStatementCacheSize) : null;\n+    this.paused = false;\n+    this.psCache = cachePreparedStatements ? new PreparedStatementCache(preparedStatementCacheSize) : null;\n     this.preparedStatementCacheSqlLimit = preparedStatementCacheSqlLimit;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18135537a63d700334c1808265b5686dfe9421e7"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c90d18a1383c93545a1b7e6f69f526d4da4dc42", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/8c90d18a1383c93545a1b7e6f69f526d4da4dc42", "committedDate": "2020-06-19T09:46:58Z", "message": "Rework prepared statement cache filtering"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87b490ffe1ddfa7169d00687d910ce257bfe101a", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/87b490ffe1ddfa7169d00687d910ce257bfe101a", "committedDate": "2020-06-19T09:46:58Z", "message": "Enable sql cache filter for MSSQL"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60a7654361714d589a0646a97757cb4927e102d3", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/60a7654361714d589a0646a97757cb4927e102d3", "committedDate": "2020-06-19T09:23:53Z", "message": "Enable sql cache filter for MSSQL"}, "afterCommit": {"oid": "87b490ffe1ddfa7169d00687d910ce257bfe101a", "author": {"user": {"login": "vietj", "name": "Julien Viet"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/87b490ffe1ddfa7169d00687d910ce257bfe101a", "committedDate": "2020-06-19T09:46:58Z", "message": "Enable sql cache filter for MSSQL"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzOTc1ODYx", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/677#pullrequestreview-433975861", "createdAt": "2020-06-19T10:38:05Z", "commit": {"oid": "87b490ffe1ddfa7169d00687d910ce257bfe101a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1498, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}