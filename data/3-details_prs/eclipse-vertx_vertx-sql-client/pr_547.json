{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4NDY0MDE0", "number": 547, "title": " Support for queries that return auto-generated keys", "bodyText": "Part of #497\nBuilds on top of commits from PR #537", "createdAt": "2020-03-14T22:29:27Z", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/547", "merged": true, "mergeCommit": {"oid": "44d5e87e3191b12273e9b9c6d46aef53e3ea8e95"}, "closed": true, "closedAt": "2020-03-18T13:26:01Z", "author": {"login": "aguibert"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOODKkgH2gAyMzg4NDY0MDE0OjdlMGFkZWE0NjQ0MDIxYmViY2YwYmVlMTdhY2FlNWQ1MjI5M2ZkMzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOr2ydgFqTM3NjQ4NDkzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7e0adea4644021bebcf0bee17acae5d52293fd39", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/7e0adea4644021bebcf0bee17acae5d52293fd39", "committedDate": "2020-03-16T13:23:09Z", "message": "Validate prepared statement parameter sizes and types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bbfc62c01867462f2064d79d4c49c2dd9133797", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/5bbfc62c01867462f2064d79d4c49c2dd9133797", "committedDate": "2020-03-16T13:23:09Z", "message": "Support for queries that return auto-generated keys"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9e49b7e138cab8047823081efdcab3ca235ffd90", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/9e49b7e138cab8047823081efdcab3ca235ffd90", "committedDate": "2020-03-14T22:27:48Z", "message": "Support for queries that return auto-generated keys"}, "afterCommit": {"oid": "5bbfc62c01867462f2064d79d4c49c2dd9133797", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/5bbfc62c01867462f2064d79d4c49c2dd9133797", "committedDate": "2020-03-16T13:23:09Z", "message": "Support for queries that return auto-generated keys"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MjA5MTc0", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/547#pullrequestreview-375209174", "createdAt": "2020-03-16T13:25:35Z", "commit": {"oid": "5bbfc62c01867462f2064d79d4c49c2dd9133797"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMzoyNTozNVrOF20CIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMzoyNTozNVrOF20CIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAxOTkzOA==", "bodyText": "In this file I'm intentionally leaving the commented out code in place because this is the code that's ported from Apache Derby and I'm keeping the commented out code for easy reference in the near future.", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/547#discussion_r393019938", "createdAt": "2020-03-16T13:25:35Z", "author": {"login": "aguibert"}, "path": "vertx-db2-client/src/main/java/io/vertx/db2client/impl/drda/DRDAQueryResponse.java", "diffHunk": "@@ -116,15 +116,50 @@ public void readOpenQuery() { // @AGG removed callback StatementCallbackInterfac\n         endOfSameIdChainData();\n     }\n     \n+    /**\n+     * Parse the reply for the Open Query Command. This method handles the\n+     * parsing of all command replies and reply data for the opnqry command.\n+     */\n+    public void readBeginOpenQuery() { // @AGG removed callback StatementCallbackInterface statementI) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bbfc62c01867462f2064d79d4c49c2dd9133797"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MTU3MzM1", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/547#pullrequestreview-376157335", "createdAt": "2020-03-17T15:42:01Z", "commit": {"oid": "5bbfc62c01867462f2064d79d4c49c2dd9133797"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNTo0MjowMlrOF3iGnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNTo0MjowMlrOF3iGnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc3NDc1MQ==", "bodyText": "For BINARY and BLOB, why do we return true if it is a B/boolean?", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/547#discussion_r393774751", "createdAt": "2020-03-17T15:42:02Z", "author": {"login": "gjwatts"}, "path": "vertx-db2-client/src/main/java/io/vertx/db2client/impl/drda/ClientTypes.java", "diffHunk": "@@ -198,4 +199,48 @@ static public int mapDB2TypeToDriverType(boolean isDescribed, int sqlType, long\n             return 0;\n         }\n     }\n+    \n+    public static boolean canConvert(Object value, int toType) {\n+    \tClass<?> clazz = value.getClass();\n+    \t// Everything can convert to String\n+    \tif (clazz == String.class)\n+    \t\treturn true; \n+    \tswitch (toType) {\n+        case ClientTypes.BIGINT:\n+        case ClientTypes.BIT:\n+        case ClientTypes.BOOLEAN:\n+        case ClientTypes.CHAR:\n+        case ClientTypes.DECIMAL:\n+        case ClientTypes.DOUBLE:\n+        case ClientTypes.INTEGER:\n+        case ClientTypes.LONGVARCHAR:\n+        case ClientTypes.REAL:\n+        case ClientTypes.SMALLINT:\n+        \treturn clazz == boolean.class ||\n+        \t\t   clazz == Boolean.class ||\n+        \t\t   clazz == double.class ||\n+        \t\t   clazz == Double.class ||\n+        \t\t   clazz == float.class ||\n+        \t\t   clazz == Float.class ||\n+        \t\t   clazz == int.class ||\n+        \t\t   clazz == Integer.class ||\n+        \t\t   clazz == long.class ||\n+        \t\t   clazz == Long.class ||\n+        \t\t   clazz == short.class ||\n+        \t\t   clazz == Short.class ||\n+        \t\t   clazz == BigDecimal.class;\n+        case ClientTypes.BINARY:\n+        case ClientTypes.BLOB:\n+        \treturn clazz == boolean.class ||\n+        \t\t   clazz == Boolean.class ||", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bbfc62c01867462f2064d79d4c49c2dd9133797"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NDg0OTMx", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/547#pullrequestreview-376484931", "createdAt": "2020-03-18T00:06:47Z", "commit": {"oid": "5bbfc62c01867462f2064d79d4c49c2dd9133797"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1569, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}