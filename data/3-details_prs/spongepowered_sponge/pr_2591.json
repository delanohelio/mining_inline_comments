{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNDU4NTEy", "number": 2591, "title": "Fix tileentitysign memory leak", "bodyText": "TileEntitySign has a player field used by NetHandlerPlayServer#processUpdateSign\nThe player field is set in EntityPlayerMP#openEditSign but it's never set to null.\nif (!tileentitysign.getIsEditable() || tileentitysign.getPlayer() != this.player) {\n    this.server.logWarning(\"Player \" + this.player.getName() + \" just tried to change non-editable sign\");\n    return;\n}", "createdAt": "2020-05-02T14:22:40Z", "url": "https://github.com/SpongePowered/Sponge/pull/2591", "merged": true, "mergeCommit": {"oid": "8499afaf59271064732ff1125866b14ad101926f"}, "closed": true, "closedAt": "2020-05-02T16:51:22Z", "author": {"login": "ImMorpheus"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcdW_3EgH2gAyNDEyNDU4NTEyOjhkODdiNzkzODI4N2IyNGI0ZTc1ZTNmYjI2ZWFlMjA5OGQ4ZTE0NjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcdX4xpgH2gAyNDEyNDU4NTEyOjBlZmZkYzk4NTM1N2MxY2I2MzkxZmJiYzM3OWFmYTEyYzUxZTgyMmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8d87b7938287b24b4e75e3fb26eae2098d8e1466", "author": {"user": {"login": "ImMorpheus", "name": "Morpheus"}}, "url": "https://github.com/SpongePowered/Sponge/commit/8d87b7938287b24b4e75e3fb26eae2098d8e1466", "committedDate": "2020-05-02T14:17:33Z", "message": "Fix tileentitysign memory leak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7c6a21f16809163ca0d67f6296c5ec120d545de", "author": {"user": {"login": "ImMorpheus", "name": "Morpheus"}}, "url": "https://github.com/SpongePowered/Sponge/commit/b7c6a21f16809163ca0d67f6296c5ec120d545de", "committedDate": "2020-05-02T14:39:03Z", "message": "Use local variables"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTMzNDE1", "url": "https://github.com/SpongePowered/Sponge/pull/2591#pullrequestreview-404533415", "createdAt": "2020-05-02T14:39:40Z", "commit": {"oid": "b7c6a21f16809163ca0d67f6296c5ec120d545de"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxNDozOTo0MFrOGPjrSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxNDozOTo0MFrOGPjrSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk2NjM0NA==", "bodyText": "Why not just redirect tileEntitySign.markDirty() and call tileEntitySign.setPlayer(null) there? Better than relying on local capture.", "url": "https://github.com/SpongePowered/Sponge/pull/2591#discussion_r418966344", "createdAt": "2020-05-02T14:39:40Z", "author": {"login": "dualspiral"}, "path": "src/main/java/org/spongepowered/common/mixin/core/network/NetHandlerPlayServerMixin.java", "diffHunk": "@@ -270,6 +271,13 @@\n         return ZERO_LENGTH_ARRAY; // will bypass the for loop after this method.\n     }\n \n+    @Inject(method = \"processUpdateSign\", locals = LocalCapture.CAPTURE_FAILHARD,\n+            at = @At(value = \"INVOKE\", target = \"Lnet/minecraft/world/WorldServer;notifyBlockUpdate(Lnet/minecraft/util/math/BlockPos;Lnet/minecraft/block/state/IBlockState;Lnet/minecraft/block/state/IBlockState;I)V\"))\n+    private void impl$setPlayer(CPacketUpdateSign packetIn, final CallbackInfo ci, WorldServer worldserver,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7c6a21f16809163ca0d67f6296c5ec120d545de"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f7e159cda64a746544adbcd543f31e0da86c63a", "author": {"user": {"login": "ImMorpheus", "name": "Morpheus"}}, "url": "https://github.com/SpongePowered/Sponge/commit/0f7e159cda64a746544adbcd543f31e0da86c63a", "committedDate": "2020-05-02T14:53:50Z", "message": "Switch to redirect"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTM1NjU4", "url": "https://github.com/SpongePowered/Sponge/pull/2591#pullrequestreview-404535658", "createdAt": "2020-05-02T15:10:10Z", "commit": {"oid": "0f7e159cda64a746544adbcd543f31e0da86c63a"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0effdc985357c1cb6391fbbc379afa12c51e822a", "author": {"user": {"login": "ImMorpheus", "name": "Morpheus"}}, "url": "https://github.com/SpongePowered/Sponge/commit/0effdc985357c1cb6391fbbc379afa12c51e822a", "committedDate": "2020-05-02T15:19:43Z", "message": "You didn't see this"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 887, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}