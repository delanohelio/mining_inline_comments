{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5NDc1MjAz", "number": 3065, "title": "Implement the new network channels.", "bodyText": "", "createdAt": "2020-07-15T13:18:07Z", "url": "https://github.com/SpongePowered/Sponge/pull/3065", "merged": true, "mergeCommit": {"oid": "6cd5d406cb5f8f563093e040d57eed1e928b2756"}, "closed": true, "closedAt": "2020-07-27T12:55:31Z", "author": {"login": "Cybermaxke"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1LAsfgBqjM1NDg2ODE3MDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5AqrhgBqjM1ODk1MzgzNzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "35bb14eb4774b6360db6442563f3180a205ba5ee", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/35bb14eb4774b6360db6442563f3180a205ba5ee", "committedDate": "2020-07-15T13:52:52Z", "message": "Covert NetworkManagerHolder accessor to a bridge."}, "afterCommit": {"oid": "a6372a712f6e4bfa4ee1f10763ffee8c7e1b55ec", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/a6372a712f6e4bfa4ee1f10763ffee8c7e1b55ec", "committedDate": "2020-07-15T13:53:26Z", "message": "Convert NetworkManagerHolder accessor to a bridge."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4OTgzODE2", "url": "https://github.com/SpongePowered/Sponge/pull/3065#pullrequestreview-448983816", "createdAt": "2020-07-15T14:01:10Z", "commit": {"oid": "a6372a712f6e4bfa4ee1f10763ffee8c7e1b55ec"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNDowMToxMVrOGx_k2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNDoxMTo1OVrOGyADRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA3NTAzNA==", "bodyText": "Nope. Same deal with the net handler bridge, should be a bridge.", "url": "https://github.com/SpongePowered/Sponge/pull/3065#discussion_r455075034", "createdAt": "2020-07-15T14:01:11Z", "author": {"login": "gabizou"}, "path": "src/accessors/java/org/spongepowered/common/accessor/network/play/CustomPayloadPacketAccessor.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * This file is part of Sponge, licensed under the MIT License (MIT).\n+ *\n+ * Copyright (c) SpongePowered <https://www.spongepowered.org>\n+ * Copyright (c) contributors\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in\n+ * all copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+ * THE SOFTWARE.\n+ */\n+package org.spongepowered.common.accessor.network.play;\n+\n+import net.minecraft.network.PacketBuffer;\n+import net.minecraft.util.ResourceLocation;\n+\n+public interface CustomPayloadPacketAccessor {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6372a712f6e4bfa4ee1f10763ffee8c7e1b55ec"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA3NjEyMg==", "bodyText": "Move to common's constants class.", "url": "https://github.com/SpongePowered/Sponge/pull/3065#discussion_r455076122", "createdAt": "2020-07-15T14:02:45Z", "author": {"login": "gabizou"}, "path": "src/main/java/org/spongepowered/common/network/channel/ChannelConstants.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/*\n+ * This file is part of Sponge, licensed under the MIT License (MIT).\n+ *\n+ * Copyright (c) SpongePowered <https://www.spongepowered.org>\n+ * Copyright (c) contributors\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in\n+ * all copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+ * THE SOFTWARE.\n+ */\n+package org.spongepowered.common.network.channel;\n+\n+import org.spongepowered.api.ResourceKey;\n+\n+public final class ChannelConstants {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6372a712f6e4bfa4ee1f10763ffee8c7e1b55ec"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA3Nzg4MA==", "bodyText": "Move to constants", "url": "https://github.com/SpongePowered/Sponge/pull/3065#discussion_r455077880", "createdAt": "2020-07-15T14:05:15Z", "author": {"login": "gabizou"}, "path": "src/main/java/org/spongepowered/common/network/channel/RegisterChannelHelper.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * This file is part of Sponge, licensed under the MIT License (MIT).\n+ *\n+ * Copyright (c) SpongePowered <https://www.spongepowered.org>\n+ * Copyright (c) contributors\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in\n+ * all copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+ * THE SOFTWARE.\n+ */\n+package org.spongepowered.common.network.channel;\n+\n+import com.google.common.base.Joiner;\n+import com.google.common.base.Splitter;\n+import io.netty.buffer.Unpooled;\n+import org.spongepowered.api.ResourceKey;\n+import org.spongepowered.api.network.channel.ChannelBuf;\n+\n+import java.nio.charset.StandardCharsets;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+public final class RegisterChannelHelper {\n+\n+    /**\n+     * A minecraft channel used to register channels keys.\n+     */\n+    public static final ResourceKey REGISTER_KEY = ResourceKey.minecraft(\"register\");\n+\n+    /**\n+     * A minecraft channel used to unregister channels keys.\n+     */\n+    public static final ResourceKey UNREGISTER_KEY = ResourceKey.minecraft(\"unregister\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6372a712f6e4bfa4ee1f10763ffee8c7e1b55ec"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA3OTg0OA==", "bodyText": "Can use the PhaseTracker as is now. But if this whole class shebang is usable from multiple threads, you may have to change the map used to at least ConcurrentHashMap.", "url": "https://github.com/SpongePowered/Sponge/pull/3065#discussion_r455079848", "createdAt": "2020-07-15T14:07:49Z", "author": {"login": "gabizou"}, "path": "src/main/java/org/spongepowered/common/network/channel/SpongeChannelRegistry.java", "diffHunk": "@@ -24,29 +24,298 @@\n  */\n package org.spongepowered.common.network.channel;\n \n-import com.google.inject.Singleton;\n+import static java.util.Objects.requireNonNull;\n+\n+import com.google.common.collect.ImmutableList;\n+import net.minecraft.network.IPacket;\n+import net.minecraft.network.login.client.CCustomPayloadLoginPacket;\n+import net.minecraft.network.login.server.SCustomPayloadLoginPacket;\n+import net.minecraft.network.play.client.CCustomPayloadPacket;\n+import net.minecraft.network.play.server.SCustomPayloadPlayPacket;\n+import org.checkerframework.checker.nullness.qual.Nullable;\n+import org.spongepowered.api.Game;\n import org.spongepowered.api.ResourceKey;\n+import org.spongepowered.api.Sponge;\n+import org.spongepowered.api.event.cause.Cause;\n+import org.spongepowered.api.event.cause.EventContext;\n+import org.spongepowered.api.event.lifecycle.RegisterChannelEvent;\n+import org.spongepowered.api.network.EngineConnection;\n import org.spongepowered.api.network.channel.Channel;\n+import org.spongepowered.api.network.channel.ChannelBuf;\n import org.spongepowered.api.network.channel.ChannelRegistry;\n+import org.spongepowered.api.network.channel.NoResponseException;\n+import org.spongepowered.api.network.channel.packet.PacketChannel;\n+import org.spongepowered.api.network.channel.packet.basic.BasicPacketChannel;\n+import org.spongepowered.api.network.channel.raw.RawDataChannel;\n+import org.spongepowered.api.registry.DuplicateRegistrationException;\n+import org.spongepowered.common.SpongeCommon;\n+import org.spongepowered.common.accessor.network.login.client.CCustomPayloadLoginPacketAccessor;\n+import org.spongepowered.common.accessor.network.login.server.SCustomPayloadLoginPacketAccessor;\n+import org.spongepowered.common.accessor.network.play.CustomPayloadPacketAccessor;\n+import org.spongepowered.common.network.channel.packet.SpongeBasicPacketChannel;\n+import org.spongepowered.common.network.channel.packet.SpongePacketChannel;\n+import org.spongepowered.common.network.channel.raw.SpongeRawDataChannel;\n \n import java.util.Collection;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n import java.util.Optional;\n+import java.util.Set;\n+import java.util.concurrent.CompletableFuture;\n+import java.util.function.BiFunction;\n+\n+@SuppressWarnings(\"unchecked\")\n+public class SpongeChannelRegistry implements ChannelRegistry {\n+\n+    private final Map<ResourceKey, Channel> channels = new HashMap<>();\n+    private final Map<Class<?>, BiFunction<ResourceKey, SpongeChannelRegistry, Channel>> channelBuilders = new HashMap<>();\n+\n+    private final ChannelBufferAllocator bufferAllocator;\n \n-@Singleton\n-public final class SpongeChannelRegistry implements ChannelRegistry {\n+    public SpongeChannelRegistry(final ChannelBufferAllocator bufferAllocator) {\n+        this.bufferAllocator = bufferAllocator;\n+\n+        this.registerChannelType(RawDataChannel.class, SpongeRawDataChannel::new);\n+        this.registerChannelType(BasicPacketChannel.class, SpongeBasicPacketChannel::new);\n+        this.registerChannelType(PacketChannel.class, SpongePacketChannel::new);\n+    }\n+\n+    public ChannelBufferAllocator getBufferAllocator() {\n+        return this.bufferAllocator;\n+    }\n+\n+    private <T extends Channel> void registerChannelType(\n+            final Class<T> channelType, final BiFunction<ResourceKey, SpongeChannelRegistry, T> builder) {\n+        this.channelBuilders.put(channelType, (BiFunction<ResourceKey, SpongeChannelRegistry, Channel>) builder);\n+    }\n+\n+    public <C extends Channel> C createChannel(final ResourceKey channelKey, final Class<C> channelType) throws DuplicateRegistrationException {\n+        requireNonNull(channelKey, \"channelKey\");\n+        requireNonNull(channelType, \"channelType\");\n+        if (this.channels.containsKey(channelKey)) {\n+            throw new DuplicateRegistrationException(\"The channel key \\\"\" + channelKey + \"\\\" is already in use.\");\n+        }\n+        final @Nullable BiFunction<ResourceKey, SpongeChannelRegistry, Channel> builder = this.channelBuilders.get(channelType);\n+        if (builder == null) {\n+            throw new IllegalArgumentException(\"Unsupported channel type: \" + channelType);\n+        }\n+        final Channel channel = builder.apply(channelKey, this);\n+        this.channels.put(channelKey, channel);\n+        return (C) channel;\n+    }\n \n     @Override\n-    public Optional<Channel> get(ResourceKey channelKey) {\n-        return Optional.empty();\n+    public Optional<Channel> get(final ResourceKey channelKey) {\n+        requireNonNull(channelKey, \"channelKey\");\n+        return Optional.ofNullable(this.channels.get(channelKey));\n     }\n \n     @Override\n-    public <C extends Channel> C getOfType(ResourceKey channelKey, Class<C> channelType) {\n-        return null;\n+    public <C extends Channel> C getOfType(final ResourceKey channelKey, final Class<C> channelType) {\n+        requireNonNull(channelKey, \"channelKey\");\n+        requireNonNull(channelType, \"channelType\");\n+        final @Nullable Channel binding = this.channels.get(channelKey);\n+        if (binding != null) {\n+            if (!channelType.isInstance(binding)) {\n+                throw new IllegalStateException(\"There's already a channel registered for \"\n+                        + channelKey + \", but it is not of the requested type \" + channelType);\n+            }\n+            return (C) binding;\n+        }\n+        return this.createChannel(channelKey, channelType);\n     }\n \n     @Override\n     public Collection<Channel> getChannels() {\n-        return null;\n+        return ImmutableList.copyOf(this.channels.values());\n+    }\n+\n+    private static final class ChannelRegistrationsResult {\n+\n+        private final CompletableFuture<Void> future;\n+\n+        private ChannelRegistrationsResult(final CompletableFuture<Void> future) {\n+            this.future = future;\n+        }\n+    }\n+\n+    public void postRegistryEvent() {\n+        final Cause cause = Cause.of(EventContext.empty(), this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6372a712f6e4bfa4ee1f10763ffee8c7e1b55ec"}, "originalPosition": 129}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA4MTY0Mg==", "bodyText": "Does asMap render the cache as invalid? Haven't read the javadoc on caffeine in a moment, but I'd figure it would make a copy as a Map.", "url": "https://github.com/SpongePowered/Sponge/pull/3065#discussion_r455081642", "createdAt": "2020-07-15T14:10:19Z", "author": {"login": "gabizou"}, "path": "src/main/java/org/spongepowered/common/network/channel/TransactionStore.java", "diffHunk": "@@ -0,0 +1,130 @@\n+/*\n+ * This file is part of Sponge, licensed under the MIT License (MIT).\n+ *\n+ * Copyright (c) SpongePowered <https://www.spongepowered.org>\n+ * Copyright (c) contributors\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in\n+ * all copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+ * THE SOFTWARE.\n+ */\n+package org.spongepowered.common.network.channel;\n+\n+import com.github.benmanes.caffeine.cache.Caffeine;\n+import com.github.benmanes.caffeine.cache.RemovalCause;\n+import com.github.benmanes.caffeine.cache.RemovalListener;\n+import org.checkerframework.checker.nullness.qual.Nullable;\n+import org.spongepowered.api.network.EngineConnection;\n+import org.spongepowered.api.network.channel.TimeoutException;\n+\n+import java.util.concurrent.ConcurrentMap;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.atomic.AtomicInteger;\n+import java.util.function.Supplier;\n+\n+/**\n+ * A storage for transaction id mappings.\n+ */\n+public final class TransactionStore {\n+\n+    private final Supplier<EngineConnection> connection;\n+\n+    private final AtomicInteger counter = new AtomicInteger();\n+    private final ConcurrentMap<Integer, Entry> lookup = Caffeine.newBuilder()\n+            .expireAfterAccess(1, TimeUnit.MINUTES)\n+            .removalListener((RemovalListener<Integer, Entry>) (key, value, cause) -> {\n+                if (cause == RemovalCause.EXPIRED && value != null) {\n+                    value.getChannel().handleTransactionResponse(\n+                            getConnection(), value.getData(), TransactionResult.failure(new TimeoutException()));\n+                }\n+            })\n+            .build().asMap();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c93b795b8359dbef1ab85b5b6008dc29f06179b6"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA4MjgyMQ==", "bodyText": "Concurrent?", "url": "https://github.com/SpongePowered/Sponge/pull/3065#discussion_r455082821", "createdAt": "2020-07-15T14:11:59Z", "author": {"login": "gabizou"}, "path": "src/main/java/org/spongepowered/common/network/channel/packet/AbstractPacketChannel.java", "diffHunk": "@@ -0,0 +1,249 @@\n+/*\n+ * This file is part of Sponge, licensed under the MIT License (MIT).\n+ *\n+ * Copyright (c) SpongePowered <https://www.spongepowered.org>\n+ * Copyright (c) contributors\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in\n+ * all copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+ * THE SOFTWARE.\n+ */\n+package org.spongepowered.common.network.channel.packet;\n+\n+import static java.util.Objects.requireNonNull;\n+\n+import com.google.common.collect.ImmutableList;\n+import io.netty.handler.codec.CodecException;\n+import io.netty.handler.codec.DecoderException;\n+import io.netty.handler.codec.EncoderException;\n+import it.unimi.dsi.fastutil.ints.Int2ObjectMap;\n+import it.unimi.dsi.fastutil.ints.Int2ObjectOpenHashMap;\n+import org.checkerframework.checker.nullness.qual.Nullable;\n+import org.spongepowered.api.ResourceKey;\n+import org.spongepowered.api.network.EngineConnection;\n+import org.spongepowered.api.network.channel.ChannelBuf;\n+import org.spongepowered.api.network.channel.ChannelException;\n+import org.spongepowered.api.network.channel.packet.FixedTransactionalPacketBinding;\n+import org.spongepowered.api.network.channel.packet.HandlerPacketBinding;\n+import org.spongepowered.api.network.channel.packet.Packet;\n+import org.spongepowered.api.network.channel.packet.PacketBinding;\n+import org.spongepowered.api.network.channel.packet.PacketHandler;\n+import org.spongepowered.api.network.channel.packet.RequestPacket;\n+import org.spongepowered.api.network.channel.packet.ResponsePacketHandler;\n+import org.spongepowered.api.network.channel.packet.TransactionalPacketBinding;\n+import org.spongepowered.api.network.channel.packet.TransactionalPacketRegistry;\n+import org.spongepowered.common.SpongeCommon;\n+import org.spongepowered.common.network.channel.ChannelBuffers;\n+import org.spongepowered.common.network.channel.SpongeChannel;\n+import org.spongepowered.common.network.channel.SpongeChannelRegistry;\n+\n+import java.util.Collection;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.function.Consumer;\n+import java.util.function.Supplier;\n+\n+public abstract class AbstractPacketChannel extends SpongeChannel implements TransactionalPacketRegistry {\n+\n+    protected final Map<Class<?>, PacketBinding<?>> byType = new HashMap<>();\n+    protected final Int2ObjectMap<PacketBinding<?>> byOpcode = new Int2ObjectOpenHashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c93b795b8359dbef1ab85b5b6008dc29f06179b6"}, "originalPosition": 64}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bfde080f9649461496fe8bb04f5d16cdae7f2ebe", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/bfde080f9649461496fe8bb04f5d16cdae7f2ebe", "committedDate": "2020-07-19T15:11:40Z", "message": "Call the handshake and register channel events. Fix some notes."}, "afterCommit": {"oid": "357efd5cec73f4859d3027df535659e739049994", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/357efd5cec73f4859d3027df535659e739049994", "committedDate": "2020-07-19T15:20:30Z", "message": "Implement the new network channels."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "72ccb2460fe02e41d07e00fa9d2d4a923375335e", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/72ccb2460fe02e41d07e00fa9d2d4a923375335e", "committedDate": "2020-07-19T15:25:12Z", "message": "Move some constants."}, "afterCommit": {"oid": "0662dc18f4d48f4d8541fdb74a7660aac951624b", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/0662dc18f4d48f4d8541fdb74a7660aac951624b", "committedDate": "2020-07-19T15:42:48Z", "message": "Implement the new network channels."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0662dc18f4d48f4d8541fdb74a7660aac951624b", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/0662dc18f4d48f4d8541fdb74a7660aac951624b", "committedDate": "2020-07-19T15:42:48Z", "message": "Implement the new network channels."}, "afterCommit": {"oid": "2ceb820e1cb02086d8818e6adfd9ca1ff45d0933", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/2ceb820e1cb02086d8818e6adfd9ca1ff45d0933", "committedDate": "2020-07-20T10:39:29Z", "message": "Implement the new network channels."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ceb820e1cb02086d8818e6adfd9ca1ff45d0933", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/2ceb820e1cb02086d8818e6adfd9ca1ff45d0933", "committedDate": "2020-07-20T10:39:29Z", "message": "Implement the new network channels."}, "afterCommit": {"oid": "df679bcf8da394f20bf137f484a22cbaa7d467da", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/df679bcf8da394f20bf137f484a22cbaa7d467da", "committedDate": "2020-07-20T10:54:33Z", "message": "Implement the new network channels."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8213c5b2a0d19d0291e072faffc3cd72f5ca3c71", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/8213c5b2a0d19d0291e072faffc3cd72f5ca3c71", "committedDate": "2020-07-20T18:23:49Z", "message": "Implement join event. Fixes and add tests during play phase.\n\nPartially implement login event, because this needs ServerLocation to work."}, "afterCommit": {"oid": "9463fd239f0b114790c82a5dfd92b71d447b24d5", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/9463fd239f0b114790c82a5dfd92b71d447b24d5", "committedDate": "2020-07-21T10:21:03Z", "message": "Implement the exception handler. Fix basic channel in play phase."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cd5d406cb5f8f563093e040d57eed1e928b2756", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/6cd5d406cb5f8f563093e040d57eed1e928b2756", "committedDate": "2020-07-27T12:05:24Z", "message": "Implement the new network channels."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4fa2f3acca49aa2bbc9584353268dc7c5c697b5b", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/4fa2f3acca49aa2bbc9584353268dc7c5c697b5b", "committedDate": "2020-07-23T18:00:22Z", "message": "A few more fixes for the exception handler."}, "afterCommit": {"oid": "6cd5d406cb5f8f563093e040d57eed1e928b2756", "author": {"user": {"login": "Cybermaxke", "name": "Seppe Volkaerts"}}, "url": "https://github.com/SpongePowered/Sponge/commit/6cd5d406cb5f8f563093e040d57eed1e928b2756", "committedDate": "2020-07-27T12:05:24Z", "message": "Implement the new network channels."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 803, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}