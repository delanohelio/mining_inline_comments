{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2MDg1NDAw", "number": 3090, "title": "Reorganize config, make it work in mixin plugins", "bodyText": "A bunch of rearrangement to better sort out which options are available\nper-world, and which options are global only.\nAdds a usable versioning system.\nConfiguration actually saves.\nPer-dimension type configurations are gone\nStill TODO (but for a future PR):\n\nbetter way to pass base directory info and isVanilla flag to the configuration classes\nfigure out the logic in Block/Entity type constructors and make it actually correct\ncommands to reload + edit the configuration", "createdAt": "2020-07-24T05:33:27Z", "url": "https://github.com/SpongePowered/Sponge/pull/3090", "merged": true, "mergeCommit": {"oid": "ad94e11623b4d9e33769151e58be39c55acf323f"}, "closed": true, "closedAt": "2020-07-31T23:56:36Z", "author": {"login": "zml2008"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4GGITAFqTQ1NDk5ODg5Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6dM5_ABqjM2MTA4MzI2MjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0OTk4ODky", "url": "https://github.com/SpongePowered/Sponge/pull/3090#pullrequestreview-454998892", "createdAt": "2020-07-24T15:51:58Z", "commit": {"oid": "5dfd08f78a148e3a8d1fcc81abda320cb4b6d605"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNTo1MTo1OFrOG20rpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNTo1MTo1OFrOG20rpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDEzOTQyOA==", "bodyText": "SQL manager", "url": "https://github.com/SpongePowered/Sponge/pull/3090#discussion_r460139428", "createdAt": "2020-07-24T15:51:58Z", "author": {"login": "Zidane"}, "path": "src/main/java/org/spongepowered/common/config/common/CommonConfig.java", "diffHunk": "@@ -22,41 +22,38 @@\n  * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  * THE SOFTWARE.\n  */\n-package org.spongepowered.common.config.type;\n+package org.spongepowered.common.config.common;\n \n-import com.google.common.base.Function;\n-import com.google.common.base.Predicate;\n import com.google.common.base.Predicates;\n import com.google.common.collect.ImmutableMap;\n import com.google.common.collect.Maps;\n import ninja.leaping.configurate.objectmapping.Setting;\n-import org.spongepowered.common.config.category.BrokenModCategory;\n-import org.spongepowered.common.config.category.BungeeCordCategory;\n-import org.spongepowered.common.config.category.PhaseTrackerCategory;\n-import org.spongepowered.common.config.category.CommandsCategory;\n-import org.spongepowered.common.config.category.ExploitCategory;\n-import org.spongepowered.common.config.category.GlobalGeneralCategory;\n-import org.spongepowered.common.config.category.GlobalWorldCategory;\n-import org.spongepowered.common.config.category.ModuleCategory;\n-import org.spongepowered.common.config.category.MovementChecksCategory;\n-import org.spongepowered.common.config.category.OptimizationCategory;\n-import org.spongepowered.common.config.category.PermissionCategory;\n-import org.spongepowered.common.config.category.ServicesCategory;\n-import org.spongepowered.common.config.category.SqlCategory;\n-import org.spongepowered.common.config.category.MetricsCategory;\n-import org.spongepowered.common.config.category.TeleportHelperCategory;\n+import org.spongepowered.common.config.Config;\n import org.spongepowered.common.util.IpSet;\n \n import java.net.InetAddress;\n import java.util.HashMap;\n import java.util.List;\n import java.util.Map;\n+import java.util.function.Predicate;\n \n-import javax.annotation.Nullable;\n+/**\n+ * Sponge's core configuration.\n+ *\n+ * <p>The options in this file are non-inheritable.</p>\n+ *\n+ * <p>Because of how early in the engine lifecycle this configuration is loaded,\n+ * the configuration and its categories <em>may not reference\n+ * Minecraft classes</em></p>\n+ */\n+public class CommonConfig implements Config {\n+\n+    public static final String FILE_NAME = \"sponge.conf\";\n \n-public class GlobalConfig extends GeneralConfigBase {\n+    @Setting\n+    private GeneralCategory general = new GeneralCategory();\n \n-    @Setting(comment = \"Configuration options related to the Sql service, including connection aliases etc\")\n+    @Setting(comment = \"Configuration options related to the SQL service, including connection aliases etc\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5dfd08f78a148e3a8d1fcc81abda320cb4b6d605"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MDA0NzEw", "url": "https://github.com/SpongePowered/Sponge/pull/3090#pullrequestreview-455004710", "createdAt": "2020-07-24T16:00:01Z", "commit": {"oid": "5dfd08f78a148e3a8d1fcc81abda320cb4b6d605"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjowMDowMVrOG20-KQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjowMDowMVrOG20-KQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE0NDE2OQ==", "bodyText": "This is actually a fine change with no TODO needed. DimensionType specifying if I'll generate spawn on load is just a Forge feature. This call will likely be changed to do...\nModWorldHooks.shouldGenerateSpawnOnLoad(DimensionType dimensionType);", "url": "https://github.com/SpongePowered/Sponge/pull/3090#discussion_r460144169", "createdAt": "2020-07-24T16:00:01Z", "author": {"login": "Zidane"}, "path": "src/main/java/org/spongepowered/common/world/SpongeWorldArchetypeBuilder.java", "diffHunk": "@@ -266,7 +266,7 @@ public SpongeWorldArchetypeBuilder reset() {\n         this.enabled = true;\n         this.loadOnStartup = true;\n         this.keepSpawnLoaded = null;\n-        this.generateSpawnOnLoad = this.dimensionType.getConfigAdapter().getConfig().getWorld().getGenerateSpawnOnLoad();\n+        this.generateSpawnOnLoad = true; // TODO this.dimensionType.getConfigAdapter().getConfig().getWorld().getGenerateSpawnOnLoad();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5dfd08f78a148e3a8d1fcc81abda320cb4b6d605"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5dfd08f78a148e3a8d1fcc81abda320cb4b6d605", "author": {"user": {"login": "zml2008", "name": "zml"}}, "url": "https://github.com/SpongePowered/Sponge/commit/5dfd08f78a148e3a8d1fcc81abda320cb4b6d605", "committedDate": "2020-07-24T05:27:23Z", "message": "Reorganize config, make it work in mixin plugins\n\nA bunch of rearrangement to better sort out which options are available\nper-world, and which options are global only.\n\nAdds a usable versioning system."}, "afterCommit": {"oid": "d51e9c2a848b316c55139f88d42bbdefaf773a75", "author": {"user": {"login": "zml2008", "name": "zml"}}, "url": "https://github.com/SpongePowered/Sponge/commit/d51e9c2a848b316c55139f88d42bbdefaf773a75", "committedDate": "2020-07-24T17:06:55Z", "message": "Reorganize config, make it work in mixin plugins\n\nA bunch of rearrangement to better sort out which options are available\nper-world, and which options are global only.\n\nAdds a usable versioning system."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18aa062bb5c03633ad2d262fc33b0b1ddf045016", "author": {"user": {"login": "zml2008", "name": "zml"}}, "url": "https://github.com/SpongePowered/Sponge/commit/18aa062bb5c03633ad2d262fc33b0b1ddf045016", "committedDate": "2020-07-31T23:54:44Z", "message": "Reorganize config, make it work in mixin plugins\n\nA bunch of rearrangement to better sort out which options are available\nper-world, and which options are global only.\n\nAdds a usable versioning system."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d51e9c2a848b316c55139f88d42bbdefaf773a75", "author": {"user": {"login": "zml2008", "name": "zml"}}, "url": "https://github.com/SpongePowered/Sponge/commit/d51e9c2a848b316c55139f88d42bbdefaf773a75", "committedDate": "2020-07-24T17:06:55Z", "message": "Reorganize config, make it work in mixin plugins\n\nA bunch of rearrangement to better sort out which options are available\nper-world, and which options are global only.\n\nAdds a usable versioning system."}, "afterCommit": {"oid": "18aa062bb5c03633ad2d262fc33b0b1ddf045016", "author": {"user": {"login": "zml2008", "name": "zml"}}, "url": "https://github.com/SpongePowered/Sponge/commit/18aa062bb5c03633ad2d262fc33b0b1ddf045016", "committedDate": "2020-07-31T23:54:44Z", "message": "Reorganize config, make it work in mixin plugins\n\nA bunch of rearrangement to better sort out which options are available\nper-world, and which options are global only.\n\nAdds a usable versioning system."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 816, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}