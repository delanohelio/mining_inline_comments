{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyMjI1OTg1", "number": 2499, "title": "Start moving some simpler things to new tracker package [API-8].", "bodyText": "Moves Bone meal handling and DragonFightManager tracker hooks to the tracker mixin package.\nAlso converted the large overwrite in the old DragonFightManagerMixin and replaced it with a redirect (gabizou you'll want to make sure I didn't royally screw up here lol) since the reference to process the dragonSpawnState only occurs once.", "createdAt": "2020-02-07T04:13:07Z", "url": "https://github.com/SpongePowered/Sponge/pull/2499", "merged": true, "mergeCommit": {"oid": "71e97ecf01f230f1e940d03aa063fa145a19d07b"}, "closed": true, "closedAt": "2020-02-11T04:01:21Z", "author": {"login": "i509VCB"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcB3o3IgFqTM1NDkyNTEzOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDDMQ9AFqTM1NjI0MDk1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0OTI1MTM5", "url": "https://github.com/SpongePowered/Sponge/pull/2499#pullrequestreview-354925139", "createdAt": "2020-02-07T04:27:48Z", "commit": {"oid": "98e8d33fff21eac1a75224f620ba2fcdb7dc29a0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwNDoyNzo0OFrOFmyAoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwNDoyODozM1rOFmyBMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjIwOTU2OA==", "bodyText": "Update the redirect method name to like tracker$wrapGrowWithPhaseEntry", "url": "https://github.com/SpongePowered/Sponge/pull/2499#discussion_r376209568", "createdAt": "2020-02-07T04:27:48Z", "author": {"login": "gabizou"}, "path": "src/main/java/org/spongepowered/common/mixin/tracker/item/BoneMealItemMixin_Tracker.java", "diffHunk": "@@ -74,7 +74,7 @@\n         method = \"applyBonemeal\",\n         at = @At(\n             value = \"INVOKE\",\n-            target = \"Lnet/minecraft/block/IGrowable;grow(Lnet/minecraft/world/World;Ljava/util/Random;Lnet/minecraft/util/math/BlockPos;Lnet/minecraft/block/state/IBlockState;)V\"\n+            target = \"Lnet/minecraft/block/IGrowable;grow(Lnet/minecraft/world/World;Ljava/util/Random;Lnet/minecraft/util/math/BlockPos;Lnet/minecraft/block/BlockState;)V\"\n         ),\n         require = 0, // Will be removed once the above github issue is resolved with a proper solution\n         // Even though we're in a group, expecting this to succeed in forge environments will not work since there is a different mixin", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98e8d33fff21eac1a75224f620ba2fcdb7dc29a0"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjIwOTcxMw==", "bodyText": "The method name should follow the wiki conventions still: tracker$wrapSpawnStateWithPhaseEntry or think of a better name \ud83d\ude06", "url": "https://github.com/SpongePowered/Sponge/pull/2499#discussion_r376209713", "createdAt": "2020-02-07T04:28:33Z", "author": {"login": "gabizou"}, "path": "src/main/java/org/spongepowered/common/mixin/tracker/world/end/DragonFightManagerMixin_Tracker.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package org.spongepowered.common.mixin.tracker.world.end;\n+\n+import net.minecraft.entity.item.EnderCrystalEntity;\n+import net.minecraft.util.math.BlockPos;\n+import net.minecraft.world.end.DragonFightManager;\n+import net.minecraft.world.end.DragonSpawnState;\n+import net.minecraft.world.server.ServerWorld;\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.injection.At;\n+import org.spongepowered.asm.mixin.injection.Redirect;\n+import org.spongepowered.common.event.tracking.PhaseTracker;\n+import org.spongepowered.common.event.tracking.context.GeneralizedContext;\n+import org.spongepowered.common.event.tracking.phase.world.dragon.DragonPhase;\n+\n+import java.util.List;\n+\n+@Mixin(DragonFightManager.class)\n+public abstract class DragonFightManagerMixin_Tracker {\n+\n+    /**\n+     * @author i509vcb - February 6th 2020\n+     * @reason Add sponge necessary phase state switches\n+     *\n+     * @param dragonSpawnState The dragon spawn state.\n+     * @param worldIn The world this respawnState is occuring in.\n+     * @param manager The current DragonFightManager.\n+     * @param crystals List of all currently present end crystals.\n+     * @param respawnStateTicks The amount of this this respawn state has been running for.\n+     * @param exitPortalLocation The position of the exit portal.\n+     */\n+    @Redirect(method = \"tick()V\", at = @At(value = \"INVOKE\", target = \"Lnet/minecraft/world/end/DragonSpawnState;process(Lnet/minecraft/world/server/ServerWorld;Lnet/minecraft/world/end/DragonFightManager;Ljava/util/List;ILnet/minecraft/util/math/BlockPos;)V\"))\n+    private void trackDragonRespawn(DragonSpawnState dragonSpawnState, ServerWorld worldIn, DragonFightManager manager, List<EnderCrystalEntity> crystals, int respawnStateTicks, BlockPos exitPortalLocation) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98e8d33fff21eac1a75224f620ba2fcdb7dc29a0"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MTM4MTY2", "url": "https://github.com/SpongePowered/Sponge/pull/2499#pullrequestreview-355138166", "createdAt": "2020-02-07T12:59:01Z", "commit": {"oid": "98e8d33fff21eac1a75224f620ba2fcdb7dc29a0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxMjo1OTowMVrOFm8OxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxMjo1OTowMVrOFm8OxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM3NzAyOQ==", "bodyText": "Missing license", "url": "https://github.com/SpongePowered/Sponge/pull/2499#discussion_r376377029", "createdAt": "2020-02-07T12:59:01Z", "author": {"login": "ImMorpheus"}, "path": "src/main/java/org/spongepowered/common/mixin/tracker/world/end/DragonFightManagerMixin_Tracker.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package org.spongepowered.common.mixin.tracker.world.end;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98e8d33fff21eac1a75224f620ba2fcdb7dc29a0"}, "originalPosition": 1}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98e8d33fff21eac1a75224f620ba2fcdb7dc29a0", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/SpongePowered/Sponge/commit/98e8d33fff21eac1a75224f620ba2fcdb7dc29a0", "committedDate": "2020-02-07T04:09:10Z", "message": "Start moving some simpler things to new tracker package."}, "afterCommit": {"oid": "00f41269d526f7192178cfed44f9ba2d48bc541e", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/SpongePowered/Sponge/commit/00f41269d526f7192178cfed44f9ba2d48bc541e", "committedDate": "2020-02-07T20:09:32Z", "message": "Start moving some simpler things to new tracker package."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "706e4b3bb95eb5d1ca27f0aa511c6142faaf61cb", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/SpongePowered/Sponge/commit/706e4b3bb95eb5d1ca27f0aa511c6142faaf61cb", "committedDate": "2020-02-07T20:11:38Z", "message": "Start moving some simpler things to new tracker package."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "00f41269d526f7192178cfed44f9ba2d48bc541e", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/SpongePowered/Sponge/commit/00f41269d526f7192178cfed44f9ba2d48bc541e", "committedDate": "2020-02-07T20:09:32Z", "message": "Start moving some simpler things to new tracker package."}, "afterCommit": {"oid": "706e4b3bb95eb5d1ca27f0aa511c6142faaf61cb", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/SpongePowered/Sponge/commit/706e4b3bb95eb5d1ca27f0aa511c6142faaf61cb", "committedDate": "2020-02-07T20:11:38Z", "message": "Start moving some simpler things to new tracker package."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NjIyNTc0", "url": "https://github.com/SpongePowered/Sponge/pull/2499#pullrequestreview-355622574", "createdAt": "2020-02-09T17:57:19Z", "commit": {"oid": "706e4b3bb95eb5d1ca27f0aa511c6142faaf61cb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MjQwOTU5", "url": "https://github.com/SpongePowered/Sponge/pull/2499#pullrequestreview-356240959", "createdAt": "2020-02-10T20:30:58Z", "commit": {"oid": "706e4b3bb95eb5d1ca27f0aa511c6142faaf61cb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 851, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}