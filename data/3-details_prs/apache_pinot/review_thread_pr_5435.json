{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyMTgzNjYx", "number": 5435, "reviewThreads": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNjoxMDoxN1rOD_LKKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNTozMTo1NFrOD_8MoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTY5NzA2OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/ThirdEyeAnomalyApplication.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNjoxMDoxN1rOGZs4Qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNjoxMDoxN1rOGZs4Qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMjg4Mw==", "bodyText": "initAnomalyClassifierFactory, initAlertFilterFactory could be deleted.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r429602883", "createdAt": "2020-05-24T06:10:17Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/ThirdEyeAnomalyApplication.java", "diffHunk": "@@ -273,9 +224,4 @@ private void initAnomalyClassifierFactory(String anomalyClassifierConfigPath) {\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2933c48b4af6a27cba182bfd5879b5e82d397fe3"}, "originalPosition": 116}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTY5ODg1OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/ThirdEyeAnomalyApplication.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNjoxMzoyMlrOGZs5IQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNjoxMzoyMlrOGZs5IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMzEwNQ==", "bodyText": "anomalyClassifierFactory not used.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r429603105", "createdAt": "2020-05-24T06:13:22Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/ThirdEyeAnomalyApplication.java", "diffHunk": "@@ -61,18 +54,12 @@\n public class ThirdEyeAnomalyApplication\n     extends BaseThirdEyeApplication<ThirdEyeAnomalyConfiguration> {\n \n-  private DetectionJobScheduler detectionJobScheduler = null;\n   private TaskDriver taskDriver = null;\n   private MonitorJobScheduler monitorJobScheduler = null;\n-  private AlertJobSchedulerV2 alertJobSchedulerV2;\n   private AnomalyFunctionFactory anomalyFunctionFactory = null;\n   private AutoOnboardService autoOnboardService = null;\n-  private DataCompletenessScheduler dataCompletenessScheduler = null;\n   private AlertFilterFactory alertFilterFactory = null;\n   private AnomalyClassifierFactory anomalyClassifierFactory = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2933c48b4af6a27cba182bfd5879b5e82d397fe3"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTY5OTAxOnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/ThirdEyeAnomalyApplication.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNjoxMzo1M1rOGZs5Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNjoxMzo1M1rOGZs5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMzEyNg==", "bodyText": "alertFilterFactory not used.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r429603126", "createdAt": "2020-05-24T06:13:53Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/ThirdEyeAnomalyApplication.java", "diffHunk": "@@ -61,18 +54,12 @@\n public class ThirdEyeAnomalyApplication\n     extends BaseThirdEyeApplication<ThirdEyeAnomalyConfiguration> {\n \n-  private DetectionJobScheduler detectionJobScheduler = null;\n   private TaskDriver taskDriver = null;\n   private MonitorJobScheduler monitorJobScheduler = null;\n-  private AlertJobSchedulerV2 alertJobSchedulerV2;\n   private AnomalyFunctionFactory anomalyFunctionFactory = null;\n   private AutoOnboardService autoOnboardService = null;\n-  private DataCompletenessScheduler dataCompletenessScheduler = null;\n   private AlertFilterFactory alertFilterFactory = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2933c48b4af6a27cba182bfd5879b5e82d397fe3"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTcwMTE1OnYy", "diffSide": "LEFT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/task/TaskInfoFactory.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNjoxNzoyMFrOGZs6Kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNjoxNzoyMFrOGZs6Kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMzM3MA==", "bodyText": "ANOMALY_DETECTION and MERGE tasks are not used.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r429603370", "createdAt": "2020-05-24T06:17:20Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/task/TaskInfoFactory.java", "diffHunk": "@@ -67,16 +64,6 @@ public static TaskInfo getTaskInfoFromTaskType(TaskType taskType, String taskInf\n         case MONITOR:\n           taskInfo = OBJECT_MAPPER.readValue(taskInfoString, MonitorTaskInfo.class);\n           break;\n-        case ALERT:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2933c48b4af6a27cba182bfd5879b5e82d397fe3"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTcwMTc3OnYy", "diffSide": "LEFT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/task/TaskRunnerFactory.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNjoxODoxMFrOGZs6cQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMDoyOTo1OVrOGavNfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMzQ0MQ==", "bodyText": "ANOMALY_DETECTION and MERGE tasks are not used.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r429603441", "createdAt": "2020-05-24T06:18:10Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/task/TaskRunnerFactory.java", "diffHunk": "@@ -59,16 +56,6 @@ public static TaskRunner getTaskRunnerFromTaskType(TaskType taskType) {\n       case MONITOR:\n         taskRunner = new MonitorTaskRunner();\n         break;\n-      case DATA_COMPLETENESS:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2933c48b4af6a27cba182bfd5879b5e82d397fe3"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY4OTY2Mw==", "bodyText": "Removed.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430689663", "createdAt": "2020-05-26T20:29:59Z", "author": {"login": "vincentchenjl"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/task/TaskRunnerFactory.java", "diffHunk": "@@ -59,16 +56,6 @@ public static TaskRunner getTaskRunnerFromTaskType(TaskType taskType) {\n       case MONITOR:\n         taskRunner = new MonitorTaskRunner();\n         break;\n-      case DATA_COMPLETENESS:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMzQ0MQ=="}, "originalCommit": {"oid": "2933c48b4af6a27cba182bfd5879b5e82d397fe3"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTcwMjA2OnYy", "diffSide": "LEFT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/completeness/checker/DataCompletenessUtils.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNjoxOTowMlrOGZs6mA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMzoyODoxNVrOGaznaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMzQ4MA==", "bodyText": "This whole class could be deleted.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r429603480", "createdAt": "2020-05-24T06:19:02Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/completeness/checker/DataCompletenessUtils.java", "diffHunk": "@@ -261,13 +261,4 @@ public static DateTimeFormatter getDateTimeFormatterForDataset(TimeSpec timeSpec\n     return bucketNameToCountStar;\n   }\n \n-  public static double getPercentCompleteness(PercentCompletenessFunctionInput input) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2933c48b4af6a27cba182bfd5879b5e82d397fe3"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY5MTg4NA==", "bodyText": "This class is used in Wo4WAvgDataCompletenessAlgorithm. We need to drop both of them if we want to drop this. Wo4WAvgDataCompletenessAlgorithm cannot be dropped due to the issue below.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430691884", "createdAt": "2020-05-26T20:34:16Z", "author": {"login": "vincentchenjl"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/completeness/checker/DataCompletenessUtils.java", "diffHunk": "@@ -261,13 +261,4 @@ public static DateTimeFormatter getDateTimeFormatterForDataset(TimeSpec timeSpec\n     return bucketNameToCountStar;\n   }\n \n-  public static double getPercentCompleteness(PercentCompletenessFunctionInput input) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMzQ4MA=="}, "originalCommit": {"oid": "2933c48b4af6a27cba182bfd5879b5e82d397fe3"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY5ODk5MQ==", "bodyText": "We should remove it and also remove getter/setter.\nThat should be safe.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430698991", "createdAt": "2020-05-26T20:48:18Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/completeness/checker/DataCompletenessUtils.java", "diffHunk": "@@ -261,13 +261,4 @@ public static DateTimeFormatter getDateTimeFormatterForDataset(TimeSpec timeSpec\n     return bucketNameToCountStar;\n   }\n \n-  public static double getPercentCompleteness(PercentCompletenessFunctionInput input) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMzQ4MA=="}, "originalCommit": {"oid": "2933c48b4af6a27cba182bfd5879b5e82d397fe3"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc2MTgzMg==", "bodyText": "I remove Wo4WAvgDataCompletenessAlgorithm completely and also the field DatasetConfigBean.dataCompletenessAlgorithm from DatasetConfigBean.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430761832", "createdAt": "2020-05-26T23:28:15Z", "author": {"login": "vincentchenjl"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/completeness/checker/DataCompletenessUtils.java", "diffHunk": "@@ -261,13 +261,4 @@ public static DateTimeFormatter getDateTimeFormatterForDataset(TimeSpec timeSpec\n     return bucketNameToCountStar;\n   }\n \n-  public static double getPercentCompleteness(PercentCompletenessFunctionInput input) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMzQ4MA=="}, "originalCommit": {"oid": "2933c48b4af6a27cba182bfd5879b5e82d397fe3"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTcwMjQzOnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/completeness/checker/Wo4WAvgDataCompletenessAlgorithm.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNjoxOTo1M1rOGZs6wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMDozMjo0M1rOGavS7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMzUyMg==", "bodyText": "This class could be deleted.\nLet's delete everything under /completeness.checker", "url": "https://github.com/apache/pinot/pull/5435#discussion_r429603522", "createdAt": "2020-05-24T06:19:53Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/completeness/checker/Wo4WAvgDataCompletenessAlgorithm.java", "diffHunk": "@@ -41,6 +41,7 @@\n /**\n  * This is the implementation of the WO4W Average function or checking data completeness of datasets\n  */\n+@Deprecated\n public class Wo4WAvgDataCompletenessAlgorithm implements DataCompletenessAlgorithm {\n \n   public static double DEFAULT_EXPECTED_COMPLETENESS = 80;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2933c48b4af6a27cba182bfd5879b5e82d397fe3"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY5MTA1Mg==", "bodyText": "The issue is that  Wo4WAvgDataCompletenessAlgorithm is used as default value for DatasetConfigBean.dataCompletenessAlgorithm. I understand that it is not used, but i am not sure about the impact if i remove this field from DatasetConfigBean and still have this field inside the JSON in DB.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430691052", "createdAt": "2020-05-26T20:32:43Z", "author": {"login": "vincentchenjl"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/completeness/checker/Wo4WAvgDataCompletenessAlgorithm.java", "diffHunk": "@@ -41,6 +41,7 @@\n /**\n  * This is the implementation of the WO4W Average function or checking data completeness of datasets\n  */\n+@Deprecated\n public class Wo4WAvgDataCompletenessAlgorithm implements DataCompletenessAlgorithm {\n \n   public static double DEFAULT_EXPECTED_COMPLETENESS = 80;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMzUyMg=="}, "originalCommit": {"oid": "2933c48b4af6a27cba182bfd5879b5e82d397fe3"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MzcwMjAwOnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/task/TaskConstants.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToxNDoyOFrOGa5roQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToxNDoyOFrOGa5roQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2MTIxNw==", "bodyText": "Remove //TODO", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430861217", "createdAt": "2020-05-27T05:14:28Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/task/TaskConstants.java", "diffHunk": "@@ -26,15 +26,8 @@\n     DETECTION,\n     DETECTION_ALERT,\n     YAML_DETECTION_ONBOARD,\n-    ANOMALY_DETECTION,\n-    MERGE,\n     // TODO: deprecate ALERT task type", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MzcwNTE4OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/task/TaskInfoFactory.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToxNjozOVrOGa5tow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToxNjozOVrOGa5tow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2MTczMQ==", "bodyText": "Update error log accordingly.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430861731", "createdAt": "2020-05-27T05:16:39Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/task/TaskInfoFactory.java", "diffHunk": "@@ -58,25 +54,9 @@ public static TaskInfo getTaskInfoFromTaskType(TaskType taskType, String taskInf\n         case YAML_DETECTION_ONBOARD:\n           taskInfo = OBJECT_MAPPER.readValue(taskInfoString, YamlOnboardingTaskInfo.class);\n           break;\n-        case ANOMALY_DETECTION:\n-          taskInfo = OBJECT_MAPPER.readValue(taskInfoString, DetectionTaskInfo.class);\n-          break;\n-        case MERGE:\n-          LOG.error(\"TaskType MERGE not supported\");\n-          break;\n         case MONITOR:\n           taskInfo = OBJECT_MAPPER.readValue(taskInfoString, MonitorTaskInfo.class);\n           break;\n-        case ALERT:\n-        case ALERT2:\n-          taskInfo = OBJECT_MAPPER.readValue(taskInfoString, AlertTaskInfo.class);\n-          break;\n-        case DATA_COMPLETENESS:\n-          taskInfo = OBJECT_MAPPER.readValue(taskInfoString, DataCompletenessTaskInfo.class);\n-          break;\n-        case CLASSIFICATION:\n-          taskInfo = OBJECT_MAPPER.readValue(taskInfoString, ClassificationTaskInfo.class);\n-          break;\n         default:\n           LOG.error(\"TaskType must be one of ANOMALY_DETECTION, MONITOR, ALERT, ALERT2, DATA_COMPLETENESS, CLASSIFICATION\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MzcwNjY0OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/task/TaskConstants.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToxNzozN1rOGa5uhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMDo0OTo1N1rOGbiDTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2MTk1Nw==", "bodyText": "Add a simple description for each task type.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430861957", "createdAt": "2020-05-27T05:17:37Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/task/TaskConstants.java", "diffHunk": "@@ -26,15 +26,8 @@\n     DETECTION,\n     DETECTION_ALERT,\n     YAML_DETECTION_ONBOARD,\n-    ANOMALY_DETECTION,\n-    MERGE,\n     // TODO: deprecate ALERT task type\n-    ALERT,\n-    ALERT2,\n-    MONITOR,\n-    DATA_COMPLETENESS,\n-    CLASSIFICATION,\n-    REPLAY\n+    MONITOR", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTUyMjYzOA==", "bodyText": "Added one line description each type.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r431522638", "createdAt": "2020-05-28T00:49:57Z", "author": {"login": "vincentchenjl"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/anomaly/task/TaskConstants.java", "diffHunk": "@@ -26,15 +26,8 @@\n     DETECTION,\n     DETECTION_ALERT,\n     YAML_DETECTION_ONBOARD,\n-    ANOMALY_DETECTION,\n-    MERGE,\n     // TODO: deprecate ALERT task type\n-    ALERT,\n-    ALERT2,\n-    MONITOR,\n-    DATA_COMPLETENESS,\n-    CLASSIFICATION,\n-    REPLAY\n+    MONITOR", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2MTk1Nw=="}, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MzcxNzU0OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/common/BaseThirdEyeApplication.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToyNDoyN1rOGa51Hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToyNDoyN1rOGa51Hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2MzY0Nw==", "bodyText": "anomalyFunctionDAO is not used, including AnomalyFunctionManager.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430863647", "createdAt": "2020-05-27T05:24:27Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/common/BaseThirdEyeApplication.java", "diffHunk": "@@ -51,11 +46,9 @@\n   protected final Logger LOG = LoggerFactory.getLogger(this.getClass());\n \n   protected AnomalyFunctionManager anomalyFunctionDAO;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MzcxODk3OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/ThirdEyeDashboardApplication.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToyNToxNlrOGa51-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwMDoxODowM1rOGcvYkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2Mzg2NA==", "bodyText": "AnomalyFunctionFactory is not used.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430863864", "createdAt": "2020-05-27T05:25:16Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/ThirdEyeDashboardApplication.java", "diffHunk": "@@ -160,14 +155,12 @@ public void run(ThirdEyeDashboardConfiguration config, Environment env)\n \n     AnomalyFunctionFactory anomalyFunctionFactory = new AnomalyFunctionFactory(config.getFunctionConfigPath());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTUyNjkzOA==", "bodyText": "anomalyFunctionFactory is used to initialize AnomalyResource, DataResource, and AnomaliesResource. Could we confirm all these three resources are not used?", "url": "https://github.com/apache/pinot/pull/5435#discussion_r431526938", "createdAt": "2020-05-28T01:06:52Z", "author": {"login": "vincentchenjl"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/ThirdEyeDashboardApplication.java", "diffHunk": "@@ -160,14 +155,12 @@ public void run(ThirdEyeDashboardConfiguration config, Environment env)\n \n     AnomalyFunctionFactory anomalyFunctionFactory = new AnomalyFunctionFactory(config.getFunctionConfigPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2Mzg2NA=="}, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTk0MjgzOA==", "bodyText": "@jihaozh can you check which resource is used? I believe most endpoints in AnomalyResource and AnomaliesResource are not used. From Harley's doc only \"/anomalies/search/time/\" is used, but let's double check with them.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r431942838", "createdAt": "2020-05-28T15:51:43Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/ThirdEyeDashboardApplication.java", "diffHunk": "@@ -160,14 +155,12 @@ public void run(ThirdEyeDashboardConfiguration config, Environment env)\n \n     AnomalyFunctionFactory anomalyFunctionFactory = new AnomalyFunctionFactory(config.getFunctionConfigPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2Mzg2NA=="}, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjAwNDAxNw==", "bodyText": "I think AnomalyResource is not used.  In AnomaliesResource, only the search endpoints listed by Harley is used. DataResource is being used, but it shouldn't need anomalyFunctionFactory anymore.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r432004017", "createdAt": "2020-05-28T17:28:08Z", "author": {"login": "jihaozh"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/ThirdEyeDashboardApplication.java", "diffHunk": "@@ -160,14 +155,12 @@ public void run(ThirdEyeDashboardConfiguration config, Environment env)\n \n     AnomalyFunctionFactory anomalyFunctionFactory = new AnomalyFunctionFactory(config.getFunctionConfigPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2Mzg2NA=="}, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjc4OTY1MQ==", "bodyText": "When we search for anomalies by using /anomalies/search/time/, we construct AnomalyDetails, and it requires BaseAnomalyFunction to do it.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r432789651", "createdAt": "2020-05-30T00:18:03Z", "author": {"login": "vincentchenjl"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/ThirdEyeDashboardApplication.java", "diffHunk": "@@ -160,14 +155,12 @@ public void run(ThirdEyeDashboardConfiguration config, Environment env)\n \n     AnomalyFunctionFactory anomalyFunctionFactory = new AnomalyFunctionFactory(config.getFunctionConfigPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2Mzg2NA=="}, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MzcyMDM0OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/ThirdEyeDashboardApplication.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToyNjowOVrOGa522g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMTowOTo0OFrOGbiXMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NDA5MA==", "bodyText": "AlertFilterFactory is not used.\nAll the classes under org.apache.pinot.thirdeye.detector.email.filter are not used.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430864090", "createdAt": "2020-05-27T05:26:09Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/ThirdEyeDashboardApplication.java", "diffHunk": "@@ -160,14 +155,12 @@ public void run(ThirdEyeDashboardConfiguration config, Environment env)\n \n     AnomalyFunctionFactory anomalyFunctionFactory = new AnomalyFunctionFactory(config.getFunctionConfigPath());\n     AlertFilterFactory alertFilterFactory = new AlertFilterFactory(config.getAlertFilterConfigPath());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTUyNzczMQ==", "bodyText": "Same as above.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r431527731", "createdAt": "2020-05-28T01:09:48Z", "author": {"login": "vincentchenjl"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/ThirdEyeDashboardApplication.java", "diffHunk": "@@ -160,14 +155,12 @@ public void run(ThirdEyeDashboardConfiguration config, Environment env)\n \n     AnomalyFunctionFactory anomalyFunctionFactory = new AnomalyFunctionFactory(config.getFunctionConfigPath());\n     AlertFilterFactory alertFilterFactory = new AlertFilterFactory(config.getAlertFilterConfigPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NDA5MA=="}, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MzcyMzc3OnYy", "diffSide": "LEFT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/ThirdEyeDashboardApplication.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToyODoxM1rOGa547w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToyODoxM1rOGa547w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NDYyMw==", "bodyText": "The above three lines are not used.\nenv.jersey().register(new DataResource(anomalyFunctionFactory, alertFilterFactory));\t    env.jersey().register(new DataResource(anomalyFunctionFactory, alertFilterFactory));\nenv.jersey().register(new AnomaliesResource(anomalyFunctionFactory, alertFilterFactory));", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430864623", "createdAt": "2020-05-27T05:28:13Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/ThirdEyeDashboardApplication.java", "diffHunk": "@@ -181,7 +174,6 @@ public void run(ThirdEyeDashboardConfiguration config, Environment env)\n     env.jersey().register(new AutoOnboardResource(config));\n     env.jersey().register(new ConfigResource(DAO_REGISTRY.getConfigDAO()));\n     env.jersey().register(new CustomizedEventResource(DAO_REGISTRY.getEventDAO()));\n-    env.jersey().register(new TimeSeriesResource());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MzcyNTI2OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/AnomalyResource.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToyOTowMlrOGa55yA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMToxNTo1NFrOGbidMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NDg0MA==", "bodyText": "This is not used.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430864840", "createdAt": "2020-05-27T05:29:02Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/AnomalyResource.java", "diffHunk": "@@ -101,21 +99,18 @@\n   private MergedAnomalyResultManager anomalyMergedResultDAO;\n   private AlertConfigManager emailConfigurationDAO;\n   private MergedAnomalyResultManager mergedAnomalyResultDAO;\n-  private AutotuneConfigManager autotuneConfigDAO;\n   private DatasetConfigManager datasetConfigDAO;\n   private AnomalyFunctionFactory anomalyFunctionFactory;\n   private AlertFilterFactory alertFilterFactory;\n   private LoadingCache<String, Long> collectionMaxDataTimeCache;\n \n   private static final DAORegistry DAO_REGISTRY = DAORegistry.getInstance();\n \n-  public AnomalyResource(AnomalyFunctionFactory anomalyFunctionFactory, AlertFilterFactory alertFilterFactory,\n-      AlertFilterAutotuneFactory alertFilterAutotuneFactory) {\n+  public AnomalyResource(AnomalyFunctionFactory anomalyFunctionFactory, AlertFilterFactory alertFilterFactory) {\n     this.anomalyFunctionDAO = DAO_REGISTRY.getAnomalyFunctionDAO();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTUyOTI2Ng==", "bodyText": "anomalyFunctionDAO is used in multiple places in this class.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r431529266", "createdAt": "2020-05-28T01:15:54Z", "author": {"login": "vincentchenjl"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/AnomalyResource.java", "diffHunk": "@@ -101,21 +99,18 @@\n   private MergedAnomalyResultManager anomalyMergedResultDAO;\n   private AlertConfigManager emailConfigurationDAO;\n   private MergedAnomalyResultManager mergedAnomalyResultDAO;\n-  private AutotuneConfigManager autotuneConfigDAO;\n   private DatasetConfigManager datasetConfigDAO;\n   private AnomalyFunctionFactory anomalyFunctionFactory;\n   private AlertFilterFactory alertFilterFactory;\n   private LoadingCache<String, Long> collectionMaxDataTimeCache;\n \n   private static final DAORegistry DAO_REGISTRY = DAORegistry.getInstance();\n \n-  public AnomalyResource(AnomalyFunctionFactory anomalyFunctionFactory, AlertFilterFactory alertFilterFactory,\n-      AlertFilterAutotuneFactory alertFilterAutotuneFactory) {\n+  public AnomalyResource(AnomalyFunctionFactory anomalyFunctionFactory, AlertFilterFactory alertFilterFactory) {\n     this.anomalyFunctionDAO = DAO_REGISTRY.getAnomalyFunctionDAO();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NDg0MA=="}, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MzcyNjM0OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/AnomalyResource.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToyOTozN1rOGa56aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNTo0MToxNVrOGb7QRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NTAwMw==", "bodyText": "What is the difference between anomalyMergedResultDAO and mergedAnomalyResultDAO. Seems duplicate.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430865003", "createdAt": "2020-05-27T05:29:37Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/AnomalyResource.java", "diffHunk": "@@ -101,21 +99,18 @@\n   private MergedAnomalyResultManager anomalyMergedResultDAO;\n   private AlertConfigManager emailConfigurationDAO;\n   private MergedAnomalyResultManager mergedAnomalyResultDAO;\n-  private AutotuneConfigManager autotuneConfigDAO;\n   private DatasetConfigManager datasetConfigDAO;\n   private AnomalyFunctionFactory anomalyFunctionFactory;\n   private AlertFilterFactory alertFilterFactory;\n   private LoadingCache<String, Long> collectionMaxDataTimeCache;\n \n   private static final DAORegistry DAO_REGISTRY = DAORegistry.getInstance();\n \n-  public AnomalyResource(AnomalyFunctionFactory anomalyFunctionFactory, AlertFilterFactory alertFilterFactory,\n-      AlertFilterAutotuneFactory alertFilterAutotuneFactory) {\n+  public AnomalyResource(AnomalyFunctionFactory anomalyFunctionFactory, AlertFilterFactory alertFilterFactory) {\n     this.anomalyFunctionDAO = DAO_REGISTRY.getAnomalyFunctionDAO();\n     this.anomalyMergedResultDAO = DAO_REGISTRY.getMergedAnomalyResultDAO();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTUyODA0MA==", "bodyText": "Both these two are used in the class. If we r sure AnomalyResource is not used, we can remove the whole class.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r431528040", "createdAt": "2020-05-28T01:11:00Z", "author": {"login": "vincentchenjl"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/AnomalyResource.java", "diffHunk": "@@ -101,21 +99,18 @@\n   private MergedAnomalyResultManager anomalyMergedResultDAO;\n   private AlertConfigManager emailConfigurationDAO;\n   private MergedAnomalyResultManager mergedAnomalyResultDAO;\n-  private AutotuneConfigManager autotuneConfigDAO;\n   private DatasetConfigManager datasetConfigDAO;\n   private AnomalyFunctionFactory anomalyFunctionFactory;\n   private AlertFilterFactory alertFilterFactory;\n   private LoadingCache<String, Long> collectionMaxDataTimeCache;\n \n   private static final DAORegistry DAO_REGISTRY = DAORegistry.getInstance();\n \n-  public AnomalyResource(AnomalyFunctionFactory anomalyFunctionFactory, AlertFilterFactory alertFilterFactory,\n-      AlertFilterAutotuneFactory alertFilterAutotuneFactory) {\n+  public AnomalyResource(AnomalyFunctionFactory anomalyFunctionFactory, AlertFilterFactory alertFilterFactory) {\n     this.anomalyFunctionDAO = DAO_REGISTRY.getAnomalyFunctionDAO();\n     this.anomalyMergedResultDAO = DAO_REGISTRY.getMergedAnomalyResultDAO();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NTAwMw=="}, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTkzNTU1OQ==", "bodyText": "The question is duplication. We should remove one of them.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r431935559", "createdAt": "2020-05-28T15:41:15Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/AnomalyResource.java", "diffHunk": "@@ -101,21 +99,18 @@\n   private MergedAnomalyResultManager anomalyMergedResultDAO;\n   private AlertConfigManager emailConfigurationDAO;\n   private MergedAnomalyResultManager mergedAnomalyResultDAO;\n-  private AutotuneConfigManager autotuneConfigDAO;\n   private DatasetConfigManager datasetConfigDAO;\n   private AnomalyFunctionFactory anomalyFunctionFactory;\n   private AlertFilterFactory alertFilterFactory;\n   private LoadingCache<String, Long> collectionMaxDataTimeCache;\n \n   private static final DAORegistry DAO_REGISTRY = DAORegistry.getInstance();\n \n-  public AnomalyResource(AnomalyFunctionFactory anomalyFunctionFactory, AlertFilterFactory alertFilterFactory,\n-      AlertFilterAutotuneFactory alertFilterAutotuneFactory) {\n+  public AnomalyResource(AnomalyFunctionFactory anomalyFunctionFactory, AlertFilterFactory alertFilterFactory) {\n     this.anomalyFunctionDAO = DAO_REGISTRY.getAnomalyFunctionDAO();\n     this.anomalyMergedResultDAO = DAO_REGISTRY.getMergedAnomalyResultDAO();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NTAwMw=="}, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MzcyNjg2OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/AnomalyResource.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToyOTo1MFrOGa56rA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToyOTo1MFrOGa56rA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NTA2OA==", "bodyText": "This is not used.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430865068", "createdAt": "2020-05-27T05:29:50Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/AnomalyResource.java", "diffHunk": "@@ -101,21 +99,18 @@\n   private MergedAnomalyResultManager anomalyMergedResultDAO;\n   private AlertConfigManager emailConfigurationDAO;\n   private MergedAnomalyResultManager mergedAnomalyResultDAO;\n-  private AutotuneConfigManager autotuneConfigDAO;\n   private DatasetConfigManager datasetConfigDAO;\n   private AnomalyFunctionFactory anomalyFunctionFactory;\n   private AlertFilterFactory alertFilterFactory;\n   private LoadingCache<String, Long> collectionMaxDataTimeCache;\n \n   private static final DAORegistry DAO_REGISTRY = DAORegistry.getInstance();\n \n-  public AnomalyResource(AnomalyFunctionFactory anomalyFunctionFactory, AlertFilterFactory alertFilterFactory,\n-      AlertFilterAutotuneFactory alertFilterAutotuneFactory) {\n+  public AnomalyResource(AnomalyFunctionFactory anomalyFunctionFactory, AlertFilterFactory alertFilterFactory) {\n     this.anomalyFunctionDAO = DAO_REGISTRY.getAnomalyFunctionDAO();\n     this.anomalyMergedResultDAO = DAO_REGISTRY.getMergedAnomalyResultDAO();\n     this.emailConfigurationDAO = DAO_REGISTRY.getAlertConfigDAO();\n     this.mergedAnomalyResultDAO = DAO_REGISTRY.getMergedAnomalyResultDAO();\n-    this.autotuneConfigDAO = DAO_REGISTRY.getAutotuneConfigDAO();\n     this.datasetConfigDAO = DAO_REGISTRY.getDatasetConfigDAO();\n     this.anomalyFunctionFactory = anomalyFunctionFactory;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MzcyNzg1OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/AnomalyResource.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNTozMDoyM1rOGa57PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwMDoyNDowNlrOGcvbqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NTIxMw==", "bodyText": "Not used.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430865213", "createdAt": "2020-05-27T05:30:23Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/AnomalyResource.java", "diffHunk": "@@ -101,21 +99,18 @@\n   private MergedAnomalyResultManager anomalyMergedResultDAO;\n   private AlertConfigManager emailConfigurationDAO;\n   private MergedAnomalyResultManager mergedAnomalyResultDAO;\n-  private AutotuneConfigManager autotuneConfigDAO;\n   private DatasetConfigManager datasetConfigDAO;\n   private AnomalyFunctionFactory anomalyFunctionFactory;\n   private AlertFilterFactory alertFilterFactory;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjc5MDQ0MA==", "bodyText": "It is used in line 141.\nanomalyResults = AlertFilterHelper.applyFiltrationRule(anomalyResults, alertFilterFactory);", "url": "https://github.com/apache/pinot/pull/5435#discussion_r432790440", "createdAt": "2020-05-30T00:24:06Z", "author": {"login": "vincentchenjl"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/AnomalyResource.java", "diffHunk": "@@ -101,21 +99,18 @@\n   private MergedAnomalyResultManager anomalyMergedResultDAO;\n   private AlertConfigManager emailConfigurationDAO;\n   private MergedAnomalyResultManager mergedAnomalyResultDAO;\n-  private AutotuneConfigManager autotuneConfigDAO;\n   private DatasetConfigManager datasetConfigDAO;\n   private AnomalyFunctionFactory anomalyFunctionFactory;\n   private AlertFilterFactory alertFilterFactory;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NTIxMw=="}, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MzcyOTk4OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/datalayer/pojo/DatasetConfigBean.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNTozMTowNVrOGa58bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNTozMTowNVrOGa58bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NTUxOQ==", "bodyText": "Not used.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430865519", "createdAt": "2020-05-27T05:31:05Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/datalayer/pojo/DatasetConfigBean.java", "diffHunk": "@@ -93,10 +89,6 @@\n   private boolean requiresCompletenessCheck = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MzczMTUyOnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/test/java/org/apache/pinot/thirdeye/datalayer/DaoTestUtils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNTozMTo1NFrOGa59Vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMToxMzo0NVrOGbibDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NTc1MA==", "bodyText": "Not used.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r430865750", "createdAt": "2020-05-27T05:31:54Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/test/java/org/apache/pinot/thirdeye/datalayer/DaoTestUtils.java", "diffHunk": "@@ -275,22 +273,6 @@ public static DetectionStatusDTO getTestDetectionStatus(String dataset, long dat\n     return detectionStatusDTO;\n   }\n \n-  public static AutotuneConfigDTO getTestAutotuneConfig(long functionId, long start, long end) {\n-    AutotuneConfigDTO autotuneConfigDTO = new AutotuneConfigDTO();\n-    autotuneConfigDTO.setFunctionId(functionId);\n-    autotuneConfigDTO.setStartTime(start);\n-    autotuneConfigDTO.setEndTime(end);\n-    autotuneConfigDTO.setPerformanceEvaluationMethod(PerformanceEvaluationMethod.ANOMALY_PERCENTAGE);\n-    autotuneConfigDTO.setLastUpdateTimestamp(DateTime.now().getMillis());\n-    Map<String, String> config = new HashMap<>();\n-    config.put(\"ConfigKey\", \"ConfigValue\");\n-    autotuneConfigDTO.setConfiguration(config);\n-    Map<String, Double> performance = new HashMap<>();\n-    performance.put(autotuneConfigDTO.getPerformanceEvaluationMethod().name(), 0.5);\n-    autotuneConfigDTO.setPerformance(performance);\n-    return autotuneConfigDTO;\n-  }\n-\n   public static ClassificationConfigDTO getTestClassificationConfig(String name, List<Long> mainFunctionIdList,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTUyODcxNw==", "bodyText": "This can be removed in next PR with all the unused DAO objects.", "url": "https://github.com/apache/pinot/pull/5435#discussion_r431528717", "createdAt": "2020-05-28T01:13:45Z", "author": {"login": "vincentchenjl"}, "path": "thirdeye/thirdeye-pinot/src/test/java/org/apache/pinot/thirdeye/datalayer/DaoTestUtils.java", "diffHunk": "@@ -275,22 +273,6 @@ public static DetectionStatusDTO getTestDetectionStatus(String dataset, long dat\n     return detectionStatusDTO;\n   }\n \n-  public static AutotuneConfigDTO getTestAutotuneConfig(long functionId, long start, long end) {\n-    AutotuneConfigDTO autotuneConfigDTO = new AutotuneConfigDTO();\n-    autotuneConfigDTO.setFunctionId(functionId);\n-    autotuneConfigDTO.setStartTime(start);\n-    autotuneConfigDTO.setEndTime(end);\n-    autotuneConfigDTO.setPerformanceEvaluationMethod(PerformanceEvaluationMethod.ANOMALY_PERCENTAGE);\n-    autotuneConfigDTO.setLastUpdateTimestamp(DateTime.now().getMillis());\n-    Map<String, String> config = new HashMap<>();\n-    config.put(\"ConfigKey\", \"ConfigValue\");\n-    autotuneConfigDTO.setConfiguration(config);\n-    Map<String, Double> performance = new HashMap<>();\n-    performance.put(autotuneConfigDTO.getPerformanceEvaluationMethod().name(), 0.5);\n-    autotuneConfigDTO.setPerformance(performance);\n-    return autotuneConfigDTO;\n-  }\n-\n   public static ClassificationConfigDTO getTestClassificationConfig(String name, List<Long> mainFunctionIdList,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NTc1MA=="}, "originalCommit": {"oid": "6f6e945a49fecadf9acc246240153c938b855d35"}, "originalPosition": 44}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4469, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}