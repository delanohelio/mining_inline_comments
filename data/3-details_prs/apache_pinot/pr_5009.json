{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NTMxODU4", "number": 5009, "title": "[TE] auto enable data-availaibity trigger for PINOT detections withou\u2026", "bodyText": "\u2026t cron", "createdAt": "2020-01-23T19:40:33Z", "url": "https://github.com/apache/pinot/pull/5009", "merged": true, "mergeCommit": {"oid": "0c1be2fe52a07c482f40460c7e4d1dc2558b8d8e"}, "closed": true, "closedAt": "2020-01-29T18:41:56Z", "author": {"login": "vincentchenjl"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9Po2JAH2gAyMzY2NTMxODU4OjA1YzAwMmRkYTlhN2E2NzhhMzQyOTNiYmZmYWU5YmU0YzdjMmIzNmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-lRWGAFqTM0OTA0NTA3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "05c002dda9a7a678a34293bbffae9be4c7c2b36e", "author": {"user": {"login": "vincentchenjl", "name": "Vincent Chen"}}, "url": "https://github.com/apache/pinot/commit/05c002dda9a7a678a34293bbffae9be4c7c2b36e", "committedDate": "2020-01-23T19:37:30Z", "message": "[TE] auto enable data-availaibity trigger for PINOT detections without cron"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NTc1MzY2", "url": "https://github.com/apache/pinot/pull/5009#pullrequestreview-347575366", "createdAt": "2020-01-23T20:09:27Z", "commit": {"oid": "05c002dda9a7a678a34293bbffae9be4c7c2b36e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QyMDowOToyN1rOFhLJPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QyMDowOToyN1rOFhLJPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMyOTkxNg==", "bodyText": "Why this is a TODO?", "url": "https://github.com/apache/pinot/pull/5009#discussion_r370329916", "createdAt": "2020-01-23T20:09:27Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/detection/yaml/translator/DetectionConfigTranslator.java", "diffHunk": "@@ -530,6 +535,11 @@ private DetectionConfigDTO generateDetectionConfig(Map<String, Object> yamlConfi\n     config.setActive(MapUtils.getBooleanValue(yamlConfigMap, PROP_ACTIVE, true));\n     config.setYaml(yamlConfig);\n \n+    //TODO: data-availability trigger is only enabled for detections running on PINOT only", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05c002dda9a7a678a34293bbffae9be4c7c2b36e"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MDkyODM4", "url": "https://github.com/apache/pinot/pull/5009#pullrequestreview-348092838", "createdAt": "2020-01-24T17:00:45Z", "commit": {"oid": "05c002dda9a7a678a34293bbffae9be4c7c2b36e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTU5MjM1", "url": "https://github.com/apache/pinot/pull/5009#pullrequestreview-348959235", "createdAt": "2020-01-27T20:39:53Z", "commit": {"oid": "05c002dda9a7a678a34293bbffae9be4c7c2b36e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMDozOTo1M1rOFiQv-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMDo0MDozOFrOFiQxJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ3MDMzMA==", "bodyText": "Let's not add TODO here since this is a new feature request not a code refactor or tech debt. :)\nWe don't have ETA for getting event data for other datasets.", "url": "https://github.com/apache/pinot/pull/5009#discussion_r371470330", "createdAt": "2020-01-27T20:39:53Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/detection/yaml/translator/DetectionConfigTranslator.java", "diffHunk": "@@ -530,6 +535,11 @@ private DetectionConfigDTO generateDetectionConfig(Map<String, Object> yamlConfi\n     config.setActive(MapUtils.getBooleanValue(yamlConfigMap, PROP_ACTIVE, true));\n     config.setYaml(yamlConfig);\n \n+    //TODO: data-availability trigger is only enabled for detections running on PINOT only", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMyOTkxNg=="}, "originalCommit": {"oid": "05c002dda9a7a678a34293bbffae9be4c7c2b36e"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ3MDYyOQ==", "bodyText": "Need to check if this is daily/weekly detection.", "url": "https://github.com/apache/pinot/pull/5009#discussion_r371470629", "createdAt": "2020-01-27T20:40:38Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/detection/yaml/translator/DetectionConfigTranslator.java", "diffHunk": "@@ -530,6 +535,11 @@ private DetectionConfigDTO generateDetectionConfig(Map<String, Object> yamlConfi\n     config.setActive(MapUtils.getBooleanValue(yamlConfigMap, PROP_ACTIVE, true));\n     config.setYaml(yamlConfig);\n \n+    //TODO: data-availability trigger is only enabled for detections running on PINOT only\n+    if (MapUtils.getString(yamlConfigMap, PROP_CRON) == null\n+        && datasetConfigs.stream().allMatch(c -> c.getDataSource().equals(PinotThirdEyeDataSource.DATA_SOURCE_NAME))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05c002dda9a7a678a34293bbffae9be4c7c2b36e"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8daba6f32402ac2fb12a071e7c5b3de58dab711b", "author": {"user": {"login": "vincentchenjl", "name": "Vincent Chen"}}, "url": "https://github.com/apache/pinot/commit/8daba6f32402ac2fb12a071e7c5b3de58dab711b", "committedDate": "2020-01-27T22:23:26Z", "message": "add check for dataset granularity"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDQ1MDc1", "url": "https://github.com/apache/pinot/pull/5009#pullrequestreview-349045075", "createdAt": "2020-01-27T23:23:40Z", "commit": {"oid": "8daba6f32402ac2fb12a071e7c5b3de58dab711b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1522, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}