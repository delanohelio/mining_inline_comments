{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwMzk4ODgw", "number": 5710, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxODo0NTo1NFrOEPQeNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMTowMToyN1rOEPTciA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NDMzOTczOnYy", "diffSide": "RIGHT", "path": "pinot-core/src/main/java/org/apache/pinot/core/realtime/converter/RealtimeSegmentConverter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxODo0NTo1NFrOGy36jA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxOTowNjo0MVrOGy4nZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk5ODA5Mg==", "bodyText": "Let's remove the extra constructors and just keep one (easier to use).\nThe only usage of them is RealtimeSegmentConverterTest.testNoVirtualColumnsInSchema(), where you can make RealtimeSegmentConverter.getUpdatedSchema() static", "url": "https://github.com/apache/pinot/pull/5710#discussion_r455998092", "createdAt": "2020-07-16T18:45:54Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/realtime/converter/RealtimeSegmentConverter.java", "diffHunk": "@@ -82,14 +83,14 @@ public RealtimeSegmentConverter(MutableSegmentImpl realtimeSegment, String outpu\n       List<String> invertedIndexColumns, List<String> noDictionaryColumns, List<String> varLengthDictionaryColumns,\n       boolean nullHandlingEnabled) {\n     this(realtimeSegment, outputPath, schema, tableName, tableConfig, segmentName, sortedColumn,\n-        invertedIndexColumns, new ArrayList<>(), noDictionaryColumns, varLengthDictionaryColumns, nullHandlingEnabled);\n+        invertedIndexColumns, Collections.emptyList(), noDictionaryColumns, varLengthDictionaryColumns, nullHandlingEnabled);\n   }\n \n   // Used in RealtimeSegmentConverterTest\n   public RealtimeSegmentConverter(MutableSegmentImpl realtimeSegment, String outputPath, Schema schema,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc174beede9fb00b41503c13d521d10d5434ed76"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAwOTU3Mg==", "bodyText": "done", "url": "https://github.com/apache/pinot/pull/5710#discussion_r456009572", "createdAt": "2020-07-16T19:06:41Z", "author": {"login": "siddharthteotia"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/realtime/converter/RealtimeSegmentConverter.java", "diffHunk": "@@ -82,14 +83,14 @@ public RealtimeSegmentConverter(MutableSegmentImpl realtimeSegment, String outpu\n       List<String> invertedIndexColumns, List<String> noDictionaryColumns, List<String> varLengthDictionaryColumns,\n       boolean nullHandlingEnabled) {\n     this(realtimeSegment, outputPath, schema, tableName, tableConfig, segmentName, sortedColumn,\n-        invertedIndexColumns, new ArrayList<>(), noDictionaryColumns, varLengthDictionaryColumns, nullHandlingEnabled);\n+        invertedIndexColumns, Collections.emptyList(), noDictionaryColumns, varLengthDictionaryColumns, nullHandlingEnabled);\n   }\n \n   // Used in RealtimeSegmentConverterTest\n   public RealtimeSegmentConverter(MutableSegmentImpl realtimeSegment, String outputPath, Schema schema,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk5ODA5Mg=="}, "originalCommit": {"oid": "dc174beede9fb00b41503c13d521d10d5434ed76"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NDM0MjY3OnYy", "diffSide": "RIGHT", "path": "pinot-core/src/main/java/org/apache/pinot/core/data/manager/realtime/HLRealtimeSegmentDataManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxODo0Njo1M1rOGy38bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxOTowNjo1MFrOGy4nrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk5ODU3Mg==", "bodyText": "(nit) Remove HLRealtimeSegmentDataManager.this.", "url": "https://github.com/apache/pinot/pull/5710#discussion_r455998572", "createdAt": "2020-07-16T18:46:53Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/data/manager/realtime/HLRealtimeSegmentDataManager.java", "diffHunk": "@@ -287,8 +287,7 @@ public void run() {\n               new RealtimeSegmentConverter(_realtimeSegment, tempSegmentFolder.getAbsolutePath(), schema,\n                   _tableNameWithType, tableConfig, realtimeSegmentZKMetadata.getSegmentName(), _sortedColumn,\n                   HLRealtimeSegmentDataManager.this._invertedIndexColumns, _noDictionaryColumns,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc174beede9fb00b41503c13d521d10d5434ed76"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAwOTY0Ng==", "bodyText": "done", "url": "https://github.com/apache/pinot/pull/5710#discussion_r456009646", "createdAt": "2020-07-16T19:06:50Z", "author": {"login": "siddharthteotia"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/data/manager/realtime/HLRealtimeSegmentDataManager.java", "diffHunk": "@@ -287,8 +287,7 @@ public void run() {\n               new RealtimeSegmentConverter(_realtimeSegment, tempSegmentFolder.getAbsolutePath(), schema,\n                   _tableNameWithType, tableConfig, realtimeSegmentZKMetadata.getSegmentName(), _sortedColumn,\n                   HLRealtimeSegmentDataManager.this._invertedIndexColumns, _noDictionaryColumns,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk5ODU3Mg=="}, "originalCommit": {"oid": "dc174beede9fb00b41503c13d521d10d5434ed76"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NDM0NjIzOnYy", "diffSide": "RIGHT", "path": "pinot-core/src/main/java/org/apache/pinot/core/data/manager/realtime/HLRealtimeSegmentDataManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxODo0Nzo1NVrOGy3-qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxODo1ODowMFrOGy4Uog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk5OTE0Nw==", "bodyText": "We should support text index for HLC", "url": "https://github.com/apache/pinot/pull/5710#discussion_r455999147", "createdAt": "2020-07-16T18:47:55Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/data/manager/realtime/HLRealtimeSegmentDataManager.java", "diffHunk": "@@ -287,8 +287,7 @@ public void run() {\n               new RealtimeSegmentConverter(_realtimeSegment, tempSegmentFolder.getAbsolutePath(), schema,\n                   _tableNameWithType, tableConfig, realtimeSegmentZKMetadata.getSegmentName(), _sortedColumn,\n                   HLRealtimeSegmentDataManager.this._invertedIndexColumns, _noDictionaryColumns,\n-                  _varLengthDictionaryColumns, null/*StarTreeIndexSpec*/,\n-                  indexingConfig.isNullHandlingEnabled()); // Star tree not supported for HLC.\n+                  _varLengthDictionaryColumns, indexingConfig.isNullHandlingEnabled());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc174beede9fb00b41503c13d521d10d5434ed76"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAwNDc3MA==", "bodyText": "It is there for LLC already. Will add for HLC as well", "url": "https://github.com/apache/pinot/pull/5710#discussion_r456004770", "createdAt": "2020-07-16T18:58:00Z", "author": {"login": "siddharthteotia"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/data/manager/realtime/HLRealtimeSegmentDataManager.java", "diffHunk": "@@ -287,8 +287,7 @@ public void run() {\n               new RealtimeSegmentConverter(_realtimeSegment, tempSegmentFolder.getAbsolutePath(), schema,\n                   _tableNameWithType, tableConfig, realtimeSegmentZKMetadata.getSegmentName(), _sortedColumn,\n                   HLRealtimeSegmentDataManager.this._invertedIndexColumns, _noDictionaryColumns,\n-                  _varLengthDictionaryColumns, null/*StarTreeIndexSpec*/,\n-                  indexingConfig.isNullHandlingEnabled()); // Star tree not supported for HLC.\n+                  _varLengthDictionaryColumns, indexingConfig.isNullHandlingEnabled());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk5OTE0Nw=="}, "originalCommit": {"oid": "dc174beede9fb00b41503c13d521d10d5434ed76"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NDgyMjkxOnYy", "diffSide": "RIGHT", "path": "pinot-core/src/test/java/org/apache/pinot/realtime/converter/RealtimeSegmentConverterTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMTowMDoxM1rOGy8mkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMToxNToyOVrOGy9DSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA3NDg5OA==", "bodyText": "Remove the unused table config", "url": "https://github.com/apache/pinot/pull/5710#discussion_r456074898", "createdAt": "2020-07-16T21:00:13Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-core/src/test/java/org/apache/pinot/realtime/converter/RealtimeSegmentConverterTest.java", "diffHunk": "@@ -46,11 +46,7 @@ public void testNoVirtualColumnsInSchema() {\n     String segmentName = \"segment1\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f880b848003aa34f2c9928d1b3951aa1b6c3d92"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA4MjI0OA==", "bodyText": "done", "url": "https://github.com/apache/pinot/pull/5710#discussion_r456082248", "createdAt": "2020-07-16T21:15:29Z", "author": {"login": "siddharthteotia"}, "path": "pinot-core/src/test/java/org/apache/pinot/realtime/converter/RealtimeSegmentConverterTest.java", "diffHunk": "@@ -46,11 +46,7 @@ public void testNoVirtualColumnsInSchema() {\n     String segmentName = \"segment1\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA3NDg5OA=="}, "originalCommit": {"oid": "7f880b848003aa34f2c9928d1b3951aa1b6c3d92"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NDgyNjk2OnYy", "diffSide": "RIGHT", "path": "pinot-core/src/main/java/org/apache/pinot/core/data/manager/realtime/HLRealtimeSegmentDataManager.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMTowMToyN1rOGy8pKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMTowMToyN1rOGy8pKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA3NTU2Mg==", "bodyText": "Are you planning to add text index support for HLC in a separate PR?", "url": "https://github.com/apache/pinot/pull/5710#discussion_r456075562", "createdAt": "2020-07-16T21:01:27Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/data/manager/realtime/HLRealtimeSegmentDataManager.java", "diffHunk": "@@ -286,9 +287,8 @@ public void run() {\n           RealtimeSegmentConverter converter =\n               new RealtimeSegmentConverter(_realtimeSegment, tempSegmentFolder.getAbsolutePath(), schema,\n                   _tableNameWithType, tableConfig, realtimeSegmentZKMetadata.getSegmentName(), _sortedColumn,\n-                  HLRealtimeSegmentDataManager.this._invertedIndexColumns, _noDictionaryColumns,\n-                  _varLengthDictionaryColumns, null/*StarTreeIndexSpec*/,\n-                  indexingConfig.isNullHandlingEnabled()); // Star tree not supported for HLC.\n+                  _invertedIndexColumns, Collections.emptyList(), _noDictionaryColumns, _varLengthDictionaryColumns,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f880b848003aa34f2c9928d1b3951aa1b6c3d92"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4129, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}