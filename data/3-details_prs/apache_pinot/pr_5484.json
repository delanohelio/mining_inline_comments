{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MzE4ODY3", "number": 5484, "title": "Extract all fields if fieldsToRead is null/empty", "bodyText": "Description\nIn the RecordExtractors, if fieldsToRead is null/empty, extract all fields from the record. Doing this for JSON and AVRO for starters. The fieldsToRead can become as the \"includeList\". In the future we can introduce an \"excludeList\". This will all be useful once we start doing advanced flattening (e.g. flatten everything, include x,y exclude p,q,r)\nAdditionally, removing some sample groovy schemas, as we stopped using them when the refactoring to exclude Schema from RecordReaders/Decoders was done.\nFollowup: do the same for all extractors\nUpgrade Notes\nNA\nDocumentation\nNA", "createdAt": "2020-06-02T02:55:00Z", "url": "https://github.com/apache/pinot/pull/5484", "merged": true, "mergeCommit": {"oid": "572c7500b4d7d06a3e9ae4a59569f3763aa81469"}, "closed": true, "closedAt": "2020-06-03T21:29:22Z", "author": {"login": "npawar"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnLsT4gH2gAyNDI2MzE4ODY3OjQyNmQ4OTRiMjUyMGU2YjVkNzM0NjJhZTJhNmQ5ZDRjMjE2ZThkOGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnvUCOgH2gAyNDI2MzE4ODY3OmI5MmEzMDQwMGE4ODY4ZTQ0MDlmYTZmZGNlZTA4ZmVmZGNmN2U4MzA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "426d894b2520e6b5d73462ae2a6d9d4c216e8d8e", "author": {"user": {"login": "npawar", "name": "Neha Pawar"}}, "url": "https://github.com/apache/pinot/commit/426d894b2520e6b5d73462ae2a6d9d4c216e8d8e", "committedDate": "2020-06-02T02:46:29Z", "message": "Extract all fields if fieldsToRead is null/empty"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aff98272d7de54522a48ec8da1ecde289d1ac567", "author": {"user": {"login": "npawar", "name": "Neha Pawar"}}, "url": "https://github.com/apache/pinot/commit/aff98272d7de54522a48ec8da1ecde289d1ac567", "committedDate": "2020-06-02T02:54:13Z", "message": "Comment, remove dependency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11f45938d108460d55b776198292741de65b7572", "author": {"user": {"login": "npawar", "name": "Neha Pawar"}}, "url": "https://github.com/apache/pinot/commit/11f45938d108460d55b776198292741de65b7572", "committedDate": "2020-06-02T16:36:57Z", "message": "avro dependency to pinot-spi"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzODI1MjA1", "url": "https://github.com/apache/pinot/pull/5484#pullrequestreview-423825205", "createdAt": "2020-06-03T18:34:26Z", "commit": {"oid": "11f45938d108460d55b776198292741de65b7572"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxODozNDoyN1rOGeofEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxODozNTo1NFrOGeoiNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc3Mzc3Nw==", "bodyText": "update the javadoc for streamdecoder with the new contract", "url": "https://github.com/apache/pinot/pull/5484#discussion_r434773777", "createdAt": "2020-06-03T18:34:27Z", "author": {"login": "kishoreg"}, "path": "pinot-plugins/pinot-input-format/pinot-avro-base/src/main/java/org/apache/pinot/plugin/inputformat/avro/AvroRecordExtractor.java", "diffHunk": "@@ -39,10 +42,15 @@ public void init(Set<String> fields, @Nullable RecordExtractorConfig recordExtra\n \n   @Override\n   public GenericRow extract(GenericRecord from, GenericRow to) {\n-    for (String fieldName : _fields) {\n-      Object value = from.get(fieldName);\n-      Object convertedValue = AvroUtils.convert(value);\n-      to.putValue(fieldName, convertedValue);\n+    if (_fields == null || _fields.isEmpty()) { // extract all", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11f45938d108460d55b776198292741de65b7572"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc3NDU4Mw==", "bodyText": "since we know this in the init, can we set a final boolean _extractAll? jvm might be able to optimize it.", "url": "https://github.com/apache/pinot/pull/5484#discussion_r434774583", "createdAt": "2020-06-03T18:35:54Z", "author": {"login": "kishoreg"}, "path": "pinot-plugins/pinot-input-format/pinot-avro-base/src/main/java/org/apache/pinot/plugin/inputformat/avro/AvroRecordExtractor.java", "diffHunk": "@@ -39,10 +42,15 @@ public void init(Set<String> fields, @Nullable RecordExtractorConfig recordExtra\n \n   @Override\n   public GenericRow extract(GenericRecord from, GenericRow to) {\n-    for (String fieldName : _fields) {\n-      Object value = from.get(fieldName);\n-      Object convertedValue = AvroUtils.convert(value);\n-      to.putValue(fieldName, convertedValue);\n+    if (_fields == null || _fields.isEmpty()) { // extract all", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11f45938d108460d55b776198292741de65b7572"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b92a30400a8868e4409fa6fdcee08fefdcf7e830", "author": {"user": {"login": "npawar", "name": "Neha Pawar"}}, "url": "https://github.com/apache/pinot/commit/b92a30400a8868e4409fa6fdcee08fefdcf7e830", "committedDate": "2020-06-03T20:16:33Z", "message": "Javadoc and _extractAll field"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 892, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}