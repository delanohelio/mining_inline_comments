{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwMzk4ODgw", "number": 5710, "title": "Cleanup the call to RealtimeSegmentConverter from HLCDataManager", "bodyText": "After the removal of old star tree spec, the calls to constructor were not correct.", "createdAt": "2020-07-16T18:13:53Z", "url": "https://github.com/apache/pinot/pull/5710", "merged": true, "mergeCommit": {"oid": "a4cab5d61b3b8b582a44e1eccc3221ed616d004a"}, "closed": true, "closedAt": "2020-07-16T21:23:34Z", "author": {"login": "siddharthteotia"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1j0bugFqTQ1MDExOTExOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1l63PgBqjM1NTUxOTQ5NjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMTE5MTE4", "url": "https://github.com/apache/pinot/pull/5710#pullrequestreview-450119118", "createdAt": "2020-07-16T18:45:54Z", "commit": {"oid": "dc174beede9fb00b41503c13d521d10d5434ed76"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxODo0NTo1NFrOGy36jA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxODo0Nzo1NVrOGy3-qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk5ODA5Mg==", "bodyText": "Let's remove the extra constructors and just keep one (easier to use).\nThe only usage of them is RealtimeSegmentConverterTest.testNoVirtualColumnsInSchema(), where you can make RealtimeSegmentConverter.getUpdatedSchema() static", "url": "https://github.com/apache/pinot/pull/5710#discussion_r455998092", "createdAt": "2020-07-16T18:45:54Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/realtime/converter/RealtimeSegmentConverter.java", "diffHunk": "@@ -82,14 +83,14 @@ public RealtimeSegmentConverter(MutableSegmentImpl realtimeSegment, String outpu\n       List<String> invertedIndexColumns, List<String> noDictionaryColumns, List<String> varLengthDictionaryColumns,\n       boolean nullHandlingEnabled) {\n     this(realtimeSegment, outputPath, schema, tableName, tableConfig, segmentName, sortedColumn,\n-        invertedIndexColumns, new ArrayList<>(), noDictionaryColumns, varLengthDictionaryColumns, nullHandlingEnabled);\n+        invertedIndexColumns, Collections.emptyList(), noDictionaryColumns, varLengthDictionaryColumns, nullHandlingEnabled);\n   }\n \n   // Used in RealtimeSegmentConverterTest\n   public RealtimeSegmentConverter(MutableSegmentImpl realtimeSegment, String outputPath, Schema schema,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc174beede9fb00b41503c13d521d10d5434ed76"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk5ODU3Mg==", "bodyText": "(nit) Remove HLRealtimeSegmentDataManager.this.", "url": "https://github.com/apache/pinot/pull/5710#discussion_r455998572", "createdAt": "2020-07-16T18:46:53Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/data/manager/realtime/HLRealtimeSegmentDataManager.java", "diffHunk": "@@ -287,8 +287,7 @@ public void run() {\n               new RealtimeSegmentConverter(_realtimeSegment, tempSegmentFolder.getAbsolutePath(), schema,\n                   _tableNameWithType, tableConfig, realtimeSegmentZKMetadata.getSegmentName(), _sortedColumn,\n                   HLRealtimeSegmentDataManager.this._invertedIndexColumns, _noDictionaryColumns,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc174beede9fb00b41503c13d521d10d5434ed76"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk5OTE0Nw==", "bodyText": "We should support text index for HLC", "url": "https://github.com/apache/pinot/pull/5710#discussion_r455999147", "createdAt": "2020-07-16T18:47:55Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/data/manager/realtime/HLRealtimeSegmentDataManager.java", "diffHunk": "@@ -287,8 +287,7 @@ public void run() {\n               new RealtimeSegmentConverter(_realtimeSegment, tempSegmentFolder.getAbsolutePath(), schema,\n                   _tableNameWithType, tableConfig, realtimeSegmentZKMetadata.getSegmentName(), _sortedColumn,\n                   HLRealtimeSegmentDataManager.this._invertedIndexColumns, _noDictionaryColumns,\n-                  _varLengthDictionaryColumns, null/*StarTreeIndexSpec*/,\n-                  indexingConfig.isNullHandlingEnabled()); // Star tree not supported for HLC.\n+                  _varLengthDictionaryColumns, indexingConfig.isNullHandlingEnabled());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc174beede9fb00b41503c13d521d10d5434ed76"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMjEyNTYy", "url": "https://github.com/apache/pinot/pull/5710#pullrequestreview-450212562", "createdAt": "2020-07-16T21:00:13Z", "commit": {"oid": "7f880b848003aa34f2c9928d1b3951aa1b6c3d92"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMTowMDoxM1rOGy8mkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMTowMToyN1rOGy8pKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA3NDg5OA==", "bodyText": "Remove the unused table config", "url": "https://github.com/apache/pinot/pull/5710#discussion_r456074898", "createdAt": "2020-07-16T21:00:13Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-core/src/test/java/org/apache/pinot/realtime/converter/RealtimeSegmentConverterTest.java", "diffHunk": "@@ -46,11 +46,7 @@ public void testNoVirtualColumnsInSchema() {\n     String segmentName = \"segment1\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f880b848003aa34f2c9928d1b3951aa1b6c3d92"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA3NTU2Mg==", "bodyText": "Are you planning to add text index support for HLC in a separate PR?", "url": "https://github.com/apache/pinot/pull/5710#discussion_r456075562", "createdAt": "2020-07-16T21:01:27Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/data/manager/realtime/HLRealtimeSegmentDataManager.java", "diffHunk": "@@ -286,9 +287,8 @@ public void run() {\n           RealtimeSegmentConverter converter =\n               new RealtimeSegmentConverter(_realtimeSegment, tempSegmentFolder.getAbsolutePath(), schema,\n                   _tableNameWithType, tableConfig, realtimeSegmentZKMetadata.getSegmentName(), _sortedColumn,\n-                  HLRealtimeSegmentDataManager.this._invertedIndexColumns, _noDictionaryColumns,\n-                  _varLengthDictionaryColumns, null/*StarTreeIndexSpec*/,\n-                  indexingConfig.isNullHandlingEnabled()); // Star tree not supported for HLC.\n+                  _invertedIndexColumns, Collections.emptyList(), _noDictionaryColumns, _varLengthDictionaryColumns,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f880b848003aa34f2c9928d1b3951aa1b6c3d92"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c2e1956e3ed7f3c62617a845a682a652d66463f", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/6c2e1956e3ed7f3c62617a845a682a652d66463f", "committedDate": "2020-07-16T21:14:32Z", "message": "Cleanup the call to RealtimeSegmentConverter\nfrom HLCSegmentDatamanager"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7f880b848003aa34f2c9928d1b3951aa1b6c3d92", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/7f880b848003aa34f2c9928d1b3951aa1b6c3d92", "committedDate": "2020-07-16T19:06:20Z", "message": "review comments"}, "afterCommit": {"oid": "6c2e1956e3ed7f3c62617a845a682a652d66463f", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/6c2e1956e3ed7f3c62617a845a682a652d66463f", "committedDate": "2020-07-16T21:14:32Z", "message": "Cleanup the call to RealtimeSegmentConverter\nfrom HLCSegmentDatamanager"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 357, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}