{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0NTIzNDgz", "number": 5190, "title": "Nightly publish to bintray", "bodyText": "This PR adds code to nightly publish to bintray.\nGoals we achieve in this project:\n\nUpdate Project versions before publishing the jars.\nAll the tests should be run before publishing the jars.\nSet up the pipeline of publishing the release to bintray.\nSet up a cron job that runs every night.\n\nSample Travis build:\nhttps://travis-ci.org/github/apache/incubator-pinot/builds/667567884?utm_medium=notification&utm_source=github_status", "createdAt": "2020-03-27T03:00:01Z", "url": "https://github.com/apache/pinot/pull/5190", "merged": true, "mergeCommit": {"oid": "9cb716f26d57699249164219ce2df1f827baff1f"}, "closed": true, "closedAt": "2020-03-31T05:56:05Z", "author": {"login": "jackjlli"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRoog7gBqjMxNzA4OTA5OTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcS8IzHAFqTM4NDQwOTE2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bb99da292ec3d3fc10c44cdf31e5a285f7fcf3b2", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/bb99da292ec3d3fc10c44cdf31e5a285f7fcf3b2", "committedDate": "2020-03-27T02:58:52Z", "message": "Add logic"}, "afterCommit": {"oid": "379c56066617fa8c4ff48038125ec5c5f8e9fb47", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/379c56066617fa8c4ff48038125ec5c5f8e9fb47", "committedDate": "2020-03-27T04:02:53Z", "message": "Add logic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "379c56066617fa8c4ff48038125ec5c5f8e9fb47", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/379c56066617fa8c4ff48038125ec5c5f8e9fb47", "committedDate": "2020-03-27T04:02:53Z", "message": "Add logic"}, "afterCommit": {"oid": "f01388ae390885cada5613d6dd621732bf70a11c", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/f01388ae390885cada5613d6dd621732bf70a11c", "committedDate": "2020-03-27T04:27:58Z", "message": "Add logic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f01388ae390885cada5613d6dd621732bf70a11c", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/f01388ae390885cada5613d6dd621732bf70a11c", "committedDate": "2020-03-27T04:27:58Z", "message": "Add logic"}, "afterCommit": {"oid": "88df0592d823298baab6a84d0d27897f2c5d57b4", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/88df0592d823298baab6a84d0d27897f2c5d57b4", "committedDate": "2020-03-27T04:42:32Z", "message": "Add logic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "88df0592d823298baab6a84d0d27897f2c5d57b4", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/88df0592d823298baab6a84d0d27897f2c5d57b4", "committedDate": "2020-03-27T04:42:32Z", "message": "Add logic"}, "afterCommit": {"oid": "8344358098a10278dbdc49290aa27c3b82a844e3", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/8344358098a10278dbdc49290aa27c3b82a844e3", "committedDate": "2020-03-27T04:54:00Z", "message": "Add logic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8344358098a10278dbdc49290aa27c3b82a844e3", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/8344358098a10278dbdc49290aa27c3b82a844e3", "committedDate": "2020-03-27T04:54:00Z", "message": "Add logic"}, "afterCommit": {"oid": "6966dfd0a5797076e599c2d8fe9cdc546716e2dc", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/6966dfd0a5797076e599c2d8fe9cdc546716e2dc", "committedDate": "2020-03-27T05:39:43Z", "message": "Add logic"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MTA5Mjg2", "url": "https://github.com/apache/pinot/pull/5190#pullrequestreview-384109286", "createdAt": "2020-03-30T18:12:53Z", "commit": {"oid": "2e991ef6436c0c1bfecfbd1b87e6492818431408"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab32e0b327cfa85d659be11d165edc28c8c4b2ac", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/ab32e0b327cfa85d659be11d165edc28c8c4b2ac", "committedDate": "2020-03-30T18:22:51Z", "message": "Deploy pinot to bintray"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e403e671a7798632d14f922819480a67a1492397", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/e403e671a7798632d14f922819480a67a1492397", "committedDate": "2020-03-30T18:22:51Z", "message": "Fix the build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06c34c3ed77718a9c54936d2e3129ea1fcae61db", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/06c34c3ed77718a9c54936d2e3129ea1fcae61db", "committedDate": "2020-03-30T18:22:51Z", "message": "Testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef10234dab458d3dee6616add4fdbabb75273020", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/ef10234dab458d3dee6616add4fdbabb75273020", "committedDate": "2020-03-30T18:22:51Z", "message": "Add relative path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83eadbb25e3259506dd722f9a982729b5d4cf9ac", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/83eadbb25e3259506dd722f9a982729b5d4cf9ac", "committedDate": "2020-03-30T18:23:17Z", "message": "Change versions before deploying to bintray"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44ee85495858df322d881cbb7e29ad0537253045", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/44ee85495858df322d881cbb7e29ad0537253045", "committedDate": "2020-03-30T18:24:03Z", "message": "Fix pom files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f36c66f6efdf88dd0a4b6bc6802fa13621038895", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/f36c66f6efdf88dd0a4b6bc6802fa13621038895", "committedDate": "2020-03-30T18:25:20Z", "message": "Add logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ead2ca629e514e188cfaf31e2f3fd114baf8efd5", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/ead2ca629e514e188cfaf31e2f3fd114baf8efd5", "committedDate": "2020-03-30T18:25:20Z", "message": "Finalize the PR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86c4c17b14acc70154f56ac9dff43b626dc411d1", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/86c4c17b14acc70154f56ac9dff43b626dc411d1", "committedDate": "2020-03-30T18:33:22Z", "message": "Rebase with master branch"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2e991ef6436c0c1bfecfbd1b87e6492818431408", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/2e991ef6436c0c1bfecfbd1b87e6492818431408", "committedDate": "2020-03-27T17:18:29Z", "message": "Finalize the PR"}, "afterCommit": {"oid": "86c4c17b14acc70154f56ac9dff43b626dc411d1", "author": {"user": {"login": "jackjlli", "name": "Jialiang Li"}}, "url": "https://github.com/apache/pinot/commit/86c4c17b14acc70154f56ac9dff43b626dc411d1", "committedDate": "2020-03-30T18:33:22Z", "message": "Rebase with master branch"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MTMzNTEy", "url": "https://github.com/apache/pinot/pull/5190#pullrequestreview-384133512", "createdAt": "2020-03-30T18:46:13Z", "commit": {"oid": "86c4c17b14acc70154f56ac9dff43b626dc411d1"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxODo0NjoxM1rOF93YZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxODo1Mzo1NlrOF93qgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQxNDgyMQ==", "bodyText": "This will work. Thank you for coming up with this solution. Dealing with versions is very painful in Maven + CI/CD without unreliable -SNAPSHOTs.\nCurious, where did you find inspiration on how achieve this version bumping?", "url": "https://github.com/apache/pinot/pull/5190#discussion_r400414821", "createdAt": "2020-03-30T18:46:13Z", "author": {"login": "mockitoguy"}, "path": ".travis/.travis_nightly_build.sh", "diffHunk": "@@ -0,0 +1,31 @@\n+#!/bin/bash -x\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+#\n+\n+if [ -n \"${DEPLOY_BUILD_OPTS}\" ]; then\n+  echo \"Deploying to bintray\"\n+\n+  BUILD_VERSION=$(grep -E \"<revision>(.*)</revision>\" pom.xml | cut -d'>' -f2 | cut -d'<' -f1)\n+  echo \"Current build version: $BUILD_VERSION${DEV_VERSION}\"\n+  mvn versions:set -DnewVersion=\"$BUILD_VERSION${DEV_VERSION}\" -q -B\n+  mvn versions:commit -q -B", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86c4c17b14acc70154f56ac9dff43b626dc411d1"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQxODEwNg==", "bodyText": "Looks great!", "url": "https://github.com/apache/pinot/pull/5190#discussion_r400418106", "createdAt": "2020-03-30T18:51:47Z", "author": {"login": "mockitoguy"}, "path": "pinot-broker/pom.xml", "diffHunk": "@@ -19,12 +19,14 @@\n     under the License.\n \n -->\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n   <modelVersion>4.0.0</modelVersion>\n   <parent>\n     <artifactId>pinot</artifactId>\n     <groupId>org.apache.pinot</groupId>\n-    <version>0.4.0-SNAPSHOT</version>\n+    <version>${revision}${sha1}</version>\n+    <relativePath>..</relativePath>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86c4c17b14acc70154f56ac9dff43b626dc411d1"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQxOTQ1Ng==", "bodyText": "I asked @varidhigarg to verify if versions like 0.4.0-dev-1, 0.4.0-dev-2 will work with auto-ELR. We believe it should work so please don't block this PR on this verification - it should not be a blocker for merging this in. Thanks!!", "url": "https://github.com/apache/pinot/pull/5190#discussion_r400419456", "createdAt": "2020-03-30T18:53:56Z", "author": {"login": "mockitoguy"}, "path": ".travis/.travis_set_deploy_build_opts.sh", "diffHunk": "@@ -0,0 +1,26 @@\n+#!/bin/bash -x\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+#\n+\n+if [ \"$TRAVIS_EVENT_TYPE\" = \"cron\" ]; then\n+  export DEV_VERSION=\"-dev-${TRAVIS_BUILD_NUMBER}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86c4c17b14acc70154f56ac9dff43b626dc411d1"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NDA5MTY2", "url": "https://github.com/apache/pinot/pull/5190#pullrequestreview-384409166", "createdAt": "2020-03-31T05:20:37Z", "commit": {"oid": "86c4c17b14acc70154f56ac9dff43b626dc411d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNToyMDozN1rOF-Ft0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNToyMDozN1rOF-Ft0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY0OTY4MQ==", "bodyText": "In this case, what will be the behavior of command mvn release how is version been updated there?", "url": "https://github.com/apache/pinot/pull/5190#discussion_r400649681", "createdAt": "2020-03-31T05:20:37Z", "author": {"login": "xiangfu0"}, "path": "pom.xml", "diffHunk": "@@ -96,8 +97,18 @@\n   <!-- Apache project inception year for generating correct NOTICE file for jar bundle. -->\n   <inceptionYear>2018</inceptionYear>\n \n+  <distributionManagement>\n+    <repository>\n+      <id>bintray-linkedin-maven</id>\n+      <name>linkedin-maven</name>\n+      <url>https://api.bintray.com/maven/linkedin/maven/pinot/;publish=1</url>\n+    </repository>\n+  </distributionManagement>\n+\n   <properties>\n     <pinot.root>${basedir}</pinot.root>\n+    <revision>0.4.0</revision>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86c4c17b14acc70154f56ac9dff43b626dc411d1"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1129, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}