{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1MDcyODg4", "number": 5125, "title": "pinot-quickstart companion container for thirdeye", "bodyText": "Expands upon @fx19880617 pinot-thirdeye docker images to enable fully functional startup of ThirdEye as single companion container. The image supports dashboarding, live anomaly detection, and optional data ingestion from pinot. We integrate a dedicated H2 database instance and both, a thirdeye-dashboard process and a thirdeye-controller process. Furthermore, we support multiple startup modes:\n\ndefault - ThirdEye with repo default configs\nephemeral - ThirdEye with mock data generated on the fly (pinot not required)\npinot-quickstart - ThirdEye with auto-ingestion from pinot-quickstart\n\nDocker image build: docker/images/pinot-thirdeye/docker-build.sh\nDocker container launch: docker run --network=pinot-demo --name thirdeye -p 1426:1426 -p 1427:1427 -d thirdeye:latest pinot-quickstart", "createdAt": "2020-03-07T00:12:18Z", "url": "https://github.com/apache/pinot/pull/5125", "merged": true, "mergeCommit": {"oid": "43db343300768692686bc326d6efe9ff056fb891"}, "closed": true, "closedAt": "2020-03-09T17:09:24Z", "author": {"login": "apucher"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcLIILEgH2gAyMzg1MDcyODg4OjcxZjlhNzllMTdjY2ZkZjMwOWEyYWQ2NzgzYjc0ZjgxNGE5MDAxMzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcLKdhqgH2gAyMzg1MDcyODg4OmE0ODE0OWQyMDlhNzA4YzNhZDhlNTZhN2ZkMTEzMTI4YjQwYzhlOGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "71f9a79e17ccfdf309a2ad6783b74f814a900133", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/71f9a79e17ccfdf309a2ad6783b74f814a900133", "committedDate": "2020-03-06T22:47:25Z", "message": "Thirdeye docker image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fbcddb1bb4ef382a2d7247c19286eb0b7d88823", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/3fbcddb1bb4ef382a2d7247c19286eb0b7d88823", "committedDate": "2020-03-06T22:47:25Z", "message": "combo draft"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8acb4c88c01df08dbb9232424ff06f620262f1f", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/f8acb4c88c01df08dbb9232424ff06f620262f1f", "committedDate": "2020-03-06T22:47:25Z", "message": "clean image with ephemeral thirdeye mock data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e06129d4708e795df6784ddec74a46e4f97d0212", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/e06129d4708e795df6784ddec74a46e4f97d0212", "committedDate": "2020-03-06T22:47:25Z", "message": "full front and backend support with dedicated db server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9200d0b2d4f8fd2e112dbb38203db01a5a7ab7ac", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/9200d0b2d4f8fd2e112dbb38203db01a5a7ab7ac", "committedDate": "2020-03-06T23:49:11Z", "message": "database bootstrap with test application"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNjk3MTQy", "url": "https://github.com/apache/pinot/pull/5125#pullrequestreview-370697142", "createdAt": "2020-03-07T00:15:12Z", "commit": {"oid": "9200d0b2d4f8fd2e112dbb38203db01a5a7ab7ac"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMDoxNToxMlrOFzLAGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMDoxNToxMlrOFzLAGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIwMTk0Nw==", "bodyText": "Update this ?", "url": "https://github.com/apache/pinot/pull/5125#discussion_r389201947", "createdAt": "2020-03-07T00:15:12Z", "author": {"login": "xiangfu0"}, "path": "docker/images/pinot-thirdeye/README.md", "diffHunk": "@@ -0,0 +1,114 @@\n+<!--\n+\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+\n+-->\n+\n+# docker-pinot\n+This is a docker image of [Apache Thirdeye](https://github.com/apache/incubator-pinot/tree/master/thirdeye).\n+\n+## How to build a docker image\n+\n+There is a docker build script which will build a given Git repo/branch and tag the image.\n+\n+Usage:\n+\n+```SHELL\n+./docker-build.sh [Docker Tag] [Git Branch] [Pinot Git URL]\n+```\n+\n+This script will check out Pinot Repo `[Pinot Git URL]` on branch `[Git Branch]` and build the docker image for that.\n+\n+The docker image is tagged as `[Docker Tag]`.\n+\n+`Docker Tag`: Name and tag your docker image. Default is `thirdeye:latest`.\n+\n+`Git Branch`: The Pinot branch to build. Default is `master`.\n+\n+`Pinot Git URL`: The Pinot Git Repo to build, users can set it to their own fork. Please note that, the URL is `https://` based, not `git://`. Default is the Apache Repo: `https://github.com/apache/incubator-pinot.git`.\n+\n+* Example of building and tagging a snapshot on your own fork:\n+```SHELL\n+./docker-build.sh thirdeye:latest master https://github.com/apache/incubator-pinot.git\n+```\n+\n+## How to publish a docker image\n+\n+Script `docker-push.sh` publishes a given docker image to your docker registry.\n+\n+In order to push to your own repo, the image needs to be explicitly tagged with the repo name.\n+\n+* Example of publishing a image to [apachepinot/thirdeye](https://cloud.docker.com/u/apachepinot/repository/docker/apachepinot/thirdeye) dockerHub repo.\n+\n+```SHELL\n+docker tag thirdeye:latest apachepinot/thirdeye:latest\n+./docker-push.sh apachepinot/thirdeye:latest\n+```\n+\n+Script `docker-build-and-push.sh` builds and publishes this docker image to your docker registry after build.\n+\n+* Example of building and publishing a image to [apachepinot/thirdeye](https://cloud.docker.com/u/apachepinot/repository/docker/apachepinot/thirdeye) dockerHub repo.\n+\n+```SHELL\n+./docker-build-and-push.sh apachepinot/thirdeye:latest master https://github.com/apache/incubator-pinot.git\n+```\n+\n+## How to Run it\n+\n+The entry point of docker image is `start-thirdeye.sh` script.\n+\n+* Create an isolated bridge network in docker.\n+\n+```SHELL\n+docker network create -d bridge pinot-demo\n+```\n+\n+* Start Pinot Hybrid Quickstart\n+\n+```SHELL\n+docker run \\\n+    --network=pinot-demo \\\n+    --name pinot-quickstart \\\n+    -p 9000:9000 \\\n+    -d apachepinot/pinot:latest QuickStart \\\n+    -type hybrid\n+```\n+\n+* Start ThirdEye backend", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9200d0b2d4f8fd2e112dbb38203db01a5a7ab7ac"}, "originalPosition": 92}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a48149d209a708c3ad8e56a7fd113128b40c8e8e", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/a48149d209a708c3ad8e56a7fd113128b40c8e8e", "committedDate": "2020-03-07T01:30:33Z", "message": "review fixes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1363, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}