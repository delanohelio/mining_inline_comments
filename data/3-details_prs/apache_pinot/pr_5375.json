{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2ODExMzY0", "number": 5375, "title": "Handling a no-arg function in query parsing and expression tree", "bodyText": "select * from T where t > now() fails since we expect arguments. This PR fixes the parsing in calcite SQL and transform expression tree.", "createdAt": "2020-05-12T15:44:58Z", "url": "https://github.com/apache/pinot/pull/5375", "merged": true, "mergeCommit": {"oid": "2e39a2eb7f39df3a87c2a842669388c7466229bd"}, "closed": true, "closedAt": "2020-05-15T03:25:10Z", "author": {"login": "kishoreg"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgl_lkAH2gAyNDE2ODExMzY0Ojc4NjliOGRkM2Y5ODA0MWJhMDRkNTVlNDdhOWFiZmNlYTEwZDZmNTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgnWswgH2gAyNDE2ODExMzY0OmY3ODY1MDcxOGMzZDViNjdmY2NiZTcyZDEwOWQ5OGQ0OTU3YmQwNmQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7869b8dd3f98041ba04d55e47a9abfcea10d6f58", "author": {"user": {"login": "kishoreg", "name": "Kishore Gopalakrishna"}}, "url": "https://github.com/apache/pinot/commit/7869b8dd3f98041ba04d55e47a9abfcea10d6f58", "committedDate": "2020-05-12T15:27:36Z", "message": "Handling a no-arg function in query parsing and expression tree"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwMTg4ODA4", "url": "https://github.com/apache/pinot/pull/5375#pullrequestreview-410188808", "createdAt": "2020-05-12T15:57:22Z", "commit": {"oid": "7869b8dd3f98041ba04d55e47a9abfcea10d6f58"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNTo1NzoyM1rOGUNpgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNTo1NzoyM1rOGUNpgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzg0ODMyMA==", "bodyText": "Not related to this PR -- JVM won't inline this. Let's just do int size = operands.size() before the loop and i < size", "url": "https://github.com/apache/pinot/pull/5375#discussion_r423848320", "createdAt": "2020-05-12T15:57:23Z", "author": {"login": "siddharthteotia"}, "path": "pinot-common/src/main/java/org/apache/pinot/sql/parsers/CalciteSqlParser.java", "diffHunk": "@@ -361,8 +362,10 @@ private static Expression updateComparisonPredicate(Expression expression) {\n         default:\n           List<Expression> operands = functionCall.getOperands();\n           List<Expression> newOperands = new ArrayList<>();\n-          for (int i = 0; i < operands.size(); i++) {\n-            newOperands.add(updateComparisonPredicate(operands.get(i)));\n+          if (operands != null) {\n+            for (int i = 0; i < operands.size(); i++) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7869b8dd3f98041ba04d55e47a9abfcea10d6f58"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwMTkwMDk5", "url": "https://github.com/apache/pinot/pull/5375#pullrequestreview-410190099", "createdAt": "2020-05-12T15:58:42Z", "commit": {"oid": "7869b8dd3f98041ba04d55e47a9abfcea10d6f58"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f78650718c3d5b67fccbe72d109d98d4957bd06d", "author": {"user": {"login": "kishoreg", "name": "Kishore Gopalakrishna"}}, "url": "https://github.com/apache/pinot/commit/f78650718c3d5b67fccbe72d109d98d4957bd06d", "committedDate": "2020-05-12T17:02:45Z", "message": "Addressing comments and added tests that uncovered few more places where we assumed functions have arguments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1032, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}