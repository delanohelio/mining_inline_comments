{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5NzM4MTE1", "number": 5309, "title": "Decouple Schema from RecordReader and StreamMessageDecoder", "bodyText": "RecordReader and StreamMessageDecoder is the entry point for batch and streaming data ingestion. They are expected to be implemented and plugged to provide customized format support.\nTo make the abstraction more crispy and easier to understand, remove the Schema and replace it with fields to read so that users do not need to worry about extracting fields from the Pinot schema when adding a new format.", "createdAt": "2020-04-27T20:46:21Z", "url": "https://github.com/apache/pinot/pull/5309", "merged": true, "mergeCommit": {"oid": "6f384eaae973978c66f4032e02659d5a5947ebc4"}, "closed": true, "closedAt": "2020-04-28T01:45:00Z", "author": {"login": "Jackie-Jiang"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcb2n_6ABqjMyNzc3Nzg0Mzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcb4LsxABqjMyNzgwMjA5NjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58785592c1eae2da79979aedfa5127b8a03e9fc3", "author": {"user": {"login": "Jackie-Jiang", "name": "Xiaotian (Jackie) Jiang"}}, "url": "https://github.com/apache/pinot/commit/58785592c1eae2da79979aedfa5127b8a03e9fc3", "committedDate": "2020-04-27T20:42:24Z", "message": "Decouple Schema from RecordReader and StreamMessageDecoder\n\nRecordReader and StreamMessageDecoder is the entry point for batch and streaming data ingestion.\nThey are expected to be implemented and plugged to provide customized format support.\nAfter removing the Schema from them and replace it with fields to read, customer does not need to understand the Pinot schema in order to add a new format support."}, "afterCommit": {"oid": "14ffea1dd39d38d18b018c29d62d72b3c12e5065", "author": {"user": {"login": "Jackie-Jiang", "name": "Xiaotian (Jackie) Jiang"}}, "url": "https://github.com/apache/pinot/commit/14ffea1dd39d38d18b018c29d62d72b3c12e5065", "committedDate": "2020-04-27T21:59:56Z", "message": "Decouple Schema from RecordReader and StreamMessageDecoder\n\nRecordReader and StreamMessageDecoder is the entry point for batch and streaming data ingestion. They are expected to be implemented and plugged to provide customized format support.\nTo make the abstraction more crispy and easier to understand, remove the Schema and replace it with fields to read so that users do not need to worry about extracting fields from the Pinot schema when adding a new format."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxMzg3NDk0", "url": "https://github.com/apache/pinot/pull/5309#pullrequestreview-401387494", "createdAt": "2020-04-27T23:04:17Z", "commit": {"oid": "14ffea1dd39d38d18b018c29d62d72b3c12e5065"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzowNDoxN1rOGM7UgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzowNDoxN1rOGM7UgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIwODAwMA==", "bodyText": "please remove this comment I had added to javadocs of all Decoder implementations regarding not using schema", "url": "https://github.com/apache/pinot/pull/5309#discussion_r416208000", "createdAt": "2020-04-27T23:04:17Z", "author": {"login": "npawar"}, "path": "pinot-plugins/pinot-stream-ingestion/pinot-kafka-base/src/main/java/org/apache/pinot/plugin/stream/kafka/KafkaJSONMessageDecoder.java", "diffHunk": "@@ -41,12 +40,13 @@\n public class KafkaJSONMessageDecoder implements StreamMessageDecoder<byte[]> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14ffea1dd39d38d18b018c29d62d72b3c12e5065"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxMzg4NzI1", "url": "https://github.com/apache/pinot/pull/5309#pullrequestreview-401388725", "createdAt": "2020-04-27T23:07:14Z", "commit": {"oid": "14ffea1dd39d38d18b018c29d62d72b3c12e5065"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxMzk0NDUw", "url": "https://github.com/apache/pinot/pull/5309#pullrequestreview-401394450", "createdAt": "2020-04-27T23:21:51Z", "commit": {"oid": "14ffea1dd39d38d18b018c29d62d72b3c12e5065"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyMTo1MlrOGM7wug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyMTo1MlrOGM7wug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxNTIyNg==", "bodyText": "Did you leave Schema here for some backward compatibility or you missed this one? Or, because it makes sense to PinotSegmentReader to keep schema?", "url": "https://github.com/apache/pinot/pull/5309#discussion_r416215226", "createdAt": "2020-04-27T23:21:52Z", "author": {"login": "snleee"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/data/readers/MultiplePinotSegmentRecordReader.java", "diffHunk": "@@ -64,7 +63,7 @@ public MultiplePinotSegmentRecordReader(@Nonnull List<File> indexDirs)\n    * @param schema input schema that is a subset of the segment schema\n    * @param sortOrder a list of column names that represent the sorting order\n    */\n-  public MultiplePinotSegmentRecordReader(@Nonnull List<File> indexDirs, @Nullable Schema schema,\n+  public MultiplePinotSegmentRecordReader(List<File> indexDirs, @Nullable Schema schema,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14ffea1dd39d38d18b018c29d62d72b3c12e5065"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2c1338abc7fcd54ec64244fbc4dd04a83df0b7a", "author": {"user": {"login": "Jackie-Jiang", "name": "Xiaotian (Jackie) Jiang"}}, "url": "https://github.com/apache/pinot/commit/e2c1338abc7fcd54ec64244fbc4dd04a83df0b7a", "committedDate": "2020-04-27T23:49:16Z", "message": "Decouple Schema from RecordReader and StreamMessageDecoder\n\nRecordReader and StreamMessageDecoder is the entry point for batch and streaming data ingestion. They are expected to be implemented and plugged to provide customized format support.\nTo make the abstraction more crispy and easier to understand, remove the Schema and replace it with fields to read so that users do not need to worry about extracting fields from the Pinot schema when adding a new format."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14ffea1dd39d38d18b018c29d62d72b3c12e5065", "author": {"user": {"login": "Jackie-Jiang", "name": "Xiaotian (Jackie) Jiang"}}, "url": "https://github.com/apache/pinot/commit/14ffea1dd39d38d18b018c29d62d72b3c12e5065", "committedDate": "2020-04-27T21:59:56Z", "message": "Decouple Schema from RecordReader and StreamMessageDecoder\n\nRecordReader and StreamMessageDecoder is the entry point for batch and streaming data ingestion. They are expected to be implemented and plugged to provide customized format support.\nTo make the abstraction more crispy and easier to understand, remove the Schema and replace it with fields to read so that users do not need to worry about extracting fields from the Pinot schema when adding a new format."}, "afterCommit": {"oid": "e2c1338abc7fcd54ec64244fbc4dd04a83df0b7a", "author": {"user": {"login": "Jackie-Jiang", "name": "Xiaotian (Jackie) Jiang"}}, "url": "https://github.com/apache/pinot/commit/e2c1338abc7fcd54ec64244fbc4dd04a83df0b7a", "committedDate": "2020-04-27T23:49:16Z", "message": "Decouple Schema from RecordReader and StreamMessageDecoder\n\nRecordReader and StreamMessageDecoder is the entry point for batch and streaming data ingestion. They are expected to be implemented and plugged to provide customized format support.\nTo make the abstraction more crispy and easier to understand, remove the Schema and replace it with fields to read so that users do not need to worry about extracting fields from the Pinot schema when adding a new format."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 945, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}