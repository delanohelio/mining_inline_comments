{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNDE3NzE3", "number": 5546, "title": "Handle case sensitivity for PinotQuery within BrokerRequest", "bodyText": "Description\nCurrently the case sensitivity handling only applies to the BrokerRequest, but not to the PinotQuery inside the BrokerRequest.\nThis will cause inconsistent and unexpected behavior when the query engine uses PinotQuery.\nFix this issue by extending the case sensitivity handling to the PinotQuery if it exists.\nNote that because SQL queries are also compiled to BrokerRequest, the case sensitivity handling already applies to both PQL and SQL.\nDeprecate the config key enable.case.insensitive.pql in Helix cluster config and replace it with enable.case.insensitive, but keep backward compatibility.\nUpgrade Notes\nDoes this PR otherwise need attention when creating release notes? Things to consider:\n\nNew configuration options\nDeprecation of configurations\nSignature changes to public methods/interfaces\nNew plugins added or old plugins removed\n\n\n Yes (Please label this PR as release-notes and complete the section on Release Notes)\n\nRelease Notes\nConfig key enable.case.insensitive.pql in Helix cluster config is deprecated, and replaced with enable.case.insensitive.", "createdAt": "2020-06-12T01:42:42Z", "url": "https://github.com/apache/pinot/pull/5546", "merged": true, "mergeCommit": {"oid": "f16522a42d866b649e31eb54c0ed09dbdecd57c6"}, "closed": true, "closedAt": "2020-06-12T22:24:47Z", "author": {"login": "Jackie-Jiang"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqZmbTAFqTQyOTQyNTMyOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqqeE9AFqTQzMDA2NTQ1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NDI1MzI4", "url": "https://github.com/apache/pinot/pull/5546#pullrequestreview-429425328", "createdAt": "2020-06-12T02:39:59Z", "commit": {"oid": "e74d3f070c495e45096f12c038640e8108062fef"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMjozOTo1OVrOGi1NWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMjozOTo1OVrOGi1NWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE3NjUzNw==", "bodyText": "We can add something like enable.case.sensitivity and fall back to enable.case.insensitive.pql? Since it's a pretty simple change, we can include to this PR?", "url": "https://github.com/apache/pinot/pull/5546#discussion_r439176537", "createdAt": "2020-06-12T02:39:59Z", "author": {"login": "snleee"}, "path": "pinot-common/src/main/java/org/apache/pinot/common/utils/CommonConstants.java", "diffHunk": "@@ -40,6 +40,7 @@\n     public static final String LEAD_CONTROLLER_RESOURCE_NAME = \"leadControllerResource\";\n \n     public static final String LEAD_CONTROLLER_RESOURCE_ENABLED_KEY = \"RESOURCE_ENABLED\";\n+    // TODO: Rename this config because it applies to both SQL and PQL\n     public static final String ENABLE_CASE_INSENSITIVE_PQL_KEY = \"enable.case.insensitive.pql\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e74d3f070c495e45096f12c038640e8108062fef"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "135404dab8fe346fa7a6e90290101ac64ce98603", "author": {"user": {"login": "Jackie-Jiang", "name": "Xiaotian (Jackie) Jiang"}}, "url": "https://github.com/apache/pinot/commit/135404dab8fe346fa7a6e90290101ac64ce98603", "committedDate": "2020-06-12T18:28:38Z", "message": "Add config key `enable.case.insensitive` to replace `enable.case.insensitive.pql`"}, "afterCommit": {"oid": "4c5f17c6f1efc31839353f6054d039382b962390", "author": {"user": {"login": "Jackie-Jiang", "name": "Xiaotian (Jackie) Jiang"}}, "url": "https://github.com/apache/pinot/commit/4c5f17c6f1efc31839353f6054d039382b962390", "committedDate": "2020-06-12T21:13:36Z", "message": "Handle case sensitivity for PinotQuery within BrokerRequest\n\nCurrently the case sensitivity handling only applies to the BrokerRequest, but not to the PinotQuery inside the BrokerRequest.\nThis will cause inconsistent and unexpected behavior when the query engine uses PinotQuery.\n\nFix this issue by extending the case sensitivity handling to the PinotQuery if it exists.\nNote that because SQL queries are also compiled to BrokerRequest, the case sensitivity handling already applies to both PQL and SQL.\n\nDeprecate the config key `enable.case.insensitive.pql` in Helix cluster config and replace it with `enable.case.insensitive`, but keep backward compatibility."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b71fa29a3753f09d4432b0e771dbb632d0b3568d", "author": {"user": {"login": "Jackie-Jiang", "name": "Xiaotian (Jackie) Jiang"}}, "url": "https://github.com/apache/pinot/commit/b71fa29a3753f09d4432b0e771dbb632d0b3568d", "committedDate": "2020-06-12T21:20:26Z", "message": "Handle case sensitivity for PinotQuery within BrokerRequest\n\nCurrently the case sensitivity handling only applies to the BrokerRequest, but not to the PinotQuery inside the BrokerRequest.\nThis will cause inconsistent and unexpected behavior when the query engine uses PinotQuery.\n\nFix this issue by extending the case sensitivity handling to the PinotQuery if it exists.\nNote that because SQL queries are also compiled to BrokerRequest, the case sensitivity handling already applies to both PQL and SQL.\n\nDeprecate the config key `enable.case.insensitive.pql` in Helix cluster config and replace it with `enable.case.insensitive`, but keep backward compatibility."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4c5f17c6f1efc31839353f6054d039382b962390", "author": {"user": {"login": "Jackie-Jiang", "name": "Xiaotian (Jackie) Jiang"}}, "url": "https://github.com/apache/pinot/commit/4c5f17c6f1efc31839353f6054d039382b962390", "committedDate": "2020-06-12T21:13:36Z", "message": "Handle case sensitivity for PinotQuery within BrokerRequest\n\nCurrently the case sensitivity handling only applies to the BrokerRequest, but not to the PinotQuery inside the BrokerRequest.\nThis will cause inconsistent and unexpected behavior when the query engine uses PinotQuery.\n\nFix this issue by extending the case sensitivity handling to the PinotQuery if it exists.\nNote that because SQL queries are also compiled to BrokerRequest, the case sensitivity handling already applies to both PQL and SQL.\n\nDeprecate the config key `enable.case.insensitive.pql` in Helix cluster config and replace it with `enable.case.insensitive`, but keep backward compatibility."}, "afterCommit": {"oid": "b71fa29a3753f09d4432b0e771dbb632d0b3568d", "author": {"user": {"login": "Jackie-Jiang", "name": "Xiaotian (Jackie) Jiang"}}, "url": "https://github.com/apache/pinot/commit/b71fa29a3753f09d4432b0e771dbb632d0b3568d", "committedDate": "2020-06-12T21:20:26Z", "message": "Handle case sensitivity for PinotQuery within BrokerRequest\n\nCurrently the case sensitivity handling only applies to the BrokerRequest, but not to the PinotQuery inside the BrokerRequest.\nThis will cause inconsistent and unexpected behavior when the query engine uses PinotQuery.\n\nFix this issue by extending the case sensitivity handling to the PinotQuery if it exists.\nNote that because SQL queries are also compiled to BrokerRequest, the case sensitivity handling already applies to both PQL and SQL.\n\nDeprecate the config key `enable.case.insensitive.pql` in Helix cluster config and replace it with `enable.case.insensitive`, but keep backward compatibility."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMDY1NDU1", "url": "https://github.com/apache/pinot/pull/5546#pullrequestreview-430065455", "createdAt": "2020-06-12T22:19:46Z", "commit": {"oid": "b71fa29a3753f09d4432b0e771dbb632d0b3568d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 591, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}