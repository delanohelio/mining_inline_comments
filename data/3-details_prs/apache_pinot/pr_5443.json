{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyOTM3MDEy", "number": 5443, "title": "Add broker request info to the error msg in combine operator.", "bodyText": "Current log indicates exception/timeout in combine operator but\nthis does not give much information for debugging. Adding broker\nrequest to the log will help for debugging.\nselect * from testTable where time > 12345 group by a, b order by a limit 100\n\nBrokerRequest(querySource:QuerySource(tableName:testTable), filterQuery:FilterQuery(id:0, column:time, value:[(12345\t\t*)], operator:RANGE, nestedFilterQueryIds:[]), groupBy:GroupBy(topN:100, expressions:[a, b]), selections:Selection(selectionColumns:[*], selectionSortSequence:[SelectionSort(column:a, isAsc:true)], offset:0, size:100), filterSubQueryMap:FilterQueryMap(filterQueryMap:{0=FilterQuery(id:0, column:time, value:[(12345\t\t*)], operator:RANGE, nestedFilterQueryIds:[])}), orderBy:[SelectionSort(column:a, isAsc:true)], limit:100)", "createdAt": "2020-05-26T00:54:27Z", "url": "https://github.com/apache/pinot/pull/5443", "merged": true, "mergeCommit": {"oid": "0bdb89c4d4e8ecd4352a60a66b23806d7e39219a"}, "closed": true, "closedAt": "2020-05-26T22:29:40Z", "author": {"login": "snleee"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABck53VVgH2gAyNDIyOTM3MDEyOjNjYThhNzAzN2UzMjMwMGVmMWVlYTY2ZGJmOWI4NjAwZGViZTc5NmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclL12JgFqTQxODcwMzYwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3ca8a7037e32300ef1eea66dbf9b8600debe796e", "author": {"user": {"login": "snleee", "name": "Seunghyun Lee"}}, "url": "https://github.com/apache/pinot/commit/3ca8a7037e32300ef1eea66dbf9b8600debe796e", "committedDate": "2020-05-26T00:52:23Z", "message": "Add broker request info to the error msg in combine operator.\n\nCurrent log indicates exception/timeout in combine operator but\nthis does not give much information for debugging. Adding broker\nrequest to the log will help for debugging."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTE0Njc3", "url": "https://github.com/apache/pinot/pull/5443#pullrequestreview-417914677", "createdAt": "2020-05-26T01:01:38Z", "commit": {"oid": "3ca8a7037e32300ef1eea66dbf9b8600debe796e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTIwNzA4", "url": "https://github.com/apache/pinot/pull/5443#pullrequestreview-417920708", "createdAt": "2020-05-26T01:31:01Z", "commit": {"oid": "3ca8a7037e32300ef1eea66dbf9b8600debe796e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwMTozMTowMlrOGaMIAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwMTozMTowMlrOGaMIAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDExNDgxNg==", "bodyText": "Do we need brokerRequest, or just requestId should be fine?", "url": "https://github.com/apache/pinot/pull/5443#discussion_r430114816", "createdAt": "2020-05-26T01:31:02Z", "author": {"login": "mayankshriv"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/operator/CombineOperator.java", "diffHunk": "@@ -168,13 +168,13 @@ public IntermediateResultsBlock callJob()\n     try {\n       mergedBlock = mergedBlockFuture.get(endTimeMs - System.currentTimeMillis(), TimeUnit.MILLISECONDS);\n     } catch (InterruptedException e) {\n-      LOGGER.error(\"Caught InterruptedException.\", e);\n+      LOGGER.error(\"Caught InterruptedException. (brokerRequest = {})\", _brokerRequest, e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ca8a7037e32300ef1eea66dbf9b8600debe796e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "692468321a282bb5a693bb8e190d3e3cd2f1b9f4", "author": {"user": {"login": "snleee", "name": "Seunghyun Lee"}}, "url": "https://github.com/apache/pinot/commit/692468321a282bb5a693bb8e190d3e3cd2f1b9f4", "committedDate": "2020-05-26T19:04:56Z", "message": "Add broker requests to the error log in other combine operators"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NzAzNjA4", "url": "https://github.com/apache/pinot/pull/5443#pullrequestreview-418703608", "createdAt": "2020-05-26T21:49:03Z", "commit": {"oid": "692468321a282bb5a693bb8e190d3e3cd2f1b9f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 835, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}