{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyMDg1MTcx", "number": 6269, "title": "[TE] fix changing createdTime of anomalies", "bodyText": "This PR is to fix a bug that the createdTime of anomalies is updated when new anomalies with earlier startTime is generated, which causes that the same anomalies get send out twice due to updated createdTime of anomalies. The fix is to merge new anomalies into existing anomalies if possible, regardless of its startTime.", "createdAt": "2020-11-17T01:57:20Z", "url": "https://github.com/apache/pinot/pull/6269", "merged": true, "mergeCommit": {"oid": "0dee4d1bf2a2fb828ada437e65d86e3f186f9020"}, "closed": true, "closedAt": "2020-11-30T18:31:46Z", "author": {"login": "vincentchenjl"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddPmf-AH2gAyNTIyMDg1MTcxOjUyMDZjNWJmZTA1YjA0Y2ZmOTQyY2IzNjkyYzYwZGI0ZjJmOTAwMWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdeNhSIgFqTUzNTAxOTE3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5206c5bfe05b04cff942cb3692c60db4f2f9001a", "author": {"user": {"login": "vincentchenjl", "name": "Vincent Chen"}}, "url": "https://github.com/apache/pinot/commit/5206c5bfe05b04cff942cb3692c60db4f2f9001a", "committedDate": "2020-11-17T01:51:40Z", "message": "[TE] fix changing createdTime of anomalies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMDExMjU2", "url": "https://github.com/apache/pinot/pull/6269#pullrequestreview-532011256", "createdAt": "2020-11-17T04:20:54Z", "commit": {"oid": "5206c5bfe05b04cff942cb3692c60db4f2f9001a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNzU0MDU0", "url": "https://github.com/apache/pinot/pull/6269#pullrequestreview-532754054", "createdAt": "2020-11-17T19:47:39Z", "commit": {"oid": "5206c5bfe05b04cff942cb3692c60db4f2f9001a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOTo0Nzo0MFrOH1G7vQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOTo0Nzo0MFrOH1G7vQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ1MDE3Mw==", "bodyText": "typo: order anomalies from earliest created time...", "url": "https://github.com/apache/pinot/pull/6269#discussion_r525450173", "createdAt": "2020-11-17T19:47:40Z", "author": {"login": "Ruoyingw"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/detection/algorithm/MergeWrapper.java", "diffHunk": "@@ -66,12 +66,12 @@\n   protected static final Comparator<MergedAnomalyResultDTO> COMPARATOR = new Comparator<MergedAnomalyResultDTO>() {\n     @Override\n     public int compare(MergedAnomalyResultDTO o1, MergedAnomalyResultDTO o2) {\n-      // earlier for start time\n+      // first order anomalies from earliest startTime to latest\n       int res = Long.compare(o1.getStartTime(), o2.getStartTime());\n       if (res != 0) return res;\n \n-      // later for end time\n-      res = Long.compare(o2.getEndTime(), o1.getEndTime());\n+      // order anomalies from earliest startTime to latest, if startTime are the same", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5206c5bfe05b04cff942cb3692c60db4f2f9001a"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a9a30c2e150ea383325ca6ed5b155b064affbc1", "author": {"user": {"login": "vincentchenjl", "name": "Vincent Chen"}}, "url": "https://github.com/apache/pinot/commit/8a9a30c2e150ea383325ca6ed5b155b064affbc1", "committedDate": "2020-11-19T02:03:20Z", "message": "minor change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa6301b932c3e3e992b15b27eb7b6bc12c6eaa7f", "author": {"user": {"login": "vincentchenjl", "name": "Vincent Chen"}}, "url": "https://github.com/apache/pinot/commit/aa6301b932c3e3e992b15b27eb7b6bc12c6eaa7f", "committedDate": "2020-11-19T23:39:12Z", "message": "[TE] remove unnecessary url decoding from PinotDataSourceResource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b1d69ba7bc6e71a0ac7757f005c461941f64ee6", "author": {"user": {"login": "vincentchenjl", "name": "Vincent Chen"}}, "url": "https://github.com/apache/pinot/commit/3b1d69ba7bc6e71a0ac7757f005c461941f64ee6", "committedDate": "2020-11-20T01:14:45Z", "message": "minor change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1MDE5MTc1", "url": "https://github.com/apache/pinot/pull/6269#pullrequestreview-535019175", "createdAt": "2020-11-20T02:00:06Z", "commit": {"oid": "3b1d69ba7bc6e71a0ac7757f005c461941f64ee6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1803, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}