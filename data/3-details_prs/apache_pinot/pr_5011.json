{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NjAxMjI0", "number": 5011, "title": "[TE] endpoint - harleyjj/yamlresource - add dataset as an optional pa\u2026", "bodyText": "\u2026ram for yaml/list\n\nMakes dataset and metrics optional params for returning a filtered list of detection yaml configurations\nAdds some Swagger annotations for yaml/list endpoint", "createdAt": "2020-01-23T22:37:41Z", "url": "https://github.com/apache/pinot/pull/5011", "merged": true, "mergeCommit": {"oid": "9232f59ed41c8f747dcf0a645eeca5c534121022"}, "closed": true, "closedAt": "2020-01-30T00:41:52Z", "author": {"login": "harleyjj"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9Sat7gFqTM0NzY2MTU3MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_PkosgFqTM1MDUyMDgzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NjYxNTcw", "url": "https://github.com/apache/pinot/pull/5011#pullrequestreview-347661570", "createdAt": "2020-01-23T22:51:19Z", "commit": {"oid": "86d6e886d728b3d252f824077a2b99f9dbd4c3e4"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QyMjo1MToxOVrOFhPPzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QyMjo1MToxOVrOFhPPzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM5NzEzMg==", "bodyText": "variable \"thisYaml\" is not needed in this case.", "url": "https://github.com/apache/pinot/pull/5011#discussion_r370397132", "createdAt": "2020-01-23T22:51:19Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/detection/yaml/YamlResource.java", "diffHunk": "@@ -907,8 +907,28 @@ public Response toggleActivation(\n    */\n   @GET\n   @Path(\"/list\")\n+  @ApiOperation(\"Get the list of all detection YAML configurations as JSON enhanced with additional information, optionally filtered\")\n   @Produces(MediaType.APPLICATION_JSON)\n-  public List<Map<String, Object>> listYamls() throws ExecutionException {\n-    return this.detectionConfigDAO.findAll().parallelStream().map(this.detectionConfigFormatter::format).collect(Collectors.toList());\n+  public List<Map<String, Object>> listYamls(\n+      @ApiParam(\"Dataset the detection configurations should be filtered by\") @QueryParam(\"dataset\") String dataset) throws ExecutionException {\n+    List<Map<String, Object>> yamls;\n+    if (dataset == null) {\n+      yamls = this.detectionConfigDAO\n+          .findAll()\n+          .parallelStream()\n+          .map(this.detectionConfigFormatter::format)\n+          .collect(Collectors.toList());\n+    } else {\n+      yamls = this.detectionConfigDAO\n+          .findAll()\n+          .parallelStream()\n+          .map(this.detectionConfigFormatter::format)\n+          .filter(y -> {\n+            List<String> thisYaml = (List)y.get(\"datasetNames\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86d6e886d728b3d252f824077a2b99f9dbd4c3e4"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3Njc3Mjk5", "url": "https://github.com/apache/pinot/pull/5011#pullrequestreview-347677299", "createdAt": "2020-01-23T23:32:37Z", "commit": {"oid": "86d6e886d728b3d252f824077a2b99f9dbd4c3e4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "86d6e886d728b3d252f824077a2b99f9dbd4c3e4", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/86d6e886d728b3d252f824077a2b99f9dbd4c3e4", "committedDate": "2020-01-23T22:35:24Z", "message": "[TE] endpoint - harleyjj/yamlresource - add dataset as an optional param for yaml/list"}, "afterCommit": {"oid": "b36f1ed220316b781fd9af1f3eacd1278147e998", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/b36f1ed220316b781fd9af1f3eacd1278147e998", "committedDate": "2020-01-24T01:11:27Z", "message": "[TE] endpoint - harleyjj/yamlresource - add dataset as an optional param for yaml/list"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b36f1ed220316b781fd9af1f3eacd1278147e998", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/b36f1ed220316b781fd9af1f3eacd1278147e998", "committedDate": "2020-01-24T01:11:27Z", "message": "[TE] endpoint - harleyjj/yamlresource - add dataset as an optional param for yaml/list"}, "afterCommit": {"oid": "0c07e26901a5adaa1b9cb1b14ffe25d317a7498a", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/0c07e26901a5adaa1b9cb1b14ffe25d317a7498a", "committedDate": "2020-01-24T01:25:47Z", "message": "[TE] endpoint - harleyjj/yamlresource - add dataset as an optional param for yaml/list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MDkyMjk0", "url": "https://github.com/apache/pinot/pull/5011#pullrequestreview-348092294", "createdAt": "2020-01-24T16:59:51Z", "commit": {"oid": "0c07e26901a5adaa1b9cb1b14ffe25d317a7498a"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxNjo1OTo1MVrOFhkI4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxNzowNToyOVrOFhkTCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDczOTQyNw==", "bodyText": "It is not good practice to put complicated logic inside lambda expressions.\nSuggest to put it as a method.", "url": "https://github.com/apache/pinot/pull/5011#discussion_r370739427", "createdAt": "2020-01-24T16:59:51Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/detection/yaml/YamlResource.java", "diffHunk": "@@ -907,8 +907,46 @@ public Response toggleActivation(\n    */\n   @GET\n   @Path(\"/list\")\n+  @ApiOperation(\"Get the list of all detection YAML configurations as JSON enhanced with additional information, optionally filtered.\")\n   @Produces(MediaType.APPLICATION_JSON)\n-  public List<Map<String, Object>> listYamls() throws ExecutionException {\n-    return this.detectionConfigDAO.findAll().parallelStream().map(this.detectionConfigFormatter::format).collect(Collectors.toList());\n+  public List<Map<String, Object>> listYamls(\n+      @ApiParam(\"Dataset the detection configurations should be filtered by\") @QueryParam(\"dataset\") String dataset,\n+      @ApiParam(\"Metric the detection configurations should be filtered by\") @QueryParam(\"metric\") String metric) throws ExecutionException {\n+    List<Map<String, Object>> yamls;\n+    if (dataset == null && metric == null) {\n+      yamls = this.detectionConfigDAO\n+          .findAll()\n+          .parallelStream()\n+          .map(this.detectionConfigFormatter::format)\n+          .collect(Collectors.toList());\n+    } else {\n+      yamls = this.detectionConfigDAO\n+          .findAll()\n+          .parallelStream()\n+          .map(this.detectionConfigFormatter::format)\n+          .filter(y -> {\n+            List datasetList = (List) y.get(\"datasetNames\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c07e26901a5adaa1b9cb1b14ffe25d317a7498a"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDc0MjAyNw==", "bodyText": "The readability is bad. Let's rewrite this logic.", "url": "https://github.com/apache/pinot/pull/5011#discussion_r370742027", "createdAt": "2020-01-24T17:05:29Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/detection/yaml/YamlResource.java", "diffHunk": "@@ -907,8 +907,46 @@ public Response toggleActivation(\n    */\n   @GET\n   @Path(\"/list\")\n+  @ApiOperation(\"Get the list of all detection YAML configurations as JSON enhanced with additional information, optionally filtered.\")\n   @Produces(MediaType.APPLICATION_JSON)\n-  public List<Map<String, Object>> listYamls() throws ExecutionException {\n-    return this.detectionConfigDAO.findAll().parallelStream().map(this.detectionConfigFormatter::format).collect(Collectors.toList());\n+  public List<Map<String, Object>> listYamls(\n+      @ApiParam(\"Dataset the detection configurations should be filtered by\") @QueryParam(\"dataset\") String dataset,\n+      @ApiParam(\"Metric the detection configurations should be filtered by\") @QueryParam(\"metric\") String metric) throws ExecutionException {\n+    List<Map<String, Object>> yamls;\n+    if (dataset == null && metric == null) {\n+      yamls = this.detectionConfigDAO\n+          .findAll()\n+          .parallelStream()\n+          .map(this.detectionConfigFormatter::format)\n+          .collect(Collectors.toList());\n+    } else {\n+      yamls = this.detectionConfigDAO\n+          .findAll()\n+          .parallelStream()\n+          .map(this.detectionConfigFormatter::format)\n+          .filter(y -> {\n+            List datasetList = (List) y.get(\"datasetNames\");\n+            String metricString = (String) y.get(\"metric\");\n+            boolean metricMatch = true;\n+            boolean datasetMatch = true;\n+            if (metric != null ) {\n+              if (metricString != null) {\n+                metricMatch = metricString.equals(metric);\n+              } else {\n+                metricMatch = false;\n+              }\n+            }\n+            if (dataset != null && datasetList != null) {\n+              if (datasetList != null) {\n+                datasetMatch = datasetList.contains(dataset);\n+              } else {\n+                datasetMatch = false;\n+              }\n+            }\n+            return (metricMatch && datasetMatch);\n+          })", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c07e26901a5adaa1b9cb1b14ffe25d317a7498a"}, "originalPosition": 43}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0c07e26901a5adaa1b9cb1b14ffe25d317a7498a", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/0c07e26901a5adaa1b9cb1b14ffe25d317a7498a", "committedDate": "2020-01-24T01:25:47Z", "message": "[TE] endpoint - harleyjj/yamlresource - add dataset as an optional param for yaml/list"}, "afterCommit": {"oid": "43c89fdaf8805bf0ee6dfd6cc09eb459fd45251d", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/43c89fdaf8805bf0ee6dfd6cc09eb459fd45251d", "committedDate": "2020-01-27T19:25:28Z", "message": "[TE] endpoint - harleyjj/yamlresource - add dataset as an optional param for yaml/list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTQ1MTQy", "url": "https://github.com/apache/pinot/pull/5011#pullrequestreview-348945142", "createdAt": "2020-01-27T20:14:32Z", "commit": {"oid": "43c89fdaf8805bf0ee6dfd6cc09eb459fd45251d"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMDoxNDozMlrOFiQElA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMDoxNDo1OFrOFiQFUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1OTIyMA==", "bodyText": "return metricMatch && datasetMatch;", "url": "https://github.com/apache/pinot/pull/5011#discussion_r371459220", "createdAt": "2020-01-27T20:14:32Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/detection/yaml/YamlResource.java", "diffHunk": "@@ -900,15 +900,64 @@ public Response toggleActivation(\n     return Response.ok(responseMessage).build();\n   }\n \n+  /**\n+   * Implements filter for detection config.\n+   * Client can filter by dataset or metric or both.  It only filters if they are not null in params and config\n+   *\n+   * @param detectionConfig The detection configuration after being enhanced by DetectionConfigFormatter::format.\n+   * @param dataset The dataset param passed by the client in the REST API call.\n+   * @param metric The metric param passed by the client in the REST API call.\n+   * @return true if the config matches query params that are passed by client.\n+   */\n+  private boolean filterConfigsBy(Map<String, Object> detectionConfig, String dataset, String metric) {\n+    List datasetList = (List) detectionConfig.get(\"datasetNames\");\n+    String metricString = (String) detectionConfig.get(\"metric\");\n+    // defaults are true so we filter only if the params are passed\n+    boolean metricMatch = true;\n+    boolean datasetMatch = true;\n+    // check metric only if it was passed\n+    if (metric != null ) {\n+      // equals method should not be called on null\n+      metricMatch = (metricString != null) && metricString.equals(metric);\n+    }\n+    // check dataset only if it was passed\n+    if (dataset != null) {\n+      // contains method should not be called on null\n+      datasetMatch = (datasetList != null) && datasetList.contains(dataset);\n+    }\n+    // config should satisfy both filters\n+    return (metricMatch && datasetMatch);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43c89fdaf8805bf0ee6dfd6cc09eb459fd45251d"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1OTMzMw==", "bodyText": "datasetMatch = datasetList != null && datasetList.contains(dataset);", "url": "https://github.com/apache/pinot/pull/5011#discussion_r371459333", "createdAt": "2020-01-27T20:14:48Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/detection/yaml/YamlResource.java", "diffHunk": "@@ -900,15 +900,64 @@ public Response toggleActivation(\n     return Response.ok(responseMessage).build();\n   }\n \n+  /**\n+   * Implements filter for detection config.\n+   * Client can filter by dataset or metric or both.  It only filters if they are not null in params and config\n+   *\n+   * @param detectionConfig The detection configuration after being enhanced by DetectionConfigFormatter::format.\n+   * @param dataset The dataset param passed by the client in the REST API call.\n+   * @param metric The metric param passed by the client in the REST API call.\n+   * @return true if the config matches query params that are passed by client.\n+   */\n+  private boolean filterConfigsBy(Map<String, Object> detectionConfig, String dataset, String metric) {\n+    List datasetList = (List) detectionConfig.get(\"datasetNames\");\n+    String metricString = (String) detectionConfig.get(\"metric\");\n+    // defaults are true so we filter only if the params are passed\n+    boolean metricMatch = true;\n+    boolean datasetMatch = true;\n+    // check metric only if it was passed\n+    if (metric != null ) {\n+      // equals method should not be called on null\n+      metricMatch = (metricString != null) && metricString.equals(metric);\n+    }\n+    // check dataset only if it was passed\n+    if (dataset != null) {\n+      // contains method should not be called on null\n+      datasetMatch = (datasetList != null) && datasetList.contains(dataset);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43c89fdaf8805bf0ee6dfd6cc09eb459fd45251d"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1OTQxMA==", "bodyText": "metricMatch = metricString != null && metricString.equals(metric);", "url": "https://github.com/apache/pinot/pull/5011#discussion_r371459410", "createdAt": "2020-01-27T20:14:58Z", "author": {"login": "xiaohui-sun"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/detection/yaml/YamlResource.java", "diffHunk": "@@ -900,15 +900,64 @@ public Response toggleActivation(\n     return Response.ok(responseMessage).build();\n   }\n \n+  /**\n+   * Implements filter for detection config.\n+   * Client can filter by dataset or metric or both.  It only filters if they are not null in params and config\n+   *\n+   * @param detectionConfig The detection configuration after being enhanced by DetectionConfigFormatter::format.\n+   * @param dataset The dataset param passed by the client in the REST API call.\n+   * @param metric The metric param passed by the client in the REST API call.\n+   * @return true if the config matches query params that are passed by client.\n+   */\n+  private boolean filterConfigsBy(Map<String, Object> detectionConfig, String dataset, String metric) {\n+    List datasetList = (List) detectionConfig.get(\"datasetNames\");\n+    String metricString = (String) detectionConfig.get(\"metric\");\n+    // defaults are true so we filter only if the params are passed\n+    boolean metricMatch = true;\n+    boolean datasetMatch = true;\n+    // check metric only if it was passed\n+    if (metric != null ) {\n+      // equals method should not be called on null\n+      metricMatch = (metricString != null) && metricString.equals(metric);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43c89fdaf8805bf0ee6dfd6cc09eb459fd45251d"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43c89fdaf8805bf0ee6dfd6cc09eb459fd45251d", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/43c89fdaf8805bf0ee6dfd6cc09eb459fd45251d", "committedDate": "2020-01-27T19:25:28Z", "message": "[TE] endpoint - harleyjj/yamlresource - add dataset as an optional param for yaml/list"}, "afterCommit": {"oid": "397c944f728611b97dff242fdcb9ff5c609332c1", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/397c944f728611b97dff242fdcb9ff5c609332c1", "committedDate": "2020-01-28T01:59:40Z", "message": "[TE] endpoint - harleyjj/yamlresource - add dataset as an optional param for yaml/list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NTg1NzMw", "url": "https://github.com/apache/pinot/pull/5011#pullrequestreview-349585730", "createdAt": "2020-01-28T18:00:53Z", "commit": {"oid": "397c944f728611b97dff242fdcb9ff5c609332c1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxODowMDo1M1rOFiu9mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxODowMDo1M1rOFiu9mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk2NTMzOQ==", "bodyText": "Although the legacy code doesn't follow the standards, I have some suggestions which we have been trying to follow for all the new apis.\n\nIf there is an exception thrown during the execution then we need to wrap it up and return a meaningful response to the caller along with the status codes.\nAlso consider adding some logging statements indicating how many configurations were returned for the params passed.\n\nRefer example: https://github.com/apache/incubator-pinot/blob/master/thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/api/user/dashboard/UserDashboardResource.java#L220", "url": "https://github.com/apache/pinot/pull/5011#discussion_r371965339", "createdAt": "2020-01-28T18:00:53Z", "author": {"login": "akshayrai"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/detection/yaml/YamlResource.java", "diffHunk": "@@ -904,15 +904,64 @@ public Response toggleActivation(\n     return Response.ok(responseMessage).build();\n   }\n \n+  /**\n+   * Implements filter for detection config.\n+   * Client can filter by dataset or metric or both.  It only filters if they are not null in params and config\n+   *\n+   * @param detectionConfig The detection configuration after being enhanced by DetectionConfigFormatter::format.\n+   * @param dataset The dataset param passed by the client in the REST API call.\n+   * @param metric The metric param passed by the client in the REST API call.\n+   * @return true if the config matches query params that are passed by client.\n+   */\n+  private boolean filterConfigsBy(Map<String, Object> detectionConfig, String dataset, String metric) {\n+    List datasetList = (List) detectionConfig.get(\"datasetNames\");\n+    String metricString = (String) detectionConfig.get(\"metric\");\n+    // defaults are true so we filter only if the params are passed\n+    boolean metricMatch = true;\n+    boolean datasetMatch = true;\n+    // check metric only if it was passed\n+    if (metric != null ) {\n+      // equals method should not be called on null\n+      metricMatch = metricString != null && metricString.equals(metric);\n+    }\n+    // check dataset only if it was passed\n+    if (dataset != null) {\n+      // contains method should not be called on null\n+      datasetMatch = datasetList != null && datasetList.contains(dataset);\n+    }\n+    // config should satisfy both filters\n+    return metricMatch && datasetMatch;\n+  }\n+\n \n   /**\n    * List all yaml configurations as JSON enhanced with detection config id, isActive and createBy information.\n+   * @param dataset the dataset to filter results by (optional)\n+   * @param metric the metric to filter results by (optional)\n    * @return the yaml configuration converted in to JSON, with enhanced information from detection config DTO.\n    */\n   @GET\n   @Path(\"/list\")\n+  @ApiOperation(\"Get the list of all detection YAML configurations as JSON enhanced with additional information, optionally filtered.\")\n   @Produces(MediaType.APPLICATION_JSON)\n-  public List<Map<String, Object>> listYamls() throws ExecutionException {\n-    return this.detectionConfigDAO.findAll().parallelStream().map(this.detectionConfigFormatter::format).collect(Collectors.toList());\n+  public List<Map<String, Object>> listYamls(\n+      @ApiParam(\"Dataset the detection configurations should be filtered by\") @QueryParam(\"dataset\") String dataset,\n+      @ApiParam(\"Metric the detection configurations should be filtered by\") @QueryParam(\"metric\") String metric) throws ExecutionException {\n+    List<Map<String, Object>> yamls;\n+    if (dataset == null && metric == null) {\n+      yamls = this.detectionConfigDAO\n+          .findAll()\n+          .parallelStream()\n+          .map(this.detectionConfigFormatter::format)\n+          .collect(Collectors.toList());\n+    } else {\n+      yamls = this.detectionConfigDAO\n+          .findAll()\n+          .parallelStream()\n+          .map(this.detectionConfigFormatter::format)\n+          .filter(y -> filterConfigsBy(y, dataset, metric))\n+          .collect(Collectors.toList());\n+    }\n+    return yamls;\n   }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "397c944f728611b97dff242fdcb9ff5c609332c1"}, "originalPosition": 65}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63da1b269d61a114f98bd2cd78fc35ec9c214f5c", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/63da1b269d61a114f98bd2cd78fc35ec9c214f5c", "committedDate": "2020-01-28T19:31:03Z", "message": "[TE] endpoint - harleyjj/yamlresource - add dataset as an optional param for yaml/list"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "397c944f728611b97dff242fdcb9ff5c609332c1", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/397c944f728611b97dff242fdcb9ff5c609332c1", "committedDate": "2020-01-28T01:59:40Z", "message": "[TE] endpoint - harleyjj/yamlresource - add dataset as an optional param for yaml/list"}, "afterCommit": {"oid": "63da1b269d61a114f98bd2cd78fc35ec9c214f5c", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/63da1b269d61a114f98bd2cd78fc35ec9c214f5c", "committedDate": "2020-01-28T19:31:03Z", "message": "[TE] endpoint - harleyjj/yamlresource - add dataset as an optional param for yaml/list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwNTIwODM3", "url": "https://github.com/apache/pinot/pull/5011#pullrequestreview-350520837", "createdAt": "2020-01-30T00:40:45Z", "commit": {"oid": "63da1b269d61a114f98bd2cd78fc35ec9c214f5c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1526, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}