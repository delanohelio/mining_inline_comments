{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwNzg0ODk4", "number": 6306, "title": "some geo function improvements", "bodyText": "Description\n\nAdd a third parameter to ST_Point to create the point in geography, this simplifies the geographic point creation. Instead of ST_GeogFromText(ST_AsText(ST_Point(group_lat, group_lon)), we can now use ST_Point(group_lat, group_lon, 1).\nSupport ST_Point creation from literal such as ST_Point(44.183189,-115.761905)\nSwapped latitude, longitude for ST_Distance calculation for geography.\n, etc.\n\nUpgrade Notes\nDoes this PR otherwise need attention when creating release notes? Things to consider:\n\nThe signature of ST_Point is changed to take an optional third parameter. 0 (default) means geometry, 1 means geography\nIn ST_Distance(ST_Point( y1,x1), ST_Point(y2, x2)) is changed to ST_Distance(ST_Point(x1, y1), ST_Point(x1, y2)) for geography\n\nRelease Notes\nThe sequence of latitude, longitude is changed for the points in ST_Distance", "createdAt": "2020-12-02T06:30:19Z", "url": "https://github.com/apache/pinot/pull/6306", "merged": true, "mergeCommit": {"oid": "4be939ae2a1a87c8e914208b1928d3f943698f4c"}, "closed": true, "closedAt": "2020-12-02T22:46:31Z", "author": {"login": "yupeng9"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiIHTugH2gAyNTMwNzg0ODk4OmQ0MzRiYjlhNWJjYzg2MTBmYmRkNWFkNjVlMWQ0MmM4NTRmOTU2NGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiWSr_gFqTU0MzI5MDgwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d434bb9a5bcc8610fbdd5ad65e1d42c854f9564c", "author": {"user": {"login": "yupeng9", "name": "Yupeng Fu"}}, "url": "https://github.com/apache/pinot/commit/d434bb9a5bcc8610fbdd5ad65e1d42c854f9564c", "committedDate": "2020-12-02T05:57:53Z", "message": "some geo function improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad112bd795f79284e8266ee5f055cc7ca47319ea", "author": {"user": {"login": "yupeng9", "name": "Yupeng Fu"}}, "url": "https://github.com/apache/pinot/commit/ad112bd795f79284e8266ee5f055cc7ca47319ea", "committedDate": "2020-12-02T06:24:30Z", "message": "relax check on StContain"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyNTMzNjYw", "url": "https://github.com/apache/pinot/pull/6306#pullrequestreview-542533660", "createdAt": "2020-12-02T06:34:50Z", "commit": {"oid": "ad112bd795f79284e8266ee5f055cc7ca47319ea"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwNjozNDo1MFrOH9MW5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwNjozNzoxM1rOH9MaDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzkyNzY1NA==", "bodyText": "remove the comment?", "url": "https://github.com/apache/pinot/pull/6306#discussion_r533927654", "createdAt": "2020-12-02T06:34:50Z", "author": {"login": "xiangfu0"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/geospatial/transform/function/StDistanceFunction.java", "diffHunk": "@@ -126,7 +127,8 @@ private static double sphericalDistance(Geometry leftGeometry, Geometry rightGeo\n     Point leftPoint = (Point) leftGeometry;\n     Point rightPoint = (Point) rightGeometry;\n \n-    return greatCircleDistance(leftPoint.getY(), leftPoint.getX(), rightPoint.getY(), rightPoint.getX());\n+//    return greatCircleDistance(leftPoint.getY(), leftPoint.getX(), rightPoint.getY(), rightPoint.getX());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad112bd795f79284e8266ee5f055cc7ca47319ea"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzkyODAwNQ==", "bodyText": "missing space\nif (_bytesResult == null) {", "url": "https://github.com/apache/pinot/pull/6306#discussion_r533928005", "createdAt": "2020-12-02T06:35:52Z", "author": {"login": "xiangfu0"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/operator/transform/function/LiteralTransformFunction.java", "diffHunk": "@@ -145,7 +147,11 @@ public Dictionary getDictionary() {\n \n   @Override\n   public byte[][] transformToBytesValuesSV(ProjectionBlock projectionBlock) {\n-    throw new UnsupportedOperationException();\n+    if(_bytesResult==null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad112bd795f79284e8266ee5f055cc7ca47319ea"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzkyODQ2Mg==", "bodyText": "no need to change this file?", "url": "https://github.com/apache/pinot/pull/6306#discussion_r533928462", "createdAt": "2020-12-02T06:37:13Z", "author": {"login": "xiangfu0"}, "path": "pinot-tools/src/main/resources/examples/stream/meetupRsvp/meetupRsvp_realtime_table_config.json", "diffHunk": "@@ -7,7 +7,9 @@\n     \"segmentPushType\": \"APPEND\",\n     \"segmentAssignmentStrategy\": \"BalanceNumSegmentAssignmentStrategy\",\n     \"schemaName\": \"meetupRsvp\",\n-    \"replication\": \"1\"\n+    \"replication\": \"1\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad112bd795f79284e8266ee5f055cc7ca47319ea"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d735501741c3ca218e6d15f303f977fdcb5274d", "author": {"user": {"login": "yupeng9", "name": "Yupeng Fu"}}, "url": "https://github.com/apache/pinot/commit/1d735501741c3ca218e6d15f303f977fdcb5274d", "committedDate": "2020-12-02T06:47:39Z", "message": "addressed comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMTMxOTYz", "url": "https://github.com/apache/pinot/pull/6306#pullrequestreview-543131963", "createdAt": "2020-12-02T18:40:27Z", "commit": {"oid": "ad112bd795f79284e8266ee5f055cc7ca47319ea"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxODo0MDoyN1rOH9o_lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxODo0MDoyN1rOH9o_lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM5NjgyMg==", "bodyText": "Does boolean work as argument? If not, int might be a better option?", "url": "https://github.com/apache/pinot/pull/6306#discussion_r534396822", "createdAt": "2020-12-02T18:40:27Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/geospatial/transform/function/ScalarFunctions.java", "diffHunk": "@@ -43,6 +44,23 @@\n         .serialize(GeometryUtils.GEOMETRY_FACTORY.createPoint(new Coordinate(x, y)));\n   }\n \n+  /**\n+   * Creates a point.\n+   *\n+   * @param x x\n+   * @param y y\n+   * @param isGeography if it's geography\n+   * @return the created point\n+   */\n+  @ScalarFunction\n+  public static byte[] stPoint(double x, double y, double isGeography) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad112bd795f79284e8266ee5f055cc7ca47319ea"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "292e538955d65c6dce447dcd16be1680d2cc23d2", "author": {"user": {"login": "yupeng9", "name": "Yupeng Fu"}}, "url": "https://github.com/apache/pinot/commit/292e538955d65c6dce447dcd16be1680d2cc23d2", "committedDate": "2020-12-02T21:35:06Z", "message": "type change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMjkwODAx", "url": "https://github.com/apache/pinot/pull/6306#pullrequestreview-543290801", "createdAt": "2020-12-02T22:28:59Z", "commit": {"oid": "292e538955d65c6dce447dcd16be1680d2cc23d2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1857, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}