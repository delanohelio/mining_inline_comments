{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMzQxNjEz", "number": 6192, "title": "Reduce number of sql queries from 10k to 500 in pinot-integration-tests module", "bodyText": "This PR:\n\nremoves queries with empty response.\nreduces the number of sql queries from 10k to 500 in pinot-integration-tests module.", "createdAt": "2020-10-26T22:22:42Z", "url": "https://github.com/apache/pinot/pull/6192", "merged": true, "mergeCommit": {"oid": "3ab13dfb515d81863600f067edc7662d46b18d5c"}, "closed": true, "closedAt": "2020-10-28T23:26:04Z", "author": {"login": "jackjlli"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWcP65AFqTUxNzIyNjQzNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXGFUaAFqTUxOTE1NDk4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MjI2NDM0", "url": "https://github.com/apache/pinot/pull/6192#pullrequestreview-517226434", "createdAt": "2020-10-26T22:38:18Z", "commit": {"oid": "be716128b3b0ea19463f73c691ee280e32ade098"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfb7fdeb912fbf771b8cfe6dc475da4d32fdc1ed", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/dfb7fdeb912fbf771b8cfe6dc475da4d32fdc1ed", "committedDate": "2020-10-27T03:52:00Z", "message": "Reduce number of sql queries from 10k to 500 in pinot-integration-tests module"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be716128b3b0ea19463f73c691ee280e32ade098", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/be716128b3b0ea19463f73c691ee280e32ade098", "committedDate": "2020-10-26T22:21:48Z", "message": "Reduce number of sql queries from 10k to 500 in pinot-integration-tests module"}, "afterCommit": {"oid": "dfb7fdeb912fbf771b8cfe6dc475da4d32fdc1ed", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/dfb7fdeb912fbf771b8cfe6dc475da4d32fdc1ed", "committedDate": "2020-10-27T03:52:00Z", "message": "Reduce number of sql queries from 10k to 500 in pinot-integration-tests module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe3ca033ac194795d2aa48fbfb1f7cd7227e6ea1", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/fe3ca033ac194795d2aa48fbfb1f7cd7227e6ea1", "committedDate": "2020-10-27T17:42:13Z", "message": "Decorate sql queries"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MTUyODI5", "url": "https://github.com/apache/pinot/pull/6192#pullrequestreview-519152829", "createdAt": "2020-10-28T23:17:26Z", "commit": {"oid": "fe3ca033ac194795d2aa48fbfb1f7cd7227e6ea1"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMzoxNzoyN1rOHqA7Vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMzoxOToxOVrOHqA9ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzgxNzQzMQ==", "bodyText": "Can you add the issue number here? thanks", "url": "https://github.com/apache/pinot/pull/6192#discussion_r513817431", "createdAt": "2020-10-28T23:17:27Z", "author": {"login": "mcvsubbu"}, "path": "pinot-integration-tests/src/test/java/org/apache/pinot/integration/tests/ClusterIntegrationTestUtils.java", "diffHunk": "@@ -859,7 +859,9 @@ static void testSqlQuery(String pinotQuery, String brokerUrl, org.apache.pinot.c\n     BrokerRequest brokerRequest =\n         PinotQueryParserFactory.get(CommonConstants.Broker.Request.SQL).compileToBrokerRequest(pinotQuery);\n     if (isSelectionQuery(brokerRequest)) { // selection\n-      // TODO: compare results for selection queries, w/o order by\n+      // TODO: 1. compare results for selection queries, w/o order by.\n+      //       2. validate values of multi-value columns.\n+      //       3. remove the restriction that order by column has to be in selection clause.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe3ca033ac194795d2aa48fbfb1f7cd7227e6ea1"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzgxODA1MQ==", "bodyText": "Why not make this \"sql\"? We will phase out pql anyway, so we can start doing this via sql all ths time?", "url": "https://github.com/apache/pinot/pull/6192#discussion_r513818051", "createdAt": "2020-10-28T23:19:19Z", "author": {"login": "mcvsubbu"}, "path": "pinot-integration-tests/src/test/java/org/apache/pinot/integration/tests/BaseClusterIntegrationTest.java", "diffHunk": "@@ -478,7 +479,8 @@ protected void stopKafka() {\n    */\n   protected long getCurrentCountStarResult()\n       throws Exception {\n-    return getPinotConnection().execute(\"SELECT COUNT(*) FROM \" + getTableName()).getResultSet(0).getLong(0);\n+    return getPinotConnection().execute(new Request(\"pql\", \"SELECT COUNT(*) FROM \" + getTableName())).getResultSet(0)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe3ca033ac194795d2aa48fbfb1f7cd7227e6ea1"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MTU0OTg4", "url": "https://github.com/apache/pinot/pull/6192#pullrequestreview-519154988", "createdAt": "2020-10-28T23:22:44Z", "commit": {"oid": "fe3ca033ac194795d2aa48fbfb1f7cd7227e6ea1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1653, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}