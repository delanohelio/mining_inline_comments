{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyMzYwMzc2", "number": 5794, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxODo1MDo0NFrOEVIAKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxODo1MDo0NFrOEVIAKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNTg2NjY0OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/SummaryResource.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxODo1MDo0NFrOG7tJNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxOToyMjozMlrOG7uKIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTI1ODgwNw==", "bodyText": "Just want to confirm that we still need this method. Should the HTTP framework automatically convert Map<String, Object> to JSON?", "url": "https://github.com/apache/pinot/pull/5794#discussion_r465258807", "createdAt": "2020-08-04T18:50:44Z", "author": {"login": "vincentchenjl"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/SummaryResource.java", "diffHunk": "@@ -172,6 +158,57 @@ public String buildSummary(\n         response = SummaryResponse.buildNotAvailableResponse(datasetName, metricName);\n       }\n     }\n+\n+    return response;\n+  }\n+\n+  @GET\n+  @Path(value = \"/summary/autoDimensionOrder/v2\")\n+  @Produces(MediaType.APPLICATION_JSON)\n+  public Map<String, Object> getDataCubeSummary(\n+      @QueryParam(METRIC_URN) String metricUrn,\n+      @QueryParam(\"dataset\") String dataset,\n+      @QueryParam(\"metric\") String metric,\n+      @QueryParam(CURRENT_START) long currentStartInclusive,\n+      @QueryParam(CURRENT_END) long currentEndExclusive,\n+      @QueryParam(BASELINE_START) long baselineStartInclusive,\n+      @QueryParam(BASELINE_END) long baselineEndExclusive,\n+      @QueryParam(\"dimensions\") String groupByDimensions,\n+      @QueryParam(\"filters\") String filterJsonPayload,\n+      @QueryParam(CUBE_SUMMARY_SIZE) int summarySize,\n+      @QueryParam(CUBE_DEPTH) @DefaultValue(DEFAULT_DEPTH) int depth,\n+      @QueryParam(CUBE_DIM_HIERARCHIES) @DefaultValue(DEFAULT_HIERARCHIES) String hierarchiesPayload,\n+      @QueryParam(CUBE_ONE_SIDE_ERROR) @DefaultValue(DEFAULT_ONE_SIDE_ERROR) boolean doOneSideError,\n+      @QueryParam(CUBE_EXCLUDED_DIMENSIONS) @DefaultValue(DEFAULT_EXCLUDED_DIMENSIONS) String excludedDimensions,\n+      @QueryParam(TIME_ZONE) @DefaultValue(DEFAULT_TIMEZONE_ID) String timeZone) throws Exception {\n+    SummaryResponse response = buildDataCubeSummary(metricUrn, metric, dataset, currentStartInclusive, currentEndExclusive, baselineStartInclusive,\n+        baselineEndExclusive, groupByDimensions, filterJsonPayload, summarySize, depth, hierarchiesPayload,\n+        doOneSideError, excludedDimensions, timeZone);\n+    return OBJECT_MAPPER.convertValue(response, Map.class);\n+  }\n+\n+  @GET\n+  @Path(value = \"/summary/autoDimensionOrder\")\n+  @Produces(MediaType.APPLICATION_JSON)\n+  public String buildSummary(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d1b0c1a9b3d5d5eba9fca49488146585e816c6a"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTI3NTQyNg==", "bodyText": "This API is being consumed by some clients. Hence retained it.", "url": "https://github.com/apache/pinot/pull/5794#discussion_r465275426", "createdAt": "2020-08-04T19:22:32Z", "author": {"login": "akshayrai"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/SummaryResource.java", "diffHunk": "@@ -172,6 +158,57 @@ public String buildSummary(\n         response = SummaryResponse.buildNotAvailableResponse(datasetName, metricName);\n       }\n     }\n+\n+    return response;\n+  }\n+\n+  @GET\n+  @Path(value = \"/summary/autoDimensionOrder/v2\")\n+  @Produces(MediaType.APPLICATION_JSON)\n+  public Map<String, Object> getDataCubeSummary(\n+      @QueryParam(METRIC_URN) String metricUrn,\n+      @QueryParam(\"dataset\") String dataset,\n+      @QueryParam(\"metric\") String metric,\n+      @QueryParam(CURRENT_START) long currentStartInclusive,\n+      @QueryParam(CURRENT_END) long currentEndExclusive,\n+      @QueryParam(BASELINE_START) long baselineStartInclusive,\n+      @QueryParam(BASELINE_END) long baselineEndExclusive,\n+      @QueryParam(\"dimensions\") String groupByDimensions,\n+      @QueryParam(\"filters\") String filterJsonPayload,\n+      @QueryParam(CUBE_SUMMARY_SIZE) int summarySize,\n+      @QueryParam(CUBE_DEPTH) @DefaultValue(DEFAULT_DEPTH) int depth,\n+      @QueryParam(CUBE_DIM_HIERARCHIES) @DefaultValue(DEFAULT_HIERARCHIES) String hierarchiesPayload,\n+      @QueryParam(CUBE_ONE_SIDE_ERROR) @DefaultValue(DEFAULT_ONE_SIDE_ERROR) boolean doOneSideError,\n+      @QueryParam(CUBE_EXCLUDED_DIMENSIONS) @DefaultValue(DEFAULT_EXCLUDED_DIMENSIONS) String excludedDimensions,\n+      @QueryParam(TIME_ZONE) @DefaultValue(DEFAULT_TIMEZONE_ID) String timeZone) throws Exception {\n+    SummaryResponse response = buildDataCubeSummary(metricUrn, metric, dataset, currentStartInclusive, currentEndExclusive, baselineStartInclusive,\n+        baselineEndExclusive, groupByDimensions, filterJsonPayload, summarySize, depth, hierarchiesPayload,\n+        doOneSideError, excludedDimensions, timeZone);\n+    return OBJECT_MAPPER.convertValue(response, Map.class);\n+  }\n+\n+  @GET\n+  @Path(value = \"/summary/autoDimensionOrder\")\n+  @Produces(MediaType.APPLICATION_JSON)\n+  public String buildSummary(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTI1ODgwNw=="}, "originalCommit": {"oid": "9d1b0c1a9b3d5d5eba9fca49488146585e816c6a"}, "originalPosition": 74}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4270, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}