{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2NDQwODY3", "number": 5370, "title": "Schema method to fetch field spec of time column", "bodyText": "#2756\nIntroducing  method in Schema.getFieldSpecForTimeColumn(String timeColumnName). If, FieldType for time columnName is\n\nDATE_TIME - return the DateTimeFieldSpec\nTIME - convert to DateTimeFieldSpec before returning\nAs per recent discussions, we will not be changing the ser/deser of TimeFieldSpec in schema, so as to not mess with external integrations. As a result, we decided that Schema can have TimeFieldSpec/DateTimeFieldSpecs/both/none. The timeColumn is anyway decided by the table config.\nThis means, the callers of getFieldSpecFor(time) can get either DateTimeFieldSpec or TimeFieldSpec, and the caller should be prepared to read both. This helper method will take that burden off the caller.\n\nNOTE: this will be used as a substitution for getFieldSpecFor() method, wherever it was being called to get TimeFieldSpec", "createdAt": "2020-05-12T02:04:15Z", "url": "https://github.com/apache/pinot/pull/5370", "merged": true, "mergeCommit": {"oid": "7562d4db4f9b95f35a86e1d5566dcab2e91378e2"}, "closed": true, "closedAt": "2020-05-12T17:21:13Z", "author": {"login": "npawar"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgaappAH2gAyNDE2NDQwODY3OmViOGZhZWI2ZDU4MzViNmVhNGQ0NmI3NTQ3NDkxNzY1M2IwNjE1MjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgmgpxgH2gAyNDE2NDQwODY3OjM4NjEyM2MwOWI3NjEzMjI0NTEzZjhjN2IzYzM2ZjdmODhhNTU4ZWQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "eb8faeb6d5835b6ea4d46b75474917653b061524", "author": {"user": {"login": "npawar", "name": "Neha Pawar"}}, "url": "https://github.com/apache/pinot/commit/eb8faeb6d5835b6ea4d46b75474917653b061524", "committedDate": "2020-05-12T01:58:18Z", "message": "Schema method to fetch field spec of time column"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NjY3NTI4", "url": "https://github.com/apache/pinot/pull/5370#pullrequestreview-409667528", "createdAt": "2020-05-12T03:06:30Z", "commit": {"oid": "eb8faeb6d5835b6ea4d46b75474917653b061524"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMzowNjozMFrOGT0b1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMzowNjozMFrOGT0b1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQzNTIyMw==", "bodyText": "Can we throw IllegalStateException here?", "url": "https://github.com/apache/pinot/pull/5370#discussion_r423435223", "createdAt": "2020-05-12T03:06:30Z", "author": {"login": "siddharthteotia"}, "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/Schema.java", "diffHunk": "@@ -299,6 +299,24 @@ public DateTimeFieldSpec getDateTimeSpec(String dateTimeName) {\n     return null;\n   }\n \n+  /**\n+   * Fetches the DateTimeFieldSpec for the given time column name.\n+   * If the columnName is a DATE_TIME column, returns the DateTimeFieldSpec\n+   * If the columnName is a TIME column, converts to DateTimeFieldSpec before returning\n+   */\n+  public DateTimeFieldSpec getSpecForTimeColumn(String timeColumnName) {\n+    FieldSpec fieldSpec = _fieldSpecMap.get(timeColumnName);\n+    if (fieldSpec != null) {\n+      if (fieldSpec.getFieldType() == FieldType.DATE_TIME) {\n+        return (DateTimeFieldSpec) fieldSpec;\n+      }\n+      if (fieldSpec.getFieldType() == FieldType.TIME) {\n+        return convertToDateTimeFieldSpec((TimeFieldSpec) fieldSpec);\n+      }\n+    }\n+    return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb8faeb6d5835b6ea4d46b75474917653b061524"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NjY3Njc5", "url": "https://github.com/apache/pinot/pull/5370#pullrequestreview-409667679", "createdAt": "2020-05-12T03:07:01Z", "commit": {"oid": "eb8faeb6d5835b6ea4d46b75474917653b061524"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "386123c09b7613224513f8c7b3c36f7f88a558ed", "author": {"user": {"login": "npawar", "name": "Neha Pawar"}}, "url": "https://github.com/apache/pinot/commit/386123c09b7613224513f8c7b3c36f7f88a558ed", "committedDate": "2020-05-12T16:03:43Z", "message": "Mark Nullable"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1026, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}