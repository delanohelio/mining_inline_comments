{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MTA0NTA3", "number": 5016, "title": "Support alias replacement in PinotQuery", "bodyText": "Support alias in Pinot SQL for query processing.\nE.g.\nSELECT count(*) AS cnt, sum(rsvp_count) AS sum_rsvp_count\nFROM meetupRsvp\nGROUP BY group_country\nORDER BY cnt, sum_rsvp_count DESC \nLIMIT 50\n\n\nCreate an alias map from identifier to Expression based on the parsed 'AS' statement.\nReplace identifiers based on alias map in Filter/GroupBy/OrderBy Expressions", "createdAt": "2020-01-25T09:59:06Z", "url": "https://github.com/apache/pinot/pull/5016", "merged": true, "mergeCommit": {"oid": "622e00e2c31c7e509fb4f9352cb9c7e57d773ddb"}, "closed": true, "closedAt": "2020-01-28T09:48:28Z", "author": {"login": "xiangfu0"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9w67VgBqjI5NzkyMzYzNzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-mK8ngBqjI5ODM4ODMyNjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5e0a8e3b5f4e69f767acd51d4a1f9707effff804", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/5e0a8e3b5f4e69f767acd51d4a1f9707effff804", "committedDate": "2020-01-25T09:52:06Z", "message": "Support alias replacement in PinotQuery"}, "afterCommit": {"oid": "be1c976497a5794bc311d2d37725f21d413b4ef2", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/be1c976497a5794bc311d2d37725f21d413b4ef2", "committedDate": "2020-01-25T10:23:56Z", "message": "Support alias replacement in PinotQuery"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4Njk2OTA2", "url": "https://github.com/apache/pinot/pull/5016#pullrequestreview-348696906", "createdAt": "2020-01-27T14:22:11Z", "commit": {"oid": "be1c976497a5794bc311d2d37725f21d413b4ef2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4ODc5MDQy", "url": "https://github.com/apache/pinot/pull/5016#pullrequestreview-348879042", "createdAt": "2020-01-27T18:26:49Z", "commit": {"oid": "be1c976497a5794bc311d2d37725f21d413b4ef2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxODoyNjo0OVrOFiM2eg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxODoyNjo0OVrOFiM2eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQwNjQ1OA==", "bodyText": "For completeness, can we also add a test case where we have a mix of expressions and for some we use AS, and for others we don't.", "url": "https://github.com/apache/pinot/pull/5016#discussion_r371406458", "createdAt": "2020-01-27T18:26:49Z", "author": {"login": "siddharthteotia"}, "path": "pinot-common/src/test/java/org/apache/pinot/sql/parsers/CalciteSqlCompilerTest.java", "diffHunk": "@@ -887,4 +887,66 @@ public void testQueryValidation() {\n       Assert.assertTrue(e.getMessage().contains(\"is not allowed in GROUP BY clause.\"));\n     }\n   }\n+\n+  @Test\n+  public void testAliasQuery() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be1c976497a5794bc311d2d37725f21d413b4ef2"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0f363aebdd7949c406513442eebe9a9961c5231", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/e0f363aebdd7949c406513442eebe9a9961c5231", "committedDate": "2020-01-27T23:53:42Z", "message": "Make toExpression by default converts SqlNode to function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffc1779a763dde2c8f431491dfe789931911203c", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/ffc1779a763dde2c8f431491dfe789931911203c", "committedDate": "2020-01-27T23:53:42Z", "message": "Support alias replacement in PinotQuery"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b69e8b5cde9d2e3dd16f0f2a60731220ad3490b4", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/b69e8b5cde9d2e3dd16f0f2a60731220ad3490b4", "committedDate": "2020-01-28T00:26:24Z", "message": "Adding validation for selection alias"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be1c976497a5794bc311d2d37725f21d413b4ef2", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/be1c976497a5794bc311d2d37725f21d413b4ef2", "committedDate": "2020-01-25T10:23:56Z", "message": "Support alias replacement in PinotQuery"}, "afterCommit": {"oid": "b69e8b5cde9d2e3dd16f0f2a60731220ad3490b4", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/b69e8b5cde9d2e3dd16f0f2a60731220ad3490b4", "committedDate": "2020-01-28T00:26:24Z", "message": "Adding validation for selection alias"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1539, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}