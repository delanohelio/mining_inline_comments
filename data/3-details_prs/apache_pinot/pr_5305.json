{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5MDI4OTk0", "number": 5305, "title": "Fixing missing error message from pinot-admin command", "bodyText": "Fix the issue that pinot-admin.sh only return message for success request, not failed messages from http requests.\nCurrent:\nbin/pinot-admin.sh AddTable -tableConfigFile examples/baseballStats_offline_table_config.json -schemaFile examples/baseballStats_schema.json -controllerHost 127.0.0.1 -controllerPort 9000 -exec\n\nExecuting command: AddTable -tableConfigFile examples/baseballStats_offline_table_config.json -schemaFile examples/baseballStats_schema.json -controllerHost 127.0.0.1 -controllerPort 9000 -exec\nSending request: http://127.0.0.1:9000/schemas to controller: localhost, version: Unknown\nException caught:\njava.io.IOException: Server returned HTTP response code: 409 for URL: http://127.0.0.1:9000/tables\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1900) ~[?:1.8.0_232]\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1498) ~[?:1.8.0_232]\n\tat org.apache.pinot.tools.admin.command.AbstractBaseAdminCommand.sendRequest(AbstractBaseAdminCommand.java:85) ~[pinot-all-0.4.0-SNAPSHOT-jar-with-dependencies.jar:0.4.0-SNAPSHOT-80a943501464d983396ae935b1ca7061d94ade37]\n\tat org.apache.pinot.tools.admin.command.AbstractBaseAdminCommand.sendPostRequest(AbstractBaseAdminCommand.java:63) ~[pinot-all-0.4.0-SNAPSHOT-jar-with-dependencies.jar:0.4.0-SNAPSHOT-80a943501464d983396ae935b1ca7061d94ade37]\n\tat org.apache.pinot.tools.admin.command.AddTableCommand.sendTableCreationRequest(AddTableCommand.java:138) ~[pinot-all-0.4.0-SNAPSHOT-jar-with-dependencies.jar:0.4.0-SNAPSHOT-80a943501464d983396ae935b1ca7061d94ade37]\n\tat org.apache.pinot.tools.admin.command.AddTableCommand.execute(AddTableCommand.java:163) ~[pinot-all-0.4.0-SNAPSHOT-jar-with-dependencies.jar:0.4.0-SNAPSHOT-80a943501464d983396ae935b1ca7061d94ade37]\n\tat org.apache.pinot.tools.admin.PinotAdministrator.execute(PinotAdministrator.java:158) [pinot-all-0.4.0-SNAPSHOT-jar-with-dependencies.jar:0.4.0-SNAPSHOT-80a943501464d983396ae935b1ca7061d94ade37]\n\tat org.apache.pinot.tools.admin.PinotAdministrator.main(PinotAdministrator.java:170) [pinot-all-0.4.0-SNAPSHOT-jar-with-dependencies.jar:0.4.0-SNAPSHOT-80a943501464d983396ae935b1ca7061d94ade37]\n\nAfter fix:\n\u279c bin/pinot-admin.sh AddTable -tableConfigFile examples/baseballStats_offline_table_config.json -schemaFile examples/baseballStats_schema.json -controllerHost 127.0.0.1 -controllerPort 9000 -exec\n\nExecuting command: AddTable -tableConfigFile examples/baseballStats_offline_table_config.json -schemaFile examples/baseballStats_schema.json -controllerHost 127.0.0.1 -controllerPort 9000 -exec\nSending request: http://127.0.0.1:9000/schemas to controller: localhost, version: Unknown\n{\"code\":409,\"error\":\"Table baseballStats1_OFFLINE already exists\"}", "createdAt": "2020-04-26T06:37:33Z", "url": "https://github.com/apache/pinot/pull/5305", "merged": true, "mergeCommit": {"oid": "3d9d2063afb513a979d7d4ff6a597dccbe89ba80"}, "closed": true, "closedAt": "2020-04-27T18:36:48Z", "author": {"login": "xiangfu0"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcbU1GIAH2gAyNDA5MDI4OTk0OjIwMDVmY2FkMTI0ZmZhYTY5YjM5ZTU1MGFiYWQ5MGEwYTFiMzRjZjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcby879gH2gAyNDA5MDI4OTk0OmYyYzljZDgyY2Y4MzI2N2NlOWE0NDMwMTQ1NTM3MzQwMzk3NjcwMjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2005fcad124ffaa69b39e550abad90a0a1b34cf3", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/2005fcad124ffaa69b39e550abad90a0a1b34cf3", "committedDate": "2020-04-26T06:38:08Z", "message": "Fixing the missed error message from Pinot Server when using pinot-admin command"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4dc198f99b59fbcba4fbe8e35dd1ffec907d4577", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/4dc198f99b59fbcba4fbe8e35dd1ffec907d4577", "committedDate": "2020-04-26T06:20:46Z", "message": "Fixing the missed error message from Pinot Server when using pinot-admin command"}, "afterCommit": {"oid": "2005fcad124ffaa69b39e550abad90a0a1b34cf3", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/2005fcad124ffaa69b39e550abad90a0a1b34cf3", "committedDate": "2020-04-26T06:38:08Z", "message": "Fixing the missed error message from Pinot Server when using pinot-admin command"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxMTU2ODQ0", "url": "https://github.com/apache/pinot/pull/5305#pullrequestreview-401156844", "createdAt": "2020-04-27T17:11:12Z", "commit": {"oid": "2005fcad124ffaa69b39e550abad90a0a1b34cf3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNzoxMToxMlrOGMuTZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNzoxMToxMlrOGMuTZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk5NDcyNg==", "bodyText": "Why do you need to change this?", "url": "https://github.com/apache/pinot/pull/5305#discussion_r415994726", "createdAt": "2020-04-27T17:11:12Z", "author": {"login": "jackjlli"}, "path": "pinot-controller/src/main/java/org/apache/pinot/controller/api/resources/PinotTableRestletResource.java", "diffHunk": "@@ -123,7 +123,7 @@ public SuccessResponse addTable(String tableConfigStr) {\n       _pinotHelixResourceManager.addTable(tableConfig);\n       // TODO: validate that table was created successfully\n       // (in realtime case, metadata might not have been created but would be created successfully in the next run of the validation manager)\n-      return new SuccessResponse(\"Table \" + tableName + \" succesfully added\");\n+      return new SuccessResponse(\"Table \" + tableName + \" Successfully added\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2005fcad124ffaa69b39e550abad90a0a1b34cf3"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b834ea23739acc999ab9e33e0f0333136413ec9", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/1b834ea23739acc999ab9e33e0f0333136413ec9", "committedDate": "2020-04-27T17:41:00Z", "message": "Update PinotTableRestletResource.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9064d436efb4444e803c3c5c804c5437920cfb62", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/9064d436efb4444e803c3c5c804c5437920cfb62", "committedDate": "2020-04-27T17:42:36Z", "message": "Update AddTableCommand.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2c9cd82cf83267ce9a443014553734039767025", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/f2c9cd82cf83267ce9a443014553734039767025", "committedDate": "2020-04-27T17:43:51Z", "message": "Update PinotTableRestletResourceTest.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 942, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}