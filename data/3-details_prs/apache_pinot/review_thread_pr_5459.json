{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MTgzMzY5", "number": 5459, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMzozNTo0NVrOEAtbvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMzozNTo0NVrOEAtbvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MTc5ODM4OnYy", "diffSide": "RIGHT", "path": "pinot-broker/src/main/java/org/apache/pinot/broker/routing/RoutingManager.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMzozNTo0NVrOGcKMyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwNDoxNjoyMlrOGcOPzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE4MDQyNg==", "bodyText": "can we just call it SegmentStateModel?", "url": "https://github.com/apache/pinot/pull/5459#discussion_r432180426", "createdAt": "2020-05-28T23:35:45Z", "author": {"login": "mcvsubbu"}, "path": "pinot-broker/src/main/java/org/apache/pinot/broker/routing/RoutingManager.java", "diffHunk": "@@ -51,7 +51,7 @@\n import org.apache.pinot.common.metrics.BrokerMetrics;\n import org.apache.pinot.common.request.BrokerRequest;\n import org.apache.pinot.common.utils.CommonConstants;\n-import org.apache.pinot.common.utils.CommonConstants.Helix.StateModel.RealtimeSegmentOnlineOfflineStateModel;\n+import org.apache.pinot.common.utils.CommonConstants.Helix.StateModel.SegmentOnlineOfflineStateModel;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7de58014ba0a0c68412cdc9a0f4c8b2f678ad0f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIwNzAwNg==", "bodyText": "@mcvsubbu If we want to further clean it up, we can merge the BrokerStateModel and SegmentStateModel and put all instance states (ONLINE, CONSUMING, OFFLINE, ERROR) under CommonConstants.Helix.InstanceState. Thoughts?", "url": "https://github.com/apache/pinot/pull/5459#discussion_r432207006", "createdAt": "2020-05-29T01:19:38Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-broker/src/main/java/org/apache/pinot/broker/routing/RoutingManager.java", "diffHunk": "@@ -51,7 +51,7 @@\n import org.apache.pinot.common.metrics.BrokerMetrics;\n import org.apache.pinot.common.request.BrokerRequest;\n import org.apache.pinot.common.utils.CommonConstants;\n-import org.apache.pinot.common.utils.CommonConstants.Helix.StateModel.RealtimeSegmentOnlineOfflineStateModel;\n+import org.apache.pinot.common.utils.CommonConstants.Helix.StateModel.SegmentOnlineOfflineStateModel;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE4MDQyNg=="}, "originalCommit": {"oid": "a7de58014ba0a0c68412cdc9a0f4c8b2f678ad0f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIxMzI0Mg==", "bodyText": "I dont think merging BrokerStateModel and SegmentStateModel is a good idea.  Broker does not have CONSUMING state.\nI think the reason these are coded separately (for realtime and offline) is because we did not have CONSUMING state before. By now, the state model in helix should have consuming for all pinot use cases. So, merging these is fine.", "url": "https://github.com/apache/pinot/pull/5459#discussion_r432213242", "createdAt": "2020-05-29T01:46:04Z", "author": {"login": "mcvsubbu"}, "path": "pinot-broker/src/main/java/org/apache/pinot/broker/routing/RoutingManager.java", "diffHunk": "@@ -51,7 +51,7 @@\n import org.apache.pinot.common.metrics.BrokerMetrics;\n import org.apache.pinot.common.request.BrokerRequest;\n import org.apache.pinot.common.utils.CommonConstants;\n-import org.apache.pinot.common.utils.CommonConstants.Helix.StateModel.RealtimeSegmentOnlineOfflineStateModel;\n+import org.apache.pinot.common.utils.CommonConstants.Helix.StateModel.SegmentOnlineOfflineStateModel;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE4MDQyNg=="}, "originalCommit": {"oid": "a7de58014ba0a0c68412cdc9a0f4c8b2f678ad0f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI0NjczMw==", "bodyText": "@mcvsubbu Changed them to SegmentStateModel and BrokerResourceStateModel.\nAlso, can you please give me a ship it if it looks good?", "url": "https://github.com/apache/pinot/pull/5459#discussion_r432246733", "createdAt": "2020-05-29T04:16:22Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-broker/src/main/java/org/apache/pinot/broker/routing/RoutingManager.java", "diffHunk": "@@ -51,7 +51,7 @@\n import org.apache.pinot.common.metrics.BrokerMetrics;\n import org.apache.pinot.common.request.BrokerRequest;\n import org.apache.pinot.common.utils.CommonConstants;\n-import org.apache.pinot.common.utils.CommonConstants.Helix.StateModel.RealtimeSegmentOnlineOfflineStateModel;\n+import org.apache.pinot.common.utils.CommonConstants.Helix.StateModel.SegmentOnlineOfflineStateModel;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE4MDQyNg=="}, "originalCommit": {"oid": "a7de58014ba0a0c68412cdc9a0f4c8b2f678ad0f"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4493, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}