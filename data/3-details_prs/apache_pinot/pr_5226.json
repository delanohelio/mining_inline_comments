{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwNjU4NTIw", "number": 5226, "title": "Add inter segment tests for text search and fix bug for Lucene query parser creation", "bodyText": "Add inter segment tests for text search and fix bug for Lucene query parser creation. Parser should be instantiated per query (search expression). Also added text search tests for the SQL path", "createdAt": "2020-04-08T06:41:16Z", "url": "https://github.com/apache/pinot/pull/5226", "merged": true, "mergeCommit": {"oid": "62a3e54f42fdc50aaa0f6e6f8f5b5be41857e506"}, "closed": true, "closedAt": "2020-04-09T01:25:56Z", "author": {"login": "siddharthteotia"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVrVuEAH2gAyNDAwNjU4NTIwOjQzZGM1ZGEwNzBjNmU0OGI5YjY3MmU1MGFiNDFmNjA5NTg4ZDQzMzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVr7sugH2gAyNDAwNjU4NTIwOmQ4NDQ4YmRkN2U4ZjFmZWIzYzFmMTJmMjdjNmY5ZjlhNzVkNDlhYjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "43dc5da070c6e48b9b672e50ab41f609588d4334", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/43dc5da070c6e48b9b672e50ab41f609588d4334", "committedDate": "2020-04-08T17:28:08Z", "message": "Add inter segment tests for text search\nand fix bug for lucene query parser creation\n\nParser is JavaCC based. So it has to be created\nper query.\n\nAlso added text search tests for the SQL path"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "facc49c144c77e082bc9a145798ba8f6c67f0192", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/facc49c144c77e082bc9a145798ba8f6c67f0192", "committedDate": "2020-04-08T06:34:19Z", "message": "Add inter segment tests for text search\nand fix bug for lucene query parser creation\n\nParser is JavaCC based. So it has to be created\nper query.\n\nAlso added text search tests for the SQL path"}, "afterCommit": {"oid": "43dc5da070c6e48b9b672e50ab41f609588d4334", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/43dc5da070c6e48b9b672e50ab41f609588d4334", "committedDate": "2020-04-08T17:28:08Z", "message": "Add inter segment tests for text search\nand fix bug for lucene query parser creation\n\nParser is JavaCC based. So it has to be created\nper query.\n\nAlso added text search tests for the SQL path"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMTk1NDMy", "url": "https://github.com/apache/pinot/pull/5226#pullrequestreview-390195432", "createdAt": "2020-04-08T17:45:41Z", "commit": {"oid": "43dc5da070c6e48b9b672e50ab41f609588d4334"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzo0NTo0MVrOGC6Iig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzo0NTo0MVrOGC6Iig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTcwMjc5NA==", "bodyText": "Is there any way to reuse some components here? Will this cause too much garbage?\nPlease also add some comments so that future developers know that it cannot be reused.", "url": "https://github.com/apache/pinot/pull/5226#discussion_r405702794", "createdAt": "2020-04-08T17:45:41Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/segment/index/readers/text/LuceneTextIndexReader.java", "diffHunk": "@@ -133,7 +131,8 @@ public MutableRoaringBitmap getDocIds(Object value) {\n     MutableRoaringBitmap docIds = new MutableRoaringBitmap();\n     Collector docIDCollector = new LuceneDocIdCollector(docIds, _docIdTranslator);\n     try {\n-      Query query = _queryParser.parse(searchQuery);\n+      QueryParser parser = new QueryParser(_column, new StandardAnalyzer());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43dc5da070c6e48b9b672e50ab41f609588d4334"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8448bdd7e8f1feb3c1f12f27c6f9f9a75d49ab5", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/d8448bdd7e8f1feb3c1f12f27c6f9f9a75d49ab5", "committedDate": "2020-04-08T18:09:37Z", "message": "Create analyzer just once"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1186, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}