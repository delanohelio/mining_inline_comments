{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMTEyMjgy", "number": 5994, "title": "Add null check while fetching the schema", "bodyText": "When call ZKMetadataProvider:getSchema(), input parameter schemaName\nis declared as Nonnull; however, it's possible that we pass null value.\nThis pr adds the null check to avoid the such case.", "createdAt": "2020-09-09T20:17:14Z", "url": "https://github.com/apache/pinot/pull/5994", "merged": true, "mergeCommit": {"oid": "bfced82c1ac349fa89b197feb13dcd9f73ca328c"}, "closed": true, "closedAt": "2020-09-09T21:40:31Z", "author": {"login": "snleee"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHSI4lAFqTQ4NTM3NTIyOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHSNL-ABqjM3NDc2OTc4NDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1Mzc1MjI4", "url": "https://github.com/apache/pinot/pull/5994#pullrequestreview-485375228", "createdAt": "2020-09-09T20:22:42Z", "commit": {"oid": "b2d96ac840ad9b745ca959504b8e5cf2a3e8d912"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDoyMjo0MlrOHPY9oQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDoyMjo0MlrOHPY9oQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTg5OTY4MQ==", "bodyText": "schema = getSchema(propertyStore, realtimeSchemaNameFromValidationConfig);", "url": "https://github.com/apache/pinot/pull/5994#discussion_r485899681", "createdAt": "2020-09-09T20:22:42Z", "author": {"login": "xiangfu0"}, "path": "pinot-common/src/main/java/org/apache/pinot/common/metadata/ZKMetadataProvider.java", "diffHunk": "@@ -274,14 +274,20 @@ public static Schema getTableSchema(@Nonnull ZkHelixPropertyStore<ZNRecord> prop\n     if (tableType == null || tableType == TableType.REALTIME) {\n       TableConfig realtimeTableConfig = getRealtimeTableConfig(propertyStore, tableName);\n       if (realtimeTableConfig != null) {\n-        schema = getSchema(propertyStore, realtimeTableConfig.getValidationConfig().getSchemaName());\n+        String realtimeSchemaNameFromValidationConfig = realtimeTableConfig.getValidationConfig().getSchemaName();\n+        if (realtimeSchemaNameFromValidationConfig != null) {\n+          schema = getSchema(propertyStore, realtimeTableConfig.getValidationConfig().getSchemaName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2d96ac840ad9b745ca959504b8e5cf2a3e8d912"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1Mzc1MzU3", "url": "https://github.com/apache/pinot/pull/5994#pullrequestreview-485375357", "createdAt": "2020-09-09T20:22:55Z", "commit": {"oid": "b2d96ac840ad9b745ca959504b8e5cf2a3e8d912"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDoyMjo1NVrOHPY-BQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDoyMjo1NVrOHPY-BQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTg5OTc4MQ==", "bodyText": "schema = getSchema(propertyStore, offlineSchemaNameFromValidationConfig);", "url": "https://github.com/apache/pinot/pull/5994#discussion_r485899781", "createdAt": "2020-09-09T20:22:55Z", "author": {"login": "xiangfu0"}, "path": "pinot-common/src/main/java/org/apache/pinot/common/metadata/ZKMetadataProvider.java", "diffHunk": "@@ -274,14 +274,20 @@ public static Schema getTableSchema(@Nonnull ZkHelixPropertyStore<ZNRecord> prop\n     if (tableType == null || tableType == TableType.REALTIME) {\n       TableConfig realtimeTableConfig = getRealtimeTableConfig(propertyStore, tableName);\n       if (realtimeTableConfig != null) {\n-        schema = getSchema(propertyStore, realtimeTableConfig.getValidationConfig().getSchemaName());\n+        String realtimeSchemaNameFromValidationConfig = realtimeTableConfig.getValidationConfig().getSchemaName();\n+        if (realtimeSchemaNameFromValidationConfig != null) {\n+          schema = getSchema(propertyStore, realtimeTableConfig.getValidationConfig().getSchemaName());\n+        }\n       }\n     }\n     // Try to fetch offline schema if realtime schema does not exist\n     if (schema == null && (tableType == null || tableType == TableType.OFFLINE)) {\n       TableConfig offlineTableConfig = getOfflineTableConfig(propertyStore, tableName);\n       if (offlineTableConfig != null) {\n-        schema = getSchema(propertyStore, offlineTableConfig.getValidationConfig().getSchemaName());\n+        String offlineSchemaNameFromValidationConfig = offlineTableConfig.getValidationConfig().getSchemaName();\n+        if (offlineSchemaNameFromValidationConfig != null) {\n+          schema = getSchema(propertyStore, offlineTableConfig.getValidationConfig().getSchemaName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2d96ac840ad9b745ca959504b8e5cf2a3e8d912"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1Mzc2MjY0", "url": "https://github.com/apache/pinot/pull/5994#pullrequestreview-485376264", "createdAt": "2020-09-09T20:24:21Z", "commit": {"oid": "b2d96ac840ad9b745ca959504b8e5cf2a3e8d912"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d415d8332e32d6759ad57b40d8a519458c109b6a", "author": {"user": {"login": "snleee", "name": "Seunghyun Lee"}}, "url": "https://github.com/apache/pinot/commit/d415d8332e32d6759ad57b40d8a519458c109b6a", "committedDate": "2020-09-09T20:27:14Z", "message": "Add null check while fetching the schema\n\nWhen call ZKMetadataProvider:getSchema(), input parameter schemaName\nis declared as `Nonnull`; however, it's possible that we pass null value.\nThis pr adds the null check to avoid the such case."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b2d96ac840ad9b745ca959504b8e5cf2a3e8d912", "author": {"user": {"login": "snleee", "name": "Seunghyun Lee"}}, "url": "https://github.com/apache/pinot/commit/b2d96ac840ad9b745ca959504b8e5cf2a3e8d912", "committedDate": "2020-09-09T20:15:08Z", "message": "Add null check while fetching the schema\n\nWhen call ZKMetadataProvider:getSchema(), input parameter schemaName\nis declared as `Nonnull`; however, it's possible that we pass null value.\nThis pr adds the null check to avoid the such case."}, "afterCommit": {"oid": "d415d8332e32d6759ad57b40d8a519458c109b6a", "author": {"user": {"login": "snleee", "name": "Seunghyun Lee"}}, "url": "https://github.com/apache/pinot/commit/d415d8332e32d6759ad57b40d8a519458c109b6a", "committedDate": "2020-09-09T20:27:14Z", "message": "Add null check while fetching the schema\n\nWhen call ZKMetadataProvider:getSchema(), input parameter schemaName\nis declared as `Nonnull`; however, it's possible that we pass null value.\nThis pr adds the null check to avoid the such case."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 5, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}