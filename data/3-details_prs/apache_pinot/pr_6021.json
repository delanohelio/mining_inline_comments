{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3NjA0ODYw", "number": 6021, "title": "List of partitioners in SegmentProcessorFramework", "bodyText": "#5753\nChanging SegmentPrpcessorFramework config to take List of Partitioners. This is to account for table config's partitioning, which might need to be applied regardless of other partitioning configured. For example, we want to partition by date so as to align segments by time, but we also want to apply Murmur on some id column each to further partition and record in segment metadata.", "createdAt": "2020-09-15T22:04:55Z", "url": "https://github.com/apache/pinot/pull/6021", "merged": true, "mergeCommit": {"oid": "cef2740fa0fda2347e4d230fd3089844ceb9c020"}, "closed": true, "closedAt": "2020-09-17T21:05:17Z", "author": {"login": "npawar"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJPE4uAH2gAyNDg3NjA0ODYwOjYzOWM0YzhiNmY3ZTE0NzM2NWU3YTE4YTA4OGUyNjMzOGY0ZDBlNWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJRLBrgFqTQ4OTE5MjQ1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "639c4c8b6f7e147365e7a18a088e26338f4d0e5f", "author": {"user": {"login": "npawar", "name": "Neha Pawar"}}, "url": "https://github.com/apache/pinot/commit/639c4c8b6f7e147365e7a18a088e26338f4d0e5f", "committedDate": "2020-09-15T21:56:28Z", "message": "List of partitioners in SegmentProcessorFramework"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5MTg4MTM4", "url": "https://github.com/apache/pinot/pull/6021#pullrequestreview-489188138", "createdAt": "2020-09-16T00:09:14Z", "commit": {"oid": "639c4c8b6f7e147365e7a18a088e26338f4d0e5f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5MTkyNDUw", "url": "https://github.com/apache/pinot/pull/6021#pullrequestreview-489192450", "createdAt": "2020-09-16T00:22:58Z", "commit": {"oid": "639c4c8b6f7e147365e7a18a088e26338f4d0e5f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwMDoyMjo1OVrOHSbrFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwMDoyMjo1OVrOHSbrFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTA4OTgxMw==", "bodyText": "The \"_\" here is very significant, right? It cannot be changed, and has to be used the same way across multiple components. Could you please declare it as. a final string in some Constants class as a partition separator or something?\nAnd then re-use in tests\nthanks", "url": "https://github.com/apache/pinot/pull/6021#discussion_r489089813", "createdAt": "2020-09-16T00:22:59Z", "author": {"login": "mcvsubbu"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/segment/processing/framework/SegmentMapper.java", "diffHunk": "@@ -100,8 +110,11 @@ public void map()\n       }\n \n       // Partitioning\n-      // TODO: 2 step partitioner. 1) Apply custom partitioner 2) Apply table config partitioner. Combine both to get final partition.\n-      String partition = _partitioner.getPartition(reusableRow);\n+      int p = 0;\n+      for (Partitioner partitioner : _partitioners) {\n+        partitions[p++] = partitioner.getPartition(reusableRow);\n+      }\n+      String partition = StringUtil.join(\"_\", partitions);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "639c4c8b6f7e147365e7a18a088e26338f4d0e5f"}, "originalPosition": 68}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 47, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}