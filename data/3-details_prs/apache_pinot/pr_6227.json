{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0OTY5NzY2", "number": 6227, "title": "[TE]frontend - Refactor detection-health and stats component", "bodyText": "Currently the detection-health component does not have the hosting container and tooltips. As a result it is individually configured in the calling component. Figured that part should remain the same regardless of which component instantiates the detection-health component. As a result, moving that static html inside the component.\nThe stats-cards component has duplicated code which could be removed by using the if template helper. We would be doing another round of refactoring here once the performance-api is ready.", "createdAt": "2020-11-03T20:18:14Z", "url": "https://github.com/apache/pinot/pull/6227", "merged": true, "mergeCommit": {"oid": "45862790d34f6a1c7a8cc9dfc54dd2c32a384ee0"}, "closed": true, "closedAt": "2020-11-06T22:35:59Z", "author": {"login": "tejasajmera"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdY_M77ABqjM5NTQ2NzgzODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZ-zYtgFqTUyNTUzNjU0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "734c2b5baf01b7d792be07fd253b59166c635f2e", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/734c2b5baf01b7d792be07fd253b59166c635f2e", "committedDate": "2020-11-03T20:07:46Z", "message": "[TE]frontend - Refactor detection-health and stats component"}, "afterCommit": {"oid": "50650da50ffa5778ec875c581fcbd64dbcc81d69", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/50650da50ffa5778ec875c581fcbd64dbcc81d69", "committedDate": "2020-11-03T20:27:51Z", "message": "[TE]frontend - Refactor detection-health and stats component"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "50650da50ffa5778ec875c581fcbd64dbcc81d69", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/50650da50ffa5778ec875c581fcbd64dbcc81d69", "committedDate": "2020-11-03T20:27:51Z", "message": "[TE]frontend - Refactor detection-health and stats component"}, "afterCommit": {"oid": "78aec9cd22853b6bd4411f2ec19dfca4b5b2084c", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/78aec9cd22853b6bd4411f2ec19dfca4b5b2084c", "committedDate": "2020-11-03T20:33:59Z", "message": "[TE]frontend - Refactor detection-health and stats component"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyODkwMDUw", "url": "https://github.com/apache/pinot/pull/6227#pullrequestreview-522890050", "createdAt": "2020-11-03T21:33:27Z", "commit": {"oid": "78aec9cd22853b6bd4411f2ec19dfca4b5b2084c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMTozMzoyN1rOHtBO0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMTo0MzoxMlrOHtBf0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk2ODE0NA==", "bodyText": "It's better to use semantic tag here, such as section", "url": "https://github.com/apache/pinot/pull/6227#discussion_r516968144", "createdAt": "2020-11-03T21:33:27Z", "author": {"login": "zhangloo333"}, "path": "thirdeye/thirdeye-frontend/app/pods/components/detection-health/template.hbs", "diffHunk": "@@ -1,84 +1,103 @@\n-<ul class=\"te-horizontal-cards__single-card\">\n-  <li class=\"te-horizontal-cards__card-title\">\n-    <label for=\"select-dimension\" class=\"control-label te-label--no-bottom\">\n-      30-day status\n+<div class=\"te-horizontal-cards te-content-block__detection-health\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78aec9cd22853b6bd4411f2ec19dfca4b5b2084c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk2ODc2Mg==", "bodyText": "I curious why we need a . here.", "url": "https://github.com/apache/pinot/pull/6227#discussion_r516968762", "createdAt": "2020-11-03T21:34:47Z", "author": {"login": "zhangloo333"}, "path": "thirdeye/thirdeye-frontend/app/pods/components/detection-health/template.hbs", "diffHunk": "@@ -1,84 +1,103 @@\n-<ul class=\"te-horizontal-cards__single-card\">\n-  <li class=\"te-horizontal-cards__card-title\">\n-    <label for=\"select-dimension\" class=\"control-label te-label--no-bottom\">\n-      30-day status\n+<div class=\"te-horizontal-cards te-content-block__detection-health\">\n+  <h4 class=\"te-self-serve__block-title\">\n+    <label for=\"select-dimension\" class=\"control-label te-label\">\n+      Detection health\n       <span>\n         <i class=\"glyphicon glyphicon-question-sign\"></i>\n-        {{#tooltip-on-element class=\"te-tooltip\"}}\n-          The overall health status of your detection configuration is based on\n-          the most recent 30 days.\n-        {{/tooltip-on-element}}\n+          {{#tooltip-on-element class=\"te-tooltip\"}}\n+            See how your detection configuration is performing in detail\n+            by clicking 'view details' below{{#if showRules}},\n+            and select different rules above the graph\n+            to see their respective regression errors{{/if}}.\n+          {{/tooltip-on-element}}\n       </span>\n     </label>\n-  </li>\n-  <li class=\"te-horizontal-cards__card-number{{overall.label}}\">\n-    {{overall.status}}\n-  </li>\n-  <a role=\"button\" tabindex=\"0\" class=\".te-button--link\">\n-    view details\n-    {{#bs-popover placement=\"bottom\" title=\"Detection health\"}}\n-      <p>Overall health of the metrics that monitor detection performance.</p>\n+  </h4>\n+  <div class=\"te-horizontal-cards__container\">\n+    <ul class=\"te-horizontal-cards__single-card\">\n+      <li class=\"te-horizontal-cards__card-title\">\n+        <label for=\"select-dimension\" class=\"control-label te-label--no-bottom\">\n+          30-day status\n+          <span>\n+            <i class=\"glyphicon glyphicon-question-sign\"></i>\n+            {{#tooltip-on-element class=\"te-tooltip\"}}\n+              The overall health status of your detection configuration is based on\n+              the most recent 30 days.\n+            {{/tooltip-on-element}}\n+          </span>\n+        </label>\n+      </li>\n+      <li class=\"te-horizontal-cards__card-number{{overall.label}}\">\n+        {{overall.status}}\n+      </li>\n+      <a role=\"button\" tabindex=\"0\" class=\".te-button--link\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78aec9cd22853b6bd4411f2ec19dfca4b5b2084c"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk2OTU4MQ==", "bodyText": "do you need a hyphen here to meet the BEM requirement?", "url": "https://github.com/apache/pinot/pull/6227#discussion_r516969581", "createdAt": "2020-11-03T21:36:38Z", "author": {"login": "zhangloo333"}, "path": "thirdeye/thirdeye-frontend/app/pods/components/detection-health/template.hbs", "diffHunk": "@@ -1,84 +1,103 @@\n-<ul class=\"te-horizontal-cards__single-card\">\n-  <li class=\"te-horizontal-cards__card-title\">\n-    <label for=\"select-dimension\" class=\"control-label te-label--no-bottom\">\n-      30-day status\n+<div class=\"te-horizontal-cards te-content-block__detection-health\">\n+  <h4 class=\"te-self-serve__block-title\">\n+    <label for=\"select-dimension\" class=\"control-label te-label\">\n+      Detection health\n       <span>\n         <i class=\"glyphicon glyphicon-question-sign\"></i>\n-        {{#tooltip-on-element class=\"te-tooltip\"}}\n-          The overall health status of your detection configuration is based on\n-          the most recent 30 days.\n-        {{/tooltip-on-element}}\n+          {{#tooltip-on-element class=\"te-tooltip\"}}\n+            See how your detection configuration is performing in detail\n+            by clicking 'view details' below{{#if showRules}},\n+            and select different rules above the graph\n+            to see their respective regression errors{{/if}}.\n+          {{/tooltip-on-element}}\n       </span>\n     </label>\n-  </li>\n-  <li class=\"te-horizontal-cards__card-number{{overall.label}}\">\n-    {{overall.status}}\n-  </li>\n-  <a role=\"button\" tabindex=\"0\" class=\".te-button--link\">\n-    view details\n-    {{#bs-popover placement=\"bottom\" title=\"Detection health\"}}\n-      <p>Overall health of the metrics that monitor detection performance.</p>\n+  </h4>\n+  <div class=\"te-horizontal-cards__container\">\n+    <ul class=\"te-horizontal-cards__single-card\">\n+      <li class=\"te-horizontal-cards__card-title\">\n+        <label for=\"select-dimension\" class=\"control-label te-label--no-bottom\">\n+          30-day status\n+          <span>\n+            <i class=\"glyphicon glyphicon-question-sign\"></i>\n+            {{#tooltip-on-element class=\"te-tooltip\"}}\n+              The overall health status of your detection configuration is based on\n+              the most recent 30 days.\n+            {{/tooltip-on-element}}\n+          </span>\n+        </label>\n+      </li>\n+      <li class=\"te-horizontal-cards__card-number{{overall.label}}\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78aec9cd22853b6bd4411f2ec19dfca4b5b2084c"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk3MjQ5Ng==", "bodyText": "Some indent issue. it would be better to fix it.", "url": "https://github.com/apache/pinot/pull/6227#discussion_r516972496", "createdAt": "2020-11-03T21:43:12Z", "author": {"login": "zhangloo333"}, "path": "thirdeye/thirdeye-frontend/app/pods/components/detection-health/template.hbs", "diffHunk": "@@ -1,84 +1,103 @@\n-<ul class=\"te-horizontal-cards__single-card\">\n-  <li class=\"te-horizontal-cards__card-title\">\n-    <label for=\"select-dimension\" class=\"control-label te-label--no-bottom\">\n-      30-day status\n+<div class=\"te-horizontal-cards te-content-block__detection-health\">\n+  <h4 class=\"te-self-serve__block-title\">\n+    <label for=\"select-dimension\" class=\"control-label te-label\">\n+      Detection health\n       <span>\n         <i class=\"glyphicon glyphicon-question-sign\"></i>\n-        {{#tooltip-on-element class=\"te-tooltip\"}}\n-          The overall health status of your detection configuration is based on\n-          the most recent 30 days.\n-        {{/tooltip-on-element}}\n+          {{#tooltip-on-element class=\"te-tooltip\"}}\n+            See how your detection configuration is performing in detail\n+            by clicking 'view details' below{{#if showRules}},\n+            and select different rules above the graph\n+            to see their respective regression errors{{/if}}.\n+          {{/tooltip-on-element}}\n       </span>\n     </label>\n-  </li>\n-  <li class=\"te-horizontal-cards__card-number{{overall.label}}\">\n-    {{overall.status}}\n-  </li>\n-  <a role=\"button\" tabindex=\"0\" class=\".te-button--link\">\n-    view details\n-    {{#bs-popover placement=\"bottom\" title=\"Detection health\"}}\n-      <p>Overall health of the metrics that monitor detection performance.</p>\n+  </h4>\n+  <div class=\"te-horizontal-cards__container\">\n+    <ul class=\"te-horizontal-cards__single-card\">\n+      <li class=\"te-horizontal-cards__card-title\">\n+        <label for=\"select-dimension\" class=\"control-label te-label--no-bottom\">\n+          30-day status\n+          <span>\n+            <i class=\"glyphicon glyphicon-question-sign\"></i>\n+            {{#tooltip-on-element class=\"te-tooltip\"}}\n+              The overall health status of your detection configuration is based on\n+              the most recent 30 days.\n+            {{/tooltip-on-element}}\n+          </span>\n+        </label>\n+      </li>\n+      <li class=\"te-horizontal-cards__card-number{{overall.label}}\">\n+        {{overall.status}}\n+      </li>\n+      <a role=\"button\" tabindex=\"0\" class=\".te-button--link\">\n+        view details\n+        {{#bs-popover placement=\"bottom\" title=\"Detection health\"}}\n+          <p>Overall health of the metrics that monitor detection performance.</p>\n \n-      <label class=\"control-label te-label\">\n-        Detection task status\n-      </label>\n+          <label class=\"control-label te-label\">\n+            Detection task status\n+          </label>\n \n-      <div class=\"te-horizontal-metrics__container\">\n-        <ul class=\"te-horizontal-metrics__metric\">\n-          <li class=\"te-horizontal-metrics__number\">{{executionTime}}</li>\n-          <li class=\"te-horizontal-metrics__title\">Last success detection task finish time</li>\n-        </ul>\n-      </div>\n+          <div class=\"te-horizontal-metrics__container\">\n+            <ul class=\"te-horizontal-metrics__metric\">\n+              <li class=\"te-horizontal-metrics__number\">{{executionTime}}</li>\n+              <li class=\"te-horizontal-metrics__title\">Last success detection task finish time</li>\n+            </ul>\n+          </div>\n \n-      <div class=\"te-horizontal-metrics__container\">\n-        <ul class=\"te-horizontal-metrics__metric\">\n-          <li class=\"te-horizontal-metrics__number{{detection.label}}\">{{detection.status}}</li>\n-          <li class=\"te-horizontal-metrics__title\">Status</li>\n-        </ul>\n+          <div class=\"te-horizontal-metrics__container\">\n+            <ul class=\"te-horizontal-metrics__metric\">\n+              <li class=\"te-horizontal-metrics__number{{detection.label}}\">{{detection.status}}</li>\n+              <li class=\"te-horizontal-metrics__title\">Status</li>\n+            </ul>\n \n-        {{#each tasks as |task|}}\n-          <ul class=\"te-horizontal-metrics__metric\">\n-            <li class=\"te-horizontal-metrics__number{{task.label}}\">{{task.number}}</li>\n-            <li class=\"te-horizontal-metrics__title\">{{task.title}}</li>\n-          </ul>\n-        {{/each}}\n-      </div>\n+            {{#each tasks as |task|}}\n+              <ul class=\"te-horizontal-metrics__metric\">\n+                <li class=\"te-horizontal-metrics__number{{task.label}}\">{{task.number}}</li>\n+                <li class=\"te-horizontal-metrics__title\">{{task.title}}</li>\n+              </ul>\n+            {{/each}}\n+          </div>\n \n-      <label class=\"control-label te-label\">\n-        Anomaly coverage ratio\n-      </label>\n+          <label class=\"control-label te-label\">\n+            Anomaly coverage ratio\n+          </label>\n \n-      <div class=\"te-horizontal-metrics__container\">\n-        <ul class=\"te-horizontal-metrics__metric\">\n-          <li class=\"te-horizontal-metrics__number{{anomalyCoverage.label}}\">{{anomalyCoverage.status}}</li>\n-          <li class=\"te-horizontal-metrics__title\">Status</li>\n-        </ul>\n+          <div class=\"te-horizontal-metrics__container\">\n+            <ul class=\"te-horizontal-metrics__metric\">\n+              <li class=\"te-horizontal-metrics__number{{anomalyCoverage.label}}\">{{anomalyCoverage.status}}</li>\n+              <li class=\"te-horizontal-metrics__title\">Status</li>\n+            </ul>\n \n-        <ul class=\"te-horizontal-metrics__metric\">\n-          <li class=\"te-horizontal-metrics__number\">{{anomalyCoverage.ratio}}%</li>\n-          <li class=\"te-horizontal-metrics__title\">The percentage of anomalous duration over the past 30 days</li>\n-        </ul>\n-      </div>\n+            <ul class=\"te-horizontal-metrics__metric\">\n+              <li class=\"te-horizontal-metrics__number\">{{anomalyCoverage.ratio}}%</li>\n+              <li class=\"te-horizontal-metrics__title\">The percentage of anomalous duration over the past 30 days</li>\n+            </ul>\n+          </div>\n \n-      <p>To improve this, adjust alert sensitivity using preview.</p>\n+          <p>To improve this, adjust alert sensitivity using preview.</p>\n \n-      <label class=\"control-label te-label\">\n-        Regression error{{#if regressionInfo.rule}} for {{regressionInfo.rule}}{{/if}}\n-      </label>\n+          <label class=\"control-label te-label\">\n+            Regression error{{#if regressionInfo.rule}} for {{regressionInfo.rule}}{{/if}}\n+          </label>\n \n-      <div class=\"te-horizontal-metrics__container\">\n-        <ul class=\"te-horizontal-metrics__metric\">\n-          <li class=\"te-horizontal-metrics__number{{regressionInfo.label}}\">{{regressionInfo.status}}</li>\n-          <li class=\"te-horizontal-metrics__title\">Status</li>\n-        </ul>\n+          <div class=\"te-horizontal-metrics__container\">\n+            <ul class=\"te-horizontal-metrics__metric\">\n+              <li class=\"te-horizontal-metrics__number{{regressionInfo.label}}\">{{regressionInfo.status}}</li>\n+              <li class=\"te-horizontal-metrics__title\">Status</li>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78aec9cd22853b6bd4411f2ec19dfca4b5b2084c"}, "originalPosition": 147}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "78aec9cd22853b6bd4411f2ec19dfca4b5b2084c", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/78aec9cd22853b6bd4411f2ec19dfca4b5b2084c", "committedDate": "2020-11-03T20:33:59Z", "message": "[TE]frontend - Refactor detection-health and stats component"}, "afterCommit": {"oid": "55f0560df49a2ee400aa0bdc14baeeca6b4faaae", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/55f0560df49a2ee400aa0bdc14baeeca6b4faaae", "committedDate": "2020-11-03T22:22:11Z", "message": "[TE]frontend - Refactor detection-health and stats component"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "55f0560df49a2ee400aa0bdc14baeeca6b4faaae", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/55f0560df49a2ee400aa0bdc14baeeca6b4faaae", "committedDate": "2020-11-03T22:22:11Z", "message": "[TE]frontend - Refactor detection-health and stats component"}, "afterCommit": {"oid": "a1ff905552b0f2b837349a2c3eb0ed3f06c74d85", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/a1ff905552b0f2b837349a2c3eb0ed3f06c74d85", "committedDate": "2020-11-04T02:35:33Z", "message": "[TE]frontend - Refactor detection-health and stats component"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzNTcxNTMz", "url": "https://github.com/apache/pinot/pull/6227#pullrequestreview-523571533", "createdAt": "2020-11-04T17:15:18Z", "commit": {"oid": "a1ff905552b0f2b837349a2c3eb0ed3f06c74d85"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a1ff905552b0f2b837349a2c3eb0ed3f06c74d85", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/a1ff905552b0f2b837349a2c3eb0ed3f06c74d85", "committedDate": "2020-11-04T02:35:33Z", "message": "[TE]frontend - Refactor detection-health and stats component"}, "afterCommit": {"oid": "360c2c9340f7869252f82585f41771248b155501", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/360c2c9340f7869252f82585f41771248b155501", "committedDate": "2020-11-06T20:17:08Z", "message": "[TE]frontend - Refactor detection-health and stats component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b78391e917ae5180cc408deef42b2eca3ce9553", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/4b78391e917ae5180cc408deef42b2eca3ce9553", "committedDate": "2020-11-06T22:18:48Z", "message": "[TE]frontend - Refactor detection-health and stats component"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "360c2c9340f7869252f82585f41771248b155501", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/360c2c9340f7869252f82585f41771248b155501", "committedDate": "2020-11-06T20:17:08Z", "message": "[TE]frontend - Refactor detection-health and stats component"}, "afterCommit": {"oid": "4b78391e917ae5180cc408deef42b2eca3ce9553", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/4b78391e917ae5180cc408deef42b2eca3ce9553", "committedDate": "2020-11-06T22:18:48Z", "message": "[TE]frontend - Refactor detection-health and stats component"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1NTM2NTQ3", "url": "https://github.com/apache/pinot/pull/6227#pullrequestreview-525536547", "createdAt": "2020-11-06T22:35:35Z", "commit": {"oid": "4b78391e917ae5180cc408deef42b2eca3ce9553"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1733, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}