{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxMTUyMzg0", "number": 6265, "title": "[TE] rest-api - harleyjj/rca - add forecast as baseline option for me\u2026", "bodyText": "\u2026tric/timeseries endpoint", "createdAt": "2020-11-15T06:27:21Z", "url": "https://github.com/apache/pinot/pull/6265", "merged": true, "mergeCommit": {"oid": "e8ceb2e74b0932a869043b4c00c70fd0eb63db4d"}, "closed": true, "closedAt": "2020-12-03T20:12:38Z", "author": {"login": "harleyjj"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddL7k0AFqTUzMTc5NDk5NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdio8F7AFqTU0NDM3ODM3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxNzk0OTk0", "url": "https://github.com/apache/pinot/pull/6265#pullrequestreview-531794994", "createdAt": "2020-11-16T21:29:54Z", "commit": {"oid": "2d04c3b666d673a7af6791a286433d9b791e947b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMToyOTo1NFrOH0Ta6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMTozNDo1NFrOH0Tx8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDYwNjE4Ng==", "bodyText": "is this one used anywhere? if not I would remove it.", "url": "https://github.com/apache/pinot/pull/6265#discussion_r524606186", "createdAt": "2020-11-16T21:29:54Z", "author": {"login": "jihaozh"}, "path": "thirdeye/thirdeye-dashboard/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/v2/RootCauseMetricResource.java", "diffHunk": "@@ -102,14 +121,29 @@\n   private final TimeSeriesLoader timeSeriesLoader;\n   private final MetricConfigManager metricDAO;\n   private final DatasetConfigManager datasetDAO;\n+  private final EventManager eventDAO;\n+  private final MergedAnomalyResultManager anomalyDAO;\n+  private final EvaluationManager evaluationDAO;\n+  private final DetectionPipelineLoader loader;\n+  private final DataProvider dataProvider;\n \n   public RootCauseMetricResource(ExecutorService executor, AggregationLoader aggregationLoader,\n-      TimeSeriesLoader timeSeriesLoader, MetricConfigManager metricDAO, DatasetConfigManager datasetDAO) {\n+      TimeSeriesLoader timeSeriesLoader, MetricConfigManager metricDAO, DatasetConfigManager datasetDAO,\n+      EventManager eventDAO, MergedAnomalyResultManager anomalyDAO, EvaluationManager evaluationDAO) {\n     this.executor = executor;\n     this.aggregationLoader = aggregationLoader;\n     this.timeSeriesLoader = timeSeriesLoader;\n     this.metricDAO = metricDAO;\n     this.datasetDAO = datasetDAO;\n+    this.eventDAO = eventDAO;\n+    this.anomalyDAO = anomalyDAO;\n+    this.evaluationDAO = evaluationDAO;\n+    this.loader = new DetectionPipelineLoader();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d04c3b666d673a7af6791a286433d9b791e947b"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDYxMjA4Mw==", "bodyText": "remove if this isn't used.", "url": "https://github.com/apache/pinot/pull/6265#discussion_r524612083", "createdAt": "2020-11-16T21:34:54Z", "author": {"login": "jihaozh"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/v2/BaselineParsingUtils.java", "diffHunk": "@@ -31,6 +31,7 @@\n public class BaselineParsingUtils {\n   private static final Pattern PATTERN_NONE = Pattern.compile(\"none\");\n   private static final Pattern PATTERN_PREDICTED = Pattern.compile(\"predicted\");\n+  private static final Pattern PATTERN_FORECAST = Pattern.compile(\"forecast\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d04c3b666d673a7af6791a286433d9b791e947b"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxODQ1NzIx", "url": "https://github.com/apache/pinot/pull/6265#pullrequestreview-531845721", "createdAt": "2020-11-16T22:39:52Z", "commit": {"oid": "2d04c3b666d673a7af6791a286433d9b791e947b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjozOTo1MlrOH0YtMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjozOTo1MlrOH0YtMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY5Mjc4NQ==", "bodyText": "consider OFFSET_FORECAST.equals(offset) to avoid NPE", "url": "https://github.com/apache/pinot/pull/6265#discussion_r524692785", "createdAt": "2020-11-16T22:39:52Z", "author": {"login": "bryantachen"}, "path": "thirdeye/thirdeye-dashboard/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/v2/RootCauseMetricResource.java", "diffHunk": "@@ -406,6 +440,30 @@ public double getAggregate(@ApiParam(value = \"metric urn\", required = true) @Que\n \n     TimeGranularity granularity = TimeGranularity.fromString(granularityString);\n     MetricSlice baseSlice = alignSlice(makeSlice(urn, start, end, granularity), timezone);\n+\n+    if(offset.equals(OFFSET_FORECAST)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d04c3b666d673a7af6791a286433d9b791e947b"}, "originalPosition": 87}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2d04c3b666d673a7af6791a286433d9b791e947b", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/2d04c3b666d673a7af6791a286433d9b791e947b", "committedDate": "2020-11-15T06:25:52Z", "message": "[TE] rest-api - harleyjj/rca - add forecast as baseline option for metric/timeseries endpoint"}, "afterCommit": {"oid": "e81fe2d6afdcd362f08da3d9a345077bd0f72bcb", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/e81fe2d6afdcd362f08da3d9a345077bd0f72bcb", "committedDate": "2020-11-20T07:22:25Z", "message": "[TE] rest-api - harleyjj/rca - add forecast as baseline option for metric/timeseries endpoint"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e81fe2d6afdcd362f08da3d9a345077bd0f72bcb", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/e81fe2d6afdcd362f08da3d9a345077bd0f72bcb", "committedDate": "2020-11-20T07:22:25Z", "message": "[TE] rest-api - harleyjj/rca - add forecast as baseline option for metric/timeseries endpoint"}, "afterCommit": {"oid": "98d9e9d400d1cbf45a91c9f63873e67646ee8b17", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/98d9e9d400d1cbf45a91c9f63873e67646ee8b17", "committedDate": "2020-11-20T07:25:10Z", "message": "[TE] rest-api - harleyjj/rca - add forecast as baseline option for metric/timeseries endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f9555c31be68dc5162ae89142ad06037d56a1fd", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/7f9555c31be68dc5162ae89142ad06037d56a1fd", "committedDate": "2020-12-01T00:03:39Z", "message": "[TE] rest-api - harleyjj/rca - add forecast as baseline option for metric/timeseries endpoint"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98d9e9d400d1cbf45a91c9f63873e67646ee8b17", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/98d9e9d400d1cbf45a91c9f63873e67646ee8b17", "committedDate": "2020-11-20T07:25:10Z", "message": "[TE] rest-api - harleyjj/rca - add forecast as baseline option for metric/timeseries endpoint"}, "afterCommit": {"oid": "7f9555c31be68dc5162ae89142ad06037d56a1fd", "author": {"user": {"login": "harleyjj", "name": "Harley Jackson"}}, "url": "https://github.com/apache/pinot/commit/7f9555c31be68dc5162ae89142ad06037d56a1fd", "committedDate": "2020-12-01T00:03:39Z", "message": "[TE] rest-api - harleyjj/rca - add forecast as baseline option for metric/timeseries endpoint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0Mzc4Mzc2", "url": "https://github.com/apache/pinot/pull/6265#pullrequestreview-544378376", "createdAt": "2020-12-03T20:12:31Z", "commit": {"oid": "7f9555c31be68dc5162ae89142ad06037d56a1fd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1795, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}