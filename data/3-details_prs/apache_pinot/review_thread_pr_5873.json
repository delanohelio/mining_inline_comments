{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4NDg3OTE4", "number": 5873, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwMDoyODozNFrOEY2zeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMDo1MzozNFrOEfrMWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NDk5MTkyOnYy", "diffSide": "RIGHT", "path": "pinot-plugins/pinot-batch-ingestion/v0_deprecated/pinot-hadoop/src/main/java/org/apache/pinot/hadoop/job/mappers/SegmentCreationMapper.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwMDoyODozNFrOHBWkJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDoyNzo1OFrOHDpGGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE4MDMyNw==", "bodyText": "Seems like we are breaking interface here, what' the reasoning for that? Either the api should be justified to be part of the interface, or the design is broken somehow.", "url": "https://github.com/apache/pinot/pull/5873#discussion_r471180327", "createdAt": "2020-08-17T00:28:34Z", "author": {"login": "mayankshriv"}, "path": "pinot-plugins/pinot-batch-ingestion/v0_deprecated/pinot-hadoop/src/main/java/org/apache/pinot/hadoop/job/mappers/SegmentCreationMapper.java", "diffHunk": "@@ -243,14 +257,15 @@ protected void map(LongWritable key, Text value, Context context)\n     addAdditionalSegmentGeneratorConfigs(segmentGeneratorConfig, hdfsInputFile, sequenceId);\n \n     _logger.info(\"Start creating segment with sequence id: {}\", sequenceId);\n-    SegmentIndexCreationDriver driver = new SegmentIndexCreationDriverImpl();\n+    SegmentIndexCreationDriverImpl driver = new SegmentIndexCreationDriverImpl();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b0b77810fe701387457afd9bf91f283d94b5b7e"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE4ODMwOA==", "bodyText": "+1\nIt has been on my radar to add a columnar segment creation driver (for realtime), and this will break completely", "url": "https://github.com/apache/pinot/pull/5873#discussion_r471188308", "createdAt": "2020-08-17T01:21:12Z", "author": {"login": "mcvsubbu"}, "path": "pinot-plugins/pinot-batch-ingestion/v0_deprecated/pinot-hadoop/src/main/java/org/apache/pinot/hadoop/job/mappers/SegmentCreationMapper.java", "diffHunk": "@@ -243,14 +257,15 @@ protected void map(LongWritable key, Text value, Context context)\n     addAdditionalSegmentGeneratorConfigs(segmentGeneratorConfig, hdfsInputFile, sequenceId);\n \n     _logger.info(\"Start creating segment with sequence id: {}\", sequenceId);\n-    SegmentIndexCreationDriver driver = new SegmentIndexCreationDriverImpl();\n+    SegmentIndexCreationDriverImpl driver = new SegmentIndexCreationDriverImpl();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE4MDMyNw=="}, "originalCommit": {"oid": "8b0b77810fe701387457afd9bf91f283d94b5b7e"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU4MTA4MA==", "bodyText": "Added a class called SchemaValidator to validate Pinot schema and the input data schema", "url": "https://github.com/apache/pinot/pull/5873#discussion_r473581080", "createdAt": "2020-08-20T04:27:58Z", "author": {"login": "jackjlli"}, "path": "pinot-plugins/pinot-batch-ingestion/v0_deprecated/pinot-hadoop/src/main/java/org/apache/pinot/hadoop/job/mappers/SegmentCreationMapper.java", "diffHunk": "@@ -243,14 +257,15 @@ protected void map(LongWritable key, Text value, Context context)\n     addAdditionalSegmentGeneratorConfigs(segmentGeneratorConfig, hdfsInputFile, sequenceId);\n \n     _logger.info(\"Start creating segment with sequence id: {}\", sequenceId);\n-    SegmentIndexCreationDriver driver = new SegmentIndexCreationDriverImpl();\n+    SegmentIndexCreationDriverImpl driver = new SegmentIndexCreationDriverImpl();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE4MDMyNw=="}, "originalCommit": {"oid": "8b0b77810fe701387457afd9bf91f283d94b5b7e"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NTAwNDg1OnYy", "diffSide": "RIGHT", "path": "pinot-plugins/pinot-batch-ingestion/v0_deprecated/pinot-hadoop/src/main/java/org/apache/pinot/hadoop/job/mappers/SegmentCreationMapper.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwMDo0MDo0M1rOHBWqrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwMDo0MDo0M1rOHBWqrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE4MTk5OQ==", "bodyText": "Seems like we will have to either write pairwise validators (pinot-avro, pinot-orc, pinot-json, etc). Or can write pair-wise schema converters (avro->pinot, orc->pinot, json->pinot), and then the schema validator will only compare two pinot schemas (one provided as input, other derived from format). At this point, I see pros/cons in both, but leaning towards former as it provides dedicated validation between formats.\nHowever, in either of the approaches, I'd recommend creating interfaces/impls. For example, an interface for validator (with pair-wise impls), or an interaface for converter (with pair-wise converters, and validator just works over interface).", "url": "https://github.com/apache/pinot/pull/5873#discussion_r471181999", "createdAt": "2020-08-17T00:40:43Z", "author": {"login": "mayankshriv"}, "path": "pinot-plugins/pinot-batch-ingestion/v0_deprecated/pinot-hadoop/src/main/java/org/apache/pinot/hadoop/job/mappers/SegmentCreationMapper.java", "diffHunk": "@@ -353,8 +368,71 @@ protected void addAdditionalSegmentGeneratorConfigs(SegmentGeneratorConfig segme\n       int sequenceId) {\n   }\n \n+  public void validateSchema(SegmentGeneratorConfig segmentGeneratorConfig, RecordReader recordReader) {\n+    if (recordReader instanceof AvroRecordReader) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b0b77810fe701387457afd9bf91f283d94b5b7e"}, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxMDYwODE5OnYy", "diffSide": "RIGHT", "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidator.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMzoyNDoxN1rOHLLj3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMToyNToyOFrOHMIuVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ4NTc5MQ==", "bodyText": "Suggest to rename this as IngestionSchemaValidator ? Or, InputSchemaValidator (still confusing I think).  Otherwise it reads as if we are validating pinot schema.\nIf we add a validator in PinotSchemaRestlet when the rest api call updates the schema, what would we call it?", "url": "https://github.com/apache/pinot/pull/5873#discussion_r481485791", "createdAt": "2020-09-01T23:24:17Z", "author": {"login": "mcvsubbu"}, "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidator.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.spi.data;\n+\n+\n+/**\n+ * Validator to validate the schema between Pinot schema and input raw data schema\n+ */\n+public interface SchemaValidator {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fb58c099e8152276348add92cfec72b866f65e0"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQ1MTY5Mw==", "bodyText": "Do u agree to this? Or, do you want to leave it as SchemaValidator?", "url": "https://github.com/apache/pinot/pull/5873#discussion_r482451693", "createdAt": "2020-09-02T20:52:37Z", "author": {"login": "mcvsubbu"}, "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidator.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.spi.data;\n+\n+\n+/**\n+ * Validator to validate the schema between Pinot schema and input raw data schema\n+ */\n+public interface SchemaValidator {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ4NTc5MQ=="}, "originalCommit": {"oid": "0fb58c099e8152276348add92cfec72b866f65e0"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQ4Nzg5Mw==", "bodyText": "Renamed it to IngestionSchemaValidator in the latest push", "url": "https://github.com/apache/pinot/pull/5873#discussion_r482487893", "createdAt": "2020-09-02T21:25:28Z", "author": {"login": "jackjlli"}, "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidator.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.spi.data;\n+\n+\n+/**\n+ * Validator to validate the schema between Pinot schema and input raw data schema\n+ */\n+public interface SchemaValidator {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ4NTc5MQ=="}, "originalCommit": {"oid": "0fb58c099e8152276348add92cfec72b866f65e0"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxMDYxNzk5OnYy", "diffSide": "RIGHT", "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidator.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMzoyOTowM1rOHLLprg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNzo1NDozOVrOHL6v2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ4NzI3OA==", "bodyText": "If we return the field names that have this type of mismatch, and also an error message (e.g. \"input type 'List' does not match with pinot data type 'int' for field 'X') that will be awesome.\nWe can then log this as an error message during segment creation", "url": "https://github.com/apache/pinot/pull/5873#discussion_r481487278", "createdAt": "2020-09-01T23:29:03Z", "author": {"login": "mcvsubbu"}, "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidator.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.spi.data;\n+\n+\n+/**\n+ * Validator to validate the schema between Pinot schema and input raw data schema\n+ */\n+public interface SchemaValidator {\n+\n+  void init(Schema pinotSchema, String inputFilePath);\n+\n+  boolean isDataTypeMismatch();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fb58c099e8152276348add92cfec72b866f65e0"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjI1ODkwNw==", "bodyText": "Added a class called SchemaValidatorResult to provide detailed information. I've added the sample detailed info in the description of this PR.", "url": "https://github.com/apache/pinot/pull/5873#discussion_r482258907", "createdAt": "2020-09-02T17:54:39Z", "author": {"login": "jackjlli"}, "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidator.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.spi.data;\n+\n+\n+/**\n+ * Validator to validate the schema between Pinot schema and input raw data schema\n+ */\n+public interface SchemaValidator {\n+\n+  void init(Schema pinotSchema, String inputFilePath);\n+\n+  boolean isDataTypeMismatch();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ4NzI3OA=="}, "originalCommit": {"oid": "0fb58c099e8152276348add92cfec72b866f65e0"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxNjQ4NzE5OnYy", "diffSide": "RIGHT", "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidatorResult.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMDo1MzoxN1rOHMGkzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMDo1MzoxN1rOHMGkzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQ1MjY4Ng==", "bodyText": "Suggestion:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void incrementMismatchCountWithMismatchReason(String reason) {\n          \n          \n            \n              public void addMismatchReason(String reason) {", "url": "https://github.com/apache/pinot/pull/5873#discussion_r482452686", "createdAt": "2020-09-02T20:53:17Z", "author": {"login": "mcvsubbu"}, "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidatorResult.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.spi.data;\n+\n+/**\n+ * The result class to provide the detailed mismatch information.\n+ */\n+public class SchemaValidatorResult {\n+  private long _mismatchCount;\n+  private StringBuilder _mismatchReason;\n+\n+  public SchemaValidatorResult() {\n+    _mismatchCount = 0;\n+    _mismatchReason = new StringBuilder();\n+  }\n+\n+  public boolean isMismatchDetected() {\n+    return _mismatchCount != 0;\n+  }\n+\n+  private void incrementMismatchCount() {\n+    _mismatchCount++;\n+  }\n+\n+  public String getMismatchReason() {\n+    return _mismatchReason.toString();\n+  }\n+\n+  private void addMismatchReason(String reason) {\n+    if (_mismatchReason.length() > 0) {\n+      _mismatchReason.append(\" \");\n+    }\n+    _mismatchReason.append(reason);\n+  }\n+\n+  public void incrementMismatchCountWithMismatchReason(String reason) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "266f6b15ceca6b2fb32fde0063be86c41a332b2f"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxNjQ4OTg2OnYy", "diffSide": "RIGHT", "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidatorResult.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMDo1MzozNFrOHMGmgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMDo1MzozNFrOHMGmgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQ1MzEyMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              private void addMismatchReason(String reason) {\n          \n          \n            \n              private void addMismatchReasonInternal(String reason) {", "url": "https://github.com/apache/pinot/pull/5873#discussion_r482453122", "createdAt": "2020-09-02T20:53:34Z", "author": {"login": "mcvsubbu"}, "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidatorResult.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.spi.data;\n+\n+/**\n+ * The result class to provide the detailed mismatch information.\n+ */\n+public class SchemaValidatorResult {\n+  private long _mismatchCount;\n+  private StringBuilder _mismatchReason;\n+\n+  public SchemaValidatorResult() {\n+    _mismatchCount = 0;\n+    _mismatchReason = new StringBuilder();\n+  }\n+\n+  public boolean isMismatchDetected() {\n+    return _mismatchCount != 0;\n+  }\n+\n+  private void incrementMismatchCount() {\n+    _mismatchCount++;\n+  }\n+\n+  public String getMismatchReason() {\n+    return _mismatchReason.toString();\n+  }\n+\n+  private void addMismatchReason(String reason) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "266f6b15ceca6b2fb32fde0063be86c41a332b2f"}, "originalPosition": 45}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4013, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}