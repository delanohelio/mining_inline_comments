{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxMTUyMzg0", "number": 6265, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMToyOTo1NFrOE5sTXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjozOTo1MlrOE5vUSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4OTMwMTQxOnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-dashboard/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/v2/RootCauseMetricResource.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMToyOTo1NFrOH0Ta6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMToyOTo1NFrOH0Ta6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDYwNjE4Ng==", "bodyText": "is this one used anywhere? if not I would remove it.", "url": "https://github.com/apache/pinot/pull/6265#discussion_r524606186", "createdAt": "2020-11-16T21:29:54Z", "author": {"login": "jihaozh"}, "path": "thirdeye/thirdeye-dashboard/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/v2/RootCauseMetricResource.java", "diffHunk": "@@ -102,14 +121,29 @@\n   private final TimeSeriesLoader timeSeriesLoader;\n   private final MetricConfigManager metricDAO;\n   private final DatasetConfigManager datasetDAO;\n+  private final EventManager eventDAO;\n+  private final MergedAnomalyResultManager anomalyDAO;\n+  private final EvaluationManager evaluationDAO;\n+  private final DetectionPipelineLoader loader;\n+  private final DataProvider dataProvider;\n \n   public RootCauseMetricResource(ExecutorService executor, AggregationLoader aggregationLoader,\n-      TimeSeriesLoader timeSeriesLoader, MetricConfigManager metricDAO, DatasetConfigManager datasetDAO) {\n+      TimeSeriesLoader timeSeriesLoader, MetricConfigManager metricDAO, DatasetConfigManager datasetDAO,\n+      EventManager eventDAO, MergedAnomalyResultManager anomalyDAO, EvaluationManager evaluationDAO) {\n     this.executor = executor;\n     this.aggregationLoader = aggregationLoader;\n     this.timeSeriesLoader = timeSeriesLoader;\n     this.metricDAO = metricDAO;\n     this.datasetDAO = datasetDAO;\n+    this.eventDAO = eventDAO;\n+    this.anomalyDAO = anomalyDAO;\n+    this.evaluationDAO = evaluationDAO;\n+    this.loader = new DetectionPipelineLoader();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d04c3b666d673a7af6791a286433d9b791e947b"}, "originalPosition": 73}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4OTMzNDU0OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/v2/BaselineParsingUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMTozNDo1NFrOH0Tx8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMTozNDo1NFrOH0Tx8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDYxMjA4Mw==", "bodyText": "remove if this isn't used.", "url": "https://github.com/apache/pinot/pull/6265#discussion_r524612083", "createdAt": "2020-11-16T21:34:54Z", "author": {"login": "jihaozh"}, "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/v2/BaselineParsingUtils.java", "diffHunk": "@@ -31,6 +31,7 @@\n public class BaselineParsingUtils {\n   private static final Pattern PATTERN_NONE = Pattern.compile(\"none\");\n   private static final Pattern PATTERN_PREDICTED = Pattern.compile(\"predicted\");\n+  private static final Pattern PATTERN_FORECAST = Pattern.compile(\"forecast\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d04c3b666d673a7af6791a286433d9b791e947b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4OTc5NTI4OnYy", "diffSide": "RIGHT", "path": "thirdeye/thirdeye-dashboard/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/v2/RootCauseMetricResource.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjozOTo1MlrOH0YtMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjozOTo1MlrOH0YtMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY5Mjc4NQ==", "bodyText": "consider OFFSET_FORECAST.equals(offset) to avoid NPE", "url": "https://github.com/apache/pinot/pull/6265#discussion_r524692785", "createdAt": "2020-11-16T22:39:52Z", "author": {"login": "bryantachen"}, "path": "thirdeye/thirdeye-dashboard/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/v2/RootCauseMetricResource.java", "diffHunk": "@@ -406,6 +440,30 @@ public double getAggregate(@ApiParam(value = \"metric urn\", required = true) @Que\n \n     TimeGranularity granularity = TimeGranularity.fromString(granularityString);\n     MetricSlice baseSlice = alignSlice(makeSlice(urn, start, end, granularity), timezone);\n+\n+    if(offset.equals(OFFSET_FORECAST)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d04c3b666d673a7af6791a286433d9b791e947b"}, "originalPosition": 87}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3129, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}