{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3MDAyNDQ4", "number": 5144, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNzoxODoyMFrODobeBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNzoxODoyMFrODobeBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNzE5Njg1OnYy", "diffSide": "RIGHT", "path": "pinot-core/src/main/java/org/apache/pinot/core/query/pruner/ColumnValueSegmentPruner.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNzoxODoyMVrOF2-Q0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxOToyMDo1NlrOF3Coqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE4NzUzNw==", "bodyText": "It would be nice if this javadoc can be enhanced to highlight what all pruning is done. Something like..\n(1) use equality filter value for partition pruning (if table is partitioned)\n(2) use equality filter for bloom filter based pruning\n(2) min-max value based pruner for RANGE", "url": "https://github.com/apache/pinot/pull/5144#discussion_r393187537", "createdAt": "2020-03-16T17:18:21Z", "author": {"login": "siddharthteotia"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/query/pruner/ColumnValueSegmentPruner.java", "diffHunk": "@@ -19,184 +19,224 @@\n package org.apache.pinot.core.query.pruner;\n \n import java.util.HashMap;\n-import java.util.List;\n import java.util.Map;\n-import javax.annotation.Nonnull;\n+import java.util.Set;\n import org.apache.commons.configuration.Configuration;\n-import org.apache.pinot.spi.data.FieldSpec;\n-import org.apache.pinot.common.request.FilterOperator;\n+import org.apache.pinot.common.request.transform.TransformExpressionTree;\n import org.apache.pinot.common.utils.request.FilterQueryTree;\n+import org.apache.pinot.core.common.DataSource;\n+import org.apache.pinot.core.common.DataSourceMetadata;\n import org.apache.pinot.core.common.predicate.RangePredicate;\n+import org.apache.pinot.core.data.partition.PartitionFunction;\n import org.apache.pinot.core.indexsegment.IndexSegment;\n+import org.apache.pinot.core.query.exception.BadQueryRequestException;\n import org.apache.pinot.core.query.request.ServerQueryRequest;\n-import org.apache.pinot.core.segment.index.ColumnMetadata;\n-import org.apache.pinot.core.segment.index.SegmentMetadataImpl;\n import org.apache.pinot.core.segment.index.readers.BloomFilterReader;\n+import org.apache.pinot.spi.data.FieldSpec.DataType;\n+import org.apache.pinot.spi.utils.BytesUtils;\n \n \n /**\n- * An implementation of SegmentPruner.\n- * <p>Pruner will prune segment based on the column value inside the filter.\n+ * The {@code ColumnValueSegmentPruner} is the segment pruner that prunes segments based on the value inside the filter.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9162a4847c62b9cf7e2c7917019f1b952fb9ef46"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI1OTE3OA==", "bodyText": "Updated the doc", "url": "https://github.com/apache/pinot/pull/5144#discussion_r393259178", "createdAt": "2020-03-16T19:20:56Z", "author": {"login": "Jackie-Jiang"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/query/pruner/ColumnValueSegmentPruner.java", "diffHunk": "@@ -19,184 +19,224 @@\n package org.apache.pinot.core.query.pruner;\n \n import java.util.HashMap;\n-import java.util.List;\n import java.util.Map;\n-import javax.annotation.Nonnull;\n+import java.util.Set;\n import org.apache.commons.configuration.Configuration;\n-import org.apache.pinot.spi.data.FieldSpec;\n-import org.apache.pinot.common.request.FilterOperator;\n+import org.apache.pinot.common.request.transform.TransformExpressionTree;\n import org.apache.pinot.common.utils.request.FilterQueryTree;\n+import org.apache.pinot.core.common.DataSource;\n+import org.apache.pinot.core.common.DataSourceMetadata;\n import org.apache.pinot.core.common.predicate.RangePredicate;\n+import org.apache.pinot.core.data.partition.PartitionFunction;\n import org.apache.pinot.core.indexsegment.IndexSegment;\n+import org.apache.pinot.core.query.exception.BadQueryRequestException;\n import org.apache.pinot.core.query.request.ServerQueryRequest;\n-import org.apache.pinot.core.segment.index.ColumnMetadata;\n-import org.apache.pinot.core.segment.index.SegmentMetadataImpl;\n import org.apache.pinot.core.segment.index.readers.BloomFilterReader;\n+import org.apache.pinot.spi.data.FieldSpec.DataType;\n+import org.apache.pinot.spi.utils.BytesUtils;\n \n \n /**\n- * An implementation of SegmentPruner.\n- * <p>Pruner will prune segment based on the column value inside the filter.\n+ * The {@code ColumnValueSegmentPruner} is the segment pruner that prunes segments based on the value inside the filter.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE4NzUzNw=="}, "originalCommit": {"oid": "9162a4847c62b9cf7e2c7917019f1b952fb9ef46"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3515, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}