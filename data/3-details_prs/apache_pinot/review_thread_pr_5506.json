{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4ODY2ODIw", "number": 5506, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwMzowNjowM1rOEDseZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwMzowNjowM1rOEDseZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyMzA5ODYzOnYy", "diffSide": "RIGHT", "path": "pinot-controller/src/main/java/org/apache/pinot/controller/helix/core/realtime/PinotLLCRealtimeSegmentManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwMzowNjowM1rOGg3NwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNTozNToyMFrOGhQfuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzExMjI1Ng==", "bodyText": "will we introduce new methods for setting offset in the metadata? What happens to old segments?", "url": "https://github.com/apache/pinot/pull/5506#discussion_r437112256", "createdAt": "2020-06-09T03:06:03Z", "author": {"login": "npawar"}, "path": "pinot-controller/src/main/java/org/apache/pinot/controller/helix/core/realtime/PinotLLCRealtimeSegmentManager.java", "diffHunk": "@@ -515,7 +519,8 @@ private void createNewSegmentZKMetadata(TableConfig tableConfig, PartitionLevelS\n     newSegmentZKMetadata.setTableName(realtimeTableName);\n     newSegmentZKMetadata.setSegmentName(segmentName);\n     newSegmentZKMetadata.setCreationTime(creationTimeMs);\n-    newSegmentZKMetadata.setStartOffset(startOffset);\n+    // TODO Issue 5953 Use string offset in the metadata\n+    newSegmentZKMetadata.setStartOffset(Long.parseLong(startOffset.toString()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb6a33795f3db3013cbe0dfa2c63126f046f7e2a"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUyNjQ1Ng==", "bodyText": "I was looking at metadata yesterday, and they are stored as strings. Luckily, the metadata classes don't construct objects directly from json. So, there may be no changes needed for metadata, only change the access method.\nComing soon to a PR near you.", "url": "https://github.com/apache/pinot/pull/5506#discussion_r437526456", "createdAt": "2020-06-09T15:35:20Z", "author": {"login": "mcvsubbu"}, "path": "pinot-controller/src/main/java/org/apache/pinot/controller/helix/core/realtime/PinotLLCRealtimeSegmentManager.java", "diffHunk": "@@ -515,7 +519,8 @@ private void createNewSegmentZKMetadata(TableConfig tableConfig, PartitionLevelS\n     newSegmentZKMetadata.setTableName(realtimeTableName);\n     newSegmentZKMetadata.setSegmentName(segmentName);\n     newSegmentZKMetadata.setCreationTime(creationTimeMs);\n-    newSegmentZKMetadata.setStartOffset(startOffset);\n+    // TODO Issue 5953 Use string offset in the metadata\n+    newSegmentZKMetadata.setStartOffset(Long.parseLong(startOffset.toString()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzExMjI1Ng=="}, "originalCommit": {"oid": "bb6a33795f3db3013cbe0dfa2c63126f046f7e2a"}, "originalPosition": 45}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4533, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}