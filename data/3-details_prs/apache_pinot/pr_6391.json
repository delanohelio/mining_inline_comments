{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2MzU3MDU2", "number": 6391, "title": "Added H3IndexFilterOperator", "bodyText": "Part of #5280\nUpdated the H3IndexFilter operator with the correct algorithm. Also fixed the schema and corrupted data in the quickstart example.\nExample:", "createdAt": "2020-12-29T06:59:28Z", "url": "https://github.com/apache/pinot/pull/6391", "merged": true, "mergeCommit": {"oid": "28f59efaa96f7af76a75518c790511afa6ea0aa3"}, "closed": true, "closedAt": "2020-12-30T03:34:29Z", "author": {"login": "yupeng9"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdq1Du5AH2gAyNTQ2MzU3MDU2Ojg4MTIyZmM2ZjU5MjUxOTA4ZDQ0NmM5YmZkZTMxZWJkYzQ1NjNjZWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdq9wFVgH2gAyNTQ2MzU3MDU2OmIxYjlkZDhkZDdhNzM3OTk4ZWZiNmEyOTMxNzZiY2U4MzI5ZTc2ZDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "88122fc6f59251908d446c9bfde31ebdc4563cee", "author": {"user": {"login": "yupeng9", "name": "Yupeng Fu"}}, "url": "https://github.com/apache/pinot/commit/88122fc6f59251908d446c9bfde31ebdc4563cee", "committedDate": "2020-12-29T06:51:06Z", "message": "Added H3IndexFilterOperator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1380b19866270acaee68e6c9e3a5eec743244144", "author": {"user": {"login": "yupeng9", "name": "Yupeng Fu"}}, "url": "https://github.com/apache/pinot/commit/1380b19866270acaee68e6c9e3a5eec743244144", "committedDate": "2020-12-29T06:57:27Z", "message": "updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e302f9b9825210c35d2f4e8d13c55759a144bb4c", "author": {"user": {"login": "yupeng9", "name": "Yupeng Fu"}}, "url": "https://github.com/apache/pinot/commit/e302f9b9825210c35d2f4e8d13c55759a144bb4c", "committedDate": "2020-12-29T07:00:51Z", "message": "revert"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "275e47ee0262be997287cb14607ccc65d8b724cd", "author": {"user": {"login": "yupeng9", "name": "Yupeng Fu"}}, "url": "https://github.com/apache/pinot/commit/275e47ee0262be997287cb14607ccc65d8b724cd", "committedDate": "2020-12-29T07:09:00Z", "message": "clean up table path"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NTk4NjI2", "url": "https://github.com/apache/pinot/pull/6391#pullrequestreview-559598626", "createdAt": "2020-12-29T16:06:57Z", "commit": {"oid": "275e47ee0262be997287cb14607ccc65d8b724cd"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxNjowNjo1OFrOIMSrow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxNjoxMTo0NFrOIMSyEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc1OTkwNw==", "bodyText": "better to add this logic in filter plan node and fallback to expressionbased filter operator", "url": "https://github.com/apache/pinot/pull/6391#discussion_r549759907", "createdAt": "2020-12-29T16:06:58Z", "author": {"login": "kishoreg"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/operator/filter/H3IndexFilterOperator.java", "diffHunk": "@@ -69,30 +76,16 @@ public H3IndexFilterOperator(Predicate predicate, IndexSegment indexSegment, int\n     } else {\n       throw new RuntimeException(\"Expecting one of the arguments of ST_DISTANCE to be an identifier\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "275e47ee0262be997287cb14607ccc65d8b724cd"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc2MTA5Ng==", "bodyText": "add a check that the first argument is identifier", "url": "https://github.com/apache/pinot/pull/6391#discussion_r549761096", "createdAt": "2020-12-29T16:10:21Z", "author": {"login": "kishoreg"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/plan/FilterPlanNode.java", "diffHunk": "@@ -93,6 +89,25 @@ public BaseFilterOperator run() {\n     }\n   }\n \n+  private boolean canApplyH3Index(Predicate predicate, FunctionContext function) {\n+    if (function.getFunctionName().equalsIgnoreCase(StDistanceFunction.FUNCTION_NAME)) {\n+      Predicate.Type type = predicate.getType();\n+      if (type != Predicate.Type.RANGE) {\n+        return false;\n+      }\n+      RangePredicate rangePredicate = (RangePredicate) predicate;\n+      // TODO: support lower bound\n+      if (rangePredicate.getUpperBound().equals(RangePredicate.UNBOUNDED) || !rangePredicate.getLowerBound()\n+          .equals(RangePredicate.UNBOUNDED)) {\n+        return false;\n+      }\n+      String columnName = function.getArguments().get(0).getIdentifier();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "275e47ee0262be997287cb14607ccc65d8b724cd"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc2MTU1NA==", "bodyText": "GenericQuickstart ->  quickstart cluster or just QuickstartCluster", "url": "https://github.com/apache/pinot/pull/6391#discussion_r549761554", "createdAt": "2020-12-29T16:11:44Z", "author": {"login": "kishoreg"}, "path": "pinot-tools/src/main/java/org/apache/pinot/tools/GenericQuickstart.java", "diffHunk": "@@ -106,19 +106,19 @@ public void execute()\n \n     Runtime.getRuntime().addShutdownHook(new Thread(() -> {\n       try {\n-        printStatus(Color.GREEN, \"***** Shutting down GitHubEventsQuickStart *****\");\n+        printStatus(Color.GREEN, \"***** Shutting down GenericQuickStart *****\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "275e47ee0262be997287cb14607ccc65d8b724cd"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1b9dd8dd7a737998efb6a293176bce8329e76d9", "author": {"user": {"login": "yupeng9", "name": "Yupeng Fu"}}, "url": "https://github.com/apache/pinot/commit/b1b9dd8dd7a737998efb6a293176bce8329e76d9", "committedDate": "2020-12-29T16:58:47Z", "message": "comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1706, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}