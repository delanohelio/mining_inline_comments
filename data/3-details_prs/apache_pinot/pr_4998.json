{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1MDM1OTE3", "number": 4998, "title": "Fixing java 11 runtime issues", "bodyText": "By running existing code with java 11, we are facing issues:\n\nMissing several jars after packing, e.g. java.lang.NoClassDefFoundError: javax/activation/DataSource\njava.base/jdk.internal.ref is not exported anymore after java 9\nPlugins are not loaded during runtime from plugins load, so need to change start script to add plugins jars into classpath.", "createdAt": "2020-01-20T23:28:05Z", "url": "https://github.com/apache/pinot/pull/4998", "merged": true, "mergeCommit": {"oid": "e29b88a1c0fbdbbe16dbe52a932596de02a2cd60"}, "closed": true, "closedAt": "2020-01-21T02:25:34Z", "author": {"login": "xiangfu0"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8VIXqAH2gAyMzY1MDM1OTE3OmVhMzYyMzhlNjM2YjFlMGJmYTc4OGUwYmMyM2I1Zjc3MzFhMDRlZmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8XB69ABqjI5NjQ1ODgwMDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ea36238e636b1e0bfa788e0bc23b5f7731a04efd", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/ea36238e636b1e0bfa788e0bc23b5f7731a04efd", "committedDate": "2020-01-20T23:27:32Z", "message": "Fixing java 11 runtime issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1NTczMDMx", "url": "https://github.com/apache/pinot/pull/4998#pullrequestreview-345573031", "createdAt": "2020-01-20T23:39:41Z", "commit": {"oid": "ea36238e636b1e0bfa788e0bc23b5f7731a04efd"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQyMzozOTo0MVrOFfrQvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQyMzo0NToyMFrOFfrUWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODc1ODk3Mw==", "bodyText": "do we need to shade any of these?", "url": "https://github.com/apache/pinot/pull/4998#discussion_r368758973", "createdAt": "2020-01-20T23:39:41Z", "author": {"login": "kishoreg"}, "path": "pinot-distribution/pom.xml", "diffHunk": "@@ -93,6 +93,26 @@\n         </exclusion>\n       </exclusions>\n     </dependency>\n+    <dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea36238e636b1e0bfa788e0bc23b5f7731a04efd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODc1OTI3OQ==", "bodyText": "provide sample values for PLUGINS_DIR and PLUGINS_INCLUDE.", "url": "https://github.com/apache/pinot/pull/4998#discussion_r368759279", "createdAt": "2020-01-20T23:41:26Z", "author": {"login": "kishoreg"}, "path": "pinot-tools/src/main/resources/appAssemblerScriptTemplate", "diffHunk": "@@ -107,6 +107,37 @@ if [ -n \"$CLASSPATH_PREFIX\" ] ; then\n   CLASSPATH=$CLASSPATH_PREFIX:$CLASSPATH\n fi\n \n+if [ -z \"$PLUGINS_DIR\" ] ; then\n+  PLUGINS_DIR=\"$BASEDIR\"/plugins\n+fi\n+\n+if [[ -d \"$PLUGINS_DIR\" ]] ; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea36238e636b1e0bfa788e0bc23b5f7731a04efd"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODc1OTg5Ng==", "bodyText": "we can skip this if PLUGINS_CLASSPATH is already set", "url": "https://github.com/apache/pinot/pull/4998#discussion_r368759896", "createdAt": "2020-01-20T23:45:20Z", "author": {"login": "kishoreg"}, "path": "pinot-tools/src/main/resources/appAssemblerScriptTemplate", "diffHunk": "@@ -107,6 +107,37 @@ if [ -n \"$CLASSPATH_PREFIX\" ] ; then\n   CLASSPATH=$CLASSPATH_PREFIX:$CLASSPATH\n fi\n \n+if [ -z \"$PLUGINS_DIR\" ] ; then\n+  PLUGINS_DIR=\"$BASEDIR\"/plugins\n+fi\n+\n+if [[ -d \"$PLUGINS_DIR\" ]] ; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea36238e636b1e0bfa788e0bc23b5f7731a04efd"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "661abf05b506191d240ebf4c9bdf2a9cfa7a6be6", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/661abf05b506191d240ebf4c9bdf2a9cfa7a6be6", "committedDate": "2020-01-21T01:31:23Z", "message": "Address comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6295eab82e261489b81835746d68220d40da9f0f", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/6295eab82e261489b81835746d68220d40da9f0f", "committedDate": "2020-01-21T00:50:42Z", "message": "Address comments"}, "afterCommit": {"oid": "661abf05b506191d240ebf4c9bdf2a9cfa7a6be6", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/apache/pinot/commit/661abf05b506191d240ebf4c9bdf2a9cfa7a6be6", "committedDate": "2020-01-21T01:31:23Z", "message": "Address comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1503, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}