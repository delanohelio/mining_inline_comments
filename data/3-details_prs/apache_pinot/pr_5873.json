{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4NDg3OTE4", "number": 5873, "title": "Add Hadoop counters for detecting schema mismatch", "bodyText": "Description\nThis PR adds Hadoop counters for detecting schema mismatch (AVRO only).\nThe counters include:\n\ndata types don't match (int <-> long)\nsingle value vs multi value\nmulti-value column uses non-array structure\nsome pinot column is missing in the raw data\n\nHere are the sample detailed information when schemas mismatch:\nThe Pinot column: (extra_column: STRING) is missing in the AVRO schema of input data.\nThe Pinot column: (column1: STRING) doesn't match with the column (union: LONG) in input AVRO schema.\nThe Pinot column: column2 is 'multi-value' column but the column: union from input AVRO schema is 'single-value' column.\nThe Pinot column: column2 is 'multi-value' column but the column: union from input AVRO schema is of 'int' type, which should have been of 'array' type.", "createdAt": "2020-08-16T19:50:27Z", "url": "https://github.com/apache/pinot/pull/5873", "merged": true, "mergeCommit": {"oid": "8a31bf7a0d532d5e1fca46170047842540b020c0"}, "closed": true, "closedAt": "2020-09-02T22:32:22Z", "author": {"login": "jackjlli"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc_jhE5gFqTQ2ODA5MDYzOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFDy0ogBqjM3MjIwNTYxNzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4MDkwNjM4", "url": "https://github.com/apache/pinot/pull/5873#pullrequestreview-468090638", "createdAt": "2020-08-16T20:06:07Z", "commit": {"oid": "b87c6cf725f05eab3af27ceb8aad101da80c1f2d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b87c6cf725f05eab3af27ceb8aad101da80c1f2d", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/b87c6cf725f05eab3af27ceb8aad101da80c1f2d", "committedDate": "2020-08-16T19:48:07Z", "message": "Add Hadoop counter for detecting schema mismatch"}, "afterCommit": {"oid": "8b0b77810fe701387457afd9bf91f283d94b5b7e", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/8b0b77810fe701387457afd9bf91f283d94b5b7e", "committedDate": "2020-08-16T20:28:20Z", "message": "Add Hadoop counter for detecting schema mismatch"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4MTEwNzkz", "url": "https://github.com/apache/pinot/pull/5873#pullrequestreview-468110793", "createdAt": "2020-08-17T00:28:34Z", "commit": {"oid": "8b0b77810fe701387457afd9bf91f283d94b5b7e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwMDoyODozNFrOHBWkJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwMDo0MDo0M1rOHBWqrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE4MDMyNw==", "bodyText": "Seems like we are breaking interface here, what' the reasoning for that? Either the api should be justified to be part of the interface, or the design is broken somehow.", "url": "https://github.com/apache/pinot/pull/5873#discussion_r471180327", "createdAt": "2020-08-17T00:28:34Z", "author": {"login": "mayankshriv"}, "path": "pinot-plugins/pinot-batch-ingestion/v0_deprecated/pinot-hadoop/src/main/java/org/apache/pinot/hadoop/job/mappers/SegmentCreationMapper.java", "diffHunk": "@@ -243,14 +257,15 @@ protected void map(LongWritable key, Text value, Context context)\n     addAdditionalSegmentGeneratorConfigs(segmentGeneratorConfig, hdfsInputFile, sequenceId);\n \n     _logger.info(\"Start creating segment with sequence id: {}\", sequenceId);\n-    SegmentIndexCreationDriver driver = new SegmentIndexCreationDriverImpl();\n+    SegmentIndexCreationDriverImpl driver = new SegmentIndexCreationDriverImpl();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b0b77810fe701387457afd9bf91f283d94b5b7e"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE4MTk5OQ==", "bodyText": "Seems like we will have to either write pairwise validators (pinot-avro, pinot-orc, pinot-json, etc). Or can write pair-wise schema converters (avro->pinot, orc->pinot, json->pinot), and then the schema validator will only compare two pinot schemas (one provided as input, other derived from format). At this point, I see pros/cons in both, but leaning towards former as it provides dedicated validation between formats.\nHowever, in either of the approaches, I'd recommend creating interfaces/impls. For example, an interface for validator (with pair-wise impls), or an interaface for converter (with pair-wise converters, and validator just works over interface).", "url": "https://github.com/apache/pinot/pull/5873#discussion_r471181999", "createdAt": "2020-08-17T00:40:43Z", "author": {"login": "mayankshriv"}, "path": "pinot-plugins/pinot-batch-ingestion/v0_deprecated/pinot-hadoop/src/main/java/org/apache/pinot/hadoop/job/mappers/SegmentCreationMapper.java", "diffHunk": "@@ -353,8 +368,71 @@ protected void addAdditionalSegmentGeneratorConfigs(SegmentGeneratorConfig segme\n       int sequenceId) {\n   }\n \n+  public void validateSchema(SegmentGeneratorConfig segmentGeneratorConfig, RecordReader recordReader) {\n+    if (recordReader instanceof AvroRecordReader) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b0b77810fe701387457afd9bf91f283d94b5b7e"}, "originalPosition": 78}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8b0b77810fe701387457afd9bf91f283d94b5b7e", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/8b0b77810fe701387457afd9bf91f283d94b5b7e", "committedDate": "2020-08-16T20:28:20Z", "message": "Add Hadoop counter for detecting schema mismatch"}, "afterCommit": {"oid": "d63809666b144682a92fb809c1ec88387f88f75a", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/d63809666b144682a92fb809c1ec88387f88f75a", "committedDate": "2020-08-20T04:26:28Z", "message": "Add SchemaValidator"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d63809666b144682a92fb809c1ec88387f88f75a", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/d63809666b144682a92fb809c1ec88387f88f75a", "committedDate": "2020-08-20T04:26:28Z", "message": "Add SchemaValidator"}, "afterCommit": {"oid": "1cf73d1bb061e4fa75ffddea186cda3754be3caa", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/1cf73d1bb061e4fa75ffddea186cda3754be3caa", "committedDate": "2020-08-20T04:38:22Z", "message": "Add SchemaValidator"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1cf73d1bb061e4fa75ffddea186cda3754be3caa", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/1cf73d1bb061e4fa75ffddea186cda3754be3caa", "committedDate": "2020-08-20T04:38:22Z", "message": "Add SchemaValidator"}, "afterCommit": {"oid": "0fb58c099e8152276348add92cfec72b866f65e0", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/0fb58c099e8152276348add92cfec72b866f65e0", "committedDate": "2020-08-20T05:29:13Z", "message": "Add SchemaValidator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMTgxOTAx", "url": "https://github.com/apache/pinot/pull/5873#pullrequestreview-480181901", "createdAt": "2020-09-01T23:24:17Z", "commit": {"oid": "0fb58c099e8152276348add92cfec72b866f65e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMzoyNDoxN1rOHLLj3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMzoyNDoxN1rOHLLj3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ4NTc5MQ==", "bodyText": "Suggest to rename this as IngestionSchemaValidator ? Or, InputSchemaValidator (still confusing I think).  Otherwise it reads as if we are validating pinot schema.\nIf we add a validator in PinotSchemaRestlet when the rest api call updates the schema, what would we call it?", "url": "https://github.com/apache/pinot/pull/5873#discussion_r481485791", "createdAt": "2020-09-01T23:24:17Z", "author": {"login": "mcvsubbu"}, "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidator.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.spi.data;\n+\n+\n+/**\n+ * Validator to validate the schema between Pinot schema and input raw data schema\n+ */\n+public interface SchemaValidator {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fb58c099e8152276348add92cfec72b866f65e0"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMTgzNTYx", "url": "https://github.com/apache/pinot/pull/5873#pullrequestreview-480183561", "createdAt": "2020-09-01T23:29:03Z", "commit": {"oid": "0fb58c099e8152276348add92cfec72b866f65e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMzoyOTowM1rOHLLprg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMzoyOTowM1rOHLLprg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ4NzI3OA==", "bodyText": "If we return the field names that have this type of mismatch, and also an error message (e.g. \"input type 'List' does not match with pinot data type 'int' for field 'X') that will be awesome.\nWe can then log this as an error message during segment creation", "url": "https://github.com/apache/pinot/pull/5873#discussion_r481487278", "createdAt": "2020-09-01T23:29:03Z", "author": {"login": "mcvsubbu"}, "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidator.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.spi.data;\n+\n+\n+/**\n+ * Validator to validate the schema between Pinot schema and input raw data schema\n+ */\n+public interface SchemaValidator {\n+\n+  void init(Schema pinotSchema, String inputFilePath);\n+\n+  boolean isDataTypeMismatch();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fb58c099e8152276348add92cfec72b866f65e0"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27bd346c36ab59152611bad9aab04156a4d33239", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/27bd346c36ab59152611bad9aab04156a4d33239", "committedDate": "2020-09-02T16:47:39Z", "message": "Add Hadoop counter for detecting schema mismatch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c316e543b24c22da806210ba6ce13497bbe4e28e", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/c316e543b24c22da806210ba6ce13497bbe4e28e", "committedDate": "2020-09-02T16:47:40Z", "message": "Add SchemaValidator"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0fb58c099e8152276348add92cfec72b866f65e0", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/0fb58c099e8152276348add92cfec72b866f65e0", "committedDate": "2020-08-20T05:29:13Z", "message": "Add SchemaValidator"}, "afterCommit": {"oid": "200b4bfaf1a3bef9517fc139be991765aae1c5f7", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/200b4bfaf1a3bef9517fc139be991765aae1c5f7", "committedDate": "2020-09-02T17:51:30Z", "message": "Introduce SchemaValidatorResult to provide detailed information for schema mismatch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33094dff55a4e655b0413ae6f3b6d97cfeca86a9", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/33094dff55a4e655b0413ae6f3b6d97cfeca86a9", "committedDate": "2020-09-02T17:58:03Z", "message": "Introduce SchemaValidatorResult to provide detailed information for schema mismatch"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "200b4bfaf1a3bef9517fc139be991765aae1c5f7", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/200b4bfaf1a3bef9517fc139be991765aae1c5f7", "committedDate": "2020-09-02T17:51:30Z", "message": "Introduce SchemaValidatorResult to provide detailed information for schema mismatch"}, "afterCommit": {"oid": "33094dff55a4e655b0413ae6f3b6d97cfeca86a9", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/33094dff55a4e655b0413ae6f3b6d97cfeca86a9", "committedDate": "2020-09-02T17:58:03Z", "message": "Introduce SchemaValidatorResult to provide detailed information for schema mismatch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "266f6b15ceca6b2fb32fde0063be86c41a332b2f", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/266f6b15ceca6b2fb32fde0063be86c41a332b2f", "committedDate": "2020-09-02T20:35:13Z", "message": "Add an option to fail the job if schemas mismatch"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cd92952d1f0485b4f6af5c4fa6f5a7a763fa5874", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/cd92952d1f0485b4f6af5c4fa6f5a7a763fa5874", "committedDate": "2020-09-02T20:06:57Z", "message": "Add an option to fail the job if schemas mismatch"}, "afterCommit": {"oid": "266f6b15ceca6b2fb32fde0063be86c41a332b2f", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/266f6b15ceca6b2fb32fde0063be86c41a332b2f", "committedDate": "2020-09-02T20:35:13Z", "message": "Add an option to fail the job if schemas mismatch"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxMTEzMTk2", "url": "https://github.com/apache/pinot/pull/5873#pullrequestreview-481113196", "createdAt": "2020-09-02T18:01:19Z", "commit": {"oid": "200b4bfaf1a3bef9517fc139be991765aae1c5f7"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMDo1MjozN1rOHMGg7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMDo1MzozNFrOHMGmgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQ1MTY5Mw==", "bodyText": "Do u agree to this? Or, do you want to leave it as SchemaValidator?", "url": "https://github.com/apache/pinot/pull/5873#discussion_r482451693", "createdAt": "2020-09-02T20:52:37Z", "author": {"login": "mcvsubbu"}, "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidator.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.spi.data;\n+\n+\n+/**\n+ * Validator to validate the schema between Pinot schema and input raw data schema\n+ */\n+public interface SchemaValidator {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ4NTc5MQ=="}, "originalCommit": {"oid": "0fb58c099e8152276348add92cfec72b866f65e0"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQ1MjY4Ng==", "bodyText": "Suggestion:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void incrementMismatchCountWithMismatchReason(String reason) {\n          \n          \n            \n              public void addMismatchReason(String reason) {", "url": "https://github.com/apache/pinot/pull/5873#discussion_r482452686", "createdAt": "2020-09-02T20:53:17Z", "author": {"login": "mcvsubbu"}, "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidatorResult.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.spi.data;\n+\n+/**\n+ * The result class to provide the detailed mismatch information.\n+ */\n+public class SchemaValidatorResult {\n+  private long _mismatchCount;\n+  private StringBuilder _mismatchReason;\n+\n+  public SchemaValidatorResult() {\n+    _mismatchCount = 0;\n+    _mismatchReason = new StringBuilder();\n+  }\n+\n+  public boolean isMismatchDetected() {\n+    return _mismatchCount != 0;\n+  }\n+\n+  private void incrementMismatchCount() {\n+    _mismatchCount++;\n+  }\n+\n+  public String getMismatchReason() {\n+    return _mismatchReason.toString();\n+  }\n+\n+  private void addMismatchReason(String reason) {\n+    if (_mismatchReason.length() > 0) {\n+      _mismatchReason.append(\" \");\n+    }\n+    _mismatchReason.append(reason);\n+  }\n+\n+  public void incrementMismatchCountWithMismatchReason(String reason) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "266f6b15ceca6b2fb32fde0063be86c41a332b2f"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQ1MzEyMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              private void addMismatchReason(String reason) {\n          \n          \n            \n              private void addMismatchReasonInternal(String reason) {", "url": "https://github.com/apache/pinot/pull/5873#discussion_r482453122", "createdAt": "2020-09-02T20:53:34Z", "author": {"login": "mcvsubbu"}, "path": "pinot-spi/src/main/java/org/apache/pinot/spi/data/SchemaValidatorResult.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.spi.data;\n+\n+/**\n+ * The result class to provide the detailed mismatch information.\n+ */\n+public class SchemaValidatorResult {\n+  private long _mismatchCount;\n+  private StringBuilder _mismatchReason;\n+\n+  public SchemaValidatorResult() {\n+    _mismatchCount = 0;\n+    _mismatchReason = new StringBuilder();\n+  }\n+\n+  public boolean isMismatchDetected() {\n+    return _mismatchCount != 0;\n+  }\n+\n+  private void incrementMismatchCount() {\n+    _mismatchCount++;\n+  }\n+\n+  public String getMismatchReason() {\n+    return _mismatchReason.toString();\n+  }\n+\n+  private void addMismatchReason(String reason) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "266f6b15ceca6b2fb32fde0063be86c41a332b2f"}, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4de10c0f5fe9f94c971a3a3d82a1a956630b4aae", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/4de10c0f5fe9f94c971a3a3d82a1a956630b4aae", "committedDate": "2020-09-02T21:21:20Z", "message": "Rename SchemaValidator to IngestionSchemaValidator"}, "afterCommit": {"oid": "cdad5aabc5d88e392b6e3f0b51600319f38cad9c", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/cdad5aabc5d88e392b6e3f0b51600319f38cad9c", "committedDate": "2020-09-02T21:51:43Z", "message": "Rename SchemaValidator to IngestionSchemaValidator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxMzM2NTM1", "url": "https://github.com/apache/pinot/pull/5873#pullrequestreview-481336535", "createdAt": "2020-09-02T22:11:56Z", "commit": {"oid": "cdad5aabc5d88e392b6e3f0b51600319f38cad9c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4380465aab4ed118718dad8c8468c3164579e3db", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/4380465aab4ed118718dad8c8468c3164579e3db", "committedDate": "2020-09-02T22:31:45Z", "message": "Rename SchemaValidator to IngestionSchemaValidator"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cdad5aabc5d88e392b6e3f0b51600319f38cad9c", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/cdad5aabc5d88e392b6e3f0b51600319f38cad9c", "committedDate": "2020-09-02T21:51:43Z", "message": "Rename SchemaValidator to IngestionSchemaValidator"}, "afterCommit": {"oid": "4380465aab4ed118718dad8c8468c3164579e3db", "author": {"user": null}, "url": "https://github.com/apache/pinot/commit/4380465aab4ed118718dad8c8468c3164579e3db", "committedDate": "2020-09-02T22:31:45Z", "message": "Rename SchemaValidator to IngestionSchemaValidator"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 216, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}