{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1NzE2NzE5", "number": 6387, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQxNzoyODowMlrOFJRaEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQxNzoyOTowOVrOFJRabA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1MjY2NzA3OnYy", "diffSide": "RIGHT", "path": "pinot-core/src/main/java/org/apache/pinot/core/segment/creator/impl/geospatial/H3IndexResolution.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQxNzoyODowMlrOILlHHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQxNzoyODowMlrOILlHHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAxMzI3OQ==", "bodyText": "make it int", "url": "https://github.com/apache/pinot/pull/6387#discussion_r549013279", "createdAt": "2020-12-26T17:28:02Z", "author": {"login": "kishoreg"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/segment/creator/impl/geospatial/H3IndexResolution.java", "diffHunk": "@@ -0,0 +1,53 @@\n+package org.apache.pinot.core.segment.creator.impl.geospatial;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+\n+/**\n+ * Stores the resolutions for an index. There are in total of H3 resolutions https://h3geo.org/#/documentation/core-library/resolution-table\n+ * To efficiently serialize the resolutions, we use two bytes for encoding th enabled resolutions. The resolution level\n+ * maps to the corresponding bit.\n+ */\n+public class H3IndexResolution {\n+  private short _resolutions;\n+\n+  public H3IndexResolution(List<Integer> resolutions) {\n+    for (int resolution : resolutions) {\n+      _resolutions |= 1 << resolution;\n+    }\n+  }\n+\n+  /**\n+   * Creates the resolutions with the serialized short value\n+   * @param resolutions\n+   */\n+  public H3IndexResolution(short resolutions) {\n+    _resolutions = resolutions;\n+  }\n+\n+  /**\n+   * @return the encoding of the resolutions into a short value (two bytes)\n+   */\n+  public short serialize() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af8fa078d7f99b561ec21cc284a21a463cdf47a8"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1MjY2NzQ5OnYy", "diffSide": "RIGHT", "path": "pinot-core/src/main/java/org/apache/pinot/core/segment/creator/impl/geospatial/H3IndexResolution.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQxNzoyODoyNlrOILlHSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQxNzozNTowMlrOILlI-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAxMzMyMw==", "bodyText": "use INT", "url": "https://github.com/apache/pinot/pull/6387#discussion_r549013323", "createdAt": "2020-12-26T17:28:26Z", "author": {"login": "kishoreg"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/segment/creator/impl/geospatial/H3IndexResolution.java", "diffHunk": "@@ -0,0 +1,53 @@\n+package org.apache.pinot.core.segment.creator.impl.geospatial;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+\n+/**\n+ * Stores the resolutions for an index. There are in total of H3 resolutions https://h3geo.org/#/documentation/core-library/resolution-table\n+ * To efficiently serialize the resolutions, we use two bytes for encoding th enabled resolutions. The resolution level\n+ * maps to the corresponding bit.\n+ */\n+public class H3IndexResolution {\n+  private short _resolutions;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af8fa078d7f99b561ec21cc284a21a463cdf47a8"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAxMzc1NQ==", "bodyText": "I feel short is easier since all resolutions can be represented in two bytes, so I don't have to reason about the first leftmost two bytes.", "url": "https://github.com/apache/pinot/pull/6387#discussion_r549013755", "createdAt": "2020-12-26T17:35:02Z", "author": {"login": "yupeng9"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/segment/creator/impl/geospatial/H3IndexResolution.java", "diffHunk": "@@ -0,0 +1,53 @@\n+package org.apache.pinot.core.segment.creator.impl.geospatial;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+\n+/**\n+ * Stores the resolutions for an index. There are in total of H3 resolutions https://h3geo.org/#/documentation/core-library/resolution-table\n+ * To efficiently serialize the resolutions, we use two bytes for encoding th enabled resolutions. The resolution level\n+ * maps to the corresponding bit.\n+ */\n+public class H3IndexResolution {\n+  private short _resolutions;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAxMzMyMw=="}, "originalCommit": {"oid": "af8fa078d7f99b561ec21cc284a21a463cdf47a8"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1MjY2Nzk2OnYy", "diffSide": "RIGHT", "path": "pinot-core/src/main/java/org/apache/pinot/core/segment/creator/impl/geospatial/H3IndexCreator.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQxNzoyOTowOVrOILlHfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQxNzozNToxOVrOILlJPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAxMzM3Mg==", "bodyText": "why size, we should write the serialized INT right?", "url": "https://github.com/apache/pinot/pull/6387#discussion_r549013372", "createdAt": "2020-12-26T17:29:09Z", "author": {"login": "kishoreg"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/segment/creator/impl/geospatial/H3IndexCreator.java", "diffHunk": "@@ -172,6 +175,7 @@ public void seal()\n     //write header file\n     headerStream.writeInt(VERSION);\n     headerStream.writeInt(writer.getNumUniqueIds());\n+    headerStream.writeShort(_resolution.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af8fa078d7f99b561ec21cc284a21a463cdf47a8"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAxMzgyMA==", "bodyText": "Good catch", "url": "https://github.com/apache/pinot/pull/6387#discussion_r549013820", "createdAt": "2020-12-26T17:35:19Z", "author": {"login": "yupeng9"}, "path": "pinot-core/src/main/java/org/apache/pinot/core/segment/creator/impl/geospatial/H3IndexCreator.java", "diffHunk": "@@ -172,6 +175,7 @@ public void seal()\n     //write header file\n     headerStream.writeInt(VERSION);\n     headerStream.writeInt(writer.getNumUniqueIds());\n+    headerStream.writeShort(_resolution.size());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAxMzM3Mg=="}, "originalCommit": {"oid": "af8fa078d7f99b561ec21cc284a21a463cdf47a8"}, "originalPosition": 48}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3058, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}