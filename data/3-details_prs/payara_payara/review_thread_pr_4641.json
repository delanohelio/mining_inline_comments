{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4OTAzOTA5", "number": 4641, "reviewThreads": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxMzoyNzoyMFrOD4_MRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNzowMjo0NVrOEVFrEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMDgyMTgyOnYy", "diffSide": "RIGHT", "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHazelcastConfigurationTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxMzoyNzoyMFrOGQAQFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMjowNjowM1rOGQT9DA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQzNDUxOQ==", "bodyText": "The only test I see that requires a clean domain is the dataGridEncryptionWarning test, which surely could also be acheived by making the other test that creates the key clean up after itself properly?", "url": "https://github.com/payara/Payara/pull/4641#discussion_r419434519", "createdAt": "2020-05-04T13:27:20Z", "author": {"login": "Pandrex247"}, "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHazelcastConfigurationTest.java", "diffHunk": "@@ -39,15 +39,22 @@\n  */\n package fish.payara.samples.asadmin;\n \n+import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import fish.payara.samples.Unstable;\n+\n import org.glassfish.embeddable.CommandResult;\n import org.junit.Before;\n import org.junit.Test;\n-\n-import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import org.junit.experimental.categories.Category;\n \n /**\n  * Verifies the correctness of the {@code SetHazelcastConfiguration} command.\n  */\n+@Category(Unstable.class)\n+// Fails from two reasons:\n+// 1) Requires completely new domain. Side effects of other tests break this one.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc1NzMyNA==", "bodyText": "Both should clean up after their run. Or better we should have some architecture in tests so instead of testing \"random\" features in random order we could join them to some scenarios, use cases, categories/groups (?) and each category would start with a new domain. Then we can have a control over it, but imagine we would have thousand of tests in payara samples - which of those test result states interact with any other? The current state of things is not maintainable in larger scope.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r419757324", "createdAt": "2020-05-04T22:06:03Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHazelcastConfigurationTest.java", "diffHunk": "@@ -39,15 +39,22 @@\n  */\n package fish.payara.samples.asadmin;\n \n+import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import fish.payara.samples.Unstable;\n+\n import org.glassfish.embeddable.CommandResult;\n import org.junit.Before;\n import org.junit.Test;\n-\n-import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import org.junit.experimental.categories.Category;\n \n /**\n  * Verifies the correctness of the {@code SetHazelcastConfiguration} command.\n  */\n+@Category(Unstable.class)\n+// Fails from two reasons:\n+// 1) Requires completely new domain. Side effects of other tests break this one.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQzNDUxOQ=="}, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMDgyNTUwOnYy", "diffSide": "RIGHT", "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHazelcastConfigurationTest.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxMzoyODowNVrOGQASNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMDo0NTo1MlrOGQj5Ag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQzNTA2Mw==", "bodyText": "Why are we introducing things that don't work on what is arguably the primary java version?", "url": "https://github.com/payara/Payara/pull/4641#discussion_r419435063", "createdAt": "2020-05-04T13:28:05Z", "author": {"login": "Pandrex247"}, "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHazelcastConfigurationTest.java", "diffHunk": "@@ -39,15 +39,22 @@\n  */\n package fish.payara.samples.asadmin;\n \n+import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import fish.payara.samples.Unstable;\n+\n import org.glassfish.embeddable.CommandResult;\n import org.junit.Before;\n import org.junit.Test;\n-\n-import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import org.junit.experimental.categories.Category;\n \n /**\n  * Verifies the correctness of the {@code SetHazelcastConfiguration} command.\n  */\n+@Category(Unstable.class)\n+// Fails from two reasons:\n+// 1) Requires completely new domain. Side effects of other tests break this one.\n+// 2) On JDK8 fails because of usage of @Category annotation which has problems with", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ1NjI0Mg==", "bodyText": "Agree. Eventually we might start using JUnit5 but this should be a planned step.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r419456242", "createdAt": "2020-05-04T13:57:45Z", "author": {"login": "jbee"}, "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHazelcastConfigurationTest.java", "diffHunk": "@@ -39,15 +39,22 @@\n  */\n package fish.payara.samples.asadmin;\n \n+import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import fish.payara.samples.Unstable;\n+\n import org.glassfish.embeddable.CommandResult;\n import org.junit.Before;\n import org.junit.Test;\n-\n-import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import org.junit.experimental.categories.Category;\n \n /**\n  * Verifies the correctness of the {@code SetHazelcastConfiguration} command.\n  */\n+@Category(Unstable.class)\n+// Fails from two reasons:\n+// 1) Requires completely new domain. Side effects of other tests break this one.\n+// 2) On JDK8 fails because of usage of @Category annotation which has problems with", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQzNTA2Mw=="}, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTczMDE1Nw==", "bodyText": "First Categories are used in JUnit4 as a standard for maybe 15 years and they do work.\nProbably this issue is caused by interaction with this in PayaraArquillianTestRunner or some of our other custom implementations \"hacking\" JUnit4 standards. But it is worthless to investigate, because the test does not work at all.\nAnd if it would, we would not need the category ;)", "url": "https://github.com/payara/Payara/pull/4641#discussion_r419730157", "createdAt": "2020-05-04T21:09:25Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHazelcastConfigurationTest.java", "diffHunk": "@@ -39,15 +39,22 @@\n  */\n package fish.payara.samples.asadmin;\n \n+import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import fish.payara.samples.Unstable;\n+\n import org.glassfish.embeddable.CommandResult;\n import org.junit.Before;\n import org.junit.Test;\n-\n-import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import org.junit.experimental.categories.Category;\n \n /**\n  * Verifies the correctness of the {@code SetHazelcastConfiguration} command.\n  */\n+@Category(Unstable.class)\n+// Fails from two reasons:\n+// 1) Requires completely new domain. Side effects of other tests break this one.\n+// 2) On JDK8 fails because of usage of @Category annotation which has problems with", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQzNTA2Mw=="}, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc0NjAwMg==", "bodyText": "https://dzone.com/articles/closer-look-junit-categories (2010)", "url": "https://github.com/payara/Payara/pull/4641#discussion_r419746002", "createdAt": "2020-05-04T21:41:09Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHazelcastConfigurationTest.java", "diffHunk": "@@ -39,15 +39,22 @@\n  */\n package fish.payara.samples.asadmin;\n \n+import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import fish.payara.samples.Unstable;\n+\n import org.glassfish.embeddable.CommandResult;\n import org.junit.Before;\n import org.junit.Test;\n-\n-import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import org.junit.experimental.categories.Category;\n \n /**\n  * Verifies the correctness of the {@code SetHazelcastConfiguration} command.\n  */\n+@Category(Unstable.class)\n+// Fails from two reasons:\n+// 1) Requires completely new domain. Side effects of other tests break this one.\n+// 2) On JDK8 fails because of usage of @Category annotation which has problems with", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQzNTA2Mw=="}, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkzNDI5NQ==", "bodyText": "Okay, thought the issue here was related to use of a feature that was introduced later.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r419934295", "createdAt": "2020-05-05T08:10:22Z", "author": {"login": "jbee"}, "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHazelcastConfigurationTest.java", "diffHunk": "@@ -39,15 +39,22 @@\n  */\n package fish.payara.samples.asadmin;\n \n+import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import fish.payara.samples.Unstable;\n+\n import org.glassfish.embeddable.CommandResult;\n import org.junit.Before;\n import org.junit.Test;\n-\n-import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import org.junit.experimental.categories.Category;\n \n /**\n  * Verifies the correctness of the {@code SetHazelcastConfiguration} command.\n  */\n+@Category(Unstable.class)\n+// Fails from two reasons:\n+// 1) Requires completely new domain. Side effects of other tests break this one.\n+// 2) On JDK8 fails because of usage of @Category annotation which has problems with", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQzNTA2Mw=="}, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDAxODQzNA==", "bodyText": "Maybe we should use categories instead of NotMicroCompatible too, but ... I think there will be more work with Andrew's point around repeatibility of tests. Probably it could spark some more stable (and faster and cheaper) architecture of tests, I will think about it :-)", "url": "https://github.com/payara/Payara/pull/4641#discussion_r420018434", "createdAt": "2020-05-05T10:45:52Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHazelcastConfigurationTest.java", "diffHunk": "@@ -39,15 +39,22 @@\n  */\n package fish.payara.samples.asadmin;\n \n+import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import fish.payara.samples.Unstable;\n+\n import org.glassfish.embeddable.CommandResult;\n import org.junit.Before;\n import org.junit.Test;\n-\n-import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import org.junit.experimental.categories.Category;\n \n /**\n  * Verifies the correctness of the {@code SetHazelcastConfiguration} command.\n  */\n+@Category(Unstable.class)\n+// Fails from two reasons:\n+// 1) Requires completely new domain. Side effects of other tests break this one.\n+// 2) On JDK8 fails because of usage of @Category annotation which has problems with", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQzNTA2Mw=="}, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMDg5NTMzOnYy", "diffSide": "RIGHT", "path": "appserver/tests/payara-samples/samples/payara-expression-config-properties/pom.xml", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxMzo0MzoyMVrOGQA8Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOTozMDozMVrOG0cSBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ0NTg1OQ==", "bodyText": "I'm not fond of this.\nA test that is disabled due to not having an environment variable set is never run.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r419445859", "createdAt": "2020-05-04T13:43:21Z", "author": {"login": "Pandrex247"}, "path": "appserver/tests/payara-samples/samples/payara-expression-config-properties/pom.xml", "diffHunk": "@@ -105,4 +112,36 @@\n             </plugin>\n         </plugins>\n     </build>\n-</project>\n\\ No newline at end of file\n+    <profiles>\n+        <profile>\n+            <id>auto-skip-test</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTczMTAyMg==", "bodyText": "Repeatable tests should run without hacking computer environment. By default it only fails.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r419731022", "createdAt": "2020-05-04T21:11:11Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/payara-expression-config-properties/pom.xml", "diffHunk": "@@ -105,4 +112,36 @@\n             </plugin>\n         </plugins>\n     </build>\n-</project>\n\\ No newline at end of file\n+    <profiles>\n+        <profile>\n+            <id>auto-skip-test</id>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ0NTg1OQ=="}, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc1MjQ4OQ==", "bodyText": "I understand that in this case there was no other way possible - I plan to move this test to TC PR including jenkinsfile etc., so final state should be clean next week ;)", "url": "https://github.com/payara/Payara/pull/4641#discussion_r419752489", "createdAt": "2020-05-04T21:54:58Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/payara-expression-config-properties/pom.xml", "diffHunk": "@@ -105,4 +112,36 @@\n             </plugin>\n         </plugins>\n     </build>\n-</project>\n\\ No newline at end of file\n+    <profiles>\n+        <profile>\n+            <id>auto-skip-test</id>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ0NTg1OQ=="}, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY0MjUwMA==", "bodyText": "After this PR will make it to master I will rebase my TC branch and transform this test to TC.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r457642500", "createdAt": "2020-07-20T19:30:31Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/payara-expression-config-properties/pom.xml", "diffHunk": "@@ -105,4 +112,36 @@\n             </plugin>\n         </plugins>\n     </build>\n-</project>\n\\ No newline at end of file\n+    <profiles>\n+        <profile>\n+            <id>auto-skip-test</id>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ0NTg1OQ=="}, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMDkwNDAxOnYy", "diffSide": "RIGHT", "path": "appserver/tests/payara-samples/samples/payara-expression-config-properties/src/test/java/fish/payara/samples/microprofile/config/expression/PayaraExpressionConfigPropertiesTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxMzo0NTowNVrOGQBBfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMToyOTowN1rOGQS53A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ0NzE2Nw==", "bodyText": "Why less indent? 8 spaces is the default for breaking up long lines.\nAlso what's with the random empty comments?", "url": "https://github.com/payara/Payara/pull/4641#discussion_r419447167", "createdAt": "2020-05-04T13:45:05Z", "author": {"login": "Pandrex247"}, "path": "appserver/tests/payara-samples/samples/payara-expression-config-properties/src/test/java/fish/payara/samples/microprofile/config/expression/PayaraExpressionConfigPropertiesTest.java", "diffHunk": "@@ -71,14 +70,16 @@\n     @Deployment(testable = false)\n     public static WebArchive createDeployment() {\n         return ShrinkWrap.create(WebArchive.class, \"microprofile-config-expression.war\")\n-                .addPackage(\"fish.payara.samples.microprofile.config.expression\")\n-                .addAsManifestResource(new File(\"src/main/resources/META-INF/payara-expression-config.properties\"));\n+            .addPackage(ConfigServlet.class.getPackage()) //", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc0MDEyNA==", "bodyText": "It is called a \"phantom comment\". In some circumstances it is best possible way to protected readable code from automatic reformatting.\nI don't see 2 block indent useful and always used 1 block, but yes, in Eclipse default is 2 blocks (8 spaces). Honestly I don't see it as a most important thing worth of discussion.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r419740124", "createdAt": "2020-05-04T21:29:07Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/payara-expression-config-properties/src/test/java/fish/payara/samples/microprofile/config/expression/PayaraExpressionConfigPropertiesTest.java", "diffHunk": "@@ -71,14 +70,16 @@\n     @Deployment(testable = false)\n     public static WebArchive createDeployment() {\n         return ShrinkWrap.create(WebArchive.class, \"microprofile-config-expression.war\")\n-                .addPackage(\"fish.payara.samples.microprofile.config.expression\")\n-                .addAsManifestResource(new File(\"src/main/resources/META-INF/payara-expression-config.properties\"));\n+            .addPackage(ConfigServlet.class.getPackage()) //", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ0NzE2Nw=="}, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMDkxNzU1OnYy", "diffSide": "RIGHT", "path": "appserver/tests/payara-samples/samples/pom.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxMzo0Nzo0MVrOGQBJHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMTozMTozOFrOGQS_EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ0OTExNw==", "bodyText": "It shouldn't do? Tests should clean up after themselves.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r419449117", "createdAt": "2020-05-04T13:47:41Z", "author": {"login": "Pandrex247"}, "path": "appserver/tests/payara-samples/samples/pom.xml", "diffHunk": "@@ -15,20 +15,26 @@\n     <name>Payara Samples - Profiled Tests</name>\n \n     <modules>\n+        <!-- This module must run first, because it collides with some change made by other test(s) -->\n+        <module>payara-expression-config-properties</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc0MTQ1Nw==", "bodyText": "They reuse the managed/remote domain, so you can never get to the state before all tests. But yes, it seems some (or all?) tests leave some garbage behind them. Btw this one too.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r419741457", "createdAt": "2020-05-04T21:31:38Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/pom.xml", "diffHunk": "@@ -15,20 +15,26 @@\n     <name>Payara Samples - Profiled Tests</name>\n \n     <modules>\n+        <!-- This module must run first, because it collides with some change made by other test(s) -->\n+        <module>payara-expression-config-properties</module>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ0OTExNw=="}, "originalCommit": {"oid": "726655546a49325165a0e288228490a54061b3e1"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NTYzOTQzOnYy", "diffSide": "RIGHT", "path": "appserver/extras/embedded/tests/embedded-vs-jersey/pom.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToxMDowN1rOG0boNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToxMDowN1rOG0boNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYzMTc5OA==", "bodyText": "Moved, because this tests were too far from building extras and payara embedded, which is hidden under a profile. That had two consequences:\n\nthe Payara Samples tested against old version of Payara Embedded\nsometimes the embedded wasn't built yet -> dependency issues.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r457631798", "createdAt": "2020-07-20T19:10:07Z", "author": {"login": "dmatej"}, "path": "appserver/extras/embedded/tests/embedded-vs-jersey/pom.xml", "diffHunk": "@@ -0,0 +1,77 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d62652d3cba07a2c54d8ce537300de9683c8c4ae"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NTY1NDEzOnYy", "diffSide": "RIGHT", "path": "appserver/tests/payara-samples/pom.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToxNDozNlrOG0bxBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToxNDozNlrOG0bxBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYzNDA1NA==", "bodyText": "Upgrade!", "url": "https://github.com/payara/Payara/pull/4641#discussion_r457634054", "createdAt": "2020-07-20T19:14:36Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/pom.xml", "diffHunk": "@@ -86,7 +82,7 @@\n             <dependency>\n                 <groupId>org.jboss.arquillian</groupId>\n                 <artifactId>arquillian-bom</artifactId>\n-                <version>1.5.0.Final</version>\n+                <version>1.6.0.Final</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49267331a176fad3d62ee4f54ef8f515344eff0f"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NTY1ODkzOnYy", "diffSide": "RIGHT", "path": "appserver/tests/payara-samples/pom.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToxNTo1NlrOG0bz_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToxNTo1NlrOG0bz_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYzNDgxNA==", "bodyText": "This was discovered when we discussed related dependency issues with @MattGill98", "url": "https://github.com/payara/Payara/pull/4641#discussion_r457634814", "createdAt": "2020-07-20T19:15:56Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/pom.xml", "diffHunk": "@@ -108,6 +104,16 @@\n                 <artifactId>smallrye-config</artifactId>\n                 <version>1.3.7</version>\n                 <scope>test</scope>\n+                <exclusions>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49267331a176fad3d62ee4f54ef8f515344eff0f"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NTY2MDg0OnYy", "diffSide": "RIGHT", "path": "appserver/tests/payara-samples/pom.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToxNjozNlrOG0b1Mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToxNjozNlrOG0b1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYzNTEyMg==", "bodyText": "This configuration should be probably default.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r457635122", "createdAt": "2020-07-20T19:16:36Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/pom.xml", "diffHunk": "@@ -238,6 +244,7 @@\n                         <systemPropertyVariables>\n                             <isUsingMicroProfile>${micro.isActive}</isUsingMicroProfile>\n                         </systemPropertyVariables>\n+                        <trimStackTrace>false</trimStackTrace>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49267331a176fad3d62ee4f54ef8f515344eff0f"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NTY3NDIyOnYy", "diffSide": "RIGHT", "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHazelcastConfigurationTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToyMDoyNVrOG0b9aQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToyMDoyNVrOG0b9aQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYzNzIyNQ==", "bodyText": "Probably better link:\nhttps://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-7183985", "url": "https://github.com/payara/Payara/pull/4641#discussion_r457637225", "createdAt": "2020-07-20T19:20:25Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHazelcastConfigurationTest.java", "diffHunk": "@@ -39,15 +39,22 @@\n  */\n package fish.payara.samples.asadmin;\n \n+import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import fish.payara.samples.Unstable;\n+\n import org.glassfish.embeddable.CommandResult;\n import org.junit.Before;\n import org.junit.Test;\n-\n-import fish.payara.nucleus.hazelcast.HazelcastRuntimeConfiguration;\n+import org.junit.experimental.categories.Category;\n \n /**\n  * Verifies the correctness of the {@code SetHazelcastConfiguration} command.\n  */\n+@Category(Unstable.class)\n+// Fails from two reasons:\n+// 1) Requires completely new domain. Side effects of other tests break this one.\n+// 2) On JDK8 fails because of usage of @Category annotation which has problems with\n+//    this bug: https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8209742 (fixed in JDK11)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49267331a176fad3d62ee4f54ef8f515344eff0f"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NTY3Nzg1OnYy", "diffSide": "RIGHT", "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHealthCheckServiceConfigurationTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToyMToxN1rOG0b_dA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToyMToxN1rOG0b_dA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYzNzc0OA==", "bodyText": "Deleted trailing spaces.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r457637748", "createdAt": "2020-07-20T19:21:17Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHealthCheckServiceConfigurationTest.java", "diffHunk": "@@ -83,13 +83,13 @@ public void setUp() {\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49267331a176fad3d62ee4f54ef8f515344eff0f"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NTY4NDgyOnYy", "diffSide": "LEFT", "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHealthCheckServiceConfigurationTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToyMzoxN1rOG0cDlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToyMzoxN1rOG0cDlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYzODgwNw==", "bodyText": "Fixed to respect the current implementation.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r457638807", "createdAt": "2020-07-20T19:23:17Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/asadmin/src/test/java/fish/payara/samples/asadmin/SetHealthCheckServiceConfigurationTest.java", "diffHunk": "@@ -261,17 +261,17 @@ public void hogginThreadsThresholdDynamicAffectsConfigAndService() {\n \n     @Test\n     public void hogginThreadsRetryCountBelowMinimumCausesError() {\n-        CommandResult result = asadmin(\"set-healthcheck-service-configuration\", \n+        CommandResult result = asadmin(\"set-healthcheck-service-configuration\",\n                 \"--service\", \"ht\",\n                 \"--enabled\", \"true\",\n-                \"--hogging-threads-retry-count\", \"0\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49267331a176fad3d62ee4f54ef8f515344eff0f"}, "originalPosition": 157}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NTY5NDA3OnYy", "diffSide": "LEFT", "path": "appserver/tests/payara-samples/samples/ejb-invoker-secure-endpoint/src/test/java/fish/payara/samples/ejb/invoker/security/RemoteBeanBasicAuthTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToyNTo1NVrOG0cI7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToyNTo1NVrOG0cI7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY0MDE3NA==", "bodyText": "I noticed the Jenkins build is much slower now. What is the cause? Is PayaraArquillianTestRunner slower than Arquillian? (just a first idea)\nEDIT: probably no. The reason is probably in enabling tests with secure endponts.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r457640174", "createdAt": "2020-07-20T19:25:55Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/ejb-invoker-secure-endpoint/src/test/java/fish/payara/samples/ejb/invoker/security/RemoteBeanBasicAuthTest.java", "diffHunk": "@@ -55,7 +56,8 @@\n  * BASIC Auth.\n  *\n  */\n-@RunWith(Arquillian.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49267331a176fad3d62ee4f54ef8f515344eff0f"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NTcxOTExOnYy", "diffSide": "LEFT", "path": "appserver/tests/payara-samples/samples/pom.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOTozMzo0M1rOG0cYSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwNzo1MzowM1rOG0sWqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY0NDEwNA==", "bodyText": "Ok, these tests are the cause of the slowdown. I will take a look once more if they couldn't be faster (unclosed rest clients or what?)", "url": "https://github.com/payara/Payara/pull/4641#discussion_r457644104", "createdAt": "2020-07-20T19:33:43Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/pom.xml", "diffHunk": "@@ -43,25 +49,7 @@\n     </dependencyManagement>\n \n     <profiles>\n-\n-\t\t<profile>\n-\t\t\t<id>unstable</id>\n-\t\t\t<modules>\n-\t\t        <module>openid</module>\n-\t\t        <module>jaxws-tracing</module>\n-\t\t        <module>asadmin</module>\n-\t\t        <module>microprofile-endpoints</module>\n-         \t</modules>\n-\t\t</profile>\n-\t\t<profile>\n-\t\t\t<id>unstable-remote</id>\n-\t\t\t<modules>\n-                <module>ejb-invoker-secure-endpoint</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49267331a176fad3d62ee4f54ef8f515344eff0f"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzkwNTgzNA==", "bodyText": "They do many restarts, that's why they are so slow. But that's out of the scope of this issue and I'm not sure if it is even resolvable.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r457905834", "createdAt": "2020-07-21T07:53:03Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/pom.xml", "diffHunk": "@@ -43,25 +49,7 @@\n     </dependencyManagement>\n \n     <profiles>\n-\n-\t\t<profile>\n-\t\t\t<id>unstable</id>\n-\t\t\t<modules>\n-\t\t        <module>openid</module>\n-\t\t        <module>jaxws-tracing</module>\n-\t\t        <module>asadmin</module>\n-\t\t        <module>microprofile-endpoints</module>\n-         \t</modules>\n-\t\t</profile>\n-\t\t<profile>\n-\t\t\t<id>unstable-remote</id>\n-\t\t\t<modules>\n-                <module>ejb-invoker-secure-endpoint</module>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY0NDEwNA=="}, "originalCommit": {"oid": "49267331a176fad3d62ee4f54ef8f515344eff0f"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNTQ4Mjg5OnYy", "diffSide": "RIGHT", "path": "appserver/tests/payara-samples/samples/rest-management/src/test/java/fish/payara/samples/rest/management/ServerLogTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNzowMjowMlrOG7padw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNzowMjowMlrOG7padw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE5NzY4Nw==", "bodyText": "This test consumed logs also from previous executions. Some of them logged warnings.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r465197687", "createdAt": "2020-08-04T17:02:02Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/samples/rest-management/src/test/java/fish/payara/samples/rest/management/ServerLogTest.java", "diffHunk": "@@ -39,24 +39,41 @@\n  */\r\n package fish.payara.samples.rest.management;\r\n \r\n+import static org.junit.Assert.assertEquals;\r\n import static org.junit.Assert.assertFalse;\r\n \r\n+import fish.payara.samples.ServerOperations;\r\n+\r\n import java.util.Scanner;\r\n \r\n+import javax.ws.rs.client.Entity;\r\n+import javax.ws.rs.core.Response;\r\n+\r\n+import org.junit.Before;\r\n import org.junit.Test;\r\n \r\n /**\r\n  * Tests to run against the server log\r\n  */\r\n public class ServerLogTest extends RestManagementTest {\r\n \r\n+    @Before\r\n+    public void resetLogging() throws Exception {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f09817511d3f1fc0231cc7a229c2b7140d41f452"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNTQ4NDk4OnYy", "diffSide": "RIGHT", "path": "appserver/tests/payara-samples/test-utils/src/main/java/fish/payara/samples/NotMicroCompatible.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNzowMjo0NVrOG7pb3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNzowMjo0NVrOG7pb3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE5ODA0Nw==", "bodyText": "Added possible explanation why it is not micro compatible.", "url": "https://github.com/payara/Payara/pull/4641#discussion_r465198047", "createdAt": "2020-08-04T17:02:45Z", "author": {"login": "dmatej"}, "path": "appserver/tests/payara-samples/test-utils/src/main/java/fish/payara/samples/NotMicroCompatible.java", "diffHunk": "@@ -48,15 +48,17 @@\n /**\n  * Annotation used to specify that a test is not applicable to Payara Micro\n  * Use in combination with <code>@RunWith(PayaraTestRunner.class)</code> or <code>@RunWith(PayaraArquillianTestRunner.class)</code> annotation\n- * \n+ *\n  * Can also be used in conjunction with <code>@SincePayara</code> to denote versioning\n- * \n+ *\n  * @see fish.payara.samples.*\n- * \n+ *\n  * @author Cuba Stanley\n  */\n @Target({ElementType.METHOD, ElementType.TYPE})\n @Retention(RetentionPolicy.RUNTIME)\n @Inherited\n-\n-public @interface NotMicroCompatible {}\n+public @interface NotMicroCompatible {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f09817511d3f1fc0231cc7a229c2b7140d41f452"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1338, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}