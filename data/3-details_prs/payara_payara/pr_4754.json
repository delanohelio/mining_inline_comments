{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxOTc4NDY3", "number": 4754, "title": "QACI-286 Check for expired certs before running Jenkins script", "bodyText": "Description\n\nA small tweak to give developers a heads up of any expired certificates coming within the current and next month\nImportant Info\nTesting\nTesting Performed\nValidated with Jenkins connector plugin for visual studio and tested locally on local keystore. Tested on jenkins", "createdAt": "2020-06-30T11:57:26Z", "url": "https://github.com/payara/Payara/pull/4754", "merged": true, "mergeCommit": {"oid": "17ab913814f5d1bc7be897b938f59e0baf4f822e"}, "closed": true, "closedAt": "2020-07-06T15:54:36Z", "author": {"login": "AlanRoth"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwTm0xgH2gAyNDQxOTc4NDY3OjU5MGI2OWU1MzgyMGI5NzdmOGIyZDhmYjhiMTViZjgyM2E1OGEwODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyNgYlAFqTQ0MjkwMTAxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "590b69e53820b977f8b2d8fb8b15bf823a58a082", "author": {"user": {"login": "AlanRoth", "name": "Alan"}}, "url": "https://github.com/payara/Payara/commit/590b69e53820b977f8b2d8fb8b15bf823a58a082", "committedDate": "2020-06-30T11:05:03Z", "message": "Added keytool check and grep for expiring certificates next month"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2962e1cfded891cc1822ba36f742a0efe19bca23", "author": {"user": {"login": "AlanRoth", "name": "Alan"}}, "url": "https://github.com/payara/Payara/commit/2962e1cfded891cc1822ba36f742a0efe19bca23", "committedDate": "2020-06-30T11:20:28Z", "message": "Also include current month in grep"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cdd312db716e83771ad7a5b345bbe66ec10294e", "author": {"user": {"login": "AlanRoth", "name": "Alan"}}, "url": "https://github.com/payara/Payara/commit/0cdd312db716e83771ad7a5b345bbe66ec10294e", "committedDate": "2020-06-30T11:50:54Z", "message": "Fixed cacerts path and formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4112dba26b355c37ce122564f1361c384e373bda", "author": {"user": {"login": "AlanRoth", "name": "Alan"}}, "url": "https://github.com/payara/Payara/commit/4112dba26b355c37ce122564f1361c384e373bda", "committedDate": "2020-06-30T11:54:19Z", "message": "Merge branch 'QACI-286' of https://github.com/AlanRoth/payara into QACI-286"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdca1b2b0f829093b92d6e50c4918c916403482e", "author": {"user": {"login": "AlanRoth", "name": "Alan"}}, "url": "https://github.com/payara/Payara/commit/cdca1b2b0f829093b92d6e50c4918c916403482e", "committedDate": "2020-06-30T12:00:37Z", "message": "Unterminated quoted string"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjIzOTA3", "url": "https://github.com/payara/Payara/pull/4754#pullrequestreview-442223907", "createdAt": "2020-07-03T08:04:02Z", "commit": {"oid": "cdca1b2b0f829093b92d6e50c4918c916403482e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwODowNDowMlrOGsnkjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwODowNDowMlrOGsnkjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQzODg2Mw==", "bodyText": "Is anyone going to notice this?\nI suggest marking the build as unstable in the event of results returned.", "url": "https://github.com/payara/Payara/pull/4754#discussion_r449438863", "createdAt": "2020-07-03T08:04:02Z", "author": {"login": "MarkWareham"}, "path": "Jenkinsfile", "diffHunk": "@@ -25,6 +25,10 @@ pipeline {\n                     echo \"Payara pom version is ${pom.version}\"\n                     echo \"Build number is ${payaraBuildNumber}\"\n                     echo \"Domain name is ${DOMAIN_NAME}\"\n+\n+                    echo '*#*#*#*#*#*#*#*#*#*#*#*#  Certificates Expiring Soon  *#*#*#*#*#*#*#*#*#*#*#*#*#*#*#'\n+                    sh \"\"\"keytool -list -v -keystore '${pwd()}/nucleus/admin/template/src/main/resources/config/cacerts.jks' -storepass 'changeit' | grep -E 'Valid from:.*`date +'%b' --date='+1 month'`.*`date +'%Y'`|`date +'%b'`.*`date +'%Y'`\"\"\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdca1b2b0f829093b92d6e50c4918c916403482e"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bd3b3776ffd389b2c4063d8593ee3b6911d73a3", "author": {"user": {"login": "AlanRoth", "name": "Alan"}}, "url": "https://github.com/payara/Payara/commit/9bd3b3776ffd389b2c4063d8593ee3b6911d73a3", "committedDate": "2020-07-03T10:58:40Z", "message": "Mark build as unstable when expiring certificates are found"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyOTAxMDEx", "url": "https://github.com/payara/Payara/pull/4754#pullrequestreview-442901011", "createdAt": "2020-07-06T09:06:26Z", "commit": {"oid": "9bd3b3776ffd389b2c4063d8593ee3b6911d73a3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 736, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}