{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxMDI5OTUw", "number": 4899, "title": "FISH-326 Add Profile to Deploy Internal JARs", "bodyText": "The new profile \"deployinternals\" can be used with the deploy goal to deploy to the new Nexus based payara-artifacts repository. Any JARs deployed to Maven central are excluded from this goal to prevent duplication. The exception is the Payara-API and Payara-BOM, as these may be dependencies of other artifacts.\nArtifacts have been installed to https://nexus.payara.fish/repository/payara-artifacts/ with command:\nmvn clean deploy -Pdeploy-internals\n\nHow to Test\nRun the deploy goal to a local directory:\nmvn deploy -DaltDeploymentRepository=null::default::file:///home/matt/documents/local-repo/ -Dmaven.test.skip\n\nCheck the contents are as expected.\nRun the same command but with the new profile:\nmvn deploy -Pdeploy-internals -DaltDeploymentRepository=null::default::file:///home/matt/documents/local-repo/ -Dmaven.test.skip", "createdAt": "2020-09-22T15:39:32Z", "url": "https://github.com/payara/Payara/pull/4899", "merged": true, "mergeCommit": {"oid": "7ece90cbb865256d2d8a42636452213e70ff4364"}, "closed": true, "closedAt": "2020-10-01T14:12:01Z", "author": {"login": "MattGill98"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLYzmUgH2gAyNDkxMDI5OTUwOjQyN2Q1MGY0MTg4OTU2YjRhZjFkY2IzYmEyZDAzZmI2ZDhiOWJhN2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOPSieAFqTUwMDIzMzUyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b", "author": {"user": {"login": "MattGill98", "name": "Matthew Gill"}}, "url": "https://github.com/payara/Payara/commit/427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b", "committedDate": "2020-09-22T14:24:29Z", "message": "FISH-326 Add Profile to Deploy Internal JARs\n\nThe new profile \"deployinternals\" can be used with the deploy goal to\ndeploy to the new Nexus based payara-artifacts repository. Any\nJARs deployed to Maven central are excluded from this goal to prevent\nduplication. The exception is the Payara-API and Payara-BOM, as these\nmay be dependencies of other artifacts.\n\nSigned-off-by: Matthew Gill <matthew.gill@live.co.uk>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNjI0MTE2", "url": "https://github.com/payara/Payara/pull/4899#pullrequestreview-493624116", "createdAt": "2020-09-22T16:06:16Z", "commit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNjowNjoxNlrOHWBttg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNjowNjoxNlrOHWBttg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg1ODgwNg==", "bodyText": "Rather than setting all these <skip>false</skip> you can remove any deploy config. None of it is currently used", "url": "https://github.com/payara/Payara/pull/4899#discussion_r492858806", "createdAt": "2020-09-22T16:06:16Z", "author": {"login": "MarkWareham"}, "path": "pom.xml", "diffHunk": "@@ -347,6 +341,31 @@\n             </build>\n         </profile>\n \n+        <profile>\n+            <id>deployinternals</id>\n+            <activation>\n+                <activeByDefault>false</activeByDefault>\n+            </activation>\n+\n+            <distributionManagement>\n+                <repository>\n+                    <id>payara-nexus</id>\n+                    <url>https://nexus.payara.fish/repository/payara-artifacts/</url>\n+                </repository>\n+            </distributionManagement>\n+\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <artifactId>maven-deploy-plugin</artifactId>\n+                        <configuration>\n+                            <skip>false</skip>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NzU1MDQ5", "url": "https://github.com/payara/Payara/pull/4899#pullrequestreview-495755049", "createdAt": "2020-09-24T16:36:06Z", "commit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "state": "COMMENTED", "comments": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNjozNjowNlrOHXjVBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNjo0NzoyMVrOHXjv-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1ODExOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        <id>deployinternals</id>\n          \n          \n            \n                        <id>deploy-internals</id>\n          \n      \n    \n    \n  \n\n\ud83d\udde1", "url": "https://github.com/payara/Payara/pull/4899#discussion_r494458119", "createdAt": "2020-09-24T16:36:06Z", "author": {"login": "Pandrex247"}, "path": "appserver/extras/embedded/web/pom.xml", "diffHunk": "@@ -371,6 +371,19 @@\n     </dependencies>\n \n     <profiles>\n+        <profile>\n+            <id>deployinternals</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1ODI0Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        <id>deployinternals</id>\n          \n          \n            \n                        <id>deploy-internals</id>", "url": "https://github.com/payara/Payara/pull/4899#discussion_r494458242", "createdAt": "2020-09-24T16:36:17Z", "author": {"login": "Pandrex247"}, "path": "appserver/extras/embedded/all/pom.xml", "diffHunk": "@@ -468,5 +468,18 @@\n                 </plugins>\n             </build>\n         </profile>\n+        <profile>\n+            <id>deployinternals</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1ODMyNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        <id>deployinternals</id>\n          \n          \n            \n                        <id>deploy-internals</id>", "url": "https://github.com/payara/Payara/pull/4899#discussion_r494458326", "createdAt": "2020-09-24T16:36:26Z", "author": {"login": "Pandrex247"}, "path": "appserver/ejb/ejb-http-remoting/client/pom.xml", "diffHunk": "@@ -133,6 +133,22 @@\n         </plugins>\n     </build>\n \n+    <profiles>\n+        <profile>\n+            <id>deployinternals</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1ODQzNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        <id>deployinternals</id>\n          \n          \n            \n                        <id>deploy-internals</id>", "url": "https://github.com/payara/Payara/pull/4899#discussion_r494458434", "createdAt": "2020-09-24T16:36:35Z", "author": {"login": "Pandrex247"}, "path": "appserver/distributions/payara/pom.xml", "diffHunk": "@@ -136,6 +136,19 @@\n                 </plugins>\n             </build>\n         </profile>\n+        <profile>\n+            <id>deployinternals</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1ODUyNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        <id>deployinternals</id>\n          \n          \n            \n                        <id>deploy-internals</id>", "url": "https://github.com/payara/Payara/pull/4899#discussion_r494458526", "createdAt": "2020-09-24T16:36:44Z", "author": {"login": "Pandrex247"}, "path": "appserver/distributions/payara-web/pom.xml", "diffHunk": "@@ -134,6 +134,19 @@\n                 </plugins>\n             </build>\n         </profile>\n+        <profile>\n+            <id>deployinternals</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1ODY0Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        <id>deployinternals</id>\n          \n          \n            \n                        <id>deploy-internals</id>", "url": "https://github.com/payara/Payara/pull/4899#discussion_r494458646", "createdAt": "2020-09-24T16:36:53Z", "author": {"login": "Pandrex247"}, "path": "appserver/distributions/payara-web-ml/pom.xml", "diffHunk": "@@ -133,6 +133,19 @@\n                 </plugins>\n             </build>\n         </profile>\n+        <profile>\n+            <id>deployinternals</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1ODcyMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        <id>deployinternals</id>\n          \n          \n            \n                        <id>deploy-internals</id>", "url": "https://github.com/payara/Payara/pull/4899#discussion_r494458721", "createdAt": "2020-09-24T16:37:00Z", "author": {"login": "Pandrex247"}, "path": "appserver/distributions/payara-ml/pom.xml", "diffHunk": "@@ -131,6 +131,19 @@\n                 </plugins>\n             </build>\n         </profile>\n+        <profile>\n+            <id>deployinternals</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1ODg3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        <id>deployinternals</id>\n          \n          \n            \n                        <id>deploy-internals</id>", "url": "https://github.com/payara/Payara/pull/4899#discussion_r494458872", "createdAt": "2020-09-24T16:37:15Z", "author": {"login": "Pandrex247"}, "path": "appserver/extras/payara-micro/payara-micro-distribution/pom.xml", "diffHunk": "@@ -523,5 +523,18 @@\n                 <product.name>Payara Micro Enterprise</product.name>\n             </properties>\n         </profile>\n+        <profile>\n+            <id>deployinternals</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ2MTc1Mg==", "bodyText": "Doesn't this make specifying the profile activation on each of payara, payara-web, payara-ml,and payara-web-ml redundant?\nYou've set it to uncategorically skip deployment here, and then also told it to skip deployment when the deploy-internal profile is activated.", "url": "https://github.com/payara/Payara/pull/4899#discussion_r494461752", "createdAt": "2020-09-24T16:42:00Z", "author": {"login": "Pandrex247"}, "path": "nucleus/distributions/pom.xml", "diffHunk": "@@ -168,7 +168,12 @@\n                     </execution>\n                 </executions>\n             </plugin>\n+            <plugin>\n+                <artifactId>maven-deploy-plugin</artifactId>\n+                <configuration>\n+                    <skip>true</skip>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ2MjU1NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        <id>deployinternals</id>\n          \n          \n            \n                        <id>deploy-internals</id>", "url": "https://github.com/payara/Payara/pull/4899#discussion_r494462555", "createdAt": "2020-09-24T16:43:24Z", "author": {"login": "Pandrex247"}, "path": "pom.xml", "diffHunk": "@@ -347,6 +341,31 @@\n             </build>\n         </profile>\n \n+        <profile>\n+            <id>deployinternals</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ2Mjc5Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        <id>deployinternals</id>\n          \n          \n            \n                        <id>deploy-internals</id>", "url": "https://github.com/payara/Payara/pull/4899#discussion_r494462793", "createdAt": "2020-09-24T16:43:49Z", "author": {"login": "Pandrex247"}, "path": "nucleus/pom.xml", "diffHunk": "@@ -992,6 +992,12 @@ Parent is ${project.parent}</echo>\n     </dependencyManagement>\n \n     <profiles>\n+        <profile>\n+            <id>deployinternals</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ2NTAxNg==", "bodyText": "This seems redundant. deploy.skip is already set to false by default within this very pom.", "url": "https://github.com/payara/Payara/pull/4899#discussion_r494465016", "createdAt": "2020-09-24T16:47:21Z", "author": {"login": "Pandrex247"}, "path": "pom.xml", "diffHunk": "@@ -347,6 +341,31 @@\n             </build>\n         </profile>\n \n+        <profile>\n+            <id>deployinternals</id>\n+            <activation>\n+                <activeByDefault>false</activeByDefault>\n+            </activation>\n+\n+            <distributionManagement>\n+                <repository>\n+                    <id>payara-nexus</id>\n+                    <url>https://nexus.payara.fish/repository/payara-artifacts/</url>\n+                </repository>\n+            </distributionManagement>\n+\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <artifactId>maven-deploy-plugin</artifactId>\n+                        <configuration>\n+                            <skip>false</skip>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg1ODgwNg=="}, "originalCommit": {"oid": "427d50f4188956b4af1dcb3ba2d03fb6d8b9ba7b"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76bf98519bf74e85431b9ad591e93daa9a59625a", "author": {"user": {"login": "MattGill98", "name": "Matthew Gill"}}, "url": "https://github.com/payara/Payara/commit/76bf98519bf74e85431b9ad591e93daa9a59625a", "committedDate": "2020-09-28T13:52:28Z", "message": "FISH-326 Refactor Deployment Profiles\n\n- Rename 'deployinternals' profile to 'deploy-internals'\n- Reuse 'deploy.skip' property, and remove most overrides that ignore\nthis property\n- Remove all artifacts except for subgroups of 'fish.payara.server' from\nthe 'deploy-internals' profile\n\nSigned-off-by: Matthew Gill <matthew.gill@live.co.uk>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c736921c534f4f6793effcba1e4e96f1a2c29ebd", "author": {"user": {"login": "MattGill98", "name": "Matthew Gill"}}, "url": "https://github.com/payara/Payara/commit/c736921c534f4f6793effcba1e4e96f1a2c29ebd", "committedDate": "2020-09-28T13:44:25Z", "message": "FISH-326 Refactor Deployment Profiles\n\n- Rename 'deployinternals' profile to 'deploy-internals'\n- Reuse 'deploy.skip' property, and remove most overrides that ignore\nthis property\n- Remove all artifacts except for subgroups of 'fish.payara.server' from\nthe 'deploy-internals' profile\n\nSigned-off-by: Matthew Gill <matthew.gill@live.co.uk>"}, "afterCommit": {"oid": "76bf98519bf74e85431b9ad591e93daa9a59625a", "author": {"user": {"login": "MattGill98", "name": "Matthew Gill"}}, "url": "https://github.com/payara/Payara/commit/76bf98519bf74e85431b9ad591e93daa9a59625a", "committedDate": "2020-09-28T13:52:28Z", "message": "FISH-326 Refactor Deployment Profiles\n\n- Rename 'deployinternals' profile to 'deploy-internals'\n- Reuse 'deploy.skip' property, and remove most overrides that ignore\nthis property\n- Remove all artifacts except for subgroups of 'fish.payara.server' from\nthe 'deploy-internals' profile\n\nSigned-off-by: Matthew Gill <matthew.gill@live.co.uk>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjMzNTI4", "url": "https://github.com/payara/Payara/pull/4899#pullrequestreview-500233528", "createdAt": "2020-10-01T11:01:00Z", "commit": {"oid": "76bf98519bf74e85431b9ad591e93daa9a59625a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 677, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}