{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3ODg2ODc0", "number": 4699, "title": "CUSTCOM-14 Improvements in stop-domain process", "bodyText": "Description\nThis a feature to improve the stop-domain process. Now check is performed to see if the hostname passed by the --host parameter represents the current machine.\nTesting\nTesting Performed\nRan the following command to test:\n./asadmin start-domain\n./asadmin --host $MY_HOSTNAME --port 4848 stop-domain\n\nTesting Environment\nZulu JDK 1.8_222 on Elementary OS 0.4.1 Loki with Maven 3.5.4\nDocumentation\nNot required", "createdAt": "2020-06-04T14:42:25Z", "url": "https://github.com/payara/Payara/pull/4699", "merged": true, "mergeCommit": {"oid": "6f959188dc6512a1c6b2207ff3675d64318901fd"}, "closed": true, "closedAt": "2020-06-24T08:44:54Z", "author": {"login": "MeroRai"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcn-vanAH2gAyNDI3ODg2ODc0OjMyMDdlMTEzMGUxMjgxMDJkMTQ4ZGYzYjJlN2E5YjliOThhZTU0NTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcplSniAFqTQyNzE2NDE1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3207e1130e128102d148df3b2e7a9b9b98ae5452", "author": {"user": {"login": "MeroRai", "name": "Mero Rai"}}, "url": "https://github.com/payara/Payara/commit/3207e1130e128102d148df3b2e7a9b9b98ae5452", "committedDate": "2020-06-04T14:15:02Z", "message": "CUSTCOM-14 Improvements in stop-domain process"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a32d0a75bbedfba50b1650b180bce0c79b002da0", "author": {"user": {"login": "MeroRai", "name": "Mero Rai"}}, "url": "https://github.com/payara/Payara/commit/a32d0a75bbedfba50b1650b180bce0c79b002da0", "committedDate": "2020-06-04T14:25:10Z", "message": "Removed debugging code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NjMzNTc4", "url": "https://github.com/payara/Payara/pull/4699#pullrequestreview-424633578", "createdAt": "2020-06-04T16:38:33Z", "commit": {"oid": "a32d0a75bbedfba50b1650b180bce0c79b002da0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjozODozNFrOGfOgqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjozODozNFrOGfOgqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM5Njc3Ng==", "bodyText": "Doesn't this change make the TODO comment obsolete?", "url": "https://github.com/payara/Payara/pull/4699#discussion_r435396776", "createdAt": "2020-06-04T16:38:34Z", "author": {"login": "svendiedrichsen"}, "path": "nucleus/admin/server-mgmt/src/main/java/com/sun/enterprise/admin/servermgmt/cli/StopDomainCommand.java", "diffHunk": "@@ -98,7 +99,7 @@ protected void initDomain() throws CommandException {\n         // TODO Byron said in April 2013 that we should probably just check if\n         // NetUtils says that the getHost() --> isThisMe() rather than merely\n         // checking for the magic \"localhost\" string.  Too risky to fool with it today.\n-        if (programOpts.getHost().equals(CLIConstants.DEFAULT_HOSTNAME)) {\n+        if (NetUtils.isThisHostLocal(programOpts.getHost())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a32d0a75bbedfba50b1650b180bce0c79b002da0"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MTI4Mzky", "url": "https://github.com/payara/Payara/pull/4699#pullrequestreview-425128392", "createdAt": "2020-06-05T09:10:03Z", "commit": {"oid": "a32d0a75bbedfba50b1650b180bce0c79b002da0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOToxMDowNFrOGfmnxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOToxMDo0MlrOGfmpWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc5MTgxNQ==", "bodyText": "This seems like a stronger way of checking the startup state of the server - why has this been removed?", "url": "https://github.com/payara/Payara/pull/4699#discussion_r435791815", "createdAt": "2020-06-05T09:10:04Z", "author": {"login": "MattGill98"}, "path": "nucleus/core/kernel/src/main/java/com/sun/enterprise/v3/server/AppServerStartup.java", "diffHunk": "@@ -222,18 +220,10 @@ public synchronized void start() {\n             // See issue #5596 to know why we set context CL as common CL.\n             Thread.currentThread().setContextClassLoader(\n                     commonCLS.getCommonClassLoader());\n-            if (state.compareAndSet(State.INITIAL, State.STARTING) || state.compareAndSet(State.SHUT_DOWN, State.STARTING)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a32d0a75bbedfba50b1650b180bce0c79b002da0"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc5MjIxOQ==", "bodyText": "Who's Jerome? \ud83d\ude02", "url": "https://github.com/payara/Payara/pull/4699#discussion_r435792219", "createdAt": "2020-06-05T09:10:42Z", "author": {"login": "MattGill98"}, "path": "nucleus/core/kernel/src/main/java/com/sun/enterprise/v3/server/AppServerStartup.java", "diffHunk": "@@ -475,23 +466,31 @@ public static void printModuleStatus(ModulesRegistry registry, Level level) {\n         logger.log(level, sb.toString());\n     }\n \n+    // TODO(Sahoo): Revisit this method after discussing with Jerome.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a32d0a75bbedfba50b1650b180bce0c79b002da0"}, "originalPosition": 84}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MzczNDc3", "url": "https://github.com/payara/Payara/pull/4699#pullrequestreview-425373477", "createdAt": "2020-06-05T14:53:05Z", "commit": {"oid": "a32d0a75bbedfba50b1650b180bce0c79b002da0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNDo1MzowNVrOGfx0ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNDo1MzowNVrOGfx0ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk3NTMzMQ==", "bodyText": "Is there a parameter AppServerActivator missing? At least you have added the comment about one.", "url": "https://github.com/payara/Payara/pull/4699#discussion_r435975331", "createdAt": "2020-06-05T14:53:05Z", "author": {"login": "svendiedrichsen"}, "path": "nucleus/core/kernel/src/main/java/com/sun/enterprise/v3/server/AppServerStartup.java", "diffHunk": "@@ -543,9 +543,11 @@ public synchronized void stop() {\n     }\n \n     /**\n-     * Proceed to the given run level.\n+     * Proceed to the given run level using the given {@link AppServerActivator}.\n      *\n      * @param runLevel   the run level to proceed to\n+     * @param activator  an {@link AppServerActivator activator} used to\n+     *                   activate/deactivate the services\n      * @return false if an error occurred that required server shutdown; true otherwise\n      */\n     private boolean proceedTo(int runLevel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a32d0a75bbedfba50b1650b180bce0c79b002da0"}, "originalPosition": 149}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9a52c2c53767f5a22f459052a6011f353da4ca2", "author": {"user": {"login": "MeroRai", "name": "Mero Rai"}}, "url": "https://github.com/payara/Payara/commit/b9a52c2c53767f5a22f459052a6011f353da4ca2", "committedDate": "2020-06-09T09:50:50Z", "message": "* Removed obsolete comments\n* Added back Patrik's commit which was removed by mistake\""}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3MTY0MTUy", "url": "https://github.com/payara/Payara/pull/4699#pullrequestreview-427164152", "createdAt": "2020-06-09T13:43:48Z", "commit": {"oid": "b9a52c2c53767f5a22f459052a6011f353da4ca2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 717, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}