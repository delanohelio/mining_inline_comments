{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzNzUwNTc5", "number": 4974, "title": "FISH-657 fixed wstx-services deployment errors", "bodyText": "Description\nFixes web services deployment bug (sporradic)\nImportant Info\nBlockers\nnone\nTesting\nNew tests\nQuickLook tests pass now,\nno exception such as this:\nava.lang.IllegalArgumentException: no <deploymentgroup> element\n    at com.sun.enterprise.config.serverbeans.Domain$Duck.getDeploymentGroupNamed(Domain.java:672)\n    at sun.reflect.GeneratedMethodAccessor88.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.jvnet.hk2.config.Dom.invokeDuckMethod(Dom.java:1129)\n    at org.jvnet.hk2.config.Dom.invoke(Dom.java:1080)\n    at org.glassfish.config.support.TranslatedConfigView.invoke(TranslatedConfigView.java:208)\n    at com.sun.proxy.$Proxy82.getDeploymentGroupNamed(Unknown Source)\n    at org.glassfish.ejb.startup.EjbDeployer.event(EjbDeployer.java:472)\n    at org.glassfish.kernel.event.EventsImpl.send(EventsImpl.java:131)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepare(ApplicationLifecycle.java:562)\n\nTesting Performed\nQuickLook tests\nTesting Environment\nMac, JDK 8\nDocumentation\nNotes for Reviewers", "createdAt": "2020-11-02T02:47:26Z", "url": "https://github.com/payara/Payara/pull/4974", "merged": true, "mergeCommit": {"oid": "5ab8aa06e36311d4e41aa429c72e8db6970a64c9"}, "closed": true, "closedAt": "2020-11-13T09:21:56Z", "author": {"login": "lprimak"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYbWGyAH2gAyNTEzNzUwNTc5Ojc4YmIzZmYxNDA3MTdhNTIzNWEwNjdmNTNiMzI5NzlhNDgxYTViMDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdb07SsgH2gAyNTEzNzUwNTc5OjBlYzUyZmFmZDg3ZjVmYmVmNjllODM3MGYxNmYxM2FjYjU5NTE3ZTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "78bb3ff140717a5235a067f53b32979a481a5b00", "author": {"user": {"login": "lprimak", "name": "Lenny Primak"}}, "url": "https://github.com/payara/Payara/commit/78bb3ff140717a5235a067f53b32979a481a5b00", "committedDate": "2020-11-02T02:43:00Z", "message": "check for null target inside the deploy command, could happen with internal apps, such as wstx-services or admin console"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjQ1NzE0", "url": "https://github.com/payara/Payara/pull/4974#pullrequestreview-522245714", "createdAt": "2020-11-03T07:49:44Z", "commit": {"oid": "78bb3ff140717a5235a067f53b32979a481a5b00"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyNDg1NzAz", "url": "https://github.com/payara/Payara/pull/4974#pullrequestreview-522485703", "createdAt": "2020-11-03T13:19:57Z", "commit": {"oid": "78bb3ff140717a5235a067f53b32979a481a5b00"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMzoxOTo1N1rOHsuZ-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMzoxOTo1N1rOHsuZ-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjY1OTcwNg==", "bodyText": "Shouldn't target == null be checked within getDeploymentGroupNamed", "url": "https://github.com/payara/Payara/pull/4974#discussion_r516659706", "createdAt": "2020-11-03T13:19:57Z", "author": {"login": "svendiedrichsen"}, "path": "appserver/ejb/ejb-container/src/main/java/org/glassfish/ejb/startup/EjbDeployer.java", "diffHunk": "@@ -469,7 +468,8 @@ public void event(Event event) {\n             }\n \n             boolean createTimers = true;\n-            boolean isDeploymentGroup = domain.getDeploymentGroupNamed(dcp.target) != null;\n+            // target could be null for internal apps such as wstx-services or admin console\n+            boolean isDeploymentGroup = dcp.target == null ? false : domain.getDeploymentGroupNamed(dcp.target) != null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78bb3ff140717a5235a067f53b32979a481a5b00"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4OTM5MDg3", "url": "https://github.com/payara/Payara/pull/4974#pullrequestreview-528939087", "createdAt": "2020-11-12T10:16:35Z", "commit": {"oid": "78bb3ff140717a5235a067f53b32979a481a5b00"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ec52fafd87f5fbef69e8370f16f13acb59517e6", "author": {"user": {"login": "lprimak", "name": "Lenny Primak"}}, "url": "https://github.com/payara/Payara/commit/0ec52fafd87f5fbef69e8370f16f13acb59517e6", "committedDate": "2020-11-12T16:13:01Z", "message": "Merge branch 'master' into Deployment-Groups-NPE-FISH-657"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 705, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}