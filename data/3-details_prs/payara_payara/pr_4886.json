{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2NjIzNzU4", "number": 4886, "title": "FISH-141 Support Additional Fields with LogRecord when using JsonLogFormatter", "bodyText": "Description\nFeature.\nParameters added to a log record as a map will now be logged out.\nAlso adds some default maven-failsafe -plugin settings because I'm tired of copy-pasting them.\nImportant Info\nBlockers\nNone.\nTesting\nNew tests\nNew sample added.\nTesting Performed\nRan sample test.\nAlso tested manually by deploying servlet in sample, changing log formatting to JSON, and hitting servlet.\nTesting Environment\nWindows 10, JDK 8u265\nDocumentation\nPending...\nNotes for Reviewers\nNone.", "createdAt": "2020-09-14T13:37:12Z", "url": "https://github.com/payara/Payara/pull/4886", "merged": true, "mergeCommit": {"oid": "8b9714e9b74c3836f6717fb01954a559d316cd47"}, "closed": true, "closedAt": "2020-09-23T08:07:56Z", "author": {"login": "Pandrex247"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdIx0U-AH2gAyNDg2NjIzNzU4OmQyYzJiZmI4MjUwYmMxZGRkNmRkODkzZDlhNjU2OTBjYWQyMDdkMzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJgpz1gFqTQ4OTkxMzQ3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d2c2bfb8250bc1ddd6dd893d9a65690cad207d38", "author": {"user": {"login": "Pandrex247", "name": "Andrew Pielage"}}, "url": "https://github.com/payara/Payara/commit/d2c2bfb8250bc1ddd6dd893d9a65690cad207d38", "committedDate": "2020-09-14T11:51:08Z", "message": "FISH-141 Add logging of Map parameter to JSON log formatter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdbd3c80304921b6f3c65960efd75adece8e7b24", "author": {"user": {"login": "Pandrex247", "name": "Andrew Pielage"}}, "url": "https://github.com/payara/Payara/commit/fdbd3c80304921b6f3c65960efd75adece8e7b24", "committedDate": "2020-09-14T11:55:38Z", "message": "FISH-141 Add test and fix copyright\n\nSigned-off-by: Andrew Pielage <andrew.pielage@payara.fish>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NTUyMzE4", "url": "https://github.com/payara/Payara/pull/4886#pullrequestreview-489552318", "createdAt": "2020-09-16T12:02:17Z", "commit": {"oid": "fdbd3c80304921b6f3c65960efd75adece8e7b24"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5OTEzNDc2", "url": "https://github.com/payara/Payara/pull/4886#pullrequestreview-489913476", "createdAt": "2020-09-16T18:25:10Z", "commit": {"oid": "fdbd3c80304921b6f3c65960efd75adece8e7b24"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxODoyNToxMFrOHS8-ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxODoyNToxMFrOHS8-ag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTYzNTQzNA==", "bodyText": "Why not support all parameters as JsonArray and have the Map be a JsonObject within it? If done like this any key within the map will eventually override an existing property.", "url": "https://github.com/payara/Payara/pull/4886#discussion_r489635434", "createdAt": "2020-09-16T18:25:10Z", "author": {"login": "svendiedrichsen"}, "path": "nucleus/core/logging/src/main/java/fish/payara/enterprise/server/logging/JSONLogFormatter.java", "diffHunk": "@@ -379,6 +378,30 @@ private String jsonLogFormat(LogRecord record) {\n                         .append(eventObject.toString()), level);\n             }\n \n+            Object[] parameters = record.getParameters();\n+            if (parameters != null) {\n+                for (Object parameter : parameters) {\n+                    if (parameter instanceof Map) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdbd3c80304921b6f3c65960efd75adece8e7b24"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 672, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}