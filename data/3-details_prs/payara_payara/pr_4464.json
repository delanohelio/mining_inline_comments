{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5MTQxODU1", "number": 4464, "title": "APPSERV-30 Exception when Adding an Instance to a Deployment Group with an Application Deployed", "bodyText": "Description\nWhen you create and add a new instance to a deployment group with an application deployed to it, an error is thrown and the application is not deployed\nImportant Info\nSteps to reproduce:\n\nStart a clean domain\nCreate a deployment group with no instances\nDeploy an application to the deployment group\nCreate a new instance and add it to the deployment group\nStart the instance and look at the logs\n\nTesting Performed\nFollowed the above reproducer to make sure the fix worked as intended.\nTest suites executed\nBuild Test\nTesting Environment\nZulu JDK 1.8_222 on Elementary OS 0.4.1 Loki with Maven 3.5.4", "createdAt": "2020-01-30T15:37:35Z", "url": "https://github.com/payara/Payara/pull/4464", "merged": true, "mergeCommit": {"oid": "cd84ed99cb46502e0cc4aa610620a98e849f0d28"}, "closed": true, "closedAt": "2020-02-07T11:36:19Z", "author": {"login": "MeroRai"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_b-mLAH2gAyMzY5MTQxODU1OjIyNGJiZTJkZjlmNzM3OWQ2ODA2YWViMDRhZWFhZDllYzlmODZhZTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcB8VFAAFqTM1NTA0NDgwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "224bbe2df9f7379d6806aeb04aeaad9ec9f86ae1", "author": {"user": {"login": "MeroRai", "name": "Mero Rai"}}, "url": "https://github.com/payara/Payara/commit/224bbe2df9f7379d6806aeb04aeaad9ec9f86ae1", "committedDate": "2020-01-30T15:07:58Z", "message": "APPSERV-30 Exception when Adding an Instance to a Deployment Group with an Application Deployed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwOTYyMzg1", "url": "https://github.com/payara/Payara/pull/4464#pullrequestreview-350962385", "createdAt": "2020-01-30T16:28:46Z", "commit": {"oid": "224bbe2df9f7379d6806aeb04aeaad9ec9f86ae1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNjoyODo0N1rOFjxdfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNjoyODo0N1rOFjxdfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA1NDg0NA==", "bodyText": "It might be personal preference but I think use of continue should be avoided if possible. Here it is easy to avoid by negating the condition and moving the add into the block.", "url": "https://github.com/payara/Payara/pull/4464#discussion_r373054844", "createdAt": "2020-01-30T16:28:47Z", "author": {"login": "jbee"}, "path": "nucleus/cluster/admin/src/main/java/fish/payara/admin/cluster/AddInstanceToDeploymentGroupCommand.java", "diffHunk": "@@ -164,4 +172,25 @@ public void execute(AdminCommandContext context) {\n         }\n     }\n \n-}\n+    private String getVirtualServers(Server server) {\n+        Config config = domain.getConfigs().getConfigByName(\n+                server.getConfigRef());\n+\n+        StringJoiner virtualServers = new StringJoiner(\",\");\n+        if (config != null) {\n+            HttpService httpService = config.getHttpService();\n+            if (httpService != null) {\n+                List<VirtualServer> hosts = httpService.getVirtualServer();\n+                if (hosts != null) {\n+                    for (VirtualServer host : hosts) {\n+                        if ((\"__asadmin\").equals(host.getId())) {\n+                            continue;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "224bbe2df9f7379d6806aeb04aeaad9ec9f86ae1"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyODk5NjQw", "url": "https://github.com/payara/Payara/pull/4464#pullrequestreview-352899640", "createdAt": "2020-02-04T11:19:14Z", "commit": {"oid": "224bbe2df9f7379d6806aeb04aeaad9ec9f86ae1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzMDg5NDUw", "url": "https://github.com/payara/Payara/pull/4464#pullrequestreview-353089450", "createdAt": "2020-02-04T15:53:51Z", "commit": {"oid": "224bbe2df9f7379d6806aeb04aeaad9ec9f86ae1"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c71a030ed19ef9428bbdb041be2930f571b46bca", "author": {"user": {"login": "MeroRai", "name": "Mero Rai"}}, "url": "https://github.com/payara/Payara/commit/c71a030ed19ef9428bbdb041be2930f571b46bca", "committedDate": "2020-02-07T09:50:30Z", "message": "* Removed the use of continue for the loop\n* Updated the copyright header"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MDQzOTU5", "url": "https://github.com/payara/Payara/pull/4464#pullrequestreview-355043959", "createdAt": "2020-02-07T09:55:58Z", "commit": {"oid": "c71a030ed19ef9428bbdb041be2930f571b46bca"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MDQ0ODA3", "url": "https://github.com/payara/Payara/pull/4464#pullrequestreview-355044807", "createdAt": "2020-02-07T09:57:20Z", "commit": {"oid": "c71a030ed19ef9428bbdb041be2930f571b46bca"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 854, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}