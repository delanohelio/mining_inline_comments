{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyMDczNTIy", "number": 4585, "title": "CUSTCOM-194 The delete-jvm-options command shouldn't require to specify the Java version prefix", "bodyText": "Description\nThis is a bug fix to fix an issue where the delete-jvm-options command required the specify Java version prefix to execute successfully.\nTesting\nNew tests\nNone\nTesting Performed\nBuild test\nManually tested the delete-jvm-options command with and without the Java version prefix with the following commands:\n\n./asadmin delete-jvm-options '[Azul-1.8.0u222|1.8.0u500]-XX\\:+UseOpenJSSE'\n./asadmin delete-jvm-options '-XX\\:+UseOpenJSSE'\n\nTesting Environment\nDocumentation\nNot required", "createdAt": "2020-03-22T21:28:16Z", "url": "https://github.com/payara/Payara/pull/4585", "merged": true, "mergeCommit": {"oid": "fe7de93e0895611be266c2d5cd8c398b75cd479b"}, "closed": true, "closedAt": "2020-03-25T12:45:09Z", "author": {"login": "MeroRai"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQQVycgH2gAyMzkyMDczNTIyOjlkOGYyNzMxMjdkOGFmYWE5NDVkN2JjOTNlODg0NjBlZDU4M2RlYmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQxKMOgFqTM4MDIxNzU2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9d8f273127d8afaa945d7bc93e88460ed583debc", "author": {"user": {"login": "MeroRai", "name": "Mero Rai"}}, "url": "https://github.com/payara/Payara/commit/9d8f273127d8afaa945d7bc93e88460ed583debc", "committedDate": "2020-03-22T21:11:09Z", "message": "CUSTCOM-194 The delete-jvm-options command shouldn't require to specify the Java version prefix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5Mjk1MzUy", "url": "https://github.com/payara/Payara/pull/4585#pullrequestreview-379295352", "createdAt": "2020-03-23T10:21:48Z", "commit": {"oid": "9d8f273127d8afaa945d7bc93e88460ed583debc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMDoyMTo0OVrOF5-9Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMDoyMTo0OVrOF5-9Xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM0NDY3MQ==", "bodyText": "This construct fails in some cases when multiple options are removed.  Iterator is only initialised once, so you can have the situation that the second toRemoveOption value is already in the part of the iterator which has been traversed already.", "url": "https://github.com/payara/Payara/pull/4585#discussion_r396344671", "createdAt": "2020-03-23T10:21:49Z", "author": {"login": "rdebusscher"}, "path": "nucleus/core/kernel/src/main/java/com/sun/enterprise/v3/admin/commands/DeleteJvmOptions.java", "diffHunk": "@@ -158,12 +159,22 @@ public Object run(JavaConfig jc) throws PropertyVetoException, TransactionFailur\n     }\n     */\n     //@ForTimeBeing :)\n-    private void deleteX(final JvmOptionBag bag, final List<String> toRemove, final ActionReport.MessagePart part) throws Exception {\n+    private void deleteX(final JvmOptionBag bag, final List<String> toRemoveOptions, final ActionReport.MessagePart part) throws Exception {\n         SingleConfigCode<JvmOptionBag> scc = (JvmOptionBag bag1) -> {\n             List<String> jvmopts = new ArrayList<>(bag1.getJvmRawOptions());\n             int orig = jvmopts.size();\n-            // using new JvmOption(option).toString() (instead op option directly) to make sure the correct formatting is applied.\n-            boolean removed = jvmopts.removeIf(option -> toRemove.contains(new JvmOption(option).toString()));\n+            boolean removed = false;\n+            Iterator<String> iter = jvmopts.iterator();\n+            for (String toRemoveOption : toRemoveOptions) {\n+                String option = new JvmOption(toRemoveOption).option;\n+                while (iter.hasNext()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d8f273127d8afaa945d7bc93e88460ed583debc"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e363115114c81473fa73a3d00b57ea4da4c2a1e1", "author": {"user": {"login": "MeroRai", "name": "Mero Rai"}}, "url": "https://github.com/payara/Payara/commit/e363115114c81473fa73a3d00b57ea4da4c2a1e1", "committedDate": "2020-03-24T10:47:48Z", "message": "Now can delete multiple JVM options"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMjE3NTY1", "url": "https://github.com/payara/Payara/pull/4585#pullrequestreview-380217565", "createdAt": "2020-03-24T11:25:21Z", "commit": {"oid": "e363115114c81473fa73a3d00b57ea4da4c2a1e1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 786, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}