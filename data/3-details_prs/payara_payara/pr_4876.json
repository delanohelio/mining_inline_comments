{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxNTUxNTY5", "number": 4876, "title": "QACI-406 fixed tck websockets", "bodyText": "Description\nFixes QACI-406 - two TCK tests failed.\nCurrent result:\nreal    103m6,578s\nuser    30m29,330s\nsys     2m5,713s\nWaiting for the domain to stop ..\nCommand stop-domain executed successfully.\nNot passed: 0/745 /home/dmatej/work/repo/git/jakartaeetck-runner/cts_home/jakartaeetck-report/websocket/text/summary.txt\nWriting stage file for websocket  into stage_websocket\n\nImportant Info\nBlockers\n\nNew Grizzly version: payara/patched-src-grizzly#24\nNew Grizzly binaries: payara/Payara_PatchedProjects#327\nRelated, but not blocking new NPN (we don't need it here): payara/patched-src-grizzly-npn#4\n\nTesting\nNew tests\n\nNone\n\nTesting Performed\n\nTCK tests for websockets - two were failing, now all websockets TCK tests passed\nComplete Grizzly build, one test is still failing, in older releases failed two\nComplete Payara build,\nPayara docker tests\nPayara Samples - payara-server-managed\nPayara Samples - payara-micro-managed\nPAYARA-4176+CUSTCOM-55 tests (I originally tested with it)\none local new test is still failing => I will create a new issue.\n\nTesting Environment\nApache Maven 3.6.2 (40f52333136460af0dc0d7232c0dc0bcf0d9e117; 2019-08-27T17:06:16+02:00)\nMaven home: /home/dmatej/work/apache-maven-3.6.2\nJava version: 1.8.0_265, vendor: Azul Systems, Inc., runtime: /usr/lib/jvm/zulu8.48.0.53-ca-jdk8.0.265-linux_x64/jre\nDefault locale: cs_CZ, platform encoding: UTF-8\nOS name: \"linux\", version: \"5.4.0-45-generic\", arch: \"amd64\", family: \"unix\"\n\nDocumentation\nSee JIRA issue, links to Confluence will be added\nNotes for Reviewers\n\nRelates to payara/jakartaeetck-runner#13\nThis PR fixes ALPN support and passed the TCK/websockets, BUT there is still more work needed. I did not push failing test for a race condition, detected in HTTP2 impl in all older versions I tested, where the HTTP2 support could be enabled.", "createdAt": "2020-09-07T17:02:39Z", "url": "https://github.com/payara/Payara/pull/4876", "merged": true, "mergeCommit": {"oid": "4815472ce5f09fed1457021d1d3c0d30f82d5272"}, "closed": true, "closedAt": "2020-09-24T08:01:57Z", "author": {"login": "dmatej"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGk-fOgH2gAyNDgxNTUxNTY5Ojg4MjE0MWFlNWEzZjc5ZjkzMDg2MmY5MDgzN2JmZGY4YmEyNmZjOTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLtpalAFqTQ5NDczNTkyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "882141ae5a3f79f930862f90837bfdf8ba26fc98", "author": {"user": null}, "url": "https://github.com/payara/Payara/commit/882141ae5a3f79f930862f90837bfdf8ba26fc98", "committedDate": "2020-09-07T15:45:37Z", "message": "QACI-406 Changed ordering of JVM options to be same in all domain.xml files\n\n- files significantly differ, should be compared and reviewed soon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ce43b4188dae48552ab455d4fa96130dd3ac63f", "author": {"user": null}, "url": "https://github.com/payara/Payara/commit/1ce43b4188dae48552ab455d4fa96130dd3ac63f", "committedDate": "2020-09-07T15:46:43Z", "message": "QACI-406 Using same bootclasspath set in all domain.xml files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5939186a6db18ee9c53db624f6d52606ca142ef8", "author": {"user": null}, "url": "https://github.com/payara/Payara/commit/5939186a6db18ee9c53db624f6d52606ca142ef8", "committedDate": "2020-09-07T15:52:24Z", "message": "QACI-406 grizzly-npn-bootstrap 1.9.payara-p1 was never used\n\n- Added explanation of how it works and what to care about\n- removed 1.9.payara-p1 from dependencies\n- grizzly-npn-bootstrap is used only for old JDK8 versions, new JDK8 distros\n  already contain JSSE implementation supporting ALPN, so no bootstrap is needed\n- changed the property so it directly says what dependency it affects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bf113035356ff82c4e19602df6395026ebd0792", "author": {"user": null}, "url": "https://github.com/payara/Payara/commit/4bf113035356ff82c4e19602df6395026ebd0792", "committedDate": "2020-09-07T15:54:50Z", "message": "QACI-406 Upgraded Tyrus from 1.15 to 1.17\n\n- supports TLS1.3\n- still loses critical exceptions (server may hang) if Error occurs\n  in forked thread\n- bugfixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "262279917e21352117607692b9605fb8d4d081e6", "author": {"user": null}, "url": "https://github.com/payara/Payara/commit/262279917e21352117607692b9605fb8d4d081e6", "committedDate": "2020-09-07T15:55:17Z", "message": "QACI-406 ServerLogTest enabled again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204", "author": {"user": null}, "url": "https://github.com/payara/Payara/commit/98fb18176e6b5cb02c8254d08d06ce1d16b49204", "committedDate": "2020-09-07T16:41:12Z", "message": "QACI-406 Using released version of grizzly 2.4.4.payara-p4"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MTAzNDA3", "url": "https://github.com/payara/Payara/pull/4876#pullrequestreview-486103407", "createdAt": "2020-09-10T16:19:06Z", "commit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoxOTowNlrOHP71kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoxOTowNlrOHP71kA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ3MTA1Ng==", "bodyText": "What's being changed here and why?", "url": "https://github.com/payara/Payara/pull/4876#discussion_r486471056", "createdAt": "2020-09-10T16:19:06Z", "author": {"login": "MattGill98"}, "path": "appserver/admin/gf_template/src/main/resources/config/domain.xml", "diffHunk": "@@ -205,20 +205,22 @@\n                 <jvm-options>[9|]--add-opens=java.naming/javax.naming.spi=ALL-UNNAMED</jvm-options>\n                 <jvm-options>[9|]--add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED</jvm-options>\n                 <jvm-options>[9|]--add-opens=java.logging/java.util.logging=ALL-UNNAMED</jvm-options>\n-                <jvm-options>-Djava.awt.headless=true</jvm-options>\n-                <jvm-options>-Djdk.corba.allowOutputStreamSubclass=true</jvm-options>\n-                <jvm-options>-Djavax.xml.accessExternalSchema=all</jvm-options>\n-                <jvm-options>-Djavax.management.builder.initial=com.sun.enterprise.v3.admin.AppServerMBeanServerBuilder</jvm-options>\n+                <jvm-options>-Xmx512m</jvm-options>\n+                <jvm-options>-XX:NewRatio=2</jvm-options>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzEyNzgy", "url": "https://github.com/payara/Payara/pull/4876#pullrequestreview-486712782", "createdAt": "2020-09-11T11:07:22Z", "commit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMTowNzoyMlrOHQaiWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMTowNzoyMlrOHQaiWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk3NDA0MQ==", "bodyText": "Maintainability: Only ordering changed in this block.", "url": "https://github.com/payara/Payara/pull/4876#discussion_r486974041", "createdAt": "2020-09-11T11:07:22Z", "author": {"login": "dmatej"}, "path": "appserver/admin/gf_template/src/main/resources/config/domain.xml", "diffHunk": "@@ -430,19 +429,20 @@\n                 <jvm-options>[9|]--add-opens=java.naming/javax.naming.spi=ALL-UNNAMED</jvm-options>\n                 <jvm-options>[9|]--add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED</jvm-options>\n                 <jvm-options>[9|]--add-opens=java.logging/java.util.logging=ALL-UNNAMED</jvm-options>\n-                <jvm-options>-Djava.awt.headless=true</jvm-options>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "originalPosition": 75}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzE0MTI0", "url": "https://github.com/payara/Payara/pull/4876#pullrequestreview-486714124", "createdAt": "2020-09-11T11:09:49Z", "commit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMTowOTo0OVrOHQamqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMTowOTo0OVrOHQamqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk3NTE0NQ==", "bodyText": "Maintainability: Only ordering changed in this block.", "url": "https://github.com/payara/Payara/pull/4876#discussion_r486975145", "createdAt": "2020-09-11T11:09:49Z", "author": {"login": "dmatej"}, "path": "appserver/admin/gf_template_web/src/main/resources/config/domain.xml", "diffHunk": "@@ -200,20 +200,22 @@\n         <jvm-options>[9|]--add-opens=java.naming/javax.naming.spi=ALL-UNNAMED</jvm-options>\n         <jvm-options>[9|]--add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED</jvm-options>\n         <jvm-options>[9|]--add-opens=java.logging/java.util.logging=ALL-UNNAMED</jvm-options>\n-        <jvm-options>-Djava.awt.headless=true</jvm-options>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzE2OTIz", "url": "https://github.com/payara/Payara/pull/4876#pullrequestreview-486716923", "createdAt": "2020-09-11T11:14:52Z", "commit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToxNDo1MlrOHQau-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToxNDo1MlrOHQau-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk3NzI3Mw==", "bodyText": "Maintainability: Only ordering changed in this block", "url": "https://github.com/payara/Payara/pull/4876#discussion_r486977273", "createdAt": "2020-09-11T11:14:52Z", "author": {"login": "dmatej"}, "path": "appserver/admin/gf_template_web/src/main/resources/config/domain.xml", "diffHunk": "@@ -420,19 +419,20 @@\n         <jvm-options>[9|]--add-opens=java.naming/javax.naming.spi=ALL-UNNAMED</jvm-options>\n         <jvm-options>[9|]--add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED</jvm-options>\n         <jvm-options>[9|]--add-opens=java.logging/java.util.logging=ALL-UNNAMED</jvm-options>\n-        <jvm-options>-Djava.awt.headless=true</jvm-options>\n-        <jvm-options>-Djdk.corba.allowOutputStreamSubclass=true</jvm-options>\n+        <jvm-options>-Xmx512m</jvm-options>\n+        <jvm-options>-XX:NewRatio=2</jvm-options>\n         <jvm-options>-XX:+UnlockDiagnosticVMOptions</jvm-options>\n-        <jvm-options>-Djava.security.policy=${com.sun.aas.instanceRoot}/config/server.policy</jvm-options>\n+        <jvm-options>-Dcom.sun.enterprise.config.config_environment_factory_class=com.sun.enterprise.config.serverbeans.AppserverConfigEnvironmentFactory</jvm-options>\n+        <jvm-options>-Djava.awt.headless=true</jvm-options>\n         <jvm-options>-Djava.security.auth.login.config=${com.sun.aas.instanceRoot}/config/login.conf</jvm-options>\n+        <jvm-options>-Djava.security.policy=${com.sun.aas.instanceRoot}/config/server.policy</jvm-options>\n         <jvm-options>-Dcom.sun.enterprise.security.httpsOutboundKeyAlias=s1as</jvm-options>\n         <jvm-options>-Djavax.net.ssl.keyStore=${com.sun.aas.instanceRoot}/config/keystore.jks</jvm-options>\n         <jvm-options>-Djavax.net.ssl.trustStore=${com.sun.aas.instanceRoot}/config/cacerts.jks</jvm-options>\n-             <jvm-options>-Djdbc.drivers=org.h2.Driver</jvm-options>\n+        <jvm-options>-Djdbc.drivers=org.h2.Driver</jvm-options>\n+        <jvm-options>-Djdk.corba.allowOutputStreamSubclass=true</jvm-options>\n+        <jvm-options>-Djdk.tls.rejectClientInitiatedRenegotiation=true</jvm-options>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "originalPosition": 128}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzE3ODUx", "url": "https://github.com/payara/Payara/pull/4876#pullrequestreview-486717851", "createdAt": "2020-09-11T11:16:32Z", "commit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToxNjozMlrOHQayBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToxNjozMlrOHQayBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk3ODA1Mg==", "bodyText": "Maintainability: Only ordering changed in this block", "url": "https://github.com/payara/Payara/pull/4876#discussion_r486978052", "createdAt": "2020-09-11T11:16:32Z", "author": {"login": "dmatej"}, "path": "appserver/admin/production_domain_template/src/main/resources/config/domain.xml", "diffHunk": "@@ -188,31 +188,31 @@\n         <jvm-options>-XX:+UseG1GC</jvm-options>\n         <jvm-options>-XX:+UseStringDeduplication</jvm-options>\n         <jvm-options>-XX:MaxGCPauseMillis=500</jvm-options>\n-        <jvm-options>-XX:MetaspaceSize=256m</jvm-options>\n         <jvm-options>-XX:MaxMetaspaceSize=2g</jvm-options>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzE4MTQ5", "url": "https://github.com/payara/Payara/pull/4876#pullrequestreview-486718149", "createdAt": "2020-09-11T11:17:01Z", "commit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToxNzowMVrOHQay-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToxNzowMVrOHQay-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk3ODI5OA==", "bodyText": "Maintainability: Only ordering changed in this block", "url": "https://github.com/payara/Payara/pull/4876#discussion_r486978298", "createdAt": "2020-09-11T11:17:01Z", "author": {"login": "dmatej"}, "path": "appserver/admin/production_domain_template/src/main/resources/config/domain.xml", "diffHunk": "@@ -395,30 +395,30 @@\n         <jvm-options>-XX:+UseG1GC</jvm-options>\n         <jvm-options>-XX:+UseStringDeduplication</jvm-options>\n         <jvm-options>-XX:MaxGCPauseMillis=500</jvm-options>\n-        <jvm-options>-XX:MetaspaceSize=256m</jvm-options>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzE4NDQx", "url": "https://github.com/payara/Payara/pull/4876#pullrequestreview-486718441", "createdAt": "2020-09-11T11:17:35Z", "commit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToxNzozNVrOHQaz3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToxNzozNVrOHQaz3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk3ODUyNA==", "bodyText": "Maintainability: Only ordering changed in this block", "url": "https://github.com/payara/Payara/pull/4876#discussion_r486978524", "createdAt": "2020-09-11T11:17:35Z", "author": {"login": "dmatej"}, "path": "appserver/admin/production_domain_template_web/src/main/resources/config/domain.xml", "diffHunk": "@@ -206,36 +206,36 @@\n         <jvm-options>[9|]--add-opens=java.naming/javax.naming.spi=ALL-UNNAMED</jvm-options>\n         <jvm-options>[9|]--add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED</jvm-options>\n         <jvm-options>[9|]--add-opens=java.logging/java.util.logging=ALL-UNNAMED</jvm-options>\n+        <jvm-options>-Xmx2g</jvm-options>\n+        <jvm-options>-Xms2g</jvm-options>\n         <jvm-options>-XX:+UseG1GC</jvm-options>\n         <jvm-options>-XX:+UseStringDeduplication</jvm-options>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "originalPosition": 57}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzE4ODM4", "url": "https://github.com/payara/Payara/pull/4876#pullrequestreview-486718838", "createdAt": "2020-09-11T11:18:21Z", "commit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToxODoyMVrOHQa0_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToxODoyMVrOHQa0_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk3ODgxMg==", "bodyText": "Maintainability: Only ordering changed in this block", "url": "https://github.com/payara/Payara/pull/4876#discussion_r486978812", "createdAt": "2020-09-11T11:18:21Z", "author": {"login": "dmatej"}, "path": "appserver/admin/production_domain_template_web/src/main/resources/config/domain.xml", "diffHunk": "@@ -401,40 +401,40 @@\n         <jvm-options>[9|]--add-opens=java.base/java.util=ALL-UNNAMED</jvm-options>\n         <jvm-options>[9|]--add-opens=java.base/sun.nio.ch=ALL-UNNAMED</jvm-options>\n         <jvm-options>[9|]--add-opens=java.management/sun.management=ALL-UNNAMED</jvm-options>\n-        <jvm-options>[9|]--add-opens=java.naming/javax.naming.spi=ALL-UNNAMED</jvm-options>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "originalPosition": 105}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzE5NTYz", "url": "https://github.com/payara/Payara/pull/4876#pullrequestreview-486719563", "createdAt": "2020-09-11T11:19:45Z", "commit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToxOTo0NVrOHQa3Qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToxOTo0NVrOHQa3Qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk3OTM5NA==", "bodyText": "Except ordering here I changed also filter from 1.8.0u500 to 1.8.0u250 just as it is in other domain.xml files and added non-api.", "url": "https://github.com/payara/Payara/pull/4876#discussion_r486979394", "createdAt": "2020-09-11T11:19:45Z", "author": {"login": "dmatej"}, "path": "appserver/extras/embedded/all/src/main/resources/config/domain.xml", "diffHunk": "@@ -234,18 +234,19 @@\n                 -->\n                 <jvm-options>-Dfelix.fileinstall.disableConfigSave=false</jvm-options>\n                 <!-- End of OSGi bundle configurations -->\n-                <jvm-options>-XX:NewRatio=2</jvm-options>\n                 <!-- Woodstox property needed to pass StAX TCK -->\n                 <jvm-options>-Dcom.ctc.wstx.returnNullForDefaultNamespace=true</jvm-options>\n-                <jvm-options>-Djdk.tls.rejectClientInitiatedRenegotiation=true</jvm-options>\n-                <jvm-options>-Dorg.jboss.weld.serialization.beanIdentifierIndexOptimization=false</jvm-options>\n                 <jvm-options>-Dorg.glassfish.grizzly.DEFAULT_MEMORY_MANAGER=org.glassfish.grizzly.memory.HeapMemoryManager</jvm-options>\n                 <jvm-options>-Dorg.glassfish.grizzly.nio.DefaultSelectorHandler.force-selector-spin-detection=true</jvm-options>\n-                <!-- Grizzly NPN Jar version -->\n+                <jvm-options>-Dorg.jboss.weld.serialization.beanIdentifierIndexOptimization=false</jvm-options>\n+                <jvm-options>[|8]-Djava.endorsed.dirs=${com.sun.aas.installRoot}/modules/endorsed${path.separator}${com.sun.aas.installRoot}/lib/endorsed</jvm-options>\n+                <jvm-options>[|8]-Djava.ext.dirs=${com.sun.aas.javaRoot}/lib/ext${path.separator}${com.sun.aas.javaRoot}/jre/lib/ext${path.separator}${com.sun.aas.instanceRoot}/lib/ext</jvm-options>\n+                <!-- Grizzly NPN Bootstrap compatible with used JDK version -->\n                 <jvm-options>[1.8.0|1.8.0u120]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.6.jar</jvm-options>\n                 <jvm-options>[1.8.0u121|1.8.0u160]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.7.jar</jvm-options>\n                 <jvm-options>[1.8.0u161|1.8.0u190]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.8.jar</jvm-options>\n-                <jvm-options>[1.8.0u191|1.8.0u500]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.8.1.jar</jvm-options>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "originalPosition": 62}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzIwMzM4", "url": "https://github.com/payara/Payara/pull/4876#pullrequestreview-486720338", "createdAt": "2020-09-11T11:21:06Z", "commit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToyMTowNlrOHQa5nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToyMTowNlrOHQa5nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk3OTk5OQ==", "bodyText": "Except ordering here I changed also filter from 1.8.0u500 to 1.8.0u250 just as it is in other domain.xml files and added non-api.", "url": "https://github.com/payara/Payara/pull/4876#discussion_r486979999", "createdAt": "2020-09-11T11:21:06Z", "author": {"login": "dmatej"}, "path": "appserver/extras/embedded/web/src/main/resources/config/domain.xml", "diffHunk": "@@ -227,18 +227,19 @@\n                 -->\n                 <jvm-options>-Dfelix.fileinstall.disableConfigSave=false</jvm-options>\n                 <!-- End of OSGi bundle configurations -->\n-                <jvm-options>-XX:NewRatio=2</jvm-options>\n                 <!-- Woodstox property needed to pass StAX TCK -->\n                 <jvm-options>-Dcom.ctc.wstx.returnNullForDefaultNamespace=true</jvm-options>\n-                <jvm-options>-Djdk.tls.rejectClientInitiatedRenegotiation=true</jvm-options>\n                 <jvm-options>-Dorg.jboss.weld.serialization.beanIdentifierIndexOptimization=false</jvm-options>\n                 <jvm-options>-Dorg.glassfish.grizzly.DEFAULT_MEMORY_MANAGER=org.glassfish.grizzly.memory.HeapMemoryManager</jvm-options>\n                 <jvm-options>-Dorg.glassfish.grizzly.nio.DefaultSelectorHandler.force-selector-spin-detection=true</jvm-options>\n-                <!-- Grizzly NPN Jar version -->\n+                <jvm-options>[|8]-Djava.endorsed.dirs=${com.sun.aas.installRoot}/modules/endorsed${path.separator}${com.sun.aas.installRoot}/lib/endorsed</jvm-options>\n+                <jvm-options>[|8]-Djava.ext.dirs=${com.sun.aas.javaRoot}/lib/ext${path.separator}${com.sun.aas.javaRoot}/jre/lib/ext${path.separator}${com.sun.aas.instanceRoot}/lib/ext</jvm-options>\n+                <!-- Grizzly NPN Bootstrap compatible with used JDK version -->\n                 <jvm-options>[1.8.0|1.8.0u120]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.6.jar</jvm-options>\n                 <jvm-options>[1.8.0u121|1.8.0u160]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.7.jar</jvm-options>\n                 <jvm-options>[1.8.0u161|1.8.0u190]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.8.jar</jvm-options>\n-                <jvm-options>[1.8.0u191|1.8.0u500]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.8.1.jar</jvm-options>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "originalPosition": 98}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzIxMDg4", "url": "https://github.com/payara/Payara/pull/4876#pullrequestreview-486721088", "createdAt": "2020-09-11T11:22:26Z", "commit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToyMjoyN1rOHQa74A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMToyMjoyN1rOHQa74A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk4MDU3Ng==", "bodyText": "Just the ordering to be same as in other domain.xml files", "url": "https://github.com/payara/Payara/pull/4876#discussion_r486980576", "createdAt": "2020-09-11T11:22:27Z", "author": {"login": "dmatej"}, "path": "nucleus/admin/template/src/main/resources/config/domain.xml", "diffHunk": "@@ -311,18 +311,19 @@\n          <diagnostic-service/>\n          <java-config debug-options=\"-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=${JAVA_DEBUGGER_PORT}\" system-classpath=\"\" classpath-suffix=\"\">\n              <jvm-options>-server</jvm-options>\n-             <jvm-options>-Djava.awt.headless=true</jvm-options>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "originalPosition": 101}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NzM1OTIy", "url": "https://github.com/payara/Payara/pull/4876#pullrequestreview-494735922", "createdAt": "2020-09-23T14:41:22Z", "commit": {"oid": "98fb18176e6b5cb02c8254d08d06ce1d16b49204"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 664, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}