{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2Mjc5MTcy", "number": 5074, "title": "[FISH-759] sort instances in admin console", "bodyText": "Fixes #4795\nDescription\n\nImportant Info\nBlockers\n\nTesting\nNew tests\n\nTesting Performed\n\nTesting Environment\n\nDocumentation\n\nNotes for Reviewers", "createdAt": "2020-12-29T00:24:55Z", "url": "https://github.com/payara/Payara/pull/5074", "merged": true, "mergeCommit": {"oid": "4a6c8a4e3f7b0d01053716432ab91ab2150b35e4"}, "closed": true, "closedAt": "2021-01-24T06:20:35Z", "author": {"login": "sgflt"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdqveW0gH2gAyNTQ2Mjc5MTcyOjRlNjY4YjdkNjUwODcyMDE4YjhhOGQyODI3ZTFjZmQ4YzRiN2Y3NTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdwajIJAFqTU2OTM1MzEzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4e668b7d650872018b8a8d2827e1cfd8c4b7f757", "author": {"user": {"login": "sgflt", "name": "Luk\u00e1\u0161 Kv\u00eddera"}}, "url": "https://github.com/payara/Payara/commit/4e668b7d650872018b8a8d2827e1cfd8c4b7f757", "committedDate": "2020-12-29T00:20:45Z", "message": "FISH-759 Sort instance list by name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5Njc4MTIy", "url": "https://github.com/payara/Payara/pull/5074#pullrequestreview-559678122", "createdAt": "2020-12-29T19:52:03Z", "commit": {"oid": "ab69439f4c43aabfdf90e062c8880fcb1162186f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5Njc4MTg3", "url": "https://github.com/payara/Payara/pull/5074#pullrequestreview-559678187", "createdAt": "2020-12-29T19:52:16Z", "commit": {"oid": "ab69439f4c43aabfdf90e062c8880fcb1162186f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxOTo1MjoxNlrOIMW0xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxOTo1MjoxNlrOIMW0xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTgyNzc4Mg==", "bodyText": "final", "url": "https://github.com/payara/Payara/pull/5074#discussion_r549827782", "createdAt": "2020-12-29T19:52:16Z", "author": {"login": "lprimak"}, "path": "nucleus/cluster/admin/src/main/java/com/sun/enterprise/v3/admin/cluster/ListInstancesCommand.java", "diffHunk": "@@ -214,32 +214,32 @@ private boolean notDas(String name) {\n         return !SystemPropertyConstants.DAS_SERVER_NAME.equals(name);\n     }\n \n-    private void yesStatus(List<Server> serverList, int timeoutInMsec, Logger logger) {\n+    private void yesStatus(final List<Server> serverList, final int timeoutInMsec, final Logger logger) {\n         // Gather a list of InstanceInfo -- one per instance in domain.xml\n-        RemoteInstanceCommandHelper helper = new RemoteInstanceCommandHelper(habitat);\n+        final RemoteInstanceCommandHelper helper = new RemoteInstanceCommandHelper(habitat);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab69439f4c43aabfdf90e062c8880fcb1162186f"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5Njc4MjI2", "url": "https://github.com/payara/Payara/pull/5074#pullrequestreview-559678226", "createdAt": "2020-12-29T19:52:22Z", "commit": {"oid": "ab69439f4c43aabfdf90e062c8880fcb1162186f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxOTo1MjoyMlrOIMW04A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxOTo1MjoyMlrOIMW04A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTgyNzgwOA==", "bodyText": "final", "url": "https://github.com/payara/Payara/pull/5074#discussion_r549827808", "createdAt": "2020-12-29T19:52:22Z", "author": {"login": "lprimak"}, "path": "nucleus/cluster/admin/src/main/java/com/sun/enterprise/v3/admin/cluster/ListInstancesCommand.java", "diffHunk": "@@ -214,32 +214,32 @@ private boolean notDas(String name) {\n         return !SystemPropertyConstants.DAS_SERVER_NAME.equals(name);\n     }\n \n-    private void yesStatus(List<Server> serverList, int timeoutInMsec, Logger logger) {\n+    private void yesStatus(final List<Server> serverList, final int timeoutInMsec, final Logger logger) {\n         // Gather a list of InstanceInfo -- one per instance in domain.xml\n-        RemoteInstanceCommandHelper helper = new RemoteInstanceCommandHelper(habitat);\n+        final RemoteInstanceCommandHelper helper = new RemoteInstanceCommandHelper(habitat);\n \n-        for (Server server : serverList) {\n-            boolean clustered = server.getCluster() != null;\n-            int port = helper.getAdminPort(server);\n-            String host = server.getAdminHost();\n+        for (final Server server : serverList) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab69439f4c43aabfdf90e062c8880fcb1162186f"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab69439f4c43aabfdf90e062c8880fcb1162186f", "author": {"user": {"login": "sgflt", "name": "Luk\u00e1\u0161 Kv\u00eddera"}}, "url": "https://github.com/payara/Payara/commit/ab69439f4c43aabfdf90e062c8880fcb1162186f", "committedDate": "2020-12-29T00:22:35Z", "message": "FISH-759 Minor code clean up\n\n- only finals and generics"}, "afterCommit": {"oid": "4e668b7d650872018b8a8d2827e1cfd8c4b7f757", "author": {"user": {"login": "sgflt", "name": "Luk\u00e1\u0161 Kv\u00eddera"}}, "url": "https://github.com/payara/Payara/commit/4e668b7d650872018b8a8d2827e1cfd8c4b7f757", "committedDate": "2020-12-29T00:20:45Z", "message": "FISH-759 Sort instance list by name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c567dace5328ecb9c0ad43768e905992d91e4ad4", "author": {"user": {"login": "sgflt", "name": "Luk\u00e1\u0161 Kv\u00eddera"}}, "url": "https://github.com/payara/Payara/commit/c567dace5328ecb9c0ad43768e905992d91e4ad4", "committedDate": "2020-12-30T08:05:36Z", "message": "FISH-759 Sort also configurations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5Njc4MjU2", "url": "https://github.com/payara/Payara/pull/5074#pullrequestreview-559678256", "createdAt": "2020-12-29T19:52:27Z", "commit": {"oid": "ab69439f4c43aabfdf90e062c8880fcb1162186f"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxOTo1MjoyN1rOIMW08Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQyMzozMDoxNVrOIMaaZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTgyNzgyNQ==", "bodyText": "final", "url": "https://github.com/payara/Payara/pull/5074#discussion_r549827825", "createdAt": "2020-12-29T19:52:27Z", "author": {"login": "lprimak"}, "path": "nucleus/cluster/admin/src/main/java/com/sun/enterprise/v3/admin/cluster/ListInstancesCommand.java", "diffHunk": "@@ -214,32 +214,32 @@ private boolean notDas(String name) {\n         return !SystemPropertyConstants.DAS_SERVER_NAME.equals(name);\n     }\n \n-    private void yesStatus(List<Server> serverList, int timeoutInMsec, Logger logger) {\n+    private void yesStatus(final List<Server> serverList, final int timeoutInMsec, final Logger logger) {\n         // Gather a list of InstanceInfo -- one per instance in domain.xml\n-        RemoteInstanceCommandHelper helper = new RemoteInstanceCommandHelper(habitat);\n+        final RemoteInstanceCommandHelper helper = new RemoteInstanceCommandHelper(habitat);\n \n-        for (Server server : serverList) {\n-            boolean clustered = server.getCluster() != null;\n-            int port = helper.getAdminPort(server);\n-            String host = server.getAdminHost();\n+        for (final Server server : serverList) {\n+            final boolean clustered = server.getCluster() != null;\n+            final int port = helper.getAdminPort(server);\n+            final String host = server.getAdminHost();\n \n             if (standaloneonly && clustered) {\n                 continue;\n             }\n \n-            String name = server.getName();\n+            final String name = server.getName();\n \n             if (name == null) {\n                 continue;   // can this happen?!?\n             }\n             \n-            StringBuilder deploymentGroup = new StringBuilder();\n-            for (DeploymentGroup dg : server.getDeploymentGroup()) {\n+            final StringBuilder deploymentGroup = new StringBuilder();\n+            for (final DeploymentGroup dg : server.getDeploymentGroup()) {\n                 deploymentGroup.append(dg.getName()).append(' ');\n             }\n \n-            Cluster cluster = domain.getClusterForInstance(name);\n-            String clusterName = (cluster != null) ? cluster.getName() : null;\n+            final Cluster cluster = domain.getClusterForInstance(name);\n+            final String clusterName = (cluster != null) ? cluster.getName() : null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab69439f4c43aabfdf90e062c8880fcb1162186f"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTgyNzg0MQ==", "bodyText": "final", "url": "https://github.com/payara/Payara/pull/5074#discussion_r549827841", "createdAt": "2020-12-29T19:52:31Z", "author": {"login": "lprimak"}, "path": "nucleus/cluster/admin/src/main/java/com/sun/enterprise/v3/admin/cluster/ListInstancesCommand.java", "diffHunk": "@@ -262,24 +262,26 @@ private void yesStatus(List<Server> serverList, int timeoutInMsec, Logger logger\n             return;\n         }\n \n-        Properties extraProps = new Properties();\n-        List instanceList = new ArrayList();\n \n-        for (InstanceInfo ii : infos) {\n-            String name = ii.getName();\n+        final Properties extraProps = new Properties();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab69439f4c43aabfdf90e062c8880fcb1162186f"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTgyNzg2NA==", "bodyText": "final", "url": "https://github.com/payara/Payara/pull/5074#discussion_r549827864", "createdAt": "2020-12-29T19:52:37Z", "author": {"login": "lprimak"}, "path": "nucleus/cluster/admin/src/main/java/com/sun/enterprise/v3/admin/cluster/ListInstancesCommand.java", "diffHunk": "@@ -262,24 +262,26 @@ private void yesStatus(List<Server> serverList, int timeoutInMsec, Logger logger\n             return;\n         }\n \n-        Properties extraProps = new Properties();\n-        List instanceList = new ArrayList();\n \n-        for (InstanceInfo ii : infos) {\n-            String name = ii.getName();\n+        final Properties extraProps = new Properties();\n+        final List<Map<String, Object>> instanceList = new ArrayList<>();\n+\n+        infos.sort(Comparator.comparing(InstanceInfo::getName));\n+        for (final InstanceInfo ii : infos) {\n+            final String name = ii.getName();\n             String value = (ii.isRunning()) ? InstanceState.StateType.RUNNING.getDescription()\n                     : InstanceState.StateType.NOT_RUNNING.getDescription();\n-            InstanceState.StateType state = (ii.isRunning())\n+            final InstanceState.StateType state = (ii.isRunning())\n                     ? (stateService.setState(name, InstanceState.StateType.RUNNING, false))\n                     : (stateService.setState(name, InstanceState.StateType.NOT_RUNNING, false));\n-            List<String> failedCmds = stateService.getFailedCommands(name);\n+            final List<String> failedCmds = stateService.getFailedCommands(name);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab69439f4c43aabfdf90e062c8880fcb1162186f"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTg4NjU2Ng==", "bodyText": "This reminds me of putting const everywhere you can in C++.\nEverything is good in moderation, this is way beyond the scope of this PR\nand doesn't go with the rest of the code.\nPlease remove finals.\nthank you", "url": "https://github.com/payara/Payara/pull/5074#discussion_r549886566", "createdAt": "2020-12-29T23:30:15Z", "author": {"login": "lprimak"}, "path": "nucleus/cluster/admin/src/main/java/com/sun/enterprise/v3/admin/cluster/ListInstancesCommand.java", "diffHunk": "@@ -214,32 +214,32 @@ private boolean notDas(String name) {\n         return !SystemPropertyConstants.DAS_SERVER_NAME.equals(name);\n     }\n \n-    private void yesStatus(List<Server> serverList, int timeoutInMsec, Logger logger) {\n+    private void yesStatus(final List<Server> serverList, final int timeoutInMsec, final Logger logger) {\n         // Gather a list of InstanceInfo -- one per instance in domain.xml\n-        RemoteInstanceCommandHelper helper = new RemoteInstanceCommandHelper(habitat);\n+        final RemoteInstanceCommandHelper helper = new RemoteInstanceCommandHelper(habitat);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTgyNzc4Mg=="}, "originalCommit": {"oid": "ab69439f4c43aabfdf90e062c8880fcb1162186f"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d77a4862350fd16b0d091ca96f24a616733faf5e", "author": {"user": {"login": "sgflt", "name": "Luk\u00e1\u0161 Kv\u00eddera"}}, "url": "https://github.com/payara/Payara/commit/d77a4862350fd16b0d091ca96f24a616733faf5e", "committedDate": "2020-12-30T19:05:48Z", "message": "FISH-759 Got rid of wildcard import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41f5bb1ec1c129fd51388a99ad9815cc78bca45a", "author": {"user": {"login": "sgflt", "name": "Luk\u00e1\u0161 Kv\u00eddera"}}, "url": "https://github.com/payara/Payara/commit/41f5bb1ec1c129fd51388a99ad9815cc78bca45a", "committedDate": "2020-12-30T19:21:01Z", "message": "FISH-759 Updated JDK 1.4 generics to JDK 8 style in ClusterHandler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3695d6ca87032f12056284935c95c7d29d7a0be5", "author": {"user": {"login": "sgflt", "name": "Luk\u00e1\u0161 Kv\u00eddera"}}, "url": "https://github.com/payara/Payara/commit/3695d6ca87032f12056284935c95c7d29d7a0be5", "committedDate": "2020-12-30T19:24:46Z", "message": "FISH-759 Updated JDK 1.5 generics to JDK 8 style in ListInstancesCommand"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a4a6f17a8144d98985485a1b4a6aadfa7eb6b90", "author": {"user": {"login": "sgflt", "name": "Luk\u00e1\u0161 Kv\u00eddera"}}, "url": "https://github.com/payara/Payara/commit/3a4a6f17a8144d98985485a1b4a6aadfa7eb6b90", "committedDate": "2020-12-30T19:32:43Z", "message": "FISH-759 Updated JDK 1.4 generics to JDK 8 style in ListInstancesCommand"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bce5974248f414f1da37496900d07973ca17ae7e", "author": {"user": {"login": "sgflt", "name": "Luk\u00e1\u0161 Kv\u00eddera"}}, "url": "https://github.com/payara/Payara/commit/bce5974248f414f1da37496900d07973ca17ae7e", "committedDate": "2020-12-30T19:38:52Z", "message": "FISH-759 Removed unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "524ba46ef046c9857d7176d9c1eb23835317913f", "author": {"user": {"login": "sgflt", "name": "Luk\u00e1\u0161 Kv\u00eddera"}}, "url": "https://github.com/payara/Payara/commit/524ba46ef046c9857d7176d9c1eb23835317913f", "committedDate": "2020-12-30T19:39:00Z", "message": "FISH-759 Removed unused variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc0c0901397c5c8f499ceac951b2bc74c1a017c7", "author": {"user": {"login": "sgflt", "name": "Luk\u00e1\u0161 Kv\u00eddera"}}, "url": "https://github.com/payara/Payara/commit/fc0c0901397c5c8f499ceac951b2bc74c1a017c7", "committedDate": "2020-12-30T19:39:33Z", "message": "FISH-759 Fixed spacing around ="}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e06150a197c1c96ee3a22810a58397b6c676e59", "author": {"user": {"login": "sgflt", "name": "Luk\u00e1\u0161 Kv\u00eddera"}}, "url": "https://github.com/payara/Payara/commit/8e06150a197c1c96ee3a22810a58397b6c676e59", "committedDate": "2020-12-30T19:40:22Z", "message": "FISH-759 IntelliJ automatic code clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca2115f0889a9e01ef70ae17bfe29d97fa0e85fc", "author": {"user": {"login": "sgflt", "name": "Luk\u00e1\u0161 Kv\u00eddera"}}, "url": "https://github.com/payara/Payara/commit/ca2115f0889a9e01ef70ae17bfe29d97fa0e85fc", "committedDate": "2020-12-30T19:42:28Z", "message": "FISH-759 Fixed whitespaces"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwMjAwMTM5", "url": "https://github.com/payara/Payara/pull/5074#pullrequestreview-560200139", "createdAt": "2020-12-30T21:04:49Z", "commit": {"oid": "ca2115f0889a9e01ef70ae17bfe29d97fa0e85fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY5MzUzMTMx", "url": "https://github.com/payara/Payara/pull/5074#pullrequestreview-569353131", "createdAt": "2021-01-15T15:21:23Z", "commit": {"oid": "ca2115f0889a9e01ef70ae17bfe29d97fa0e85fc"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNVQxNToyMToyNFrOIUgnyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNVQxNToyMToyNFrOIUgnyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODM3NjkwNg==", "bodyText": "Ha!", "url": "https://github.com/payara/Payara/pull/5074#discussion_r558376906", "createdAt": "2021-01-15T15:21:24Z", "author": {"login": "dmatej"}, "path": "nucleus/cluster/admin/src/main/java/com/sun/enterprise/v3/admin/cluster/ListInstancesCommand.java", "diffHunk": "@@ -263,8 +263,9 @@ private void yesStatus(List<Server> serverList, int timeoutInMsec, Logger logger\n         }\n \n         Properties extraProps = new Properties();\n-        List instanceList = new ArrayList();\n+        List<Map<String, Object>> instanceList = new ArrayList<>();\n \n+        infos.sort(Comparator.comparing(InstanceInfo::getName));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca2115f0889a9e01ef70ae17bfe29d97fa0e85fc"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 654, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}