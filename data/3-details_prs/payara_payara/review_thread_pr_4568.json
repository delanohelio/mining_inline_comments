{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1NjI0NzYz", "number": 4568, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMDoyMTowMFrODpcohA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMTozNzo0MlrODpeKmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0Nzg3MzMyOnYy", "diffSide": "RIGHT", "path": "appserver/payara-appserver-modules/microprofile/fault-tolerance/src/main/java/fish/payara/microprofile/faulttolerance/policy/CircuitBreakerPolicy.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMDoyMTowMFrOF4oKiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMDoyMTowMFrOF4oKiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDkyMjYzNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @return True if the exception is considered a failure, false if it is considered a success (anyway).\n          \n          \n            \n                 * @return True if the exception is considered a failure, false if it is considered a success.", "url": "https://github.com/payara/Payara/pull/4568#discussion_r394922635", "createdAt": "2020-03-19T10:21:00Z", "author": {"login": "Pandrex247"}, "path": "appserver/payara-appserver-modules/microprofile/fault-tolerance/src/main/java/fish/payara/microprofile/faulttolerance/policy/CircuitBreakerPolicy.java", "diffHunk": "@@ -95,12 +96,23 @@ public static CircuitBreakerPolicy create(InvocationContext context, FaultTolera\n     }\n \n     /**\n-     * Helper method that checks whether or not the given exception is included in the failOn parameter.\n+     * Helper method that checks whether or not the given exception is considered a success or failure.\n+     * \n+     * Relevant part from the {@link CircuitBreaker} documentation:\n+     * <blockquote>\n+     * When a method returns a result, the following rules are applied to determine whether the result is a success or a failure:\n+     * <ul>\n+     * <li>If the method does not throw a {@link Throwable}, it is considered a success\n+     * <li>Otherwise, if the thrown object is assignable to any value in the {@link #skipOn()} parameter, is is considered a success\n+     * <li>Otherwise, if the thrown object is assignable to any value in the {@link #failOn()} parameter, it is considered a failure\n+     * <li>Otherwise it is considered a success\n+     * </ul>\n+     * </blockquote>\n      * \n      * @param ex The exception to check\n-     * @return True if the exception is covered by {@link #failOn} list of this policy\n+     * @return True if the exception is considered a failure, false if it is considered a success (anyway).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7815826dd567c0787e28f27f7cc3cce18a90b79"}, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0ODEyNDQyOnYy", "diffSide": "RIGHT", "path": "appserver/payara-appserver-modules/microprofile/fault-tolerance/src/main/java/fish/payara/microprofile/faulttolerance/policy/FaultTolerancePolicy.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMTozNzo0MlrOF4qpow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMTozNzo0MlrOF4qpow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk2MzM2Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    return ((CompletionStage<?>) res).whenComplete((value, excetion) -> {\n          \n          \n            \n                                    return ((CompletionStage<?>) res).whenComplete((value, exception) -> {\n          \n      \n    \n    \n  \n\nPresumably meant to be exception?", "url": "https://github.com/payara/Payara/pull/4568#discussion_r394963363", "createdAt": "2020-03-19T11:37:42Z", "author": {"login": "Pandrex247"}, "path": "appserver/payara-appserver-modules/microprofile/fault-tolerance/src/main/java/fish/payara/microprofile/faulttolerance/policy/FaultTolerancePolicy.java", "diffHunk": "@@ -579,15 +601,28 @@ private Object processBulkheadStage(FaultToleranceInvocation invocation) throws\n                     try {\n                         logger.log(Level.FINE, \"Entered bulkhead execution.\");\n                         // ok, lets run\n-                        return proceed(invocation);\n+                        Object res = proceed(invocation);\n+                        if (!exitOnCompletion) {\n+                            return res;\n+                        }\n+                        return ((CompletionStage<?>) res).whenComplete((value, excetion) -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7815826dd567c0787e28f27f7cc3cce18a90b79"}, "originalPosition": 162}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1310, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}