{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0MjA4NTI3", "number": 667, "title": "require an -mnt suffix in maintainer name", "bodyText": "", "createdAt": "2020-11-02T17:21:32Z", "url": "https://github.com/RIPE-NCC/whois/pull/667", "merged": true, "mergeCommit": {"oid": "139a7abb27e07b1ae1f5a89cc48f2f2dde0ac2a4"}, "closed": true, "closedAt": "2020-11-13T07:46:40Z", "author": {"login": "dadepo"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYl-dwAH2gAyNTE0MjA4NTI3OmU0NWZiZjZiNDYzMDU3MWFmNTEzMDYyOTQ0YmI4ZjdlOTg0ODJmODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdcCG_xAH2gAyNTE0MjA4NTI3OmVkYzM4NWI2ZTFlYjliNzhkZWQwMDFlOTJlYjBhNGY2NjIwNWI3ZWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e45fbf6b4630571af513062944bb8f7e98482f85", "author": {"user": null}, "url": "https://github.com/RIPE-NCC/whois/commit/e45fbf6b4630571af513062944bb8f7e98482f85", "committedDate": "2020-11-02T15:06:08Z", "message": "require an -mnt suffix in maintainer name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4da644e63c55b822ae2bef3b7a6222d3404ff50", "author": {"user": null}, "url": "https://github.com/RIPE-NCC/whois/commit/b4da644e63c55b822ae2bef3b7a6222d3404ff50", "committedDate": "2020-11-03T03:55:06Z", "message": "Merge branch 'master' into mnt-suffix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f76f1363716c7d248abcfeabf2409bcaa286be9", "author": {"user": null}, "url": "https://github.com/RIPE-NCC/whois/commit/4f76f1363716c7d248abcfeabf2409bcaa286be9", "committedDate": "2020-11-03T19:35:42Z", "message": "removed the synntax checked added for mnt name. Added test to ensure it is possible to still update when maintainer name does not end with -MNT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32b9885367bc01c932c5d9a2743176a203c90bf0", "author": {"user": null}, "url": "https://github.com/RIPE-NCC/whois/commit/32b9885367bc01c932c5d9a2743176a203c90bf0", "committedDate": "2020-11-05T23:46:02Z", "message": "Added check for -mnt suffix to MaintainerNameValidator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6781902ac5fd6eacf3249859dd493ecd6683fc90", "author": {"user": {"login": "eshryane", "name": "Ed Shryane"}}, "url": "https://github.com/RIPE-NCC/whois/commit/6781902ac5fd6eacf3249859dd493ecd6683fc90", "committedDate": "2020-11-11T11:47:29Z", "message": "Merge branch 'master' into mnt-suffix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MTM2OTI1", "url": "https://github.com/RIPE-NCC/whois/pull/667#pullrequestreview-528136925", "createdAt": "2020-11-11T12:41:39Z", "commit": {"oid": "6781902ac5fd6eacf3249859dd493ecd6683fc90"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMjo0MTozOVrOHxLg3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMjo0NDo0NFrOHxLnoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzMDkxMQ==", "bodyText": "No need for toUpperCase(), CIString implements endsWith()", "url": "https://github.com/RIPE-NCC/whois/pull/667#discussion_r521330911", "createdAt": "2020-11-11T12:41:39Z", "author": {"login": "eshryane"}, "path": "whois-update/src/main/java/net/ripe/db/whois/update/handler/validator/maintainer/MaintainerNameValidator.java", "diffHunk": "@@ -32,6 +33,9 @@\n     @Override\n     public void validate(final PreparedUpdate update, final UpdateContext updateContext) {\n         final RpslObject updatedObject = update.getUpdatedObject();\n+        if (Action.CREATE.equals(update.getAction()) && !updatedObject.getKey().toUpperCase().endsWith(MNT_NAME_SUFFIX)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6781902ac5fd6eacf3249859dd493ecd6683fc90"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzMjMyOQ==", "bodyText": "Update the message to clarify that the error is on CREATE only:\nWhen creating a MNTNER the name must end with an -MNT suffix", "url": "https://github.com/RIPE-NCC/whois/pull/667#discussion_r521332329", "createdAt": "2020-11-11T12:44:10Z", "author": {"login": "eshryane"}, "path": "whois-update/src/main/java/net/ripe/db/whois/update/domain/UpdateMessages.java", "diffHunk": "@@ -176,6 +176,10 @@ public static Message invalidMaintainerForOrganisationType(final CharSequence or\n         return new Message(Type.ERROR, \"Value '%s' can only be set by the RIPE NCC for this organisation.\", orgType);\n     }\n \n+    public static Message invalidMaintainerName() {\n+        return new Message(Type.ERROR, \"Maintainer name must end with a -MNT suffix\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6781902ac5fd6eacf3249859dd493ecd6683fc90"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzMjY0MQ==", "bodyText": "Is there a successful test to create a maintainer with an -mnt suffix?", "url": "https://github.com/RIPE-NCC/whois/pull/667#discussion_r521332641", "createdAt": "2020-11-11T12:44:44Z", "author": {"login": "eshryane"}, "path": "whois-endtoend/src/test/groovy/net/ripe/db/whois/spec/update/UpdateMaintainerSpec.groovy", "diffHunk": "@@ -304,6 +323,40 @@ class UpdateMaintainerSpec extends BaseQueryUpdateSpec {\n         queryObject(\"-rGBT mntner CRE-MNT\", \"mntner\", \"CRE-MNT\")\n     }\n \n+    def \"create maintainer object with invalid  (without -mnt suffix) maintainer name\"() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6781902ac5fd6eacf3249859dd493ecd6683fc90"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c403dc67fd1fb30341b8a0ddeb06dfa7405158dd", "author": {"user": null}, "url": "https://github.com/RIPE-NCC/whois/commit/c403dc67fd1fb30341b8a0ddeb06dfa7405158dd", "committedDate": "2020-11-11T13:44:36Z", "message": "removed the need to manually turn to upper case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bd2e85c327eaddddee4e2e5cf41ca02cadfcaaf", "author": {"user": null}, "url": "https://github.com/RIPE-NCC/whois/commit/9bd2e85c327eaddddee4e2e5cf41ca02cadfcaaf", "committedDate": "2020-11-11T13:52:31Z", "message": "Merge branch 'mnt-suffix' of https://github.com/RIPE-NCC/whois into mnt-suffix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33b41d96b8d73c1e93bd25569209844c49a25fdb", "author": {"user": null}, "url": "https://github.com/RIPE-NCC/whois/commit/33b41d96b8d73c1e93bd25569209844c49a25fdb", "committedDate": "2020-11-11T15:00:06Z", "message": "Updated message as suggested"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MDQ4Njk2", "url": "https://github.com/RIPE-NCC/whois/pull/667#pullrequestreview-529048696", "createdAt": "2020-11-12T12:42:43Z", "commit": {"oid": "33b41d96b8d73c1e93bd25569209844c49a25fdb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edc385b6e1eb9b78ded001e92eb0a4f66205b7ee", "author": {"user": null}, "url": "https://github.com/RIPE-NCC/whois/commit/edc385b6e1eb9b78ded001e92eb0a4f66205b7ee", "committedDate": "2020-11-13T07:34:34Z", "message": "Merge branch 'master' into mnt-suffix"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 798, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}