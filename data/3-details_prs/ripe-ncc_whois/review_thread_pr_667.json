{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0MjA4NTI3", "number": 667, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMjo0MTozOVrOE3sCKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMjo0NDo0NFrOE3sGSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2ODI4NTg2OnYy", "diffSide": "RIGHT", "path": "whois-update/src/main/java/net/ripe/db/whois/update/handler/validator/maintainer/MaintainerNameValidator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMjo0MTozOVrOHxLg3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMzo1MzoyMFrOHxOD1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzMDkxMQ==", "bodyText": "No need for toUpperCase(), CIString implements endsWith()", "url": "https://github.com/RIPE-NCC/whois/pull/667#discussion_r521330911", "createdAt": "2020-11-11T12:41:39Z", "author": {"login": "eshryane"}, "path": "whois-update/src/main/java/net/ripe/db/whois/update/handler/validator/maintainer/MaintainerNameValidator.java", "diffHunk": "@@ -32,6 +33,9 @@\n     @Override\n     public void validate(final PreparedUpdate update, final UpdateContext updateContext) {\n         final RpslObject updatedObject = update.getUpdatedObject();\n+        if (Action.CREATE.equals(update.getAction()) && !updatedObject.getKey().toUpperCase().endsWith(MNT_NAME_SUFFIX)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6781902ac5fd6eacf3249859dd493ecd6683fc90"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM3MjYzMQ==", "bodyText": "Removed", "url": "https://github.com/RIPE-NCC/whois/pull/667#discussion_r521372631", "createdAt": "2020-11-11T13:53:20Z", "author": {"login": "dadepo"}, "path": "whois-update/src/main/java/net/ripe/db/whois/update/handler/validator/maintainer/MaintainerNameValidator.java", "diffHunk": "@@ -32,6 +33,9 @@\n     @Override\n     public void validate(final PreparedUpdate update, final UpdateContext updateContext) {\n         final RpslObject updatedObject = update.getUpdatedObject();\n+        if (Action.CREATE.equals(update.getAction()) && !updatedObject.getKey().toUpperCase().endsWith(MNT_NAME_SUFFIX)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzMDkxMQ=="}, "originalCommit": {"oid": "6781902ac5fd6eacf3249859dd493ecd6683fc90"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2ODI5NDU2OnYy", "diffSide": "RIGHT", "path": "whois-update/src/main/java/net/ripe/db/whois/update/domain/UpdateMessages.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMjo0NDoxMFrOHxLmaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNTowMDoxOVrOHxQ0yA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzMjMyOQ==", "bodyText": "Update the message to clarify that the error is on CREATE only:\nWhen creating a MNTNER the name must end with an -MNT suffix", "url": "https://github.com/RIPE-NCC/whois/pull/667#discussion_r521332329", "createdAt": "2020-11-11T12:44:10Z", "author": {"login": "eshryane"}, "path": "whois-update/src/main/java/net/ripe/db/whois/update/domain/UpdateMessages.java", "diffHunk": "@@ -176,6 +176,10 @@ public static Message invalidMaintainerForOrganisationType(final CharSequence or\n         return new Message(Type.ERROR, \"Value '%s' can only be set by the RIPE NCC for this organisation.\", orgType);\n     }\n \n+    public static Message invalidMaintainerName() {\n+        return new Message(Type.ERROR, \"Maintainer name must end with a -MNT suffix\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6781902ac5fd6eacf3249859dd493ecd6683fc90"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQxNzkyOA==", "bodyText": "done", "url": "https://github.com/RIPE-NCC/whois/pull/667#discussion_r521417928", "createdAt": "2020-11-11T15:00:19Z", "author": {"login": "dadepo"}, "path": "whois-update/src/main/java/net/ripe/db/whois/update/domain/UpdateMessages.java", "diffHunk": "@@ -176,6 +176,10 @@ public static Message invalidMaintainerForOrganisationType(final CharSequence or\n         return new Message(Type.ERROR, \"Value '%s' can only be set by the RIPE NCC for this organisation.\", orgType);\n     }\n \n+    public static Message invalidMaintainerName() {\n+        return new Message(Type.ERROR, \"Maintainer name must end with a -MNT suffix\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzMjMyOQ=="}, "originalCommit": {"oid": "6781902ac5fd6eacf3249859dd493ecd6683fc90"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2ODI5NjQzOnYy", "diffSide": "RIGHT", "path": "whois-endtoend/src/test/groovy/net/ripe/db/whois/spec/update/UpdateMaintainerSpec.groovy", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMjo0NDo0NFrOHxLnoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNDowMDoyN1rOHxOV1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzMjY0MQ==", "bodyText": "Is there a successful test to create a maintainer with an -mnt suffix?", "url": "https://github.com/RIPE-NCC/whois/pull/667#discussion_r521332641", "createdAt": "2020-11-11T12:44:44Z", "author": {"login": "eshryane"}, "path": "whois-endtoend/src/test/groovy/net/ripe/db/whois/spec/update/UpdateMaintainerSpec.groovy", "diffHunk": "@@ -304,6 +323,40 @@ class UpdateMaintainerSpec extends BaseQueryUpdateSpec {\n         queryObject(\"-rGBT mntner CRE-MNT\", \"mntner\", \"CRE-MNT\")\n     }\n \n+    def \"create maintainer object with invalid  (without -mnt suffix) maintainer name\"() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6781902ac5fd6eacf3249859dd493ecd6683fc90"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM3NzIzOA==", "bodyText": "Ys, there are existing test that checks the creation of a maintainer and they used -mnt suffix, for example create self maintained maintainer object check pw hash filtering and create maintainer object maintained by other mntner", "url": "https://github.com/RIPE-NCC/whois/pull/667#discussion_r521377238", "createdAt": "2020-11-11T14:00:27Z", "author": {"login": "dadepo"}, "path": "whois-endtoend/src/test/groovy/net/ripe/db/whois/spec/update/UpdateMaintainerSpec.groovy", "diffHunk": "@@ -304,6 +323,40 @@ class UpdateMaintainerSpec extends BaseQueryUpdateSpec {\n         queryObject(\"-rGBT mntner CRE-MNT\", \"mntner\", \"CRE-MNT\")\n     }\n \n+    def \"create maintainer object with invalid  (without -mnt suffix) maintainer name\"() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzMjY0MQ=="}, "originalCommit": {"oid": "6781902ac5fd6eacf3249859dd493ecd6683fc90"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4678, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}