{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMTgwMTY1", "number": 662, "title": "Whois fix \"--diff-versions\" parsing", "bodyText": "", "createdAt": "2020-10-14T07:44:34Z", "url": "https://github.com/RIPE-NCC/whois/pull/662", "merged": true, "mergeCommit": {"oid": "e40ed90053994d06bedc4c62f64eed37b4921388"}, "closed": true, "closedAt": "2020-10-15T11:59:45Z", "author": {"login": "dadepo"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSYLllgH2gAyNTAzMTgwMTY1OjZiMzg0YjNhMTg5ZDE2ZWI3M2RkMmIyZjJkNmQyODg4MGZjMDIzZjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSvZE4AFqTUwOTI0NDgwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6b384b3a189d16eb73dd2b2f2d6d28880fc023f7", "author": {"user": null}, "url": "https://github.com/RIPE-NCC/whois/commit/6b384b3a189d16eb73dd2b2f2d6d28880fc023f7", "committedDate": "2020-10-14T07:38:15Z", "message": "returnning invalid option supplied error message on invalid version number given to --diff-version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9299a24ba768a7891df0b69b85dac6f2b17fcf9b", "author": {"user": null}, "url": "https://github.com/RIPE-NCC/whois/commit/9299a24ba768a7891df0b69b85dac6f2b17fcf9b", "committedDate": "2020-10-14T07:43:53Z", "message": "Merge branch 'master' into whois-fix-parsing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MDc4MjY1", "url": "https://github.com/RIPE-NCC/whois/pull/662#pullrequestreview-508078265", "createdAt": "2020-10-14T07:46:59Z", "commit": {"oid": "9299a24ba768a7891df0b69b85dac6f2b17fcf9b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwNzo0Njo1OVrOHhGYnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwNzo0Njo1OVrOHhGYnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ2OTY2Mw==", "bodyText": "Can you also test that the second value cannot be smaller (or equal to) the first value? It doesn't make sense to allow that.", "url": "https://github.com/RIPE-NCC/whois/pull/662#discussion_r504469663", "createdAt": "2020-10-14T07:46:59Z", "author": {"login": "eshryane"}, "path": "whois-query/src/main/java/net/ripe/db/whois/query/query/Query.java", "diffHunk": "@@ -225,15 +225,19 @@ public int getObjectVersion() {\n             if (values.length != 2) {\n                 throw new QueryException(QueryCompletionInfo.PARAMETER_ERROR, QueryMessages.malformedQuery(\"diff versions must be in the format a:b\"));\n             }\n-            final int firstValue = Integer.parseInt(values[0]);\n-            final int secondValue = Integer.parseInt(values[1]);\n-            if (firstValue < 1 || secondValue < 1) {\n-                throw new QueryException(QueryCompletionInfo.PARAMETER_ERROR, QueryMessages.malformedQuery(\"diff version number must be greater than 0\"));\n-            }\n-            if (secondValue == firstValue) {\n-                throw new QueryException(QueryCompletionInfo.PARAMETER_ERROR, QueryMessages.malformedQuery(\"diff versions are the same\"));\n+            try {\n+                final int firstValue = Integer.parseInt(values[0]);\n+                final int secondValue = Integer.parseInt(values[1]);\n+                if (firstValue < 1 || secondValue < 1) {\n+                    throw new QueryException(QueryCompletionInfo.PARAMETER_ERROR, QueryMessages.malformedQuery(\"diff version number must be greater than 0\"));\n+                }\n+                if (secondValue == firstValue) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9299a24ba768a7891df0b69b85dac6f2b17fcf9b"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MTQyNDc4", "url": "https://github.com/RIPE-NCC/whois/pull/662#pullrequestreview-509142478", "createdAt": "2020-10-15T08:33:27Z", "commit": {"oid": "9299a24ba768a7891df0b69b85dac6f2b17fcf9b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MjQ0ODA3", "url": "https://github.com/RIPE-NCC/whois/pull/662#pullrequestreview-509244807", "createdAt": "2020-10-15T10:40:48Z", "commit": {"oid": "9299a24ba768a7891df0b69b85dac6f2b17fcf9b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 792, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}