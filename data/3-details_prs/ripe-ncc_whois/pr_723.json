{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxMTg0ODkw", "number": 723, "title": "Delete object bug", "bodyText": "", "createdAt": "2020-12-16T13:59:40Z", "url": "https://github.com/RIPE-NCC/whois/pull/723", "merged": true, "mergeCommit": {"oid": "8f86978cf53ec0e29b564d95d8dfc0a0136b7fc1"}, "closed": true, "closedAt": "2020-12-18T10:17:19Z", "author": {"login": "maggarwal13"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmHRzGAH2gAyNTQxMTg0ODkwOmE3MzI1ZWIzNWFlZjFjZjQ4MTMxZDg2YTBiYWJmMDg5YWRlOWMyYmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnVJC1AFqTU1NTM0OTg5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a7325eb35aef1cf48131d86a0babf089ade9c2bb", "author": {"user": {"login": "maggarwal13", "name": null}}, "url": "https://github.com/RIPE-NCC/whois/commit/a7325eb35aef1cf48131d86a0babf089ade9c2bb", "committedDate": "2020-12-14T15:15:08Z", "message": "delete object with sanitize bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1447a942ba6cfea1c4ce510cbf3ceb9da0beda8e", "author": {"user": {"login": "maggarwal13", "name": null}}, "url": "https://github.com/RIPE-NCC/whois/commit/1447a942ba6cfea1c4ce510cbf3ceb9da0beda8e", "committedDate": "2020-12-14T16:30:00Z", "message": "formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b8b8e19f8180a6458f00a7bb3ae0ead40e66db4", "author": {"user": {"login": "maggarwal13", "name": null}}, "url": "https://github.com/RIPE-NCC/whois/commit/5b8b8e19f8180a6458f00a7bb3ae0ead40e66db4", "committedDate": "2020-12-16T12:52:40Z", "message": "delete with cidr  supported"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d739d77b3cc72ec7856040f2aa429caf02674d3", "author": {"user": {"login": "maggarwal13", "name": null}}, "url": "https://github.com/RIPE-NCC/whois/commit/3d739d77b3cc72ec7856040f2aa429caf02674d3", "committedDate": "2020-12-16T14:01:03Z", "message": "imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MzM3MjQ2", "url": "https://github.com/RIPE-NCC/whois/pull/723#pullrequestreview-555337246", "createdAt": "2020-12-18T09:39:53Z", "commit": {"oid": "3d739d77b3cc72ec7856040f2aa429caf02674d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwOTozOTo1M1rOIIbw_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwOTozOTo1M1rOIIbw_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcxNDQyOQ==", "bodyText": "So the error message will contain the key as the user submitted it?", "url": "https://github.com/RIPE-NCC/whois/pull/723#discussion_r545714429", "createdAt": "2020-12-18T09:39:53Z", "author": {"login": "eshryane"}, "path": "whois-update/src/main/java/net/ripe/db/whois/update/handler/SingleUpdateHandler.java", "diffHunk": "@@ -102,7 +102,7 @@ public void handle(final Origin origin, final Keyword keyword, final Update upda\n         }\n \n         if (action == Action.DELETE && originalObject == null) {\n-            updateContext.addMessage(update, UpdateMessages.objectNotFound(updatedObject.getFormattedKey()));\n+            updateContext.addMessage(update, UpdateMessages.objectNotFound(update.getSubmittedObject().getFormattedKey()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d739d77b3cc72ec7856040f2aa429caf02674d3"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MzM3ODE1", "url": "https://github.com/RIPE-NCC/whois/pull/723#pullrequestreview-555337815", "createdAt": "2020-12-18T09:40:49Z", "commit": {"oid": "3d739d77b3cc72ec7856040f2aa429caf02674d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwOTo0MDo0OVrOIIby2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwOTo0MDo0OVrOIIby2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcxNDkwNA==", "bodyText": "Do you need to test the primary key in the test? It seems superfluous", "url": "https://github.com/RIPE-NCC/whois/pull/723#discussion_r545714904", "createdAt": "2020-12-18T09:40:49Z", "author": {"login": "eshryane"}, "path": "whois-api/src/test/java/net/ripe/db/whois/api/rest/WhoisRestServiceTestIntegration.java", "diffHunk": "@@ -4707,6 +4707,33 @@ public void delete_route_out_of_region_redirect() {\n         databaseHelper.addAuthoritativeResource(\"test\", \"0.0.0.0/0\");\n     }\n \n+    @Test\n+    public void delete_domain_trailing_dot_nserver() {\n+        databaseHelper.addObject(\n+                \"domain:        193.in-addr.arpa4\\n\" +\n+                        \"nserver:         test.ns.\\n\" +\n+                        \"mnt-by:          OWNER-MNT\\n\" +\n+                        \"source:          TEST\\n\");\n+\n+        final WhoisResources whoisResources = RestTest.target(getPort(), \"whois/test/domain/193.in-addr.arpa4\")\n+                .request()\n+                .get(WhoisResources.class);\n+        assertThat(whoisResources.getWhoisObjects().get(0).getPrimaryKey().get(0).getValue(), is(\"193.in-addr.arpa4\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d739d77b3cc72ec7856040f2aa429caf02674d3"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c3dc622d568707cdcb64d389e135ae3bfa0ccb5", "author": {"user": {"login": "maggarwal13", "name": null}}, "url": "https://github.com/RIPE-NCC/whois/commit/8c3dc622d568707cdcb64d389e135ae3bfa0ccb5", "committedDate": "2020-12-18T09:54:16Z", "message": "test case simplfy"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MzQ5ODky", "url": "https://github.com/RIPE-NCC/whois/pull/723#pullrequestreview-555349892", "createdAt": "2020-12-18T09:58:10Z", "commit": {"oid": "8c3dc622d568707cdcb64d389e135ae3bfa0ccb5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 730, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}