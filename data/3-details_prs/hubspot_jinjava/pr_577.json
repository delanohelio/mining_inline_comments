{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2NTg0MjIx", "number": 577, "title": "Better null handling in ChunkResolver", "bodyText": "Rather than returning an empty string \"\", a null value should be interpreted during the resolving process as null. There may be logic that treats null differently from ''. After the string is resolved, however, a result that is exactly null should be returned as the empty Jinjava string ('') because {{ null }} should be interpreted to result in nothing.\nThis is tricky logic, and so I'm working to make the ChunkResolver handle edge cases like this exactly how they would normally be handled with expressions. This is part of making Eager Execution's output mirror that of the default execution.", "createdAt": "2020-12-29T18:07:59Z", "url": "https://github.com/HubSpot/jinjava/pull/577", "merged": true, "mergeCommit": {"oid": "252698d127b3698352a3fc5187393493532d7b34"}, "closed": true, "closedAt": "2020-12-30T15:36:10Z", "author": {"login": "jasmith-hs"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdq8cdxgH2gAyNTQ2NTg0MjIxOjk5ZmE0ZmI1MzRkMGIyYTllMTFiM2U4ZWQzNzczYzgwM2FlMmVlMjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdq-yUmAFqTU1OTY0NTYwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "99fa4fb534d0b2a9e11b3e8ed3773c803ae2ee28", "author": {"user": {"login": "jasmith-hs", "name": "Jack Smith"}}, "url": "https://github.com/HubSpot/jinjava/commit/99fa4fb534d0b2a9e11b3e8ed3773c803ae2ee28", "committedDate": "2020-12-29T15:27:27Z", "message": "It returns an empty Jinjava string for null values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab1ceeb803515552eb2bca2841ce1a163ac50828", "author": {"user": {"login": "jasmith-hs", "name": "Jack Smith"}}, "url": "https://github.com/HubSpot/jinjava/commit/ab1ceeb803515552eb2bca2841ce1a163ac50828", "committedDate": "2020-12-29T17:21:54Z", "message": "Merge branch 'master' of github.com:HubSpot/jinjava into chunk-resolver-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa4eef9a2cc4e9ba8d85df975b8820430a74e4a5", "author": {"user": {"login": "jasmith-hs", "name": "Jack Smith"}}, "url": "https://github.com/HubSpot/jinjava/commit/aa4eef9a2cc4e9ba8d85df975b8820430a74e4a5", "committedDate": "2020-12-29T17:57:09Z", "message": "Treat null values as null while resolving"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6e2f752f8fa7dd1e204536fa9f3f79c554b6230", "author": {"user": {"login": "jasmith-hs", "name": "Jack Smith"}}, "url": "https://github.com/HubSpot/jinjava/commit/d6e2f752f8fa7dd1e204536fa9f3f79c554b6230", "committedDate": "2020-12-29T17:59:58Z", "message": "Use constant for \"null\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba2fcabf8215a79b95153afea2a2fba2459e071f", "author": {"user": {"login": "jasmith-hs", "name": "Jack Smith"}}, "url": "https://github.com/HubSpot/jinjava/commit/ba2fcabf8215a79b95153afea2a2fba2459e071f", "committedDate": "2020-12-29T18:04:31Z", "message": "Use constant for jinjava empty string"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NjQ1NjAx", "url": "https://github.com/HubSpot/jinjava/pull/577#pullrequestreview-559645601", "createdAt": "2020-12-29T18:11:08Z", "commit": {"oid": "ba2fcabf8215a79b95153afea2a2fba2459e071f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxODoxMTowOFrOIMVHXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxODoxMTowOFrOIMVHXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc5OTc3NA==", "bodyText": "This should be the only place where null needs to be swapped out for the empty string as this is the last step where the object must be resolved to a string. (That string could be presented in the final output of the render)", "url": "https://github.com/HubSpot/jinjava/pull/577#discussion_r549799774", "createdAt": "2020-12-29T18:11:08Z", "author": {"login": "jasmith-hs"}, "path": "src/main/java/com/hubspot/jinjava/util/ChunkResolver.java", "diffHunk": "@@ -105,7 +107,12 @@ public String resolveChunks() {\n       .getThrowInterpreterErrors();\n     try {\n       interpreter.getContext().setThrowInterpreterErrors(true);\n-      return String.join(\"\", getChunk(null));\n+      String expression = String.join(\"\", getChunk(null));\n+      if (JINJAVA_NULL.equals(expression)) {\n+        // Resolved value of null as a string is ''.\n+        return JINJAVA_EMPTY_STRING;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba2fcabf8215a79b95153afea2a2fba2459e071f"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2506, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}