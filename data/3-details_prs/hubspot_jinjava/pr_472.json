{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0OTQwMjk4", "number": 472, "title": "Divide by zero", "bodyText": "Fix IsDivisibleByExpTest to throw a meaningful exception when asked to check for divisibility by zero.\nAdd unit tests for the IsDIvisibleByExpTest class", "createdAt": "2020-08-08T02:59:05Z", "url": "https://github.com/HubSpot/jinjava/pull/472", "merged": true, "mergeCommit": {"oid": "320cd8c567d42acf25343a81cfba72f408f62bf8"}, "closed": true, "closedAt": "2020-08-12T18:13:43Z", "author": {"login": "bszabo"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8vpljAH2gAyNDY0OTQwMjk4OjY3MTA2NDRjMWExZjdkN2I4MTcxMTRlNzIyYzc2Mzc5ZmYwMDJiZjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-PYCUgH2gAyNDY0OTQwMjk4Ojc5MjdhNmI0ZjcyMmY5YzU3OTdjMGY2NjBmYTk3NjQxZjIxZjY1MWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6710644c1a1f7d7b817114e722c76379ff002bf2", "author": {"user": null}, "url": "https://github.com/HubSpot/jinjava/commit/6710644c1a1f7d7b817114e722c76379ff002bf2", "committedDate": "2020-08-08T02:32:30Z", "message": "Detect attempt to test for divisibility by zero"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d99e819f3c3910863eff1eb882c1e53a4de18598", "author": {"user": null}, "url": "https://github.com/HubSpot/jinjava/commit/d99e819f3c3910863eff1eb882c1e53a4de18598", "committedDate": "2020-08-08T02:51:10Z", "message": "Fix typo in is divisible code snippet"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzODAyNDkx", "url": "https://github.com/HubSpot/jinjava/pull/472#pullrequestreview-463802491", "createdAt": "2020-08-08T13:15:12Z", "commit": {"oid": "d99e819f3c3910863eff1eb882c1e53a4de18598"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMzoxNToxMlrOG9zvUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMzoyMzozN1rOG9zx4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ2NDAxOQ==", "bodyText": "good catch on the typo here", "url": "https://github.com/HubSpot/jinjava/pull/472#discussion_r467464019", "createdAt": "2020-08-08T13:15:12Z", "author": {"login": "boulter"}, "path": "src/main/java/com/hubspot/jinjava/lib/exptest/IsDivisibleByExpTest.java", "diffHunk": "@@ -19,7 +19,7 @@\n   ),\n   snippets = {\n     @JinjavaSnippet(\n-      code = \"{% if variable is divisbleby 5 %}\\n\" +\n+      code = \"% if variable is divisibleby 5 %\\n\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d99e819f3c3910863eff1eb882c1e53a4de18598"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ2NDE0Mg==", "bodyText": "Thanks for adding test coverage here. Can you check for the NUMBER_FORMAT exception as well?", "url": "https://github.com/HubSpot/jinjava/pull/472#discussion_r467464142", "createdAt": "2020-08-08T13:16:44Z", "author": {"login": "boulter"}, "path": "src/test/java/com/hubspot/jinjava/lib/exptest/isDivisibleByExpTestTest.java", "diffHunk": "@@ -0,0 +1,78 @@\n+package com.hubspot.jinjava.lib.exptest;\n+\n+import static org.assertj.core.api.Assertions.assertThatThrownBy;\n+import static org.junit.Assert.assertEquals;\n+\n+import com.hubspot.jinjava.Jinjava;\n+import java.util.HashMap;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+public class isDivisibleByExpTestTest {\n+  private static final String DIVISIBLE_BY_TEMPLATE = \"{{ %s is divisibleby %s }}\";\n+\n+  private Jinjava jinjava;\n+\n+  @Before\n+  public void setup() {\n+    jinjava = new Jinjava();\n+  }\n+\n+  @Test\n+  public void itRequiresDividend() {\n+    assertEquals(\n+      jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"null\", \"3\"), new HashMap<>()),\n+      \"false\"\n+    );\n+  }\n+\n+  @Test\n+  public void itRequiresNumericalDividend() {\n+    assertEquals(\n+      jinjava.render(\n+        String.format(DIVISIBLE_BY_TEMPLATE, \"thirty\", \"3\"),\n+        new HashMap<>()\n+      ),\n+      \"false\"\n+    );\n+  }\n+\n+  @Test\n+  public void itRequiresDivisor() {\n+    assertEquals(\n+      jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"10\", \"null\"), new HashMap<>()),\n+      \"false\"\n+    );\n+  }\n+\n+  @Test\n+  public void itRequiresNumericalDivisor() {\n+    // Question for PR: It seems that InvalidArgumentExceptions are caught before my middleware. How to know it failed for the right reason?\n+    assertEquals(\n+      jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"10\", \"five\"), new HashMap<>()),\n+      \"false\"\n+    );\n+  }\n+\n+  @Test\n+  public void itRequiresDividendIsMultipleOfDivisor() {\n+    assertEquals(\n+      jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"10\", \"5\"), new HashMap<>()),\n+      \"true\"\n+    );\n+\n+    assertEquals(\n+      jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"10\", \"3\"), new HashMap<>()),\n+      \"false\"\n+    );\n+  }\n+\n+  @Test\n+  public void itRequiresNonZeroDivisor() {\n+    assertThatThrownBy(\n+        () ->\n+          jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"10\", \"0\"), new HashMap<>())\n+      )\n+      .hasMessageContaining(\"1st argument with value 0 must be non-zero\");\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d99e819f3c3910863eff1eb882c1e53a4de18598"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ2NDE5OQ==", "bodyText": "Might be good to add at least one positive test case as well to confirm we didn't break anything.", "url": "https://github.com/HubSpot/jinjava/pull/472#discussion_r467464199", "createdAt": "2020-08-08T13:17:37Z", "author": {"login": "boulter"}, "path": "src/test/java/com/hubspot/jinjava/lib/exptest/isDivisibleByExpTestTest.java", "diffHunk": "@@ -0,0 +1,78 @@\n+package com.hubspot.jinjava.lib.exptest;\n+\n+import static org.assertj.core.api.Assertions.assertThatThrownBy;\n+import static org.junit.Assert.assertEquals;\n+\n+import com.hubspot.jinjava.Jinjava;\n+import java.util.HashMap;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+public class isDivisibleByExpTestTest {\n+  private static final String DIVISIBLE_BY_TEMPLATE = \"{{ %s is divisibleby %s }}\";\n+\n+  private Jinjava jinjava;\n+\n+  @Before\n+  public void setup() {\n+    jinjava = new Jinjava();\n+  }\n+\n+  @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d99e819f3c3910863eff1eb882c1e53a4de18598"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ2NDI3OA==", "bodyText": "I think we still need the { and } though.", "url": "https://github.com/HubSpot/jinjava/pull/472#discussion_r467464278", "createdAt": "2020-08-08T13:18:40Z", "author": {"login": "boulter"}, "path": "src/main/java/com/hubspot/jinjava/lib/exptest/IsDivisibleByExpTest.java", "diffHunk": "@@ -19,7 +19,7 @@\n   ),\n   snippets = {\n     @JinjavaSnippet(\n-      code = \"{% if variable is divisbleby 5 %}\\n\" +\n+      code = \"% if variable is divisibleby 5 %\\n\" +", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ2NDAxOQ=="}, "originalCommit": {"oid": "d99e819f3c3910863eff1eb882c1e53a4de18598"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ2NDY3NA==", "bodyText": "you can look at the errors on the interpreter by using jinjava.renderForResult. Example", "url": "https://github.com/HubSpot/jinjava/pull/472#discussion_r467464674", "createdAt": "2020-08-08T13:23:37Z", "author": {"login": "boulter"}, "path": "src/test/java/com/hubspot/jinjava/lib/exptest/isDivisibleByExpTestTest.java", "diffHunk": "@@ -0,0 +1,78 @@\n+package com.hubspot.jinjava.lib.exptest;\n+\n+import static org.assertj.core.api.Assertions.assertThatThrownBy;\n+import static org.junit.Assert.assertEquals;\n+\n+import com.hubspot.jinjava.Jinjava;\n+import java.util.HashMap;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+public class isDivisibleByExpTestTest {\n+  private static final String DIVISIBLE_BY_TEMPLATE = \"{{ %s is divisibleby %s }}\";\n+\n+  private Jinjava jinjava;\n+\n+  @Before\n+  public void setup() {\n+    jinjava = new Jinjava();\n+  }\n+\n+  @Test\n+  public void itRequiresDividend() {\n+    assertEquals(\n+      jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"null\", \"3\"), new HashMap<>()),\n+      \"false\"\n+    );\n+  }\n+\n+  @Test\n+  public void itRequiresNumericalDividend() {\n+    assertEquals(\n+      jinjava.render(\n+        String.format(DIVISIBLE_BY_TEMPLATE, \"thirty\", \"3\"),\n+        new HashMap<>()\n+      ),\n+      \"false\"\n+    );\n+  }\n+\n+  @Test\n+  public void itRequiresDivisor() {\n+    assertEquals(\n+      jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"10\", \"null\"), new HashMap<>()),\n+      \"false\"\n+    );\n+  }\n+\n+  @Test\n+  public void itRequiresNumericalDivisor() {\n+    // Question for PR: It seems that InvalidArgumentExceptions are caught before my middleware. How to know it failed for the right reason?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d99e819f3c3910863eff1eb882c1e53a4de18598"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ffedb79488266bf40cb87fb5dce467c0d9a86f2", "author": {"user": null}, "url": "https://github.com/HubSpot/jinjava/commit/2ffedb79488266bf40cb87fb5dce467c0d9a86f2", "committedDate": "2020-08-08T21:39:33Z", "message": "Pull request feedback to fix template syntax and add positive test case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0MjU2ODU0", "url": "https://github.com/HubSpot/jinjava/pull/472#pullrequestreview-464256854", "createdAt": "2020-08-10T14:03:01Z", "commit": {"oid": "2ffedb79488266bf40cb87fb5dce467c0d9a86f2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNDowMzowMlrOG-P68g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNDowNjoyMVrOG-QDnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzkyNTc0Ng==", "bodyText": "nit: doesn't really fail, just returns false. It works correctly!", "url": "https://github.com/HubSpot/jinjava/pull/472#discussion_r467925746", "createdAt": "2020-08-10T14:03:02Z", "author": {"login": "boulter"}, "path": "src/test/java/com/hubspot/jinjava/lib/exptest/isDivisibleByExpTestTest.java", "diffHunk": "@@ -46,21 +42,15 @@ public void itRequiresDivisor() {\n   }\n \n   @Test\n-  public void itRequiresNumericalDivisor() {\n-    // Question for PR: It seems that InvalidArgumentExceptions are caught before my middleware. How to know it failed for the right reason?\n-    assertEquals(\n-      jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"10\", \"five\"), new HashMap<>()),\n-      \"false\"\n-    );\n-  }\n-\n-  @Test\n-  public void itRequiresDividendIsMultipleOfDivisor() {\n+  public void itPassesWhenDividendIsDivisibleByDivisor() {\n     assertEquals(\n       jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"10\", \"5\"), new HashMap<>()),\n       \"true\"\n     );\n+  }\n \n+  @Test\n+  public void itFailsWhenDividendIsNotMultipleOfDivisor() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ffedb79488266bf40cb87fb5dce467c0d9a86f2"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzkyNzk2Nw==", "bodyText": "not sure what you mean in the first paragraph. What have you tried?\nAs for the second one, I think it's worth fixing.", "url": "https://github.com/HubSpot/jinjava/pull/472#discussion_r467927967", "createdAt": "2020-08-10T14:06:21Z", "author": {"login": "boulter"}, "path": "src/test/java/com/hubspot/jinjava/lib/exptest/isDivisibleByExpTestTest.java", "diffHunk": "@@ -0,0 +1,78 @@\n+package com.hubspot.jinjava.lib.exptest;\n+\n+import static org.assertj.core.api.Assertions.assertThatThrownBy;\n+import static org.junit.Assert.assertEquals;\n+\n+import com.hubspot.jinjava.Jinjava;\n+import java.util.HashMap;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+public class isDivisibleByExpTestTest {\n+  private static final String DIVISIBLE_BY_TEMPLATE = \"{{ %s is divisibleby %s }}\";\n+\n+  private Jinjava jinjava;\n+\n+  @Before\n+  public void setup() {\n+    jinjava = new Jinjava();\n+  }\n+\n+  @Test\n+  public void itRequiresDividend() {\n+    assertEquals(\n+      jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"null\", \"3\"), new HashMap<>()),\n+      \"false\"\n+    );\n+  }\n+\n+  @Test\n+  public void itRequiresNumericalDividend() {\n+    assertEquals(\n+      jinjava.render(\n+        String.format(DIVISIBLE_BY_TEMPLATE, \"thirty\", \"3\"),\n+        new HashMap<>()\n+      ),\n+      \"false\"\n+    );\n+  }\n+\n+  @Test\n+  public void itRequiresDivisor() {\n+    assertEquals(\n+      jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"10\", \"null\"), new HashMap<>()),\n+      \"false\"\n+    );\n+  }\n+\n+  @Test\n+  public void itRequiresNumericalDivisor() {\n+    // Question for PR: It seems that InvalidArgumentExceptions are caught before my middleware. How to know it failed for the right reason?\n+    assertEquals(\n+      jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"10\", \"five\"), new HashMap<>()),\n+      \"false\"\n+    );\n+  }\n+\n+  @Test\n+  public void itRequiresDividendIsMultipleOfDivisor() {\n+    assertEquals(\n+      jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"10\", \"5\"), new HashMap<>()),\n+      \"true\"\n+    );\n+\n+    assertEquals(\n+      jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"10\", \"3\"), new HashMap<>()),\n+      \"false\"\n+    );\n+  }\n+\n+  @Test\n+  public void itRequiresNonZeroDivisor() {\n+    assertThatThrownBy(\n+        () ->\n+          jinjava.render(String.format(DIVISIBLE_BY_TEMPLATE, \"10\", \"0\"), new HashMap<>())\n+      )\n+      .hasMessageContaining(\"1st argument with value 0 must be non-zero\");\n+  }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ2NDE0Mg=="}, "originalCommit": {"oid": "d99e819f3c3910863eff1eb882c1e53a4de18598"}, "originalPosition": 77}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1405adc62f47e61300c3bb15698e3fe4db35ac33", "author": {"user": null}, "url": "https://github.com/HubSpot/jinjava/commit/1405adc62f47e61300c3bb15698e3fe4db35ac33", "committedDate": "2020-08-12T17:24:12Z", "message": "PR changes - more tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MTI0ODY4", "url": "https://github.com/HubSpot/jinjava/pull/472#pullrequestreview-466124868", "createdAt": "2020-08-12T17:27:04Z", "commit": {"oid": "1405adc62f47e61300c3bb15698e3fe4db35ac33"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7927a6b4f722f9c5797c0f660fa97641f21f651e", "author": {"user": null}, "url": "https://github.com/HubSpot/jinjava/commit/7927a6b4f722f9c5797c0f660fa97641f21f651e", "committedDate": "2020-08-12T18:04:13Z", "message": "Remove two debugging lines of code with problematic content"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1530, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}