{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4OTgzMjQ4", "number": 480, "title": "Revert \"Revert \"Divide by zero\"\" (New PR)", "bodyText": "Reverts #479 to behave as the new PR for Divide by Zero", "createdAt": "2020-08-17T18:00:23Z", "url": "https://github.com/HubSpot/jinjava/pull/480", "merged": true, "mergeCommit": {"oid": "28a18e05cd154a5131b528b5cd74ffdce67b1214"}, "closed": true, "closedAt": "2020-08-19T17:23:29Z", "author": {"login": "phalaphone"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc_2T0fAH2gAyNDY4OTgzMjQ4Ojg4NzE2OGY3ZTIzNDUxZGM5Y2E2NTkwYTBmMWExNDFiNDQ0NmM1ZDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAe8LVgH2gAyNDY4OTgzMjQ4OjMxMTlkYjBmN2E2OTA2YmExMzcyZjIyYzVjYTQ3YTM5MjdhMjZlODU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "887168f7e23451dc9ca6590a0f1a141b4446c5d6", "author": {"user": {"login": "phalaphone", "name": "zach kaplan"}}, "url": "https://github.com/HubSpot/jinjava/commit/887168f7e23451dc9ca6590a0f1a141b4446c5d6", "committedDate": "2020-08-17T17:59:50Z", "message": "Revert \"Revert \"Divide by zero\"\""}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4NzM3MTU1", "url": "https://github.com/HubSpot/jinjava/pull/480#pullrequestreview-468737155", "createdAt": "2020-08-17T18:30:32Z", "commit": {"oid": "887168f7e23451dc9ca6590a0f1a141b4446c5d6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxODozMDozMlrOHB1eoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxODozMDozMlrOHB1eoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTY4NjgxNg==", "bodyText": "@bszabo, we should be throwing an InvalidArgumentException here instead of IllegalArgumentException. Sorry for not catching that earlier.", "url": "https://github.com/HubSpot/jinjava/pull/480#discussion_r471686816", "createdAt": "2020-08-17T18:30:32Z", "author": {"login": "boulter"}, "path": "src/main/java/com/hubspot/jinjava/el/ext/DivOperator.java", "diffHunk": "@@ -0,0 +1,43 @@\n+package com.hubspot.jinjava.el.ext;\n+\n+import de.odysseus.el.misc.TypeConverter;\n+import de.odysseus.el.tree.impl.Parser.ExtensionHandler;\n+import de.odysseus.el.tree.impl.Parser.ExtensionPoint;\n+import de.odysseus.el.tree.impl.Scanner;\n+import de.odysseus.el.tree.impl.ast.AstBinary;\n+import de.odysseus.el.tree.impl.ast.AstBinary.SimpleOperator;\n+import de.odysseus.el.tree.impl.ast.AstNode;\n+\n+/**\n+ * Created to allow for the detection and handling of divide-by-zero requests in EL expressions\n+ * (see PR 473 @ https://github.com/HubSpot/jinjava/pull/473)\n+ */\n+public class DivOperator extends SimpleOperator {\n+  public static final Scanner.ExtensionToken TOKEN = new Scanner.ExtensionToken(\"/\");\n+  public static final DivOperator OP = new DivOperator();\n+\n+  @Override\n+  protected Object apply(TypeConverter converter, Object a, Object b) {\n+    if (a == null || b == null) {\n+      throw new IllegalArgumentException(\"Division argument may not be null\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "887168f7e23451dc9ca6590a0f1a141b4446c5d6"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a683d8a5686974bcac7076ae600d0fc0182b20e5", "author": {"user": null}, "url": "https://github.com/HubSpot/jinjava/commit/a683d8a5686974bcac7076ae600d0fc0182b20e5", "committedDate": "2020-08-18T18:25:37Z", "message": "DivOperator fails with InvalidArgumentException"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db9116079e44efcf3e5731828eef4d139a55df82", "author": {"user": null}, "url": "https://github.com/HubSpot/jinjava/commit/db9116079e44efcf3e5731828eef4d139a55df82", "committedDate": "2020-08-19T14:54:32Z", "message": "Co-opt ExpressionResolver for a better TemplateError diagnosis on divide-by-zero"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c28d074cb6a0cbd7c2a92772a44e3b1ec05b3395", "author": {"user": null}, "url": "https://github.com/HubSpot/jinjava/commit/c28d074cb6a0cbd7c2a92772a44e3b1ec05b3395", "committedDate": "2020-08-19T16:44:57Z", "message": "Throw custom exception to indicate divide by zero"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNjY5MTIy", "url": "https://github.com/HubSpot/jinjava/pull/480#pullrequestreview-470669122", "createdAt": "2020-08-19T17:01:46Z", "commit": {"oid": "c28d074cb6a0cbd7c2a92772a44e3b1ec05b3395"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3119db0f7a6906ba1372f22c5ca47a3927a26e85", "author": {"user": null}, "url": "https://github.com/HubSpot/jinjava/commit/3119db0f7a6906ba1372f22c5ca47a3927a26e85", "committedDate": "2020-08-19T17:20:07Z", "message": "Remove superfluous String.format() call"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1536, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}