{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyNzUxNzUz", "number": 445, "title": "TagCycleException was thrown when rendering template that doesn't have any cycles", "bodyText": "Before these changes templates as I have created couldn't be rendered without errors.\nJinjava had mistakenly thrown TagCycleException in such cases.\nAdding \"false\" as a parameter to render() method will reduce harm from that bug to zero.", "createdAt": "2020-05-25T13:27:24Z", "url": "https://github.com/HubSpot/jinjava/pull/445", "merged": true, "mergeCommit": {"oid": "f4986927a9adc2a6e93f8c35bf286f64c33b8a9e"}, "closed": true, "closedAt": "2020-06-11T13:53:03Z", "author": {"login": "Roobun"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclBK-DABqjMzNzI2NjM1MTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcp9mofgFqTQyODMwNDI1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "118e4eebd448e54b6ca85ae7e2ca9db6013c8355", "author": {"user": {"login": "Roobun", "name": "Harry"}}, "url": "https://github.com/HubSpot/jinjava/commit/118e4eebd448e54b6ca85ae7e2ca9db6013c8355", "committedDate": "2020-05-25T13:16:07Z", "message": "Render included templates with no processing of extended roots"}, "afterCommit": {"oid": "da3f60ee62e87269be84591e03318ad35895d7e5", "author": {"user": {"login": "Roobun", "name": "Harry"}}, "url": "https://github.com/HubSpot/jinjava/commit/da3f60ee62e87269be84591e03318ad35895d7e5", "committedDate": "2020-05-26T09:22:06Z", "message": "Do not process extended roots when render included templates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MTMxNjAz", "url": "https://github.com/HubSpot/jinjava/pull/445#pullrequestreview-425131603", "createdAt": "2020-06-05T09:14:35Z", "commit": {"oid": "da3f60ee62e87269be84591e03318ad35895d7e5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOToxNDozNVrOGfmxuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOToxNDozNVrOGfmxuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc5NDM2MA==", "bodyText": "I find it a bit easier to reason about these import chains if you rename them to something sequential like template-a template-b,template-c so  you can easily track a extends b imports c etc.", "url": "https://github.com/HubSpot/jinjava/pull/445#discussion_r435794360", "createdAt": "2020-06-05T09:14:35Z", "author": {"login": "Joeoh"}, "path": "src/test/java/com/hubspot/jinjava/lib/tag/IncludeTagTest.java", "diffHunk": "@@ -188,4 +188,16 @@ public void itSetsErrorLineNumbersCorrectlyTwoLevelsDeep() throws IOException {\n     assertThat(result.getErrors().get(0).getSourceTemplate().get())\n       .isEqualTo(\"tags/includetag/errors/error.html\");\n   }\n+\n+  @Test\n+  public void itRunsWithoutTagCycleException() throws Exception {\n+    String result = jinjava.render(\n+      Resources.toString(\n+        Resources.getResource(\"tags/extendstag/tagcycleexception/main-template.jinja\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da3f60ee62e87269be84591e03318ad35895d7e5"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1ODc4Mjc5", "url": "https://github.com/HubSpot/jinjava/pull/445#pullrequestreview-425878279", "createdAt": "2020-06-08T01:53:39Z", "commit": {"oid": "da3f60ee62e87269be84591e03318ad35895d7e5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwMTo1MzozOVrOGgNWmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwMTo1Njo1NFrOGgNYgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQyNjM5Mg==", "bodyText": "could you explain a bit more why this is more correct?", "url": "https://github.com/HubSpot/jinjava/pull/445#discussion_r436426392", "createdAt": "2020-06-08T01:53:39Z", "author": {"login": "boulter"}, "path": "src/main/java/com/hubspot/jinjava/lib/tag/IncludeTag.java", "diffHunk": "@@ -106,7 +106,7 @@ public String interpret(TagNode tagNode, JinjavaInterpreter interpreter) {\n         .getCurrentPathStack()\n         .push(templateFile, interpreter.getLineNumber(), interpreter.getPosition());\n \n-      return interpreter.render(node);\n+      return interpreter.render(node, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da3f60ee62e87269be84591e03318ad35895d7e5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQyNjYxNQ==", "bodyText": "are these variables relevant to the test?", "url": "https://github.com/HubSpot/jinjava/pull/445#discussion_r436426615", "createdAt": "2020-06-08T01:55:11Z", "author": {"login": "boulter"}, "path": "src/test/resources/tags/extendstag/tagcycleexception/library-template.jinja", "diffHunk": "@@ -0,0 +1,2 @@\n+{{ variable1 }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da3f60ee62e87269be84591e03318ad35895d7e5"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQyNjg4Mg==", "bodyText": "maybe explain this better in the name. Something about extended files not triggering tag cycle exceptions?", "url": "https://github.com/HubSpot/jinjava/pull/445#discussion_r436426882", "createdAt": "2020-06-08T01:56:54Z", "author": {"login": "boulter"}, "path": "src/test/java/com/hubspot/jinjava/lib/tag/IncludeTagTest.java", "diffHunk": "@@ -188,4 +188,16 @@ public void itSetsErrorLineNumbersCorrectlyTwoLevelsDeep() throws IOException {\n     assertThat(result.getErrors().get(0).getSourceTemplate().get())\n       .isEqualTo(\"tags/includetag/errors/error.html\");\n   }\n+\n+  @Test\n+  public void itRunsWithoutTagCycleException() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da3f60ee62e87269be84591e03318ad35895d7e5"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68bf6c8a38284be1cf4bee80760dd27e347b413c", "author": {"user": {"login": "Roobun", "name": "Harry"}}, "url": "https://github.com/HubSpot/jinjava/commit/68bf6c8a38284be1cf4bee80760dd27e347b413c", "committedDate": "2020-06-10T08:09:28Z", "message": "Render Templates without cycles but getting TagCycleException"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1ad55420556d480dd483a0a40980ced3898c457", "author": {"user": {"login": "Roobun", "name": "Harry"}}, "url": "https://github.com/HubSpot/jinjava/commit/a1ad55420556d480dd483a0a40980ced3898c457", "committedDate": "2020-06-10T08:09:28Z", "message": "Do not process extended roots when render included templates"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "da3f60ee62e87269be84591e03318ad35895d7e5", "author": {"user": {"login": "Roobun", "name": "Harry"}}, "url": "https://github.com/HubSpot/jinjava/commit/da3f60ee62e87269be84591e03318ad35895d7e5", "committedDate": "2020-05-26T09:22:06Z", "message": "Do not process extended roots when render included templates"}, "afterCommit": {"oid": "a1ad55420556d480dd483a0a40980ced3898c457", "author": {"user": {"login": "Roobun", "name": "Harry"}}, "url": "https://github.com/HubSpot/jinjava/commit/a1ad55420556d480dd483a0a40980ced3898c457", "committedDate": "2020-06-10T08:09:28Z", "message": "Do not process extended roots when render included templates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MzA0MjU2", "url": "https://github.com/HubSpot/jinjava/pull/445#pullrequestreview-428304256", "createdAt": "2020-06-10T18:03:23Z", "commit": {"oid": "a1ad55420556d480dd483a0a40980ced3898c457"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2521, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}