{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1NjAxNTYx", "number": 13560, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMDo0NjozNlrOEjTqHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMDo1MToyMFrOEjTwGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NDU3Njk0OnYy", "diffSide": "RIGHT", "path": "clustering/infinispan/extension/src/main/java/org/jboss/as/clustering/infinispan/subsystem/remote/RemoteCacheContainerResourceDefinition.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMDo0NjozNlrOHRl-Hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMjo0Njo0MFrOHRqPDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIwOTk1MA==", "bodyText": "Given that this is a map attribute, when is this value ever FALSE?\nWhy not use DiscarcAttributeChecker.UNDEFINED?", "url": "https://github.com/wildfly/wildfly/pull/13560#discussion_r488209950", "createdAt": "2020-09-14T20:46:36Z", "author": {"login": "pferraro"}, "path": "clustering/infinispan/extension/src/main/java/org/jboss/as/clustering/infinispan/subsystem/remote/RemoteCacheContainerResourceDefinition.java", "diffHunk": "@@ -147,6 +156,12 @@ public static void buildTransformation(ModelVersion version, ResourceTransformat\n         } else {\n             ResourceTransformationDescriptionBuilder builder = parent.addChildResource(RemoteCacheContainerResourceDefinition.WILDCARD_PATH);\n \n+            if (InfinispanModel.VERSION_13_0_0.requiresTransformation(version)) {\n+                builder.getAttributeBuilder()\n+                        .setDiscard(new DiscardAttributeValueChecker(false, true, ModelNode.FALSE), Attribute.PROPERTIES.getDefinition())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad7bcc6b1a60f15d588153c71c6169fe0c6b3cda"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI3OTgyMA==", "bodyText": "Thanks for spotting this, fixed + fixed the corresponding rejection test.", "url": "https://github.com/wildfly/wildfly/pull/13560#discussion_r488279820", "createdAt": "2020-09-14T22:46:40Z", "author": {"login": "rhusar"}, "path": "clustering/infinispan/extension/src/main/java/org/jboss/as/clustering/infinispan/subsystem/remote/RemoteCacheContainerResourceDefinition.java", "diffHunk": "@@ -147,6 +156,12 @@ public static void buildTransformation(ModelVersion version, ResourceTransformat\n         } else {\n             ResourceTransformationDescriptionBuilder builder = parent.addChildResource(RemoteCacheContainerResourceDefinition.WILDCARD_PATH);\n \n+            if (InfinispanModel.VERSION_13_0_0.requiresTransformation(version)) {\n+                builder.getAttributeBuilder()\n+                        .setDiscard(new DiscardAttributeValueChecker(false, true, ModelNode.FALSE), Attribute.PROPERTIES.getDefinition())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIwOTk1MA=="}, "originalCommit": {"oid": "ad7bcc6b1a60f15d588153c71c6169fe0c6b3cda"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NDU5MjI2OnYy", "diffSide": "RIGHT", "path": "clustering/infinispan/extension/src/main/java/org/jboss/as/clustering/infinispan/subsystem/remote/RemoteCacheContainerConfigurationServiceConfigurator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMDo1MToyMFrOHRmHaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMjo0Njo1N1rOHRqPhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIxMjMzMQ==", "bodyText": "N.B. Once we upgrade to jboss-dmr 1.6.x, we can replace this with:\nfor (Property property : Attribute.PROPERTIES.resolveModelAttribute(context, model).asPropertyListOrEmpty())", "url": "https://github.com/wildfly/wildfly/pull/13560#discussion_r488212331", "createdAt": "2020-09-14T20:51:20Z", "author": {"login": "pferraro"}, "path": "clustering/infinispan/extension/src/main/java/org/jboss/as/clustering/infinispan/subsystem/remote/RemoteCacheContainerConfigurationServiceConfigurator.java", "diffHunk": "@@ -135,6 +140,11 @@ public ServiceConfigurator configure(OperationContext context, ModelNode model)\n \n         this.server = context.hasOptionalCapability(CommonRequirement.MBEAN_SERVER.getName(), null, null) ? new ServiceSupplierDependency<>(CommonRequirement.MBEAN_SERVER.getServiceName(context)) : null;\n \n+        this.properties.clear();\n+        for (Property property : ModelNodes.optionalPropertyList(Attribute.PROPERTIES.resolveModelAttribute(context, model)).orElse(Collections.emptyList())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad7bcc6b1a60f15d588153c71c6169fe0c6b3cda"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI3OTk0Mw==", "bodyText": "Thanks - noted and put on a list.", "url": "https://github.com/wildfly/wildfly/pull/13560#discussion_r488279943", "createdAt": "2020-09-14T22:46:57Z", "author": {"login": "rhusar"}, "path": "clustering/infinispan/extension/src/main/java/org/jboss/as/clustering/infinispan/subsystem/remote/RemoteCacheContainerConfigurationServiceConfigurator.java", "diffHunk": "@@ -135,6 +140,11 @@ public ServiceConfigurator configure(OperationContext context, ModelNode model)\n \n         this.server = context.hasOptionalCapability(CommonRequirement.MBEAN_SERVER.getName(), null, null) ? new ServiceSupplierDependency<>(CommonRequirement.MBEAN_SERVER.getServiceName(context)) : null;\n \n+        this.properties.clear();\n+        for (Property property : ModelNodes.optionalPropertyList(Attribute.PROPERTIES.resolveModelAttribute(context, model)).orElse(Collections.emptyList())) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIxMjMzMQ=="}, "originalCommit": {"oid": "ad7bcc6b1a60f15d588153c71c6169fe0c6b3cda"}, "originalPosition": 42}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4192, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}