{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMjQ0NjY1", "number": 13316, "title": "[WFLY-13423] Remove the uses of AbstractOutboundConnectionService fro\u2026", "bodyText": "\u2026m ejb3 subsystem\nIt requires a core upgrade. Depends on: wildfly/wildfly-core#4213\n\nProvisions org.jboss.as.remoting always when EJB3RemoteResourceDefinition is present.\nReplaces the uses of org.jboss.as.remoting.AbstractOutboundConnectionService in favor of org.jboss.as.network.OutboundConnection and get it from the capability\n\nJira issue: https://issues.redhat.com/browse/WFLY-13423", "createdAt": "2020-05-21T09:17:34Z", "url": "https://github.com/wildfly/wildfly/pull/13316", "merged": true, "mergeCommit": {"oid": "166dabde897450299a311fe7779cd4d71a0e9465"}, "closed": true, "closedAt": "2020-06-17T11:48:19Z", "author": {"login": "yersan"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclVTtigBqjMzNzcwODEwMjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsAD4DgFqTQzMjAwNzk5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "71f64710f033d15e5b4094d527c908dc7c668f03", "author": {"user": {"login": "yersan", "name": "Yeray Borges"}}, "url": "https://github.com/wildfly/wildfly/commit/71f64710f033d15e5b4094d527c908dc7c668f03", "committedDate": "2020-05-21T08:55:45Z", "message": "[WFLY-13423] Remove the uses of AbstractOutboundConnectionService from ejb3 subsystem\n\n[WFLY-13423] Provision org.jboss.as.remoting on ejb3 for required resources"}, "afterCommit": {"oid": "4bc039e5b57429dfc8519c0cba72193eb1b393fd", "author": {"user": {"login": "yersan", "name": "Yeray Borges"}}, "url": "https://github.com/wildfly/wildfly/commit/4bc039e5b57429dfc8519c0cba72193eb1b393fd", "committedDate": "2020-05-27T08:50:32Z", "message": "[WFLY-13423] Remove the uses of AbstractOutboundConnectionService from ejb3 subsystem\n\n[WFLY-13423] Provision org.jboss.as.remoting on ejb3 for required resources"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4bc039e5b57429dfc8519c0cba72193eb1b393fd", "author": {"user": {"login": "yersan", "name": "Yeray Borges"}}, "url": "https://github.com/wildfly/wildfly/commit/4bc039e5b57429dfc8519c0cba72193eb1b393fd", "committedDate": "2020-05-27T08:50:32Z", "message": "[WFLY-13423] Remove the uses of AbstractOutboundConnectionService from ejb3 subsystem\n\n[WFLY-13423] Provision org.jboss.as.remoting on ejb3 for required resources"}, "afterCommit": {"oid": "49a47229a48394d6f8eaf91adb132fae36b8ee5a", "author": {"user": {"login": "yersan", "name": "Yeray Borges"}}, "url": "https://github.com/wildfly/wildfly/commit/49a47229a48394d6f8eaf91adb132fae36b8ee5a", "committedDate": "2020-05-28T18:25:03Z", "message": "[WFLY-13423] Remove the uses of AbstractOutboundConnectionService from ejb3 subsystem\n\n[WFLY-13423] Provision org.jboss.as.remoting on ejb3 for required resources"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49a47229a48394d6f8eaf91adb132fae36b8ee5a", "author": {"user": {"login": "yersan", "name": "Yeray Borges"}}, "url": "https://github.com/wildfly/wildfly/commit/49a47229a48394d6f8eaf91adb132fae36b8ee5a", "committedDate": "2020-05-28T18:25:03Z", "message": "[WFLY-13423] Remove the uses of AbstractOutboundConnectionService from ejb3 subsystem\n\n[WFLY-13423] Provision org.jboss.as.remoting on ejb3 for required resources"}, "afterCommit": {"oid": "9837d374293e44e01e3e3a0bf5fdcb3f746d685a", "author": {"user": {"login": "yersan", "name": "Yeray Borges"}}, "url": "https://github.com/wildfly/wildfly/commit/9837d374293e44e01e3e3a0bf5fdcb3f746d685a", "committedDate": "2020-05-29T09:30:17Z", "message": "[WFLY-13423] Remove the uses of AbstractOutboundConnectionService from ejb3 subsystem\n\n[WFLY-13423] Provision org.jboss.as.remoting on ejb3 for required resources"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NjI1OTEx", "url": "https://github.com/wildfly/wildfly/pull/13316#pullrequestreview-426625911", "createdAt": "2020-06-08T21:14:02Z", "commit": {"oid": "9837d374293e44e01e3e3a0bf5fdcb3f746d685a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMToxNDowM1rOGgwppg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMToxNDowM1rOGgwppg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAwNDcxMA==", "bodyText": "Is this validation necessary?  This isn't a management model consistency check, where we need to fail in Stage.MODEL if something is wrong. This is runtime stuff. If the reference is invalid won't MSC report the service wiring failure? I'm reluctant to start adding additional validation. It has the potential to produce nicer failures (although a \"missing capability\" message isn't particularly nicer than a \"missing service\" message) but it's either going to end up being done in a few random spots or it will be a very large addition of potentially fragile code.", "url": "https://github.com/wildfly/wildfly/pull/13316#discussion_r437004710", "createdAt": "2020-06-08T21:14:03Z", "author": {"login": "bstansberry"}, "path": "ejb3/src/main/java/org/jboss/as/ejb3/deployment/processors/EJBClientDescriptorMetaDataProcessor.java", "diffHunk": "@@ -133,6 +136,19 @@ public void deploy(DeploymentPhaseContext phaseContext) throws DeploymentUnitPro\n         if (ejbClientDescriptorMetaData == null && ! interceptorsDefined) {\n             return;\n         }\n+\n+        final CapabilityServiceSupport support = deploymentUnit.getAttachment(org.jboss.as.server.deployment.Attachments.CAPABILITY_SERVICE_SUPPORT);\n+        if (ejbClientDescriptorMetaData != null && ejbClientDescriptorMetaData.getProfile() == null) {\n+                for (EJBClientDescriptorMetaData.RemotingReceiverConfiguration receiverConfiguration : ejbClientDescriptorMetaData.getRemotingReceiverConfigurations()) {\n+                    final String requiredCap = RuntimeCapability.buildDynamicCapabilityName(OUTBOUND_CONNECTION_CAPABILITY_NAME, receiverConfiguration.getOutboundConnectionRef());\n+                    if (!support.hasCapability(requiredCap)) {\n+                        throw EjbLogger.DEPLOYMENT_LOGGER.deploymentRequiresCapability(\n+                                deploymentUnit.getName(),\n+                                requiredCap);\n+                    }\n+            }\n+        }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9837d374293e44e01e3e3a0bf5fdcb3f746d685a"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c82a7d5e63aacba2f1ceff9a15d2bc626b6361e3", "author": {"user": {"login": "yersan", "name": "Yeray Borges"}}, "url": "https://github.com/wildfly/wildfly/commit/c82a7d5e63aacba2f1ceff9a15d2bc626b6361e3", "committedDate": "2020-06-10T11:35:21Z", "message": "[WFLY-13423] Remove the uses of AbstractOutboundConnectionService from ejb3 subsystem"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9837d374293e44e01e3e3a0bf5fdcb3f746d685a", "author": {"user": {"login": "yersan", "name": "Yeray Borges"}}, "url": "https://github.com/wildfly/wildfly/commit/9837d374293e44e01e3e3a0bf5fdcb3f746d685a", "committedDate": "2020-05-29T09:30:17Z", "message": "[WFLY-13423] Remove the uses of AbstractOutboundConnectionService from ejb3 subsystem\n\n[WFLY-13423] Provision org.jboss.as.remoting on ejb3 for required resources"}, "afterCommit": {"oid": "c82a7d5e63aacba2f1ceff9a15d2bc626b6361e3", "author": {"user": {"login": "yersan", "name": "Yeray Borges"}}, "url": "https://github.com/wildfly/wildfly/commit/c82a7d5e63aacba2f1ceff9a15d2bc626b6361e3", "committedDate": "2020-06-10T11:35:21Z", "message": "[WFLY-13423] Remove the uses of AbstractOutboundConnectionService from ejb3 subsystem"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMDA3OTk2", "url": "https://github.com/wildfly/wildfly/pull/13316#pullrequestreview-432007996", "createdAt": "2020-06-17T02:02:59Z", "commit": {"oid": "c82a7d5e63aacba2f1ceff9a15d2bc626b6361e3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3973, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}