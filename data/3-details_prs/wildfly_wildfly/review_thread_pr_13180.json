{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4Mzk5MDEw", "number": 13180, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwODoyMToyMlrODvBK8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwODozNDowMVrODvBdcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNjI4ODQ5OnYy", "diffSide": "RIGHT", "path": "testsuite/integration/basic/src/test/java/org/jboss/as/test/integration/ejb/jndi/logging/JNDIBindingsNoAppNameTestCase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwODoyMToyMlrOGBMs7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNjozNDo1NFrOGCMOxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzkwOTg2OA==", "bodyText": "Cruft, It doesn't matter, but this is an unused variable.", "url": "https://github.com/wildfly/wildfly/pull/13180#discussion_r403909868", "createdAt": "2020-04-06T08:21:22Z", "author": {"login": "yersan"}, "path": "testsuite/integration/basic/src/test/java/org/jboss/as/test/integration/ejb/jndi/logging/JNDIBindingsNoAppNameTestCase.java", "diffHunk": "@@ -0,0 +1,110 @@\n+/*\n+ * JBoss, Home of Professional Open Source.\n+ * Copyright 2019, Red Hat, Inc., and individual contributors\n+ * as indicated by the @author tags. See the copyright.txt file in the\n+ * distribution for a full listing of individual contributors.\n+ *\n+ * This is free software; you can redistribute it and/or modify it\n+ * under the terms of the GNU Lesser General Public License as\n+ * published by the Free Software Foundation; either version 2.1 of\n+ * the License, or (at your option) any later version.\n+ *\n+ * This software is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this software; if not, write to the Free\n+ * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n+ * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n+ */\n+\n+package org.jboss.as.test.integration.ejb.jndi.logging;\n+\n+import org.jboss.arquillian.container.test.api.Deployment;\n+import org.jboss.arquillian.container.test.api.RunAsClient;\n+import org.jboss.arquillian.junit.Arquillian;\n+import org.jboss.as.arquillian.api.ContainerResource;\n+import org.jboss.as.arquillian.api.ServerSetup;\n+import org.jboss.as.arquillian.container.ManagementClient;\n+import org.jboss.as.test.shared.TestLogHandlerSetupTask;\n+import org.jboss.as.test.shared.TestSuiteEnvironment;\n+import org.jboss.as.test.shared.util.LoggingUtil;\n+import org.jboss.shrinkwrap.api.ShrinkWrap;\n+import org.jboss.shrinkwrap.api.spec.JavaArchive;\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+import javax.naming.Context;\n+import javax.naming.InitialContext;\n+import javax.naming.NamingException;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.Properties;\n+\n+/**\n+ * Automated test for [ WFLY-11848 ] - Tests if JNDI bindings is correctly built in case there is no appName.\n+ *\n+ * @author Daniel Cihak\n+ */\n+@RunWith(Arquillian.class)\n+@RunAsClient\n+@ServerSetup(JNDIBindingsNoAppNameTestCase.TestLogHandlerSetup.class)\n+public class JNDIBindingsNoAppNameTestCase {\n+\n+    private static final String JAR_NAME = \"ejb-jndi\";\n+    private static String HOST = TestSuiteEnvironment.getServerAddress();\n+    private static int PORT = TestSuiteEnvironment.getHttpPort();\n+    private static final String TEST_HANDLER_NAME = \"test-\" + JNDIBindingsNoAppNameTestCase.class.getSimpleName();\n+    private static final String TEST_LOG_FILE_NAME = TEST_HANDLER_NAME + \".log\";\n+\n+    public static class TestLogHandlerSetup extends TestLogHandlerSetupTask {\n+\n+        @Override\n+        public Collection<String> getCategories() {\n+            return Collections.singletonList(\"org.jboss\");\n+        }\n+\n+        @Override\n+        public String getLevel() {\n+            return \"INFO\";\n+        }\n+        @Override\n+        public String getHandlerName() {\n+            return TEST_HANDLER_NAME;\n+        }\n+        @Override\n+        public String getLogFileName() {\n+            return TEST_LOG_FILE_NAME;\n+        }\n+    }\n+\n+    @Deployment\n+    public static JavaArchive createJar() {\n+        JavaArchive jar = ShrinkWrap.create(JavaArchive.class, JAR_NAME);\n+        jar.addClasses(JNDIBindingsNoAppNameTestCase.class, Hello.class, HelloBean.class);\n+        return jar;\n+    }\n+\n+    @ContainerResource\n+    private ManagementClient managementClient;\n+\n+    @Test\n+    public void testJNDIBindingsNoAppName() throws Exception {\n+        boolean passed = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4e4125a589b37b07b1853144d19017dbdfd35b6"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk1MDcyNA==", "bodyText": "Fixed", "url": "https://github.com/wildfly/wildfly/pull/13180#discussion_r404950724", "createdAt": "2020-04-07T16:34:54Z", "author": {"login": "bstansberry"}, "path": "testsuite/integration/basic/src/test/java/org/jboss/as/test/integration/ejb/jndi/logging/JNDIBindingsNoAppNameTestCase.java", "diffHunk": "@@ -0,0 +1,110 @@\n+/*\n+ * JBoss, Home of Professional Open Source.\n+ * Copyright 2019, Red Hat, Inc., and individual contributors\n+ * as indicated by the @author tags. See the copyright.txt file in the\n+ * distribution for a full listing of individual contributors.\n+ *\n+ * This is free software; you can redistribute it and/or modify it\n+ * under the terms of the GNU Lesser General Public License as\n+ * published by the Free Software Foundation; either version 2.1 of\n+ * the License, or (at your option) any later version.\n+ *\n+ * This software is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this software; if not, write to the Free\n+ * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n+ * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n+ */\n+\n+package org.jboss.as.test.integration.ejb.jndi.logging;\n+\n+import org.jboss.arquillian.container.test.api.Deployment;\n+import org.jboss.arquillian.container.test.api.RunAsClient;\n+import org.jboss.arquillian.junit.Arquillian;\n+import org.jboss.as.arquillian.api.ContainerResource;\n+import org.jboss.as.arquillian.api.ServerSetup;\n+import org.jboss.as.arquillian.container.ManagementClient;\n+import org.jboss.as.test.shared.TestLogHandlerSetupTask;\n+import org.jboss.as.test.shared.TestSuiteEnvironment;\n+import org.jboss.as.test.shared.util.LoggingUtil;\n+import org.jboss.shrinkwrap.api.ShrinkWrap;\n+import org.jboss.shrinkwrap.api.spec.JavaArchive;\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+import javax.naming.Context;\n+import javax.naming.InitialContext;\n+import javax.naming.NamingException;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.Properties;\n+\n+/**\n+ * Automated test for [ WFLY-11848 ] - Tests if JNDI bindings is correctly built in case there is no appName.\n+ *\n+ * @author Daniel Cihak\n+ */\n+@RunWith(Arquillian.class)\n+@RunAsClient\n+@ServerSetup(JNDIBindingsNoAppNameTestCase.TestLogHandlerSetup.class)\n+public class JNDIBindingsNoAppNameTestCase {\n+\n+    private static final String JAR_NAME = \"ejb-jndi\";\n+    private static String HOST = TestSuiteEnvironment.getServerAddress();\n+    private static int PORT = TestSuiteEnvironment.getHttpPort();\n+    private static final String TEST_HANDLER_NAME = \"test-\" + JNDIBindingsNoAppNameTestCase.class.getSimpleName();\n+    private static final String TEST_LOG_FILE_NAME = TEST_HANDLER_NAME + \".log\";\n+\n+    public static class TestLogHandlerSetup extends TestLogHandlerSetupTask {\n+\n+        @Override\n+        public Collection<String> getCategories() {\n+            return Collections.singletonList(\"org.jboss\");\n+        }\n+\n+        @Override\n+        public String getLevel() {\n+            return \"INFO\";\n+        }\n+        @Override\n+        public String getHandlerName() {\n+            return TEST_HANDLER_NAME;\n+        }\n+        @Override\n+        public String getLogFileName() {\n+            return TEST_LOG_FILE_NAME;\n+        }\n+    }\n+\n+    @Deployment\n+    public static JavaArchive createJar() {\n+        JavaArchive jar = ShrinkWrap.create(JavaArchive.class, JAR_NAME);\n+        jar.addClasses(JNDIBindingsNoAppNameTestCase.class, Hello.class, HelloBean.class);\n+        return jar;\n+    }\n+\n+    @ContainerResource\n+    private ManagementClient managementClient;\n+\n+    @Test\n+    public void testJNDIBindingsNoAppName() throws Exception {\n+        boolean passed = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzkwOTg2OA=="}, "originalCommit": {"oid": "e4e4125a589b37b07b1853144d19017dbdfd35b6"}, "originalPosition": 96}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNjMzMTkxOnYy", "diffSide": "RIGHT", "path": "testsuite/shared/src/main/java/org/jboss/as/test/shared/util/LoggingUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwODozMzowNlrOGBNH6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNjozNDo0NVrOGCMOWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzkxNjc3Nw==", "bodyText": "filters method argument should be passed to isMessageInLogFile as an argument", "url": "https://github.com/wildfly/wildfly/pull/13180#discussion_r403916777", "createdAt": "2020-04-06T08:33:06Z", "author": {"login": "yersan"}, "path": "testsuite/shared/src/main/java/org/jboss/as/test/shared/util/LoggingUtil.java", "diffHunk": "@@ -71,26 +72,35 @@ public static Path getInServerLogPath(String logFile) {\n         return Paths.get(System.getProperty(\"jboss.server.log.dir\")).resolve(logFile);\n     }\n \n-    public static boolean hasLogMessage(String logFileName, String logMessage) throws Exception {\n+\n+    @SafeVarargs\n+    public static boolean hasLogMessage(String logFileName, String logMessage, Predicate<String>... filters) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4e4125a589b37b07b1853144d19017dbdfd35b6"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk1MDYxOQ==", "bodyText": "Fixed", "url": "https://github.com/wildfly/wildfly/pull/13180#discussion_r404950619", "createdAt": "2020-04-07T16:34:45Z", "author": {"login": "bstansberry"}, "path": "testsuite/shared/src/main/java/org/jboss/as/test/shared/util/LoggingUtil.java", "diffHunk": "@@ -71,26 +72,35 @@ public static Path getInServerLogPath(String logFile) {\n         return Paths.get(System.getProperty(\"jboss.server.log.dir\")).resolve(logFile);\n     }\n \n-    public static boolean hasLogMessage(String logFileName, String logMessage) throws Exception {\n+\n+    @SafeVarargs\n+    public static boolean hasLogMessage(String logFileName, String logMessage, Predicate<String>... filters) throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzkxNjc3Nw=="}, "originalCommit": {"oid": "e4e4125a589b37b07b1853144d19017dbdfd35b6"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNjMzNTg3OnYy", "diffSide": "RIGHT", "path": "testsuite/shared/src/main/java/org/jboss/as/test/shared/util/LoggingUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwODozNDowMVrOGBNKUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNjozNTowNVrOGCMPNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzkxNzM5NQ==", "bodyText": "filters method argument should be passed to isMessageInLogFile as an argument", "url": "https://github.com/wildfly/wildfly/pull/13180#discussion_r403917395", "createdAt": "2020-04-06T08:34:01Z", "author": {"login": "yersan"}, "path": "testsuite/shared/src/main/java/org/jboss/as/test/shared/util/LoggingUtil.java", "diffHunk": "@@ -71,26 +72,35 @@ public static Path getInServerLogPath(String logFile) {\n         return Paths.get(System.getProperty(\"jboss.server.log.dir\")).resolve(logFile);\n     }\n \n-    public static boolean hasLogMessage(String logFileName, String logMessage) throws Exception {\n+\n+    @SafeVarargs\n+    public static boolean hasLogMessage(String logFileName, String logMessage, Predicate<String>... filters) throws Exception {\n \n         Path logPath = LoggingUtil.getInServerLogPath(logFileName);\n         return isMessageInLogFile(logPath, logMessage);\n     }\n \n-    public static boolean hasLogMessage(ManagementClient managementClient, String handlerName, String logMessage) throws Exception {\n+    @SafeVarargs\n+    public static boolean hasLogMessage(ManagementClient managementClient, String handlerName, String logMessage, Predicate<String>... filters) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4e4125a589b37b07b1853144d19017dbdfd35b6"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk1MDgzOA==", "bodyText": "Fixed", "url": "https://github.com/wildfly/wildfly/pull/13180#discussion_r404950838", "createdAt": "2020-04-07T16:35:05Z", "author": {"login": "bstansberry"}, "path": "testsuite/shared/src/main/java/org/jboss/as/test/shared/util/LoggingUtil.java", "diffHunk": "@@ -71,26 +72,35 @@ public static Path getInServerLogPath(String logFile) {\n         return Paths.get(System.getProperty(\"jboss.server.log.dir\")).resolve(logFile);\n     }\n \n-    public static boolean hasLogMessage(String logFileName, String logMessage) throws Exception {\n+\n+    @SafeVarargs\n+    public static boolean hasLogMessage(String logFileName, String logMessage, Predicate<String>... filters) throws Exception {\n \n         Path logPath = LoggingUtil.getInServerLogPath(logFileName);\n         return isMessageInLogFile(logPath, logMessage);\n     }\n \n-    public static boolean hasLogMessage(ManagementClient managementClient, String handlerName, String logMessage) throws Exception {\n+    @SafeVarargs\n+    public static boolean hasLogMessage(ManagementClient managementClient, String handlerName, String logMessage, Predicate<String>... filters) throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzkxNzM5NQ=="}, "originalCommit": {"oid": "e4e4125a589b37b07b1853144d19017dbdfd35b6"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3880, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}