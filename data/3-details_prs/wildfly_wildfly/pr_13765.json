{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMDUwNjY3", "number": 13765, "title": "[WFLY-14151] Move microprofile-health extension to the microprofile feature pack", "bodyText": "[WFLY-14151] Move microprofile-health extension to the microprofile feature pack\nThis PR will handle the move of microprofile-health extension to the microprofile feature pack and the creation of a health extension to provide base healthiness features in the EE feature pack\nJIRA: https://issues.redhat.com/browse/WFLY-14151\nSigned-off-by: Jeff Mesnil jmesnil@redhat.com", "createdAt": "2020-12-02T14:22:11Z", "url": "https://github.com/wildfly/wildfly/pull/13765", "merged": true, "mergeCommit": {"oid": "fc0a5dfe9d1410d0c996af2e2446d390c6c9e176"}, "closed": true, "closedAt": "2020-12-14T16:25:44Z", "author": {"login": "jmesnil"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjyb0AgBqjQwNzg3MDQ2NDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdk5W0GgFqTU0OTU3NDk5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8794fe8fbc9a728e1556bdd767627393410d91f4", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/8794fe8fbc9a728e1556bdd767627393410d91f4", "committedDate": "2020-12-02T14:19:11Z", "message": "[WFLY-14151] Move microprofile-health extension to the microprofile feature pack\n\nThis extension is no longer provided by the ee feature pack.\n\nJIRA: https://issues.redhat.com/browse/WFLY-14151\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}, "afterCommit": {"oid": "fc432f34797203e8028dfb5b1c4f5f9365d68c1a", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/fc432f34797203e8028dfb5b1c4f5f9365d68c1a", "committedDate": "2020-12-07T09:49:03Z", "message": "refactor code to extract DMR-Base Server Probes\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc432f34797203e8028dfb5b1c4f5f9365d68c1a", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/fc432f34797203e8028dfb5b1c4f5f9365d68c1a", "committedDate": "2020-12-07T09:49:03Z", "message": "refactor code to extract DMR-Base Server Probes\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}, "afterCommit": {"oid": "4e63e6fb58b01e47950707b496220244149cace4", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/4e63e6fb58b01e47950707b496220244149cace4", "committedDate": "2020-12-07T12:17:31Z", "message": "add base health subsystem\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "26830aebf91c6efd157081894a845292a5fa52c3", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/26830aebf91c6efd157081894a845292a5fa52c3", "committedDate": "2020-12-07T13:13:51Z", "message": "add base health extension\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}, "afterCommit": {"oid": "84f4e6897ef3e9593c909f79423075d1500c035a", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/84f4e6897ef3e9593c909f79423075d1500c035a", "committedDate": "2020-12-08T07:51:59Z", "message": "move ServerProbes to base health subsystem\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84f4e6897ef3e9593c909f79423075d1500c035a", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/84f4e6897ef3e9593c909f79423075d1500c035a", "committedDate": "2020-12-08T07:51:59Z", "message": "move ServerProbes to base health subsystem\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}, "afterCommit": {"oid": "5ed850f4ec1f339defe369af5b84d0e67094ba60", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/5ed850f4ec1f339defe369af5b84d0e67094ba60", "committedDate": "2020-12-08T11:03:12Z", "message": "move ServerProbes to base health subsystem\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5ed850f4ec1f339defe369af5b84d0e67094ba60", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/5ed850f4ec1f339defe369af5b84d0e67094ba60", "committedDate": "2020-12-08T11:03:12Z", "message": "move ServerProbes to base health subsystem\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}, "afterCommit": {"oid": "c034f6d7b4728e5fce68000eb5b8f73bff0404e6", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/c034f6d7b4728e5fce68000eb5b8f73bff0404e6", "committedDate": "2020-12-08T13:58:55Z", "message": "move ServerProbes to base health subsystem\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ba52caa150ebc463af6a5e2edcab90604f233c32", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/ba52caa150ebc463af6a5e2edcab90604f233c32", "committedDate": "2020-12-08T14:38:16Z", "message": "Doc\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}, "afterCommit": {"oid": "6e0c07fbbd22ae215c56ac27a2fce1024a0e8ecc", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/6e0c07fbbd22ae215c56ac27a2fce1024a0e8ecc", "committedDate": "2020-12-08T14:46:25Z", "message": "Doc\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6e0c07fbbd22ae215c56ac27a2fce1024a0e8ecc", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/6e0c07fbbd22ae215c56ac27a2fce1024a0e8ecc", "committedDate": "2020-12-08T14:46:25Z", "message": "Doc\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}, "afterCommit": {"oid": "fdc17bd64031721d208bf99139cba6eb3788b95b", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/fdc17bd64031721d208bf99139cba6eb3788b95b", "committedDate": "2020-12-08T14:48:17Z", "message": "Doc\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04d09144b4a2216c34285d394e48df53818e20ca", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/04d09144b4a2216c34285d394e48df53818e20ca", "committedDate": "2020-12-08T15:26:28Z", "message": "added integration tests\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}, "afterCommit": {"oid": "25cd30fc532ec542474b6e71ed154a0cb941c286", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/25cd30fc532ec542474b6e71ed154a0cb941c286", "committedDate": "2020-12-09T08:55:24Z", "message": "add health subsystem to missing legacy files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "25cd30fc532ec542474b6e71ed154a0cb941c286", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/25cd30fc532ec542474b6e71ed154a0cb941c286", "committedDate": "2020-12-09T08:55:24Z", "message": "add health subsystem to missing legacy files"}, "afterCommit": {"oid": "90cab32ca53e01df167333548abc3f3e1360b6e4", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/90cab32ca53e01df167333548abc3f3e1360b6e4", "committedDate": "2020-12-09T10:28:21Z", "message": "add health subsystem to missing legacy files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "90cab32ca53e01df167333548abc3f3e1360b6e4", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/90cab32ca53e01df167333548abc3f3e1360b6e4", "committedDate": "2020-12-09T10:28:21Z", "message": "add health subsystem to missing legacy files"}, "afterCommit": {"oid": "7366fc3edeef4040a3c1e69535dca607b103c99f", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/7366fc3edeef4040a3c1e69535dca607b103c99f", "committedDate": "2020-12-09T13:20:35Z", "message": "observability layer\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NzgzNjY3", "url": "https://github.com/wildfly/wildfly/pull/13765#pullrequestreview-548783667", "createdAt": "2020-12-10T03:02:44Z", "commit": {"oid": "5aaafbd589fb35e613b158efb90d9ae5593a6c07"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwMzowMjo0NVrOICzTsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwMzoyNjo1NVrOICzz-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgwODY4OQ==", "bodyText": "s/for WildFly/for the WildFly/g", "url": "https://github.com/wildfly/wildfly/pull/13765#discussion_r539808689", "createdAt": "2020-12-10T03:02:45Z", "author": {"login": "bstansberry"}, "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/Health.adoc", "diffHunk": "@@ -0,0 +1,87 @@\n+[[Health]]\n+= Health Subsystem Configuration\n+\n+[NOTE]\n+====\n+This subsystem exposes only healthiness checks for WildFly runtime.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aaafbd589fb35e613b158efb90d9ae5593a6c07"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgwODk1Ng==", "bodyText": "s/on WildFly/on the WildFly/g", "url": "https://github.com/wildfly/wildfly/pull/13765#discussion_r539808956", "createdAt": "2020-12-10T03:03:36Z", "author": {"login": "bstansberry"}, "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/Health.adoc", "diffHunk": "@@ -0,0 +1,87 @@\n+[[Health]]\n+= Health Subsystem Configuration\n+\n+[NOTE]\n+====\n+This subsystem exposes only healthiness checks for WildFly runtime.\n+Support for https://microprofile.io/project/eclipse/microprofile-health[Eclipse MicroProfile Health] is provided by\n+the _microprofile-health-smallrye_ subsystem.\n+====\n+\n+[[required-extension-metrics]]\n+== Extension\n+\n+This `org.wildfly.extension.health` extension is included in all the standalone configurations included in the\n+WildFly distribution as well as the `health` layer.\n+\n+You can also add the extension to a configuration without it either by adding\n+an `<extension module=\"org.wildfly.extension.health\"/>`\n+element to the xml or by using the following CLI operation:\n+\n+[source,options=\"nowrap\"]\n+----\n+[standalone@localhost:9990 /] /extension=org.wildfly.extension.health:add\n+----\n+\n+== Management Model\n+\n+The `/subsystem=health` resource defines one attribute:\n+\n+* `security-enabled` - a boolean to indicate whether authentication is required to access the HTTP health endpoint (described below). By default, it is `true`. The\n+standalone configurations explicitly sets it to `false` to accept unauthenticated access to the HTTP endpoints.\n+\n+[[health-http-endpoint]]\n+== HTTP Endpoint\n+\n+The Health HTTP endpoint is accessible on WildFly HTTP management interface http://localhost:9990/health[http://localhost:9990/health].", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aaafbd589fb35e613b158efb90d9ae5593a6c07"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgwOTAyNA==", "bodyText": "s/on WildFly/on the WildFly/g", "url": "https://github.com/wildfly/wildfly/pull/13765#discussion_r539809024", "createdAt": "2020-12-10T03:03:49Z", "author": {"login": "bstansberry"}, "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/Health.adoc", "diffHunk": "@@ -0,0 +1,87 @@\n+[[Health]]\n+= Health Subsystem Configuration\n+\n+[NOTE]\n+====\n+This subsystem exposes only healthiness checks for WildFly runtime.\n+Support for https://microprofile.io/project/eclipse/microprofile-health[Eclipse MicroProfile Health] is provided by\n+the _microprofile-health-smallrye_ subsystem.\n+====\n+\n+[[required-extension-metrics]]\n+== Extension\n+\n+This `org.wildfly.extension.health` extension is included in all the standalone configurations included in the\n+WildFly distribution as well as the `health` layer.\n+\n+You can also add the extension to a configuration without it either by adding\n+an `<extension module=\"org.wildfly.extension.health\"/>`\n+element to the xml or by using the following CLI operation:\n+\n+[source,options=\"nowrap\"]\n+----\n+[standalone@localhost:9990 /] /extension=org.wildfly.extension.health:add\n+----\n+\n+== Management Model\n+\n+The `/subsystem=health` resource defines one attribute:\n+\n+* `security-enabled` - a boolean to indicate whether authentication is required to access the HTTP health endpoint (described below). By default, it is `true`. The\n+standalone configurations explicitly sets it to `false` to accept unauthenticated access to the HTTP endpoints.\n+\n+[[health-http-endpoint]]\n+== HTTP Endpoint\n+\n+The Health HTTP endpoint is accessible on WildFly HTTP management interface http://localhost:9990/health[http://localhost:9990/health].\n+\n+The `health` subsystem registers three HTTP endpoints:\n+\n+* `/health` to test both the liveness and readiness of the application server.\n+* `/health/live` to test the liveness of the application server\n+* `/health/ready` to test the readiness of the application server.\n+\n+The Health HTTP endpoints are accessible on WildFly HTTP management interface (e.g. http://localhost:9990/health[http://localhost:9990/health]).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aaafbd589fb35e613b158efb90d9ae5593a6c07"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgwOTQ3Nw==", "bodyText": "s/outcome/outcomes\ns/probes/probe", "url": "https://github.com/wildfly/wildfly/pull/13765#discussion_r539809477", "createdAt": "2020-12-10T03:05:05Z", "author": {"login": "bstansberry"}, "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/Health.adoc", "diffHunk": "@@ -0,0 +1,87 @@\n+[[Health]]\n+= Health Subsystem Configuration\n+\n+[NOTE]\n+====\n+This subsystem exposes only healthiness checks for WildFly runtime.\n+Support for https://microprofile.io/project/eclipse/microprofile-health[Eclipse MicroProfile Health] is provided by\n+the _microprofile-health-smallrye_ subsystem.\n+====\n+\n+[[required-extension-metrics]]\n+== Extension\n+\n+This `org.wildfly.extension.health` extension is included in all the standalone configurations included in the\n+WildFly distribution as well as the `health` layer.\n+\n+You can also add the extension to a configuration without it either by adding\n+an `<extension module=\"org.wildfly.extension.health\"/>`\n+element to the xml or by using the following CLI operation:\n+\n+[source,options=\"nowrap\"]\n+----\n+[standalone@localhost:9990 /] /extension=org.wildfly.extension.health:add\n+----\n+\n+== Management Model\n+\n+The `/subsystem=health` resource defines one attribute:\n+\n+* `security-enabled` - a boolean to indicate whether authentication is required to access the HTTP health endpoint (described below). By default, it is `true`. The\n+standalone configurations explicitly sets it to `false` to accept unauthenticated access to the HTTP endpoints.\n+\n+[[health-http-endpoint]]\n+== HTTP Endpoint\n+\n+The Health HTTP endpoint is accessible on WildFly HTTP management interface http://localhost:9990/health[http://localhost:9990/health].\n+\n+The `health` subsystem registers three HTTP endpoints:\n+\n+* `/health` to test both the liveness and readiness of the application server.\n+* `/health/live` to test the liveness of the application server\n+* `/health/ready` to test the readiness of the application server.\n+\n+The Health HTTP endpoints are accessible on WildFly HTTP management interface (e.g. http://localhost:9990/health[http://localhost:9990/health]).\n+\n+If the application server is healthy, it will return a `200 OK` response:\n+\n+[source,shell]\n+----\n+$ curl -v http://localhost:9990/health\n+< HTTP/1.1 200 OK\n+----\n+\n+If the application server  is not healthy, it returns `503 Service Unavailable`\n+\n+[source,shell]\n+----\n+$ curl -v http://localhost:9990/health\n+< HTTP/1.1 503 Service Unavailable\n+----\n+\n+=== Secured Access to the HTTP endpoints\n+\n+Secured access to the HTTP endpoint is controlled by the `security-enabled` attribute.\n+If it is set to `true`, the HTTP client must be authenticated.\n+\n+If security has been enabled, the HTTP client must pass the credentials corresponding to a management user\n+created by the `add-user` script. For example:\n+\n+[source,shell]\n+----\n+$ curl -v --digest -u myadminuser:myadminpassword http://localhost:9990/health\n+< HTTP/1.1 200 OK\n+----\n+\n+If the authentication fails, the  server will reply with a `401 NOT AUTHORIZED` response.\n+\n+NOTE: The HTTP response contains additional information with individual outcome for each probes that determined the healthiness.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aaafbd589fb35e613b158efb90d9ae5593a6c07"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgxMTMwMA==", "bodyText": "First char in the list is ','", "url": "https://github.com/wildfly/wildfly/pull/13765#discussion_r539811300", "createdAt": "2020-12-10T03:10:22Z", "author": {"login": "bstansberry"}, "path": "ee-9/feature-pack/src/main/resources/feature_groups/domain-host-excludes.xml", "diffHunk": "@@ -7,50 +7,65 @@\n \n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly10.0\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.core-management&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.discovery&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.elytron&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.core-management&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.discovery&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.elytron&quot;,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;]\"/>\n     </feature>\n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly10.1\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.core-management&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.discovery&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.elytron&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.core-management&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.discovery&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.elytron&quot;,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;]\"/>\n     </feature>\n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly11.0\"/>\n         <param name=\"host-release\" value=\"WildFly11.0\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;]\"/>\n     </feature>\n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly12.0\"/>\n         <param name=\"host-release\" value=\"WildFly12.0\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;]\"/>\n     </feature>\n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly13.0\"/>\n         <param name=\"host-release\" value=\"WildFly13.0\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;]\"/>\n     </feature>\n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly14.0\"/>\n         <param name=\"host-release\" value=\"WildFly14.0\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;]\"/>\n     </feature>\n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly15.0\"/>\n         <param name=\"host-release\" value=\"WildFly15.0\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;]\"/>\n     </feature>\n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly16.0\"/>\n         <param name=\"host-release\" value=\"WildFly16.0\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.microprofile.fault-tolerance-smallrye&quot;,&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;,&quot;org.wildfly.extension.microprofile.openapi-smallrye&quot;]\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aaafbd589fb35e613b158efb90d9ae5593a6c07"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgxMjAxOA==", "bodyText": "The health extension is included twice here.", "url": "https://github.com/wildfly/wildfly/pull/13765#discussion_r539812018", "createdAt": "2020-12-10T03:12:18Z", "author": {"login": "bstansberry"}, "path": "ee-feature-pack/galleon-common/src/main/resources/feature_groups/domain-host-excludes.xml", "diffHunk": "@@ -7,35 +7,65 @@\n \n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly10.0\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.core-management&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.discovery&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.elytron&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.core-management&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.discovery&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.elytron&quot;,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;]\"/>\n     </feature>\n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly10.1\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.core-management&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.discovery&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.elytron&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.core-management&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.discovery&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.elytron&quot;,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;]\"/>\n     </feature>\n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly11.0\"/>\n         <param name=\"host-release\" value=\"WildFly11.0\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;]\"/>\n     </feature>\n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly12.0\"/>\n         <param name=\"host-release\" value=\"WildFly12.0\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.ee-security&quot;,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;]\"/>\n     </feature>\n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly13.0\"/>\n         <param name=\"host-release\" value=\"WildFly13.0\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.datasources-agroal&quot;,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.microprofile.config-smallrye&quot;,&quot;org.wildfly.extension.microprofile.health-smallrye&quot;,&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;]\"/>\n     </feature>\n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly14.0\"/>\n         <param name=\"host-release\" value=\"WildFly14.0\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.microprofile.metrics-smallrye&quot;]\"/>\n     </feature>\n     <feature spec=\"domain.host-exclude\">\n         <param name=\"host-exclude\" value=\"WildFly15.0\"/>\n         <param name=\"host-release\" value=\"WildFly15.0\"/>\n-        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;]\"/>\n+        <param name=\"excluded-extensions\" value=\"[&quot;org.wildfly.extension.clustering.web&quot;,&quot;org.wildfly.extension.health&quot;,&quot;org.wildfly.extension.metrics&quot;,&quot;org.wildfly.extension.health&quot;]\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aaafbd589fb35e613b158efb90d9ae5593a6c07"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgxNjMwNw==", "bodyText": "^^^", "url": "https://github.com/wildfly/wildfly/pull/13765#discussion_r539816307", "createdAt": "2020-12-10T03:25:06Z", "author": {"login": "bstansberry"}, "path": "testsuite/integration/basic/src/test/java/org/wildfly/test/integration/health/HealthHTTPEndpointTestCase.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * JBoss, Home of Professional Open Source.\n+ * Copyright 2020, Red Hat, Inc., and individual contributors\n+ * as indicated by the @author tags. See the copyright.txt file in the\n+ * distribution for a full listing of individual contributors.\n+ *\n+ * This is free software; you can redistribute it and/or modify it\n+ * under the terms of the GNU Lesser General Public License as\n+ * published by the Free Software Foundation; either version 2.1 of\n+ * the License, or (at your option) any later version.\n+ *\n+ * This software is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this software; if not, write to the Free\n+ * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n+ * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n+ */\n+\n+package org.wildfly.test.integration.health;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+import java.io.IOException;\n+\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClientBuilder;\n+import org.apache.http.util.EntityUtils;\n+import org.jboss.arquillian.container.test.api.RunAsClient;\n+import org.jboss.arquillian.junit.Arquillian;\n+import org.jboss.as.arquillian.api.ContainerResource;\n+import org.jboss.as.arquillian.container.ManagementClient;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+/**\n+ * @author <a href=\"http://jmesnil.net/\">Jeff Mesnil</a> (c) 2018 Red Hat inc.\n+ */\n+@RunWith(Arquillian.class)\n+@RunAsClient\n+public class HealthHTTPEndpointTestCase {\n+\n+    @ContainerResource\n+    ManagementClient managementClient;\n+\n+    @Test\n+    public void testHealthEndpoint() throws Exception {\n+        testHealthEndpoint(\"/health\");\n+    }\n+\n+    @Test\n+    public void testHealthLiveEndpoint() throws Exception {\n+        testHealthEndpoint(\"/health/live\");\n+    }\n+\n+    @Test\n+    public void testHealthReadyEndpoint() throws Exception {\n+        testHealthEndpoint(\"/health/ready\");\n+    }\n+\n+    private void testHealthEndpoint(String requestPath) throws IOException {\n+        final String healthURL = \"http://\" + managementClient.getMgmtAddress() + \":\" + managementClient.getMgmtPort() + requestPath;\n+        System.out.println(\"healthURL = \" + healthURL);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aaafbd589fb35e613b158efb90d9ae5593a6c07"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgxNjM2NQ==", "bodyText": "^^^", "url": "https://github.com/wildfly/wildfly/pull/13765#discussion_r539816365", "createdAt": "2020-12-10T03:25:16Z", "author": {"login": "bstansberry"}, "path": "testsuite/integration/basic/src/test/java/org/wildfly/test/integration/health/HealthHTTPEndpointTestCase.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * JBoss, Home of Professional Open Source.\n+ * Copyright 2020, Red Hat, Inc., and individual contributors\n+ * as indicated by the @author tags. See the copyright.txt file in the\n+ * distribution for a full listing of individual contributors.\n+ *\n+ * This is free software; you can redistribute it and/or modify it\n+ * under the terms of the GNU Lesser General Public License as\n+ * published by the Free Software Foundation; either version 2.1 of\n+ * the License, or (at your option) any later version.\n+ *\n+ * This software is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this software; if not, write to the Free\n+ * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n+ * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n+ */\n+\n+package org.wildfly.test.integration.health;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+import java.io.IOException;\n+\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClientBuilder;\n+import org.apache.http.util.EntityUtils;\n+import org.jboss.arquillian.container.test.api.RunAsClient;\n+import org.jboss.arquillian.junit.Arquillian;\n+import org.jboss.as.arquillian.api.ContainerResource;\n+import org.jboss.as.arquillian.container.ManagementClient;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+/**\n+ * @author <a href=\"http://jmesnil.net/\">Jeff Mesnil</a> (c) 2018 Red Hat inc.\n+ */\n+@RunWith(Arquillian.class)\n+@RunAsClient\n+public class HealthHTTPEndpointTestCase {\n+\n+    @ContainerResource\n+    ManagementClient managementClient;\n+\n+    @Test\n+    public void testHealthEndpoint() throws Exception {\n+        testHealthEndpoint(\"/health\");\n+    }\n+\n+    @Test\n+    public void testHealthLiveEndpoint() throws Exception {\n+        testHealthEndpoint(\"/health/live\");\n+    }\n+\n+    @Test\n+    public void testHealthReadyEndpoint() throws Exception {\n+        testHealthEndpoint(\"/health/ready\");\n+    }\n+\n+    private void testHealthEndpoint(String requestPath) throws IOException {\n+        final String healthURL = \"http://\" + managementClient.getMgmtAddress() + \":\" + managementClient.getMgmtPort() + requestPath;\n+        System.out.println(\"healthURL = \" + healthURL);\n+        try (CloseableHttpClient client = HttpClientBuilder.create().build()) {\n+            CloseableHttpResponse resp = client.execute(new HttpGet(healthURL));\n+            String content = EntityUtils.toString(resp.getEntity());\n+            System.out.println(\"content = \" + content);\n+            System.out.println(resp.getStatusLine().getStatusCode());\n+            assertEquals(200, resp.getStatusLine().getStatusCode());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aaafbd589fb35e613b158efb90d9ae5593a6c07"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgxNjk1NA==", "bodyText": "Emmanuel's PR includes a JIRA number so if you add that you will avoid conflicts.", "url": "https://github.com/wildfly/wildfly/pull/13765#discussion_r539816954", "createdAt": "2020-12-10T03:26:55Z", "author": {"login": "bstansberry"}, "path": "testsuite/integration/basic/src/test/java/org/wildfly/test/integration/microprofile/opentracing/OnOffOpenTracingTestCase.java", "diffHunk": "@@ -59,6 +60,7 @@\n  *\n  * @author Jan Stourac <jstourac@redhat.com>\n  */\n+@Ignore", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aaafbd589fb35e613b158efb90d9ae5593a6c07"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5aaafbd589fb35e613b158efb90d9ae5593a6c07", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/5aaafbd589fb35e613b158efb90d9ae5593a6c07", "committedDate": "2020-12-09T15:14:00Z", "message": "host-excludes\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}, "afterCommit": {"oid": "a7bbe0c2ae25f944dac76b333ece625fb83d4774", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/a7bbe0c2ae25f944dac76b333ece625fb83d4774", "committedDate": "2020-12-10T08:35:28Z", "message": "[WFLY-14151] Move microprofile-health extension to the microprofile\nfeature pack\n\nAdd new health subsystem that provide base features to query the\napplication server healthiness using /health HTTP endpoints on the\nmanagement interface.\n\nWhen installed, the microprofile-health-smallrye subsystem will \"take\nover\" this /health HTTP endpoints and provide MicroProfile Health\nfeatures for it (including probes from application deployments).\n\nJIRA: https://issues.redhat.com/browse/WFLY-14151\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a7bbe0c2ae25f944dac76b333ece625fb83d4774", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/a7bbe0c2ae25f944dac76b333ece625fb83d4774", "committedDate": "2020-12-10T08:35:28Z", "message": "[WFLY-14151] Move microprofile-health extension to the microprofile\nfeature pack\n\nAdd new health subsystem that provide base features to query the\napplication server healthiness using /health HTTP endpoints on the\nmanagement interface.\n\nWhen installed, the microprofile-health-smallrye subsystem will \"take\nover\" this /health HTTP endpoints and provide MicroProfile Health\nfeatures for it (including probes from application deployments).\n\nJIRA: https://issues.redhat.com/browse/WFLY-14151\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}, "afterCommit": {"oid": "76d366ced400778be1187ec27c0a64d8018ec6ec", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/76d366ced400778be1187ec27c0a64d8018ec6ec", "committedDate": "2020-12-10T08:45:30Z", "message": "[WFLY-14151] Move microprofile-health extension to the microprofile\nfeature pack\n\nAdd new health subsystem that provide base features to query the\napplication server healthiness using /health HTTP endpoints on the\nmanagement interface.\n\nWhen installed, the microprofile-health-smallrye subsystem will \"take\nover\" this /health HTTP endpoints and provide MicroProfile Health\nfeatures for it (including probes from application deployments).\n\nJIRA: https://issues.redhat.com/browse/WFLY-14151\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3195a5f7253465f33a804f6844fab511cd9d9ed2", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/3195a5f7253465f33a804f6844fab511cd9d9ed2", "committedDate": "2020-12-10T11:38:34Z", "message": "[WFLY-14108] move microprofile-metrics extension to the full feature-pack\n\nby providing it through the wildfly-mp-feature-pack-galleon-common\nGalleon feature-pack.\n\nJIRA: https://issues.redhat.com/browse/WFLY-14108\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d8b07f40eacada6760b08aebfcde881ddcdeee1", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/0d8b07f40eacada6760b08aebfcde881ddcdeee1", "committedDate": "2020-12-10T11:38:48Z", "message": "[WFLY-14108] move microprofile-metrics extension to the full feature-pack\n\nAdd a `metrics` subsystem that provides base observability features\nfor the ee-feature-pack.\n\nThis subsystem will is responsible for the /metrics HTTP endpoint on the\nmanagement interface. When the `microprofile-metrics-smallrye` subsystem\nis installed, it will \"take over\" this HTTP endpoint to provide the\nMicroProfile Metrics feature on it.\n\nThis base `metrics` subsystems exposes metrics for the WildFly\nmanagement model (subsystem and deployment subtrees) as well as metrics\nfrom the JVM (using JMX to read them).\n\nJIRA: https://issues.redhat.com/browse/WFLY-14108"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70e1d012b02246530c99ae64f873885742ab8be0", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/70e1d012b02246530c99ae64f873885742ab8be0", "committedDate": "2020-12-10T11:38:48Z", "message": "[WFLY-14134] Ignore OnOffOpenTracingTestCase\n\nJIRA: https://issues.redhat.com/browse/WFLY-14134\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d07fbb12345e3ab73efdea122f2d2c6aff95645", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/5d07fbb12345e3ab73efdea122f2d2c6aff95645", "committedDate": "2020-12-10T11:40:27Z", "message": "[WFLY-14151] Move microprofile-health extension to the microprofile feature pack\n\nThis extension is no longer provided by the ee feature pack.\n\nJIRA: https://issues.redhat.com/browse/WFLY-14151\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e25e406704d80909dee57acf77ac8b27f2146487", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/e25e406704d80909dee57acf77ac8b27f2146487", "committedDate": "2020-12-10T11:40:27Z", "message": "[WFLY-14151] Move microprofile-health extension to the microprofile\nfeature pack\n\nAdd new health subsystem that provide base features to query the\napplication server healthiness using /health HTTP endpoints on the\nmanagement interface.\n\nWhen installed, the microprofile-health-smallrye subsystem will \"take\nover\" this /health HTTP endpoints and provide MicroProfile Health\nfeatures for it (including probes from application deployments).\n\nJIRA: https://issues.redhat.com/browse/WFLY-14151\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "76d366ced400778be1187ec27c0a64d8018ec6ec", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/76d366ced400778be1187ec27c0a64d8018ec6ec", "committedDate": "2020-12-10T08:45:30Z", "message": "[WFLY-14151] Move microprofile-health extension to the microprofile\nfeature pack\n\nAdd new health subsystem that provide base features to query the\napplication server healthiness using /health HTTP endpoints on the\nmanagement interface.\n\nWhen installed, the microprofile-health-smallrye subsystem will \"take\nover\" this /health HTTP endpoints and provide MicroProfile Health\nfeatures for it (including probes from application deployments).\n\nJIRA: https://issues.redhat.com/browse/WFLY-14151\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}, "afterCommit": {"oid": "e25e406704d80909dee57acf77ac8b27f2146487", "author": {"user": {"login": "jmesnil", "name": "Jeff Mesnil"}}, "url": "https://github.com/wildfly/wildfly/commit/e25e406704d80909dee57acf77ac8b27f2146487", "committedDate": "2020-12-10T11:40:27Z", "message": "[WFLY-14151] Move microprofile-health extension to the microprofile\nfeature pack\n\nAdd new health subsystem that provide base features to query the\napplication server healthiness using /health HTTP endpoints on the\nmanagement interface.\n\nWhen installed, the microprofile-health-smallrye subsystem will \"take\nover\" this /health HTTP endpoints and provide MicroProfile Health\nfeatures for it (including probes from application deployments).\n\nJIRA: https://issues.redhat.com/browse/WFLY-14151\n\nSigned-off-by: Jeff Mesnil <jmesnil@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NTc0OTk5", "url": "https://github.com/wildfly/wildfly/pull/13765#pullrequestreview-549574999", "createdAt": "2020-12-10T20:28:01Z", "commit": {"oid": "e25e406704d80909dee57acf77ac8b27f2146487"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3772, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}