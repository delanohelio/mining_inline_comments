{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5NzU4ODE3", "number": 13121, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDozMDozOVrODqAYrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxMzowNDo0MFrODvjSfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MzczMTAxOnYy", "diffSide": "RIGHT", "path": "weld/subsystem/src/main/java/org/jboss/as/weld/deployment/processors/ExternalBeanArchiveProcessor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDozMDozOVrOF5iU0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwOToyMjowOFrOF58wvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg3NTUzNg==", "bodyText": "This comment is confusing because for using the example values the code would amount to \"123abc.ear\".endsWith(\"deployment.123abc.ear\") which would never be true.", "url": "https://github.com/wildfly/wildfly/pull/13121#discussion_r395875536", "createdAt": "2020-03-20T20:30:39Z", "author": {"login": "bstansberry"}, "path": "weld/subsystem/src/main/java/org/jboss/as/weld/deployment/processors/ExternalBeanArchiveProcessor.java", "diffHunk": "@@ -162,6 +162,14 @@ public void deploy(DeploymentPhaseContext phaseContext) throws DeploymentUnitPro\n                 return;\n             }\n             for (DependencySpec dep : module.getDependencies()) {\n+                if (!(dep instanceof ModuleDependencySpec)) {\n+                    continue;\n+                }\n+                if (deploymentUnits.stream().anyMatch(d -> (((ModuleDependencySpec) dep).getName()).endsWith(d.getName()))) {\n+                    // d.getName() returns deployment.123abc.ear, whereas dep.getName() returns 123abc.ear", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b57472f80d59684c69d368283b14e92ace10f05"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMwODY2OQ==", "bodyText": "Oh yea, it's the other way around of course, my bad. Either way, I wasn't planning to keep it here, it was just a temporary explanation of why the matching works based on my debugging...", "url": "https://github.com/wildfly/wildfly/pull/13121#discussion_r396308669", "createdAt": "2020-03-23T09:22:08Z", "author": {"login": "manovotn"}, "path": "weld/subsystem/src/main/java/org/jboss/as/weld/deployment/processors/ExternalBeanArchiveProcessor.java", "diffHunk": "@@ -162,6 +162,14 @@ public void deploy(DeploymentPhaseContext phaseContext) throws DeploymentUnitPro\n                 return;\n             }\n             for (DependencySpec dep : module.getDependencies()) {\n+                if (!(dep instanceof ModuleDependencySpec)) {\n+                    continue;\n+                }\n+                if (deploymentUnits.stream().anyMatch(d -> (((ModuleDependencySpec) dep).getName()).endsWith(d.getName()))) {\n+                    // d.getName() returns deployment.123abc.ear, whereas dep.getName() returns 123abc.ear", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg3NTUzNg=="}, "originalCommit": {"oid": "5b57472f80d59684c69d368283b14e92ace10f05"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMTg3ODM4OnYy", "diffSide": "RIGHT", "path": "weld/subsystem/src/main/java/org/jboss/as/weld/deployment/processors/ExternalBeanArchiveProcessor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxMzowNDo0MFrOGCCh-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxMzowNDo0MFrOGCCh-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc5MTgwMQ==", "bodyText": "My only \"maybe\" suggestion is earlier in this method when looping through the DeploymentUnits, built up a Set containing \"deployment.\" + d.getName().  Then here just do a contains check against that set.", "url": "https://github.com/wildfly/wildfly/pull/13121#discussion_r404791801", "createdAt": "2020-04-07T13:04:40Z", "author": {"login": "bstansberry"}, "path": "weld/subsystem/src/main/java/org/jboss/as/weld/deployment/processors/ExternalBeanArchiveProcessor.java", "diffHunk": "@@ -162,6 +162,14 @@ public void deploy(DeploymentPhaseContext phaseContext) throws DeploymentUnitPro\n                 return;\n             }\n             for (DependencySpec dep : module.getDependencies()) {\n+                if (!(dep instanceof ModuleDependencySpec)) {\n+                    continue;\n+                }\n+                if (deploymentUnits.stream().anyMatch(d -> (((ModuleDependencySpec) dep).getName()).endsWith(d.getName()))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52af6b598178e57db1ca98dfef3b4adfd4dafaf6"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3934, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}