{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3MjkzNTMw", "number": 13020, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwNzoxMTowM1rODt0u5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwNzoxMTowM1rODt0u5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5Mzc2NDg3OnYy", "diffSide": "RIGHT", "path": "galleon-pack/src/main/resources/packages/docs.examples/content/docs/examples/enable-microprofile.cli", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwNzoxMTowM1rOF_eCVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwODoyMzowNVrOF_gYtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjA5NjcyNQ==", "bodyText": "What about slimming the ApplicationRealm so it is just about default SSL, as Darran suggested in the analysis.", "url": "https://github.com/wildfly/wildfly/pull/13020#discussion_r402096725", "createdAt": "2020-04-02T07:11:03Z", "author": {"login": "OndrejKotek"}, "path": "galleon-pack/src/main/resources/packages/docs.examples/content/docs/examples/enable-microprofile.cli", "diffHunk": "@@ -0,0 +1,59 @@\n+# This CLI script allows to enable Microprofile for the standalone configurations.\n+# By default, standalone.xml is updated.\n+# Run it from JBOSS_HOME as:\n+# bin/jboss-cli.sh --file=docs/examples/enable-microprofile.cli [-Dconfig=<standalone-full.xml|standalone-ha.xml|standalone-full-ha.xml>]\n+\n+embed-server --server-config=${config:standalone.xml}\n+\n+echo INFO: Updating configuration to use elytron\n+\n+/subsystem=undertow/application-security-domain=other:add(security-domain=ApplicationDomain)\n+/subsystem=ejb3/application-security-domain=other:add(security-domain=ApplicationDomain)\n+/subsystem=batch-jberet:write-attribute(name=security-domain, value=ApplicationDomain)\n+\n+# This applies to full configurations only.\n+if (outcome == success) of /subsystem=messaging-activemq/server=default:read-resource\n+  /subsystem=messaging-activemq/server=default:undefine-attribute(name=security-domain)\n+  /subsystem=messaging-activemq/server=default:write-attribute(name=elytron-domain, value=ApplicationDomain)\n+end-if\n+\n+/subsystem=remoting/http-connector=http-remoting-connector:write-attribute(name=sasl-authentication-factory, value=application-sasl-authentication)\n+/subsystem=remoting/http-connector=http-remoting-connector:undefine-attribute(name=security-realm)\n+\n+/core-service=management/access=identity:add(security-domain=ManagementDomain)\n+/core-service=management/management-interface=http-interface:write-attribute(name=http-upgrade,value={enabled=true, sasl-authentication-factory=management-sasl-authentication})\n+/core-service=management/management-interface=http-interface:write-attribute(name=http-authentication-factory,value=management-http-authentication)\n+/core-service=management/management-interface=http-interface:undefine-attribute(name=security-realm)\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc5b40b38fb1344b9450977a447a9227a86bdff3"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjEzNTIyMQ==", "bodyText": "@OndrejKotek , the http-invoker references the ApplicationRealm, to be able to remove the authentication part we would need to introduce an http-authentication factory as defined in the analysis: https://github.com/wildfly/wildfly-proposals/pull/294/files#diff-f4f1c6de1cff1faeef00be5fbe9ef028R82", "url": "https://github.com/wildfly/wildfly/pull/13020#discussion_r402135221", "createdAt": "2020-04-02T08:23:05Z", "author": {"login": "jfdenise"}, "path": "galleon-pack/src/main/resources/packages/docs.examples/content/docs/examples/enable-microprofile.cli", "diffHunk": "@@ -0,0 +1,59 @@\n+# This CLI script allows to enable Microprofile for the standalone configurations.\n+# By default, standalone.xml is updated.\n+# Run it from JBOSS_HOME as:\n+# bin/jboss-cli.sh --file=docs/examples/enable-microprofile.cli [-Dconfig=<standalone-full.xml|standalone-ha.xml|standalone-full-ha.xml>]\n+\n+embed-server --server-config=${config:standalone.xml}\n+\n+echo INFO: Updating configuration to use elytron\n+\n+/subsystem=undertow/application-security-domain=other:add(security-domain=ApplicationDomain)\n+/subsystem=ejb3/application-security-domain=other:add(security-domain=ApplicationDomain)\n+/subsystem=batch-jberet:write-attribute(name=security-domain, value=ApplicationDomain)\n+\n+# This applies to full configurations only.\n+if (outcome == success) of /subsystem=messaging-activemq/server=default:read-resource\n+  /subsystem=messaging-activemq/server=default:undefine-attribute(name=security-domain)\n+  /subsystem=messaging-activemq/server=default:write-attribute(name=elytron-domain, value=ApplicationDomain)\n+end-if\n+\n+/subsystem=remoting/http-connector=http-remoting-connector:write-attribute(name=sasl-authentication-factory, value=application-sasl-authentication)\n+/subsystem=remoting/http-connector=http-remoting-connector:undefine-attribute(name=security-realm)\n+\n+/core-service=management/access=identity:add(security-domain=ManagementDomain)\n+/core-service=management/management-interface=http-interface:write-attribute(name=http-upgrade,value={enabled=true, sasl-authentication-factory=management-sasl-authentication})\n+/core-service=management/management-interface=http-interface:write-attribute(name=http-authentication-factory,value=management-http-authentication)\n+/core-service=management/management-interface=http-interface:undefine-attribute(name=security-realm)\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjA5NjcyNQ=="}, "originalCommit": {"oid": "dc5b40b38fb1344b9450977a447a9227a86bdff3"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3977, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}