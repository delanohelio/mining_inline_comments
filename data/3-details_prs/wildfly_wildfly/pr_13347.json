{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3NjY4Njc0", "number": 13347, "title": "WFLY-11999 Wildfly creates to many instances of all web service classes", "bodyText": "Issue: https://issues.redhat.com/browse/WFLY-11999", "createdAt": "2020-06-04T08:21:03Z", "url": "https://github.com/wildfly/wildfly/pull/13347", "merged": true, "mergeCommit": {"oid": "a0c550e90998b3f6a8150f3c0120f0e106b6a2bc"}, "closed": true, "closedAt": "2020-12-08T17:25:50Z", "author": {"login": "parsharma"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpOUndABqjM0MTk0ODUxOTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkNexQgFqTU0NzQ1NjQzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "552a2a65f03509fa2efe68def4cd70708aa14de2", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/552a2a65f03509fa2efe68def4cd70708aa14de2", "committedDate": "2020-06-04T08:18:57Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}, "afterCommit": {"oid": "e229a77068694481cce1551630caf1ddaeed1be5", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/e229a77068694481cce1551630caf1ddaeed1be5", "committedDate": "2020-06-08T10:57:29Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e229a77068694481cce1551630caf1ddaeed1be5", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/e229a77068694481cce1551630caf1ddaeed1be5", "committedDate": "2020-06-08T10:57:29Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}, "afterCommit": {"oid": "01ef8dc1d2b8bd83b2fe36bbff1f3d67e96c6f2f", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/01ef8dc1d2b8bd83b2fe36bbff1f3d67e96c6f2f", "committedDate": "2020-06-09T04:11:32Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01ef8dc1d2b8bd83b2fe36bbff1f3d67e96c6f2f", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/01ef8dc1d2b8bd83b2fe36bbff1f3d67e96c6f2f", "committedDate": "2020-06-09T04:11:32Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}, "afterCommit": {"oid": "e7e75ca4e257d70fb30f5b410f97d33f61475910", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/e7e75ca4e257d70fb30f5b410f97d33f61475910", "committedDate": "2020-06-30T16:10:19Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e7e75ca4e257d70fb30f5b410f97d33f61475910", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/e7e75ca4e257d70fb30f5b410f97d33f61475910", "committedDate": "2020-06-30T16:10:19Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}, "afterCommit": {"oid": "bb5f3510f93ea8e39b24ec9ec23a8e97ca68c821", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/bb5f3510f93ea8e39b24ec9ec23a8e97ca68c821", "committedDate": "2020-06-30T16:19:00Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bb5f3510f93ea8e39b24ec9ec23a8e97ca68c821", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/bb5f3510f93ea8e39b24ec9ec23a8e97ca68c821", "committedDate": "2020-06-30T16:19:00Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}, "afterCommit": {"oid": "827b3a6ef020eab54a639c989ab6f0f56ef76505", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/827b3a6ef020eab54a639c989ab6f0f56ef76505", "committedDate": "2020-07-02T18:32:37Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "827b3a6ef020eab54a639c989ab6f0f56ef76505", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/827b3a6ef020eab54a639c989ab6f0f56ef76505", "committedDate": "2020-07-02T18:32:37Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}, "afterCommit": {"oid": "f84b1bf857b188e16c2c3e8a8e780339dbb738a3", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/f84b1bf857b188e16c2c3e8a8e780339dbb738a3", "committedDate": "2020-07-10T12:34:01Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MzgxMTgy", "url": "https://github.com/wildfly/wildfly/pull/13347#pullrequestreview-446381182", "createdAt": "2020-07-10T13:01:05Z", "commit": {"oid": "f84b1bf857b188e16c2c3e8a8e780339dbb738a3"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxMzowMTowNVrOGv2bXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxMzowNDozNlrOGv2iXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjgyNzk5Ng==", "bodyText": "This can probably be deleted?", "url": "https://github.com/wildfly/wildfly/pull/13347#discussion_r452827996", "createdAt": "2020-07-10T13:01:05Z", "author": {"login": "kabir"}, "path": "testsuite/integration/ws/src/test/java/org/jboss/as/test/integration/ws/basic/InstanceCountEndpointTestcase.java", "diffHunk": "@@ -0,0 +1,56 @@\n+package org.jboss.as.test.integration.ws.basic;\n+\n+import org.jboss.arquillian.container.test.api.Deployment;\n+import org.jboss.arquillian.container.test.api.RunAsClient;\n+import org.jboss.arquillian.junit.Arquillian;\n+import org.jboss.arquillian.test.api.ArquillianResource;\n+import org.jboss.shrinkwrap.api.Archive;\n+import org.jboss.shrinkwrap.api.ShrinkWrap;\n+import org.jboss.shrinkwrap.api.spec.JavaArchive;\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+import javax.xml.namespace.QName;\n+import javax.xml.ws.Service;\n+import java.net.URL;\n+\n+\n+@RunWith(Arquillian.class)\n+@RunAsClient\n+public class InstanceCountEndpointTestcase {\n+\n+\n+    public static final String ARCHIVE_NAME = \"instanceCountWebservice\";\n+\n+    @ArquillianResource\n+    URL baseUrl;\n+\n+    @Deployment\n+    public static Archive<?> deployment() {\n+        JavaArchive jar = ShrinkWrap.create(JavaArchive.class, ARCHIVE_NAME + \".jar\")\n+                .addClasses(InstanceCountEndpoint.class, InstanceCountEndpointIface.class);\n+        //.addClasses(EndpointIface.class, EJBEndpoint.class, HelloObject.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f84b1bf857b188e16c2c3e8a8e780339dbb738a3"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjgyODA3Nw==", "bodyText": "More cruft?", "url": "https://github.com/wildfly/wildfly/pull/13347#discussion_r452828077", "createdAt": "2020-07-10T13:01:15Z", "author": {"login": "kabir"}, "path": "testsuite/integration/ws/src/test/java/org/jboss/as/test/integration/ws/basic/InstanceCountEndpointTestcase.java", "diffHunk": "@@ -0,0 +1,56 @@\n+package org.jboss.as.test.integration.ws.basic;\n+\n+import org.jboss.arquillian.container.test.api.Deployment;\n+import org.jboss.arquillian.container.test.api.RunAsClient;\n+import org.jboss.arquillian.junit.Arquillian;\n+import org.jboss.arquillian.test.api.ArquillianResource;\n+import org.jboss.shrinkwrap.api.Archive;\n+import org.jboss.shrinkwrap.api.ShrinkWrap;\n+import org.jboss.shrinkwrap.api.spec.JavaArchive;\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+import javax.xml.namespace.QName;\n+import javax.xml.ws.Service;\n+import java.net.URL;\n+\n+\n+@RunWith(Arquillian.class)\n+@RunAsClient\n+public class InstanceCountEndpointTestcase {\n+\n+\n+    public static final String ARCHIVE_NAME = \"instanceCountWebservice\";\n+\n+    @ArquillianResource\n+    URL baseUrl;\n+\n+    @Deployment\n+    public static Archive<?> deployment() {\n+        JavaArchive jar = ShrinkWrap.create(JavaArchive.class, ARCHIVE_NAME + \".jar\")\n+                .addClasses(InstanceCountEndpoint.class, InstanceCountEndpointIface.class);\n+        //.addClasses(EndpointIface.class, EJBEndpoint.class, HelloObject.class);\n+        return jar;\n+    }\n+\n+    /*@Deployment\n+    public static Archive<?> deploy() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f84b1bf857b188e16c2c3e8a8e780339dbb738a3"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjgyOTc5MQ==", "bodyText": "More cruft :)", "url": "https://github.com/wildfly/wildfly/pull/13347#discussion_r452829791", "createdAt": "2020-07-10T13:04:36Z", "author": {"login": "kabir"}, "path": "webservices/server-integration/src/main/java/org/jboss/as/webservices/invocation/AbstractInvocationHandler.java", "diffHunk": "@@ -129,21 +124,22 @@ public void invokeInternal(final Endpoint endpoint, final Invocation wsInvocatio\n         // prepare invocation data\n         final ComponentView componentView = getComponentView();\n         Component component = componentView.getComponent();\n-        // in case of @FactoryType annotation we don't need to go into EE interceptors\n         final boolean forceTargetBean = (wsInvocation.getInvocationContext().getProperty(\"forceTargetBean\") != null);\n-        if (forceTargetBean) {\n-            this.reference = new ManagedReference() {\n-                public void release() {\n-                }\n+        boolean isWeldDeployment =  endpoint.getProperty(WELD_DEPLOYMENT) == null ? false : (Boolean) endpoint.getProperty(WELD_DEPLOYMENT);\n+        if (forceTargetBean || !isWeldDeployment && endpoint.getType() == EndpointType.JAXWS_JSE) {\n+       // if (wsInvocation.getInvocationContext().getTargetBean() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f84b1bf857b188e16c2c3e8a8e780339dbb738a3"}, "originalPosition": 42}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f84b1bf857b188e16c2c3e8a8e780339dbb738a3", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/f84b1bf857b188e16c2c3e8a8e780339dbb738a3", "committedDate": "2020-07-10T12:34:01Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}, "afterCommit": {"oid": "b597907f86472b5d81c79cef32383cb193a31445", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/b597907f86472b5d81c79cef32383cb193a31445", "committedDate": "2020-07-10T15:44:43Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b597907f86472b5d81c79cef32383cb193a31445", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/b597907f86472b5d81c79cef32383cb193a31445", "committedDate": "2020-07-10T15:44:43Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}, "afterCommit": {"oid": "b38d21c98b77a8d84eaea4b17b16d6396822e6af", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/b38d21c98b77a8d84eaea4b17b16d6396822e6af", "committedDate": "2020-07-10T15:47:42Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b38d21c98b77a8d84eaea4b17b16d6396822e6af", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/b38d21c98b77a8d84eaea4b17b16d6396822e6af", "committedDate": "2020-07-10T15:47:42Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}, "afterCommit": {"oid": "b875d2b1cdbce01e0e5d6e9f375e34303ebae3e7", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/b875d2b1cdbce01e0e5d6e9f375e34303ebae3e7", "committedDate": "2020-07-13T10:34:25Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b875d2b1cdbce01e0e5d6e9f375e34303ebae3e7", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/b875d2b1cdbce01e0e5d6e9f375e34303ebae3e7", "committedDate": "2020-07-13T10:34:25Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}, "afterCommit": {"oid": "5db82d14cb82d01842b9e814485ee48c15ece631", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/5db82d14cb82d01842b9e814485ee48c15ece631", "committedDate": "2020-07-17T10:03:41Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5db82d14cb82d01842b9e814485ee48c15ece631", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/5db82d14cb82d01842b9e814485ee48c15ece631", "committedDate": "2020-07-17T10:03:41Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}, "afterCommit": {"oid": "dd0381316a0457e145ac822e575cc2d72b03b6ad", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/dd0381316a0457e145ac822e575cc2d72b03b6ad", "committedDate": "2020-09-14T01:32:52Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dd0381316a0457e145ac822e575cc2d72b03b6ad", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/dd0381316a0457e145ac822e575cc2d72b03b6ad", "committedDate": "2020-09-14T01:32:52Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}, "afterCommit": {"oid": "c1ff2918098447e6d5bc4d9ed74940608030f0eb", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/c1ff2918098447e6d5bc4d9ed74940608030f0eb", "committedDate": "2020-09-14T05:14:24Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NzE4MzYw", "url": "https://github.com/wildfly/wildfly/pull/13347#pullrequestreview-545718360", "createdAt": "2020-12-06T15:35:01Z", "commit": {"oid": "c1ff2918098447e6d5bc4d9ed74940608030f0eb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQxNTozNTowMVrOIALuBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQxNTozNTowMVrOIALuBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA2MjkxOQ==", "bodyText": "@parsharma This line was removed from this file in other work recently and I think this line probably crept back in during a merge or rebase or something. I don't see anything in the rest of the PR that would require it so I suspect it wasn't intentionally part of this commit.\nI believe removing this will allow this PR to build. If you do that and the PR passes CI please ping me in chat so I can make sure it gets merged.", "url": "https://github.com/wildfly/wildfly/pull/13347#discussion_r537062919", "createdAt": "2020-12-06T15:35:01Z", "author": {"login": "bstansberry"}, "path": "ee-feature-pack/common/src/main/resources/modules/system/layers/base/org/jboss/as/webservices/main/module.xml", "diffHunk": "@@ -72,5 +72,8 @@\n         <module name=\"io.undertow.servlet\"/>\n         <module name=\"org.wildfly.transaction.client\"/>\n         <module name=\"javax.transaction.api\"/>\n+        <module name=\"javax.xml.rpc.api\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1ff2918098447e6d5bc4d9ed74940608030f0eb"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9dff1ff96d59f0a7efcdaea663a19aeb2e7d56de", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/9dff1ff96d59f0a7efcdaea663a19aeb2e7d56de", "committedDate": "2020-12-08T06:09:22Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c1ff2918098447e6d5bc4d9ed74940608030f0eb", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/c1ff2918098447e6d5bc4d9ed74940608030f0eb", "committedDate": "2020-09-14T05:14:24Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}, "afterCommit": {"oid": "9dff1ff96d59f0a7efcdaea663a19aeb2e7d56de", "author": {"user": {"login": "parsharma", "name": "Parul Sharma"}}, "url": "https://github.com/wildfly/wildfly/commit/9dff1ff96d59f0a7efcdaea663a19aeb2e7d56de", "committedDate": "2020-12-08T06:09:22Z", "message": "WFLY-11999 Wildfly creates to many instances of all web service classes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NDU2NDMw", "url": "https://github.com/wildfly/wildfly/pull/13347#pullrequestreview-547456430", "createdAt": "2020-12-08T17:20:53Z", "commit": {"oid": "9dff1ff96d59f0a7efcdaea663a19aeb2e7d56de"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3997, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}