{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1NjAxNTYx", "number": 13560, "title": "WFLY-13854 WildFly cannot connect to an infinispan-server cluster req\u2026", "bodyText": "\u2026uiring authentication using properties\nResolves\nhttps://issues.redhat.com/browse/WFLY-13854", "createdAt": "2020-09-12T00:36:55Z", "url": "https://github.com/wildfly/wildfly/pull/13560", "merged": true, "mergeCommit": {"oid": "e7422617a9511192677c861f04e0bda667303444"}, "closed": true, "closedAt": "2020-09-16T02:46:33Z", "author": {"login": "rhusar"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdIG3dPABqjM3NTkxNTAzMTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJKsmPgFqTQ4ODg3NzYyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "346dd1d9ddd1c8d3f572e15b99ca7db9b91952d4", "author": {"user": {"login": "rhusar", "name": "Radoslav Husar"}}, "url": "https://github.com/wildfly/wildfly/commit/346dd1d9ddd1c8d3f572e15b99ca7db9b91952d4", "committedDate": "2020-09-12T00:34:44Z", "message": "WFLY-13854 WildFly cannot connect to an infinispan-server cluster requiring authentication using properties"}, "afterCommit": {"oid": "384613555d9eb92c234b0b0f7323674349751175", "author": {"user": {"login": "rhusar", "name": "Radoslav Husar"}}, "url": "https://github.com/wildfly/wildfly/commit/384613555d9eb92c234b0b0f7323674349751175", "committedDate": "2020-09-12T09:48:20Z", "message": "WFLY-13854 WildFly cannot connect to an infinispan-server cluster requiring authentication using properties"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d7ea149c0cc80d85f132670280b859eb6e6212f4", "author": {"user": {"login": "pferraro", "name": "Paul Ferraro"}}, "url": "https://github.com/wildfly/wildfly/commit/d7ea149c0cc80d85f132670280b859eb6e6212f4", "committedDate": "2020-09-14T19:41:30Z", "message": "Apply adhoc properties after formal security configuration, but before everything else. (#8)"}, "afterCommit": {"oid": "ad7bcc6b1a60f15d588153c71c6169fe0c6b3cda", "author": {"user": {"login": "rhusar", "name": "Radoslav Husar"}}, "url": "https://github.com/wildfly/wildfly/commit/ad7bcc6b1a60f15d588153c71c6169fe0c6b3cda", "committedDate": "2020-09-14T19:43:32Z", "message": "WFLY-13854 WildFly cannot connect to an infinispan-server cluster requiring authentication using properties\n\nApply adhoc properties after formal security configuration, but before everything else. (#8)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MTI4MzYz", "url": "https://github.com/wildfly/wildfly/pull/13560#pullrequestreview-488128363", "createdAt": "2020-09-14T20:46:35Z", "commit": {"oid": "ad7bcc6b1a60f15d588153c71c6169fe0c6b3cda"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMDo0NjozNlrOHRl-Hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMDo1MToyMFrOHRmHaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIwOTk1MA==", "bodyText": "Given that this is a map attribute, when is this value ever FALSE?\nWhy not use DiscarcAttributeChecker.UNDEFINED?", "url": "https://github.com/wildfly/wildfly/pull/13560#discussion_r488209950", "createdAt": "2020-09-14T20:46:36Z", "author": {"login": "pferraro"}, "path": "clustering/infinispan/extension/src/main/java/org/jboss/as/clustering/infinispan/subsystem/remote/RemoteCacheContainerResourceDefinition.java", "diffHunk": "@@ -147,6 +156,12 @@ public static void buildTransformation(ModelVersion version, ResourceTransformat\n         } else {\n             ResourceTransformationDescriptionBuilder builder = parent.addChildResource(RemoteCacheContainerResourceDefinition.WILDCARD_PATH);\n \n+            if (InfinispanModel.VERSION_13_0_0.requiresTransformation(version)) {\n+                builder.getAttributeBuilder()\n+                        .setDiscard(new DiscardAttributeValueChecker(false, true, ModelNode.FALSE), Attribute.PROPERTIES.getDefinition())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad7bcc6b1a60f15d588153c71c6169fe0c6b3cda"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIxMjMzMQ==", "bodyText": "N.B. Once we upgrade to jboss-dmr 1.6.x, we can replace this with:\nfor (Property property : Attribute.PROPERTIES.resolveModelAttribute(context, model).asPropertyListOrEmpty())", "url": "https://github.com/wildfly/wildfly/pull/13560#discussion_r488212331", "createdAt": "2020-09-14T20:51:20Z", "author": {"login": "pferraro"}, "path": "clustering/infinispan/extension/src/main/java/org/jboss/as/clustering/infinispan/subsystem/remote/RemoteCacheContainerConfigurationServiceConfigurator.java", "diffHunk": "@@ -135,6 +140,11 @@ public ServiceConfigurator configure(OperationContext context, ModelNode model)\n \n         this.server = context.hasOptionalCapability(CommonRequirement.MBEAN_SERVER.getName(), null, null) ? new ServiceSupplierDependency<>(CommonRequirement.MBEAN_SERVER.getServiceName(context)) : null;\n \n+        this.properties.clear();\n+        for (Property property : ModelNodes.optionalPropertyList(Attribute.PROPERTIES.resolveModelAttribute(context, model)).orElse(Collections.emptyList())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad7bcc6b1a60f15d588153c71c6169fe0c6b3cda"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69cdb4acdd42e8c43414d94acf21d5e601d46358", "author": {"user": {"login": "rhusar", "name": "Radoslav Husar"}}, "url": "https://github.com/wildfly/wildfly/commit/69cdb4acdd42e8c43414d94acf21d5e601d46358", "committedDate": "2020-09-14T22:45:52Z", "message": "WFLY-13854 WildFly cannot connect to an infinispan-server cluster requiring authentication using properties\n\nApply adhoc properties after formal security configuration, but before everything else. (#8)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ad7bcc6b1a60f15d588153c71c6169fe0c6b3cda", "author": {"user": {"login": "rhusar", "name": "Radoslav Husar"}}, "url": "https://github.com/wildfly/wildfly/commit/ad7bcc6b1a60f15d588153c71c6169fe0c6b3cda", "committedDate": "2020-09-14T19:43:32Z", "message": "WFLY-13854 WildFly cannot connect to an infinispan-server cluster requiring authentication using properties\n\nApply adhoc properties after formal security configuration, but before everything else. (#8)"}, "afterCommit": {"oid": "69cdb4acdd42e8c43414d94acf21d5e601d46358", "author": {"user": {"login": "rhusar", "name": "Radoslav Husar"}}, "url": "https://github.com/wildfly/wildfly/commit/69cdb4acdd42e8c43414d94acf21d5e601d46358", "committedDate": "2020-09-14T22:45:52Z", "message": "WFLY-13854 WildFly cannot connect to an infinispan-server cluster requiring authentication using properties\n\nApply adhoc properties after formal security configuration, but before everything else. (#8)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4ODc3NjI1", "url": "https://github.com/wildfly/wildfly/pull/13560#pullrequestreview-488877625", "createdAt": "2020-09-15T16:50:19Z", "commit": {"oid": "69cdb4acdd42e8c43414d94acf21d5e601d46358"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3884, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}