{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NjI5NzI0", "number": 13029, "title": "[WFLY-13142]: Can't create a Connection Factory using Jgroups discovery", "bodyText": "Fixing the way we read discovery-group resources that are now at a\n'new' address.\n\nJira: https://issues.redhat.com/browse/WFLY-13142", "createdAt": "2020-02-20T08:58:42Z", "url": "https://github.com/wildfly/wildfly/pull/13029", "merged": true, "mergeCommit": {"oid": "f649bd58e8ffd958c64b9b8af63a9384a28b8c78"}, "closed": true, "closedAt": "2020-03-01T17:15:02Z", "author": {"login": "ehsavoie"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHxt_WAFqTM2NDExOTg1MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJcXmNgFqTM2Njg3MzEzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MTE5ODUx", "url": "https://github.com/wildfly/wildfly/pull/13029#pullrequestreview-364119851", "createdAt": "2020-02-25T12:59:08Z", "commit": {"oid": "172be946f52edc521cd6521439306aabc6f695e2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMjo1OTowOFrOFuFGoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMjo1OTowOFrOFuFGoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg2MjQzMg==", "bodyText": "Formatting: we use 4 spaces.", "url": "https://github.com/wildfly/wildfly/pull/13029#discussion_r383862432", "createdAt": "2020-02-25T12:59:08Z", "author": {"login": "rhusar"}, "path": "messaging-activemq/src/main/java/org/wildfly/extension/messaging/activemq/jms/ExternalConnectionFactoryAdd.java", "diffHunk": "@@ -91,8 +90,12 @@ protected void performRuntime(OperationContext context, ModelNode operation, Mod\n             Map<String, Supplier<CommandDispatcherFactory>> commandDispatcherFactories = new HashMap<>();\n             final String dgname = discoveryGroupName.asString();\n             final String key = \"discovery\" + dgname;\n-            PathAddress dgAddress = context.getCurrentAddress().getParent().append(DISCOVERY_GROUP, dgname);\n-            ModelNode discoveryGroupModel = context.readResourceFromRoot(dgAddress).getModel();\n+            ModelNode discoveryGroupModel;\n+            try {\n+               discoveryGroupModel = context.readResourceFromRoot(context.getCurrentAddress().getParent().append(JGROUPS_DISCOVERY_GROUP, dgname)).getModel();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "172be946f52edc521cd6521439306aabc6f695e2"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MTIwMDI1", "url": "https://github.com/wildfly/wildfly/pull/13029#pullrequestreview-364120025", "createdAt": "2020-02-25T12:59:23Z", "commit": {"oid": "172be946f52edc521cd6521439306aabc6f695e2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMjo1OToyNFrOFuFHKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMjo1OToyNFrOFuFHKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg2MjU2OQ==", "bodyText": "Formatting: we use 4 spaces.", "url": "https://github.com/wildfly/wildfly/pull/13029#discussion_r383862569", "createdAt": "2020-02-25T12:59:24Z", "author": {"login": "rhusar"}, "path": "messaging-activemq/src/main/java/org/wildfly/extension/messaging/activemq/jms/PooledConnectionFactoryAdd.java", "diffHunk": "@@ -99,8 +99,12 @@ protected void performRuntime(OperationContext context, ModelNode operation, Res\n         String jgroupClusterName = null;\n         final PathAddress serverAddress = MessagingServices.getActiveMQServerPathAddress(address);\n         if (discoveryGroupName != null) {\n-            PathAddress dgAddress = serverAddress.append(CommonAttributes.DISCOVERY_GROUP, discoveryGroupName);\n-            Resource dgResource = context.readResourceFromRoot(dgAddress, false);\n+            Resource dgResource;\n+            try {\n+               dgResource = context.readResourceFromRoot(serverAddress.append(CommonAttributes.SOCKET_DISCOVERY_GROUP, discoveryGroupName), false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "172be946f52edc521cd6521439306aabc6f695e2"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2251f11e3a7f5b007419a9b583478fbfdabbb18", "author": {"user": {"login": "ehsavoie", "name": "Emmanuel Hugonnet"}}, "url": "https://github.com/wildfly/wildfly/commit/f2251f11e3a7f5b007419a9b583478fbfdabbb18", "committedDate": "2020-02-26T09:32:54Z", "message": "[WFLY-13142]: Can't create a Connection Factory using Jgroups discovery\n\n* Fixing the way we read discovery-group resources that are now at a\n  'new' address.\n\nJira: https://issues.redhat.com/browse/WFLY-13142\n\nSigned-off-by: Emmanuel Hugonnet <ehugonne@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "172be946f52edc521cd6521439306aabc6f695e2", "author": {"user": {"login": "ehsavoie", "name": "Emmanuel Hugonnet"}}, "url": "https://github.com/wildfly/wildfly/commit/172be946f52edc521cd6521439306aabc6f695e2", "committedDate": "2020-02-20T08:57:15Z", "message": "[WFLY-13142]: Can't create a Connection Factory using Jgroups discovery\n\n* Fixing the way we read discovery-group resources that are now at a\n  'new' address.\n\nJira: https://issues.redhat.com/browse/WFLY-13142\n\nSigned-off-by: Emmanuel Hugonnet <ehugonne@redhat.com>"}, "afterCommit": {"oid": "f2251f11e3a7f5b007419a9b583478fbfdabbb18", "author": {"user": {"login": "ehsavoie", "name": "Emmanuel Hugonnet"}}, "url": "https://github.com/wildfly/wildfly/commit/f2251f11e3a7f5b007419a9b583478fbfdabbb18", "committedDate": "2020-02-26T09:32:54Z", "message": "[WFLY-13142]: Can't create a Connection Factory using Jgroups discovery\n\n* Fixing the way we read discovery-group resources that are now at a\n  'new' address.\n\nJira: https://issues.redhat.com/browse/WFLY-13142\n\nSigned-off-by: Emmanuel Hugonnet <ehugonne@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODczMTMx", "url": "https://github.com/wildfly/wildfly/pull/13029#pullrequestreview-366873131", "createdAt": "2020-03-01T17:14:32Z", "commit": {"oid": "f2251f11e3a7f5b007419a9b583478fbfdabbb18"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3628, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}