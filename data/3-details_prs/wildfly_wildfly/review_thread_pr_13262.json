{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyOTc0NzA3", "number": 13262, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNzo0MzowM1rOD6Wl0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNzo0MzowM1rOD6Wl0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNTE0MTMxOnYy", "diffSide": "RIGHT", "path": "messaging-activemq/src/main/java/org/wildfly/extension/messaging/activemq/deployment/JMSConnectionFactoryDefinitionInjectionSource.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNzo0MzowM1rOGSJWUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNzo0MzowM1rOGSJWUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4MDcyMw==", "bodyText": "Minor point; ignore if you want -- this L435-437 block duplicates L423-425 and could be dropped if this entire new code block from L426 was moved above L423.", "url": "https://github.com/wildfly/wildfly/pull/13262#discussion_r421680723", "createdAt": "2020-05-07T17:43:03Z", "author": {"login": "bstansberry"}, "path": "messaging-activemq/src/main/java/org/wildfly/extension/messaging/activemq/deployment/JMSConnectionFactoryDefinitionInjectionSource.java", "diffHunk": "@@ -420,6 +423,21 @@ static String getDefaulResourceAdapter(DeploymentUnit deploymentUnit) {\n                 if (pcf != null && pcf instanceof ConnectionFactoryReferenceFactoryService) {\n                     return ((ConnectionFactoryReferenceFactoryService) pcf).getName();\n                 }\n+                //In case of multiple JNDI entries only the 1st is properly bound\n+                if (pcf != null && pcf instanceof ContextListAndJndiViewManagedReferenceFactory) {\n+                    ManagedReference ref = ((ContextListAndJndiViewManagedReferenceFactory) pcf).getReference();\n+                    Object ra = ref.getInstance();\n+                    if (ra instanceof ActiveMQRAConnectionFactoryImpl) {\n+                        bindInfo = ContextNames.bindInfoFor(((ActiveMQRAConnectionFactoryImpl) ra).getReference().getClassName());\n+                        binder = deploymentUnit.getServiceRegistry().getService(bindInfo.getBinderServiceName());\n+                        if (binder != null) {\n+                            pcf = binder.getService().getValue();\n+                            if (pcf != null && pcf instanceof ConnectionFactoryReferenceFactoryService) {\n+                                return ((ConnectionFactoryReferenceFactoryService) pcf).getName();\n+                            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb45cd4e27719363ab08ee18600b04bdb1648000"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3922, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}