{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5NzgyODM3", "number": 12883, "title": "[WFLY-12473] Add instance id obfuscation in Undertow session route", "bodyText": "RFE: https://issues.redhat.com/browse/WFLY-12473\nAnalysis: wildfly/wildfly-proposals#246\nPlus:\nhttps://issues.redhat.com/browse/WFLY-13858\nhttps://issues.redhat.com/browse/WFLY-12932\nhttps://issues.redhat.com/browse/WFLY-12933", "createdAt": "2020-01-07T01:23:54Z", "url": "https://github.com/wildfly/wildfly/pull/12883", "merged": true, "mergeCommit": {"oid": "96f74904cdad9a5b3e0b61b9b00d110a50880d40"}, "closed": true, "closedAt": "2021-02-24T06:30:01Z", "author": {"login": "fl4via"}, "timelineItems": {"totalCount": 49, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb32b81ABqjI5MjYxMTE5NDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd9IDiNgFqTU5NzAyNDkzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f6f0d61b907c1d71872d7f58e648b7fd2ed7fe36", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/f6f0d61b907c1d71872d7f58e648b7fd2ed7fe36", "committedDate": "2020-01-07T01:04:41Z", "message": "[WFLY-12473] Add Undertow subsystem uuid-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "2641232a87eccdbe5921654e8433f0f798b7b49a", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/2641232a87eccdbe5921654e8433f0f798b7b49a", "committedDate": "2020-01-07T01:25:55Z", "message": "[WFLY-12473] Add Undertow subsystem uuid-instance-id attribute, update tests and documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MjQzNTk3", "url": "https://github.com/wildfly/wildfly/pull/12883#pullrequestreview-395243597", "createdAt": "2020-04-17T08:04:31Z", "commit": {"oid": "2641232a87eccdbe5921654e8433f0f798b7b49a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwODowNDozMVrOGHEBfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMDoxMToyMVrOGINMCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA1OTEzNA==", "bodyText": "@fl4via it is not clear to me if instance-id being undefined corresponds to instance-id being set to its default value ${jboss.node.name}", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r410059134", "createdAt": "2020-04-17T08:04:31Z", "author": {"login": "tommaso-borgato"}, "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/Undertow.adoc", "diffHunk": "@@ -43,6 +41,18 @@ for most use cases and provides reasonable performance settings.\n         </handlers>\n     </subsystem>\n ----\n+[cols=\",\",options=\"header\"]\n+|=======================================================================\n+|Attribute |Description\n+|default-server | the default server to use for deployments\n+|default-virtual-host | the default virtual host to use for deployments\n+|default-servlet-container | the default servlet container to use for deployments\n+|instance-id | the id of Undertow. Defaults to \"${jboss.node.name}\"\n+|uuid-instance-id | set this to true to indicate that a UUID should be used as the instance id. Can be used only when instance-id is undefined", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2641232a87eccdbe5921654e8433f0f798b7b49a"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI1Nzg2NA==", "bodyText": "@fl4via looking at default standalone-ha.xml shipped e.g. with EAP 7.3 I see that element application-security-domains is not defined by default; in all the files undertow-service-*.xml used in the tests that element is always defined: would it make sense to add one more tests with no application-security-domains?", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r411257864", "createdAt": "2020-04-20T10:11:21Z", "author": {"login": "tommaso-borgato"}, "path": "undertow/src/test/java/org/wildfly/extension/undertow/UndertowServiceTestCase.java", "diffHunk": "@@ -0,0 +1,140 @@\n+/*\n+ * JBoss, Home of Professional Open Source.\n+ * Copyright 2019, Red Hat, Inc., and individual contributors\n+ * as indicated by the @author tags. See the copyright.txt file in the\n+ * distribution for a full listing of individual contributors.\n+ *\n+ * This is free software; you can redistribute it and/or modify it\n+ * under the terms of the GNU Lesser General Public License as\n+ * published by the Free Software Foundation; either version 2.1 of\n+ * the License, or (at your option) any later version.\n+ *\n+ * This software is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this software; if not, write to the Free\n+ * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n+ * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n+ */\n+\n+package org.wildfly.extension.undertow;\n+\n+import java.io.IOException;\n+import java.util.UUID;\n+\n+import org.jboss.as.subsystem.test.KernelServices;\n+import org.jboss.as.subsystem.test.KernelServicesBuilder;\n+import org.jboss.msc.service.ServiceController;\n+import org.jboss.msc.service.ServiceName;\n+\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Test for UndertowService created from xml file.\n+ *\n+ * @author Flavia Rainone\n+ */\n+public class UndertowServiceTestCase extends AbstractUndertowSubsystemTestCase {\n+\n+    private static final String NODE_NAME = \"node-name\";\n+    private static final String DEFAULT_SERVER = \"default-server\";\n+    private static final String DEFAULT_SERVLET_CONTAINER = \"default\";\n+    private static final String DEFAULT_VIRTUAL_HOST = \"default-host\";\n+\n+    @Override\n+    protected String getSubsystemXml() throws IOException {\n+        return readResource(\"undertow-11.0.xml\");\n+    }\n+\n+    @Override\n+    protected String getSubsystemXsdPath() throws Exception {\n+        return \"schema/wildfly-undertow_11_0.xsd\";\n+    }\n+\n+    @Override\n+    protected String[] getSubsystemTemplatePaths() {\n+        return new String[] { \"/subsystem-templates/undertow.xml\" };\n+    }\n+\n+    @Before\n+    public void setUp() {\n+        setProperty();\n+        System.setProperty(\"jboss.node.name\", NODE_NAME);\n+    }\n+\n+    private UndertowService load(String xmlFile) throws Exception {\n+        KernelServicesBuilder builder = createKernelServicesBuilder(RUNTIME).setSubsystemXml(readResource(xmlFile));\n+        KernelServices mainServices = builder.build();\n+        if (!mainServices.isSuccessfulBoot()) {\n+            Throwable t = mainServices.getBootError();\n+            Assert.fail(\"Boot unsuccessful: \" + (t != null ? t.toString() : \"no boot error provided\"));\n+        }\n+        final ServiceName undertowServiceName = UndertowRootDefinition.UNDERTOW_CAPABILITY.getCapabilityServiceName();\n+        ServiceController<UndertowService> undertowServiceService = (ServiceController<UndertowService>) mainServices.getContainer().getService(undertowServiceName);\n+        assertNotNull(undertowServiceService);\n+        undertowServiceService.setMode(ServiceController.Mode.ACTIVE);\n+        final UndertowService undertowService = undertowServiceService.getValue();\n+        assertNotNull(undertowService);\n+        return undertowService;\n+    }\n+\n+    @Test\n+    public void testUndefinedAttributes() throws Exception {\n+        final UndertowService undertowService = load(\"undertow-service-undefined-attributes.xml\");\n+        assertEquals(NODE_NAME, undertowService.getInstanceId());\n+        assertFalse(undertowService.isStatisticsEnabled());\n+        assertEquals(DEFAULT_SERVER, undertowService.getDefaultServer());\n+        assertEquals(DEFAULT_SERVLET_CONTAINER, undertowService.getDefaultContainer());\n+        assertEquals(DEFAULT_VIRTUAL_HOST, undertowService.getDefaultVirtualHost());\n+    }\n+\n+    @Test\n+    public void testDefinedDefaultAttributes1() throws Exception {\n+        final UndertowService undertowService = load(\"undertow-service-defined-default-attributes1.xml\");\n+        assertEquals(NODE_NAME, undertowService.getInstanceId());\n+        assertFalse(undertowService.isStatisticsEnabled());\n+        assertEquals(DEFAULT_SERVER, undertowService.getDefaultServer());\n+        assertEquals(DEFAULT_SERVLET_CONTAINER, undertowService.getDefaultContainer());\n+        assertEquals(DEFAULT_VIRTUAL_HOST, undertowService.getDefaultVirtualHost());\n+    }\n+\n+    @Test\n+    public void testDefinedDefaultAttributes2() throws Exception {\n+        final UndertowService undertowService = load(\"undertow-service-defined-default-attributes2.xml\");\n+        assertEquals(NODE_NAME, undertowService.getInstanceId());\n+        assertFalse(undertowService.isStatisticsEnabled());\n+        assertEquals(DEFAULT_SERVER, undertowService.getDefaultServer());\n+        assertEquals(DEFAULT_SERVLET_CONTAINER, undertowService.getDefaultContainer());\n+        assertEquals(DEFAULT_VIRTUAL_HOST, undertowService.getDefaultVirtualHost());\n+    }\n+\n+    @Test\n+    public void testDefinedAttributes() throws Exception {\n+        final UndertowService undertowService = load(\"undertow-service-defined-attributes.xml\");\n+        assertEquals(NODE_NAME + \"-undertow\", undertowService.getInstanceId());\n+        assertTrue(undertowService.isStatisticsEnabled());\n+        assertEquals(\"undertow-server\", undertowService.getDefaultServer());\n+        assertEquals(\"servlet-container\", undertowService.getDefaultContainer());\n+        assertEquals(\"virtual-host\", undertowService.getDefaultVirtualHost());\n+    }\n+\n+    @Test\n+    public void testUuidInstanceId() throws Exception {\n+        final UndertowService undertowService = load(\"undertow-service-uuid-instance-id-attribute.xml\");\n+        assertNotNull(UUID.fromString(undertowService.getInstanceId()));\n+        assertFalse(undertowService.isStatisticsEnabled());\n+        assertEquals(\"undertow-server\", undertowService.getDefaultServer());\n+        assertEquals(DEFAULT_SERVLET_CONTAINER, undertowService.getDefaultContainer());\n+        assertEquals(\"virtual-host3\", undertowService.getDefaultVirtualHost());\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2641232a87eccdbe5921654e8433f0f798b7b49a"}, "originalPosition": 139}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2641232a87eccdbe5921654e8433f0f798b7b49a", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/2641232a87eccdbe5921654e8433f0f798b7b49a", "committedDate": "2020-01-07T01:25:55Z", "message": "[WFLY-12473] Add Undertow subsystem uuid-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "43ae3ad76a512b6b0064f44756a83079845dcc26", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/43ae3ad76a512b6b0064f44756a83079845dcc26", "committedDate": "2020-05-19T21:25:36Z", "message": "[WFLY-12473] Add Undertow subsystem uuid-instance-id attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43ae3ad76a512b6b0064f44756a83079845dcc26", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/43ae3ad76a512b6b0064f44756a83079845dcc26", "committedDate": "2020-05-19T21:25:36Z", "message": "[WFLY-12473] Add Undertow subsystem uuid-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "e3bea7e69e83f681a63feb599de640c132509641", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/e3bea7e69e83f681a63feb599de640c132509641", "committedDate": "2020-05-20T20:19:42Z", "message": "[WFLY-12473] Add Undertow subsystem uuid-instance-id attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e3bea7e69e83f681a63feb599de640c132509641", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/e3bea7e69e83f681a63feb599de640c132509641", "committedDate": "2020-05-20T20:19:42Z", "message": "[WFLY-12473] Add Undertow subsystem uuid-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "d4fc4048d2f609b126942dcf4b3a9a7f440cc8e2", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/d4fc4048d2f609b126942dcf4b3a9a7f440cc8e2", "committedDate": "2020-09-13T07:27:40Z", "message": "[WFLY-12473] Add Undertow subsystem uuid-instance-id attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4fc4048d2f609b126942dcf4b3a9a7f440cc8e2", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/d4fc4048d2f609b126942dcf4b3a9a7f440cc8e2", "committedDate": "2020-09-13T07:27:40Z", "message": "[WFLY-12473] Add Undertow subsystem uuid-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "f691bdd35b4e278bb1785d7025c5baa590b0096f", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/f691bdd35b4e278bb1785d7025c5baa590b0096f", "committedDate": "2020-09-13T07:37:26Z", "message": "[WFLY-12473] Add Undertow subsystem uuid-instance-id attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f691bdd35b4e278bb1785d7025c5baa590b0096f", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/f691bdd35b4e278bb1785d7025c5baa590b0096f", "committedDate": "2020-09-13T07:37:26Z", "message": "[WFLY-12473] Add Undertow subsystem uuid-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "d0da3391554c002bcc18840e1898ad2b5a5a257d", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/d0da3391554c002bcc18840e1898ad2b5a5a257d", "committedDate": "2020-09-13T08:16:56Z", "message": "[WFLY-12473] Proposed change: allow both instance-id and uuid-instance-id, whereas second attribute is defined from first attribute"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0da3391554c002bcc18840e1898ad2b5a5a257d", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/d0da3391554c002bcc18840e1898ad2b5a5a257d", "committedDate": "2020-09-13T08:16:56Z", "message": "[WFLY-12473] Proposed change: allow both instance-id and uuid-instance-id, whereas second attribute is defined from first attribute"}, "afterCommit": {"oid": "f07ce4be0da444d2ea23e33c4dd3a90272268484", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/f07ce4be0da444d2ea23e33c4dd3a90272268484", "committedDate": "2020-09-13T08:20:31Z", "message": "[WFLY-12473] Proposed change: allow both instance-id and uuid-instance-id, whereas second attribute is defined from first attribute"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f07ce4be0da444d2ea23e33c4dd3a90272268484", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/f07ce4be0da444d2ea23e33c4dd3a90272268484", "committedDate": "2020-09-13T08:20:31Z", "message": "[WFLY-12473] Proposed change: allow both instance-id and uuid-instance-id, whereas second attribute is defined from first attribute"}, "afterCommit": {"oid": "799f2113517a2b849e71fb4889ef0b6b20a3f561", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/799f2113517a2b849e71fb4889ef0b6b20a3f561", "committedDate": "2020-09-13T08:24:05Z", "message": "[WFLY-12473] Proposed change: allow both instance-id and uuid-instance-id, whereas second attribute is generated from first attribute"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "799f2113517a2b849e71fb4889ef0b6b20a3f561", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/799f2113517a2b849e71fb4889ef0b6b20a3f561", "committedDate": "2020-09-13T08:24:05Z", "message": "[WFLY-12473] Proposed change: allow both instance-id and uuid-instance-id, whereas second attribute is generated from first attribute"}, "afterCommit": {"oid": "0ecd31c7164855184cbf3539264c6107a8b5b34b", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/0ecd31c7164855184cbf3539264c6107a8b5b34b", "committedDate": "2020-09-13T08:41:19Z", "message": "[WFLY-12473] Proposed change: allow both instance-id and uuid-instance-id, whereas second attribute is generated from first attribute"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ecd31c7164855184cbf3539264c6107a8b5b34b", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/0ecd31c7164855184cbf3539264c6107a8b5b34b", "committedDate": "2020-09-13T08:41:19Z", "message": "[WFLY-12473] Proposed change: allow both instance-id and uuid-instance-id, whereas second attribute is generated from first attribute"}, "afterCommit": {"oid": "8079513af644f669f583caad74b59bdf76b12649", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/8079513af644f669f583caad74b59bdf76b12649", "committedDate": "2020-09-13T08:44:18Z", "message": "[WFLY-12473] Proposed change: allow both instance-id and uuid-instance-id, whereas second attribute is generated from first attribute"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8079513af644f669f583caad74b59bdf76b12649", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/8079513af644f669f583caad74b59bdf76b12649", "committedDate": "2020-09-13T08:44:18Z", "message": "[WFLY-12473] Proposed change: allow both instance-id and uuid-instance-id, whereas second attribute is generated from first attribute"}, "afterCommit": {"oid": "091f459bd957451f929ecd648310b25c8211749a", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/091f459bd957451f929ecd648310b25c8211749a", "committedDate": "2020-09-13T08:48:02Z", "message": "[WFLY-12473] Proposed change: allow both instance-id and uuid-instance-id, whereas second attribute is generated from first attribute"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "091f459bd957451f929ecd648310b25c8211749a", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/091f459bd957451f929ecd648310b25c8211749a", "committedDate": "2020-09-13T08:48:02Z", "message": "[WFLY-12473] Proposed change: allow both instance-id and uuid-instance-id, whereas second attribute is generated from first attribute"}, "afterCommit": {"oid": "24a32a28707af7ea6c68e5b4eb2385dc570b497b", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/24a32a28707af7ea6c68e5b4eb2385dc570b497b", "committedDate": "2020-09-13T08:51:48Z", "message": "[WFLY-12473] Proposed change: allow both instance-id and uuid-instance-id, whereas second attribute is generated from first attribute"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24a32a28707af7ea6c68e5b4eb2385dc570b497b", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/24a32a28707af7ea6c68e5b4eb2385dc570b497b", "committedDate": "2020-09-13T08:51:48Z", "message": "[WFLY-12473] Proposed change: allow both instance-id and uuid-instance-id, whereas second attribute is generated from first attribute"}, "afterCommit": {"oid": "1a92ed42b1f71c646cadd4c4d0f06c19eb876cbe", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/1a92ed42b1f71c646cadd4c4d0f06c19eb876cbe", "committedDate": "2020-09-13T08:51:43Z", "message": "[WFLY-12473] Add Undertow subsystem uuid-instance-id attribute, update tests and documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NTIyNjY3", "url": "https://github.com/wildfly/wildfly/pull/12883#pullrequestreview-489522667", "createdAt": "2020-09-16T11:18:50Z", "commit": {"oid": "1a92ed42b1f71c646cadd4c4d0f06c19eb876cbe"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMToxODo1MFrOHSsHPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMTo0MTo0OFrOHSs1qQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTM1OTE2NQ==", "bodyText": "IMO, this attribute name is no longer sufficiently descriptive, since, when enabled, the generated instance-id has nothing to do with a UUID.\nPerhaps \"obfuscate-instance-id\"?", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r489359165", "createdAt": "2020-09-16T11:18:50Z", "author": {"login": "pferraro"}, "path": "undertow/src/main/java/org/wildfly/extension/undertow/Constants.java", "diffHunk": "@@ -46,6 +46,7 @@\n     String HTTP_INVOKER = \"http-invoker\";\n     String LISTENER = \"listener\";\n     String INSTANCE_ID = \"instance-id\";\n+    String UUID_INSTANCE_ID = \"uuid-instance-id\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a92ed42b1f71c646cadd4c4d0f06c19eb876cbe"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTM2MzQ4OA==", "bodyText": "I think we want to use DiscardAttributeChecker.UNDEFINED here (and for other version transformations), since a value of true should result in rejection.", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r489363488", "createdAt": "2020-09-16T11:27:25Z", "author": {"login": "pferraro"}, "path": "undertow/src/main/java/org/wildfly/extension/undertow/UndertowTransformers.java", "diffHunk": "@@ -118,13 +120,22 @@ private static void registerTransformersWildFly18(ResourceTransformationDescript\n     }\n \n     private static void registerTransformersWildFly16(ResourceTransformationDescriptionBuilder subsystemBuilder) {\n+        subsystemBuilder.getAttributeBuilder()\n+                .addRejectCheck(RejectAttributeChecker.DEFINED, UUID_INSTANCE_ID)\n+                .setDiscard(DiscardAttributeChecker.ALWAYS, UUID_INSTANCE_ID)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a92ed42b1f71c646cadd4c4d0f06c19eb876cbe"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTM3MTA0OQ==", "bodyText": "IMO, this logic actually belongs in org.wildfly.extension.undertow.Server#getRoute().\nThe getRoute() method should obfuscate the entire route (which may also include the server name) when the obfuscation flag is enabled.", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r489371049", "createdAt": "2020-09-16T11:41:48Z", "author": {"login": "pferraro"}, "path": "undertow/src/main/java/org/wildfly/extension/undertow/UndertowSubsystemAdd.java", "diffHunk": "@@ -102,8 +105,9 @@ protected void performBoottime(OperationContext context, ModelNode operation, Re\n         final String defaultSecurityDomain = UndertowRootDefinition.DEFAULT_SECURITY_DOMAIN.resolveModelAttribute(context, model).asString();\n \n         final ModelNode instanceIdModel = UndertowRootDefinition.INSTANCE_ID.resolveModelAttribute(context, model);\n-        final String instanceId = instanceIdModel.isDefined() ? instanceIdModel.asString() : null;\n-\n+        final ModelNode uuidInstanceIdModel = UndertowRootDefinition.UUID_INSTANCE_ID.resolveModelAttribute(context, model);\n+        final String instanceId = instanceIdModel.isDefined() ? (uuidInstanceIdModel.asBoolean() ?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a92ed42b1f71c646cadd4c4d0f06c19eb876cbe"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5OTUwNzQ5", "url": "https://github.com/wildfly/wildfly/pull/12883#pullrequestreview-489950749", "createdAt": "2020-09-16T19:20:01Z", "commit": {"oid": "1a92ed42b1f71c646cadd4c4d0f06c19eb876cbe"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxOToyMDowMlrOHTAxdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxOToyMDowMlrOHTAxdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTY5NzY1Mg==", "bodyText": "These 2 instances are not incompatible, thus should not utilize setAlternatives(...).", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r489697652", "createdAt": "2020-09-16T19:20:02Z", "author": {"login": "pferraro"}, "path": "undertow/src/main/java/org/wildfly/extension/undertow/UndertowRootDefinition.java", "diffHunk": "@@ -87,6 +87,14 @@\n                     .setRestartAllServices()\n                     .setAllowExpression(true)\n                     .setDefaultValue(new ModelNode().set(new ValueExpression(\"${jboss.node.name}\")))\n+                    .setAlternatives(Constants.UUID_INSTANCE_ID)\n+                    .build();\n+    protected static final SimpleAttributeDefinition UUID_INSTANCE_ID =\n+            new SimpleAttributeDefinitionBuilder(Constants.UUID_INSTANCE_ID, ModelType.BOOLEAN, true)\n+                    .setRestartAllServices()\n+                    .setAllowExpression(true)\n+                    .setDefaultValue(ModelNode.FALSE)\n+                    .setAlternatives(Constants.INSTANCE_ID)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a92ed42b1f71c646cadd4c4d0f06c19eb876cbe"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwMjk2NDgy", "url": "https://github.com/wildfly/wildfly/pull/12883#pullrequestreview-490296482", "createdAt": "2020-09-17T07:01:55Z", "commit": {"oid": "1a92ed42b1f71c646cadd4c4d0f06c19eb876cbe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwNzowMTo1NVrOHTUJVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwNzowMTo1NVrOHTUJVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAxNTA2Mg==", "bodyText": "This just generates a base64 encoded string from the instanceIdModel value. A base64 encoded string can be easily decoded to the original value (= hostname by default). For example, the original value can be decode by the following command:\n$ echo -n <generate-encoded-value> | base64 -d\n\nSo, as this approach can not hide the actual hostname information, I think this is not what the customer wants.\nI would suggest generating a base64 encoded string from an MD5 hash digest of the instanceIdModel value. Java's name-based UUID (UUID.nameUUIDFromBytes()) is internally generated from the MD5 hash digest of the input value. So, I think this approach is the same level of uniqueness to UUID.nameUUIDFromBytes().\nAlso, Base64.Encoder generates an encoded string with padding (= by default). However, = is not allowed in V0 Cookie. So, I think it's better to use Base64.getUrlEncoder().withoutPadding() instead.\nFor example:\n        final String instanceId = instanceIdModel.isDefined() ?\n            (uuidInstanceIdModel.asBoolean() ? generateObfuscatedInstanceId(instanceIdModel.asString()) : instanceIdModel.asString()): null;\n\n    ...(snip)...\n\n    private String generateObfuscatedInstanceId(String instanceId) {\n        try {\n            MessageDigest md = MessageDigest.getInstance(\"MD5\");\n            byte[] md5Bytes = md.digest(instanceId.getBytes());\n            Base64.Encoder encoder = Base64.getUrlEncoder().withoutPadding(); // = is not allowed in V0 Cookie\n            String encodedString = encoder.encodeToString(md5Bytes);\n            UndertowLogger.ROOT_LOGGER.infof(\"Obfuscated value [%s] is generated from [%s] and will be used as instance-id (jvmRoute)\", encodedString, instanceId);\n            return encodedString;\n        } catch (NoSuchAlgorithmException e) {\n            throw new IllegalArgumentException(e);\n        }\n    }", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r490015062", "createdAt": "2020-09-17T07:01:55Z", "author": {"login": "msfm"}, "path": "undertow/src/main/java/org/wildfly/extension/undertow/UndertowSubsystemAdd.java", "diffHunk": "@@ -102,8 +105,9 @@ protected void performBoottime(OperationContext context, ModelNode operation, Re\n         final String defaultSecurityDomain = UndertowRootDefinition.DEFAULT_SECURITY_DOMAIN.resolveModelAttribute(context, model).asString();\n \n         final ModelNode instanceIdModel = UndertowRootDefinition.INSTANCE_ID.resolveModelAttribute(context, model);\n-        final String instanceId = instanceIdModel.isDefined() ? instanceIdModel.asString() : null;\n-\n+        final ModelNode uuidInstanceIdModel = UndertowRootDefinition.UUID_INSTANCE_ID.resolveModelAttribute(context, model);\n+        final String instanceId = instanceIdModel.isDefined() ? (uuidInstanceIdModel.asBoolean() ?\n+                new String(Base64.getUrlEncoder().encode(instanceIdModel.asBytes())) : instanceIdModel.asString()) : null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a92ed42b1f71c646cadd4c4d0f06c19eb876cbe"}, "originalPosition": 42}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1a92ed42b1f71c646cadd4c4d0f06c19eb876cbe", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/1a92ed42b1f71c646cadd4c4d0f06c19eb876cbe", "committedDate": "2020-09-13T08:51:43Z", "message": "[WFLY-12473] Add Undertow subsystem uuid-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "a50580209d83a690fc113f98f3e62aa015724a28", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/a50580209d83a690fc113f98f3e62aa015724a28", "committedDate": "2020-09-19T06:41:23Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a50580209d83a690fc113f98f3e62aa015724a28", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/a50580209d83a690fc113f98f3e62aa015724a28", "committedDate": "2020-09-19T06:41:23Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "43d8d7987e017c5b6881ab756ab332b64bd3d2f9", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/43d8d7987e017c5b6881ab756ab332b64bd3d2f9", "committedDate": "2020-09-19T06:55:25Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43d8d7987e017c5b6881ab756ab332b64bd3d2f9", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/43d8d7987e017c5b6881ab756ab332b64bd3d2f9", "committedDate": "2020-09-19T06:55:25Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "3bd6159367c65617a1ab3393ad101344766dba36", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/3bd6159367c65617a1ab3393ad101344766dba36", "committedDate": "2020-09-19T06:56:42Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3bd6159367c65617a1ab3393ad101344766dba36", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/3bd6159367c65617a1ab3393ad101344766dba36", "committedDate": "2020-09-19T06:56:42Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "179a2fb8b3a2d32503af1663f1bc04db6b902d56", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/179a2fb8b3a2d32503af1663f1bc04db6b902d56", "committedDate": "2020-09-19T07:03:03Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "179a2fb8b3a2d32503af1663f1bc04db6b902d56", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/179a2fb8b3a2d32503af1663f1bc04db6b902d56", "committedDate": "2020-09-19T07:03:03Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "d0fc14c695564c9e1fc7f0f50e272bbf36981ca5", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/d0fc14c695564c9e1fc7f0f50e272bbf36981ca5", "committedDate": "2020-09-19T07:04:54Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0fc14c695564c9e1fc7f0f50e272bbf36981ca5", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/d0fc14c695564c9e1fc7f0f50e272bbf36981ca5", "committedDate": "2020-09-19T07:04:54Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "be713d880ed0fb3fec8d58ddf36a1c8d033e11f5", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/be713d880ed0fb3fec8d58ddf36a1c8d033e11f5", "committedDate": "2020-09-19T07:11:32Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be713d880ed0fb3fec8d58ddf36a1c8d033e11f5", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/be713d880ed0fb3fec8d58ddf36a1c8d033e11f5", "committedDate": "2020-09-19T07:11:32Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "e4196217f7b270afdbde041e2d4502b833d7f8a5", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/e4196217f7b270afdbde041e2d4502b833d7f8a5", "committedDate": "2020-09-19T07:15:01Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxOTc4MjIz", "url": "https://github.com/wildfly/wildfly/pull/12883#pullrequestreview-491978223", "createdAt": "2020-09-19T07:20:06Z", "commit": {"oid": "e4196217f7b270afdbde041e2d4502b833d7f8a5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOVQwNzoyMDowN1rOHUjGAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOVQwNzoyMDowN1rOHUjGAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTMwODU0NA==", "bodyText": "@pferraro  now, the question that remains is it a problem to call it obfuscate-instance-id when we are actually obfuscating the whole route? If it is, would 'obfuscate-route' attribute name be easy enough for the final user to understand the purpose of the attribute? Not obfuscating the server-name would defeat the usage of it as a salt.", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r491308544", "createdAt": "2020-09-19T07:20:07Z", "author": {"login": "fl4via"}, "path": "undertow/src/main/resources/org/wildfly/extension/undertow/LocalDescriptions.properties", "diffHunk": "@@ -27,7 +27,8 @@ undertow.configuration=null\n undertow.default-virtual-host=The default virtual host to use for deployments\n undertow.default-servlet-container=The default servlet container to use for deployments\n undertow.default-server=The default server to use for deployments\n-undertow.instance-id=The cluster instance id\n+undertow.instance-id=The cluster instance id (defaults to {$jboss.node.name} if undefined)\n+undertow.obfuscate-instance-id=Obfuscate the instance-id and server name when routing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4196217f7b270afdbde041e2d4502b833d7f8a5"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMDYwNTkw", "url": "https://github.com/wildfly/wildfly/pull/12883#pullrequestreview-492060590", "createdAt": "2020-09-19T18:31:24Z", "commit": {"oid": "e4196217f7b270afdbde041e2d4502b833d7f8a5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOVQxODozMToyNFrOHUtneA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOVQxOTowMzoyOVrOHUtxkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQ4MDk1Mg==", "bodyText": "We can skip this logic when service.isObfuscateInstanceId() is true.", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r491480952", "createdAt": "2020-09-19T18:31:24Z", "author": {"login": "pferraro"}, "path": "undertow/src/main/java/org/wildfly/extension/undertow/Server.java", "diffHunk": "@@ -169,9 +172,24 @@ public String getDefaultHost() {\n     }\n \n     public String getRoute() {\n-        UndertowService service = this.undertowService.getValue();\n-        String defaultServerRoute = service.getInstanceId();\n-        return this.name.equals(service.getDefaultServer()) ? defaultServerRoute : String.join(\"-\", defaultServerRoute, this.name);\n+        final UndertowService service = this.undertowService.getValue();\n+        final String defaultServerRoute = service.getInstanceId();\n+        final String route = this.name.equals(service.getDefaultServer()) ? defaultServerRoute : String.join(\"-\", defaultServerRoute, this.name);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4196217f7b270afdbde041e2d4502b833d7f8a5"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQ4MjE0NQ==", "bodyText": "A couple of comments:\n\nWhy include the server name twice in the hash?  Given that we've already salted the hash using the server name, we can just use:\n\nmd.digest(service.getInstanceId().getBytes(StandardCharsets.UTF-8));\n\nGiven that we don't know the default character encoding of a given host, it's probably best to keep this consistent across all hosts, e.g.\n\nString encodedRoute = new String(encoder.encode(...), StandardCharsets.UTF-8);", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r491482145", "createdAt": "2020-09-19T18:45:46Z", "author": {"login": "pferraro"}, "path": "undertow/src/main/java/org/wildfly/extension/undertow/Server.java", "diffHunk": "@@ -169,9 +172,24 @@ public String getDefaultHost() {\n     }\n \n     public String getRoute() {\n-        UndertowService service = this.undertowService.getValue();\n-        String defaultServerRoute = service.getInstanceId();\n-        return this.name.equals(service.getDefaultServer()) ? defaultServerRoute : String.join(\"-\", defaultServerRoute, this.name);\n+        final UndertowService service = this.undertowService.getValue();\n+        final String defaultServerRoute = service.getInstanceId();\n+        final String route = this.name.equals(service.getDefaultServer()) ? defaultServerRoute : String.join(\"-\", defaultServerRoute, this.name);\n+        if (service.isObfuscateInstanceId()) {\n+            try {\n+                final MessageDigest md = MessageDigest.getInstance(\"MD5\");\n+                // salt\n+                md.update(this.name.getBytes());\n+                // encode\n+                final Base64.Encoder encoder = Base64.getUrlEncoder().withoutPadding(); // = is not allowed in V0 Cookie\n+                final String encodedRoute = encoder.encodeToString(md.digest(route.getBytes()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4196217f7b270afdbde041e2d4502b833d7f8a5"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQ4MjU1Ng==", "bodyText": "Good point.  How about \"obfuscate-session-route\"?", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r491482556", "createdAt": "2020-09-19T18:51:15Z", "author": {"login": "pferraro"}, "path": "undertow/src/main/resources/org/wildfly/extension/undertow/LocalDescriptions.properties", "diffHunk": "@@ -27,7 +27,8 @@ undertow.configuration=null\n undertow.default-virtual-host=The default virtual host to use for deployments\n undertow.default-servlet-container=The default servlet container to use for deployments\n undertow.default-server=The default server to use for deployments\n-undertow.instance-id=The cluster instance id\n+undertow.instance-id=The cluster instance id (defaults to {$jboss.node.name} if undefined)\n+undertow.obfuscate-instance-id=Obfuscate the instance-id and server name when routing", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTMwODU0NA=="}, "originalCommit": {"oid": "e4196217f7b270afdbde041e2d4502b833d7f8a5"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQ4MzMxNw==", "bodyText": "Oops - my previous comment was incomplete. :(\nWe also want to discard if the attribute is defined, but set to the default value. i.e.\n.setDiscard(DiscardAttributeChecker.DEFAULT_VALUE, OBFUSCATE_INSTANCE_ID);\nSame for other versions.", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r491483317", "createdAt": "2020-09-19T19:00:28Z", "author": {"login": "pferraro"}, "path": "undertow/src/main/java/org/wildfly/extension/undertow/UndertowTransformers.java", "diffHunk": "@@ -118,13 +120,22 @@ private static void registerTransformersWildFly18(ResourceTransformationDescript\n     }\n \n     private static void registerTransformersWildFly16(ResourceTransformationDescriptionBuilder subsystemBuilder) {\n+        subsystemBuilder.getAttributeBuilder()\n+                .addRejectCheck(RejectAttributeChecker.DEFINED,OBFUSCATE_INSTANCE_ID)\n+                .setDiscard(DiscardAttributeChecker.UNDEFINED, OBFUSCATE_INSTANCE_ID)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4196217f7b270afdbde041e2d4502b833d7f8a5"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQ4MzUzOA==", "bodyText": "Given that we don't know the default character encoding of a given host, it's probably best to keep this consistent across all hosts, e.g.\nmd.update(this.name.getBytes(StandardCharsets.UTF-8));", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r491483538", "createdAt": "2020-09-19T19:03:29Z", "author": {"login": "pferraro"}, "path": "undertow/src/main/java/org/wildfly/extension/undertow/Server.java", "diffHunk": "@@ -169,9 +172,24 @@ public String getDefaultHost() {\n     }\n \n     public String getRoute() {\n-        UndertowService service = this.undertowService.getValue();\n-        String defaultServerRoute = service.getInstanceId();\n-        return this.name.equals(service.getDefaultServer()) ? defaultServerRoute : String.join(\"-\", defaultServerRoute, this.name);\n+        final UndertowService service = this.undertowService.getValue();\n+        final String defaultServerRoute = service.getInstanceId();\n+        final String route = this.name.equals(service.getDefaultServer()) ? defaultServerRoute : String.join(\"-\", defaultServerRoute, this.name);\n+        if (service.isObfuscateInstanceId()) {\n+            try {\n+                final MessageDigest md = MessageDigest.getInstance(\"MD5\");\n+                // salt\n+                md.update(this.name.getBytes());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4196217f7b270afdbde041e2d4502b833d7f8a5"}, "originalPosition": 24}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e4196217f7b270afdbde041e2d4502b833d7f8a5", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/e4196217f7b270afdbde041e2d4502b833d7f8a5", "committedDate": "2020-09-19T07:15:01Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "b0287a3706439dfebbd68a233939f714545deae2", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/b0287a3706439dfebbd68a233939f714545deae2", "committedDate": "2020-09-19T23:27:26Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b0287a3706439dfebbd68a233939f714545deae2", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/b0287a3706439dfebbd68a233939f714545deae2", "committedDate": "2020-09-19T23:27:26Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-instance-id attribute, update tests and documentation"}, "afterCommit": {"oid": "84b7b88db48267594842a42e3395465a7660ff3f", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/84b7b88db48267594842a42e3395465a7660ff3f", "committedDate": "2020-09-21T07:32:14Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-session-route attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84b7b88db48267594842a42e3395465a7660ff3f", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/84b7b88db48267594842a42e3395465a7660ff3f", "committedDate": "2020-09-21T07:32:14Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-session-route attribute, update tests and documentation"}, "afterCommit": {"oid": "6a8bfa39d98c5de1fb822881b1a953212bec8afe", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/6a8bfa39d98c5de1fb822881b1a953212bec8afe", "committedDate": "2020-09-21T07:44:32Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-session-route attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6a8bfa39d98c5de1fb822881b1a953212bec8afe", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/6a8bfa39d98c5de1fb822881b1a953212bec8afe", "committedDate": "2020-09-21T07:44:32Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-session-route attribute, update tests and documentation"}, "afterCommit": {"oid": "9aa5f9276a7ec5f583aca188f27baf06a77cdb26", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/9aa5f9276a7ec5f583aca188f27baf06a77cdb26", "committedDate": "2020-09-21T07:50:35Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-session-route attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9aa5f9276a7ec5f583aca188f27baf06a77cdb26", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/9aa5f9276a7ec5f583aca188f27baf06a77cdb26", "committedDate": "2020-09-21T07:50:35Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-session-route attribute, update tests and documentation"}, "afterCommit": {"oid": "b5dabebe1c017c4d79b74d410194a8eea7e8cb6a", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/b5dabebe1c017c4d79b74d410194a8eea7e8cb6a", "committedDate": "2020-09-21T07:59:27Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-session-route attribute, update tests and documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5dabebe1c017c4d79b74d410194a8eea7e8cb6a", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/b5dabebe1c017c4d79b74d410194a8eea7e8cb6a", "committedDate": "2020-09-21T07:59:27Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-session-route attribute, update tests and documentation"}, "afterCommit": {"oid": "d5239aa938162d2f7813e92b2c35e425fdadd3d1", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/d5239aa938162d2f7813e92b2c35e425fdadd3d1", "committedDate": "2020-09-21T10:47:25Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-session-route attribute, update tests and documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyOTg4OTQz", "url": "https://github.com/wildfly/wildfly/pull/12883#pullrequestreview-492988943", "createdAt": "2020-09-21T21:20:59Z", "commit": {"oid": "d5239aa938162d2f7813e92b2c35e425fdadd3d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQyMToyMDo1OVrOHVi1-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQyMToyMDo1OVrOHVi1-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjM1MzAxNw==", "bodyText": "Given that we are already salting the hash of the instance-id (usually the host name) using the server name, thus preventing mapping back to known host names, is SHA-256 really necessary here?\nThis results in route identifiers of 43 characters, as opposed to 22 characters when using MD5.\nPerhaps we leave this determination up to the user, i.e. make this configurable?\nThis would replace obfuscate-session-route=\"true|false\" with session-route-digest-algorithm=\"...\", where undefined means we that do not obfuscate.  WDYT?", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r492353017", "createdAt": "2020-09-21T21:20:59Z", "author": {"login": "pferraro"}, "path": "undertow/src/main/java/org/wildfly/extension/undertow/Server.java", "diffHunk": "@@ -169,8 +174,23 @@ public String getDefaultHost() {\n     }\n \n     public String getRoute() {\n-        UndertowService service = this.undertowService.getValue();\n-        String defaultServerRoute = service.getInstanceId();\n+        final UndertowService service = this.undertowService.getValue();\n+        final String defaultServerRoute = service.getInstanceId();\n+        if (service.isObfuscateSessionRoute()) {\n+            try {\n+                final MessageDigest md = MessageDigest.getInstance(\"SHA-256\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5239aa938162d2f7813e92b2c35e425fdadd3d1"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNjI1NjQ0", "url": "https://github.com/wildfly/wildfly/pull/12883#pullrequestreview-493625644", "createdAt": "2020-09-22T16:08:00Z", "commit": {"oid": "d5239aa938162d2f7813e92b2c35e425fdadd3d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNjowODowMFrOHWByYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNjowODowMFrOHWByYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg2MDAwMg==", "bodyText": "@fl4via I don't understand how this test is relevant in EAP7-1187", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r492860002", "createdAt": "2020-09-22T16:08:00Z", "author": {"login": "tommaso-borgato"}, "path": "undertow/src/test/java/org/wildfly/extension/undertow/ServerServiceTestCase.java", "diffHunk": "@@ -0,0 +1,195 @@\n+/*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5239aa938162d2f7813e92b2c35e425fdadd3d1"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NDE1OTE5", "url": "https://github.com/wildfly/wildfly/pull/12883#pullrequestreview-494415919", "createdAt": "2020-09-23T08:22:10Z", "commit": {"oid": "d5239aa938162d2f7813e92b2c35e425fdadd3d1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwODoyMjoxMFrOHWcuew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwODoyMjoxMFrOHWcuew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzMwMTM3MQ==", "bodyText": "@fl4via compilation fails: import sun.nio.cs.UTF_8;: is unused import", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r493301371", "createdAt": "2020-09-23T08:22:10Z", "author": {"login": "tommaso-borgato"}, "path": "undertow/src/test/java/org/wildfly/extension/undertow/ServerServiceTestCase.java", "diffHunk": "@@ -0,0 +1,195 @@\n+/*\n+ * JBoss, Home of Professional Open Source.\n+ * Copyright 2020, Red Hat, Inc., and individual contributors\n+ * as indicated by the @author tags. See the copyright.txt file in the\n+ * distribution for a full listing of individual contributors.\n+ *\n+ * This is free software; you can redistribute it and/or modify it\n+ * under the terms of the GNU Lesser General Public License as\n+ * published by the Free Software Foundation; either version 2.1 of\n+ * the License, or (at your option) any later version.\n+ *\n+ * This software is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this software; if not, write to the Free\n+ * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n+ * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n+ */\n+\n+package org.wildfly.extension.undertow;\n+\n+import java.io.IOException;\n+import java.nio.charset.StandardCharsets;\n+import java.security.MessageDigest;\n+import java.util.Base64;\n+import java.util.Set;\n+\n+import org.jboss.as.subsystem.test.KernelServices;\n+import org.jboss.as.subsystem.test.KernelServicesBuilder;\n+import org.jboss.msc.service.ServiceController;\n+import org.jboss.msc.service.ServiceName;\n+\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import sun.nio.cs.UTF_8;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5239aa938162d2f7813e92b2c35e425fdadd3d1"}, "originalPosition": 39}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c0f302184eddf96d0aba86fb715f0f75acb54c0b", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/c0f302184eddf96d0aba86fb715f0f75acb54c0b", "committedDate": "2021-01-22T04:11:25Z", "message": "[WFLY-12473] Increment documentation and add new test for session management with obfuscatd route"}, "afterCommit": {"oid": "fa92362b68be712a5592e0f7f15a52345f475e6c", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/fa92362b68be712a5592e0f7f15a52345f475e6c", "committedDate": "2021-01-22T04:25:07Z", "message": "[WFLY-12473] Increment documentation and add new test for session management with obfuscatd route"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fa92362b68be712a5592e0f7f15a52345f475e6c", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/fa92362b68be712a5592e0f7f15a52345f475e6c", "committedDate": "2021-01-22T04:25:07Z", "message": "[WFLY-12473] Increment documentation and add new test for session management with obfuscatd route"}, "afterCommit": {"oid": "0ba297d33252ae013fec221e336cfd07834c28a2", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/0ba297d33252ae013fec221e336cfd07834c28a2", "committedDate": "2021-01-22T04:33:24Z", "message": "[WFLY-12473] Increment documentation and add new test for session management with obfuscatd route"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg3MjE1NjI3", "url": "https://github.com/wildfly/wildfly/pull/12883#pullrequestreview-587215627", "createdAt": "2021-02-10T03:07:33Z", "commit": {"oid": "0ba297d33252ae013fec221e336cfd07834c28a2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xMFQwMzowNzozM1rOIi2chA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xMFQwMzowNzozM1rOIi2chA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MzQxNDUzMg==", "bodyText": "@fl4via I believe you need a new 'registerTransformersWildFly22 method (and a MODEL_VERSION_WILDFLY_22) and this code goes there.\nIt then shouldn't be necessary to repeat this logic in the other methods. You handle it in current->MODEL_VERSION_WILDFLY_22 and the chain transformation means its handled for all the earlier ones.", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r573414532", "createdAt": "2021-02-10T03:07:33Z", "author": {"login": "bstansberry"}, "path": "undertow/src/main/java/org/wildfly/extension/undertow/UndertowTransformers.java", "diffHunk": "@@ -118,13 +120,20 @@ private static void registerTransformersWildFly18(ResourceTransformationDescript\n     }\n \n     private static void registerTransformersWildFly16(ResourceTransformationDescriptionBuilder subsystemBuilder) {\n+        subsystemBuilder.getAttributeBuilder().addRejectCheck(RejectAttributeChecker.DEFINED, OBFUSCATE_SESSION_ROUTE)\n+                .setDiscard(DiscardAttributeChecker.DEFAULT_VALUE, OBFUSCATE_SESSION_ROUTE)\n+                .end();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ba297d33252ae013fec221e336cfd07834c28a2"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ba297d33252ae013fec221e336cfd07834c28a2", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/0ba297d33252ae013fec221e336cfd07834c28a2", "committedDate": "2021-01-22T04:33:24Z", "message": "[WFLY-12473] Increment documentation and add new test for session management with obfuscatd route"}, "afterCommit": {"oid": "336c81f969fdae5844cad6cc55adea544f7d171f", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/336c81f969fdae5844cad6cc55adea544f7d171f", "committedDate": "2021-02-16T13:48:24Z", "message": "[WFLY-12473] Increment documentation and add new test for session management with obfuscated route"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTkzNzM1NjMx", "url": "https://github.com/wildfly/wildfly/pull/12883#pullrequestreview-593735631", "createdAt": "2021-02-18T23:23:20Z", "commit": {"oid": "336c81f969fdae5844cad6cc55adea544f7d171f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xOFQyMzoyMzoyMVrOIoAL7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xOFQyMzoyMzoyMVrOIoAL7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3ODgxNzAwNQ==", "bodyText": "@fl4via To reiterate, we do not require a 32 byte hash algorithm for this.  MD5 is sufficient for the purpose of obfuscating the session route and is consistent with the requested behavior in the original feature request.\nWe can discuss making this configurable at a later date.", "url": "https://github.com/wildfly/wildfly/pull/12883#discussion_r578817005", "createdAt": "2021-02-18T23:23:21Z", "author": {"login": "pferraro"}, "path": "undertow/src/main/java/org/wildfly/extension/undertow/Server.java", "diffHunk": "@@ -169,8 +174,23 @@ public String getDefaultHost() {\n     }\n \n     public String getRoute() {\n-        UndertowService service = this.undertowService.getValue();\n-        String defaultServerRoute = service.getInstanceId();\n+        final UndertowService service = this.undertowService.getValue();\n+        final String defaultServerRoute = service.getInstanceId();\n+        if (service.isObfuscateSessionRoute()) {\n+            try {\n+                final MessageDigest md = MessageDigest.getInstance(\"SHA-256\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjM1MzAxNw=="}, "originalCommit": {"oid": "d5239aa938162d2f7813e92b2c35e425fdadd3d1"}, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8cd589dbe1e8838fe332a00b4b37d1d46fd77810", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/8cd589dbe1e8838fe332a00b4b37d1d46fd77810", "committedDate": "2021-02-23T17:32:08Z", "message": "Question about test"}, "afterCommit": {"oid": "cdf218537206509dcb69219eb0ee82246eaf617e", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/cdf218537206509dcb69219eb0ee82246eaf617e", "committedDate": "2021-02-23T17:46:52Z", "message": "Replace message digest algorithm \"SHA-256\" by \"MD5\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5770e928bb2df15423e74a8c6ec9184de9dbb784", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/5770e928bb2df15423e74a8c6ec9184de9dbb784", "committedDate": "2021-02-23T23:02:35Z", "message": "[WFLY-12932] Add checks for UndertowService at UndertowSubsystemXXTestCase tests and add UndertowServiceTestCase, a specific test for verifying configuration of subsystem attributes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2783329eeb684ed7c91cde15220ca25f3099b459", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/2783329eeb684ed7c91cde15220ca25f3099b459", "committedDate": "2021-02-23T23:03:27Z", "message": "[WFLY-12933] At Undertow subsystem configuration document, add a table describing the subsystem attributes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e7a508e35de24ed8f5936244485f6414ed24639", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/2e7a508e35de24ed8f5936244485f6414ed24639", "committedDate": "2021-02-23T23:08:11Z", "message": "[WFLY-13858] Bump Undertow model and schema version to 12.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "303ebb670268b839ff98192e60467aa7f91e9ce8", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/303ebb670268b839ff98192e60467aa7f91e9ce8", "committedDate": "2021-02-23T23:19:30Z", "message": "[WFLY-12473] Add Undertow subsystem obfuscate-session-route attribute, update tests and documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3acf99531ca3fbb37e00edf46aaf44e38008cb8e", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/3acf99531ca3fbb37e00edf46aaf44e38008cb8e", "committedDate": "2021-02-23T23:19:36Z", "message": "[WFLY-12473] Increment documentation and add new test for session management with obfuscated route"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cdf218537206509dcb69219eb0ee82246eaf617e", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/cdf218537206509dcb69219eb0ee82246eaf617e", "committedDate": "2021-02-23T17:46:52Z", "message": "Replace message digest algorithm \"SHA-256\" by \"MD5\""}, "afterCommit": {"oid": "3acf99531ca3fbb37e00edf46aaf44e38008cb8e", "author": {"user": {"login": "fl4via", "name": "Flavia Rainone"}}, "url": "https://github.com/wildfly/wildfly/commit/3acf99531ca3fbb37e00edf46aaf44e38008cb8e", "committedDate": "2021-02-23T23:19:36Z", "message": "[WFLY-12473] Increment documentation and add new test for session management with obfuscated route"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk3MDE0MDMz", "url": "https://github.com/wildfly/wildfly/pull/12883#pullrequestreview-597014033", "createdAt": "2021-02-24T02:42:57Z", "commit": {"oid": "3acf99531ca3fbb37e00edf46aaf44e38008cb8e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk3MDI0OTM0", "url": "https://github.com/wildfly/wildfly/pull/12883#pullrequestreview-597024934", "createdAt": "2021-02-24T03:09:43Z", "commit": {"oid": "3acf99531ca3fbb37e00edf46aaf44e38008cb8e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3642, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}