{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5MTUwMDIz", "number": 13673, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QyMTowOTozNlrOExYBQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0wOFQxNDozMDo0MlrOGH4I8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwMjA5MjE5OnYy", "diffSide": "RIGHT", "path": "docs/src/main/asciidoc/_elytron/Using_the_Elytron_Subsystem.adoc", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QyMTowOTozNlrOHnehWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNDoyMzozM1rOHo-5LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE1NjU2OA==", "bodyText": "Instead of mentioning this here and below, I think it would be better to add something like a \"Configuring SSLv2Hello\" section just after the  \"Configuring a server SSLContext\"/\"Configuring a client SSLContext\" sections. This section should contain a warning that indicates that the use of this protocol is discouraged.", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r511156568", "createdAt": "2020-10-23T21:09:36Z", "author": {"login": "fjuma"}, "path": "docs/src/main/asciidoc/_elytron/Using_the_Elytron_Subsystem.adoc", "diffHunk": "@@ -1378,7 +1378,8 @@ into the server truststore:\n \n *IMPORTANT* +\n You need to determine what SSL/TLS protocols you want to support. The\n-example commands above uses _TLSv1.2_.\n+example commands above uses _TLSv1.2_. Supported protocols include SSLv2, SSLv2Hello, SSLv3,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1656f90db2a71fa5bc564e52d7085cfde7c93716"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE1OTE4Ng==", "bodyText": "Similar content should also be added in authentication-client.adoc.", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r511159186", "createdAt": "2020-10-23T21:16:39Z", "author": {"login": "fjuma"}, "path": "docs/src/main/asciidoc/_elytron/Using_the_Elytron_Subsystem.adoc", "diffHunk": "@@ -1378,7 +1378,8 @@ into the server truststore:\n \n *IMPORTANT* +\n You need to determine what SSL/TLS protocols you want to support. The\n-example commands above uses _TLSv1.2_.\n+example commands above uses _TLSv1.2_. Supported protocols include SSLv2, SSLv2Hello, SSLv3,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE1NjU2OA=="}, "originalCommit": {"oid": "1656f90db2a71fa5bc564e52d7085cfde7c93716"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjczNTUzMg==", "bodyText": "I've added the sections to the documentation.", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r512735532", "createdAt": "2020-10-27T14:23:33Z", "author": {"login": "SoniaZaldana"}, "path": "docs/src/main/asciidoc/_elytron/Using_the_Elytron_Subsystem.adoc", "diffHunk": "@@ -1378,7 +1378,8 @@ into the server truststore:\n \n *IMPORTANT* +\n You need to determine what SSL/TLS protocols you want to support. The\n-example commands above uses _TLSv1.2_.\n+example commands above uses _TLSv1.2_. Supported protocols include SSLv2, SSLv2Hello, SSLv3,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE1NjU2OA=="}, "originalCommit": {"oid": "1656f90db2a71fa5bc564e52d7085cfde7c93716"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNzc4NDE3OnYy", "diffSide": "RIGHT", "path": "docs/src/main/asciidoc/_client-guide/authentication-client.adoc", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNTozNTowNlrOHpwO5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDo0OTo0M1rOHqfiVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzU0MzkxMQ==", "bodyText": "I think we could use \"WARNING\" here instead of \"=== Important to Note:\". I think we should add a sentence at the beginning of this warning that says: \"The use of SSLv2Hello is discouraged.\" just to emphasize it again.", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r513543911", "createdAt": "2020-10-28T15:35:06Z", "author": {"login": "fjuma"}, "path": "docs/src/main/asciidoc/_client-guide/authentication-client.adoc", "diffHunk": "@@ -471,6 +471,31 @@ The following example configuration specifies that the default filtering should\n \n  <certificate-revocation-list />:: The presence of this element enabled checking the peer's certificate against a certificate revocation list, this element defines both a path to the certificate revocation list and also specifies the maximum number of non-self-issued intermediate certificates that may exist in a certification path\n \n+=== Configuring SSLv2Hello\n+\n+Older JDK versions use ``SSLv2Hello`` during the initial SSL handshake message\n+where the SSL/TLS version that will be used for the rest of the communication is\n+negotiated.\n+\n+Using ``SSLv2Hello`` is discouraged, therefore newer JDK versions disable this protocol\n+on the client by default. However, they do provide the ability to re-enable it if necessary.\n+\n+``SSLv2Hello`` can be configured as a supported protocol for the SSL context as follows:\n+\n+[source,options=\"nowrap\"]\n+----\n+<protocol names=\"SSLv2Hello TLSv1\">\n+----\n+\n+=== Important to Note:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42f425cff7e4f37c090bc4cbfc224518655611ae"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMxODkzMg==", "bodyText": "I've updated the documentation and also added the missing test scenarios.", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r514318932", "createdAt": "2020-10-29T14:49:43Z", "author": {"login": "SoniaZaldana"}, "path": "docs/src/main/asciidoc/_client-guide/authentication-client.adoc", "diffHunk": "@@ -471,6 +471,31 @@ The following example configuration specifies that the default filtering should\n \n  <certificate-revocation-list />:: The presence of this element enabled checking the peer's certificate against a certificate revocation list, this element defines both a path to the certificate revocation list and also specifies the maximum number of non-self-issued intermediate certificates that may exist in a certification path\n \n+=== Configuring SSLv2Hello\n+\n+Older JDK versions use ``SSLv2Hello`` during the initial SSL handshake message\n+where the SSL/TLS version that will be used for the rest of the communication is\n+negotiated.\n+\n+Using ``SSLv2Hello`` is discouraged, therefore newer JDK versions disable this protocol\n+on the client by default. However, they do provide the ability to re-enable it if necessary.\n+\n+``SSLv2Hello`` can be configured as a supported protocol for the SSL context as follows:\n+\n+[source,options=\"nowrap\"]\n+----\n+<protocol names=\"SSLv2Hello TLSv1\">\n+----\n+\n+=== Important to Note:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzU0MzkxMQ=="}, "originalCommit": {"oid": "42f425cff7e4f37c090bc4cbfc224518655611ae"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNzc4NTAwOnYy", "diffSide": "RIGHT", "path": "docs/src/main/asciidoc/_elytron/Using_the_Elytron_Subsystem.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNTozNToxNFrOHpwPZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNTozNToxNFrOHpwPZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzU0NDAzOA==", "bodyText": "Same here.", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r513544038", "createdAt": "2020-10-28T15:35:14Z", "author": {"login": "fjuma"}, "path": "docs/src/main/asciidoc/_elytron/Using_the_Elytron_Subsystem.adoc", "diffHunk": "@@ -2309,6 +2309,39 @@ the first handshake in order to receive the `NewSessionTicket` that can be used\n change once https://bugs.openjdk.java.net/browse/JDK-8209953[JDK-8209953] is resolved.\n \n \n+=== Configuring SSLv2Hello\n+\n+Older JDK versions use ``SSLv2Hello`` during the initial SSL handshake message\n+where the SSL/TLS version that will be used for the rest of the communication is\n+negotiated.\n+\n+Using ``SSLv2Hello`` is discouraged, therefore newer JDK versions disable this protocol\n+on the client by default. However, they do provide the ability to re-enable it if necessary.\n+\n+``SSLv2Hello`` can be configured as a supported protocol for the server SSL context as follows:\n+\n+[source,options=\"nowrap\"]\n+----\n+/subsystem=elytron/server-ssl-context=server-context:add(protocols=[SSLv2Hello,TLSv1], ...)\n+----\n+\n+Similarly, it can be configured as a supported protocol for the client SSL context as follows:\n+\n+[source,options=\"nowrap\"]\n+----\n+/subsystem=elytron/client-ssl-context=client-context:add(protocols=[SSLv2Hello,TLSv1], ...)\n+----\n+\n+==== Important to Note:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42f425cff7e4f37c090bc4cbfc224518655611ae"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNzU0NjYwOnYy", "diffSide": "RIGHT", "path": "testsuite/integration/elytron/src/test/resources/org/wildfly/test/integration/elytron/ssl/wildfly-config-one-way-sslv2hello.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMzo1Mzo0OVrOHrQDbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMzo1Mzo0OVrOHrQDbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTExMzgzOA==", "bodyText": "Looks like the above lines can be removed.", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r515113838", "createdAt": "2020-10-30T13:53:49Z", "author": {"login": "fjuma"}, "path": "testsuite/integration/elytron/src/test/resources/org/wildfly/test/integration/elytron/ssl/wildfly-config-one-way-sslv2hello.xml", "diffHunk": "@@ -0,0 +1,27 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<configuration>\n+    <authentication-client xmlns=\"urn:elytron:client:1.6\">\n+        <key-stores>\n+            <key-store name=\"truststore\" type=\"JKS\">\n+                <file name=\"target/UndertowTwoWaySslNeedClientAuthTestCase/client.truststore\"/>\n+            </key-store>\n+<!--            <key-store name=\"keystore\" type=\"JKS\">-->\n+<!--                <file name=\"target/UndertowTwoWaySslNeedClientAuthTestCase/client.keystore\"/>-->\n+<!--                <key-store-clear-password password=\"123456\" />-->\n+<!--            </key-store>-->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "299288f9fa42d99b853e802243b7bf20b7fc34c1"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNzU0NzA5OnYy", "diffSide": "RIGHT", "path": "testsuite/integration/elytron/src/test/resources/org/wildfly/test/integration/elytron/ssl/wildfly-config-one-way-sslv2hello.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMzo1Mzo1NVrOHrQDvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMzo1Mzo1NVrOHrQDvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTExMzkxNg==", "bodyText": "Same here.", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r515113916", "createdAt": "2020-10-30T13:53:55Z", "author": {"login": "fjuma"}, "path": "testsuite/integration/elytron/src/test/resources/org/wildfly/test/integration/elytron/ssl/wildfly-config-one-way-sslv2hello.xml", "diffHunk": "@@ -0,0 +1,27 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<configuration>\n+    <authentication-client xmlns=\"urn:elytron:client:1.6\">\n+        <key-stores>\n+            <key-store name=\"truststore\" type=\"JKS\">\n+                <file name=\"target/UndertowTwoWaySslNeedClientAuthTestCase/client.truststore\"/>\n+            </key-store>\n+<!--            <key-store name=\"keystore\" type=\"JKS\">-->\n+<!--                <file name=\"target/UndertowTwoWaySslNeedClientAuthTestCase/client.keystore\"/>-->\n+<!--                <key-store-clear-password password=\"123456\" />-->\n+<!--            </key-store>-->\n+        </key-stores>\n+        <ssl-contexts>\n+            <ssl-context name=\"client-context\">\n+                <trust-store key-store-name=\"truststore\"/>\n+<!--                <key-store-ssl-certificate key-store-name=\"keystore\">-->\n+<!--                    <key-store-clear-password password=\"123456\" />-->\n+<!--                </key-store-ssl-certificate>-->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "299288f9fa42d99b853e802243b7bf20b7fc34c1"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkNDEwNTI1MzAwOnYy", "diffSide": "RIGHT", "path": "testsuite/integration/elytron/pom.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0wN1QyMDoxMjo1OVrOJo8HNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0wN1QyMDoxMjo1OVrOJo8HNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NjkwNzcwMA==", "bodyText": "Since the properties file is used to re-enable TLSv1, it would be good to rename this to reenabled_tlsv1.properties or something like that.", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r646907700", "createdAt": "2021-06-07T20:12:59Z", "author": {"login": "fjuma"}, "path": "testsuite/integration/elytron/pom.xml", "diffHunk": "@@ -51,13 +51,15 @@\n         <jbossas.ts.dir>${jbossas.ts.integ.dir}/..</jbossas.ts.dir>\n         <jbossas.project.dir>${jbossas.ts.dir}/..</jbossas.project.dir>\n         <wildfly.dir>${basedir}/target/${wildfly.instance.name}</wildfly.dir>\n-\n+        <security.properties>${project.basedir}/src/test/resources/disabled_tlsv1.properties</security.properties>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b101ce56b7b6a518c250d24caf85b9e5a01a1c95"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkNDEwNTQyMTMxOnYy", "diffSide": "RIGHT", "path": "testsuite/integration/elytron/pom.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0wN1QyMDo1NDowNlrOJo9q9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0wOFQxNDoxMDo0MVrOJpfGIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NjkzMzIzOQ==", "bodyText": "If we could use the single = here to append to the existing properties file instead of fully override, we wouldn't need to specify the security providers in the properties file.", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r646933239", "createdAt": "2021-06-07T20:54:06Z", "author": {"login": "fjuma"}, "path": "testsuite/integration/elytron/pom.xml", "diffHunk": "@@ -281,11 +285,44 @@\n                         <jboss.server.config.file.name>standalone-full.xml</jboss.server.config.file.name>\n                         <jboss.inst>${wildfly.dir}</jboss.inst>\n                         <module.path>${wildfly.dir}/modules</module.path>\n-                        <server.jvm.args>-Dmaven.repo.local=${settings.localRepository} -Djboss.bind.address=${node0} -Djboss.bind.address.management=${node0} ${surefire.system.args} ${jvm.args.ip.server} ${jvm.args.other} ${jvm.args.timeouts} ${extra.server.jvm.args}</server.jvm.args>\n+                        <server.jvm.args>${server.jvm.args}</server.jvm.args>\n                         <node0>${node0}</node0>\n+                        <security.properties>${security.properties}</security.properties>\n                     </systemPropertyVariables>\n-                    <argLine>${surefire.system.args} ${jvm.args.ip.client}</argLine>\n                 </configuration>\n+                <executions>\n+                    <execution>\n+                        <id>default-tests</id>\n+                        <phase>test</phase>\n+                        <goals>\n+                            <goal>test</goal>\n+                        </goals>\n+                        <configuration>\n+                            <skip>false</skip>\n+                            <argLine>${surefire.system.args} ${jvm.args.ip.client}</argLine>\n+                            <excludes>\n+                                <exclude>***/UndertowSSLv2HelloTestCase</exclude>\n+                            </excludes>\n+                        </configuration>\n+                    </execution>\n+                    <execution>\n+                        <id>sslv2-tests</id>\n+                        <phase>test</phase>\n+                        <goals>\n+                            <goal>test</goal>\n+                        </goals>\n+                        <configuration>\n+                            <skip>false</skip>\n+                            <argLine>-Djava.security.properties==${security.properties} ${surefire.system.args} ${jvm.args.ip.client}</argLine>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b101ce56b7b6a518c250d24caf85b9e5a01a1c95"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NzQ4MDg2NA==", "bodyText": "Fixed :)", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r647480864", "createdAt": "2021-06-08T14:10:41Z", "author": {"login": "SoniaZaldana"}, "path": "testsuite/integration/elytron/pom.xml", "diffHunk": "@@ -281,11 +285,44 @@\n                         <jboss.server.config.file.name>standalone-full.xml</jboss.server.config.file.name>\n                         <jboss.inst>${wildfly.dir}</jboss.inst>\n                         <module.path>${wildfly.dir}/modules</module.path>\n-                        <server.jvm.args>-Dmaven.repo.local=${settings.localRepository} -Djboss.bind.address=${node0} -Djboss.bind.address.management=${node0} ${surefire.system.args} ${jvm.args.ip.server} ${jvm.args.other} ${jvm.args.timeouts} ${extra.server.jvm.args}</server.jvm.args>\n+                        <server.jvm.args>${server.jvm.args}</server.jvm.args>\n                         <node0>${node0}</node0>\n+                        <security.properties>${security.properties}</security.properties>\n                     </systemPropertyVariables>\n-                    <argLine>${surefire.system.args} ${jvm.args.ip.client}</argLine>\n                 </configuration>\n+                <executions>\n+                    <execution>\n+                        <id>default-tests</id>\n+                        <phase>test</phase>\n+                        <goals>\n+                            <goal>test</goal>\n+                        </goals>\n+                        <configuration>\n+                            <skip>false</skip>\n+                            <argLine>${surefire.system.args} ${jvm.args.ip.client}</argLine>\n+                            <excludes>\n+                                <exclude>***/UndertowSSLv2HelloTestCase</exclude>\n+                            </excludes>\n+                        </configuration>\n+                    </execution>\n+                    <execution>\n+                        <id>sslv2-tests</id>\n+                        <phase>test</phase>\n+                        <goals>\n+                            <goal>test</goal>\n+                        </goals>\n+                        <configuration>\n+                            <skip>false</skip>\n+                            <argLine>-Djava.security.properties==${security.properties} ${surefire.system.args} ${jvm.args.ip.client}</argLine>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NjkzMzIzOQ=="}, "originalCommit": {"oid": "b101ce56b7b6a518c250d24caf85b9e5a01a1c95"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkNDEwOTEwNzY5OnYy", "diffSide": "RIGHT", "path": "testsuite/integration/elytron/pom.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0wOFQxNDoyNzoxMVrOJpgFCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0wOFQxNTowNjo0MFrOJpiasg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NzQ5Njk2OQ==", "bodyText": "I think we can remove this now as it's not used in any tests or in the Arquillian configuration.", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r647496969", "createdAt": "2021-06-08T14:27:11Z", "author": {"login": "jamezp"}, "path": "testsuite/integration/elytron/pom.xml", "diffHunk": "@@ -281,11 +284,44 @@\n                         <jboss.server.config.file.name>standalone-full.xml</jboss.server.config.file.name>\n                         <jboss.inst>${wildfly.dir}</jboss.inst>\n                         <module.path>${wildfly.dir}/modules</module.path>\n-                        <server.jvm.args>-Dmaven.repo.local=${settings.localRepository} -Djboss.bind.address=${node0} -Djboss.bind.address.management=${node0} ${surefire.system.args} ${jvm.args.ip.server} ${jvm.args.other} ${jvm.args.timeouts} ${extra.server.jvm.args}</server.jvm.args>\n+                        <server.jvm.args>${server.jvm.args}</server.jvm.args>\n                         <node0>${node0}</node0>\n+                        <security.properties>${security.properties}</security.properties>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3dc8ba615b66712954719ae3047ef68270cd25e8"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NzUzNTI4Mg==", "bodyText": "thanks @jamezp, fixed!", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r647535282", "createdAt": "2021-06-08T15:06:40Z", "author": {"login": "SoniaZaldana"}, "path": "testsuite/integration/elytron/pom.xml", "diffHunk": "@@ -281,11 +284,44 @@\n                         <jboss.server.config.file.name>standalone-full.xml</jboss.server.config.file.name>\n                         <jboss.inst>${wildfly.dir}</jboss.inst>\n                         <module.path>${wildfly.dir}/modules</module.path>\n-                        <server.jvm.args>-Dmaven.repo.local=${settings.localRepository} -Djboss.bind.address=${node0} -Djboss.bind.address.management=${node0} ${surefire.system.args} ${jvm.args.ip.server} ${jvm.args.other} ${jvm.args.timeouts} ${extra.server.jvm.args}</server.jvm.args>\n+                        <server.jvm.args>${server.jvm.args}</server.jvm.args>\n                         <node0>${node0}</node0>\n+                        <security.properties>${security.properties}</security.properties>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NzQ5Njk2OQ=="}, "originalCommit": {"oid": "3dc8ba615b66712954719ae3047ef68270cd25e8"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkNDEwOTEzMDEwOnYy", "diffSide": "RIGHT", "path": "testsuite/integration/elytron/src/test/java/org/wildfly/test/integration/elytron/ssl/UndertowSSLv2HelloTestCase.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0wOFQxNDozMDo0MlrOJpgStg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0wOFQxNTowNzoxMVrOJpicnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NzUwMDQ3MA==", "bodyText": "This is not critical at all, but there is a TestSuiteEnvironment.isIbmJvm() or TestSuiteEvronment.isJ9Jvm() is case this is supported on OpenJ9.", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r647500470", "createdAt": "2021-06-08T14:30:42Z", "author": {"login": "jamezp"}, "path": "testsuite/integration/elytron/src/test/java/org/wildfly/test/integration/elytron/ssl/UndertowSSLv2HelloTestCase.java", "diffHunk": "@@ -0,0 +1,373 @@\n+/*\n+ * JBoss, Home of Professional Open Source.\n+ * Copyright 2020, Red Hat, Inc., and individual contributors\n+ * as indicated by the @author tags. See the copyright.txt file in the\n+ * distribution for a full listing of individual contributors.\n+ *\n+ * This is free software; you can redistribute it and/or modify it\n+ * under the terms of the GNU Lesser General Public License as\n+ * published by the Free Software Foundation; either version 2.1 of\n+ * the License, or (at your option) any later version.\n+ *\n+ * This software is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this software; if not, write to the Free\n+ * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n+ * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n+ */\n+\n+package org.wildfly.test.integration.elytron.ssl;\n+\n+import static java.security.AccessController.doPrivileged;\n+import static org.jboss.as.test.integration.security.common.SSLTruststoreUtil.HTTPS_PORT;\n+\n+import java.io.File;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.security.PrivilegedAction;\n+import java.security.Security;\n+\n+import javax.ws.rs.ProcessingException;\n+import javax.ws.rs.client.Client;\n+import javax.ws.rs.client.ClientBuilder;\n+import javax.ws.rs.core.Response;\n+\n+import org.codehaus.plexus.util.FileUtils;\n+import org.jboss.arquillian.container.test.api.Deployment;\n+import org.jboss.arquillian.container.test.api.RunAsClient;\n+import org.jboss.arquillian.junit.Arquillian;\n+import org.jboss.as.arquillian.api.ServerSetup;\n+import org.jboss.as.controller.client.ModelControllerClient;\n+import org.jboss.as.test.integration.management.util.CLIWrapper;\n+import org.jboss.as.test.integration.security.common.CoreUtils;\n+import org.jboss.as.test.integration.security.common.SecurityTestConstants;\n+import org.jboss.as.test.shared.TestSuiteEnvironment;\n+import org.jboss.shrinkwrap.api.ShrinkWrap;\n+import org.jboss.shrinkwrap.api.asset.StringAsset;\n+import org.jboss.shrinkwrap.api.spec.WebArchive;\n+import org.junit.AfterClass;\n+import org.junit.Assert;\n+import org.junit.AssumptionViolatedException;\n+import org.junit.BeforeClass;\n+import org.junit.ClassRule;\n+import org.junit.Test;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.model.Statement;\n+import org.wildfly.security.auth.client.AuthenticationContext;\n+import org.wildfly.security.auth.client.ElytronXmlParser;\n+import org.wildfly.security.auth.client.InvalidAuthenticationConfigurationException;\n+import org.wildfly.test.integration.elytron.util.WelcomeContent;\n+import org.wildfly.test.security.common.AbstractElytronSetupTask;\n+import org.wildfly.test.security.common.elytron.ConfigurableElement;\n+import org.wildfly.test.security.common.elytron.CredentialReference;\n+import org.wildfly.test.security.common.elytron.Path;\n+import org.wildfly.test.security.common.elytron.SimpleKeyManager;\n+import org.wildfly.test.security.common.elytron.SimpleKeyStore;\n+import org.wildfly.test.security.common.elytron.SimpleServerSslContext;\n+import org.wildfly.test.security.common.elytron.SimpleTrustManager;\n+\n+/**\n+ * Smoke test for two way SSL connection with Undertow HTTPS listener backed by Elytron\n+ * server-ssl-context\n+ * with need-client-auth=true (client certificate is required) using SSLv2Hello.\n+ *\n+ * In case the client certificate is not trusted or present, the SSL handshake should fail.\n+ *\n+ * Additionally, smoke test for one way SSL connection with Undertow HTTPS listener\n+ * backed by Elytron server-ssl-context.\n+ *\n+ * @author Ondrej Kotek\n+ * @author Sonia Zaldana\n+ */\n+@RunWith(Arquillian.class)\n+@ServerSetup({ UndertowSSLv2HelloTestCase.ElytronSslContextInUndertowSetupTask.class, WelcomeContent.SetupTask.class})\n+@RunAsClient\n+public class UndertowSSLv2HelloTestCase {\n+\n+    private static final String NAME = UndertowTwoWaySslNeedClientAuthTestCase.class.getSimpleName();\n+    private static final File WORK_DIR = new File(\"target\" + File.separatorChar +  NAME);\n+    private static final File SERVER_KEYSTORE_FILE = new File(WORK_DIR, SecurityTestConstants.SERVER_KEYSTORE);\n+    private static final File SERVER_TRUSTSTORE_FILE = new File(WORK_DIR, SecurityTestConstants.SERVER_TRUSTSTORE);\n+    private static final String PASSWORD = SecurityTestConstants.KEYSTORE_PASSWORD;\n+    private static final String SSLV2HELLO_CONTEXT = \"SSLv2HelloContext\";\n+    private static final String DEFAULT_CONTEXT = \"DefaultContext\";\n+    private static final String SSLV2HELLO_CONTEXT_ONE_WAY = \"SSLv2HelloContextOneWay\";\n+    private static final String HTTPS = \"https\";\n+    private static URL securedRootUrl;\n+    public static String disabledAlgorithms;\n+\n+    @ClassRule\n+    public static IbmVerification ibmVerification =\n+            new IbmVerification(System.getProperty(\"java.vendor\").contains(\"IBM\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3dc8ba615b66712954719ae3047ef68270cd25e8"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NzUzNTc3Mw==", "bodyText": "Added TestSuiteEnvironment.isIbmJvm() instead.", "url": "https://github.com/wildfly/wildfly/pull/13673#discussion_r647535773", "createdAt": "2021-06-08T15:07:11Z", "author": {"login": "SoniaZaldana"}, "path": "testsuite/integration/elytron/src/test/java/org/wildfly/test/integration/elytron/ssl/UndertowSSLv2HelloTestCase.java", "diffHunk": "@@ -0,0 +1,373 @@\n+/*\n+ * JBoss, Home of Professional Open Source.\n+ * Copyright 2020, Red Hat, Inc., and individual contributors\n+ * as indicated by the @author tags. See the copyright.txt file in the\n+ * distribution for a full listing of individual contributors.\n+ *\n+ * This is free software; you can redistribute it and/or modify it\n+ * under the terms of the GNU Lesser General Public License as\n+ * published by the Free Software Foundation; either version 2.1 of\n+ * the License, or (at your option) any later version.\n+ *\n+ * This software is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this software; if not, write to the Free\n+ * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n+ * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n+ */\n+\n+package org.wildfly.test.integration.elytron.ssl;\n+\n+import static java.security.AccessController.doPrivileged;\n+import static org.jboss.as.test.integration.security.common.SSLTruststoreUtil.HTTPS_PORT;\n+\n+import java.io.File;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.security.PrivilegedAction;\n+import java.security.Security;\n+\n+import javax.ws.rs.ProcessingException;\n+import javax.ws.rs.client.Client;\n+import javax.ws.rs.client.ClientBuilder;\n+import javax.ws.rs.core.Response;\n+\n+import org.codehaus.plexus.util.FileUtils;\n+import org.jboss.arquillian.container.test.api.Deployment;\n+import org.jboss.arquillian.container.test.api.RunAsClient;\n+import org.jboss.arquillian.junit.Arquillian;\n+import org.jboss.as.arquillian.api.ServerSetup;\n+import org.jboss.as.controller.client.ModelControllerClient;\n+import org.jboss.as.test.integration.management.util.CLIWrapper;\n+import org.jboss.as.test.integration.security.common.CoreUtils;\n+import org.jboss.as.test.integration.security.common.SecurityTestConstants;\n+import org.jboss.as.test.shared.TestSuiteEnvironment;\n+import org.jboss.shrinkwrap.api.ShrinkWrap;\n+import org.jboss.shrinkwrap.api.asset.StringAsset;\n+import org.jboss.shrinkwrap.api.spec.WebArchive;\n+import org.junit.AfterClass;\n+import org.junit.Assert;\n+import org.junit.AssumptionViolatedException;\n+import org.junit.BeforeClass;\n+import org.junit.ClassRule;\n+import org.junit.Test;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.model.Statement;\n+import org.wildfly.security.auth.client.AuthenticationContext;\n+import org.wildfly.security.auth.client.ElytronXmlParser;\n+import org.wildfly.security.auth.client.InvalidAuthenticationConfigurationException;\n+import org.wildfly.test.integration.elytron.util.WelcomeContent;\n+import org.wildfly.test.security.common.AbstractElytronSetupTask;\n+import org.wildfly.test.security.common.elytron.ConfigurableElement;\n+import org.wildfly.test.security.common.elytron.CredentialReference;\n+import org.wildfly.test.security.common.elytron.Path;\n+import org.wildfly.test.security.common.elytron.SimpleKeyManager;\n+import org.wildfly.test.security.common.elytron.SimpleKeyStore;\n+import org.wildfly.test.security.common.elytron.SimpleServerSslContext;\n+import org.wildfly.test.security.common.elytron.SimpleTrustManager;\n+\n+/**\n+ * Smoke test for two way SSL connection with Undertow HTTPS listener backed by Elytron\n+ * server-ssl-context\n+ * with need-client-auth=true (client certificate is required) using SSLv2Hello.\n+ *\n+ * In case the client certificate is not trusted or present, the SSL handshake should fail.\n+ *\n+ * Additionally, smoke test for one way SSL connection with Undertow HTTPS listener\n+ * backed by Elytron server-ssl-context.\n+ *\n+ * @author Ondrej Kotek\n+ * @author Sonia Zaldana\n+ */\n+@RunWith(Arquillian.class)\n+@ServerSetup({ UndertowSSLv2HelloTestCase.ElytronSslContextInUndertowSetupTask.class, WelcomeContent.SetupTask.class})\n+@RunAsClient\n+public class UndertowSSLv2HelloTestCase {\n+\n+    private static final String NAME = UndertowTwoWaySslNeedClientAuthTestCase.class.getSimpleName();\n+    private static final File WORK_DIR = new File(\"target\" + File.separatorChar +  NAME);\n+    private static final File SERVER_KEYSTORE_FILE = new File(WORK_DIR, SecurityTestConstants.SERVER_KEYSTORE);\n+    private static final File SERVER_TRUSTSTORE_FILE = new File(WORK_DIR, SecurityTestConstants.SERVER_TRUSTSTORE);\n+    private static final String PASSWORD = SecurityTestConstants.KEYSTORE_PASSWORD;\n+    private static final String SSLV2HELLO_CONTEXT = \"SSLv2HelloContext\";\n+    private static final String DEFAULT_CONTEXT = \"DefaultContext\";\n+    private static final String SSLV2HELLO_CONTEXT_ONE_WAY = \"SSLv2HelloContextOneWay\";\n+    private static final String HTTPS = \"https\";\n+    private static URL securedRootUrl;\n+    public static String disabledAlgorithms;\n+\n+    @ClassRule\n+    public static IbmVerification ibmVerification =\n+            new IbmVerification(System.getProperty(\"java.vendor\").contains(\"IBM\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NzUwMDQ3MA=="}, "originalCommit": {"oid": "3dc8ba615b66712954719ae3047ef68270cd25e8"}, "originalPosition": 107}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4139, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}