{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyODgwNjYy", "number": 13544, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNjo0MDoyN1rOEh-OEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxOTo0Njo0M1rOEkN0Aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MDU3ODc1OnYy", "diffSide": "RIGHT", "path": "webservices/server-integration/pom.xml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNjo0MDoyN1rOHPlLCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjozMzo1NVrOHSKTDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA5OTcyMw==", "bodyText": "Only mockito-core was added, rest of the lines were just reformatted...", "url": "https://github.com/wildfly/wildfly/pull/13544#discussion_r486099723", "createdAt": "2020-09-10T06:40:27Z", "author": {"login": "TomasHofman"}, "path": "webservices/server-integration/pom.xml", "diffHunk": "@@ -42,102 +42,107 @@\n     <name>WildFly: Web Services Server Integration Subsystem</name>\n \n     <dependencies>\n-    <dependency>\n-       <groupId>junit</groupId>\n-       <artifactId>junit</artifactId>\n-       <scope>test</scope>\n-    </dependency>\n-\n-    <dependency>\n-       <groupId>org.jboss.msc</groupId>\n-       <artifactId>jboss-msc</artifactId>\n-    </dependency>\n-\n-    <dependency>\n-       <groupId>org.wildfly.security</groupId>\n-       <artifactId>wildfly-elytron</artifactId>\n-    </dependency>\n-\n-    <dependency>\n-       <groupId>org.wildfly.core</groupId>\n+        <dependency>\n+            <groupId>junit</groupId>\n+            <artifactId>junit</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.mockito</groupId>\n+            <artifactId>mockito-core</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8eb6faff6b198f771463e2e703df51ec0459d7e3"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjczMDYwNw==", "bodyText": "@TomasHofman  Can you please only add the  mockito-core dependency in this PR and format this pom file in another PR ?", "url": "https://github.com/wildfly/wildfly/pull/13544#discussion_r486730607", "createdAt": "2020-09-11T02:05:51Z", "author": {"login": "jimma"}, "path": "webservices/server-integration/pom.xml", "diffHunk": "@@ -42,102 +42,107 @@\n     <name>WildFly: Web Services Server Integration Subsystem</name>\n \n     <dependencies>\n-    <dependency>\n-       <groupId>junit</groupId>\n-       <artifactId>junit</artifactId>\n-       <scope>test</scope>\n-    </dependency>\n-\n-    <dependency>\n-       <groupId>org.jboss.msc</groupId>\n-       <artifactId>jboss-msc</artifactId>\n-    </dependency>\n-\n-    <dependency>\n-       <groupId>org.wildfly.security</groupId>\n-       <artifactId>wildfly-elytron</artifactId>\n-    </dependency>\n-\n-    <dependency>\n-       <groupId>org.wildfly.core</groupId>\n+        <dependency>\n+            <groupId>junit</groupId>\n+            <artifactId>junit</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.mockito</groupId>\n+            <artifactId>mockito-core</artifactId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA5OTcyMw=="}, "originalCommit": {"oid": "8eb6faff6b198f771463e2e703df51ec0459d7e3"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODgwNTEzMw==", "bodyText": "OK, done.", "url": "https://github.com/wildfly/wildfly/pull/13544#discussion_r488805133", "createdAt": "2020-09-15T16:33:55Z", "author": {"login": "TomasHofman"}, "path": "webservices/server-integration/pom.xml", "diffHunk": "@@ -42,102 +42,107 @@\n     <name>WildFly: Web Services Server Integration Subsystem</name>\n \n     <dependencies>\n-    <dependency>\n-       <groupId>junit</groupId>\n-       <artifactId>junit</artifactId>\n-       <scope>test</scope>\n-    </dependency>\n-\n-    <dependency>\n-       <groupId>org.jboss.msc</groupId>\n-       <artifactId>jboss-msc</artifactId>\n-    </dependency>\n-\n-    <dependency>\n-       <groupId>org.wildfly.security</groupId>\n-       <artifactId>wildfly-elytron</artifactId>\n-    </dependency>\n-\n-    <dependency>\n-       <groupId>org.wildfly.core</groupId>\n+        <dependency>\n+            <groupId>junit</groupId>\n+            <artifactId>junit</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.mockito</groupId>\n+            <artifactId>mockito-core</artifactId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA5OTcyMw=="}, "originalCommit": {"oid": "8eb6faff6b198f771463e2e703df51ec0459d7e3"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NDU5MTQ4OnYy", "diffSide": "RIGHT", "path": "webservices/server-integration/src/main/java/org/jboss/as/webservices/deployers/WSClassVerificationProcessor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwMjoxMjowMFrOHQLx7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjozNjoyMVrOHSKZPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjczMjI2OQ==", "bodyText": "If I understand this correctly, here we already checked Ear deployment. Do we really need this recursion after this check ?\nI don't know if this case has already been checked:  there is another sub-deployment has cxf dependencies, and ear-subdeployments-isolated set to false . Do we need to look at this ?", "url": "https://github.com/wildfly/wildfly/pull/13544#discussion_r486732269", "createdAt": "2020-09-11T02:12:00Z", "author": {"login": "jimma"}, "path": "webservices/server-integration/src/main/java/org/jboss/as/webservices/deployers/WSClassVerificationProcessor.java", "diffHunk": "@@ -138,14 +138,28 @@ private void verifyApacheCXFModuleDependencyRequirement(DeploymentUnit unit) {\n         }\n     }\n \n-    private static boolean hasCxfModuleDependency(DeploymentUnit unit) {\n+    static boolean hasCxfModuleDependency(DeploymentUnit unit) {\n         final ModuleSpecification moduleSpec = unit.getAttachment(Attachments.MODULE_SPECIFICATION);\n         for (ModuleDependency dep : moduleSpec.getUserDependencies()) {\n             final String id = dep.getIdentifier().getName();\n             if (cxfExportingModules.contains(id)) {\n                 return true;\n             }\n         }\n+        return hasParentCxfModuleDependency(unit);\n+    }\n+\n+    private static boolean hasParentCxfModuleDependency(DeploymentUnit unit) {\n+        if (unit.getParent() != null) {\n+            final ModuleSpecification moduleSpec = unit.getParent().getAttachment(Attachments.MODULE_SPECIFICATION);\n+            for (ModuleDependency dep : moduleSpec.getUserDependencies()) {\n+                final String id = dep.getIdentifier().getName();\n+                if (cxfExportingModules.contains(id) && dep.isExport()) {\n+                    return true;\n+                }\n+            }\n+            return hasParentCxfModuleDependency(unit.getParent());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8eb6faff6b198f771463e2e703df51ec0459d7e3"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODgwNjcxNg==", "bodyText": "Agree, based on jboss deployment structure XSD, recursion is not necessary.\nI added another check that should take subdeployments-isolated into account.", "url": "https://github.com/wildfly/wildfly/pull/13544#discussion_r488806716", "createdAt": "2020-09-15T16:36:21Z", "author": {"login": "TomasHofman"}, "path": "webservices/server-integration/src/main/java/org/jboss/as/webservices/deployers/WSClassVerificationProcessor.java", "diffHunk": "@@ -138,14 +138,28 @@ private void verifyApacheCXFModuleDependencyRequirement(DeploymentUnit unit) {\n         }\n     }\n \n-    private static boolean hasCxfModuleDependency(DeploymentUnit unit) {\n+    static boolean hasCxfModuleDependency(DeploymentUnit unit) {\n         final ModuleSpecification moduleSpec = unit.getAttachment(Attachments.MODULE_SPECIFICATION);\n         for (ModuleDependency dep : moduleSpec.getUserDependencies()) {\n             final String id = dep.getIdentifier().getName();\n             if (cxfExportingModules.contains(id)) {\n                 return true;\n             }\n         }\n+        return hasParentCxfModuleDependency(unit);\n+    }\n+\n+    private static boolean hasParentCxfModuleDependency(DeploymentUnit unit) {\n+        if (unit.getParent() != null) {\n+            final ModuleSpecification moduleSpec = unit.getParent().getAttachment(Attachments.MODULE_SPECIFICATION);\n+            for (ModuleDependency dep : moduleSpec.getUserDependencies()) {\n+                final String id = dep.getIdentifier().getName();\n+                if (cxfExportingModules.contains(id) && dep.isExport()) {\n+                    return true;\n+                }\n+            }\n+            return hasParentCxfModuleDependency(unit.getParent());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjczMjI2OQ=="}, "originalCommit": {"oid": "8eb6faff6b198f771463e2e703df51ec0459d7e3"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2NDEwNDk5OnYy", "diffSide": "RIGHT", "path": "webservices/server-integration/src/test/java/org/jboss/as/webservices/deployers/WSClassVerificationProcessorTestCase.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxOTo0Njo0M1rOHTBw4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwNzoyNjowOVrOHTU6rA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTcxMzg5MA==", "bodyText": "Missing copyright header.", "url": "https://github.com/wildfly/wildfly/pull/13544#discussion_r489713890", "createdAt": "2020-09-16T19:46:43Z", "author": {"login": "darranl"}, "path": "webservices/server-integration/src/test/java/org/jboss/as/webservices/deployers/WSClassVerificationProcessorTestCase.java", "diffHunk": "@@ -0,0 +1,95 @@\n+package org.jboss.as.webservices.deployers;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cfc7bae9410288514fad6ad348276833690a1da"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAyNzY5Mg==", "bodyText": "Fixed by #13580, thanks!", "url": "https://github.com/wildfly/wildfly/pull/13544#discussion_r490027692", "createdAt": "2020-09-17T07:26:09Z", "author": {"login": "TomasHofman"}, "path": "webservices/server-integration/src/test/java/org/jboss/as/webservices/deployers/WSClassVerificationProcessorTestCase.java", "diffHunk": "@@ -0,0 +1,95 @@\n+package org.jboss.as.webservices.deployers;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTcxMzg5MA=="}, "originalCommit": {"oid": "9cfc7bae9410288514fad6ad348276833690a1da"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4181, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}