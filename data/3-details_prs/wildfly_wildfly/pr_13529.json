{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4Mzc4MDcy", "number": 13529, "title": "[WFLY-13356]:Add webservices galleon layer", "bodyText": "JIRA: https://issues.redhat.com/browse/WFLY-13356\nAnalysis doc: wildfly/wildfly-proposals#334", "createdAt": "2020-09-03T05:59:54Z", "url": "https://github.com/wildfly/wildfly/pull/13529", "merged": true, "mergeCommit": {"oid": "aaa57235bcc9897be984ca97ae2b92dd55bcb753"}, "closed": true, "closedAt": "2020-09-11T17:09:19Z", "author": {"login": "jimma"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFi5BrgBqjM3MjkxNTcwODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHqe-WgBqjM3NTM3NTc1NjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "33b6324c64345961838ad0cd4356b693efda4b95", "author": {"user": {"login": "jimma", "name": "jimma"}}, "url": "https://github.com/wildfly/wildfly/commit/33b6324c64345961838ad0cd4356b693efda4b95", "committedDate": "2020-09-04T09:50:18Z", "message": "[WFLY-13356]:Add ws module to layer profile"}, "afterCommit": {"oid": "c6c7627f1628626af921c3e8d831e39c4178e6b0", "author": {"user": {"login": "jimma", "name": "jimma"}}, "url": "https://github.com/wildfly/wildfly/commit/c6c7627f1628626af921c3e8d831e39c4178e6b0", "committedDate": "2020-09-04T10:37:29Z", "message": "[WFLY-13356]:Change ejb dependency name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c6c7627f1628626af921c3e8d831e39c4178e6b0", "author": {"user": {"login": "jimma", "name": "jimma"}}, "url": "https://github.com/wildfly/wildfly/commit/c6c7627f1628626af921c3e8d831e39c4178e6b0", "committedDate": "2020-09-04T10:37:29Z", "message": "[WFLY-13356]:Change ejb dependency name"}, "afterCommit": {"oid": "7be027df624985dc9adbddd088d648bcdfa120b4", "author": {"user": {"login": "jimma", "name": "jimma"}}, "url": "https://github.com/wildfly/wildfly/commit/7be027df624985dc9adbddd088d648bcdfa120b4", "committedDate": "2020-09-05T00:38:28Z", "message": "[WFLY-13356]:Add webservices galleon layer"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMDE3NzQ4", "url": "https://github.com/wildfly/wildfly/pull/13529#pullrequestreview-483017748", "createdAt": "2020-09-05T00:56:49Z", "commit": {"oid": "7be027df624985dc9adbddd088d648bcdfa120b4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNVQwMDo1Njo0OVrOHNeaGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNVQwMDo1Njo0OVrOHNeaGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg5MTczOA==", "bodyText": "Is remote EJB support the common case with webservices? If so this is ok; otherwise ejb-lite is better as it has fewer dependencies. If a user wanted @Remote they could just add the 'ejb' layer and have that.\nI see a few tests in testsuite/integration/ws use @Remote EJBs but if that's just for test coverage and it's not the typical use case those could be run in a separate execution with a server that included the 'ejb' layer.\nSorry if this has been discussed and I missed it or forgot.", "url": "https://github.com/wildfly/wildfly/pull/13529#discussion_r483891738", "createdAt": "2020-09-05T00:56:49Z", "author": {"login": "bstansberry"}, "path": "ee-feature-pack/galleon-common/src/main/resources/layers/standalone/webservices/layer-spec.xml", "diffHunk": "@@ -0,0 +1,20 @@\n+<?xml version=\"1.0\" ?>\n+<layer-spec xmlns=\"urn:jboss:galleon:layer-spec:1.0\" name=\"webservices\">\n+    <dependencies>\n+        <layer name=\"web-server\"/>\n+        <layer name=\"ejb\" optional=\"true\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7be027df624985dc9adbddd088d648bcdfa120b4"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMDU0MDQ3", "url": "https://github.com/wildfly/wildfly/pull/13529#pullrequestreview-483054047", "createdAt": "2020-09-05T13:01:55Z", "commit": {"oid": "54adadd21f7c6de66d1a192ed79740974ad1b827"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c3d5fd9288aea73911426793fb703179d4fa2efe", "author": {"user": {"login": "jimma", "name": "jimma"}}, "url": "https://github.com/wildfly/wildfly/commit/c3d5fd9288aea73911426793fb703179d4fa2efe", "committedDate": "2020-09-09T11:19:15Z", "message": "[WFLY-13356]:Remove the h2-default-datasource layer from ws testsuite"}, "afterCommit": {"oid": "9731535dd5b8390add876d4f512fec87bde15759", "author": {"user": {"login": "jimma", "name": "jimma"}}, "url": "https://github.com/wildfly/wildfly/commit/9731535dd5b8390add876d4f512fec87bde15759", "committedDate": "2020-09-10T01:06:47Z", "message": "[WFLY-13356]:Remove the h2-default-datasource layer from ws testsuite"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1ODUxMDUy", "url": "https://github.com/wildfly/wildfly/pull/13529#pullrequestreview-485851052", "createdAt": "2020-09-10T11:53:02Z", "commit": {"oid": "9731535dd5b8390add876d4f512fec87bde15759"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMTo1MzowM1rOHPv72A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMTo1MzowM1rOHPv72A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjI3NjA1Ng==", "bodyText": "@jimma this was added wit commit \"[WFLY-13356]:Use ejb-lite dependency\" ... ee-feature-pack/galleon-common/src/main/resources/layers/standalone/webservices/layer-spec.xml correcly uses ejb-lite layer, while the testsuite/integration/ws/pom.xml uses ejb layer, is that intentional?", "url": "https://github.com/wildfly/wildfly/pull/13529#discussion_r486276056", "createdAt": "2020-09-10T11:53:03Z", "author": {"login": "tommaso-borgato"}, "path": "testsuite/integration/ws/pom.xml", "diffHunk": "@@ -254,9 +254,258 @@\n                                     <environmentVariables>\n                                         <JBOSS_HOME>${jboss.dist}</JBOSS_HOME>\n                                     </environmentVariables>\n-\n                                     <!-- Parameters to test cases. -->\n+                                    <systemPropertyVariables>\n+                                        <jboss.install.dir>${basedir}/target/wildfly</jboss.install.dir>\n+                                        <jboss.server.config.file.name>standalone.xml</jboss.server.config.file.name>\n+                                        <!-- EJB client library hack, see WFLY-4973-->\n+                                        <org.jboss.ejb.client.wildfly-testsuite-hack>true</org.jboss.ejb.client.wildfly-testsuite-hack>\n+\n+                                        <!-- SSL settings -->\n+                                        <cxf.tls-client.disableCNCheck>true</cxf.tls-client.disableCNCheck>\n+                                        <javax.net.ssl.trustStore>${project.build.testOutputDirectory}/org/jboss/as/test/integration/ws/wsse/trust/test.truststore</javax.net.ssl.trustStore>\n+                                        <javax.net.ssl.trustStorePassword>changeit</javax.net.ssl.trustStorePassword>\n+                                        <javax.net.ssl.trustStoreType>jks</javax.net.ssl.trustStoreType>\n+                                        <javax.net.ssl.keyStore>${project.build.testOutputDirectory}/org/jboss/as/test/integration/ws/wsse/trust/client.keystore</javax.net.ssl.keyStore>\n+                                        <javax.net.ssl.keyStorePassword>changeit</javax.net.ssl.keyStorePassword>\n+                                        <javax.net.ssl.keyStoreType>jks</javax.net.ssl.keyStoreType>\n+                                    </systemPropertyVariables>\n+\n+                                    <additionalClasspathElements>\n+                                        <additionalClasspathElement>${project.basedir}/../src/test/resources</additionalClasspathElement>\n+                                    </additionalClasspathElements>\n+                                </configuration>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+        </profile>\n+\n+\n+        <!-- Test against slimmed servers provisioned by Galleon -->\n+        <profile>\n+            <id>layers.profile</id>\n+            <activation>\n+                <property>\n+                    <name>ts.layers</name>\n+                </property>\n+            </activation>\n+            <build>\n+                <plugins>\n+                    <!-- Disable the standard copy-based provisioning -->\n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins</groupId>\n+                        <artifactId>maven-resources-plugin</artifactId>\n+                        <executions combine.children=\"append\">\n+                            <execution>\n+                                <id>ts.copy-wildfly</id>\n+                                <goals>\n+                                    <goal>copy-resources</goal>\n+                                </goals>\n+                                <phase>none</phase>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                    <plugin>\n+                        <groupId>org.jboss.galleon</groupId>\n+                        <artifactId>galleon-maven-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <id>webservices-provisioning</id>\n+                                <goals>\n+                                    <goal>provision</goal>\n+                                </goals>\n+                                <phase>compile</phase>\n+                                <configuration>\n+                                    <install-dir>${project.build.directory}/wildfly-webservices</install-dir>\n+                                    <record-state>false</record-state>\n+                                    <log-time>${galleon.log.time}</log-time>\n+                                    <offline>true</offline>\n+                                    <plugin-options>\n+                                        <jboss-maven-dist/>\n+                                        <jboss-fork-embedded>${galleon.fork.embedded}</jboss-fork-embedded>\n+                                        <optional-packages>passive+</optional-packages>\n+                                    </plugin-options>\n+                                    <feature-packs>\n+                                        <feature-pack>\n+                                            <groupId>${project.groupId}</groupId>\n+                                            <artifactId>${testsuite.ee.galleon.pack.artifactId}</artifactId>\n+                                            <version>${testsuite.ee.galleon.pack.version}</version>\n+                                            <inherit-configs>false</inherit-configs>\n+                                            <inherit-packages>false</inherit-packages>\n+                                        </feature-pack>\n+                                    </feature-packs>\n+                                    <configurations>\n+                                        <config>\n+                                            <model>standalone</model>\n+                                            <name>standalone.xml</name>\n+                                            <layers>\n+                                                <layer>cloud-server</layer>\n+                                                <layer>webservices</layer>\n+                                            </layers>\n+                                        </config>\n+                                    </configurations>\n+                                </configuration>\n+                            </execution>\n+                            <execution>\n+                                <id>webservices-ejb-provisioning</id>\n+                                <goals>\n+                                    <goal>provision</goal>\n+                                </goals>\n+                                <phase>compile</phase>\n+                                <configuration>\n+                                    <install-dir>${project.build.directory}/wildfly-webservices-ejb</install-dir>\n+                                    <record-state>false</record-state>\n+                                    <log-time>${galleon.log.time}</log-time>\n+                                    <offline>true</offline>\n+                                    <plugin-options>\n+                                        <jboss-maven-dist/>\n+                                        <jboss-fork-embedded>${galleon.fork.embedded}</jboss-fork-embedded>\n+                                        <optional-packages>passive+</optional-packages>\n+                                    </plugin-options>\n+                                    <feature-packs>\n+                                        <feature-pack>\n+                                            <groupId>${project.groupId}</groupId>\n+                                            <artifactId>${testsuite.ee.galleon.pack.artifactId}</artifactId>\n+                                            <version>${testsuite.ee.galleon.pack.version}</version>\n+                                            <inherit-configs>false</inherit-configs>\n+                                            <inherit-packages>false</inherit-packages>\n+                                        </feature-pack>\n+                                    </feature-packs>\n+                                    <configurations>\n+                                        <config>\n+                                            <model>standalone</model>\n+                                            <name>standalone.xml</name>\n+                                            <layers>\n+                                                <layer>cloud-server</layer>\n+                                                <layer>ejb</layer>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9731535dd5b8390add876d4f512fec87bde15759"}, "originalPosition": 139}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71cb248b57e213acb09be3a514047c38cb0f4640", "author": {"user": {"login": "jimma", "name": "jimma"}}, "url": "https://github.com/wildfly/wildfly/commit/71cb248b57e213acb09be3a514047c38cb0f4640", "committedDate": "2020-09-11T00:42:53Z", "message": "[WFLY-13356]:Add webservices galleon layer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "720d9a82e7c7800892ccb2024080ef7da75692f4", "author": {"user": {"login": "jimma", "name": "jimma"}}, "url": "https://github.com/wildfly/wildfly/commit/720d9a82e7c7800892ccb2024080ef7da75692f4", "committedDate": "2020-09-11T00:42:53Z", "message": "[WFLY-13356]:Use ejb-lite dependency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b97628eb620cc83e721f26d4fcb1bde7a6a0d8b6", "author": {"user": {"login": "jimma", "name": "jimma"}}, "url": "https://github.com/wildfly/wildfly/commit/b97628eb620cc83e721f26d4fcb1bde7a6a0d8b6", "committedDate": "2020-09-11T00:42:53Z", "message": "[WFLY-13356]:Remove the h2-default-datasource layer from ws testsuite"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9731535dd5b8390add876d4f512fec87bde15759", "author": {"user": {"login": "jimma", "name": "jimma"}}, "url": "https://github.com/wildfly/wildfly/commit/9731535dd5b8390add876d4f512fec87bde15759", "committedDate": "2020-09-10T01:06:47Z", "message": "[WFLY-13356]:Remove the h2-default-datasource layer from ws testsuite"}, "afterCommit": {"oid": "b97628eb620cc83e721f26d4fcb1bde7a6a0d8b6", "author": {"user": {"login": "jimma", "name": "jimma"}}, "url": "https://github.com/wildfly/wildfly/commit/b97628eb620cc83e721f26d4fcb1bde7a6a0d8b6", "committedDate": "2020-09-11T00:42:53Z", "message": "[WFLY-13356]:Remove the h2-default-datasource layer from ws testsuite"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3860, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}