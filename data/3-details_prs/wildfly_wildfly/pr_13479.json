{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2NjU1MDQy", "number": 13479, "title": "[WFLY-13754] Allow injection for JSF artifacts", "bodyText": "Issue: https://issues.redhat.com/browse/WFLY-13754\nNo hurries with this one. Trying to make the JSF test-suite work with wildfly in order to test the JSF implementation with it. Some tests fail and among them some are real issues (this is one of them).\nThe idea of the change is adding all the artifacts that are eligible for injection to the JSFComponentProcessor. I'm following the same idea used previously but generalized with a tree of desired components to be installed (previously only the phase-listener component was taken into account). Besides only one parsing is executed to do the job (previously there were two).\nI'm assigning it to @fjuma, but this is not urgent at all. With another minor change I'm able to execute all the tests in the groups that mojarra seems to be executing on their PRs (for example this old PR).\nNot adding any test because the idea is using the included mojarra tests in order to check our jsf branches.", "createdAt": "2020-08-12T09:51:40Z", "url": "https://github.com/wildfly/wildfly/pull/13479", "merged": true, "mergeCommit": {"oid": "f26ded9b9267e8de15a5162de3dc137fc71c2449"}, "closed": true, "closedAt": "2020-10-23T01:33:43Z", "author": {"login": "rmartinc"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-gXTSAFqTQ2Njc4MTQ5OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVH9ISgFqTUxNTA5MTg2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NzgxNDk4", "url": "https://github.com/wildfly/wildfly/pull/13479#pullrequestreview-466781498", "createdAt": "2020-08-13T13:51:48Z", "commit": {"oid": "195f9a74c944363d181fccf60fc40c9edc5686e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMzo1MTo0OFrOHAMgXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMzo1MTo0OFrOHAMgXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTk2Njk0Mg==", "bodyText": "Does this new message describe the same situation as the old message, just with slightly different wording?  If not a new message should probably be used as the message ids are meant to be dictionary keys with the entry they point to (say a kbase, our own or a users) not radically changing.\nI recognize there can be some gray area here; if there is whatever @fjuma thinks best is fine with me.", "url": "https://github.com/wildfly/wildfly/pull/13479#discussion_r469966942", "createdAt": "2020-08-13T13:51:48Z", "author": {"login": "bstansberry"}, "path": "jsf/subsystem/src/main/java/org/jboss/as/jsf/logging/JSFLogger.java", "diffHunk": "@@ -104,8 +104,8 @@\n     DeploymentUnitProcessingException invalidDefaultJSFImpl(String defaultJsfVersion);\n \n     @LogMessage(level = ERROR)\n-    @Message(id = 15, value = \"Failed to parse %s, phase listeners defined in this file will not be available\")\n-    void phaseListenersConfigParseFailed(VirtualFile facesConfig);\n+    @Message(id = 15, value = \"Failed to parse %s, JSF artifacts defined in this file will not be available\")\n+    void jsfArtifactsConfigParseFailed(VirtualFile facesConfig);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "195f9a74c944363d181fccf60fc40c9edc5686e0"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MTMyOTAz", "url": "https://github.com/wildfly/wildfly/pull/13479#pullrequestreview-467132903", "createdAt": "2020-08-13T21:11:15Z", "commit": {"oid": "195f9a74c944363d181fccf60fc40c9edc5686e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QyMToxMToxNVrOHAd07w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QyMToxMToxNVrOHAd07w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI1MDczNQ==", "bodyText": "Can all the whitespace issues in this PR be cleaned up please? Thanks.", "url": "https://github.com/wildfly/wildfly/pull/13479#discussion_r470250735", "createdAt": "2020-08-13T21:11:15Z", "author": {"login": "bstansberry"}, "path": "jsf/subsystem/src/main/java/org/jboss/as/jsf/deployment/JSFComponentProcessor.java", "diffHunk": "@@ -67,13 +73,149 @@\n \n     private static final String WEB_INF_FACES_CONFIG = \"WEB-INF/faces-config.xml\";\n \n-    private static final String MANAGED_BEAN = \"managed-bean\";\n-    private static final String MANAGED_BEAN_CLASS = \"managed-bean-class\";\n-    private static final String LIFECYCLE = \"lifecycle\";\n-    private static final String PHASE_LISTENER = \"phase-listener\";\n-\n     private static final String CONFIG_FILES = \"javax.faces.CONFIG_FILES\";\n \n+    /**\n+     * JSF tags that should be checked in the configuration file. All the\n+     * tags that are needed for injection are taken into account.\n+     * If more artifacts should be included just add it to the enum and to\n+     * the <em>facesConfigElement</em> tree in order to be parsed.\n+     */\n+    private enum JsfTag {\n+      FACES_CONFIG,\n+        FACTORY,\n+          APPLICATION_FACTORY,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "195f9a74c944363d181fccf60fc40c9edc5686e0"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f578cc422b004e4b158d73925d62cdc0744f1c9", "author": {"user": {"login": "rmartinc", "name": null}}, "url": "https://github.com/wildfly/wildfly/commit/4f578cc422b004e4b158d73925d62cdc0744f1c9", "committedDate": "2020-08-25T06:51:05Z", "message": "[WFLY-13754] Allow injection for JSF artifacts"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "195f9a74c944363d181fccf60fc40c9edc5686e0", "author": {"user": {"login": "rmartinc", "name": null}}, "url": "https://github.com/wildfly/wildfly/commit/195f9a74c944363d181fccf60fc40c9edc5686e0", "committedDate": "2020-08-12T09:29:44Z", "message": "[WFLY-13754] Allow injection for JSF artifacts"}, "afterCommit": {"oid": "4f578cc422b004e4b158d73925d62cdc0744f1c9", "author": {"user": {"login": "rmartinc", "name": null}}, "url": "https://github.com/wildfly/wildfly/commit/4f578cc422b004e4b158d73925d62cdc0744f1c9", "committedDate": "2020-08-25T06:51:05Z", "message": "[WFLY-13754] Allow injection for JSF artifacts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNzAzOTc1", "url": "https://github.com/wildfly/wildfly/pull/13479#pullrequestreview-490703975", "createdAt": "2020-09-17T15:10:31Z", "commit": {"oid": "4f578cc422b004e4b158d73925d62cdc0744f1c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MDkxODY2", "url": "https://github.com/wildfly/wildfly/pull/13479#pullrequestreview-515091866", "createdAt": "2020-10-22T20:25:46Z", "commit": {"oid": "4f578cc422b004e4b158d73925d62cdc0744f1c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3958, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}