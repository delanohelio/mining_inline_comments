{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NjA4ODAz", "number": 13804, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNzozODozN1rOFCfzxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNzozODozN1rOFCfzxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4MTYyNjI5OnYy", "diffSide": "RIGHT", "path": "ejb3/src/main/java/org/jboss/as/ejb3/deployment/processors/EjbJarParsingDeploymentUnitProcessor.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNzozODozN1rOIBsTxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxOToxNDowN1rOIBx4sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY0NTQ0NA==", "bodyText": "Is dropping the case sensitivity bit ok? I don't recall us doing anything to control what case is used for any runtime-name the user provides via the management API.", "url": "https://github.com/wildfly/wildfly/pull/13804#discussion_r538645444", "createdAt": "2020-12-08T17:38:37Z", "author": {"login": "bstansberry"}, "path": "ejb3/src/main/java/org/jboss/as/ejb3/deployment/processors/EjbJarParsingDeploymentUnitProcessor.java", "diffHunk": "@@ -191,14 +189,15 @@ public void undeploy(DeploymentUnit unit) {\n \n     }\n \n-    private static VirtualFile getDescriptor(final VirtualFile deploymentRoot, final String descriptorName) {\n+    private static VirtualFile getDescriptor(final DeploymentUnit deploymentUnit, final VirtualFile deploymentRoot, final String descriptorName) {\n+        final String deploymentUnitName = deploymentUnit.getName();\n         // Locate the descriptor\n         final VirtualFile descriptor;\n         // EJB 3.1 FR 20.4 Enterprise Beans Packaged in a .war\n-        if (isWar(deploymentRoot)) {\n+        if (deploymentUnitName.endsWith(WAR_FILE_EXTENSION)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0999a4b5d2f9b4b4072e58c0152f08dd5563b227"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY2MDU0OA==", "bodyText": "I believe in the EE spec, these file extensions (.war, .jar, .ear) are case-sensitive. So if WildFly follows this rule and convention (some parts are outside the spec but WildFly still follows this convention), I think make the case sensitive will be cleaner. Not sure how common is case-insensitive runtime-name.", "url": "https://github.com/wildfly/wildfly/pull/13804#discussion_r538660548", "createdAt": "2020-12-08T17:52:32Z", "author": {"login": "chengfang"}, "path": "ejb3/src/main/java/org/jboss/as/ejb3/deployment/processors/EjbJarParsingDeploymentUnitProcessor.java", "diffHunk": "@@ -191,14 +189,15 @@ public void undeploy(DeploymentUnit unit) {\n \n     }\n \n-    private static VirtualFile getDescriptor(final VirtualFile deploymentRoot, final String descriptorName) {\n+    private static VirtualFile getDescriptor(final DeploymentUnit deploymentUnit, final VirtualFile deploymentRoot, final String descriptorName) {\n+        final String deploymentUnitName = deploymentUnit.getName();\n         // Locate the descriptor\n         final VirtualFile descriptor;\n         // EJB 3.1 FR 20.4 Enterprise Beans Packaged in a .war\n-        if (isWar(deploymentRoot)) {\n+        if (deploymentUnitName.endsWith(WAR_FILE_EXTENSION)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY0NTQ0NA=="}, "originalCommit": {"oid": "0999a4b5d2f9b4b4072e58c0152f08dd5563b227"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODczNjgxNg==", "bodyText": "I changed to compare the extensions case-insensitive, trying to be consistent with existing behavior.", "url": "https://github.com/wildfly/wildfly/pull/13804#discussion_r538736816", "createdAt": "2020-12-08T19:14:07Z", "author": {"login": "chengfang"}, "path": "ejb3/src/main/java/org/jboss/as/ejb3/deployment/processors/EjbJarParsingDeploymentUnitProcessor.java", "diffHunk": "@@ -191,14 +189,15 @@ public void undeploy(DeploymentUnit unit) {\n \n     }\n \n-    private static VirtualFile getDescriptor(final VirtualFile deploymentRoot, final String descriptorName) {\n+    private static VirtualFile getDescriptor(final DeploymentUnit deploymentUnit, final VirtualFile deploymentRoot, final String descriptorName) {\n+        final String deploymentUnitName = deploymentUnit.getName();\n         // Locate the descriptor\n         final VirtualFile descriptor;\n         // EJB 3.1 FR 20.4 Enterprise Beans Packaged in a .war\n-        if (isWar(deploymentRoot)) {\n+        if (deploymentUnitName.endsWith(WAR_FILE_EXTENSION)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY0NTQ0NA=="}, "originalCommit": {"oid": "0999a4b5d2f9b4b4072e58c0152f08dd5563b227"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4033, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}