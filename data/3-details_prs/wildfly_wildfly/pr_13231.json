{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2OTE1MDMx", "number": 13231, "title": "[WFLY-13125] Adding support for External HTTP authentication mechanis\u2026", "bodyText": "\u2026m with Elytron\nhttps://issues.redhat.com/browse/WFLY-13125\nhttps://issues.redhat.com/browse/EAP7-1323\nThis PR adds support for the external HTTP mechanism with Elytron\nAnalysis document: wildfly/wildfly-proposals#282\nDepends on  wildfly/wildfly-core#4177, wildfly-security/wildfly-elytron#1386, wildfly-security/elytron-web#174, and undertow-io/undertow#881", "createdAt": "2020-04-21T21:19:49Z", "url": "https://github.com/wildfly/wildfly/pull/13231", "merged": true, "mergeCommit": {"oid": "74de7259819b3a46600745e57bf25023bb913aba"}, "closed": true, "closedAt": "2020-09-17T01:45:39Z", "author": {"login": "ashley-abdelsayed98"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclyUWvAFqTQyMDM4NzI1Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-jQe2AH2gAyNDA2OTE1MDMxOjczMDE0NzVhYWNjNzhkYzVmYzY1MWVhZDEwODRmYWQyNWY4OWU0Y2I=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMzg3MjU2", "url": "https://github.com/wildfly/wildfly/pull/13231#pullrequestreview-420387256", "createdAt": "2020-05-28T18:38:45Z", "commit": {"oid": "42464a3c01a1c83b38e57bddcc4a7d6cec50b4cb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxODozODo0NVrOGcBySw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxODozODo0NVrOGcBySw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjA0MjU3MQ==", "bodyText": "s/preform/perform", "url": "https://github.com/wildfly/wildfly/pull/13231#discussion_r432042571", "createdAt": "2020-05-28T18:38:45Z", "author": {"login": "fjuma"}, "path": "docs/src/main/asciidoc/_high-availability/subsystem-support/mod_cluster_Subsystem.adoc", "diffHunk": "@@ -415,4 +415,19 @@ which corresponds the following in the xml configuration file:\n </subsystem>\n ----\n \n-include::SSL_Configuration_using_Elytron_Subsystem.adoc[leveloffset=+1]\n\\ No newline at end of file\n+include::SSL_Configuration_using_Elytron_Subsystem.adoc[leveloffset=+1]\n+\n+== Remote User Authentication with Elytron\n+\n+It is possible to accept a `REMOTE_USER` already authenticated by the Apache httpd server with Elytron via the AJP protocol.\n+This can be done by setting up Elytron to secure a WildFly deployment and specifying for the External HTTP mechanism to\n+be used. This is done by creating a security domain and specifying the External mechanism as one of the mechanism\n+configurations to be used by the `http-authentication-factory`:\n+\n+----\n+/subsystem=elytron/http-authentication-factory=web-tests:add(security-domain=example-domain, http-server-mechanism-factory=example-factory,\n+mechanism-configurations=[{mechanism-name=EXTERNAL}])\n+----\n+\n+Elytron will accept the externally authenticated user and use the specified security domain to preform role mapping to", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42464a3c01a1c83b38e57bddcc4a7d6cec50b4cb"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "42464a3c01a1c83b38e57bddcc4a7d6cec50b4cb", "author": {"user": {"login": "ashley-abdelsayed98", "name": "Ashley Abdel-Sayed"}}, "url": "https://github.com/wildfly/wildfly/commit/42464a3c01a1c83b38e57bddcc4a7d6cec50b4cb", "committedDate": "2020-04-21T19:31:58Z", "message": "[WFLY-13125] Adding support for External HTTP authentication mechanism with Elytron"}, "afterCommit": {"oid": "3a364113ea117d5f6357e8b5a13e87a06f9f6adf", "author": {"user": {"login": "ashley-abdelsayed98", "name": "Ashley Abdel-Sayed"}}, "url": "https://github.com/wildfly/wildfly/commit/3a364113ea117d5f6357e8b5a13e87a06f9f6adf", "committedDate": "2020-06-09T18:50:27Z", "message": "[WFLY-13125] Adding support for External HTTP authentication mechanism with Elytron"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a364113ea117d5f6357e8b5a13e87a06f9f6adf", "author": {"user": {"login": "ashley-abdelsayed98", "name": "Ashley Abdel-Sayed"}}, "url": "https://github.com/wildfly/wildfly/commit/3a364113ea117d5f6357e8b5a13e87a06f9f6adf", "committedDate": "2020-06-09T18:50:27Z", "message": "[WFLY-13125] Adding support for External HTTP authentication mechanism with Elytron"}, "afterCommit": {"oid": "aa8fd87109778091e4d52c5715258d1525d529b3", "author": {"user": {"login": "ashley-abdelsayed98", "name": "Ashley Abdel-Sayed"}}, "url": "https://github.com/wildfly/wildfly/commit/aa8fd87109778091e4d52c5715258d1525d529b3", "committedDate": "2020-06-09T18:51:11Z", "message": "[WFLY-13125] Adding support for External HTTP authentication mechanism with Elytron"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4Mjg0NjI0", "url": "https://github.com/wildfly/wildfly/pull/13231#pullrequestreview-428284624", "createdAt": "2020-06-10T17:37:31Z", "commit": {"oid": "aa8fd87109778091e4d52c5715258d1525d529b3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aa8fd87109778091e4d52c5715258d1525d529b3", "author": {"user": {"login": "ashley-abdelsayed98", "name": "Ashley Abdel-Sayed"}}, "url": "https://github.com/wildfly/wildfly/commit/aa8fd87109778091e4d52c5715258d1525d529b3", "committedDate": "2020-06-09T18:51:11Z", "message": "[WFLY-13125] Adding support for External HTTP authentication mechanism with Elytron"}, "afterCommit": {"oid": "b5628a90e282515ab75645d89ad7ef785e26cd11", "author": {"user": {"login": "ashley-abdelsayed98", "name": "Ashley Abdel-Sayed"}}, "url": "https://github.com/wildfly/wildfly/commit/b5628a90e282515ab75645d89ad7ef785e26cd11", "committedDate": "2020-06-22T13:51:50Z", "message": "[WFLY-13125] Adding support for External HTTP authentication mechanism with Elytron"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MDE4MzM3", "url": "https://github.com/wildfly/wildfly/pull/13231#pullrequestreview-435018337", "createdAt": "2020-06-22T15:08:14Z", "commit": {"oid": "b5628a90e282515ab75645d89ad7ef785e26cd11"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNTowODoxNVrOGnFAcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNTowODoxNVrOGnFAcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzYyOTY4Mg==", "bodyText": "This is causing a compile error. The REMOTE_USER cannot be found.", "url": "https://github.com/wildfly/wildfly/pull/13231#discussion_r443629682", "createdAt": "2020-06-22T15:08:15Z", "author": {"login": "jamezp"}, "path": "testsuite/integration/web/src/test/java/org/jboss/as/test/integration/web/security/external/UserHandler.java", "diffHunk": "@@ -20,6 +20,7 @@ public void handleRequest(HttpServerExchange exchange) throws Exception {\n         String user = exchange.getRequestHeaders().getFirst(\"User\");\n         if(user != null) {\n             exchange.putAttachment(ExternalAuthenticationMechanism.EXTERNAL_PRINCIPAL, user);\n+            exchange.putAttachment(HttpServerExchange.REMOTE_USER, user);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5628a90e282515ab75645d89ad7ef785e26cd11"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5628a90e282515ab75645d89ad7ef785e26cd11", "author": {"user": {"login": "ashley-abdelsayed98", "name": "Ashley Abdel-Sayed"}}, "url": "https://github.com/wildfly/wildfly/commit/b5628a90e282515ab75645d89ad7ef785e26cd11", "committedDate": "2020-06-22T13:51:50Z", "message": "[WFLY-13125] Adding support for External HTTP authentication mechanism with Elytron"}, "afterCommit": {"oid": "7725f7e38e5fc25d91ae052bcde4b2a818e88f73", "author": {"user": {"login": "ashley-abdelsayed98", "name": "Ashley Abdel-Sayed"}}, "url": "https://github.com/wildfly/wildfly/commit/7725f7e38e5fc25d91ae052bcde4b2a818e88f73", "committedDate": "2020-07-17T19:48:01Z", "message": "[WFLY-13125] Adding support for External HTTP authentication mechanism with Elytron"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3b1d50b01d741e056dacb4f3d600e28a29c30c2", "author": {"user": {"login": "ashley-abdelsayed98", "name": "Ashley Abdel-Sayed"}}, "url": "https://github.com/wildfly/wildfly/commit/f3b1d50b01d741e056dacb4f3d600e28a29c30c2", "committedDate": "2020-08-10T14:24:53Z", "message": "[WFLY-13125] Adding support for External HTTP authentication mechanism with Elytron"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7725f7e38e5fc25d91ae052bcde4b2a818e88f73", "author": {"user": {"login": "ashley-abdelsayed98", "name": "Ashley Abdel-Sayed"}}, "url": "https://github.com/wildfly/wildfly/commit/7725f7e38e5fc25d91ae052bcde4b2a818e88f73", "committedDate": "2020-07-17T19:48:01Z", "message": "[WFLY-13125] Adding support for External HTTP authentication mechanism with Elytron"}, "afterCommit": {"oid": "f3b1d50b01d741e056dacb4f3d600e28a29c30c2", "author": {"user": {"login": "ashley-abdelsayed98", "name": "Ashley Abdel-Sayed"}}, "url": "https://github.com/wildfly/wildfly/commit/f3b1d50b01d741e056dacb4f3d600e28a29c30c2", "committedDate": "2020-08-10T14:24:53Z", "message": "[WFLY-13125] Adding support for External HTTP authentication mechanism with Elytron"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7301475aacc78dc5fc651ead1084fad25f89e4cb", "author": {"user": {"login": "marekkopecky", "name": null}}, "url": "https://github.com/wildfly/wildfly/commit/7301475aacc78dc5fc651ead1084fad25f89e4cb", "committedDate": "2020-08-13T17:14:04Z", "message": "[WFLY-13125] Improve tests for External HTTP authentication mechanism with Elytron"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3531, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}