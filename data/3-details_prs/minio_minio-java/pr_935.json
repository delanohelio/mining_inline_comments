{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MDMzMzc0", "number": 935, "title": "add arg builder to {set,get,delete}DefaultRetention APIs", "bodyText": "", "createdAt": "2020-05-14T14:26:23Z", "url": "https://github.com/minio/minio-java/pull/935", "merged": true, "mergeCommit": {"oid": "0b493c1ea7dd693c3a09c14b55884f738a785a30"}, "closed": true, "closedAt": "2020-06-03T05:56:05Z", "author": {"login": "balamurugana"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchfLJegFqTQxMjUwMjQzMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcni-TQgFqTQyMzIzNjkxNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNTAyNDMx", "url": "https://github.com/minio/minio-java/pull/935#pullrequestreview-412502431", "createdAt": "2020-05-15T09:46:18Z", "commit": {"oid": "ebf2002bce1436e3df590b2fb526fa4892a586d0"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwOTo0NjoxOFrOGV-B4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMDowNDo0MFrOGV-nQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTY4OTU3MQ==", "bodyText": "We should set some default retention and then try to fetch it out in example code.", "url": "https://github.com/minio/minio-java/pull/935#discussion_r425689571", "createdAt": "2020-05-15T09:46:18Z", "author": {"login": "sinhaashish"}, "path": "api/src/main/java/io/minio/MinioClient.java", "diffHunk": "@@ -3502,23 +3502,60 @@ public void disableVersioning(String bucketName)\n    * @throws NoSuchAlgorithmException thrown to indicate missing of MD5 or SHA-256 digest library.\n    * @throws XmlParserException thrown to indicate XML parsing error.\n    */\n+  @Deprecated\n   public void setDefaultRetention(String bucketName, ObjectLockConfiguration config)\n       throws ErrorResponseException, IllegalArgumentException, InsufficientDataException,\n           InternalException, InvalidBucketNameException, InvalidKeyException,\n           InvalidResponseException, IOException, NoSuchAlgorithmException, XmlParserException {\n+    setDefaultRetention(\n+        SetDefaultRetentionArgs.builder().bucket(bucketName).config(config).build());\n+  }\n+\n+  /**\n+   * Sets default object retention in a bucket.\n+   *\n+   * <pre>Example:{@code\n+   * ObjectLockConfiguration config = new ObjectLockConfiguration(\n+   *     RetentionMode.COMPLIANCE, new RetentionDurationDays(100));\n+   * minioClient.setDefaultRetention(\n+   *     SetDefaultRetentionArgs.builder().bucket(\"my-bucketname\").config(config).build());\n+   * }</pre>\n+   *\n+   * @param args {@link SetDefaultRetentionArgs} object.\n+   * @throws ErrorResponseException thrown to indicate S3 service returned an error response.\n+   * @throws IllegalArgumentException throws to indicate invalid argument passed.\n+   * @throws InsufficientDataException thrown to indicate not enough data available in InputStream.\n+   * @throws InternalException thrown to indicate internal library error.\n+   * @throws InvalidBucketNameException thrown to indicate invalid bucket name passed.\n+   * @throws InvalidKeyException thrown to indicate missing of HMAC SHA-256 library.\n+   * @throws InvalidResponseException thrown to indicate S3 service returned invalid or no error\n+   *     response.\n+   * @throws IOException thrown to indicate I/O error on S3 operation.\n+   * @throws NoSuchAlgorithmException thrown to indicate missing of MD5 or SHA-256 digest library.\n+   * @throws XmlParserException thrown to indicate XML parsing error.\n+   */\n+  public void setDefaultRetention(SetDefaultRetentionArgs args)\n+      throws ErrorResponseException, IllegalArgumentException, InsufficientDataException,\n+          InternalException, InvalidBucketNameException, InvalidKeyException,\n+          InvalidResponseException, IOException, NoSuchAlgorithmException, XmlParserException {\n+    if (args == null) {\n+      throw new IllegalArgumentException(\"null arguments\");\n+    }\n+\n     Map<String, String> queryParamMap = new HashMap<>();\n     queryParamMap.put(\"object-lock\", \"\");\n \n-    Response response = executePut(bucketName, null, null, queryParamMap, config, 0);\n-    response.body().close();\n+    Response response = executePut(args.bucketName(), null, null, queryParamMap, args.config(), 0);\n+    response.close();\n   }\n \n   /**\n    * Gets default object retention in a bucket.\n    *\n    * <pre>Example:{@code\n    * // bucket must be created with object lock enabled.\n-   * minioClient.makeBucket(\"my-bucketname\", null, true);\n+   * minioClient.makeBucket(\n+   *     MakeBucketArgs.builder().bucket(\"my-bucketname\").objectLock(true).build());\n    * ObjectLockConfiguration config = minioClient.getDefaultRetention(\"my-bucketname\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf2002bce1436e3df590b2fb526fa4892a586d0"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTY5MDYyNQ==", "bodyText": "We should set some default retention and then try to fetch it.", "url": "https://github.com/minio/minio-java/pull/935#discussion_r425690625", "createdAt": "2020-05-15T09:48:18Z", "author": {"login": "sinhaashish"}, "path": "api/src/main/java/io/minio/MinioClient.java", "diffHunk": "@@ -3539,17 +3576,56 @@ public void setDefaultRetention(String bucketName, ObjectLockConfiguration confi\n    * @throws NoSuchAlgorithmException thrown to indicate missing of MD5 or SHA-256 digest library.\n    * @throws XmlParserException thrown to indicate XML parsing error.\n    */\n+  @Deprecated\n   public ObjectLockConfiguration getDefaultRetention(String bucketName)\n       throws ErrorResponseException, IllegalArgumentException, InsufficientDataException,\n           InternalException, InvalidBucketNameException, InvalidKeyException,\n           InvalidResponseException, IOException, NoSuchAlgorithmException, XmlParserException {\n+    return getDefaultRetention(GetDefaultRetentionArgs.builder().bucket(bucketName).build());\n+  }\n+\n+  /**\n+   * Gets default object retention in a bucket.\n+   *\n+   * <pre>Example:{@code\n+   * // bucket must be created with object lock enabled.\n+   * minioClient.makeBucket(\n+   *     MakeBucketArgs.builder().bucket(\"my-bucketname\").objectLock(true).build());\n+   * ObjectLockConfiguration config =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf2002bce1436e3df590b2fb526fa4892a586d0"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTY5NTM1Mg==", "bodyText": "Remove java.lang.String-", "url": "https://github.com/minio/minio-java/pull/935#discussion_r425695352", "createdAt": "2020-05-15T09:57:24Z", "author": {"login": "sinhaashish"}, "path": "docs/API.md", "diffHunk": "@@ -834,22 +836,22 @@ minioClient.setBucketPolicy(\"my-bucketname\", policyJson);\n ```\n \n <a name=\"setDefaultRetention\"></a>\n-### setDefaultRetention(String bucketName, ObjectLockConfiguration config)\n-`public void setDefaultRetention(String bucketName, ObjectLockConfiguration config)` _[[Javadoc]](http://minio.github.io/minio-java/io/minio/MinioClient.html#setDefaultRetention-java.lang.String-io.minio.messages.ObjectLockConfiguration-)_\n+### setDefaultRetention(SetDefaultRetentionArgs args)\n+`public void setDefaultRetention(SetDefaultRetentionArgs args)` _[[Javadoc]](http://minio.github.io/minio-java/io/minio/MinioClient.html#setDefaultRetention-java.lang.String-io.minio.messages.ObjectLockConfiguration-)_", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf2002bce1436e3df590b2fb526fa4892a586d0"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTY5OTEzOA==", "bodyText": "IMO we should have a complete example, like creating the bucket, setting the default retention and then fetching it. So that  user just have to edit the credentials and run the file.", "url": "https://github.com/minio/minio-java/pull/935#discussion_r425699138", "createdAt": "2020-05-15T10:04:40Z", "author": {"login": "sinhaashish"}, "path": "examples/GetDefaultRetention.java", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+ * MinIO Java SDK for Amazon S3 Compatible Cloud Storage, (C) 2019 MinIO, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+import io.minio.GetDefaultRetentionArgs;\n+import io.minio.MinioClient;\n+import io.minio.errors.MinioException;\n+import io.minio.messages.ObjectLockConfiguration;\n+import java.io.IOException;\n+import java.security.InvalidKeyException;\n+import java.security.NoSuchAlgorithmException;\n+\n+public class GetDefaultRetention {\n+  /** MinioClient.getDefaultRetention() example. */\n+  public static void main(String[] args)\n+      throws IOException, NoSuchAlgorithmException, InvalidKeyException {\n+    try {\n+      /* Amazon S3: */\n+      MinioClient s3Client =\n+          new MinioClient(\"https://s3.amazonaws.com\", \"YOUR-ACCESSKEYID\", \"YOUR-SECRETACCESSKEY\");\n+\n+      ObjectLockConfiguration config =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf2002bce1436e3df590b2fb526fa4892a586d0"}, "originalPosition": 34}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ebf2002bce1436e3df590b2fb526fa4892a586d0", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/ebf2002bce1436e3df590b2fb526fa4892a586d0", "committedDate": "2020-05-14T14:25:29Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}, "afterCommit": {"oid": "92c28ed237a687d1c7fff56687f034c37c737144", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/92c28ed237a687d1c7fff56687f034c37c737144", "committedDate": "2020-05-15T16:56:14Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "92c28ed237a687d1c7fff56687f034c37c737144", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/92c28ed237a687d1c7fff56687f034c37c737144", "committedDate": "2020-05-15T16:56:14Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}, "afterCommit": {"oid": "787d9bb5380c8b897cc8cba37f6ee10a5dc18786", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/787d9bb5380c8b897cc8cba37f6ee10a5dc18786", "committedDate": "2020-05-19T14:43:43Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "787d9bb5380c8b897cc8cba37f6ee10a5dc18786", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/787d9bb5380c8b897cc8cba37f6ee10a5dc18786", "committedDate": "2020-05-19T14:43:43Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}, "afterCommit": {"oid": "2135974f0e33f99a08af155c7b40abaca5591617", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/2135974f0e33f99a08af155c7b40abaca5591617", "committedDate": "2020-05-21T10:22:34Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2135974f0e33f99a08af155c7b40abaca5591617", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/2135974f0e33f99a08af155c7b40abaca5591617", "committedDate": "2020-05-21T10:22:34Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}, "afterCommit": {"oid": "cb399ba211883910c6ce615059403bef2db53c52", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/cb399ba211883910c6ce615059403bef2db53c52", "committedDate": "2020-05-21T10:28:37Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cb399ba211883910c6ce615059403bef2db53c52", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/cb399ba211883910c6ce615059403bef2db53c52", "committedDate": "2020-05-21T10:28:37Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}, "afterCommit": {"oid": "eb5e5151a8244b890604c29af88cd1fb612a557c", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/eb5e5151a8244b890604c29af88cd1fb612a557c", "committedDate": "2020-05-22T06:57:02Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb5e5151a8244b890604c29af88cd1fb612a557c", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/eb5e5151a8244b890604c29af88cd1fb612a557c", "committedDate": "2020-05-22T06:57:02Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}, "afterCommit": {"oid": "d44dfd8743cb8e662b5a9d5305ae4455a701dfb0", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/d44dfd8743cb8e662b5a9d5305ae4455a701dfb0", "committedDate": "2020-05-26T09:57:30Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d44dfd8743cb8e662b5a9d5305ae4455a701dfb0", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/d44dfd8743cb8e662b5a9d5305ae4455a701dfb0", "committedDate": "2020-05-26T09:57:30Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}, "afterCommit": {"oid": "0f16896c79625297190d5adf6addc0cd4a02838a", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/0f16896c79625297190d5adf6addc0cd4a02838a", "committedDate": "2020-05-28T04:28:27Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0f16896c79625297190d5adf6addc0cd4a02838a", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/0f16896c79625297190d5adf6addc0cd4a02838a", "committedDate": "2020-05-28T04:28:27Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}, "afterCommit": {"oid": "4084abae2c374b1c3ef03adfa06d9880611ce906", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/4084abae2c374b1c3ef03adfa06d9880611ce906", "committedDate": "2020-05-29T04:52:08Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4084abae2c374b1c3ef03adfa06d9880611ce906", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/4084abae2c374b1c3ef03adfa06d9880611ce906", "committedDate": "2020-05-29T04:52:08Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}, "afterCommit": {"oid": "46320165a7b259868d5729b6c132247f04e351ac", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/46320165a7b259868d5729b6c132247f04e351ac", "committedDate": "2020-05-29T14:00:16Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46320165a7b259868d5729b6c132247f04e351ac", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/46320165a7b259868d5729b6c132247f04e351ac", "committedDate": "2020-05-29T14:00:16Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}, "afterCommit": {"oid": "c5f2f1f697f5224ac25a2a0839532e7d2226ae36", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/c5f2f1f697f5224ac25a2a0839532e7d2226ae36", "committedDate": "2020-05-30T18:21:47Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c5f2f1f697f5224ac25a2a0839532e7d2226ae36", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/c5f2f1f697f5224ac25a2a0839532e7d2226ae36", "committedDate": "2020-05-30T18:21:47Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}, "afterCommit": {"oid": "a32c068e1db978454711fce2d15fc3bb748bb3c3", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/a32c068e1db978454711fce2d15fc3bb748bb3c3", "committedDate": "2020-05-31T05:20:05Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a32c068e1db978454711fce2d15fc3bb748bb3c3", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/a32c068e1db978454711fce2d15fc3bb748bb3c3", "committedDate": "2020-05-31T05:20:05Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}, "afterCommit": {"oid": "624ae252ffc3b03c96889b78e25ad33312e38f2d", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/624ae252ffc3b03c96889b78e25ad33312e38f2d", "committedDate": "2020-06-01T16:16:50Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "624ae252ffc3b03c96889b78e25ad33312e38f2d", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/624ae252ffc3b03c96889b78e25ad33312e38f2d", "committedDate": "2020-06-01T16:16:50Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}, "afterCommit": {"oid": "762df3cfe704473a73edfb721b37cc3c6ed4c886", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/762df3cfe704473a73edfb721b37cc3c6ed4c886", "committedDate": "2020-06-02T07:04:07Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMzkyNTQ0", "url": "https://github.com/minio/minio-java/pull/935#pullrequestreview-422392544", "createdAt": "2020-06-02T06:59:57Z", "commit": {"oid": "624ae252ffc3b03c96889b78e25ad33312e38f2d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwNjo1OTo1N1rOGdkiXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwNzoxODo0MFrOGdlDwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY2MDUwOA==", "bodyText": "Please add an @Override annotation", "url": "https://github.com/minio/minio-java/pull/935#discussion_r433660508", "createdAt": "2020-06-02T06:59:57Z", "author": {"login": "anjalshireesh"}, "path": "api/src/main/java/io/minio/SetDefaultRetentionArgs.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * MinIO Java SDK for Amazon S3 Compatible Cloud Storage, (C) 2020 MinIO, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.minio;\n+\n+import io.minio.messages.ObjectLockConfiguration;\n+\n+/** Argument class of MinioClient.setDefaultRetention(). */\n+public class SetDefaultRetentionArgs extends BucketArgs {\n+  private ObjectLockConfiguration config;\n+\n+  public ObjectLockConfiguration config() {\n+    return config;\n+  }\n+\n+  public static Builder builder() {\n+    return new Builder();\n+  }\n+\n+  /** Argument builder of {@link SetDefaultRetentionArgs}. */\n+  public static final class Builder extends BucketArgs.Builder<Builder, SetDefaultRetentionArgs> {\n+    private void validateConfig(ObjectLockConfiguration config) {\n+      if (config == null) {\n+        throw new IllegalArgumentException(\"null object-lock configuration\");\n+      }\n+    }\n+\n+    protected void validate(SetDefaultRetentionArgs args) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "624ae252ffc3b03c96889b78e25ad33312e38f2d"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY2NjUxMg==", "bodyText": "Retention mode and duration can be logged as args", "url": "https://github.com/minio/minio-java/pull/935#discussion_r433666512", "createdAt": "2020-06-02T07:13:15Z", "author": {"login": "anjalshireesh"}, "path": "functional/FunctionalTest.java", "diffHunk": "@@ -3593,37 +3596,22 @@ public static void setDefaultRetention_test() throws Exception {\n       try {\n         ObjectLockConfiguration config =\n             new ObjectLockConfiguration(RetentionMode.COMPLIANCE, new RetentionDurationDays(10));\n-        client.setDefaultRetention(bucketName, config);\n+        client.setDefaultRetention(\n+            SetDefaultRetentionArgs.builder().bucket(bucketName).config(config).build());\n       } finally {\n         client.removeBucket(RemoveBucketArgs.builder().bucket(bucketName).build());\n       }\n-      mintSuccessLog(\"setDefaultRetention (String bucketName)\", null, startTime);\n+      mintSuccessLog(methodName, null, startTime);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "762df3cfe704473a73edfb721b37cc3c6ed4c886"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY2ODg5OQ==", "bodyText": "This whole code seems to be same as the previous lines except for the retention mode and duration. It can be made into a method and called twice with different arguments. Something like:\n  testGetDefaultRetentionFor(RetentionMode.COMPLIANCE, new RetentionDurationDays(10));\n  testGetDefaultRetentionFor(RetentionMode.GOVERNANCE, new RetentionDurationYears(1));", "url": "https://github.com/minio/minio-java/pull/935#discussion_r433668899", "createdAt": "2020-06-02T07:18:21Z", "author": {"login": "anjalshireesh"}, "path": "functional/FunctionalTest.java", "diffHunk": "@@ -3633,66 +3621,49 @@ public static void getDefaultRetention_test() throws Exception {\n       try {\n         ObjectLockConfiguration expectedConfig =\n             new ObjectLockConfiguration(RetentionMode.COMPLIANCE, new RetentionDurationDays(10));\n-        client.setDefaultRetention(bucketName, expectedConfig);\n-        ObjectLockConfiguration config = client.getDefaultRetention(bucketName);\n+        client.setDefaultRetention(\n+            SetDefaultRetentionArgs.builder().bucket(bucketName).config(expectedConfig).build());\n+        ObjectLockConfiguration config =\n+            client.getDefaultRetention(\n+                GetDefaultRetentionArgs.builder().bucket(bucketName).build());\n \n-        if ((!(config.duration().unit() == expectedConfig.duration().unit()\n-                && config.duration().duration() == expectedConfig.duration().duration()))\n-            || (config.mode() != expectedConfig.mode())) {\n+        if (config.mode() != expectedConfig.mode()) {\n           throw new Exception(\n-              \"[FAILED] Expected: expected duration : \"\n-                  + expectedConfig.duration()\n-                  + \", got: \"\n-                  + config.duration()\n-                  + \" expected mode :\"\n-                  + expectedConfig.mode()\n-                  + \", got: \"\n-                  + config.mode());\n+              \"[FAILED] mode: expected: \" + expectedConfig.mode() + \", got: \" + config.mode());\n+        }\n+\n+        if (config.duration().unit() != expectedConfig.duration().unit()\n+            || config.duration().duration() != expectedConfig.duration().duration()) {\n+          throw new Exception(\n+              \"[FAILED] duration: \" + expectedConfig.duration() + \", got: \" + config.duration());\n         }\n \n         expectedConfig =\n             new ObjectLockConfiguration(RetentionMode.GOVERNANCE, new RetentionDurationYears(1));\n-        client.setDefaultRetention(bucketName, expectedConfig);\n-        config = client.getDefaultRetention(bucketName);\n+        client.setDefaultRetention(\n+            SetDefaultRetentionArgs.builder().bucket(bucketName).config(expectedConfig).build());\n+        config =\n+            client.getDefaultRetention(\n+                GetDefaultRetentionArgs.builder().bucket(bucketName).build());\n \n-        if ((!(config.duration().unit() == expectedConfig.duration().unit()\n-                && config.duration().duration() == expectedConfig.duration().duration()))\n-            || (config.mode() != expectedConfig.mode())) {\n+        if (config.mode() != expectedConfig.mode()) {\n           throw new Exception(\n-              \"[FAILED] Expected: expected duration : \"\n-                  + expectedConfig.duration()\n-                  + \", got: \"\n-                  + config.duration()\n-                  + \" expected mode :\"\n-                  + expectedConfig.mode()\n-                  + \", got: \"\n-                  + config.mode());\n+              \"[FAILED] mode: expected: \" + expectedConfig.mode() + \", got: \" + config.mode());\n         }\n+\n+        if (config.duration().unit() != expectedConfig.duration().unit()\n+            || config.duration().duration() != expectedConfig.duration().duration()) {\n+          throw new Exception(\n+              \"[FAILED] duration: \" + expectedConfig.duration() + \", got: \" + config.duration());\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "762df3cfe704473a73edfb721b37cc3c6ed4c886"}, "originalPosition": 139}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY2OTA1OA==", "bodyText": "The retention mode and duration can be logged as arguments", "url": "https://github.com/minio/minio-java/pull/935#discussion_r433669058", "createdAt": "2020-06-02T07:18:40Z", "author": {"login": "anjalshireesh"}, "path": "functional/FunctionalTest.java", "diffHunk": "@@ -3633,66 +3621,49 @@ public static void getDefaultRetention_test() throws Exception {\n       try {\n         ObjectLockConfiguration expectedConfig =\n             new ObjectLockConfiguration(RetentionMode.COMPLIANCE, new RetentionDurationDays(10));\n-        client.setDefaultRetention(bucketName, expectedConfig);\n-        ObjectLockConfiguration config = client.getDefaultRetention(bucketName);\n+        client.setDefaultRetention(\n+            SetDefaultRetentionArgs.builder().bucket(bucketName).config(expectedConfig).build());\n+        ObjectLockConfiguration config =\n+            client.getDefaultRetention(\n+                GetDefaultRetentionArgs.builder().bucket(bucketName).build());\n \n-        if ((!(config.duration().unit() == expectedConfig.duration().unit()\n-                && config.duration().duration() == expectedConfig.duration().duration()))\n-            || (config.mode() != expectedConfig.mode())) {\n+        if (config.mode() != expectedConfig.mode()) {\n           throw new Exception(\n-              \"[FAILED] Expected: expected duration : \"\n-                  + expectedConfig.duration()\n-                  + \", got: \"\n-                  + config.duration()\n-                  + \" expected mode :\"\n-                  + expectedConfig.mode()\n-                  + \", got: \"\n-                  + config.mode());\n+              \"[FAILED] mode: expected: \" + expectedConfig.mode() + \", got: \" + config.mode());\n+        }\n+\n+        if (config.duration().unit() != expectedConfig.duration().unit()\n+            || config.duration().duration() != expectedConfig.duration().duration()) {\n+          throw new Exception(\n+              \"[FAILED] duration: \" + expectedConfig.duration() + \", got: \" + config.duration());\n         }\n \n         expectedConfig =\n             new ObjectLockConfiguration(RetentionMode.GOVERNANCE, new RetentionDurationYears(1));\n-        client.setDefaultRetention(bucketName, expectedConfig);\n-        config = client.getDefaultRetention(bucketName);\n+        client.setDefaultRetention(\n+            SetDefaultRetentionArgs.builder().bucket(bucketName).config(expectedConfig).build());\n+        config =\n+            client.getDefaultRetention(\n+                GetDefaultRetentionArgs.builder().bucket(bucketName).build());\n \n-        if ((!(config.duration().unit() == expectedConfig.duration().unit()\n-                && config.duration().duration() == expectedConfig.duration().duration()))\n-            || (config.mode() != expectedConfig.mode())) {\n+        if (config.mode() != expectedConfig.mode()) {\n           throw new Exception(\n-              \"[FAILED] Expected: expected duration : \"\n-                  + expectedConfig.duration()\n-                  + \", got: \"\n-                  + config.duration()\n-                  + \" expected mode :\"\n-                  + expectedConfig.mode()\n-                  + \", got: \"\n-                  + config.mode());\n+              \"[FAILED] mode: expected: \" + expectedConfig.mode() + \", got: \" + config.mode());\n         }\n+\n+        if (config.duration().unit() != expectedConfig.duration().unit()\n+            || config.duration().duration() != expectedConfig.duration().duration()) {\n+          throw new Exception(\n+              \"[FAILED] duration: \" + expectedConfig.duration() + \", got: \" + config.duration());\n+        }\n+\n       } finally {\n         client.removeBucket(RemoveBucketArgs.builder().bucket(bucketName).build());\n       }\n \n-      mintSuccessLog(\"getDefaultRetention (String bucketName)\", null, startTime);\n-\n+      mintSuccessLog(methodName, null, startTime);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "762df3cfe704473a73edfb721b37cc3c6ed4c886"}, "originalPosition": 147}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "762df3cfe704473a73edfb721b37cc3c6ed4c886", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/762df3cfe704473a73edfb721b37cc3c6ed4c886", "committedDate": "2020-06-02T07:04:07Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}, "afterCommit": {"oid": "98f74f18bbd070001d54bc5f3b474687b7ef31da", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/98f74f18bbd070001d54bc5f3b474687b7ef31da", "committedDate": "2020-06-02T09:41:10Z", "message": "address review comments and add deleteDefaultRetention() API"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNjE0MzU3", "url": "https://github.com/minio/minio-java/pull/935#pullrequestreview-422614357", "createdAt": "2020-06-02T12:14:14Z", "commit": {"oid": "98f74f18bbd070001d54bc5f3b474687b7ef31da"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxMjoxNDoxNFrOGdu1YA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxMjoxNDoxNFrOGdu1YA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzgyOTIxNg==", "bodyText": "Actually if the try-catch and exception handling is also moved to the new method (testGetDefaultRetention) then the args logging can be done.", "url": "https://github.com/minio/minio-java/pull/935#discussion_r433829216", "createdAt": "2020-06-02T12:14:14Z", "author": {"login": "anjalshireesh"}, "path": "functional/FunctionalTest.java", "diffHunk": "@@ -3633,66 +3621,49 @@ public static void getDefaultRetention_test() throws Exception {\n       try {\n         ObjectLockConfiguration expectedConfig =\n             new ObjectLockConfiguration(RetentionMode.COMPLIANCE, new RetentionDurationDays(10));\n-        client.setDefaultRetention(bucketName, expectedConfig);\n-        ObjectLockConfiguration config = client.getDefaultRetention(bucketName);\n+        client.setDefaultRetention(\n+            SetDefaultRetentionArgs.builder().bucket(bucketName).config(expectedConfig).build());\n+        ObjectLockConfiguration config =\n+            client.getDefaultRetention(\n+                GetDefaultRetentionArgs.builder().bucket(bucketName).build());\n \n-        if ((!(config.duration().unit() == expectedConfig.duration().unit()\n-                && config.duration().duration() == expectedConfig.duration().duration()))\n-            || (config.mode() != expectedConfig.mode())) {\n+        if (config.mode() != expectedConfig.mode()) {\n           throw new Exception(\n-              \"[FAILED] Expected: expected duration : \"\n-                  + expectedConfig.duration()\n-                  + \", got: \"\n-                  + config.duration()\n-                  + \" expected mode :\"\n-                  + expectedConfig.mode()\n-                  + \", got: \"\n-                  + config.mode());\n+              \"[FAILED] mode: expected: \" + expectedConfig.mode() + \", got: \" + config.mode());\n+        }\n+\n+        if (config.duration().unit() != expectedConfig.duration().unit()\n+            || config.duration().duration() != expectedConfig.duration().duration()) {\n+          throw new Exception(\n+              \"[FAILED] duration: \" + expectedConfig.duration() + \", got: \" + config.duration());\n         }\n \n         expectedConfig =\n             new ObjectLockConfiguration(RetentionMode.GOVERNANCE, new RetentionDurationYears(1));\n-        client.setDefaultRetention(bucketName, expectedConfig);\n-        config = client.getDefaultRetention(bucketName);\n+        client.setDefaultRetention(\n+            SetDefaultRetentionArgs.builder().bucket(bucketName).config(expectedConfig).build());\n+        config =\n+            client.getDefaultRetention(\n+                GetDefaultRetentionArgs.builder().bucket(bucketName).build());\n \n-        if ((!(config.duration().unit() == expectedConfig.duration().unit()\n-                && config.duration().duration() == expectedConfig.duration().duration()))\n-            || (config.mode() != expectedConfig.mode())) {\n+        if (config.mode() != expectedConfig.mode()) {\n           throw new Exception(\n-              \"[FAILED] Expected: expected duration : \"\n-                  + expectedConfig.duration()\n-                  + \", got: \"\n-                  + config.duration()\n-                  + \" expected mode :\"\n-                  + expectedConfig.mode()\n-                  + \", got: \"\n-                  + config.mode());\n+              \"[FAILED] mode: expected: \" + expectedConfig.mode() + \", got: \" + config.mode());\n         }\n+\n+        if (config.duration().unit() != expectedConfig.duration().unit()\n+            || config.duration().duration() != expectedConfig.duration().duration()) {\n+          throw new Exception(\n+              \"[FAILED] duration: \" + expectedConfig.duration() + \", got: \" + config.duration());\n+        }\n+\n       } finally {\n         client.removeBucket(RemoveBucketArgs.builder().bucket(bucketName).build());\n       }\n \n-      mintSuccessLog(\"getDefaultRetention (String bucketName)\", null, startTime);\n-\n+      mintSuccessLog(methodName, null, startTime);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY2OTA1OA=="}, "originalCommit": {"oid": "762df3cfe704473a73edfb721b37cc3c6ed4c886"}, "originalPosition": 147}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2250265a7d20a76e9d008cab1b0927263f0c6103", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/2250265a7d20a76e9d008cab1b0927263f0c6103", "committedDate": "2020-06-03T04:42:57Z", "message": "add arg builder to {set,get}DefaultRetention APIs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7517d8387aab877ee4ad9817c0beb41c8a95e685", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/7517d8387aab877ee4ad9817c0beb41c8a95e685", "committedDate": "2020-06-03T04:42:58Z", "message": "address review comments and add deleteDefaultRetention() API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98f74f18bbd070001d54bc5f3b474687b7ef31da", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/98f74f18bbd070001d54bc5f3b474687b7ef31da", "committedDate": "2020-06-02T09:41:10Z", "message": "address review comments and add deleteDefaultRetention() API"}, "afterCommit": {"oid": "7517d8387aab877ee4ad9817c0beb41c8a95e685", "author": {"user": {"login": "balamurugana", "name": "Bala FA"}}, "url": "https://github.com/minio/minio-java/commit/7517d8387aab877ee4ad9817c0beb41c8a95e685", "committedDate": "2020-06-03T04:42:58Z", "message": "address review comments and add deleteDefaultRetention() API"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMjI3Nzk2", "url": "https://github.com/minio/minio-java/pull/935#pullrequestreview-423227796", "createdAt": "2020-06-03T05:28:03Z", "commit": {"oid": "7517d8387aab877ee4ad9817c0beb41c8a95e685"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMjM2OTE0", "url": "https://github.com/minio/minio-java/pull/935#pullrequestreview-423236914", "createdAt": "2020-06-03T05:53:57Z", "commit": {"oid": "7517d8387aab877ee4ad9817c0beb41c8a95e685"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1877, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}