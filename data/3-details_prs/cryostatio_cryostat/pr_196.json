{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNTg3MTUy", "number": 196, "title": "Change `upload-url` Command to Assume Datasource URL from Environment Variable", "bodyText": "See #193. Reopening after default branch rename.", "createdAt": "2020-07-02T15:18:19Z", "url": "https://github.com/cryostatio/cryostat/pull/196", "merged": true, "mergeCommit": {"oid": "5962b81404da0e875f80d6f13b18fb78f0fa5c6c"}, "closed": true, "closedAt": "2020-07-27T22:22:28Z", "author": {"login": "andrewazores"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxBI8rgBqjM1MDc4MjE5MDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5I8EYgFqTQ1NjE1NzU2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99443422347818cb5dea3cadc0e978dac7471d63", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/99443422347818cb5dea3cadc0e978dac7471d63", "committedDate": "2020-06-29T21:51:33Z", "message": "Include datasourceUrl in validate() error message; Include error message in test"}, "afterCommit": {"oid": "ec423d2dd68c6f23535c7551603623bdcaa82ce2", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/ec423d2dd68c6f23535c7551603623bdcaa82ce2", "committedDate": "2020-07-02T16:00:11Z", "message": "Include datasourceUrl in validate() error message; Include error message in test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ec423d2dd68c6f23535c7551603623bdcaa82ce2", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/ec423d2dd68c6f23535c7551603623bdcaa82ce2", "committedDate": "2020-07-02T16:00:11Z", "message": "Include datasourceUrl in validate() error message; Include error message in test"}, "afterCommit": {"oid": "bab5ea6fefd3661e1d3632a30f5429c4c3f5ed1e", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/bab5ea6fefd3661e1d3632a30f5429c4c3f5ed1e", "committedDate": "2020-07-03T15:17:08Z", "message": "Clean up rebase"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bab5ea6fefd3661e1d3632a30f5429c4c3f5ed1e", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/bab5ea6fefd3661e1d3632a30f5429c4c3f5ed1e", "committedDate": "2020-07-03T15:17:08Z", "message": "Clean up rebase"}, "afterCommit": {"oid": "994c36486cfb54222e1a26e743a9007bca36b93c", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/994c36486cfb54222e1a26e743a9007bca36b93c", "committedDate": "2020-07-15T16:28:21Z", "message": "Clean up rebase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ab63876a3baa9a91cac69aa0b2d9ced96b11c81", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/9ab63876a3baa9a91cac69aa0b2d9ced96b11c81", "committedDate": "2020-07-21T19:29:10Z", "message": "Change `upload-url` command to assume datasource URL from env var"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d500ea24a4def92d197a1792190aabe145a4e1a8", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/d500ea24a4def92d197a1792190aabe145a4e1a8", "committedDate": "2020-07-21T19:32:01Z", "message": "Add/change tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5a355eb6e1074967984b466857191a69fb8adee", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/a5a355eb6e1074967984b466857191a69fb8adee", "committedDate": "2020-07-21T19:32:02Z", "message": "Remove tests already covered by ValidatesRecordingName"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5637bf5b87b534936eb9cf042cb05cdcff3dfabe", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/5637bf5b87b534936eb9cf042cb05cdcff3dfabe", "committedDate": "2020-07-21T19:33:52Z", "message": "Move datasource URL checking to validate() and isAvailable()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "898038753045e2ce4d5957986982c29ec117d2f3", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/898038753045e2ce4d5957986982c29ec117d2f3", "committedDate": "2020-07-21T19:33:54Z", "message": "Use Apache Commons UrlValidator instead of java.net.URL for uploadUrl validation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e436c270c5425af1b9d43d3c4428232157b8886", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/9e436c270c5425af1b9d43d3c4428232157b8886", "committedDate": "2020-07-21T19:36:24Z", "message": "Include datasourceUrl in validate() error message; Include error message in test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "357532bd73f26585f83281d31ff3a6b17c3f84ac", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/357532bd73f26585f83281d31ff3a6b17c3f84ac", "committedDate": "2020-07-21T19:36:26Z", "message": "Clean up rebase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5a60f89113501b1529d6b67358eadd4e1143521", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/a5a60f89113501b1529d6b67358eadd4e1143521", "committedDate": "2020-07-21T21:56:00Z", "message": "Make changes for validate PR rebase"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "994c36486cfb54222e1a26e743a9007bca36b93c", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/994c36486cfb54222e1a26e743a9007bca36b93c", "committedDate": "2020-07-15T16:28:21Z", "message": "Clean up rebase"}, "afterCommit": {"oid": "a5a60f89113501b1529d6b67358eadd4e1143521", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/a5a60f89113501b1529d6b67358eadd4e1143521", "committedDate": "2020-07-21T21:56:00Z", "message": "Make changes for validate PR rebase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d9064a84bca02c91904aa2a14ad0e99a504041a", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/9d9064a84bca02c91904aa2a14ad0e99a504041a", "committedDate": "2020-07-27T20:33:08Z", "message": "Don't expect `/load` in GRAFANA_DATASOURCE_URL"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MTU3NTYx", "url": "https://github.com/cryostatio/cryostat/pull/196#pullrequestreview-456157561", "createdAt": "2020-07-27T21:44:37Z", "commit": {"oid": "9d9064a84bca02c91904aa2a14ad0e99a504041a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMTo0NDozN1rOG30tZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMTo0NDozN1rOG30tZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE4ODQ1Mg==", "bodyText": "Does this work if the user sets the env var to ex. http://localhost:8080/, with a trailing slash?", "url": "https://github.com/cryostatio/cryostat/pull/196#discussion_r461188452", "createdAt": "2020-07-27T21:44:37Z", "author": {"login": "andrewazores"}, "path": "src/main/java/com/redhat/rhjmc/containerjfr/commands/internal/UploadRecordingCommand.java", "diffHunk": "@@ -110,7 +110,7 @@ public String getName() {\n     public void execute(String[] args) throws Exception {\n         String targetId = args[0];\n         String recordingName = args[1];\n-        String datasourceUrl = env.getEnv(GRAFANA_DATASOURCE_ENV);\n+        String datasourceUrl = env.getEnv(GRAFANA_DATASOURCE_ENV).concat(\"/load\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d9064a84bca02c91904aa2a14ad0e99a504041a"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3162, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}