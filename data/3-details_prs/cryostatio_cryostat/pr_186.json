{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2NTQ5OTM5", "number": 186, "title": "Archive path should be configurable", "bodyText": "Adds environment variable ARCHIVE_PATH which specifies path when saving flight recordings locally. If not set, the default path remains /flightrecordings.", "createdAt": "2020-06-18T15:20:06Z", "url": "https://github.com/cryostatio/cryostat/pull/186", "merged": true, "mergeCommit": {"oid": "085999abd9bd82c6a44eb18f2135d6b50b096735"}, "closed": true, "closedAt": "2020-06-18T20:31:58Z", "author": {"login": "Alexjsenn"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsPv9xgH2gAyNDM2NTQ5OTM5OmJiMTIzNjZhMjgzYTIwZDc2ZGVkYjk0MTIxMThkNGI5YzQ0NTE0ZTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcskhR8gFqTQzMzYyNTIxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bb12366a283a20d76dedb9412118d4b9c44514e6", "author": {"user": {"login": "Alexjsenn", "name": "Alex Senn"}}, "url": "https://github.com/cryostatio/cryostat/commit/bb12366a283a20d76dedb9412118d4b9c44514e6", "committedDate": "2020-06-17T20:19:43Z", "message": "initial changes, reads the save path for local jfr recordings from the ARCHIVE_PATH env var"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86138a80c17106016eddbbb3ba0affc771b61a0e", "author": {"user": {"login": "Alexjsenn", "name": "Alex Senn"}}, "url": "https://github.com/cryostatio/cryostat/commit/86138a80c17106016eddbbb3ba0affc771b61a0e", "committedDate": "2020-06-18T14:18:10Z", "message": "Archive path should be configurable (#173)\n\nSupport for the evironment variable ARCHIVE_PATH to define path when saving\nrecordings locally. If not set, default path is /flightrecordings."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2be5bac669132a2ef5a648ce9883ed133fc38f8b", "author": {"user": {"login": "Alexjsenn", "name": "Alex Senn"}}, "url": "https://github.com/cryostatio/cryostat/commit/2be5bac669132a2ef5a648ce9883ed133fc38f8b", "committedDate": "2020-06-18T14:49:25Z", "message": "Updated README accordingly"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNDExMzkz", "url": "https://github.com/cryostatio/cryostat/pull/186#pullrequestreview-433411393", "createdAt": "2020-06-18T15:40:48Z", "commit": {"oid": "2be5bac669132a2ef5a648ce9883ed133fc38f8b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNTo0MDo0OFrOGl1LPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNTo0MDo0OFrOGl1LPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMyMTcyNw==", "bodyText": "You should be able to have Dagger inject a Logger instance into this method as a parameter, rather than having to grab the logger by manually calling this method like this. Just add a Logger to the method's argument list.", "url": "https://github.com/cryostatio/cryostat/pull/186#discussion_r442321727", "createdAt": "2020-06-18T15:40:48Z", "author": {"login": "andrewazores"}, "path": "src/main/java/com/redhat/rhjmc/containerjfr/MainModule.java", "diffHunk": "@@ -89,6 +89,17 @@ public static Gson provideGson() {\n     @Provides\n     @Named(RECORDINGS_PATH)\n     static Path provideSavedRecordingsPath() {\n-        return Paths.get(\"/\", \"flightrecordings\");\n+        String ARCHIVE_PATH = null;\n+        final Logger logger = provideLogger();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2be5bac669132a2ef5a648ce9883ed133fc38f8b"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNDEyMzA2", "url": "https://github.com/cryostatio/cryostat/pull/186#pullrequestreview-433412306", "createdAt": "2020-06-18T15:41:46Z", "commit": {"oid": "2be5bac669132a2ef5a648ce9883ed133fc38f8b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNTo0MTo0N1rOGl1N0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNTo0MTo0N1rOGl1N0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMyMjM4Nw==", "bodyText": "Can you refactor this to use the Environment utility class, which is also available by dependency injection? The source for that class is in -core, so you can take a look and see what methods might be useful for you here.", "url": "https://github.com/cryostatio/cryostat/pull/186#discussion_r442322387", "createdAt": "2020-06-18T15:41:47Z", "author": {"login": "andrewazores"}, "path": "src/main/java/com/redhat/rhjmc/containerjfr/MainModule.java", "diffHunk": "@@ -89,6 +89,17 @@ public static Gson provideGson() {\n     @Provides\n     @Named(RECORDINGS_PATH)\n     static Path provideSavedRecordingsPath() {\n-        return Paths.get(\"/\", \"flightrecordings\");\n+        String ARCHIVE_PATH = null;\n+        final Logger logger = provideLogger();\n+        try {\n+            ARCHIVE_PATH = System.getenv(\"ARCHIVE_PATH\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2be5bac669132a2ef5a648ce9883ed133fc38f8b"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "173ce16cdf19e6c90fb8e14c9ad22f3881c7f8d0", "author": {"user": {"login": "Alexjsenn", "name": "Alex Senn"}}, "url": "https://github.com/cryostatio/cryostat/commit/173ce16cdf19e6c90fb8e14c9ad22f3881c7f8d0", "committedDate": "2020-06-18T16:54:50Z", "message": "Archive path should be configurable (#173)\n\nInject logger instead of calling getlogger function.\nUse Environment class instead of System directly."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNDk3MjQ0", "url": "https://github.com/cryostatio/cryostat/pull/186#pullrequestreview-433497244", "createdAt": "2020-06-18T17:25:57Z", "commit": {"oid": "173ce16cdf19e6c90fb8e14c9ad22f3881c7f8d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNzoyNTo1N1rOGl5LJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNzoyNTo1N1rOGl5LJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM4NzIzNw==", "bodyText": "The Logger isn't used anymore. It can either be removed, or maybe there should be a message logged if the environment variable is (or isn't) set so that it's clear from the logs what path was used during a particular run.", "url": "https://github.com/cryostatio/cryostat/pull/186#discussion_r442387237", "createdAt": "2020-06-18T17:25:57Z", "author": {"login": "andrewazores"}, "path": "src/main/java/com/redhat/rhjmc/containerjfr/MainModule.java", "diffHunk": "@@ -88,7 +89,7 @@ public static Gson provideGson() {\n     @SuppressFBWarnings(\"DMI_HARDCODED_ABSOLUTE_FILENAME\")\n     @Provides\n     @Named(RECORDINGS_PATH)\n-    static Path provideSavedRecordingsPath() {\n-        return Paths.get(\"/\", \"flightrecordings\");\n+    static Path provideSavedRecordingsPath(Logger logger, Environment env) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "173ce16cdf19e6c90fb8e14c9ad22f3881c7f8d0"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92bea3814aa9f9f6f99daf46b24948d081089bae", "author": {"user": {"login": "Alexjsenn", "name": "Alex Senn"}}, "url": "https://github.com/cryostatio/cryostat/commit/92bea3814aa9f9f6f99daf46b24948d081089bae", "committedDate": "2020-06-18T19:52:43Z", "message": "Logger outputs set path for archiving recordings (either set by\nCONTAINER_JFR_ARCHIVE_PATH or default)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNjI1MjE2", "url": "https://github.com/cryostatio/cryostat/pull/186#pullrequestreview-433625216", "createdAt": "2020-06-18T20:31:41Z", "commit": {"oid": "92bea3814aa9f9f6f99daf46b24948d081089bae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3152, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}