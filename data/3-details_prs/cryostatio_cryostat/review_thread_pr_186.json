{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2NTQ5OTM5", "number": 186, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNTo0MDo0OFrOEGzrIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNzoyNTo1N1rOEG2GtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NTczNTM3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/redhat/rhjmc/containerjfr/MainModule.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNTo0MDo0OFrOGl1LPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNjo1OToyNlrOGl4QjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMyMTcyNw==", "bodyText": "You should be able to have Dagger inject a Logger instance into this method as a parameter, rather than having to grab the logger by manually calling this method like this. Just add a Logger to the method's argument list.", "url": "https://github.com/cryostatio/cryostat/pull/186#discussion_r442321727", "createdAt": "2020-06-18T15:40:48Z", "author": {"login": "andrewazores"}, "path": "src/main/java/com/redhat/rhjmc/containerjfr/MainModule.java", "diffHunk": "@@ -89,6 +89,17 @@ public static Gson provideGson() {\n     @Provides\n     @Named(RECORDINGS_PATH)\n     static Path provideSavedRecordingsPath() {\n-        return Paths.get(\"/\", \"flightrecordings\");\n+        String ARCHIVE_PATH = null;\n+        final Logger logger = provideLogger();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2be5bac669132a2ef5a648ce9883ed133fc38f8b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMyNDMzMw==", "bodyText": "You can see examples of this in other DI modules around the codebase, for example the NetworkModule.", "url": "https://github.com/cryostatio/cryostat/pull/186#discussion_r442324333", "createdAt": "2020-06-18T15:44:29Z", "author": {"login": "andrewazores"}, "path": "src/main/java/com/redhat/rhjmc/containerjfr/MainModule.java", "diffHunk": "@@ -89,6 +89,17 @@ public static Gson provideGson() {\n     @Provides\n     @Named(RECORDINGS_PATH)\n     static Path provideSavedRecordingsPath() {\n-        return Paths.get(\"/\", \"flightrecordings\");\n+        String ARCHIVE_PATH = null;\n+        final Logger logger = provideLogger();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMyMTcyNw=="}, "originalCommit": {"oid": "2be5bac669132a2ef5a648ce9883ed133fc38f8b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM3MjIzNg==", "bodyText": "Ok, fixed!", "url": "https://github.com/cryostatio/cryostat/pull/186#discussion_r442372236", "createdAt": "2020-06-18T16:59:26Z", "author": {"login": "Alexjsenn"}, "path": "src/main/java/com/redhat/rhjmc/containerjfr/MainModule.java", "diffHunk": "@@ -89,6 +89,17 @@ public static Gson provideGson() {\n     @Provides\n     @Named(RECORDINGS_PATH)\n     static Path provideSavedRecordingsPath() {\n-        return Paths.get(\"/\", \"flightrecordings\");\n+        String ARCHIVE_PATH = null;\n+        final Logger logger = provideLogger();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMyMTcyNw=="}, "originalCommit": {"oid": "2be5bac669132a2ef5a648ce9883ed133fc38f8b"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NTczOTY5OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/redhat/rhjmc/containerjfr/MainModule.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNTo0MTo0N1rOGl1N0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNjo1Mjo1MFrOGl4Big==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMyMjM4Nw==", "bodyText": "Can you refactor this to use the Environment utility class, which is also available by dependency injection? The source for that class is in -core, so you can take a look and see what methods might be useful for you here.", "url": "https://github.com/cryostatio/cryostat/pull/186#discussion_r442322387", "createdAt": "2020-06-18T15:41:47Z", "author": {"login": "andrewazores"}, "path": "src/main/java/com/redhat/rhjmc/containerjfr/MainModule.java", "diffHunk": "@@ -89,6 +89,17 @@ public static Gson provideGson() {\n     @Provides\n     @Named(RECORDINGS_PATH)\n     static Path provideSavedRecordingsPath() {\n-        return Paths.get(\"/\", \"flightrecordings\");\n+        String ARCHIVE_PATH = null;\n+        final Logger logger = provideLogger();\n+        try {\n+            ARCHIVE_PATH = System.getenv(\"ARCHIVE_PATH\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2be5bac669132a2ef5a648ce9883ed133fc38f8b"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMyNzQ1OQ==", "bodyText": "Also, what do you think of prefixing this new env var with CONTAINER_JFR_? That's how the other configuration variables are generally named.", "url": "https://github.com/cryostatio/cryostat/pull/186#discussion_r442327459", "createdAt": "2020-06-18T15:48:57Z", "author": {"login": "andrewazores"}, "path": "src/main/java/com/redhat/rhjmc/containerjfr/MainModule.java", "diffHunk": "@@ -89,6 +89,17 @@ public static Gson provideGson() {\n     @Provides\n     @Named(RECORDINGS_PATH)\n     static Path provideSavedRecordingsPath() {\n-        return Paths.get(\"/\", \"flightrecordings\");\n+        String ARCHIVE_PATH = null;\n+        final Logger logger = provideLogger();\n+        try {\n+            ARCHIVE_PATH = System.getenv(\"ARCHIVE_PATH\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMyMjM4Nw=="}, "originalCommit": {"oid": "2be5bac669132a2ef5a648ce9883ed133fc38f8b"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM2ODM5NA==", "bodyText": "After using the Environment class I realized I needed way less code!", "url": "https://github.com/cryostatio/cryostat/pull/186#discussion_r442368394", "createdAt": "2020-06-18T16:52:50Z", "author": {"login": "Alexjsenn"}, "path": "src/main/java/com/redhat/rhjmc/containerjfr/MainModule.java", "diffHunk": "@@ -89,6 +89,17 @@ public static Gson provideGson() {\n     @Provides\n     @Named(RECORDINGS_PATH)\n     static Path provideSavedRecordingsPath() {\n-        return Paths.get(\"/\", \"flightrecordings\");\n+        String ARCHIVE_PATH = null;\n+        final Logger logger = provideLogger();\n+        try {\n+            ARCHIVE_PATH = System.getenv(\"ARCHIVE_PATH\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMyMjM4Nw=="}, "originalCommit": {"oid": "2be5bac669132a2ef5a648ce9883ed133fc38f8b"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NjEzMzY1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/redhat/rhjmc/containerjfr/MainModule.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNzoyNTo1N1rOGl5LJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxOTo1NToxNVrOGl-G9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM4NzIzNw==", "bodyText": "The Logger isn't used anymore. It can either be removed, or maybe there should be a message logged if the environment variable is (or isn't) set so that it's clear from the logs what path was used during a particular run.", "url": "https://github.com/cryostatio/cryostat/pull/186#discussion_r442387237", "createdAt": "2020-06-18T17:25:57Z", "author": {"login": "andrewazores"}, "path": "src/main/java/com/redhat/rhjmc/containerjfr/MainModule.java", "diffHunk": "@@ -88,7 +89,7 @@ public static Gson provideGson() {\n     @SuppressFBWarnings(\"DMI_HARDCODED_ABSOLUTE_FILENAME\")\n     @Provides\n     @Named(RECORDINGS_PATH)\n-    static Path provideSavedRecordingsPath() {\n-        return Paths.get(\"/\", \"flightrecordings\");\n+    static Path provideSavedRecordingsPath(Logger logger, Environment env) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "173ce16cdf19e6c90fb8e14c9ad22f3881c7f8d0"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ2ODA4Nw==", "bodyText": "Ok, logger now reports set path.", "url": "https://github.com/cryostatio/cryostat/pull/186#discussion_r442468087", "createdAt": "2020-06-18T19:55:15Z", "author": {"login": "Alexjsenn"}, "path": "src/main/java/com/redhat/rhjmc/containerjfr/MainModule.java", "diffHunk": "@@ -88,7 +89,7 @@ public static Gson provideGson() {\n     @SuppressFBWarnings(\"DMI_HARDCODED_ABSOLUTE_FILENAME\")\n     @Provides\n     @Named(RECORDINGS_PATH)\n-    static Path provideSavedRecordingsPath() {\n-        return Paths.get(\"/\", \"flightrecordings\");\n+    static Path provideSavedRecordingsPath(Logger logger, Environment env) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM4NzIzNw=="}, "originalCommit": {"oid": "173ce16cdf19e6c90fb8e14c9ad22f3881c7f8d0"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 829, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}