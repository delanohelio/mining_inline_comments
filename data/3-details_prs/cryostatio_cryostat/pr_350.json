{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwNjA2MDEx", "number": 350, "title": "Use Alias in Archived Recording Names if Possible", "bodyText": "Fixes #297", "createdAt": "2020-12-01T22:11:43Z", "url": "https://github.com/cryostatio/cryostat/pull/350", "merged": true, "mergeCommit": {"oid": "d3250d5671e62e5b711a473f6e2007c4ee6c47e9"}, "closed": true, "closedAt": "2020-12-02T16:15:54Z", "author": {"login": "vic-ma"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiB5Z6AFqTU0MjM1ODgzNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiQ9AzgFqTU0MzAwMTk4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMzU4ODM3", "url": "https://github.com/cryostatio/cryostat/pull/350#pullrequestreview-542358837", "createdAt": "2020-12-01T22:43:15Z", "commit": {"oid": "96688299d1555aaa5571d92a5d25114a772907fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQyMjo0MzoxNVrOH9C0YQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQyMjo0MzoxNVrOH9C0YQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzc3MTM2MQ==", "bodyText": "This is my only issue - it's unfortunate that this lookup is performed every time. We should implement something that allows us to do this cross-referencing without having to trigger target discovery first. Something as simple as a map from targetIds to known ServiceRefs would fit the description, but I'm not sure if that data structure should be held by the PlatformClient or if we should abstract it somewhere else. Maybe just leave a TODO comment here with some short summary and description of this problem. It could also be filed as an issue of type \"cleanup\".", "url": "https://github.com/cryostatio/cryostat/pull/350#discussion_r533771361", "createdAt": "2020-12-01T22:43:15Z", "author": {"login": "andrewazores"}, "path": "src/main/java/com/redhat/rhjmc/containerjfr/net/web/http/api/v1/TargetRecordingPatchSave.java", "diffHunk": "@@ -116,7 +120,25 @@ private String saveRecording(JFRConnection connection, IRecordingDescriptor desc\n         if (recordingName.endsWith(\".jfr\")) {\n             recordingName = recordingName.substring(0, recordingName.length() - 4);\n         }\n-        String targetName = connection.getHost().replaceAll(\"[\\\\._]+\", \"-\");\n+\n+        String targetName =\n+                platformClient.listDiscoverableServices().stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96688299d1555aaa5571d92a5d25114a772907fc"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73c7c67c82d0229be5967dd5a0e4da4365665d97", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/73c7c67c82d0229be5967dd5a0e4da4365665d97", "committedDate": "2020-12-02T15:39:47Z", "message": "Use alias for targetName if available"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f60664415a4b049495288812fad79fd172bec07", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/8f60664415a4b049495288812fad79fd172bec07", "committedDate": "2020-12-02T15:39:47Z", "message": "Add tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dadf2ff984789684302ee82602ade5068fc406a7", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/dadf2ff984789684302ee82602ade5068fc406a7", "committedDate": "2020-12-02T15:39:47Z", "message": "Use real objects instead of mocks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efef91fd2d259d0b37bdab8da149228a26861156", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/efef91fd2d259d0b37bdab8da149228a26861156", "committedDate": "2020-12-02T16:06:40Z", "message": "Add TODO comment about adding targetId-ServiceRef map"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "96688299d1555aaa5571d92a5d25114a772907fc", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/96688299d1555aaa5571d92a5d25114a772907fc", "committedDate": "2020-12-01T21:53:26Z", "message": "Use real objects instead of mocks"}, "afterCommit": {"oid": "efef91fd2d259d0b37bdab8da149228a26861156", "author": {"user": {"login": "vic-ma", "name": "Victor Ma"}}, "url": "https://github.com/cryostatio/cryostat/commit/efef91fd2d259d0b37bdab8da149228a26861156", "committedDate": "2020-12-02T16:06:40Z", "message": "Add TODO comment about adding targetId-ServiceRef map"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMDAxOTg4", "url": "https://github.com/cryostatio/cryostat/pull/350#pullrequestreview-543001988", "createdAt": "2020-12-02T16:15:47Z", "commit": {"oid": "efef91fd2d259d0b37bdab8da149228a26861156"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3098, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}