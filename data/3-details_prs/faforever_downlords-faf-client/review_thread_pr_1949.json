{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyNzgyNzYx", "number": 1949, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQyMTozMjoxN1rOEnnNqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNFQxOTowODoyM1rOEqHXDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5OTcyMzk1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/chat/ChatUserContextMenuController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQyMTozMjoxN1rOHYTd-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQyMjo1NToyNVrOHYWn6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTI0Njg0MQ==", "bodyText": "Just ladder not be excluded as well", "url": "https://github.com/FAForever/downlords-faf-client/pull/1949#discussion_r495246841", "createdAt": "2020-09-25T21:32:17Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/chat/ChatUserContextMenuController.java", "diffHunk": "@@ -201,15 +201,12 @@ public void setChatUser(ChatChannelUser chatUser) {\n       removeFoeItem.visibleProperty().bind(newValue.socialStatusProperty().isEqualTo(FOE));\n       reportItem.visibleProperty().bind(newValue.socialStatusProperty().isNotEqualTo(SELF));\n \n-      // TODO: Make this ignore TMM games too and not just ladder\n-      // https://github.com/FAForever/downlords-faf-client/issues/1770\n       joinGameItem.visibleProperty().bind(newValue.socialStatusProperty().isNotEqualTo(SELF)\n           .and(newValue.statusProperty().isEqualTo(PlayerStatus.LOBBYING)\n               .or(newValue.statusProperty().isEqualTo(PlayerStatus.HOSTING)))\n           .and(Bindings.createBooleanBinding(() -> {\n                 return newValue.getGame() != null\n-                    && newValue.getGame().getFeaturedMod() != null\n-                    && !newValue.getGame().getFeaturedMod().equals(KnownFeaturedMod.LADDER_1V1.getTechnicalName());\n+                    && newValue.getGame().getGameType() != GameType.MATCHMAKER;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d609a5a470c09381094c5564258724b07fa3df5b"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTI5ODUzNw==", "bodyText": "Ladder falls into the category of matchmaker games", "url": "https://github.com/FAForever/downlords-faf-client/pull/1949#discussion_r495298537", "createdAt": "2020-09-25T22:55:25Z", "author": {"login": "Askaholic"}, "path": "src/main/java/com/faforever/client/chat/ChatUserContextMenuController.java", "diffHunk": "@@ -201,15 +201,12 @@ public void setChatUser(ChatChannelUser chatUser) {\n       removeFoeItem.visibleProperty().bind(newValue.socialStatusProperty().isEqualTo(FOE));\n       reportItem.visibleProperty().bind(newValue.socialStatusProperty().isNotEqualTo(SELF));\n \n-      // TODO: Make this ignore TMM games too and not just ladder\n-      // https://github.com/FAForever/downlords-faf-client/issues/1770\n       joinGameItem.visibleProperty().bind(newValue.socialStatusProperty().isNotEqualTo(SELF)\n           .and(newValue.statusProperty().isEqualTo(PlayerStatus.LOBBYING)\n               .or(newValue.statusProperty().isEqualTo(PlayerStatus.HOSTING)))\n           .and(Bindings.createBooleanBinding(() -> {\n                 return newValue.getGame() != null\n-                    && newValue.getGame().getFeaturedMod() != null\n-                    && !newValue.getGame().getFeaturedMod().equals(KnownFeaturedMod.LADDER_1V1.getTechnicalName());\n+                    && newValue.getGame().getGameType() != GameType.MATCHMAKER;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTI0Njg0MQ=="}, "originalCommit": {"oid": "d609a5a470c09381094c5564258724b07fa3df5b"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5OTcyOTAwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/remote/domain/GameType.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQyMTozMzoyMlrOHYThBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQwOTo0Nzo0OVrOHYfOWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTI0NzYyMA==", "bodyText": "@slf4j not working on enums?", "url": "https://github.com/FAForever/downlords-faf-client/pull/1949#discussion_r495247620", "createdAt": "2020-09-25T21:33:22Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/remote/domain/GameType.java", "diffHunk": "@@ -0,0 +1,47 @@\n+package com.faforever.client.remote.domain;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.invoke.MethodHandles;\n+import java.util.HashMap;\n+import java.util.Locale;\n+import java.util.Map;\n+\n+public enum GameType {\n+\n+  UNKNOWN(\"unknown\"),\n+  CUSTOM(\"custom\"),\n+  MATCHMAKER(\"matchmaker\"),\n+  COOP(\"coop\"),\n+  TUTORIAL(\"tutorial\");\n+\n+  private static final Logger logger = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d609a5a470c09381094c5564258724b07fa3df5b"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTI5ODkzNQ==", "bodyText": "No idea I just copy and pasted from GameStatus", "url": "https://github.com/FAForever/downlords-faf-client/pull/1949#discussion_r495298935", "createdAt": "2020-09-25T22:56:00Z", "author": {"login": "Askaholic"}, "path": "src/main/java/com/faforever/client/remote/domain/GameType.java", "diffHunk": "@@ -0,0 +1,47 @@\n+package com.faforever.client.remote.domain;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.invoke.MethodHandles;\n+import java.util.HashMap;\n+import java.util.Locale;\n+import java.util.Map;\n+\n+public enum GameType {\n+\n+  UNKNOWN(\"unknown\"),\n+  CUSTOM(\"custom\"),\n+  MATCHMAKER(\"matchmaker\"),\n+  COOP(\"coop\"),\n+  TUTORIAL(\"tutorial\");\n+\n+  private static final Logger logger = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTI0NzYyMA=="}, "originalCommit": {"oid": "d609a5a470c09381094c5564258724b07fa3df5b"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQzOTQ0OQ==", "bodyText": "Try use the annotation", "url": "https://github.com/FAForever/downlords-faf-client/pull/1949#discussion_r495439449", "createdAt": "2020-09-26T09:47:49Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/remote/domain/GameType.java", "diffHunk": "@@ -0,0 +1,47 @@\n+package com.faforever.client.remote.domain;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.invoke.MethodHandles;\n+import java.util.HashMap;\n+import java.util.Locale;\n+import java.util.Map;\n+\n+public enum GameType {\n+\n+  UNKNOWN(\"unknown\"),\n+  CUSTOM(\"custom\"),\n+  MATCHMAKER(\"matchmaker\"),\n+  COOP(\"coop\"),\n+  TUTORIAL(\"tutorial\");\n+\n+  private static final Logger logger = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTI0NzYyMA=="}, "originalCommit": {"oid": "d609a5a470c09381094c5564258724b07fa3df5b"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMjkyMjIxOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/faforever/client/game/GameBuilder.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNDowMDowNFrOHbuxLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wM1QxODo0Mzo0M1rOHcDChw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODgzOTg1Mw==", "bodyText": "This dupe a typo? The 800 will do nothing.  That a 'min' rating perhaps?", "url": "https://github.com/FAForever/downlords-faf-client/pull/1949#discussion_r498839853", "createdAt": "2020-10-02T14:00:04Z", "author": {"login": "dev-nulled"}, "path": "src/test/java/com/faforever/client/game/GameBuilder.java", "diffHunk": "@@ -34,6 +35,7 @@ public GameBuilder defaultValues() {\n     game.setMaxRating(800);\n     game.setMaxRating(1300);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d8442d4dad61a56bb75f8092b27907ba6d56fc9"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE3MTgwMw==", "bodyText": "This code is only used for testing. But yes this is probably a typo", "url": "https://github.com/FAForever/downlords-faf-client/pull/1949#discussion_r499171803", "createdAt": "2020-10-03T18:41:06Z", "author": {"login": "1-alex98"}, "path": "src/test/java/com/faforever/client/game/GameBuilder.java", "diffHunk": "@@ -34,6 +35,7 @@ public GameBuilder defaultValues() {\n     game.setMaxRating(800);\n     game.setMaxRating(1300);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODgzOTg1Mw=="}, "originalCommit": {"oid": "2d8442d4dad61a56bb75f8092b27907ba6d56fc9"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE3MTg2Ng==", "bodyText": "Make a PR if you like XD @dev-nulled heard u get t-shirts for those", "url": "https://github.com/FAForever/downlords-faf-client/pull/1949#discussion_r499171866", "createdAt": "2020-10-03T18:42:04Z", "author": {"login": "1-alex98"}, "path": "src/test/java/com/faforever/client/game/GameBuilder.java", "diffHunk": "@@ -34,6 +35,7 @@ public GameBuilder defaultValues() {\n     game.setMaxRating(800);\n     game.setMaxRating(1300);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODgzOTg1Mw=="}, "originalCommit": {"oid": "2d8442d4dad61a56bb75f8092b27907ba6d56fc9"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE3MTk3NQ==", "bodyText": "Sadly this one was opened too early so it doesn\u2019t count :P", "url": "https://github.com/FAForever/downlords-faf-client/pull/1949#discussion_r499171975", "createdAt": "2020-10-03T18:43:43Z", "author": {"login": "Askaholic"}, "path": "src/test/java/com/faforever/client/game/GameBuilder.java", "diffHunk": "@@ -34,6 +35,7 @@ public GameBuilder defaultValues() {\n     game.setMaxRating(800);\n     game.setMaxRating(1300);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODgzOTg1Mw=="}, "originalCommit": {"oid": "2d8442d4dad61a56bb75f8092b27907ba6d56fc9"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyNTk2MjM3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/fa/relay/ice/IceAdapterImpl.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNFQxOTowODoyM1rOHcJiiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNFQyMTowMjoxNlrOHn0VqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3ODQ3Mg==", "bodyText": "I think it should be if(Matchmaker) right? This is needed though I think. Can u check this?", "url": "https://github.com/FAForever/downlords-faf-client/pull/1949#discussion_r499278472", "createdAt": "2020-10-04T19:08:23Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/fa/relay/ice/IceAdapterImpl.java", "diffHunk": "@@ -297,6 +297,7 @@ private void updateLobbyModeFromGameInfo(GameLaunchMessage gameLaunchMessage) {\n       return;\n     }\n \n+    // TODO: Remove this?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d8442d4dad61a56bb75f8092b27907ba6d56fc9"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3OTM4NQ==", "bodyText": "Yea that's what I'm thinking too. We could just get rid of the init mode entirely, and always use autolobby for matchmaker games", "url": "https://github.com/FAForever/downlords-faf-client/pull/1949#discussion_r499279385", "createdAt": "2020-10-04T19:18:36Z", "author": {"login": "Askaholic"}, "path": "src/main/java/com/faforever/client/fa/relay/ice/IceAdapterImpl.java", "diffHunk": "@@ -297,6 +297,7 @@ private void updateLobbyModeFromGameInfo(GameLaunchMessage gameLaunchMessage) {\n       return;\n     }\n \n+    // TODO: Remove this?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3ODQ3Mg=="}, "originalCommit": {"oid": "2d8442d4dad61a56bb75f8092b27907ba6d56fc9"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjk1OTg2Mg==", "bodyText": "Yes can u do so @Askaholic and then I merge this...", "url": "https://github.com/FAForever/downlords-faf-client/pull/1949#discussion_r502959862", "createdAt": "2020-10-11T20:06:11Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/fa/relay/ice/IceAdapterImpl.java", "diffHunk": "@@ -297,6 +297,7 @@ private void updateLobbyModeFromGameInfo(GameLaunchMessage gameLaunchMessage) {\n       return;\n     }\n \n+    // TODO: Remove this?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3ODQ3Mg=="}, "originalCommit": {"oid": "2d8442d4dad61a56bb75f8092b27907ba6d56fc9"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjk2MTc5Mw==", "bodyText": "Ok, will do", "url": "https://github.com/FAForever/downlords-faf-client/pull/1949#discussion_r502961793", "createdAt": "2020-10-11T20:25:26Z", "author": {"login": "Askaholic"}, "path": "src/main/java/com/faforever/client/fa/relay/ice/IceAdapterImpl.java", "diffHunk": "@@ -297,6 +297,7 @@ private void updateLobbyModeFromGameInfo(GameLaunchMessage gameLaunchMessage) {\n       return;\n     }\n \n+    // TODO: Remove this?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3ODQ3Mg=="}, "originalCommit": {"oid": "2d8442d4dad61a56bb75f8092b27907ba6d56fc9"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTUxNDAyNQ==", "bodyText": "So I looked into this, the problem is we didn't add game_type to the game_launch message, so it's not available in this function. I think it's ok to have the extra check for ladder game mode since it would only apply if for some reason the server didn't send the init mode (shouldn't happen, but it doesn't really hurt to have the code in there).", "url": "https://github.com/FAForever/downlords-faf-client/pull/1949#discussion_r511514025", "createdAt": "2020-10-24T21:02:16Z", "author": {"login": "Askaholic"}, "path": "src/main/java/com/faforever/client/fa/relay/ice/IceAdapterImpl.java", "diffHunk": "@@ -297,6 +297,7 @@ private void updateLobbyModeFromGameInfo(GameLaunchMessage gameLaunchMessage) {\n       return;\n     }\n \n+    // TODO: Remove this?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3ODQ3Mg=="}, "originalCommit": {"oid": "2d8442d4dad61a56bb75f8092b27907ba6d56fc9"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2120, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}