{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NTA0MTI3", "number": 1693, "title": "Map generator button #1321", "bodyText": "rearranged buttons in create game dialog\nput create_game.fxml grid elements into logical order\nremoved default button, instead is shown in list\nmap generator button \"new\" label and color\n\nFixes #1321", "createdAt": "2020-05-09T02:58:50Z", "url": "https://github.com/FAForever/downlords-faf-client/pull/1693", "merged": true, "mergeCommit": {"oid": "383d5d3167faf064420a03ec9722666b1779132a"}, "closed": true, "closedAt": "2020-05-19T10:09:39Z", "author": {"login": "Katharsas"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfdUtUAH2gAyNDE1NTA0MTI3OmZlOGZkNmZmOWRkMWIyOTQ1MGIyYjI0ZGEyODAyOGQ1MzMyZmJkNTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABci4w8XgFqTQxNDcxNDIyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fe8fd6ff9dd1b29450b2b24da28028d5332fbd56", "author": {"user": {"login": "Katharsas", "name": "Jan"}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/fe8fd6ff9dd1b29450b2b24da28028d5332fbd56", "committedDate": "2020-05-09T02:47:36Z", "message": "Implement #1321 first iteration map generator button\n\n- rearranged buttons in create game dialog\n- removed default button, instead is shown in list\n- map generator button \"new\" label and color"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2868950143184e588faf2a72532cf0c7a81376ed", "author": {"user": {"login": "Katharsas", "name": "Jan"}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/2868950143184e588faf2a72532cf0c7a81376ed", "committedDate": "2020-05-09T23:06:44Z", "message": "Finish #1321\n\n- Convert generator button code to fxml\n- Orange color for NEW tag"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNzI3NjIx", "url": "https://github.com/FAForever/downlords-faf-client/pull/1693#pullrequestreview-410727621", "createdAt": "2020-05-13T09:01:41Z", "commit": {"oid": "2868950143184e588faf2a72532cf0c7a81376ed"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwOTowMTo0MVrOGUoPog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwOTowMTo0MVrOGUoPog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI4NDA2Ng==", "bodyText": "Try avoid UI style set in java code at all costs, use Pseudoclass", "url": "https://github.com/FAForever/downlords-faf-client/pull/1693#discussion_r424284066", "createdAt": "2020-05-13T09:01:41Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/game/CreateGameController.java", "diffHunk": "@@ -140,8 +148,19 @@ public void initialize() {\n       selectionModel.select(newMapIndex);\n       mapListView.scrollTo(newMapIndex);\n     });\n-\n-    featuredModListView.setCellFactory(param -> new StringListCell<>(FeaturedMod::getDisplayName));\n+    \n+    Function<FeaturedMod, String> isDefaultModString = mod ->\n+      Objects.equals(mod.getTechnicalName(), KnownFeaturedMod.DEFAULT.getTechnicalName()) ?\n+      \" \" + i18n.get(\"game.create.defaultGameTypeMarker\") : null;\n+    \n+    featuredModListView.setCellFactory(param ->\n+        new DualStringListCell<FeaturedMod>(FeaturedMod::getDisplayName, isDefaultModString, false) {\n+      @Override\n+      protected void init() {\n+        // use bind to overwrite updates from css\n+        right.textFillProperty().bind(new SimpleObjectProperty<Paint>(Color.GREY));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2868950143184e588faf2a72532cf0c7a81376ed"}, "originalPosition": 61}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MjY2MDA4", "url": "https://github.com/FAForever/downlords-faf-client/pull/1693#pullrequestreview-414266008", "createdAt": "2020-05-19T09:28:20Z", "commit": {"oid": "2868950143184e588faf2a72532cf0c7a81376ed"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwOToyODoyMFrOGXX2FA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwOToyODoyMFrOGXX2FA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE2MTEwOA==", "bodyText": "This should lso be done in fxm", "url": "https://github.com/FAForever/downlords-faf-client/pull/1693#discussion_r427161108", "createdAt": "2020-05-19T09:28:20Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/fx/DualStringListCell.java", "diffHunk": "@@ -0,0 +1,60 @@\n+package com.faforever.client.fx;\n+\n+import java.util.function.Function;\n+\n+import javafx.application.Platform;\n+import javafx.scene.control.Label;\n+import javafx.scene.control.ListCell;\n+import javafx.scene.layout.HBox;\n+import javafx.scene.layout.Priority;\n+import javafx.scene.layout.Region;\n+\n+/**\n+ * Alternative to {@link StringListCell} that allows to display to differently styled strings in each cell.\n+ */\n+public class DualStringListCell<T> extends ListCell<T> {\n+  protected Label left = new Label();\n+  protected Label right = new Label();\n+  protected Region spacer = new Region();\n+  \n+  private HBox container = new HBox(left, spacer, right);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2868950143184e588faf2a72532cf0c7a81376ed"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ef426e703f5f2db2988af9b866ff108dc7827d9", "author": {"user": {"login": "1-alex98", "name": "Alexander von Trostorff"}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/1ef426e703f5f2db2988af9b866ff108dc7827d9", "committedDate": "2020-05-19T10:08:06Z", "message": "Neatly done in fxml and css"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzE0MjI4", "url": "https://github.com/FAForever/downlords-faf-client/pull/1693#pullrequestreview-414714228", "createdAt": "2020-05-19T18:27:32Z", "commit": {"oid": "1ef426e703f5f2db2988af9b866ff108dc7827d9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODoyNzozMlrOGXtQ1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODoyNzozMlrOGXtQ1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxMjAyMw==", "bodyText": "This is not very performance friendly.\nThe JavaFX documentation (in some parent class) explicitely states that updateItem should ONLY reuse ui elements not create or recreate them.\nEdit: Ok maybe i got this wrong, this usually only happens once per object right?", "url": "https://github.com/FAForever/downlords-faf-client/pull/1693#discussion_r427512023", "createdAt": "2020-05-19T18:27:32Z", "author": {"login": "Katharsas"}, "path": "src/main/java/com/faforever/client/fx/DualStringListCell.java", "diffHunk": "@@ -48,12 +26,15 @@ protected void updateItem(T item, boolean empty) {\n         setText(null);\n         setGraphic(null);\n       } else {\n-        left.setText(functionLeft.apply(item));\n-        right.setText(functionRight.apply(item));\n+        if (dualStringListCellController == null) {\n+          dualStringListCellController = uiService.loadFxml(\"theme/dual_string_list_cell.fxml\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ef426e703f5f2db2988af9b866ff108dc7827d9"}, "originalPosition": 62}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3371, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}