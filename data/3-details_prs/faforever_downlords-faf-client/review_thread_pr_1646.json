{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1MzAxODA1", "number": 1646, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxOToxMToyMFrODsc1qQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwMTo0NjozMVrODsfHNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3OTM2NDI1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/game/PlayerCardTooltipController.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxOToxMToyMFrOF9USzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxOToxMToyMFrOF9USzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTgzOTk0OQ==", "bodyText": "You have this same line in every case. How about moving it after the switch.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399839949", "createdAt": "2020-03-29T19:11:20Z", "author": {"login": "Askaholic"}, "path": "src/main/java/com/faforever/client/game/PlayerCardTooltipController.java", "diffHunk": "@@ -48,9 +53,44 @@ public Node getRoot() {\n \n   @Override\n   public void initialize() {\n+    factionImage.managedProperty().bind(factionImage.visibleProperty());\n+    factionIcon.managedProperty().bind(factionIcon.visibleProperty());\n     foeIconText.managedProperty().bind(foeIconText.visibleProperty());\n     foeIconText.setTooltip(new Tooltip(i18n.get(\"userInfo.foe\")));\n     friendIconText.managedProperty().bind(friendIconText.visibleProperty());\n     friendIconText.setTooltip(new Tooltip(i18n.get(\"userInfo.friend\")));\n   }\n+\n+  private void setFactionIcon(Faction faction) {\n+    if (faction == null) {\n+      return;\n+    }\n+\n+    switch (faction) {\n+      case AEON:\n+        factionIcon.setVisible(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d0890a135cf9cf505825ac433ecf7011cbce1d3"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3OTM3NjY5OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/game/PlayerCardTooltipController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxOToyNjoyM1rOF9UZMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxOTo0Mzo1NlrOF9UhSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MTU4NQ==", "bodyText": "Alex asked me about this earlier. I think in normal FAF having faction 5 means random, but I'm not sure about nomads. I would recommend you fire up a nomads game and see what the faction numbers for random and nomads are. It could be that in nomads 5 is nomads and 6 is random.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399841585", "createdAt": "2020-03-29T19:26:23Z", "author": {"login": "Askaholic"}, "path": "src/main/java/com/faforever/client/game/PlayerCardTooltipController.java", "diffHunk": "@@ -48,9 +53,44 @@ public Node getRoot() {\n \n   @Override\n   public void initialize() {\n+    factionImage.managedProperty().bind(factionImage.visibleProperty());\n+    factionIcon.managedProperty().bind(factionIcon.visibleProperty());\n     foeIconText.managedProperty().bind(foeIconText.visibleProperty());\n     foeIconText.setTooltip(new Tooltip(i18n.get(\"userInfo.foe\")));\n     friendIconText.managedProperty().bind(friendIconText.visibleProperty());\n     friendIconText.setTooltip(new Tooltip(i18n.get(\"userInfo.friend\")));\n   }\n+\n+  private void setFactionIcon(Faction faction) {\n+    if (faction == null) {\n+      return;\n+    }\n+\n+    switch (faction) {\n+      case AEON:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE900\");\n+        factionIcon.getStyleClass().add(\"aeon\");\n+        break;\n+      case CYBRAN:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE902\");\n+        factionIcon.getStyleClass().add(\"cybran\");\n+        break;\n+      case SERAPHIM:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE903\");\n+        factionIcon.getStyleClass().add(\"seraphim\");\n+        break;\n+      case UEF:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE904\");\n+        factionIcon.getStyleClass().add(\"uef\");\n+        break;\n+      default:\n+        factionImage.setVisible(true);\n+        factionImage.setImage(randomImage);\n+        break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d0890a135cf9cf505825ac433ecf7011cbce1d3"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MzY1Nw==", "bodyText": "Well i think what he does making every unknow display as random seems ok to me", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399843657", "createdAt": "2020-03-29T19:43:56Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/game/PlayerCardTooltipController.java", "diffHunk": "@@ -48,9 +53,44 @@ public Node getRoot() {\n \n   @Override\n   public void initialize() {\n+    factionImage.managedProperty().bind(factionImage.visibleProperty());\n+    factionIcon.managedProperty().bind(factionIcon.visibleProperty());\n     foeIconText.managedProperty().bind(foeIconText.visibleProperty());\n     foeIconText.setTooltip(new Tooltip(i18n.get(\"userInfo.foe\")));\n     friendIconText.managedProperty().bind(friendIconText.visibleProperty());\n     friendIconText.setTooltip(new Tooltip(i18n.get(\"userInfo.friend\")));\n   }\n+\n+  private void setFactionIcon(Faction faction) {\n+    if (faction == null) {\n+      return;\n+    }\n+\n+    switch (faction) {\n+      case AEON:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE900\");\n+        factionIcon.getStyleClass().add(\"aeon\");\n+        break;\n+      case CYBRAN:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE902\");\n+        factionIcon.getStyleClass().add(\"cybran\");\n+        break;\n+      case SERAPHIM:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE903\");\n+        factionIcon.getStyleClass().add(\"seraphim\");\n+        break;\n+      case UEF:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE904\");\n+        factionIcon.getStyleClass().add(\"uef\");\n+        break;\n+      default:\n+        factionImage.setVisible(true);\n+        factionImage.setImage(randomImage);\n+        break;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MTU4NQ=="}, "originalCommit": {"oid": "0d0890a135cf9cf505825ac433ecf7011cbce1d3"}, "originalPosition": 69}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3OTM4MDYwOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/faforever/client/game/PlayerCardTooltipControllerTest.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxOTozMDowN1rOF9UbEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMDozNTozM1rOF9U6_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MjA2Ng==", "bodyText": "Yea, not sure about this test.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399842066", "createdAt": "2020-03-29T19:30:07Z", "author": {"login": "Askaholic"}, "path": "src/test/java/com/faforever/client/game/PlayerCardTooltipControllerTest.java", "diffHunk": "@@ -66,8 +73,11 @@ public void testSetOther() {\n         .defaultValues()\n         .socialStatus(SocialStatus.OTHER);\n     Player player = playerBuilder.get();\n-    instance.setPlayer(player, 1000);\n+    instance.setPlayer(player, 1000, Faction.NOMAD);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d0890a135cf9cf505825ac433ecf7011cbce1d3"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MzcyMw==", "bodyText": "Well yes but let's not blame him I think it is ok. this whole faction number thing is fucked", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399843723", "createdAt": "2020-03-29T19:44:34Z", "author": {"login": "1-alex98"}, "path": "src/test/java/com/faforever/client/game/PlayerCardTooltipControllerTest.java", "diffHunk": "@@ -66,8 +73,11 @@ public void testSetOther() {\n         .defaultValues()\n         .socialStatus(SocialStatus.OTHER);\n     Player player = playerBuilder.get();\n-    instance.setPlayer(player, 1000);\n+    instance.setPlayer(player, 1000, Faction.NOMAD);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MjA2Ng=="}, "originalCommit": {"oid": "0d0890a135cf9cf505825ac433ecf7011cbce1d3"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0ODMxNA==", "bodyText": "I'm just saying maybe don't make a test that asserts wrong behavior.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399848314", "createdAt": "2020-03-29T20:20:20Z", "author": {"login": "Askaholic"}, "path": "src/test/java/com/faforever/client/game/PlayerCardTooltipControllerTest.java", "diffHunk": "@@ -66,8 +73,11 @@ public void testSetOther() {\n         .defaultValues()\n         .socialStatus(SocialStatus.OTHER);\n     Player player = playerBuilder.get();\n-    instance.setPlayer(player, 1000);\n+    instance.setPlayer(player, 1000, Faction.NOMAD);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MjA2Ng=="}, "originalCommit": {"oid": "0d0890a135cf9cf505825ac433ecf7011cbce1d3"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1MDIzNg==", "bodyText": "I changed the enum name to RANDOM instead of NOMAD. It's not used anywhere else, so shouldn't be a problem.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399850236", "createdAt": "2020-03-29T20:35:33Z", "author": {"login": "FemtoZetta"}, "path": "src/test/java/com/faforever/client/game/PlayerCardTooltipControllerTest.java", "diffHunk": "@@ -66,8 +73,11 @@ public void testSetOther() {\n         .defaultValues()\n         .socialStatus(SocialStatus.OTHER);\n     Player player = playerBuilder.get();\n-    instance.setPlayer(player, 1000);\n+    instance.setPlayer(player, 1000, Faction.NOMAD);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MjA2Ng=="}, "originalCommit": {"oid": "0d0890a135cf9cf505825ac433ecf7011cbce1d3"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3OTczNjg3OnYy", "diffSide": "RIGHT", "path": "src/main/resources/theme/style.css", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwMTo0NjozMVrOF9XT-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNzowMToxM1rOF9zaPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg4OTQwMQ==", "bodyText": "So are these even needed then?", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399889401", "createdAt": "2020-03-30T01:46:31Z", "author": {"login": "Askaholic"}, "path": "src/main/resources/theme/style.css", "diffHunk": "@@ -1002,6 +1002,28 @@\n   -fx-opacity: 1;\n }\n \n+/***************** Faction label *****************/\n+\n+.icon.faction-label .text, .icon.faction-label {\n+  -fx-font-size: 2em;\n+}\n+\n+.faction-label.aeon .text {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5cf346a4c571c4d46a33134df03935c9fe3979a"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDM0OTc1OQ==", "bodyText": "No u are right be need to remove those", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r400349759", "createdAt": "2020-03-30T17:01:13Z", "author": {"login": "1-alex98"}, "path": "src/main/resources/theme/style.css", "diffHunk": "@@ -1002,6 +1002,28 @@\n   -fx-opacity: 1;\n }\n \n+/***************** Faction label *****************/\n+\n+.icon.faction-label .text, .icon.faction-label {\n+  -fx-font-size: 2em;\n+}\n+\n+.faction-label.aeon .text {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg4OTQwMQ=="}, "originalCommit": {"oid": "a5cf346a4c571c4d46a33134df03935c9fe3979a"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2175, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}