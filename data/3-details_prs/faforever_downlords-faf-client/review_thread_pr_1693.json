{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NTA0MTI3", "number": 1693, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwOTowMTo0MVrOD7-b-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODoyNzozMlrOD9673w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MjE1NTQ3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/game/CreateGameController.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwOTowMTo0MVrOGUoPog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODoyMzozOVrOGXtIJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI4NDA2Ng==", "bodyText": "Try avoid UI style set in java code at all costs, use Pseudoclass", "url": "https://github.com/FAForever/downlords-faf-client/pull/1693#discussion_r424284066", "createdAt": "2020-05-13T09:01:41Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/game/CreateGameController.java", "diffHunk": "@@ -140,8 +148,19 @@ public void initialize() {\n       selectionModel.select(newMapIndex);\n       mapListView.scrollTo(newMapIndex);\n     });\n-\n-    featuredModListView.setCellFactory(param -> new StringListCell<>(FeaturedMod::getDisplayName));\n+    \n+    Function<FeaturedMod, String> isDefaultModString = mod ->\n+      Objects.equals(mod.getTechnicalName(), KnownFeaturedMod.DEFAULT.getTechnicalName()) ?\n+      \" \" + i18n.get(\"game.create.defaultGameTypeMarker\") : null;\n+    \n+    featuredModListView.setCellFactory(param ->\n+        new DualStringListCell<FeaturedMod>(FeaturedMod::getDisplayName, isDefaultModString, false) {\n+      @Override\n+      protected void init() {\n+        // use bind to overwrite updates from css\n+        right.textFillProperty().bind(new SimpleObjectProperty<Paint>(Color.GREY));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2868950143184e588faf2a72532cf0c7a81376ed"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDUyNjc3Ng==", "bodyText": "I can try but it might not be possible due to how DualStringListCell works.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1693#discussion_r424526776", "createdAt": "2020-05-13T15:25:33Z", "author": {"login": "Katharsas"}, "path": "src/main/java/com/faforever/client/game/CreateGameController.java", "diffHunk": "@@ -140,8 +148,19 @@ public void initialize() {\n       selectionModel.select(newMapIndex);\n       mapListView.scrollTo(newMapIndex);\n     });\n-\n-    featuredModListView.setCellFactory(param -> new StringListCell<>(FeaturedMod::getDisplayName));\n+    \n+    Function<FeaturedMod, String> isDefaultModString = mod ->\n+      Objects.equals(mod.getTechnicalName(), KnownFeaturedMod.DEFAULT.getTechnicalName()) ?\n+      \" \" + i18n.get(\"game.create.defaultGameTypeMarker\") : null;\n+    \n+    featuredModListView.setCellFactory(param ->\n+        new DualStringListCell<FeaturedMod>(FeaturedMod::getDisplayName, isDefaultModString, false) {\n+      @Override\n+      protected void init() {\n+        // use bind to overwrite updates from css\n+        right.textFillProperty().bind(new SimpleObjectProperty<Paint>(Color.GREY));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI4NDA2Ng=="}, "originalCommit": {"oid": "2868950143184e588faf2a72532cf0c7a81376ed"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE1OTMwNg==", "bodyText": "it is just give it a style class(possibly in code) and set this style class in css", "url": "https://github.com/FAForever/downlords-faf-client/pull/1693#discussion_r427159306", "createdAt": "2020-05-19T09:25:30Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/game/CreateGameController.java", "diffHunk": "@@ -140,8 +148,19 @@ public void initialize() {\n       selectionModel.select(newMapIndex);\n       mapListView.scrollTo(newMapIndex);\n     });\n-\n-    featuredModListView.setCellFactory(param -> new StringListCell<>(FeaturedMod::getDisplayName));\n+    \n+    Function<FeaturedMod, String> isDefaultModString = mod ->\n+      Objects.equals(mod.getTechnicalName(), KnownFeaturedMod.DEFAULT.getTechnicalName()) ?\n+      \" \" + i18n.get(\"game.create.defaultGameTypeMarker\") : null;\n+    \n+    featuredModListView.setCellFactory(param ->\n+        new DualStringListCell<FeaturedMod>(FeaturedMod::getDisplayName, isDefaultModString, false) {\n+      @Override\n+      protected void init() {\n+        // use bind to overwrite updates from css\n+        right.textFillProperty().bind(new SimpleObjectProperty<Paint>(Color.GREY));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI4NDA2Ng=="}, "originalCommit": {"oid": "2868950143184e588faf2a72532cf0c7a81376ed"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwOTc5OA==", "bodyText": "Ok problem was that (default) ended up with other font/size than the other cell. Need to check when i have time.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1693#discussion_r427509798", "createdAt": "2020-05-19T18:23:39Z", "author": {"login": "Katharsas"}, "path": "src/main/java/com/faforever/client/game/CreateGameController.java", "diffHunk": "@@ -140,8 +148,19 @@ public void initialize() {\n       selectionModel.select(newMapIndex);\n       mapListView.scrollTo(newMapIndex);\n     });\n-\n-    featuredModListView.setCellFactory(param -> new StringListCell<>(FeaturedMod::getDisplayName));\n+    \n+    Function<FeaturedMod, String> isDefaultModString = mod ->\n+      Objects.equals(mod.getTechnicalName(), KnownFeaturedMod.DEFAULT.getTechnicalName()) ?\n+      \" \" + i18n.get(\"game.create.defaultGameTypeMarker\") : null;\n+    \n+    featuredModListView.setCellFactory(param ->\n+        new DualStringListCell<FeaturedMod>(FeaturedMod::getDisplayName, isDefaultModString, false) {\n+      @Override\n+      protected void init() {\n+        // use bind to overwrite updates from css\n+        right.textFillProperty().bind(new SimpleObjectProperty<Paint>(Color.GREY));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI4NDA2Ng=="}, "originalCommit": {"oid": "2868950143184e588faf2a72532cf0c7a81376ed"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MDM5NDMwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/fx/DualStringListCell.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwOToyODoyMFrOGXX2FA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwOToyODoyMFrOGXX2FA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE2MTEwOA==", "bodyText": "This should lso be done in fxm", "url": "https://github.com/FAForever/downlords-faf-client/pull/1693#discussion_r427161108", "createdAt": "2020-05-19T09:28:20Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/fx/DualStringListCell.java", "diffHunk": "@@ -0,0 +1,60 @@\n+package com.faforever.client.fx;\n+\n+import java.util.function.Function;\n+\n+import javafx.application.Platform;\n+import javafx.scene.control.Label;\n+import javafx.scene.control.ListCell;\n+import javafx.scene.layout.HBox;\n+import javafx.scene.layout.Priority;\n+import javafx.scene.layout.Region;\n+\n+/**\n+ * Alternative to {@link StringListCell} that allows to display to differently styled strings in each cell.\n+ */\n+public class DualStringListCell<T> extends ListCell<T> {\n+  protected Label left = new Label();\n+  protected Label right = new Label();\n+  protected Region spacer = new Region();\n+  \n+  private HBox container = new HBox(left, spacer, right);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2868950143184e588faf2a72532cf0c7a81376ed"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MjU1MzI3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/fx/DualStringListCell.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODoyNzozMlrOGXtQ1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwOToyNDo1MVrOGYC9vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxMjAyMw==", "bodyText": "This is not very performance friendly.\nThe JavaFX documentation (in some parent class) explicitely states that updateItem should ONLY reuse ui elements not create or recreate them.\nEdit: Ok maybe i got this wrong, this usually only happens once per object right?", "url": "https://github.com/FAForever/downlords-faf-client/pull/1693#discussion_r427512023", "createdAt": "2020-05-19T18:27:32Z", "author": {"login": "Katharsas"}, "path": "src/main/java/com/faforever/client/fx/DualStringListCell.java", "diffHunk": "@@ -48,12 +26,15 @@ protected void updateItem(T item, boolean empty) {\n         setText(null);\n         setGraphic(null);\n       } else {\n-        left.setText(functionLeft.apply(item));\n-        right.setText(functionRight.apply(item));\n+        if (dualStringListCellController == null) {\n+          dualStringListCellController = uiService.loadFxml(\"theme/dual_string_list_cell.fxml\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ef426e703f5f2db2988af9b866ff108dc7827d9"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzg2NzU4Mg==", "bodyText": "yes, this is essentially the same as u did...", "url": "https://github.com/FAForever/downlords-faf-client/pull/1693#discussion_r427867582", "createdAt": "2020-05-20T09:24:51Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/fx/DualStringListCell.java", "diffHunk": "@@ -48,12 +26,15 @@ protected void updateItem(T item, boolean empty) {\n         setText(null);\n         setGraphic(null);\n       } else {\n-        left.setText(functionLeft.apply(item));\n-        right.setText(functionRight.apply(item));\n+        if (dualStringListCellController == null) {\n+          dualStringListCellController = uiService.loadFxml(\"theme/dual_string_list_cell.fxml\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxMjAyMw=="}, "originalCommit": {"oid": "1ef426e703f5f2db2988af9b866ff108dc7827d9"}, "originalPosition": 62}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2186, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}