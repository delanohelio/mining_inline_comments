{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4MTkwNzMx", "number": 1878, "title": "copy local replay info to clipboard", "bodyText": "something like this would be cool\nThis PR adds a context menu to the local replay entries where you can copy the replay id or the replay path\n\n(note that I don't write Java for a living, I'm happy to change things for the PR)", "createdAt": "2020-09-02T21:43:40Z", "url": "https://github.com/FAForever/downlords-faf-client/pull/1878", "merged": true, "mergeCommit": {"oid": "8462efc32a15b56c6a0e209330ae249e5b2d2956"}, "closed": true, "closedAt": "2020-09-17T09:25:45Z", "author": {"login": "archaeron"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFq_eWAFqTQ4MjkxNDc4OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJtaSuAFqTQ5MDQwMDc0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTE0Nzg5", "url": "https://github.com/FAForever/downlords-faf-client/pull/1878#pullrequestreview-482914789", "createdAt": "2020-09-04T20:07:54Z", "commit": {"oid": "3800615e77fc2fe2936352275f0e295f1bc268a3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDowNzo1NFrOHNaSdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDoxMjowNlrOHNaYhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyNDI0Nw==", "bodyText": "we use internationalization so this needs to be translatable. Use the i18n service. Just make a constructor parameter like all the other services. You then enter the english translation in the message.properties file in the resources/i18n folder", "url": "https://github.com/FAForever/downlords-faf-client/pull/1878#discussion_r483824247", "createdAt": "2020-09-04T20:07:54Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/vault/replay/ReplayVaultController.java", "diffHunk": "@@ -120,6 +124,25 @@ protected void loadLocalReplaysInBackground() {\n   @NotNull\n   private TableRow<Replay> replayRowFactory() {\n     TableRow<Replay> row = new TableRow<>();\n+    ContextMenu contextMenu = new ContextMenu();\n+    MenuItem copyReplayId = new MenuItem(\"Copy Replay Id\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3800615e77fc2fe2936352275f0e295f1bc268a3"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyNDQ2MA==", "bodyText": "Maybe extract into method(ctrl+ alt+ m in Intelij)", "url": "https://github.com/FAForever/downlords-faf-client/pull/1878#discussion_r483824460", "createdAt": "2020-09-04T20:08:31Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/vault/replay/ReplayVaultController.java", "diffHunk": "@@ -120,6 +124,25 @@ protected void loadLocalReplaysInBackground() {\n   @NotNull\n   private TableRow<Replay> replayRowFactory() {\n     TableRow<Replay> row = new TableRow<>();\n+    ContextMenu contextMenu = new ContextMenu();\n+    MenuItem copyReplayId = new MenuItem(\"Copy Replay Id\");\n+    copyReplayId.setOnAction(event -> {\n+      var replayId = row.getItem().getId();\n+      final Clipboard clipboard = Clipboard.getSystemClipboard();\n+      final ClipboardContent content = new ClipboardContent();\n+      content.putString(String.valueOf(replayId));\n+      clipboard.setContent(content);\n+    });\n+    MenuItem copyReplayPath = new MenuItem(\"Copy Replay Path\");\n+    copyReplayPath.setOnAction(event -> {\n+      var replayPath = row.getItem().getReplayFile();\n+      final Clipboard clipboard = Clipboard.getSystemClipboard();\n+      final ClipboardContent content = new ClipboardContent();\n+      content.putString(String.valueOf(replayPath));\n+      clipboard.setContent(content);\n+    });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3800615e77fc2fe2936352275f0e295f1bc268a3"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyNDU3OA==", "bodyText": "We avoid the var keyword for code style reasons", "url": "https://github.com/FAForever/downlords-faf-client/pull/1878#discussion_r483824578", "createdAt": "2020-09-04T20:08:53Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/vault/replay/ReplayVaultController.java", "diffHunk": "@@ -120,6 +124,25 @@ protected void loadLocalReplaysInBackground() {\n   @NotNull\n   private TableRow<Replay> replayRowFactory() {\n     TableRow<Replay> row = new TableRow<>();\n+    ContextMenu contextMenu = new ContextMenu();\n+    MenuItem copyReplayId = new MenuItem(\"Copy Replay Id\");\n+    copyReplayId.setOnAction(event -> {\n+      var replayId = row.getItem().getId();\n+      final Clipboard clipboard = Clipboard.getSystemClipboard();\n+      final ClipboardContent content = new ClipboardContent();\n+      content.putString(String.valueOf(replayId));\n+      clipboard.setContent(content);\n+    });\n+    MenuItem copyReplayPath = new MenuItem(\"Copy Replay Path\");\n+    copyReplayPath.setOnAction(event -> {\n+      var replayPath = row.getItem().getReplayFile();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3800615e77fc2fe2936352275f0e295f1bc268a3"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyNTc5Nw==", "bodyText": "Not sure how String.valueOf divers from that but maybe .getAbsolutePath() would be safer. Not sure if that method exists cause I am not sure what the type of that variable is(since you use var).", "url": "https://github.com/FAForever/downlords-faf-client/pull/1878#discussion_r483825797", "createdAt": "2020-09-04T20:12:06Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/vault/replay/ReplayVaultController.java", "diffHunk": "@@ -120,6 +124,25 @@ protected void loadLocalReplaysInBackground() {\n   @NotNull\n   private TableRow<Replay> replayRowFactory() {\n     TableRow<Replay> row = new TableRow<>();\n+    ContextMenu contextMenu = new ContextMenu();\n+    MenuItem copyReplayId = new MenuItem(\"Copy Replay Id\");\n+    copyReplayId.setOnAction(event -> {\n+      var replayId = row.getItem().getId();\n+      final Clipboard clipboard = Clipboard.getSystemClipboard();\n+      final ClipboardContent content = new ClipboardContent();\n+      content.putString(String.valueOf(replayId));\n+      clipboard.setContent(content);\n+    });\n+    MenuItem copyReplayPath = new MenuItem(\"Copy Replay Path\");\n+    copyReplayPath.setOnAction(event -> {\n+      var replayPath = row.getItem().getReplayFile();\n+      final Clipboard clipboard = Clipboard.getSystemClipboard();\n+      final ClipboardContent content = new ClipboardContent();\n+      content.putString(String.valueOf(replayPath));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3800615e77fc2fe2936352275f0e295f1bc268a3"}, "originalPosition": 35}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "53e35fe8589a5eeba2fc9bd9b6b1e636b0bdf138", "author": {"user": {"login": "archaeron", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/53e35fe8589a5eeba2fc9bd9b6b1e636b0bdf138", "committedDate": "2020-09-08T21:14:21Z", "message": "extract into replayRowContextMenuFactory"}, "afterCommit": {"oid": "50e625f5d271b835dc4db43c7b4e1e83fba16b54", "author": {"user": {"login": "archaeron", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/50e625f5d271b835dc4db43c7b4e1e83fba16b54", "committedDate": "2020-09-08T21:27:15Z", "message": "add i18n to replayRowContextMenuFactory"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0ODA2NDU0", "url": "https://github.com/FAForever/downlords-faf-client/pull/1878#pullrequestreview-484806454", "createdAt": "2020-09-09T09:03:21Z", "commit": {"oid": "50e625f5d271b835dc4db43c7b4e1e83fba16b54"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MzQxNDIx", "url": "https://github.com/FAForever/downlords-faf-client/pull/1878#pullrequestreview-486341421", "createdAt": "2020-09-10T22:02:46Z", "commit": {"oid": "50e625f5d271b835dc4db43c7b4e1e83fba16b54"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMjowMjo0NlrOHQHR7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMjowMjo0NlrOHQHR7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY1ODU0Mw==", "bodyText": "Duplicate code. I don't know if we use clipboard features elsewhere, but if yes a clipboard util class probably makes sense, otherwise at least this should be extracted into a method here.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1878#discussion_r486658543", "createdAt": "2020-09-10T22:02:46Z", "author": {"login": "Brutus5000"}, "path": "src/main/java/com/faforever/client/vault/replay/ReplayVaultController.java", "diffHunk": "@@ -129,6 +137,30 @@ protected void loadLocalReplaysInBackground() {\n     return row;\n   }\n \n+  @NotNull\n+  private ContextMenu replayRowContextMenuFactory(Replay replay) {\n+    ContextMenu contextMenu = new ContextMenu();\n+    MenuItem copyReplayId = new MenuItem(i18n.get(\"vault.replays.copyReplayId\"));\n+    copyReplayId.setOnAction(event -> {\n+      int replayId = replay.getId();\n+      final Clipboard clipboard = Clipboard.getSystemClipboard();\n+      final ClipboardContent content = new ClipboardContent();\n+      content.putString(String.valueOf(replayId));\n+      clipboard.setContent(content);\n+    });\n+    MenuItem copyReplayPath = new MenuItem(i18n.get(\"vault.replays.copyReplayPath\"));\n+    copyReplayPath.setOnAction(event -> {\n+      Path replayPath = replay.getReplayFile();\n+      final Clipboard clipboard = Clipboard.getSystemClipboard();\n+      final ClipboardContent content = new ClipboardContent();\n+      content.putString(replayPath.toFile().getAbsolutePath());\n+      clipboard.setContent(content);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50e625f5d271b835dc4db43c7b4e1e83fba16b54"}, "originalPosition": 56}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "50e625f5d271b835dc4db43c7b4e1e83fba16b54", "author": {"user": {"login": "archaeron", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/50e625f5d271b835dc4db43c7b4e1e83fba16b54", "committedDate": "2020-09-08T21:27:15Z", "message": "add i18n to replayRowContextMenuFactory"}, "afterCommit": {"oid": "ce0196ddc2d19bb765805a2f8a1e54fe7459a822", "author": {"user": {"login": "archaeron", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/ce0196ddc2d19bb765805a2f8a1e54fe7459a822", "committedDate": "2020-09-14T20:06:45Z", "message": "add i18n to replayRowContextMenuFactory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e7ea5c6254b7e158f0a0f05ee24379b782a5a99", "author": {"user": {"login": "archaeron", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/9e7ea5c6254b7e158f0a0f05ee24379b782a5a99", "committedDate": "2020-09-14T20:07:34Z", "message": "copy local replay info to clipboard"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ce0196ddc2d19bb765805a2f8a1e54fe7459a822", "author": {"user": {"login": "archaeron", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/ce0196ddc2d19bb765805a2f8a1e54fe7459a822", "committedDate": "2020-09-14T20:06:45Z", "message": "add i18n to replayRowContextMenuFactory"}, "afterCommit": {"oid": "9e7ea5c6254b7e158f0a0f05ee24379b782a5a99", "author": {"user": {"login": "archaeron", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/9e7ea5c6254b7e158f0a0f05ee24379b782a5a99", "committedDate": "2020-09-14T20:07:34Z", "message": "copy local replay info to clipboard"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwMzYyMjE2", "url": "https://github.com/FAForever/downlords-faf-client/pull/1878#pullrequestreview-490362216", "createdAt": "2020-09-17T08:30:21Z", "commit": {"oid": "9e7ea5c6254b7e158f0a0f05ee24379b782a5a99"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNDAwNzQ4", "url": "https://github.com/FAForever/downlords-faf-client/pull/1878#pullrequestreview-490400748", "createdAt": "2020-09-17T09:17:00Z", "commit": {"oid": "9e7ea5c6254b7e158f0a0f05ee24379b782a5a99"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3278, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}