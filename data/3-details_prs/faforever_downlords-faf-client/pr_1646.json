{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1MzAxODA1", "number": 1646, "title": "#1645-add-faction-icon-replay-detail", "bodyText": "fixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names", "createdAt": "2020-03-29T19:04:33Z", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646", "merged": true, "mergeCommit": {"oid": "69cd77d0d607219711c54c60091ddfca9b7a6692"}, "closed": true, "closedAt": "2020-03-29T20:49:00Z", "author": {"login": "FemtoZetta"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSfGFGgFqTM4MzQ0NDQ1NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSkeaNgFqTM4MzQ4ODMxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNDQ0NDU0", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#pullrequestreview-383444454", "createdAt": "2020-03-29T19:11:20Z", "commit": {"oid": "0d0890a135cf9cf505825ac433ecf7011cbce1d3"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxOToxMToyMFrOF9USzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxOTozMDowN1rOF9UbEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTgzOTk0OQ==", "bodyText": "You have this same line in every case. How about moving it after the switch.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399839949", "createdAt": "2020-03-29T19:11:20Z", "author": {"login": "Askaholic"}, "path": "src/main/java/com/faforever/client/game/PlayerCardTooltipController.java", "diffHunk": "@@ -48,9 +53,44 @@ public Node getRoot() {\n \n   @Override\n   public void initialize() {\n+    factionImage.managedProperty().bind(factionImage.visibleProperty());\n+    factionIcon.managedProperty().bind(factionIcon.visibleProperty());\n     foeIconText.managedProperty().bind(foeIconText.visibleProperty());\n     foeIconText.setTooltip(new Tooltip(i18n.get(\"userInfo.foe\")));\n     friendIconText.managedProperty().bind(friendIconText.visibleProperty());\n     friendIconText.setTooltip(new Tooltip(i18n.get(\"userInfo.friend\")));\n   }\n+\n+  private void setFactionIcon(Faction faction) {\n+    if (faction == null) {\n+      return;\n+    }\n+\n+    switch (faction) {\n+      case AEON:\n+        factionIcon.setVisible(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d0890a135cf9cf505825ac433ecf7011cbce1d3"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MTU4NQ==", "bodyText": "Alex asked me about this earlier. I think in normal FAF having faction 5 means random, but I'm not sure about nomads. I would recommend you fire up a nomads game and see what the faction numbers for random and nomads are. It could be that in nomads 5 is nomads and 6 is random.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399841585", "createdAt": "2020-03-29T19:26:23Z", "author": {"login": "Askaholic"}, "path": "src/main/java/com/faforever/client/game/PlayerCardTooltipController.java", "diffHunk": "@@ -48,9 +53,44 @@ public Node getRoot() {\n \n   @Override\n   public void initialize() {\n+    factionImage.managedProperty().bind(factionImage.visibleProperty());\n+    factionIcon.managedProperty().bind(factionIcon.visibleProperty());\n     foeIconText.managedProperty().bind(foeIconText.visibleProperty());\n     foeIconText.setTooltip(new Tooltip(i18n.get(\"userInfo.foe\")));\n     friendIconText.managedProperty().bind(friendIconText.visibleProperty());\n     friendIconText.setTooltip(new Tooltip(i18n.get(\"userInfo.friend\")));\n   }\n+\n+  private void setFactionIcon(Faction faction) {\n+    if (faction == null) {\n+      return;\n+    }\n+\n+    switch (faction) {\n+      case AEON:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE900\");\n+        factionIcon.getStyleClass().add(\"aeon\");\n+        break;\n+      case CYBRAN:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE902\");\n+        factionIcon.getStyleClass().add(\"cybran\");\n+        break;\n+      case SERAPHIM:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE903\");\n+        factionIcon.getStyleClass().add(\"seraphim\");\n+        break;\n+      case UEF:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE904\");\n+        factionIcon.getStyleClass().add(\"uef\");\n+        break;\n+      default:\n+        factionImage.setVisible(true);\n+        factionImage.setImage(randomImage);\n+        break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d0890a135cf9cf505825ac433ecf7011cbce1d3"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MjA2Ng==", "bodyText": "Yea, not sure about this test.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399842066", "createdAt": "2020-03-29T19:30:07Z", "author": {"login": "Askaholic"}, "path": "src/test/java/com/faforever/client/game/PlayerCardTooltipControllerTest.java", "diffHunk": "@@ -66,8 +73,11 @@ public void testSetOther() {\n         .defaultValues()\n         .socialStatus(SocialStatus.OTHER);\n     Player player = playerBuilder.get();\n-    instance.setPlayer(player, 1000);\n+    instance.setPlayer(player, 1000, Faction.NOMAD);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d0890a135cf9cf505825ac433ecf7011cbce1d3"}, "originalPosition": 39}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0d0890a135cf9cf505825ac433ecf7011cbce1d3", "author": {"user": {"login": "FemtoZetta", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/0d0890a135cf9cf505825ac433ecf7011cbce1d3", "committedDate": "2020-03-29T18:56:26Z", "message": "#1645-add-faction-icon-replay-detail\n\nfixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names"}, "afterCommit": {"oid": "deccd38bb2e3679f79ce3add07fc7c9d46df4986", "author": {"user": {"login": "FemtoZetta", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/deccd38bb2e3679f79ce3add07fc7c9d46df4986", "committedDate": "2020-03-29T19:41:21Z", "message": "#1645-add-faction-icon-replay-detail\n\nfixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "deccd38bb2e3679f79ce3add07fc7c9d46df4986", "author": {"user": {"login": "FemtoZetta", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/deccd38bb2e3679f79ce3add07fc7c9d46df4986", "committedDate": "2020-03-29T19:41:21Z", "message": "#1645-add-faction-icon-replay-detail\n\nfixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names"}, "afterCommit": {"oid": "ee8c7e0ff900947f4fb776d6284eb72d7e692a2c", "author": {"user": {"login": "FemtoZetta", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/ee8c7e0ff900947f4fb776d6284eb72d7e692a2c", "committedDate": "2020-03-29T19:43:59Z", "message": "#1645-add-faction-icon-replay-detail\n\nfixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ee8c7e0ff900947f4fb776d6284eb72d7e692a2c", "author": {"user": {"login": "FemtoZetta", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/ee8c7e0ff900947f4fb776d6284eb72d7e692a2c", "committedDate": "2020-03-29T19:43:59Z", "message": "#1645-add-faction-icon-replay-detail\n\nfixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names"}, "afterCommit": {"oid": "66e939a1cfc82131d10a24a401ad4ec6811fe9df", "author": {"user": {"login": "FemtoZetta", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/66e939a1cfc82131d10a24a401ad4ec6811fe9df", "committedDate": "2020-03-29T19:46:19Z", "message": "#1645-add-faction-icon-replay-detail\n\nfixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5cf346a4c571c4d46a33134df03935c9fe3979a", "author": {"user": {"login": "FemtoZetta", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/a5cf346a4c571c4d46a33134df03935c9fe3979a", "committedDate": "2020-03-29T20:30:10Z", "message": "#1645-add-faction-icon-replay-detail\n\nfixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "66e939a1cfc82131d10a24a401ad4ec6811fe9df", "author": {"user": {"login": "FemtoZetta", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/66e939a1cfc82131d10a24a401ad4ec6811fe9df", "committedDate": "2020-03-29T19:46:19Z", "message": "#1645-add-faction-icon-replay-detail\n\nfixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names"}, "afterCommit": {"oid": "a5cf346a4c571c4d46a33134df03935c9fe3979a", "author": {"user": {"login": "FemtoZetta", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/a5cf346a4c571c4d46a33134df03935c9fe3979a", "committedDate": "2020-03-29T20:30:10Z", "message": "#1645-add-faction-icon-replay-detail\n\nfixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNDUzOTgx", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#pullrequestreview-383453981", "createdAt": "2020-03-29T20:48:53Z", "commit": {"oid": "66e939a1cfc82131d10a24a401ad4ec6811fe9df"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNDg4MzEy", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#pullrequestreview-383488312", "createdAt": "2020-03-30T01:46:31Z", "commit": {"oid": "a5cf346a4c571c4d46a33134df03935c9fe3979a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwMTo0NjozMVrOF9XT-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwMTo0NjozMVrOF9XT-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg4OTQwMQ==", "bodyText": "So are these even needed then?", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399889401", "createdAt": "2020-03-30T01:46:31Z", "author": {"login": "Askaholic"}, "path": "src/main/resources/theme/style.css", "diffHunk": "@@ -1002,6 +1002,28 @@\n   -fx-opacity: 1;\n }\n \n+/***************** Faction label *****************/\n+\n+.icon.faction-label .text, .icon.faction-label {\n+  -fx-font-size: 2em;\n+}\n+\n+.faction-label.aeon .text {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5cf346a4c571c4d46a33134df03935c9fe3979a"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3361, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}