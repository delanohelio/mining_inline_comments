{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxNjc3Mjkw", "number": 1865, "title": "Show reason for not rated games", "bodyText": "Fixes #1864", "createdAt": "2020-08-21T14:45:57Z", "url": "https://github.com/FAForever/downlords-faf-client/pull/1865", "merged": true, "mergeCommit": {"oid": "870466ee74ab118702a4585b85dd9e1de69ae5b7"}, "closed": true, "closedAt": "2020-10-04T19:52:06Z", "author": {"login": "1-alex98"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdBF-0bAFqTQ3MjU1NDYzNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPUrgJgFqTUwMTY1NDA2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNTU0NjM2", "url": "https://github.com/FAForever/downlords-faf-client/pull/1865#pullrequestreview-472554636", "createdAt": "2020-08-21T14:49:18Z", "commit": {"oid": "8a00d638a4115f795b4f771756ad9d1405228bde"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxNDo0OToxOFrOHEwPMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxNDo0OToxOFrOHEwPMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDc0NjY3Mg==", "bodyText": "This will not translate the validity reasons, so it's not a proper i18n solution.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1865#discussion_r474746672", "createdAt": "2020-08-21T14:49:18Z", "author": {"login": "Brutus5000"}, "path": "src/main/java/com/faforever/client/replay/ReplayDetailController.java", "diffHunk": "@@ -318,6 +315,22 @@ private void populateTeamsContainer() {\n     }));\n   }\n \n+  private void configureRatingControls() {\n+    if (!replay.getValidity().equals(Validity.VALID)) {\n+      showRatingChangeButton.setVisible(false);\n+      notRatedReasonLabel.setVisible(true);\n+      notRatedReasonLabel.setText(i18n.get(\"game.reasonNotValid\", replay.getValidity()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a00d638a4115f795b4f771756ad9d1405228bde"}, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8a00d638a4115f795b4f771756ad9d1405228bde", "author": {"user": {"login": "1-alex98", "name": "Alexander von Trostorff"}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/8a00d638a4115f795b4f771756ad9d1405228bde", "committedDate": "2020-08-21T14:45:25Z", "message": "Show reason for not rated games\n\nFixes #1864"}, "afterCommit": {"oid": "b186a24287b2cd96c800627d454150e0ffab17a0", "author": {"user": {"login": "Sheikah45", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/b186a24287b2cd96c800627d454150e0ffab17a0", "committedDate": "2020-08-29T17:54:52Z", "message": "Use i18n for validity reasons"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MjIxNDYw", "url": "https://github.com/FAForever/downlords-faf-client/pull/1865#pullrequestreview-478221460", "createdAt": "2020-08-30T17:38:03Z", "commit": {"oid": "6e163fee08ab740044802af99966df71ff731669"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxNzozODowM1rOHJkbXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxNzo0MDowM1rOHJkcKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc5NjA2Mw==", "bodyText": "I am pretty sure game.reasonNotValid.keyFormat should not be in I18N, imagine somebody thinks he most translate it then this breaks for the other languages.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1865#discussion_r479796063", "createdAt": "2020-08-30T17:38:03Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayDetailController.java", "diffHunk": "@@ -321,6 +315,22 @@ private void populateTeamsContainer() {\n     }));\n   }\n \n+  private void configureRatingControls() {\n+    if (!replay.getValidity().equals(Validity.VALID)) {\n+      showRatingChangeButton.setVisible(false);\n+      notRatedReasonLabel.setVisible(true);\n+      notRatedReasonLabel.setText(i18n.get(\"game.reasonNotValid\", i18n.get(i18n.get(\"game.reasonNotValid.keyFormat\", replay.getValidity().ordinal()))));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e163fee08ab740044802af99966df71ff731669"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc5NjA5NQ==", "bodyText": "Also you got to have a fallback. Maybe somebody adds a new validity reason to the server one day. I suggest if the i18n key does not exist just take the getValidity().name() and say it is the reason.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1865#discussion_r479796095", "createdAt": "2020-08-30T17:38:33Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayDetailController.java", "diffHunk": "@@ -321,6 +315,22 @@ private void populateTeamsContainer() {\n     }));\n   }\n \n+  private void configureRatingControls() {\n+    if (!replay.getValidity().equals(Validity.VALID)) {\n+      showRatingChangeButton.setVisible(false);\n+      notRatedReasonLabel.setVisible(true);\n+      notRatedReasonLabel.setText(i18n.get(\"game.reasonNotValid\", i18n.get(i18n.get(\"game.reasonNotValid.keyFormat\", replay.getValidity().ordinal()))));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e163fee08ab740044802af99966df71ff731669"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc5NjE4Ng==", "bodyText": "That should be a constant", "url": "https://github.com/FAForever/downlords-faf-client/pull/1865#discussion_r479796186", "createdAt": "2020-08-30T17:39:21Z", "author": {"login": "1-alex98"}, "path": "src/main/resources/i18n/messages.properties", "diffHunk": "@@ -655,7 +655,32 @@ replay.playerCountTooltip=Players\n replay.ratingTooltip=Average rating\n replay.qualityTooltip=Quality\n game.showRatingChange=Show rating change\n-game.notValid=The game was not rated\n+game.reasonNotValid=Game was not rated. Reason: {0}\n+game.reasonNotValid.keyFormat=game.reasonNotValid.{0}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e163fee08ab740044802af99966df71ff731669"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc5NjI2NQ==", "bodyText": "On the other hand then parsing the json would not work so maybe that is not needed. But safety messure would not hurt...", "url": "https://github.com/FAForever/downlords-faf-client/pull/1865#discussion_r479796265", "createdAt": "2020-08-30T17:40:03Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayDetailController.java", "diffHunk": "@@ -321,6 +315,22 @@ private void populateTeamsContainer() {\n     }));\n   }\n \n+  private void configureRatingControls() {\n+    if (!replay.getValidity().equals(Validity.VALID)) {\n+      showRatingChangeButton.setVisible(false);\n+      notRatedReasonLabel.setVisible(true);\n+      notRatedReasonLabel.setText(i18n.get(\"game.reasonNotValid\", i18n.get(i18n.get(\"game.reasonNotValid.keyFormat\", replay.getValidity().ordinal()))));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc5NjA5NQ=="}, "originalCommit": {"oid": "6e163fee08ab740044802af99966df71ff731669"}, "originalPosition": 68}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNjUzMTQ3", "url": "https://github.com/FAForever/downlords-faf-client/pull/1865#pullrequestreview-483653147", "createdAt": "2020-09-07T16:14:11Z", "commit": {"oid": "bcef7210caad1752b3c6e18651b027efb7daa2e7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNjoxNDoxMVrOHOEKHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNjoxNDoxMVrOHOEKHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUxMDIzNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public final String REASON_KEY_FORMAT = \"game.reasonNotValid.%d\";\n          \n          \n            \n              private static final String REASON_KEY_FORMAT = \"game.reasonNotValid.%d\";", "url": "https://github.com/FAForever/downlords-faf-client/pull/1865#discussion_r484510236", "createdAt": "2020-09-07T16:14:11Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayDetailController.java", "diffHunk": "@@ -66,6 +67,8 @@\n @RequiredArgsConstructor\n public class ReplayDetailController implements Controller<Node> {\n \n+  public final String REASON_KEY_FORMAT = \"game.reasonNotValid.%d\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcef7210caad1752b3c6e18651b027efb7daa2e7"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNjc5MDE4", "url": "https://github.com/FAForever/downlords-faf-client/pull/1865#pullrequestreview-483679018", "createdAt": "2020-09-07T17:54:05Z", "commit": {"oid": "ebd5b3c0dec1dd470b759c22259c6e29cc162f68"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb756731f44268c46e7d9c92de7eeb55b43b30a1", "author": {"user": {"login": "1-alex98", "name": "Alexander von Trostorff"}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/bb756731f44268c46e7d9c92de7eeb55b43b30a1", "committedDate": "2020-09-07T21:09:39Z", "message": "Show reason for not rated games\n\nFixes #1864"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1767d72a4b466fbd261a08e06949c1917e981da6", "author": {"user": {"login": "Sheikah45", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/1767d72a4b466fbd261a08e06949c1917e981da6", "committedDate": "2020-09-07T21:09:40Z", "message": "Use i18n for validity reasons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6883679795efc244dcd9546d186b6416a92bf5d2", "author": {"user": {"login": "Sheikah45", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/6883679795efc244dcd9546d186b6416a92bf5d2", "committedDate": "2020-09-07T21:09:40Z", "message": "i18n over String.format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5113151d96bf8ef4bedcf2ace0cc784ba26993c", "author": {"user": {"login": "Sheikah45", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/e5113151d96bf8ef4bedcf2ace0cc784ba26993c", "committedDate": "2020-09-07T21:09:42Z", "message": "Add check for key in i18n and remove formatkey from i18n"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1594ecfba67d783b2a865b344e770af0fe5e996", "author": {"user": {"login": "Sheikah45", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/d1594ecfba67d783b2a865b344e770af0fe5e996", "committedDate": "2020-09-07T21:09:43Z", "message": "Change string to private\n\nCo-authored-by: Alexander von Trostorff <19996713+axel1200@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9432d1e1aaba35b0422557f89c8d3e680fbd88b5", "author": {"user": {"login": "Sheikah45", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/9432d1e1aaba35b0422557f89c8d3e680fbd88b5", "committedDate": "2020-09-07T21:09:43Z", "message": "Set Constant to protected"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "826d84f26b6033ae33df48740568ded7c518e7de", "author": {"user": {"login": "Sheikah45", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/826d84f26b6033ae33df48740568ded7c518e7de", "committedDate": "2020-09-07T19:43:42Z", "message": "Set Constant to protected"}, "afterCommit": {"oid": "9432d1e1aaba35b0422557f89c8d3e680fbd88b5", "author": {"user": {"login": "Sheikah45", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/9432d1e1aaba35b0422557f89c8d3e680fbd88b5", "committedDate": "2020-09-07T21:09:43Z", "message": "Set Constant to protected"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MjkxNzIz", "url": "https://github.com/FAForever/downlords-faf-client/pull/1865#pullrequestreview-487291723", "createdAt": "2020-09-13T09:49:43Z", "commit": {"oid": "9432d1e1aaba35b0422557f89c8d3e680fbd88b5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8eb268e497af685db98bacb3f57c0277807794e8", "author": {"user": {"login": "Sheikah45", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/8eb268e497af685db98bacb3f57c0277807794e8", "committedDate": "2020-09-13T11:54:58Z", "message": "Implement constant i18n key"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bc18b9d7a82b0613d6b627a0b6ee32567396261", "author": {"user": {"login": "Sheikah45", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/0bc18b9d7a82b0613d6b627a0b6ee32567396261", "committedDate": "2020-09-13T12:09:34Z", "message": "Remove reason key format"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDI5MDE1", "url": "https://github.com/FAForever/downlords-faf-client/pull/1865#pullrequestreview-497029015", "createdAt": "2020-09-26T20:25:15Z", "commit": {"oid": "0bc18b9d7a82b0613d6b627a0b6ee32567396261"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNjU0MDY4", "url": "https://github.com/FAForever/downlords-faf-client/pull/1865#pullrequestreview-501654068", "createdAt": "2020-10-04T19:51:43Z", "commit": {"oid": "0bc18b9d7a82b0613d6b627a0b6ee32567396261"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3268, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}