{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0NTcxODYy", "number": 1561, "title": "Don't omit coop maps from the local map list", "bodyText": "Fixes #1560 and probably also #1246.\nPreviously, only skirmish maps were added to the list of installed maps. This led to replays of coop missions not showing up.\nThis patch fixes this while retaining the filter for skirmish maps when creating a new game.", "createdAt": "2020-01-19T19:53:41Z", "url": "https://github.com/FAForever/downlords-faf-client/pull/1561", "merged": true, "mergeCommit": {"oid": "1121e200ce6ccc7539eb89747705e06f6b7a9155"}, "closed": true, "closedAt": "2020-02-10T17:56:14Z", "author": {"login": "andreasley"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb79cNegH2gAyMzY0NTcxODYyOmNiMWE5MTM0OWE5ZmZhMjI4MTM5NDM2ZTM5M2Y0YzA4ODExMDg4Y2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcCsOL_gFqTM1NTYyMTk3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cb1a91349a9ffa228139436e393f4c08811088ce", "author": {"user": {"login": "andreasley", "name": "Andreas Ley"}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/cb1a91349a9ffa228139436e393f4c08811088ce", "committedDate": "2020-01-19T19:51:29Z", "message": "Fixes #1560 by no longer omitting coop maps from the local map list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MzAwODIz", "url": "https://github.com/FAForever/downlords-faf-client/pull/1561#pullrequestreview-345300823", "createdAt": "2020-01-20T13:18:18Z", "commit": {"oid": "cb1a91349a9ffa228139436e393f4c08811088ce"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxMzoxODoxOFrOFfeCpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxMzoxODoxOFrOFfeCpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU0MjM3Mw==", "bodyText": "I'd either remove the else, therefore having it as an abort condition or swap if and else around.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1561#discussion_r368542373", "createdAt": "2020-01-20T13:18:18Z", "author": {"login": "Geosearchef"}, "path": "src/main/java/com/faforever/client/map/MapService.java", "diffHunk": "@@ -303,25 +303,20 @@ public Image loadPreview(String mapName, PreviewSize previewSize) {\n \n \n   public ObservableList<MapBean> getInstalledMaps() {\n-    return installedSkirmishMaps;\n+    return installedMaps;\n   }\n \n-\n   public Optional<MapBean> getMapLocallyFromName(String mapFolderName) {\n     logger.debug(\"Trying to find map '{}' locally\", mapFolderName);\n-    ObservableList<MapBean> installedMaps = getInstalledMaps();\n-    synchronized (installedMaps) {\n-      for (MapBean mapBean : installedMaps) {\n-        if (mapFolderName.equalsIgnoreCase(mapBean.getFolderName())) {\n-          logger.debug(\"Found map {} locally\", mapFolderName);\n-          return Optional.of(mapBean);\n-        }\n-      }\n+    String mapFolderKey = mapFolderName.toLowerCase();\n+    if (!mapsByFolderName.containsKey(mapFolderKey)) {\n+      return Optional.empty();\n+    } else {\n+      MapBean mapBean = mapsByFolderName.get(mapFolderKey);\n+      return Optional.of(mapBean);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb1a91349a9ffa228139436e393f4c08811088ce"}, "originalPosition": 89}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1c8a3591ec95c7cbab5d8e3431f391c41d1a1d5", "author": {"user": {"login": "andreasley", "name": "Andreas Ley"}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/b1c8a3591ec95c7cbab5d8e3431f391c41d1a1d5", "committedDate": "2020-01-21T17:47:28Z", "message": "Simplified code\n\nhttps://github.com/FAForever/downlords-faf-client/pull/1561#discussion_r368542373"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NTcyOTg0", "url": "https://github.com/FAForever/downlords-faf-client/pull/1561#pullrequestreview-355572984", "createdAt": "2020-02-08T22:46:12Z", "commit": {"oid": "b1c8a3591ec95c7cbab5d8e3431f391c41d1a1d5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NjIxOTcx", "url": "https://github.com/FAForever/downlords-faf-client/pull/1561#pullrequestreview-355621971", "createdAt": "2020-02-09T17:45:15Z", "commit": {"oid": "b1c8a3591ec95c7cbab5d8e3431f391c41d1a1d5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3335, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}