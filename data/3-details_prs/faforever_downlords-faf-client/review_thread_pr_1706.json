{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NDc5NjM1", "number": 1706, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzozODoxMVrOD9ZehQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxODowNTo0OVrOD_yekA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NzA3MTQxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/news/NewsController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzozODoxMVrOGW3jqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzo1NzoyMVrOGW4YKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYzMjEwNQ==", "bodyText": "Never ever do hardcoded urls.\nWe either load it from the FafApiProperties class and declare it in the application.yml\nOr we add it to the remote preferences which would give us a bit more flexibility until things have settled.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1706#discussion_r426632105", "createdAt": "2020-05-18T13:38:11Z", "author": {"login": "Brutus5000"}, "path": "src/main/java/com/faforever/client/news/NewsController.java", "diffHunk": "@@ -108,38 +87,14 @@ public void onUnreadNewsEvent(UnreadNewsEvent unreadNewsEvent) {\n \n \n   private void loadNews() {\n-    newsService.fetchNews().thenAccept(newsItems -> {\n-      Platform.runLater(() -> {\n-        newsListView.getItems().setAll(newsItems);\n-        onLoadingStop();\n-        if (!newsItems.isEmpty()) {\n-          NewsItem mostRecentItem = newsItems.get(0);\n-          preferencesService.getPreferences().getNews().setLastReadNewsUrl(mostRecentItem.getLink());\n-          preferencesService.storeInBackground();\n-        }\n-        newsListView.getSelectionModel().selectFirst();\n-      });\n+    Platform.runLater(() -> {\n+      newsWebView.getEngine().load(\"https://www.faforever.com/news\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c33ecdc1b72c4409af87553d4967a81363811d82"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY0NTU0NQ==", "bodyText": "I can do it like the Unitdb, that uses the application.yml and Clientproperties.java\nIs that a good way?", "url": "https://github.com/FAForever/downlords-faf-client/pull/1706#discussion_r426645545", "createdAt": "2020-05-18T13:57:21Z", "author": {"login": "BlackYps"}, "path": "src/main/java/com/faforever/client/news/NewsController.java", "diffHunk": "@@ -108,38 +87,14 @@ public void onUnreadNewsEvent(UnreadNewsEvent unreadNewsEvent) {\n \n \n   private void loadNews() {\n-    newsService.fetchNews().thenAccept(newsItems -> {\n-      Platform.runLater(() -> {\n-        newsListView.getItems().setAll(newsItems);\n-        onLoadingStop();\n-        if (!newsItems.isEmpty()) {\n-          NewsItem mostRecentItem = newsItems.get(0);\n-          preferencesService.getPreferences().getNews().setLastReadNewsUrl(mostRecentItem.getLink());\n-          preferencesService.storeInBackground();\n-        }\n-        newsListView.getSelectionModel().selectFirst();\n-      });\n+    Platform.runLater(() -> {\n+      newsWebView.getEngine().load(\"https://www.faforever.com/news\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYzMjEwNQ=="}, "originalCommit": {"oid": "c33ecdc1b72c4409af87553d4967a81363811d82"}, "originalPosition": 73}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NzA4NjY1OnYy", "diffSide": "LEFT", "path": "src/main/java/com/faforever/client/news/NewsController.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzo0MToyOFrOGW3sqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzo0MToyOFrOGW3sqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYzNDQwOQ==", "bodyText": "I am missing changes to remove this service and related tests.", "url": "https://github.com/FAForever/downlords-faf-client/pull/1706#discussion_r426634409", "createdAt": "2020-05-18T13:41:28Z", "author": {"login": "Brutus5000"}, "path": "src/main/java/com/faforever/client/news/NewsController.java", "diffHunk": "@@ -31,25 +31,14 @@\n @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n public class NewsController extends AbstractViewController<Node> {\n \n-  private static final ClassPathResource NEWS_DETAIL_HTML_RESOURCE = new ClassPathResource(\"/theme/news_detail.html\");\n-  private final PreferencesService preferencesService;\n-  private final I18n i18n;\n-  private final NewsService newsService;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c33ecdc1b72c4409af87553d4967a81363811d82"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTg2MDk1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/news/NewsController.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMToxMDo1NlrOGZuPSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMToxMDo1NlrOGZuPSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyNTE2MQ==", "bodyText": "Check for related tests to remove", "url": "https://github.com/FAForever/downlords-faf-client/pull/1706#discussion_r429625161", "createdAt": "2020-05-24T11:10:56Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/news/NewsController.java", "diffHunk": "@@ -1,57 +1,37 @@\n package com.faforever.client.news;\n \n+import com.faforever.client.config.ClientProperties;\n+import com.faforever.client.config.ClientProperties.Website;\n import com.faforever.client.fx.AbstractViewController;\n import com.faforever.client.fx.WebViewConfigurer;\n-import com.faforever.client.i18n.I18n;\n import com.faforever.client.main.event.NavigateEvent;\n-import com.faforever.client.main.event.ShowLadderMapsEvent;\n-import com.faforever.client.preferences.PreferencesService;\n-import com.faforever.client.theme.UiService;\n import com.google.common.eventbus.EventBus;\n import com.google.common.eventbus.Subscribe;\n-import com.google.common.io.CharStreams;\n import javafx.application.Platform;\n import javafx.beans.value.ChangeListener;\n import javafx.scene.Node;\n-import javafx.scene.control.Button;\n import javafx.scene.control.Control;\n-import javafx.scene.control.ListView;\n import javafx.scene.layout.Pane;\n import javafx.scene.web.WebView;\n-import lombok.SneakyThrows;\n import org.springframework.beans.factory.config.ConfigurableBeanFactory;\n import org.springframework.context.annotation.Scope;\n-import org.springframework.core.io.ClassPathResource;\n import org.springframework.stereotype.Component;\n \n-import java.io.InputStreamReader;\n-import java.io.Reader;\n-\n @Component\n @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n public class NewsController extends AbstractViewController<Node> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11da7700d3f3d00399ac90e2672892f9006e3d62"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MjEzOTA0OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/news/NewsController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxODowNTo0OVrOGaqMnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxODowNjozN1rOGaqOJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYwNzUxNg==", "bodyText": "The loading should be removed the way it is now it is technical impossible to see the loading spinner", "url": "https://github.com/FAForever/downlords-faf-client/pull/1706#discussion_r430607516", "createdAt": "2020-05-26T18:05:49Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/news/NewsController.java", "diffHunk": "@@ -108,38 +78,15 @@ public void onUnreadNewsEvent(UnreadNewsEvent unreadNewsEvent) {\n \n \n   private void loadNews() {\n-    newsService.fetchNews().thenAccept(newsItems -> {\n-      Platform.runLater(() -> {\n-        newsListView.getItems().setAll(newsItems);\n-        onLoadingStop();\n-        if (!newsItems.isEmpty()) {\n-          NewsItem mostRecentItem = newsItems.get(0);\n-          preferencesService.getPreferences().getNews().setLastReadNewsUrl(mostRecentItem.getLink());\n-          preferencesService.storeInBackground();\n-        }\n-        newsListView.getSelectionModel().selectFirst();\n-      });\n+    Platform.runLater(() -> {\n+      Website website = clientProperties.getWebsite();\n+      newsWebView.getEngine().load(website.getNewsHubUrl());\n+      onLoadingStop();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3c635c87a74cfecc490ae8733e12901b6c8c79c"}, "originalPosition": 111}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYwNzkxMQ==", "bodyText": "Well or listen on the engine finishing the loading", "url": "https://github.com/FAForever/downlords-faf-client/pull/1706#discussion_r430607911", "createdAt": "2020-05-26T18:06:37Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/news/NewsController.java", "diffHunk": "@@ -108,38 +78,15 @@ public void onUnreadNewsEvent(UnreadNewsEvent unreadNewsEvent) {\n \n \n   private void loadNews() {\n-    newsService.fetchNews().thenAccept(newsItems -> {\n-      Platform.runLater(() -> {\n-        newsListView.getItems().setAll(newsItems);\n-        onLoadingStop();\n-        if (!newsItems.isEmpty()) {\n-          NewsItem mostRecentItem = newsItems.get(0);\n-          preferencesService.getPreferences().getNews().setLastReadNewsUrl(mostRecentItem.getLink());\n-          preferencesService.storeInBackground();\n-        }\n-        newsListView.getSelectionModel().selectFirst();\n-      });\n+    Platform.runLater(() -> {\n+      Website website = clientProperties.getWebsite();\n+      newsWebView.getEngine().load(website.getNewsHubUrl());\n+      onLoadingStop();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYwNzUxNg=="}, "originalCommit": {"oid": "d3c635c87a74cfecc490ae8733e12901b6c8c79c"}, "originalPosition": 111}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2189, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}