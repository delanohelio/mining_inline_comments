{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzNTc1Nzgz", "number": 2010, "title": "Feature/#1400 Information on games", "bodyText": "Closes #1400\n\n  Demonstration", "createdAt": "2020-11-01T07:41:46Z", "url": "https://github.com/FAForever/downlords-faf-client/pull/2010", "merged": true, "mergeCommit": {"oid": "90ab0b83765e800bc9e4813d72e18b5564ad4a3d"}, "closed": true, "closedAt": "2020-11-09T22:31:39Z", "author": {"login": "ivan-gryzunov"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZu2JVgBqjM5NjU0MDgyODk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABda1bFUgH2gAyNTEzNTc1NzgzOmZiYWM0MjYyZDQ1M2RjZDQ0NDdlODVkYjIyMGM3NDk1MTY1NWQyYTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f9354181bfb2bb25958ddca0958443466cdaf4bf", "author": {"user": {"login": "IvanPavilionG7", "name": "Ivan"}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/f9354181bfb2bb25958ddca0958443466cdaf4bf", "committedDate": "2020-11-06T03:39:19Z", "message": "Merge branch 'develop' into feature/#1400-information-on-games\n\n# Conflicts:\n#\tsrc/main/java/com/faforever/client/chat/ChatChannelUser.java\n#\tsrc/main/java/com/faforever/client/chat/ChatUserItemController.java\n#\tsrc/main/java/com/faforever/client/chat/ChatUserService.java\n#\tsrc/test/java/com/faforever/client/chat/ChatUserServiceTest.java"}, "afterCommit": {"oid": "b882b2ecc9151ea3dabbb26ad6901d0a8e7b3d9d", "author": {"user": {"login": "IvanPavilionG7", "name": "Ivan"}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/b882b2ecc9151ea3dabbb26ad6901d0a8e7b3d9d", "committedDate": "2020-11-06T03:59:53Z", "message": "#1400 implement displaying tooltip about game info"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MTI2NTE4", "url": "https://github.com/FAForever/downlords-faf-client/pull/2010#pullrequestreview-525126518", "createdAt": "2020-11-06T12:58:24Z", "commit": {"oid": "17602d7c0cdc1cd830c3d4330076d88b5d10659f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMjo1ODoyNFrOHutDrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMjo1ODoyNFrOHutDrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODczNDc2Nw==", "bodyText": "This would be better if the i18n key was an instance variable of the enum. See RatingMode.java for an example.", "url": "https://github.com/FAForever/downlords-faf-client/pull/2010#discussion_r518734767", "createdAt": "2020-11-06T12:58:24Z", "author": {"login": "Sheikah45"}, "path": "src/main/java/com/faforever/client/chat/ChatUserService.java", "diffHunk": "@@ -128,6 +130,15 @@ public void onChatUserGameChange(ChatUserGameChangeEvent event) {\n       chatChannelUser.setStatusImage(null);\n     }\n   }\n+\n+  private String getLocalizedStatusGame(PlayerStatus status) {\n+    return switch (status) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17602d7c0cdc1cd830c3d4330076d88b5d10659f"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1NTYyOTAx", "url": "https://github.com/FAForever/downlords-faf-client/pull/2010#pullrequestreview-525562901", "createdAt": "2020-11-07T00:01:52Z", "commit": {"oid": "509317d6ec57fb6a0e1ef560d2959c56eaf48eb6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wN1QwMDowMTo1MlrOHvBB4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wN1QwMDowMTo1MlrOHvBB4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTA2MTk4NQ==", "bodyText": "You can just use this no need for the switch statement\ngameStatusMenu.setText(i18n.get(status.getI18nKey()));", "url": "https://github.com/FAForever/downlords-faf-client/pull/2010#discussion_r519061985", "createdAt": "2020-11-07T00:01:52Z", "author": {"login": "Sheikah45"}, "path": "src/main/java/com/faforever/client/chat/UserFilterController.java", "diffHunk": "@@ -209,19 +209,13 @@ private void updateGameStatusMenuText(PlayerStatus status) {\n       return;\n     }\n \n-    switch (status) {\n-      case PLAYING:\n-        gameStatusMenu.setText(i18n.get(\"game.gameStatus.playing\"));\n-        break;\n-      case LOBBYING:\n-        gameStatusMenu.setText(i18n.get(\"game.gameStatus.lobby\"));\n-        break;\n-      case IDLE:\n-        gameStatusMenu.setText(i18n.get(\"game.gameStatus.none\"));\n-        break;\n-      default:\n-        throw new ProgrammingError(\"Uncovered player status: \" + status);\n-    }\n+    String key =  switch (status) {\n+      case PLAYING -> PLAYING.getI18nKey();\n+      case LOBBYING -> LOBBYING.getI18nKey();\n+      case IDLE -> IDLE.getI18nKey();\n+      default -> throw new ProgrammingError(\"Uncovered player status: \" + status);\n+    };\n+    gameStatusMenu.setText(i18n.get(key));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "509317d6ec57fb6a0e1ef560d2959c56eaf48eb6"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1NTc0NDgz", "url": "https://github.com/FAForever/downlords-faf-client/pull/2010#pullrequestreview-525574483", "createdAt": "2020-11-07T01:01:31Z", "commit": {"oid": "a490255f77696a11d79c884dc2a2b7f22f61005a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1NTc0Nzk0", "url": "https://github.com/FAForever/downlords-faf-client/pull/2010#pullrequestreview-525574794", "createdAt": "2020-11-07T01:03:26Z", "commit": {"oid": "a490255f77696a11d79c884dc2a2b7f22f61005a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wN1QwMTowMzoyNlrOHvBu7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wN1QwMTowMzoyNlrOHvBu7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTA3MzUxNw==", "bodyText": "If this isnt translated it shouldnt be here", "url": "https://github.com/FAForever/downlords-faf-client/pull/2010#discussion_r519073517", "createdAt": "2020-11-07T01:03:26Z", "author": {"login": "Sheikah45"}, "path": "src/main/resources/i18n/messages_nl.properties", "diffHunk": "@@ -197,6 +197,7 @@ game.full.action = Klik om spel te openen\n game.mods.twoAndMore = {0} en {1,number,\\#} meer\n game.gameStatus = Spel status\n game.gameStatus.playing = Spelen\n+game.gameStatus.hosting = Hosting", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a490255f77696a11d79c884dc2a2b7f22f61005a"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1NjU4NjY3", "url": "https://github.com/FAForever/downlords-faf-client/pull/2010#pullrequestreview-525658667", "createdAt": "2020-11-07T15:00:07Z", "commit": {"oid": "a490255f77696a11d79c884dc2a2b7f22f61005a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wN1QxNTowMDowOFrOHvIl4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wN1QxNTowNDoxOVrOHvInLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTE4NTg5MQ==", "bodyText": "no translations are ever made on github!!! poeditor.com", "url": "https://github.com/FAForever/downlords-faf-client/pull/2010#discussion_r519185891", "createdAt": "2020-11-07T15:00:08Z", "author": {"login": "1-alex98"}, "path": "src/main/resources/i18n/messages_ru.properties", "diffHunk": "@@ -205,6 +205,7 @@ game.full.action = \u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0438\u0433\u0440\u0443\n game.mods.twoAndMore = {0} \u0438 {1,number,\\#} \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435\n game.gameStatus = \u0421\u0442\u0430\u0442\u0443\u0441\n game.gameStatus.playing = \u0418\u0433\u0440\u0430\u0435\u0442\n+game.gameStatus.hosting = \u0425\u043e\u0441\u0442\u0438\u0442 \u0438\u0433\u0440\u0443", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a490255f77696a11d79c884dc2a2b7f22f61005a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTE4NTk5NA==", "bodyText": "java fx tooltips are dangerous in terms of memory leaks. Especially here where content is frequently changed", "url": "https://github.com/FAForever/downlords-faf-client/pull/2010#discussion_r519185994", "createdAt": "2020-11-07T15:01:28Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/chat/ChatUserItemController.java", "diffHunk": "@@ -70,14 +73,17 @@\n   private final WeakInvalidationListener weakFormatInvalidationListener;\n   private final WeakInvalidationListener weakColorPerUserInvalidationListener;\n \n+  public ImageView playerMapImage;\n   public ImageView playerStatusIndicator;\n+  protected Tooltip statusGameTooltip;\n+  protected Tooltip gameInfoTooltip;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a490255f77696a11d79c884dc2a2b7f22f61005a"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTE4NjA5OA==", "bodyText": "but you seem to take care of it", "url": "https://github.com/FAForever/downlords-faf-client/pull/2010#discussion_r519186098", "createdAt": "2020-11-07T15:02:40Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/chat/ChatUserItemController.java", "diffHunk": "@@ -70,14 +73,17 @@\n   private final WeakInvalidationListener weakFormatInvalidationListener;\n   private final WeakInvalidationListener weakColorPerUserInvalidationListener;\n \n+  public ImageView playerMapImage;\n   public ImageView playerStatusIndicator;\n+  protected Tooltip statusGameTooltip;\n+  protected Tooltip gameInfoTooltip;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTE4NTk5NA=="}, "originalCommit": {"oid": "a490255f77696a11d79c884dc2a2b7f22f61005a"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTE4NjIyMA==", "bodyText": "Chat user items are in a recycler view. Meaning tons of them are created and destroyed while scrolling. So all this is safer if it runs on mouse over only", "url": "https://github.com/FAForever/downlords-faf-client/pull/2010#discussion_r519186220", "createdAt": "2020-11-07T15:04:19Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/chat/ChatUserItemController.java", "diffHunk": "@@ -151,8 +151,72 @@ public void initialize() {\n     JavaFxUtil.bind(playerMapImage.visibleProperty(), Bindings.isNotNull(playerMapImage.imageProperty()));\n \n     updateFormat();\n+    addEventHandlersToPlayerMapImage();\n+  }\n+\n+  private void initializeTooltips() {\n+    userTooltip = new Tooltip();\n+    usernameLabel.setTooltip(userTooltip);\n+\n+    avatarTooltip = new Tooltip();\n+    avatarTooltip.setAnchorLocation(PopupWindow.AnchorLocation.CONTENT_TOP_LEFT);\n+    Tooltip.install(avatarImageView, avatarTooltip);\n+\n+    countryTooltip = new Tooltip();\n+    countryTooltip.showDelayProperty().set(Duration.millis(250));\n+    Tooltip.install(countryImageView, countryTooltip);\n+\n+    statusGameTooltip = new Tooltip();\n+    statusGameTooltip.setShowDuration(Duration.seconds(30));\n+    statusGameTooltip.setShowDelay(Duration.ZERO);\n+    statusGameTooltip.setHideDelay(Duration.ZERO);\n+    Tooltip.install(playerStatusIndicator, statusGameTooltip);\n   }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a490255f77696a11d79c884dc2a2b7f22f61005a"}, "originalPosition": 77}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09529a61b40287e2931c72e8961f9c27c80ff004", "author": {"user": {"login": "IvanPavilionG7", "name": "Ivan"}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/09529a61b40287e2931c72e8961f9c27c80ff004", "committedDate": "2020-11-07T22:52:20Z", "message": "#1400 implement displaying tooltip about game info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38e2184e700fada9da34fe2ac5749e0954f5cd77", "author": {"user": {"login": "IvanPavilionG7", "name": "Ivan"}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/38e2184e700fada9da34fe2ac5749e0954f5cd77", "committedDate": "2020-11-07T22:57:32Z", "message": "Merge branch 'develop' into feature/#1400-information-on-games"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a490255f77696a11d79c884dc2a2b7f22f61005a", "author": {"user": {"login": "IvanPavilionG7", "name": "Ivan"}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/a490255f77696a11d79c884dc2a2b7f22f61005a", "committedDate": "2020-11-07T00:30:09Z", "message": "simplify code to get localized status game text"}, "afterCommit": {"oid": "38e2184e700fada9da34fe2ac5749e0954f5cd77", "author": {"user": {"login": "IvanPavilionG7", "name": "Ivan"}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/38e2184e700fada9da34fe2ac5749e0954f5cd77", "committedDate": "2020-11-07T22:57:32Z", "message": "Merge branch 'develop' into feature/#1400-information-on-games"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1NjkwODQx", "url": "https://github.com/FAForever/downlords-faf-client/pull/2010#pullrequestreview-525690841", "createdAt": "2020-11-07T23:13:59Z", "commit": {"oid": "38e2184e700fada9da34fe2ac5749e0954f5cd77"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbac4262d453dcd4447e85db220c74951655d2a8", "author": {"user": {"login": "Sheikah45", "name": null}}, "url": "https://github.com/FAForever/downlords-faf-client/commit/fbac4262d453dcd4447e85db220c74951655d2a8", "committedDate": "2020-11-09T14:13:49Z", "message": "Merge branch 'develop' into feature/#1400-information-on-games"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3255, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}