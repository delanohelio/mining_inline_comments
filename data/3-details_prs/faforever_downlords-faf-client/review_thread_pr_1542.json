{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4NTE0ODg2", "number": 1542, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMVQyMzo0MTo1N1rODVXcFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyNDoxM1rODV0gmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjIzNzMwNzA5OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMVQyMzo0MTo1N1rOFZkFgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQxOToyNDoxMVrOFZzIKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM0OTk1Mw==", "bodyText": "thenRun", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r362349953", "createdAt": "2020-01-01T23:41:57Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -201,8 +200,21 @@ private void onLocalReplaysWatchEvent(WatchKey key) {\n       }\n     }\n \n-    localReplays.addAll(newReplays);\n-    publisher.publishEvent(new LocalReplaysChangedEvent(this, newReplays, deletedReplays));\n+    CompletableFuture[] replayFuturesArray = newReplaysFutures.toArray(new CompletableFuture[newReplaysFutures.size()]);\n+    CompletableFuture<List<Replay>> newReplaysFuture = CompletableFuture.allOf(replayFuturesArray)\n+        .thenApply(ignoredVoid ->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fdd64866bdb1c9f2637b02627f884f3b22c1dae"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQ2MjgyOA==", "bodyText": "Why?", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r362462828", "createdAt": "2020-01-02T12:51:45Z", "author": {"login": "andreasley"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -201,8 +200,21 @@ private void onLocalReplaysWatchEvent(WatchKey key) {\n       }\n     }\n \n-    localReplays.addAll(newReplays);\n-    publisher.publishEvent(new LocalReplaysChangedEvent(this, newReplays, deletedReplays));\n+    CompletableFuture[] replayFuturesArray = newReplaysFutures.toArray(new CompletableFuture[newReplaysFutures.size()]);\n+    CompletableFuture<List<Replay>> newReplaysFuture = CompletableFuture.allOf(replayFuturesArray)\n+        .thenApply(ignoredVoid ->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM0OTk1Mw=="}, "originalCommit": {"oid": "2fdd64866bdb1c9f2637b02627f884f3b22c1dae"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjU3OTUxMA==", "bodyText": "Sorry i am wrong... but there is a method that takes a lambda without the parameter ignoredVoid. Use this method instead not totally sure whats it called thenCombine maybe", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r362579510", "createdAt": "2020-01-02T18:34:53Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -201,8 +200,21 @@ private void onLocalReplaysWatchEvent(WatchKey key) {\n       }\n     }\n \n-    localReplays.addAll(newReplays);\n-    publisher.publishEvent(new LocalReplaysChangedEvent(this, newReplays, deletedReplays));\n+    CompletableFuture[] replayFuturesArray = newReplaysFutures.toArray(new CompletableFuture[newReplaysFutures.size()]);\n+    CompletableFuture<List<Replay>> newReplaysFuture = CompletableFuture.allOf(replayFuturesArray)\n+        .thenApply(ignoredVoid ->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM0OTk1Mw=="}, "originalCommit": {"oid": "2fdd64866bdb1c9f2637b02627f884f3b22c1dae"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjU5NjM5NQ==", "bodyText": "ok whatever ignore me", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r362596395", "createdAt": "2020-01-02T19:24:11Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -201,8 +200,21 @@ private void onLocalReplaysWatchEvent(WatchKey key) {\n       }\n     }\n \n-    localReplays.addAll(newReplays);\n-    publisher.publishEvent(new LocalReplaysChangedEvent(this, newReplays, deletedReplays));\n+    CompletableFuture[] replayFuturesArray = newReplaysFutures.toArray(new CompletableFuture[newReplaysFutures.size()]);\n+    CompletableFuture<List<Replay>> newReplaysFuture = CompletableFuture.allOf(replayFuturesArray)\n+        .thenApply(ignoredVoid ->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM0OTk1Mw=="}, "originalCommit": {"oid": "2fdd64866bdb1c9f2637b02627f884f3b22c1dae"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjIzNzMwNzIyOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMVQyMzo0Mjo0OVrOFZkFkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMjo0MDowMVrOFZ20SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM0OTk3MQ==", "bodyText": "CompletableFuture\n.allOf", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r362349971", "createdAt": "2020-01-01T23:42:49Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -201,8 +200,21 @@ private void onLocalReplaysWatchEvent(WatchKey key) {\n       }\n     }\n \n-    localReplays.addAll(newReplays);\n-    publisher.publishEvent(new LocalReplaysChangedEvent(this, newReplays, deletedReplays));\n+    CompletableFuture[] replayFuturesArray = newReplaysFutures.toArray(new CompletableFuture[newReplaysFutures.size()]);\n+    CompletableFuture<List<Replay>> newReplaysFuture = CompletableFuture.allOf(replayFuturesArray)\n+        .thenApply(ignoredVoid ->\n+            newReplaysFutures.stream()\n+                .map(future -> future.join())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fdd64866bdb1c9f2637b02627f884f3b22c1dae"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQ2MjgzNg==", "bodyText": "What?", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r362462836", "createdAt": "2020-01-02T12:51:50Z", "author": {"login": "andreasley"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -201,8 +200,21 @@ private void onLocalReplaysWatchEvent(WatchKey key) {\n       }\n     }\n \n-    localReplays.addAll(newReplays);\n-    publisher.publishEvent(new LocalReplaysChangedEvent(this, newReplays, deletedReplays));\n+    CompletableFuture[] replayFuturesArray = newReplaysFutures.toArray(new CompletableFuture[newReplaysFutures.size()]);\n+    CompletableFuture<List<Replay>> newReplaysFuture = CompletableFuture.allOf(replayFuturesArray)\n+        .thenApply(ignoredVoid ->\n+            newReplaysFutures.stream()\n+                .map(future -> future.join())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM0OTk3MQ=="}, "originalCommit": {"oid": "2fdd64866bdb1c9f2637b02627f884f3b22c1dae"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjU3ODkwOA==", "bodyText": "To join CompletedFutures use CompletableFuture.allOf()", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r362578908", "createdAt": "2020-01-02T18:33:05Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -201,8 +200,21 @@ private void onLocalReplaysWatchEvent(WatchKey key) {\n       }\n     }\n \n-    localReplays.addAll(newReplays);\n-    publisher.publishEvent(new LocalReplaysChangedEvent(this, newReplays, deletedReplays));\n+    CompletableFuture[] replayFuturesArray = newReplaysFutures.toArray(new CompletableFuture[newReplaysFutures.size()]);\n+    CompletableFuture<List<Replay>> newReplaysFuture = CompletableFuture.allOf(replayFuturesArray)\n+        .thenApply(ignoredVoid ->\n+            newReplaysFutures.stream()\n+                .map(future -> future.join())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM0OTk3MQ=="}, "originalCommit": {"oid": "2fdd64866bdb1c9f2637b02627f884f3b22c1dae"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjYzMzE2Nw==", "bodyText": "Which is exactly what I'm doing. Hence my confusion. :)", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r362633167", "createdAt": "2020-01-02T21:17:07Z", "author": {"login": "andreasley"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -201,8 +200,21 @@ private void onLocalReplaysWatchEvent(WatchKey key) {\n       }\n     }\n \n-    localReplays.addAll(newReplays);\n-    publisher.publishEvent(new LocalReplaysChangedEvent(this, newReplays, deletedReplays));\n+    CompletableFuture[] replayFuturesArray = newReplaysFutures.toArray(new CompletableFuture[newReplaysFutures.size()]);\n+    CompletableFuture<List<Replay>> newReplaysFuture = CompletableFuture.allOf(replayFuturesArray)\n+        .thenApply(ignoredVoid ->\n+            newReplaysFutures.stream()\n+                .map(future -> future.join())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM0OTk3MQ=="}, "originalCommit": {"oid": "2fdd64866bdb1c9f2637b02627f884f3b22c1dae"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjY1Njg0MA==", "bodyText": "Should read the code closer sorry lemme check again", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r362656840", "createdAt": "2020-01-02T22:40:01Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -201,8 +200,21 @@ private void onLocalReplaysWatchEvent(WatchKey key) {\n       }\n     }\n \n-    localReplays.addAll(newReplays);\n-    publisher.publishEvent(new LocalReplaysChangedEvent(this, newReplays, deletedReplays));\n+    CompletableFuture[] replayFuturesArray = newReplaysFutures.toArray(new CompletableFuture[newReplaysFutures.size()]);\n+    CompletableFuture<List<Replay>> newReplaysFuture = CompletableFuture.allOf(replayFuturesArray)\n+        .thenApply(ignoredVoid ->\n+            newReplaysFutures.stream()\n+                .map(future -> future.join())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM0OTk3MQ=="}, "originalCommit": {"oid": "2fdd64866bdb1c9f2637b02627f884f3b22c1dae"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MjA1NzkzOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNFQyMzozNjoxNVrOFaPdcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNFQyMzozNjoxNVrOFaPdcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA2MDU5NQ==", "bodyText": "use method reference\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            .map(future -> future.join())\n          \n          \n            \n                            CompletableFuture::join", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r363060595", "createdAt": "2020-01-04T23:36:15Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -201,8 +201,21 @@ private void onLocalReplaysWatchEvent(WatchKey key) {\n       }\n     }\n \n-    localReplays.addAll(newReplays);\n-    publisher.publishEvent(new LocalReplaysChangedEvent(this, newReplays, deletedReplays));\n+    CompletableFuture[] replayFuturesArray = newReplaysFutures.toArray(new CompletableFuture[newReplaysFutures.size()]);\n+    CompletableFuture<List<Replay>> newReplaysFuture = CompletableFuture.allOf(replayFuturesArray)\n+        .thenApply(ignoredVoid ->\n+            newReplaysFutures.stream()\n+                .map(future -> future.join())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9bd706aa5a0d7f2c207ece86b6f8ad02033570ed"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MjA2OTM0OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyMToyNlrOFaPjFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyMToyNlrOFaPjFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA2MjAzNg==", "bodyText": "Well we wanna avoid having null objects in list because it crashes UI", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r363062036", "createdAt": "2020-01-05T00:21:26Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -205,7 +202,8 @@ protected void onLocalReplaysWatchEvent(WatchKey key) {\n     CompletableFuture<List<Replay>> newReplaysFuture = CompletableFuture.allOf(replayFuturesArray)\n         .thenApply(ignoredVoid ->\n             newReplaysFutures.stream()\n-                .map(future -> future.join())\n+                .map(CompletableFuture::join)\n+                .filter(Objects::nonNull)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "108e07a5adb577284f37bec08216336270dce26b"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MjA2OTQ0OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyMTo0MlrOFaPjHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyMTo0MlrOFaPjHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA2MjA0Ng==", "bodyText": "Just a quick way of writting it", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r363062046", "createdAt": "2020-01-05T00:21:42Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -275,21 +273,21 @@ static String guessModByFileName(String fileName) {\n       List<CompletableFuture<Replay>> replayFutures = StreamSupport.stream(directoryStream.spliterator(), false)\n           .sorted(Comparator.comparing(path -> noCatch(() -> Files.getLastModifiedTime((Path) path))).reversed())\n           .limit(MAX_REPLAYS)\n-          .map( replayFile -> tryLoadingLocalReplay(replayFile))\n+          .map(this::tryLoadingLocalReplay)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "108e07a5adb577284f37bec08216336270dce26b"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MjA2OTQ2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyMTo1MVrOFaPjIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyMTo1MVrOFaPjIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA2MjA0OQ==", "bodyText": "again see top", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r363062049", "createdAt": "2020-01-05T00:21:51Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -275,21 +273,21 @@ static String guessModByFileName(String fileName) {\n       List<CompletableFuture<Replay>> replayFutures = StreamSupport.stream(directoryStream.spliterator(), false)\n           .sorted(Comparator.comparing(path -> noCatch(() -> Files.getLastModifiedTime((Path) path))).reversed())\n           .limit(MAX_REPLAYS)\n-          .map( replayFile -> tryLoadingLocalReplay(replayFile))\n+          .map(this::tryLoadingLocalReplay)\n           .filter(e -> !e.isCompletedExceptionally())\n           .collect(Collectors.toList());\n \n       CompletableFuture[] replayFuturesArray = replayFutures.toArray(new CompletableFuture[replayFutures.size()]);\n       return CompletableFuture.allOf(replayFuturesArray)\n           .thenApply(ignoredVoid ->\n               replayFutures.stream()\n-                  .map(future -> future.join())\n+                  .map(CompletableFuture::join)\n+                  .filter(Objects::nonNull)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "108e07a5adb577284f37bec08216336270dce26b"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MjA2OTY4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyMzowMFrOFaPjQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyMzowMFrOFaPjQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA2MjA4Mw==", "bodyText": "We certainly dont wanna throw here if we do then the whole loacl replay vault breaks, also there are legimit cases where a replay has no map. One is coop the maps are part of the game mod and hence are not found locally nor on the server", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r363062083", "createdAt": "2020-01-05T00:23:00Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -300,14 +298,14 @@ static String guessModByFileName(String fileName) {\n       return CompletableFuture.allOf(featuredModFuture, mapBeanFuture).thenApply(ignoredVoid  -> {\n         Optional<MapBean> mapBean = mapBeanFuture.join();\n         if (!mapBean.isPresent()) {\n-          throw new CompletionException(new FileNotFoundException());\n+          logger.warn(\"Could not find map for replay file '{}'\", replayFile);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "108e07a5adb577284f37bec08216336270dce26b"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MjA2OTgwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyMzoxNFrOFaPjUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyMzoxNFrOFaPjUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA2MjA5Nw==", "bodyText": "Let's just say the map is null", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r363062097", "createdAt": "2020-01-05T00:23:14Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -300,14 +298,14 @@ static String guessModByFileName(String fileName) {\n       return CompletableFuture.allOf(featuredModFuture, mapBeanFuture).thenApply(ignoredVoid  -> {\n         Optional<MapBean> mapBean = mapBeanFuture.join();\n         if (!mapBean.isPresent()) {\n-          throw new CompletionException(new FileNotFoundException());\n+          logger.warn(\"Could not find map for replay file '{}'\", replayFile);\n         }\n-        return new Replay(replayInfo, replayFile, featuredModFuture.join(), mapBean.get());\n+        return new Replay(replayInfo, replayFile, featuredModFuture.join(), mapBean.orElse(null));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "108e07a5adb577284f37bec08216336270dce26b"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MjA2OTk3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyMzo1MlrOFaPjZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyMzo1MlrOFaPjZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA2MjExOA==", "bodyText": "Don't throw others wise replay vault stays empty, return null which is gonna be filtered out", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r363062118", "createdAt": "2020-01-05T00:23:52Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/replay/ReplayService.java", "diffHunk": "@@ -300,14 +298,14 @@ static String guessModByFileName(String fileName) {\n       return CompletableFuture.allOf(featuredModFuture, mapBeanFuture).thenApply(ignoredVoid  -> {\n         Optional<MapBean> mapBean = mapBeanFuture.join();\n         if (!mapBean.isPresent()) {\n-          throw new CompletionException(new FileNotFoundException());\n+          logger.warn(\"Could not find map for replay file '{}'\", replayFile);\n         }\n-        return new Replay(replayInfo, replayFile, featuredModFuture.join(), mapBean.get());\n+        return new Replay(replayInfo, replayFile, featuredModFuture.join(), mapBean.orElse(null));\n       });\n     } catch (Exception e) {\n       logger.warn(\"Could not read replay file '{}'\", replayFile, e);\n       moveCorruptedReplayFile(replayFile);\n-      return CompletableFuture.failedFuture(e);\n+      return CompletableFuture.completedFuture(null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "108e07a5adb577284f37bec08216336270dce26b"}, "originalPosition": 73}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MjA3MDAyOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/faforever/client/vault/replay/ReplayVaultController.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyNDoxM1rOFaPjaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMDoyNDoxM1rOFaPjaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA2MjEyMw==", "bodyText": "Let's tell te user we don't have this map", "url": "https://github.com/FAForever/downlords-faf-client/pull/1542#discussion_r363062123", "createdAt": "2020-01-05T00:24:13Z", "author": {"login": "1-alex98"}, "path": "src/main/java/com/faforever/client/vault/replay/ReplayVaultController.java", "diffHunk": "@@ -183,9 +177,12 @@ public OffsetDateTime fromString(String string) {\n       protected void updateItem(MapBean map, boolean empty) {\n         super.updateItem(map, empty);\n \n-        if (empty || map == null) {\n+        if (empty) {\n           setText(null);\n           setGraphic(null);\n+        } else if (map == null) {\n+          setGraphic(null);\n+          setText(i18n.get(\"map.unknown\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "108e07a5adb577284f37bec08216336270dce26b"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2137, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}