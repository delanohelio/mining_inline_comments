{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxMDI0NDQz", "number": 1013, "title": "Common Service: Fixed issue #1004", "bodyText": "Issue #1004 Added @Index in Entity classes", "createdAt": "2020-09-22T15:30:36Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1013", "merged": true, "mergeCommit": {"oid": "703883fb2ddbe9e1e711c744dc3a784af617de18"}, "closed": true, "closedAt": "2020-09-25T17:09:00Z", "author": {"login": "Kantharajut-btc"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLZlwSAH2gAyNDkxMDI0NDQzOjMzMGVhMTdmNDdlMjE3MTE4MWE1NWQ2OGQwMWY0ZDg2YWU1ZjhmNTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMY0GGgH2gAyNDkxMDI0NDQzOjk2OTI3YWI3ZmRhNjExYTgxNzdkNzVhMjM3NjdlMDNhNmM5MDljYjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "330ea17f47e2171181a55d68d01f4d86ae5f8f55", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/330ea17f47e2171181a55d68d01f4d86ae5f8f55", "committedDate": "2020-09-22T15:19:16Z", "message": "Fixed issue #1004\n\nFixed issue #1004"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5e1905e3eb423ac452781033d52edf5c077d6f2", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c5e1905e3eb423ac452781033d52edf5c077d6f2", "committedDate": "2020-09-22T15:47:56Z", "message": "Fixed build issue\n\nFixed build issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f6ec87c2e0bf597463e25abc69c6fb32e52c70f", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1f6ec87c2e0bf597463e25abc69c6fb32e52c70f", "committedDate": "2020-09-23T14:15:44Z", "message": "removed index for foreign keys\n\nremoved index for foreign keys as it will be generated by default"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ee795ff7f6204573222a83297be804b3629e28d", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/3ee795ff7f6204573222a83297be804b3629e28d", "committedDate": "2020-09-23T14:16:58Z", "message": "Merge branch 'develop' into common-service-issue-1004"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MDI0ODE0", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1013#pullrequestreview-495024814", "createdAt": "2020-09-23T20:31:12Z", "commit": {"oid": "3ee795ff7f6204573222a83297be804b3629e28d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QyMDozMToxMlrOHW_1sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QyMDozNjozNFrOHXABEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg3NjY1Nw==", "bodyText": "unique should be false by default, no need to add here.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1013#discussion_r493876657", "createdAt": "2020-09-23T20:31:12Z", "author": {"login": "zohrehj"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/model/AuthInfoEntity.java", "diffHunk": "@@ -31,7 +32,16 @@\n @Setter\n @Getter\n @Entity\n-@Table(name = \"auth_info\")\n+@Table(\n+    name = \"auth_info\",\n+    indexes = {\n+      @Index(\n+          name = \"auth_info_remote_notification_flag_idx\",\n+          columnList = \"remote_notification_flag\",\n+          unique = false),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ee795ff7f6204573222a83297be804b3629e28d"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg3NzE4OA==", "bodyText": "custom_app_id has unique=true annotation, it should have an automatically generated unique index.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1013#discussion_r493877188", "createdAt": "2020-09-23T20:32:12Z", "author": {"login": "zohrehj"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/model/AppEntity.java", "diffHunk": "@@ -36,7 +37,9 @@\n @Setter\n @Getter\n @Entity\n-@Table(name = \"app_info\")\n+@Table(\n+    name = \"app_info\",\n+    indexes = {@Index(name = \"app_info_custom_app_id_idx\", columnList = \"custom_app_id\")})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ee795ff7f6204573222a83297be804b3629e28d"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg3ODcyOQ==", "bodyText": "user_id should have an automatic index, if joincolumn is used.\nfor other fields, please provide the query to verify what is the best index we can create; i.e. would it be better to have a multicolumn one, or individual columns.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1013#discussion_r493878729", "createdAt": "2020-09-23T20:34:58Z", "author": {"login": "zohrehj"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/model/UserDetailsEntity.java", "diffHunk": "@@ -52,6 +53,11 @@\n       @UniqueConstraint(\n           columnNames = {\"user_id\", \"app_info_id\"},\n           name = \"user_details_user_id_app_info_id_uidx\")\n+    },\n+    indexes = {\n+      @Index(name = \"user_details_email_idx\", columnList = \"email\"),\n+      @Index(name = \"user_details_user_id_idx\", columnList = \"user_id\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ee795ff7f6204573222a83297be804b3629e28d"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg3ODkxNw==", "bodyText": "why do we need an index for last_name?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1013#discussion_r493878917", "createdAt": "2020-09-23T20:35:16Z", "author": {"login": "zohrehj"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/model/UserDetailsEntity.java", "diffHunk": "@@ -52,6 +53,11 @@\n       @UniqueConstraint(\n           columnNames = {\"user_id\", \"app_info_id\"},\n           name = \"user_details_user_id_app_info_id_uidx\")\n+    },\n+    indexes = {\n+      @Index(name = \"user_details_email_idx\", columnList = \"email\"),\n+      @Index(name = \"user_details_user_id_idx\", columnList = \"user_id\"),\n+      @Index(name = \"user_details_last_name_idx\", columnList = \"last_name\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ee795ff7f6204573222a83297be804b3629e28d"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg3OTU2OQ==", "bodyText": "same here, columns with unique or joinColumn notation, most likely don't need an index.\nFor other values, document the query that needs the index so that we can confirm what index is best suitable for query.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1013#discussion_r493879569", "createdAt": "2020-09-23T20:36:34Z", "author": {"login": "zohrehj"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/model/UserRegAdminEntity.java", "diffHunk": "@@ -38,7 +39,13 @@\n @Getter\n @Setter\n @Entity\n-@Table(name = \"ur_admin_user\")\n+@Table(\n+    name = \"ur_admin_user\",\n+    indexes = {\n+      @Index(name = \"ur_admin_user_email_idx\", columnList = \"email\"),\n+      @Index(name = \"ur_admin_user_ur_admin_auth_id_idx\", columnList = \"ur_admin_auth_id\"),\n+      @Index(name = \"ur_admin_user_security_code_idx\", columnList = \"security_code\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ee795ff7f6204573222a83297be804b3629e28d"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44c01eb6a5e57f2600dafdfc446198f728d99aea", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/44c01eb6a5e57f2600dafdfc446198f728d99aea", "committedDate": "2020-09-25T10:48:11Z", "message": "Fixed PR comments\n\nFixed PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "144737bdf32b403cfdddc3372ecd9b6d52627c7c", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/144737bdf32b403cfdddc3372ecd9b6d52627c7c", "committedDate": "2020-09-25T11:00:53Z", "message": "Fixed PR comment\n\nFixed PR comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad52c8dbc19e8be8e9ad517464f210eaad2fa52b", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ad52c8dbc19e8be8e9ad517464f210eaad2fa52b", "committedDate": "2020-09-25T11:06:59Z", "message": "Merge branch 'develop' into common-service-issue-1004"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b24f1240a81fcdaa57cc055d85eaca8ac33875bf", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b24f1240a81fcdaa57cc055d85eaca8ac33875bf", "committedDate": "2020-09-25T11:43:42Z", "message": "added new sql script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51fc0d50b691cdda1ec6f2ab031bd64130329330", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/51fc0d50b691cdda1ec6f2ab031bd64130329330", "committedDate": "2020-09-25T11:43:49Z", "message": "Merge branch 'common-service-issue-1004' of https://github.com/GoogleCloudPlatform/fda-mystudies into common-service-issue-1004"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82e0ab846f9902b45643341ffe5be8ac116b3ce1", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/82e0ab846f9902b45643341ffe5be8ac116b3ce1", "committedDate": "2020-09-25T14:53:37Z", "message": "Merge branch 'develop' into common-service-issue-1004"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b32f6607e22d645496f262b6685ea01f3d69835", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5b32f6607e22d645496f262b6685ea01f3d69835", "committedDate": "2020-09-25T14:54:51Z", "message": "Merge branch 'develop' into common-service-issue-1004"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NDk0ODEx", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1013#pullrequestreview-496494811", "createdAt": "2020-09-25T14:50:50Z", "commit": {"oid": "51fc0d50b691cdda1ec6f2ab031bd64130329330"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNDo1MDo1MFrOHYG8lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNDo1Mzo1OFrOHYHETA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA0MTY4Ng==", "bodyText": "https://stackoverflow.com/questions/10524651/is-there-any-performance-gain-in-indexing-a-boolean-field\nNo need to index a column that only has a few values, even with index in worst case you would need to iterate through 1/3 of the table, and index has storage and performance costs as well.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1013#discussion_r495041686", "createdAt": "2020-09-25T14:50:50Z", "author": {"login": "zohrehj"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/model/AuthInfoEntity.java", "diffHunk": "@@ -31,7 +32,15 @@\n @Setter\n @Getter\n @Entity\n-@Table(name = \"auth_info\")\n+@Table(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51fc0d50b691cdda1ec6f2ab031bd64130329330"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA0MzY2MA==", "bodyText": "what is the query that uses this index?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1013#discussion_r495043660", "createdAt": "2020-09-25T14:53:58Z", "author": {"login": "zohrehj"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/model/ParticipantRegistrySiteEntity.java", "diffHunk": "@@ -41,10 +42,15 @@\n @Entity\n @Table(\n     name = \"participant_registry_site\",\n+    indexes = {\n+      @Index(\n+          name = \"participant_registry_site_onboarding_status_idx\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82e0ab846f9902b45643341ffe5be8ac116b3ce1"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7ed68be01bf78bcf18ba186c3f1c1bf063b0bea", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a7ed68be01bf78bcf18ba186c3f1c1bf063b0bea", "committedDate": "2020-09-25T15:38:16Z", "message": "removed index for boolean field\n\nremoved index for boolean field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "888eb89d58746014c5321c09054b861c299bdf8a", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/888eb89d58746014c5321c09054b861c299bdf8a", "committedDate": "2020-09-25T15:38:32Z", "message": "Merge branch 'common-service-issue-1004' of https://github.com/GoogleCloudPlatform/fda-mystudies into common-service-issue-1004"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ceeb3b8da6deaeb1aedce4b8edc5cbbb2936eaa8", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ceeb3b8da6deaeb1aedce4b8edc5cbbb2936eaa8", "committedDate": "2020-09-25T15:52:42Z", "message": "Merge branch 'develop' into common-service-issue-1004"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NTUwNTk4", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1013#pullrequestreview-496550598", "createdAt": "2020-09-25T15:58:34Z", "commit": {"oid": "82e0ab846f9902b45643341ffe5be8ac116b3ce1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNTo1ODozNVrOHYJh9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNTo1ODozNVrOHYJh9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA4NDAyMw==", "bodyText": "both these queries are filtering on site_id, and then status; since site_id does not have an index, let's make this into a composite index for both columns instead.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1013#discussion_r495084023", "createdAt": "2020-09-25T15:58:35Z", "author": {"login": "zohrehj"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/model/ParticipantRegistrySiteEntity.java", "diffHunk": "@@ -41,10 +42,15 @@\n @Entity\n @Table(\n     name = \"participant_registry_site\",\n+    indexes = {\n+      @Index(\n+          name = \"participant_registry_site_onboarding_status_idx\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA0MzY2MA=="}, "originalCommit": {"oid": "82e0ab846f9902b45643341ffe5be8ac116b3ce1"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cb2f04f1edd14aa22ed68d07a2c64d7e98ca183", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8cb2f04f1edd14aa22ed68d07a2c64d7e98ca183", "committedDate": "2020-09-25T16:43:40Z", "message": "Fixed PR comment\n\nFixed PR comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4896a8fd2ab7ba6dbf842fc0c9257d0865032ac1", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4896a8fd2ab7ba6dbf842fc0c9257d0865032ac1", "committedDate": "2020-09-25T16:43:50Z", "message": "Merge branch 'common-service-issue-1004' of https://github.com/GoogleCloudPlatform/fda-mystudies into common-service-issue-1004"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21c2da7078c84231b5e815787eed254a200a38ee", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/21c2da7078c84231b5e815787eed254a200a38ee", "committedDate": "2020-09-25T16:44:23Z", "message": "Merge branch 'develop' into common-service-issue-1004"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NTkyODE4", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1013#pullrequestreview-496592818", "createdAt": "2020-09-25T16:58:26Z", "commit": {"oid": "21c2da7078c84231b5e815787eed254a200a38ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96927ab7fda611a8177d75a23767e03a6c909cb6", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/96927ab7fda611a8177d75a23767e03a6c909cb6", "committedDate": "2020-09-25T16:58:57Z", "message": "Merge branch 'develop' into common-service-issue-1004"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 283, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}