{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyNDk3MzE3", "number": 2073, "title": "Participant Manager Datastore: Fixed Performance issue for  GET /{studyId}/participants endpoint", "bodyText": "Fixed Performance issue for  GET /{studyId}/participants endpoint", "createdAt": "2020-11-17T15:28:03Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2073", "merged": true, "mergeCommit": {"oid": "341328290ea33418732d6b7c3cd1bb5f9da9c52a"}, "closed": true, "closedAt": "2020-11-24T04:30:52Z", "author": {"login": "navya-BTC"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddbQLmgH2gAyNTIyNDk3MzE3OmRhZmQyODFkY2MyOTAzZjc4NmU3YjIwMzJiMTU3Mjg0ODRiMWVlNWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfiCQ8AH2gAyNTIyNDk3MzE3OjUxZjRkNmRmMjc1ODM5ZmMyNTU3YTIwMGFlNWRkODNjOTM1M2M5Zjc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dafd281dcc2903f786e7b2032b15728484b1ee5d", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/dafd281dcc2903f786e7b2032b15728484b1ee5d", "committedDate": "2020-11-17T15:26:09Z", "message": "Fixed Performance issue for /{studyId}/participants endpoint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzMTAwNjAw", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2073#pullrequestreview-533100600", "createdAt": "2020-11-18T04:44:25Z", "commit": {"oid": "dafd281dcc2903f786e7b2032b15728484b1ee5d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwNDo0NDoyNlrOH1chew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwNDo0NDozNlrOH1ciOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTgwMzg5OQ==", "bodyText": "getStudyAppDetails()", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2073#discussion_r525803899", "createdAt": "2020-11-18T04:44:26Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/StudyRepository.java", "diffHunk": "@@ -83,4 +85,39 @@\n               + \"GROUP BY study.id \",\n       nativeQuery = true)\n   public List<StudyCount> findEnrolledCountByStudyId();\n+\n+  @Query(\n+      value =\n+          \"SELECT DISTINCT si.id AS studyId, si.name AS studyName, si.custom_id AS customStudyId,si.type AS studyType, \"\n+              + \"ai.id AS appId,ai.app_name AS appName,ai.custom_app_id AS customAppId, \"\n+              + \"st.target_enrollment AS targetEnrollment, stp.edit AS edit \"\n+              + \"FROM app_info ai, study_info si, sites st,sites_permissions stp \"\n+              + \"WHERE ai.id=si.app_info_id AND st.study_id=si.id AND si.id=:studyId AND stp.study_id=si.id AND stp.ur_admin_user_id=:userId \",\n+      nativeQuery = true)\n+  public Optional<StudyAppDetails> getStudyParticipant(String studyId, String userId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dafd281dcc2903f786e7b2032b15728484b1ee5d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTgwNDA5MA==", "bodyText": "same here too", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2073#discussion_r525804090", "createdAt": "2020-11-18T04:44:36Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/StudyRepository.java", "diffHunk": "@@ -83,4 +85,39 @@\n               + \"GROUP BY study.id \",\n       nativeQuery = true)\n   public List<StudyCount> findEnrolledCountByStudyId();\n+\n+  @Query(\n+      value =\n+          \"SELECT DISTINCT si.id AS studyId, si.name AS studyName, si.custom_id AS customStudyId,si.type AS studyType, \"\n+              + \"ai.id AS appId,ai.app_name AS appName,ai.custom_app_id AS customAppId, \"\n+              + \"st.target_enrollment AS targetEnrollment, stp.edit AS edit \"\n+              + \"FROM app_info ai, study_info si, sites st,sites_permissions stp \"\n+              + \"WHERE ai.id=si.app_info_id AND st.study_id=si.id AND si.id=:studyId AND stp.study_id=si.id AND stp.ur_admin_user_id=:userId \",\n+      nativeQuery = true)\n+  public Optional<StudyAppDetails> getStudyParticipant(String studyId, String userId);\n+\n+  @Query(\n+      value =\n+          \"SELECT DISTINCT si.id AS studyId, si.name AS studyName, si.custom_id AS customStudyId,si.type AS studyType, \"\n+              + \"ai.id AS appId,ai.app_name AS appName,ai.custom_app_id AS customAppId, \"\n+              + \"st.target_enrollment AS targetEnrollment \"\n+              + \"FROM app_info ai, study_info si, sites st \"\n+              + \"WHERE ai.id=si.app_info_id AND st.study_id=si.id AND si.id=:studyId \",\n+      nativeQuery = true)\n+  public Optional<StudyAppDetails> getStudyParticipantForSuperAdmin(String studyId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dafd281dcc2903f786e7b2032b15728484b1ee5d"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32b61209aa64aa014cd700c9a1e503342538106a", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/32b61209aa64aa014cd700c9a1e503342538106a", "committedDate": "2020-11-18T05:06:57Z", "message": "Fixed review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzOTYwNzkx", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2073#pullrequestreview-533960791", "createdAt": "2020-11-18T23:20:46Z", "commit": {"oid": "32b61209aa64aa014cd700c9a1e503342538106a"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8b73fa82fba5c58ff7856d2066b5aa452f21d7d", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b8b73fa82fba5c58ff7856d2066b5aa452f21d7d", "committedDate": "2020-11-20T06:42:04Z", "message": "Merge branch 'develop' into studyParticipant-performance-dev"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1Njg2MDMz", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2073#pullrequestreview-535686033", "createdAt": "2020-11-20T18:38:46Z", "commit": {"oid": "b8b73fa82fba5c58ff7856d2066b5aa452f21d7d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80e8c8720bc313c59bd0857d2c9a3d689ec71c34", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/80e8c8720bc313c59bd0857d2c9a3d689ec71c34", "committedDate": "2020-11-23T04:34:27Z", "message": "Merge branch 'develop' into studyParticipant-performance-dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f3b6b68c1e8455d7b7f2d7ad025ffe89af53e29", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9f3b6b68c1e8455d7b7f2d7ad025ffe89af53e29", "committedDate": "2020-11-23T04:35:21Z", "message": "Merge branch 'develop' into studyParticipant-performance-dev"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2ODQwNjc3", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2073#pullrequestreview-536840677", "createdAt": "2020-11-23T20:59:36Z", "commit": {"oid": "9f3b6b68c1e8455d7b7f2d7ad025ffe89af53e29"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51f4d6df275839fc2557a200ae5dd83c9353c9f7", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/51f4d6df275839fc2557a200ae5dd83c9353c9f7", "committedDate": "2020-11-24T04:28:08Z", "message": "Merge branch 'develop' into studyParticipant-performance-dev"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1214, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}