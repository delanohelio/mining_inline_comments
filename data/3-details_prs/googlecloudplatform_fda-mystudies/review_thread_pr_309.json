{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyMzAxMDIz", "number": 309, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNDoxODozMlrOD5AqCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNDozMjowMFrOD5BCbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMTA2MTg0OnYy", "diffSide": "RIGHT", "path": "Terraform/copy_mobile_app_info_to_sql.sh", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNDoxODozMlrOGQCf-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxODoyMTo1MFrOGRfvjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ3MTM1Mg==", "bodyText": "could we get these values from env-variables? or generate them using a prefix that gets passed to the script?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/309#discussion_r419471352", "createdAt": "2020-05-04T14:18:32Z", "author": {"login": "zohrehj"}, "path": "Terraform/copy_mobile_app_info_to_sql.sh", "diffHunk": "@@ -0,0 +1,30 @@\n+#!/bin/bash\n+# Script to copy AppId and OrgId from gcloud secret to CloudSQL.\n+set -e\n+\n+SECRET_PROJECT=heroes-hat-dev-devops\n+DATA_PROJECT=heroes-hat-dev-data\n+SQL_IMPORT_BUCKET=heroes-hat-dev-data-sql-import\n+TMPFILE=$(mktemp)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd4aa23f91519f41e2b00a7b3036f06b1cb27b57"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDUzMTM3OQ==", "bodyText": "It would be hard. Added a TODO for now.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/309#discussion_r420531379", "createdAt": "2020-05-06T03:53:21Z", "author": {"login": "kuoyuchi"}, "path": "Terraform/copy_mobile_app_info_to_sql.sh", "diffHunk": "@@ -0,0 +1,30 @@\n+#!/bin/bash\n+# Script to copy AppId and OrgId from gcloud secret to CloudSQL.\n+set -e\n+\n+SECRET_PROJECT=heroes-hat-dev-devops\n+DATA_PROJECT=heroes-hat-dev-data\n+SQL_IMPORT_BUCKET=heroes-hat-dev-data-sql-import\n+TMPFILE=$(mktemp)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ3MTM1Mg=="}, "originalCommit": {"oid": "fd4aa23f91519f41e2b00a7b3036f06b1cb27b57"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk5OTA1Mw==", "bodyText": "sgtm", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/309#discussion_r420999053", "createdAt": "2020-05-06T18:21:50Z", "author": {"login": "zohrehj"}, "path": "Terraform/copy_mobile_app_info_to_sql.sh", "diffHunk": "@@ -0,0 +1,30 @@\n+#!/bin/bash\n+# Script to copy AppId and OrgId from gcloud secret to CloudSQL.\n+set -e\n+\n+SECRET_PROJECT=heroes-hat-dev-devops\n+DATA_PROJECT=heroes-hat-dev-data\n+SQL_IMPORT_BUCKET=heroes-hat-dev-data-sql-import\n+TMPFILE=$(mktemp)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ3MTM1Mg=="}, "originalCommit": {"oid": "fd4aa23f91519f41e2b00a7b3036f06b1cb27b57"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMTExOTQzOnYy", "diffSide": "RIGHT", "path": "Terraform/copy_mobile_app_info_to_sql.sh", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNDozMDo1NVrOGQDEQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwMzo1MjozM1rOGRDMHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ4MDY0MA==", "bodyText": "should DummyOrgName be set in a variable on top so that it can be easily changed later?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/309#discussion_r419480640", "createdAt": "2020-05-04T14:30:55Z", "author": {"login": "zohrehj"}, "path": "Terraform/copy_mobile_app_info_to_sql.sh", "diffHunk": "@@ -0,0 +1,30 @@\n+#!/bin/bash\n+# Script to copy AppId and OrgId from gcloud secret to CloudSQL.\n+set -e\n+\n+SECRET_PROJECT=heroes-hat-dev-devops\n+DATA_PROJECT=heroes-hat-dev-data\n+SQL_IMPORT_BUCKET=heroes-hat-dev-data-sql-import\n+TMPFILE=$(mktemp)\n+\n+# Write user registration server db name to TMPFILE.\n+echo \"USE \\`mystudies_userregistration\\`;\" >> ${TMPFILE}\n+\n+# Read AppId and OrgId from secrets..\n+APP_ID=`gcloud --project=${SECRET_PROJECT} secrets versions access latest --secret=mobile-app-appid`\n+ORG_ID=`gcloud --project=${SECRET_PROJECT} secrets versions access latest --secret=mobile-app-orgid`\n+\n+# Write corresponding SQL commands to TMPFILE.\n+echo \"INSERT INTO org_info (id, name, org_id) VALUES(1, \\\"DummyOrgName\\\", \\\"${ORG_ID}\\\");\" >> ${TMPFILE}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd4aa23f91519f41e2b00a7b3036f06b1cb27b57"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ4MDg2MQ==", "bodyText": "or taken from secrets as well?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/309#discussion_r419480861", "createdAt": "2020-05-04T14:31:13Z", "author": {"login": "zohrehj"}, "path": "Terraform/copy_mobile_app_info_to_sql.sh", "diffHunk": "@@ -0,0 +1,30 @@\n+#!/bin/bash\n+# Script to copy AppId and OrgId from gcloud secret to CloudSQL.\n+set -e\n+\n+SECRET_PROJECT=heroes-hat-dev-devops\n+DATA_PROJECT=heroes-hat-dev-data\n+SQL_IMPORT_BUCKET=heroes-hat-dev-data-sql-import\n+TMPFILE=$(mktemp)\n+\n+# Write user registration server db name to TMPFILE.\n+echo \"USE \\`mystudies_userregistration\\`;\" >> ${TMPFILE}\n+\n+# Read AppId and OrgId from secrets..\n+APP_ID=`gcloud --project=${SECRET_PROJECT} secrets versions access latest --secret=mobile-app-appid`\n+ORG_ID=`gcloud --project=${SECRET_PROJECT} secrets versions access latest --secret=mobile-app-orgid`\n+\n+# Write corresponding SQL commands to TMPFILE.\n+echo \"INSERT INTO org_info (id, name, org_id) VALUES(1, \\\"DummyOrgName\\\", \\\"${ORG_ID}\\\");\" >> ${TMPFILE}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ4MDY0MA=="}, "originalCommit": {"oid": "fd4aa23f91519f41e2b00a7b3036f06b1cb27b57"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDUzMTIzMA==", "bodyText": "Done. Changed to a var in this shell script.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/309#discussion_r420531230", "createdAt": "2020-05-06T03:52:33Z", "author": {"login": "kuoyuchi"}, "path": "Terraform/copy_mobile_app_info_to_sql.sh", "diffHunk": "@@ -0,0 +1,30 @@\n+#!/bin/bash\n+# Script to copy AppId and OrgId from gcloud secret to CloudSQL.\n+set -e\n+\n+SECRET_PROJECT=heroes-hat-dev-devops\n+DATA_PROJECT=heroes-hat-dev-data\n+SQL_IMPORT_BUCKET=heroes-hat-dev-data-sql-import\n+TMPFILE=$(mktemp)\n+\n+# Write user registration server db name to TMPFILE.\n+echo \"USE \\`mystudies_userregistration\\`;\" >> ${TMPFILE}\n+\n+# Read AppId and OrgId from secrets..\n+APP_ID=`gcloud --project=${SECRET_PROJECT} secrets versions access latest --secret=mobile-app-appid`\n+ORG_ID=`gcloud --project=${SECRET_PROJECT} secrets versions access latest --secret=mobile-app-orgid`\n+\n+# Write corresponding SQL commands to TMPFILE.\n+echo \"INSERT INTO org_info (id, name, org_id) VALUES(1, \\\"DummyOrgName\\\", \\\"${ORG_ID}\\\");\" >> ${TMPFILE}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ4MDY0MA=="}, "originalCommit": {"oid": "fd4aa23f91519f41e2b00a7b3036f06b1cb27b57"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMTEyNDMxOnYy", "diffSide": "RIGHT", "path": "Terraform/copy_mobile_app_info_to_sql.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNDozMjowMFrOGQDHWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwMzo1MzowN1rOGRDMkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ4MTQzNA==", "bodyText": "how come org and app_info both get id=1, but you are setting id=2 for location. Is there another location that's set before this one?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/309#discussion_r419481434", "createdAt": "2020-05-04T14:32:00Z", "author": {"login": "zohrehj"}, "path": "Terraform/copy_mobile_app_info_to_sql.sh", "diffHunk": "@@ -0,0 +1,30 @@\n+#!/bin/bash\n+# Script to copy AppId and OrgId from gcloud secret to CloudSQL.\n+set -e\n+\n+SECRET_PROJECT=heroes-hat-dev-devops\n+DATA_PROJECT=heroes-hat-dev-data\n+SQL_IMPORT_BUCKET=heroes-hat-dev-data-sql-import\n+TMPFILE=$(mktemp)\n+\n+# Write user registration server db name to TMPFILE.\n+echo \"USE \\`mystudies_userregistration\\`;\" >> ${TMPFILE}\n+\n+# Read AppId and OrgId from secrets..\n+APP_ID=`gcloud --project=${SECRET_PROJECT} secrets versions access latest --secret=mobile-app-appid`\n+ORG_ID=`gcloud --project=${SECRET_PROJECT} secrets versions access latest --secret=mobile-app-orgid`\n+\n+# Write corresponding SQL commands to TMPFILE.\n+echo \"INSERT INTO org_info (id, name, org_id) VALUES(1, \\\"DummyOrgName\\\", \\\"${ORG_ID}\\\");\" >> ${TMPFILE}\n+echo \"INSERT INTO app_info (app_info_id, custom_app_id, org_info_id) VALUES(1, \\\"${APP_ID}\\\", 1);\" >> ${TMPFILE}\n+echo \"INSERT INTO locations (id, is_default) VALUES(2, \\\"Y\\\");\" >> ${TMPFILE}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd4aa23f91519f41e2b00a7b3036f06b1cb27b57"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDUzMTM0NQ==", "bodyText": "Change to 1.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/309#discussion_r420531345", "createdAt": "2020-05-06T03:53:07Z", "author": {"login": "kuoyuchi"}, "path": "Terraform/copy_mobile_app_info_to_sql.sh", "diffHunk": "@@ -0,0 +1,30 @@\n+#!/bin/bash\n+# Script to copy AppId and OrgId from gcloud secret to CloudSQL.\n+set -e\n+\n+SECRET_PROJECT=heroes-hat-dev-devops\n+DATA_PROJECT=heroes-hat-dev-data\n+SQL_IMPORT_BUCKET=heroes-hat-dev-data-sql-import\n+TMPFILE=$(mktemp)\n+\n+# Write user registration server db name to TMPFILE.\n+echo \"USE \\`mystudies_userregistration\\`;\" >> ${TMPFILE}\n+\n+# Read AppId and OrgId from secrets..\n+APP_ID=`gcloud --project=${SECRET_PROJECT} secrets versions access latest --secret=mobile-app-appid`\n+ORG_ID=`gcloud --project=${SECRET_PROJECT} secrets versions access latest --secret=mobile-app-orgid`\n+\n+# Write corresponding SQL commands to TMPFILE.\n+echo \"INSERT INTO org_info (id, name, org_id) VALUES(1, \\\"DummyOrgName\\\", \\\"${ORG_ID}\\\");\" >> ${TMPFILE}\n+echo \"INSERT INTO app_info (app_info_id, custom_app_id, org_info_id) VALUES(1, \\\"${APP_ID}\\\", 1);\" >> ${TMPFILE}\n+echo \"INSERT INTO locations (id, is_default) VALUES(2, \\\"Y\\\");\" >> ${TMPFILE}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ4MTQzNA=="}, "originalCommit": {"oid": "fd4aa23f91519f41e2b00a7b3036f06b1cb27b57"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1048, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}