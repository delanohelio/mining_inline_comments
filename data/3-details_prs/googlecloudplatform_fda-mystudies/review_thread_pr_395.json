{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3NjQ2NDI3", "number": 395, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMjo0MTo1NFrOD8Qu2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMjo0MTo1NFrOD8Qu2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NTE1Mjg4OnYy", "diffSide": "RIGHT", "path": "user-registration-server-ws/sqlscript/mystudies_user_registration_db_script.sql", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMjo0MTo1NFrOGVGBSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNToxMTo1OVrOGVhA1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc3MTkxNA==", "bodyText": "Can we put these under the CREATE TABLE IF NOT EXISTS user_institution statement?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/395#discussion_r424771914", "createdAt": "2020-05-13T22:41:54Z", "author": {"login": "kuoyuchi"}, "path": "user-registration-server-ws/sqlscript/mystudies_user_registration_db_script.sql", "diffHunk": "@@ -456,6 +464,9 @@ CREATE TABLE IF NOT EXISTS `user_institution` (\n \r\n -- Data exporting was unselected.\r\n \r\n+ALTER TABLE user_institution ADD CONSTRAINT  user_institution_id_unique UNIQUE (user_institution_id);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c387a39eede808e35c991be3346642ac020c2c8"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc3NDM2OA==", "bodyText": "Like this?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/395#discussion_r424774368", "createdAt": "2020-05-13T22:48:47Z", "author": {"login": "wamills"}, "path": "user-registration-server-ws/sqlscript/mystudies_user_registration_db_script.sql", "diffHunk": "@@ -456,6 +464,9 @@ CREATE TABLE IF NOT EXISTS `user_institution` (\n \r\n -- Data exporting was unselected.\r\n \r\n+ALTER TABLE user_institution ADD CONSTRAINT  user_institution_id_unique UNIQUE (user_institution_id);\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc3MTkxNA=="}, "originalCommit": {"oid": "3c387a39eede808e35c991be3346642ac020c2c8"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc3NTM1OQ==", "bodyText": "I meant something like:\nCREATE TABLE IF NOT EXISTS `user_institution` (\n  `user_institution_id` BIGINT NOT NULL AUTO_INCREMENT,\n  ...\n  PRIMARY KEY (`user_institution_id`),\n CONSTRAINT  user_institution_id_unique UNIQUE (user_institution_id),\n  CONSTRAINT  user_details_id_unique UNIQUE (user_details_id)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n\nPlease ignore if this doesn't work. Thanks!", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/395#discussion_r424775359", "createdAt": "2020-05-13T22:51:20Z", "author": {"login": "kuoyuchi"}, "path": "user-registration-server-ws/sqlscript/mystudies_user_registration_db_script.sql", "diffHunk": "@@ -456,6 +464,9 @@ CREATE TABLE IF NOT EXISTS `user_institution` (\n \r\n -- Data exporting was unselected.\r\n \r\n+ALTER TABLE user_institution ADD CONSTRAINT  user_institution_id_unique UNIQUE (user_institution_id);\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc3MTkxNA=="}, "originalCommit": {"oid": "3c387a39eede808e35c991be3346642ac020c2c8"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4ODU0MA==", "bodyText": "+1 I think you should be able to do this when creating the table.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/395#discussion_r424788540", "createdAt": "2020-05-13T23:31:18Z", "author": {"login": "karepker"}, "path": "user-registration-server-ws/sqlscript/mystudies_user_registration_db_script.sql", "diffHunk": "@@ -456,6 +464,9 @@ CREATE TABLE IF NOT EXISTS `user_institution` (\n \r\n -- Data exporting was unselected.\r\n \r\n+ALTER TABLE user_institution ADD CONSTRAINT  user_institution_id_unique UNIQUE (user_institution_id);\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc3MTkxNA=="}, "originalCommit": {"oid": "3c387a39eede808e35c991be3346642ac020c2c8"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTIxNDE2NQ==", "bodyText": "Done, added. Did the same for the personalization table.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/395#discussion_r425214165", "createdAt": "2020-05-14T15:11:59Z", "author": {"login": "wamills"}, "path": "user-registration-server-ws/sqlscript/mystudies_user_registration_db_script.sql", "diffHunk": "@@ -456,6 +464,9 @@ CREATE TABLE IF NOT EXISTS `user_institution` (\n \r\n -- Data exporting was unselected.\r\n \r\n+ALTER TABLE user_institution ADD CONSTRAINT  user_institution_id_unique UNIQUE (user_institution_id);\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc3MTkxNA=="}, "originalCommit": {"oid": "3c387a39eede808e35c991be3346642ac020c2c8"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1112, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}