{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExNjgwNjky", "number": 1697, "title": "Fixed issue #1562 [PM] Users > Edit user details > 'Delete invitation' button for users with Invited status", "bodyText": "Fixed issue #1562 [PM] Users > Edit user details > 'Delete invitation' button for users with Invited status\n\n\nAs per issue #1562, written API for 'Delete invitation' button for users with INVITED status.\n\n\nAdded validation for USER_NOT_FOUND, NOT_SUPER_ADMIN_ACCESS and if status is not INVITED.\n\n\nAdded integration test cases.\n\n\nUpdated proper message code for FORGOT_PASSWORD which was fixed in PR #1463.\n\n\nCode format + organize import", "createdAt": "2020-10-28T16:32:10Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1697", "merged": true, "mergeCommit": {"oid": "50f7264e28a57367020e5ec94d723e79c8fabb02"}, "closed": true, "closedAt": "2020-11-18T16:06:30Z", "author": {"login": "harisboston"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXAHorAH2gAyNTExNjgwNjkyOmI0NmE4MjYzY2RmN2ZkMWYyNGRmODgxZDU4ZGUzNWUwODA0MjNiMjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddwGFuAH2gAyNTExNjgwNjkyOjBkZTE4YmI1NmQ0ZDY0YzI5YjU0ODQyNGU2MGY5OWFjODA1NWVlYzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b46a8263cdf7fd1f24df881d58de35e080423b29", "author": {"user": {"login": "harisboston", "name": "Haris Hasan"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b46a8263cdf7fd1f24df881d58de35e080423b29", "committedDate": "2020-10-28T16:25:50Z", "message": "Fixed issue  #1562 [PM] Users > Edit user details > 'Delete invitation' button for users with Invited status #1562\n\nFixed issue  #1562 [PM] Users > Edit user details > 'Delete invitation' button for users with Invited status"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be63d8a48bbc3e0eca837cccc0a07b34f7f3c855", "author": {"user": {"login": "harisboston", "name": "Haris Hasan"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/be63d8a48bbc3e0eca837cccc0a07b34f7f3c855", "committedDate": "2020-10-28T16:27:40Z", "message": "Code format\n\nCode format"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MDY5MzE1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1697#pullrequestreview-519069315", "createdAt": "2020-10-28T20:46:11Z", "commit": {"oid": "be63d8a48bbc3e0eca837cccc0a07b34f7f3c855"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMDo0NjoxMVrOHp8wHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMDo0NjoxMVrOHp8wHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzc0OTAyMg==", "bodyText": "are you setting the same user as both superadmin and invited?\nlet's not do that. otherwise any future change in superadmin functionality and/or additional safety checks will break your test.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1697#discussion_r513749022", "createdAt": "2020-10-28T20:46:11Z", "author": {"login": "zohrehj"}, "path": "participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/UserProfileControllerTest.java", "diffHunk": "@@ -532,6 +533,83 @@ public void shouldReturnBadRequestForDeactivateUser() throws Exception {\n     verifyTokenIntrospectRequest();\n   }\n \n+  @Test\n+  public void shouldDeleteInvitedUser() throws Exception {\n+    // Step 1: set user status as invited\n+    userRegAdminEntity.setStatus(CommonConstants.INVITED_STATUS);\n+    testDataHelper.getUserRegAdminRepository().saveAndFlush(userRegAdminEntity);\n+\n+    // Step 2: Call the API and expect INVITATION_DELETED_SUCCESSFULLY message\n+    HttpHeaders headers = testDataHelper.newCommonHeaders();\n+    headers.add(\"userId\", userRegAdminEntity.getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be63d8a48bbc3e0eca837cccc0a07b34f7f3c855"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a16d8a13a4fa36101011a750bd7be5d16506435b", "author": {"user": {"login": "harisboston", "name": "Haris Hasan"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a16d8a13a4fa36101011a750bd7be5d16506435b", "committedDate": "2020-10-29T10:45:26Z", "message": "Fixed review comment of  'Delete invitation' button for users with Invited status PR #1697\n\nFixed review comment of  'Delete invitation' button for users with Invited status PR #1697"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NjUzNDM2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1697#pullrequestreview-519653436", "createdAt": "2020-10-29T13:18:38Z", "commit": {"oid": "a16d8a13a4fa36101011a750bd7be5d16506435b"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0698e1db2447bdf8a4fcf25f1a5387f5cf18c36f", "author": {"user": {"login": "harisboston", "name": "Haris Hasan"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0698e1db2447bdf8a4fcf25f1a5387f5cf18c36f", "committedDate": "2020-11-18T05:54:32Z", "message": "Merge branch 'develop' into participant-datastore-delete-invitation-issue-1562"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzNTM4Mzc5", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1697#pullrequestreview-533538379", "createdAt": "2020-11-18T15:05:02Z", "commit": {"oid": "0698e1db2447bdf8a4fcf25f1a5387f5cf18c36f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0de18bb56d4d64c29b548424e60f99ac8055eec4", "author": {"user": {"login": "harisboston", "name": "Haris Hasan"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0de18bb56d4d64c29b548424e60f99ac8055eec4", "committedDate": "2020-11-18T15:43:08Z", "message": "Merge branch 'develop' into participant-datastore-delete-invitation-issue-1562"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1355, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}