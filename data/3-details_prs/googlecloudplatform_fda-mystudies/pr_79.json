{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MjY3NjYx", "number": 79, "title": "Code push for github PR issue fixes and github open issue fixes", "bodyText": "@zohrehj\nPlease find the list of changes for the today's PR\nAuth Server:\n1-> issue fixes based on the previous PR comments.\n2->Github open issue fix [ #53,#54 & #56]\nUser Registration Server (Consent-Mgmt,Enroll-Mgmt&User-Mgmt):\n1-> issue fixes based on the previous PR comments.\n2->Github open issue fix [ #53 & #57]\nResponse Server:\n1-> Fixed WCP Auth credentials names to make it consistent with what is defined in the WCP properties files[#77]\n2-> Fixed bug where activity version was not getting updated and not being retrieved\n3-> Changed the sharingConsent  type to String from Boolean - as N/A is an option for this attribute, given WCP study setup.\nWCP:\n1-> Github open issue fix [ #53 ]\nWCP-WS:\n1-> Fixed response server's auth credentials names to make it consistent [part of #77]", "createdAt": "2020-04-03T16:23:53Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/79", "merged": true, "mergeCommit": {"oid": "9013531b60fdffba7688f2808a0125694226e181"}, "closed": true, "closedAt": "2020-04-07T13:25:53Z", "author": {"login": "aswinijena100"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcUDKHgAH2gAyMzk4MjY3NjYxOmNkZjUzYTA5NGM3M2EyM2UxYTE2ZDhhYzg4MzYyOGQ5YjQ4MjE0ZTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVTOxCgFqTM4OTEwOTU5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cdf53a094c73a23e1a16d8ac883628d9b48214e3", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/cdf53a094c73a23e1a16d8ac883628d9b48214e3", "committedDate": "2020-04-03T16:05:20Z", "message": "Code push for github PR issue fixes and github open issue fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3NDE5NDM0", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/79#pullrequestreview-387419434", "createdAt": "2020-04-03T16:46:57Z", "commit": {"oid": "cdf53a094c73a23e1a16d8ac883628d9b48214e3"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNjo0Njo1N1rOGAdqsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNzoyMDowM1rOGAfQ0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzOTI1MQ==", "bodyText": "why is this an error log? it doesn't contain an exception message, so it's confusing to log it as error.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/79#discussion_r403139251", "createdAt": "2020-04-03T16:46:57Z", "author": {"login": "zohrehj"}, "path": "auth-server-ws/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/AuthenticationController.java", "diffHunk": "@@ -1011,7 +1014,7 @@ private AuthServerRegistrationResponse prepareSuccessResponse(\n       responseBean.setMessage(ErrorCode.EC_113.errorMessage());\n       return new ResponseEntity<>(responseBean, HttpStatus.BAD_REQUEST);\n     }\n-    logger.info(\"AuthenticationController forgotPassword() - Ends \");\n+    logger.error(\"AuthenticationController forgotPassword() - Ends \");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdf53a094c73a23e1a16d8ac883628d9b48214e3"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MDA5NA==", "bodyText": "This error message does not give any more context to the user, and is not actionable.\nI think what the bug wants is a clear actionable message telling user what the issue is and how they can resolve it.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/79#discussion_r403140094", "createdAt": "2020-04-03T16:48:32Z", "author": {"login": "zohrehj"}, "path": "auth-server-ws/src/main/java/com/google/cloud/healthcare/fdamystudies/utils/MyStudiesUserRegUtil.java", "diffHunk": "@@ -52,7 +52,8 @@\n     EMAIL_ID_VERIFIED(\"EmailId has already verified\"),\n     INVALID_CLIENTID_OR_SECRET_KEY(\"Invalid Client Id or Secret Key\"),\n     INVALID_CLIENT_TOKEN(\"Invalid client token\"),\n-    SYSTEM_ERROR_FOUND(\"System error found\"),\n+    SYSTEM_ERROR_FOUND(\n+        \"Sorry, an error has occurred and your request could not be processed. Please try again later.\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdf53a094c73a23e1a16d8ac883628d9b48214e3"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MDkxOQ==", "bodyText": "If this exception is related to user credential, why is it throwing a systemException?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/79#discussion_r403140919", "createdAt": "2020-04-03T16:50:02Z", "author": {"login": "zohrehj"}, "path": "response-server-ws/src/main/java/com/google/cloud/healthcare/fdamystudies/service/CommonServiceImpl.java", "diffHunk": "@@ -77,16 +77,16 @@ public boolean validateServerClientCredentials(String clientId, String clientSec\n       logger.error(\"ERROR: \", e);\n \n       if (e.getRawStatusCode() == 401) {\n-        logger.error(\"Invalid client Id or client secret.\");\n+        logger.error(\"Invalid client credentials.\");\n         throw new UnAuthorizedRequestException();\n       } else if (e.getRawStatusCode() == 400) {\n-        logger.error(\"Client verification ended with Bad Request\");\n+        logger.error(\"Client credentials verification error.\");\n         throw new InvalidRequestException();\n       } else {\n         throw new SystemException();\n       }\n     }\n-    logger.error(\"Invalid client Id or client secret.\");\n+    logger.error(\"Invalid client credentials.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdf53a094c73a23e1a16d8ac883628d9b48214e3"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MTc0NQ==", "bodyText": "this would also remove spaces in the middle of a token, why not use trim()?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/79#discussion_r403141745", "createdAt": "2020-04-03T16:51:38Z", "author": {"login": "zohrehj"}, "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/VerifyEmailIdController.java", "diffHunk": "@@ -75,8 +75,9 @@\n       return new ResponseEntity<>(verifyEmailIdResponse, HttpStatus.BAD_REQUEST);\n     }\n     try {\n-      VerifyCodeResponse serviceResult =\n-          userDetailsService.verifyCode(verificationForm.getCode(), userId);\n+      verificationCode =\n+          verificationForm.getCode().replaceAll(\"\\\\s\", \"\"); // trim the surrounding whitespace.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdf53a094c73a23e1a16d8ac883628d9b48214e3"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MjA4OA==", "bodyText": "why was this code removed?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/79#discussion_r403142088", "createdAt": "2020-04-03T16:52:17Z", "author": {"login": "zohrehj"}, "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/dao/StudiesDaoImpl.java", "diffHunk": "@@ -215,61 +211,4 @@ private void decommisionSiteFromStudy(Session session, Integer studyId) {\n     }\n     logger.info(\"StudiesDaoImpl - decommisionSiteFromStudy() : ends\");\n   }\n-\n-  @Override\n-  public String withdrawFromStudy(String participantId, String studyId, boolean delete) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdf53a094c73a23e1a16d8ac883628d9b48214e3"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE2NTM5Mw==", "bodyText": "I am not clear as to how this works? given that the key seems to be on the right and value on left?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/79#discussion_r403165393", "createdAt": "2020-04-03T17:20:03Z", "author": {"login": "zohrehj"}, "path": "WCP-WS/src/main/resources/authorizationResource.properties", "diffHunk": "@@ -1,8 +1,9 @@\n ############################# AUTHORIZATION DETAILS #############################\n \n-83d92ad3-ec27-424b-af92-fa7aa9a88c7b=labkey.apptoken\n-com.labkey.fda=labkey.bundleid\n-83d92ad3-ec27-424b-af92-fa7aa9a88c7b_com.labkey.fda=\n+83d92ad3-ec27-424b-af92-fa7aa9a88c7b=responseserver.apptoken", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdf53a094c73a23e1a16d8ac883628d9b48214e3"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f84e0c8d6f69619b6a9d2ce413e83f1ca3cf30c", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9f84e0c8d6f69619b6a9d2ce413e83f1ca3cf30c", "committedDate": "2020-04-07T11:34:11Z", "message": "Merge branch 'early-access' of https://github.com/GoogleCloudPlatform/fda-mystudies into early-access-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94407a4fc3270c64bab4a9cb980b9e35ee42087b", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/94407a4fc3270c64bab4a9cb980b9e35ee42087b", "committedDate": "2020-04-07T11:36:23Z", "message": "Added logger.info instead of logger.error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e5a1b9f5ced42e609c44235cb50b687b210d7ca", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/7e5a1b9f5ced42e609c44235cb50b687b210d7ca", "committedDate": "2020-04-07T11:40:11Z", "message": "Added trim method instead of replaceAll . Also internal QA issue fixes for IOS pushnotification issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10a8a8c5a71c163e067bedc214aa427a003d54b8", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/10a8a8c5a71c163e067bedc214aa427a003d54b8", "committedDate": "2020-04-07T11:59:04Z", "message": "Merge branch 'early-access' into early-access-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e251c1ad3a1ab5b70621082e09a476571578738", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4e251c1ad3a1ab5b70621082e09a476571578738", "committedDate": "2020-04-07T12:03:17Z", "message": "Merge branch 'early-access-build' of https://github.com/GoogleCloudPlatform/fda-mystudies into early-access-build"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MTA5NTk5", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/79#pullrequestreview-389109599", "createdAt": "2020-04-07T13:22:49Z", "commit": {"oid": "4e251c1ad3a1ab5b70621082e09a476571578738"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1238, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}