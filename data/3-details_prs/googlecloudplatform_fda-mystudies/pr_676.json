{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2Mzc2MDYw", "number": 676, "title": "Participant Manager Service: GET /{app}/participants endpoint with integration tests", "bodyText": "GET /{app}/participants endpoint with integration tests", "createdAt": "2020-07-24T16:21:24Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676", "merged": true, "mergeCommit": {"oid": "c80fcf3e6a3e94bd1d69ca7948a8a55cabb916f3"}, "closed": true, "closedAt": "2020-08-14T15:45:18Z", "author": {"login": "monica-BTC"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4Ged6gH2gAyNDU2Mzc2MDYwOjA1M2ZiZDFkOTUxOWU2MzhjZmNiNDZiODhjYWZmY2Y0NjdkNGIzNWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-2kSpAFqTQ2NzY4MTEwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d", "author": {"user": {"login": "monica-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/053fbd1d9519e638cfcb46b88caffcf467d4b35d", "committedDate": "2020-07-24T16:18:33Z", "message": "GET /{app}/participants endpoint with integration tests\n\nGET /{app}/participants endpoint with integration tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MjkxMzkw", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#pullrequestreview-457291390", "createdAt": "2020-07-29T08:11:58Z", "commit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODoxMTo1OFrOG4tezg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODo0MDozOFrOG4uj5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjExODYwNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfull\"),\n          \n          \n            \n              GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfully\"),", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462118606", "createdAt": "2020-07-29T08:11:58Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/MessageCode.java", "diffHunk": "@@ -53,7 +53,9 @@\n \n   GET_LOCATION_SUCCESS(HttpStatus.OK, \"MSG-0008\", \"Get locations successfull\"),\n \n-  GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfull\");\n+  GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfull\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEyMzg5Mw==", "bodyText": "I have seen other PRs with a new ParticipantDetail.java file here. Could you look into those and make sure to consolidate with that also? For example PR #656", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462123893", "createdAt": "2020-07-29T08:20:39Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/beans/ParticipantDetails.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+\n+package com.google.cloud.healthcare.fdamystudies.beans;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+\n+import lombok.Getter;\n+import lombok.NoArgsConstructor;\n+import lombok.Setter;\n+\n+@Getter\n+@Setter\n+@NoArgsConstructor\n+@JsonInclude(JsonInclude.Include.NON_EMPTY)\n+public class ParticipantDetails {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEyOTI3Nw==", "bodyText": "{appId} ?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462129277", "createdAt": "2020-07-29T08:29:08Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/common/ApiEndpoint.java", "diffHunk": "@@ -38,7 +38,9 @@\n   GET_LOCATIONS(\"http://localhost:8003/participant-manager-service/locations\"),\n \n   GET_LOCATION_BY_LOCATION_ID(\n-      \"http://localhost:8003/participant-manager-service/locations/{locationId}\");\n+      \"http://localhost:8003/participant-manager-service/locations/{locationId}\"),\n+\n+  GET_APP_PARTICIPANTS(\"http://localhost:8080/participant-manager-service/apps/{app}/participants\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEzMTk4Nw==", "bodyText": "This comment also goes with the above classes. Also I think there should be a consensus for all these classes on whether or not Detail is plural", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462131987", "createdAt": "2020-07-29T08:33:10Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/beans/ParticipantDetails.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+\n+package com.google.cloud.healthcare.fdamystudies.beans;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+\n+import lombok.Getter;\n+import lombok.NoArgsConstructor;\n+import lombok.Setter;\n+\n+@Getter\n+@Setter\n+@NoArgsConstructor\n+@JsonInclude(JsonInclude.Include.NON_EMPTY)\n+public class ParticipantDetails {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEyMzg5Mw=="}, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEzMzQ1Mg==", "bodyText": "typo", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462133452", "createdAt": "2020-07-29T08:35:31Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/MessageCode.java", "diffHunk": "@@ -53,7 +53,9 @@\n \n   GET_LOCATION_SUCCESS(HttpStatus.OK, \"MSG-0008\", \"Get locations successfull\"),\n \n-  GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfull\");\n+  GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfull\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEzNjI5Mg==", "bodyText": "Always check for size of Array before checking for values within it. Also check for other fields by participants[0] too like the actual enrolled studies to make sure it matches test data", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462136292", "createdAt": "2020-07-29T08:40:38Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/AppControllerTest.java", "diffHunk": "@@ -171,6 +171,64 @@ public void shouldReturnForbiddenForGetAppDetailsAccessDenied() throws Exception\n                 \"$.error_description\", is(ErrorCode.USER_ADMIN_ACCESS_DENIED.getDescription())));\n   }\n \n+  @Test\n+  public void shouldReturnGetAppParticipants() throws Exception {\n+    // Step 1 : Set studyEntity,siteEntity,locationEntity,userDetailsEntity\n+    studyEntity.setAppInfo(appEntity);\n+    siteEntity.setStudy(studyEntity);\n+    locationEntity = testDataHelper.createLocation();\n+    siteEntity.setLocation(locationEntity);\n+    participantStudyEntity.setUserDetails(userDetailsEntity);\n+    testDataHelper.getParticipantStudyRepository().saveAndFlush(participantStudyEntity);\n+\n+    // Step 2: Call API to return GET_APPS_PARTICIPANTS\n+    HttpHeaders headers = testDataHelper.newCommonHeaders();\n+    headers.set(USER_ID_HEADER, userRegAdminEntity.getId());\n+\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_APP_PARTICIPANTS.getPath(), appEntity.getId())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isOk())\n+        .andExpect(jsonPath(\"$.participants\").isArray())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ce49ac64c664f4a2d1a783e83e4e2f9fd6c132b", "author": {"user": {"login": "monica-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5ce49ac64c664f4a2d1a783e83e4e2f9fd6c132b", "committedDate": "2020-07-30T10:16:23Z", "message": "Fixed PR comments\n\nFixed PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2ef5e6fb4823b34182398cbbb676afc78e8495e", "author": {"user": {"login": "monica-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c2ef5e6fb4823b34182398cbbb676afc78e8495e", "committedDate": "2020-07-30T10:21:51Z", "message": "Fixed PR comment\n\nFixed PR comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdffe157165c56e80fa87b173331647c138547c5", "author": {"user": {"login": "monica-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bdffe157165c56e80fa87b173331647c138547c5", "committedDate": "2020-07-30T10:24:23Z", "message": "Merge branch 'participant-manager-getlocations-endpoint' into get-app-participants-api"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NTAwODk1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#pullrequestreview-459500895", "createdAt": "2020-07-31T22:05:12Z", "commit": {"oid": "bdffe157165c56e80fa87b173331647c138547c5"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb3f416c751bab3d45a6796e879a0b83e621348b", "author": {"user": {"login": "monica-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/eb3f416c751bab3d45a6796e879a0b83e621348b", "committedDate": "2020-08-14T06:59:47Z", "message": "Merge branch 'develop' into get-app-participants-api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cc7c1f43d1949c2a31fab70cb96069bd527cf01", "author": {"user": {"login": "monica-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5cc7c1f43d1949c2a31fab70cb96069bd527cf01", "committedDate": "2020-08-14T07:06:50Z", "message": "resolved conflict errors\n\nresolved conflict errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3NjQ2Njk2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#pullrequestreview-467646696", "createdAt": "2020-08-14T14:59:10Z", "commit": {"oid": "5cc7c1f43d1949c2a31fab70cb96069bd527cf01"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4de955863d8246f5f2dade49703a96ba99e6c6e9", "author": {"user": {"login": "monica-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4de955863d8246f5f2dade49703a96ba99e6c6e9", "committedDate": "2020-08-14T15:19:53Z", "message": "Merge branch 'develop' into get-app-participants-api"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3NjgxMTA5", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#pullrequestreview-467681109", "createdAt": "2020-08-14T15:43:54Z", "commit": {"oid": "5cc7c1f43d1949c2a31fab70cb96069bd527cf01"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 534, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}