{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MTE3MTg0", "number": 179, "title": "code push with below list of changes: Please find the latest PR descr\u2026", "bodyText": "Please find the latest PR description:\n\nTinymce text editor replacement with Bootstrap (MIT license) in Study Builder due to 3rd party library license of tinymce is restricted by Google Open source.\nChanges to send an Email stating your account has been locked when account is locked for study builder app as part HIPAA Compliance.\nInternal QA issue fix for UpdateStudyState api for bookmarked scenario in Enroll Mgmt bundle.\nInternal QA issue fix Study State api to handle Null Pointer Exception in Enroll Mgmt bundle.\nBO Changes in Enroll Mgmt and Consent Mgmt bundle to sync across all 3 components.", "createdAt": "2020-04-20T14:59:07Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179", "merged": true, "mergeCommit": {"oid": "8c98a23f5a5adb4f2c5f179e5dce2eea48db7eb6"}, "closed": true, "closedAt": "2020-04-24T16:38:58Z", "author": {"login": "aswinijena100"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZgTTTAH2gAyNDA2MTE3MTg0OjdhZmE5MWI5ZDljNjg3MjVlMDAzYTlmNDk4M2ExZDkxNzMwZGRlZTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcazxLLgFqTQwMDA4MDY2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/7afa91b9d9c68725e003a9f4983a1d91730ddee5", "committedDate": "2020-04-20T14:52:14Z", "message": "code push with below list of changes: Please find the latest PR description:\n\n1. Tinymce text editor replacement with Bootstrap (MIT license) in Study Builder due to 3rd party library license of tinymce is restricted by Google Open source.\n2. Changes to send an Email stating your account has been locked when account is locked for WCP as part HIPAA Compliance.\n3. Internal QA issue fix for UpdateStudyState Api for bookmarked scenario in Enroll Mgmt bundle.\n4. Internal QA issue fix Study State Api to handle NullPointer Exception in Enroll Mgmt bundle.\n5. BO Changes in Enroll Mgmt and Consent Mgmt bundle to synch accross all 3 components."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NzQwNDEx", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#pullrequestreview-396740411", "createdAt": "2020-04-20T19:16:49Z", "commit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NzA3MTAw", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#pullrequestreview-396707100", "createdAt": "2020-04-20T18:29:41Z", "commit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "state": "COMMENTED", "comments": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxODoyOTo0MVrOGIh90A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxOToxMDoxMlrOGIjfTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU5ODI4OA==", "bodyText": "please do not modify copyright format.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411598288", "createdAt": "2020-04-20T18:29:41Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/LoginDAOImpl.java", "diffHunk": "@@ -1,24 +1,23 @@\n /*\n  * Copyright \u00a9 2017-2018 Harvard Pilgrim Health Care Institute (HPHCI) and its Contributors.\n+ * Copyright 2020 Google LLC\n  * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and\n- * associated documentation files (the \"Software\"), to deal in the Software without restriction, including\n- * without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\n- * of the Software, and to permit persons to whom the Software is furnished to do so, subject to the\n- * following conditions:\n+ * associated documentation files (the \"Software\"), to deal in the Software without restriction,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU5OTY5OQ==", "bodyText": "I am not seeing oldEmail and type being used anywhere.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411599699", "createdAt": "2020-04-20T18:31:58Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/LoginService.java", "diffHunk": "@@ -49,4 +48,7 @@ public String changePassword(\n \n   public String sendPasswordResetLinkToMail(\n       HttpServletRequest request, String email, String oldEmail, String type);\n+\n+  public String sendLockedAccountPasswordResetLinkToMail(\n+      String email, String oldEmail, String type);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwMDM5MA==", "bodyText": "what is type? please use a more descriptive name or add a comment.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411600390", "createdAt": "2020-04-20T18:33:06Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/LoginServiceImpl.java", "diffHunk": "@@ -570,4 +569,88 @@ public String validateAccessCode(String securityToken, String accessCode) {\n     logger.info(\"LoginServiceImpl - checkSecurityToken() - Ends\");\n     return result;\n   }\n+\n+  @Override\n+  public String sendLockedAccountPasswordResetLinkToMail(\n+      String email, String oldEmail, String type) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwMTYxNg==", "bodyText": "keyValueForSubject2 is not used anywhere, please remove.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411601616", "createdAt": "2020-04-20T18:35:02Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/LoginServiceImpl.java", "diffHunk": "@@ -570,4 +569,88 @@ public String validateAccessCode(String securityToken, String accessCode) {\n     logger.info(\"LoginServiceImpl - checkSecurityToken() - Ends\");\n     return result;\n   }\n+\n+  @Override\n+  public String sendLockedAccountPasswordResetLinkToMail(\n+      String email, String oldEmail, String type) {\n+\n+    logger.info(\"LoginServiceImpl - sendLockedAccountPasswordResetLinkToMail - Starts\");\n+    Map<String, String> propMap = FdahpStudyDesignerUtil.getAppProperties();\n+    String passwordResetToken = null;\n+    String message = propMap.get(\"user.forgot.error.msg\");\n+    boolean flag = false;\n+    UserBO userdetails = null;\n+    String accessCode = \"\";\n+    Map<String, String> keyValueForSubject = null;\n+    Map<String, String> keyValueForSubject2 = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwMjE2Mw==", "bodyText": "this check is not needed, considering passwordResetToken was created right above.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411602163", "createdAt": "2020-04-20T18:35:58Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/LoginServiceImpl.java", "diffHunk": "@@ -570,4 +569,88 @@ public String validateAccessCode(String securityToken, String accessCode) {\n     logger.info(\"LoginServiceImpl - checkSecurityToken() - Ends\");\n     return result;\n   }\n+\n+  @Override\n+  public String sendLockedAccountPasswordResetLinkToMail(\n+      String email, String oldEmail, String type) {\n+\n+    logger.info(\"LoginServiceImpl - sendLockedAccountPasswordResetLinkToMail - Starts\");\n+    Map<String, String> propMap = FdahpStudyDesignerUtil.getAppProperties();\n+    String passwordResetToken = null;\n+    String message = propMap.get(\"user.forgot.error.msg\");\n+    boolean flag = false;\n+    UserBO userdetails = null;\n+    String accessCode = \"\";\n+    Map<String, String> keyValueForSubject = null;\n+    Map<String, String> keyValueForSubject2 = null;\n+    String dynamicContent = \"\";\n+    String acceptLinkMail = \"\";\n+    int passwordResetLinkExpirationInHour =\n+        Integer.parseInt(propMap.get(\"accountlocked.resetLink.expiration.in.hour\"));\n+    String customerCareMail = \"\";\n+    String contact = \"\";\n+    try {\n+      passwordResetToken = RandomStringUtils.randomAlphanumeric(10);\n+      accessCode = RandomStringUtils.randomAlphanumeric(6);\n+      if (!StringUtils.isEmpty(passwordResetToken)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwMzgyNQ==", "bodyText": "looks like type can be either empty or \"USER_UPDATE\"; does it make more sense to pass a boolean value  instead?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411603825", "createdAt": "2020-04-20T18:38:41Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/LoginServiceImpl.java", "diffHunk": "@@ -570,4 +569,88 @@ public String validateAccessCode(String securityToken, String accessCode) {\n     logger.info(\"LoginServiceImpl - checkSecurityToken() - Ends\");\n     return result;\n   }\n+\n+  @Override\n+  public String sendLockedAccountPasswordResetLinkToMail(\n+      String email, String oldEmail, String type) {\n+\n+    logger.info(\"LoginServiceImpl - sendLockedAccountPasswordResetLinkToMail - Starts\");\n+    Map<String, String> propMap = FdahpStudyDesignerUtil.getAppProperties();\n+    String passwordResetToken = null;\n+    String message = propMap.get(\"user.forgot.error.msg\");\n+    boolean flag = false;\n+    UserBO userdetails = null;\n+    String accessCode = \"\";\n+    Map<String, String> keyValueForSubject = null;\n+    Map<String, String> keyValueForSubject2 = null;\n+    String dynamicContent = \"\";\n+    String acceptLinkMail = \"\";\n+    int passwordResetLinkExpirationInHour =\n+        Integer.parseInt(propMap.get(\"accountlocked.resetLink.expiration.in.hour\"));\n+    String customerCareMail = \"\";\n+    String contact = \"\";\n+    try {\n+      passwordResetToken = RandomStringUtils.randomAlphanumeric(10);\n+      accessCode = RandomStringUtils.randomAlphanumeric(6);\n+      if (!StringUtils.isEmpty(passwordResetToken)) {\n+        userdetails = loginDAO.getValidUserByEmail(email);\n+        if (\"\".equals(type) && userdetails.getEmailChanged()) {\n+          userdetails = null;\n+        }\n+        if (null != userdetails) {\n+          userdetails.setSecurityToken(passwordResetToken);\n+          userdetails.setAccessCode(accessCode);\n+          userdetails.setTokenUsed(false);\n+          userdetails.setTokenExpiryDate(\n+              FdahpStudyDesignerUtil.addHours(\n+                  FdahpStudyDesignerUtil.getCurrentDateTime(), passwordResetLinkExpirationInHour));\n+\n+          if (!\"USER_UPDATE\".equals(type)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 88}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNDg3Mg==", "bodyText": "what is this representing?\ne.g. if it's representing whether sendEmailNotification  has succeeded, it can be renamed success or emailSent instead.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411604872", "createdAt": "2020-04-20T18:40:26Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/LoginServiceImpl.java", "diffHunk": "@@ -570,4 +569,88 @@ public String validateAccessCode(String securityToken, String accessCode) {\n     logger.info(\"LoginServiceImpl - checkSecurityToken() - Ends\");\n     return result;\n   }\n+\n+  @Override\n+  public String sendLockedAccountPasswordResetLinkToMail(\n+      String email, String oldEmail, String type) {\n+\n+    logger.info(\"LoginServiceImpl - sendLockedAccountPasswordResetLinkToMail - Starts\");\n+    Map<String, String> propMap = FdahpStudyDesignerUtil.getAppProperties();\n+    String passwordResetToken = null;\n+    String message = propMap.get(\"user.forgot.error.msg\");\n+    boolean flag = false;\n+    UserBO userdetails = null;\n+    String accessCode = \"\";\n+    Map<String, String> keyValueForSubject = null;\n+    Map<String, String> keyValueForSubject2 = null;\n+    String dynamicContent = \"\";\n+    String acceptLinkMail = \"\";\n+    int passwordResetLinkExpirationInHour =\n+        Integer.parseInt(propMap.get(\"accountlocked.resetLink.expiration.in.hour\"));\n+    String customerCareMail = \"\";\n+    String contact = \"\";\n+    try {\n+      passwordResetToken = RandomStringUtils.randomAlphanumeric(10);\n+      accessCode = RandomStringUtils.randomAlphanumeric(6);\n+      if (!StringUtils.isEmpty(passwordResetToken)) {\n+        userdetails = loginDAO.getValidUserByEmail(email);\n+        if (\"\".equals(type) && userdetails.getEmailChanged()) {\n+          userdetails = null;\n+        }\n+        if (null != userdetails) {\n+          userdetails.setSecurityToken(passwordResetToken);\n+          userdetails.setAccessCode(accessCode);\n+          userdetails.setTokenUsed(false);\n+          userdetails.setTokenExpiryDate(\n+              FdahpStudyDesignerUtil.addHours(\n+                  FdahpStudyDesignerUtil.getCurrentDateTime(), passwordResetLinkExpirationInHour));\n+\n+          if (!\"USER_UPDATE\".equals(type)) {\n+            message = loginDAO.updateUserForResetPassword(userdetails);\n+          } else {\n+            message = FdahpStudyDesignerConstants.SUCCESS;\n+          }\n+          if (FdahpStudyDesignerConstants.SUCCESS.equals(message)) {\n+            if (\"USER_EMAIL_UPDATE\".equalsIgnoreCase(type)) {\n+              acceptLinkMail = propMap.get(\"emailChangeLink\").trim();\n+            } else {\n+              acceptLinkMail = propMap.get(\"acceptLinkMail\").trim();\n+            }\n+            keyValueForSubject = new HashMap<String, String>();\n+            keyValueForSubject2 = new HashMap<String, String>();\n+            keyValueForSubject.put(\"$firstName\", userdetails.getFirstName());\n+            keyValueForSubject2.put(\"$firstName\", userdetails.getFirstName());\n+            keyValueForSubject.put(\"$lastName\", userdetails.getLastName());\n+            keyValueForSubject.put(\"$accessCode\", accessCode);\n+            keyValueForSubject.put(\"$passwordResetLink\", acceptLinkMail + passwordResetToken);\n+            customerCareMail = propMap.get(\"email.address.customer.service\");\n+            keyValueForSubject.put(\"$customerCareMail\", customerCareMail);\n+            keyValueForSubject2.put(\"$customerCareMail\", customerCareMail);\n+            keyValueForSubject.put(\"$newUpdatedMail\", userdetails.getUserEmail());\n+            keyValueForSubject2.put(\"$newUpdatedMail\", userdetails.getUserEmail());\n+            keyValueForSubject.put(\"$oldMail\", oldEmail);\n+            contact = propMap.get(\"phone.number.to\");\n+            keyValueForSubject.put(\"$contact\", contact);\n+\n+            dynamicContent =\n+                FdahpStudyDesignerUtil.genarateEmailContent(\n+                    \"accountLockedContent\", keyValueForSubject);\n+            flag =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 118}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNTc0MA==", "bodyText": "please do not modify copyright header's format.\nthis has happened a few times, please update your IDE settings to prevent this automated formatting from happening.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411605740", "createdAt": "2020-04-20T18:41:46Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/LoginDAO.java", "diffHunk": "@@ -1,24 +1,23 @@\n /*\n  * Copyright \u00a9 2017-2018 Harvard Pilgrim Health Care Institute (HPHCI) and its Contributors.\n+ * Copyright 2020 Google LLC\n  * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and\n- * associated documentation files (the \"Software\"), to deal in the Software without restriction, including\n- * without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\n- * of the Software, and to permit persons to whom the Software is furnished to do so, subject to the\n- * following conditions:\n+ * associated documentation files (the \"Software\"), to deal in the Software without restriction,\n+ * including without limitation the rights to use, copy, modify, merge, publish, distribute,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNjk3MQ==", "bodyText": "where is this method called?\nPlease add a comment to describe what's being updated, and why it's needed.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411606971", "createdAt": "2020-04-20T18:43:44Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/LoginDAOImpl.java", "diffHunk": "@@ -537,4 +540,29 @@ public String updateUser(UserBO userBO) {\n     logger.info(\"LoginDAOImpl - updateUser() - Ends\");\n     return result;\n   }\n+\n+  @Override\n+  public String updateUserForResetPassword(UserBO userBO) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwODgzMA==", "bodyText": "rollback would never get called in this code, because transaction variable is defined within the try block and is not accessible in the catch block.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411608830", "createdAt": "2020-04-20T18:46:45Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/LoginDAOImpl.java", "diffHunk": "@@ -537,4 +540,29 @@ public String updateUser(UserBO userBO) {\n     logger.info(\"LoginDAOImpl - updateUser() - Ends\");\n     return result;\n   }\n+\n+  @Override\n+  public String updateUserForResetPassword(UserBO userBO) {\n+    logger.info(\"LoginDAOImpl - updateUserForResetPassword() - Starts\");\n+    Session session = null;\n+    String result = FdahpStudyDesignerConstants.FAILURE;\n+    try {\n+      session = hibernateTemplate.getSessionFactory().openSession();\n+      transaction = session.beginTransaction();\n+      session.saveOrUpdate(userBO);\n+      transaction.commit();\n+      result = FdahpStudyDesignerConstants.SUCCESS;\n+    } catch (Exception e) {\n+      if (transaction != null) {\n+        transaction.rollback();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwOTI5NA==", "bodyText": "same here, please revert the format changes.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411609294", "createdAt": "2020-04-20T18:47:35Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/NotificationServiceImpl.java", "diffHunk": "@@ -1,29 +1,30 @@\n /*\n  * Copyright \u00a9 2017-2018 Harvard Pilgrim Health Care Institute (HPHCI) and its Contributors.\n+ * Copyright 2020 Google LLC\n  * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and\n- * associated documentation files (the \"Software\"), to deal in the Software without restriction, including\n- * without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\n- * of the Software, and to permit persons to whom the Software is furnished to do so, subject to the\n- * following conditions:\n+ * associated documentation files (the \"Software\"), to deal in the Software without restriction,\n+ * including without limitation the rights to use, copy, modify, merge, publish, distribute,\n+ * sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYxMzc2NQ==", "bodyText": "same here, please revert the format changes to copyright headers.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411613765", "createdAt": "2020-04-20T18:54:42Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/util/LimitLoginAuthenticationProvider.java", "diffHunk": "@@ -1,24 +1,23 @@\n /*\n  * Copyright \u00a9 2017-2018 Harvard Pilgrim Health Care Institute (HPHCI) and its Contributors.\n+ * Copyright 2020 Google LLC\n  * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and\n- * associated documentation files (the \"Software\"), to deal in the Software without restriction, including\n- * without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\n- * of the Software, and to permit persons to whom the Software is furnished to do so, subject to the\n- * following conditions:\n+ * associated documentation files (the \"Software\"), to deal in the Software without restriction,\n+ * including without limitation the rights to use, copy, modify, merge, publish, distribute,\n+ * sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYxNjM5OA==", "bodyText": "please remove", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411616398", "createdAt": "2020-04-20T18:58:34Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/templates/layout.jsp", "diffHunk": "@@ -131,12 +138,15 @@\n     <script src=\"/studybuilder/js/jquery.mask.min.js\"></script>\n     <script src=\"/studybuilder/js/jquery-scrollto.js\" ></script>\n     <script src=\"/studybuilder/js/jquery.nicescroll.min.js\"></script>\n-    <script src=\"/studybuilder/vendor/tinymce/tinymce.min.js\"></script>\n+<!--     <script src=\"/studybuilder/js/summernote.min.js\"></script > -->\n+<!--      <script src=\"/studybuilder/vendor/tinymce/tinymce.min.js\"></script> -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYxNzI2OA==", "bodyText": "</html> to be consistent", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411617268", "createdAt": "2020-04-20T19:00:03Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/privacypolicy.jsp", "diffHunk": "@@ -34,5 +33,5 @@\n \t\t</section>\n \t</section>\n </body>\n+<html>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYxNzY1Ng==", "bodyText": "please remove all commented out code", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411617656", "createdAt": "2020-04-20T19:00:42Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/addOrEditResourcePage.jsp", "diffHunk": "@@ -411,29 +415,58 @@ $(document).ready(function(){\n        $(\"#uploadImg\").click();\n     });\n \t \n-    if($(\"#richText\").length > 0){\n-    tinymce.init({\n-        selector: \"#richText\",\n-        theme: \"modern\",\n-        skin: \"lightgray\",\n-        height:150,\n-        plugins: [\n-            \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-            \"save contextmenu directionality paste\"\n-        ],\n-        toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo | fontsizeselect fontselect\",\n-        menubar: false,\n-        toolbar_items_size: 'small',\n-        content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-        setup : function(ed) {\n-            ed.on('keypress change', function(ed) {\n-            \tresetValidation('.resetContentType');\n-            \tresetValidation($('#'+ed.target.id).val(tinyMCE.get(ed.target.id).getContent()).parents('form #richText'));\n-            });\n-     \t  },\n-     \t <c:if test=\"${actionOn eq 'view'}\">readonly:1</c:if>\n-    });\n-\t}\n+//     if($(\"#richText\").length > 0){\n+//     tinymce.init({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYxODAwNA==", "bodyText": "why is copy commented out?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411618004", "createdAt": "2020-04-20T19:01:17Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/addOrEditResourcePage.jsp", "diffHunk": "@@ -411,29 +415,58 @@ $(document).ready(function(){\n        $(\"#uploadImg\").click();\n     });\n \t \n-    if($(\"#richText\").length > 0){\n-    tinymce.init({\n-        selector: \"#richText\",\n-        theme: \"modern\",\n-        skin: \"lightgray\",\n-        height:150,\n-        plugins: [\n-            \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-            \"save contextmenu directionality paste\"\n-        ],\n-        toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo | fontsizeselect fontselect\",\n-        menubar: false,\n-        toolbar_items_size: 'small',\n-        content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-        setup : function(ed) {\n-            ed.on('keypress change', function(ed) {\n-            \tresetValidation('.resetContentType');\n-            \tresetValidation($('#'+ed.target.id).val(tinyMCE.get(ed.target.id).getContent()).parents('form #richText'));\n-            });\n-     \t  },\n-     \t <c:if test=\"${actionOn eq 'view'}\">readonly:1</c:if>\n-    });\n-\t}\n+//     if($(\"#richText\").length > 0){\n+//     tinymce.init({\n+//         selector: \"#richText\",\n+//         theme: \"modern\",\n+//         skin: \"lightgray\",\n+//         height:150,\n+//         plugins: [\n+//             \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n+//             \"save contextmenu directionality paste\"\n+//         ],\n+//         toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo | fontsizeselect fontselect\",\n+//         menubar: false,\n+//         toolbar_items_size: 'small',\n+//         content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n+//         setup : function(ed) {\n+//             ed.on('keypress change', function(ed) {\n+//             \tresetValidation('.resetContentType');\n+//             \tresetValidation($('#'+ed.target.id).val(tinyMCE.get(ed.target.id).getContent()).parents('form #richText'));\n+//             });\n+//      \t  },\n+//      \t <c:if test=\"${actionOn eq 'view'}\">readonly:1</c:if>\n+//     });\n+// \t}\n+\n+if($(\"#richText\").length > 0){\n+   $('#richText').summernote({\n+        \n+        placeholder: '',\n+        tabsize: 2,\n+        height: 200,\n+        toolbar: [\n+        \t['font', ['bold','italic']],\n+        \t['para', ['paragraph','ul','ol']],\n+        \t['font',['underline']],\n+        \t['insert', ['link']],\n+        \t['hr'],\n+        \t['clear'],\n+        \t['cut'],\n+        \t//['copy'],", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYxOTE5OQ==", "bodyText": "please remove google.com as study website. This should ideally be populated via study_website variable, if one exists. And be removed otherwise.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411619199", "createdAt": "2020-04-20T19:03:20Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/basicInformation.jsp", "diffHunk": "@@ -217,14 +220,15 @@\n \t\t\t\t\tDescription<span class=\"requiredStar\"> *</span>\n \t\t\t\t</div>\n \t\t\t\t<div class=\"form-group\">\n-\t\t\t\t\t<textarea class=\"form-control\" id=\"editor\" name=\"description\"\n+\t\t\t\t\t<textarea class=\"form-control\" id=\"summernote\" name=\"description\"\n \t\t\t\t\t\trequired>${studyBo.description}</textarea>\n \t\t\t\t\t<div class=\"help-block with-errors red-txt\"></div>\n \t\t\t\t</div>\n \t\t\t</div>\n \t\t\t<div class=\"col-md-12 p-none\">\n \t\t\t\t<div class=\"col-md-6 pl-none\">\n-\t\t\t\t\t<div class=\"gray-xs-f mb-xs\">Study Website<span>(e.g: http://www.google.com) </span> <small>(100\n+\t\t\t\t\t<div class=\"gray-xs-f mb-xs\">\n+\t\t\t\t\t\tStudy Website<span>(e.g: http://www.google.com) </span> <small>(100", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYxOTM5MA==", "bodyText": "please remove commented out code.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411619390", "createdAt": "2020-04-20T19:03:40Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/basicInformation.jsp", "diffHunk": "@@ -314,414 +320,721 @@\n <!-- End right Content here -->\n \n <script>\n-        $(document).ready(function(){\n-        \t $('#removeUrl').css(\"visibility\",\"hidden\");\n-             var file = $('#uploadImg').val();\n-             var thumbnailImageId = $('#thumbnailImageId').val();\n-             if(file || thumbnailImageId){\n-          \t   $('#removeUrl').css(\"visibility\",\"visible\");\n-             }\n-             \n-        \t<c:if test=\"${not empty permission}\">\n-            $('#basicInfoFormId input,textarea,select').prop('disabled', true);\n-            $('#basicInfoFormId').find('.elaborateClass').addClass('linkDis');\n-            $('.elaborateHide').css('visibility','hidden');\n-            $('.imageButtonDis').prop('disabled', true);\n-           </c:if>\n-           \n-        \tvar studyType = '${studyBo.type}';\n-            if (studyType) {\n-            \tif(studyType === 'GT'){\n-            \t\t$('.thumbDivClass').show();\n-            \t}else{\n-            \t\t$('.thumbDivClass').hide();\n-            \t}\n-            }\n-        \t\n-        \tcheckRadioRequired();\n-    \t\t$(\".rejoin_radio\").click(function(){\n-    \t\t\tcheckRadioRequired();\n-    \t\t})\n-        \t\n-        \t$(\"[data-toggle=tooltip]\").tooltip();\n-\n-//             //wysiwyg editor\n-            if($(\"#editor\").length > 0){\n-            tinymce.init({\n-                selector: \"#editor\",\n-                theme: \"modern\",\n-                skin: \"lightgray\",\n-                height:180,\n-                plugins: [\n-                    \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-                    \"save contextmenu directionality paste\"\n-                ],\n-                toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n-                menubar: false,\n-                toolbar_items_size: 'small',\n-                content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-                <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n-                setup : function(ed) {\n-                    ed.on('keypress change', function(ed) {\n-                    \tresetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n-                    });\n-           \t  \t}\n-            });\n-        }\n-        // File Upload    \n-         $(\"#uploadImgbtn\").click(function(){\n-            $(\"#uploadImg\").click();\n-         });\n-            \n-        // Removing selected file upload image\n-        $(\"#removeUrl\").click(function(){\n-            $(\".thumb img\").attr(\"src\",\"/studybuilder/images/dummy-img.jpg\");\n-            $('#uploadImg').val('');\n-            $('#thumbnailImageId').val('');\n-            var file = $('#uploadImg').val();\n-            var thumbnailImageId = $('#thumbnailImageId').val();\n-            if(file || thumbnailImageId){\n-         \t\t$(\"#uploadImg\").removeAttr('required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"visible\");\n-         \t} else {\n-         \t\t$(\"#uploadImg\").attr('required', 'required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"hidden\");\n-         \t}\n-         });\n-        \n-        $(\"#completedId\").on('click', function(e){\n-        \t\te.preventDefault();\n-        \t\tvar type = $(\"input[name='type']:checked\").val();\n-        \t\tif(type && type == 'GT'){\n-        \t\t\tvalidateStudyId('',function(st){\n-                \t\tif(st){\n-                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t    }else{\n-\t\t\t\t\t\t        $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t        if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t\t\t        validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t               \t  if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t      \t                \tvar file = $('#uploadImg').val();\n-\t\t\t\t      \t                    var thumbnailImageId = $('#thumbnailImageId').val();\n-\t\t\t\t      \t                   if(file || thumbnailImageId){\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").parent().find(\".help-block\").empty();\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").removeAttr('required');\n-\t\t\t\t      \t                \t   validateStudyId('',function(st){\n-\t\t\t\t      \t                \t\t   if(st){\n-\t\t\t\t      \t\t                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t      \t\t    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t      \t\t    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t      \t    \t\t\t\t\t\t    }else{\n-\t\t\t\t      \t    \t\t\t\t\t\t          validateAppId('',function(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      if(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            var appCount = $('.appIdClass').find('.help-block').children().length;\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t            if(parseInt(appCount) >= 1){\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t\t         return false;\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            }else{\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t\t\t\t\t\t      \t\t                        \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t\t\t\t\t\t      \t\t                         }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      });\n-\t\t\t\t      \t                                }\n-\t\t\t\t      \t                       \t     }\n-\t\t\t\t      \t                  \t\t}); \n-\t\t\t\t      \t\t\t\t          }\n-\t\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t       }\n-\t\t\t\t\t\t\t     });\n-\t\t\t\t\t\t    }\n-                       \t}else{\n-                       \t\tisFromValid(\"#basicInfoFormId\");\n-                       \t}\n-                \t}); \n-                } else {\n-                \t$(\"#uploadImg\").parent().find(\".help-block\").empty();\n-                \tvalidateStudyId('',function(st){\n-                   \tif(st){\n-                   \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t}else{\n-\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t      if(isFromValid(\"#basicInfoFormId\"));\n-\t\t\t\t\t\t       validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t                   \t\t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t                   \t\t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t                    \t  \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t                    \t }\n-\t\t\t\t\t\t\t\t   }\n-\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t   });\n+\t$(document)\n+\t\t\t.ready(\n+\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"hidden\");\n+\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\tvar thumbnailImageId = $('#thumbnailImageId').val();\n+\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"visible\");\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">\n+\t\t\t\t\t\t$('#basicInfoFormId input,textarea,select').prop(\n+\t\t\t\t\t\t\t\t'disabled', true);\n+\t\t\t\t\t\t$('#basicInfoFormId').find('.elaborateClass').addClass(\n+\t\t\t\t\t\t\t\t'linkDis');\n+\t\t\t\t\t\t$('.elaborateHide').css('visibility', 'hidden');\n+\t\t\t\t\t\t$('.imageButtonDis').prop('disabled', true);\n+\t\t\t\t\t\t</c:if>\n+\n+\t\t\t\t\t\tvar studyType = '${studyBo.type}';\n+\t\t\t\t\t\tif (studyType) {\n+\t\t\t\t\t\t\tif (studyType === 'GT') {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').show();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').hide();\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t$(\".rejoin_radio\").click(function() {\n+\t\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t})\n+\n+\t\t\t\t\t\t$(\"[data-toggle=tooltip]\").tooltip();\n+\n+\t\t\t\t\t\t//             //wysiwyg editor", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 263}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYxOTc2NA==", "bodyText": "remove commented code", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411619764", "createdAt": "2020-04-20T19:04:18Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/basicInformation.jsp", "diffHunk": "@@ -314,414 +320,721 @@\n <!-- End right Content here -->\n \n <script>\n-        $(document).ready(function(){\n-        \t $('#removeUrl').css(\"visibility\",\"hidden\");\n-             var file = $('#uploadImg').val();\n-             var thumbnailImageId = $('#thumbnailImageId').val();\n-             if(file || thumbnailImageId){\n-          \t   $('#removeUrl').css(\"visibility\",\"visible\");\n-             }\n-             \n-        \t<c:if test=\"${not empty permission}\">\n-            $('#basicInfoFormId input,textarea,select').prop('disabled', true);\n-            $('#basicInfoFormId').find('.elaborateClass').addClass('linkDis');\n-            $('.elaborateHide').css('visibility','hidden');\n-            $('.imageButtonDis').prop('disabled', true);\n-           </c:if>\n-           \n-        \tvar studyType = '${studyBo.type}';\n-            if (studyType) {\n-            \tif(studyType === 'GT'){\n-            \t\t$('.thumbDivClass').show();\n-            \t}else{\n-            \t\t$('.thumbDivClass').hide();\n-            \t}\n-            }\n-        \t\n-        \tcheckRadioRequired();\n-    \t\t$(\".rejoin_radio\").click(function(){\n-    \t\t\tcheckRadioRequired();\n-    \t\t})\n-        \t\n-        \t$(\"[data-toggle=tooltip]\").tooltip();\n-\n-//             //wysiwyg editor\n-            if($(\"#editor\").length > 0){\n-            tinymce.init({\n-                selector: \"#editor\",\n-                theme: \"modern\",\n-                skin: \"lightgray\",\n-                height:180,\n-                plugins: [\n-                    \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-                    \"save contextmenu directionality paste\"\n-                ],\n-                toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n-                menubar: false,\n-                toolbar_items_size: 'small',\n-                content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-                <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n-                setup : function(ed) {\n-                    ed.on('keypress change', function(ed) {\n-                    \tresetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n-                    });\n-           \t  \t}\n-            });\n-        }\n-        // File Upload    \n-         $(\"#uploadImgbtn\").click(function(){\n-            $(\"#uploadImg\").click();\n-         });\n-            \n-        // Removing selected file upload image\n-        $(\"#removeUrl\").click(function(){\n-            $(\".thumb img\").attr(\"src\",\"/studybuilder/images/dummy-img.jpg\");\n-            $('#uploadImg').val('');\n-            $('#thumbnailImageId').val('');\n-            var file = $('#uploadImg').val();\n-            var thumbnailImageId = $('#thumbnailImageId').val();\n-            if(file || thumbnailImageId){\n-         \t\t$(\"#uploadImg\").removeAttr('required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"visible\");\n-         \t} else {\n-         \t\t$(\"#uploadImg\").attr('required', 'required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"hidden\");\n-         \t}\n-         });\n-        \n-        $(\"#completedId\").on('click', function(e){\n-        \t\te.preventDefault();\n-        \t\tvar type = $(\"input[name='type']:checked\").val();\n-        \t\tif(type && type == 'GT'){\n-        \t\t\tvalidateStudyId('',function(st){\n-                \t\tif(st){\n-                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t    }else{\n-\t\t\t\t\t\t        $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t        if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t\t\t        validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t               \t  if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t      \t                \tvar file = $('#uploadImg').val();\n-\t\t\t\t      \t                    var thumbnailImageId = $('#thumbnailImageId').val();\n-\t\t\t\t      \t                   if(file || thumbnailImageId){\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").parent().find(\".help-block\").empty();\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").removeAttr('required');\n-\t\t\t\t      \t                \t   validateStudyId('',function(st){\n-\t\t\t\t      \t                \t\t   if(st){\n-\t\t\t\t      \t\t                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t      \t\t    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t      \t\t    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t      \t    \t\t\t\t\t\t    }else{\n-\t\t\t\t      \t    \t\t\t\t\t\t          validateAppId('',function(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      if(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            var appCount = $('.appIdClass').find('.help-block').children().length;\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t            if(parseInt(appCount) >= 1){\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t\t         return false;\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            }else{\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t\t\t\t\t\t      \t\t                        \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t\t\t\t\t\t      \t\t                         }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      });\n-\t\t\t\t      \t                                }\n-\t\t\t\t      \t                       \t     }\n-\t\t\t\t      \t                  \t\t}); \n-\t\t\t\t      \t\t\t\t          }\n-\t\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t       }\n-\t\t\t\t\t\t\t     });\n-\t\t\t\t\t\t    }\n-                       \t}else{\n-                       \t\tisFromValid(\"#basicInfoFormId\");\n-                       \t}\n-                \t}); \n-                } else {\n-                \t$(\"#uploadImg\").parent().find(\".help-block\").empty();\n-                \tvalidateStudyId('',function(st){\n-                   \tif(st){\n-                   \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t}else{\n-\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t      if(isFromValid(\"#basicInfoFormId\"));\n-\t\t\t\t\t\t       validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t                   \t\t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t                   \t\t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t                    \t  \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t                    \t }\n-\t\t\t\t\t\t\t\t   }\n-\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t   });\n+\t$(document)\n+\t\t\t.ready(\n+\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"hidden\");\n+\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\tvar thumbnailImageId = $('#thumbnailImageId').val();\n+\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"visible\");\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">\n+\t\t\t\t\t\t$('#basicInfoFormId input,textarea,select').prop(\n+\t\t\t\t\t\t\t\t'disabled', true);\n+\t\t\t\t\t\t$('#basicInfoFormId').find('.elaborateClass').addClass(\n+\t\t\t\t\t\t\t\t'linkDis');\n+\t\t\t\t\t\t$('.elaborateHide').css('visibility', 'hidden');\n+\t\t\t\t\t\t$('.imageButtonDis').prop('disabled', true);\n+\t\t\t\t\t\t</c:if>\n+\n+\t\t\t\t\t\tvar studyType = '${studyBo.type}';\n+\t\t\t\t\t\tif (studyType) {\n+\t\t\t\t\t\t\tif (studyType === 'GT') {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').show();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').hide();\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t$(\".rejoin_radio\").click(function() {\n+\t\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t})\n+\n+\t\t\t\t\t\t$(\"[data-toggle=tooltip]\").tooltip();\n+\n+\t\t\t\t\t\t//             //wysiwyg editor\n+\t\t\t\t\t\t//             if($(\"#editor\").length > 0){\n+\t\t\t\t\t\t//             tinymce.init({\n+\t\t\t\t\t\t//                 selector: \"#editor\",\n+\t\t\t\t\t\t//                 theme: \"modern\",\n+\t\t\t\t\t\t//                 skin: \"lightgray\",\n+\t\t\t\t\t\t//                 height:180,\n+\t\t\t\t\t\t//                 plugins: [\n+\t\t\t\t\t\t//                     \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n+\t\t\t\t\t\t//                     \"save contextmenu directionality paste\"\n+\t\t\t\t\t\t//                 ],\n+\t\t\t\t\t\t//                 toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n+\t\t\t\t\t\t//                 menubar: false,\n+\t\t\t\t\t\t//                 toolbar_items_size: 'small',\n+\t\t\t\t\t\t//                 content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n+\t\t\t\t\t\t//                 <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n+\t\t\t\t\t\t//                 setup : function(ed) {\n+\t\t\t\t\t\t//                     ed.on('keypress change', function(ed) {\n+\t\t\t\t\t\t//  \t          resetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n+\t\t\t\t\t\t//                     });\n+\t\t\t\t\t\t//            \t  \t}\n+\t\t\t\t\t\t//             });\n+\t\t\t\t\t\t//         }\n+\n+\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote(\n+\t\t\t\t\t\t\t\t\t\t{\n+\n+\t\t\t\t\t\t\t\t\t\t\tplaceholder : '',\n+\t\t\t\t\t\t\t\t\t\t\ttabsize : 2,\n+\t\t\t\t\t\t\t\t\t\t\theight : 200,\n+\t\t\t\t\t\t\t\t\t\t\ttoolbar : [\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'font',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'bold', 'italic' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'para',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'paragraph',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ul', 'ol' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'font', [ 'underline' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'insert', [ 'link' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'hr' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'clear' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'cut' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t//['copy'],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'undo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'redo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize' ] ], ]\n+\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote('disable');\n+\t\t\t\t\t\treadonly: 1, </c:if>\n+\n+\t\t\t\t\t\t// File Upload    \n+\t\t\t\t\t\t$(\"#uploadImgbtn\").click(function() {\n+\t\t\t\t\t\t\t$(\"#uploadImg\").click();\n+\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t// Removing selected file upload image\n+\t\t\t\t\t\t$(\"#removeUrl\")\n+\t\t\t\t\t\t\t\t.click(\n+\t\t\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t\t\t$(\".thumb img\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.attr(\"src\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"/studybuilder/images/dummy-img.jpg\");\n+\t\t\t\t\t\t\t\t\t\t\t$('#uploadImg').val('');\n+\t\t\t\t\t\t\t\t\t\t\t$('#thumbnailImageId').val('');\n+\t\t\t\t\t\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\t\t\t\t\t\tvar thumbnailImageId = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'#thumbnailImageId').val();\n+\t\t\t\t\t\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#uploadImg\").removeAttr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required');\n+\t\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#uploadImg\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parents('form'));\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#removeUrl')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.css(\"visibility\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"visible\");\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#uploadImg\").attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', 'required');\n+\t\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#uploadImg\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parents('form'));\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#removeUrl').css(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"visibility\", \"hidden\");\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t/*         $( \"#summernote\" ).keypress(function() {\n+\t\t\t\t\t\t $('#summernote').parent().removeClass(\"has-danger\").removeClass(\"has-error\");\n+\t\t\t\t\t\t }); */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 357}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYyMTc5Ng==", "bodyText": "please remove", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411621796", "createdAt": "2020-04-20T19:07:47Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/consentReviewAndEConsentPage.jsp", "diffHunk": "@@ -389,15 +494,20 @@ $(document).ready(function(){\n \t\tif($(\"#typeOfCensent\").val() == \"New\"){\n \t\t\tvalid =  maxLenValEditor();\n \t\t}\n-\t\ttinyMCE.triggerSave();\n+\t\t//tinyMCE.triggerSave();\n+\t\t//$('#elaboratedRTE').summernote('code');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 629}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYyMjM5NA==", "bodyText": "code format in jsp files needs to be fixed. Indentation, spacing, they are very inconsistent and do not follow our styleguide format.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411622394", "createdAt": "2020-04-20T19:08:47Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/consentReviewAndEConsentPage.jsp", "diffHunk": "@@ -389,15 +494,20 @@ $(document).ready(function(){\n \t\tif($(\"#typeOfCensent\").val() == \"New\"){\n \t\t\tvalid =  maxLenValEditor();\n \t\t}\n-\t\ttinyMCE.triggerSave();\n+\t\t//tinyMCE.triggerSave();\n+\t\t//$('#elaboratedRTE').summernote('code');\n \t\tif(valid){\n \t\t\tif( id == \"saveId\"){\n \t\t\t\t$(\"#consentReviewFormId\").parents(\"form\").validator(\"destroy\");\n \t\t\t    $(\"#consentReviewFormId\").parents(\"form\").validator();\n \t\t\t\tsaveConsentReviewAndEConsentInfo(\"saveId\");\t\t\t\t\n \t\t\t}else if(id == \"doneId\"){\n+\t\t\t\tvar isvalid = true;\n \t\t\t\tvar retainTxt = '${studyBo.retainParticipant}';\n-\t\t\t\tif(isFromValid(\"#consentReviewFormId\") && maxLenLearnMoreEditor()){\n+\t\t\t\tif($('#shareDataPermissionsYes').is(\":checked\")){\n+\t\t\t\t\tisvalid = maxLenLearnMoreEditor();\n+\t\t\t\t\t}\t\t\t\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 641}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYyMjQ5MQ==", "bodyText": "remove", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411622491", "createdAt": "2020-04-20T19:08:55Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/consentReviewAndEConsentPage.jsp", "diffHunk": "@@ -428,8 +538,9 @@ $(document).ready(function(){\n \t\t\t\t\t\t    \tif(consentDocumentType == \"Auto\"){\n \t\t\t\t\t\t    \t\tsaveConsentReviewAndEConsentInfo(\"doneId\");\n \t\t\t\t\t\t    \t}else{\n-\t\t\t\t\t\t    \t\tvar content = tinymce.get('newDocumentDivId').getContent();\n-\t\t\t\t\t\t    \t\tif(content != null && content !='' && typeof content != 'undefined'){\n+\t\t\t\t\t\t    \t\t//var content = tinymce.get('newDocumentDivId').getContent();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 652}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYyMjYyNg==", "bodyText": "remove all commented out code", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411622626", "createdAt": "2020-04-20T19:09:10Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/consentReviewAndEConsentPage.jsp", "diffHunk": "@@ -538,62 +649,120 @@ $(document).ready(function(){\n        // $(\"#autoCreateDivId\").niceScroll({cursorcolor:\"#d5dee3\",cursorborder:\"1px solid #d5dee3\"});\n     }\n     //createNewConsentDocument\n-    function createNewConsentDocument(){\n-    \ttinymce.init({\n-             selector: \"#newDocumentDivId\",\n-             theme: \"modern\",\n-             skin: \"lightgray\",\n-             height:180,\n-             plugins: [\n-                 \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-                 \"save contextmenu directionality paste\"\n-             ],\n-             toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo | fontsizeselect fontselect\",\n-             menubar: false,\n-             toolbar_items_size: 'small',\n-             content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-             entity_encoding : \"raw\",\n-             setup : function(ed) {\n-                 ed.on('change', function(ed) {\n-               \t\t  if(tinyMCE.get(ed.target.id).getContent() != ''){\n-               \t\t\t$('#newDocumentDivId').parent().removeClass(\"has-danger\").removeClass(\"has-error\");\n-               \t        $('#newDocumentDivId').parent().find(\".help-block\").html(\"\");\n-               \t\t  }\n-                 });\n-        \t  \t},\n-             <c:if test=\"${permission eq 'view'}\">readonly:1</c:if>\n-         });\n+//     function createNewConsentDocument(){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 696}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYyMzAyOA==", "bodyText": "indentation seems wrong, please fix.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411623028", "createdAt": "2020-04-20T19:09:51Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/formStep.jsp", "diffHunk": "@@ -349,6 +349,9 @@ $(document).ready(function(){\n  \t    \"paging\":false,\n  \t    \"info\": false,\n  \t    \"filter\": false,\n+ \t   language: {\n+         \t\"zeroRecords\": \"You haven't created any content yet.\",\n+\t\t    },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYyMzI0Nw==", "bodyText": "indentation is wrong, please fix", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411623247", "createdAt": "2020-04-20T19:10:12Z", "author": {"login": "zohrehj"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/questionnaire.jsp", "diffHunk": "@@ -1706,6 +1706,9 @@ $(document).ready(function() {\n \t    \"info\": false,\n \t    \"filter\": false,\n \t     rowReorder: reorder,\n+\t     language: {\n+         \t\"zeroRecords\": \"You haven't created any content yet.\",\n+\t    },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NzUwNDk0", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#pullrequestreview-396750494", "createdAt": "2020-04-20T19:32:03Z", "commit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxOTozMjowM1rOGIkRPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDo0OTo0NFrOGInGmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYzNjAzMA==", "bodyText": "Can this be rewritten with \"try-with\"?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411636030", "createdAt": "2020-04-20T19:32:03Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/LoginDAOImpl.java", "diffHunk": "@@ -537,4 +540,29 @@ public String updateUser(UserBO userBO) {\n     logger.info(\"LoginDAOImpl - updateUser() - Ends\");\n     return result;\n   }\n+\n+  @Override\n+  public String updateUserForResetPassword(UserBO userBO) {\n+    logger.info(\"LoginDAOImpl - updateUserForResetPassword() - Starts\");\n+    Session session = null;\n+    String result = FdahpStudyDesignerConstants.FAILURE;\n+    try {\n+      session = hibernateTemplate.getSessionFactory().openSession();\n+      transaction = session.beginTransaction();\n+      session.saveOrUpdate(userBO);\n+      transaction.commit();\n+      result = FdahpStudyDesignerConstants.SUCCESS;\n+    } catch (Exception e) {\n+      if (transaction != null) {\n+        transaction.rollback();\n+      }\n+      logger.error(\"LoginDAOImpl - updateUserForResetPassword() - ERROR \", e);\n+    } finally {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYzODYyNQ==", "bodyText": "Combine allocation and initialization, none of these variable are used outside of the try", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411638625", "createdAt": "2020-04-20T19:36:26Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/LoginServiceImpl.java", "diffHunk": "@@ -570,4 +569,88 @@ public String validateAccessCode(String securityToken, String accessCode) {\n     logger.info(\"LoginServiceImpl - checkSecurityToken() - Ends\");\n     return result;\n   }\n+\n+  @Override\n+  public String sendLockedAccountPasswordResetLinkToMail(\n+      String email, String oldEmail, String type) {\n+\n+    logger.info(\"LoginServiceImpl - sendLockedAccountPasswordResetLinkToMail - Starts\");\n+    Map<String, String> propMap = FdahpStudyDesignerUtil.getAppProperties();\n+    String passwordResetToken = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYzOTUzOQ==", "bodyText": "It looks like this should just be the conditional for line 600, since you are asserting userdetails in non-null on this line, so it can only be null if this condition is true.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411639539", "createdAt": "2020-04-20T19:37:56Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/LoginServiceImpl.java", "diffHunk": "@@ -570,4 +569,88 @@ public String validateAccessCode(String securityToken, String accessCode) {\n     logger.info(\"LoginServiceImpl - checkSecurityToken() - Ends\");\n     return result;\n   }\n+\n+  @Override\n+  public String sendLockedAccountPasswordResetLinkToMail(\n+      String email, String oldEmail, String type) {\n+\n+    logger.info(\"LoginServiceImpl - sendLockedAccountPasswordResetLinkToMail - Starts\");\n+    Map<String, String> propMap = FdahpStudyDesignerUtil.getAppProperties();\n+    String passwordResetToken = null;\n+    String message = propMap.get(\"user.forgot.error.msg\");\n+    boolean flag = false;\n+    UserBO userdetails = null;\n+    String accessCode = \"\";\n+    Map<String, String> keyValueForSubject = null;\n+    Map<String, String> keyValueForSubject2 = null;\n+    String dynamicContent = \"\";\n+    String acceptLinkMail = \"\";\n+    int passwordResetLinkExpirationInHour =\n+        Integer.parseInt(propMap.get(\"accountlocked.resetLink.expiration.in.hour\"));\n+    String customerCareMail = \"\";\n+    String contact = \"\";\n+    try {\n+      passwordResetToken = RandomStringUtils.randomAlphanumeric(10);\n+      accessCode = RandomStringUtils.randomAlphanumeric(6);\n+      if (!StringUtils.isEmpty(passwordResetToken)) {\n+        userdetails = loginDAO.getValidUserByEmail(email);\n+        if (\"\".equals(type) && userdetails.getEmailChanged()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY0MDIyMA==", "bodyText": "Can you extract the contents of this block to a function so you can return instead of having deeply nested if statements with no else?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411640220", "createdAt": "2020-04-20T19:39:01Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/LoginServiceImpl.java", "diffHunk": "@@ -570,4 +569,88 @@ public String validateAccessCode(String securityToken, String accessCode) {\n     logger.info(\"LoginServiceImpl - checkSecurityToken() - Ends\");\n     return result;\n   }\n+\n+  @Override\n+  public String sendLockedAccountPasswordResetLinkToMail(\n+      String email, String oldEmail, String type) {\n+\n+    logger.info(\"LoginServiceImpl - sendLockedAccountPasswordResetLinkToMail - Starts\");\n+    Map<String, String> propMap = FdahpStudyDesignerUtil.getAppProperties();\n+    String passwordResetToken = null;\n+    String message = propMap.get(\"user.forgot.error.msg\");\n+    boolean flag = false;\n+    UserBO userdetails = null;\n+    String accessCode = \"\";\n+    Map<String, String> keyValueForSubject = null;\n+    Map<String, String> keyValueForSubject2 = null;\n+    String dynamicContent = \"\";\n+    String acceptLinkMail = \"\";\n+    int passwordResetLinkExpirationInHour =\n+        Integer.parseInt(propMap.get(\"accountlocked.resetLink.expiration.in.hour\"));\n+    String customerCareMail = \"\";\n+    String contact = \"\";\n+    try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY0MzI2OQ==", "bodyText": "Why convert to a hashset and then back to a list?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411643269", "createdAt": "2020-04-20T19:44:08Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/NotificationServiceImpl.java", "diffHunk": "@@ -177,7 +178,21 @@ public void setStudyDAO(StudyDAO studyDAO) {\n   @Override\n   public List<String> getGatwayAppList() {\n     logger.info(\"NotificationServiceImpl - saveOrUpdateNotification - Starts\");\n-    List<String> gatewayAppList = new ArrayList<>(new HashSet(notificationDAO.getGatwayAppList()));\n+    List<String> gatewayAppList = null;\n+    try {\n+      gatewayAppList = new ArrayList<>(new HashSet(notificationDAO.getGatwayAppList()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY0NDg1NQ==", "bodyText": "Are you expecting studies with duplicate names? Otherwise you just just define a Comparator that uses getName in its compare function", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411644855", "createdAt": "2020-04-20T19:46:45Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/StudyServiceImpl.java", "diffHunk": "@@ -245,14 +248,33 @@ public boolean deleteStudyByCustomStudyId(String customStudyId) {\n   @Override\n   public List<StudyBo> getAllStudyList() {\n     logger.info(\"StudyServiceImpl - getAllStudyList() - Starts\");\n-    List<StudyBo> studyBOList = null;\n+    List<StudyBo> studyBOList = null, sortedStudyBOList = new ArrayList<>();\n+    HashMap<String, StudyBo> studyMap = new HashMap<>();\n+    ArrayList<String> studyNamelist = null;\n+\n     try {\n       studyBOList = studyDAO.getAllStudyList();\n+\n+      for (StudyBo study : studyBOList) {\n+        studyMap.put(study.getName(), study);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY0NTA5Mw==", "bodyText": "Combine declaration and initialization", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411645093", "createdAt": "2020-04-20T19:47:10Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/StudyServiceImpl.java", "diffHunk": "@@ -245,14 +248,33 @@ public boolean deleteStudyByCustomStudyId(String customStudyId) {\n   @Override\n   public List<StudyBo> getAllStudyList() {\n     logger.info(\"StudyServiceImpl - getAllStudyList() - Starts\");\n-    List<StudyBo> studyBOList = null;\n+    List<StudyBo> studyBOList = null, sortedStudyBOList = new ArrayList<>();\n+    HashMap<String, StudyBo> studyMap = new HashMap<>();\n+    ArrayList<String> studyNamelist = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY1MDc3OQ==", "bodyText": "inconsistent quotes around key", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411650779", "createdAt": "2020-04-20T19:56:48Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/activeTaskListPage.jsp", "diffHunk": "@@ -119,6 +119,9 @@ $(document).ready(function(){\n                                ],\n                   \"order\": [[ 0, \"desc\" ]],\n                  \"info\" : false, \n+                 language: {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY1MTUwMg==", "bodyText": "remove unnecessary vertical whitespace, here and above", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411651502", "createdAt": "2020-04-20T19:58:06Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/addOrEditResourcePage.jsp", "diffHunk": "@@ -411,29 +415,58 @@ $(document).ready(function(){\n        $(\"#uploadImg\").click();\n     });\n \t \n-    if($(\"#richText\").length > 0){\n-    tinymce.init({\n-        selector: \"#richText\",\n-        theme: \"modern\",\n-        skin: \"lightgray\",\n-        height:150,\n-        plugins: [\n-            \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-            \"save contextmenu directionality paste\"\n-        ],\n-        toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo | fontsizeselect fontselect\",\n-        menubar: false,\n-        toolbar_items_size: 'small',\n-        content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-        setup : function(ed) {\n-            ed.on('keypress change', function(ed) {\n-            \tresetValidation('.resetContentType');\n-            \tresetValidation($('#'+ed.target.id).val(tinyMCE.get(ed.target.id).getContent()).parents('form #richText'));\n-            });\n-     \t  },\n-     \t <c:if test=\"${actionOn eq 'view'}\">readonly:1</c:if>\n-    });\n-\t}\n+//     if($(\"#richText\").length > 0){\n+//     tinymce.init({\n+//         selector: \"#richText\",\n+//         theme: \"modern\",\n+//         skin: \"lightgray\",\n+//         height:150,\n+//         plugins: [\n+//             \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n+//             \"save contextmenu directionality paste\"\n+//         ],\n+//         toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo | fontsizeselect fontselect\",\n+//         menubar: false,\n+//         toolbar_items_size: 'small',\n+//         content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n+//         setup : function(ed) {\n+//             ed.on('keypress change', function(ed) {\n+//             \tresetValidation('.resetContentType');\n+//             \tresetValidation($('#'+ed.target.id).val(tinyMCE.get(ed.target.id).getContent()).parents('form #richText'));\n+//             });\n+//      \t  },\n+//      \t <c:if test=\"${actionOn eq 'view'}\">readonly:1</c:if>\n+//     });\n+// \t}\n+\n+if($(\"#richText\").length > 0){\n+   $('#richText').summernote({\n+        \n+        placeholder: '',\n+        tabsize: 2,\n+        height: 200,\n+        toolbar: [\n+        \t['font', ['bold','italic']],\n+        \t['para', ['paragraph','ul','ol']],\n+        \t['font',['underline']],\n+        \t['insert', ['link']],\n+        \t['hr'],\n+        \t['clear'],\n+        \t['cut'],\n+        \t//['copy'],\n+        \t['undo'],\n+        \t['redo'],\n+        \t['fontname', ['fontname']],\n+        \t['fontsize', ['fontsize']],\n+        \t]\n+         \n+  \t \n+      });\n+}\n+   <c:if test=\"${actionOn eq 'view'}\">$('#richText').summernote('disable');readonly:1,</c:if> \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY1MjY4MA==", "bodyText": "This seems to be checking if the editor is empty, not checking a maximum length", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411652680", "createdAt": "2020-04-20T20:00:00Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/addOrEditResourcePage.jsp", "diffHunk": "@@ -873,4 +906,14 @@ function toJSDate( dateTime ) {\n     return new Date(date[2], (date[0]-1), date[1]);\n }\n </c:if>\n+\n+function maxLenValEditor() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 100}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY1MzMwNg==", "bodyText": "Please fix indentation", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411653306", "createdAt": "2020-04-20T20:01:08Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/basicInformation.jsp", "diffHunk": "@@ -314,414 +320,721 @@\n <!-- End right Content here -->\n \n <script>\n-        $(document).ready(function(){\n-        \t $('#removeUrl').css(\"visibility\",\"hidden\");\n-             var file = $('#uploadImg').val();\n-             var thumbnailImageId = $('#thumbnailImageId').val();\n-             if(file || thumbnailImageId){\n-          \t   $('#removeUrl').css(\"visibility\",\"visible\");\n-             }\n-             \n-        \t<c:if test=\"${not empty permission}\">\n-            $('#basicInfoFormId input,textarea,select').prop('disabled', true);\n-            $('#basicInfoFormId').find('.elaborateClass').addClass('linkDis');\n-            $('.elaborateHide').css('visibility','hidden');\n-            $('.imageButtonDis').prop('disabled', true);\n-           </c:if>\n-           \n-        \tvar studyType = '${studyBo.type}';\n-            if (studyType) {\n-            \tif(studyType === 'GT'){\n-            \t\t$('.thumbDivClass').show();\n-            \t}else{\n-            \t\t$('.thumbDivClass').hide();\n-            \t}\n-            }\n-        \t\n-        \tcheckRadioRequired();\n-    \t\t$(\".rejoin_radio\").click(function(){\n-    \t\t\tcheckRadioRequired();\n-    \t\t})\n-        \t\n-        \t$(\"[data-toggle=tooltip]\").tooltip();\n-\n-//             //wysiwyg editor\n-            if($(\"#editor\").length > 0){\n-            tinymce.init({\n-                selector: \"#editor\",\n-                theme: \"modern\",\n-                skin: \"lightgray\",\n-                height:180,\n-                plugins: [\n-                    \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-                    \"save contextmenu directionality paste\"\n-                ],\n-                toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n-                menubar: false,\n-                toolbar_items_size: 'small',\n-                content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-                <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n-                setup : function(ed) {\n-                    ed.on('keypress change', function(ed) {\n-                    \tresetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n-                    });\n-           \t  \t}\n-            });\n-        }\n-        // File Upload    \n-         $(\"#uploadImgbtn\").click(function(){\n-            $(\"#uploadImg\").click();\n-         });\n-            \n-        // Removing selected file upload image\n-        $(\"#removeUrl\").click(function(){\n-            $(\".thumb img\").attr(\"src\",\"/studybuilder/images/dummy-img.jpg\");\n-            $('#uploadImg').val('');\n-            $('#thumbnailImageId').val('');\n-            var file = $('#uploadImg').val();\n-            var thumbnailImageId = $('#thumbnailImageId').val();\n-            if(file || thumbnailImageId){\n-         \t\t$(\"#uploadImg\").removeAttr('required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"visible\");\n-         \t} else {\n-         \t\t$(\"#uploadImg\").attr('required', 'required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"hidden\");\n-         \t}\n-         });\n-        \n-        $(\"#completedId\").on('click', function(e){\n-        \t\te.preventDefault();\n-        \t\tvar type = $(\"input[name='type']:checked\").val();\n-        \t\tif(type && type == 'GT'){\n-        \t\t\tvalidateStudyId('',function(st){\n-                \t\tif(st){\n-                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t    }else{\n-\t\t\t\t\t\t        $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t        if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t\t\t        validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t               \t  if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t      \t                \tvar file = $('#uploadImg').val();\n-\t\t\t\t      \t                    var thumbnailImageId = $('#thumbnailImageId').val();\n-\t\t\t\t      \t                   if(file || thumbnailImageId){\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").parent().find(\".help-block\").empty();\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").removeAttr('required');\n-\t\t\t\t      \t                \t   validateStudyId('',function(st){\n-\t\t\t\t      \t                \t\t   if(st){\n-\t\t\t\t      \t\t                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t      \t\t    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t      \t\t    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t      \t    \t\t\t\t\t\t    }else{\n-\t\t\t\t      \t    \t\t\t\t\t\t          validateAppId('',function(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      if(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            var appCount = $('.appIdClass').find('.help-block').children().length;\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t            if(parseInt(appCount) >= 1){\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t\t         return false;\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            }else{\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t\t\t\t\t\t      \t\t                        \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t\t\t\t\t\t      \t\t                         }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      });\n-\t\t\t\t      \t                                }\n-\t\t\t\t      \t                       \t     }\n-\t\t\t\t      \t                  \t\t}); \n-\t\t\t\t      \t\t\t\t          }\n-\t\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t       }\n-\t\t\t\t\t\t\t     });\n-\t\t\t\t\t\t    }\n-                       \t}else{\n-                       \t\tisFromValid(\"#basicInfoFormId\");\n-                       \t}\n-                \t}); \n-                } else {\n-                \t$(\"#uploadImg\").parent().find(\".help-block\").empty();\n-                \tvalidateStudyId('',function(st){\n-                   \tif(st){\n-                   \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t}else{\n-\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t      if(isFromValid(\"#basicInfoFormId\"));\n-\t\t\t\t\t\t       validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t                   \t\t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t                   \t\t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t                    \t  \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t                    \t }\n-\t\t\t\t\t\t\t\t   }\n-\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t   });\n+\t$(document)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 228}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY1NTMwOQ==", "bodyText": "This whole block is equivalent to\n$('.thumbDivClass').toggle('${studyBo.type}' === 'GT')", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411655309", "createdAt": "2020-04-20T20:04:27Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/basicInformation.jsp", "diffHunk": "@@ -314,414 +320,721 @@\n <!-- End right Content here -->\n \n <script>\n-        $(document).ready(function(){\n-        \t $('#removeUrl').css(\"visibility\",\"hidden\");\n-             var file = $('#uploadImg').val();\n-             var thumbnailImageId = $('#thumbnailImageId').val();\n-             if(file || thumbnailImageId){\n-          \t   $('#removeUrl').css(\"visibility\",\"visible\");\n-             }\n-             \n-        \t<c:if test=\"${not empty permission}\">\n-            $('#basicInfoFormId input,textarea,select').prop('disabled', true);\n-            $('#basicInfoFormId').find('.elaborateClass').addClass('linkDis');\n-            $('.elaborateHide').css('visibility','hidden');\n-            $('.imageButtonDis').prop('disabled', true);\n-           </c:if>\n-           \n-        \tvar studyType = '${studyBo.type}';\n-            if (studyType) {\n-            \tif(studyType === 'GT'){\n-            \t\t$('.thumbDivClass').show();\n-            \t}else{\n-            \t\t$('.thumbDivClass').hide();\n-            \t}\n-            }\n-        \t\n-        \tcheckRadioRequired();\n-    \t\t$(\".rejoin_radio\").click(function(){\n-    \t\t\tcheckRadioRequired();\n-    \t\t})\n-        \t\n-        \t$(\"[data-toggle=tooltip]\").tooltip();\n-\n-//             //wysiwyg editor\n-            if($(\"#editor\").length > 0){\n-            tinymce.init({\n-                selector: \"#editor\",\n-                theme: \"modern\",\n-                skin: \"lightgray\",\n-                height:180,\n-                plugins: [\n-                    \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-                    \"save contextmenu directionality paste\"\n-                ],\n-                toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n-                menubar: false,\n-                toolbar_items_size: 'small',\n-                content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-                <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n-                setup : function(ed) {\n-                    ed.on('keypress change', function(ed) {\n-                    \tresetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n-                    });\n-           \t  \t}\n-            });\n-        }\n-        // File Upload    \n-         $(\"#uploadImgbtn\").click(function(){\n-            $(\"#uploadImg\").click();\n-         });\n-            \n-        // Removing selected file upload image\n-        $(\"#removeUrl\").click(function(){\n-            $(\".thumb img\").attr(\"src\",\"/studybuilder/images/dummy-img.jpg\");\n-            $('#uploadImg').val('');\n-            $('#thumbnailImageId').val('');\n-            var file = $('#uploadImg').val();\n-            var thumbnailImageId = $('#thumbnailImageId').val();\n-            if(file || thumbnailImageId){\n-         \t\t$(\"#uploadImg\").removeAttr('required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"visible\");\n-         \t} else {\n-         \t\t$(\"#uploadImg\").attr('required', 'required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"hidden\");\n-         \t}\n-         });\n-        \n-        $(\"#completedId\").on('click', function(e){\n-        \t\te.preventDefault();\n-        \t\tvar type = $(\"input[name='type']:checked\").val();\n-        \t\tif(type && type == 'GT'){\n-        \t\t\tvalidateStudyId('',function(st){\n-                \t\tif(st){\n-                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t    }else{\n-\t\t\t\t\t\t        $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t        if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t\t\t        validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t               \t  if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t      \t                \tvar file = $('#uploadImg').val();\n-\t\t\t\t      \t                    var thumbnailImageId = $('#thumbnailImageId').val();\n-\t\t\t\t      \t                   if(file || thumbnailImageId){\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").parent().find(\".help-block\").empty();\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").removeAttr('required');\n-\t\t\t\t      \t                \t   validateStudyId('',function(st){\n-\t\t\t\t      \t                \t\t   if(st){\n-\t\t\t\t      \t\t                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t      \t\t    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t      \t\t    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t      \t    \t\t\t\t\t\t    }else{\n-\t\t\t\t      \t    \t\t\t\t\t\t          validateAppId('',function(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      if(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            var appCount = $('.appIdClass').find('.help-block').children().length;\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t            if(parseInt(appCount) >= 1){\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t\t         return false;\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            }else{\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t\t\t\t\t\t      \t\t                        \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t\t\t\t\t\t      \t\t                         }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      });\n-\t\t\t\t      \t                                }\n-\t\t\t\t      \t                       \t     }\n-\t\t\t\t      \t                  \t\t}); \n-\t\t\t\t      \t\t\t\t          }\n-\t\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t       }\n-\t\t\t\t\t\t\t     });\n-\t\t\t\t\t\t    }\n-                       \t}else{\n-                       \t\tisFromValid(\"#basicInfoFormId\");\n-                       \t}\n-                \t}); \n-                } else {\n-                \t$(\"#uploadImg\").parent().find(\".help-block\").empty();\n-                \tvalidateStudyId('',function(st){\n-                   \tif(st){\n-                   \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t}else{\n-\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t      if(isFromValid(\"#basicInfoFormId\"));\n-\t\t\t\t\t\t       validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t                   \t\t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t                   \t\t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t                    \t  \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t                    \t }\n-\t\t\t\t\t\t\t\t   }\n-\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t   });\n+\t$(document)\n+\t\t\t.ready(\n+\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"hidden\");\n+\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\tvar thumbnailImageId = $('#thumbnailImageId').val();\n+\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"visible\");\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">\n+\t\t\t\t\t\t$('#basicInfoFormId input,textarea,select').prop(\n+\t\t\t\t\t\t\t\t'disabled', true);\n+\t\t\t\t\t\t$('#basicInfoFormId').find('.elaborateClass').addClass(\n+\t\t\t\t\t\t\t\t'linkDis');\n+\t\t\t\t\t\t$('.elaborateHide').css('visibility', 'hidden');\n+\t\t\t\t\t\t$('.imageButtonDis').prop('disabled', true);\n+\t\t\t\t\t\t</c:if>\n+\n+\t\t\t\t\t\tvar studyType = '${studyBo.type}';\n+\t\t\t\t\t\tif (studyType) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 248}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY1NTkyNg==", "bodyText": "This syntax is invalid", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411655926", "createdAt": "2020-04-20T20:05:27Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/basicInformation.jsp", "diffHunk": "@@ -314,414 +320,721 @@\n <!-- End right Content here -->\n \n <script>\n-        $(document).ready(function(){\n-        \t $('#removeUrl').css(\"visibility\",\"hidden\");\n-             var file = $('#uploadImg').val();\n-             var thumbnailImageId = $('#thumbnailImageId').val();\n-             if(file || thumbnailImageId){\n-          \t   $('#removeUrl').css(\"visibility\",\"visible\");\n-             }\n-             \n-        \t<c:if test=\"${not empty permission}\">\n-            $('#basicInfoFormId input,textarea,select').prop('disabled', true);\n-            $('#basicInfoFormId').find('.elaborateClass').addClass('linkDis');\n-            $('.elaborateHide').css('visibility','hidden');\n-            $('.imageButtonDis').prop('disabled', true);\n-           </c:if>\n-           \n-        \tvar studyType = '${studyBo.type}';\n-            if (studyType) {\n-            \tif(studyType === 'GT'){\n-            \t\t$('.thumbDivClass').show();\n-            \t}else{\n-            \t\t$('.thumbDivClass').hide();\n-            \t}\n-            }\n-        \t\n-        \tcheckRadioRequired();\n-    \t\t$(\".rejoin_radio\").click(function(){\n-    \t\t\tcheckRadioRequired();\n-    \t\t})\n-        \t\n-        \t$(\"[data-toggle=tooltip]\").tooltip();\n-\n-//             //wysiwyg editor\n-            if($(\"#editor\").length > 0){\n-            tinymce.init({\n-                selector: \"#editor\",\n-                theme: \"modern\",\n-                skin: \"lightgray\",\n-                height:180,\n-                plugins: [\n-                    \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-                    \"save contextmenu directionality paste\"\n-                ],\n-                toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n-                menubar: false,\n-                toolbar_items_size: 'small',\n-                content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-                <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n-                setup : function(ed) {\n-                    ed.on('keypress change', function(ed) {\n-                    \tresetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n-                    });\n-           \t  \t}\n-            });\n-        }\n-        // File Upload    \n-         $(\"#uploadImgbtn\").click(function(){\n-            $(\"#uploadImg\").click();\n-         });\n-            \n-        // Removing selected file upload image\n-        $(\"#removeUrl\").click(function(){\n-            $(\".thumb img\").attr(\"src\",\"/studybuilder/images/dummy-img.jpg\");\n-            $('#uploadImg').val('');\n-            $('#thumbnailImageId').val('');\n-            var file = $('#uploadImg').val();\n-            var thumbnailImageId = $('#thumbnailImageId').val();\n-            if(file || thumbnailImageId){\n-         \t\t$(\"#uploadImg\").removeAttr('required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"visible\");\n-         \t} else {\n-         \t\t$(\"#uploadImg\").attr('required', 'required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"hidden\");\n-         \t}\n-         });\n-        \n-        $(\"#completedId\").on('click', function(e){\n-        \t\te.preventDefault();\n-        \t\tvar type = $(\"input[name='type']:checked\").val();\n-        \t\tif(type && type == 'GT'){\n-        \t\t\tvalidateStudyId('',function(st){\n-                \t\tif(st){\n-                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t    }else{\n-\t\t\t\t\t\t        $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t        if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t\t\t        validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t               \t  if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t      \t                \tvar file = $('#uploadImg').val();\n-\t\t\t\t      \t                    var thumbnailImageId = $('#thumbnailImageId').val();\n-\t\t\t\t      \t                   if(file || thumbnailImageId){\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").parent().find(\".help-block\").empty();\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").removeAttr('required');\n-\t\t\t\t      \t                \t   validateStudyId('',function(st){\n-\t\t\t\t      \t                \t\t   if(st){\n-\t\t\t\t      \t\t                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t      \t\t    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t      \t\t    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t      \t    \t\t\t\t\t\t    }else{\n-\t\t\t\t      \t    \t\t\t\t\t\t          validateAppId('',function(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      if(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            var appCount = $('.appIdClass').find('.help-block').children().length;\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t            if(parseInt(appCount) >= 1){\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t\t         return false;\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            }else{\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t\t\t\t\t\t      \t\t                        \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t\t\t\t\t\t      \t\t                         }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      });\n-\t\t\t\t      \t                                }\n-\t\t\t\t      \t                       \t     }\n-\t\t\t\t      \t                  \t\t}); \n-\t\t\t\t      \t\t\t\t          }\n-\t\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t       }\n-\t\t\t\t\t\t\t     });\n-\t\t\t\t\t\t    }\n-                       \t}else{\n-                       \t\tisFromValid(\"#basicInfoFormId\");\n-                       \t}\n-                \t}); \n-                } else {\n-                \t$(\"#uploadImg\").parent().find(\".help-block\").empty();\n-                \tvalidateStudyId('',function(st){\n-                   \tif(st){\n-                   \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t}else{\n-\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t      if(isFromValid(\"#basicInfoFormId\"));\n-\t\t\t\t\t\t       validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t                   \t\t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t                   \t\t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t                    \t  \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t                    \t }\n-\t\t\t\t\t\t\t\t   }\n-\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t   });\n+\t$(document)\n+\t\t\t.ready(\n+\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"hidden\");\n+\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\tvar thumbnailImageId = $('#thumbnailImageId').val();\n+\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"visible\");\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">\n+\t\t\t\t\t\t$('#basicInfoFormId input,textarea,select').prop(\n+\t\t\t\t\t\t\t\t'disabled', true);\n+\t\t\t\t\t\t$('#basicInfoFormId').find('.elaborateClass').addClass(\n+\t\t\t\t\t\t\t\t'linkDis');\n+\t\t\t\t\t\t$('.elaborateHide').css('visibility', 'hidden');\n+\t\t\t\t\t\t$('.imageButtonDis').prop('disabled', true);\n+\t\t\t\t\t\t</c:if>\n+\n+\t\t\t\t\t\tvar studyType = '${studyBo.type}';\n+\t\t\t\t\t\tif (studyType) {\n+\t\t\t\t\t\t\tif (studyType === 'GT') {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').show();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').hide();\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t$(\".rejoin_radio\").click(function() {\n+\t\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t})\n+\n+\t\t\t\t\t\t$(\"[data-toggle=tooltip]\").tooltip();\n+\n+\t\t\t\t\t\t//             //wysiwyg editor\n+\t\t\t\t\t\t//             if($(\"#editor\").length > 0){\n+\t\t\t\t\t\t//             tinymce.init({\n+\t\t\t\t\t\t//                 selector: \"#editor\",\n+\t\t\t\t\t\t//                 theme: \"modern\",\n+\t\t\t\t\t\t//                 skin: \"lightgray\",\n+\t\t\t\t\t\t//                 height:180,\n+\t\t\t\t\t\t//                 plugins: [\n+\t\t\t\t\t\t//                     \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n+\t\t\t\t\t\t//                     \"save contextmenu directionality paste\"\n+\t\t\t\t\t\t//                 ],\n+\t\t\t\t\t\t//                 toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n+\t\t\t\t\t\t//                 menubar: false,\n+\t\t\t\t\t\t//                 toolbar_items_size: 'small',\n+\t\t\t\t\t\t//                 content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n+\t\t\t\t\t\t//                 <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n+\t\t\t\t\t\t//                 setup : function(ed) {\n+\t\t\t\t\t\t//                     ed.on('keypress change', function(ed) {\n+\t\t\t\t\t\t//  \t          resetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n+\t\t\t\t\t\t//                     });\n+\t\t\t\t\t\t//            \t  \t}\n+\t\t\t\t\t\t//             });\n+\t\t\t\t\t\t//         }\n+\n+\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote(\n+\t\t\t\t\t\t\t\t\t\t{\n+\n+\t\t\t\t\t\t\t\t\t\t\tplaceholder : '',\n+\t\t\t\t\t\t\t\t\t\t\ttabsize : 2,\n+\t\t\t\t\t\t\t\t\t\t\theight : 200,\n+\t\t\t\t\t\t\t\t\t\t\ttoolbar : [\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'font',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'bold', 'italic' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'para',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'paragraph',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ul', 'ol' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'font', [ 'underline' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'insert', [ 'link' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'hr' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'clear' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'cut' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t//['copy'],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'undo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'redo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize' ] ], ]\n+\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote('disable');\n+\t\t\t\t\t\treadonly: 1, </c:if>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 318}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY1NjI5OA==", "bodyText": "Weren't these values just set to ''?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411656298", "createdAt": "2020-04-20T20:06:02Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/basicInformation.jsp", "diffHunk": "@@ -314,414 +320,721 @@\n <!-- End right Content here -->\n \n <script>\n-        $(document).ready(function(){\n-        \t $('#removeUrl').css(\"visibility\",\"hidden\");\n-             var file = $('#uploadImg').val();\n-             var thumbnailImageId = $('#thumbnailImageId').val();\n-             if(file || thumbnailImageId){\n-          \t   $('#removeUrl').css(\"visibility\",\"visible\");\n-             }\n-             \n-        \t<c:if test=\"${not empty permission}\">\n-            $('#basicInfoFormId input,textarea,select').prop('disabled', true);\n-            $('#basicInfoFormId').find('.elaborateClass').addClass('linkDis');\n-            $('.elaborateHide').css('visibility','hidden');\n-            $('.imageButtonDis').prop('disabled', true);\n-           </c:if>\n-           \n-        \tvar studyType = '${studyBo.type}';\n-            if (studyType) {\n-            \tif(studyType === 'GT'){\n-            \t\t$('.thumbDivClass').show();\n-            \t}else{\n-            \t\t$('.thumbDivClass').hide();\n-            \t}\n-            }\n-        \t\n-        \tcheckRadioRequired();\n-    \t\t$(\".rejoin_radio\").click(function(){\n-    \t\t\tcheckRadioRequired();\n-    \t\t})\n-        \t\n-        \t$(\"[data-toggle=tooltip]\").tooltip();\n-\n-//             //wysiwyg editor\n-            if($(\"#editor\").length > 0){\n-            tinymce.init({\n-                selector: \"#editor\",\n-                theme: \"modern\",\n-                skin: \"lightgray\",\n-                height:180,\n-                plugins: [\n-                    \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-                    \"save contextmenu directionality paste\"\n-                ],\n-                toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n-                menubar: false,\n-                toolbar_items_size: 'small',\n-                content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-                <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n-                setup : function(ed) {\n-                    ed.on('keypress change', function(ed) {\n-                    \tresetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n-                    });\n-           \t  \t}\n-            });\n-        }\n-        // File Upload    \n-         $(\"#uploadImgbtn\").click(function(){\n-            $(\"#uploadImg\").click();\n-         });\n-            \n-        // Removing selected file upload image\n-        $(\"#removeUrl\").click(function(){\n-            $(\".thumb img\").attr(\"src\",\"/studybuilder/images/dummy-img.jpg\");\n-            $('#uploadImg').val('');\n-            $('#thumbnailImageId').val('');\n-            var file = $('#uploadImg').val();\n-            var thumbnailImageId = $('#thumbnailImageId').val();\n-            if(file || thumbnailImageId){\n-         \t\t$(\"#uploadImg\").removeAttr('required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"visible\");\n-         \t} else {\n-         \t\t$(\"#uploadImg\").attr('required', 'required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"hidden\");\n-         \t}\n-         });\n-        \n-        $(\"#completedId\").on('click', function(e){\n-        \t\te.preventDefault();\n-        \t\tvar type = $(\"input[name='type']:checked\").val();\n-        \t\tif(type && type == 'GT'){\n-        \t\t\tvalidateStudyId('',function(st){\n-                \t\tif(st){\n-                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t    }else{\n-\t\t\t\t\t\t        $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t        if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t\t\t        validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t               \t  if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t      \t                \tvar file = $('#uploadImg').val();\n-\t\t\t\t      \t                    var thumbnailImageId = $('#thumbnailImageId').val();\n-\t\t\t\t      \t                   if(file || thumbnailImageId){\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").parent().find(\".help-block\").empty();\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").removeAttr('required');\n-\t\t\t\t      \t                \t   validateStudyId('',function(st){\n-\t\t\t\t      \t                \t\t   if(st){\n-\t\t\t\t      \t\t                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t      \t\t    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t      \t\t    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t      \t    \t\t\t\t\t\t    }else{\n-\t\t\t\t      \t    \t\t\t\t\t\t          validateAppId('',function(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      if(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            var appCount = $('.appIdClass').find('.help-block').children().length;\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t            if(parseInt(appCount) >= 1){\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t\t         return false;\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            }else{\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t\t\t\t\t\t      \t\t                        \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t\t\t\t\t\t      \t\t                         }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      });\n-\t\t\t\t      \t                                }\n-\t\t\t\t      \t                       \t     }\n-\t\t\t\t      \t                  \t\t}); \n-\t\t\t\t      \t\t\t\t          }\n-\t\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t       }\n-\t\t\t\t\t\t\t     });\n-\t\t\t\t\t\t    }\n-                       \t}else{\n-                       \t\tisFromValid(\"#basicInfoFormId\");\n-                       \t}\n-                \t}); \n-                } else {\n-                \t$(\"#uploadImg\").parent().find(\".help-block\").empty();\n-                \tvalidateStudyId('',function(st){\n-                   \tif(st){\n-                   \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t}else{\n-\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t      if(isFromValid(\"#basicInfoFormId\"));\n-\t\t\t\t\t\t       validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t                   \t\t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t                   \t\t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t                    \t  \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t                    \t }\n-\t\t\t\t\t\t\t\t   }\n-\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t   });\n+\t$(document)\n+\t\t\t.ready(\n+\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"hidden\");\n+\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\tvar thumbnailImageId = $('#thumbnailImageId').val();\n+\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"visible\");\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">\n+\t\t\t\t\t\t$('#basicInfoFormId input,textarea,select').prop(\n+\t\t\t\t\t\t\t\t'disabled', true);\n+\t\t\t\t\t\t$('#basicInfoFormId').find('.elaborateClass').addClass(\n+\t\t\t\t\t\t\t\t'linkDis');\n+\t\t\t\t\t\t$('.elaborateHide').css('visibility', 'hidden');\n+\t\t\t\t\t\t$('.imageButtonDis').prop('disabled', true);\n+\t\t\t\t\t\t</c:if>\n+\n+\t\t\t\t\t\tvar studyType = '${studyBo.type}';\n+\t\t\t\t\t\tif (studyType) {\n+\t\t\t\t\t\t\tif (studyType === 'GT') {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').show();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').hide();\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t$(\".rejoin_radio\").click(function() {\n+\t\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t})\n+\n+\t\t\t\t\t\t$(\"[data-toggle=tooltip]\").tooltip();\n+\n+\t\t\t\t\t\t//             //wysiwyg editor\n+\t\t\t\t\t\t//             if($(\"#editor\").length > 0){\n+\t\t\t\t\t\t//             tinymce.init({\n+\t\t\t\t\t\t//                 selector: \"#editor\",\n+\t\t\t\t\t\t//                 theme: \"modern\",\n+\t\t\t\t\t\t//                 skin: \"lightgray\",\n+\t\t\t\t\t\t//                 height:180,\n+\t\t\t\t\t\t//                 plugins: [\n+\t\t\t\t\t\t//                     \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n+\t\t\t\t\t\t//                     \"save contextmenu directionality paste\"\n+\t\t\t\t\t\t//                 ],\n+\t\t\t\t\t\t//                 toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n+\t\t\t\t\t\t//                 menubar: false,\n+\t\t\t\t\t\t//                 toolbar_items_size: 'small',\n+\t\t\t\t\t\t//                 content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n+\t\t\t\t\t\t//                 <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n+\t\t\t\t\t\t//                 setup : function(ed) {\n+\t\t\t\t\t\t//                     ed.on('keypress change', function(ed) {\n+\t\t\t\t\t\t//  \t          resetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n+\t\t\t\t\t\t//                     });\n+\t\t\t\t\t\t//            \t  \t}\n+\t\t\t\t\t\t//             });\n+\t\t\t\t\t\t//         }\n+\n+\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote(\n+\t\t\t\t\t\t\t\t\t\t{\n+\n+\t\t\t\t\t\t\t\t\t\t\tplaceholder : '',\n+\t\t\t\t\t\t\t\t\t\t\ttabsize : 2,\n+\t\t\t\t\t\t\t\t\t\t\theight : 200,\n+\t\t\t\t\t\t\t\t\t\t\ttoolbar : [\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'font',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'bold', 'italic' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'para',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'paragraph',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ul', 'ol' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'font', [ 'underline' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'insert', [ 'link' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'hr' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'clear' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'cut' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t//['copy'],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'undo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'redo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize' ] ], ]\n+\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote('disable');\n+\t\t\t\t\t\treadonly: 1, </c:if>\n+\n+\t\t\t\t\t\t// File Upload    \n+\t\t\t\t\t\t$(\"#uploadImgbtn\").click(function() {\n+\t\t\t\t\t\t\t$(\"#uploadImg\").click();\n+\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t// Removing selected file upload image\n+\t\t\t\t\t\t$(\"#removeUrl\")\n+\t\t\t\t\t\t\t\t.click(\n+\t\t\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t\t\t$(\".thumb img\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.attr(\"src\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"/studybuilder/images/dummy-img.jpg\");\n+\t\t\t\t\t\t\t\t\t\t\t$('#uploadImg').val('');\n+\t\t\t\t\t\t\t\t\t\t\t$('#thumbnailImageId').val('');\n+\t\t\t\t\t\t\t\t\t\t\tvar file = $('#uploadImg').val();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 334}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY1NzA2Mw==", "bodyText": "inconsistent quoting", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411657063", "createdAt": "2020-04-20T20:07:18Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/basicInformation.jsp", "diffHunk": "@@ -314,414 +320,721 @@\n <!-- End right Content here -->\n \n <script>\n-        $(document).ready(function(){\n-        \t $('#removeUrl').css(\"visibility\",\"hidden\");\n-             var file = $('#uploadImg').val();\n-             var thumbnailImageId = $('#thumbnailImageId').val();\n-             if(file || thumbnailImageId){\n-          \t   $('#removeUrl').css(\"visibility\",\"visible\");\n-             }\n-             \n-        \t<c:if test=\"${not empty permission}\">\n-            $('#basicInfoFormId input,textarea,select').prop('disabled', true);\n-            $('#basicInfoFormId').find('.elaborateClass').addClass('linkDis');\n-            $('.elaborateHide').css('visibility','hidden');\n-            $('.imageButtonDis').prop('disabled', true);\n-           </c:if>\n-           \n-        \tvar studyType = '${studyBo.type}';\n-            if (studyType) {\n-            \tif(studyType === 'GT'){\n-            \t\t$('.thumbDivClass').show();\n-            \t}else{\n-            \t\t$('.thumbDivClass').hide();\n-            \t}\n-            }\n-        \t\n-        \tcheckRadioRequired();\n-    \t\t$(\".rejoin_radio\").click(function(){\n-    \t\t\tcheckRadioRequired();\n-    \t\t})\n-        \t\n-        \t$(\"[data-toggle=tooltip]\").tooltip();\n-\n-//             //wysiwyg editor\n-            if($(\"#editor\").length > 0){\n-            tinymce.init({\n-                selector: \"#editor\",\n-                theme: \"modern\",\n-                skin: \"lightgray\",\n-                height:180,\n-                plugins: [\n-                    \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-                    \"save contextmenu directionality paste\"\n-                ],\n-                toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n-                menubar: false,\n-                toolbar_items_size: 'small',\n-                content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-                <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n-                setup : function(ed) {\n-                    ed.on('keypress change', function(ed) {\n-                    \tresetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n-                    });\n-           \t  \t}\n-            });\n-        }\n-        // File Upload    \n-         $(\"#uploadImgbtn\").click(function(){\n-            $(\"#uploadImg\").click();\n-         });\n-            \n-        // Removing selected file upload image\n-        $(\"#removeUrl\").click(function(){\n-            $(\".thumb img\").attr(\"src\",\"/studybuilder/images/dummy-img.jpg\");\n-            $('#uploadImg').val('');\n-            $('#thumbnailImageId').val('');\n-            var file = $('#uploadImg').val();\n-            var thumbnailImageId = $('#thumbnailImageId').val();\n-            if(file || thumbnailImageId){\n-         \t\t$(\"#uploadImg\").removeAttr('required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"visible\");\n-         \t} else {\n-         \t\t$(\"#uploadImg\").attr('required', 'required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"hidden\");\n-         \t}\n-         });\n-        \n-        $(\"#completedId\").on('click', function(e){\n-        \t\te.preventDefault();\n-        \t\tvar type = $(\"input[name='type']:checked\").val();\n-        \t\tif(type && type == 'GT'){\n-        \t\t\tvalidateStudyId('',function(st){\n-                \t\tif(st){\n-                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t    }else{\n-\t\t\t\t\t\t        $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t        if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t\t\t        validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t               \t  if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t      \t                \tvar file = $('#uploadImg').val();\n-\t\t\t\t      \t                    var thumbnailImageId = $('#thumbnailImageId').val();\n-\t\t\t\t      \t                   if(file || thumbnailImageId){\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").parent().find(\".help-block\").empty();\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").removeAttr('required');\n-\t\t\t\t      \t                \t   validateStudyId('',function(st){\n-\t\t\t\t      \t                \t\t   if(st){\n-\t\t\t\t      \t\t                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t      \t\t    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t      \t\t    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t      \t    \t\t\t\t\t\t    }else{\n-\t\t\t\t      \t    \t\t\t\t\t\t          validateAppId('',function(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      if(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            var appCount = $('.appIdClass').find('.help-block').children().length;\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t            if(parseInt(appCount) >= 1){\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t\t         return false;\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            }else{\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t\t\t\t\t\t      \t\t                        \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t\t\t\t\t\t      \t\t                         }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      });\n-\t\t\t\t      \t                                }\n-\t\t\t\t      \t                       \t     }\n-\t\t\t\t      \t                  \t\t}); \n-\t\t\t\t      \t\t\t\t          }\n-\t\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t       }\n-\t\t\t\t\t\t\t     });\n-\t\t\t\t\t\t    }\n-                       \t}else{\n-                       \t\tisFromValid(\"#basicInfoFormId\");\n-                       \t}\n-                \t}); \n-                } else {\n-                \t$(\"#uploadImg\").parent().find(\".help-block\").empty();\n-                \tvalidateStudyId('',function(st){\n-                   \tif(st){\n-                   \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t}else{\n-\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t      if(isFromValid(\"#basicInfoFormId\"));\n-\t\t\t\t\t\t       validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t                   \t\t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t                   \t\t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t                    \t  \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t                    \t }\n-\t\t\t\t\t\t\t\t   }\n-\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t   });\n+\t$(document)\n+\t\t\t.ready(\n+\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"hidden\");\n+\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\tvar thumbnailImageId = $('#thumbnailImageId').val();\n+\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"visible\");\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">\n+\t\t\t\t\t\t$('#basicInfoFormId input,textarea,select').prop(\n+\t\t\t\t\t\t\t\t'disabled', true);\n+\t\t\t\t\t\t$('#basicInfoFormId').find('.elaborateClass').addClass(\n+\t\t\t\t\t\t\t\t'linkDis');\n+\t\t\t\t\t\t$('.elaborateHide').css('visibility', 'hidden');\n+\t\t\t\t\t\t$('.imageButtonDis').prop('disabled', true);\n+\t\t\t\t\t\t</c:if>\n+\n+\t\t\t\t\t\tvar studyType = '${studyBo.type}';\n+\t\t\t\t\t\tif (studyType) {\n+\t\t\t\t\t\t\tif (studyType === 'GT') {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').show();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').hide();\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t$(\".rejoin_radio\").click(function() {\n+\t\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t})\n+\n+\t\t\t\t\t\t$(\"[data-toggle=tooltip]\").tooltip();\n+\n+\t\t\t\t\t\t//             //wysiwyg editor\n+\t\t\t\t\t\t//             if($(\"#editor\").length > 0){\n+\t\t\t\t\t\t//             tinymce.init({\n+\t\t\t\t\t\t//                 selector: \"#editor\",\n+\t\t\t\t\t\t//                 theme: \"modern\",\n+\t\t\t\t\t\t//                 skin: \"lightgray\",\n+\t\t\t\t\t\t//                 height:180,\n+\t\t\t\t\t\t//                 plugins: [\n+\t\t\t\t\t\t//                     \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n+\t\t\t\t\t\t//                     \"save contextmenu directionality paste\"\n+\t\t\t\t\t\t//                 ],\n+\t\t\t\t\t\t//                 toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n+\t\t\t\t\t\t//                 menubar: false,\n+\t\t\t\t\t\t//                 toolbar_items_size: 'small',\n+\t\t\t\t\t\t//                 content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n+\t\t\t\t\t\t//                 <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n+\t\t\t\t\t\t//                 setup : function(ed) {\n+\t\t\t\t\t\t//                     ed.on('keypress change', function(ed) {\n+\t\t\t\t\t\t//  \t          resetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n+\t\t\t\t\t\t//                     });\n+\t\t\t\t\t\t//            \t  \t}\n+\t\t\t\t\t\t//             });\n+\t\t\t\t\t\t//         }\n+\n+\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote(\n+\t\t\t\t\t\t\t\t\t\t{\n+\n+\t\t\t\t\t\t\t\t\t\t\tplaceholder : '',\n+\t\t\t\t\t\t\t\t\t\t\ttabsize : 2,\n+\t\t\t\t\t\t\t\t\t\t\theight : 200,\n+\t\t\t\t\t\t\t\t\t\t\ttoolbar : [\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'font',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'bold', 'italic' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'para',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'paragraph',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ul', 'ol' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'font', [ 'underline' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'insert', [ 'link' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'hr' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'clear' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'cut' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t//['copy'],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'undo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'redo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize' ] ], ]\n+\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote('disable');\n+\t\t\t\t\t\treadonly: 1, </c:if>\n+\n+\t\t\t\t\t\t// File Upload    \n+\t\t\t\t\t\t$(\"#uploadImgbtn\").click(function() {\n+\t\t\t\t\t\t\t$(\"#uploadImg\").click();\n+\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t// Removing selected file upload image\n+\t\t\t\t\t\t$(\"#removeUrl\")\n+\t\t\t\t\t\t\t\t.click(\n+\t\t\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t\t\t$(\".thumb img\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.attr(\"src\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"/studybuilder/images/dummy-img.jpg\");\n+\t\t\t\t\t\t\t\t\t\t\t$('#uploadImg').val('');\n+\t\t\t\t\t\t\t\t\t\t\t$('#thumbnailImageId').val('');\n+\t\t\t\t\t\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\t\t\t\t\t\tvar thumbnailImageId = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'#thumbnailImageId').val();\n+\t\t\t\t\t\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#uploadImg\").removeAttr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required');\n+\t\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#uploadImg\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parents('form'));\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#removeUrl')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.css(\"visibility\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"visible\");\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#uploadImg\").attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', 'required');\n+\t\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#uploadImg\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parents('form'));\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#removeUrl').css(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"visibility\", \"hidden\");\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t/*         $( \"#summernote\" ).keypress(function() {\n+\t\t\t\t\t\t $('#summernote').parent().removeClass(\"has-danger\").removeClass(\"has-error\");\n+\t\t\t\t\t\t }); */\n+\n+\t\t\t\t\t\t$(\"#completedId\")\n+\t\t\t\t\t\t\t\t.on(\n+\t\t\t\t\t\t\t\t\t\t'click',\n+\t\t\t\t\t\t\t\t\t\tfunction(e) {\n+\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n+\t\t\t\t\t\t\t\t\t\t\tif ($('#summernote').summernote(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'code') === '<p><br></p>') {\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', true);\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.addClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'has-error has-danger')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\".help-block\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 372}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY1NzMwNg==", "bodyText": "You can just check type === 'GT'", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411657306", "createdAt": "2020-04-20T20:07:45Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/basicInformation.jsp", "diffHunk": "@@ -314,414 +320,721 @@\n <!-- End right Content here -->\n \n <script>\n-        $(document).ready(function(){\n-        \t $('#removeUrl').css(\"visibility\",\"hidden\");\n-             var file = $('#uploadImg').val();\n-             var thumbnailImageId = $('#thumbnailImageId').val();\n-             if(file || thumbnailImageId){\n-          \t   $('#removeUrl').css(\"visibility\",\"visible\");\n-             }\n-             \n-        \t<c:if test=\"${not empty permission}\">\n-            $('#basicInfoFormId input,textarea,select').prop('disabled', true);\n-            $('#basicInfoFormId').find('.elaborateClass').addClass('linkDis');\n-            $('.elaborateHide').css('visibility','hidden');\n-            $('.imageButtonDis').prop('disabled', true);\n-           </c:if>\n-           \n-        \tvar studyType = '${studyBo.type}';\n-            if (studyType) {\n-            \tif(studyType === 'GT'){\n-            \t\t$('.thumbDivClass').show();\n-            \t}else{\n-            \t\t$('.thumbDivClass').hide();\n-            \t}\n-            }\n-        \t\n-        \tcheckRadioRequired();\n-    \t\t$(\".rejoin_radio\").click(function(){\n-    \t\t\tcheckRadioRequired();\n-    \t\t})\n-        \t\n-        \t$(\"[data-toggle=tooltip]\").tooltip();\n-\n-//             //wysiwyg editor\n-            if($(\"#editor\").length > 0){\n-            tinymce.init({\n-                selector: \"#editor\",\n-                theme: \"modern\",\n-                skin: \"lightgray\",\n-                height:180,\n-                plugins: [\n-                    \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-                    \"save contextmenu directionality paste\"\n-                ],\n-                toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n-                menubar: false,\n-                toolbar_items_size: 'small',\n-                content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-                <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n-                setup : function(ed) {\n-                    ed.on('keypress change', function(ed) {\n-                    \tresetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n-                    });\n-           \t  \t}\n-            });\n-        }\n-        // File Upload    \n-         $(\"#uploadImgbtn\").click(function(){\n-            $(\"#uploadImg\").click();\n-         });\n-            \n-        // Removing selected file upload image\n-        $(\"#removeUrl\").click(function(){\n-            $(\".thumb img\").attr(\"src\",\"/studybuilder/images/dummy-img.jpg\");\n-            $('#uploadImg').val('');\n-            $('#thumbnailImageId').val('');\n-            var file = $('#uploadImg').val();\n-            var thumbnailImageId = $('#thumbnailImageId').val();\n-            if(file || thumbnailImageId){\n-         \t\t$(\"#uploadImg\").removeAttr('required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"visible\");\n-         \t} else {\n-         \t\t$(\"#uploadImg\").attr('required', 'required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"hidden\");\n-         \t}\n-         });\n-        \n-        $(\"#completedId\").on('click', function(e){\n-        \t\te.preventDefault();\n-        \t\tvar type = $(\"input[name='type']:checked\").val();\n-        \t\tif(type && type == 'GT'){\n-        \t\t\tvalidateStudyId('',function(st){\n-                \t\tif(st){\n-                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t    }else{\n-\t\t\t\t\t\t        $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t        if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t\t\t        validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t               \t  if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t      \t                \tvar file = $('#uploadImg').val();\n-\t\t\t\t      \t                    var thumbnailImageId = $('#thumbnailImageId').val();\n-\t\t\t\t      \t                   if(file || thumbnailImageId){\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").parent().find(\".help-block\").empty();\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").removeAttr('required');\n-\t\t\t\t      \t                \t   validateStudyId('',function(st){\n-\t\t\t\t      \t                \t\t   if(st){\n-\t\t\t\t      \t\t                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t      \t\t    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t      \t\t    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t      \t    \t\t\t\t\t\t    }else{\n-\t\t\t\t      \t    \t\t\t\t\t\t          validateAppId('',function(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      if(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            var appCount = $('.appIdClass').find('.help-block').children().length;\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t            if(parseInt(appCount) >= 1){\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t\t         return false;\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            }else{\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t\t\t\t\t\t      \t\t                        \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t\t\t\t\t\t      \t\t                         }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      });\n-\t\t\t\t      \t                                }\n-\t\t\t\t      \t                       \t     }\n-\t\t\t\t      \t                  \t\t}); \n-\t\t\t\t      \t\t\t\t          }\n-\t\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t       }\n-\t\t\t\t\t\t\t     });\n-\t\t\t\t\t\t    }\n-                       \t}else{\n-                       \t\tisFromValid(\"#basicInfoFormId\");\n-                       \t}\n-                \t}); \n-                } else {\n-                \t$(\"#uploadImg\").parent().find(\".help-block\").empty();\n-                \tvalidateStudyId('',function(st){\n-                   \tif(st){\n-                   \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t}else{\n-\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t      if(isFromValid(\"#basicInfoFormId\"));\n-\t\t\t\t\t\t       validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t                   \t\t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t                   \t\t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t                    \t  \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t                    \t }\n-\t\t\t\t\t\t\t\t   }\n-\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t   });\n+\t$(document)\n+\t\t\t.ready(\n+\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"hidden\");\n+\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\tvar thumbnailImageId = $('#thumbnailImageId').val();\n+\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"visible\");\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">\n+\t\t\t\t\t\t$('#basicInfoFormId input,textarea,select').prop(\n+\t\t\t\t\t\t\t\t'disabled', true);\n+\t\t\t\t\t\t$('#basicInfoFormId').find('.elaborateClass').addClass(\n+\t\t\t\t\t\t\t\t'linkDis');\n+\t\t\t\t\t\t$('.elaborateHide').css('visibility', 'hidden');\n+\t\t\t\t\t\t$('.imageButtonDis').prop('disabled', true);\n+\t\t\t\t\t\t</c:if>\n+\n+\t\t\t\t\t\tvar studyType = '${studyBo.type}';\n+\t\t\t\t\t\tif (studyType) {\n+\t\t\t\t\t\t\tif (studyType === 'GT') {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').show();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').hide();\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t$(\".rejoin_radio\").click(function() {\n+\t\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t})\n+\n+\t\t\t\t\t\t$(\"[data-toggle=tooltip]\").tooltip();\n+\n+\t\t\t\t\t\t//             //wysiwyg editor\n+\t\t\t\t\t\t//             if($(\"#editor\").length > 0){\n+\t\t\t\t\t\t//             tinymce.init({\n+\t\t\t\t\t\t//                 selector: \"#editor\",\n+\t\t\t\t\t\t//                 theme: \"modern\",\n+\t\t\t\t\t\t//                 skin: \"lightgray\",\n+\t\t\t\t\t\t//                 height:180,\n+\t\t\t\t\t\t//                 plugins: [\n+\t\t\t\t\t\t//                     \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n+\t\t\t\t\t\t//                     \"save contextmenu directionality paste\"\n+\t\t\t\t\t\t//                 ],\n+\t\t\t\t\t\t//                 toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n+\t\t\t\t\t\t//                 menubar: false,\n+\t\t\t\t\t\t//                 toolbar_items_size: 'small',\n+\t\t\t\t\t\t//                 content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n+\t\t\t\t\t\t//                 <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n+\t\t\t\t\t\t//                 setup : function(ed) {\n+\t\t\t\t\t\t//                     ed.on('keypress change', function(ed) {\n+\t\t\t\t\t\t//  \t          resetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n+\t\t\t\t\t\t//                     });\n+\t\t\t\t\t\t//            \t  \t}\n+\t\t\t\t\t\t//             });\n+\t\t\t\t\t\t//         }\n+\n+\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote(\n+\t\t\t\t\t\t\t\t\t\t{\n+\n+\t\t\t\t\t\t\t\t\t\t\tplaceholder : '',\n+\t\t\t\t\t\t\t\t\t\t\ttabsize : 2,\n+\t\t\t\t\t\t\t\t\t\t\theight : 200,\n+\t\t\t\t\t\t\t\t\t\t\ttoolbar : [\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'font',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'bold', 'italic' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'para',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'paragraph',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ul', 'ol' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'font', [ 'underline' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'insert', [ 'link' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'hr' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'clear' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'cut' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t//['copy'],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'undo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'redo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize' ] ], ]\n+\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote('disable');\n+\t\t\t\t\t\treadonly: 1, </c:if>\n+\n+\t\t\t\t\t\t// File Upload    \n+\t\t\t\t\t\t$(\"#uploadImgbtn\").click(function() {\n+\t\t\t\t\t\t\t$(\"#uploadImg\").click();\n+\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t// Removing selected file upload image\n+\t\t\t\t\t\t$(\"#removeUrl\")\n+\t\t\t\t\t\t\t\t.click(\n+\t\t\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t\t\t$(\".thumb img\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.attr(\"src\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"/studybuilder/images/dummy-img.jpg\");\n+\t\t\t\t\t\t\t\t\t\t\t$('#uploadImg').val('');\n+\t\t\t\t\t\t\t\t\t\t\t$('#thumbnailImageId').val('');\n+\t\t\t\t\t\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\t\t\t\t\t\tvar thumbnailImageId = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'#thumbnailImageId').val();\n+\t\t\t\t\t\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#uploadImg\").removeAttr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required');\n+\t\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#uploadImg\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parents('form'));\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#removeUrl')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.css(\"visibility\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"visible\");\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#uploadImg\").attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', 'required');\n+\t\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#uploadImg\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parents('form'));\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#removeUrl').css(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"visibility\", \"hidden\");\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t/*         $( \"#summernote\" ).keypress(function() {\n+\t\t\t\t\t\t $('#summernote').parent().removeClass(\"has-danger\").removeClass(\"has-error\");\n+\t\t\t\t\t\t }); */\n+\n+\t\t\t\t\t\t$(\"#completedId\")\n+\t\t\t\t\t\t\t\t.on(\n+\t\t\t\t\t\t\t\t\t\t'click',\n+\t\t\t\t\t\t\t\t\t\tfunction(e) {\n+\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n+\t\t\t\t\t\t\t\t\t\t\tif ($('#summernote').summernote(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'code') === '<p><br></p>') {\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', true);\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.addClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'has-error has-danger')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\".help-block\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.empty()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.append(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<ul class=\"list-unstyled\"><li>Please fill out this field.</li></ul>');\n+\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', false);\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"has-danger\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"has-error\");\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').parent().find(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\".help-block\").html(\"\");\n+\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t\t\tvar type = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\"input[name='type']:checked\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.val();\n+\t\t\t\t\t\t\t\t\t\t\tif (type && type == 'GT') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 393}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY1Nzc3Mg==", "bodyText": "else not needed after return", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411657772", "createdAt": "2020-04-20T20:08:27Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/basicInformation.jsp", "diffHunk": "@@ -314,414 +320,721 @@\n <!-- End right Content here -->\n \n <script>\n-        $(document).ready(function(){\n-        \t $('#removeUrl').css(\"visibility\",\"hidden\");\n-             var file = $('#uploadImg').val();\n-             var thumbnailImageId = $('#thumbnailImageId').val();\n-             if(file || thumbnailImageId){\n-          \t   $('#removeUrl').css(\"visibility\",\"visible\");\n-             }\n-             \n-        \t<c:if test=\"${not empty permission}\">\n-            $('#basicInfoFormId input,textarea,select').prop('disabled', true);\n-            $('#basicInfoFormId').find('.elaborateClass').addClass('linkDis');\n-            $('.elaborateHide').css('visibility','hidden');\n-            $('.imageButtonDis').prop('disabled', true);\n-           </c:if>\n-           \n-        \tvar studyType = '${studyBo.type}';\n-            if (studyType) {\n-            \tif(studyType === 'GT'){\n-            \t\t$('.thumbDivClass').show();\n-            \t}else{\n-            \t\t$('.thumbDivClass').hide();\n-            \t}\n-            }\n-        \t\n-        \tcheckRadioRequired();\n-    \t\t$(\".rejoin_radio\").click(function(){\n-    \t\t\tcheckRadioRequired();\n-    \t\t})\n-        \t\n-        \t$(\"[data-toggle=tooltip]\").tooltip();\n-\n-//             //wysiwyg editor\n-            if($(\"#editor\").length > 0){\n-            tinymce.init({\n-                selector: \"#editor\",\n-                theme: \"modern\",\n-                skin: \"lightgray\",\n-                height:180,\n-                plugins: [\n-                    \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-                    \"save contextmenu directionality paste\"\n-                ],\n-                toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n-                menubar: false,\n-                toolbar_items_size: 'small',\n-                content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-                <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n-                setup : function(ed) {\n-                    ed.on('keypress change', function(ed) {\n-                    \tresetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n-                    });\n-           \t  \t}\n-            });\n-        }\n-        // File Upload    \n-         $(\"#uploadImgbtn\").click(function(){\n-            $(\"#uploadImg\").click();\n-         });\n-            \n-        // Removing selected file upload image\n-        $(\"#removeUrl\").click(function(){\n-            $(\".thumb img\").attr(\"src\",\"/studybuilder/images/dummy-img.jpg\");\n-            $('#uploadImg').val('');\n-            $('#thumbnailImageId').val('');\n-            var file = $('#uploadImg').val();\n-            var thumbnailImageId = $('#thumbnailImageId').val();\n-            if(file || thumbnailImageId){\n-         \t\t$(\"#uploadImg\").removeAttr('required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"visible\");\n-         \t} else {\n-         \t\t$(\"#uploadImg\").attr('required', 'required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"hidden\");\n-         \t}\n-         });\n-        \n-        $(\"#completedId\").on('click', function(e){\n-        \t\te.preventDefault();\n-        \t\tvar type = $(\"input[name='type']:checked\").val();\n-        \t\tif(type && type == 'GT'){\n-        \t\t\tvalidateStudyId('',function(st){\n-                \t\tif(st){\n-                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t    }else{\n-\t\t\t\t\t\t        $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t        if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t\t\t        validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t               \t  if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t      \t                \tvar file = $('#uploadImg').val();\n-\t\t\t\t      \t                    var thumbnailImageId = $('#thumbnailImageId').val();\n-\t\t\t\t      \t                   if(file || thumbnailImageId){\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").parent().find(\".help-block\").empty();\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").removeAttr('required');\n-\t\t\t\t      \t                \t   validateStudyId('',function(st){\n-\t\t\t\t      \t                \t\t   if(st){\n-\t\t\t\t      \t\t                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t      \t\t    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t      \t\t    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t      \t    \t\t\t\t\t\t    }else{\n-\t\t\t\t      \t    \t\t\t\t\t\t          validateAppId('',function(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      if(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            var appCount = $('.appIdClass').find('.help-block').children().length;\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t            if(parseInt(appCount) >= 1){\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t\t         return false;\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            }else{\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t\t\t\t\t\t      \t\t                        \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t\t\t\t\t\t      \t\t                         }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      });\n-\t\t\t\t      \t                                }\n-\t\t\t\t      \t                       \t     }\n-\t\t\t\t      \t                  \t\t}); \n-\t\t\t\t      \t\t\t\t          }\n-\t\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t       }\n-\t\t\t\t\t\t\t     });\n-\t\t\t\t\t\t    }\n-                       \t}else{\n-                       \t\tisFromValid(\"#basicInfoFormId\");\n-                       \t}\n-                \t}); \n-                } else {\n-                \t$(\"#uploadImg\").parent().find(\".help-block\").empty();\n-                \tvalidateStudyId('',function(st){\n-                   \tif(st){\n-                   \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t}else{\n-\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t      if(isFromValid(\"#basicInfoFormId\"));\n-\t\t\t\t\t\t       validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t                   \t\t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t                   \t\t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t                    \t  \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t                    \t }\n-\t\t\t\t\t\t\t\t   }\n-\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t   });\n+\t$(document)\n+\t\t\t.ready(\n+\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"hidden\");\n+\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\tvar thumbnailImageId = $('#thumbnailImageId').val();\n+\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"visible\");\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">\n+\t\t\t\t\t\t$('#basicInfoFormId input,textarea,select').prop(\n+\t\t\t\t\t\t\t\t'disabled', true);\n+\t\t\t\t\t\t$('#basicInfoFormId').find('.elaborateClass').addClass(\n+\t\t\t\t\t\t\t\t'linkDis');\n+\t\t\t\t\t\t$('.elaborateHide').css('visibility', 'hidden');\n+\t\t\t\t\t\t$('.imageButtonDis').prop('disabled', true);\n+\t\t\t\t\t\t</c:if>\n+\n+\t\t\t\t\t\tvar studyType = '${studyBo.type}';\n+\t\t\t\t\t\tif (studyType) {\n+\t\t\t\t\t\t\tif (studyType === 'GT') {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').show();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').hide();\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t$(\".rejoin_radio\").click(function() {\n+\t\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t})\n+\n+\t\t\t\t\t\t$(\"[data-toggle=tooltip]\").tooltip();\n+\n+\t\t\t\t\t\t//             //wysiwyg editor\n+\t\t\t\t\t\t//             if($(\"#editor\").length > 0){\n+\t\t\t\t\t\t//             tinymce.init({\n+\t\t\t\t\t\t//                 selector: \"#editor\",\n+\t\t\t\t\t\t//                 theme: \"modern\",\n+\t\t\t\t\t\t//                 skin: \"lightgray\",\n+\t\t\t\t\t\t//                 height:180,\n+\t\t\t\t\t\t//                 plugins: [\n+\t\t\t\t\t\t//                     \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n+\t\t\t\t\t\t//                     \"save contextmenu directionality paste\"\n+\t\t\t\t\t\t//                 ],\n+\t\t\t\t\t\t//                 toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n+\t\t\t\t\t\t//                 menubar: false,\n+\t\t\t\t\t\t//                 toolbar_items_size: 'small',\n+\t\t\t\t\t\t//                 content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n+\t\t\t\t\t\t//                 <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n+\t\t\t\t\t\t//                 setup : function(ed) {\n+\t\t\t\t\t\t//                     ed.on('keypress change', function(ed) {\n+\t\t\t\t\t\t//  \t          resetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n+\t\t\t\t\t\t//                     });\n+\t\t\t\t\t\t//            \t  \t}\n+\t\t\t\t\t\t//             });\n+\t\t\t\t\t\t//         }\n+\n+\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote(\n+\t\t\t\t\t\t\t\t\t\t{\n+\n+\t\t\t\t\t\t\t\t\t\t\tplaceholder : '',\n+\t\t\t\t\t\t\t\t\t\t\ttabsize : 2,\n+\t\t\t\t\t\t\t\t\t\t\theight : 200,\n+\t\t\t\t\t\t\t\t\t\t\ttoolbar : [\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'font',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'bold', 'italic' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'para',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'paragraph',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ul', 'ol' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'font', [ 'underline' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'insert', [ 'link' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'hr' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'clear' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'cut' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t//['copy'],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'undo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'redo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize' ] ], ]\n+\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote('disable');\n+\t\t\t\t\t\treadonly: 1, </c:if>\n+\n+\t\t\t\t\t\t// File Upload    \n+\t\t\t\t\t\t$(\"#uploadImgbtn\").click(function() {\n+\t\t\t\t\t\t\t$(\"#uploadImg\").click();\n+\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t// Removing selected file upload image\n+\t\t\t\t\t\t$(\"#removeUrl\")\n+\t\t\t\t\t\t\t\t.click(\n+\t\t\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t\t\t$(\".thumb img\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.attr(\"src\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"/studybuilder/images/dummy-img.jpg\");\n+\t\t\t\t\t\t\t\t\t\t\t$('#uploadImg').val('');\n+\t\t\t\t\t\t\t\t\t\t\t$('#thumbnailImageId').val('');\n+\t\t\t\t\t\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\t\t\t\t\t\tvar thumbnailImageId = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'#thumbnailImageId').val();\n+\t\t\t\t\t\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#uploadImg\").removeAttr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required');\n+\t\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#uploadImg\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parents('form'));\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#removeUrl')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.css(\"visibility\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"visible\");\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#uploadImg\").attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', 'required');\n+\t\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#uploadImg\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parents('form'));\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#removeUrl').css(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"visibility\", \"hidden\");\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t/*         $( \"#summernote\" ).keypress(function() {\n+\t\t\t\t\t\t $('#summernote').parent().removeClass(\"has-danger\").removeClass(\"has-error\");\n+\t\t\t\t\t\t }); */\n+\n+\t\t\t\t\t\t$(\"#completedId\")\n+\t\t\t\t\t\t\t\t.on(\n+\t\t\t\t\t\t\t\t\t\t'click',\n+\t\t\t\t\t\t\t\t\t\tfunction(e) {\n+\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n+\t\t\t\t\t\t\t\t\t\t\tif ($('#summernote').summernote(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'code') === '<p><br></p>') {\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', true);\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.addClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'has-error has-danger')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\".help-block\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.empty()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.append(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<ul class=\"list-unstyled\"><li>Please fill out this field.</li></ul>');\n+\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', false);\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"has-danger\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"has-error\");\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').parent().find(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\".help-block\").html(\"\");\n+\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t\t\tvar type = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\"input[name='type']:checked\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.val();\n+\t\t\t\t\t\t\t\t\t\t\tif (type && type == 'GT') {\n+\t\t\t\t\t\t\t\t\t\t\t\tvalidateStudyId(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tfunction(st) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (st) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar studyCount = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'.customStudyClass')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'.help-block')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.children().length;\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parseInt(studyCount) >= 1) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 405}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY1ODQyMA==", "bodyText": "use curly braces for if statements spanning multiple lines", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411658420", "createdAt": "2020-04-20T20:09:29Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/basicInformation.jsp", "diffHunk": "@@ -314,414 +320,721 @@\n <!-- End right Content here -->\n \n <script>\n-        $(document).ready(function(){\n-        \t $('#removeUrl').css(\"visibility\",\"hidden\");\n-             var file = $('#uploadImg').val();\n-             var thumbnailImageId = $('#thumbnailImageId').val();\n-             if(file || thumbnailImageId){\n-          \t   $('#removeUrl').css(\"visibility\",\"visible\");\n-             }\n-             \n-        \t<c:if test=\"${not empty permission}\">\n-            $('#basicInfoFormId input,textarea,select').prop('disabled', true);\n-            $('#basicInfoFormId').find('.elaborateClass').addClass('linkDis');\n-            $('.elaborateHide').css('visibility','hidden');\n-            $('.imageButtonDis').prop('disabled', true);\n-           </c:if>\n-           \n-        \tvar studyType = '${studyBo.type}';\n-            if (studyType) {\n-            \tif(studyType === 'GT'){\n-            \t\t$('.thumbDivClass').show();\n-            \t}else{\n-            \t\t$('.thumbDivClass').hide();\n-            \t}\n-            }\n-        \t\n-        \tcheckRadioRequired();\n-    \t\t$(\".rejoin_radio\").click(function(){\n-    \t\t\tcheckRadioRequired();\n-    \t\t})\n-        \t\n-        \t$(\"[data-toggle=tooltip]\").tooltip();\n-\n-//             //wysiwyg editor\n-            if($(\"#editor\").length > 0){\n-            tinymce.init({\n-                selector: \"#editor\",\n-                theme: \"modern\",\n-                skin: \"lightgray\",\n-                height:180,\n-                plugins: [\n-                    \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-                    \"save contextmenu directionality paste\"\n-                ],\n-                toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n-                menubar: false,\n-                toolbar_items_size: 'small',\n-                content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-                <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n-                setup : function(ed) {\n-                    ed.on('keypress change', function(ed) {\n-                    \tresetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n-                    });\n-           \t  \t}\n-            });\n-        }\n-        // File Upload    \n-         $(\"#uploadImgbtn\").click(function(){\n-            $(\"#uploadImg\").click();\n-         });\n-            \n-        // Removing selected file upload image\n-        $(\"#removeUrl\").click(function(){\n-            $(\".thumb img\").attr(\"src\",\"/studybuilder/images/dummy-img.jpg\");\n-            $('#uploadImg').val('');\n-            $('#thumbnailImageId').val('');\n-            var file = $('#uploadImg').val();\n-            var thumbnailImageId = $('#thumbnailImageId').val();\n-            if(file || thumbnailImageId){\n-         \t\t$(\"#uploadImg\").removeAttr('required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"visible\");\n-         \t} else {\n-         \t\t$(\"#uploadImg\").attr('required', 'required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"hidden\");\n-         \t}\n-         });\n-        \n-        $(\"#completedId\").on('click', function(e){\n-        \t\te.preventDefault();\n-        \t\tvar type = $(\"input[name='type']:checked\").val();\n-        \t\tif(type && type == 'GT'){\n-        \t\t\tvalidateStudyId('',function(st){\n-                \t\tif(st){\n-                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t    }else{\n-\t\t\t\t\t\t        $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t        if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t\t\t        validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t               \t  if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t      \t                \tvar file = $('#uploadImg').val();\n-\t\t\t\t      \t                    var thumbnailImageId = $('#thumbnailImageId').val();\n-\t\t\t\t      \t                   if(file || thumbnailImageId){\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").parent().find(\".help-block\").empty();\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").removeAttr('required');\n-\t\t\t\t      \t                \t   validateStudyId('',function(st){\n-\t\t\t\t      \t                \t\t   if(st){\n-\t\t\t\t      \t\t                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t      \t\t    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t      \t\t    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t      \t    \t\t\t\t\t\t    }else{\n-\t\t\t\t      \t    \t\t\t\t\t\t          validateAppId('',function(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      if(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            var appCount = $('.appIdClass').find('.help-block').children().length;\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t            if(parseInt(appCount) >= 1){\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t\t         return false;\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            }else{\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t\t\t\t\t\t      \t\t                        \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t\t\t\t\t\t      \t\t                         }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      });\n-\t\t\t\t      \t                                }\n-\t\t\t\t      \t                       \t     }\n-\t\t\t\t      \t                  \t\t}); \n-\t\t\t\t      \t\t\t\t          }\n-\t\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t       }\n-\t\t\t\t\t\t\t     });\n-\t\t\t\t\t\t    }\n-                       \t}else{\n-                       \t\tisFromValid(\"#basicInfoFormId\");\n-                       \t}\n-                \t}); \n-                } else {\n-                \t$(\"#uploadImg\").parent().find(\".help-block\").empty();\n-                \tvalidateStudyId('',function(st){\n-                   \tif(st){\n-                   \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t}else{\n-\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t      if(isFromValid(\"#basicInfoFormId\"));\n-\t\t\t\t\t\t       validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t                   \t\t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t                   \t\t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t                    \t  \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t                    \t }\n-\t\t\t\t\t\t\t\t   }\n-\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t   });\n+\t$(document)\n+\t\t\t.ready(\n+\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"hidden\");\n+\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\tvar thumbnailImageId = $('#thumbnailImageId').val();\n+\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"visible\");\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">\n+\t\t\t\t\t\t$('#basicInfoFormId input,textarea,select').prop(\n+\t\t\t\t\t\t\t\t'disabled', true);\n+\t\t\t\t\t\t$('#basicInfoFormId').find('.elaborateClass').addClass(\n+\t\t\t\t\t\t\t\t'linkDis');\n+\t\t\t\t\t\t$('.elaborateHide').css('visibility', 'hidden');\n+\t\t\t\t\t\t$('.imageButtonDis').prop('disabled', true);\n+\t\t\t\t\t\t</c:if>\n+\n+\t\t\t\t\t\tvar studyType = '${studyBo.type}';\n+\t\t\t\t\t\tif (studyType) {\n+\t\t\t\t\t\t\tif (studyType === 'GT') {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').show();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').hide();\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t$(\".rejoin_radio\").click(function() {\n+\t\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t})\n+\n+\t\t\t\t\t\t$(\"[data-toggle=tooltip]\").tooltip();\n+\n+\t\t\t\t\t\t//             //wysiwyg editor\n+\t\t\t\t\t\t//             if($(\"#editor\").length > 0){\n+\t\t\t\t\t\t//             tinymce.init({\n+\t\t\t\t\t\t//                 selector: \"#editor\",\n+\t\t\t\t\t\t//                 theme: \"modern\",\n+\t\t\t\t\t\t//                 skin: \"lightgray\",\n+\t\t\t\t\t\t//                 height:180,\n+\t\t\t\t\t\t//                 plugins: [\n+\t\t\t\t\t\t//                     \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n+\t\t\t\t\t\t//                     \"save contextmenu directionality paste\"\n+\t\t\t\t\t\t//                 ],\n+\t\t\t\t\t\t//                 toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n+\t\t\t\t\t\t//                 menubar: false,\n+\t\t\t\t\t\t//                 toolbar_items_size: 'small',\n+\t\t\t\t\t\t//                 content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n+\t\t\t\t\t\t//                 <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n+\t\t\t\t\t\t//                 setup : function(ed) {\n+\t\t\t\t\t\t//                     ed.on('keypress change', function(ed) {\n+\t\t\t\t\t\t//  \t          resetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n+\t\t\t\t\t\t//                     });\n+\t\t\t\t\t\t//            \t  \t}\n+\t\t\t\t\t\t//             });\n+\t\t\t\t\t\t//         }\n+\n+\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote(\n+\t\t\t\t\t\t\t\t\t\t{\n+\n+\t\t\t\t\t\t\t\t\t\t\tplaceholder : '',\n+\t\t\t\t\t\t\t\t\t\t\ttabsize : 2,\n+\t\t\t\t\t\t\t\t\t\t\theight : 200,\n+\t\t\t\t\t\t\t\t\t\t\ttoolbar : [\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'font',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'bold', 'italic' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'para',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'paragraph',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ul', 'ol' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'font', [ 'underline' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'insert', [ 'link' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'hr' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'clear' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'cut' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t//['copy'],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'undo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'redo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize' ] ], ]\n+\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote('disable');\n+\t\t\t\t\t\treadonly: 1, </c:if>\n+\n+\t\t\t\t\t\t// File Upload    \n+\t\t\t\t\t\t$(\"#uploadImgbtn\").click(function() {\n+\t\t\t\t\t\t\t$(\"#uploadImg\").click();\n+\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t// Removing selected file upload image\n+\t\t\t\t\t\t$(\"#removeUrl\")\n+\t\t\t\t\t\t\t\t.click(\n+\t\t\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t\t\t$(\".thumb img\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.attr(\"src\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"/studybuilder/images/dummy-img.jpg\");\n+\t\t\t\t\t\t\t\t\t\t\t$('#uploadImg').val('');\n+\t\t\t\t\t\t\t\t\t\t\t$('#thumbnailImageId').val('');\n+\t\t\t\t\t\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\t\t\t\t\t\tvar thumbnailImageId = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'#thumbnailImageId').val();\n+\t\t\t\t\t\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#uploadImg\").removeAttr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required');\n+\t\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#uploadImg\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parents('form'));\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#removeUrl')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.css(\"visibility\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"visible\");\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#uploadImg\").attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', 'required');\n+\t\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#uploadImg\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parents('form'));\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#removeUrl').css(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"visibility\", \"hidden\");\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t/*         $( \"#summernote\" ).keypress(function() {\n+\t\t\t\t\t\t $('#summernote').parent().removeClass(\"has-danger\").removeClass(\"has-error\");\n+\t\t\t\t\t\t }); */\n+\n+\t\t\t\t\t\t$(\"#completedId\")\n+\t\t\t\t\t\t\t\t.on(\n+\t\t\t\t\t\t\t\t\t\t'click',\n+\t\t\t\t\t\t\t\t\t\tfunction(e) {\n+\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n+\t\t\t\t\t\t\t\t\t\t\tif ($('#summernote').summernote(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'code') === '<p><br></p>') {\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', true);\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.addClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'has-error has-danger')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\".help-block\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.empty()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.append(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<ul class=\"list-unstyled\"><li>Please fill out this field.</li></ul>');\n+\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', false);\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"has-danger\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"has-error\");\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').parent().find(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\".help-block\").html(\"\");\n+\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t\t\tvar type = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\"input[name='type']:checked\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.val();\n+\t\t\t\t\t\t\t\t\t\t\tif (type && type == 'GT') {\n+\t\t\t\t\t\t\t\t\t\t\t\tvalidateStudyId(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tfunction(st) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (st) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar studyCount = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'.customStudyClass')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'.help-block')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.children().length;\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parseInt(studyCount) >= 1) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.prop(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'disabled',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse);\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (isFromValid(\"#basicInfoFormId\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 411}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY1OTQxNw==", "bodyText": "I can't read this function. Please fix the indentation", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411659417", "createdAt": "2020-04-20T20:11:10Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/basicInformation.jsp", "diffHunk": "@@ -314,414 +320,721 @@\n <!-- End right Content here -->\n \n <script>\n-        $(document).ready(function(){\n-        \t $('#removeUrl').css(\"visibility\",\"hidden\");\n-             var file = $('#uploadImg').val();\n-             var thumbnailImageId = $('#thumbnailImageId').val();\n-             if(file || thumbnailImageId){\n-          \t   $('#removeUrl').css(\"visibility\",\"visible\");\n-             }\n-             \n-        \t<c:if test=\"${not empty permission}\">\n-            $('#basicInfoFormId input,textarea,select').prop('disabled', true);\n-            $('#basicInfoFormId').find('.elaborateClass').addClass('linkDis');\n-            $('.elaborateHide').css('visibility','hidden');\n-            $('.imageButtonDis').prop('disabled', true);\n-           </c:if>\n-           \n-        \tvar studyType = '${studyBo.type}';\n-            if (studyType) {\n-            \tif(studyType === 'GT'){\n-            \t\t$('.thumbDivClass').show();\n-            \t}else{\n-            \t\t$('.thumbDivClass').hide();\n-            \t}\n-            }\n-        \t\n-        \tcheckRadioRequired();\n-    \t\t$(\".rejoin_radio\").click(function(){\n-    \t\t\tcheckRadioRequired();\n-    \t\t})\n-        \t\n-        \t$(\"[data-toggle=tooltip]\").tooltip();\n-\n-//             //wysiwyg editor\n-            if($(\"#editor\").length > 0){\n-            tinymce.init({\n-                selector: \"#editor\",\n-                theme: \"modern\",\n-                skin: \"lightgray\",\n-                height:180,\n-                plugins: [\n-                    \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-                    \"save contextmenu directionality paste\"\n-                ],\n-                toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n-                menubar: false,\n-                toolbar_items_size: 'small',\n-                content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-                <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n-                setup : function(ed) {\n-                    ed.on('keypress change', function(ed) {\n-                    \tresetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n-                    });\n-           \t  \t}\n-            });\n-        }\n-        // File Upload    \n-         $(\"#uploadImgbtn\").click(function(){\n-            $(\"#uploadImg\").click();\n-         });\n-            \n-        // Removing selected file upload image\n-        $(\"#removeUrl\").click(function(){\n-            $(\".thumb img\").attr(\"src\",\"/studybuilder/images/dummy-img.jpg\");\n-            $('#uploadImg').val('');\n-            $('#thumbnailImageId').val('');\n-            var file = $('#uploadImg').val();\n-            var thumbnailImageId = $('#thumbnailImageId').val();\n-            if(file || thumbnailImageId){\n-         \t\t$(\"#uploadImg\").removeAttr('required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"visible\");\n-         \t} else {\n-         \t\t$(\"#uploadImg\").attr('required', 'required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"hidden\");\n-         \t}\n-         });\n-        \n-        $(\"#completedId\").on('click', function(e){\n-        \t\te.preventDefault();\n-        \t\tvar type = $(\"input[name='type']:checked\").val();\n-        \t\tif(type && type == 'GT'){\n-        \t\t\tvalidateStudyId('',function(st){\n-                \t\tif(st){\n-                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t    }else{\n-\t\t\t\t\t\t        $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t        if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t\t\t        validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t               \t  if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t      \t                \tvar file = $('#uploadImg').val();\n-\t\t\t\t      \t                    var thumbnailImageId = $('#thumbnailImageId').val();\n-\t\t\t\t      \t                   if(file || thumbnailImageId){\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").parent().find(\".help-block\").empty();\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").removeAttr('required');\n-\t\t\t\t      \t                \t   validateStudyId('',function(st){\n-\t\t\t\t      \t                \t\t   if(st){\n-\t\t\t\t      \t\t                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t      \t\t    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t      \t\t    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t      \t    \t\t\t\t\t\t    }else{\n-\t\t\t\t      \t    \t\t\t\t\t\t          validateAppId('',function(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      if(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            var appCount = $('.appIdClass').find('.help-block').children().length;\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t            if(parseInt(appCount) >= 1){\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t\t         return false;\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            }else{\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t\t\t\t\t\t      \t\t                        \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t\t\t\t\t\t      \t\t                         }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      });\n-\t\t\t\t      \t                                }\n-\t\t\t\t      \t                       \t     }\n-\t\t\t\t      \t                  \t\t}); \n-\t\t\t\t      \t\t\t\t          }\n-\t\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t       }\n-\t\t\t\t\t\t\t     });\n-\t\t\t\t\t\t    }\n-                       \t}else{\n-                       \t\tisFromValid(\"#basicInfoFormId\");\n-                       \t}\n-                \t}); \n-                } else {\n-                \t$(\"#uploadImg\").parent().find(\".help-block\").empty();\n-                \tvalidateStudyId('',function(st){\n-                   \tif(st){\n-                   \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t}else{\n-\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t      if(isFromValid(\"#basicInfoFormId\"));\n-\t\t\t\t\t\t       validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t                   \t\t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t                   \t\t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t                    \t  \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t                    \t }\n-\t\t\t\t\t\t\t\t   }\n-\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t   });\n+\t$(document)\n+\t\t\t.ready(\n+\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"hidden\");\n+\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\tvar thumbnailImageId = $('#thumbnailImageId').val();\n+\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"visible\");\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">\n+\t\t\t\t\t\t$('#basicInfoFormId input,textarea,select').prop(\n+\t\t\t\t\t\t\t\t'disabled', true);\n+\t\t\t\t\t\t$('#basicInfoFormId').find('.elaborateClass').addClass(\n+\t\t\t\t\t\t\t\t'linkDis');\n+\t\t\t\t\t\t$('.elaborateHide').css('visibility', 'hidden');\n+\t\t\t\t\t\t$('.imageButtonDis').prop('disabled', true);\n+\t\t\t\t\t\t</c:if>\n+\n+\t\t\t\t\t\tvar studyType = '${studyBo.type}';\n+\t\t\t\t\t\tif (studyType) {\n+\t\t\t\t\t\t\tif (studyType === 'GT') {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').show();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').hide();\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t$(\".rejoin_radio\").click(function() {\n+\t\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t})\n+\n+\t\t\t\t\t\t$(\"[data-toggle=tooltip]\").tooltip();\n+\n+\t\t\t\t\t\t//             //wysiwyg editor\n+\t\t\t\t\t\t//             if($(\"#editor\").length > 0){\n+\t\t\t\t\t\t//             tinymce.init({\n+\t\t\t\t\t\t//                 selector: \"#editor\",\n+\t\t\t\t\t\t//                 theme: \"modern\",\n+\t\t\t\t\t\t//                 skin: \"lightgray\",\n+\t\t\t\t\t\t//                 height:180,\n+\t\t\t\t\t\t//                 plugins: [\n+\t\t\t\t\t\t//                     \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n+\t\t\t\t\t\t//                     \"save contextmenu directionality paste\"\n+\t\t\t\t\t\t//                 ],\n+\t\t\t\t\t\t//                 toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n+\t\t\t\t\t\t//                 menubar: false,\n+\t\t\t\t\t\t//                 toolbar_items_size: 'small',\n+\t\t\t\t\t\t//                 content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n+\t\t\t\t\t\t//                 <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n+\t\t\t\t\t\t//                 setup : function(ed) {\n+\t\t\t\t\t\t//                     ed.on('keypress change', function(ed) {\n+\t\t\t\t\t\t//  \t          resetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n+\t\t\t\t\t\t//                     });\n+\t\t\t\t\t\t//            \t  \t}\n+\t\t\t\t\t\t//             });\n+\t\t\t\t\t\t//         }\n+\n+\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote(\n+\t\t\t\t\t\t\t\t\t\t{\n+\n+\t\t\t\t\t\t\t\t\t\t\tplaceholder : '',\n+\t\t\t\t\t\t\t\t\t\t\ttabsize : 2,\n+\t\t\t\t\t\t\t\t\t\t\theight : 200,\n+\t\t\t\t\t\t\t\t\t\t\ttoolbar : [\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'font',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'bold', 'italic' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'para',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'paragraph',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ul', 'ol' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'font', [ 'underline' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'insert', [ 'link' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'hr' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'clear' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'cut' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t//['copy'],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'undo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'redo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize' ] ], ]\n+\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote('disable');\n+\t\t\t\t\t\treadonly: 1, </c:if>\n+\n+\t\t\t\t\t\t// File Upload    \n+\t\t\t\t\t\t$(\"#uploadImgbtn\").click(function() {\n+\t\t\t\t\t\t\t$(\"#uploadImg\").click();\n+\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t// Removing selected file upload image\n+\t\t\t\t\t\t$(\"#removeUrl\")\n+\t\t\t\t\t\t\t\t.click(\n+\t\t\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t\t\t$(\".thumb img\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.attr(\"src\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"/studybuilder/images/dummy-img.jpg\");\n+\t\t\t\t\t\t\t\t\t\t\t$('#uploadImg').val('');\n+\t\t\t\t\t\t\t\t\t\t\t$('#thumbnailImageId').val('');\n+\t\t\t\t\t\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\t\t\t\t\t\tvar thumbnailImageId = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'#thumbnailImageId').val();\n+\t\t\t\t\t\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#uploadImg\").removeAttr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required');\n+\t\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#uploadImg\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parents('form'));\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#removeUrl')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.css(\"visibility\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"visible\");\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#uploadImg\").attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', 'required');\n+\t\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#uploadImg\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parents('form'));\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#removeUrl').css(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"visibility\", \"hidden\");\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t/*         $( \"#summernote\" ).keypress(function() {\n+\t\t\t\t\t\t $('#summernote').parent().removeClass(\"has-danger\").removeClass(\"has-error\");\n+\t\t\t\t\t\t }); */\n+\n+\t\t\t\t\t\t$(\"#completedId\")\n+\t\t\t\t\t\t\t\t.on(\n+\t\t\t\t\t\t\t\t\t\t'click',\n+\t\t\t\t\t\t\t\t\t\tfunction(e) {\n+\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n+\t\t\t\t\t\t\t\t\t\t\tif ($('#summernote').summernote(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'code') === '<p><br></p>') {\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', true);\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.addClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'has-error has-danger')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\".help-block\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.empty()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.append(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<ul class=\"list-unstyled\"><li>Please fill out this field.</li></ul>');\n+\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', false);\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"has-danger\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"has-error\");\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').parent().find(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\".help-block\").html(\"\");\n+\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t\t\tvar type = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\"input[name='type']:checked\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.val();\n+\t\t\t\t\t\t\t\t\t\t\tif (type && type == 'GT') {\n+\t\t\t\t\t\t\t\t\t\t\t\tvalidateStudyId(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tfunction(st) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (st) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar studyCount = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'.customStudyClass')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'.help-block')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.children().length;\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parseInt(studyCount) >= 1) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.prop(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'disabled',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse);\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (isFromValid(\"#basicInfoFormId\"))\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidateAppId(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfunction(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalid) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 415}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY2MTc1OA==", "bodyText": "Should the & here by &? I'm not exactly sure how escaping is done for jsp tags", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411661758", "createdAt": "2020-04-20T20:15:25Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/consentInfo.jsp", "diffHunk": "@@ -1,17 +1,22 @@\n-<%@ page language=\"java\" contentType=\"text/html; charset=ISO-8859-1\" pageEncoding=\"ISO-8859-1\"%>\n+<%@ page language=\"java\" contentType=\"text/html; charset=ISO-8859-1\"\n+\tpageEncoding=\"ISO-8859-1\"%>\n <%@ taglib prefix=\"form\" uri=\"http://www.springframework.org/tags/form\"%>\n <%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\"%>\n-<%@ taglib uri=\"http://java.sun.com/jsp/jstl/functions\" prefix=\"fn\" %>\n+<%@ taglib uri=\"http://java.sun.com/jsp/jstl/functions\" prefix=\"fn\"%>\n <%@ taglib prefix=\"spring\" uri=\"http://www.springframework.org/tags\"%>\n <!-- ============================================================== -->\n <!-- Start right Content here -->\n <!-- ============================================================== -->\n- <div class=\"col-sm-10 col-rc white-bg p-none\">\n+<div class=\"col-sm-10 col-rc white-bg p-none\">\n \t<!--  Start top tab section-->\n-\t<form:form action=\"/studybuilder/adminStudies/saveOrUpdateConsentInfo.do?_S=${param._S}&${_csrf.parameterName}=${_csrf.token}\" name=\"consentInfoFormId\" id=\"consentInfoFormId\" method=\"post\" data-toggle=\"validator\" role=\"form\" autocomplete=\"off\">\n+\t<form:form\n+\t\taction=\"/studybuilder/adminStudies/saveOrUpdateConsentInfo.do?_S=${param._S}&${_csrf.parameterName}=${_csrf.token}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY3OTYxNg==", "bodyText": "User defined values should be escaped here and throughout", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411679616", "createdAt": "2020-04-20T20:45:01Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/consentInfo.jsp", "diffHunk": "@@ -1,17 +1,22 @@\n-<%@ page language=\"java\" contentType=\"text/html; charset=ISO-8859-1\" pageEncoding=\"ISO-8859-1\"%>\n+<%@ page language=\"java\" contentType=\"text/html; charset=ISO-8859-1\"\n+\tpageEncoding=\"ISO-8859-1\"%>\n <%@ taglib prefix=\"form\" uri=\"http://www.springframework.org/tags/form\"%>\n <%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\"%>\n-<%@ taglib uri=\"http://java.sun.com/jsp/jstl/functions\" prefix=\"fn\" %>\n+<%@ taglib uri=\"http://java.sun.com/jsp/jstl/functions\" prefix=\"fn\"%>\n <%@ taglib prefix=\"spring\" uri=\"http://www.springframework.org/tags\"%>\n <!-- ============================================================== -->\n <!-- Start right Content here -->\n <!-- ============================================================== -->\n- <div class=\"col-sm-10 col-rc white-bg p-none\">\n+<div class=\"col-sm-10 col-rc white-bg p-none\">\n \t<!--  Start top tab section-->\n-\t<form:form action=\"/studybuilder/adminStudies/saveOrUpdateConsentInfo.do?_S=${param._S}&${_csrf.parameterName}=${_csrf.token}\" name=\"consentInfoFormId\" id=\"consentInfoFormId\" method=\"post\" data-toggle=\"validator\" role=\"form\" autocomplete=\"off\">\n+\t<form:form\n+\t\taction=\"/studybuilder/adminStudies/saveOrUpdateConsentInfo.do?_S=${param._S}&${_csrf.parameterName}=${_csrf.token}\"\n+\t\tname=\"consentInfoFormId\" id=\"consentInfoFormId\" method=\"post\"\n+\t\tdata-toggle=\"validator\" role=\"form\" autocomplete=\"off\">\n \t\t<input type=\"hidden\" id=\"id\" name=\"id\" value=\"${consentInfoBo.id}\">\n \t\t<c:if test=\"${not empty consentInfoBo.id}\">\n-\t\t\t<input type=\"hidden\" id=\"studyId\" name=\"studyId\" value=\"${consentInfoBo.studyId}\">\n+\t\t\t<input type=\"hidden\" id=\"studyId\" name=\"studyId\"\n+\t\t\t\tvalue=\"${consentInfoBo.studyId}\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY4MjQ1Ng==", "bodyText": "Remove space before period", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r411682456", "createdAt": "2020-04-20T20:49:44Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/consentInfo.jsp", "diffHunk": "@@ -22,87 +27,125 @@\n \t\t\t<div class=\"text-right\">\n \t\t\t\t<div class=\"black-md-f dis-line pull-left line34\">\n \t\t\t\t\t<span class=\"pr-sm cur-pointer\" onclick=\"goToBackPage(this);\">\n-\t\t\t\t\t\t<img src=\"../images/icons/back-b.png\" alt=\"\"/></span>\n+\t\t\t\t\t\t<img src=\"../images/icons/back-b.png\" alt=\"\" />\n+\t\t\t\t\t</span>\n \t\t\t\t\t<c:if test=\"${empty consentInfoBo.id}\"> Add Consent Section</c:if>\n-\t\t\t\t\t<c:if test=\"${not empty consentInfoBo.id && actionPage eq 'addEdit'}\">Edit Consent Section</c:if>\n-\t\t\t\t\t<c:if test=\"${not empty consentInfoBo.id && actionPage eq 'view'}\">View Consent Section <c:set var=\"isLive\">${_S}isLive</c:set>${not empty  sessionScope[isLive]?'<span class=\"eye-inc ml-sm vertical-align-text-top\"></span>':''}</c:if>\n+\t\t\t\t\t<c:if\n+\t\t\t\t\t\ttest=\"${not empty consentInfoBo.id && actionPage eq 'addEdit'}\">Edit Consent Section</c:if>\n+\t\t\t\t\t<c:if test=\"${not empty consentInfoBo.id && actionPage eq 'view'}\">View Consent Section <c:set\n+\t\t\t\t\t\t\tvar=\"isLive\">${_S}isLive</c:set>${not empty  sessionScope[isLive]?'<span class=\"eye-inc ml-sm vertical-align-text-top\"></span>':''}</c:if>\n \t\t\t\t</div>\n \t\t\t\t<div class=\"dis-line form-group mb-none\">\n-\t\t\t\t\t<button type=\"button\" class=\"btn btn-default gray-btn\" onclick=\"goToBackPage(this);\">Cancel</button>\n+\t\t\t\t\t<button type=\"button\" class=\"btn btn-default gray-btn\"\n+\t\t\t\t\t\tonclick=\"goToBackPage(this);\">Cancel</button>\n \t\t\t\t</div>\n \t\t\t\t<div class=\"dis-line form-group mb-none\">\n-\t\t\t\t\t<button type=\"button\" class=\"btn btn-default gray-btn ConsentButtonHide ml-sm mr-sm\" onclick=\"saveConsentInfo(this);\">Save</button>\n+\t\t\t\t\t<button type=\"button\"\n+\t\t\t\t\t\tclass=\"btn btn-default gray-btn ConsentButtonHide ml-sm mr-sm\"\n+\t\t\t\t\t\tonclick=\"saveConsentInfo(this);\">Save</button>\n \t\t\t\t</div>\n \t\t\t\t<div class=\"dis-line form-group mb-none\">\n-\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary blue-btn ConsentButtonHide\" id=\"doneId\">Done</button>\n+\t\t\t\t\t<button type=\"button\"\n+\t\t\t\t\t\tclass=\"btn btn-primary blue-btn ConsentButtonHide\" id=\"doneId\">Done</button>\n \t\t\t\t</div>\n \t\t\t</div>\n \t\t</div>\n \t\t<!--  End  top tab section-->\n \t\t<!--  Start body tab section -->\n \t\t<div class=\"right-content-body\">\n-\t\t\t<div class=\"gray-xs-f mb-xs\">Consent Section Type<span class=\"requiredStar\">*</span></div>\n+\t\t\t<div class=\"gray-xs-f mb-xs\">\n+\t\t\t\tConsent Section Type<span class=\"requiredStar\">*</span>\n+\t\t\t</div>\n \t\t\t<div class=\"mt-sm form-group\">\n-\t\t\t\t<span class=\"radio radio-info radio-inline p-45\"> \n-\t\t\t\t\t<input type=\"radio\" id=\"inlineRadio1\" value=\"ResearchKit/ResearchStack\" name=\"consentItemType\" required data-error=\"Please choose type\"\n-\t\t\t\t\t ${empty consentInfoBo.consentItemType  || consentInfoBo.consentItemType=='ResearchKit/ResearchStack' ?'checked':''}>\n+\t\t\t\t<span class=\"radio radio-info radio-inline p-45\"> <input\n+\t\t\t\t\ttype=\"radio\" id=\"inlineRadio1\" value=\"ResearchKit/ResearchStack\"\n+\t\t\t\t\tname=\"consentItemType\" required data-error=\"Please choose type\"\n+\t\t\t\t\t${empty consentInfoBo.consentItemType  || consentInfoBo.consentItemType=='ResearchKit/ResearchStack' ?'checked':''}>\n \t\t\t\t\t<label for=\"inlineRadio1\">Default Options</label>\n-\t\t\t\t</span> \n-\t\t\t\t<span class=\"radio radio-inline p-45\"> \n-\t\t\t\t\t<input type=\"radio\" id=\"inlineRadio2\" value=\"Custom\" name=\"consentItemType\" required data-error=\"Please choose type\" ${consentInfoBo.consentItemType=='Custom'?'checked':''}> \n-\t\t\t\t\t<label for=\"inlineRadio2\">Create Custom</label>\n+\t\t\t\t</span> <span class=\"radio radio-inline p-45\"> <input type=\"radio\"\n+\t\t\t\t\tid=\"inlineRadio2\" value=\"Custom\" name=\"consentItemType\" required\n+\t\t\t\t\tdata-error=\"Please choose type\"\n+\t\t\t\t\t${consentInfoBo.consentItemType=='Custom'?'checked':''}> <label\n+\t\t\t\t\tfor=\"inlineRadio2\">Create Custom</label>\n \t\t\t\t</span>\n \t\t\t\t<div class=\"help-block with-errors red-txt\"></div>\n \t\t\t</div>\n \t\t\t<div id=\"titleContainer\">\n-\t\t\t\t<div class=\"gray-xs-f mb-xs\">Topic <span class=\"requiredStar\">*</span></div>\n+\t\t\t\t<div class=\"gray-xs-f mb-xs\">\n+\t\t\t\t\tTopic <span class=\"requiredStar\">*</span>\n+\t\t\t\t</div>\n \t\t\t\t<div class=\"col-md-5 p-none form-group elaborateClass consentTitle\">\n-\t\t\t\t\t<select class=\"selectpicker\" id=\"consentItemTitleId\" name=\"consentItemTitleId\"  required data-error=\"Please choose one title\">\n+\t\t\t\t\t<select class=\"selectpicker\" id=\"consentItemTitleId\"\n+\t\t\t\t\t\tname=\"consentItemTitleId\" required\n+\t\t\t\t\t\tdata-error=\"Please choose one title\">\n \t\t\t\t\t\t<option value=\"\">Select</option>\n \t\t\t\t\t\t<c:forEach items=\"${consentMasterInfoList}\" var=\"consentMaster\">\n-\t\t\t\t\t\t\t<option value=\"${consentMaster.id}\" ${consentInfoBo.consentItemTitleId eq consentMaster.id  ? 'selected' : ''}>${consentMaster.title}</option>\n+\t\t\t\t\t\t\t<option value=\"${consentMaster.id}\"\n+\t\t\t\t\t\t\t\t${consentInfoBo.consentItemTitleId eq consentMaster.id  ? 'selected' : ''}>${consentMaster.title}</option>\n \t\t\t\t\t\t</c:forEach>\n \t\t\t\t\t</select>\n \t\t\t\t\t<div class=\"help-block with-errors red-txt\"></div>\n \t\t\t\t</div>\n \t\t\t</div>\n \t\t\t<div class=\"clearfix\"></div>\n-\t\t\t<input type=\"hidden\" id=\"displayTitleTemp\" name=\"displayTitleTemp\" value=\"${consentInfoBo.displayTitle}\">\n-\t\t\t<input type=\"hidden\" id=\"briefSummaryTemp\" name=\"briefSummaryTemp\" value=\"${consentInfoBo.briefSummary}\">\n-\t\t\t<textarea name=\"hide\" id=\"elaboratedTemp\" style=\"display:none;\">${consentInfoBo.elaborated}</textarea>\n+\t\t\t<input type=\"hidden\" id=\"displayTitleTemp\" name=\"displayTitleTemp\"\n+\t\t\t\tvalue=\"${consentInfoBo.displayTitle}\"> <input type=\"hidden\"\n+\t\t\t\tid=\"briefSummaryTemp\" name=\"briefSummaryTemp\"\n+\t\t\t\tvalue=\"${consentInfoBo.briefSummary}\">\n+\t\t\t<textarea name=\"hide\" id=\"elaboratedTemp\" style=\"display: none;\">${consentInfoBo.elaborated}</textarea>\n \t\t\t<div id=\"displayTitleId\">\n-\t\t\t\t<div class=\"gray-xs-f mb-xs\">Title <small>(75 characters max)</small><span class=\"requiredStar\">*</span></div>\n+\t\t\t\t<div class=\"gray-xs-f mb-xs\">\n+\t\t\t\t\tTitle <small>(75 characters max)</small><span class=\"requiredStar\">*</span>\n+\t\t\t\t</div>\n \t\t\t\t<div class=\"form-group\">\n-\t\t\t\t\t<input autofocus=\"autofocus\" type=\"text\" id=\"displayTitle\" class=\"form-control\" name=\"displayTitle\" required value=\"${fn:escapeXml(consentInfoBo.displayTitle)}\" maxlength=\"75\">\n+\t\t\t\t\t<input autofocus=\"autofocus\" type=\"text\" id=\"displayTitle\"\n+\t\t\t\t\t\tclass=\"form-control\" name=\"displayTitle\" required\n+\t\t\t\t\t\tvalue=\"${fn:escapeXml(consentInfoBo.displayTitle)}\" maxlength=\"75\">\n \t\t\t\t\t<div class=\"help-block with-errors red-txt\"></div>\n \t\t\t\t</div>\n \t\t\t</div>\n \t\t\t<div>\n-\t\t\t\t<div class=\"gray-xs-f mb-xs\">Brief Summary <small>(500 characters max)</small><span class=\"requiredStar\">*</span></div>\n+\t\t\t\t<div class=\"gray-xs-f mb-xs\">\n+\t\t\t\t\tBrief Summary <small>(500 characters max)</small><span\n+\t\t\t\t\t\tclass=\"requiredStar\">*</span>\n+\t\t\t\t</div>\n \t\t\t\t<div class=\"form-group\">\n-\t\t\t\t\t<textarea class=\"form-control\" rows=\"7\" id=\"briefSummary\" name=\"briefSummary\" required maxlength=\"500\">${consentInfoBo.briefSummary}</textarea>\n+\t\t\t\t\t<textarea class=\"form-control\" rows=\"7\" id=\"briefSummary\"\n+\t\t\t\t\t\tname=\"briefSummary\" required maxlength=\"500\">${consentInfoBo.briefSummary}</textarea>\n \t\t\t\t\t<div class=\"help-block with-errors red-txt\"></div>\n \t\t\t\t</div>\n \t\t\t</div>\n \t\t\t<div class=\"clearfix\"></div>\n \t\t\t<div>\n-\t\t\t\t<div class=\"gray-xs-f mb-xs\">Elaborated Content (appears in a 'Learn More' section) <span class=\"requiredStar\">*</span></div>\n+\t\t\t\t<div class=\"gray-xs-f mb-xs\">\n+\t\t\t\t\tElaborated Content (appears in a 'Learn More' section) <span\n+\t\t\t\t\t\tclass=\"requiredStar\">*</span>\n+\t\t\t\t</div>\n \t\t\t\t<div class=\"form-group\">\n-\t\t\t\t\t<textarea class=\"\" rows=\"8\" id=\"elaboratedRTE\" name=\"elaboratedRTE\" required>${consentInfoBo.elaborated}</textarea>\n+\t\t\t\t\t<textarea class=\"\" rows=\"8\" id=\"elaboratedRTE\" name=\"elaboratedRTE\"\n+\t\t\t\t\t\trequired>${consentInfoBo.elaborated}</textarea>\n \t\t\t\t\t<div class=\"help-block with-errors red-txt\"></div>\n \t\t\t\t</div>\n \t\t\t</div>\n \t\t\t<div class=\"clearfix\"></div>\n \t\t\t<div>\n-\t\t\t\t<div class=\"gray-xs-f mb-xs\">Show as a visual step? <span class=\"requiredStar\">*</span><span class=\"ml-xs sprites_v3 filled-tooltip\" data-toggle=\"tooltip\" title=\"Choose Yes if you wish this section to appear as a standalone Visual Step in the app prior to the full Consent Document. A Visual Step screen shows the section Title, and the Brief Summary with a link to the elaborated version of the content.\"></span></div>\n+\t\t\t\t<div class=\"gray-xs-f mb-xs\">\n+\t\t\t\t\tShow as a visual step? <span class=\"requiredStar\">*</span><span\n+\t\t\t\t\t\tclass=\"ml-xs sprites_v3 filled-tooltip\" data-toggle=\"tooltip\"\n+\t\t\t\t\t\ttitle=\"Choose Yes if you wish this section to appear as a standalone Visual Step in the app prior to the full Consent Document . A Visual Step screen shows the section Title, and the Brief Summary with a link to the elaborated version of the content.\"></span>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 164}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MzkzNzM1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#pullrequestreview-397393735", "createdAt": "2020-04-21T14:34:53Z", "commit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNDozNDo1M1rOGJJJaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNDo1MDozOFrOGJJ_TQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI0MDIzMw==", "bodyText": "remove commented code", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r412240233", "createdAt": "2020-04-21T14:34:53Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/consentInfo.jsp", "diffHunk": "@@ -113,311 +156,435 @@\n </div>\n <!-- End right Content here -->\n <script type=\"text/javascript\">\n-$(document).ready(function(){  \n-    // Fancy Scroll Bar\n-    \n-    <c:if test=\"${actionPage eq 'view'}\">\n-\t    $('#consentInfoFormId input,textarea').prop('disabled', true);\n-\t    $('#consentInfoFormId .elaborateClass').addClass('linkDis');\n-\t    $('.ConsentButtonHide').hide();\n-    </c:if>\n-    \n-    if('${consentInfoBo.id}' == ''){\n-    \t $(\"#displayTitleId\").hide();\n-    }\n-    $(\".menuNav li\").removeClass('active');\n-    $(\".fifthConsent\").addClass('active');\n-\t$(\"#createStudyId\").show();\n-    //load the list of titles when the page loads\n-\tconsentInfoDetails();\n-\tinitTinyMCEEditor();\n-    //get the selected consent type on change\n-    $('input[name=\"consentItemType\"]').change(function(){\n-    \t$('.visualStepDiv').find(\".help-block\").empty();\n-    \tresetValidation($(\"#consentInfoFormId\"));\n-    \t\n-    \tif (this.value == 'Custom') {\n-    \t\t$(\"#displayTitleId\").show();\n-    \t\t$(\"#titleContainer\").hide();\n-    \t\t$(\"#consentItemTitleId\").prop('required', false);\n-    \t}else{\n-    \t\t\n-    \t\tconsentInfoDetails();\n-    \t\t$(\"#consentItemTitleId\").prop('required', true);\n-    \t\t$(\"#titleContainer\").show();\n-    \t}\n-    \taddDefaultData();\n-    });\n-   \n-    $(\"#consentItemTitleId\").change(function(){\n-    \tvar titleText = this.options[this.selectedIndex].text;\n-    \tresetValidation($(\"#consentInfoFormId\"));\n-    \t\n-    \t$(\".consentTitle\").parent().removeClass('has-error has-danger');\n-\t\t$(\".consentTitle\").parent().find(\".help-block\").empty();\n-\t\t$(\"#displayTitle\").parent().removeClass('has-error has-danger');\n-\t\t$(\"#displayTitle\").parent().find(\".help-block\").empty();\n-    \tif(titleText != null && titleText != '' && typeof titleText != 'undefined'){\n-    \t\t$(\"#displayTitleId\").show();\n-    \t\tif(titleText != 'Select'){\n-    \t\t\t$(\"#displayTitle\").val(titleText);\n-    \t\t}else{\n-    \t\t\t$(\"#displayTitle\").val('');\n-    \t\t}\n-    \t}\n-    });\n-    \n-    if('${consentInfoBo.consentItemType}' == 'Custom'){\n-    \t$(\"#titleContainer\").hide();\n-    \t$(\"#consentItemTitleId\").prop('required',false);\n-    }else{\n-    \t$(\"#titleContainer\").show();\n-    \t$(\"#consentItemTitleId\").prop('required',true);\n-    }\n-    //submit the form\n-    $(\"#doneId\").on('click', function(){\n-    \t$(\"#doneId\").prop('disabled', true);\n-    \ttinyMCE.triggerSave();\n-    \tvalid =  maxLenValEditor();\n-    \tif(valid && isFromValid(\"#consentInfoFormId\")){\n-    \t\tvar visualStepData = '';\n-    \t\t\n-    \t\tvisualStepData = $('input[name=visualStep]:checked').val();\n-    \t\tif(visualStepData != '' && visualStepData!= null && typeof visualStepData != 'undefined'){\n-    \t\t\t\n-    \t\t\tvar elaboratedContent = tinymce.get('elaboratedRTE').getContent({ format: 'raw' });\n-            \telaboratedContent = replaceSpecialCharacters(elaboratedContent);\n-            \tvar briefSummaryText = replaceSpecialCharacters($(\"#briefSummary\").val());\n-            \t$(\"#elaborated\").val(elaboratedContent);\n-            \t$(\"#briefSummary\").val(briefSummaryText);\n-            \tvar displayTitleText = $(\"#displayTitle\").val();\n-            \tdisplayTitleText = replaceSpecialCharacters(displayTitleText);\n-            \t$(\"#displayTitle\").val(displayTitleText);\n-        \t\t$(\"#consentInfoFormId\").submit();\n-        \t\t\n-    \t\t}else{\n-    \t\t\t$('.visualStepDiv').addClass('has-error has-danger');\n-    \t\t\t$('.visualStepDiv').find(\".help-block\").empty().html('<ul class=\"list-unstyled\"><li>Please choose one visual step</li></ul>');\n-    \t\t\t$(\"#doneId\").prop('disabled', false);\n-    \t\t}\n-    \t}else{\n-    \t\t$(\"#doneId\").prop('disabled', false);\n-    \t}\n-    });\n-});\n+\t$(document)\n+\t\t\t.ready(\n+\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t// Fancy Scroll Bar\n \n-function saveConsentInfo(item){\n-\tvar consentInfo = new Object();\n-\tvar consentInfoId = $(\"#id\").val();\n-\tvar study_id=$(\"#studyId\").val();\n-\tvar consentType = $('input[name=\"consentItemType\"]:checked').val();\n-\tvar consentitemtitleid = $(\"#consentItemTitleId\").val();\n-\tvar displayTitleText = $(\"#displayTitle\").val();\n-\tdisplayTitleText = replaceSpecialCharacters(displayTitleText);\n-\tvar briefSummaryText = $(\"#briefSummary\").val();\n-\tbriefSummaryText = replaceSpecialCharacters(briefSummaryText);\n-\tvar elaboratedText = tinymce.get('elaboratedRTE').getContent({ format: 'raw' });\n-\telaboratedText = replaceSpecialCharacters(elaboratedText);\n-\t\n-\tvar visual_step= $('input[name=\"visualStep\"]:checked').val();\n-\t\n-\tvar valid =  maxLenValEditor();\n-\t\n-\tif(valid && (study_id != null && study_id != '' && typeof study_id != 'undefined') \n-\t\t\t&& (displayTitleText != null && displayTitleText != '' && typeof displayTitleText != 'undefined')){\n-\t\t$(item).prop('disabled', true);\n-\t\tif(null != consentInfoId){\n-\t\t\tconsentInfo.id=consentInfoId;\n-\t\t}\n-\t\tconsentInfo.studyId=study_id;\n-\t\tif(null !=  consentType){\n-\t\t\tconsentInfo.consentItemType=consentType;\n-\t\t}\n-\t\tif(null != consentitemtitleid){\n-\t\t\tconsentInfo.consentItemTitleId=consentitemtitleid;\n-\t\t}\n-\t\tif(null != briefSummaryText){\n-\t\t\tconsentInfo.briefSummary=briefSummaryText;\n-\t\t}\n-\t\tif(null != elaboratedText){\n-\t\t\tconsentInfo.elaborated=elaboratedText;\n-\t\t}\n-\t\tif(null != visual_step){\n-\t\t\tconsentInfo.visualStep=visual_step;\n-\t\t}\n-\t\tif(null != displayTitleText){\n-\t\t\tconsentInfo.displayTitle = displayTitleText;\n+\t\t\t\t\t\t<c:if test=\"${actionPage eq 'view'}\">\n+\t\t\t\t\t\t$('#consentInfoFormId input,textarea').prop('disabled',\n+\t\t\t\t\t\t\t\ttrue);\n+\t\t\t\t\t\t$('#consentInfoFormId .elaborateClass').addClass(\n+\t\t\t\t\t\t\t\t'linkDis');\n+\t\t\t\t\t\t$('.ConsentButtonHide').hide();\n+\t\t\t\t\t\t</c:if>\n+\n+\t\t\t\t\t\tif ('${consentInfoBo.id}' == '') {\n+\t\t\t\t\t\t\t$(\"#displayTitleId\").hide();\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\t$(\".menuNav li\").removeClass('active');\n+\t\t\t\t\t\t$(\".fifthConsent\").addClass('active');\n+\t\t\t\t\t\t$(\"#createStudyId\").show();\n+\t\t\t\t\t\t//load the list of titles when the page loads\n+\t\t\t\t\t\tconsentInfoDetails();\n+\t\t\t\t\t\t//initTinyMCEEditor();\n+\t\t\t\t\t\tinitSummernoteEditor();\n+\t\t\t\t\t\t//get the selected consent type on change\n+\t\t\t\t\t\t$('input[name=\"consentItemType\"]').change(\n+\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t$('.visualStepDiv').find(\".help-block\")\n+\t\t\t\t\t\t\t\t\t\t\t.empty();\n+\t\t\t\t\t\t\t\t\tresetValidation($(\"#consentInfoFormId\"));\n+\n+\t\t\t\t\t\t\t\t\tif (this.value == 'Custom') {\n+\t\t\t\t\t\t\t\t\t\t$(\"#displayTitleId\").show();\n+\t\t\t\t\t\t\t\t\t\t$(\"#titleContainer\").hide();\n+\t\t\t\t\t\t\t\t\t\t$(\"#consentItemTitleId\").prop(\n+\t\t\t\t\t\t\t\t\t\t\t\t'required', false);\n+\t\t\t\t\t\t\t\t\t} else {\n+\n+\t\t\t\t\t\t\t\t\t\tconsentInfoDetails();\n+\t\t\t\t\t\t\t\t\t\t$(\"#consentItemTitleId\").prop(\n+\t\t\t\t\t\t\t\t\t\t\t\t'required', true);\n+\t\t\t\t\t\t\t\t\t\t$(\"#titleContainer\").show();\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\taddDefaultData();\n+\n+\t\t\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t$(\"#consentItemTitleId\")\n+\t\t\t\t\t\t\t\t.change(\n+\t\t\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t\t\tvar titleText = this.options[this.selectedIndex].text;\n+\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#consentInfoFormId\"));\n+\n+\t\t\t\t\t\t\t\t\t\t\t$(\".consentTitle\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'has-error has-danger');\n+\t\t\t\t\t\t\t\t\t\t\t$(\".consentTitle\").parent().find(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\".help-block\").empty();\n+\t\t\t\t\t\t\t\t\t\t\t$(\"#displayTitle\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'has-error has-danger');\n+\t\t\t\t\t\t\t\t\t\t\t$(\"#displayTitle\").parent().find(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\".help-block\").empty();\n+\t\t\t\t\t\t\t\t\t\t\tif (titleText != null\n+\t\t\t\t\t\t\t\t\t\t\t\t\t&& titleText != ''\n+\t\t\t\t\t\t\t\t\t\t\t\t\t&& typeof titleText != 'undefined') {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#displayTitleId\").show();\n+\t\t\t\t\t\t\t\t\t\t\t\tif (titleText != 'Select') {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#displayTitle\").val(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitleText);\n+\t\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#displayTitle\").val('');\n+\t\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\tif ('${consentInfoBo.consentItemType}' == 'Custom') {\n+\t\t\t\t\t\t\t$(\"#titleContainer\").hide();\n+\t\t\t\t\t\t\t$(\"#consentItemTitleId\").prop('required', false);\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t$(\"#titleContainer\").show();\n+\t\t\t\t\t\t\t$(\"#consentItemTitleId\").prop('required', true);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\t//submit the form\n+\t\t\t\t\t\t$(\"#doneId\")\n+\t\t\t\t\t\t\t\t.on(\n+\t\t\t\t\t\t\t\t\t\t'click',\n+\t\t\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t\t\t$(\"#doneId\").prop('disabled', true);\n+\t\t\t\t\t\t\t\t\t\t\t$('#elaboratedRTE').summernote(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'code');\n+\t\t\t\t\t\t\t\t\t\t\tvalid = maxLenValEditor();\n+\t\t\t\t\t\t\t\t\t\t\tif (isFromValid(\"#consentInfoFormId\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t&& valid) {\n+\t\t\t\t\t\t\t\t\t\t\t\tvar visualStepData = '';\n+\n+\t\t\t\t\t\t\t\t\t\t\t\tvisualStepData = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'input[name=visualStep]:checked')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.val();\n+\t\t\t\t\t\t\t\t\t\t\t\tif (visualStepData != ''\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t&& visualStepData != null\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t&& typeof visualStepData != 'undefined') {\n+\n+\t\t\t\t\t\t\t\t\t\t\t\t\t//var elaboratedContent = tinymce.get('elaboratedRTE').getContent({ format: 'raw' });\n+\t\t\t\t\t\t\t\t\t\t\t\t\tvar elaboratedContent = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'#elaboratedRTE')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.summernote('code');\n+\t\t\t\t\t\t\t\t\t\t\t\t\telaboratedContent = replaceSpecialCharacters(elaboratedContent);\n+\t\t\t\t\t\t\t\t\t\t\t\t\tvar briefSummaryText = replaceSpecialCharacters($(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"#briefSummary\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.val());\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#elaborated\").val(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\telaboratedContent);\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#briefSummary\").val(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbriefSummaryText);\n+\t\t\t\t\t\t\t\t\t\t\t\t\tvar displayTitleText = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"#displayTitle\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.val();\n+\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayTitleText = replaceSpecialCharacters(displayTitleText);\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#displayTitle\").val(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayTitleText);\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#consentInfoFormId\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.submit();\n+\n+\t\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$('.visualStepDiv')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.addClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'has-error has-danger');\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$('.visualStepDiv')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\".help-block\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.empty()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.html(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<ul class=\"list-unstyled\"><li>Please choose one visual step</li></ul>');\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#doneId\").prop(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'disabled', false);\n+\t\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#doneId\").prop('disabled',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse);\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t});\n+\n+\tfunction saveConsentInfo(item) {\n+\t\tvar consentInfo = new Object();\n+\t\tvar consentInfoId = $(\"#id\").val();\n+\t\tvar study_id = $(\"#studyId\").val();\n+\t\tvar consentType = $('input[name=\"consentItemType\"]:checked').val();\n+\t\tvar consentitemtitleid = $(\"#consentItemTitleId\").val();\n+\t\tvar displayTitleText = $(\"#displayTitle\").val();\n+\t\tdisplayTitleText = replaceSpecialCharacters(displayTitleText);\n+\t\tvar briefSummaryText = $(\"#briefSummary\").val();\n+\t\tbriefSummaryText = replaceSpecialCharacters(briefSummaryText);\n+\t\t//var elaboratedText = tinymce.get('elaboratedRTE').getContent({ format: 'raw' });$('#elaboratedRTE').summernote('code')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 479}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI0MzE3Nw==", "bodyText": "remove code here too", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r412243177", "createdAt": "2020-04-21T14:38:12Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/consentInfo.jsp", "diffHunk": "@@ -113,311 +156,435 @@\n </div>\n <!-- End right Content here -->\n <script type=\"text/javascript\">\n-$(document).ready(function(){  \n-    // Fancy Scroll Bar\n-    \n-    <c:if test=\"${actionPage eq 'view'}\">\n-\t    $('#consentInfoFormId input,textarea').prop('disabled', true);\n-\t    $('#consentInfoFormId .elaborateClass').addClass('linkDis');\n-\t    $('.ConsentButtonHide').hide();\n-    </c:if>\n-    \n-    if('${consentInfoBo.id}' == ''){\n-    \t $(\"#displayTitleId\").hide();\n-    }\n-    $(\".menuNav li\").removeClass('active');\n-    $(\".fifthConsent\").addClass('active');\n-\t$(\"#createStudyId\").show();\n-    //load the list of titles when the page loads\n-\tconsentInfoDetails();\n-\tinitTinyMCEEditor();\n-    //get the selected consent type on change\n-    $('input[name=\"consentItemType\"]').change(function(){\n-    \t$('.visualStepDiv').find(\".help-block\").empty();\n-    \tresetValidation($(\"#consentInfoFormId\"));\n-    \t\n-    \tif (this.value == 'Custom') {\n-    \t\t$(\"#displayTitleId\").show();\n-    \t\t$(\"#titleContainer\").hide();\n-    \t\t$(\"#consentItemTitleId\").prop('required', false);\n-    \t}else{\n-    \t\t\n-    \t\tconsentInfoDetails();\n-    \t\t$(\"#consentItemTitleId\").prop('required', true);\n-    \t\t$(\"#titleContainer\").show();\n-    \t}\n-    \taddDefaultData();\n-    });\n-   \n-    $(\"#consentItemTitleId\").change(function(){\n-    \tvar titleText = this.options[this.selectedIndex].text;\n-    \tresetValidation($(\"#consentInfoFormId\"));\n-    \t\n-    \t$(\".consentTitle\").parent().removeClass('has-error has-danger');\n-\t\t$(\".consentTitle\").parent().find(\".help-block\").empty();\n-\t\t$(\"#displayTitle\").parent().removeClass('has-error has-danger');\n-\t\t$(\"#displayTitle\").parent().find(\".help-block\").empty();\n-    \tif(titleText != null && titleText != '' && typeof titleText != 'undefined'){\n-    \t\t$(\"#displayTitleId\").show();\n-    \t\tif(titleText != 'Select'){\n-    \t\t\t$(\"#displayTitle\").val(titleText);\n-    \t\t}else{\n-    \t\t\t$(\"#displayTitle\").val('');\n-    \t\t}\n-    \t}\n-    });\n-    \n-    if('${consentInfoBo.consentItemType}' == 'Custom'){\n-    \t$(\"#titleContainer\").hide();\n-    \t$(\"#consentItemTitleId\").prop('required',false);\n-    }else{\n-    \t$(\"#titleContainer\").show();\n-    \t$(\"#consentItemTitleId\").prop('required',true);\n-    }\n-    //submit the form\n-    $(\"#doneId\").on('click', function(){\n-    \t$(\"#doneId\").prop('disabled', true);\n-    \ttinyMCE.triggerSave();\n-    \tvalid =  maxLenValEditor();\n-    \tif(valid && isFromValid(\"#consentInfoFormId\")){\n-    \t\tvar visualStepData = '';\n-    \t\t\n-    \t\tvisualStepData = $('input[name=visualStep]:checked').val();\n-    \t\tif(visualStepData != '' && visualStepData!= null && typeof visualStepData != 'undefined'){\n-    \t\t\t\n-    \t\t\tvar elaboratedContent = tinymce.get('elaboratedRTE').getContent({ format: 'raw' });\n-            \telaboratedContent = replaceSpecialCharacters(elaboratedContent);\n-            \tvar briefSummaryText = replaceSpecialCharacters($(\"#briefSummary\").val());\n-            \t$(\"#elaborated\").val(elaboratedContent);\n-            \t$(\"#briefSummary\").val(briefSummaryText);\n-            \tvar displayTitleText = $(\"#displayTitle\").val();\n-            \tdisplayTitleText = replaceSpecialCharacters(displayTitleText);\n-            \t$(\"#displayTitle\").val(displayTitleText);\n-        \t\t$(\"#consentInfoFormId\").submit();\n-        \t\t\n-    \t\t}else{\n-    \t\t\t$('.visualStepDiv').addClass('has-error has-danger');\n-    \t\t\t$('.visualStepDiv').find(\".help-block\").empty().html('<ul class=\"list-unstyled\"><li>Please choose one visual step</li></ul>');\n-    \t\t\t$(\"#doneId\").prop('disabled', false);\n-    \t\t}\n-    \t}else{\n-    \t\t$(\"#doneId\").prop('disabled', false);\n-    \t}\n-    });\n-});\n+\t$(document)\n+\t\t\t.ready(\n+\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t// Fancy Scroll Bar\n \n-function saveConsentInfo(item){\n-\tvar consentInfo = new Object();\n-\tvar consentInfoId = $(\"#id\").val();\n-\tvar study_id=$(\"#studyId\").val();\n-\tvar consentType = $('input[name=\"consentItemType\"]:checked').val();\n-\tvar consentitemtitleid = $(\"#consentItemTitleId\").val();\n-\tvar displayTitleText = $(\"#displayTitle\").val();\n-\tdisplayTitleText = replaceSpecialCharacters(displayTitleText);\n-\tvar briefSummaryText = $(\"#briefSummary\").val();\n-\tbriefSummaryText = replaceSpecialCharacters(briefSummaryText);\n-\tvar elaboratedText = tinymce.get('elaboratedRTE').getContent({ format: 'raw' });\n-\telaboratedText = replaceSpecialCharacters(elaboratedText);\n-\t\n-\tvar visual_step= $('input[name=\"visualStep\"]:checked').val();\n-\t\n-\tvar valid =  maxLenValEditor();\n-\t\n-\tif(valid && (study_id != null && study_id != '' && typeof study_id != 'undefined') \n-\t\t\t&& (displayTitleText != null && displayTitleText != '' && typeof displayTitleText != 'undefined')){\n-\t\t$(item).prop('disabled', true);\n-\t\tif(null != consentInfoId){\n-\t\t\tconsentInfo.id=consentInfoId;\n-\t\t}\n-\t\tconsentInfo.studyId=study_id;\n-\t\tif(null !=  consentType){\n-\t\t\tconsentInfo.consentItemType=consentType;\n-\t\t}\n-\t\tif(null != consentitemtitleid){\n-\t\t\tconsentInfo.consentItemTitleId=consentitemtitleid;\n-\t\t}\n-\t\tif(null != briefSummaryText){\n-\t\t\tconsentInfo.briefSummary=briefSummaryText;\n-\t\t}\n-\t\tif(null != elaboratedText){\n-\t\t\tconsentInfo.elaborated=elaboratedText;\n-\t\t}\n-\t\tif(null != visual_step){\n-\t\t\tconsentInfo.visualStep=visual_step;\n-\t\t}\n-\t\tif(null != displayTitleText){\n-\t\t\tconsentInfo.displayTitle = displayTitleText;\n+\t\t\t\t\t\t<c:if test=\"${actionPage eq 'view'}\">\n+\t\t\t\t\t\t$('#consentInfoFormId input,textarea').prop('disabled',\n+\t\t\t\t\t\t\t\ttrue);\n+\t\t\t\t\t\t$('#consentInfoFormId .elaborateClass').addClass(\n+\t\t\t\t\t\t\t\t'linkDis');\n+\t\t\t\t\t\t$('.ConsentButtonHide').hide();\n+\t\t\t\t\t\t</c:if>\n+\n+\t\t\t\t\t\tif ('${consentInfoBo.id}' == '') {\n+\t\t\t\t\t\t\t$(\"#displayTitleId\").hide();\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\t$(\".menuNav li\").removeClass('active');\n+\t\t\t\t\t\t$(\".fifthConsent\").addClass('active');\n+\t\t\t\t\t\t$(\"#createStudyId\").show();\n+\t\t\t\t\t\t//load the list of titles when the page loads\n+\t\t\t\t\t\tconsentInfoDetails();\n+\t\t\t\t\t\t//initTinyMCEEditor();\n+\t\t\t\t\t\tinitSummernoteEditor();\n+\t\t\t\t\t\t//get the selected consent type on change\n+\t\t\t\t\t\t$('input[name=\"consentItemType\"]').change(\n+\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t$('.visualStepDiv').find(\".help-block\")\n+\t\t\t\t\t\t\t\t\t\t\t.empty();\n+\t\t\t\t\t\t\t\t\tresetValidation($(\"#consentInfoFormId\"));\n+\n+\t\t\t\t\t\t\t\t\tif (this.value == 'Custom') {\n+\t\t\t\t\t\t\t\t\t\t$(\"#displayTitleId\").show();\n+\t\t\t\t\t\t\t\t\t\t$(\"#titleContainer\").hide();\n+\t\t\t\t\t\t\t\t\t\t$(\"#consentItemTitleId\").prop(\n+\t\t\t\t\t\t\t\t\t\t\t\t'required', false);\n+\t\t\t\t\t\t\t\t\t} else {\n+\n+\t\t\t\t\t\t\t\t\t\tconsentInfoDetails();\n+\t\t\t\t\t\t\t\t\t\t$(\"#consentItemTitleId\").prop(\n+\t\t\t\t\t\t\t\t\t\t\t\t'required', true);\n+\t\t\t\t\t\t\t\t\t\t$(\"#titleContainer\").show();\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\taddDefaultData();\n+\n+\t\t\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t$(\"#consentItemTitleId\")\n+\t\t\t\t\t\t\t\t.change(\n+\t\t\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t\t\tvar titleText = this.options[this.selectedIndex].text;\n+\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#consentInfoFormId\"));\n+\n+\t\t\t\t\t\t\t\t\t\t\t$(\".consentTitle\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'has-error has-danger');\n+\t\t\t\t\t\t\t\t\t\t\t$(\".consentTitle\").parent().find(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\".help-block\").empty();\n+\t\t\t\t\t\t\t\t\t\t\t$(\"#displayTitle\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'has-error has-danger');\n+\t\t\t\t\t\t\t\t\t\t\t$(\"#displayTitle\").parent().find(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\".help-block\").empty();\n+\t\t\t\t\t\t\t\t\t\t\tif (titleText != null\n+\t\t\t\t\t\t\t\t\t\t\t\t\t&& titleText != ''\n+\t\t\t\t\t\t\t\t\t\t\t\t\t&& typeof titleText != 'undefined') {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#displayTitleId\").show();\n+\t\t\t\t\t\t\t\t\t\t\t\tif (titleText != 'Select') {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#displayTitle\").val(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitleText);\n+\t\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#displayTitle\").val('');\n+\t\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\tif ('${consentInfoBo.consentItemType}' == 'Custom') {\n+\t\t\t\t\t\t\t$(\"#titleContainer\").hide();\n+\t\t\t\t\t\t\t$(\"#consentItemTitleId\").prop('required', false);\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t$(\"#titleContainer\").show();\n+\t\t\t\t\t\t\t$(\"#consentItemTitleId\").prop('required', true);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\t//submit the form\n+\t\t\t\t\t\t$(\"#doneId\")\n+\t\t\t\t\t\t\t\t.on(\n+\t\t\t\t\t\t\t\t\t\t'click',\n+\t\t\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t\t\t$(\"#doneId\").prop('disabled', true);\n+\t\t\t\t\t\t\t\t\t\t\t$('#elaboratedRTE').summernote(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'code');\n+\t\t\t\t\t\t\t\t\t\t\tvalid = maxLenValEditor();\n+\t\t\t\t\t\t\t\t\t\t\tif (isFromValid(\"#consentInfoFormId\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t&& valid) {\n+\t\t\t\t\t\t\t\t\t\t\t\tvar visualStepData = '';\n+\n+\t\t\t\t\t\t\t\t\t\t\t\tvisualStepData = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'input[name=visualStep]:checked')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.val();\n+\t\t\t\t\t\t\t\t\t\t\t\tif (visualStepData != ''\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t&& visualStepData != null\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t&& typeof visualStepData != 'undefined') {\n+\n+\t\t\t\t\t\t\t\t\t\t\t\t\t//var elaboratedContent = tinymce.get('elaboratedRTE').getContent({ format: 'raw' });\n+\t\t\t\t\t\t\t\t\t\t\t\t\tvar elaboratedContent = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'#elaboratedRTE')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.summernote('code');\n+\t\t\t\t\t\t\t\t\t\t\t\t\telaboratedContent = replaceSpecialCharacters(elaboratedContent);\n+\t\t\t\t\t\t\t\t\t\t\t\t\tvar briefSummaryText = replaceSpecialCharacters($(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"#briefSummary\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.val());\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#elaborated\").val(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\telaboratedContent);\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#briefSummary\").val(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbriefSummaryText);\n+\t\t\t\t\t\t\t\t\t\t\t\t\tvar displayTitleText = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"#displayTitle\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.val();\n+\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayTitleText = replaceSpecialCharacters(displayTitleText);\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#displayTitle\").val(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayTitleText);\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#consentInfoFormId\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.submit();\n+\n+\t\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$('.visualStepDiv')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.addClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'has-error has-danger');\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$('.visualStepDiv')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\".help-block\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.empty()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.html(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<ul class=\"list-unstyled\"><li>Please choose one visual step</li></ul>');\n+\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#doneId\").prop(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'disabled', false);\n+\t\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#doneId\").prop('disabled',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse);\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t});\n+\n+\tfunction saveConsentInfo(item) {\n+\t\tvar consentInfo = new Object();\n+\t\tvar consentInfoId = $(\"#id\").val();\n+\t\tvar study_id = $(\"#studyId\").val();\n+\t\tvar consentType = $('input[name=\"consentItemType\"]:checked').val();\n+\t\tvar consentitemtitleid = $(\"#consentItemTitleId\").val();\n+\t\tvar displayTitleText = $(\"#displayTitle\").val();\n+\t\tdisplayTitleText = replaceSpecialCharacters(displayTitleText);\n+\t\tvar briefSummaryText = $(\"#briefSummary\").val();\n+\t\tbriefSummaryText = replaceSpecialCharacters(briefSummaryText);\n+\t\t//var elaboratedText = tinymce.get('elaboratedRTE').getContent({ format: 'raw' });$('#elaboratedRTE').summernote('code')\n+\t\tvar elaboratedText = $('#elaboratedRTE').summernote('code');\n+\t\tif (elaboratedText != '<p><br></p>') {\n+\t\t\telaboratedText = replaceSpecialCharacters(elaboratedText);\n \t\t}\n-\t\tconsentInfo.type=\"save\";\n-\t\t\n-\t\tvar data = JSON.stringify(consentInfo);\n-\t\t$.ajax({ \n-            url: \"/studybuilder/adminStudies/saveConsentInfo.do?_S=${param._S}\",\n-            type: \"POST\",\n-            datatype: \"json\",\n-            data: {consentInfo:data},\n-            beforeSend: function(xhr, settings){\n-                xhr.setRequestHeader(\"X-CSRF-TOKEN\", \"${_csrf.token}\");\n-            },\n-            success:function(data){\n-          \tvar jsonobject = eval(data);\t\t\t                       \n-    \t\t\tvar message = jsonobject.message;\n-    \t\t\tif(message == \"SUCCESS\"){\n-    \t\t\t\tvar consentInfoId = jsonobject.consentInfoId;\n-    \t\t\t\t$(\"#id\").val(consentInfoId);\n-    \t\t\t\t$(\"#alertMsg\").removeClass('e-box').addClass('s-box').html(\"Content saved as draft.\");\n-    \t\t\t\t$(item).prop('disabled', false);\n-    \t\t\t\t$('#alertMsg').show();\n-    \t\t\t}else{\n-    \t\t\t\t$(\"#alertMsg\").removeClass('s-box').addClass('e-box').html(\"Something went Wrong\");\n-    \t\t\t\t$('#alertMsg').show();\n-    \t\t\t}\n-    \t\t\tsetTimeout(hideDisplayMessage, 4000);\n-            },\n-            error: function(xhr, status, error) {\n-    \t\t\t  $(item).prop('disabled', false);\n-    \t\t\t  $('#alertMsg').show();\n-    \t\t\t  $(\"#alertMsg\").removeClass('s-box').addClass('e-box').html(\"Something went Wrong\");\n-    \t\t\t  setTimeout(hideDisplayMessage, 4000);\n-    \t\t  }\n-     \t});\n-\t}else{\n-\t\t$(item).prop('disabled', false);\n-\t\tif(valid){\n-\t\t\t$(\".consentTitle\").parent().addClass('has-error has-danger');\n-\t\t\t$(\".consentTitle\").parent().find(\".help-block\").empty().append('<ul class=\"list-unstyled\"><li>This is a required field.</li></ul>');\n-\t\t\tsetTimeout(hideDisplayMessage, 4000);\n+\n+\t\tvar visual_step = $('input[name=\"visualStep\"]:checked').val();\n+\n+\t\tvar valid = maxLenValEditor();\n+\t\tif (valid\n+\t\t\t\t&& (study_id != null && study_id != '' && typeof study_id != 'undefined')\n+\t\t\t\t&& (displayTitleText != null && displayTitleText != '' && typeof displayTitleText != 'undefined')) {\n+\t\t\t$(item).prop('disabled', true);\n+\t\t\tif (null != consentInfoId) {\n+\t\t\t\tconsentInfo.id = consentInfoId;\n+\t\t\t}\n+\t\t\tconsentInfo.studyId = study_id;\n+\t\t\tif (null != consentType) {\n+\t\t\t\tconsentInfo.consentItemType = consentType;\n+\t\t\t}\n+\t\t\tif (null != consentitemtitleid) {\n+\t\t\t\tconsentInfo.consentItemTitleId = consentitemtitleid;\n+\t\t\t}\n+\t\t\tif (null != briefSummaryText) {\n+\t\t\t\tconsentInfo.briefSummary = briefSummaryText;\n+\t\t\t}\n+\t\t\tif (null != elaboratedText) {\n+\t\t\t\tconsentInfo.elaborated = elaboratedText;\n+\t\t\t}\n+\t\t\tif (null != visual_step) {\n+\t\t\t\tconsentInfo.visualStep = visual_step;\n+\t\t\t}\n+\t\t\tif (null != displayTitleText) {\n+\t\t\t\tconsentInfo.displayTitle = displayTitleText;\n+\t\t\t}\n+\t\t\tconsentInfo.type = \"save\";\n+\n+\t\t\tvar data = JSON.stringify(consentInfo);\n+\t\t\t$\n+\t\t\t\t\t.ajax({\n+\t\t\t\t\t\turl : \"/studybuilder/adminStudies/saveConsentInfo.do?_S=${param._S}\",\n+\t\t\t\t\t\ttype : \"POST\",\n+\t\t\t\t\t\tdatatype : \"json\",\n+\t\t\t\t\t\tdata : {\n+\t\t\t\t\t\t\tconsentInfo : data\n+\t\t\t\t\t\t},\n+\t\t\t\t\t\tbeforeSend : function(xhr, settings) {\n+\t\t\t\t\t\t\txhr.setRequestHeader(\"X-CSRF-TOKEN\",\n+\t\t\t\t\t\t\t\t\t\"${_csrf.token}\");\n+\t\t\t\t\t\t},\n+\t\t\t\t\t\tsuccess : function(data) {\n+\t\t\t\t\t\t\tvar jsonobject = eval(data);\n+\t\t\t\t\t\t\tvar message = jsonobject.message;\n+\t\t\t\t\t\t\tif (message == \"SUCCESS\") {\n+\t\t\t\t\t\t\t\tvar consentInfoId = jsonobject.consentInfoId;\n+\t\t\t\t\t\t\t\t$(\"#id\").val(consentInfoId);\n+\t\t\t\t\t\t\t\t$(\"#alertMsg\").removeClass('e-box').addClass(\n+\t\t\t\t\t\t\t\t\t\t's-box')\n+\t\t\t\t\t\t\t\t\t\t.html(\"Content saved as draft.\");\n+\t\t\t\t\t\t\t\t$(item).prop('disabled', false);\n+\t\t\t\t\t\t\t\t$('#alertMsg').show();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t$(\"#alertMsg\").removeClass('s-box').addClass(\n+\t\t\t\t\t\t\t\t\t\t'e-box').html(\"Something went Wrong\");\n+\t\t\t\t\t\t\t\t$('#alertMsg').show();\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tsetTimeout(hideDisplayMessage, 4000);\n+\t\t\t\t\t\t},\n+\t\t\t\t\t\terror : function(xhr, status, error) {\n+\t\t\t\t\t\t\t$(item).prop('disabled', false);\n+\t\t\t\t\t\t\t$('#alertMsg').show();\n+\t\t\t\t\t\t\t$(\"#alertMsg\").removeClass('s-box').addClass(\n+\t\t\t\t\t\t\t\t\t'e-box').html(\"Something went Wrong\");\n+\t\t\t\t\t\t\tsetTimeout(hideDisplayMessage, 4000);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t} else {\n+\t\t\t$(item).prop('disabled', false);\n+\t\t\tif (valid) {\n+\t\t\t\t$(\".consentTitle\").parent().addClass('has-error has-danger');\n+\t\t\t\t$(\".consentTitle\")\n+\t\t\t\t\t\t.parent()\n+\t\t\t\t\t\t.find(\".help-block\")\n+\t\t\t\t\t\t.empty()\n+\t\t\t\t\t\t.append(\n+\t\t\t\t\t\t\t\t'<ul class=\"list-unstyled\"><li>This is a required field.</li></ul>');\n+\t\t\t\tsetTimeout(hideDisplayMessage, 4000);\n+\t\t\t}\n+\n \t\t}\n-\t\t\n \t}\n-}\n \n-function goToBackPage(item){\n-\t<c:if test=\"${actionPage ne 'view'}\">\n+\tfunction goToBackPage(item) {\n+\t\t<c:if test=\"${actionPage ne 'view'}\">\n \t\t$(item).prop('disabled', true);\n-\t\tbootbox.confirm({\n-\t\t\t\tcloseButton: false,\n-\t\t\t\tmessage : 'You are about to leave the page and any unsaved changes will be lost. Are you sure you want to proceed?',\t\n-\t\t\t    buttons: {\n-\t\t\t        'cancel': {\n-\t\t\t            label: 'Cancel',\n-\t\t\t        },\n-\t\t\t        'confirm': {\n-\t\t\t            label: 'OK',\n-\t\t\t        },\n-\t\t\t    },\n-\t\t\t    callback: function(result) {\n-\t\t\t        if (result) {\n-\t\t\t        \tvar a = document.createElement('a');\n-\t\t\t        \ta.href = \"/studybuilder/adminStudies/consentListPage.do?_S=${param._S}\";\n-\t\t\t        \tdocument.body.appendChild(a).click();\n-\t\t\t        }else{\n-\t\t\t        \t$(item).prop('disabled', false);\n-\t\t\t        }\n-\t\t\t    }\n-\t\t});\n-\t</c:if>\n-\t<c:if test=\"${actionPage eq 'view'}\">\n+\t\tbootbox\n+\t\t\t\t.confirm({\n+\t\t\t\t\tcloseButton : false,\n+\t\t\t\t\tmessage : 'You are about to leave the page and any unsaved changes will be lost. Are you sure you want to proceed?',\n+\t\t\t\t\tbuttons : {\n+\t\t\t\t\t\t'cancel' : {\n+\t\t\t\t\t\t\tlabel : 'Cancel',\n+\t\t\t\t\t\t},\n+\t\t\t\t\t\t'confirm' : {\n+\t\t\t\t\t\t\tlabel : 'OK',\n+\t\t\t\t\t\t},\n+\t\t\t\t\t},\n+\t\t\t\t\tcallback : function(result) {\n+\t\t\t\t\t\tif (result) {\n+\t\t\t\t\t\t\tvar a = document.createElement('a');\n+\t\t\t\t\t\t\ta.href = \"/studybuilder/adminStudies/consentListPage.do?_S=${param._S}\";\n+\t\t\t\t\t\t\tdocument.body.appendChild(a).click();\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t$(item).prop('disabled', false);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t});\n+\t\t</c:if>\n+\t\t<c:if test=\"${actionPage eq 'view'}\">\n \t\tvar a = document.createElement('a');\n \t\ta.href = \"/studybuilder/adminStudies/consentListPage.do?_S=${param._S}\";\n \t\tdocument.body.appendChild(a).click();\n-\t</c:if>\n-}\n+\t\t</c:if>\n+\t}\n+\n+\t//remove the default vallues from the fields when the consent type is changed\n+\tfunction addDefaultData() {\n \n-//remove the default vallues from the fields when the consent type is changed\n-function addDefaultData(){\n-\t\n-\tvar consentInfoId = $(\"#id\").val();\n-\t$(\"#displayTitle\").val('');\n-\t$(\"#briefSummary\").val('');\n-\t$(\"#elaboratedRTE\").val('');\n-\t$(\"#elaborated\").val('');\n-\ttinymce.get('elaboratedRTE').setContent('');\n-\t$(\"#inlineRadio3\").prop('checked', false);\n-\t$(\"#inlineRadio4\").prop('checked', false);\n-\tif(consentInfoId != null && consentInfoId != '' && typeof consentInfoId != 'undefined'){\n-\t\tvar consentType = \"${consentInfoBo.consentItemType}\";\n-\t\tvar actualValue = $(\"input[name='consentItemType']:checked\").val();\n-\t\tif( consentType == actualValue){\n-\t\t\t\n-\t\t\tvar elaboratedText = $(\"#elaboratedTemp\").val();\n-\t\t\ttinymce.get('elaboratedRTE').setContent(elaboratedText);\n-\t\t\tvar displayTitle = $(\"#displayTitleTemp\").val();\n-\t\t\tvar briefSummary = $(\"#briefSummaryTemp\").val();\n-\t\t\t$(\"#displayTitle\").val(displayTitle);\n-    \t\t$(\"#briefSummary\").val(briefSummary);\n-    \t\tvar visualStep = \"${consentInfoBo.visualStep}\";\n-    \t\tif( visualStep == \"Yes\"){\n-    \t\t\t$(\"#inlineRadio3\").prop('checked', true);\n-    \t\t}else if(visualStep == \"No\"){\n-    \t\t\t$(\"#inlineRadio4\").prop('checked', true);\n-    \t\t}\n-    \t\tinitTinyMCEEditor();\n+\t\tvar consentInfoId = $(\"#id\").val();\n+\t\t$(\"#displayTitle\").val('');\n+\t\t$(\"#briefSummary\").val('');\n+\t\t//$(\"#elaboratedRTE\").val('');\n+\t\t$(\"#elaborated\").val('');\n+\t\t$(\"#elaboratedRTE\").summernote('reset');\n+\t\t$(\"#inlineRadio3\").prop('checked', false);\n+\t\t$(\"#inlineRadio4\").prop('checked', false);\n+\t\t$('#elaboratedRTE').parent().find(\".help-block\").html(\"\");\n+\t\tif (consentInfoId != null && consentInfoId != ''\n+\t\t\t\t&& typeof consentInfoId != 'undefined') {\n+\t\t\tvar consentType = \"${consentInfoBo.consentItemType}\";\n+\t\t\tvar actualValue = $(\"input[name='consentItemType']:checked\").val();\n+\t\t\tif (consentType == actualValue) {\n+\n+\t\t\t\tvar elaboratedText = $(\"#elaboratedTemp\").val();\n+\t\t\t\t//tinymce.get('elaboratedRTE').setContent(elaboratedText);\n+\t\t\t\t$('#elaboratedRTE').summernote('code', elaboratedText);\n+\n+\t\t\t\tvar displayTitle = $(\"#displayTitleTemp\").val();\n+\t\t\t\tvar briefSummary = $(\"#briefSummaryTemp\").val();\n+\t\t\t\t$(\"#displayTitle\").val(displayTitle);\n+\t\t\t\t$(\"#briefSummary\").val(briefSummary);\n+\t\t\t\tvar visualStep = \"${consentInfoBo.visualStep}\";\n+\t\t\t\tif (visualStep == \"Yes\") {\n+\t\t\t\t\t$(\"#inlineRadio3\").prop('checked', true);\n+\t\t\t\t} else if (visualStep == \"No\") {\n+\t\t\t\t\t$(\"#inlineRadio4\").prop('checked', true);\n+\t\t\t\t}\n+\t\t\t\t//initTinyMCEEditor();\n+\t\t\t\tinitSummernoteEditor();\n+\t\t\t}\n \t\t}\n \t}\n-}\n \n-function consentInfoDetails(){\n-\tif(typeof \"${consentInfoList}\" !='undefined'){\n-   \t var selectedTitle = document.getElementById('consentItemTitleId');\n-   \t var actualOption = \"${consentInfoBo.consentItemTitleId}\";\n-   \t for(var i=0; i < selectedTitle.length; i++){\n-   \t\t if( actualOption == selectedTitle.options[i].value){\n-   \t\t\t $('#consentItemTitleId :nth-child('+(i+1)+')').prop('selected', true).trigger('change');\n-   \t\t }\n-   \t\t <c:forEach items=\"${consentInfoList}\" var=\"consentInfo\">\n-   \t\t \t\tif('${consentInfo.consentItemTitleId}' != '' && '${consentInfo.consentItemTitleId}' != null){\n-\t   \t\t \t\tif('${consentInfo.consentItemTitleId}' == selectedTitle.options[i].value && '${consentInfo.consentItemTitleId}' != '${consentInfoBo.consentItemTitleId}'){\n-\t\t\t\t     \t$(\"select option[value=\"+selectedTitle.options[i].value+\"]\").attr(\"disabled\",\"disabled\");\n-\t\t\t\t     \t$('.selectpicker').selectpicker('refresh');\n-\t\t    \t\t }\n-   \t\t \t\t}\n-   \t\t \t\t\n-   \t\t </c:forEach>\n+\tfunction consentInfoDetails() {\n+\t\tif (typeof \"${consentInfoList}\" != 'undefined') {\n+\t\t\tvar selectedTitle = document.getElementById('consentItemTitleId');\n+\t\t\tvar actualOption = \"${consentInfoBo.consentItemTitleId}\";\n+\t\t\tfor (var i = 0; i < selectedTitle.length; i++) {\n+\t\t\t\tif (actualOption == selectedTitle.options[i].value) {\n+\t\t\t\t\t$('#consentItemTitleId :nth-child(' + (i + 1) + ')').prop(\n+\t\t\t\t\t\t\t'selected', true).trigger('change');\n+\t\t\t\t}\n+\t\t\t\t<c:forEach items=\"${consentInfoList}\" var=\"consentInfo\">\n+\t\t\t\tif ('${consentInfo.consentItemTitleId}' != ''\n+\t\t\t\t\t\t&& '${consentInfo.consentItemTitleId}' != null) {\n+\t\t\t\t\tif ('${consentInfo.consentItemTitleId}' == selectedTitle.options[i].value\n+\t\t\t\t\t\t\t&& '${consentInfo.consentItemTitleId}' != '${consentInfoBo.consentItemTitleId}') {\n+\t\t\t\t\t\t$(\n+\t\t\t\t\t\t\t\t\"select option[value=\"\n+\t\t\t\t\t\t\t\t\t\t+ selectedTitle.options[i].value + \"]\")\n+\t\t\t\t\t\t\t\t.attr(\"disabled\", \"disabled\");\n+\t\t\t\t\t\t$('.selectpicker').selectpicker('refresh');\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\n+\t\t\t\t</c:forEach>\n+\t\t\t}\n \t\t}\n-   }\n-}\n+\t}\n+\n+\t//initialize the tinymce editor\n+\t// function initTinyMCEEditor(){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 787}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI0NjczNg==", "bodyText": "try to avoid reformatting files that aren't part of this change", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r412246736", "createdAt": "2020-04-21T14:42:21Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/termsAndCondition.jsp", "diffHunk": "@@ -1,6 +1,5 @@\n <!DOCTYPE html>\n <html>\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI0Njk3OQ==", "bodyText": "Remove empty styles", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r412246979", "createdAt": "2020-04-21T14:42:39Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/css/layout.css", "diffHunk": "@@ -240,11 +240,11 @@ Version: \t\t1.0\n @media screen and (max-width: 1020px) {\n \ttable.dataTable thead .sorting_asc{background-image:url(\"../images/icons/sort_asc.png\") !important};\n \n-table.dataTable thead .sorting_desc{background-image:url(\"../images/sort_desc.png\") !important};\n+table.dataTable thead .sorting_desc;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI1MzY2OA==", "bodyText": "This line is now executed unconditionally. You should always use curly braces for if statements to avoid this.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r412253668", "createdAt": "2020-04-21T14:50:14Z", "author": {"login": "nikklassen"}, "path": "user-registration-server-ws/enroll-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/service/StudyStateServiceImpl.java", "diffHunk": "@@ -120,8 +120,10 @@ public StudyStateRespBean saveParticipantStudies(\n           }\n         }\n         if (!isExists) {\n-          if (studiesBean.getStudyId() != null && StringUtils.isNotEmpty(studiesBean.getStudyId()))\n-            participantStudyBo.setStudyInfo(studyInfo);\n+          if (studiesBean.getStudyId() != null\n+              && StringUtils.isNotEmpty(studiesBean.getStudyId())\n+              && studyInfo != null) participantStudyBo.setStudyInfo(studyInfo);\n+          participantStudyBo.setStudyInfo(studyInfo);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI1NDAyOQ==", "bodyText": "curly braces", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r412254029", "createdAt": "2020-04-21T14:50:38Z", "author": {"login": "nikklassen"}, "path": "user-registration-server-ws/enroll-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/service/StudyStateServiceImpl.java", "diffHunk": "@@ -205,8 +207,8 @@ public StudyStateRespBean saveParticipantStudies(\n                 studyStateBean.setHashedToken(\n                     EnrollmentManagementUtil.getHashedValue(enrolledTokenVal));\n               }\n-\n-              studyStateBean.setStudyId(participantStudiesBO.getStudyInfo().getCustomId());\n+              if (participantStudiesBO.getStudyInfo() != null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "782ed5dc66d8d3b700959f046b0412d3f5cd4bc9", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/782ed5dc66d8d3b700959f046b0412d3f5cd4bc9", "committedDate": "2020-04-21T16:39:42Z", "message": "Merge branch 'early-access' into early-access-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "704ce80a0bb71dfdefd08db00fffb3be2d647ecf", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/704ce80a0bb71dfdefd08db00fffb3be2d647ecf", "committedDate": "2020-04-22T12:58:18Z", "message": "Merge branch 'early-access' into early-access-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46ed1cc49d76d7b712d4e8e068f7044bcaa0667a", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/46ed1cc49d76d7b712d4e8e068f7044bcaa0667a", "committedDate": "2020-04-23T12:22:58Z", "message": "Merge branch 'early-access' into early-access-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6619e5d7a80723a41d8e5b7a4e4dcd8f77596e15", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/6619e5d7a80723a41d8e5b7a4e4dcd8f77596e15", "committedDate": "2020-04-23T14:14:07Z", "message": "Issue fixes based on the PR #179 comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9152f799c946000f4656145440234bfbf9fcafab", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9152f799c946000f4656145440234bfbf9fcafab", "committedDate": "2020-04-23T14:14:41Z", "message": "Merge branch 'early-access-build' of https://github.com/GoogleCloudPlatform/fda-mystudies into early-access-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c493888c6cbeb263b8b55eb57f492df03f7c2b0", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4c493888c6cbeb263b8b55eb57f492df03f7c2b0", "committedDate": "2020-04-23T17:01:31Z", "message": "Merge branch 'early-access' into early-access-build"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MzI2MDk1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#pullrequestreview-399326095", "createdAt": "2020-04-23T17:34:53Z", "commit": {"oid": "6619e5d7a80723a41d8e5b7a4e4dcd8f77596e15"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNzozNDo1NFrOGK0BHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxODowNDoxNVrOGK1OxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk5MTE5OA==", "bodyText": "You are still initializing these variables before you use them. A variable should never be written twice before it's ever used. Java doesn't need to declare all variables at the beginning of a block", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r413991198", "createdAt": "2020-04-23T17:34:54Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/LoginServiceImpl.java", "diffHunk": "@@ -571,86 +571,56 @@ public String validateAccessCode(String securityToken, String accessCode) {\n   }\n \n   @Override\n-  public String sendLockedAccountPasswordResetLinkToMail(\n-      String email, String oldEmail, String type) {\n-\n+  // Send mail to user when account locked due to invalid login credentials\n+  public void sendLockedAccountPasswordResetLinkToMail(String email) {\n     logger.info(\"LoginServiceImpl - sendLockedAccountPasswordResetLinkToMail - Starts\");\n-    Map<String, String> propMap = FdahpStudyDesignerUtil.getAppProperties();\n+    Map<String, String> propMap = null;\n     String passwordResetToken = null;\n-    String message = propMap.get(\"user.forgot.error.msg\");\n-    boolean flag = false;\n+    String message = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6619e5d7a80723a41d8e5b7a4e4dcd8f77596e15"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk5MTUwNA==", "bodyText": "This value is never read", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r413991504", "createdAt": "2020-04-23T17:35:22Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/LoginServiceImpl.java", "diffHunk": "@@ -571,86 +571,56 @@ public String validateAccessCode(String securityToken, String accessCode) {\n   }\n \n   @Override\n-  public String sendLockedAccountPasswordResetLinkToMail(\n-      String email, String oldEmail, String type) {\n-\n+  // Send mail to user when account locked due to invalid login credentials\n+  public void sendLockedAccountPasswordResetLinkToMail(String email) {\n     logger.info(\"LoginServiceImpl - sendLockedAccountPasswordResetLinkToMail - Starts\");\n-    Map<String, String> propMap = FdahpStudyDesignerUtil.getAppProperties();\n+    Map<String, String> propMap = null;\n     String passwordResetToken = null;\n-    String message = propMap.get(\"user.forgot.error.msg\");\n-    boolean flag = false;\n+    String message = null;\n     UserBO userdetails = null;\n     String accessCode = \"\";\n     Map<String, String> keyValueForSubject = null;\n-    Map<String, String> keyValueForSubject2 = null;\n     String dynamicContent = \"\";\n     String acceptLinkMail = \"\";\n-    int passwordResetLinkExpirationInHour =\n-        Integer.parseInt(propMap.get(\"accountlocked.resetLink.expiration.in.hour\"));\n+    int passwordResetLinkExpirationInHour = 0;\n     String customerCareMail = \"\";\n-    String contact = \"\";\n     try {\n+      propMap = FdahpStudyDesignerUtil.getAppProperties();\n+      message = propMap.get(\"user.forgot.error.msg\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6619e5d7a80723a41d8e5b7a4e4dcd8f77596e15"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk5Njg2MA==", "bodyText": "The try .. catch should also be removed to revert this change.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r413996860", "createdAt": "2020-04-23T17:43:21Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/service/NotificationServiceImpl.java", "diffHunk": "@@ -177,7 +178,21 @@ public void setStudyDAO(StudyDAO studyDAO) {\n   @Override\n   public List<String> getGatwayAppList() {\n     logger.info(\"NotificationServiceImpl - saveOrUpdateNotification - Starts\");\n-    List<String> gatewayAppList = new ArrayList<>(new HashSet(notificationDAO.getGatwayAppList()));\n+    List<String> gatewayAppList = null;\n+    try {\n+      gatewayAppList = new ArrayList<>(new HashSet(notificationDAO.getGatwayAppList()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY0MzI2OQ=="}, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDAwOTYzNg==", "bodyText": "This value is never read", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r414009636", "createdAt": "2020-04-23T18:01:59Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/consentInfo.jsp", "diffHunk": "@@ -156,10 +156,100 @@\n </div>\n <!-- End right Content here -->\n <script type=\"text/javascript\">\n-\t$(document)\n-\t\t\t.ready(\n-\t\t\t\t\tfunction() {\n-\t\t\t\t\t\t// Fancy Scroll Bar\n+$(document).ready(function(){  \n+    // Fancy Scroll Bar\n+    \n+    <c:if test=\"${actionPage eq 'view'}\">\n+\t    $('#consentInfoFormId input,textarea').prop('disabled', true);\n+\t    $('#consentInfoFormId .elaborateClass').addClass('linkDis');\n+\t    $('.ConsentButtonHide').hide();\n+    </c:if>\n+    \n+    if('${consentInfoBo.id}' == ''){\n+    \t $(\"#displayTitleId\").hide();\n+    }\n+    $(\".menuNav li\").removeClass('active');\n+    $(\".fifthConsent\").addClass('active');\n+\t$(\"#createStudyId\").show();\n+    //load the list of titles when the page loads\n+\tconsentInfoDetails();\n+\tinitSummernoteEditor();\n+    //get the selected consent type on change\n+    $('input[name=\"consentItemType\"]').change(function(){\n+    \t$('.visualStepDiv').find(\".help-block\").empty();\n+    \tresetValidation($(\"#consentInfoFormId\"));\n+    \t\n+    \tif (this.value == 'Custom') {\n+    \t\t$(\"#displayTitleId\").show();\n+    \t\t$(\"#titleContainer\").hide();\n+    \t\t$(\"#consentItemTitleId\").prop('required', false);\n+    \t}else{\n+    \t\t\n+    \t\tconsentInfoDetails();\n+    \t\t$(\"#consentItemTitleId\").prop('required', true);\n+    \t\t$(\"#titleContainer\").show();\n+    \t}\n+    \taddDefaultData();\n+\t\t\n+        \n+    });\n+   \n+    $(\"#consentItemTitleId\").change(function(){\n+    \tvar titleText = this.options[this.selectedIndex].text;\n+    \tresetValidation($(\"#consentInfoFormId\"));\n+    \t\n+    \t$(\".consentTitle\").parent().removeClass('has-error has-danger');\n+\t\t$(\".consentTitle\").parent().find(\".help-block\").empty();\n+\t\t$(\"#displayTitle\").parent().removeClass('has-error has-danger');\n+\t\t$(\"#displayTitle\").parent().find(\".help-block\").empty();\n+    \tif(titleText != null && titleText != '' && typeof titleText != 'undefined'){\n+    \t\t$(\"#displayTitleId\").show();\n+    \t\tif(titleText != 'Select'){\n+    \t\t\t$(\"#displayTitle\").val(titleText);\n+    \t\t}else{\n+    \t\t\t$(\"#displayTitle\").val('');\n+    \t\t}\n+    \t}\n+    });\n+    \n+    if('${consentInfoBo.consentItemType}' == 'Custom'){\n+    \t$(\"#titleContainer\").hide();\n+    \t$(\"#consentItemTitleId\").prop('required',false);\n+    }else{\n+    \t$(\"#titleContainer\").show();\n+    \t$(\"#consentItemTitleId\").prop('required',true);\n+    }\n+    //submit the form\n+    $(\"#doneId\").on('click', function(){\n+    \t$(\"#doneId\").prop('disabled', true);\n+    \t$('#elaboratedRTE').summernote('code');\n+    \tvalid =  maxLenValEditor();\n+    \tif( isFromValid(\"#consentInfoFormId\") && valid){\n+    \t\tvar visualStepData = '';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c493888c6cbeb263b8b55eb57f492df03f7c2b0"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDAxMTA3Nw==", "bodyText": "Please remove", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r414011077", "createdAt": "2020-04-23T18:04:15Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/consentInfo.jsp", "diffHunk": "@@ -539,52 +597,43 @@\n \t\t\t\t\t\t\t[ 'font', [ 'underline' ] ],\n \t\t\t\t\t\t\t[ 'insert', [ 'link' ] ], [ 'hr' ], [ 'clear' ],\n \t\t\t\t\t\t\t[ 'cut' ],\n-\t\t\t\t\t\t\t//['copy'],\n \t\t\t\t\t\t\t[ 'undo' ], [ 'redo' ],\n \t\t\t\t\t\t\t[ 'fontname', [ 'fontname' ] ],\n-\t\t\t\t\t\t\t[ 'fontsize', [ 'fontsize' ] ], ]\n-\n+\t\t\t\t\t\t\t[ 'fontsize', [ 'fontsize' ] ], \n+\t\t\t\t\t\t\t]\n \t\t\t\t});\n-\n \t}\n-\t<c:if test=\"${actionPage eq 'view'}\">$('#elaboratedRTE').summernote(\n-\t\t\t'disable');\n-\treadonly: 1, </c:if>\n+\t<c:if test=\"${actionPage eq 'view'}\">$\n+\t  ('#elaboratedRTE').summernote('disable');\n+\treadOnly:1;</c:if>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c493888c6cbeb263b8b55eb57f492df03f7c2b0"}, "originalPosition": 224}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e769c976595832d2a52ec645cbb057084b7f3661", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e769c976595832d2a52ec645cbb057084b7f3661", "committedDate": "2020-04-24T06:31:32Z", "message": "Merge branch 'early-access' into early-access-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca3489950c47259efeb8da204f8b142102ca875e", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ca3489950c47259efeb8da204f8b142102ca875e", "committedDate": "2020-04-24T09:57:31Z", "message": "Github Comments[ Dated: 23/04/20202] issue fixes  and removed unused styles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fcbf7f34f875f1a58c697498b2c57095eb2e1ff", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/3fcbf7f34f875f1a58c697498b2c57095eb2e1ff", "committedDate": "2020-04-24T12:34:03Z", "message": "Merge branch 'early-access' into early-access-build"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMDQ5NDk0", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#pullrequestreview-400049494", "createdAt": "2020-04-24T15:28:17Z", "commit": {"oid": "3fcbf7f34f875f1a58c697498b2c57095eb2e1ff"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNToyODoxN1rOGLdILQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNToyODoxN1rOGLdILQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY2NDc0OQ==", "bodyText": "Why is this code being changed then? Either this code should follow the indentation in our style guide or the lines should not be modified.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#discussion_r414664749", "createdAt": "2020-04-24T15:28:17Z", "author": {"login": "nikklassen"}, "path": "WCP/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/basicInformation.jsp", "diffHunk": "@@ -314,414 +320,721 @@\n <!-- End right Content here -->\n \n <script>\n-        $(document).ready(function(){\n-        \t $('#removeUrl').css(\"visibility\",\"hidden\");\n-             var file = $('#uploadImg').val();\n-             var thumbnailImageId = $('#thumbnailImageId').val();\n-             if(file || thumbnailImageId){\n-          \t   $('#removeUrl').css(\"visibility\",\"visible\");\n-             }\n-             \n-        \t<c:if test=\"${not empty permission}\">\n-            $('#basicInfoFormId input,textarea,select').prop('disabled', true);\n-            $('#basicInfoFormId').find('.elaborateClass').addClass('linkDis');\n-            $('.elaborateHide').css('visibility','hidden');\n-            $('.imageButtonDis').prop('disabled', true);\n-           </c:if>\n-           \n-        \tvar studyType = '${studyBo.type}';\n-            if (studyType) {\n-            \tif(studyType === 'GT'){\n-            \t\t$('.thumbDivClass').show();\n-            \t}else{\n-            \t\t$('.thumbDivClass').hide();\n-            \t}\n-            }\n-        \t\n-        \tcheckRadioRequired();\n-    \t\t$(\".rejoin_radio\").click(function(){\n-    \t\t\tcheckRadioRequired();\n-    \t\t})\n-        \t\n-        \t$(\"[data-toggle=tooltip]\").tooltip();\n-\n-//             //wysiwyg editor\n-            if($(\"#editor\").length > 0){\n-            tinymce.init({\n-                selector: \"#editor\",\n-                theme: \"modern\",\n-                skin: \"lightgray\",\n-                height:180,\n-                plugins: [\n-                    \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n-                    \"save contextmenu directionality paste\"\n-                ],\n-                toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n-                menubar: false,\n-                toolbar_items_size: 'small',\n-                content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n-                <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n-                setup : function(ed) {\n-                    ed.on('keypress change', function(ed) {\n-                    \tresetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n-                    });\n-           \t  \t}\n-            });\n-        }\n-        // File Upload    \n-         $(\"#uploadImgbtn\").click(function(){\n-            $(\"#uploadImg\").click();\n-         });\n-            \n-        // Removing selected file upload image\n-        $(\"#removeUrl\").click(function(){\n-            $(\".thumb img\").attr(\"src\",\"/studybuilder/images/dummy-img.jpg\");\n-            $('#uploadImg').val('');\n-            $('#thumbnailImageId').val('');\n-            var file = $('#uploadImg').val();\n-            var thumbnailImageId = $('#thumbnailImageId').val();\n-            if(file || thumbnailImageId){\n-         \t\t$(\"#uploadImg\").removeAttr('required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"visible\");\n-         \t} else {\n-         \t\t$(\"#uploadImg\").attr('required', 'required');\n-         \t\tresetValidation($(\"#uploadImg\").parents('form'));\n-         \t\t$('#removeUrl').css(\"visibility\",\"hidden\");\n-         \t}\n-         });\n-        \n-        $(\"#completedId\").on('click', function(e){\n-        \t\te.preventDefault();\n-        \t\tvar type = $(\"input[name='type']:checked\").val();\n-        \t\tif(type && type == 'GT'){\n-        \t\t\tvalidateStudyId('',function(st){\n-                \t\tif(st){\n-                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t    }else{\n-\t\t\t\t\t\t        $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t        if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t\t\t        validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t      \t               \t  if(isFromValid(\"#basicInfoFormId\"))\n-\t\t\t\t      \t                \tvar file = $('#uploadImg').val();\n-\t\t\t\t      \t                    var thumbnailImageId = $('#thumbnailImageId').val();\n-\t\t\t\t      \t                   if(file || thumbnailImageId){\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").parent().find(\".help-block\").empty();\n-\t\t\t\t      \t                \t   $(\"#uploadImg\").removeAttr('required');\n-\t\t\t\t      \t                \t   validateStudyId('',function(st){\n-\t\t\t\t      \t                \t\t   if(st){\n-\t\t\t\t      \t\t                       \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t      \t\t    \t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t      \t\t    \t\t\t\t\t\t\treturn false;\n-\t\t\t\t      \t    \t\t\t\t\t\t    }else{\n-\t\t\t\t      \t    \t\t\t\t\t\t          validateAppId('',function(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      if(valid){\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            var appCount = $('.appIdClass').find('.help-block').children().length;\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t            if(parseInt(appCount) >= 1){\n-\t\t\t\t\t\t\t    \t\t\t\t\t\t\t         return false;\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t            }else{\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t\t\t\t\t\t      \t\t                       \t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t\t\t\t\t\t      \t\t                        \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t\t\t\t\t\t      \t\t                         }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      }\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t      });\n-\t\t\t\t      \t                                }\n-\t\t\t\t      \t                       \t     }\n-\t\t\t\t      \t                  \t\t}); \n-\t\t\t\t      \t\t\t\t          }\n-\t\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t       }\n-\t\t\t\t\t\t\t     });\n-\t\t\t\t\t\t    }\n-                       \t}else{\n-                       \t\tisFromValid(\"#basicInfoFormId\");\n-                       \t}\n-                \t}); \n-                } else {\n-                \t$(\"#uploadImg\").parent().find(\".help-block\").empty();\n-                \tvalidateStudyId('',function(st){\n-                   \tif(st){\n-                   \t\tvar studyCount = $('.customStudyClass').find('.help-block').children().length;\n-\t\t\t\t\t\tif(parseInt(studyCount) >= 1){\n-\t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t}else{\n-\t\t\t\t\t\t      $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t\t\t      if(isFromValid(\"#basicInfoFormId\"));\n-\t\t\t\t\t\t       validateAppId('',function(valid){\n-\t\t\t\t\t\t\t     if(valid){\n-\t\t\t\t\t\t\t       var appCount = $('.appIdClass').find('.help-block').children().length;\n-    \t\t\t\t\t\t       if(parseInt(appCount) >= 1){\n-    \t\t\t\t\t\t\t     return false;\n-\t\t\t\t\t\t           }else{\n-\t\t\t\t\t\t\t\t\t     $('.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls').prop('disabled', false);\n-\t\t\t\t                   \t\t if(isFromValid(\"#basicInfoFormId\")){\n-\t\t\t\t                   \t\t\t $(\"#buttonText\").val('completed');\n-\t\t\t\t                    \t  \t $(\"#basicInfoFormId\").submit();\n-\t\t\t\t                    \t }\n-\t\t\t\t\t\t\t\t   }\n-\t\t\t\t\t\t\t     }\n-\t\t\t\t\t\t\t   });\n+\t$(document)\n+\t\t\t.ready(\n+\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"hidden\");\n+\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\tvar thumbnailImageId = $('#thumbnailImageId').val();\n+\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t$('#removeUrl').css(\"visibility\", \"visible\");\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">\n+\t\t\t\t\t\t$('#basicInfoFormId input,textarea,select').prop(\n+\t\t\t\t\t\t\t\t'disabled', true);\n+\t\t\t\t\t\t$('#basicInfoFormId').find('.elaborateClass').addClass(\n+\t\t\t\t\t\t\t\t'linkDis');\n+\t\t\t\t\t\t$('.elaborateHide').css('visibility', 'hidden');\n+\t\t\t\t\t\t$('.imageButtonDis').prop('disabled', true);\n+\t\t\t\t\t\t</c:if>\n+\n+\t\t\t\t\t\tvar studyType = '${studyBo.type}';\n+\t\t\t\t\t\tif (studyType) {\n+\t\t\t\t\t\t\tif (studyType === 'GT') {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').show();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t$('.thumbDivClass').hide();\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t$(\".rejoin_radio\").click(function() {\n+\t\t\t\t\t\t\tcheckRadioRequired();\n+\t\t\t\t\t\t})\n+\n+\t\t\t\t\t\t$(\"[data-toggle=tooltip]\").tooltip();\n+\n+\t\t\t\t\t\t//             //wysiwyg editor\n+\t\t\t\t\t\t//             if($(\"#editor\").length > 0){\n+\t\t\t\t\t\t//             tinymce.init({\n+\t\t\t\t\t\t//                 selector: \"#editor\",\n+\t\t\t\t\t\t//                 theme: \"modern\",\n+\t\t\t\t\t\t//                 skin: \"lightgray\",\n+\t\t\t\t\t\t//                 height:180,\n+\t\t\t\t\t\t//                 plugins: [\n+\t\t\t\t\t\t//                     \"advlist autolink link image lists charmap hr anchor pagebreak spellchecker\",\n+\t\t\t\t\t\t//                     \"save contextmenu directionality paste\"\n+\t\t\t\t\t\t//                 ],\n+\t\t\t\t\t\t//                 toolbar: \"anchor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | underline link | hr removeformat | cut undo redo\",\n+\t\t\t\t\t\t//                 menubar: false,\n+\t\t\t\t\t\t//                 toolbar_items_size: 'small',\n+\t\t\t\t\t\t//                 content_style: \"div, p { font-size: 13px;letter-spacing: 1px;}\",\n+\t\t\t\t\t\t//                 <c:if test=\"${not empty permission}\">readonly:1,</c:if>\n+\t\t\t\t\t\t//                 setup : function(ed) {\n+\t\t\t\t\t\t//                     ed.on('keypress change', function(ed) {\n+\t\t\t\t\t\t//  \t          resetValidation($('#editor').val(tinyMCE.get(\"editor\").getContent()).parents('form'));\n+\t\t\t\t\t\t//                     });\n+\t\t\t\t\t\t//            \t  \t}\n+\t\t\t\t\t\t//             });\n+\t\t\t\t\t\t//         }\n+\n+\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote(\n+\t\t\t\t\t\t\t\t\t\t{\n+\n+\t\t\t\t\t\t\t\t\t\t\tplaceholder : '',\n+\t\t\t\t\t\t\t\t\t\t\ttabsize : 2,\n+\t\t\t\t\t\t\t\t\t\t\theight : 200,\n+\t\t\t\t\t\t\t\t\t\t\ttoolbar : [\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'font',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'bold', 'italic' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'para',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'paragraph',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ul', 'ol' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'font', [ 'underline' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'insert', [ 'link' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'hr' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'clear' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'cut' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t//['copy'],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'undo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'redo' ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontname' ] ],\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[ 'fontsize' ] ], ]\n+\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t<c:if test=\"${not empty permission}\">$('#summernote')\n+\t\t\t\t\t\t\t\t.summernote('disable');\n+\t\t\t\t\t\treadonly: 1, </c:if>\n+\n+\t\t\t\t\t\t// File Upload    \n+\t\t\t\t\t\t$(\"#uploadImgbtn\").click(function() {\n+\t\t\t\t\t\t\t$(\"#uploadImg\").click();\n+\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t// Removing selected file upload image\n+\t\t\t\t\t\t$(\"#removeUrl\")\n+\t\t\t\t\t\t\t\t.click(\n+\t\t\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t\t\t$(\".thumb img\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.attr(\"src\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"/studybuilder/images/dummy-img.jpg\");\n+\t\t\t\t\t\t\t\t\t\t\t$('#uploadImg').val('');\n+\t\t\t\t\t\t\t\t\t\t\t$('#thumbnailImageId').val('');\n+\t\t\t\t\t\t\t\t\t\t\tvar file = $('#uploadImg').val();\n+\t\t\t\t\t\t\t\t\t\t\tvar thumbnailImageId = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'#thumbnailImageId').val();\n+\t\t\t\t\t\t\t\t\t\t\tif (file || thumbnailImageId) {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#uploadImg\").removeAttr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required');\n+\t\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#uploadImg\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parents('form'));\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#removeUrl')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.css(\"visibility\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"visible\");\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t$(\"#uploadImg\").attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', 'required');\n+\t\t\t\t\t\t\t\t\t\t\t\tresetValidation($(\"#uploadImg\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parents('form'));\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#removeUrl').css(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"visibility\", \"hidden\");\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t/*         $( \"#summernote\" ).keypress(function() {\n+\t\t\t\t\t\t $('#summernote').parent().removeClass(\"has-danger\").removeClass(\"has-error\");\n+\t\t\t\t\t\t }); */\n+\n+\t\t\t\t\t\t$(\"#completedId\")\n+\t\t\t\t\t\t\t\t.on(\n+\t\t\t\t\t\t\t\t\t\t'click',\n+\t\t\t\t\t\t\t\t\t\tfunction(e) {\n+\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n+\t\t\t\t\t\t\t\t\t\t\tif ($('#summernote').summernote(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'code') === '<p><br></p>') {\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', true);\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.addClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'has-error has-danger')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\".help-block\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.empty()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.append(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<ul class=\"list-unstyled\"><li>Please fill out this field.</li></ul>');\n+\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').attr(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'required', false);\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').parent()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"has-danger\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"has-error\");\n+\t\t\t\t\t\t\t\t\t\t\t\t$('#summernote').parent().find(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\".help-block\").html(\"\");\n+\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t\t\tvar type = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\"input[name='type']:checked\")\n+\t\t\t\t\t\t\t\t\t\t\t\t\t.val();\n+\t\t\t\t\t\t\t\t\t\t\tif (type && type == 'GT') {\n+\t\t\t\t\t\t\t\t\t\t\t\tvalidateStudyId(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t'',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tfunction(st) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (st) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar studyCount = $(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'.customStudyClass')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'.help-block')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.children().length;\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parseInt(studyCount) >= 1) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'.studyTypeClass,.studyIdCls,.appIdCls,.orgIdCls')\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.prop(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'disabled',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse);\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (isFromValid(\"#basicInfoFormId\"))\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidateAppId(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfunction(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalid) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY1OTQxNw=="}, "originalCommit": {"oid": "7afa91b9d9c68725e003a9f4983a1d91730ddee5"}, "originalPosition": 415}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "297cbfecfdfe08682f36e60e9b0b8d973f57ee67", "author": {"user": {"login": "aswinijena100", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/297cbfecfdfe08682f36e60e9b0b8d973f57ee67", "committedDate": "2020-04-24T15:52:10Z", "message": "Merge branch 'early-access' into early-access-build"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMDgwNjYy", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/179#pullrequestreview-400080662", "createdAt": "2020-04-24T16:06:59Z", "commit": {"oid": "297cbfecfdfe08682f36e60e9b0b8d973f57ee67"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1110, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}