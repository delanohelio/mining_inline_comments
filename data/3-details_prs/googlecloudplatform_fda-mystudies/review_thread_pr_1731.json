{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNDI3MjA5", "number": 1731, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNzo0MDoyMVrOEzaQjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNzo0MjoxMVrOEzaTnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMzQzMDUyOnYy", "diffSide": "RIGHT", "path": "deployment.hcl", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNzo0MDoyMVrOHqnWfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxODoyNToyMFrOHqpHEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ0Njk3NA==", "bodyText": "by do not specify, do you mean leaving as is? or commenting it out in the recipe?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1731#discussion_r514446974", "createdAt": "2020-10-29T17:40:21Z", "author": {"login": "zohrehj"}, "path": "deployment.hcl", "diffHunk": "@@ -1,1032 +1,27 @@\n-# {{$recipes := \"git://github.com/GoogleCloudPlatform/healthcare-data-protection-suite//templates/tfengine/recipes\"}}\n-# {{$ref := \"ref=templates-v0.4.0\"}}\n-\n-# The following values are placeholder values, change and adjust them according to\n-# your use case and organization needs.\n-# {{$prefix := \"example\"}}\n-# {{$env := \"dev\"}}\n-# {{$domain := \"example.com\"}}\n-# {{$default_location := \"us-central1\"}}\n-# {{$default_zone := \"a\"}}\n-# {{$github_owner := \"GoogleCloudPlatform\"}}\n-# {{$github_repo := \"example\"}}\n-# {{$github_branch := \"master\" }}\n-# If you would like to allow connection from anywhere, remove the entire\n-# 'master_authorized_networks' block in the 'project_apps' template below.\n-# {{$master_authorized_network_cidr_block := \"0.0.0.0/0\"}}\n-# {{$master_authorized_network_display_name := \"Example diplay name\"}}\n-\n-data = {\n-  parent_type     = \"folder\"\n-  parent_id       = \"0000000000\"\n-  billing_account = \"XXXXXX-XXXXXX-XXXXXX\"\n-  state_bucket    = \"{{$prefix}}-{{$env}}-terraform-state\"\n-\n-  # Default locations for resources. Can be overridden in individual templates.\n-  bigquery_location   = \"us-east1\" # BigQuery is not available in \"us-central1\"\n-  cloud_sql_region    = \"{{$default_location}}\"\n-  cloud_sql_zone      = \"{{$default_zone}}\"\n-  compute_region      = \"{{$default_location}}\"\n-  compute_zone        = \"{{$default_zone}}\"\n-  gke_region          = \"{{$default_location}}\"\n-  healthcare_location = \"{{$default_location}}\"\n-  storage_location    = \"{{$default_location}}\"\n-  secret_locations    = [\"{{$default_location}}\"]\n-}\n-\n-# Central devops project for Terraform state management and CI/CD.\n-template \"devops\" {\n-  recipe_path = \"{{$recipes}}/devops.hcl?{{$ref}}\"\n-  output_path = \"./devops\"\n-  data = {\n-    # During Step 1, set to `true` and re-run the engine after generated devops module has been deployed.\n-    # Run `terraform init` in the devops module to backup its state to GCS.\n-    enable_gcs_backend = false\n-\n-    admins_group = \"{{$prefix}}-{{$env}}-folder-admins@{{$domain}}\"\n-\n-    project = {\n-      project_id = \"{{$prefix}}-{{$env}}-devops\"\n-      owners = [\n-        \"group:{{$prefix}}-{{$env}}-devops-owners@{{$domain}}\",\n-      ]\n-      apis = [\n-        \"container.googleapis.com\",\n-        \"firebase.googleapis.com\",\n-        \"iap.googleapis.com\",\n-        \"secretmanager.googleapis.com\",\n-      ]\n-    }\n-  }\n-}\n-\n-template \"cicd\" {\n-  recipe_path = \"{{$recipes}}/cicd.hcl?{{$ref}}\"\n-  output_path = \"./cicd\"\n-  data = {\n-    project_id = \"{{$prefix}}-{{$env}}-devops\"\n-    github = {\n-      owner = \"{{$github_owner}}\"\n-      name  = \"{{$github_repo}}\"\n-    }\n-    branch_name    = \"{{$github_branch}}\"\n-    terraform_root = \"terraform\"\n-\n-    # Prepare and enable default triggers.\n-    triggers = {\n-      validate = {}\n-      plan     = {}\n-      apply    = {}\n-    }\n-\n-    # IAM members to give the roles/cloudbuild.builds.viewer permission so they can see build results.\n-    build_viewers = [\n-      \"group:{{$prefix}}-{{$env}}-cicd-viewers@{{$domain}}\",\n+# Top level template to instantiate MyStudies template with organization\n+# and study specific values.\n+template \"mystudies\" {\n+  # MyStudies template.\n+  recipe_path = \"./mystudies.hcl\"\n+  # The following values are placeholder values, change and adjust them according to\n+  # your use case and organization needs.\n+  data = {\n+    prefix           = \"example\"\n+    env              = \"dev\"\n+    folder_id        = \"0000000000\"\n+    billing_account  = \"XXXXXX-XXXXXX-XXXXXX\"\n+    domain           = \"example.com\"\n+    default_location = \"us-central1\"\n+    default_zone     = \"a\"\n+    github_owner     = \"GoogleCloudPlatform\"\n+    github_repo      = \"example\"\n+    github_branch    = \"master\"\n+    # GKE master authorized networks. Do not specify if you would like to allow connection from anywhere.\n+    master_authorized_networks = [\n+      {\n+        cidr_block   = \"0.0.0.0/0\"\n+        display_name = \"Example diplay name\"\n+      },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "260a7b0e2bbf2cf41ef86954feae37a21274b2a3"}, "originalPosition": 108}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ3NTc5Mg==", "bodyText": "Commenting it out. Reworded.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1731#discussion_r514475792", "createdAt": "2020-10-29T18:25:20Z", "author": {"login": "xingao267"}, "path": "deployment.hcl", "diffHunk": "@@ -1,1032 +1,27 @@\n-# {{$recipes := \"git://github.com/GoogleCloudPlatform/healthcare-data-protection-suite//templates/tfengine/recipes\"}}\n-# {{$ref := \"ref=templates-v0.4.0\"}}\n-\n-# The following values are placeholder values, change and adjust them according to\n-# your use case and organization needs.\n-# {{$prefix := \"example\"}}\n-# {{$env := \"dev\"}}\n-# {{$domain := \"example.com\"}}\n-# {{$default_location := \"us-central1\"}}\n-# {{$default_zone := \"a\"}}\n-# {{$github_owner := \"GoogleCloudPlatform\"}}\n-# {{$github_repo := \"example\"}}\n-# {{$github_branch := \"master\" }}\n-# If you would like to allow connection from anywhere, remove the entire\n-# 'master_authorized_networks' block in the 'project_apps' template below.\n-# {{$master_authorized_network_cidr_block := \"0.0.0.0/0\"}}\n-# {{$master_authorized_network_display_name := \"Example diplay name\"}}\n-\n-data = {\n-  parent_type     = \"folder\"\n-  parent_id       = \"0000000000\"\n-  billing_account = \"XXXXXX-XXXXXX-XXXXXX\"\n-  state_bucket    = \"{{$prefix}}-{{$env}}-terraform-state\"\n-\n-  # Default locations for resources. Can be overridden in individual templates.\n-  bigquery_location   = \"us-east1\" # BigQuery is not available in \"us-central1\"\n-  cloud_sql_region    = \"{{$default_location}}\"\n-  cloud_sql_zone      = \"{{$default_zone}}\"\n-  compute_region      = \"{{$default_location}}\"\n-  compute_zone        = \"{{$default_zone}}\"\n-  gke_region          = \"{{$default_location}}\"\n-  healthcare_location = \"{{$default_location}}\"\n-  storage_location    = \"{{$default_location}}\"\n-  secret_locations    = [\"{{$default_location}}\"]\n-}\n-\n-# Central devops project for Terraform state management and CI/CD.\n-template \"devops\" {\n-  recipe_path = \"{{$recipes}}/devops.hcl?{{$ref}}\"\n-  output_path = \"./devops\"\n-  data = {\n-    # During Step 1, set to `true` and re-run the engine after generated devops module has been deployed.\n-    # Run `terraform init` in the devops module to backup its state to GCS.\n-    enable_gcs_backend = false\n-\n-    admins_group = \"{{$prefix}}-{{$env}}-folder-admins@{{$domain}}\"\n-\n-    project = {\n-      project_id = \"{{$prefix}}-{{$env}}-devops\"\n-      owners = [\n-        \"group:{{$prefix}}-{{$env}}-devops-owners@{{$domain}}\",\n-      ]\n-      apis = [\n-        \"container.googleapis.com\",\n-        \"firebase.googleapis.com\",\n-        \"iap.googleapis.com\",\n-        \"secretmanager.googleapis.com\",\n-      ]\n-    }\n-  }\n-}\n-\n-template \"cicd\" {\n-  recipe_path = \"{{$recipes}}/cicd.hcl?{{$ref}}\"\n-  output_path = \"./cicd\"\n-  data = {\n-    project_id = \"{{$prefix}}-{{$env}}-devops\"\n-    github = {\n-      owner = \"{{$github_owner}}\"\n-      name  = \"{{$github_repo}}\"\n-    }\n-    branch_name    = \"{{$github_branch}}\"\n-    terraform_root = \"terraform\"\n-\n-    # Prepare and enable default triggers.\n-    triggers = {\n-      validate = {}\n-      plan     = {}\n-      apply    = {}\n-    }\n-\n-    # IAM members to give the roles/cloudbuild.builds.viewer permission so they can see build results.\n-    build_viewers = [\n-      \"group:{{$prefix}}-{{$env}}-cicd-viewers@{{$domain}}\",\n+# Top level template to instantiate MyStudies template with organization\n+# and study specific values.\n+template \"mystudies\" {\n+  # MyStudies template.\n+  recipe_path = \"./mystudies.hcl\"\n+  # The following values are placeholder values, change and adjust them according to\n+  # your use case and organization needs.\n+  data = {\n+    prefix           = \"example\"\n+    env              = \"dev\"\n+    folder_id        = \"0000000000\"\n+    billing_account  = \"XXXXXX-XXXXXX-XXXXXX\"\n+    domain           = \"example.com\"\n+    default_location = \"us-central1\"\n+    default_zone     = \"a\"\n+    github_owner     = \"GoogleCloudPlatform\"\n+    github_repo      = \"example\"\n+    github_branch    = \"master\"\n+    # GKE master authorized networks. Do not specify if you would like to allow connection from anywhere.\n+    master_authorized_networks = [\n+      {\n+        cidr_block   = \"0.0.0.0/0\"\n+        display_name = \"Example diplay name\"\n+      },", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ0Njk3NA=="}, "originalCommit": {"oid": "260a7b0e2bbf2cf41ef86954feae37a21274b2a3"}, "originalPosition": 108}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMzQzODM3OnYy", "diffSide": "RIGHT", "path": "mystudies.hcl", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNzo0MjoxMVrOHqnbTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNzo0MjoxMVrOHqnbTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ0ODIwNQ==", "bodyText": "nit: can you create this using git mv deployment.hcl mystudies.hcl and then modifying it?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1731#discussion_r514448205", "createdAt": "2020-10-29T17:42:11Z", "author": {"login": "zohrehj"}, "path": "mystudies.hcl", "diffHunk": "@@ -0,0 +1,1009 @@\n+# This is the solution template for MyStudies. Deployment specific", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "260a7b0e2bbf2cf41ef86954feae37a21274b2a3"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1617, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}