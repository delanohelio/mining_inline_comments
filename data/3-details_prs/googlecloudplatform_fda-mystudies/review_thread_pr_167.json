{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MTI3Mzgy", "number": 167, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNDowMTo0N1rODy6eag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNTowNDo0NFrODy79_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NzEzNDUwOnYy", "diffSide": "RIGHT", "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/VerifyEmailIdController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNDowMTo0N1rOGHPRRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNDowMTo0N1rOGHPRRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI0MzM5OQ==", "bodyText": "StringUtils.IsEmpty checks for null values as well; so there is not need for a separate null check of each value.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/167#discussion_r410243399", "createdAt": "2020-04-17T14:01:47Z", "author": {"login": "zohrehj"}, "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/VerifyEmailIdController.java", "diffHunk": "@@ -60,7 +60,7 @@\n         || (accessToken.length() == 0 || StringUtils.isEmpty(accessToken))\n         || (userId.length() == 0 || StringUtils.isEmpty(userId))\n         || (verificationForm.getCode() == null\n-            && StringUtils.isEmpty(verificationForm.getCode()))) {\n+            || StringUtils.isEmpty(verificationForm.getCode()))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c984cc3089d7fd61920a50571f4283c18f466bb3"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NzMzOTIyOnYy", "diffSide": "RIGHT", "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/dao/UserProfileManagementDaoImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNDo1NDo0N1rOGHRWBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxMjoxODozOVrOGHqkJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI3NzM4MQ==", "bodyText": "Why not allocate the value below instead of creating an array with an explicit length here?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/167#discussion_r410277381", "createdAt": "2020-04-17T14:54:47Z", "author": {"login": "nikklassen"}, "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/dao/UserProfileManagementDaoImpl.java", "diffHunk": "@@ -146,7 +146,7 @@ public UserDetailsBO getParticipantDetailsByEmail(\n     CriteriaBuilder criteriaBuilder = null;\n     CriteriaQuery<UserDetailsBO> criteriaQuery = null;\n     Root<UserDetailsBO> userDetailsBoRoot = null;\n-    Predicate[] predicates = new Predicate[2];\n+    Predicate[] predicates = new Predicate[3];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6b80e6e3412344f65f5550b3b08a1f0b0007b6b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY5MDU5OA==", "bodyText": "@nikklassen Fixed.\nHandled the predicate size in a generic way , so that no need to explicitly define the size of the array.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/167#discussion_r410690598", "createdAt": "2020-04-18T12:18:39Z", "author": {"login": "aswinijena100"}, "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/dao/UserProfileManagementDaoImpl.java", "diffHunk": "@@ -146,7 +146,7 @@ public UserDetailsBO getParticipantDetailsByEmail(\n     CriteriaBuilder criteriaBuilder = null;\n     CriteriaQuery<UserDetailsBO> criteriaQuery = null;\n     Root<UserDetailsBO> userDetailsBoRoot = null;\n-    Predicate[] predicates = new Predicate[2];\n+    Predicate[] predicates = new Predicate[3];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI3NzM4MQ=="}, "originalCommit": {"oid": "b6b80e6e3412344f65f5550b3b08a1f0b0007b6b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NzM2Nzk1OnYy", "diffSide": "RIGHT", "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/model/ParticipantRegistrySite.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNTowMjowNVrOGHRolw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxMjoyMjo1MVrOGHqllA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI4MjEzNQ==", "bodyText": "It looks like this is still \"CHAR(8)\" in the enroll-mgmt model. I assume these should be in sync? Would an Enum be more appropriate for this field though?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/167#discussion_r410282135", "createdAt": "2020-04-17T15:02:05Z", "author": {"login": "nikklassen"}, "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/model/ParticipantRegistrySite.java", "diffHunk": "@@ -46,10 +50,16 @@\n   @Column(name = \"invitation_date\", columnDefinition = \"TIMESTAMP\")\n   private Date invitationDate;\n \n+  @Column(name = \"invitation_count\", nullable = false, columnDefinition = \"bigint(20) default 0\")\n+  private Long invitationCount = 0L;\n+\n+  @Column(name = \"disabled_date\", columnDefinition = \"TIMESTAMP default NULL\")\n+  private Date disabledDate;\n+\n   @Column(name = \"enrollment_token_expiry\", columnDefinition = \"TIMESTAMP\")\n   private Date enrollmentTokenExpiry;\n \n-  @Column(name = \"onboarding_status\", columnDefinition = \"CHAR(8)\")\n+  @Column(name = \"onboarding_status\", columnDefinition = \"CHAR(1)\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6b80e6e3412344f65f5550b3b08a1f0b0007b6b"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY5MDk2NA==", "bodyText": "Syncing  across all components had been modified already and  planning was to push the changes in the subsequent PRs . However included the same BO from other components as well.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/167#discussion_r410690964", "createdAt": "2020-04-18T12:22:51Z", "author": {"login": "aswinijena100"}, "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/model/ParticipantRegistrySite.java", "diffHunk": "@@ -46,10 +50,16 @@\n   @Column(name = \"invitation_date\", columnDefinition = \"TIMESTAMP\")\n   private Date invitationDate;\n \n+  @Column(name = \"invitation_count\", nullable = false, columnDefinition = \"bigint(20) default 0\")\n+  private Long invitationCount = 0L;\n+\n+  @Column(name = \"disabled_date\", columnDefinition = \"TIMESTAMP default NULL\")\n+  private Date disabledDate;\n+\n   @Column(name = \"enrollment_token_expiry\", columnDefinition = \"TIMESTAMP\")\n   private Date enrollmentTokenExpiry;\n \n-  @Column(name = \"onboarding_status\", columnDefinition = \"CHAR(8)\")\n+  @Column(name = \"onboarding_status\", columnDefinition = \"CHAR(1)\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI4MjEzNQ=="}, "originalCommit": {"oid": "b6b80e6e3412344f65f5550b3b08a1f0b0007b6b"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NzM3OTE5OnYy", "diffSide": "RIGHT", "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/model/SitePermission.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNTowNDo0NFrOGHRvlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMzozMjoxN1rOGIUmrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI4MzkyNQ==", "bodyText": "A boolean and calling this \"canEdit\" seems more appopriate, unless I'm misunderstanding the purpose of this field.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/167#discussion_r410283925", "createdAt": "2020-04-17T15:04:44Z", "author": {"login": "nikklassen"}, "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/model/SitePermission.java", "diffHunk": "@@ -0,0 +1,77 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+package com.google.cloud.healthcare.fdamystudies.model;\n+\n+import java.time.LocalDateTime;\n+import javax.persistence.Column;\n+import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.GenerationType;\n+import javax.persistence.Id;\n+import javax.persistence.JoinColumn;\n+import javax.persistence.ManyToOne;\n+import javax.persistence.Table;\n+import lombok.Getter;\n+import lombok.Setter;\n+\n+@Setter\n+@Getter\n+@Entity\n+@Table(name = \"sites_permissions\")\n+public class SitePermission {\n+\n+  @Id\n+  @Column(name = \"id\")\n+  @GeneratedValue(strategy = GenerationType.AUTO)\n+  private Integer id;\n+\n+  @ManyToOne\n+  @JoinColumn(name = \"ur_admin_user_id\", insertable = false, updatable = false)\n+  private UserRegAdminUser urAdminUser;\n+\n+  @ManyToOne\n+  @JoinColumn(name = \"study_id\", insertable = true, updatable = true)\n+  private StudyInfoBO studyInfo;\n+\n+  @ManyToOne\n+  @JoinColumn(name = \"site_id\", insertable = true, updatable = true)\n+  private SiteBo siteBo;\n+\n+  @ManyToOne\n+  @JoinColumn(name = \"app_info_id\", insertable = true, updatable = true)\n+  private AppInfoDetailsBO appInfo;\n+\n+  @Column(name = \"edit\", columnDefinition = \"TINYINT(1) default 0\")\n+  private Integer edit = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6b80e6e3412344f65f5550b3b08a1f0b0007b6b"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY5MTM3MA==", "bodyText": "@nikklassen modified the variable as per your suggestion. However changing datatype needs modification in the dependent files and it leads to through testing of the functionality. Hence did not modified in the scope.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/167#discussion_r410691370", "createdAt": "2020-04-18T12:26:10Z", "author": {"login": "aswinijena100"}, "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/model/SitePermission.java", "diffHunk": "@@ -0,0 +1,77 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+package com.google.cloud.healthcare.fdamystudies.model;\n+\n+import java.time.LocalDateTime;\n+import javax.persistence.Column;\n+import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.GenerationType;\n+import javax.persistence.Id;\n+import javax.persistence.JoinColumn;\n+import javax.persistence.ManyToOne;\n+import javax.persistence.Table;\n+import lombok.Getter;\n+import lombok.Setter;\n+\n+@Setter\n+@Getter\n+@Entity\n+@Table(name = \"sites_permissions\")\n+public class SitePermission {\n+\n+  @Id\n+  @Column(name = \"id\")\n+  @GeneratedValue(strategy = GenerationType.AUTO)\n+  private Integer id;\n+\n+  @ManyToOne\n+  @JoinColumn(name = \"ur_admin_user_id\", insertable = false, updatable = false)\n+  private UserRegAdminUser urAdminUser;\n+\n+  @ManyToOne\n+  @JoinColumn(name = \"study_id\", insertable = true, updatable = true)\n+  private StudyInfoBO studyInfo;\n+\n+  @ManyToOne\n+  @JoinColumn(name = \"site_id\", insertable = true, updatable = true)\n+  private SiteBo siteBo;\n+\n+  @ManyToOne\n+  @JoinColumn(name = \"app_info_id\", insertable = true, updatable = true)\n+  private AppInfoDetailsBO appInfo;\n+\n+  @Column(name = \"edit\", columnDefinition = \"TINYINT(1) default 0\")\n+  private Integer edit = 0;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI4MzkyNQ=="}, "originalCommit": {"oid": "b6b80e6e3412344f65f5550b3b08a1f0b0007b6b"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM3OTM3NQ==", "bodyText": "acknowledged, thanks for keeping the scope of this change smaller", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/167#discussion_r411379375", "createdAt": "2020-04-20T13:32:17Z", "author": {"login": "nikklassen"}, "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/model/SitePermission.java", "diffHunk": "@@ -0,0 +1,77 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+package com.google.cloud.healthcare.fdamystudies.model;\n+\n+import java.time.LocalDateTime;\n+import javax.persistence.Column;\n+import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.GenerationType;\n+import javax.persistence.Id;\n+import javax.persistence.JoinColumn;\n+import javax.persistence.ManyToOne;\n+import javax.persistence.Table;\n+import lombok.Getter;\n+import lombok.Setter;\n+\n+@Setter\n+@Getter\n+@Entity\n+@Table(name = \"sites_permissions\")\n+public class SitePermission {\n+\n+  @Id\n+  @Column(name = \"id\")\n+  @GeneratedValue(strategy = GenerationType.AUTO)\n+  private Integer id;\n+\n+  @ManyToOne\n+  @JoinColumn(name = \"ur_admin_user_id\", insertable = false, updatable = false)\n+  private UserRegAdminUser urAdminUser;\n+\n+  @ManyToOne\n+  @JoinColumn(name = \"study_id\", insertable = true, updatable = true)\n+  private StudyInfoBO studyInfo;\n+\n+  @ManyToOne\n+  @JoinColumn(name = \"site_id\", insertable = true, updatable = true)\n+  private SiteBo siteBo;\n+\n+  @ManyToOne\n+  @JoinColumn(name = \"app_info_id\", insertable = true, updatable = true)\n+  private AppInfoDetailsBO appInfo;\n+\n+  @Column(name = \"edit\", columnDefinition = \"TINYINT(1) default 0\")\n+  private Integer edit = 0;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI4MzkyNQ=="}, "originalCommit": {"oid": "b6b80e6e3412344f65f5550b3b08a1f0b0007b6b"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1155, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}