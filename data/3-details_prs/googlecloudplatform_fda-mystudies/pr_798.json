{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNjI0MzY0", "number": 798, "title": "iOS - Add force upgrade configuration", "bodyText": "closes #795\nI've also updated this changes in the quickstart document.", "createdAt": "2020-08-24T16:15:18Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/798", "merged": true, "mergeCommit": {"oid": "ce71a7a5f6245e76b7041c5e808fca20f19e8e33"}, "closed": true, "closedAt": "2020-08-25T17:37:40Z", "author": {"login": "tushar-boston"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdBDjRWAH2gAyNDcyNjI0MzY0OmQ0MTAyYmNmNDcwYzA0YjZlY2E2NzBlMThiYzY5MjI1YzA4ODFmZDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCapYggH2gAyNDcyNjI0MzY0OjQ0YjA5ZjQ4MzE1NDUzYTA4YWQwMTQwNTNkMGNkM2M4YWRlN2UzY2Y=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d4102bcf470c04b6eca670e18bc69225c0881fd0", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d4102bcf470c04b6eca670e18bc69225c0881fd0", "committedDate": "2020-08-21T11:59:24Z", "message": "Add configuration for force upgrade."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9887db0988656e428360e02d1fa47a2fedfdf054", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9887db0988656e428360e02d1fa47a2fedfdf054", "committedDate": "2020-08-21T12:20:50Z", "message": "formatting."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NTEzNTc3", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/798#pullrequestreview-474513577", "createdAt": "2020-08-25T14:03:28Z", "commit": {"oid": "9887db0988656e428360e02d1fa47a2fedfdf054"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDowMzoyOFrOHGZpVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDowNDozMlrOHGZscg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MzY4NA==", "bodyText": "the appLink created here would be different from the one you were using previously:\nhttps://itunes.apple.com/us/app/fda-my-studies/id1242835330?ls=1&mt=8\nvs what you are creating for appleID: 1242835330\nhttps://apps.apple.com/app/apple-store/id1242835330 ?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/798#discussion_r476473684", "createdAt": "2020-08-25T14:03:28Z", "author": {"login": "zohrehj"}, "path": "iOS/HPHC/HPHC/Views/UIViews+Additions/ForceUpdate/AppUpdateBlocker.swift", "diffHunk": "@@ -35,28 +49,34 @@ class AppUpdateBlocker: UIView {\n   /// - Parameters:\n   ///   - frame: Rect for the view\n   /// - Returns: New object of `AppUpdateBlocker` Type\n-  class func instanceFromNib(frame: CGRect) -> AppUpdateBlocker {\n-\n+  class func instanceFromNib(\n+    frame: CGRect,\n+    detail: JSONDictionary\n+  ) -> AppUpdateBlocker {\n     let view =\n-      UINib(nibName: \"AppUpdateBlocker\", bundle: nil).instantiate(\n-        withOwner: nil,\n-        options: nil\n-      )[0] as! AppUpdateBlocker\n+      UINib(nibName: \"AppUpdateBlocker\", bundle: nil).instantiate(withOwner: nil, options: nil)[0] as! AppUpdateBlocker\n     view.frame = frame\n     view.layoutIfNeeded()\n     return view\n+  }\n \n+  func configureView(with latestVersion: String) {\n+    self.buttonUpgrade.layer.borderColor = #colorLiteral(red: 0, green: 0.4862745098, blue: 0.7294117647, alpha: 1)\n+    self.labelMessage.text = LocalizableString.blockerScreenLabelText.localizedString\n+    self.appIconView.image = self.appIcon\n   }\n \n-  // MARK: - Action\n+  // MARK: - Actions\n \n   @IBAction func buttonUpgradeAction() {\n-    guard\n-      let url = URL(\n-        string: \"https://itunes.apple.com/us/app/fda-my-studies/id1242835330?ls=1&mt=8\"\n-      )\n-    else { return }\n-    if UIApplication.shared.canOpenURL(url) {\n+    guard let appleID = Branding.appleID, !appleID.isEmpty else {\n+      // Ask user to update from AppStore.\n+      self.makeToast(LocalizableString.appStoreUpdateText.localizedString)\n+      return\n+    }\n+    let appStoreLink = \"https://apps.apple.com/app/apple-store\"\n+    let appLink = appStoreLink + \"/id\" + appleID", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9887db0988656e428360e02d1fa47a2fedfdf054"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3NDQ4Mg==", "bodyText": "typo: AppStore Connect\nplease provide an example of what this ID looks like", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/798#discussion_r476474482", "createdAt": "2020-08-25T14:04:32Z", "author": {"login": "zohrehj"}, "path": "iOS/HPHC/HPHC/Branding/Branding.swift", "diffHunk": "@@ -107,4 +108,9 @@ enum Branding {\n     return brandConfig[JSONKey.standaloneStudyID] as? String ?? \"\"\n   }\n \n+  /// Unique ID of the App generated by Apple on AppStore Conect.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9887db0988656e428360e02d1fa47a2fedfdf054"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffa957f04ea251bcc2279bf79761755b48382ab0", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ffa957f04ea251bcc2279bf79761755b48382ab0", "committedDate": "2020-08-25T17:00:21Z", "message": "Fix typo."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0Njg4NjAz", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/798#pullrequestreview-474688603", "createdAt": "2020-08-25T17:14:56Z", "commit": {"oid": "ffa957f04ea251bcc2279bf79761755b48382ab0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44b09f48315453a08ad014053d0cd3c8ade7e3cf", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/44b09f48315453a08ad014053d0cd3c8ade7e3cf", "committedDate": "2020-08-25T17:27:49Z", "message": "Merge branch 'develop' into ios-force-ug-configuration"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 723, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}