{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzNTc4MDE1", "number": 1046, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODozNToyNVrOEoNhPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo1OToxNVrOEoOAog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNTk5OTk3OnYy", "diffSide": "RIGHT", "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/controller/StudyQuestionnaireController.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODozNToyNVrOHZK3Tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxMzoxODozOVrOHZstNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE1NDQ0Nw==", "bodyText": "I have seen different PRs today adding and not adding an empty line between static imports. Please make sure to keep it consistent", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#discussion_r496154447", "createdAt": "2020-09-28T18:35:25Z", "author": {"login": "saminguyen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/controller/StudyQuestionnaireController.java", "diffHunk": "@@ -1,28 +1,23 @@\n /*\n- * Copyright \u00a9 2017-2018 Harvard Pilgrim Health Care Institute (HPHCI) and its Contributors.\n- * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and\n- * associated documentation files (the \"Software\"), to deal in the Software without restriction, including\n- * without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\n- * of the Software, and to permit persons to whom the Software is furnished to do so, subject to the\n- * following conditions:\n+ * Copyright 2020 Google LLC\n  *\n- * The above copyright notice and this permission notice shall be included in all copies or substantial\n- * portions of the Software.\n- *\n- * Funding Source: Food and Drug Administration (\"Funding Agency\") effective 18 September 2014 as Contract no.\n- * HHSF22320140030I/HHSF22301006T (the \"Prime Contract\").\n- *\n- * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n- * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n- * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL\n- * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR\n- * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\n- * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n- * OTHER DEALINGS IN THE SOFTWARE.\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n  */\n \n package com.fdahpstudydesigner.controller;\n \n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_ACTIVE_TASK_SECTION_MARKED_COMPLETE;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_NEW_ACTIVE_TASK_CREATED;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_QUESTIONNAIRE_DELETED;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_QUESTIONNAIRE_SAVED_OR_UPDATED;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_QUESTION_STEP_IN_FORM_DELETED;\n+import static com.fdahpstudydesigner.common.StudyBuilderConstants.FORM_ID;\n+import static com.fdahpstudydesigner.common.StudyBuilderConstants.QUESTION_ID;\n+import static com.fdahpstudydesigner.common.StudyBuilderConstants.STEP_ID;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjYyNjQ2MA==", "bodyText": "we are adding empty line after static imports, this is maintained in other services as well", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#discussion_r496626460", "createdAt": "2020-09-29T10:58:28Z", "author": {"login": "Kantharajut-btc"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/controller/StudyQuestionnaireController.java", "diffHunk": "@@ -1,28 +1,23 @@\n /*\n- * Copyright \u00a9 2017-2018 Harvard Pilgrim Health Care Institute (HPHCI) and its Contributors.\n- * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and\n- * associated documentation files (the \"Software\"), to deal in the Software without restriction, including\n- * without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\n- * of the Software, and to permit persons to whom the Software is furnished to do so, subject to the\n- * following conditions:\n+ * Copyright 2020 Google LLC\n  *\n- * The above copyright notice and this permission notice shall be included in all copies or substantial\n- * portions of the Software.\n- *\n- * Funding Source: Food and Drug Administration (\"Funding Agency\") effective 18 September 2014 as Contract no.\n- * HHSF22320140030I/HHSF22301006T (the \"Prime Contract\").\n- *\n- * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n- * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n- * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL\n- * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR\n- * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\n- * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n- * OTHER DEALINGS IN THE SOFTWARE.\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n  */\n \n package com.fdahpstudydesigner.controller;\n \n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_ACTIVE_TASK_SECTION_MARKED_COMPLETE;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_NEW_ACTIVE_TASK_CREATED;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_QUESTIONNAIRE_DELETED;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_QUESTIONNAIRE_SAVED_OR_UPDATED;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_QUESTION_STEP_IN_FORM_DELETED;\n+import static com.fdahpstudydesigner.common.StudyBuilderConstants.FORM_ID;\n+import static com.fdahpstudydesigner.common.StudyBuilderConstants.QUESTION_ID;\n+import static com.fdahpstudydesigner.common.StudyBuilderConstants.STEP_ID;\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE1NDQ0Nw=="}, "originalCommit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcwODkxOQ==", "bodyText": "Thank you.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#discussion_r496708919", "createdAt": "2020-09-29T13:18:39Z", "author": {"login": "saminguyen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/controller/StudyQuestionnaireController.java", "diffHunk": "@@ -1,28 +1,23 @@\n /*\n- * Copyright \u00a9 2017-2018 Harvard Pilgrim Health Care Institute (HPHCI) and its Contributors.\n- * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and\n- * associated documentation files (the \"Software\"), to deal in the Software without restriction, including\n- * without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\n- * of the Software, and to permit persons to whom the Software is furnished to do so, subject to the\n- * following conditions:\n+ * Copyright 2020 Google LLC\n  *\n- * The above copyright notice and this permission notice shall be included in all copies or substantial\n- * portions of the Software.\n- *\n- * Funding Source: Food and Drug Administration (\"Funding Agency\") effective 18 September 2014 as Contract no.\n- * HHSF22320140030I/HHSF22301006T (the \"Prime Contract\").\n- *\n- * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n- * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n- * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL\n- * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR\n- * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\n- * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n- * OTHER DEALINGS IN THE SOFTWARE.\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n  */\n \n package com.fdahpstudydesigner.controller;\n \n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_ACTIVE_TASK_SECTION_MARKED_COMPLETE;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_NEW_ACTIVE_TASK_CREATED;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_QUESTIONNAIRE_DELETED;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_QUESTIONNAIRE_SAVED_OR_UPDATED;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_QUESTION_STEP_IN_FORM_DELETED;\n+import static com.fdahpstudydesigner.common.StudyBuilderConstants.FORM_ID;\n+import static com.fdahpstudydesigner.common.StudyBuilderConstants.QUESTION_ID;\n+import static com.fdahpstudydesigner.common.StudyBuilderConstants.STEP_ID;\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE1NDQ0Nw=="}, "originalCommit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNjA3NTk4OnYy", "diffSide": "RIGHT", "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/controller/StudyQuestionnaireController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo1Nzo1NFrOHZLnEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxMDo1NjozMlrOHZnmkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2NjY3NA==", "bodyText": "remove commented line", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#discussion_r496166674", "createdAt": "2020-09-28T18:57:54Z", "author": {"login": "saminguyen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/controller/StudyQuestionnaireController.java", "diffHunk": "@@ -2126,6 +2162,7 @@ public ModelAndView saveorUpdateQuestionnaireSchedule(\n           }\n         }\n       }\n+      // auditLogEventHelper.logEvent(eventEnum, auditRequest, values);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666"}, "originalPosition": 210}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjYyNTI5Nw==", "bodyText": "removed", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#discussion_r496625297", "createdAt": "2020-09-29T10:56:32Z", "author": {"login": "Kantharajut-btc"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/controller/StudyQuestionnaireController.java", "diffHunk": "@@ -2126,6 +2162,7 @@ public ModelAndView saveorUpdateQuestionnaireSchedule(\n           }\n         }\n       }\n+      // auditLogEventHelper.logEvent(eventEnum, auditRequest, values);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2NjY3NA=="}, "originalCommit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666"}, "originalPosition": 210}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNjA3ODY3OnYy", "diffSide": "RIGHT", "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyQuestionnaireDAOImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo1ODo0M1rOHZLouQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxMDo1NjoyMVrOHZnmBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2NzA5Nw==", "bodyText": "remove if not needed", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#discussion_r496167097", "createdAt": "2020-09-28T18:58:43Z", "author": {"login": "saminguyen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyQuestionnaireDAOImpl.java", "diffHunk": "@@ -1034,15 +1040,20 @@ public String deleteFromStepQuestion(\n         }\n         message = FdahpStudyDesignerConstants.SUCCESS;\n       }\n-      activity = \"Question of form step was deleted.\";\n+\n+      values.put(QUESTION_ID, questionId.toString());\n+      values.put(STEP_ID, formId.toString());\n+      auditLogEventHelper.logEvent(STUDY_QUESTION_STEP_DELETED, auditRequest, values);\n+\n+      /*activity = \"Question of form step was deleted.\";\n       activitydetails = \"Question of form step was deleted. (Study ID = \" + customStudyId + \")\";\n       auditLogDAO.saveToAuditLog(\n           session,\n           transaction,\n           sessionObject,\n           activity,\n           activitydetails,\n-          \"StudyQuestionnaireDAOImpl - deleteFromStepQuestion\");\n+          \"StudyQuestionnaireDAOImpl - deleteFromStepQuestion\");*/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjYyNTE1OQ==", "bodyText": "removed", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#discussion_r496625159", "createdAt": "2020-09-29T10:56:21Z", "author": {"login": "Kantharajut-btc"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyQuestionnaireDAOImpl.java", "diffHunk": "@@ -1034,15 +1040,20 @@ public String deleteFromStepQuestion(\n         }\n         message = FdahpStudyDesignerConstants.SUCCESS;\n       }\n-      activity = \"Question of form step was deleted.\";\n+\n+      values.put(QUESTION_ID, questionId.toString());\n+      values.put(STEP_ID, formId.toString());\n+      auditLogEventHelper.logEvent(STUDY_QUESTION_STEP_DELETED, auditRequest, values);\n+\n+      /*activity = \"Question of form step was deleted.\";\n       activitydetails = \"Question of form step was deleted. (Study ID = \" + customStudyId + \")\";\n       auditLogDAO.saveToAuditLog(\n           session,\n           transaction,\n           sessionObject,\n           activity,\n           activitydetails,\n-          \"StudyQuestionnaireDAOImpl - deleteFromStepQuestion\");\n+          \"StudyQuestionnaireDAOImpl - deleteFromStepQuestion\");*/", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2NzA5Nw=="}, "originalCommit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666"}, "originalPosition": 102}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNjA4MDM0OnYy", "diffSide": "RIGHT", "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyQuestionnaireDAOImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo1OToxNVrOHZLp1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxMDo1NjoxMFrOHZnloA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2NzM4MA==", "bodyText": "remove commented code if not needed", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#discussion_r496167380", "createdAt": "2020-09-28T18:59:15Z", "author": {"login": "saminguyen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyQuestionnaireDAOImpl.java", "diffHunk": "@@ -1284,30 +1303,31 @@ public String deleteQuestionnaireStep(\n           String deleteQuery = \"delete InstructionsBo IBO where IBO.id=\" + stepId;\n           query = session.createQuery(deleteQuery);\n           query.executeUpdate();\n-          activity = FdahpStudyDesignerConstants.INSTRUCTION_ACTIVITY + \" was deleted.\";\n-          ;\n+          auditLogEventHelper.logEvent(STUDY_INSTRUCTION_STEP_DELETED, auditRequest, values);\n+          /*activity = FdahpStudyDesignerConstants.INSTRUCTION_ACTIVITY + \" was deleted.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666"}, "originalPosition": 188}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjYyNTA1Ng==", "bodyText": "removed commented code", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#discussion_r496625056", "createdAt": "2020-09-29T10:56:10Z", "author": {"login": "Kantharajut-btc"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyQuestionnaireDAOImpl.java", "diffHunk": "@@ -1284,30 +1303,31 @@ public String deleteQuestionnaireStep(\n           String deleteQuery = \"delete InstructionsBo IBO where IBO.id=\" + stepId;\n           query = session.createQuery(deleteQuery);\n           query.executeUpdate();\n-          activity = FdahpStudyDesignerConstants.INSTRUCTION_ACTIVITY + \" was deleted.\";\n-          ;\n+          auditLogEventHelper.logEvent(STUDY_INSTRUCTION_STEP_DELETED, auditRequest, values);\n+          /*activity = FdahpStudyDesignerConstants.INSTRUCTION_ACTIVITY + \" was deleted.\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2NzM4MA=="}, "originalCommit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666"}, "originalPosition": 188}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1831, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}