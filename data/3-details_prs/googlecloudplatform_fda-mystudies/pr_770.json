{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5NTYxNjIw", "number": 770, "title": "User Management Service - integration with oauth-scim-service APIs for /deactivate and /verifyEmailId endpoints", "bodyText": "Invoking PUT /users/{userId} to update the status to DEACTIVATE\nInvoking PUT /users/{userId} to update the status to ACTIVE on email confirmation", "createdAt": "2020-08-18T15:09:02Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/770", "merged": true, "mergeCommit": {"oid": "136f1d854fbf414895131f116f9d18adab5d0e74"}, "closed": true, "closedAt": "2020-08-31T08:16:09Z", "author": {"login": "madhurya-btc"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAIUQWAH2gAyNDY5NTYxNjIwOmRlMjkyZmM2MGRhZmIxZjI0ZGRmNmRlOWNiMWVkNGU4MGZmN2ZlMDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEOP6XgH2gAyNDY5NTYxNjIwOmUxM2E4NDcyMWE3YWUxNGRmZTc2OTNiOTEzNTZmMTc1YjNiZDE4ZGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "de292fc60dafb1f24ddf6de9cb1ed4e80ff7fe07", "author": {"user": {"login": "madhurya-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/de292fc60dafb1f24ddf6de9cb1ed4e80ff7fe07", "committedDate": "2020-08-18T14:58:36Z", "message": "new hydra integration of /deactivate and /verifyEmailId of API endpoints"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwODY0NzI2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/770#pullrequestreview-470864726", "createdAt": "2020-08-19T20:18:27Z", "commit": {"oid": "de292fc60dafb1f24ddf6de9cb1ed4e80ff7fe07"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQyMDoxODoyN1rOHDXl0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQyMTo1Nzo0NlrOHDb2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzI5NDI4OQ==", "bodyText": "nit: why is the indentation width here different? Please align with the current styling.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/770#discussion_r473294289", "createdAt": "2020-08-19T20:18:27Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-tests/src/main/resources/__files/oauth-scim-service/auth-server-update-status-response.json", "diffHunk": "@@ -1,4 +1,5 @@\n {\n-\t\"code\": \"200\",\n-\t\"message\": \"SUCCESS\"\n+  \"status\": 200,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de292fc60dafb1f24ddf6de9cb1ed4e80ff7fe07"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzM0NjM0Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public String deActivateAcct(String userId, DeactivateAcctBean deactivateBean);\n          \n          \n            \n              public String deactivateAcct(String userId, DeactivateAcctBean deactivateBean);", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/770#discussion_r473346342", "createdAt": "2020-08-19T21:36:35Z", "author": {"login": "saminguyen"}, "path": "user-registration-server-ws/user-mgmt-module/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/service/UserManagementProfileService.java", "diffHunk": "@@ -33,8 +33,7 @@ public UserDetailsBO getParticipantDetailsByEmail(\n \n   public UserDetailsBO saveParticipant(UserDetailsBO participant);\n \n-  public String deActivateAcct(\n-      String userId, DeactivateAcctBean deactivateBean, String accessToken, String clientToken);\n+  public String deActivateAcct(String userId, DeactivateAcctBean deactivateBean);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de292fc60dafb1f24ddf6de9cb1ed4e80ff7fe07"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzM0NzkxOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public String deActivateAcct(String userId, DeactivateAcctBean deactivateAcctBean) {\n          \n          \n            \n              public String deactivateAcct(String userId, DeactivateAcctBean deactivateAcctBean) {", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/770#discussion_r473347918", "createdAt": "2020-08-19T21:38:25Z", "author": {"login": "saminguyen"}, "path": "user-registration-server-ws/user-mgmt-module/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/service/UserManagementProfileServiceImpl.java", "diffHunk": "@@ -224,11 +228,7 @@ public UserDetailsBO saveParticipant(UserDetailsBO participant) {\n   }\n \n   @Override\n-  public String deActivateAcct(\n-      String userId,\n-      DeactivateAcctBean deactivateAcctBean,\n-      String accessToken,\n-      String clientToken) {\n+  public String deActivateAcct(String userId, DeactivateAcctBean deactivateAcctBean) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de292fc60dafb1f24ddf6de9cb1ed4e80ff7fe07"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzM2Mzk3Mw==", "bodyText": "Add verifying that this was called in UserProfileControllerTest", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/770#discussion_r473363973", "createdAt": "2020-08-19T21:57:42Z", "author": {"login": "saminguyen"}, "path": "user-registration-server-ws/user-mgmt-module/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/service/UserManagementProfileServiceImpl.java", "diffHunk": "@@ -240,8 +240,12 @@ public String deActivateAcct(\n     List<String> deleteData = new ArrayList<String>();\n     try {\n       userDetailsId = commonDao.getUserInfoDetails(userId);\n-      message = userManagementUtil.deactivateAcct(userId, accessToken, clientToken);\n-      if (message.equalsIgnoreCase(MyStudiesUserRegUtil.ErrorCodes.SUCCESS.getValue())) {\n+      UpdateEmailStatusRequest updateEmailStatusRequest = new UpdateEmailStatusRequest();\n+      updateEmailStatusRequest.setStatus(UserAccountStatus.DEACTIVATED.getStatus());\n+      UpdateEmailStatusResponse updateStatusResponse =\n+          userManagementUtil.updateUserInfoInAuthServer(updateEmailStatusRequest, userId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de292fc60dafb1f24ddf6de9cb1ed4e80ff7fe07"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzM2NDAyMg==", "bodyText": "remove deactivateAcct in UserManagementUtil if not used anymore", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/770#discussion_r473364022", "createdAt": "2020-08-19T21:57:46Z", "author": {"login": "saminguyen"}, "path": "user-registration-server-ws/user-mgmt-module/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/service/UserManagementProfileServiceImpl.java", "diffHunk": "@@ -240,8 +240,12 @@ public String deActivateAcct(\n     List<String> deleteData = new ArrayList<String>();\n     try {\n       userDetailsId = commonDao.getUserInfoDetails(userId);\n-      message = userManagementUtil.deactivateAcct(userId, accessToken, clientToken);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de292fc60dafb1f24ddf6de9cb1ed4e80ff7fe07"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f546825462de8be4fef771b31c09f3f842ddd4f4", "author": {"user": {"login": "madhurya-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f546825462de8be4fef771b31c09f3f842ddd4f4", "committedDate": "2020-08-20T09:40:30Z", "message": "PR comment fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81de1c55b88556d7e9601451c6df551dabb2a7eb", "author": {"user": {"login": "madhurya-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/81de1c55b88556d7e9601451c6df551dabb2a7eb", "committedDate": "2020-08-20T09:46:30Z", "message": "Indentation PR fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f86b08f4973c828be0026510205f3f2ea1ca6d05", "author": {"user": {"login": "madhurya-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f86b08f4973c828be0026510205f3f2ea1ca6d05", "committedDate": "2020-08-21T10:26:51Z", "message": "validateAccessToken removal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e09656f9e035af0521530eb13b990679e3927045", "author": {"user": {"login": "madhurya-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e09656f9e035af0521530eb13b990679e3927045", "committedDate": "2020-08-21T12:21:30Z", "message": "issue fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5c1633d30929d8ee13e83a7df44fe8a0a2afe0c", "author": {"user": {"login": "madhurya-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b5c1633d30929d8ee13e83a7df44fe8a0a2afe0c", "committedDate": "2020-08-23T14:28:46Z", "message": "Resolved test failures when maven clean install"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MTI4NTc2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/770#pullrequestreview-474128576", "createdAt": "2020-08-25T04:36:30Z", "commit": {"oid": "b5c1633d30929d8ee13e83a7df44fe8a0a2afe0c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ec6107234ad68f82bc70a7b52ffe873585c2d56", "author": {"user": {"login": "madhurya-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5ec6107234ad68f82bc70a7b52ffe873585c2d56", "committedDate": "2020-08-27T13:45:18Z", "message": "Merge branch 'develop' into user-mgmt-oauth-scim-integration-updatestatus"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf55dd23c6e10a21c2c3a904b636656b281ab376", "author": {"user": {"login": "madhurya-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bf55dd23c6e10a21c2c3a904b636656b281ab376", "committedDate": "2020-08-28T06:33:11Z", "message": "resolved conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81db47da7c04882210d32ce4973b597def0e81b8", "author": {"user": {"login": "madhurya-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/81db47da7c04882210d32ce4973b597def0e81b8", "committedDate": "2020-08-28T07:44:48Z", "message": "Test cases failure fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2587a944bafa4475628ff341057e9e637476745b", "author": {"user": {"login": "madhurya-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/2587a944bafa4475628ff341057e9e637476745b", "committedDate": "2020-08-28T09:02:34Z", "message": "Build issue fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "154bce9a19a8fb56725a81687398fcf3e8ffc813", "author": {"user": {"login": "madhurya-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/154bce9a19a8fb56725a81687398fcf3e8ffc813", "committedDate": "2020-08-28T09:04:45Z", "message": "Merge branch 'develop' into user-mgmt-oauth-scim-integration-updatestatus"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b86185ca05b85c27cce3c78fbe65d84214b0f9c", "author": {"user": {"login": "saminguyen", "name": "Sami Nguyen"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8b86185ca05b85c27cce3c78fbe65d84214b0f9c", "committedDate": "2020-08-28T19:45:37Z", "message": "Merge branch 'develop' into user-mgmt-oauth-scim-integration-updatestatus"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MDEyOTYy", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/770#pullrequestreview-478012962", "createdAt": "2020-08-28T20:39:43Z", "commit": {"oid": "8b86185ca05b85c27cce3c78fbe65d84214b0f9c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4241b399e005bb4a83cb878bcb1ae2bee7f773aa", "author": {"user": {"login": "saminguyen", "name": "Sami Nguyen"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4241b399e005bb4a83cb878bcb1ae2bee7f773aa", "committedDate": "2020-08-28T20:39:48Z", "message": "Merge branch 'develop' into user-mgmt-oauth-scim-integration-updatestatus"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e13a84721a7ae14dfe7693b91356f175b3bd18dd", "author": {"user": {"login": "madhurya-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e13a84721a7ae14dfe7693b91356f175b3bd18dd", "committedDate": "2020-08-31T08:08:59Z", "message": "Merge branch 'develop' into user-mgmt-oauth-scim-integration-updatestatus"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 684, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}