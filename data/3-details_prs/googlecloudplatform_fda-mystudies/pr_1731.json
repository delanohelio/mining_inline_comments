{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNDI3MjA5", "number": 1731, "title": "Use a wrapper template to make values to be change more obvious.", "bodyText": "", "createdAt": "2020-10-29T17:04:26Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1731", "merged": true, "mergeCommit": {"oid": "fdb023ca9679284a6412820e30247c9d0dca0206"}, "closed": true, "closedAt": "2020-10-29T18:39:14Z", "author": {"login": "xingao267"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXVz_KgFqTUxOTkxOTQzMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXWfx5gFqTUxOTk2MDU2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5OTE5NDMw", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1731#pullrequestreview-519919430", "createdAt": "2020-10-29T17:40:21Z", "commit": {"oid": "260a7b0e2bbf2cf41ef86954feae37a21274b2a3"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNzo0MDoyMVrOHqnWfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNzo0MjoxMVrOHqnbTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ0Njk3NA==", "bodyText": "by do not specify, do you mean leaving as is? or commenting it out in the recipe?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1731#discussion_r514446974", "createdAt": "2020-10-29T17:40:21Z", "author": {"login": "zohrehj"}, "path": "deployment.hcl", "diffHunk": "@@ -1,1032 +1,27 @@\n-# {{$recipes := \"git://github.com/GoogleCloudPlatform/healthcare-data-protection-suite//templates/tfengine/recipes\"}}\n-# {{$ref := \"ref=templates-v0.4.0\"}}\n-\n-# The following values are placeholder values, change and adjust them according to\n-# your use case and organization needs.\n-# {{$prefix := \"example\"}}\n-# {{$env := \"dev\"}}\n-# {{$domain := \"example.com\"}}\n-# {{$default_location := \"us-central1\"}}\n-# {{$default_zone := \"a\"}}\n-# {{$github_owner := \"GoogleCloudPlatform\"}}\n-# {{$github_repo := \"example\"}}\n-# {{$github_branch := \"master\" }}\n-# If you would like to allow connection from anywhere, remove the entire\n-# 'master_authorized_networks' block in the 'project_apps' template below.\n-# {{$master_authorized_network_cidr_block := \"0.0.0.0/0\"}}\n-# {{$master_authorized_network_display_name := \"Example diplay name\"}}\n-\n-data = {\n-  parent_type     = \"folder\"\n-  parent_id       = \"0000000000\"\n-  billing_account = \"XXXXXX-XXXXXX-XXXXXX\"\n-  state_bucket    = \"{{$prefix}}-{{$env}}-terraform-state\"\n-\n-  # Default locations for resources. Can be overridden in individual templates.\n-  bigquery_location   = \"us-east1\" # BigQuery is not available in \"us-central1\"\n-  cloud_sql_region    = \"{{$default_location}}\"\n-  cloud_sql_zone      = \"{{$default_zone}}\"\n-  compute_region      = \"{{$default_location}}\"\n-  compute_zone        = \"{{$default_zone}}\"\n-  gke_region          = \"{{$default_location}}\"\n-  healthcare_location = \"{{$default_location}}\"\n-  storage_location    = \"{{$default_location}}\"\n-  secret_locations    = [\"{{$default_location}}\"]\n-}\n-\n-# Central devops project for Terraform state management and CI/CD.\n-template \"devops\" {\n-  recipe_path = \"{{$recipes}}/devops.hcl?{{$ref}}\"\n-  output_path = \"./devops\"\n-  data = {\n-    # During Step 1, set to `true` and re-run the engine after generated devops module has been deployed.\n-    # Run `terraform init` in the devops module to backup its state to GCS.\n-    enable_gcs_backend = false\n-\n-    admins_group = \"{{$prefix}}-{{$env}}-folder-admins@{{$domain}}\"\n-\n-    project = {\n-      project_id = \"{{$prefix}}-{{$env}}-devops\"\n-      owners = [\n-        \"group:{{$prefix}}-{{$env}}-devops-owners@{{$domain}}\",\n-      ]\n-      apis = [\n-        \"container.googleapis.com\",\n-        \"firebase.googleapis.com\",\n-        \"iap.googleapis.com\",\n-        \"secretmanager.googleapis.com\",\n-      ]\n-    }\n-  }\n-}\n-\n-template \"cicd\" {\n-  recipe_path = \"{{$recipes}}/cicd.hcl?{{$ref}}\"\n-  output_path = \"./cicd\"\n-  data = {\n-    project_id = \"{{$prefix}}-{{$env}}-devops\"\n-    github = {\n-      owner = \"{{$github_owner}}\"\n-      name  = \"{{$github_repo}}\"\n-    }\n-    branch_name    = \"{{$github_branch}}\"\n-    terraform_root = \"terraform\"\n-\n-    # Prepare and enable default triggers.\n-    triggers = {\n-      validate = {}\n-      plan     = {}\n-      apply    = {}\n-    }\n-\n-    # IAM members to give the roles/cloudbuild.builds.viewer permission so they can see build results.\n-    build_viewers = [\n-      \"group:{{$prefix}}-{{$env}}-cicd-viewers@{{$domain}}\",\n+# Top level template to instantiate MyStudies template with organization\n+# and study specific values.\n+template \"mystudies\" {\n+  # MyStudies template.\n+  recipe_path = \"./mystudies.hcl\"\n+  # The following values are placeholder values, change and adjust them according to\n+  # your use case and organization needs.\n+  data = {\n+    prefix           = \"example\"\n+    env              = \"dev\"\n+    folder_id        = \"0000000000\"\n+    billing_account  = \"XXXXXX-XXXXXX-XXXXXX\"\n+    domain           = \"example.com\"\n+    default_location = \"us-central1\"\n+    default_zone     = \"a\"\n+    github_owner     = \"GoogleCloudPlatform\"\n+    github_repo      = \"example\"\n+    github_branch    = \"master\"\n+    # GKE master authorized networks. Do not specify if you would like to allow connection from anywhere.\n+    master_authorized_networks = [\n+      {\n+        cidr_block   = \"0.0.0.0/0\"\n+        display_name = \"Example diplay name\"\n+      },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "260a7b0e2bbf2cf41ef86954feae37a21274b2a3"}, "originalPosition": 108}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ0ODIwNQ==", "bodyText": "nit: can you create this using git mv deployment.hcl mystudies.hcl and then modifying it?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1731#discussion_r514448205", "createdAt": "2020-10-29T17:42:11Z", "author": {"login": "zohrehj"}, "path": "mystudies.hcl", "diffHunk": "@@ -0,0 +1,1009 @@\n+# This is the solution template for MyStudies. Deployment specific", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "260a7b0e2bbf2cf41ef86954feae37a21274b2a3"}, "originalPosition": 1}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "260a7b0e2bbf2cf41ef86954feae37a21274b2a3", "author": {"user": {"login": "xingao267", "name": "Xin Gao"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/260a7b0e2bbf2cf41ef86954feae37a21274b2a3", "committedDate": "2020-10-29T17:03:21Z", "message": "Use a wrapper template to make values to be change more obvious."}, "afterCommit": {"oid": "496c1497960ed5ece3b10f9249dccadc4fa9fca4", "author": {"user": {"login": "xingao267", "name": "Xin Gao"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/496c1497960ed5ece3b10f9249dccadc4fa9fca4", "committedDate": "2020-10-29T18:19:40Z", "message": "Use a wrapper template to make values to be change more obvious."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d01d1813ba12d27399aaf88c61ea032c3fd45ce", "author": {"user": {"login": "xingao267", "name": "Xin Gao"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1d01d1813ba12d27399aaf88c61ea032c3fd45ce", "committedDate": "2020-10-29T18:22:09Z", "message": "Use a wrapper template to make values to be change more obvious."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5OTU0MjU1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1731#pullrequestreview-519954255", "createdAt": "2020-10-29T18:22:15Z", "commit": {"oid": "496c1497960ed5ece3b10f9249dccadc4fa9fca4"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "496c1497960ed5ece3b10f9249dccadc4fa9fca4", "author": {"user": {"login": "xingao267", "name": "Xin Gao"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/496c1497960ed5ece3b10f9249dccadc4fa9fca4", "committedDate": "2020-10-29T18:19:40Z", "message": "Use a wrapper template to make values to be change more obvious."}, "afterCommit": {"oid": "1d01d1813ba12d27399aaf88c61ea032c3fd45ce", "author": {"user": {"login": "xingao267", "name": "Xin Gao"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1d01d1813ba12d27399aaf88c61ea032c3fd45ce", "committedDate": "2020-10-29T18:22:09Z", "message": "Use a wrapper template to make values to be change more obvious."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22d206e53588ee03dc8596f12a846f6c0b031852", "author": {"user": {"login": "xingao267", "name": "Xin Gao"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/22d206e53588ee03dc8596f12a846f6c0b031852", "committedDate": "2020-10-29T18:25:01Z", "message": "wording"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5OTYwNTY1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1731#pullrequestreview-519960565", "createdAt": "2020-10-29T18:30:07Z", "commit": {"oid": "22d206e53588ee03dc8596f12a846f6c0b031852"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1365, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}