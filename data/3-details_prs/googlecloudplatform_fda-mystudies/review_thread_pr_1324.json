{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAyMDA2MzMw", "number": 1324, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMDoxMTo1MlrOEtadDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMDoxMjoyNFrOEtadtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MDU0Nzk4OnYy", "diffSide": "RIGHT", "path": "participant-manager-datastore/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/SiteServiceImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMDoxMTo1MlrOHhL-NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMjo1MToyN1rOHhRaVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU2MTIwNQ==", "bodyText": "nit: Just initialize enrolledInvitedCountList as empty ArrayList in line 1007 and you do not need to do emptyIfNull here.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1324#discussion_r504561205", "createdAt": "2020-10-14T10:11:52Z", "author": {"login": "saminguyen"}, "path": "participant-manager-datastore/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/SiteServiceImpl.java", "diffHunk": "@@ -970,120 +975,132 @@ public ParticipantStatusResponse updateOnboardingStatus(\n   public SiteDetailsResponse getSites(String userId) {\n     logger.entry(\"getSites(userId)\");\n \n+    Optional<UserRegAdminEntity> optUser = userRegAdminRepository.findById(userId);\n+    if (optUser.isPresent() && optUser.get().isSuperAdmin()) {\n+      List<StudyDetails> studies = getSitesForSuperAdmin();\n+      return new SiteDetailsResponse(studies, MessageCode.GET_SITES_SUCCESS);\n+    }\n+\n+    List<StudyPermissionEntity> studyPermissions =\n+        studyPermissionRepository.findByAdminUserId(userId);\n+\n     List<SitePermissionEntity> sitePermissions =\n         sitePermissionRepository.findSitePermissionByUserId(userId);\n-    if (CollectionUtils.isEmpty(sitePermissions)) {\n-      throw new ErrorCodeException(ErrorCode.SITE_NOT_FOUND);\n+\n+    if (CollectionUtils.isEmpty(studyPermissions)) {\n+      throw new ErrorCodeException(ErrorCode.STUDY_PERMISSION_ACCESS_DENIED);\n     }\n \n-    List<String> siteIds =\n-        sitePermissions\n+    Map<String, StudyPermissionEntity> studyPermissionsByStudyId = new HashMap<>();\n+\n+    List<StudyEntity> userStudies =\n+        studyPermissions\n             .stream()\n-            .map(s -> s.getSite().getId())\n             .distinct()\n+            .map(\n+                studyPermissionEntity -> {\n+                  StudyEntity study = studyPermissionEntity.getStudy();\n+                  studyPermissionsByStudyId.put(study.getId(), studyPermissionEntity);\n+                  return study;\n+                })\n             .collect(Collectors.toList());\n+    List<EnrolledInvitedCount> enrolledInvitedCountList = null;\n+    if (CollectionUtils.isNotEmpty(sitePermissions)) {\n+      enrolledInvitedCountList = siteRepository.getEnrolledInvitedCountByUserId(userId);\n+    }\n \n-    Map<String, Long> invitedCountBySiteIdMap = getInvitedCountBySiteId(siteIds);\n-\n-    Map<String, Long> enrolledCountBySiteIdMap = getEnrolledCountBySiteId(siteIds);\n-\n-    Map<StudyEntity, List<SitePermissionEntity>> sitePermissionsByStudy =\n-        sitePermissions.stream().collect(Collectors.groupingBy(SitePermissionEntity::getStudy));\n-\n-    Map<String, StudyPermissionEntity> studyPermissionsByStudyInfoId =\n-        getStudyPermissionsByStudyId(userId, sitePermissions);\n+    Map<String, EnrolledInvitedCount> enrolledInvitedCountMap =\n+        CollectionUtils.emptyIfNull(enrolledInvitedCountList)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dca34d3349509e2cce9c634fd5cacd4cecb71712"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY1MDMyNQ==", "bodyText": "initialized to ArrayList", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1324#discussion_r504650325", "createdAt": "2020-10-14T12:51:27Z", "author": {"login": "Kantharajut-btc"}, "path": "participant-manager-datastore/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/SiteServiceImpl.java", "diffHunk": "@@ -970,120 +975,132 @@ public ParticipantStatusResponse updateOnboardingStatus(\n   public SiteDetailsResponse getSites(String userId) {\n     logger.entry(\"getSites(userId)\");\n \n+    Optional<UserRegAdminEntity> optUser = userRegAdminRepository.findById(userId);\n+    if (optUser.isPresent() && optUser.get().isSuperAdmin()) {\n+      List<StudyDetails> studies = getSitesForSuperAdmin();\n+      return new SiteDetailsResponse(studies, MessageCode.GET_SITES_SUCCESS);\n+    }\n+\n+    List<StudyPermissionEntity> studyPermissions =\n+        studyPermissionRepository.findByAdminUserId(userId);\n+\n     List<SitePermissionEntity> sitePermissions =\n         sitePermissionRepository.findSitePermissionByUserId(userId);\n-    if (CollectionUtils.isEmpty(sitePermissions)) {\n-      throw new ErrorCodeException(ErrorCode.SITE_NOT_FOUND);\n+\n+    if (CollectionUtils.isEmpty(studyPermissions)) {\n+      throw new ErrorCodeException(ErrorCode.STUDY_PERMISSION_ACCESS_DENIED);\n     }\n \n-    List<String> siteIds =\n-        sitePermissions\n+    Map<String, StudyPermissionEntity> studyPermissionsByStudyId = new HashMap<>();\n+\n+    List<StudyEntity> userStudies =\n+        studyPermissions\n             .stream()\n-            .map(s -> s.getSite().getId())\n             .distinct()\n+            .map(\n+                studyPermissionEntity -> {\n+                  StudyEntity study = studyPermissionEntity.getStudy();\n+                  studyPermissionsByStudyId.put(study.getId(), studyPermissionEntity);\n+                  return study;\n+                })\n             .collect(Collectors.toList());\n+    List<EnrolledInvitedCount> enrolledInvitedCountList = null;\n+    if (CollectionUtils.isNotEmpty(sitePermissions)) {\n+      enrolledInvitedCountList = siteRepository.getEnrolledInvitedCountByUserId(userId);\n+    }\n \n-    Map<String, Long> invitedCountBySiteIdMap = getInvitedCountBySiteId(siteIds);\n-\n-    Map<String, Long> enrolledCountBySiteIdMap = getEnrolledCountBySiteId(siteIds);\n-\n-    Map<StudyEntity, List<SitePermissionEntity>> sitePermissionsByStudy =\n-        sitePermissions.stream().collect(Collectors.groupingBy(SitePermissionEntity::getStudy));\n-\n-    Map<String, StudyPermissionEntity> studyPermissionsByStudyInfoId =\n-        getStudyPermissionsByStudyId(userId, sitePermissions);\n+    Map<String, EnrolledInvitedCount> enrolledInvitedCountMap =\n+        CollectionUtils.emptyIfNull(enrolledInvitedCountList)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU2MTIwNQ=="}, "originalCommit": {"oid": "dca34d3349509e2cce9c634fd5cacd4cecb71712"}, "originalPosition": 86}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MDU0OTY0OnYy", "diffSide": "RIGHT", "path": "participant-manager-datastore/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/SiteServiceImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMDoxMjoyNFrOHhL_Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMjo1MTozOFrOHhRazg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU2MTQ4Mw==", "bodyText": "same as above", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1324#discussion_r504561483", "createdAt": "2020-10-14T10:12:24Z", "author": {"login": "saminguyen"}, "path": "participant-manager-datastore/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/SiteServiceImpl.java", "diffHunk": "@@ -970,120 +975,132 @@ public ParticipantStatusResponse updateOnboardingStatus(\n   public SiteDetailsResponse getSites(String userId) {\n     logger.entry(\"getSites(userId)\");\n \n+    Optional<UserRegAdminEntity> optUser = userRegAdminRepository.findById(userId);\n+    if (optUser.isPresent() && optUser.get().isSuperAdmin()) {\n+      List<StudyDetails> studies = getSitesForSuperAdmin();\n+      return new SiteDetailsResponse(studies, MessageCode.GET_SITES_SUCCESS);\n+    }\n+\n+    List<StudyPermissionEntity> studyPermissions =\n+        studyPermissionRepository.findByAdminUserId(userId);\n+\n     List<SitePermissionEntity> sitePermissions =\n         sitePermissionRepository.findSitePermissionByUserId(userId);\n-    if (CollectionUtils.isEmpty(sitePermissions)) {\n-      throw new ErrorCodeException(ErrorCode.SITE_NOT_FOUND);\n+\n+    if (CollectionUtils.isEmpty(studyPermissions)) {\n+      throw new ErrorCodeException(ErrorCode.STUDY_PERMISSION_ACCESS_DENIED);\n     }\n \n-    List<String> siteIds =\n-        sitePermissions\n+    Map<String, StudyPermissionEntity> studyPermissionsByStudyId = new HashMap<>();\n+\n+    List<StudyEntity> userStudies =\n+        studyPermissions\n             .stream()\n-            .map(s -> s.getSite().getId())\n             .distinct()\n+            .map(\n+                studyPermissionEntity -> {\n+                  StudyEntity study = studyPermissionEntity.getStudy();\n+                  studyPermissionsByStudyId.put(study.getId(), studyPermissionEntity);\n+                  return study;\n+                })\n             .collect(Collectors.toList());\n+    List<EnrolledInvitedCount> enrolledInvitedCountList = null;\n+    if (CollectionUtils.isNotEmpty(sitePermissions)) {\n+      enrolledInvitedCountList = siteRepository.getEnrolledInvitedCountByUserId(userId);\n+    }\n \n-    Map<String, Long> invitedCountBySiteIdMap = getInvitedCountBySiteId(siteIds);\n-\n-    Map<String, Long> enrolledCountBySiteIdMap = getEnrolledCountBySiteId(siteIds);\n-\n-    Map<StudyEntity, List<SitePermissionEntity>> sitePermissionsByStudy =\n-        sitePermissions.stream().collect(Collectors.groupingBy(SitePermissionEntity::getStudy));\n-\n-    Map<String, StudyPermissionEntity> studyPermissionsByStudyInfoId =\n-        getStudyPermissionsByStudyId(userId, sitePermissions);\n+    Map<String, EnrolledInvitedCount> enrolledInvitedCountMap =\n+        CollectionUtils.emptyIfNull(enrolledInvitedCountList)\n+            .stream()\n+            .collect(Collectors.toMap(EnrolledInvitedCount::getSiteId, Function.identity()));\n \n     List<StudyDetails> studies = new ArrayList<>();\n-    for (Map.Entry<StudyEntity, List<SitePermissionEntity>> entry :\n-        sitePermissionsByStudy.entrySet()) {\n-      StudyEntity study = entry.getKey();\n-      StudyDetails studyDetail = StudyMapper.toStudyDetails(studyPermissionsByStudyInfoId, study);\n+    for (StudyEntity study : userStudies) {\n+      StudyDetails studyDetail = StudyMapper.toStudyDetails(study);\n+\n+      if (studyPermissionsByStudyId.get(study.getId()) != null) {\n+        Integer studyEditPermission =\n+            studyPermissionsByStudyId.get(study.getId()).getEdit().value();\n+        studyDetail.setStudyPermission(\n+            studyEditPermission == Permission.NO_PERMISSION.value()\n+                ? Permission.VIEW.value()\n+                : Permission.EDIT.value());\n+        studyDetail.setStudyPermission(studyEditPermission);\n+      }\n \n-      addSites(invitedCountBySiteIdMap, enrolledCountBySiteIdMap, study, studyDetail);\n-      studyDetail.setSitesCount((long) studyDetail.getSites().size());\n+      if (CollectionUtils.isNotEmpty(study.getSites())) {\n+        addSites(enrolledInvitedCountMap, study, studyDetail);\n+      }\n \n+      studyDetail.setSitesCount((long) studyDetail.getSites().size());\n       studies.add(studyDetail);\n     }\n \n     logger.exit(String.format(\"%d studies found\", studies.size()));\n     return new SiteDetailsResponse(studies, MessageCode.GET_SITES_SUCCESS);\n   }\n \n-  private Map<String, StudyPermissionEntity> getStudyPermissionsByStudyId(\n-      String userId, List<SitePermissionEntity> sitePermissions) {\n-    List<String> usersStudyIds =\n-        sitePermissions\n-            .stream()\n-            .distinct()\n-            .map(studyEntity -> studyEntity.getStudy().getId())\n-            .collect(Collectors.toList());\n-\n-    List<StudyPermissionEntity> studyPermissions =\n-        studyPermissionRepository.findByStudyIds(usersStudyIds, userId);\n+  private List<StudyDetails> getSitesForSuperAdmin() {\n \n-    Map<String, StudyPermissionEntity> studyPermissionsByStudyInfoId = new HashMap<>();\n-    if (CollectionUtils.isNotEmpty(studyPermissions)) {\n-      studyPermissionsByStudyInfoId =\n-          studyPermissions\n-              .stream()\n-              .collect(Collectors.toMap(e -> e.getStudy().getId(), Function.identity()));\n-    }\n-    return studyPermissionsByStudyInfoId;\n-  }\n+    List<StudyDetails> studies = new ArrayList<>();\n+    List<StudyEntity> studyList = studyRepository.findAll();\n \n-  private Map<String, Long> getInvitedCountBySiteId(List<String> usersSiteIds) {\n-    List<ParticipantRegistrySiteEntity> participantRegistry =\n-        participantRegistrySiteRepository.findBySiteIds(usersSiteIds);\n+    if (CollectionUtils.isNotEmpty(studyList)) {\n+      for (StudyEntity study : studyList) {\n+        StudyDetails studyDetail = StudyMapper.toStudyDetails(study);\n+        studyDetail.setStudyPermission(Permission.EDIT.value());\n \n-    return participantRegistry\n-        .stream()\n-        .collect(\n-            Collectors.groupingBy(\n-                e -> e.getSite().getId(),\n-                Collectors.summingLong(ParticipantRegistrySiteEntity::getInvitationCount)));\n-  }\n+        List<EnrolledInvitedCount> enrolledInvitedCountList =\n+            siteRepository.getEnrolledInvitedCount();\n \n-  private Map<String, Long> getEnrolledCountBySiteId(List<String> usersSiteIds) {\n-    List<ParticipantStudyEntity> participantsEnrollments =\n-        participantStudyRepository.findBySiteIds(usersSiteIds);\n+        Map<String, EnrolledInvitedCount> enrolledInvitedCountMap =\n+            CollectionUtils.emptyIfNull(enrolledInvitedCountList)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dca34d3349509e2cce9c634fd5cacd4cecb71712"}, "originalPosition": 169}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY1MDQ0Ng==", "bodyText": "initialized to ArrayList", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1324#discussion_r504650446", "createdAt": "2020-10-14T12:51:38Z", "author": {"login": "Kantharajut-btc"}, "path": "participant-manager-datastore/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/SiteServiceImpl.java", "diffHunk": "@@ -970,120 +975,132 @@ public ParticipantStatusResponse updateOnboardingStatus(\n   public SiteDetailsResponse getSites(String userId) {\n     logger.entry(\"getSites(userId)\");\n \n+    Optional<UserRegAdminEntity> optUser = userRegAdminRepository.findById(userId);\n+    if (optUser.isPresent() && optUser.get().isSuperAdmin()) {\n+      List<StudyDetails> studies = getSitesForSuperAdmin();\n+      return new SiteDetailsResponse(studies, MessageCode.GET_SITES_SUCCESS);\n+    }\n+\n+    List<StudyPermissionEntity> studyPermissions =\n+        studyPermissionRepository.findByAdminUserId(userId);\n+\n     List<SitePermissionEntity> sitePermissions =\n         sitePermissionRepository.findSitePermissionByUserId(userId);\n-    if (CollectionUtils.isEmpty(sitePermissions)) {\n-      throw new ErrorCodeException(ErrorCode.SITE_NOT_FOUND);\n+\n+    if (CollectionUtils.isEmpty(studyPermissions)) {\n+      throw new ErrorCodeException(ErrorCode.STUDY_PERMISSION_ACCESS_DENIED);\n     }\n \n-    List<String> siteIds =\n-        sitePermissions\n+    Map<String, StudyPermissionEntity> studyPermissionsByStudyId = new HashMap<>();\n+\n+    List<StudyEntity> userStudies =\n+        studyPermissions\n             .stream()\n-            .map(s -> s.getSite().getId())\n             .distinct()\n+            .map(\n+                studyPermissionEntity -> {\n+                  StudyEntity study = studyPermissionEntity.getStudy();\n+                  studyPermissionsByStudyId.put(study.getId(), studyPermissionEntity);\n+                  return study;\n+                })\n             .collect(Collectors.toList());\n+    List<EnrolledInvitedCount> enrolledInvitedCountList = null;\n+    if (CollectionUtils.isNotEmpty(sitePermissions)) {\n+      enrolledInvitedCountList = siteRepository.getEnrolledInvitedCountByUserId(userId);\n+    }\n \n-    Map<String, Long> invitedCountBySiteIdMap = getInvitedCountBySiteId(siteIds);\n-\n-    Map<String, Long> enrolledCountBySiteIdMap = getEnrolledCountBySiteId(siteIds);\n-\n-    Map<StudyEntity, List<SitePermissionEntity>> sitePermissionsByStudy =\n-        sitePermissions.stream().collect(Collectors.groupingBy(SitePermissionEntity::getStudy));\n-\n-    Map<String, StudyPermissionEntity> studyPermissionsByStudyInfoId =\n-        getStudyPermissionsByStudyId(userId, sitePermissions);\n+    Map<String, EnrolledInvitedCount> enrolledInvitedCountMap =\n+        CollectionUtils.emptyIfNull(enrolledInvitedCountList)\n+            .stream()\n+            .collect(Collectors.toMap(EnrolledInvitedCount::getSiteId, Function.identity()));\n \n     List<StudyDetails> studies = new ArrayList<>();\n-    for (Map.Entry<StudyEntity, List<SitePermissionEntity>> entry :\n-        sitePermissionsByStudy.entrySet()) {\n-      StudyEntity study = entry.getKey();\n-      StudyDetails studyDetail = StudyMapper.toStudyDetails(studyPermissionsByStudyInfoId, study);\n+    for (StudyEntity study : userStudies) {\n+      StudyDetails studyDetail = StudyMapper.toStudyDetails(study);\n+\n+      if (studyPermissionsByStudyId.get(study.getId()) != null) {\n+        Integer studyEditPermission =\n+            studyPermissionsByStudyId.get(study.getId()).getEdit().value();\n+        studyDetail.setStudyPermission(\n+            studyEditPermission == Permission.NO_PERMISSION.value()\n+                ? Permission.VIEW.value()\n+                : Permission.EDIT.value());\n+        studyDetail.setStudyPermission(studyEditPermission);\n+      }\n \n-      addSites(invitedCountBySiteIdMap, enrolledCountBySiteIdMap, study, studyDetail);\n-      studyDetail.setSitesCount((long) studyDetail.getSites().size());\n+      if (CollectionUtils.isNotEmpty(study.getSites())) {\n+        addSites(enrolledInvitedCountMap, study, studyDetail);\n+      }\n \n+      studyDetail.setSitesCount((long) studyDetail.getSites().size());\n       studies.add(studyDetail);\n     }\n \n     logger.exit(String.format(\"%d studies found\", studies.size()));\n     return new SiteDetailsResponse(studies, MessageCode.GET_SITES_SUCCESS);\n   }\n \n-  private Map<String, StudyPermissionEntity> getStudyPermissionsByStudyId(\n-      String userId, List<SitePermissionEntity> sitePermissions) {\n-    List<String> usersStudyIds =\n-        sitePermissions\n-            .stream()\n-            .distinct()\n-            .map(studyEntity -> studyEntity.getStudy().getId())\n-            .collect(Collectors.toList());\n-\n-    List<StudyPermissionEntity> studyPermissions =\n-        studyPermissionRepository.findByStudyIds(usersStudyIds, userId);\n+  private List<StudyDetails> getSitesForSuperAdmin() {\n \n-    Map<String, StudyPermissionEntity> studyPermissionsByStudyInfoId = new HashMap<>();\n-    if (CollectionUtils.isNotEmpty(studyPermissions)) {\n-      studyPermissionsByStudyInfoId =\n-          studyPermissions\n-              .stream()\n-              .collect(Collectors.toMap(e -> e.getStudy().getId(), Function.identity()));\n-    }\n-    return studyPermissionsByStudyInfoId;\n-  }\n+    List<StudyDetails> studies = new ArrayList<>();\n+    List<StudyEntity> studyList = studyRepository.findAll();\n \n-  private Map<String, Long> getInvitedCountBySiteId(List<String> usersSiteIds) {\n-    List<ParticipantRegistrySiteEntity> participantRegistry =\n-        participantRegistrySiteRepository.findBySiteIds(usersSiteIds);\n+    if (CollectionUtils.isNotEmpty(studyList)) {\n+      for (StudyEntity study : studyList) {\n+        StudyDetails studyDetail = StudyMapper.toStudyDetails(study);\n+        studyDetail.setStudyPermission(Permission.EDIT.value());\n \n-    return participantRegistry\n-        .stream()\n-        .collect(\n-            Collectors.groupingBy(\n-                e -> e.getSite().getId(),\n-                Collectors.summingLong(ParticipantRegistrySiteEntity::getInvitationCount)));\n-  }\n+        List<EnrolledInvitedCount> enrolledInvitedCountList =\n+            siteRepository.getEnrolledInvitedCount();\n \n-  private Map<String, Long> getEnrolledCountBySiteId(List<String> usersSiteIds) {\n-    List<ParticipantStudyEntity> participantsEnrollments =\n-        participantStudyRepository.findBySiteIds(usersSiteIds);\n+        Map<String, EnrolledInvitedCount> enrolledInvitedCountMap =\n+            CollectionUtils.emptyIfNull(enrolledInvitedCountList)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU2MTQ4Mw=="}, "originalCommit": {"oid": "dca34d3349509e2cce9c634fd5cacd4cecb71712"}, "originalPosition": 169}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1748, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}