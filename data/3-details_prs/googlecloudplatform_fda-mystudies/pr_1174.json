{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MzU5ODkw", "number": 1174, "title": "iOS - Hydra Refresh token ", "bodyText": "Includes changes for #920 and closes #1170", "createdAt": "2020-10-07T16:05:04Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1174", "merged": true, "mergeCommit": {"oid": "4e3bbfc22f23975bd8254745ea648c46be127d3b"}, "closed": true, "closedAt": "2020-10-29T15:16:34Z", "author": {"login": "tushar-boston"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQKj-TAH2gAyNDk5MzU5ODkwOjJlMjFkNThmY2JjZDNjOThhYWIzZTAxMmUzMWJiMTA3OWYxM2Q0MGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSrRDagH2gAyNDk5MzU5ODkwOjU1ZGIxZWU0Y2M4ZTI1NjZhZGI2MmY5NGJkNGU4ZmY2ODAxODZhYWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2e21d58fcbcd3c98aab3e012e31bb1079f13d40b", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/2e21d58fcbcd3c98aab3e012e31bb1079f13d40b", "committedDate": "2020-10-07T10:38:22Z", "message": "Add refresh token hydra API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "becd4360bb62879e671691ef658154097522e7f2", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/becd4360bb62879e671691ef658154097522e7f2", "committedDate": "2020-10-07T11:30:03Z", "message": "- Integrate refresh token with other services and error handling\n- Remove Org Id"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21d2c4603d876adcd44fab606227802372460ade", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/21d2c4603d876adcd44fab606227802372460ade", "committedDate": "2020-10-07T15:59:55Z", "message": "Remove Org ID"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9dcbf4cb80d0a2b4a9e109b883d185fe3e752810", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9dcbf4cb80d0a2b4a9e109b883d185fe3e752810", "committedDate": "2020-10-07T16:13:01Z", "message": "Error cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MDk4NDMz", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1174#pullrequestreview-505098433", "createdAt": "2020-10-08T19:25:52Z", "commit": {"oid": "9dcbf4cb80d0a2b4a9e109b883d185fe3e752810"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxOToyNTo1M1rOHetQcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxOToyNTo1M1rOHetQcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk2MDgxNw==", "bodyText": "missed this one?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1174#discussion_r501960817", "createdAt": "2020-10-08T19:25:53Z", "author": {"login": "zohrehj"}, "path": "iOS/HPHC/HPHC/Networking/APIs/UserServices.swift", "diffHunk": "@@ -519,41 +542,16 @@ extension UserServices: NMWebServiceDelegate {\n \n   func failedRequest(_ manager: NetworkManager, requestName: NSString, error: NSError) {\n \n-    if requestName as String == AuthServerMethods.getRefreshedToken.description && error.code == 401 {  //unauthorized\n-      delegate?.failedRequest(manager, requestName: requestName, error: error)\n-    } else if error.code == 401 {\n-\n-      self.failedRequestServices.headerParams = self.headerParams\n-      self.failedRequestServices.requestParams = self.requestParams\n-      self.failedRequestServices.method = self.method\n-\n-      if User.currentUser.refreshToken == \"\"\n-        && requestName as String\n-          != AuthServerMethods\n-          .login\n-          .description\n-      {\n-        // Unauthorized Access\n-        let errorInfo = [\"NSLocalizedDescription\": \"Your Session is Expired\"]\n-        let localError = NSError.init(domain: error.domain, code: 403, userInfo: errorInfo)\n-        delegate?.failedRequest(manager, requestName: requestName, error: localError)\n-\n-      } else {\n-        // Update Refresh Token\n-        AuthServices().updateToken(delegate: self)\n-      }\n-\n+    if error.code == 401 {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dcbf4cb80d0a2b4a9e109b883d185fe3e752810"}, "originalPosition": 74}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b51e1a39cd2b47d6884b9757b366103709680bc", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/3b51e1a39cd2b47d6884b9757b366103709680bc", "committedDate": "2020-10-12T08:10:33Z", "message": "Update hardcoded error codes with enum values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61d2f772ab7b3260c579c2fedaae9db6b4018fb9", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/61d2f772ab7b3260c579c2fedaae9db6b4018fb9", "committedDate": "2020-10-14T09:19:29Z", "message": "Update authorization token to get response service."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba9fbc5aca611d0c6b247c8a4ef7c1810a214ed3", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ba9fbc5aca611d0c6b247c8a4ef7c1810a214ed3", "committedDate": "2020-10-14T09:24:46Z", "message": "Fix callback navigation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e718c6eee96c6dffd54fa2065a2fb0826bde665a", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e718c6eee96c6dffd54fa2065a2fb0826bde665a", "committedDate": "2020-10-15T05:51:42Z", "message": "Update authorization token for response service. (#1367)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55db1ee4cc8e2566adb62f94bd4e8ff680186aaa", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/55db1ee4cc8e2566adb62f94bd4e8ff680186aaa", "committedDate": "2020-10-15T05:52:25Z", "message": "Fix Login callback navigation (#1368)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 188, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}