{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMDczODE2", "number": 2224, "title": "Participant Manager Datastore : GET /{studyId}/participants endpoint pagination", "bodyText": "Pagination implementation was discussed during technical discussion with Zohreh and same has been implemented.\n\nAdded additional request params - sortBy, sortDirection, searchTerm, limit and offset- to API endpoint\nRefactored existing tests and/or added new tests for pagination.\n\nNote: This PR will be merged into develop branch after front-end changes PR is approved/merged.", "createdAt": "2020-12-02T14:56:44Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2224", "merged": true, "mergeCommit": {"oid": "204d37bcbcbdca8b67c687167baa0ee7e27a4466"}, "closed": true, "closedAt": "2020-12-15T14:08:41Z", "author": {"login": "navya-BTC"}, "timelineItems": {"totalCount": 28, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiPyMuAH2gAyNTMxMDczODE2OmIxYmVlYzdkNTYxMDkxMDc2YmFhYTUxYTM3NDcyZmVlMmNjYTZjZDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdma6THAFqTU1MjQ5Mzc0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b1beec7d561091076baaa51a37472fee2cca6cd4", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b1beec7d561091076baaa51a37472fee2cca6cd4", "committedDate": "2020-12-02T14:54:04Z", "message": "study participant pagination"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13cbbc1f4b0396759147696a5b69a0e5610288cb", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/13cbbc1f4b0396759147696a5b69a0e5610288cb", "committedDate": "2020-12-02T15:02:41Z", "message": "Merge branch 'develop' into participant-manager-studyParticipant-pagination"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMTM3NTM3", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2224#pullrequestreview-543137537", "createdAt": "2020-12-02T18:47:46Z", "commit": {"oid": "13cbbc1f4b0396759147696a5b69a0e5610288cb"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7dd0cb9a5bfd16828a07d05b4f1cadceda34393f", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/7dd0cb9a5bfd16828a07d05b4f1cadceda34393f", "committedDate": "2020-12-07T13:16:22Z", "message": "updated sorting and serach term"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d432cda5f7acf877c139195ca9dec915886a3a03", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d432cda5f7acf877c139195ca9dec915886a3a03", "committedDate": "2020-12-07T13:21:52Z", "message": "Merge branch 'develop' into participant-manager-studyParticipant-pagination"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2f01ce7928cd0f938b31bb332bb03d8a92fdfcf", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f2f01ce7928cd0f938b31bb332bb03d8a92fdfcf", "committedDate": "2020-12-07T13:52:59Z", "message": "Update StudyController.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8185661c04a949df4d661407a5f0280c450f6b4", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a8185661c04a949df4d661407a5f0280c450f6b4", "committedDate": "2020-12-07T14:08:49Z", "message": "sorting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NjUxMzM3", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2224#pullrequestreview-546651337", "createdAt": "2020-12-08T00:26:29Z", "commit": {"oid": "a8185661c04a949df4d661407a5f0280c450f6b4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwMDoyNjoyOVrOIBBHTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwMDozODo0M1rOIBBaZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzkzNzc0Mw==", "bodyText": "sortBy/sort by ?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2224#discussion_r537937743", "createdAt": "2020-12-08T00:26:29Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/ErrorCode.java", "diffHunk": "@@ -329,6 +329,12 @@\n       HttpStatus.NOT_FOUND.toString(),\n       \"This view displays app-wise enrollment if you manage multiple studies.\"),\n \n+  UNSUPPORTED_SORTBY_VALUE(\n+      400, \"EC_0076\", HttpStatus.BAD_REQUEST.toString(), \"Invalid sortby value\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8185661c04a949df4d661407a5f0280c450f6b4"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzk0MjYzMQ==", "bodyText": "verify returned values are actually sorted by siteId", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2224#discussion_r537942631", "createdAt": "2020-12-08T00:38:43Z", "author": {"login": "saminguyen"}, "path": "participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -515,23 +553,50 @@ public void shouldReturnStudyParticipantsForPagination() throws Exception {\n       participantStudyEntity =\n           testDataHelper.createParticipantStudyEntity(\n               siteEntity, studyEntity, participantRegistrySiteEntity);\n+      // Pagination records should be in descending order of created timestamp\n+      // Entities are not saved in sequential order so adding delay\n+      Thread.sleep(5);\n     }\n \n-    // get study participant if page and limit values are null\n+    // Step 2: Call API and expect GET_PARTICIPANT_REGISTRY_SUCCESS message and fetch only 10 data\n+    // out of 21\n     mockMvc\n         .perform(\n             get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), studyEntity.getId())\n                 .headers(headers)\n+                .param(\"limit\", \"10\")\n+                .param(\"offset\", \"0\")\n+                .param(\"sortBy\", \"siteId\")\n+                .param(\"sortDirection\", \"desc\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8185661c04a949df4d661407a5f0280c450f6b4"}, "originalPosition": 64}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67e8d395fc4214a1c752448f8c8ead08aaca64e3", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/67e8d395fc4214a1c752448f8c8ead08aaca64e3", "committedDate": "2020-12-08T04:56:58Z", "message": "Merge branch 'develop' into participant-manager-studyParticipant-pagination"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19146ee5aa1b943c8412af7ade73d2e51b617ab5", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/19146ee5aa1b943c8412af7ade73d2e51b617ab5", "committedDate": "2020-12-08T05:02:07Z", "message": "Update ErrorCode.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "183a6692c5701d5461f830f33aa0d1d2b6df1ea1", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/183a6692c5701d5461f830f33aa0d1d2b6df1ea1", "committedDate": "2020-12-08T05:02:14Z", "message": "Merge branch 'participant-manager-studyParticipant-pagination' of https://github.com/GoogleCloudPlatform/fda-mystudies into participant-manager-studyParticipant-pagination"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b305ad5b49ac52e088cb92488356e0c2cc93e52", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9b305ad5b49ac52e088cb92488356e0c2cc93e52", "committedDate": "2020-12-08T12:23:59Z", "message": "Update StudyControllerTest.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NDYzMDIw", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2224#pullrequestreview-547463020", "createdAt": "2020-12-08T17:28:27Z", "commit": {"oid": "9b305ad5b49ac52e088cb92488356e0c2cc93e52"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c34f808b90d09eef8ce93a8a92cf508e62c4fa1", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5c34f808b90d09eef8ce93a8a92cf508e62c4fa1", "committedDate": "2020-12-09T13:32:58Z", "message": "siteId changed to locationName"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NDMwMjYz", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2224#pullrequestreview-548430263", "createdAt": "2020-12-09T17:34:12Z", "commit": {"oid": "5c34f808b90d09eef8ce93a8a92cf508e62c4fa1"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a50f071fb884c25cf579e17ba55a5546fc6651cb", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a50f071fb884c25cf579e17ba55a5546fc6651cb", "committedDate": "2020-12-11T13:09:11Z", "message": "Merge branch 'develop' into participant-manager-studyParticipant-pagination"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f498d73856f883584f07992f1e5978a291a98ed5", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f498d73856f883584f07992f1e5978a291a98ed5", "committedDate": "2020-12-11T13:13:31Z", "message": "fixed build issue\n\nfixed build issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "509837dc8738901d2c22537780d6d7548c0cd060", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/509837dc8738901d2c22537780d6d7548c0cd060", "committedDate": "2020-12-14T05:54:49Z", "message": "Update StudyServiceImpl.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac91bc75cc1ba66fa647deb8fcd8ee7317f9adce", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ac91bc75cc1ba66fa647deb8fcd8ee7317f9adce", "committedDate": "2020-12-14T05:58:13Z", "message": "Merge branch 'develop' into participant-manager-studyParticipant-pagination"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxODc4MTY2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2224#pullrequestreview-551878166", "createdAt": "2020-12-14T20:45:26Z", "commit": {"oid": "ac91bc75cc1ba66fa647deb8fcd8ee7317f9adce"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a506952ff278bca89ff3c386157fda3d87c3e2d3", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a506952ff278bca89ff3c386157fda3d87c3e2d3", "committedDate": "2020-12-14T21:32:08Z", "message": "Merge branch 'develop' into participant-manager-studyParticipant-pagination"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3be72f897c2585f48dd41d89894a25e53f5f36c1", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/3be72f897c2585f48dd41d89894a25e53f5f36c1", "committedDate": "2020-12-14T21:46:36Z", "message": "Update StudyRepository.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9199df6485b75c9e964c50be704e65f6a4042f11", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9199df6485b75c9e964c50be704e65f6a4042f11", "committedDate": "2020-12-15T02:00:47Z", "message": "Merge branch 'develop' into participant-manager-studyParticipant-pagination"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b111f4f35a41137174b56b4abae26b2671c7437", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/7b111f4f35a41137174b56b4abae26b2671c7437", "committedDate": "2020-12-15T05:22:05Z", "message": "Merge branch 'develop' into participant-manager-studyParticipant-pagination"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c6f823e57d2460ddcd9ecdedc1b7823bda9c6a1", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0c6f823e57d2460ddcd9ecdedc1b7823bda9c6a1", "committedDate": "2020-12-15T05:22:38Z", "message": "Merge branch 'develop' into participant-manager-studyParticipant-pagination"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46f7e6ec932c8f05ee54a061b7fb614df6b794af", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/46f7e6ec932c8f05ee54a061b7fb614df6b794af", "committedDate": "2020-12-15T06:46:21Z", "message": "Merge branch 'develop' into participant-manager-studyParticipant-pagination"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbaf0b6c348b3d612f6b8ca4edd76d12ce16eaa5", "author": {"user": {"login": "navya-BTC", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fbaf0b6c348b3d612f6b8ca4edd76d12ce16eaa5", "committedDate": "2020-12-15T13:48:04Z", "message": "Merge branch 'develop' into participant-manager-studyParticipant-pagination"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNDkzNzQx", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2224#pullrequestreview-552493741", "createdAt": "2020-12-15T14:07:34Z", "commit": {"oid": "fbaf0b6c348b3d612f6b8ca4edd76d12ce16eaa5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1127, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}