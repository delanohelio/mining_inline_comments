{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NDk1MzQ4", "number": 849, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNzowNDowOVrOEd0xsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0NzoyNFrOEhTyiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NzA4ODQ4OnYy", "diffSide": "RIGHT", "path": "UR-web-app/src/app/site-coordinator/user/update-user/update-user.component.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNzowNDowOVrOHJODUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNjo1NTozM1rOHNVhfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQyOTQ1OQ==", "bodyText": "Don't return a boolean from a ternary operator. This is exactly the same as this.user.manageLocationsSelected = this.user.manageLocations", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/849#discussion_r479429459", "createdAt": "2020-08-28T17:04:09Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/user/update-user/update-user.component.ts", "diffHunk": "@@ -1,8 +1,213 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit} from '@angular/core';\n+import {UserService} from '../shared/user.service';\n+import {Router, ActivatedRoute} from '@angular/router';\n+import {ToastrService} from 'ngx-toastr';\n+import {AppDetails, App, Study, Site} from '../shared/app-details';\n+import {User} from 'src/app/entity/user';\n+import {ApiResponse} from 'src/app/entity/api.response.model';\n+import {getMessage} from 'src/app/shared/success.codes.enum';\n+import {Permission} from 'src/app/shared/permission-enums';\n+import {AppsService} from '../../apps/shared/apps.service';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n+import {\n+  ManageUserDetails,\n+  UpdateStatusRequest,\n+} from '../shared/manage-user-details';\n+import {Status} from 'src/app/shared/enums';\n \n @Component({\n   selector: 'user-update',\n   templateUrl: './update-user.component.html',\n-  styleUrls: ['./update-user.component.scss'],\n })\n-export class UpdateUserComponent {}\n+export class UpdateUserComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  appDetails = {} as AppDetails;\n+  selectedApps: App[] = [];\n+  user = {} as User;\n+  permission = Permission;\n+  adminId = '';\n+  userStatus = Status;\n+  sitesMessageMapping: {[k: string]: string} = {\n+    '=0': '0 Sites',\n+    '=1': '1 Site',\n+    'other': '# Sites',\n+  };\n+\n+  constructor(\n+    private readonly router: Router,\n+    private readonly userService: UserService,\n+    private readonly appsService: AppsService,\n+    private readonly toastr: ToastrService,\n+    private readonly route: ActivatedRoute,\n+  ) {\n+    super();\n+  }\n+\n+  ngOnInit(): void {\n+    this.subs.add(\n+      this.route.params.subscribe((params) => {\n+        if (params.userId) {\n+          this.adminId = params.userId as string;\n+        }\n+        this.getUserDetails();\n+      }),\n+    );\n+  }\n+\n+  getUserDetails(): void {\n+    this.subs.add(\n+      this.userService\n+        .getUserDetails(this.adminId)\n+        .subscribe((data: ManageUserDetails) => {\n+          this.user = data.user;\n+          this.user.manageLocationsSelected = this.user.manageLocations\n+            ? true\n+            : false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4277d5a870338245a217407c69382d72610e1c"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzc0NjE3Mw==", "bodyText": "Updated.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/849#discussion_r483746173", "createdAt": "2020-09-04T16:55:33Z", "author": {"login": "firdosebtc1"}, "path": "UR-web-app/src/app/site-coordinator/user/update-user/update-user.component.ts", "diffHunk": "@@ -1,8 +1,213 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit} from '@angular/core';\n+import {UserService} from '../shared/user.service';\n+import {Router, ActivatedRoute} from '@angular/router';\n+import {ToastrService} from 'ngx-toastr';\n+import {AppDetails, App, Study, Site} from '../shared/app-details';\n+import {User} from 'src/app/entity/user';\n+import {ApiResponse} from 'src/app/entity/api.response.model';\n+import {getMessage} from 'src/app/shared/success.codes.enum';\n+import {Permission} from 'src/app/shared/permission-enums';\n+import {AppsService} from '../../apps/shared/apps.service';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n+import {\n+  ManageUserDetails,\n+  UpdateStatusRequest,\n+} from '../shared/manage-user-details';\n+import {Status} from 'src/app/shared/enums';\n \n @Component({\n   selector: 'user-update',\n   templateUrl: './update-user.component.html',\n-  styleUrls: ['./update-user.component.scss'],\n })\n-export class UpdateUserComponent {}\n+export class UpdateUserComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  appDetails = {} as AppDetails;\n+  selectedApps: App[] = [];\n+  user = {} as User;\n+  permission = Permission;\n+  adminId = '';\n+  userStatus = Status;\n+  sitesMessageMapping: {[k: string]: string} = {\n+    '=0': '0 Sites',\n+    '=1': '1 Site',\n+    'other': '# Sites',\n+  };\n+\n+  constructor(\n+    private readonly router: Router,\n+    private readonly userService: UserService,\n+    private readonly appsService: AppsService,\n+    private readonly toastr: ToastrService,\n+    private readonly route: ActivatedRoute,\n+  ) {\n+    super();\n+  }\n+\n+  ngOnInit(): void {\n+    this.subs.add(\n+      this.route.params.subscribe((params) => {\n+        if (params.userId) {\n+          this.adminId = params.userId as string;\n+        }\n+        this.getUserDetails();\n+      }),\n+    );\n+  }\n+\n+  getUserDetails(): void {\n+    this.subs.add(\n+      this.userService\n+        .getUserDetails(this.adminId)\n+        .subscribe((data: ManageUserDetails) => {\n+          this.user = data.user;\n+          this.user.manageLocationsSelected = this.user.manageLocations\n+            ? true\n+            : false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQyOTQ1OQ=="}, "originalCommit": {"oid": "0e4277d5a870338245a217407c69382d72610e1c"}, "originalPosition": 68}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMzYyNjk2OnYy", "diffSide": "RIGHT", "path": "UR-web-app/src/app/site-coordinator/user/update-user/update-user.component.ts", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0NzoyNFrOHOjcYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNDoyODowOFrOHQhKVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyMjgxOA==", "bodyText": "Why are they unwanted? Remove from what? Please make this function name clearer", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/849#discussion_r485022818", "createdAt": "2020-09-08T15:47:24Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/user/update-user/update-user.component.ts", "diffHunk": "@@ -210,4 +213,12 @@ export class UpdateUserComponent extends UnsubscribeOnDestroyAdapter\n             : this.userStatus.Deactivated;\n       });\n   }\n+  removeUnwantedAttributes(): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2043305d1204cec7da4642484fb08663b8ddb841"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTY1NjkwNQ==", "bodyText": "getUserDetails api response has status, selectedStudiesCount, totalStudiesCount attributes along with other attributes and same response is displayed in update user form and same response  will go to update user API as a request body but we are getting violation exception from web service and as per discussion with web service team we need to remove that status, selectedStudiesCoun, totalStudiesCount attributes from JSON before making  update user API call as it is not required in web service side and these attributes are not present in the request bean", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/849#discussion_r485656905", "createdAt": "2020-09-09T14:28:29Z", "author": {"login": "firdosebtc1"}, "path": "UR-web-app/src/app/site-coordinator/user/update-user/update-user.component.ts", "diffHunk": "@@ -210,4 +213,12 @@ export class UpdateUserComponent extends UnsubscribeOnDestroyAdapter\n             : this.userStatus.Deactivated;\n       });\n   }\n+  removeUnwantedAttributes(): void {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyMjgxOA=="}, "originalCommit": {"oid": "2043305d1204cec7da4642484fb08663b8ddb841"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgzNjI0MQ==", "bodyText": "Can you update the function name to answer these questions?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/849#discussion_r485836241", "createdAt": "2020-09-09T18:44:30Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/user/update-user/update-user.component.ts", "diffHunk": "@@ -210,4 +213,12 @@ export class UpdateUserComponent extends UnsubscribeOnDestroyAdapter\n             : this.userStatus.Deactivated;\n       });\n   }\n+  removeUnwantedAttributes(): void {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyMjgxOA=="}, "originalCommit": {"oid": "2043305d1204cec7da4642484fb08663b8ddb841"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA4MjU4MQ==", "bodyText": "Updated.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/849#discussion_r487082581", "createdAt": "2020-09-11T14:28:08Z", "author": {"login": "firdosebtc1"}, "path": "UR-web-app/src/app/site-coordinator/user/update-user/update-user.component.ts", "diffHunk": "@@ -210,4 +213,12 @@ export class UpdateUserComponent extends UnsubscribeOnDestroyAdapter\n             : this.userStatus.Deactivated;\n       });\n   }\n+  removeUnwantedAttributes(): void {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyMjgxOA=="}, "originalCommit": {"oid": "2043305d1204cec7da4642484fb08663b8ddb841"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1909, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}