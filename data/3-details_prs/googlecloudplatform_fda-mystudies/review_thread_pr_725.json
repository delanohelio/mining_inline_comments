{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzMjM3MjM1", "number": 725, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxOToyOToxMlrOEVjCMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxOTozMzoyN1rOEVjHKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMDI5NTUzOnYy", "diffSide": "RIGHT", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/ErrorCode.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxOToyOToxMlrOG8XkKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwNTowMDoxOFrOG8jWww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1MzgzNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              CANNOT_UPDATE_ENROLLMENT_TARGET_FOR_DEACTIVE_SITE(\n          \n          \n            \n              CANNOT_UPDATE_ENROLLMENT_TARGET_FOR_DECOMMISSIONED_SITE(", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r465953835", "createdAt": "2020-08-05T19:29:12Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/ErrorCode.java", "diffHunk": "@@ -166,7 +163,16 @@\n       500,\n       \"EC_914\",\n       HttpStatus.INTERNAL_SERVER_ERROR.toString(),\n-      \"Unable to import the participants\");\n+      \"Unable to import the participants\"),\n+\n+  CANNOT_UPDATE_ENROLLMENT_TARGET_FOR_CLOSE_STUDY(\n+      400, \"EC-95\", Constants.BAD_REQUEST, \" Cannot update enrollment target for closed study\"),\n+\n+  CANNOT_UPDATE_ENROLLMENT_TARGET_FOR_DEACTIVE_SITE(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a1ce125f5af3a1440e0e4833f8e69925cc7226a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE0NzAxMQ==", "bodyText": "Changed to CANNOT_UPDATE_ENROLLMENT_TARGET_FOR_DECOMMISSIONED_SITE", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r466147011", "createdAt": "2020-08-06T05:00:18Z", "author": {"login": "Kantharajut-btc"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/ErrorCode.java", "diffHunk": "@@ -166,7 +163,16 @@\n       500,\n       \"EC_914\",\n       HttpStatus.INTERNAL_SERVER_ERROR.toString(),\n-      \"Unable to import the participants\");\n+      \"Unable to import the participants\"),\n+\n+  CANNOT_UPDATE_ENROLLMENT_TARGET_FOR_CLOSE_STUDY(\n+      400, \"EC-95\", Constants.BAD_REQUEST, \" Cannot update enrollment target for closed study\"),\n+\n+  CANNOT_UPDATE_ENROLLMENT_TARGET_FOR_DEACTIVE_SITE(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1MzgzNQ=="}, "originalCommit": {"oid": "0a1ce125f5af3a1440e0e4833f8e69925cc7226a"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMDI5NjM5OnYy", "diffSide": "RIGHT", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/MessageCode.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxOToyOToyN1rOG8Xkug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwNTowMDozOFrOG8jXKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1Mzk3OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  HttpStatus.OK, \"MSG-0030\", \"Target enrolllment updated successfully\");\n          \n          \n            \n                  HttpStatus.OK, \"MSG-0030\", \"Target enrollment updated successfully\");", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r465953978", "createdAt": "2020-08-05T19:29:27Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/MessageCode.java", "diffHunk": "@@ -80,7 +77,10 @@\n \n   GET_SITES_SUCCESS(HttpStatus.OK, \"MSG-0018\", \"Get sites successfully\"),\n \n-  PROFILE_UPDATE_SUCCESS(HttpStatus.OK, \"MSG-0011\", \"Profile updated successfully\");\n+  PROFILE_UPDATE_SUCCESS(HttpStatus.OK, \"MSG-0011\", \"Profile updated successfully\"),\n+\n+  TARGET_ENROLLMENT_UPDATE_SUCCESS(\n+      HttpStatus.OK, \"MSG-0030\", \"Target enrolllment updated successfully\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a1ce125f5af3a1440e0e4833f8e69925cc7226a"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE0NzExMw==", "bodyText": "typo corrected", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r466147113", "createdAt": "2020-08-06T05:00:38Z", "author": {"login": "Kantharajut-btc"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/MessageCode.java", "diffHunk": "@@ -80,7 +77,10 @@\n \n   GET_SITES_SUCCESS(HttpStatus.OK, \"MSG-0018\", \"Get sites successfully\"),\n \n-  PROFILE_UPDATE_SUCCESS(HttpStatus.OK, \"MSG-0011\", \"Profile updated successfully\");\n+  PROFILE_UPDATE_SUCCESS(HttpStatus.OK, \"MSG-0011\", \"Profile updated successfully\"),\n+\n+  TARGET_ENROLLMENT_UPDATE_SUCCESS(\n+      HttpStatus.OK, \"MSG-0030\", \"Target enrolllment updated successfully\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1Mzk3OA=="}, "originalCommit": {"oid": "0a1ce125f5af3a1440e0e4833f8e69925cc7226a"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMDMwODI3OnYy", "diffSide": "RIGHT", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/SiteRepository.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxOTozMzoyN1rOG8XskA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwNTo0NTo1M1rOG8kImg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1NTk4NA==", "bodyText": "This is not being used in this PR. Please remove if only the func below is needed.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r465955984", "createdAt": "2020-08-05T19:33:27Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/SiteRepository.java", "diffHunk": "@@ -37,4 +37,10 @@\n \n   @Query(\"SELECT site from SiteEntity site where site.study.id IN (:studyIds)\")\n   public List<SiteEntity> findByStudyIds(@Param(\"studyIds\") List<String> studyIds);\n+\n+  @Query(\"SELECT site from SiteEntity site where site.study.id= :studyId\")\n+  public List<SiteEntity> findByStudyId(String studyId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a1ce125f5af3a1440e0e4833f8e69925cc7226a"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE0NzI4Mw==", "bodyText": "Removed this unused method", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r466147283", "createdAt": "2020-08-06T05:01:20Z", "author": {"login": "Kantharajut-btc"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/SiteRepository.java", "diffHunk": "@@ -37,4 +37,10 @@\n \n   @Query(\"SELECT site from SiteEntity site where site.study.id IN (:studyIds)\")\n   public List<SiteEntity> findByStudyIds(@Param(\"studyIds\") List<String> studyIds);\n+\n+  @Query(\"SELECT site from SiteEntity site where site.study.id= :studyId\")\n+  public List<SiteEntity> findByStudyId(String studyId);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1NTk4NA=="}, "originalCommit": {"oid": "0a1ce125f5af3a1440e0e4833f8e69925cc7226a"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE1NjcwMA==", "bodyText": "Can you rename the remaining method findByStudyId for consistency in naming? Also I just figured by looking at this whole file that findBySites and findByStudyIds are also exactly the same, too. Please correct that either in this PR or a separate one with a bug filed.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r466156700", "createdAt": "2020-08-06T05:35:35Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/SiteRepository.java", "diffHunk": "@@ -37,4 +37,10 @@\n \n   @Query(\"SELECT site from SiteEntity site where site.study.id IN (:studyIds)\")\n   public List<SiteEntity> findByStudyIds(@Param(\"studyIds\") List<String> studyIds);\n+\n+  @Query(\"SELECT site from SiteEntity site where site.study.id= :studyId\")\n+  public List<SiteEntity> findByStudyId(String studyId);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1NTk4NA=="}, "originalCommit": {"oid": "0a1ce125f5af3a1440e0e4833f8e69925cc7226a"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE1OTc3MA==", "bodyText": "Reused findByStudyIds by deleting findBySites and renamed method name to findByStudyId", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r466159770", "createdAt": "2020-08-06T05:45:53Z", "author": {"login": "Kantharajut-btc"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/SiteRepository.java", "diffHunk": "@@ -37,4 +37,10 @@\n \n   @Query(\"SELECT site from SiteEntity site where site.study.id IN (:studyIds)\")\n   public List<SiteEntity> findByStudyIds(@Param(\"studyIds\") List<String> studyIds);\n+\n+  @Query(\"SELECT site from SiteEntity site where site.study.id= :studyId\")\n+  public List<SiteEntity> findByStudyId(String studyId);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1NTk4NA=="}, "originalCommit": {"oid": "0a1ce125f5af3a1440e0e4833f8e69925cc7226a"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2104, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}