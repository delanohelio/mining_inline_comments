{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2NDk5NjM0", "number": 192, "title": "iOS - Hide categories from Filters", "bodyText": "This fixes #102\nShow Toast on Logout.", "createdAt": "2020-04-21T07:46:53Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/192", "merged": true, "mergeCommit": {"oid": "383a3939d8d2fb2eb0cc68c0333da8d63ca7da52"}, "closed": true, "closedAt": "2020-04-22T06:12:09Z", "author": {"login": "tushar-boston"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYjNqgAH2gAyNDA2NDk5NjM0OjZhMjRhN2UyOGUyMjFiOTY1YTlmZDkyMjI5ZmU0YzhjOWE5OTM3MTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZ27tigFqTM5NzUwNDQ2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6a24a7e28e221b965a9fd92229fe4c8c9a993713", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/6a24a7e28e221b965a9fd92229fe4c8c9a993713", "committedDate": "2020-04-17T15:41:52Z", "message": "Remove the study category label from the studies list."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea3113ac2558e9d7f8c373bfb8b0b3249e65c904", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ea3113ac2558e9d7f8c373bfb8b0b3249e65c904", "committedDate": "2020-04-20T08:55:34Z", "message": "Update copyrights for PR #166"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5343b6f2af194195da6f4898a785d742d03961c5", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5343b6f2af194195da6f4898a785d742d03961c5", "committedDate": "2020-04-20T09:05:55Z", "message": "Merge branch 'early-access' of https://github.com/GoogleCloudPlatform/fda-mystudies into ios-ui-update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9284ee0519565dea5e3f9ec9c78259267a310695", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9284ee0519565dea5e3f9ec9c78259267a310695", "committedDate": "2020-04-20T13:09:58Z", "message": "Add Pod Toast-Swift."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcf04cb417a3e4c0f9aa892d9ab9c5f5e8df0322", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bcf04cb417a3e4c0f9aa892d9ab9c5f5e8df0322", "committedDate": "2020-04-21T07:30:44Z", "message": "- Hide studies categories from the filters.\n- Show toast on logout success."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3391e1e72cd2cd00928bcebb3dc7d8e4e3ac1386", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/3391e1e72cd2cd00928bcebb3dc7d8e4e3ac1386", "committedDate": "2020-04-21T07:33:06Z", "message": "Renamed AnonymousFilterData.plist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c79543b42a78dab391652f9aca465f445e17a48e", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c79543b42a78dab391652f9aca465f445e17a48e", "committedDate": "2020-04-21T07:42:18Z", "message": "import Toast Swift."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "500b02e1cce452f1947968a68056ea79de894e1d", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/500b02e1cce452f1947968a68056ea79de894e1d", "committedDate": "2020-04-21T07:47:17Z", "message": "Merge branch 'early-access' into ios-ui-update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "250fd3ad6e2440cd243cc69ab8cf712b6d5e1e9d", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/250fd3ad6e2440cd243cc69ab8cf712b6d5e1e9d", "committedDate": "2020-04-21T08:19:03Z", "message": "Update filters when user login or signup."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NTA0NDYz", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/192#pullrequestreview-397504463", "createdAt": "2020-04-21T17:08:27Z", "commit": {"oid": "250fd3ad6e2440cd243cc69ab8cf712b6d5e1e9d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNzowODoyOFrOGJPAPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNzowODoyOFrOGJPAPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjMzNjE5MQ==", "bodyText": "you can just assign to the boolean value", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/192#discussion_r412336191", "createdAt": "2020-04-21T17:08:28Z", "author": {"login": "nikklassen"}, "path": "iOS/HPHC/HPHC/Controllers/GatewayUI/StudyUI/StudyFilterViewController.swift", "diffHunk": "@@ -235,62 +245,56 @@ extension AppDelegate {\n   /// setter method to set the default filter options if none are selected.\n   func setDefaultFilters(previousCollectionData: [[String]]) {\n \n-    var filterData: NSMutableArray?\n-    var resource = \"AnanomousFilterData\"\n-\n-    if User.currentUser.userType == .FDAUser {\n-      resource = \"FilterData\"\n-    }\n+    let resource = (User.currentUser.userType == .FDAUser) ? \"FilterData\" : \"AnonymousFilterData\"\n \n-    let plistPath = Bundle.main.path(forResource: resource, ofType: \".plist\", inDirectory: nil)\n-    filterData = NSMutableArray.init(contentsOfFile: plistPath!)!\n+    let plistPath = Bundle.main.path(forResource: resource, ofType: \".plist\", inDirectory: nil) ?? \"\"\n+    guard let filterData = NSMutableArray.init(contentsOfFile: plistPath) else { return }\n \n     StudyFilterHandler.instance.filterOptions = []\n     var filterOptionsList: [FilterOptions] = []\n-    var i = 0\n \n-    for options in filterData! {\n-      let values = ((options as? [String: Any])![\"studyData\"] as? [[String: Any]])!\n-      let filterOptions = FilterOptions()\n-      filterOptions.title = ((options as? [String: Any])![\"headerText\"] as? String)!\n+    for (index, options) in filterData.enumerated() {\n+\n+      guard let dataDict = options as? JSONDictionary,\n+        let valuesDict = dataDict[\"studyData\"] as? [JSONDictionary]\n+      else { continue }\n+\n+      let headerTitle = dataDict[\"headerText\"] as? String ?? \"\"\n+      let type = dataDict[\"type\"] as? String ?? \"\"\n+\n+      guard let filterType = FilterType(rawValue: type) else { continue }\n+\n+      let filterOptions = FilterOptions(title: headerTitle, type: filterType)\n \n       var selectedValues: [String] = []\n       if previousCollectionData.count > 0 {\n-        selectedValues = previousCollectionData[i]\n+        selectedValues = previousCollectionData[index]\n       }\n \n       var filterValues: [FilterValues] = []\n-      for value in values {\n-\n-        var isContained = false\n+      for value in valuesDict {\n \n         let filterValue = FilterValues()\n-        filterValue.title = (value[\"name\"] as? String)!\n-\n-        if selectedValues.count > 0 {\n-          isContained = selectedValues.contains((value[\"name\"] as? String)!)\n-        }\n+        let name = value[\"name\"] as? String ?? \"\"\n+        filterValue.title = name\n+        let isContained = selectedValues.contains(name) ? true : false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "250fd3ad6e2440cd243cc69ab8cf712b6d5e1e9d"}, "originalPosition": 160}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1119, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}