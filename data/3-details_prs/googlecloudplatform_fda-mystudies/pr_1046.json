{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzNTc4MDE1", "number": 1046, "title": "Study Builder - Audit log Implementation for StudyQuestionnaireController with Test Cases ", "bodyText": "Audit log Implementation for StudyQuestionnaireController  with Test Cases\nCode Format+Organize imports\nRemoved old Audit Log code", "createdAt": "2020-09-26T13:37:03Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046", "merged": true, "mergeCommit": {"oid": "725e4520fb2793a1aabeb0c00dfa95c8cbd0321b"}, "closed": true, "closedAt": "2020-09-29T13:20:37Z", "author": {"login": "Kantharajut-btc"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMqf2uAH2gAyNDkzNTc4MDE1OjU1ZmE5NmUxMDFkMDViOWI2ZDc5NDEyOGYzM2Y2MTEwZDgxM2ZhOTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNoEGgAFqTQ5ODQ1ODMzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "55fa96e101d05b9b6d794128f33f6110d813fa91", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/55fa96e101d05b9b6d794128f33f6110d813fa91", "committedDate": "2020-09-26T13:35:08Z", "message": "audit log event implementation for StudyQuestionnaireController\n\naudit log event implementation for StudyQuestionnaireController"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1af0298c8b43f585bba90e21b1e8fe03aad6d2e3", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1af0298c8b43f585bba90e21b1e8fe03aad6d2e3", "committedDate": "2020-09-28T14:06:30Z", "message": "Merge branch 'develop' into study-builder-audit-log-study-questionnarie-controller"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/11d1c50a70c0ce3e01dc7de2d87bb05cc454d666", "committedDate": "2020-09-28T16:46:14Z", "message": "Merge branch 'develop' into study-builder-audit-log-study-questionnarie-controller"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3Nzk1NTcz", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#pullrequestreview-497795573", "createdAt": "2020-09-28T18:35:25Z", "commit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODozNToyNVrOHZK3Tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo1OToxNVrOHZLp1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE1NDQ0Nw==", "bodyText": "I have seen different PRs today adding and not adding an empty line between static imports. Please make sure to keep it consistent", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#discussion_r496154447", "createdAt": "2020-09-28T18:35:25Z", "author": {"login": "saminguyen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/controller/StudyQuestionnaireController.java", "diffHunk": "@@ -1,28 +1,23 @@\n /*\n- * Copyright \u00a9 2017-2018 Harvard Pilgrim Health Care Institute (HPHCI) and its Contributors.\n- * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and\n- * associated documentation files (the \"Software\"), to deal in the Software without restriction, including\n- * without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\n- * of the Software, and to permit persons to whom the Software is furnished to do so, subject to the\n- * following conditions:\n+ * Copyright 2020 Google LLC\n  *\n- * The above copyright notice and this permission notice shall be included in all copies or substantial\n- * portions of the Software.\n- *\n- * Funding Source: Food and Drug Administration (\"Funding Agency\") effective 18 September 2014 as Contract no.\n- * HHSF22320140030I/HHSF22301006T (the \"Prime Contract\").\n- *\n- * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n- * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n- * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL\n- * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR\n- * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\n- * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n- * OTHER DEALINGS IN THE SOFTWARE.\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n  */\n \n package com.fdahpstudydesigner.controller;\n \n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_ACTIVE_TASK_SECTION_MARKED_COMPLETE;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_NEW_ACTIVE_TASK_CREATED;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_QUESTIONNAIRE_DELETED;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_QUESTIONNAIRE_SAVED_OR_UPDATED;\n+import static com.fdahpstudydesigner.common.StudyBuilderAuditEvent.STUDY_QUESTION_STEP_IN_FORM_DELETED;\n+import static com.fdahpstudydesigner.common.StudyBuilderConstants.FORM_ID;\n+import static com.fdahpstudydesigner.common.StudyBuilderConstants.QUESTION_ID;\n+import static com.fdahpstudydesigner.common.StudyBuilderConstants.STEP_ID;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2NjY3NA==", "bodyText": "remove commented line", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#discussion_r496166674", "createdAt": "2020-09-28T18:57:54Z", "author": {"login": "saminguyen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/controller/StudyQuestionnaireController.java", "diffHunk": "@@ -2126,6 +2162,7 @@ public ModelAndView saveorUpdateQuestionnaireSchedule(\n           }\n         }\n       }\n+      // auditLogEventHelper.logEvent(eventEnum, auditRequest, values);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666"}, "originalPosition": 210}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2NzA5Nw==", "bodyText": "remove if not needed", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#discussion_r496167097", "createdAt": "2020-09-28T18:58:43Z", "author": {"login": "saminguyen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyQuestionnaireDAOImpl.java", "diffHunk": "@@ -1034,15 +1040,20 @@ public String deleteFromStepQuestion(\n         }\n         message = FdahpStudyDesignerConstants.SUCCESS;\n       }\n-      activity = \"Question of form step was deleted.\";\n+\n+      values.put(QUESTION_ID, questionId.toString());\n+      values.put(STEP_ID, formId.toString());\n+      auditLogEventHelper.logEvent(STUDY_QUESTION_STEP_DELETED, auditRequest, values);\n+\n+      /*activity = \"Question of form step was deleted.\";\n       activitydetails = \"Question of form step was deleted. (Study ID = \" + customStudyId + \")\";\n       auditLogDAO.saveToAuditLog(\n           session,\n           transaction,\n           sessionObject,\n           activity,\n           activitydetails,\n-          \"StudyQuestionnaireDAOImpl - deleteFromStepQuestion\");\n+          \"StudyQuestionnaireDAOImpl - deleteFromStepQuestion\");*/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2NzM4MA==", "bodyText": "remove commented code if not needed", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#discussion_r496167380", "createdAt": "2020-09-28T18:59:15Z", "author": {"login": "saminguyen"}, "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyQuestionnaireDAOImpl.java", "diffHunk": "@@ -1284,30 +1303,31 @@ public String deleteQuestionnaireStep(\n           String deleteQuery = \"delete InstructionsBo IBO where IBO.id=\" + stepId;\n           query = session.createQuery(deleteQuery);\n           query.executeUpdate();\n-          activity = FdahpStudyDesignerConstants.INSTRUCTION_ACTIVITY + \" was deleted.\";\n-          ;\n+          auditLogEventHelper.logEvent(STUDY_INSTRUCTION_STEP_DELETED, auditRequest, values);\n+          /*activity = FdahpStudyDesignerConstants.INSTRUCTION_ACTIVITY + \" was deleted.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11d1c50a70c0ce3e01dc7de2d87bb05cc454d666"}, "originalPosition": 188}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d685493b30b00797be19cc959d73de640723db9", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4d685493b30b00797be19cc959d73de640723db9", "committedDate": "2020-09-29T06:22:13Z", "message": "Fixed PR comments\n\nFixed PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "421b63bcef44b06ebf429efe1409413ea8b53edc", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/421b63bcef44b06ebf429efe1409413ea8b53edc", "committedDate": "2020-09-29T10:31:03Z", "message": "replaced event code\n\nreplaced event code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf16ff3bc17c386073e2b52d8f4438cb8ad5670d", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bf16ff3bc17c386073e2b52d8f4438cb8ad5670d", "committedDate": "2020-09-29T10:47:08Z", "message": "Merge branch 'develop' into study-builder-audit-log-study-questionnarie-controller"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81971d22b1ae7f1cb2a19634effa5bccdd5b8a0a", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/81971d22b1ae7f1cb2a19634effa5bccdd5b8a0a", "committedDate": "2020-09-29T10:55:14Z", "message": "fixed test failure\n\nfixed test failure"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NDU4MzMy", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1046#pullrequestreview-498458332", "createdAt": "2020-09-29T13:18:56Z", "commit": {"oid": "81971d22b1ae7f1cb2a19634effa5bccdd5b8a0a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 315, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}