{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzNjIzMDYx", "number": 2280, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDo1Mjo1M1rOFB0azg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDo1Mjo1M1rOFB0azg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NDUxNzI2OnYy", "diffSide": "RIGHT", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/mapper/AuditEventMapper.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDo1Mjo1M1rOIAqjVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNzozNToxOVrOIBsFyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU2ODA4Nw==", "bodyText": "consider moving it to a cookie name helper, otherwise all AuditEventMappers in each component would need to be aware of this prefix.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2280#discussion_r537568087", "createdAt": "2020-12-07T14:52:53Z", "author": {"login": "zohrehj"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/mapper/AuditEventMapper.java", "diffHunk": "@@ -56,7 +62,14 @@ public static AuditLogEventRequest fromHttpServletRequest(HttpServletRequest req\n   private static String getValue(HttpServletRequest request, String name) {\n     String value = request.getHeader(name);\n     if (StringUtils.isEmpty(value)) {\n-      value = getCookieValue(request, name);\n+      value = getCookieValue(request, \"mystudies_\" + name);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e1549e27fa18e811f5d97c6289877cfa3e2fa00"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODEwOTY1MA==", "bodyText": "AuditEventMapper is in common-service and all the services use this mapper. I've already added decode() in cookie helper, CookieHelper L69.\nPlease review and approve the PR.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2280#discussion_r538109650", "createdAt": "2020-12-08T07:49:17Z", "author": {"login": "dhanyak-btc"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/mapper/AuditEventMapper.java", "diffHunk": "@@ -56,7 +62,14 @@ public static AuditLogEventRequest fromHttpServletRequest(HttpServletRequest req\n   private static String getValue(HttpServletRequest request, String name) {\n     String value = request.getHeader(name);\n     if (StringUtils.isEmpty(value)) {\n-      value = getCookieValue(request, name);\n+      value = getCookieValue(request, \"mystudies_\" + name);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU2ODA4Nw=="}, "originalCommit": {"oid": "5e1549e27fa18e811f5d97c6289877cfa3e2fa00"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ4MDIzMg==", "bodyText": "can this function reuse the cookie prefix constant?\nMy problem is that if these prefix values are supposed to match one another, their value should not be scattered through the code, but should be set as a constant, or attached/removed in a global helper function and used by all other services.\nThis is not what we are doing here.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2280#discussion_r538480232", "createdAt": "2020-12-08T15:11:31Z", "author": {"login": "zohrehj"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/mapper/AuditEventMapper.java", "diffHunk": "@@ -56,7 +62,14 @@ public static AuditLogEventRequest fromHttpServletRequest(HttpServletRequest req\n   private static String getValue(HttpServletRequest request, String name) {\n     String value = request.getHeader(name);\n     if (StringUtils.isEmpty(value)) {\n-      value = getCookieValue(request, name);\n+      value = getCookieValue(request, \"mystudies_\" + name);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU2ODA4Nw=="}, "originalCommit": {"oid": "5e1549e27fa18e811f5d97c6289877cfa3e2fa00"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ5MzU4Ng==", "bodyText": "Cookies are set/get by auth-server only, other services don't use these cookies. I'll ask @harisboston to extract mystudies_ to constant and fix the review comment.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2280#discussion_r538493586", "createdAt": "2020-12-08T15:23:57Z", "author": {"login": "dhanyak-btc"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/mapper/AuditEventMapper.java", "diffHunk": "@@ -56,7 +62,14 @@ public static AuditLogEventRequest fromHttpServletRequest(HttpServletRequest req\n   private static String getValue(HttpServletRequest request, String name) {\n     String value = request.getHeader(name);\n     if (StringUtils.isEmpty(value)) {\n-      value = getCookieValue(request, name);\n+      value = getCookieValue(request, \"mystudies_\" + name);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU2ODA4Nw=="}, "originalCommit": {"oid": "5e1549e27fa18e811f5d97c6289877cfa3e2fa00"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODUzNDkyNg==", "bodyText": "Fixed review comment", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2280#discussion_r538534926", "createdAt": "2020-12-08T16:00:01Z", "author": {"login": "harisboston"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/mapper/AuditEventMapper.java", "diffHunk": "@@ -56,7 +62,14 @@ public static AuditLogEventRequest fromHttpServletRequest(HttpServletRequest req\n   private static String getValue(HttpServletRequest request, String name) {\n     String value = request.getHeader(name);\n     if (StringUtils.isEmpty(value)) {\n-      value = getCookieValue(request, name);\n+      value = getCookieValue(request, \"mystudies_\" + name);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU2ODA4Nw=="}, "originalCommit": {"oid": "5e1549e27fa18e811f5d97c6289877cfa3e2fa00"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY0MTg2Nw==", "bodyText": "the comment was about referring/using the same constant, rather than creating new constants everywhere. I'll approve for now, but please file a bug and fix it.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2280#discussion_r538641867", "createdAt": "2020-12-08T17:35:19Z", "author": {"login": "zohrehj"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/mapper/AuditEventMapper.java", "diffHunk": "@@ -56,7 +62,14 @@ public static AuditLogEventRequest fromHttpServletRequest(HttpServletRequest req\n   private static String getValue(HttpServletRequest request, String name) {\n     String value = request.getHeader(name);\n     if (StringUtils.isEmpty(value)) {\n-      value = getCookieValue(request, name);\n+      value = getCookieValue(request, \"mystudies_\" + name);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU2ODA4Nw=="}, "originalCommit": {"oid": "5e1549e27fa18e811f5d97c6289877cfa3e2fa00"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1520, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}