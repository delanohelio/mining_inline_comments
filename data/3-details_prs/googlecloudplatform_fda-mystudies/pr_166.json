{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MDI3ODcz", "number": 166, "title": "Update UIWebView to WKWebView.", "bodyText": "Update deprecated API.\n\nUIWebView\n\n.", "createdAt": "2020-04-17T09:36:43Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/166", "merged": true, "mergeCommit": {"oid": "c1ec3042250baff4d2888247802d86cd4812e131"}, "closed": true, "closedAt": "2020-04-17T15:33:22Z", "author": {"login": "tushar-boston"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYd7XIgH2gAyNDA1MDI3ODczOjcxMjg1MmMyYjhmNDFjMTE0NjU0MzU2MTc4NDQ3ZWIwODAwMjcxMjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYhutWgFqTM5NTQ3NDU0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "712852c2b8f41c114654356178447eb080027124", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/712852c2b8f41c114654356178447eb080027124", "committedDate": "2020-04-17T09:32:21Z", "message": "Update UIWebView to WKWebView."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "995aef3ca29589be0db0fa9f3261daaa844244c2", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/995aef3ca29589be0db0fa9f3261daaa844244c2", "committedDate": "2020-04-17T13:29:11Z", "message": "Fix load consent PDF."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NDc0NTQ2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/166#pullrequestreview-395474546", "createdAt": "2020-04-17T13:54:36Z", "commit": {"oid": "995aef3ca29589be0db0fa9f3261daaa844244c2"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxMzo1NDozN1rOGHO-jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxMzo1NTo0NVrOGHPCBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIzODYwNw==", "bodyText": "nit: change didFail to didFinish to be consistent with the previous method.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/166#discussion_r410238607", "createdAt": "2020-04-17T13:54:37Z", "author": {"login": "zohrehj"}, "path": "iOS/HPHC/HPHC/Controllers/StudyUI/ResourceUI/GatewayResourceDetailViewController.swift", "diffHunk": "@@ -159,24 +153,19 @@ class GatewayResourceDetailViewController: UIViewController {\n   }\n \n   @IBAction func buttonActionForward(_ sender: UIBarButtonItem) {\n-\n     self.sendEmail()\n   }\n \n-  override func didReceiveMemoryWarning() {\n-    super.didReceiveMemoryWarning()\n-    // Dispose of any resources that can be recreated.\n-  }\n }\n \n-extension GatewayResourceDetailViewController: UIWebViewDelegate {\n+extension GatewayResourceDetailViewController: WKNavigationDelegate {\n \n-  func webViewDidFinishLoad(_ webView: UIWebView) {\n+  func webView(_ webView: WKWebView, didFinish navigation: WKNavigation!) {\n     self.activityIndicator.stopAnimating()\n     self.activityIndicator.removeFromSuperview()\n   }\n \n-  func webView(_ webView: UIWebView, didFailLoadWithError error: Error) {\n+  func webView(_ webView: WKWebView, didFail navigation: WKNavigation!, withError error: Error) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "995aef3ca29589be0db0fa9f3261daaa844244c2"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIzOTQ5NQ==", "bodyText": "nit: typo. didFailWithError", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/166#discussion_r410239495", "createdAt": "2020-04-17T13:55:45Z", "author": {"login": "zohrehj"}, "path": "iOS/HPHC/HPHC/Controllers/StudyUI/ResourceUI/GatewayResourceDetailViewController.swift", "diffHunk": "@@ -295,21 +284,18 @@ extension GatewayResourceDetailViewController: FileDownloadManagerDelegates {\n \n     let data = FileDownloadManager.decrytFile(pathURL: URL.init(string: fullPath))\n \n-    if data != nil {\n+    if let pdfData = data {\n       self.resource?.file?.localPath = path\n-      let mimeType = \"application/\" + \"\\((self.resource?.file?.mimeType?.rawValue)!)\"\n-      self.webView?.load(\n-        data!,\n+      let mimeType = \"application/\" + \"\\(self.resource?.file?.mimeType?.rawValue ?? \"\")\"\n+      self.webView.load(\n+        pdfData,\n         mimeType: mimeType,\n-        textEncodingName: \"UTF-8\",\n-        baseURL: URL.init(fileURLWithPath: \"\")\n+        characterEncodingName: \"UTF-8\",\n+        baseURL: URL(fileURLWithPath: \"\")\n       )\n     }\n-\n   }\n \n-  func download(manager: FileDownloadManager, didFailedWithError error: Error) {\n-\n-  }\n+  func download(manager: FileDownloadManager, didFailedWithError error: Error) {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "995aef3ca29589be0db0fa9f3261daaa844244c2"}, "originalPosition": 116}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1102, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}