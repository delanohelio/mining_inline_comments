{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExNjgwNjky", "number": 1697, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMDo0NjoxMVrOEy_nRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMDo0NjoxMVrOEy_nRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxOTA2NTAzOnYy", "diffSide": "RIGHT", "path": "participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/UserProfileControllerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMDo0NjoxMVrOHp8wHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMDo1MTozNlrOHqWTCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzc0OTAyMg==", "bodyText": "are you setting the same user as both superadmin and invited?\nlet's not do that. otherwise any future change in superadmin functionality and/or additional safety checks will break your test.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1697#discussion_r513749022", "createdAt": "2020-10-28T20:46:11Z", "author": {"login": "zohrehj"}, "path": "participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/UserProfileControllerTest.java", "diffHunk": "@@ -532,6 +533,83 @@ public void shouldReturnBadRequestForDeactivateUser() throws Exception {\n     verifyTokenIntrospectRequest();\n   }\n \n+  @Test\n+  public void shouldDeleteInvitedUser() throws Exception {\n+    // Step 1: set user status as invited\n+    userRegAdminEntity.setStatus(CommonConstants.INVITED_STATUS);\n+    testDataHelper.getUserRegAdminRepository().saveAndFlush(userRegAdminEntity);\n+\n+    // Step 2: Call the API and expect INVITATION_DELETED_SUCCESSFULLY message\n+    HttpHeaders headers = testDataHelper.newCommonHeaders();\n+    headers.add(\"userId\", userRegAdminEntity.getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be63d8a48bbc3e0eca837cccc0a07b34f7f3c855"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE2NzU2MQ==", "bodyText": "Fixed review comment", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1697#discussion_r514167561", "createdAt": "2020-10-29T10:51:36Z", "author": {"login": "harisboston"}, "path": "participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/UserProfileControllerTest.java", "diffHunk": "@@ -532,6 +533,83 @@ public void shouldReturnBadRequestForDeactivateUser() throws Exception {\n     verifyTokenIntrospectRequest();\n   }\n \n+  @Test\n+  public void shouldDeleteInvitedUser() throws Exception {\n+    // Step 1: set user status as invited\n+    userRegAdminEntity.setStatus(CommonConstants.INVITED_STATUS);\n+    testDataHelper.getUserRegAdminRepository().saveAndFlush(userRegAdminEntity);\n+\n+    // Step 2: Call the API and expect INVITATION_DELETED_SUCCESSFULLY message\n+    HttpHeaders headers = testDataHelper.newCommonHeaders();\n+    headers.add(\"userId\", userRegAdminEntity.getId());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzc0OTAyMg=="}, "originalCommit": {"oid": "be63d8a48bbc3e0eca837cccc0a07b34f7f3c855"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1606, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}