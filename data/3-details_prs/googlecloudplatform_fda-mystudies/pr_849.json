{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NDk1MzQ4", "number": 849, "title": "Participant Manager Webapp update user", "bodyText": "", "createdAt": "2020-08-28T16:06:57Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/849", "merged": true, "mergeCommit": {"oid": "80eaf8ffe691e4f70e5f0c4bc75c2c6d47044a25"}, "closed": true, "closedAt": "2020-09-11T14:45:21Z", "author": {"login": "firdosebtc1"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDXOw2gH2gAyNDc1NDk1MzQ4OjBlNDI3N2Q1YTg3MDMzODI0NWEyMTc0MDdjNjkzODJkNzI2MTBlMWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdH2bUUgFqTQ4Njg2NzMwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0e4277d5a870338245a217407c69382d72610e1c", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0e4277d5a870338245a217407c69382d72610e1c", "committedDate": "2020-08-28T16:02:57Z", "message": "update user has been implemented"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3ODkxMDA5", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/849#pullrequestreview-477891009", "createdAt": "2020-08-28T17:04:09Z", "commit": {"oid": "0e4277d5a870338245a217407c69382d72610e1c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNzowNDowOVrOHJODUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNzowNDowOVrOHJODUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQyOTQ1OQ==", "bodyText": "Don't return a boolean from a ternary operator. This is exactly the same as this.user.manageLocationsSelected = this.user.manageLocations", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/849#discussion_r479429459", "createdAt": "2020-08-28T17:04:09Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/user/update-user/update-user.component.ts", "diffHunk": "@@ -1,8 +1,213 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit} from '@angular/core';\n+import {UserService} from '../shared/user.service';\n+import {Router, ActivatedRoute} from '@angular/router';\n+import {ToastrService} from 'ngx-toastr';\n+import {AppDetails, App, Study, Site} from '../shared/app-details';\n+import {User} from 'src/app/entity/user';\n+import {ApiResponse} from 'src/app/entity/api.response.model';\n+import {getMessage} from 'src/app/shared/success.codes.enum';\n+import {Permission} from 'src/app/shared/permission-enums';\n+import {AppsService} from '../../apps/shared/apps.service';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n+import {\n+  ManageUserDetails,\n+  UpdateStatusRequest,\n+} from '../shared/manage-user-details';\n+import {Status} from 'src/app/shared/enums';\n \n @Component({\n   selector: 'user-update',\n   templateUrl: './update-user.component.html',\n-  styleUrls: ['./update-user.component.scss'],\n })\n-export class UpdateUserComponent {}\n+export class UpdateUserComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  appDetails = {} as AppDetails;\n+  selectedApps: App[] = [];\n+  user = {} as User;\n+  permission = Permission;\n+  adminId = '';\n+  userStatus = Status;\n+  sitesMessageMapping: {[k: string]: string} = {\n+    '=0': '0 Sites',\n+    '=1': '1 Site',\n+    'other': '# Sites',\n+  };\n+\n+  constructor(\n+    private readonly router: Router,\n+    private readonly userService: UserService,\n+    private readonly appsService: AppsService,\n+    private readonly toastr: ToastrService,\n+    private readonly route: ActivatedRoute,\n+  ) {\n+    super();\n+  }\n+\n+  ngOnInit(): void {\n+    this.subs.add(\n+      this.route.params.subscribe((params) => {\n+        if (params.userId) {\n+          this.adminId = params.userId as string;\n+        }\n+        this.getUserDetails();\n+      }),\n+    );\n+  }\n+\n+  getUserDetails(): void {\n+    this.subs.add(\n+      this.userService\n+        .getUserDetails(this.adminId)\n+        .subscribe((data: ManageUserDetails) => {\n+          this.user = data.user;\n+          this.user.manageLocationsSelected = this.user.manageLocations\n+            ? true\n+            : false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4277d5a870338245a217407c69382d72610e1c"}, "originalPosition": 68}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dce29b1f4f7f5dbbeb575698b3f26903a2fad9d7", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/dce29b1f4f7f5dbbeb575698b3f26903a2fad9d7", "committedDate": "2020-09-04T05:55:57Z", "message": "Merge branch 'develop' of https://github.com/GoogleCloudPlatform/fda-mystudies into participant-manager-webapp-update-user"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59620a5495e0a87efcea8edecec53000dfc78278", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/59620a5495e0a87efcea8edecec53000dfc78278", "committedDate": "2020-09-04T16:17:28Z", "message": "code review comments and testing has been done"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42a8adde3485f1472529845a92164a5b43856b7c", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/42a8adde3485f1472529845a92164a5b43856b7c", "committedDate": "2020-09-07T11:45:20Z", "message": "removed unwanted attrbutes before making API call"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2043305d1204cec7da4642484fb08663b8ddb841", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/2043305d1204cec7da4642484fb08663b8ddb841", "committedDate": "2020-09-07T11:45:48Z", "message": "Merge branch 'develop' of https://github.com/GoogleCloudPlatform/fda-mystudies into participant-manager-webapp-update-user"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MjczOTM4", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/849#pullrequestreview-484273938", "createdAt": "2020-09-08T15:47:24Z", "commit": {"oid": "2043305d1204cec7da4642484fb08663b8ddb841"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0NzoyNFrOHOjcYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0NzoyNFrOHOjcYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyMjgxOA==", "bodyText": "Why are they unwanted? Remove from what? Please make this function name clearer", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/849#discussion_r485022818", "createdAt": "2020-09-08T15:47:24Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/user/update-user/update-user.component.ts", "diffHunk": "@@ -210,4 +213,12 @@ export class UpdateUserComponent extends UnsubscribeOnDestroyAdapter\n             : this.userStatus.Deactivated;\n       });\n   }\n+  removeUnwantedAttributes(): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2043305d1204cec7da4642484fb08663b8ddb841"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4c5337f2f8a7662c4bafd0318bd689c384c18c2", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b4c5337f2f8a7662c4bafd0318bd689c384c18c2", "committedDate": "2020-09-11T14:25:31Z", "message": "updated method name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb023c639eea5a33342a99376c1b7b6d86e4d97e", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/cb023c639eea5a33342a99376c1b7b6d86e4d97e", "committedDate": "2020-09-11T14:25:54Z", "message": "Merge branch 'develop' of https://github.com/GoogleCloudPlatform/fda-mystudies into participant-manager-webapp-update-user"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2ODY3MzA4", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/849#pullrequestreview-486867308", "createdAt": "2020-09-11T14:39:25Z", "commit": {"oid": "cb023c639eea5a33342a99376c1b7b6d86e4d97e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 398, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}