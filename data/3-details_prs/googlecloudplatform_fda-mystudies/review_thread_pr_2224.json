{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMDczODE2", "number": 2224, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwMDoyNjoyOVrOFCDozA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwMDozODo0M1rOFCD2mQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NzAxMDY4OnYy", "diffSide": "RIGHT", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/ErrorCode.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwMDoyNjoyOVrOIBBHTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwNTowNzowMVrOIBHRNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzkzNzc0Mw==", "bodyText": "sortBy/sort by ?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2224#discussion_r537937743", "createdAt": "2020-12-08T00:26:29Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/ErrorCode.java", "diffHunk": "@@ -329,6 +329,12 @@\n       HttpStatus.NOT_FOUND.toString(),\n       \"This view displays app-wise enrollment if you manage multiple studies.\"),\n \n+  UNSUPPORTED_SORTBY_VALUE(\n+      400, \"EC_0076\", HttpStatus.BAD_REQUEST.toString(), \"Invalid sortby value\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8185661c04a949df4d661407a5f0280c450f6b4"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODAzODU4Mg==", "bodyText": "Changed to sortBy.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2224#discussion_r538038582", "createdAt": "2020-12-08T05:07:01Z", "author": {"login": "navya-BTC"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/ErrorCode.java", "diffHunk": "@@ -329,6 +329,12 @@\n       HttpStatus.NOT_FOUND.toString(),\n       \"This view displays app-wise enrollment if you manage multiple studies.\"),\n \n+  UNSUPPORTED_SORTBY_VALUE(\n+      400, \"EC_0076\", HttpStatus.BAD_REQUEST.toString(), \"Invalid sortby value\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzkzNzc0Mw=="}, "originalCommit": {"oid": "a8185661c04a949df4d661407a5f0280c450f6b4"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NzA0NjAxOnYy", "diffSide": "RIGHT", "path": "participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwMDozODo0M1rOIBBaZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwNToxMzowMVrOIBHZVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzk0MjYzMQ==", "bodyText": "verify returned values are actually sorted by siteId", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2224#discussion_r537942631", "createdAt": "2020-12-08T00:38:43Z", "author": {"login": "saminguyen"}, "path": "participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -515,23 +553,50 @@ public void shouldReturnStudyParticipantsForPagination() throws Exception {\n       participantStudyEntity =\n           testDataHelper.createParticipantStudyEntity(\n               siteEntity, studyEntity, participantRegistrySiteEntity);\n+      // Pagination records should be in descending order of created timestamp\n+      // Entities are not saved in sequential order so adding delay\n+      Thread.sleep(5);\n     }\n \n-    // get study participant if page and limit values are null\n+    // Step 2: Call API and expect GET_PARTICIPANT_REGISTRY_SUCCESS message and fetch only 10 data\n+    // out of 21\n     mockMvc\n         .perform(\n             get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), studyEntity.getId())\n                 .headers(headers)\n+                .param(\"limit\", \"10\")\n+                .param(\"offset\", \"0\")\n+                .param(\"sortBy\", \"siteId\")\n+                .param(\"sortDirection\", \"desc\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8185661c04a949df4d661407a5f0280c450f6b4"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA0MDY2Mg==", "bodyText": "In Study Participant Registry page we have siteId column which is locationName in backend, hence verified locationName as below code\n .andExpect(\n            jsonPath(\"$.participantRegistryDetail.registryParticipants[0].locationName\")\n                .value(LOCATION_NAME_VALUE + String.valueOf(9)))", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2224#discussion_r538040662", "createdAt": "2020-12-08T05:13:01Z", "author": {"login": "navya-BTC"}, "path": "participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -515,23 +553,50 @@ public void shouldReturnStudyParticipantsForPagination() throws Exception {\n       participantStudyEntity =\n           testDataHelper.createParticipantStudyEntity(\n               siteEntity, studyEntity, participantRegistrySiteEntity);\n+      // Pagination records should be in descending order of created timestamp\n+      // Entities are not saved in sequential order so adding delay\n+      Thread.sleep(5);\n     }\n \n-    // get study participant if page and limit values are null\n+    // Step 2: Call API and expect GET_PARTICIPANT_REGISTRY_SUCCESS message and fetch only 10 data\n+    // out of 21\n     mockMvc\n         .perform(\n             get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), studyEntity.getId())\n                 .headers(headers)\n+                .param(\"limit\", \"10\")\n+                .param(\"offset\", \"0\")\n+                .param(\"sortBy\", \"siteId\")\n+                .param(\"sortDirection\", \"desc\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzk0MjYzMQ=="}, "originalCommit": {"oid": "a8185661c04a949df4d661407a5f0280c450f6b4"}, "originalPosition": 64}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1486, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}