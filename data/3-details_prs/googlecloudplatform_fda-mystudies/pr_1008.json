{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwOTUwMTg0", "number": 1008, "title": "Issue number 1003 fixes for OAuth service Indexing", "bodyText": "This PR contains the issue fixes for issue #1003 .", "createdAt": "2020-09-22T13:43:08Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1008", "merged": true, "mergeCommit": {"oid": "2c1ac31f264856cb5a0369b3fd9e399c3b40e044"}, "closed": true, "closedAt": "2020-09-25T15:49:26Z", "author": {"login": "chiranjibi009"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLVPQEAH2gAyNDkwOTUwMTg0OmQwYjY4Zjc0OWM3OGQwMTMxNGE4ZjdmZWU4NGRlMjM4MDI4N2I5ODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMXxpLAH2gAyNDkwOTUwMTg0OjUwYTlhOTU5NzI1MGE0OTFjYTFhYmY5NzJjMWI2MGUyYjI0OWFmNjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d0b68f749c78d01314a8f7fee84de2380287b985", "author": {"user": {"login": "chiranjibi009", "name": "Chiranjibi Dash"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d0b68f749c78d01314a8f7fee84de2380287b985", "committedDate": "2020-09-22T10:15:04Z", "message": "indexes are added for user entity class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNTQ1MDY1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1008#pullrequestreview-493545065", "createdAt": "2020-09-22T14:49:34Z", "commit": {"oid": "d0b68f749c78d01314a8f7fee84de2380287b985"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDo0OTozNVrOHV9-5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDo0OTozNVrOHV9-5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc5NzY3MQ==", "bodyText": "Primary key and foreign keys should have indexes generated by default.\nAlso we use used a pattern for index names, I believe it was:\n<table name>_<index column names>_idx", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1008#discussion_r492797671", "createdAt": "2020-09-22T14:49:35Z", "author": {"login": "zohrehj"}, "path": "oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/model/UserEntity.java", "diffHunk": "@@ -27,7 +28,14 @@\n @Setter\n @Getter\n @Entity\n-@Table(name = \"users\")\n+@Table(\n+    name = \"users\",\n+    indexes = {\n+      @Index(name = \"id_index\", columnList = \"id\", unique = true),\n+      @Index(name = \"user_id_index\", columnList = \"user_id\", unique = true),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0b68f749c78d01314a8f7fee84de2380287b985"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df644b5657ea26b24c29e1aeb900d63a2c16abc9", "author": {"user": {"login": "chiranjibi009", "name": "Chiranjibi Dash"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/df644b5657ea26b24c29e1aeb900d63a2c16abc9", "committedDate": "2020-09-23T05:57:45Z", "message": "Merge branch 'develop' into issue-1003-fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09a36bf60063cd698f12cf26b392188b01bafa6b", "author": {"user": {"login": "chiranjibi009", "name": "Chiranjibi Dash"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/09a36bf60063cd698f12cf26b392188b01bafa6b", "committedDate": "2020-09-23T07:38:00Z", "message": "comment fixed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77ce4200fdac66bdd5a691274275c2733f8952e0", "author": {"user": {"login": "chiranjibi009", "name": "Chiranjibi Dash"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/77ce4200fdac66bdd5a691274275c2733f8952e0", "committedDate": "2020-09-23T07:40:57Z", "message": "Merge branch 'develop' into issue-1003-fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MDE5NzE1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1008#pullrequestreview-495019715", "createdAt": "2020-09-23T20:23:34Z", "commit": {"oid": "77ce4200fdac66bdd5a691274275c2733f8952e0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QyMDoyMzozNFrOHW_mLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QyMDozMDowMVrOHW_y_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg3MjY4NQ==", "bodyText": "I am seeing this value change all the time between PRs, without any code change.\nPlease explain why it is being changed yet again?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1008#discussion_r493872685", "createdAt": "2020-09-23T20:23:34Z", "author": {"login": "zohrehj"}, "path": "oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/model/UserEntity.java", "diffHunk": "@@ -49,7 +56,7 @@\n   private Timestamp created;\n \n   @ToString.Exclude\n-  @Column(name = \"tempRegId\", nullable = true, length = 64)\n+  @Column(name = \"temp_reg_id\", nullable = true, length = 64)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77ce4200fdac66bdd5a691274275c2733f8952e0"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg3NTk2Ng==", "bodyText": "I was under the impression that hibernate would create indexes for columns with@unique  automatically.\nI am not seeing a unique=true annotation on wither user_id or temp_reg_id however.\nPlease add those annotation first, dump the automatically generated schema, and only add indexes manually if hibernate does not create them automatically.\nAlso it might be a good idea to export db schema after each db change and include it in the PR so that we can verify indexes are correctly generated.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1008#discussion_r493875966", "createdAt": "2020-09-23T20:30:01Z", "author": {"login": "zohrehj"}, "path": "oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/model/UserEntity.java", "diffHunk": "@@ -27,7 +28,13 @@\n @Setter\n @Getter\n @Entity\n-@Table(name = \"users\")\n+@Table(\n+    name = \"users\",\n+    indexes = {\n+      @Index(name = \"users_user_id_idx\", columnList = \"user_id\", unique = true),\n+      @Index(name = \"users_temp_reg_id_idx\", columnList = \"temp_reg_id\", unique = true),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77ce4200fdac66bdd5a691274275c2733f8952e0"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c60ce4b180871be21e9f819c59e9a2f68b3d6f24", "author": {"user": {"login": "dhanyak-btc", "name": "Dhanya Kumar KV"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c60ce4b180871be21e9f819c59e9a2f68b3d6f24", "committedDate": "2020-09-25T08:02:32Z", "message": "Removed @Index for user_id and temp_reg_id and added unique=true in @Column for both fields\n\nRemoved @Index for user_id and temp_reg_id and added unique=true in @Column for both fields"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e06f952dbd0ad5b596da550334c4b7df00398791", "author": {"user": {"login": "dhanyak-btc", "name": "Dhanya Kumar KV"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e06f952dbd0ad5b596da550334c4b7df00398791", "committedDate": "2020-09-25T08:04:37Z", "message": "Merge branch 'develop' into issue-1003-fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NTMxNDM3", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1008#pullrequestreview-496531437", "createdAt": "2020-09-25T15:34:27Z", "commit": {"oid": "e06f952dbd0ad5b596da550334c4b7df00398791"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50a9a9597250a491ca1abf972c1b60e2b249af64", "author": {"user": {"login": "dhanyak-btc", "name": "Dhanya Kumar KV"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/50a9a9597250a491ca1abf972c1b60e2b249af64", "committedDate": "2020-09-25T15:46:22Z", "message": "Merge branch 'develop' into issue-1003-fixes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 279, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}