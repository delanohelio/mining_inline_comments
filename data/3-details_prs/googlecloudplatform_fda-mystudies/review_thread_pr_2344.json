{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM3MDEyODY2", "number": 2344, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo1NTo0MFrOFFBf-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNTowMDoyNVrOFFBqCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwODExNzY4OnYy", "diffSide": "RIGHT", "path": "participant-manager/src/app/site-coordinator/apps/app-list/app-list.component.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo1NTo0MFrOIFUWNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxODozODozMFrOIFfOYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ0NzE1OA==", "bodyText": "typo updatedParameter", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542447158", "createdAt": "2020-12-14T14:55:40Z", "author": {"login": "zohrehj"}, "path": "participant-manager/src/app/site-coordinator/apps/app-list/app-list.component.ts", "diffHunk": "@@ -25,25 +27,33 @@ export class AppListComponent implements OnInit {\n     '=1': 'One Study',\n     'other': '# Studies',\n   };\n+  loadMoreEnabled = true;\n+\n+  searchValue = '';\n \n   constructor(\n     private readonly appService: AppsService,\n     private readonly sharedService: SearchService,\n     private readonly toastr: ToastrService,\n+    private readonly searchParameter: SearchParameterService,\n   ) {}\n \n   ngOnInit(): void {\n+    this.searchParameter.searchParam$.subscribe((upadtedParameter) => {\n+      this.manageAppsBackup = {} as ManageApps;\n+      this.searchValue = upadtedParameter;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjYyNTM3Nw==", "bodyText": "this has been updated", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542625377", "createdAt": "2020-12-14T18:38:30Z", "author": {"login": "prakashm181"}, "path": "participant-manager/src/app/site-coordinator/apps/app-list/app-list.component.ts", "diffHunk": "@@ -25,25 +27,33 @@ export class AppListComponent implements OnInit {\n     '=1': 'One Study',\n     'other': '# Studies',\n   };\n+  loadMoreEnabled = true;\n+\n+  searchValue = '';\n \n   constructor(\n     private readonly appService: AppsService,\n     private readonly sharedService: SearchService,\n     private readonly toastr: ToastrService,\n+    private readonly searchParameter: SearchParameterService,\n   ) {}\n \n   ngOnInit(): void {\n+    this.searchParameter.searchParam$.subscribe((upadtedParameter) => {\n+      this.manageAppsBackup = {} as ManageApps;\n+      this.searchValue = upadtedParameter;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ0NzE1OA=="}, "originalCommit": {"oid": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwODEyOTIxOnYy", "diffSide": "RIGHT", "path": "participant-manager/src/app/site-coordinator/apps/app-list/app-list.component.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo1Nzo0MVrOIFUc6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxODozODo1OFrOIFfQZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ0ODg3NQ==", "bodyText": "this will only search within apps that are already loaded, users can easily use their browser search to do this. Why should we add this feature?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542448875", "createdAt": "2020-12-14T14:57:41Z", "author": {"login": "zohrehj"}, "path": "participant-manager/src/app/site-coordinator/apps/app-list/app-list.component.ts", "diffHunk": "@@ -82,4 +96,33 @@ export class AppListComponent implements OnInit {\n       permission === Permission.View || permission === Permission.ViewAndEdit\n     );\n   }\n+\n+  loadMoreSites() {\n+    const offset = this.manageAppsBackup.apps.length;\n+    this.manageApp$ = combineLatest(\n+      this.appService.getUserApps(limit, offset, this.searchValue),\n+      this.query$,\n+    ).pipe(\n+      map(([manageApps, query]) => {\n+        const apps = [];\n+        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n+        apps.push(...this.manageAppsBackup.apps);\n+        apps.push(...manageApps.apps);\n+        this.manageAppsBackup.apps = apps;\n+        if (!manageApps.superAdmin && manageApps.studyPermissionCount < 2) {\n+          this.toastr.error(\n+            'This view displays app-wise enrollment if you manage multiple studies.',\n+          );\n+        }\n+        this.manageAppsBackup.apps = this.manageAppsBackup.apps.filter(\n+          (app: App) =>\n+            app.name?.toLowerCase().includes(query.toLowerCase()) ||\n+            app.customId?.toLowerCase().includes(query.toLowerCase()),\n+        );\n+        this.loadMoreEnabled =\n+          this.manageAppsBackup.apps.length % limit === 0 ? true : false;\n+        return this.manageAppsBackup;\n+      }),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjYyNTg5NA==", "bodyText": "removed unused code", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542625894", "createdAt": "2020-12-14T18:38:58Z", "author": {"login": "prakashm181"}, "path": "participant-manager/src/app/site-coordinator/apps/app-list/app-list.component.ts", "diffHunk": "@@ -82,4 +96,33 @@ export class AppListComponent implements OnInit {\n       permission === Permission.View || permission === Permission.ViewAndEdit\n     );\n   }\n+\n+  loadMoreSites() {\n+    const offset = this.manageAppsBackup.apps.length;\n+    this.manageApp$ = combineLatest(\n+      this.appService.getUserApps(limit, offset, this.searchValue),\n+      this.query$,\n+    ).pipe(\n+      map(([manageApps, query]) => {\n+        const apps = [];\n+        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n+        apps.push(...this.manageAppsBackup.apps);\n+        apps.push(...manageApps.apps);\n+        this.manageAppsBackup.apps = apps;\n+        if (!manageApps.superAdmin && manageApps.studyPermissionCount < 2) {\n+          this.toastr.error(\n+            'This view displays app-wise enrollment if you manage multiple studies.',\n+          );\n+        }\n+        this.manageAppsBackup.apps = this.manageAppsBackup.apps.filter(\n+          (app: App) =>\n+            app.name?.toLowerCase().includes(query.toLowerCase()) ||\n+            app.customId?.toLowerCase().includes(query.toLowerCase()),\n+        );\n+        this.loadMoreEnabled =\n+          this.manageAppsBackup.apps.length % limit === 0 ? true : false;\n+        return this.manageAppsBackup;\n+      }),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ0ODg3NQ=="}, "originalCommit": {"oid": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb"}, "originalPosition": 87}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwODE0MzQ0OnYy", "diffSide": "RIGHT", "path": "participant-manager/src/app/site-coordinator/sites/site-list/site-list.component.html", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNTowMDoyNVrOIFUlSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxODozOTo0MlrOIFfTYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ1MTAxOA==", "bodyText": "consider moving the animation component into a common partial", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542451018", "createdAt": "2020-12-14T15:00:25Z", "author": {"login": "zohrehj"}, "path": "participant-manager/src/app/site-coordinator/sites/site-list/site-list.component.html", "diffHunk": "@@ -121,6 +121,16 @@\n             </div>\n           </div>\n         </div>\n+        <div *ngIf=\"loadMoreEnabled\" (mouseover)=\"loadMoreSites()\">\n+          <div class=\"content_loader\">\n+            <div class=\"container_btm_loader animation-2\">\n+              <div class=\"shape shape1\"></div>\n+              <div class=\"shape shape2\"></div>\n+              <div class=\"shape shape3\"></div>\n+              <div class=\"shape shape4\"></div>\n+            </div>\n+          </div>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjYyNjY1OQ==", "bodyText": "for this added load more spinner component", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542626659", "createdAt": "2020-12-14T18:39:42Z", "author": {"login": "prakashm181"}, "path": "participant-manager/src/app/site-coordinator/sites/site-list/site-list.component.html", "diffHunk": "@@ -121,6 +121,16 @@\n             </div>\n           </div>\n         </div>\n+        <div *ngIf=\"loadMoreEnabled\" (mouseover)=\"loadMoreSites()\">\n+          <div class=\"content_loader\">\n+            <div class=\"container_btm_loader animation-2\">\n+              <div class=\"shape shape1\"></div>\n+              <div class=\"shape shape2\"></div>\n+              <div class=\"shape shape3\"></div>\n+              <div class=\"shape shape4\"></div>\n+            </div>\n+          </div>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ1MTAxOA=="}, "originalCommit": {"oid": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1380, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}