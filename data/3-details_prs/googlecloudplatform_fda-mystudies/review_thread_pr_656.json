{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzNTI0MDIz", "number": 656, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNzo0NTo0OVrOERJylA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwMzoyMDozNFrOESorPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NDIxNjUyOnYy", "diffSide": "RIGHT", "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/StudyServiceImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNzo0NTo0OVrOG1tcAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwNTo0MTo0N1rOG182kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk3MjE2MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              private ParticipantRegistryResponse preapreRegistryPartcipantResponse(\n          \n          \n            \n              private ParticipantRegistryResponse prepareRegistryParticipantResponse(", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r458972161", "createdAt": "2020-07-22T17:45:49Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/StudyServiceImpl.java", "diffHunk": "@@ -215,4 +229,70 @@ private Long getStudyInvitedCount(\n                 e -> e.getSite().getId(),\n                 Collectors.summingLong(ParticipantRegistrySiteEntity::getInvitationCount)));\n   }\n+\n+  @Override\n+  public ParticipantRegistryResponse getStudyParticipants(String userId, String studyId) {\n+    logger.entry(\"getStudyParticipants(String userId, String studyId)\");\n+    // validations\n+    Optional<StudyEntity> optStudy = studyRepository.findById(studyId);\n+    if (!optStudy.isPresent()) {\n+      logger.exit(ErrorCode.STUDY_NOT_FOUND);\n+      return new ParticipantRegistryResponse(ErrorCode.STUDY_NOT_FOUND);\n+    }\n+\n+    Optional<StudyPermissionEntity> optStudyPermission =\n+        studyPermissionRepository.findByStudyIdAndUserId(studyId, userId);\n+\n+    if (!optStudyPermission.isPresent()) {\n+      logger.exit(ErrorCode.STUDY_PERMISSION_ACCESS_DENIED);\n+      return new ParticipantRegistryResponse(ErrorCode.STUDY_PERMISSION_ACCESS_DENIED);\n+    }\n+\n+    StudyPermissionEntity studyPermission = optStudyPermission.get();\n+\n+    if (studyPermission.getAppInfo() == null) {\n+      logger.exit(ErrorCode.APP_NOT_FOUND);\n+      return new ParticipantRegistryResponse(ErrorCode.APP_NOT_FOUND);\n+    }\n+\n+    Optional<AppEntity> optApp =\n+        appRepository.findById(optStudyPermission.get().getAppInfo().getId());\n+\n+    return preapreRegistryPartcipantResponse(optStudy.get(), optApp.get());\n+  }\n+\n+  private ParticipantRegistryResponse preapreRegistryPartcipantResponse(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ec83bd197de8218f2e7240ad3c830b5ed48d21c"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTIyNDcyMw==", "bodyText": "changed to prepareRegistryParticipantResponse", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r459224723", "createdAt": "2020-07-23T05:41:47Z", "author": {"login": "navya-BTC"}, "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/StudyServiceImpl.java", "diffHunk": "@@ -215,4 +229,70 @@ private Long getStudyInvitedCount(\n                 e -> e.getSite().getId(),\n                 Collectors.summingLong(ParticipantRegistrySiteEntity::getInvitationCount)));\n   }\n+\n+  @Override\n+  public ParticipantRegistryResponse getStudyParticipants(String userId, String studyId) {\n+    logger.entry(\"getStudyParticipants(String userId, String studyId)\");\n+    // validations\n+    Optional<StudyEntity> optStudy = studyRepository.findById(studyId);\n+    if (!optStudy.isPresent()) {\n+      logger.exit(ErrorCode.STUDY_NOT_FOUND);\n+      return new ParticipantRegistryResponse(ErrorCode.STUDY_NOT_FOUND);\n+    }\n+\n+    Optional<StudyPermissionEntity> optStudyPermission =\n+        studyPermissionRepository.findByStudyIdAndUserId(studyId, userId);\n+\n+    if (!optStudyPermission.isPresent()) {\n+      logger.exit(ErrorCode.STUDY_PERMISSION_ACCESS_DENIED);\n+      return new ParticipantRegistryResponse(ErrorCode.STUDY_PERMISSION_ACCESS_DENIED);\n+    }\n+\n+    StudyPermissionEntity studyPermission = optStudyPermission.get();\n+\n+    if (studyPermission.getAppInfo() == null) {\n+      logger.exit(ErrorCode.APP_NOT_FOUND);\n+      return new ParticipantRegistryResponse(ErrorCode.APP_NOT_FOUND);\n+    }\n+\n+    Optional<AppEntity> optApp =\n+        appRepository.findById(optStudyPermission.get().getAppInfo().getId());\n+\n+    return preapreRegistryPartcipantResponse(optStudy.get(), optApp.get());\n+  }\n+\n+  private ParticipantRegistryResponse preapreRegistryPartcipantResponse(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk3MjE2MQ=="}, "originalCommit": {"oid": "6ec83bd197de8218f2e7240ad3c830b5ed48d21c"}, "originalPosition": 101}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NDM2OTY0OnYy", "diffSide": "RIGHT", "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxODoyNzo1MlrOG1u8sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwNTo0Mzo0MlrOG184LQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk5NjkxNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void shouldReturnAccessDeniedtForstudyParticipants() throws Exception {\n          \n          \n            \n              public void shouldReturnAccessDeniedForStudyParticipants() throws Exception {", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r458996915", "createdAt": "2020-07-22T18:27:52Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -120,6 +124,93 @@ public void shouldNotReturnStudies() throws Exception {\n             jsonPath(\"$.error_description\").value(ErrorCode.STUDY_NOT_FOUND.getDescription()));\n   }\n \n+  @Test\n+  public void shouldReturnStudyNotFoundForstudyParticipants() throws Exception {\n+    HttpHeaders headers = newCommonHeaders();\n+    headers.add(TestConstants.USER_ID_HEADER, userRegAdminEntity.getId());\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), IdGenerator.id())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isNotFound())\n+        .andExpect(\n+            jsonPath(\"$.error_description\").value(ErrorCode.STUDY_NOT_FOUND.getDescription()));\n+  }\n+\n+  @Test\n+  public void shouldReturnAppNotFoundForstudyParticipants() throws Exception {\n+    HttpHeaders headers = newCommonHeaders();\n+    headers.add(TestConstants.USER_ID_HEADER, userRegAdminEntity.getId());\n+\n+    StudyPermissionEntity studyPermission = studyEntity.getStudyPermissions().get(0);\n+    studyPermission.setAppInfo(null);\n+    studyEntity = testDataHelper.getStudyRepository().saveAndFlush(studyEntity);\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), studyEntity.getId())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isNotFound())\n+        .andExpect(jsonPath(\"$.error_description\").value(ErrorCode.APP_NOT_FOUND.getDescription()));\n+  }\n+\n+  @Test\n+  public void shouldReturnAccessDeniedtForstudyParticipants() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ec83bd197de8218f2e7240ad3c830b5ed48d21c"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTIyNTEzMw==", "bodyText": "changed to shouldReturnAccessDeniedForStudyParticipants", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r459225133", "createdAt": "2020-07-23T05:43:42Z", "author": {"login": "navya-BTC"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -120,6 +124,93 @@ public void shouldNotReturnStudies() throws Exception {\n             jsonPath(\"$.error_description\").value(ErrorCode.STUDY_NOT_FOUND.getDescription()));\n   }\n \n+  @Test\n+  public void shouldReturnStudyNotFoundForstudyParticipants() throws Exception {\n+    HttpHeaders headers = newCommonHeaders();\n+    headers.add(TestConstants.USER_ID_HEADER, userRegAdminEntity.getId());\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), IdGenerator.id())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isNotFound())\n+        .andExpect(\n+            jsonPath(\"$.error_description\").value(ErrorCode.STUDY_NOT_FOUND.getDescription()));\n+  }\n+\n+  @Test\n+  public void shouldReturnAppNotFoundForstudyParticipants() throws Exception {\n+    HttpHeaders headers = newCommonHeaders();\n+    headers.add(TestConstants.USER_ID_HEADER, userRegAdminEntity.getId());\n+\n+    StudyPermissionEntity studyPermission = studyEntity.getStudyPermissions().get(0);\n+    studyPermission.setAppInfo(null);\n+    studyEntity = testDataHelper.getStudyRepository().saveAndFlush(studyEntity);\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), studyEntity.getId())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isNotFound())\n+        .andExpect(jsonPath(\"$.error_description\").value(ErrorCode.APP_NOT_FOUND.getDescription()));\n+  }\n+\n+  @Test\n+  public void shouldReturnAccessDeniedtForstudyParticipants() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk5NjkxNQ=="}, "originalCommit": {"oid": "6ec83bd197de8218f2e7240ad3c830b5ed48d21c"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NDM3MDc3OnYy", "diffSide": "RIGHT", "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxODoyODoxNFrOG1u9dw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwNTo0NDoxMlrOG184nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk5NzExMQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void shouldReturnStudyNotFoundForstudyParticipants() throws Exception {\n          \n          \n            \n              public void shouldReturnStudyNotFoundForStudyParticipants() throws Exception {", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r458997111", "createdAt": "2020-07-22T18:28:14Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -120,6 +124,93 @@ public void shouldNotReturnStudies() throws Exception {\n             jsonPath(\"$.error_description\").value(ErrorCode.STUDY_NOT_FOUND.getDescription()));\n   }\n \n+  @Test\n+  public void shouldReturnStudyNotFoundForstudyParticipants() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ec83bd197de8218f2e7240ad3c830b5ed48d21c"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTIyNTI0Nw==", "bodyText": "changed to shouldReturnStudyNotFoundForStudyParticipants", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r459225247", "createdAt": "2020-07-23T05:44:12Z", "author": {"login": "navya-BTC"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -120,6 +124,93 @@ public void shouldNotReturnStudies() throws Exception {\n             jsonPath(\"$.error_description\").value(ErrorCode.STUDY_NOT_FOUND.getDescription()));\n   }\n \n+  @Test\n+  public void shouldReturnStudyNotFoundForstudyParticipants() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk5NzExMQ=="}, "originalCommit": {"oid": "6ec83bd197de8218f2e7240ad3c830b5ed48d21c"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NDM3MTQ3OnYy", "diffSide": "RIGHT", "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxODoyODoyNlrOG1u94A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwNTo0NDozMFrOG1846g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk5NzIxNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void shouldReturnAppNotFoundForstudyParticipants() throws Exception {\n          \n          \n            \n              public void shouldReturnAppNotFoundForStudyParticipants() throws Exception {", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r458997216", "createdAt": "2020-07-22T18:28:26Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -120,6 +124,93 @@ public void shouldNotReturnStudies() throws Exception {\n             jsonPath(\"$.error_description\").value(ErrorCode.STUDY_NOT_FOUND.getDescription()));\n   }\n \n+  @Test\n+  public void shouldReturnStudyNotFoundForstudyParticipants() throws Exception {\n+    HttpHeaders headers = newCommonHeaders();\n+    headers.add(TestConstants.USER_ID_HEADER, userRegAdminEntity.getId());\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), IdGenerator.id())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isNotFound())\n+        .andExpect(\n+            jsonPath(\"$.error_description\").value(ErrorCode.STUDY_NOT_FOUND.getDescription()));\n+  }\n+\n+  @Test\n+  public void shouldReturnAppNotFoundForstudyParticipants() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ec83bd197de8218f2e7240ad3c830b5ed48d21c"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTIyNTMyMg==", "bodyText": "changed to shouldReturnAppNotFoundForStudyParticipants", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r459225322", "createdAt": "2020-07-23T05:44:30Z", "author": {"login": "navya-BTC"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -120,6 +124,93 @@ public void shouldNotReturnStudies() throws Exception {\n             jsonPath(\"$.error_description\").value(ErrorCode.STUDY_NOT_FOUND.getDescription()));\n   }\n \n+  @Test\n+  public void shouldReturnStudyNotFoundForstudyParticipants() throws Exception {\n+    HttpHeaders headers = newCommonHeaders();\n+    headers.add(TestConstants.USER_ID_HEADER, userRegAdminEntity.getId());\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), IdGenerator.id())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isNotFound())\n+        .andExpect(\n+            jsonPath(\"$.error_description\").value(ErrorCode.STUDY_NOT_FOUND.getDescription()));\n+  }\n+\n+  @Test\n+  public void shouldReturnAppNotFoundForstudyParticipants() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk5NzIxNg=="}, "originalCommit": {"oid": "6ec83bd197de8218f2e7240ad3c830b5ed48d21c"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NDc3Nzc1OnYy", "diffSide": "RIGHT", "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDoyNjoyMlrOG1y8HQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwNTo0NjozNlrOG1869g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA2MjMwMQ==", "bodyText": "We need to test the values of the registryParticipants array, too", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r459062301", "createdAt": "2020-07-22T20:26:22Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -120,6 +124,93 @@ public void shouldNotReturnStudies() throws Exception {\n             jsonPath(\"$.error_description\").value(ErrorCode.STUDY_NOT_FOUND.getDescription()));\n   }\n \n+  @Test\n+  public void shouldReturnStudyNotFoundForstudyParticipants() throws Exception {\n+    HttpHeaders headers = newCommonHeaders();\n+    headers.add(TestConstants.USER_ID_HEADER, userRegAdminEntity.getId());\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), IdGenerator.id())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isNotFound())\n+        .andExpect(\n+            jsonPath(\"$.error_description\").value(ErrorCode.STUDY_NOT_FOUND.getDescription()));\n+  }\n+\n+  @Test\n+  public void shouldReturnAppNotFoundForstudyParticipants() throws Exception {\n+    HttpHeaders headers = newCommonHeaders();\n+    headers.add(TestConstants.USER_ID_HEADER, userRegAdminEntity.getId());\n+\n+    StudyPermissionEntity studyPermission = studyEntity.getStudyPermissions().get(0);\n+    studyPermission.setAppInfo(null);\n+    studyEntity = testDataHelper.getStudyRepository().saveAndFlush(studyEntity);\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), studyEntity.getId())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isNotFound())\n+        .andExpect(jsonPath(\"$.error_description\").value(ErrorCode.APP_NOT_FOUND.getDescription()));\n+  }\n+\n+  @Test\n+  public void shouldReturnAccessDeniedtForstudyParticipants() throws Exception {\n+    HttpHeaders headers = newCommonHeaders();\n+    headers.add(TestConstants.USER_ID_HEADER, userRegAdminEntity.getId());\n+\n+    StudyEntity study = testDataHelper.newStudyEntity();\n+    testDataHelper.getStudyRepository().saveAndFlush(study);\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), study.getId())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isForbidden())\n+        .andExpect(\n+            jsonPath(\"$.error_description\")\n+                .value(ErrorCode.STUDY_PERMISSION_ACCESS_DENIED.getDescription()));\n+  }\n+\n+  @Test\n+  public void shouldReturnStudyParticipants() throws Exception {\n+    HttpHeaders headers = newCommonHeaders();\n+    headers.add(TestConstants.USER_ID_HEADER, userRegAdminEntity.getId());\n+    locationEntity = testDataHelper.createLocation();\n+    siteEntity.setLocation(locationEntity);\n+    testDataHelper.getSiteRepository().saveAndFlush(siteEntity);\n+\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), studyEntity.getId())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isOk())\n+        .andExpect(jsonPath(\"$.participantRegistryDetail.studyId\").value(studyEntity.getId()))\n+        .andExpect(jsonPath(\"$.participantRegistryDetail.registryParticipants\").isArray());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ec83bd197de8218f2e7240ad3c830b5ed48d21c"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTIyNTg0Ng==", "bodyText": "added assertions for  registryParticipants array", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r459225846", "createdAt": "2020-07-23T05:46:36Z", "author": {"login": "navya-BTC"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -120,6 +124,93 @@ public void shouldNotReturnStudies() throws Exception {\n             jsonPath(\"$.error_description\").value(ErrorCode.STUDY_NOT_FOUND.getDescription()));\n   }\n \n+  @Test\n+  public void shouldReturnStudyNotFoundForstudyParticipants() throws Exception {\n+    HttpHeaders headers = newCommonHeaders();\n+    headers.add(TestConstants.USER_ID_HEADER, userRegAdminEntity.getId());\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), IdGenerator.id())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isNotFound())\n+        .andExpect(\n+            jsonPath(\"$.error_description\").value(ErrorCode.STUDY_NOT_FOUND.getDescription()));\n+  }\n+\n+  @Test\n+  public void shouldReturnAppNotFoundForstudyParticipants() throws Exception {\n+    HttpHeaders headers = newCommonHeaders();\n+    headers.add(TestConstants.USER_ID_HEADER, userRegAdminEntity.getId());\n+\n+    StudyPermissionEntity studyPermission = studyEntity.getStudyPermissions().get(0);\n+    studyPermission.setAppInfo(null);\n+    studyEntity = testDataHelper.getStudyRepository().saveAndFlush(studyEntity);\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), studyEntity.getId())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isNotFound())\n+        .andExpect(jsonPath(\"$.error_description\").value(ErrorCode.APP_NOT_FOUND.getDescription()));\n+  }\n+\n+  @Test\n+  public void shouldReturnAccessDeniedtForstudyParticipants() throws Exception {\n+    HttpHeaders headers = newCommonHeaders();\n+    headers.add(TestConstants.USER_ID_HEADER, userRegAdminEntity.getId());\n+\n+    StudyEntity study = testDataHelper.newStudyEntity();\n+    testDataHelper.getStudyRepository().saveAndFlush(study);\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), study.getId())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isForbidden())\n+        .andExpect(\n+            jsonPath(\"$.error_description\")\n+                .value(ErrorCode.STUDY_PERMISSION_ACCESS_DENIED.getDescription()));\n+  }\n+\n+  @Test\n+  public void shouldReturnStudyParticipants() throws Exception {\n+    HttpHeaders headers = newCommonHeaders();\n+    headers.add(TestConstants.USER_ID_HEADER, userRegAdminEntity.getId());\n+    locationEntity = testDataHelper.createLocation();\n+    siteEntity.setLocation(locationEntity);\n+    testDataHelper.getSiteRepository().saveAndFlush(siteEntity);\n+\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDY_PARTICIPANT.getPath(), studyEntity.getId())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isOk())\n+        .andExpect(jsonPath(\"$.participantRegistryDetail.studyId\").value(studyEntity.getId()))\n+        .andExpect(jsonPath(\"$.participantRegistryDetail.registryParticipants\").isArray());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA2MjMwMQ=="}, "originalCommit": {"oid": "6ec83bd197de8218f2e7240ad3c830b5ed48d21c"}, "originalPosition": 94}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NDc4MTc4OnYy", "diffSide": "RIGHT", "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/beans/ParticipantRequest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDoyNzozOVrOG1y-tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwNTo0Njo1MlrOG187Sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA2Mjk2Ng==", "bodyText": "ParticipantDetail", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r459062966", "createdAt": "2020-07-22T20:27:39Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/beans/ParticipantRequest.java", "diffHunk": "@@ -0,0 +1,55 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+\n+package com.google.cloud.healthcare.fdamystudies.beans;\n+\n+import javax.validation.constraints.Email;\n+import javax.validation.constraints.NotBlank;\n+import javax.validation.constraints.Size;\n+\n+import org.springframework.context.annotation.Scope;\n+import org.springframework.stereotype.Component;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.annotation.JsonInclude.Include;\n+\n+import lombok.Getter;\n+import lombok.Setter;\n+import lombok.ToString;\n+\n+@JsonInclude(Include.NON_NULL)\n+@Component\n+@Scope(value = \"prototype\")\n+@ToString\n+@Getter\n+@Setter\n+public class ParticipantRequest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ec83bd197de8218f2e7240ad3c830b5ed48d21c"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTIyNTkzMA==", "bodyText": "changed to ParticipantDetail", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r459225930", "createdAt": "2020-07-23T05:46:52Z", "author": {"login": "navya-BTC"}, "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/beans/ParticipantRequest.java", "diffHunk": "@@ -0,0 +1,55 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+\n+package com.google.cloud.healthcare.fdamystudies.beans;\n+\n+import javax.validation.constraints.Email;\n+import javax.validation.constraints.NotBlank;\n+import javax.validation.constraints.Size;\n+\n+import org.springframework.context.annotation.Scope;\n+import org.springframework.stereotype.Component;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.annotation.JsonInclude.Include;\n+\n+import lombok.Getter;\n+import lombok.Setter;\n+import lombok.ToString;\n+\n+@JsonInclude(Include.NON_NULL)\n+@Component\n+@Scope(value = \"prototype\")\n+@ToString\n+@Getter\n+@Setter\n+public class ParticipantRequest {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA2Mjk2Ng=="}, "originalCommit": {"oid": "6ec83bd197de8218f2e7240ad3c830b5ed48d21c"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2ODE4NzQ3OnYy", "diffSide": "RIGHT", "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjo0NzowMFrOG2S_Xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwNToyNDozOFrOG2jdfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU4NzQyMg==", "bodyText": "Check for expected size of registryParticipants array here, too, before checking the value in the array.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r459587422", "createdAt": "2020-07-23T16:47:00Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -192,7 +193,13 @@ public void shouldReturnStudyParticipants() throws Exception {\n         .andDo(print())\n         .andExpect(status().isOk())\n         .andExpect(jsonPath(\"$.participantRegistryDetail.studyId\").value(studyEntity.getId()))\n-        .andExpect(jsonPath(\"$.participantRegistryDetail.registryParticipants\").isArray());\n+        .andExpect(jsonPath(\"$.participantRegistryDetail.registryParticipants\").isArray())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aa347bcf3f687ad11f534504a6bcfa6b40e5a9f"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTg1NzI3Nw==", "bodyText": "Checked for size of registryParticipants array", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r459857277", "createdAt": "2020-07-24T05:24:38Z", "author": {"login": "navya-BTC"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -192,7 +193,13 @@ public void shouldReturnStudyParticipants() throws Exception {\n         .andDo(print())\n         .andExpect(status().isOk())\n         .andExpect(jsonPath(\"$.participantRegistryDetail.studyId\").value(studyEntity.getId()))\n-        .andExpect(jsonPath(\"$.participantRegistryDetail.registryParticipants\").isArray());\n+        .andExpect(jsonPath(\"$.participantRegistryDetail.registryParticipants\").isArray())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU4NzQyMg=="}, "originalCommit": {"oid": "5aa347bcf3f687ad11f534504a6bcfa6b40e5a9f"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3OTc2MjU0OnYy", "diffSide": "RIGHT", "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/StudyController.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwMzoyMDozNFrOG37IOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNDoyMDo0M1rOG38CEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI5MzYyNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public ResponseEntity<?> getStudyParticipants(\n          \n          \n            \n              public ResponseEntity<ParticipantRegistryResponse> getStudyParticipants(", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r461293625", "createdAt": "2020-07-28T03:20:34Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/StudyController.java", "diffHunk": "@@ -43,4 +46,20 @@\n     logger.exit(String.format(STATUS_LOG, studyResponse.getHttpStatusCode()));\n     return ResponseEntity.status(studyResponse.getHttpStatusCode()).body(studyResponse);\n   }\n+\n+  @GetMapping(\n+      value = \"{studyId}/participants\",\n+      produces = MediaType.APPLICATION_JSON_VALUE,\n+      consumes = MediaType.APPLICATION_JSON_VALUE)\n+  public ResponseEntity<?> getStudyParticipants(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b338480f73f75dd8d33cff72f25ea20d689ddbb0"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMwODQzNQ==", "bodyText": "changed to ParticipantRegistryResponse", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/656#discussion_r461308435", "createdAt": "2020-07-28T04:20:43Z", "author": {"login": "navya-BTC"}, "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/StudyController.java", "diffHunk": "@@ -43,4 +46,20 @@\n     logger.exit(String.format(STATUS_LOG, studyResponse.getHttpStatusCode()));\n     return ResponseEntity.status(studyResponse.getHttpStatusCode()).body(studyResponse);\n   }\n+\n+  @GetMapping(\n+      value = \"{studyId}/participants\",\n+      produces = MediaType.APPLICATION_JSON_VALUE,\n+      consumes = MediaType.APPLICATION_JSON_VALUE)\n+  public ResponseEntity<?> getStudyParticipants(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI5MzYyNQ=="}, "originalCommit": {"oid": "b338480f73f75dd8d33cff72f25ea20d689ddbb0"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2323, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}