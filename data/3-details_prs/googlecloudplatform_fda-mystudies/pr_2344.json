{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM3MDEyODY2", "number": 2344, "title": "Participant manager webapp load more and search functionality for site, study,apps-tab", "bodyText": "Participant manager webapp load more and search functionality for site, study,app-list", "createdAt": "2020-12-11T15:26:07Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344", "merged": true, "mergeCommit": {"oid": "c2edeb05ee9ab9a727bc6a70cefce17255071359"}, "closed": true, "closedAt": "2020-12-15T05:22:24Z", "author": {"login": "prakashm181"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlBPTNgH2gAyNTM3MDEyODY2OmZkZTQyZjU2NGJkZTI3NmFlYzUyMWY0Mjc4NTAyYWY2MGIxYmVjNjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmTZESAH2gAyNTM3MDEyODY2OmJlNDRjZjQ3ODA5NTkzMzEzZDE4MTc2Y2FkNTJlODYxYzVmNDBjOTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fde42f564bde276aec521f4278502af60b1bec60", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fde42f564bde276aec521f4278502af60b1bec60", "committedDate": "2020-12-11T05:39:03Z", "message": "pagination is added\n\npagination is added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65c4fbb9df551945d2263be88cea1c9907d46429", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/65c4fbb9df551945d2263be88cea1c9907d46429", "committedDate": "2020-12-11T12:54:02Z", "message": "parse to string"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2371de905a93a70d8ad0a74629f1849a350b625c", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/2371de905a93a70d8ad0a74629f1849a350b625c", "committedDate": "2020-12-11T13:31:21Z", "message": "test case fix\n\ntest case fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e7d260d52fa0593f23a7244162eaba109e465b8", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5e7d260d52fa0593f23a7244162eaba109e465b8", "committedDate": "2020-12-11T13:43:33Z", "message": "studylist load more implementation\n\nstudylist load more implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "624225d2916dd7e5bb789e9654927e03a606c9d2", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/624225d2916dd7e5bb789e9654927e03a606c9d2", "committedDate": "2020-12-11T14:34:41Z", "message": "fixed the issue\n\nfixed the issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7004e991f8d584f097e8469986d223436d62a58f", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/7004e991f8d584f097e8469986d223436d62a58f", "committedDate": "2020-12-11T15:24:21Z", "message": "search-functionality-implementation-sites,study,applist\n\nsearch-functionality-implementation-sites,study,applist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "708b91769e946c0cc035560fe4774d91a118285b", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/708b91769e946c0cc035560fe4774d91a118285b", "committedDate": "2020-12-11T15:26:20Z", "message": "Merge branch 'develop' into Paricipant-manager-webapp-pagination-for-site-study-applist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6367c9a600bf8a3413d69f6a9c3e852017c15133", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/6367c9a600bf8a3413d69f6a9c3e852017c15133", "committedDate": "2020-12-14T05:43:30Z", "message": "Merge branch 'develop' into Paricipant-manager-webapp-pagination-for-site-study-applist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb", "author": {"user": {"login": "Madhud5", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/62f3a037678be55a83136a0d9a26baa7d1ad8dcb", "committedDate": "2020-12-14T06:01:13Z", "message": "Merge branch 'develop' into Paricipant-manager-webapp-pagination-for-site-study-applist"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxNDQ0MjMx", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#pullrequestreview-551444231", "createdAt": "2020-12-14T14:52:48Z", "commit": {"oid": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo1NTo0MFrOIFUWNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNTowMDoyNVrOIFUlSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ0NzE1OA==", "bodyText": "typo updatedParameter", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542447158", "createdAt": "2020-12-14T14:55:40Z", "author": {"login": "zohrehj"}, "path": "participant-manager/src/app/site-coordinator/apps/app-list/app-list.component.ts", "diffHunk": "@@ -25,25 +27,33 @@ export class AppListComponent implements OnInit {\n     '=1': 'One Study',\n     'other': '# Studies',\n   };\n+  loadMoreEnabled = true;\n+\n+  searchValue = '';\n \n   constructor(\n     private readonly appService: AppsService,\n     private readonly sharedService: SearchService,\n     private readonly toastr: ToastrService,\n+    private readonly searchParameter: SearchParameterService,\n   ) {}\n \n   ngOnInit(): void {\n+    this.searchParameter.searchParam$.subscribe((upadtedParameter) => {\n+      this.manageAppsBackup = {} as ManageApps;\n+      this.searchValue = upadtedParameter;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ0ODg3NQ==", "bodyText": "this will only search within apps that are already loaded, users can easily use their browser search to do this. Why should we add this feature?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542448875", "createdAt": "2020-12-14T14:57:41Z", "author": {"login": "zohrehj"}, "path": "participant-manager/src/app/site-coordinator/apps/app-list/app-list.component.ts", "diffHunk": "@@ -82,4 +96,33 @@ export class AppListComponent implements OnInit {\n       permission === Permission.View || permission === Permission.ViewAndEdit\n     );\n   }\n+\n+  loadMoreSites() {\n+    const offset = this.manageAppsBackup.apps.length;\n+    this.manageApp$ = combineLatest(\n+      this.appService.getUserApps(limit, offset, this.searchValue),\n+      this.query$,\n+    ).pipe(\n+      map(([manageApps, query]) => {\n+        const apps = [];\n+        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n+        apps.push(...this.manageAppsBackup.apps);\n+        apps.push(...manageApps.apps);\n+        this.manageAppsBackup.apps = apps;\n+        if (!manageApps.superAdmin && manageApps.studyPermissionCount < 2) {\n+          this.toastr.error(\n+            'This view displays app-wise enrollment if you manage multiple studies.',\n+          );\n+        }\n+        this.manageAppsBackup.apps = this.manageAppsBackup.apps.filter(\n+          (app: App) =>\n+            app.name?.toLowerCase().includes(query.toLowerCase()) ||\n+            app.customId?.toLowerCase().includes(query.toLowerCase()),\n+        );\n+        this.loadMoreEnabled =\n+          this.manageAppsBackup.apps.length % limit === 0 ? true : false;\n+        return this.manageAppsBackup;\n+      }),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ1MTAxOA==", "bodyText": "consider moving the animation component into a common partial", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542451018", "createdAt": "2020-12-14T15:00:25Z", "author": {"login": "zohrehj"}, "path": "participant-manager/src/app/site-coordinator/sites/site-list/site-list.component.html", "diffHunk": "@@ -121,6 +121,16 @@\n             </div>\n           </div>\n         </div>\n+        <div *ngIf=\"loadMoreEnabled\" (mouseover)=\"loadMoreSites()\">\n+          <div class=\"content_loader\">\n+            <div class=\"container_btm_loader animation-2\">\n+              <div class=\"shape shape1\"></div>\n+              <div class=\"shape shape2\"></div>\n+              <div class=\"shape shape3\"></div>\n+              <div class=\"shape shape4\"></div>\n+            </div>\n+          </div>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92b087fef6cba3d1a2ff12faaa954b6bca54018c", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/92b087fef6cba3d1a2ff12faaa954b6bca54018c", "committedDate": "2020-12-14T16:48:43Z", "message": "comment-fix\n\ncomment-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cad942c4846bb6b2d1feaf63233caa14123cc79c", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/cad942c4846bb6b2d1feaf63233caa14123cc79c", "committedDate": "2020-12-14T17:29:03Z", "message": "added loadmore-spinner component\n\nadded loadmore-spinner component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6aed32aba53c4d8e5e5c902c8bfdd982ad514fb7", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/6aed32aba53c4d8e5e5c902c8bfdd982ad514fb7", "committedDate": "2020-12-14T17:30:57Z", "message": "Merge branch 'develop' into Paricipant-manager-webapp-pagination-for-site-study-applist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecea0fe9031f22de9c7303fb2f4f0cf0c7f07de7", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ecea0fe9031f22de9c7303fb2f4f0cf0c7f07de7", "committedDate": "2020-12-14T18:06:11Z", "message": "removed unused code\n\nremoved unused code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8723ca96a00c1d9045e60fa321c3da9714997ca8", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8723ca96a00c1d9045e60fa321c3da9714997ca8", "committedDate": "2020-12-14T18:07:04Z", "message": "Merge branch 'develop' into Paricipant-manager-webapp-pagination-for-site-study-applist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3479790b7372697b7b3fe3b23e41b37cfdc70e6", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b3479790b7372697b7b3fe3b23e41b37cfdc70e6", "committedDate": "2020-12-14T18:27:01Z", "message": "Merge branch 'Paricipant-manager-webapp-pagination-for-site-study-applist' of https://github.com/GoogleCloudPlatform/fda-mystudies into Paricipant-manager-webapp-pagination-for-site-study-applist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f391f79d4df9d2e2773f89ebb30ac318408a2a9a", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f391f79d4df9d2e2773f89ebb30ac318408a2a9a", "committedDate": "2020-12-14T18:33:47Z", "message": "lint issue fix\n\nlint issue fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35244baf439a0261519697e0e81402fb34799406", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/35244baf439a0261519697e0e81402fb34799406", "committedDate": "2020-12-14T18:57:25Z", "message": "search issue fixed\n\nsearch issue fixed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxODU5Mzg1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#pullrequestreview-551859385", "createdAt": "2020-12-14T20:18:14Z", "commit": {"oid": "35244baf439a0261519697e0e81402fb34799406"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be44cf47809593313d18176cad52e861c5f40c93", "author": {"user": {"login": "prakashm181", "name": "Prakashm"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/be44cf47809593313d18176cad52e861c5f40c93", "committedDate": "2020-12-15T05:21:56Z", "message": "Merge branch 'develop' into Paricipant-manager-webapp-pagination-for-site-study-applist"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1012, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}