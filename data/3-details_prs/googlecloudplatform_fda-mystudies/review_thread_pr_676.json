{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2Mzc2MDYw", "number": 676, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODoxMTo1OFrOETJOMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODo0MDozOFrOETJ62A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NTA5NDkxOnYy", "diffSide": "RIGHT", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/MessageCode.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODoxMTo1OFrOG4tezg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDoxNzozMlrOG5dA8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjExODYwNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfull\"),\n          \n          \n            \n              GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfully\"),", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462118606", "createdAt": "2020-07-29T08:11:58Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/MessageCode.java", "diffHunk": "@@ -53,7 +53,9 @@\n \n   GET_LOCATION_SUCCESS(HttpStatus.OK, \"MSG-0008\", \"Get locations successfull\"),\n \n-  GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfull\");\n+  GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfull\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjg5NzM5NQ==", "bodyText": "Changed to \"Get locations for site successfully\".", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462897395", "createdAt": "2020-07-30T10:17:32Z", "author": {"login": "monica-BTC"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/MessageCode.java", "diffHunk": "@@ -53,7 +53,9 @@\n \n   GET_LOCATION_SUCCESS(HttpStatus.OK, \"MSG-0008\", \"Get locations successfull\"),\n \n-  GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfull\");\n+  GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfull\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjExODYwNg=="}, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NTEyOTE2OnYy", "diffSide": "RIGHT", "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/beans/ParticipantDetails.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODoyMDozOVrOG4tzdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDoxODo1OFrOG5dD4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEyMzg5Mw==", "bodyText": "I have seen other PRs with a new ParticipantDetail.java file here. Could you look into those and make sure to consolidate with that also? For example PR #656", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462123893", "createdAt": "2020-07-29T08:20:39Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/beans/ParticipantDetails.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+\n+package com.google.cloud.healthcare.fdamystudies.beans;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+\n+import lombok.Getter;\n+import lombok.NoArgsConstructor;\n+import lombok.Setter;\n+\n+@Getter\n+@Setter\n+@NoArgsConstructor\n+@JsonInclude(JsonInclude.Include.NON_EMPTY)\n+public class ParticipantDetails {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEzMTk4Nw==", "bodyText": "This comment also goes with the above classes. Also I think there should be a consensus for all these classes on whether or not Detail is plural", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462131987", "createdAt": "2020-07-29T08:33:10Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/beans/ParticipantDetails.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+\n+package com.google.cloud.healthcare.fdamystudies.beans;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+\n+import lombok.Getter;\n+import lombok.NoArgsConstructor;\n+import lombok.Setter;\n+\n+@Getter\n+@Setter\n+@NoArgsConstructor\n+@JsonInclude(JsonInclude.Include.NON_EMPTY)\n+public class ParticipantDetails {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEyMzg5Mw=="}, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjg5ODE0NA==", "bodyText": "Removed ParticipantDetails and required fields are added in ParticipantDetail.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462898144", "createdAt": "2020-07-30T10:18:58Z", "author": {"login": "monica-BTC"}, "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/beans/ParticipantDetails.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+\n+package com.google.cloud.healthcare.fdamystudies.beans;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+\n+import lombok.Getter;\n+import lombok.NoArgsConstructor;\n+import lombok.Setter;\n+\n+@Getter\n+@Setter\n+@NoArgsConstructor\n+@JsonInclude(JsonInclude.Include.NON_EMPTY)\n+public class ParticipantDetails {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEyMzg5Mw=="}, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NTE2MzM2OnYy", "diffSide": "RIGHT", "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/common/ApiEndpoint.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODoyOTowOFrOG4uIfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDoxOTo1NFrOG5dFsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEyOTI3Nw==", "bodyText": "{appId} ?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462129277", "createdAt": "2020-07-29T08:29:08Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/common/ApiEndpoint.java", "diffHunk": "@@ -38,7 +38,9 @@\n   GET_LOCATIONS(\"http://localhost:8003/participant-manager-service/locations\"),\n \n   GET_LOCATION_BY_LOCATION_ID(\n-      \"http://localhost:8003/participant-manager-service/locations/{locationId}\");\n+      \"http://localhost:8003/participant-manager-service/locations/{locationId}\"),\n+\n+  GET_APP_PARTICIPANTS(\"http://localhost:8080/participant-manager-service/apps/{app}/participants\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjg5ODYxMQ==", "bodyText": "Changed to appId.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462898611", "createdAt": "2020-07-30T10:19:54Z", "author": {"login": "monica-BTC"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/common/ApiEndpoint.java", "diffHunk": "@@ -38,7 +38,9 @@\n   GET_LOCATIONS(\"http://localhost:8003/participant-manager-service/locations\"),\n \n   GET_LOCATION_BY_LOCATION_ID(\n-      \"http://localhost:8003/participant-manager-service/locations/{locationId}\");\n+      \"http://localhost:8003/participant-manager-service/locations/{locationId}\"),\n+\n+  GET_APP_PARTICIPANTS(\"http://localhost:8080/participant-manager-service/apps/{app}/participants\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEyOTI3Nw=="}, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NTE5MTQzOnYy", "diffSide": "RIGHT", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/MessageCode.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODozNTozMVrOG4uYzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDoyMjoyM1rOG5dKPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEzMzQ1Mg==", "bodyText": "typo", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462133452", "createdAt": "2020-07-29T08:35:31Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/MessageCode.java", "diffHunk": "@@ -53,7 +53,9 @@\n \n   GET_LOCATION_SUCCESS(HttpStatus.OK, \"MSG-0008\", \"Get locations successfull\"),\n \n-  GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfull\");\n+  GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfull\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjg5OTc3NQ==", "bodyText": "Typo corrected.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462899775", "createdAt": "2020-07-30T10:22:23Z", "author": {"login": "monica-BTC"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/MessageCode.java", "diffHunk": "@@ -53,7 +53,9 @@\n \n   GET_LOCATION_SUCCESS(HttpStatus.OK, \"MSG-0008\", \"Get locations successfull\"),\n \n-  GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfull\");\n+  GET_LOCATION_FOR_SITE_SUCCESS(HttpStatus.OK, \"MSG-0009\", \"Get locations for site successfull\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEzMzQ1Mg=="}, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NTIwOTIwOnYy", "diffSide": "RIGHT", "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/AppControllerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODo0MDozOFrOG4uj5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDoyMjo1OFrOG5dLdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEzNjI5Mg==", "bodyText": "Always check for size of Array before checking for values within it. Also check for other fields by participants[0] too like the actual enrolled studies to make sure it matches test data", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462136292", "createdAt": "2020-07-29T08:40:38Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/AppControllerTest.java", "diffHunk": "@@ -171,6 +171,64 @@ public void shouldReturnForbiddenForGetAppDetailsAccessDenied() throws Exception\n                 \"$.error_description\", is(ErrorCode.USER_ADMIN_ACCESS_DENIED.getDescription())));\n   }\n \n+  @Test\n+  public void shouldReturnGetAppParticipants() throws Exception {\n+    // Step 1 : Set studyEntity,siteEntity,locationEntity,userDetailsEntity\n+    studyEntity.setAppInfo(appEntity);\n+    siteEntity.setStudy(studyEntity);\n+    locationEntity = testDataHelper.createLocation();\n+    siteEntity.setLocation(locationEntity);\n+    participantStudyEntity.setUserDetails(userDetailsEntity);\n+    testDataHelper.getParticipantStudyRepository().saveAndFlush(participantStudyEntity);\n+\n+    // Step 2: Call API to return GET_APPS_PARTICIPANTS\n+    HttpHeaders headers = testDataHelper.newCommonHeaders();\n+    headers.set(USER_ID_HEADER, userRegAdminEntity.getId());\n+\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_APP_PARTICIPANTS.getPath(), appEntity.getId())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isOk())\n+        .andExpect(jsonPath(\"$.participants\").isArray())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkwMDA4Ng==", "bodyText": "Checked for size of array and values.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/676#discussion_r462900086", "createdAt": "2020-07-30T10:22:58Z", "author": {"login": "monica-BTC"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/AppControllerTest.java", "diffHunk": "@@ -171,6 +171,64 @@ public void shouldReturnForbiddenForGetAppDetailsAccessDenied() throws Exception\n                 \"$.error_description\", is(ErrorCode.USER_ADMIN_ACCESS_DENIED.getDescription())));\n   }\n \n+  @Test\n+  public void shouldReturnGetAppParticipants() throws Exception {\n+    // Step 1 : Set studyEntity,siteEntity,locationEntity,userDetailsEntity\n+    studyEntity.setAppInfo(appEntity);\n+    siteEntity.setStudy(studyEntity);\n+    locationEntity = testDataHelper.createLocation();\n+    siteEntity.setLocation(locationEntity);\n+    participantStudyEntity.setUserDetails(userDetailsEntity);\n+    testDataHelper.getParticipantStudyRepository().saveAndFlush(participantStudyEntity);\n+\n+    // Step 2: Call API to return GET_APPS_PARTICIPANTS\n+    HttpHeaders headers = testDataHelper.newCommonHeaders();\n+    headers.set(USER_ID_HEADER, userRegAdminEntity.getId());\n+\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_APP_PARTICIPANTS.getPath(), appEntity.getId())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isOk())\n+        .andExpect(jsonPath(\"$.participants\").isArray())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEzNjI5Mg=="}, "originalCommit": {"oid": "053fbd1d9519e638cfcb46b88caffcf467d4b35d"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2018, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}