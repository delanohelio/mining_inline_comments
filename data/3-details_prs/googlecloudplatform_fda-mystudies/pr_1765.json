{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzOTcwNDEz", "number": 1765, "title": "[participant-manager-datastore]:  Fixed issue #1738 and #1755", "bodyText": "Fixed issue #1738 and #1755\n#1738 - Added conditional check and modified query\n#1755 - Refactored existing code", "createdAt": "2020-11-02T10:49:00Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1765", "merged": true, "mergeCommit": {"oid": "aac5a67ff24d6d42ef50e25021eeb159766d0c49"}, "closed": true, "closedAt": "2020-11-04T02:39:11Z", "author": {"login": "Kantharajut-btc"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYiNKZAH2gAyNTEzOTcwNDEzOjQ0MWNiYWMxMTYyNmY5NWYwOGZmYThkMDZhMjJhY2YxM2QyMjc1Mjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZEcmWAH2gAyNTEzOTcwNDEzOmUyZDMyYzQ1NjJiMDdiNDdhNWQ1ZDI3NDUwMTUxZTY2ZjQzYmNiY2U=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "441cbac11626f95f08ffa8d06a22acf13d227527", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/441cbac11626f95f08ffa8d06a22acf13d227527", "committedDate": "2020-11-02T10:42:34Z", "message": "Fixed issue #1738 and #1755\n\nFixed issue #1738 and #1755"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxOTc3Mzk5", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1765#pullrequestreview-521977399", "createdAt": "2020-11-02T20:42:04Z", "commit": {"oid": "441cbac11626f95f08ffa8d06a22acf13d227527"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "612c2467017f8768b2ff4dff169715f265b8b8b8", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/612c2467017f8768b2ff4dff169715f265b8b8b8", "committedDate": "2020-11-03T06:50:25Z", "message": "Fixed PR comments\n\nFixed PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "108b766f7bc76c43013c9a99cb5298f707298ce1", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/108b766f7bc76c43013c9a99cb5298f707298ce1", "committedDate": "2020-11-03T06:50:57Z", "message": "Merge branch 'develop' into partcipant-manager-issue-1755"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMzA1OTQx", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1765#pullrequestreview-522305941", "createdAt": "2020-11-03T09:19:01Z", "commit": {"oid": "108b766f7bc76c43013c9a99cb5298f707298ce1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwOToxOTowMVrOHsl6HQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwOToxOTozMlrOHsl7Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUyMDQ3Nw==", "bodyText": "Should we expect the studies array to be empty here?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1765#discussion_r516520477", "createdAt": "2020-11-03T09:19:01Z", "author": {"login": "saminguyen"}, "path": "participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -865,6 +865,24 @@ public void shouldReturnUserNotFoundForUpdateTargetEnrollment() throws Exception\n     verifyTokenIntrospectRequest();\n   }\n \n+  @Test\n+  public void shouldNotReturnStudiesIfNoSitesForSuperAdmin() throws Exception {\n+    HttpHeaders headers = testDataHelper.newCommonHeaders();\n+    headers.add(USER_ID_HEADER, userRegAdminEntity.getId());\n+\n+    /* Set study in the site to null and expect no study if there is no site associated with that study*/\n+    siteEntity.setStudy(null);\n+    testDataHelper.getSiteRepository().saveAndFlush(siteEntity);\n+\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDIES.getPath()).headers(headers).contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isOk());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "108b766f7bc76c43013c9a99cb5298f707298ce1"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUyMDgwMw==", "bodyText": "Move this to the section with other tests for the GET_STUDIES endpoint", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1765#discussion_r516520803", "createdAt": "2020-11-03T09:19:32Z", "author": {"login": "saminguyen"}, "path": "participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -865,6 +865,24 @@ public void shouldReturnUserNotFoundForUpdateTargetEnrollment() throws Exception\n     verifyTokenIntrospectRequest();\n   }\n \n+  @Test\n+  public void shouldNotReturnStudiesIfNoSitesForSuperAdmin() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "108b766f7bc76c43013c9a99cb5298f707298ce1"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f4b21511c62b37590695f753e2fbd17bbefe50e", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/3f4b21511c62b37590695f753e2fbd17bbefe50e", "committedDate": "2020-11-03T11:45:44Z", "message": "Fixed PR comments\n\nFixed PR comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyNzgwNzc5", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1765#pullrequestreview-522780779", "createdAt": "2020-11-03T18:43:30Z", "commit": {"oid": "3f4b21511c62b37590695f753e2fbd17bbefe50e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2d32c4562b07b47a5d5d27450151e66f43bcbce", "author": {"user": {"login": "Kantharajut-btc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e2d32c4562b07b47a5d5d27450151e66f43bcbce", "committedDate": "2020-11-04T02:36:12Z", "message": "Merge branch 'develop' into partcipant-manager-issue-1755"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1388, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}