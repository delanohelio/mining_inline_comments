{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNTY1ODI0", "number": 588, "title": "Urwebapp addlocation implementation", "bodyText": "Urwebapp addlocation implementation", "createdAt": "2020-07-02T14:48:17Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588", "merged": true, "mergeCommit": {"oid": "89e5688b304d0a8c859cd6c4e27cd32e78599144"}, "closed": true, "closedAt": "2020-07-22T09:30:32Z", "author": {"login": "firdosebtc1"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuZTCQgH2gAyNDQzNTY1ODI0OjQ1ZWE2N2M5ZWFhZmZiZjdmNTg0NTI5ODVjY2NmMzIyZDZiNmQ5Y2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3XXf6AH2gAyNDQzNTY1ODI0OmFlMTkxZmFlNDMzYWI3MmJjNThkOGY3MDQ5ODg4Y2NhODBiNjVlY2E=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "45ea67c9eaaffbf7f58452985cccf322d6b6d9ca", "author": {"user": {"login": "rohithd-btc", "name": "Rohith D C"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/45ea67c9eaaffbf7f58452985cccf322d6b6d9ca", "committedDate": "2020-06-24T12:35:01Z", "message": "AddLocation Components and Test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f3d68d8ea629e97c7ca32215705dc78d5b969ca", "author": {"user": {"login": "rohithd-btc", "name": "Rohith D C"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8f3d68d8ea629e97c7ca32215705dc78d5b969ca", "committedDate": "2020-06-24T13:32:50Z", "message": "Test Case Changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a628ca8b2e2c470363230f9ee6b6fb64c08aea87", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a628ca8b2e2c470363230f9ee6b6fb64c08aea87", "committedDate": "2020-06-24T13:54:38Z", "message": "addLocation service layer implemented"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bfb54b5c3eb1be2e67d1914da9ba6476fc7e9a5", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5bfb54b5c3eb1be2e67d1914da9ba6476fc7e9a5", "committedDate": "2020-06-24T13:57:12Z", "message": "Merge branch 'urwebapp-addlocation-implementation' of https://github.com/GoogleCloudPlatform/fda-mystudies into urwebapp-addlocation-implementation\n\n# Conflicts:\n#\tUR-web-app/src/app/site-coordinator/location/add-location/add-location.component.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f3f9f97fdcdb6f93140de83eb33dedc9964b7f9", "author": {"user": {"login": "prasannaatbtc", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8f3f9f97fdcdb6f93140de83eb33dedc9964b7f9", "committedDate": "2020-06-24T14:05:35Z", "message": "add location html changes with back arrow image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcb958d681633eadf5978439bc52baf2942c5822", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bcb958d681633eadf5978439bc52baf2942c5822", "committedDate": "2020-06-24T15:17:58Z", "message": "linter fixes has been done"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ac0b0727af404ee826ff38333674dd1738a8379", "author": {"user": {"login": "rohithd-btc", "name": "Rohith D C"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8ac0b0727af404ee826ff38333674dd1738a8379", "committedDate": "2020-06-29T09:59:00Z", "message": "Add location functionality and Test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6d2ff1c105bd69af067be7536324ce242013933", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a6d2ff1c105bd69af067be7536324ce242013933", "committedDate": "2020-06-30T14:23:42Z", "message": "Merge branch 'develop' of https://github.com/GoogleCloudPlatform/fda-mystudies into urwebapp-addlocation-implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9d9af15b93179872d7f6e18db7b904f1815ad6c", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a9d9af15b93179872d7f6e18db7b904f1815ad6c", "committedDate": "2020-07-02T13:57:25Z", "message": "cancel button implementation has been changed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82", "committedDate": "2020-07-02T14:45:45Z", "message": "added sorter for table"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNzkyMTkz", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#pullrequestreview-441792193", "createdAt": "2020-07-02T15:21:38Z", "commit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNToyMTozOFrOGsRn0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNToyMTozOFrOGsRn0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA3OTI1MQ==", "bodyText": "Does our API really return the key successBean? That should be changed on the server side.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449079251", "createdAt": "2020-07-02T15:21:38Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/entity/sucess.model.ts", "diffHunk": "@@ -0,0 +1,7 @@\n+export interface ApiSuccessResponse {\n+  successBean: Success;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNzkzODUz", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#pullrequestreview-441793853", "createdAt": "2020-07-02T15:22:38Z", "commit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 34, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNToyMjozOFrOGsRqZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxODoxMDo1MlrOGsYWcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA3OTkwOA==", "bodyText": "I assume this was for testing? If so please remove.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449079908", "createdAt": "2020-07-02T15:22:38Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/http-interceptors/auth.interceptor.ts", "diffHunk": "@@ -27,7 +27,12 @@ export class AuthInterceptor implements HttpInterceptor {\n     void this.spinner.show();\n     const user = this.getUserDetails();\n     if (user === null) {\n-      return next.handle(req).pipe(\n+      const headers = req.headers\n+        .set('Content-Type', 'application/json')\n+        .set('userId', '1');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA4MDIxMg==", "bodyText": "This should be in environment.ts.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449080212", "createdAt": "2020-07-02T15:23:06Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/service/entity.service.ts", "diffHunk": "@@ -5,7 +5,7 @@ import {Location} from '@angular/common';\n \n @Injectable()\n export class EntityService<T> {\n-  baseUrl = 'http://<IP>:<port>/urwebappws';\n+  baseUrl = 'http://35.222.67.4:8086/urwebappws';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA4MDc4Mg==", "bodyText": "Templates that are more than a couple lines should be in a separate file.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449080782", "createdAt": "2020-07-02T15:24:01Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/shared/myDefaultSorterComponent.ts", "diffHunk": "@@ -0,0 +1,54 @@\n+import {Component, Input, OnInit} from '@angular/core';\n+import {SortEvent, DataTable} from 'angular-9-datatable';\n+\n+@Component({\n+  selector: 'mySorter',\n+  template: `<a style=\"cursor: pointer\" (click)=\"sort()\" class=\"text-nowrap\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA4MDg5NQ==", "bodyText": "Don't use my.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449080895", "createdAt": "2020-07-02T15:24:10Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/shared/myDefaultSorterComponent.ts", "diffHunk": "@@ -0,0 +1,54 @@\n+import {Component, Input, OnInit} from '@angular/core';\n+import {SortEvent, DataTable} from 'angular-9-datatable';\n+\n+@Component({\n+  selector: 'mySorter',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA4MTE5Nw==", "bodyText": "Don't use me.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449081197", "createdAt": "2020-07-02T15:24:34Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/shared/myDefaultSorterComponent.ts", "diffHunk": "@@ -0,0 +1,54 @@\n+import {Component, Input, OnInit} from '@angular/core';\n+import {SortEvent, DataTable} from 'angular-9-datatable';\n+\n+@Component({\n+  selector: 'mySorter',\n+  template: `<a style=\"cursor: pointer\" (click)=\"sort()\" class=\"text-nowrap\">\n+    <ng-content></ng-content>\n+    <span\n+      *ngIf=\"isSortedByMeAsc\"\n+      class=\"glyphicon glyphicon-triangle-top\"\n+      aria-hidden=\"true\"\n+    ></span>\n+    <i\n+      *ngIf=\"!isSortedByMeAsc && !isSortedByMeDesc\"\n+      class=\"fa fa-sort-desc\"\n+      aria-hidden=\"true\"\n+    ></i>\n+    <span\n+      *ngIf=\"isSortedByMeDesc\"\n+      class=\"glyphicon glyphicon-triangle-bottom\"\n+      aria-hidden=\"true\"\n+    ></span>\n+    <span\n+      *ngIf=\"!isSortedByMeAsc && !isSortedByMeDesc\"\n+      class=\"glyphicon glyphicon-sort\"\n+      aria-hidden=\"true\"\n+    ></span>\n+    <i *ngIf=\"isSortedByMeAsc\" class=\"fa fa-sort-asc\" aria-hidden=\"true\"></i>\n+  </a>`,\n+})\n+export class MyDefaultSorterComponent implements OnInit {\n+  @Input('by') sortBy = '';\n+  isSortedByMeAsc = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA4MTc4Mw==", "bodyText": "Instead of two booleans you should use an enum, for example type SortDirection = 'ASC' | 'DESC' | 'UNSORTED'", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449081783", "createdAt": "2020-07-02T15:25:28Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/shared/myDefaultSorterComponent.ts", "diffHunk": "@@ -0,0 +1,54 @@\n+import {Component, Input, OnInit} from '@angular/core';\n+import {SortEvent, DataTable} from 'angular-9-datatable';\n+\n+@Component({\n+  selector: 'mySorter',\n+  template: `<a style=\"cursor: pointer\" (click)=\"sort()\" class=\"text-nowrap\">\n+    <ng-content></ng-content>\n+    <span\n+      *ngIf=\"isSortedByMeAsc\"\n+      class=\"glyphicon glyphicon-triangle-top\"\n+      aria-hidden=\"true\"\n+    ></span>\n+    <i\n+      *ngIf=\"!isSortedByMeAsc && !isSortedByMeDesc\"\n+      class=\"fa fa-sort-desc\"\n+      aria-hidden=\"true\"\n+    ></i>\n+    <span\n+      *ngIf=\"isSortedByMeDesc\"\n+      class=\"glyphicon glyphicon-triangle-bottom\"\n+      aria-hidden=\"true\"\n+    ></span>\n+    <span\n+      *ngIf=\"!isSortedByMeAsc && !isSortedByMeDesc\"\n+      class=\"glyphicon glyphicon-sort\"\n+      aria-hidden=\"true\"\n+    ></span>\n+    <i *ngIf=\"isSortedByMeAsc\" class=\"fa fa-sort-asc\" aria-hidden=\"true\"></i>\n+  </a>`,\n+})\n+export class MyDefaultSorterComponent implements OnInit {\n+  @Input('by') sortBy = '';\n+  isSortedByMeAsc = false;\n+  isSortedByMeDesc = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA4MzA1NA==", "bodyText": "Use a pipe and async. Otherwise you need to unsubscribe.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449083054", "createdAt": "2020-07-02T15:26:35Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/shared/myDefaultSorterComponent.ts", "diffHunk": "@@ -0,0 +1,54 @@\n+import {Component, Input, OnInit} from '@angular/core';\n+import {SortEvent, DataTable} from 'angular-9-datatable';\n+\n+@Component({\n+  selector: 'mySorter',\n+  template: `<a style=\"cursor: pointer\" (click)=\"sort()\" class=\"text-nowrap\">\n+    <ng-content></ng-content>\n+    <span\n+      *ngIf=\"isSortedByMeAsc\"\n+      class=\"glyphicon glyphicon-triangle-top\"\n+      aria-hidden=\"true\"\n+    ></span>\n+    <i\n+      *ngIf=\"!isSortedByMeAsc && !isSortedByMeDesc\"\n+      class=\"fa fa-sort-desc\"\n+      aria-hidden=\"true\"\n+    ></i>\n+    <span\n+      *ngIf=\"isSortedByMeDesc\"\n+      class=\"glyphicon glyphicon-triangle-bottom\"\n+      aria-hidden=\"true\"\n+    ></span>\n+    <span\n+      *ngIf=\"!isSortedByMeAsc && !isSortedByMeDesc\"\n+      class=\"glyphicon glyphicon-sort\"\n+      aria-hidden=\"true\"\n+    ></span>\n+    <i *ngIf=\"isSortedByMeAsc\" class=\"fa fa-sort-asc\" aria-hidden=\"true\"></i>\n+  </a>`,\n+})\n+export class MyDefaultSorterComponent implements OnInit {\n+  @Input('by') sortBy = '';\n+  isSortedByMeAsc = false;\n+  isSortedByMeDesc = false;\n+\n+  constructor(private readonly mfTable: DataTable) {}\n+\n+  public ngOnInit(): void {\n+    this.mfTable.onSortChange.subscribe((event: SortEvent) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA4NDk4OQ==", "bodyText": "What about the maxLength error?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449084989", "createdAt": "2020-07-02T15:28:15Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.html", "diffHunk": "@@ -1 +1,78 @@\n-<p>add-location works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__850 m-none\">\n+        <div class=\"row\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" />\n+                    <span>Add New Location</span>\n+                </a>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+<div class=\"max__w__850 add__location\">\n+    <form ngForm #addLocationForm=\"ngForm\" (ngSubmit)=\"addLocation()\" autocomplete=\"off\">\n+        <div class=\"bg__white card__inside__pad box__shadow-cmn m-none\">\n+            <div class=\"row border-bottom__c4d1e6\">\n+                <div class=\"col-xs-12 col-md-6 p-none border-right__c4d1e6\">\n+                    <div class=\"form-group\">\n+                        <label for=\"study\">Location ID</label>\n+                        <input type=\"text\" class=\"form-control\" id=\"locationCustomId\" placeholder=\"Enter Location ID\"\n+                            [(ngModel)]=\"location.customId\" maxlength=\"15\" required name=\"locationCustomId\"\n+                            #locationCustomId=\"ngModel\" />\n+                    </div>\n+                    <div *ngIf=\"\n+              locationCustomId.invalid &&\n+              (locationCustomId.dirty || locationCustomId.touched)\n+            \">\n+                        <span class=\"help-block with-errors error__msg\" *ngIf=\"locationCustomId.errors.required\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA4OTcyMg==", "bodyText": "You don't need an id attribute and a name attribute. Just name is fine. Also adding location to every variable is redundant, this is the location form. Just use customId.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449089722", "createdAt": "2020-07-02T15:32:10Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.html", "diffHunk": "@@ -1 +1,78 @@\n-<p>add-location works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__850 m-none\">\n+        <div class=\"row\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" />\n+                    <span>Add New Location</span>\n+                </a>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+<div class=\"max__w__850 add__location\">\n+    <form ngForm #addLocationForm=\"ngForm\" (ngSubmit)=\"addLocation()\" autocomplete=\"off\">\n+        <div class=\"bg__white card__inside__pad box__shadow-cmn m-none\">\n+            <div class=\"row border-bottom__c4d1e6\">\n+                <div class=\"col-xs-12 col-md-6 p-none border-right__c4d1e6\">\n+                    <div class=\"form-group\">\n+                        <label for=\"study\">Location ID</label>\n+                        <input type=\"text\" class=\"form-control\" id=\"locationCustomId\" placeholder=\"Enter Location ID\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA5MDU4NQ==", "bodyText": "Same as customId", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449090585", "createdAt": "2020-07-02T15:32:55Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.html", "diffHunk": "@@ -1 +1,78 @@\n-<p>add-location works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__850 m-none\">\n+        <div class=\"row\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" />\n+                    <span>Add New Location</span>\n+                </a>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+<div class=\"max__w__850 add__location\">\n+    <form ngForm #addLocationForm=\"ngForm\" (ngSubmit)=\"addLocation()\" autocomplete=\"off\">\n+        <div class=\"bg__white card__inside__pad box__shadow-cmn m-none\">\n+            <div class=\"row border-bottom__c4d1e6\">\n+                <div class=\"col-xs-12 col-md-6 p-none border-right__c4d1e6\">\n+                    <div class=\"form-group\">\n+                        <label for=\"study\">Location ID</label>\n+                        <input type=\"text\" class=\"form-control\" id=\"locationCustomId\" placeholder=\"Enter Location ID\"\n+                            [(ngModel)]=\"location.customId\" maxlength=\"15\" required name=\"locationCustomId\"\n+                            #locationCustomId=\"ngModel\" />\n+                    </div>\n+                    <div *ngIf=\"\n+              locationCustomId.invalid &&\n+              (locationCustomId.dirty || locationCustomId.touched)\n+            \">\n+                        <span class=\"help-block with-errors error__msg\" *ngIf=\"locationCustomId.errors.required\">\n+                            Location ID is required.\n+                        </span>\n+                    </div>\n+                </div>\n+                <div class=\"col-xs-12 col-md-6 p-none\">\n+                    <div class=\"form-group\">\n+                        <label for=\"app\">Location Name</label>\n+                        <input type=\"text\" class=\"form-control\" id=\"locationName\" placeholder=\"Enter Location Name\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA5MTExMw==", "bodyText": "customIdInput", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449091113", "createdAt": "2020-07-02T15:33:22Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -1,24 +1,149 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n-\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+  tick,\n+} from '@angular/core/testing';\n+import {DebugElement} from '@angular/core';\n import {AddLocationComponent} from './add-location.component';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrModule} from 'ngx-toastr';\n+import {BsModalService, ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {FormsModule, ReactiveFormsModule, NgForm} from '@angular/forms';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {HttpClientModule} from '@angular/common/http';\n+import {By} from '@angular/platform-browser';\n \n describe('AddLocationComponent', () => {\n   let component: AddLocationComponent;\n   let fixture: ComponentFixture<AddLocationComponent>;\n+  let form: DebugElement;\n+  let submitLocation: DebugElement;\n+  let locationCustomIde1: DebugElement;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA5MTI3MA==", "bodyText": "nameInput", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449091270", "createdAt": "2020-07-02T15:33:30Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -1,24 +1,149 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n-\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+  tick,\n+} from '@angular/core/testing';\n+import {DebugElement} from '@angular/core';\n import {AddLocationComponent} from './add-location.component';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrModule} from 'ngx-toastr';\n+import {BsModalService, ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {FormsModule, ReactiveFormsModule, NgForm} from '@angular/forms';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {HttpClientModule} from '@angular/common/http';\n+import {By} from '@angular/platform-browser';\n \n describe('AddLocationComponent', () => {\n   let component: AddLocationComponent;\n   let fixture: ComponentFixture<AddLocationComponent>;\n+  let form: DebugElement;\n+  let submitLocation: DebugElement;\n+  let locationCustomIde1: DebugElement;\n+  let locationNamee1: DebugElement;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA5MjY0OA==", "bodyText": "You aren't using ReactiveForms", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449092648", "createdAt": "2020-07-02T15:34:43Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -1,24 +1,149 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n-\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+  tick,\n+} from '@angular/core/testing';\n+import {DebugElement} from '@angular/core';\n import {AddLocationComponent} from './add-location.component';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrModule} from 'ngx-toastr';\n+import {BsModalService, ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {FormsModule, ReactiveFormsModule, NgForm} from '@angular/forms';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {HttpClientModule} from '@angular/common/http';\n+import {By} from '@angular/platform-browser';\n \n describe('AddLocationComponent', () => {\n   let component: AddLocationComponent;\n   let fixture: ComponentFixture<AddLocationComponent>;\n+  let form: DebugElement;\n+  let submitLocation: DebugElement;\n+  let locationCustomIde1: DebugElement;\n+  let locationNamee1: DebugElement;\n+  let locationDescriptione1: DebugElement;\n \n-  beforeEach(async(async () => {\n-    await TestBed.configureTestingModule({\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n       declarations: [AddLocationComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        HttpClientModule,\n+        FormsModule,\n+        ReactiveFormsModule,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA5MzE4OQ==", "bodyText": "Use [name=\"\"] selector", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449093189", "createdAt": "2020-07-02T15:35:09Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -1,24 +1,149 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n-\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+  tick,\n+} from '@angular/core/testing';\n+import {DebugElement} from '@angular/core';\n import {AddLocationComponent} from './add-location.component';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrModule} from 'ngx-toastr';\n+import {BsModalService, ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {FormsModule, ReactiveFormsModule, NgForm} from '@angular/forms';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {HttpClientModule} from '@angular/common/http';\n+import {By} from '@angular/platform-browser';\n \n describe('AddLocationComponent', () => {\n   let component: AddLocationComponent;\n   let fixture: ComponentFixture<AddLocationComponent>;\n+  let form: DebugElement;\n+  let submitLocation: DebugElement;\n+  let locationCustomIde1: DebugElement;\n+  let locationNamee1: DebugElement;\n+  let locationDescriptione1: DebugElement;\n \n-  beforeEach(async(async () => {\n-    await TestBed.configureTestingModule({\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n       declarations: [AddLocationComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        HttpClientModule,\n+        FormsModule,\n+        ReactiveFormsModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [NgForm, EntityService, LocationService, BsModalService],\n+    });\n   }));\n \n-  beforeEach(() => {\n+  beforeEach(async(() => {\n     fixture = TestBed.createComponent(AddLocationComponent);\n     component = fixture.componentInstance;\n+    form = fixture.debugElement.query(By.css('form'));\n+    submitLocation = fixture.debugElement.query(\n+      By.css('button[type=\"submit\"]'),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA5NTc3Ng==", "bodyText": "What is this test for? You're not testing the logic of this component. Please remove.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449095776", "createdAt": "2020-07-02T15:37:22Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -1,24 +1,149 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n-\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+  tick,\n+} from '@angular/core/testing';\n+import {DebugElement} from '@angular/core';\n import {AddLocationComponent} from './add-location.component';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrModule} from 'ngx-toastr';\n+import {BsModalService, ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {FormsModule, ReactiveFormsModule, NgForm} from '@angular/forms';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {HttpClientModule} from '@angular/common/http';\n+import {By} from '@angular/platform-browser';\n \n describe('AddLocationComponent', () => {\n   let component: AddLocationComponent;\n   let fixture: ComponentFixture<AddLocationComponent>;\n+  let form: DebugElement;\n+  let submitLocation: DebugElement;\n+  let locationCustomIde1: DebugElement;\n+  let locationNamee1: DebugElement;\n+  let locationDescriptione1: DebugElement;\n \n-  beforeEach(async(async () => {\n-    await TestBed.configureTestingModule({\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n       declarations: [AddLocationComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        HttpClientModule,\n+        FormsModule,\n+        ReactiveFormsModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [NgForm, EntityService, LocationService, BsModalService],\n+    });\n   }));\n \n-  beforeEach(() => {\n+  beforeEach(async(() => {\n     fixture = TestBed.createComponent(AddLocationComponent);\n     component = fixture.componentInstance;\n+    form = fixture.debugElement.query(By.css('form'));\n+    submitLocation = fixture.debugElement.query(\n+      By.css('button[type=\"submit\"]'),\n+    );\n+    locationCustomIde1 = fixture.debugElement.query(\n+      By.css('input[id=locationCustomId]'),\n+    );\n+    locationNamee1 = fixture.debugElement.query(\n+      By.css('input[id=locationName]'),\n+    );\n+    locationDescriptione1 = fixture.debugElement.query(\n+      By.css('input[id=locationDescription]'),\n+    );\n+\n     fixture.detectChanges();\n-  });\n+  }));\n \n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+  it('should not create a template-driven form when ngNoForm is used', () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE2OTYxMQ==", "bodyText": "Use a pipe and async. Otherwise you need to unsubscribe.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449169611", "createdAt": "2020-07-02T17:31:39Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.ts", "diffHunk": "@@ -1,8 +1,37 @@\n-import {Component} from '@angular/core';\n+import {Component, Input, Output, EventEmitter} from '@angular/core';\n+import {Router} from '@angular/router';\n+import {Location} from '../shared/location.model';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+import {ApiResponse} from 'src/app/entity/error.model';\n+import {ApiSuccessResponse} from 'src/app/entity/sucess.model';\n \n @Component({\n   selector: 'location-add',\n   templateUrl: './add-location.component.html',\n   styleUrls: ['./add-location.component.scss'],\n })\n-export class AddLocationComponent {}\n+export class AddLocationComponent {\n+  @Input() enabled = true;\n+  @Output() onFormSubmit: EventEmitter<unknown> = new EventEmitter<unknown>();\n+  location: Location = new Location();\n+  constructor(\n+    private readonly router: Router,\n+    private readonly locationService: LocationService,\n+    private readonly toastr: ToastrService,\n+  ) {}\n+\n+  addLocation(): void {\n+    this.locationService.addLocation(this.location).subscribe(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE3MDAwNg==", "bodyText": "This isn't unknown, it's Location.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449170006", "createdAt": "2020-07-02T17:32:25Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/shared/location.service.ts", "diffHunk": "@@ -2,12 +2,16 @@ import {Injectable} from '@angular/core';\n import {EntityService} from '../../../service/entity.service';\n import {Observable} from 'rxjs';\n import {Location} from '../shared/location.model';\n+\n @Injectable({\n   providedIn: 'root',\n })\n export class LocationService {\n-  constructor(private readonly entityService: EntityService<Location>) {}\n-  getLocations(): Observable<Location[]> {\n+  constructor(private readonly entityService: EntityService<unknown>) {}\n+  getLocations(): Observable<unknown[]> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE3MDUzNw==", "bodyText": "I assume that this is why you changed the type to unknown. If post isn't returning the created Location then you need to change the type in entityService to something else. You also don't need to stringify, the http client will take care of that for you.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449170537", "createdAt": "2020-07-02T17:33:29Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/shared/location.service.ts", "diffHunk": "@@ -2,12 +2,16 @@ import {Injectable} from '@angular/core';\n import {EntityService} from '../../../service/entity.service';\n import {Observable} from 'rxjs';\n import {Location} from '../shared/location.model';\n+\n @Injectable({\n   providedIn: 'root',\n })\n export class LocationService {\n-  constructor(private readonly entityService: EntityService<Location>) {}\n-  getLocations(): Observable<Location[]> {\n+  constructor(private readonly entityService: EntityService<unknown>) {}\n+  getLocations(): Observable<unknown[]> {\n     return this.entityService.getCollection('locations');\n   }\n+  addLocation(location: Location): Observable<unknown> {\n+    return this.entityService.post(JSON.stringify(location), 'locations');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE3MDg4MA==", "bodyText": "Formatting", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449170880", "createdAt": "2020-07-02T17:34:08Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/assets/svgs/back-arrow.svg", "diffHunk": "@@ -0,0 +1,4 @@\n+<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE3MTc0OA==", "bodyText": "The service doesn't have mandatory field logic. The test is effectively the same as the previous test. Please remove.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449171748", "createdAt": "2020-07-02T17:35:50Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/shared/location.service.spec.ts", "diffHunk": "@@ -118,4 +150,121 @@ describe('LocationService', () => {\n       },\n     );\n   }));\n+\n+  it('add location should return an error when the server returns a 400 ', fakeAsync(() => {\n+    const entityServicespy = jasmine.createSpyObj<EntityService<Location>>(\n+      'EntityService',\n+      ['post'],\n+    );\n+    locationService = new LocationService(entityServicespy);\n+    const errorResponses: ApiResponse = {\n+      error: {\n+        userMessage: 'customId already exists',\n+        type: 'error',\n+        detailMessage: 'customId already exists',\n+      },\n+    };\n+\n+    entityServicespy.post.and.returnValue(throwError(errorResponses));\n+    tick(40);\n+    locationService.addLocation(expectedNewPostData).subscribe(\n+      () => fail('expected an error'),\n+      (error: ApiResponse) => {\n+        expect(error.error.userMessage).toBe('customId already exists');\n+      },\n+    );\n+  }));\n+  it('add location should return an error when mandatory field customId is empty/null ', fakeAsync(() => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE3MTgxMQ==", "bodyText": "Same here, remove.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449171811", "createdAt": "2020-07-02T17:35:57Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/shared/location.service.spec.ts", "diffHunk": "@@ -118,4 +150,121 @@ describe('LocationService', () => {\n       },\n     );\n   }));\n+\n+  it('add location should return an error when the server returns a 400 ', fakeAsync(() => {\n+    const entityServicespy = jasmine.createSpyObj<EntityService<Location>>(\n+      'EntityService',\n+      ['post'],\n+    );\n+    locationService = new LocationService(entityServicespy);\n+    const errorResponses: ApiResponse = {\n+      error: {\n+        userMessage: 'customId already exists',\n+        type: 'error',\n+        detailMessage: 'customId already exists',\n+      },\n+    };\n+\n+    entityServicespy.post.and.returnValue(throwError(errorResponses));\n+    tick(40);\n+    locationService.addLocation(expectedNewPostData).subscribe(\n+      () => fail('expected an error'),\n+      (error: ApiResponse) => {\n+        expect(error.error.userMessage).toBe('customId already exists');\n+      },\n+    );\n+  }));\n+  it('add location should return an error when mandatory field customId is empty/null ', fakeAsync(() => {\n+    const entityServicespy = jasmine.createSpyObj<EntityService<Location>>(\n+      'EntityService',\n+      ['post'],\n+    );\n+    const expectedMissingPostData = {\n+      id: 0,\n+      status: '0',\n+      customId: '',\n+      name: 'Location Name',\n+      description: 'location Decription',\n+      studiesCount: 0,\n+    };\n+    locationService = new LocationService(entityServicespy);\n+    const errorResponses: ApiResponse = {\n+      error: {\n+        userMessage: 'Missing required argument',\n+        type: 'error',\n+        detailMessage: 'Missing required argument',\n+      },\n+    };\n+\n+    entityServicespy.post.and.returnValue(throwError(errorResponses));\n+    tick(40);\n+    locationService.addLocation(expectedMissingPostData).subscribe(\n+      () => fail('expected an error'),\n+      (error: ApiResponse) => {\n+        expect(error.error.userMessage).toBe('Missing required argument');\n+      },\n+    );\n+  }));\n+  it('add location should return an error when mandatory name field is empty/null ', fakeAsync(() => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 127}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE3MTg3OA==", "bodyText": "Same here", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449171878", "createdAt": "2020-07-02T17:36:04Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/shared/location.service.spec.ts", "diffHunk": "@@ -118,4 +150,121 @@ describe('LocationService', () => {\n       },\n     );\n   }));\n+\n+  it('add location should return an error when the server returns a 400 ', fakeAsync(() => {\n+    const entityServicespy = jasmine.createSpyObj<EntityService<Location>>(\n+      'EntityService',\n+      ['post'],\n+    );\n+    locationService = new LocationService(entityServicespy);\n+    const errorResponses: ApiResponse = {\n+      error: {\n+        userMessage: 'customId already exists',\n+        type: 'error',\n+        detailMessage: 'customId already exists',\n+      },\n+    };\n+\n+    entityServicespy.post.and.returnValue(throwError(errorResponses));\n+    tick(40);\n+    locationService.addLocation(expectedNewPostData).subscribe(\n+      () => fail('expected an error'),\n+      (error: ApiResponse) => {\n+        expect(error.error.userMessage).toBe('customId already exists');\n+      },\n+    );\n+  }));\n+  it('add location should return an error when mandatory field customId is empty/null ', fakeAsync(() => {\n+    const entityServicespy = jasmine.createSpyObj<EntityService<Location>>(\n+      'EntityService',\n+      ['post'],\n+    );\n+    const expectedMissingPostData = {\n+      id: 0,\n+      status: '0',\n+      customId: '',\n+      name: 'Location Name',\n+      description: 'location Decription',\n+      studiesCount: 0,\n+    };\n+    locationService = new LocationService(entityServicespy);\n+    const errorResponses: ApiResponse = {\n+      error: {\n+        userMessage: 'Missing required argument',\n+        type: 'error',\n+        detailMessage: 'Missing required argument',\n+      },\n+    };\n+\n+    entityServicespy.post.and.returnValue(throwError(errorResponses));\n+    tick(40);\n+    locationService.addLocation(expectedMissingPostData).subscribe(\n+      () => fail('expected an error'),\n+      (error: ApiResponse) => {\n+        expect(error.error.userMessage).toBe('Missing required argument');\n+      },\n+    );\n+  }));\n+  it('add location should return an error when mandatory name field is empty/null ', fakeAsync(() => {\n+    const entityServicespy = jasmine.createSpyObj<EntityService<Location>>(\n+      'EntityService',\n+      ['post'],\n+    );\n+    const expectedMissingPostData = {\n+      id: 0,\n+      status: '0',\n+      customId: 'customID',\n+      name: '',\n+      description: 'location Decription',\n+      studiesCount: 0,\n+    };\n+    locationService = new LocationService(entityServicespy);\n+    const errorResponses: ApiResponse = {\n+      error: {\n+        userMessage: 'Missing required argument',\n+        type: 'error',\n+        detailMessage: 'Missing required argument',\n+      },\n+    };\n+\n+    entityServicespy.post.and.returnValue(throwError(errorResponses));\n+    tick(40);\n+    locationService.addLocation(expectedMissingPostData).subscribe(\n+      () => fail('expected an error'),\n+      (error: ApiResponse) => {\n+        expect(error.error.userMessage).toBe('Missing required argument');\n+      },\n+    );\n+  }));\n+  it('add location should return an error when mandatory description field is empty/null ', fakeAsync(() => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 158}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE3MjQwNw==", "bodyText": "Use more meaningful variable names, like expectedLocation.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449172407", "createdAt": "2020-07-02T17:37:11Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/shared/location.service.spec.ts", "diffHunk": "@@ -29,9 +27,20 @@ describe('LocationService', () => {\n       description: 'location-descp-updated',\n       status: '0',\n       studiesCount: 0,\n-      studies: [],\n     },\n   ];\n+  const expectedNewPostData = {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE3MjYzOA==", "bodyText": "If you are converting this to a class you have to call new Location in LocationService like I told you", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449172638", "createdAt": "2020-07-02T17:37:40Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/shared/location.model.ts", "diffHunk": "@@ -1,13 +1,13 @@\n-export interface Location {\n-  id: number;\n+export class Location {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE4MDEyMA==", "bodyText": "I don't really like template-driven forms because you end up with hacks like this. But that's just my opinion. If you want to use template driven forms though you should be making your assertions against the DOM. So instead of checking if it's valid check if the error message that you want is displayed.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449180120", "createdAt": "2020-07-02T17:52:27Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -1,24 +1,149 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n-\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+  tick,\n+} from '@angular/core/testing';\n+import {DebugElement} from '@angular/core';\n import {AddLocationComponent} from './add-location.component';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrModule} from 'ngx-toastr';\n+import {BsModalService, ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {FormsModule, ReactiveFormsModule, NgForm} from '@angular/forms';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {HttpClientModule} from '@angular/common/http';\n+import {By} from '@angular/platform-browser';\n \n describe('AddLocationComponent', () => {\n   let component: AddLocationComponent;\n   let fixture: ComponentFixture<AddLocationComponent>;\n+  let form: DebugElement;\n+  let submitLocation: DebugElement;\n+  let locationCustomIde1: DebugElement;\n+  let locationNamee1: DebugElement;\n+  let locationDescriptione1: DebugElement;\n \n-  beforeEach(async(async () => {\n-    await TestBed.configureTestingModule({\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n       declarations: [AddLocationComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        HttpClientModule,\n+        FormsModule,\n+        ReactiveFormsModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [NgForm, EntityService, LocationService, BsModalService],\n+    });\n   }));\n \n-  beforeEach(() => {\n+  beforeEach(async(() => {\n     fixture = TestBed.createComponent(AddLocationComponent);\n     component = fixture.componentInstance;\n+    form = fixture.debugElement.query(By.css('form'));\n+    submitLocation = fixture.debugElement.query(\n+      By.css('button[type=\"submit\"]'),\n+    );\n+    locationCustomIde1 = fixture.debugElement.query(\n+      By.css('input[id=locationCustomId]'),\n+    );\n+    locationNamee1 = fixture.debugElement.query(\n+      By.css('input[id=locationName]'),\n+    );\n+    locationDescriptione1 = fixture.debugElement.query(\n+      By.css('input[id=locationDescription]'),\n+    );\n+\n     fixture.detectChanges();\n-  });\n+  }));\n \n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+  it('should not create a template-driven form when ngNoForm is used', () => {\n+    fixture.detectChanges();\n+    expect(fixture.debugElement.children[0].providerTokens.length).toEqual(0);\n+  });\n+  it('Locations value to input properties on form load', () => {\n+    const submitButton = submitLocation.nativeElement as HTMLInputElement;\n+    component.enabled = false;\n+    fixture.detectChanges();\n+    expect(submitButton.disabled).toBeTruthy();\n+  });\n+  it('should add novalidate by default to form element', fakeAsync(() => {\n+    fixture.detectChanges();\n+    tick();\n+    const formTest = form.nativeElement as HTMLFormElement;\n+    expect(formTest.getAttribute('novalidate')).toEqual('');\n+  }));\n+\n+  it('should set status classes with ngModelGroup and ngForm', fakeAsync(() => {\n+    fixture.detectChanges();\n+\n+    const input = fixture.debugElement.query(By.css('input'));\n+    const inputFormElement = input.nativeElement as HTMLElement;\n+\n+    void fixture.whenStable().then(() => {\n+      fixture.detectChanges();\n+\n+      expect(inputFormElement.classList.length).toEqual(4);\n+      expect(inputFormElement.classList.value).toEqual(\n+        'form-control ng-untouched ng-pristine ng-invalid',\n+      );\n+\n+      dispatchEvent(new Event('input'));\n+      tick();\n+      fixture.detectChanges();\n+    });\n+  }));\n+\n+  it('Entering value in input controls and emit output events', fakeAsync(() => {\n+    fixture.componentInstance.location.customId = 'customid3';\n+    fixture.componentInstance.location.name = 'Location Name';\n+    fixture.componentInstance.location.description =\n+      'This is location Description';\n+    void fixture.whenStable().then(() => {\n+      const submitButton = submitLocation.nativeElement as HTMLInputElement;\n+      const customIdInput = locationCustomIde1.nativeElement as HTMLInputElement;\n+      const nameInput = locationNamee1.nativeElement as HTMLInputElement;\n+      const descriptionInput = locationDescriptione1.nativeElement as HTMLInputElement;\n+      customIdInput.value = 'customid3';\n+      nameInput.value = 'Location Name';\n+      descriptionInput.value = 'This is location Description';\n+      dispatchEvent(new Event('input'));\n+      fixture.detectChanges();\n+      tick();\n+      submitButton.click();\n+      fixture.detectChanges();\n+      expect(component.location.customId).toEqual('customid3');\n+      expect(component.location.name).toEqual('Location Name');\n+      expect(component.location.description).toEqual(\n+        'This is location Description',\n+      );\n+    });\n+  }));\n+\n+  it('should reset the form submit state when reset button is clicked', fakeAsync(() => {\n+    const forms = fixture.debugElement.children[0].injector.get(NgForm);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 143}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE4MDI5NA==", "bodyText": "This isn't what this test is doing, the state doesn't change.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449180294", "createdAt": "2020-07-02T17:52:47Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -1,24 +1,149 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n-\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+  tick,\n+} from '@angular/core/testing';\n+import {DebugElement} from '@angular/core';\n import {AddLocationComponent} from './add-location.component';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrModule} from 'ngx-toastr';\n+import {BsModalService, ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {FormsModule, ReactiveFormsModule, NgForm} from '@angular/forms';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {HttpClientModule} from '@angular/common/http';\n+import {By} from '@angular/platform-browser';\n \n describe('AddLocationComponent', () => {\n   let component: AddLocationComponent;\n   let fixture: ComponentFixture<AddLocationComponent>;\n+  let form: DebugElement;\n+  let submitLocation: DebugElement;\n+  let locationCustomIde1: DebugElement;\n+  let locationNamee1: DebugElement;\n+  let locationDescriptione1: DebugElement;\n \n-  beforeEach(async(async () => {\n-    await TestBed.configureTestingModule({\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n       declarations: [AddLocationComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        HttpClientModule,\n+        FormsModule,\n+        ReactiveFormsModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [NgForm, EntityService, LocationService, BsModalService],\n+    });\n   }));\n \n-  beforeEach(() => {\n+  beforeEach(async(() => {\n     fixture = TestBed.createComponent(AddLocationComponent);\n     component = fixture.componentInstance;\n+    form = fixture.debugElement.query(By.css('form'));\n+    submitLocation = fixture.debugElement.query(\n+      By.css('button[type=\"submit\"]'),\n+    );\n+    locationCustomIde1 = fixture.debugElement.query(\n+      By.css('input[id=locationCustomId]'),\n+    );\n+    locationNamee1 = fixture.debugElement.query(\n+      By.css('input[id=locationName]'),\n+    );\n+    locationDescriptione1 = fixture.debugElement.query(\n+      By.css('input[id=locationDescription]'),\n+    );\n+\n     fixture.detectChanges();\n-  });\n+  }));\n \n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+  it('should not create a template-driven form when ngNoForm is used', () => {\n+    fixture.detectChanges();\n+    expect(fixture.debugElement.children[0].providerTokens.length).toEqual(0);\n+  });\n+  it('Locations value to input properties on form load', () => {\n+    const submitButton = submitLocation.nativeElement as HTMLInputElement;\n+    component.enabled = false;\n+    fixture.detectChanges();\n+    expect(submitButton.disabled).toBeTruthy();\n+  });\n+  it('should add novalidate by default to form element', fakeAsync(() => {\n+    fixture.detectChanges();\n+    tick();\n+    const formTest = form.nativeElement as HTMLFormElement;\n+    expect(formTest.getAttribute('novalidate')).toEqual('');\n+  }));\n+\n+  it('should set status classes with ngModelGroup and ngForm', fakeAsync(() => {\n+    fixture.detectChanges();\n+\n+    const input = fixture.debugElement.query(By.css('input'));\n+    const inputFormElement = input.nativeElement as HTMLElement;\n+\n+    void fixture.whenStable().then(() => {\n+      fixture.detectChanges();\n+\n+      expect(inputFormElement.classList.length).toEqual(4);\n+      expect(inputFormElement.classList.value).toEqual(\n+        'form-control ng-untouched ng-pristine ng-invalid',\n+      );\n+\n+      dispatchEvent(new Event('input'));\n+      tick();\n+      fixture.detectChanges();\n+    });\n+  }));\n+\n+  it('Entering value in input controls and emit output events', fakeAsync(() => {\n+    fixture.componentInstance.location.customId = 'customid3';\n+    fixture.componentInstance.location.name = 'Location Name';\n+    fixture.componentInstance.location.description =\n+      'This is location Description';\n+    void fixture.whenStable().then(() => {\n+      const submitButton = submitLocation.nativeElement as HTMLInputElement;\n+      const customIdInput = locationCustomIde1.nativeElement as HTMLInputElement;\n+      const nameInput = locationNamee1.nativeElement as HTMLInputElement;\n+      const descriptionInput = locationDescriptione1.nativeElement as HTMLInputElement;\n+      customIdInput.value = 'customid3';\n+      nameInput.value = 'Location Name';\n+      descriptionInput.value = 'This is location Description';\n+      dispatchEvent(new Event('input'));\n+      fixture.detectChanges();\n+      tick();\n+      submitButton.click();\n+      fixture.detectChanges();\n+      expect(component.location.customId).toEqual('customid3');\n+      expect(component.location.name).toEqual('Location Name');\n+      expect(component.location.description).toEqual(\n+        'This is location Description',\n+      );\n+    });\n+  }));\n+\n+  it('should reset the form submit state when reset button is clicked', fakeAsync(() => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 142}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE4MDYzNg==", "bodyText": "These tests are easier to read using async/await instead of .then", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449180636", "createdAt": "2020-07-02T17:53:29Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -1,24 +1,149 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n-\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+  tick,\n+} from '@angular/core/testing';\n+import {DebugElement} from '@angular/core';\n import {AddLocationComponent} from './add-location.component';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrModule} from 'ngx-toastr';\n+import {BsModalService, ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {FormsModule, ReactiveFormsModule, NgForm} from '@angular/forms';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {HttpClientModule} from '@angular/common/http';\n+import {By} from '@angular/platform-browser';\n \n describe('AddLocationComponent', () => {\n   let component: AddLocationComponent;\n   let fixture: ComponentFixture<AddLocationComponent>;\n+  let form: DebugElement;\n+  let submitLocation: DebugElement;\n+  let locationCustomIde1: DebugElement;\n+  let locationNamee1: DebugElement;\n+  let locationDescriptione1: DebugElement;\n \n-  beforeEach(async(async () => {\n-    await TestBed.configureTestingModule({\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n       declarations: [AddLocationComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        HttpClientModule,\n+        FormsModule,\n+        ReactiveFormsModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [NgForm, EntityService, LocationService, BsModalService],\n+    });\n   }));\n \n-  beforeEach(() => {\n+  beforeEach(async(() => {\n     fixture = TestBed.createComponent(AddLocationComponent);\n     component = fixture.componentInstance;\n+    form = fixture.debugElement.query(By.css('form'));\n+    submitLocation = fixture.debugElement.query(\n+      By.css('button[type=\"submit\"]'),\n+    );\n+    locationCustomIde1 = fixture.debugElement.query(\n+      By.css('input[id=locationCustomId]'),\n+    );\n+    locationNamee1 = fixture.debugElement.query(\n+      By.css('input[id=locationName]'),\n+    );\n+    locationDescriptione1 = fixture.debugElement.query(\n+      By.css('input[id=locationDescription]'),\n+    );\n+\n     fixture.detectChanges();\n-  });\n+  }));\n \n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+  it('should not create a template-driven form when ngNoForm is used', () => {\n+    fixture.detectChanges();\n+    expect(fixture.debugElement.children[0].providerTokens.length).toEqual(0);\n+  });\n+  it('Locations value to input properties on form load', () => {\n+    const submitButton = submitLocation.nativeElement as HTMLInputElement;\n+    component.enabled = false;\n+    fixture.detectChanges();\n+    expect(submitButton.disabled).toBeTruthy();\n+  });\n+  it('should add novalidate by default to form element', fakeAsync(() => {\n+    fixture.detectChanges();\n+    tick();\n+    const formTest = form.nativeElement as HTMLFormElement;\n+    expect(formTest.getAttribute('novalidate')).toEqual('');\n+  }));\n+\n+  it('should set status classes with ngModelGroup and ngForm', fakeAsync(() => {\n+    fixture.detectChanges();\n+\n+    const input = fixture.debugElement.query(By.css('input'));\n+    const inputFormElement = input.nativeElement as HTMLElement;\n+\n+    void fixture.whenStable().then(() => {\n+      fixture.detectChanges();\n+\n+      expect(inputFormElement.classList.length).toEqual(4);\n+      expect(inputFormElement.classList.value).toEqual(\n+        'form-control ng-untouched ng-pristine ng-invalid',\n+      );\n+\n+      dispatchEvent(new Event('input'));\n+      tick();\n+      fixture.detectChanges();\n+    });\n+  }));\n+\n+  it('Entering value in input controls and emit output events', fakeAsync(() => {\n+    fixture.componentInstance.location.customId = 'customid3';\n+    fixture.componentInstance.location.name = 'Location Name';\n+    fixture.componentInstance.location.description =\n+      'This is location Description';\n+    void fixture.whenStable().then(() => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 121}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE4MTM5NQ==", "bodyText": "Don't test the Angular framework. Please remove this test.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449181395", "createdAt": "2020-07-02T17:54:58Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -1,24 +1,149 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n-\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+  tick,\n+} from '@angular/core/testing';\n+import {DebugElement} from '@angular/core';\n import {AddLocationComponent} from './add-location.component';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrModule} from 'ngx-toastr';\n+import {BsModalService, ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {FormsModule, ReactiveFormsModule, NgForm} from '@angular/forms';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {HttpClientModule} from '@angular/common/http';\n+import {By} from '@angular/platform-browser';\n \n describe('AddLocationComponent', () => {\n   let component: AddLocationComponent;\n   let fixture: ComponentFixture<AddLocationComponent>;\n+  let form: DebugElement;\n+  let submitLocation: DebugElement;\n+  let locationCustomIde1: DebugElement;\n+  let locationNamee1: DebugElement;\n+  let locationDescriptione1: DebugElement;\n \n-  beforeEach(async(async () => {\n-    await TestBed.configureTestingModule({\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n       declarations: [AddLocationComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        HttpClientModule,\n+        FormsModule,\n+        ReactiveFormsModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [NgForm, EntityService, LocationService, BsModalService],\n+    });\n   }));\n \n-  beforeEach(() => {\n+  beforeEach(async(() => {\n     fixture = TestBed.createComponent(AddLocationComponent);\n     component = fixture.componentInstance;\n+    form = fixture.debugElement.query(By.css('form'));\n+    submitLocation = fixture.debugElement.query(\n+      By.css('button[type=\"submit\"]'),\n+    );\n+    locationCustomIde1 = fixture.debugElement.query(\n+      By.css('input[id=locationCustomId]'),\n+    );\n+    locationNamee1 = fixture.debugElement.query(\n+      By.css('input[id=locationName]'),\n+    );\n+    locationDescriptione1 = fixture.debugElement.query(\n+      By.css('input[id=locationDescription]'),\n+    );\n+\n     fixture.detectChanges();\n-  });\n+  }));\n \n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+  it('should not create a template-driven form when ngNoForm is used', () => {\n+    fixture.detectChanges();\n+    expect(fixture.debugElement.children[0].providerTokens.length).toEqual(0);\n+  });\n+  it('Locations value to input properties on form load', () => {\n+    const submitButton = submitLocation.nativeElement as HTMLInputElement;\n+    component.enabled = false;\n+    fixture.detectChanges();\n+    expect(submitButton.disabled).toBeTruthy();\n+  });\n+  it('should add novalidate by default to form element', fakeAsync(() => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE4MTU4OA==", "bodyText": "This isn't what this test is testing", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449181588", "createdAt": "2020-07-02T17:55:22Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -1,24 +1,149 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n-\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+  tick,\n+} from '@angular/core/testing';\n+import {DebugElement} from '@angular/core';\n import {AddLocationComponent} from './add-location.component';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrModule} from 'ngx-toastr';\n+import {BsModalService, ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {FormsModule, ReactiveFormsModule, NgForm} from '@angular/forms';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {HttpClientModule} from '@angular/common/http';\n+import {By} from '@angular/platform-browser';\n \n describe('AddLocationComponent', () => {\n   let component: AddLocationComponent;\n   let fixture: ComponentFixture<AddLocationComponent>;\n+  let form: DebugElement;\n+  let submitLocation: DebugElement;\n+  let locationCustomIde1: DebugElement;\n+  let locationNamee1: DebugElement;\n+  let locationDescriptione1: DebugElement;\n \n-  beforeEach(async(async () => {\n-    await TestBed.configureTestingModule({\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n       declarations: [AddLocationComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        HttpClientModule,\n+        FormsModule,\n+        ReactiveFormsModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [NgForm, EntityService, LocationService, BsModalService],\n+    });\n   }));\n \n-  beforeEach(() => {\n+  beforeEach(async(() => {\n     fixture = TestBed.createComponent(AddLocationComponent);\n     component = fixture.componentInstance;\n+    form = fixture.debugElement.query(By.css('form'));\n+    submitLocation = fixture.debugElement.query(\n+      By.css('button[type=\"submit\"]'),\n+    );\n+    locationCustomIde1 = fixture.debugElement.query(\n+      By.css('input[id=locationCustomId]'),\n+    );\n+    locationNamee1 = fixture.debugElement.query(\n+      By.css('input[id=locationName]'),\n+    );\n+    locationDescriptione1 = fixture.debugElement.query(\n+      By.css('input[id=locationDescription]'),\n+    );\n+\n     fixture.detectChanges();\n-  });\n+  }));\n \n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+  it('should not create a template-driven form when ngNoForm is used', () => {\n+    fixture.detectChanges();\n+    expect(fixture.debugElement.children[0].providerTokens.length).toEqual(0);\n+  });\n+  it('Locations value to input properties on form load', () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE4MTc5Mw==", "bodyText": "Don't test the Angular framework. Please remove this test.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449181793", "createdAt": "2020-07-02T17:55:49Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -1,24 +1,149 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n-\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+  tick,\n+} from '@angular/core/testing';\n+import {DebugElement} from '@angular/core';\n import {AddLocationComponent} from './add-location.component';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrModule} from 'ngx-toastr';\n+import {BsModalService, ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {FormsModule, ReactiveFormsModule, NgForm} from '@angular/forms';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {HttpClientModule} from '@angular/common/http';\n+import {By} from '@angular/platform-browser';\n \n describe('AddLocationComponent', () => {\n   let component: AddLocationComponent;\n   let fixture: ComponentFixture<AddLocationComponent>;\n+  let form: DebugElement;\n+  let submitLocation: DebugElement;\n+  let locationCustomIde1: DebugElement;\n+  let locationNamee1: DebugElement;\n+  let locationDescriptione1: DebugElement;\n \n-  beforeEach(async(async () => {\n-    await TestBed.configureTestingModule({\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n       declarations: [AddLocationComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        HttpClientModule,\n+        FormsModule,\n+        ReactiveFormsModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [NgForm, EntityService, LocationService, BsModalService],\n+    });\n   }));\n \n-  beforeEach(() => {\n+  beforeEach(async(() => {\n     fixture = TestBed.createComponent(AddLocationComponent);\n     component = fixture.componentInstance;\n+    form = fixture.debugElement.query(By.css('form'));\n+    submitLocation = fixture.debugElement.query(\n+      By.css('button[type=\"submit\"]'),\n+    );\n+    locationCustomIde1 = fixture.debugElement.query(\n+      By.css('input[id=locationCustomId]'),\n+    );\n+    locationNamee1 = fixture.debugElement.query(\n+      By.css('input[id=locationName]'),\n+    );\n+    locationDescriptione1 = fixture.debugElement.query(\n+      By.css('input[id=locationDescription]'),\n+    );\n+\n     fixture.detectChanges();\n-  });\n+  }));\n \n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+  it('should not create a template-driven form when ngNoForm is used', () => {\n+    fixture.detectChanges();\n+    expect(fixture.debugElement.children[0].providerTokens.length).toEqual(0);\n+  });\n+  it('Locations value to input properties on form load', () => {\n+    const submitButton = submitLocation.nativeElement as HTMLInputElement;\n+    component.enabled = false;\n+    fixture.detectChanges();\n+    expect(submitButton.disabled).toBeTruthy();\n+  });\n+  it('should add novalidate by default to form element', fakeAsync(() => {\n+    fixture.detectChanges();\n+    tick();\n+    const formTest = form.nativeElement as HTMLFormElement;\n+    expect(formTest.getAttribute('novalidate')).toEqual('');\n+  }));\n+\n+  it('should set status classes with ngModelGroup and ngForm', fakeAsync(() => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE4MjU1NQ==", "bodyText": "There is no output check in this test.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449182555", "createdAt": "2020-07-02T17:57:16Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -1,24 +1,149 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n-\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+  tick,\n+} from '@angular/core/testing';\n+import {DebugElement} from '@angular/core';\n import {AddLocationComponent} from './add-location.component';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrModule} from 'ngx-toastr';\n+import {BsModalService, ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {FormsModule, ReactiveFormsModule, NgForm} from '@angular/forms';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {HttpClientModule} from '@angular/common/http';\n+import {By} from '@angular/platform-browser';\n \n describe('AddLocationComponent', () => {\n   let component: AddLocationComponent;\n   let fixture: ComponentFixture<AddLocationComponent>;\n+  let form: DebugElement;\n+  let submitLocation: DebugElement;\n+  let locationCustomIde1: DebugElement;\n+  let locationNamee1: DebugElement;\n+  let locationDescriptione1: DebugElement;\n \n-  beforeEach(async(async () => {\n-    await TestBed.configureTestingModule({\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n       declarations: [AddLocationComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        HttpClientModule,\n+        FormsModule,\n+        ReactiveFormsModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [NgForm, EntityService, LocationService, BsModalService],\n+    });\n   }));\n \n-  beforeEach(() => {\n+  beforeEach(async(() => {\n     fixture = TestBed.createComponent(AddLocationComponent);\n     component = fixture.componentInstance;\n+    form = fixture.debugElement.query(By.css('form'));\n+    submitLocation = fixture.debugElement.query(\n+      By.css('button[type=\"submit\"]'),\n+    );\n+    locationCustomIde1 = fixture.debugElement.query(\n+      By.css('input[id=locationCustomId]'),\n+    );\n+    locationNamee1 = fixture.debugElement.query(\n+      By.css('input[id=locationName]'),\n+    );\n+    locationDescriptione1 = fixture.debugElement.query(\n+      By.css('input[id=locationDescription]'),\n+    );\n+\n     fixture.detectChanges();\n-  });\n+  }));\n \n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+  it('should not create a template-driven form when ngNoForm is used', () => {\n+    fixture.detectChanges();\n+    expect(fixture.debugElement.children[0].providerTokens.length).toEqual(0);\n+  });\n+  it('Locations value to input properties on form load', () => {\n+    const submitButton = submitLocation.nativeElement as HTMLInputElement;\n+    component.enabled = false;\n+    fixture.detectChanges();\n+    expect(submitButton.disabled).toBeTruthy();\n+  });\n+  it('should add novalidate by default to form element', fakeAsync(() => {\n+    fixture.detectChanges();\n+    tick();\n+    const formTest = form.nativeElement as HTMLFormElement;\n+    expect(formTest.getAttribute('novalidate')).toEqual('');\n+  }));\n+\n+  it('should set status classes with ngModelGroup and ngForm', fakeAsync(() => {\n+    fixture.detectChanges();\n+\n+    const input = fixture.debugElement.query(By.css('input'));\n+    const inputFormElement = input.nativeElement as HTMLElement;\n+\n+    void fixture.whenStable().then(() => {\n+      fixture.detectChanges();\n+\n+      expect(inputFormElement.classList.length).toEqual(4);\n+      expect(inputFormElement.classList.value).toEqual(\n+        'form-control ng-untouched ng-pristine ng-invalid',\n+      );\n+\n+      dispatchEvent(new Event('input'));\n+      tick();\n+      fixture.detectChanges();\n+    });\n+  }));\n+\n+  it('Entering value in input controls and emit output events', fakeAsync(() => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 116}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE4MjkyMw==", "bodyText": "If you're testing that submit works you should also be checking that the locationService was called.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449182923", "createdAt": "2020-07-02T17:58:01Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -1,24 +1,149 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n-\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+  tick,\n+} from '@angular/core/testing';\n+import {DebugElement} from '@angular/core';\n import {AddLocationComponent} from './add-location.component';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrModule} from 'ngx-toastr';\n+import {BsModalService, ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {FormsModule, ReactiveFormsModule, NgForm} from '@angular/forms';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {HttpClientModule} from '@angular/common/http';\n+import {By} from '@angular/platform-browser';\n \n describe('AddLocationComponent', () => {\n   let component: AddLocationComponent;\n   let fixture: ComponentFixture<AddLocationComponent>;\n+  let form: DebugElement;\n+  let submitLocation: DebugElement;\n+  let locationCustomIde1: DebugElement;\n+  let locationNamee1: DebugElement;\n+  let locationDescriptione1: DebugElement;\n \n-  beforeEach(async(async () => {\n-    await TestBed.configureTestingModule({\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n       declarations: [AddLocationComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        HttpClientModule,\n+        FormsModule,\n+        ReactiveFormsModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [NgForm, EntityService, LocationService, BsModalService],\n+    });\n   }));\n \n-  beforeEach(() => {\n+  beforeEach(async(() => {\n     fixture = TestBed.createComponent(AddLocationComponent);\n     component = fixture.componentInstance;\n+    form = fixture.debugElement.query(By.css('form'));\n+    submitLocation = fixture.debugElement.query(\n+      By.css('button[type=\"submit\"]'),\n+    );\n+    locationCustomIde1 = fixture.debugElement.query(\n+      By.css('input[id=locationCustomId]'),\n+    );\n+    locationNamee1 = fixture.debugElement.query(\n+      By.css('input[id=locationName]'),\n+    );\n+    locationDescriptione1 = fixture.debugElement.query(\n+      By.css('input[id=locationDescription]'),\n+    );\n+\n     fixture.detectChanges();\n-  });\n+  }));\n \n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+  it('should not create a template-driven form when ngNoForm is used', () => {\n+    fixture.detectChanges();\n+    expect(fixture.debugElement.children[0].providerTokens.length).toEqual(0);\n+  });\n+  it('Locations value to input properties on form load', () => {\n+    const submitButton = submitLocation.nativeElement as HTMLInputElement;\n+    component.enabled = false;\n+    fixture.detectChanges();\n+    expect(submitButton.disabled).toBeTruthy();\n+  });\n+  it('should add novalidate by default to form element', fakeAsync(() => {\n+    fixture.detectChanges();\n+    tick();\n+    const formTest = form.nativeElement as HTMLFormElement;\n+    expect(formTest.getAttribute('novalidate')).toEqual('');\n+  }));\n+\n+  it('should set status classes with ngModelGroup and ngForm', fakeAsync(() => {\n+    fixture.detectChanges();\n+\n+    const input = fixture.debugElement.query(By.css('input'));\n+    const inputFormElement = input.nativeElement as HTMLElement;\n+\n+    void fixture.whenStable().then(() => {\n+      fixture.detectChanges();\n+\n+      expect(inputFormElement.classList.length).toEqual(4);\n+      expect(inputFormElement.classList.value).toEqual(\n+        'form-control ng-untouched ng-pristine ng-invalid',\n+      );\n+\n+      dispatchEvent(new Event('input'));\n+      tick();\n+      fixture.detectChanges();\n+    });\n+  }));\n+\n+  it('Entering value in input controls and emit output events', fakeAsync(() => {\n+    fixture.componentInstance.location.customId = 'customid3';\n+    fixture.componentInstance.location.name = 'Location Name';\n+    fixture.componentInstance.location.description =\n+      'This is location Description';\n+    void fixture.whenStable().then(() => {\n+      const submitButton = submitLocation.nativeElement as HTMLInputElement;\n+      const customIdInput = locationCustomIde1.nativeElement as HTMLInputElement;\n+      const nameInput = locationNamee1.nativeElement as HTMLInputElement;\n+      const descriptionInput = locationDescriptione1.nativeElement as HTMLInputElement;\n+      customIdInput.value = 'customid3';\n+      nameInput.value = 'Location Name';\n+      descriptionInput.value = 'This is location Description';\n+      dispatchEvent(new Event('input'));\n+      fixture.detectChanges();\n+      tick();\n+      submitButton.click();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 132}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE4MzE5Mw==", "bodyText": "This is never used.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449183193", "createdAt": "2020-07-02T17:58:32Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.ts", "diffHunk": "@@ -1,8 +1,37 @@\n-import {Component} from '@angular/core';\n+import {Component, Input, Output, EventEmitter} from '@angular/core';\n+import {Router} from '@angular/router';\n+import {Location} from '../shared/location.model';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+import {ApiResponse} from 'src/app/entity/error.model';\n+import {ApiSuccessResponse} from 'src/app/entity/sucess.model';\n \n @Component({\n   selector: 'location-add',\n   templateUrl: './add-location.component.html',\n   styleUrls: ['./add-location.component.scss'],\n })\n-export class AddLocationComponent {}\n+export class AddLocationComponent {\n+  @Input() enabled = true;\n+  @Output() onFormSubmit: EventEmitter<unknown> = new EventEmitter<unknown>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE4OTQ4OQ==", "bodyText": "401 is basically the same as 400. You don't need a test for every status code if you don't have any logic that cares", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r449189489", "createdAt": "2020-07-02T18:10:52Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/shared/location.service.spec.ts", "diffHunk": "@@ -118,4 +150,121 @@ describe('LocationService', () => {\n       },\n     );\n   }));\n+\n+  it('add location should return an error when the server returns a 400 ', fakeAsync(() => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 73}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f147ddf57726a488aec3858c64d8238fee488611", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f147ddf57726a488aec3858c64d8238fee488611", "committedDate": "2020-07-06T13:51:58Z", "message": "Location Model has been used in locationService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db3ac3d8199f25431303f2d9a9a68d10eecfed1f", "author": {"user": {"login": "rohithd-btc", "name": "Rohith D C"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/db3ac3d8199f25431303f2d9a9a68d10eecfed1f", "committedDate": "2020-07-06T17:05:36Z", "message": "Few code review comments has been resolved"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d8efce2a32993d9b7c72554b45814ab718ee0bc", "author": {"user": {"login": "rohithd-btc", "name": "Rohith D C"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8d8efce2a32993d9b7c72554b45814ab718ee0bc", "committedDate": "2020-07-06T17:39:47Z", "message": "Merge branch 'urwebapp-addlocation-implementation' of https://github.com/GoogleCloudPlatform/fda-mystudies into urwebapp-addlocation-implementation\n\n# Conflicts:\n#\tUR-web-app/src/app/site-coordinator/location/add-location/add-location.component.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "154be9ce20ba3ce7751e302f25a24e5676716756", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/154be9ce20ba3ce7751e302f25a24e5676716756", "committedDate": "2020-07-07T14:19:38Z", "message": "Merge branch 'develop' into urwebapp-addlocation-implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fae74cfe537a06cc5f60be6b8991708fdd47a71e", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fae74cfe537a06cc5f60be6b8991708fdd47a71e", "committedDate": "2020-07-07T17:23:27Z", "message": "code review comments has been resolved"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc098f48f81653aa74eb86fe2b3e514482b9c218", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bc098f48f81653aa74eb86fe2b3e514482b9c218", "committedDate": "2020-07-07T17:23:46Z", "message": "Chnaged test case name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1516b986848506affda69fb6c267b99dfdf8228a", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1516b986848506affda69fb6c267b99dfdf8228a", "committedDate": "2020-07-07T17:29:38Z", "message": "Reset Form test case has been removed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MTA1Mzgz", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#pullrequestreview-444105383", "createdAt": "2020-07-07T17:29:36Z", "commit": {"oid": "bc098f48f81653aa74eb86fe2b3e514482b9c218"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNzoyOTozNlrOGuIn9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxODozMzoyNVrOGuKy0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAyODk4MA==", "bodyText": "\"Successfully\" should not be capitalized.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r451028980", "createdAt": "2020-07-07T17:29:36Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.ts", "diffHunk": "@@ -12,23 +13,20 @@ import {ToastrService} from 'ngx-toastr';\n export class AddLocationComponent {\n   @Input() enabled = true;\n   location = <Location>{};\n+  sub: Subscription = new Subscription();\n   constructor(\n     private readonly router: Router,\n     private readonly locationService: LocationService,\n     private readonly toastr: ToastrService,\n   ) {}\n \n   addLocation(): void {\n-    this.locationService.addLocation(this.location).subscribe(\n-      (succesResponse: Location) => {\n-        const success = succesResponse.successBean;\n-        this.toastr.success(success.message);\n-        void this.router.navigate(['/coordinator/locations']);\n-      },\n-      (errorResponse: Location) => {\n-        const errs = errorResponse.error;\n-        this.toastr.error(errs.userMessage);\n-      },\n-    );\n+    this.sub = this.locationService.addLocation(this.location).subscribe(() => {\n+      this.toastr.success('New location added Successfully');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc098f48f81653aa74eb86fe2b3e514482b9c218"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAyOTU3Ng==", "bodyText": "Don't use capitals for local variables.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r451029576", "createdAt": "2020-07-07T17:30:33Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -47,49 +47,49 @@ describe('AddLocationComponent', () => {\n   beforeEach(async(() => {\n     fixture = TestBed.createComponent(AddLocationComponent);\n     component = fixture.componentInstance;\n-    submitLocation = fixture.debugElement.query(\n-      By.css('button[type=\"submit\"]'),\n-    );\n-    locationCustomIde1 = fixture.debugElement.query(\n-      By.css('input[id=locationCustomId]'),\n-    );\n-    locationNamee1 = fixture.debugElement.query(\n-      By.css('input[id=locationName]'),\n-    );\n-    locationDescriptione1 = fixture.debugElement.query(\n-      By.css('input[id=locationDescription]'),\n-    );\n \n+    submitLocation = fixture.debugElement.query(By.css('[name=\"add\"]'));\n+    customIdInput = fixture.debugElement.query(By.css('[name=\"customId\"]'));\n+    nameInput = fixture.debugElement.query(By.css('[name=\"name\"]'));\n+    descriptionInput = fixture.debugElement.query(\n+      By.css('[name=\"description\"]'),\n+    );\n     fixture.detectChanges();\n   }));\n \n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n-  it('should not create a template-driven form when ngNoForm is used', () => {\n+\n+  it('should not show a validation error if the input field is filled', () => {\n+    component.location.customId = 'customid3';\n+    component.location.name = 'Location Name';\n+    component.location.description = 'This is location Description';\n     fixture.detectChanges();\n-    expect(fixture.debugElement.children[0].providerTokens.length).toEqual(0);\n+    const Errormsg = fixture.debugElement.query(By.css('.validation-error'));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc098f48f81653aa74eb86fe2b3e514482b9c218"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA2MjYxOA==", "bodyText": "where is this.locations being used other than here?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r451062618", "createdAt": "2020-07-07T18:29:50Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-list/location-list.component.ts", "diffHunk": "@@ -33,7 +33,7 @@ export class LocationListComponent implements OnInit {\n     ).pipe(\n       map(([locations, query]) => {\n         this.locations = locations;\n-        return locations.filter(\n+        return this.locations.filter(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1516b986848506affda69fb6c267b99dfdf8228a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA2MzY0OQ==", "bodyText": "I don't see a change", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r451063649", "createdAt": "2020-07-07T18:31:48Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/shared/location.service.spec.ts", "diffHunk": "@@ -118,4 +150,121 @@ describe('LocationService', () => {\n       },\n     );\n   }));\n+\n+  it('add location should return an error when the server returns a 400 ', fakeAsync(() => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE4OTQ4OQ=="}, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA2NDUzMA==", "bodyText": "That's not what the title of the test says.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r451064530", "createdAt": "2020-07-07T18:33:25Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -1,24 +1,149 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n-\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+  tick,\n+} from '@angular/core/testing';\n+import {DebugElement} from '@angular/core';\n import {AddLocationComponent} from './add-location.component';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrModule} from 'ngx-toastr';\n+import {BsModalService, ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {FormsModule, ReactiveFormsModule, NgForm} from '@angular/forms';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {HttpClientModule} from '@angular/common/http';\n+import {By} from '@angular/platform-browser';\n \n describe('AddLocationComponent', () => {\n   let component: AddLocationComponent;\n   let fixture: ComponentFixture<AddLocationComponent>;\n+  let form: DebugElement;\n+  let submitLocation: DebugElement;\n+  let locationCustomIde1: DebugElement;\n+  let locationNamee1: DebugElement;\n+  let locationDescriptione1: DebugElement;\n \n-  beforeEach(async(async () => {\n-    await TestBed.configureTestingModule({\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n       declarations: [AddLocationComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        HttpClientModule,\n+        FormsModule,\n+        ReactiveFormsModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [NgForm, EntityService, LocationService, BsModalService],\n+    });\n   }));\n \n-  beforeEach(() => {\n+  beforeEach(async(() => {\n     fixture = TestBed.createComponent(AddLocationComponent);\n     component = fixture.componentInstance;\n+    form = fixture.debugElement.query(By.css('form'));\n+    submitLocation = fixture.debugElement.query(\n+      By.css('button[type=\"submit\"]'),\n+    );\n+    locationCustomIde1 = fixture.debugElement.query(\n+      By.css('input[id=locationCustomId]'),\n+    );\n+    locationNamee1 = fixture.debugElement.query(\n+      By.css('input[id=locationName]'),\n+    );\n+    locationDescriptione1 = fixture.debugElement.query(\n+      By.css('input[id=locationDescription]'),\n+    );\n+\n     fixture.detectChanges();\n-  });\n+  }));\n \n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+  it('should not create a template-driven form when ngNoForm is used', () => {\n+    fixture.detectChanges();\n+    expect(fixture.debugElement.children[0].providerTokens.length).toEqual(0);\n+  });\n+  it('Locations value to input properties on form load', () => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE4MTU4OA=="}, "originalCommit": {"oid": "a2ba3a7364d59347f3bcc5bc6640e3cd0ed61b82"}, "originalPosition": 83}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00844dd1e26d9a194c45084bdc59038270b01fb9", "author": {"user": {"login": "rohithd-btc", "name": "Rohith D C"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/00844dd1e26d9a194c45084bdc59038270b01fb9", "committedDate": "2020-07-08T17:20:00Z", "message": "Comments has been resolved"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bf88bf2e688a3e8ff6c0909d3d0ffadb9ba23e4", "author": {"user": {"login": "rohithd-btc", "name": "Rohith D C"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/2bf88bf2e688a3e8ff6c0909d3d0ffadb9ba23e4", "committedDate": "2020-07-08T17:25:15Z", "message": "Comments has been resolved"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "328ab5e9df28edfd99102aaee6c2be5fef83ccc4", "author": {"user": {"login": "rohithd-btc", "name": "Rohith D C"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/328ab5e9df28edfd99102aaee6c2be5fef83ccc4", "committedDate": "2020-07-08T17:28:04Z", "message": "Removed unused variable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MTAwODcz", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#pullrequestreview-445100873", "createdAt": "2020-07-08T20:22:18Z", "commit": {"oid": "328ab5e9df28edfd99102aaee6c2be5fef83ccc4"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMDoyMjoxOVrOGu35PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMDozNjozNlrOGu4VYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgwMzQ1Mw==", "bodyText": "You're calling this function on line 118, you shouldn't be calling this API in this test.\nYou need to make sure your tests are working correctly. A bug in a test is the same as a bug anywhere else in the code.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r451803453", "createdAt": "2020-07-08T20:22:19Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -66,55 +77,52 @@ describe('AddLocationComponent', () => {\n     component.location.name = 'Location Name';\n     component.location.description = 'This is location Description';\n     fixture.detectChanges();\n-    const Errormsg = fixture.debugElement.query(By.css('.validation-error'));\n-    expect(Errormsg).toBeFalsy();\n+    const errorMsg = fixture.debugElement.query(By.css('.validation-error'));\n+    expect(errorMsg).toBeFalsy();\n   });\n \n-  it('Locations value to input properties on form load', () => {\n+  it('should check form submit button is disabled when loaded', () => {\n     const submitButton = submitLocation.nativeElement as HTMLInputElement;\n     component.enabled = false;\n     fixture.detectChanges();\n     expect(submitButton.disabled).toBeTruthy();\n   });\n \n-  it('Entering value in input controls and check the same value', fakeAsync(() => {\n+  it('Entering value in input controls and check the same value and submit', fakeAsync(async () => {\n+    const expectedResponse = {\n+      id: 0,\n+      customId: 'customid3',\n+      name: 'Location Name',\n+      description: 'This is location Description',\n+      status: '1',\n+      studiesCount: 0,\n+      successBean: {message: 'location added successfully', code: '200 ok'},\n+      error: {detailMessage: '', type: '', userMessage: ''},\n+    };\n     fixture.componentInstance.location.customId = 'customid3';\n     fixture.componentInstance.location.name = 'Location Name';\n     fixture.componentInstance.location.description =\n       'This is location Description';\n-    void fixture.whenStable().then(() => {\n-      const submitButton = submitLocation.nativeElement as HTMLInputElement;\n-      const customIdInputs = customIdInput.nativeElement as HTMLInputElement;\n-      const nameInputs = nameInput.nativeElement as HTMLInputElement;\n-      const descriptionInputs = descriptionInput.nativeElement as HTMLInputElement;\n-      customIdInputs.value = 'customid3';\n-      nameInputs.value = 'Location Name';\n-      descriptionInputs.value = 'This is location Description';\n-      dispatchEvent(new Event('input'));\n-      fixture.detectChanges();\n-      tick();\n-      submitButton.click();\n-      fixture.detectChanges();\n-      expect(component.location.customId).toEqual('customid3');\n-      expect(component.location.name).toEqual('Location Name');\n-      expect(component.location.description).toEqual(\n-        'This is location Description',\n-      );\n-    });\n-  }));\n-\n-  it('should reset the form submit state when reset button is clicked', fakeAsync(() => {\n-    const forms = fixture.debugElement.children[0].injector.get(NgForm);\n-    const formEl = fixture.debugElement.query(By.css('form'));\n-\n-    dispatchEvent(new Event(formEl.nativeElement));\n+    await fixture.whenStable();\n+    const submitButton = submitLocation.nativeElement as HTMLInputElement;\n+    const customIdInputs = customIdInput.nativeElement as HTMLInputElement;\n+    const nameInputs = nameInput.nativeElement as HTMLInputElement;\n+    const descriptionInputs = descriptionInput.nativeElement as HTMLInputElement;\n+    customIdInputs.value = 'customid3';\n+    nameInputs.value = 'Location Name';\n+    descriptionInputs.value = 'This is location Description';\n+    dispatchEvent(new Event('input'));\n     fixture.detectChanges();\n     tick();\n-    expect(forms.valid).toBe(true);\n-\n-    dispatchEvent(new Event(formEl.nativeElement));\n+    submitButton.click();\n+    locationsServiceSpy.addLocation(expectedResponse);\n     fixture.detectChanges();\n-    tick();\n-    expect(forms.valid).toBe(true);\n+    expect(locationsServiceSpy.addLocation).toHaveBeenCalled();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "328ab5e9df28edfd99102aaee6c2be5fef83ccc4"}, "originalPosition": 118}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgwMzgzMw==", "bodyText": "prefer toHaveBeenCalledTimes(1)", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r451803833", "createdAt": "2020-07-08T20:22:57Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.spec.ts", "diffHunk": "@@ -66,55 +77,52 @@ describe('AddLocationComponent', () => {\n     component.location.name = 'Location Name';\n     component.location.description = 'This is location Description';\n     fixture.detectChanges();\n-    const Errormsg = fixture.debugElement.query(By.css('.validation-error'));\n-    expect(Errormsg).toBeFalsy();\n+    const errorMsg = fixture.debugElement.query(By.css('.validation-error'));\n+    expect(errorMsg).toBeFalsy();\n   });\n \n-  it('Locations value to input properties on form load', () => {\n+  it('should check form submit button is disabled when loaded', () => {\n     const submitButton = submitLocation.nativeElement as HTMLInputElement;\n     component.enabled = false;\n     fixture.detectChanges();\n     expect(submitButton.disabled).toBeTruthy();\n   });\n \n-  it('Entering value in input controls and check the same value', fakeAsync(() => {\n+  it('Entering value in input controls and check the same value and submit', fakeAsync(async () => {\n+    const expectedResponse = {\n+      id: 0,\n+      customId: 'customid3',\n+      name: 'Location Name',\n+      description: 'This is location Description',\n+      status: '1',\n+      studiesCount: 0,\n+      successBean: {message: 'location added successfully', code: '200 ok'},\n+      error: {detailMessage: '', type: '', userMessage: ''},\n+    };\n     fixture.componentInstance.location.customId = 'customid3';\n     fixture.componentInstance.location.name = 'Location Name';\n     fixture.componentInstance.location.description =\n       'This is location Description';\n-    void fixture.whenStable().then(() => {\n-      const submitButton = submitLocation.nativeElement as HTMLInputElement;\n-      const customIdInputs = customIdInput.nativeElement as HTMLInputElement;\n-      const nameInputs = nameInput.nativeElement as HTMLInputElement;\n-      const descriptionInputs = descriptionInput.nativeElement as HTMLInputElement;\n-      customIdInputs.value = 'customid3';\n-      nameInputs.value = 'Location Name';\n-      descriptionInputs.value = 'This is location Description';\n-      dispatchEvent(new Event('input'));\n-      fixture.detectChanges();\n-      tick();\n-      submitButton.click();\n-      fixture.detectChanges();\n-      expect(component.location.customId).toEqual('customid3');\n-      expect(component.location.name).toEqual('Location Name');\n-      expect(component.location.description).toEqual(\n-        'This is location Description',\n-      );\n-    });\n-  }));\n-\n-  it('should reset the form submit state when reset button is clicked', fakeAsync(() => {\n-    const forms = fixture.debugElement.children[0].injector.get(NgForm);\n-    const formEl = fixture.debugElement.query(By.css('form'));\n-\n-    dispatchEvent(new Event(formEl.nativeElement));\n+    await fixture.whenStable();\n+    const submitButton = submitLocation.nativeElement as HTMLInputElement;\n+    const customIdInputs = customIdInput.nativeElement as HTMLInputElement;\n+    const nameInputs = nameInput.nativeElement as HTMLInputElement;\n+    const descriptionInputs = descriptionInput.nativeElement as HTMLInputElement;\n+    customIdInputs.value = 'customid3';\n+    nameInputs.value = 'Location Name';\n+    descriptionInputs.value = 'This is location Description';\n+    dispatchEvent(new Event('input'));\n     fixture.detectChanges();\n     tick();\n-    expect(forms.valid).toBe(true);\n-\n-    dispatchEvent(new Event(formEl.nativeElement));\n+    submitButton.click();\n+    locationsServiceSpy.addLocation(expectedResponse);\n     fixture.detectChanges();\n-    tick();\n-    expect(forms.valid).toBe(true);\n+    expect(locationsServiceSpy.addLocation).toHaveBeenCalled();\n+    expect(locationsServiceSpy.addLocation.calls.count()).toBe(1, 'one call');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "328ab5e9df28edfd99102aaee6c2be5fef83ccc4"}, "originalPosition": 119}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgxMDY1Ng==", "bodyText": "You should just be accessing the locations observable. If your code doesn't use it you shouldn't be adding it just to test it.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r451810656", "createdAt": "2020-07-08T20:36:36Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-list/location-list.component.ts", "diffHunk": "@@ -33,7 +33,7 @@ export class LocationListComponent implements OnInit {\n     ).pipe(\n       map(([locations, query]) => {\n         this.locations = locations;\n-        return locations.filter(\n+        return this.locations.filter(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA2MjYxOA=="}, "originalCommit": {"oid": "1516b986848506affda69fb6c267b99dfdf8228a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MTEwNTc2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#pullrequestreview-445110576", "createdAt": "2020-07-08T20:37:15Z", "commit": {"oid": "328ab5e9df28edfd99102aaee6c2be5fef83ccc4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMDozNzoxNVrOGu4Wqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMDozNzoxNVrOGu4Wqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgxMDk4Nw==", "bodyText": "You deleted the subscription.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#discussion_r451810987", "createdAt": "2020-07-08T20:37:15Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/add-location/add-location.component.ts", "diffHunk": "@@ -21,8 +21,8 @@ export class AddLocationComponent {\n   ) {}\n \n   addLocation(): void {\n-    this.sub = this.locationService.addLocation(this.location).subscribe(() => {\n-      this.toastr.success('New location added Successfully');\n+    this.locationService.addLocation(this.location).subscribe(() => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "328ab5e9df28edfd99102aaee6c2be5fef83ccc4"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dc8822e92510fd0e42ffca2a434eb3881f6373d", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4dc8822e92510fd0e42ffca2a434eb3881f6373d", "committedDate": "2020-07-16T16:02:14Z", "message": "Code review comments has been resolved,"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d18db402c542613064b9d69db3459a03ec3d7e52", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d18db402c542613064b9d69db3459a03ec3d7e52", "committedDate": "2020-07-17T15:09:54Z", "message": "handled button with name attribute"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNTM0NTUx", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/588#pullrequestreview-452534551", "createdAt": "2020-07-21T14:47:19Z", "commit": {"oid": "d18db402c542613064b9d69db3459a03ec3d7e52"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae191fae433ab72bc58d8f7049888cca80b65eca", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ae191fae433ab72bc58d8f7049888cca80b65eca", "committedDate": "2020-07-22T09:25:24Z", "message": "Merge branch 'develop' into urwebapp-addlocation-implementation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 784, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}