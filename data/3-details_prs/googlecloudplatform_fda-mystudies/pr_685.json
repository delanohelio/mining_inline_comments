{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3MjIyMDY4", "number": 685, "title": "location-details implementation", "bodyText": "location-details implementation", "createdAt": "2020-07-27T15:02:46Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685", "merged": true, "mergeCommit": {"oid": "b4a8585fc22edd2db290504f89ba507162bae2b8"}, "closed": true, "closedAt": "2020-08-05T16:23:18Z", "author": {"login": "firdosebtc1"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5CeT6gH2gAyNDU3MjIyMDY4OjhmMDkzZWI5Y2NmZmZmODdjNmJlMmQ4MGVlNDg4NjRlOWQzZDVkZDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc79uzugFqTQ2MTgyNDc1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8", "committedDate": "2020-07-27T14:12:41Z", "message": "location-details implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTk2MzU0", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#pullrequestreview-455996354", "createdAt": "2020-07-27T17:38:11Z", "commit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozODoxMVrOG3suxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxODo1Njo1NVrOG3vbDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1NzczNA==", "bodyText": "Test data should be specific to a certain test, or at least a data type. Putting every data object in one file isn't useful and makes your tests hard to read.\nAlso, you also don't usually need to populate every field, removing the need for a bunch of test data like this. For tests that don't involve specific fields (and only for tests), something like this works.\nconst study = {id: '1'} as Study;", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461057734", "createdAt": "2020-07-27T17:38:11Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/entity/mockData.ts", "diffHunk": "@@ -0,0 +1,133 @@\n+import {of, Observable} from 'rxjs';\n+import {Study} from '../site-coordinator/studies/shared/study.model';\n+\n+export const expectedList = [", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA2ODU3Ng==", "bodyText": "Images should include alt attributes that describe what they are", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461068576", "createdAt": "2020-07-27T17:57:18Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.html", "diffHunk": "@@ -1 +1,151 @@\n-<p>location-details works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__1280 m-none\">\n+        <div class=\"flex__justify__space-between\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" alt=\"\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA3NjE2NA==", "bodyText": "This isn't a form, I don't think we should be using the form-group class.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461076164", "createdAt": "2020-07-27T18:10:54Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.html", "diffHunk": "@@ -1 +1,151 @@\n-<p>location-details works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__1280 m-none\">\n+        <div class=\"flex__justify__space-between\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" alt=\"\" />\n+                    <span>Location Details</span>\n+                </a>\n+            </div>\n+            <div>\n+                <button class=\"btn font12__light-grey p-none\" name=\"edit_location\" (click)=\"openModal(template)\">\n+                    <img class=\"mr-xs\" src=\"assets/images/edit-icon.gif\" alt=\"\" />\n+                    <span class=\"text__deco font12__light-grey\">\n+                        Edit Location Details</span>\n+                </button>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+<div class=\"max__w__1280 add__location\">\n+    <div class=\"bg__white card__inside__pad box__shadow-cmn m-none\">\n+        <div class=\"border__bottom__periwinkle-gray flex__justify__space-between\">\n+            <div>\n+                <div class=\"form-group\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA3NjMzNg==", "bodyText": "label for=\"\" should be used to target a form input, not a div.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461076336", "createdAt": "2020-07-27T18:11:14Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.html", "diffHunk": "@@ -1 +1,151 @@\n-<p>location-details works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__1280 m-none\">\n+        <div class=\"flex__justify__space-between\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" alt=\"\" />\n+                    <span>Location Details</span>\n+                </a>\n+            </div>\n+            <div>\n+                <button class=\"btn font12__light-grey p-none\" name=\"edit_location\" (click)=\"openModal(template)\">\n+                    <img class=\"mr-xs\" src=\"assets/images/edit-icon.gif\" alt=\"\" />\n+                    <span class=\"text__deco font12__light-grey\">\n+                        Edit Location Details</span>\n+                </button>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+<div class=\"max__w__1280 add__location\">\n+    <div class=\"bg__white card__inside__pad box__shadow-cmn m-none\">\n+        <div class=\"border__bottom__periwinkle-gray flex__justify__space-between\">\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"study\">Location ID</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA3NzI3MA==", "bodyText": "The styling on these list items doesn't look right, the rows are far too big.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461077270", "createdAt": "2020-07-27T18:12:54Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.html", "diffHunk": "@@ -1 +1,151 @@\n-<p>location-details works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__1280 m-none\">\n+        <div class=\"flex__justify__space-between\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" alt=\"\" />\n+                    <span>Location Details</span>\n+                </a>\n+            </div>\n+            <div>\n+                <button class=\"btn font12__light-grey p-none\" name=\"edit_location\" (click)=\"openModal(template)\">\n+                    <img class=\"mr-xs\" src=\"assets/images/edit-icon.gif\" alt=\"\" />\n+                    <span class=\"text__deco font12__light-grey\">\n+                        Edit Location Details</span>\n+                </button>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+<div class=\"max__w__1280 add__location\">\n+    <div class=\"bg__white card__inside__pad box__shadow-cmn m-none\">\n+        <div class=\"border__bottom__periwinkle-gray flex__justify__space-between\">\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"study\">Location ID</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.customId }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"app\">Location Name</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.name }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"form-group\">\n+                    <div class=\"active__\">\n+                        {{ locationBackup.status == \"1\" ? \"Active\" : \"DEACTIVATED\" }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+        <div class=\"\">\n+            <div class=\"\">\n+                <div class=\"form-group\">\n+                    <label for=\"Location\">Description</label>\n+                    <div class=\"font16__grey\">\n+                        {{ locationBackup.description }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <div class=\"cards__list mb-xlg\">\n+        <div class=\"subheader__title mb-lg mt-xlg\">\n+            Associated Studies ( {{ locationBackup.studiesCount }} )\n+        </div>\n+        <ul *ngIf=\"location.studiesCount > 0\" data-test=\"studiesCount\" class=\"box___shadow__radius\">\n+            <li *ngFor=\"let study of location.studies\">{{ study }}</li>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA3NzQyOA==", "bodyText": "This should be it's own component", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461077428", "createdAt": "2020-07-27T18:13:12Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.html", "diffHunk": "@@ -1 +1,151 @@\n-<p>location-details works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__1280 m-none\">\n+        <div class=\"flex__justify__space-between\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" alt=\"\" />\n+                    <span>Location Details</span>\n+                </a>\n+            </div>\n+            <div>\n+                <button class=\"btn font12__light-grey p-none\" name=\"edit_location\" (click)=\"openModal(template)\">\n+                    <img class=\"mr-xs\" src=\"assets/images/edit-icon.gif\" alt=\"\" />\n+                    <span class=\"text__deco font12__light-grey\">\n+                        Edit Location Details</span>\n+                </button>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+<div class=\"max__w__1280 add__location\">\n+    <div class=\"bg__white card__inside__pad box__shadow-cmn m-none\">\n+        <div class=\"border__bottom__periwinkle-gray flex__justify__space-between\">\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"study\">Location ID</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.customId }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"app\">Location Name</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.name }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"form-group\">\n+                    <div class=\"active__\">\n+                        {{ locationBackup.status == \"1\" ? \"Active\" : \"DEACTIVATED\" }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+        <div class=\"\">\n+            <div class=\"\">\n+                <div class=\"form-group\">\n+                    <label for=\"Location\">Description</label>\n+                    <div class=\"font16__grey\">\n+                        {{ locationBackup.description }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <div class=\"cards__list mb-xlg\">\n+        <div class=\"subheader__title mb-lg mt-xlg\">\n+            Associated Studies ( {{ locationBackup.studiesCount }} )\n+        </div>\n+        <ul *ngIf=\"location.studiesCount > 0\" data-test=\"studiesCount\" class=\"box___shadow__radius\">\n+            <li *ngFor=\"let study of location.studies\">{{ study }}</li>\n+        </ul>\n+    </div>\n+</div>\n+\n+<ng-template #template>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA3NzgyNg==", "bodyText": "The for attribute needs to correspond to named input.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461077826", "createdAt": "2020-07-27T18:13:59Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.html", "diffHunk": "@@ -1 +1,151 @@\n-<p>location-details works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__1280 m-none\">\n+        <div class=\"flex__justify__space-between\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" alt=\"\" />\n+                    <span>Location Details</span>\n+                </a>\n+            </div>\n+            <div>\n+                <button class=\"btn font12__light-grey p-none\" name=\"edit_location\" (click)=\"openModal(template)\">\n+                    <img class=\"mr-xs\" src=\"assets/images/edit-icon.gif\" alt=\"\" />\n+                    <span class=\"text__deco font12__light-grey\">\n+                        Edit Location Details</span>\n+                </button>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+<div class=\"max__w__1280 add__location\">\n+    <div class=\"bg__white card__inside__pad box__shadow-cmn m-none\">\n+        <div class=\"border__bottom__periwinkle-gray flex__justify__space-between\">\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"study\">Location ID</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.customId }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"app\">Location Name</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.name }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"form-group\">\n+                    <div class=\"active__\">\n+                        {{ locationBackup.status == \"1\" ? \"Active\" : \"DEACTIVATED\" }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+        <div class=\"\">\n+            <div class=\"\">\n+                <div class=\"form-group\">\n+                    <label for=\"Location\">Description</label>\n+                    <div class=\"font16__grey\">\n+                        {{ locationBackup.description }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <div class=\"cards__list mb-xlg\">\n+        <div class=\"subheader__title mb-lg mt-xlg\">\n+            Associated Studies ( {{ locationBackup.studiesCount }} )\n+        </div>\n+        <ul *ngIf=\"location.studiesCount > 0\" data-test=\"studiesCount\" class=\"box___shadow__radius\">\n+            <li *ngFor=\"let study of location.studies\">{{ study }}</li>\n+        </ul>\n+    </div>\n+</div>\n+\n+<ng-template #template>\n+    <div class=\"modal-body modal__body\">\n+        <form #updateLocationForm=\"ngForm\" autocomplete=\"off\">\n+            <div class=\"row border__bottom__periwinkle-gray\">\n+                <div class=\"col-xs-12 col-md-12 p-none\">\n+                    <div class=\"form-group background__mystic-gray border-radius__77\">\n+                        <label for=\"study\">Location ID</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA3ODM3NQ==", "bodyText": "The styling on these errors doesn't look right.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461078375", "createdAt": "2020-07-27T18:14:55Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.html", "diffHunk": "@@ -1 +1,151 @@\n-<p>location-details works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__1280 m-none\">\n+        <div class=\"flex__justify__space-between\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" alt=\"\" />\n+                    <span>Location Details</span>\n+                </a>\n+            </div>\n+            <div>\n+                <button class=\"btn font12__light-grey p-none\" name=\"edit_location\" (click)=\"openModal(template)\">\n+                    <img class=\"mr-xs\" src=\"assets/images/edit-icon.gif\" alt=\"\" />\n+                    <span class=\"text__deco font12__light-grey\">\n+                        Edit Location Details</span>\n+                </button>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+<div class=\"max__w__1280 add__location\">\n+    <div class=\"bg__white card__inside__pad box__shadow-cmn m-none\">\n+        <div class=\"border__bottom__periwinkle-gray flex__justify__space-between\">\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"study\">Location ID</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.customId }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"app\">Location Name</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.name }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"form-group\">\n+                    <div class=\"active__\">\n+                        {{ locationBackup.status == \"1\" ? \"Active\" : \"DEACTIVATED\" }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+        <div class=\"\">\n+            <div class=\"\">\n+                <div class=\"form-group\">\n+                    <label for=\"Location\">Description</label>\n+                    <div class=\"font16__grey\">\n+                        {{ locationBackup.description }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <div class=\"cards__list mb-xlg\">\n+        <div class=\"subheader__title mb-lg mt-xlg\">\n+            Associated Studies ( {{ locationBackup.studiesCount }} )\n+        </div>\n+        <ul *ngIf=\"location.studiesCount > 0\" data-test=\"studiesCount\" class=\"box___shadow__radius\">\n+            <li *ngFor=\"let study of location.studies\">{{ study }}</li>\n+        </ul>\n+    </div>\n+</div>\n+\n+<ng-template #template>\n+    <div class=\"modal-body modal__body\">\n+        <form #updateLocationForm=\"ngForm\" autocomplete=\"off\">\n+            <div class=\"row border__bottom__periwinkle-gray\">\n+                <div class=\"col-xs-12 col-md-12 p-none\">\n+                    <div class=\"form-group background__mystic-gray border-radius__77\">\n+                        <label for=\"study\">Location ID</label>\n+                        <input type=\"text\" class=\"form-control\" readonly [value]=\"location.customId\" />\n+                    </div>\n+\n+                </div>\n+                <div class=\"col-xs-12 col-md-12 p-none\">\n+                    <div class=\"form-group\">\n+                        <label for=\"app\">Location Name</label>\n+                        <input type=\"text\" class=\"form-control\" id=\"app\" placeholder=\"Enter Location Name\"\n+                            [(ngModel)]=\"location.name\" required name=\"name\" maxlength=\"200\" #name=\"ngModel\" />\n+                    </div>\n+                    <div class=\"validation-error\" *ngIf=\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA3ODQ1MQ==", "bodyText": "for=\"name\"", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461078451", "createdAt": "2020-07-27T18:15:02Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.html", "diffHunk": "@@ -1 +1,151 @@\n-<p>location-details works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__1280 m-none\">\n+        <div class=\"flex__justify__space-between\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" alt=\"\" />\n+                    <span>Location Details</span>\n+                </a>\n+            </div>\n+            <div>\n+                <button class=\"btn font12__light-grey p-none\" name=\"edit_location\" (click)=\"openModal(template)\">\n+                    <img class=\"mr-xs\" src=\"assets/images/edit-icon.gif\" alt=\"\" />\n+                    <span class=\"text__deco font12__light-grey\">\n+                        Edit Location Details</span>\n+                </button>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+<div class=\"max__w__1280 add__location\">\n+    <div class=\"bg__white card__inside__pad box__shadow-cmn m-none\">\n+        <div class=\"border__bottom__periwinkle-gray flex__justify__space-between\">\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"study\">Location ID</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.customId }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"app\">Location Name</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.name }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"form-group\">\n+                    <div class=\"active__\">\n+                        {{ locationBackup.status == \"1\" ? \"Active\" : \"DEACTIVATED\" }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+        <div class=\"\">\n+            <div class=\"\">\n+                <div class=\"form-group\">\n+                    <label for=\"Location\">Description</label>\n+                    <div class=\"font16__grey\">\n+                        {{ locationBackup.description }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <div class=\"cards__list mb-xlg\">\n+        <div class=\"subheader__title mb-lg mt-xlg\">\n+            Associated Studies ( {{ locationBackup.studiesCount }} )\n+        </div>\n+        <ul *ngIf=\"location.studiesCount > 0\" data-test=\"studiesCount\" class=\"box___shadow__radius\">\n+            <li *ngFor=\"let study of location.studies\">{{ study }}</li>\n+        </ul>\n+    </div>\n+</div>\n+\n+<ng-template #template>\n+    <div class=\"modal-body modal__body\">\n+        <form #updateLocationForm=\"ngForm\" autocomplete=\"off\">\n+            <div class=\"row border__bottom__periwinkle-gray\">\n+                <div class=\"col-xs-12 col-md-12 p-none\">\n+                    <div class=\"form-group background__mystic-gray border-radius__77\">\n+                        <label for=\"study\">Location ID</label>\n+                        <input type=\"text\" class=\"form-control\" readonly [value]=\"location.customId\" />\n+                    </div>\n+\n+                </div>\n+                <div class=\"col-xs-12 col-md-12 p-none\">\n+                    <div class=\"form-group\">\n+                        <label for=\"app\">Location Name</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA3ODYyOQ==", "bodyText": "You don't need IDs for these components", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461078629", "createdAt": "2020-07-27T18:15:19Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.html", "diffHunk": "@@ -1 +1,151 @@\n-<p>location-details works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__1280 m-none\">\n+        <div class=\"flex__justify__space-between\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" alt=\"\" />\n+                    <span>Location Details</span>\n+                </a>\n+            </div>\n+            <div>\n+                <button class=\"btn font12__light-grey p-none\" name=\"edit_location\" (click)=\"openModal(template)\">\n+                    <img class=\"mr-xs\" src=\"assets/images/edit-icon.gif\" alt=\"\" />\n+                    <span class=\"text__deco font12__light-grey\">\n+                        Edit Location Details</span>\n+                </button>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+<div class=\"max__w__1280 add__location\">\n+    <div class=\"bg__white card__inside__pad box__shadow-cmn m-none\">\n+        <div class=\"border__bottom__periwinkle-gray flex__justify__space-between\">\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"study\">Location ID</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.customId }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"app\">Location Name</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.name }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"form-group\">\n+                    <div class=\"active__\">\n+                        {{ locationBackup.status == \"1\" ? \"Active\" : \"DEACTIVATED\" }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+        <div class=\"\">\n+            <div class=\"\">\n+                <div class=\"form-group\">\n+                    <label for=\"Location\">Description</label>\n+                    <div class=\"font16__grey\">\n+                        {{ locationBackup.description }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <div class=\"cards__list mb-xlg\">\n+        <div class=\"subheader__title mb-lg mt-xlg\">\n+            Associated Studies ( {{ locationBackup.studiesCount }} )\n+        </div>\n+        <ul *ngIf=\"location.studiesCount > 0\" data-test=\"studiesCount\" class=\"box___shadow__radius\">\n+            <li *ngFor=\"let study of location.studies\">{{ study }}</li>\n+        </ul>\n+    </div>\n+</div>\n+\n+<ng-template #template>\n+    <div class=\"modal-body modal__body\">\n+        <form #updateLocationForm=\"ngForm\" autocomplete=\"off\">\n+            <div class=\"row border__bottom__periwinkle-gray\">\n+                <div class=\"col-xs-12 col-md-12 p-none\">\n+                    <div class=\"form-group background__mystic-gray border-radius__77\">\n+                        <label for=\"study\">Location ID</label>\n+                        <input type=\"text\" class=\"form-control\" readonly [value]=\"location.customId\" />\n+                    </div>\n+\n+                </div>\n+                <div class=\"col-xs-12 col-md-12 p-none\">\n+                    <div class=\"form-group\">\n+                        <label for=\"app\">Location Name</label>\n+                        <input type=\"text\" class=\"form-control\" id=\"app\" placeholder=\"Enter Location Name\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA3OTE0Nw==", "bodyText": "for=\"description\"", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461079147", "createdAt": "2020-07-27T18:16:10Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.html", "diffHunk": "@@ -1 +1,151 @@\n-<p>location-details works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__1280 m-none\">\n+        <div class=\"flex__justify__space-between\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" alt=\"\" />\n+                    <span>Location Details</span>\n+                </a>\n+            </div>\n+            <div>\n+                <button class=\"btn font12__light-grey p-none\" name=\"edit_location\" (click)=\"openModal(template)\">\n+                    <img class=\"mr-xs\" src=\"assets/images/edit-icon.gif\" alt=\"\" />\n+                    <span class=\"text__deco font12__light-grey\">\n+                        Edit Location Details</span>\n+                </button>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+<div class=\"max__w__1280 add__location\">\n+    <div class=\"bg__white card__inside__pad box__shadow-cmn m-none\">\n+        <div class=\"border__bottom__periwinkle-gray flex__justify__space-between\">\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"study\">Location ID</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.customId }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"app\">Location Name</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.name }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"form-group\">\n+                    <div class=\"active__\">\n+                        {{ locationBackup.status == \"1\" ? \"Active\" : \"DEACTIVATED\" }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+        <div class=\"\">\n+            <div class=\"\">\n+                <div class=\"form-group\">\n+                    <label for=\"Location\">Description</label>\n+                    <div class=\"font16__grey\">\n+                        {{ locationBackup.description }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <div class=\"cards__list mb-xlg\">\n+        <div class=\"subheader__title mb-lg mt-xlg\">\n+            Associated Studies ( {{ locationBackup.studiesCount }} )\n+        </div>\n+        <ul *ngIf=\"location.studiesCount > 0\" data-test=\"studiesCount\" class=\"box___shadow__radius\">\n+            <li *ngFor=\"let study of location.studies\">{{ study }}</li>\n+        </ul>\n+    </div>\n+</div>\n+\n+<ng-template #template>\n+    <div class=\"modal-body modal__body\">\n+        <form #updateLocationForm=\"ngForm\" autocomplete=\"off\">\n+            <div class=\"row border__bottom__periwinkle-gray\">\n+                <div class=\"col-xs-12 col-md-12 p-none\">\n+                    <div class=\"form-group background__mystic-gray border-radius__77\">\n+                        <label for=\"study\">Location ID</label>\n+                        <input type=\"text\" class=\"form-control\" readonly [value]=\"location.customId\" />\n+                    </div>\n+\n+                </div>\n+                <div class=\"col-xs-12 col-md-12 p-none\">\n+                    <div class=\"form-group\">\n+                        <label for=\"app\">Location Name</label>\n+                        <input type=\"text\" class=\"form-control\" id=\"app\" placeholder=\"Enter Location Name\"\n+                            [(ngModel)]=\"location.name\" required name=\"name\" maxlength=\"200\" #name=\"ngModel\" />\n+                    </div>\n+                    <div class=\"validation-error\" *ngIf=\"\n+              name.invalid && (name.dirty || name.touched)\n+            \">\n+                        <span class=\"help-block with-errors error__msg\" *ngIf=\"name.errors.required\">\n+                            Location Name is required.\n+                        </span>\n+                        <span class=\"help-block with-errors error__msg\" *ngIf=\"name.errors.maxlength\">\n+                            Location Name exceeds max length (200 characters).\n+                        </span>\n+                        <span class=\"help-block with-errors error__msg\"\n+                            *ngIf=\"!name.errors.required && !name.errors.maxlength\">\n+                            Location Name is invalid.\n+                        </span>\n+                    </div>\n+                </div>\n+            </div>\n+            <div class=\"row border__bottom__periwinkle-gray\">\n+                <div class=\"col-xs-12 col-md-12 p-none\">\n+                    <div class=\"form-group\">\n+                        <label for=\"Location\">Description</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA4MTY4Mw==", "bodyText": "How is this different than the previous test?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461081683", "createdAt": "2020-07-27T18:20:32Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.spec.ts", "diffHunk": "@@ -1,24 +1,126 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {\n+  async,\n+  TestBed,\n+  ComponentFixture,\n+  fakeAsync,\n+  tick,\n+  flush,\n+} from '@angular/core/testing';\n \n import {LocationDetailsComponent} from './location-details.component';\n+import {BrowserAnimationsModule} from '@angular/platform-browser/animations';\n+import {HttpClientModule} from '@angular/common/http';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../../location/location.module';\n+import {ToastrModule} from 'ngx-toastr';\n+import {EntityService} from '../../../service/entity.service';\n+import {of} from 'rxjs';\n+import {LocationService} from '../shared/location.service';\n+import {ModalModule, BsModalRef} from 'ngx-bootstrap/modal';\n+import {By} from '@angular/platform-browser';\n+import {expectedList, expectedResponse} from 'src/app/entity/mockData';\n \n describe('LocationDetailsComponent', () => {\n   let component: LocationDetailsComponent;\n   let fixture: ComponentFixture<LocationDetailsComponent>;\n-\n   beforeEach(async(async () => {\n+    const locationServiceSpy = jasmine.createSpyObj<LocationService>(\n+      'LocationService',\n+      ['getLocationDetails', 'updateLocation'],\n+    );\n+\n     await TestBed.configureTestingModule({\n       declarations: [LocationDetailsComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule.withRoutes([\n+          {\n+            path: 'coordinator/locations',\n+            component: LocationDetailsComponent,\n+          },\n+        ]),\n+        LocationModule,\n+        BrowserAnimationsModule,\n+        HttpClientModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [\n+        EntityService,\n+        BsModalRef,\n+        {provide: LocationService, useValue: locationServiceSpy},\n+      ],\n+    })\n+      .compileComponents()\n+      .then(() => {\n+        fixture = TestBed.createComponent(LocationDetailsComponent);\n+        component = fixture.componentInstance;\n+        locationServiceSpy.getLocationDetails.and.returnValue(of(expectedList));\n+        locationServiceSpy.updateLocation.and.returnValue(of(expectedResponse));\n+        fixture.detectChanges();\n+        fixture.destroy();\n+      });\n+  }));\n+\n+  it('should create', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('it should call get Location Details in ngOninit', fakeAsync(() => {\n+    const spyobjs = spyOn(component, 'getLocationDetails');\n+    component.getLocationDetails();\n+    fixture.detectChanges();\n+    expect(spyobjs).toHaveBeenCalledTimes(1);\n   }));\n \n-  beforeEach(() => {\n-    fixture = TestBed.createComponent(LocationDetailsComponent);\n-    component = fixture.componentInstance;\n+  it('should get details based on specific location id', () => {\n     fixture.detectChanges();\n+    expect(component.location.id).toEqual(2);\n   });\n \n-  it('should create', () => {\n-    expect(component).toBeTruthy();\n+  it('should check input value is filled after data', () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA4MTc4MA==", "bodyText": "Compare to the test data, not a magic number", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461081780", "createdAt": "2020-07-27T18:20:42Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.spec.ts", "diffHunk": "@@ -1,24 +1,126 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {\n+  async,\n+  TestBed,\n+  ComponentFixture,\n+  fakeAsync,\n+  tick,\n+  flush,\n+} from '@angular/core/testing';\n \n import {LocationDetailsComponent} from './location-details.component';\n+import {BrowserAnimationsModule} from '@angular/platform-browser/animations';\n+import {HttpClientModule} from '@angular/common/http';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../../location/location.module';\n+import {ToastrModule} from 'ngx-toastr';\n+import {EntityService} from '../../../service/entity.service';\n+import {of} from 'rxjs';\n+import {LocationService} from '../shared/location.service';\n+import {ModalModule, BsModalRef} from 'ngx-bootstrap/modal';\n+import {By} from '@angular/platform-browser';\n+import {expectedList, expectedResponse} from 'src/app/entity/mockData';\n \n describe('LocationDetailsComponent', () => {\n   let component: LocationDetailsComponent;\n   let fixture: ComponentFixture<LocationDetailsComponent>;\n-\n   beforeEach(async(async () => {\n+    const locationServiceSpy = jasmine.createSpyObj<LocationService>(\n+      'LocationService',\n+      ['getLocationDetails', 'updateLocation'],\n+    );\n+\n     await TestBed.configureTestingModule({\n       declarations: [LocationDetailsComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule.withRoutes([\n+          {\n+            path: 'coordinator/locations',\n+            component: LocationDetailsComponent,\n+          },\n+        ]),\n+        LocationModule,\n+        BrowserAnimationsModule,\n+        HttpClientModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [\n+        EntityService,\n+        BsModalRef,\n+        {provide: LocationService, useValue: locationServiceSpy},\n+      ],\n+    })\n+      .compileComponents()\n+      .then(() => {\n+        fixture = TestBed.createComponent(LocationDetailsComponent);\n+        component = fixture.componentInstance;\n+        locationServiceSpy.getLocationDetails.and.returnValue(of(expectedList));\n+        locationServiceSpy.updateLocation.and.returnValue(of(expectedResponse));\n+        fixture.detectChanges();\n+        fixture.destroy();\n+      });\n+  }));\n+\n+  it('should create', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('it should call get Location Details in ngOninit', fakeAsync(() => {\n+    const spyobjs = spyOn(component, 'getLocationDetails');\n+    component.getLocationDetails();\n+    fixture.detectChanges();\n+    expect(spyobjs).toHaveBeenCalledTimes(1);\n   }));\n \n-  beforeEach(() => {\n-    fixture = TestBed.createComponent(LocationDetailsComponent);\n-    component = fixture.componentInstance;\n+  it('should get details based on specific location id', () => {\n     fixture.detectChanges();\n+    expect(component.location.id).toEqual(2);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA4MjIxMQ==", "bodyText": "spyObjs will always be truthy, did you mean to check if it was called?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461082211", "createdAt": "2020-07-27T18:21:28Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.spec.ts", "diffHunk": "@@ -1,24 +1,126 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {\n+  async,\n+  TestBed,\n+  ComponentFixture,\n+  fakeAsync,\n+  tick,\n+  flush,\n+} from '@angular/core/testing';\n \n import {LocationDetailsComponent} from './location-details.component';\n+import {BrowserAnimationsModule} from '@angular/platform-browser/animations';\n+import {HttpClientModule} from '@angular/common/http';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../../location/location.module';\n+import {ToastrModule} from 'ngx-toastr';\n+import {EntityService} from '../../../service/entity.service';\n+import {of} from 'rxjs';\n+import {LocationService} from '../shared/location.service';\n+import {ModalModule, BsModalRef} from 'ngx-bootstrap/modal';\n+import {By} from '@angular/platform-browser';\n+import {expectedList, expectedResponse} from 'src/app/entity/mockData';\n \n describe('LocationDetailsComponent', () => {\n   let component: LocationDetailsComponent;\n   let fixture: ComponentFixture<LocationDetailsComponent>;\n-\n   beforeEach(async(async () => {\n+    const locationServiceSpy = jasmine.createSpyObj<LocationService>(\n+      'LocationService',\n+      ['getLocationDetails', 'updateLocation'],\n+    );\n+\n     await TestBed.configureTestingModule({\n       declarations: [LocationDetailsComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule.withRoutes([\n+          {\n+            path: 'coordinator/locations',\n+            component: LocationDetailsComponent,\n+          },\n+        ]),\n+        LocationModule,\n+        BrowserAnimationsModule,\n+        HttpClientModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [\n+        EntityService,\n+        BsModalRef,\n+        {provide: LocationService, useValue: locationServiceSpy},\n+      ],\n+    })\n+      .compileComponents()\n+      .then(() => {\n+        fixture = TestBed.createComponent(LocationDetailsComponent);\n+        component = fixture.componentInstance;\n+        locationServiceSpy.getLocationDetails.and.returnValue(of(expectedList));\n+        locationServiceSpy.updateLocation.and.returnValue(of(expectedResponse));\n+        fixture.detectChanges();\n+        fixture.destroy();\n+      });\n+  }));\n+\n+  it('should create', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('it should call get Location Details in ngOninit', fakeAsync(() => {\n+    const spyobjs = spyOn(component, 'getLocationDetails');\n+    component.getLocationDetails();\n+    fixture.detectChanges();\n+    expect(spyobjs).toHaveBeenCalledTimes(1);\n   }));\n \n-  beforeEach(() => {\n-    fixture = TestBed.createComponent(LocationDetailsComponent);\n-    component = fixture.componentInstance;\n+  it('should get details based on specific location id', () => {\n     fixture.detectChanges();\n+    expect(component.location.id).toEqual(2);\n   });\n \n-  it('should create', () => {\n-    expect(component).toBeTruthy();\n+  it('should check input value is filled after data', () => {\n+    fixture.detectChanges();\n+    expect(component.location.customId).toEqual('customid3');\n+    expect(component.location.description).toEqual('location-descp-updated');\n+    expect(component.location.name).toEqual('name -1-updated0');\n   });\n+\n+  it('should not have studies when count is zero', () => {\n+    fixture.detectChanges();\n+    const elem = fixture.debugElement.query(\n+      By.css('[data-test=\"studiesCount\"]'),\n+    );\n+    expect(elem).toBeFalsy();\n+  });\n+\n+  it('should display the modal when edit location is clicked', fakeAsync(() => {\n+    const clickEditButton = fixture.debugElement.query(By.css('button'));\n+    const spyObjs = spyOn(component, 'openModal').and.callThrough();\n+    clickEditButton.triggerEventHandler('click', null);\n+    tick();\n+    fixture.detectChanges();\n+    expect(spyObjs).toBeTruthy();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 113}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA4MjcwOA==", "bodyText": "I would prefer you to use page objects or a helper function, this test is very brittle to changes in the DOM, how do you know which button you're getting here?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461082708", "createdAt": "2020-07-27T18:22:19Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.spec.ts", "diffHunk": "@@ -1,24 +1,126 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {\n+  async,\n+  TestBed,\n+  ComponentFixture,\n+  fakeAsync,\n+  tick,\n+  flush,\n+} from '@angular/core/testing';\n \n import {LocationDetailsComponent} from './location-details.component';\n+import {BrowserAnimationsModule} from '@angular/platform-browser/animations';\n+import {HttpClientModule} from '@angular/common/http';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../../location/location.module';\n+import {ToastrModule} from 'ngx-toastr';\n+import {EntityService} from '../../../service/entity.service';\n+import {of} from 'rxjs';\n+import {LocationService} from '../shared/location.service';\n+import {ModalModule, BsModalRef} from 'ngx-bootstrap/modal';\n+import {By} from '@angular/platform-browser';\n+import {expectedList, expectedResponse} from 'src/app/entity/mockData';\n \n describe('LocationDetailsComponent', () => {\n   let component: LocationDetailsComponent;\n   let fixture: ComponentFixture<LocationDetailsComponent>;\n-\n   beforeEach(async(async () => {\n+    const locationServiceSpy = jasmine.createSpyObj<LocationService>(\n+      'LocationService',\n+      ['getLocationDetails', 'updateLocation'],\n+    );\n+\n     await TestBed.configureTestingModule({\n       declarations: [LocationDetailsComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule.withRoutes([\n+          {\n+            path: 'coordinator/locations',\n+            component: LocationDetailsComponent,\n+          },\n+        ]),\n+        LocationModule,\n+        BrowserAnimationsModule,\n+        HttpClientModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [\n+        EntityService,\n+        BsModalRef,\n+        {provide: LocationService, useValue: locationServiceSpy},\n+      ],\n+    })\n+      .compileComponents()\n+      .then(() => {\n+        fixture = TestBed.createComponent(LocationDetailsComponent);\n+        component = fixture.componentInstance;\n+        locationServiceSpy.getLocationDetails.and.returnValue(of(expectedList));\n+        locationServiceSpy.updateLocation.and.returnValue(of(expectedResponse));\n+        fixture.detectChanges();\n+        fixture.destroy();\n+      });\n+  }));\n+\n+  it('should create', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('it should call get Location Details in ngOninit', fakeAsync(() => {\n+    const spyobjs = spyOn(component, 'getLocationDetails');\n+    component.getLocationDetails();\n+    fixture.detectChanges();\n+    expect(spyobjs).toHaveBeenCalledTimes(1);\n   }));\n \n-  beforeEach(() => {\n-    fixture = TestBed.createComponent(LocationDetailsComponent);\n-    component = fixture.componentInstance;\n+  it('should get details based on specific location id', () => {\n     fixture.detectChanges();\n+    expect(component.location.id).toEqual(2);\n   });\n \n-  it('should create', () => {\n-    expect(component).toBeTruthy();\n+  it('should check input value is filled after data', () => {\n+    fixture.detectChanges();\n+    expect(component.location.customId).toEqual('customid3');\n+    expect(component.location.description).toEqual('location-descp-updated');\n+    expect(component.location.name).toEqual('name -1-updated0');\n   });\n+\n+  it('should not have studies when count is zero', () => {\n+    fixture.detectChanges();\n+    const elem = fixture.debugElement.query(\n+      By.css('[data-test=\"studiesCount\"]'),\n+    );\n+    expect(elem).toBeFalsy();\n+  });\n+\n+  it('should display the modal when edit location is clicked', fakeAsync(() => {\n+    const clickEditButton = fixture.debugElement.query(By.css('button'));\n+    const spyObjs = spyOn(component, 'openModal').and.callThrough();\n+    clickEditButton.triggerEventHandler('click', null);\n+    tick();\n+    fixture.detectChanges();\n+    expect(spyObjs).toBeTruthy();\n+    flush();\n+  }));\n+\n+  it('should close the modal when clicked', fakeAsync(() => {\n+    const mouseClick = fixture.debugElement.query(By.css('button'));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 118}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA4Mjk4Mw==", "bodyText": "Where does expectedResponse come from?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461082983", "createdAt": "2020-07-27T18:22:50Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.spec.ts", "diffHunk": "@@ -1,24 +1,126 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {\n+  async,\n+  TestBed,\n+  ComponentFixture,\n+  fakeAsync,\n+  tick,\n+  flush,\n+} from '@angular/core/testing';\n \n import {LocationDetailsComponent} from './location-details.component';\n+import {BrowserAnimationsModule} from '@angular/platform-browser/animations';\n+import {HttpClientModule} from '@angular/common/http';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../../location/location.module';\n+import {ToastrModule} from 'ngx-toastr';\n+import {EntityService} from '../../../service/entity.service';\n+import {of} from 'rxjs';\n+import {LocationService} from '../shared/location.service';\n+import {ModalModule, BsModalRef} from 'ngx-bootstrap/modal';\n+import {By} from '@angular/platform-browser';\n+import {expectedList, expectedResponse} from 'src/app/entity/mockData';\n \n describe('LocationDetailsComponent', () => {\n   let component: LocationDetailsComponent;\n   let fixture: ComponentFixture<LocationDetailsComponent>;\n-\n   beforeEach(async(async () => {\n+    const locationServiceSpy = jasmine.createSpyObj<LocationService>(\n+      'LocationService',\n+      ['getLocationDetails', 'updateLocation'],\n+    );\n+\n     await TestBed.configureTestingModule({\n       declarations: [LocationDetailsComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule.withRoutes([\n+          {\n+            path: 'coordinator/locations',\n+            component: LocationDetailsComponent,\n+          },\n+        ]),\n+        LocationModule,\n+        BrowserAnimationsModule,\n+        HttpClientModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [\n+        EntityService,\n+        BsModalRef,\n+        {provide: LocationService, useValue: locationServiceSpy},\n+      ],\n+    })\n+      .compileComponents()\n+      .then(() => {\n+        fixture = TestBed.createComponent(LocationDetailsComponent);\n+        component = fixture.componentInstance;\n+        locationServiceSpy.getLocationDetails.and.returnValue(of(expectedList));\n+        locationServiceSpy.updateLocation.and.returnValue(of(expectedResponse));\n+        fixture.detectChanges();\n+        fixture.destroy();\n+      });\n+  }));\n+\n+  it('should create', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('it should call get Location Details in ngOninit', fakeAsync(() => {\n+    const spyobjs = spyOn(component, 'getLocationDetails');\n+    component.getLocationDetails();\n+    fixture.detectChanges();\n+    expect(spyobjs).toHaveBeenCalledTimes(1);\n   }));\n \n-  beforeEach(() => {\n-    fixture = TestBed.createComponent(LocationDetailsComponent);\n-    component = fixture.componentInstance;\n+  it('should get details based on specific location id', () => {\n     fixture.detectChanges();\n+    expect(component.location.id).toEqual(2);\n   });\n \n-  it('should create', () => {\n-    expect(component).toBeTruthy();\n+  it('should check input value is filled after data', () => {\n+    fixture.detectChanges();\n+    expect(component.location.customId).toEqual('customid3');\n+    expect(component.location.description).toEqual('location-descp-updated');\n+    expect(component.location.name).toEqual('name -1-updated0');\n   });\n+\n+  it('should not have studies when count is zero', () => {\n+    fixture.detectChanges();\n+    const elem = fixture.debugElement.query(\n+      By.css('[data-test=\"studiesCount\"]'),\n+    );\n+    expect(elem).toBeFalsy();\n+  });\n+\n+  it('should display the modal when edit location is clicked', fakeAsync(() => {\n+    const clickEditButton = fixture.debugElement.query(By.css('button'));\n+    const spyObjs = spyOn(component, 'openModal').and.callThrough();\n+    clickEditButton.triggerEventHandler('click', null);\n+    tick();\n+    fixture.detectChanges();\n+    expect(spyObjs).toBeTruthy();\n+    flush();\n+  }));\n+\n+  it('should close the modal when clicked', fakeAsync(() => {\n+    const mouseClick = fixture.debugElement.query(By.css('button'));\n+    const spyObjs = spyOn(component, 'closeModal').and.callThrough();\n+    mouseClick.triggerEventHandler('click', null);\n+    fixture.detectChanges();\n+    expect(spyObjs).toBeTruthy();\n+    flush();\n+  }));\n+\n+  it('should call the update the location details', fakeAsync(() => {\n+    const spyObjs = spyOn(component, 'updateLocation');\n+    component.updateLocation('update');\n+    fixture.detectChanges();\n+    expect(spyObjs).toHaveBeenCalled();\n+    expect(expectedResponse.code).toEqual('200');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 131}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA4NDMwMw==", "bodyText": "unnecessary call to super", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461084303", "createdAt": "2020-07-27T18:25:05Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.ts", "diffHunk": "@@ -1,8 +1,90 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit, Input} from '@angular/core';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute, Router} from '@angular/router';\n+import {Location} from '../shared/location.model';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+import {SuccessCodesEnum, getMessage} from 'src/app/shared/success.codes.enum';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n \n @Component({\n   selector: 'location-details',\n   templateUrl: './location-details.component.html',\n   styleUrls: ['./location-details.component.scss'],\n })\n-export class LocationDetailsComponent {}\n+export class LocationDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  @Input() enabled = true;\n+  location = {} as Location;\n+  locationBackup = {} as Location;\n+  locationId = '';\n+  constructor(\n+    private readonly modalService: BsModalService,\n+    private modalRef: BsModalRef,\n+    private readonly locationService: LocationService,\n+    private readonly toastr: ToastrService,\n+    private readonly route: ActivatedRoute,\n+    private readonly router: Router,\n+  ) {\n+    super();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA4NDM2NA==", "bodyText": "This should have a real type", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461084364", "createdAt": "2020-07-27T18:25:12Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.ts", "diffHunk": "@@ -1,8 +1,90 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit, Input} from '@angular/core';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute, Router} from '@angular/router';\n+import {Location} from '../shared/location.model';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+import {SuccessCodesEnum, getMessage} from 'src/app/shared/success.codes.enum';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n \n @Component({\n   selector: 'location-details',\n   templateUrl: './location-details.component.html',\n   styleUrls: ['./location-details.component.scss'],\n })\n-export class LocationDetailsComponent {}\n+export class LocationDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  @Input() enabled = true;\n+  location = {} as Location;\n+  locationBackup = {} as Location;\n+  locationId = '';\n+  constructor(\n+    private readonly modalService: BsModalService,\n+    private modalRef: BsModalRef,\n+    private readonly locationService: LocationService,\n+    private readonly toastr: ToastrService,\n+    private readonly route: ActivatedRoute,\n+    private readonly router: Router,\n+  ) {\n+    super();\n+  }\n+  openModal(template: unknown): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA4NDYzMA==", "bodyText": "This isn't a valid Location. Instead of using this and locationBackup you should have an object that represents the data from the server (location) and then a model for your form, locationFormData or something. When you save the location you do something like\nconst toUpdate = { ...this.location, ...this.locationFormData };\nhttp.updateLocation(toUpdate).subscribe(data => this.location = data);", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461084630", "createdAt": "2020-07-27T18:25:39Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.ts", "diffHunk": "@@ -1,8 +1,90 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit, Input} from '@angular/core';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute, Router} from '@angular/router';\n+import {Location} from '../shared/location.model';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+import {SuccessCodesEnum, getMessage} from 'src/app/shared/success.codes.enum';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n \n @Component({\n   selector: 'location-details',\n   templateUrl: './location-details.component.html',\n   styleUrls: ['./location-details.component.scss'],\n })\n-export class LocationDetailsComponent {}\n+export class LocationDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  @Input() enabled = true;\n+  location = {} as Location;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA5MzkzOA==", "bodyText": "This is never used", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461093938", "createdAt": "2020-07-27T18:42:44Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.ts", "diffHunk": "@@ -1,8 +1,90 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit, Input} from '@angular/core';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute, Router} from '@angular/router';\n+import {Location} from '../shared/location.model';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+import {SuccessCodesEnum, getMessage} from 'src/app/shared/success.codes.enum';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n \n @Component({\n   selector: 'location-details',\n   templateUrl: './location-details.component.html',\n   styleUrls: ['./location-details.component.scss'],\n })\n-export class LocationDetailsComponent {}\n+export class LocationDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  @Input() enabled = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA5NjI0Ng==", "bodyText": "You shouldn't be handling redirects in your component. Let the router handle this", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461096246", "createdAt": "2020-07-27T18:46:52Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.ts", "diffHunk": "@@ -1,8 +1,90 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit, Input} from '@angular/core';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute, Router} from '@angular/router';\n+import {Location} from '../shared/location.model';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+import {SuccessCodesEnum, getMessage} from 'src/app/shared/success.codes.enum';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n \n @Component({\n   selector: 'location-details',\n   templateUrl: './location-details.component.html',\n   styleUrls: ['./location-details.component.scss'],\n })\n-export class LocationDetailsComponent {}\n+export class LocationDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  @Input() enabled = true;\n+  location = {} as Location;\n+  locationBackup = {} as Location;\n+  locationId = '';\n+  constructor(\n+    private readonly modalService: BsModalService,\n+    private modalRef: BsModalRef,\n+    private readonly locationService: LocationService,\n+    private readonly toastr: ToastrService,\n+    private readonly route: ActivatedRoute,\n+    private readonly router: Router,\n+  ) {\n+    super();\n+  }\n+  openModal(template: unknown): void {\n+    this.modalRef = this.modalService.show(template);\n+  }\n+  closeModal(): void {\n+    this.modalRef.hide();\n+  }\n+  ngOnInit(): void {\n+    this.subs.add(\n+      this.route.params.subscribe((params) => {\n+        if (params['locationId']) {\n+          this.locationId = params.locationId as string;\n+        } else {\n+          void this.router.navigate(['/coordinator/locations']);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA5NjYwNQ==", "bodyText": "You don't need to unsubscribe from web requests", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461096605", "createdAt": "2020-07-27T18:47:34Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.ts", "diffHunk": "@@ -1,8 +1,90 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit, Input} from '@angular/core';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute, Router} from '@angular/router';\n+import {Location} from '../shared/location.model';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+import {SuccessCodesEnum, getMessage} from 'src/app/shared/success.codes.enum';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n \n @Component({\n   selector: 'location-details',\n   templateUrl: './location-details.component.html',\n   styleUrls: ['./location-details.component.scss'],\n })\n-export class LocationDetailsComponent {}\n+export class LocationDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  @Input() enabled = true;\n+  location = {} as Location;\n+  locationBackup = {} as Location;\n+  locationId = '';\n+  constructor(\n+    private readonly modalService: BsModalService,\n+    private modalRef: BsModalRef,\n+    private readonly locationService: LocationService,\n+    private readonly toastr: ToastrService,\n+    private readonly route: ActivatedRoute,\n+    private readonly router: Router,\n+  ) {\n+    super();\n+  }\n+  openModal(template: unknown): void {\n+    this.modalRef = this.modalService.show(template);\n+  }\n+  closeModal(): void {\n+    this.modalRef.hide();\n+  }\n+  ngOnInit(): void {\n+    this.subs.add(\n+      this.route.params.subscribe((params) => {\n+        if (params['locationId']) {\n+          this.locationId = params.locationId as string;\n+        } else {\n+          void this.router.navigate(['/coordinator/locations']);\n+        }\n+        this.getLocationDetails();\n+      }),\n+    );\n+  }\n+  getLocationDetails(): void {\n+    this.subs.add(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA5NzA1MQ==", "bodyText": "Why does this return a list? It should be one Location", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461097051", "createdAt": "2020-07-27T18:48:24Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.ts", "diffHunk": "@@ -1,8 +1,90 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit, Input} from '@angular/core';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute, Router} from '@angular/router';\n+import {Location} from '../shared/location.model';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+import {SuccessCodesEnum, getMessage} from 'src/app/shared/success.codes.enum';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n \n @Component({\n   selector: 'location-details',\n   templateUrl: './location-details.component.html',\n   styleUrls: ['./location-details.component.scss'],\n })\n-export class LocationDetailsComponent {}\n+export class LocationDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  @Input() enabled = true;\n+  location = {} as Location;\n+  locationBackup = {} as Location;\n+  locationId = '';\n+  constructor(\n+    private readonly modalService: BsModalService,\n+    private modalRef: BsModalRef,\n+    private readonly locationService: LocationService,\n+    private readonly toastr: ToastrService,\n+    private readonly route: ActivatedRoute,\n+    private readonly router: Router,\n+  ) {\n+    super();\n+  }\n+  openModal(template: unknown): void {\n+    this.modalRef = this.modalService.show(template);\n+  }\n+  closeModal(): void {\n+    this.modalRef.hide();\n+  }\n+  ngOnInit(): void {\n+    this.subs.add(\n+      this.route.params.subscribe((params) => {\n+        if (params['locationId']) {\n+          this.locationId = params.locationId as string;\n+        } else {\n+          void this.router.navigate(['/coordinator/locations']);\n+        }\n+        this.getLocationDetails();\n+      }),\n+    );\n+  }\n+  getLocationDetails(): void {\n+    this.subs.add(\n+      this.locationService\n+        .getLocationDetails(this.locationId)\n+        .subscribe((data: Location[]) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA5NzM2Mw==", "bodyText": "These should be two separate methods, dispatching on an untyped string is unsafe", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461097363", "createdAt": "2020-07-27T18:48:56Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.ts", "diffHunk": "@@ -1,8 +1,90 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit, Input} from '@angular/core';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute, Router} from '@angular/router';\n+import {Location} from '../shared/location.model';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+import {SuccessCodesEnum, getMessage} from 'src/app/shared/success.codes.enum';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n \n @Component({\n   selector: 'location-details',\n   templateUrl: './location-details.component.html',\n   styleUrls: ['./location-details.component.scss'],\n })\n-export class LocationDetailsComponent {}\n+export class LocationDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  @Input() enabled = true;\n+  location = {} as Location;\n+  locationBackup = {} as Location;\n+  locationId = '';\n+  constructor(\n+    private readonly modalService: BsModalService,\n+    private modalRef: BsModalRef,\n+    private readonly locationService: LocationService,\n+    private readonly toastr: ToastrService,\n+    private readonly route: ActivatedRoute,\n+    private readonly router: Router,\n+  ) {\n+    super();\n+  }\n+  openModal(template: unknown): void {\n+    this.modalRef = this.modalService.show(template);\n+  }\n+  closeModal(): void {\n+    this.modalRef.hide();\n+  }\n+  ngOnInit(): void {\n+    this.subs.add(\n+      this.route.params.subscribe((params) => {\n+        if (params['locationId']) {\n+          this.locationId = params.locationId as string;\n+        } else {\n+          void this.router.navigate(['/coordinator/locations']);\n+        }\n+        this.getLocationDetails();\n+      }),\n+    );\n+  }\n+  getLocationDetails(): void {\n+    this.subs.add(\n+      this.locationService\n+        .getLocationDetails(this.locationId)\n+        .subscribe((data: Location[]) => {\n+          this.location = data[0];\n+          this.locationBackup = JSON.parse(\n+            JSON.stringify(this.location),\n+          ) as Location;\n+        }),\n+    );\n+  }\n+  updateLocation(task: string): void {\n+    const locationToUpdate = {} as Location;\n+    if (task === 'update') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA5Nzk5Ng==", "bodyText": "code should already have this type", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461097996", "createdAt": "2020-07-27T18:50:03Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.ts", "diffHunk": "@@ -1,8 +1,90 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit, Input} from '@angular/core';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute, Router} from '@angular/router';\n+import {Location} from '../shared/location.model';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+import {SuccessCodesEnum, getMessage} from 'src/app/shared/success.codes.enum';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n \n @Component({\n   selector: 'location-details',\n   templateUrl: './location-details.component.html',\n   styleUrls: ['./location-details.component.scss'],\n })\n-export class LocationDetailsComponent {}\n+export class LocationDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  @Input() enabled = true;\n+  location = {} as Location;\n+  locationBackup = {} as Location;\n+  locationId = '';\n+  constructor(\n+    private readonly modalService: BsModalService,\n+    private modalRef: BsModalRef,\n+    private readonly locationService: LocationService,\n+    private readonly toastr: ToastrService,\n+    private readonly route: ActivatedRoute,\n+    private readonly router: Router,\n+  ) {\n+    super();\n+  }\n+  openModal(template: unknown): void {\n+    this.modalRef = this.modalService.show(template);\n+  }\n+  closeModal(): void {\n+    this.modalRef.hide();\n+  }\n+  ngOnInit(): void {\n+    this.subs.add(\n+      this.route.params.subscribe((params) => {\n+        if (params['locationId']) {\n+          this.locationId = params.locationId as string;\n+        } else {\n+          void this.router.navigate(['/coordinator/locations']);\n+        }\n+        this.getLocationDetails();\n+      }),\n+    );\n+  }\n+  getLocationDetails(): void {\n+    this.subs.add(\n+      this.locationService\n+        .getLocationDetails(this.locationId)\n+        .subscribe((data: Location[]) => {\n+          this.location = data[0];\n+          this.locationBackup = JSON.parse(\n+            JSON.stringify(this.location),\n+          ) as Location;\n+        }),\n+    );\n+  }\n+  updateLocation(task: string): void {\n+    const locationToUpdate = {} as Location;\n+    if (task === 'update') {\n+      locationToUpdate.name = this.location.name;\n+      locationToUpdate.description = this.location.description;\n+    } else {\n+      locationToUpdate.status = this.location.status === '1' ? '0' : '1';\n+    }\n+    this.subs.add(\n+      this.locationService\n+        .updateLocation(locationToUpdate, this.locationId)\n+        .subscribe((location: Location) => {\n+          if (getMessage(location.code as keyof typeof SuccessCodesEnum)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA5ODY0NA==", "bodyText": "You should replace this.location with the server's response, an update is supposed to return the new object", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461098644", "createdAt": "2020-07-27T18:51:15Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.ts", "diffHunk": "@@ -1,8 +1,90 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit, Input} from '@angular/core';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute, Router} from '@angular/router';\n+import {Location} from '../shared/location.model';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+import {SuccessCodesEnum, getMessage} from 'src/app/shared/success.codes.enum';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n \n @Component({\n   selector: 'location-details',\n   templateUrl: './location-details.component.html',\n   styleUrls: ['./location-details.component.scss'],\n })\n-export class LocationDetailsComponent {}\n+export class LocationDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  @Input() enabled = true;\n+  location = {} as Location;\n+  locationBackup = {} as Location;\n+  locationId = '';\n+  constructor(\n+    private readonly modalService: BsModalService,\n+    private modalRef: BsModalRef,\n+    private readonly locationService: LocationService,\n+    private readonly toastr: ToastrService,\n+    private readonly route: ActivatedRoute,\n+    private readonly router: Router,\n+  ) {\n+    super();\n+  }\n+  openModal(template: unknown): void {\n+    this.modalRef = this.modalService.show(template);\n+  }\n+  closeModal(): void {\n+    this.modalRef.hide();\n+  }\n+  ngOnInit(): void {\n+    this.subs.add(\n+      this.route.params.subscribe((params) => {\n+        if (params['locationId']) {\n+          this.locationId = params.locationId as string;\n+        } else {\n+          void this.router.navigate(['/coordinator/locations']);\n+        }\n+        this.getLocationDetails();\n+      }),\n+    );\n+  }\n+  getLocationDetails(): void {\n+    this.subs.add(\n+      this.locationService\n+        .getLocationDetails(this.locationId)\n+        .subscribe((data: Location[]) => {\n+          this.location = data[0];\n+          this.locationBackup = JSON.parse(\n+            JSON.stringify(this.location),\n+          ) as Location;\n+        }),\n+    );\n+  }\n+  updateLocation(task: string): void {\n+    const locationToUpdate = {} as Location;\n+    if (task === 'update') {\n+      locationToUpdate.name = this.location.name;\n+      locationToUpdate.description = this.location.description;\n+    } else {\n+      locationToUpdate.status = this.location.status === '1' ? '0' : '1';\n+    }\n+    this.subs.add(\n+      this.locationService\n+        .updateLocation(locationToUpdate, this.locationId)\n+        .subscribe((location: Location) => {\n+          if (getMessage(location.code as keyof typeof SuccessCodesEnum)) {\n+            this.toastr.success(\n+              getMessage(location.code as keyof typeof SuccessCodesEnum),\n+            );\n+          } else {\n+            this.toastr.success('Success');\n+          }\n+\n+          this.location.name = location.name;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA5OTA5NQ==", "bodyText": "Always use lower camel case for variable names", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461099095", "createdAt": "2020-07-27T18:52:00Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/shared/location.service.spec.ts", "diffHunk": "@@ -91,7 +57,28 @@ describe('LocationService', () => {\n     expect(entityServicespy.getCollection.calls.count()).toBe(1, 'one call');\n   });\n \n-  it('should post the  expected new Locations data', () => {\n+  it('should return expected Locations details of specific id', () => {\n+    const entityServiceSpy = jasmine.createSpyObj<EntityService<Location>>(\n+      'EntityService',\n+      ['getCollection'],\n+    );\n+    locationService = new LocationService(entityServiceSpy);\n+    entityServiceSpy.getCollection.and.returnValue(of(expectedLocationDetails));\n+    locationService\n+      .getLocationDetails(expectedLocatiodId)\n+      .subscribe(\n+        (Locations) =>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTEwMTM1MQ==", "bodyText": "This is never used, and I don't think it's a good api, it's not intuitive how this works. Please remove", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461101351", "createdAt": "2020-07-27T18:56:01Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/sub-sink.ts", "diffHunk": "@@ -0,0 +1,14 @@\n+import {SubscriptionLike} from 'rxjs';\n+export class SubSink {\n+  protected _subs: SubscriptionLike[] = [];\n+  add(...subscriptions: SubscriptionLike[]): void {\n+    this._subs = this._subs.concat(subscriptions);\n+  }\n+  set sink(subscription: SubscriptionLike) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTEwMTYyNw==", "bodyText": "get. LocationDetails is redundant because this is the location service. Should return a single Location", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461101627", "createdAt": "2020-07-27T18:56:32Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/shared/location.service.ts", "diffHunk": "@@ -14,4 +14,13 @@ export class LocationService {\n   addLocation(location: Location): Observable<Location> {\n     return this.entityService.post(JSON.stringify(location), 'locations');\n   }\n+  getLocationDetails(locationId: string): Observable<Location[]> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTEwMTgzOQ==", "bodyText": "update", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r461101839", "createdAt": "2020-07-27T18:56:55Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/shared/location.service.ts", "diffHunk": "@@ -14,4 +14,13 @@ export class LocationService {\n   addLocation(location: Location): Observable<Location> {\n     return this.entityService.post(JSON.stringify(location), 'locations');\n   }\n+  getLocationDetails(locationId: string): Observable<Location[]> {\n+    return this.entityService.getCollection('locations/' + locationId);\n+  }\n+  updateLocation(location: Location, locationId: string): Observable<Location> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a165339385dfea2b4ec215eea329f4ee726be8ed", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a165339385dfea2b4ec215eea329f4ee726be8ed", "committedDate": "2020-07-30T13:56:52Z", "message": "code review comments has been resolved"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NTk4NTQ5", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#pullrequestreview-458598549", "createdAt": "2020-07-30T17:11:31Z", "commit": {"oid": "a165339385dfea2b4ec215eea329f4ee726be8ed"}, "state": "COMMENTED", "comments": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNzoxMTozMlrOG5sQoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxODozNDo1MlrOG5vHIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE0NzE2OQ==", "bodyText": "This is a pretty awkward type to use all over the place because you don't really have an enum here. I would just make it a map since you need both the key and the value. If you only want values, but want a nice name for them, that's when you would use an enum. I would make success/error codes look like this\nconst errorMessages = {\n  ER_001: 'You do not have permission to view or add or update locations',\n  ER_002: 'Failed to update Location',\n  ER_003: `Can't reactive an already active location`,\n  ER_004: `Can't decommision an already decommissioned location`,\n};\n\nexport type ErrorCode = keyof typeof errorMessages;\n\nexport function getMessage(key: ErrorCode): string {\n  return errorMessages[key];\n}", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r463147169", "createdAt": "2020-07-30T17:11:32Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/entity/api.response.model.ts", "diffHunk": "@@ -1,4 +1,6 @@\n+import {SuccessCodesEnum} from '../shared/success.codes.enum';\n+\n export interface ApiResponse {\n   message: string;\n-  code: string;\n+  code: keyof typeof SuccessCodesEnum;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a165339385dfea2b4ec215eea329f4ee726be8ed"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE3NTUzNQ==", "bodyText": "If you use as Location you don't have include the same type again in expectedLocation: Location.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r463175535", "createdAt": "2020-07-30T18:01:14Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/entity/mockLocationData.ts", "diffHunk": "@@ -0,0 +1,50 @@\n+import {Location} from 'src/app/site-coordinator/location/shared/location.model';\n+export const expectedLocation: Location = {\n+  id: 2,\n+  customId: 'customid3',\n+  name: 'name -1-updated0',\n+  description: 'location-descp-updated',\n+  status: '1',\n+  studiesCount: 0,\n+} as Location;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a165339385dfea2b4ec215eea329f4ee726be8ed"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4MDgyNA==", "bodyText": "These tests cases should be written as a user action, not describing the test itself, for example\nit('should update the location when the update button is clicked'). This describes what the test is doing, not how it is doing it.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r463180824", "createdAt": "2020-07-30T18:10:45Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/edit-location/edit-location.component.spec.ts", "diffHunk": "@@ -0,0 +1,102 @@\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+} from '@angular/core/testing';\n+\n+import {EditLocationComponent} from './edit-location.component';\n+import {ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {BrowserAnimationsModule} from '@angular/platform-browser/animations';\n+import {HttpClientModule} from '@angular/common/http';\n+import {ToastrModule} from 'ngx-toastr';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {LocationService} from '../shared/location.service';\n+import {DebugElement} from '@angular/core';\n+import {By} from '@angular/platform-browser';\n+\n+describe('EditLocationComponent', () => {\n+  let component: EditLocationComponent;\n+  let fixture: ComponentFixture<EditLocationComponent>;\n+  let updateLocation: DebugElement;\n+  let cancelUpdate: DebugElement;\n+  let statusUpdate: DebugElement;\n+  let nameInput: DebugElement;\n+  let descriptionInput: DebugElement;\n+  beforeEach(async(async () => {\n+    const locationServiceSpy = jasmine.createSpyObj<LocationService>(\n+      'LocationService',\n+      ['update'],\n+    );\n+    await TestBed.configureTestingModule({\n+      declarations: [EditLocationComponent],\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        BrowserAnimationsModule,\n+        HttpClientModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [\n+        EntityService,\n+        {provide: LocationService, useValue: locationServiceSpy},\n+      ],\n+    }).compileComponents();\n+  }));\n+\n+  beforeEach(() => {\n+    fixture = TestBed.createComponent(EditLocationComponent);\n+    component = fixture.componentInstance;\n+    fixture.detectChanges();\n+    updateLocation = fixture.debugElement.query(By.css('[name=\"update\"]'));\n+    cancelUpdate = fixture.debugElement.query(By.css('[name=\"cancel\"]'));\n+    statusUpdate = fixture.debugElement.query(By.css('[name=\"status\"]'));\n+    nameInput = fixture.debugElement.query(By.css('[name=\"name\"]'));\n+    descriptionInput = fixture.debugElement.query(\n+      By.css('[name=\"description\"]'),\n+    );\n+  });\n+\n+  it('should create', () => {\n+    expect(component).toBeTruthy();\n+  });\n+  it('should not show a validation error if the input field are auto filled', () => {\n+    const nameInputs = nameInput.nativeElement as HTMLInputElement;\n+    const descriptionInputs = descriptionInput.nativeElement as HTMLInputElement;\n+    nameInputs.value = 'Location Name';\n+    descriptionInputs.value = 'Testing description value';\n+    fixture.detectChanges();\n+    const errorMsg = fixture.debugElement.query(By.css('.validation-error'));\n+    const errorHelpBlock = fixture.debugElement.query(\n+      By.css('.help-block.with-errors'),\n+    );\n+    expect(errorHelpBlock).toBeFalsy();\n+    expect(errorMsg).toBeFalsy();\n+  });\n+\n+  it('should click on update button and check service is called', fakeAsync(() => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a165339385dfea2b4ec215eea329f4ee726be8ed"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4MTI5NQ==", "bodyText": "What does the update function of the component do? I don't see any tests for the functionality of the component, just that the UI fires the correct event. Same for the other tests", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r463181295", "createdAt": "2020-07-30T18:11:42Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/edit-location/edit-location.component.spec.ts", "diffHunk": "@@ -0,0 +1,102 @@\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+} from '@angular/core/testing';\n+\n+import {EditLocationComponent} from './edit-location.component';\n+import {ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {BrowserAnimationsModule} from '@angular/platform-browser/animations';\n+import {HttpClientModule} from '@angular/common/http';\n+import {ToastrModule} from 'ngx-toastr';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {LocationService} from '../shared/location.service';\n+import {DebugElement} from '@angular/core';\n+import {By} from '@angular/platform-browser';\n+\n+describe('EditLocationComponent', () => {\n+  let component: EditLocationComponent;\n+  let fixture: ComponentFixture<EditLocationComponent>;\n+  let updateLocation: DebugElement;\n+  let cancelUpdate: DebugElement;\n+  let statusUpdate: DebugElement;\n+  let nameInput: DebugElement;\n+  let descriptionInput: DebugElement;\n+  beforeEach(async(async () => {\n+    const locationServiceSpy = jasmine.createSpyObj<LocationService>(\n+      'LocationService',\n+      ['update'],\n+    );\n+    await TestBed.configureTestingModule({\n+      declarations: [EditLocationComponent],\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        BrowserAnimationsModule,\n+        HttpClientModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [\n+        EntityService,\n+        {provide: LocationService, useValue: locationServiceSpy},\n+      ],\n+    }).compileComponents();\n+  }));\n+\n+  beforeEach(() => {\n+    fixture = TestBed.createComponent(EditLocationComponent);\n+    component = fixture.componentInstance;\n+    fixture.detectChanges();\n+    updateLocation = fixture.debugElement.query(By.css('[name=\"update\"]'));\n+    cancelUpdate = fixture.debugElement.query(By.css('[name=\"cancel\"]'));\n+    statusUpdate = fixture.debugElement.query(By.css('[name=\"status\"]'));\n+    nameInput = fixture.debugElement.query(By.css('[name=\"name\"]'));\n+    descriptionInput = fixture.debugElement.query(\n+      By.css('[name=\"description\"]'),\n+    );\n+  });\n+\n+  it('should create', () => {\n+    expect(component).toBeTruthy();\n+  });\n+  it('should not show a validation error if the input field are auto filled', () => {\n+    const nameInputs = nameInput.nativeElement as HTMLInputElement;\n+    const descriptionInputs = descriptionInput.nativeElement as HTMLInputElement;\n+    nameInputs.value = 'Location Name';\n+    descriptionInputs.value = 'Testing description value';\n+    fixture.detectChanges();\n+    const errorMsg = fixture.debugElement.query(By.css('.validation-error'));\n+    const errorHelpBlock = fixture.debugElement.query(\n+      By.css('.help-block.with-errors'),\n+    );\n+    expect(errorHelpBlock).toBeFalsy();\n+    expect(errorMsg).toBeFalsy();\n+  });\n+\n+  it('should click on update button and check service is called', fakeAsync(() => {\n+    const updateSpy = spyOn(component, 'update');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a165339385dfea2b4ec215eea329f4ee726be8ed"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4Mjg1Ng==", "bodyText": "Please remove commented out code", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r463182856", "createdAt": "2020-07-30T18:14:37Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.html", "diffHunk": "@@ -1 +1,154 @@\n-<p>location-details works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__1280 m-none\">\n+        <div class=\"flex__justify__space-between\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" alt=\"Backwards\" />\n+                    <span>Location Details</span>\n+                </a>\n+            </div>\n+            <div>\n+                <button class=\"btn font12__light-grey p-none\" name=\"edit_location\" (click)=\"openModal(template)\">\n+                    <img class=\"mr-xs\" src=\"assets/images/edit-icon.gif\" alt=\"editLocation\" />\n+                    <span class=\"text__deco font12__light-grey\">\n+                        Edit Location Details</span>\n+                </button>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+<div class=\"max__w__1280 add__location\">\n+    <div class=\"bg__white card__inside__pad box__shadow-cmn m-none p-lg\">\n+        <div class=\"border__bottom__periwinkle-gray flex__justify__space-between\">\n+            <div>\n+                <div class=\"mb-lg\">\n+                    <label for=\"Id\">Location ID</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.customId }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"mb-lg\">\n+                    <label for=\"name\">Location Name</label>\n+                    <div class=\"font16__grey\">{{ locationBackup.name }}</div>\n+                </div>\n+            </div>\n+            <div>\n+                <div class=\"mb-lg\">\n+                    <div class=\"active__\">\n+                        {{ locationBackup.status == \"1\" ? \"Active\" : \"DEACTIVATED\" }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+        <div class=\"\">\n+            <div class=\"\">\n+                <div class=\"mb-lg\">\n+                    <label>Description</label>\n+                    <div class=\"font16__grey\">\n+                        {{ locationBackup.description }}\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <div class=\"cards__list mb-xlg\">\n+        <div class=\"subheader__title mb-lg mt-xlg\">\n+            Associated Studies ( {{ locationBackup.studiesCount }} )\n+        </div>\n+        <ul *ngIf=\"location.studiesCount > 0\" data-test=\"studiesCount\" class=\"box___shadow__radius\">\n+            <li *ngFor=\"let study of location.studies\">{{ study }}</li>\n+        </ul>\n+    </div>\n+</div>\n+<ng-template #template>\n+\n+    <edit-location [location]=\"location\" [locationBackup]=\"locationBackup\" [locationId]=\"locationId\"\n+        (closeModalEvent)=\"closeModal($event)\">\n+    </edit-location>\n+</ng-template>\n+<!-- <ng-template #template>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a165339385dfea2b4ec215eea329f4ee726be8ed"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4NDUzOQ==", "bodyText": "Your test is just assertions. I would combine it with the previous test case.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r463184539", "createdAt": "2020-07-30T18:17:42Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.spec.ts", "diffHunk": "@@ -1,24 +1,126 @@\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {\n+  async,\n+  TestBed,\n+  ComponentFixture,\n+  fakeAsync,\n+  tick,\n+  flush,\n+} from '@angular/core/testing';\n \n import {LocationDetailsComponent} from './location-details.component';\n+import {BrowserAnimationsModule} from '@angular/platform-browser/animations';\n+import {HttpClientModule} from '@angular/common/http';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../../location/location.module';\n+import {ToastrModule} from 'ngx-toastr';\n+import {EntityService} from '../../../service/entity.service';\n+import {of} from 'rxjs';\n+import {LocationService} from '../shared/location.service';\n+import {ModalModule, BsModalRef} from 'ngx-bootstrap/modal';\n+import {By} from '@angular/platform-browser';\n+import {expectedList, expectedResponse} from 'src/app/entity/mockData';\n \n describe('LocationDetailsComponent', () => {\n   let component: LocationDetailsComponent;\n   let fixture: ComponentFixture<LocationDetailsComponent>;\n-\n   beforeEach(async(async () => {\n+    const locationServiceSpy = jasmine.createSpyObj<LocationService>(\n+      'LocationService',\n+      ['getLocationDetails', 'updateLocation'],\n+    );\n+\n     await TestBed.configureTestingModule({\n       declarations: [LocationDetailsComponent],\n-    }).compileComponents();\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule.withRoutes([\n+          {\n+            path: 'coordinator/locations',\n+            component: LocationDetailsComponent,\n+          },\n+        ]),\n+        LocationModule,\n+        BrowserAnimationsModule,\n+        HttpClientModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [\n+        EntityService,\n+        BsModalRef,\n+        {provide: LocationService, useValue: locationServiceSpy},\n+      ],\n+    })\n+      .compileComponents()\n+      .then(() => {\n+        fixture = TestBed.createComponent(LocationDetailsComponent);\n+        component = fixture.componentInstance;\n+        locationServiceSpy.getLocationDetails.and.returnValue(of(expectedList));\n+        locationServiceSpy.updateLocation.and.returnValue(of(expectedResponse));\n+        fixture.detectChanges();\n+        fixture.destroy();\n+      });\n+  }));\n+\n+  it('should create', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('it should call get Location Details in ngOninit', fakeAsync(() => {\n+    const spyobjs = spyOn(component, 'getLocationDetails');\n+    component.getLocationDetails();\n+    fixture.detectChanges();\n+    expect(spyobjs).toHaveBeenCalledTimes(1);\n   }));\n \n-  beforeEach(() => {\n-    fixture = TestBed.createComponent(LocationDetailsComponent);\n-    component = fixture.componentInstance;\n+  it('should get details based on specific location id', () => {\n     fixture.detectChanges();\n+    expect(component.location.id).toEqual(2);\n   });\n \n-  it('should create', () => {\n-    expect(component).toBeTruthy();\n+  it('should check input value is filled after data', () => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA4MTY4Mw=="}, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4NDgxOA==", "bodyText": "Not necessary.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r463184818", "createdAt": "2020-07-30T18:18:17Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/edit-location/edit-location.component.ts", "diffHunk": "@@ -0,0 +1,59 @@\n+import {Component, Input, EventEmitter, Output} from '@angular/core';\n+import {Location} from '../shared/location.model';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n+import {getMessage} from 'src/app/shared/success.codes.enum';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+@Component({\n+  selector: 'edit-location',\n+  templateUrl: './edit-location.component.html',\n+  styleUrls: ['./edit-location.component.scss'],\n+})\n+export class EditLocationComponent extends UnsubscribeOnDestroyAdapter {\n+  @Input() location = {} as Location;\n+  @Input() locationBackup = {} as Location;\n+  @Input() locationId = '';\n+  @Output() closeModalEvent = new EventEmitter<Location>();\n+\n+  constructor(\n+    private readonly locationService: LocationService,\n+    private readonly toastr: ToastrService,\n+  ) {\n+    super();\n+  }\n+  closeModal(): void {\n+    this.closeModalEvent.next(this.location);\n+  }\n+  update(): void {\n+    const locationToUpdate = {} as Location;\n+    locationToUpdate.name = this.location.name;\n+    locationToUpdate.description = this.location.description;\n+    this.updateLocation(locationToUpdate);\n+  }\n+  changeStatus(): void {\n+    const locationToUpdate = {} as Location;\n+    locationToUpdate.status = this.location.status === '1' ? '0' : '1';\n+    this.updateLocation(locationToUpdate);\n+  }\n+\n+  updateLocation(locationToUpdate: Location): void {\n+    this.subs.add(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a165339385dfea2b4ec215eea329f4ee726be8ed"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4NTA2Mg==", "bodyText": "You're right. Please ignore me", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r463185062", "createdAt": "2020-07-30T18:18:43Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.ts", "diffHunk": "@@ -1,8 +1,90 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit, Input} from '@angular/core';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute, Router} from '@angular/router';\n+import {Location} from '../shared/location.model';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+import {SuccessCodesEnum, getMessage} from 'src/app/shared/success.codes.enum';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n \n @Component({\n   selector: 'location-details',\n   templateUrl: './location-details.component.html',\n   styleUrls: ['./location-details.component.scss'],\n })\n-export class LocationDetailsComponent {}\n+export class LocationDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  @Input() enabled = true;\n+  location = {} as Location;\n+  locationBackup = {} as Location;\n+  locationId = '';\n+  constructor(\n+    private readonly modalService: BsModalService,\n+    private modalRef: BsModalRef,\n+    private readonly locationService: LocationService,\n+    private readonly toastr: ToastrService,\n+    private readonly route: ActivatedRoute,\n+    private readonly router: Router,\n+  ) {\n+    super();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA4NDMwMw=="}, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4NjI0OQ==", "bodyText": "This is a strange way to create an API. Typically a PUT should just replace the value on the server. But we can't change that now. Please just continue to let me know when these cases of the API design is restricting you come up.\nSee my comments in the service on how to change this.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r463186249", "createdAt": "2020-07-30T18:20:47Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.ts", "diffHunk": "@@ -1,8 +1,90 @@\n-import {Component} from '@angular/core';\n+import {Component, OnInit, Input} from '@angular/core';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute, Router} from '@angular/router';\n+import {Location} from '../shared/location.model';\n+import {LocationService} from '../shared/location.service';\n+import {ToastrService} from 'ngx-toastr';\n+import {SuccessCodesEnum, getMessage} from 'src/app/shared/success.codes.enum';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n \n @Component({\n   selector: 'location-details',\n   templateUrl: './location-details.component.html',\n   styleUrls: ['./location-details.component.scss'],\n })\n-export class LocationDetailsComponent {}\n+export class LocationDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  @Input() enabled = true;\n+  location = {} as Location;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA4NDYzMA=="}, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4ODMyMQ==", "bodyText": "Given what you said about the API this should actually be\nupdate(data: StatusUpdate | FieldUpdate, locationId: string): Observable<Location>\nwhere\ninterface StatusUpdateRequest {\n    status: string\n}\ninterface FieldUpdateRequest {\n    ... // fields we can update\n}\nunfortunately we don't have much ability to change the API, so we just have to do our best to write types that model what the API wants. I'll try to pay attention to the design docs when making future suggestions.\nThe type of EntityService is going to conflict with this. Since we don't have a conventional REST API I don't think EntityService is really going to be able to help here. I would just use the http service directly.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r463188321", "createdAt": "2020-07-30T18:24:29Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/shared/location.service.ts", "diffHunk": "@@ -14,4 +14,13 @@ export class LocationService {\n   addLocation(location: Location): Observable<Location> {\n     return this.entityService.post(JSON.stringify(location), 'locations');\n   }\n+  get(locationId: string): Observable<Location> {\n+    return this.entityService.get('locations/' + locationId);\n+  }\n+  update(location: Location, locationId: string): Observable<Location> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a165339385dfea2b4ec215eea329f4ee726be8ed"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4ODQ0OQ==", "bodyText": "No stringify needed.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r463188449", "createdAt": "2020-07-30T18:24:41Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/shared/location.service.ts", "diffHunk": "@@ -14,4 +14,13 @@ export class LocationService {\n   addLocation(location: Location): Observable<Location> {\n     return this.entityService.post(JSON.stringify(location), 'locations');\n   }\n+  get(locationId: string): Observable<Location> {\n+    return this.entityService.get('locations/' + locationId);\n+  }\n+  update(location: Location, locationId: string): Observable<Location> {\n+    return this.entityService.put(\n+      JSON.stringify(location),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a165339385dfea2b4ec215eea329f4ee726be8ed"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE5MjEwOQ==", "bodyText": "This should be something that would make sense to a human like \"edit\" or \"edit icon\"", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r463192109", "createdAt": "2020-07-30T18:31:25Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.html", "diffHunk": "@@ -1 +1,154 @@\n-<p>location-details works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__1280 m-none\">\n+        <div class=\"flex__justify__space-between\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" alt=\"Backwards\" />\n+                    <span>Location Details</span>\n+                </a>\n+            </div>\n+            <div>\n+                <button class=\"btn font12__light-grey p-none\" name=\"edit_location\" (click)=\"openModal(template)\">\n+                    <img class=\"mr-xs\" src=\"assets/images/edit-icon.gif\" alt=\"editLocation\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a165339385dfea2b4ec215eea329f4ee726be8ed"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE5Mzg4OQ==", "bodyText": "There isn't any <input> here. <label> is only a valid tag when associated with an input. See MDN for more information.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r463193889", "createdAt": "2020-07-30T18:34:52Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/location-details/location-details.component.html", "diffHunk": "@@ -1 +1,151 @@\n-<p>location-details works!</p>\n+<div class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__1280 m-none\">\n+        <div class=\"flex__justify__space-between\">\n+            <div>\n+                <a routerLink=\"/coordinator/locations\" class=\"subheader__title\">\n+                    <img src=\"assets/svgs/back-arrow.svg\" alt=\"\" />\n+                    <span>Location Details</span>\n+                </a>\n+            </div>\n+            <div>\n+                <button class=\"btn font12__light-grey p-none\" name=\"edit_location\" (click)=\"openModal(template)\">\n+                    <img class=\"mr-xs\" src=\"assets/images/edit-icon.gif\" alt=\"\" />\n+                    <span class=\"text__deco font12__light-grey\">\n+                        Edit Location Details</span>\n+                </button>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+<div class=\"max__w__1280 add__location\">\n+    <div class=\"bg__white card__inside__pad box__shadow-cmn m-none\">\n+        <div class=\"border__bottom__periwinkle-gray flex__justify__space-between\">\n+            <div>\n+                <div class=\"form-group\">\n+                    <label for=\"study\">Location ID</label>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA3NjMzNg=="}, "originalCommit": {"oid": "8f093eb9ccffff87c6be2d80ee48864e9d3d5dd8"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3146450397d57b3857969a15dd4ea9cec11ea93c", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/3146450397d57b3857969a15dd4ea9cec11ea93c", "committedDate": "2020-07-31T15:24:28Z", "message": "code review comments has been resolved"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MzI1Nzg1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#pullrequestreview-459325785", "createdAt": "2020-07-31T17:03:16Z", "commit": {"oid": "3146450397d57b3857969a15dd4ea9cec11ea93c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNzowMzoxNlrOG6PmXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNzowMzoxNlrOG6PmXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzcyNjE3Mg==", "bodyText": "What about should activate/deactivate site when decommission/reactivate is clicked. You also have two tests here now, this one isn't needed", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#discussion_r463726172", "createdAt": "2020-07-31T17:03:16Z", "author": {"login": "nikklassen"}, "path": "UR-web-app/src/app/site-coordinator/location/edit-location/edit-location.component.spec.ts", "diffHunk": "@@ -0,0 +1,102 @@\n+import {\n+  async,\n+  ComponentFixture,\n+  TestBed,\n+  fakeAsync,\n+} from '@angular/core/testing';\n+\n+import {EditLocationComponent} from './edit-location.component';\n+import {ModalModule} from 'ngx-bootstrap/modal';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {LocationModule} from '../location.module';\n+import {BrowserAnimationsModule} from '@angular/platform-browser/animations';\n+import {HttpClientModule} from '@angular/common/http';\n+import {ToastrModule} from 'ngx-toastr';\n+import {EntityService} from 'src/app/service/entity.service';\n+import {LocationService} from '../shared/location.service';\n+import {DebugElement} from '@angular/core';\n+import {By} from '@angular/platform-browser';\n+\n+describe('EditLocationComponent', () => {\n+  let component: EditLocationComponent;\n+  let fixture: ComponentFixture<EditLocationComponent>;\n+  let updateLocation: DebugElement;\n+  let cancelUpdate: DebugElement;\n+  let statusUpdate: DebugElement;\n+  let nameInput: DebugElement;\n+  let descriptionInput: DebugElement;\n+  beforeEach(async(async () => {\n+    const locationServiceSpy = jasmine.createSpyObj<LocationService>(\n+      'LocationService',\n+      ['update'],\n+    );\n+    await TestBed.configureTestingModule({\n+      declarations: [EditLocationComponent],\n+      imports: [\n+        ModalModule.forRoot(),\n+        RouterTestingModule,\n+        LocationModule,\n+        BrowserAnimationsModule,\n+        HttpClientModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [\n+        EntityService,\n+        {provide: LocationService, useValue: locationServiceSpy},\n+      ],\n+    }).compileComponents();\n+  }));\n+\n+  beforeEach(() => {\n+    fixture = TestBed.createComponent(EditLocationComponent);\n+    component = fixture.componentInstance;\n+    fixture.detectChanges();\n+    updateLocation = fixture.debugElement.query(By.css('[name=\"update\"]'));\n+    cancelUpdate = fixture.debugElement.query(By.css('[name=\"cancel\"]'));\n+    statusUpdate = fixture.debugElement.query(By.css('[name=\"status\"]'));\n+    nameInput = fixture.debugElement.query(By.css('[name=\"name\"]'));\n+    descriptionInput = fixture.debugElement.query(\n+      By.css('[name=\"description\"]'),\n+    );\n+  });\n+\n+  it('should create', () => {\n+    expect(component).toBeTruthy();\n+  });\n+  it('should not show a validation error if the input field are auto filled', () => {\n+    const nameInputs = nameInput.nativeElement as HTMLInputElement;\n+    const descriptionInputs = descriptionInput.nativeElement as HTMLInputElement;\n+    nameInputs.value = 'Location Name';\n+    descriptionInputs.value = 'Testing description value';\n+    fixture.detectChanges();\n+    const errorMsg = fixture.debugElement.query(By.css('.validation-error'));\n+    const errorHelpBlock = fixture.debugElement.query(\n+      By.css('.help-block.with-errors'),\n+    );\n+    expect(errorHelpBlock).toBeFalsy();\n+    expect(errorMsg).toBeFalsy();\n+  });\n+\n+  it('should click on update button and check service is called', fakeAsync(() => {\n+    const updateSpy = spyOn(component, 'update');", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4MTI5NQ=="}, "originalCommit": {"oid": "a165339385dfea2b4ec215eea329f4ee726be8ed"}, "originalPosition": 85}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2893674608e03405f79358f32165482fe63ab2e", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c2893674608e03405f79358f32165482fe63ab2e", "committedDate": "2020-08-03T15:40:45Z", "message": "review comments has been fixed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwOTE4NzQ1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#pullrequestreview-460918745", "createdAt": "2020-08-04T15:20:47Z", "commit": {"oid": "c2893674608e03405f79358f32165482fe63ab2e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a7f0a47d04d3439b343079968e2cdb02d11bae9", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4a7f0a47d04d3439b343079968e2cdb02d11bae9", "committedDate": "2020-08-05T06:28:23Z", "message": "Merge branch 'develop' of https://github.com/GoogleCloudPlatform/fda-mystudies into urwebapp-location-details\n\n# Conflicts:\n#\tUR-web-app/src/app/app.module.ts\n#\tUR-web-app/src/app/http-interceptors/auth.interceptor.ts\n#\tUR-web-app/src/app/sub-sink.ts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxODAwNDM0", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#pullrequestreview-461800434", "createdAt": "2020-08-05T15:54:20Z", "commit": {"oid": "4a7f0a47d04d3439b343079968e2cdb02d11bae9"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "415dd7736e1f9320727caa63ee9e6754479b141d", "author": {"user": {"login": "firdosebtc1", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/415dd7736e1f9320727caa63ee9e6754479b141d", "committedDate": "2020-08-05T16:17:42Z", "message": "Merge branch 'develop' into urwebapp-location-details\n\n# Conflicts:\n#\tUR-web-app/src/assets/css/style.scss"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxODI0NzUz", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/685#pullrequestreview-461824753", "createdAt": "2020-08-05T16:22:58Z", "commit": {"oid": "415dd7736e1f9320727caa63ee9e6754479b141d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 556, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}