{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxNjIxOTY3", "number": 787, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNTozNzoyOVrOEb6N6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNTozNzoyOVrOEb6N6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3NzAwODQzOnYy", "diffSide": "RIGHT", "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/UserControllerTest.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNTozNzoyOVrOHGIRkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDoyNDoyNlrOHGao-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE4OTA3Mg==", "bodyText": "why is this size 3? You created one superadmin user and one non-superadmin above, right?\nAlso please verify the values of users[1] and users[2] below too", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/787#discussion_r476189072", "createdAt": "2020-08-25T05:37:29Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/UserControllerTest.java", "diffHunk": "@@ -630,6 +631,57 @@ public void shouldReturnAdminNotFoundErrorForGetAdminDetailsAndApps() throws Exc\n             jsonPath(\"$.error_description\").value(ErrorCode.ADMIN_NOT_FOUND.getDescription()));\n   }\n \n+  @Test\n+  public void shouldReturnAdminsForGetAdmins() throws Exception {\n+    // Step 1: Set few admins\n+    testDataHelper.createSuperAdmin();\n+    testDataHelper.createNonSuperAdmin();\n+\n+    // Step 2: Call API and expect GET_ADMINS_SUCCESS message\n+    HttpHeaders headers = testDataHelper.newCommonHeaders();\n+    headers.set(USER_ID_HEADER, userRegAdminEntity.getId());\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_USERS.getPath()).headers(headers).contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isOk())\n+        .andExpect(jsonPath(\"$.users\").isArray())\n+        .andExpect(jsonPath(\"$.users\", hasSize(3)))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a78269c3014f367187c4ad536f7541fb3a5d795e"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjIxOTkzNg==", "bodyText": "We have used your suggested approach to assert bad request violations in other places, but here some of the fields are dynamically generated so we are using andExpect() to assert the values. The only thing that I could assert is the admin email ids,\nHere, the size is 3 because 2 admins are created in this test method and another one is created in @BeforeEach method.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/787#discussion_r476219936", "createdAt": "2020-08-25T06:59:30Z", "author": {"login": "chiranjibi009"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/UserControllerTest.java", "diffHunk": "@@ -630,6 +631,57 @@ public void shouldReturnAdminNotFoundErrorForGetAdminDetailsAndApps() throws Exc\n             jsonPath(\"$.error_description\").value(ErrorCode.ADMIN_NOT_FOUND.getDescription()));\n   }\n \n+  @Test\n+  public void shouldReturnAdminsForGetAdmins() throws Exception {\n+    // Step 1: Set few admins\n+    testDataHelper.createSuperAdmin();\n+    testDataHelper.createNonSuperAdmin();\n+\n+    // Step 2: Call API and expect GET_ADMINS_SUCCESS message\n+    HttpHeaders headers = testDataHelper.newCommonHeaders();\n+    headers.set(USER_ID_HEADER, userRegAdminEntity.getId());\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_USERS.getPath()).headers(headers).contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isOk())\n+        .andExpect(jsonPath(\"$.users\").isArray())\n+        .andExpect(jsonPath(\"$.users\", hasSize(3)))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE4OTA3Mg=="}, "originalCommit": {"oid": "a78269c3014f367187c4ad536f7541fb3a5d795e"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ4OTk3OQ==", "bodyText": "Gotcha. Thank you", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/787#discussion_r476489979", "createdAt": "2020-08-25T14:24:26Z", "author": {"login": "saminguyen"}, "path": "participant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/UserControllerTest.java", "diffHunk": "@@ -630,6 +631,57 @@ public void shouldReturnAdminNotFoundErrorForGetAdminDetailsAndApps() throws Exc\n             jsonPath(\"$.error_description\").value(ErrorCode.ADMIN_NOT_FOUND.getDescription()));\n   }\n \n+  @Test\n+  public void shouldReturnAdminsForGetAdmins() throws Exception {\n+    // Step 1: Set few admins\n+    testDataHelper.createSuperAdmin();\n+    testDataHelper.createNonSuperAdmin();\n+\n+    // Step 2: Call API and expect GET_ADMINS_SUCCESS message\n+    HttpHeaders headers = testDataHelper.newCommonHeaders();\n+    headers.set(USER_ID_HEADER, userRegAdminEntity.getId());\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_USERS.getPath()).headers(headers).contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isOk())\n+        .andExpect(jsonPath(\"$.users\").isArray())\n+        .andExpect(jsonPath(\"$.users\", hasSize(3)))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE4OTA3Mg=="}, "originalCommit": {"oid": "a78269c3014f367187c4ad536f7541fb3a5d795e"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2176, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}