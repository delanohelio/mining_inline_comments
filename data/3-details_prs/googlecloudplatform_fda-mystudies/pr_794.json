{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNDQ2ODUz", "number": 794, "title": "iOS - Fix offline syncing of study state.", "bodyText": "closes #793", "createdAt": "2020-08-24T11:18:17Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/794", "merged": true, "mergeCommit": {"oid": "d55ea8b317072e25dda61d83e55b5974a409f7ac"}, "closed": true, "closedAt": "2020-08-25T17:26:41Z", "author": {"login": "tushar-boston"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCAWSvAH2gAyNDcyNDQ2ODUzOjRmMzYyMWEwN2QxMDE2ZGE5N2E2ZTJjMzg0YmQzMzQ3ZjlkMWI0ZGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCangZAH2gAyNDcyNDQ2ODUzOmQ5ZTZmMDEwMDIyOWQyNTFjYzgwNTk2NmNmMWI5MzUwNzM2Yzk2MDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4f3621a07d1016da97a6e2c384bd3347f9d1b4da", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4f3621a07d1016da97a6e2c384bd3347f9d1b4da", "committedDate": "2020-08-24T10:49:26Z", "message": "Fix offline syncing of study state."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNTA5MTAw", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/794#pullrequestreview-473509100", "createdAt": "2020-08-24T13:50:58Z", "commit": {"oid": "4f3621a07d1016da97a6e2c384bd3347f9d1b4da"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzo1MDo1OFrOHFlrjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzo1NDo0MlrOHFl8zA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTYyMjI4Nw==", "bodyText": "why is this toggle and not = true?\nin what situation would we want to set this to false when calling syncOfflineSavedData ?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/794#discussion_r475622287", "createdAt": "2020-08-24T13:50:58Z", "author": {"login": "zohrehj"}, "path": "iOS/HPHC/HPHC/Networking/APIs/ResponseServices.swift", "diffHunk": "@@ -187,7 +189,7 @@ class ResponseServices: NSObject {\n     headers: [String: String]?,\n     delegate: NMWebServiceDelegate\n   ) {\n-\n+    self.isOfflineSyncRequest.toggle()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3621a07d1016da97a6e2c384bd3347f9d1b4da"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTYyMzcwMg==", "bodyText": "Do you simply ignore the NetworkErrors on offlineSyncRequest?\nIf yes, please leave a comment to explain why it is safe to ignore", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/794#discussion_r475623702", "createdAt": "2020-08-24T13:52:12Z", "author": {"login": "zohrehj"}, "path": "iOS/HPHC/HPHC/Networking/APIs/ResponseServices.swift", "diffHunk": "@@ -446,13 +448,13 @@ extension ResponseServices: NMWebServiceDelegate {\n       || requestName as String == ResponseMethods.updateActivityState.description\n     {\n \n-      if error.code == kNoNetworkErrorCode {\n+      if error.code == kNoNetworkErrorCode, !isOfflineSyncRequest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3621a07d1016da97a6e2c384bd3347f9d1b4da"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTYyNjcwMA==", "bodyText": "what happens if the sync fails?\nMaybe we should delete the previous value only when the sync request has succeeded?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/794#discussion_r475626700", "createdAt": "2020-08-24T13:54:42Z", "author": {"login": "zohrehj"}, "path": "iOS/HPHC/HPHC/Utils/Helpers/SyncUpdate/SyncUpdate.swift", "diffHunk": "@@ -106,7 +117,8 @@ extension SyncUpdate: NMWebServiceDelegate {\n   func startedRequest(_ manager: NetworkManager, requestName: NSString) {}\n \n   func finishedRequest(_ manager: NetworkManager, requestName: NSString, response: AnyObject?) {\n-    self.syncDataToServer()\n+    deleteSyncedObject()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3621a07d1016da97a6e2c384bd3347f9d1b4da"}, "originalPosition": 71}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3393ca6fbd32c49dd8785d99fbf47d3c9537492b", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/3393ca6fbd32c49dd8785d99fbf47d3c9537492b", "committedDate": "2020-08-24T15:47:23Z", "message": "Add sync logic comments."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NDk2Njgw", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/794#pullrequestreview-474496680", "createdAt": "2020-08-25T13:46:01Z", "commit": {"oid": "3393ca6fbd32c49dd8785d99fbf47d3c9537492b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8159c17ea9b78ec60d2cfde5b0c09ceea6e6a55", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a8159c17ea9b78ec60d2cfde5b0c09ceea6e6a55", "committedDate": "2020-08-25T17:02:50Z", "message": "Merge branch 'develop' into ios-offline-sync-patch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9e6f0100229d251cc805966cf1b9350736c9607", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d9e6f0100229d251cc805966cf1b9350736c9607", "committedDate": "2020-08-25T17:25:46Z", "message": "Merge branch 'develop' into ios-offline-sync-patch"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 721, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}