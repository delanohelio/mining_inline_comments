{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyNDk3MzE3", "number": 2073, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwNDo0NDoyNlrOE6ZLMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwNDo0NDozNlrOE6ZLpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NjY1MzMwOnYy", "diffSide": "RIGHT", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/StudyRepository.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwNDo0NDoyNlrOH1chew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwNTowODozM1rOH1dYwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTgwMzg5OQ==", "bodyText": "getStudyAppDetails()", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2073#discussion_r525803899", "createdAt": "2020-11-18T04:44:26Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/StudyRepository.java", "diffHunk": "@@ -83,4 +85,39 @@\n               + \"GROUP BY study.id \",\n       nativeQuery = true)\n   public List<StudyCount> findEnrolledCountByStudyId();\n+\n+  @Query(\n+      value =\n+          \"SELECT DISTINCT si.id AS studyId, si.name AS studyName, si.custom_id AS customStudyId,si.type AS studyType, \"\n+              + \"ai.id AS appId,ai.app_name AS appName,ai.custom_app_id AS customAppId, \"\n+              + \"st.target_enrollment AS targetEnrollment, stp.edit AS edit \"\n+              + \"FROM app_info ai, study_info si, sites st,sites_permissions stp \"\n+              + \"WHERE ai.id=si.app_info_id AND st.study_id=si.id AND si.id=:studyId AND stp.study_id=si.id AND stp.ur_admin_user_id=:userId \",\n+      nativeQuery = true)\n+  public Optional<StudyAppDetails> getStudyParticipant(String studyId, String userId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dafd281dcc2903f786e7b2032b15728484b1ee5d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTgxODA0OQ==", "bodyText": "changed to getStudyAppDetails()", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2073#discussion_r525818049", "createdAt": "2020-11-18T05:08:33Z", "author": {"login": "navya-BTC"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/StudyRepository.java", "diffHunk": "@@ -83,4 +85,39 @@\n               + \"GROUP BY study.id \",\n       nativeQuery = true)\n   public List<StudyCount> findEnrolledCountByStudyId();\n+\n+  @Query(\n+      value =\n+          \"SELECT DISTINCT si.id AS studyId, si.name AS studyName, si.custom_id AS customStudyId,si.type AS studyType, \"\n+              + \"ai.id AS appId,ai.app_name AS appName,ai.custom_app_id AS customAppId, \"\n+              + \"st.target_enrollment AS targetEnrollment, stp.edit AS edit \"\n+              + \"FROM app_info ai, study_info si, sites st,sites_permissions stp \"\n+              + \"WHERE ai.id=si.app_info_id AND st.study_id=si.id AND si.id=:studyId AND stp.study_id=si.id AND stp.ur_admin_user_id=:userId \",\n+      nativeQuery = true)\n+  public Optional<StudyAppDetails> getStudyParticipant(String studyId, String userId);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTgwMzg5OQ=="}, "originalCommit": {"oid": "dafd281dcc2903f786e7b2032b15728484b1ee5d"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NjY1NDQ1OnYy", "diffSide": "RIGHT", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/StudyRepository.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwNDo0NDozNlrOH1ciOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwNTowODozNlrOH1dY3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTgwNDA5MA==", "bodyText": "same here too", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2073#discussion_r525804090", "createdAt": "2020-11-18T04:44:36Z", "author": {"login": "saminguyen"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/StudyRepository.java", "diffHunk": "@@ -83,4 +85,39 @@\n               + \"GROUP BY study.id \",\n       nativeQuery = true)\n   public List<StudyCount> findEnrolledCountByStudyId();\n+\n+  @Query(\n+      value =\n+          \"SELECT DISTINCT si.id AS studyId, si.name AS studyName, si.custom_id AS customStudyId,si.type AS studyType, \"\n+              + \"ai.id AS appId,ai.app_name AS appName,ai.custom_app_id AS customAppId, \"\n+              + \"st.target_enrollment AS targetEnrollment, stp.edit AS edit \"\n+              + \"FROM app_info ai, study_info si, sites st,sites_permissions stp \"\n+              + \"WHERE ai.id=si.app_info_id AND st.study_id=si.id AND si.id=:studyId AND stp.study_id=si.id AND stp.ur_admin_user_id=:userId \",\n+      nativeQuery = true)\n+  public Optional<StudyAppDetails> getStudyParticipant(String studyId, String userId);\n+\n+  @Query(\n+      value =\n+          \"SELECT DISTINCT si.id AS studyId, si.name AS studyName, si.custom_id AS customStudyId,si.type AS studyType, \"\n+              + \"ai.id AS appId,ai.app_name AS appName,ai.custom_app_id AS customAppId, \"\n+              + \"st.target_enrollment AS targetEnrollment \"\n+              + \"FROM app_info ai, study_info si, sites st \"\n+              + \"WHERE ai.id=si.app_info_id AND st.study_id=si.id AND si.id=:studyId \",\n+      nativeQuery = true)\n+  public Optional<StudyAppDetails> getStudyParticipantForSuperAdmin(String studyId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dafd281dcc2903f786e7b2032b15728484b1ee5d"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTgxODA3Nw==", "bodyText": "changed to getStudyAppDetailsForSuperAdmin()", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2073#discussion_r525818077", "createdAt": "2020-11-18T05:08:36Z", "author": {"login": "navya-BTC"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/StudyRepository.java", "diffHunk": "@@ -83,4 +85,39 @@\n               + \"GROUP BY study.id \",\n       nativeQuery = true)\n   public List<StudyCount> findEnrolledCountByStudyId();\n+\n+  @Query(\n+      value =\n+          \"SELECT DISTINCT si.id AS studyId, si.name AS studyName, si.custom_id AS customStudyId,si.type AS studyType, \"\n+              + \"ai.id AS appId,ai.app_name AS appName,ai.custom_app_id AS customAppId, \"\n+              + \"st.target_enrollment AS targetEnrollment, stp.edit AS edit \"\n+              + \"FROM app_info ai, study_info si, sites st,sites_permissions stp \"\n+              + \"WHERE ai.id=si.app_info_id AND st.study_id=si.id AND si.id=:studyId AND stp.study_id=si.id AND stp.ur_admin_user_id=:userId \",\n+      nativeQuery = true)\n+  public Optional<StudyAppDetails> getStudyParticipant(String studyId, String userId);\n+\n+  @Query(\n+      value =\n+          \"SELECT DISTINCT si.id AS studyId, si.name AS studyName, si.custom_id AS customStudyId,si.type AS studyType, \"\n+              + \"ai.id AS appId,ai.app_name AS appName,ai.custom_app_id AS customAppId, \"\n+              + \"st.target_enrollment AS targetEnrollment \"\n+              + \"FROM app_info ai, study_info si, sites st \"\n+              + \"WHERE ai.id=si.app_info_id AND st.study_id=si.id AND si.id=:studyId \",\n+      nativeQuery = true)\n+  public Optional<StudyAppDetails> getStudyParticipantForSuperAdmin(String studyId);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTgwNDA5MA=="}, "originalCommit": {"oid": "dafd281dcc2903f786e7b2032b15728484b1ee5d"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1568, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}