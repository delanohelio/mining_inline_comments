{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3ODI4NDE5", "number": 401, "title": "iOS - Refresh activities list when new run available.", "bodyText": "This will refresh the activities list automatically when a user is on the activities screen and a new run is available or any current run is expired. This also has a small fix mentioned here #234.", "createdAt": "2020-05-14T08:15:58Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/401", "merged": true, "mergeCommit": {"oid": "3f084e90bb8f5caa2c484d4f9e07b44c098c199d"}, "closed": true, "closedAt": "2020-05-20T07:50:01Z", "author": {"login": "tushar-boston"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchI8nfAH2gAyNDE3ODI4NDE5OjgxZjUzMjdlYjc3YTZlMWU1OTAzY2RhYjRkZjlhZTc1YjliMzI3Mzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABci1vlXgH2gAyNDE3ODI4NDE5OjE0YWU4OGQ2Y2I2ZTg4NTEzNmNhMDY0Yjg0N2I3NGJmNGJhNTg2N2Y=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "81f5327eb77a6e1e5903cdab4df9ae75b9b32738", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/81f5327eb77a6e1e5903cdab4df9ae75b9b32738", "committedDate": "2020-05-14T08:11:02Z", "message": "Refresh activities list when new run available."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExOTUxNzA3", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/401#pullrequestreview-411951707", "createdAt": "2020-05-14T15:59:04Z", "commit": {"oid": "81f5327eb77a6e1e5903cdab4df9ae75b9b32738"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNTo1OTowNFrOGVjLqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxNDo0MjoyNlrOGWHyIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI0OTcwNg==", "bodyText": "Can studyID = userInfo[\"studyId\"] as? String be moved to the guard?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/401#discussion_r425249706", "createdAt": "2020-05-14T15:59:04Z", "author": {"login": "nikklassen"}, "path": "iOS/HPHC/HPHC/AppDelegate.swift", "diffHunk": "@@ -936,6 +939,15 @@ class AppDelegate: UIResponder, UIApplicationDelegate {\n     }\n   }\n \n+  private func refreshStudyActivitiesState(with userInfo: JSONDictionary) {\n+    guard let currentStudyID = Study.currentStudy?.studyId else { return }\n+    if let studyID = userInfo[\"studyId\"] as? String, currentStudyID == studyID {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81f5327eb77a6e1e5903cdab4df9ae75b9b32738"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTg0OTM3Nw==", "bodyText": "Just to make sure because I'm not familiar with iOS, could this be added multiple times?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/401#discussion_r425849377", "createdAt": "2020-05-15T14:42:26Z", "author": {"login": "nikklassen"}, "path": "iOS/HPHC/HPHC/Controllers/StudyUI/ActivityUI/ActivitiesViewController.swift", "diffHunk": "@@ -143,6 +148,20 @@ class ActivitiesViewController: UIViewController {\n     }\n   }\n \n+  private func addObservers() {\n+    // Add activity refresh notification observer.\n+    NotificationCenter.default.addObserver(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81f5327eb77a6e1e5903cdab4df9ae75b9b32738"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "514a9a1939495bab1294b5d1870625cf1b6c994e", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/514a9a1939495bab1294b5d1870625cf1b6c994e", "committedDate": "2020-05-18T07:31:11Z", "message": "Guard cleanup for refreshStudyActivitiesState."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NTI1MTI5", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/401#pullrequestreview-414525129", "createdAt": "2020-05-19T14:48:16Z", "commit": {"oid": "514a9a1939495bab1294b5d1870625cf1b6c994e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14ae88d6cb6e885136ca064b847b74bf4ba5867f", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/14ae88d6cb6e885136ca064b847b74bf4ba5867f", "committedDate": "2020-05-19T14:56:27Z", "message": "Merge branch 'early-access' into ios-ui-patch-2"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1066, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}